const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./pe-wasm-ihfvgCko.js","./_commonjsHelpers-DCkdB7M8.js","./statsWorker-CeupFwGw.js","./utils-C3vuNDD-.js","./utils-CA7p_e2p.js","./utils-7hKZ6ZBe.js","./ClassBreaksDefinition-DrC74yjc.js","./geometryEngineWorker-BiqU-FdE.js","./geometryEngineJSON-BwrklJA_.js","./geometryEngineBase-yFIvKOkM.js","./json-Wa8cmqdu.js","./CSVSourceWorker-BWRnw5cy.js","./date-DLgTylpo.js","./OptimizedFeature-D3320lj0.js","./FeatureStore-DPbWYJDK.js","./featureConversionUtils-1gMcYmRJ.js","./OptimizedFeatureSet-Blu9Ckm7.js","./BoundsStore-DmKZMpZi.js","./PooledRBush-DtRx6CTi.js","./timeSupport-CnXyY5Qx.js","./queryUtils-CwPqVSBK.js","./optimizedFeatureQueryEngineAdapter-CPw0ThKj.js","./QueryEngine-B79VJ0Eh.js","./WhereClause-BJhvjWsn.js","./TimeOnly-Cs51moYZ.js","./QueryEngineCapabilities-DjYb9CEb.js","./number-BFdUGxmu.js","./clientSideDefaults-4mGdg4ix.js","./capabilities-Y9lFlGVh.js","./EdgeProcessingWorker-CRKsNh3t.js","./InterleavedLayout-BWMq8nIu.js","./BufferView-B9O7bAGv.js","./types-D0PSWh4d.js","./Util-Gk2XI9GV.js","./edgeProcessing-DHnrISRw.js","./deduplicate-Dp-kQiCI.js","./Indices-BtzNUPFJ.js","./VertexAttribute-BdZWZuT1.js","./glUtil-CakMA_Q2.js","./VertexElementDescriptor-BOD-G50G.js","./ElevationSamplerWorker-DKfIOhp7.js","./MeshLocalVertexSpace-SY8G2dy-.js","./vertexSpaceConversion-Bhf0t2J6.js","./mat3f64-q3fE-ZOt.js","./mat4f64-CSKppSlJ.js","./spatialReferenceEllipsoidUtils-C156E205.js","./computeTranslationToOriginAndRotation-ZlHqNFok.js","./projectPointToVector-DVN8fluz.js","./meshVertexSpaceUtils-Bu3_WRRG.js","./vec3-DfWx2aEX.js","./vec4-CLgptRAW.js","./FeatureServiceSnappingSourceWorker-DMYPLaV4.js","./pbfQueryUtils-iJCY45Wd.js","./pbf-C22yZSzm.js","./query-Bh9wQTG2.js","./ByteSizeUnit-BsxeN7wM.js","./GeoJSONSourceWorker-C9bKm0Xo.js","./geojson-BzFDOQPZ.js","./sourceUtils-tbMTmSKQ.js","./MemorySourceWorker-C5PDn9do.js","./objectIdUtils-4dd1rf9p.js","./PBFDecoderWorker-CF71cQtA.js","./FeaturePipelineWorker-CfOF6LzE.js","./AttributeStore-BpfEVEhO.js","./LabelMetric-p8Vo3DNf.js","./Program-CdS23I-N.js","./BufferObject-2Td0Kv4c.js","./UpdateTracking2D-B4C358IZ.js","./BidiEngine-DNnuvc1i.js","./GeometryUtils-CrHdthll.js","./Rect-CUzevAry.js","./BindType-BmZEZMMh.js","./MeshWriterRegistry-CLnttNoN.js","./PieChartMeshWriter-KP2Bnrjn.js","./TurboLine-DAcs2C7T.js","./earcut-Lltz9D9k.js","./constants-F8oTIn7N.js","./grouping-BlEqm8CO.js","./ogcFeatureUtils-BtUwnYjb.js","./CircularArray-CujHzHWW.js","./createConnection-BH4Vvugu.js","./PointCloudWorker-BUYbpX93.js","./quat-CVl3iR4g.js","./quatf64-aQ5IuZRd.js","./vec3f32-nZdmKIgz.js","./PointCloudUniqueValueRenderer-BWSWEVRK.js","./I3SBinaryReader-B7-RnA8Y.js","./orientedBoundingBox-3eqgIjAg.js","./plane-pI6IAlNJ.js","./RasterWorker-j4g9THxu.js","./dataUtils-CDYv7A7M.js","./RasterSymbolizer-DiCUIi91.js","./PolynomialTransform-Bm6r3AEE.js","./rasterProjectionHelper-Dqm3xi24.js","./SceneLayerSnappingSourceWorker-DM-Lu7gi.js","./lineSegment-VVJfBTQ_.js","./sphere-T8qGINhP.js","./Octree-DunQF4_p.js","./SceneLayerWorker-n_TYPi8Y.js","./I3SUtil-n4UOWZDy.js","./projectVectorToVector-DGbRV3RB.js","./floatRGBA-CpVDYbaY.js","./NormalAttribute.glsl-A_2ZufTM.js","./interfaces-DDtDqZYj.js","./WFSSourceWorker--w9g4Yqa.js","./wfsUtils-DvMCwrKy.js","./xmlUtils-CtUoQO7q.js","./WorkerTileHandler-BUnkCLgq.js","./enums-BRzLM11V.js","./config-MDUrh2eL.js","./StyleDefinition-CD0ggnu2.js","./SourceLayerData-DGvlCPYa.js","./StyleRepository-DYeCfJqr.js","./HUDMaterial.glsl-BvEi0gEL.js","./AttributeArray-B2UyY8-e.js","./requestImageUtils-CET72JOQ.js","./basicInterfaces-CZwQPxTp.js","./boundedPlane-DECIyiSk.js","./renderState-kc7rtfiK.js","./doublePrecisionUtils-B0owpBza.js","./NestedMap-GuqgquCN.js","./IntersectorInterfaces-dI_rFEZm.js","./VertexArrayObject-BU_PqsFN.js","./triangle-BmQuLC9l.js","./Popup-_VSlW92v.js","./ReactiveSet-DSpV1TzB.js","./AttachmentInfo-CRm9cATC.js","./utils-BkZ33pIR.js","./cimSymbolUtils-CH1c1428.js","./executeQueryJSON-AqgjM49s.js","./shared-DWMEMk0z.js","./Association-CR4scVHy.js","./ElevationLayer-D1ZBigVl.js","./ArcGISCachedService-BgU2gqRJ.js","./TileInfoTilemapCache-CdxDTQvp.js","./TilemapCache-Lg-dZQne.js","./layersCreator-C4uZ9N3H.js","./portalLayers-Clh1dYeE.js","./associatedFeatureServiceUtils-DHhWHzb6.js","./fetchService-BfNLGOmy.js","./arcgisLayers-iCPmBIHq.js","./arcadeUtils-CMP4MaPX.js","./languageUtils-CKKHoFqB.js","./ImmutableArray-BPVd6ESQ.js","./webStyleSymbolUtils-gI1wOmW6.js","./devEnvironmentUtils-CnNDiFMM.js","./webglDeps-C3pr28IQ.js","./ProgramTemplate-t5Z5fobM.js","./mapViewDeps-CwWdWsPX.js","./FeatureCommandQueue-Du2O2zJ7.js","./WGLContainer-BOGow5OB.js","./Container-BEOYuYAx.js","./SDFHelper-6ASQ206h.js","./GridShader-DQ0A3Tgp.js","./testSVGPremultipliedAlpha-8xu06Iti.js","./RenderingContext-DDausec3.js","./rasterizingUtils-BpMwvKmT.js","./utils-CGBPVNrS.js","./GraphicsView2D-Cv73ViW0.js","./normalizeUtilsSync-Ae1WbTBP.js","./GraphicContainer-Nl7tGIJg.js","./AGraphicContainer-CKiE-wPi.js","./TechniqueInstance-mcfjFDRH.js","./TileContainer-C7S_fPT6.js","./geodesicUtils-_7rGv4VG.js","./TileLayerView2D-DwXROh-u.js","./imageUtils-DhxnBO0x.js","./Bitmap-YsOH11Zt.js","./LayerView-BwugUvnP.js","./HighlightGraphicContainer-DWQKjdkY.js","./RefreshableLayerView-B-AnIH_H.js","./MapServiceLayerViewHelper-De8WzECu.js","./floorFilterUtils-DZ5C6FQv.js","./drapedUtils-LbgTEx9i.js","./sublayerUtils-XOLQsQOG.js","./popupUtils-DwcniOWB.js","./FeatureLayerView2D-BqJU0IYU.js","./timeSupport-CY0QqOPa.js","./HighlightCounter-Czi-fdpx.js","./BaseDynamicLayerView2D-Ba7ByeW8.js","./BitmapContainer-eFaR6-xN.js","./ExportStrategy-DkAHxDak.js","./CatalogLayerView2D-DspCUSAR.js","./CatalogDynamicGroupLayerView2D-CAimg2-e.js","./CatalogFootprintLayerView2D-g8tGZH2A.js","./GeoRSSLayerView2D-xZLz3noe.js","./GraphicsLayerView2D-CutN1h38.js","./GroupLayerView2D-BLINwa7E.js","./ImageryLayerView2D-CjQHJy19.js","./RasterVFDisplayObject-QiW7GQ7Z.js","./ImageryTileLayerView2D-CvaqGWaj.js","./multidimensionalUtils-DJcjm9E4.js","./rasterUtils-BS9pXaIE.js","./RawBlockCache-CUOuBRqn.js","./KMLLayerView2D-CvqVTF6C.js","./kmlUtils-ad4KOSF0.js","./KnowledgeGraphLayerView2D-CAPOE8Ho.js","./MapImageLayerView2D-CtCSl1Yu.js","./ExportImageParameters-mEE636YO.js","./MapNotesLayerView2D-DwPZQ62f.js","./MediaLayerView2D-h-tUrcml.js","./perspectiveUtils-CtypG6Es.js","./OverlayContainer-DM_L7W2E.js","./OGCFeatureLayerView2D-BhIeekVj.js","./RouteLayerView2D-CFQ4J_E2.js","./Stop-BwYxcvUf.js","./StreamLayerView2D-BiZC8d1Z.js","./SubtypeGroupLayerView2D-DKhpp18j.js","./VectorTileLayerView2D-ndjveXHj.js","./VideoLayerView2D-CzLezjbI.js","./GraphicsLayer-CJyuFMJF.js","./TelemetryDisplay-BfxGb7mh.js","./WMSLayerView2D-OYlTs-63.js","./ExportWMSImageParameters-DD6Ynpbl.js","./WMTSLayerView2D-C9AidIA7.js","./apng-BmeEZxed.js","./calcite-button-CbVluA9b.js","./form-CheE62yz.js","./interactive-BijQZAgI.js","./label-D3G5-ijJ.js","./component-6CIDVndn.js","./loadable-CXVfTPGI.js","./locale-CpKfYt3v.js","./key-D63ExP77.js","./t9n-it3I9VLF.js","./loader-Dy1tO8cH.js","./webdocSaveUtils-DbI3WrjP.js","./originUtils-D69mHv66.js","./multiOriginJSONSupportUtils-C0wm8_Yw.js","./resourceUtils-DwSkNXS4.js","./resourceUtils-DmgYgEHL.js","./saveUtils-DNXYhBFH.js","./editingSupport-BMIYrZ4t.js","./infoFor3D-CxdEiWhp.js","./layersLoader-nuObLk4D.js","./featureLayerUtils-CwSrpTEQ.js","./utils-Cs-8bWa6.js","./FeatureLayerSource-CHbmpxb5.js","./External-BbfQzIsI.js","./MeshTransform-CtW31jVJ.js","./QueryTask-DsYwj8v4.js","./executeForIds-BlqoHe2j.js","./BinsQuery-UVfF1CPh.js","./queryAssociations-DzoJQAdj.js","./synthesizeAssociationGeometries-nVL1-Zbu.js","./calcite-loader-DmOo300H.js","./calcite-tooltip-DuvO-zwH.js","./floating-ui-Zpc-4p5L.js","./debounce-BOqmhDXu.js","./openCloseComponent-CINPgLmL.js","./FloatingArrow-CZwCdYiL.js","./calcite-scrim-CketMvFK.js","./scrim-BtzEbKiv.js","./calcite-action-DbX3VyGl.js","./action-ChTMy0X2.js","./calcite-panel-h_5sOXgQ.js","./panel-MbJM33ye.js","./action-menu-D7TT6yNa.js","./popover-syxs7goX.js","./focusTrapComponent-CAJUr2bF.js","./calcite-popover-d-INBawo.js","./calcite-sheet-BFq5GhBT.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();function dX(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var j8={exports:{}},s2={},V8={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hv=Symbol.for("react.element"),pX=Symbol.for("react.portal"),hX=Symbol.for("react.fragment"),fX=Symbol.for("react.strict_mode"),mX=Symbol.for("react.profiler"),yX=Symbol.for("react.provider"),gX=Symbol.for("react.context"),vX=Symbol.for("react.forward_ref"),wX=Symbol.for("react.suspense"),_X=Symbol.for("react.memo"),bX=Symbol.for("react.lazy"),LP=Symbol.iterator;function SX(e){return e===null||typeof e!="object"?null:(e=LP&&e[LP]||e["@@iterator"],typeof e=="function"?e:null)}var U8={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z8=Object.assign,G8={};function mm(e,t,r){this.props=e,this.context=t,this.refs=G8,this.updater=r||U8}mm.prototype.isReactComponent={};mm.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};mm.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function B8(){}B8.prototype=mm.prototype;function WA(e,t,r){this.props=e,this.context=t,this.refs=G8,this.updater=r||U8}var ZA=WA.prototype=new B8;ZA.constructor=WA;z8(ZA,mm.prototype);ZA.isPureReactComponent=!0;var FP=Array.isArray,q8=Object.prototype.hasOwnProperty,JA={current:null},H8={key:!0,ref:!0,__self:!0,__source:!0};function W8(e,t,r){var i,n={},s=null,o=null;if(t!=null)for(i in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)q8.call(t,i)&&!H8.hasOwnProperty(i)&&(n[i]=t[i]);var a=arguments.length-2;if(a===1)n.children=r;else if(1<a){for(var u=Array(a),d=0;d<a;d++)u[d]=arguments[d+2];n.children=u}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)n[i]===void 0&&(n[i]=a[i]);return{$$typeof:hv,type:e,key:s,ref:o,props:n,_owner:JA.current}}function $X(e,t){return{$$typeof:hv,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function KA(e){return typeof e=="object"&&e!==null&&e.$$typeof===hv}function TX(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var DP=/\/+/g;function B$(e,t){return typeof e=="object"&&e!==null&&e.key!=null?TX(""+e.key):t.toString(36)}function Tw(e,t,r,i,n){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case hv:case pX:o=!0}}if(o)return o=e,n=n(o),e=i===""?"."+B$(o,0):i,FP(n)?(r="",e!=null&&(r=e.replace(DP,"$&/")+"/"),Tw(n,t,r,"",function(d){return d})):n!=null&&(KA(n)&&(n=$X(n,r+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(DP,"$&/")+"/")+e)),t.push(n)),1;if(o=0,i=i===""?".":i+":",FP(e))for(var a=0;a<e.length;a++){s=e[a];var u=i+B$(s,a);o+=Tw(s,t,r,u,n)}else if(u=SX(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=i+B$(s,a++),o+=Tw(s,t,r,u,n);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function e1(e,t,r){if(e==null)return e;var i=[],n=0;return Tw(e,i,"","",function(s){return t.call(r,s,n++)}),i}function xX(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var xi={current:null},xw={transition:null},EX={ReactCurrentDispatcher:xi,ReactCurrentBatchConfig:xw,ReactCurrentOwner:JA};function Z8(){throw Error("act(...) is not supported in production builds of React.")}De.Children={map:e1,forEach:function(e,t,r){e1(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return e1(e,function(){t++}),t},toArray:function(e){return e1(e,function(t){return t})||[]},only:function(e){if(!KA(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};De.Component=mm;De.Fragment=hX;De.Profiler=mX;De.PureComponent=WA;De.StrictMode=fX;De.Suspense=wX;De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EX;De.act=Z8;De.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=z8({},e.props),n=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=JA.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)q8.call(t,u)&&!H8.hasOwnProperty(u)&&(i[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)i.children=r;else if(1<u){a=Array(u);for(var d=0;d<u;d++)a[d]=arguments[d+2];i.children=a}return{$$typeof:hv,type:e.type,key:n,ref:s,props:i,_owner:o}};De.createContext=function(e){return e={$$typeof:gX,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:yX,_context:e},e.Consumer=e};De.createElement=W8;De.createFactory=function(e){var t=W8.bind(null,e);return t.type=e,t};De.createRef=function(){return{current:null}};De.forwardRef=function(e){return{$$typeof:vX,render:e}};De.isValidElement=KA;De.lazy=function(e){return{$$typeof:bX,_payload:{_status:-1,_result:e},_init:xX}};De.memo=function(e,t){return{$$typeof:_X,type:e,compare:t===void 0?null:t}};De.startTransition=function(e){var t=xw.transition;xw.transition={};try{e()}finally{xw.transition=t}};De.unstable_act=Z8;De.useCallback=function(e,t){return xi.current.useCallback(e,t)};De.useContext=function(e){return xi.current.useContext(e)};De.useDebugValue=function(){};De.useDeferredValue=function(e){return xi.current.useDeferredValue(e)};De.useEffect=function(e,t){return xi.current.useEffect(e,t)};De.useId=function(){return xi.current.useId()};De.useImperativeHandle=function(e,t,r){return xi.current.useImperativeHandle(e,t,r)};De.useInsertionEffect=function(e,t){return xi.current.useInsertionEffect(e,t)};De.useLayoutEffect=function(e,t){return xi.current.useLayoutEffect(e,t)};De.useMemo=function(e,t){return xi.current.useMemo(e,t)};De.useReducer=function(e,t,r){return xi.current.useReducer(e,t,r)};De.useRef=function(e){return xi.current.useRef(e)};De.useState=function(e){return xi.current.useState(e)};De.useSyncExternalStore=function(e,t,r){return xi.current.useSyncExternalStore(e,t,r)};De.useTransition=function(){return xi.current.useTransition()};De.version="18.3.1";V8.exports=De;var jr=V8.exports;const Qx=dX(jr);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MX=jr,IX=Symbol.for("react.element"),CX=Symbol.for("react.fragment"),AX=Object.prototype.hasOwnProperty,RX=MX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,OX={key:!0,ref:!0,__self:!0,__source:!0};function J8(e,t,r){var i,n={},s=null,o=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)AX.call(t,i)&&!OX.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:IX,type:e,key:s,ref:o,props:n,_owner:RX.current}}s2.Fragment=CX;s2.jsx=J8;s2.jsxs=J8;j8.exports=s2;var ze=j8.exports,Xx={},K8={exports:{}},Sn={},Y8={exports:{}},Q8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(q,pe){var Ie=q.length;q.push(pe);e:for(;0<Ie;){var dt=Ie-1>>>1,Wt=q[dt];if(0<n(Wt,pe))q[dt]=pe,q[Ie]=Wt,Ie=dt;else break e}}function r(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var pe=q[0],Ie=q.pop();if(Ie!==pe){q[0]=Ie;e:for(var dt=0,Wt=q.length,vc=Wt>>>1;dt<vc;){var ra=2*(dt+1)-1,Vm=q[ra],ia=ra+1,Ap=q[ia];if(0>n(Vm,Ie))ia<Wt&&0>n(Ap,Vm)?(q[dt]=Ap,q[ia]=Ie,dt=ia):(q[dt]=Vm,q[ra]=Ie,dt=ra);else if(ia<Wt&&0>n(Ap,Ie))q[dt]=Ap,q[ia]=Ie,dt=ia;else break e}}return pe}function n(q,pe){var Ie=q.sortIndex-pe.sortIndex;return Ie!==0?Ie:q.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],d=[],h=1,f=null,m=3,y=!1,g=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(q){for(var pe=r(d);pe!==null;){if(pe.callback===null)i(d);else if(pe.startTime<=q)i(d),pe.sortIndex=pe.expirationTime,t(u,pe);else break;pe=r(d)}}function x(q){if(v=!1,T(q),!g)if(r(u)!==null)g=!0,tr(M);else{var pe=r(d);pe!==null&&Re(x,pe.startTime-q)}}function M(q,pe){g=!1,v&&(v=!1,w(P),P=-1),y=!0;var Ie=m;try{for(T(pe),f=r(u);f!==null&&(!(f.expirationTime>pe)||q&&!W());){var dt=f.callback;if(typeof dt=="function"){f.callback=null,m=f.priorityLevel;var Wt=dt(f.expirationTime<=pe);pe=e.unstable_now(),typeof Wt=="function"?f.callback=Wt:f===r(u)&&i(u),T(pe)}else i(u);f=r(u)}if(f!==null)var vc=!0;else{var ra=r(d);ra!==null&&Re(x,ra.startTime-pe),vc=!1}return vc}finally{f=null,m=Ie,y=!1}}var I=!1,O=null,P=-1,z=5,U=-1;function W(){return!(e.unstable_now()-U<z)}function ee(){if(O!==null){var q=e.unstable_now();U=q;var pe=!0;try{pe=O(!0,q)}finally{pe?de():(I=!1,O=null)}}else I=!1}var de;if(typeof b=="function")de=function(){b(ee)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,Pe=oe.port2;oe.port1.onmessage=ee,de=function(){Pe.postMessage(null)}}else de=function(){_(ee,0)};function tr(q){O=q,I||(I=!0,de())}function Re(q,pe){P=_(function(){q(e.unstable_now())},pe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_continueExecution=function(){g||y||(g=!0,tr(M))},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(q){switch(m){case 1:case 2:case 3:var pe=3;break;default:pe=m}var Ie=m;m=pe;try{return q()}finally{m=Ie}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(q,pe){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Ie=m;m=q;try{return pe()}finally{m=Ie}},e.unstable_scheduleCallback=function(q,pe,Ie){var dt=e.unstable_now();switch(typeof Ie=="object"&&Ie!==null?(Ie=Ie.delay,Ie=typeof Ie=="number"&&0<Ie?dt+Ie:dt):Ie=dt,q){case 1:var Wt=-1;break;case 2:Wt=250;break;case 5:Wt=1073741823;break;case 4:Wt=1e4;break;default:Wt=5e3}return Wt=Ie+Wt,q={id:h++,callback:pe,priorityLevel:q,startTime:Ie,expirationTime:Wt,sortIndex:-1},Ie>dt?(q.sortIndex=Ie,t(d,q),r(u)===null&&q===r(d)&&(v?(w(P),P=-1):v=!0,Re(x,Ie-dt))):(q.sortIndex=Wt,t(u,q),g||y||(g=!0,tr(M))),q},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(q){var pe=m;return function(){var Ie=m;m=pe;try{return q.apply(this,arguments)}finally{m=Ie}}}})(Q8);Y8.exports=Q8;var kX=Y8.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PX=jr,vn=kX;function K(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var X8=new Set,g0={};function gp(e,t){Bf(e,t),Bf(e+"Capture",t)}function Bf(e,t){for(g0[e]=t,e=0;e<t.length;e++)X8.add(t[e])}var ol=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eE=Object.prototype.hasOwnProperty,NX=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jP={},VP={};function LX(e){return eE.call(VP,e)?!0:eE.call(jP,e)?!1:NX.test(e)?VP[e]=!0:(jP[e]=!0,!1)}function FX(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function DX(e,t,r,i){if(t===null||typeof t>"u"||FX(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ei(e,t,r,i,n,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Gr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Gr[e]=new Ei(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Gr[t]=new Ei(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Gr[e]=new Ei(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Gr[e]=new Ei(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Gr[e]=new Ei(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Gr[e]=new Ei(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Gr[e]=new Ei(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Gr[e]=new Ei(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Gr[e]=new Ei(e,5,!1,e.toLowerCase(),null,!1,!1)});var YA=/[\-:]([a-z])/g;function QA(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(YA,QA);Gr[t]=new Ei(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(YA,QA);Gr[t]=new Ei(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(YA,QA);Gr[t]=new Ei(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Gr[e]=new Ei(e,1,!1,e.toLowerCase(),null,!1,!1)});Gr.xlinkHref=new Ei("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Gr[e]=new Ei(e,1,!1,e.toLowerCase(),null,!0,!0)});function XA(e,t,r,i){var n=Gr.hasOwnProperty(t)?Gr[t]:null;(n!==null?n.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(DX(t,r,n,i)&&(r=null),i||n===null?LX(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,i=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var fl=PX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,t1=Symbol.for("react.element"),Jh=Symbol.for("react.portal"),Kh=Symbol.for("react.fragment"),eR=Symbol.for("react.strict_mode"),tE=Symbol.for("react.profiler"),e9=Symbol.for("react.provider"),t9=Symbol.for("react.context"),tR=Symbol.for("react.forward_ref"),rE=Symbol.for("react.suspense"),iE=Symbol.for("react.suspense_list"),rR=Symbol.for("react.memo"),du=Symbol.for("react.lazy"),r9=Symbol.for("react.offscreen"),UP=Symbol.iterator;function zm(e){return e===null||typeof e!="object"?null:(e=UP&&e[UP]||e["@@iterator"],typeof e=="function"?e:null)}var Ot=Object.assign,q$;function $y(e){if(q$===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);q$=t&&t[1]||""}return`
`+q$+e}var H$=!1;function W$(e,t){if(!e||H$)return"";H$=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var i=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){i=d}e.call(t.prototype)}else{try{throw Error()}catch(d){i=d}e()}}catch(d){if(d&&i&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),s=i.stack.split(`
`),o=n.length-1,a=s.length-1;1<=o&&0<=a&&n[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(n[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||n[o]!==s[a]){var u=`
`+n[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{H$=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?$y(e):""}function jX(e){switch(e.tag){case 5:return $y(e.type);case 16:return $y("Lazy");case 13:return $y("Suspense");case 19:return $y("SuspenseList");case 0:case 2:case 15:return e=W$(e.type,!1),e;case 11:return e=W$(e.type.render,!1),e;case 1:return e=W$(e.type,!0),e;default:return""}}function nE(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Kh:return"Fragment";case Jh:return"Portal";case tE:return"Profiler";case eR:return"StrictMode";case rE:return"Suspense";case iE:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case t9:return(e.displayName||"Context")+".Consumer";case e9:return(e._context.displayName||"Context")+".Provider";case tR:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case rR:return t=e.displayName||null,t!==null?t:nE(e.type)||"Memo";case du:t=e._payload,e=e._init;try{return nE(e(t))}catch{}}return null}function VX(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nE(t);case 8:return t===eR?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Zu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function i9(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function UX(e){var t=i9(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function r1(e){e._valueTracker||(e._valueTracker=UX(e))}function n9(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=i9(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function hb(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function sE(e,t){var r=t.checked;return Ot({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function zP(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=Zu(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function s9(e,t){t=t.checked,t!=null&&XA(e,"checked",t,!1)}function oE(e,t){s9(e,t);var r=Zu(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?aE(e,t.type,r):t.hasOwnProperty("defaultValue")&&aE(e,t.type,Zu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function GP(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function aE(e,t,r){(t!=="number"||hb(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ty=Array.isArray;function vf(e,t,r,i){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&i&&(e[r].defaultSelected=!0)}else{for(r=""+Zu(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,i&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function lE(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(K(91));return Ot({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function BP(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(K(92));if(Ty(r)){if(1<r.length)throw Error(K(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Zu(r)}}function o9(e,t){var r=Zu(t.value),i=Zu(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function qP(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function a9(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uE(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?a9(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var i1,l9=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(i1=i1||document.createElement("div"),i1.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=i1.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function v0(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Fg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zX=["Webkit","ms","Moz","O"];Object.keys(Fg).forEach(function(e){zX.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Fg[t]=Fg[e]})});function u9(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Fg.hasOwnProperty(e)&&Fg[e]?(""+t).trim():t+"px"}function c9(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,n=u9(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,n):e[r]=n}}var GX=Ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cE(e,t){if(t){if(GX[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(K(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(K(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(K(61))}if(t.style!=null&&typeof t.style!="object")throw Error(K(62))}}function dE(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pE=null;function iR(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hE=null,wf=null,_f=null;function HP(e){if(e=yv(e)){if(typeof hE!="function")throw Error(K(280));var t=e.stateNode;t&&(t=c2(t),hE(e.stateNode,e.type,t))}}function d9(e){wf?_f?_f.push(e):_f=[e]:wf=e}function p9(){if(wf){var e=wf,t=_f;if(_f=wf=null,HP(e),t)for(e=0;e<t.length;e++)HP(t[e])}}function h9(e,t){return e(t)}function f9(){}var Z$=!1;function m9(e,t,r){if(Z$)return e(t,r);Z$=!0;try{return h9(e,t,r)}finally{Z$=!1,(wf!==null||_f!==null)&&(f9(),p9())}}function w0(e,t){var r=e.stateNode;if(r===null)return null;var i=c2(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(K(231,t,typeof r));return r}var fE=!1;if(ol)try{var Gm={};Object.defineProperty(Gm,"passive",{get:function(){fE=!0}}),window.addEventListener("test",Gm,Gm),window.removeEventListener("test",Gm,Gm)}catch{fE=!1}function BX(e,t,r,i,n,s,o,a,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(h){this.onError(h)}}var Dg=!1,fb=null,mb=!1,mE=null,qX={onError:function(e){Dg=!0,fb=e}};function HX(e,t,r,i,n,s,o,a,u){Dg=!1,fb=null,BX.apply(qX,arguments)}function WX(e,t,r,i,n,s,o,a,u){if(HX.apply(this,arguments),Dg){if(Dg){var d=fb;Dg=!1,fb=null}else throw Error(K(198));mb||(mb=!0,mE=d)}}function vp(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function y9(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function WP(e){if(vp(e)!==e)throw Error(K(188))}function ZX(e){var t=e.alternate;if(!t){if(t=vp(e),t===null)throw Error(K(188));return t!==e?null:e}for(var r=e,i=t;;){var n=r.return;if(n===null)break;var s=n.alternate;if(s===null){if(i=n.return,i!==null){r=i;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===r)return WP(n),e;if(s===i)return WP(n),t;s=s.sibling}throw Error(K(188))}if(r.return!==i.return)r=n,i=s;else{for(var o=!1,a=n.child;a;){if(a===r){o=!0,r=n,i=s;break}if(a===i){o=!0,i=n,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,i=n;break}if(a===i){o=!0,i=s,r=n;break}a=a.sibling}if(!o)throw Error(K(189))}}if(r.alternate!==i)throw Error(K(190))}if(r.tag!==3)throw Error(K(188));return r.stateNode.current===r?e:t}function g9(e){return e=ZX(e),e!==null?v9(e):null}function v9(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=v9(e);if(t!==null)return t;e=e.sibling}return null}var w9=vn.unstable_scheduleCallback,ZP=vn.unstable_cancelCallback,JX=vn.unstable_shouldYield,KX=vn.unstable_requestPaint,qt=vn.unstable_now,YX=vn.unstable_getCurrentPriorityLevel,nR=vn.unstable_ImmediatePriority,_9=vn.unstable_UserBlockingPriority,yb=vn.unstable_NormalPriority,QX=vn.unstable_LowPriority,b9=vn.unstable_IdlePriority,o2=null,zo=null;function XX(e){if(zo&&typeof zo.onCommitFiberRoot=="function")try{zo.onCommitFiberRoot(o2,e,void 0,(e.current.flags&128)===128)}catch{}}var Hs=Math.clz32?Math.clz32:ree,eee=Math.log,tee=Math.LN2;function ree(e){return e>>>=0,e===0?32:31-(eee(e)/tee|0)|0}var n1=64,s1=4194304;function xy(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gb(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,n=e.suspendedLanes,s=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~n;a!==0?i=xy(a):(s&=o,s!==0&&(i=xy(s)))}else o=r&~n,o!==0?i=xy(o):s!==0&&(i=xy(s));if(i===0)return 0;if(t!==0&&t!==i&&!(t&n)&&(n=i&-i,s=t&-t,n>=s||n===16&&(s&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-Hs(t),n=1<<r,i|=e[r],t&=~n;return i}function iee(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nee(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,n=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Hs(s),a=1<<o,u=n[o];u===-1?(!(a&r)||a&i)&&(n[o]=iee(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function yE(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function S9(){var e=n1;return n1<<=1,!(n1&4194240)&&(n1=64),e}function J$(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function fv(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Hs(t),e[t]=r}function see(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-Hs(r),s=1<<n;t[n]=0,i[n]=-1,e[n]=-1,r&=~s}}function sR(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-Hs(r),n=1<<i;n&t|e[i]&t&&(e[i]|=t),r&=~n}}var et=0;function $9(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var T9,oR,x9,E9,M9,gE=!1,o1=[],Nu=null,Lu=null,Fu=null,_0=new Map,b0=new Map,bu=[],oee="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function JP(e,t){switch(e){case"focusin":case"focusout":Nu=null;break;case"dragenter":case"dragleave":Lu=null;break;case"mouseover":case"mouseout":Fu=null;break;case"pointerover":case"pointerout":_0.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":b0.delete(t.pointerId)}}function Bm(e,t,r,i,n,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:s,targetContainers:[n]},t!==null&&(t=yv(t),t!==null&&oR(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function aee(e,t,r,i,n){switch(t){case"focusin":return Nu=Bm(Nu,e,t,r,i,n),!0;case"dragenter":return Lu=Bm(Lu,e,t,r,i,n),!0;case"mouseover":return Fu=Bm(Fu,e,t,r,i,n),!0;case"pointerover":var s=n.pointerId;return _0.set(s,Bm(_0.get(s)||null,e,t,r,i,n)),!0;case"gotpointercapture":return s=n.pointerId,b0.set(s,Bm(b0.get(s)||null,e,t,r,i,n)),!0}return!1}function I9(e){var t=Cd(e.target);if(t!==null){var r=vp(t);if(r!==null){if(t=r.tag,t===13){if(t=y9(r),t!==null){e.blockedOn=t,M9(e.priority,function(){x9(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ew(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=vE(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);pE=i,r.target.dispatchEvent(i),pE=null}else return t=yv(r),t!==null&&oR(t),e.blockedOn=r,!1;t.shift()}return!0}function KP(e,t,r){Ew(e)&&r.delete(t)}function lee(){gE=!1,Nu!==null&&Ew(Nu)&&(Nu=null),Lu!==null&&Ew(Lu)&&(Lu=null),Fu!==null&&Ew(Fu)&&(Fu=null),_0.forEach(KP),b0.forEach(KP)}function qm(e,t){e.blockedOn===t&&(e.blockedOn=null,gE||(gE=!0,vn.unstable_scheduleCallback(vn.unstable_NormalPriority,lee)))}function S0(e){function t(n){return qm(n,e)}if(0<o1.length){qm(o1[0],e);for(var r=1;r<o1.length;r++){var i=o1[r];i.blockedOn===e&&(i.blockedOn=null)}}for(Nu!==null&&qm(Nu,e),Lu!==null&&qm(Lu,e),Fu!==null&&qm(Fu,e),_0.forEach(t),b0.forEach(t),r=0;r<bu.length;r++)i=bu[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<bu.length&&(r=bu[0],r.blockedOn===null);)I9(r),r.blockedOn===null&&bu.shift()}var bf=fl.ReactCurrentBatchConfig,vb=!0;function uee(e,t,r,i){var n=et,s=bf.transition;bf.transition=null;try{et=1,aR(e,t,r,i)}finally{et=n,bf.transition=s}}function cee(e,t,r,i){var n=et,s=bf.transition;bf.transition=null;try{et=4,aR(e,t,r,i)}finally{et=n,bf.transition=s}}function aR(e,t,r,i){if(vb){var n=vE(e,t,r,i);if(n===null)sT(e,t,i,wb,r),JP(e,i);else if(aee(n,e,t,r,i))i.stopPropagation();else if(JP(e,i),t&4&&-1<oee.indexOf(e)){for(;n!==null;){var s=yv(n);if(s!==null&&T9(s),s=vE(e,t,r,i),s===null&&sT(e,t,i,wb,r),s===n)break;n=s}n!==null&&i.stopPropagation()}else sT(e,t,i,null,r)}}var wb=null;function vE(e,t,r,i){if(wb=null,e=iR(i),e=Cd(e),e!==null)if(t=vp(e),t===null)e=null;else if(r=t.tag,r===13){if(e=y9(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return wb=e,null}function C9(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YX()){case nR:return 1;case _9:return 4;case yb:case QX:return 16;case b9:return 536870912;default:return 16}default:return 16}}var xu=null,lR=null,Mw=null;function A9(){if(Mw)return Mw;var e,t=lR,r=t.length,i,n="value"in xu?xu.value:xu.textContent,s=n.length;for(e=0;e<r&&t[e]===n[e];e++);var o=r-e;for(i=1;i<=o&&t[r-i]===n[s-i];i++);return Mw=n.slice(e,1<i?1-i:void 0)}function Iw(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function a1(){return!0}function YP(){return!1}function $n(e){function t(r,i,n,s,o){this._reactName=r,this._targetInst=n,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?a1:YP,this.isPropagationStopped=YP,this}return Ot(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=a1)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=a1)},persist:function(){},isPersistent:a1}),t}var ym={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uR=$n(ym),mv=Ot({},ym,{view:0,detail:0}),dee=$n(mv),K$,Y$,Hm,a2=Ot({},mv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cR,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hm&&(Hm&&e.type==="mousemove"?(K$=e.screenX-Hm.screenX,Y$=e.screenY-Hm.screenY):Y$=K$=0,Hm=e),K$)},movementY:function(e){return"movementY"in e?e.movementY:Y$}}),QP=$n(a2),pee=Ot({},a2,{dataTransfer:0}),hee=$n(pee),fee=Ot({},mv,{relatedTarget:0}),Q$=$n(fee),mee=Ot({},ym,{animationName:0,elapsedTime:0,pseudoElement:0}),yee=$n(mee),gee=Ot({},ym,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vee=$n(gee),wee=Ot({},ym,{data:0}),XP=$n(wee),_ee={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},See={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $ee(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=See[e])?!!t[e]:!1}function cR(){return $ee}var Tee=Ot({},mv,{key:function(e){if(e.key){var t=_ee[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Iw(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bee[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cR,charCode:function(e){return e.type==="keypress"?Iw(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Iw(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),xee=$n(Tee),Eee=Ot({},a2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eN=$n(Eee),Mee=Ot({},mv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cR}),Iee=$n(Mee),Cee=Ot({},ym,{propertyName:0,elapsedTime:0,pseudoElement:0}),Aee=$n(Cee),Ree=Ot({},a2,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Oee=$n(Ree),kee=[9,13,27,32],dR=ol&&"CompositionEvent"in window,jg=null;ol&&"documentMode"in document&&(jg=document.documentMode);var Pee=ol&&"TextEvent"in window&&!jg,R9=ol&&(!dR||jg&&8<jg&&11>=jg),tN=" ",rN=!1;function O9(e,t){switch(e){case"keyup":return kee.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function k9(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yh=!1;function Nee(e,t){switch(e){case"compositionend":return k9(t);case"keypress":return t.which!==32?null:(rN=!0,tN);case"textInput":return e=t.data,e===tN&&rN?null:e;default:return null}}function Lee(e,t){if(Yh)return e==="compositionend"||!dR&&O9(e,t)?(e=A9(),Mw=lR=xu=null,Yh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return R9&&t.locale!=="ko"?null:t.data;default:return null}}var Fee={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iN(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Fee[e.type]:t==="textarea"}function P9(e,t,r,i){d9(i),t=_b(t,"onChange"),0<t.length&&(r=new uR("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var Vg=null,$0=null;function Dee(e){q9(e,0)}function l2(e){var t=ef(e);if(n9(t))return e}function jee(e,t){if(e==="change")return t}var N9=!1;if(ol){var X$;if(ol){var eT="oninput"in document;if(!eT){var nN=document.createElement("div");nN.setAttribute("oninput","return;"),eT=typeof nN.oninput=="function"}X$=eT}else X$=!1;N9=X$&&(!document.documentMode||9<document.documentMode)}function sN(){Vg&&(Vg.detachEvent("onpropertychange",L9),$0=Vg=null)}function L9(e){if(e.propertyName==="value"&&l2($0)){var t=[];P9(t,$0,e,iR(e)),m9(Dee,t)}}function Vee(e,t,r){e==="focusin"?(sN(),Vg=t,$0=r,Vg.attachEvent("onpropertychange",L9)):e==="focusout"&&sN()}function Uee(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return l2($0)}function zee(e,t){if(e==="click")return l2(t)}function Gee(e,t){if(e==="input"||e==="change")return l2(t)}function Bee(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qs=typeof Object.is=="function"?Object.is:Bee;function T0(e,t){if(Qs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var n=r[i];if(!eE.call(t,n)||!Qs(e[n],t[n]))return!1}return!0}function oN(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function aN(e,t){var r=oN(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=oN(r)}}function F9(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?F9(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function D9(){for(var e=window,t=hb();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=hb(e.document)}return t}function pR(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qee(e){var t=D9(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&F9(r.ownerDocument.documentElement,r)){if(i!==null&&pR(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,s=Math.min(i.start,n);i=i.end===void 0?s:Math.min(i.end,n),!e.extend&&s>i&&(n=i,i=s,s=n),n=aN(r,s);var o=aN(r,i);n&&o&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Hee=ol&&"documentMode"in document&&11>=document.documentMode,Qh=null,wE=null,Ug=null,_E=!1;function lN(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;_E||Qh==null||Qh!==hb(i)||(i=Qh,"selectionStart"in i&&pR(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ug&&T0(Ug,i)||(Ug=i,i=_b(wE,"onSelect"),0<i.length&&(t=new uR("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=Qh)))}function l1(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Xh={animationend:l1("Animation","AnimationEnd"),animationiteration:l1("Animation","AnimationIteration"),animationstart:l1("Animation","AnimationStart"),transitionend:l1("Transition","TransitionEnd")},tT={},j9={};ol&&(j9=document.createElement("div").style,"AnimationEvent"in window||(delete Xh.animationend.animation,delete Xh.animationiteration.animation,delete Xh.animationstart.animation),"TransitionEvent"in window||delete Xh.transitionend.transition);function u2(e){if(tT[e])return tT[e];if(!Xh[e])return e;var t=Xh[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in j9)return tT[e]=t[r];return e}var V9=u2("animationend"),U9=u2("animationiteration"),z9=u2("animationstart"),G9=u2("transitionend"),B9=new Map,uN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oc(e,t){B9.set(e,t),gp(t,[e])}for(var rT=0;rT<uN.length;rT++){var iT=uN[rT],Wee=iT.toLowerCase(),Zee=iT[0].toUpperCase()+iT.slice(1);oc(Wee,"on"+Zee)}oc(V9,"onAnimationEnd");oc(U9,"onAnimationIteration");oc(z9,"onAnimationStart");oc("dblclick","onDoubleClick");oc("focusin","onFocus");oc("focusout","onBlur");oc(G9,"onTransitionEnd");Bf("onMouseEnter",["mouseout","mouseover"]);Bf("onMouseLeave",["mouseout","mouseover"]);Bf("onPointerEnter",["pointerout","pointerover"]);Bf("onPointerLeave",["pointerout","pointerover"]);gp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gp("onBeforeInput",["compositionend","keypress","textInput","paste"]);gp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ey="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jee=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ey));function cN(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,WX(i,t,void 0,e),e.currentTarget=null}function q9(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],n=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],u=a.instance,d=a.currentTarget;if(a=a.listener,u!==s&&n.isPropagationStopped())break e;cN(n,a,d),s=u}else for(o=0;o<i.length;o++){if(a=i[o],u=a.instance,d=a.currentTarget,a=a.listener,u!==s&&n.isPropagationStopped())break e;cN(n,a,d),s=u}}}if(mb)throw e=mE,mb=!1,mE=null,e}function ht(e,t){var r=t[xE];r===void 0&&(r=t[xE]=new Set);var i=e+"__bubble";r.has(i)||(H9(t,e,2,!1),r.add(i))}function nT(e,t,r){var i=0;t&&(i|=4),H9(r,e,i,t)}var u1="_reactListening"+Math.random().toString(36).slice(2);function x0(e){if(!e[u1]){e[u1]=!0,X8.forEach(function(r){r!=="selectionchange"&&(Jee.has(r)||nT(r,!1,e),nT(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[u1]||(t[u1]=!0,nT("selectionchange",!1,t))}}function H9(e,t,r,i){switch(C9(t)){case 1:var n=uee;break;case 4:n=cee;break;default:n=aR}r=n.bind(null,t,r,e),n=void 0,!fE||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),i?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function sT(e,t,r,i,n){var s=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===n||a.nodeType===8&&a.parentNode===n)break;if(o===4)for(o=i.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===n||u.nodeType===8&&u.parentNode===n))return;o=o.return}for(;a!==null;){if(o=Cd(a),o===null)return;if(u=o.tag,u===5||u===6){i=s=o;continue e}a=a.parentNode}}i=i.return}m9(function(){var d=s,h=iR(r),f=[];e:{var m=B9.get(e);if(m!==void 0){var y=uR,g=e;switch(e){case"keypress":if(Iw(r)===0)break e;case"keydown":case"keyup":y=xee;break;case"focusin":g="focus",y=Q$;break;case"focusout":g="blur",y=Q$;break;case"beforeblur":case"afterblur":y=Q$;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=QP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=hee;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Iee;break;case V9:case U9:case z9:y=yee;break;case G9:y=Aee;break;case"scroll":y=dee;break;case"wheel":y=Oee;break;case"copy":case"cut":case"paste":y=vee;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=eN}var v=(t&4)!==0,_=!v&&e==="scroll",w=v?m!==null?m+"Capture":null:m;v=[];for(var b=d,T;b!==null;){T=b;var x=T.stateNode;if(T.tag===5&&x!==null&&(T=x,w!==null&&(x=w0(b,w),x!=null&&v.push(E0(b,x,T)))),_)break;b=b.return}0<v.length&&(m=new y(m,g,null,r,h),f.push({event:m,listeners:v}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&r!==pE&&(g=r.relatedTarget||r.fromElement)&&(Cd(g)||g[al]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(g=r.relatedTarget||r.toElement,y=d,g=g?Cd(g):null,g!==null&&(_=vp(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(y=null,g=d),y!==g)){if(v=QP,x="onMouseLeave",w="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(v=eN,x="onPointerLeave",w="onPointerEnter",b="pointer"),_=y==null?m:ef(y),T=g==null?m:ef(g),m=new v(x,b+"leave",y,r,h),m.target=_,m.relatedTarget=T,x=null,Cd(h)===d&&(v=new v(w,b+"enter",g,r,h),v.target=T,v.relatedTarget=_,x=v),_=x,y&&g)t:{for(v=y,w=g,b=0,T=v;T;T=Op(T))b++;for(T=0,x=w;x;x=Op(x))T++;for(;0<b-T;)v=Op(v),b--;for(;0<T-b;)w=Op(w),T--;for(;b--;){if(v===w||w!==null&&v===w.alternate)break t;v=Op(v),w=Op(w)}v=null}else v=null;y!==null&&dN(f,m,y,v,!1),g!==null&&_!==null&&dN(f,_,g,v,!0)}}e:{if(m=d?ef(d):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var M=jee;else if(iN(m))if(N9)M=Gee;else{M=Uee;var I=Vee}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(M=zee);if(M&&(M=M(e,d))){P9(f,M,r,h);break e}I&&I(e,m,d),e==="focusout"&&(I=m._wrapperState)&&I.controlled&&m.type==="number"&&aE(m,"number",m.value)}switch(I=d?ef(d):window,e){case"focusin":(iN(I)||I.contentEditable==="true")&&(Qh=I,wE=d,Ug=null);break;case"focusout":Ug=wE=Qh=null;break;case"mousedown":_E=!0;break;case"contextmenu":case"mouseup":case"dragend":_E=!1,lN(f,r,h);break;case"selectionchange":if(Hee)break;case"keydown":case"keyup":lN(f,r,h)}var O;if(dR)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Yh?O9(e,r)&&(P="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(R9&&r.locale!=="ko"&&(Yh||P!=="onCompositionStart"?P==="onCompositionEnd"&&Yh&&(O=A9()):(xu=h,lR="value"in xu?xu.value:xu.textContent,Yh=!0)),I=_b(d,P),0<I.length&&(P=new XP(P,e,null,r,h),f.push({event:P,listeners:I}),O?P.data=O:(O=k9(r),O!==null&&(P.data=O)))),(O=Pee?Nee(e,r):Lee(e,r))&&(d=_b(d,"onBeforeInput"),0<d.length&&(h=new XP("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:d}),h.data=O))}q9(f,t)})}function E0(e,t,r){return{instance:e,listener:t,currentTarget:r}}function _b(e,t){for(var r=t+"Capture",i=[];e!==null;){var n=e,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=w0(e,r),s!=null&&i.unshift(E0(e,s,n)),s=w0(e,t),s!=null&&i.push(E0(e,s,n))),e=e.return}return i}function Op(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function dN(e,t,r,i,n){for(var s=t._reactName,o=[];r!==null&&r!==i;){var a=r,u=a.alternate,d=a.stateNode;if(u!==null&&u===i)break;a.tag===5&&d!==null&&(a=d,n?(u=w0(r,s),u!=null&&o.unshift(E0(r,u,a))):n||(u=w0(r,s),u!=null&&o.push(E0(r,u,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Kee=/\r\n?/g,Yee=/\u0000|\uFFFD/g;function pN(e){return(typeof e=="string"?e:""+e).replace(Kee,`
`).replace(Yee,"")}function c1(e,t,r){if(t=pN(t),pN(e)!==t&&r)throw Error(K(425))}function bb(){}var bE=null,SE=null;function $E(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var TE=typeof setTimeout=="function"?setTimeout:void 0,Qee=typeof clearTimeout=="function"?clearTimeout:void 0,hN=typeof Promise=="function"?Promise:void 0,Xee=typeof queueMicrotask=="function"?queueMicrotask:typeof hN<"u"?function(e){return hN.resolve(null).then(e).catch(ete)}:TE;function ete(e){setTimeout(function(){throw e})}function oT(e,t){var r=t,i=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(i===0){e.removeChild(n),S0(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=n}while(r);S0(t)}function Du(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function fN(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var gm=Math.random().toString(36).slice(2),Vo="__reactFiber$"+gm,M0="__reactProps$"+gm,al="__reactContainer$"+gm,xE="__reactEvents$"+gm,tte="__reactListeners$"+gm,rte="__reactHandles$"+gm;function Cd(e){var t=e[Vo];if(t)return t;for(var r=e.parentNode;r;){if(t=r[al]||r[Vo]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=fN(e);e!==null;){if(r=e[Vo])return r;e=fN(e)}return t}e=r,r=e.parentNode}return null}function yv(e){return e=e[Vo]||e[al],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ef(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(K(33))}function c2(e){return e[M0]||null}var EE=[],tf=-1;function ac(e){return{current:e}}function vt(e){0>tf||(e.current=EE[tf],EE[tf]=null,tf--)}function ct(e,t){tf++,EE[tf]=e.current,e.current=t}var Ju={},di=ac(Ju),zi=ac(!1),Wd=Ju;function qf(e,t){var r=e.type.contextTypes;if(!r)return Ju;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in r)n[s]=t[s];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function Gi(e){return e=e.childContextTypes,e!=null}function Sb(){vt(zi),vt(di)}function mN(e,t,r){if(di.current!==Ju)throw Error(K(168));ct(di,t),ct(zi,r)}function W9(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var n in i)if(!(n in t))throw Error(K(108,VX(e)||"Unknown",n));return Ot({},r,i)}function $b(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ju,Wd=di.current,ct(di,e),ct(zi,zi.current),!0}function yN(e,t,r){var i=e.stateNode;if(!i)throw Error(K(169));r?(e=W9(e,t,Wd),i.__reactInternalMemoizedMergedChildContext=e,vt(zi),vt(di),ct(di,e)):vt(zi),ct(zi,r)}var qa=null,d2=!1,aT=!1;function Z9(e){qa===null?qa=[e]:qa.push(e)}function ite(e){d2=!0,Z9(e)}function lc(){if(!aT&&qa!==null){aT=!0;var e=0,t=et;try{var r=qa;for(et=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}qa=null,d2=!1}catch(n){throw qa!==null&&(qa=qa.slice(e+1)),w9(nR,lc),n}finally{et=t,aT=!1}}return null}var rf=[],nf=0,Tb=null,xb=0,qn=[],Hn=0,Zd=null,Ya=1,Qa="";function Rc(e,t){rf[nf++]=xb,rf[nf++]=Tb,Tb=e,xb=t}function J9(e,t,r){qn[Hn++]=Ya,qn[Hn++]=Qa,qn[Hn++]=Zd,Zd=e;var i=Ya;e=Qa;var n=32-Hs(i)-1;i&=~(1<<n),r+=1;var s=32-Hs(t)+n;if(30<s){var o=n-n%5;s=(i&(1<<o)-1).toString(32),i>>=o,n-=o,Ya=1<<32-Hs(t)+n|r<<n|i,Qa=s+e}else Ya=1<<s|r<<n|i,Qa=e}function hR(e){e.return!==null&&(Rc(e,1),J9(e,1,0))}function fR(e){for(;e===Tb;)Tb=rf[--nf],rf[nf]=null,xb=rf[--nf],rf[nf]=null;for(;e===Zd;)Zd=qn[--Hn],qn[Hn]=null,Qa=qn[--Hn],qn[Hn]=null,Ya=qn[--Hn],qn[Hn]=null}var mn=null,pn=null,Et=!1,Gs=null;function K9(e,t){var r=Jn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function gN(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,mn=e,pn=Du(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,mn=e,pn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Zd!==null?{id:Ya,overflow:Qa}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Jn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,mn=e,pn=null,!0):!1;default:return!1}}function ME(e){return(e.mode&1)!==0&&(e.flags&128)===0}function IE(e){if(Et){var t=pn;if(t){var r=t;if(!gN(e,t)){if(ME(e))throw Error(K(418));t=Du(r.nextSibling);var i=mn;t&&gN(e,t)?K9(i,r):(e.flags=e.flags&-4097|2,Et=!1,mn=e)}}else{if(ME(e))throw Error(K(418));e.flags=e.flags&-4097|2,Et=!1,mn=e}}}function vN(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;mn=e}function d1(e){if(e!==mn)return!1;if(!Et)return vN(e),Et=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!$E(e.type,e.memoizedProps)),t&&(t=pn)){if(ME(e))throw Y9(),Error(K(418));for(;t;)K9(e,t),t=Du(t.nextSibling)}if(vN(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){pn=Du(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}pn=null}}else pn=mn?Du(e.stateNode.nextSibling):null;return!0}function Y9(){for(var e=pn;e;)e=Du(e.nextSibling)}function Hf(){pn=mn=null,Et=!1}function mR(e){Gs===null?Gs=[e]:Gs.push(e)}var nte=fl.ReactCurrentBatchConfig;function Wm(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(K(309));var i=r.stateNode}if(!i)throw Error(K(147,e));var n=i,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=n.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(K(284));if(!r._owner)throw Error(K(290,e))}return e}function p1(e,t){throw e=Object.prototype.toString.call(t),Error(K(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wN(e){var t=e._init;return t(e._payload)}function Q9(e){function t(w,b){if(e){var T=w.deletions;T===null?(w.deletions=[b],w.flags|=16):T.push(b)}}function r(w,b){if(!e)return null;for(;b!==null;)t(w,b),b=b.sibling;return null}function i(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function n(w,b){return w=zu(w,b),w.index=0,w.sibling=null,w}function s(w,b,T){return w.index=T,e?(T=w.alternate,T!==null?(T=T.index,T<b?(w.flags|=2,b):T):(w.flags|=2,b)):(w.flags|=1048576,b)}function o(w){return e&&w.alternate===null&&(w.flags|=2),w}function a(w,b,T,x){return b===null||b.tag!==6?(b=fT(T,w.mode,x),b.return=w,b):(b=n(b,T),b.return=w,b)}function u(w,b,T,x){var M=T.type;return M===Kh?h(w,b,T.props.children,x,T.key):b!==null&&(b.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===du&&wN(M)===b.type)?(x=n(b,T.props),x.ref=Wm(w,b,T),x.return=w,x):(x=Nw(T.type,T.key,T.props,null,w.mode,x),x.ref=Wm(w,b,T),x.return=w,x)}function d(w,b,T,x){return b===null||b.tag!==4||b.stateNode.containerInfo!==T.containerInfo||b.stateNode.implementation!==T.implementation?(b=mT(T,w.mode,x),b.return=w,b):(b=n(b,T.children||[]),b.return=w,b)}function h(w,b,T,x,M){return b===null||b.tag!==7?(b=jd(T,w.mode,x,M),b.return=w,b):(b=n(b,T),b.return=w,b)}function f(w,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return b=fT(""+b,w.mode,T),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case t1:return T=Nw(b.type,b.key,b.props,null,w.mode,T),T.ref=Wm(w,null,b),T.return=w,T;case Jh:return b=mT(b,w.mode,T),b.return=w,b;case du:var x=b._init;return f(w,x(b._payload),T)}if(Ty(b)||zm(b))return b=jd(b,w.mode,T,null),b.return=w,b;p1(w,b)}return null}function m(w,b,T,x){var M=b!==null?b.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return M!==null?null:a(w,b,""+T,x);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case t1:return T.key===M?u(w,b,T,x):null;case Jh:return T.key===M?d(w,b,T,x):null;case du:return M=T._init,m(w,b,M(T._payload),x)}if(Ty(T)||zm(T))return M!==null?null:h(w,b,T,x,null);p1(w,T)}return null}function y(w,b,T,x,M){if(typeof x=="string"&&x!==""||typeof x=="number")return w=w.get(T)||null,a(b,w,""+x,M);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case t1:return w=w.get(x.key===null?T:x.key)||null,u(b,w,x,M);case Jh:return w=w.get(x.key===null?T:x.key)||null,d(b,w,x,M);case du:var I=x._init;return y(w,b,T,I(x._payload),M)}if(Ty(x)||zm(x))return w=w.get(T)||null,h(b,w,x,M,null);p1(b,x)}return null}function g(w,b,T,x){for(var M=null,I=null,O=b,P=b=0,z=null;O!==null&&P<T.length;P++){O.index>P?(z=O,O=null):z=O.sibling;var U=m(w,O,T[P],x);if(U===null){O===null&&(O=z);break}e&&O&&U.alternate===null&&t(w,O),b=s(U,b,P),I===null?M=U:I.sibling=U,I=U,O=z}if(P===T.length)return r(w,O),Et&&Rc(w,P),M;if(O===null){for(;P<T.length;P++)O=f(w,T[P],x),O!==null&&(b=s(O,b,P),I===null?M=O:I.sibling=O,I=O);return Et&&Rc(w,P),M}for(O=i(w,O);P<T.length;P++)z=y(O,w,P,T[P],x),z!==null&&(e&&z.alternate!==null&&O.delete(z.key===null?P:z.key),b=s(z,b,P),I===null?M=z:I.sibling=z,I=z);return e&&O.forEach(function(W){return t(w,W)}),Et&&Rc(w,P),M}function v(w,b,T,x){var M=zm(T);if(typeof M!="function")throw Error(K(150));if(T=M.call(T),T==null)throw Error(K(151));for(var I=M=null,O=b,P=b=0,z=null,U=T.next();O!==null&&!U.done;P++,U=T.next()){O.index>P?(z=O,O=null):z=O.sibling;var W=m(w,O,U.value,x);if(W===null){O===null&&(O=z);break}e&&O&&W.alternate===null&&t(w,O),b=s(W,b,P),I===null?M=W:I.sibling=W,I=W,O=z}if(U.done)return r(w,O),Et&&Rc(w,P),M;if(O===null){for(;!U.done;P++,U=T.next())U=f(w,U.value,x),U!==null&&(b=s(U,b,P),I===null?M=U:I.sibling=U,I=U);return Et&&Rc(w,P),M}for(O=i(w,O);!U.done;P++,U=T.next())U=y(O,w,P,U.value,x),U!==null&&(e&&U.alternate!==null&&O.delete(U.key===null?P:U.key),b=s(U,b,P),I===null?M=U:I.sibling=U,I=U);return e&&O.forEach(function(ee){return t(w,ee)}),Et&&Rc(w,P),M}function _(w,b,T,x){if(typeof T=="object"&&T!==null&&T.type===Kh&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case t1:e:{for(var M=T.key,I=b;I!==null;){if(I.key===M){if(M=T.type,M===Kh){if(I.tag===7){r(w,I.sibling),b=n(I,T.props.children),b.return=w,w=b;break e}}else if(I.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===du&&wN(M)===I.type){r(w,I.sibling),b=n(I,T.props),b.ref=Wm(w,I,T),b.return=w,w=b;break e}r(w,I);break}else t(w,I);I=I.sibling}T.type===Kh?(b=jd(T.props.children,w.mode,x,T.key),b.return=w,w=b):(x=Nw(T.type,T.key,T.props,null,w.mode,x),x.ref=Wm(w,b,T),x.return=w,w=x)}return o(w);case Jh:e:{for(I=T.key;b!==null;){if(b.key===I)if(b.tag===4&&b.stateNode.containerInfo===T.containerInfo&&b.stateNode.implementation===T.implementation){r(w,b.sibling),b=n(b,T.children||[]),b.return=w,w=b;break e}else{r(w,b);break}else t(w,b);b=b.sibling}b=mT(T,w.mode,x),b.return=w,w=b}return o(w);case du:return I=T._init,_(w,b,I(T._payload),x)}if(Ty(T))return g(w,b,T,x);if(zm(T))return v(w,b,T,x);p1(w,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,b!==null&&b.tag===6?(r(w,b.sibling),b=n(b,T),b.return=w,w=b):(r(w,b),b=fT(T,w.mode,x),b.return=w,w=b),o(w)):r(w,b)}return _}var Wf=Q9(!0),X9=Q9(!1),Eb=ac(null),Mb=null,sf=null,yR=null;function gR(){yR=sf=Mb=null}function vR(e){var t=Eb.current;vt(Eb),e._currentValue=t}function CE(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function Sf(e,t){Mb=e,yR=sf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Vi=!0),e.firstContext=null)}function is(e){var t=e._currentValue;if(yR!==e)if(e={context:e,memoizedValue:t,next:null},sf===null){if(Mb===null)throw Error(K(308));sf=e,Mb.dependencies={lanes:0,firstContext:e}}else sf=sf.next=e;return t}var Ad=null;function wR(e){Ad===null?Ad=[e]:Ad.push(e)}function eV(e,t,r,i){var n=t.interleaved;return n===null?(r.next=r,wR(t)):(r.next=n.next,n.next=r),t.interleaved=r,ll(e,i)}function ll(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var pu=!1;function _R(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tV(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function el(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ju(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Ge&2){var n=i.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),i.pending=t,ll(e,r)}return n=i.interleaved,n===null?(t.next=t,wR(i)):(t.next=n.next,n.next=t),i.interleaved=t,ll(e,r)}function Cw(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,sR(e,r)}}function _N(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var n=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?n=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?n=s=t:s=s.next=t}else n=s=t;r={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ib(e,t,r,i){var n=e.updateQueue;pu=!1;var s=n.firstBaseUpdate,o=n.lastBaseUpdate,a=n.shared.pending;if(a!==null){n.shared.pending=null;var u=a,d=u.next;u.next=null,o===null?s=d:o.next=d,o=u;var h=e.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=d:a.next=d,h.lastBaseUpdate=u))}if(s!==null){var f=n.baseState;o=0,h=d=u=null,a=s;do{var m=a.lane,y=a.eventTime;if((i&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,v=a;switch(m=t,y=r,v.tag){case 1:if(g=v.payload,typeof g=="function"){f=g.call(y,f,m);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,m=typeof g=="function"?g.call(y,f,m):g,m==null)break e;f=Ot({},f,m);break e;case 2:pu=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,m=n.effects,m===null?n.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(d=h=y,u=f):h=h.next=y,o|=m;if(a=a.next,a===null){if(a=n.shared.pending,a===null)break;m=a,a=m.next,m.next=null,n.lastBaseUpdate=m,n.shared.pending=null}}while(!0);if(h===null&&(u=f),n.baseState=u,n.firstBaseUpdate=d,n.lastBaseUpdate=h,t=n.shared.interleaved,t!==null){n=t;do o|=n.lane,n=n.next;while(n!==t)}else s===null&&(n.shared.lanes=0);Kd|=o,e.lanes=o,e.memoizedState=f}}function bN(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],n=i.callback;if(n!==null){if(i.callback=null,i=r,typeof n!="function")throw Error(K(191,n));n.call(i)}}}var gv={},Go=ac(gv),I0=ac(gv),C0=ac(gv);function Rd(e){if(e===gv)throw Error(K(174));return e}function bR(e,t){switch(ct(C0,t),ct(I0,e),ct(Go,gv),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:uE(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=uE(t,e)}vt(Go),ct(Go,t)}function Zf(){vt(Go),vt(I0),vt(C0)}function rV(e){Rd(C0.current);var t=Rd(Go.current),r=uE(t,e.type);t!==r&&(ct(I0,e),ct(Go,r))}function SR(e){I0.current===e&&(vt(Go),vt(I0))}var Ct=ac(0);function Cb(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lT=[];function $R(){for(var e=0;e<lT.length;e++)lT[e]._workInProgressVersionPrimary=null;lT.length=0}var Aw=fl.ReactCurrentDispatcher,uT=fl.ReactCurrentBatchConfig,Jd=0,At=null,or=null,Er=null,Ab=!1,zg=!1,A0=0,ste=0;function qr(){throw Error(K(321))}function TR(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Qs(e[r],t[r]))return!1;return!0}function xR(e,t,r,i,n,s){if(Jd=s,At=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Aw.current=e===null||e.memoizedState===null?ute:cte,e=r(i,n),zg){s=0;do{if(zg=!1,A0=0,25<=s)throw Error(K(301));s+=1,Er=or=null,t.updateQueue=null,Aw.current=dte,e=r(i,n)}while(zg)}if(Aw.current=Rb,t=or!==null&&or.next!==null,Jd=0,Er=or=At=null,Ab=!1,t)throw Error(K(300));return e}function ER(){var e=A0!==0;return A0=0,e}function Ro(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Er===null?At.memoizedState=Er=e:Er=Er.next=e,Er}function ns(){if(or===null){var e=At.alternate;e=e!==null?e.memoizedState:null}else e=or.next;var t=Er===null?At.memoizedState:Er.next;if(t!==null)Er=t,or=e;else{if(e===null)throw Error(K(310));or=e,e={memoizedState:or.memoizedState,baseState:or.baseState,baseQueue:or.baseQueue,queue:or.queue,next:null},Er===null?At.memoizedState=Er=e:Er=Er.next=e}return Er}function R0(e,t){return typeof t=="function"?t(e):t}function cT(e){var t=ns(),r=t.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=e;var i=or,n=i.baseQueue,s=r.pending;if(s!==null){if(n!==null){var o=n.next;n.next=s.next,s.next=o}i.baseQueue=n=s,r.pending=null}if(n!==null){s=n.next,i=i.baseState;var a=o=null,u=null,d=s;do{var h=d.lane;if((Jd&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:e(i,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(a=u=f,o=i):u=u.next=f,At.lanes|=h,Kd|=h}d=d.next}while(d!==null&&d!==s);u===null?o=i:u.next=a,Qs(i,t.memoizedState)||(Vi=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=u,r.lastRenderedState=i}if(e=r.interleaved,e!==null){n=e;do s=n.lane,At.lanes|=s,Kd|=s,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function dT(e){var t=ns(),r=t.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=e;var i=r.dispatch,n=r.pending,s=t.memoizedState;if(n!==null){r.pending=null;var o=n=n.next;do s=e(s,o.action),o=o.next;while(o!==n);Qs(s,t.memoizedState)||(Vi=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,i]}function iV(){}function nV(e,t){var r=At,i=ns(),n=t(),s=!Qs(i.memoizedState,n);if(s&&(i.memoizedState=n,Vi=!0),i=i.queue,MR(aV.bind(null,r,i,e),[e]),i.getSnapshot!==t||s||Er!==null&&Er.memoizedState.tag&1){if(r.flags|=2048,O0(9,oV.bind(null,r,i,n,t),void 0,null),Cr===null)throw Error(K(349));Jd&30||sV(r,t,n)}return n}function sV(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=At.updateQueue,t===null?(t={lastEffect:null,stores:null},At.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function oV(e,t,r,i){t.value=r,t.getSnapshot=i,lV(t)&&uV(e)}function aV(e,t,r){return r(function(){lV(t)&&uV(e)})}function lV(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Qs(e,r)}catch{return!0}}function uV(e){var t=ll(e,1);t!==null&&Ws(t,e,1,-1)}function SN(e){var t=Ro();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:R0,lastRenderedState:e},t.queue=e,e=e.dispatch=lte.bind(null,At,e),[t.memoizedState,e]}function O0(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=At.updateQueue,t===null?(t={lastEffect:null,stores:null},At.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function cV(){return ns().memoizedState}function Rw(e,t,r,i){var n=Ro();At.flags|=e,n.memoizedState=O0(1|t,r,void 0,i===void 0?null:i)}function p2(e,t,r,i){var n=ns();i=i===void 0?null:i;var s=void 0;if(or!==null){var o=or.memoizedState;if(s=o.destroy,i!==null&&TR(i,o.deps)){n.memoizedState=O0(t,r,s,i);return}}At.flags|=e,n.memoizedState=O0(1|t,r,s,i)}function $N(e,t){return Rw(8390656,8,e,t)}function MR(e,t){return p2(2048,8,e,t)}function dV(e,t){return p2(4,2,e,t)}function pV(e,t){return p2(4,4,e,t)}function hV(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function fV(e,t,r){return r=r!=null?r.concat([e]):null,p2(4,4,hV.bind(null,t,e),r)}function IR(){}function mV(e,t){var r=ns();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&TR(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function yV(e,t){var r=ns();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&TR(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function gV(e,t,r){return Jd&21?(Qs(r,t)||(r=S9(),At.lanes|=r,Kd|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Vi=!0),e.memoizedState=r)}function ote(e,t){var r=et;et=r!==0&&4>r?r:4,e(!0);var i=uT.transition;uT.transition={};try{e(!1),t()}finally{et=r,uT.transition=i}}function vV(){return ns().memoizedState}function ate(e,t,r){var i=Uu(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},wV(e))_V(t,r);else if(r=eV(e,t,r,i),r!==null){var n=_i();Ws(r,e,i,n),bV(r,t,i)}}function lte(e,t,r){var i=Uu(e),n={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(wV(e))_V(t,n);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,r);if(n.hasEagerState=!0,n.eagerState=a,Qs(a,o)){var u=t.interleaved;u===null?(n.next=n,wR(t)):(n.next=u.next,u.next=n),t.interleaved=n;return}}catch{}finally{}r=eV(e,t,n,i),r!==null&&(n=_i(),Ws(r,e,i,n),bV(r,t,i))}}function wV(e){var t=e.alternate;return e===At||t!==null&&t===At}function _V(e,t){zg=Ab=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function bV(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,sR(e,r)}}var Rb={readContext:is,useCallback:qr,useContext:qr,useEffect:qr,useImperativeHandle:qr,useInsertionEffect:qr,useLayoutEffect:qr,useMemo:qr,useReducer:qr,useRef:qr,useState:qr,useDebugValue:qr,useDeferredValue:qr,useTransition:qr,useMutableSource:qr,useSyncExternalStore:qr,useId:qr,unstable_isNewReconciler:!1},ute={readContext:is,useCallback:function(e,t){return Ro().memoizedState=[e,t===void 0?null:t],e},useContext:is,useEffect:$N,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Rw(4194308,4,hV.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Rw(4194308,4,e,t)},useInsertionEffect:function(e,t){return Rw(4,2,e,t)},useMemo:function(e,t){var r=Ro();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=Ro();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=ate.bind(null,At,e),[i.memoizedState,e]},useRef:function(e){var t=Ro();return e={current:e},t.memoizedState=e},useState:SN,useDebugValue:IR,useDeferredValue:function(e){return Ro().memoizedState=e},useTransition:function(){var e=SN(!1),t=e[0];return e=ote.bind(null,e[1]),Ro().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=At,n=Ro();if(Et){if(r===void 0)throw Error(K(407));r=r()}else{if(r=t(),Cr===null)throw Error(K(349));Jd&30||sV(i,t,r)}n.memoizedState=r;var s={value:r,getSnapshot:t};return n.queue=s,$N(aV.bind(null,i,s,e),[e]),i.flags|=2048,O0(9,oV.bind(null,i,s,r,t),void 0,null),r},useId:function(){var e=Ro(),t=Cr.identifierPrefix;if(Et){var r=Qa,i=Ya;r=(i&~(1<<32-Hs(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=A0++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=ste++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cte={readContext:is,useCallback:mV,useContext:is,useEffect:MR,useImperativeHandle:fV,useInsertionEffect:dV,useLayoutEffect:pV,useMemo:yV,useReducer:cT,useRef:cV,useState:function(){return cT(R0)},useDebugValue:IR,useDeferredValue:function(e){var t=ns();return gV(t,or.memoizedState,e)},useTransition:function(){var e=cT(R0)[0],t=ns().memoizedState;return[e,t]},useMutableSource:iV,useSyncExternalStore:nV,useId:vV,unstable_isNewReconciler:!1},dte={readContext:is,useCallback:mV,useContext:is,useEffect:MR,useImperativeHandle:fV,useInsertionEffect:dV,useLayoutEffect:pV,useMemo:yV,useReducer:dT,useRef:cV,useState:function(){return dT(R0)},useDebugValue:IR,useDeferredValue:function(e){var t=ns();return or===null?t.memoizedState=e:gV(t,or.memoizedState,e)},useTransition:function(){var e=dT(R0)[0],t=ns().memoizedState;return[e,t]},useMutableSource:iV,useSyncExternalStore:nV,useId:vV,unstable_isNewReconciler:!1};function Ds(e,t){if(e&&e.defaultProps){t=Ot({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function AE(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:Ot({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var h2={isMounted:function(e){return(e=e._reactInternals)?vp(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=_i(),n=Uu(e),s=el(i,n);s.payload=t,r!=null&&(s.callback=r),t=ju(e,s,n),t!==null&&(Ws(t,e,n,i),Cw(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=_i(),n=Uu(e),s=el(i,n);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=ju(e,s,n),t!==null&&(Ws(t,e,n,i),Cw(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=_i(),i=Uu(e),n=el(r,i);n.tag=2,t!=null&&(n.callback=t),t=ju(e,n,i),t!==null&&(Ws(t,e,i,r),Cw(t,e,i))}};function TN(e,t,r,i,n,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,o):t.prototype&&t.prototype.isPureReactComponent?!T0(r,i)||!T0(n,s):!0}function SV(e,t,r){var i=!1,n=Ju,s=t.contextType;return typeof s=="object"&&s!==null?s=is(s):(n=Gi(t)?Wd:di.current,i=t.contextTypes,s=(i=i!=null)?qf(e,n):Ju),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=h2,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=s),t}function xN(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&h2.enqueueReplaceState(t,t.state,null)}function RE(e,t,r,i){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},_R(e);var s=t.contextType;typeof s=="object"&&s!==null?n.context=is(s):(s=Gi(t)?Wd:di.current,n.context=qf(e,s)),n.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(AE(e,t,s,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&h2.enqueueReplaceState(n,n.state,null),Ib(e,r,n,i),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function Jf(e,t){try{var r="",i=t;do r+=jX(i),i=i.return;while(i);var n=r}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:n,digest:null}}function pT(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function OE(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var pte=typeof WeakMap=="function"?WeakMap:Map;function $V(e,t,r){r=el(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){kb||(kb=!0,zE=i),OE(e,t)},r}function TV(e,t,r){r=el(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var n=t.value;r.payload=function(){return i(n)},r.callback=function(){OE(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){OE(e,t),typeof i!="function"&&(Vu===null?Vu=new Set([this]):Vu.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function EN(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new pte;var n=new Set;i.set(t,n)}else n=i.get(t),n===void 0&&(n=new Set,i.set(t,n));n.has(r)||(n.add(r),e=Ete.bind(null,e,t,r),t.then(e,e))}function MN(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function IN(e,t,r,i,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=el(-1,1),t.tag=2,ju(r,t,1))),r.lanes|=1),e)}var hte=fl.ReactCurrentOwner,Vi=!1;function gi(e,t,r,i){t.child=e===null?X9(t,null,r,i):Wf(t,e.child,r,i)}function CN(e,t,r,i,n){r=r.render;var s=t.ref;return Sf(t,n),i=xR(e,t,r,i,s,n),r=ER(),e!==null&&!Vi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,ul(e,t,n)):(Et&&r&&hR(t),t.flags|=1,gi(e,t,i,n),t.child)}function AN(e,t,r,i,n){if(e===null){var s=r.type;return typeof s=="function"&&!LR(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,xV(e,t,s,i,n)):(e=Nw(r.type,null,i,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&n)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:T0,r(o,i)&&e.ref===t.ref)return ul(e,t,n)}return t.flags|=1,e=zu(s,i),e.ref=t.ref,e.return=t,t.child=e}function xV(e,t,r,i,n){if(e!==null){var s=e.memoizedProps;if(T0(s,i)&&e.ref===t.ref)if(Vi=!1,t.pendingProps=i=s,(e.lanes&n)!==0)e.flags&131072&&(Vi=!0);else return t.lanes=e.lanes,ul(e,t,n)}return kE(e,t,r,i,n)}function EV(e,t,r){var i=t.pendingProps,n=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ct(af,un),un|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ct(af,un),un|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:r,ct(af,un),un|=i}else s!==null?(i=s.baseLanes|r,t.memoizedState=null):i=r,ct(af,un),un|=i;return gi(e,t,n,r),t.child}function MV(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function kE(e,t,r,i,n){var s=Gi(r)?Wd:di.current;return s=qf(t,s),Sf(t,n),r=xR(e,t,r,i,s,n),i=ER(),e!==null&&!Vi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,ul(e,t,n)):(Et&&i&&hR(t),t.flags|=1,gi(e,t,r,n),t.child)}function RN(e,t,r,i,n){if(Gi(r)){var s=!0;$b(t)}else s=!1;if(Sf(t,n),t.stateNode===null)Ow(e,t),SV(t,r,i),RE(t,r,i,n),i=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=is(d):(d=Gi(r)?Wd:di.current,d=qf(t,d));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||u!==d)&&xN(t,o,i,d),pu=!1;var m=t.memoizedState;o.state=m,Ib(t,i,o,n),u=t.memoizedState,a!==i||m!==u||zi.current||pu?(typeof h=="function"&&(AE(t,r,h,i),u=t.memoizedState),(a=pu||TN(t,r,a,i,m,u,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=u),o.props=i,o.state=u,o.context=d,i=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,tV(e,t),a=t.memoizedProps,d=t.type===t.elementType?a:Ds(t.type,a),o.props=d,f=t.pendingProps,m=o.context,u=r.contextType,typeof u=="object"&&u!==null?u=is(u):(u=Gi(r)?Wd:di.current,u=qf(t,u));var y=r.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==u)&&xN(t,o,i,u),pu=!1,m=t.memoizedState,o.state=m,Ib(t,i,o,n);var g=t.memoizedState;a!==f||m!==g||zi.current||pu?(typeof y=="function"&&(AE(t,r,y,i),g=t.memoizedState),(d=pu||TN(t,r,d,i,m,g,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=g),o.props=i,o.state=g,o.context=u,i=d):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return PE(e,t,r,i,s,n)}function PE(e,t,r,i,n,s){MV(e,t);var o=(t.flags&128)!==0;if(!i&&!o)return n&&yN(t,r,!1),ul(e,t,s);i=t.stateNode,hte.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&o?(t.child=Wf(t,e.child,null,s),t.child=Wf(t,null,a,s)):gi(e,t,a,s),t.memoizedState=i.state,n&&yN(t,r,!0),t.child}function IV(e){var t=e.stateNode;t.pendingContext?mN(e,t.pendingContext,t.pendingContext!==t.context):t.context&&mN(e,t.context,!1),bR(e,t.containerInfo)}function ON(e,t,r,i,n){return Hf(),mR(n),t.flags|=256,gi(e,t,r,i),t.child}var NE={dehydrated:null,treeContext:null,retryLane:0};function LE(e){return{baseLanes:e,cachePool:null,transitions:null}}function CV(e,t,r){var i=t.pendingProps,n=Ct.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(n&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),ct(Ct,n&1),e===null)return IE(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,e=i.fallback,s?(i=t.mode,s=t.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=y2(o,i,0,null),e=jd(e,i,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=LE(r),t.memoizedState=NE,e):CR(t,o));if(n=e.memoizedState,n!==null&&(a=n.dehydrated,a!==null))return fte(e,t,o,i,a,n,r);if(s){s=i.fallback,o=t.mode,n=e.child,a=n.sibling;var u={mode:"hidden",children:i.children};return!(o&1)&&t.child!==n?(i=t.child,i.childLanes=0,i.pendingProps=u,t.deletions=null):(i=zu(n,u),i.subtreeFlags=n.subtreeFlags&14680064),a!==null?s=zu(a,s):(s=jd(s,o,r,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,o=e.child.memoizedState,o=o===null?LE(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~r,t.memoizedState=NE,i}return s=e.child,e=s.sibling,i=zu(s,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function CR(e,t){return t=y2({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function h1(e,t,r,i){return i!==null&&mR(i),Wf(t,e.child,null,r),e=CR(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function fte(e,t,r,i,n,s,o){if(r)return t.flags&256?(t.flags&=-257,i=pT(Error(K(422))),h1(e,t,o,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=i.fallback,n=t.mode,i=y2({mode:"visible",children:i.children},n,0,null),s=jd(s,n,o,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,t.mode&1&&Wf(t,e.child,null,o),t.child.memoizedState=LE(o),t.memoizedState=NE,s);if(!(t.mode&1))return h1(e,t,o,null);if(n.data==="$!"){if(i=n.nextSibling&&n.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(K(419)),i=pT(s,i,void 0),h1(e,t,o,i)}if(a=(o&e.childLanes)!==0,Vi||a){if(i=Cr,i!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(i.suspendedLanes|o)?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,ll(e,n),Ws(i,e,n,-1))}return NR(),i=pT(Error(K(421))),h1(e,t,o,i)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=Mte.bind(null,e),n._reactRetry=t,null):(e=s.treeContext,pn=Du(n.nextSibling),mn=t,Et=!0,Gs=null,e!==null&&(qn[Hn++]=Ya,qn[Hn++]=Qa,qn[Hn++]=Zd,Ya=e.id,Qa=e.overflow,Zd=t),t=CR(t,i.children),t.flags|=4096,t)}function kN(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),CE(e.return,t,r)}function hT(e,t,r,i,n){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:n}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=n)}function AV(e,t,r){var i=t.pendingProps,n=i.revealOrder,s=i.tail;if(gi(e,t,i.children,r),i=Ct.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&kN(e,r,t);else if(e.tag===19)kN(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(ct(Ct,i),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&Cb(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),hT(t,!1,n,r,s);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Cb(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}hT(t,!0,r,null,s);break;case"together":hT(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ow(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ul(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Kd|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(K(153));if(t.child!==null){for(e=t.child,r=zu(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=zu(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function mte(e,t,r){switch(t.tag){case 3:IV(t),Hf();break;case 5:rV(t);break;case 1:Gi(t.type)&&$b(t);break;case 4:bR(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,n=t.memoizedProps.value;ct(Eb,i._currentValue),i._currentValue=n;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(ct(Ct,Ct.current&1),t.flags|=128,null):r&t.child.childLanes?CV(e,t,r):(ct(Ct,Ct.current&1),e=ul(e,t,r),e!==null?e.sibling:null);ct(Ct,Ct.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return AV(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),ct(Ct,Ct.current),i)break;return null;case 22:case 23:return t.lanes=0,EV(e,t,r)}return ul(e,t,r)}var RV,FE,OV,kV;RV=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};FE=function(){};OV=function(e,t,r,i){var n=e.memoizedProps;if(n!==i){e=t.stateNode,Rd(Go.current);var s=null;switch(r){case"input":n=sE(e,n),i=sE(e,i),s=[];break;case"select":n=Ot({},n,{value:void 0}),i=Ot({},i,{value:void 0}),s=[];break;case"textarea":n=lE(e,n),i=lE(e,i),s=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=bb)}cE(r,i);var o;r=null;for(d in n)if(!i.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var a=n[d];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(g0.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in i){var u=i[d];if(a=n!=null?n[d]:void 0,i.hasOwnProperty(d)&&u!==a&&(u!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(s||(s=[]),s.push(d,r)),r=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(g0.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ht("scroll",e),s||a===u||(s=[])):(s=s||[]).push(d,u))}r&&(s=s||[]).push("style",r);var d=s;(t.updateQueue=d)&&(t.flags|=4)}};kV=function(e,t,r,i){r!==i&&(t.flags|=4)};function Zm(e,t){if(!Et)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Hr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function yte(e,t,r){var i=t.pendingProps;switch(fR(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hr(t),null;case 1:return Gi(t.type)&&Sb(),Hr(t),null;case 3:return i=t.stateNode,Zf(),vt(zi),vt(di),$R(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(d1(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Gs!==null&&(qE(Gs),Gs=null))),FE(e,t),Hr(t),null;case 5:SR(t);var n=Rd(C0.current);if(r=t.type,e!==null&&t.stateNode!=null)OV(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(K(166));return Hr(t),null}if(e=Rd(Go.current),d1(t)){i=t.stateNode,r=t.type;var s=t.memoizedProps;switch(i[Vo]=t,i[M0]=s,e=(t.mode&1)!==0,r){case"dialog":ht("cancel",i),ht("close",i);break;case"iframe":case"object":case"embed":ht("load",i);break;case"video":case"audio":for(n=0;n<Ey.length;n++)ht(Ey[n],i);break;case"source":ht("error",i);break;case"img":case"image":case"link":ht("error",i),ht("load",i);break;case"details":ht("toggle",i);break;case"input":zP(i,s),ht("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},ht("invalid",i);break;case"textarea":BP(i,s),ht("invalid",i)}cE(r,s),n=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&c1(i.textContent,a,e),n=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&c1(i.textContent,a,e),n=["children",""+a]):g0.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ht("scroll",i)}switch(r){case"input":r1(i),GP(i,s,!0);break;case"textarea":r1(i),qP(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=bb)}i=n,t.updateQueue=i,i!==null&&(t.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=a9(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=o.createElement(r,{is:i.is}):(e=o.createElement(r),r==="select"&&(o=e,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):e=o.createElementNS(e,r),e[Vo]=t,e[M0]=i,RV(e,t,!1,!1),t.stateNode=e;e:{switch(o=dE(r,i),r){case"dialog":ht("cancel",e),ht("close",e),n=i;break;case"iframe":case"object":case"embed":ht("load",e),n=i;break;case"video":case"audio":for(n=0;n<Ey.length;n++)ht(Ey[n],e);n=i;break;case"source":ht("error",e),n=i;break;case"img":case"image":case"link":ht("error",e),ht("load",e),n=i;break;case"details":ht("toggle",e),n=i;break;case"input":zP(e,i),n=sE(e,i),ht("invalid",e);break;case"option":n=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},n=Ot({},i,{value:void 0}),ht("invalid",e);break;case"textarea":BP(e,i),n=lE(e,i),ht("invalid",e);break;default:n=i}cE(r,n),a=n;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?c9(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&l9(e,u)):s==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&v0(e,u):typeof u=="number"&&v0(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(g0.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ht("scroll",e):u!=null&&XA(e,s,u,o))}switch(r){case"input":r1(e),GP(e,i,!1);break;case"textarea":r1(e),qP(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Zu(i.value));break;case"select":e.multiple=!!i.multiple,s=i.value,s!=null?vf(e,!!i.multiple,s,!1):i.defaultValue!=null&&vf(e,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=bb)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Hr(t),null;case 6:if(e&&t.stateNode!=null)kV(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(K(166));if(r=Rd(C0.current),Rd(Go.current),d1(t)){if(i=t.stateNode,r=t.memoizedProps,i[Vo]=t,(s=i.nodeValue!==r)&&(e=mn,e!==null))switch(e.tag){case 3:c1(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&c1(i.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Vo]=t,t.stateNode=i}return Hr(t),null;case 13:if(vt(Ct),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Et&&pn!==null&&t.mode&1&&!(t.flags&128))Y9(),Hf(),t.flags|=98560,s=!1;else if(s=d1(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(K(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(K(317));s[Vo]=t}else Hf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Hr(t),s=!1}else Gs!==null&&(qE(Gs),Gs=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Ct.current&1?ur===0&&(ur=3):NR())),t.updateQueue!==null&&(t.flags|=4),Hr(t),null);case 4:return Zf(),FE(e,t),e===null&&x0(t.stateNode.containerInfo),Hr(t),null;case 10:return vR(t.type._context),Hr(t),null;case 17:return Gi(t.type)&&Sb(),Hr(t),null;case 19:if(vt(Ct),s=t.memoizedState,s===null)return Hr(t),null;if(i=(t.flags&128)!==0,o=s.rendering,o===null)if(i)Zm(s,!1);else{if(ur!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Cb(e),o!==null){for(t.flags|=128,Zm(s,!1),i=o.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)s=r,e=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ct(Ct,Ct.current&1|2),t.child}e=e.sibling}s.tail!==null&&qt()>Kf&&(t.flags|=128,i=!0,Zm(s,!1),t.lanes=4194304)}else{if(!i)if(e=Cb(o),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Zm(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Et)return Hr(t),null}else 2*qt()-s.renderingStartTime>Kf&&r!==1073741824&&(t.flags|=128,i=!0,Zm(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(r=s.last,r!==null?r.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=qt(),t.sibling=null,r=Ct.current,ct(Ct,i?r&1|2:r&1),t):(Hr(t),null);case 22:case 23:return PR(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?un&1073741824&&(Hr(t),t.subtreeFlags&6&&(t.flags|=8192)):Hr(t),null;case 24:return null;case 25:return null}throw Error(K(156,t.tag))}function gte(e,t){switch(fR(t),t.tag){case 1:return Gi(t.type)&&Sb(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zf(),vt(zi),vt(di),$R(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return SR(t),null;case 13:if(vt(Ct),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(K(340));Hf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return vt(Ct),null;case 4:return Zf(),null;case 10:return vR(t.type._context),null;case 22:case 23:return PR(),null;case 24:return null;default:return null}}var f1=!1,ai=!1,vte=typeof WeakSet=="function"?WeakSet:Set,ne=null;function of(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Ut(e,t,i)}else r.current=null}function DE(e,t,r){try{r()}catch(i){Ut(e,t,i)}}var PN=!1;function wte(e,t){if(bE=vb,e=D9(),pR(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var n=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,u=-1,d=0,h=0,f=e,m=null;t:for(;;){for(var y;f!==r||n!==0&&f.nodeType!==3||(a=o+n),f!==s||i!==0&&f.nodeType!==3||(u=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===e)break t;if(m===r&&++d===n&&(a=o),m===s&&++h===i&&(u=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}r=a===-1||u===-1?null:{start:a,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(SE={focusedElem:e,selectionRange:r},vb=!1,ne=t;ne!==null;)if(t=ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ne=e;else for(;ne!==null;){t=ne;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,_=g.memoizedState,w=t.stateNode,b=w.getSnapshotBeforeUpdate(t.elementType===t.type?v:Ds(t.type,v),_);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var T=t.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(x){Ut(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,ne=e;break}ne=t.return}return g=PN,PN=!1,g}function Gg(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&e)===e){var s=n.destroy;n.destroy=void 0,s!==void 0&&DE(t,r,s)}n=n.next}while(n!==i)}}function f2(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function jE(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function PV(e){var t=e.alternate;t!==null&&(e.alternate=null,PV(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vo],delete t[M0],delete t[xE],delete t[tte],delete t[rte])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function NV(e){return e.tag===5||e.tag===3||e.tag===4}function NN(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||NV(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function VE(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=bb));else if(i!==4&&(e=e.child,e!==null))for(VE(e,t,r),e=e.sibling;e!==null;)VE(e,t,r),e=e.sibling}function UE(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(UE(e,t,r),e=e.sibling;e!==null;)UE(e,t,r),e=e.sibling}var Dr=null,Vs=!1;function $l(e,t,r){for(r=r.child;r!==null;)LV(e,t,r),r=r.sibling}function LV(e,t,r){if(zo&&typeof zo.onCommitFiberUnmount=="function")try{zo.onCommitFiberUnmount(o2,r)}catch{}switch(r.tag){case 5:ai||of(r,t);case 6:var i=Dr,n=Vs;Dr=null,$l(e,t,r),Dr=i,Vs=n,Dr!==null&&(Vs?(e=Dr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Dr.removeChild(r.stateNode));break;case 18:Dr!==null&&(Vs?(e=Dr,r=r.stateNode,e.nodeType===8?oT(e.parentNode,r):e.nodeType===1&&oT(e,r),S0(e)):oT(Dr,r.stateNode));break;case 4:i=Dr,n=Vs,Dr=r.stateNode.containerInfo,Vs=!0,$l(e,t,r),Dr=i,Vs=n;break;case 0:case 11:case 14:case 15:if(!ai&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){n=i=i.next;do{var s=n,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&DE(r,t,o),n=n.next}while(n!==i)}$l(e,t,r);break;case 1:if(!ai&&(of(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(a){Ut(r,t,a)}$l(e,t,r);break;case 21:$l(e,t,r);break;case 22:r.mode&1?(ai=(i=ai)||r.memoizedState!==null,$l(e,t,r),ai=i):$l(e,t,r);break;default:$l(e,t,r)}}function LN(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new vte),t.forEach(function(i){var n=Ite.bind(null,e,i);r.has(i)||(r.add(i),i.then(n,n))})}}function ps(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var n=r[i];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Dr=a.stateNode,Vs=!1;break e;case 3:Dr=a.stateNode.containerInfo,Vs=!0;break e;case 4:Dr=a.stateNode.containerInfo,Vs=!0;break e}a=a.return}if(Dr===null)throw Error(K(160));LV(s,o,n),Dr=null,Vs=!1;var u=n.alternate;u!==null&&(u.return=null),n.return=null}catch(d){Ut(n,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)FV(t,e),t=t.sibling}function FV(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ps(t,e),no(e),i&4){try{Gg(3,e,e.return),f2(3,e)}catch(v){Ut(e,e.return,v)}try{Gg(5,e,e.return)}catch(v){Ut(e,e.return,v)}}break;case 1:ps(t,e),no(e),i&512&&r!==null&&of(r,r.return);break;case 5:if(ps(t,e),no(e),i&512&&r!==null&&of(r,r.return),e.flags&32){var n=e.stateNode;try{v0(n,"")}catch(v){Ut(e,e.return,v)}}if(i&4&&(n=e.stateNode,n!=null)){var s=e.memoizedProps,o=r!==null?r.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&s9(n,s),dE(a,o);var d=dE(a,s);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?c9(n,f):h==="dangerouslySetInnerHTML"?l9(n,f):h==="children"?v0(n,f):XA(n,h,f,d)}switch(a){case"input":oE(n,s);break;case"textarea":o9(n,s);break;case"select":var m=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?vf(n,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?vf(n,!!s.multiple,s.defaultValue,!0):vf(n,!!s.multiple,s.multiple?[]:"",!1))}n[M0]=s}catch(v){Ut(e,e.return,v)}}break;case 6:if(ps(t,e),no(e),i&4){if(e.stateNode===null)throw Error(K(162));n=e.stateNode,s=e.memoizedProps;try{n.nodeValue=s}catch(v){Ut(e,e.return,v)}}break;case 3:if(ps(t,e),no(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{S0(t.containerInfo)}catch(v){Ut(e,e.return,v)}break;case 4:ps(t,e),no(e);break;case 13:ps(t,e),no(e),n=e.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(OR=qt())),i&4&&LN(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(ai=(d=ai)||h,ps(t,e),ai=d):ps(t,e),no(e),i&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(ne=e,h=e.child;h!==null;){for(f=ne=h;ne!==null;){switch(m=ne,y=m.child,m.tag){case 0:case 11:case 14:case 15:Gg(4,m,m.return);break;case 1:of(m,m.return);var g=m.stateNode;if(typeof g.componentWillUnmount=="function"){i=m,r=m.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){Ut(i,r,v)}}break;case 5:of(m,m.return);break;case 22:if(m.memoizedState!==null){DN(f);continue}}y!==null?(y.return=m,ne=y):DN(f)}h=h.sibling}e:for(h=null,f=e;;){if(f.tag===5){if(h===null){h=f;try{n=f.stateNode,d?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=u9("display",o))}catch(v){Ut(e,e.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(v){Ut(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ps(t,e),no(e),i&4&&LN(e);break;case 21:break;default:ps(t,e),no(e)}}function no(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(NV(r)){var i=r;break e}r=r.return}throw Error(K(160))}switch(i.tag){case 5:var n=i.stateNode;i.flags&32&&(v0(n,""),i.flags&=-33);var s=NN(e);UE(e,s,n);break;case 3:case 4:var o=i.stateNode.containerInfo,a=NN(e);VE(e,a,o);break;default:throw Error(K(161))}}catch(u){Ut(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _te(e,t,r){ne=e,DV(e)}function DV(e,t,r){for(var i=(e.mode&1)!==0;ne!==null;){var n=ne,s=n.child;if(n.tag===22&&i){var o=n.memoizedState!==null||f1;if(!o){var a=n.alternate,u=a!==null&&a.memoizedState!==null||ai;a=f1;var d=ai;if(f1=o,(ai=u)&&!d)for(ne=n;ne!==null;)o=ne,u=o.child,o.tag===22&&o.memoizedState!==null?jN(n):u!==null?(u.return=o,ne=u):jN(n);for(;s!==null;)ne=s,DV(s),s=s.sibling;ne=n,f1=a,ai=d}FN(e)}else n.subtreeFlags&8772&&s!==null?(s.return=n,ne=s):FN(e)}}function FN(e){for(;ne!==null;){var t=ne;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ai||f2(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!ai)if(r===null)i.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:Ds(t.type,r.memoizedProps);i.componentDidUpdate(n,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&bN(t,s,i);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}bN(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&S0(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}ai||t.flags&512&&jE(t)}catch(m){Ut(t,t.return,m)}}if(t===e){ne=null;break}if(r=t.sibling,r!==null){r.return=t.return,ne=r;break}ne=t.return}}function DN(e){for(;ne!==null;){var t=ne;if(t===e){ne=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ne=r;break}ne=t.return}}function jN(e){for(;ne!==null;){var t=ne;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{f2(4,t)}catch(u){Ut(t,r,u)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var n=t.return;try{i.componentDidMount()}catch(u){Ut(t,n,u)}}var s=t.return;try{jE(t)}catch(u){Ut(t,s,u)}break;case 5:var o=t.return;try{jE(t)}catch(u){Ut(t,o,u)}}}catch(u){Ut(t,t.return,u)}if(t===e){ne=null;break}var a=t.sibling;if(a!==null){a.return=t.return,ne=a;break}ne=t.return}}var bte=Math.ceil,Ob=fl.ReactCurrentDispatcher,AR=fl.ReactCurrentOwner,Xn=fl.ReactCurrentBatchConfig,Ge=0,Cr=null,er=null,zr=0,un=0,af=ac(0),ur=0,k0=null,Kd=0,m2=0,RR=0,Bg=null,Fi=null,OR=0,Kf=1/0,ja=null,kb=!1,zE=null,Vu=null,m1=!1,Eu=null,Pb=0,qg=0,GE=null,kw=-1,Pw=0;function _i(){return Ge&6?qt():kw!==-1?kw:kw=qt()}function Uu(e){return e.mode&1?Ge&2&&zr!==0?zr&-zr:nte.transition!==null?(Pw===0&&(Pw=S9()),Pw):(e=et,e!==0||(e=window.event,e=e===void 0?16:C9(e.type)),e):1}function Ws(e,t,r,i){if(50<qg)throw qg=0,GE=null,Error(K(185));fv(e,r,i),(!(Ge&2)||e!==Cr)&&(e===Cr&&(!(Ge&2)&&(m2|=r),ur===4&&Su(e,zr)),Bi(e,i),r===1&&Ge===0&&!(t.mode&1)&&(Kf=qt()+500,d2&&lc()))}function Bi(e,t){var r=e.callbackNode;nee(e,t);var i=gb(e,e===Cr?zr:0);if(i===0)r!==null&&ZP(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&ZP(r),t===1)e.tag===0?ite(VN.bind(null,e)):Z9(VN.bind(null,e)),Xee(function(){!(Ge&6)&&lc()}),r=null;else{switch($9(i)){case 1:r=nR;break;case 4:r=_9;break;case 16:r=yb;break;case 536870912:r=b9;break;default:r=yb}r=HV(r,jV.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function jV(e,t){if(kw=-1,Pw=0,Ge&6)throw Error(K(327));var r=e.callbackNode;if($f()&&e.callbackNode!==r)return null;var i=gb(e,e===Cr?zr:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Nb(e,i);else{t=i;var n=Ge;Ge|=2;var s=UV();(Cr!==e||zr!==t)&&(ja=null,Kf=qt()+500,Dd(e,t));do try{Tte();break}catch(a){VV(e,a)}while(!0);gR(),Ob.current=s,Ge=n,er!==null?t=0:(Cr=null,zr=0,t=ur)}if(t!==0){if(t===2&&(n=yE(e),n!==0&&(i=n,t=BE(e,n))),t===1)throw r=k0,Dd(e,0),Su(e,i),Bi(e,qt()),r;if(t===6)Su(e,i);else{if(n=e.current.alternate,!(i&30)&&!Ste(n)&&(t=Nb(e,i),t===2&&(s=yE(e),s!==0&&(i=s,t=BE(e,s))),t===1))throw r=k0,Dd(e,0),Su(e,i),Bi(e,qt()),r;switch(e.finishedWork=n,e.finishedLanes=i,t){case 0:case 1:throw Error(K(345));case 2:Oc(e,Fi,ja);break;case 3:if(Su(e,i),(i&130023424)===i&&(t=OR+500-qt(),10<t)){if(gb(e,0)!==0)break;if(n=e.suspendedLanes,(n&i)!==i){_i(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=TE(Oc.bind(null,e,Fi,ja),t);break}Oc(e,Fi,ja);break;case 4:if(Su(e,i),(i&4194240)===i)break;for(t=e.eventTimes,n=-1;0<i;){var o=31-Hs(i);s=1<<o,o=t[o],o>n&&(n=o),i&=~s}if(i=n,i=qt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*bte(i/1960))-i,10<i){e.timeoutHandle=TE(Oc.bind(null,e,Fi,ja),i);break}Oc(e,Fi,ja);break;case 5:Oc(e,Fi,ja);break;default:throw Error(K(329))}}}return Bi(e,qt()),e.callbackNode===r?jV.bind(null,e):null}function BE(e,t){var r=Bg;return e.current.memoizedState.isDehydrated&&(Dd(e,t).flags|=256),e=Nb(e,t),e!==2&&(t=Fi,Fi=r,t!==null&&qE(t)),e}function qE(e){Fi===null?Fi=e:Fi.push.apply(Fi,e)}function Ste(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var n=r[i],s=n.getSnapshot;n=n.value;try{if(!Qs(s(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Su(e,t){for(t&=~RR,t&=~m2,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Hs(t),i=1<<r;e[r]=-1,t&=~i}}function VN(e){if(Ge&6)throw Error(K(327));$f();var t=gb(e,0);if(!(t&1))return Bi(e,qt()),null;var r=Nb(e,t);if(e.tag!==0&&r===2){var i=yE(e);i!==0&&(t=i,r=BE(e,i))}if(r===1)throw r=k0,Dd(e,0),Su(e,t),Bi(e,qt()),r;if(r===6)throw Error(K(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Oc(e,Fi,ja),Bi(e,qt()),null}function kR(e,t){var r=Ge;Ge|=1;try{return e(t)}finally{Ge=r,Ge===0&&(Kf=qt()+500,d2&&lc())}}function Yd(e){Eu!==null&&Eu.tag===0&&!(Ge&6)&&$f();var t=Ge;Ge|=1;var r=Xn.transition,i=et;try{if(Xn.transition=null,et=1,e)return e()}finally{et=i,Xn.transition=r,Ge=t,!(Ge&6)&&lc()}}function PR(){un=af.current,vt(af)}function Dd(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Qee(r)),er!==null)for(r=er.return;r!==null;){var i=r;switch(fR(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Sb();break;case 3:Zf(),vt(zi),vt(di),$R();break;case 5:SR(i);break;case 4:Zf();break;case 13:vt(Ct);break;case 19:vt(Ct);break;case 10:vR(i.type._context);break;case 22:case 23:PR()}r=r.return}if(Cr=e,er=e=zu(e.current,null),zr=un=t,ur=0,k0=null,RR=m2=Kd=0,Fi=Bg=null,Ad!==null){for(t=0;t<Ad.length;t++)if(r=Ad[t],i=r.interleaved,i!==null){r.interleaved=null;var n=i.next,s=r.pending;if(s!==null){var o=s.next;s.next=n,i.next=o}r.pending=i}Ad=null}return e}function VV(e,t){do{var r=er;try{if(gR(),Aw.current=Rb,Ab){for(var i=At.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}Ab=!1}if(Jd=0,Er=or=At=null,zg=!1,A0=0,AR.current=null,r===null||r.return===null){ur=1,k0=t,er=null;break}e:{var s=e,o=r.return,a=r,u=t;if(t=zr,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=MN(o);if(y!==null){y.flags&=-257,IN(y,o,a,s,t),y.mode&1&&EN(s,d,t),t=y,u=d;var g=t.updateQueue;if(g===null){var v=new Set;v.add(u),t.updateQueue=v}else g.add(u);break e}else{if(!(t&1)){EN(s,d,t),NR();break e}u=Error(K(426))}}else if(Et&&a.mode&1){var _=MN(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),IN(_,o,a,s,t),mR(Jf(u,a));break e}}s=u=Jf(u,a),ur!==4&&(ur=2),Bg===null?Bg=[s]:Bg.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var w=$V(s,u,t);_N(s,w);break e;case 1:a=u;var b=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Vu===null||!Vu.has(T)))){s.flags|=65536,t&=-t,s.lanes|=t;var x=TV(s,a,t);_N(s,x);break e}}s=s.return}while(s!==null)}GV(r)}catch(M){t=M,er===r&&r!==null&&(er=r=r.return);continue}break}while(!0)}function UV(){var e=Ob.current;return Ob.current=Rb,e===null?Rb:e}function NR(){(ur===0||ur===3||ur===2)&&(ur=4),Cr===null||!(Kd&268435455)&&!(m2&268435455)||Su(Cr,zr)}function Nb(e,t){var r=Ge;Ge|=2;var i=UV();(Cr!==e||zr!==t)&&(ja=null,Dd(e,t));do try{$te();break}catch(n){VV(e,n)}while(!0);if(gR(),Ge=r,Ob.current=i,er!==null)throw Error(K(261));return Cr=null,zr=0,ur}function $te(){for(;er!==null;)zV(er)}function Tte(){for(;er!==null&&!JX();)zV(er)}function zV(e){var t=qV(e.alternate,e,un);e.memoizedProps=e.pendingProps,t===null?GV(e):er=t,AR.current=null}function GV(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=gte(r,t),r!==null){r.flags&=32767,er=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ur=6,er=null;return}}else if(r=yte(r,t,un),r!==null){er=r;return}if(t=t.sibling,t!==null){er=t;return}er=t=e}while(t!==null);ur===0&&(ur=5)}function Oc(e,t,r){var i=et,n=Xn.transition;try{Xn.transition=null,et=1,xte(e,t,r,i)}finally{Xn.transition=n,et=i}return null}function xte(e,t,r,i){do $f();while(Eu!==null);if(Ge&6)throw Error(K(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(K(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(see(e,s),e===Cr&&(er=Cr=null,zr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||m1||(m1=!0,HV(yb,function(){return $f(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Xn.transition,Xn.transition=null;var o=et;et=1;var a=Ge;Ge|=4,AR.current=null,wte(e,r),FV(r,e),qee(SE),vb=!!bE,SE=bE=null,e.current=r,_te(r),KX(),Ge=a,et=o,Xn.transition=s}else e.current=r;if(m1&&(m1=!1,Eu=e,Pb=n),s=e.pendingLanes,s===0&&(Vu=null),XX(r.stateNode),Bi(e,qt()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],i(n.value,{componentStack:n.stack,digest:n.digest});if(kb)throw kb=!1,e=zE,zE=null,e;return Pb&1&&e.tag!==0&&$f(),s=e.pendingLanes,s&1?e===GE?qg++:(qg=0,GE=e):qg=0,lc(),null}function $f(){if(Eu!==null){var e=$9(Pb),t=Xn.transition,r=et;try{if(Xn.transition=null,et=16>e?16:e,Eu===null)var i=!1;else{if(e=Eu,Eu=null,Pb=0,Ge&6)throw Error(K(331));var n=Ge;for(Ge|=4,ne=e.current;ne!==null;){var s=ne,o=s.child;if(ne.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var d=a[u];for(ne=d;ne!==null;){var h=ne;switch(h.tag){case 0:case 11:case 15:Gg(8,h,s)}var f=h.child;if(f!==null)f.return=h,ne=f;else for(;ne!==null;){h=ne;var m=h.sibling,y=h.return;if(PV(h),h===d){ne=null;break}if(m!==null){m.return=y,ne=m;break}ne=y}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}ne=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ne=o;else e:for(;ne!==null;){if(s=ne,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Gg(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,ne=w;break e}ne=s.return}}var b=e.current;for(ne=b;ne!==null;){o=ne;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,ne=T;else e:for(o=b;ne!==null;){if(a=ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:f2(9,a)}}catch(M){Ut(a,a.return,M)}if(a===o){ne=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,ne=x;break e}ne=a.return}}if(Ge=n,lc(),zo&&typeof zo.onPostCommitFiberRoot=="function")try{zo.onPostCommitFiberRoot(o2,e)}catch{}i=!0}return i}finally{et=r,Xn.transition=t}}return!1}function UN(e,t,r){t=Jf(r,t),t=$V(e,t,1),e=ju(e,t,1),t=_i(),e!==null&&(fv(e,1,t),Bi(e,t))}function Ut(e,t,r){if(e.tag===3)UN(e,e,r);else for(;t!==null;){if(t.tag===3){UN(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Vu===null||!Vu.has(i))){e=Jf(r,e),e=TV(t,e,1),t=ju(t,e,1),e=_i(),t!==null&&(fv(t,1,e),Bi(t,e));break}}t=t.return}}function Ete(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=_i(),e.pingedLanes|=e.suspendedLanes&r,Cr===e&&(zr&r)===r&&(ur===4||ur===3&&(zr&130023424)===zr&&500>qt()-OR?Dd(e,0):RR|=r),Bi(e,t)}function BV(e,t){t===0&&(e.mode&1?(t=s1,s1<<=1,!(s1&130023424)&&(s1=4194304)):t=1);var r=_i();e=ll(e,t),e!==null&&(fv(e,t,r),Bi(e,r))}function Mte(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),BV(e,r)}function Ite(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(K(314))}i!==null&&i.delete(t),BV(e,r)}var qV;qV=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||zi.current)Vi=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Vi=!1,mte(e,t,r);Vi=!!(e.flags&131072)}else Vi=!1,Et&&t.flags&1048576&&J9(t,xb,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Ow(e,t),e=t.pendingProps;var n=qf(t,di.current);Sf(t,r),n=xR(null,t,i,e,n,r);var s=ER();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Gi(i)?(s=!0,$b(t)):s=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,_R(t),n.updater=h2,t.stateNode=n,n._reactInternals=t,RE(t,i,e,r),t=PE(null,t,i,!0,s,r)):(t.tag=0,Et&&s&&hR(t),gi(null,t,n,r),t=t.child),t;case 16:i=t.elementType;e:{switch(Ow(e,t),e=t.pendingProps,n=i._init,i=n(i._payload),t.type=i,n=t.tag=Ate(i),e=Ds(i,e),n){case 0:t=kE(null,t,i,e,r);break e;case 1:t=RN(null,t,i,e,r);break e;case 11:t=CN(null,t,i,e,r);break e;case 14:t=AN(null,t,i,Ds(i.type,e),r);break e}throw Error(K(306,i,""))}return t;case 0:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Ds(i,n),kE(e,t,i,n,r);case 1:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Ds(i,n),RN(e,t,i,n,r);case 3:e:{if(IV(t),e===null)throw Error(K(387));i=t.pendingProps,s=t.memoizedState,n=s.element,tV(e,t),Ib(t,i,null,r);var o=t.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){n=Jf(Error(K(423)),t),t=ON(e,t,i,r,n);break e}else if(i!==n){n=Jf(Error(K(424)),t),t=ON(e,t,i,r,n);break e}else for(pn=Du(t.stateNode.containerInfo.firstChild),mn=t,Et=!0,Gs=null,r=X9(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Hf(),i===n){t=ul(e,t,r);break e}gi(e,t,i,r)}t=t.child}return t;case 5:return rV(t),e===null&&IE(t),i=t.type,n=t.pendingProps,s=e!==null?e.memoizedProps:null,o=n.children,$E(i,n)?o=null:s!==null&&$E(i,s)&&(t.flags|=32),MV(e,t),gi(e,t,o,r),t.child;case 6:return e===null&&IE(t),null;case 13:return CV(e,t,r);case 4:return bR(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Wf(t,null,i,r):gi(e,t,i,r),t.child;case 11:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Ds(i,n),CN(e,t,i,n,r);case 7:return gi(e,t,t.pendingProps,r),t.child;case 8:return gi(e,t,t.pendingProps.children,r),t.child;case 12:return gi(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,n=t.pendingProps,s=t.memoizedProps,o=n.value,ct(Eb,i._currentValue),i._currentValue=o,s!==null)if(Qs(s.value,o)){if(s.children===n.children&&!zi.current){t=ul(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===i){if(s.tag===1){u=el(-1,r&-r),u.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}s.lanes|=r,u=s.alternate,u!==null&&(u.lanes|=r),CE(s.return,r,t),a.lanes|=r;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(K(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),CE(o,r,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}gi(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,i=t.pendingProps.children,Sf(t,r),n=is(n),i=i(n),t.flags|=1,gi(e,t,i,r),t.child;case 14:return i=t.type,n=Ds(i,t.pendingProps),n=Ds(i.type,n),AN(e,t,i,n,r);case 15:return xV(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Ds(i,n),Ow(e,t),t.tag=1,Gi(i)?(e=!0,$b(t)):e=!1,Sf(t,r),SV(t,i,n),RE(t,i,n,r),PE(null,t,i,!0,e,r);case 19:return AV(e,t,r);case 22:return EV(e,t,r)}throw Error(K(156,t.tag))};function HV(e,t){return w9(e,t)}function Cte(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jn(e,t,r,i){return new Cte(e,t,r,i)}function LR(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ate(e){if(typeof e=="function")return LR(e)?1:0;if(e!=null){if(e=e.$$typeof,e===tR)return 11;if(e===rR)return 14}return 2}function zu(e,t){var r=e.alternate;return r===null?(r=Jn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Nw(e,t,r,i,n,s){var o=2;if(i=e,typeof e=="function")LR(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Kh:return jd(r.children,n,s,t);case eR:o=8,n|=8;break;case tE:return e=Jn(12,r,t,n|2),e.elementType=tE,e.lanes=s,e;case rE:return e=Jn(13,r,t,n),e.elementType=rE,e.lanes=s,e;case iE:return e=Jn(19,r,t,n),e.elementType=iE,e.lanes=s,e;case r9:return y2(r,n,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case e9:o=10;break e;case t9:o=9;break e;case tR:o=11;break e;case rR:o=14;break e;case du:o=16,i=null;break e}throw Error(K(130,e==null?e:typeof e,""))}return t=Jn(o,r,t,n),t.elementType=e,t.type=i,t.lanes=s,t}function jd(e,t,r,i){return e=Jn(7,e,i,t),e.lanes=r,e}function y2(e,t,r,i){return e=Jn(22,e,i,t),e.elementType=r9,e.lanes=r,e.stateNode={isHidden:!1},e}function fT(e,t,r){return e=Jn(6,e,null,t),e.lanes=r,e}function mT(e,t,r){return t=Jn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Rte(e,t,r,i,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=J$(0),this.expirationTimes=J$(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=J$(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function FR(e,t,r,i,n,s,o,a,u){return e=new Rte(e,t,r,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Jn(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},_R(s),e}function Ote(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jh,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function WV(e){if(!e)return Ju;e=e._reactInternals;e:{if(vp(e)!==e||e.tag!==1)throw Error(K(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Gi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(K(171))}if(e.tag===1){var r=e.type;if(Gi(r))return W9(e,r,t)}return t}function ZV(e,t,r,i,n,s,o,a,u){return e=FR(r,i,!0,e,n,s,o,a,u),e.context=WV(null),r=e.current,i=_i(),n=Uu(r),s=el(i,n),s.callback=t??null,ju(r,s,n),e.current.lanes=n,fv(e,n,i),Bi(e,i),e}function g2(e,t,r,i){var n=t.current,s=_i(),o=Uu(n);return r=WV(r),t.context===null?t.context=r:t.pendingContext=r,t=el(s,o),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=ju(n,t,o),e!==null&&(Ws(e,n,o,s),Cw(e,n,o)),o}function Lb(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function zN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function DR(e,t){zN(e,t),(e=e.alternate)&&zN(e,t)}function kte(){return null}var JV=typeof reportError=="function"?reportError:function(e){console.error(e)};function jR(e){this._internalRoot=e}v2.prototype.render=jR.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(K(409));g2(e,t,null,null)};v2.prototype.unmount=jR.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Yd(function(){g2(null,e,null,null)}),t[al]=null}};function v2(e){this._internalRoot=e}v2.prototype.unstable_scheduleHydration=function(e){if(e){var t=E9();e={blockedOn:null,target:e,priority:t};for(var r=0;r<bu.length&&t!==0&&t<bu[r].priority;r++);bu.splice(r,0,e),r===0&&I9(e)}};function VR(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function w2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function GN(){}function Pte(e,t,r,i,n){if(n){if(typeof i=="function"){var s=i;i=function(){var d=Lb(o);s.call(d)}}var o=ZV(t,i,e,0,null,!1,!1,"",GN);return e._reactRootContainer=o,e[al]=o.current,x0(e.nodeType===8?e.parentNode:e),Yd(),o}for(;n=e.lastChild;)e.removeChild(n);if(typeof i=="function"){var a=i;i=function(){var d=Lb(u);a.call(d)}}var u=FR(e,0,!1,null,null,!1,!1,"",GN);return e._reactRootContainer=u,e[al]=u.current,x0(e.nodeType===8?e.parentNode:e),Yd(function(){g2(t,u,r,i)}),u}function _2(e,t,r,i,n){var s=r._reactRootContainer;if(s){var o=s;if(typeof n=="function"){var a=n;n=function(){var u=Lb(o);a.call(u)}}g2(t,o,e,n)}else o=Pte(r,t,e,n,i);return Lb(o)}T9=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=xy(t.pendingLanes);r!==0&&(sR(t,r|1),Bi(t,qt()),!(Ge&6)&&(Kf=qt()+500,lc()))}break;case 13:Yd(function(){var i=ll(e,1);if(i!==null){var n=_i();Ws(i,e,1,n)}}),DR(e,1)}};oR=function(e){if(e.tag===13){var t=ll(e,134217728);if(t!==null){var r=_i();Ws(t,e,134217728,r)}DR(e,134217728)}};x9=function(e){if(e.tag===13){var t=Uu(e),r=ll(e,t);if(r!==null){var i=_i();Ws(r,e,t,i)}DR(e,t)}};E9=function(){return et};M9=function(e,t){var r=et;try{return et=e,t()}finally{et=r}};hE=function(e,t,r){switch(t){case"input":if(oE(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var n=c2(i);if(!n)throw Error(K(90));n9(i),oE(i,n)}}}break;case"textarea":o9(e,r);break;case"select":t=r.value,t!=null&&vf(e,!!r.multiple,t,!1)}};h9=kR;f9=Yd;var Nte={usingClientEntryPoint:!1,Events:[yv,ef,c2,d9,p9,kR]},Jm={findFiberByHostInstance:Cd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lte={bundleType:Jm.bundleType,version:Jm.version,rendererPackageName:Jm.rendererPackageName,rendererConfig:Jm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=g9(e),e===null?null:e.stateNode},findFiberByHostInstance:Jm.findFiberByHostInstance||kte,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var y1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!y1.isDisabled&&y1.supportsFiber)try{o2=y1.inject(Lte),zo=y1}catch{}}Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nte;Sn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!VR(t))throw Error(K(200));return Ote(e,t,null,r)};Sn.createRoot=function(e,t){if(!VR(e))throw Error(K(299));var r=!1,i="",n=JV;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=FR(e,1,!1,null,null,r,!1,i,n),e[al]=t.current,x0(e.nodeType===8?e.parentNode:e),new jR(t)};Sn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(K(188)):(e=Object.keys(e).join(","),Error(K(268,e)));return e=g9(t),e=e===null?null:e.stateNode,e};Sn.flushSync=function(e){return Yd(e)};Sn.hydrate=function(e,t,r){if(!w2(t))throw Error(K(200));return _2(null,e,t,!0,r)};Sn.hydrateRoot=function(e,t,r){if(!VR(e))throw Error(K(405));var i=r!=null&&r.hydratedSources||null,n=!1,s="",o=JV;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=ZV(t,null,e,1,r??null,n,!1,s,o),e[al]=t.current,x0(e),i)for(e=0;e<i.length;e++)r=i[e],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new v2(t)};Sn.render=function(e,t,r){if(!w2(t))throw Error(K(200));return _2(null,e,t,!1,r)};Sn.unmountComponentAtNode=function(e){if(!w2(e))throw Error(K(40));return e._reactRootContainer?(Yd(function(){_2(null,null,e,!1,function(){e._reactRootContainer=null,e[al]=null})}),!0):!1};Sn.unstable_batchedUpdates=kR;Sn.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!w2(r))throw Error(K(200));if(e==null||e._reactInternals===void 0)throw Error(K(38));return _2(e,t,r,!1,i)};Sn.version="18.3.1-next-f1338f8080-20240426";function KV(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(KV)}catch(e){console.error(e)}}KV(),K8.exports=Sn;var Fte=K8.exports,BN=Fte;Xx.createRoot=BN.createRoot,Xx.hydrateRoot=BN.hydrateRoot;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const YV="calcite-mode-auto",QV="calcite-mode-dark",Dte="calcite-mode-light",VRe={autoMode:YV,darkMode:QV,lightMode:Dte,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"},URe={filter:250,nextTick:0,resize:150,reposition:100},jte="modulepreload",Vte=function(e,t){return new URL(e,t).href},qN={},D=function(t,r,i){let n=Promise.resolve();if(r&&r.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),u=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=Promise.allSettled(r.map(d=>{if(d=Vte(d,i),d in qN)return;qN[d]=!0;const h=d.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(!!i)for(let g=o.length-1;g>=0;g--){const v=o[g];if(v.href===d&&(!h||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${f}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":jte,h||(y.as="script"),y.crossOrigin="",y.href=d,u&&y.setAttribute("nonce",u),document.head.appendChild(y),h)return new Promise((g,v)=>{y.addEventListener("load",g),y.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return n.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};var Wn={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},Ute=Object.defineProperty,zte=(e,t)=>{for(var r in t)Ute(e,r,{get:t[r],enumerable:!0})},XV=new WeakMap,wp=e=>XV.get(e),Gte=(e,t)=>{const r={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return XV.set(e,r)},HN=(e,t)=>t in e,vv=(e,t)=>(0,console.error)(e,t),Fb=new Map,Bte=[],qte="slot-fb{display:contents}slot-fb[hidden]{display:none}",WN="http://www.w3.org/1999/xlink",wv=typeof window<"u"?window:{},Zs=wv.document||{head:{}},eU=wv.HTMLElement||class{},Rr={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,r,i)=>e.addEventListener(t,r,i),rel:(e,t,r,i)=>e.removeEventListener(t,r,i),ce:(e,t)=>new CustomEvent(e,t)},Hte=(()=>{let e=!1;try{Zs.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),Wte=e=>Promise.resolve(e),Zte=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),HE=!1,WE=[],tU=[],rU=(e,t)=>r=>{e.push(r),HE||(HE=!0,t&&Rr.$flags$&4?Jte(ZE):Rr.raf(ZE))},ZN=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(r){vv(r)}e.length=0},ZE=()=>{ZN(WE),ZN(tU),(HE=WE.length>0)&&Rr.raf(ZE)},Jte=e=>Wte().then(e),zRe=rU(WE,!1),Kte=rU(tU,!0),iU=e=>{const t=new URL(e,Rr.$resourcesUrl$);return t.origin!==wv.location.origin?t.href:t.pathname},nU=e=>Rr.$resourcesUrl$=e,JN={},Yte="http://www.w3.org/2000/svg",Qte="http://www.w3.org/1999/xhtml",Xte=e=>e!=null,UR=e=>(e=typeof e,e==="object"||e==="function");function ere(e){var t,r,i;return(i=(r=(t=e.head)==null?void 0:t.querySelector('meta[name="csp-nonce"]'))==null?void 0:r.getAttribute("content"))!=null?i:void 0}var tre={};zte(tre,{err:()=>sU,map:()=>rre,ok:()=>JE,unwrap:()=>ire,unwrapErr:()=>nre});var JE=e=>({isOk:!0,isErr:!1,value:e}),sU=e=>({isOk:!1,isErr:!0,value:e});function rre(e,t){if(e.isOk){const r=t(e.value);return r instanceof Promise?r.then(i=>JE(i)):JE(r)}if(e.isErr){const r=e.value;return sU(r)}throw"should never get here"}var ire=e=>{if(e.isOk)return e.value;throw e.value},nre=e=>{if(e.isErr)return e.value;throw e.value},Qd=(e,t="")=>()=>{},Je=(e,t,...r)=>{let i=null,n=null,s=null,o=!1,a=!1;const u=[],d=f=>{for(let m=0;m<f.length;m++)i=f[m],Array.isArray(i)?d(i):i!=null&&typeof i!="boolean"&&((o=typeof e!="function"&&!UR(i))&&(i=String(i)),o&&a?u[u.length-1].$text$+=i:u.push(o?Db(null,i):i),a=o)};if(d(r),t){t.key&&(n=t.key),t.name&&(s=t.name);{const f=t.className||t.class;f&&(t.class=typeof f!="object"?f:Object.keys(f).filter(m=>f[m]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,u,ore);const h=Db(e,null);return h.$attrs$=t,u.length>0&&(h.$children$=u),h.$key$=n,h.$name$=s,h},Db=(e,t)=>{const r={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return r.$attrs$=null,r.$key$=null,r.$name$=null,r},oU={},sre=e=>e&&e.$tag$===oU,ore={forEach:(e,t)=>e.map(KN).forEach(t),map:(e,t)=>e.map(KN).map(t).map(are)},KN=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),are=e=>{if(typeof e.vtag=="function"){const r={...e.vattrs};return e.vkey&&(r.key=e.vkey),e.vname&&(r.name=e.vname),Je(e.vtag,r,...e.vchildren||[])}const t=Db(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},lre=e=>Bte.map(t=>t(e)).find(t=>!!t),ure=(e,t)=>e!=null&&!UR(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,cre=e=>e,GRe=(e,t,r)=>{const i=cre(e);return{emit:n=>dre(i,t,{bubbles:!!(r&4),composed:!!(r&2),cancelable:!!(r&1),detail:n})}},dre=(e,t,r)=>{const i=Rr.ce(t,r);return e.dispatchEvent(i),i},YN=new WeakMap,pre=(e,t,r)=>{let i=Fb.get(e);Zte&&r?(i=i||new CSSStyleSheet,typeof i=="string"?i=t:i.replaceSync(t)):i=t,Fb.set(e,i)},hre=(e,t,r)=>{var i;const n=aU(t,r),s=Fb.get(n);if(e=e.nodeType===11?e:Zs,s)if(typeof s=="string"){e=e.head||e;let o=YN.get(e),a;if(o||YN.set(e,o=new Set),!o.has(n)){{a=Zs.createElement("style"),a.innerHTML=s;const u=(i=Rr.$nonce$)!=null?i:ere(Zs);u!=null&&a.setAttribute("nonce",u),(!(t.$flags$&1)||t.$flags$&1&&e.nodeName!=="HEAD")&&e.insertBefore(a,e.querySelector("link"))}t.$flags$&4&&(a.innerHTML+=qte),o&&o.add(n)}}else e.adoptedStyleSheets.includes(s)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,s]);return n},fre=e=>{const t=e.$cmpMeta$,r=e.$hostElement$,i=t.$flags$,n=Qd("attachStyles",t.$tagName$),s=hre(r.shadowRoot?r.shadowRoot:r.getRootNode(),t,e.$modeName$);i&10&&i&2&&(r["s-sc"]=s,r.classList.add(s+"-h"),i&2&&r.classList.add(s+"-s")),n()},aU=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),QN=(e,t,r,i,n,s)=>{if(r!==i){let o=HN(e,t),a=t.toLowerCase();if(t==="class"){const u=e.classList,d=XN(r),h=XN(i);u.remove(...d.filter(f=>f&&!h.includes(f))),u.add(...h.filter(f=>f&&!d.includes(f)))}else if(t==="style"){for(const u in r)(!i||i[u]==null)&&(u.includes("-")?e.style.removeProperty(u):e.style[u]="");for(const u in i)(!r||i[u]!==r[u])&&(u.includes("-")?e.style.setProperty(u,i[u]):e.style[u]=i[u])}else if(t!=="key")if(t==="ref")i&&i(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n"){if(t[2]==="-"?t=t.slice(3):HN(wv,a)?t=a.slice(2):t=a[2]+t.slice(3),r||i){const u=t.endsWith(lU);t=t.replace(yre,""),r&&Rr.rel(e,t,r,u),i&&Rr.ael(e,t,i,u)}}else{const u=UR(i);if((o||u&&i!==null)&&!n)try{if(e.tagName.includes("-"))e[t]=i;else{const h=i??"";t==="list"?o=!1:(r==null||e[t]!=h)&&(e[t]=h)}}catch{}let d=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(t=a,d=!0),i==null||i===!1?(i!==!1||e.getAttribute(t)==="")&&(d?e.removeAttributeNS(WN,t):e.removeAttribute(t)):(!o||s&4||n)&&!u&&(i=i===!0?"":i,d?e.setAttributeNS(WN,t,i):e.setAttribute(t,i))}}},mre=/\s/,XN=e=>e?e.split(mre):[],lU="Capture",yre=new RegExp(lU+"$"),uU=(e,t,r)=>{const i=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,n=e&&e.$attrs$||JN,s=t.$attrs$||JN;for(const o of eL(Object.keys(n)))o in s||QN(i,o,n[o],void 0,r,t.$flags$);for(const o of eL(Object.keys(s)))QN(i,o,n[o],s[o],r,t.$flags$)};function eL(e){return e.includes("ref")?[...e.filter(t=>t!=="ref"),"ref"]:e}var Wp,KE,Yf,jb=!1,Vb=!1,zR=!1,cn=!1,Ub=(e,t,r,i)=>{var n;const s=t.$children$[r];let o=0,a,u,d;if(jb||(zR=!0,s.$tag$==="slot"&&(Wp&&i.classList.add(Wp+"-s"),s.$flags$|=s.$children$?2:1)),s.$text$!==null)a=s.$elm$=Zs.createTextNode(s.$text$);else if(s.$flags$&1)a=s.$elm$=Zs.createTextNode("");else{if(cn||(cn=s.$tag$==="svg"),a=s.$elm$=Zs.createElementNS(cn?Yte:Qte,!jb&&Wn.slotRelocation&&s.$flags$&2?"slot-fb":s.$tag$),cn&&s.$tag$==="foreignObject"&&(cn=!1),uU(null,s,cn),!!a.getRootNode().querySelector("body")&&Wn.scoped&&Xte(Wp)&&a["s-si"]!==Wp&&a.classList.add(a["s-si"]=Wp),BR(a,i),s.$children$)for(o=0;o<s.$children$.length;++o)u=Ub(e,s,o,a),u&&a.appendChild(u);s.$tag$==="svg"?cn=!1:a.tagName==="foreignObject"&&(cn=!0)}return a["s-hn"]=Yf,s.$flags$&3&&(a["s-sr"]=!0,a["s-cr"]=KE,a["s-sn"]=s.$name$||"",a["s-rf"]=(n=s.$attrs$)==null?void 0:n.ref,d=e&&e.$children$&&e.$children$[r],d&&d.$tag$===s.$tag$&&e.$elm$&&P0(e.$elm$,!1)),a},P0=(e,t)=>{Rr.$flags$|=1;const r=Array.from(e.childNodes);if(e["s-sr"]&&Wn.experimentalSlotFixes){let i=e;for(;i=i.nextSibling;)i&&i["s-sn"]===e["s-sn"]&&i["s-sh"]===Yf&&r.push(i)}for(let i=r.length-1;i>=0;i--){const n=r[i];n["s-hn"]!==Yf&&n["s-ol"]&&(Gu(pU(n),n,GR(n)),n["s-ol"].remove(),n["s-ol"]=void 0,n["s-sh"]=void 0,zR=!0),t&&P0(n,t)}Rr.$flags$&=-2},cU=(e,t,r,i,n,s)=>{let o=e["s-cr"]&&e["s-cr"].parentNode||e,a;for(o.shadowRoot&&o.tagName===Yf&&(o=o.shadowRoot);n<=s;++n)i[n]&&(a=Ub(null,r,n,e),a&&(i[n].$elm$=a,Gu(o,a,GR(t))))},dU=(e,t,r)=>{for(let i=t;i<=r;++i){const n=e[i];if(n){const s=n.$elm$;mU(n),s&&(Vb=!0,s["s-ol"]?s["s-ol"].remove():P0(s,!0),s.remove())}}},gre=(e,t,r,i,n=!1)=>{let s=0,o=0,a=0,u=0,d=t.length-1,h=t[0],f=t[d],m=i.length-1,y=i[0],g=i[m],v,_;for(;s<=d&&o<=m;)if(h==null)h=t[++s];else if(f==null)f=t[--d];else if(y==null)y=i[++o];else if(g==null)g=i[--m];else if(g1(h,y,n))Zp(h,y,n),h=t[++s],y=i[++o];else if(g1(f,g,n))Zp(f,g,n),f=t[--d],g=i[--m];else if(g1(h,g,n))(h.$tag$==="slot"||g.$tag$==="slot")&&P0(h.$elm$.parentNode,!1),Zp(h,g,n),Gu(e,h.$elm$,f.$elm$.nextSibling),h=t[++s],g=i[--m];else if(g1(f,y,n))(h.$tag$==="slot"||g.$tag$==="slot")&&P0(f.$elm$.parentNode,!1),Zp(f,y,n),Gu(e,f.$elm$,h.$elm$),f=t[--d],y=i[++o];else{for(a=-1,u=s;u<=d;++u)if(t[u]&&t[u].$key$!==null&&t[u].$key$===y.$key$){a=u;break}a>=0?(_=t[a],_.$tag$!==y.$tag$?v=Ub(t&&t[o],r,a,e):(Zp(_,y,n),t[a]=void 0,v=_.$elm$),y=i[++o]):(v=Ub(t&&t[o],r,o,e),y=i[++o]),v&&Gu(pU(h.$elm$),v,GR(h.$elm$))}s>d?cU(e,i[m+1]==null?null:i[m+1].$elm$,r,i,o,m):o>m&&dU(t,s,d)},g1=(e,t,r=!1)=>e.$tag$===t.$tag$?e.$tag$==="slot"?"$nodeId$"in e&&r&&e.$elm$.nodeType!==8?!1:e.$name$===t.$name$:r?!0:e.$key$===t.$key$:!1,GR=e=>e&&e["s-ol"]||e,pU=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,Zp=(e,t,r=!1)=>{const i=t.$elm$=e.$elm$,n=e.$children$,s=t.$children$,o=t.$tag$,a=t.$text$;let u;a===null?(cn=o==="svg"?!0:o==="foreignObject"?!1:cn,o==="slot"&&!jb||uU(e,t,cn),n!==null&&s!==null?gre(i,n,t,s,r):s!==null?(e.$text$!==null&&(i.textContent=""),cU(i,null,t,s,0,s.length-1)):!r&&Wn.updatable&&n!==null&&dU(n,0,n.length-1),cn&&o==="svg"&&(cn=!1)):(u=i["s-cr"])?u.parentNode.textContent=a:e.$text$!==a&&(i.data=a)},hU=e=>{const t=e.childNodes;for(const r of t)if(r.nodeType===1){if(r["s-sr"]){const i=r["s-sn"];r.hidden=!1;for(const n of t)if(n!==r){if(n["s-hn"]!==r["s-hn"]||i!==""){if(n.nodeType===1&&(i===n.getAttribute("slot")||i===n["s-sn"])||n.nodeType===3&&i===n["s-sn"]){r.hidden=!0;break}}else if(n.nodeType===1||n.nodeType===3&&n.textContent.trim()!==""){r.hidden=!0;break}}}hU(r)}},Ha=[],fU=e=>{let t,r,i;for(const n of e.childNodes){if(n["s-sr"]&&(t=n["s-cr"])&&t.parentNode){r=t.parentNode.childNodes;const s=n["s-sn"];for(i=r.length-1;i>=0;i--)if(t=r[i],!t["s-cn"]&&!t["s-nr"]&&t["s-hn"]!==n["s-hn"]&&!Wn.experimentalSlotFixes)if(tL(t,s)){let o=Ha.find(a=>a.$nodeToRelocate$===t);Vb=!0,t["s-sn"]=t["s-sn"]||s,o?(o.$nodeToRelocate$["s-sh"]=n["s-hn"],o.$slotRefNode$=n):(t["s-sh"]=n["s-hn"],Ha.push({$slotRefNode$:n,$nodeToRelocate$:t})),t["s-sr"]&&Ha.map(a=>{tL(a.$nodeToRelocate$,t["s-sn"])&&(o=Ha.find(u=>u.$nodeToRelocate$===t),o&&!a.$slotRefNode$&&(a.$slotRefNode$=o.$slotRefNode$))})}else Ha.some(o=>o.$nodeToRelocate$===t)||Ha.push({$nodeToRelocate$:t})}n.nodeType===1&&fU(n)}},tL=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",mU=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(mU)},Gu=(e,t,r)=>{const i=e==null?void 0:e.insertBefore(t,r);return BR(t,e),i},yU=e=>{const t=[];return e&&t.push(...e["s-scs"]||[],e["s-si"],e["s-sc"],...yU(e.parentElement)),t},BR=(e,t,r=!1)=>{var i;if(e&&t&&e.nodeType===1){const n=new Set(yU(t).filter(Boolean));if(n.size&&((i=e.classList)==null||i.add(...e["s-scs"]=[...n]),e["s-ol"]||r))for(const s of Array.from(e.childNodes))BR(s,e,!0)}},vre=(e,t,r=!1)=>{var i,n,s,o,a;const u=e.$hostElement$,d=e.$cmpMeta$,h=e.$vnode$||Db(null,null),f=sre(t)?t:Je(null,null,t);if(Yf=u.tagName,d.$attrsToReflect$&&(f.$attrs$=f.$attrs$||{},d.$attrsToReflect$.map(([m,y])=>f.$attrs$[y]=u[m])),r&&f.$attrs$)for(const m of Object.keys(f.$attrs$))u.hasAttribute(m)&&!["key","ref","style","class"].includes(m)&&(f.$attrs$[m]=u[m]);f.$tag$=null,f.$flags$|=4,e.$vnode$=f,f.$elm$=h.$elm$=u.shadowRoot||u,Wp=u["s-sc"],jb=(d.$flags$&1)!==0,KE=u["s-cr"],Vb=!1,Zp(h,f,r);{if(Rr.$flags$|=1,zR){fU(f.$elm$);for(const m of Ha){const y=m.$nodeToRelocate$;if(!y["s-ol"]){const g=Zs.createTextNode("");g["s-nr"]=y,Gu(y.parentNode,y["s-ol"]=g,y)}}for(const m of Ha){const y=m.$nodeToRelocate$,g=m.$slotRefNode$;if(g){const v=g.parentNode;let _=g.nextSibling;{let w=(i=y["s-ol"])==null?void 0:i.previousSibling;for(;w;){let b=(n=w["s-nr"])!=null?n:null;if(b&&b["s-sn"]===y["s-sn"]&&v===b.parentNode){for(b=b.nextSibling;b===y||b!=null&&b["s-sr"];)b=b==null?void 0:b.nextSibling;if(!b||!b["s-nr"]){_=b;break}}w=w.previousSibling}}(!_&&v!==y.parentNode||y.nextSibling!==_)&&y!==_&&(!y["s-hn"]&&y["s-ol"]&&(y["s-hn"]=y["s-ol"].parentNode.nodeName),Gu(v,y,_),y.nodeType===1&&(y.hidden=(s=y["s-ih"])!=null?s:!1)),y&&typeof g["s-rf"]=="function"&&g["s-rf"](y)}else y.nodeType===1&&(r&&(y["s-ih"]=(o=y.hidden)!=null?o:!1),y.hidden=!0)}}Vb&&hU(f.$elm$),Rr.$flags$&=-2,Ha.length=0}if(Wn.experimentalScopedSlotChanges&&d.$flags$&2)for(const m of f.$elm$.childNodes)m["s-hn"]!==Yf&&!m["s-sh"]&&(r&&m["s-ih"]==null&&(m["s-ih"]=(a=m.hidden)!=null?a:!1),m.hidden=!0);KE=void 0},wre=(e,t)=>{},qR=(e,t)=>(e.$flags$|=16,wre(e,e.$ancestorComponent$),Kte(()=>_re(e,t))),_re=(e,t)=>{const r=e.$hostElement$,i=Qd("scheduleUpdate",e.$cmpMeta$.$tagName$),n=r;if(!n)throw new Error(`Can't render component <${r.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let s;return t?s=Tf(n,"componentWillLoad"):s=Tf(n,"componentWillUpdate"),s=rL(s,()=>Tf(n,"componentWillRender")),i(),rL(s,()=>Sre(e,n,t))},rL=(e,t)=>bre(e)?e.then(t).catch(r=>{console.error(r),t()}):t(),bre=e=>e instanceof Promise||e&&e.then&&typeof e.then=="function",Sre=async(e,t,r)=>{const i=e.$hostElement$,n=Qd("update",e.$cmpMeta$.$tagName$);i["s-rc"],r&&fre(e);const s=Qd("render",e.$cmpMeta$.$tagName$);$re(e,t,i,r),s(),n(),Tre(e)},iL=null,$re=(e,t,r,i)=>{try{iL=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(Wn.hasRenderFn||Wn.reflect)&&(Wn.vdomRender||Wn.reflect)&&(Wn.hydrateServerSide||vre(e,t,i))}catch(u){vv(u,e.$hostElement$)}return iL=null,null},Tre=e=>{const t=e.$cmpMeta$.$tagName$,r=e.$hostElement$,i=Qd("postUpdate",t),n=r;e.$ancestorComponent$,Tf(n,"componentDidRender"),e.$flags$&64?(Tf(n,"componentDidUpdate"),i()):(e.$flags$|=64,Tf(n,"componentDidLoad"),i())},xre=e=>{{const t=wp(e),r=t.$hostElement$.isConnected;return r&&(t.$flags$&18)===2&&qR(t,!1),r}},Tf=(e,t,r)=>{if(e&&e[t])try{return e[t](r)}catch(i){vv(i)}},Ere=(e,t)=>wp(e).$instanceValues$.get(t),Mre=(e,t,r,i)=>{const n=wp(e),s=e,o=n.$instanceValues$.get(t),a=n.$flags$,u=s;r=ure(r,i.$members$[t][0]);const d=Number.isNaN(o)&&Number.isNaN(r);if(r!==o&&!d){n.$instanceValues$.set(t,r);{if(i.$watchers$&&a&128){const f=i.$watchers$[t];f&&f.map(m=>{try{u[m](r,o,t)}catch(y){vv(y,s)}})}if((a&18)===2){if(u.componentShouldUpdate&&u.componentShouldUpdate(r,o,t)===!1)return;qR(n,!1)}}}},Ire=(e,t,r)=>{var i,n;const s=e.prototype;if(t.$members$||t.$watchers$||e.watchers){e.watchers&&!t.$watchers$&&(t.$watchers$=e.watchers);const o=Object.entries((i=t.$members$)!=null?i:{});o.map(([a,[u]])=>{(u&31||u&32)&&Object.defineProperty(s,a,{get(){return Ere(this,a)},set(d){Mre(this,a,d,t)},configurable:!0,enumerable:!0})});{const a=new Map;s.attributeChangedCallback=function(u,d,h){Rr.jmp(()=>{var f;const m=a.get(u);if(this.hasOwnProperty(m))h=this[m],delete this[m];else{if(s.hasOwnProperty(m)&&typeof this[m]=="number"&&this[m]==h)return;if(m==null){const y=wp(this),g=y==null?void 0:y.$flags$;if(g&&!(g&8)&&g&128&&h!==d){const _=this,w=(f=t.$watchers$)==null?void 0:f[u];w==null||w.forEach(b=>{_[b]!=null&&_[b].call(_,h,d,u)})}return}}this[m]=h===null&&typeof this[m]=="boolean"?!1:h})},e.observedAttributes=Array.from(new Set([...Object.keys((n=t.$watchers$)!=null?n:{}),...o.filter(([u,d])=>d[0]&15).map(([u,d])=>{var h;const f=d[1]||u;return a.set(f,u),d[0]&512&&((h=t.$attrsToReflect$)==null||h.push([u,f])),f})]))}}return e},Cre=async(e,t,r,i)=>{let n;if(!(t.$flags$&32)){t.$flags$|=32,r.$lazyBundleId$;{n=e.constructor;const o=e.localName;customElements.whenDefined(o).then(()=>t.$flags$|=128)}if(n&&n.style){let o;typeof n.style=="string"?o=n.style:typeof n.style!="string"&&(t.$modeName$=lre(e),t.$modeName$&&(o=n.style[t.$modeName$]));const a=aU(r,t.$modeName$);if(!Fb.has(a)){const u=Qd("registerStyles",r.$tagName$);pre(a,o,!!(r.$flags$&1)),u()}}}t.$ancestorComponent$,qR(t,!0)},nL=e=>{},Are=e=>{if(!(Rr.$flags$&1)){const t=wp(e),r=t.$cmpMeta$,i=Qd("connectedCallback",r.$tagName$);t.$flags$&1?(vU(e,t,r.$listeners$),t!=null&&t.$lazyInstance$?nL(t.$lazyInstance$):t!=null&&t.$onReadyPromise$&&t.$onReadyPromise$.then(()=>nL(t.$lazyInstance$))):(t.$flags$|=1,r.$flags$&12&&Rre(e),r.$members$&&Object.entries(r.$members$).map(([n,[s]])=>{if(s&31&&e.hasOwnProperty(n)){const o=e[n];delete e[n],e[n]=o}}),Cre(e,t,r)),i()}},Rre=e=>{const t=e["s-cr"]=Zs.createComment("");t["s-cn"]=!0,Gu(e,t,e.firstChild)},Ore=async e=>{if(!(Rr.$flags$&1)){const t=wp(e);t.$rmListeners$&&(t.$rmListeners$.map(r=>r()),t.$rmListeners$=void 0)}},gU=(e,t)=>{const r={$flags$:t[0],$tagName$:t[1]};r.$members$=t[2],r.$listeners$=t[3],r.$watchers$=e.$watchers$,r.$attrsToReflect$=[];const i=e.prototype.connectedCallback,n=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){Gte(this,r)},connectedCallback(){const s=wp(this);vU(this,s,r.$listeners$),Are(this),i&&i.call(this)},disconnectedCallback(){Ore(this),n&&n.call(this)},__attachShadow(){if(!this.shadowRoot)this.attachShadow({mode:"open",delegatesFocus:!!(r.$flags$&16)});else if(this.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${r.$tagName$}! Mode is set to ${this.shadowRoot.mode} but Stencil only supports open shadow roots.`)}}),e.is=r.$tagName$,Ire(e,r)},kre=(e,t)=>t,vU=(e,t,r,i)=>{r&&r.map(([n,s,o])=>{const a=Nre(e,n),u=Pre(t,o),d=Lre(n);Rr.ael(a,s,u,d),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>Rr.rel(a,s,u,d))})},Pre=(e,t)=>r=>{var i;try{Wn.lazyLoad||e.$hostElement$[t](r)}catch(n){vv(n)}},Nre=(e,t)=>t&4?Zs:t&8?wv:t&16?Zs.body:e,Lre=e=>Hte?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const tl=globalThis.calciteConfig,BRe=(tl==null?void 0:tl.focusTrapStack)||[];tl!=null&&tl.logLevel;const sL="2.13.2",Fre="2024-10-24",Dre="e38e2977d";function jre(){if(tl&&tl.version)return;console.info(`Using Calcite Components ${sL} [Date: ${Fre}, Revision: ${Dre}]`);const e=tl||globalThis.calciteConfig||{};Object.defineProperty(e,"version",{value:sL,writable:!1}),globalThis.calciteConfig=e}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const HR=()=>typeof navigator<"u"&&typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function oL(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=()=>e.contains(QV)||e.contains(YV)&&t?"dark":"light",i=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),n=o=>{s!==o&&i(o),s=o};let s=r();i(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>n(o.matches?"dark":"light")),new MutationObserver(()=>n(r())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function Vre(){HR()&&(document.readyState==="interactive"?oL():document.addEventListener("DOMContentLoaded",()=>oL(),{once:!0})),jre()}const Ure=Vre;Ure();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function wU(e,t,r){if(!HR())return;const i=zre(e);return new i(t,r)}function zre(e){class t extends window.MutationObserver{constructor(i){super(i),this.observedEntry=[],this.callback=i}observe(i,n){return this.observedEntry.push({target:i,options:n}),super.observe(i,n)}unobserve(i){const n=this.observedEntry.filter(s=>s.target!==i);this.observedEntry=[],this.callback(super.takeRecords(),this),this.disconnect(),n.forEach(s=>this.observe(s.target,s.options))}}return function(){return e==="intersection"?window.IntersectionObserver:e==="mutation"?t:window.ResizeObserver}()}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */let Lw;const Gre={childList:!0};function Bre(e){Lw||(Lw=wU("mutation",Hre)),Lw.observe(e.el,Gre)}function qre(e){Lw.unobserve(e.el)}function Hre(e){e.forEach(({target:t})=>{xre(t)})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function Wre(e){return e.map(t=>{let r="";for(let i=0;i<t;i++)r+=((1+Math.random())*65536|0).toString(16).substring(1);return r}).join("-")}const Zre=()=>Wre([2,1,1,1,3]);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 *//*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var _U=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],zb=_U.join(","),bU=typeof Element>"u",Xd=bU?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Gb=!bU&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},Bb=function e(t,r){var i;r===void 0&&(r=!0);var n=t==null||(i=t.getAttribute)===null||i===void 0?void 0:i.call(t,"inert"),s=n===""||n==="true",o=s||r&&t&&e(t.parentNode);return o},Jre=function(t){var r,i=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"contenteditable");return i===""||i==="true"},SU=function(t,r,i){if(Bb(t))return[];var n=Array.prototype.slice.apply(t.querySelectorAll(zb));return r&&Xd.call(t,zb)&&n.unshift(t),n=n.filter(i),n},$U=function e(t,r,i){for(var n=[],s=Array.from(t);s.length;){var o=s.shift();if(!Bb(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),u=a.length?a:o.children,d=e(u,!0,i);i.flatten?n.push.apply(n,d):n.push({scopeParent:o,candidates:d})}else{var h=Xd.call(o,zb);h&&i.filter(o)&&(r||!t.includes(o))&&n.push(o);var f=o.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(o),m=!Bb(f,!1)&&(!i.shadowRootFilter||i.shadowRootFilter(o));if(f&&m){var y=e(f===!0?o.children:f.children,!0,i);i.flatten?n.push.apply(n,y):n.push({scopeParent:o,candidates:y})}else s.unshift.apply(s,o.children)}}return n},TU=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},xU=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||Jre(t))&&!TU(t)?0:t.tabIndex},Kre=function(t,r){var i=xU(t);return i<0&&r&&!TU(t)?0:i},Yre=function(t,r){return t.tabIndex===r.tabIndex?t.documentOrder-r.documentOrder:t.tabIndex-r.tabIndex},EU=function(t){return t.tagName==="INPUT"},Qre=function(t){return EU(t)&&t.type==="hidden"},Xre=function(t){var r=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(i){return i.tagName==="SUMMARY"});return r},eie=function(t,r){for(var i=0;i<t.length;i++)if(t[i].checked&&t[i].form===r)return t[i]},tie=function(t){if(!t.name)return!0;var r=t.form||Gb(t),i=function(a){return r.querySelectorAll('input[type="radio"][name="'+a+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=i(window.CSS.escape(t.name));else try{n=i(t.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=eie(n,t.form);return!s||s===t},rie=function(t){return EU(t)&&t.type==="radio"},iie=function(t){return rie(t)&&!tie(t)},nie=function(t){var r,i=t&&Gb(t),n=(r=i)===null||r===void 0?void 0:r.host,s=!1;if(i&&i!==t){var o,a,u;for(s=!!((o=n)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(n)||t!=null&&(u=t.ownerDocument)!==null&&u!==void 0&&u.contains(t));!s&&n;){var d,h,f;i=Gb(n),n=(d=i)===null||d===void 0?void 0:d.host,s=!!((h=n)!==null&&h!==void 0&&(f=h.ownerDocument)!==null&&f!==void 0&&f.contains(n))}}return s},aL=function(t){var r=t.getBoundingClientRect(),i=r.width,n=r.height;return i===0&&n===0},sie=function(t,r){var i=r.displayCheck,n=r.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var s=Xd.call(t,"details>summary:first-of-type"),o=s?t.parentElement:t;if(Xd.call(o,"details:not([open]) *"))return!0;if(!i||i==="full"||i==="legacy-full"){if(typeof n=="function"){for(var a=t;t;){var u=t.parentElement,d=Gb(t);if(u&&!u.shadowRoot&&n(u)===!0)return aL(t);t.assignedSlot?t=t.assignedSlot:!u&&d!==t.ownerDocument?t=d.host:t=u}t=a}if(nie(t))return!t.getClientRects().length;if(i!=="legacy-full")return!0}else if(i==="non-zero-area")return aL(t);return!1},oie=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var r=t.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var i=0;i<r.children.length;i++){var n=r.children.item(i);if(n.tagName==="LEGEND")return Xd.call(r,"fieldset[disabled] *")?!0:!n.contains(t)}return!0}r=r.parentElement}return!1},qb=function(t,r){return!(r.disabled||Bb(r)||Qre(r)||sie(r,t)||Xre(r)||oie(r))},YE=function(t,r){return!(iie(r)||xU(r)<0||!qb(t,r))},aie=function(t){var r=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(r)||r>=0)},lie=function e(t){var r=[],i=[];return t.forEach(function(n,s){var o=!!n.scopeParent,a=o?n.scopeParent:n,u=Kre(a,o),d=o?e(n.candidates):a;u===0?o?r.push.apply(r,d):r.push(a):i.push({documentOrder:s,tabIndex:u,item:n,isScope:o,content:d})}),i.sort(Yre).reduce(function(n,s){return s.isScope?n.push.apply(n,s.content):n.push(s.content),n},[]).concat(r)},uie=function(t,r){r=r||{};var i;return r.getShadowRoot?i=$U([t],r.includeContainer,{filter:YE.bind(null,r),flatten:!1,getShadowRoot:r.getShadowRoot,shadowRootFilter:aie}):i=SU(t,r.includeContainer,YE.bind(null,r)),lie(i)},qRe=function(t,r){r=r||{};var i;return r.getShadowRoot?i=$U([t],r.includeContainer,{filter:qb.bind(null,r),flatten:!0,getShadowRoot:r.getShadowRoot}):i=SU(t,r.includeContainer,qb.bind(null,r)),i},HRe=function(t,r){if(r=r||{},!t)throw new Error("No node provided");return Xd.call(t,zb)===!1?!1:YE(r,t)},cie=_U.concat("iframe").join(","),WRe=function(t,r){if(r=r||{},!t)throw new Error("No node provided");return Xd.call(t,cie)===!1?!1:qb(r,t)};const die={getShadowRoot:!0};function ZRe(e){return e?e.id=e.id||`${e.tagName.toLowerCase()}-${Zre()}`:""}function pie(e){const t="dir",r=`[${t}]`,i=IU(e,r);return i?i.getAttribute(t):"ltr"}function WR(e){return e.getRootNode()}function JRe(e){const t=WR(e);return"host"in t?t:null}function MU(e){return e.host||null}function hie(e,{selector:t,id:r}){if(!e)return null;e.assignedSlot&&(e=e.assignedSlot);const i=WR(e);return(r?"getElementById"in i?i.getElementById(r):null:t?i.querySelector(t):null)||hie(MU(i),{selector:t,id:r})}function IU(e,t){return e?e.closest(t)||IU(MU(WR(e)),t):null}function fie(e,t){return CU(e,t)}function CU(e,t){if(!e)return;const r=t(e);if(r!==void 0)return r;const{parentNode:i}=e;return CU(i instanceof ShadowRoot?i.host:i,t)}function KRe(e,t){return!!fie(t,r=>r===e?!0:void 0)}function mie(e){return typeof(e==null?void 0:e.setFocus)=="function"}async function yie(e){if(e)return mie(e)?e.setFocus():e.focus()}function gie(e){if(e)return uie(e,die)[0]??e}function YRe(e){var t;(t=gie(e))==null||t.focus()}const N0=":not([slot])";function QRe(e,t,r){t&&!Array.isArray(t)&&typeof t!="string"&&(r=t,t=null);const i=t?Array.isArray(t)?t.map(n=>`[slot="${n}"]`).join(","):`[slot="${t}"]`:N0;return r!=null&&r.all?vie(e,i,r):wie(e,i,r)}function AU(e,t){return e?Array.from(e.children||[]).filter(r=>r==null?void 0:r.matches(t)):[]}function vie(e,t,r){let i=t===N0?AU(e,N0):Array.from(e.querySelectorAll(t));i=r&&r.direct===!1?i:i.filter(s=>s.parentElement===e),i=r!=null&&r.matches?i.filter(s=>s==null?void 0:s.matches(r.matches)):i;const n=r==null?void 0:r.selector;return n?i.map(s=>Array.from(s.querySelectorAll(n))).reduce((s,o)=>[...s,...o],[]).filter(s=>!!s):i}function wie(e,t,r){let i=t===N0?AU(e,N0)[0]||null:e.querySelector(t);i=r&&r.direct===!1||(i==null?void 0:i.parentElement)===e?i:null,i=r!=null&&r.matches?i!=null&&i.matches(r.matches)?i:null:i;const n=r==null?void 0:r.selector;return n?i==null?void 0:i.querySelector(n):i}function _ie(e,t){return e.filter(r=>r.matches(t))}function XRe(e,t,r){if(typeof t=="string"&&t!=="")return t;if(t==="")return e[r]}function bie(e){return(!!e).toString()}function eOe(e){return ca(e)||$ie(e)}function Sie(e){return Tie(e).filter(t=>t.nodeType===Node.TEXT_NODE).map(t=>t.textContent).join("").trim()}function $ie(e){return!!Sie(e)}function Tie(e){return e.currentTarget.assignedNodes({flatten:!0})}function ca(e){return!!My(e).length}function My(e,t){return xie(e.target,t)}function xie(e,t){const r=e.assignedElements({flatten:!0});return t?_ie(r,t):r}function tOe(e){return!!(e.isPrimary&&e.button===0)}function rOe(e){return e.detail===0}const iOe=(e,t,r,i=!0)=>{const n=e.indexOf(t),s=n===0,o=n===e.length-1;i&&(r=r==="previous"&&s?"last":r==="next"&&o?"first":r);let a;return r==="previous"?a=e[n-1]||e[i?e.length-1:n]:r==="next"?a=e[n+1]||e[i?0:n]:r==="last"?a=e[e.length-1]:a=e[0],yie(a),a};function nOe(e,t){if(e.parentNode!==t.parentNode)return!1;const r=Array.from(e.parentNode.children);return r.indexOf(e)<r.indexOf(t)}async function sOe(e,t,r,i){return Eie(e,t,"transition",r,i)}async function Eie(e,t,r,i,n){const s=window.getComputedStyle(e),o=s.transitionDuration,a=s.transitionProperty,u=o.split(","),h=a.split(",").map(_=>_.trim()).indexOf(t),f=u[h]??u[0];function m(){requestAnimationFrame(()=>{i==null||i(),requestAnimationFrame(()=>n==null?void 0:n())})}if(f==="0s"){m();return}const y="transitionstart",g="transitionend",v="transitioncancel";return new Promise(_=>{const w=window.setTimeout(()=>{e.removeEventListener(y,b),e.removeEventListener(g,T),e.removeEventListener(v,T),m(),_()},parseFloat(f)*1e3);e.addEventListener(y,b),e.addEventListener(g,T),e.addEventListener(v,T);function b(x){x.target===e&&lL(x)===t&&(window.clearTimeout(w),e.removeEventListener(y,b),i==null||i())}function T(x){x.target===e&&lL(x)===t&&(e.removeEventListener(g,T),e.removeEventListener(v,T),n==null||n(),_())}})}function Mie(e){return"propertyName"in e}function lL(e){return Mie(e)?e.propertyName:e.animationName}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const so={main:"main",content:"content",contentBehind:"content--behind",contentBottom:"content-bottom",contentNonInteractive:"content--non-interactive",footer:"footer",positionedSlotWrapper:"positioned-slot-wrapper",container:"container",contentBehindCenterContent:"center-content"},hs={centerRow:"center-row",panelStart:"panel-start",panelEnd:"panel-end",panelTop:"panel-top",panelBottom:"panel-bottom",header:"header",footer:"footer",alerts:"alerts",sheets:"sheets",modals:"modals",dialogs:"dialogs"},Iie=":host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{position:absolute;inset:0px;display:flex;block-size:100%;inline-size:100%;flex-direction:column;overflow:hidden;--calcite-shell-tip-spacing:26vw}.main{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;flex-direction:row;justify-content:space-between;overflow:hidden}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;overflow:auto;justify-content:space-between}.content ::slotted(calcite-shell-center-row),.content ::slotted(calcite-panel),.content ::slotted(calcite-flow){flex:1 1 auto;align-self:stretch;max-block-size:unset}.content--behind{position:absolute;inset:0px;border-width:0px;z-index:calc(var(--calcite-z-index) - 1);display:initial}.content--non-interactive{pointer-events:none;display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap}::slotted(calcite-shell-center-row){inline-size:unset}::slotted(.header .heading){font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-normal)}slot[name=panel-start]::slotted(calcite-shell-panel),slot[name=panel-end]::slotted(calcite-shell-panel){position:relative;z-index:calc(var(--calcite-z-index) + 1)}slot[name=panel-end]::slotted(calcite-shell-panel){margin-inline-start:auto}::slotted(calcite-panel),::slotted(calcite-flow){border-width:1px;border-inline-start-width:0px;border-inline-end-width:0px;border-style:solid;border-color:var(--calcite-color-border-3)}slot[name=center-row]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-top]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-bottom]::slotted(calcite-shell-center-row:not([detached])){border-inline-start-width:1px;border-inline-end-width:1px;border-color:var(--calcite-color-border-3)}.center-content{display:flex;flex-direction:column;justify-content:space-between;block-size:100%;inline-size:100%;min-inline-size:0}.content-bottom{justify-content:flex-end}::slotted(calcite-shell-center-row){flex:none;align-self:stretch}::slotted(calcite-tip-manager){position:absolute;z-index:var(--calcite-z-index-toast);box-sizing:border-box}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}::slotted(calcite-tip-manager){animation:in-up var(--calcite-internal-animation-timing-slow) ease-in-out;border-radius:0.25rem;--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);inset-block-end:0.5rem;inset-inline:var(--calcite-shell-tip-spacing)}slot[name=center-row]::slotted(calcite-shell-center-row),slot[name=panel-bottom]::slotted(calcite-shell-center-row){margin-block-start:auto}slot[name=panel-top]::slotted(calcite-shell-center-row){margin-block-end:auto}.position-wrapper{position:absolute;pointer-events:none;inset:0}:host([hidden]){display:none}[hidden]{display:none}",Cie=Iie,Aie=gU(class extends eU{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.handleHeaderSlotChange=t=>{this.hasHeader=!!ca(t)},this.handleFooterSlotChange=t=>{this.hasFooter=!!ca(t)},this.handleAlertsSlotChange=t=>{var r;this.hasAlerts=!!ca(t),(r=My(t))==null||r.map(i=>{i.tagName==="CALCITE-ALERT"&&(i.embedded=!0)})},this.handleSheetsSlotChange=t=>{var r;this.hasSheets=!!ca(t),(r=My(t))==null||r.map(i=>{i.tagName==="CALCITE-SHEET"&&(i.embedded=!0)})},this.handleModalsSlotChange=t=>{var r;this.hasModals=!!ca(t),(r=My(t))==null||r.map(i=>{i.tagName==="CALCITE-MODAL"&&(i.embedded=!0)})},this.handlePanelTopChange=t=>{this.hasPanelTop=ca(t)},this.handlePanelBottomChange=t=>{this.hasPanelBottom=ca(t)},this.handleDialogsSlotChange=t=>{var r;this.hasDialogs=!!ca(t),(r=My(t))==null||r.map(i=>{i.tagName==="CALCITE-DIALOG"&&(i.embedded=!0)})},this.contentBehind=!1,this.hasHeader=!1,this.hasFooter=!1,this.hasAlerts=!1,this.hasModals=!1,this.hasDialogs=!1,this.hasSheets=!1,this.hasPanelTop=!1,this.hasPanelBottom=!1,this.hasOnlyPanelBottom=!1,this.panelIsResizing=!1}handleCalciteInternalShellPanelResizeStart(t){this.panelIsResizing=!0,t.stopPropagation()}handleCalciteInternalShellPanelResizeEnd(t){this.panelIsResizing=!1,t.stopPropagation()}updateHasOnlyPanelBottom(){this.hasOnlyPanelBottom=!this.hasPanelTop&&this.hasPanelBottom}connectedCallback(){Bre(this)}disconnectedCallback(){qre(this)}renderHeader(){return Je("div",{hidden:!this.hasHeader},Je("slot",{key:"header",name:hs.header,onSlotchange:this.handleHeaderSlotChange}))}renderFooter(){return Je("div",{class:so.footer,hidden:!this.hasFooter,key:"footer"},Je("slot",{name:hs.footer,onSlotchange:this.handleFooterSlotChange}))}renderAlerts(){return Je("div",{hidden:!this.hasAlerts},Je("slot",{key:"alerts",name:hs.alerts,onSlotchange:this.handleAlertsSlotChange}))}renderSheets(){return Je("div",{hidden:!this.hasSheets},Je("slot",{key:"sheets",name:hs.sheets,onSlotchange:this.handleSheetsSlotChange}))}renderModals(){return Je("div",{hidden:!this.hasModals},Je("slot",{key:"modals",name:hs.modals,onSlotchange:this.handleModalsSlotChange}))}renderDialogs(){return Je("div",{hidden:!this.hasDialogs},Je("slot",{key:"dialogs",name:hs.dialogs,onSlotchange:this.handleDialogsSlotChange}))}renderContent(){const{panelIsResizing:t}=this,r=Je("slot",{key:"default-slot"}),i=t?Je("div",{class:so.contentNonInteractive},r):r,n=Je("slot",{key:"center-row-slot",name:hs.centerRow}),s=Je("slot",{key:"panel-bottom-slot",name:hs.panelBottom,onSlotchange:this.handlePanelBottomChange}),o=Je("slot",{key:"panel-top-slot",name:hs.panelTop,onSlotchange:this.handlePanelTopChange}),a="content-container";return this.contentBehind?[Je("div",{class:{[so.content]:!0,[so.contentBehind]:!0},key:a},i),Je("div",{class:{[so.contentBehindCenterContent]:!0,[so.contentBottom]:this.hasOnlyPanelBottom}},o,s,n)]:[Je("div",{class:{[so.content]:!0,[so.contentBottom]:this.hasOnlyPanelBottom},key:a},o,i,s,n)]}renderMain(){return Je("div",{class:so.main},Je("slot",{name:hs.panelStart}),this.renderContent(),Je("slot",{name:hs.panelEnd}))}renderPositionedSlots(){return Je("div",{class:so.positionedSlotWrapper},this.renderAlerts(),this.renderModals(),this.renderDialogs(),this.renderSheets())}render(){return Je(kre,{key:"6864b8b95b6edd871ad622b0d49a3f4a42a0a8a8"},this.renderHeader(),this.renderMain(),this.renderFooter(),this.renderPositionedSlots())}get el(){return this}static get watchers(){return{hasPanelTop:["updateHasOnlyPanelBottom"],hasPanelBottom:["updateHasOnlyPanelBottom"]}}static get style(){return Cie}},[1,"calcite-shell",{contentBehind:[516,"content-behind"],hasHeader:[32],hasFooter:[32],hasAlerts:[32],hasModals:[32],hasDialogs:[32],hasSheets:[32],hasPanelTop:[32],hasPanelBottom:[32],hasOnlyPanelBottom:[32],panelIsResizing:[32]},[[0,"calciteInternalShellPanelResizeStart","handleCalciteInternalShellPanelResizeStart"],[0,"calciteInternalShellPanelResizeEnd","handleCalciteInternalShellPanelResizeEnd"]],{hasPanelTop:["updateHasOnlyPanelBottom"],hasPanelBottom:["updateHasOnlyPanelBottom"]}]);function Rie(){if(typeof customElements>"u")return;["calcite-shell"].forEach(t=>{switch(t){case"calcite-shell":customElements.get(t)||customElements.define(t,Aie);break}})}Rie();const Oie=e=>e.toLowerCase().split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(""),RU=e=>e.replace(/([A-Z])/g,t=>`-${t[0].toLowerCase()}`),kie=(e,t,r={})=>{if(e instanceof Element){const i=Pie(e.classList,t,r);i!==""&&(e.className=i),Object.keys(t).forEach(n=>{if(!(n==="children"||n==="style"||n==="ref"||n==="class"||n==="className"||n==="forwardedRef"))if(n.indexOf("on")===0&&n[2]===n[2].toUpperCase()){const s=n.substring(2),o=s[0].toLowerCase()+s.substring(1);OU(o)||Lie(e,o,t[n])}else e[n]=t[n],typeof t[n]==="string"&&e.setAttribute(RU(n),t[n])})}},Pie=(e,t,r)=>{const i=t.className||t.class,n=r.className||r.class,s=yT(e),o=yT(i?i.split(" "):[]),a=yT(n?n.split(" "):[]),u=[];return s.forEach(d=>{o.has(d)?(u.push(d),o.delete(d)):a.has(d)||u.push(d)}),o.forEach(d=>u.push(d)),u.join(" ")},Nie=e=>{switch(e){case"doubleclick":return"dblclick"}return e};/**
 * Checks if an event is supported in the current execution environment.
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */const OU=e=>{if(typeof document>"u")return!0;{const t="on"+Nie(e);let r=t in document;if(!r){const i=document.createElement("div");i.setAttribute(t,"return;"),r=typeof i[t]=="function"}return r}},Lie=(e,t,r)=>{const i=e.__events||(e.__events={}),n=i[t];n&&e.removeEventListener(t,n),e.addEventListener(t,i[t]=function(o){r&&r.call(this,o)})},yT=e=>{const t=new Map;return e.forEach(r=>t.set(r,r)),t},Fie=(e,t)=>{typeof e=="function"?e(t):e!=null&&(e.current=t)},Die=(...e)=>t=>{e.forEach(r=>{Fie(r,t)})},jie=(e,t)=>{const r=(i,n)=>Qx.createElement(e,Object.assign({},i,{forwardedRef:n}));return r.displayName=t,Qx.forwardRef(r)};var Vie=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r};const kU=(e,t,r,i)=>{const n=Oie(e),s=class extends Qx.Component{constructor(o){super(o),this.setComponentElRef=a=>{this.componentEl=a}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(o){kie(this.componentEl,this.props,o)}render(){const o=this.props,{children:a,forwardedRef:u,style:d,className:h,ref:f}=o,m=Vie(o,["children","forwardedRef","style","className","ref"]);let y=Object.keys(m).reduce((v,_)=>{const w=m[_];if(_.indexOf("on")===0&&_[2]===_[2].toUpperCase()){const b=_.substring(2).toLowerCase();typeof document<"u"&&OU(b)&&(v[_]=w)}else{const b=typeof w;(b==="string"||b==="boolean"||b==="number")&&(v[RU(_)]=w)}return v},{});const g=Object.assign(Object.assign({},y),{ref:Die(u,this.setComponentElRef),style:d});return jr.createElement(e,g,a)}static get displayName(){return n}};return jie(s,n)},Uie=kU("calcite-icon"),zie=kU("calcite-shell"),Gie="data:image/svg+xml,%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:a='http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/'%20x='0px'%20y='0px'%20width='138'%20height='60'%20viewBox='0%200%20138%2060'%20enable-background='new%200%200%20138%2060'%20xml:space='preserve'%3e%3cdefs%3e%3c/defs%3e%3crect%20fill='%23CA1517'%20width='138'%20height='60'/%3e%3cpath%20fill='%23FFFFFF'%20d='M110.604,33.848h1.432V36.1h-1.468c-0.466,0-0.575-0.25-0.575-0.752v-0.787%20C109.992,34.096,110.102,33.848,110.604,33.848%20M117.871,28.226c0-2.974-1.252-5.048-4.906-5.048h-7.948v5.44%20c0.429-0.323,1.217-0.43,1.899-0.43h4.582c0.465,0,0.537,0.146,0.537,0.646v0.825h-3.008c-3.615,0-4.869,2.073-4.869,5.009v1.29%20c0,3.041,1.287,5.12,4.869,5.12h8.844V28.226z%20M98.383,41.078l4.621-17.9H96.67l-1.576,11.526l-1.649-11.526h-6.62l4.581,17.9%20H98.383z%20M77.75,33.848h1.432V36.1h-1.467c-0.467,0-0.572-0.25-0.572-0.752v-0.787C77.143,34.096,77.248,33.848,77.75,33.848%20M85.017,28.226c0-2.974-1.253-5.048-4.901-5.048h-7.949v5.44c0.426-0.323,1.217-0.43,1.895-0.43h4.585%20c0.464,0,0.536,0.146,0.536,0.646v0.825h-3.008c-3.615,0-4.867,2.073-4.867,5.009v1.29c0,3.041,1.285,5.12,4.867,5.12h8.843V28.226z%20M62.01,41.078h5.836V16.018H62.01V41.078z%20M50.095,23.178v-7.16H44.26v25.061h5.835V28.295h1.54c0.429,0,0.498,0.182,0.498,0.682%20v12.102h5.839V28.295c0-3.005-1.183-5.117-4.906-5.117H50.095z%20M33.879,21.89h5.834v-5.872h-5.834V21.89z%20M33.879,41.078h5.834%20V23.179h-5.834V41.078z%20M23.07,35.457h-2.257c-0.321,0-0.678-0.036-1.037-0.18v5.801h5.12c3.616,0,4.833-2.079,4.833-5.085V16.018%20h-6.122v18.76C23.607,35.277,23.461,35.457,23.07,35.457'/%3e%3cscript%20xmlns=''%20id='bw-fido2-page-script'/%3e%3c/svg%3e",PU="data:image/svg+xml,%3csvg%20width='30'%20height='30'%20viewBox='0%200%2030%2030'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M23.0912%2024.9866C23.4954%2024.9864%2023.883%2024.8202%2024.1687%2024.5245L29.5544%2018.9479C29.84%2018.652%2030.0003%2018.251%2030%2017.833L29.9961%2011.1451C29.9959%2010.727%2029.8352%2010.3262%2029.5493%2010.0307L24.1571%204.4608C23.8702%204.16448%2023.4832%203.99864%2023.079%204.00001L1.52309%204.0134C1.3228%204.01293%201.12439%204.05342%200.939276%204.13253C0.754162%204.21164%200.585998%204.32782%200.444452%204.47438C0.302906%204.62094%200.190773%204.795%200.114499%204.98654C0.0382246%205.17807%20-0.000684416%205.38332%209.11036e-06%205.59046L0.0103705%2023.4248C0.0106744%2023.8428%200.171492%2024.2436%200.457456%2024.539C0.74342%2024.8344%201.13112%2025.0002%201.53529%2025L23.0912%2024.9866ZM3.04893%207.16468L22.4492%207.15263L26.9485%2011.8001L26.9516%2017.1817L22.4578%2021.8348L3.05746%2021.8468L3.04893%207.16468Z'%20fill='%236C9B2E'/%3e%3cpath%20d='M18.3924%2012.6604C17.4126%2013.6749%2017.4136%2015.3188%2018.3945%2016.332C19.3755%2017.3453%2020.965%2017.3443%2021.9448%2016.3298C22.9246%2015.3153%2022.9236%2013.6715%2021.9426%2012.6582C20.9617%2011.6449%2019.3722%2011.6459%2018.3924%2012.6604Z'%20fill='%236C9B2E'/%3e%3c/svg%3e";function Bie(e){var t;return ze.jsxs("div",{className:"app-header",children:[ze.jsx("div",{className:"logo",children:ze.jsx("a",{href:e.appLogoLink,target:"_blank",children:ze.jsx("img",{className:"logo-image",src:Gie,alt:"logo"})})}),ze.jsxs("div",{className:"title",children:[ze.jsx("div",{className:"main-title title-item",children:e.appTitle}),ze.jsxs("div",{className:"sub-title title-item",children:[ze.jsx("img",{src:PU,alt:"tma"}),(t=e.actualThemeInfo)==null?void 0:t.label]})]})]})}function l(e,t,r,i){var n,s=arguments.length,o=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function aOe(e,t){return function(r,i){t(r,i,e)}}function lOe(e,t,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(h){try{d(i.next(h))}catch(f){o(f)}}function u(h){try{d(i.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):n(h.value).then(a,u)}d((i=i.apply(e,[])).next())})}let Mu;function L(e){return typeof Mu[e]=="function"?Mu[e]=Mu[e](globalThis):Mu[e]}var A8,R8,O8,k8;Mu=(A8=globalThis.dojoConfig)!=null&&A8.has||(R8=globalThis.esriConfig)!=null&&R8.has?{...(O8=globalThis.dojoConfig)==null?void 0:O8.has,...(k8=globalThis.esriConfig)==null?void 0:k8.has}:{},L.add=(e,t,r,i)=>{(i||Mu[e]===void 0)&&(Mu[e]=t),r&&L(e)},L.cache=Mu,L.add("big-integer-warning-enabled",!0),L.add("esri-deprecation-warnings",!0),L.add("esri-tests-disable-screenshots",!1),L.add("esri-tests-use-full-window",!1),L.add("esri-tests-post-to-influx",!0),L.add("esri-cim-animations-enable-status","enabled"),L.add("esri-cim-animations-spotlight",!1),L.add("esri-cim-animations-freeze-time",!1),L.add("enable-feature:multiple-highlights",!1),(()=>{var t;L.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(L.add("host-browser",e),L.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),L.add("dom",e),L("host-browser")){const r=navigator,i=r.userAgent,n=r.appVersion,s=parseFloat(n);if(L.add("wp",parseFloat(i.split("Windows Phone")[1])||void 0),L.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),L.add("khtml",n.includes("Konqueror")?s:void 0),L.add("edge",parseFloat(i.split("Edge/")[1])||void 0),L.add("opr",parseFloat(i.split("OPR/")[1])||void 0),L.add("webkit",!L("wp")&&!L("edge")&&parseFloat(i.split("WebKit/")[1])||void 0),L.add("chrome",!L("edge")&&!L("opr")&&parseFloat(i.split("Chrome/")[1])||void 0),L.add("android",!L("wp")&&parseFloat(i.split("Android ")[1])||void 0),L.add("safari",!n.includes("Safari")||L("wp")||L("chrome")||L("android")||L("edge")||L("opr")?void 0:parseFloat(n.split("Version/")[1])),L.add("mac",n.includes("Macintosh")),!L("wp")&&/(iPhone|iPod|iPad)/.test(i)){const o=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(i)?RegExp.$1:"1",u=parseFloat(a.replace(/_/,".").replaceAll("_",""));L.add(o,u),L.add("ios",u)}L("webkit")||(!i.includes("Gecko")||L("wp")||L("khtml")||L("edge")||L.add("mozilla",s),L("mozilla")&&L.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&L.add("esri-mobile",t),r&&L.add("esri-iPhone",r),L.add("esri-geolocation",!!navigator.geolocation)}L.add("esri-wasm","WebAssembly"in globalThis),L.add("esri-performance-mode-frames-between-render",20),L.add("esri-force-performance-mode",!1),L.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),L.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),L.add("esri-atomics","Atomics"in globalThis),L.add("esri-workers","Worker"in globalThis),L.add("web-feat:cache","caches"in globalThis),L.add("esri-workers-arraybuffer-transfer",!L("safari")||Number(L("safari"))>=12),L.add("workers-pool-size",8),L.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),L.add("featurelayer-simplify-payload-size-factors",[1,1,4]),L.add("featurelayer-fast-triangulation-enabled",!0),L.add("featurelayer-animation-enabled",!0),L.add("featurelayer-snapshot-enabled",!0),L.add("featurelayer-snapshot-point-min-threshold",8e4),L.add("featurelayer-snapshot-point-max-threshold",4e5),L.add("featurelayer-snapshot-point-coverage",.1),L.add("featurelayer-query-max-depth",4),L.add("featurelayer-query-pausing-enabled",!1),L.add("featurelayer-advanced-symbols",!1),L.add("featurelayer-pbf",!0),L.add("featurelayer-pbf-statistics",!1),L.add("feature-layers-workers",!0),L.add("feature-polyline-generalization-factor",1),L.add("mapview-transitions-duration",200),L.add("mapview-essential-goto-duration",200),L.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),L.add("mapserver-pbf-version-support",10.81),L.add("mapservice-popup-identify-max-tolerance",20),L("host-webworker")||L("host-browser")&&(L.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),L.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{L.add("esri-image-decode",!0,!0,!0)}).catch(()=>{L.add("esri-image-decode",!1,!0,!0)})}return!1}),L.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();let Fw=class kc{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*kc._m}getInt(){return this._seed=(kc._a*this._seed+kc._c)%kc._m,this._seed}getFloat(){return this.getInt()/(kc._m-1)}getIntRange(t,r){return Math.round(this.getFloatRange(t,r))}getFloatRange(t,r){const i=r-t;return t+this.getInt()/kc._m*i}};Fw._m=2147483647,Fw._a=48271,Fw._c=0;const qie=1.5,uOe=1/qie,cOe=.5;function dOe(e,t){return t?e.filter((r,i,n)=>n.findIndex(t.bind(null,r))===i):Array.from(new Set(e))}function b2(e,t,r){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;if(r){for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function uL(e,t,r){let i,n;return r?(i=t.filter(s=>!e.some(o=>r(o,s))),n=e.filter(s=>!t.some(o=>r(o,s)))):(i=t.filter(s=>!e.includes(s)),n=e.filter(s=>!t.includes(s))),{added:i,removed:n}}function pOe(e){return e&&typeof e.length=="number"}let NU=class{constructor(){this.last=0}};const LU=new NU;function QE(e,t,r,i){i=i||LU;const n=Math.max(0,i.last-10);for(let o=n;o<r;++o)if(e[o]===t)return i.last=o,o;const s=Math.min(n,r);for(let o=0;o<s;++o)if(e[o]===t)return i.last=o,o;return-1}function Hie(e,t,r,i){const n=e.length,s=QE(e,t,n,i);if(s!==-1)return e[s]=e[n-1],e.pop(),t}const fs=new Set;function Wie(e,t,r=e.length,i=t.length,n,s){if(i===0||r===0)return r;fs.clear();for(let a=0;a<i;++a)fs.add(t[a]);n=n||LU;const o=Math.max(0,n.last-10);for(let a=o;a<r;++a)if(fs.has(e[a])&&(s==null||s.push(e[a]),fs.delete(e[a]),e[a]=e[r-1],--r,--a,fs.size===0||r===0))return fs.clear(),r;for(let a=0;a<o;++a)if(fs.has(e[a])&&(s==null||s.push(e[a]),fs.delete(e[a]),e[a]=e[r-1],--r,--a,fs.size===0||r===0))return fs.clear(),r;return fs.clear(),r}function fOe(e,t){let r=0;for(let i=0;i<e.length;++i){const n=e[i];t(n,i)&&(e[r]=n,r++)}e.length=r}function FU(e){return e?(cL.seed=e,()=>cL.getFloat()):Math.random}function DU(e,t){const r=FU(t);for(let i=e.length-1;i>0;i--){const n=Math.floor(r()*(i+1)),s=e[i];e[i]=e[n],e[n]=s}return e}const cL=new Fw;function jU(e,t){const r=e.indexOf(t);return r!==-1?(e.splice(r,1),t):null}function Js(e,t){return e!=null}function VU(e){return 32+e.length}function ZR(){return 16}function mOe(e){if(!e)return 0;let t=zU;for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];switch(typeof i){case"string":t+=VU(i);break;case"number":t+=ZR();break;case"boolean":t+=4}}return t}function Zie(e){if(!e)return 0;if(Array.isArray(e))return Jie(e);let t=zU;for(const r in e)e.hasOwnProperty(r)&&(t+=UU(e[r]));return t}function Jie(e){const t=e.length;if(t===0||typeof e[0]=="number")return 32+8*t;let r=GU;for(let i=0;i<t;i++)r+=UU(e[i]);return r}function UU(e){switch(typeof e){case"object":return Zie(e);case"string":return VU(e);case"number":return ZR();case"boolean":return 4;default:return 8}}function Kie(e,t){return GU+e.length*t}const zU=32,GU=16;function yOe(e){return e instanceof ArrayBuffer}function JR(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int8Array"}function BU(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8Array"}function qU(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8ClampedArray"}function KR(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int16Array"}function HU(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint16Array"}function YR(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int32Array"}function WU(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint32Array"}function S2(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float32Array"}function $2(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float64Array"}function ZU(e){return!("buffer"in e)}function gOe(...e){return e.reduce((t,r)=>t+(r?ZU(r)?Kie(r,ZR()):r.byteLength+Yie:0),0)}const Yie=145,JU=1024;function vOe(e){return $2(e)||S2(e)||YR(e)||KR(e)||JR(e)}function wOe(e){return $2(e)||S2(e)}function _Oe(e){return $2(e)?179769e303:S2(e)?3402823e32:WU(e)?4294967295:HU(e)?65535:BU(e)||qU(e)?255:YR(e)?2147483647:KR(e)?32767:JR(e)?127:256}function Qie(e,t){let r;for(r in e)e.hasOwnProperty(r)&&e[r]===void 0&&delete e[r];return e}function C(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=QU(e);if(t!=null)return t;if(Hb(e))return e.clone();if(KU(e))return e.map(C);if(YU(e))return e.clone();const r={};for(const i of Object.getOwnPropertyNames(e))r[i]=C(e[i]);return r}function XE(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=QU(e);if(t!=null)return t;if(KU(e)){let r=!0;const i=e.map(n=>{const s=XE(n);return n!=null&&s==null&&(r=!1),s});return r?i:null}if(Hb(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(!YU(e)){const r=new(Object.getPrototypeOf(e)).constructor;for(const i of Object.getOwnPropertyNames(e)){const n=e[i],s=XE(n);if(n!=null&&s==null)return null;r[i]=s}return r}return null}function Hb(e){return typeof e.clone=="function"}function KU(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function YU(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function dL(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function QU(e){if(JR(e)||BU(e)||qU(e)||KR(e)||HU(e)||YR(e)||WU(e)||S2(e)||$2(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[r,i]of e)t.set(r,C(i));return t}if(e instanceof Set){const t=new Set;for(const r of e)t.add(C(r));return t}return null}function QR(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e==null?void 0:e.getTime)=="function"&&typeof(t==null?void 0:t.getTime)=="function"&&e.getTime()===t.getTime()||!1}function XU(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&b2(e,t):e instanceof Set?t instanceof Set&&ene(e,t):e instanceof Map?t instanceof Map&&tne(e,t):!!dL(e)&&dL(t)&&Xie(e,t))}function Xie(e,t){if(e===null||t===null)return!1;const r=Object.keys(e);if(t===null||Object.keys(t).length!==r.length)return!1;for(const i of r)if(e[i]!==t[i]||!Object.prototype.hasOwnProperty.call(t,i))return!1;return!0}function ene(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function tne(e,t){if(e.size!==t.size)return!1;for(const[r,i]of e){const n=t.get(r);if(n!==i||n===void 0&&!t.has(r))return!1}return!0}function XR(e,t,r=!1){return tz(e,t,r)}function _v(e,t){if(t!=null)return t[e]||ez(e.split("."),!1,t)}function cr(e,t,r){const i=e.split("."),n=i.pop(),s=ez(i,!0,r);s&&n&&(s[n]=t)}function pL(e,t){if(e==null&&t==null)return!1;if(e==null||t==null)return!0;if(typeof e=="object"){if(Array.isArray(e)){const r=t;if(e.length!==r.length)return!0;for(let i=0;i<e.length;i++)if(pL(e[i],r[i]))return!0;return!1}if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const r in e)if(pL(e[r],t[r]))return!0;return!1}return e!==t}function ez(e,t,r){let i=r;for(const n of e){if(i==null)return;if(!(n in i)){if(!t)return;i[n]={}}i=i[n]}return i}function tz(e,t,r){return t?Object.keys(t).reduce((i,n)=>{let s=i[n],o=t[n];return s===o?i:s===void 0?(i[n]=C(o),i):(Array.isArray(o)||Array.isArray(i)?(s=s?Array.isArray(s)?i[n]=s.slice():i[n]=[s]:i[n]=[],o&&(Array.isArray(o)||(o=[o]),r?o.forEach(a=>{s.includes(a)||s.push(a)}):i[n]=o.slice())):o&&typeof o=="object"?i[n]=tz(s,o,r):i.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(i[n]=o),i)},e||{}):e}var P8;const je={apiKey:void 0,applicationName:"",applicationUrl:(P8=globalThis.location)==null?void 0:P8.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(XR(je,globalThis.esriConfig,!0),delete je.has),!je.assetsPath){{const e="4.31";je.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}je.defaultAssetsPath=je.assetsPath}const rne=/\{([^}]+)\}/g;function hL(e){return e??""}function T2(e,t){return t?e.replaceAll(rne,typeof t=="object"?(r,i)=>hL(_v(i,t)):(r,i)=>hL(t(i))):e}function ine(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,r=>t!=null&&t.includes(r)?r:`\\${r}`)}function rz(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}let fL;function bOe(e){return fL??(fL=new DOMParser),fL.parseFromString(e||"","text/html").body.innerText||""}function SOe(e,t){return new RegExp(`{${t}}`,"ig").test(e)}const mL={info:0,warn:1,error:2,none:3};let j=class Xi{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,Xi._loggers.set(this.module,this);const r=this.module.lastIndexOf(".");r!==-1&&(this._parent=Xi.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){}static get test(){}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,Xi._loggers.get(t)||new Xi({module:t})}_log(t,r,...i){if(this._matchLevel(t)){if(r!=="always"&&!Xi._throttlingDisabled){const n=sne(i),s=this._loggedMessages[t].get(n);if(r==="once"&&s!=null||r==="oncePerTick"&&s&&s>=Xi._tickCounter)return;this._loggedMessages[t].set(n,Xi._tickCounter),Xi._scheduleTickCounterIncrement()}for(const n of je.log.interceptors)if(n(t,this.module,...i))return;this._inheritedWriter()(t,this.module,...i)}}_parentWithMember(t,r){let i=this;for(;i!=null;){const n=i[t];if(n!=null)return n;i=i.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",nne)}_matchLevel(t){const r=je.log.level||"warn";return mL[this._parentWithMember("level",r)]<=mL[t]}static _scheduleTickCounterIncrement(){Xi._tickCounterScheduled||(Xi._tickCounterScheduled=!0,Promise.resolve().then(()=>{Xi._tickCounter++,Xi._tickCounterScheduled=!1}))}};function nne(e,t,...r){console[e](`[${t}]`,...r)}function sne(...e){return rz(JSON.stringify(e,(r,i)=>typeof i!="object"||Array.isArray(i)?i:"[Object]"))}j._loggers=new Map,j._tickCounter=0,j._tickCounterScheduled=!1,j._throttlingDisabled=!1;function one(e,t){for(const r of e.values())if(t(r))return!0;return!1}function x2(e,t,r){const i=e.get(t);if(i!==void 0)return i;const n=r();return e.set(t,n),n}function $Oe(e){const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))}const xf=()=>j.getLogger("esri.core.accessorSupport.ensureTypes");function ane(e){return e==null?e:new Date(e)}function lne(e){return e==null?e:!!e}function bv(e){return e==null?e:e.toString()}function vi(e,t=0){return e==null?e:(e=parseFloat(e),isNaN(e)?t:e)}function eO(e){return e==null?e:Math.round(parseFloat(e))}function une(e){return null}function cne(e,t){return r=>{let i=e(r);return t.step!=null&&(i=Math.round(i/t.step)*t.step),t.min!=null&&(i=Math.max(t.min,i)),t.max!=null&&(i=Math.min(t.max,i)),i}}function iz(e){return(e==null?void 0:e.constructor)&&e.constructor.__accessorMetadata__!==void 0}function Wb(e,t){return t!=null&&e&&!(t instanceof e)}function nz(e){return e&&"isCollection"in e}function yL(e){return e!=null&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function dne(e,t){if(!(t!=null&&t.constructor)||!nz(t.constructor))return eM(e,t)?t:new e(t);const r=yL(e.prototype.itemType),i=yL(t.constructor.prototype.itemType);return r?i?r===i?t:r.prototype.isPrototypeOf(i.prototype)?new e(t):(eM(e,t),t):new e(t):t}function eM(e,t){return!!iz(t)&&(xf().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+M2(e)+"'"),!0)}function E2(e,t){return t==null?t:nz(e)?dne(e,t):Wb(e,t)?eM(e,t)?t:new e(t):t}function M2(e){var t;return((t=e==null?void 0:e.prototype)==null?void 0:t.declaredClass)||"unknown"}const pne=new WeakMap;function hne(e){switch(e){case Number:return t=>vi(t);case ke:return eO;case Boolean:return lne;case String:return bv;case Date:return ane;case vm:return une;default:return x2(pne,e,()=>E2.bind(null,e))}}function bt(e,t){const r=hne(e);return arguments.length===1?r:r(t)}function L0(e,t,r){return arguments.length===1?L0.bind(null,e):t&&(Array.isArray(t)?t.map(i=>e(i,r)):[e(t,r)])}function fne(e,t){return arguments.length===1?L0(r=>bt(e,r)):L0(r=>bt(e,r),t)}function sz(e,t,r){return t!==0&&Array.isArray(r)?r.map(i=>sz(e,t-1,i)):e(r)}function Zb(e,t,r){if(arguments.length===2)return s=>Zb(e,t,s);if(!r)return r;r=sz(e,t,r);let i=t,n=r;for(;i>0&&Array.isArray(n);)i--,n=n[0];if(n!==void 0)for(let s=0;s<i;s++)r=[r];return r}function mne(e,t,r){return arguments.length===2?Zb(i=>bt(e,i),t):Zb(i=>bt(e,i),t,r)}function oz(e){return!!Array.isArray(e)&&!e.some(t=>{const r=typeof t;return!(r==="string"||r==="number"||r==="function"&&e.length>1)})}function tM(e,t){if(arguments.length===2)return tM(e).call(null,t);const r=new Set,i=e.filter(a=>typeof a!="function"),n=e.filter(a=>typeof a=="function");for(const a of e)typeof a!="string"&&typeof a!="number"||r.add(a);let s=null,o=null;return(a,u)=>{if(a==null)return a;const d=typeof a,h=d==="string"||d==="number";return h&&(r.has(a)||n.some(f=>d==="string"&&f===String||d==="number"&&f===Number))||d==="object"&&n.some(f=>!Wb(a,f))?a:(h&&i.length?(s||(s=i.map(f=>typeof f=="string"?`'${f}'`:`${f}`).join(", ")),xf().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&n.length?(o||(o=n.map(f=>M2(f)).join(", ")),xf().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):xf().error("Accessor#set",`'${a}' is not a valid value for this property`),u&&(u.valid=!1),null)}}function ss(e,t){if(arguments.length===2)return ss(e).call(null,t);const r={},i=[],n=[];for(const u in e.typeMap){const d=e.typeMap[u];r[u]=bt(d),i.push(M2(d)),n.push(u)}const s=()=>`'${i.join("', '")}'`,o=()=>`'${n.join("', '")}'`,a=typeof e.key=="string"?u=>u[e.key]:e.key;return u=>{if(e.base&&!Wb(e.base,u)||u==null)return u;const d=a(u)||e.defaultKeyValue,h=r[d];if(!h)return xf().error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!Wb(e.typeMap[d],u))return u;if(typeof e.key=="string"&&!iz(u)){const f={};for(const m in u)m!==e.key&&(f[m]=u[m]);return h(f)}return h(u)}}let ke=class{},vm=class{};const EOe={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function yne(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function az(e){switch(e.type){case"native":return bt(e.value);case"array":return L0(az(e.value));case"one-of":return gne(e);default:return null}}function gne(e){let t=null;return(r,i)=>iM(r,e)?r:(t==null&&(t=rM(e)),xf().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),i&&(i.valid=!1),null)}function rM(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case ke:return"integer";case Date:return"date";case vm:return"null";default:return M2(e.value)}case"array":return`array of ${rM(e.value)}`;case"one-of":{const t=e.values.map(r=>rM(r));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function iM(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case ke:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case vm:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(r=>!iM(r,t.value));case"one-of":return t.values.some(r=>iM(e,r))}}const vne={remove:()=>{}};function Be(e){return e?{remove(){e&&(e(),e=void 0)}}:vne}function wne(e){e.forEach(t=>t==null?void 0:t.remove())}function Sv(e){return Be(()=>wne(e))}function MOe(e){return Be(()=>e==null?void 0:e.abort())}function IOe(e){return Be(e!=null?()=>e.destroy():void 0)}function Wi(e){return e.__accessor__??null}function _ne(e,t){var r;return((r=e==null?void 0:e.metadata)==null?void 0:r[t])!=null}function Dw(e,t,r){return r?Jb(e,t,{policy:r,path:""}):Jb(e,t,null)}function Jb(e,t,r){return t?Object.keys(t).reduce((i,n)=>{const s=n;let o=null,a="merge";if(r&&(o=r.path?`${r.path}.${n}`:n,a=r.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(i[s]))return i[s]=t[s],i;if(i[s]===void 0)return i[s]=C(t[s]),i;let u=i[s],d=t[s];if(u===d)return i;if(Array.isArray(d)||Array.isArray(i))u=u?Array.isArray(u)?i[s]=u.slice():i[s]=[u]:i[s]=[],d&&(Array.isArray(d)||(d=[d]),d.forEach(h=>{u.includes(h)||u.push(h)}));else if(d&&typeof d=="object")if(r){const h=r.path;r.path=o,i[s]=Jb(u,d,r),r.path=h}else i[s]=Jb(u,d,null);else i.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(i[s]=d);return i},e||{}):e}function lz(e){return Array.isArray(e)?e:e.split(".")}function gL(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function bne(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...gL(r));return t}return gL(e)}function uz(e,t,r,i){const n=bne(t);if(n.length!==1){const s=n.map(o=>i(e,o,r));return Sv(s)}return i(e,n[0],r)}function cz(e,t){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const n=parseInt(r,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.at(n)}const i=Wi(t);return _ne(i,r)?i.get(r):t[r]}function dz(e,t,r){if(e==null)return e;const i=cz(t[r],e);return!i&&r<t.length-1?void 0:r===t.length-1?i:dz(i,t,r+1)}function $v(e,t,r=0){return typeof t!="string"||t.includes(".")?dz(e,lz(t),r):cz(t,e)}function Ks(e,t){return $v(e,t)}function vL(e,t){return $v(t,e)!==void 0}function Tv(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){t=Object.create(t);for(const i in t)t[i]=C(t[i]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function I2(e,t){const r=Tv(e);let i=r[t];return i||(i=r[t]={}),i}function Sne(e,t){return Dw(e,t,Tne)}const $ne=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function Tne(e){return $ne.test(e)?"replace":"merge"}function xne(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(r,i)=>i===""?"$":(_v(i,t)??"").toString())}let pz=class{constructor(t,r,i=void 0){this.name=t,this.details=i,this.message=(r&&xne(r,i))??""}toString(){return"["+this.name+"]: "+this.message}},R=class hz extends pz{constructor(t,r,i){super(t,r,i)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,r)=>{if(r&&typeof r=="object"&&typeof r.toJSON=="function")return r;try{return C(r)}catch{return"[object]"}}))}}catch(t){throw j.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new hz(t.name,t.message,t.details)}};R.prototype.type="error";function Kb(e,t,r){if(e&&t)if(typeof t=="object")for(const i of Object.getOwnPropertyNames(t))Kb(e,i,t[i]);else{if(t.includes(".")){const n=t.split("."),s=n.splice(-1,1)[0];return void Kb(Ks(e,n),s,r)}const i=e.__accessor__;i!=null&&Ene(t,i),e[t]=r}}function Ene(e,t){if(L("esri-unknown-property-errors")&&!Mne(e,t))throw new R("set:unknown-property",Ine(e,t))}function Mne(e,t){return t.metadata[e]!=null}function Ine(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}function c(e={}){return(t,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const i=Object.getOwnPropertyDescriptor(t,r),n=I2(t,r);i&&(i.get||i.set?(n.get=i.get||n.get,n.set=i.set||n.set):"value"in i&&("value"in e&&j.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),n.value=e.value=i.value)),e.readOnly!=null&&(n.readOnly=e.readOnly);const s=e.aliasOf;if(s){const u=typeof s=="string"?s:s.source,d=typeof s=="string"?null:s.overridable===!0;let h;n.dependsOn=[u],n.get=function(){let f=Ks(this,u);if(typeof f=="function"){h||(h=u.split(".").slice(0,-1).join("."));const m=Ks(this,h);m&&(f=f.bind(m))}return f},n.readOnly||(n.set=d?function(f){this._override(r,f)}:function(f){Kb(this,u,f)})}const o=e.type,a=e.types;if(!n.cast){let u;o?u=Cne(o):a&&(u=Array.isArray(a)?L0(ss(a[0])):ss(a)),e.cast=Ane(e.cast,u)}Sne(n,e),e.range&&(n.cast=cne(n.cast,e.range))}}function fz(e,t,r){const i=I2(e,r);i.json||(i.json={});let n=i.json;return t!==void 0&&(n.origins||(n.origins={}),n.origins[t]||(n.origins[t]={}),n=n.origins[t]),n}function Cne(e){let t=0,r=e;if(yne(e))return az(e);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],t++;const i=r;if(oz(i))return t===0?tM(i):Zb(tM(i),t);if(t===1)return fne(i);if(t>1)return mne(i,t);const n=e;return n.from?n.from:bt(n)}function Ane(e,t){if(e||t)return e?t?(r,i)=>t(e(r,i),i):e:t}const mz=Symbol("Accessor-beforeDestroy");var Di;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED",e[e.DESTROYED=3]="DESTROYED"})(Di||(Di={}));var Ke;(function(e){e[e.Dirty=1]="Dirty",e[e.Overridden=2]="Overridden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(Ke||(Ke={}));let C2=class{constructor(t){this.accessed=void 0,this._handles=void 0,this._observer=t}destroy(){var t;(t=this.accessed)==null||t.clear(),this.clear()}onAccessed(t){this._observer!=null&&t!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(t))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(t=>{this._handles.push(t.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let t=0;t<this._handles.length;++t)this._handles[t].remove();this._handles.length=0}}};const Yb=new C2,Iy=[];let Hg=Yb;function he(e){Hg.onAccessed(e)}let jw=!1,Vw=!1;function cl(e,t,r){if(jw)return tO(e,t,r);let i=null;return yz(e),i=t.call(r),gz(),i}function Rne(e,t){return cl(Yb,e,t)}function tO(e,t,r){const i=jw;jw=!0,yz(e);let n=null;try{n=t.call(r)}catch(s){Vw&&j.getLogger("esri.core.accessorSupport.tracking").error(s)}return gz(),jw=i,n}function yz(e){Hg=e,Iy.push(e)}function gz(){const e=Iy.length;if(e>1){const t=Iy.pop();Hg=Iy[e-2],t.onTrackingEnd()}else if(e===1){const t=Iy.pop();Hg=Yb,t.onTrackingEnd()}else Hg=Yb}function vz(e,t){if(t.flags&Ke.DepTrackingInitialized)return;t.flags|=Ke.DepTrackingInitialized;const r=Vw;Vw=!1,t.flags&Ke.AutoTracked?tO(t.trackingTarget,t.metadata.get,e):wz(e,t),Vw=r}const One=[];function wz(e,t){t.flags&Ke.ExplicitlyTracking||(t.flags|=Ke.ExplicitlyTracking,tO(t.trackingTarget,()=>{const r=t.metadata.dependsOn||One;for(const i of r)if(typeof i!="string"||i.includes(".")){const n=lz(i);for(let s=0,o=e;s<n.length&&o!=null&&typeof o=="object";++s)o=wL(o,n[s],s!==n.length-1)}else wL(e,i,!1)}),t.flags&=~Ke.ExplicitlyTracking)}function wL(e,t,r){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.at(s)}const n=Wi(e);if(n){const s=n.propertiesByName.get(i);s&&(he(s),vz(e,s))}return r?e[i]:void 0}function kne(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const i in r)if(t[i]){const n=t[i];r[i].forEach(s=>{t[s]=n}),delete t[i]}}}let wn=class extends pz{constructor(t,r,i){super(t,r,i)}};wn.prototype.type="warning";function _z(e){var t;return!!e&&((t=e.prototype)==null?void 0:t.declaredClass)&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const nM=()=>j.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function _L(e,t,r){var i,n;e&&(!r&&!t.read||(i=t.read)!=null&&i.reader||((n=t.read)==null?void 0:n.enabled)===!1||Lne(e)&&cr("read.reader",wm(e),t))}function wm(e){var r,i;const t=e.ndimArray??0;if(t>1)return Nne(e);if(t===1)return bL(e);if("type"in e&&Sz(e.type)){const n=(i=(r=e.type.prototype)==null?void 0:r.itemType)==null?void 0:i.Type,s=bL(typeof n=="function"?{type:n}:{types:n});return(o,a,u)=>{const d=s(o,a,u);return d&&new e.type(d)}}return rO(e)}function rO(e){return"type"in e?Pne(e.type):Fne(e.types)}function Pne(e){return e.prototype.read?(t,r,i)=>{if(t==null)return t;const n=typeof t;if(n!=="object")return void nM().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${n}'`);const s=new e;return s.read(t,i),s}:e.fromJSON}function bz(e,t,r,i){return i!==0&&Array.isArray(t)?t.map(n=>bz(e,n,r,i-1)):e(t,void 0,r)}function Nne(e){const t=rO(e),r=bz.bind(null,t),i=e.ndimArray??0;return(n,s,o)=>{if(n==null)return n;n=r(n,o,i);let a=i,u=n;for(;a>0&&Array.isArray(u);)a--,u=u[0];if(u!==void 0)for(let d=0;d<a;d++)n=[n];return n}}function bL(e){const t=rO(e);return(r,i,n)=>{if(r==null)return r;if(Array.isArray(r)){const o=[];for(const a of r){const u=t(a,void 0,n);u!==void 0&&o.push(u)}return o}const s=t(r,void 0,n);return s!==void 0?[s]:void 0}}function Sz(e){if(!_z(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?iO(t.Type):$z(t.Type))}function Lne(e){return"types"in e?$z(e.types):iO(e.type)}function iO(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||Sz(e))}function $z(e){for(const t in e.typeMap)if(!iO(e.typeMap[t]))return!1;return!0}function Fne(e){let t=null;const r=e.errorContext??"type",i=e.validate;return(n,s,o)=>{if(n==null)return n;const a=typeof n;if(a!=="object")return void nM().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);t||(t=Dne(e));const u=e.key;if(typeof u!="string")return;const d=n[u],h=d?t[d]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!h){const m=`Type '${d||"unknown"}' is not supported`;return o!=null&&o.messages&&n&&o.messages.push(new wn(`${r}:unsupported`,m,{definition:n,context:o})),void nM().error(m)}const f=new h;return f.read(n,o),i?i(f):f}}function Dne(e){var r,i;const t={};for(const n in e.typeMap){const s=e.typeMap[n],o=Tv(s.prototype);if(typeof e.key=="function")continue;const a=o[e.key];if(!a)continue;if((r=a.json)!=null&&r.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"){t[a.json.type[0]]=s;continue}const u=(i=a.json)==null?void 0:i.write;if(!(u!=null&&u.writer)){t[n]=s;continue}const d=u.target,h=typeof d=="string"?d:e.key,f={};u.writer(n,f,h),f[h]&&(t[f[h]]=s)}return t}function jne(e){if(e.json||(e.json={}),$L(e.json),TL(e.json),SL(e.json),e.json.origins)for(const t in e.json.origins)$L(e.json.origins[t]),TL(e.json.origins[t]),SL(e.json.origins[t]);return!0}function SL(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function $L(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function TL(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function xL(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const r=(e==null?void 0:e.ndimArray)??0;e&&(r===1||"type"in e&&_z(e.type))?t.write.writer=zne:r>1?t.write.writer=Gne(r):t.types?Array.isArray(t.types)?t.write.writer=Une(t.types[0]):t.write.writer=Vne(t.types):t.write.writer=F0}function Vne(e){return(t,r,i,n)=>t?Tz(t,e,n)?F0(t,r,i,n):void 0:F0(t,r,i,n)}function Tz(e,t,r){for(const i in t.typeMap)if(e instanceof t.typeMap[i])return!0;if(r!=null&&r.messages){const i=t.errorContext??"type",n=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new R(`${i}:unsupported`,n,{definition:e,context:r})),j.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function Une(e){return(t,r,i,n)=>!t||!Array.isArray(t)?F0(t,r,i,n):F0(t.filter(s=>Tz(s,e,n)),r,i,n)}function F0(e,t,r,i){cr(r,Qb(e,i),t)}function Qb(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?Xb(e):e}function Xb(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function zne(e,t,r,i){let n;e===null?n=null:e&&typeof e.map=="function"?(n=e.map(s=>Qb(s,i)),typeof n.toArray=="function"&&(n=n.toArray())):n=[Qb(e,i)],cr(r,n,t)}function xz(e,t,r){return r!==0&&Array.isArray(e)?e.map(i=>xz(i,t,r-1)):Qb(e,t)}function Gne(e){return(t,r,i,n)=>{let s;if(t===null)s=null;else{s=xz(t,n,e);let o=e,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let u=0;u<o;u++)s=[s]}cr(i,s,r)}}function Bne(e,t){return nO(e,"any",t==null?void 0:t.origin)}function sM(e,t){return nO(e,"read",t==null?void 0:t.origin)}function Ez(e,t){return nO(e,"write",t==null?void 0:t.origin)}function nO(e,t,r){let i=e==null?void 0:e.json;if(i!=null&&i.origins&&r){let n;n=r==="link-chart"?i.origins[r]&&(t==="any"||t in i.origins[r])?i.origins[r]:i.origins["web-map"]:i.origins[r],n&&(t==="any"||t in n)&&(i=n)}return i}function qne(e){var r;const t=Hne(e);if(e.json.origins)for(const i in e.json.origins){const n=e.json.origins[i],s=n.types?Wne(n):t;_L(s,n,!1),n.types&&!n.write&&((r=e.json.write)!=null&&r.enabled)&&(n.write={...e.json.write}),xL(s,n)}_L(t,e.json,!0),xL(t,e.json)}function Hne(e){return e.json.types?oM(e.json):e.type?Mz(e):oM(e)}function Wne(e){return e.type?Mz(e):oM(e)}function Mz(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!oz(r);)r=r[0],t++;return{type:r,ndimArray:t}}function oM(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function Zne(e){jne(e)&&(kne(e),qne(e))}const gT=new Set,vT=new Set;function $(e){return t=>{e??(e="esri.core.Accessor"),t.prototype.declaredClass=e,Kne(t);const r=[],i=[];let n=t.prototype;for(;n;)n.hasOwnProperty("initialize")&&!gT.has(n.initialize)&&(gT.add(n.initialize),r.push(n.initialize)),n.hasOwnProperty("destroy")&&!vT.has(n.destroy)&&(vT.add(n.destroy),i.push(n.destroy)),n=Object.getPrototypeOf(n);gT.clear(),vT.clear();const s=class extends t{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let u=r.length-1;u>=0;u--)r[u].call(this)}}),i.length){let u=!1;const d=this[mz];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!u){u=!0,d.call(this);for(let h=0;h<i.length;h++)i[h].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};s.__accessorMetadata__=Tv(t.prototype),s.prototype.declaredClass=e;const o=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:o,configurable:!0}),s}}function Jne(e,t){return t.get==null?function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i===void 0)return;r.mutable&&he(i);const n=r.store;return n.has(e)?n.get(e):i.metadata.value}:function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i!==void 0)return i.getComputed(r)}}function Kne(e){const t=e.prototype,r=Tv(t),i={};for(const n of Object.getOwnPropertyNames(r)){const s=r[n];Zne(s),i[n]={enumerable:!0,configurable:!0,get:Jne(n,s),set(o){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&s.readOnly?EL("read-only",n):a.lifecycle===Di.CONSTRUCTED&&s.constructOnly?EL("construct-only",n):void a.set(n,o)}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,i)}const EL=(e,t)=>{j.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)},ML=new WeakMap;function Yne(e,t,r=!1){const i=` DEPRECATED - ${t}`;if(!r)return void e.warn(i);let n=ML.get(e);n||(n=new Set,ML.set(e,n)),n.has(t)||(n.add(t),e.warn(i))}function Iz(e,t,r={}){if(L("esri-deprecation-warnings")){const{moduleName:i}=r;D0(e,`Function: ${(i?i+"::":"")+t+"()"}`,r)}}function IL(e,t,r={}){if(L("esri-deprecation-warnings")){const{moduleName:i}=r;D0(e,`Property: ${(i?i+"::":"")+t}`,r)}}function Qne(e,t,r={}){L("esri-deprecation-warnings")&&D0(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...r})}function D0(e,t,r={}){if(L("esri-deprecation-warnings")){const{replacement:i,version:n,see:s,warnOnce:o}=r;let a=t;i&&(a+=`
	 Replacement: ${i}`),n&&(a+=`
	 Version: ${n}`),s&&(a+=`
	 See ${s} for more details.`),Yne(e,a,o)}}function OOe(e){const t=[];return function*(){yield*t;for(const r of e)t.push(r),yield r}}function Xne(e,t){for(const r of e)if(r!=null&&t(r))return r}function eS(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let _m=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(r=>{t+=r.length}),t}add(t,r){if(eS(t)){const i=this._getOrCreateGroup(r);for(const n of t)AL(n)&&i.push(n)}else AL(t)&&this._getOrCreateGroup(r).push(t);return this}forEach(t,r){if(typeof t=="function")this._groups.forEach(i=>i.forEach(t));else{const i=this._getGroup(t);i&&r&&i.forEach(r)}}has(t){return this._groups.has(v1(t))}remove(t){if(typeof t!="string"&&eS(t)){for(const r of t)this.remove(r);return this}return this.has(t)?(CL(this._getGroup(t)),this._groups.delete(v1(t)),this):this}removeAll(){return this._groups.forEach(CL),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const r=[];return this._groups.set(v1(t),r),r}_getGroup(t){return this._groups.get(v1(t))}};function v1(e){return e||"_default_"}function CL(e){for(const t of e)t instanceof _m?t.removeAll():t.remove()}function AL(e){return e!=null&&(!!e.remove||e instanceof _m)}function Cz(e,t){if(e==null)throw new Error(t??"value is None")}function st(e){return e==null||e.destroy(),null}function POe(e){return e==null||e.dispose(),null}function wt(e){return e==null||e.remove(),null}function ep(e){return e==null||e.abort(),null}function NOe(e){return e==null||e.release(),null}function ese(e,t,r){return e!=null&&t!=null?r!=null?r(e,t):e.equals(t):e===t}function j0(e,t){let r;return e.some((i,n)=>(r=t(i,n),r!=null)),r??void 0}function tse(e){return(e==null?void 0:e.release)&&typeof e.release=="function"}function rse(e){return(e==null?void 0:e.acquire)&&typeof e.acquire=="function"}let _p=class aM{constructor(t,r,i,n=1,s=0){this._ctor=t,this._acquireFunction=r,this._releaseFunction=i,this.allocationSize=n,this._pool=new Array(s),this._initialSize=s;for(let o=0;o<s;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...t){let r;if(aM.test.disabled)r=new this._ctor;else{if(this._pool.length===0){const i=this.allocationSize;for(let n=0;n<i;n++)this._pool[n]=new this._ctor}r=this._pool.pop()}return this._acquireFunction?this._acquireFunction(r,...t):rse(r)&&r.acquire(...t),r}release(t){t&&!aM.test.disabled&&(this._releaseFunction?this._releaseFunction(t):tse(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let r=t;r<this._pool.length;++r){const i=this._pool[r];this._dispose(i)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};_p.test={disabled:!1};let ise=class{constructor(t,r){this._observers=t,this._observer=r}remove(){jU(this._observers,this._observer)}},Az=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return nse;this._observers==null&&(this._observers=[]);const r=this._observers;let i=!1,n=!1;const s=r.length;for(let o=0;o<s;++o){const a=r[o];if(a.destroyed)n=!0;else if(a===t){i=!0;break}}return i||(r.push(t),n&&this._removeDestroyedObservers()),new ise(r,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const r=t.length;let i=0;for(let n=0;n<r;++n){for(;n+i<r&&t[n+i].destroyed;)++i;if(i>0){if(!(n+i<r))break;t[n]=t[n+i]}}t.length=r-i}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const r of t)r.onCommitted();this._observers=null}}};const nse=Be();var Oe;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(Oe||(Oe={}));const lM=Oe.USER+1;function Iu(e){switch(e){case"defaults":return Oe.DEFAULTS;case"service":return Oe.SERVICE;case"portal-item":return Oe.PORTAL_ITEM;case"web-scene":return Oe.WEB_SCENE;case"web-map":return Oe.WEB_MAP;case"link-chart":return Oe.LINK_CHART;case"user":return Oe.USER;default:return null}}function tS(e){switch(e){case Oe.DEFAULTS:return"defaults";case Oe.SERVICE:return"service";case Oe.PORTAL_ITEM:return"portal-item";case Oe.WEB_SCENE:return"web-scene";case Oe.WEB_MAP:return"web-map";case Oe.LINK_CHART:return"link-chart";case Oe.USER:return"user"}}function sse(e){return tS(e)}let RL=class extends Az{constructor(t,r){super(),this.propertyName=t,this.metadata=r,this.trackingTarget=new C2(this),this.flags=0,this.flags=Ke.Dirty|(r.nonNullable?Ke.NonNullable:0)|(r.hasOwnProperty("value")?Ke.HasDefaultValue:0)|(r.get===void 0?Ke.DepTrackingInitialized:0)|(r.dependsOn===void 0?Ke.AutoTracked:0)}destroy(){this.flags&Ke.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(t){t.mutable&&he(this);const r=t.store,i=this.propertyName,n=this.flags,s=r.get(i);if(n&Ke.Computing||~n&Ke.Dirty&&r.has(i))return s;this.flags|=Ke.Computing;const o=t.host;let a;n&Ke.AutoTracked?a=cl(this.trackingTarget,this.metadata.get,o):(wz(o,this),a=this.metadata.get.call(o)),this.flags|=Ke.DepTrackingInitialized,r.set(i,a,Oe.COMPUTED);const u=r.get(i);return u===s?this.flags&=~Ke.Dirty:Rne(this.commit,this),this.flags&=~Ke.Computing,u}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~Ke.Dirty,this.onCommitted()}onInvalidated(){~this.flags&Ke.Overridden&&(this.flags|=Ke.Dirty);const t=this._observers;if(t&&t.length>0)for(const r of t)r.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onCommitted()}}},ose=class Rz{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new Rz;return this._values.forEach((i,n)=>{t&&t.has(n)||r.set(n,C(i))}),r}get(t){return this._values.get(t)}originOf(){return Oe.USER}keys(){return[...this._values.keys()]}set(t,r){this._values.set(t,r)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function w1(e,t,r){return e!==void 0}function OL(e,t,r,i){return e!==void 0&&(!(r==null&&e.flags&Ke.NonNullable)||(i.lifecycle,Di.INITIALIZING,!1))}let ase=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=Di.INITIALIZING,this.store=new ose,this.mutable=!0,this._origin=Oe.USER;const r=this.host.constructor.__accessorMetadata__;for(const i in r){const n=new RL(i,r[i]);this.propertiesByName.set(i,n)}this.metadata=r}initialize(){this.lifecycle=Di.CONSTRUCTING}constructed(){this.lifecycle=Di.CONSTRUCTED}destroy(){this.lifecycle=Di.DESTROYED,this.propertiesByName.forEach(t=>t.destroy())}get initialized(){return this.lifecycle!==Di.INITIALIZING}get(t){const r=this.propertiesByName.get(t);if(r.metadata.get)return r.getComputed(this);this.mutable&&he(r);const i=this.store;return i.has(t)?i.get(t):r.metadata.value}originOf(t){const r=this.store.originOf(t);if(r===void 0){const i=this.propertiesByName.get(t);if(i!==void 0&&i.flags&Ke.HasDefaultValue)return"defaults"}return tS(r)}has(t){return this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const r=this.propertiesByName.get(t);if(w1(r))return this.store.has(t)?this.store.get(t):r.metadata.value}internalSet(t,r){const i=this.propertiesByName.get(t);w1(i)&&this._internalSet(i,r)}getDependsInfo(t,r,i){const n=this.propertiesByName.get(r);if(!w1(n))return"";const s=new C2,o=cl(s,()=>{var d;return(d=n.metadata.get)==null?void 0:d.call(t)});let a=`${i}${t.declaredClass.split(".").pop()}.${r}: ${o}
`;const u=s.accessed??new Set;if(u.size===0)return a;i+="  ";for(const d of u)d instanceof RL&&(a+=`${i}${d.propertyName}: undefined
`);return a}setAtOrigin(t,r,i){const n=this.propertiesByName.get(t);if(w1(n))return this._setAtOrigin(n,r,i)}isOverridden(t){const r=this.propertiesByName.get(t);return r!==void 0&&!!(r.flags&Ke.Overridden)}clearOverride(t){const r=this.propertiesByName.get(t);r&&r.flags&Ke.Overridden&&(r.flags&=~Ke.Overridden,r.notifyChange())}override(t,r){const i=this.propertiesByName.get(t);if(!OL(i,t,r,this))return;const n=i.metadata.cast;if(n){const s=this._cast(n,r),{valid:o,value:a}=s;if(wT.release(s),!o)return;r=a}i.flags|=Ke.Overridden,this._internalSet(i,r)}set(t,r){const i=this.propertiesByName.get(t);if(!OL(i,t,r,this))return;const n=i.metadata.cast;if(n){const o=this._cast(n,r),{valid:a,value:u}=o;if(wT.release(o),!a)return;r=u}const s=i.metadata.set;s?s.call(this.host,r):this._internalSet(i,r)}setDefaultOrigin(t){this._origin=Iu(t)}getDefaultOrigin(){return tS(this._origin)}notifyChange(t){const r=this.propertiesByName.get(t);r!==void 0&&r.notifyChange()}invalidate(t){const r=this.propertiesByName.get(t);r!==void 0&&r.invalidate()}commit(t){const r=this.propertiesByName.get(t);r!==void 0&&r.commit()}_internalSet(t,r){const i=this.lifecycle!==Di.INITIALIZING?this._origin:Oe.DEFAULTS;this._setAtOrigin(t,r,i)}_setAtOrigin(t,r,i){const n=this.store,s=t.propertyName;n.has(s,i)&&QR(r,n.get(s))&&~t.flags&Ke.Overridden&&i===n.originOf(s)||(t.invalidate(),n.set(s,r,i),t.commit(),vz(this.host,t))}_cast(t,r){const i=wT.acquire();return i.valid=!0,i.value=r,t&&(i.value=t.call(this.host,r,i)),i}},lse=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const wT=new _p(lse);let use;function cse(){return use}var kL;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(kL||(kL={}));function dse(e){e.length=0}let wi=class{constructor(t=50,r=50){this._pool=new _p(Array,void 0,dse,r,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return _T.acquire()}static release(t){return _T.release(t)}static prune(){_T.prune()}};const _T=new wi(100);let Oz=class extends _p{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const r=super.acquire(...t);return this._set.delete(r),r}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const _1=[];function rS(e){_1.push(e),_1.length===1&&queueMicrotask(()=>{const t=_1.slice();_1.length=0;for(const r of t)r()})}let Wg=class{constructor(t,r=30){this.name=t,this._counter=0,this._samples=new Array(r)}push(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}set(t){t!=null&&(this._samples[this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,r)=>t-r)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,r)=>t+r,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var uM;(function(e){const t=(s,o,a,u)=>{let d=o,h=o;const f=a>>>1,m=s[d-1];for(;h<=f;){h=d<<1,h<a&&u(s[h-1],s[h])<0&&++h;const y=s[h-1];if(u(y,m)<=0)break;s[d-1]=y,d=h}s[d-1]=m},r=(s,o)=>s<o?-1:s>o?1:0;function i(s,o,a,u){o===void 0&&(o=0),a===void 0&&(a=s.length),u===void 0&&(u=r);for(let h=a>>>1;h>o;h--)t(s,h,a,u);const d=o+1;for(let h=a-1;h>o;h--){const f=s[o];s[o]=s[h],s[h]=f,t(s,d,h,u)}}function*n(s,o,a,u){o===void 0&&(o=0),a===void 0&&(a=s.length),u===void 0&&(u=r);for(let h=a>>>1;h>o;h--)t(s,h,a,u),yield;const d=o+1;for(let h=a-1;h>o;h--){const f=s[o];s[o]=s[h],s[h]=f,t(s,d,h,u),yield}}e.sort=i,e.iterableSort=n})(uM||(uM={}));const PL=uM,pse=1.5,hse=1.1;let Vd=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new NU,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>NL(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const r=new Array;for(let i=0;i<this._length;i++){const n=this.data[i];t(n)&&r.push(n)}return r}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,r){const i=this.data.indexOf(t,r);return i!==-1&&i<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let r=t;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,r=t.length){for(let i=0;i<r;i++)this.data[this._length++]=t[i]}fill(t,r){for(let i=0;i<r;i++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,NL(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const r=QE(this.data,t,this.length,this._hint);if(r!==-1)return this.data.splice(r,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(QE(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,r=t.length,i){this.length=Wie(this.data,t,this.length,r,this._hint,i),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,r){if(t>=this.length||r>=this.length||t===r)return;const i=this.data[t];this.data[t]=this.data[r],this.data[r]=i}sort(t){PL.sort(this.data,0,this.length,t)}iterableSort(t){return PL.iterableSort(this.data,0,this.length,t)}some(t,r){for(let i=0;i<this.length;++i)if(t.call(r,this.data[i],i,this.data))return!0;return!1}find(t,r){const{data:i,length:n}=this;for(let s=0;s<n;++s)if(t.call(r,i[s]))return i[s]}filterInPlace(t,r){let i=0;for(let n=0;n<this._length;++n){const s=this.data[n];t.call(r,s,n,this.data)&&(this.data[n]=this.data[i],this.data[i]=s,i++)}if(this._deallocator)for(let n=i;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=i,this._shrink(),this}forAll(t,r){const{data:i,length:n}=this;for(let s=0;s<n;++s)t.call(r,i[s],s,i)}forEach(t,r){this.data.slice(0,this.length).forEach(t,r)}map(t,r){const i=new Array(this.length);for(let n=0;n<this.length;++n)i[n]=t.call(r,this.data[n],n,this.data);return i}reduce(t,r){let i=r;for(let n=0;n<this.length;++n)i=t(i,this.data[n],n,this.data);return i}has(t){const r=this.length,i=this.data;for(let n=0;n<r;++n)if(i[n]===t)return!0;return!1}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.data[t]}};function NL(e){e.data.length>pse*e.length&&(e.data.length=Math.floor(e.length*hse))}function fse(e){return{setTimeout:(t,r)=>{const i=e.setTimeout(t,r);return Be(()=>e.clearTimeout(i))}}}const bm=fse(globalThis);function A2(e){return mse(e)||kz(e)}function mse(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function kz(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function xv(e,t,r){if(!A2(e))throw new TypeError("target is not a Evented or EventTarget object");return kz(e)?yse(e,t,r):e.on(t,r)}function yse(e,t,r,i){if(Array.isArray(t)){const n=t.slice();for(const s of n)e.addEventListener(s,r,i);return Be(()=>{for(const s of n)e.removeEventListener(s,r,i)})}return e.addEventListener(t,r,i),Be(()=>e.removeEventListener(t,r,i))}function Pz(e,t,r){if(!A2(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const i=xv(e,t,n=>{i.remove(),r.call(e,n)});return i}function ot(e="Aborted"){return new R("AbortError",e)}function _t(e,t="Aborted"){if(Xs(e))throw ot(t)}function Ev(e){return e instanceof AbortSignal?e:(e==null?void 0:e.signal)??void 0}function Xs(e){const t=Ev(e);return t!=null&&t.aborted}function Do(e){if(Or(e))throw e}function LL(e){if(!Or(e))throw e}function es(e,t){const r=Ev(e);if(r!=null){if(!r.aborted)return Pz(r,"abort",()=>t());t()}}function sO(e,t){const r=Ev(e);if(r!=null)return _t(r),Pz(r,"abort",()=>t(ot()))}function Nz(e,t){return Ev(t)==null?e:new Promise((r,i)=>{let n=es(t,()=>i(ot()));const s=()=>{n=wt(n)};e.then(s,s),e.then(r,i)})}function Or(e){return(e==null?void 0:e.name)==="AbortError"}async function iS(e){try{return await e}catch(t){if(!Or(t))throw t;return}}async function Od(e){if(!e)return;if(typeof e.forEach!="function"){const r=Object.keys(e),i=r.map(o=>e[o]),n=await Od(i),s={};return r.map((o,a)=>s[o]=n[a]),s}const t=e;return Promise.allSettled(t).then(r=>Array.from(t,(i,n)=>{const s=r[n];return s.status==="fulfilled"?{promise:i,value:s.value}:{promise:i,error:s.reason}}))}async function gse(e){return(await Promise.allSettled(e)).filter(t=>t.status==="fulfilled").map(t=>t.value)}async function qOe(e){return(await Promise.allSettled(e)).filter(t=>t.status==="rejected").map(t=>t.reason)}function oO(e,t=void 0,r){const i=new AbortController;return es(r,()=>i.abort()),new Promise((n,s)=>{let o=setTimeout(()=>{o=0,n(t)},e);es(i,()=>{o&&(clearTimeout(o),s(ot()))})})}function vse(e,t){const r=new AbortController,i=setTimeout(()=>r.abort(),t);return es(e,()=>{r.abort(),clearTimeout(i)}),{...e,signal:r.signal}}function Qo(e){return e&&typeof e.then=="function"}function cM(e){return Qo(e)?e:Promise.resolve(e)}function R2(e,t=-1){let r,i,n,s,o=null;const a=(...u)=>{if(r){i=u,s&&s.reject(ot()),s=_n();const m=s.promise;if(o){const y=o;o=null,y.abort()}return m}if(n=s||_n(),s=null,t>0){const m=new AbortController;r=cM(e(...u,m.signal));const y=r;oO(t).then(()=>{r===y&&(s?m.abort():o=m)})}else r=1,r=cM(e(...u));const d=()=>{const m=i;i=n=r=o=null,m!=null&&a(...m)},h=r,f=n;return h.then(d,d),h.then(f.resolve,f.reject),f.promise};return a}function _n(){let e,t;const r=new Promise((n,s)=>{e=n,t=s}),i=n=>{e(n)};return i.resolve=n=>e(n),i.reject=n=>t(n),i.timeout=(n,s)=>bm.setTimeout(()=>i.reject(s),n),i.promise=r,i}async function FL(e){await Promise.resolve(),_t(e)}function HOe(e){return e}function wse(e){return 1e3*e}function WOe(e){return e}let _se=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},bse=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},dM=0;const Km={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},pM=["prepare","preRender","render","postRender","update","finish"],hM=[],tp=new Vd;let Sse=class{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};function $se(){Ud!=null&&(cancelAnimationFrame(Ud),Ud=requestAnimationFrame(aO))}const nS={frameTasks:tp,willDispatch:!1,clearFrameTasks:Tse,dispatch:Fz,executeFrameTasks:xse,reschedule:$se};function Mv(e){const t=new bse(e);return hM.push(t),nS.willDispatch||(nS.willDispatch=!0,rS(Fz)),t}function Qf(e){const t=new _se(e);return tp.push(t),Ud==null&&(dM=performance.now(),Ud=requestAnimationFrame(aO)),new Sse(t)}let Ud=null;function Tse(e=!1){tp.forAll(t=>{t.removed=!0}),e&&Lz()}function aO(){const e=performance.now();Ud=null,Ud=tp.length>0?requestAnimationFrame(aO):null,nS.executeFrameTasks(e)}function xse(e){const t=e-dM;dM=e;const r=1e3/60,i=Math.max(0,t-r);Km.time=e,Km.frameDuration=r-i;for(let n=0;n<pM.length;n++){const s=performance.now(),o=pM[n];tp.forAll(a=>{var u;a.paused||a.removed||(n===0&&a.ticks++,a.phases[o]&&(Km.elapsedFrameTime=performance.now()-e,Km.deltaTime=a.ticks===0?0:t,(u=a.phases[o])==null||u.call(a,Km)))}),Ise[n].push(performance.now()-s)}Lz(),Cse.push(performance.now()-e)}const b1=new Vd;function Lz(){tp.forAll(e=>{e.removed&&b1.push(e)}),tp.removeUnorderedMany(b1.data,b1.length),b1.clear()}function Fz(){for(;hM.length;){const e=hM.shift();e.isActive&&e.callback()}nS.willDispatch=!1}function Ese(e=1,t){const r=_n(),i=()=>{Xs(t)?r.reject(ot()):e===0?r():(--e,rS(()=>i()))};return i(),r.promise}function Mse(e){return Ese(1,e)}async function Dz(e){await Mse(e),await new Promise(t=>requestAnimationFrame(()=>{e!=null&&e.aborted||t()}))}const Ise=pM.map(e=>new Wg(e)),Cse=new Wg("total");function jz(e,t){for(const r of e.values())if(t(r))return!0;return!1}function sS(e,t){if(!t)return e;for(const r of t)r!=null&&e.add(r);return e}function DL(e,t){return t!=null&&e.add(t),e}function Vz(e,t){const r=new Set;return sS(r,e),sS(r,t),r}function Ase(e,t){const r=new Set;for(const i of t)e.has(i)&&r.add(i);return r}function YOe(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const r of e)if(!t.has(r))return!1;return!0}function QOe(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function Rse(e,t){const r=new Set(e);for(const i of t)r.delete(i);return r}function Ose(e,t){return Rse(Vz(e,t),Ase(e,t))}let kse=0;function Uw(){return++kse}let O2=class extends C2{constructor(t){super(new Pse(t)),this._observer&&jL.register(this,new WeakRef(this._observer),this)}destroy(){var t,r;this._observer&&jL.unregister(this._observer),(t=this.accessed)==null||t.clear(),this.clear(),(r=this._observer)==null||r.destroy()}},Pse=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=Nse}};const jL=new FinalizationRegistry(e=>{var t;(t=e.deref())==null||t.destroy()});function Nse(){}let Ef=!1;const oS=[];function Uz(e,t){let r=new O2(s),i=null,n=!1;function s(){if(!r||n)return;if(Ef)return void Bz(s);const a=i;r.clear(),Ef=!0,n=!0,i=cl(r,e),n=!1,Ef=!1,t(i,a),qz()}function o(){r&&(r.destroy(),r=null,i=null)}return n=!0,i=cl(r,e),n=!1,Be(o)}function zz(e,t){let r=new O2(n),i=null;function n(){t(i,o)}function s(){r&&(r.destroy(),r=null),i=null}function o(){return r?(r.clear(),i=cl(r,e),i):null}return o(),Be(s)}function Gz(e,t){let r=!1,i=!1;const n=!!(t!=null&&t.sync);let s=new O2(()=>{r||i||(i=!0,n?o():queueMicrotask(o))});function o(){i=!1,s&&!r&&(Ef?Bz(o):(s.clear(),Ef=!0,r=!0,cl(s,e),r=!1,Ef=!1,qz()))}function a(){s&&(s.destroy(),s=null)}return r=!0,cl(s,e),r=!1,Be(a)}function Bz(e){oS.includes(e)||oS.unshift(e)}function qz(){for(;oS.length;)oS.pop()()}var Zg;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(Zg||(Zg={}));let V0=class{constructor(){this.uid=Uw(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,r,i,n,s){return this.pool.acquire(Zg.Untracked,t,r,i,n,s,QR)}static acquireTracked(t,r,i,n){return this.pool.acquire(Zg.Tracked,t,r,i,null,null,n)}notify(t,r){this.type===Zg.Untracked?this.callback.call(this.target,t,r,this.path,this.target):this.callback.call(null,t,r,void 0,void 0)}acquire(t,r,i,n,s,o,a){this.uid=Uw(),this.removed=!1,this.type=t,this.oldValue=r,this.callback=i,this.getValue=n,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Uw(),this.removed=!0}};V0.pool=new Oz(V0);const zw=new wi,rl=new Set;let aS;function lS(e){rl.delete(e),rl.add(e),aS||(aS=Mv(Dse))}function Lse(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function Fse(e){for(const t of rl.values())t.target===e&&(t.removed=!0)}function Dse(){let e=10;for(;aS&&e--;){aS=null;const t=jse(),r=zw.acquire();for(const i of t){const n=i.uid;Lse(i),n===i.uid&&i.removed&&r.push(i)}for(const i of rl)i.removed&&(r.push(i),rl.delete(i));for(const i of r)V0.pool.release(i);zw.release(r),zw.release(t),fM.forEach(i=>i())}}function jse(){const e=zw.acquire();e.length=rl.size;let t=0;for(const r of rl)e[t]=r,++t;return rl.clear(),e}const fM=new Set;function Vse(e){return fM.add(e),Be(()=>fM.delete(e))}function Use(e,t,r){let i=uz(e,t,r,(n,s,o)=>{let a,u,d=zz(()=>$v(n,s),(h,f)=>{var m;((m=n.__accessor__)==null?void 0:m.lifecycle)===Di.DESTROYED||a&&a.uid!==u?i.remove():(a||(a=V0.acquireUntracked(h,o,f,n,s),u=a.uid),lS(a))});return Be(()=>{d.remove(),a&&(a.uid!==u||a.removed||(a.removed=!0,lS(a)),a=null),i=d=null})});return i}function zse(e,t,r){const i=uz(e,t,r,(n,s,o)=>{let a=!1;return Uz(()=>$v(n,s),(u,d)=>{n.__accessor__.lifecycle!==Di.DESTROYED?a||(a=!0,QR(d,u)||o.call(n,u,d,s,n),a=!1):i.remove()})});return i}function Gse(e,t,r,i=!1){return e.__accessor__&&e.__accessor__.lifecycle!==Di.DESTROYED?i?zse(e,t,r):Use(e,t,r):Be()}function Bse(e,t,r){let i,n,s=zz(e,(o,a)=>{i&&i.uid!==n?s.remove():(i||(i=V0.acquireTracked(o,t,a,r),n=i.uid),lS(i))});return Be(()=>{s.remove(),i&&(i.uid!==n||i.removed||(i.removed=!0,lS(i)),i=null),s=null})}function qse(e,t,r){let i=!1;return Uz(e,(n,s)=>{i||(i=!0,r(s,n)||t(n,s),i=!1)})}function Hse(e,t,r=!1,i=XU){return r?qse(e,t,i):Bse(e,t,i)}function VL(e){return jz(rl,t=>t.oldValue===e)}var Hz,Wz;function Wse(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return(t=e.constructor)!=null&&t.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const uo=Symbol("Accessor-Handles"),mM=Symbol("Accessor-Initialized");let te=class Gw{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:i,constructor:n}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const s=this;class o extends s{constructor(...u){super(...u),this.inherited=null,n&&n.apply(this,u)}}Tv(o.prototype);for(const a in t){const u=t[a];o.prototype[a]=typeof u=="function"?function(...d){const h=this.inherited;let f;this.inherited=function(...m){if(s.prototype[a])return s.prototype[a].apply(this,m)};try{f=u.apply(this,d)}catch(m){throw this.inherited=h,m}return this.inherited=h,f}:t[a]}for(const a in r){const u=Wse(r[a]);c(u)(o.prototype,a)}return $(i)(o)}static freeze(t){return t instanceof Gw?t.__accessor__.mutable=!1:Object.freeze(t),t}static isFrozen(t){return t instanceof Gw?!t.__accessor__.mutable:Object.isFrozen(t)}constructor(...t){var i;if(this[Hz]=null,this[Wz]=!1,this.constructor===Gw)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const r=new ase(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:r}),t.length>0&&(r.ctorArgs=((i=this.normalizeCtorArgs)==null?void 0:i.apply(this,t))??t[0])}postscript(){const t=this.__accessor__,r=t.ctorArgs;t.initialize(),r&&(this.set(r),t.ctorArgs=null),t.constructed(),this.initialize(),this[mM]=!0}initialize(){}[mz](){this[uo]=st(this[uo])}destroy(){var t;this.destroyed||(Fse(this),this.__accessor__.destroy(),(t=cse())==null||t.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[mM]}get destroyed(){var t;return((t=this.__accessor__)==null?void 0:t.lifecycle)===Di.DESTROYED||!1}commitProperty(t){Ks(this,t)}get(t){return Iz(j.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),Ks(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return Kb(this,t,r),this}watch(t,r,i){return Gse(this,t,r,i)}addHandles(t,r){if(this.destroyed){const i=Array.isArray(t)?t:[t];for(const n of i)n.remove();return}(this[uo]??(this[uo]=new _m)).add(t,r)}removeHandles(t){var r;(r=this[uo])==null||r.remove(t)}removeAllHandles(){var t;(t=this[uo])==null||t.removeAll()}removeHandlesReference(t){var r;(r=this[uo])==null||r.removeReference(t)}hasHandles(t){var r;return((r=this[uo])==null?void 0:r.has(t))===!0}_override(t,r){r===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,r){r==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}};Hz=uo,Wz=mM;let Zse=class Zz{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new Zz;return this._values.forEach((i,n)=>{t&&t.has(n)||r.set(n,C(i.value),i.origin)}),r}get(t,r){r=this._normalizeOrigin(r);const i=this._values.get(t);return r==null||(i==null?void 0:i.origin)===r?i==null?void 0:i.value:void 0}originOf(t){var r;return((r=this._values.get(t))==null?void 0:r.origin)??Oe.USER}keys(t){t=this._normalizeOrigin(t);const r=[...this._values.keys()];return t==null?r:r.filter(i=>{var n;return((n=this._values.get(i))==null?void 0:n.origin)===t})}set(t,r,i){if((i=this._normalizeOrigin(i))===Oe.DEFAULTS){const n=this._values.get(t);if((n==null?void 0:n.origin)!=null&&n.origin>i)return}this._values.set(t,new Jse(r,i))}delete(t,r){var i;(r=this._normalizeOrigin(r))!=null&&((i=this._values.get(t))==null?void 0:i.origin)!==r||this._values.delete(t)}has(t,r){var i;return(r=this._normalizeOrigin(r))!=null?((i=this._values.get(t))==null?void 0:i.origin)===r:this._values.has(t)}forEach(t){this._values.forEach(({value:r},i)=>t(r,i))}_normalizeOrigin(t){if(t!=null)return t===Oe.DEFAULTS?t:Oe.USER}},Jse=class{constructor(t,r){this.value=t,this.origin=r}};function Jz(e,t,r){t.keys().forEach(n=>{r.set(n,t.get(n),Oe.DEFAULTS)});const i=e.metadata;Object.keys(i).forEach(n=>{e.internalGet(n)&&r.set(n,e.internalGet(n),Oe.DEFAULTS)})}function Kse(e,t,r){if(!(e!=null&&e.read)||e.read.enabled===!1||!e.read.source)return!1;const i=e.read.source;if(typeof i=="string"){if(i===t||i.includes(".")&&i.indexOf(t)===0&&vL(i,r))return!0}else for(const n of i)if(n===t||n.includes(".")&&n.indexOf(t)===0&&vL(n,r))return!0;return!1}function Yse(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function Qse(e,t,r,i,n){let s=sM(t[r],n);Yse(s)&&(e[r]=!0);for(const o of Object.getOwnPropertyNames(t))s=sM(t[o],n),Kse(s,r,i)&&(e[o]=!0)}function Xse(e,t,r,i){const n=r.metadata,s=Bne(n[t],i),o=s==null?void 0:s.default;if(o===void 0)return;const a=typeof o=="function"?o.call(e,t,i):o;a!==void 0&&r.set(t,a)}const Kz={origin:"service"};function Yz(e,t,r=Kz){if(!t||typeof t!="object")return;const i=Wi(e),n=i.metadata,s={};for(const o of Object.getOwnPropertyNames(t))Qse(s,n,o,t,r);i.setDefaultOrigin(r.origin);for(const o of Object.getOwnPropertyNames(s)){const a=sM(n[o],r).read,u=a==null?void 0:a.source;let d;d=u&&typeof u=="string"?$v(t,u):t[o],a!=null&&a.reader&&(d=a.reader.call(e,d,t,r)),d!==void 0&&i.set(o,d)}if(!r||!r.ignoreDefaults){i.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(n))s[o]||Xse(e,o,i,r)}i.setDefaultOrigin("user")}function Qz(e,t,r,i=Kz){var s;const n={...i,messages:[]};r(n),(s=n.messages)==null||s.forEach(o=>{o.type!=="warning"||e.loaded?i!=null&&i.messages&&i.messages.push(o):e.loadWarnings.push(o)})}function eoe(e,t,r,i,n){var o,a;const s={};return(a=(o=t.write)==null?void 0:o.writer)==null||a.call(e,i,s,r,n),s}function Xz(e,t,r,i,n,s){if(!(i!=null&&i.write))return!1;const o=Ks(e,r);if(!n&&i.write.overridePolicy){const a=i.write.overridePolicy.call(e,o,r,s??void 0);a!==void 0&&(n=a)}if(n||(n=i.write),!n||n.enabled===!1||n.layerContainerTypes&&(s!=null&&s.layerContainerType)&&!n.layerContainerTypes.includes(s.layerContainerType))return!1;if((o===null&&!n.allowNull&&!n.writerEnsuresNonNull||o===void 0)&&n.isRequired){const a=new R("web-document-write:property-required",`Missing value for required property '${r}' on '${e.declaredClass}'`,{propertyName:r,target:e});return a&&(s!=null&&s.messages)?s.messages.push(a):a&&!s&&j.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!n.allowNull&&!n.writerEnsuresNonNull||!n.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(r)===Oe.DEFAULTS)&&toe(e,r,s,i,o)||!n.ignoreOrigin&&(s!=null&&s.origin)&&t.store.multipleOriginsSupported&&t.store.originOf(r)<Iu(s.origin))}function toe(e,t,r,i,n){const s=i.default;if(s===void 0)return!1;if(i.defaultEquals!=null)return i.defaultEquals(n);if(typeof s=="function"){if(Array.isArray(n)){const o=s.call(e,t,r??void 0);return b2(o,n)}return!1}return s===n}function roe(e,t,r,i){const n=Wi(e),s=n.metadata,o=Ez(s[t],i);return!!o&&Xz(e,n,t,o,r,i)}function e7(e,t,r){var s,o;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return Dw(t,e.toJSON(r));const i=Wi(e),n=i.metadata;for(const a in n){const u=Ez(n[a],r);if(!Xz(e,i,a,u,void 0,r))continue;const d=Ks(e,a),h=eoe(e,u,u.write&&typeof u.write.target=="string"?u.write.target:a,d,r);Object.keys(h).length>0&&(t=Dw(t,h),(o=(s=r==null?void 0:r.resources)==null?void 0:s.pendingOperations)!=null&&o.length&&r.resources.pendingOperations.push(Promise.all(r.resources.pendingOperations).then(()=>Dw(t,h,()=>"replace-arrays"))),r!=null&&r.writtenProperties&&r.writtenProperties.push({target:e,propName:a,oldOrigin:sse(i.store.originOf(a)),newOrigin:r.origin}))}return t}const Sm=e=>{let t=class extends e{constructor(...r){super(...r);const i=Wi(this),n=i.store,s=new Zse;i.store=s,Jz(i,n,s)}read(r,i){Yz(this,r,i)}write(r,i){return e7(this,r??{},i)}toJSON(r){return this.write({},r)}static fromJSON(r,i){return ioe.call(this,r,i)}};return t=l([$("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function ioe(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}function uS(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}let N=class extends Sm(te){};N=l([$("esri.core.JSONSupport")],N);function G(e,t,r){let i,n;return t===void 0||Array.isArray(t)?(n=e,r=t,i=[void 0]):(n=t,i=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;i.forEach(u=>{const d=fz(s,u,n);d.read&&typeof d.read=="object"||(d.read={}),d.read.reader=a[o],r&&(d.read.source=(d.read.source||[]).concat(r))})}}let _e=class{constructor(t,r={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=r,this.apiValues=[],this.jsonValues=[],this._apiToJSON=noe(t),this.apiValues=UL(this._apiToJSON),this.jsonValues=UL(this._jsonToAPI),this.read=i=>this.fromJSON(i),this.write=(i,n,s)=>{const o=this.toJSON(i);o!==void 0&&cr(s,o,n)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const r=this._apiToJSON[t];return this._options.useNumericKeys?+r:r}return this._options.ignoreUnknown?void 0:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}};function noe(e){const t={};for(const r in e)t[e[r]]=r;return t}function UL(e){const t=[];for(const r in e)t.push(r);return t.sort(),t}function mr(){return function(e,t){return new _e(e,{ignoreUnknown:!0,...t})}}let lO=class{constructor(t,r,i,n,s,o){this.semiMajorAxis=t,this.flattening=r,this.outerAtmosphereRimWidth=i,this.atmosphereHeight=n,this.scaleHeight=s;const a=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*a,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const kt=new lO(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),Bo=new lO(3396190,1/169.8944472236118,23e4,6e4,.111),Ku=new lO(1737400,0,0,0,0),soe=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,ooe={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function zL(e){const t=e==null?void 0:e.match(soe);if(!t)return null;const[,r,i,n]=t;if(!r)return null;let s=null,o=null,a=null;const{devext:u,qaext:d,www:h}=ooe;if(i)if(s=r,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=u);break;case"qa":({customBaseUrl:o,portalHostname:a}=d);break;default:return null}else({customBaseUrl:o,portalHostname:a}=h);else switch(r.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=u);break;case"qaext":({customBaseUrl:o,portalHostname:a}=d);break;case"www":({customBaseUrl:o,portalHostname:a}=h);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:s}}function aoe(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function t7(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,r=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,i=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):r.test(e)?e=e.replace(r,"https://devext.arcgis.com"):i.test(e)&&(e=e.replace(i,"https://qaext.arcgis.com")),e}function r7(e){const t=atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r.buffer}function loe(e){const t=new Uint8Array(e);let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return btoa(r)}const uoe=()=>j.getLogger("esri.core.urlUtils"),$m=je.request,GL="esri/config: esriConfig.request.proxyUrl is not set.",i7=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,n7=/^\s*http:/i,coe=/^\s*https:/i,doe=/^\s*file:/i,poe=/:\d+$/,hoe=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,foe=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),moe=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let Bu=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=this.uri.match(foe);this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),this.authority!=null&&(r=this.authority.match(moe),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}};const S1={},yoe=new Bu(je.applicationUrl);let li=yoe;const goe=voe();let uO=goe;const cO=()=>li,ake=()=>uO;function voe(){const e=li.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${`${li.scheme}://${li.host}${li.port!=null?`:${li.port}`:""}`}${t}`}function hr(e){if(!e)return null;const t={path:null,query:null},r=new Bu(e),i=e.indexOf("?");return r.query===null?t.path=e:(t.path=e.slice(0,i),t.query=dO(r.query)),r.fragment&&(t.hash=r.fragment,r.query===null&&(t.path=t.path.slice(0,t.path.length-(r.fragment.length+1)))),t}function dO(e){const t=e.split("&"),r={};for(const i of t){if(!i)continue;const n=i.indexOf("=");let s,o;n<0?(s=decodeURIComponent(i),o=""):(s=decodeURIComponent(i.slice(0,n)),o=decodeURIComponent(i.slice(n+1)));let a=r[s];typeof a=="string"&&(a=r[s]=[a]),Array.isArray(a)?a.push(o):r[s]=o}return r}function U0(e,t){return e?Object.keys(e).map(r=>{const i=e[r];if(i==null)return"";const n=encodeURIComponent(r)+"=",s=t==null?void 0:t[r];return s?n+encodeURIComponent(s(i)):Array.isArray(i)?i.map(o=>uS(o)?n+encodeURIComponent(JSON.stringify(o)):n+encodeURIComponent(o)).join("&"):uS(i)?n+encodeURIComponent(JSON.stringify(i)):n+encodeURIComponent(i)}).filter(r=>r).join("&"):""}function s7(e=!1){let t,r=$m.proxyUrl;if(typeof e=="string"){t=u7(e);const i=k2(e);i&&(r=i.proxyUrl)}else t=!!e;if(!r)throw uoe().warn(GL),new R("urlUtils:proxy-not-set",GL);return t&&gM()&&(r=yO(r)),hr(r)}function lke(e,t=!1){const r=k2(e);let i,n;if(r){const s=pO(r.proxyUrl);i=s.path,n=s.query?dO(s.query):null}else if(t){const s=s7(e);i=s.path,n=s.query}if(i){const s=hr(e);e=i+"?"+s.path;const o=U0({...n,...s.query});o&&(e=`${e}?${o}`)}return e}const Ym={path:"",query:""};function pO(e){const t=e.indexOf("?");return t!==-1?(Ym.path=e.slice(0,t),Ym.query=e.slice(t+1)):(Ym.path=e,Ym.query=null),Ym}function o7(e){return e=(e=dS(e=Coe(e=pO(e).path),!0)).toLowerCase()}function woe(e){const t={proxyUrl:e.proxyUrl,urlPrefix:o7(e.urlPrefix)},r=$m.proxyRules,i=t.urlPrefix;let n=r.length;for(let s=0;s<r.length;s++){const o=r[s].urlPrefix;if(i.indexOf(o)===0){if(i.length===o.length)return-1;n=s;break}o.indexOf(i)===0&&(n=s+1)}return r.splice(n,0,t),n}function k2(e){const t=$m.proxyRules,r=o7(e);for(let i=0;i<t.length;i++)if(r.indexOf(t[i].urlPrefix)===0)return t[i]}function _oe(e,t){if(!e||!t)return!1;e=cS(e),t=cS(t);const r=zL(e),i=zL(t);return r!=null&&i!=null?r.portalHostname===i.portalHostname:r==null&&i==null&&Xf(e,t,!0)}function a7(e,t){return e=cS(e),t=cS(t),dS(e)===dS(t)}function cS(e){const t=(e=ts(e)).indexOf("/sharing");return t>0?e.slice(0,t):e.replace(/\/+$/,"")}function yM(e,t=$m.interceptors){const r=i=>i==null||i instanceof RegExp&&i.test(e)||typeof i=="string"&&e.startsWith(i);if(t){for(const i of t)if(Array.isArray(i.urls)){if(i.urls.some(r))return i}else if(r(i.urls))return i}return null}function Xf(e,t,r=!1){if(!e||!t)return!1;const i=wM(e),n=wM(t);return!(!r&&i.scheme!==n.scheme)&&i.host!=null&&n.host!=null&&i.host.toLowerCase()===n.host.toLowerCase()&&i.port===n.port}function hO(e){if(typeof e=="string"){if(!yn(e))return!0;e=wM(e)}if(Xf(e,li))return!0;const t=$m.trustedServers||[];for(let r=0;r<t.length;r++){const i=boe(t[r]);for(let n=0;n<i.length;n++)if(Xf(e,i[n]))return!0}return!1}function boe(e){return S1[e]||(mO(e)||Wo(e)?S1[e]=[new Bu(ji(e))]:S1[e]=[new Bu(`http://${e}`),new Bu(`https://${e}`)]),S1[e]}function ji(e,t=uO,r){return Wo(e)?r!=null&&r.preserveProtocolRelative?e:li.scheme==="http"&&li.authority===rs(e).slice(2)?`http:${e}`:`https:${e}`:mO(e)?e:em(e[0]==="/"?Moe(t):t,e)}function fO(e,t=uO,r){if(e==null||!yn(e))return e;const i=ts(e),n=i.toLowerCase(),s=ts(t).toLowerCase().replace(/\/+$/,""),o=r?ts(r).toLowerCase().replace(/\/+$/,""):null;if(o&&s.indexOf(o)!==0)return e;const a=(f,m,y)=>(y=f.indexOf(m,y))===-1?f.length:y;let u=a(n,"/",n.indexOf("//")+2),d=-1;for(;n.slice(0,u+1)===s.slice(0,u)+"/"&&(d=u+1,u!==n.length);)u=a(n,"/",u+1);if(d===-1||o&&d<o.length)return e;e=i.slice(d);const h=s.slice(d-1).replaceAll(/[^/]+/g,"").length;if(h>0)for(let f=0;f<h;f++)e=`../${e}`;else e=`./${e}`;return e}function ts(e){return e=Ooe(e=Roe(e=Aoe(e=ji(e=e.trim()))))}function em(...e){const t=e.filter(Js);if(!(t!=null&&t.length))return;const r=[];if(yn(t[0])){const n=t[0],s=n.indexOf("//");s!==-1&&(r.push(n.slice(0,s+1)),xoe(t[0])&&(r[0]+="/"),t[0]=n.slice(s+2))}else t[0][0]==="/"&&r.push("");const i=t.reduce((n,s)=>s?n.concat(s.split("/")):n,[]);for(let n=0;n<i.length;n++){const s=i[n];s===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!s&&n===i.length-1||s&&(s!=="."||r.length===0))&&r.push(s)}return r.join("/")}function rs(e,t=!1){if(e==null||P2(e)||ml(e))return null;let r=e.indexOf("://");if(r===-1&&Wo(e))r=2;else{if(r===-1)return null;r+=3}const i=e.indexOf("/",r);return i!==-1&&(e=e.slice(0,i)),t&&(e=dS(e,!0)),e}function yn(e){return Wo(e)||mO(e)}function P2(e){return e!=null&&e.slice(0,5)==="blob:"}function ml(e){return e!=null&&e.slice(0,5)==="data:"}function Soe(e){const t=rp(e);return t!=null&&t.isBase64?r7(t.data):null}function uke(e){return loe(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const $oe=/^data:(.*?)(;base64)?,(.*)$/;function rp(e){const t=e.match($oe);if(!t)return null;const[,r,i,n]=t;return{mediaType:r,isBase64:!!i,data:n}}function l7(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function cke(e){return(await fetch(e)).blob()}function dke(e){const t=Soe(e);if(!t)return null;const r=rp(e);return new Blob([t],{type:r.mediaType})}function Wo(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function mO(e){return e!=null&&i7.test(e)}function u7(e){return e!=null&&coe.test(e)||li.scheme==="https"&&Wo(e)}function Toe(e){return e!=null&&n7.test(e)||li.scheme==="http"&&Wo(e)}function xoe(e){return e!=null&&doe.test(e)}function yO(e){return Wo(e)?`https:${e}`:e.replace(n7,"https:")}function Eoe(){return li.scheme==="http"}function gM(){return li.scheme==="https"}function dS(e,t=!1){return Wo(e)?e.slice(2):(e=e.replace(i7,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function Moe(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return r===-1?e:e.slice(0,r)}function Ioe(e){let t=0;if(yn(e)){const i=e.indexOf("//");i!==-1&&(t=i+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function pke(e,t){if(!e)return"";const r=hr(e).path.replace(/\/+$/,""),i=r.slice(r.lastIndexOf("/")+1);if(!(t!=null&&t.length))return i;const n=new RegExp(`\\.(${t.join("|")})$`,"i");return i.replace(n,"")}function Coe(e){return e.endsWith("/")?e:`${e}/`}function c7(e){return e.replace(/\/+$/,"")}function Aoe(e){if(/^https?:\/\//i.test(e)){const t=pO(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function Roe(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function Ooe(e){const t=$m.httpsDomains;if(!Toe(e))return e;const r=e.indexOf("/",7);let i;if(i=r===-1?e:e.slice(0,r),i=i.toLowerCase().slice(7),poe.test(i)){if(!i.endsWith(":80"))return e;i=i.slice(0,-3),e=e.replace(":80","")}return Eoe()&&i===li.authority&&!hoe.test(e)||(gM()&&i===li.authority||t&&t.some(n=>i===n||i.endsWith(`.${n}`))||gM()&&!k2(e))&&(e=yO(e)),e}function vM(e,t,r){if(!(t&&r&&e&&yn(e)))return e;const i=e.indexOf("//"),n=e.indexOf("/",i+2),s=e.indexOf(":",i+2),o=Math.min(n<0?e.length:n,s<0?e.length:s);return e.slice(i+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,i+2)}${r}${e.slice(o)}`}function wM(e){return typeof e=="string"?new Bu(ji(e)):(e.scheme||(e.scheme=li.scheme),e)}function hke(e){return koe.test(e)}function d7(e,t){const r=hr(e),i=Object.keys(r.query||{});return i.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${i.join(", ")}.`),r.path}function p7(e,t,r){const i=hr(e),n=i.query||{};return n[t]=String(r),`${i.path}?${U0(n)}`}function bT(e,t){if(!t)return e;const r=hr(e),i=r.query||{};for(const[s,o]of Object.entries(t))o!=null&&(i[s]=o);const n=U0(i);return n?`${r.path}?${n}`:r.path}function fke(e){if(e==null)return null;const t=e.match(h7);return t?t[2]:null}function BL(e){if(e==null)return null;const t=e.match(h7);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function mke(e){return typeof e=="string"?rp(e)??{data:e}:new Promise((t,r)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(rp(i.result)),i.onerror=n=>r(n)})}const h7=/([^.]*)\.([^/]*)$/,koe=/(^data:image\/svg|\.svg$)/i,f7="20241122",m7="f6f7099a0e79cf518abdcf87c5aa8b6f24ecdcd8";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const y7="4.31";let Ae,gO=y7;gO="4.31.6";function yke(e){Ae=e}function gke(e){const t=Ae==null?void 0:Ae.findCredential(e);return t!=null&&t.token?p7(e,"token",t.token):e}L("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),L("host-webworker");const Poe=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function Noe(e){const t=rs(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!Poe.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function g7(e,t){return!(!je.apiKey||!Noe(e))}function Loe(e,t,r=!1,i){return new Promise((n,s)=>{if(Xs(i))return void s(qL());let o=()=>{d(),s(new Error(`Unable to load ${t}`))},a=()=>{const h=e;d(),n(h)},u=()=>{if(!e)return;const h=e;d(),h.src="",s(qL())};const d=()=>{L("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",a)),o=null,a=null,e=null,i!=null&&i.removeEventListener("abort",u),u=null,r&&URL.revokeObjectURL(t)};i!=null&&i.addEventListener("abort",u),L("esri-image-decode")?e.decode().then(a,o):(e.addEventListener("error",o),e.addEventListener("load",a))})}function qL(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const v7="Timeout exceeded";function Foe(){return new Error(v7)}function vke(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===v7}function Doe(e){je.request.crossOriginNoCorsDomains||(je.request.crossOriginNoCorsDomains={});const t=je.request.crossOriginNoCorsDomains;for(let r of e)r=r.toLowerCase(),/^https?:\/\//.test(r)?t[rs(r)??""]=0:(t[rs("http://"+r)??""]=0,t[rs("https://"+r)??""]=0)}function joe(e){const t=je.request.crossOriginNoCorsDomains;if(t){let r=rs(e);if(r)return r=r.toLowerCase(),!Xf(r,cO())&&t[r]<Date.now()-36e5}return!1}async function Voe(e){var n;const t=hr(e);e=t.path,((n=t.query)==null?void 0:n.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}const r=je.request.crossOriginNoCorsDomains,i=rs(e);r&&i&&(r[i.toLowerCase()]=Date.now())}async function Le(e,t){var m;e instanceof URL&&(e=e.toString()),(t==null?void 0:t.query)instanceof URLSearchParams&&(t.query=dO(t.query.toString().replaceAll("+"," ")));const r=ml(e),i=P2(e);i||r||(e=ts(e));const n={url:e,requestOptions:{...t}},s=y=>({data:y,getAllHeaders:tm,getHeader:tm,httpStatus:200,requestOptions:n.requestOptions,url:n.url}),o=yM(e,Bn.internalInterceptors);if(o){const y=await WL(o,n);if(y!=null)return s(y)}let a=yM(e);if(a){const y=await WL(a,n);if(y!=null)return s(y);a.after||a.error||(a=null)}if(e=n.url,(t=n.requestOptions).responseType==="image"&&(L("host-webworker")||L("host-node")))throw qo("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n);if(t.method==="head"){if(t.body)throw qo("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(r||i)throw qo("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await qoe(),pS)return pS.execute(e,t);const u=new AbortController,d=es(t,()=>u.abort()),h={controller:u,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:n,redoRequest:!1,useIdentity:Bn.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},f=await Joe(h).finally(()=>d==null?void 0:d.remove());return(m=a==null?void 0:a.after)==null||m.call(a,f),f}let pS;const Bn=je.request,w7="FormData"in globalThis,Uoe=new Set([499,498,403,401]),zoe=new Set(["COM_0056","COM_0057","SB_0008"]),Goe=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],tm=()=>null,hS=Symbol();function Boe(e){const t=rs(e);t&&!Le._corsServers.includes(t)&&Le._corsServers.push(t)}function HL(e){const t=rs(e);return!t||t.endsWith(".arcgis.com")||Le._corsServers.includes(t)||hO(t)}function qo(e,t,r,i){let n="Error";const s={url:r.url,requestOptions:r.requestOptions,getAllHeaders:tm,getHeader:tm,ssl:!1};if(t instanceof R)return t.details?(t.details=C(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=s,t;if(t){const o=i&&(()=>Array.from(i.headers)),a=i&&(h=>i.headers.get(h)),u=i==null?void 0:i.status,d=t.message;d&&(n=d),o&&a&&(s.getAllHeaders=o,s.getHeader=a),s.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||u||0,s.subCode=t.subcode,s.messageCode=t.messageCode,typeof t.details=="string"?s.messages=[t.details]:s.messages=t.details,s.raw=hS in t?t[hS]:t}return Or(t)?ot():new R(e,n,s)}async function qoe(){L("host-webworker")&&!pS&&(pS=await D(()=>import("./request-CPl9kmUG.js"),[],import.meta.url))}async function _M(){Ae||await D(()=>import("./IdentityManager-CNVuHt1R.js"),[],import.meta.url)}async function Hoe(e){var a;const t=e.params.url,r=e.params.requestOptions,i=e.controller.signal,n=r.body;let s=null,o=null;if(w7&&"HTMLFormElement"in globalThis&&(n instanceof FormData?s=n:n instanceof HTMLFormElement&&(s=new FormData(n))),typeof n=="string"&&(o=n),e.fetchOptions={cache:r.cacheBust?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:r.method==="head"?"HEAD":"GET",mode:"cors",priority:Bn.priority,redirect:"follow",signal:i},(s||o)&&(e.fetchOptions.body=s||o),r.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||(a=r.query)!=null&&a.token||s!=null&&s.get("token")),!e.hasToken&&g7(t)&&(r.query||(r.query={}),r.query.token=je.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!_7(t)&&!Xs(i)){let u;r.authMode==="immediate"?(await _M(),u=await Ae.getCredential(t,{signal:i}),e.credential=u):r.authMode==="no-prompt"?(await _M(),u=await Ae.getCredential(t,{prompt:!1,signal:i}).catch(()=>{}),e.credential=u):Ae&&(u=Ae.findCredential(t)),u&&(e.credentialToken=u.token,e.useSSL=!!u.ssl)}}function _7(e){return Goe.some(t=>t.test(e))}async function Woe(e){let t=e.params.url;const r=e.params.requestOptions,i=e.fetchOptions??{},n=P2(t)||ml(t),s=r.responseType||"json",o=n?0:r.timeout!=null?r.timeout:Bn.timeout;let a=!1;if(!n){e.useSSL&&(t=yO(t));let m={...r.query};e.credentialToken&&(m.token=e.credentialToken);let y=U0(m);L("esri-url-encodes-apostrophe")&&(y=y.replaceAll("'","%27"));const g=t.length+1+y.length;let v;a=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||g>Bn.maxUrlLength;const _=r.useProxy||!!k2(t);if(_){const w=s7(t);v=w.path,!a&&v.length+1+g>Bn.maxUrlLength&&(a=!0),w.query&&(m={...w.query,...m})}if(i.method==="HEAD"&&(a||_)){if(a)throw g>Bn.maxUrlLength?qo("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):qo("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(_)throw qo("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(a?(i.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?t=bT(t,m):(i.body=U0(m),i.headers||(i.headers={}),i.headers["Content-Type"]="application/x-www-form-urlencoded")):t=bT(t,m),_&&(e.useProxy=!0,t=`${v}?${t}`),m.token&&w7&&i.body instanceof FormData&&!aoe(t)&&i.body.set("token",m.token),r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!Xf(t,cO())){if(hO(t))e.withCredentials=!0;else if(Ae){const w=Ae.findServerInfo(t);w!=null&&w.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(i.credentials="include",joe(t)&&await Voe(a?bT(t,m):t))}let u,d,h=0,f=!1;o>0&&(h=setTimeout(()=>{f=!0,e.controller.abort()},o));try{if(r.responseType==="native-request-init")d=i,d.url=t,r.signal?d.signal=r.signal:delete d.signal;else if(r.responseType!=="image"||i.cache!=="default"||i.method!=="GET"||a||Zoe(r.headers)||!n&&!e.useProxy&&Bn.proxyUrl&&!HL(t)){if(Le._beforeFetch&&await Le._beforeFetch(t,i),u=await fetch(t,i),Le._afterFetch&&await Le._afterFetch(u),e.useProxy||Boe(t),r.responseType==="native")d=u;else if(i.method!=="HEAD")if(u.ok){switch(s){case"array-buffer":d=await u.arrayBuffer();break;case"blob":case"image":d=await u.blob();break;default:d=await u.text()}if(h&&(clearTimeout(h),h=0),s==="json"||s==="xml"||s==="document")if(d)switch(s){case"json":d=JSON.parse(d);break;case"xml":d=ZL(d,"application/xml");break;case"document":d=ZL(d,"text/html")}else d=null;if(d){if(s==="array-buffer"||s==="blob"){const m=u.headers.get("Content-Type");if(m&&/application\/json|text\/plain/i.test(m)&&d[s==="blob"?"size":"byteLength"]<=750)try{const y=await new Response(d).json();y.error&&(d=y)}catch{}}s==="image"&&d instanceof Blob&&(d=await JL(URL.createObjectURL(d),e,!0))}}else{d=await u.text();try{d=JSON.parse(d)}catch{}}}else d=await JL(t,e)}catch(m){if(m.name==="AbortError")throw f?Foe():ot("Request canceled");if(!(!u&&m instanceof TypeError&&Bn.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||e.useProxy||HL(t))throw m;e.redoRequest=!0,woe({proxyUrl:Bn.proxyUrl,urlPrefix:rs(t)??""})}finally{h&&clearTimeout(h)}return[u,d]}async function WL(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,i;try{i=await e.before(t)}catch(n){r=qo("request:interceptor",n,t)}if((i instanceof Error||i instanceof R)&&(r=qo("request:interceptor",i,t)),r)throw e.error&&e.error(r),r;return i}}function Zoe(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function ZL(e,t){let r;try{r=new DOMParser().parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function Joe(e){var s,o;let t,r;await Hoe(e);try{do[t,r]=await Woe(e);while(!await Koe(e,t,r))}catch(a){const u=qo("request:server",a,e.params,t);throw u.details.ssl=e.useSSL,(s=e.interceptor)!=null&&s.error&&e.interceptor.error(u),u}const i=e.params.url;if(r&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(i)){if(!e.hasToken&&!e.credentialToken&&((o=r.user)!=null&&o.username)&&!hO(i)){const a=rs(i,!0);a&&Bn.trustedServers.push(a)}Array.isArray(r.authorizedCrossOriginNoCorsDomains)&&Doe(r.authorizedCrossOriginNoCorsDomains)}const n=e.credential;if(n&&Ae){const a=Ae.findServerInfo(n.server);let u=a==null?void 0:a.owningSystemUrl;if(u){u=u.replace(/\/?$/,"/sharing");const d=Ae.findCredential(u,n.userId);d&&Ae._getIdenticalSvcIdx(u,d)===-1&&d.resources.unshift(u)}}return{data:r,getAllHeaders:t?()=>Array.from(t.headers):tm,getHeader:t?a=>t.headers.get(a):tm,httpStatus:(t==null?void 0:t.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function Koe(e,t,r){var d;if(e.redoRequest)return e.redoRequest=!1,!1;const i=e.params.requestOptions;if(!t||i.responseType==="native"||i.responseType==="native-request-init")return!0;let n,s;if(r&&(r.error&&typeof r.error=="object"?n=r.error:r.status==="error"&&Array.isArray(r.messages)&&(n={...r},n[hS]=r,n.details=r.messages)),!n&&!t.ok)throw n=new Error(`Unable to load ${t.url} status: ${t.status}`),n[hS]=r,n;let o,a=null;n&&(s=Number(n.code),a=n.hasOwnProperty("subcode")?Number(n.subcode):null,o=n.messageCode,o=o==null?void 0:o.toUpperCase());const u=i.authMode;if(s===403&&(a===4||(d=n.message)!=null&&d.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(u!=="no-prompt"||s===498)&&s!==void 0&&Uoe.has(s)&&!_7(e.params.url)&&(s!==403||(!o||!zoe.has(o))&&(a==null||a===2&&e.credentialToken))){await _M();try{const h=await Ae.getCredential(e.params.url,{error:qo("request:server",n,e.params),prompt:u!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=h,e.credentialToken=h.token,e.useSSL=e.useSSL||h.ssl,!1}catch(h){if(u==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;n=h}}if(n)throw n;return!0}function JL(e,t,r=!1){const i=t.controller.signal,n=new Image;return t.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=Bn.priority,n.src=e,Loe(n,e,r,i)}Le._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],Le._beforeFetch=void 0,Le._afterFetch=void 0;function Ve(e){if(!je.assetsPath)throw j.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new R("assets:path-not-set","config.assetsPath is not set");return em(je.assetsPath,e)}let ST,A=null;function vO(){return!!A}function Yoe(){return!!L("esri-wasm")}function b7(){return ST||(ST=D(()=>import("./pe-wasm-ihfvgCko.js"),__vite__mapDeps([0,1]),import.meta.url).then(e=>e.p).then(({default:e})=>e({locateFile:t=>Ve(`esri/geometry/support/${t}`)})).then(e=>{T7(e)}),ST)}var bM,gt;(function(e){function t(s,o,a){A.ensureCache.prepare();const u=$d(a),d=a===u,h=A.ensureFloat64(u),f=A._pe_geog_to_proj(A.getPointer(s),o,h);return f&&$u(a,o,h,d),f}function r(s,o,a,u){switch(u){case gt.PE_TRANSFORM_P_TO_G:return i(s,o,a);case gt.PE_TRANSFORM_G_TO_P:return t(s,o,a)}return 0}function i(s,o,a){return n(s,o,a,0)}function n(s,o,a,u){A.ensureCache.prepare();const d=$d(a),h=a===d,f=A.ensureFloat64(d),m=A._pe_proj_to_geog_center(A.getPointer(s),o,f,u);return m&&$u(a,o,f,h),m}e.geogToProj=t,e.projGeog=r,e.projToGeog=i,e.projToGeogCenter=n})(bM||(bM={})),function(e){function t(){e.PE_BUFFER_MAX=A.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=A.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=A.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=A.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=A.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=A.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=A.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=A.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=A.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=A.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=A.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=A.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=A.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=A.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=A.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=A.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=A.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=A.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=A.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=A.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=A.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=A.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=A.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=A.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=A.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=A.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=A.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=A.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=A.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=A.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=A.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=A.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(gt||(gt={}));let S7=null;var SM;(function(e){const t={},r={},i=y=>{const g=y.getType();switch(g){case gt.PE_TYPE_GEOGCS:y=A.castObject(y,A.PeGeogcs);break;case gt.PE_TYPE_PROJCS:y=A.castObject(y,A.PeProjcs);break;case gt.PE_TYPE_GEOGTRAN:y=A.castObject(y,A.PeGeogtran);break;default:g&gt.PE_TYPE_UNIT&&(y=A.castObject(y,A.PeUnit))}return y};function n(){A.PeFactory.prototype.initialize(null)}function s(y){return o(gt.PE_TYPE_COORDSYS,y)}function o(y,g){let v=null,_=t[y];if(_||(_={},t[y]=_),_.hasOwnProperty(String(g))&&(v=_[g],A.compare(v,A.NULL)&&(v=null)),!v){const w=A.PeFactory.prototype.factoryByType(y,g);A.compare(w,A.NULL)||(v=i(w),_[g]=v)}return v}function a(y,g){let v=null,_=r[y];if(_||(_={},r[y]=_),_.hasOwnProperty(g)&&(v=_[g],A.compare(v,A.NULL)&&(v=null)),!v){const w=A.PeFactory.prototype.fromString(y,g);A.compare(w,A.NULL)||(v=i(w),_[g]=v)}return v}function u(y){return o(gt.PE_TYPE_GEOGCS,y)}function d(y){return o(gt.PE_TYPE_GEOGTRAN,y)}function h(y){return A.PeFactory.prototype.getCode(y)}function f(y){return o(gt.PE_TYPE_PROJCS,y)}function m(y){return o(gt.PE_TYPE_UNIT,y)}e.initialize=n,e.coordsys=s,e.factoryByType=o,e.fromString=a,e.geogcs=u,e.geogtran=d,e.getCode=h,e.projcs=f,e.unit=m})(SM||(SM={}));let $7=null;var fS,$M,TM,xM,EM,MM,mS,IM,yS,gS,CM;function T7(e){function t(s,o,a){s[o]=a(s[o])}A=e,gt.init(),fS.init(),mS.init(),yS.init(),gS.init(),S7=class extends A.PeDouble{constructor(s=NaN){super(s)}destroy(){A.destroy(this)}[Symbol.dispose](){this.destroy()}},$7=class extends A.PeGCSExtent{destroy(){A.destroy(this)}[Symbol.dispose](){this.destroy()}};const r=[A.PeAngunit,A.PeDatum,A.PeGeogcs,A.PeGeogtran,A.PeObject,A.PeParameter,A.PePrimem,A.PeProjcs,A.PeSpheroid,A.PeUnit];for(const s of r)t(s.prototype,"getName",o=>function(){return o.call(this,new Array(gt.PE_NAME_MAX))});for(const s of[A.PeGeogtran,A.PeProjcs])t(s.prototype,"getParameters",o=>function(){const a=new Array(gt.PE_PARM_MAX);let u=o.call(this);for(let d=0;d<a.length;d++){const h=A.getValue(u,"*");a[d]=h?A.wrapPointer(h,A.PeParameter):null,u+=Int32Array.BYTES_PER_ELEMENT}return a});t(A.PeHorizon.prototype,"getCoord",s=>function(o=!1){const a=this.getSize();if(!a)return null;const u=[];return $u(u,a,s.call(this),o),u}),t(A.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=A._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const u=s.call(this);if(!A.compare(u,A.NULL)){a=[u];const d=this.getSteps();if(d>1){const h=A.getPointer(u);for(let f=1;f<d;f++)a.push(A.wrapPointer(h+o*f,A.PeGTlistExtendedGTs))}}return a}});const i=A._pe_getPeHorizonSize(),n=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const u=s.call(this);if(!A.compare(u,A.NULL)){a=[u];const d=u.getNump();if(d>1){const h=A.getPointer(u);for(let f=1;f<d;f++)a.push(A.wrapPointer(h+i*f,A.PeHorizon))}}return o.set(s,a),a};t(A.PeProjcs.prototype,"horizonGcsGenerate",n),t(A.PeProjcs.prototype,"horizonPcsGenerate",n),A.PeObject.prototype.toString=function(s=gt.PE_STR_OPTS_NONE){A.ensureCache.prepare();const o=A.getPointer(this),a=A.ensureInt8(new Array(gt.PE_BUFFER_MAX));return A.UTF8ToString(A._pe_object_to_string_ext(o,s,a))},A.PeGeogcs.prototype.destroy=function(){this.Delete(),Fs(this),this.ptr=0},A.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},A.PeProjcs.prototype.destroy=function(){this.Delete(),Fs(this),this.ptr=0},A.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function Fs(e){if(!e)return;const t=A.getClass(e);if(!t)return;const r=A.getCache(t);if(!r)return;const i=A.getPointer(e);i&&delete r[i]}function $1(e,t){const r=[],i=new Array(t);for(let n=0;n<e;n++)r.push(A.ensureInt8(i));return r}function $d(e){return ArrayBuffer.isView(e)?e:Array.isArray(e[0])?e.flat():e}function $u(e,t,r,i=!1){if(i)for(let n=0;n<2*t;n++)e[n]=A.getValue(r+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=e.length===0;for(let s=0;s<t;s++)n&&(e[s]=new Array(2)),e[s][0]=A.getValue(r,"double"),e[s][1]=A.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function r(){e.PE_GTLIST_OPTS_COMMON=A.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=A._pe_getPeGTlistExtendedEntrySize()}function i(n,s,o,a,u,d){let h=null;const f=new A.PeInteger(d);try{const m=A.PeGTlistExtended.prototype.getGTlist(n,s,o,a,u,f);if((d=f.val)&&(h=[m],d>1)){const y=A.getPointer(m);for(let g=1;g<d;g++)h.push(A.wrapPointer(y+t*g,A.PeGTlistExtendedEntry))}}finally{A.destroy(f)}return h}e.init=r,e.getGTlist=i})(fS||(fS={})),function(e){function t(r){if(r!=null&&r.length){for(const i of r)Fs(i),i.getEntries().forEach(n=>{Fs(n);const s=n.getGeogtran();Fs(s),s.getParameters().forEach(Fs),[s.getGeogcs1(),s.getGeogcs2()].forEach(o=>{Fs(o);const a=o.getDatum();Fs(a),Fs(a.getSpheroid()),Fs(o.getPrimem()),Fs(o.getUnit())})});A.PeGTlistExtendedEntry.prototype.Delete(r[0])}}e.destroy=t}($M||($M={})),function(e){function t(r,i,n,s,o){A.ensureCache.prepare();const a=$d(n),u=n===a,d=A.ensureFloat64(a);let h=0;s&&(h=A.ensureFloat64(s));const f=A._pe_geog_to_geog(A.getPointer(r),i,d,h,o);return f&&$u(n,i,d,u),f}e.geogToGeog=t}(TM||(TM={})),function(e){function t(s,o,a,u,d,h,f,m){A.PeLineType.prototype.geodesic_coordinate(s,o,a,u,d,h,f,m)}function r(s,o,a,u,d,h,f,m,y){A.PeLineType.prototype.geodetic_coordinate(s,o,a,u,d,h,f,m,y)}function i(s,o,a,u,d,h,f,m,y,g){A.PeLineType.prototype.geodetic_distance(s,o,a,u,d,h,f,m,y,g)}function n(s,o,a,u,d,h,f,m,y){A.PeLineType.prototype.great_elliptic_distance(s,o,a,u,d,h,f,m,y)}e.geodesicCoordinate=t,e.geodeticCoordinate=r,e.geodeticDistance=i,e.greatEllipticDistance=n}(xM||(xM={})),function(e){function t(o,a){return A.PeMath.prototype.phi_to_eta(o,a)}function r(o,a){return A.PeMath.prototype.eta_to_phi(o,a)}function i(o,a){return A.PeMath.prototype.phi_to_phig(o,a)}function n(o,a,u){return A.PeMath.prototype.q(o,a,u)}function s(o,a){return A.PeMath.prototype.q90(o,a)}e.phiToEta=t,e.etaToPhi=r,e.phiToPhig=i,e.q=n,e.q90=s}(EM||(EM={})),function(e){const t=(d,h,f,m,y,g)=>{let v,_;switch(A.ensureCache.prepare(),d){case"dd":v=A._pe_geog_to_dd,_=gt.PE_DD_MAX;break;case"ddm":v=A._pe_geog_to_ddm,_=gt.PE_DDM_MAX;break;case"dms":v=A._pe_geog_to_dms,_=gt.PE_DMS_MAX}let w=0;h&&(w=A.getPointer(h));const b=$d(m),T=A.ensureFloat64(b),x=$1(f,_),M=v(w,f,T,y,A.ensureInt32(x));if(M)for(let I=0;I<f;I++)g[I]=A.UTF8ToString(x[I]);return M},r=(d,h,f,m,y)=>{let g;switch(A.ensureCache.prepare(),d){case"dd":g=A._pe_dd_to_geog;break;case"ddm":g=A._pe_ddm_to_geog;break;case"dms":g=A._pe_dms_to_geog}let v=0;h&&(v=A.getPointer(h));const _=m.map(x=>A.ensureString(x)),w=A.ensureInt32(_),b=A.ensureFloat64(new Array(2*f)),T=g(v,f,w,b);return T&&$u(y,f,b),T};function i(d,h,f,m,y){return t("dms",d,h,f,m,y)}function n(d,h,f,m){return r("dms",d,h,f,m)}function s(d,h,f,m,y){return t("ddm",d,h,f,m,y)}function o(d,h,f,m){return r("ddm",d,h,f,m)}function a(d,h,f,m,y){return t("dd",d,h,f,m,y)}function u(d,h,f,m){return r("dd",d,h,f,m)}e.geogToDms=i,e.dmsToGeog=n,e.geogToDdm=s,e.ddmToGeog=o,e.geogToDd=a,e.ddToGeog=u}(MM||(MM={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=A.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=A.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=A.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=A.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=A.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function r(n,s,o,a,u,d,h){A.ensureCache.prepare();let f=0;n&&(f=A.getPointer(n));const m=$d(o),y=A.ensureFloat64(m),g=$1(s,gt.PE_MGRS_MAX),v=A.ensureInt32(g),_=A._pe_geog_to_mgrs_extended(f,s,y,a,u,d,v);if(_)for(let w=0;w<s;w++)h[w]=A.UTF8ToString(g[w]);return _}function i(n,s,o,a,u){A.ensureCache.prepare();let d=0;n&&(d=A.getPointer(n));const h=o.map(g=>A.ensureString(g)),f=A.ensureInt32(h),m=A.ensureFloat64(new Array(2*s)),y=A._pe_mgrs_to_geog_extended(d,s,f,a,m);return y&&$u(u,s,m),y}e.init=t,e.geogToMgrsExtended=r,e.mgrsToGeogExtended=i}(mS||(mS={})),function(e){function t(i,n,s,o,a,u,d){A.ensureCache.prepare();let h=0;i&&(h=A.getPointer(i));const f=$d(s),m=A.ensureFloat64(f),y=$1(n,gt.PE_MGRS_MAX),g=A.ensureInt32(y),v=A._pe_geog_to_usng(h,n,m,o,a,u,g);if(v)for(let _=0;_<n;_++)d[_]=A.UTF8ToString(y[_]);return v}function r(i,n,s,o){A.ensureCache.prepare();let a=0;i&&(a=A.getPointer(i));const u=s.map(m=>A.ensureString(m)),d=A.ensureInt32(u),h=A.ensureFloat64(new Array(2*n)),f=A._pe_usng_to_geog(a,n,d,h);return f&&$u(o,n,h),f}e.geogToUsng=t,e.usngToGeog=r}(IM||(IM={})),function(e){function t(){e.PE_UTM_OPTS_NONE=A.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=A.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=A.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function r(n,s,o,a,u){A.ensureCache.prepare();let d=0;n&&(d=A.getPointer(n));const h=$d(o),f=A.ensureFloat64(h),m=$1(s,gt.PE_UTM_MAX),y=A.ensureInt32(m),g=A._pe_geog_to_utm(d,s,f,a,y);if(g)for(let v=0;v<s;v++)u[v]=A.UTF8ToString(m[v]);return g}function i(n,s,o,a,u){A.ensureCache.prepare();let d=0;n&&(d=A.getPointer(n));const h=o.map(g=>A.ensureString(g)),f=A.ensureInt32(h),m=A.ensureFloat64(new Array(2*s)),y=A._pe_utm_to_geog(d,s,f,a,m);return y&&$u(u,s,m),y}e.init=t,e.geogToUtm=r,e.utmToGeog=i}(yS||(yS={})),function(e){const t=new Map;function r(){e.PE_PCSINFO_OPTION_NONE=A.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=A.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=A.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=A.PePCSInfo.prototype.PE_POLE_POINT}function i(n,s=e.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return t.has(n)&&(a=t.get(n),a[s]&&(o=a[s])),o||(o=A.PePCSInfo.prototype.generate(n,s),a||(a=[],t.set(n,a)),a[s]=o),o}e.init=r,e.generate=i}(gS||(gS={})),function(e){function t(){return A.PeVersion.prototype.version_string()}e.versionString=t}(CM||(CM={}));const Qoe=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return bM},get PeDefs(){return gt},get PeDouble(){return S7},get PeFactory(){return SM},get PeGCSExtent(){return $7},get PeGTTransformations(){return TM},get PeGTlistExtended(){return fS},get PeGTlistExtendedEntry(){return $M},get PeLineType(){return xM},get PeMath(){return EM},get PeNotationDms(){return MM},get PeNotationMgrs(){return mS},get PeNotationUsng(){return IM},get PeNotationUtm(){return yS},get PePCSInfo(){return gS},get PeVersion(){return CM},_init:T7,get _pe(){return A},isLoaded:vO,isSupported:Yoe,load:b7},Symbol.toStringTag,{value:"Module"}));var ip;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(ip||(ip={}));let p;const S={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for(p=2e3;p<=2045;p++)S[p]=0;for(p=2056;p<=2065;p++)S[p]=0;for(p=2067;p<=2135;p++)S[p]=0;for(p=2137;p<=2154;p++)S[p]=0;for(p=2161;p<=2170;p++)S[p]=0;for(p=2172;p<=2193;p++)S[p]=0;for(p=2195;p<=2198;p++)S[p]=0;for(p=2200;p<=2203;p++)S[p]=0;for(p=2205;p<=2217;p++)S[p]=0;for(p=2222;p<=2224;p++)S[p]=1;for(p=2225;p<=2250;p++)S[p]=2;for(p=2251;p<=2253;p++)S[p]=1;for(p=2257;p<=2264;p++)S[p]=2;for(p=2274;p<=2279;p++)S[p]=2;for(p=2280;p<=2282;p++)S[p]=1;for(p=2283;p<=2289;p++)S[p]=2;for(p=2290;p<=2292;p++)S[p]=0;for(p=2308;p<=2313;p++)S[p]=0;for(p=2315;p<=2491;p++)S[p]=0;for(p=2494;p<=2866;p++)S[p]=0;for(p=2867;p<=2869;p++)S[p]=1;for(p=2870;p<=2888;p++)S[p]=2;for(p=2891;p<=2895;p++)S[p]=2;for(p=2896;p<=2898;p++)S[p]=1;for(p=2902;p<=2908;p++)S[p]=2;for(p=2915;p<=2920;p++)S[p]=2;for(p=2921;p<=2923;p++)S[p]=1;for(p=2924;p<=2930;p++)S[p]=2;for(p=2931;p<=2962;p++)S[p]=0;for(p=2964;p<=2968;p++)S[p]=2;for(p=2969;p<=2973;p++)S[p]=0;for(p=2975;p<=2991;p++)S[p]=0;for(p=2995;p<=3051;p++)S[p]=0;for(p=3054;p<=3079;p++)S[p]=0;for(p=3081;p<=3088;p++)S[p]=0;for(p=3092;p<=3101;p++)S[p]=0;for(p=3106;p<=3138;p++)S[p]=0;for(p=3146;p<=3151;p++)S[p]=0;for(p=3153;p<=3166;p++)S[p]=0;for(p=3168;p<=3172;p++)S[p]=0;for(p=3174;p<=3203;p++)S[p]=0;for(p=3294;p<=3358;p++)S[p]=0;for(p=3367;p<=3403;p++)S[p]=0;for(p=3408;p<=3416;p++)S[p]=0;for(p=3417;p<=3438;p++)S[p]=2;for(p=3441;p<=3446;p++)S[p]=2;for(p=3447;p<=3450;p++)S[p]=0;for(p=3451;p<=3459;p++)S[p]=2;for(p=3460;p<=3478;p++)S[p]=0;for(p=3554;p<=3559;p++)S[p]=0;for(p=3560;p<=3570;p++)S[p]=2;for(p=3571;p<=3581;p++)S[p]=0;for(p=3594;p<=3597;p++)S[p]=0;for(p=3601;p<=3604;p++)S[p]=0;for(p=3637;p<=3639;p++)S[p]=0;for(p=3665;p<=3667;p++)S[p]=0;for(p=3693;p<=3695;p++)S[p]=0;for(p=3701;p<=3727;p++)S[p]=0;for(p=3728;p<=3739;p++)S[p]=2;for(p=3740;p<=3751;p++)S[p]=0;for(p=3753;p<=3760;p++)S[p]=2;for(p=3761;p<=3773;p++)S[p]=0;for(p=3775;p<=3777;p++)S[p]=0;for(p=3779;p<=3781;p++)S[p]=0;for(p=3783;p<=3785;p++)S[p]=0;for(p=3788;p<=3791;p++)S[p]=0;for(p=3797;p<=3802;p++)S[p]=0;for(p=3814;p<=3816;p++)S[p]=0;for(p=3825;p<=3829;p++)S[p]=0;for(p=3832;p<=3841;p++)S[p]=0;for(p=3844;p<=3852;p++)S[p]=0;for(p=3873;p<=3885;p++)S[p]=0;for(p=3890;p<=3893;p++)S[p]=0;for(p=3907;p<=3912;p++)S[p]=0;for(p=3942;p<=3950;p++)S[p]=0;for(p=3968;p<=3970;p++)S[p]=0;for(p=3973;p<=3976;p++)S[p]=0;for(p=3986;p<=3989;p++)S[p]=0;for(p=3994;p<=3997;p++)S[p]=0;for(p=4048;p<=4051;p++)S[p]=0;for(p=4056;p<=4063;p++)S[p]=0;for(p=4093;p<=4096;p++)S[p]=0;for(p=4390;p<=4398;p++)S[p]=0;for(p=4399;p<=4413;p++)S[p]=2;for(p=4418;p<=4433;p++)S[p]=2;for(p=4455;p<=4457;p++)S[p]=2;for(p=4484;p<=4489;p++)S[p]=0;for(p=4491;p<=4554;p++)S[p]=0;for(p=4568;p<=4589;p++)S[p]=0;for(p=4652;p<=4656;p++)S[p]=0;for(p=4766;p<=4800;p++)S[p]=0;for(p=5014;p<=5016;p++)S[p]=0;for(p=5069;p<=5072;p++)S[p]=0;for(p=5105;p<=5130;p++)S[p]=0;for(p=5167;p<=5188;p++)S[p]=0;for(p=5253;p<=5259;p++)S[p]=0;for(p=5269;p<=5275;p++)S[p]=0;for(p=5292;p<=5311;p++)S[p]=0;for(p=5329;p<=5331;p++)S[p]=0;for(p=5343;p<=5349;p++)S[p]=0;for(p=5355;p<=5357;p++)S[p]=0;for(p=5387;p<=5389;p++)S[p]=0;for(p=5459;p<=5463;p++)S[p]=0;for(p=5479;p<=5482;p++)S[p]=0;for(p=5518;p<=5520;p++)S[p]=0;for(p=5530;p<=5539;p++)S[p]=0;for(p=5550;p<=5552;p++)S[p]=0;for(p=5562;p<=5583;p++)S[p]=0;for(p=5623;p<=5625;p++)S[p]=2;for(p=5631;p<=5639;p++)S[p]=0;for(p=5649;p<=5653;p++)S[p]=0;for(p=5663;p<=5680;p++)S[p]=0;for(p=5682;p<=5685;p++)S[p]=0;for(p=5875;p<=5877;p++)S[p]=0;for(p=5896;p<=5899;p++)S[p]=0;for(p=5921;p<=5940;p++)S[p]=0;for(p=6050;p<=6125;p++)S[p]=0;for(p=6244;p<=6275;p++)S[p]=0;for(p=6328;p<=6348;p++)S[p]=0;for(p=6350;p<=6356;p++)S[p]=0;for(p=6366;p<=6372;p++)S[p]=0;for(p=6381;p<=6387;p++)S[p]=0;for(p=6393;p<=6404;p++)S[p]=0;for(p=6480;p<=6483;p++)S[p]=0;for(p=6511;p<=6514;p++)S[p]=0;for(p=6579;p<=6581;p++)S[p]=0;for(p=6619;p<=6624;p++)S[p]=0;for(p=6625;p<=6627;p++)S[p]=2;for(p=6628;p<=6632;p++)S[p]=0;for(p=6634;p<=6637;p++)S[p]=0;for(p=6669;p<=6692;p++)S[p]=0;for(p=6707;p<=6709;p++)S[p]=0;for(p=6720;p<=6723;p++)S[p]=0;for(p=6732;p<=6738;p++)S[p]=0;for(p=6931;p<=6933;p++)S[p]=0;for(p=6956;p<=6959;p++)S[p]=0;for(p=7005;p<=7007;p++)S[p]=0;for(p=7057;p<=7070;p++)S[p]=2;for(p=7074;p<=7082;p++)S[p]=0;for(p=7109;p<=7118;p++)S[p]=0;for(p=7119;p<=7127;p++)S[p]=1;for(p=7374;p<=7376;p++)S[p]=0;for(p=7528;p<=7586;p++)S[p]=0;for(p=7587;p<=7645;p++)S[p]=2;for(p=7692;p<=7696;p++)S[p]=0;for(p=7755;p<=7787;p++)S[p]=0;for(p=7791;p<=7795;p++)S[p]=0;for(p=7799;p<=7801;p++)S[p]=0;for(p=7803;p<=7805;p++)S[p]=0;for(p=7825;p<=7831;p++)S[p]=0;for(p=7845;p<=7859;p++)S[p]=0;for(p=8013;p<=8032;p++)S[p]=0;for(p=8065;p<=8068;p++)S[p]=1;for(p=8518;p<=8529;p++)S[p]=2;for(p=8533;p<=8536;p++)S[p]=2;for(p=8538;p<=8540;p++)S[p]=2;for(p=8677;p<=8679;p++)S[p]=0;for(p=8836;p<=8840;p++)S[p]=0;for(p=8857;p<=8859;p++)S[p]=0;for(p=8908;p<=8910;p++)S[p]=0;for(p=9154;p<=9159;p++)S[p]=0;for(p=9205;p<=9218;p++)S[p]=0;for(p=9271;p<=9273;p++)S[p]=0;for(p=9295;p<=9297;p++)S[p]=0;for(p=9356;p<=9360;p++)S[p]=0;for(p=9404;p<=9407;p++)S[p]=0;for(p=9476;p<=9482;p++)S[p]=0;for(p=9487;p<=9494;p++)S[p]=0;for(p=9697;p<=9699;p++)S[p]=0;for(p=9821;p<=9865;p++)S[p]=0;for(p=10285;p<=10291;p++)S[p]=0;for(p=10314;p<=10317;p++)S[p]=0;for(p=10448;p<=10465;p++)S[p]=0;for(p=10731;p<=10733;p++)S[p]=0;for(p=11114;p<=11118;p++)S[p]=0;for(p=20004;p<=20032;p++)S[p]=0;for(p=20047;p<=20049;p++)S[p]=0;for(p=20062;p<=20092;p++)S[p]=0;for(p=20135;p<=20138;p++)S[p]=0;for(p=20248;p<=20258;p++)S[p]=0;for(p=20348;p<=20358;p++)S[p]=0;for(p=20436;p<=20440;p++)S[p]=0;for(p=20822;p<=20824;p++)S[p]=0;for(p=20904;p<=20932;p++)S[p]=0;for(p=20934;p<=20936;p++)S[p]=0;for(p=21004;p<=21032;p++)S[p]=0;for(p=21035;p<=21037;p++)S[p]=0;for(p=21095;p<=21097;p++)S[p]=0;for(p=21148;p<=21150;p++)S[p]=0;for(p=21207;p<=21264;p++)S[p]=0;for(p=21307;p<=21364;p++)S[p]=0;for(p=21413;p<=21423;p++)S[p]=0;for(p=21453;p<=21463;p++)S[p]=0;for(p=21473;p<=21483;p++)S[p]=0;for(p=21780;p<=21782;p++)S[p]=0;for(p=21891;p<=21894;p++)S[p]=0;for(p=21896;p<=21899;p++)S[p]=0;for(p=22171;p<=22177;p++)S[p]=0;for(p=22181;p<=22187;p++)S[p]=0;for(p=22191;p<=22197;p++)S[p]=0;for(p=22207;p<=22222;p++)S[p]=0;for(p=22229;p<=22232;p++)S[p]=0;for(p=22234;p<=22236;p++)S[p]=0;for(p=22243;p<=22250;p++)S[p]=0;for(p=22262;p<=22265;p++)S[p]=0;for(p=22307;p<=22322;p++)S[p]=0;for(p=22348;p<=22357;p++)S[p]=0;for(p=22407;p<=22422;p++)S[p]=0;for(p=22462;p<=22465;p++)S[p]=0;for(p=22521;p<=22525;p++)S[p]=0;for(p=22607;p<=22622;p++)S[p]=0;for(p=22641;p<=22646;p++)S[p]=0;for(p=22648;p<=22657;p++)S[p]=0;for(p=22707;p<=22722;p++)S[p]=0;for(p=22762;p<=22765;p++)S[p]=0;for(p=22807;p<=22822;p++)S[p]=0;for(p=22991;p<=22994;p++)S[p]=0;for(p=23028;p<=23038;p++)S[p]=0;for(p=23301;p<=23333;p++)S[p]=2;for(p=23830;p<=23853;p++)S[p]=0;for(p=23866;p<=23872;p++)S[p]=0;for(p=23877;p<=23884;p++)S[p]=0;for(p=23886;p<=23894;p++)S[p]=0;for(p=23946;p<=23948;p++)S[p]=0;for(p=24311;p<=24313;p++)S[p]=0;for(p=24342;p<=24347;p++)S[p]=0;for(p=24370;p<=24374;p++)S[p]=10;for(p=24375;p<=24381;p++)S[p]=0;for(p=24718;p<=24721;p++)S[p]=0;for(p=24817;p<=24821;p++)S[p]=0;for(p=24877;p<=24882;p++)S[p]=0;for(p=24891;p<=24893;p++)S[p]=0;for(p=25391;p<=25395;p++)S[p]=0;for(p=25828;p<=25838;p++)S[p]=0;for(p=26191;p<=26195;p++)S[p]=0;for(p=26391;p<=26393;p++)S[p]=0;for(p=26701;p<=26722;p++)S[p]=0;for(p=26729;p<=26799;p++)S[p]=2;for(p=26801;p<=26803;p++)S[p]=2;for(p=26811;p<=26813;p++)S[p]=2;for(p=26847;p<=26870;p++)S[p]=2;for(p=26891;p<=26899;p++)S[p]=0;for(p=26901;p<=26923;p++)S[p]=0;for(p=26929;p<=26946;p++)S[p]=0;for(p=26948;p<=26998;p++)S[p]=0;for(p=27037;p<=27040;p++)S[p]=0;for(p=27205;p<=27232;p++)S[p]=0;for(p=27258;p<=27260;p++)S[p]=0;for(p=27391;p<=27398;p++)S[p]=0;for(p=27561;p<=27564;p++)S[p]=0;for(p=27571;p<=27574;p++)S[p]=0;for(p=27581;p<=27584;p++)S[p]=0;for(p=27591;p<=27594;p++)S[p]=0;for(p=27700;p<=27707;p++)S[p]=0;for(p=28191;p<=28193;p++)S[p]=0;for(p=28348;p<=28358;p++)S[p]=0;for(p=28402;p<=28432;p++)S[p]=0;for(p=28462;p<=28492;p++)S[p]=0;for(p=29118;p<=29122;p++)S[p]=0;for(p=29168;p<=29172;p++)S[p]=0;for(p=29177;p<=29185;p++)S[p]=0;for(p=29187;p<=29195;p++)S[p]=0;for(p=29900;p<=29903;p++)S[p]=0;for(p=30161;p<=30179;p++)S[p]=0;for(p=30491;p<=30494;p++)S[p]=0;for(p=30729;p<=30732;p++)S[p]=0;for(p=31251;p<=31259;p++)S[p]=0;for(p=31265;p<=31268;p++)S[p]=0;for(p=31275;p<=31279;p++)S[p]=0;for(p=31281;p<=31297;p++)S[p]=0;for(p=31461;p<=31469;p++)S[p]=0;for(p=31491;p<=31495;p++)S[p]=0;for(p=31917;p<=31922;p++)S[p]=0;for(p=31965;p<=32e3;p++)S[p]=0;for(p=32001;p<=32003;p++)S[p]=2;for(p=32005;p<=32031;p++)S[p]=2;for(p=32033;p<=32060;p++)S[p]=2;for(p=32064;p<=32067;p++)S[p]=2;for(p=32074;p<=32077;p++)S[p]=2;for(p=32081;p<=32086;p++)S[p]=0;for(p=32107;p<=32130;p++)S[p]=0;for(p=32133;p<=32159;p++)S[p]=0;for(p=32164;p<=32167;p++)S[p]=2;for(p=32180;p<=32199;p++)S[p]=0;for(p=32201;p<=32260;p++)S[p]=0;for(p=32301;p<=32360;p++)S[p]=0;for(p=32401;p<=32460;p++)S[p]=0;for(p=32501;p<=32560;p++)S[p]=0;for(p=32601;p<=32662;p++)S[p]=0;for(p=32664;p<=32667;p++)S[p]=2;for(p=32701;p<=32761;p++)S[p]=0;for(p=53001;p<=53004;p++)S[p]=0;for(p=53008;p<=53019;p++)S[p]=0;for(p=53021;p<=53032;p++)S[p]=0;for(p=53034;p<=53037;p++)S[p]=0;for(p=53042;p<=53046;p++)S[p]=0;for(p=53074;p<=53080;p++)S[p]=0;for(p=54001;p<=54004;p++)S[p]=0;for(p=54008;p<=54019;p++)S[p]=0;for(p=54021;p<=54032;p++)S[p]=0;for(p=54034;p<=54037;p++)S[p]=0;for(p=54042;p<=54046;p++)S[p]=0;for(p=54048;p<=54053;p++)S[p]=0;for(p=54074;p<=54080;p++)S[p]=0;for(p=54098;p<=54101;p++)S[p]=0;for(p=102001;p<=102040;p++)S[p]=0;for(p=102042;p<=102063;p++)S[p]=0;for(p=102065;p<=102067;p++)S[p]=0;for(p=102070;p<=102117;p++)S[p]=0;for(p=102122;p<=102216;p++)S[p]=0;for(p=102221;p<=102377;p++)S[p]=0;for(p=102382;p<=102388;p++)S[p]=0;for(p=102389;p<=102398;p++)S[p]=2;for(p=102399;p<=102444;p++)S[p]=0;for(p=102445;p<=102447;p++)S[p]=2;for(p=102448;p<=102458;p++)S[p]=0;for(p=102459;p<=102468;p++)S[p]=2;for(p=102469;p<=102499;p++)S[p]=0;for(p=102500;p<=102519;p++)S[p]=1;for(p=102520;p<=102524;p++)S[p]=0;for(p=102525;p<=102529;p++)S[p]=2;for(p=102530;p<=102588;p++)S[p]=0;for(p=102590;p<=102598;p++)S[p]=0;for(p=102601;p<=102603;p++)S[p]=0;for(p=102605;p<=102628;p++)S[p]=0;for(p=102629;p<=102646;p++)S[p]=2;for(p=102648;p<=102700;p++)S[p]=2;for(p=102701;p<=102703;p++)S[p]=0;for(p=102707;p<=102730;p++)S[p]=2;for(p=102733;p<=102758;p++)S[p]=2;for(p=102767;p<=102900;p++)S[p]=0;for(p=102901;p<=102933;p++)S[p]=2;for(p=102934;p<=102950;p++)S[p]=13;for(p=102951;p<=102963;p++)S[p]=0;for(p=102965;p<=102969;p++)S[p]=0;for(p=102971;p<=102973;p++)S[p]=0;for(p=102975;p<=102989;p++)S[p]=0;for(p=102990;p<=102992;p++)S[p]=1;for(p=102997;p<=103002;p++)S[p]=0;for(p=103003;p<=103008;p++)S[p]=2;for(p=103009;p<=103011;p++)S[p]=0;for(p=103012;p<=103014;p++)S[p]=2;for(p=103019;p<=103021;p++)S[p]=0;for(p=103022;p<=103024;p++)S[p]=2;for(p=103029;p<=103031;p++)S[p]=0;for(p=103032;p<=103034;p++)S[p]=2;for(p=103065;p<=103068;p++)S[p]=0;for(p=103074;p<=103076;p++)S[p]=0;for(p=103077;p<=103079;p++)S[p]=1;for(p=103080;p<=103082;p++)S[p]=0;for(p=103083;p<=103085;p++)S[p]=2;for(p=103090;p<=103093;p++)S[p]=0;for(p=103097;p<=103099;p++)S[p]=0;for(p=103100;p<=103102;p++)S[p]=2;for(p=103107;p<=103109;p++)S[p]=0;for(p=103110;p<=103112;p++)S[p]=2;for(p=103113;p<=103116;p++)S[p]=0;for(p=103117;p<=103120;p++)S[p]=2;for(p=103153;p<=103157;p++)S[p]=0;for(p=103158;p<=103162;p++)S[p]=2;for(p=103163;p<=103165;p++)S[p]=0;for(p=103166;p<=103168;p++)S[p]=1;for(p=103169;p<=103171;p++)S[p]=2;for(p=103186;p<=103188;p++)S[p]=0;for(p=103189;p<=103191;p++)S[p]=2;for(p=103192;p<=103195;p++)S[p]=0;for(p=103196;p<=103199;p++)S[p]=2;for(p=103200;p<=103224;p++)S[p]=0;for(p=103225;p<=103227;p++)S[p]=1;for(p=103232;p<=103237;p++)S[p]=0;for(p=103238;p<=103243;p++)S[p]=2;for(p=103244;p<=103246;p++)S[p]=0;for(p=103247;p<=103249;p++)S[p]=2;for(p=103254;p<=103256;p++)S[p]=0;for(p=103257;p<=103259;p++)S[p]=2;for(p=103264;p<=103266;p++)S[p]=0;for(p=103267;p<=103269;p++)S[p]=2;for(p=103300;p<=103375;p++)S[p]=0;for(p=103381;p<=103383;p++)S[p]=0;for(p=103384;p<=103386;p++)S[p]=1;for(p=103387;p<=103389;p++)S[p]=0;for(p=103390;p<=103392;p++)S[p]=2;for(p=103397;p<=103399;p++)S[p]=0;for(p=103400;p<=103471;p++)S[p]=2;for(p=103476;p<=103478;p++)S[p]=0;for(p=103479;p<=103481;p++)S[p]=2;for(p=103486;p<=103488;p++)S[p]=0;for(p=103489;p<=103491;p++)S[p]=2;for(p=103492;p<=103495;p++)S[p]=0;for(p=103496;p<=103499;p++)S[p]=2;for(p=103528;p<=103543;p++)S[p]=0;for(p=103544;p<=103548;p++)S[p]=2;for(p=103549;p<=103551;p++)S[p]=0;for(p=103552;p<=103554;p++)S[p]=1;for(p=103555;p<=103557;p++)S[p]=2;for(p=103558;p<=103560;p++)S[p]=0;for(p=103571;p<=103573;p++)S[p]=0;for(p=103574;p<=103576;p++)S[p]=2;for(p=103577;p<=103580;p++)S[p]=0;for(p=103581;p<=103583;p++)S[p]=2;for(p=103595;p<=103694;p++)S[p]=0;for(p=103696;p<=103699;p++)S[p]=0;for(p=103700;p<=103793;p++)S[p]=2;for(p=103794;p<=103890;p++)S[p]=0;for(p=103891;p<=103896;p++)S[p]=2;for(p=103900;p<=103971;p++)S[p]=2;for(p=103972;p<=103977;p++)S[p]=0;for(p=112e3;p<=112101;p++)S[p]=0;const x7=[102100,102113,3857,3785,900913],Xoe=[104905,104971],eae=[4326,...x7,...Xoe],z0=[-20037508342788905e-9,20037508342788905e-9],AM=[-20037508342787e-6,20037508342787e-6],$T={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:z0,origin:AM,dx:1e-5},E7={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:z0,origin:AM,dx:1e-5},102100:$T,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:z0,origin:AM,dx:1e-5},3857:$T,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:$T};function Ht(e,t){if(e===t)return!0;if(e==null||t==null)return!1;const r=e.wkid,i=t.wkid;if(r!=null||i!=null){if(r===i||Zo(e)&&Zo(t))return!0;const o=e.latestWkid;if(o!=null&&i===o)return!0;const a=t.latestWkid;return a!=null&&r===a}let n,s;return e.wkt2&&t.wkt2?(n=e.wkt2,s=t.wkt2):e.wkt&&t.wkt&&(n=e.wkt,s=t.wkt),!(!n||!s)&&n.toUpperCase()===s.toUpperCase()}function bi(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&E7[t]||null}function vS(e){if(!e)return;const{wkid:t,vcsWkid:r}=e;if(t)return r?JSON.stringify({wkid:t,vcsWkid:r}):String(t);const i=e.wkt||e.wkt2;return JSON.stringify(i?r?{wkt:i,vcsWkid:r}:{wkt:i}:{})}function N2(e){if(!hn(e))return!1;const{wkid:t}=e;if(t)return S[t]==null;const r=e.wkt2||e.wkt;return!!r&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(r)}function tae(e){return!(M7(e)||I7(e))}function np(e){return(e==null?void 0:e.wkid)===4326}function wke(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function KL(e){return(e==null?void 0:e.wkid)===ip.CGCS2000}function Zo(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&x7.includes(t)}function rae(e){return(e==null?void 0:e.wkid)===32662}function L2(e){return e===ip.GCSMARS2000||e===ip.GCSMARS2000_SPHERE}function M7(e){return L2(e==null?void 0:e.wkid)}function F2(e){return e===ip.GCSMOON2000}function I7(e){return F2(e==null?void 0:e.wkid)}function iae(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&eae.includes(t)}function hn(e){if(e==null)return!1;const t=e.wkid;return t!=null&&t>=2e3||e.wkt2!=null||e.wkt!=null}const C7={wkid:4326,wkt:T2(E7[4326].wkTemplate,{Central_Meridian:"0.0"})},A7={wkid:102100,latestWkid:3857},nae={wkid:32662};function wO(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const sae=wO(kt),_O=wO(Bo),bO=wO(Ku),oae={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${kt.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},aae=_O.wkt.toUpperCase(),lae=bO.wkt.toUpperCase();function uae(e){if(e!=null&&hn(e)){const t=e.wkid,r=e.wkt2??e.wkt;if(L2(t))return Bo;const i=r==null?void 0:r.toUpperCase();if(r&&i===aae)return Bo;if(F2(t)||i&&i===lae)return Ku}return kt}function _ke(e){return L2(e)?Bo:F2(e)?Ku:kt}function wS(e){return Ht(e,sae)}function Yu(e){return wS(e)||Ht(e,_O)||Ht(e,bO)}const R7=39.37,cae=kt.radius*Math.PI/200,O7=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,zd=S,k7=/UNIT\[([^\]]+)]/i,dae=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),pae=mr()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain:"chains",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),oo=e=>e*e,Tl=e=>e*e*e,G0={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937},"clarke-feet":{inBaseUnits:.3047972654},"clarke-yards":{inBaseUnits:.9143917962},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"gold-coast-feet":{inBaseUnits:.3047997101815088},chains:{inBaseUnits:20.1168},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:oo(.001)},"square-centimeters":{inBaseUnits:oo(.01)},"square-decimeters":{inBaseUnits:oo(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:oo(1e3)},"square-inches":{inBaseUnits:oo(.0254)},"square-feet":{inBaseUnits:oo(.3048)},"square-yards":{inBaseUnits:oo(.9144)},"square-miles":{inBaseUnits:oo(1609.344)},"square-us-feet":{inBaseUnits:oo(1200/3937)},acres:{inBaseUnits:.0015625*oo(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Tl(.001)},"cubic-centimeters":{inBaseUnits:1e3*Tl(.01)},"cubic-decimeters":{inBaseUnits:1e3*Tl(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Tl(1e3)},"cubic-inches":{inBaseUnits:1e3*Tl(.0254)},"cubic-feet":{inBaseUnits:1e3*Tl(.3048)},"cubic-yards":{inBaseUnits:1e3*Tl(.9144)},"cubic-miles":{inBaseUnits:1e3*Tl(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},hae=(()=>{const e={};for(const t in G0)for(const r in G0[t].units)e[r]=t;return e})();function fae(e,t,r){return e*G0[r].units[t].inBaseUnits}function mae(e,t,r){return e/G0[r].units[t].inBaseUnits}const P7=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],yae=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function RM(e){const t=hae[e];if(!t)throw new Error("unknown type");return t}function YL(e,t=null){return t=t||RM(e),G0[t].baseUnit===e}function Tr(e,t,r){if(t===r)return e;const i=RM(t);if(i!==RM(r))throw new Error("incompatible units");const n=YL(t,i)?e:fae(e,t,i);return YL(r,i)?n:mae(n,r,i)}function gae(e){switch(e){case"metric":return"meters";case"imperial":return"feet";default:return e}}function bke(e){return gae(e)}function Ske(e){switch(e){case"metric":return"square-meters";case"imperial":return"square-feet";default:return e}}function $ke(e,t){const r=Tr(e,t,"meters");return Math.abs(r)<3e3?"meters":"kilometers"}function Tke(e,t){const r=Tr(e,t,"meters");return Math.abs(r)<1e5?"meters":"kilometers"}function xke(e,t){const r=Tr(e,t,"feet");return Math.abs(r)<1e3?"feet":"miles"}function Eke(e,t){const r=Tr(e,t,"feet");return Math.abs(r)<1e5?"feet":"miles"}function Mke(e,t){const r=Tr(e,t,"square-meters");return Math.abs(r)<3e6?"square-meters":"square-kilometers"}function Ike(e,t){const r=Tr(e,t,"square-feet");return Math.abs(r)<1e6?"square-feet":"square-miles"}function vae(e,t,r){return Tr(e,t,"meters")/(r*Math.PI/180)}function N7(e){return pae.fromJSON(e.toLowerCase())||null}function _S(e){if(e!=null&&!tae(e))return 1;const t=io(e);return t>1e5?1:t}function L7(e){return io(e)>=uae(e).metersPerDegree?"meters":Iv(e)}function io(e,t=kt.metersPerDegree){return wae(e,!0)??t}function wae(e,t=!1){const r=(e==null?void 0:e.wkid)??null,i=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let n=null;if(r){if(L2(r))return Bo.metersPerDegree;if(F2(r))return Ku.metersPerDegree;n=zd.values[zd[r]],!n&&t&&dae.has(r)&&(n=cae)}else i&&(j7(i)?n=QL(O7.exec(i),n):D7(i)&&(n=QL(k7.exec(i),n)));return n}function Cke(e){return N2(e)?1:io(e)}function QL(e,t){return e!=null&&e[1]?F7(e[1]):t}function F7(e){return parseFloat(e.split(",")[1])}function Iv(e){const t=(e==null?void 0:e.wkid)??null,r=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let i=null;if(t)i=zd.units[zd[t]];else if(r){const n=j7(r)?O7:D7(r)?k7:null;if(n){const s=n.exec(r);s!=null&&s[1]&&(i=bae(s[1]))}}return i!=null?N7(i):null}function Ake(e){const t=Iv(e);return t!=null&&P7.includes(t)?t:null}function Rke(e){const t=L7(e);return t!=null&&P7.includes(t)?t:null}function Oke(e){const t=Iv(e);return t==null?null:yae.get(t)}function D7(e){return/^GEOCCS/i.test(e)}function j7(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const _ae=1e-7;function bae(e){const t=/[\\"']{1}([^\\"']+)/.exec(e);let r=t==null?void 0:t[1];if(!r||!zd.units.includes(r)){const i=F7(e);r=null;const n=zd.values;for(let s=0;s<n.length;++s)if(Math.abs(i-n[s])<_ae){r=zd.units[s];break}}return r}function kke(e){const t=Iv(e);if(t==null)return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"chains":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}const Sae={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},$ae={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},Tae={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},xae=mr()(Sae),Eae=mr()($ae),Pke=mr()(Tae);function B(e,t,r){let i,n;return t===void 0?(n=e,i=[void 0]):typeof t!="string"?(n=e,i=[void 0],r=t):(n=t,i=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;for(const u of i){const d=fz(s,u,n);d.write&&typeof d.write=="object"||(d.write={}),r&&(d.write.target=r),d.write.writer=a[o]}}}var co;let Ye=co=class extends N{static fromJSON(e){if(!e)return null;if((e==null?void 0:e.wkid)===102100)return co.WebMercator;if((e==null?void 0:e.wkid)===4326)return co.WGS84;const t=new co;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return np(this)}get isWebMercator(){return Zo(this)}get isGeographic(){return N2(this)}get isWrappable(){return iae(this)}get metersPerUnit(){return io(this)}get unit(){return Iv(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===co.WGS84)return new co(C7);if(this===co.WebMercator)return new co(A7);const e=new co;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=C(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:i}=e.imageCoordinateSystem,n=this.imageCoordinateSystem;return t==null||i?JSON.stringify(n)===JSON.stringify(e.imageCoordinateSystem):r?n.id===t&&n.referenceServiceName===r:n.id===t}return Ht(this,e)}toJSON(e){return this.write(void 0,e)}};Ye.GCS_NAD_1927=null,Ye.WGS84=null,Ye.WebMercator=null,Ye.PlateCarree=null,l([c({readOnly:!0})],Ye.prototype,"isWGS84",null),l([c({readOnly:!0})],Ye.prototype,"isWebMercator",null),l([c({readOnly:!0})],Ye.prototype,"isGeographic",null),l([c({readOnly:!0})],Ye.prototype,"isWrappable",null),l([c({type:ke,json:{write:!0}})],Ye.prototype,"latestWkid",void 0),l([c({readOnly:!0})],Ye.prototype,"metersPerUnit",null),l([c({readOnly:!0})],Ye.prototype,"unit",null),l([c({type:ke,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Ye.prototype,"wkid",void 0),l([c({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Ye.prototype,"wkt",void 0),l([B("wkt"),B("web-scene","wkt")],Ye.prototype,"writeWkt",null),l([c({type:String,json:{write:!1}})],Ye.prototype,"wkt2",void 0),l([c({type:ke,json:{write:!0}})],Ye.prototype,"vcsWkid",void 0),l([c({type:ke,json:{write:!0}})],Ye.prototype,"latestVcsWkid",void 0),l([c()],Ye.prototype,"imageCoordinateSystem",void 0),Ye=co=l([$("esri.geometry.SpatialReference")],Ye),Ye.prototype.toJSON.isDefaultToJSON=!0,Ye.GCS_NAD_1927=te.freeze(new Ye({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),Ye.WGS84=te.freeze(new Ye(C7)),Ye.WebMercator=te.freeze(new Ye(A7)),Ye.PlateCarree=te.freeze(new Ye(nae));const me=Ye;let po=class extends N{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=me.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,r){if(t instanceof me)return t;if(t!=null){const i=new me;return i.read(t,r),i}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,r){this.cache[t]=r}};l([c()],po.prototype,"type",void 0),l([c({readOnly:!0})],po.prototype,"cache",null),l([c({readOnly:!0})],po.prototype,"extent",null),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],po.prototype,"hasM",void 0),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],po.prototype,"hasZ",void 0),l([c({type:me,json:{write:!0},value:me.WGS84})],po.prototype,"spatialReference",void 0),l([G("spatialReference")],po.prototype,"readSpatialReference",null),po=l([$("esri.geometry.Geometry")],po);const yl=po,Mae=Object.prototype.toString;function Iae(e){const t="__accessorMetadata__"in e?bt(e):e;return function(...r){if(r.push(t),typeof r[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return Cae.apply(this,r)}}function Cae(e,t,r,i){I2(e,t).cast=i}function Aae(e){return(t,r)=>{I2(t,e).cast=t[r]}}function Ne(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&Mae.call(e[0])==="[object Function]"?Iae(e[0]):e.length===1&&typeof e[0]=="string"?Aae(e[0]):void 0}const Rae=57.29577951308232,Oae=.017453292519943;function XL(e){return e*Rae}function e4(e){return e*Oae}function Lke(e){return Math.PI/2-2*Math.atan(Math.exp(-e/kt.radius))}function OM(e){return e.wkid!=null||e.wkt!=null}const TT=[0,0];function bS(e,t,r,i,n){const s=e,o=n;if(o.spatialReference=r,"x"in s&&"x"in o)[o.x,o.y]=t(s.x,s.y,TT,i);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=t(s.xmin,s.ymin,TT,i),[o.xmax,o.ymax]=t(s.xmax,s.ymax,TT,i);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,u=[];let d;for(let h=0;h<a.length;h++){const f=a[h];d=[],u.push(d);for(let m=0;m<f.length;m++)d.push(t(f[m][0],f[m][1],[0,0],i)),f[m].length>2&&d[m].push(f[m][2]),f[m].length>3&&d[m].push(f[m][3])}"paths"in o?o.paths=u:o.rings=u}else if("points"in s&&"points"in o){const a=s.points,u=[];for(let d=0;d<a.length;d++)u[d]=t(a[d][0],a[d][1],[0,0],i),a[d].length>2&&u[d].push(a[d][2]),a[d].length>3&&u[d].push(a[d][3]);o.points=u}return n}function Bw(e,t){const r=e&&(OM(e)?e:e.spatialReference),i=t&&(OM(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!r||!i)&&(!!Ht(i,r)||Zo(i)&&np(r)||Zo(r)&&np(i))}function D2(e,t){if(e==null)return null;const r=e.spatialReference,i=t&&(OM(t)?t:t.spatialReference);return Bw(r,i)?Ht(r,i)?C(e):Zo(i)?bS(e,lf,me.WebMercator,!1,C(e)):np(i)?bS(e,j2,me.WGS84,!1,C(e)):null:null}function lf(e,t,r=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const i=e4(t);return r[0]=e4(e)*kt.radius,r[1]=kt.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),r}function j2(e,t,r=[0,0],i=!1){if(e===z0[0])r[0]=-180;else if(e===z0[1])r[0]=180;else{const n=XL(e/kt.radius);r[0]=i?n:n-360*Math.floor((n+180)/360)}return r[1]=XL(Math.PI/2-2*Math.atan(Math.exp(-t/kt.radius))),r}function il(e,t=!1,r=C(e)){return bS(e,lf,me.WebMercator,t,r)}function uf(e,t=!1,r=C(e)){return bS(e,j2,me.WGS84,t,r)}function V7(e,t){const r=e.x-t.x,i=e.y-t.y,n=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(r*r+i*i+n*n)}function kae(e){var t;return((t=U7(e,z7))==null?void 0:t[0])??null}function Pae(e){var t;return((t=U7(e,z7))==null?void 0:t[1])??null}function U7({x:e,y:t,spatialReference:r},i=[0,0]){if(r){if(Zo(r))return j2(e,t,i);if(N2(r))return i[0]=e,i[1]=t,i}return null}const z7=[0,0];var qw;const xT=[0,0];function t4(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let hi=qw=class extends yl{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const r=e._get("spatialReference");t._set("spatialReference",te.isFrozen(r)?r:r.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,r,i,n){let s;if(Array.isArray(e))s=e,n=t,e=s[0],t=s[1],r=s[2],i=s[3];else if(e&&typeof e=="object"){if(s=e,e=s.x!=null?s.x:s.longitude,t=s.y!=null?s.y:s.latitude,r=s.z,i=s.m,(n=s.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new me(n)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)j.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)j.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&(n!=null&&n.isWebMercator)){const a=lf(s.longitude,s.latitude,xT);e=a[0],t=a[1]}}}else t4(r)?(n=r,r=null):t4(i)&&(n=i,i=null);const o={x:e,y:t};return o.x==null&&o.y!=null?j.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&j.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(o.spatialReference=n),r!=null&&(o.z=r),i!=null&&(o.m=i),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return Pae(this)}set latitude(e){const{spatialReference:t,x:r}=this;e!=null&&t&&(t.isWebMercator?this._set("y",lf(r,e,xT)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return kae(this)}set longitude(e){const{y:t,spatialReference:r}=this;e!=null&&r&&(r.isWebMercator?this._set("x",lf(e,t,xT)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new qw;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return qw.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:r,z:i,m:n,spatialReference:s}=this,{z:o,m:a}=e;let{x:u,y:d,spatialReference:h}=e;if(!s.equals(h))if(s.isWebMercator&&h.isWGS84)[u,d]=lf(u,d),h=s;else{if(!s.isWGS84||!h.isWebMercator)return!1;[u,d]=j2(u,d),h=s}return t===u&&r===d&&i===o&&n===a&&s.wkid===h.wkid}offset(e,t,r){return this.x+=e,this.y+=t,r!=null&&(this.z=(this.z??0)+r),this}normalize(){if(!this.spatialReference)return this;const e=bi(this.spatialReference);if(!e)return this;let t=this.x;const[r,i]=e.valid,n=2*i;let s;return t>i?(s=Math.ceil(Math.abs(t-i)/n),t-=s*n):t<r&&(s=Math.ceil(Math.abs(t-r)/n),t+=s*n),this._set("x",t),this}distance(e){return V7(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};l([c({readOnly:!0})],hi.prototype,"cache",null),l([c({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],hi.prototype,"hasM",null),l([c({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],hi.prototype,"hasZ",null),l([c({type:Number})],hi.prototype,"latitude",null),l([c({type:Number})],hi.prototype,"longitude",null),l([c({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Ne(e=>isNaN(e)?e:vi(e))],hi.prototype,"x",void 0),l([B("x")],hi.prototype,"writeX",null),l([G("x")],hi.prototype,"readX",null),l([c({type:Number,json:{write:!0}})],hi.prototype,"y",void 0),l([c({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],hi.prototype,"z",void 0),l([c({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],hi.prototype,"m",void 0),hi=qw=l([$("esri.geometry.Point")],hi),hi.prototype.toJSON.isDefaultToJSON=!0;const ge=hi,ET=[0,0];function Cv(e,t){return t!=null&&yi(e,t.x,t.y,t.z)}function Fke(e,t){if(!t.points||t.points.length)return!1;for(const r of t.points)if(!rm(e,r))return!1;return!0}function Nae(e,t){const{xmin:r,ymin:i,zmin:n,xmax:s,ymax:o,zmax:a}=t;return e.hasZ&&t.hasZ?yi(e,r,i,n)&&yi(e,r,o,n)&&yi(e,s,o,n)&&yi(e,s,i,n)&&yi(e,r,i,a)&&yi(e,r,o,a)&&yi(e,s,o,a)&&yi(e,s,i,a):yi(e,r,i)&&yi(e,r,o)&&yi(e,s,o)&&yi(e,s,i)}function rm(e,t){return yi(e,t[0],t[1])}function Lae(e,t){return yi(e,t[0],t[1],t[2])}function yi(e,t,r,i){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax&&(i==null||!e.hasZ||i>=e.zmin&&i<=e.zmax)}function SO(e,t){return ET[1]=t.y,ET[0]=t.x,Fae(e,ET)}function Fae(e,t){return $O(e.rings,t)}function $O(e,t){if(!e)return!1;if(Dae(e))return r4(!1,e,t);let r=!1;for(let i=0,n=e.length;i<n;i++)r=r4(r,e[i],t);return r}function Dae(e){return!Array.isArray(e[0][0])}function r4(e,t,r){const[i,n]=r;let s=e,o=0;for(let a=0,u=t.length;a<u;a++){o++,o===u&&(o=0);const[d,h]=t[a],[f,m]=t[o];(h<n&&m>=n||m<n&&h>=n)&&d+(n-h)/(m-h)*(f-d)<i&&(s=!s)}return s}function jae(e,t){return Cv(e,t)}function Vae(e,t){const r=e.hasZ&&t.hasZ;let i,n,s;if(e.xmin<=t.xmin){if(i=t.xmin,e.xmax<i)return!1}else if(i=e.xmin,t.xmax<i)return!1;if(e.ymin<=t.ymin){if(n=t.ymin,e.ymax<n)return!1}else if(n=e.ymin,t.ymax<n)return!1;if(r&&t.hasZ){if(e.zmin<=t.zmin){if(s=t.zmin,e.zmax<s)return!1}else if(s=e.zmin,t.zmax<s)return!1}return!0}function Uae(e,t){const{points:r,hasZ:i}=t,n=i?Lae:rm;for(const s of r)if(n(e,s))return!0;return!1}const sp=[0,0],op=[0,0],ap=[0,0],lp=[0,0],zae=[sp,op,ap,lp],G7=[[ap,sp],[sp,op],[op,lp],[lp,ap]];function Gae(e,t){return Bae(e,t.rings)}function Bae(e,t){sp[0]=e.xmin,sp[1]=e.ymax,op[0]=e.xmax,op[1]=e.ymax,ap[0]=e.xmin,ap[1]=e.ymin,lp[0]=e.xmax,lp[1]=e.ymin;for(const r of zae)if($O(t,r))return!0;for(const r of t){if(!r.length)continue;let i=r[0];if(rm(e,i))return!0;for(let n=1;n<r.length;n++){const s=r[n];if(rm(e,s)||B7(i,s,G7))return!0;i=s}}return!1}function qae(e,t){sp[0]=e.xmin,sp[1]=e.ymax,op[0]=e.xmax,op[1]=e.ymax,ap[0]=e.xmin,ap[1]=e.ymin,lp[0]=e.xmax,lp[1]=e.ymin;const r=t.paths;for(const i of r){if(!r.length)continue;let n=i[0];if(rm(e,n))return!0;for(let s=1;s<i.length;s++){const o=i[s];if(rm(e,o)||B7(n,o,G7))return!0;n=o}}return!1}const wr=[0,0];function Hae(e){for(let t=0;t<e.length;t++){const r=e[t];for(let n=0;n<r.length-1;n++){const s=r[n],o=r[n+1];for(let a=t+1;a<e.length;a++)for(let u=0;u<e[a].length-1;u++){const d=e[a][u],h=e[a][u+1];if(kM(s,o,d,h,wr)&&!(wr[0]===s[0]&&wr[1]===s[1]||wr[0]===d[0]&&wr[1]===d[1]||wr[0]===o[0]&&wr[1]===o[1]||wr[0]===h[0]&&wr[1]===h[1]))return!0}}const i=r.length;if(!(i<=4))for(let n=0;n<i-3;n++){let s=i-1;n===0&&(s=i-2);const o=r[n],a=r[n+1];for(let u=n+2;u<s;u++){const d=r[u],h=r[u+1];if(kM(o,a,d,h,wr)&&!(wr[0]===o[0]&&wr[1]===o[1]||wr[0]===d[0]&&wr[1]===d[1]||wr[0]===a[0]&&wr[1]===a[1]||wr[0]===h[0]&&wr[1]===h[1]))return!0}}}return!1}function B7(e,t,r){for(let i=0;i<r.length;i++)if(kM(e,t,r[i][0],r[i][1]))return!0;return!1}function kM(e,t,r,i,n){const[s,o]=e,[a,u]=t,[d,h]=r,[f,m]=i,y=f-d,g=s-d,v=a-s,_=m-h,w=o-h,b=u-o,T=_*v-y*b;if(T===0)return!1;const x=(y*w-_*g)/T,M=(v*w-b*g)/T;return x>=0&&x<=1&&M>=0&&M<=1&&(n&&(n[0]=s+x*(a-s),n[1]=o+x*(u-o)),!0)}function Wae(e){switch(e){case"esriGeometryEnvelope":case"extent":return Vae;case"esriGeometryMultipoint":case"multipoint":return Uae;case"esriGeometryPoint":case"point":return jae;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return Gae;case"esriGeometryPolyline":case"polyline":return qae}}var In;function Zae(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function xl(e,t,r){return t==null?r:r==null?t:e(t,r)}let ir=In=class extends yl{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,r,i,n){return Zae(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?me.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:r,ymax:i,spatialReference:n??me.WGS84}}static fromBounds(e,t){return new In({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new In({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new ge({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new In;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&Bw(t,r)&&(e=t.isWebMercator?il(e):uf(e,!0)),e.type==="point"?Cv(this,e):e.type==="extent"&&Nae(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&Bw(t,r)&&(e=t.isWebMercator?il(e):uf(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),r=this.width*t,i=this.height*t;if(this.xmin+=r,this.ymin+=i,this.xmax-=r,this.ymax-=i,this.hasZ){const n=(this.zmax-this.zmin)*t;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*t;this.mmin+=n,this.mmax-=n}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,r=e.spatialReference;return t&&r&&!Ht(t,r)&&Bw(t,r)&&(e=t.isWebMercator?il(e):uf(e,!0)),Wae(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,r){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,r!=null&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=xl(Math.min,this.zmin,e.zmin),this.zmax=xl(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=xl(Math.min,this.mmin,e.mmin),this.mmax=xl(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=xl(Math.max,this.zmin,e.zmin),this.zmax=xl(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=xl(Math.max,this.mmin,e.mmin),this.mmax=xl(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=bi(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,r=this._getCM(e);if(r){const i=t.isWebMercator?uf(r):r;this.xmin-=r.x,this.xmax-=r.x,t.isWebMercator||(i.x=MT(i.x,e).x),this.spatialReference=new me(T2((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:i.x}))}return this}_getCM(e){let t=null;const[r,i]=e.valid,n=this.xmin,s=this.xmax;return n>=r&&n<=i&&s>=r&&s<=i||(t=this.center),t}_normalize(e,t,r){const i=this.spatialReference;if(!i)return this;const n=r??bi(i);if(n==null)return this;const s=this._getParts(n).map(u=>u.extent);if(s.length<2)return s[0]||this;if(s.length>2)return e?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(e)return this._shiftCM(n);if(t)return s;let o=!0,a=!0;return s.forEach(u=>{u.hasZ||(o=!1),u.hasM||(a=!1)}),{rings:s.map(u=>{const d=[[u.xmin,u.ymin],[u.xmin,u.ymax],[u.xmax,u.ymax],[u.xmax,u.ymin],[u.xmin,u.ymin]];if(o){const h=(u.zmax-u.zmin)/2;for(let f=0;f<d.length;f++)d[f].push(h)}if(a){const h=(u.mmax-u.mmin)/2;for(let f=0;f<d.length;f++)d[f].push(h)}return d}),hasZ:o,hasM:a,spatialReference:i}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:n,ymax:s,spatialReference:o}=this,a=this.width,u=this.xmin,d=this.xmax;let h;e=e||bi(o);const[f,m]=e.valid;h=MT(this.xmin,e);const y=h.x,g=h.frameId;h=MT(this.xmax,e);const v=h.x,_=h.frameId,w=y===v&&a>0;if(a>2*m){const b=new In(u<d?y:v,n,m,s,o),T=new In(f,n,u<d?v:y,s,o),x=new In(0,n,m,s,o),M=new In(f,n,0,s,o),I=[],O=[];b.contains(x)&&I.push(g),b.contains(M)&&O.push(g),T.contains(x)&&I.push(_),T.contains(M)&&O.push(_);for(let P=g+1;P<_;P++)I.push(P),O.push(P);t.push({extent:b,frameIds:[g]},{extent:T,frameIds:[_]},{extent:x,frameIds:I},{extent:M,frameIds:O})}else y>v||w?t.push({extent:new In(y,n,m,s,o),frameIds:[g]},{extent:new In(f,n,v,s,o),frameIds:[_]}):t.push({extent:new In(y,n,v,s,o),frameIds:[g]});this.cache._parts=t}const r=this.hasZ,i=this.hasM;if(r||i){const n={};r&&(n.zmin=this.zmin,n.zmax=this.zmax),i&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let s=0;s<t.length;s++)t[s].extent.set(n)}return t}};function MT(e,t){const[r,i]=t.valid,n=2*i;let s,o=0;return e>i?(s=Math.ceil(Math.abs(e-i)/n),e-=s*n,o=s):e<r&&(s=Math.ceil(Math.abs(e-r)/n),e+=s*n,o=-s),{x:e,frameId:o}}l([c({readOnly:!0})],ir.prototype,"cache",null),l([c({readOnly:!0})],ir.prototype,"center",null),l([c({readOnly:!0})],ir.prototype,"extent",null),l([c({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],ir.prototype,"hasM",null),l([c({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],ir.prototype,"hasZ",null),l([c({readOnly:!0})],ir.prototype,"height",null),l([c({readOnly:!0})],ir.prototype,"width",null),l([c({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],ir.prototype,"xmin",void 0),l([c({type:Number,json:{write:!0}})],ir.prototype,"ymin",void 0),l([c({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],ir.prototype,"mmin",void 0),l([c({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ir.prototype,"zmin",void 0),l([c({type:Number,json:{write:!0}})],ir.prototype,"xmax",void 0),l([c({type:Number,json:{write:!0}})],ir.prototype,"ymax",void 0),l([c({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],ir.prototype,"mmax",void 0),l([c({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ir.prototype,"zmax",void 0),ir=In=l([$("esri.geometry.Extent")],ir),ir.prototype.toJSON.isDefaultToJSON=!0;const qe=ir;function im(e,t,r=!1){let{hasM:i,hasZ:n}=e;Array.isArray(t)?t.length!==4||i||n?t.length===3&&r&&!i?(n=!0,i=!1):t.length===3&&i&&n&&(i=!1,n=!1):(i=!0,n=!0):(n=!n&&t.hasZ&&(!i||t.hasM),i=!i&&t.hasM&&(!n||t.hasZ)),e.hasZ=n,e.hasM=i}var PM;function i4(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}function Jae(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Pl=PM=class extends yl{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){var n;if(!e&&!t)return{};const r={};Array.isArray(e)?(r.points=e,r.spatialReference=t):Jae(e)?r.spatialReference=e:(e.points&&(r.points=e.points),e.spatialReference&&(r.spatialReference=e.spatialReference),e.hasZ&&(r.hasZ=e.hasZ),e.hasM&&(r.hasM=e.hasM));const i=(n=r.points)==null?void 0:n[0];return i&&(r.hasZ===void 0&&r.hasM===void 0?(r.hasZ=i.length>2,r.hasM=!1):r.hasZ===void 0?r.hasZ=i.length>3:r.hasM===void 0&&(r.hasM=i.length>3)),r}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new qe,r=this.hasZ,i=this.hasM,n=r?3:2,s=e[0],o=i4(Math.min),a=i4(Math.max);let u,d,h,f,[m,y]=s,[g,v]=s;for(let _=0,w=e.length;_<w;_++){const b=e[_],[T,x]=b;if(m=o(m,T),y=o(y,x),g=a(g,T),v=a(v,x),r&&b.length>2){const M=b[2];u=o(u,M),h=a(h,M)}if(i&&b.length>n){const M=b[n];d=o(d,M),f=a(f,M)}}return t.xmin=m,t.ymin=y,t.xmax=g,t.ymax=v,t.spatialReference=this.spatialReference,r?(t.zmin=u,t.zmax=h):(t.zmin=void 0,t.zmax=void 0),i?(t.mmin=d,t.mmax=f):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=C(this.points)}addPoint(e){return im(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:C(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new PM(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],r={x:t[0],y:t[1],spatialReference:this.spatialReference};let i=2;return this.hasZ&&(r.z=t[2],i=3),this.hasM&&(r.m=t[i]),new ge(r)}removePoint(e){if(!this._validateInputs(e))return null;const t=new ge(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(im(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};l([c({readOnly:!0})],Pl.prototype,"cache",null),l([c()],Pl.prototype,"extent",null),l([c({type:[[Number]],json:{write:{isRequired:!0}}})],Pl.prototype,"points",void 0),l([B("points")],Pl.prototype,"writePoints",null),Pl=PM=l([$("esri.geometry.Multipoint")],Pl),Pl.prototype.toJSON.isDefaultToJSON=!0;const Av=Pl;function Dke(e){const t=[];for(e.reset();e.nextPath();){const r=[];for(;e.nextPoint();)r.push([e.x,e.y]);t.push(r)}return e.reset(),t}function Kae(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}var SS;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(SS||(SS={}));function TO(e,t){const r=t[0]-e[0],i=t[1]-e[1];if(e.length>2&&t.length>2){const n=e[2]-t[2];return Math.sqrt(r*r+i*i+n*n)}return Math.sqrt(r*r+i*i)}function Yae(e,t,r){const i=e[0]+r*(t[0]-e[0]),n=e[1]+r*(t[1]-e[1]);return e.length>2&&t.length>2?[i,n,e[2]+r*(t[2]-e[2])]:[i,n]}function Qae(e,t,r,i){return Xae(e,t,r[i],r[i+1])}function Xae(e,t,r,i){const[n,s]=t,[o,a]=r,[u,d]=i,h=u-o,f=d-a,m=h*h+f*f,y=(n-o)*h+(s-a)*f,g=Math.min(1,Math.max(0,y/m));return e[0]=o+h*g,e[1]=a+f*g,e}function jke(e,t,r,i,n,s){let o=r,a=i,u=n-o,d=s-a;if(u!==0||d!==0){const h=((e-o)*u+(t-a)*d)/(u*u+d*d);h>1?(o=n,a=s):h>0&&(o+=u*h,a+=d*h)}return u=e-o,d=t-a,u*u+d*d}function q7(e,t){return Yae(e,t,.5)}function Vke(e){const t=e.length;let r=0;for(let i=0;i<t-1;++i)r+=TO(e[i],e[i+1]);return r}function H7(e,t=SS.X,r=SS.Y){let i=0;const n=e.length;let s=e[0];for(let o=1;o<n;o++){const a=e[o];i+=(a[t]-s[t])*(a[r]+s[r]),s=a}if(!W7(e)){const o=e[0];i+=(o[t]-s[t])*(o[r]+s[r])}return i>=0}function W7(e){const t=e.length;return t<3||b2(e[0],e[t-1])}function Uke(e){"rings"in e&&(ele(e),tle(e))}function ele(e){if(!("rings"in e))return!1;let t=!1;for(const r of e.rings)W7(r)||(r.push(r[0].slice()),t=!0);return t}function tle(e){if(!("rings"in e)||e.rings.length===0||H7(e.rings[0]))return!1;for(const t of e.rings)t.reverse();return!0}function zke(e){return e.type!=="polygon"&&e.type!=="polyline"||rle(e.type==="polygon"?e.rings:e.paths,e.spatialReference),e}function rle(e,t){const r=bi(t);if(!r)return;const i=r.valid[0],n=r.valid[1],s=n-i;for(const o of e){let a=1/0,u=-1/0;for(const h of o){const f=ile(h[0],i,n);a=Math.min(a,f),u=Math.max(u,f),h[0]=f}const d=u-a;s-d<d&&o.forEach(h=>{h[0]<0&&(h[0]+=s)})}}function ile(e,t,r){const i=r-t;return e<t?r-(t-e)%i:e>r?t+(e-t)%i:e}function Gke(e,t){if(e===t)return!0;if(e.type!==t.type)return!1;if(e.type==="point"||e.type==="mesh"||e.type==="extent")return!0;if(e.type==="multipoint")return e.points.length===t.points.length;const[r,i]=e.type==="polyline"?[e.paths,t.paths]:[e.rings,t.rings];return r.length===i.length&&r.every((n,s)=>n.length===i[s].length)}function Bke(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function nle(e){return e?sle(e.rings,e.hasZ??!1):null}function sle(e,t){if(!(e!=null&&e.length))return null;const r=[],i=[],n=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=e.length;s<o;s++){const a=Z7(e[s],t,n);a&&i.push(a)}if(i.sort((s,o)=>{let a=s[2]-o[2];return a===0&&t&&(a=s[4]-o[4]),a}),i.length&&(r[0]=i[0][0],r[1]=i[0][1],t&&(r[2]=i[0][3]),(r[0]<n[0]||r[0]>n[1]||r[1]<n[2]||r[1]>n[3]||t&&(r[2]<n[4]||r[2]>n[5]))&&(r.length=0)),!r.length){const s=e[0]&&e[0].length?ole(e[0],t):null;if(!s)return null;r[0]=s[0],r[1]=s[1],t&&s.length>2&&(r[2]=s[2])}return r}function Z7(e,t,r){let i=0,n=0,s=0,o=0,a=0;const u=e.length?e[0][0]:0,d=e.length?e[0][1]:0,h=e.length&&t?e[0][2]:0;for(let m=0;m<e.length;m++){const y=e[m],g=e[(m+1)%e.length],[v,_,w]=y,b=v-u,T=_-d,[x,M,I]=g,O=x-u,P=M-d,z=b*P-O*T;if(o+=z,i+=(b+O)*z,n+=(T+P)*z,t&&y.length>2&&g.length>2){const U=w-h,W=I-h,ee=b*W-O*U;s+=(U+W)*ee,a+=ee}v<r[0]&&(r[0]=v),v>r[1]&&(r[1]=v),_<r[2]&&(r[2]=_),_>r[3]&&(r[3]=_),t&&(w<r[4]&&(r[4]=w),w>r[5]&&(r[5]=w))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const f=[i/(6*o)+u,n/(6*o)+d,o];return t&&(r[4]===r[5]||a===0?(f[3]=(r[4]+r[5])/2,f[4]=0):(f[3]=s/(6*a)+h,f[4]=a)),f}function qke(e,t){let r=0,i=0,n=0;e.nextPoint();const s=e.pathSize?e.x:0,o=e.pathSize?e.y:0;for(let a=0;a<e.pathSize;a++){e.seekInPath(a);const u=[e.x,e.y];e.seekInPath((a+1)%e.pathSize);const d=[e.x,e.y],[h,f]=u,m=h-s,y=f-o,[g,v]=d,_=g-s,w=v-o,b=m*w-_*y;n+=b,r+=(m+_)*b,i+=(y+w)*b,h<t[0]&&(t[0]=h),h>t[1]&&(t[1]=h),f<t[2]&&(t[2]=f),f>t[3]&&(t[3]=f)}return n>0&&(n*=-1),n?(n*=.5,[r/(6*n)+s,i/(6*n)+o,n]):null}function ole(e,t){const r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;for(let u=0,d=e.length;u<d-1;u++){const h=e[u],f=e[u+1];if(h&&f){r[0]=h[0],r[1]=h[1],i[0]=f[0],i[1]=f[1],t&&h.length>2&&f.length>2&&(r[2]=h[2],i[2]=f[2]);const m=TO(r,i);if(m){n+=m;const y=q7(h,f);s+=m*y[0],o+=m*y[1],t&&y.length>2&&(a+=m*y[2])}}}return n>0?t?[s/n,o/n,a/n]:[s/n,o/n]:e.length?e[0]:null}function ale(e){const{hasZ:t,totalSize:r}=e;if(r===0)return null;const i=[],n=[],s=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const o=Z7(Kae(e),e.hasZ,s);o&&n.push(o)}if(n.sort((o,a)=>{let u=o[2]-a[2];return u===0&&t&&(u=o[4]-a[4]),u}),n.length&&(i[0]=n[0][0],i[1]=n[0][1],t&&(i[2]=n[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||t&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){e.reset(),e.nextPath();const o=e.pathSize?lle(e):null;if(!o)return null;i[0]=o[0],i[1]=o[1],t&&o.length>2&&(i[2]=o[2])}return i}function lle(e){const{hasZ:t}=e,r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;if(e.nextPoint()){let u=e.x,d=e.y,h=e.z;for(;e.nextPoint();){const f=e.x,m=e.y,y=e.z;r[0]=u,r[1]=d,i[0]=f,i[1]=m,t&&(r[2]=h,i[2]=y);const g=TO(r,i);if(g){n+=g;const v=q7(r,i);s+=g*v[0],o+=g*v[1],t&&v.length>2&&(a+=g*v[2])}u=f,d=m,h=y}}return n>0?t?[s/n,o/n,a/n]:[s/n,o/n]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const ule=1e-6;function Hke(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<ule){const n=ale(e);return n?[n[0],n[1]]:null}const r=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const i=[e.x,e.y];for(e.reset();e.nextPath();)dle(r,i,e);return r[0]*=1/t,r[1]*=1/t,r[0]+=i[0],r[1]+=i[1],r}const cle=1/3;function dle(e,t,r){if(!e||!r||r.pathSize<3)return null;r.nextPoint();const i=r.x,n=r.y;r.nextPoint();let s,o=r.x-i,a=r.y-n,u=0,d=0;for(;r.nextPoint();)u=r.x-i,d=r.y-n,s=.5*cle*(u*a-d*o),e[0]+=s*(o+u),e[1]+=s*(a+d),o=u,a=d;const h=r.getCurrentRingArea(),f=[i,n];return f[0]-=t[0],f[1]-=t[1],f[0]*=h,f[1]*=h,e[0]+=f[0],e[1]+=f[1],e}const n4=new Float32Array(1);function Wke(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function os(e,t,r){return Math.min(Math.max(e,t),r)}function Zke(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function Cy(e,t,r){return e+(t-e)*r}function Jke(e,t,r,i,n){return Cy(i,n,(e-t)/(r-t))}function V2(e){return e*Math.PI/180}function J7(e){return 180*e/Math.PI}function Kke(e){return Math.acos(os(e,-1,1))}function ple(e){return Math.asin(os(e,-1,1))}function Jg(e,t,r=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=r}const $S=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function NM(e){return $S.setFloat64(0,e),$S.getBigInt64(0)}function hle(e){return $S.setBigInt64(0,e),$S.getFloat64(0)}const Hw=BigInt("1000000"),fle=K7(1);function K7(e){const t=NM(e=Math.abs(e)),r=hle(t<=Hw?Hw:t-Hw);return Math.abs(e-r)}function Yke(e,t,r=fle){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(r!=null&&K7(Math.min(Math.abs(e),Math.abs(t)))<r)return Math.abs(e-t)<=r;const i=NM(e),n=NM(t);return i<0!=n<0?!1:!((i<n?n-i:i-n)>Hw)}function Qke(e){return Y7(Math.max(-s4,Math.min(e,s4)))}function Y7(e){return n4[0]=e,n4[0]}function Xke(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],i=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(Jg(t,1)&&Jg(r,1)&&Jg(i,1))}const s4=Y7(34028234663852886e22);function ePe(e,t,r){if(r===void 0||+r==0)return Math[e](t);if(t=+t,r=+r,isNaN(t)||typeof r!="number"||r%1!=0)return NaN;let i=t.toString().split("e");return i=(t=Math[e](+(i[0]+"e"+(i[1]?+i[1]-r:-r)))).toString().split("e"),+(i[0]+"e"+(i[1]?+i[1]+r:r))}function Ui(e=yle){return[e[0],e[1],e[2],e[3]]}function Q7(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function tPe(e,t,r,i,n=Ui()){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}function rPe(e,t=Ui()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function iPe(e,t){return new qe({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function nPe(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function sPe(e,t,r){if(t!=null)if("length"in t)LM(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[0]),r[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":r[0]=Math.min(e[0],t.xmin),r[1]=Math.min(e[1],t.ymin),r[2]=Math.max(e[2],t.xmax),r[3]=Math.max(e[3],t.ymax);break;case"point":r[0]=Math.min(e[0],t.x),r[1]=Math.min(e[1],t.y),r[2]=Math.max(e[2],t.x),r[3]=Math.max(e[3],t.y)}else Q7(r,e)}function X7(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function eG(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function oPe(e){return X7(e)*eG(e)}function aPe(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function lPe(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function uPe(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function mle(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function cPe(e){return e?Q7(e,o4):Ui(o4)}function LM(e){return e!=null&&e.length===4}function dPe(e,t){return LM(e)&&LM(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const o4=[1/0,1/0,-1/0,-1/0],yle=[0,0,0,0];function tG(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function rG(e){return e.points!==void 0}function iG(e){return e.x!==void 0&&e.y!==void 0}function nG(e){return e.paths!==void 0}function sG(e){return e.rings!==void 0}function oG(e){function t(r,i){return r==null?i:i==null?r:e(r,i)}return t}const Cu=oG(Math.min),Au=oG(Math.max);function pPe(e,t){return nG(t)?nm(e,t.paths,!1,!1):sG(t)?nm(e,t.rings,!1,!1):rG(t)?xO(e,t.points,!1,!1,!1,!1):tG(t)?aG(e,t):(iG(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function hPe(e){let t,r,i,n;for(e.reset(),t=i=1/0,r=n=-1/0;e.nextPath();){const s=gle(e);t=Math.min(s[0],t),i=Math.min(s[1],i),r=Math.max(s[2],r),n=Math.max(s[3],n)}return Ui([t,i,r,n])}function gle(e){let t,r,i,n;for(t=i=1/0,r=n=-1/0;e.nextPoint();)t=Math.min(e.x,t),i=Math.min(e.y,i),r=Math.max(e.x,r),n=Math.max(e.y,n);return Ui([t,i,r,n])}function fPe(e,t){return nG(t)?nm(e,t.paths,!0,!1):sG(t)?nm(e,t.rings,!0,!1):rG(t)?xO(e,t.points,!0,!1,!0,!1):tG(t)?aG(e,t,!0,!1,!0,!1):(iG(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function nm(e,t,r,i){const n=r?3:2;if(!t.length||!t[0].length)return null;let s,o,a,u,[d,h]=t[0][0],[f,m]=t[0][0];for(let y=0;y<t.length;y++){const g=t[y];for(let v=0;v<g.length;v++){const _=g[v],[w,b]=_;if(d=Cu(d,w),h=Cu(h,b),f=Au(f,w),m=Au(m,b),r&&_.length>2){const T=_[2];s=Cu(s,T),o=Au(o,T)}if(i&&_.length>n){const T=_[n];a=Cu(s,T),u=Au(o,T)}}}return r?i?(e[0]=d,e[1]=h,e[2]=s,e[3]=a,e[4]=f,e[5]=m,e[6]=o,e[7]=u,e.length=8,e):(e[0]=d,e[1]=h,e[2]=s,e[3]=f,e[4]=m,e[5]=o,e.length=6,e):i?(e[0]=d,e[1]=h,e[2]=a,e[3]=f,e[4]=m,e[5]=u,e.length=6,e):(e[0]=d,e[1]=h,e[2]=f,e[3]=m,e.length=4,e)}function aG(e,t,r,i,n,s){const o=t.xmin,a=t.xmax,u=t.ymin,d=t.ymax;let h=t.zmin,f=t.zmax,m=t.mmin,y=t.mmax;return n?(h=h||0,f=f||0,s?(m=m||0,y=y||0,e[0]=o,e[1]=u,e[2]=h,e[3]=m,e[4]=a,e[5]=d,e[6]=f,e[7]=y,e):(e[0]=o,e[1]=u,e[2]=h,e[3]=a,e[4]=d,e[5]=f,e)):s?(m=m||0,y=y||0,e[0]=o,e[1]=u,e[2]=m,e[3]=a,e[4]=d,e[5]=y,e):(e[0]=o,e[1]=u,e[2]=a,e[3]=d,e)}function xO(e,t,r,i,n,s){const o=r?3:2,a=i&&s,u=r&&n;if(!t.length||!t[0].length)return null;let d,h,f,m,[y,g]=t[0],[v,_]=t[0];for(let w=0;w<t.length;w++){const b=t[w],[T,x]=b;if(y=Cu(y,T),g=Cu(g,x),v=Au(v,T),_=Au(_,x),u&&b.length>2){const M=b[2];d=Cu(d,M),h=Au(h,M)}if(a&&b.length>o){const M=b[o];f=Cu(d,M),m=Au(h,M)}}return n?(d=d||0,h=h||0,s?(f=f||0,m=m||0,e[0]=y,e[1]=g,e[2]=d,e[3]=f,e[4]=v,e[5]=_,e[6]=h,e[7]=m,e):(e[0]=y,e[1]=g,e[2]=d,e[3]=v,e[4]=_,e[5]=h,e)):s?(f=f||0,m=m||0,e[0]=y,e[1]=g,e[2]=f,e[3]=v,e[4]=_,e[5]=m,e):(e[0]=y,e[1]=g,e[2]=v,e[3]=_,e)}function vle(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function wle(e){return e.points!==void 0}function _le(e){return e.x!==void 0&&e.y!==void 0}function ble(e){return e.paths!==void 0}function Sle(e){return e.rings!==void 0}const EO=[];function lG(e,t,r,i){return{xmin:e,ymin:t,xmax:r,ymax:i}}function uG(e,t,r,i,n,s){return{xmin:e,ymin:t,zmin:r,xmax:i,ymax:n,zmax:s}}function cG(e,t,r,i,n,s){return{xmin:e,ymin:t,mmin:r,xmax:i,ymax:n,mmax:s}}function dG(e,t,r,i,n,s,o,a){return{xmin:e,ymin:t,zmin:r,mmin:i,xmax:n,ymax:s,zmax:o,mmax:a}}function MO(e,t=!1,r=!1){return t?r?dG(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):uG(e[0],e[1],e[2],e[3],e[4],e[5]):r?cG(e[0],e[1],e[2],e[3],e[4],e[5]):lG(e[0],e[1],e[2],e[3])}function mPe(e){return e?vle(e)?e:_le(e)?Tle(e):Sle(e)?pG(e):ble(e)?hG(e):wle(e)?$le(e):null:null}function $le(e){const{hasZ:t,hasM:r,points:i}=e;return MO(xO(EO,i,t??!1,r??!1),t,r)}function Tle(e){const{x:t,y:r,z:i,m:n}=e,s=n!=null;return i!=null?s?dG(t,r,i,n,t,r,i,n):uG(t,r,i,t,r,i):s?cG(t,r,n,t,r,n):lG(t,r,t,r)}function pG(e){const{hasZ:t,hasM:r,rings:i}=e,n=nm(EO,i,t??!1,r??!1);return n?MO(n,t,r):null}function hG(e){const{hasZ:t,hasM:r,paths:i}=e,n=nm(EO,i,t??!1,r??!1);return n?MO(n,t,r):null}var Ww;function a4(e){return!Array.isArray(e[0])}function xle(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function Ele(e){var s,o;if(!e)return;let{rings:t,hasM:r,hasZ:i,spatialReference:n}=e;switch(t??(t=[]),xle(t)&&(t=[t]),(o=(s=t[0])==null?void 0:s[0])==null?void 0:o.length){case 4:i??(i=!0),r??(r=!0);break;case 3:i??(i=r!==!0),r??(r=!i);break;default:i??(i=!1),r??(r=!1)}return n??(n=me.WGS84),{...e,hasM:r,hasZ:i,rings:t,spatialReference:n}}let Oo=Ww=class extends yl{static fromExtent(e){const t=e.clone().normalize(),{spatialReference:r}=e;let i=!1,n=!1;for(const o of t)o.hasZ&&(i=!0),o.hasM&&(n=!0);const s={rings:t.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(i&&o.hasZ){const u=o.zmin+.5*(o.zmax-o.zmin);for(let d=0;d<a.length;d++)a[d].push(u)}if(n&&o.hasM){const u=o.mmin+.5*(o.mmax-o.mmin);for(let d=0;d<a.length;d++)a[d].push(u)}return a}),spatialReference:r};return i&&(s.hasZ=!0),n&&(s.hasM=!0),new Ww(s)}constructor(e){super(Ele(e)),this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=nle(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new ge;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=pG(this);if(!t)return null;const r=new qe(t);return r.spatialReference=e,r}get isSelfIntersecting(){return Hae(this.rings)}writeRings(e,t){t.rings=C(this.rings)}addRing(e){if(!e)return;const t=this.rings,r=t.length;if(a4(e)){const i=[];for(let n=0,s=e.length;n<s;n++)i[n]=e[n].toArray();t[r]=i}else t[r]=e.slice();return this.notifyChange("rings"),this}clone(){const e=new Ww;return e.spatialReference=this.spatialReference,e.rings=C(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;if(t!=null!=(r!=null)||t!=null&&r!=null&&!t.equals(r)||this.rings.length!==e.rings.length)return!1;const i=([n,s,o,a],[u,d,h,f])=>n===u&&s===d&&(o==null&&h==null||o===h)&&(a==null&&f==null||a===f);for(let n=0;n<this.rings.length;n++){const s=this.rings[n],o=e.rings[n];if(!b2(s,o,i))return!1}return!0}contains(e){if(!e)return!1;const t=D2(e,this.spatialReference);return SO(this,t??e)}isClockwise(e){const t=a4(e)?e.map(r=>this.hasZ?this.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y]):e;return H7(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.rings[e][t],i=this.hasZ,n=this.hasM;return i&&!n?new ge(r[0],r[1],r[2],void 0,this.spatialReference):n&&!i?new ge(r[0],r[1],void 0,r[2],this.spatialReference):i&&n?new ge(r[0],r[1],r[2],r[3],this.spatialReference):new ge(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(im(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e].splice(t,0,r),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new ge(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],r=this.spatialReference,i=t.map(n=>new ge(n,r));return this.notifyChange("rings"),i}setPoint(e,t,r){return this._validateInputs(e,t)?(im(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e][t]=r,this.notifyChange("rings"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const i=this.rings[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};l([c({readOnly:!0})],Oo.prototype,"cache",null),l([c({readOnly:!0})],Oo.prototype,"centroid",null),l([c({readOnly:!0})],Oo.prototype,"extent",null),l([c({readOnly:!0})],Oo.prototype,"isSelfIntersecting",null),l([c({type:[[[Number]]],json:{write:{isRequired:!0}}})],Oo.prototype,"rings",void 0),l([B("rings")],Oo.prototype,"writeRings",null),Oo=Ww=l([$("esri.geometry.Polygon")],Oo);const Zi=Oo;Oo.prototype.toJSON.isDefaultToJSON=!0;var FM;function Mle(e){return!Array.isArray(e[0])}function Ile(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function Cle(e){var s,o;if(!e)return;let{paths:t,hasM:r,hasZ:i,spatialReference:n}=e;switch(t??(t=[]),Ile(t)&&(t=[t]),(o=(s=t[0])==null?void 0:s[0])==null?void 0:o.length){case 4:i??(i=!0),r??(r=!0);break;case 3:i??(i=r!==!0),r??(r=!i);break;default:i??(i=!1),r??(r=!1)}return n??(n=me.WGS84),{...e,hasM:r,hasZ:i,paths:t,spatialReference:n}}let hu=FM=class extends yl{constructor(e){super(Cle(e)),this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=hG(this);if(!t)return null;const r=new qe(t);return r.spatialReference=e,r}writePaths(e,t){t.paths=C(this.paths)}addPath(e){if(!e)return;const t=this.paths,r=t.length;if(Mle(e)){const i=[];for(let n=0,s=e.length;n<s;n++)i[n]=e[n].toArray();t[r]=i}else t[r]=e.slice();return this.notifyChange("paths"),this}clone(){const e=new FM;return e.spatialReference=this.spatialReference,e.paths=C(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.paths[e][t],i=this.hasZ,n=this.hasM;return i&&!n?new ge(r[0],r[1],r[2],void 0,this.spatialReference):n&&!i?new ge(r[0],r[1],void 0,r[2],this.spatialReference):i&&n?new ge(r[0],r[1],r[2],r[3],this.spatialReference):new ge(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(im(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e].splice(t,0,r),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],r=this.spatialReference,i=t.map(n=>new ge(n,r));return this.notifyChange("paths"),i}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new ge(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(e,t,r){return this._validateInputs(e,t)?(im(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e][t]=r,this.notifyChange("paths"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const i=this.paths[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};l([c({readOnly:!0})],hu.prototype,"cache",null),l([c({readOnly:!0})],hu.prototype,"extent",null),l([c({type:[[[Number]]],json:{write:{isRequired:!0}}})],hu.prototype,"paths",void 0),l([B("paths")],hu.prototype,"writePaths",null),hu=FM=l([$("esri.geometry.Polyline")],hu);const Kn=hu;hu.prototype.toJSON.isDefaultToJSON=!0;const Ale=mr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),l4=mr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function fG(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function mG(e){return e.points!==void 0}function yG(e){return e.x!==void 0&&e.y!==void 0}function IO(e){return e.paths!==void 0}function Gd(e){return e.rings!==void 0}function dl(e){return e==null?null:e instanceof yl?e:yG(e)?ge.fromJSON(e):IO(e)?Kn.fromJSON(e):Gd(e)?Zi.fromJSON(e):mG(e)?Av.fromJSON(e):fG(e)?qe.fromJSON(e):null}function Rv(e){return e?yG(e)?"esriGeometryPoint":IO(e)?"esriGeometryPolyline":Gd(e)?"esriGeometryPolygon":fG(e)?"esriGeometryEnvelope":mG(e)?"esriGeometryMultipoint":null:null}const Rle={esriGeometryPoint:ge,esriGeometryPolyline:Kn,esriGeometryPolygon:Zi,esriGeometryEnvelope:qe,esriGeometryMultipoint:Av,esriGeometryMultiPatch:Zi};function Ole(e){return e&&Rle[e]||null}const bp={base:yl,key:"type",typeMap:{extent:qe,multipoint:Av,point:ge,polyline:Kn,polygon:Zi}};ss(bp);const Me=e=>{let t=class extends e{clone(){var u;const r=Wi(this);Cz(r,"unable to clone instance of non-accessor class");const i=r.metadata,n=r.store,s={},o=new Map;for(const d in i){const h=i[d],f=n==null?void 0:n.originOf(d),m=h.clonable;if(h.readOnly||m===!1||f!==Oe.USER&&f!==Oe.DEFAULTS&&f!==Oe.WEB_MAP&&f!==Oe.WEB_SCENE)continue;const y=this[d];let g=null;g=typeof m=="function"?m(y):m==="reference"?y:XE(y),y!=null&&g==null||(f===Oe.DEFAULTS?o.set(d,g):s[d]=g)}const a=new(Object.getPrototypeOf(this)).constructor(s);if(o.size){const d=(u=Wi(a))==null?void 0:u.store;if(d)for(const[h,f]of o)d.set(h,f,Oe.DEFAULTS)}return a}};return t=l([$("esri.core.Clonable")],t),t};let DM=class extends Me(te){};DM=l([$("esri.core.Clonable")],DM);let Pc=class extends DM{constructor(t){super(t),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(t){return t!=null&&this.row===t.row&&this.rows===t.rows&&this.column===t.column&&this.columns===t.columns}};l([c({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Pc.prototype,"row",void 0),l([c({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Pc.prototype,"column",void 0),l([c({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Pc.prototype,"rows",void 0),l([c({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Pc.prototype,"columns",void 0),Pc=l([$("esri.CameraLayout")],Pc);const gG=Pc;let kle=class{constructor(t,r){this.min=t,this.max=r,this.range=r-t}normalize(t,r=0,i=!1){return u4(this.range,this.min,this.max,t,r,i)}clamp(t,r=0){return os(t-r,this.min,this.max)+r}monotonic(t,r,i){return t<r?r:r+jM(this.range,t-r,i)}minimalMonotonic(t,r,i){return u4(this.range,t,t+this.range,r,i)}center(t,r,i){return r=this.monotonic(t,r,i),this.normalize((t+r)/2,i)}diff(t,r,i){return this.monotonic(t,r,i)-t}shortestSignedDiff(t,r){t=this.normalize(t);const i=(r=this.normalize(r))-t,n=r<t?this.minimalMonotonic(t,r)-t:r-this.minimalMonotonic(r,t);return Math.abs(i)<Math.abs(n)?i:n}contains(t,r,i){return r=this.minimalMonotonic(t,r),(i=this.minimalMonotonic(t,i))>t&&i<r}};function u4(e,t,r,i,n=0,s=!1){return(i-=n)<t?i+=jM(e,t-i):i>r&&(i-=jM(e,i-r)),s&&i===r&&(i=t),i+n}function jM(e,t,r=0){return Math.ceil((t-r)/e)*e+r}const Ple=new kle(0,360);let ho=class extends Me(N){constructor(...t){super(...t),this.position=new ge([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new gG}normalizeCtorArgs(t,r,i,n){if(t&&typeof t=="object"&&("x"in t||Array.isArray(t))){const s={position:t};return r!=null&&(s.heading=r),i!=null&&(s.tilt=i),n!=null&&(s.fov=n),s}return t}writePosition(t,r,i,n){const s=t.clone();s.x=vi(t.x||0),s.y=vi(t.y||0),s.z=t.hasZ?vi(t.z||0):t.z,r[i]=s.write({},n)}readPosition(t,r){const i=new ge;return i.read(t,r),i.x=vi(i.x||0),i.y=vi(i.y||0),i.z=i.hasZ?vi(i.z||0):i.z,i}equals(t){return t!=null&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)&&this.layout.equals(t.layout)}};l([c({type:ge,json:{write:{isRequired:!0}}})],ho.prototype,"position",void 0),l([B("position")],ho.prototype,"writePosition",null),l([G("position")],ho.prototype,"readPosition",null),l([c({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ne(e=>Ple.normalize(vi(e)))],ho.prototype,"heading",void 0),l([c({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ne(e=>os(vi(e),-180,180))],ho.prototype,"tilt",void 0),l([c({type:Number,nonNullable:!0,json:{default:55,write:!0}}),Ne(e=>os(vi(e,55),1,170))],ho.prototype,"fov",void 0),l([c({type:gG,nonNullable:!0,json:{read:!1,write:!1}})],ho.prototype,"layout",void 0),ho=l([$("esri.Camera")],ho);const Nle=ho;var VM;let Nl=VM=class extends N{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new VM({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};l([c({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:IT}}}}})],Nl.prototype,"rotation",void 0),l([Ne("rotation")],Nl.prototype,"castRotation",null),l([c({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:IT}}}}})],Nl.prototype,"scale",void 0),l([c({types:bp,json:{read:dl,write:!0,origins:{"web-scene":{read:dl,write:{overridePolicy:IT}}}}})],Nl.prototype,"targetGeometry",void 0),l([c({type:Nle,json:{write:!0}})],Nl.prototype,"camera",void 0),Nl=VM=l([$("esri.Viewpoint")],Nl);const dr=Nl;function IT(){return{enabled:!this.camera}}let Zw=class vG{constructor(){this._emitter=new vG.EventEmitter(this)}emit(t,r){return this._emitter.emit(t,r)}on(t,r){return this._emitter.on(t,r)}once(t,r){return this._emitter.once(t,r)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(n=null){this._target=n,this._listenersMap=null}clear(){var n;(n=this._listenersMap)==null||n.clear(),this._listenersMap=null}destroy(){this.clear()}emit(n,s){var d;let o=(d=this._listenersMap)==null?void 0:d.get(n);if(!o)return!1;const a=this._target||this;let u=!1;for(const h of o.slice()){const f="deref"in h?h.deref():h;f?f==null||f.call(a,s):u=!0}return u&&(o=o.filter(h=>!("deref"in h)||h.deref()!=null),this._listenersMap.set(n,o)),o.length>0}on(n,s){if(Array.isArray(n)){const a=n.map(u=>this.on(u,s));return Sv(a)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(n)||[];return o.push(s),this._listenersMap.set(n,o),Be(()=>{var d;const a=(d=this._listenersMap)==null?void 0:d.get(n),u=(a==null?void 0:a.indexOf(s))??-1;u>=0&&a.splice(u,1)})}once(n,s){const o=this.on(n,a=>{o.remove();const u="deref"in s?s.deref():s;u==null||u.call(null,a)});return o}hasEventListener(n){var o;const s=(o=this._listenersMap)==null?void 0:o.get(n);return s!=null&&s.length>0}}e.EventEmitter=t,e.EventedMixin=i=>{let n=class extends i{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(s,o){return this._emitter.emit(s,o)}on(s,o){return this._emitter.on(s,o)}once(s,o){return this._emitter.once(s,o)}hasEventListener(s){return this._emitter.hasEventListener(s)}};return n=l([$("esri.core.Evented")],n),n};let r=class extends te{constructor(){super(...arguments),this._emitter=new Zw.EventEmitter(this)}destroy(){this._emitter.clear()}emit(i,n){return this._emitter.emit(i,n)}on(i,n){return this._emitter.on(i,n)}once(i,n){return this._emitter.once(i,n)}hasEventListener(i){return this._emitter.hasEventListener(i)}};r=l([$("esri.core.Evented.EventedAccessor")],r),e.EventedAccessor=r})(Zw||(Zw={}));const cs=Zw;var He;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(He||(He={}));function CO(e){return(t,r)=>{t[r]=e}}let Ov=class extends Az{notify(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onInvalidated(),i.onCommitted()}}};var Wa;let Lle=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}},Fle=class{constructor(t,r,i,n,s){this.target=t,this.added=r,this.removed=i,this.start=n,this.deleteCount=s}};const xn=new _p(Lle,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1});function c4(e){e&&typeof e=="object"&&"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}function CT(e){return e?e instanceof Va?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function AT(e){if(e!=null&&e.length)return e[0]}function Dle(e,t,r,i){const n=Math.min(e.length-r,t.length-i);let s=0;for(;s<n&&e[r+s]===t[i+s];)s++;return s}function wG(e,t,r,i){t&&t.forEach((n,s,o)=>{e.push(n),wG(e,r.call(i,n,s,o),r,i)})}const El=new Set,Ml=new Set,Il=new Set,RT=new Map;let jle=0,Va=Wa=class extends cs.EventedAccessor{static isCollection(e){return e!=null&&e instanceof Wa}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new Ov,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:jle++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof Wa?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return he(this._observable),this._items}set items(e){this._emitBeforeChanges(He.ADD)||(this._splice(0,this.length,CT(e)),this._emitAfterChanges(He.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,t){if(this.destroyed)return Be();if(e==="change"){const r=this._chgListeners,i={removed:!1,callback:t};return r.push(i),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),Be(()=>{i.removed=!0,r.splice(r.indexOf(i),1)})}return this._emitter.on(e,t)}once(e,t){const r="deref"in t?()=>t.deref():()=>t,i=this.on(e,n=>{var s;(s=r())==null||s.call(null,n),i.remove()});return i}add(e,t){if(he(this._observable),this._emitBeforeChanges(He.ADD))return this;const r=this.getNextIndex(t??null);return this._splice(r,0,[e]),this._emitAfterChanges(He.ADD),this}addMany(e,t=this._items.length){if(he(this._observable),!(e!=null&&e.length))return this;if(this._emitBeforeChanges(He.ADD))return this;const r=this.getNextIndex(t);return this._splice(r,0,CT(e)),this._emitAfterChanges(He.ADD),this}at(e){if(he(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(he(this._observable),!this.length||this._emitBeforeChanges(He.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(He.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return he(this._observable),this._createNewInstance({items:this._items.map(C)})}concat(...e){he(this._observable);const t=e.map(CT);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(he(this._observable),!this.length||this._emitBeforeChanges(He.REMOVE))return;const r=this._splice(0,this.length),i=r.length;for(let n=0;n<i;n++)e.call(t,r[n],n,r);this._emitAfterChanges(He.REMOVE)}destroyAll(){this.drain(c4)}destroyMany(e){const t=this.removeMany(e);return t.forEach(c4),t}every(e,t){return he(this._observable),this._items.every(e,t)}filter(e,t){let r;return he(this._observable),r=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:r})}find(e,t){return he(this._observable),this._items.find(e,t)}findIndex(e,t){return he(this._observable),this._items.findIndex(e,t)}flatten(e,t){he(this._observable);const r=[];return wG(r,this,e,t),new Wa(r)}forEach(e,t){return he(this._observable),this._items.forEach(e,t)}getItemAt(e){return he(this._observable),this._items[e]}getNextIndex(e){he(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return he(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return he(this._observable),this._items.indexOf(e,t)}join(e=","){return he(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return he(this._observable),this._items.lastIndexOf(e,t)}map(e,t){he(this._observable);const r=this._items.map(e,t);return new Wa({items:r})}reorder(e,t=this.length-1){he(this._observable);const r=this.indexOf(e);if(r!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(He.MOVE))return e;this._splice(r,1),this._splice(t,0,[e]),this._emitAfterChanges(He.MOVE)}return e}}pop(){if(he(this._observable),!this.length||this._emitBeforeChanges(He.REMOVE))return;const e=AT(this._splice(this.length-1,1));return this._emitAfterChanges(He.REMOVE),e}push(...e){return he(this._observable),this._emitBeforeChanges(He.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(He.ADD)),this.length}reduce(e,t){he(this._observable);const r=this._items;return arguments.length===2?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){he(this._observable);const r=this._items;return arguments.length===2?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return he(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(he(this._observable),e<0||e>=this.length||this._emitBeforeChanges(He.REMOVE))return;const t=AT(this._splice(e,1));return this._emitAfterChanges(He.REMOVE),t}removeMany(e){if(he(this._observable),!(e!=null&&e.length)||this._emitBeforeChanges(He.REMOVE))return[];const t=e instanceof Wa?e.toArray():e,r=this._items,i=[],n=t.length;for(let s=0;s<n;s++){const o=t[s],a=r.indexOf(o);if(a>-1){const u=1+Dle(t,r,s+1,a+1),d=this._splice(a,u);d&&d.length>0&&i.push.apply(i,d),s+=u-1}}return this._emitAfterChanges(He.REMOVE),i}reverse(){if(he(this._observable),this._emitBeforeChanges(He.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(He.MOVE),this}shift(){if(he(this._observable),!this.length||this._emitBeforeChanges(He.REMOVE))return;const e=AT(this._splice(0,1));return this._emitAfterChanges(He.REMOVE),e}slice(e=0,t=this.length){return he(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return he(this._observable),this._items.some(e,t)}sort(e){if(he(this._observable),!this.length||this._emitBeforeChanges(He.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(He.MOVE),this}splice(e,t,...r){he(this._observable);const i=(t?He.REMOVE:0)|(r.length?He.ADD:0);if(this._emitBeforeChanges(i))return[];const n=this._splice(e,t,r)||[];return this._emitAfterChanges(i),n}toArray(){return he(this._observable),this._items.slice()}toJSON(){return he(this._observable),this.toArray()}toLocaleString(){return he(this._observable),this._items.toLocaleString()}toString(){return he(this._observable),this._items.toString()}unshift(...e){return he(this._observable),!e.length||this._emitBeforeChanges(He.ADD)||(this._splice(0,0,e),this._emitAfterChanges(He.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,r){const i=this._items,n=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=Mv(()=>this._dispatchChange())),e<0&&(e+=this.length),t){if(o=i.splice(e,t),this.hasEventListener("before-remove")){const a=xn.acquire();a.target=this,a.cancellable=!0;for(let u=0,d=o.length;u<d;u++)s=o[u],a.reset(s),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(u,1),i.splice(e,0,s),e+=1,u-=1,d-=1);xn.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=xn.acquire();a.target=this,a.cancellable=!1;const u=o.length;for(let d=0;d<u;d++)a.reset(o[d]),this.emit("after-remove",a);xn.release(a)}}if(r!=null&&r.length){if(n){const h=[];for(const f of r){const m=n.ensureType(f);m==null&&f!=null||h.push(m)}r=h}const a=this.hasEventListener("before-add"),u=this.hasEventListener("after-add"),d=e===this.length;if(a||u){const h=xn.acquire();h.target=this,h.cancellable=!0;const f=xn.acquire();f.target=this,f.cancellable=!1;for(const m of r)a?(h.reset(m),this.emit("before-add",h),h.defaultPrevented||(d?i.push(m):i.splice(e++,0,m),this._set("length",i.length),u&&(f.reset(m),this.emit("after-add",f)))):(d?i.push(m):i.splice(e++,0,m),this._set("length",i.length),f.reset(m),this.emit("after-add",f));xn.release(f),xn.release(h)}else{if(d)for(const h of r)i.push(h);else i.splice(e,0,...r);this._set("length",i.length)}}if((r!=null&&r.length||o!=null&&o.length)&&this._notifyChangeEvent(r,o),this.hasEventListener("after-splice")){const a=new Fle(this,r,o,e,t);this.emit("after-splice",a)}return o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=xn.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,xn.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=xn.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),xn.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const r=t.changes;El.clear(),Ml.clear(),Il.clear();for(const{added:u,removed:d}of r){if(u)if(Il.size===0&&Ml.size===0)for(const h of u)El.add(h);else for(const h of u)Ml.has(h)?(Il.add(h),Ml.delete(h)):Il.has(h)||El.add(h);if(d)if(Il.size===0&&El.size===0)for(const h of d)Ml.add(h);else for(const h of d)El.has(h)?El.delete(h):(Il.delete(h),Ml.add(h))}const i=wi.acquire();El.forEach(u=>{i.push(u)});const n=wi.acquire();Ml.forEach(u=>{n.push(u)});const s=this._items,o=t.items,a=wi.acquire();if(Il.forEach(u=>{o.indexOf(u)!==s.indexOf(u)&&a.push(u)}),t.listeners&&(i.length||n.length||a.length)){const u={target:this,added:i,removed:n,moved:a},d=t.listeners.length;for(let h=0;h<d;h++){const f=t.listeners[h];f.removed||f.callback.call(this,u)}}wi.release(i),wi.release(n),wi.release(a)}El.clear(),Ml.clear(),Il.clear()}};Va.ofType=e=>{if(!e)return Wa;if(RT.has(e))return RT.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const i in e.typeMap){const n=e.typeMap[i].prototype.declaredClass;t?t+=` | ${n}`:t=n}let r=class extends Wa{};return l([CO({Type:e,ensureType:typeof e=="function"?bt(e):ss(e)})],r.prototype,"itemType",void 0),r=l([$(`esri.core.Collection<${t}>`)],r),RT.set(e,r),r},l([c()],Va.prototype,"_updating",void 0),l([c()],Va.prototype,"length",void 0),l([c()],Va.prototype,"items",null),l([c({readOnly:!0})],Va.prototype,"updating",null),Va=Wa=l([$("esri.core.Collection")],Va);const Y=Va;function $Pe(e,t,r){return Od(e.map((i,n)=>t.apply(r,[i,n])))}async function Vle(e,t,r){return(await Od(e.map((i,n)=>t.apply(r,[i,n])))).map(i=>i.value)}function AO(e){return{ok:!0,value:e}}function RO(e){return{ok:!1,error:e}}function Ule(e){return e!=null&&e.ok===!0?e.value:null}function zle(e){return e!=null&&e.ok===!1?e.error:null}async function U2(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return AO(await e)}catch(t){return RO(t)}}async function Gle(e){try{return AO(await e)}catch(t){return Do(t),RO(t)}}function OO(e,t){return new Ll(e,t)}let Ll=class extends te{get value(){return Ule(this._result)}get error(){return zle(this._result)}get finished(){return this._result!=null}constructor(t,r){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=ep(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:i}=this._abortController;this.promise=t(i),this.promise.then(n=>{this._result=AO(n),this._cleanup()},n=>{this._result=RO(n),this._cleanup()}),this._abortHandle=es(r,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=wt(this._abortHandle),this._abortController=null}};l([c()],Ll.prototype,"value",null),l([c()],Ll.prototype,"error",null),l([c()],Ll.prototype,"finished",null),l([c()],Ll.prototype,"promise",void 0),l([c()],Ll.prototype,"_result",void 0),Ll=l([$("esri.core.asyncUtils.ReactiveTask")],Ll);function ce(e,t,r={}){return kO(e,t,r,_G)}function as(e,t,r={}){return kO(e,t,r,bG)}function kO(e,t,r={},i){let n=null;const s=r.once?(o,a)=>{i(o)&&(wt(n),t(o,a))}:(o,a)=>{i(o)&&t(o,a)};if(n=Hse(e,s,r.sync,r.equals),r.initial){const o=e();s(o,o)}return n}function pl(e,t,r,i={}){let n=null,s=null,o=null;function a(){var h;n&&s&&(s.remove(),(h=i.onListenerRemove)==null||h.call(i,n),n=null,s=null)}function u(h){i.once&&i.once&&wt(o),r(h)}const d=ce(e,(h,f)=>{var m;a(),A2(h)&&(n=h,s=xv(h,t,u),(m=i.onListenerAdd)==null||m.call(i,h))},{sync:i.sync,initial:!0});return o=Be(()=>{d.remove(),a()}),o}function up(e,t){return Ble(e,bG,t)}function Ble(e,t,r){if(Xs(r))return Promise.reject(ot());const i=e();if(t!=null&&t(i))return Promise.resolve(i);let n=null;function s(){n=wt(n)}return new Promise((o,a)=>{n=Sv([es(r,()=>{s(),a(ot())}),kO(e,u=>{s(),o(u)},{sync:!1,once:!0},t??_G)])})}function _G(e){return!0}function bG(e){return!!e}function qle(e,t,r={}){let i=!1;const n=ce(e,(s,o)=>{i||t(s,o)},r);return{remove(){n.remove()},pause(){i=!0},resume(){i=!1}}}const Jo={sync:!0},zt={initial:!0},dn={sync:!0,initial:!0};let Jp=class extends Y{constructor(t){super(t),this.getCollections=null}initialize(){this.addHandles(Gz(()=>this._refresh(),Jo))}destroy(){this.getCollections=null}_refresh(){const t=this.getCollections!=null?this.getCollections():null;if(t==null)return void this.removeAll();let r=0;for(const i of t)i!=null&&(r=this._processCollection(r,i));this.splice(r,this.length)}_createNewInstance(t){return new Y(t)}_processCollection(t,r){if(!r)return t;const i=this.itemFilterFunction??(n=>!!n);for(const n of r)if(n){if(i(n)){const s=this.indexOf(n,t);s>=0?s!==t&&this.reorder(n,t):this.add(n,t),++t}if(this.getChildrenFunction){const s=this.getChildrenFunction(n);if(Array.isArray(s))for(const o of s)t=this._processCollection(t,o);else t=this._processCollection(t,s)}}return t}};l([c()],Jp.prototype,"getCollections",void 0),l([c()],Jp.prototype,"getChildrenFunction",void 0),l([c()],Jp.prototype,"itemFilterFunction",void 0),Jp=l([$("esri.core.CollectionFlattener")],Jp);const B0=Jp;let TS=class{constructor(t=r=>r.values().next().value){this._peeker=t,this._observable=new Ov,this._items=new Set}get length(){return he(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return he(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const r=this.length;return this._items.forEach(i=>{t(i)||this._items.delete(i)}),r!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){he(this._observable),yield*this._items}};const SG=new FinalizationRegistry(e=>{e.close()});function Hle(e,t){SG.register(e,t,t)}function Wle(e){SG.unregister(e)}function $G(e,t){return new Proxy({},{get:(r,i,n)=>(...s)=>{let o,a;const u=s[s.length-1];return Zle(u)&&(o=u.signal,a=u.transferList,s.pop()),e.apply(t?`${t}.${i.toString()}`:i.toString(),s,{transferList:a,signal:o})}})}function Zle(e){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&("signal"in e||"transferList"in e||Object.keys(e).length===0)}const Jle={statsWorker:()=>D(()=>import("./statsWorker-CeupFwGw.js"),__vite__mapDeps([2,3,4,5,6]),import.meta.url),geometryEngineWorker:()=>D(()=>import("./geometryEngineWorker-BiqU-FdE.js"),__vite__mapDeps([7,8,9,1,10]),import.meta.url),CSVSourceWorker:()=>D(()=>import("./CSVSourceWorker-BWRnw5cy.js"),__vite__mapDeps([11,12,10,13,14,15,16,17,18,19,20,21,22,23,24,25,3,4,5,6,26,27,28]),import.meta.url),EdgeProcessingWorker:()=>D(()=>import("./EdgeProcessingWorker-CRKsNh3t.js"),__vite__mapDeps([29,30,31,32,33,34,35,36,37,38,39]),import.meta.url),ElevationSamplerWorker:()=>D(()=>import("./ElevationSamplerWorker-DKfIOhp7.js"),__vite__mapDeps([40,18,41,42,43,44,45,46,47,48,49,31,50]),import.meta.url),FeatureServiceSnappingSourceWorker:()=>D(()=>import("./FeatureServiceSnappingSourceWorker-DMYPLaV4.js"),__vite__mapDeps([51,14,15,13,16,17,18,19,20,10,21,22,23,24,25,3,4,5,6,52,53,54,55]),import.meta.url),GeoJSONSourceWorker:()=>D(()=>import("./GeoJSONSourceWorker-C9bKm0Xo.js"),__vite__mapDeps([56,15,13,16,14,17,18,19,20,10,21,22,23,24,25,3,4,5,6,57,12,27,28,58]),import.meta.url),LercWorker:()=>D(()=>import("./LercWorker-DeNp0Y9x.js"),[],import.meta.url),MemorySourceWorker:()=>D(()=>import("./MemorySourceWorker-C5PDn9do.js"),__vite__mapDeps([59,15,13,16,60,14,17,18,19,20,10,21,22,23,24,25,3,4,5,6,27,28,58,12]),import.meta.url),PBFDecoderWorker:()=>D(()=>import("./PBFDecoderWorker-CF71cQtA.js"),__vite__mapDeps([61,15,13,16,52,53]),import.meta.url),FeaturePipelineWorker:()=>D(()=>import("./FeaturePipelineWorker-CfOF6LzE.js"),__vite__mapDeps([62,63,64,65,66,39,24,67,68,13,69,70,71,33,19,15,16,20,10,72,73,74,75,76,77,21,22,23,25,3,4,5,6,54,52,53,78,57,12,27,28,58,79,80]),import.meta.url),PointCloudWorker:()=>D(()=>import("./PointCloudWorker-BUYbpX93.js"),__vite__mapDeps([81,82,43,83,84,85,86,37,87,44,45,46,88]),import.meta.url),RasterWorker:()=>D(()=>import("./RasterWorker-j4g9THxu.js"),__vite__mapDeps([89,90,91,1,92,93]),import.meta.url),SceneLayerSnappingSourceWorker:()=>D(()=>import("./SceneLayerSnappingSourceWorker-DM-Lu7gi.js"),__vite__mapDeps([94,95,96,43,88,44,83,97,33,34,35,36,30,31,32,37,38,39]),import.meta.url),SceneLayerWorker:()=>D(()=>import("./SceneLayerWorker-n_TYPi8Y.js"),__vite__mapDeps([98,41,49,96,43,88,44,83,99,100,47,86,37,101,102,103,71,87,82,45,46]),import.meta.url),WFSSourceWorker:()=>D(()=>import("./WFSSourceWorker--w9g4Yqa.js"),__vite__mapDeps([104,15,13,16,14,17,18,19,20,10,21,22,23,24,25,3,4,5,6,57,12,58,105,106]),import.meta.url),WorkerTileHandler:()=>D(()=>import("./WorkerTileHandler-BUnkCLgq.js"),__vite__mapDeps([107,108,69,70,109,110,53,74,111,112,39,75,68]),import.meta.url),Lyr3DWorker:()=>D(()=>import("./Lyr3DWorker-BkW9E0k9.js"),[],import.meta.url),Feature3DPipelineWorker:()=>D(()=>import("./HUDMaterial.glsl-BvEi0gEL.js").then(e=>e.F),__vite__mapDeps([113,22,15,13,16,23,24,19,20,10,25,3,4,5,6,18,54,52,53,36,114,115,116,33,30,31,32,102,103,37,71,117,96,43,88,44,83,95,118,87,82,45,46,119,38,39,120,97,121,66,122,101,100,47,41,84,123]),import.meta.url)},TG="worker:port-closed";var Mr;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(Mr||(Mr={}));let Kle=0;function xG(){return Kle++}function Yle(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function q0(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function PO(e,t,r,i){if(t.type===Mr.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==Mr.INVOKE&&t.type!==Mr.RESPONSE)return void e.postMessage(t);let n;if(Yle(r)?(n=d4(r.transferList),t.data=r.result):(n=d4(i),t.data=r),n){if(L("ff")){for(const s of n)if("byteLength"in s&&s.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case Mr.INVOKE:throw o;case Mr.RESPONSE:return void PO(e,{type:Mr.RESPONSE,jobId:t.jobId,error:q0(o)})}}}e.postMessage(t,n)}else e.postMessage(t)}function H0(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function d4(e){if(!(e!=null&&e.length))return null;if(L("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(r=>!Qle(r));return t.length?t:null}function Qle(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="ArrayBuffer"}async function MPe(e){try{return await e}catch(t){const r=(t==null?void 0:t.name)===TG;if(!(Or(t)||r))throw t;return}}const{CLOSE:p4,ABORT:h4,INVOKE:f4,RESPONSE:Qm,OPEN_PORT:m4,ON:Xle}=Mr,eue=2;let tue=class{constructor(t){this._invoke=t,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(t){t.type===Mr.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},Qu=class Kp{static connect(t,r){const i=new MessageChannel;let n;n=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const s=new Kp(i.port1,{channel:i,client:n,schedule:r});return typeof n=="object"&&"remoteClient"in n&&(n.remoteClient=s),Kp.clients.set(s,n),i.port2}static loadWorker(t){const r=Jle[t];return r?r():Promise.resolve(null)}constructor(t,r,i){this._port=t,this._jobQueue=i,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new tue(n=>this._onInvokeMessage(n)),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:p4}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const n=i==null?void 0:i.signal,s=i==null?void 0:i.transferList;if(!this._port)return Promise.reject(new R(TG,`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:r}));const o=xG();return new Promise((a,u)=>{if(Xs(n))return this._processWork(),void u(ot());const d=es(n,()=>{const f=this._outJobs.get(o);f&&(this._outJobs.delete(o),this._processWork(),wt(f.abortHandle),this._post({type:h4,jobId:o}),u(ot()))}),h={resolve:a,reject:u,abortHandle:d,debugInfo:t};this._outJobs.set(o,h),this._post({type:f4,jobId:o,methodName:t,abortable:n!=null},r,s)})}createInvokeProxy(t){return $G(this,t)}on(t,r){const i=new MessageChannel;function n(s){r(s.data)}return this._port.postMessage({type:Mr.ON,eventType:t,port:i.port2},[i.port2]),i.port1.addEventListener("message",n),i.port1.start(),Be(()=>{i.port1.postMessage({type:Mr.CLOSE}),i.port1.close(),i.port1.removeEventListener("message",n)})}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:m4,port:t.port2}),t.port1}_processWork(){var o;if(this._outJobs.size>=eue)return;const t=(o=this._jobQueue)==null?void 0:o.pop();if(!t)return;const{methodName:r,data:i,invokeOptions:n,resolver:s}=t;this.apply(r,i,n).then(a=>s.resolve(a)).catch(a=>s.reject(a))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{wt(t.abortHandle),t.reject(ot(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule(()=>this._processMessage(t,!0)):this._processMessage(t,!1)}_processMessage(t,r){const i=H0(t);if(i)switch(i.type){case Qm:this._onResponseMessage(i);break;case f4:r?this._onInvokeMessage(i):this._invokeQueue.push(i);break;case h4:this._onAbortMessage(i);break;case p4:this._onCloseMessage();break;case m4:this._onOpenPortMessage(i);break;case Xle:this._onOnMessage(i)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,n=r.get(i);this._invokeQueue.push(t),n&&(n.controller&&n.controller.abort(),r.delete(i))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&Kp.clients.get(this)===t&&t.destroy(),Kp.clients.delete(this),t!=null&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:r,jobId:i,data:n=[],abortable:s}=t,o=s?new AbortController:null,a=this._inJobs;let u,d=this._client,h=d[r];try{if(!h&&r&&r.includes(".")){const f=r.split(".");for(let m=0;m<f.length-1;m++)d=d[f[m]],h=d[f[m+1]]}if(typeof h!="function")throw new TypeError(`${r} is not a function`);n.push({client:this,signal:o?o.signal:null}),u=h.apply(d,n)}catch(f){return void this._post({type:Qm,jobId:i,error:q0(f)})}Qo(u)?(a.set(i,{controller:o,promise:u}),u.then(f=>{a.has(i)&&(a.delete(i),this._post({type:Qm,jobId:i},f))},f=>{a.has(i)&&(a.delete(i),Or(f)||this._post({type:Qm,jobId:i,error:q0(f||{message:`Error encountered at method ${r}`})}))})):this._post({type:Qm,jobId:i},u)}_onOpenPortMessage(t){new Kp(t.port,{client:this._client})}_onOnMessage(t){const{port:r}=t,i=this._client.on(t.eventType,s=>{r.postMessage(s)}),n=xv(t.port,"message",s=>{const o=H0(s);(o==null?void 0:o.type)===Mr.CLOSE&&(n.remove(),i.remove(),r.close())})}_onResponseMessage(t){const{jobId:r,error:i,data:n}=t,s=this._outJobs;if(!s.has(r))return;const o=s.get(r);s.delete(r),this._processWork(),wt(o.abortHandle),i?o.reject(R.fromJSON(JSON.parse(i))):o.resolve(n)}_post(t,r,i){return PO(this._port,t,r,i)}};Qu.kernelInfo={buildDate:f7,fullVersion:gO,revision:m7},Qu.clients=new Map;let rue=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new TS}destroy(){this.close()}get closed(){var t;return!((t=this._clients)!=null&&t.length)}open(t,r){return new Promise((i,n)=>{let s=!0;const o=a=>{_t(r.signal),s&&(s=!1,a())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let a=0;a<t.length;++a){const u=t[a];Qo(u)?this._clientPromises[a]=u.then(d=>(this._clients[a]=new Qu(d,r,this._ongoingJobsQueue),o(i),this._clients[a]),()=>(o(n),null)):(this._clients[a]=new Qu(u,r,this._ongoingJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(i))}})}broadcast(t,r,i){const n=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];n[s]=o.then(a=>a==null?void 0:a.invoke(t,r,i))}return n}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject(ot(`Worker closing, aborting job calling '${t.methodName}'`));for(const r of this._clientPromises)r.then(i=>i==null?void 0:i.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,Wle(this)}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const n=_n();this._ongoingJobsQueue.push({methodName:t,data:r,invokeOptions:i,resolver:n});for(let s=0;s<this._clientPromises.length;s++){const o=this._clients[s];o?o.jobAdded():this._clientPromises[s].then(a=>a==null?void 0:a.jobAdded())}return n.promise}createInvokeProxy(t){return $G(this,t)}on(t,r){return Promise.all(this._clientPromises).then(()=>Sv(this._clients.map(i=>i.on(t,r))))}openPorts(){return new Promise(t=>{const r=new Array(this._clientPromises.length);let i=r.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(s=>{s&&(r[n]=s.openPort()),--i==0&&t(r)})})}get test(){}};const iue={async request(e,t){var o,a;const r=e.options,i=r.responseType;r.signal=t==null?void 0:t.signal,r.responseType=i==="native"||i==="native-request-init"?"native-request-init":i&&["blob","json","text"].includes(i)&&((o=yM(e.url))!=null&&o.after)?i:"array-buffer";const n=await Le(e.url,r),s={data:n.data,httpStatus:n.httpStatus,ssl:n.ssl};switch((a=n.requestOptions)==null?void 0:a.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}};let Kg;var N8,L8;const nue=((N8=globalThis.esriConfig)==null?void 0:N8.locale)??((L8=globalThis.dojoConfig)==null?void 0:L8.locale);var F8;const Yg=(F8=globalThis.document)==null?void 0:F8.documentElement;function EG(){var r;const e=Yg==null?void 0:Yg.getAttribute("lang"),t=(r=globalThis.navigator)==null?void 0:r.language;return nue??e??t??"en"}function qi(){return Kg===void 0&&(Kg=EG()),Kg}function sue(e=qi()){const t=/^([a-zA-Z]{2,3})(?:[_-][a-zA-Z0-9]+)*$/.exec(e);return t==null?void 0:t[1].toLowerCase()}const Jw=[];function z2(e){return Jw.push(e),Be(()=>Jw.splice(Jw.indexOf(e),1))}const Kw=[];function NO(e){return Kw.push(e),Be(()=>Kw.splice(Kw.indexOf(e),1))}function y4(){const e=EG();Kg!==e&&([...Kw].forEach(t=>t(e)),Kg=e,[...Jw].forEach(t=>t(e)))}var D8;(D8=globalThis.addEventListener)==null||D8.call(globalThis,"languagechange",y4),Yg&&new MutationObserver(()=>{y4()}).observe(Yg,{attributeFilter:["lang"]});const g4=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class Sp extends Error{}class oue extends Sp{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class aue extends Sp{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class lue extends Sp{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class cf extends Sp{}class MG extends Sp{constructor(t){super(`Invalid unit ${t}`)}}class si extends Sp{}class Cl extends Sp{constructor(){super("Zone is an abstract class")}}const Q="numeric",eo="short",gn="long",xS={year:Q,month:Q,day:Q},IG={year:Q,month:eo,day:Q},uue={year:Q,month:eo,day:Q,weekday:eo},CG={year:Q,month:gn,day:Q},AG={year:Q,month:gn,day:Q,weekday:gn},RG={hour:Q,minute:Q},OG={hour:Q,minute:Q,second:Q},kG={hour:Q,minute:Q,second:Q,timeZoneName:eo},PG={hour:Q,minute:Q,second:Q,timeZoneName:gn},NG={hour:Q,minute:Q,hourCycle:"h23"},LG={hour:Q,minute:Q,second:Q,hourCycle:"h23"},FG={hour:Q,minute:Q,second:Q,hourCycle:"h23",timeZoneName:eo},DG={hour:Q,minute:Q,second:Q,hourCycle:"h23",timeZoneName:gn},jG={year:Q,month:Q,day:Q,hour:Q,minute:Q},VG={year:Q,month:Q,day:Q,hour:Q,minute:Q,second:Q},UG={year:Q,month:eo,day:Q,hour:Q,minute:Q},zG={year:Q,month:eo,day:Q,hour:Q,minute:Q,second:Q},cue={year:Q,month:eo,day:Q,weekday:eo,hour:Q,minute:Q},GG={year:Q,month:gn,day:Q,hour:Q,minute:Q,timeZoneName:eo},BG={year:Q,month:gn,day:Q,hour:Q,minute:Q,second:Q,timeZoneName:eo},qG={year:Q,month:gn,day:Q,weekday:gn,hour:Q,minute:Q,timeZoneName:gn},HG={year:Q,month:gn,day:Q,weekday:gn,hour:Q,minute:Q,second:Q,timeZoneName:gn};class Tm{get type(){throw new Cl}get name(){throw new Cl}get ianaName(){return this.name}get isUniversal(){throw new Cl}offsetName(t,r){throw new Cl}formatOffset(t,r){throw new Cl}offset(t){throw new Cl}equals(t){throw new Cl}get isValid(){throw new Cl}}let OT=null;class G2 extends Tm{static get instance(){return OT===null&&(OT=new G2),OT}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return tB(t,r,i)}formatOffset(t,r){return Qg(this.offset(t),r)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let Yw={};function due(e){return Yw[e]||(Yw[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Yw[e]}const pue={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function hue(e,t){const r=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,n,s,o,a,u,d,h]=i;return[o,n,s,a,u,d,h]}function fue(e,t){const r=e.formatToParts(t),i=[];for(let n=0;n<r.length;n++){const{type:s,value:o}=r[n],a=pue[s];s==="era"?i[a]=o:Se(a)||(i[a]=parseInt(o,10))}return i}let T1={};class bn extends Tm{static create(t){return T1[t]||(T1[t]=new bn(t)),T1[t]}static resetCache(){T1={},Yw={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=bn.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return tB(t,r,i,this.name)}formatOffset(t,r){return Qg(this.offset(t),r)}offset(t){const r=new Date(t);if(isNaN(r))return NaN;const i=due(this.name);let[n,s,o,a,u,d,h]=i.formatToParts?fue(i,r):hue(i,r);a==="BC"&&(n=-Math.abs(n)+1);const m=q2({year:n,month:s,day:o,hour:u===24?0:u,minute:d,second:h,millisecond:0});let y=+r;const g=y%1e3;return y-=g>=0?g:1e3+g,(m-y)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let v4={};function mue(e,t={}){const r=JSON.stringify([e,t]);let i=v4[r];return i||(i=new Intl.ListFormat(e,t),v4[r]=i),i}let UM={};function zM(e,t={}){const r=JSON.stringify([e,t]);let i=UM[r];return i||(i=new Intl.DateTimeFormat(e,t),UM[r]=i),i}let GM={};function yue(e,t={}){const r=JSON.stringify([e,t]);let i=GM[r];return i||(i=new Intl.NumberFormat(e,t),GM[r]=i),i}let BM={};function gue(e,t={}){const{base:r,...i}=t,n=JSON.stringify([e,i]);let s=BM[n];return s||(s=new Intl.RelativeTimeFormat(e,t),BM[n]=s),s}let Ay=null;function vue(){return Ay||(Ay=new Intl.DateTimeFormat().resolvedOptions().locale,Ay)}let w4={};function wue(e){let t=w4[e];if(!t){const r=new Intl.Locale(e);t="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,w4[e]=t}return t}function _ue(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const r=e.indexOf("-u-");if(r===-1)return[e];{let i,n;try{i=zM(e).resolvedOptions(),n=e}catch{const u=e.substring(0,r);i=zM(u).resolvedOptions(),n=u}const{numberingSystem:s,calendar:o}=i;return[n,s,o]}}function bue(e,t,r){return(r||t)&&(e.includes("-u-")||(e+="-u"),r&&(e+=`-ca-${r}`),t&&(e+=`-nu-${t}`)),e}function Sue(e){const t=[];for(let r=1;r<=12;r++){const i=ve.utc(2009,r,1);t.push(e(i))}return t}function $ue(e){const t=[];for(let r=1;r<=7;r++){const i=ve.utc(2016,11,13+r);t.push(e(i))}return t}function x1(e,t,r,i){const n=e.listingMode();return n==="error"?null:n==="en"?r(t):i(t)}function Tue(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class xue{constructor(t,r,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:n,floor:s,...o}=i;if(!r||Object.keys(o).length>0){const a={useGrouping:!1,...i};i.padTo>0&&(a.minimumIntegerDigits=i.padTo),this.inf=yue(t,a)}}format(t){if(this.inf){const r=this.floor?Math.floor(t):t;return this.inf.format(r)}else{const r=this.floor?Math.floor(t):VO(t,3);return Xt(r,this.padTo)}}}class Eue{constructor(t,r,i){this.opts=i,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&bn.create(a).valid?(n=a,this.dt=t):(n="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,n=t.zone.name):(n="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const s={...this.opts};s.timeZone=s.timeZone||n,this.dtf=zM(r,s)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(r=>{if(r.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:i}}else return r}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class Mue{constructor(t,r,i){this.opts={style:"long",...i},!r&&XG()&&(this.rtf=gue(t,i))}format(t,r){return this.rtf?this.rtf.format(t,r):Kue(r,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,r){return this.rtf?this.rtf.formatToParts(t,r):[]}}const Iue={firstDay:1,minimalDays:4,weekend:[6,7]};class Qe{static fromOpts(t){return Qe.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,r,i,n,s=!1){const o=t||Vt.defaultLocale,a=o||(s?"en-US":vue()),u=r||Vt.defaultNumberingSystem,d=i||Vt.defaultOutputCalendar,h=qM(n)||Vt.defaultWeekSettings;return new Qe(a,u,d,h,o)}static resetCache(){Ay=null,UM={},GM={},BM={}}static fromObject({locale:t,numberingSystem:r,outputCalendar:i,weekSettings:n}={}){return Qe.create(t,r,i,n)}constructor(t,r,i,n,s){const[o,a,u]=_ue(t);this.locale=o,this.numberingSystem=r||a||null,this.outputCalendar=i||u||null,this.weekSettings=n,this.intl=bue(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Tue(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&r?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:Qe.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,qM(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,r=!1){return x1(this,t,nB,()=>{const i=r?{month:t,day:"numeric"}:{month:t},n=r?"format":"standalone";return this.monthsCache[n][t]||(this.monthsCache[n][t]=Sue(s=>this.extract(s,i,"month"))),this.monthsCache[n][t]})}weekdays(t,r=!1){return x1(this,t,aB,()=>{const i=r?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},n=r?"format":"standalone";return this.weekdaysCache[n][t]||(this.weekdaysCache[n][t]=$ue(s=>this.extract(s,i,"weekday"))),this.weekdaysCache[n][t]})}meridiems(){return x1(this,void 0,()=>lB,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ve.utc(2016,11,13,9),ve.utc(2016,11,13,19)].map(r=>this.extract(r,t,"dayperiod"))}return this.meridiemCache})}eras(t){return x1(this,t,uB,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[ve.utc(-40,1,1),ve.utc(2017,1,1)].map(i=>this.extract(i,r,"era"))),this.eraCache[t]})}extract(t,r,i){const n=this.dtFormatter(t,r),s=n.formatToParts(),o=s.find(a=>a.type.toLowerCase()===i);return o?o.value:null}numberFormatter(t={}){return new xue(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,r={}){return new Eue(t,this.intl,r)}relFormatter(t={}){return new Mue(this.intl,this.isEnglish(),t)}listFormatter(t={}){return mue(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:eB()?wue(this.locale):Iue}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let kT=null;class Ur extends Tm{static get utcInstance(){return kT===null&&(kT=new Ur(0)),kT}static instance(t){return t===0?Ur.utcInstance:new Ur(t)}static parseSpecifier(t){if(t){const r=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new Ur(H2(r[1],r[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Qg(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Qg(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,r){return Qg(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class Cue extends Tm{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Tu(e,t){if(Se(e)||e===null)return t;if(e instanceof Tm)return e;if(Nue(e)){const r=e.toLowerCase();return r==="default"?t:r==="local"||r==="system"?G2.instance:r==="utc"||r==="gmt"?Ur.utcInstance:Ur.parseSpecifier(r)||bn.create(e)}else return qu(e)?Ur.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new Cue(e)}const LO={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},_4={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Aue=LO.hanidec.replace(/[\[|\]]/g,"").split("");function Rue(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(e[r].search(LO.hanidec)!==-1)t+=Aue.indexOf(e[r]);else for(const n in _4){const[s,o]=_4[n];i>=s&&i<=o&&(t+=i-s)}}return parseInt(t,10)}else return t}let Yp={};function Oue(){Yp={}}function ms({numberingSystem:e},t=""){const r=e||"latn";return Yp[r]||(Yp[r]={}),Yp[r][t]||(Yp[r][t]=new RegExp(`${LO[r]}${t}`)),Yp[r][t]}let b4=()=>Date.now(),S4="system",$4=null,T4=null,x4=null,E4=60,M4,I4=null;class Vt{static get now(){return b4}static set now(t){b4=t}static set defaultZone(t){S4=t}static get defaultZone(){return Tu(S4,G2.instance)}static get defaultLocale(){return $4}static set defaultLocale(t){$4=t}static get defaultNumberingSystem(){return T4}static set defaultNumberingSystem(t){T4=t}static get defaultOutputCalendar(){return x4}static set defaultOutputCalendar(t){x4=t}static get defaultWeekSettings(){return I4}static set defaultWeekSettings(t){I4=qM(t)}static get twoDigitCutoffYear(){return E4}static set twoDigitCutoffYear(t){E4=t%100}static get throwOnInvalid(){return M4}static set throwOnInvalid(t){M4=t}static resetCaches(){Qe.resetCache(),bn.resetCache(),ve.resetCache(),Oue()}}class qs{constructor(t,r){this.reason=t,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const WG=[0,31,59,90,120,151,181,212,243,273,304,334],ZG=[0,31,60,91,121,152,182,213,244,274,305,335];function Yn(e,t){return new qs("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function FO(e,t,r){const i=new Date(Date.UTC(e,t-1,r));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const n=i.getUTCDay();return n===0?7:n}function JG(e,t,r){return r+(kv(e)?ZG:WG)[t-1]}function KG(e,t){const r=kv(e)?ZG:WG,i=r.findIndex(s=>s<t),n=t-r[i];return{month:i+1,day:n}}function DO(e,t){return(e-t+7)%7+1}function ES(e,t=4,r=1){const{year:i,month:n,day:s}=e,o=JG(i,n,s),a=DO(FO(i,n,s),r);let u=Math.floor((o-a+14-t)/7),d;return u<1?(d=i-1,u=W0(d,t,r)):u>W0(i,t,r)?(d=i+1,u=1):d=i,{weekYear:d,weekNumber:u,weekday:a,...W2(e)}}function C4(e,t=4,r=1){const{weekYear:i,weekNumber:n,weekday:s}=e,o=DO(FO(i,1,t),r),a=Mf(i);let u=n*7+s-o-7+t,d;u<1?(d=i-1,u+=Mf(d)):u>a?(d=i+1,u-=Mf(i)):d=i;const{month:h,day:f}=KG(d,u);return{year:d,month:h,day:f,...W2(e)}}function PT(e){const{year:t,month:r,day:i}=e,n=JG(t,r,i);return{year:t,ordinal:n,...W2(e)}}function A4(e){const{year:t,ordinal:r}=e,{month:i,day:n}=KG(t,r);return{year:t,month:i,day:n,...W2(e)}}function R4(e,t){if(!Se(e.localWeekday)||!Se(e.localWeekNumber)||!Se(e.localWeekYear)){if(!Se(e.weekday)||!Se(e.weekNumber)||!Se(e.weekYear))throw new cf("Cannot mix locale-based week fields with ISO-based week fields");return Se(e.localWeekday)||(e.weekday=e.localWeekday),Se(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),Se(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function kue(e,t=4,r=1){const i=B2(e.weekYear),n=Qn(e.weekNumber,1,W0(e.weekYear,t,r)),s=Qn(e.weekday,1,7);return i?n?s?!1:Yn("weekday",e.weekday):Yn("week",e.weekNumber):Yn("weekYear",e.weekYear)}function Pue(e){const t=B2(e.year),r=Qn(e.ordinal,1,Mf(e.year));return t?r?!1:Yn("ordinal",e.ordinal):Yn("year",e.year)}function YG(e){const t=B2(e.year),r=Qn(e.month,1,12),i=Qn(e.day,1,MS(e.year,e.month));return t?r?i?!1:Yn("day",e.day):Yn("month",e.month):Yn("year",e.year)}function QG(e){const{hour:t,minute:r,second:i,millisecond:n}=e,s=Qn(t,0,23)||t===24&&r===0&&i===0&&n===0,o=Qn(r,0,59),a=Qn(i,0,59),u=Qn(n,0,999);return s?o?a?u?!1:Yn("millisecond",n):Yn("second",i):Yn("minute",r):Yn("hour",t)}function Se(e){return typeof e>"u"}function qu(e){return typeof e=="number"}function B2(e){return typeof e=="number"&&e%1===0}function Nue(e){return typeof e=="string"}function Lue(e){return Object.prototype.toString.call(e)==="[object Date]"}function XG(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function eB(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Fue(e){return Array.isArray(e)?e:[e]}function O4(e,t,r){if(e.length!==0)return e.reduce((i,n)=>{const s=[t(n),n];return i&&r(i[0],s[0])===i[0]?i:s},null)[1]}function Due(e,t){return t.reduce((r,i)=>(r[i]=e[i],r),{})}function sm(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function qM(e){if(e==null)return null;if(typeof e!="object")throw new si("Week settings must be an object");if(!Qn(e.firstDay,1,7)||!Qn(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!Qn(t,1,7)))throw new si("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Qn(e,t,r){return B2(e)&&e>=t&&e<=r}function jue(e,t){return e-t*Math.floor(e/t)}function Xt(e,t=2){const r=e<0;let i;return r?i="-"+(""+-e).padStart(t,"0"):i=(""+e).padStart(t,"0"),i}function fu(e){if(!(Se(e)||e===null||e===""))return parseInt(e,10)}function wc(e){if(!(Se(e)||e===null||e===""))return parseFloat(e)}function jO(e){if(!(Se(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function VO(e,t,r=!1){const i=10**t;return(r?Math.trunc:Math.round)(e*i)/i}function kv(e){return e%4===0&&(e%100!==0||e%400===0)}function Mf(e){return kv(e)?366:365}function MS(e,t){const r=jue(t-1,12)+1,i=e+(t-r)/12;return r===2?kv(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function q2(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function k4(e,t,r){return-DO(FO(e,1,t),r)+t-1}function W0(e,t=4,r=1){const i=k4(e,t,r),n=k4(e+1,t,r);return(Mf(e)-i+n)/7}function HM(e){return e>99?e:e>Vt.twoDigitCutoffYear?1900+e:2e3+e}function tB(e,t,r,i=null){const n=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const o={timeZoneName:t,...s},a=new Intl.DateTimeFormat(r,o).formatToParts(n).find(u=>u.type.toLowerCase()==="timezonename");return a?a.value:null}function H2(e,t){let r=parseInt(e,10);Number.isNaN(r)&&(r=0);const i=parseInt(t,10)||0,n=r<0||Object.is(r,-0)?-i:i;return r*60+n}function rB(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new si(`Invalid unit value ${e}`);return t}function IS(e,t){const r={};for(const i in e)if(sm(e,i)){const n=e[i];if(n==null)continue;r[t(i)]=rB(n)}return r}function Qg(e,t){const r=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),n=e>=0?"+":"-";switch(t){case"short":return`${n}${Xt(r,2)}:${Xt(i,2)}`;case"narrow":return`${n}${r}${i>0?`:${i}`:""}`;case"techie":return`${n}${Xt(r,2)}${Xt(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function W2(e){return Due(e,["hour","minute","second","millisecond"])}const Vue=["January","February","March","April","May","June","July","August","September","October","November","December"],iB=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Uue=["J","F","M","A","M","J","J","A","S","O","N","D"];function nB(e){switch(e){case"narrow":return[...Uue];case"short":return[...iB];case"long":return[...Vue];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const sB=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],oB=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],zue=["M","T","W","T","F","S","S"];function aB(e){switch(e){case"narrow":return[...zue];case"short":return[...oB];case"long":return[...sB];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const lB=["AM","PM"],Gue=["Before Christ","Anno Domini"],Bue=["BC","AD"],que=["B","A"];function uB(e){switch(e){case"narrow":return[...que];case"short":return[...Bue];case"long":return[...Gue];default:return null}}function Hue(e){return lB[e.hour<12?0:1]}function Wue(e,t){return aB(t)[e.weekday-1]}function Zue(e,t){return nB(t)[e.month-1]}function Jue(e,t){return uB(t)[e.year<0?0:1]}function Kue(e,t,r="always",i=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(e)===-1;if(r==="auto"&&s){const f=e==="days";switch(t){case 1:return f?"tomorrow":`next ${n[e][0]}`;case-1:return f?"yesterday":`last ${n[e][0]}`;case 0:return f?"today":`this ${n[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),u=a===1,d=n[e],h=i?u?d[1]:d[2]||d[1]:u?n[e][0]:e;return o?`${a} ${h} ago`:`in ${a} ${h}`}function P4(e,t){let r="";for(const i of e)i.literal?r+=i.val:r+=t(i.val);return r}const Yue={D:xS,DD:IG,DDD:CG,DDDD:AG,t:RG,tt:OG,ttt:kG,tttt:PG,T:NG,TT:LG,TTT:FG,TTTT:DG,f:jG,ff:UG,fff:GG,ffff:qG,F:VG,FF:zG,FFF:BG,FFFF:HG};class ui{static create(t,r={}){return new ui(t,r)}static parseFormat(t){let r=null,i="",n=!1;const s=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(i.length>0&&s.push({literal:n||/^\s+$/.test(i),val:i}),r=null,i="",n=!n):n||a===r?i+=a:(i.length>0&&s.push({literal:/^\s+$/.test(i),val:i}),i=a,r=a)}return i.length>0&&s.push({literal:n||/^\s+$/.test(i),val:i}),s}static macroTokenToFormatOpts(t){return Yue[t]}constructor(t,r){this.opts=r,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...r}).format()}dtFormatter(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r})}formatDateTime(t,r){return this.dtFormatter(t,r).format()}formatDateTimeParts(t,r){return this.dtFormatter(t,r).formatToParts()}formatInterval(t,r){return this.dtFormatter(t.start,r).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,r){return this.dtFormatter(t,r).resolvedOptions()}num(t,r=0){if(this.opts.forceSimple)return Xt(t,r);const i={...this.opts};return r>0&&(i.padTo=r),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,r){const i=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(y,g)=>this.loc.extract(t,y,g),o=y=>t.isOffsetFixed&&t.offset===0&&y.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,y.format):"",a=()=>i?Hue(t):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(y,g)=>i?Zue(t,y):s(g?{month:y}:{month:y,day:"numeric"},"month"),d=(y,g)=>i?Wue(t,y):s(g?{weekday:y}:{weekday:y,month:"long",day:"numeric"},"weekday"),h=y=>{const g=ui.macroTokenToFormatOpts(y);return g?this.formatWithSystemDefault(t,g):y},f=y=>i?Jue(t,y):s({era:y},"era"),m=y=>{switch(y){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return n?s({day:"numeric"},"day"):this.num(t.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return d("short",!0);case"cccc":return d("long",!0);case"ccccc":return d("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return d("short",!1);case"EEEE":return d("long",!1);case"EEEEE":return d("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(t.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(t.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(t.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return h(y)}};return P4(ui.parseFormat(r),m)}formatDurationFromString(t,r){const i=u=>{switch(u[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=u=>d=>{const h=i(d);return h?this.num(u.get(h),d.length):d},s=ui.parseFormat(r),o=s.reduce((u,{literal:d,val:h})=>d?u:u.concat(h),[]),a=t.shiftTo(...o.map(i).filter(u=>u));return P4(s,n(a))}}const cB=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function xm(...e){const t=e.reduce((r,i)=>r+i.source,"");return RegExp(`^${t}$`)}function Em(...e){return t=>e.reduce(([r,i,n],s)=>{const[o,a,u]=s(t,n);return[{...r,...o},a||i,u]},[{},null,1]).slice(0,2)}function Mm(e,...t){if(e==null)return[null,null];for(const[r,i]of t){const n=r.exec(e);if(n)return i(n)}return[null,null]}function dB(...e){return(t,r)=>{const i={};let n;for(n=0;n<e.length;n++)i[e[n]]=fu(t[r+n]);return[i,null,r+n]}}const pB=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Que=`(?:${pB.source}?(?:\\[(${cB.source})\\])?)?`,UO=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,hB=RegExp(`${UO.source}${Que}`),zO=RegExp(`(?:T${hB.source})?`),Xue=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,ece=/(\d{4})-?W(\d\d)(?:-?(\d))?/,tce=/(\d{4})-?(\d{3})/,rce=dB("weekYear","weekNumber","weekDay"),ice=dB("year","ordinal"),nce=/(\d{4})-(\d\d)-(\d\d)/,fB=RegExp(`${UO.source} ?(?:${pB.source}|(${cB.source}))?`),sce=RegExp(`(?: ${fB.source})?`);function If(e,t,r){const i=e[t];return Se(i)?r:fu(i)}function oce(e,t){return[{year:If(e,t),month:If(e,t+1,1),day:If(e,t+2,1)},null,t+3]}function Im(e,t){return[{hours:If(e,t,0),minutes:If(e,t+1,0),seconds:If(e,t+2,0),milliseconds:jO(e[t+3])},null,t+4]}function Pv(e,t){const r=!e[t]&&!e[t+1],i=H2(e[t+1],e[t+2]),n=r?null:Ur.instance(i);return[{},n,t+3]}function Nv(e,t){const r=e[t]?bn.create(e[t]):null;return[{},r,t+1]}const ace=RegExp(`^T?${UO.source}$`),lce=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function uce(e){const[t,r,i,n,s,o,a,u,d]=e,h=t[0]==="-",f=u&&u[0]==="-",m=(y,g=!1)=>y!==void 0&&(g||y&&h)?-y:y;return[{years:m(wc(r)),months:m(wc(i)),weeks:m(wc(n)),days:m(wc(s)),hours:m(wc(o)),minutes:m(wc(a)),seconds:m(wc(u),u==="-0"),milliseconds:m(jO(d),f)}]}const cce={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function GO(e,t,r,i,n,s,o){const a={year:t.length===2?HM(fu(t)):fu(t),month:iB.indexOf(r)+1,day:fu(i),hour:fu(n),minute:fu(s)};return o&&(a.second=fu(o)),e&&(a.weekday=e.length>3?sB.indexOf(e)+1:oB.indexOf(e)+1),a}const dce=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function pce(e){const[,t,r,i,n,s,o,a,u,d,h,f]=e,m=GO(t,n,i,r,s,o,a);let y;return u?y=cce[u]:d?y=0:y=H2(h,f),[m,new Ur(y)]}function hce(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const fce=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,mce=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,yce=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function N4(e){const[,t,r,i,n,s,o,a]=e;return[GO(t,n,i,r,s,o,a),Ur.utcInstance]}function gce(e){const[,t,r,i,n,s,o,a]=e;return[GO(t,a,r,i,n,s,o),Ur.utcInstance]}const vce=xm(Xue,zO),wce=xm(ece,zO),_ce=xm(tce,zO),bce=xm(hB),mB=Em(oce,Im,Pv,Nv),Sce=Em(rce,Im,Pv,Nv),$ce=Em(ice,Im,Pv,Nv),Tce=Em(Im,Pv,Nv);function xce(e){return Mm(e,[vce,mB],[wce,Sce],[_ce,$ce],[bce,Tce])}function Ece(e){return Mm(hce(e),[dce,pce])}function Mce(e){return Mm(e,[fce,N4],[mce,N4],[yce,gce])}function Ice(e){return Mm(e,[lce,uce])}const Cce=Em(Im);function Ace(e){return Mm(e,[ace,Cce])}const Rce=xm(nce,sce),Oce=xm(fB),kce=Em(Im,Pv,Nv);function Pce(e){return Mm(e,[Rce,mB],[Oce,kce])}const L4="Invalid Duration",yB={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Nce={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...yB},En=146097/400,kp=146097/4800,Lce={years:{quarters:4,months:12,weeks:En/7,days:En,hours:En*24,minutes:En*24*60,seconds:En*24*60*60,milliseconds:En*24*60*60*1e3},quarters:{months:3,weeks:En/28,days:En/4,hours:En*24/4,minutes:En*24*60/4,seconds:En*24*60*60/4,milliseconds:En*24*60*60*1e3/4},months:{weeks:kp/7,days:kp,hours:kp*24,minutes:kp*24*60,seconds:kp*24*60*60,milliseconds:kp*24*60*60*1e3},...yB},kd=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Fce=kd.slice(0).reverse();function Al(e,t,r=!1){const i={values:r?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new Ue(i)}function gB(e,t){let r=t.milliseconds??0;for(const i of Fce.slice(1))t[i]&&(r+=t[i]*e[i].milliseconds);return r}function F4(e,t){const r=gB(e,t)<0?-1:1;kd.reduceRight((i,n)=>{if(Se(t[n]))return i;if(i){const s=t[i]*r,o=e[n][i],a=Math.floor(s/o);t[n]+=a*r,t[i]-=a*o*r}return n},null),kd.reduce((i,n)=>{if(Se(t[n]))return i;if(i){const s=t[i]%1;t[i]-=s,t[n]+=s*e[i][n]}return n},null)}function Dce(e){const t={};for(const[r,i]of Object.entries(e))i!==0&&(t[r]=i);return t}class Ue{constructor(t){const r=t.conversionAccuracy==="longterm"||!1;let i=r?Lce:Nce;t.matrix&&(i=t.matrix),this.values=t.values,this.loc=t.loc||Qe.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(t,r){return Ue.fromObject({milliseconds:t},r)}static fromObject(t,r={}){if(t==null||typeof t!="object")throw new si(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new Ue({values:IS(t,Ue.normalizeUnit),loc:Qe.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(t){if(qu(t))return Ue.fromMillis(t);if(Ue.isDuration(t))return t;if(typeof t=="object")return Ue.fromObject(t);throw new si(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,r){const[i]=Ice(t);return i?Ue.fromObject(i,r):Ue.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,r){const[i]=Ace(t);return i?Ue.fromObject(i,r):Ue.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,r=null){if(!t)throw new si("need to specify a reason the Duration is invalid");const i=t instanceof qs?t:new qs(t,r);if(Vt.throwOnInvalid)throw new lue(i);return new Ue({invalid:i})}static normalizeUnit(t){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!r)throw new MG(t);return r}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,r={}){const i={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?ui.create(this.loc,i).formatDurationFromString(this,t):L4}toHuman(t={}){if(!this.isValid)return L4;const r=kd.map(i=>{const n=this.values[i];return Se(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(n)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=VO(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},ve.fromMillis(r,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?gB(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const r=Ue.fromDurationLike(t),i={};for(const n of kd)(sm(r.values,n)||sm(this.values,n))&&(i[n]=r.get(n)+this.get(n));return Al(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const r=Ue.fromDurationLike(t);return this.plus(r.negate())}mapUnits(t){if(!this.isValid)return this;const r={};for(const i of Object.keys(this.values))r[i]=rB(t(this.values[i],i));return Al(this,{values:r},!0)}get(t){return this[Ue.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const r={...this.values,...IS(t,Ue.normalizeUnit)};return Al(this,{values:r})}reconfigure({locale:t,numberingSystem:r,conversionAccuracy:i,matrix:n}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:r}),matrix:n,conversionAccuracy:i};return Al(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return F4(this.matrix,t),Al(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=Dce(this.normalize().shiftToAll().toObject());return Al(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>Ue.normalizeUnit(o));const r={},i={},n=this.toObject();let s;for(const o of kd)if(t.indexOf(o)>=0){s=o;let a=0;for(const d in i)a+=this.matrix[d][o]*i[d],i[d]=0;qu(n[o])&&(a+=n[o]);const u=Math.trunc(a);r[o]=u,i[o]=(a*1e3-u*1e3)/1e3}else qu(n[o])&&(i[o]=n[o]);for(const o in i)i[o]!==0&&(r[s]+=o===s?i[o]:i[o]/this.matrix[s][o]);return F4(this.matrix,r),Al(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=this.values[r]===0?0:-this.values[r];return Al(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function r(i,n){return i===void 0||i===0?n===void 0||n===0:i===n}for(const i of kd)if(!r(this.values[i],t.values[i]))return!1;return!0}}const Pp="Invalid Interval";function jce(e,t){return!e||!e.isValid?jt.invalid("missing or invalid start"):!t||!t.isValid?jt.invalid("missing or invalid end"):t<e?jt.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class jt{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,r=null){if(!t)throw new si("need to specify a reason the Interval is invalid");const i=t instanceof qs?t:new qs(t,r);if(Vt.throwOnInvalid)throw new aue(i);return new jt({invalid:i})}static fromDateTimes(t,r){const i=Xm(t),n=Xm(r),s=jce(i,n);return s??new jt({start:i,end:n})}static after(t,r){const i=Ue.fromDurationLike(r),n=Xm(t);return jt.fromDateTimes(n,n.plus(i))}static before(t,r){const i=Ue.fromDurationLike(r),n=Xm(t);return jt.fromDateTimes(n.minus(i),n)}static fromISO(t,r){const[i,n]=(t||"").split("/",2);if(i&&n){let s,o;try{s=ve.fromISO(i,r),o=s.isValid}catch{o=!1}let a,u;try{a=ve.fromISO(n,r),u=a.isValid}catch{u=!1}if(o&&u)return jt.fromDateTimes(s,a);if(o){const d=Ue.fromISO(n,r);if(d.isValid)return jt.after(s,d)}else if(u){const d=Ue.fromISO(i,r);if(d.isValid)return jt.before(a,d)}}return jt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",r){if(!this.isValid)return NaN;const i=this.start.startOf(t,r);let n;return r!=null&&r.useLocaleWeeks?n=this.end.reconfigure({locale:i.locale}):n=this.end,n=n.startOf(t,r),Math.floor(n.diff(i,t).get(t))+(n.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:r}={}){return this.isValid?jt.fromDateTimes(t||this.s,r||this.e):this}splitAt(...t){if(!this.isValid)return[];const r=t.map(Xm).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),i=[];let{s:n}=this,s=0;for(;n<this.e;){const o=r[s]||this.e,a=+o>+this.e?this.e:o;i.push(jt.fromDateTimes(n,a)),n=a,s+=1}return i}splitBy(t){const r=Ue.fromDurationLike(t);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:i}=this,n=1,s;const o=[];for(;i<this.e;){const a=this.start.plus(r.mapUnits(u=>u*n));s=+a>+this.e?this.e:a,o.push(jt.fromDateTimes(i,s)),i=s,n+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const r=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return r>=i?null:jt.fromDateTimes(r,i)}union(t){if(!this.isValid)return this;const r=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return jt.fromDateTimes(r,i)}static merge(t){const[r,i]=t.sort((n,s)=>n.s-s.s).reduce(([n,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[n,s.union(o)]:[n.concat([s]),o]:[n,o],[[],null]);return i&&r.push(i),r}static xor(t){let r=null,i=0;const n=[],s=t.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((u,d)=>u.time-d.time);for(const u of a)i+=u.type==="s"?1:-1,i===1?r=u.time:(r&&+r!=+u.time&&n.push(jt.fromDateTimes(r,u.time)),r=null);return jt.merge(n)}difference(...t){return jt.xor([this].concat(t)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:Pp}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=xS,r={}){return this.isValid?ui.create(this.s.loc.clone(r),t).formatInterval(this):Pp}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Pp}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Pp}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Pp}toFormat(t,{separator:r="  "}={}){return this.isValid?`${this.s.toFormat(t)}${r}${this.e.toFormat(t)}`:Pp}toDuration(t,r){return this.isValid?this.e.diff(this.s,t,r):Ue.invalid(this.invalidReason)}mapEndpoints(t){return jt.fromDateTimes(t(this.s),t(this.e))}}class E1{static hasDST(t=Vt.defaultZone){const r=ve.now().setZone(t).set({month:12});return!t.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(t){return bn.isValidZone(t)}static normalizeZone(t){return Tu(t,Vt.defaultZone)}static getStartOfWeek({locale:t=null,locObj:r=null}={}){return(r||Qe.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:r=null}={}){return(r||Qe.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:r=null}={}){return(r||Qe.create(t)).getWeekendDays().slice()}static months(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||Qe.create(r,i,s)).months(t)}static monthsFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||Qe.create(r,i,s)).months(t,!0)}static weekdays(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null}={}){return(n||Qe.create(r,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null}={}){return(n||Qe.create(r,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return Qe.create(t).meridiems()}static eras(t="short",{locale:r=null}={}){return Qe.create(r,null,"gregory").eras(t)}static features(){return{relative:XG(),localeWeek:eB()}}}function D4(e,t){const r=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=r(t)-r(e);return Math.floor(Ue.fromMillis(i).as("days"))}function Vce(e,t,r){const i=[["years",(u,d)=>d.year-u.year],["quarters",(u,d)=>d.quarter-u.quarter+(d.year-u.year)*4],["months",(u,d)=>d.month-u.month+(d.year-u.year)*12],["weeks",(u,d)=>{const h=D4(u,d);return(h-h%7)/7}],["days",D4]],n={},s=e;let o,a;for(const[u,d]of i)r.indexOf(u)>=0&&(o=u,n[u]=d(e,t),a=s.plus(n),a>t?(n[u]--,e=s.plus(n),e>t&&(a=e,n[u]--,e=s.plus(n))):e=a);return[e,n,a,o]}function Uce(e,t,r,i){let[n,s,o,a]=Vce(e,t,r);const u=t-n,d=r.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);d.length===0&&(o<t&&(o=n.plus({[a]:1})),o!==n&&(s[a]=(s[a]||0)+u/(o-n)));const h=Ue.fromObject(s,i);return d.length>0?Ue.fromMillis(u,i).shiftTo(...d).plus(h):h}const zce="missing Intl.DateTimeFormat.formatToParts support";function Ze(e,t=r=>r){return{regex:e,deser:([r])=>t(Rue(r))}}const Gce="",vB=`[ ${Gce}]`,wB=new RegExp(vB,"g");function Bce(e){return e.replace(/\./g,"\\.?").replace(wB,vB)}function j4(e){return e.replace(/\./g,"").replace(wB," ").toLowerCase()}function ys(e,t){return e===null?null:{regex:RegExp(e.map(Bce).join("|")),deser:([r])=>e.findIndex(i=>j4(r)===j4(i))+t}}function V4(e,t){return{regex:e,deser:([,r,i])=>H2(r,i),groups:t}}function M1(e){return{regex:e,deser:([t])=>t}}function qce(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Hce(e,t){const r=ms(t),i=ms(t,"{2}"),n=ms(t,"{3}"),s=ms(t,"{4}"),o=ms(t,"{6}"),a=ms(t,"{1,2}"),u=ms(t,"{1,3}"),d=ms(t,"{1,6}"),h=ms(t,"{1,9}"),f=ms(t,"{2,4}"),m=ms(t,"{4,6}"),y=_=>({regex:RegExp(qce(_.val)),deser:([w])=>w,literal:!0}),v=(_=>{if(e.literal)return y(_);switch(_.val){case"G":return ys(t.eras("short"),0);case"GG":return ys(t.eras("long"),0);case"y":return Ze(d);case"yy":return Ze(f,HM);case"yyyy":return Ze(s);case"yyyyy":return Ze(m);case"yyyyyy":return Ze(o);case"M":return Ze(a);case"MM":return Ze(i);case"MMM":return ys(t.months("short",!0),1);case"MMMM":return ys(t.months("long",!0),1);case"L":return Ze(a);case"LL":return Ze(i);case"LLL":return ys(t.months("short",!1),1);case"LLLL":return ys(t.months("long",!1),1);case"d":return Ze(a);case"dd":return Ze(i);case"o":return Ze(u);case"ooo":return Ze(n);case"HH":return Ze(i);case"H":return Ze(a);case"hh":return Ze(i);case"h":return Ze(a);case"mm":return Ze(i);case"m":return Ze(a);case"q":return Ze(a);case"qq":return Ze(i);case"s":return Ze(a);case"ss":return Ze(i);case"S":return Ze(u);case"SSS":return Ze(n);case"u":return M1(h);case"uu":return M1(a);case"uuu":return Ze(r);case"a":return ys(t.meridiems(),0);case"kkkk":return Ze(s);case"kk":return Ze(f,HM);case"W":return Ze(a);case"WW":return Ze(i);case"E":case"c":return Ze(r);case"EEE":return ys(t.weekdays("short",!1),1);case"EEEE":return ys(t.weekdays("long",!1),1);case"ccc":return ys(t.weekdays("short",!0),1);case"cccc":return ys(t.weekdays("long",!0),1);case"Z":case"ZZ":return V4(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return V4(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return M1(/[a-z_+-/]{1,256}?/i);case" ":return M1(/[^\S\n\r]/);default:return y(_)}})(e)||{invalidReason:zce};return v.token=e,v}const Wce={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Zce(e,t,r){const{type:i,value:n}=e;if(i==="literal"){const u=/^\s+$/.test(n);return{literal:!u,val:u?" ":n}}const s=t[i];let o=i;i==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=r.hour12?"hour12":"hour24");let a=Wce[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function Jce(e){return[`^${e.map(r=>r.regex).reduce((r,i)=>`${r}(${i.source})`,"")}$`,e]}function Kce(e,t,r){const i=e.match(t);if(i){const n={};let s=1;for(const o in r)if(sm(r,o)){const a=r[o],u=a.groups?a.groups+1:1;!a.literal&&a.token&&(n[a.token.val[0]]=a.deser(i.slice(s,s+u))),s+=u}return[i,n]}else return[i,{}]}function Yce(e){const t=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,i;return Se(e.z)||(r=bn.create(e.z)),Se(e.Z)||(r||(r=new Ur(e.Z)),i=e.Z),Se(e.q)||(e.M=(e.q-1)*3+1),Se(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Se(e.u)||(e.S=jO(e.u)),[Object.keys(e).reduce((s,o)=>{const a=t(o);return a&&(s[a]=e[o]),s},{}),r,i]}let NT=null;function Qce(){return NT||(NT=ve.fromMillis(1555555555555)),NT}function Xce(e,t){if(e.literal)return e;const r=ui.macroTokenToFormatOpts(e.val),i=$B(r,t);return i==null||i.includes(void 0)?e:i}function _B(e,t){return Array.prototype.concat(...e.map(r=>Xce(r,t)))}class bB{constructor(t,r){if(this.locale=t,this.format=r,this.tokens=_B(ui.parseFormat(r),t),this.units=this.tokens.map(i=>Hce(i,t)),this.disqualifyingUnit=this.units.find(i=>i.invalidReason),!this.disqualifyingUnit){const[i,n]=Jce(this.units);this.regex=RegExp(i,"i"),this.handlers=n}}explainFromTokens(t){if(this.isValid){const[r,i]=Kce(t,this.regex,this.handlers),[n,s,o]=i?Yce(i):[null,null,void 0];if(sm(i,"a")&&sm(i,"H"))throw new cf("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:i,result:n,zone:s,specificOffset:o}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function SB(e,t,r){return new bB(e,r).explainFromTokens(t)}function ede(e,t,r){const{result:i,zone:n,specificOffset:s,invalidReason:o}=SB(e,t,r);return[i,n,s,o]}function $B(e,t){if(!e)return null;const i=ui.create(t,e).dtFormatter(Qce()),n=i.formatToParts(),s=i.resolvedOptions();return n.map(o=>Zce(o,e,s))}const LT="Invalid DateTime",U4=864e13;function Ry(e){return new qs("unsupported zone",`the zone "${e.name}" is not supported`)}function FT(e){return e.weekData===null&&(e.weekData=ES(e.c)),e.weekData}function DT(e){return e.localWeekData===null&&(e.localWeekData=ES(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function _c(e,t){const r={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new ve({...r,...t,old:r})}function TB(e,t,r){let i=e-t*60*1e3;const n=r.offset(i);if(t===n)return[i,t];i-=(n-t)*60*1e3;const s=r.offset(i);return n===s?[i,n]:[e-Math.min(n,s)*60*1e3,Math.max(n,s)]}function I1(e,t){e+=t*60*1e3;const r=new Date(e);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function Qw(e,t,r){return TB(q2(e),t,r)}function z4(e,t){const r=e.o,i=e.c.year+Math.trunc(t.years),n=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,s={...e.c,year:i,month:n,day:Math.min(e.c.day,MS(i,n))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=Ue.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=q2(s);let[u,d]=TB(a,r,e.zone);return o!==0&&(u+=o,d=e.zone.offset(u)),{ts:u,o:d}}function Np(e,t,r,i,n,s){const{setZone:o,zone:a}=r;if(e&&Object.keys(e).length!==0||t){const u=t||a,d=ve.fromObject(e,{...r,zone:u,specificOffset:s});return o?d:d.setZone(a)}else return ve.invalid(new qs("unparsable",`the input "${n}" can't be parsed as ${i}`))}function C1(e,t,r=!0){return e.isValid?ui.create(Qe.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(e,t):null}function jT(e,t){const r=e.c.year>9999||e.c.year<0;let i="";return r&&e.c.year>=0&&(i+="+"),i+=Xt(e.c.year,r?6:4),t?(i+="-",i+=Xt(e.c.month),i+="-",i+=Xt(e.c.day)):(i+=Xt(e.c.month),i+=Xt(e.c.day)),i}function G4(e,t,r,i,n,s){let o=Xt(e.c.hour);return t?(o+=":",o+=Xt(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(o+=":")):o+=Xt(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(o+=Xt(e.c.second),(e.c.millisecond!==0||!i)&&(o+=".",o+=Xt(e.c.millisecond,3))),n&&(e.isOffsetFixed&&e.offset===0&&!s?o+="Z":e.o<0?(o+="-",o+=Xt(Math.trunc(-e.o/60)),o+=":",o+=Xt(Math.trunc(-e.o%60))):(o+="+",o+=Xt(Math.trunc(e.o/60)),o+=":",o+=Xt(Math.trunc(e.o%60)))),s&&(o+="["+e.zone.ianaName+"]"),o}const xB={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},tde={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},rde={ordinal:1,hour:0,minute:0,second:0,millisecond:0},EB=["year","month","day","hour","minute","second","millisecond"],ide=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],nde=["year","ordinal","hour","minute","second","millisecond"];function sde(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new MG(e);return t}function B4(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return sde(e)}}function ode(e){return e_[e]||(Xw===void 0&&(Xw=Vt.now()),e_[e]=e.offset(Xw)),e_[e]}function q4(e,t){const r=Tu(t.zone,Vt.defaultZone);if(!r.isValid)return ve.invalid(Ry(r));const i=Qe.fromObject(t);let n,s;if(Se(e.year))n=Vt.now();else{for(const u of EB)Se(e[u])&&(e[u]=xB[u]);const o=YG(e)||QG(e);if(o)return ve.invalid(o);const a=ode(r);[n,s]=Qw(e,a,r)}return new ve({ts:n,zone:r,loc:i,o:s})}function H4(e,t,r){const i=Se(r.round)?!0:r.round,n=(o,a)=>(o=VO(o,i||r.calendary?0:2,!0),t.loc.clone(r).relFormatter(r).format(o,a)),s=o=>r.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(r.unit)return n(s(r.unit),r.unit);for(const o of r.units){const a=s(o);if(Math.abs(a)>=1)return n(a,o)}return n(e>t?-0:0,r.units[r.units.length-1])}function W4(e){let t={},r;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],r=Array.from(e).slice(0,e.length-1)):r=Array.from(e),[t,r]}let Xw,e_={};class ve{constructor(t){const r=t.zone||Vt.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new qs("invalid input"):null)||(r.isValid?null:Ry(r));this.ts=Se(t.ts)?Vt.now():t.ts;let n=null,s=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(r))[n,s]=[t.old.c,t.old.o];else{const a=qu(t.o)&&!t.old?t.o:r.offset(this.ts);n=I1(this.ts,a),i=Number.isNaN(n.year)?new qs("invalid input"):null,n=i?null:n,s=i?null:a}this._zone=r,this.loc=t.loc||Qe.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new ve({})}static local(){const[t,r]=W4(arguments),[i,n,s,o,a,u,d]=r;return q4({year:i,month:n,day:s,hour:o,minute:a,second:u,millisecond:d},t)}static utc(){const[t,r]=W4(arguments),[i,n,s,o,a,u,d]=r;return t.zone=Ur.utcInstance,q4({year:i,month:n,day:s,hour:o,minute:a,second:u,millisecond:d},t)}static fromJSDate(t,r={}){const i=Lue(t)?t.valueOf():NaN;if(Number.isNaN(i))return ve.invalid("invalid input");const n=Tu(r.zone,Vt.defaultZone);return n.isValid?new ve({ts:i,zone:n,loc:Qe.fromObject(r)}):ve.invalid(Ry(n))}static fromMillis(t,r={}){if(qu(t))return t<-U4||t>U4?ve.invalid("Timestamp out of range"):new ve({ts:t,zone:Tu(r.zone,Vt.defaultZone),loc:Qe.fromObject(r)});throw new si(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,r={}){if(qu(t))return new ve({ts:t*1e3,zone:Tu(r.zone,Vt.defaultZone),loc:Qe.fromObject(r)});throw new si("fromSeconds requires a numerical input")}static fromObject(t,r={}){t=t||{};const i=Tu(r.zone,Vt.defaultZone);if(!i.isValid)return ve.invalid(Ry(i));const n=Qe.fromObject(r),s=IS(t,B4),{minDaysInFirstWeek:o,startOfWeek:a}=R4(s,n),u=Vt.now(),d=Se(r.specificOffset)?i.offset(u):r.specificOffset,h=!Se(s.ordinal),f=!Se(s.year),m=!Se(s.month)||!Se(s.day),y=f||m,g=s.weekYear||s.weekNumber;if((y||h)&&g)throw new cf("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&h)throw new cf("Can't mix ordinal dates with month/day");const v=g||s.weekday&&!y;let _,w,b=I1(u,d);v?(_=ide,w=tde,b=ES(b,o,a)):h?(_=nde,w=rde,b=PT(b)):(_=EB,w=xB);let T=!1;for(const U of _){const W=s[U];Se(W)?T?s[U]=w[U]:s[U]=b[U]:T=!0}const x=v?kue(s,o,a):h?Pue(s):YG(s),M=x||QG(s);if(M)return ve.invalid(M);const I=v?C4(s,o,a):h?A4(s):s,[O,P]=Qw(I,d,i),z=new ve({ts:O,zone:i,o:P,loc:n});return s.weekday&&y&&t.weekday!==z.weekday?ve.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${z.toISO()}`):z.isValid?z:ve.invalid(z.invalid)}static fromISO(t,r={}){const[i,n]=xce(t);return Np(i,n,r,"ISO 8601",t)}static fromRFC2822(t,r={}){const[i,n]=Ece(t);return Np(i,n,r,"RFC 2822",t)}static fromHTTP(t,r={}){const[i,n]=Mce(t);return Np(i,n,r,"HTTP",r)}static fromFormat(t,r,i={}){if(Se(t)||Se(r))throw new si("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=i,o=Qe.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[a,u,d,h]=ede(o,t,r);return h?ve.invalid(h):Np(a,u,i,`format ${r}`,t,d)}static fromString(t,r,i={}){return ve.fromFormat(t,r,i)}static fromSQL(t,r={}){const[i,n]=Pce(t);return Np(i,n,r,"SQL",t)}static invalid(t,r=null){if(!t)throw new si("need to specify a reason the DateTime is invalid");const i=t instanceof qs?t:new qs(t,r);if(Vt.throwOnInvalid)throw new oue(i);return new ve({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,r={}){const i=$B(t,Qe.fromObject(r));return i?i.map(n=>n?n.val:null).join(""):null}static expandFormat(t,r={}){return _B(ui.parseFormat(t),Qe.fromObject(r)).map(n=>n.val).join("")}static resetCache(){Xw=void 0,e_={}}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?FT(this).weekYear:NaN}get weekNumber(){return this.isValid?FT(this).weekNumber:NaN}get weekday(){return this.isValid?FT(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?DT(this).weekday:NaN}get localWeekNumber(){return this.isValid?DT(this).weekNumber:NaN}get localWeekYear(){return this.isValid?DT(this).weekYear:NaN}get ordinal(){return this.isValid?PT(this.c).ordinal:NaN}get monthShort(){return this.isValid?E1.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?E1.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?E1.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?E1.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,r=6e4,i=q2(this.c),n=this.zone.offset(i-t),s=this.zone.offset(i+t),o=this.zone.offset(i-n*r),a=this.zone.offset(i-s*r);if(o===a)return[this];const u=i-o*r,d=i-a*r,h=I1(u,o),f=I1(d,a);return h.hour===f.hour&&h.minute===f.minute&&h.second===f.second&&h.millisecond===f.millisecond?[_c(this,{ts:u}),_c(this,{ts:d})]:[this]}get isInLeapYear(){return kv(this.year)}get daysInMonth(){return MS(this.year,this.month)}get daysInYear(){return this.isValid?Mf(this.year):NaN}get weeksInWeekYear(){return this.isValid?W0(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?W0(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:r,numberingSystem:i,calendar:n}=ui.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:r,numberingSystem:i,outputCalendar:n}}toUTC(t=0,r={}){return this.setZone(Ur.instance(t),r)}toLocal(){return this.setZone(Vt.defaultZone)}setZone(t,{keepLocalTime:r=!1,keepCalendarTime:i=!1}={}){if(t=Tu(t,Vt.defaultZone),t.equals(this.zone))return this;if(t.isValid){let n=this.ts;if(r||i){const s=t.offset(this.ts),o=this.toObject();[n]=Qw(o,s,t)}return _c(this,{ts:n,zone:t})}else return ve.invalid(Ry(t))}reconfigure({locale:t,numberingSystem:r,outputCalendar:i}={}){const n=this.loc.clone({locale:t,numberingSystem:r,outputCalendar:i});return _c(this,{loc:n})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const r=IS(t,B4),{minDaysInFirstWeek:i,startOfWeek:n}=R4(r,this.loc),s=!Se(r.weekYear)||!Se(r.weekNumber)||!Se(r.weekday),o=!Se(r.ordinal),a=!Se(r.year),u=!Se(r.month)||!Se(r.day),d=a||u,h=r.weekYear||r.weekNumber;if((d||o)&&h)throw new cf("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&o)throw new cf("Can't mix ordinal dates with month/day");let f;s?f=C4({...ES(this.c,i,n),...r},i,n):Se(r.ordinal)?(f={...this.toObject(),...r},Se(r.day)&&(f.day=Math.min(MS(f.year,f.month),f.day))):f=A4({...PT(this.c),...r});const[m,y]=Qw(f,this.o,this.zone);return _c(this,{ts:m,o:y})}plus(t){if(!this.isValid)return this;const r=Ue.fromDurationLike(t);return _c(this,z4(this,r))}minus(t){if(!this.isValid)return this;const r=Ue.fromDurationLike(t).negate();return _c(this,z4(this,r))}startOf(t,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const i={},n=Ue.normalizeUnit(t);switch(n){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(n==="weeks")if(r){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(i.weekNumber=this.weekNumber-1),i.weekday=s}else i.weekday=1;if(n==="quarters"){const s=Math.ceil(this.month/3);i.month=(s-1)*3+1}return this.set(i)}endOf(t,r){return this.isValid?this.plus({[t]:1}).startOf(t,r).minus(1):this}toFormat(t,r={}){return this.isValid?ui.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,t):LT}toLocaleString(t=xS,r={}){return this.isValid?ui.create(this.loc.clone(r),t).formatDateTime(this):LT}toLocaleParts(t={}){return this.isValid?ui.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:r=!1,suppressMilliseconds:i=!1,includeOffset:n=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=jT(this,o);return a+="T",a+=G4(this,o,r,i,n,s),a}toISODate({format:t="extended"}={}){return this.isValid?jT(this,t==="extended"):null}toISOWeekDate(){return C1(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:r=!1,includeOffset:i=!0,includePrefix:n=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(n?"T":"")+G4(this,o==="extended",r,t,i,s):null}toRFC2822(){return C1(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return C1(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?jT(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:r=!1,includeOffsetSpace:i=!0}={}){let n="HH:mm:ss.SSS";return(r||t)&&(i&&(n+=" "),r?n+="z":t&&(n+="ZZ")),C1(this,n,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():LT}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const r={...this.c};return t.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,r="milliseconds",i={}){if(!this.isValid||!t.isValid)return Ue.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=Fue(r).map(Ue.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,u=o?t:this,d=Uce(a,u,s,n);return o?d.negate():d}diffNow(t="milliseconds",r={}){return this.diff(ve.now(),t,r)}until(t){return this.isValid?jt.fromDateTimes(this,t):this}hasSame(t,r,i){if(!this.isValid)return!1;const n=t.valueOf(),s=this.setZone(t.zone,{keepLocalTime:!0});return s.startOf(r,i)<=n&&n<=s.endOf(r,i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const r=t.base||ve.fromObject({},{zone:this.zone}),i=t.padding?this<r?-t.padding:t.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=t.unit;return Array.isArray(t.unit)&&(n=t.unit,s=void 0),H4(r,this.plus(i),{...t,numeric:"always",units:n,unit:s})}toRelativeCalendar(t={}){return this.isValid?H4(t.base||ve.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(ve.isDateTime))throw new si("min requires all arguments be DateTimes");return O4(t,r=>r.valueOf(),Math.min)}static max(...t){if(!t.every(ve.isDateTime))throw new si("max requires all arguments be DateTimes");return O4(t,r=>r.valueOf(),Math.max)}static fromFormatExplain(t,r,i={}){const{locale:n=null,numberingSystem:s=null}=i,o=Qe.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return SB(o,t,r)}static fromStringExplain(t,r,i={}){return ve.fromFormatExplain(t,r,i)}static buildFormatParser(t,r={}){const{locale:i=null,numberingSystem:n=null}=r,s=Qe.fromOpts({locale:i,numberingSystem:n,defaultToEN:!0});return new bB(s,t)}static fromFormatParser(t,r,i={}){if(Se(t)||Se(r))throw new si("fromFormatParser requires an input string and a format parser");const{locale:n=null,numberingSystem:s=null}=i,o=Qe.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});if(!o.equals(r.locale))throw new si(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${r.locale}`);const{result:a,zone:u,specificOffset:d,invalidReason:h}=r.explainFromTokens(t);return h?ve.invalid(h):Np(a,u,i,`format ${r.format}`,t,d)}static get DATE_SHORT(){return xS}static get DATE_MED(){return IG}static get DATE_MED_WITH_WEEKDAY(){return uue}static get DATE_FULL(){return CG}static get DATE_HUGE(){return AG}static get TIME_SIMPLE(){return RG}static get TIME_WITH_SECONDS(){return OG}static get TIME_WITH_SHORT_OFFSET(){return kG}static get TIME_WITH_LONG_OFFSET(){return PG}static get TIME_24_SIMPLE(){return NG}static get TIME_24_WITH_SECONDS(){return LG}static get TIME_24_WITH_SHORT_OFFSET(){return FG}static get TIME_24_WITH_LONG_OFFSET(){return DG}static get DATETIME_SHORT(){return jG}static get DATETIME_SHORT_WITH_SECONDS(){return VG}static get DATETIME_MED(){return UG}static get DATETIME_MED_WITH_SECONDS(){return zG}static get DATETIME_MED_WITH_WEEKDAY(){return cue}static get DATETIME_FULL(){return GG}static get DATETIME_FULL_WITH_SECONDS(){return BG}static get DATETIME_HUGE(){return qG}static get DATETIME_HUGE_WITH_SECONDS(){return HG}}function Xm(e){if(ve.isDateTime(e))return e;if(e&&e.valueOf&&qu(e.valueOf()))return ve.fromJSDate(e);if(e&&typeof e=="object")return ve.fromObject(e);throw new si(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const to="system",cp="unknown",Xu="UTC",ade=Intl.DateTimeFormat().resolvedOptions().timeZone,lde="shortOffset";function ude(e){return"timeZoneIANA"in e}function cde(e){return e.startsWith("UTC")}function CS(e,t=!1){return{json:{read:{source:e,reader:(r,i)=>i[e]?t_(i[e]):null},write:!!t&&{allowNull:!0,writer(r,i){i[e]=r?dde(r):null}}}}}function t_(e,t=to){return e?ude(e)?e.timeZoneIANA:pde(e,t):t}function dde(e){return{timeZoneIANA:e}}function pde(e,t=to){if(!e||!g4.has(e.timeZone))return t;const r=g4.get(e.timeZone);return cde(e.timeZone)||e.respectsDaylightSaving?r:hde(r)}function hde(e){const t=ve.local().setZone(e),r=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return r===0?"Etc/UTC":`Etc/GMT${Ur.instance(-r).formatOffset(0,"narrow")}`}function APe(e,t,r,i,n){if(t&&n==="date")return{timeZone:Xu,timeZoneName:void 0};const s=i.timeStyle||i.hour,o=r===cp;return{timeZone:o?n==="timestamp-offset"?void 0:e??Xu:r,timeZoneName:o&&s?lde:void 0}}function fde(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),r=new Set(Intl.supportedValuesOf("timeZone").map(i=>i.toLowerCase()));return e===to||e===cp||t.has(e.toLowerCase())||r.has(e.toLowerCase())}const mde={year:void 0,month:void 0,day:void 0,weekday:void 0},yde={hour:void 0,minute:void 0,second:void 0},MB={timeZone:Xu},ao={year:"numeric",month:"numeric",day:"numeric"},ey={year:"numeric",month:"long",day:"numeric"},ty={year:"numeric",month:"short",day:"numeric"},ry={year:"numeric",month:"long",weekday:"long",day:"numeric"},mu={hour:"numeric",minute:"numeric"},Nc={...mu,second:"numeric"},IB={hourCycle:"h23"},iy={...mu,...IB},ny={...Nc,...IB},CB={"short-date":ao,"short-date-short-time":{...ao,...mu},"short-date-short-time-24":{...ao,...iy},"short-date-long-time":{...ao,...Nc},"short-date-long-time-24":{...ao,...ny},"short-date-le":ao,"short-date-le-short-time":{...ao,...mu},"short-date-le-short-time-24":{...ao,...iy},"short-date-le-long-time":{...ao,...Nc},"short-date-le-long-time-24":{...ao,...ny},"long-month-day-year":ey,"long-month-day-year-short-time":{...ey,...mu},"long-month-day-year-short-time-24":{...ey,...iy},"long-month-day-year-long-time":{...ey,...Nc},"long-month-day-year-long-time-24":{...ey,...ny},"day-short-month-year":ty,"day-short-month-year-short-time":{...ty,...mu},"day-short-month-year-short-time-24":{...ty,...iy},"day-short-month-year-long-time":{...ty,...Nc},"day-short-month-year-long-time-24":{...ty,...ny},"long-date":ry,"long-date-short-time":{...ry,...mu},"long-date-short-time-24":{...ry,...iy},"long-date-long-time":{...ry,...Nc},"long-date-long-time-24":{...ry,...ny},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":mu,"long-time":Nc},gde=mr()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),AB={ar:"ar-u-nu-latn-ca-gregory"};let WM=new WeakMap;const Z2=CB["short-date-short-time"];function vde(e){let t=WM.get(e);if(!t){const r=qi(),i=AB[r]||r,n=BO(e.timeZone??to),s={...e,timeZone:n};t=new Intl.DateTimeFormat(i,s),WM.set(e,t)}return t}function RPe(e){return CB[e]}function ec(e,t=Z2){return vde(t).format(e)}function OPe(e,t=Z2){return ec(new Date(e),{...t,...MB,...yde})}function kPe(e,t=Z2){return ec(new Date(`1970-01-01T${e}Z`),{...t,...MB,...mde})}function PPe(e,t=Z2){if(t.timeZone)return ec(new Date(e),t);const r=ve.fromISO(e,{setZone:!0}),i=qi(),n=AB[i]??i,s=r.offset===0?Xu:t.timeZone,o={...t,timeZone:s};return r.toLocaleString(o,{locale:n})}function BO(e){switch(e){case to:return ade;case cp:return Xu;default:return e}}NO(()=>{WM=new WeakMap});const wde={ar:"ar-u-nu-latn"};let r_=new WeakMap,RB={};function ZM(e){const t=e||RB;if(!r_.has(t)){const r=qi(),i=wde[qi()]||r;r_.set(t,new Intl.NumberFormat(i,e))}return r_.get(t)}function NPe(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function AS(e,t){return Object.is(e,-0)&&(e=0),ZM(t).format(e)}function LPe(e,t=qi()){var i,n;if(!e)return null;let r=Z4.get(t);if(!r){const s=ZM().formatToParts(12345.6),o=[...ZM({useGrouping:!1}).format(9876543210)].reverse(),a=new Map(o.map((y,g)=>[y,g])),u=new RegExp(`[${(i=s.find(y=>y.type==="group"))==null?void 0:i.value}]`,"g"),d=new RegExp(`[${(n=s.find(y=>y.type==="decimal"))==null?void 0:n.value}]`),h=new RegExp(`[${o.join("")}]`,"g"),f=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,m=/[-\u2212\u2013\u2014\u2015]/g;r=y=>{if((y=y.trim().replaceAll(u,"").replace(d,".").replace(h,v=>String(a.get(v))).replaceAll(f,"").replaceAll(m,"-"))==="")return null;const g=Number(y);return isNaN(g)?null:g},Z4.set(t,r)}return r(e)}NO(()=>{r_=new WeakMap,RB={}});const Z4=new Map,OB=()=>j.getLogger("esri.intl.substitute");function kB(e,t,r={}){const{format:i={}}=r;return T2(e,n=>_de(n,t,i))}function _de(e,t,r){let i,n;const s=e.indexOf(":");if(s===-1?i=e.trim():(i=e.slice(0,s).trim(),n=e.slice(s+1).trim()),!i)return"";const o=_v(i,t);if(o==null)return"";const a=(n?r==null?void 0:r[n]:null)??(r==null?void 0:r[i]);return a?bde(o,a):n?Sde(o,n):qO(o)}function bde(e,t){switch(t.type){case"date":return ec(e,t.intlOptions);case"number":return AS(e,t.intlOptions);default:return OB().warn("missing format descriptor for key {key}"),qO(e)}}function Sde(e,t){switch(t.toLowerCase()){case"dateformat":return ec(e);case"numberformat":return AS(e);default:return OB().warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?ec(e):/^numberformat/i.test(t)?AS(e):qO(e)}}function qO(e){switch(typeof e){case"string":return e;case"number":return AS(e);case"boolean":return""+e;default:return e instanceof Date?ec(e):""}}const J4=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,$de={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function K4(e){return e in $de}const Oy=[],Cf=new Map;function Y4(e){for(const t of Cf.keys())PB(e.pattern,t)&&Cf.delete(t)}function Tde(e){return Oy.includes(e)||(Y4(e),Oy.unshift(e)),Be(()=>{const t=Oy.indexOf(e);t>-1&&(Oy.splice(t,1),Y4(e))})}async function J2(e){const t=qi();Cf.has(e)||Cf.set(e,Ede(e,t));const r=Cf.get(e);return r&&await Mde.add(r),r}function xde(e){if(!J4.test(e))return null;const t=J4.exec(e);if(t===null)return null;const[,r,i]=t,n=r+(i?"-"+i.toUpperCase():"");return K4(n)?n:K4(r)?r:null}async function Ede(e,t){const r=[];for(const i of Oy)if(PB(i.pattern,e))try{return await i.fetchMessageBundle(e,t)}catch(n){r.push(n)}throw r.length?new R("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r}):new R("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function PB(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}NO(()=>{Cf.clear()});const Mde=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=_n())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function Ide(e,t,r,i){const n=t.exec(r);if(!n)throw new R("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const s=n[1]?`${n[1]}/`:"",o=n[2],a=xde(i),u=`${s}${o}.json`,d=a?`${s}${o}_${a}.json`:u;let h;try{h=await Q4(e(d))}catch(f){if(d===u)throw new R("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:f});try{h=await Q4(e(u))}catch(m){throw new R("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:m})}}return h}async function Q4(e){if(X4.fetchBundleAsset!=null)return X4.fetchBundleAsset(e);const t=await Le(e,{responseType:"text"});return JSON.parse(t.data)}let Cde=class{constructor({base:t="",pattern:r,location:i=new URL(window.location.href)}){let n;n=typeof i=="string"?s=>new URL(s,new URL(i,window.location.href)).href:i instanceof URL?s=>new URL(s,i).href:i,this.pattern=typeof r=="string"?new RegExp(`^${r}`):r,this.getAssetUrl=n,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,r){return Ide(this.getAssetUrl,this.matcher,t,r)}};function Ade(e){return new Cde(e)}const X4={};Tde(Ade({pattern:"esri/",location:Ve}));const e5={};function Rde(e){var r;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:((r=e.packages)==null?void 0:r.slice())||[],paths:{...e5.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=e5.baseUrl),t}let Ode=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(r=>{this[r]=(...i)=>t[r](...i)})}},i_=class{constructor(){this._dispatcher=new Ode,this._workerPostMessage({type:Mr.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){rS(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,r,i){this._dispatcher.addEventListener(t,r,i)}removeEventListener(t,r,i){this._dispatcher.removeEventListener(t,r,i)}_workerPostMessage(t){rS(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const r=H0(t);if(r&&r.type===Mr.OPEN){const{modulePath:i,jobId:n}=r;let s=await Qu.loadWorker(i);s||(s=await import(i));const o=Qu.connect(s);this._workerPostMessage({type:Mr.OPENED,jobId:n,data:o})}}};const JM=()=>j.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:kde}=Mr,Pde='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let A1,R1;const t5="Failed to create Worker. Fallback to execute module in main thread";async function Nde(){if(!L("esri-workers"))return r5(new i_);if(!A1&&!R1)try{const t=Pde.split("{CONFIGURATION}").join(Lde());A1=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){R1=t||{}}let e;if(A1)try{e=new Worker(A1,{name:"esri-worker-"+Fde++})}catch{JM().warn(t5,R1),e=new i_}else JM().warn(t5,R1),e=new i_;return r5(e)}async function r5(e){return new Promise(t=>{function r(n){const s=H0(n);s&&s.type===kde&&(e.removeEventListener("message",r),e.removeEventListener("error",i),t(e))}function i(n){n.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",i),JM().warn("Failed to create Worker. Fallback to execute module in main thread",n),(e=new i_).addEventListener("message",r),e.addEventListener("error",i)}e.addEventListener("message",r),e.addEventListener("error",i)})}function Lde(){let e;if(je.default!=null){const n={...je};delete n.default,e=JSON.parse(JSON.stringify(n))}else e=JSON.parse(JSON.stringify(je));e.assetsPath=ji(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?ji(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=qi(),e.has={"esri-csp-restrictions":L("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":L("esri-2d-update-debug"),"esri-2d-log-updating":L("esri-2d-log-updating"),"featurelayer-pbf":L("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":L("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":L("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":L("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":L("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":L("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":L("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":L("featurelayer-snapshot-enabled"),"esri-atomics":L("esri-atomics"),"esri-shared-array-buffer":L("esri-shared-array-buffer"),"esri-tiles-debug":L("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":L("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":L("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=ji(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=ji(e.workers.workerPath):e.workers.workerPath=ji(Ve("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=je.workers.loaderConfig,r=Rde({baseUrl:t==null?void 0:t.baseUrl,locale:qi(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]});return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:{buildDate:f7,fullVersion:gO,revision:m7}})}let Fde=0;const{ABORT:i5,INVOKE:Dde,OPEN:jde,OPENED:Vde,RESPONSE:sy}=Mr;let Ude=class NB{static async create(t){const r=await Nde();return new NB(r,t)}constructor(t,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=r,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",i=>{i.preventDefault(),j.getLogger("esri.core.workers.WorkerOwner").error(i)})}terminate(){this.worker.terminate()}async open(t,r={}){const{signal:i}=r,n=xG();return new Promise((s,o)=>{const a={resolve:s,reject:o,abortHandle:sO(i,()=>{this._outJobs.delete(n),this._post({type:i5,jobId:n})})};this._outJobs.set(n,a),this._post({type:jde,jobId:n,modulePath:t})})}_onMessage(t){const r=H0(t);if(r)switch(r.type){case Vde:this._onOpenedMessage(r);break;case sy:this._onResponseMessage(r);break;case i5:this._onAbortMessage(r);break;case Dde:this._onInvokeMessage(r)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,n=r.get(i);n&&(n.controller&&n.controller.abort(),r.delete(i))}_onInvokeMessage(t){const{methodName:r,jobId:i,data:n,abortable:s}=t,o=s?new AbortController:null,a=this._inJobs,u=iue[r];let d;try{if(typeof u!="function")throw new TypeError(`${r} is not a function`);d=u.call(null,n,{signal:o?o.signal:null})}catch(h){return void this._post({type:sy,jobId:i,error:q0(h)})}Qo(d)?(a.set(i,{controller:o,promise:d}),d.then(h=>{a.has(i)&&(a.delete(i),this._post({type:sy,jobId:i},h))},h=>{a.has(i)&&(a.delete(i),h||(h={message:"Error encountered at method"+r}),Or(h)||this._post({type:sy,jobId:i,error:q0(h||{message:`Error encountered at method ${r}`})}))})):this._post({type:sy,jobId:i},d)}_onOpenedMessage(t){const{jobId:r,data:i}=t,n=this._outJobs.get(r);n&&(this._outJobs.delete(r),wt(n.abortHandle),n.resolve(i))}_onResponseMessage(t){const{jobId:r,error:i,data:n}=t,s=this._outJobs.get(r);s&&(this._outJobs.delete(r),wt(s.abortHandle),i?s.reject(R.fromJSON(JSON.parse(i))):s.resolve(n))}_post(t,r,i){return PO(this.worker,t,r,i)}};const n5=L("host-browser")?Math.min(navigator.hardwareConcurrency-1,L("workers-pool-size")??8):0;let Pd=L("esri-mobile")?Math.min(n5,3):n5;Pd||(Pd=L("safari")&&L("mac")?7:2);let s5=0;const n_=[];function zde(){LB()}async function O1(e,t){const r=new rue,{registryTarget:i,...n}=t;return await r.open(e,n),i&&Hle(i,r),r}async function Gde(e,t={}){if(typeof e!="string")throw new R("workers:undefined-module","modulePath is missing");let r=t.strategy||"distributed";if(L("host-webworker")&&!L("esri-workers")&&(r="local"),r==="local"){let i=await Qu.loadWorker(e);i||(i=await import(e)),_t(t.signal);const n=t.client||i;return O1([Qu.connect(i,t.schedule)],{...t,client:n})}if(await LB(),_t(t.signal),r==="dedicated"){const i=s5++%Pd;return O1([await n_[i].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const i=Math.min(t.maxNumWorkers,Pd);if(i<Pd){const n=new Array(i);for(let s=0;s<i;++s){const o=s5++%Pd;n[s]=n_[o].open(e,t)}return O1(n,t)}}return O1(n_.map(i=>i.open(e,t)),t)}let k1=null;async function LB(){if(k1)return k1;new AbortController;const e=[];for(let t=0;t<Pd;t++){const r=Ude.create(t).then(i=>(n_[t]=i,i));e.push(r)}return k1=Promise.all(e),k1}function uc(){return[0,0,0]}function HO(e){return[e[0],e[1],e[2]]}function Cm(e,t,r){return[e,t,r]}function Bde(e,t,r){return[e,t,r]}function qde(e,t=uc()){const r=Math.min(3,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function Hde(e,t){return new Float64Array(e,t,3)}function FB(){return uc()}function DB(){return Cm(1,1,1)}function jB(){return Cm(1,0,0)}function VB(){return Cm(0,1,0)}function UB(){return Cm(0,0,1)}const Wde=FB(),Zde=DB(),Jde=jB(),Kde=VB(),Yde=UB();Object.freeze(Object.defineProperty({__proto__:null,ONES:Zde,UNIT_X:Jde,UNIT_Y:Kde,UNIT_Z:Yde,ZEROS:Wde,clone:HO,create:uc,createView:Hde,freeze:Bde,fromArray:qde,fromValues:Cm,ones:DB,unitX:jB,unitY:VB,unitZ:UB,zeros:FB},Symbol.toStringTag,{value:"Module"}));const VPe=Math.PI/180,UPe=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Rl=kt.radius,gs=kt.eccentricitySquared,Qde={a1:Rl*gs,a2:Rl*gs*Rl*gs,a3:Rl*gs*gs/2,a4:Rl*gs*Rl*gs*2.5,a5:Rl*gs+Rl*gs*gs/2,a6:1-gs},zPe={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:kt.radius,f:kt.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Ku.radius,f:Ku.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Bo.radius,f:Bo.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Bo.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var k;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=7]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=9]="GCSMOON2000",e[e.LON_LAT=10]="LON_LAT",e[e.PLATE_CARREE=11]="PLATE_CARREE"})(k||(k={}));const Xde={[k.WGS84]:{[k.CGCS2000]:yt,[k.GCSMARS2000]:null,[k.GCSMOON2000]:null,[k.LON_LAT]:yt,[k.SPHERICAL_ECEF]:e0,[k.SPHERICAL_MARS_PCPF]:null,[k.SPHERICAL_MOON_PCPF]:null,[k.UNKNOWN]:null,[k.WEB_MERCATOR]:Af,[k.PLATE_CARREE]:Rf,[k.WGS84]:yt,[k.WGS84_ECEF]:Pf},[k.CGCS2000]:{[k.CGCS2000]:yt,[k.GCSMARS2000]:null,[k.GCSMOON2000]:null,[k.LON_LAT]:yt,[k.SPHERICAL_ECEF]:e0,[k.SPHERICAL_MARS_PCPF]:null,[k.SPHERICAL_MOON_PCPF]:null,[k.UNKNOWN]:null,[k.WEB_MERCATOR]:Af,[k.PLATE_CARREE]:Rf,[k.WGS84]:yt,[k.WGS84_ECEF]:Pf},[k.GCSMARS2000]:{[k.CGCS2000]:null,[k.GCSMARS2000]:yt,[k.GCSMOON2000]:null,[k.LON_LAT]:yt,[k.SPHERICAL_ECEF]:null,[k.SPHERICAL_MARS_PCPF]:l5,[k.SPHERICAL_MOON_PCPF]:null,[k.UNKNOWN]:null,[k.WEB_MERCATOR]:null,[k.PLATE_CARREE]:null,[k.WGS84]:null,[k.WGS84_ECEF]:null},[k.GCSMOON2000]:{[k.CGCS2000]:null,[k.GCSMARS2000]:null,[k.GCSMOON2000]:yt,[k.LON_LAT]:yt,[k.SPHERICAL_ECEF]:null,[k.SPHERICAL_MARS_PCPF]:null,[k.SPHERICAL_MOON_PCPF]:a5,[k.UNKNOWN]:null,[k.WEB_MERCATOR]:null,[k.PLATE_CARREE]:null,[k.WGS84]:null,[k.WGS84_ECEF]:null},[k.WEB_MERCATOR]:{[k.CGCS2000]:Xg,[k.GCSMARS2000]:null,[k.GCSMOON2000]:null,[k.LON_LAT]:Xg,[k.SPHERICAL_ECEF]:epe,[k.SPHERICAL_MARS_PCPF]:null,[k.SPHERICAL_MOON_PCPF]:null,[k.UNKNOWN]:null,[k.WEB_MERCATOR]:yt,[k.PLATE_CARREE]:ipe,[k.WGS84]:Xg,[k.WGS84_ECEF]:tpe},[k.WGS84_ECEF]:{[k.CGCS2000]:Nf,[k.GCSMARS2000]:null,[k.GCSMOON2000]:null,[k.LON_LAT]:Nf,[k.SPHERICAL_ECEF]:ppe,[k.SPHERICAL_MARS_PCPF]:null,[k.SPHERICAL_MOON_PCPF]:null,[k.UNKNOWN]:null,[k.WEB_MERCATOR]:hpe,[k.PLATE_CARREE]:npe,[k.WGS84]:Nf,[k.WGS84_ECEF]:yt},[k.SPHERICAL_ECEF]:{[k.CGCS2000]:kf,[k.GCSMARS2000]:null,[k.GCSMOON2000]:null,[k.LON_LAT]:kf,[k.SPHERICAL_ECEF]:yt,[k.SPHERICAL_MARS_PCPF]:null,[k.SPHERICAL_MOON_PCPF]:null,[k.UNKNOWN]:null,[k.WEB_MERCATOR]:upe,[k.PLATE_CARREE]:spe,[k.WGS84]:kf,[k.WGS84_ECEF]:cpe},[k.SPHERICAL_MARS_PCPF]:{[k.CGCS2000]:null,[k.GCSMARS2000]:c5,[k.GCSMOON2000]:null,[k.LON_LAT]:c5,[k.SPHERICAL_ECEF]:null,[k.SPHERICAL_MARS_PCPF]:yt,[k.SPHERICAL_MOON_PCPF]:null,[k.UNKNOWN]:null,[k.WEB_MERCATOR]:null,[k.PLATE_CARREE]:null,[k.WGS84]:null,[k.WGS84_ECEF]:null},[k.SPHERICAL_MOON_PCPF]:{[k.CGCS2000]:null,[k.GCSMARS2000]:null,[k.GCSMOON2000]:u5,[k.LON_LAT]:u5,[k.SPHERICAL_ECEF]:null,[k.SPHERICAL_MARS_PCPF]:null,[k.SPHERICAL_MOON_PCPF]:yt,[k.UNKNOWN]:null,[k.WEB_MERCATOR]:null,[k.PLATE_CARREE]:null,[k.WGS84]:null,[k.WGS84_ECEF]:null},[k.UNKNOWN]:{[k.CGCS2000]:null,[k.GCSMARS2000]:null,[k.GCSMOON2000]:null,[k.LON_LAT]:null,[k.SPHERICAL_ECEF]:null,[k.SPHERICAL_MARS_PCPF]:null,[k.SPHERICAL_MOON_PCPF]:null,[k.UNKNOWN]:yt,[k.WEB_MERCATOR]:null,[k.PLATE_CARREE]:null,[k.WGS84]:null,[k.WGS84_ECEF]:null},[k.LON_LAT]:{[k.CGCS2000]:yt,[k.GCSMARS2000]:yt,[k.GCSMOON2000]:yt,[k.LON_LAT]:yt,[k.SPHERICAL_ECEF]:e0,[k.SPHERICAL_MARS_PCPF]:l5,[k.SPHERICAL_MOON_PCPF]:a5,[k.UNKNOWN]:null,[k.WEB_MERCATOR]:Af,[k.PLATE_CARREE]:Rf,[k.WGS84]:yt,[k.WGS84_ECEF]:Pf},[k.PLATE_CARREE]:{[k.CGCS2000]:Of,[k.GCSMARS2000]:null,[k.GCSMOON2000]:null,[k.LON_LAT]:Of,[k.SPHERICAL_ECEF]:ope,[k.SPHERICAL_MARS_PCPF]:null,[k.SPHERICAL_MOON_PCPF]:null,[k.UNKNOWN]:null,[k.WEB_MERCATOR]:ape,[k.PLATE_CARREE]:yt,[k.WGS84]:Of,[k.WGS84_ECEF]:lpe}};function zB(e,t,r=GB()){return e==null||t==null?null:fpe(e,t,r).projector}function o5(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=io(e,1)),wS(e)?t.spatialReferenceId=k.SPHERICAL_ECEF:np(e)?t.spatialReferenceId=k.WGS84:Zo(e)?t.spatialReferenceId=k.WEB_MERCATOR:rae(e)?t.spatialReferenceId=k.PLATE_CARREE:e.wkt===oae.wkt?t.spatialReferenceId=k.WGS84_ECEF:e.wkid===ip.CGCS2000?t.spatialReferenceId=k.CGCS2000:e.wkt===_O.wkt?t.spatialReferenceId=k.SPHERICAL_MARS_PCPF:e.wkt===bO.wkt?t.spatialReferenceId=k.SPHERICAL_MOON_PCPF:M7(e)?t.spatialReferenceId=k.GCSMARS2000:I7(e)?t.spatialReferenceId=k.GCSMOON2000:t.spatialReferenceId=k.UNKNOWN):k.UNKNOWN}function yt(e,t,r,i){e!==r&&(r[i++]=e[t++],r[i++]=e[t++],r[i]=e[t])}function Xg(e,t,r,i){r[i]=am*(e[t]/Bd),r[i+1]=am*(qB-2*Math.atan(Math.exp(-e[t+1]/Bd))),r[i+2]=e[t+2]}function epe(e,t,r,i){const n=e[t]/Bd,s=qB-2*Math.atan(Math.exp(-e[t+1]/Bd)),o=Bd+e[t+2],a=Math.cos(s)*o;r[i]=Math.cos(n)*a,r[i+1]=Math.sin(n)*a,r[i+2]=Math.sin(s)*o}function tpe(e,t,r,i){Xg(e,t,r,i),Pf(r,i,r,i)}function rpe(e,t,r,i,n){const s=.4999999*K2,o=os(om*e[t+1],-s,s),a=Math.sin(o);r[i++]=om*e[t]*n.radius,r[i++]=n.halfSemiMajorAxis*Math.log((1+a)/(1-a)),r[i]=e[t+2]}function Af(e,t,r,i){rpe(e,t,r,i,kt)}function Rf(e,t,r,i){r[i]=e[t]*d5,r[i+1]=e[t+1]*d5,r[i+2]=e[t+2]}function Of(e,t,r,i){r[i]=e[t]*p5,r[i+1]=e[t+1]*p5,r[i+2]=e[t+2]}function ipe(e,t,r,i){Xg(e,t,r,i),Rf(r,i,r,i)}function npe(e,t,r,i){Nf(e,t,r,i),Rf(r,i,r,i)}function spe(e,t,r,i){kf(e,t,r,i),Rf(r,i,r,i)}function ope(e,t,r,i){Of(e,t,r,i),e0(r,i,r,i)}function ape(e,t,r,i){Of(e,t,r,i),Af(r,i,r,i)}function lpe(e,t,r,i){Of(e,t,r,i),Pf(r,i,r,i)}function WO(e,t,r,i,n){const s=n+e[t+2],o=om*e[t+1],a=om*e[t],u=Math.cos(o)*s;r[i]=Math.cos(a)*u,r[i+1]=Math.sin(a)*u,r[i+2]=Math.sin(o)*s}function a5(e,t,r,i){WO(e,t,r,i,Ku.radius)}function l5(e,t,r,i){WO(e,t,r,i,Bo.radius)}function e0(e,t,r,i){WO(e,t,r,i,kt.radius)}function ZO(e,t,r,i,n){const s=e[t],o=e[t+1],a=e[t+2],u=Math.sqrt(s*s+o*o+a*a),d=ple(a/(u===0?1:u)),h=Math.atan2(o,s);r[i++]=am*h,r[i++]=am*d,r[i]=u-n}function u5(e,t,r,i){ZO(e,t,r,i,Ku.radius)}function c5(e,t,r,i){ZO(e,t,r,i,Bo.radius)}function kf(e,t,r,i){ZO(e,t,r,i,kt.radius)}function upe(e,t,r,i){kf(e,t,r,i),Af(r,i,r,i)}function cpe(e,t,r,i){kf(e,t,r,i),Pf(r,i,r,i)}function dpe(e,t,r,i,n){const s=om*e[t],o=om*e[t+1],a=e[t+2],u=Math.sin(o),d=Math.cos(o),h=n.radius/Math.sqrt(1-n.eccentricitySquared*u*u);r[i++]=(h+a)*d*Math.cos(s),r[i++]=(h+a)*d*Math.sin(s),r[i++]=(h*(1-n.eccentricitySquared)+a)*u}function Pf(e,t,r,i){dpe(e,t,r,i,kt)}function Nf(e,t,r,i){const n=Qde,s=e[t],o=e[t+1],a=e[t+2];let u,d,h,f,m,y,g,v,_,w,b,T,x,M,I,O,P,z,U,W,ee;u=Math.abs(a),d=s*s+o*o,h=Math.sqrt(d),f=d+a*a,m=Math.sqrt(f),W=Math.atan2(o,s),y=a*a/f,g=d/f,M=n.a2/m,I=n.a3-n.a4/m,g>.3?(v=u/m*(1+g*(n.a1+M+y*I)/m),U=Math.asin(v),w=v*v,_=Math.sqrt(1-w)):(_=h/m*(1-y*(n.a5-M-g*I)/m),U=Math.acos(_),w=1-_*_,v=Math.sqrt(w)),b=1-kt.eccentricitySquared*w,T=kt.radius/Math.sqrt(b),x=n.a6*T,M=h-T*_,I=u-x*v,P=_*M+v*I,O=_*I-v*M,z=O/(x/b+P),U+=z,ee=P+O*z/2,a<0&&(U=-U),r[i++]=am*W,r[i++]=am*U,r[i]=ee}function ppe(e,t,r,i){Nf(e,t,r,i),e0(r,i,r,i)}function hpe(e,t,r,i){Nf(e,t,r,i),Af(r,i,r,i)}function fpe(e,t,r){if(e==null||t==null||r.source.spatialReference===e&&r.dest.spatialReference===t)return r;const i=o5(e,r.source),n=o5(t,r.dest);return i===k.UNKNOWN&&n===k.UNKNOWN?Ht(e,t)?r.projector=yt:r.projector=null:r.projector=Xde[i][n],r}function GB(){return{source:{spatialReference:null,spatialReferenceId:k.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:k.UNKNOWN,metersPerUnit:1},projector:yt}}const GPe={spatialReference:null,spatialReferenceId:k.UNKNOWN},BPe={spatialReference:null,spatialReferenceId:k.UNKNOWN},BB=GB(),om=V2(1),am=J7(1),K2=Math.PI,qB=.5*K2,Bd=kt.radius,d5=Bd*K2/180,p5=180/(Bd*K2);function Lv(e,t,r,i,n,s,o=Math.floor(e.length/3)){const a=zB(t,n,BB);if(a==null)return!1;if(a===yt){if(e===i&&r===s)return!0;const d=r+3*o;for(let h=r,f=s;h<d;h++,f++)i[f]=e[h];return!0}const u=r+3*o;for(let d=r,h=s;d<u;d+=3,h+=3)a(e,d,i,h);return!0}const qPe=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:Lv},Symbol.toStringTag,{value:"Module"}));function h5(e,t,r,i,n,s){return P1[0]=e,P1[1]=t,P1[2]=r,Lv(P1,i,0,n,s,0)}const P1=uc();let N1=0,VT=class KM{static fromGE(t){const r=new KM;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r}constructor(t){this.uid=N1++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=N1++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=N1++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=N1++}getInverse(){const t=new KM;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},RS=class ky{static cacheKey(t,r){var i,n,s,o,a,u;return[((i=t.wkid)==null?void 0:i.toString())??"-1",((n=t.wkt)==null?void 0:n.toString())??"",((s=t.wkt2)==null?void 0:s.toString())??"",((o=r.wkid)==null?void 0:o.toString())??"-1",((a=r.wkt)==null?void 0:a.toString())??"",((u=r.wkt2)==null?void 0:u.toString())??""].join()}static fromGE(t){const r=new ky;let i="";for(const n of t.steps){const s=VT.fromGE(n);r.steps.push(s),i+=s.uid.toString()+","}return r._cachedProjection={},r._gtlistentry=null,r._chain=i,r}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t==null?void 0:t.steps)for(const r of t.steps)r instanceof VT?this.steps.push(r):this.steps.push(new VT({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}getInverse(){const t=new ky;t.steps=[];for(let r=this.steps.length-1;r>=0;r--){const i=this.steps[r];t.steps.push(i.getInverse())}return t}getGTListEntry(){let t="";for(const r of this.steps)t+=r.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,r,i){this._cachedProjection[ky.cacheKey(t,r)]=i}getCachedGeTransformation(t,r){let i="";for(const s of this.steps)i+=s.uid.toString()+",";i!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=i);const n=this._cachedProjection[ky.cacheKey(t,r)];return n===void 0?null:n}};function HB(e,t,r){if(t==null||r==null||r.vcsWkid||Ht(t,r)||Yu(t)||Yu(r))return null;const i=_S(t)/_S(r);if(i===1)return null;switch(e){case"point":case"esriGeometryPoint":return n=>mpe(n,i);case"polyline":case"esriGeometryPolyline":return n=>gpe(n,i);case"polygon":case"esriGeometryPolygon":return n=>ype(n,i);case"multipoint":case"esriGeometryMultipoint":return n=>vpe(n,i);case"extent":case"esriGeometryEnvelope":return n=>wpe(n,i);default:return null}}function mpe(e,t){(e==null?void 0:e.z)!=null&&(e.z*=t)}function ype(e,t){if(e)for(const r of e.rings)for(const i of r)i.length>2&&(i[2]*=t)}function gpe(e,t){if(e)for(const r of e.paths)for(const i of r)i.length>2&&(i[2]*=t)}function vpe(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}function wpe(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let Ys=null,tc=null,t0=null,s_={};const JO=new Ov;function gl(){return!!Ys&&vO()}function WB(){return!!gl()||(he(JO),hl(),!1)}function ZB(e,t){return!e||!t||ro(e,t)||WB()}function _pe(e,t){return!ro(e,t)&&!gl()}function hl(e){return t0==null&&(t0=Promise.all([b7(),D(()=>import("./geometryEngineBase-yFIvKOkM.js"),__vite__mapDeps([9,1]),import.meta.url).then(t=>t.g),D(()=>import("./hydrated-CSJc87Z5.js"),[],import.meta.url)])),t0.then(([,t,{hydratedAdapter:r}])=>{_t(e),tc=r,Ys=t.default,Ys._enableProjection(Qoe),JO.notify()})}function cc(e,t,r=null,i=null){return Array.isArray(e)?e.length===0?[]:YM(tc,e,e[0].spatialReference,t,r,i):YM(tc,[e],e.spatialReference,t,r,i)[0]}function YM(e,t,r,i,n=null,s=null){if(r==null||i==null)return t;if(ro(r,i,n))return t.map(o=>o_(o,r,i));if(n==null&&wS(r))return t.map(o=>o_(o,r,me.WGS84)).map(o=>Z0(o,i));if(n==null&&wS(i))return t.map(o=>Z0(o,me.WGS84)).map(o=>o_(o,me.WGS84,i));if(n==null){const o=RS.cacheKey(r,i);s_[o]!==void 0?n=s_[o]:((n=KB(r,i,void 0))==null&&(n=new RS),s_[o]=n)}if(Ys==null||e==null)throw new Y2;return s!=null?Ys._project(e,t,r,i,n,s):Ys._project(e,t,r,i,n)}function bpe(e,t){const r=JB([e],t);return r.pending!=null?{pending:r.pending,geometry:null}:r.geometries!=null?{pending:null,geometry:r.geometries[0]}:{pending:null,geometry:null}}function JB(e,t){if(!gl()){for(const r of e)if(r!=null&&!Ht(r.spatialReference,t)&&hn(r.spatialReference)&&hn(t)&&!ro(r.spatialReference,t))return he(JO),{pending:hl(),geometries:null}}return{pending:null,geometries:e.map(r=>r==null?null:Ht(r.spatialReference,t)?r:hn(r.spatialReference)&&hn(t)?Z0(r,t):null)}}function KB(e,t,r=null){if(e==null||t==null)return null;if(Ys==null||tc==null)throw new Y2;const i=Ys._getTransformation(tc,e,t,r,r==null?void 0:r.spatialReference);return i!==null?RS.fromGE(i):null}function Spe(e,t,r=null){if(Ys==null||tc==null)throw new Y2;const i=Ys._getTransformationBySuitability(tc,e,t,r,r==null?void 0:r.spatialReference);if(i!==null){const n=[];for(const s of i)n.push(RS.fromGE(s));return n}return[]}let Y2=class extends R{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function $pe(){Ys=null,tc=null,t0=null,s_={}}const Tpe={get loadPromise(){return t0}};function Z0(e,t){try{const r=cc(e,t);if(r==null)return null;"xmin"in e&&"xmin"in r&&(r.zmin=e.zmin,r.zmax=e.zmax);const i=HB(r.type,e.spatialReference,t);return i!=null&&i(r),r}catch(r){if(!(r instanceof Y2))throw r;return null}}async function xpe(e,t,r){const i=e.spatialReference;return i!=null&&t!=null&&await KO(i,t,null,r),Z0(e,t)}function ro(e,t,r){return!r&&(!!Ht(e,t)||hn(e)&&hn(t)&&!!zB(e,t,BB))}function Epe(e,t){if(Ht(e,t))return!0;if(!hn(e)||!hn(t))return!1;const r=np(e)||Zo(e)||KL(e),i=np(t)||Zo(t)||KL(t);return r&&i}async function KO(e,t,r,i){if(gl())return FL(i);if(Array.isArray(e)){for(const{source:n,dest:s,geographicTransformation:o}of e)if(n&&s&&!ro(n,s,o))return hl(i)}else if(e&&t&&!ro(e,t,r))return hl(i);return FL(i)}function o_(e,t,r){return e?"x"in e?YB(e,t,new ge,r,0):"xmin"in e?tq(e,t,new qe,r,0):"rings"in e?eq(e,t,new Zi,r,0):"paths"in e?XB(e,t,new Kn,r,0):"points"in e?QB(e,t,new Av,r,0):null:null}function Mpe(e,t,r=t.spatialReference,i=0){return r!=null&&e.spatialReference!=null&&YB(e,e.spatialReference,t,r,i)!=null}function YB(e,t,r,i,n){oi[0]=e.x,oi[1]=e.y;const s=e.z;return oi[2]=s!==void 0?s:n,Lv(oi,t,0,oi,i,0)?(r.x=oi[0],r.y=oi[1],r.spatialReference=i,s!==void 0||Yu(i)?(r.z=oi[2],r.hasZ=!0):(r.z=void 0,r.hasZ=!1),e.m===void 0?(r.m=void 0,r.hasM=!1):(r.m=e.m,r.hasM=!0),r):null}function Ipe(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&QB(e,e.spatialReference,t,r,i)!=null}function QB(e,t,r,i,n){const{points:s,hasZ:o,hasM:a}=e,u=[],d=s.length,h=[];for(const m of s)h.push(m[0],m[1],o?m[2]:n);if(!Lv(h,t,0,h,i,0,d))return null;const f=o||Yu(i);for(let m=0;m<d;++m){const y=3*m,g=h[y],v=h[y+1];f&&a?u.push([g,v,h[y+2],s[m][3]]):f?u.push([g,v,h[y+2]]):a?u.push([g,v,s[m][2]]):u.push([g,v])}return r.points=u,r.spatialReference=i,r.hasZ=o,r.hasM=a,r}function Cpe(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&XB(e,e.spatialReference,t,r,i)!=null}function XB(e,t,r,i,n){const{paths:s,hasZ:o,hasM:a}=e,u=[];if(!rq(s,o??!1,a??!1,t,u,i,n))return null;const d=o||Yu(i);return r.paths=u,r.spatialReference=i,r.hasZ=d,r.hasM=a,r}function Ape(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&eq(e,e.spatialReference,t,r,i)!=null}function eq(e,t,r,i,n){const{rings:s,hasZ:o,hasM:a}=e,u=[];if(!rq(s,o??!1,a??!1,t,u,i,n))return null;const d=o||Yu(i);return r.rings=u,r.spatialReference=i,r.hasZ=d,r.hasM=a,r}function Rpe(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&tq(e,e.spatialReference,t,r,i)!=null}function tq(e,t,r,i,n){const{xmin:s,ymin:o,xmax:a,ymax:u,hasZ:d,hasM:h}=e,f=d?e.zmin:n;if(!h5(s,o,f,t,oi,i))return null;const m=d||Yu(i);r.xmin=oi[0],r.ymin=oi[1],m&&(r.zmin=oi[2]);const y=d?e.zmax:n;return h5(a,u,y,t,oi,i)?(r.xmax=oi[0],r.ymax=oi[1],m&&(r.zmax=oi[2]),h&&(r.mmin=e.mmin,r.mmax=e.mmax),r.spatialReference=i,r):null}function rq(e,t,r,i,n,s,o=0){const a=new Array;for(const h of e)for(const f of h)a.push(f[0],f[1],t?f[2]:o);if(!Lv(a,i,0,a,s,0))return!1;let u=0;n.length=0;const d=t||Yu(s);for(const h of e){const f=new Array;for(const m of h)d&&r?f.push([a[u++],a[u++],a[u++],m[3]]):d?f.push([a[u++],a[u++],a[u++]]):r?(f.push([a[u++],a[u++],m[2]]),u++):(f.push([a[u++],a[u++]]),u++);n.push(f)}return!0}const oi=uc(),WPe=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:ro,getTransformation:KB,getTransformations:Spe,initializeProjection:KO,isEqualBaseGCS:Epe,isLoaded:gl,isLoadedOrLoad:WB,isLoadedOrLoadFor:ZB,load:hl,project:cc,projectExtent:Rpe,projectMany:YM,projectMultipoint:Ipe,projectOrLoad:bpe,projectOrLoadMany:JB,projectPoint:Mpe,projectPolygon:Ape,projectPolyline:Cpe,projectWithZConversion:xpe,projectWithoutEngine:o_,requiresLoad:_pe,test:Tpe,tryProjectWithZConversion:Z0,unload:$pe},Symbol.toStringTag,{value:"Module"}));var QM;let fo=QM=class extends N{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new QM({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};l([c({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],fo.prototype,"cols",void 0),l([c({type:ke,json:{write:!0}})],fo.prototype,"level",void 0),l([c({type:String,json:{write:!0}})],fo.prototype,"levelValue",void 0),l([c({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],fo.prototype,"origin",void 0),l([c({type:Number,json:{write:!0}})],fo.prototype,"resolution",void 0),l([c({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],fo.prototype,"rows",void 0),l([c({type:Number,json:{write:!0}})],fo.prototype,"scale",void 0),fo=QM=l([$("esri.layers.support.LOD")],fo);const yu=fo;let Ope=class{constructor(t,r,i,n,s=void 0){this.id=t,this.level=r,this.row=i,this.col=n,this.extent=s}};var Fl;const f5=new _e({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Pr=Fl=class extends N{static create(e={}){const{resolutionFactor:t=1,scales:r,size:i=256,spatialReference:n=me.WebMercator,numLODs:s=24}=e;if(!hn(n)){const f=[];if(r)for(let m=0;m<r.length;m++){const y=r[m];f.push(new yu({level:m,scale:y,resolution:y}))}else{let m=5e-4;for(let y=s-1;y>=0;y--)f.unshift(new yu({level:y,scale:m,resolution:m})),m*=2}return new Fl({dpi:96,lods:f,origin:new ge(0,0,n),size:[i,i],spatialReference:n})}const o=bi(n),a=e.origin?new ge({x:e.origin.x,y:e.origin.y,spatialReference:n}):new ge(o?{x:o.origin[0],y:o.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),u=96,d=1/(io(n)*39.37*u),h=[];if(r)for(let f=0;f<r.length;f++){const m=r[f],y=m*d;h.push(new yu({level:f,scale:m,resolution:y}))}else{let f=N2(n)?512/i*5916575275917094e-7:256/i*591657527591555e-6;const m=Math.ceil(s/t);h.push(new yu({level:0,scale:f,resolution:f*d}));for(let y=1;y<m;y++){const g=f/2**t,v=g*d;h.push(new yu({level:y,scale:g,resolution:v})),f=g}}return new Fl({dpi:u,lods:h,origin:a,size:[i,i],spatialReference:n})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const r=bi(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-t.x)<=r.dx}return!1}readOrigin(e,t){return ge.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,r=0;const i=[],n=this._levelToLOD={};e&&(t=-1/0,r=1/0,e.forEach(s=>{i.push(s.scale),t=s.scale>t?s.scale:t,r=s.scale<r?s.scale:r,n[s.level]=s})),this._set("scales",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const r=Math.floor(e),i=r+1;return t[r]/(t[r]/t[i])**(e-r)}scaleToZoom(e){const t=this.scales,r=t.length-1;let i=0;for(;i<r;i++){const n=t[i],s=t[i+1];if(n<=e)return i;if(s===e)return i+1;if(n>e&&s<e)return i+Math.log(n/e)/Math.log(n/s)}return i}tileAt(e,t,r,i){const n=this.lodAt(e);if(!n)return null;let s,o;if(typeof t=="number")s=t,o=r;else if(Ht(t.spatialReference,this.spatialReference))s=t.x,o=t.y,i=r;else{const d=D2(t,this.spatialReference);if(d==null)return null;s=d.x,o=d.y,i=r}const a=n.resolution*this.size[0],u=n.resolution*this.size[1];return i||(i=new Ope(null,0,0,0,Ui())),i.level=e,i.row=Math.floor((this.origin.y-o)/u+.001),i.col=Math.floor((s-this.origin.x)/a+.001),this.updateTileInfo(i),i}updateTileInfo(e,t=Fl.ExtrapolateOptions.NONE){let r=this.lodAt(e.level);if(!r&&t===Fl.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<e.level&&(r=o)}if(!r)return;const i=e.level-r.level,n=r.resolution*this.size[0]/2**i,s=r.resolution*this.size[1]/2**i;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Ui()),e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+s}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const r=this.lodAt(t.level);if(r==null)return null;const{resolution:i}=r,n=i*this.size[0],s=i*this.size[1];return e[0]=this.origin.x+t.col*n,e[1]=this.origin.y-(t.row+1)*s,e[2]=e[0]+n,e[3]=e[1]+s,e}lodAt(e){var t;return((t=this._levelToLOD)==null?void 0:t[e])??null}clone(){return Fl.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const t=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&t===0)return this;const r=[],i=this.lods.length-t;for(let n=0;n<i;n++){const s=n+t,{scale:o,resolution:a}=s>=0?this.lods[s]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new yu({level:n,scale:o,resolution:a}))}return new Fl({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let r=0;r<e.length;r++){const i=e[r];this._upsampleLevels[i.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/i.resolution:0},t=i}}};l([c({type:Number,json:{write:!0}})],Pr.prototype,"compressionQuality",void 0),l([c({type:Number,json:{write:!0}})],Pr.prototype,"dpi",void 0),l([c({type:String,json:{read:f5.read,write:f5.write,origins:{"web-scene":{read:!1,write:!1}}}})],Pr.prototype,"format",void 0),l([c({readOnly:!0})],Pr.prototype,"isWrappable",null),l([c({type:ge,json:{write:!0}})],Pr.prototype,"origin",void 0),l([G("origin")],Pr.prototype,"readOrigin",null),l([c({type:[yu],value:null,json:{write:!0}})],Pr.prototype,"lods",null),l([c({readOnly:!0})],Pr.prototype,"scales",void 0),l([c({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],Pr.prototype,"size",void 0),l([G("size",["rows","cols"])],Pr.prototype,"readSize",null),l([B("size",{cols:{type:ke},rows:{type:ke}})],Pr.prototype,"writeSize",null),l([c({type:me,json:{write:!0}})],Pr.prototype,"spatialReference",void 0),Pr=Fl=l([$("esri.layers.support.TileInfo")],Pr),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(Pr||(Pr={}));const kpe=Pr,a_={widthBreakpoint:{getValue(e){const t=e.viewSize[0],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,r=t[0],i=t[1],n=this.values;return i>=r?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},UT={xsmall:544,small:768,medium:992,large:1200};function Ppe(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function zT(e,t){return t?a_[e].valueToClassName[t].split(" "):[]}const Npe=e=>{let t=class extends e{constructor(...r){super(...r),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=UT}initialize(){this.addHandles(ce(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),zt))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(r){if(r!==this._get("breakpoints")){if(!Ppe(r)){const i=JSON.stringify(UT,null,2);console.warn("provided breakpoints are not valid, using defaults:"+i),r=UT}this._set("breakpoints",{...r})}}_updateClassNames(){if(!this.container)return;const r=wi.acquire(),i=wi.acquire();let n,s=!1;for(n in a_){const o=this[n],a=a_[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(s=!0,this[n]=a,zT(n,o).forEach(u=>i.push(u)),zT(n,a).forEach(u=>r.push(u)))}s&&(this._applyClassNameChanges(r,i),wi.release(r),wi.release(i))}_applyClassNameChanges(r,i){const n=this.container;n&&(i.forEach(s=>n.classList.remove(s)),r.forEach(s=>n.classList.add(s)))}_removeActiveClassNames(){const r=this.container;if(!r)return;let i;for(i in a_)zT(i,this[i]).forEach(n=>r.classList.remove(n))}};return l([c()],t.prototype,"breakpoints",null),l([c()],t.prototype,"orientation",void 0),l([c()],t.prototype,"widthBreakpoint",void 0),l([c()],t.prototype,"heightBreakpoint",void 0),t=l([$("esri.views.BreakpointsOwner")],t),t};function YO(e){return typeof e=="string"?document.getElementById(e):e??null}function m5(e,t){for(;;){const r=e.firstChild;if(!r)break;t.appendChild(r)}}let qd=class extends te{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(t,r,i={}){return this._installWatch(t,r,i,ce)}addWhen(t,r,i={}){return this._installWatch(t,r,i,as)}addOnCollectionChange(t,r,{initial:i=!1,final:n=!1}={}){const s=++this._handleId;return this.addHandles([pl(t,"after-changes",this._createSyncUpdatingCallback(),Jo),pl(t,"change",r,{onListenerAdd:i?o=>r({added:o.toArray(),removed:[]}):void 0,onListenerRemove:n?o=>r({added:[],removed:o.toArray()}):void 0})],s),Be(()=>this.removeHandles(s))}addPromise(t){if(t==null)return t;const r=++this._handleId;this.addHandles(Be(()=>{this._pendingPromises.delete(t)&&(this._pendingPromises.size!==0||this.hasHandles(L1)||this._set("updating",!1))}),r),this._pendingPromises.add(t),this._set("updating",!0);const i=()=>this.removeHandles(r);return t.then(i,i),t}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(t,r,i={},n){const s=++this._handleId;i.sync||this._installSyncUpdatingWatch(t,s);const o=n(t,r,i);return this.addHandles(o,s),Be(()=>this.removeHandles(s))}_installSyncUpdatingWatch(t,r){const i=this._createSyncUpdatingCallback(),n=ce(t,i,{sync:!0,equals:()=>!1});return this.addHandles(n,r),n}_createSyncUpdatingCallback(){return()=>{this.removeHandles(L1),++this._scheduleHandleId;const t=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(Mv(()=>{t===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(L1))}),L1)}}};l([c({readOnly:!0})],qd.prototype,"updating",void 0),qd=l([$("esri.core.support.UpdatingHandles")],qd);const L1=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0-next.3 - Wed Sep 25 2024 10:04:57 GMT-0400 (Eastern Daylight Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var OS=function(){return OS=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},OS.apply(this,arguments)},XM={exports:{}},Pt={},eI={exports:{}},$p={};function iq(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function Lpe(e,t,r){}function Fpe(e,t,r){}var Dpe=/javascript\s*\:/img;function jpe(e,t){return Dpe.test(t)?"":t}$p.whiteList=iq();$p.getDefaultWhiteList=iq;$p.onAttr=Lpe;$p.onIgnoreAttr=Fpe;$p.safeAttrValue=jpe;var Vpe={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,n;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},oy=Vpe;function Upe(e,t){e=oy.trimRight(e),e[e.length-1]!==";"&&(e+=";");var r=e.length,i=!1,n=0,s=0,o="";function a(){if(!i){var h=oy.trim(e.slice(n,s)),f=h.indexOf(":");if(f!==-1){var m=oy.trim(h.slice(0,f)),y=oy.trim(h.slice(f+1));if(m){var g=t(n,o.length,m,y,h);g&&(o+=g+"; ")}}}n=s+1}for(;s<r;s++){var u=e[s];if(u==="/"&&e[s+1]==="*"){var d=e.indexOf("*/",s+2);if(d===-1)break;s=d+1,n=s+1,i=!1}else u==="("?i=!0:u===")"?i=!1:u===";"?i||a():u===`
`&&a()}return oy.trim(o)}var zpe=Upe,F1=$p,Gpe=zpe;function y5(e){return e==null}function Bpe(e){var t={};for(var r in e)t[r]=e[r];return t}function nq(e){e=Bpe(e||{}),e.whiteList=e.whiteList||F1.whiteList,e.onAttr=e.onAttr||F1.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||F1.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||F1.safeAttrValue,this.options=e}nq.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,n=r.onAttr,s=r.onIgnoreAttr,o=r.safeAttrValue,a=Gpe(e,function(u,d,h,f,m){var y=i[h],g=!1;if(y===!0?g=y:typeof y=="function"?g=y(f):y instanceof RegExp&&(g=y.test(f)),g!==!0&&(g=!1),f=o(h,f),!!f){var v={position:d,sourcePosition:u,source:m,isWhite:g};if(g){var _=n(h,f,v);return y5(_)?h+":"+f:_}else{var _=s(h,f,v);if(!y5(_))return _}}});return a};var qpe=nq;(function(e,t){var r=$p,i=qpe;function n(o,a){var u=new i(a);return u.process(o)}t=e.exports=n,t.FilterCSS=i;for(var s in r)t[s]=r[s]})(eI,eI.exports);var QO=eI.exports,XO={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,n;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,r=t.exec(e);return r?r.index:-1}},Hpe=QO.FilterCSS,Wpe=QO.getDefaultWhiteList,kS=XO;function sq(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var oq=new Hpe;function Zpe(e,t,r){}function Jpe(e,t,r){}function Kpe(e,t,r){}function Ype(e,t,r){}function aq(e){return e.replace(Xpe,"&lt;").replace(ehe,"&gt;")}function Qpe(e,t,r,i){if(r=hq(r),t==="href"||t==="src"){if(r=kS.trim(r),r==="#")return"#";if(!(r.substr(0,7)==="http://"||r.substr(0,8)==="https://"||r.substr(0,7)==="mailto:"||r.substr(0,4)==="tel:"||r.substr(0,11)==="data:image/"||r.substr(0,6)==="ftp://"||r.substr(0,2)==="./"||r.substr(0,3)==="../"||r[0]==="#"||r[0]==="/"))return""}else if(t==="background"){if(D1.lastIndex=0,D1.test(r))return""}else if(t==="style"){if(g5.lastIndex=0,g5.test(r)||(v5.lastIndex=0,v5.test(r)&&(D1.lastIndex=0,D1.test(r))))return"";i!==!1&&(i=i||oq,r=i.process(r))}return r=fq(r),r}var Xpe=/</g,ehe=/>/g,the=/"/g,rhe=/&quot;/g,ihe=/&#([a-zA-Z0-9]*);?/gim,nhe=/&colon;?/gim,she=/&newline;?/gim,D1=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,g5=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,v5=/u\s*r\s*l\s*\(.*/gi;function lq(e){return e.replace(the,"&quot;")}function uq(e){return e.replace(rhe,'"')}function cq(e){return e.replace(ihe,function(r,i){return i[0]==="x"||i[0]==="X"?String.fromCharCode(parseInt(i.substr(1),16)):String.fromCharCode(parseInt(i,10))})}function dq(e){return e.replace(nhe,":").replace(she," ")}function pq(e){for(var t="",r=0,i=e.length;r<i;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return kS.trim(t)}function hq(e){return e=uq(e),e=cq(e),e=dq(e),e=pq(e),e}function fq(e){return e=lq(e),e=aq(e),e}function ohe(){return""}function ahe(e,t){typeof t!="function"&&(t=function(){});var r=!Array.isArray(e);function i(o){return r?!0:kS.indexOf(e,o)!==-1}var n=[],s=!1;return{onIgnoreTag:function(o,a,u){if(i(o))if(u.isClosing){var d="[/removed]",h=u.position+d.length;return n.push([s!==!1?s:u.position,h]),s=!1,d}else return s||(s=u.position),"[removed]";else return t(o,a,u)},remove:function(o){var a="",u=0;return kS.forEach(n,function(d){a+=o.slice(u,d[0]),u=d[1]}),a+=o.slice(u),a}}}function lhe(e){for(var t="",r=0;r<e.length;){var i=e.indexOf("<!--",r);if(i===-1){t+=e.slice(r);break}t+=e.slice(r,i);var n=e.indexOf("-->",i);if(n===-1)break;r=n+3}return t}function uhe(e){var t=e.split("");return t=t.filter(function(r){var i=r.charCodeAt(0);return i===127?!1:i<=31?i===10||i===13:!0}),t.join("")}Pt.whiteList=sq();Pt.getDefaultWhiteList=sq;Pt.onTag=Zpe;Pt.onIgnoreTag=Jpe;Pt.onTagAttr=Kpe;Pt.onIgnoreTagAttr=Ype;Pt.safeAttrValue=Qpe;Pt.escapeHtml=aq;Pt.escapeQuote=lq;Pt.unescapeQuote=uq;Pt.escapeHtmlEntities=cq;Pt.escapeDangerHtml5Entities=dq;Pt.clearNonPrintableCharacter=pq;Pt.friendlyAttrValue=hq;Pt.escapeAttrValue=fq;Pt.onIgnoreTagStripAll=ohe;Pt.StripTagBody=ahe;Pt.stripCommentTag=lhe;Pt.stripBlankChar=uhe;Pt.cssFilter=oq;Pt.getDefaultCSSWhiteList=Wpe;var Q2={},gu=XO;function che(e){var t=gu.spaceIndex(e),r;return t===-1?r=e.slice(1,-1):r=e.slice(1,t+1),r=gu.trim(r).toLowerCase(),r.slice(0,1)==="/"&&(r=r.slice(1)),r.slice(-1)==="/"&&(r=r.slice(0,-1)),r}function dhe(e){return e.slice(0,2)==="</"}function phe(e,t,r){var i="",n=0,s=!1,o=!1,a=0,u=e.length,d="",h="";e:for(a=0;a<u;a++){var f=e.charAt(a);if(s===!1){if(f==="<"){s=a;continue}}else if(o===!1){if(f==="<"){i+=r(e.slice(n,a)),s=a,n=a;continue}if(f===">"){i+=r(e.slice(n,s)),h=e.slice(s,a+1),d=che(h),i+=t(s,i.length,d,h,dhe(h)),n=a+1,s=!1;continue}if(f==='"'||f==="'")for(var m=1,y=e.charAt(a-m);y.trim()===""||y==="=";){if(y==="="){o=f;continue e}y=e.charAt(a-++m)}}else if(f===o){o=!1;continue}}return n<e.length&&(i+=r(e.substr(n))),i}var hhe=/[^a-zA-Z0-9\\_:.-]/gim;function fhe(e,t){var r=0,i=0,n=[],s=!1,o=e.length;function a(m,y){if(m=gu.trim(m),m=m.replace(hhe,"").toLowerCase(),!(m.length<1)){var g=t(m,y||"");g&&n.push(g)}}for(var u=0;u<o;u++){var d=e.charAt(u),h,f;if(s===!1&&d==="="){s=e.slice(r,u),r=u+1,i=e.charAt(r)==='"'||e.charAt(r)==="'"?r:yhe(e,u+1);continue}if(s!==!1&&u===i){if(f=e.indexOf(d,u+1),f===-1)break;h=gu.trim(e.slice(i+1,f)),a(s,h),s=!1,u=f,r=u+1;continue}if(/\s|\n|\t/.test(d))if(e=e.replace(/\s|\n|\t/g," "),s===!1)if(f=mhe(e,u),f===-1){h=gu.trim(e.slice(r,u)),a(h),s=!1,r=u+1;continue}else{u=f-1;continue}else if(f=ghe(e,u-1),f===-1){h=gu.trim(e.slice(r,u)),h=w5(h),a(s,h),s=!1,r=u+1;continue}else continue}return r<e.length&&(s===!1?a(e.slice(r)):a(s,w5(gu.trim(e.slice(r))))),gu.trim(n.join(" "))}function mhe(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="="?t:-1}}function yhe(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="'"||r==='"'?t:-1}}function ghe(e,t){for(;t>0;t--){var r=e[t];if(r!==" ")return r==="="?t:-1}}function vhe(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function w5(e){return vhe(e)?e.substr(1,e.length-2):e}Q2.parseTag=phe;Q2.parseAttr=fhe;var whe=QO.FilterCSS,js=Pt,mq=Q2,_he=mq.parseTag,bhe=mq.parseAttr,l_=XO;function j1(e){return e==null}function She(e){var t=l_.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=l_.trim(e.slice(t+1,-1));var r=e[e.length-1]==="/";return r&&(e=l_.trim(e.slice(0,-1))),{html:e,closing:r}}function $he(e){var t={};for(var r in e)t[r]=e[r];return t}function The(e){var t={};for(var r in e)Array.isArray(e[r])?t[r.toLowerCase()]=e[r].map(function(i){return i.toLowerCase()}):t[r.toLowerCase()]=e[r];return t}function yq(e){e=$he(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=js.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=The(e.whiteList||e.allowList):e.whiteList=js.whiteList,e.onTag=e.onTag||js.onTag,e.onTagAttr=e.onTagAttr||js.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||js.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||js.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||js.safeAttrValue,e.escapeHtml=e.escapeHtml||js.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new whe(e.css))}yq.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,n=r.onTag,s=r.onIgnoreTag,o=r.onTagAttr,a=r.onIgnoreTagAttr,u=r.safeAttrValue,d=r.escapeHtml,h=t.cssFilter;r.stripBlankChar&&(e=js.stripBlankChar(e)),r.allowCommentTag||(e=js.stripCommentTag(e));var f=!1;r.stripIgnoreTagBody&&(f=js.StripTagBody(r.stripIgnoreTagBody,s),s=f.onIgnoreTag);var m=_he(e,function(y,g,v,_,w){var b={sourcePosition:y,position:g,isClosing:w,isWhite:Object.prototype.hasOwnProperty.call(i,v)},T=n(v,_,b);if(!j1(T))return T;if(b.isWhite){if(b.isClosing)return"</"+v+">";var x=She(_),M=i[v],I=bhe(x.html,function(O,P){var z=l_.indexOf(M,O)!==-1,U=o(v,O,P,z);return j1(U)?z?(P=u(v,O,P,h),P?O+'="'+P+'"':O):(U=a(v,O,P,z),j1(U)?void 0:U):U});return _="<"+v,I&&(_+=" "+I),x.closing&&(_+=" /"),_+=">",_}else return T=s(v,_,b),j1(T)?d(_):T},d);return f&&(m=f.remove(m)),m};var xhe=yq;(function(e,t){var r=Pt,i=Q2,n=xhe;function s(a,u){var d=new n(u);return d.process(a)}t=e.exports=s,t.filterXSS=s,t.FilterXSS=n,function(){for(var a in r)t[a]=r[a];for(var u in i)t[u]=i[u]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=e.exports)})(XM,XM.exports);var Lp=XM.exports,Ehe=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},Mhe=function(){function e(t,r){var i=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=OS(OS({},Lp.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,u){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?i.sanitizeUrl(a):Lp.safeAttrValue(s,o,a,u)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;t&&!r?n=t:t&&r?(n=Object.create(this.arcgisFilterOptions),n.css={whiteList:this.arcgisCSSWhiteList},Object.keys(t).forEach(function(s){if(s==="whiteList")n.whiteList=i._extendObjectOfArrays([i.arcgisWhiteList,t.whiteList||{}]);else if(s==="css"){var o=t.css.whiteList;o!=null&&t.css instanceof Object&&Object.keys(o).forEach(function(a){return n.css.whiteList[a]=o[a]})}else n[s]=t[s]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList,n.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=n,this._xssFilter=new Lp.FilterXSS(n)}return e.prototype.sanitize=function(t,r){switch(r===void 0&&(r={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,r);default:return r.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,r){var i=(r??{}).isProtocolRequired,n=i===void 0?!0:i,s=this._trim(t.substring(0,t.indexOf(":"))),o=t==="/",a=/^#/.test(t),u=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||u?Lp.escapeAttrValue(t):!s&&!n?Lp.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,r,i,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,r,i,n):Lp.safeAttrValue(t,r,i,n)},e.prototype.validate=function(t,r){r===void 0&&(r={});var i=this.sanitize(t,r);return{isValid:t===i,sanitized:i}},e.prototype.encodeHTML=function(t){var r=this;return String(t).replace(/[&<>"'\/]/g,function(i){return r._entityMap[i]})},e.prototype.encodeAttrValue=function(t){var r=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(i,n){return r.test(i)?i:"&#x".concat(Number(t.charCodeAt(n)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var r={};return t.forEach(function(i){Object.keys(i).forEach(function(n){Array.isArray(i[n])&&Array.isArray(r[n])?r[n]=r[n].concat(i[n]):r[n]=i[n]})}),r},e.prototype._iterateOverObject=function(t,r){var i=this;r===void 0&&(r={});try{var n=!1,s=void 0;if(Array.isArray(t))s=t.reduce(function(a,u){var d=i.validate(u,r);return d.isValid?a.concat([u]):(n=!0,a.concat([d.sanitized]))},[]);else if(Ehe(t)){var o=Object.keys(t);s=o.reduce(function(a,u){var d=t[u],h=i.validate(d,r);return h.isValid?a[u]=d:(n=!0,a[u]=h.sanitized),a},{})}else return r.allowUndefined&&typeof t>"u"?void 0:null;return n?s:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const X2=new Map;function gq(){X2.clear()}function Ihe(e){return X2.get(e)}function Che(e,t){X2.set(e,t)}function GT(e){X2.delete(e)}function Ahe(...e){const t=wi.acquire();for(let i=0;i<e.length;i++){const n=e[i],s=typeof n;if(s==="string")t.push(n);else if(Array.isArray(n))t.push.apply(t,n);else if(s==="object")for(const o in n)n[o]&&t.push(o)}const r=t.join(" ");return wi.release(t),r}(()=>{const e=new Map,t=new ResizeObserver(i=>{var n;gq();for(const s of i)(n=e.get(s.target))==null||n(s)}),r=(i,n,s)=>(e.set(i,n),t.observe(i,s),Be(()=>{t.unobserve(i),e.delete(i)}));return(i,n,s)=>{let o=null;return Sv([ce(()=>typeof i=="function"?i():i,a=>{o==null||o.remove(),a&&(o=r(a,n,s))},dn),Be(()=>o==null?void 0:o.remove())])}})();function Rhe(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function KPe(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function V1(e){const t="data-node-ref";this[e.getAttribute(t)]=e}const Ohe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],khe=Ohe.reduce((e,t)=>(e[t]=[],e),{}),Phe=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],vq=new Mhe({whiteList:khe,onTagAttr:(e,t,r)=>{const i=`${t}="${r}"`;if(Phe.includes(t))return i},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function wq(e){return e==="Enter"||e===" "}async function Nhe(e,t){await Dz(Ev(t));const r=typeof e=="function"?e():e;r&&("setFocus"in r&&typeof r.setFocus=="function"?await r.setFocus():r instanceof HTMLElement&&r.focus())}const _q="http://www.w3.org/",e$=`${_q}2000/svg`,bq=`${_q}1999/xlink`;let _5=[],ek=(e,t)=>{let r={};return Object.keys(e).forEach(i=>{r[i]=e[i]}),t&&Object.keys(t).forEach(i=>{r[i]=t[i]}),r},tk=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),Sq=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},Lhe=(e,t,r)=>{if(t.vnodeSelector!==""){for(let i=r;i<e.length;i++)if(tk(e[i],t))return i}return-1},BT=(e,t,r,i)=>{let n=e[t];if(n.vnodeSelector==="")return;let s=n.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<e.length;o++)if(o!==t){let a=e[o];if(tk(a,n))throw new Error(`${r.vnodeSelector} had a ${n.vnodeSelector} child ${i==="added"?i:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},Fhe=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},tI=[],rI=!1,$q=e=>{(e.children||[]).forEach($q),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},b5=()=>{rI=!1,tI.forEach($q),tI.length=0},S5=e=>{tI.push(e),rI||(rI=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(b5,{timeout:16}):setTimeout(b5,16))},$5=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r)return t.style.pointerEvents="none",void r(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),S5(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),S5(e))},Dhe=(e,t,r)=>{if(!t)return;let i=r.eventHandlerInterceptor,n=Object.keys(t),s=n.length;for(let o=0;o<s;o++){let a=n[o],u=t[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")nI(e,u,!0);else if(a==="classes"){let d=Object.keys(u),h=d.length;for(let f=0;f<h;f++){let m=d[f];u[m]&&e.classList.add(m)}}else if(a==="styles"){let d=Object.keys(u),h=d.length;for(let f=0;f<h;f++){let m=d[f],y=u[m];y&&(Sq(y),r.styleApplyer(e,m,y))}}else if(a!=="key"&&u!=null){let d=typeof u;d==="function"?(a.lastIndexOf("on",0)===0&&(i&&(u=i(a,u,e,t)),a==="oninput"&&function(){let h=u;u=function(f){h.apply(this,[f]),f.target["oninput-value"]=f.target.value}}()),e[a]=u):r.namespace===e$?a==="href"?e.setAttributeNS(bq,a,u):e.setAttribute(a,u):d==="string"&&a!=="value"?a==="innerHTML"?e[a]=vq.sanitize(u):iI(e)&&a in e?e[a]=u:e.setAttribute(a,u):e[a]=u}}};function iI(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let PS,jhe=(e,t,r)=>{if(t)for(let i of t)df(i,e,void 0,r)},Tq=(e,t,r)=>{jhe(e,t.children,r),t.text&&(e.textContent=t.text),Dhe(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},df=(e,t,r,i)=>{let n,s=0,o=e.vnodeSelector,a=t.ownerDocument;if(o==="")n=e.domNode=a.createTextNode(e.text),r!==void 0?t.insertBefore(n,r):t.appendChild(n);else{for(let u=0;u<=o.length;++u){let d=o.charAt(u);if(u===o.length||d==="."||d==="#"){let h=o.charAt(s-1),f=o.slice(s,u);h==="."?n.classList.add(f):h==="#"?n.id=f:(f==="svg"&&(i=ek(i,{namespace:e$})),i.namespace!==void 0?n=e.domNode=a.createElementNS(i.namespace,f):(n=e.domNode=e.domNode||a.createElement(f),f==="input"&&e.properties&&e.properties.type!==void 0&&n.setAttribute("type",e.properties.type)),r!==void 0?t.insertBefore(n,r):n.parentNode!==t&&t.appendChild(n)),s=u+1}}Tq(n,e,i)}},nI=(e,t,r)=>{t&&t.split(" ").forEach(i=>{i&&e.classList.toggle(i,r)})},Vhe=(e,t,r,i)=>{if(!r)return;let n=!1,s=Object.keys(r),o=s.length;for(let a=0;a<o;a++){let u=s[a],d=r[u],h=t[u];if(u==="class")h!==d&&(nI(e,h,!1),nI(e,d,!0));else if(u==="classes"){let f=e.classList,m=Object.keys(d),y=m.length;for(let g=0;g<y;g++){let v=m[g],_=!!d[v];_!==!!h[v]&&(n=!0,_?f.add(v):f.remove(v))}}else if(u==="styles"){let f=Object.keys(d),m=f.length;for(let y=0;y<m;y++){let g=f[y],v=d[g];v!==h[g]&&(n=!0,v?(Sq(v),i.styleApplyer(e,g,v)):i.styleApplyer(e,g,""))}}else if(d||typeof h!="string"||(d=""),u!=="value"||iI(e)){if(d!==h){let f=typeof d;f==="function"&&i.eventHandlerInterceptor||(i.namespace===e$?u==="href"?e.setAttributeNS(bq,u,d):e.setAttribute(u,d):f==="string"?u==="innerHTML"?e[u]=vq.sanitize(d):u==="role"&&d===""?e.removeAttribute(u):iI(e)&&u in e?e[u]=d:e.setAttribute(u,d):e[u]!==d&&(e[u]=d),n=!0)}}else{let f=e[u];f!==d&&(e["oninput-value"]?f===e["oninput-value"]:d!==h)&&(e[u]=d,e["oninput-value"]=void 0),d!==h&&(n=!0)}}return n},Uhe=(e,t,r,i,n)=>{if(r===i)return!1;i=i||_5;let s,o=(r=r||_5).length,a=i.length,u=0,d=0,h=!1;for(;d<a;){let f=u<o?r[u]:void 0,m=i[d];if(f!==void 0&&tk(f,m))h=PS(f,m,n)||h,u++;else{let y=Lhe(r,m,u+1);if(y>=0){for(s=u;s<y;s++)$5(r[s]),BT(r,s,e,"removed");h=PS(r[y],m,n)||h,u=y+1}else df(m,t,u<o?r[u].domNode:void 0,n),Fhe(m),BT(i,d,e,"added")}d++}if(o>u)for(s=u;s<o;s++)$5(r[s]),BT(r,s,e,"removed");return h};PS=(e,t,r)=>{let i=e.domNode,n=!1;if(e===t)return!1;let s=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let o=i.ownerDocument.createTextNode(t.text);return i.parentNode.replaceChild(o,i),t.domNode=o,n=!0,n}t.domNode=i}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(r=ek(r,{namespace:e$})),e.text!==t.text&&(s=!0,t.text===void 0?i.removeChild(i.firstChild):i.textContent=t.text),t.domNode=i,s=Uhe(t,i,e.children,t.children,r)||s,s=Vhe(i,e.properties,t.properties,r)||s,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[i,r,t.vnodeSelector,t.properties,t.children]);return s&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(i,t.properties,e.properties),n};let ay=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let i=e;e=r,PS(i,r,t)},domNode:e.domNode});const zhe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}};let Qp=e=>ek(zhe,e),Ru={create:(e,t)=>(t=Qp(t),df(e,document.createElement("div"),void 0,t),ay(e,t)),append:(e,t,r)=>(r=Qp(r),df(t,e,void 0,r),ay(t,r)),insertBefore:(e,t,r)=>(r=Qp(r),df(t,e.parentNode,e,r),ay(t,r)),merge:(e,t,r)=>(r=Qp(r),t.domNode=e,Tq(e,t,r),ay(t,r)),replace:(e,t,r)=>(r=Qp(r),df(t,e.parentNode,e,r),e.parentNode.removeChild(e),ay(t,r))},xq,Ghe=(e,t)=>{let r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r};xq=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let Bhe=(e,t)=>{let r=e;return t.forEach(i=>{r=r&&r.children?xq(r.children,n=>n.domNode===i):void 0}),r},qhe=(e,t,r)=>{let i=function(n){r("domEvent",n);let s=t(),o=Ghe(n.currentTarget,s.domNode);o.reverse();let a,u=Bhe(s.getLastRender(),o);return e.scheduleRender(),u&&(a=u.properties[`on${n.type}`].apply(u.properties.bind||this,arguments)),r("domEventProcessed",n),a};return(n,s,o,a)=>i},T5=e=>{let t,r,i=Qp(e),n=i.performanceLogger,s=!0,o=!1,a=[],u=[],d=(f,m,y)=>{let g,v=()=>g;i.eventHandlerInterceptor=qhe(t,v,n),g=f(m,y(),i),a.push(g),u.push(y)},h=()=>{if(r=void 0,s){s=!1,n("renderStart",void 0);for(let f=0;f<a.length;f++){let m=u[f]();n("rendered",void 0),a[f].update(m),n("patched",void 0)}n("renderDone",void 0),s=!0}};return t={renderNow:h,scheduleRender:()=>{r||o||(r=requestAnimationFrame(h))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),o=!0},resume:()=>{o=!1,s=!0,t.scheduleRender()},append:(f,m)=>{d(Ru.append,f,m)},insertBefore:(f,m)=>{d(Ru.insertBefore,f,m)},merge:(f,m)=>{d(Ru.merge,f,m)},replace:(f,m)=>{d(Ru.replace,f,m)},detach:f=>{for(let m=0;m<u.length;m++)if(u[m]===f)return u.splice(m,1),a.splice(m,1)[0];throw new Error("renderFunction was not found")}},t},Dl=class extends te{constructor(){super(...arguments),this.items=new Y,this._watchUpdatingTracking=new qd,this._callbacks=new Map,this._projector=T5(),this._hiddenProjector=T5()}get needsRender(){return this.items.length>0}get updating(){var t;return((t=this._watchUpdatingTracking)==null?void 0:t.updating)??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,r=>{for(const i of r.added){const n=()=>i.render();this._callbacks.set(i,n),this._projector.append(this.surface,n)}for(const i of r.removed){const n=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(n.domNode),this._callbacks.delete(i)}})}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach(t=>this._projector.detach(t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const r=this._hiddenSurface,i=this._hiddenProjector;let n;const s=()=>(n=t.render(),n);i.append(r,s),i.renderNow();const o={left:0,top:0,right:0,bottom:0};if(n!=null&&n.domNode){const a=n.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(i.detach(s);r.firstChild;)r.removeChild(r.firstChild);return o}overlaps(t,r){const i=this.computeBoundingRect(t),n=this.computeBoundingRect(r);return Math.max(i.left,n.left)<=Math.min(i.right,n.right)&&Math.max(i.top,n.top)<=Math.min(i.bottom,n.bottom)}get hasVisibleItems(){return this.items.some(t=>t.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(t,r){const i=!!(r!=null&&r.disableDecorations);if(!this.items.some(s=>s.visible&&!(i&&s.isDecoration)))return;const n=t.getContext("2d");n.save(),n.font=this._fontString(),this.items.forEach(s=>{i&&s.isDecoration||(n.save(),s.renderCanvas(n),n.restore())}),n.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};l([c({readOnly:!0})],Dl.prototype,"surface",void 0),l([c({readOnly:!0})],Dl.prototype,"items",void 0),l([c({readOnly:!0})],Dl.prototype,"needsRender",null),l([c({readOnly:!0})],Dl.prototype,"_watchUpdatingTracking",void 0),l([c({readOnly:!0})],Dl.prototype,"updating",null),Dl=l([$("esri.views.overlay.ViewOverlay")],Dl);const x5=Dl,qT=[0,0];function Hhe(e){const t=(e.ownerDocument||window.document).defaultView,r=e.getBoundingClientRect();return qT[0]=r.left+((t==null?void 0:t.pageXOffset)??0),qT[1]=r.top+((t==null?void 0:t.pageYOffset)??0),qT}function E5(e){e&&(e.textContent="",e.parentNode&&e.parentNode.removeChild(e))}function Whe(e){const t=document.createElement("div");return e.appendChild(t),t}const ly=16,U1=750,Zhe=512,Jhe=2,Khe=e=>{let t=class extends e{constructor(...r){super(...r),this._freqInfo={freq:ly,time:U1},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([ce(()=>this.cursor,i=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",i)}),ce(()=>this.navigating,i=>{const{surface:n}=this;n&&n.setAttribute("data-navigating",i.toString())})])}initialize(){this.addHandles([ce(()=>this.ui,(r,i)=>this._handleUIChange(r,i),zt),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=st(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(r){const i=this._get("container"),n=YO(r);if(n||typeof r!="string"||j.getLogger(this).error("#container",`element with id '${r}' not found`),i===n)return;if(this._stopMeasuring(),i&&(i.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(E5(this.root),this._set("root",null)),this.userContent&&(m5(this.userContent,i),E5(this.userContent),this._set("userContent",null))),!n)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);n.classList.add("esri-view");const s=document.createElement("div");s.className="esri-view-user-storage",m5(n,s),n.appendChild(s),this._set("userContent",s);const o=document.createElement("div");o.className="esri-view-root",n.insertBefore(o,n.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const u=new x5;o.appendChild(u.surface),this._set("overlay",u),this.addHandles(ce(()=>u.needsRender,d=>{d&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Qf({render:()=>{var h;return(h=this.overlay)==null?void 0:h.render()}}):this._overlayRenderTaskHandle=wt(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",n),this._startMeasuring()}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}blur(){var r;(r=this.surface)==null||r.blur()}focus(){var r;(r=this.surface)==null||r.focus()}pageToContainer(r,i,n){const s=this.position;return r-=s?s[0]:0,i-=s?s[1]:0,n?(n[0]=r,n[1]=i):n=[r,i],n}containerToPage(r,i,n){const s=this.position;return r+=s?s[0]:0,i+=s?s[1]:0,n?(n[0]=r,n[1]=i):n=[r,i],n}_handleUIChange(r,i){this.removeHandles("ui"),i&&i!==r&&i.destroy(),r&&(r.view=this,this.addHandles(ce(()=>this.root,n=>{r.container=n?Whe(n):null},zt),"ui")),this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=ly,r.time=U1,this.addHandles([xv(window,"resize",()=>{r.freq=ly,r.time=U1}),Qf({prepare:i=>{const n=this._measure(),s=this._freqInfo;if(s.time+=i.deltaTime,n&&(s.freq=ly,this._get("resizing")||this._set("resizing",!0)),s.time<s.freq)return;s.time=0;const o=this._position();s.freq=o||n?ly:Math.min(U1,s.freq*Jhe),!n&&s.freq>=Zhe&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,i=r?r.clientWidth:0,n=r?r.clientHeight:0;if(i===0||n===0)return this.suspended||this._set("suspended",!0),!1;const s=this.width,o=this.height;return i===s&&n===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",i),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:s,oldHeight:o,width:i,height:n}),!0)}_position(){const r=this.container,i=this.position,n=r&&Hhe(r);return!!n&&(!i||n[0]!==i[0]||n[1]!==i[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return l([c()],t.prototype,"container",null),l([c({readOnly:!0})],t.prototype,"focused",null),l([c({readOnly:!0})],t.prototype,"height",void 0),l([c()],t.prototype,"messagesCommon",void 0),l([c({type:x5})],t.prototype,"overlay",void 0),l([c({readOnly:!0})],t.prototype,"position",void 0),l([c({readOnly:!0})],t.prototype,"resizing",void 0),l([c({readOnly:!0})],t.prototype,"root",void 0),l([c({value:null,readOnly:!0})],t.prototype,"size",null),l([c({readOnly:!0})],t.prototype,"surface",void 0),l([c({readOnly:!0})],t.prototype,"suspended",void 0),l([c()],t.prototype,"ui",void 0),l([c({readOnly:!0})],t.prototype,"userContent",void 0),l([c({readOnly:!0})],t.prototype,"width",void 0),l([c()],t.prototype,"widthBreakpoint",void 0),t=l([$("esri.views.DOMContainer")],t),t},Yhe=L("mac")?"Meta":"Control",Qhe=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),Xhe=e=>Qhe.has(e);let efe=class{constructor(t,r=[]){this.eventType=t,this.keyModifiers=r}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const r=t.modifiers;for(const i of this.keyModifiers)if(!r.has(i))return!1;return!0}},yr=class{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const r=this._incoming[t];for(const i of r)this._incomingEventMatches.push(i.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager||(t.setEventCallback(r=>this._handleEvent(r)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,r,i){let n;typeof r=="function"?(i=r,n=[]):n=r||[];const s=typeof t=="string"?new efe(t,n):t,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=h=>{const f=this._incoming[h.match.eventType];if(f){const m=f.indexOf(h);f.splice(m,1),o(),this._manager&&this._manager.updateDependencies()}},u=new tfe(s,i,{onPause:a,onRemove:a,onResume:h=>{const f=this._incoming[h.match.eventType];f&&!f.includes(h)&&(f.push(h),o(),this._manager&&this._manager.updateDependencies())}});let d=this._incoming[s.eventType];return d||(d=[],this._incoming[s.eventType]=d),d.push(u),o(),this._manager&&this._manager.updateDependencies(),u}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const r=new rfe(t,{onEmit:(i,n,s,o)=>{var a;(a=this._manager)==null||a.emit(i.eventType,n,s,o)},onRemove:i=>{var n;delete this._outgoing[i.eventType],(n=this._manager)==null||n.updateDependencies()}});return this._outgoing[t]=r,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),r}startCapturingPointer(t){var r;(r=this._manager)==null||r.setPointerCapture(t,!0)}stopCapturingPointer(t){var r;(r=this._manager)==null||r.setPointerCapture(t,!1)}refreshHasPendingInputs(){var t;(t=this._manager)==null||t.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(t){var i;const r=this._incoming[t.type];if(r){for(const n of r)if(n.match.matches(t)&&((i=n.callback)==null||i.call(n,t),t.shouldStopPropagation()))break}}},tfe=class{constructor(t,r,i){this.match=t,this._callback=r,this._handler=i}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},rfe=class{constructor(t,r){this.eventType=t,this._removed=!1,this._handler=r}emit(t,r,i){this._removed||this._handler.onEmit(this,t,r,i)}remove(){this._removed=!0,this._handler.onRemove(this)}},ife=class extends yr{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",r=>this._update(r.data))}_update(t){const r=t.native.pointerType==="touch"?"touch":"mouse",{x:i,y:n}=t;r===this._value&&this._x===i&&this._y===n||(this._value=r,this._x=i,this._y=n,this._onChange(r,i,n))}},nfe=class{constructor(t,r){this._observable=new Ov,this._value=t,this._equalityFunction=r}get value(){return he(this._observable),this._value}set value(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}mutate(t){t(this._value),this._observable.notify()}};function J0(e,t=XU){return new nfe(e,t)}let sfe=class extends yr{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=J0(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},ofe=class{constructor(t,r){this._owner=r,this._properties={},this._afterDispatchHandle=null;for(const i in t){const n=t[i],s=new Oz(n,void 0,void 0,2,2);this._properties[i]={pool:s,acquired:[]}}this._afterDispatchHandle=Vse(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const r=this._properties[t];for(const i of r.acquired)VL(i)||r.pool.release(i);r.pool.destroy(),r.pool=null,r.acquired=null}this._properties=null,this._owner=null}get(t){const r=this._owner._get(t),i=this._properties[t];let n=i.pool.acquire();for(i.acquired.push(n);n===r;)i.acquired.push(n),n=i.pool.acquire();return n}_release(){for(const t in this._properties){const r=this._properties[t];let i=0;for(const n of r.acquired)VL(n)?r.acquired[i++]=n:r.pool.release(n);r.acquired.length=i}}},Cn=class extends te{constructor(t){super(t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=Yhe,this._latestPointerType="mouse",this._propertiesPool=new ofe({latestPointerLocation:ufe},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const t=Object.keys(this._nameToGroup);for(const r of t)this.uninstallHandlers(r);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(t=>t.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(t,r,i=Hu.INTERNAL){if(this._nameToGroup[t]||r.length===0)return;const n={name:t,handlers:r.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[t]=n;for(let s=n.handlers.length-1;s>=0;s--){const o=n.handlers[s];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,u,d,h,f)=>{this._emitInputEvent(o.priorityIndex+1,a,u,d,f,h)},setPointerCapture:(a,u)=>{this._setPointerCapture(n,o,a,u)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(t){const r=this._nameToGroup[t];r?(r.handlers.forEach(i=>{var n;i.removed=!0,(n=i.uninstallCallback)==null||n.call(i)}),delete this._nameToGroup[t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):j.getLogger(this).error("There is no InputHandler group registered under the name `"+t+"`")}hasHandlers(t){return this._nameToGroup[t]!==void 0}isModifierKeyDown(t){return this._activeKeyModifiers.has(t)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const t=new Set,r=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const n=this._handlers[i];n.priorityIndex=i,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const n=this._handlersPriority[i];n.priorityIndex=i;let s=n.handler.hasSideEffects;if(!s){for(const o of n.handler.outgoingEventTypes)if(t.has(o)){s=!0;break}}if(s)for(const o of n.handler.incomingEventMatches){t.add(o.eventType);for(const a of o.keyModifiers)Xhe(a)||r.add(a)}n.active=s}this._sourceEvents=t,this._keyModifiers=r,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(t,r,i){this._latestPointerType=t;const n=this._get("latestPointerLocation");if(n==null||n.x!==r||n.y!==i){const s=this._propertiesPool.get("latestPointerLocation");s.x=r,s.y=i,this._set("latestPointerLocation",s)}}_onEventReceived(t,r){if(t==="pointer-capture-lost"){const s=r;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(t,r);const i=this.test.timestamp!=null?this.test.timestamp:r.native?r.native.timestamp:void 0,n=r.native?r.native.cancelable:void 0;this._emitInputEventFromSource(t,r,i,n)}_updateKeyModifiers(t,r){if(!r)return;let i=!1;const n=()=>{i||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),i=!0)},s=(a,u)=>{u&&!this._activeKeyModifiers.has(a)?(n(),this._activeKeyModifiers.add(a)):!u&&this._activeKeyModifiers.has(a)&&(n(),this._activeKeyModifiers.delete(a))};if(t==="key-down"||t==="key-up"){const a=r.key;this._keyModifiers.has(a)&&s(a,t==="key-down")}const o=r.native;s("Alt",!!(o!=null&&o.altKey)),s("Control",!!(o!=null&&o.ctrlKey)),s("Ctrl",!!(o!=null&&o.ctrlKey)),s("Shift",!!(o!=null&&o.shiftKey)),s("Meta",!!(o!=null&&o.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new ife((t,r,i)=>this._setLatestPointer(t,r,i)),this._multiTouchHandler=new sfe,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Hu.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Hu.INTERNAL)}_setPointerCapture(t,r,i,n){const s=t.name+"-"+r.priorityIndex,o=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,o),n?(o.add(s),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):o.has(s)&&(o.delete(s),o.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(t=>!t.removed),this.updateDependencies()}_emitInputEventFromSource(t,r,i,n){this._emitInputEvent(0,t,r,i,n)}_emitInputEvent(t,r,i,n,s,o){const a=n!==void 0?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),u=s!==void 0&&s,d={event:new afe(r,i,a,o||this._activeKeyModifiers,u),priorityIndex:t};this._currentPropagation?this._currentPropagation.events.push(d):this._doNewPropagation(d)}_doNewPropagation(t){this._currentPropagation={events:new TS,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:t.event.timestamp},this._currentPropagation.events.push(t),this._continuePropagation()}_continuePropagation(){var r,i,n;this._paused=!1;const t=this._currentPropagation;if(t){for(;t.events.length>0;){const{event:s,priorityIndex:o}=t.events.pop(),a=(r=s.data)==null?void 0:r.eventId;if(!(a!=null&&this._stoppedPropagationEventIds.has(a)))for(t.currentHandler=this._handlersPriority[o];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!s.shouldStopPropagation()&&((n=(i=t.currentHandler).eventCallback)==null||n.call(i,s)),s.shouldStopPropagation()){a!=null&&this._stoppedPropagationEventIds.add(a);break}if(s.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:s,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(t){const r=new TS;r.push(t);const i=this._currentPropagation;if(i){for(;i.events.length;)r.push(i.events.pop());i.events=r,i.currentHandler=null,this._paused=!0}}_compareHandlerPriority(t,r){if(t.handler.hasSideEffects!==r.handler.hasSideEffects)return t.handler.hasSideEffects?1:-1;if(t.groupPriority!==r.groupPriority)return t.groupPriority>r.groupPriority?-1:1;for(const i of t.handler.incomingEventMatches)for(const n of r.handler.incomingEventMatches){if(i.eventType!==n.eventType)continue;const s=i.keyModifiers.filter(o=>n.keyModifiers.includes(o));if(s.length===i.keyModifiers.length!=(s.length===n.keyModifiers.length))return i.keyModifiers.length>n.keyModifiers.length?-1:1}return t.priorityIndex>r.priorityIndex?-1:1}_sortHandlersPriority(t){const r=[];for(const i of t){let n=0;for(;n<r.length&&this._compareHandlerPriority(i,r[n])>=0;)n++;r.splice(n,0,i)}return r}get debug(){const t=r=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},r(),this._setPointerCapture=i};return{injectEvent:(r,i)=>{t(()=>this._onEventReceived(r,i))},disablePointerCapture:t}}};l([c({readOnly:!0})],Cn.prototype,"hasPendingInputs",null),l([c({constructOnly:!0})],Cn.prototype,"eventSource",void 0),l([c({constructOnly:!0})],Cn.prototype,"recognizers",void 0),l([c()],Cn.prototype,"_latestPointerType",void 0),l([c()],Cn.prototype,"latestPointerType",null),l([c()],Cn.prototype,"multiTouchActive",null),l([c({readOnly:!0})],Cn.prototype,"latestPointerLocation",void 0),l([c()],Cn.prototype,"_paused",void 0),l([c({readOnly:!0})],Cn.prototype,"updating",null),Cn=l([$("esri.views.input.InputManager")],Cn);let afe=class{constructor(t,r,i,n,s){this.type=t,this.data=r,this.timestamp=i,this.modifiers=n,this.cancelable=s,this._propagationState=vu.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=vu.STOPPED}shouldStopPropagation(){return!!(this._propagationState&vu.STOPPED)}async(t){this._propagationState|=vu.PAUSED;const r=(i,n)=>{this._propagationState&=~vu.PAUSED;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),n)throw i;return i};return(typeof t=="function"?t():t).then(i=>r(i,!1),i=>r(i,!0))}shouldPausePropagation(t){return!!(this._propagationState&vu.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}};var vu;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(vu||(vu={}));const Hu={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let lfe=class{};const ufe=lfe;function Ol(e){return e!=null&&"open"in e&&"declaredClass"in e}function M5(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}const cfe=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([ce(()=>[this.ui,this.popup],([r,i],n)=>{const s="popup",o="manual";if(n){const[a,u]=n;a&&Ol(u)&&(u.view=null,M5(u)&&a.remove(u,s))}r&&Ol(i)&&(i.view=this,M5(i)&&r.add(i,{key:s,position:o,internal:!0}))},zt),this.on("click",r=>{this.popup&&this.popupEnabled&&(r.pointerType!=="mouse"||r.button===0)&&(Ol(this.popup)?this.popup.viewModel.handleViewClick(r):r.async(async()=>{await this.setupPopup(),Ol(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(r)}))},Hu.WIDGET)]),up(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{D(()=>import("./Popup-_VSlW92v.js"),__vite__mapDeps([124,125,55,126,4,127,128,129,54,52,53,13,16,130,24,131]),import.meta.url)})}destroy(){this.destroyed||this.closePopup()}async openPopup(r){if(Ol(this.popup))return this.popup.open(r);try{if(await this.setupPopup(),!this.popup)return void j.getLogger(this).error(new R("view:null-popup","Popup is null and can't be opened"));this.popup.open(r)}catch{}}closePopup(){var r;(r=this._popupSetupTask)==null||r.abort(),Ol(this.popup)&&this.popup.close()}async fetchPopupFeatures(r,i){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(r,i),i)}async setupPopup(){var r;if((r=this._popupSetupTask)==null||r.abort(),this.popup&&!Ol(this.popup))return this._popupSetupTask=OO(async i=>{const{default:n}=await D(()=>import("./Popup-_VSlW92v.js"),__vite__mapDeps([124,125,55,126,4,127,128,129,54,52,53,13,16,130,24,131]),import.meta.url);if(_t(i),!this.popup||Ol(this.popup))return;const s=this.popup;delete s.open,delete s.close,this.popup=new n(s)}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:r,hits:i},n){const s=[],o=[];let a=!1;const u=vse(n,L("popup-view-fetch-timeout")??pfe),d=m=>{const y=new dfe(m);return o.push(y),s.push(y.promise),y},h=m=>{const y=o.at(-1);return y&&y.layerView===m&&!a?y:d(m)};for(const m of i)"graphic"in m?(h(m.layerView).graphics.push(m.graphic),a=!1):(s.push(m.layerView.fetchPopupFeaturesAtLocation(m.mapPoint,u)),a=!0);o.map(m=>m.resolve(u));const f=gse(s).then(m=>m.filter(y=>!!y).flat());return{pendingFeatures:s,allGraphicsPromise:f,location:r}}async _getPopupHits(r,i){const{hits:n,location:s}=await this.popupHitTest(r);_t(i);const o=[];for(const a of n)if("graphic"in a){if(this._isValidPopupGraphic(a.graphic,i)){const u=this._isValidPopupGraphicsLayerView(a.layerView)?a.layerView:void 0;o.push({graphic:a.graphic,layerView:u})}}else this._isValidPopupLocationLayerView(a.layerView)&&o.push({mapPoint:a.mapPoint,layerView:a.layerView});return{hits:o,location:s}}_isValidPopupGraphic(r,i){return r&&!!r.getEffectivePopupTemplate(i==null?void 0:i.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(r){return!r||(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesFromGraphics"in r}_isValidPopupLocationLayerView(r){return(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesAtLocation"in r}};return l([c()],t.prototype,"popup",void 0),l([c()],t.prototype,"popupEnabled",void 0),t=l([$("esri.views.PopupView")],t),t};let dfe=class{constructor(t){this.layerView=t,this._resolver=_n(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(t){const{layerView:r,graphics:i,_resolver:n}=this;if(!r)return n.resolve(i),n.promise;let s;return r.fetchPopupFeaturesFromGraphics(i,t).catch(o=>(s=o,null)).then(o=>{o?n.resolve(o):n.reject(s)}),n.promise}};const pfe=5e3;function rc(e,t,r=Y){return t||(t=new r),t===e||(t.removeAll(),hfe(e)?t.addMany(e):e&&t.add(e)),t}function Eq(e){return e}function hfe(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}var wu;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(wu||(wu={}));let ffe=class{constructor(){this._resolver=_n(),this._status=wu.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=wu.RESOLVED,this._cleanUp()},()=>{this._status=wu.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===wu.RESOLVED}isRejected(){return this._status===wu.REJECTED}isFulfilled(){return this._status!==wu.PENDING}abort(){this._resolver.reject(ot())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=_n(),r=[...this._resolvingPromises,t.promise],i=this._allPromise=Promise.all(r);i.then(()=>{this.isFulfilled()||this._allPromise!==i||this._resolver.resolve()},n=>{this.isFulfilled()||this._allPromise!==i||Or(n)||this._resolver.reject(n)}),t.resolve()}};const Fv=e=>{let t=class extends e{constructor(...r){super(...r),this._promiseProps=new ffe,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,i){return this._promiseProps.promise.then(()=>this).then(r,i)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}};return t=l([$("esri.core.Promise")],t),t};let NS=class extends Fv(te){};NS=l([$("esri.core.Promise")],NS);const mfe="not-loaded",yfe="loading",gfe="failed",I5="loaded",Mq=e=>{let t=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(i=>{const n=this.load.bind(this);this.load=s=>{const o=new Promise((a,u)=>{const d=sO(s,u);this.destroyed&&u(new R("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(a,u).finally(()=>{d&&d.remove()})});if(this.loadStatus===mfe){this._set("loadStatus",yfe);const a=this._loadController=new AbortController;n({signal:a.signal})}return i(),o}})),this.when(()=>{this._set("loadStatus",I5),this._loadController=null},i=>{this._set("loadStatus",gfe),this._set("loadError",i),this._loadController=null})}destroy(){this._loadController&&(this._loadController=ep(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===I5}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var r;return this.isFulfilled()||(this._set("loadError",new R("load:cancelled","Cancelled")),(r=this._loadController)==null||r.abort(),this._promiseProps.abort()),this}};return l([c({readOnly:!0})],t.prototype,"loaded",null),l([c({readOnly:!0})],t.prototype,"loadError",void 0),l([c({clonable:!1})],t.prototype,"loadStatus",void 0),l([c({type:[wn],readOnly:!0})],t.prototype,"loadWarnings",null),t=l([$("esri.core.Loadable")],t),t};let Py=class extends Mq(NS){};Py=l([$("esri.core.Loadable")],Py),function(e){function t(r){return!(!r||!r.load)}e.LoadableMixin=Mq,e.isLoadable=t}(Py||(Py={}));const ls=Py;async function t$(e,t){return await e.load(),vfe(e,t)}async function vfe(e,t){const r=[],i=(...s)=>{for(const o of s)o!=null&&(Array.isArray(o)?i(...o):Y.isCollection(o)?o.forEach(a=>i(a)):ls.isLoadable(o)&&r.push(o))};t(i);let n=null;if(await Vle(r,async s=>{const o=await U2(wfe(s)?s.loadAll():s.load());o.ok!==!1||n||(n=o)}),n)throw n.error;return e}function wfe(e){return"loadAll"in e&&typeof e.loadAll=="function"}let z1;function _fe(e){return z1&&!z1.destroyed||(z1=e()),z1}var sI;const bfe=new _e({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let An=sI=class extends te{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new sI({categories:this.categories?C(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let r=[];this.categories&&(r=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let i="";if(this.extent){const o=D2(this.extent,me.WGS84);o!=null&&(i=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let n=this.query;!this.disableExtraQuery&&e.extraQuery&&(n="("+n+")"+e.extraQuery);const s={categories:r,bbox:i,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>bfe.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...t,...s}}}};l([c()],An.prototype,"categories",void 0),l([c()],An.prototype,"disableExtraQuery",void 0),l([c({type:qe})],An.prototype,"extent",void 0),l([c()],An.prototype,"filter",void 0),l([c()],An.prototype,"num",void 0),l([c()],An.prototype,"query",void 0),l([c()],An.prototype,"sortField",void 0),l([c()],An.prototype,"sortOrder",null),l([c()],An.prototype,"start",void 0),An=sI=l([$("esri.portal.PortalQueryParams")],An);const Bs=An;var oI;let Zt=oI=class extends N{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var r;const e=this.url,t=this.thumbnail;return e&&t&&this.portal?(r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then(t=>{const r=t.categorySchema||[];return r.some(i=>i.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):r})}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new R("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new oI({sourceJSON:e});return t.read(e),t}queryItems(e,t){let r=bt(Bs,e);const i=this.portal;return parseFloat(i.currentVersion)>5?(r=r||new Bs,i.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",t)):(r=r?r.clone():new Bs,r.query="group:"+this.id+(r.query?" "+r.query:""),i.queryItems(r,t))}_fetchCategorySchemaSet(e,t){const r=this.portal;return r.fetchSelf(r.authMode,!0,t).then(i=>{const n=i.contentCategorySetsGroupQuery;if(n){const s=new Bs({disableExtraQuery:!0,num:1,query:n});return r.queryGroups(s,t)}throw new R("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(i=>{if(i.total){const n=i.results[0],s=new Bs({num:1,query:`typekeywords:"${e}"`});return n.queryItems(s,t)}throw new R("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(i=>i.total?i.results[0].fetchData("json",t).then(n=>{const s=n==null?void 0:n.categorySchema;return s!=null&&s.length?s:[]}):[])}};l([c()],Zt.prototype,"access",void 0),l([c({type:Date})],Zt.prototype,"created",void 0),l([c()],Zt.prototype,"description",void 0),l([c()],Zt.prototype,"id",void 0),l([c()],Zt.prototype,"isInvitationOnly",void 0),l([c({type:Date})],Zt.prototype,"modified",void 0),l([c()],Zt.prototype,"owner",void 0),l([c()],Zt.prototype,"portal",void 0),l([c()],Zt.prototype,"snippet",void 0),l([c()],Zt.prototype,"sortField",void 0),l([c()],Zt.prototype,"sortOrder",void 0),l([c()],Zt.prototype,"sourceJSON",void 0),l([c()],Zt.prototype,"tags",void 0),l([c()],Zt.prototype,"thumbnail",void 0),l([c({readOnly:!0})],Zt.prototype,"thumbnailUrl",null),l([c()],Zt.prototype,"title",void 0),l([c({readOnly:!0})],Zt.prototype,"url",null),Zt=oI=l([$("esri.portal.PortalGroup")],Zt);const aI=Zt;let Lc=class extends te{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};l([c()],Lc.prototype,"nextQueryParams",void 0),l([c()],Lc.prototype,"queryParams",void 0),l([c()],Lc.prototype,"results",void 0),l([c()],Lc.prototype,"total",void 0),Lc=l([$("esri.portal.PortalQueryResult")],Lc);const Sfe=Lc;let da=class extends N{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var r;const t=(r=this.portal)==null?void 0:r.restUrl;return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new R("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};l([c({type:Date})],da.prototype,"created",void 0),l([c()],da.prototype,"id",void 0),l([c()],da.prototype,"portal",void 0),l([c()],da.prototype,"title",void 0),l([c({readOnly:!0})],da.prototype,"url",null),l([c()],da.prototype,"username",void 0),da=l([$("esri.portal.PortalFolder")],da);const $fe=da;var lI;let nt=lI=class extends N{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/content/users/${this.username}`:null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,r=e==null?void 0:e.data,i=e==null?void 0:e.folder,n={method:"post"};t&&(n.query=t.createPostQuery(),r!=null&&(typeof r=="string"?n.query.text=r:typeof r=="object"&&(n.query.text=JSON.stringify(r))));let s=this.userContentUrl;return i&&(s+="/"+(typeof i=="string"?i:i.id)),this.portal.request(s+"/addItem",n).then(o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}async deleteItem(e,t=!1){let r=this.userContentUrl;e.ownerFolder&&(r+="/"+e.ownerFolder);const i=t?{permanentDelete:!0}:{};await this.portal.request(r+`/items/${e.id}/delete`,{method:"post",query:i}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.slice();const r=this.userContentUrl+"/deleteItems",i=[],n=e.map(s=>s.id);if(n.length){const s={method:"post",query:{items:n.join(","),permanentDelete:t}},o=await this.portal.request(r,s);for(const a of o.results){const u=e.find(f=>a.itemId===f.id),d=a.success;let h=null;d?(u.id=null,u.portal=null):a.error&&(h=new R("portal:delete-item-failed",a.error.message,a.error)),i.push({item:u,success:d,error:h})}}return i}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(t=>{let r;return r=t&&t.folders?t.folders.map(i=>{const n=$fe.fromJSON(i);return n.portal=this.portal,n}):[],r})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(r=>{const i=aI.fromJSON(r);return i.portal=this.portal,i}):[],t})}async fetchItems(e){e??(e={});let t=this.userContentUrl??"";e.folder&&(t+="/"+e.folder.id);const{default:r}=await D(()=>Promise.resolve().then(()=>Aq),void 0,import.meta.url),i={folders:!1,inRecycleBin:!!e.inRecycleBin||null,foldersContent:!(e.folder||!e.includeSubfolderItems)||null,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"},n=await this.portal.request(t,{query:i});let s;return n!=null&&n.items?(s=n.items.map(o=>{const a=r.fromJSON(o);return a.portal=this.portal,a}),await Promise.all(s.map(o=>o.load())),{items:s,nextStart:n.nextStart,total:n.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new aI({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new R("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(e,t){const r=this.userContentUrl,i=t?{folderID:typeof t=="string"?t:t.id}:null;await this.portal.request(r+`/items/${e.id}/restore`,{method:"post",query:i})}toJSON(){throw new R("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new lI({sourceJSON:e});return t.read(e),t}};l([c()],nt.prototype,"access",void 0),l([c({type:Date})],nt.prototype,"created",void 0),l([c()],nt.prototype,"culture",void 0),l([c()],nt.prototype,"description",void 0),l([c()],nt.prototype,"email",void 0),l([c()],nt.prototype,"favGroupId",void 0),l([c()],nt.prototype,"fullName",void 0),l([c({type:Date})],nt.prototype,"modified",void 0),l([c()],nt.prototype,"orgId",void 0),l([c()],nt.prototype,"portal",void 0),l([c()],nt.prototype,"preferredView",void 0),l([c()],nt.prototype,"privileges",void 0),l([c()],nt.prototype,"region",void 0),l([c()],nt.prototype,"role",void 0),l([c()],nt.prototype,"roleId",void 0),l([c()],nt.prototype,"sourceJSON",void 0),l([c()],nt.prototype,"thumbnail",void 0),l([c({readOnly:!0})],nt.prototype,"thumbnailUrl",null),l([c()],nt.prototype,"units",void 0),l([c({readOnly:!0})],nt.prototype,"userContentUrl",null),l([c({readOnly:!0})],nt.prototype,"url",null),l([c()],nt.prototype,"username",void 0),l([c()],nt.prototype,"userLicenseTypeId",void 0),l([c()],nt.prototype,"userType",void 0),nt=lI=l([$("esri.portal.PortalUser")],nt);const rk=nt;var en;let uy;const C5={PortalGroup:()=>Promise.resolve({default:aI}),PortalItem:()=>D(()=>Promise.resolve().then(()=>Aq),void 0,import.meta.url),PortalUser:()=>Promise.resolve({default:rk})};let Z=en=class extends Sm(ls){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=je.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){A5.unregister(this),this.defaultBasemap=st(this.defaultBasemap),this.defaultDevBasemap=st(this.defaultDevBasemap),this.defaultVectorBasemap=st(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=wt(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)je.request.trustedServers.includes(t)||je.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){var r;const e=(r=this.user)==null?void 0:r.orgId,t=!e||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get hasAPIKey(){return g7(this.url)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.slice(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=rk.fromJSON(e),t.portal=this),t}load(e){const t=D(()=>Promise.resolve().then(()=>Zfe),void 0,import.meta.url).then(({default:r})=>{_t(e),uy=r}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(r=>{var i;if(!this.hasAPIKey&&Ae){const n=Ae;this.credential=n.findCredential(this.restUrl),this.credential||this.authMode!==en.AUTH_MODE_AUTO&&this.authMode!==en.AUTH_MODE_NO_PROMPT||((i=this._esriIdCredentialCreateHandle)==null||i.remove(),this._esriIdCredentialCreateHandle=n.on("credential-create",Tfe(new WeakRef(this))),A5.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await D(async()=>{const{default:r}=await import("./ElevationLayer-D1ZBigVl.js");return{default:r}},__vite__mapDeps([132,133,134,135,55]),import.meta.url)).default;return e?e.map(r=>new t({id:r.id,url:r.url})):[]}async fetchBasemaps(e,t){const r=await this._fetchBasemaps(e,t);if((t==null?void 0:t.include3d)===!0&&this.use3dBasemaps!==!1){const i=await this._fetchBasemaps3D(e,t);r.unshift(...i)}return r}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const t=new Bs;t.query=this.default3DBasemapQuery,t.disableExtraQuery=!0;const r=(await this.queryItems(t,e)).results.find(i=>i.type==="Web Scene");return r?new uy({portalItem:r}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):Xs(e)?Promise.reject(ot()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,r=new Bs({num:100,sortField:"title"});if(t!=null&&t.length){const i=[];for(const n of t)i.push(`(title:"${n.title}" AND owner:${n.owner})`);return r.query=i.join(" OR "),this.queryGroups(r,e).then(n=>n.results)}return Xs(e)?Promise.reject(ot()):Promise.resolve([])}fetchRegions(e){var r;const t=((r=this.user)==null?void 0:r.culture)||this.culture||qi();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var r;const t=((r=this.user)==null?void 0:r.culture)||this.culture||qi();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return _fe(()=>new en)}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,r){const i=this.restUrl+"/portals/self",n={authMode:e,query:{culture:qi().toLowerCase()},withCredentials:!0,...r};return n.authMode==="auto"&&(n.authMode="no-prompt"),t&&(n.query.default=!0),this.request(i,n)}queryPortal(e,t,r,i){const n=bt(Bs,t),s=o=>this.request(this.restUrl+e,{...n.toRequestOptions(this),...i}).then(a=>{const u=n.clone();return u.start=a.nextStart,new Sfe({nextQueryParams:u,queryParams:n,total:a.total,results:en._resultsToTypedArray(o,{portal:this},a,i)})}).then(a=>Promise.all(a.results.map(u=>typeof u.when=="function"?u.when():a)).then(()=>a,u=>(Do(u),a)));return r&&C5[r]?C5[r]().then(({default:o})=>(_t(i),s(o))):s()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new R("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===en.AUTH_MODE_ANONYMOUS||this.authMode===en.AUTH_MODE_NO_PROMPT&&!Ae)return Promise.reject(new R("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return Ae?Ae.getCredential(this.restUrl,{prompt:this.authMode!==en.AUTH_MODE_NO_PROMPT}).then(t=>e(t)):e(this.credential)}normalizeUrl(e){var r;const t=(r=this.credential)==null?void 0:r.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,r){return this.request(e,t).then(i=>{const n=en._resultsToTypedArray(r,{portal:this},i);return Promise.all(n.map(s=>typeof s.when=="function"?s.when():i)).then(()=>n,()=>n)})}request(e,t={}){const r={f:"json",...t.query},{authMode:i=this.authMode===en.AUTH_MODE_ANONYMOUS||this.authMode===en.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:n=null,cacheBust:s=!1,method:o="auto",responseType:a="json",signal:u}=t,d={authMode:i,body:n,cacheBust:s,method:o,query:r,responseType:a,timeout:0,signal:u};return t.withCredentials&&(d.withCredentials=!0),Le(this._normalizeSSL(e),d).then(h=>h.data)}toJSON(){throw new R("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new en({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new R("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const r=new Bs;r.query=e||(this.hasAPIKey?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const i=await this.queryGroups(r,t);if(!i.total)return[];const n=i.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=n.sortField||"name",r.sortOrder=n.sortOrder||"desc";const s=await n.queryItems(r,t);return s.total?s.results.filter(o=>o.type==="Web Map").map(o=>new uy({portalItem:o})):[]}async _fetchBasemaps3D(e,t){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];const i=new Bs({query:r,disableExtraQuery:!0}),n=await this.queryGroups(i,t);if(!n.total)return[];const s=n.results[0];i.num=100,i.query='type:"Web Scene"',i.sortField=s.sortField||"name",i.sortOrder=s.sortOrder||"desc";const o=await s.queryItems(i,t);return o.total?o.results.filter(a=>a.type==="Web Scene").map(a=>new uy({portalItem:a})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=uy.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,r,i){let n;if(r){const s=i!=null?i.signal:null;n=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(n=n.map(o=>{const a=Object.assign(e?e.fromJSON(o):o,t);return typeof a.load=="function"&&a.load(s),a}))}else n=[];return n}};Z.AUTH_MODE_ANONYMOUS="anonymous",Z.AUTH_MODE_AUTO="auto",Z.AUTH_MODE_IMMEDIATE="immediate",Z.AUTH_MODE_NO_PROMPT="no-prompt",l([c()],Z.prototype,"access",void 0),l([c()],Z.prototype,"allSSL",void 0),l([c()],Z.prototype,"authMode",void 0),l([c()],Z.prototype,"authorizedCrossOriginDomains",void 0),l([G("authorizedCrossOriginDomains")],Z.prototype,"readAuthorizedCrossOriginDomains",null),l([c()],Z.prototype,"basemapGalleryGroupQuery",void 0),l([c({json:{name:"3DBasemapGalleryGroupQuery"}})],Z.prototype,"basemapGalleryGroupQuery3D",void 0),l([c()],Z.prototype,"bingKey",void 0),l([c()],Z.prototype,"canListApps",void 0),l([c()],Z.prototype,"canListData",void 0),l([c()],Z.prototype,"canListPreProvisionedItems",void 0),l([c()],Z.prototype,"canProvisionDirectPurchase",void 0),l([c()],Z.prototype,"canSearchPublic",void 0),l([c()],Z.prototype,"canShareBingPublic",void 0),l([c()],Z.prototype,"canSharePublic",void 0),l([c()],Z.prototype,"canSignInArcGIS",void 0),l([c()],Z.prototype,"canSignInIDP",void 0),l([c()],Z.prototype,"colorSetsGroupQuery",void 0),l([c()],Z.prototype,"commentsEnabled",void 0),l([c({type:Date})],Z.prototype,"created",void 0),l([c()],Z.prototype,"credential",void 0),l([c()],Z.prototype,"culture",void 0),l([c()],Z.prototype,"currentVersion",void 0),l([c()],Z.prototype,"customBaseUrl",void 0),l([c()],Z.prototype,"default3DBasemapQuery",void 0),l([c()],Z.prototype,"defaultBasemap",void 0),l([G("defaultBasemap")],Z.prototype,"readDefaultBasemap",null),l([c()],Z.prototype,"defaultDevBasemap",void 0),l([G("defaultDevBasemap")],Z.prototype,"readDefaultDevBasemap",null),l([c({type:qe})],Z.prototype,"defaultExtent",void 0),l([c()],Z.prototype,"defaultVectorBasemap",void 0),l([G("defaultVectorBasemap")],Z.prototype,"readDefaultVectorBasemap",null),l([c()],Z.prototype,"description",void 0),l([c()],Z.prototype,"devBasemapGalleryGroupQuery",void 0),l([c()],Z.prototype,"eueiEnabled",void 0),l([c({readOnly:!0})],Z.prototype,"extraQuery",null),l([c()],Z.prototype,"featuredGroups",void 0),l([c()],Z.prototype,"featuredItemsGroupQuery",void 0),l([c()],Z.prototype,"galleryTemplatesGroupQuery",void 0),l([c()],Z.prototype,"layoutGroupQuery",void 0),l([c()],Z.prototype,"livingAtlasGroupQuery",void 0),l([c({readOnly:!0})],Z.prototype,"hasAPIKey",null),l([c()],Z.prototype,"hasCategorySchema",void 0),l([c()],Z.prototype,"hasClassificationSchema",void 0),l([c()],Z.prototype,"helpBase",void 0),l([c()],Z.prototype,"helperServices",void 0),l([c()],Z.prototype,"helpMap",void 0),l([c()],Z.prototype,"homePageFeaturedContent",void 0),l([c()],Z.prototype,"homePageFeaturedContentCount",void 0),l([c()],Z.prototype,"httpPort",void 0),l([c()],Z.prototype,"httpsPort",void 0),l([c()],Z.prototype,"id",void 0),l([c()],Z.prototype,"ipCntryCode",void 0),l([c({readOnly:!0})],Z.prototype,"isOrganization",null),l([c()],Z.prototype,"isPortal",void 0),l([c()],Z.prototype,"isReadOnly",void 0),l([c({readOnly:!0})],Z.prototype,"itemPageUrl",null),l([c()],Z.prototype,"layerTemplatesGroupQuery",void 0),l([c()],Z.prototype,"maxTokenExpirationMinutes",void 0),l([c({type:Date})],Z.prototype,"modified",void 0),l([c()],Z.prototype,"name",void 0),l([c()],Z.prototype,"portalHostname",void 0),l([c()],Z.prototype,"portalMode",void 0),l([c()],Z.prototype,"portalProperties",void 0),l([c()],Z.prototype,"region",void 0),l([c()],Z.prototype,"recycleBinEnabled",void 0),l([c({readOnly:!0})],Z.prototype,"restUrl",null),l([c()],Z.prototype,"rotatorPanels",void 0),l([c()],Z.prototype,"showHomePageDescription",void 0),l([c()],Z.prototype,"sourceJSON",void 0),l([c()],Z.prototype,"staticImagesUrl",void 0),l([c({json:{name:"2DStylesGroupQuery"}})],Z.prototype,"stylesGroupQuery2d",void 0),l([c({json:{name:"stylesGroupQuery"}})],Z.prototype,"stylesGroupQuery3d",void 0),l([c()],Z.prototype,"supportsHostedServices",void 0),l([c()],Z.prototype,"symbolSetsGroupQuery",void 0),l([c()],Z.prototype,"templatesGroupQuery",void 0),l([c()],Z.prototype,"thumbnail",void 0),l([c({readOnly:!0})],Z.prototype,"thumbnailUrl",null),l([c()],Z.prototype,"units",void 0),l([c()],Z.prototype,"url",void 0),l([c()],Z.prototype,"urlKey",void 0),l([G("urlKey")],Z.prototype,"readUrlKey",null),l([c()],Z.prototype,"user",void 0),l([G("user")],Z.prototype,"readUser",null),l([c()],Z.prototype,"use3dBasemaps",void 0),l([c()],Z.prototype,"useDefault3dBasemap",void 0),l([c()],Z.prototype,"useStandardizedQuery",void 0),l([c()],Z.prototype,"useVectorBasemaps",void 0),l([c()],Z.prototype,"vectorBasemapGalleryGroupQuery",void 0),Z=en=l([$("esri.portal.Portal")],Z);const fr=Z,A5=new FinalizationRegistry(e=>{e.remove()});function Tfe(e){const t=Ae;return()=>{const r=e.deref();r&&t.findCredential(r.restUrl)&&r.signIn().catch(()=>{})}}let pa=class extends te{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t!=null&&t.portalItem&&t.path?{...t,path:R5(t.path,t.portalItem)}:t}set path(t){t!=null&&yn(t)?j.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return R5(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",r){const i=this.cdnUrl;if(i==null)throw new R("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(i,{responseType:t,query:{token:this.portalItem.apiKey,_ts:r!=null&&r.cacheBust?Date.now():null},signal:r==null?void 0:r.signal})}async update(t,r){const{addOrUpdateResources:i}=await D(()=>import("./resourceUtils-DmgYgEHL.js"),[],import.meta.url);return await i(this.portalItem,[{resource:this,content:t,compress:r==null?void 0:r.compress,access:r==null?void 0:r.access}],"update",r),this}hasPath(){return this.path!=null}};function R5(e,t){return e==null?e:(e=e.replace(/^\/+/,""),t!=null&&yn(e)&&(e=fO(e,t.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}l([c()],pa.prototype,"portalItem",void 0),l([c({type:String,value:null})],pa.prototype,"path",null),l([Ne("path")],pa.prototype,"_castPath",null),l([c({type:String,readOnly:!0})],pa.prototype,"url",null),l([c({type:String,readOnly:!0})],pa.prototype,"cdnUrl",null),l([c({type:String,readOnly:!0})],pa.prototype,"itemRelativeUrl",null),pa=l([$("esri.portal.PortalItemResource")],pa);const xfe=pa;let Ny=class extends te{constructor(t){super(t),this.created=null,this.rating=null}};l([c()],Ny.prototype,"created",void 0),l([c()],Ny.prototype,"rating",void 0),Ny=l([$("esri.portal.PortalRating")],Ny);const HT=Ny;function Am(e,t){var i;const r=(i=t==null?void 0:t.url)==null?void 0:i.path;if(e&&r&&(e=ji(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const n=fO(e,t.portalItem.itemUrl);n!=null&&Efe.test(n)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(n).path)}return(e=uI(e,t==null?void 0:t.portal))&&r$.test(e)?nk(e):e}function Dv(e,t,r=K0.YES){var n,s;if((e=e&&r$.test(e)?Cq(e):e)==null)return e;!yn(e)&&(t!=null&&t.blockedRelativeUrls)&&t.blockedRelativeUrls.push(e);let i=ji(e);if(t){const o=((n=t.verifyItemRelativeUrls)==null?void 0:n.rootPath)||((s=t.url)==null?void 0:s.path);if(o){const a=uI(o,t.portal),u=uI(i,t.portal);i=fO(u,a,a),i!=null&&i!==u&&i!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(i)}}return i=Iq(i,t==null?void 0:t.portal),yn(i)&&(i=ts(i)),t!=null&&t.resources&&(t!=null&&t.portalItem)&&!yn(i)&&!ml(i)&&r===K0.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i),compress:!1}),i}function ik(e,t,r){return Am(e,r)}function dp(e,t,r,i){const n=Dv(e,i);n!==void 0&&(t[r]=n)}const r$=/\/items\/([^/]+)\/resources\/(.*)/,Efe=/^\.\/resources\//;function Mfe(e){const t=(e==null?void 0:e.match(r$))??null;return(t==null?void 0:t[1])??null}function Ife(e){const t=(e==null?void 0:e.match(r$))??null;if(t==null)return null;const r=t[2],i=r.lastIndexOf("/");if(i===-1){const{path:o,extension:a}=BL(r);return{prefix:null,filename:o,extension:a}}const{path:n,extension:s}=BL(r.slice(i+1));return{prefix:r.slice(0,i),filename:n,extension:s}}function Iq(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?vM(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function uI(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`,i=cO();return Xf(i,`${i.scheme}://${r}`)?vM(e,t.portalHostname,r):vM(e,r,t.portalHostname)}function nk(e){if(!e)return e||null;let t=e;return t&&Ae&&!Ae.findCredential(t)&&(t=t7(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function Cq(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&Ae&&!Ae.findCredential(t)&&(t=t7(t)),t}var K0;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(K0||(K0={}));const gNe=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return K0},ensureMainOnlineDomain:Iq,fromCDNUrl:Cq,fromJSON:Am,itemIdFromResourceUrl:Mfe,prefixAndFilenameFromResourceUrl:Ife,read:ik,toCDNUrl:nk,toJSON:Dv,write:dp},Symbol.toStringTag,{value:"Module"}));var Fc;const Cfe=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),Afe=new Set(["KML","GeoJson","CSV"]);let be=Fc=class extends Sm(ls){static from(e){return E2(Fc,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return e==="Feature Service"||e==="Feature Collection"?r=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?r=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?r="Scene Layer":e==="Video Service"?r="Video Layer":e==="Scene Package"?r="Scene Layer Package":e==="Stream Service"?r="Feature Layer":e==="Geoprocessing Service"?r=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geoenrichment Service"?r="GeoEnrichment Service":e==="Geocoding Service"?r="Locator":e==="Microsoft Powerpoint"?r="Microsoft PowerPoint":e==="GeoJson"?r="GeoJSON":e==="Globe Service"?r="Globe Layer":e==="Vector Tile Service"?r="Tile Layer":e==="netCDF"?r="NetCDF":e==="Map Service"?r=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e!=null&&e.toLowerCase().includes("add in")?r=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?r="Big Data File Share":e==="Compact Tile Package"?r="Tile Package (tpkx)":e==="Raster function template"?r="Raster Function Template":e==="OGCFeatureServer"?r="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?r="Instant App":e==="Insights Page"?r="Insights Report":e==="Excalibur Imagery Project"?r="Excalibur Project":e==="3DTiles Service"?r="3D tiles layer":e==="3DTiles Package"&&(r="3D tiles package"),r}readExtent(e){return e&&e.length?new qe(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){var y;const e=((y=this.type)==null?void 0:y.toLowerCase())||"",t=this.typeKeywords||[],r="esri/images/portal/",i="16";let n,s=!1,o=!1,a=!1,u=!1,d=!1,h=!1,f=!1,m=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(s=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.includes("Table"),a=t.includes("Route Layer"),u=t.includes("Markup"),d=t.includes("Spatiotemporal"),h=t.includes("UtilityNetwork"),n=d&&o?"spatiotemporaltable":o?"table":a?"routelayer":u?"markup":d?"spatiotemporal":h?"utilitynetwork":s?"featureshosted":"features"):e==="map service"||e==="wms"||e==="wmts"?(d=t.includes("Spatiotemporal"),f=t.includes("Relational"),n=d||f?"mapimages":s||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages"):n=e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?n="maps":e==="web scene"?n=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?n="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?n="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?n="mapsgray":e==="service definition"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?n="datafiles":e==="360 vr experience"?n="360vr":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?n="appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?n="addindesktop":e==="pdf"?n="pdf":e==="microsoft word"?n="word":e==="microsoft excel"?n="excel":e==="microsoft powerpoint"?n="ppt":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?n="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?n="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?n="layersgray":e==="analysis model"?n="analysismodel":e==="scene package"?n="scenepackage":e==="3dtiles package"?n="3dtileslayerpackage":e==="3dtiles service"?n="3dtileslayer":e==="mobile scene package"?n="mobilescenepackage":e==="tile package"||e==="compact tile package"?n="tilepackage":e==="task file"?n="taskfile":e==="report template"?n="report-template":e==="statistical data collection"?n="statisticaldatacollection":e==="insights workbook"?n="workbook":e==="insights model"?n="insightsmodel":e==="insights page"?n="insightspage":e==="insights theme"?n="insightstheme":e==="hub initiative"?n="hubinitiative":e==="hub page"?n="hubpage":e==="hub site application"?n="hubsite":e==="hub event"?n="hubevent":e==="hub project"?n="hubproject":e==="relational database connection"?n="relationaldatabaseconnection":e==="big data file share"?n="datastorecollection":e==="image collection"?n="imagecollection":e==="desktop style"?n="desktopstyle":e==="style"?n=t.includes("Dictionary")?"dictionarystyle":"style":e==="dashboard"?n="dashboard":e==="raster function template"?n="rasterprocessingtemplate":e==="vector tile package"?n="vectortilepackage":e==="ortho mapping project"?n="orthomappingproject":e==="ortho mapping template"?n="orthomappingtemplate":e==="solution"?n="solutions":e==="geopackage"?n="geopackage":e==="deep learning package"?n="deeplearningpackage":e==="real time analytic"?n="realtimeanalytics":e==="reality mapping project"?n="realitymappingproject":e==="big data analytic"?n="bigdataanalytics":e==="feed"?n="feed":e==="excalibur imagery project"?n="excaliburimageryproject":e==="notebook"?n="notebook":e==="storymap"?n="storymap":e==="survey123 add in"?n="survey123addin":e==="mission"?n="mission":e==="mission report"?n="missionreport":e==="mission template"?n="missiontemplate":e==="quickcapture project"?n="quickcaptureproject":e==="pro report"?n="proreport":e==="pro report template"?n="proreporttemplate":e==="urban model"?n="urbanmodel":e==="urban project"?n="urbanproject":e==="web experience"?n="experiencebuilder":e==="web experience template"?n="webexperiencetemplate":e==="experience builder widget"?n="experiencebuilderwidget":e==="experience builder widget package"?n="experiencebuilderwidgetpackage":e==="workflow"?n="workflow":e==="kernel gateway connection"?n="kernelgatewayconnection":e==="insights script"?n="insightsscript":e==="hub initiative template"?n="hubinitiativetemplate":e==="storymap theme"?n="storymaptheme":e==="knowledge graph"?n="knowledgegraph":e==="knowledge graph layer"?n="knowledgegraphlayer":e==="knowledge studio project"?n="knowledgestudio":e==="native application"?n="nativeapp":e==="native application installer"?n="nativeappinstaller":e==="web link chart"?n="linkchart":e==="knowledge graph web investigation"?n="investigation":e==="ogcfeatureserver"?n="features":e==="pro presentation"?n="propresentation":e==="pro project"?n="proproject":e==="insights workbook package"?n="insightsworkbookpackage":e==="apache parquet"?n="apacheparquet":e==="notebook code snippet library"?n="notebookcodesnippets":e==="suitability model"?n="suitabilitymodel":e==="esri classifier definition"?n="classifierdefinition":e==="esri classification schema"?n="classificationschema":e==="insights data engineering workbook"?n="dataengineeringworkbook":e==="insights data engineering model"?n="dataengineeringmodel":e==="deep learning studio project"?n="deeplearningproject":e==="discussion"?n="discussion":e==="allsource project"?n="allsourceproject":e==="api key"?n="apikey":e==="data pipeline"?n="datapipelines":e==="group layer"?(m=t.includes("Map"),n=m?"layergroup2d":"layergroup"):n=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":e==="csv"?"csv":e==="image"?"image":"maps",n?Ve(r+n+i+".png"):null}get isLayer(){return this.type!=null&&Cfe.has(this.type)}get itemCdnUrl(){return nk(this.itemUrl)}get itemPageUrl(){var t;const e=(t=this.portal)==null?void 0:t.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var r;const e=this.itemUrl,t=this.thumbnail;return e&&t?((r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${t}?f=json`))??null:null}get userItemUrl(){var r,i,n;const e=(r=this.portal)==null?void 0:r.restUrl;if(!e)return null;const t=this.owner||((n=(i=this.portal)==null?void 0:i.user)==null?void 0:n.username);return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=fr.getDefault()),r=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{}).then(i=>{this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(r),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}};return e instanceof HT&&(e=e.rating),e==null||isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new HT({rating:e,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:C(this.applicationProxies),avgRating:this.avgRating,categories:C(this.categories),classification:C(this.classification),created:C(this.created),culture:this.culture,description:this.description,extent:C(this.extent),groupCategories:C(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:C(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:C(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:C(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:C(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new Fc({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){var t;const e=this.toJSON();for(const r of["tags","typeKeywords","categories"])e[r]=(t=e[r])==null?void 0:t.join(", ");for(const r of["extent","classification"]){const i=e[r];i&&(e[r]=JSON.stringify(i))}return e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new HT(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},Fc)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.applicationProxies&&!Object.hasOwn(e,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e==null?void 0:e.data,r={method:"post"};r.query=this.createPostQuery();for(const i in r.query)r.query[i]===null&&(r.query[i]="");return r.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?r.query.text=t:typeof t=="object"&&(r.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,r).then(()=>this.reload())}):Promise.reject(new R("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new R("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:r}=this;await t.signIn();const{copyResources:i,folder:n,tags:s,title:o}=e||{},a={method:"post",query:{copyPrivateResources:i==="all",folder:typeof n=="string"?n:n==null?void 0:n.id,includeResources:!!i,tags:s==null?void 0:s.join(","),title:o}},{itemId:u}=await t.request(`${r}/copy`,a);return new Fc({id:u,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,r=e.filename,i={method:"post"};if(typeof t=="string")ml(t)?i.query={data:t}:i.query={url:ji(t)},r!=null&&(i.query.filename=r);else{const n=new FormData;r!=null?n.append("file",t,r):n.append("file",t),i.body=n}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,i).then(()=>this.reload())}):Promise.reject(new R("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:r}=await D(()=>import("./resourceUtils-DmgYgEHL.js"),[],import.meta.url);return r(this,e,t)}async addResource(e,t,r){const{addOrUpdateResources:i}=await D(()=>import("./resourceUtils-DmgYgEHL.js"),[],import.meta.url);return e.portalItem=this,await i(this,[{resource:e,content:t,compress:r==null?void 0:r.compress,access:r==null?void 0:r.access}],"add",r),e}async removeResource(e,t){const{removeResource:r}=await D(()=>import("./resourceUtils-DmgYgEHL.js"),[],import.meta.url);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new R("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await D(()=>import("./resourceUtils-DmgYgEHL.js"),[],import.meta.url);return t(this,e)}resourceFromPath(e){return new xfe({portalItem:this,path:e})}toJSON(){var r,i;const e=this.extent,t={accessInformation:this.accessInformation,categories:C(this.categories),classification:C(this.classification),created:(r=this.created)==null?void 0:r.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(i=this.modified)==null?void 0:i.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:C(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:C(this.typeKeywords),url:this.url};return Qie(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Fc({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};l([c({type:["private","shared","org","public"]})],be.prototype,"access",void 0),l([c()],be.prototype,"accessInformation",void 0),l([c({type:String})],be.prototype,"apiKey",void 0),l([c({json:{read:{source:"appProxies"}}})],be.prototype,"applicationProxies",void 0),l([c()],be.prototype,"avgRating",void 0),l([c()],be.prototype,"categories",void 0),l([c()],be.prototype,"classification",void 0),l([c({type:Date})],be.prototype,"created",void 0),l([c()],be.prototype,"culture",void 0),l([c()],be.prototype,"description",void 0),l([c({readOnly:!0})],be.prototype,"displayName",null),l([c({type:qe})],be.prototype,"extent",void 0),l([G("extent")],be.prototype,"readExtent",null),l([c()],be.prototype,"groupCategories",void 0),l([c({readOnly:!0})],be.prototype,"iconUrl",null),l([c()],be.prototype,"id",void 0),l([c({readOnly:!0})],be.prototype,"isLayer",null),l([c({type:Boolean,readOnly:!0})],be.prototype,"isOrgItem",void 0),l([c()],be.prototype,"itemControl",void 0),l([c({readOnly:!0})],be.prototype,"itemPageUrl",null),l([c({readOnly:!0})],be.prototype,"itemUrl",null),l([c()],be.prototype,"licenseInfo",void 0),l([c({type:Date})],be.prototype,"modified",void 0),l([c()],be.prototype,"name",void 0),l([c()],be.prototype,"numComments",void 0),l([c()],be.prototype,"numRatings",void 0),l([c()],be.prototype,"numViews",void 0),l([c()],be.prototype,"owner",void 0),l([c()],be.prototype,"ownerFolder",void 0),l([c({type:fr})],be.prototype,"portal",void 0),l([c()],be.prototype,"screenshots",void 0),l([c()],be.prototype,"size",void 0),l([c()],be.prototype,"snippet",void 0),l([c()],be.prototype,"sourceJSON",void 0),l([c({type:String})],be.prototype,"sourceUrl",void 0),l([c({type:String})],be.prototype,"spatialReference",void 0),l([c()],be.prototype,"tags",void 0),l([c()],be.prototype,"thumbnail",void 0),l([c({readOnly:!0})],be.prototype,"thumbnailUrl",null),l([c()],be.prototype,"title",void 0),l([c()],be.prototype,"type",void 0),l([c()],be.prototype,"typeKeywords",void 0),l([c({type:String,json:{read(e,t){var r;if(Afe.has(t.type)){const i=(r=this.portal)==null?void 0:r.restUrl;e||(e=i&&this.id?`${i}/content/items/${this.id}/data`:null)}return e}}})],be.prototype,"url",void 0),l([c({readOnly:!0})],be.prototype,"userItemUrl",null),be=Fc=l([$("esri.portal.PortalItem")],be);const Ho=be,Aq=Object.freeze(Object.defineProperty({__proto__:null,default:Ho},Symbol.toStringTag,{value:"Module"}));async function Rfe(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,r=await J2("esri/t9n/basemaps");return r[e]||r[t]}const lm={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Ve("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Ve("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Ve("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Ve("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Ve("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Ve("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Ve("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Ve("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Ve("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Ve("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Ve("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Ve("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Ve("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Ve("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return Ve("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return Ve("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return Ve("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return Ve("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Ve("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Ve("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Ve("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Ve("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Ve("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Ve("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Ve("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Ve("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Ve("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}},Ofe=new Set(["ar","bs","ca","hr","cs","da","nl","en","et","fi","fr","de","el","he","hu","id","it","ja","ko","lv","lt","nb","pl","ro","ru","sr","es","sv","th","tr","uk","vi"]);let ha=class extends te{constructor(t){super(t),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps",this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;const t=qi().toLowerCase();switch(t){case"pt-br":return"pt-BR";case"pt-pt":return"pt-PT";case"zh-cn":return"zh-CN";case"zh-hk":return"zh-HK";case"zh-tw":return"zh-TW"}const r=sue(t);return r==="pt"?"pt-BR":r&&Ofe.has(r)?r:"global"}};l([c()],ha.prototype,"apiKey",void 0),l([c()],ha.prototype,"id",void 0),l([c()],ha.prototype,"language",void 0),l([c()],ha.prototype,"places",void 0),l([c()],ha.prototype,"serviceUrl",void 0),l([c()],ha.prototype,"worldview",void 0),ha=l([$("esri.support.BasemapStyle")],ha);const kfe=ha;function Pfe(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="subtype-group"&&"sublayers"in e}function Dc(e){return(e==null?void 0:e.type)==="subtype-sublayer"}const wNe={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function cI(e){const t=e==null?void 0:e.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function i$(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function _Ne(e){var r;const t=e==null?void 0:e.type;return(t==="feature"||t==="subtype-group"||t==="oriented-imagery")&&((r=e.source)==null?void 0:r.type)==="feature-layer"}async function Rq(e,t){const r=Ae==null?void 0:Ae.findServerInfo(e);if((r==null?void 0:r.currentVersion)!=null)return r.owningSystemUrl||null;const i=e.toLowerCase().indexOf("/rest/services");if(i===-1)return null;const n=`${e.slice(0,i)}/rest/info`,s=t!=null?t.signal:null,{data:o}=await Le(n,{query:{f:"json"},responseType:"json",signal:s});return(o==null?void 0:o.owningSystemUrl)||null}function Nfe(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function Lfe(e){return Nfe(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function Ffe(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function Dfe(e){return!!Ffe(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const jfe=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),Vfe=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function Ufe(e){return e.layerContainerType==="basemap"?jfe:e.layerContainerType==="operational-layers"?Vfe:null}function zfe(e,t){if(t.restrictedWebMapWriting){const r=Ufe(t);return r==null||r.has(e.type)&&!i$(e)}return!0}function Gfe(e,t){var r;if(t)if(i$(e)){const i=_v("featureCollection.layers",t),n=(r=i==null?void 0:i[0])==null?void 0:r.layerDefinition;n&&O5(e,n)}else e.type!=="group"&&O5(e,t)}function O5(e,t){"maxScale"in e&&(t.maxScale=Xb(e.maxScale)??void 0),"minScale"in e&&(t.minScale=Xb(e.minScale)??void 0)}function Bfe(e,t){if(Gfe(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=Xb(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(i$(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function dI(e,t,r){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return r!=null&&r.messages&&r.messages.push(new R("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(i$(e)&&!e.isTable)t=e.resourceInfo;else if(zfe(e,r)){const i={};return e.write(i,r)?i:null}return t!=null&&Bfe(e,t=C(t)),t}var Ly;let qfe=0,tn=Ly=class extends Sm(ls){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+qfe++,this.baseLayers=new Y,this.referenceLayers=new Y;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type==="elevation"&&j.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=i=>{i.parent=null};this.addHandles([this.baseLayers.on("after-add",i=>t(i.item)),this.referenceLayers.on("after-add",i=>t(i.item)),this.baseLayers.on("after-remove",i=>r(i.item)),this.referenceLayers.on("after-remove",i=>r(i.item))])}initialize(){this.when().catch(e=>{j.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const r of e)r.destroy();const t=this.referenceLayers.toArray();for(const r of t)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=st(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",rc(e,this._get("baseLayers")))}_writeBaseLayers(e,t,r){const i=[];e&&(r={...r,layerContainerType:"basemap"},this.baseLayers.forEach(n=>{const s=dI(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);s!=null&&i.push(s)}),this.referenceLayers.forEach(n=>{const s=dI(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);s!=null&&(n.type!=="scene"&&(s.isReference=!0),i.push(s))})),t.baseMapLayers=i}set referenceLayers(e){this._set("referenceLayers",rc(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return t$(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(t=>Hb(t)?t.clone():t),referenceLayers:this.referenceLayers.map(t=>Hb(t)?t.clone():t)};return this.loaded&&(e.loadStatus="loaded"),new Ly({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){var r;return e=e||{},t!=null&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&((r=this.resourceInfo)!=null&&r.data.baseMapLayers)&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const n=C(i);return n.url&&Wo(n.url)&&(n.url=`https:${n.url}`),n.templateUrl&&Wo(n.templateUrl)&&(n.templateUrl=`https:${n.templateUrl}`),n})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:r,style:i}=this;_t(e);const n=[];if(t){const s=t.context?t.context.url:null;if(n.push(this._loadLayersFromJSON(t.data,s,e)),t.data.id&&!t.data.title){const o=t.data.id;n.push(Rfe(o).then(a=>{a&&this.read({title:a},t.context)}))}}else r?n.push(this._loadFromItem(r,e)):i&&n.push(this._loadFromStylesService(i,e));await Promise.all(n)}async _loadLayersFromJSON(e,t,r){var u,d;const i=(u=this.resourceInfo)==null?void 0:u.context,n=((d=this.portalItem)==null?void 0:d.portal)||(i==null?void 0:i.portal)||null,s=Wfe[(i==null?void 0:i.origin)||""]??"web-map",{populateOperationalLayers:o}=await D(async()=>{const{populateOperationalLayers:h}=await import("./layersCreator-C4uZ9N3H.js");return{populateOperationalLayers:h}},__vite__mapDeps([136,137,138,139]),import.meta.url),a=[];if(_t(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const h={context:{...i,origin:s,url:t,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},f=g=>s==="web-scene"&&g.layerType==="ArcGISSceneServiceLayer"||g.isReference,m=o(this.baseLayers,e.baseMapLayers.filter(g=>!f(g)),h);a.push(m);const y=o(this.referenceLayers,e.baseMapLayers.filter(f),h);a.push(y)}await Promise.allSettled(a)}async _loadFromItem(e,t){const r=await e.load(t),i=await r.fetchData("json",t),n=hr(e.itemUrl??"");return this._set("resourceInfo",{data:i.baseMap??{},context:{origin:Hfe[e.type||""]??"web-map",portal:e.portal||fr.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||fr.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,t)}async _loadFromStylesService(e,t){const r=`${e.serviceUrl}/${e.id}`,i=(await Le(r,{query:{language:e.getLanguageParamValue(),places:e.places,worldview:e.worldview,token:e.apiKey},signal:t==null?void 0:t.signal})).data,n=hr(r);if(this._set("resourceInfo",{data:i.baseMap??{},context:{origin:"web-map",url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,n,t),e.apiKey)for(const s of[...this.baseLayers,...this.referenceLayers])"apiKey"in s&&(s.apiKey=e.apiKey)}static fromId(e){const t=lm[e];return t?t.itemId?new Ly({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):Ly.fromJSON(t,{origin:t.is3d?"web-scene":"web-map"}):null}};l([c({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,r,i){this._writeBaseLayers(e,t,i)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Y}},writer(e,t,r,i){this._writeBaseLayers(e,t,i)}}}}}})],tn.prototype,"baseLayers",null),l([c({type:String,json:{origins:{"web-scene":{write:!0}}}})],tn.prototype,"id",void 0),l([c({type:Ho})],tn.prototype,"portalItem",void 0),l([c()],tn.prototype,"referenceLayers",null),l([c({readOnly:!0})],tn.prototype,"resourceInfo",void 0),l([c({type:me})],tn.prototype,"spatialReference",void 0),l([c({type:kfe})],tn.prototype,"style",void 0),l([c()],tn.prototype,"thumbnailUrl",void 0),l([c({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],tn.prototype,"title",void 0),l([B("title")],tn.prototype,"writeTitle",null),tn=Ly=l([$("esri.Basemap")],tn);const Hfe={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},Wfe={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},Lf=tn,Zfe=Object.freeze(Object.defineProperty({__proto__:null,default:Lf},Symbol.toStringTag,{value:"Module"})),LS={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function Oq(e){return!!LS[e]||!!LS[e.toLowerCase()]}function sk(e){return LS[e]??LS[e.toLowerCase()]}function Jfe(e){return[...sk(e)]}function WT(e,t,r){r<0&&++r,r>1&&--r;const i=6*r;return i<1?e+(t-e)*i:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function kq(e,t,r,i=1){const n=(e%360+360)%360/360,s=r<=.5?r*(t+1):r+t-r*t,o=2*r-s;return[Math.round(255*WT(o,s,n+1/3)),Math.round(255*WT(o,s,n)),Math.round(255*WT(o,s,n-1/3)),i]}function Kfe(e){const t=e.length>5,r=t?8:4,i=(1<<r)-1,n=t?1:17,s=t?e.length===9:e.length===5;let o=+("0x"+e.slice(1));if(isNaN(o))return null;const a=[0,0,0,1];let u;return s&&(u=o&i,o>>=r,a[3]=n*u/255),u=o&i,o>>=r,a[2]=n*u,u=o&i,o>>=r,a[1]=n*u,u=o&i,o>>=r,a[0]=n*u,a}function G1(e){return os(eO(e),0,255)}function B1(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}function q1(e,t){const r=e.toString(16).padStart(2,"0");return t?r.slice(0,1):r}let u_=class nr{static blendColors(t,r,i,n=new nr){return n.r=Math.round(t.r+(r.r-t.r)*i),n.g=Math.round(t.g+(r.g-t.g)*i),n.b=Math.round(t.b+(r.b-t.b)*i),n.a=t.a+(r.a-t.a)*i,n._sanitize()}static fromRgb(t,r){const i=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(i){const n=i[2].split(/\s*,\s*/),s=i[1];if(s==="rgb"&&n.length===3||s==="rgba"&&n.length===4){const o=n[0];if(o.charAt(o.length-1)==="%"){const a=n.map(u=>2.56*parseFloat(u));return n.length===4&&(a[3]=parseFloat(n[3])),nr.fromArray(a,r)}return nr.fromArray(n.map(a=>parseFloat(a)),r)}if(s==="hsl"&&n.length===3||s==="hsla"&&n.length===4)return nr.fromArray(kq(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])),r)}return null}static fromHex(t,r=new nr){if(t[0]!=="#"||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const i=parseInt(t.slice(1,2),16),n=parseInt(t.slice(2,3),16),s=parseInt(t.slice(3,4),16),o=t.length===5?15:parseInt(t.slice(4),16);return nr.fromArray([i+16*i,n+16*n,s+16*s,(o+16*o)/255],r)}case 7:case 9:{const i=parseInt(t.slice(1,3),16),n=parseInt(t.slice(3,5),16),s=parseInt(t.slice(5,7),16),o=t.length===7?255:parseInt(t.slice(7),16);return nr.fromArray([i,n,s,o/255],r)}default:return null}}static fromArray(t,r=new nr){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,r){const i=Oq(t)?sk(t):null;return i&&nr.fromArray(i,r)||nr.fromRgb(t,r)||nr.fromHex(t,r)}static fromJSON(t){return t!=null?new nr([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?nr.fromString(t,this):Array.isArray(t)?nr.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof nr||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const r=(t==null?void 0:t.capitalize)??!1,i=(t==null?void 0:t.digits)??6,n=i===3||i===4,s=i===4||i===8,o=`#${q1(this.r,n)}${q1(this.g,n)}${q1(this.b,n)}${s?q1(Math.round(255*this.a),n):""}`;return r?o.toUpperCase():o}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=nr.AlphaMode.ALWAYS){const r=G1(this.r),i=G1(this.g),n=G1(this.b);return t===nr.AlphaMode.ALWAYS||this.a!==1?[r,i,n,G1(255*this.a)]:[r,i,n]}clone(){return new nr(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(B1(this.r,0,255)),this.g=Math.round(B1(this.g,0,255)),this.b=Math.round(B1(this.b,0,255)),this.a=B1(this.a,0,1),this}_set(t,r,i,n){this.r=t,this.g=r,this.b=i,this.a=n}};u_.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(u_||(u_={}));const le=u_;function bNe(e){}function Yfe(e){return()=>e}function X(e,t={}){const r=e instanceof _e?e:new _e(e,t),{alwaysWriteDefaults:i,default:n,ignoreUnknown:s=!0,name:o,nonNullable:a,readOnly:u=!1}=t;return c({type:s?r.apiValues:String,json:{type:r.jsonValues,default:n,name:o,read:!u&&{reader:r.read},write:{writer:r.write,alwaysWriteDefaults:i}},nonNullable:a,readOnly:u})}var pI;let c_=pI=class extends N{constructor(e){super(e),this.type="none"}clone(){return new pI({type:this.type})}};l([X({none:"none",stayAbove:"stay-above"})],c_.prototype,"type",void 0),c_=pI=l([$("esri.ground.NavigationConstraint")],c_);function n$(e){const t=eO(100*(1-e));return Math.max(0,Math.min(t,100))}function Y0(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var hI;let fa=hI=class extends Sm(ls){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Y;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type!=="elevation"&&i.type!=="base-elevation"&&j.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},r=i=>{i.parent=null};this.addHandles([this.layers.on("after-add",i=>t(i.item)),this.layers.on("after-remove",i=>r(i.item))])}initialize(){this.when().catch(e=>{Or(e)||j.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)st(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",rc(e,this._get("layers")))}writeLayers(e,t,r,i){const n=[];e&&(i={...i,layerContainerType:"ground"},e.forEach(s=>{if("write"in s){const o={};Yfe(s)().write(o,i)&&n.push(o)}else i!=null&&i.messages&&i.messages.push(new R("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),t.layers=n}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return t$(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:r}=await D(()=>import("./ElevationQuery-B7c1momg.js"),[],import.meta.url);_t(t);const i=new r,n=this.layers.filter(k5).toArray();return i.queryAll(n,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:r}=await D(()=>import("./ElevationQuery-B7c1momg.js"),[],import.meta.url);_t(t);const i=new r,n=this.layers.filter(k5).toArray();return i.createSamplerAll(n,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:C(this.surfaceColor),navigationConstraint:C(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new hI({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}async _loadLayersFromJSON(e,t,r){const i=(t==null?void 0:t.origin)||"web-scene",n=(t==null?void 0:t.portal)||null,s=(t==null?void 0:t.url)||null,{populateOperationalLayers:o}=await D(async()=>{const{populateOperationalLayers:u}=await import("./layersCreator-C4uZ9N3H.js");return{populateOperationalLayers:u}},__vite__mapDeps([136,137,138,139]),import.meta.url);_t(r);const a=[];if(e.layers&&Array.isArray(e.layers)){const u={context:{origin:i,url:s,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,e.layers,u))}await Promise.allSettled(a)}};function Qfe(e){return e&&"createElevationSampler"in e}function k5(e){return e.type==="elevation"||Qfe(e)}l([c({json:{read:!1}})],fa.prototype,"layers",null),l([B("layers")],fa.prototype,"writeLayers",null),l([c({readOnly:!0})],fa.prototype,"resourceInfo",void 0),l([c({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:ke,read:{reader:Y0,source:"transparency"},write:{writer:(e,t)=>{t.transparency=n$(e)},target:"transparency"}}})],fa.prototype,"opacity",void 0),l([c({type:le,json:{type:[ke],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],fa.prototype,"surfaceColor",void 0),l([c({type:c_,json:{write:!0}})],fa.prototype,"navigationConstraint",void 0),fa=hI=l([$("esri.Ground")],fa);const FS=fa,H1=new WeakMap;function Pq(e){return!e.destroyed&&(H1.has(e)||e.addHandles([ce(()=>{const t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||Pq(t))},t=>H1.set(e,t),dn),Be(()=>H1.delete(e))]),H1.get(e))}function Xfe(e){return typeof e=="object"&&e!=null&&"loaded"in e&&e.loaded===!0&&"type"in e}function eme(e){var t,r;return!(!Xfe(e)||!((r=(t=Lfe(e))==null?void 0:t.operations)!=null&&r.supportsEditing)||"editingEnabled"in e&&!Dfe(e)||Pq(e))}const tme=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,rme="screenUtils.toPt: input not recognized!",Nq=96;function ime(e){return e?e/72*Nq:0}function us(e){return e?72*e/Nq:0}function Fe(e){if(typeof e=="string"){const t=e.match(tme);if(t){const r=Number(t[1]),i=t[3]&&t[3].toLowerCase(),n=e.charAt(0)==="-",s=i==="px"?us(r):r;return n?-s:s}return console.warn(rme),null}return e}function Ir(e=0,t=0){return{x:e,y:t}}function SNe(e){return e?Ir(e.x,e.y):null}function $Ne(e=0,t=0){return[e,t]}function TNe(e=0,t=0,r=0){return[e,t,r]}function xNe(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}function s$(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function nme(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function sme(e,t,r,i,n,s,o,a,u,d,h,f,m,y,g,v){const _=new Float32Array(16);return _[0]=e,_[1]=t,_[2]=r,_[3]=i,_[4]=n,_[5]=s,_[6]=o,_[7]=a,_[8]=u,_[9]=d,_[10]=h,_[11]=f,_[12]=m,_[13]=y,_[14]=g,_[15]=v,_}function ome(e,t){return new Float32Array(e,t,16)}const ame=s$();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:ame,clone:nme,create:s$,createView:ome,fromValues:sme},Symbol.toStringTag,{value:"Module"}));let ok=1e-6;function Si(){return ok}function lme(e){ok=e}const o$=Math.random,ume=Math.PI/180,cme=180/Math.PI;function ak(e){return e*ume}function dme(e){return e*cme}function pme(e,t){return Math.abs(e-t)<=ok*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:o$,equals:pme,getEpsilon:Si,setEpsilon:lme,toDegree:dme,toRadian:ak},Symbol.toStringTag,{value:"Module"}));function Lq(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function dc(e,t,r,i,n,s,o,a,u,d,h,f,m,y,g,v,_){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e[6]=a,e[7]=u,e[8]=d,e[9]=h,e[10]=f,e[11]=m,e[12]=y,e[13]=g,e[14]=v,e[15]=_,e}function a$(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function pc(e,t){if(e===t){const r=t[1],i=t[2],n=t[3],s=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=s,e[11]=t[14],e[12]=n,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function hme(e,t){return Fq(e,t)||a$(e),e}function Fq(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],u=t[6],d=t[7],h=t[8],f=t[9],m=t[10],y=t[11],g=t[12],v=t[13],_=t[14],w=t[15],b=r*a-i*o,T=r*u-n*o,x=r*d-s*o,M=i*u-n*a,I=i*d-s*a,O=n*d-s*u,P=h*v-f*g,z=h*_-m*g,U=h*w-y*g,W=f*_-m*v,ee=f*w-y*v,de=m*w-y*_;let oe=b*de-T*ee+x*W+M*U-I*z+O*P;return oe?(oe=1/oe,e[0]=(a*de-u*ee+d*W)*oe,e[1]=(n*ee-i*de-s*W)*oe,e[2]=(v*O-_*I+w*M)*oe,e[3]=(m*I-f*O-y*M)*oe,e[4]=(u*U-o*de-d*z)*oe,e[5]=(r*de-n*U+s*z)*oe,e[6]=(_*x-g*O-w*T)*oe,e[7]=(h*O-m*x+y*T)*oe,e[8]=(o*ee-a*U+d*P)*oe,e[9]=(i*U-r*ee-s*P)*oe,e[10]=(g*I-v*x+w*b)*oe,e[11]=(f*x-h*I-y*b)*oe,e[12]=(a*z-o*W-u*P)*oe,e[13]=(r*W-i*z+n*P)*oe,e[14]=(v*T-g*M-_*b)*oe,e[15]=(h*M-f*T+m*b)*oe,e):null}function fme(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],u=t[6],d=t[7],h=t[8],f=t[9],m=t[10],y=t[11],g=t[12],v=t[13],_=t[14],w=t[15];return e[0]=a*(m*w-y*_)-f*(u*w-d*_)+v*(u*y-d*m),e[1]=-(i*(m*w-y*_)-f*(n*w-s*_)+v*(n*y-s*m)),e[2]=i*(u*w-d*_)-a*(n*w-s*_)+v*(n*d-s*u),e[3]=-(i*(u*y-d*m)-a*(n*y-s*m)+f*(n*d-s*u)),e[4]=-(o*(m*w-y*_)-h*(u*w-d*_)+g*(u*y-d*m)),e[5]=r*(m*w-y*_)-h*(n*w-s*_)+g*(n*y-s*m),e[6]=-(r*(u*w-d*_)-o*(n*w-s*_)+g*(n*d-s*u)),e[7]=r*(u*y-d*m)-o*(n*y-s*m)+h*(n*d-s*u),e[8]=o*(f*w-y*v)-h*(a*w-d*v)+g*(a*y-d*f),e[9]=-(r*(f*w-y*v)-h*(i*w-s*v)+g*(i*y-s*f)),e[10]=r*(a*w-d*v)-o*(i*w-s*v)+g*(i*d-s*a),e[11]=-(r*(a*y-d*f)-o*(i*y-s*f)+h*(i*d-s*a)),e[12]=-(o*(f*_-m*v)-h*(a*_-u*v)+g*(a*m-u*f)),e[13]=r*(f*_-m*v)-h*(i*_-n*v)+g*(i*m-n*f),e[14]=-(r*(a*_-u*v)-o*(i*_-n*v)+g*(i*u-n*a)),e[15]=r*(a*m-u*f)-o*(i*m-n*f)+h*(i*u-n*a),e}function mme(e){const t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],o=e[5],a=e[6],u=e[7],d=e[8],h=e[9],f=e[10],m=e[11],y=e[12],g=e[13],v=e[14],_=e[15];return(t*o-r*s)*(f*_-m*v)-(t*a-i*s)*(h*_-m*g)+(t*u-n*s)*(h*v-f*g)+(r*a-i*o)*(d*_-m*y)-(r*u-n*o)*(d*v-f*y)+(i*u-n*a)*(d*g-h*y)}function Dq(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],u=t[5],d=t[6],h=t[7],f=t[8],m=t[9],y=t[10],g=t[11],v=t[12],_=t[13],w=t[14],b=t[15];let T=r[0],x=r[1],M=r[2],I=r[3];return e[0]=T*i+x*a+M*f+I*v,e[1]=T*n+x*u+M*m+I*_,e[2]=T*s+x*d+M*y+I*w,e[3]=T*o+x*h+M*g+I*b,T=r[4],x=r[5],M=r[6],I=r[7],e[4]=T*i+x*a+M*f+I*v,e[5]=T*n+x*u+M*m+I*_,e[6]=T*s+x*d+M*y+I*w,e[7]=T*o+x*h+M*g+I*b,T=r[8],x=r[9],M=r[10],I=r[11],e[8]=T*i+x*a+M*f+I*v,e[9]=T*n+x*u+M*m+I*_,e[10]=T*s+x*d+M*y+I*w,e[11]=T*o+x*h+M*g+I*b,T=r[12],x=r[13],M=r[14],I=r[15],e[12]=T*i+x*a+M*f+I*v,e[13]=T*n+x*u+M*m+I*_,e[14]=T*s+x*d+M*y+I*w,e[15]=T*o+x*h+M*g+I*b,e}function yme(e,t,r){const i=r[0],n=r[1],s=r[2];if(t===e)e[12]=t[0]*i+t[4]*n+t[8]*s+t[12],e[13]=t[1]*i+t[5]*n+t[9]*s+t[13],e[14]=t[2]*i+t[6]*n+t[10]*s+t[14],e[15]=t[3]*i+t[7]*n+t[11]*s+t[15];else{const o=t[0],a=t[1],u=t[2],d=t[3],h=t[4],f=t[5],m=t[6],y=t[7],g=t[8],v=t[9],_=t[10],w=t[11];e[0]=o,e[1]=a,e[2]=u,e[3]=d,e[4]=h,e[5]=f,e[6]=m,e[7]=y,e[8]=g,e[9]=v,e[10]=_,e[11]=w,e[12]=o*i+h*n+g*s+t[12],e[13]=a*i+f*n+v*s+t[13],e[14]=u*i+m*n+_*s+t[14],e[15]=d*i+y*n+w*s+t[15]}return e}function gme(e,t,r){const i=r[0],n=r[1],s=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function vme(e,t,r,i){let n=i[0],s=i[1],o=i[2],a=Math.sqrt(n*n+s*s+o*o);if(a<=Si())return void Lq(e,t);a=1/a,n*=a,s*=a,o*=a;const u=Math.sin(r),d=Math.cos(r),h=1-d,f=t[0],m=t[1],y=t[2],g=t[3],v=t[4],_=t[5],w=t[6],b=t[7],T=t[8],x=t[9],M=t[10],I=t[11],O=n*n*h+d,P=s*n*h+o*u,z=o*n*h-s*u,U=n*s*h-o*u,W=s*s*h+d,ee=o*s*h+n*u,de=n*o*h+s*u,oe=s*o*h-n*u,Pe=o*o*h+d;e[0]=f*O+v*P+T*z,e[1]=m*O+_*P+x*z,e[2]=y*O+w*P+M*z,e[3]=g*O+b*P+I*z,e[4]=f*U+v*W+T*ee,e[5]=m*U+_*W+x*ee,e[6]=y*U+w*W+M*ee,e[7]=g*U+b*W+I*ee,e[8]=f*de+v*oe+T*Pe,e[9]=m*de+_*oe+x*Pe,e[10]=y*de+w*oe+M*Pe,e[11]=g*de+b*oe+I*Pe,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15])}function wme(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[4],o=t[5],a=t[6],u=t[7],d=t[8],h=t[9],f=t[10],m=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*n+d*i,e[5]=o*n+h*i,e[6]=a*n+f*i,e[7]=u*n+m*i,e[8]=d*n-s*i,e[9]=h*n-o*i,e[10]=f*n-a*i,e[11]=m*n-u*i,e}function _me(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[0],o=t[1],a=t[2],u=t[3],d=t[8],h=t[9],f=t[10],m=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n-d*i,e[1]=o*n-h*i,e[2]=a*n-f*i,e[3]=u*n-m*i,e[8]=s*i+d*n,e[9]=o*i+h*n,e[10]=a*i+f*n,e[11]=u*i+m*n,e}function bme(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[0],o=t[1],a=t[2],u=t[3],d=t[4],h=t[5],f=t[6],m=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n+d*i,e[1]=o*n+h*i,e[2]=a*n+f*i,e[3]=u*n+m*i,e[4]=d*n-s*i,e[5]=h*n-o*i,e[6]=f*n-a*i,e[7]=m*n-u*i,e}function Sme(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function $me(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Tme(e,t,r){if(t===0)return a$(e);let i=r[0],n=r[1],s=r[2],o=Math.sqrt(i*i+n*n+s*s);if(o<=Si())return null;o=1/o,i*=o,n*=o,s*=o;const a=Math.sin(t),u=Math.cos(t),d=1-u;return e[0]=i*i*d+u,e[1]=n*i*d+s*a,e[2]=s*i*d-n*a,e[3]=0,e[4]=i*n*d-s*a,e[5]=n*n*d+u,e[6]=s*n*d+i*a,e[7]=0,e[8]=i*s*d+n*a,e[9]=n*s*d-i*a,e[10]=s*s*d+u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function xme(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Eme(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Mme(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function jq(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=i+i,u=n+n,d=s+s,h=i*a,f=i*u,m=i*d,y=n*u,g=n*d,v=s*d,_=o*a,w=o*u,b=o*d;return e[0]=1-(y+v),e[1]=f+b,e[2]=m-w,e[3]=0,e[4]=f-b,e[5]=1-(h+v),e[6]=g+_,e[7]=0,e[8]=m+w,e[9]=g-_,e[10]=1-(h+y),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Ime(e,t){const r=Cme,i=-t[0],n=-t[1],s=-t[2],o=t[3],a=t[4],u=t[5],d=t[6],h=t[7],f=i*i+n*n+s*s+o*o;return f>0?(r[0]=2*(a*o+h*i+u*s-d*n)/f,r[1]=2*(u*o+h*n+d*i-a*s)/f,r[2]=2*(d*o+h*s+a*n-u*i)/f):(r[0]=2*(a*o+h*i+u*s-d*n),r[1]=2*(u*o+h*n+d*i-a*s),r[2]=2*(d*o+h*s+a*n-u*i)),jq(e,t,r),e}const Cme=uc();function Ame(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Rme(e,t){const r=t[0],i=t[1],n=t[2],s=t[4],o=t[5],a=t[6],u=t[8],d=t[9],h=t[10];return e[0]=Math.sqrt(r*r+i*i+n*n),e[1]=Math.sqrt(s*s+o*o+a*a),e[2]=Math.sqrt(u*u+d*d+h*h),e}function Ome(e,t){const r=t[0]+t[5]+t[10];let i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e}function kme(e,t,r,i){const n=t[0],s=t[1],o=t[2],a=t[3],u=n+n,d=s+s,h=o+o,f=n*u,m=n*d,y=n*h,g=s*d,v=s*h,_=o*h,w=a*u,b=a*d,T=a*h,x=i[0],M=i[1],I=i[2];return e[0]=(1-(g+_))*x,e[1]=(m+T)*x,e[2]=(y-b)*x,e[3]=0,e[4]=(m-T)*M,e[5]=(1-(f+_))*M,e[6]=(v+w)*M,e[7]=0,e[8]=(y+b)*I,e[9]=(v-w)*I,e[10]=(1-(f+g))*I,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Pme(e,t,r,i,n){const s=t[0],o=t[1],a=t[2],u=t[3],d=s+s,h=o+o,f=a+a,m=s*d,y=s*h,g=s*f,v=o*h,_=o*f,w=a*f,b=u*d,T=u*h,x=u*f,M=i[0],I=i[1],O=i[2],P=n[0],z=n[1],U=n[2],W=(1-(v+w))*M,ee=(y+x)*M,de=(g-T)*M,oe=(y-x)*I,Pe=(1-(m+w))*I,tr=(_+b)*I,Re=(g+T)*O,q=(_-b)*O,pe=(1-(m+v))*O;return e[0]=W,e[1]=ee,e[2]=de,e[3]=0,e[4]=oe,e[5]=Pe,e[6]=tr,e[7]=0,e[8]=Re,e[9]=q,e[10]=pe,e[11]=0,e[12]=r[0]+P-(W*P+oe*z+Re*U),e[13]=r[1]+z-(ee*P+Pe*z+q*U),e[14]=r[2]+U-(de*P+tr*z+pe*U),e[15]=1,e}function Nme(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=r+r,a=i+i,u=n+n,d=r*o,h=i*o,f=i*a,m=n*o,y=n*a,g=n*u,v=s*o,_=s*a,w=s*u;return e[0]=1-f-g,e[1]=h+w,e[2]=m-_,e[3]=0,e[4]=h-w,e[5]=1-d-g,e[6]=y+v,e[7]=0,e[8]=m+_,e[9]=y-v,e[10]=1-d-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Lme(e,t,r,i,n,s,o){const a=1/(r-t),u=1/(n-i),d=1/(s-o);return e[0]=2*s*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*u,e[6]=0,e[7]=0,e[8]=(r+t)*a,e[9]=(n+i)*u,e[10]=(o+s)*d,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*d,e[15]=0,e}function Fme(e,t,r,i,n){const s=1/Math.tan(t/2);let o;return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(o=1/(i-n),e[10]=(n+i)*o,e[14]=2*n*i*o):(e[10]=-1,e[14]=-2*i),e}function Dme(e,t,r,i){const n=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),u=2/(o+a),d=2/(n+s);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=d,e[6]=0,e[7]=0,e[8]=-(o-a)*u*.5,e[9]=(n-s)*d*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e}function jme(e,t,r,i,n,s,o){const a=1/(t-r),u=1/(i-n),d=1/(s-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*d,e[11]=0,e[12]=(t+r)*a,e[13]=(n+i)*u,e[14]=(o+s)*d,e[15]=1,e}function Vme(e,t,r,i){const n=t[0],s=t[1],o=t[2];let a=n-r[0],u=s-r[1],d=o-r[2];const h=Si();if(Math.abs(a)<h&&Math.abs(u)<h&&Math.abs(d)<h)return void a$(e);let f=1/Math.sqrt(a*a+u*u+d*d);a*=f,u*=f,d*=f;const m=i[0],y=i[1],g=i[2];let v=y*d-g*u,_=g*a-m*d,w=m*u-y*a;f=Math.sqrt(v*v+_*_+w*w),f?(f=1/f,v*=f,_*=f,w*=f):(v=0,_=0,w=0);let b=u*w-d*_,T=d*v-a*w,x=a*_-u*v;f=Math.sqrt(b*b+T*T+x*x),f?(f=1/f,b*=f,T*=f,x*=f):(b=0,T=0,x=0),e[0]=v,e[1]=b,e[2]=a,e[3]=0,e[4]=_,e[5]=T,e[6]=u,e[7]=0,e[8]=w,e[9]=x,e[10]=d,e[11]=0,e[12]=-(v*n+_*s+w*o),e[13]=-(b*n+T*s+x*o),e[14]=-(a*n+u*s+d*o),e[15]=1}function Ume(e,t,r,i){const n=t[0],s=t[1],o=t[2],a=i[0],u=i[1],d=i[2];let h=n-r[0],f=s-r[1],m=o-r[2],y=h*h+f*f+m*m;y>0&&(y=1/Math.sqrt(y),h*=y,f*=y,m*=y);let g=u*m-d*f,v=d*h-a*m,_=a*f-u*h;return y=g*g+v*v+_*_,y>0&&(y=1/Math.sqrt(y),g*=y,v*=y,_*=y),e[0]=g,e[1]=v,e[2]=_,e[3]=0,e[4]=f*_-m*v,e[5]=m*g-h*_,e[6]=h*v-f*g,e[7]=0,e[8]=h,e[9]=f,e[10]=m,e[11]=0,e[12]=n,e[13]=s,e[14]=o,e[15]=1,e}function zme(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Gme(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function Bme(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function Vq(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function qme(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function Hme(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e}function Wme(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Zme(e,t){if(e===t)return!0;const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],u=e[6],d=e[7],h=e[8],f=e[9],m=e[10],y=e[11],g=e[12],v=e[13],_=e[14],w=e[15],b=t[0],T=t[1],x=t[2],M=t[3],I=t[4],O=t[5],P=t[6],z=t[7],U=t[8],W=t[9],ee=t[10],de=t[11],oe=t[12],Pe=t[13],tr=t[14],Re=t[15],q=Si();return Math.abs(r-b)<=q*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-T)<=q*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(n-x)<=q*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(s-M)<=q*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(o-I)<=q*Math.max(1,Math.abs(o),Math.abs(I))&&Math.abs(a-O)<=q*Math.max(1,Math.abs(a),Math.abs(O))&&Math.abs(u-P)<=q*Math.max(1,Math.abs(u),Math.abs(P))&&Math.abs(d-z)<=q*Math.max(1,Math.abs(d),Math.abs(z))&&Math.abs(h-U)<=q*Math.max(1,Math.abs(h),Math.abs(U))&&Math.abs(f-W)<=q*Math.max(1,Math.abs(f),Math.abs(W))&&Math.abs(m-ee)<=q*Math.max(1,Math.abs(m),Math.abs(ee))&&Math.abs(y-de)<=q*Math.max(1,Math.abs(y),Math.abs(de))&&Math.abs(g-oe)<=q*Math.max(1,Math.abs(g),Math.abs(oe))&&Math.abs(v-Pe)<=q*Math.max(1,Math.abs(v),Math.abs(Pe))&&Math.abs(_-tr)<=q*Math.max(1,Math.abs(_),Math.abs(tr))&&Math.abs(w-Re)<=q*Math.max(1,Math.abs(w),Math.abs(Re))}function Jme(e){const t=Si(),r=e[0],i=e[1],n=e[2],s=e[4],o=e[5],a=e[6],u=e[8],d=e[9],h=e[10];return Math.abs(1-(r*r+s*s+u*u))<=t&&Math.abs(1-(i*i+o*o+d*d))<=t&&Math.abs(1-(n*n+a*a+h*h))<=t}function Kme(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const Yme=Dq,Qme=Vq;Object.freeze(Object.defineProperty({__proto__:null,add:Bme,adjoint:fme,copy:Lq,determinant:mme,equals:Zme,exactEquals:Wme,frob:Gme,fromQuat:Nme,fromQuat2:Ime,fromRotation:Tme,fromRotationTranslation:jq,fromRotationTranslationScale:kme,fromRotationTranslationScaleOrigin:Pme,fromScaling:$me,fromTranslation:Sme,fromXRotation:xme,fromYRotation:Eme,fromZRotation:Mme,frustum:Lme,getRotation:Ome,getScaling:Rme,getTranslation:Ame,hasIdentityRotation:Kme,identity:a$,invert:Fq,invertOrIdentity:hme,isOrthoNormal:Jme,lookAt:Vme,mul:Yme,multiply:Dq,multiplyScalar:qme,multiplyScalarAndAdd:Hme,ortho:jme,perspective:Fme,perspectiveFromFieldOfView:Dme,rotate:vme,rotateX:wme,rotateY:_me,rotateZ:bme,scale:gme,set:dc,str:zme,sub:Qme,subtract:Vq,targetTo:Ume,translate:yme,transpose:pc},Symbol.toStringTag,{value:"Module"}));const Xme=(e,t)=>{const r=dc(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return pc(r,r)},eye=(e,t)=>{const r=dc(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return pc(r,r)},tye=(e,t)=>{const r=1-t,i=dc(e,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return pc(i,i)},rye=(e,t)=>{const r=Math.sin(t*Math.PI/180),i=Math.cos(t*Math.PI/180),n=dc(e,.213+.787*i-.213*r,.715-.715*i-.715*r,.072-.072*i+.928*r,0,.213-.213*i+.143*r,.715+.285*i+.14*r,.072-.072*i-.283*r,0,.213-.213*i-.787*r,.715-.715*i+.715*r,.072+.928*i+.072*r,0,0,0,0,1);return pc(n,n)},iye=(e,t)=>{const r=1-2*t,i=dc(e,r,0,0,t,0,r,0,t,0,0,r,t,0,0,0,1);return pc(i,i)},nye=(e,t)=>{const r=dc(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return pc(r,r)},sye=(e,t)=>{const r=1-t,i=dc(e,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return pc(i,i)};let Uq=class zq{constructor(t,r,i){this.strength=t,this.radius=r,this.threshold=i,this.type="bloom"}interpolate(t,r,i){this.strength=Li(t.strength,r.strength,i),this.radius=Li(t.radius,r.radius,i),this.threshold=Li(t.threshold,r.threshold,i)}clone(){return new zq(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:r0(this.radius),strength:this.strength,threshold:this.threshold}}},Gq=class Bq{constructor(t){this.radius=t,this.type="blur"}interpolate(t,r,i){this.radius=Math.round(Li(t.radius,r.radius,i))}clone(){return new Bq(this.radius)}toJSON(){return{type:"blur",radius:r0(this.radius)}}},fI=class qq{constructor(t,r){this.type=t,this.amount=r,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.amount=Li(t.amount,r.amount,i),this._updateMatrix()}clone(){return new qq(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||s$();switch(this.type){case"brightness":this._colorMatrix=Xme(t,this.amount);break;case"contrast":this._colorMatrix=eye(t,this.amount);break;case"grayscale":this._colorMatrix=tye(t,this.amount);break;case"invert":this._colorMatrix=iye(t,this.amount);break;case"saturate":this._colorMatrix=nye(t,this.amount);break;case"sepia":this._colorMatrix=sye(t,this.amount)}}},Hq=class Wq{constructor(t,r,i,n){this.offsetX=t,this.offsetY=r,this.blurRadius=i,this.color=n,this.type="drop-shadow"}interpolate(t,r,i){this.offsetX=Li(t.offsetX,r.offsetX,i),this.offsetY=Li(t.offsetY,r.offsetY,i),this.blurRadius=Li(t.blurRadius,r.blurRadius,i),this.color[0]=Math.round(Li(t.color[0],r.color[0],i)),this.color[1]=Math.round(Li(t.color[1],r.color[1],i)),this.color[2]=Math.round(Li(t.color[2],r.color[2],i)),this.color[3]=Li(t.color[3],r.color[3],i)}clone(){return new Wq(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:r0(this.offsetX),yoffset:r0(this.offsetY),blurRadius:r0(this.blurRadius),color:t}}},Zq=class Jq{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.angle=Li(t.angle,r.angle,i),this._updateMatrix()}clone(){return new Jq(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||s$();this._colorMatrix=rye(t,this.angle)}},Kq=class Yq{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,r,i){this.amount=Li(t.amount,r.amount,i)}clone(){return new Yq(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Li(e,t,r){return e+(t-e)*r}function r0(e){return Math.round(1e3*us(e))/1e3}function oye(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new fI(e.type,0);case"saturate":case"brightness":case"contrast":return new fI(e.type,1);case"opacity":return new Kq(1);case"hue-rotate":return new Zq(0);case"blur":return new Gq(0);case"drop-shadow":return new Hq(0,0,0,[...sk("transparent")]);case"bloom":return new Uq(0,0,1)}}function aye(e,t){const r=e.length>t.length?e:t;return(e.length>t.length?t:e).every((i,n)=>i.type===r[n].type)}function lye(e,t){const r=e.length>t.length?e:t,i=e.length>t.length?t:e;for(let n=i.length;n<r.length;n++)i.push(oye(r[n]))}function uye(e){const t=e[0];return!!t&&"type"in t}function cye(e,t){return JSON.stringify(e??null)===JSON.stringify(t??null)}const ZT=()=>j.getLogger("esri.support.basemapUtils");function dye(){return{}}function Qq(e){for(const t in e){const r=e[t];st(r),delete e[t]}}function d_(e,t){let r;if(typeof e=="string"){const i=e in lm,n=!i&&e.includes("/");if(!i&&!n){if(je.apiKey)ZT().warn(`Unable to find basemap definition for: ${e}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const s=Object.entries(lm).filter(([o,a])=>a.classic||a.is3d).map(([o])=>`"${o}"`).sort().join(", ");ZT().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${s}`)}return null}t&&(r=t[e]),r||(r=i?Lf.fromId(e):new Lf({style:{id:e}}),t&&(t[e]=r))}else r=bt(Lf,e);return r!=null&&r.destroyed&&(ZT().warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}function pye(e){let t=null;const r=yye(e),i=!(r!=null&&r.baseLayers.length);for(const n in lm){const s=wye(r,Xq(lm[n]),{mustMatchReferences:i});if(s==="equal"){t=n;break}s==="base-layers-equal"&&(t=n)}return t}function ENe(e){return!!(e!=null&&e.baseLayers.concat(e.referenceLayers).some(hye))}function hye(e){if(P5(e.url))return!0;if(e.type==="vector-tile")for(const t in e.sourceNameToSource){const r=e.sourceNameToSource[t];if(P5(r==null?void 0:r.sourceUrl))return!0}return!1}function fye(e,t){var s;if(t==null||e==null)return{spatialReference:null,updating:!1};if(t.loadStatus==="not-loaded")return t.load(),{spatialReference:null,updating:!0};if(t.spatialReference)return{spatialReference:t.spatialReference,updating:!1};if(t.baseLayers.length===0)return{spatialReference:null,updating:!1};const r=t.baseLayers.at(0);switch(r.loadStatus){case"not-loaded":r.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const i=(("supportedSpatialReferences"in r?r.supportedSpatialReferences:null)||["tileInfo"in r?(s=r.tileInfo)==null?void 0:s.spatialReference:r.spatialReference]).filter(Boolean),n=e.spatialReference;return n?{spatialReference:i.find(o=>n.equals(o))??i[0]??null,updating:!1}:{spatialReference:i[0],updating:!1}}const mye=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function P5(e){if(!e)return!1;const t=new Bu(ji(e));return!!t.authority&&mye.test(t.authority)}function yye(e){return e?!e.loaded&&e.resourceInfo?Xq(e.resourceInfo.data):{baseLayers:N5(e.baseLayers),referenceLayers:N5(e.referenceLayers)}:null}function N5(e){return(Y.isCollection(e)?e.toArray():e).map(gye)}function gye(e){var t,r;return{type:e.type,effect:"effect"in e?e.effect:void 0,url:eH("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl||""),minScale:"minScale"in e&&e.minScale!=null?e.minScale:0,maxScale:"maxScale"in e&&e.maxScale!=null?e.maxScale:0,opacity:e.opacity!=null?e.opacity:1,visible:e.visible==null||!!e.visible,sublayers:e.type!=="map-image"&&e.type!=="wms"||e.sublayers==null||(t=e.sublayers)==null?void 0:t.map(i=>({id:i.id,visible:i.visible})),activeLayerId:e.type==="wmts"?(r=e.activeLayer)==null?void 0:r.id:void 0}}function L5(e){return e.isReference||e.layerType==="ArcGISSceneServiceLayer"}function Xq(e){return e?{baseLayers:F5((e.baseMapLayers??[]).filter(t=>!L5(t))),referenceLayers:F5((e.baseMapLayers??[]).filter(t=>L5(t)))}:null}function F5(e){return e.map(t=>vye(t))}function vye(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;case"ArcGISSceneServiceLayer":t="scene";break;default:t="unknown"}return{type:t,effect:e.effect,url:eH(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:e.minScale??0,maxScale:e.maxScale??0,opacity:e.opacity??1,visible:e.visibility==null||!!e.visibility,sublayers:void 0,activeLayerId:void 0}}function wye(e,t,r){return e!=null!=(t!=null)?"not-equal":!e||!t?"equal":D5(e.baseLayers,t.baseLayers)?D5(e.referenceLayers,t.referenceLayers)?"equal":r.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal"}function D5(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!_ye(e[r],t[r]))return!1;return!0}function _ye(e,t){if(e.type!==t.type||e.url!==t.url||e.minScale!==t.minScale||e.maxScale!==t.maxScale||e.visible!==t.visible||e.opacity!==t.opacity||!cye(e.effect,t.effect))return!1;if(e.activeLayerId!=null||t.activeLayerId!=null)return e.activeLayerId===t.activeLayerId;if(e.sublayers!=null||t.sublayers!=null){if(e.sublayers==null||t.sublayers==null||e.sublayers.length!==t.sublayers.length)return!1;for(let r=0;r<e.sublayers.length;r++){const i=e.sublayers.at(r),n=t.sublayers.at(r);if((i==null?void 0:i.id)!==(n==null?void 0:n.id)||(i==null?void 0:i.visible)!==(n==null?void 0:n.visible))return!1}}return!0}function eH(e){return e?ts(e).replace(/^\s*https?:/i,"").toLowerCase():""}function tH(e){if(!e)return null;const{thumbnailUrl:t}=e;if(t)return t;const r=pye(e);return r?lm[r].thumbnailUrl:j0(e.baseLayers,bye)}function bye(e){var t;return"portalItem"in e?(t=e.portalItem)==null?void 0:t.thumbnailUrl:void 0}function Sye(e){return new B0({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const r=[];return"tables"in t&&r.push(t.tables),"layers"in t&&r.push(t.layers),r},itemFilterFunction:t=>{const r=t.parent;return!!r&&"tables"in r&&r.tables.includes(t)}})}function JT(e){for(const t of e.values())t==null||t.destroy();e.clear()}const j5={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function $ye(e){let t=null;if(typeof e=="string")if(e in j5){const r=j5[e];t=new FS({resourceInfo:{data:{layers:[r]}}})}else j.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=bt(FS,e);return t}let rH=0;const jv=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+rH++})}};return t=l([$("esri.core.Identifiable")],t),t},lk=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:rH++})}};return t=l([$("esri.core.Identifiable.NumericIdentifiable")],t),t};let V5=class extends jv(class{}){};V5=l([$("esri.core.Identifiable")],V5);async function Tye(e){var i;const t="portalItem"in e?e:{portalItem:e},{fromItem:r}=await D(async()=>{const{fromItem:n}=await import("./portalLayers-Clh1dYeE.js").then(s=>s.p);return{fromItem:n}},__vite__mapDeps([137,138,139]),import.meta.url);try{return await r(t)}catch(n){const s=t==null?void 0:t.portalItem,o=(s==null?void 0:s.id)||"unset",a=((i=s==null?void 0:s.portal)==null?void 0:i.url)||je.portalUrl;throw j.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+a+"', id: '"+o+"')",n),n}}const U5={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function KT(e,t,r,i=to){const n=new bn(BO(i)),s=ve.fromJSDate(e,{zone:n}),o=r==="decades"||r==="centuries"?"year":nH(r);return r==="decades"&&(t*=10),r==="centuries"&&(t*=100),s.plus({[o]:t}).toJSDate()}function INe(e,t,r="milliseconds"){const i=e.getTime(),n=iH(t,r,"milliseconds");return new Date(i+n)}function z5(e,t,r=to){const i=new bn(BO(r)),n=ve.fromJSDate(e,{zone:i});if(t==="decades"||t==="centuries"){const o=n.startOf("year"),{year:a}=o,u=a-a%(t==="decades"?10:100);return o.set({year:u}).toJSDate()}const s=nH(t);return n.startOf(s).toJSDate()}function iH(e,t,r){return e===0?0:e*U5[t]/U5[r]}function nH(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Rn;let ln=Rn=class extends N{static get allTime(){return G5}static get empty(){return xye}static fromArray(e){return new Rn({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(Rn.allTime)}get isEmpty(){return this.equals(Rn.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=(e==null?void 0:e.getTime())??null}clone(){return new Rn({end:this.end,start:this.start})}equals(e){var s,o,a,u;if(!e)return!1;const t=((s=this.start)==null?void 0:s.getTime())??this.start,r=((o=this.end)==null?void 0:o.getTime())??this.end,i=((a=e.start)==null?void 0:a.getTime())??e.start,n=((u=e.end)==null?void 0:u.getTime())??e.end;return t===i&&r===n}expandTo(e,t=to){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=z5(r,e,t));let i=this.end;if(i){const n=z5(i,e,t);i=i.getTime()===n.getTime()?n:KT(n,1,e,t)}return new Rn({start:r,end:i})}intersection(e){var a,u,d,h;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Rn.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=((a=this.start)==null?void 0:a.getTime())??-1/0,r=((u=this.end)==null?void 0:u.getTime())??1/0,i=((d=e.start)==null?void 0:d.getTime())??-1/0,n=((h=e.end)==null?void 0:h.getTime())??1/0;let s,o;return i>=t&&i<=r?s=i:t>=i&&t<=n&&(s=t),r>=i&&r<=n?o=r:n>=t&&n<=r&&(o=n),s==null||o==null||isNaN(s)||isNaN(o)?Rn.empty:new Rn({start:s===-1/0?null:new Date(s),end:o===1/0?null:new Date(o)})}offset(e,t,r=to){if(this.isEmpty||this.isAllTime)return this.clone();const i=new Rn,{start:n,end:s}=this;return n!=null&&(i.start=KT(n,e,t,r)),s!=null&&(i.end=KT(s,e,t,r)),i}toArray(){var e,t;return this.isEmpty?[void 0,void 0]:[((e=this.start)==null?void 0:e.getTime())??null,((t=this.end)==null?void 0:t.getTime())??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return G5.clone();const t=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Rn({start:t,end:r})}};l([c({type:Date,json:{write:{allowNull:!0}}})],ln.prototype,"end",void 0),l([G("end")],ln.prototype,"readEnd",null),l([B("end")],ln.prototype,"writeEnd",null),l([c({readOnly:!0,json:{read:!1}})],ln.prototype,"isAllTime",null),l([c({readOnly:!0,json:{read:!1}})],ln.prototype,"isEmpty",null),l([c({type:Date,json:{write:{allowNull:!0}}})],ln.prototype,"start",void 0),l([G("start")],ln.prototype,"readStart",null),l([B("start")],ln.prototype,"writeStart",null),ln=Rn=l([$("esri.time.TimeExtent")],ln);const pr=ln,G5=new ln,xye=new ln({start:void 0,end:void 0});let Eye=0,Lt=class extends cs.EventedMixin(jv(ls)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new qe(-180,-90,180,90,me.WGS84),this.id=Date.now().toString(16)+"-layer-"+Eye++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=me.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(t){const r=typeof t=="string"?{url:t}:t;return(await D(async()=>{const{fromUrl:i}=await import("./arcgisLayers-iCPmBIHq.js");return{fromUrl:i}},__vite__mapDeps([140,138,139]),import.meta.url)).fromUrl(r)}static fromPortalItem(t){return Tye(t)}initialize(){this.when().catch(t=>{Or(t)||j.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){const t=this.parent;if(t){const r=this;"layers"in t&&t.layers.includes(r)?t.layers.remove(r):"tables"in t&&t.tables.includes(r)?t.tables.remove(r):"baseLayers"in t&&t.baseLayers.includes(r)?t.baseLayers.remove(r):"referenceLayers"in t&&t.referenceLayers.includes(r)&&t.referenceLayers.remove(r),this._set("parent",null)}}get effectiveVisible(){let t=this.visible;const r=this.parent;return t&&r&&"effectiveVisible"in r&&t&&(t=r.effectiveVisible),t}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return hr(this.url)}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await Le(t,{query:{f:"json"},responseType:"json"})).data;throw new R("layer:no-attribution-data","Layer does not have attribution data")}};l([c({type:String})],Lt.prototype,"attributionDataUrl",void 0),l([c({readOnly:!0})],Lt.prototype,"effectiveVisible",null),l([c({type:qe})],Lt.prototype,"fullExtent",void 0),l([c({readOnly:!0})],Lt.prototype,"hasAttributionData",null),l([c({type:String,clonable:!1})],Lt.prototype,"id",void 0),l([c({type:Boolean,nonNullable:!0})],Lt.prototype,"legendEnabled",void 0),l([c({type:["show","hide","hide-children"]})],Lt.prototype,"listMode",void 0),l([c({type:Number,range:{min:0,max:1},nonNullable:!0})],Lt.prototype,"opacity",void 0),l([c({clonable:!1})],Lt.prototype,"parent",void 0),l([c({readOnly:!0})],Lt.prototype,"parsedUrl",null),l([c({type:Boolean,readOnly:!0})],Lt.prototype,"persistenceEnabled",void 0),l([c({type:Boolean})],Lt.prototype,"popupEnabled",void 0),l([c({type:Boolean})],Lt.prototype,"attributionVisible",void 0),l([c({type:me})],Lt.prototype,"spatialReference",void 0),l([c({type:String})],Lt.prototype,"title",void 0),l([c({readOnly:!0,json:{read:!1}})],Lt.prototype,"type",void 0),l([c()],Lt.prototype,"url",void 0),l([c({type:pr})],Lt.prototype,"visibilityTimeExtent",void 0),l([c({type:Boolean,nonNullable:!0})],Lt.prototype,"visible",void 0),Lt=l([$("esri.layers.Layer")],Lt);const sH=Lt;function mI(e,t,r){let i,n;if(e)for(let s=0,o=e.length;s<o;s++){if(i=e.at(s),(i==null?void 0:i[t])===r)return i;if((i==null?void 0:i.type)==="group"&&(n=mI(i.layers,t,r),n))return n}}const Mye=e=>{let t=class extends e{constructor(...r){super(...r),this.layers=new Y;const i=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},n=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||j.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},s=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>{if(o.item===this)return o.preventDefault(),void j.getLogger(this).error("#add()","Cannot add layer to itself.");i(o.item)}),this.layers.on("after-add",o=>n(o.item)),this.layers.on("after-remove",o=>s(o.item))])}destroy(){const r=this.layers.toArray();for(const i of r)i.destroy();this.layers.destroy()}set layers(r){this._set("layers",rc(r,this._get("layers")))}add(r,i){const n=this.layers;if(i=n.getNextIndex(i),r instanceof sH){const s=r;s.parent===this?this.reorder(s,i):n.add(s,i)}else Qo(r)?r.then(s=>{this.destroyed||this.add(s,i)}):j.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,i){const n=this.layers;let s=n.getNextIndex(i);r.slice().forEach(o=>{o.parent!==this?(n.add(o,s),s+=1):this.reorder(o,s)})}findLayerById(r){return mI(this.layers,"id",r)}findLayerByUid(r){return mI(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,i){return this.layers.reorder(r,i)}layerAdded(r){}layerRemoved(r){}};return l([c()],t.prototype,"layers",null),t=l([$("esri.support.LayersMixin")],t),t};function yI(e,t,r){if(e)for(let i=0,n=e.length;i<n;i++){const s=e.at(i);if(s[t]===r)return s;if((s==null?void 0:s.type)==="group"){const o=yI(s.tables,t,r);if(o)return o}}}const Iye=e=>{let t=class extends e{constructor(...r){super(...r),this.tables=new Y,this.addHandles([this.tables.on("after-add",i=>{const n=i.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,n.type!=="feature"&&j.getLogger(this).error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",i=>{i.item.parent=null})])}destroy(){const r=this.tables.toArray();for(const i of r)i.destroy();this.tables.destroy()}set tables(r){this._set("tables",rc(r,this._get("tables")))}findTableById(r){return yI(this.tables,"id",r)}findTableByUid(r){return yI(this.tables,"uid",r)}};return l([c()],t.prototype,"tables",null),t=l([$("esri.support.TablesMixin")],t),t};let _s=class extends Iye(Mye(cs.EventedMixin(te))){constructor(t){super(t),this.allLayers=new B0({getCollections:()=>{var r,i,n;return[(r=this.basemap)==null?void 0:r.baseLayers,(i=this.ground)==null?void 0:i.layers,this.layers,(n=this.basemap)==null?void 0:n.referenceLayers]},getChildrenFunction:r=>"layers"in r?r.layers:null}),this.allTables=Sye(this),this.basemap=null,this.editableLayers=new B0({getCollections:()=>[this.allLayers],itemFilterFunction:eme}),this.ground=new FS,this._basemapCache=dye()}destroy(){Qq(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=st(this.basemap),st(this.ground),this._set("ground",null)}castBasemap(t){return d_(t,this._basemapCache)}castGround(t){return $ye(t)??this._get("ground")}findLayerById(t){return this.allLayers.find(r=>r.id===t)}findTableById(t){return this.allTables.find(r=>r.id===t)}};l([c({readOnly:!0,dependsOn:[]})],_s.prototype,"allLayers",void 0),l([c({readOnly:!0})],_s.prototype,"allTables",void 0),l([c({type:Lf,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],_s.prototype,"basemap",void 0),l([Ne("basemap")],_s.prototype,"castBasemap",null),l([c({readOnly:!0})],_s.prototype,"editableLayers",void 0),l([c({type:FS,nonNullable:!0})],_s.prototype,"ground",void 0),l([Ne("ground")],_s.prototype,"castGround",null),l([c()],_s.prototype,"undoRedo",void 0),_s=l([$("esri.Map")],_s);const oH=_s;let i0=class extends Y{constructor(t){super(t),this.addHandles([this.on("before-add",r=>{r.item==null&&r.preventDefault()}),this.on("after-add",r=>this._own(r.item)),this.on("after-remove",r=>this._release(r.item))])}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}_ownAll(){for(const t of this.items)this._own(t)}_releaseAll(){for(const t of this.items)this._release(t)}_createNewInstance(t){return this.itemType?new(Y.ofType(this.itemType.Type))(t):new Y(t)}};function B5(e,t){return{type:e,cast:Eq,set(r){const i=rc(r,this._get(t),e);i.owner=this,this._set(t,i)}}}l([c()],i0.prototype,"owner",null),i0=l([$("esri.core.support.OwningCollection")],i0);var Fy;const DS=mr()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),aH=DS.jsonValues.slice();Hie(aH,"orthometric");const n0=mr()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let bs=Fy=class extends N{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return DS.write(e,t,r)}readHeightModel(e,t,r){return DS.read(e)||(r!=null&&r.messages&&r.messages.push(Cye(e,{context:r})),null)}readHeightUnit(e,t,r){return n0.read(e)||(r!=null&&r.messages&&r.messages.push(q5(e,{context:r})),null)}readHeightUnitService(e,t,r){return N7(e)||n0.read(e)||(r!=null&&r.messages&&r.messages.push(q5(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new Fy({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=L7(t);return new Fy({heightModel:e.heightModel,heightUnit:r??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new Fy;return t.read(e,{origin:"web-scene"}),t}};function q5(e,t){return new wn("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function Cye(e,t){return new wn("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}l([c({type:DS.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:aH,default:"ellipsoidal"}}}})],bs.prototype,"heightModel",void 0),l([B("web-scene","heightModel")],bs.prototype,"writeHeightModel",null),l([G(["web-scene","service"],"heightModel")],bs.prototype,"readHeightModel",null),l([c({type:n0.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:n0.jsonValues,write:n0.write}}}})],bs.prototype,"heightUnit",void 0),l([G("web-scene","heightUnit")],bs.prototype,"readHeightUnit",null),l([G("service","heightUnit")],bs.prototype,"readHeightUnitService",null),l([c({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],bs.prototype,"vertCRS",void 0),l([G("service","vertCRS",["vertCRS","ellipsoid","geoid"])],bs.prototype,"readVertCRS",null),bs=Fy=l([$("esri.geometry.HeightModelInfo")],bs);const l$=bs;let jS=class extends i0{constructor(t){super(t),this.addHandles(this.on("before-add",r=>{r.item!=null&&r.item.parent===this.owner&&(j.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),r.preventDefault())}))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};jS=l([$("esri.support.AnalysesCollection")],jS);async function lH(e,t){const{WhereClause:r}=await D(()=>import("./WhereClause-BJhvjWsn.js").then(i=>i.W),__vite__mapDeps([23,24]),import.meta.url);return r.create(e,{fieldsIndex:t})}function Aye(e,t){return e==="1=1"?t??e:t==="1=1"?e??t:e!=null&&e!==""?t!=null&&t!==""?`(${e}) AND (${t})`:e:t}function uk(e){return typeof e=="string"||e instanceof String}var Ff;(function(e){e.HM="HH:mm",e.HMS="HH:mm:ss",e.HMS_MS="HH:mm:ss.SSS"})(Ff||(Ff={}));const Rye=[Ff.HMS_MS,Ff.HMS,Ff.HM,"TT"],Oye="yyyy-MM-dd";Ff.HMS;function H5(e){if(!e||!uk(e))return null;const t=ve.fromFormat(e,Oye);return t.isValid?t:null}function W5(e){return e&&uk(e)?j0(Rye,t=>{const r=ve.fromFormat(e,t);return r.isValid?r:null})??null:null}function Z5(e){if(!e||!uk(e))return null;const t=ve.fromISO(e);return t.isValid?t:null}var um;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(um||(um={}));const kye=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function Pye(e){return e!=null&&kye.has(e.type)}function uH(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function cH(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function dH(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function Nye(e,t,r){const i=e==null?void 0:e.domain;if(!i)return null;switch(i.type){case"range":{const{min:n,max:s}=Lye(e);if(n!=null&&+t<n||s!=null&&+t>s)return um.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(i.codedValues==null||i.codedValues.every(n=>n==null||n.code!==t))return um.INVALID_CODED_VALUE}return null}function Lye(e,t){const r=e==null?void 0:e.domain;if(!r||r.type!=="range")return;const i="range"in r?r.range[0]:r.minValue,n="range"in r?r.range[1]:r.maxValue,s=Pye(e);return uH(e)||dH(e)||cH(e)?{...Fye(e,n,i),isInteger:s}:{min:i!=null&&typeof i=="number"?i:null,max:n!=null&&typeof n=="number"?n:null,rawMin:i,rawMax:n,isInteger:s}}function Fye(e,t,r){var i,n,s,o,a,u;return uH(e)?{min:(i=H5(r))==null?void 0:i.toMillis(),max:(n=H5(t))==null?void 0:n.toMillis(),rawMin:r,rawMax:t}:dH(e)?{min:(s=W5(r))==null?void 0:s.toMillis(),max:(o=W5(t))==null?void 0:o.toMillis(),rawMin:r,rawMax:t}:cH(e)?{min:(a=Z5(r))==null?void 0:a.toMillis(),max:(u=Z5(t))==null?void 0:u.toMillis(),rawMin:r,rawMax:t}:{max:null,min:null}}const Dye=()=>j.getLogger("esri.support.arcadeOnDemand");let YT;function pp(){return YT||(YT=(async()=>{const e=await D(()=>import("./arcadeUtils-CMP4MaPX.js").then(t=>t.i),__vite__mapDeps([141,142,24,143,130,26,15,13,16]),import.meta.url);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),YT}const jye=(e,t,r)=>pH.create(e,t,r,null,["$feature","$view"],[]),Vye=(e,t,r,i)=>pH.create(e,t,r,i,["$feature","$view"],[]);let pH=class hH{constructor(t,r,i,n,s,o,a){this.services=null,this.script=t,this.evaluate=n;const u=Array.isArray(o)?o:o==null?void 0:o.fields;this.fields=u??[],this._syntaxTree=i,this._arcade=r,this._arcadeFeature=s,this._spatialReference=a,this._referencesGeometry=r.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,r,i,n,s,o){const{arcade:a,Feature:u,Dictionary:d}=await pp(),h=r instanceof me?r:me.fromJSON(r);let f;try{f=a.parseScript(t,o)}catch(P){return Dye().error(new R("arcade-bad-expression","Failed to parse arcade script",{script:t,error:P})),null}const m=s.reduce((P,z)=>({...P,[z]:null}),{});let y=null;n!=null&&(y=new d(n),y.immutable=!0,m.$config=null);const g=a.scriptUsesGeometryEngine(f),v=g&&a.enableGeometrySupport(),_=a.scriptUsesFeatureSet(f)&&a.enableFeatureSetSupport(),w=a.scriptIsAsync(f),b=w&&a.enableAsyncSupport(),T={vars:m,spatialReference:h,useAsync:!!b};await Promise.all([v,_,b]);const x=new Set;await a.loadDependentModules(x,f,null,w,g);const M=new d;M.immutable=!1,M.setField("scale",0);const I=a.compileScript(f,T),O=(P,z)=>{var W;const U=(W=P.$view)==null?void 0:W.timeZone;return"$view"in P&&P.$view&&(M.setField("scale",typeof P.$view=="object"&&"scale"in P.$view?P.$view.scale:void 0),P.$view=M),y&&(P.$config=y),I({vars:P,spatialReference:h,services:z,timeZone:U})};return new hH(t,a,f,O,new u,i,h)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const Uye=/^([0-9_])/,zye=/[^a-z0-9_\u0080-\uffff]+/gi;function Gye(e){return e==null?null:e.trim().replaceAll(zye,"_").replace(Uye,"F$1")||null}const Bye=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],qye=["field","normalizationField"];function J5(e,t){if(e!=null&&t!=null){for(const r of Array.isArray(e)?e:[e])if(K5(Bye,r,t),"visualVariables"in r&&r.visualVariables)for(const i of r.visualVariables)K5(qye,i,t)}}function K5(e,t,r){if(e)for(const i of e){const n=_v(i,t),s=n&&typeof n!="function"&&r.get(n);s&&cr(i,s.name,t)}}function fH(e,t){var r;if(e!=null&&((r=t==null?void 0:t.fields)!=null&&r.length))if("startField"in e){const i=t.get(e.startField),n=t.get(e.endField);e.startField=(i==null?void 0:i.name)??null,e.endField=(n==null?void 0:n.name)??null}else{const i=t.get(e.startTimeField),n=t.get(e.endTimeField);e.startTimeField=(i==null?void 0:i.name)??null,e.endTimeField=(n==null?void 0:n.name)??null}}const QT=new Set;function u$(e,t){return e&&t?(QT.clear(),hp(QT,e,t),Array.from(QT).sort()):[]}function hp(e,t,r){var i;if(r)if((i=t==null?void 0:t.fields)!=null&&i.length)if(r.includes("*"))for(const{name:n}of t.fields)e.add(n);else for(const n of r)$i(e,t,n);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const n of r)n!=null&&e.add(n)}}function $i(e,t,r){if(typeof r=="string")if(t){const i=t.get(r);i&&e.add(i.name)}else e.add(r)}function kNe(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map(r=>r.name):t}function PNe(e,t,r=1){if(!t||!e)return[];if(t.includes("*"))return["*"];const i=u$(e,t);return i.length/e.fields.length>=r?["*"]:i}async function pi(e,t,r){var s;if(!r)return;const{arcadeUtils:i}=await pp(),n=i.extractFieldNames(r,(s=t==null?void 0:t.fields)==null?void 0:s.map(o=>o.name));for(const o of n)$i(e,t,o)}async function mH(e,t,r){if(r&&r!=="1=1"){const i=await lH(r,t);if(!i.isStandardized)throw new R("fieldUtils:collectFilterFields","Where clause is not standardized",{where:r});hp(e,t,i.fieldNames)}}function Hye({displayField:e,fields:t}){return e||(t!=null&&t.length?XT(t,"name-or-title")||XT(t,"unique-identifier")||XT(t,"type-or-category")||Wye(t):null)}function Wye(e){for(const t of e){if(!(t!=null&&t.name))continue;const r=t.name.toLowerCase();if(r.includes("name")||r.includes("title"))return t.name}return null}function XT(e,t){for(const r of e)if(r!=null&&r.valueType&&r.valueType===t)return r.name;return null}async function NNe(e,t){var i;if(!t)return;const r=(i=t.elevationInfo)==null?void 0:i.featureExpressionInfo;return r?r.collectRequiredFields(e,t.fieldsIndex):void 0}function Zye(e,t,r){r.onStatisticExpression?pi(e,t,r.onStatisticExpression.expression):e.add(r.onStatisticField)}async function LNe(e,t,r){if(!t||!r||!("fields"in r))return;const i=[],n=r.popupTemplate;i.push(Jye(e,t,n)),r.fields&&i.push(...r.fields.map(async s=>Zye(e,t.fieldsIndex,s))),await Promise.all(i)}async function Jye(e,t,r){const i=[];r!=null&&r.expressionInfos&&i.push(...r.expressionInfos.map(s=>pi(e,t.fieldsIndex,s.expression)));const n=r==null?void 0:r.content;if(Array.isArray(n))for(const s of n)s.type==="expression"&&s.expressionInfo&&i.push(pi(e,t.fieldsIndex,s.expressionInfo.expression));await Promise.all(i)}async function FNe(e,t,r){t&&(t.timeInfo&&(r!=null&&r.timeExtent)&&hp(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&hp(e,t.fieldsIndex,[t.floorInfo.floorField]),(r==null?void 0:r.where)!=null&&await mH(e,t.fieldsIndex,r.where))}async function DNe(e,t,r){t&&r&&await Promise.all(r.map(i=>Kye(e,t,i)))}async function Kye(e,t,r){t&&r&&(r.valueExpression?await pi(e,t.fieldsIndex,r.valueExpression):r.field&&$i(e,t.fieldsIndex,r.field))}function jNe(e){return e?u$(e.fieldsIndex,yH(e)):[]}function Yye(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?u$(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}const Qye=new Set(["oid","global-id","guid"]),Xye=new Set(["oid","global-id"]),ege=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function tge(e){const t=new Set;gH(e).forEach(i=>t.add(i)),Yye(e).forEach(i=>t.add(i.toLowerCase()));const r=e&&"infoFor3D"in e?e.infoFor3D:void 0;return r&&(Object.values(r.assetMapFieldRoles).forEach(i=>t.add(i.toLowerCase())),Object.values(r.transformFieldRoles).forEach(i=>t.add(i.toLowerCase()))),Array.from(t)}function yH(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:r,creatorField:i,editDateField:n,editorField:s}=t;return[r,i,n,s].filter(Boolean)}function gH(e){return yH(e).map(t=>t.toLowerCase())}function rge(e,t){var r;return e.editable&&!Qye.has(e.type)&&!gH(t).includes(((r=e.name)==null?void 0:r.toLowerCase())??"")}function ige(e,t){var i;const r=((i=e.name)==null?void 0:i.toLowerCase())??"";return!((t==null?void 0:t.objectIdField)!=null&&r===t.objectIdField.toLowerCase()||(t==null?void 0:t.globalIdField)!=null&&r===t.globalIdField.toLowerCase()||tge(t).includes(r)||Xye.has(e.type)||ege.some(n=>n.test(r)))}async function VNe(e,t){const{labelingInfo:r,fieldsIndex:i}=t;r!=null&&r.length&&await Promise.all(r.map(n=>nge(e,i,n)))}async function nge(e,t,r){if(!r)return;const i=r.getLabelExpression(),n=r.where;if(i.type==="arcade")await pi(e,t,i.expression);else{const s=i.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{$i(e,t,o.slice(1,-1))})}await mH(e,t,n)}function sge(e){const t=e.defaultValue;return t!==void 0&&_H(e,t)?t:e.nullable?null:void 0}function UNe(e){const t=typeof e=="string"?{type:e}:e;return $H(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function vH(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function oge(e){return e===null||vH(e)}function age(e){return e===null||Number.isInteger(e)}function wH(e){return e!=null&&typeof e=="string"}function lge(e){return e===null||wH(e)}function uge(){return!0}function _H(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":r=e.nullable?age:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?oge:vH;break;case"string":case"esriFieldTypeString":r=e.nullable?lge:wH;break;default:r=uge}return arguments.length===1?r:r(t)}const cge=["integer","small-integer","big-integer"],dge=["single","double"],pge=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],hge=["esriFieldTypeSingle","esriFieldTypeDouble"],bH=new Set([...cge,...pge]),fge=new Set([...dge,...hge]),mge=Vz(bH,fge);function yge(e){return e!=null&&bH.has(e.type)}function SH(e){return e!=null&&mge.has(e.type)}function $H(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function gge(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function zNe(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function GNe(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function vge(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function Y5(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function Q5(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function BNe(e,t){return wge(e,t)===null}var VS,US;function qNe(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function wge(e,t){return e==null||e.nullable&&t===null?null:SH(e)&&!_ge(e.type,Number(t))?VS.OUT_OF_RANGE:_H(e,t)?e.domain?Nye(e,t):null:US.INVALID_TYPE}function _ge(e,t){const r=typeof e=="string"?TH(e):e;if(!r)return!1;const i=r.min,n=r.max;return r.isInteger?Number.isInteger(t)&&t>=i&&t<=n:t>=i&&t<=n}function TH(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return bge;case"esriFieldTypeInteger":case"integer":return Sge;case"esriFieldTypeBigInteger":case"big-integer":return $ge;case"esriFieldTypeSingle":case"single":return Tge;case"esriFieldTypeDouble":case"double":return xge}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(VS||(VS={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(US||(US={}));const bge={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},Sge={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},$ge={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},Tge={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},xge={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function HNe(e,t,r){switch(e){case um.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case um.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case US.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case VS.OUT_OF_RANGE:{const{min:i,max:n}=TH(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${i} to ${n}`}}}function WNe(e,t){return!Ege(e,t,null)}function Ege(e,t,r){if(!(t!=null&&t.attributes)||!e)return!0;const i=new Set(Object.keys(t.attributes));let n=!1;for(const s of e)if(!i.has(s)&&(n=!0,r==null))break;return n}function Mge(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}function xH(e){const t=e==null?void 0:e.match(/{[^}]+}/g);return t?t.map(r=>r.slice(1,-1).split(":")[0].trim()):[]}let p_=class extends N{constructor(t){super(t),this.type=null}};l([c({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],p_.prototype,"type",void 0),p_=l([$("esri.popup.content.Content")],p_);const vl=p_;var gI;let jc=gI=class extends vl{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new gI({description:this.description,displayType:this.displayType,title:this.title})}};l([c({type:String,json:{write:!0}})],jc.prototype,"description",void 0),l([c({type:["auto","preview","list"],json:{write:!0}})],jc.prototype,"displayType",void 0),l([c({type:String,json:{write:!0}})],jc.prototype,"title",void 0),l([c({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],jc.prototype,"type",void 0),jc=gI=l([$("esri.popup.content.AttachmentsContent")],jc);const cm=jc;var vI;let Vc=vI=class extends vl{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new vI({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?C(this.outFields):null})}};l([c()],Vc.prototype,"creator",void 0),l([c()],Vc.prototype,"destroyer",void 0),l([c()],Vc.prototype,"outFields",void 0),l([c({type:["custom"],readOnly:!0})],Vc.prototype,"type",void 0),Vc=vI=l([$("esri.popup.content.CustomContent")],Vc);const Ige=Vc;var wI;let Xp=wI=class extends N{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new wI({title:this.title,expression:this.expression})}};l([c({type:String,json:{write:!0}})],Xp.prototype,"title",void 0),l([c({type:String,json:{write:!0}})],Xp.prototype,"expression",void 0),l([c({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Xp.prototype,"returnType",void 0),Xp=wI=l([$("esri.popup.ElementExpressionInfo")],Xp);const Cge=Xp;var _I;let Dy=_I=class extends vl{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new _I({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};l([c({type:Cge,json:{write:!0}})],Dy.prototype,"expressionInfo",void 0),l([c({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Dy.prototype,"type",void 0),Dy=_I=l([$("esri.popup.content.ExpressionContent")],Dy);const c$=Dy;let eh=class extends Me(N){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};l([X(gde)],eh.prototype,"dateFormat",void 0),l([c({type:Boolean,json:{write:!0}})],eh.prototype,"digitSeparator",void 0),l([c({type:ke,json:{write:!0}})],eh.prototype,"places",void 0),eh=l([$("esri.popup.support.FieldInfoFormat")],eh);const h_=eh;var bI;let Ss=bI=class extends N{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var e;return new bI({fieldName:this.fieldName,format:(e=this.format)==null?void 0:e.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};l([c({type:String,json:{write:!0}})],Ss.prototype,"fieldName",void 0),l([c({type:h_,json:{write:!0}})],Ss.prototype,"format",void 0),l([c({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Ss.prototype,"isEditable",void 0),l([c({type:String,json:{write:!0}})],Ss.prototype,"label",void 0),l([X(new _e({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Ss.prototype,"stringFieldOption",void 0),l([c({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Ss.prototype,"statisticType",void 0),l([c({type:String,json:{write:!0}})],Ss.prototype,"tooltip",void 0),l([c({type:Boolean,json:{write:!0}})],Ss.prototype,"visible",void 0),Ss=bI=l([$("esri.popup.FieldInfo")],Ss);const ck=Ss;var SI;let ma=SI=class extends vl{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(r=>r.toJSON())}clone(){return new SI(C({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};l([c({type:Object,json:{write:!0}})],ma.prototype,"attributes",void 0),l([c({type:String,json:{write:!0}})],ma.prototype,"description",void 0),l([c({type:[ck]})],ma.prototype,"fieldInfos",void 0),l([B("fieldInfos")],ma.prototype,"writeFieldInfos",null),l([c({type:String,json:{write:!0}})],ma.prototype,"title",void 0),l([c({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],ma.prototype,"type",void 0),ma=SI=l([$("esri.popup.content.FieldsContent")],ma);const dm=ma;let Uc=class extends N{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};l([c({type:String,json:{write:!0}})],Uc.prototype,"altText",void 0),l([c({type:String,json:{write:!0}})],Uc.prototype,"caption",void 0),l([c({type:String,json:{write:!0}})],Uc.prototype,"title",void 0),l([c({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Uc.prototype,"type",void 0),Uc=l([$("esri.popup.content.mixins.MediaInfo")],Uc);const dk=Uc;var $I;let zc=$I=class extends te{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var e;return new $I({color:(e=this.color)==null?void 0:e.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};l([c()],zc.prototype,"color",void 0),l([c()],zc.prototype,"fieldName",void 0),l([c()],zc.prototype,"tooltip",void 0),l([c()],zc.prototype,"value",void 0),zc=$I=l([$("esri.popup.content.support.ChartMediaInfoValueSeries")],zc);const Age=zc;var TI;let jl=TI=class extends N{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new TI({colors:C(this.colors),fields:C(this.fields),normalizeField:this.normalizeField,series:C(this.series),tooltipField:this.tooltipField})}};l([c({type:[le],json:{type:[[ke]],write:!0}})],jl.prototype,"colors",void 0),l([c({type:[String],json:{write:!0}})],jl.prototype,"fields",void 0),l([c({type:String,json:{write:!0}})],jl.prototype,"normalizeField",void 0),l([c({type:[Age],json:{read:!1}})],jl.prototype,"series",void 0),l([c({type:String,json:{write:!0}})],jl.prototype,"tooltipField",void 0),jl=TI=l([$("esri.popup.content.support.ChartMediaInfoValue")],jl);const Rge=jl;let jy=class extends dk{constructor(t){super(t),this.type=null,this.value=void 0}};l([c({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],jy.prototype,"type",void 0),l([c({type:Rge,json:{write:!0}})],jy.prototype,"value",void 0),jy=l([$("esri.popup.content.mixins.ChartMediaInfo")],jy);const d$=jy,p$=mr()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var xI;let f_=xI=class extends d${constructor(e){super(e),this.type="bar-chart"}clone(){var e;return new xI({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};l([c({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:p$.write}})],f_.prototype,"type",void 0),f_=xI=l([$("esri.popup.content.BarChartMediaInfo")],f_);const EH=f_;var EI;let m_=EI=class extends d${constructor(e){super(e),this.type="column-chart"}clone(){var e;return new EI({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};l([c({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:p$.write}})],m_.prototype,"type",void 0),m_=EI=l([$("esri.popup.content.ColumnChartMediaInfo")],m_);const MH=m_;var MI;let Vy=MI=class extends N{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new MI({linkURL:this.linkURL,sourceURL:this.sourceURL})}};l([c({type:String,json:{write:!0}})],Vy.prototype,"linkURL",void 0),l([c({type:String,json:{write:!0}})],Vy.prototype,"sourceURL",void 0),Vy=MI=l([$("esri.popup.content.support.ImageMediaInfoValue")],Vy);const Oge=Vy;var II;let th=II=class extends dk{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var e;return new II({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(e=this.value)==null?void 0:e.clone()})}};l([c({type:Number,json:{write:!0}})],th.prototype,"refreshInterval",void 0),l([c({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],th.prototype,"type",void 0),l([c({type:Oge,json:{write:!0}})],th.prototype,"value",void 0),th=II=l([$("esri.popup.content.ImageMediaInfo")],th);const IH=th;var CI;let y_=CI=class extends d${constructor(e){super(e),this.type="line-chart"}clone(){var e;return new CI({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};l([c({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:p$.write}})],y_.prototype,"type",void 0),y_=CI=l([$("esri.popup.content.LineChartMediaInfo")],y_);const CH=y_;var AI;let g_=AI=class extends d${constructor(e){super(e),this.type="pie-chart"}clone(){var e;return new AI({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};l([c({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:p$.write}})],g_.prototype,"type",void 0),g_=AI=l([$("esri.popup.content.PieChartMediaInfo")],g_);const AH=g_,RI={base:dk,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":EH,"column-chart":MH,"line-chart":CH,"pie-chart":AH,image:IH}};var OI;let $s=OI=class extends vl{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?IH.fromJSON(t):t.type==="barchart"?EH.fromJSON(t):t.type==="columnchart"?MH.fromJSON(t):t.type==="linechart"?CH.fromJSON(t):t.type==="piechart"?AH.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(r=>r.toJSON())}clone(){return new OI(C({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};l([c()],$s.prototype,"activeMediaInfoIndex",void 0),l([c({type:Object,json:{write:!0}})],$s.prototype,"attributes",void 0),l([c({type:String,json:{write:!0}})],$s.prototype,"description",void 0),l([c({types:[RI]})],$s.prototype,"mediaInfos",void 0),l([G("mediaInfos")],$s.prototype,"readMediaInfos",null),l([B("mediaInfos")],$s.prototype,"writeMediaInfos",null),l([c({type:String,json:{write:!0}})],$s.prototype,"title",void 0),l([c({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],$s.prototype,"type",void 0),$s=OI=l([$("esri.popup.content.MediaContent")],$s);const Q0=$s;var kI;let Uy=kI=class extends N{constructor(e){super(e),this.field=null,this.order=null}clone(){return new kI({field:this.field,order:this.order})}};l([c({type:String,json:{write:!0}})],Uy.prototype,"field",void 0),l([c({type:["asc","desc"],json:{write:!0}})],Uy.prototype,"order",void 0),Uy=kI=l([$("esri.popup.support.RelatedRecordsInfoFieldOrder")],Uy);const pk=Uy;let mo=class extends Me(vl){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};l([c({type:String,json:{write:!0}})],mo.prototype,"description",void 0),l([c({type:Number,json:{type:ke,write:!0}})],mo.prototype,"displayCount",void 0),l([c({type:["list"],json:{write:!0}})],mo.prototype,"displayType",void 0),l([c({type:[pk],json:{write:!0}})],mo.prototype,"orderByFields",void 0),l([c({type:Number,json:{type:ke,write:!0}})],mo.prototype,"relationshipId",void 0),l([c({type:String,json:{write:!0}})],mo.prototype,"title",void 0),l([c({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],mo.prototype,"type",void 0),mo=l([$("esri.popup.content.RelationshipContent")],mo);const X0=mo;var PI;let zy=PI=class extends vl{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new PI({text:this.text})}};l([c({type:String,json:{write:!0}})],zy.prototype,"text",void 0),l([c({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],zy.prototype,"type",void 0),zy=PI=l([$("esri.popup.content.TextContent")],zy);const ev=zy;let yo=class extends Me(N){constructor(t){super(t),this.title=null,this.description=null,this.type=null,this.open=!1,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};l([c({type:String,json:{write:!0}})],yo.prototype,"title",void 0),l([c({type:String,json:{write:!0}})],yo.prototype,"description",void 0),l([c({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],yo.prototype,"type",void 0),l([c({type:Boolean,json:{read:!1}})],yo.prototype,"open",void 0),l([c({type:Number,json:{type:ke,write:!0}})],yo.prototype,"associatedNetworkSourceId",void 0),l([c({type:Number,json:{type:ke,write:!0}})],yo.prototype,"associatedAssetGroup",void 0),l([c({type:Number,json:{type:ke,write:!0}})],yo.prototype,"associatedAssetType",void 0),yo=l([$("esri.popup.support.UtilityNetworkAssociationType")],yo);const kge=yo;let Gc=class extends Me(vl){constructor(t){super(t),this.description=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};l([c({type:String,json:{write:!0}})],Gc.prototype,"description",void 0),l([c({type:String,json:{write:!0}})],Gc.prototype,"title",void 0),l([c({type:[kge],json:{write:!0}})],Gc.prototype,"associationTypes",void 0),l([X({utilityNetworkAssociations:"utility-network-associations"})],Gc.prototype,"type",void 0),Gc=l([$("esri.popup.content.UtilityNetworkAssociationsContent")],Gc);const hk=Gc,Pge={base:null,key:"type",typeMap:{attachment:cm,media:Q0,text:ev,expression:c$,field:dm,relationship:X0,utilityNetworkAssociations:hk}},Nge={base:null,key:"type",typeMap:{attachment:cm,media:Q0,text:ev,expression:c$,field:dm,relationship:X0}};var NI;let Bc=NI=class extends N{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new NI({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};l([c({type:String,json:{write:!0}})],Bc.prototype,"name",void 0),l([c({type:String,json:{write:!0}})],Bc.prototype,"title",void 0),l([c({type:String,json:{write:!0}})],Bc.prototype,"expression",void 0),l([c({type:["string","number"],json:{write:!0}})],Bc.prototype,"returnType",void 0),Bc=NI=l([$("esri.popup.ExpressionInfo")],Bc);const Lge=Bc;var LI;let Gy=LI=class extends N{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new LI({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};l([c({type:Boolean,json:{write:!0}})],Gy.prototype,"returnTopmostRaster",void 0),l([c({type:Boolean,json:{write:!0}})],Gy.prototype,"showNoDataRecords",void 0),Gy=LI=l([$("esri.popup.LayerOptions")],Gy);const Fge=Gy;var FI;let By=FI=class extends N{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new FI({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?C(this.orderByFields):null})}};l([c({type:Boolean,json:{write:!0}})],By.prototype,"showRelatedRecords",void 0),l([c({type:[pk],json:{write:!0}})],By.prototype,"orderByFields",void 0),By=FI=l([$("esri.popup.RelatedRecordsInfo")],By);const X5=By;var DI;let On=DI=class extends jv(te){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new DI({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};l([c()],On.prototype,"active",void 0),l([c()],On.prototype,"className",void 0),l([c()],On.prototype,"disabled",void 0),l([c()],On.prototype,"icon",void 0),l([c()],On.prototype,"id",void 0),l([c()],On.prototype,"indicator",void 0),l([c()],On.prototype,"title",void 0),l([c()],On.prototype,"type",void 0),l([c()],On.prototype,"visible",void 0),On=DI=l([$("esri.support.actions.ActionBase")],On);const h$=On;var jI;let v_=jI=class extends h${constructor(e){super(e),this.image=null,this.type="button"}clone(){return new jI({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};l([c()],v_.prototype,"image",void 0),v_=jI=l([$("esri.support.actions.ActionButton")],v_);const Vv=v_;var VI;let qy=VI=class extends h${constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new VI({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};l([c()],qy.prototype,"image",void 0),l([c()],qy.prototype,"value",void 0),qy=VI=l([$("esri.support.actions.ActionToggle")],qy);const fk=qy,cy="relationships/",eF="expression/",Dge=Y.ofType({key:"type",defaultKeyValue:"button",base:h$,typeMap:{button:Vv,toggle:fk}}),jge={base:vl,key:"type",typeMap:{media:Q0,custom:Ige,text:ev,attachments:cm,fields:dm,expression:c$,relationship:X0,utilityNetworkAssociations:hk}},RH=new Set(["attachments","fields","media","text","expression","relationship"]),Vge=new Set([...RH,"utility-network-associations"]);let Jt=class extends Me(N){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map(r=>ss(jge,r)):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||Qo(t)?t:(j.getLogger(this).error("content error","unsupported content value",{value:t}),null)}readContent(t,r){const{popupElements:i}=r;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(r.description,r.mediaInfos,i):this._readPopupInfo(r)}writeWebSceneContent(t,r,i,n){this._writePopupTemplateContent(t,r,n)}writeWebMapContent(t,r,i,n){this._writePopupTemplateContent(t,r,n)}writeFieldInfos(t,r,i,n){const{content:s}=this,o=Array.isArray(s)?s:null;if(t){const a=o?o.filter(d=>d.type==="fields"):[],u=a.length&&a.every(d=>{var h;return(h=d.fieldInfos)==null?void 0:h.length});r.fieldInfos=t.filter(Boolean).map(d=>{const h=d.toJSON(n);return u&&(h.visible=!1),h})}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,r)}writeLayerOptions(t,r,i,n){r[i]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(n)}writeTitle(t,r){r.title=t||""}async collectRequiredFields(t,r){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(t,r,[...i,...this._getContentExpressionInfos(this.content,i)]),hp(t,r,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const r=new Set;return await this.collectRequiredFields(r,t),[...r].sort()}_writePopupTemplateContent(t,r,i){typeof t!="string"?Array.isArray(t)&&(r.popupElements=t.filter(n=>(i==null?void 0:i.origin)==="web-scene"?RH.has(n.type):Vge.has(n.type)).map(n=>n==null?void 0:n.toJSON(i)),r.popupElements.forEach(n=>{n.type==="attachments"?this._writeAttachmentContent(r):n.type==="media"?this._writeMediaContent(n,r):n.type==="text"?this._writeTextContent(n,r):n.type==="relationship"&&this._writeRelationshipContent(n,r)})):r.description=t}_writeFieldsContent(t,r){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const i=C(t.fieldInfos);Array.isArray(r.fieldInfos)?i.forEach(n=>{const s=r.fieldInfos.find(o=>{var a,u;return((a=o.fieldName)==null?void 0:a.toLowerCase())===((u=n.fieldName)==null?void 0:u.toLowerCase())});s?s.visible=!0:r.fieldInfos.push(n)}):r.fieldInfos=i}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,r){var s,o;const i=((s=t.orderByFields)==null?void 0:s.map(a=>this._toFieldOrderJSON(a,t.relationshipId)))||[],n=[...((o=r.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...i];r.relatedRecordsInfo={showRelatedRecords:!0,...(n==null?void 0:n.length)&&{orderByFields:n}}}_writeTextContent(t,r){!r.description&&t.text&&(r.description=t.text)}_writeMediaContent(t,r){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const i=C(t.mediaInfos);Array.isArray(r.mediaInfos)?r.mediaInfos=[...r.mediaInfos,...i]:r.mediaInfos=i}_readPopupInfoElements(t,r,i){const n={description:!1,mediaInfos:!1};return i.map(s=>s.type==="media"?(s.mediaInfos||!r||n.mediaInfos||(s.mediaInfos=r,n.mediaInfos=!0),Q0.fromJSON(s)):s.type==="text"?(s.text||!t||n.description||(s.text=t,n.description=!0),ev.fromJSON(s)):s.type==="attachments"?cm.fromJSON(s):s.type==="fields"?dm.fromJSON(s):s.type==="expression"?c$.fromJSON(s):s.type==="relationship"?X0.fromJSON(s):s.type==="utilityNetworkAssociations"?hk.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(t){const{field:r,order:i}=t;if(!(r!=null&&r.startsWith(cy)))return null;const n=r.replace(cy,"").split("/");if(n.length!==2)return null;const s=parseInt(n[0],10),o=n[1];return typeof s=="number"&&o?X0.fromJSON({relationshipId:s,orderByFields:[{field:o,order:i}]}):null}_toFieldOrderJSON(t,r){const{order:i,field:n}=t;return{field:`${cy}${r}/${n}`,order:i}}_readPopupInfo({description:t,mediaInfos:r,showAttachments:i,relatedRecordsInfo:n={showRelatedRecords:!1}}){const s=[];t?s.push(new ev({text:t})):s.push(new dm),Array.isArray(r)&&r.length&&s.push(Q0.fromJSON({mediaInfos:r})),i&&s.push(cm.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=n;return o&&(a!=null&&a.length)&&a.forEach(u=>{const d=this._toRelationshipContent(u);d&&s.push(d)}),s.length?s:t}_getContentElementFields(t){const r=t==null?void 0:t.type;if(r==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(r==="custom")return t.outFields||[];if(r==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(r==="media"){const i=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...i.reduce((n,s)=>[...n,...this._getMediaInfoFields(s)],[])]}return r==="text"?this._extractFieldNames(t.text):r==="relationship"||r==="utility-network-associations"?[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)]:[]}_getMediaInfoFields(t){const{caption:r,title:i,value:n}=t,s=n||{},{fields:o,normalizeField:a,tooltipField:u,sourceURL:d,linkURL:h}=s,f=[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(d),...this._extractFieldNames(h),...o??[]];return a&&f.push(a),u&&f.push(u),f}_getContentExpressionInfos(t,r){return Array.isArray(t)?t.reduce((i,n)=>[...i,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]],r):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce((r,i)=>[...r,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(t,r,i){i&&await Promise.all(i.map(n=>pi(t,r,n.expression)))}_getFieldInfoFields(t){return t?t.filter(({fieldName:r,visible:i})=>!(i!==void 0&&!i||!r||r.startsWith(cy)||r.startsWith(eF))).map(r=>r.fieldName):[]}_getActionsFields(t){return t?t.toArray().reduce((r,i)=>[...r,...this._getActionFields(i)],[]):[]}_getActionFields(t){const{className:r,title:i,type:n}=t,s=n==="button"||n==="toggle"?t.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(s)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){return xH(t).filter(r=>!(r.indexOf(cy)===0||r.indexOf(eF)===0))}};l([c({type:Dge})],Jt.prototype,"actions",void 0),l([c()],Jt.prototype,"content",void 0),l([Ne("content")],Jt.prototype,"castContent",null),l([G("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Jt.prototype,"readContent",null),l([B("web-scene","content",{popupElements:{type:Y.ofType(Nge)},showAttachments:{type:Boolean},mediaInfos:{type:Y.ofType(RI)},description:{type:String},relatedRecordsInfo:{type:X5}})],Jt.prototype,"writeWebSceneContent",null),l([B("content",{popupElements:{type:Y.ofType(Pge)},showAttachments:{type:Boolean},mediaInfos:{type:Y.ofType(RI)},description:{type:String},relatedRecordsInfo:{type:X5}})],Jt.prototype,"writeWebMapContent",null),l([c({type:[Lge],json:{write:!0}})],Jt.prototype,"expressionInfos",void 0),l([c({type:[ck]})],Jt.prototype,"fieldInfos",void 0),l([B("fieldInfos")],Jt.prototype,"writeFieldInfos",null),l([c({type:Fge})],Jt.prototype,"layerOptions",void 0),l([B("layerOptions")],Jt.prototype,"writeLayerOptions",null),l([c({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Jt.prototype,"lastEditInfoEnabled",void 0),l([c()],Jt.prototype,"outFields",void 0),l([c()],Jt.prototype,"overwriteActions",void 0),l([c()],Jt.prototype,"returnGeometry",void 0),l([c({json:{type:String}})],Jt.prototype,"title",void 0),l([B("title")],Jt.prototype,"writeTitle",null),Jt=l([$("esri.PopupTemplate")],Jt);const hc=Jt,tF=new _e({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let Uge=0,rh=class extends N{constructor(t){super(t),this.id="sym"+Uge++,this.type=null,this.color=new le([0,0,0,1])}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,r){}hash(){return JSON.stringify(this.toJSON())}clone(){}};l([c({type:tF.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:tF.write}}})],rh.prototype,"type",void 0),l([c({type:le,json:{write:{allowNull:!0}}})],rh.prototype,"color",void 0),l([G("color")],rh.prototype,"readColor",null),rh=l([$("esri.symbols.Symbol")],rh);const Br=rh;var UI;let Vl=UI=class extends Br{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){var r;if(((r=this.data)==null?void 0:r.type)==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const n=i.map(s=>{const o=s.valueExpressionInfo;return o?pi(e,t,o.expression):null});await Promise.all(n)}}}clone(){return new UI({data:C(this.data)})}hash(){return rz(JSON.stringify(this.data)).toString()}};l([c({json:{write:!1}})],Vl.prototype,"color",void 0),l([c({json:{write:!0}})],Vl.prototype,"data",void 0),l([G("data",["symbol"])],Vl.prototype,"readData",null),l([B("data",{})],Vl.prototype,"writeData",null),l([X({CIMSymbolReference:"cim"},{readOnly:!0})],Vl.prototype,"type",void 0),Vl=UI=l([$("esri.symbols.CIMSymbol")],Vl);const wl=Vl;let ih=class extends N{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,r,i){t||(r[i]=t)}};l([c({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],ih.prototype,"enabled",void 0),l([B("enabled")],ih.prototype,"writeEnabled",null),l([c({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],ih.prototype,"type",void 0),ih=l([$("esri.symbols.Symbol3DLayer")],ih);const Xo=ih;function zge(e,t){const r=t.transparency!=null?Y0(t.transparency):1,i=t.color;return i&&Array.isArray(i)?new le([i[0]||0,i[1]||0,i[2]||0,r]):null}function Gge(e,t){t.color=e.toJSON().slice(0,3);const r=n$(e.a);r!==0&&(t.transparency=r)}const fc={type:le,json:{type:[ke],default:null,read:{source:["color","transparency"],reader:zge},write:{target:{color:{type:[ke]},transparency:{type:ke}},writer:Gge}}},Ko={type:Number,cast:Fe,json:{write:!0}};let qc=class extends N{constructor(t){super(t),this.color=new le([0,0,0,1]),this.extensionLength=0,this.size=us(1)}clone(){}cloneProperties(){return{color:C(this.color),size:this.size,extensionLength:this.extensionLength}}};l([c({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],qc.prototype,"type",void 0),l([c(fc)],qc.prototype,"color",void 0),l([c({...Ko,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],qc.prototype,"extensionLength",void 0),l([c(Ko)],qc.prototype,"size",void 0),qc=l([$("esri.symbols.edges.Edges3D")],qc);const mk=qc;var zI;let w_=zI=class extends mk{constructor(e){super(e),this.type="sketch"}clone(){return new zI(this.cloneProperties())}};l([X({sketch:"sketch"},{readOnly:!0})],w_.prototype,"type",void 0),w_=zI=l([$("esri.symbols.edges.SketchEdges3D")],w_);const Bge=w_;var GI;let __=GI=class extends mk{constructor(e){super(e),this.type="solid"}clone(){return new GI(this.cloneProperties())}};l([X({solid:"solid"},{readOnly:!0})],__.prototype,"type",void 0),__=GI=l([$("esri.symbols.edges.SolidEdges3D")],__);const OH=__,kH={types:{key:"type",base:mk,typeMap:{solid:OH,sketch:Bge}},json:{write:!0}};var BI;let fn=BI=class extends N{constructor(e){super(e),this.color=null,this.emissiveFactor=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?HO(this.emissiveFactor):null};return new BI(e)}};l([c(fc)],fn.prototype,"color",void 0),l([c({type:[Number],json:{write:!1}})],fn.prototype,"emissiveFactor",void 0),fn=BI=l([$("esri.symbols.support.Symbol3DMaterial")],fn);var qI;let Ul=qI=class extends Xo{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var e,t;return new qI({edges:(e=this.edges)==null?void 0:e.clone(),enabled:this.enabled,material:(t=this.material)==null?void 0:t.clone(),castShadows:this.castShadows,size:this.size})}};l([X({Extrude:"extrude"},{readOnly:!0})],Ul.prototype,"type",void 0),l([c({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Ul.prototype,"size",void 0),l([c({type:fn,json:{write:!0}})],Ul.prototype,"material",void 0),l([c({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ul.prototype,"castShadows",void 0),l([c(kH)],Ul.prototype,"edges",void 0),Ul=qI=l([$("esri.symbols.ExtrudeSymbol3DLayer")],Ul);const PH=Ul;let Hy=class extends Br{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};l([X({esriSLS:"simple-line"},{readOnly:!0})],Hy.prototype,"type",void 0),l([c({type:Number,cast:Fe,json:{write:!0}})],Hy.prototype,"width",void 0),Hy=l([$("esri.symbols.LineSymbol")],Hy);const qge=Hy,Hge=["begin","end","begin-end"],NH=["arrow","circle","square","diamond","cross","x"];var HI;let go=HI=class extends N{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,r,i){t[r]=(i==null?void 0:i.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,r,i){(i==null?void 0:i.origin)==="web-map"||(t[r]=e)}clone(){return new HI({color:C(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};l([c({type:["begin","end","begin-end"],json:{write:!0}})],go.prototype,"placement",void 0),l([X({"line-marker":"line-marker"},{readOnly:!0}),c({json:{origins:{"web-map":{write:!1}}}})],go.prototype,"type",void 0),l([c({type:NH})],go.prototype,"style",void 0),l([B("style")],go.prototype,"writeStyle",null),l([c({type:le,value:null,json:{write:{allowNull:!0}}})],go.prototype,"color",null),l([G("color")],go.prototype,"readColor",null),l([B("color")],go.prototype,"writeColor",null),go=HI=l([$("esri.symbols.LineSymbolMarker")],go);const Wge=go;var WI;const ex=new _e({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let ya=WI=class extends qge{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,r,i,n,s){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),r!=null&&(o.width=Fe(r)),i!=null&&(o.cap=i),n!=null&&(o.join=n),s!=null&&(o.miterLimit=Fe(s)),o}clone(){var e;return new WI({color:C(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};l([X({esriSLS:"simple-line"},{readOnly:!0})],ya.prototype,"type",void 0),l([c({type:ex.apiValues,json:{read:ex.read,write:ex.write}})],ya.prototype,"style",void 0),l([c({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null?void 0:r.origin)==null})}}})],ya.prototype,"cap",void 0),l([c({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null?void 0:r.origin)==null})}}})],ya.prototype,"join",void 0),l([c({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":Wge}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],ya.prototype,"marker",void 0),l([c({type:Number,json:{read:!1,write:!1}})],ya.prototype,"miterLimit",void 0),ya=WI=l([$("esri.symbols.SimpleLineSymbol")],ya);const Ki=ya;let Wy=class extends Br{constructor(t){super(t),this.outline=null,this.type=null}hash(){var t;return`${this.type}.${(t=this.outline)==null?void 0:t.hash()}`}};l([c({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ki}},json:{default:null,write:!0}})],Wy.prototype,"outline",void 0),l([c({type:["simple-fill","picture-fill"],readOnly:!0})],Wy.prototype,"type",void 0),Wy=l([$("esri.symbols.FillSymbol")],Wy);const LH=Wy;let b_=class extends N{constructor(t){super(t)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};l([c({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],b_.prototype,"type",void 0),b_=l([$("esri.symbols.patterns.LinePattern3D")],b_);const FH=b_,Zge=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var ZI;const Jge=mr()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Zy=ZI=class extends FH{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new ZI(e)}};l([c({type:["style"]})],Zy.prototype,"type",void 0),l([X(Jge),c({type:Zge})],Zy.prototype,"style",void 0),Zy=ZI=l([$("esri.symbols.patterns.LineStylePattern3D")],Zy);const yk=Zy;let S_=class extends N{constructor(t){super(t),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};l([c({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],S_.prototype,"type",void 0),S_=l([$("esri.symbols.patterns.Pattern3D")],S_);const DH=S_,Kge=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var JI;let Jy=JI=class extends DH{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new JI({style:this.style})}};l([c({type:["style"]})],Jy.prototype,"type",void 0),l([c({type:Kge,json:{read:!0,write:!0}})],Jy.prototype,"style",void 0),Jy=JI=l([$("esri.symbols.patterns.StylePattern3D")],Jy);const jH=Jy,Yge={types:{key:"type",base:DH,typeMap:{style:jH}},json:{write:!0}},VH={types:{key:"type",base:FH,typeMap:{style:yk}},json:{write:!0}},s0=new le("white");new le("black");const Qge=new le([255,255,255,0]);function Xge(e){return e.r===0&&e.g===0&&e.b===0}var KI;let o0=KI=class extends fn{constructor(e){super(e),this.colorMixMode=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?HO(this.emissiveFactor):null,colorMixMode:this.colorMixMode};return new KI(e)}};l([X({multiply:"multiply",replace:"replace",tint:"tint"})],o0.prototype,"colorMixMode",void 0),o0=KI=l([$("esri.symbols.support.Symbol3DFillMaterial")],o0);function e0e(e,t=!1){return e<=JU?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function uLe(e){return(ZU(e)?e.length:e.byteLength/8)<=JU?Array.from(e):new Float64Array(e)}function cLe(e,t,r){return Array.isArray(e)?e.slice(t,t+r):e.subarray(t,t+r)}function Uv(e=i0e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function gk(e,t,r,i,n,s,o=Uv()){return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=n,o[5]=s,o}function dLe(e,t=Uv()){return t0e(e,0,e.length/3,t)}function t0e(e,t,r,i=Uv()){return UH(i,YI),r0e(i,e,t,r),i}function pLe(e,t=e0e(24)){const[r,i,n,s,o,a]=e;return t[0]=r,t[1]=i,t[2]=n,t[3]=r,t[4]=i,t[5]=a,t[6]=r,t[7]=o,t[8]=n,t[9]=r,t[10]=o,t[11]=a,t[12]=s,t[13]=i,t[14]=n,t[15]=s,t[16]=i,t[17]=a,t[18]=s,t[19]=o,t[20]=n,t[21]=s,t[22]=o,t[23]=a,t}function hLe(e,t){const r=isFinite(e[2])||isFinite(e[5]);return new qe(r?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function fLe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function mLe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function r0e(e,t,r=0,i=t.length/3){let n=e[0],s=e[1],o=e[2],a=e[3],u=e[4],d=e[5];for(let h=0;h<i;h++)n=Math.min(n,t[r+3*h]),s=Math.min(s,t[r+3*h+1]),o=Math.min(o,t[r+3*h+2]),a=Math.max(a,t[r+3*h]),u=Math.max(u,t[r+3*h+1]),d=Math.max(d,t[r+3*h+2]);e[0]=n,e[1]=s,e[2]=o,e[3]=a,e[4]=u,e[5]=d}function vk(e){return e[0]>=e[3]?0:e[3]-e[0]}function wk(e){return e[1]>=e[4]?0:e[4]-e[1]}function _k(e){return e[2]>=e[5]?0:e[5]-e[2]}function yLe(e){const t=vk(e),r=_k(e),i=wk(e);return Math.sqrt(t*t+r*r+i*i)}function gLe(e,t=[0,0,0]){return t[0]=e[0]+vk(e)/2,t[1]=e[1]+wk(e)/2,t[2]=e[2]+_k(e)/2,t}function vLe(e,t=[0,0,0]){return t[0]=vk(e),t[1]=wk(e),t[2]=_k(e),t}function wLe(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function _Le(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function UH(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function bLe(e){return e?UH(e,YI):Uv(YI)}function SLe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function $Le(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=Number.NEGATIVE_INFINITY,e[3]=i,e[4]=n,e[5]=Number.POSITIVE_INFINITY,e}function rF(e){return e.length===6}function TLe(e,t,r){if(e==null||t==null)return e===t;if(!rF(e)||!rF(t))return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}const YI=[1/0,1/0,1/0,-1/0,-1/0,-1/0],i0e=[0,0,0,0,0,0];Uv();function xLe(e,{isPrimitive:t,width:r,depth:i,height:n}){const s=t?10:1;if(r==null&&n==null&&i==null)return[s*e[0],s*e[1],s*e[2]];const o=Cm(r,i,n);let a;for(let u=0;u<3;u++){const d=o[u];if(d!=null){a=d/e[u];break}}for(let u=0;u<3;u++)o[u]==null&&(o[u]=e[u]*a);return o}const n0e=gk(-.5,-.5,-.5,.5,.5,.5),s0e=gk(-.5,-.5,0,.5,.5,1),o0e=gk(-.5,-.5,0,.5,.5,.5);function ELe(e){switch(e){case"sphere":case"cube":case"diamond":return n0e;case"cylinder":case"cone":case"inverted-cone":return s0e;case"tetrahedron":return o0e;default:return}}const bk=["butt","square","round"],a0e=[...bk,"none"],zH=["miter","bevel","round"];var QI;let Hc=QI=class extends N{constructor(e){super(e),this.color=new le([0,0,0,1]),this.size=us(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new QI(e)}};l([c(fc)],Hc.prototype,"color",void 0),l([c(Ko)],Hc.prototype,"size",void 0),l([c(VH)],Hc.prototype,"pattern",void 0),l([c({type:bk,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Hc.prototype,"patternCap",void 0),Hc=QI=l([$("esri.symbols.support.Symbol3DOutline")],Hc);var $_;let ga=$_=class extends Xo{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new $_(e)}static fromSimpleFillSymbol(e){var i,n,s;const t=e.outline&&e.outline.style&&e.outline.style!=="solid"?new yk({style:e.outline.style}):null,r={size:((i=e.outline)==null?void 0:i.width)??0,color:(((n=e.outline)==null?void 0:n.color)??s0).clone(),pattern:t};return t&&((s=e.outline)!=null&&s.cap)&&(r.patternCap=e.outline.cap),new $_({material:new o0({color:(e.color??Qge).clone()}),pattern:e.style&&e.style!=="solid"?new jH({style:e.style}):null,outline:r})}};l([X({Fill:"fill"},{readOnly:!0})],ga.prototype,"type",void 0),l([c({type:o0,json:{write:!0}})],ga.prototype,"material",void 0),l([c(Yge)],ga.prototype,"pattern",void 0),l([c({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ga.prototype,"castShadows",void 0),l([c({type:Hc,json:{write:!0}})],ga.prototype,"outline",void 0),l([c(kH)],ga.prototype,"edges",void 0),ga=$_=l([$("esri.symbols.FillSymbol3DLayer")],ga);const Tp=ga,l0e=["none","underline","line-through"],u0e=["normal","italic","oblique"],c0e=["normal","lighter","bold","bolder"],GH={type:Number,cast:e=>{const t=vi(e);return t===0?1:os(t,.1,4)},nonNullable:!0},d0e=["left","right","center"],p0e=["baseline","top","middle","bottom"],BH={type:d0e,nonNullable:!0},qH={type:p0e,nonNullable:!0},MLe=8;var XI;let va=XI=class extends N{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return Fe(e)}clone(){return new XI({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};l([c({type:l0e,json:{default:"none",write:!0}})],va.prototype,"decoration",void 0),l([c({type:String,json:{write:!0}})],va.prototype,"family",void 0),l([c({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:!r||!r.textSymbol3D})}}})],va.prototype,"size",void 0),l([Ne("size")],va.prototype,"castSize",null),l([c({type:u0e,json:{default:"normal",write:!0}})],va.prototype,"style",void 0),l([c({type:c0e,json:{default:"normal",write:!0}})],va.prototype,"weight",void 0),va=XI=l([$("esri.symbols.Font")],va);const f$=va;var e3;const h0e=mr()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Wc=e3=class extends N{constructor(e){super(e)}readHref(e,t,r){return e?Am(e,r):t.dataURI}writeHref(e,t,r,i){e&&(ml(e)?t.dataURI=e:(t.href=Dv(e,i),yn(t.href)&&(t.href=ts(t.href))))}clone(){return new e3({href:this.href,primitive:this.primitive})}};l([c({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Wc.prototype,"href",void 0),l([G("href")],Wc.prototype,"readHref",null),l([B("href",{href:{type:String},dataURI:{type:String}})],Wc.prototype,"writeHref",null),l([X(h0e)],Wc.prototype,"primitive",void 0),Wc=e3=l([$("esri.symbols.support.IconSymbol3DLayerResource")],Wc);var t3;let pf=t3=class extends te{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new t3({x:this.x,y:this.y})}};l([c({type:Number})],pf.prototype,"x",void 0),l([c({type:Number})],pf.prototype,"y",void 0),pf=t3=l([$("esri.symbols.support.Symbol3DAnchorPosition2D")],pf);var r3;let Ky=r3=class extends N{constructor(e){super(e),this.color=new le([0,0,0,1]),this.size=us(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new r3(e)}};l([c(fc)],Ky.prototype,"color",void 0),l([c(Ko)],Ky.prototype,"size",void 0),Ky=r3=l([$("esri.symbols.support.Symbol3DIconOutline")],Ky);var nh;const HH="esri.symbols.IconSymbol3DLayer";let Ts=nh=class extends Xo{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new nh({anchor:this.anchor,anchorPosition:C(this.anchorPosition),enabled:this.enabled,material:C(this.material),outline:C(this.outline),resource:C(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||s0,r=iF(e),i=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||s0).clone()}:null;return new nh({size:e.size,angle:e.angle,resource:{primitive:m0e(e.style)},material:{color:t},outline:i,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const t=!e.color||Xge(e.color)?s0:e.color,r=iF(e);return new nh({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:t.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new nh({resource:{href:l7({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};l([c({type:fn,json:{write:!0}})],Ts.prototype,"material",void 0),l([c({type:Wc,json:{write:!0}})],Ts.prototype,"resource",void 0),l([X({Icon:"icon"},{readOnly:!0})],Ts.prototype,"type",void 0),l([c(Ko)],Ts.prototype,"size",void 0),l([X({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],Ts.prototype,"anchor",void 0),l([c({type:pf,json:{type:[Number],read:{reader:e=>new pf({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Ts.prototype,"anchorPosition",void 0),l([c({type:Ky,json:{write:!0}})],Ts.prototype,"outline",void 0),l([c({type:Number,json:{write:!0,default:0}})],Ts.prototype,"angle",void 0),Ts=nh=l([$(HH)],Ts);const Nd=Ts;function iF(e){const t="width"in e?e.width:e.size,r="height"in e?e.height:e.size,i=nF(e.xoffset),n=nF(e.yoffset);return(i||n)&&t&&r?{x:-i/t,y:n/r}:null}function nF(e){return isFinite(e)?e:0}const f0e={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function m0e(e){return f0e[e]||(j.getLogger(HH).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}let Zc=class extends Me(N){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};l([c({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Zc.prototype,"type",void 0),l([c({type:Hge,json:{default:"begin-end",write:!0}})],Zc.prototype,"placement",void 0),l([c({type:NH,json:{default:"arrow",write:!0}})],Zc.prototype,"style",void 0),l([c({type:le,json:{type:[ke],default:null,write:!0}})],Zc.prototype,"color",void 0),Zc=l([$("esri.symbols.LineStyleMarker3D")],Zc);const i3=Zc;var T_;let vo=T_=class extends Xo{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=us(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new T_(e)}static fromSimpleLineSymbol(e){var r;const t={enabled:!0,size:e.width??us(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new yk({style:e.style}):null,material:new fn({color:(e.color||s0).clone()}),marker:e.marker?new i3({placement:e.marker.placement,style:e.marker.style,color:((r=e.marker.color)==null?void 0:r.clone())??null}):null};return new T_(t)}};l([c({type:fn,json:{write:!0}})],vo.prototype,"material",void 0),l([X({Line:"line"},{readOnly:!0})],vo.prototype,"type",void 0),l([c({type:zH,json:{write:!0,default:"miter"}})],vo.prototype,"join",void 0),l([c({type:bk,json:{write:!0,default:"butt"}})],vo.prototype,"cap",void 0),l([c(Ko)],vo.prototype,"size",void 0),l([c(VH)],vo.prototype,"pattern",void 0),l([c({types:{key:"type",base:i3,typeMap:{style:i3}},json:{write:!0}})],vo.prototype,"marker",void 0),vo=T_=l([$("esri.symbols.LineSymbol3DLayer")],vo);const Rm=vo;var n3;const y0e=mr()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Yy=n3=class extends N{clone(){return new n3({href:this.href,primitive:this.primitive})}};l([c({type:String,json:{read:ik,write:dp}})],Yy.prototype,"href",void 0),l([X(y0e)],Yy.prototype,"primitive",void 0),Yy=n3=l([$("esri.symbols.support.ObjectSymbol3DLayerResource")],Yy);var s3;let Td=s3=class extends te{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new s3({x:this.x,y:this.y,z:this.z})}};l([c({type:Number})],Td.prototype,"x",void 0),l([c({type:Number})],Td.prototype,"y",void 0),l([c({type:Number})],Td.prototype,"z",void 0),Td=s3=l([$("esri.symbols.support.Symbol3DAnchorPosition3D")],Td);var o3;let Qr=o3=class extends Xo{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,t,r;return new o3({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((t=this.material)==null?void 0:t.clone())??null,castShadows:this.castShadows,resource:(r=this.resource)==null?void 0:r.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};l([c({type:fn,json:{write:!0}})],Qr.prototype,"material",void 0),l([c({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Qr.prototype,"castShadows",void 0),l([c({type:Yy,json:{write:!0}})],Qr.prototype,"resource",void 0),l([X({Object:"object"},{readOnly:!0})],Qr.prototype,"type",void 0),l([c({type:Number,json:{write:!0}})],Qr.prototype,"width",void 0),l([c({type:Number,json:{write:!0}})],Qr.prototype,"height",void 0),l([c({type:Number,json:{write:!0}})],Qr.prototype,"depth",void 0),l([X({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],Qr.prototype,"anchor",void 0),l([c({type:Td,json:{type:[Number],read:{reader:e=>new Td({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Qr.prototype,"anchorPosition",void 0),l([c({type:Number,json:{write:!0}})],Qr.prototype,"heading",void 0),l([c({type:Number,json:{write:!0}})],Qr.prototype,"tilt",void 0),l([c({type:Number,json:{write:!0}})],Qr.prototype,"roll",void 0),l([c({readOnly:!0})],Qr.prototype,"isPrimitive",null),Qr=o3=l([$("esri.symbols.ObjectSymbol3DLayer")],Qr);const Sk=Qr;var a3;let fi=a3=class extends Xo{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new a3({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};l([c({type:fn,json:{write:!0}})],fi.prototype,"material",void 0),l([c({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],fi.prototype,"castShadows",void 0),l([X({Path:"path"},{readOnly:!0})],fi.prototype,"type",void 0),l([c({type:["circle","quad"],json:{write:!0,default:"circle"}})],fi.prototype,"profile",void 0),l([c({type:zH,json:{write:!0,default:"miter"}})],fi.prototype,"join",void 0),l([c({type:a0e,json:{write:!0,default:"butt"}})],fi.prototype,"cap",void 0),l([c({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],fi.prototype,"width",void 0),l([G("width",["width","size","height"])],fi.prototype,"readWidth",null),l([c({type:Number,json:{write:!0}})],fi.prototype,"height",void 0),l([G("height",["height","size","width"])],fi.prototype,"readHeight",null),l([c({type:["center","bottom","top"],json:{write:!0,default:"center"}})],fi.prototype,"anchor",void 0),l([c({type:["heading","all"],json:{write:!0,default:"all"}})],fi.prototype,"profileRotation",void 0),fi=a3=l([$("esri.symbols.PathSymbol3DLayer")],fi);const $k=fi;var l3;let hf=l3=class extends N{constructor(){super(...arguments),this.color=new le([0,0,0,1]),this.size=0}clone(){const e={color:C(this.color),size:this.size};return new l3(e)}};l([c(fc)],hf.prototype,"color",void 0),l([c(Ko)],hf.prototype,"size",void 0),hf=l3=l([$("esri.symbols.support.Symbol3DHalo")],hf);let a0=class extends Me(N){constructor(t){super(t),this.color=null}};l([c(fc)],a0.prototype,"color",void 0),a0=l([$("esri.symbols.support.Symbol3DTextBackground")],a0);var x_;let Ci=x_=class extends Xo{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,r,i){const n={...i,textSymbol3D:!0};t.font=e.write({},n),delete t.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new x_({enabled:this.enabled,font:this.font&&C(this.font),halo:this.halo&&C(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:C(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new x_({font:e.font!=null?e.font.clone():new f$,halo:g0e(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new fn({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new a0({color:e.backgroundColor.clone()}):null})}};function g0e(e,t){return e&&t!=null&&t>0?new hf({color:C(e),size:t}):null}l([c({type:f$,json:{write:!0}})],Ci.prototype,"font",null),l([B("font")],Ci.prototype,"writeFont",null),l([c({type:hf,json:{write:!0}})],Ci.prototype,"halo",void 0),l([c({...BH,json:{default:"center",write:!0}})],Ci.prototype,"horizontalAlignment",void 0),l([c({...GH,json:{default:1,write:!0}})],Ci.prototype,"lineHeight",void 0),l([c({type:fn,json:{write:!0}})],Ci.prototype,"material",void 0),l([c({type:a0,json:{write:!0}})],Ci.prototype,"background",void 0),l([c(Ko)],Ci.prototype,"size",null),l([c({type:String,json:{write:!0}})],Ci.prototype,"text",void 0),l([X({Text:"text"},{readOnly:!0})],Ci.prototype,"type",void 0),l([c({...qH,json:{default:"baseline",write:!0}})],Ci.prototype,"verticalAlignment",void 0),Ci=x_=l([$("esri.symbols.TextSymbol3DLayer")],Ci);const Om=Ci;var u3;let zl=u3=class extends Xo{constructor(e){super(e),this.color=c3.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new u3({color:C(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};l([c({type:le,nonNullable:!0,json:{type:[ke],write:(e,t,r)=>t[r]=e.toArray(le.AlphaMode.UNLESS_OPAQUE),default:()=>c3.clone(),defaultEquals:e=>e.toCss(!0)===c3.toCss(!0)}})],zl.prototype,"color",void 0),l([X({Water:"water"},{readOnly:!0})],zl.prototype,"type",void 0),l([c({type:["small","medium","large"],json:{write:!0,default:"medium"}})],zl.prototype,"waterbodySize",void 0),l([c({type:Number,json:{write:!0,default:null}})],zl.prototype,"waveDirection",void 0),l([c({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],zl.prototype,"waveStrength",void 0),zl=u3=l([$("esri.symbols.WaterSymbol3DLayer")],zl);const WH=zl,c3=new le([0,119,190]);var d3;let Jc=d3=class extends te{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new d3({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};l([c({type:String})],Jc.prototype,"name",void 0),l([c({type:String})],Jc.prototype,"styleUrl",void 0),l([c({type:String})],Jc.prototype,"styleName",void 0),l([c({type:fr})],Jc.prototype,"portal",void 0),Jc=d3=l([$("esri.symbols.support.StyleOrigin")],Jc);const p3=Jc;var h3;let l0=h3=class extends te{constructor(){super(...arguments),this.url=""}clone(){return new h3({url:this.url})}};l([c({type:String})],l0.prototype,"url",void 0),l0=h3=l([$("esri.symbols.support.Thumbnail")],l0);const ZH={icon:Nd,object:Sk,line:Rm,path:$k,fill:Tp,extrude:PH,text:Om,water:WH},v0e=Y.ofType({base:Xo,key:"type",typeMap:ZH,errorContext:"symbol-layer"});let wo=class extends Br{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const r=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,i=r==null?void 0:r.type,n=i||Y;this._set("symbolLayers",new n)}get color(){return null}set color(t){this.constructed&&j.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){rc(t,this._get("symbolLayers"))}readStyleOrigin(t,r,i){if(t.styleUrl&&t.name){const n=Am(t.styleUrl,i);return new p3({styleUrl:n,name:t.name})}if(t.styleName&&t.name)return new p3({portal:(i==null?void 0:i.portal)||fr.getDefault(),styleName:t.styleName,name:t.name});i!=null&&i.messages&&i.messages.push(new wn("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:t}))}writeStyleOrigin(t,r,i,n){if(t.styleUrl&&t.name){let s=Dv(t.styleUrl,n);yn(s)&&(s=ts(s)),r.styleOrigin={styleUrl:s,name:t.name}}else t.styleName&&t.name&&(t.portal&&(n!=null&&n.portal)&&!a7(t.portal.restUrl,n.portal.restUrl)?n!=null&&n.messages&&n.messages.push(new wn("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof Xo||t&&ZH[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};l([c({json:{read:!1,write:!1}})],wo.prototype,"color",null),l([c({type:v0e,nonNullable:!0,json:{write:!0}}),Ne(Eq)],wo.prototype,"symbolLayers",null),l([c({type:p3})],wo.prototype,"styleOrigin",void 0),l([G("styleOrigin")],wo.prototype,"readStyleOrigin",null),l([B("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],wo.prototype,"writeStyleOrigin",null),l([c({type:l0,json:{read:!1}})],wo.prototype,"thumbnail",void 0),l([c({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],wo.prototype,"type",void 0),wo=l([$("esri.symbols.Symbol3D")],wo);const xp=wo;let Qy=class extends N{constructor(t){super(t),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};l([c({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],Qy.prototype,"type",void 0),l([c({readOnly:!0})],Qy.prototype,"visible",void 0),Qy=l([$("esri.symbols.callouts.Callout3D")],Qy);const JH=Qy;var f3;let E_=f3=class extends N{constructor(e){super(e),this.color=new le("white")}clone(){return new f3({color:C(this.color)})}};l([c(fc)],E_.prototype,"color",void 0),E_=f3=l([$("esri.symbols.callouts.LineCallout3DBorder")],E_);const w0e=E_;var m3;let Gl=m3=class extends JH{constructor(e){super(e),this.type="line",this.color=new le([0,0,0,1]),this.size=us(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new m3({color:C(this.color),size:this.size,border:C(this.border)})}};l([X({line:"line"})],Gl.prototype,"type",void 0),l([c(fc)],Gl.prototype,"color",void 0),l([c(Ko)],Gl.prototype,"size",void 0),l([c({type:w0e,json:{write:!0}})],Gl.prototype,"border",void 0),l([c({readOnly:!0})],Gl.prototype,"visible",null),Gl=m3=l([$("esri.symbols.callouts.LineCallout3D")],Gl);const KH=Gl;function Tk(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function YH(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!Tk(e)}const QH={types:{key:"type",base:JH,typeMap:{line:KH}},json:{write:!0}};var y3;let sh=y3=class extends N{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new y3({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};l([c(Ko)],sh.prototype,"screenLength",void 0),l([c({type:Number,nonNullable:!0,json:{write:!0,default:0}})],sh.prototype,"minWorldLength",void 0),l([c({type:Number,json:{write:!0}})],sh.prototype,"maxWorldLength",void 0),sh=y3=l([$("esri.symbols.support.Symbol3DVerticalOffset")],sh);const xk=sh;var M_;const XH=Y.ofType({base:null,key:"type",typeMap:{text:Om}});let Bl=M_=class extends xp{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new XH,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return YH(this)}hasVisibleVerticalOffset(){return Tk(this)}clone(){return new M_({styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail),callout:C(this.callout),verticalOffset:C(this.verticalOffset)})}static fromTextSymbol(e){return new M_({symbolLayers:new Y([Om.fromTextSymbol(e)])})}};l([c({type:xk,json:{write:!0}})],Bl.prototype,"verticalOffset",void 0),l([c(QH)],Bl.prototype,"callout",void 0),l([c({json:{read:!1,write:!1}})],Bl.prototype,"styleOrigin",void 0),l([c({type:XH})],Bl.prototype,"symbolLayers",void 0),l([X({LabelSymbol3D:"label-3d"},{readOnly:!0})],Bl.prototype,"type",void 0),Bl=M_=l([$("esri.symbols.LabelSymbol3D")],Bl);const m$=Bl;var I_;const eW=Y.ofType({base:null,key:"type",typeMap:{line:Rm,path:$k}}),_0e=Y.ofType({base:null,key:"type",typeMap:{line:Rm,path:$k}});let Xy=I_=class extends xp{constructor(e){super(e),this.symbolLayers=new eW,this.type="line-3d"}clone(){return new I_({styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail)})}static fromSimpleLineSymbol(e){return new I_({symbolLayers:new Y([Rm.fromSimpleLineSymbol(e)])})}};l([c({type:eW,json:{type:_0e}})],Xy.prototype,"symbolLayers",void 0),l([X({LineSymbol3D:"line-3d"},{readOnly:!0})],Xy.prototype,"type",void 0),Xy=I_=l([$("esri.symbols.LineSymbol3D")],Xy);const Ep=Xy;let ql=class extends Br{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};l([c({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],ql.prototype,"angle",void 0),l([c({type:["simple-marker","picture-marker"],readOnly:!0})],ql.prototype,"type",void 0),l([c({type:Number,cast:Fe,json:{write:!0}})],ql.prototype,"xoffset",void 0),l([c({type:Number,cast:Fe,json:{write:!0}})],ql.prototype,"yoffset",void 0),l([c({cast:e=>e==="auto"?e:vi(Fe(e)),json:{write:!0}})],ql.prototype,"size",void 0),ql=l([$("esri.symbols.MarkerSymbol")],ql);const tW=ql;var C_;const rW=Y.ofType({base:null,key:"type",typeMap:{fill:Tp}});let eg=C_=class extends xp{constructor(e){super(e),this.symbolLayers=new rW,this.type="mesh-3d"}clone(){return new C_({styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail)})}static fromSimpleFillSymbol(e){return new C_({symbolLayers:new Y([Tp.fromSimpleFillSymbol(e)])})}};l([c({type:rW})],eg.prototype,"symbolLayers",void 0),l([X({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],eg.prototype,"type",void 0),eg=C_=l([$("esri.symbols.MeshSymbol3D")],eg);const zv=eg;function b0e(e,t,r){return t.imageData?l7({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):iW(t.url,r)}function iW(e,t){if(!yn(e)){const r=$0e(t);if(r)return em(r,"images",e)}return Am(e,t)}function S0e(e,t,r,i){if(ml(e)){const n=rp(e);if(!n)return;t.contentType=n.mediaType,t.imageData=n.data,r&&r.imageData===t.imageData&&r.url&&dp(r.url,t,"url",i)}else dp(e,t,"url",i)}const nW={json:{read:{source:["imageData","url"],reader:b0e},write:{writer(e,t,r,i){S0e(e,t,this.source,i)}}}},sW={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,r){const i={};return t.imageData&&(i.imageData=t.imageData),t.contentType&&(i.contentType=t.contentType),t.url&&(i.url=iW(t.url,r)),i}}}};function $0e(e){var n,s;if(!e)return null;const{origin:t,layer:r}=e;if(t!=="service"&&t!=="portal-item")return null;const i=r==null?void 0:r.type;return i==="feature"||i==="stream"?(n=r.parsedUrl)==null?void 0:n.path:i==="map-image"||i==="tile"?(s=e.url)==null?void 0:s.path:null}var g3;let kn=g3=class extends LH{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const n={};return e&&(n.url=e),t&&(n.outline=t),r!=null&&(n.width=Fe(r)),i!=null&&(n.height=Fe(i)),n}clone(){const e=new g3({color:C(this.color),height:this.height,outline:C(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",C(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};l([X({esriPFS:"picture-fill"},{readOnly:!0})],kn.prototype,"type",void 0),l([c(nW)],kn.prototype,"url",void 0),l([c({type:Number,json:{write:!0}})],kn.prototype,"xscale",void 0),l([c({type:Number,json:{write:!0}})],kn.prototype,"yscale",void 0),l([c({type:Number,cast:Fe,json:{write:!0}})],kn.prototype,"width",void 0),l([c({type:Number,cast:Fe,json:{write:!0}})],kn.prototype,"height",void 0),l([c({type:Number,cast:Fe,json:{write:!0}})],kn.prototype,"xoffset",void 0),l([c({type:Number,cast:Fe,json:{write:!0}})],kn.prototype,"yoffset",void 0),l([c(sW)],kn.prototype,"source",void 0),kn=g3=l([$("esri.symbols.PictureFillSymbol")],kn);const Ek=kn;var v3;let xs=v3=class extends tW{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const i={};return e&&(i.url=e),t!=null&&(i.width=Fe(t)),r!=null&&(i.height=Fe(r)),i}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new v3({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",C(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};l([c({json:{write:!1}})],xs.prototype,"color",void 0),l([X({esriPMS:"picture-marker"},{readOnly:!0})],xs.prototype,"type",void 0),l([c(nW)],xs.prototype,"url",void 0),l([c(sW)],xs.prototype,"source",void 0),l([c({type:Number,cast:Fe,json:{write:!0}})],xs.prototype,"height",void 0),l([G("height",["height","size"])],xs.prototype,"readHeight",null),l([c({type:Number,cast:Fe,json:{write:!0}})],xs.prototype,"width",void 0),l([c({json:{write:!1}})],xs.prototype,"size",void 0),xs=v3=l([$("esri.symbols.PictureMarkerSymbol")],xs);const km=xs;var Kc;const oW=Y.ofType({base:null,key:"type",typeMap:{icon:Nd,object:Sk,text:Om}});let Yc=Kc=class extends xp{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new oW,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return YH(this)}hasVisibleVerticalOffset(){return Tk(this)}clone(){return new Kc({verticalOffset:C(this.verticalOffset),callout:C(this.callout),styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Kc({symbolLayers:new Y([Nd.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new Kc({symbolLayers:new Y([Nd.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){var i,n;if(((n=(i=e.data)==null?void 0:i.symbol)==null?void 0:n.type)!=="CIMPointSymbol")return null;const r=e.data.symbol;return new Kc(r!=null&&r.callout?{symbolLayers:new Y([Nd.fromCIMSymbol(e)]),callout:new KH({size:.5,color:new le([0,0,0])}),verticalOffset:new xk({screenLength:40})}:{symbolLayers:new Y([Nd.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new Kc({symbolLayers:new Y([Om.fromTextSymbol(e)])})}};l([c({type:xk,json:{write:!0}})],Yc.prototype,"verticalOffset",void 0),l([c(QH)],Yc.prototype,"callout",void 0),l([c({type:oW,json:{origins:{"web-scene":{write:!0}}}})],Yc.prototype,"symbolLayers",void 0),l([X({PointSymbol3D:"point-3d"},{readOnly:!0})],Yc.prototype,"type",void 0),Yc=Kc=l([$("esri.symbols.PointSymbol3D")],Yc);const Xa=Yc;var tg;const aW=Y.ofType({base:null,key:"type",typeMap:{extrude:PH,fill:Tp,icon:Nd,line:Rm,object:Sk,text:Om,water:WH}});let rg=tg=class extends xp{constructor(e){super(e),this.symbolLayers=new aW,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&D0(j.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&D0(j.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(pl(()=>this.symbolLayers,"after-add",({item:t})=>e(t),Jo))}clone(){return new tg({styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail)})}static fromJSON(e){var r;const t=new tg;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const i=t.symbolLayers.at(0),n=t.symbolLayers.at(1);!n.enabled||(r=e.symbolLayers)!=null&&r[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:n.size,color:n.material!=null?n.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new tg({symbolLayers:new Y([Tp.fromSimpleFillSymbol(e)])})}};l([c({type:aW,json:{write:!0}})],rg.prototype,"symbolLayers",void 0),l([X({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],rg.prototype,"type",void 0),rg=tg=l([$("esri.symbols.PolygonSymbol3D")],rg);const mc=rg;var w3;const tx=new _e({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Qc=w3=class extends LH{constructor(...e){super(...e),this.color=new le([0,0,0,.25]),this.outline=new Ki,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.style=e),t&&(i.outline=t),r&&(i.color=r),i}clone(){return new w3({color:C(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};l([c()],Qc.prototype,"color",void 0),l([c()],Qc.prototype,"outline",void 0),l([X({esriSFS:"simple-fill"},{readOnly:!0})],Qc.prototype,"type",void 0),l([c({type:tx.apiValues,json:{read:tx.read,write:tx.write}})],Qc.prototype,"style",void 0),Qc=w3=l([$("esri.symbols.SimpleFillSymbol")],Qc);const yc=Qc;var _3;const rx=new _e({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let _o=_3=class extends tW{constructor(...e){super(...e),this.color=new le([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Ki}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string")return e;const n={};return e&&(n.style=e),t!=null&&(n.size=Fe(t)),r&&(n.outline=r),i&&(n.color=i),n}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new _3({angle:this.angle,color:C(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};l([c()],_o.prototype,"color",void 0),l([B("color")],_o.prototype,"writeColor",null),l([X({esriSMS:"simple-marker"},{readOnly:!0})],_o.prototype,"type",void 0),l([c()],_o.prototype,"size",void 0),l([c({type:rx.apiValues,json:{read:rx.read,write:rx.write}})],_o.prototype,"style",void 0),l([c({type:String,json:{write:!0}})],_o.prototype,"path",null),l([c({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ki}},json:{default:null,write:!0}})],_o.prototype,"outline",void 0),_o=_3=l([$("esri.symbols.SimpleMarkerSymbol")],_o);const ea=_o;var b3;let ft=b3=class extends Br{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new f$,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.text=e),t&&(i.font=t),r&&(i.color=r),i}writeLineWidth(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}castLineWidth(e){return Fe(e)}writeLineHeight(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}clone(){return new b3({angle:this.angle,backgroundColor:C(this.backgroundColor),borderLineColor:C(this.borderLineColor),borderLineSize:this.borderLineSize,color:C(this.color),font:this.font&&this.font.clone(),haloColor:C(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e,t,r;return`${(e=this.backgroundColor)==null?void 0:e.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${(r=this.haloColor)==null?void 0:r.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};l([c({type:le,json:{write:!0}})],ft.prototype,"backgroundColor",void 0),l([c({type:le,json:{write:!0}})],ft.prototype,"borderLineColor",void 0),l([c({type:Number,json:{write:!0},cast:Fe})],ft.prototype,"borderLineSize",void 0),l([c({type:f$,json:{write:!0}})],ft.prototype,"font",void 0),l([c({...BH,json:{write:!0}})],ft.prototype,"horizontalAlignment",void 0),l([c({type:Boolean,json:{write:!0}})],ft.prototype,"kerning",void 0),l([c({type:le,json:{write:!0}})],ft.prototype,"haloColor",void 0),l([c({type:Number,cast:Fe,json:{write:!0}})],ft.prototype,"haloSize",void 0),l([c({type:Boolean,json:{write:!0}})],ft.prototype,"rightToLeft",void 0),l([c({type:Boolean,json:{write:!0}})],ft.prototype,"rotated",void 0),l([c({type:String,json:{write:!0}})],ft.prototype,"text",void 0),l([X({esriTS:"text"},{readOnly:!0})],ft.prototype,"type",void 0),l([c({...qH,json:{write:!0}})],ft.prototype,"verticalAlignment",void 0),l([c({type:Number,cast:Fe,json:{write:!0}})],ft.prototype,"xoffset",void 0),l([c({type:Number,cast:Fe,json:{write:!0}})],ft.prototype,"yoffset",void 0),l([c({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],ft.prototype,"angle",void 0),l([c({type:Number,json:{write:!0}})],ft.prototype,"width",void 0),l([c({type:Number})],ft.prototype,"lineWidth",void 0),l([B("lineWidth")],ft.prototype,"writeLineWidth",null),l([Ne("lineWidth")],ft.prototype,"castLineWidth",null),l([c(GH)],ft.prototype,"lineHeight",void 0),l([B("lineHeight")],ft.prototype,"writeLineHeight",null),ft=b3=l([$("esri.symbols.TextSymbol")],ft);const Mp=ft;var S3;let Es=S3=class extends Br{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:fr.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t==null?void 0:t.portal,super.read(e,t)}clone(){return new S3({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const r=t!=null?t.cache:null,i=r?this._fetchCacheKey:null;if(r!=null){const a=i&&r.get(i);if(a)return a.clone()}const{resolveWebStyleSymbol:n}=await D(()=>import("./webStyleSymbolUtils-gI1wOmW6.js"),__vite__mapDeps([144,145]),import.meta.url);_t(t);const s=n(this,{portal:this.portal},e,t);s.catch(a=>{j.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",a)});const o=await s;return e==="webRef"&&o.type==="point-3d"||e==="cimRef"&&o.type==="cim"?(r!=null&&r.set(i,o.clone()),o):null}};l([c({json:{write:!1}})],Es.prototype,"color",void 0),l([c({type:String,json:{write:!0}})],Es.prototype,"styleName",void 0),l([c({type:fr,json:{write:!1}})],Es.prototype,"portal",void 0),l([c({type:String,json:{read:ik,write:dp}})],Es.prototype,"styleUrl",void 0),l([c({type:l0,json:{read:!1}})],Es.prototype,"thumbnail",void 0),l([c({type:String,json:{write:!0}})],Es.prototype,"name",void 0),l([X({styleSymbolReference:"web-style"},{readOnly:!0})],Es.prototype,"type",void 0),l([c()],Es.prototype,"_fetchCacheKey",null),Es=S3=l([$("esri.symbols.WebStyleSymbol")],Es);const Ip=Es;function kLe(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function sF(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Ou={base:Br,key:"type",typeMap:{"simple-fill":yc,"picture-fill":Ek,"picture-marker":km,"simple-line":Ki,"simple-marker":ea,text:Mp,"label-3d":m$,"line-3d":Ep,"mesh-3d":zv,"point-3d":Xa,"polygon-3d":mc,"web-style":Ip,cim:wl},errorContext:"symbol"},PLe={base:Br,key:"type",typeMap:{"picture-marker":km,"simple-marker":ea,"point-3d":Xa,cim:wl},errorContext:"symbol"},NLe={base:Br,key:"type",typeMap:{"simple-line":Ki,"line-3d":Ep,cim:wl},errorContext:"symbol"},LLe={base:Br,key:"type",typeMap:{"simple-fill":yc,"picture-fill":Ek,"polygon-3d":mc,cim:wl},errorContext:"symbol"},T0e={base:Br,key:"type",typeMap:{"picture-marker":km,"simple-marker":ea,text:Mp,"web-style":Ip,cim:wl},errorContext:"symbol"},x0e=wm({types:Ou}),lW={base:Br,key:"type",typeMap:{"simple-fill":yc,"picture-fill":Ek,"picture-marker":km,"simple-line":Ki,"simple-marker":ea,text:Mp,"line-3d":Ep,"mesh-3d":zv,"point-3d":Xa,"polygon-3d":mc,"web-style":Ip,cim:wl},errorContext:"symbol"},E0e={base:Br,key:"type",typeMap:{text:Mp,"label-3d":m$},errorContext:"symbol"},oF={base:Br,key:"type",typeMap:{"line-3d":Ep,"mesh-3d":zv,"point-3d":Xa,"polygon-3d":mc,"web-style":Ip,cim:wl},errorContext:"symbol"},M0e={base:Br,key:"type",typeMap:{"label-3d":m$},errorContext:"symbol"},uW=ss(Ou);var $3;function I0e(e){if(!e)return null;const t={};for(const r in e){const i=dl(e[r]);i&&(t[r]=i)}return Object.keys(t).length!==0?t:null}function C0e(e){if(e==null)return null;const t={};for(const r in e){const i=e[r];i&&(t[r]=i.toJSON())}return Object.keys(t).length!==0?t:null}let Ai=$3=class extends Me(N){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:Uw(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&Qne(j.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),(e==null?void 0:e.type)!=="mesh"&&this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}get version(){return this._version}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new $3({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const r of[t,this.sourceLayer,this.layer])if(r){if("popupTemplate"in r&&r.popupTemplate)return r.popupTemplate;if(e&&"defaultPopupTemplate"in r&&r.defaultPopupTemplate!=null)return r.defaultPopupTemplate}return null}getAttribute(e){var t;return(t=this.attributes)==null?void 0:t[e]}setAttribute(e,t){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var e;return{aggregateGeometries:C0e(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:uS(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if((t==null?void 0:t.type)==="mesh"){const r={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,t,r,i){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:t,newValue:r};e==="origin-transform"&&(n.action=i),e==="attributes"&&(n.attributeName=i),this.layer.graphicChanged(n)}_watchMeshGeometryChanges(){this.addHandles([as(()=>{var e,t;return((e=this.geometry)==null?void 0:e.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(t=this.geometry.transform)==null?void 0:t.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())}),as(()=>{var e;return((e=this.geometry)==null?void 0:e.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var t;const e=this.geometry;(e==null?void 0:e.type)==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(t=e.transform)==null?void 0:t.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,t)=>e===t,sync:!0})])}};l([c({value:null,json:{read:I0e}})],Ai.prototype,"aggregateGeometries",null),l([c({value:null})],Ai.prototype,"attributes",null),l([c({value:null,types:bp,json:{read:dl}})],Ai.prototype,"geometry",null),l([c({type:Boolean})],Ai.prototype,"isAggregate",void 0),l([c({clonable:"reference"})],Ai.prototype,"layer",void 0),l([c({clonable:"reference"})],Ai.prototype,"origin",void 0),l([c({type:hc})],Ai.prototype,"popupTemplate",void 0),l([c({clonable:"reference"})],Ai.prototype,"sourceLayer",void 0),l([c({value:null,types:Ou})],Ai.prototype,"symbol",null),l([c({clonable:!1,json:{read:!1,write:!1}})],Ai.prototype,"_version",void 0),l([c({type:Boolean,value:!0})],Ai.prototype,"visible",null),Ai=$3=l([$("esri.Graphic")],Ai);const Ti=Ai;let u0=class extends i0{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};l([CO({Type:Ti,ensureType:bt(Ti)})],u0.prototype,"itemType",void 0),u0=l([$("esri.support.GraphicsCollection")],u0);let Hl=class extends te{constructor(t){super(t),this.view=null,this.baseLayerViews=new Y,this.referenceLayerViews=new Y,this._loadingHandle=ce(()=>{var r,i;return(i=(r=this.view)==null?void 0:r.map)==null?void 0:i.basemap},r=>{r&&r.load().catch(()=>{})},zt)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const t of this.baseLayerViews)t.destroy();this.baseLayerViews.length=0;for(const t of this.referenceLayerViews)t.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){var r,i,n;if((r=this.view)!=null&&r.suspended)return!1;const t=(n=(i=this.view)==null?void 0:i.map)==null?void 0:n.basemap;return!!t&&!!t.loaded&&(this.baseLayerViews.some(s=>s.updating)||this.referenceLayerViews.some(s=>s.updating))}};l([c({constructOnly:!0})],Hl.prototype,"view",void 0),l([c({readOnly:!0})],Hl.prototype,"baseLayerViews",void 0),l([c({readOnly:!0})],Hl.prototype,"referenceLayerViews",void 0),l([c({readOnly:!0})],Hl.prototype,"suspended",null),l([c({type:Boolean,readOnly:!0})],Hl.prototype,"updating",null),Hl=l([$("esri.views.BasemapView")],Hl);const A0e=Hl;function R0e(e){return"tryRecycleWith"in e}function O0e(e){return e!=null&&typeof e=="object"&&"layerViews"in e}let k0e=class{constructor(t,r,i){this.layer=t,this.view=r,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=_n(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,es(this._controller.signal,()=>{const n=new R("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(n)})}tryRecycle(t){if(!this.done||!this.layerView||!R0e(this.layerView))return null;const r=this.layer.type,i=this._controller.signal;for(let n=0;n<t.length;n++){const s=t[n];if(s.type!==r)continue;const o=this.layerView.tryRecycleWith(s,{signal:i});if(o){t.splice(n,1),this.layer=s;const a=this.layerView,u=a.view;return this.promise=Promise.race([o.then(()=>(_t(this._controller.signal),s.emit("layerview-destroy",{view:u,layerView:a}),u.emit("layerview-destroy",{view:u,layerView:a}),s.emit("layerview-create",{view:u,layerView:a}),u.emit("layerview-create",{view:u,layerView:a}),a)),new Promise((d,h)=>es(this._controller.signal,()=>h(ot())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(t){const{layer:r,view:i}=this;r.emit("layerview-destroy",{view:i,layerView:t}),i.emit("layerview-destroy",{layer:r,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var n,s;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:r,view:i}=this;this._map=i.map;try{let o,a;if(await r.load({signal:t}),r.prefetchResources&&await r.prefetchResources({signal:t}),N0e(r))o=await r.createLayerView(i,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new R("layer:view-not-supported","No layerview implementation was found");const h=await this.layerViewImporter.importLayerView(r);_t(t),o="default"in h?new h.default({layer:r,view:i}):new h({layer:r,view:i})}const u=()=>{a=wt(a),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};a=es(t,u),_t(t);try{await o.when()}catch(h){throw u(),h}if(!((s=(n=this._map)==null?void 0:n.allLayers)==null?void 0:s.includes(r)))return u(),void this._deferred.reject(new R("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=o,r.emit("layerview-create",{view:i,layerView:o}),i.emit("layerview-create",{layer:r,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){r.emit("layerview-create-error",{view:i,error:o}),i.emit("layerview-create-error",{layer:r,error:o}),this.done=!0,this._deferred.reject(new R("layerview:create-error","layerview creation failed",{layer:r,error:o}))}}},Pn=class extends te{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new qd,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var i;const r=(i=this.view.map)==null?void 0:i.allLayers;if(r)for(const n of r)this.layerViewImporter.hasLayerViewModule(n)&&this.layerViewImporter.importLayerView(n)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=_n(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(Mv(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var u,d,h;if(this.destroyed)return;const r=this.view.map;if(this._map!==r&&(this.clear(),this._map=r),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const i=new Set,n=[],s=this.view.ready,o=f=>{if(f!=null){for(const m of f)if(m){i.add(m);const y=this._layerLayerViewInfoMap.get(m);y&&s?y.start():y||this._recyclingInfoMap.has(m)||n.push(m),"layers"in m&&m.layers&&o(m.layers)}}};for(const f of this._rootCollectionNames)o(Ks(this,f));for(const[f,m]of this._layerLayerViewInfoMap)if(!i.has(f)){this._layerLayerViewInfoMap.delete(m.layer);const y=m.tryRecycle(n);y?(this.notifyChange("updating"),this._recyclingInfoMap.set(m.layer,m),y.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),this._layerLayerViewInfoMap.set(m.layer,m),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),m.destroy(),this._reschedule()})):m.destroy()}for(const[f,m]of this._recyclingInfoMap)i.has(f)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),m.destroy());for(const f of n)this._createLayerView(f);this._refreshCollections();const a=[(u=r==null?void 0:r.ground)==null?void 0:u.layers,(d=r==null?void 0:r.basemap)==null?void 0:d.baseLayers,(h=r==null?void 0:r.basemap)==null?void 0:h.referenceLayers,r==null?void 0:r.layers].filter(f=>!!f);i.forEach(f=>"layers"in f&&a.push(f.layers)),this.addHandles(a.map(f=>this._watchUpdatingTracking.addOnCollectionChange(()=>f,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([pl(()=>{var t,r;return(r=(t=this.view)==null?void 0:t.map)==null?void 0:r.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),ce(()=>{const t=this.view,r=t==null?void 0:t.map;return[r==null?void 0:r.basemap,r==null?void 0:r.ground,r==null?void 0:r.layers,t==null?void 0:t.ready]},()=>this._reschedule(),dn)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),JT(this._recyclingInfoMap),JT(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(ot()),this._workPromise=null)}get _layersToLayerViews(){const t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||one(this._layerLayerViewInfoMap,t=>!t.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let t=0;for(const r of this._layerLayerViewInfoMap.values())r.done||++t;return t}clear(){this.destroyed||(JT(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(t)){if(this._recyclingInfoMap.has(t))return this._recyclingInfoMap.get(t).promise;throw new R("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t})}return this._layerLayerViewInfoMap.get(t).promise}isCreatingLayerViewsForLayer(t,r){var s;this.commitProperty("updatingRemaining");const i=this._layerLayerViewInfoMap.get(t);if(!(i!=null&&i.done))return!0;const n=i.layerView;return!(!n||!r||n.parent===r)||!!(i.done&&n&&"layers"in t&&((s=t.layers)!=null&&s.length))&&t.layers.some(o=>this.isCreatingLayerViewsForLayer(o,n))}_refreshCollections(){for(const[t,r]of this._layersToLayerViews)this._populateLayerViewsOwners(Ks(this,t),Ks(this,r),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(t,r,i){if(!t||!r)return void(r&&r.removeAll());let n=0;for(const s of t){const o=this._layerLayerViewInfoMap.get(s);if(!(o!=null&&o.layerView))continue;const a=o.layerView;a.layer=s,a.parent=i,r.at(n)!==a&&r.splice(n,0,a),"layers"in s&&O0e(a)&&this._populateLayerViewsOwners(s.layers,a.layerViews,a),n+=1}n<r.length&&r.splice(n,r.length)}_createLayerView(t){t.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);const r=new k0e(t,this.view,this.layerViewImporter);r.promise.then(()=>this._refreshCollections(),i=>{i&&(Or(i)||i.name==="cancelled:layerview-create")||j.getLogger(this).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:i}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(t,r),this.view.ready&&r.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};l([c()],Pn.prototype,"_workPromise",void 0),l([c({readOnly:!0})],Pn.prototype,"_watchUpdatingTracking",void 0),l([c({readOnly:!0})],Pn.prototype,"_layersToLayerViews",null),l([c({readOnly:!0})],Pn.prototype,"_rootCollectionNames",null),l([c()],Pn.prototype,"layerViewImporter",void 0),l([c()],Pn.prototype,"supportsGround",void 0),l([c({readOnly:!0})],Pn.prototype,"updating",null),l([c({readOnly:!0})],Pn.prototype,"updatingRemaining",null),l([c({constructOnly:!0})],Pn.prototype,"view",void 0),Pn=l([$("esri.views.LayerViewManager")],Pn);const P0e=Pn;function N0e(e){return"createLayerView"in e&&e.createLayerView!=null}let rn=class extends te{constructor(t){super(t),this.factor=1.5,this.offset=Ir(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};l([c({type:Number})],rn.prototype,"factor",void 0),l([c({nonNullable:!0})],rn.prototype,"offset",void 0),l([c()],rn.prototype,"position",void 0),l([c({type:Number,range:{min:0}})],rn.prototype,"size",void 0),l([c()],rn.prototype,"maskUrl",void 0),l([c()],rn.prototype,"maskEnabled",void 0),l([c()],rn.prototype,"overlayUrl",void 0),l([c()],rn.prototype,"overlayEnabled",void 0),l([c({readOnly:!0})],rn.prototype,"version",null),l([c({type:Boolean})],rn.prototype,"visible",void 0),rn=l([$("esri.views.Magnifier")],rn);const cW=rn;let A_=class{constructor(t){this._observable=new Ov,this._map=new Map(t)}get size(){return he(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(t){const r=this._map.delete(t);return r&&this._observable.notify(),r}entries(){return he(this._observable),this._map.entries()}forEach(t,r){he(this._observable),this._map.forEach((i,n)=>t.call(r,i,n,this),r)}get(t){return he(this._observable),this._map.get(t)}has(t){return he(this._observable),this._map.has(t)}keys(){return he(this._observable),this._map.keys()}set(t,r){return this._map.set(t,r),this._observable.notify(),this}values(){return he(this._observable),this._map.values()}[Symbol.iterator](){return he(this._observable),this._map[Symbol.iterator]()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var T3;let Ld=T3=class extends N{constructor(e){super(e),this.name=null,this.code=null}clone(){return new T3({name:this.name,code:this.code})}};l([c({type:String,json:{write:!0}})],Ld.prototype,"name",void 0),l([c({type:[String,Number],json:{write:!0}})],Ld.prototype,"code",void 0),Ld=T3=l([$("esri.layers.support.CodedValue")],Ld);const L0e=new _e({inherited:"inherited",codedValue:"coded-value",range:"range"});let ig=class extends N{constructor(t){super(t),this.name=null,this.type=null}};l([c({type:String,json:{write:!0}})],ig.prototype,"name",void 0),l([X(L0e)],ig.prototype,"type",void 0),ig=l([$("esri.layers.support.Domain")],ig);const y$=ig;var x3;let ng=x3=class extends y${constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some(i=>(String(i.code)===r&&(t=i.name),!!t))}return t}clone(){return new x3({codedValues:C(this.codedValues),name:this.name})}};l([c({type:[Ld],json:{write:!0}})],ng.prototype,"codedValues",void 0),l([X({codedValue:"coded-value"})],ng.prototype,"type",void 0),ng=x3=l([$("esri.layers.support.CodedValueDomain")],ng);const g$=ng;var E3;let R_=E3=class extends y${constructor(e){super(e),this.type="inherited"}clone(){return new E3}};l([X({inherited:"inherited"})],R_.prototype,"type",void 0),R_=E3=l([$("esri.layers.support.InheritedDomain")],R_);const dW=R_;var M3;let oh=M3=class extends y${constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new M3({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};l([c({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var r;return(r=t.range)==null?void 0:r[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]}}}})],oh.prototype,"maxValue",void 0),l([c({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var r;return(r=t.range)==null?void 0:r[0]}},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]}}}})],oh.prototype,"minValue",void 0),l([X({range:"range"})],oh.prototype,"type",void 0),oh=M3=l([$("esri.layers.support.RangeDomain")],oh);const pW=oh,hW={key:"type",base:y$,typeMap:{range:pW,"coded-value":g$,inherited:dW}};function v$(e){if(!(e!=null&&e.type))return null;switch(e.type){case"range":return pW.fromJSON(e);case"codedValue":return g$.fromJSON(e);case"inherited":return dW.fromJSON(e)}return null}const Mk=new _e({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var I3;const F0e=new _e({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Xr=I3=class extends N{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return(r==null?void 0:r.value)??null}readValueType(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return r?F0e.fromJSON(r.fieldValueType):null}clone(){var e;return new I3({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((e=this.domain)==null?void 0:e.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};l([c({type:String,json:{write:!0}})],Xr.prototype,"alias",void 0),l([c({type:[String,Number],json:{write:{allowNull:!0}}})],Xr.prototype,"defaultValue",void 0),l([c()],Xr.prototype,"description",void 0),l([G("description")],Xr.prototype,"readDescription",null),l([c({types:hW,json:{read:{reader:v$},write:!0}})],Xr.prototype,"domain",void 0),l([c({type:Boolean,json:{write:!0}})],Xr.prototype,"editable",void 0),l([c({type:ke,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],Xr.prototype,"length",void 0),l([c({type:String,json:{write:!0}})],Xr.prototype,"name",void 0),l([c({type:Boolean,json:{write:!0}})],Xr.prototype,"nullable",void 0),l([X(Mk)],Xr.prototype,"type",void 0),l([c()],Xr.prototype,"valueType",void 0),l([G("valueType",["description"])],Xr.prototype,"readValueType",null),l([c({type:Boolean,json:{read:!1}})],Xr.prototype,"visible",void 0),Xr=I3=l([$("esri.layers.support.Field")],Xr);const Ik=Xr;var C3;let ah=C3=class extends N{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new C3({mapLayerId:e,gdbVersion:t})}};l([X({mapLayer:"map-layer"})],ah.prototype,"type",void 0),l([c({type:ke,json:{write:!0}})],ah.prototype,"mapLayerId",void 0),l([c({type:String,json:{write:!0}})],ah.prototype,"gdbVersion",void 0),ah=C3=l([$("esri.layers.support.source.MapLayerSource")],ah);var A3;let wa=A3=class extends N{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:r,spatialReference:i,geometryType:n}=this,s={workspaceId:e,query:t,oidFields:r,spatialReference:(i==null?void 0:i.clone())??void 0,geometryType:n};return new A3(s)}};l([X({queryTable:"query-table"})],wa.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],wa.prototype,"workspaceId",void 0),l([c({type:String,json:{write:!0}})],wa.prototype,"query",void 0),l([c({type:String,json:{write:!0}})],wa.prototype,"oidFields",void 0),l([c({type:me,json:{write:!0}})],wa.prototype,"spatialReference",void 0),l([X(Ale)],wa.prototype,"geometryType",void 0),wa=A3=l([$("esri.layers.support.source.QueryTableDataSource")],wa);var R3;let lh=R3=class extends N{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new R3({workspaceId:e,dataSourceName:t})}};l([X({raster:"raster"})],lh.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],lh.prototype,"dataSourceName",void 0),l([c({type:String,json:{write:!0}})],lh.prototype,"workspaceId",void 0),lh=R3=l([$("esri.layers.support.source.RasterDataSource")],lh);var O3;let Xc=O3=class extends N{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new O3({workspaceId:e,gdbVersion:t,dataSourceName:r})}};l([X({table:"table"})],Xc.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],Xc.prototype,"workspaceId",void 0),l([c({type:String,json:{write:!0}})],Xc.prototype,"gdbVersion",void 0),l([c({type:String,json:{write:!0}})],Xc.prototype,"dataSourceName",void 0),Xc=O3=l([$("esri.layers.support.source.TableDataSource")],Xc);var k3,P3;const D0e=mr()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let nn=k3=class extends N{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return aF()(e,t,r)}castLeftTableSource(e){return ss(N3(),e)}readRightTableSource(e,t,r){return aF()(e,t,r)}castRightTableSource(e){return ss(N3(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:r,rightTableSource:i,joinType:n}=this,s={leftTableKey:e,rightTableKey:t,leftTableSource:(r==null?void 0:r.clone())??void 0,rightTableSource:(i==null?void 0:i.clone())??void 0,joinType:n};return new k3(s)}};l([X({joinTable:"join-table"})],nn.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],nn.prototype,"leftTableKey",void 0),l([c({type:String,json:{write:!0}})],nn.prototype,"rightTableKey",void 0),l([c({json:{write:!0}})],nn.prototype,"leftTableSource",void 0),l([G("leftTableSource")],nn.prototype,"readLeftTableSource",null),l([Ne("leftTableSource")],nn.prototype,"castLeftTableSource",null),l([c({json:{write:!0}})],nn.prototype,"rightTableSource",void 0),l([G("rightTableSource")],nn.prototype,"readRightTableSource",null),l([Ne("rightTableSource")],nn.prototype,"castRightTableSource",null),l([X(D0e)],nn.prototype,"joinType",void 0),nn=k3=l([$("esri.layers.support.source.JoinTableDataSource")],nn);let ix=null;function aF(){return ix||(ix=wm({types:N3()})),ix}let nx=null;function N3(){return nx||(nx={key:"type",base:null,typeMap:{"data-layer":Us,"map-layer":ah}}),nx}const j0e={key:"type",base:null,typeMap:{"join-table":nn,"query-table":wa,raster:lh,table:Xc}};let Us=P3=class extends N{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new P3({fields:e,dataSource:t})}};l([X({dataLayer:"data-layer"})],Us.prototype,"type",void 0),l([c({type:[Ik],json:{write:!0}})],Us.prototype,"fields",void 0),l([c({types:j0e,json:{write:!0}})],Us.prototype,"dataSource",void 0),Us=P3=l([$("esri.layers.support.source.DataLayerSource")],Us),Us.from=bt(Us);let ed=class extends Me(N){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};l([c({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],ed.prototype,"onFields",void 0),l([c({type:String,json:{write:!0}})],ed.prototype,"operator",void 0),l([c({type:String,json:{write:!0}})],ed.prototype,"searchTerm",void 0),l([c({type:String,json:{write:!0}})],ed.prototype,"searchType",void 0),ed=l([$("esri.rest.support.FullTextSearch")],ed);const fW=ed;var L3;const lF=new _e({upperLeft:"upper-left",lowerLeft:"lower-left"});let td=L3=class extends N{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new L3(C({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};l([c({type:qe,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],td.prototype,"extent",void 0),l([c({type:["view","edit"],json:{write:!0}})],td.prototype,"mode",void 0),l([c({type:String,json:{read:lF.read,write:lF.write}})],td.prototype,"originPosition",void 0),l([c({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],td.prototype,"tolerance",void 0),td=L3=l([$("esri.rest.support.QuantizationParameters")],td);const mW=td,V0e=new _e({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var F3;const uF=new _e({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Ms=F3=class extends N{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=C(e))}clone(){return new F3({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:C(this.statisticParameters)})}};l([c({type:Number,json:{write:!0}})],Ms.prototype,"maxPointCount",void 0),l([c({type:Number,json:{write:!0}})],Ms.prototype,"maxRecordCount",void 0),l([c({type:Number,json:{write:!0}})],Ms.prototype,"maxVertexCount",void 0),l([c({type:String,json:{write:!0}})],Ms.prototype,"onStatisticField",void 0),l([c({type:String,json:{write:!0}})],Ms.prototype,"outStatisticFieldName",void 0),l([c({type:String,json:{read:{source:"statisticType",reader:uF.read},write:{target:"statisticType",writer:uF.write}}})],Ms.prototype,"statisticType",void 0),l([c({type:Object})],Ms.prototype,"statisticParameters",void 0),l([B("statisticParameters")],Ms.prototype,"writeStatisticParameters",null),Ms=F3=l([$("esri.rest.support.StatisticDefinition")],Ms);const U0e=Ms;var O_;const z0e=new _e({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let fe=O_=class extends N{static from(e){return E2(O_,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const i in e){const n=e[i];Array.isArray(n)?r[i]=n.map(s=>s instanceof Date?s.getTime():s):n instanceof Date?r[i]=n.getTime():r[i]=n}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new O_(C({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};fe.MAX_MAX_RECORD_COUNT_FACTOR=5,l([c({json:{write:!0}})],fe.prototype,"aggregateIds",void 0),l([c({type:Boolean,json:{write:!0}})],fe.prototype,"cacheHint",void 0),l([c({type:Boolean,json:{default:!1,write:!0}})],fe.prototype,"compactGeometryEnabled",void 0),l([c({json:{write:!0}})],fe.prototype,"datumTransformation",void 0),l([Ne("datumTransformation")],fe.prototype,"castDatumTransformation",null),l([c({type:Boolean,json:{default:!1,write:!0}})],fe.prototype,"defaultSpatialReferenceEnabled",void 0),l([c({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],fe.prototype,"distance",void 0),l([c({type:Us,json:{write:!0}})],fe.prototype,"dynamicDataSource",void 0),l([c({type:String,json:{write:!0}})],fe.prototype,"formatOf3DObjects",void 0),l([c({type:[fW],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],fe.prototype,"fullText",void 0),l([c({type:String,json:{write:!0}})],fe.prototype,"gdbVersion",void 0),l([c({types:bp,json:{read:dl,write:!0}})],fe.prototype,"geometry",void 0),l([c({type:Number,json:{write:!0}})],fe.prototype,"geometryPrecision",void 0),l([c({type:[String],json:{write:!0}})],fe.prototype,"groupByFieldsForStatistics",void 0),l([c({type:String,json:{write:!0}})],fe.prototype,"having",void 0),l([c({type:Date})],fe.prototype,"historicMoment",void 0),l([B("historicMoment")],fe.prototype,"writeHistoricMoment",null),l([c({type:Number,json:{write:!0}})],fe.prototype,"maxAllowableOffset",void 0),l([c({type:Number,cast:e=>e<1?1:e>fe.MAX_MAX_RECORD_COUNT_FACTOR?fe.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],fe.prototype,"maxRecordCountFactor",void 0),l([c({type:["xyFootprint"],json:{write:!0}})],fe.prototype,"multipatchOption",void 0),l([c({type:Number,json:{read:{source:"resultRecordCount"}}})],fe.prototype,"num",void 0),l([c({json:{write:!0}})],fe.prototype,"objectIds",void 0),l([c({type:[String],json:{write:!0}})],fe.prototype,"orderByFields",void 0),l([c({type:[String],json:{write:!0}})],fe.prototype,"outFields",void 0),l([c({type:me,json:{name:"outSR",write:!0}})],fe.prototype,"outSpatialReference",void 0),l([c({type:[U0e],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],fe.prototype,"outStatistics",void 0),l([c({json:{write:!0}})],fe.prototype,"parameterValues",void 0),l([B("parameterValues")],fe.prototype,"writeParameterValues",null),l([c({type:ge,json:{write:!0}})],fe.prototype,"pixelSize",void 0),l([c({type:mW,json:{write:!0}})],fe.prototype,"quantizationParameters",void 0),l([c({type:[Object],json:{write:!0}})],fe.prototype,"rangeValues",void 0),l([c({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],fe.prototype,"relationParameter",void 0),l([c({type:String,json:{write:!0}})],fe.prototype,"resultType",void 0),l([c({type:Boolean,json:{default:!1,write:!0}})],fe.prototype,"returnCentroid",void 0),l([c({type:Boolean,json:{default:!1,write:!0}})],fe.prototype,"returnDistinctValues",void 0),l([c({type:Boolean,json:{default:!0,write:!0}})],fe.prototype,"returnExceededLimitFeatures",void 0),l([c({type:Boolean,json:{write:!0}})],fe.prototype,"returnGeometry",void 0),l([c({type:Boolean,json:{default:!1,write:!0}})],fe.prototype,"returnQueryGeometry",void 0),l([c({type:Boolean,json:{default:!1,write:!0}})],fe.prototype,"returnM",void 0),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],fe.prototype,"returnZ",void 0),l([c({type:me,json:{write:!0}})],fe.prototype,"sourceSpatialReference",void 0),l([X(V0e,{ignoreUnknown:!1,name:"spatialRel"})],fe.prototype,"spatialRelationship",void 0),l([c({type:Number,json:{read:{source:"resultOffset"}}})],fe.prototype,"start",void 0),l([B("start"),B("num")],fe.prototype,"writeStart",null),l([c({type:String,json:{write:!0}})],fe.prototype,"sqlFormat",void 0),l([c({type:String,json:{write:!0}})],fe.prototype,"text",void 0),l([c({type:pr,json:{write:!0}})],fe.prototype,"timeExtent",void 0),l([c({type:Boolean,json:{default:!1,write:!0}})],fe.prototype,"timeReferenceUnknownClient",void 0),l([X(z0e,{ignoreUnknown:!1}),c({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null&&this.distance>0}}}}})],fe.prototype,"units",void 0),l([c({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],fe.prototype,"where",void 0),l([B("where")],fe.prototype,"writeWhere",null),fe=O_=l([$("esri.rest.support.Query")],fe);const Yo=fe;function W1(e){return!!(e!=null&&typeof e=="object"&&"createQuery"in e&&e.createQuery&&"on"in e&&e.on)}let _a=class extends cs.EventedAccessor{constructor(t){super(t),this._selectionMap=new A_,this._sources=new Y,this._trashCan=[],this._layerEditHandles=new Y,this._vizTaskId=0,this.showHighlight=!0}initialize(){this.addHandles([ce(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),pl(()=>this.sources,"change",r=>{const i=this._selectionMap;for(const n of r.removed)i.delete(n);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);const t=new Y;this.view.when().then(()=>{this.view.map&&(this.view.map.allLayers.flatten(r=>"sublayers"in r&&r.sublayers?r.sublayers:null).forEach(r=>{(W1(r)&&!Pfe(r)||Dc(r))&&t.add(r)}),this.sources=t)})}destroy(){this._layerEditHandles.drain(wt)}get selections(){return Array.from(this._selectionMap.entries()).map(t=>{const[r,i]=t;return{layer:r,selection:[...i.selection]}})}get count(){let t=0;for(const r of this._selectionMap.values())t+=r.selection.length;return t}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(t){rc(t,this._sources)}async getSelectedFeatures(t,r={},i="layerView"){const{view:n,selections:s}=this,o=(t!==void 0?s.filter(a=>t.includes(a.layer)):s).filter(a=>a.selection.length>0).map(async a=>{const{layer:u,selection:d}=a,h=Dc(u)?u.parent:u;if(h==null||!dF(h))return null;if(i==="layer")return pF(h,d,r);if(cF(h))return null;const f=await n.whenLayerView(h).catch(()=>null);return f?pF(f,d,r):null});return(await Promise.all(o)).filter(a=>a!=null)}updateSelection(t){const r=new Map;for(const[s,o]of this._selectionMap)r.set(s,[...o.selection]);let i=!1;const n=t.current.concat(t.added);for(const s of n){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(W1(o)||Dc(o))&&a!==null){const u=x2(r,o,()=>[]);u.includes(a)||(u.push(a),i=!0)}}for(const s of t.removed){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(W1(o)||Dc(o))&&a!==null){const u=r.get(o),d=u==null?void 0:u.indexOf(a);d!==void 0&&d>=0&&(u==null||u.splice(d,1),i=!0)}}if(i){const{_selectionMap:s,_trashCan:o}=this,a=[];for(const[u,d]of r){const h=s.get(u);h!==void 0&&o.push(h),s.set(u,{selection:d}),a.push({layer:u,selection:d,...uL(h!==void 0?h.selection:[],d)})}this._onSelectionChange(a)}}setSelection(t,r){this._setSelection(t,r)}getSelection(t){const r=this._selectionMap.get(t);return r==null?void 0:r.selection}appendToSelection(t,r){const i=this._selectionMap.get(t),n=i!==void 0?[...i.selection]:[];for(const s of r)n.includes(s)||n.push(s);this._setSelection(t,n)}removeFromSelection(t,r){const i=this._selectionMap.get(t);if(!i)return;const n=[];for(const s of i.selection)r.includes(s)||n.push(s);this._setSelection(t,n)}toggleInSelection(t,r){const i=this._selectionMap.get(t);if(!i||i.selection.length===0)return void this._setSelection(t,r);const n=new Set(i.selection),s=new Set(r),o=Ose(n,s);this._setSelection(t,Array.from(o))}clear(){const t=this._selectionMap.values();this._trashCan.push(...t);const r=[];for(const[i,n]of this._selectionMap.entries())r.push({layer:i,added:[],removed:[...n.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(r)}_onSelectionChange(t){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:t})}_refreshVisualization(){var o;if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;){const a=this._trashCan.pop();(o=a==null?void 0:a.highlightHandle)==null||o.remove()}const{sources:t,view:r,_selectionMap:i,showHighlight:n}=this,s=this._vizTaskId;for(const a of t){const u=i.get(a),d=Dc(a)?a.parent:a;if(d!=null&&dF(d)){if(cF(d))continue;r.whenLayerView(d).then(h=>{var f;(f=u==null?void 0:u.highlightHandle)==null||f.remove(),u!=null&&n&&s===this._vizTaskId&&"highlight"in h&&typeof h.highlight=="function"&&u.selection.length>0&&(u.highlightHandle=h.highlight(u.selection,"selection"))}).catch(()=>{var h;(h=u==null?void 0:u.highlightHandle)==null||h.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(wt);for(const t of this.sources){const r=Dc(t)?t.parent:t;if(r!=null&&W1(r)){const i=r.on("edits",n=>{this._handleEditChanges(n,t)});this._layerEditHandles.push(i)}}}_handleEditChanges(t,r){if(t.deletedFeatures!==void 0&&t.deletedFeatures.length>0&&this._selectionMap.has(r)){const i=t.deletedFeatures.filter(n=>n.error==null).map(n=>n.objectId).filter(Js);this.removeFromSelection(r,i)}}_setSelection(t,r){if(!this.sources.includes(t))throw new Error(`Cannot set selection on layer ${t.title} because it is not in 'sources'`);const i=this._selectionMap.get(t);if(i===void 0||!B0e(i,{selection:r})){i!==void 0&&this._trashCan.push(i),this._selectionMap.set(t,{selection:[...r]});const n={layer:t,selection:[...r],...uL(i!==void 0?i.selection:[],r)};this._onSelectionChange([n])}}};l([c({readOnly:!0,nonNullable:!0})],_a.prototype,"selections",null),l([c({readOnly:!0,nonNullable:!0})],_a.prototype,"count",null),l([c({constructOnly:!0,nonNullable:!0})],_a.prototype,"view",void 0),l([c({readOnly:!0,nonNullable:!0})],_a.prototype,"hasSelection",null),l([c()],_a.prototype,"showHighlight",void 0),l([c()],_a.prototype,"sources",null),_a=l([$("esri.views.SelectionManager")],_a);const cF=e=>{var t;return Dc(e)?((t=e.parent)==null?void 0:t.isTable)===!0:e.isTable},G0e=e=>e.layer!==void 0,dF=e=>(e==null?void 0:e.when)!==void 0,B0e=(e,t)=>{if(e==null&&t==null)return!0;if(e!=null&&t==null||e==null&&t!=null)return!1;if(e!=null&&t!=null&&e.selection!=null&&t.selection!=null){const r=[...e.selection],i=[...t.selection];if(r.length!==i.length)return!1;r.sort(),i.sort();for(let n=0;n<r.length;n++)if(r[n]!==i[n])return!1}return!0},pF=async(e,t,r={})=>{let i;if(G0e(e)){const n=e;i=n===void 0?null:await n.queryFeatures(new Yo({...r,objectIds:t})).then(s=>({data:s,layer:e.layer}))}else{const n=e;i=n===void 0?null:await n.queryFeatures(new Yo({...r,objectIds:t})).then(s=>({data:s,layer:n}))}return i},q0e=_a;let sg=class extends Me(te){constructor(t){super(t),this.accentColor=new le([255,127,0]),this.textColor=new le([255,255,255])}};l([c({type:le,nonNullable:!0})],sg.prototype,"accentColor",void 0),l([c({type:le,nonNullable:!0})],sg.prototype,"textColor",void 0),sg=l([$("esri.views.Theme")],sg);const D3=sg;var hF;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(hF||(hF={}));const yW=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],gW={};function vW(e){return!!gW[e]}function H0e(e){for(const t of e)if(!vW(t))return!1;return!0}yW.forEach(e=>{gW[e]=!0});let W0e=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:r,priority:i},n)=>{var s;return(s=this.inputManager)==null?void 0:s.installHandlers(n,[r],i)})}disconnect(){this.inputManager&&this._handlers.forEach((t,r)=>{var i;return(i=this.inputManager)==null?void 0:i.uninstallHandlers(r)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,r,i,n){const s=Array.isArray(t)?t:t.split(",");if(!H0e(s))return s.some(vW)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(r)?a=r:(o=r,a=[]),typeof i=="function"?o=i:n=i,n=n??Hu.DEFAULT;const u=this._createUniqueGroupName(),d=new Z0e(this.view,s,a,o);this._handlers.set(u,{handler:d,priority:n});for(const h of s){const f=this._handlerCounts.get(h)||0;this._handlerCounts.set(h,f+1)}return this.inputManager&&this.inputManager.installHandlers(u,[d],n),Be(()=>this._removeHandler(u,s))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,r){if(this._handlers.has(t)){this._handlers.delete(t);for(const i of r){const n=this._handlerCounts.get(i);n===void 0||(n===1?this._handlerCounts.delete(i):this._handlerCounts.set(i,n-1))}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},Z0e=class extends yr{constructor(t,r,i,n){super(!0),this._latestDragStart=void 0,this.view=t;for(const s of r)switch(s){case"click":this.registerIncoming("click",i,o=>n(Y0e(t,o)));break;case"double-click":this.registerIncoming("double-click",i,o=>n(Q0e(t,o)));break;case"immediate-click":this.registerIncoming("immediate-click",i,o=>n(X0e(t,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,o=>n(eve(t,o)));break;case"hold":this.registerIncoming("hold",i,o=>n(tve(t,o)));break;case"drag":this.registerIncoming("drag",i,o=>{const a=this._wrapDrag(o);a&&n(a)});break;case"key-down":this.registerIncoming("key-down",i,o=>n(rve(o)));break;case"key-up":this.registerIncoming("key-up",i,o=>n(ive(o)));break;case"pointer-down":this.registerIncoming("pointer-down",i,o=>n(dy(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",i,o=>n(dy(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",i,o=>n(dy(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,o=>n(nve(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,o=>n(sve(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,o=>n(dy(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,o=>n(dy(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",i,o=>{n(ove(o))});break;case"focus":this.registerIncoming("focus",i,o=>{n(J0e(o))});break;case"blur":this.registerIncoming("blur",i,o=>{n(K0e(o))})}}_wrapDrag(t){const r=t.data,{x:i,y:n}=r.center,{action:s,pointerType:o,button:a}=r;if(s==="start"&&(this._latestDragStart=r),!this._latestDragStart)return;const u=r.pointer.native,d=r.buttons,{cancelable:h,timestamp:f}=t,m={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:i,y:n,origin:m,pointerType:o,button:a,buttons:d,radius:r.radius,angle:J7(r.angle),native:u,timestamp:f,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}};function J0e(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function K0e(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function Y0e(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:u}=t.data,{cancelable:d,timestamp:h}=t;return{type:"click",pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:h,screenPoint:Ir(s,o),mapPoint:Gv(e,s,o),eventId:u,cancelable:d,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}function Q0e(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:u}=t.data,{cancelable:d,timestamp:h}=t;return{type:"double-click",pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:h,mapPoint:Gv(e,s,o),eventId:u,cancelable:d,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}function X0e(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:u}=t.data,d=a.pointerId,{cancelable:h,timestamp:f}=t;return{type:"immediate-click",pointerId:d,pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:f,mapPoint:Gv(e,s,o),eventId:u,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}function eve(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:u}=t.data,d=a.pointerId,{cancelable:h,timestamp:f}=t;return{type:"immediate-double-click",pointerId:d,pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:f,mapPoint:Gv(e,s,o),eventId:u,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}function tve(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a}=t.data,{cancelable:u,timestamp:d}=t;return{type:"hold",pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:d,mapPoint:Gv(e,s,o),cancelable:u,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}function Gv(e,t,r){return e.toMap(Ir(t,r),{exclude:[]})}function rve(e){const{key:t,repeat:r,native:i}=e.data,{cancelable:n,timestamp:s}=e;return{type:"key-down",key:t,repeat:r,native:i,timestamp:s,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}function ive(e){const{key:t,native:r}=e.data,{cancelable:i,timestamp:n}=e;return{type:"key-up",key:t,native:r,timestamp:n,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:s=>e.async(s),preventDefault:()=>e.preventDefault()}}function dy(e,t){const{x:r,y:i,button:n,buttons:s,native:o,eventId:a}=e.data,u=o.pointerId,d=o.pointerType,{cancelable:h,timestamp:f}=e;return{type:t,x:r,y:i,pointerId:u,pointerType:d,button:n,buttons:s,native:o,timestamp:f,eventId:a,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}function nve(e){const{x:t,y:r,buttons:i,native:n,eventId:s}=e.data.currentEvent,{button:o}=e.data.startEvent,a=e.data.startEvent.native.pointerId,u=e.data.startEvent.native.pointerType,d=e.data.action,h={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:f,timestamp:m}=e;return{type:"pointer-drag",x:t,y:r,pointerId:a,pointerType:u,button:o,buttons:i,action:d,origin:h,native:n,timestamp:m,eventId:s,cancelable:f,stopPropagation:()=>e.stopPropagation(),async:y=>e.async(y),preventDefault:()=>e.preventDefault()}}function sve(e){const{cancelable:t,data:r,timestamp:i}=e,{x:n,y:s,deltaY:o,native:a}=r;return{type:"mouse-wheel",x:n,y:s,deltaY:o,native:a,timestamp:i,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:u=>e.async(u),preventDefault:()=>e.preventDefault()}}function ove(e){const{action:t,state:r,device:i}=e.data,{cancelable:n,timestamp:s}=e,{buttons:o,axes:a}=r;return{type:"gamepad",device:i,timestamp:s,action:t,buttons:o,axes:a,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:u=>e.async(u),preventDefault:()=>e.preventDefault()}}var tv,fF,mF;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(tv||(tv={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(fF||(fF={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(mF||(mF={}));function ave(e){return[e.on("before-add",t=>{const r=t.item;if(r==null||e.includes(r))return j.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();r.onAdd()}),e.on("after-remove",t=>{const r=t.item;r.active&&(r.view.activeTool=null),r.destroy()})]}function j3(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(tv.USER)&&e.getEditableFlag(tv.MANAGER)}function bo(e){return Ir(e.x,e.y)}function wW(e,t){var i;const r=(i=e instanceof HTMLElement?e:e.surface)==null?void 0:i.getBoundingClientRect();return r?Ir(t.clientX-r.left,t.clientY-r.top):Ir(0,0)}function _W(e,t){return t instanceof Event?wW(e,t):bo(t)}function bW(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let lve=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,r){const i=()=>t.stopPropagation();switch(t.type){case"pointer-move":gF(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:t.action==="start"?this._externallyDragging=!0:t.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(i(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!vF(t))break;const n=bo(t),s=Fp(n,t.pointerType,r.forEachTool);if(s==null)break;const o=s.manipulator,a=s.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(t)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,t,r),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(t)&&!o.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:o,tool:a,start:n,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&r.activeTool==null&&(this._revertToNullActiveTool=!0,r.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:n}),i());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,r);break;case"pointer-drag":{if(!vF(t))break;const n=this._grabbedManipulators.get(t.pointerId),s=n==null?void 0:n.manipulator,o=n==null?void 0:n.tool;if(s==null||o==null)break;const a=bo(t);a.x=os(a.x,0,r.view.width),a.y=os(a.y,0,r.view.height);const u=n.start,d=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,d?s.events.emit("drag",{action:"update",start:u,screenPoint:a}):s.events.emit("drag",{action:"start",start:u,screenPoint:a,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:o,manipulator:s,start:u}));break;case"end":s.dragging=!1,d&&s.events.emit("drag",{action:"end",start:u,screenPoint:a}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,r)}i();break}case"immediate-click":{const n=bo(t),s=Fp(n,t.pointerType,r.forEachTool);if(uve(t)||r.forEachTool(d=>{if((s==null||s.tool!==d||d.automaticManipulatorSelection)&&d.manipulators){let h=!1;d.manipulators.forEach(({manipulator:f})=>{f.selected&&(f.selected=!1,h=!0)}),h&&d.onManipulatorSelectionChanged&&d.onManipulatorSelectionChanged()}}),s==null)break;const{manipulator:o,tool:a}=s;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const u=t.native.shiftKey;o.events.emit("immediate-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:u,stopPropagation:i}),sx(o,i);break}case"click":{const n=bo(t),s=Fp(n,t.pointerType,r.forEachTool),o=s==null?void 0:s.manipulator;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit(t.type,{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a}),i();break}case"double-click":{const n=bo(t),s=Fp(n,t.pointerType,r.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i}),sx(o,i);break}case"immediate-double-click":{const n=bo(t),s=Fp(n,t.pointerType,r.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i}),t.pointerType==="mouse"&&sx(o,i);break}}this._onFocusChange(r.forEachTool)}_releaseManipulatorBeforeDragging(t,r,i){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:r.pointerType,screenPoint:bo(r)}),this._grabbedManipulators.forEach(({manipulator:n},s)=>{n===t&&this._grabbedManipulators.delete(s)}),this._afterManipulatorRelease(i.setActiveTool)}_handlePointerEnd(t,r){var n;const i=(n=this._grabbedManipulators.get(t.pointerId))==null?void 0:n.manipulator;i!=null&&i.grabbing&&(i.grabbing=!1,i.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:bo(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorRelease(r.setActiveTool))}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=yF(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=yF(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const r=new Set,i=new Set;this._grabbedManipulators.forEach(({tool:n})=>{r.add(n)}),this._hoveredManipulators.forEach(({tool:n})=>{i.add(n)}),t(n=>{n.hasGrabbedManipulators=r.has(n),n.hasHoveredManipulators=i.has(n);const s=this._grabbedManipulators.values(),o=Xne(s,({tool:a})=>a===n);n.firstGrabbedManipulator=o!=null?o.manipulator:null})}clearPointers(t,{forEachTool:r,setActiveTool:i},n=!0,s){const o=(a,u)=>a===t&&(s==null||s===u);this._grabbedManipulators.forEach(({tool:a,manipulator:u,pointerType:d},h)=>{o(a,u)&&(this._grabbedManipulators.delete(h),u.grabbing=!1,u.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:d}))}),this._draggedManipulators.forEach(({tool:a,manipulator:u},d)=>{o(a,u)&&(this._draggedManipulators.delete(d),u.dragging=!1,u.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:a,manipulator:u},d)=>{o(a,u)&&(this._hoveredManipulators.delete(d),u.hovering=!1)}),this._afterManipulatorRelease(i),this._onFocusChange(r)}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((r,i)=>{this._updateHoveredStateForPointerAtScreenPosition(Ir(r.x,r.y),i,r.pointerType,t)})}handleHoverEvent(t,r){const i=t.type;i!=="pointer-up"&&i!=="immediate-click"&&i!=="pointer-move"||!gF(t.pointerType)||(i!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(t.pointerId):this._updateHoveredStateForPointerAtScreenPosition(bo(t),t.pointerId,t.pointerType,r))}_updateHoveredStateForPointerAtScreenPosition(t,r,i,n){var a;let s=Fp(t,i,n);const o=(a=this._hoveredManipulators.get(r))==null?void 0:a.manipulator;s==null||s.manipulator.interactive||(s=null),s!=null&&o===s.manipulator||(o!=null&&(o.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(r,s)):this._hoveredManipulators.delete(r),this._onFocusChange(n))}_afterManipulatorRelease(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(t){this._hoveredManipulators.forEach(({manipulator:r},i)=>{t===i&&(this._hoveredManipulators.delete(t),r.hovering=!1)})}};function yF(e){for(const{manipulator:t}of e.values())if(t!=null&&t.interactive){if(t.grabbing&&t.grabCursor)return t.grabCursor;if(t.cursor)return t.cursor}return null}function Fp(e,t,r){let i=null;return r(n=>{if(n.manipulators==null||!j3(n))return!1;const s=n.manipulators.intersect(e,t);return s!=null&&(i={tool:n,manipulator:s},!0)}),i}function gF(e){return e==="mouse"}function vF(e){return e.pointerType!=="mouse"||e.button===0}function uve(e){return!!e.native.shiftKey}function sx(e,t){e!=null&&e.consumesClicks&&t()}const wF="attached",ox="tools",cve=1e3;let So=class extends te{constructor(t){super(t),this._updatingHandles=new qd,this._clock=bm,this._manipulatorState=new lve,this.tools=new Y,this.cursor=null,this._interacting=!1,this._interactingTimeout=cve,this._interactingTimeoutHandle=null,this._forEachTool=r=>{for(const i of this.tools.items)if(r(i))return}}initialize(){this.addHandles([this.view.on(yW,t=>{this._handleInputEvent(t)},Hu.TOOL),...ave(this.tools),this.tools.on("before-add",({item:t})=>{this._updateToolEditableFlag(t)}),this.tools.on("before-remove",({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(t=>t.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(t!=null&&!this.view.ready)return void j.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const r=this.activeTool;this._set("activeTool",t),r!=null&&r.deactivate(),t!=null&&t.activate(),this._removeIncompleteTools(t);for(const i of this.tools){this._updateToolEditableFlag(i);const n=j3(i);this.activeTool!=null&&n||this._manipulatorState.clearPointers(i,this._manipulatorStateEventArgs,!n)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(t=>t.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=wt(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){var t;this.view.type==="3d"?this.addHandles([ce(()=>{const{state:r}=this.view;return"camera"in r&&r.camera},()=>this._forEachManipulator(r=>r.onViewChange())),(t=this.view.elevationProvider)==null?void 0:t.on("elevation-change",r=>this._forEachManipulator(i=>i.onElevationChange(r)))],wF):this.addHandles(ce(()=>this.view.extent,()=>this._forEachManipulator(r=>r.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(wF),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){this._forEachTool(r=>{r.manipulators&&r.manipulators.forEach(({manipulator:i})=>t(i,r))})}_handleInputEvent(t){let r=!1;const i={...t,stopPropagation:()=>{r=!0,t.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(n=>{!r&&n.visible&&n.handleInputEvent(i)}),!r&&t.type==="key-down"&&t.key==="Escape"&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,this._manipulatorStateEventArgs),r||this.activeTool==null||this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor(),t.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(ox),this._forEachTool(t=>{if(t instanceof te){const r=ce(()=>[t.cursor,t.visible,t.editable],()=>{j3(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(r,ox)}t.manipulators&&this.addHandles([t.manipulators.on("after-remove",r=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,r.item.manipulator)}),t.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],ox)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){var r;(r=t.setEditableFlag)==null||r.call(t,tv.MANAGER,this.activeTool==null||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;t==null&&this._forEachTool(r=>!(r.cursor==null||!r.visible)&&(t=r.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter(r=>(t==null||r!==t)&&!r.created&&r.removeIncompleteOnCancel).forEach(r=>{this.tools.remove(r)})}get test(){}};l([c({constructOnly:!0,nonNullable:!0})],So.prototype,"view",void 0),l([c({value:null})],So.prototype,"activeTool",null),l([c({readOnly:!0,type:Y})],So.prototype,"tools",void 0),l([c({readOnly:!0})],So.prototype,"cursor",void 0),l([c({readOnly:!0})],So.prototype,"updating",null),l([c()],So.prototype,"_interacting",void 0),l([c({readOnly:!0})],So.prototype,"interacting",null),So=l([$("esri.views.ToolViewManager")],So);let uh=class extends te{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",t.mapping==="standard"?this._detectedDeviceType="standard":dve.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){const t=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return pve[this.deviceType]}};l([c({nonNullable:!0,readOnly:!0})],uh.prototype,"nativeIndex",void 0),l([c({type:String,readOnly:!0})],uh.prototype,"deviceType",null),l([c({type:Number,readOnly:!0})],uh.prototype,"axisThreshold",null),uh=l([$("esri.views.input.gamepad.GamepadInputDevice")],uh);const Ck=uh,dve=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),pve={standard:.15,spacemouse:.025,unknown:0};let og=class extends te{constructor(...t){super(...t),this.devices=new Y,this.enabledFocusMode="document"}};l([c({type:Y.ofType(Ck),readOnly:!0})],og.prototype,"devices",void 0),l([c({type:["document","view","none"]})],og.prototype,"enabledFocusMode",void 0),og=l([$("esri.views.input.gamepad.GamepadSettings")],og);const hve=og;let k_=class extends te{constructor(){super(...arguments),this.gamepad=new hve}};l([c({readOnly:!0})],k_.prototype,"gamepad",void 0),k_=l([$("esri.views.input.Input")],k_);const fve=k_,SW=()=>je.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;let Wl=class extends te{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};l([c({type:Boolean,nonNullable:!0})],Wl.prototype,"enabled",void 0),l([c({type:Ck})],Wl.prototype,"device",void 0),l([c({type:["pan","zoom"],nonNullable:!0})],Wl.prototype,"mode",void 0),l([c({type:["forward-down","forward-up"],nonNullable:!0})],Wl.prototype,"tiltDirection",void 0),l([c({type:Number,nonNullable:!0})],Wl.prototype,"velocityFactor",void 0),Wl=l([$("esri.views.navigation.gamepad.GamepadSettings")],Wl);const $W=Wl;let rd=class extends te{constructor(t){super(t),this.browserTouchPanEnabled=!0,this.gamepad=new $W,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!SW()}};l([c({type:Boolean})],rd.prototype,"browserTouchPanEnabled",void 0),l([c({type:$W,nonNullable:!0})],rd.prototype,"gamepad",void 0),l([c({type:Boolean})],rd.prototype,"momentumEnabled",void 0),l([c({type:Boolean})],rd.prototype,"mouseWheelZoomEnabled",void 0),rd=l([$("esri.views.navigation.Navigation")],rd);const TW=rd,xW={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},EW=Object.values(xW),MW=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${EW.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),mve=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${EW.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),yve=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function r4e(e){return MW.test(e)}function ic(e){if(e==null)return null;const t=hr(e),r=(t==null?void 0:t.path.match(MW))||(t==null?void 0:t.path.match(mve));if(!r)return null;const[,i,n,s,o]=r,a=n.indexOf("/");return{title:Ak(a!==-1?n.slice(a+1):n),serverType:xW[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:i}}}function gve(e){const t=hr(e).path.match(yve);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function Ak(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function vve(e,t){const r=[];if(e){const i=ic(e);i!=null&&i.title&&r.push(i.title)}if(t){const i=Ak(t);r.push(i)}if(r.length===2){if(r[0].toLowerCase().includes(r[1].toLowerCase()))return r[0];if(r[1].toLowerCase().includes(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function IW(e){let t=rs(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")))}function wve(e,t){return e&&c7(d7(e,t))}function _ve(e){let{url:t}=e;if(!t)return{url:t};t=d7(t,e.logger);const r=hr(t),i=ic(r.path);let n;if(i!=null)i.sublayer!=null&&e.layer.layerId==null&&(n=i.sublayer),t=i.url.path;else if(e.nonStandardUrlAllowed){const s=gve(r.path);s!=null&&(t=s.serviceUrl,n=s.sublayerId)}return{url:c7(t),layerId:n}}function bve(e,t,r,i,n){dp(t,i,"url",n),i.url&&e.layerId!=null&&(i.url=em(i.url,r,e.layerId.toString()))}function i4e(e){if(!e)return!1;const t=e.toLowerCase(),r=t.includes("/services/"),i=t.includes("/mapserver/wmsserver"),n=t.includes("/imageserver/wmsserver"),s=t.includes("/wmsserver");return r&&(i||n||s)}function n4e(e){var i;if(!e)return!1;const t=new Bu(ji(e)),r=(i=t.authority)==null?void 0:i.toLowerCase();return r==="server.arcgisonline.com"||r==="services.arcgisonline.com"}var _F;function Sve(e){var i;if(e.type==="integrated-mesh-3dtiles")return null;const t=e.url?ic(e.url):void 0;return!(((i=e.spatialReference)==null?void 0:i.vcsWkid)==null&&t!=null&&t.serverType==="ImageServer")&&CW(e)&&e.heightModelInfo?e.heightModelInfo:$ve(e)?l$.deriveUnitFromSR(xve,e.spatialReference):null}function CW(e){return"heightModelInfo"in e}function AW(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function $ve(e){return AW(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):RW(e)}function Tve(e){return e.layers!=null||RW(e)||AW(e)||CW(e)}function RW(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"focusArea":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(_F||(_F={}));const xve=new l$({heightModel:"gravity-related-height"});var zS;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(zS||(zS={}));let V3,ax=null;async function Eve(e){ax||(ax=D(()=>import("./geometryServiceUtils-DTe6GIz7.js"),[],import.meta.url).then(t=>V3=t)),await ax,_t(e)}async function OW(e,t,r,i){if(!e)return null;const n=e.spatialReference;return gl()||ro(n,t)?cc(e,t):V3?V3.projectGeometry(e,t,r,i):(await Promise.race([Eve(i),hl(i)]),OW(e,t,r,i))}let tt=class extends te{constructor(t){super(t),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=ep(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var i,n,s,o;const t=(i=this.map)==null?void 0:i.call(this),r=[];return this.priorityCollection!=null&&r.push(this.priorityCollection),r.push({parent:t==null?void 0:t.basemap,layers:(n=t==null?void 0:t.basemap)==null?void 0:n.baseLayers},{layers:t==null?void 0:t.layers},{parent:t==null?void 0:t.ground,layers:(s=t==null?void 0:t.ground)==null?void 0:s.layers},{parent:t==null?void 0:t.basemap,layers:(o=t==null?void 0:t.basemap)==null?void 0:o.referenceLayers}),r}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let t;if(this._collectLayers(this.mapCollections,i=>{const n=this._getSupportedSpatialReferences(i);if(n.length>0){const s=this._narrowDownSpatialReferenceCandidates(t,n);s!=null&&(t=s)}return(t==null?void 0:t.length)===1})&&(t==null?void 0:t.length)!==1)return{updating:!0};const r=this._pickSpatialReferenceCandidate(t);return{spatialReference:(r==null?void 0:r.spatialReference)??null,viewingMode:(r==null?void 0:r.viewingMode)??null,updating:!1}}get _tileInfoTask(){var s,o;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const t=(s=this.map)==null?void 0:s.call(this),r=this.spatialReference;if(!r)return{updating:this._spatialReferenceTask.updating};let i;const n=this._collectLayers([{parent:t==null?void 0:t.basemap,layers:(o=t==null?void 0:t.basemap)==null?void 0:o.baseLayers},{layers:t==null?void 0:t.layers}],a=>{var u;return!(!("tileInfo"in a)||!((u=a.tileInfo)!=null&&u.spatialReference.equals(r)))&&(i=a,!0)},a=>"tileInfo"in a);return i?{tileInfo:i.tileInfo,updating:!1}:{updating:n}}get _heightModelInfoTask(){var i;if(!this.required.heightModelInfo||this.suspended&&((i=this._get("_heightModelInfoTask"))!=null&&i.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};let t={};const r=this._collectLayers(this.mapCollections,n=>{var o,a;const s=Sve(n);return!!s&&(t={heightModelInfo:s,vcsWkid:(o=n.spatialReference)==null?void 0:o.vcsWkid,latestVcsWkid:(a=n.spatialReference)==null?void 0:a.latestVcsWkid},!0)},n=>Tve(n));return{...t,updating:r}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=[],r=this._collectLayers(this.mapCollections,i=>{const n="fullExtents"in i&&i.fullExtents||(i.fullExtent!=null?[i.fullExtent]:[]),s=this.requiresExtentInSpatialReference?null:n[0],o=n.find(a=>a.spatialReference.equals(this.spatialReference))??s;if(o)return t.push({extent:o,layer:i}),!0;if(this._getSupportedSpatialReferences(i).length>0)for(const a of n)t.push({extent:a,layer:i});return!1});return{candidates:t,updating:r}}get _extentTask(){const{candidates:t,updating:r}=this._extentCandidatesTask;if(r)return{updating:r};if(t==null||t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(t),n=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=ep(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:n.clone(),task:OO(async s=>{try{const o=await OW(i.extent,n,"portalItem"in i.layer?i.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(Xs(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,r){if(t==null)return r;const i=new Array;for(const n of t)for(const s of r){if(!n.spatialReference.equals(s.spatialReference))continue;const o=Ive(n.viewingMode,s.viewingMode);if(o!==!1){i.push({spatialReference:n.spatialReference,viewingMode:o});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(t){const r=this.defaultSpatialReference;return t==null||t.length<1?r?{spatialReference:r,viewingMode:null}:null:(r!=null&&t.length>1&&t.some(({spatialReference:i})=>i.equals(r))&&(t=t.filter(({spatialReference:i})=>i.equals(r))),t.length>1&&t.some(({viewingMode:i})=>i!==zS.Local)&&(t=t.filter(({viewingMode:i})=>i!==zS.Local)),t[0])}_getSupportedSpatialReferences(t){const r="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(r.length===0)return[];const i=[];for(const n of r){const s=this.getSpatialReferenceSupport(n,t);if(s!=null){const o=s.constraints??[{spatialReference:n,viewingMode:null}];for(const{spatialReference:a,viewingMode:u}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||i.push({spatialReference:a,viewingMode:u})}}return i}_pickExtentCandidate(t){const r=this.spatialReference;return t.find(({extent:i})=>r.equals(i.spatialReference))||t[0]}_collectLayers(t,r,i=()=>!0){var s;if(this._loadMaybe((s=this.map)==null?void 0:s.call(this))!=="loaded")return!0;const n=new Mve(i,r);for(const o of t)if(this._collectCollection(o,n),n.done||n.preloading===this.sourcePreloadCount)break;return n.updating}_collectCollection(t,r){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return r.updating=!0,void++r.preloading;case"failed":return}for(const i of t.layers)if(r.layerFilter(i)){switch(this._loadMaybe(i)){case"failed":continue;case"loading":r.updating=!0,++r.preloading;break;case"loaded":if(r.updating||(r.done=r.pushLayer(i)),r.done||r.preloading===this.sourcePreloadCount)break;"layers"in i&&this._collectCollection({layers:i.layers},r)}if(r.done||r.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&t.loadStatus!=null?t.loadStatus==="not-loaded"?(t.load().catch(r=>{Or(r)}),"loading"):t.loadStatus:"loaded"}};l([c()],tt.prototype,"required",void 0),l([c({constructOnly:!0})],tt.prototype,"map",void 0),l([c({constructOnly:!0})],tt.prototype,"getSpatialReferenceSupport",void 0),l([c()],tt.prototype,"defaultSpatialReference",void 0),l([c()],tt.prototype,"userSpatialReference",void 0),l([c()],tt.prototype,"sourcePreloadCount",void 0),l([c()],tt.prototype,"priorityCollection",void 0),l([c()],tt.prototype,"requiresExtentInSpatialReference",void 0),l([c()],tt.prototype,"suspended",void 0),l([c({readOnly:!0})],tt.prototype,"ready",null),l([c({readOnly:!0})],tt.prototype,"heightModelInfoReady",null),l([c({readOnly:!0})],tt.prototype,"spatialReference",null),l([c({readOnly:!0})],tt.prototype,"extent",null),l([c({readOnly:!0})],tt.prototype,"heightModelInfo",null),l([c({readOnly:!0})],tt.prototype,"vcsWkid",null),l([c({readOnly:!0})],tt.prototype,"latestVcsWkid",null),l([c({readOnly:!0})],tt.prototype,"viewingMode",null),l([c({readOnly:!0})],tt.prototype,"tileInfo",null),l([c({readOnly:!0})],tt.prototype,"mapCollections",null),l([c({readOnly:!0})],tt.prototype,"_spatialReferenceTask",null),l([c({readOnly:!0})],tt.prototype,"_tileInfoTask",null),l([c({readOnly:!0})],tt.prototype,"_heightModelInfoTask",null),l([c({readOnly:!0})],tt.prototype,"_extentCandidatesTask",null),l([c()],tt.prototype,"_extentTask",null),l([c()],tt.prototype,"_projectExtentTask",void 0),tt=l([$("esri.views.support.DefaultsFromMap")],tt);let Mve=class{constructor(t,r){this.layerFilter=t,this.pushLayer=r,this.preloading=-1,this.updating=!1,this.done=!1}};function Ive(e,t){return e!=null?t!=null?e===t&&e:e:t}var ag;let ae=ag=class extends cs.EventedMixin(Fv(te)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new _m,this.updatingHandles=new qd,this.allLayerViews=new B0({getCollections:()=>{var t,r,i;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(r=this.groundView)==null?void 0:r.layerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:Ave}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new u0,this.analyses=new jS,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Y,this.magnifier=new cW,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new fve,this.navigation=new TW,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new W0e(this),this.persistableViewModels=new Y,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(ce(()=>this.preconditionsReady,t=>{var i,n;const r=this.ready;if(t?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,ag.views.add(this)):(this._lockedSpatialReference=null,ag.views.remove(this)),this.notifyChange("spatialReference"),!t&&r)(i=this.toolViewManager)==null||i.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(n=this.layerViewManager)==null||n.clear(),this._teardown();else if(t&&!r){try{this._startup()}catch(s){return void queueMicrotask(()=>{this.fatalError=new R("startup-error",null,s)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},Jo))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,up(()=>this.ready)))),this.basemapView=new A0e({view:this}),this.layerViewManager=new P0e({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new So({view:this}),this._setupSpatialReferenceLogger(),this.selectionManager=new q0e({view:this}),this.addHandles([ce(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},dn),ce(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},Jo),ce(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},dn)])}_setupSpatialReferenceLogger(){let e=null;this.addHandles([ce(()=>{var t;return(t=this.defaultsFromMap)==null?void 0:t.ready},t=>{var i;const r=((i=this.map)==null?void 0:i.allLayers.length)>0;if(t&&!this.spatialReference&&r){if(e!=null)return;const n=Be(()=>e=ep(e));e=OO(async s=>{try{await oO(this.spatialReferenceWarningDelay,null,s)}catch{return}finally{e=null}j.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.addHandles(n,"spatial-reference-logger-task")}else this.removeHandles("spatial-reference-logger-task")},{sync:!0})])}destroy(){var e,t;this.destroyed||(ag.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=st(this.graphics),this.analyses=st(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),st(this.analysisViewManager),this.toolViewManager=st(this.toolViewManager),this.layerViewManager=st(this.layerViewManager),this.selectionManager=st(this.selectionManager),this.basemapView=st(this.basemapView),(e=this.groundView)==null||e.destroy(),(t=this.layerViews)==null||t.forEach(r=>r.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=st(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return j.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new tt({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,t)=>this.getSpatialReferenceSupport(e,t),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||ls.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(j.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),ls.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get spatialReference(){var t,r;const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&((r=(t=this.defaultsFromMap)==null?void 0:t.required)!=null&&r.heightModelInfo)){const i=e.clone();return i.vcsWkid=this.defaultsFromMap.vcsWkid,i.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,i}return e}set spatialReference(e){const t=!Ht(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??to}set timeZone(e){this._userTimeZone=e,fde(e)||j.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){var e;return((e=this.toolViewManager)==null?void 0:e.cursor)??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new D3}whenLayerView(e){var t;return((t=this.layerViewManager)==null?void 0:t.whenLayerView(e))??Promise.reject()}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(e){throw new R("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,t){return this.isResolved()&&!this.ready&&j.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(as(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};ae.views=new Y,l([c()],ae.prototype,"_userSpatialReference",void 0),l([c()],ae.prototype,"activeTool",null),l([c({readOnly:!0})],ae.prototype,"allLayerViews",void 0),l([c()],ae.prototype,"groundView",void 0),l([c()],ae.prototype,"animation",null),l([c()],ae.prototype,"basemapView",void 0),l([c()],ae.prototype,"center",null),l([c()],ae.prototype,"defaultsFromMapSettings",null),l([c()],ae.prototype,"defaultsFromMap",null),l([c()],ae.prototype,"fatalError",void 0),l([c({type:qe})],ae.prototype,"extent",null),l([c(B5(u0,"graphics"))],ae.prototype,"graphics",void 0),l([c(B5(jS,"analyses"))],ae.prototype,"analyses",void 0),l([c({readOnly:!0,type:l$})],ae.prototype,"heightModelInfo",null),l([c({readOnly:!0})],ae.prototype,"interacting",null),l([c({readOnly:!0})],ae.prototype,"navigating",null),l([c({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],ae.prototype,"preconditionsReady",null),l([c({readOnly:!0})],ae.prototype,"typeSpecificPreconditionsReady",void 0),l([c({type:Y,readOnly:!0})],ae.prototype,"layerViews",void 0),l([c()],ae.prototype,"resolution",null),l([c({type:cW})],ae.prototype,"magnifier",void 0),l([c({value:null,type:oH})],ae.prototype,"map",null),l([c()],ae.prototype,"padding",void 0),l([c({readOnly:!0})],ae.prototype,"ready",void 0),l([c({type:me})],ae.prototype,"spatialReference",null),l([c()],ae.prototype,"spatialReferenceWarningDelay",void 0),l([c()],ae.prototype,"stationary",null),l([c({readOnly:!0})],ae.prototype,"supportsGround",void 0),l([c({type:pr})],ae.prototype,"timeExtent",null),l([c({type:String,nonNullable:!0})],ae.prototype,"timeZone",null),l([c()],ae.prototype,"tools",null),l([c()],ae.prototype,"toolViewManager",void 0),l([c({readOnly:!0})],ae.prototype,"type",void 0),l([c({type:Number})],ae.prototype,"scale",void 0),l([c({readOnly:!0})],ae.prototype,"updating",void 0),l([c({readOnly:!0})],ae.prototype,"initialExtentRequired",void 0),l([c({readOnly:!0})],ae.prototype,"initialExtent",null),l([c()],ae.prototype,"cursor",null),l([c({readOnly:!0})],ae.prototype,"input",void 0),l([c({type:TW,nonNullable:!0})],ae.prototype,"navigation",void 0),l([c()],ae.prototype,"layerViewManager",void 0),l([c()],ae.prototype,"analysisViewManager",void 0),l([c()],ae.prototype,"selectionManager",void 0),l([c()],ae.prototype,"width",void 0),l([c()],ae.prototype,"height",void 0),l([c({readOnly:!0})],ae.prototype,"resizing",void 0),l([c({value:null,readOnly:!0})],ae.prototype,"size",null),l([c({readOnly:!0})],ae.prototype,"suspended",void 0),l([c({readOnly:!0})],ae.prototype,"viewEvents",void 0),l([c({readOnly:!0})],ae.prototype,"persistableViewModels",void 0),l([c()],ae.prototype,"_isValid",void 0),l([c()],ae.prototype,"_readyCycleForced",void 0),l([c()],ae.prototype,"_lockedSpatialReference",void 0),l([c()],ae.prototype,"_userTimeZone",void 0),l([c()],ae.prototype,"_lockedTimeZone",void 0),l([c()],ae.prototype,"_userTimeExtent",void 0),l([c()],ae.prototype,"_lockedTimeExtent",void 0),l([c({type:D3})],ae.prototype,"theme",void 0),l([c({readOnly:!0,type:D3})],ae.prototype,"effectiveTheme",null),ae=ag=l([$("esri.views.View")],ae);const lx=globalThis.$arcgis;lx&&!lx.views&&Object.defineProperty(lx,"views",{configurable:!1,enumerable:!0,writable:!1,value:ae.views});const Cve=ae;function Ave(e){return e.layerViews}function Rt(){return[0,0]}function Rve(e){return[e[0],e[1]]}function Bv(e,t){return[e,t]}function Ove(e,t=Rt()){const r=Math.min(2,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function kve(e,t){return new Float64Array(e,t,2)}function kW(){return Rt()}function PW(){return Bv(1,1)}function NW(){return Bv(1,0)}function LW(){return Bv(0,1)}const Pve=kW(),Nve=PW(),Lve=NW(),Fve=LW();Object.freeze(Object.defineProperty({__proto__:null,ONES:Nve,UNIT_X:Lve,UNIT_Y:Fve,ZEROS:Pve,clone:Rve,create:Rt,createView:kve,fromArray:Ove,fromValues:Bv,ones:PW,unitX:NW,unitY:LW,zeros:kW},Symbol.toStringTag,{value:"Module"}));let Zl=class extends NS{constructor(t){super(t),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=_n(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(t=this._resolver)==null||t.reject(new R("ViewAnimation stopped")))}finish(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(t=this._resolver)==null||t.resolve())}update(t,r){r||(r=Qo(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",r)}};l([c({readOnly:!0})],Zl.prototype,"done",null),l([c({readOnly:!0,type:String})],Zl.prototype,"state",void 0),l([c()],Zl.prototype,"target",void 0),Zl=l([$("esri.views.ViewAnimation")],Zl),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Zl||(Zl={}));const U3=Zl;function Df(e,t){return e[0]=t[0],e[1]=t[1],e}function xr(e,t,r){return e[0]=t,e[1]=r,e}function FW(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function rv(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function DW(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function jW(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function Dve(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function jve(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function Vve(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function Uve(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function zve(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function qv(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function Gve(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e}function w$(e,t){const r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)}function GS(e,t){const r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i}function BS(e){const t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function VW(e){const t=e[0],r=e[1];return t*t+r*r}function UW(e,t){return e[0]=-t[0],e[1]=-t[1],e}function Bve(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function z3(e,t){const r=t[0],i=t[1];let n=r*r+i*i;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e}function zW(e,t){return e[0]*t[0]+e[1]*t[1]}function GW(e,t,r){const i=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=i,e}function qve(e,t,r,i){const n=t[0],s=t[1];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e}function Hve(e,t=1){const r=2*o$()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function Wve(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n,e[1]=r[1]*i+r[3]*n,e}function jo(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n+r[4],e[1]=r[1]*i+r[3]*n+r[5],e}function Zve(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[3]*n+r[6],e[1]=r[1]*i+r[4]*n+r[7],e}function Jve(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[4]*n+r[12],e[1]=r[1]*i+r[5]*n+r[13],e}function Kve(e,t,r,i){const n=t[0]-r[0],s=t[1]-r[1],o=Math.sin(i),a=Math.cos(i);return e[0]=n*a-s*o+r[0],e[1]=n*o+s*a+r[1],e}function Yve(e,t){const r=e[0],i=e[1],n=t[0],s=t[1];let o=r*r+i*i;o>0&&(o=1/Math.sqrt(o));let a=n*n+s*s;a>0&&(a=1/Math.sqrt(a));const u=(r*n+i*s)*o*a;return u>1?0:u<-1?Math.PI:Math.acos(u)}function Qve(e){return"vec2("+e[0]+", "+e[1]+")"}function Xve(e,t){return e[0]===t[0]&&e[1]===t[1]}function e1e(e,t){const r=e[0],i=e[1],n=t[0],s=t[1],o=Si();return Math.abs(r-n)<=o*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(i-s)<=o*Math.max(1,Math.abs(i),Math.abs(s))}function t1e(e,t,r,i,n){let s=t[0]-r[0],o=t[1]-r[1];const a=(i[0]*s+i[1]*o)*(n-1);return s=i[0]*a,o=i[1]*a,e[0]=t[0]+s,e[1]=t[1]+o,e}const r1e=BS,Rk=rv,i1e=DW,n1e=jW,s1e=w$,o1e=GS,a1e=VW;Object.freeze(Object.defineProperty({__proto__:null,add:FW,angle:Yve,ceil:Dve,copy:Df,cross:GW,dist:s1e,distance:w$,div:n1e,divide:jW,dot:zW,equals:e1e,exactEquals:Xve,floor:jve,inverse:Bve,len:r1e,length:BS,lerp:qve,max:Uve,min:Vve,mul:i1e,multiply:DW,negate:UW,normalize:z3,projectAndScale:t1e,random:Hve,rotate:Kve,round:zve,scale:qv,scaleAndAdd:Gve,set:xr,sqrDist:o1e,sqrLen:a1e,squaredDistance:GS,squaredLength:VW,str:Qve,sub:Rk,subtract:rv,transformMat2:Wve,transformMat2d:jo,transformMat3:Zve,transformMat4:Jve},Symbol.toStringTag,{value:"Module"}));function l1e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function u1e(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function c1e(e,t,r,i,n,s,o){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e}function Ok(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5];let u=r*s-i*n;return u?(u=1/u,e[0]=s*u,e[1]=-i*u,e[2]=-n*u,e[3]=r*u,e[4]=(n*a-s*o)*u,e[5]=(i*o-r*a)*u,e):null}function d1e(e){return e[0]*e[3]-e[1]*e[2]}function BW(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],u=t[5],d=r[0],h=r[1],f=r[2],m=r[3],y=r[4],g=r[5];return e[0]=i*d+s*h,e[1]=n*d+o*h,e[2]=i*f+s*m,e[3]=n*f+o*m,e[4]=i*y+s*g+a,e[5]=n*y+o*g+u,e}function _$(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],u=t[5],d=Math.sin(r),h=Math.cos(r);return e[0]=i*h+s*d,e[1]=n*h+o*d,e[2]=i*-d+s*h,e[3]=n*-d+o*h,e[4]=a,e[5]=u,e}function kk(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],u=t[5],d=r[0],h=r[1];return e[0]=i*d,e[1]=n*d,e[2]=s*h,e[3]=o*h,e[4]=a,e[5]=u,e}function iv(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],u=t[5],d=r[0],h=r[1];return e[0]=i,e[1]=n,e[2]=s,e[3]=o,e[4]=i*d+s*h+a,e[5]=n*d+o*h+u,e}function qW(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=-r,e[3]=i,e[4]=0,e[5]=0,e}function HW(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function Pk(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function p1e(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function h1e(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function f1e(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function WW(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function m1e(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function y1e(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e}function g1e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function v1e(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],u=t[0],d=t[1],h=t[2],f=t[3],m=t[4],y=t[5],g=Si();return Math.abs(r-u)<=g*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-d)<=g*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(n-h)<=g*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(s-f)<=g*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(o-m)<=g*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-y)<=g*Math.max(1,Math.abs(a),Math.abs(y))}const w1e=BW,_1e=WW;Object.freeze(Object.defineProperty({__proto__:null,add:f1e,copy:l1e,determinant:d1e,equals:v1e,exactEquals:g1e,frob:h1e,fromRotation:qW,fromScaling:HW,fromTranslation:Pk,identity:u1e,invert:Ok,mul:w1e,multiply:BW,multiplyScalar:m1e,multiplyScalarAndAdd:y1e,rotate:_$,scale:kk,set:c1e,str:p1e,sub:_1e,subtract:WW,translate:iv},Symbol.toStringTag,{value:"Module"}));function nl(){return[1,0,0,1,0,0]}function b1e(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function S1e(e,t,r,i,n,s){return[e,t,r,i,n,s]}function $1e(e,t){return new Float64Array(e,t,6)}const T1e=nl();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:T1e,clone:b1e,create:nl,createView:$1e,fromValues:S1e},Symbol.toStringTag,{value:"Module"}));const Z1={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Kn({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:me.WebMercator}),minus180Line:new Kn({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:me.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Kn({paths:[[[180,-180],[180,180]]],spatialReference:me.WGS84}),minus180Line:new Kn({paths:[[[-180,-180],[-180,180]]],spatialReference:me.WGS84})}};function Fd(e,t){return Math.ceil((e-t)/(2*t))}function ZW(e,t){const r=c0(e);for(const i of r)for(const n of i)n[0]+=t;return e}function c0(e){return Gd(e)?e.rings:e.paths}function b$(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function Hv(e){return typeof e=="string"?hr(e):C(e)}function S$(e,t,r){const i={};for(const n in e){if(n==="declaredClass")continue;const s=e[n];if(s!=null&&typeof s!="function")if(Array.isArray(s))i[n]=s.map(o=>S$(o));else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(r==null?void 0:r[n]);i[n]=JSON.stringify(o)}else i[n]=JSON.stringify(s);else i[n]=s}return i}async function x1e(e,t,r,i){const n=Hv(e),s=t[0].spatialReference,o={...i,responseType:"json",query:{...n.query,f:"json",sr:vS(s),target:JSON.stringify({geometryType:Rv(t[0]),geometries:t}),cutter:JSON.stringify(r)}},a=await Le(n.path+"/cut",o),{cutIndexes:u,geometries:d=[]}=a.data;return{cutIndexes:u,geometries:d.map(h=>{const f=dl(h);return f.spatialReference=s,f})}}function E1e(e){return{geometryType:Rv(e[0]),geometries:e.map(t=>t.toJSON())}}function JW(e,t,r){const i=Ole(t);return e.map(n=>{const s=i.fromJSON(n);return s.spatialReference=r,s})}async function M1e(e,t,r){const i=typeof e=="string"?hr(e):e,n=t[0].spatialReference,s=Rv(t[0]),o={...r,query:{...i.query,f:"json",sr:vS(n),geometries:JSON.stringify(E1e(t))}},{data:a}=await Le(i.path+"/simplify",o);return JW(a.geometries,s,n)}const KW=()=>j.getLogger("esri.geometry.support.normalizeUtils");function I1e(e){return e.type==="polygon"}function C1e(e){return e[0].type==="polygon"}function A1e(e){return e[0].type==="polyline"}function bF(e){const t=[];let r=0,i=0;for(let n=0;n<e.length;n++){const s=e[n];let o=null;for(let a=0;a<s.length;a++)o=s[a],t.push(o),a===0?(r=o[0],i=r):(r=Math.min(r,o[0]),i=Math.max(i,o[0]));o&&t.push([(r+i)/2,0])}return t}function R1e(e,t){if(!(e instanceof Kn||e instanceof Zi)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw KW().error(n),new R(n)}const r=c0(e),i=[];for(const n of r){const s=[];i.push(s),s.push([n[0][0],n[0][1]]);for(let o=0;o<n.length-1;o++){const a=n[o][0],u=n[o][1],d=n[o+1][0],h=n[o+1][1],f=Math.sqrt((d-a)*(d-a)+(h-u)*(h-u)),m=(h-u)/f,y=(d-a)/f,g=f/t;if(g>1){for(let b=1;b<=g-1;b++){const T=b*t,x=y*T+a,M=m*T+u;s.push([x,M])}const v=(f+Math.floor(g-1)*t)/2,_=y*v+a,w=m*v+u;s.push([_,w])}s.push([d,h])}}return I1e(e)?new Zi({rings:i,spatialReference:e.spatialReference}):new Kn({paths:i,spatialReference:e.spatialReference})}function SF(e,t,r){if(t){const i=R1e(e,1e6);e=uf(i,!0)}return r&&(e=ZW(e,r)),e}function $F(e,t,r){if(Array.isArray(e)){const i=e[0];if(i>t){const n=Fd(i,t);e[0]=i+n*(-2*t)}else if(i<r){const n=Fd(i,r);e[0]=i+n*(-2*r)}}else{const i=e.x;if(i>t){const n=Fd(i,t);e=e.clone().offset(n*(-2*t),0)}else if(i<r){const n=Fd(i,r);e=e.clone().offset(n*(-2*r),0)}}return e}function O1e(e,t){let r=-1;for(let i=0;i<t.cutIndexes.length;i++){const n=t.cutIndexes[i],s=t.geometries[i],o=c0(s);for(let a=0;a<o.length;a++){const u=o[a];u.some(d=>{if(d[0]<180)return!0;{let h=0;for(let m=0;m<u.length;m++){const y=u[m][0];h=y>h?y:h}h=Number(h.toFixed(9));const f=-360*Fd(h,180);for(let m=0;m<u.length;m++){const y=s.getPoint(a,m);s.setPoint(a,m,y.clone().offset(f,0))}return!0}})}if(n===r){if(C1e(e))for(const a of c0(s))e[n]=e[n].addRing(a);else if(A1e(e))for(const a of c0(s))e[n]=e[n].addPath(a)}else r=n,e[n]=s}return e}async function k1e(e,t,r){if(!Array.isArray(e))return k1e([e],t);t&&typeof t!="string"&&KW().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const i=typeof t=="string"?t:(t==null?void 0:t.url)??je.geometryServiceUrl;let n,s,o,a,u,d,h,f,m=0;const y=[],g=[];for(const x of e)if(x!=null)if(n||(n=x.spatialReference,s=bi(n),o=n.isWebMercator,d=o?102100:4326,a=Z1[d].maxX,u=Z1[d].minX,h=Z1[d].plus180Line,f=Z1[d].minus180Line),s)if(x.type==="mesh")g.push(x);else if(x.type==="point")g.push($F(x.clone(),a,u));else if(x.type==="multipoint"){const M=x.clone();M.points=M.points.map(I=>$F(I,a,u)),g.push(M)}else if(x.type==="extent"){const M=x.clone()._normalize(!1,!1,s);g.push(M.rings?new Zi(M):M)}else if(x.extent){const M=x.extent,I=Fd(M.xmin,u)*(2*a);let O=I===0?x.clone():ZW(x.clone(),I);M.offset(I,0);let{xmin:P,xmax:z}=M;P=Number(P.toFixed(9)),z=Number(z.toFixed(9)),M.intersects(h)&&z!==a?(m=z>m?z:m,O=SF(O,o),y.push(O),g.push("cut")):M.intersects(f)&&P!==u?(m=z*(2*a)>m?z*(2*a):m,O=SF(O,o,360),y.push(O),g.push("cut")):g.push(O)}else g.push(x.clone());else g.push(x);else g.push(x);let v=Fd(m,a),_=-90;const w=v,b=new Kn;for(;v>0;){const x=360*v-180;b.addPath([[x,_],[x,-1*_]]),_*=-1,v--}if(y.length>0&&w>0){const x=O1e(y,await x1e(i,y,b,r)),M=[],I=[];for(let z=0;z<g.length;z++){const U=g[z];if(U!=="cut")I.push(U);else{const W=x.shift(),ee=e[z];ee!=null&&ee.type==="polygon"&&ee.rings&&ee.rings.length>1&&W.rings.length>=ee.rings.length?(M.push(W),I.push("simplify")):I.push(o?il(W):W)}}if(!M.length)return I;const O=await M1e(i,M,r),P=[];for(let z=0;z<I.length;z++){const U=I[z];U!=="simplify"?P.push(U):P.push(o?il(O.shift()):O.shift())}return P}const T=[];for(let x=0;x<g.length;x++){const M=g[x];if(M!=="cut")T.push(M);else{const I=y.shift();T.push(o===!0?il(I):I)}}return T}function P1e(e){if(!e)return null;const t=e.extent;if(!t)return null;const r=e.spatialReference&&bi(e.spatialReference);if(!r)return t;const[i,n]=r.valid,s=2*n,{width:o}=t;let a,{xmin:u,xmax:d}=t;if([u,d]=[d,u],e.type==="extent"||o===0||o<=n||o>s||u<i||d>n)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;a=bF(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;a=bF(e.paths);break;case"multipoint":a=e.points}const h=t.clone();for(let f=0;f<a.length;f++){let m=a[f][0];m<0?(m+=n,d=Math.max(m,d)):(m-=n,u=Math.min(m,u))}return h.xmin=u,h.xmax=d,h.width<o?(h.xmin-=n,h.xmax-=n,h):t}function Nk(e,t,r){const i=bi(r);if(i==null)return e;const[n,s]=i.valid,o=2*s;let a=0,u=0;t>s?a=Math.ceil(Math.abs(t-s)/o):t<n&&(a=-Math.ceil(Math.abs(t-n)/o)),e>s?u=Math.ceil(Math.abs(e-s)/o):e<n&&(u=-Math.ceil(Math.abs(e-n)/o));let d=e+(a-u)*o;const h=d-t;return h>s?d-=o:h<n&&(d+=o),d}function l4e(e,t){const r=bi(t);if(r){const[i,n]=r.valid,s=n-i;if(e<i)for(;e<i;)e+=s;if(e>n)for(;e>n;)e-=s}return e}const YW=96,QW=39.37,N1e=180/Math.PI;function XW(e){return e.wkid?e:e.spatialReference||me.WGS84}function Lk(e,t){return t.type?xr(e,t.x,t.y):Df(e,t)}function eZ(e){return io(e)}function $$(e,t,r=0){let i=e.width,n=e.height;if(r!==0){const a=V2(r),u=Math.abs(Math.cos(a)),d=Math.abs(Math.sin(a));i=e.width*u+e.height*d,n=e.width*d+e.height*u}const s=Math.max(1,t[0]),o=Math.max(1,t[1]);return Math.max(i/s,n/o)*G1e(e.spatialReference)}async function lg(e,t,r,i){var a,u;let n,s;if(!e||Array.isArray(e)&&!e.length)return null;if(Y.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const d=e.every(m=>"attributes"in m),h=e.some(m=>!m.geometry);let f=e;if(d&&h&&t&&t.allLayerViews){const m=new Map;for(const _ of e){const w=_.layer,b=m.get(w)||[],T=_.attributes[w.objectIdField];T!=null&&b.push(T),m.set(w,b)}const y=[];m.forEach((_,w)=>{const b=t.allLayerViews.find(T=>T.layer.id===w.id);if(b&&"queryFeatures"in b){const T=w.createQuery();T.objectIds=_,T.returnGeometry=!0,y.push(b.queryFeatures(T))}});const g=await Promise.all(y),v=[];for(const _ of g)if(_&&_.features&&_.features.length)for(const w of _.features)w.geometry!=null&&v.push(w.geometry);f=v}for(const m of f)i=await lg(m,t,r,i);return i}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=new ge(e);else if(e instanceof yl)n=e;else if("geometry"in e){if(e.geometry)n=e.geometry;else if(e.layer){const d=e.layer,h=t.allLayerViews.find(f=>f.layer.id===d.id);if(h&&"queryFeatures"in h){const f=d.createQuery();f.objectIds=[e.attributes[d.objectIdField]],f.returnGeometry=!0;const m=await h.queryFeatures(f);n=(u=(a=m==null?void 0:m.features)==null?void 0:a[0])==null?void 0:u.geometry}}}if(n==null)return null;switch(n.type){case"point":s=new qe({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":s=P1e(n);break;default:s=n.extent}if(!s)return null;gl()||ro(s.spatialReference,r)||await hl();const o=cc(s,r);if(!o)return null;if(i){const d=o.center,h=d.clone();h.x=Nk(d.x,i.center.x,r),h.x!==d.x&&o.centerAt(h),i=i.union(o)}else i=o;return i}function L1e(e){var t;if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&((t=e.layer)==null?void 0:t.minScale)!=null&&e.layer.maxScale!=null){const r=e.layer;return{min:r.minScale,max:r.maxScale}}if(Array.isArray(e)&&e.length&&e.every(r=>"layer"in r)){let r=0,i=0;for(const n of e){const s=n.layer;s!=null&&s.minScale&&s.maxScale&&(r=s.minScale<r?s.minScale:r,i=s.maxScale>i?s.maxScale:i)}return r&&i?{min:r,max:i}:null}}}function TF(e,t){const r=XW(e);return Ht(r,t)||r.imageCoordinateSystem||t.imageCoordinateSystem?e:cc(e,t)}async function F1e(e,t){var _;if(!e||!t)return new dr({targetGeometry:new ge,scale:0,rotation:0});let r=t.spatialReference;const{constraints:i,padding:n,viewpoint:s,size:o}=t,a=[n?o[0]-n.left-n.right:o[0],n?o[1]-n.top-n.bottom:o[1]];let u=null;e instanceof dr?u=e:e.viewpoint?u=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(u=e.target);let d=null;u!=null&&u.targetGeometry?d=u.targetGeometry:e instanceof qe?d=e:e instanceof yl?d=await lg(e,t,r):e&&(d=await lg(e.center,t,r)||await lg(e.target,t,r)||await lg(e,t,r)),!d&&(s!=null&&s.targetGeometry)?d=s.targetGeometry:!d&&t.extent&&(d=t.extent),r||(r=XW(t.spatialReference||t.extent||d)),gl()||Ht(d.spatialReference,r)||ro(d.spatialReference,r)||await hl();const h=TF(d,r),f="center"in h?h.center:h;t.pickClosestTarget!==!1&&f.type==="point"&&((_=s.targetGeometry)==null?void 0:_.type)==="point"&&(f.x=Nk(f.x,s.targetGeometry.x,f.spatialReference));let m=0;u?m=u.rotation:e.hasOwnProperty("rotation")?m=e.rotation:s&&(m=s.rotation);let y=0;y=(u==null?void 0:u.targetGeometry)!=null&&u.targetGeometry.type==="point"?u.scale:"scale"in e&&e.scale?e.scale:"zoom"in e&&e.zoom!==-1&&i&&i.effectiveLODs?i.zoomToScale(e.zoom):Array.isArray(d)||d.type==="point"||d.type==="extent"&&d.width===0&&d.height===0?s.scale:$$(TF(d.extent,r),a,m);const g=L1e(e.target??e);g&&(g.min&&g.min<y?y=g.min:g.max&&g.max>y&&(y=g.max));let v=new dr({targetGeometry:f,scale:y,rotation:m});return i&&(v=i.fit(v),i.constrainByGeometry(v),i.rotationEnabled||(v.rotation=s.rotation)),v}function ci(e,t){const r=e.targetGeometry,i=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function D1e(e,t,r){return r?xr(e,.5*(t[0]-r.right+r.left),.5*(t[1]-r.bottom+r.top)):qv(e,t,.5)}const j1e=function(){const e=Rt();return function(t,r,i){const n=r.targetGeometry;Lk(e,n);const s=.5*Pm(r);return t.xmin=e[0]-s*i[0],t.ymin=e[1]-s*i[1],t.xmax=e[0]+s*i[0],t.ymax=e[1]+s*i[1],t.spatialReference=n.spatialReference,t}}();function V1e(e,t,r,i,n){var s;return G3(e,t,r.center),e.scale=$$(r,i),(s=n==null?void 0:n.constraints)==null||s.constrain(e),e}function U1e(e,t,r,i){return jk(e,t,r,i),Ok(e,e)}const tZ=function(){const e=Rt();return function(t,r,i){return Rk(t,B1e(t,r),D1e(e,r,i))}}(),z1e=function(){const e=nl(),t=Rt();return function(r,i,n,s){const o=Pm(i),a=Fk(i);return xr(t,o,o),HW(e,t),_$(e,e,a),iv(e,e,tZ(t,n,s)),iv(e,e,[0,s.top-s.bottom]),xr(r,e[4],e[5])}}();function Pm(e){var t;return e.scale*rZ((t=e.targetGeometry)==null?void 0:t.spatialReference)}function rZ(e){return e!=null&&hn(e)?1/(eZ(e)*QW*YW):1}function Fk(e){return ak(e.rotation)||0}function G1e(e){return hn(e)?eZ(e)*QW*YW:1}function B1e(e,t){return qv(e,t,.5)}const Dk=function(){const e=Rt(),t=Rt(),r=Rt();return function(i,n,s,o,a,u){return UW(e,n),qv(t,s,.5*u),xr(r,1/o*u,-1/o*u),Pk(i,t),a&&_$(i,i,a),kk(i,i,r),iv(i,i,e),i}}(),jk=function(){const e=Rt();return function(t,r,i,n){const s=Pm(r),o=Fk(r);return Lk(e,r.targetGeometry),Dk(t,e,i,s,o,n)}}(),q1e=function(){const e=Rt();return function(t,r,i,n){const s=Pm(r);return Lk(e,r.targetGeometry),Dk(t,e,i,s,0,n)}}();function iZ(e){const t=bi(e);return t?t.valid[1]-t.valid[0]:0}function H1e(e,t){return Math.round(iZ(e)/t)}const W1e=function(){const e=Rt(),t=Rt(),r=[0,0,0];return function(i,n,s){rv(e,i,n),z3(e,e),rv(t,i,s),z3(t,t),GW(r,e,t);let o=Math.acos(zW(e,t)/(BS(e)*BS(t)))*N1e;return r[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),Z1e=function(){const e=Rt();return function(t,r,i,n){const s=t.targetGeometry;return ci(t,r),z1e(e,r,i,n),s.x+=e[0],s.y+=e[1],t}}(),G3=function(e,t,r){ci(e,t);const i=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e},J1e=function(){const e=Rt();return function(t,r,i,n,s){s||(s="center"),Rk(e,i,n),qv(e,e,.5);const o=e[0],a=e[1];switch(s){case"center":xr(e,0,0);break;case"left":xr(e,-o,0);break;case"top":xr(e,0,a);break;case"right":xr(e,o,0);break;case"bottom":xr(e,0,-a);break;case"top-left":xr(e,-o,a);break;case"bottom-left":xr(e,-o,-a);break;case"top-right":xr(e,o,a);break;case"bottom-right":xr(e,o,-a)}return T$(t,r,e),t}}();function u4e(e,t,r){return ci(e,t),e.rotation+=r,e}function K1e(e,t,r){return ci(e,t),e.rotation=r,e}const Y1e=function(){const e=Rt();return function(t,r,i,n,s){return ci(t,r),isNaN(i)||i===0||(sZ(e,n,r,s),t.scale=r.scale*i,oZ(e,e,t,s),T$(t,t,xr(e,e[0]-n[0],n[1]-e[1]))),t}}();function xF(e,t,r){return ci(e,t),e.scale=r,e}const nZ=function(){const e=Rt();return function(t,r,i,n,s,o){return ci(t,r),isNaN(i)||i===0||(sZ(e,s,r,o),t.scale=r.scale*i,t.rotation+=n,oZ(e,e,t,o),T$(t,t,xr(e,e[0]-s[0],s[1]-e[1]))),t}}(),c4e=function(){const e=Rt(),t=Rt();return function(r,i,n,s,o,a,u){return tZ(t,a,u),FW(e,o,t),s?nZ(r,i,n,s,e,a):Y1e(r,i,n,e,a)}}(),sZ=function(){const e=nl();return function(t,r,i,n){return jo(t,r,U1e(e,i,n,1))}}(),oZ=function(){const e=nl();return function(t,r,i,n){return jo(t,r,jk(e,i,n,1))}}(),T$=function(){const e=Rt(),t=nl();return function(r,i,n){ci(r,i);const s=Pm(i),o=r.targetGeometry;return qW(t,Fk(i)),kk(t,t,Bv(s,s)),jo(e,n,t),o.x+=e[0],o.y+=e[1],r}}();function aZ(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function Q1e(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function X1e(e,t,r,i,n,s){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=n,o[5]=s,o}function ewe(e,t){return new Float32Array(e,t,6)}function lZ(e,t,r,i){const n=t[i],s=t[i+1];e[i]=r[0]*n+r[2]*s+r[4],e[i+1]=r[1]*n+r[3]*s+r[5]}function twe(e,t,r,i=0,n=0,s=2){const o=n||t.length/s;for(let a=i;a<o;a++)lZ(e,t,r,a*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:Q1e,create:aZ,createView:ewe,fromValues:X1e,transform:lZ,transformMany:twe},Symbol.toStringTag,{value:"Module"}));function rwe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function iwe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function uZ(e,t,r,i,n,s,o,a,u,d){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e[6]=a,e[7]=u,e[8]=d,e}function cZ(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function nwe(e,t){if(e===t){const r=t[1],i=t[2],n=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=i,e[7]=n}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function swe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],u=t[6],d=t[7],h=t[8],f=h*o-a*d,m=-h*s+a*u,y=d*s-o*u;let g=r*f+i*m+n*y;return g?(g=1/g,e[0]=f*g,e[1]=(-h*i+n*d)*g,e[2]=(a*i-n*o)*g,e[3]=m*g,e[4]=(h*r-n*u)*g,e[5]=(-a*r+n*s)*g,e[6]=y*g,e[7]=(-d*r+i*u)*g,e[8]=(o*r-i*s)*g,e):null}function owe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],u=t[6],d=t[7],h=t[8];return e[0]=o*h-a*d,e[1]=n*d-i*h,e[2]=i*a-n*o,e[3]=a*u-s*h,e[4]=r*h-n*u,e[5]=n*s-r*a,e[6]=s*d-o*u,e[7]=i*u-r*d,e[8]=r*o-i*s,e}function awe(e){const t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],o=e[5],a=e[6],u=e[7],d=e[8];return t*(d*s-o*u)+r*(-d*n+o*a)+i*(u*n-s*a)}function Vk(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],u=t[5],d=t[6],h=t[7],f=t[8],m=r[0],y=r[1],g=r[2],v=r[3],_=r[4],w=r[5],b=r[6],T=r[7],x=r[8];return e[0]=m*i+y*o+g*d,e[1]=m*n+y*a+g*h,e[2]=m*s+y*u+g*f,e[3]=v*i+_*o+w*d,e[4]=v*n+_*a+w*h,e[5]=v*s+_*u+w*f,e[6]=b*i+T*o+x*d,e[7]=b*n+T*a+x*h,e[8]=b*s+T*u+x*f,e}function B3(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],u=t[5],d=t[6],h=t[7],f=t[8],m=r[0],y=r[1];return e[0]=i,e[1]=n,e[2]=s,e[3]=o,e[4]=a,e[5]=u,e[6]=m*i+y*o+d,e[7]=m*n+y*a+h,e[8]=m*s+y*u+f,e}function dZ(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],u=t[5],d=t[6],h=t[7],f=t[8],m=Math.sin(r),y=Math.cos(r);return e[0]=y*i+m*o,e[1]=y*n+m*a,e[2]=y*s+m*u,e[3]=y*o-m*i,e[4]=y*a-m*n,e[5]=y*u-m*s,e[6]=d,e[7]=h,e[8]=f,e}function lwe(e,t,r){const i=r[0],n=r[1],s=r[2];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=s*t[6],e[7]=s*t[7],e[8]=s*t[8],e}function uwe(e,t,r){const i=r[0],n=r[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e}function cwe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function dwe(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=-r,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function pwe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function hwe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function fwe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=r+r,a=i+i,u=n+n,d=r*o,h=i*o,f=i*a,m=n*o,y=n*a,g=n*u,v=s*o,_=s*a,w=s*u;return e[0]=1-f-g,e[3]=h-w,e[6]=m+_,e[1]=h+w,e[4]=1-d-g,e[7]=y-v,e[2]=m-_,e[5]=y+v,e[8]=1-d-f,e}function mwe(e,t){const r=t[0],i=t[1],n=t[2],s=t[4],o=t[5],a=t[6],u=t[8],d=t[9],h=t[10],f=h*o-a*d,m=-h*s+a*u,y=d*s-o*u,g=r*f+i*m+n*y;if(!g)return null;const v=1/g;return e[0]=f*v,e[1]=(-h*i+n*d)*v,e[2]=(a*i-n*o)*v,e[3]=m*v,e[4]=(h*r-n*u)*v,e[5]=(-a*r+n*s)*v,e[6]=y*v,e[7]=(-d*r+i*u)*v,e[8]=(o*r-i*s)*v,e}function ywe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],u=t[6],d=t[7],h=t[8],f=t[9],m=t[10],y=t[11],g=t[12],v=t[13],_=t[14],w=t[15],b=r*a-i*o,T=r*u-n*o,x=r*d-s*o,M=i*u-n*a,I=i*d-s*a,O=n*d-s*u,P=h*v-f*g,z=h*_-m*g,U=h*w-y*g,W=f*_-m*v,ee=f*w-y*v,de=m*w-y*_;let oe=b*de-T*ee+x*W+M*U-I*z+O*P;return oe?(oe=1/oe,e[0]=(a*de-u*ee+d*W)*oe,e[1]=(u*U-o*de-d*z)*oe,e[2]=(o*ee-a*U+d*P)*oe,e[3]=(n*ee-i*de-s*W)*oe,e[4]=(r*de-n*U+s*z)*oe,e[5]=(i*U-r*ee-s*P)*oe,e[6]=(v*O-_*I+w*M)*oe,e[7]=(_*x-g*O-w*T)*oe,e[8]=(g*I-v*x+w*b)*oe,e):null}function gwe(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function vwe(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function wwe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function _we(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function pZ(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function bwe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function Swe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e}function $we(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function Twe(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],u=e[6],d=e[7],h=e[8],f=t[0],m=t[1],y=t[2],g=t[3],v=t[4],_=t[5],w=t[6],b=t[7],T=t[8],x=Si();return Math.abs(r-f)<=x*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-m)<=x*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(n-y)<=x*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(s-g)<=x*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(o-v)<=x*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-_)<=x*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(u-w)<=x*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(d-b)<=x*Math.max(1,Math.abs(d),Math.abs(b))&&Math.abs(h-T)<=x*Math.max(1,Math.abs(h),Math.abs(T))}function xwe(e){const t=Si(),r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],u=e[6],d=e[7],h=e[8];return Math.abs(1-(r*r+s*s+u*u))<=t&&Math.abs(1-(i*i+o*o+d*d))<=t&&Math.abs(1-(n*n+a*a+h*h))<=t}const Ewe=Vk,Mwe=pZ;Object.freeze(Object.defineProperty({__proto__:null,add:_we,adjoint:owe,copy:iwe,determinant:awe,equals:Twe,exactEquals:$we,frob:wwe,fromMat2d:hwe,fromMat4:rwe,fromQuat:fwe,fromRotation:dwe,fromScaling:pwe,fromTranslation:cwe,identity:cZ,invert:swe,isOrthoNormal:xwe,mul:Ewe,multiply:Vk,multiplyScalar:bwe,multiplyScalarAndAdd:Swe,normalFromMat4:ywe,normalFromMat4Legacy:mwe,projection:gwe,rotate:dZ,scale:lwe,scaleByVec2:uwe,set:uZ,str:vwe,sub:Mwe,subtract:pZ,translate:B3,transpose:nwe},Symbol.toStringTag,{value:"Module"}));function P_(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function Iwe(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Cwe(e,t,r,i,n,s,o,a,u){const d=new Float32Array(9);return d[0]=e,d[1]=t,d[2]=r,d[3]=i,d[4]=n,d[5]=s,d[6]=o,d[7]=a,d[8]=u,d}function Awe(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:Iwe,create:P_,createView:Awe,fromValues:Cwe},Symbol.toStringTag,{value:"Module"}));function hZ(){return new Float32Array(2)}function Rwe(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function pm(e,t){const r=new Float32Array(2);return r[0]=e,r[1]=t,r}function Owe(e,t){return new Float32Array(e,t,2)}function fZ(){return hZ()}function mZ(){return pm(1,1)}function yZ(){return pm(1,0)}function gZ(){return pm(0,1)}const kwe=fZ(),Pwe=mZ(),Nwe=yZ(),Lwe=gZ();Object.freeze(Object.defineProperty({__proto__:null,ONES:Pwe,UNIT_X:Nwe,UNIT_Y:Lwe,ZEROS:kwe,clone:Rwe,create:hZ,createView:Owe,fromValues:pm,ones:mZ,unitX:yZ,unitY:gZ,zeros:fZ},Symbol.toStringTag,{value:"Module"}));function Fwe(e){return e instanceof Float32Array&&e.length>=2}function Dwe(e){return Array.isArray(e)&&e.length>=2}function ux(e){return Fwe(e)||Dwe(e)}var q3;const sa=[0,0];let ba=q3=class extends N{constructor(e){super(e),this._viewpoint2D={center:Rt(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new qe,this.id=0,this.inverseTransform=nl(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=nl(),this.transformNoRotation=nl(),this.displayMat3=P_(),this.displayViewMat3=P_(),this.viewMat3=P_(),this.viewMat2d=aZ(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,r=e.targetGeometry;t.center[0]=r.x,t.center[1]=r.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=r.spatialReference}this._update()}get visibleArea(){const[e,t]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,t),this.toMap([0,0],e,t),this.toMap([0,0],e,0)]}copy(e){const t=this.size,r=this.viewpoint;return r&&t?(this.viewpoint=ci(r,e.viewpoint),this._set("size",Df(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new q3({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,r){return ux(t)?jo(e,t,this.inverseTransform):(sa[0]=t,sa[1]=r,jo(e,sa,this.inverseTransform))}toScreen(e,t,r){return ux(t)?jo(e,t,this.transform):(sa[0]=t,sa[1]=r,jo(e,sa,this.transform))}toScreenNoRotation(e,t,r){return ux(t)?jo(e,t,this.transformNoRotation):(sa[0]=t,sa[1]=r,jo(e,sa,this.transformNoRotation))}wrapMapCoordinate(e,t){Df(e,t);const[r]=t,[i]=this.center,{extent:n,spatialReference:s}=this;let{xmin:o,xmax:a}=n;if(s.isWrappable){const u=iZ(s)/2;o=Math.max(o,i-u),a=Math.min(a,i+u)}return(r<o||r>a)&&(e[0]=Nk(r,i,s)),e}getScreenTransform(e,t){const{center:r}=this._viewpoint2D,i=this._get("pixelRatio")||1,n=this._get("size");return Dk(e,r,n,t,0,i),e}_update(){const{center:e,spatialReference:t,scale:r,rotation:i}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size"),o=new dr({targetGeometry:new ge(e[0],e[1],t),scale:r,rotation:i});if(this._set("viewpoint",o),!s||!t||!r)return;this.resolution=Pm(o),this.rotation=i,this.scale=r,this.spatialReference=t,Df(this.center,e);const a=s[0]!==0?2/s[0]:0,u=s[1]!==0?-2/s[1]:0;uZ(this.displayMat3,a,0,0,0,u,0,-1,1,1);const d=cZ(this.viewMat3),h=pm(s[0]/2,s[1]/2),f=pm(-s[0]/2,-s[1]/2),m=ak(i);B3(d,d,h),dZ(d,d,m),B3(d,d,f),Vk(this.displayViewMat3,this.displayMat3,d);const y=Pk(this.viewMat2d,h);return _$(y,y,m),iv(y,y,f),j1e(this.extent,o,s),jk(this.transform,o,s,n),Ok(this.inverseTransform,this.transform),q1e(this.transformNoRotation,o,s,n),this.worldScreenWidth=H1e(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};l([c({readOnly:!0})],ba.prototype,"id",void 0),l([c({value:1,json:{write:!0}})],ba.prototype,"pixelRatio",null),l([c({json:{write:!0}})],ba.prototype,"size",null),l([c()],ba.prototype,"spatialReference",void 0),l([c({type:dr,json:{write:!0}})],ba.prototype,"viewpoint",null),l([c({readOnly:!0})],ba.prototype,"visibleArea",null),ba=q3=l([$("esri.views.2d.ViewState")],ba);const EF=ba;var H3,W3;let Za=H3=class extends te{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new H3({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};l([c()],Za.prototype,"left",void 0),l([c()],Za.prototype,"top",void 0),l([c()],Za.prototype,"right",void 0),l([c()],Za.prototype,"bottom",void 0),Za=H3=l([$("esri.views.2d.PaddedViewState.Padding")],Za);let ch=W3=class extends EF{constructor(...e){super(...e),this.paddedViewState=new EF,this._updateContent=(()=>{const t=Rt();return()=>{const r=this._get("size"),i=this._get("padding");if(!r||!i)return;const n=this.paddedViewState;xr(t,i.left+i.right,i.top+i.bottom),rv(t,r,t),Df(n.size,t);const s=n.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(ce(()=>[this.size,this.padding],()=>this._updateContent(),Jo)),this.padding=new Za,this.size=[0,0]}set padding(e){this._set("padding",e||new Za)}set viewpoint(e){if(e){this.paddedViewState.viewpoint=e;let t=e;const r=this._get("padding");r&&(t=Z1e(e.clone(),e,this._get("size"),r));const{targetGeometry:i,rotation:n,scale:s}=t,{x:o,y:a,spatialReference:u}=i,d=this._viewpoint2D;d.center[0]=o,d.center[1]=a,d.rotation=n,d.scale=s,d.spatialReference=u,this._update()}}clone(){return new W3({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};l([c()],ch.prototype,"paddedViewState",void 0),l([c({type:Za})],ch.prototype,"padding",null),l([c()],ch.prototype,"viewpoint",null),ch=W3=l([$("esri.views.2d.PaddedViewState")],ch);const Uk=ch;function xd(e,t,r,i){const n=3*e,s=3*(r-e)-n,o=1-n-s,a=3*t,u=3*(i-t)-a,d=1-a-u;function h(g){return((o*g+s)*g+n)*g}function f(g){return((d*g+u)*g+a)*g}function m(g){return(3*o*g+2*s)*g+n}function y(g,v){let _,w,b,T,x,M;for(b=g,M=0;M<8;M++){if(T=h(b)-g,Math.abs(T)<v)return b;if(x=m(b),Math.abs(x)<1e-6)break;b-=T/x}if(_=0,w=1,b=g,b<_)return _;if(b>w)return w;for(;_<w;){if(T=h(b),Math.abs(T-g)<v)return b;g>T?_=b:w=b,b=.5*(w-_)+_}return b}return function(g,v=1e-6){return f(y(g,v))}}const jwe=/^cubic-bezier\((.*)\)/,ko={};function Vwe(e){let t=ko[e]||null;if(!t){const r=jwe.exec(e);if(r){const i=r[1].split(",").map(n=>parseFloat(n.trim()));i.length!==4||i.some(n=>isNaN(n))||(t=xd.apply(xd,i))}}return t}ko.ease=xd(.25,.1,.25,1),ko.linear=xd(0,0,1,1),ko.easeIn=ko["ease-in"]=xd(.42,0,1,1),ko.easeOut=ko["ease-out"]=xd(0,0,.58,1),ko.easeInOut=ko["ease-in-out"]=xd(.42,0,.58,1);let MF=class{constructor(t){this._view=t,this.viewpoint=new dr({targetGeometry:new ge,scale:0,rotation:0})}get view(){return this._view}get size(){const[t,r]=this._view.size;return Math.sqrt(t*t+r*r)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return rZ(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(t,r){r.pan=V7(this.center,t.center);let i=Math.abs(t.rotation-this.rotation);i=i>=180?360-i:i,r.rotate=V2(i),r.sourceZoom=this.scale,r.targetZoom=t.scale}interpolate(t,r,i){const{pan:n,rotate:s,zoom:o,zoomOffset:a}=i,{center:u}=this;u.spatialReference=t.center.spatialReference,u.x=Cy(t.center.x,r.center.x,n),u.y=Cy(t.center.y,r.center.y,n),this.viewpoint.scale=Cy(t.scale,r.scale+a,o);let d=t.rotation;const h=r.rotation;Math.abs(h-d)>=180&&(d+=360*(d<h?1:-1)),this.viewpoint.rotation=Cy(d,h,s)}copyFrom(t){ci(this.viewpoint,t.viewpoint),this._view=t.view}};const vZ=e=>e*e,Uwe=e=>1-vZ(1-e),zwe=e=>2**(10*(e-1)),Gwe=e=>1-zwe(1-e);function Bwe(e){const t=2*(e-Math.sqrt((e-1)*e)),r=t/2/e;return i=>i<r?e*i*i:t*i-t+1}function qwe(e,t){return(r,i)=>r<t?t*e(r/t,i):1-e((1-r)/(1-t),i)*(1-t)}const IF=qwe(Bwe(1),.5);let Hwe=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const nv={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},wZ={...nv,maxDuration:4e3};let Wwe=class _Z{constructor(t){this._createCamera=t,this.compared=new Hwe,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:nv.desiredScreenFlow},this.source=t(),this.target=t()}clone(){const t=new _Z(this._createCamera);return t.copyFrom(this),t}copyFrom(t){this.update(t.source,t.target,t.settings)}update(t,r,i){this.source!==t&&this.source.copyFrom(t),this.target!==r&&this.target.copyFrom(r),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=i.desiredScreenFlow??nv.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(t){const r=this.target.pixelsPerPanAtZoom(t);return this.halfWindowSize/r}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Si()}get hasFov(){return Math.abs(this.compared.fov)>Si()}get hasRotate(){return this.compared.rotate>Si()}},Zwe=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},Jwe=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((t,r)=>t+r.time,0)}interpolateComponentsAt(t,r){t=Math.min(Math.max(t,0),1),t*=this.time;let i=0,n=0;const s=this.definition,o=this.segments.reduce((a,u)=>a||u.definition.hasZoom,!1);for(let a=0;a<this.segments.length;a++){const u=this.segments[a],d=u.definition;if(t<=u.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(u,u.time===0?0:t/u.time,r),s.hasPan&&!isNaN(r.pan)&&isFinite(s.compared.pan)?r.pan=(i+d.compared.pan*r.pan)/s.compared.pan:r.pan=1,s.hasRotate&&!isNaN(r.rotate)&&isFinite(s.compared.rotate)?r.rotate=(n+d.compared.rotate*r.rotate)/s.compared.rotate:r.rotate=1,o&&!isNaN(r.zoom)&&isFinite(d.compared.targetZoom)){const{sourceZoom:h,targetZoom:f}=d.compared,m=r.zoom*(f-h)+h,y=this.segments[0].definition.compared.sourceZoom,g=this.segments[this.segments.length-1].definition.compared.targetZoom,v=Math.abs(f-y)>Math.abs(h-y)?f:h;r.zoomOffset=v-g,r.zoom=(m-y)/(v-y)}else r.zoom=1;return r}t-=u.time,i+=d.compared.pan,n+=d.compared.rotate}}segmentInterpolateComponentsAt(t,r,i){t.interpolateComponentsAt(r,i)}},cx=class{get time(){return this._time}constructor(t){t&&this.update(t)}update(t){t&&(this.definition?this.definition.copyFrom(t):this.definition=t.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const t=this.definition,r=t.compared,i=r.sourceZoom,n=r.targetZoom;this._zoomSign=i>n?1:-1,this._panPixelsAtSource=r.pan*t.source.pixelsPerPanAtZoom(i);const s=(t.source.pixelsPerRotate()+t.target.pixelsPerRotate())/2;this._rotatePixels=r.rotate*s}_updatePixelFlow(){const t=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom,{hasZoom:i,hasPan:n,hasRotate:s}=this.definition;let o=0,a=0;i&&(n&&(o=(r/t-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),s&&(a=this._zoomSign*(Math.log(t/r)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const u=this.definition.desiredPixelFlow;if(i&&n&&s){const d=o+a+o*a;this._zoomPixelFlow=o*a/d*u,this._panPixelFlow=a/d*u,this._rotatePixelFlow=o/d*u}else if(i&&n){const d=1+o;this._zoomPixelFlow=o/d*u,this._panPixelFlow=1/d*u}else if(i&&s){const d=1+a;this._zoomPixelFlow=a/d*u,this._rotatePixelFlow=1/d*u}else if(n&&s){const d=this._panPixelsAtSource/this._rotatePixels,h=1+d;this._panPixelFlow=d/h*u,this._rotatePixelFlow=1/h*u}else n?this._panPixelFlow=u:i?this._zoomPixelFlow=u:s&&(this._rotatePixelFlow=u);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const d=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=d,this._panPixelFlow/=d,this._rotatePixelFlow/=d}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/Kwe:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const t=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,r=t*this._panPixelsAtSource;return Math.log(r*(this._zoomPixelFlow/this._panPixelFlow)+1)/(t*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(t){if(t===0||t===1)return t;if(this.definition.hasZoom){const r=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom;return(r*(r/i)**-t-r)/(i-r)}return t}_interpolateComponentsFov(t){if(t===0)return this.definition.segmentStart;if(t===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:r,segmentEnd:i}=this.definition;return r+t*(i-r)}return this.definition.segmentStart}_interpolateComponentsPan(t){if(t===0||t===1)return t;if(this.definition.hasPan&&this.definition.hasZoom){const r=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(r*t*this._time)-1))/(r*Math.LN2)}return t}_interpolateComponentsRotate(t){return t}interpolateComponentsAt(t,r){t=Math.min(Math.max(t,0),1),r.zoom=this._interpolateComponentsZoom(t),r.pan=this._interpolateComponentsPan(t),r.rotate=this._interpolateComponentsRotate(t),r.zoomOffset=0,r.fov=this._interpolateComponentsFov(t)}};const Kwe=V2(45);function Ywe(e,t,r){const i=t-e.compared.sourceZoom,n=e.halfWindowPanAtZoom(i);return-e.halfWindowSize*(r.ascensionFactor*Math.LN2*e.compared.pan+n)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*n)}function Qwe(e,t,r){const i=1/t,n=Math.log(e.compared.sourceZoom*i),s=1/e.desiredPixelFlow,o=1/Math.LN2,a=t-e.compared.sourceZoom,u=1/a,d=(r.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(a))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*i*s*o*u*d-e.halfWindowSize*n*s*o*u+e.halfWindowSize*n*s*o*d/(a*a)}function Xwe(e,t,r){const i=t-e.compared.sourceZoom,n=1/i,s=1/t,o=Math.log(e.compared.sourceZoom*s),a=(r.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(i))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*n*(-2*n*s*a+2*n*o+2*s-2*o*a/(i*i)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function e_e(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function t_e(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function r_e(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function i_e(e,t,r){return-e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}function n_e(e,t,r){return e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}function s_e(e,t,r){return-2*e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}function o_e(e,t,r){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-r.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function a_e(e,t,r){const i=Math.log(t/e.compared.targetZoom),n=1/e.desiredPixelFlow,s=1/Math.LN2,o=-t+e.compared.targetZoom,a=1/o,u=(-e.halfWindowPanAtZoom(t)-r.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*i*n*s*a+e.halfWindowSize*i*n*s*u/(o*o)+e.halfWindowSize*n*s*a*u/t}function l_e(e,t,r){const i=t-e.compared.targetZoom,n=1/i,s=1/t,o=Math.log(t/e.compared.targetZoom),a=(e.halfWindowPanAtZoom(t)+r.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*n*(-2*n*s*a-2*n*o+2*s+2*o*a/(i*i)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function u_e(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function c_e(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function d_e(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function p_e(e){const t=e.compared.sourceZoom-e.compared.targetZoom;if(t===0)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));const r=Math.LN2*e.compared.pan,i=t,n=e.halfWindowPanAtZoom(i),s=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*n);return e.compared.sourceZoom<=e.compared.targetZoom?s*(r-n):s*(r+n)}function h_e(e,t){let r=f_e(e,t);const i={ascensionFactor:t.ascensionFactor!=null?t.ascensionFactor:.5,descensionFactor:t.descensionFactor!=null?t.descensionFactor:.5},n=i.ascensionFactor===0,s=i.descensionFactor===0,o=n?e_e:Ywe,a=n?t_e:Qwe,u=n?r_e:Xwe,d=s?u_e:o_e,h=s?c_e:a_e,f=s?d_e:l_e,m=x=>o(e,x,i)+i_e(e,x,i)+d(e,x,i),y=x=>a(e,x,i)+n_e(e,x,i)+h(e,x,i),g=x=>u(e,x,i)+s_e(e,x,i)+f(e,x,i);let v=m(r);const _=p_e(e);let w;const b=t.maximumIterations||20,T=t.maximumDistance!=null?t.maximumDistance:1/0;for(w=0;w<b;w++){const x=t.desiredSlope??1e-6;let M=y(r);Math.abs(M)>x&&(M+=x);const I=M/g(r);if(isNaN(I)||r>=T&&I<0){if(!isFinite(T))return null;r=T,v=m(r);break}if(r-=I,r<e.compared.sourceZoom||r<e.compared.targetZoom)return null;const O=m(r);if(Math.abs(O-v)/v<=.005)break;v=O}return v>_*(1-.3)||r<e.compared.sourceZoom||r<e.compared.targetZoom?null:r}function f_e(e,t){const r=Math.max(e.compared.sourceZoom,e.compared.targetZoom),i=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return i<r?t.maximumDistance!=null?r+(t.maximumDistance-r)/2:1.5*r:t.maximumDistance?Math.min(t.maximumDistance,i):i}let m_e=class extends Jwe{constructor(t,r){super(),this._preallocSegments=[new cx,new cx,new cx],this._ascensionSegment=null,this._descensionSegment=null,this.update(t,r)}update(t,r){if(!t)return;this.definition?this.definition.copyFrom(t):this.definition=t.clone();const i=r!=null&&r.apex?h_e(t,r.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,i?this._updateWithApex(i,r==null?void 0:r.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(t,r,i){t.interpolateComponentsAt(r,i),t===this._ascensionSegment?i.zoom=Uwe(i.zoom):t===this._descensionSegment&&(i.zoom=vZ(i.zoom))}_updateWithApex(t,r){const[i,n,s]=this._preallocSegments,o=(r==null?void 0:r.ascensionFactor)??.5,a=Math.min(1-o,(r==null?void 0:r.ascensionFactor)!=null&&r.descensionFactor!=null?r.descensionFactor:.5),u=1-o-a;i.definition?i.definition.copyFrom(this.definition):i.definition=this.definition.clone(),i.definition.compared.targetZoom=t,i.definition.compared.pan=this.definition.compared.pan*o,i.definition.compared.rotate=this.definition.compared.rotate*o,i.definition.segmentEnd=o,i.update(),this._ascensionSegment=i,this.segments.push(i),u>0&&(n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.copyFrom(this.definition),n.definition.compared.sourceZoom=t,n.definition.compared.targetZoom=t,n.definition.compared.pan=this.definition.compared.pan*u,n.definition.compared.rotate=this.definition.compared.rotate*u,n.definition.segmentStart=i.definition.segmentEnd,n.definition.segmentEnd=i.definition.segmentEnd+u,n.update(),this.segments.push(n)),s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.compared.sourceZoom=t,s.definition.compared.pan=this.definition.compared.pan*a,s.definition.compared.rotate=this.definition.compared.rotate*a,s.definition.segmentStart=o+u,s.update(),this._descensionSegment=s,this.segments.push(s)}_updateWithoutApex(){const[t]=this._preallocSegments;t.update(this.definition),this.segments.push(t)}};const y_e=new Zwe;let g_e=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(t){this._time=0,this._easing=IF,this.definition=new Wwe(t),this.path=new m_e}update(t,r,i){this.definition.update(t,r,i),this.path.update(this.definition,i),this._time=this._applyTimeSettings(wse(isFinite(this.path.time)?this.path.time:0),i),this._easing=i.easing??(this._time>=1e3?IF:Gwe)}cameraAt(t,r){t=Math.min(Math.max(0,t),1),t=this._normalizedEasing(t);const i=this.path.interpolateComponentsAt(t,y_e);r.interpolate(this.definition.source,this.definition.target,i)}_normalizedEasing(t){const r=this._easing(0,this._time),i=this._easing(1,this._time);return(this._easing(t,this._time)-r)/(i-r)}_applyTimeSettings(t,r){const i=r.speedFactor!=null?r.speedFactor:1,n=r.minDuration??nv.minDuration/i,s=r.maxDuration??nv.maxDuration/i;return t=r.duration!=null?r.duration:Math.min(Math.max(t/i,n),s)}};const CF=2e3,v_e=64;let w_e=class{constructor(t){this._view=t,this._animation=new g_e(()=>new MF(this._view)),this._current=new MF(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,r,i={}){ci(this._current.viewpoint,t),ci(this._source.viewpoint,t),ci(this._target.viewpoint,r),this._animation.update(this._source,this._target,i)}applyRatio(t,r){this._animation.cameraAt(r,this._current),ci(t,this._current.viewpoint)}},dh=class extends te{constructor(t){super(t),this._animation=null,this._destinationViewState=new Uk,this.updateFunction=null,this.easing=ko.ease,this.viewpoint=new dr({targetGeometry:new ge,scale:0,rotation:0}),this._updateTask=Qf({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new w_e(t.view)}destroy(){this._updateTask=wt(this._updateTask)}get animation(){return this._animation}set animation(t){this._animation=t,this.view.animation=t}animate(t,r,i){this.stop();const n=this.viewpoint;ci(n,r);const s=(typeof(i==null?void 0:i.easing)=="string"?Vwe(i.easing):i==null?void 0:i.easing)||this.easing,o=t.target;this._transition.update(this.viewpoint,o,{apex:{maximumDistance:Math.min(Math.min(r.scale,o.scale)*v_e,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:i==null?void 0:i.duration,maxDuration:(i==null?void 0:i.animationMode)==="auto"?1/0:(i==null?void 0:i.maxDuration)??wZ.maxDuration,speedFactor:i==null?void 0:i.speedFactor,easing:typeof s=="function"?u=>s(u):void 0}),(i==null?void 0:i.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=o,__e(this._transition.animation,i,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,o,{duration:0}));const a=()=>{this.animation===t&&this._updateTask&&(t.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(a,a),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinuous(t,r){this.stop(),this.updateFunction=r,this.viewpoint=t;const i=new U3({target:t.clone()}),n=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){var i,n;const r=this.animation;if(r&&r.state!==U3.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime),(i=this.animation)==null||i.update(this.viewpoint);else{const s=performance.now()-this._startTime,o=this._transition.duration,a=o>0?s/o:1,u=a>=1;this._transition.applyRatio(this.viewpoint,a),u&&((n=this.animation)==null||n.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function __e(e,t,r,i){if((t==null?void 0:t.duration)!=null)return!0;const{time:n,isLinear:s}=e,o=(t==null?void 0:t.speedFactor)||1,a=(t==null?void 0:t.maxDuration)??wZ.maxDuration/o;if(L("esri-goto-debug")&&(console.log("speed factor:",o),console.log("adjusted duration:		",n),console.log("adjusted max duration:	",a),console.log("is linear:",s)),n>a)return L("esri-goto-debug")&&console.warn(`failed "auto" heuristic: animations must be shorter than ${a/1e3}s`),!1;if(s){const d=Rt(),h=Ir(...i.toScreen(d,...r.center)),f=Ir(...r.toScreen(d,...i.center)),m=f!=null&&f.x>-(1.5-.5)*r.size[0]&&f.x<(1.5+.5)*r.size[0]&&f.y>-(1.5-.5)*r.size[1]&&f.y<(1.5+.5)*r.size[1],y=h!=null&&h.x>-(1.5-.5)*i.size[0]&&h.x<(1.5+.5)*i.size[0]&&h.y>-(1.5-.5)*i.size[1]&&h.y<(1.5+.5)*i.size[1];if(L("esri-goto-debug")&&(console.log(`dest is within ${1.5} screens at start view:`,m),console.log(`start is within ${1.5} screens at dest view:`,y)),n>CF/o&&!m&&!y)return L("esri-goto-debug")&&console.warn(`failed "auto" heuristic: linear animations must be...
  - shorter than ${CF/1e3/o}s, or
  - shorter than ${a/1e3}s and the destination is close enough to the starting screen, or
  - shorter than ${a/1e3}s and the start point is close enough to the destination screen`),!1}return!0}l([c()],dh.prototype,"easing",void 0),l([c()],dh.prototype,"view",void 0),l([c()],dh.prototype,"viewpoint",void 0),dh=l([$("esri.views.2d.AnimationManager")],dh);const b_e=dh;var ni;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(ni||(ni={}));const bZ=Symbol("Yield");let S_e=class{constructor(){this._tasks=new Array,this._runningTasks=J0(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(t){if(this.length===0)return bZ;for(;!t.done&&this._process(t);)t.madeProgress()}push(t,r,i){return++this._runningTasks.value,new Promise((n,s)=>this._tasks.push(new AF(n,s,t,r,i))).finally(()=>--this._runningTasks.value)}unshift(t,r,i){return++this._runningTasks.value,new Promise((n,s)=>this._tasks.unshift(new AF(n,s,t,r,i))).finally(()=>--this._runningTasks.value)}_process(t){var i;if(this._tasks.length===0)return!1;const r=this._tasks.shift();try{const n=Xs(r.signal);if(n&&!r.abortCallback)r.reject(ot());else{const s=n?(i=r.abortCallback)==null?void 0:i.call(r,ot()):r.callback(t);Qo(s)?s.then(r.resolve,r.reject):r.resolve(s)}}catch(n){r.reject(n)}return!0}cancelAll(){const t=ot();for(const r of this._tasks)if(r.abortCallback){const i=r.abortCallback(t);r.resolve(i)}else r.reject(t);this._tasks.length=0}},AF=class{constructor(t,r,i,n=void 0,s=void 0){this.resolve=t,this.reject=r,this.callback=i,this.signal=n,this.abortCallback=s}},ug=class extends te{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};l([c()],ug.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),l([c()],ug.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),ug=l([$("esri.views.support.debugFlags")],ug);const $_e=new ug;function T_e(){return new qS.Scheduler}var xe;(function(e){e.RESOURCE_CONTROLLER_IMMEDIATE="immediate",e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.LOD_RENDERER="LoD renderer",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="clouds generator",e.MAPVIEW_FETCH_QUEUE="mapview fetch queue",e.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",e.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",e[e.NONE=0]="NONE",e[e.TEST_PRIO=1]="TEST_PRIO"})(xe||(xe={}));const zn=0,RF=new Map([[xe.RESOURCE_CONTROLLER_IMMEDIATE,zn],[xe.RESOURCE_CONTROLLER,4],[xe.SLIDE,zn],[xe.STREAM_DATA_LOADER,zn],[xe.ELEVATION_QUERY,zn],[xe.TERRAIN_SURFACE,1],[xe.SURFACE_GEOMETRY_UPDATES,1],[xe.LOD_RENDERER,2],[xe.GRAPHICS_CORE,2],[xe.I3S_CONTROLLER,2],[xe.POINT_CLOUD_LAYER,2],[xe.FEATURE_TILE_FETCHER,2],[xe.CLOUDS_GENERATOR,2],[xe.OVERLAY,4],[xe.STAGE,4],[xe.GRAPHICS_DECONFLICTOR,4],[xe.FILTER_VISIBILITY,4],[xe.SCALE_VISIBILITY,4],[xe.FRUSTUM_VISIBILITY,4],[xe.POINT_OF_INTEREST_FREQUENT,6],[xe.POINT_OF_INTEREST_INFREQUENT,30],[xe.LABELER,8],[xe.FEATURE_QUERY_ENGINE,8],[xe.FEATURE_TILE_TREE,16],[xe.FEATURE_TILE_TREE_ACTIVE,zn],[xe.ELEVATION_ALIGNMENT,12],[xe.ELEVATION_ALIGNMENT_SCENE,14],[xe.TEXT_TEXTURE_ATLAS,12],[xe.TEXTURE_UNLOAD,12],[xe.LINE_OF_SIGHT_TOOL,16],[xe.LINE_OF_SIGHT_TOOL_INTERACTIVE,zn],[xe.SNAPPING,zn],[xe.SHADOW_ACCUMULATOR,30],[xe.MAPVIEW_FETCH_QUEUE,zn],[xe.MAPVIEW_LAYERVIEW_UPDATE,2],[xe.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,zn]]);function OF(e){return RF.has(e)?RF.get(e):typeof e=="number"?e:1}const x_e=6.5,kF=1,E_e=30,M_e=1e3/30,I_e=100,PF=.9;var qS,bc;(function(e){class t{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(s=>s.needsUpdate)}constructor(){this._updating=J0(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new Wg("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new i,this._state=ni.INTERACTING,this._tasks=new Vd,this._runQueue=new Vd,this._load=0,this._idleStateCallbacks=new Vd,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=ce(()=>$_e.SCHEDULER_LOG_SLOW_TASKS,s=>this._debug=s,zt);for(const s of Object.keys(xe))this.performanceInfo.tasks.set(xe[s],new Wg(xe[s]))}destroy(){this._tasks.toArray().forEach(s=>s.remove()),this._tasks.clear(),wt(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(s){this._updatingChanged(),s&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(s,o){const a=new r(this,s,o);return this._tasks.push(a),this._updatingChanged(),this.performanceInfo.tasks.has(s)||this.performanceInfo.tasks.set(s,new Wg(s)),a}registerIdleStateCallbacks(s,o){const a={idleBegin:s,idleEnd:o};this._idleStateCallbacks.push(a),this.state===ni.IDLE&&this._idleUpdatesStartFired&&a.idleBegin();const u=this;return{remove:()=>this._removeIdleStateCallbacks(a),set idleBegin(d){u._idleUpdatesStartFired&&(a.idleEnd(),u._state===ni.IDLE&&d()),a.idleBegin=d},set idleEnd(d){a.idleEnd=d}}}get load(){return this._load}set state(s){this._state!==s&&(this._state=s,this.state!==ni.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}updateBudget(s){this._test&&(this._test.usedBudget=0),++this._frameNumber;let o=x_e,a=s.frameDuration,u=kF;switch(this.state){case ni.IDLE:o=0,a=Math.max(I_e,s.frameDuration),u=E_e;break;case ni.INTERACTING:a=Math.max(M_e,s.frameDuration);case ni.ANIMATING:}return a=a-s.elapsedFrameTime-o,this.state!==ni.IDLE&&a<kF&&!this._forceTask?(this._forceTask=!0,!1):(a=Math.max(a,u),this._budget.reset(a,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case ni.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(s=>s.idleBegin())),this._runIdle();break;case ni.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(s){this._idleUpdatesStartFired&&s.idleEnd(),this._idleStateCallbacks.removeUnordered(s)}removeTask(s){this._tasks.removeUnordered(s),this._runQueue.removeUnordered(s),this._updatingChanged()}_updateTask(s){this._tasks.forAll(o=>{o.name===s&&o.setPriority(s)})}_getState(s){if(this._runQueue.some(a=>a.name===s))return bc.SCHEDULED;let o=bc.IDLE;return this._tasks.forAll(a=>{a.name===s&&a.needsUpdate&&(a.schedulePriority<=1?o=bc.READY:o!==bc.READY&&(o=bc.WAITING))}),o}_getRuntime(s){let o=0;return this._tasks.forAll(a=>{a.name===s&&(o+=a.runtime)}),o}_resetRuntimes(){this._tasks.forAll(s=>s.runtime=0)}_getRunning(){const s=new Map;if(this._tasks.forAll(a=>{a.needsUpdate&&s.set(a.name,(s.get(a.name)||0)+1)}),s.size===0)return null;let o="";return s.forEach((a,u)=>{o+=a>1?` ${a}x ${u}`:` ${u}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const s=this._tasks.reduce((o,a)=>a.needsUpdate?++o:o,0);this._load=this._load*PF+s*(1-PF)}_schedule(){for(this._runQueue.filterInPlace(s=>!!s.needsUpdate||(s.schedulePriority=s.basePriority,!1)),this._tasks.forAll(s=>{s.basePriority===zn&&s.needsUpdate&&!this._runQueue.includes(s)&&s.blockFrame!==this._frameNumber&&this._runQueue.unshift(s)});this._runQueue.length===0;){let s=!1,o=0;if(this._tasks.forAll(a=>{a.needsUpdate&&a.schedulePriority!==0&&a.basePriority!==zn&&a.blockFrame!==this._frameNumber&&(s=!0,o=Math.max(o,a.basePriority),a.schedulePriority===1?(a.schedulePriority=0,this._runQueue.push(a)):--a.schedulePriority)}),!s)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const s=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const o=this._budget.now(),a=this._runQueue.pop();this._budget.resetProgress();try{a.task.runTask(this._budget)===bZ&&(a.blockFrame=this._frameNumber)}catch(d){j.getLogger("esri.views.support.Scheduler").error(`Exception in task "${a.name}"`,d),a.blockFrame=this._frameNumber}!this._budget.hasProgressed&&a.blockFrame!==this._frameNumber&&a.needsUpdate&&(a.name,xe.I3S_CONTROLLER,a.blockFrame=this._frameNumber),a.schedulePriority=a.basePriority;const u=this._budget.now()-o;if(a.runtime+=u,this._frameTaskTimes.set(a.priority,this._frameTaskTimes.get(a.priority)+u),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-s)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-s)}_startFrameTaskTimes(){for(const s of Object.keys(xe))this._frameTaskTimes.set(xe[s],0)}_recordFrameTaskTimes(s){this._frameTaskTimes.forEach((o,a)=>this.performanceInfo.tasks.get(a).push(o)),this.performanceInfo.total.push(s)}get test(){return this._test}}e.Scheduler=t;class r{get task(){return this._task.value}get updating(){return this._queue.running}constructor(s,o,a){this._scheduler=s,this.name=o,this.blockFrame=0,this.runtime=0,this._queue=new S_e,this._handles=new _m,this._basePriority=OF(o),this.schedulePriority=this._basePriority,this._task=J0(a??this._queue),this._handles.add(as(()=>this.task.running,u=>s.taskRunningChanged(u)))}remove(){this.processQueue(SZ),this._scheduler.removeTask(this),this.schedule=NF.schedule,this.reschedule=NF.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(s){if(this.name===s)return;this.name=s;const o=OF(s);this._basePriority!==zn&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(s){this.setPriority(s)}get needsUpdate(){return this.updating||this.task.running}schedule(s,o,a){return this._queue.push(s,o,a)}reschedule(s,o,a){return this._queue.unshift(s,o,a)}processQueue(s){return this._queue.runTask(s)}}class i{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=ni.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(s){return!this.done&&(s()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(s){this._enabled=s}reset(s,o){this._begin=this.now(),this._budget=s,this._state=o,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=i})(qS||(qS={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(bc||(bc={}));const SZ=(()=>{const e=new qS.Budget;return e.enabled=!1,e})();let C_e=class{remove(){}processQueue(){}schedule(t,r,i){try{if(Xs(r)){const n=ot();return i?Promise.resolve(i(n)):Promise.reject(n)}return cM(t(SZ))}catch(n){return Promise.reject(n)}}reschedule(t,r,i){return this.schedule(t,r,i)}};const NF=new C_e;let A_e=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=T_e(),this.stationary=!0,this.prepare=()=>{var r;this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),((r=this.view.animation)==null?void 0:r.target)==null||Qo(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=r=>{var a;if(this._updateRequested=!1,(a=this.view)==null?void 0:a.destroyed)return;const{allLayerViews:i,graphicsView:n,labelManager:s,state:{id:o}}=this.view;i.forEach(this._updateLayerView,this),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),n!=null&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=ni.ANIMATING:this.view.interacting?this._scheduler.state=ni.INTERACTING:this._scheduler.state=ni.IDLE,this._scheduler.updateBudget(r)&&this._scheduler.frame()}}destroy(){this.stop(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,targetState:new Uk,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=ce(()=>t.stationary,r=>{this.stationary=r,this.requestFrame()}),this._frameTaskHandle=Qf(this),this.requestUpdate()}stop(){var t;this._frameTaskHandle&&(this._updateRequested=!1,(t=this._stationaryHandle)==null||t.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){var n;if(!t.attached)return void this.requestUpdate();const r=this.view.state,i=t.lastUpdateId;i!=null&&(this.stationary||t.moving)||(t.moving=!0),i!==r.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=r.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&((n=t.layerViews)==null||n.forEach(this._updateLayerView,this))}},N_=class extends te{constructor(t){super(t),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(t,r){if(!t)return void j.getLogger(this).error("#goTo()","target cannot be null or undefined");const i=new U3;this.view.animation=i,await up(()=>this.view.ready,r);const n={...r,animate:(r==null?void 0:r.animate)??!SW(),animationMode:(r==null?void 0:r.animationMode)??"auto"},{extent:s,spatialReference:o,size:a,viewpoint:u,constraints:d,padding:h,allLayerViews:f}=this.view,m=F1e(t,{extent:s,spatialReference:o,size:a,viewpoint:u,constraints:d,padding:h,allLayerViews:f,pickClosestTarget:(r==null?void 0:r.pickClosestTarget)??!0});return i==null||i.update(m),this._gotoTask={},n.animate?this._gotoAnimated(m,n):this._gotoImmediate(m,n)}_gotoImmediate(t,r){const i=this._gotoTask,n=this.view.animation,s=t.then(o=>{if(_t(r),i!==this._gotoTask)throw new R("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=n.target=o,n.finish()});return this._cancellableGoTo(i,n,s,r)}_gotoAnimated(t,r){const i=this._gotoTask,n=this.view.animation;if(!n)return Promise.resolve();const s=t.then(o=>{if(_t(r),i!==this._gotoTask)throw new R("view:goto-interrupted","Goto was interrupted");return n.update(o),this.view.animationManager.animate(n,this.view.viewpoint,r),n.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,n,s,r)}_cancellableGoTo(t,r,i,n){const s=()=>t===this._gotoTask;return Nz(i,n).finally(()=>{s()&&(r.done||r.stop())})}};l([c({constructOnly:!0})],N_.prototype,"view",void 0),N_=l([$("esri.views.2d.GoToManager")],N_);function lt(){return Promise.all([D(()=>import("./webglDeps-C3pr28IQ.js"),__vite__mapDeps([146,66,65,120,147,122]),import.meta.url),D(()=>import("./mapViewDeps-CwWdWsPX.js"),__vite__mapDeps([148,67,68,13,69,70,64,65,66,39,71,33,149,122,76,150,147,84,151,110,109,75,15,16,152,101,73,74,108,146,120,153,79,154,63,24,19,20,10,155,118,116,103,119,156,53,157,77,72,158,159,160,161,162,163,115,164]),import.meta.url)])}const py=()=>lt().then(()=>D(()=>import("./TileLayerView2D-DwXROh-u.js"),__vite__mapDeps([165,101,67,68,13,69,70,64,65,66,39,71,33,151,150,122,147,84,110,109,75,15,16,108,153,79,154,63,24,19,20,10,53,149,76,73,74,118,116,103,158,159,166,167,163,168,169,161,162,170,171,142,143,130,26,172,173,174,175]),import.meta.url)),Sc=()=>lt().then(()=>D(()=>import("./FeatureLayerView2D-BqJU0IYU.js").then(e=>e.F),__vite__mapDeps([176,151,15,13,16,177,168,162,67,68,69,70,64,65,66,39,71,33,163,150,122,147,84,110,109,75,149,76,79,152,101,178,172,175,170]),import.meta.url)),LF={"base-dynamic":()=>lt().then(()=>D(()=>import("./BaseDynamicLayerView2D-Ba7ByeW8.js"),__vite__mapDeps([179,180,150,64,65,66,39,122,147,84,151,110,109,75,15,13,16,168,181,167,170]),import.meta.url)),"base-tile":py,"bing-maps":py,catalog:()=>lt().then(()=>D(()=>import("./CatalogLayerView2D-DspCUSAR.js"),__vite__mapDeps([182,168,151]),import.meta.url)),"catalog-dynamic-group":()=>lt().then(()=>D(()=>import("./CatalogDynamicGroupLayerView2D-CAimg2-e.js"),__vite__mapDeps([183,168,151]),import.meta.url)),"catalog-footprint":()=>lt().then(()=>D(()=>import("./CatalogFootprintLayerView2D-g8tGZH2A.js"),__vite__mapDeps([184,176,151,15,13,16,177,168,162,67,68,69,70,64,65,66,39,71,33,163,150,122,147,84,110,109,75,149,76,79,152,101,178,172,175,170]),import.meta.url)),csv:Sc,"geo-rss":()=>lt().then(()=>D(()=>import("./GeoRSSLayerView2D-xZLz3noe.js"),__vite__mapDeps([185,168,151,160,161,162,67,68,13,69,70,64,65,66,39,71,33,163,150,122,147,84,110,109,75,15,16,149,76,158,63,24,19,20,10,159]),import.meta.url)),feature:Sc,geojson:Sc,parquet:Sc,graphics:()=>lt().then(()=>D(()=>import("./GraphicsLayerView2D-CutN1h38.js"),__vite__mapDeps([186,168,151,160,161,162,67,68,13,69,70,64,65,66,39,71,33,163,150,122,147,84,110,109,75,15,16,149,76,158,63,24,19,20,10,159,178]),import.meta.url)),group:()=>lt().then(()=>D(()=>import("./GroupLayerView2D-BLINwa7E.js"),__vite__mapDeps([187,168,151]),import.meta.url)),imagery:()=>lt().then(()=>D(()=>import("./ImageryLayerView2D-CjQHJy19.js"),__vite__mapDeps([188,189,66,122,39,90,150,64,65,147,84,151,110,109,75,15,13,16,168,158,67,68,69,70,71,33,63,24,19,20,10,149,76,159,169,161,162,163,180,167,181,93,177,175,170]),import.meta.url)),"imagery-tile":()=>lt().then(()=>D(()=>import("./ImageryTileLayerView2D-CvaqGWaj.js"),__vite__mapDeps([190,191,189,66,122,39,90,150,64,65,147,84,151,110,109,75,15,13,16,168,192,163,193,93,177,175,170]),import.meta.url)),kml:()=>lt().then(()=>D(()=>import("./KMLLayerView2D-CvqVTF6C.js"),__vite__mapDeps([194,195,167,151,180,150,64,65,66,39,122,147,84,110,109,75,15,13,16,168,160,161,162,67,68,69,70,71,33,163,149,76,158,63,24,19,20,10,159,93,155,146,120,118,116,103,154,101,119,192]),import.meta.url)),"knowledge-graph":()=>lt().then(()=>D(()=>import("./KnowledgeGraphLayerView2D-CAPOE8Ho.js"),__vite__mapDeps([196,168,151]),import.meta.url)),"link-chart":()=>lt().then(()=>D(()=>import("./KnowledgeGraphLayerView2D-CAPOE8Ho.js"),__vite__mapDeps([196,168,151]),import.meta.url)),"knowledge-graph-sublayer":Sc,"map-image":()=>lt().then(()=>D(()=>import("./MapImageLayerView2D-CtCSl1Yu.js"),__vite__mapDeps([197,180,150,64,65,66,39,122,147,84,151,110,109,75,15,13,16,168,158,67,68,69,70,71,33,63,24,19,20,10,149,76,159,169,161,162,163,181,167,198,172,174,177,170,171,142,143,130,26,173,175]),import.meta.url)),"map-notes":()=>lt().then(()=>D(()=>import("./MapNotesLayerView2D-DwPZQ62f.js"),__vite__mapDeps([199,168,151,160,161,162,67,68,13,69,70,64,65,66,39,71,33,163,150,122,147,84,110,109,75,15,16,149,76,158,63,24,19,20,10,159]),import.meta.url)),media:()=>lt().then(()=>D(()=>import("./MediaLayerView2D-h-tUrcml.js"),__vite__mapDeps([200,201,159,43,101,67,68,13,69,70,64,65,66,39,71,33,151,150,122,147,84,110,109,75,15,16,108,153,79,154,63,24,19,20,10,53,149,76,73,74,118,116,103,158,157,77,202,168]),import.meta.url)),"ogc-feature":()=>lt().then(()=>D(()=>import("./OGCFeatureLayerView2D-BhIeekVj.js"),__vite__mapDeps([203,176,151,15,13,16,177,168,162,67,68,69,70,64,65,66,39,71,33,163,150,122,147,84,110,109,75,149,76,79,152,101,178,172,175,170]),import.meta.url)),"open-street-map":py,"oriented-imagery":Sc,route:()=>lt().then(()=>D(()=>import("./RouteLayerView2D-CFQ4J_E2.js"),__vite__mapDeps([204,205,168,151,160,161,162,67,68,13,69,70,64,65,66,39,71,33,163,150,122,147,84,110,109,75,15,16,149,76,158,63,24,19,20,10,159]),import.meta.url)),stream:()=>lt().then(()=>D(()=>import("./StreamLayerView2D-BiZC8d1Z.js"),__vite__mapDeps([206,176,151,15,13,16,177,168,162,67,68,69,70,64,65,66,39,71,33,163,150,122,147,84,110,109,75,149,76,79,152,101,178,172,175,170]),import.meta.url)),"subtype-group":()=>lt().then(()=>D(()=>import("./SubtypeGroupLayerView2D-DKhpp18j.js"),__vite__mapDeps([207,176,151,15,13,16,177,168,162,67,68,69,70,64,65,66,39,71,33,163,150,122,147,84,110,109,75,149,76,79,152,101,178,172,175,170]),import.meta.url)),tile:py,"vector-tile":()=>lt().then(()=>D(()=>import("./VectorTileLayerView2D-ndjveXHj.js"),__vite__mapDeps([208,108,70,53,156,101,76,69,66,122,109,150,64,65,39,147,84,151,110,75,15,13,16,163,18,111,112,168,170]),import.meta.url)),video:()=>lt().then(()=>D(()=>import("./VideoLayerView2D-CzLezjbI.js"),__vite__mapDeps([209,210,211,202,84,150,64,65,66,39,122,147,151,110,109,75,15,13,16,149,67,68,69,70,71,33,76,168,160,161,162,163,158,63,24,19,20,10,159]),import.meta.url)),wcs:()=>lt().then(()=>D(()=>import("./ImageryTileLayerView2D-CvaqGWaj.js"),__vite__mapDeps([190,191,189,66,122,39,90,150,64,65,147,84,151,110,109,75,15,13,16,168,192,163,193,93,177,175,170]),import.meta.url)),"web-tile":py,wfs:Sc,wms:()=>lt().then(()=>D(()=>import("./WMSLayerView2D-OYlTs-63.js"),__vite__mapDeps([212,180,150,64,65,66,39,122,147,84,151,110,109,75,15,13,16,168,181,167,170,213,177]),import.meta.url)),wmts:()=>lt().then(()=>D(()=>import("./WMTSLayerView2D-C9AidIA7.js"),__vite__mapDeps([214,166,167,151,150,64,65,66,39,122,147,84,110,109,75,15,13,16,163,168,170]),import.meta.url)),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,focusArea:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};function R_e(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",r=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new R(`${r}:view-not-supported`,`${t} is not supported in 2D`)}const FF={hasLayerViewModule:e=>LF[e.type]!=null,importLayerView:e=>{const t=LF[e.type];if(t==null)throw R_e(e);return t(e)}};function O_e(e,t){const{spatialReference:r}=t,i=[t.x,t.y];let n=Number.POSITIVE_INFINITY,s=0,o=0;const a=[0,0],u=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const d of u)for(let h=0;h<d.length-1;h++){Qae(a,i,d,h);const f=w$(i,a);f<n&&(n=f,s=a[0],o=a[1])}return{coordinate:new ge({x:s,y:o,spatialReference:r}),distance:n}}var Z3;let Ed=Z3=class extends lk(te){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return cc(this.geometry,this.spatialReference)}catch(e){return j.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;const r=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?Cv(this.normalizedGeometry,r):SO(this.normalizedGeometry,r))return e;const{coordinate:i}=O_e(this.normalizedGeometry,r);return i&&(e.targetGeometry=i),e}clone(){var e,t;return new Z3({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};l([c({constructOnly:!0})],Ed.prototype,"geometry",void 0),l([c({readOnly:!0})],Ed.prototype,"normalizedGeometry",null),l([c({constructOnly:!0})],Ed.prototype,"spatialReference",void 0),Ed=Z3=l([$("esri.views.2d.constraints.GeometryConstraint")],Ed);var J3;let cg=J3=class extends lk(te){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new J3({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};l([c()],cg.prototype,"enabled",void 0),l([c()],cg.prototype,"rotationEnabled",void 0),cg=J3=l([$("esri.views.2d.constraints.RotationConstraint")],cg);const $Z=cg;var K3;let Ri=K3=class extends lk(te){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:r,maxScale:i,minZoom:n,maxZoom:s}=this,o=-1,a=-1,u=!1,d=!1;if(r!==0&&i!==0&&r<i&&([r,i]=[i,r]),!(t!=null&&t.length))return this._set("effectiveMinScale",r),void this._set("effectiveMaxScale",i);t=t.map(h=>h.clone()),t.sort((h,f)=>f.scale-h.scale),t.forEach((h,f)=>h.level=f);for(const h of t)!u&&r>0&&r>=h.scale&&(o=h.level,u=!0),!d&&i>0&&i>=h.scale&&(a=e?e.level:-1,d=!0),e=h;n===-1&&(n=r===0?0:o),s===-1&&(s=i===0?t.length-1:a),n=Math.max(n,0),n=Math.min(n,t.length-1),s=Math.max(s,0),s=Math.min(s,t.length-1),n>s&&([n,s]=[s,n]),r=t[n].scale,i=t[s].scale,t.splice(0,n),t.splice(s-n+1,t.length),t.forEach((h,f)=>{this._lodByScale[h.scale]=h,this._scales[f]=h.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",r),this._set("effectiveMaxScale",i)}constrain(e,t){if(t&&e.scale===t.scale)return e;const r=this.effectiveMinScale,i=this.effectiveMaxScale,n=e.targetGeometry,s=t&&t.targetGeometry,o=i!==0&&e.scale<i,a=r!==0&&e.scale>r;if(o||a){const u=a?r:i;if(t&&s){const d=(u-t.scale)/(e.scale-t.scale);n.x=s.x+(n.x-s.x)*d,n.y=s.y+(n.y-s.y)*d}e.scale=u}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),r=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(r>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const r=Math.floor(e),i=Math.ceil(e);return t[r]+(e-r)*(t[i]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let r,i;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let n=0;n<t.length-1;n++){if(r=t[n],i=t[n+1],i===e)return n+this.effectiveMinZoom+1;if(r>e&&i<e)return n+this.effectiveMinZoom+1-(e-i)/(r-i)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r-1)}clone(){return new K3({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,r)=>Math.abs(r-e)<=Math.abs(t-e)?r:t,this._scales[0])),this._lodByScale[e].scale}};l([c({readOnly:!0})],Ri.prototype,"effectiveLODs",void 0),l([c({readOnly:!0})],Ri.prototype,"effectiveMinZoom",void 0),l([c({readOnly:!0})],Ri.prototype,"effectiveMaxZoom",void 0),l([c({readOnly:!0})],Ri.prototype,"effectiveMinScale",void 0),l([c({readOnly:!0})],Ri.prototype,"effectiveMaxScale",void 0),l([c()],Ri.prototype,"lods",void 0),l([c()],Ri.prototype,"minZoom",void 0),l([c()],Ri.prototype,"maxZoom",void 0),l([c()],Ri.prototype,"minScale",void 0),l([c()],Ri.prototype,"maxScale",void 0),l([c()],Ri.prototype,"snapToZoom",void 0),Ri=K3=l([$("esri.views.2d.constraints.ZoomConstraint")],Ri);const TZ=Ri,k_e={base:null,key:"type",typeMap:{extent:qe,polygon:Zi}};let Ft=class extends te{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Y}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){var t,r,i;return`${(t=this._zoom)==null?void 0:t.uid}/${(r=this._rotation)==null?void 0:r.uid}/${(i=this._geometry)==null?void 0:i.uid}`}get _geometry(){var r,i;const t=this._get("_geometry");return t&&this.geometry===t.geometry&&((r=this.view)==null?void 0:r.constraintsInfo.spatialReference)===t.spatialReference?t:new Ed({geometry:this.geometry,spatialReference:(i=this.view)==null?void 0:i.constraintsInfo.spatialReference})}get _rotation(){return new $Z({rotationEnabled:this.rotationEnabled})}get _zoom(){var u;const t=this._get("_zoom"),r=this.lods||((u=this.view)==null?void 0:u.constraintsInfo.lods),i=this.minZoom,n=this.maxZoom,s=this.minScale,o=this.maxScale,a=this.snapToZoom;return t&&t.lods===r&&t.minZoom===i&&t.maxZoom===n&&t.minScale===s&&t.maxScale===o&&t.snapToZoom===a?t:new TZ({lods:r,minZoom:i,maxZoom:n,minScale:s,maxScale:o,snapToZoom:a})}canZoomInTo(t){const r=this.effectiveMaxScale;return r===0||t>=r}canZoomOutTo(t){const r=this.effectiveMinScale;return r===0||t<=r}constrain(t,r){return this._zoom.constrain(t,r),this._rotation.constrain(t,r),this._geometry.constrain(t,r),this.customConstraints.forEach(i=>i.constrain(t,r)),t}constrainByGeometry(t){return this._geometry.constrain(t),this.customConstraints.forEach(r=>{var i;return(i=r.applyPanConstraint)==null?void 0:i.call(r,t)}),t}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};l([c({readOnly:!0})],Ft.prototype,"effectiveLODs",null),l([c({readOnly:!0})],Ft.prototype,"effectiveMinScale",null),l([c({readOnly:!0})],Ft.prototype,"effectiveMaxScale",null),l([c({readOnly:!0})],Ft.prototype,"effectiveMinZoom",null),l([c({readOnly:!0})],Ft.prototype,"effectiveMaxZoom",null),l([c({types:k_e,value:null})],Ft.prototype,"geometry",null),l([c({type:[yu]})],Ft.prototype,"lods",void 0),l([c()],Ft.prototype,"minScale",void 0),l([c()],Ft.prototype,"maxScale",void 0),l([c()],Ft.prototype,"minZoom",void 0),l([c()],Ft.prototype,"maxZoom",void 0),l([c()],Ft.prototype,"rotationEnabled",void 0),l([c()],Ft.prototype,"snapToZoom",void 0),l([c({type:Y})],Ft.prototype,"customConstraints",void 0),l([c()],Ft.prototype,"view",void 0),l([c({readOnly:!0})],Ft.prototype,"version",null),l([c({type:Ed,readOnly:!0})],Ft.prototype,"_geometry",null),l([c({type:$Z})],Ft.prototype,"_rotation",null),l([c({readOnly:!0,type:TZ})],Ft.prototype,"_zoom",null),Ft=l([$("esri.views.2d.MapViewConstraints")],Ft);const xZ=Ft;let nc=class id{static getId(t,r,i,n){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${r}/${i}/${n}`}constructor(t,r,i,n){this.set(t,r,i,n)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(t){this.set(t)}get hash(){const t=4095&this.row,r=4095&this.col,i=63&this.level;return(3&this.world)<<30|r<<22|t<<8|i}acquire(t,r,i,n){this.set(t,r,i,n)}contains(t){const r=t.level-this.level;return r>=0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}containsChild(t){const r=t.level-this.level;return r>0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new id(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,r,i,n){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[s,o,a,u]=t.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(u)}else this.level=+t,this.row=+r,this.col=+i,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new id(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(t,r,i){const n=this.clone();return n.col+=t,n.row+=r,i.normalizeKey(n),n}getChildKeys(){const t=this.level+1,r=this.row<<1,i=this.col<<1,n=this.world;return[new id(t,r,i,n),new id(t,r,i+1,n),new id(t,r+1,i,n),new id(t,r+1,i+1,n)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}};nc.pool=new _p(nc,null,null,25,50);function Dp(e,t){return[e,t]}function $c(e,t,r){return e[0]=t,e[1]=r,e}function P_e(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}const vs=new nc("0/0/0/0");let N_e=class EZ{static create(t,r,i=null){const n=bi(t.spatialReference),s=r.origin||Dp(t.origin.x,t.origin.y),o=Dp(t.size[0]*r.resolution,t.size[1]*r.resolution),a=Dp(-1/0,-1/0),u=Dp(1/0,1/0),d=Dp(1/0,1/0);i!=null&&($c(a,Math.max(0,Math.floor((i.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-i.ymax)/o[1]))),$c(u,Math.max(0,Math.floor((i.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-i.ymin)/o[1]))),$c(d,u[0]-a[0]+1,u[1]-a[1]+1));const{cols:h,rows:f}=r;let m,y,g,v;return!i&&h&&f&&($c(a,h[0],f[0]),$c(u,h[1],f[1]),$c(d,h[1]-h[0]+1,f[1]-f[0]+1)),t.isWrappable?(m=Dp(Math.ceil(Math.round((n.valid[1]-n.valid[0])/r.resolution)/t.size[0]),d[1]),y=!0,g=n.origin,v=n.valid):(m=d,y=!1),new EZ(r.level,r.resolution,r.scale,s,a,u,d,o,m,y,g,v)}constructor(t,r,i,n,s,o,a,u,d,h,f,m){this.level=t,this.resolution=r,this.scale=i,this.origin=n,this.first=s,this.last=o,this.size=a,this.norm=u,this.worldSize=d,this.wrap=h,this._spatialReferenceOrigin=f,this._spatialReferenceValid=m}normalizeCol(t){if(!this.wrap)return t;const r=this.worldSize[0];return t<0?r-1-Math.abs((t+1)%r):t%r}normalizeKey(t){if(!this.wrap)return;const r=this.worldSize[0],i=t.col;i<0?(t.col=i+r,t.world-=1):i>=r&&(t.col=i-r,t.world+=1)}denormalizeCol(t,r){return this.wrap?this.worldSize[0]*r+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){const r=this.origin[0]+t*this.norm[0],i=this._spatialReferenceOrigin,n=this._spatialReferenceValid;return this.wrap&&i&&n?r===i[0]?n[0]:this.origin[0]===i[0]&&t===this.worldSize[0]?n[1]:r:r}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,r,i=!1){vs.set(r);const n=i?vs.col:this.denormalizeCol(vs.col,vs.world),s=vs.row;return P_e(t,this.getXForColumn(n),this.getYForRow(s+1),this.getXForColumn(n+1),this.getYForRow(s)),t}getTileCoords(t,r,i=!1){vs.set(r);const n=i?vs.col:this.denormalizeCol(vs.col,vs.world);return Array.isArray(t)?$c(t,this.getXForColumn(n),this.getYForRow(vs.row)):(t.x=this.getXForColumn(n),t.y=this.getYForRow(vs.row)),t}},sv=class{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}*keys(){const t=this.lodInfo;for(const{row:r,colFrom:i,colTo:n}of this.spans)for(let s=i;s<=n;s++){const o=t.getWorldForColumn(s);yield new nc(t.level,r,t.normalizeCol(s),o)}}forEach(t,r){const{spans:i,lodInfo:n}=this,{level:s}=n;if(i.length!==0)for(const{row:o,colFrom:a,colTo:u}of i)for(let d=a;d<=u;d++)t.call(r,s,o,n.normalizeCol(d),n.getWorldForColumn(d))}};sv.pool=new _p(sv);let dx=class{constructor(t,r,i){this.row=t,this.colFrom=r,this.colTo=i}};const pt=new nc("0/0/0/0");let L_e=class MZ{static create(t,r){t[1]>r[1]&&([t,r]=[r,t]);const[i,n]=t,[s,o]=r,a=s-i,u=o-n,d=u!==0?a/u:0,h=(Math.ceil(n)-n)*d,f=(Math.floor(n)-n)*d;return new MZ(i,Math.floor(n),Math.ceil(o),d,a<0?h:f,a<0?f:h,a<0?s:i,a<0?i:s)}constructor(t,r,i,n,s,o,a,u){this.x=t,this.ymin=r,this.ymax=i,this.invM=n,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=u}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Yi=[[0,0],[0,0],[0,0],[0,0]],F_e=1e-6;let D_e=class{constructor(t,r=null,i=t.lods[0].level,n=t.lods[t.lods.length-1].level){this.tileInfo=t,this.fullExtent=r,this.scales=[],this._infoByScale={},this._infoByLevel={};const s=t.lods.filter(a=>a.level>=i&&a.level<=n);this.minScale=s[0].scale,this.maxScale=s[s.length-1].scale;const o=this._lodInfos=s.map(a=>N_e.create(t,a,r));s.forEach((a,u)=>{this._infoByLevel[a.level]=o[u],this._infoByScale[a.scale]=o[u],this.scales[u]=a.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,r,i=!1){pt.set(r);const n=this._infoByLevel[pt.level];return n?n.getTileBounds(t,pt,i):t}getTileCoords(t,r,i=!1){pt.set(r);const n=this._infoByLevel[pt.level];return n?n.getTileCoords(t,pt,i):t}getTileCoverage(t,r=192,i=!0,n="closest"){if(!i&&(t.scale>this.minScale||t.scale<this.maxScale))return null;const s=n==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),o=sv.pool.acquire(s),a=this._wrap;let u,d,h,f=1/0,m=-1/0;const y=o.spans;Yi[0][0]=Yi[0][1]=Yi[1][1]=Yi[3][0]=-r,Yi[1][0]=Yi[2][0]=t.size[0]+r,Yi[2][1]=Yi[3][1]=t.size[1]+r;for(const w of Yi)t.toMap(w,w),w[0]=s.getColumnForX(w[0]),w[1]=s.getRowForY(w[1]);const g=[];let v=3;for(let w=0;w<4;w++){if(Yi[w][1]===Yi[v][1]){v=w;continue}const b=L_e.create(Yi[w],Yi[v]);f=Math.min(b.ymin,f),m=Math.max(b.ymax,m),g[b.ymin]===void 0&&(g[b.ymin]=[]),g[b.ymin].push(b),v=w}if(f==null||m==null||m-f>100)return null;let _=[];for(u=f;u<m;){g[u]!=null&&(_=_.concat(g[u])),d=1/0,h=-1/0;for(let w=_.length-1;w>=0;w--){const b=_[w];d=Math.min(d,b.getLeftCol()),h=Math.max(h,b.getRightCol())}if(d=Math.floor(d),h=Math.floor(h),u>=s.first[1]&&u<=s.last[1])if(a)if(s.size[0]<s.worldSize[0]){const w=Math.floor(h/s.worldSize[0]);for(let b=Math.floor(d/s.worldSize[0]);b<=w;b++)y.push(new dx(u,Math.max(s.getFirstColumnForWorld(b),d),Math.min(s.getLastColumnForWorld(b),h)))}else y.push(new dx(u,d,h));else d>s.last[0]||h<s.first[0]||(d=Math.max(d,s.first[0]),h=Math.min(h,s.last[0]),y.push(new dx(u,d,h)));u+=1;for(let w=_.length-1;w>=0;w--){const b=_[w];b.ymax>=u?b.incrRow():_.splice(w,1)}}return o}getTileParentId(t){pt.set(t);const r=this._infoByLevel[pt.level],i=this._lodInfos.indexOf(r)-1;return i<0?null:(this._getTileIdAtLOD(pt,this._lodInfos[i],pt),pt.id)}getTileResolution(t){const r=this._infoByLevel[typeof t=="object"?t.level:t];return r?r.resolution:-1}getTileScale(t){const r=this._infoByLevel[t.level];return r?r.scale:-1}intersects(t,r){pt.set(r);const i=this._infoByLevel[pt.level],n=t.lodInfo;if(n.resolution>i.resolution){this._getTileIdAtLOD(pt,n,pt);const o=n.denormalizeCol(pt.col,pt.world);for(const a of t.spans)if(a.row===pt.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(n.resolution<i.resolution){const[o,a,u,d]=t.spans.reduce((v,_)=>(v[0]=Math.min(v[0],_.row),v[1]=Math.max(v[1],_.row),v[2]=Math.min(v[2],_.colFrom),v[3]=Math.max(v[3],_.colTo),v),[1/0,-1/0,1/0,-1/0]),h=i.denormalizeCol(pt.col,pt.world),f=n.getColumnForX(i.getXForColumn(h)),m=n.getRowForY(i.getYForRow(pt.row)),y=n.getColumnForX(i.getXForColumn(h+1))-1,g=n.getRowForY(i.getYForRow(pt.row+1))-1;return!(f>d||y<u||m>a||g<o)}const s=n.denormalizeCol(pt.col,pt.world);return t.spans.some(o=>o.row===pt.row&&o.colFrom<=s&&o.colTo>=s)}normalizeBounds(t,r,i){if(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],this._wrap){const n=bi(this.tileInfo.spatialReference),s=-i*(n.valid[1]-n.valid[0]);t[0]+=s,t[2]+=s}return t}getSmallestInfoForScale(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>r[0])return this._infoByScale[r[0]];for(let i=1;i<r.length-1;i++)if(t>r[i]+F_e)return this._infoByScale[r[i-1]];return this._infoByScale[r[r.length-1]]}getClosestInfoForScale(t){const r=this.scales;return this._infoByScale[t]||(t=r.reduce((i,n)=>Math.abs(n-t)<Math.abs(i-t)?n:i,r[0])),this._infoByScale[t]}scaleToLevel(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let i=r.length-1;i>=0;i--)if(t<r[i])return i===r.length-1?this._infoByScale[r[r.length-1]].level:this._infoByScale[r[i]].level+(r[i]-t)/(r[i]-r[i+1]);return this._infoByScale[r[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}zoomToScale(t){return this.tileInfo.zoomToScale(t)}_getTileIdAtLOD(t,r,i){const n=this._infoByLevel[i.level];return t.set(i),r.resolution<n.resolution?null:(r.resolution===n.resolution||(t.level=r.level,t.col=Math.floor(i.col*n.resolution/r.resolution+.01),t.row=Math.floor(i.row*n.resolution/r.resolution+.01)),t)}},j_e=class{constructor(t,r){this.item=t,this.controller=r,this.promise=null}},V_e=class{constructor(t){this._schedule=null,this._task=null,this._deferreds=new A_,this._controllers=new A_,this._processingItems=new A_,this._pausedSignal=J0(!1),this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new TS(t.peeker),this.process=t.process;const r=t.scheduler;t.priority&&r&&(this._task=r.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule=wt(this._schedule),this._task=wt(this._task)}get updating(){var t;return!!((t=this._task)!=null&&t.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(t){const r=this._controllers.get(t);r&&r.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(r=>t.push(r)),this._controllers.clear(),t.forEach(r=>r.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((r,i)=>t(i))}get(t){const r=this._deferreds.get(t);return r?r.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(t,r){const i=this.get(t);if(i)return i;const n=new AbortController;let s=null;r&&(s=es(r,()=>n.abort()));const o=()=>{const h=this._processingItems.get(t);h&&h.controller.abort(),a(),d.reject(ot())},a=()=>{u.remove(),s!=null&&s.remove(),this._removeItem(t),this._queue.remove(t),this._scheduleNext()},u=sO(n.signal,o),d=_n();return this._deferreds.set(t,d),this._controllers.set(t,n),d.promise.then(a,a),this._queue.push(t),this._scheduleNext(),d.promise}last(){return this._queue.last()}lastPromise(){const t=this.last();return t?this.get(t):null}peek(){return this._queue.peek()}popLast(){var r;const t=this._queue.popLast();return t&&((r=this._deferreds.get(t))==null||r.reject(ot()),this._removeItem(t)),t}reset(){const t=Array.from(this._processingItems.values());this._processingItems.clear();for(const r of t)this._queue.push(r.item),r.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_removeItem(t){this._deferreds.delete(t),this._controllers.delete(t),this._processingItems.delete(t)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=Mv(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(r))}_processError(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(r))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(t==null)return;let r;const i=new AbortController,n=new j_e(t,i);this._processingItems.set(t,n);try{r=this.process(t,i.signal)}catch(s){this._processError(n,s)}Qo(r)?(n.promise=r,r.then(s=>this._processResult(n,s),s=>this._processError(n,s))):this._processResult(n,r)}get test(){}};const DF=[0,0];let Sa=class extends te{constructor(t){super(t),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:t,process:r,scheduler:i,priority:n}=this;this._queue=new V_e({concurrency:t,scheduler:i,priority:n,process:(s,o)=>{const a=this._keyToItem.get(s);return r(a,{signal:o})},peeker:s=>this._peek(s)})}destroy(){this.clear(),this._queue=st(this._queue)}get length(){return this._queue?this._queue.length:0}abort(t){const r=typeof t=="string"?t:t.id;this._queue.abort(r)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}pause(){this._queue.pause()}push(t){const r=t.key.id;if(this._queue.has(r))return this._queue.get(r);const i=this._queue.push(r),n=this.tileInfoView.getTileScale(t.key),s=x2(this._tilesByScale,n,()=>new Set),o=()=>{s.delete(t.key),s.size===0&&this._tilesByScale.delete(n),this._keyToItem.delete(r)};return s.add(t.key),this._keyToItem.set(r,t),i.then(o,o),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(t){if(!this.state)return t.values().next().value;const r=new Set;for(const o of t)r.add(this._keyToItem.get(o).key);const i=this.state.scale;let n,s=Number.POSITIVE_INFINITY;for(const[o,a]of this._tilesByScale)if(jz(a,u=>r.has(u))){const u=Math.abs(o-i);u<s&&(n=a,s=u)}return this._getClosestTileKey(n,t).id}_getClosestTileKey(t,r){const i=this.tileInfoView,n=this.state.center;let s,o=Number.POSITIVE_INFINITY;for(const a of t)if(r.has(a.id)){i.getTileCoords(DF,a);const u=w$(DF,n);u<o&&(o=u,s=a)}return s}};l([c({constructOnly:!0})],Sa.prototype,"concurrency",void 0),l([c({constructOnly:!0})],Sa.prototype,"priority",void 0),l([c({constructOnly:!0})],Sa.prototype,"process",void 0),l([c({constructOnly:!0})],Sa.prototype,"scheduler",void 0),l([c()],Sa.prototype,"state",void 0),l([c({constructOnly:!0})],Sa.prototype,"tileInfoView",void 0),Sa=l([$("esri.views.2d.tiling.TileQueue")],Sa);const k4e=Sa;let U_e=class{constructor(t,r,i){this.maxSize=t,this._tileInfoView=r,this._removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const r=this._tilePerId.get(t);if(!r)return;const i=r.key.level,n=this._tileKeysPerLevel[i];jF(this._tilePerId,t);for(let s=0;s<n.length;s++)if(n[s].id===t){n.splice(s,1);break}return r.visible=!0,r}add(t){t.visible=!1;const r=t.key,i=r.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,t);const n=r.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(r)}prune(t,r,i){let n=this._tilePerId.size;if(n<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&s>=0;)s!==t&&(n=this._pruneAroundCenterTile(n,r,i,s)),s--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,r,i,t))}_pruneAroundCenterTile(t,r,i,n){const s=this._tileKeysPerLevel[n];if(!s||s.length===0)return t;const{size:o,origin:a}=this._tileInfoView.tileInfo,u=i*o[0],d=i*o[1],h=[0,0],f=[0,0];for(s.sort((m,y)=>(h[0]=a.x+u*(m.col+.5),h[1]=a.y-d*(m.row+.5),f[0]=a.x+u*(y.col+.5),f[1]=a.y-d*(y.row+.5),GS(h,r)-GS(f,r)));s.length>0;){const m=s.pop();if(this._removeTile(m.id),--t===this.maxSize)break}return t}_removeTile(t){const r=this._tilePerId.get(t);this._removedFunc&&r&&this._removedFunc(r),jF(this._tilePerId,t)}};function jF(e,t){e.delete(t)}const Tc=new nc(0,0,0,0),oa=new Map,hy=[],px=[];let N4e=class{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,t.resampling!=null&&(this.resampling=t.resampling),t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new U_e(t.cacheSize,this.tileInfoView,r=>{this.releaseTile(r)}))}destroy(){this.tileIndex.clear()}update(t){var w,b;const{resampling:r,tileIndex:i}=this,{scale:n,center:s,resolution:o}=t.state,{minScale:a,maxScale:u}=this.tileInfoView,d=!t.stationary&&n>this._previousScale;if(this._previousScale=n,!r&&(n>a||n<u))return this.tiles.length=0,void this.clear();const h=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.resampling,this.coveragePolicy);if(!h)return this.tiles.length=0,void this.clear();const{spans:f,lodInfo:m}=h,{level:y}=m;this.tiles.length=0,i.forEach(T=>T.visible=!0);let g=0,v=0;if(f.length>0)for(const{row:T,colFrom:x,colTo:M}of f)for(let I=x;I<=M;I++){g++;const O=Tc.set(y,T,m.normalizeCol(I),m.getWorldForColumn(I)).id;let P=i.get(O);if(P)P.isReady?(oa.set(O,P),v++):d||this._addParentTile(O,oa);else{if((w=this._tileCache)!=null&&w.has(O)){if(P=this._tileCache.pop(O),this.tileIndex.set(O,P),P.isReady){oa.set(O,P),v++;continue}}else P=this.acquireTile(Tc),this.tileIndex.set(O,P);d||this._addParentTile(O,oa)}}const _=v===g;for(const[T,x]of i){if(oa.has(T))continue;Tc.set(T);const M=this.tileInfoView.intersects(h,Tc),I=this.cachePolicy==="purge"?Tc.level!==y:Tc.level>y;!M||!d&&_?!I&&M||hy.push(x):x.isReady?I&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Tc,y)?hy.push(x):px.push(x):I&&hy.push(x)}for(const T of px)T.isReady&&oa.set(T.key.id,T);for(const T of hy)this._tileCache?this._tileCache.add(T):this.releaseTile(T),i.delete(T.key.id);for(const T of oa.values())this.tiles.push(T);for(const T of i.values())oa.has(T.key.id)||(T.visible=!1);(b=this._tileCache)==null||b.prune(y,s,o),sv.pool.release(h),px.length=0,hy.length=0,oa.clear()}clear(){const{tileIndex:t}=this;for(const r of t.values())this.releaseTile(r);t.clear()}refresh(t){var r;for(const i of this.tileIndex.values())t(i);(r=this._tileCache)==null||r.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,r){var s;let i=t,n=null;for(;i=this.tileInfoView.getTileParentId(i),i;)if(this.tileIndex.has(i)){if(n=this.tileIndex.get(i),n==null?void 0:n.isReady){r.has(n.key.id)||r.set(n.key.id,n);break}}else if((s=this._tileCache)!=null&&s.has(i)&&(n=this._tileCache.pop(i),this.tileIndex.set(i,n),n==null?void 0:n.isReady)){r.has(n.key.id)||r.set(n.key.id,n);break}}_hasReadyAncestor(t,r){const i=Ui();this.tileInfoView.getTileBounds(i,t,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=r&&n.key.level<t.level){const s=Ui();if(this.tileInfoView.getTileBounds(s,n.key,!0),mle(s,i))return!0}return!1}},ei=class extends te{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([ce(()=>{var r;return(r=this.constraints)==null?void 0:r.version},r=>{this.constraints&&r&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},Jo)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:r}=this.state.paddedViewState;return this.state.commitProperty("id"),new ge({x:t[0],y:t[1],spatialReference:r})}set center(t){if(t==null)return;if(!this.ready)return void this._set("center",t);let r;try{r=this._project(t,this.state.spatialReference)}catch(n){return void j.getLogger(this).error(new R("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:n}))}const i=this.viewpoint;G3(i,i,r),this.viewpoint=i}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void j.getLogger(this).error(new R("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let r;try{r=this._project(t,this.state.spatialReference)}catch(n){return void j.getLogger(this).error(new R("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}const i=this.viewpoint;V1e(i,i,r,this.state.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const r=this.viewpoint;K1e(r,r,t),this.viewpoint=r}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const i=this._get("extent");return void(i&&(this._set("extent",void 0),this._set("center",i.center)))}const r=this.viewpoint;xF(r,r,t),this.viewpoint=r}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){var s;if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let r,i;try{r=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?i=new R("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(i=new R("mapview:invalid-viewpoint","geometry not defined"))}catch(o){i=new R("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(i)return void j.getLogger(this).error(i);this._scaleBeforeChangingSpatialReference=null;const n=new dr({targetGeometry:new ge,scale:0,rotation:0});ci(n,r),(s=this.constraints)==null||s.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this._set("viewpoint",n)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){var t;return this.ready?((t=this.constraints)==null?void 0:t.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(t){var n,s;if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const o=this._get("extent");return void(o&&(this._set("extent",void 0),this._set("center",o.center)))}const r=((n=this.constraints)==null?void 0:n.zoomToScale(t))??0;if(!r)return void this._set("zoom",-1);const i=this.viewpoint;xF(i,i,r),this.viewpoint=i,this._set("zoom",((s=this.constraints)==null?void 0:s.scaleToZoom(this.scale))??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:r,constraints:i}=this,n=this._get("center"),s=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),u=this._get("viewpoint"),d=this._get("zoom"),h=d!=null&&i!=null&&i.zoomToScale(d)||void 0;let f,m,y;const g=u==null?void 0:u.rotation,v=u==null?void 0:u.targetGeometry;(v==null?void 0:v.type)==="extent"?f=v:(v==null?void 0:v.type)==="point"&&(m=v,y=u==null?void 0:u.scale);const _=s??f;return{center:n??m??(_==null?void 0:_.center),rotation:a??g,scale:(o??h??y??(_&&$$(_,[t[0]-r.left-r.right,t[1]-r.top-r.bottom])))||void 0}}startup(t,r,i,n){var o;const s=t.targetGeometry;try{this._project(t,i)}catch(a){j.getLogger(this).warn(new wn("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:s.toJSON(),spatialReference:i,error:a})),t.targetGeometry=n||new ge({x:0,y:0,spatialReference:i})}(o=this.constraints)==null||o.fit(t),this._set("state",new Uk({padding:this.padding,size:r,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,r],spatialReference:i,rotation:n,scale:s}=this.state.paddedViewState,o=new ge({x:t,y:r,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",n),this._set("scale",s),this._set("state",null)}changeSpatialReference(t){var u;const r=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=r.scale;else{const d=r.viewpoint.clone();d.scale=this._scaleBeforeChangingSpatialReference,r.viewpoint=d}const i=r.clone(),[n,s]=r.center;let o=null;try{o=this._project(new ge({x:n,y:s,spatialReference:r.spatialReference}),t)}catch(d){vO()||j.getLogger(this).warn(new wn("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:t,error:d}))}o||(o=new ge({x:0,y:0,spatialReference:t}));const a=G3(new dr({targetGeometry:new ge,scale:0,rotation:0}),r.viewpoint,o);i.viewpoint=a;try{const h=[r.size[0]/2,r.size[1]/2],f=[h[0]+20,h[1]],m=r.toMap([0,0],f),{x:y,y:g}=this._project(new ge({x:m[0],y:m[1],spatialReference:r.spatialReference}),t);m[0]=y,m[1]=g,i.toScreen(m,m);const v=W1e(h,m,f),_=Math.hypot(m[0]-h[0],m[1]-h[1])/20;!Number.isFinite(_)||Math.abs(_)>4?(a.rotation=0,a.targetGeometry=new ge({x:0,y:0,spatialReference:t})):(a.scale*=_,a.scale>L("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(v)?v:0)}catch{}(u=this._get("constraints"))==null||u.constrain(a,void 0),this._get("state").viewpoint=a}resize(t,r){var o;if(!this.ready)return;const i=this.state;let n=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.slice();i.size=[t,r],J1e(n,n,s,this.state.paddedViewState.size,this.resizeAlign),n=((o=this.constraints)==null?void 0:o.constrain(n,void 0))??n,this.state.viewpoint=n}toMap(t){if(!this.ready)return null;const r=[0,0],[i,n]=this.state.toMap(r,[t.x,t.y]),s=this.state.spatialReference;return new ge({x:i,y:n,spatialReference:s})}toScreen(t,r){if(!this.ready)return null;const i=this._project(t,this.state.spatialReference),n=[i.x,i.y];return(r==null?void 0:r.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(n,n),this.state.toScreen(n,n),Ir(n[0],n[1])}_project(t,r){var s;const i=(t==null?void 0:t.targetGeometry)||t;if(!r)return t;if(!i)return null;if(r.imageCoordinateSystem||(s=i.spatialReference)!=null&&s.imageCoordinateSystem||Ht(r,i.spatialReference))return t;const n=cc(i,r);if(!n)throw new R("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:r});return z_e(t)?(t.targetGeometry=n,t):n}};function z_e(e){return(e==null?void 0:e.declaredClass)==="esri.Viewpoint"}l([c({type:ge})],ei.prototype,"center",null),l([c()],ei.prototype,"constraints",void 0),l([c({type:qe})],ei.prototype,"extent",null),l([c({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],ei.prototype,"padding",null),l([c()],ei.prototype,"ready",void 0),l([c()],ei.prototype,"resizeAlign",void 0),l([c({readOnly:!0})],ei.prototype,"resolution",null),l([c({type:Number})],ei.prototype,"rotation",null),l([c({type:Number})],ei.prototype,"scale",null),l([c({readOnly:!0})],ei.prototype,"state",void 0),l([c({type:dr})],ei.prototype,"viewpoint",null),l([c({readOnly:!0})],ei.prototype,"visibleArea",null),l([c()],ei.prototype,"zoom",null),ei=l([$("esri.views.2d.ViewStateManager")],ei);function zk(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}let VF=class extends yr{constructor(t,r){super(!0),this._view=t,this.registerIncoming("double-click",r,i=>this._handleDoubleClick(i,r))}_handleDoubleClick(t,r){zk(t.data,"primary")&&(t.stopPropagation(),r?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},G_e=class extends yr{constructor(t,r,i){super(!0),this.view=t,this.pointerType=r,this.registerIncoming("double-tap-drag",i,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(t){const{data:r}=t,{pointerType:i}=r;if(i!==this.pointerType)return;t.stopPropagation();const{action:n,delta:s}=r,{view:o}=this,{mapViewNavigation:a}=o;switch(n){case"begin":{const{scale:u}=o;this._startScale=u,this._currentScale=u,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const u=1.015**s.y,d=this._startScale*u,h=d/this._currentScale;a.setViewpointImmediate(h),this._currentScale=d;break}case"end":{const{constraints:u}=o,{effectiveLODs:d,snapToZoom:h}=u;if(!h||!d)return void a.end();const f=u.snapScale(this._currentScale),m=(s.y>0?Math.max(f,u.snapToPreviousScale(this._startScale)):Math.min(f,u.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(m).then(()=>{a.end()});break}}}},x$=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const r=t.data,i=r.pointers.size;switch(r.action){case"start":this._currentCount=i,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){var r,i;this._startEvent=t,(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){var r,i;(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){var r,i;(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}},B_e=class extends yr{constructor(t,r,i){super(!0),this.view=t,this.pointerAction=r,this.registerIncoming("drag",i,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new x$({start:(r,i)=>{this.view.mapViewNavigation.pan.begin(this.view,i.data),i.stopPropagation()},update:(r,i)=>{this.view.mapViewNavigation.pan.update(this.view,i.data),i.stopPropagation()},end:(r,i)=>{this.view.mapViewNavigation.pan.end(this.view,i.data),i.stopPropagation()},condition:(r,i)=>r===1&&zk(i.data,this.pointerAction)})}_handleDrag(t){const r=this.view.mapViewNavigation;r.pinch.zoomMomentum||r.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},q_e=class extends yr{constructor(t,r,i){super(!0),this._view=t,this.pointerAction=r;const n=this._view.mapViewNavigation;this._dragEventSeparator=new x$({start:(s,o)=>{n.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{n.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{n.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&zk(o.data,this.pointerAction)}),this.registerIncoming("drag",i,s=>this._dragEventSeparator.handle(s))}};function IZ(e){const t=e[0],r=e[1],i=e[2];return Math.sqrt(t*t+r*r+i*i)}function H_e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function W_e(e,t,r,i){return e[0]=t,e[1]=r,e[2]=i,e}function Z_e(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function CZ(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function AZ(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function RZ(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function J_e(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function K_e(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function Y_e(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function Q_e(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function X_e(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function ebe(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function tbe(e,t=0,r=1){return e[0]=Math.min(Math.max(e[0],t),r),e[1]=Math.min(Math.max(e[1],t),r),e[2]=Math.min(Math.max(e[2],t),r),e}function rbe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function OZ(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function ibe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e}function kZ(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(r*r+i*i+n*n)}function PZ(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return r*r+i*i+n*n}function NZ(e){const t=e[0],r=e[1],i=e[2];return t*t+r*r+i*i}function nbe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function sbe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function Y3(e,t){const r=t[0],i=t[1],n=t[2];let s=r*r+i*i+n*n;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}function LZ(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function obe(e,t,r){const i=t[0],n=t[1],s=t[2],o=r[0],a=r[1],u=r[2];return e[0]=n*u-s*a,e[1]=s*o-i*u,e[2]=i*a-n*o,e}function abe(e,t,r){const i=t[0],n=t[1],s=t[2],o=r[0],a=r[1],u=r[2],d=n*u-s*a,h=s*o-i*u,f=i*a-n*o,m=Math.sqrt(d*d+h*h+f*f);return e[0]=d/m,e[1]=h/m,e[2]=f/m,e}function lbe(e,t,r,i){const n=t[0],s=t[1],o=t[2];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e[2]=o+i*(r[2]-o),e}function ube(e,t,r,i,n,s){const o=s*s,a=o*(2*s-3)+1,u=o*(s-2)+s,d=o*(s-1),h=o*(3-2*s);return e[0]=t[0]*a+r[0]*u+i[0]*d+n[0]*h,e[1]=t[1]*a+r[1]*u+i[1]*d+n[1]*h,e[2]=t[2]*a+r[2]*u+i[2]*d+n[2]*h,e}function cbe(e,t,r,i,n,s){const o=1-s,a=o*o,u=s*s,d=a*o,h=3*s*a,f=3*u*o,m=u*s;return e[0]=t[0]*d+r[0]*h+i[0]*f+n[0]*m,e[1]=t[1]*d+r[1]*h+i[1]*f+n[1]*m,e[2]=t[2]*d+r[2]*h+i[2]*f+n[2]*m,e}function dbe(e,t=1){const r=o$,i=2*r()*Math.PI,n=2*r()-1,s=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(i)*s,e[1]=Math.sin(i)*s,e[2]=n*t,e}function pbe(e,t,r){const i=t[0],n=t[1],s=t[2];return e[0]=r[0]*i+r[4]*n+r[8]*s+r[12],e[1]=r[1]*i+r[5]*n+r[9]*s+r[13],e[2]=r[2]*i+r[6]*n+r[10]*s+r[14],e}function hbe(e,t,r){const i=t[0],n=t[1],s=t[2];return e[0]=i*r[0]+n*r[3]+s*r[6],e[1]=i*r[1]+n*r[4]+s*r[7],e[2]=i*r[2]+n*r[5]+s*r[8],e}function fbe(e,t,r){const i=r[0],n=r[1],s=r[2],o=r[3],a=t[0],u=t[1],d=t[2],h=n*d-s*u,f=s*a-i*d,m=i*u-n*a,y=n*m-s*f,g=s*h-i*m,v=i*f-n*h,_=2*o;return e[0]=a+h*_+2*y,e[1]=u+f*_+2*g,e[2]=d+m*_+2*v,e}function mbe(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[0],s[1]=n[1]*Math.cos(i)-n[2]*Math.sin(i),s[2]=n[1]*Math.sin(i)+n[2]*Math.cos(i),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function ybe(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[2]*Math.sin(i)+n[0]*Math.cos(i),s[1]=n[1],s[2]=n[2]*Math.cos(i)-n[0]*Math.sin(i),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function gbe(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[0]*Math.cos(i)-n[1]*Math.sin(i),s[1]=n[0]*Math.sin(i)+n[1]*Math.cos(i),s[2]=n[2],e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function vbe(e,t){Y3(UF,e),Y3(zF,t);const r=LZ(UF,zF);return r>1?0:r<-1?Math.PI:Math.acos(r)}const UF=uc(),zF=uc();function wbe(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function _be(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function bbe(e,t){if(e===t)return!0;const r=e[0],i=e[1],n=e[2],s=t[0],o=t[1],a=t[2],u=Si();return Math.abs(r-s)<=u*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-o)<=u*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(n-a)<=u*Math.max(1,Math.abs(n),Math.abs(a))}function Sbe(e,t,r){const i=r[0]-t[0],n=r[1]-t[1],s=r[2]-t[2];let o=i*i+n*n+s*s;return o>0?(o=1/Math.sqrt(o),e[0]=i*o,e[1]=n*o,e[2]=s*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const $be=CZ,Tbe=AZ,xbe=RZ,Ebe=kZ,Mbe=PZ,Ibe=IZ,Cbe=NZ;Object.freeze(Object.defineProperty({__proto__:null,abs:Y_e,add:Z_e,angle:vbe,bezier:cbe,ceil:J_e,clamp:tbe,copy:H_e,cross:obe,crossAndNormalize:abe,direction:Sbe,dist:Ebe,distance:kZ,div:xbe,divide:RZ,dot:LZ,equals:bbe,exactEquals:_be,floor:K_e,hermite:ube,inverse:sbe,len:Ibe,length:IZ,lerp:lbe,max:ebe,min:X_e,mul:Tbe,multiply:AZ,negate:nbe,normalize:Y3,random:dbe,rotateX:mbe,rotateY:ybe,rotateZ:gbe,round:rbe,scale:OZ,scaleAndAdd:ibe,set:W_e,sign:Q_e,sqrDist:Mbe,sqrLen:Cbe,squaredDistance:PZ,squaredLength:NZ,str:wbe,sub:$be,subtract:CZ,transformMat3:hbe,transformMat4:pbe,transformQuat:fbe},Symbol.toStringTag,{value:"Module"}));function ws(e){let t=e*e;return e<0&&(t*=-1),t}function Abe(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function Rbe(e,t,r){const i=r,n=e.state,s=e.device,o=t.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(i.translation[0]=ws(n.axes[0]),i.translation[1]=ws(n.axes[1]),i.translation[2]=ws(n.buttons[7])-ws(n.buttons[6]),i.heading=ws(n.axes[2]),i.tilt=ws(n.axes[3])):s.deviceType==="spacemouse"&&(i.translation[0]=1.2*ws(n.axes[0]),i.translation[1]=1.2*ws(n.axes[1]),i.translation[2]=2*-ws(n.axes[2]),i.heading=1.2*ws(n.axes[5]),i.tilt=1.2*ws(n.axes[3])),i.tilt*=o,OZ(i.translation,i.translation,a),i}function Obe(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}let kbe=class extends yr{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new _m,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",r=>this._handleGamePadEvent(r)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([ce(()=>{var r;return(r=this._view.navigation.gamepad)==null?void 0:r.enabled},r=>{r?(this._handle.resume(),this._frameTask||(this._frameTask=Qf({update:i=>this._frameUpdate(i.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},zt)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const r=this._view.navigation.gamepad.device;r&&t.data.device!==r||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,Abe(this._transformation)):(this._currentDevice=t.data.device,Rbe(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){const r=this._transformation;if(Obe(r))return;const i=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,s=Nbe*n*t;T$(i,i,[r.translation[0]*s,-r.translation[1]*s]);const o=1+r.translation[2]*Lbe*t,a=this._view.constraints.rotationEnabled?-r.heading*Pbe*t:0,u=this._view.size,d=[u[0]/2,u[1]];nZ(i,i,o,a,d,u);const h=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=h}};const Pbe=.06,Nbe=.7,Lbe=6e-4;function FZ(e){const t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),Be(()=>document.removeEventListener("visibilitychange",t))}let Fbe=class extends yr{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=n=>{const s=this._keyMap[n.data.key];if(n.modifiers.has("Meta")||n.modifiers.has("Control"))return void this._stopMovement();if(s==null)return;n.stopPropagation(),n.preventDefault();const o=n.type==="key-down";if(this._pressedKeys[o?"add":"delete"](s),o){if(this._direction===s)return;this._direction=s,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const a=this._timeout===void 0,u=this._pressedKeys.size>0;a||u?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[r.left]:"left",[r.right]:"right",[r.up]:"up",[r.down]:"down"},this.registerIncoming("key-down",i,this._handleKey),this.registerIncoming("key-up",i,this._handleKey),this.registerIncoming("blur",i,this._stopMovement),this._visibilityHandle=FZ(n=>n?null:this._stopMovement())}onUninstall(){var t;this._stopMovement(),(t=this._visibilityHandle)==null||t.remove()}get _direction(){return this._currentDirection}set _direction(t){const r=this._currentDirection!=null;if(t!=null){if(r||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else r&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}},Dbe=class extends yr{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._pressed=!1,this._keyToDirection={[r.clockwiseOption1]:"clockwise",[r.clockwiseOption2]:"clockwise",[r.counterClockwiseOption1]:"counterClockwise",[r.counterClockwiseOption2]:"counterClockwise",[r.resetOption1]:"reset",[r.resetOption2]:"reset"},this.registerIncoming("key-down",i,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",i,n=>this._handleKeyUp(n)),this.registerIncoming("blur",i,()=>this._handleStop()),this._visibilityHandle=FZ(n=>n?null:this._handleStop())}onUninstall(){var t;(t=this._visibilityHandle)==null||t.remove(),this._handleStop()}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,r){const i=t.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection[t.data.key];if(this._pressed=n!=null,this._pressed){if(t.preventDefault(),r)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var ff;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(ff||(ff={}));let jbe=class extends yr{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._keysToZoomAction={},this.registerIncoming("key-down",i,n=>this._handleKeyDown(n)),r.zoomIn.forEach(n=>this._keysToZoomAction[n]=ff.IN),r.zoomOut.forEach(n=>this._keysToZoomAction[n]=ff.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const r=t.modifiers;if(r.size>0&&!r.has("Shift"))return;const{key:i}=t.data;if(!(i in this._keysToZoomAction))return;const n=this._keysToZoomAction[i],{mapViewNavigation:s}=this.view;let o=null;switch(n){case ff.IN:o=s.zoomIn();break;case ff.OUT:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),t.stopPropagation()}};const Vbe=.6;let Ube=class extends yr{constructor(t,r){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",r,i=>this._handleMouseWheel(i))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const r=this._view.mapViewNavigation,{x:i,y:n,deltaY:s}=t.data,o=1/Vbe**(1/60*s),a=r.zoom(o,[i,n]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,r.end()}))}},zbe=class extends yr{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const r=this.view.mapViewNavigation;this._dragEventSeparator=new x$({start:(i,n)=>{r.pinch.begin(this.view,n.data),n.stopPropagation()},update:(i,n)=>{r.pinch.update(this.view,n.data),n.stopPropagation()},end:(i,n)=>{r.pinch.end(this.view),n.stopPropagation()},condition:i=>i>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function GF(e){const t=e.native;return t?{buttons:t.buttons.map(r=>r.pressed?r.value||1:0),axes:t.axes.map(r=>qbe(r,e.axisThreshold))}:{buttons:[],axes:[]}}function Gbe(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let r=0;r<e.axes.length;r++)if(e.axes[r]!==t.axes[r])return!1;for(let r=0;r<e.buttons.length;r++)if(e.buttons[r]!==t.buttons[r])return!1;return!0}function Bbe(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function qbe(e,t){const r=Math.abs(e);return r<t?0:Math.sign(e)*(r-t)/(1-t)}let Hbe=class{constructor(t,r){this._element=t,this._input=r,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,u=this._inputDevices[a];u&&(this._emitGamepadEvent(o,GF(u),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(u),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const i="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=i&&n,this.supported&&(BF(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const r=new Ck(t);r.deviceType!=="unknown"&&(this._inputDevices[t.index]=r,this._input.gamepad.devices.add(r)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=Qf({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),r=this._element.contains(document.activeElement),i=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!r;BF(n=>{const s=this._inputDevices[n.index];if(!s)return;const o=this._latestUpdate[n.index],a=GF(s),u=i||Bbe(a);o&&(o.timestamp===n.timestamp||!o.active&&u||Gbe(o.state,a))||this._emitGamepadEvent(n,a,!u)})}_emitGamepadEvent(t,r,i){const n=this._latestUpdate[t.index],s=n&&n.active;if(!s&&!i)return;const o=!s&&i?"start":s&&i?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:r,active:i},this._callback&&this._callback({device:this._inputDevices[t.index],state:r,action:o})}};function Wbe(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function BF(e){for(const t of navigator.getGamepads())Wbe(t)&&e(t)}const qF=L("edge"),Zbe=L("chrome"),Jbe=L("ff"),Kbe=L("safari"),HF="esri-view-surface",jp={touchNone:`${HF}--touch-none`,touchPan:`${HF}--touch-pan`};let DZ=class jZ{constructor(t,r){this._input=r,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Hbe(t,this._input),this._gamepadSource.onEvent=i=>this._callback("gamepad",i)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource=st(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const r in this._active)if(!t||!t.has(r)){const i=this._active[r];this._element.removeEventListener(hx[r],i),delete this._active[r]}t&&t.forEach(r=>{if(!this._active[r]&&hx[r]){const i=(this._eventHandlers[r]||this._handleDefault).bind(this,r);this._element.addEventListener(hx[r],i),this._active[r]=i}}),this._gamepadSource.hasEventListeners=(t==null?void 0:t.has("gamepad"))??!1}setPointerCapture(t,r){r?this._setPointerCatpureSafe(t.pointerId):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?jp.touchNone:jp.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?jp.touchPan:jp.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(jp.touchNone),this._element.classList.remove(jp.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(t){try{this._element.setPointerCapture(t),this._activePointerCaptures.add(t)}catch{}}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,r){const i=wW(this._element,t);return jZ.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),r.x=i.x,r.y=i.y,r}_handleKey(t,r){const{key:i}=r;i&&t==="key-up"&&this._keyDownState.delete(i);const n={native:r,key:i,repeat:!!i&&this._keyDownState.has(i)};i&&t==="key-down"&&this._keyDownState.add(n.key),this._callback(t,n)}_handlePointer(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});this._callback(t,i)}_handlePointerPreventDefault(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});r.preventDefault(),this._callback(t,i)}_getDeltaFromTrackpadOrMouseWheel(t){return t.shiftKey&&L("mac")&&t.deltaY===0?t.deltaX:t.deltaY}_handleMouseWheel(t,r){let i=this._getDeltaFromTrackpadOrMouseWheel(r);switch(r.deltaMode){case 0:qF&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}qF?i*=.7:Zbe||Kbe?i*=.6:Jbe&&(i*=1.375);const n=100,s=Math.abs(i);s>n&&(i=i/s*200/(1+Math.exp(-.02*(s-n))));const o=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,deltaY:i});this._callback(t,o)}_handlePointerCaptureLost(t,r){this._activePointerCaptures.delete(r.pointerId),this._handleDefault(t,r)}_handleDefault(t,r){const i={native:r};r.preventDefault(),this._callback(t,i)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}};DZ.test={disableSubpixelCoordinates:!1};const hx={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let Ybe=class extends yr{constructor(){super(!0),this.registerIncoming("context-menu",t=>t.data.native.preventDefault())}};const Vr={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function HS(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function Qbe(e,t){const r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)}function Xbe(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Ir()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[T,x]=e,[M,I]=[x.x-T.x,x.y-T.y];return t.radius=Math.sqrt(M*M+I*I)/2,t.center.x=(T.x+x.x)/2,t.center.y=(T.y+x.y)/2,t}let r=0,i=0;for(let T=0;T<e.length;T++)r+=e[T].x,i+=e[T].y;r/=e.length,i/=e.length;const n=e.map(T=>T.x-r),s=e.map(T=>T.y-i);let o=0,a=0,u=0,d=0,h=0,f=0,m=0;for(let T=0;T<n.length;T++){const x=n[T],M=s[T],I=x*x,O=M*M;o+=I,a+=O,u+=x*M,d+=I*x,h+=O*M,f+=x*O,m+=M*I}const y=.5*(d+f),g=.5*(h+m),v=o*a-u*u,_=(y*a-g*u)/v,w=(o*g-u*y)/v,b=Ir(_+r,w+i);return{radius:Math.sqrt(_*_+w*w+(o+a)/e.length),center:b}}function Hd(e){const{native:t}=e,{pointerId:r,button:i,pointerType:n}=t;return n==="mouse"?`${r}:${i}`:`${n}`}let eSe=class extends yr{constructor(t=Vr.maximumDoubleClickDelay,r=Vr.maximumDoubleClickDistance,i=Vr.maximumDoubleTouchDelay,n=Vr.maximumDoubleTouchDistance,s=bm){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=n,this._clock=s,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Ir(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new x$({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=wt(t.doubleTapTimeout)})}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(t){const r=this._pointerState.get(t);r&&(r.doubleTapTimeout=wt(r.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,r){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:n}=r,{center:s}=i;this._dragStartCenter=s;const o=fx("begin",Ir(0,0),i);this._doubleTapDrag.emit(o,void 0,n),r.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:n}=r,s=fx("update",Ir(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(s,void 0,i),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:n}=r,s=fx("end",Ir(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(s,void 0,i),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:r}=t,i=Hd(r),n=this._pointerState.get(i),{pointerType:s}=r.native;if(n){const o=s==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(i),HS(n.event.data,r)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:r}=t,{pointerType:i}=r.native,n=Hd(r),s=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(n),s);this._pointerState.set(n,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function fx(e,t,r){const{button:i,buttons:n,pointer:s,pointers:o,pointerType:a,timestamp:u}=r;return{action:e,delta:t,button:i,buttons:n,pointer:s,pointers:o,pointerType:a,timestamp:u}}let tSe=class extends yr{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,r,i,n){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:r.buttons,timestamp:n,pointers:rSe(this._activePointerMap),pointer:r,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(t){const r=t.native.pointerId,i=J1(this._activePointerMap).angle,n={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(r,n);const s=L_(n,VZ(this._activePointerMap));n.initialAngle=s,n.lastAngle=s,this._updatePointerAngles(i)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const r=t.native.pointerId,i=this._activePointerMap.get(r);i?i.event=t:this._addPointer(t)}_removePointer(t){const r=J1(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(r)}_updatePointerAngles(t){const r=J1(this._activePointerMap);this._activePointerMap.forEach(i=>{i.initialAngle=L_(i,r)-t,i.lastAngle=L_(i,r)-t})}_emitEvent(t,r,i){const n=J1(this._activePointerMap);this._drag.emit(this._createPayload(t,r,n,i),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const r=t.data.native.pointerId,i=t.timestamp;this._activePointerMap.get(r)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,i),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(r)):(this._removePointer(r),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const r=t.data,i=r.currentEvent,n=t.timestamp;switch(r.action){case"start":case"update":this._isDragging?this._activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this._isCurrentDragSuppressed&&this._emitEvent("update",i,n)):(this._addPointer(i),this._emitEvent("added",i,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(i),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",i,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function VZ(e){const t=[];return e.forEach(r=>{t.push(Ir(r.event.x,r.event.y))}),Xbe(t)}function J1(e){const t=VZ(e);let r=0;return e.forEach(i=>{let n=L_(i,t),s=n-i.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=i.lastAngle+s,i.lastAngle=n;const o=n-i.initialAngle;r+=o}),r/=e.size||1,{angle:r,radius:t.radius,center:t.center}}function rSe(e){const t=new Map;return e.forEach((r,i)=>t.set(i,r.event)),t}function L_(e,t){const r=e.event,i=r.x-t.center.x,n=r.y-t.center.y;return Math.atan2(n,i)}var WF;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(WF||(WF={}));let iSe=class extends yr{constructor(t=Vr.maximumDoubleClickDelay,r=Vr.maximumDoubleClickDistance,i=Vr.maximumDoubleTouchDelay,n=Vr.maximumDoubleTouchDistance,s=bm){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=Hd(r);if(!this._pointerState.has(i)){const n={downButton:r.native.button,x:r.x,y:r.y,immediateDoubleClick:null};this._pointerState.set(i,n),this.startCapturingPointer(r.native)}}_handlePointerUp(t){const r=t.data,i=Hd(r),n=this._pointerState.get(i);if(n&&n.downButton===r.native.button){const s=n.immediateDoubleClick,o=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;s?(s.timeoutHandle.remove(),HS(s,t.data)>o?this._startImmediateDoubleClick(t,n):(this._immediateDoubleClick.emit(t.data,void 0,s.modifiers),this._removeState(r))):HS(n,t.data)>o?this._removeState(r):this._startImmediateDoubleClick(t,n)}}_startImmediateDoubleClick(t,r){const i=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;r.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),i)}}_removeState(t){const r=Hd(t);this._pointerState.delete(r),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}},nSe=class extends yr{constructor(t=Vr.maximumClickDelay,r=Vr.movementUntilMouseDrag,i=Vr.movementUntilPenDrag,n=Vr.movementUntilTouchDrag,s=Vr.holdDelay,o=bm){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=r,this._movementUntilPenDrag=i,this._movementUntilTouchDrag=n,this._holdDelay=s,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",a=>this._handlePointerDown(a)),this.registerIncoming("pointer-up",a=>this._handlePointerLoss(a,"pointer-up")),this.registerIncoming("pointer-capture-lost",a=>this._handlePointerLoss(a,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",a=>this._handlePointerLoss(a,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",a=>this._handlePointerMove(a)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=wt(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=r.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const o=this._pointerState.get(i);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const s={startEvent:r,previousEvent:r,startTimestamp:t.timestamp,isDragging:!1,downButton:r.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(i,s),this.startCapturingPointer(r.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){const r=t.data,i=r.native.pointerId,n=this._pointerState.get(i);n&&(n.isDragging?this._pointerDrag.emit(K1("update",n,r),void 0,n.modifiers):Qbe(r,n.startEvent)>this._getDragThreshold(r.native.pointerType)&&this._startDragging(t),n.previousEvent=r)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const r=t.data,i=r.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=t.modifiers,n.isDragging=!0,i===n.startEvent.native.pointerId?this._pointerDrag.emit(K1("start",n,r)):this._pointerDrag.emit(K1("start",n,n.previousEvent),t.timestamp))})}_handlePointerLoss(t,r){const i=t.data,n=i.native.pointerId,s=this._pointerState.get(n);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(K1("end",s,r==="pointer-up"?i:s.previousEvent),void 0,s.modifiers):r==="pointer-up"&&s.downButton===i.native.button&&t.timestamp-s.startTimestamp<=this._maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(n),this.stopCapturingPointer(i.native),this._pointerState.size===0&&this._moveHandle.pause())}};function K1(e,t,r){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:r}}let sSe=class extends yr{constructor(t=Vr.maximumDoubleClickDelay,r=Vr.maximumDoubleClickDistance,i=Vr.maximumDoubleTouchDelay,n=Vr.maximumDoubleTouchDistance,s=bm){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",o=>this._handleImmediateClick(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=wt(t.doubleClickTimer))}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(t,r){const i=this._pointerState.get(t);i&&(i.doubleClickTimer=wt(i.doubleClickTimer),r&&this._click.emit(i.event.data,void 0,i.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const r=this._pointerState.get(t);r.pointerDownCount===1&&this._click.emit(r.event.data,void 0,r.event.modifiers),r.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_handleImmediateClick(t){const r=t.data,{pointerType:i}=r.native,n=oSe(r);if(!this._pointerState.has(n))return void this._startClick(t);const s=this._pointerState.get(n),{data:o,modifiers:a}=s.event,u=i==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;HS(o,r)>u?(this._clearDoubleClickTimer(n,!0),this._startClick(t)):(this._clearDoubleClickTimer(n,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(t){const r=Hd(t.data),i=this._pointerState.get(r);i&&(i.pointerDownCount+=1)}_startClick(t){const{data:r}=t,{native:{pointerType:i}}=r,n=Hd(r),s=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),s);this._pointerState.set(n,{event:t,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function oSe(e){const{pointerId:t,pointerType:r,button:i}=e.native;return r==="mouse"?`${t}:${i}`:`${r}`}const Y1={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let nd=class extends te{initialize(){const t=()=>{var r;return(r=this.view)==null?void 0:r.ready};this.addHandles([as(()=>!t(),()=>this._disconnect()),as(t,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerType}get latestPointerLocation(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerLocation}get multiTouchActive(){var t;return((t=this._inputManager)==null?void 0:t.multiTouchActive)??!1}isModifierKeyDown(t){var r;return((r=this._inputManager)==null?void 0:r.isModifierKeyDown(t))??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=st(this._inputManager)}_connect(){const t=this.view.surface,r=new DZ(t,this.view.input),i=[new iSe,new nSe,new sSe,new tSe(this.view.navigation),new eSe],n=new Cn({eventSource:r,recognizers:i});n.installHandlers("prevent-context-menu",[new Ybe],Hu.INTERNAL),n.installHandlers("navigation",[new zbe(this.view),new kbe(this.view),new Ube(this.view),new VF(this.view),new VF(this.view,[Y1.counter]),new B_e(this.view,"primary"),new Fbe(this.view,Y1.pan),new jbe(this.view,Y1.zoom),new Dbe(this.view,Y1.rotate),new q_e(this.view,"secondary"),new G_e(this.view,"touch")],Hu.INTERNAL),this.view.viewEvents.connect(n),this._source=r,this._inputManager=n,ce(()=>{var s,o;return(o=(s=this.view)==null?void 0:s.navigation)==null?void 0:o.browserTouchPanEnabled},s=>{this._source&&(this._source.browserTouchPanningEnabled=!s)},zt)}get test(){}};l([c()],nd.prototype,"view",void 0),l([c()],nd.prototype,"latestPointerType",null),l([c()],nd.prototype,"latestPointerLocation",null),l([c()],nd.prototype,"multiTouchActive",null),nd=l([$("esri.views.2d.input.MapViewInputManager")],nd);const aSe=nd;function lSe(e,t,r,i,n){UZ(e,t,r||0,i||e.length-1,n||uSe)}function UZ(e,t,r,i,n){for(;i>r;){if(i-r>600){var s=i-r+1,o=t-r+1,a=Math.log(s),u=.5*Math.exp(2*a/3),d=.5*Math.sqrt(a*u*(s-u)/s)*(o-s/2<0?-1:1);UZ(e,t,Math.max(r,Math.floor(t-o*u/s+d)),Math.min(i,Math.floor(t+(s-o)*u/s+d)),n)}var h=e[t],f=r,m=i;for(fy(e,r,t),n(e[i],h)>0&&fy(e,r,i);f<m;){for(fy(e,f,m),f++,m--;n(e[f],h)<0;)f++;for(;n(e[m],h)>0;)m--}n(e[r],h)===0?fy(e,r,m):fy(e,++m,i),m<=t&&(r=m+1),t<=m&&(i=m-1)}}function fy(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function uSe(e,t){return e<t?-1:e>t?1:0}function WS(e,t){if(!(this instanceof WS))return new WS(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function cSe(e,t,r){if(!r)return t.indexOf(e);for(var i=0;i<t.length;i++)if(r(e,t[i]))return i;return-1}function Vp(e,t){dg(e,0,e.children.length,t,e)}function dg(e,t,r,i,n){n||(n=ph(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,o=t;o<r;o++)s=e.children[o],pg(n,e.leaf?i(s):s);return n}function pg(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function ZF(e,t){return e.minX-t.minX}function JF(e,t){return e.minY-t.minY}function mx(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Q1(e){return e.maxX-e.minX+(e.maxY-e.minY)}function dSe(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function pSe(e,t){var r=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),n=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,n-r)*Math.max(0,s-i)}function yx(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function X1(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function ph(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function KF(e,t,r,i,n){for(var s,o=[t,r];o.length;)(r=o.pop())-(t=o.pop())<=i||(s=t+Math.ceil((r-t)/i/2)*i,lSe(e,s,t,r,n),o.push(t,s,s,r))}WS.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],i=this.toBBox;if(!X1(e,t))return r;for(var n,s,o,a,u=[];t;){for(n=0,s=t.children.length;n<s;n++)o=t.children[n],X1(e,a=t.leaf?i(o):o)&&(t.leaf?r.push(o):yx(e,a)?this._all(o,r):u.push(o));t=u.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!X1(e,t))return!1;for(var i,n,s,o,a=[];t;){for(i=0,n=t.children.length;i<n;i++)if(s=t.children[i],X1(e,o=t.leaf?r(s):s)){if(t.leaf||yx(e,o))return!0;a.push(s)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var i=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(e){return e!=null&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=ph([]),this},remove:function(e,t){if(e==null)return this;for(var r,i,n,s,o=this.data,a=this.toBBox(e),u=[],d=[];o||u.length;){if(o||(o=u.pop(),i=u[u.length-1],r=d.pop(),s=!0),o.leaf&&(n=cSe(e,o.children,t))!==-1)return o.children.splice(n,1),u.push(o),this._condense(u),this;s||o.leaf||!yx(o,a)?i?(r++,o=i.children[r],s=!1):o=null:(u.push(o),d.push(r),r=0,i=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:ZF,compareMinY:JF,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,i){var n,s=r-t+1,o=this._maxEntries;if(s<=o)return Vp(n=ph(e.slice(t,r+1)),this.toBBox),n;i||(i=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,i-1))),(n=ph([])).leaf=!1,n.height=i;var a,u,d,h,f=Math.ceil(s/o),m=f*Math.ceil(Math.sqrt(o));for(KF(e,t,r,m,this.compareMinX),a=t;a<=r;a+=m)for(KF(e,a,d=Math.min(a+m-1,r),f,this.compareMinY),u=a;u<=d;u+=f)h=Math.min(u+f-1,d),n.children.push(this._build(e,u,h,i-1));return Vp(n,this.toBBox),n},_chooseSubtree:function(e,t,r,i){for(var n,s,o,a,u,d,h,f;i.push(t),!t.leaf&&i.length-1!==r;){for(h=f=1/0,n=0,s=t.children.length;n<s;n++)u=mx(o=t.children[n]),(d=dSe(e,o)-u)<f?(f=d,h=u<h?u:h,a=o):d===f&&u<h&&(h=u,a=o);t=a||t.children[0]}return t},_insert:function(e,t,r){var i=this.toBBox,n=r?e:i(e),s=[],o=this._chooseSubtree(n,this.data,t,s);for(o.children.push(e),pg(o,n);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(n,s,t)},_split:function(e,t){var r=e[t],i=r.children.length,n=this._minEntries;this._chooseSplitAxis(r,n,i);var s=this._chooseSplitIndex(r,n,i),o=ph(r.children.splice(s,r.children.length-s));o.height=r.height,o.leaf=r.leaf,Vp(r,this.toBBox),Vp(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)},_splitRoot:function(e,t){this.data=ph([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Vp(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var i,n,s,o,a,u,d,h;for(u=d=1/0,i=t;i<=r-t;i++)o=pSe(n=dg(e,0,i,this.toBBox),s=dg(e,i,r,this.toBBox)),a=mx(n)+mx(s),o<u?(u=o,h=i,d=a<d?a:d):o===u&&a<d&&(d=a,h=i);return h},_chooseSplitAxis:function(e,t,r){var i=e.leaf?this.compareMinX:ZF,n=e.leaf?this.compareMinY:JF;this._allDistMargin(e,t,r,i)<this._allDistMargin(e,t,r,n)&&e.children.sort(i)},_allDistMargin:function(e,t,r,i){e.children.sort(i);var n,s,o=this.toBBox,a=dg(e,0,t,o),u=dg(e,r-t,r,o),d=Q1(a)+Q1(u);for(n=t;n<r-t;n++)s=e.children[n],pg(a,e.leaf?o(s):s),d+=Q1(a);for(n=r-t-1;n>=t;n--)s=e.children[n],pg(u,e.leaf?o(s):s),d+=Q1(u);return d},_adjustParentBBoxes:function(e,t,r){for(var i=r;i>=0;i--)pg(t[i],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)e[r].children.length===0?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():Vp(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};let YF=class zZ{constructor(t,r){this.key=new nc(0,0,0,0),this.bounds=Ui(),this.objectIds=new Set,this.key.set(r);const i=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.level=i.level,this.scale=i.scale,this.minScale=t.zoomToScale(i.level-1),this.maxScale=t.zoomToScale(i.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return qe.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(t){return{$view:{scale:this.scale,timeZone:t}}}createChildTiles(){const t=this.key.getChildKeys(),r=wi.acquire();for(let i=0;i<t.length;i++)r[i]=new zZ(this.tileInfoView,t[i]);return r}getQuantizationParameters(){return mW.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const xc={added:[],removed:[]},gx=new Set,hSe=new nc(0,0,0,0);function fSe(e,t){const r=bi(t);if(!r)return null;const[i,n]=r.valid;return e[2]>n?[Ui([e[0],e[1],n,e[3]]),Ui([i,e[1],i+e[2]-n,e[3]])]:e[0]<i?[Ui([i,e[1],e[2],e[3]]),Ui([n-(i-e[0]),e[1],n,e[3]])]:null}let mSe=class extends cs{constructor(t){super(),this._tiles=new Map,this._index=WS(9,L("esri-csp-restrictions")?r=>({minX:r.bounds[0],minY:r.bounds[1],maxX:r.bounds[2],maxY:r.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||X7(t)===0||eG(t)===0)return[];const r=fSe(t,this.tileScheme.spatialReference);return r!=null?[...new Set([...this.boundsIntersections(r[0]),...this.boundsIntersections(r[1])])]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const r={added:[],removed:[]};for(const i of t.added)if(!this.has(i)){const n=new YF(this.tileScheme,i);this._tiles.set(i,n),this._index.insert(n),r.added.push(n)}for(const i of t.removed)if(this.has(i)){const n=this.get(i);this._tiles.delete(i),this._index.remove(n),r.removed.push(n)}this.tiles.length=0,this._tiles.forEach(i=>this.tiles.push(i)),(r.added.length||r.removed.length)&&this.emit("update",r)}setViewState(t){const r=this.tileScheme.getTileCoverage(t,0);if(!r)return;const{spans:i,lodInfo:n}=r,{level:s}=n;if(i.length>0)for(const{row:o,colFrom:a,colTo:u}of i)for(let d=a;d<=u;d++){const h=hSe.set(s,o,n.normalizeCol(d),n.getWorldForColumn(d)).id;if(gx.add(h),!this.has(h)){const f=new YF(this.tileScheme,h);this._tiles.set(h,f),this._index.insert(f),this.tiles.push(f),xc.added.push(f)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];gx.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),xc.removed.push(a))}(xc.added.length||xc.removed.length)&&this.emit("update",xc),sv.pool.release(r),gx.clear(),xc.added.length=0,xc.removed.length=0}};const n5e=1e-30,QF=512,ew=16777216,s5e=8,o5e=29,a5e=24,l5e=4,u5e=0,c5e=0,d5e=0,p5e=1,h5e=2,f5e=3,m5e=4,y5e=5,g5e=6,v5e=12,w5e=13,_5e=5,ySe=6,b5e=5,S5e=6;var XF;(function(e){e[e.FilterFlags=0]="FilterFlags",e[e.Animation=1]="Animation",e[e.GPGPU=2]="GPGPU",e[e.VV=3]="VV",e[e.DD0=4]="DD0",e[e.DD1=5]="DD1",e[e.DD2=6]="DD2",e[e.LocalTimeOrigin=7]="LocalTimeOrigin"})(XF||(XF={}));const GZ=6,gSe=1<<GZ,$5e=gSe<<1,T5e=1.05,x5e=3,E5e=1,M5e=3,I5e=3,C5e=5,A5e=6,R5e=1.15,vSe=2,O5e=128,wSe=256,k5e=wSe-2*vSe,P5e=2,N5e=128,L5e=10,F5e=1024,D5e=128,j5e=4,V5e=1,U5e=1<<20,z5e=.75,G5e=10,B5e=.75,q5e=256,H5e=32,W5e=512,Z5e=0,J5e=1,_Se=1,K5e=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],Y5e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],my=256,bSe=new le("cyan"),SSe=1,$Se=.25;new le("black");const TSe="default",xSe="temporary",ESe=new le("yellow");let sd=class extends te{constructor(t){super(t),this.color=bSe.clone(),this.haloOpacity=SSe,this.fillOpacity=$Se}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity}};l([c({type:le})],sd.prototype,"color",void 0),l([c({type:le})],sd.prototype,"haloColor",void 0),l([c()],sd.prototype,"haloOpacity",void 0),l([c()],sd.prototype,"fillOpacity",void 0),sd=l([$("esri.views.support.HighlightOptions")],sd);const MSe=sd;var Q3;let hg=Q3=class extends MSe{constructor(e){super(e),this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(e){return super.equals(e)&&this.haloWidth===e.haloWidth&&this.haloBlur===e.haloBlur}get optionsKey(){return`${this.color};${this.haloColor};${this.haloOpacity};${this.fillOpacity};${this.haloWidth};${this.haloBlur}`}clone(){var e;return new Q3({color:this.color.clone(),haloColor:(e=this.haloColor)==null?void 0:e.clone(),haloOpacity:this.haloOpacity,fillOpacity:this.fillOpacity,haloWidth:this.haloWidth,haloBlur:this.haloBlur})}};l([c()],hg.prototype,"haloWidth",void 0),l([c()],hg.prototype,"haloBlur",void 0),hg=Q3=l([$("esri.views.2d.support.HighlightOptions")],hg);const fp=hg;var eD,tD,rD,iD,X3,nD,sD,Po,eC,d0,ar,ZS,Zn,ut,ie,ov,Ua,oD,aD,lD;(function(e){e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e[e.COLOR=16384]="COLOR"})(eD||(eD={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(tD||(tD={})),function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(rD||(rD={})),function(e){e[e.ADD=32774]="ADD",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.SUBTRACT=32778]="SUBTRACT",e[e.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(iD||(iD={})),function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"}(X3||(X3={})),function(e){e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(nD||(nD={})),function(e){e[e.CW=2304]="CW",e[e.CCW=2305]="CCW"}(sD||(sD={})),function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=5131]="HALF_FLOAT"}(Po||(Po={})),function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"}(eC||(eC={})),function(e){e[e.ZERO=0]="ZERO",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP"}(d0||(d0={})),function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(ar||(ar={})),function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(ZS||(ZS={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(Zn||(Zn={})),function(e){e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.RG=33319]="RG",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER"}(ut||(ut={})),function(e){e[e.RGBA4=32854]="RGBA4",e[e.R16F=33325]="R16F",e[e.RG16F=33327]="RG16F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.R32F=33326]="R32F",e[e.RG32F=33328]="RG32F",e[e.RGBA32F=34836]="RGBA32F",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB5_A1=32855]="RGB5_A1",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.RGB16F=34843]="RGB16F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.RGB565=36194]="RGB565",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2=32857]="RGB10_A2",e[e.RGB10_A2UI=36975]="RGB10_A2UI"}(ie||(ie={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.INT=5124]="INT",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(ov||(ov={})),function(e){e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(Ua||(Ua={})),function(e){e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_READ=35045]="STATIC_READ",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.STREAM_COPY=35042]="STREAM_COPY"}(oD||(oD={})),function(e){e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER"}(aD||(aD={})),function(e){e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(lD||(lD={}));const X5e=33984;var JS,uD,cD;(function(e){e[e.Texture=0]="Texture",e[e.BufferObject=1]="BufferObject",e[e.VertexArrayObject=2]="VertexArrayObject",e[e.Shader=3]="Shader",e[e.Program=4]="Program",e[e.FramebufferObject=5]="FramebufferObject",e[e.Renderbuffer=6]="Renderbuffer",e[e.TransformFeedback=7]="TransformFeedback",e[e.Sync=8]="Sync",e[e.UNCOUNTED=9]="UNCOUNTED",e[e.LinesOfCode=9]="LinesOfCode",e[e.Uniform=10]="Uniform",e[e.COUNT=11]="COUNT"})(JS||(JS={})),function(e){e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(uD||(uD={})),function(e){e[e.NONE=0]="NONE",e[e.BACK=1029]="BACK"}(cD||(cD={}));const eFe=33306;var Fr,dD,pD,hD,fD,mD,yD;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(Fr||(Fr={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT=5124]="INT",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(dD||(dD={})),function(e){e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS"}(pD||(pD={})),function(e){e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED"}(hD||(hD={})),function(e){e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED"}(fD||(fD={})),function(e){e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(mD||(mD={})),function(e){e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(yD||(yD={}));const ISe=()=>j.getLogger("esri.views.webgl.checkWebGLError");function CSe(e,t){switch(t){case e.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case e.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case e.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case e.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case e.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case e.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const BZ=!!L("enable-feature:webgl-debug");function qZ(){return BZ}function tFe(){return BZ}function Up(e){if(qZ()){const t=e.getError();if(t){const r=CSe(e,t),i=new Error().stack;ISe().error(new R("webgl-error","WebGL error occurred",{message:r,stack:i}))}}}var tC;(function(e){e[e.Texture=0]="Texture",e[e.RenderBuffer=1]="RenderBuffer"})(tC||(tC={}));function ASe(e){switch(e){case Po.BYTE:case Po.UNSIGNED_BYTE:return 1;case Po.SHORT:case Po.UNSIGNED_SHORT:case Po.HALF_FLOAT:return 2;case Po.FLOAT:case Po.INT:case Po.UNSIGNED_INT:return 4}}function RSe(e){const t=e.gl;switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case t.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case t.INVALID_OPERATION:return"The specified command is not allowed for the current state";case t.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case t.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case t.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function rFe(e,t,r,i,n=0){var o;const s=e.gl;e.bindBuffer(r);for(const a of i){const u=t.get(a.name);if(u==null){console.warn(`There is no location for vertex attribute '${a.name}' defined.`);continue}const d=n*a.stride;if(a.count<=4)s.vertexAttribPointer(u,a.count,a.type,a.normalized,a.stride,a.offset+d),s.enableVertexAttribArray(u),a.divisor>0&&e.gl.vertexAttribDivisor(u,a.divisor);else if(a.count===9)for(let h=0;h<3;h++)s.vertexAttribPointer(u+h,3,a.type,a.normalized,a.stride,a.offset+12*h+d),s.enableVertexAttribArray(u+h),a.divisor>0&&e.gl.vertexAttribDivisor(u+h,a.divisor);else if(a.count===16)for(let h=0;h<4;h++)s.vertexAttribPointer(u+h,4,a.type,a.normalized,a.stride,a.offset+16*h+d),s.enableVertexAttribArray(u+h),a.divisor>0&&((o=e.gl)==null||o.vertexAttribDivisor(u+h,a.divisor));else console.error("Unsupported vertex attribute element count: "+a.count);if(qZ()){const h=RSe(e),f=ASe(a.type),m=a.offset,y=Math.round(f/m)!==f/m?`. Offset not a multiple of stride. DataType requires ${f} bytes, but descriptor has an offset of ${m}`:"";h&&console.error(`Unable to bind vertex attribute "${a.name}" with baseInstanceOffset ${d}${y}:`,h,a)}}}function iFe(e,t,r,i){var s,o,a;const n=e.gl;e.bindBuffer(r);for(const u of i){const d=t.get(u.name);if(u.count<=4)n.disableVertexAttribArray(d),u.divisor&&u.divisor>0&&((s=e.gl)==null||s.vertexAttribDivisor(d,0));else if(u.count===9)for(let h=0;h<3;h++)n.disableVertexAttribArray(d+h),u.divisor&&u.divisor>0&&((o=e.gl)==null||o.vertexAttribDivisor(d+h,0));else if(u.count===16)for(let h=0;h<4;h++)n.disableVertexAttribArray(d+h),u.divisor&&u.divisor>0&&((a=e.gl)==null||a.vertexAttribDivisor(d+h,0));else console.error("Unsupported vertex attribute element count: "+u.count)}e.unbindBuffer(X3.ARRAY_BUFFER)}function OSe(e){switch(e){case ut.ALPHA:case ut.LUMINANCE:case ut.RED:case ut.RED_INTEGER:case ie.R8:case ie.R8I:case ie.R8UI:case ie.R8_SNORM:case Ua.STENCIL_INDEX8:return 1;case ut.LUMINANCE_ALPHA:case ut.RG:case ut.RG_INTEGER:case ie.RGBA4:case ie.R16F:case ie.R16I:case ie.R16UI:case ie.RG8:case ie.RG8I:case ie.RG8UI:case ie.RG8_SNORM:case ie.RGB565:case ie.RGB5_A1:case Ua.DEPTH_COMPONENT16:return 2;case ut.DEPTH_COMPONENT:case ut.RGB:case ut.RGB_INTEGER:case ie.RGB8:case ie.RGB8I:case ie.RGB8UI:case ie.RGB8_SNORM:case ie.SRGB8:case Ua.DEPTH_COMPONENT24:return 3;case ut.DEPTH_STENCIL:case ut.DEPTH24_STENCIL8:case ut.RGBA:case ut.RGBA_INTEGER:case ie.RGBA8:case ie.R32F:case ie.R11F_G11F_B10F:case ie.RG16F:case ie.R32I:case ie.R32UI:case ie.RG16I:case ie.RG16UI:case ie.RGBA8I:case ie.RGBA8UI:case ie.RGBA8_SNORM:case ie.SRGB8_ALPHA8:case ie.RGB9_E5:case ie.RGB10_A2UI:case ie.RGB10_A2:case Ua.DEPTH_STENCIL:case Ua.DEPTH_COMPONENT32F:case Ua.DEPTH24_STENCIL8:return 4;case Ua.DEPTH32F_STENCIL8:return 5;case ie.RGB16F:case ie.RGB16I:case ie.RGB16UI:return 6;case ie.RG32F:case ie.RG32I:case ie.RG32UI:case ie.RGBA16F:case ie.RGBA16I:case ie.RGBA16UI:return 8;case ie.RGB32F:case ie.RGB32I:case ie.RGB32UI:return 12;case ie.RGBA32F:case ie.RGBA32I:case ie.RGBA32UI:return 16;case Fr.COMPRESSED_RGB_S3TC_DXT1_EXT:case Fr.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case Fr.COMPRESSED_RGBA_S3TC_DXT3_EXT:case Fr.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case Fr.COMPRESSED_R11_EAC:case Fr.COMPRESSED_SIGNED_R11_EAC:case Fr.COMPRESSED_RGB8_ETC2:case Fr.COMPRESSED_SRGB8_ETC2:case Fr.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case Fr.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case Fr.COMPRESSED_RG11_EAC:case Fr.COMPRESSED_SIGNED_RG11_EAC:case Fr.COMPRESSED_RGBA8_ETC2_EAC:case Fr.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let HZ=class{constructor(t=0,r=t){this.width=t,this.height=r,this.target=Zn.TEXTURE_2D,this.pixelFormat=ut.RGBA,this.dataType=ov.UNSIGNED_BYTE,this.samplingMode=ar.LINEAR,this.wrapMode=ZS.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.depth=1,this.isImmutable=!1}};function kSe(e){return e.width<=0||e.height<=0?0:Math.round(e.width*e.height*(e.hasMipmap?4/3:1)*(e.internalFormat==null?4:OSe(e.internalFormat))*(e.target===Zn.TEXTURE_CUBE_MAP?6:1))}let PSe=class WZ extends HZ{constructor(t,r){switch(super(),this.context=t,Object.assign(this,r),this.internalFormat){case ie.R16F:case ie.R16I:case ie.R16UI:case ie.R32F:case ie.R32I:case ie.R32UI:case ie.R8_SNORM:case ie.R8:case ie.R8I:case ie.R8UI:this.pixelFormat=ut.RED}}static validate(t,r){return new WZ(t,r)}},ZZ=class Nn{constructor(t,r=null,i=null){if(this.type=tC.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._wasImmutablyAllocated=!1,"context"in t)this._descriptor=t,i=r;else{const n=PSe.validate(t,r);if(!n)throw new R("Texture descriptor invalid");this._descriptor=n}this._descriptor.target===Zn.TEXTURE_CUBE_MAP?this._setDataCubeMap(i):this.setData(i)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return kSe(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}dispose(){this._glName&&this._descriptor.context.instanceCounter.decrement(JS.Texture,this),this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(t,r){const i=this._descriptor;if(i.width!==t||i.height!==r){if(this._wasImmutablyAllocated)throw new R("Immutable textures can't be resized!");i.width=t,i.height=r,this._descriptor.target===Zn.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}_setDataCubeMap(t=null){for(let r=Zn.TEXTURE_CUBE_MAP_POSITIVE_X;r<=Zn.TEXTURE_CUBE_MAP_NEGATIVE_Z;r++)this._setData(t,r)}setData(t){this._setData(t)}_setData(t,r){var d;const i=(d=this._descriptor.context)==null?void 0:d.gl;if(!i)return;Up(i),this._glName||(this._glName=i.createTexture(),this._glName&&this._descriptor.context.instanceCounter.increment(JS.Texture,this));const n=this._descriptor,s=r??n.target,o=yy(s),a=this._descriptor.context.bindTexture(this,Nn.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(Nn.TEXTURE_UNIT_FOR_UPDATES),tw(n),this._configurePixelStorage(),Up(i);const u=this._deriveInternalFormat();if(wD(t)){let h="width"in t?t.width:t.codedWidth,f="height"in t?t.height:t.codedHeight;const m=1;t instanceof HTMLVideoElement&&(h=t.videoWidth,f=t.videoHeight),n.width&&n.height,o&&n.depth,n.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(s,u,n.hasMipmap,h,f,m),this._texImage(s,0,u,h,f,m,t),Up(i),n.hasMipmap&&(this.generateMipmap(),Up(i)),n.width||(n.width=h),n.height||(n.height=f),o&&!n.depth&&(n.depth=m)}else{const{width:h,height:f,depth:m}=n;if(h==null||f==null)throw new R("Width and height must be specified!");if(o&&m==null)throw new R("Depth must be specified!");if(n.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(s,u,n.hasMipmap,h,f,m),F_(t)){const y=t.levels,g=_D(s,h,f,m),v=Math.min(g-1,y.length-1);i.texParameteri(n.target,this._descriptor.context.gl.TEXTURE_MAX_LEVEL,v);const _=u;if(!FSe(_))throw new R("Attempting to use compressed data with an uncompressed format!");this._forEachMipmapLevel((w,b,T,x)=>{const M=y[Math.min(w,y.length-1)];this._compressedTexImage(s,w,_,b,T,x,M)},v)}else this._texImage(s,0,u,h,f,m,t),Up(i),n.hasMipmap&&this.generateMipmap()}gD(i,this._descriptor),vD(i,this._descriptor),NSe(this._descriptor.context,this._descriptor),Up(i),this._descriptor.context.bindTexture(a,Nn.TEXTURE_UNIT_FOR_UPDATES)}updateData(t,r,i,n,s,o,a=0){o||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const u=this._descriptor,d=this._deriveInternalFormat(),{context:h,pixelFormat:f,dataType:m,target:y,isImmutable:g}=u;if(g&&!this._wasImmutablyAllocated)throw new R("Cannot update immutable texture before allocation!");const v=h.bindTexture(this,Nn.TEXTURE_UNIT_FOR_UPDATES,!0);(r<0||i<0||r+n>u.width||i+s>u.height)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:_}=h;a&&_.pixelStorei(_.UNPACK_SKIP_ROWS,a),wD(o)?_.texSubImage2D(y,t,r,i,n,s,f,m,o):F_(o)?_.compressedTexSubImage2D(y,t,r,i,n,s,d,o.levels[t]):_.texSubImage2D(y,t,r,i,n,s,f,m,o),a&&_.pixelStorei(_.UNPACK_SKIP_ROWS,0),h.bindTexture(v,Nn.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(t,r,i,n,s,o,a,u){u||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const d=this._descriptor,h=this._deriveInternalFormat(),{context:f,pixelFormat:m,dataType:y,isImmutable:g,target:v}=d;if(g&&!this._wasImmutablyAllocated)throw new R("Cannot update immutable texture before allocation!");yy(v)||console.warn("Attempting to set 3D texture data on a non-3D texture");const _=f.bindTexture(this,Nn.TEXTURE_UNIT_FOR_UPDATES);f.setActiveTexture(Nn.TEXTURE_UNIT_FOR_UPDATES),(r<0||i<0||n<0||r+s>d.width||i+o>d.height||n+a>d.depth)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:w}=f;if(F_(u))u=u.levels[t],w.compressedTexSubImage3D(v,t,r,i,n,s,o,a,h,u);else{const b=u;w.texSubImage3D(v,t,r,i,n,s,o,a,m,y,b)}f.bindTexture(_,Nn.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const t=this._descriptor;if(!t.hasMipmap){if(this._wasImmutablyAllocated)throw new R("Cannot add mipmaps to immutable texture after allocation");t.hasMipmap=!0,this._samplingModeDirty=!0,tw(t)}t.samplingMode===ar.LINEAR?(this._samplingModeDirty=!0,t.samplingMode=ar.LINEAR_MIPMAP_NEAREST):t.samplingMode===ar.NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=ar.NEAREST_MIPMAP_NEAREST);const r=this._descriptor.context.bindTexture(this,Nn.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(Nn.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(t.target),this._descriptor.context.bindTexture(r,Nn.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const t=this._descriptor;if(t.hasMipmap){if(this._wasImmutablyAllocated)throw new R("Cannot delete mipmaps to immutable texture after allocation");t.hasMipmap=!1,this._samplingModeDirty=!0,tw(t)}t.samplingMode===ar.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,t.samplingMode=ar.LINEAR):t.samplingMode===ar.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=ar.NEAREST)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,tw(this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const t=this._descriptor,r=t.context.gl;this._samplingModeDirty&&(gD(r,t),this._samplingModeDirty=!1),this._wrapModeDirty&&(vD(r,t),this._wrapModeDirty=!1)}_deriveInternalFormat(){if(this._descriptor.internalFormat!=null)return this._descriptor.internalFormat===ut.DEPTH_STENCIL&&(this._descriptor.internalFormat=ut.DEPTH24_STENCIL8),this._descriptor.internalFormat;switch(this._descriptor.dataType){case ov.FLOAT:switch(this._descriptor.pixelFormat){case ut.RGBA:return this._descriptor.internalFormat=ie.RGBA32F;case ut.RGB:return this._descriptor.internalFormat=ie.RGB32F;default:throw new R("Unable to derive format")}case ov.UNSIGNED_BYTE:switch(this._descriptor.pixelFormat){case ut.RGBA:return this._descriptor.internalFormat=ie.RGBA8;case ut.RGB:return this._descriptor.internalFormat=ie.RGB8}}return this._descriptor.internalFormat=this._descriptor.pixelFormat===ut.DEPTH_STENCIL?ut.DEPTH24_STENCIL8:this._descriptor.pixelFormat}_configurePixelStorage(){const t=this._descriptor.context.gl,{unpackAlignment:r,flipped:i,preMultiplyAlpha:n}=this._descriptor;t.pixelStorei(t.UNPACK_ALIGNMENT,r),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n?1:0)}_texStorage(t,r,i,n,s,o){const{gl:a}=this._descriptor.context;if(!LSe(r))throw new R("Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const u=i?_D(t,n,s,o):1;if(yy(t)){if(o==null)throw new R("Missing depth dimension for 3D texture upload");a.texStorage3D(t,u,r,n,s,o)}else a.texStorage2D(t,u,r,n,s);this._wasImmutablyAllocated=!0}_texImage(t,r,i,n,s,o,a){const u=this._descriptor.context.gl,d=yy(t),{isImmutable:h,pixelFormat:f,dataType:m}=this._descriptor;if(h){if(a!=null){const y=a;if(d){if(o==null)throw new R("Missing depth dimension for 3D texture upload");u.texSubImage3D(t,r,0,0,0,n,s,o,f,m,y)}else u.texSubImage2D(t,r,0,0,n,s,f,m,y)}}else{const y=a;if(d){if(o==null)throw new R("Missing depth dimension for 3D texture upload");u.texImage3D(t,r,i,n,s,o,0,f,m,y)}else u.texImage2D(t,r,i,n,s,0,f,m,y)}}_compressedTexImage(t,r,i,n,s,o,a){const u=this._descriptor.context.gl,d=yy(t);if(this._descriptor.isImmutable){if(a!=null)if(d){if(o==null)throw new R("Missing depth dimension for 3D texture upload");u.compressedTexSubImage3D(t,r,0,0,0,n,s,o,i,a)}else u.compressedTexSubImage2D(t,r,0,0,n,s,i,a)}else if(d){if(o==null)throw new R("Missing depth dimension for 3D texture upload");u.compressedTexImage3D(t,r,i,n,s,o,0,a)}else u.compressedTexImage2D(t,r,i,n,s,0,a)}_forEachMipmapLevel(t,r=1/0){let{width:i,height:n,depth:s,hasMipmap:o,target:a}=this._descriptor;const u=a===Zn.TEXTURE_3D;if(i==null||n==null||u&&s==null)throw new R("Missing texture dimensions for mipmap calculation");for(let d=0;t(d,i,n,s),o&&(i!==1||n!==1||u&&s!==1)&&!(d>=r);++d)i=Math.max(1,i>>1),n=Math.max(1,n>>1),u&&(s=Math.max(1,s>>1))}};function tw(e){(e.width!=null&&e.width<0||e.height!=null&&e.height<0||e.depth!=null&&e.depth<0)&&console.error("Negative dimension parameters are not allowed!")}function gD(e,t){let r=t.samplingMode,i=t.samplingMode;r===ar.LINEAR_MIPMAP_NEAREST||r===ar.LINEAR_MIPMAP_LINEAR?(r=ar.LINEAR,t.hasMipmap||(i=ar.LINEAR)):r!==ar.NEAREST_MIPMAP_NEAREST&&r!==ar.NEAREST_MIPMAP_LINEAR||(r=ar.NEAREST,t.hasMipmap||(i=ar.NEAREST)),e.texParameteri(t.target,e.TEXTURE_MAG_FILTER,r),e.texParameteri(t.target,e.TEXTURE_MIN_FILTER,i)}function vD(e,t){typeof t.wrapMode=="number"?(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode)):(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode.s),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode.t))}function NSe(e,t){const r=e.capabilities.textureFilterAnisotropic;r&&e.gl.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy??1)}function LSe(e){return e in ie}function FSe(e){return e in Fr}function F_(e){return e!=null&&"type"in e&&e.type==="compressed"}function DSe(e){return e!=null&&"byteLength"in e}function wD(e){return e!=null&&!F_(e)&&!DSe(e)}function yy(e){return e===Zn.TEXTURE_3D||e===Zn.TEXTURE_2D_ARRAY}function _D(e,t,r,i=1){let n=Math.max(t,r);return e===Zn.TEXTURE_3D&&(n=Math.max(n,i)),Math.round(Math.log(n)/Math.LN2)+1}ZZ.TEXTURE_UNIT_FOR_UPDATES=0;const vx=()=>j.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function jSe(e,t){t.fillColor[0]=e.color.r/255,t.fillColor[1]=e.color.g/255,t.fillColor[2]=e.color.b/255,t.fillColor[3]=e.color.a,e.haloColor?(t.outlineColor[0]=e.haloColor.r/255,t.outlineColor[1]=e.haloColor.g/255,t.outlineColor[2]=e.haloColor.b/255,t.outlineColor[3]=e.haloColor.a):(t.outlineColor[0]=t.fillColor[0],t.outlineColor[1]=t.fillColor[1],t.outlineColor[2]=t.fillColor[2],t.outlineColor[3]=t.fillColor[3]),t.fillColor[3]*=e.fillOpacity,t.outlineColor[3]*=e.haloOpacity,t.fillColor[0]*=t.fillColor[3],t.fillColor[1]*=t.fillColor[3],t.fillColor[2]*=t.fillColor[3],t.outlineColor[0]*=t.outlineColor[3],t.outlineColor[1]*=t.outlineColor[3],t.outlineColor[2]*=t.outlineColor[3],t.outlineWidth=(1-e.haloBlur)*e.haloWidth,t.outerHaloWidth=e.haloBlur*e.haloWidth/2,t.innerHaloWidth=e.haloBlur*e.haloWidth/2,t.outlinePosition=0}const VSe=[0,0,0,0];let JZ=class{constructor(){this.type="single",this._highlightOptions=new fp,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*my),this._minMaxDistance=[0,0]}setHighlightOptions(t){this._highlightOptions=t}applyHighlightOptions(t,r){this._updateGradientTexture(t),t.bindTexture(this._shadeTex,ySe),r.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){var t;(t=this._shadeTex)==null||t.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<GZ)-1,activeGradient:this}]}_updateGradientTexture(t){const{optionsKey:r}=this._highlightOptions;if(r===this._optionsShadeTexKey)return;this._optionsShadeTexKey=r,jSe(this._highlightOptions,this._convertedHighlightOptions);const i=this._convertedHighlightOptions,n=i.outlinePosition-i.outlineWidth/2-i.outerHaloWidth,s=i.outlinePosition-i.outlineWidth/2,o=i.outlinePosition+i.outlineWidth/2,a=i.outlinePosition+i.outlineWidth/2+i.innerHaloWidth,u=Math.sqrt(Math.PI/2)*_Se,d=Math.abs(n)>u?Math.round(10*(Math.abs(n)-u))/10:0,h=Math.abs(a)>u?Math.round(10*(Math.abs(a)-u))/10:0;let f;d&&!h?vx().error("The outer rim of the highlight is "+d+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!d&&h?vx().error("The inner rim of the highlight is "+h+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):d&&h&&vx().error("The highlight is "+Math.max(d,h)+"px away from the edge of the feature; consider reducing some width values.");const m=[void 0,void 0,void 0,void 0];function y(v,_,w){m[0]=(1-w)*v[0]+w*_[0],m[1]=(1-w)*v[1]+w*_[1],m[2]=(1-w)*v[2]+w*_[2],m[3]=(1-w)*v[3]+w*_[3]}const{_texelData:g}=this;for(let v=0;v<my;++v)f=n+v/(my-1)*(a-n),f<n?(m[0]=0,m[1]=0,m[2]=0,m[3]=0):f<s?y(VSe,i.outlineColor,(f-n)/(s-n)):f<o?[m[0],m[1],m[2],m[3]]=i.outlineColor:f<a?y(i.outlineColor,i.fillColor,(f-o)/(a-o)):[m[0],m[1],m[2],m[3]]=i.fillColor,g[4*v]=255*m[0],g[4*v+1]=255*m[1],g[4*v+2]=255*m[2],g[4*v+3]=255*m[3];if(this._minMaxDistance[0]=n,this._minMaxDistance[1]=a,!this._shadeTex){const v=new HZ;v.wrapMode=ZS.CLAMP_TO_EDGE,v.width=my,v.height=1,this._shadeTex=new ZZ(t,v)}this._shadeTex.updateData(0,0,0,my,1,this._texelData)}},USe=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(t){for(let r=0;r<t.length;r++)this.gradients[r]||(this.gradients[r]=new JZ),this.gradients[r].setHighlightOptions(t[r].options);for(let r=t.length+1;r<this.gradients.length;r++)this.gradients[r].destroy();this.gradients.length=t.length}destroy(){for(const t of this.gradients)t.destroy()}getReasonsWithGradients(){let t=1;const r=[];for(let i=0;i<this.gradients.length;i++){const n=this.gradients[i];r.push({activeReasons:t,activeGradient:n}),t<<=1}return r}};var bD,SD,$D,TD,xD,ED,KS,MD,ID;(function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT",e[e.LABEL=4]="LABEL"})(bD||(bD={})),function(e){e[e.NONE=0]="NONE",e[e.MAP=1]="MAP",e[e.LABEL=2]="LABEL",e[e.LABEL_ALPHA=4]="LABEL_ALPHA",e[e.HITTEST=8]="HITTEST",e[e.HIGHLIGHT=16]="HIGHLIGHT",e[e.CLIP=32]="CLIP",e[e.DEBUG=64]="DEBUG",e[e.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(SD||(SD={})),function(e){e[e.SIZE=0]="SIZE",e[e.COLOR=1]="COLOR",e[e.OPACITY=2]="OPACITY",e[e.ROTATION=3]="ROTATION"}($D||($D={})),function(e){e[e.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",e[e.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",e[e.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",e[e.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(TD||(TD={})),function(e){e[e.SPRITE=0]="SPRITE",e[e.GLYPH=1]="GLYPH"}(xD||(xD={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SIMPLE=1]="SIMPLE",e[e.DOT_DENSITY=2]="DOT_DENSITY",e[e.OUTLINE_FILL=3]="OUTLINE_FILL",e[e.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",e[e.HEATMAP=5]="HEATMAP",e[e.PIE_CHART=6]="PIE_CHART"}(ED||(ED={})),function(e){e[e.All=0]="All",e[e.Highlight=1]="Highlight",e[e.InsideEffect=2]="InsideEffect",e[e.OutsideEffect=3]="OutsideEffect"}(KS||(KS={})),function(e){e[e.BATCHING=0]="BATCHING",e[e.STRICT_ORDER=1]="STRICT_ORDER",e[e.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"}(MD||(MD={})),function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT"}(ID||(ID={}));const KZ={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:eC.EQUAL,mask:255,op:{fail:d0.KEEP,zFail:d0.KEEP,zPass:d0.REPLACE}}}},zSe={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},GSe={...KZ,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function BSe({pixelRatio:e,state:t,displayLevel:r,requiredLevel:i},n){const s=1/2**(r-n.key.level),o=1/2**(i-n.key.level);return{displayMat3:t.displayMat3,displayViewMat3:t.displayViewMat3,displayViewScreenMat3:n.transforms.displayViewScreenMat3,viewMat3:t.viewMat3,tileMat3:n.transforms.tileMat3,displayZoomFactor:s,requiredZoomFactor:o,tileOffset:[n.x,n.y],currentScale:t.scale,currentZoom:r,metersPerSRUnit:io(t.spatialReference),rotation:t.rotation,pixelRatio:e}}function YZ(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="highlight"}function QZ(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="hittest"}function qSe(e){if(!QZ(e))return null;const{position:t,distance:r,smallSymbolDistance:i,smallSymbolSizeThreshold:n}=e.passOptions;return{position:t,distance:r,smallSymbolDistance:i,smallSymbolSizeThreshold:n}}function HSe(e){if(!YZ(e))return null;const{activeReasons:t,highlightAll:r}=e.passOptions;return{activeReasons:t,highlightAll:r?1:0}}function aFe(e,t,r){const i={};for(const n in r)r[n]instanceof Function?i[n]=r[n](e,t):i[n]=r[n];return i}function lFe(e,t){const{attributeView:r,context:i}=e;return{storage:r.getUniforms(i),view:BSe(e,t),hittestRequest:qSe(e),highlight:HSe(e)}}function uFe(e){return{inside:e.selection===KS.InsideEffect,outside:e.selection===KS.OutsideEffect}}function WSe(e){return QZ(e)?zSe:YZ(e)&&e.passOptions.stepType==="clear"?GSe:KZ}function cFe(e){const{row:t,col:r}=e.key,i=r*QF,n=t*QF;return{tileOffsetFromLocalOrigin:[i%ew,n%ew],maxIntsToLocalOrigin:[Math.floor(i/ew),Math.floor(n/ew)]}}const ZSe=new _e({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function dFe(e){return ZSe.toJSON(e)}function pFe(e){const{bandCount:t,attributeTable:r,colormap:i,pixelType:n}=e.raster.rasterInfo;return t===1&&(r!=null||i!=null||n==="u8"||n==="s8")}function JSe(e,t){return t==null?(e==null||e.destroy(),null):((e==null?void 0:e.type)==="single"&&Array.isArray(t)&&(e.destroy(),e=null),(e==null?void 0:e.type)!=="multi"||Array.isArray(t)||(e.destroy(),e=null),e||(e=Array.isArray(t)?new USe:new JZ),Array.isArray(t)?e.type==="multi"&&e.setHighlightOptions(t):e.type==="single"&&e.setHighlightOptions(t),e)}function hFe(e,t,r,i){const{painter:n,highlightGradient:s}=e,{highlight:o}=n.effects;if(!s)return;const a=e.passOptions,u=s.getReasonsWithGradients();for(let d=0;d<u.length;d++){const h={...e,passOptions:{type:"highlight",activeGradient:i!=null?u[i].activeGradient:u[d].activeGradient,activeReasons:u[d].activeReasons,stepType:"burn",highlightAll:t}};if(o.bind(h),r(h),d<u.length-1){let m=0;for(let y=d+1;y<u.length;y++)m|=u[y].activeReasons;r({...e,passOptions:{type:"highlight",activeGradient:i!=null?u[i].activeGradient:u[d].activeGradient,activeReasons:m,stepType:"clear",highlightAll:t}})}const f={...e,passOptions:{type:"highlight",activeGradient:i!=null?u[i].activeGradient:u[d].activeGradient,activeReasons:u[d].activeReasons,stepType:"draw",highlightAll:t}};n.setPipelineState(WSe(e)),n.updatePipelineState(e.context),o.draw(f),o.unbind()}e.passOptions=a}const rw=e=>parseFloat(e)/100;function KSe(e,t,r){const i=typeof e.left=="string"?rw(e.left)*t:e.left,n=typeof e.right=="string"?rw(e.right)*t:e.right,s=typeof e.top=="string"?rw(e.top)*r:e.top,o=typeof e.bottom=="string"?rw(e.bottom)*r:e.bottom,a=s;return{xmin:i,xmax:Math.max(t-n,i),ymin:a,ymax:Math.max(r-o,s)}}function XZ(e,t,r,i){switch(t.type){case"rect":{const{width:n,height:s}=e,{xmin:o,xmax:a,ymin:u,ymax:d}=KSe(t,n,s),{x:h,y:f}=r;return h>o&&h<a&&f>u&&f<d}case"path":return t.path.length===0||!Array.isArray(t.path[0][0])||$O(t.path,[r.x,r.y]);case"geometry":return t.geometry==null||(t.geometry.type==="polygon"?SO(t.geometry,i):Cv(t.geometry,i))}}var rC;let mf=rC=class extends te{constructor(...e){super(...e),this.name="default",this.options=new fp}clone(){return new rC({name:this.name,options:this.options.clone()})}};l([c({type:String})],mf.prototype,"name",void 0),l([c({type:fp})],mf.prototype,"options",void 0),mf=rC=l([$("esri.views.2d.support.HighlightGroup")],mf);const eJ=Y.ofType(mf);function tJ(){return new eJ([{name:TSe,options:new fp},{name:xSe,options:new fp({color:ESe})}])}tJ().items.map(e=>e.name);function YSe(e){if(!e.highlights)return null;const t=e.highlights.findIndex(r=>r.name==="default");return t===-1?null:e.highlights.items[t].options}function QSe(e,t){if(!e.highlights){if(!t)return;e.highlights=new eJ([{name:"default",options:new fp}])}const r=e.highlights.findIndex(i=>i.name==="default");t?e.highlights.items[r].options=t:e.highlights.removeAt(r)}async function XSe(e,t,r){const i=bW(t)?_W(e,t):t;if(!e.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let n=new Set;const s=new Set;let o=!1,a=null,u=null;r!=null&&r.include?AD(r.include,CD(e,m=>{n.add(m),wx(m,y=>s.add(y))},(m,y)=>{s.add(m),n.add(y)},m=>{a||(a=new Set),a.add(m)},m=>n.add(m),()=>o=!0)):(o=!0,n=new Set(e.allLayerViews),n.forEach(m=>{wx(m,y=>s.add(y))})),r!=null&&r.exclude&&AD(r.exclude,CD(e,m=>{n.delete(m),wx(m,y=>s.delete(y))},m=>s.delete(m),m=>{u||(u=new Set),u.add(m)}));const d=e.toMap(i),h=e.allLayerViews.filter(m=>!m.suspended&&n.has(m)&&m.clips.every(y=>XZ(e,y,i,d))).reverse();let f=[...o?e.graphicsView.hitTest(d).map(m=>({type:"graphic",graphic:m,layer:null,mapPoint:d})):[],...await Promise.all(h.map(m=>m.hitTest(d,i)).toArray())].filter(Js).flat().filter(Js);return f=f.filter(m=>{var y;return m.type!=="graphic"||((y=m.layer)==null?void 0:y.type)!=="subtype-group"||s.has(m.graphic.layer)}),a&&(f=f.filter(m=>!("graphic"in m)||!m.graphic||(a==null?void 0:a.has(iC(m.graphic))))),u&&(f=f.filter(m=>!("graphic"in m)||!m.graphic||!(u!=null&&u.has(iC(m.graphic))))),{screenPoint:i,results:f}}function CD(e,t,r,i,n,s){return o=>{if(o instanceof Ti){if(o.layer===e)s==null||s();else{const a=e.allLayerViews.find(u=>u.layer===o.layer);a&&(n==null||n(a))}i(iC(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=e.allLayerViews.find(u=>u.layer===o.parent);a&&r(o,a)}else{const a=e.allLayerViews.find(u=>u.layer===o);a&&t(a)}}}function AD(e,t){if(e)if(eS(e))for(const r of e)if(eS(r))for(const i of r)t(i);else t(r);else t(e)}function iC(e){var r,i;const t=e.getObjectId();return t?`${((r=e.layer)==null?void 0:r.uid)??((i=e.sourceLayer)==null?void 0:i.uid)??"MapView"}/${t}`:`"MapView/${e.uid}`}function wx({layer:e},t){(e==null?void 0:e.type)==="subtype-group"&&e.sublayers.forEach(r=>{t(r)})}let gy=null,YS=!0;function e2e(e,t,r){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(YS)try{return new ImageData(e,t)}catch{YS=!1}return rJ(e,t,r)}function fFe(e,t,r,i){if(!t||!r)throw new Error("Cannot construct image data without dimensions");if(YS)try{return new ImageData(e,t,r)}catch{YS=!1}const n=rJ(t,r,i);return n.data.set(e,0),n}function t2e(){return gy||(gy=document.createElement("canvas"),gy.width=1,gy.height=1),gy}function rJ(e,t,r){return r||(r=t2e()),r.getContext("2d").createImageData(e,t)}async function r2e(e,t){const r=window.URL.createObjectURL(e);try{const{data:i}=await Le(r,{...t,responseType:"image"});return i}catch(i){throw Or(i)?i:new R("invalid-image",`Could not fetch requested image at ${r}`)}finally{window.URL.revokeObjectURL(r)}}async function mFe(e,t){const{arrayBuffer:r,mediaType:i}=await i2e(e,t),n=i==="image/png";if(i==="image/gif"){const{isAnimatedGIF:s,parseGif:o}=await D(()=>import("./gif-CRUiviMz.js"),[],import.meta.url);if(s(r))return o(r,t)}if(n){const{isAnimatedPNG:s,parseApng:o}=await D(()=>import("./apng-BmeEZxed.js"),__vite__mapDeps([215,1]),import.meta.url);if(s(r))return o(r,t)}return r2e(new Blob([r],{type:i}),t)}async function i2e(e,t){var n;const r=rp(e);if(r!=null&&r.isBase64)return{arrayBuffer:r7(r.data),mediaType:r.mediaType};const i=await Le(e,{responseType:"array-buffer",...t});return{arrayBuffer:i.data,mediaType:((n=i.getHeader)==null?void 0:n.call(i,"Content-Type"))??""}}function iJ(e,t,r){const{ctx:i,canvas:n}=sJ(e,r),s=i.getImageData(0,0,e.width,e.height),o=aJ(n,t);return oJ(n),{dataUrl:o,data:s}}function nJ(e,t){const{ctx:r,canvas:i}=sJ(e,t),n=r.getImageData(0,0,e.width,e.height);return oJ(i),n}function sJ(e,t){const r=n2e();t.premultipliedAlpha&&l2e(e),r.width=e.width,r.height=e.height;const i=r.getContext("2d",{willReadFrequently:!0});return i.putImageData(e,0,0),t.flipY&&a2e(i),{ctx:i,canvas:r}}function oJ(e){e.width=0,e.height=0}function n2e(){return _x==null&&(_x=document.createElement("canvas")),_x}let _x=null;function aJ(e,t){const r=u2e[t.format],i=t.quality/100;return e.toDataURL(r,i)}function lJ(e,t){const r=o2e(e),i=d2e[r];return{format:r,quality:os(t??i,0,100)}}function uJ(e,t){return t/Math.max(e[0],e[1])}function s2e(e,t,r,i=0,n=0,s=e.width-i,o=e.height-n,a=!1){const{data:u}=e,{width:d,height:h,data:f}=t,m=s/d,y=o/h,g=Math.ceil(m/2),v=Math.ceil(y/2),_=e.width;for(let w=0;w<h;w++)for(let b=0;b<d;b++){const T=4*(b+(a?h-w-1:w)*d);let x=0,M=0,I=0,O=0,P=0,z=0;const U=(w+.5)*y;for(let W=Math.floor(w*y);W<(w+1)*y;W++){const ee=Math.abs(U-(W+.5))/v,de=(b+.5)*m,oe=ee*ee;for(let Pe=Math.floor(b*m);Pe<(b+1)*m;Pe++){const tr=Math.abs(de-(Pe+.5))/g,Re=Math.sqrt(oe+tr*tr);if(Re>=1)continue;let q=2*Re*Re*Re-3*Re*Re+1;const pe=4*(i+Pe+(n+W)*_);z+=q*u[pe+3],M+=q,!r&&u[pe+3]<255&&(q=q*u[pe+3]/255),I+=q*u[pe],O+=q*u[pe+1],P+=q*u[pe+2],x+=q}}f[T]=I/x,f[T+1]=O/x,f[T+2]=P/x,f[T+3]=z/M}return t}function o2e(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return c2e}}function a2e(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function l2e(e){const t=e.data,r=t.length;for(let i=0;i<r;i+=4){const n=t[i+3];if(n!==255&&n>0){const s=255/n;t[i]=t[i]*s,t[i+1]=t[i+1]*s,t[i+2]=t[i+2]*s}}}const u2e={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},RD=98,c2e="png",d2e={png:100,jpg:RD,jpeg:RD},yFe=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:e2e,encode:iJ,encodeData:nJ,getFormatAndQuality:lJ,getMaximumResolutionScale:uJ,resampleHermite:s2e,toDataUrl:aJ},Symbol.toStringTag,{value:"Module"})),cJ={flipY:!0,premultipliedAlpha:!0};async function p2e(e,t){const r=await dJ(e,t),{format:i,quality:n}=lJ(t==null?void 0:t.format,t==null?void 0:t.quality);return iJ(r,{format:i,quality:n},cJ)}async function h2e(e,t){const r=await dJ(e,t);return nJ(r,cJ)}function dJ(e,t){const r=y2e(t||{},m2e(e.stage,e.size),e.size,e.padding),i=f2e(t,e.allLayerViews);return e.stage.takeScreenshot(r,i,e.backgroundColor,t==null?void 0:t.rotation)}function f2e(e={},t){if(!e.layers)return;const r=[];return e.layers.forEach(i=>{const n=t.find(s=>s.layer.id===i.id);n!=null&&n.container&&r.push(n.container)}),r}function m2e(e,t){return Math.min(4,uJ(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function y2e(e,t,r,i){e.ignorePadding&&(i={left:0,right:0,top:0,bottom:0});let n=null;e.width!=null&&e.height!=null?n=[e.width,e.height]:e.width==null&&e.height!=null?n=[e.height,e.height]:e.width!=null&&e.height==null?n=[e.width,e.width]:e.width==null&&e.height==null&&(n=null);const s=r[0]-(i.left+i.right),o=r[1]-(i.top+i.bottom);let a,u,d=e.area||{x:0,y:0,width:s,height:o};if(n){const h=s/o,f=n[0]/n[1];if(f>h){const m=d.width/f;d={x:d.x,y:Math.round(d.y+(d.height-m)/2),width:d.width,height:Math.round(m)}}else{const m=d.height*f;d={x:Math.round(d.x+(d.width-m)/2),y:d.y,width:Math.round(m),height:d.height}}}else n=[d.width,d.height];return n[0]>d.width?(a=Math.min(n[0]/d.width,t),u=n[0]/d.width/a):(a=1,u=n[0]/d.width),{cropArea:{x:Math.round((d.x+i.left)*a),y:Math.round((d.y+i.top)*a),width:Math.round(d.width*a),height:Math.round(d.height*a)},outputScale:u,resolutionScale:a}}const OD=160;let fg=class extends te{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=OD&&this.clear()},OD))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};l([c()],fg.prototype,"_timer",void 0),l([c()],fg.prototype,"stationary",null),fg=l([$("esri.views.2d.support.StationaryManager")],fg);const g2e=e=>e.includes("Brush");let pJ=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),g2e(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}},bx;function v2e(){return bx||(bx=b2e()),bx}let w2e=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}};function _2e(e){if(typeof WebGL2RenderingContext>"u")return null;const t=document.createElement("canvas");if(!t)return null;let r=t.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(r==null&&(r=t.getContext("webgl2"),r!=null&&(e.majorPerformanceCaveat=!0)),r==null)return r;e.available=!0,e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const i=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return i&&(e.supportsHighPrecisionFragment=i.precision>0),r}function b2e(){const e=new w2e,t=_2e(e);return t==null||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function S2e(e){const t=v2e();return t.available?e==="3d"&&t.majorPerformanceCaveat?new R("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new R("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new R("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new R("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function $2e(e){return e&&"nodeType"in e}function T2e(e){return e&&typeof e.render=="function"}const kD={component:"esri-component"};let od=class extends te{constructor(){super(...arguments),this.widget=null}destroy(){var t;this.node=null,(t=this.widget)==null||t.destroy()}get id(){var t,r;return this._get("id")??((t=this.widget)==null?void 0:t.id)??((r=this.node)==null?void 0:r.id)}set id(t){this._set("id",t)}set node(t){const r=this._get("node");t!==r&&(t&&t.classList.add(kD.component),r&&r.classList.remove(kD.component),this._set("node",t))}castNode(t){var r;return(r=this.widget)==null||r.destroy(),t?typeof t=="string"||$2e(t)?(this._set("widget",null),YO(t)):(T2e(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};l([c()],od.prototype,"id",null),l([c()],od.prototype,"node",null),l([Ne("node")],od.prototype,"castNode",null),l([c({readOnly:!0})],od.prototype,"widget",void 0),od=l([$("esri.views.ui.Component")],od);const D_=od,hJ="calcite-mode-";function x2e(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function E2e(){return x2e().startsWith("dark")}function M2e(){return`${hJ}${E2e()?"dark":"light"}`}function I2e(e){C2e(e),e.classList.add(M2e())}function C2e(e){Array.from(e.classList).forEach(t=>{t.startsWith(hJ)&&e.classList.remove(t)})}const A2e={left:0,top:0,bottom:0,right:0},fJ={bottom:30,top:15,right:15,left:15},aa="esri-ui",Ii={ui:aa,corner:`${aa}-corner`,innerContainer:`${aa}-inner-container`,manualContainer:`${aa}-manual-container`,cornerContainer:`${aa}-corner-container`,topLeft:`${aa}-top-left`,topRight:`${aa}-top-right`,bottomLeft:`${aa}-bottom-left`,bottomRight:`${aa}-bottom-right`};function R2e(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function iw(e){return e===0?"0":`${e}px`}function Sx(e){const t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function $x(e,{top:t,bottom:r,left:i,right:n}){e.style.top=t,e.style.bottom=r,e.style.left=i,e.style.right=n}let $o=class extends cs.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=qi(),this.view=null,this._applyViewPadding=()=>{const r=this.container;r&&$x(r,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const r=this._innerContainer;r&&$x(r,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([ce(()=>{var t;return[(t=this.view)==null?void 0:t.padding,this.container]},this._applyViewPadding,zt),ce(()=>this.padding,this._applyUIPadding,zt),ce(()=>[this.container,this._locale],([t,r])=>{t&&t.setAttribute("lang",r)},zt),z2(t=>{this._locale=t})])}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._componentMap.clear()}set container(t){const r=this._get("container");t!==r&&(t&&(t.classList.add(Ii.ui),I2e(t),this._attachContainers(t)),r&&(r.classList.remove(Ii.ui),$x(r,{top:"",bottom:"",left:"",right:""}),r.textContent=""),this._set("container",t))}get height(){var s;const t=((s=this.view)==null?void 0:s.height)??0;if(t===0)return t;const r=this._getViewPadding(),{top:i,bottom:n}=r;return Math.max(t-i-n,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return typeof t=="number"?{bottom:t,top:t,right:t,left:t}:{...fJ,...t}}get width(){var s;const t=((s=this.view)==null?void 0:s.width)??0;if(t===0)return t;const r=this._getViewPadding(),{left:i,right:n}=r;return Math.max(t-i-n,0)}add(t,r){let i,n,s;if(Array.isArray(t))return void t.forEach(a=>this.add(a,r));const o=Sx(t);o&&({index:i,position:r,component:t,key:n}=o),r&&typeof r=="object"&&({index:i,key:n,position:r,internal:s}=r),!t||r&&!this._isValidPosition(r)||this._add(t,r,i,n,s)}remove(t,r){var n,s;if(!t)return;if(Array.isArray(t))return t.map(o=>this.remove(o,r));const i=this._find(t);if(i){if(this._componentMap.has(i)&&((n=this._componentMap.get(i))==null?void 0:n.key)!==r)return;const o=this._components.indexOf(i),a=i.node.parentNode;return a==null||a.removeChild(i.node),this._componentMap.delete(i),(s=i.widget)==null||s.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(o,1)[0]}}empty(t,r={removeInternal:!1}){if(Array.isArray(t)){for(const s of t)this.empty(s,r);return}const i=this._positionNameToContainerLookup[t??"manual"],n=Array.prototype.slice.call(i.children).map(s=>this._findByNode(s)).filter(s=>{var o;return s==null?!1:!(((o=this._componentMap.get(s))==null?void 0:o.internal)??!1)||r.removeInternal});for(const s of n)this.remove(s)}move(t,r){if(Array.isArray(t)&&t.forEach(o=>this.move(o,r)),!t)return;let i;const n=Sx(t)||Sx(r);if(n&&(i=n.index,r=n.position,t=n.component||t),r&&!this._isValidPosition(r))return;const s=this.remove(t);s&&this.add(s,{position:r,index:i})}find(t){if(!t)return null;const r=this._findById(t);return r&&(r.widget||r.node)}getComponents(t,r={includeInternal:!1}){return t?Array.isArray(t)?t.flatMap(i=>this._getComponentsAtPosition(i,r)):this._getComponentsAtPosition(t,r):this._components.filter(i=>{var n;return r.includeInternal||!((n=this._componentMap.get(i))!=null&&n.internal)}).map(({widget:i,node:n})=>i??n)}getPosition(t){for(const r in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[r].contains(t))return r;return null}_add(t,r,i,n,s){t instanceof D_||(t=new D_({node:t}));const{widget:o}=t;o!=null&&o instanceof te&&o.addHandles(Be(()=>{queueMicrotask(()=>this.remove(t))}),this._removeWidgetHandleKey),this._place({component:t,position:r,index:i}),this._components.push(t),this._componentMap.set(t,{key:n,internal:s})}_find(t){return t?t instanceof D_?this._findByComponent(t):typeof t=="string"?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){var t;return((t=this.view)==null?void 0:t.padding)??A2e}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){const t=document.createElement("div");t.classList.add(Ii.innerContainer,Ii.cornerContainer);const r=document.createElement("div");r.classList.add(Ii.innerContainer,Ii.manualContainer);const i=document.createElement("div");i.classList.add(Ii.topLeft,Ii.corner),t.appendChild(i);const n=document.createElement("div");n.classList.add(Ii.topRight,Ii.corner),t.appendChild(n);const s=document.createElement("div");s.classList.add(Ii.bottomLeft,Ii.corner),t.appendChild(s);const o=document.createElement("div");o.classList.add(Ii.bottomRight,Ii.corner),t.appendChild(o),this._innerContainer=t,this._manualContainer=r;const a=Rhe();this._cornerNameToContainerLookup={"top-left":i,"top-right":n,"bottom-left":s,"bottom-right":o,"top-leading":a?n:i,"top-trailing":a?i:n,"bottom-leading":a?o:s,"bottom-trailing":a?s:o},this._positionNameToContainerLookup={manual:r,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){var d,h;const r=t.position??"manual",{component:i,index:n}=t,s=this._positionNameToContainerLookup[r],o=n!=null&&n>-1;if(R2e(i.widget)&&i.widget.startup(),!o)return void s.appendChild(i.node);const a=Array.from(s.children);if(n===0){const{firstChild:f}=s;return void(f?(d=f.parentNode)==null?void 0:d.insertBefore(i.node,f):s.appendChild(i.node))}if(n>=a.length)return void s.appendChild(i.node);const u=a[n];(h=u.parentNode)==null||h.insertBefore(i.node,u)}_toPixelPosition(t){return{top:iw(t.top),left:iw(t.left),right:iw(t.right),bottom:iw(t.bottom)}}_findByComponent(t){return this._components.find(r=>r===t)??null}_findById(t){return this._components.find(({id:r})=>r===t)??null}_findByNode(t){return this._components.find(({node:r})=>r===t)??null}_getComponentsAtPosition(t,r){const i=this._positionNameToContainerLookup[t];return Array.prototype.slice.call(i.children).map(n=>this._findByNode(n)).filter(Js).filter(n=>{var s;return r.includeInternal||!((s=this._componentMap.get(n))!=null&&s.internal)}).map(({widget:n,node:s})=>n??s)}};l([c()],$o.prototype,"_locale",void 0),l([c()],$o.prototype,"container",null),l([c()],$o.prototype,"height",null),l([c({value:fJ})],$o.prototype,"padding",null),l([Ne("padding")],$o.prototype,"castPadding",null),l([c()],$o.prototype,"view",void 0),l([c()],$o.prototype,"width",null),$o=l([$("esri.views.ui.UI")],$o);const O2e=$o,k2e="randomUUID"in crypto;function Gk(){if(k2e)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=r=>e[r].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function SFe(){return`{${Gk().toUpperCase()}}`}function P2e(){return`{${Gk()}}`}function N2e(e){const t=e.toUpperCase();return e[0]!=="{"?`{${t}}`:t}const L2e={handleInterceptedEvent:(e,t,r,i)=>(e.scheduleRender(),t.properties[`on${i.type}`].apply(t.properties.bind||r,[i]))},F2e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}},D2e=e=>({...F2e,...e}),j2e=(e,t)=>{const r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r},V2e=(e,t)=>e.find(t),PD=(e,t,r=!1)=>{let i=e;return t.forEach((n,s)=>{const o=i!=null&&i.children?V2e(i.children,a=>a.domNode===n):void 0;r&&!o&&s!==t.length-1||(i=o)}),i},U2e=e=>{let t;const r={...L2e,...e},i=D2e(r),n=i.performanceLogger;let s,o=!0,a=!1;const u=[],d=[],h=(m,y,g)=>{var w;let v;i.eventHandlerInterceptor=(b,T,x,M)=>function(I){let O;n("domEvent",I);const P=j2e(I.currentTarget,v.domNode),z=P.some(W=>{var ee;return customElements.get((ee=W==null?void 0:W.tagName)==null?void 0:ee.toLowerCase())});if(I.eventPhase===Event.CAPTURING_PHASE||!z)P.reverse(),O=PD(v.getLastRender(),P);else{const W=I.composedPath(),ee=W.slice(W.indexOf(I.currentTarget),W.indexOf(v.domNode)).reverse();O=PD(v.getLastRender(),ee,!0)}let U;return O&&(U=r.handleInterceptedEvent(t,O,this,I)),n("domEventProcessed",I),U},(w=r.postProcessProjectionOptions)==null||w.call(r,i);const _=g();v=m(y,_,i),i.eventHandlerInterceptor=void 0,u.push(v),d.push(g),r.afterFirstVNodeRendered&&r.afterFirstVNodeRendered(v,_)};let f=()=>{if(s=void 0,o){o=!1,n("renderStart",void 0);for(let m=0;m<u.length;m++){const y=d[m]();n("rendered",void 0);try{u[m].update(y)}catch(g){console.error(g)}n("patched",void 0)}n("renderDone",void 0),o=!0}};return r.modifyDoRenderImplementation&&(f=r.modifyDoRenderImplementation(f,u,d)),t={renderNow:f,scheduleRender:()=>{s||a||(s=requestAnimationFrame(f))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,t.scheduleRender()},append:(m,y)=>{h(Ru.append,m,y)},insertBefore:(m,y)=>{h(Ru.insertBefore,m,y)},merge:(m,y)=>{h(Ru.merge,m,y)},replace:(m,y)=>{h(Ru.replace,m,y)},detach:m=>{for(let y=0;y<d.length;y++)if(d[y]===m)return d.splice(y,1),u.splice(y,1)[0];throw new Error("renderFunction was not found")}},t};let mJ;function z2e(){try{iU(".")}catch{nU(ji(Ve(mJ)))}}function Cp(e){var r;const t=[];for(const i of Object.keys(e))customElements.get(`calcite-${i}`)||t.push((r=e[i])==null?void 0:r.call(e));return t.length>0?Promise.all(t):null}mJ="components/assets";const yJ=Symbol("widget"),gJ=Symbol("widget-test-data"),G2e=[],B2e={},QS=new WeakMap;function vJ(e,t){let r=t.children;if(r!=null&&r.length)for(let n=0;n<r.length;++n)r[n]=vJ(e,r[n]);else r=G2e;const i=t.vnodeSelector;if(XS(i)){const n=t.properties||B2e,s=n.key||i,o={key:s,afterCreate:q2e,afterUpdate:H2e,afterRemoved:wJ,parentWidget:e,widgetConstructor:i,widgetProperties:{...n,key:s,children:r}};return{vnodeSelector:i.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return t}function q2e(e,t,r,{parentWidget:i,widgetConstructor:n,widgetProperties:s}){var a;const o=new n(s);o.container=e,QS.set(e,o),(a=o.afterCreate)==null||a.call(o,o,e),i.addHandles(Be(()=>wJ(e))),queueMicrotask(()=>{o[gJ].projector.renderNow()})}function H2e(e,t,r,{widgetProperties:i}){var s;const n=QS.get(e);n&&(n.set(i),(s=n.afterUpdate)==null||s.call(n,n,e))}function wJ(e){var r;const t=QS.get(e);t&&((r=t.afterRemoved)==null||r.call(t,t,e),t.destroy(),QS.delete(e))}function XS(e){return typeof e=="function"&&e[yJ]}const ND=new Set;function W2e(e){ND.add(e),e.finally(()=>ND.delete(e))}var _J;const Z2e="esri.widgets.Widget";let J2e=0;function bJ(e,t){const r=Object.prototype.hasOwnProperty;for(const i in t)r.call(t,i)&&r.call(e,i)&&(e[i]!=null&&t[i]!=null&&typeof e[i]=="object"&&typeof t[i]=="object"?bJ(e[i],t[i]):e[i]=t[i]);return e}const K2e=U2e({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(i,n,s,o)=>{const a=t==null?void 0:t(i,n,s,o),u=r.test(i);if(!((i=i.replace(r,"")).toLowerCase()in s)||u){const d=i[2].toLowerCase()+i.slice(3),h=y=>a==null?void 0:a.call(s,y);s.addEventListener(d,h,u);const f=()=>s.removeEventListener(d,h,u),m=o.afterRemoved;o.afterRemoved=y=>{m==null||m(y),f()}}return a}},handleInterceptedEvent(e,t,r,i){const{eventPhase:n,type:s}=i,o=n===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const u=t.properties;(u&&a in u||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,u&&a in u))&&(gq(),e.scheduleRender(),u[a].call(u.bind||r,i))}});let Tx=!1,Kt=class extends Fv(cs.EventedAccessor){constructor(t,r){super(t,r),this._attached=!1,this._projector=K2e,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=R2(async()=>{var u;if((u=this._messageBundleProps)!=null&&u.length){const d=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:h,propertyName:f})=>{if(this.destroyed)return;let m=await J2(h);this.uiStrings&&Object.keys(this.uiStrings)&&(m=bJ(C(m),this.uiStrings)),this[f]=m}));if(this.destroyed)return;for(const h of d)h.status==="rejected"&&j.getLogger(this).error("widget-intl:locale-error",this.declaredClass,h.reason)}await this.loadLocale()}),z2e();const i="esri-widget-uid-"+Gk(),n=this.render.bind(this);this._trackingTarget=new O2(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const s=()=>({vnodeSelector:"div",properties:{key:`${i}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{var f,m;if(!this._readyForTrueRender||this.destroyed)return null;const u=n()??s(),d=u.properties??(u.properties={});if(d.key??(d.key=i),XS(u.vnodeSelector)){if(!this.visible)return s()}else this.visible?d.styles||(d.styles={}):(d.class="",d.styles={display:"none"}),(f=d.styles).display??(f.display="");let h=0;return(m=u.children)==null||m.forEach(y=>{var g;XS(y.vnodeSelector)||(y.properties??(y.properties={}),(g=y.properties).key??(g.key=`${this.id}--${h++}`))}),vJ(this,u)};this.render=()=>{if(Tx)return o();let u=Ihe(this)??null;if(u)return u;this._trackingTarget.clear(),Tx=!0;try{u=cl(this._trackingTarget,o)}catch(d){throw j.getLogger(this).error(d),d}finally{Tx=!1}return u&&Che(this,u),u};const a=this.beforeFirstRender();a?this._resourcesFetch=a.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),W2e(this._resourcesFetch)}normalizeCtorArgs(t,r){const i={...t};return r&&(i.container=r),i}postInitialize(){}beforeFirstRender(){var r;const t=this.loadDependencies();return(r=this._messageBundleProps)!=null&&r.length||t?Promise.all([t,this._loadLocale()]).then(()=>{}).catch(LL):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(st(this._trackingTarget),st(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,GT(this))}set container(t){this._get("container")||this._set("container",t)}castContainer(t){return YO(t)}get domNode(){return this.container}set domNode(t){this.container=t}get icon(){return null}set icon(t){this._overrideIfSome("icon",t)}get id(){var t;return this._get("id")||((t=this.container)==null?void 0:t.id)||Date.now().toString(16)+"-widget-"+J2e++}set id(t){t&&this._set("id",t)}get label(){return this.declaredClass.split(".").pop()}set label(t){this._overrideIfSome("label",t)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(t){this._set("visible",t)}get[(_J=yJ,gJ)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(GT(this),this._projector.scheduleRender())}own(t){Iz(j.getLogger(this),"`Widget.own()` is deprecated in favor of 'Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(t)}classes(...t){return Ahe.apply(this,t)}renderNow(){GT(this),this._projector.renderNow()}_postInitialize(){var r;if(this.destroyed)return;this.scheduleRender(),(r=this._delegatedEventNames)!=null&&r.length&&this.addHandles(ce(()=>this.viewModel,(i,n)=>{n&&this.removeHandles("delegated-events"),i&&A2(i)&&this.addHandles(this._delegatedEventNames.map(s=>xv(i,s,o=>{this.emit(s,o)})),"delegated-events")},dn)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(LL),this.scheduleRender()};this.addHandles([z2(t),ce(()=>this.uiStrings,t),as(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0})])}_attach(t){t&&(this._projector.merge(t,this.render),this._attached=!0)}_detach(t){var r;this._attached&&(this._projector.detach(this.render),this._attached=!1),(r=t==null?void 0:t.parentNode)==null||r.removeChild(t)}};Kt[_J]=!0,Kt.vnodeSelector="div",l([c()],Kt.prototype,"_readyForTrueRender",void 0),l([c({value:null})],Kt.prototype,"container",null),l([Ne("container")],Kt.prototype,"castContainer",null),l([c()],Kt.prototype,"icon",null),l([c()],Kt.prototype,"id",null),l([c()],Kt.prototype,"label",null),l([c()],Kt.prototype,"renderable",null),l([c()],Kt.prototype,"uiStrings",void 0),l([c()],Kt.prototype,"viewModel",void 0),l([c({value:!0})],Kt.prototype,"visible",null),l([c()],Kt.prototype,"key",void 0),l([c()],Kt.prototype,"children",void 0),l([c()],Kt.prototype,"afterCreate",void 0),l([c()],Kt.prototype,"afterUpdate",void 0),l([c()],Kt.prototype,"afterRemoved",void 0),Kt=l([$(Z2e)],Kt);const ta=Kt,Y2e=new Map;function Q2e(e){return Y2e.get(e)}function LD(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function X2e(e,t){return e.length!==t.length||e.some((r,i)=>r.text!==t[i].text)}function vy(e,t,r){!r||!t||e.find(i=>i.layerView===t&&i.text===r)||e.push({text:r,layerView:t})}function e$e(e){return e.type==="bing-maps"}const la=[];let hh=class extends te{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Y,this.view=null,this._allLayerViewsChange=r=>{var n;this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const i=(n=this.view)==null?void 0:n.allLayerViews;i&&(this.addHandles(i.map(s=>ce(()=>{var o;return[s.suspended,(o=s.layer)==null?void 0:o.attributionVisible]},()=>this._updateAttributionItems())).toArray(),"suspension"),i.forEach(s=>{s.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(s.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),r!=null&&r.removed&&r.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this.addHandles([pl(()=>{var r;return(r=this.view)==null?void 0:r.allLayerViews},"change",r=>this._allLayerViewsChange(r),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),as(()=>{var r;return((r=this.view)==null?void 0:r.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var t;return(t=this.view)!=null&&t.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const t=this.view,r=t==null?void 0:t.allLayerViews;if(la.length=0,!t||!r)return void this._clear();r.forEach(n=>{var a,u;if(n.suspended||!((a=n.layer)!=null&&a.attributionVisible))return;const s=n.layer;if(LD(s,"user"))return void vy(la,n,s.copyright);if(s.hasAttributionData){if(this._fetchedAttributionData.has(n)){const d=this._fetchedAttributionData.get(n);return void(d?vy(la,n,this._getDynamicAttribution(d,t,s)):LD(s)&&vy(la,n,s.copyright))}return void this._fetchAttributionData(n)}const o="portalItem"in s?(u=s.portalItem)==null?void 0:u.accessInformation:void 0;vy(la,n,o||s.copyright)});const i=r.find(n=>{var s;return((s=n.layer)==null?void 0:s.type)==="integrated-mesh-3dtiles"});if(this.view&&i){const n=Q2e(this.view);if(n){const s=n.getAttributionText();for(let o=0;o<s.length;++o)vy(la,i,s[o])}}X2e(this.items,la)&&(this.items.removeAll(),this.items.addMany(la)),la.length=0,this.notifyChange("state")}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const r=await U2(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const i=r.ok?this._createContributionIndex(r.value,e$e(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,i)}this._updateAttributionItems()}_createContributionIndex(t,r){const i=t.contributors,n={};if(!i)return n;for(let s=0;s<i.length;s++){const o=i[s],a=o.coverageAreas;if(!a)return;for(const u of a){const d=u.bbox,h=u.zoomMin-(r&&u.zoomMin?1:0),f=u.zoomMax-(r&&u.zoomMax?1:0),m=new qe({xmin:d[1],ymin:d[0],xmax:d[3],ymax:d[2],spatialReference:me.WGS84}),y={extent:il(m),attribution:o.attribution||"",score:u.score!=null?u.score:100,id:s};for(let g=h;g<=f;g++)n[g]??(n[g]=[]),n[g].push(y)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(t,r,i){var h;const{extent:n,scale:s}=r;let o=((h=i.tileInfo)==null?void 0:h.scaleToZoom(s))??0;if(o=Math.min(t.maxKey??0,Math.round(o)),!n||o==null||o<=-1)return"";const a=t[o],u=D2(n.center.clone().normalize(),me.WebMercator),d=new Set;return a?a.filter(f=>{const m=f.id,y=!d.has(m)&&u&&f.extent&&Cv(f.extent,u);return y&&d.add(m),y}).sort((f,m)=>m.score-f.score||f.objectId-m.objectId).map(f=>f.attribution).join(", "):""}};l([c({readOnly:!0,type:Y})],hh.prototype,"items",void 0),l([c({readOnly:!0})],hh.prototype,"state",null),l([c()],hh.prototype,"view",void 0),hh=l([$("esri.widgets.Attribution.AttributionViewModel")],hh);const SJ=hh,Te={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"};function nC(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:r$e(e[t])}}}function t$e(e){const t=e==null?void 0:e.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function r$e(e){return function(t,...r){t$e(t)?wq(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...r)}}function Ji(e){return(t,r)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}}var i$e=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},$J=function(e,t){for(var r=0,i=e.length;r<i;r++){var n=e[r];Array.isArray(n)?$J(n,t):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=i$e(n)),t.push(n))}},n$e=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(r.length===1&&typeof r[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var n=[];return $J(r,n),{vnodeSelector:e,properties:t||void 0,children:n,text:void 0,domNode:null}};function H(e,t,...r){return typeof e!="function"||XS(e)?n$e(e,t,...r):e(t,...r)}function xFe(...e){return e}const zp="esri-attribution",Gp={base:zp,poweredBy:`${zp}__powered-by`,sources:`${zp}__sources`,open:`${zp}--open`,sourcesOpen:`${zp}__sources--open`,link:`${zp}__link`};let mi=class extends ta{constructor(t,r){super(t,r),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(i=>i.forEach(({target:n})=>this._checkSourceTextOverflow(n))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new SJ}initialize(){this.addHandles(pl(()=>{var t;return(t=this.viewModel)==null?void 0:t.items},"change",()=>this.scheduleRender()))}destroy(){var t;(t=this._resizeObserver)==null||t.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((t,r)=>(t.includes(r.text)||t.push(r.text),t),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t={[Gp.open]:this._isOpen};return H("div",{bind:this,class:this.classes(Gp.base,Te.widget,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return H("div",{class:Gp.poweredBy},"Powered by"," ",H("a",{class:Gp.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const t=this._isOpen,r=this._isInteractive,i=r?0:void 0,{attributionText:n}=this,s={[Gp.sourcesOpen]:t,[Te.interactive]:r};return H("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Gp.sources,s),innerHTML:n,tabIndex:i})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let r=!1;const{clientHeight:i,clientWidth:n,scrollWidth:s}=t,o=s>n,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(r=!0),this._isOpen){const u=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,u&&(this._isOpen=!1,r=!0)}r&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};l([c()],mi.prototype,"_isOpen",void 0),l([c()],mi.prototype,"_isInteractive",null),l([c()],mi.prototype,"_attributionTextOverflowed",void 0),l([c()],mi.prototype,"_prevSourceNodeHeight",void 0),l([c({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],mi.prototype,"attributionText",null),l([c()],mi.prototype,"icon",null),l([c()],mi.prototype,"itemDelimiter",void 0),l([c()],mi.prototype,"label",null),l([c(),Ji("esri/widgets/Attribution/t9n/Attribution")],mi.prototype,"messages",void 0),l([c()],mi.prototype,"view",null),l([c({type:SJ})],mi.prototype,"viewModel",void 0),l([nC()],mi.prototype,"_toggleState",null),mi=l([$("esri.widgets.Attribution")],mi);const s$e=mi;function o$e(){const e=L("mapview-essential-goto-duration");return e==null?e:e}function a$e(e){var t,r;return((t=e==null?void 0:e.spatialReference)==null?void 0:t.isWebMercator)||((r=e==null?void 0:e.spatialReference)==null?void 0:r.isGeographic)||!1}const E$=e=>{let t=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:i}=this;return Cz(i),this.goToOverride?this.goToOverride(i,r):i.goTo(r.target,r.options)}};return l([c()],t.prototype,"goToOverride",void 0),l([c()],t.prototype,"view",void 0),t=l([$("esri.widgets.support.GoTo")],t),t};let ad=class extends E$(te){constructor(t){super(t),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(ce(()=>this.view,this._updateRotationWatcher,zt))}destroy(){this.view=null}get canShowNorth(){return a$e(this.view)}get state(){var t;return!((t=this.view)!=null&&t.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var t,r;(t=this.view)!=null&&t.ready&&(((r=this.view)==null?void 0:r.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:o$e()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(t){t!=null&&this._set("orientation",{z:t})}_updateForCamera(t){if(!t)return;const r=-t.heading;this._set("orientation",{x:0,y:0,z:r})}_updateRotationWatcher(t){this.removeAllHandles(),t&&this.addHandles(t.type==="2d"?ce(()=>t==null?void 0:t.rotation,this._updateForRotation,zt):ce(()=>t==null?void 0:t.camera,this._updateForCamera,zt))}};l([c({readOnly:!0})],ad.prototype,"canShowNorth",null),l([c({readOnly:!0})],ad.prototype,"orientation",void 0),l([c({readOnly:!0})],ad.prototype,"state",null),l([c()],ad.prototype,"view",void 0),ad=l([$("esri.widgets.Compass.CompassViewModel")],ad);const TJ=ad,FD="esri-compass",DD={base:FD,iconContainer:`${FD}__icon-container`};let $a=class extends ta{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new TJ,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=i=>({transform:`rotateZ(${i.z}deg)`})}loadDependencies(){return Cp({button:()=>D(()=>import("./calcite-button-CbVluA9b.js"),__vite__mapDeps([216,217,218,219,220,221,222,223,224,225]),import.meta.url),icon:()=>D(()=>import("./calcite-icon-B-VB2seh.js"),[],import.meta.url)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:r}=this.viewModel,{messages:i}=this;return H("div",{class:this.classes(DD.base,Te.widget)},H("calcite-button",{class:Te.widgetButton,disabled:r==="disabled",kind:"neutral",label:i.reset,onclick:this._reset,round:!0,scale:"s",title:i.reset},H("div",{"aria-hidden":"true",class:DD.iconContainer,title:i.reset},H("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(t)}))))}};l([c()],$a.prototype,"goToOverride",null),l([c()],$a.prototype,"icon",null),l([c()],$a.prototype,"label",null),l([c(),Ji("esri/widgets/Compass/t9n/Compass")],$a.prototype,"messages",void 0),l([c()],$a.prototype,"view",null),l([c({type:TJ})],$a.prototype,"viewModel",void 0),$a=l([$("esri.widgets.Compass")],$a);const l$e=$a,jD="esri-navigation-toggle",VD={base:jD,isLayoutHorizontal:`${jD}--horizontal`};let fh=class extends te{constructor(t){super(t),this._navigationMode="pan",this.view=null}initialize(){this.addHandles(as(()=>{var t;return(t=this.view)==null?void 0:t.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var t,r;return(t=this.view)!=null&&t.ready&&((r=this.view)==null?void 0:r.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(t){this._navigationMode=t,this._setNavigationMode()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_setNavigationMode(){var r;const t=(r=this.view)==null?void 0:r.inputManager;t&&(t.primaryDragAction=this._navigationMode==="pan"?"pan":"rotate")}};l([c({readOnly:!0})],fh.prototype,"state",null),l([c()],fh.prototype,"_navigationMode",void 0),l([c()],fh.prototype,"view",void 0),fh=l([$("esri.widgets.NavigationToggle.NavigationToggleViewModel")],fh);const xJ=fh;let Ta=class extends ta{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new xJ,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var n;const i=((n=this.viewModel)==null?void 0:n.navigationMode)==="pan"?this._rotateButton:this._panButton;Nhe(i),this.toggle()}}loadDependencies(){return Cp({button:()=>D(()=>import("./calcite-button-CbVluA9b.js"),__vite__mapDeps([216,217,218,219,220,221,222,223,224,225]),import.meta.url)})}get icon(){return"move"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){var n,s;const t=((n=this.viewModel)==null?void 0:n.state)==="disabled",r=((s=this.viewModel)==null?void 0:s.navigationMode)==="pan",i=this.messages.toggle;return H("div",{class:this.classes(VD.base,Te.widget,{[VD.isLayoutHorizontal]:this.layout==="horizontal"})},H("calcite-button",{afterCreate:o=>{this._panButton=o},appearance:r?"outline-fill":"solid",class:Te.widgetButton,disabled:t,iconStart:"move",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?void 0:-1,title:i}),H("calcite-button",{afterCreate:o=>{this._rotateButton=o},appearance:r?"solid":"outline-fill",class:Te.widgetButton,disabled:t,iconStart:"rotate",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?-1:void 0,title:i}))}};l([c()],Ta.prototype,"icon",null),l([c()],Ta.prototype,"label",null),l([c({value:"vertical"})],Ta.prototype,"layout",null),l([c(),Ji("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Ta.prototype,"messages",void 0),l([c()],Ta.prototype,"view",null),l([c({type:xJ})],Ta.prototype,"viewModel",void 0),Ta=l([$("esri.widgets.NavigationToggle")],Ta);const u$e=Ta;let ld=class extends te{get canZoomIn(){var i,n,s;if(!((i=this.view)==null?void 0:i.ready))return!1;const r=(s=(n=this.view)==null?void 0:n.constraints)==null?void 0:s.effectiveMaxScale;return r===0||this._scale>r}get canZoomOut(){var n;const{view:t}=this;if(!(t==null?void 0:t.ready))return!1;const i=(n=t.constraints)==null?void 0:n.effectiveMinScale;return i===0||this._scale<i}get _scale(){var r,i,n;const t=(i=(r=this.view)==null?void 0:r.animation)==null?void 0:i.target;return(t&&"then"in t||t==null?void 0:t.scale)??((n=this.view)==null?void 0:n.scale)??0}};l([c({readOnly:!0})],ld.prototype,"canZoomIn",null),l([c({readOnly:!0})],ld.prototype,"canZoomOut",null),l([c()],ld.prototype,"view",void 0),l([c()],ld.prototype,"_scale",null),ld=l([$("esri.widgets.Zoom.ZoomConditions2D")],ld);const c$e=ld;let mh=class extends te{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};l([c({readOnly:!0})],mh.prototype,"canZoomIn",null),l([c({readOnly:!0})],mh.prototype,"canZoomOut",null),l([c()],mh.prototype,"view",void 0),mh=l([$("esri.widgets.Zoom.ZoomConditions3D")],mh);const d$e=mh;let Jl=class extends te{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var t;return this._zoomConditions!=null&&((t=this._zoomConditions)==null?void 0:t.canZoomOut)}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}set view(t){t?t.type==="2d"?this._zoomConditions=new c$e({view:t}):t.type==="3d"&&(this._zoomConditions=new d$e({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){if(!this.canZoomIn)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomIn():iS(t.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomOut():iS(t.goTo({zoomFactor:.5}))}};l([c()],Jl.prototype,"_zoomConditions",void 0),l([c()],Jl.prototype,"canZoomIn",null),l([c()],Jl.prototype,"canZoomOut",null),l([c({readOnly:!0})],Jl.prototype,"state",null),l([c()],Jl.prototype,"view",null),Jl=l([$("esri.widgets.Zoom.ZoomViewModel")],Jl);const EJ=Jl,UD={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let xa=class extends ta{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new EJ,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return Cp({button:()=>D(()=>import("./calcite-button-CbVluA9b.js"),__vite__mapDeps([216,217,218,219,220,221,222,223,224,225]),import.meta.url)})}get icon(){return"magnifying-glass-plus"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){const t={[UD.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:r,canZoomOut:i}=this.viewModel,{zoomIn:n,zoomOut:s}=this.messages;return H("div",{class:this.classes(UD.base,Te.widget,t)},H("calcite-button",{class:Te.widgetButton,disabled:!r,iconStart:"plus",kind:"neutral",label:n,onclick:this.zoomIn,title:n}),H("calcite-button",{class:Te.widgetButton,disabled:!i,iconStart:"minus",kind:"neutral",label:s,onclick:this.zoomOut,title:s}))}};l([c()],xa.prototype,"icon",null),l([c()],xa.prototype,"label",null),l([c({value:"vertical"})],xa.prototype,"layout",null),l([c(),Ji("esri/widgets/Zoom/t9n/Zoom")],xa.prototype,"messages",void 0),l([c()],xa.prototype,"view",null),l([c({type:EJ})],xa.prototype,"viewModel",void 0),xa=l([$("esri.widgets.Zoom")],xa);const p$e=xa;function h$e(e){return(e==null?void 0:e.view)!==void 0}let j_=class extends O2e{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=r=>{this.components.forEach(i=>{const n=this._find(i),s=n==null?void 0:n.widget;h$e(s)&&(s.view=r)})},this._componentsWatcher=(r,i)=>{this._removeComponents(i),this._addComponents(r),this._adjustPadding(r)}}initialize(){this.addHandles([ce(()=>this.components,this._componentsWatcher,zt),ce(()=>this.view,this._updateViewAwareWidgets,zt)])}_add(t,r,i,n,s){let o=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;o=this._createComponent(t)}super._add(o,r,i,n,s)}_removeComponents(t){t.forEach(r=>{const i=this._find(r);i&&(this.remove(i),i.destroy())})}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:r}=this.padding;this.padding=r}}_addComponents(t){this.constructed&&t.forEach(r=>this.add(this._createComponent(r),this._defaultPositionLookup[r]))}_createComponent(t){const r=this._createWidget(t);return new D_({id:t,node:r})}_createWidget(t){const r=this.view;switch(t){case"attribution":return new s$e({view:r});case"compass":return new l$e({view:r});case"navigation-toggle":return new u$e({view:r});case"zoom":return new p$e({view:r})}}};l([c()],j_.prototype,"components",void 0),j_=l([$("esri.views.ui.DefaultUI")],j_);const MJ=j_;let V_=class extends MJ{constructor(t){super(t),this.components=["attribution","zoom"]}};l([c()],V_.prototype,"components",void 0),V_=l([$("esri.views.ui.2d.DefaultUI2D")],V_);const IJ=V_;let CJ=class sC{constructor(t,r,i=""){this.major=t,this.minor=r,this._context=i}lessThan(t,r){return this.major<t||t===this.major&&this.minor<r}greaterEqual(t,r){return!this.lessThan(t,r)}validate(t){if(this.major!==t.major){const r=this._context&&this._context+":",i=this._context&&this._context+" ";throw new R(r+"unsupported-version",`Required major ${i}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new sC(this.major,this.minor,this._context)}static parse(t,r=""){const[i,n]=t.split("."),s=/^\s*\d+\s*$/;if(!(i!=null&&i.match)||!s.test(i))throw new R((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!(n!=null&&n.match)||!s.test(n))throw new R((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const o=parseInt(i,10),a=parseInt(n,10);return new sC(o,a,r)}},jf=class extends CJ{constructor(t,r){super(t,r,"webmap")}};function xx(e){return e!=null&&typeof e=="object"&&"declaredClass"in e&&e.declaredClass==="esri.WebMap"}const AJ=new jf(2,32);var oC;let U_=oC=class extends N{constructor(e){super(e),this.color=new le([0,0,0,1])}clone(){return new oC(C({color:this.color}))}};l([c({type:le,json:{write:!0}})],U_.prototype,"color",void 0),U_=oC=l([$("esri.webmap.background.ColorBackground")],U_);const M$=U_;let RJ,OJ,kJ,PJ,NJ,LJ,FJ;async function f$e(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:r,MapViewNavigation:i,MagnifierView2D:n,GridView2D:s,Stage:o}]=await Promise.all([D(()=>import("./webglDeps-C3pr28IQ.js"),__vite__mapDeps([146,66,65,120,147,122]),import.meta.url),D(()=>import("./mapViewDeps-CwWdWsPX.js"),__vite__mapDeps([148,67,68,13,69,70,64,65,66,39,71,33,149,122,76,150,147,84,151,110,109,75,15,16,152,101,73,74,108,146,120,153,79,154,63,24,19,20,10,155,118,116,103,119,156,53,157,77,72,158,159,160,161,162,163,115,164]),import.meta.url)]);OJ=e,kJ=t,PJ=r,NJ=i,LJ=n,FJ=s,RJ=o}let ye=class extends Npe(cfe(Khe(Cve))){constructor(t){super(t),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new B0({getCollections:()=>{var r,i;return[(r=this.basemapView)==null?void 0:r.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.goToManager=new N_({view:this}),this.graphicsView=null,this.stateManager=new ei({constraints:new xZ({view:this})}),this.stationaryManager=new fg,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.frameTask=new A_e(this),this.floors=new Y,this.grid=null,this.highlights=tJ(),this.inputManager=new aSe({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new pJ,this.type="2d",this.view2dType=null,this.ui=new IJ,this.test={takeScreenshot:async r=>h2e(this._getScreenshotView(r),r)},this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([ce(()=>this.viewpoint,()=>this.stationaryManager.flip(),Jo),this.on("resize",r=>this.stateManager.resize(r.width,r.height))]),zde()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=st(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new mSe(this.featuresTilingScheme)}get constraintsInfo(){var i,n;const t=(i=this.defaultsFromMap)==null?void 0:i.tileInfo,r=this.spatialReference;return{lods:(n=t==null?void 0:t.spatialReference)!=null&&n.equals(r)?t.lods:null,spatialReference:r}}get state(){return this.stateManager.state}get initialExtentRequired(){var a;if(!this.stateManager)return!1;const{scale:t,constraints:r,center:i,viewpoint:n,extent:s}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((a=this.map.initialViewProperties)!=null&&a.viewpoint))&&!s&&(r!=null&&r.effectiveLODs||(o=-1),(!i||t===0&&o===-1)&&((n==null?void 0:n.targetGeometry)==null||n.targetGeometry.type!=="extent"&&!n.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const t=this._getDefaultViewpoint();if(!t)return!1;const r=t.targetGeometry,i=this.spatialReference;return ZB(r.spatialReference,i)}set animation(t){const r=this._get("animation");if(t===r)return;if(r&&r.stop(),t!==this.animationManager.animation&&this.animationManager.stop(),!t||t.isFulfilled())return void this._set("animation",null);this._set("animation",t);const i=()=>{var n;this.destroyed||t===this._get("animation")&&(this._set("animation",null),(n=this.frameTask)==null||n.requestFrame())};t.when(i,i)}get background(){return xx(this.map)?this.map.initialViewProperties.background:null}set background(t){this._override("background",t)}get center(){var t;return((t=this.stateManager)==null?void 0:t.center)??null}set center(t){this.stateManager.center=t}get constraints(){var t;return(t=this.stateManager)==null?void 0:t.constraints}set constraints(t){t.view=this;const r=this.stateManager.constraints;this.stateManager.constraints=t,r==null||r.destroy()}get extent(){var t;return((t=this.stateManager)==null?void 0:t.extent)??null}set extent(t){this.stateManager.extent=t}get highlightOptions(){return YSe(this)}set highlightOptions(t){QSe(this,t)}get padding(){var t;return(t=this.stateManager)==null?void 0:t.padding}set padding(t){this.stateManager&&(this.stateManager.padding=t)}get rendering(){var t;return((t=this.stage)==null?void 0:t.renderRequested)??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(t){this.stateManager.resizeAlign=t}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(t){const{rotationEnabled:r}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=t,this.constraints.rotationEnabled=r}get scale(){var t;return((t=this.stateManager)==null?void 0:t.scale)??0}set scale(t){this.stateManager&&(this.stateManager.scale=t)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get tileInfo(){var t;return(t=this.featuresTilingScheme)==null?void 0:t.tileInfo}get updating(){var i,n,s,o;const t=!(!this.magnifier.visible||this.magnifier.position===null||!((i=this._magnifierView)!=null&&i.updatingHandles.updating)),r=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(a=>!a.destroyed&&!("layerViews"in a)&&a.updating===!0)||t);if(L("esri-2d-log-updating")){const a=this.allLayerViews.reduce((u,d)=>({...u,[`${d.layer.id}(${d.layer.type})`]:!d.destroyed&&!("layerViews"in d)&&d.updating}),{});console.log(`Updating MapView: ${r}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(n=this.layerViewManager)==null?void 0:n.updating}
-> labelManager.updating: ${(s=this.labelManager)==null?void 0:s.updating}
-> graphicsView.updating: ${(o=this.graphicsView)==null?void 0:o.updating}
-> allLayerViews: ${JSON.stringify(a)}
-> updatingMagnifier: ${t}
`)}return r}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(t){this.stateManager.viewpoint=t,this.frameTask.requestFrame()}get visibleArea(){const t=this.stateManager.visibleArea;return t&&new Zi({rings:[t.map(r=>[r[0],r[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(t){this.stateManager.zoom=t}get navigating(){var t;return((t=this.mapViewNavigation)==null?void 0:t.interacting)??!1}goTo(t,r){return this.goToManager.goTo(t,r)}async hitTest(t,r){return XSe(this,t,r)}async takeScreenshot(t){return p2e(this._getScreenshotView(t),t)}toMap(t){if(!this.ready)return null;const r=bW(t)?_W(this,t):t;return this.stateManager.toMap(r)}toScreen(t,r){return this.stateManager.toScreen(t,r)}on(t,r,i,n){return this.inputManager&&this.viewEvents.on(t,r,i,n)||super.on(t,r)}hasEventListener(t){return super.hasEventListener(t)||this.viewEvents.hasHandler(t)}whenLayerView(t){return super.whenLayerView(t)}graphicChanged(t){this.graphicsView&&this.graphicsView.graphicUpdateHandler(t)}whenReady(){return new Promise(t=>{this.ready?t(this):this._resolveWhenReady.push(t)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var t;return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||((t=this.defaultsFromMap)==null?void 0:t.spatialReference)||null}getDefaultTimeZone(){return xx(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return xx(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(t){return FF.hasLayerViewModule(t)}importLayerView(t){return FF.importLayerView(t)}pixelSizeAt(){return this.ready?this.resolution:(j.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(t){var d;const r=this.toMap(t),i=await this.hitTest(t),n=this.allLayerViews.toArray().filter(h=>h.clips.every(f=>XZ(this,f,t,r))).reverse(),s=new globalThis.Map(n.map(h=>[h.layer.uid,h])),o=[];let a=0,u=0;for(;a<i.results.length||u<n.length;){const h=i.results.at(a);if(h&&h.type!=="graphic"){++a;continue}const f=s.get((d=(h==null?void 0:h.layer)??(h==null?void 0:h.graphic.layer))==null?void 0:d.uid);if((!h||f)&&u<n.length&&n.at(u)!==f){const m=n.at(u);"fetchPopupFeaturesAtLocation"in m&&o.push({mapPoint:r,layerView:m}),++u}else h&&(o.push({graphic:h.graphic,layerView:f}),++a)}return{hits:o,location:r}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let t=S2e(this.type);if(L("safari")&&L("safari")<9&&(t=new R("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:L("safari")})),t!=null)throw j.getLogger(this).warn("#validate()",t.message),t}loadAsyncDependencies(){return f$e()}_getDefaultViewpoint(){var _;const{constraints:t,initialExtent:r,map:i,padding:n,size:s}=this;if(!t)return null;const o=i&&"initialViewProperties"in i?i.initialViewProperties:void 0,a=this.stateManager.getUserStartupOptions(this.size),u=o==null?void 0:o.viewpoint,d=((_=u==null?void 0:u.targetGeometry)==null?void 0:_.extent)??r,h=d==null?void 0:d.center,f=(u==null?void 0:u.rotation)??0,m=(u==null?void 0:u.scale)||d&&$$(d,[s[0]-n.left-n.right,s[1]-n.top-n.bottom]),y=a.center??h,g=a.rotation??f,v=a.scale??m;return y&&v?new dr({targetGeometry:y,scale:v,rotation:g}):null}_startup(){var a;this.timeline.begin("MapView Startup");const t=this._getDefaultViewpoint();this.stateManager.startup(t,this.size,this.spatialReference,(a=this.defaultsFromMap.extent)==null?void 0:a.center),this.graphics.owner=this;const r=new RJ(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=r,this._magnifierView=new LJ,this._magnifierView.magnifier=this.magnifier,this._gridView=new FJ;const i=new PJ({view:this});this._set("labelManager",i);const n=new b_e({view:this});this._set("animationManager",n);const s=new NJ({view:this,animationManager:n});this._set("mapViewNavigation",s),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),r.on("webgl-error",u=>this.fatalError=u.error),ce(()=>this.stationary,u=>r.stationary=u,dn),ce(()=>this.background,u=>{r.backgroundColor=u==null?void 0:u.color,this._magnifierView.backgroundColor=u==null?void 0:u.color},dn),ce(()=>this.magnifier,u=>this._magnifierView.magnifier=u,dn),ce(()=>this.grid,u=>this._gridView.grid=u,dn),ce(()=>this.renderingOptions,u=>r.renderingOptions=u,dn),ce(()=>this.highlights.items.map(u=>({name:u.name,options:{fillColor:u.options.color,haloColor:u.options.haloColor,fillOpacity:u.options.fillOpacity,haloOpacity:u.options.haloOpacity,haloWidth:u.options.haloWidth,haloBlur:u.options.haloBlur}})),()=>{r.highlightGradient=JSe(r.highlightGradient,this.highlights.items)},dn),ce(()=>this.state.id,()=>r.state=this.state,dn)],"map-view"),this._updateStageChildren();const o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach(u=>u(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(r=>{this.stage.addChild(r.container)});const t=this.graphicsView;this.stage.addChild(t.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const t=new D_e(kpe.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",t);const r=new OJ({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new kJ(t)});this._set("graphicsView",r)}_destroySpatialReferenceDependentProperties(){const t=this.graphicsView;this._set("graphicsView",null),t.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(t){var o;const{allLayerViews:r,padding:i,size:n,stage:s}=this;return{allLayerViews:r,backgroundColor:t!=null&&t.ignoreBackground?null:(o=this.background)==null?void 0:o.color,padding:i,size:n,stage:s}}_spatialReferenceChanged(t){if(this.ready){this.frameTask.stop();for(const r of this.allLayerViews)r.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(t),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const r of this.allLayerViews)r.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};ye.type="2d",l([c({readOnly:!0})],ye.prototype,"animationManager",void 0),l([c({constructOnly:!0})],ye.prototype,"deactivatedWebGLExtensions",void 0),l([c({constructOnly:!0})],ye.prototype,"debugWebGLExtensions",void 0),l([c({readOnly:!0})],ye.prototype,"featuresTilingScheme",void 0),l([c({readOnly:!0})],ye.prototype,"fullOpacity",void 0),l([c()],ye.prototype,"goToManager",void 0),l([c({readOnly:!0})],ye.prototype,"graphicsTileStore",null),l([c()],ye.prototype,"graphicsView",void 0),l([c()],ye.prototype,"stateManager",void 0),l([c()],ye.prototype,"constraintsInfo",null),l([c({readOnly:!0})],ye.prototype,"state",null),l([c()],ye.prototype,"initialExtentRequired",null),l([c()],ye.prototype,"labelManager",void 0),l([c({readOnly:!0})],ye.prototype,"mapViewNavigation",void 0),l([c({constructOnly:!0})],ye.prototype,"renderCanvas",void 0),l([c()],ye.prototype,"renderingOptions",void 0),l([c({constructOnly:!0})],ye.prototype,"supersampleScreenshotsEnabled",void 0),l([c({readOnly:!0})],ye.prototype,"supportsGround",void 0),l([c()],ye.prototype,"defaultsFromMapSettings",null),l([c({readOnly:!0})],ye.prototype,"typeSpecificPreconditionsReady",null),l([c()],ye.prototype,"animation",null),l([c({type:M$})],ye.prototype,"background",null),l([c()],ye.prototype,"center",null),l([c({type:xZ})],ye.prototype,"constraints",null),l([c()],ye.prototype,"extent",null),l([c()],ye.prototype,"floors",void 0),l([c()],ye.prototype,"grid",void 0),l([c({type:fp})],ye.prototype,"highlightOptions",null),l([c({type:Y.ofType(mf)})],ye.prototype,"highlights",void 0),l([c({readOnly:!0})],ye.prototype,"inputManager",void 0),l([c()],ye.prototype,"map",void 0),l([c()],ye.prototype,"padding",null),l([c({readOnly:!0})],ye.prototype,"rendering",null),l([c()],ye.prototype,"resizeAlign",null),l([c({readOnly:!0})],ye.prototype,"resolution",null),l([c()],ye.prototype,"rotation",null),l([c()],ye.prototype,"scale",null),l([c({constructOnly:!0})],ye.prototype,"spatialReferenceLocked",void 0),l([c()],ye.prototype,"stationary",null),l([c({readOnly:!0})],ye.prototype,"tileInfo",null),l([c({type:pJ,readOnly:!0})],ye.prototype,"timeline",void 0),l([c({readOnly:!0})],ye.prototype,"type",void 0),l([c({readOnly:!0})],ye.prototype,"updating",null),l([c({readOnly:!0})],ye.prototype,"view2dType",void 0),l([c()],ye.prototype,"viewpoint",null),l([c({readOnly:!0})],ye.prototype,"visibleArea",null),l([c()],ye.prototype,"zoom",null),l([c({readOnly:!0})],ye.prototype,"navigating",null),l([c(),Ne(e=>e instanceof MJ?e:E2(IJ,e))],ye.prototype,"ui",void 0),ye=l([$("esri.views.View2D")],ye);const m$e=ye;let z_=class extends m$e{constructor(t){super(t),this.view2dType="map"}};l([c({readOnly:!0})],z_.prototype,"view2dType",void 0),z_=l([$("esri.views.MapView")],z_);const y$e=z_;let g$e=class DJ{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(lM),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const r=new DJ,i=this._originStores[Oe.DEFAULTS];i&&i.forEach((n,s)=>{r.set(s,C(n),Oe.DEFAULTS)});for(let n=Oe.SERVICE;n<lM;n++){const s=this._originStores[n];s&&s.forEach((o,a)=>{t&&t.has(a)||r.set(a,C(o),n)})}return r}get(t,r){const i=r===void 0?this._values:this._originStores[r];return i?i.get(t):void 0}keys(t){const r=t==null?this._values:this._originStores[t];return r?[...r.keys()]:[]}set(t,r,i=Oe.USER){let n=this._originStores[i];if(n||(n=new Map,this._originStores[i]=n),n.set(t,r),!this._values.has(t)||this._propertyOriginMap.get(t)<=i){const s=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,i),s!==r}return!1}delete(t,r=Oe.USER){const i=this._originStores[r];if(!i)return;const n=i.get(t);if(i.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===r){this._values.delete(t);for(let s=r-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(t)){this._values.set(t,o.get(t)),this._propertyOriginMap.set(t,s);break}}}return n}has(t,r){const i=r===void 0?this._values:this._originStores[r];return!!i&&i.has(t)}revert(t,r){for(;r>0&&!this.has(t,r);)--r;const i=this._originStores[r],n=i==null?void 0:i.get(t),s=this._values.get(t);return this._values.set(t,n),this._propertyOriginMap.set(t,r),s!==n}originOf(t){return this._propertyOriginMap.get(t)||Oe.DEFAULTS}forEach(t){this._values.forEach(t)}};const jJ=e=>{let t=class extends e{constructor(...r){super(...r);const i=Wi(this),n=i.store,s=new g$e;i.store=s,Jz(i,n,s)}read(r,i){Yz(this,r,i)}getAtOrigin(r,i){const n=Ex(this),s=Iu(i);if(typeof r=="string")return n.get(r,s);const o={};return r.forEach(a=>{o[a]=n.get(a,s)}),o}originOf(r){return tS(this.originIdOf(r))}originIdOf(r){return Ex(this).originOf(r)}revert(r,i){const n=Ex(this),s=Iu(i),o=Wi(this);let a;a=typeof r=="string"?r==="*"?n.keys(s):[r]:r,a.forEach(u=>{o.invalidate(u),n.revert(u,s),o.commit(u)})}};return t=l([$("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function Ex(e){return Wi(e).store}let zD=class extends jJ(te){};zD=l([$("esri.core.ReadOnlyMultiOriginJSONSupport")],zD);const v$e=e=>{let t=class extends e{constructor(...r){super(...r)}clear(r,i="user"){return Mx(this).delete(r,Iu(i))}write(r,i){return e7(this,r=r||{},i),r}setAtOrigin(r,i,n){Wi(this).setAtOrigin(r,i,Iu(n))}removeOrigin(r){const i=Mx(this),n=Iu(r),s=i.keys(n);for(const o of s)i.originOf(o)===n&&i.set(o,i.get(o,n),Oe.USER)}updateOrigin(r,i){const n=Mx(this),s=Iu(i),o=Ks(this,r);for(let a=s+1;a<lM;++a)n.delete(r,a);n.set(r,o,s)}toJSON(r){return this.write({},r)}};return t=l([$("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function Mx(e){return Wi(e).store}const I$=e=>{let t=class extends v$e(jJ(e)){constructor(...r){super(...r)}};return t=l([$("esri.core.MultiOriginJSONSupport")],t),t};let aC=class extends I$(te){};aC=l([$("esri.core.MultiOriginJSONSupport")],aC);async function w$e(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return uf(e);const r=me.WGS84;return await KO(t,r),cc(e,r)}function _$e(e,t){if(!VJ(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function VJ(e,t){var r;return!!((r=e.typeKeywords)!=null&&r.includes(t))}function zFe(e){return VJ(e,UJ.HOSTED_SERVICE)}function b$e(e,t){const r=e.typeKeywords;if(r){const i=r.indexOf(t);i>-1&&r.splice(i,1)}}function GFe(e,t,r){r?_$e(e,t):b$e(e,t)}async function BFe(e){const t=e.clone().normalize();let r;if(t.length>1)for(const i of t)r?i.width>r.width&&(r=i):r=i;else r=t[0];return w$e(r)}const UJ={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer"};function GD(e){var u;const{portal:t,isOrgItem:r,itemControl:i}=e,n=(u=t.user)==null?void 0:u.privileges;let s=!n||n.includes("features:user:edit"),o=!!r&&!!(n!=null&&n.includes("features:user:fullEdit"));const a=i==="update"||i==="admin";return a?o=s=!0:o&&(s=!0),{features:{edit:s,fullEdit:o},content:{updateItem:a}}}let Kl=class extends N{constructor(t){super(t),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};l([c({type:String,json:{write:!0}})],Kl.prototype,"facilityIdField",void 0),l([c({type:String,json:{write:!0}})],Kl.prototype,"layerId",void 0),l([c({type:String,json:{write:!0}})],Kl.prototype,"nameField",void 0),l([c({type:String,json:{write:!0}})],Kl.prototype,"siteIdField",void 0),l([c({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Kl.prototype,"sublayerId",void 0),Kl=l([$("esri.layers.support.FacilityLayerInfo")],Kl);const S$e=Kl;let Is=class extends N{constructor(t){super(t),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};l([c({type:String,json:{write:!0}})],Is.prototype,"facilityIdField",void 0),l([c({type:String,json:{write:!0}})],Is.prototype,"layerId",void 0),l([c({type:String,json:{write:!0}})],Is.prototype,"levelIdField",void 0),l([c({type:String,json:{write:!0}})],Is.prototype,"levelNumberField",void 0),l([c({type:String,json:{write:!0}})],Is.prototype,"longNameField",void 0),l([c({type:String,json:{write:!0}})],Is.prototype,"shortNameField",void 0),l([c({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Is.prototype,"sublayerId",void 0),l([c({type:String,json:{write:!0}})],Is.prototype,"verticalOrderField",void 0),Is=l([$("esri.layers.support.LevelLayerInfo")],Is);const $$e=Is;let ud=class extends N{constructor(t){super(t),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};l([c({type:String,json:{write:!0}})],ud.prototype,"layerId",void 0),l([c({type:String,json:{write:!0}})],ud.prototype,"nameField",void 0),l([c({type:String,json:{write:!0}})],ud.prototype,"siteIdField",void 0),l([c({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],ud.prototype,"sublayerId",void 0),ud=l([$("esri.layers.support.SiteLayerInfo")],ud);const T$e=ud;let yh=class extends N{constructor(t){super(t),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};l([c({type:$$e,json:{write:!0}})],yh.prototype,"levelLayer",void 0),l([c({type:S$e,json:{write:!0}})],yh.prototype,"facilityLayer",void 0),l([c({type:T$e,json:{write:!0}})],yh.prototype,"siteLayer",void 0),yh=l([$("esri.support.MapFloorInfo")],yh);const x$e=yh;var Uo;(function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"})(Uo||(Uo={}));var lC;let gh=lC=class extends N{constructor(e){super(e),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new lC(C({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};l([c({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],gh.prototype,"activeRange",void 0),l([c({type:[Number],json:{write:!0}})],gh.prototype,"currentRangeExtent",void 0),l([c({type:[Number],json:{write:!0}})],gh.prototype,"fullRangeExtent",void 0),gh=lC=l([$("esri.webdoc.RangeInfo")],gh);const Bk=gh;var uC;let To=uC=class extends N{constructor(e){super(e),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new uC(C({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};l([c({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],To.prototype,"enabled",void 0),l([c({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],To.prototype,"longNames",void 0),l([c({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],To.prototype,"minimized",void 0),l([c({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],To.prototype,"pinnedLevels",void 0),l([c({type:String,json:{read:{source:"site"},write:{target:"site"}}})],To.prototype,"site",void 0),l([c({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],To.prototype,"facility",void 0),l([c({type:String,json:{read:{source:"level"},write:{target:"level"}}})],To.prototype,"level",void 0),To=uC=l([$("esri.webdoc.widgets.FloorFilter")],To);const E$e=To;var cC;const nw=new _e({slider:"slider",picker:"picker"});let vh=cC=class extends N{constructor(e){super(e),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new cC({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};l([c({type:nw.apiValues,nonNullable:!0,json:{type:nw.jsonValues,default:null,read:{reader:nw.read},write:{isRequired:!0,writer:nw.write}}})],vh.prototype,"interactionMode",void 0),l([c({type:ke,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const e=this.stopInterval!=null;return{enabled:!e,isRequired:!e}}}}})],vh.prototype,"numStops",void 0),l([c({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],vh.prototype,"stopInterval",void 0),vh=cC=l([$("esri.webdoc.widgets.Range")],vh);const M$e=vh,qk=mr()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let mg=class extends Me(N){constructor(t){super(t),this.unit="milliseconds",this.value=0}toMilliseconds(){return iH(this.value,this.unit,"milliseconds")}};l([X(qk,{nonNullable:!0})],mg.prototype,"unit",void 0),l([c({type:Number,json:{write:!0},nonNullable:!0})],mg.prototype,"value",void 0),mg=l([$("esri.time.TimeInterval")],mg);const hm=mg;var dC;let sr=dC=class extends N{constructor(e){super(e),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(e){return e?pr.fromArray(e):void 0}writeCurrentTimeExtent(e,t,r){e&&cr(r,e.toArray(),t)}readFullTimeExtent(e,t){const r=t.properties;if(!r)return;const i=r.endTime!=null?new Date(r.endTime):null,n=r.startTime!=null?new Date(r.startTime):null;return new pr({start:n,end:i})}writeFullTimeExtent(e,t){if(!e)return;const r=t.properties=t.properties||{},i=e.end,n=e.start;i&&(r.endTime=i!=null?i.getTime():null),n&&(r.startTime=n!=null?n.getTime():null)}readStopInterval(e,t,r){return e?hm.fromJSON({value:e.interval,unit:e.units},r):null}writeStopInterval(e,t,r,i){if(!e)return;const n=e.toJSON(i);cr("properties.timeStopInterval",{interval:n.value,units:n.unit},t)}readStops(e){return e!=null&&e.length?e.map(t=>new Date(t)):null}writeStops(e,t,r){e!=null&&e.length&&cr(r,e.map(i=>i.getTime()),t)}clone(){return new dC(C({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};l([c({type:pr,json:{type:[[ke,vm]],read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],sr.prototype,"currentTimeExtent",void 0),l([G("currentTimeExtent")],sr.prototype,"readCurrentTimeExtent",null),l([B("currentTimeExtent")],sr.prototype,"writeCurrentTimeExtent",null),l([c({type:pr,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],sr.prototype,"fullTimeExtent",void 0),l([G("fullTimeExtent")],sr.prototype,"readFullTimeExtent",null),l([B("fullTimeExtent")],sr.prototype,"writeFullTimeExtent",null),l([c({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],sr.prototype,"loop",void 0),l([c({type:ke,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var i;const e=!!this.stopInterval,t=!!((i=this.stops)!=null&&i.length),r=!(e||t);return{enabled:r,isRequired:r}}}}})],sr.prototype,"numStops",void 0),l([c({type:[1,2],nonNullable:!0,json:{type:ke,read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],sr.prototype,"numThumbs",void 0),l([c({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],sr.prototype,"stopDelay",void 0),l([c({type:hm,json:{read:{source:"properties.timeStopInterval"},write:{target:{"properties.timeStopInterval.interval":{type:Number},"properties.timeStopInterval.units":{type:qk.jsonValues.filter(e=>e!=="esriTimeUnitsUnknown")}},overridePolicy(){var r;const e=this.numStops!=null,t=!!((r=this.stops)!=null&&r.length);return{enabled:!t,isRequired:!(e||t)}}}}})],sr.prototype,"stopInterval",void 0),l([G("stopInterval")],sr.prototype,"readStopInterval",null),l([B("stopInterval")],sr.prototype,"writeStopInterval",null),l([c({type:[Date],json:{type:[ke],read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],sr.prototype,"stops",void 0),l([G("stops")],sr.prototype,"readStops",null),l([B("stops")],sr.prototype,"writeStops",null),sr=dC=l([$("esri.webdoc.widgets.TimeSlider")],sr);const I$e=sr;var pC;let wh=pC=class extends N{constructor(e){super(e),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new pC(C({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};l([c({type:M$e,json:{write:!0}})],wh.prototype,"range",void 0),l([c({type:I$e,json:{write:!0}})],wh.prototype,"timeSlider",void 0),l([c({type:E$e,json:{write:!0}})],wh.prototype,"floorFilter",void 0),wh=pC=l([$("esri.webdoc.Widgets")],wh);const C$e=wh,A$e={width:600,height:400},sw=1.5;function R$e(e,t){t=t||A$e;let{width:r,height:i}=t;const n=r/i;return n<sw?i=r/sw:n>sw&&(r=i*sw),r>e.width&&(i*=e.width/r,r=e.width),i>e.height&&(r*=e.height/i,i=e.height),{width:Math.round(r),height:Math.round(i)}}function O$e(e,t){return{...zJ(e,t),readResourcePaths:[]}}function KFe(e,t,r){const i=hr(e.itemUrl);return{...zJ(e,t),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:i?{rootPath:i.path,writtenUrls:[]}:null,resources:r?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function zJ(e,t){return{origin:t,url:hr(e.itemUrl),portal:e.portal||fr.getDefault(),portalItem:e}}let cd=class extends N{constructor(t){super(t),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const t=this.geometries.map(n=>n.toJSON()),r=this.geometries[0],i={};return i.outSR=vS(this.outSpatialReference),i.inSR=vS(r.spatialReference),i.geometries=JSON.stringify({geometryType:Rv(r),geometries:t}),this.transformation&&(i.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(i.transformForward=this.transformForward),i}};l([c()],cd.prototype,"geometries",void 0),l([c({json:{read:{source:"outSR"}}})],cd.prototype,"outSpatialReference",void 0),l([c()],cd.prototype,"transformation",void 0),l([c()],cd.prototype,"transformForward",void 0),cd=l([$("esri.rest.support.ProjectParameters")],cd);const Hk=cd,k$e=bt(Hk);async function GJ(e,t,r){t=k$e(t);const i=Hv(e),n={...i.query,f:"json",...t.toJSON()},s=t.outSpatialReference,o=Rv(t.geometries[0]),a=b$(n,r);return Le(i.path+"/project",a).then(({data:{geometries:u}})=>JW(u,o,s))}function P$e(e,t){var r;return t.resourceInfo?BJ(t,t.resourceInfo,{origin:e.origin}):(r=t.portalItem)!=null&&r.id?N$e(e,t,t.portalItem):Promise.resolve()}function BJ(e,t,r){const i={context:{...r,layerContainerType:"operational-layers"}};return e.portalItem&&(i.context.portal=e.portalItem.portal||fr.getDefault()),D(()=>import("./layersCreator-C4uZ9N3H.js"),__vite__mapDeps([136,137,138,139]),import.meta.url).then(({populateOperationalLayers:n})=>{const s=[],o=t.operationalLayers;o!=null&&o.length&&s.push(n(e.layers,o,i));const a={...i,context:{...i.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},u=t.tables;return u!=null&&u.length&&s.push(n(e.tables,u,a)),Promise.allSettled(s).then(()=>{})})}async function N$e(e,t,r){var o;if(await r.load().catch(a=>{throw new R(`${e.name}:load-portal-item`,"Failed to load portal item",{error:a})}),r.type!==e.itemType)throw new R(`${e.name}:invalid-portal-item`,`Invalid portal item type '${r.type}', expected '${e.itemType}'`,{type:r.type});const i=await r.fetchData();t.resourceInfo=i;const n=O$e(r,e.origin);await L$e(e,t,i,n),t.resourceReferences={portalItem:r,paths:n.readResourcePaths};const s=await D$e(t.initialViewProperties,r,j.getLogger(t));if(s){const a=((o=t.initialViewProperties)==null?void 0:o.clone())??e.createInitialViewProperties();a.viewpoint=s,t.initialViewProperties=a}}function L$e(e,t,r,i){const n=F$e(e,r);return t.read(n,i),BJ(t,n,i)}function F$e(e,t){const r=e.parseVersion(t.version||"",e.name);return e.currentVersion.validate(r),t.version=`${r.major}.${r.minor}`,t}async function D$e(e,t,r){var s;if((s=e==null?void 0:e.viewpoint)==null?void 0:s.targetGeometry)return null;const n=await j$e(e,t,r);return n?new dr({targetGeometry:n}):null}async function j$e(e,t,r){const i=e==null?void 0:e.spatialReference,n=t==null?void 0:t.extent;if(!i||!n)return null;if(i.isWGS84)return n.clone();if(i.isWebMercator)return il(n);const{getGeometryServiceURL:s}=await D(()=>import("./geometryServiceUtils-DTe6GIz7.js"),[],import.meta.url);try{const o=await s(t),a=new Hk({geometries:[n],outSpatialReference:i});return(await GJ(o,a))[0]}catch(o){r.error("Error projecting item's extent:",o)}return null}function BD(e){return{enabled:!!(e!=null&&e.length)}}var hC;let _h=hC=class extends N{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new hC({exactMatch:this.exactMatch,type:this.type,name:this.name})}};l([c({type:Boolean,json:{write:!0}})],_h.prototype,"exactMatch",void 0),l([c({type:String,json:{write:!0}})],_h.prototype,"name",void 0),l([X(Mk)],_h.prototype,"type",void 0),_h=hC=l([$("esri.webdoc.applicationProperties.SearchLayerField")],_h);const V$e=_h;var fC;let bh=fC=class extends N{constructor(e){super(e),this.field=null,this.id=null,this.subLayer=null}clone(){return new fC(C({field:this.field,id:this.id,subLayer:this.subLayer}))}};l([c({type:V$e,json:{write:{isRequired:!0}}})],bh.prototype,"field",void 0),l([c({type:String,json:{write:{isRequired:!0}}})],bh.prototype,"id",void 0),l([c({type:ke,json:{write:!0}})],bh.prototype,"subLayer",void 0),bh=fC=l([$("esri.webdoc.applicationProperties.SearchLayer")],bh);const U$e=bh;var mC;let Sh=mC=class extends N{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new mC({exactMatch:this.exactMatch,type:this.type,name:this.name})}};l([c({type:Boolean,json:{write:!0}})],Sh.prototype,"exactMatch",void 0),l([c({type:String,json:{write:!0}})],Sh.prototype,"name",void 0),l([X(Mk)],Sh.prototype,"type",void 0),Sh=mC=l([$("esri.webdoc.applicationProperties.SearchTableField")],Sh);const z$e=Sh;var yC;let yg=yC=class extends N{constructor(e){super(e),this.field=null,this.id=null}clone(){return new yC(C({field:this.field,id:this.id}))}};l([c({type:z$e,json:{write:{isRequired:!0}}})],yg.prototype,"field",void 0),l([c({type:String,json:{write:{isRequired:!0}}})],yg.prototype,"id",void 0),yg=yC=l([$("esri.webdoc.applicationProperties.SearchTable")],yg);const G$e=yg;var gC;const qJ=Y.ofType(U$e),HJ=Y.ofType(G$e);let xo=gC=class extends N{constructor(e){super(e),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new qJ,this.tables=new HJ}readAddressSearchEnabled(e){return!e}writeAddressSearchEnabled(e,t,r){t[r]=!e}clone(){return new gC(C({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};l([c({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],xo.prototype,"addressSearchEnabled",void 0),l([G("addressSearchEnabled")],xo.prototype,"readAddressSearchEnabled",null),l([B("addressSearchEnabled")],xo.prototype,"writeAddressSearchEnabled",null),l([c({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],xo.prototype,"enabled",void 0),l([c({type:String,json:{write:!0}})],xo.prototype,"hintText",void 0),l([c({type:qJ,json:{write:{overridePolicy:BD},origins:{"web-scene":{write:{isRequired:!0}}}}})],xo.prototype,"layers",void 0),l([c({type:HJ,json:{read:!0,write:{overridePolicy:BD}}})],xo.prototype,"tables",void 0),xo=gC=l([$("esri.webdoc.applicationProperties.Search")],xo);const B$e=xo;var vC;let G_=vC=class extends N{constructor(e){super(e),this.search=null}clone(){return new vC(C({search:this.search}))}};l([c({type:B$e,json:{write:!0}})],G_.prototype,"search",void 0),G_=vC=l([$("esri.webdoc.applicationProperties.Viewing")],G_);const q$e=G_;var wC;let $h=wC=class extends N{constructor(e){super(e),this.editing=null,this.offline=null,this.viewing=null}clone(){return new wC(C({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};l([c({json:{write:!0}})],$h.prototype,"editing",void 0),l([c({json:{write:!0}})],$h.prototype,"offline",void 0),l([c({type:q$e,json:{write:!0}})],$h.prototype,"viewing",void 0),$h=wC=l([$("esri.webmap.ApplicationProperties")],$h);const H$e=$h;var _C;let Ka=_C=class extends N{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}get isSecureUrl(){return u7(this.url)}get isDataURI(){return ml(this.url)}clone(){return new _C({url:this.url})}};l([c({type:String,json:{write:{isRequired:!0}}})],Ka.prototype,"url",void 0),l([c()],Ka.prototype,"isSecureUrl",null),l([c()],Ka.prototype,"isDataURI",null),Ka=_C=l([$("esri.webdoc.support.SlideThumbnail")],Ka);const W$e={type:pr,json:{read:{source:"timeExtent",reader:e=>e?Array.isArray(e)?pr.fromArray(e):pr.fromJSON(e):null},write:{writer:(e,t,r,i)=>{e&&(e.isEmpty?i!=null&&i.messages&&i.messages.push(new R("invalid-timeExtent","TimeExtent cannot be empty")):t[r]=e.toArray())},target:{timeExtent:{type:[[ke,vm]]}}}}};var bC;let Eo=bC=class extends jv(N){constructor(e){super(e),this.name=null,this.thumbnail=new Ka,this.timeExtent=null}castThumbnail(e){return typeof e=="string"?new Ka({url:e}):bt(Ka,e)}set viewpoint(e){const{targetGeometry:t,scale:r}=e;t!=null&&t.type==="point"&&r==null&&j.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",e),this._set("viewpoint",e)}readViewpoint(e,t){const{extent:r,viewpoint:i}=t;return dr.fromJSON(i||{targetGeometry:r})}writeViewpoint(e,t,r,i){if(!e)return;const{targetGeometry:n}=e;if(n==null||n.type==="extent")n!=null&&(t.extent=n.toJSON()),t[r]=e.toJSON();else{const s="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";i!=null&&i.messages?i.messages.push(new R("property:unsupported",s)):j.getLogger(this).error(s)}}clone(){return new bC(C({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};l([c({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],Eo.prototype,"name",void 0),l([c({type:Ka,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],Eo.prototype,"thumbnail",void 0),l([Ne("thumbnail")],Eo.prototype,"castThumbnail",null),l([c(W$e)],Eo.prototype,"timeExtent",void 0),l([c({type:dr,nonNullable:!0,json:{write:!0}})],Eo.prototype,"viewpoint",null),l([G("viewpoint",["extent","viewpoint"])],Eo.prototype,"readViewpoint",null),l([B("viewpoint")],Eo.prototype,"writeViewpoint",null),Eo=bC=l([$("esri.webmap.Bookmark")],Eo);const Z$e=Eo;let Ea=class extends Me(te){constructor(t){super(t),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.timeExtent=null,this.timeZone=to,this.viewpoint=null}};l([c({type:M$})],Ea.prototype,"background",void 0),l([c({type:Bk})],Ea.prototype,"rangeInfo",void 0),l([c({type:me})],Ea.prototype,"spatialReference",void 0),l([c({type:pr})],Ea.prototype,"timeExtent",void 0),l([c({nonNullable:!0})],Ea.prototype,"timeZone",void 0),l([c({type:dr})],Ea.prototype,"viewpoint",void 0),Ea=l([$("esri.webmap.InitialViewProperties")],Ea);const e2=Ea,WJ=Y.ofType(Z$e),J$e=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),K$e="ArcGIS Pro",Y$e=UJ.JSAPI;let at=class extends I$(ls.LoadableMixin(Fv(oH))){constructor(t){super(t),this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1,this._thumbnailFilename=null,this._updateFromPromise=null,this.resourceReferences={portalItem:null,paths:[]},this.applicationProperties=null,this.bookmarks=new WJ,this.floorInfo=null,this.initialViewProperties=new e2,this.portalItem=null,this.sourceVersion=null,this.widgets=null,this._debouncedSaveOperations=R2(async(r,i,n)=>{const{save:s,saveAs:o}=await D(()=>import("./webdocSaveUtils-DbI3WrjP.js"),__vite__mapDeps([226,227,228,229,230,231]),import.meta.url);switch(r){case Uo.SAVE:return s(this.context,this,i);case Uo.SAVE_AS:return o(this.context,this,n,i)}}),this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){this.portalItem=st(this.portalItem)}initialize(){if(this.when().catch(t=>{j.getLogger(this).error("#load()","Failed to load web map",t)}),this.resourceInfo){let t;try{t=this._validateJSON(this.resourceInfo)}catch(r){return void this.addResolvingPromise(Promise.reject(r))}this.read(t)}}set authoringApp(t){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",t)}writeAuthoringApp(t,r){t&&this._isAuthoringAppSetByUser?r.authoringApp=t:r.authoringApp=Y$e}set authoringAppVersion(t){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",t)}writeAuthoringAppVersion(t,r){t&&this._isAuthoringAppVersionSetByUser?r.authoringAppVersion=t:r.authoringAppVersion=y7}readInitialViewProperties(t,r){var o,a;const i=new e2;r.background&&(i.background=M$.fromJSON(r.background));const n=(o=r.initialState)==null?void 0:o.timeExtent;n&&(i.timeExtent=pr.fromArray(n));const s=(a=r.initialState)==null?void 0:a.viewpoint;return s&&(s.rotation&&jf.parse(r.version||"","webmap").lessThan(2,20)&&r.authoringApp===K$e&&(s.rotation*=-1),i.viewpoint=dr.fromJSON(s)),r.mapRangeInfo&&(i.rangeInfo=Bk.fromJSON(r.mapRangeInfo)),r.spatialReference&&(i.spatialReference=me.fromJSON(r.spatialReference)),r.timeZone&&(i.timeZone=r.timeZone),i}writeInitialViewProperties(t,r,i,n){var a;if(!t)return;(a=t.background)!=null&&a.color&&(r.background=t.background.write({},n));const{timeExtent:s,viewpoint:o}=t;if(o||s){const u={};o&&(u.viewpoint=o.write({},n)),s&&(u.timeExtent=s.toArray()),r.initialState=u}t.rangeInfo&&(r.mapRangeInfo=t.rangeInfo.toJSON(n)),t.spatialReference&&(r.spatialReference=t.spatialReference.write({},n)),r.timeZone=t.timeZone}writeLayers(t,r,i,n){r[i]=this._writeLayers(t,n,"operational-layers")}readSourceVersion(t,r){const[i,n]=r.version.split(".");return new jf(parseInt(i,10),parseInt(n,10))}writeSourceVersion(t,r,i){r[i]=`${this.context.currentVersion.major}.${this.context.currentVersion.minor}`}writeTables(t,r,i,n){const s=this._writeLayers(t,n,"tables");s.length&&(r[i]=s)}get thumbnailUrl(){var t;return((t=this.portalItem)==null?void 0:t.thumbnailUrl)||null}set thumbnailUrl(t){t?(this._override("thumbnailUrl",t),this._thumbnailFilename=this._generateCustomThumbnailFilename(t)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(t){return this.addResolvingPromise(P$e(this.context,this)),Promise.resolve(this)}loadAll(){return t$(this,t=>{t(this.ground,this.basemap,this.layers,this.tables)})}read(t,r){r={...r,origin:this.context.origin};const i=this._getAuthoringPropsState();Qz(this,t,n=>super.read(t,n),r),this._restoreAuthoringPropsFromState(i)}write(t,r){if(this.loadStatus!=="loaded"){const i=new R("webmap:not-loaded","Web map must be loaded before it can be serialized");throw j.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),i}return this._removeDanglingLayerRefs(),r={...r,origin:this.context.origin,restrictedWebMapWriting:!0,webmap:this},super.write(t,r)}async save(t){return this._debouncedSaveOperations(Uo.SAVE,t)}async saveAs(t,r){return this._debouncedSaveOperations(Uo.SAVE_AS,r,t)}async updateFrom(t,r){const i=this._updateFromInternal(t,r);this._updateFromPromise=i,await i,i===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(t){var i,n,s,o;const r=this.resourceInfo;return this._collectAllLayersJSON([...((i=r==null?void 0:r.baseMap)==null?void 0:i.baseMapLayers)||[],...(r==null?void 0:r.operationalLayers)||[],...((o=(s=(n=this.basemap)==null?void 0:n.resourceInfo)==null?void 0:s.data)==null?void 0:o.baseMapLayers)||[]]).find(a=>a.id===t.id)}async updateItemThumbnail(){var t;this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await((t=this.portalItem)==null?void 0:t.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename})),this._clearThumbnailOverride())}getThumbnailState(){let t=this.thumbnailUrl;return t&&(t=this._isOverridden("thumbnailUrl")?t:p7(t,"w","8192")),{thumbnailUrl:t,filename:this._thumbnailFilename}}restoreThumbnailFromState(t){this.thumbnailUrl=t.thumbnailUrl,this._thumbnailFilename=t.filename}_collectAllLayersJSON(t){return t.reduce((r,i)=>(r.push(i),i.layerType==="GroupLayer"&&(r=r.concat(this._collectAllLayersJSON(i.layers||[]))),r),[])}_writeLayers(t,r,i){return r={...r,layerContainerType:i},t.map(n=>dI(n,i==="tables"?null:this.getLayerJSONFromResourceInfo(n),r)).filter(Js).toArray()}_validateJSON(t){const r=jf.parse(t.version||"","webmap");return this.context.currentVersion.validate(r),t.version=`${r.major}.${r.minor}`,t}_removeDanglingLayerRefs(){var o,a;const t=this.applicationProperties,r=(o=t==null?void 0:t.viewing)==null?void 0:o.search,i=u=>this.allLayers.some(d=>d.id===u);if(r!=null&&r.layers&&(r.layers=r.layers.filter(u=>i(u.id))),r!=null&&r.tables&&(r.tables=r.tables.filter(u=>this.tables.some(d=>d.id===u.id))),t){const u=(a=t.editing)==null?void 0:a.locationTracking;u!=null&&u.info&&!i(u.info.layerId)&&(t.editing=null)}const n="presentation"in this?this.presentation:null,s=n==null?void 0:n.slides;s&&s.forEach(u=>{u.visibleLayers&&(u.visibleLayers=u.visibleLayers.filter(d=>i(d.id)))})}async _updateFromInternal(t,r){if(r??(r={}),await up(()=>t.ready),this._updateInitialViewProperties(t,r),t.map===this)for(const i of t.allLayerViews)"visible"in i&&"visible"in i.layer&&i._isOverridden("visible")&&(i.layer.visible=i.visible),"featureEffect"in i&&"featureEffect"in i.layer&&i._isOverridden("featureEffect")&&(i.layer.featureEffect=i.featureEffect);await this._updateThumbnailUrl(t,r)}_updateInitialViewProperties(t,r){var i,n;if(r.backgroundExcluded||(this.initialViewProperties.background=(i=t.background)==null?void 0:i.clone()),this.initialViewProperties.spatialReference=(n=t.spatialReference)==null?void 0:n.clone(),this.initialViewProperties.timeZone=t.timeZone,r.viewpointExcluded||(this.initialViewProperties.viewpoint=new dr({rotation:t.rotation,scale:r.scalePreserved?t.scale:null,targetGeometry:this._getViewExtent(t)})),!r.widgetsExcluded)for(const s of t.persistableViewModels)s.updateWebDocument(this)}_getViewExtent(t){const r=t.center.clone().normalize(),i=t.extent.clone(),n=i.width/2;return i.xmin=r.x-n,i.xmax=r.x+n,i}async _updateThumbnailUrl(t,r){if(r.thumbnailExcluded)return;const i=R$e(t,r.thumbnailSize),n=await t.takeScreenshot({format:"png",width:i.width,height:i.height});this._setAutoGeneratedThumbnail(n.dataUrl)}_setAutoGeneratedThumbnail(t){this.thumbnailUrl=t,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(t){if(ml(t)){const r=rp(t),i=r==null?void 0:r.mediaType,n=i&&J$e.get(i.toLowerCase())||null,s=`thumbnail${Date.now()}`;return n?`${s}.${n}`:s}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(t){t.isAuthoringAppSetByUser?this.authoringApp=t.authoringApp:this._isAuthoringAppSetByUser=!1,t.isAuthoringAppVersionSetByUser?this.authoringAppVersion=t.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}};l([c()],at.prototype,"_updateFromPromise",void 0),l([c({type:H$e,json:{write:!0}})],at.prototype,"applicationProperties",void 0),l([c({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],at.prototype,"authoringApp",null),l([B("authoringApp")],at.prototype,"writeAuthoringApp",null),l([c({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],at.prototype,"authoringAppVersion",null),l([B("authoringAppVersion")],at.prototype,"writeAuthoringAppVersion",null),l([c({type:WJ,json:{write:{overridePolicy:e=>({enabled:!!(e&&e.length>0),ignoreOrigin:!0})}}})],at.prototype,"bookmarks",void 0),l([c({type:x$e,json:{name:"mapFloorInfo",write:!0}})],at.prototype,"floorInfo",void 0),l([c({type:e2,nonNullable:!0,json:{read:{source:["background","initialState.timeExtent","initialState.viewpoint","mapRangeInfo","spatialReference","timeZone"]},write:{ignoreOrigin:!0,target:{background:{type:M$},"initialState.timeExtent":{type:pr},"initialState.viewpoint":{type:dr},mapRangeInfo:{type:Bk},spatialReference:{type:me},"timeZone:":{type:String}}}}})],at.prototype,"initialViewProperties",void 0),l([G("initialViewProperties")],at.prototype,"readInitialViewProperties",null),l([B("initialViewProperties")],at.prototype,"writeInitialViewProperties",null),l([c({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],at.prototype,"layers",void 0),l([B("layers")],at.prototype,"writeLayers",null),l([c({type:Ho})],at.prototype,"portalItem",void 0),l([c()],at.prototype,"resourceInfo",void 0),l([c({readOnly:!0,type:jf,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],at.prototype,"sourceVersion",void 0),l([G("sourceVersion")],at.prototype,"readSourceVersion",null),l([B("sourceVersion")],at.prototype,"writeSourceVersion",null),l([c({json:{read:!1,write:{ignoreOrigin:!0}}})],at.prototype,"tables",void 0),l([B("tables")],at.prototype,"writeTables",null),l([c()],at.prototype,"thumbnailUrl",null),l([c()],at.prototype,"updatingFromView",null),l([c({type:C$e,json:{write:!0}})],at.prototype,"widgets",void 0),at=l([$("esri.WebDocument2D")],at);const Q$e=at;var SC;let gg=SC=class extends N{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new SC({minValue:this.minValue,maxValue:this.maxValue})}};l([c({type:Number,json:{write:!0}})],gg.prototype,"minValue",void 0),l([c({type:Number,json:{write:!0}})],gg.prototype,"maxValue",void 0),gg=SC=l([$("esri.renderers.support.AuthoringInfoClassBreakInfo")],gg);var $C;let _u=$C=class extends N{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new $C({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:C(this.classBreakInfos)})}};l([c({type:String,json:{write:!0}})],_u.prototype,"field",void 0),l([c({type:String,json:{write:!0}})],_u.prototype,"normalizationField",void 0),l([c({type:String,json:{write:!0}})],_u.prototype,"label",void 0),l([c({type:[gg],json:{write:!0}})],_u.prototype,"classBreakInfos",void 0),_u=$C=l([$("esri.renderers.support.AuthoringInfoFieldInfo")],_u);var TC;let Th=TC=class extends N{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new TC({label:this.label,value:this.value,size:this.size})}};l([c({type:String,json:{write:!0}})],Th.prototype,"label",void 0),l([c({type:Number,json:{write:!0}})],Th.prototype,"size",void 0),l([c({type:Number,json:{write:!0}})],Th.prototype,"value",void 0),Th=TC=l([$("esri.renderers.support.AuthoringInfoSizeStop")],Th);const X$e=Th;var xC;const ow=new _e({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),aw=new _e({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),qD={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},HD=["high-to-low","above-and-below","centered-on","extremes"],WD=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size"])],ZD=["seconds","minutes","hours","days","months","years"],eTe=["circle","diamond","hexagon-flat","hexagon-pointy","square"];let _r=xC=class extends N{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}get normalizationField(){return this.theme==="reference-size"?this._get("normalizationField"):null}set normalizationField(e){this._set("normalizationField",e)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(e){this._set("referenceSizeScale",e)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(e){this._set("referenceSizeSymbolStyle",e)}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get sizeStops(){return this.theme==="reference-size"?this._get("sizeStops"):null}set sizeStops(e){this._set("sizeStops",e)}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new xC({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,sizeStops:C(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};l([c({types:qD,json:{write:!0}})],_r.prototype,"endTime",void 0),l([Ne("endTime")],_r.prototype,"castEndTime",null),l([c({type:String,json:{write:!0}})],_r.prototype,"field",void 0),l([c({type:Number,json:{write:!0}})],_r.prototype,"maxSliderValue",void 0),l([c({type:Number,json:{write:!0}})],_r.prototype,"minSliderValue",void 0),l([c({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],_r.prototype,"normalizationField",null),l([c({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],_r.prototype,"referenceSizeScale",null),l([c({type:eTe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],_r.prototype,"referenceSizeSymbolStyle",null),l([c({types:qD,json:{write:!0}})],_r.prototype,"startTime",void 0),l([Ne("startTime")],_r.prototype,"castStartTime",null),l([c({type:[X$e],json:{origins:{"web-scene":{write:!1}},write:!0}})],_r.prototype,"sizeStops",null),l([c({type:ow.apiValues,value:null,json:{type:ow.jsonValues,read:ow.read,write:ow.write}})],_r.prototype,"style",null),l([c({type:WD,value:null,json:{type:WD,origins:{"web-scene":{type:HD,write:{writer:(e,t)=>{HD.includes(e)&&(t.theme=e)}}}},write:!0}})],_r.prototype,"theme",null),l([c({type:aw.apiValues,json:{type:aw.jsonValues,read:aw.read,write:aw.write}})],_r.prototype,"type",void 0),l([c({type:ZD,json:{type:ZD,write:!0}})],_r.prototype,"units",void 0),_r=xC=l([$("esri.renderers.support.AuthoringInfoVisualVariable")],_r);const tTe=_r;let B_=class extends N{constructor(t){super(t),this.type=null}};l([c({readOnly:!0,json:{read:!1,write:!0}})],B_.prototype,"type",void 0),B_=l([$("esri.rest.support.ColorRamp")],B_);const Wk=B_;var EC;let dd=EC=class extends Wk{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new EC({fromColor:C(this.fromColor),toColor:C(this.toColor),algorithm:this.algorithm})}};l([X({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],dd.prototype,"algorithm",void 0),l([c({type:le,json:{type:[ke],write:!0}})],dd.prototype,"fromColor",void 0),l([c({type:le,json:{type:[ke],write:!0}})],dd.prototype,"toColor",void 0),l([c({type:["algorithmic"]})],dd.prototype,"type",void 0),dd=EC=l([$("esri.rest.support.AlgorithmicColorRamp")],dd);const Zk=dd;var MC;let vg=MC=class extends Wk{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new MC({colorRamps:C(this.colorRamps)})}};l([c({type:[Zk],json:{write:!0}})],vg.prototype,"colorRamps",void 0),l([c({type:["multipart"]})],vg.prototype,"type",void 0),vg=MC=l([$("esri.rest.support.MultipartColorRamp")],vg);const ZJ=vg,rTe={key:"type",base:Wk,typeMap:{algorithmic:Zk,multipart:ZJ}};function iTe(e){return e!=null&&e.type?e.type==="algorithmic"?Zk.fromJSON(e):e.type==="multipart"?ZJ.fromJSON(e):null:null}var IC;const Ec=new _e({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),lw=new _e({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),JD=new _e({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),KD=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],nTe=["high-to-low","above-and-below","above","below"],sTe=["flow-line","wave-front"],oTe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let It=IC=class extends N{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?iTe(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){var e;return new IC({classificationMethod:this.classificationMethod,colorRamp:C(this.colorRamp),fadeRatio:C(this.fadeRatio),fields:(e=this.fields)==null?void 0:e.slice(),field1:C(this.field1),field2:C(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};l([c({type:Ec.apiValues,value:null,json:{type:Ec.jsonValues,read:Ec.read,write:Ec.write,origins:{"web-document":{default:"manual",type:Ec.jsonValues,read:Ec.read,write:Ec.write}}}})],It.prototype,"classificationMethod",null),l([c({types:rTe,json:{write:!0}})],It.prototype,"colorRamp",void 0),l([G("colorRamp")],It.prototype,"readColorRamp",null),l([c({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],It.prototype,"fadeRatio",void 0),l([c({type:[String],value:null,json:{write:!0}})],It.prototype,"fields",null),l([c({type:_u,value:null,json:{write:!0}})],It.prototype,"field1",null),l([c({type:_u,value:null,json:{write:!0}})],It.prototype,"field2",null),l([c({type:sTe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],It.prototype,"flowTheme",null),l([c({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],It.prototype,"focus",null),l([c({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],It.prototype,"isAutoGenerated",void 0),l([c({type:Number,value:null,json:{type:ke,write:!0}})],It.prototype,"numClasses",null),l([c({type:KD,json:{type:KD,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],It.prototype,"lengthUnit",void 0),l([c({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],It.prototype,"maxSliderValue",void 0),l([c({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],It.prototype,"minSliderValue",void 0),l([c({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],It.prototype,"statistics",null),l([c({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],It.prototype,"standardDeviationInterval",null),l([c({type:lw.apiValues,value:null,json:{type:lw.jsonValues,read:lw.read,write:lw.write,origins:{"web-scene":{type:JD.jsonValues,write:{writer:JD.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],It.prototype,"type",null),l([c({type:[tTe],json:{write:!0}})],It.prototype,"visualVariables",void 0),l([c({type:oTe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],It.prototype,"univariateSymbolStyle",null),l([c({type:nTe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],It.prototype,"univariateTheme",null),It=IC=l([$("esri.renderers.support.AuthoringInfo")],It);const Jk=It,Ix=new _e({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let wg=class extends N{constructor(t){super(t),this.authoringInfo=null,this.type=null}async getRequiredFields(t){if(!this.collectRequiredFields)return[];const r=new Set;return await this.collectRequiredFields(r,t),Array.from(r).sort()}getSymbol(t,r){}async getSymbolAsync(t,r){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};l([c({type:Jk,json:{write:!0}})],wg.prototype,"authoringInfo",void 0),l([c({type:Ix.apiValues,readOnly:!0,json:{type:Ix.jsonValues,read:!1,write:{writer:Ix.write,ignoreOrigin:!0}}})],wg.prototype,"type",void 0),wg=l([$("esri.renderers.Renderer")],wg);const _l=wg;function aTe(e){var t,r;return((r=(t=e.match(lTe))==null?void 0:t[1])==null?void 0:r.replace(/\\'/g,"'"))??null}const lTe=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let _g=class extends Me(N){constructor(){super(...arguments),this.showLegend=null,this.title=null}};l([c({type:Boolean,json:{write:!0}})],_g.prototype,"showLegend",void 0),l([c({type:String,json:{write:!0}})],_g.prototype,"title",void 0),_g=l([$("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],_g);const JJ=_g,Cx=new _e({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Cs=class extends N{constructor(t){super(t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(t){return t==null?t:typeof t=="function"?(j.getLogger(this).error(".field: field must be a string value"),null):bv(t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};l([c()],Cs.prototype,"index",void 0),l([c({type:Cx.apiValues,readOnly:!0,json:{read:Cx.read,write:Cx.write}})],Cs.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],Cs.prototype,"field",void 0),l([Ne("field")],Cs.prototype,"castField",null),l([c({type:String,json:{write:!0}})],Cs.prototype,"valueExpression",void 0),l([c({type:String,json:{write:!0}})],Cs.prototype,"valueExpressionTitle",void 0),l([c({readOnly:!0})],Cs.prototype,"arcadeRequired",null),l([c({type:JJ,json:{write:!0}})],Cs.prototype,"legendOptions",void 0),Cs=l([$("esri.renderers.visualVariables.VisualVariable")],Cs);const Nm=Cs;var CC;let pd=CC=class extends N{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,r){t[r]=e??0}clone(){return new CC({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};l([c({type:le,json:{type:[ke],write:!0}})],pd.prototype,"color",void 0),l([c({type:String,json:{write:!0}})],pd.prototype,"label",void 0),l([c({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],pd.prototype,"value",void 0),l([B("value")],pd.prototype,"writeValue",null),pd=CC=l([$("esri.renderers.visualVariables.support.ColorStop")],pd);const uTe=pd;var AC;let hd=AC=class extends Nm{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){var e;return new AC({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};l([c({readOnly:!0})],hd.prototype,"cache",null),l([c({type:["color"],json:{type:["colorInfo"]}})],hd.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],hd.prototype,"normalizationField",void 0),l([c({type:[uTe],json:{write:!0}})],hd.prototype,"stops",null),hd=AC=l([$("esri.renderers.visualVariables.ColorVariable")],hd);const KJ=hd;var RC;let Yl=RC=class extends N{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return Y0(t.transparency)}writeOpacity(e,t,r){t[r]=n$(e)}clone(){return new RC({label:this.label,opacity:this.opacity,value:this.value})}};l([c({type:String,json:{write:!0}})],Yl.prototype,"label",void 0),l([c({type:Number,json:{type:ke,write:{target:"transparency"}}})],Yl.prototype,"opacity",void 0),l([G("opacity",["transparency"])],Yl.prototype,"readOpacity",null),l([B("opacity")],Yl.prototype,"writeOpacity",null),l([c({type:Number,json:{write:!0}})],Yl.prototype,"value",void 0),Yl=RC=l([$("esri.renderers.visualVariables.support.OpacityStop")],Yl);const cTe=Yl;var OC;let fd=OC=class extends Nm{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){var e;return new OC({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};l([c({readOnly:!0})],fd.prototype,"cache",null),l([c({type:["opacity"],json:{type:["transparencyInfo"]}})],fd.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],fd.prototype,"normalizationField",void 0),l([c({type:[cTe],json:{write:!0}})],fd.prototype,"stops",null),fd=OC=l([$("esri.renderers.visualVariables.OpacityVariable")],fd);const Kk=fd;var kC;let md=kC=class extends Nm{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){var e;return new kC({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}};l([c({readOnly:!0})],md.prototype,"cache",null),l([c({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],md.prototype,"axis",void 0),l([c({type:["rotation"],json:{type:["rotationInfo"]}})],md.prototype,"type",void 0),l([c({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],md.prototype,"rotationType",void 0),md=kC=l([$("esri.renderers.visualVariables.RotationVariable")],md);const YJ=md;function dTe(e){return Fe(e)}var PC;let Ql=PC=class extends N{constructor(e){super(e),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new PC({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};l([c({type:String,json:{write:!0}})],Ql.prototype,"label",void 0),l([c({type:Number,cast:Fe,json:{write:!0}})],Ql.prototype,"size",void 0),l([c({type:Number,json:{write:!0}})],Ql.prototype,"value",void 0),l([c({type:Boolean,json:{write:!1}})],Ql.prototype,"useMinValue",void 0),l([c({type:Boolean,json:{write:!1}})],Ql.prototype,"useMaxValue",void 0),Ql=PC=l([$("esri.renderers.visualVariables.support.SizeStop")],Ql);const q_=Ql;let H_=class extends JJ{constructor(){super(...arguments),this.customValues=null}};l([c({type:[Number],json:{write:!0}})],H_.prototype,"customValues",void 0),H_=l([$("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],H_);const pTe=H_;var sl,lr;function yf(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function av(e){return e!=null&&!isNaN(e)&&isFinite(e)}function QJ(e){return e.valueExpression?sl.Expression:e.field&&typeof e.field=="string"?sl.Field:sl.Unknown}function hTe(e,t){const r=t||QJ(e),i=e.valueUnit||"unknown";return r===sl.Unknown?lr.Constant:e.stops?lr.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?lr.ClampedLinear:i==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?lr.Proportional:lr.Additive:lr.Identity:lr.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(sl||(sl={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(lr||(lr={}));const Yk={unknown:1,inches:Tr(1,"meters","inches"),feet:Tr(1,"meters","feet"),"us-feet":Tr(1,"meters","us-feet"),yards:Tr(1,"meters","yards"),miles:Tr(1,"meters","miles"),"nautical-miles":Tr(1,"meters","nautical-miles"),millimeters:Tr(1,"meters","millimeters"),centimeters:Tr(1,"meters","centimeters"),decimeters:Tr(1,"meters","decimeters"),meters:Tr(1,"meters","meters"),kilometers:Tr(1,"meters","kilometers"),"decimal-degrees":1/vae(1,"meters",kt.radius)},XJ=()=>j.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),C$=e=>XJ().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${e}`),A$=()=>XJ().error("Use of arcade expressions requires an arcade context"),YD=new Ti,W_=Math.PI,eK=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function tK(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="color"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void C$("ColorVariable");const n=typeof t=="number",s=n?null:t,o=s==null?void 0:s.attributes;let a=n?t:null;const u=i.field,{ipData:d,hasExpression:h}=i.cache;let f=i.cache.compiledFunc;if(!u&&!h){const g=i.stops;return g&&g[0]&&g[0].color}if(typeof a!="number")if(h){if((r==null?void 0:r.arcade)==null)return void A$();const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,_=v.getViewInfo(g),w=v.createExecContext(s,_,r.timeZone);if(!f){const b=v.createSyntaxTree(i.valueExpression);f=v.createFunction(b),i.cache.compiledFunc=f}a=v.executeFunction(f,w)}else o&&(a=o[u]);const m=i.normalizationField,y=o!=null&&m!=null?parseFloat(o[m]):void 0;if(a!=null&&(!m||n||!isNaN(y)&&y!==0)){isNaN(y)||n||(a/=y);const g=Qk(a,d);if(g){const v=g[0],_=g[1],w=v===_?i.stops[v].color:le.blendColors(i.stops[v].color,i.stops[_].color,g[2],r!=null?r.color:void 0);return new le(w)}}}function rK(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="opacity"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void C$("OpacityVariable");const n=typeof t=="number",s=n?null:t,o=s==null?void 0:s.attributes;let a=n?t:null;const u=i.field,{ipData:d,hasExpression:h}=i.cache;let f=i.cache.compiledFunc;if(!u&&!h){const g=i.stops;return g&&g[0]&&g[0].opacity}if(typeof a!="number")if(h){if((r==null?void 0:r.arcade)==null)return void A$();const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,_=v.getViewInfo(g),w=v.createExecContext(s,_,r.timeZone);if(!f){const b=v.createSyntaxTree(i.valueExpression);f=v.createFunction(b),i.cache.compiledFunc=f}a=v.executeFunction(f,w)}else o&&(a=o[u]);const m=i.normalizationField,y=o!=null&&m!=null?parseFloat(o[m]):void 0;if(a!=null&&(!m||n||!isNaN(y)&&y!==0)){isNaN(y)||n||(a/=y);const g=Qk(a,d);if(g){const v=g[0],_=g[1];if(v===_)return i.stops[v].opacity;{const w=i.stops[v].opacity;return w+(i.stops[_].opacity-w)*g[2]}}}}function iK(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(y=>y.type==="rotation"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void C$("RotationVariable");const n=i.axis||"heading",s=n==="heading"&&i.rotationType==="arithmetic"?90:0,o=n==="heading"&&i.rotationType==="arithmetic"?-1:1,a=typeof t=="number"?null:t,u=a==null?void 0:a.attributes,d=i.field,{hasExpression:h}=i.cache;let f=i.cache.compiledFunc,m=0;if(!d&&!h)return m;if(h){if((r==null?void 0:r.arcade)==null)return void A$();const y={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},g=r.arcade.arcadeUtils,v=g.getViewInfo(y),_=g.createExecContext(a,v,r.timeZone);if(!f){const w=g.createSyntaxTree(i.valueExpression);f=g.createFunction(w),i.cache.compiledFunc=f}m=g.executeFunction(f,_)}else u&&(m=u[d]||0);return m=typeof m!="number"||isNaN(m)?null:s+o*m,m}function fTe(e,t,r){const i=typeof t=="number",n=i?null:t,s=n==null?void 0:n.attributes;let o=i?t:null;const{isScaleDriven:a}=e.cache;let u=e.cache.compiledFunc;if(a){const h=r!=null?r.scale:void 0,f=r!=null?r.view:void 0;o=h==null||f==="3d"?mTe(e):h}else if(!i)switch(e.inputValueType){case sl.Expression:{if((r==null?void 0:r.arcade)==null)return void A$();const h={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},f=r.arcade.arcadeUtils,m=f.getViewInfo(h),y=f.createExecContext(n,m,r.timeZone);if(!u){const g=f.createSyntaxTree(e.valueExpression);u=f.createFunction(g),e.cache.compiledFunc=u}o=f.executeFunction(u,y);break}case sl.Field:s&&(o=s[e.field]);break;case sl.Unknown:o=null}if(!av(o))return null;if(i||!e.normalizationField)return o;const d=s?parseFloat(s[e.normalizationField]):null;return av(d)&&d!==0?o/d:null}function mTe(e){let t=null,r=null;const i=e.stops;return i?(t=i[0].value,r=i[i.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}function R$(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(s=>s.type==="size"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void C$("SizeVariable");const n=sK(fTe(i,t,r),i,t,r,i.cache.ipData);return n==null||isNaN(n)?0:n}function Hi(e,t,r){return e==null?null:yf(e)?R$(e,t,r):av(e)?e:null}function nK(e,t,r){return av(r)&&e>r?r:av(t)&&e<t?t:e}function yTe(e,t,r,i){return e+((Hi(t.minSize,r,i)||t.minDataValue)??0)}function gTe(e,t,r){const i=e.stops;let n=(i==null?void 0:i.length)&&i[0].size;return n==null&&(n=e.minSize),Hi(n,t,r)}function vTe(e,t,r,i){const n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),s=Hi(t.minSize,r,i),o=Hi(t.maxSize,r,i),a=i!=null?i.shape:void 0;if(e<=t.minDataValue)return s;if(e>=t.maxDataValue)return o;if(s==null||o==null)return null;if(t.scaleBy==="area"&&a){const u=a==="circle",d=u?W_*(s/2)**2:s*s,h=d+n*((u?W_*(o/2)**2:o*o)-d);return u?2*Math.sqrt(h/W_):Math.sqrt(h)}return s+n*(o-s)}function wTe(e,t,r,i){const n=i!=null?i.shape:void 0,s=e/t.minDataValue,o=Hi(t.minSize,r,i),a=Hi(t.maxSize,r,i);let u=null;return u=n==="circle"?2*Math.sqrt(s*(o/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(s*o**2):s*o,nK(u,o,a)}function _Te(e,t,r,i,n){var u,d,h;const[s,o,a]=Qk(e,n);if(s===o)return Hi((u=t.stops)==null?void 0:u[s].size,r,i);{const f=Hi((d=t.stops)==null?void 0:d[s].size,r,i);return f+(Hi((h=t.stops)==null?void 0:h[o].size,r,i)-f)*a}}function bTe(e,t,r,i){const n=((i==null?void 0:i.resolution)??1)*Yk[t.valueUnit],s=Hi(t.minSize,r,i),o=Hi(t.maxSize,r,i),{valueRepresentation:a}=t;let u=null;return u=a==="area"?2*Math.sqrt(e/W_)/n:a==="radius"||a==="distance"?2*e/n:e/n,nK(u,s,o)}function sK(e,t,r,i,n){switch(t.transformationType){case lr.Additive:return yTe(e,t,r,i);case lr.Constant:return gTe(t,r,i);case lr.ClampedLinear:return vTe(e,t,r,i);case lr.Proportional:return wTe(e,t,r,i);case lr.Stops:return _Te(e,t,r,i,n);case lr.RealWorldSize:return bTe(e,t,r,i);case lr.Identity:return e;case lr.Unknown:return null}}function STe(e,t,r){const{isScaleDriven:i}=e.cache;if(!(i&&r==="3d"||t))return null;const n={scale:t,view:r};let s=Hi(e.minSize,YD,n),o=Hi(e.maxSize,YD,n);if(s!=null||o!=null){if(s>o){const a=o;o=s,s=a}return{minSize:s,maxSize:o}}}function $Te(e,t,r){if(!e.visualVariables)return;const i=[],n=[],s=[],o=[],a=[];for(const u of e.visualVariables)switch(u.type){case"color":n.push(u);break;case"opacity":s.push(u);break;case"rotation":a.push(u);break;case"size":o.push(u)}return n.forEach(u=>{const d=tK(u,t,r);i.push({variable:u,value:d})}),s.forEach(u=>{const d=rK(u,t,r);i.push({variable:u,value:d})}),a.forEach(u=>{const d=iK(u,t,r);i.push({variable:u,value:d})}),o.forEach(u=>{const d=R$(u,t,r);i.push({variable:u,value:d})}),i.filter(u=>u.value!=null)}function Qk(e,t){if(!t)return;let r=0,i=t.length-1;return t.some((n,s)=>e<n?(i=s,!0):(r=s,!1)),[r,i,(e-t[r])/(t[i]-t[r])]}function TTe(e,t,r){const i=["proportional","proportional","proportional"];for(const n of e){const s=n.useSymbolValue?"symbol-value":R$(n,t,r);switch(n.axis){case"width":i[0]=s;break;case"depth":i[1]=s;break;case"height":i[2]=s;break;case"width-and-depth":i[0]=s,i[1]=s;break;case"all":case void 0:case null:i[0]=s,i[1]=s,i[2]=s;break;default:n.axis}}return i}const sDe=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:TTe,getColor:tK,getOpacity:rK,getRotationAngle:iK,getSize:R$,getSizeForValue:sK,getSizeFromNumberOrVariable:Hi,getSizeRangeAtScale:STe,getVisualVariableValues:$Te,viewScaleRE:eK},Symbol.toStringTag,{value:"Module"}));var NC;const uw=new _e({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),LC=new _e({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function QD(e){if(e!=null)return typeof e=="string"||typeof e=="number"?dTe(e):e.type==="size"?yf(e)?e:(delete(e={...e}).type,new We(e)):void 0}function XD(e,t,r){if(typeof e!="object")return e;const i=new We;return i.read(e,r),i}let We=NC=class extends Nm{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&eK.test(this.valueExpression)}}set index(e){yf(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),yf(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return QJ(this)}set maxDataValue(e){e&&this.stops&&(j.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(j.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return QD(e)}readMaxSize(e,t,r){return XD(e,t,r)}set minDataValue(e){e&&this.stops&&(j.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(j.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return QD(e)}readMinSize(e,t,r){return XD(e,t,r)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value):e&&(j.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return hTe(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,r,i){if(e==="$view.scale"){if(i!=null&&i.messages){const n=this.index,s=typeof n=="string"?n:`visualVariables[${n}]`;i.messages.push(new R("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:i}))}}else t[r]=e}readValueUnit(e){return e?LC.read(e):null}clone(){var e,t;return new NC({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:yf(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:yf(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(e=this.stops)==null?void 0:e.map(r=>r.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}flipSizes(){if(this.transformationType===lr.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===lr.Stops){const e=this.stops;if(!e)return this;const t=e.map(i=>i.size).reverse(),r=e.length;for(let i=0;i<r;i++)e[i].size=t[i];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var e;return(e=this.stops)==null?void 0:e.map(t=>t.value||0)}};l([c({readOnly:!0})],We.prototype,"cache",null),l([c({type:uw.apiValues,json:{type:uw.jsonValues,origins:{"web-map":{read:!1}},read:uw.read,write:uw.write}})],We.prototype,"axis",void 0),l([c()],We.prototype,"index",null),l([c({type:String,readOnly:!0})],We.prototype,"inputValueType",null),l([c({type:pTe,json:{write:!0}})],We.prototype,"legendOptions",void 0),l([c({type:Number,value:null,json:{write:!0}})],We.prototype,"maxDataValue",null),l([c({type:Number,value:null,json:{write:!0}})],We.prototype,"maxSize",null),l([Ne("maxSize")],We.prototype,"castMaxSize",null),l([G("maxSize")],We.prototype,"readMaxSize",null),l([c({type:Number,value:null,json:{write:!0}})],We.prototype,"minDataValue",null),l([c({type:Number,value:null,json:{write:!0}})],We.prototype,"minSize",null),l([Ne("minSize")],We.prototype,"castMinSize",null),l([G("minSize")],We.prototype,"readMinSize",null),l([c({type:String,json:{write:!0}})],We.prototype,"normalizationField",void 0),l([c({readOnly:!0})],We.prototype,"arcadeRequired",null),l([c({type:String})],We.prototype,"scaleBy",void 0),l([c({type:[q_],value:null,json:{write:!0}})],We.prototype,"stops",null),l([c({type:["outline"],json:{write:!0}})],We.prototype,"target",void 0),l([c({type:String,readOnly:!0})],We.prototype,"transformationType",null),l([c({type:["size"],json:{type:["sizeInfo"]}})],We.prototype,"type",void 0),l([c({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],We.prototype,"useSymbolValue",void 0),l([c({type:String,json:{write:!0}})],We.prototype,"valueExpression",void 0),l([G("valueExpression",["valueExpression","expression"])],We.prototype,"readValueExpression",null),l([B("web-scene","valueExpression")],We.prototype,"writeValueExpressionWebScene",null),l([c({type:["radius","diameter","area","width","distance"],json:{write:!0}})],We.prototype,"valueRepresentation",void 0),l([c({type:LC.apiValues,json:{write:LC.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],We.prototype,"valueUnit",void 0),l([G("valueUnit")],We.prototype,"readValueUnit",null),We=NC=l([$("esri.renderers.visualVariables.SizeVariable")],We);const O$=We,xTe={color:KJ,size:O$,opacity:Kk,rotation:YJ},ETe=new _e({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),MTe=/^\[([^\]]+)\]$/i;let Z_=class extends te{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(t){if(this._resetVariables(),t=t==null?void 0:t.filter(r=>!!r),t==null?void 0:t.length){for(const r of t)switch(r.type){case"color":this.colorVariables.push(r);break;case"opacity":this.opacityVariables.push(r);break;case"rotation":this.rotationVariables.push(r);break;case"size":this.sizeVariables.push(r)}this.sizeVariables.length&&this.sizeVariables.some(r=>!!r.target)&&t.sort((r,i)=>{let n=null;return n=r.target===i.target?0:r.target?1:-1,n});for(let r=0;r<t.length;r++)t[r].index=r;this._set("visualVariables",t)}else this._set("visualVariables",t)}readVariables(t,r,i){const{rotationExpression:n,rotationType:s}=r,o=n==null?void 0:n.match(MTe),a=o==null?void 0:o[1];if(a&&(t||(t=[]),t.push({type:"rotationInfo",rotationType:s,field:a})),t)return t.map(u=>{const d=ETe.read(u.type),h=xTe[d];h||(j.getLogger(this).warn(`Unknown variable type: ${d}`),i!=null&&i.messages&&i.messages.push(new wn("visual-variable:unsupported",`visualVariable of type '${d}' is not supported`,{definition:u,context:i})));const f=new h;return f.read(u,i),f})}writeVariables(t,r){const i=[];for(const n of t){const s=n.toJSON(r);s&&i.push(s)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};l([c()],Z_.prototype,"visualVariables",null),Z_=l([$("esri.renderers.visualVariables.VisualVariableFactory")],Z_);const ITe=Z_,CTe={base:Nm,key:"type",typeMap:{opacity:Kk,color:KJ,rotation:YJ,size:O$}},Lm=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new ITe}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(r,i,n){return this._vvFactory.readVariables(r,i,n)}writeVisualVariables(r,i,n,s){i[n]=this._vvFactory.writeVariables(r,s)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const r of this.visualVariables)if(r.arcadeRequired)return!0;return!1}hasVisualVariables(r,i){return r?this.getVisualVariablesForType(r,i).length>0:this.getVisualVariablesForType("size",i).length>0||this.getVisualVariablesForType("color",i).length>0||this.getVisualVariablesForType("opacity",i).length>0||this.getVisualVariablesForType("rotation",i).length>0}getVisualVariablesForType(r,i){const n=this.visualVariables;return n?n.filter(s=>s.type===r&&(typeof i=="string"?s.target===i:i!==!1||!s.target)):[]}async collectVVRequiredFields(r,i){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const s of n)s&&(s.field&&$i(r,i,s.field),s.normalizationField&&$i(r,i,s.normalizationField),s.valueExpression&&(ATe(s.valueExpression,r,i)||await pi(r,i,s.valueExpression)))}};return l([c({types:[CTe],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),l([G("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),l([B("visualVariables")],t.prototype,"writeVisualVariables",null),t=l([$("esri.renderers.mixins.VisualVariablesMixin")],t),t};function ATe(e,t,r){const i=aTe(e);return i!=null&&($i(t,r,i),!0)}const Xk=[252,146,31,255],RTe=[153,153,153,255],OTe={type:"esriSMS",style:"esriSMSCircle",size:6,color:Xk,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},kTe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:Xk},PTe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},NTe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},LTe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},FTe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},DTe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},oK=ea.fromJSON(OTe),aK=Ki.fromJSON(kTe),lK=yc.fromJSON(PTe),jTe=Mp.fromJSON(NTe);function aDe(e){if(e==null)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return oK;case"polyline":return aK;case"polygon":case"extent":return lK}return null}const lDe=ea.fromJSON(LTe),uDe=Ki.fromJSON(FTe),cDe=yc.fromJSON(DTe);Xa.fromSimpleMarkerSymbol(oK);Ep.fromSimpleLineSymbol(aK);mc.fromSimpleFillSymbol(lK);new zv({symbolLayers:new Y([new Tp({material:{color:Xk},edges:new OH({size:us(1),color:new le(RTe)})})])});const VTe=new Ep({symbolLayers:new Y([new Rm({material:{color:new le([0,0,0])},size:us(1)})])}),UTe=new mc({symbolLayers:new Y([new Tp({outline:{color:new le([0,0,0]),size:us(1)}})])}),e6="#useCIMFallbackSymbology()",Bp={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function zTe(e,t=Bp){var u,d,h,f;if(!e)return{symbol:null};const{retainId:r=Bp.retainId,ignoreDrivers:i=Bp.ignoreDrivers,hasLabelingContext:n=Bp.hasLabelingContext,retainCIM:s=Bp.retainCIM,cimFallbackEnabled:o=Bp.cimFallbackEnabled}=t;let a=null;if(sF(e)||e instanceof Ip)a=e.clone();else if(e.type==="cim"){const m=(d=(u=e.data)==null?void 0:u.symbol)==null?void 0:d.type;switch(m){case"CIMPointSymbol":a=s?e.clone():Xa.fromCIMSymbol(e);break;case"CIMLineSymbol":o&&(a=VTe.clone(),(h=t==null?void 0:t.logWarning)==null||h.call(t,e6,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(a=UTe.clone(),(f=t==null?void 0:t.logWarning)==null||f.call(t,e6,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!a)return{error:new R("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${m||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof Ki)a=Ep.fromSimpleLineSymbol(e);else if(e instanceof ea)a=Xa.fromSimpleMarkerSymbol(e);else if(e instanceof km)a=Xa.fromPictureMarkerSymbol(e);else if(e instanceof yc)a=t.geometryType&&t.geometryType==="mesh"?zv.fromSimpleFillSymbol(e):mc.fromSimpleFillSymbol(e);else{if(!(e instanceof Mp))return{error:new R("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};a=n?m$.fromTextSymbol(e):Xa.fromTextSymbol(e)}return r&&a&&a.type!=="cim"&&(a.id=e.id),i&&sF(a)&&a.symbolLayers.forEach(m=>m.ignoreDrivers=!0),{symbol:a}}function t2(e,t,r,i){const n=uK(e,{},{context:i,isLabelSymbol:!1});n!=null&&(t[r]=n)}function t6(e,t,r,i){const n=uK(e,{},{context:i,isLabelSymbol:!0});n!=null&&(t[r]=n)}function r6(e){return e instanceof xp||e instanceof Ip}function GTe(e){return e instanceof xp&&(e.type==="polygon-3d"||e.type==="line-3d")}function uK(e,t,r){var a;if(e==null)return null;const{context:i,isLabelSymbol:n}=r,s=i==null?void 0:i.origin,o=i==null?void 0:i.messages;if(s==="web-scene"&&!r6(e)){const u=zTe(e,{retainCIM:!0,hasLabelingContext:n});return u.symbol!=null?u.symbol.write(t,i):(o==null||o.push(new R("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:i,error:u.error})),null)}return cI(i==null?void 0:i.layer)&&GTe(e)?(o==null||o.push(new R("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported on layers of type '${(a=i==null?void 0:i.layer)==null?void 0:a.declaredClass}'.`,{symbol:e,context:i})),null):(s==="web-map"||s==="portal-item"&&!cI(i==null?void 0:i.layer))&&r6(e)?(o==null||o.push(new R("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:i})),null):e.write(t,i)}function dDe(e,t){return x0e(e,null,t)}const k$={types:lW,json:{write:{writer:t2},origins:{"web-scene":{types:oF,write:{writer:t2},read:{reader:wm({types:oF})}}}}},eP=XR({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},k$),tP={types:{base:Br,key:"type",typeMap:{"simple-fill":Ou.typeMap["simple-fill"],"picture-fill":Ou.typeMap["picture-fill"],"polygon-3d":Ou.typeMap["polygon-3d"],cim:Ou.typeMap.cim}},json:{write:{writer:t2},origins:{"web-scene":{type:mc,write:{writer:t2}}}}},J_={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}};var FC;let Xl=FC=class extends N{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var e;return new FC({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:((e=this.symbol)==null?void 0:e.clone())??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};l([c({type:String,json:{write:!0}})],Xl.prototype,"description",void 0),l([c({type:String,json:{write:!0}})],Xl.prototype,"label",void 0),l([c({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Xl.prototype,"minValue",void 0),l([c({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Xl.prototype,"maxValue",void 0),l([c(eP)],Xl.prototype,"symbol",void 0),Xl=FC=l([$("esri.renderers.support.ClassBreakInfo")],Xl);const r2=Xl,BTe=mr()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let bg=class extends Me(N){constructor(t){super(t),this.title=null,this.order=null}};l([c({type:String,json:{write:!0}})],bg.prototype,"title",void 0),l([X(BTe)],bg.prototype,"order",void 0),bg=l([$("esri.renderers.support.RendererLegendOptions")],bg);const rP=bg;var DC;const cK="log",K_="percent-of-total",Y_="field",cw=new _e({esriNormalizeByLog:cK,esriNormalizeByPercentOfTotal:K_,esriNormalizeByField:Y_}),qTe=bt(r2);let Yt=DC=class extends Lm(_l){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,r){if(!Array.isArray(e))return;let i=t.minValue;return e.map(n=>{const s=new r2;return s.read(n,r),s.minValue==null&&(s.minValue=i),s.maxValue==null&&(s.maxValue=s.minValue),i=s.maxValue,s})}writeClassBreakInfos(e,t,r,i){const n=e.map(s=>s.write({},i));this._areClassBreaksConsecutive()&&n.forEach(s=>delete s.classMinValue),t[r]=n}castField(e){return e==null?e:typeof e=="function"?(j.getLogger(this).error(".field: field must be a string value"),null):bv(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=this.normalizationTotal!=null;return t||r?(e=t&&Y_||r&&K_||null,t&&r&&j.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==Y_&&e!==K_||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,r){let i=null;i=typeof e=="number"?new r2({minValue:e,maxValue:t,symbol:uW(r)}):qTe(C(e)),this.classBreakInfos.push(i),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const r=this.classBreakInfos.length;for(let i=0;i<r;i++){const n=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(n[0]===e&&n[1]===t){this.classBreakInfos.splice(i,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(t==null?void 0:t.arcade)==null&&j.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let r=t;this.valueExpression&&(t==null?void 0:t.arcade)==null&&(r={...r,arcade:await pp()});const i=this.getBreakIndex(e,r);return i!==-1?this.classBreakInfos[i]:null}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void j.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this.getBreakIndex(e,t);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(t==null?void 0:t.arcade)==null){const n=await pp(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),r={...r,arcade:n}}const i=this.getBreakIndex(e,r);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,r)=>t+r.getAttributeHash(),""))??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((i,n)=>i+n.getMeshHash(),"")}.${r}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var e,t;return new DC({field:this.field,backgroundFillSymbol:(e=this.backgroundFillSymbol)==null?void 0:e.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(t=this.defaultSymbol)==null?void 0:t.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:C(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:C(this.visualVariables),legendOptions:C(this.legendOptions),authoringInfo:C(this.authoringInfo)})}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(i=>i.collectRequiredFields(e,t)),pi(e,t,this.valueExpression)];$i(e,t,this.field),$i(e,t,this.normalizationField),await Promise.all(r)}_getBreakIndexForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:n,arcade:s,timeZone:o}=t??{},{valueExpression:a}=this;let u=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const d=s.arcadeUtils;if(!u){const f=d.createSyntaxTree(a);u=d.createFunction(f),this._compiledValueExpression.compiledFunction=u}this._compiledValueExpression.valueExpression=a;const h=d.executeFunction(u,d.createExecContext(e,d.getViewInfo({viewingMode:r,scale:i,spatialReference:n}),o));return this._getBreakIndexfromInfos(h)}_getBreakIndexForField(e){const t=this.field,r=e.attributes,i=this.normalizationType;let n=parseFloat(r[t]);if(i){const s=this.normalizationTotal,o=parseFloat(this.normalizationField?r[this.normalizationField]:void 0);if(i===cK)n=Math.log(n)*Math.LOG10E;else if(i!==K_||s==null||isNaN(s)){if(i===Y_&&!isNaN(o)){if(isNaN(n)||isNaN(o))return-1;n/=o}}else n=n/s*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let r=0;r<this.classBreakInfos.length;r++){const i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]<=e&&(t?e<=i[1]:e<i[1]))return r}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let r=1;r<t;r++)if(e[r-1].maxValue!==e[r].minValue)return!1;return!0}};l([c(tP)],Yt.prototype,"backgroundFillSymbol",void 0),l([c({type:[r2]})],Yt.prototype,"classBreakInfos",void 0),l([G("classBreakInfos")],Yt.prototype,"readClassBreakInfos",null),l([B("classBreakInfos")],Yt.prototype,"writeClassBreakInfos",null),l([c({type:String,json:{write:!0}})],Yt.prototype,"defaultLabel",void 0),l([c(k$)],Yt.prototype,"defaultSymbol",void 0),l([c({type:String,json:{write:!0}})],Yt.prototype,"field",void 0),l([Ne("field")],Yt.prototype,"castField",null),l([c({type:Boolean})],Yt.prototype,"isMaxInclusive",void 0),l([c({type:rP,json:{write:!0}})],Yt.prototype,"legendOptions",void 0),l([c({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Yt.prototype,"minValue",null),l([c({type:String,json:{write:!0}})],Yt.prototype,"normalizationField",void 0),l([c({type:Number,json:{write:!0}})],Yt.prototype,"normalizationTotal",void 0),l([c({type:cw.apiValues,value:null,json:{type:cw.jsonValues,read:cw.read,write:cw.write}})],Yt.prototype,"normalizationType",null),l([X({classBreaks:"class-breaks"})],Yt.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],Yt.prototype,"valueExpression",void 0),l([c({type:String,json:{write:!0}})],Yt.prototype,"valueExpressionTitle",void 0),Yt=DC=l([$("esri.renderers.ClassBreaksRenderer")],Yt);const dK=Yt,jC=-3,HTe=jC-1;var za;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(za||(za={}));let WTe=class{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new Vd,this._users=new Vd}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,r){this._removeFuncs.push([t,r])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(r=>r[0]!==t)}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,-1),this._checkSize()}getSize(t,r){const i=this._db.get(t.id+r);return(i==null?void 0:i.size)??0}put(t,r,i,n,s){r=t.id+r;const o=this._db.get(r);if(o&&(this._size-=o.size,t.size-=o.size,this._db.delete(r),o.entry!==i&&this._notifyRemove(r,o.entry,o.size,za.ALL)),n>this._maxSize)return void this._notifyRemove(r,i,n,za.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return console.warn(`Refusing to cache entry with size ${n} for key ${r}`),void this._notifyRemove(r,i,0,za.ALL);const a=1+Math.max(s,HTe)-jC;this._db.set(r,new ZTe(i,n,a)),this._size+=n,t.size+=n,this._checkSize()}updateSize(t,r,i,n){r=t.id+r;const s=this._db.get(r);if(s&&s.entry===i){for(this._size-=s.size,t.size-=s.size;n>this._maxSize;){const o=this._notifyRemove(r,i,n,za.SOME);if(!(o!=null&&o>0))return void this._db.delete(r);n=o}s.size=n,this._size+=n,t.size+=n,this._checkSize()}}pop(t,r){r=t.id+r;const i=this._db.get(r);if(i)return this._size-=i.size,t.size-=i.size,this._db.delete(r),++this._hit,i.entry;++this._miss}get(t,r){r=t.id+r;const i=this._db.get(r);if(i!==void 0)return this._db.delete(r),i.lives=i.lifetime,this._db.set(r,i),++this._hit,i.entry;++this._miss}peek(t,r){const i=this._db.get(t.id+r);return i?++this._hit:++this._miss,i==null?void 0:i.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},i=new Array;this._db.forEach((o,a)=>{const u=o.lifetime;i[u]=(i[u]||0)+o.size,this._users.forAll(d=>{const{id:h,name:f}=d;if(a.startsWith(h)){const m=r[f]||0;r[f]=m+o.size}})});const n={};this._users.forAll(o=>{const a=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const u=r[a]||0;r[a]=u,n[a]=Math.round(100*o.hitRate)+"%"}else n[a]="0%"});const s=Object.keys(r);s.sort((o,a)=>r[a]-r[o]),s.forEach(o=>t[o]=Math.round(r[o]/2**20)+"MB / "+n[o]);for(let o=i.length-1;o>=0;--o){const a=i[o];a&&(t["Priority "+(o+jC-1)]=Math.round(a/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){const r=t.id;this._db.forEach((i,n)=>{n.startsWith(r)&&(this._size-=i.size,this._db.delete(n),this._notifyRemove(n,i.entry,i.size,za.ALL))}),t.size=0}clearAll(){this._db.forEach((t,r)=>this._notifyRemove(r,t.entry,t.size,za.ALL)),this._users.forAll(t=>t.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,r,i,n){let s;return this._removeFuncs.some(o=>{if(t.startsWith(o[0])){const a=o[1](r,n,i);return typeof a=="number"&&(s=a),!0}return!1}),s}_checkSize(){this._users.forAll(t=>this._checkSizeLimits(t)),this._checkSizeLimits()}_checkSizeLimits(t){const r=t??this;if(r.maxSize<0||r.size<=r.maxSize)return;const i=t==null?void 0:t.id;let n=!0;for(;n;){n=!1;for(const[s,o]of this._db)if(o.lifetime===0&&(!i||s.startsWith(i))){if(this._purgeItem(s,o,t),r.size<=.9*r.maxSize)return;n||(n=this._db.has(s))}}for(const[s,o]of this._db)if((!i||s.startsWith(i))&&(this._purgeItem(s,o,t),r.size<=.9*r.maxSize))return}_purgeItem(t,r,i=this._users.find(n=>t.startsWith(n.id))){if(this._db.delete(t),r.lives<=1){this._size-=r.size,i&&(i.size-=r.size);const n=this._notifyRemove(t,r.entry,r.size,za.SOME);n!=null&&n>0&&(this._size+=n,i&&(i.size+=n),r.lives=r.lifetime,r.size=n,this._db.set(t,r))}else--r.lives,this._db.set(t,r)}},ZTe=class{constructor(t,r,i){this.entry=t,this.size=r,this.lifetime=i,this.lives=i}},JTe=class{constructor(t,r){this._storage=new WTe,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),r&&this._storage.registerRemoveFunc("",r)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,r,i=1){this._storage.put(this,t,r,i,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}},P$=class{};function KTe(e){return e instanceof Tm?e===P$.instance:(e==null?void 0:e.toString().toLowerCase())==="unknown"}function gDe(e){return KTe(e)?P$.instance:e}P$.instance=new bn("Etc/UTC");function YTe(e){return"timeZone"in e}function QTe(e){return"timeZone"in e}function XTe(e){return"dateFieldsTimeZone"in e}const exe=new Map;let pK=class Q_{static fromJSON(t){return new Q_(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new Q_(t.fields??[],n6(t))}static fromLayerJSON(t){return new Q_(t.fields??[],n6(t))}constructor(t=[],r){var n;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=t||[],this._timeZoneByFieldName=r?new Map(r):null;const i=[];for(const s of this.fields){const o=s==null?void 0:s.name,a=i6(o);if(o&&a){const u=Md(o);this._fieldsMap.set(o,s),this._fieldsMap.set(u,s),this._normalizedFieldsMap.set(a,s),i.push(`${u}:${s.type}:${(n=this._timeZoneByFieldName)==null?void 0:n.get(o)}`),gge(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):SH(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),Y5(s)||Q5(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}i.sort(),this.uid=i.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)Y5(t)||Q5(t)||t.nullable||sge(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===(t==null?void 0:t.uid)}has(t){return this.get(t)!=null}get(t){if(!t)return;let r=this._fieldsMap.get(t);return r||(r=this._fieldsMap.get(Md(t))??this._normalizedFieldsMap.get(i6(t)),r&&this._fieldsMap.set(t,r),r)}getTimeZone(t){const r=this.get(t&&typeof t!="string"?t.name:t);return r?this._timeZoneByFieldName?this._timeZoneByFieldName.get(r.name):r.type==="date"||r.type==="esriFieldTypeDate"?(j.getLogger("esri.layers.support.FieldsIndex").error(new R("getTimeZone:no-timezone-information",`no time zone information for field '${r.name}'`)),Xu):hK.has(r.type)?cp:null:null}getLuxonTimeZone(t){const r=this.getTimeZone(t);return r?r===cp?P$.instance:r===Xu?Ur.utcInstance:x2(exe,r,()=>bn.create(r)):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return vge(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){var r;return((r=this.get(t))==null?void 0:r.name)??void 0}toJSON(){return{fields:this.fields.map(t=>uS(t)?t.toJSON():t),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function Md(e){return e.trim().toLowerCase()}function i6(e){var t;return((t=Gye(e))==null?void 0:t.toLowerCase())??""}const hK=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function n6(e){const t=new Map;if(!e.fields)return t;const r=e.datesInUnknownTimezone===!0,{timeInfo:i,editFieldsInfo:n}=e,s=(i?"startField"in i?i.startField:i.startTimeField:"")??"",o=(i?"endField"in i?i.endField:i.endTimeField:"")??"",a=XTe(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?t_(e.dateFieldsTimeReference):null,u=n?YTe(n)?n.timeZone??a:n.dateFieldsTimeReference?t_(n.dateFieldsTimeReference):a??Xu:null,d=i?QTe(i)?i.timeZone??a:i.timeReference?t_(i.timeReference):a:null,h=new Map([[Md((n==null?void 0:n.creationDateField)??""),u],[Md((n==null?void 0:n.editDateField)??""),u],[Md(s),d],[Md(o),d]]);for(const{name:f,type:m}of e.fields)if(hK.has(m))t.set(f,cp);else if(m!=="date"&&m!=="esriFieldTypeDate")t.set(f,null);else if(r)t.set(f,cp);else{const y=h.get(Md(f??""))??a;t.set(f,y)}return t}function txe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function rxe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function ixe(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}function nxe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function fK(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function mK(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function yK(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function sxe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function oxe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function axe(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function lxe(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function uxe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function cxe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function dxe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e}function gK(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(r*r+i*i+n*n+s*s)}function vK(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return r*r+i*i+n*n+s*s}function wK(e){const t=e[0],r=e[1],i=e[2],n=e[3];return Math.sqrt(t*t+r*r+i*i+n*n)}function _K(e){const t=e[0],r=e[1],i=e[2],n=e[3];return t*t+r*r+i*i+n*n}function pxe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function hxe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function fxe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3];let o=r*r+i*i+n*n+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=r*o,e[1]=i*o,e[2]=n*o,e[3]=s*o),e}function mxe(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function bK(e,t,r,i){const n=t[0],s=t[1],o=t[2],a=t[3];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e[2]=o+i*(r[2]-o),e[3]=a+i*(r[3]-a),e}function yxe(e,t=1){const r=o$;let i,n,s,o,a,u;do i=2*r()-1,n=2*r()-1,a=i*i+n*n;while(a>=1);do s=2*r()-1,o=2*r()-1,u=s*s+o*o;while(u>=1);const d=Math.sqrt((1-a)/u);return e[0]=t*i,e[1]=t*n,e[2]=t*s*d,e[3]=t*o*d,e}function gxe(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3];return e[0]=r[0]*i+r[4]*n+r[8]*s+r[12]*o,e[1]=r[1]*i+r[5]*n+r[9]*s+r[13]*o,e[2]=r[2]*i+r[6]*n+r[10]*s+r[14]*o,e[3]=r[3]*i+r[7]*n+r[11]*s+r[15]*o,e}function vxe(e,t,r){const i=t[0],n=t[1],s=t[2],o=r[0],a=r[1],u=r[2],d=r[3],h=d*i+a*s-u*n,f=d*n+u*i-o*s,m=d*s+o*n-a*i,y=-o*i-a*n-u*s;return e[0]=h*d+y*-o+f*-u-m*-a,e[1]=f*d+y*-a+m*-o-h*-u,e[2]=m*d+y*-u+h*-a-f*-o,e[3]=t[3],e}function wxe(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function _xe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function bxe(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],o=t[0],a=t[1],u=t[2],d=t[3],h=Si();return Math.abs(r-o)<=h*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-a)<=h*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(n-u)<=h*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(s-d)<=h*Math.max(1,Math.abs(s),Math.abs(d))}const Sxe=fK,$xe=mK,Txe=yK,xxe=gK,Exe=vK,Mxe=wK,Ixe=_K;Object.freeze(Object.defineProperty({__proto__:null,add:nxe,ceil:sxe,copy:txe,copyVec3:rxe,dist:xxe,distance:gK,div:Txe,divide:yK,dot:mxe,equals:bxe,exactEquals:_xe,floor:oxe,inverse:hxe,len:Mxe,length:wK,lerp:bK,max:lxe,min:axe,mul:$xe,multiply:mK,negate:pxe,normalize:fxe,random:yxe,round:uxe,scale:cxe,scaleAndAdd:dxe,set:ixe,sqrDist:Exe,sqrLen:Ixe,squaredDistance:vK,squaredLength:_K,str:wxe,sub:Sxe,subtract:fK,transformMat4:gxe,transformQuat:vxe},Symbol.toStringTag,{value:"Module"}));function N$(){return[0,0,0,0]}function Cxe(e){return[e[0],e[1],e[2],e[3]]}function Fm(e,t,r,i){return[e,t,r,i]}function Axe(e,t,r,i){return[e,t,r,i]}function Rxe(e,t=N$()){const r=Math.min(4,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function Oxe(e,t){return new Float64Array(e,t,4)}function SK(){return N$()}function $K(){return Fm(1,1,1,1)}function TK(){return Fm(1,0,0,0)}function xK(){return Fm(0,1,0,0)}function EK(){return Fm(0,0,1,0)}function MK(){return Fm(0,0,0,1)}const kxe=SK(),Pxe=$K(),Nxe=TK(),Lxe=xK(),Fxe=EK(),Dxe=MK();Object.freeze(Object.defineProperty({__proto__:null,ONES:Pxe,UNIT_W:Dxe,UNIT_X:Nxe,UNIT_Y:Lxe,UNIT_Z:Fxe,ZEROS:kxe,clone:Cxe,create:N$,createView:Oxe,freeze:Axe,fromArray:Rxe,fromValues:Fm,ones:$K,unitW:MK,unitX:TK,unitY:xK,unitZ:EK,zeros:SK},Symbol.toStringTag,{value:"Module"}));function IK(e){return"r"in e&&"g"in e&&"b"in e}function CK(e){return"h"in e&&"s"in e&&"v"in e}function AK(e){return"l"in e&&"a"in e&&"b"in e}function RK(e){return"l"in e&&"c"in e&&"h"in e}function jxe(e){return"x"in e&&"y"in e&&"z"in e}const Vxe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],Uxe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function OK(e,t){const r=[];let i,n;if(e[0].length!==t.length)throw new Error("dimensions do not match");const s=e.length,o=e[0].length;let a=0;for(i=0;i<s;i++){for(a=0,n=0;n<o;n++)a+=e[i][n]*t[n];r.push(a)}return r}function kK(e){const t=[e.r/255,e.g/255,e.b/255].map(i=>i<=.04045?i/12.92:((i+.055)/1.055)**2.4),r=OK(Vxe,t);return{x:100*r[0],y:100*r[1],z:100*r[2]}}function iP(e){const t=OK(Uxe,[e.x/100,e.y/100,e.z/100]).map(r=>{const i=r<=.0031308?12.92*r:1.055*r**.4166666666666667-.055;return Math.min(1,Math.max(i,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function PK(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(r=>r>.008856451679035631?r**.3333333333333333:7.787037037037035*r+.13793103448275862);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function NK(e){const t=e.l,r=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(i=>i>6/29?i**3:3*(6/29)**2*(i-4/29));return{x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function zxe(e){const t=e.l,r=e.a,i=e.b,n=Math.sqrt(r*r+i*i);let s=Math.atan2(i,r);return s=s>0?s:s+2*Math.PI,{l:t,c:n,h:s}}function Gxe(e){const t=e.l,r=e.c,i=e.h;return{l:t,a:r*Math.cos(i),b:r*Math.sin(i)}}function Bxe(e){return PK(kK(e))}function qxe(e){return iP(NK(e))}function Hxe(e){return zxe(PK(kK(e)))}function Wxe(e){return iP(NK(Gxe(e)))}function Zxe(e){const t=e.r,r=e.g,i=e.b,n=Math.max(t,r,i),s=n-Math.min(t,r,i);let o=n,a=s===0?0:n===t?(r-i)/s%6:n===r?(i-t)/s+2:(t-r)/s+4,u=s===0?0:s/o;return a<0&&(a+=6),a*=60,u*=100,o*=100/255,{h:a,s:u,v:o}}function Jxe(e){const t=(e.h+360)%360/60,r=e.s/100,i=e.v/100*255,n=i*r,s=n*(1-Math.abs(t%2-1));let o;switch(Math.floor(t)){case 0:o={r:n,g:s,b:0};break;case 1:o={r:s,g:n,b:0};break;case 2:o={r:0,g:n,b:s};break;case 3:o={r:0,g:s,b:n};break;case 4:o={r:s,g:0,b:n};break;case 5:case 6:o={r:n,g:0,b:s};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+i-n),o.g=Math.round(o.g+i-n),o.b=Math.round(o.b+i-n),o}function nP(e){return IK(e)?e:RK(e)?Wxe(e):AK(e)?qxe(e):jxe(e)?iP(e):CK(e)?Jxe(e):e}function vDe(e){return CK(e)?e:Zxe(nP(e))}function wDe(e){return AK(e)?e:Bxe(nP(e))}function _De(e){return RK(e)?e:Hxe(nP(e))}function Kxe(e,t){const{r,g:i,b:n}=e;return .2126*r+.7152*i+.0722*n}var VC;function bDe(e,t=VC.High){return Kxe(e)>t?new le([0,0,0,e.a]):new le([255,255,255,e.a])}function SDe(e,t,r={}){if(e.length===0||t<=0)return[];if((e=e.map(i=>typeof i=="string"?new le(i):i)).length===1||t===1){const i=[],n=e[0];for(let s=0;s<t;s++)i.push(n.clone());return i}if(r.shuffle&&(e=DU(C(e),r.seed)),e.length>=t){const i=[],n=(e.length-1)/(t-1);for(let s=0;s<t;s++){const o=Math.round(s*n);i.push(e[o].clone())}return i}return Yxe(e,t,r)}function Yxe(e,t,r={}){const i=[],n=e.length-1,s=Math.ceil((t-e.length)/n);e:for(let o=0;o<n;o++){const a=e[o],u=e[o+1];for(let d=1;d<=s;d++){const h=d/(s+1);if(i.push(Qxe(a,u,h,r)),i.length+e.length===t)break e}}return[...e.map(o=>o.clone()),...DU(i,r.seed??1)]}(function(e){e[e.Low=160]="Low",e[e.High=225]="High"})(VC||(VC={}));const Ax=(e,t)=>{const r=Math.floor(10*t())-5;return Math.min(255,Math.max(0,e+r))};function Qxe(e,t,r,i={}){const n=e.r,s=e.g,o=e.b,a=t.r,u=t.g,d=t.b,h=Math.round(n+(a-n)*r),f=Math.round(s+(u-s)*r),m=Math.round(o+(d-o)*r);if(!i.offset)return new le([h,f,m]);const y=FU(i.seed);return new le([Ax(h,y),Ax(f,y),Ax(m,y)])}var s6,o6,a6,l6,u6,c6,d6,p6,h6,f6,UC,zC,m6,y6,g6,v6,w6,_6,b6,S6,$6,T6,x6,E6,M6,I6,C6,A6,R6,O6,k6,P6,N6,L6,F6,D6,j6,V6,U6,z6,G6,B6,q6,H6,W6,Z6,J6,K6,Y6,Q6,X6,ej,tj,rj,ij,nj,sj,oj,aj,lj,uj,cj;(function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"})(s6||(s6={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(o6||(o6={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(a6||(a6={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(l6||(l6={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(u6||(u6={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(c6||(c6={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(d6||(d6={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(p6||(p6={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(h6||(h6={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(f6||(f6={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(UC||(UC={})),function(e){e.Linear="Linear",e.EaseIn="EaseIn",e.EaseOut="EaseOut",e.EaseInOut="EaseInOut"}(zC||(zC={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(m6||(m6={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(y6||(y6={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(g6||(g6={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(v6||(v6={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(w6||(w6={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(_6||(_6={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(b6||(b6={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(S6||(S6={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}($6||($6={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees",e.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",e.ConcentricCircles="ConcentricCircles",e.DoubleJogArrow="DoubleJogArrow",e.LinkedChevrons="LinkedChevrons",e.SegmentThenHalfCircle="SegmentThenHalfCircle",e.LineWithStraightTicks="LineWithStraightTicks",e.DoubleCurve="DoubleCurve",e.ParallelWithTicksByWidth="ParallelWithTicksByWidth",e.EnclosingRoundedRectangle="EnclosingRoundedRectangle"}(T6||(T6={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(x6||(x6={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(E6||(E6={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(M6||(M6={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(I6||(I6={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(C6||(C6={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(A6||(A6={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(R6||(R6={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(O6||(O6={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(k6||(k6={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(P6||(P6={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(N6||(N6={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(L6||(L6={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(F6||(F6={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(D6||(D6={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(j6||(j6={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(V6||(V6={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(U6||(U6={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(z6||(z6={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(G6||(G6={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(B6||(B6={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(q6||(q6={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(H6||(H6={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(W6||(W6={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(Z6||(Z6={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(J6||(J6={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(K6||(K6={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(Y6||(Y6={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(Q6||(Q6={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(X6||(X6={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(ej||(ej={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(tj||(tj={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(rj||(rj={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(ij||(ij={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(nj||(nj={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(sj||(sj={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(oj||(oj={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(aj||(aj={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(lj||(lj={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(uj||(uj={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(cj||(cj={}));const Xxe={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},GC={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:UC.Loop,repeatdelay:0,easing:zC.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0},CIMSymbolAnimationOffset:{offsetx:0,offsety:0}};function $De(e){return[e.r,e.g,e.b,e.a]}const eEe=` /-,
`;function dj(e){let t=e.length;for(;t--;)if(!eEe.includes(e.charAt(t)))return!1;return!0}function tEe(e,t){const r=[];let i=0,n=-1;do if(n=e.indexOf("[",i),n>=i){if(n>i){const s=e.slice(i,n);r.push([s,null,dj(s)])}if(i=n+1,n=e.indexOf("]",i),n>=i){if(n>i){const s=t[e.slice(i,n)];s&&r.push([null,s,!1])}i=n+1}}while(n!==-1);if(i<e.length){const s=e.slice(i);r.push([s,null,dj(s)])}return r}function rEe(e,t,r,i){let n="",s=null;for(const o of t){const[a,u,d]=o;if(a)d?s=a:(s&&(n+=s,s=null),n+=a);else{let h=u;r!=null&&(h=LK(u,r));const f=e.attributes[h];f&&(s&&(n+=s,s=null),n+=f)}}return iEe(n,i)}function iEe(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function TDe(e,t,r,i,n,s,o=!0){const a=t/n,u=r/s,d=Math.ceil(a/2),h=Math.ceil(u/2);for(let f=0;f<s;f++)for(let m=0;m<n;m++){const y=4*(m+(o?s-f-1:f)*n);let g=0,v=0,_=0,w=0,b=0,T=0,x=0;const M=(f+.5)*u;for(let I=Math.floor(f*u);I<(f+1)*u;I++){const O=Math.abs(M-(I+.5))/h,P=(m+.5)*a,z=O*O;for(let U=Math.floor(m*a);U<(m+1)*a;U++){let W=Math.abs(P-(U+.5))/d;const ee=Math.sqrt(z+W*W);ee>=-1&&ee<=1&&(g=2*ee*ee*ee-3*ee*ee+1,g>0&&(W=4*(U+I*t),x+=g*e[W+3],_+=g,e[W+3]<255&&(g=g*e[W+3]/250),w+=g*e[W],b+=g*e[W+1],T+=g*e[W+2],v+=g))}}i[y]=w/v,i[y+1]=b/v,i[y+2]=T/v,i[y+3]=x/_}}function nEe(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function xDe(e){var t;return((t=e.data)==null?void 0:t.symbol)??null}function EDe(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function MDe(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function IDe(e){return e!=null&&(e.type==="CIMGradientFill"||e.type==="CIMHatchFill"||e.type==="CIMPictureFill"||e.type==="CIMSolidFill"||e.type==="CIMWaterFill")}function sEe(e){return e!=null&&(e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices")}const CDe=(e,t=0)=>e==null||isNaN(e)?t:e,ADe=(e,t)=>e??t,RDe=(e,t)=>e??t,ODe=e=>e.tintColor?nEe(e.tintColor):[255,255,255,1],kDe=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function PDe(){return D(()=>import("./geometryEngineJSON-BwrklJA_.js").then(e=>e.g),__vite__mapDeps([8,9,1,10]),import.meta.url)}function NDe(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function LDe(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function FDe(e){let t="normal",r="normal";if(e){const i=e.toLowerCase();i.includes("italic")?t="italic":i.includes("oblique")&&(t="oblique"),i.includes("bold")?r="bold":i.includes("light")&&(r="lighter")}return{style:t,weight:r}}function DDe(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function pj(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const r=pj(t);if(r!=null)return r}break;case"CIMTextSymbol":return pj(e.symbol);case"CIMSolidFill":return e.color}return null}function hj(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const r of t){const i=hj(r);if(i!=null)return i}break}case"CIMTextSymbol":return hj(e.symbol);case"CIMSolidStroke":return e.color}}function fj(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const r=fj(t);if(r!==void 0)return r}break;case"CIMTextSymbol":return fj(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function jDe(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function VDe(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function oEe(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:typeof e[t]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const UDe=e=>e.includes("data:image/svg+xml");function L$(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function zDe(e,t,r,i,n,s,o=!0){const{infos:a}=s;let u=1,d=0,h=0,f=0,m=1;for(const{absoluteAnchorPoint:v,offsetX:_,offsetY:w,rotation:b,size:T,frameHeight:x,rotateClockWise:M,scaleSymbolsProportionally:I}of a)m=v?1:u,h=gj(_,w,d,m,h),f=yj(_,w,d,m,f),x&&(I||o)&&(u*=T/x),d=vj(b,M,d);const y=gj(i,n,d,m,h),g=yj(i,n,d,m,f);return{size:e*u,rotation:vj(t,r,d),offsetX:y,offsetY:g}}function aEe(e){if(e==null)return!1;if(Array.isArray(e))return e.every(t=>aEe(t));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function lEe(e,t){if(t==="color"||t==="outlinecolor"||t==="backgroundcolor"||t==="borderlinecolor"||t==="tintcolor")return[...Xxe[t]];const r=GC[e];if(!r)throw new Error(`InternalError: default value for type ${e}.`);return r[t]}function uEe(e){return e.split(" ").map(t=>Number(t))}function cEe(e){return typeof e=="string"?uEe(e):e}function dEe(e){return e!=null&&e.dashTemplate&&(e.dashTemplate=cEe(e.dashTemplate)),e}function BC(e){if(e==null)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const r of t)if(r.type==="CIMVectorMarker")return BC(r)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const r of t)if(r.symbol)return BC(r.symbol)}}return"Normal"}function GDe(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers){for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const i=r.size??GC.CIMVectorMarker.size;i>t&&(t=i);break}}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers){for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const i=r.width;i!=null&&i>t&&(t=i);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(r.markerPlacement&&sEe(r.markerPlacement)){const i=r.size??GC.CIMVectorMarker.size;i>t&&(t=i)}break;case"CIMPictureFill":{const i=r.height;i!=null&&i>t&&(t=i)}}}return t}}}function LK(e,t){if(t!==null){const r=t.get(e);return r?r.name:e}return e}function pEe(e){return e.map(t=>({...t,propertyName:L$(t.propertyName)}))}function mj(e){const t={};for(const r in e){const i=e[r];t[L$(r)]=i}return t}function yj(e,t,r,i,n){const s=r*Math.PI/180;if(s){const o=Math.cos(s);return(Math.sin(s)*e+o*t)*i+n}return t*i+n}function gj(e,t,r,i,n){const s=r*Math.PI/180;return s?(Math.cos(s)*e-Math.sin(s)*t)*i+n:e*i+n}function vj(e,t,r){return t?r-e:r+e}function BDe(e,t,r){const i=r==="Color"||r==="TintColor"||r==="ToColor",n=r==="Rotation"||r==="Angle"||r==="ToRotation";let s=t[L$(r)];if(s!=null&&(i?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180)),s==null&&(s=lEe(t.type,r.toLowerCase()),s!=null&&(i?s=[s[0]/255,s[1]/255,s[2]/255,s[3]]:n&&(s*=Math.PI/180))),t.primitiveName!=null){const o=e[t.primitiveName];if(o!=null){const a=o[r];a==null||(typeof a=="string"||typeof a=="number"||Array.isArray(a)?(s=a,s!=null&&(i?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180))):(s={valueExpressionInfo:a,defaultValue:s},s!=null&&(i?s={type:"Process",op:"ArcadeColor",value:s}:n&&(s={type:"Process",op:"Divide",left:s,right:180/Math.PI}))))}}if(s==null)throw new Error(`Failed to derive a value or an expression for "${r}".`);return s}function qDe(e){return e?{originPosition:e.originPosition==="upper-left"?"upperLeft":e.originPosition==="lower-left"?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:e.extent!=null?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null}function hEe(e){return e.originPosition==="lowerLeft"&&e.scale.length===4&&e.translate.length===4}function Wv(e){if(hEe(e))return e;const{originPosition:t,scale:r,translate:i}=e,n=r[0]??1,s=r[1]??1;return{originPosition:"lowerLeft",scale:[n,t==="lowerLeft"?s:-s,r[2]??1,r[3]??1],translate:[i[0]??0,i[1]??0,i[2]??0,i[3]??0]}}function fEe({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function mEe({scale:e,translate:t},r){return Math.round((r-t[1])/e[1])}function yEe({scale:e,translate:t},r){return Math.round(((r??0)-t[2])/e[2])}function gEe({scale:e,translate:t},r){return r?Math.round((r-t[3])/e[3]):0}function Zv({scale:e,translate:t},r){return r*e[0]+t[0]}function Jv({scale:e,translate:t},r){return r*e[1]+t[1]}function lv({scale:e,translate:t},r){return(r??0)*e[2]+t[2]}function uv({scale:e,translate:t},r){return r?r*e[3]+t[3]:0}function sP(e,t){return e&&t?bEe:e&&!t?wEe:!e&&t?_Ee:vEe}const vEe=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let n=Zv(e,i[0]),s=Jv(e,i[1]);r[0]=[n,s];const{scale:o,originPosition:a}=e,u=o[0],d=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<t.length;h++){const[f,m]=t[h];n+=u*f,s+=d*m,r[h]=[n,s]}return r},wEe=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let n=Zv(e,i[0]),s=Jv(e,i[1]);r[0]=[n,s,lv(e,i[2])];const{scale:o,originPosition:a}=e,u=o[0],d=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<t.length;h++){const[f,m,y]=t[h];n+=u*f,s+=d*m,r[h]=[n,s,lv(e,y)]}return r},_Ee=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let n=Zv(e,i[0]),s=Jv(e,i[1]);r[0]=[n,s,uv(e,i[2])];const{scale:o,originPosition:a}=e,u=o[0],d=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<t.length;h++){const[f,m,y]=t[h];n+=u*f,s+=d*m,r[h]=[n,s,uv(e,y)]}return r},bEe=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let n=Zv(e,i[0]),s=Jv(e,i[1]);r[0]=[n,s,lv(e,i[2]),uv(e,i[3])];const{scale:o,originPosition:a}=e,u=o[0],d=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<t.length;h++){const[f,m,y,g]=t[h];n+=u*f,s+=d*m,r[h]=[n,s,lv(e,y),uv(e,g)]}return r};function FK(e,t,r){const i=new Array(r.length);for(let n=0;n<r.length;n++)i[n]=t(e,r[n]);return i}function HDe(e,t,r){const i=Wv(e);return t.x=fEe(i,r.x),t.y=mEe(i,r.y),r.z!=null&&(t.z=yEe(i,r.z)),r.m!=null&&(t.m=gEe(i,r.m)),t}function SEe(e,t,r,i=(r==null?void 0:r.hasZ)??!1,n=(r==null?void 0:r.hasM)??!1){if(r!=null){const s=Wv(e);t.points=sP(i,n)(s,r.points),t.hasZ=i,t.hasM=n}return t}function $Ee(e,t,r,i=(r==null?void 0:r.z)!=null,n=(r==null?void 0:r.m)!=null){if(r==null)return t;const s=Wv(e);return t.x=Zv(s,r.x),t.y=Jv(s,r.y),i&&(t.z=lv(s,r.z)),n&&(t.m=uv(s,r.m)),t}function TEe(e,t,r,i=(r==null?void 0:r.hasZ)??!1,n=(r==null?void 0:r.hasM)??!1){if(r!=null){const s=Wv(e);t.rings=FK(s,sP(i,n),r.rings),t.hasZ=i,t.hasM=n}return t}function xEe(e,t,r,i=(r==null?void 0:r.hasZ)??!1,n=(r==null?void 0:r.hasM)??!1){if(r!=null){const s=Wv(e);t.paths=FK(s,sP(i,n),r.paths),t.hasZ=i,t.hasM=n}return t}function EEe(e,t,r,i,n){if(e==null)return null;const s=e.referencesGeometry()&&n?MEe(t,i,n):t,o=e.repurposeFeature(s);try{return e.evaluate({...r,$feature:o},e.services)}catch(a){return j.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",a),null}}const Rx=new Map;function MEe(e,t,r){const{transform:i,hasZ:n,hasM:s}=r;Rx.has(t)||Rx.set(t,IEe(t));const o=Rx.get(t)(e.geometry,i,n,s);return{...e,geometry:o}}function IEe(e){const t={};switch(e){case"esriGeometryPoint":return(r,i,n,s)=>$Ee(i,t,r,n,s);case"esriGeometryPolygon":return(r,i,n,s)=>TEe(i,t,r,n,s);case"esriGeometryPolyline":return(r,i,n,s)=>xEe(i,t,r,n,s);case"esriGeometryMultipoint":return(r,i,n,s)=>SEe(i,t,r,n,s);default:return j.getLogger("esri.views.2d.support.arcadeOnDemand").error(new R("mapview-arcade",`Unable to handle geometryType: ${e}`)),r=>r}}const CEe=e=>{if(!e)return[0,0,0,0];const{r:t,g:r,b:i,a:n}=e;return[t,r,i,255*n]};let DK=class $t{static findApplicableOverrides(t,r,i){if(t&&r){if(t.primitiveName){let n=!1;for(const s of i)if(s.primitiveName===t.primitiveName){n=!0;break}if(!n)for(const s of r)s.primitiveName===t.primitiveName&&i.push(s)}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects)for(const n of t.effects)$t.findApplicableOverrides(n,r,i);if(t.symbolLayers)for(const n of t.symbolLayers)$t.findApplicableOverrides(n,r,i);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(t.effects)for(const n of t.effects)$t.findApplicableOverrides(n,r,i);if(t.markerPlacement&&$t.findApplicableOverrides(t.markerPlacement,r,i),t.type==="CIMVectorMarker"){if(t.markerGraphics)for(const n of t.markerGraphics)$t.findApplicableOverrides(n,r,i),$t.findApplicableOverrides(n.symbol,r,i)}else t.type==="CIMCharacterMarker"?$t.findApplicableOverrides(t.symbol,r,i):t.type==="CIMHatchFill"?$t.findApplicableOverrides(t.lineSymbol,r,i):t.type==="CIMPictureMarker"&&$t.findApplicableOverrides(t.animatedSymbolProperties,r,i)}}}static findEffectOverrides(t,r){if(!t)return null;if(t.type==="CIMGeometricEffectDashes"&&dEe(t),!r||!t.primitiveName)return{type:"cim-effect-param",effect:t,overrides:[]};const i=mj(t),n=t.primitiveName,s=[];for(const o of r)o.primitiveName===n&&s.push(mj(o));return{type:"cim-effect-param",effect:i,overrides:pEe(s)}}static async resolveSymbolOverrides(t,r,i,n,s,o,a){if(!(t!=null&&t.symbol))return null;let{symbol:u,primitiveOverrides:d}=t;const h=!!d;if(!h&&!n)return u;u=C(u),d=C(d);let f=!0;if(r||(r={attributes:{}},f=!1),h){if(f||(d=d.filter(m=>{var y;return!((y=m.valueExpressionInfo)!=null&&y.expression.includes("$feature"))})),a||(d=d.filter(m=>{var y;return!((y=m.valueExpressionInfo)!=null&&y.expression.includes("$view"))})),d.length>0){const m={spatialReference:i,fields:oEe(r.attributes),geometryType:s};await $t.createRenderExpressions(d,m),$t.evaluateOverrides(d,r,s??"esriGeometryPoint",o,a)}$t.applyOverrides(u,d)}return n&&$t.applyDictionaryTextOverrides(u,r,n,null),u}static async createRenderExpressions(t,r){const i=[];for(const n of t){const s=n.valueExpressionInfo;if(!s||$t._expressionToRenderExpression.has(s.expression))continue;const o=jye(s.expression,r.spatialReference,r.fields);i.push(o),o.then(a=>$t._expressionToRenderExpression.set(s.expression,a))}i.length>0&&await Promise.all(i)}static evaluateOverrides(t,r,i,n,s){const o={$view:{scale:s==null?void 0:s.scale}};for(const a of t){a.value&&typeof a.value=="object"&&IK(a.value)&&(a.propertyName==="Color"||a.propertyName==="StrokeColor")&&(a.value=CEe(a.value));const u=a.valueExpressionInfo;if(!u)continue;const d=$t._expressionToRenderExpression.get(u.expression);d&&(a.value=EEe(d,r,o,i,n))}}static applyDictionaryTextOverrides(t,r,i,n,s="Normal"){if(t!=null&&t.type)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const o=t.symbolLayers;if(!o)return;for(const a of o)a&&a.type==="CIMVectorMarker"&&$t.applyDictionaryTextOverrides(a,r,i,n,t.type==="CIMTextSymbol"?t.textCase:s)}break;case"CIMVectorMarker":{const o=t.markerGraphics;if(!o)return;for(const a of o)a&&$t.applyDictionaryTextOverrides(a,r,i,n)}break;case"CIMMarkerGraphic":{const o=t.textString;if(o&&o.includes("[")){const a=tEe(o,i);t.textString=rEe(r,a,n,s)}}}}static applyOverrides(t,r,i,n){if(t.primitiveName){for(const s of r)if(s.primitiveName===t.primitiveName){const o=L$(s.propertyName);if(n&&n.push({cim:t,nocapPropertyName:o,value:t[o]}),i){let a=!1;for(const u of i)u.primitiveName===t.primitiveName&&(a=!0);a||i.push(s)}s.value!=null&&(t[o]=s.value)}}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects)for(const s of t.effects)$t.applyOverrides(s,r,i,n);if(t.symbolLayers)for(const s of t.symbolLayers)$t.applyOverrides(s,r,i,n);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(t.effects)for(const s of t.effects)$t.applyOverrides(s,r,i,n);if(t.type==="CIMVectorMarker"&&t.markerGraphics)for(const s of t.markerGraphics)$t.applyOverrides(s,r,i,n),$t.applyOverrides(s.symbol,r,i,n)}}static restoreOverrides(t){for(const r of t)r.cim[r.nocapPropertyName]=r.value}static buildOverrideKey(t){let r="";for(const i of t)i.value!==void 0&&(r+=`${i.primitiveName}${i.propertyName}${JSON.stringify(i.value)}`);return r}static toValue(t,r){if(t==="DashTemplate")return r.split(" ").map(i=>Number(i));if(t==="Color"){const i=new le(r).toRgba();return i[3]*=255,i}return r}};DK._expressionToRenderExpression=new Map;const wj="esri.renderers.support.DictionaryLoader",AEe={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let jK=class{constructor(t,r,i){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new JTe(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=t,this.config=r,this.fieldMap=i}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,r){var f;let i;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(r));try{i=await this._dictionaryPromise}catch(m){if(Or(m))return this._dictionaryPromise=null,null}const n=(f=this._dictionaryVersion)==null?void 0:f.greaterEqual(4,0),s={};if(this.fieldMap)for(const m of this._symbolFields){const y=LK(this.fieldMap[m],this._fieldIndex);if(y){const g=t.attributes[y];s[m]=n?g:g!=null?""+t.attributes[y]:""}else s[m]=""}let o=null;try{o=i==null?void 0:i(s,r)}catch{return null}if(!o||typeof o!="string"||o==="invalid")return null;const a=o.split(";"),u=[],d=[];for(let m=0;m<a.length;m++){const y=a[m];if(y){if(y.includes("po:")){const g=y.slice(3).split("|");if(g.length===3){const v=g[0],_=g[1];let w=g[2];const b="countrylabel";if(v===b&&_==="TextString"){if(this.fieldMap!=null){let T=this.fieldMap[b];T==null&&(T=b,this.fieldMap[T]=T),t.attributes[T]=w}continue}if(_==="DashTemplate")w=w.split(" ").map(T=>Number(T));else if(_==="Color"){const T=new le(w).toRgba();w=[T[0],T[1],T[2],255*T[3]]}else w=Number(w);d.push({primitiveName:v,propertyName:_,value:w,defaultValue:null})}}else if(y.includes("|")){for(const g of y.split("|"))if(this._itemNames.has(g)){u.push(g);break}}else if(this._itemNames.has(y))u.push(y);else if(m===0){u.length=0;let g="Invalid_P";t.geometry!=null&&(Gd(t.geometry)?g="Invalid_A":IO(t.geometry)&&(g="Invalid_L")),u.push(g);break}}}const h=t.geometry==null||!t.geometry.hasZ&&t.geometry.type==="point";return this._cimPartsToCIMSymbol(t,u,d,h,r)}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void j.getLogger(wj).error("no valid URL!");const r=Le(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:t!=null?t.signal:null}),[{data:i}]=await Promise.all([r,pp()]);if(!i)throw this._dictionaryPromise=null,new R("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:n,dictionary_version:s,expression:o,itemsNames:a}=i,u=o;let d=!1;s&&(this._dictionaryVersion=CJ.parse(s),d=this._dictionaryVersion.greaterEqual(4,0)),this._refSymbolUrlTemplate=this.url+"/"+i.cimRefTemplateUrl,this._itemNames=new Set(a),this._symbolFields=n.symbol;const h={};if(this.config){const y=this.config;for(const g in y)h[g]=y[g]}if(n.configuration)for(const y of n.configuration)h.hasOwnProperty(y.name)||(h[y.name]=y.value);const f=[];if(t!=null&&t.fields&&this.fieldMap)for(const y in this.fieldMap){const g=this.fieldMap[y],v=t.fields.filter(_=>_.name.toLowerCase()===(g==null?void 0:g.toLowerCase()));v.length>0&&f.push({...v[0],type:d?v[0].type:"esriFieldTypeString"})}f.length>0&&(this._fieldIndex=new pK(f));const m=Vye(u,t!=null?t.spatialReference:null,f,h).then(y=>{const g={scale:0};return(v,_)=>{if(y==null)return null;const w=y.repurposeFeature({geometry:null,attributes:v});return g.scale=_!=null?_.scale??void 0:void 0,y.evaluate({$feature:w,$view:g},y.services)}}).catch(y=>(j.getLogger(wj).error("Creating dictionary expression failed:",y),null));return this._dictionaryPromise=m,m}async _cimPartsToCIMSymbol(t,r,i,n,s){const o=new Array(r.length);for(let d=0;d<r.length;d++)o[d]=this._getSymbolPart(r[d],s);let a=await Promise.all(o);const u=this.fieldMap;if(u){a=C(a);for(const d of a)DK.applyDictionaryTextOverrides(d,t,u,this._fieldIndex,BC(d))}return new wl({data:REe(a,i,n)})}async _getSymbolPart(t,r){const i=this._symbolCache.get(t);if(i)return i;if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(o=>o.data);const n=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,t),s=Le(n,{responseType:"json",query:{f:"json"},...r});this._ongoingRequests.set(t,s),s.finally(()=>this._ongoingRequests.delete(t));try{const o=await s;return this._symbolCache.put(t,o.data),o.data}catch(o){throw o}}};function REe(e,t,r){if(!e||e.length===0)return null;const i={...e[0]};if(e.length>1){i.effects=null,i.symbolLayers=[];for(const n of e){const s=n;if(s.effects!=null)for(const o of s.symbolLayers)o.effects==null?o.effects=s.effects:o.effects.unshift(...s.effects);i.symbolLayers.unshift(...s.symbolLayers)}}return r&&(i.callout=AEe),{type:"CIMSymbolReference",symbol:i,primitiveOverrides:t}}var qC;let As=qC=class extends Lm(_l){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new jK(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,r,i){i!=null&&i.origin||super.writeVisualVariables(e,t,r,i)}clone(){return new qC({config:C(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:C(this.fieldMap),url:C(this.url),visualVariables:C(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await pi(e,t,this.scaleExpression);for(const r in this.fieldMap){const i=this.fieldMap[r];t.has(i)&&e.add(i)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,r)=>t+r.getAttributeHash(),""))??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};l([c({type:jK})],As.prototype,"_loader",null),l([c({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],As.prototype,"config",void 0),l([c({type:Object,json:{write:!0}})],As.prototype,"fieldMap",void 0),l([c({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],As.prototype,"scaleExpression",void 0),l([B("scaleExpression")],As.prototype,"writeData",null),l([c({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],As.prototype,"scaleExpressionTitle",void 0),l([c({type:String,json:{write:!0}})],As.prototype,"url",void 0),l([B("visualVariables")],As.prototype,"writeVisualVariables",null),As=qC=l([$("esri.renderers.DictionaryRenderer")],As);const OEe=As;var HC;let Ma=HC=class extends N{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(j.getLogger(this).error(".field: field must be a string value"),null):bv(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var e;return new HC({color:(e=this.color)==null?void 0:e.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};l([c({type:le,json:{type:[Number],write:!0}})],Ma.prototype,"color",void 0),l([c({type:String,json:{write:!0}})],Ma.prototype,"field",void 0),l([Ne("field")],Ma.prototype,"castField",null),l([c({type:String,json:{write:!0}})],Ma.prototype,"label",void 0),l([c({type:String,json:{write:!0}})],Ma.prototype,"valueExpression",void 0),l([c({type:String,json:{write:!0}})],Ma.prototype,"valueExpressionTitle",void 0),Ma=HC=l([$("esri.renderers.support.AttributeColorInfo")],Ma);const VK=Ma;var WC;let X_=WC=class extends N{constructor(){super(...arguments),this.unit=null}clone(){return new WC({unit:this.unit})}};l([c({type:String,json:{write:!0}})],X_.prototype,"unit",void 0),X_=WC=l([$("esri.renderers.support.DotDensityLegendOptions")],X_);const kEe=X_;var ZC;let Oi=ZC=class extends Lm(_l){constructor(e){super(e),this.attributes=null,this.backgroundColor=new le([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Ki,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new yc({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var e;return((e=this.attributes)==null?void 0:e.reduce((t,r)=>t+r.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new ZC({attributes:C(this.attributes),backgroundColor:C(this.backgroundColor),dotBlendingEnabled:C(this.dotBlendingEnabled),dotShape:C(this.dotShape),dotSize:C(this.dotSize),dotValue:C(this.dotValue),legendOptions:C(this.legendOptions),outline:C(this.outline),referenceScale:C(this.referenceScale),seed:C(this.seed),visualVariables:C(this.visualVariables),authoringInfo:C(this.authoringInfo)})}getControllerHash(){var t;return`${(t=this.attributes)==null?void 0:t.map(r=>r.field||r.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes??[])r.valueExpression&&await pi(e,t,r.valueExpression),r.field&&e.add(r.field)}};l([c({type:[VK],json:{write:!0}})],Oi.prototype,"attributes",void 0),l([c({type:le,json:{write:!0}})],Oi.prototype,"backgroundColor",void 0),l([c({type:Boolean,json:{write:!0}})],Oi.prototype,"dotBlendingEnabled",void 0),l([c({type:String,json:{write:!1}})],Oi.prototype,"dotShape",void 0),l([c({type:Number,json:{write:!0}})],Oi.prototype,"dotSize",void 0),l([c({type:kEe,json:{write:!0}})],Oi.prototype,"legendOptions",void 0),l([c({type:Ki,json:{default:null,write:!0}})],Oi.prototype,"outline",void 0),l([c({type:Number,json:{write:!0}})],Oi.prototype,"dotValue",void 0),l([c({type:Number,json:{write:!0}})],Oi.prototype,"referenceScale",void 0),l([c({type:Number,json:{write:!0}})],Oi.prototype,"seed",void 0),l([X({dotDensity:"dot-density"})],Oi.prototype,"type",void 0),Oi=ZC=l([$("esri.renderers.DotDensityRenderer")],Oi);const PEe=Oi;var JC;let Sg=JC=class extends N{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new JC({color:this.color&&this.color.clone(),ratio:this.ratio})}};l([c({type:le,json:{type:[ke],default:null,write:!0}})],Sg.prototype,"color",void 0),l([c({type:Number,json:{write:!0}})],Sg.prototype,"ratio",void 0),Sg=JC=l([$("esri.renderers.support.HeatmapColorStop")],Sg);const eb=Sg;let xh=class extends Me(N){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};l([c({type:String,json:{write:!0}})],xh.prototype,"minLabel",void 0),l([c({type:String,json:{write:!0}})],xh.prototype,"maxLabel",void 0),l([c({type:String,json:{write:!0}})],xh.prototype,"title",void 0),xh=l([$("esri.renderers.support.HeatmapLegendOptions")],xh);const oP=2.4;function NEe(e){return us(e*oP)}function LEe(e){return ime(e)/oP}function FEe(e,t,r,i){let{color:n,ratio:s}=t,{color:o,ratio:a}=r;a===s&&(a===1?s-=1e-6:a+=1e-6);const u=os((i-s)/(a-s),0,1);bK(e,n.toArray(),o.toArray(),u)}function JDe(e){const r=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:a})=>a>=0&&a<=1).sort((a,u)=>a.ratio-u.ratio).map(({color:a,ratio:u})=>({color:a,ratio:Math.max(u,.001)})),e.length<1)return r;let i=e[0],n=e[0],s=1;const o=N$();for(let a=0;a<512;a++){const u=(a+.5)/512;for(;u>n.ratio&&s<e.length;)i=n,n=e[s++];FEe(o,i,n,u),r.set(o,4*a)}return r}function KDe(e,t,r){const i=Math.sqrt(e**2+t**2)/r;return i>1?0:3/(Math.PI*r**2)*(1-i**2)**2}function YDe(e){return typeof e=="function"?e:e?t=>+t[e]:()=>1}var KC;function _j(e){if(e!=null){const{maxDensity:t,minDensity:r,radius:i}=e;if(t!=null||r!=null||i!=null){const{blurRadius:n,maxPixelIntensity:s,minPixelIntensity:o,...a}=e;return a}}return e}let br=KC=class extends _l{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new eb({ratio:0,color:new le("rgba(255, 140, 0, 0)")}),new eb({ratio:.75,color:new le("rgba(255, 140, 0, 1)")}),new eb({ratio:.9,color:new le("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(e){return _j(e)}get blurRadius(){return LEe(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,r=this.minPixelIntensity;this._set("radius",NEe(e)),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",r*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(oP**2*this.blurRadius**4)}read(e,t){e=_j(e),super.read(e,t)}getSymbol(){return new ea}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const r=this.field,i=this.valueExpression;r&&typeof r=="string"&&$i(e,t,r),i&&typeof i=="string"&&await pi(e,t,i)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new KC({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:C(this.colorStops),field:this.field,legendOptions:C(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};l([c({type:Jk,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],br.prototype,"authoringInfo",void 0),l([c({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],br.prototype,"blurRadius",null),l([c({type:[eb],json:{write:!0}})],br.prototype,"colorStops",void 0),l([c({type:String,json:{write:!0}})],br.prototype,"field",void 0),l([c({type:xh,json:{write:!0}})],br.prototype,"legendOptions",void 0),l([c({type:Number,json:{write:!0}})],br.prototype,"maxDensity",void 0),l([c({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],br.prototype,"maxPixelIntensity",null),l([c({type:Number,json:{write:!0}})],br.prototype,"minDensity",void 0),l([c({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],br.prototype,"minPixelIntensity",null),l([c({type:Number,cast:Fe,json:{write:!0}})],br.prototype,"radius",void 0),l([c({type:Number,range:{min:0},json:{default:0,write:!0}})],br.prototype,"referenceScale",void 0),l([X({heatmap:"heatmap"})],br.prototype,"type",void 0),l([c({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],br.prototype,"valueExpression",void 0),l([c({type:String})],br.prototype,"valueExpressionTitle",void 0),l([c({readOnly:!0})],br.prototype,"_pixelIntensityToDensity",null),br=KC=l([$("esri.renderers.HeatmapRenderer")],br);const UK=br;let Id=class extends Me(N){constructor(){super(...arguments),this.color=new le([0,0,0,0]),this.label=null,this.threshold=0}};l([c({type:le,json:{write:!0}})],Id.prototype,"color",void 0),l([c({type:String,json:{write:!0}})],Id.prototype,"label",void 0),l([c({type:Number,range:{min:0,max:1},json:{write:!0}})],Id.prototype,"threshold",void 0),Id=l([$("esri.renderers.support.OthersCategory")],Id);const DEe={base:Nm,key:"type",typeMap:{size:O$,opacity:Kk}};let ki=class extends Lm(Me(_l)){constructor(t){super(t),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new le([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Id,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){var t;return new ea({size:this.size?this.size/2+(((t=this.outline)==null?void 0:t.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Js)}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((r,i)=>r+i.getAttributeHash(),""))??""}getMeshHash(){return this.getSymbols().reduce((t,r)=>t+JSON.stringify(r),"")}async collectRequiredFields(t,r){await this.collectVVRequiredFields(t,r);for(const i of this.attributes)i.valueExpression&&await pi(t,r,i.valueExpression),i.field&&t.add(i.field)}};l([c({type:[VK],json:{write:!0}})],ki.prototype,"attributes",void 0),l([c(tP)],ki.prototype,"backgroundFillSymbol",void 0),l([c({type:le,json:{write:!0}})],ki.prototype,"defaultColor",void 0),l([c({type:String,json:{write:!0}})],ki.prototype,"defaultLabel",void 0),l([c({type:Number,range:{min:0,max:1},json:{write:!0}})],ki.prototype,"holePercentage",void 0),l([c({type:Id,json:{write:!0}})],ki.prototype,"othersCategory",void 0),l([c({type:rP,json:{write:!0}})],ki.prototype,"legendOptions",void 0),l([c({type:Ki,json:{default:null,write:!0}})],ki.prototype,"outline",void 0),l([c({type:Number,cast:Fe,json:{write:!0}})],ki.prototype,"size",void 0),l([X({pieChart:"pie-chart"})],ki.prototype,"type",void 0),l([c({types:[DEe]})],ki.prototype,"visualVariables",void 0),ki=l([$("esri.renderers.PieChartRenderer")],ki);const jEe=ki;var YC;let yd=YC=class extends Lm(_l){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(r=>r.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,r)=>t+r.getAttributeHash(),""))??""}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new YC({description:this.description,label:this.label,symbol:C(this.symbol),visualVariables:C(this.visualVariables),authoringInfo:C(this.authoringInfo)})}};l([c({type:String,json:{write:!0}})],yd.prototype,"description",void 0),l([c({type:String,json:{write:!0}})],yd.prototype,"label",void 0),l([c(eP)],yd.prototype,"symbol",void 0),l([X({simple:"simple"})],yd.prototype,"type",void 0),yd=YC=l([$("esri.renderers.SimpleRenderer")],yd);const Dm=yd,VEe=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function QC(e){return e instanceof te}function bj(e){return e instanceof Y?Object.keys(e.items):QC(e)?Wi(e).keys():e?Object.keys(e):[]}function dw(e,t){return e instanceof Y?e.items[t]:e[t]}function UEe(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function p0(e){return e?e.declaredClass:null}function zK(e,t){var f;const r=e.diff;if(r&&typeof r=="function")return r(e,t);const i=bj(e),n=bj(t);if(i.length===0&&n.length===0)return;if(!i.length||!n.length||UEe(e,t))return{type:"complete",oldValue:e,newValue:t};const s=n.filter(m=>!i.includes(m)),o=i.filter(m=>!n.includes(m)),a=i.filter(m=>n.includes(m)&&dw(e,m)!==dw(t,m)).concat(s,o).sort(),u=p0(e);if(u&&VEe.has(u)&&a.length)return{type:"complete",oldValue:e,newValue:t};let d;const h=QC(e)&&QC(t);for(const m of a){const y=dw(e,m),g=dw(t,m);let v;if((h||typeof y!="function"&&typeof g!="function")&&y!==g&&(y!=null||g!=null)){if(r&&r[m]&&typeof r[m]=="function")v=(f=r[m])==null?void 0:f.call(r,y,g);else if(y instanceof Date&&g instanceof Date){if(y.getTime()===g.getTime())continue;v={type:"complete",oldValue:y,newValue:g}}else v=typeof y=="object"&&typeof g=="object"&&p0(y)===p0(g)?zK(y,g):{type:"complete",oldValue:y,newValue:g};v!=null&&(d!=null?d.diff[m]=v:d={type:"partial",diff:{[m]:v}})}}return d}function e6e(e,t){return zEe(e,t)}function zEe(e,t){if(e==null)return!1;const r=t.split(".");let i=e;for(const n of r){if(i.type==="complete")return!0;if(i.type!=="partial")return!1;{const s=i.diff[n];if(!s)return!1;i=s}}return!0}function t6e(e,t){if(!e)return!1;if(e.type==="partial"){const r=Object.keys(e.diff);return r.length===1&&r[0]===t}return!1}function GEe(e,t){if(typeof e!="function"&&typeof t!="function"&&(e!=null||t!=null))return e==null||t==null||typeof e=="object"&&typeof t=="object"&&p0(e)!==p0(t)?{type:"complete",oldValue:e,newValue:t}:zK(e,t)}let Eh=class extends Me(N){constructor(t){super(t),this.value=null,this.value2=null,this.value3=null}};l([c(J_)],Eh.prototype,"value",void 0),l([c(J_)],Eh.prototype,"value2",void 0),l([c(J_)],Eh.prototype,"value3",void 0),Eh=l([$("esri.renderers.support.UniqueValue")],Eh);const Vf=Eh;let eu=class extends Me(N){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(t){if(t==null)return null;const r=typeof(t=Array.isArray(t)?t:[t])[0];return r==="string"||r==="number"?t.map(i=>new Vf({value:i})):r==="object"?t[0]instanceof Vf?t:t.map(i=>new Vf(i)):null}};l([c({type:String,json:{write:!0}})],eu.prototype,"description",void 0),l([c({type:String,json:{write:!0}})],eu.prototype,"label",void 0),l([c(k$)],eu.prototype,"symbol",void 0),l([c({type:[Vf],json:{type:[[String]],read:{reader:e=>e?e.map(t=>new Vf({value:t[0],value2:t[1],value3:t[2]})):null},write:{writer:(e,t)=>{const r=[];for(const i of e){const n=[i.value,i.value2,i.value3].filter(Js).map(s=>s.toString());r.push(n)}t.values=r}}}})],eu.prototype,"values",void 0),l([Ne("values")],eu.prototype,"castValues",null),eu=l([$("esri.renderers.support.UniqueValueClass")],eu);const GK=eu;let $g=class extends Me(N){constructor(t){super(t),this.heading=null,this.classes=null}};l([c({type:String,json:{write:!0}})],$g.prototype,"heading",void 0),l([c({type:[GK],json:{write:!0}})],$g.prototype,"classes",void 0),$g=l([$("esri.renderers.support.UniqueValueGroup")],$g);const XC=$g;var eA;let gd=eA=class extends N{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new eA({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var t;const e=JSON.stringify((t=this.symbol)==null?void 0:t.toJSON());return`${this.value}.${e}`}};l([c({type:String,json:{write:!0}})],gd.prototype,"description",void 0),l([c({type:String,json:{write:!0}})],gd.prototype,"label",void 0),l([c(eP)],gd.prototype,"symbol",void 0),l([c(J_)],gd.prototype,"value",void 0),gd=eA=l([$("esri.renderers.support.UniqueValueInfo")],gd);const h0=gd,Sj=new Map;async function BEe(e,t){try{return{data:(await ZEe(e,t)).data,baseUrl:Ioe(e),styleUrl:e}}catch(r){return Do(r),null}}function qEe(e,t,r){var u;const i=t.portal!=null?t.portal:fr.getDefault();let n;const s=`${i.url} - ${(u=i.user)==null?void 0:u.username} - ${e}`,o=Sj.get(s);if(o)return o;const a=HEe(e,i,r).then(d=>(n=d,d.fetchData())).then(d=>({data:d,baseUrl:n.itemUrl??"",styleName:e}));return Sj.set(s,a),a}function HEe(e,t,r){return t.load(r).then(()=>{const i=new Bs({disableExtraQuery:!0,query:`owner:${$j} AND type:${Tj} AND typekeywords:"${e}"`});return t.queryItems(i,r)}).then(({results:i})=>{var o;let n=null;const s=e.toLowerCase();if(i&&Array.isArray(i)){for(const a of i)if(((o=a.typeKeywords)==null?void 0:o.some(d=>d.toLowerCase()===s))&&a.type===Tj&&a.owner===$j){n=a;break}}if(!n)throw new R("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return n.load(r)})}function WEe(e,t,r){return(e==null?void 0:e.styleUrl)!=null?BEe(e.styleUrl,r):(e==null?void 0:e.styleName)!=null?qEe(e.styleName,t,r):Promise.reject(new R("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function s6e(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function o6e(e,t,r=["gltf"]){if(t==="cimRef")return encodeURI(e.cimRef);if(e.formatInfos&&!L("enable-feature:force-wosr"))for(const i of r){const n=e.formatInfos.find(s=>s.type===i);if(n)return n.href}return encodeURI(e.webRef)}function ZEe(e,t){const r={responseType:"json",query:{f:"json"},...t};return Le(ts(e),r)}const $j="esri_en",Tj="Style",a6e="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var Tg;const BK="esri.renderers.UniqueValueRenderer",kl=()=>j.getLogger(BK),xj="uvInfos-watcher",Ej="uvGroups-watcher",JEe=",",KEe=bt(h0);function YEe(e){const{field1:t,field2:r,field3:i,fieldDelimiter:n,uniqueValueInfos:s,valueExpression:o}=e,a=!(!t||!r);return[{classes:(s??[]).map(u=>{var w;const{symbol:d,label:h,value:f,description:m}=u,[y,g,v]=a?((w=f==null?void 0:f.toString())==null?void 0:w.split(n||""))||[]:[f],_=[];return(t||o)&&_.push(y),r&&_.push(g),i&&_.push(v),{symbol:d,label:h,values:[_],description:m}})}]}function qp(e){return e!=null&&e!==""&&(typeof e!="string"||e.trim()!==""&&e.toLowerCase()!=="<null>")||(e=null),e+""}let mt=Tg=class extends Lm(_l){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,r){if(!t&&!r)return;if(!t||!r)return{type:"complete",oldValue:t,newValue:r};let i=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<r.length;s++){const o=t.find(a=>a.value===r[s].value);o?GEe(o,r[s])?(n.changed.push({type:"complete",oldValue:o,newValue:r[s]}),i=!0):n.unchanged.push({oldValue:o,newValue:r[s]}):(n.added.push(r[s]),i=!0)}for(let s=0;s<t.length;s++)r.find(o=>o.value===t[s].value)||(n.removed.push(t[s]),i=!0);return i?n:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:bv(e)}writeField(e,t,r,i){typeof e=="string"?t[r]=e:i!=null&&i.messages?i.messages.push(new R("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):kl().error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,r){return r.portal||fr.getDefault()}readStyleOrigin(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const i=Am(t.styleUrl,r);return Object.freeze({styleUrl:i})}}writeStyleOrigin(e,t,r,i){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=Dv(e.styleUrl,i))}set uniqueValueGroups(e){this.styleOrigin?kl().error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?kl().error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){var i;if(this.styleOrigin)return void kl().error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r=typeof e=="object"?KEe(e):new h0({value:e,symbol:uW(t)}),(i=this.uniqueValueInfos)==null||i.push(r),this._valueInfoMap[qp(r.value)]=r,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void kl().error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let r=0;r<t.length;r++){const i=t[r];if(String(i.value)===String(e)){delete this._valueInfoMap[qp(e)],t.splice(r,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let r=t;return this.valueExpression&&(t==null?void 0:t.arcade)==null&&(r={...r,arcade:await pp()}),this._getUniqueValueInfo(e,r)}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void kl().error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this._getUniqueValueInfo(e,t);return(r==null?void 0:r.symbol)||this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(r==null?void 0:r.arcade)==null){const n=await pp(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),r={...r,arcade:n}}const i=this._getUniqueValueInfo(e,r);return(i==null?void 0:i.symbol)||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,r)=>t+r.getAttributeHash(),""))??""}getMeshHash(){var i;const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=(i=this.uniqueValueInfos)==null?void 0:i.reduce((n,s)=>n+s.getMeshHash(),"");return`${e}.${t}.${r}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new Tg({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:C(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:C(this.visualVariables),legendOptions:C(this.legendOptions),authoringInfo:C(this.authoringInfo),backgroundFillSymbol:C(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=C(this.uniqueValueInfos),r=C(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(C(this.styleOrigin))),Object.freeze(t),Object.freeze(r)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",r),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(i=>i.collectRequiredFields(e,t)),pi(e,t,this.valueExpression)];$i(e,t,this.field),$i(e,t,this.field2),$i(e,t,this.field3),await Promise.all(r)}populateFromStyle(){return WEe(this.styleOrigin,{portal:this.portal}).then(e=>{var r;const t=[];return this._valueInfoMap={},e!=null&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(i=>{const n=new Ip({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==e.data.defaultItem||(this.defaultSymbol=n,this._isDefaultSymbolDerived=!0);const s=new h0({value:i.name,symbol:n});t.push(s),this._valueInfoMap[qp(i.name)]=s}),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((r=this.uniqueValueInfos)!=null&&r.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",JEe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[qp(t.value)]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(xj);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const r of e)t.push(ce(()=>({symbol:r.symbol,value:r.value,label:r.label,description:r.description}),(i,n)=>{i!==n&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,xj)}}_watchUniqueValueGroups(){this.removeHandles(Ej);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const r of e){t.push(ce(()=>({classes:r.classes}),(i,n)=>{i!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const i of r.classes??[])t.push(ce(()=>({symbol:i.symbol,values:i.values,label:i.label,description:i.description}),(n,s)=>{n!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(t,Ej)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:r,field3:i,fieldDelimiter:n,uniqueValueGroups:s,valueExpression:o}=this;if(!t&&!o)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!t||!r);for(const u of s)for(const d of u.classes??[]){const{symbol:h,label:f,values:m,description:y}=d;for(const g of m??[]){const{value:v,value2:_,value3:w}=g,b=[v];r&&b.push(_),i&&b.push(w);const T=a?b.join(n||""):b[0]??void 0;e.push(new h0({symbol:h,label:f,value:T,description:y}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:r,valueExpression:i,fieldDelimiter:n,uniqueValueInfos:s}=this;if(!t&&!i||!s.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!t||!r),a=s.map(d=>{var w;const{symbol:h,label:f,value:m,description:y}=d,[g,v,_]=o?((w=m==null?void 0:m.toString())==null?void 0:w.split(n||""))||[]:[m];return new GK({symbol:h,label:f,description:y,values:[new Vf({value:g,value2:v,value3:_})]})}),u=[new XC({classes:a})];e&&Object.freeze(u),this._set("uniqueValueGroups",u),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:n,arcade:s,timeZone:o}=t??{};let a=this._cache.compiledFunc;const u=s.arcadeUtils;if(!a){const h=u.createSyntaxTree(this.valueExpression);a=u.createFunction(h),this._cache.compiledFunc=a}const d=u.executeFunction(a,u.createExecContext(e,u.getViewInfo({viewingMode:r,scale:i,spatialReference:n}),o));return this._valueInfoMap[qp(d)]}_getUnqiueValueInfoForFields(e){const t=this.field,r=e.attributes;let i;if(this.field2){const n=this.field2,s=this.field3,o=[];t&&o.push(r[t]),n&&o.push(r[n]),s&&o.push(r[s]),i=o.join(this.fieldDelimiter||"")}else t&&(i=r[t]);return this._valueInfoMap[qp(i)]}static fromPortalStyle(e,t){const r=new Tg(t==null?void 0:t.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",(t==null?void 0:t.portal)||fr.getDefault());const i=r.populateFromStyle();return i.catch(n=>{kl().error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",n)}),i}static fromStyleUrl(e,t){const r=new Tg(t==null?void 0:t.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));const i=r.populateFromStyle();return i.catch(n=>{kl().error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),i}};l([c({readOnly:!0})],mt.prototype,"_cache",null),l([X({uniqueValue:"unique-value"})],mt.prototype,"type",void 0),l([c(tP)],mt.prototype,"backgroundFillSymbol",void 0),l([c({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],mt.prototype,"field",null),l([Ne("field")],mt.prototype,"castField",null),l([B("field")],mt.prototype,"writeField",null),l([c({type:String,value:null,json:{write:!0}})],mt.prototype,"field2",null),l([c({type:String,value:null,json:{write:!0}})],mt.prototype,"field3",null),l([c({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],mt.prototype,"orderByClassesEnabled",void 0),l([c({type:String,value:null,json:{write:!0}})],mt.prototype,"valueExpression",null),l([c({type:String,json:{write:!0}})],mt.prototype,"valueExpressionTitle",void 0),l([c({type:rP,json:{write:!0}})],mt.prototype,"legendOptions",void 0),l([c({type:String,json:{write:!0}})],mt.prototype,"defaultLabel",void 0),l([c(XR({...k$},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],mt.prototype,"defaultSymbol",null),l([c({type:String,value:null,json:{write:!0}})],mt.prototype,"fieldDelimiter",null),l([c({type:fr,readOnly:!0})],mt.prototype,"portal",void 0),l([G("portal",["styleName"])],mt.prototype,"readPortal",null),l([c({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],mt.prototype,"styleOrigin",void 0),l([G("styleOrigin",["styleName","styleUrl"])],mt.prototype,"readStyleOrigin",null),l([B("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],mt.prototype,"writeStyleOrigin",null),l([c({type:[XC],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,r)=>(t.uniqueValueGroups||YEe(t)).map(i=>XC.fromJSON(i,r))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],mt.prototype,"uniqueValueGroups",null),l([c({type:[h0],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],mt.prototype,"uniqueValueInfos",null),mt=Tg=l([$(BK)],mt);const aP=mt,F$={key:"type",base:_l,typeMap:{heatmap:UK,simple:Dm,"unique-value":aP,"class-breaks":dK,"dot-density":PEe,dictionary:OEe,"pie-chart":jEe},errorContext:"renderer"},QEe={key:"type",base:_l,typeMap:{simple:Dm,"unique-value":aP,"class-breaks":dK,heatmap:UK},errorContext:"renderer",validate:XEe};function XEe(e){switch(e.type){case"simple":return eMe(e);case"unique-value":return tMe(e);case"class-breaks":return rMe(e);case"heatmap":return e}}function eMe(e){if(e.symbol)return e;j.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function tMe(e){const t=e.uniqueValueInfos,r=t==null?void 0:t.filter(({symbol:i,label:n},s)=>(i||j.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${s}] ${n}) without a symbol from web scene.`),!!i));return(r==null?void 0:r.length)!==(t==null?void 0:t.length)&&(e.uniqueValueInfos=r),e}function rMe(e){const t=e.classBreakInfos,r=t==null?void 0:t.filter(({symbol:i,label:n},s)=>(i||j.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${s}] ${n}) without a symbol from web scene.`),!!i));return(r==null?void 0:r.length)!==(t==null?void 0:t.length)&&(e.classBreakInfos=r),e}function l6e(e,t){return cv(e,null,t)}const iMe=wm({types:F$});function cv(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(r!=null&&r.messages&&r.messages.push(new wn("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):iMe(e,t,r):null}const Ar=(e=>e)(["operational-layers","basemap","ground"]);var tA;let vd=tA=class extends N{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new tA({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};l([c({type:String,json:{write:!0}})],vd.prototype,"expression",void 0),l([c({type:String,json:{write:!0}})],vd.prototype,"name",void 0),l([c({type:["boolean","date","number","string"],json:{write:!0}})],vd.prototype,"returnType",void 0),l([c({type:String,json:{write:!0}})],vd.prototype,"title",void 0),vd=tA=l([$("esri.form.ExpressionInfo")],vd);const nMe=vd;let wd=class extends N{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};l([c({type:String,json:{write:!0}})],wd.prototype,"description",void 0),l([c({type:String,json:{write:!0}})],wd.prototype,"label",void 0),l([c()],wd.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],wd.prototype,"visibilityExpression",void 0),wd=l([$("esri.form.elements.Element")],wd);const mp=wd;let tb=class extends Me(N){constructor(t){super(t),this.type=null}};l([c()],tb.prototype,"type",void 0),tb=l([$("esri.form.elements.inputs.attachments.Input")],tb);const sc=tb,D$=["any","capture","upload"];let Mh=class extends sc{constructor(t){super(t),this.type="audio",this.inputMethod="any",this.maxDuration=null}};l([c({type:["audio"],readOnly:!0,json:{write:!0}})],Mh.prototype,"type",void 0),l([c({type:D$,json:{write:!0}})],Mh.prototype,"inputMethod",void 0),l([c({type:Number,json:{write:!0}})],Mh.prototype,"maxDuration",void 0),Mh=l([$("esri.form.elements.inputs.attachments.AudioInput")],Mh);const Mj=Mh;let xg=class extends sc{constructor(t){super(t),this.type="document",this.maxFileSize=null}};l([c({type:["document"],readOnly:!0,json:{write:!0}})],xg.prototype,"type",void 0),l([c({type:Number,json:{write:!0}})],xg.prototype,"maxFileSize",void 0),xg=l([$("esri.form.elements.inputs.attachments.DocumentInput")],xg);const Ij=xg;let Ih=class extends sc{constructor(t){super(t),this.type="image",this.inputMethod="any",this.maxImageSize=null}};l([c({type:["image"],readOnly:!0,json:{write:!0}})],Ih.prototype,"type",void 0),l([c({type:D$,json:{write:!0}})],Ih.prototype,"inputMethod",void 0),l([c({type:Number,json:{write:!0}})],Ih.prototype,"maxImageSize",void 0),Ih=l([$("esri.form.elements.inputs.attachments.ImageInput")],Ih);const Cj=Ih;let Eg=class extends sc{constructor(t){super(t),this.type="signature",this.inputMethod="any"}};l([c({type:["signature"],readOnly:!0,json:{write:!0}})],Eg.prototype,"type",void 0),l([c({type:D$,json:{write:!0}})],Eg.prototype,"inputMethod",void 0),Eg=l([$("esri.form.elements.inputs.attachments.SignatureInput")],Eg);const Aj=Eg;let Ch=class extends sc{constructor(t){super(t),this.type="video",this.inputMethod="any",this.maxDuration=null}};l([c({type:["video"],readOnly:!0,json:{write:!0}})],Ch.prototype,"type",void 0),l([c({type:D$,json:{write:!0}})],Ch.prototype,"inputMethod",void 0),l([c({type:Number,json:{write:!0}})],Ch.prototype,"maxDuration",void 0),Ch=l([$("esri.form.elements.inputs.attachments.VideoInput")],Ch);const Rj=Ch;function qK(e){return{nestableTypes:{base:sc,key:"type",typeMap:{audio:Mj,document:Ij,image:Cj,signature:Aj,video:Rj}},allTypes:{base:sc,key:"type",typeMap:{attachment:e,audio:Mj,document:Ij,image:Cj,signature:Aj,video:Rj}}}}function sMe(e,t,r){return e?e.map(i=>ss(t.nestableTypes,i)):null}function oMe(e,t,r){if(!e)return null;const i=t.nestableTypes.typeMap;return e.filter(n=>i[n.type]).map(n=>i[n.type].fromJSON(n))}function aMe(e,t,r){if(!e)return null;const i=t.nestableTypes.typeMap;return e.filter(n=>i[n.type]).map(n=>n.toJSON())}let No=class extends sc{constructor(t){super(t),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(t){return sMe(t,Ox)}readInputs(t,r){return oMe(r.inputTypes,Ox)}writeInputs(t,r){r.inputTypes=aMe(t,Ox)}};l([c({type:["attachment"],readOnly:!0,json:{write:!0}})],No.prototype,"type",void 0),l([c({type:["any","exact","exactOrNone"],json:{write:!0}})],No.prototype,"attachmentAssociationType",void 0),l([c({json:{write:{isRequired:!0}}})],No.prototype,"inputTypes",void 0),l([Ne("inputTypes")],No.prototype,"castInputs",null),l([G("inputTypes")],No.prototype,"readInputs",null),l([B("inputTypes")],No.prototype,"writeInputs",null),No=l([$("esri.form.elements.inputs.attachments.AttachmentInput")],No);const Ox=qK(No),lMe=No;var rA;const uMe=qK(lMe);let sn=rA=class extends mp{constructor(e){super(e),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){var e;return new rA({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:(e=this.input)==null?void 0:e.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};l([c({type:Boolean,json:{write:!0}})],sn.prototype,"allowUserRename",void 0),l([c({type:String,json:{write:{isRequired:!0}}})],sn.prototype,"attachmentKeyword",void 0),l([c({type:Boolean,json:{write:!0}})],sn.prototype,"displayFilename",void 0),l([c({type:String,json:{write:!0}})],sn.prototype,"editableExpression",void 0),l([c({type:String,json:{write:!0}})],sn.prototype,"filenameExpression",void 0),l([c({types:uMe.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],sn.prototype,"input",void 0),l([c({type:Number,json:{write:!0}})],sn.prototype,"maxAttachmentCount",void 0),l([c({type:Number,json:{write:!0}})],sn.prototype,"minAttachmentCount",void 0),l([c({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],sn.prototype,"type",void 0),l([c({type:Boolean,json:{write:!0}})],sn.prototype,"useOriginalFilename",void 0),sn=rA=l([$("esri.form.elements.AttachmentElement")],sn);const Oj=sn;let rb=class extends N{constructor(t){super(t),this.type=null}};l([c()],rb.prototype,"type",void 0),rb=l([$("esri.form.elements.inputs.Input")],rb);const bl=rb;let Mg=class extends bl{constructor(t){super(t),this.maxLength=null,this.minLength=0}};l([c({type:Number,json:{write:!0}})],Mg.prototype,"maxLength",void 0),l([c({type:Number,json:{write:!0}})],Mg.prototype,"minLength",void 0),Mg=l([$("esri.form.elements.inputs.TextInput")],Mg);const lP=Mg;var iA;let ib=iA=class extends lP{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new iA({maxLength:this.maxLength,minLength:this.minLength})}};l([c({type:["barcode-scanner"],json:{read:!1,write:!0}})],ib.prototype,"type",void 0),ib=iA=l([$("esri.form.elements.inputs.BarcodeScannerInput")],ib);const cMe=ib;var nA;let Ah=nA=class extends bl{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new nA({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};l([c({type:String,json:{write:!0}})],Ah.prototype,"noValueOptionLabel",void 0),l([c({type:Boolean,json:{write:!0}})],Ah.prototype,"showNoValueOption",void 0),l([c({type:["combo-box"],json:{read:!1,write:!0}})],Ah.prototype,"type",void 0),Ah=nA=l([$("esri.form.elements.inputs.ComboBoxInput")],Ah);const dMe=Ah;var sA;function kj(e){return e??null}function Pj(e){return e??null}let Mo=sA=class extends bl{constructor(e){super(e),this.max=null,this.min=null,this.type="date-picker"}readMax(e,t){return kj(t.max)}writeMax(e,t){t.max=Pj(e)}readMin(e,t){return kj(t.min)}writeMin(e,t){t.min=Pj(e)}clone(){return new sA({max:this.max,min:this.min})}};l([c({type:String,json:{type:String,write:!0}})],Mo.prototype,"max",void 0),l([G("max")],Mo.prototype,"readMax",null),l([B("max")],Mo.prototype,"writeMax",null),l([c({type:String,json:{type:String,write:!0}})],Mo.prototype,"min",void 0),l([G("min")],Mo.prototype,"readMin",null),l([B("min")],Mo.prototype,"writeMin",null),l([c({type:["date-picker"],json:{read:!1,write:!0}})],Mo.prototype,"type",void 0),Mo=sA=l([$("esri.form.elements.inputs.DatePickerInput")],Mo);const pMe=Mo;var oA;function kx(e){return e??null}function Px(e){return e??null}let Pi=oA=class extends bl{constructor(e){super(e),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(e,t){return kx(t.max)}writeMax(e,t){t.max=Px(e)}readMin(e,t){return kx(t.min)}writeMin(e,t){t.min=Px(e)}readTimeResolution(e,t){return kx(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=Px(e)}clone(){return new oA({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};l([c({type:Boolean,json:{write:!0}})],Pi.prototype,"includeTimeOffset",void 0),l([c({type:String,json:{type:String,write:!0}})],Pi.prototype,"max",void 0),l([G("max")],Pi.prototype,"readMax",null),l([B("max")],Pi.prototype,"writeMax",null),l([c({type:String,json:{type:String,write:!0}})],Pi.prototype,"min",void 0),l([G("min")],Pi.prototype,"readMin",null),l([B("min")],Pi.prototype,"writeMin",null),l([c({type:String,json:{type:String,write:!0}})],Pi.prototype,"timeResolution",void 0),l([G("timeResolution")],Pi.prototype,"readTimeResolution",null),l([B("timeResolution")],Pi.prototype,"writeTimeResolution",null),l([c({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],Pi.prototype,"type",void 0),Pi=oA=l([$("esri.form.elements.inputs.DateTimeOffsetPickerInput")],Pi);const hMe=Pi;var aA;function Nj(e){return e!=null?new Date(e):null}function Lj(e){return e?e.getTime():null}let Rs=aA=class extends bl{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return Nj(t.max)}writeMax(e,t){t.max=Lj(e)}readMin(e,t){return Nj(t.min)}writeMin(e,t){t.min=Lj(e)}clone(){return new aA({includeTime:this.includeTime,max:this.max,min:this.min})}};l([c({type:Boolean,json:{write:!0}})],Rs.prototype,"includeTime",void 0),l([c({type:Date,json:{type:Number,write:!0}})],Rs.prototype,"max",void 0),l([G("max")],Rs.prototype,"readMax",null),l([B("max")],Rs.prototype,"writeMax",null),l([c({type:Date,json:{type:Number,write:!0}})],Rs.prototype,"min",void 0),l([G("min")],Rs.prototype,"readMin",null),l([B("min")],Rs.prototype,"writeMin",null),l([c({type:["datetime-picker"],json:{read:!1,write:!0}})],Rs.prototype,"type",void 0),Rs=aA=l([$("esri.form.elements.inputs.DateTimePickerInput")],Rs);const fMe=Rs;var lA;let Rh=lA=class extends bl{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new lA({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};l([c({type:String,json:{write:!0}})],Rh.prototype,"noValueOptionLabel",void 0),l([c({type:Boolean,json:{write:!0}})],Rh.prototype,"showNoValueOption",void 0),l([c({type:["radio-buttons"],json:{read:!1,write:!0}})],Rh.prototype,"type",void 0),Rh=lA=l([$("esri.form.elements.inputs.RadioButtonsInput")],Rh);const mMe=Rh;var uA;let Oh=uA=class extends bl{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new uA({offValue:this.offValue,onValue:this.onValue})}};l([c({type:[String,Number],json:{write:!0}})],Oh.prototype,"offValue",void 0),l([c({type:[String,Number],json:{write:!0}})],Oh.prototype,"onValue",void 0),l([c({type:["switch"],json:{read:!1,write:!0}})],Oh.prototype,"type",void 0),Oh=uA=l([$("esri.form.elements.inputs.SwitchInput")],Oh);const yMe=Oh;var cA;let nb=cA=class extends lP{constructor(e){super(e),this.type="text-area"}clone(){return new cA({maxLength:this.maxLength,minLength:this.minLength})}};l([c({type:["text-area"],json:{read:!1,write:!0}})],nb.prototype,"type",void 0),nb=cA=l([$("esri.form.elements.inputs.TextAreaInput")],nb);const gMe=nb;var dA;let sb=dA=class extends lP{constructor(e){super(e),this.type="text-box"}clone(){return new dA({maxLength:this.maxLength,minLength:this.minLength})}};l([c({type:["text-box"],json:{read:!1,write:!0}})],sb.prototype,"type",void 0),sb=dA=l([$("esri.form.elements.inputs.TextBoxInput")],sb);const vMe=sb;var pA;function Nx(e){return e??null}function Lx(e){return e??null}let on=pA=class extends bl{constructor(e){super(e),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(e,t){return Nx(t.max)}writeMax(e,t){t.max=Lx(e)}readMin(e,t){return Nx(t.min)}writeMin(e,t){t.min=Lx(e)}readTimeResolution(e,t){return Nx(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=Lx(e)}clone(){return new pA({max:this.max,min:this.min,timeResolution:this.timeResolution})}};l([c({type:String,json:{type:String,write:!0}})],on.prototype,"max",void 0),l([G("max")],on.prototype,"readMax",null),l([B("max")],on.prototype,"writeMax",null),l([c({type:String,json:{type:String,write:!0}})],on.prototype,"min",void 0),l([G("min")],on.prototype,"readMin",null),l([B("min")],on.prototype,"writeMin",null),l([c({type:String,json:{type:String,write:!0}})],on.prototype,"timeResolution",void 0),l([G("timeResolution")],on.prototype,"readTimeResolution",null),l([B("timeResolution")],on.prototype,"writeTimeResolution",null),l([c({type:["time-picker"],json:{read:!1,write:!0}})],on.prototype,"type",void 0),on=pA=l([$("esri.form.elements.inputs.TimePickerInput")],on);const wMe=on,_Me={base:bl,key:"type",typeMap:{"barcode-scanner":cMe,"combo-box":dMe,"date-picker":pMe,"datetime-picker":fMe,"datetimeoffset-picker":hMe,"radio-buttons":mMe,switch:yMe,"text-area":gMe,"text-box":vMe,"time-picker":wMe}};var hA;let Ln=hA=class extends mp{constructor(e){super(e),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new hA({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};l([c({types:hW,json:{read:{reader:v$},write:!0}})],Ln.prototype,"domain",void 0),l([c({type:Boolean,json:{write:!0}})],Ln.prototype,"editable",void 0),l([c({type:String,json:{write:!0}})],Ln.prototype,"editableExpression",void 0),l([c({type:String,json:{write:!0}})],Ln.prototype,"fieldName",void 0),l([c({type:String,json:{write:!0}})],Ln.prototype,"hint",void 0),l([c({types:_Me,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Ln.prototype,"input",void 0),l([c({type:String,json:{write:!0}})],Ln.prototype,"requiredExpression",void 0),l([c({type:String,json:{read:!1,write:!0}})],Ln.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],Ln.prototype,"valueExpression",void 0),Ln=hA=l([$("esri.form.elements.FieldElement")],Ln);const Fj=Ln;var fA;let Ia=fA=class extends mp{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new fA({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:C(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};l([c({type:Number,json:{write:!0}})],Ia.prototype,"displayCount",void 0),l([c({type:["list"],json:{write:!0}})],Ia.prototype,"displayType",void 0),l([c({type:String,json:{write:!0}})],Ia.prototype,"editableExpression",void 0),l([c({type:[pk],json:{write:!0}})],Ia.prototype,"orderByFields",void 0),l([c({type:Number,json:{write:!0}})],Ia.prototype,"relationshipId",void 0),l([c({type:["relationship"],json:{read:!1,write:!0}})],Ia.prototype,"type",void 0),Ia=fA=l([$("esri.form.elements.RelationshipElement")],Ia);const Dj=Ia;var mA;let kh=mA=class extends mp{constructor(e){super(e),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new mA({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};l([c({type:String,json:{write:!0}})],kh.prototype,"text",void 0),l([c({type:String,json:{write:!0}})],kh.prototype,"textFormat",void 0),l([c({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],kh.prototype,"type",void 0),kh=mA=l([$("esri.form.elements.TextElement")],kh);const jj=kh;function HK(e){return{typesWithGroup:{base:mp,key:"type",typeMap:{attachment:Oj,field:Fj,group:e,relationship:Dj,text:jj}},typesWithoutGroup:{base:mp,key:"type",typeMap:{attachment:Oj,field:Fj,relationship:Dj,text:jj}}}}function WK(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>i[n.type].fromJSON(n))}function ZK(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>n.toJSON())}function JK(e,t,r=!0){return e?e.map(i=>ss(r?t.typesWithGroup:t.typesWithoutGroup,i)):null}var yA;let Lo=yA=class extends mp{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return JK(e,Fx,!1)}readElements(e,t){return WK(t.formElements,Fx,!1)}writeElements(e,t){t.formElements=ZK(e,Fx,!1)}clone(){return new yA({description:this.description,elements:C(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};l([c({json:{write:!0}})],Lo.prototype,"elements",void 0),l([Ne("elements")],Lo.prototype,"castElements",null),l([G("elements",["formElements"])],Lo.prototype,"readElements",null),l([B("elements")],Lo.prototype,"writeElements",null),l([c({type:["collapsed","expanded"],json:{write:!0}})],Lo.prototype,"initialState",void 0),l([c({type:String,json:{read:!1,write:!0}})],Lo.prototype,"type",void 0),Lo=yA=l([$("esri.form.elements.GroupElement")],Lo);const Fx=HK(Lo),bMe=Lo,SMe=e=>e.type==="field",$Me=e=>e.type==="group",TMe=e=>e.type==="text";var gA;const Dx=HK(bMe);let Os=gA=class extends N{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return JK(e,Dx)}readElements(e,t){return WK(t.formElements,Dx)}writeElements(e,t){t.formElements=ZK(e,Dx)}clone(){return new gA({description:this.description,expressionInfos:C(this.expressionInfos),elements:C(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(e,t){const r=new Set,{description:i,elements:n,expressionInfos:s,title:o}=this;if(f0(r,e,i),f0(r,e,o),!n)return[];const a=xMe(n,s).map(u=>pi(r,e,u));await Promise.all(a);for(const u of n)KK(r,{fieldsIndex:e,relationships:t},u);return Array.from(r).sort()}};function KK(e,t,r){var n;const{fieldsIndex:i}=t;if(!i||i.fields.length!==e.size)switch(f0(e,i,r.label),f0(e,i,r.description),r.type){case"field":$i(e,i,r.fieldName);break;case"group":r.elements.forEach(s=>KK(e,t,s));break;case"relationship":if(t.relationships){const s=t.relationships.find(o=>o.id===r.relationshipId);s&&$i(e,i,s.keyField)}hp(e,i,(n=r.orderByFields)==null?void 0:n.map(s=>s.field));break;case"text":f0(e,i,r.text)}}function xMe(e,t){if(!t||t.length===0)return[];const r=YK(e),i=[];for(const n of t)r.has(n.name)&&i.push(n.expression);return i}function YK(e){const t=new Set;for(const r of e)if(DL(t,r.visibilityExpression),!TMe(r)){if($Me(r))sS(t,YK(r.elements));else if(DL(t,r.editableExpression),SMe(r)){const{requiredExpression:i,valueExpression:n}=r;sS(t,[i,n])}}return t}function f0(e,t,r){hp(e,t,xH(r))}l([c({type:String,json:{write:!0}})],Os.prototype,"description",void 0),l([c({json:{write:!0}})],Os.prototype,"elements",void 0),l([Ne("elements")],Os.prototype,"castElements",null),l([G("elements",["formElements"])],Os.prototype,"readElements",null),l([B("elements")],Os.prototype,"writeElements",null),l([c({type:[nMe],json:{write:!0}})],Os.prototype,"expressionInfos",void 0),l([c({type:Boolean,json:{default:!1,write:!0}})],Os.prototype,"preserveFieldValuesWhenHidden",void 0),l([c({type:String,json:{write:!0}})],Os.prototype,"title",void 0),Os=gA=l([$("esri.form.FormTemplate")],Os);const EMe=Os;function Vj(e,t,r){if(e.hasM==null||e.hasZ)for(const i of t)for(const n of i)n.length>2&&(n[2]*=r)}function MMe(e,t,r){if(!e&&!t||!r)return;const i=_S(r);Uj(e,r,i),Uj(t,r,i)}function Uj(e,t,r){if(e)for(const i of e)IMe(i.geometry,t,r)}function IMe(e,t,r){if(!(e!=null&&e.spatialReference)||Ht(e.spatialReference,t))return;const i=_S(e.spatialReference)/r;if(i!==1){if("x"in e)e.z!=null&&(e.z*=i);else if("rings"in e)Vj(e,e.rings,i);else if("paths"in e)Vj(e,e.paths,i);else if("points"in e&&(e.hasM==null||e.hasZ))for(const n of e.points)n.length>2&&(n[2]*=i)}}function zj(e,t,r){if(!(r!=null&&r.features)||!r.hasZ)return;const i=HB(r.geometryType,t,e.outSpatialReference);if(i!=null)for(const n of r.features)i(n.geometry)}var vA;const wA=new _e({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Sr=vA=class extends N{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){var n;const r=me.fromJSON(t.spatialReference),i=[];for(let s=0;s<e.length;s++){const o=e[s],a=Ti.fromJSON(o),u=(n=o.geometry)==null?void 0:n.spatialReference;a.geometry==null||u||(a.geometry.spatialReference=r);const d=o.aggregateGeometries,h=a.aggregateGeometries;if(d&&h!=null)for(const f in h){const m=h[f],y=d[f],g=y==null?void 0:y.spatialReference;m==null||g||(m.spatialReference=r)}i.push(a)}return i}writeGeometryType(e,t,r,i){if(e)return void wA.write(e,t,r,i);const{features:n}=this;if(n){for(const s of n)if((s==null?void 0:s.geometry)!=null)return void wA.write(s.geometry.type,t,r,i)}}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,i=dl(e);return i&&!r&&t.spatialReference&&(i.spatialReference=me.fromJSON(t.spatialReference)),i}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r){for(const i of r)if(i&&i.geometry!=null&&i.geometry.spatialReference)return void(t.spatialReference=i.geometry.spatialReference.toJSON())}}clone(){return new vA(this.cloneProperties())}cloneProperties(){return C({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const i=t.features[r];if(i.geometry){const n=e==null?void 0:e[r];i.geometry=(n==null?void 0:n.toJSON())||i.geometry}}return t}quantize(e){const{scale:[t,r],translate:[i,n]}=e,s=d=>Math.round((d-i)/t),o=d=>Math.round((n-d)/r),a=this.features,u=this._getQuantizationFunction(this.geometryType,s,o);for(let d=0,h=a.length;d<h;d++)u!=null&&u(a[d].geometry)||(a.splice(d,1),d--,h--);return this.transform=e,this}unquantize(){var m,y;const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[i,n],scale:[s,o]}=r,a=g=>g*s+i,u=g=>n-g*o;let d=null,h=null;if(this.hasZ&&((m=r==null?void 0:r.scale)==null?void 0:m[2])!=null){const{translate:[,,g],scale:[,,v]}=r;d=_=>_*v+g}if(this.hasM&&((y=r==null?void 0:r.scale)==null?void 0:y[3])!=null){const{translate:[,,,g],scale:[,,,v]}=r;h=_=>_==null?_:_*v+g}const f=this._getHydrationFunction(e,a,u,d,h);for(const{geometry:g}of t)g!=null&&f&&f(g);return this.transform=null,this}_quantizePoints(e,t,r){let i,n;const s=[];for(let o=0,a=e.length;o<a;o++){const u=e[o];if(o>0){const d=t(u[0]),h=r(u[1]);d===i&&h===n||(s.push([d-i,h-n]),i=d,n=h)}else i=t(u[0]),n=r(u[1]),s.push([i,n])}return s.length>0?s:null}_getQuantizationFunction(e,t,r){return e==="point"?i=>(i.x=t(i.x),i.y=r(i.y),i):e==="polyline"||e==="polygon"?i=>{const n=Gd(i)?i.rings:i.paths,s=[];for(let o=0,a=n.length;o<a;o++){const u=n[o],d=this._quantizePoints(u,t,r);d&&s.push(d)}return s.length>0?(Gd(i)?i.rings=s:i.paths=s,i):null}:e==="multipoint"?i=>{const n=this._quantizePoints(i.points,t,r);return n&&n.length>0?(i.points=n,i):null}:e==="extent"?i=>i:null}_getHydrationFunction(e,t,r,i,n){return e==="point"?s=>{s.x=t(s.x),s.y=r(s.y),i&&(s.z=i(s.z))}:e==="polyline"||e==="polygon"?s=>{const o=Gd(s)?s.rings:s.paths;let a,u;for(let d=0,h=o.length;d<h;d++){const f=o[d];for(let m=0,y=f.length;m<y;m++){const g=f[m];m>0?(a+=g[0],u+=g[1]):(a=g[0],u=g[1]),g[0]=t(a),g[1]=r(u)}}if(i&&n)for(let d=0,h=o.length;d<h;d++){const f=o[d];for(let m=0,y=f.length;m<y;m++){const g=f[m];g[2]=i(g[2]),g[3]=n(g[3])}}else if(i)for(let d=0,h=o.length;d<h;d++){const f=o[d];for(let m=0,y=f.length;m<y;m++){const g=f[m];g[2]=i(g[2])}}else if(n)for(let d=0,h=o.length;d<h;d++){const f=o[d];for(let m=0,y=f.length;m<y;m++){const g=f[m];g[2]=n(g[2])}}}:e==="extent"?s=>{s.xmin=t(s.xmin),s.ymin=r(s.ymin),s.xmax=t(s.xmax),s.ymax=r(s.ymax),i&&s.zmax!=null&&s.zmin!=null&&(s.zmax=i(s.zmax),s.zmin=i(s.zmin)),n&&s.mmax!=null&&s.mmin!=null&&(s.mmax=n(s.mmax),s.mmin=n(s.mmin))}:e==="multipoint"?s=>{const o=s.points;let a,u;for(let d=0,h=o.length;d<h;d++){const f=o[d];d>0?(a+=f[0],u+=f[1]):(a=f[0],u=f[1]),f[0]=t(a),f[1]=r(u)}if(i&&n)for(let d=0,h=o.length;d<h;d++){const f=o[d];f[2]=i(f[2]),f[3]=n(f[3])}else if(i)for(let d=0,h=o.length;d<h;d++){const f=o[d];f[2]=i(f[2])}else if(n)for(let d=0,h=o.length;d<h;d++){const f=o[d];f[2]=n(f[2])}}:null}};l([c({type:String,json:{write:!0}})],Sr.prototype,"displayFieldName",void 0),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Sr.prototype,"exceededTransferLimit",void 0),l([c({type:[Ti],json:{write:!0}})],Sr.prototype,"features",void 0),l([G("features")],Sr.prototype,"readFeatures",null),l([c({type:[Ik],json:{write:!0}})],Sr.prototype,"fields",void 0),l([c({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:wA.read}}})],Sr.prototype,"geometryType",void 0),l([B("geometryType")],Sr.prototype,"writeGeometryType",null),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Sr.prototype,"hasM",void 0),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Sr.prototype,"hasZ",void 0),l([c({types:bp,json:{write:!0}})],Sr.prototype,"queryGeometry",void 0),l([G("queryGeometry")],Sr.prototype,"readQueryGeometry",null),l([c({type:me,json:{write:!0}})],Sr.prototype,"spatialReference",void 0),l([B("spatialReference")],Sr.prototype,"writeSpatialReference",null),l([c({json:{write:!0}})],Sr.prototype,"transform",void 0),Sr=vA=l([$("esri.rest.support.FeatureSet")],Sr),Sr.prototype.toJSON.isDefaultToJSON=!0;const QK=Sr;let CMe=0,Ga=class extends ls.LoadableMixin(Fv(Y)){constructor(t){super(t),this._idToClientGraphic=null,this.type="memory"}load(t){const r=t!=null?t.signal:null;return this.addResolvingPromise(this._startWorker(r)),Promise.resolve(this)}destroy(){var t;(t=this._connection)==null||t.close(),this._connection=null}get _workerGeometryType(){var r;const t=(r=this.layer)==null?void 0:r.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(t){return this.load().then(()=>this._applyEdits(t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(t,r={}){await this.load(r);const i=await this._connection.invoke("queryFeatures",t?t.toJSON():null,r);zj(t,this.layer.spatialReference,i);const n=QK.fromJSON(i);if(!this._requiresClientGraphicMapping())return n;const s=this.layer.objectIdField;for(const o of n.features){const a=o.attributes[s],u=this._idToClientGraphic.get(a);u&&(o.geometry=u.geometry)}return n.geometryType=this.layer.geometryType,n}async queryFeaturesJSON(t,r={}){if(this._requiresClientGraphicMapping())throw new R("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(r);const i=await this._connection.invoke("queryFeatures",t?t.toJSON():null,r);return zj(t,this.layer.spatialReference,i),i}queryFeatureCount(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,r))}queryObjectIds(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,r))}queryExtent(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryExtent",t?t.toJSON():null,r)).then(i=>({count:i.count,extent:qe.fromJSON(i.extent)}))}querySnapping(t,r={}){return this.load(r).then(()=>this._connection.invoke("querySnapping",t,r))}async _applyEdits(t){if(!this._connection)throw new R("feature-layer-source:edit-failure","Memory source not loaded");const r=this.layer.objectIdField;let i=null;const n=[],s=[];await Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);const o=h=>"objectId"in h&&h.objectId!=null?h.objectId:"attributes"in h&&h.attributes[r]!=null?h.attributes[r]:null;if(t.addFeatures&&(i=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures)for(const h of t.deleteFeatures){const f=o(h);f!=null&&n.push(f)}const a=t.updateFeatures&&this._idToClientGraphic?new Map:null;if(t.updateFeatures){for(const h of t.updateFeatures)if(s.push(this._serializeFeature(h)),a){const f=o(h);f!=null&&a.set(f,h)}}MMe(i?i.features:null,s,this.layer.spatialReference);const{fullExtent:u,featureEditResults:d}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:s,deletes:n});return this.fullExtent=u,i&&i.finish(d.uidToObjectId),this._updateClientGraphicIds(a,d),this._createEditsResult(d)}async _prepareClientMapping(t,r){if(this._layerOrSourceGeometryType!=="mesh"||t==null)return;const i=[];for(const{geometry:n}of t)n==null||n.type!=="mesh"||n.hasExtent||n.loaded||i.push(n.load({signal:r}));i.length&&await Promise.all(i)}_updateClientGraphicIds(t,r){if(this._idToClientGraphic){if(t)for(const i of r.updateResults){if(!i.success)continue;const n=t.get(i.objectId);n!=null&&this._addIdToClientGraphic(n)}for(const i of r.deleteResults)i.success&&this._idToClientGraphic.delete(i.objectId)}}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const r=t.success===!0?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:r?new R("feature-layer-source:edit-failure",r.description,{code:r.code}):null}}_prepareAddFeatures(t){const r=new Map,i=new Array(t.length);let n=null;for(let o=0;o<t.length;o++){const a=t[o],u=this._serializeFeature(a);n||a.geometry==null||(n=a.geometry.type),i[o]=u,r.set(`${u.uid}`,a)}const s=this;return{features:i,inferredGeometryType:n,finish(o){const a=s.sourceJSON.objectIdField;for(const u in o){const d=o[u],h=r.get(u);h&&(h.attributes||(h.attributes={}),d===-1?delete h.attributes[a]:h.attributes[a]=d,s._addIdToClientGraphic(h))}}}}_addIdToClientGraphic(t){var n;if(!this._idToClientGraphic)return;const r=this.sourceJSON.objectIdField,i=(n=t.attributes)==null?void 0:n[r];i!=null&&this._idToClientGraphic.set(i,t)}get _layerOrSourceGeometryType(){var t,r;return((t=this.layer)==null?void 0:t.geometryType)??((r=this.sourceJSON)==null?void 0:r.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(t){return this._geometryTypeRequiresClientGraphicMapping(t.type)}_geometryTypeRequiresClientGraphicMapping(t){return t==="mesh"||t==="multipatch"||t==="extent"}_serializeFeature(t){const{attributes:r}=t,i=this._geometryForSerialization(t),n=(CMe++).toString();return i?{uid:n,geometry:i.toJSON(),attributes:r}:{uid:n,attributes:r}}_geometryForSerialization(t){const{geometry:r}=t;return r==null?null:this._geometryRequiresClientGraphicMapping(r)?r.extent?Zi.fromExtent(r.extent):null:r}async _startWorker(t){this._connection=await Gde("MemorySourceWorker",{strategy:L("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:this});const{fields:r,spatialReference:i,objectIdField:n,hasM:s,hasZ:o,timeInfo:a,dateFieldsTimeZone:u}=this.layer,d=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,t);const h=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",g=>{j.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),g.preventDefault()}));const f={features:h.features,fields:r==null?void 0:r.map(g=>g.toJSON()),geometryType:l4.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&s,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:n,spatialReference:d?null:i&&i.toJSON(),timeInfo:(a==null?void 0:a.toJSON())??null,dateFieldsTimeZone:u},m=await this._connection.invoke("load",f,{signal:t});for(const g of m.warnings)j.getLogger(this.layer).warn("#load()",`${g.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:g});m.featureErrors.length&&j.getLogger(this.layer).warn("#load()",`Encountered ${m.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:m.featureErrors});const y=m.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(h.inferredGeometryType)&&(y.geometryType=l4.toJSON(h.inferredGeometryType)),this.sourceJSON=y,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),h.finish(m.assignedObjectIds)}};l([CO({Type:Ti,ensureType:bt(Ti)})],Ga.prototype,"itemType",void 0),l([c()],Ga.prototype,"type",void 0),l([c({constructOnly:!0})],Ga.prototype,"layer",void 0),l([c({readOnly:!0})],Ga.prototype,"_workerGeometryType",null),l([c()],Ga.prototype,"sourceJSON",void 0),Ga=l([$("esri.layers.graphics.sources.MemorySource")],Ga);function AMe(e){return"portalItem"in e}const RMe=e=>{let t=class extends e{get apiKey(){var r;return this._isOverridden("apiKey")?this._get("apiKey"):AMe(this)?(r=this.portalItem)==null?void 0:r.apiKey:null}set apiKey(r){r!=null?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return l([c({type:String})],t.prototype,"apiKey",null),t=l([$("esri.layers.mixins.APIKeyMixin")],t),t},OMe=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const r=ic(this.url);if(r!=null&&r.title)return r.title}return this._get("title")||""}set title(r){this._set("title",r)}set url(r){this._set("url",wve(r,j.getLogger(this)))}};return l([c()],t.prototype,"title",null),l([c({type:String})],t.prototype,"url",null),t=l([$("esri.layers.mixins.ArcGISService")],t),t};function kMe(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function Uf(e,t,r,i){var n=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(n,Uf.prototype),n.expected=t,n.found=r,n.location=i,n.name="SyntaxError",n}function jx(e,t,r){return r=r||" ",e.length>t?e:(t-=e.length,e+(r+=r.repeat(t)).slice(0,t))}function PMe(e,t){var r,i={},n=(t=t!==void 0?t:{}).grammarSource,s={start:PP},o=PP,a="none",u=")",d=",",h="(",f="%",m="px",y="cm",g="mm",v="in",_="pt",w="pc",b="deg",T="rad",x="grad",M="turn",I="#",O=".",P="e",z=/^[ \t\n\r]/,U=/^[a-z\-]/,W=/^[0-9a-fA-F]/,ee=/^[+\-]/,de=/^[0-9]/,oe=na("none"),Pe=gr("none",!1),tr=gr(")",!1),Re=gr(",",!1),q=na("whitespace"),pe=Um([" ","	",`
`,"\r"],!1,!1),Ie=na("function"),dt=gr("(",!1),Wt=na("identifier"),vc=Um([["a","z"],"-"],!1,!1),ra=na("percentage"),Vm=gr("%",!1),ia=na("length"),Ap=gr("px",!1),fQ=gr("cm",!1),mQ=gr("mm",!1),yQ=gr("in",!1),gQ=gr("pt",!1),vQ=gr("pc",!1),wQ=na("angle"),_Q=gr("deg",!1),bQ=gr("rad",!1),SQ=gr("grad",!1),$Q=gr("turn",!1),TQ=na("number"),xQ=na("color"),EQ=gr("#",!1),AP=Um([["0","9"],["a","f"],["A","F"]],!1,!1),RP=Um(["+","-"],!1,!1),Sl=Um([["0","9"]],!1,!1),MQ=gr(".",!1),IQ=gr("e",!1),CQ=function(){return[]},AQ=function(E,V){return{type:"function",name:E,parameters:V||[]}},RQ=function(E,V){return V.length>0?cX(E,V,3):[E]},OQ=function(E){return{type:"quantity",value:E.value,unit:E.unit}},kQ=function(E){return{type:"color",colorType:E.type,value:E.value}},PQ=function(E){return E},NQ=function(){return Xv()},LQ=function(E){return{value:E,unit:"%"}},FQ=function(E){return{value:E,unit:"px"}},DQ=function(E){return{value:E,unit:"cm"}},jQ=function(E){return{value:E,unit:"mm"}},VQ=function(E){return{value:E,unit:"in"}},UQ=function(E){return{value:E,unit:"pt"}},zQ=function(E){return{value:E,unit:"pc"}},GQ=function(E){return{value:E,unit:"deg"}},BQ=function(E){return{value:E,unit:"rad"}},qQ=function(E){return{value:E,unit:"grad"}},HQ=function(E){return{value:E,unit:"turn"}},WQ=function(E){return{value:E,unit:null}},ZQ=function(){return{type:"hex",value:Xv()}},JQ=function(E){return{type:"function",value:E}},KQ=function(){return{type:"named",value:Xv()}},YQ=function(){return parseFloat(Xv())},F=0|t.peg$currPos,St=F,Rp=[{line:1,column:1}],ds=F,Qv=t.peg$maxFailExpected||[],ue=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in s))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');o=s[t.startRule]}function Xv(){return e.substring(St,F)}function gr(E,V){return{type:"literal",text:E,ignoreCase:V}}function Um(E,V,J){return{type:"class",parts:E,inverted:V,ignoreCase:J}}function QQ(){return{type:"end"}}function na(E){return{type:"other",description:E}}function OP(E){var V,J=Rp[E];if(J)return J;if(E>=Rp.length)V=Rp.length-1;else for(V=E;!Rp[--V];);for(J={line:(J=Rp[V]).line,column:J.column};V<E;)e.charCodeAt(V)===10?(J.line++,J.column=1):J.column++,V++;return Rp[E]=J,J}function kP(E,V,J){var we=OP(E),rt=OP(V);return{source:n,start:{offset:E,line:we.line,column:we.column},end:{offset:V,line:rt.line,column:rt.column}}}function $e(E){F<ds||(F>ds&&(ds=F,Qv=[]),Qv.push(E))}function XQ(E,V,J){return new Uf(Uf.buildMessage(E,V),E,V,J)}function PP(){var E;return(E=eX())===i&&(E=tX()),E}function eX(){var E,V;return ue++,E=F,vr(),e.substr(F,4)===a?(V=a,F+=4):(V=i,ue===0&&$e(Pe)),V!==i?(vr(),St=E,E=CQ()):(F=E,E=i),ue--,E===i&&ue===0&&$e(oe),E}function tX(){var E,V;if(E=[],(V=z$())!==i)for(;V!==i;)E.push(V),V=z$();else E=i;return E}function z$(){var E,V,J,we;return E=F,vr(),(V=iX())!==i?(vr(),(J=rX())===i&&(J=null),vr(),e.charCodeAt(F)===41?(we=u,F++):(we=i,ue===0&&$e(tr)),we!==i?(vr(),St=E,E=AQ(V,J)):(F=E,E=i)):(F=E,E=i),E}function rX(){var E,V,J,we,rt,Nt,rr,Mi;if(E=F,(V=G$())!==i){for(J=[],we=F,rt=vr(),e.charCodeAt(F)===44?(Nt=d,F++):(Nt=i,ue===0&&$e(Re)),Nt===i&&(Nt=null),rr=vr(),(Mi=G$())!==i?we=rt=[rt,Nt,rr,Mi]:(F=we,we=i);we!==i;)J.push(we),we=F,rt=vr(),e.charCodeAt(F)===44?(Nt=d,F++):(Nt=i,ue===0&&$e(Re)),Nt===i&&(Nt=null),rr=vr(),(Mi=G$())!==i?we=rt=[rt,Nt,rr,Mi]:(F=we,we=i);St=E,E=RQ(V,J)}else F=E,E=i;return E}function G$(){var E,V;return E=F,(V=nX())===i&&(V=sX())===i&&(V=oX())===i&&(V=aX()),V!==i&&(St=E,V=OQ(V)),(E=V)===i&&(E=F,(V=lX())!==i&&(St=E,V=kQ(V)),E=V),E}function vr(){var E,V;for(ue++,E=[],V=e.charAt(F),z.test(V)?F++:(V=i,ue===0&&$e(pe));V!==i;)E.push(V),V=e.charAt(F),z.test(V)?F++:(V=i,ue===0&&$e(pe));return ue--,V=i,ue===0&&$e(q),E}function iX(){var E,V,J;return ue++,E=F,(V=NP())!==i?(e.charCodeAt(F)===40?(J=h,F++):(J=i,ue===0&&$e(dt)),J!==i?(St=E,E=PQ(V)):(F=E,E=i)):(F=E,E=i),ue--,E===i&&(V=i,ue===0&&$e(Ie)),E}function NP(){var E,V,J;if(ue++,E=F,V=[],J=e.charAt(F),U.test(J)?F++:(J=i,ue===0&&$e(vc)),J!==i)for(;J!==i;)V.push(J),J=e.charAt(F),U.test(J)?F++:(J=i,ue===0&&$e(vc));else V=i;return V!==i&&(St=E,V=NQ()),ue--,(E=V)===i&&(V=i,ue===0&&$e(Wt)),E}function nX(){var E,V,J;return ue++,E=F,vr(),(V=Tn())!==i?(e.charCodeAt(F)===37?(J=f,F++):(J=i,ue===0&&$e(Vm)),J!==i?(St=E,E=LQ(V)):(F=E,E=i)):(F=E,E=i),ue--,E===i&&ue===0&&$e(ra),E}function sX(){var E,V,J;return ue++,E=F,vr(),(V=Tn())!==i?(e.substr(F,2)===m?(J=m,F+=2):(J=i,ue===0&&$e(Ap)),J!==i?(St=E,E=FQ(V)):(F=E,E=i)):(F=E,E=i),E===i&&(E=F,vr(),(V=Tn())!==i?(e.substr(F,2)===y?(J=y,F+=2):(J=i,ue===0&&$e(fQ)),J!==i?(St=E,E=DQ(V)):(F=E,E=i)):(F=E,E=i),E===i&&(E=F,vr(),(V=Tn())!==i?(e.substr(F,2)===g?(J=g,F+=2):(J=i,ue===0&&$e(mQ)),J!==i?(St=E,E=jQ(V)):(F=E,E=i)):(F=E,E=i),E===i&&(E=F,vr(),(V=Tn())!==i?(e.substr(F,2)===v?(J=v,F+=2):(J=i,ue===0&&$e(yQ)),J!==i?(St=E,E=VQ(V)):(F=E,E=i)):(F=E,E=i),E===i&&(E=F,vr(),(V=Tn())!==i?(e.substr(F,2)===_?(J=_,F+=2):(J=i,ue===0&&$e(gQ)),J!==i?(St=E,E=UQ(V)):(F=E,E=i)):(F=E,E=i),E===i&&(E=F,vr(),(V=Tn())!==i?(e.substr(F,2)===w?(J=w,F+=2):(J=i,ue===0&&$e(vQ)),J!==i?(St=E,E=zQ(V)):(F=E,E=i)):(F=E,E=i)))))),ue--,E===i&&ue===0&&$e(ia),E}function oX(){var E,V,J;return ue++,E=F,(V=Tn())!==i?(e.substr(F,3)===b?(J=b,F+=3):(J=i,ue===0&&$e(_Q)),J!==i?(St=E,E=GQ(V)):(F=E,E=i)):(F=E,E=i),E===i&&(E=F,(V=Tn())!==i?(e.substr(F,3)===T?(J=T,F+=3):(J=i,ue===0&&$e(bQ)),J!==i?(St=E,E=BQ(V)):(F=E,E=i)):(F=E,E=i),E===i&&(E=F,(V=Tn())!==i?(e.substr(F,4)===x?(J=x,F+=4):(J=i,ue===0&&$e(SQ)),J!==i?(St=E,E=qQ(V)):(F=E,E=i)):(F=E,E=i),E===i&&(E=F,(V=Tn())!==i?(e.substr(F,4)===M?(J=M,F+=4):(J=i,ue===0&&$e($Q)),J!==i?(St=E,E=HQ(V)):(F=E,E=i)):(F=E,E=i)))),ue--,E===i&&(V=i,ue===0&&$e(wQ)),E}function aX(){var E,V;return ue++,E=F,vr(),(V=Tn())!==i?(St=E,E=WQ(V)):(F=E,E=i),ue--,E===i&&ue===0&&$e(TQ),E}function lX(){var E,V,J,we;if(ue++,E=F,e.charCodeAt(F)===35?(V=I,F++):(V=i,ue===0&&$e(EQ)),V!==i){if(J=[],we=e.charAt(F),W.test(we)?F++:(we=i,ue===0&&$e(AP)),we!==i)for(;we!==i;)J.push(we),we=e.charAt(F),W.test(we)?F++:(we=i,ue===0&&$e(AP));else J=i;J!==i?(St=E,E=ZQ()):(F=E,E=i)}else F=E,E=i;return E===i&&(E=F,(V=z$())!==i&&(St=E,V=JQ(V)),(E=V)===i&&(E=F,(V=NP())!==i&&(St=E,V=KQ()),E=V)),ue--,E===i&&(V=i,ue===0&&$e(xQ)),E}function Tn(){var E,V,J,we,rt,Nt,rr,Mi;for(E=F,V=e.charAt(F),ee.test(V)?F++:(V=i,ue===0&&$e(RP)),V===i&&(V=null),J=F,we=[],rt=e.charAt(F),de.test(rt)?F++:(rt=i,ue===0&&$e(Sl));rt!==i;)we.push(rt),rt=e.charAt(F),de.test(rt)?F++:(rt=i,ue===0&&$e(Sl));if(e.charCodeAt(F)===46?(rt=O,F++):(rt=i,ue===0&&$e(MQ)),rt!==i){if(Nt=[],rr=e.charAt(F),de.test(rr)?F++:(rr=i,ue===0&&$e(Sl)),rr!==i)for(;rr!==i;)Nt.push(rr),rr=e.charAt(F),de.test(rr)?F++:(rr=i,ue===0&&$e(Sl));else Nt=i;Nt!==i?J=we=[we,rt,Nt]:(F=J,J=i)}else F=J,J=i;if(J===i)if(J=[],we=e.charAt(F),de.test(we)?F++:(we=i,ue===0&&$e(Sl)),we!==i)for(;we!==i;)J.push(we),we=e.charAt(F),de.test(we)?F++:(we=i,ue===0&&$e(Sl));else J=i;if(J!==i){if(we=F,e.charCodeAt(F)===101?(rt=P,F++):(rt=i,ue===0&&$e(IQ)),rt!==i){if(Nt=e.charAt(F),ee.test(Nt)?F++:(Nt=i,ue===0&&$e(RP)),Nt===i&&(Nt=null),rr=[],Mi=e.charAt(F),de.test(Mi)?F++:(Mi=i,ue===0&&$e(Sl)),Mi!==i)for(;Mi!==i;)rr.push(Mi),Mi=e.charAt(F),de.test(Mi)?F++:(Mi=i,ue===0&&$e(Sl));else rr=i;rr!==i?we=rt=[rt,Nt,rr]:(F=we,we=i)}else F=we,we=i;we===i&&(we=null),St=E,E=YQ()}else F=E,E=i;return E}function uX(E,V){return E.map(function(J){return J[V]})}function cX(E,V,J){return[E].concat(uX(V,J))}if(r=o(),t.peg$library)return{peg$result:r,peg$currPos:F,peg$FAILED:i,peg$maxFailExpected:Qv,peg$maxFailPos:ds};if(r!==i&&F===e.length)return r;throw r!==i&&F<e.length&&$e(QQ()),XQ(Qv,ds<e.length?e.charAt(ds):null,ds<e.length?kP(ds,ds+1):kP(ds,ds))}function XK(e){if(!e||e.length===0)return null;if(typeof e=="string"){const r=Gj(e);return r&&r.length!==0?r:null}const t=e.map(r=>{if(!Number.isFinite(r.scale)||r.scale<=0)throw new R("effect:invalid-scale","scale must be finite and greater than 0",{stop:r});return{scale:r.scale,effects:Gj(r.value)}});t.sort((r,i)=>i.effects.length-r.effects.length);for(let r=0;r<t.length-1;r++){if(!aye(t[r].effects,t[r+1].effects))throw new R("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[r].effects,b:t[r+1].effects});lye(t[r].effects,t[r+1].effects)}return t.sort((r,i)=>i.scale-r.scale),t}function Gj(e){let t;if(!e)return[];try{t=PMe(e)}catch(r){throw new R("effect:invalid-syntax","Invalid effect syntax",{value:e,error:r})}return t.map(r=>NMe(r))}function NMe(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return LMe(e);case"opacity":return FMe(e);case"hue-rotate":return DMe(e);case"blur":return jMe(e);case"drop-shadow":return VMe(e);case"bloom":return UMe(e)}}catch(t){throw t.details.filter=e,t}throw new R("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function LMe(e){let t=1;return jm(e.parameters,1),e.parameters.length===1&&(t=zs(e.parameters[0])),new fI(e.name,t)}function FMe(e){let t=1;return jm(e.parameters,1),e.parameters.length===1&&(t=zs(e.parameters[0])),new Kq(t)}function DMe(e){let t=0;return jm(e.parameters,1),e.parameters.length===1&&(t=WMe(e.parameters[0])),new Zq(t)}function jMe(e){let t=0;return jm(e.parameters,1),e.parameters.length===1&&(t=dP(e.parameters[0]),Kv(t,e.parameters[0])),new Gq(t)}function VMe(e){const t=[];let r=null;for(const i of e.parameters)if(i.type==="color"){if(t.length&&Object.freeze(t),r)throw new R("effect:type-error","Accepts only one color",{});r=ZMe(i)}else{const n=dP(i);if(Object.isFrozen(t))throw new R("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(n),t.length===3&&Kv(n,i)}if(t.length<2||t.length>3)throw new R("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new Hq(t[0],t[1],t[2]||0,r||eY("black"))}function UMe(e){let t=1,r=0,i=0;return jm(e.parameters,3),e.parameters[0]&&(t=zs(e.parameters[0])),e.parameters[1]&&(r=dP(e.parameters[1]),Kv(r,e.parameters[1])),e.parameters[2]&&(i=zs(e.parameters[2])),new Uq(t,r,i)}function jm(e,t){if(e.length>t)throw new R("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function j$(e){if(e.type==="color")return"<color>";if(e.unit){if(e.unit in cP)return"<length>";if(e.unit in uP)return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function Kv(e,t){if(e<0)throw new R("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function zMe(e){if(e.type!=="quantity"||e.unit!==null)throw new R("effect:type-error",`Expected <double>, Actual: ${j$(e)}`,{term:e})}function GMe(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new R("effect:type-error",`Expected <double> or <percentage>, Actual: ${j$(e)}`,{term:e})}kMe(Uf,Error),Uf.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var r,i=null;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){i=e[r].text.split(/\r\n|\n|\r/g);break}var n=this.location.start,s=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(n):n,o=this.location.source+":"+s.line+":"+s.column;if(i){var a=this.location.end,u=jx("",s.line.toString().length," "),d=i[n.line-1],h=(n.line===a.line?a.column:d.length+1)-n.column||1;t+=`
 --> `+o+`
`+u+` |
`+s.line+" | "+d+`
`+u+" | "+jx("",n.column-1," ")+jx("",h,"^")}else t+=`
 at `+o}return t},Uf.buildMessage=function(e,t){var r={literal:function(d){return'"'+n(d.text)+'"'},class:function(d){var h=d.parts.map(function(f){return Array.isArray(f)?s(f[0])+"-"+s(f[1]):s(f)});return"["+(d.inverted?"^":"")+h.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(d){return d.description}};function i(d){return d.charCodeAt(0).toString(16).toUpperCase()}function n(d){return d.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+i(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+i(h)})}function s(d){return d.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+i(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+i(h)})}function o(d){return r[d.type](d)}function a(d){var h,f,m=d.map(o);if(m.sort(),m.length>0){for(h=1,f=1;h<m.length;h++)m[h-1]!==m[h]&&(m[f]=m[h],f++);m.length=f}switch(m.length){case 1:return m[0];case 2:return m[0]+" or "+m[1];default:return m.slice(0,-1).join(", ")+", or "+m[m.length-1]}}function u(d){return d?'"'+n(d)+'"':"end of input"}return"Expected "+a(e)+" but "+u(t)+" found."};const uP={deg:1,grad:.9,rad:180/Math.PI,turn:360};function BMe(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&uP[e.unit]!=null))throw new R("effect:type-error",`Expected <angle>, Actual: ${j$(e)}`,{term:e})}const cP={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function qMe(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&cP[e.unit]!=null))throw new R("effect:type-error",`Expected <length>, Actual: ${j$(e)}`,{term:e})}function zs(e){GMe(e);const t=e.value;return Kv(t,e),e.unit==="%"?.01*t:t}function HMe(e){return zMe(e),Kv(e.value,e),e.value}function WMe(e){return BMe(e),e.value*uP[e.unit]||0}function dP(e){return qMe(e),e.value*cP[e.unit]||0}function ZMe(e){switch(e.colorType){case"hex":return Kfe(e.value);case"named":return eY(e.value);case"function":return YMe(e.value)}}function eY(e){if(!Oq(e))throw new R("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return Jfe(e)}const JMe=/^rgba?/i,KMe=/^hsla?/i;function YMe(e){if(jm(e.parameters,4),JMe.test(e.name))return[zs(e.parameters[0]),zs(e.parameters[1]),zs(e.parameters[2]),e.parameters[3]?zs(e.parameters[3]):1];if(KMe.test(e.name))return kq(HMe(e.parameters[0]),zs(e.parameters[1]),zs(e.parameters[2]),e.parameters[3]?zs(e.parameters[3]):1);throw new R("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function dv(e,t,r){var i;try{return XMe(e)}catch(n){(i=r==null?void 0:r.messages)==null||i.push(n)}return null}function pv(e,t,r,i){try{const n=QMe(e);cr(r,n,t)}catch(n){i.messages&&i.messages.push(n)}}function QMe(e){const t=XK(e);return t?uye(t)?t.map(r=>r.toJSON()):t.map(({scale:r,effects:i})=>({scale:r,value:i.map(n=>n.toJSON())})):null}function XMe(e){if(!e||e.length===0)return null;if(eIe(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:Bj(r.value)});return t}return Bj(e)}function eIe(e){const t=e[0];return!!t&&"scale"in t}function Bj(e){if(!(e!=null&&e.length))return"";const t=[];for(const r of e){let i=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":i=[ua(r,"amount")];break;case"blur":i=[ua(r,"radius","pt")];break;case"hue-rotate":i=[ua(r,"angle","deg")];break;case"drop-shadow":i=[ua(r,"xoffset","pt"),ua(r,"yoffset","pt"),ua(r,"blurRadius","pt"),tIe(r,"color")];break;case"bloom":i=[ua(r,"strength"),ua(r,"radius","pt"),ua(r,"threshold")]}const n=`${r.type}(${i.filter(Boolean).join(" ")})`;XK(n),t.push(n)}return t.join(" ")}function ua(e,t,r){if(e[t]==null)throw new R("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return r?e[t]+r:""+e[t]}function tIe(e,t){if(e[t]==null)throw new R("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const r=e[t];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}const rIe={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}},qj={read:{reader:dv},write:{allowNull:!0,writer:pv}},iIe={json:{read:!1,write:!1,origins:{"web-map":qj,"portal-item":qj}}},nIe=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return l([c(rIe)],t.prototype,"blendMode",void 0),l([c(iIe)],t.prototype,"effect",void 0),t=l([$("esri.layers.mixins.BlendLayer")],t),t},sIe=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return l([c({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],t.prototype,"customParameters",void 0),t=l([$("esri.layers.mixins.CustomParametersMixin")],t),t},_A=P2e(),tY=new Map,rY=new Map;async function _6e(e,t,r){if(!e||!r)return!1;if(!t)return!0;const i=new URL(e).host;let n=tY.get(i);if(!n){const s=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");n=(await Le(s,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return n===t}async function Hj(e,t,r=!1){var s,o,a;if(!e||!t)return!0;const i=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),n=(s=rY.get(i))==null?void 0:s.entries();if(n){for(const[u,d]of n)if(d.name===t){const h=!((o=d.stack)!=null&&o.hasForwardEdits());if(!h&&r){const[{deleteForwardEdits:f},{default:m}]=await Promise.all([D(()=>import("./deleteForwardEdits-BQWKq-57.js"),[],import.meta.url),D(()=>import("./DeleteForwardEditsParameters-jzRElHFx.js"),[],import.meta.url)]),y=await f(i,u,new m({sessionId:_A,moment:d.moment}));return y.success&&((a=d.stack)==null||a.clearForwardEdits()),y.success}return h}}return!0}function ob(e,t){var n;if(!e)return!1;const r=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),i=(n=rY.get(r))==null?void 0:n.entries();if(i){for(const[s,o]of i)if(o.name===t)return o.lockType==="edit"}return!1}const pP=new cs.EventEmitter;function iY(e){return pP.on("apply-edits",new WeakRef(e))}function nY(e){return pP.on("update-moment",new WeakRef(e))}function Wj(e,t,r=null,i=!1){const n=_n();return i=t==null||i,pP.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:r,mayReceiveServiceEdits:i,result:n.promise}),n}const sY=Symbol();function b6e(e){return e!=null&&typeof e=="object"&&sY in e}function wy(e){return e!=null&&typeof e=="object"&&"gdbVersion"in e}function m0(e,t,r){const i=new URL(e).host,n=tY.get(i),s=o=>!o||o===n;return s(t)&&s(r)||t===r}const oIe=e=>{var t;let r=class extends e{constructor(...i){super(...i),this[t]=!0,this._applyEditsHandler=n=>{const{serviceUrl:s,layerId:o,gdbVersion:a,mayReceiveServiceEdits:u,result:d}=n,h=s===this.url,f=o!=null&&this.layerId!=null&&o===this.layerId,m=wy(this),y=wy(this)&&m0(s,a,this.gdbVersion);if(!h||m&&!y||!f&&!u)return;const g=d.then(v=>{var b;if(this.lastEditsEventDate=new Date,f&&(v.addedFeatures.length||v.updatedFeatures.length||v.deletedFeatures.length||v.addedAttachments.length||v.updatedAttachments.length||v.deletedAttachments.length))return this.emit("edits",C(v)),v;const _=(b=v.editedFeatures)==null?void 0:b.find(({layerId:T})=>T===this.layerId);if(_){const{adds:T,updates:x,deletes:M}=_.editedFeatures,I={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:T?T.map(({attributes:O})=>({objectId:this.objectIdField&&O[this.objectIdField],globalId:this.globalIdField&&O[this.globalIdField]})):[],deletedFeatures:M?M.map(({attributes:O})=>({objectId:this.objectIdField&&O[this.objectIdField],globalId:this.globalIdField&&O[this.globalIdField]})):[],updatedFeatures:x?x.map(({current:{attributes:O}})=>({objectId:this.objectIdField&&O[this.objectIdField],globalId:this.globalIdField&&O[this.globalIdField]})):[],editedFeatures:C(v.editedFeatures),exceededTransferLimit:!1,historicMoment:C(v.historicMoment)};return this.emit("edits",I),I}const w={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:C(v.editedFeatures),exceededTransferLimit:!1,historicMoment:C(v.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(s,a,w.historicMoment)&&this.emit("edits",w),w}).then(v=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(s,a,v.historicMoment)&&(this.historicMoment=v.historicMoment),v));this.emit("apply-edits",{result:g})},this._updateMomentHandler=n=>{const{serviceUrl:s,gdbVersion:o,moment:a}=n,u=s===this.url,d=wy(this),h=wy(this)&&m0(s,o,this.gdbVersion),f=wy(this)&&!m0(s,this.gdbVersion,null);u&&d&&h&&f&&"historicMoment"in this&&this.historicMoment!==a&&(this.historicMoment=a)},this.when().then(()=>{this.addHandles(iY(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(nY(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(i,n,s){return"historicMoment"in this&&this.historicMoment!==s&&ob(i,n)}};return t=sY,l([c()],r.prototype,"lastEditsEventDate",void 0),r=l([$("esri.layers.mixins.EditBusLayer")],r),r};var bA;const Vx=new _e({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),Ux=new _e({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Io=bA=class extends N{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:i,timeExtent:n,objectIds:s,units:o,distance:a}=this;return new Yo({geometry:C(r),objectIds:C(s),spatialRelationship:i,timeExtent:C(n),where:t,units:o,distance:a,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,timeExtent:i,objectIds:n,units:s,distance:o}=this;return new bA({geometry:C(t),objectIds:C(n),spatialRelationship:r,timeExtent:C(i),where:e,units:s,distance:o})}};l([c({type:String,json:{write:!0}})],Io.prototype,"where",void 0),l([c({types:bp,json:{write:!0}})],Io.prototype,"geometry",void 0),l([c({type:Vx.apiValues,json:{name:"spatialRel",read:{reader:Vx.read},write:{allowNull:!1,writer:Vx.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],Io.prototype,"spatialRelationship",void 0),l([c({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Io.prototype,"distance",void 0),l([c({type:[Number],json:{write:!0}})],Io.prototype,"objectIds",void 0),l([c({type:Ux.apiValues,json:{read:Ux.read,write:{writer:Ux.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Io.prototype,"units",void 0),l([c({type:pr,json:{write:!0}})],Io.prototype,"timeExtent",void 0),Io=bA=l([$("esri.layers.support.FeatureFilter")],Io);const aIe=Io;var SA;const Zj={read:{reader:dv},write:{writer:pv,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},Jj={read:{reader:dv},write:{writer:pv,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},Kj={name:"showExcludedLabels",default:!0};let _d=SA=class extends N{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var i,n;const r=super.write(e,t);if(t!=null&&t.origin){if(r.filter){const s=Object.keys(r.filter);if(s.length>1||s[0]!=="where")return(i=t.messages)==null||i.push(new R("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in r)return(n=t.messages)==null||n.push(new R("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return r}clone(){return new SA({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};l([c({type:aIe,json:{write:{allowNull:!0,writer(e,t,r,i){const n=e==null?void 0:e.write({},i);n&&Object.keys(n).length!==0?cr(r,n,t):cr(r,null,t)}}}})],_d.prototype,"filter",void 0),l([c({json:{read:dv,write:{writer:pv,allowNull:!0},origins:{"web-map":Zj,"portal-item":Zj}}})],_d.prototype,"includedEffect",void 0),l([c({json:{read:dv,write:{writer:pv,allowNull:!0},origins:{"web-map":Jj,"portal-item":Jj}}})],_d.prototype,"excludedEffect",void 0),l([c({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":Kj,"portal-item":Kj}}})],_d.prototype,"excludedLabelsVisible",void 0),_d=SA=l([$("esri.layers.support.FeatureEffect")],_d);const lIe=_d,Yj={write:{allowNull:!0}},uIe={type:lIe,json:{origins:{"web-map":Yj,"portal-item":Yj}}},cIe=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return l([c(uIe)],t.prototype,"featureEffect",void 0),t=l([$("esri.layers.mixins.FeatureEffectLayer")],t),t};var $A;let Ig=$A=class extends N{constructor(e){super(e)}async collectRequiredFields(e,t){return pi(e,t,this.expression)}clone(){return new $A({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};l([c({type:String,json:{write:!0}})],Ig.prototype,"expression",void 0),l([c({type:String,json:{write:!0}})],Ig.prototype,"title",void 0),Ig=$A=l([$("esri.symbols.support.FeatureExpressionInfo")],Ig);const Qj=Ig;function S6e(e){return 1/(Yk[e]||1)}function dIe(){const e=Object.keys(Yk);return jU(e,"decimal-degrees"),e.sort(),e}const pIe=dIe();var TA;const pw=mr()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),Xj=new _e({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Ca=TA=class extends N{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,r,i){t[r]=e.write({},i),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new TA({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&ese(this.featureExpressionInfo,e.featureExpressionInfo)}};l([c({type:Qj,json:{write:!0}})],Ca.prototype,"featureExpressionInfo",void 0),l([G("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Ca.prototype,"readFeatureExpressionInfo",null),l([B("featureExpressionInfo",{featureExpressionInfo:{type:Qj},"featureExpression.value":{type:[0]}})],Ca.prototype,"writeFeatureExpressionInfo",null),l([c({type:pw.apiValues,nonNullable:!0,json:{type:pw.jsonValues,read:pw.read,write:{writer:pw.write,isRequired:!0}}})],Ca.prototype,"mode",null),l([c({type:Number,json:{write:!0}})],Ca.prototype,"offset",void 0),l([c({type:pIe,json:{type:String,read:Xj.read,write:Xj.write}})],Ca.prototype,"unit",null),Ca=TA=l([$("esri.symbols.support.ElevationInfo")],Ca);const hIe=Ca;let Ph=class extends N{constructor(t){super(t),this.description=null,this.label=null,this.type=null}};l([c({type:String,json:{write:!0}})],Ph.prototype,"description",void 0),l([c({type:String,json:{write:!0}})],Ph.prototype,"label",void 0),l([c()],Ph.prototype,"type",void 0),Ph=l([$("esri.tables.elements.AttributeTableElement")],Ph);const fm=Ph;var xA;let Cg=xA=class extends fm{constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return new xA({description:this.description,displayType:this.displayType,label:this.label})}};l([c({type:["auto"],json:{write:!0}})],Cg.prototype,"displayType",void 0),l([c({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],Cg.prototype,"type",void 0),Cg=xA=l([$("esri.tables.elements.AttributeTableAttachmentElement")],Cg);const e8=Cg;var EA;let Ag=EA=class extends fm{constructor(e){super(e),this.fieldName=null,this.type="field"}clone(){return new EA({description:this.description,fieldName:this.fieldName,label:this.label})}};l([c({type:String,json:{write:!0}})],Ag.prototype,"fieldName",void 0),l([c({type:String,json:{read:!1,write:!0}})],Ag.prototype,"type",void 0),Ag=EA=l([$("esri.tables.elements.AttributeTableFieldElement")],Ag);const t8=Ag;var MA;let Rg=MA=class extends fm{constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return new MA({description:this.description,label:this.label,relationshipId:this.relationshipId})}};l([c({type:Number,json:{write:!0}})],Rg.prototype,"relationshipId",void 0),l([c({type:["relationship"],json:{read:!1,write:!0}})],Rg.prototype,"type",void 0),Rg=MA=l([$("esri.tables.elements.AttributeTableRelationshipElement")],Rg);const r8=Rg;function oY(e){return{typesWithGroup:{base:fm,key:"type",typeMap:{attachment:e8,field:t8,group:e,relationship:r8}},typesWithoutGroup:{base:fm,key:"type",typeMap:{attachment:e8,field:t8,relationship:r8}}}}function aY(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>i[n.type].fromJSON(n))}function lY(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>n.toJSON())}function uY(e,t,r=!0){return e?e.map(i=>ss(r?t.typesWithGroup:t.typesWithoutGroup,i)):null}var IA;let Ba=IA=class extends fm{constructor(e){super(e),this.elements=null,this.type="group"}castElements(e){return uY(e,zx,!1)}readElements(e,t){return aY(t.attributeTableElements,zx,!1)}writeElements(e,t){t.attributeTableElements=lY(e,zx,!1)}clone(){return new IA({description:this.description,elements:C(this.elements),label:this.label})}};l([c({json:{write:!0}})],Ba.prototype,"elements",void 0),l([Ne("elements")],Ba.prototype,"castElements",null),l([G("elements",["attributeTableElements"])],Ba.prototype,"readElements",null),l([B("elements")],Ba.prototype,"writeElements",null),l([c({type:String,json:{read:!1,write:!0}})],Ba.prototype,"type",void 0),Ba=IA=l([$("esri.tables.elements.AttributeTableGroupElement")],Ba);const zx=oY(Ba),fIe=Ba;var CA;const Gx=oY(fIe);let tu=CA=class extends N{constructor(e){super(e),this.elements=null,this.orderByFields=null}castElements(e){return uY(e,Gx)}readElements(e,t){return aY(t.attributeTableElements,Gx)}writeElements(e,t){t.attributeTableElements=lY(e,Gx)}clone(){return new CA({elements:C(this.elements),orderByFields:this.orderByFields})}};l([c({json:{write:!0}})],tu.prototype,"elements",void 0),l([Ne("elements")],tu.prototype,"castElements",null),l([G("elements",["attributeTableElements"])],tu.prototype,"readElements",null),l([B("elements")],tu.prototype,"writeElements",null),l([c({type:[Object],json:{write:!0}})],tu.prototype,"orderByFields",void 0),tu=CA=l([$("esri.tables.AttributeTableTemplate")],tu);const mIe=tu,yIe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:Ar}}},hP={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},fP={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:Ar}}},gIe={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:dp}}},vIe={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:Ar}}},wIe={value:null,type:hIe,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:Ar}}};function T6e(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const cY={write:{enabled:!0,layerContainerTypes:Ar},read:!0},AA={type:Number,json:{origins:{"web-document":cY,"portal-item":{write:!0}}}},_Ie={...AA,json:{...AA.json,origins:{"web-document":{...cY,write:{enabled:!0,layerContainerTypes:Ar,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>{var i;return r&&r.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?(i=t.layerDefinition)!=null&&i.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?Y0(t.layerDefinition.drawingInfo.transparency):void 0:Y0(t.drawingInfo.transparency)}}}},x6e={type:qe,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=qe.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(r.spatialReference=me.fromJSON(t.spatialReference)),r}}}},read:!1}},bIe={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},SIe={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:Ar}}},name:"layerDefinition.minScale",write:!0}},$Ie={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:Ar}}},name:"layerDefinition.maxScale",write:!0}},dY={json:{write:{ignoreOrigin:!0,layerContainerTypes:Ar},origins:{"web-map":{read:!1,write:!1}}}},TIe={type:mIe,json:{name:"attributeTableInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}};let Aa=class extends Me(N){constructor(t){super(t),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};l([c()],Aa.prototype,"creatorField",void 0),l([c()],Aa.prototype,"creationDateField",void 0),l([c()],Aa.prototype,"editorField",void 0),l([c()],Aa.prototype,"editDateField",void 0),l([c()],Aa.prototype,"realm",void 0),l([c(CS("dateFieldsTimeReference",!0))],Aa.prototype,"timeZone",void 0),Aa=l([$("esri.layers.support.EditFieldsInfo")],Aa);const xIe=Aa;let Fo=class extends Me(N){constructor(t){super(t)}};l([c({constructOnly:!0,json:{write:!0}})],Fo.prototype,"name",void 0),l([c({constructOnly:!0,json:{write:!0}})],Fo.prototype,"fields",void 0),l([c({constructOnly:!0,json:{write:!0}})],Fo.prototype,"isAscending",void 0),l([c({constructOnly:!0,json:{write:!0}})],Fo.prototype,"indexType",void 0),l([c({constructOnly:!0,json:{write:!0}})],Fo.prototype,"isUnique",void 0),l([c({constructOnly:!0,json:{write:!0}})],Fo.prototype,"description",void 0),Fo=l([$("esri.layers.support.FeatureIndex")],Fo);async function pY(e,t,r){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=hY(e));const i=EIe(e),n=e.capabilities.query.supportsPagination;t.start=0,t.num=i;let s=null;for(;;){const o=await e.source.queryFeaturesJSON(t,r);if(s==null?s=o:s.features=s.features.concat(o.features),s.exceededTransferLimit=o.exceededTransferLimit,!n||!o.exceededTransferLimit)break;t.start+=i}return s}function EIe(e){return hY(e)*MIe(e)}function MIe(e){return e.capabilities.query.maxRecordCount||2e3}function hY(e){return e.capabilities.query.supportsMaxRecordCountFactor?Yo.MAX_MAX_RECORD_COUNT_FACTOR:1}var RA;let $r=RA=class extends N{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new RA(C({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};l([c({type:[String],json:{write:!0}})],$r.prototype,"attachmentTypes",void 0),l([c({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],$r.prototype,"attachmentsWhere",void 0),l([c({type:Boolean,json:{write:!0}})],$r.prototype,"cacheHint",void 0),l([c({type:[String],json:{write:!0}})],$r.prototype,"keywords",void 0),l([c({type:[String],json:{write:!0}})],$r.prototype,"globalIds",void 0),l([c({json:{write:!0}})],$r.prototype,"name",void 0),l([c({type:Number,json:{read:{source:"resultRecordCount"}}})],$r.prototype,"num",void 0),l([c({type:[Number],json:{write:!0}})],$r.prototype,"objectIds",void 0),l([c({type:Boolean,json:{default:!1,write:!0}})],$r.prototype,"returnMetadata",void 0),l([c({type:[Number],json:{write:!0}})],$r.prototype,"size",void 0),l([c({type:Number,json:{read:{source:"resultOffset"}}})],$r.prototype,"start",void 0),l([B("start"),B("num")],$r.prototype,"writeStart",null),l([c({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],$r.prototype,"where",void 0),$r=RA=l([$("esri.rest.support.AttachmentQuery")],$r),$r.from=bt($r);const IIe=$r;var OA;let Tt=OA=class extends N{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new OA(C({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};l([c({type:Boolean,json:{write:!0}})],Tt.prototype,"cacheHint",void 0),l([c({type:Us,json:{write:!0}})],Tt.prototype,"dynamicDataSource",void 0),l([c({type:String,json:{write:!0}})],Tt.prototype,"gdbVersion",void 0),l([c({type:Number,json:{write:!0}})],Tt.prototype,"geometryPrecision",void 0),l([c({type:Date})],Tt.prototype,"historicMoment",void 0),l([B("historicMoment")],Tt.prototype,"_writeHistoricMoment",null),l([c({type:Number,json:{write:!0}})],Tt.prototype,"maxAllowableOffset",void 0),l([c({json:{write:!0}})],Tt.prototype,"objectIds",void 0),l([c({type:[String],json:{write:!0}})],Tt.prototype,"orderByFields",void 0),l([c({type:[String],json:{write:!0}})],Tt.prototype,"outFields",void 0),l([c({type:me,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Tt.prototype,"outSpatialReference",void 0),l([c({json:{write:!0}})],Tt.prototype,"relationshipId",void 0),l([c({type:Number,json:{read:{source:"resultOffset"}}})],Tt.prototype,"start",void 0),l([B("start"),B("num")],Tt.prototype,"writeStart",null),l([c({type:Number,json:{read:{source:"resultRecordCount"}}})],Tt.prototype,"num",void 0),l([c({json:{write:!0}})],Tt.prototype,"returnGeometry",void 0),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Tt.prototype,"returnM",void 0),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Tt.prototype,"returnZ",void 0),l([c({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Tt.prototype,"where",void 0),Tt=OA=l([$("esri.rest.support.RelationshipQuery")],Tt),Tt.from=bt(Tt);const mP=Tt,I6e=Object.freeze(Object.defineProperty({__proto__:null,default:mP},Symbol.toStringTag,{value:"Module"})),kA=new _e({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function CIe(e,t,r,i){const n=await gc(e);if(await yP(e,t,i),!n.addAttachment)throw new R(i,"Layer source does not support addAttachment capability");return n.addAttachment(t,r)}function yP(e,t,r){var s,o;const{attributes:i}=t,{objectIdField:n}=e;return(o=(s=e.capabilities)==null?void 0:s.data)!=null&&o.supportsAttachment?t?i?n&&i[n]?Promise.resolve():Promise.reject(new R(r,`feature is missing the identifying attribute ${n}`)):Promise.reject(new R(r,"'attributes' are required on a feature to query attachments")):Promise.reject(new R(r,"A feature is required to add/delete/update attachments")):Promise.reject(new R(r,"this layer doesn't support attachments"))}async function AIe(e,t,r,i,n){const s=await gc(e);if(await yP(e,t,n),!s.updateAttachment)throw new R(n,"Layer source does not support updateAttachment capability");return s.updateAttachment(t,r,i)}async function RIe(e,t,r){const{applyEdits:i}=await D(()=>import("./editingSupport-BMIYrZ4t.js"),__vite__mapDeps([232,233]),import.meta.url),n=await e.load();let s=r;return n.type==="feature"&&n.infoFor3D&&t.deleteFeatures!=null&&n.globalIdField!=null&&(s={...s,globalIdToObjectId:await YIe(n,t.deleteFeatures,n.globalIdField)}),i(n,n.source,t,r)}async function OIe(e,t,r){const{uploadAssets:i}=await D(()=>import("./editingSupport-BMIYrZ4t.js"),__vite__mapDeps([232,233]),import.meta.url),n=await e.load();return i(n,n.source,t,r)}async function kIe(e,t,r,i){const n=await gc(e);if(await yP(e,t,i),!n.deleteAttachments)throw new R(i,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(t,r)}async function PIe(e,t,r){const i=(await e.load({signal:t==null?void 0:t.signal})).source;if(!i.fetchRecomputedExtents)throw new R(r,"Layer source does not support fetchUpdates capability");return i.fetchRecomputedExtents(t)}async function NIe(e,t,r,i){var y,g;t=IIe.from(t),await e.load();const n=e.source,s=e.capabilities;if(!((y=s==null?void 0:s.data)!=null&&y.supportsAttachment))throw new R(i,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:a,globalIds:u,num:d,size:h,start:f,where:m}=t;if(!((g=s==null?void 0:s.operations)!=null&&g.supportsQueryAttachments)&&((o==null?void 0:o.length)>0||(u==null?void 0:u.length)>0||(h==null?void 0:h.length)>0||d||f||m))throw new R(i,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(a!=null&&a.length||u!=null&&u.length||m))throw new R(i,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!n.queryAttachments)throw new R(i,"Layer source does not support queryAttachments capability",t);return n.queryAttachments(t)}async function LIe(e,t,r,i){const n=await gc(e);if(!n.queryObjectIds)throw new R(i,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(Yo.from(t)??e.createQuery(),r)}async function FIe(e,t,r,i){const n=await gc(e);if(!n.queryFeatureCount)throw new R(i,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(Yo.from(t)??e.createQuery(),r)}async function DIe(e,t,r,i){const n=await gc(e);if(!n.queryExtent)throw new R(i,"Layer source does not support queryExtent capability");return n.queryExtent(Yo.from(t)??e.createQuery(),r)}async function jIe(e,t,r,i){const n=await gc(e);if(!n.queryRelatedFeatures)throw new R(i,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(mP.from(t),r)}async function VIe(e,t,r,i){const n=await gc(e);if(!n.queryRelatedFeaturesCount)throw new R(i,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(mP.from(t),r)}async function UIe(e){const t=e.source;if(t!=null&&t.refresh)try{const{dataChanged:r,updates:i}=await t.refresh();if(i!=null&&(e.sourceJSON={...e.sourceJSON,...i},e.read(i,{origin:"service",url:e.parsedUrl})),r)return!0}catch{}if(e.definitionExpression)try{return(await lH(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function zIe(e){var o,a;const t=new Yo,r=(o=e.capabilities)==null?void 0:o.data,i=(a=e.capabilities)==null?void 0:a.query;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,i&&(t.compactGeometryEnabled=i.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference),r&&(r.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),r.supportsM&&e.returnM!=null&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:n,timeExtent:s}=e;return t.timeExtent=n!=null&&s!=null?s.offset(-n.value,n.unit):s||null,t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null,t}function fY(e){const{globalIdField:t,fields:r}=e;if(t)return t;if(r){for(const i of r)if(i.type==="esriFieldTypeGlobalID")return i.name}}function mY(e){const{objectIdField:t,fields:r}=e;if(t)return t;if(r){for(const i of r)if(i.type==="esriFieldTypeOID")return i.name}}function GIe(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}function BIe(e,t){const{subtypes:r,subtypeField:i}=e;if(!(t!=null&&t.attributes)||!(r!=null&&r.length)||!i)return null;const n=t.attributes[i];return n==null?null:r.find(s=>s.code===n)}function qIe(e,t){var o,a;const{fieldsIndex:r,subtypeField:i}=e,{name:n,type:s}=r.get(t)??{};if(!n)return null;if((i&&((o=r.get(i))==null?void 0:o.name))===n&&((a=e.subtypes)!=null&&a.length)){const u=e.subtypes.map(d=>new Ld({code:yY(d.code,s),name:d.name}));if(u!=null&&u.length)return new g$({codedValues:u})}return null}function HIe(e,t){var s,o;const{fieldsIndex:r}=e,{name:i,type:n}=r.get(t)??{};if(!i)return null;if(("typeIdField"in e?(s=r.get(e.typeIdField))==null?void 0:s.name:null)===i&&"types"in e&&((o=e.types)!=null&&o.length)){const a=e.types.map(u=>new Ld({code:yY(u.id,n),name:u.name}));return new g$({codedValues:a})}return null}function yY(e,t){return t?$H({type:t})&&typeof e=="number"?`${e}`:yge({type:t})&&typeof e=="string"?Number.parseInt(e,10):e:e}async function gc(e){return(await e.load()).source}async function WIe(e,t){if(!Ae||Ae.findCredential(e))return;let r;try{const i=await Rq(e,t);i&&(r=await Ae.checkSignInStatus(`${i}/sharing`))}catch{}if(r)try{const i=t!=null?t.signal:null;await Ae.getCredential(e,{signal:i})}catch{}}async function ZIe(e,t,r){var n;const i=(n=e.parsedUrl)==null?void 0:n.path;i&&e.authenticationTriggerEvent===t&&await WIe(i,r)}function JIe(e){return!ab(e)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const Bx=wm({types:lW});function gP(e,t){var r;if(e.defaultSymbol)return(r=e.types)!=null&&r.length?new aP({defaultSymbol:Bx(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map(i=>({id:i.id,symbol:Bx(i.symbol,i,t)}))}):new Dm({symbol:Bx(e.defaultSymbol,e,t)})}function KIe(e){var i,n,s;let t=(i=e.sourceJSON)==null?void 0:i.cacheMaxAge;if(!t)return!1;const r=(s=(n=e.editingInfo)==null?void 0:n.lastEditDate)==null?void 0:s.getTime();return r==null||(t*=1e3,Date.now()-r<t)}async function YIe(e,t,r){if(t==null)return null;const i=[],{objectIdField:n}=e;if(t.forEach(d=>{let h=null;if("attributes"in d){const{attributes:f}=d;h={globalId:f[r],objectId:f[n]!=null&&f[n]!==-1?f[n]:null}}else h={globalId:d.globalId,objectId:d.objectId!=null&&d.objectId!==-1?d.objectId:null};h.globalId!=null&&(h.objectId!=null&&h.objectId!==-1||i.push(h.globalId))}),i.length===0)return null;const s=e.createQuery();s.where=i.map(d=>`${r}='${d}'`).join(" OR "),s.returnGeometry=!1,s.outFields=[n,r],s.cacheHint=!1;const o=await Gle(pY(e,s));if(!o.ok)return null;const a=new Map,u=o.value.features;for(const d of u){const h=d.attributes[r],f=d.attributes[n];h!=null&&f!=null&&f!==-1&&a.set(N2e(h),f)}return a}function QIe(e,t,r){if(!t||!r||!e)return null;const i=r.getAttribute(t);return i==null?null:e.find(n=>{const{id:s}=n;return s!=null&&s.toString()===i.toString()})??null}function ab(e){var t;return((t=e.sourceJSON)==null?void 0:t.isMultiServicesView)||XIe(e)}function XIe(e){var t,r;return!!((r=(t=e.sourceJSON)==null?void 0:t.capabilities)!=null&&r.toLowerCase().split(",").map(i=>i.trim()).includes("map"))}function e3e(e,t,r){const i=t==null?void 0:t.queryBins;if(!i)throw new R(r,"Layer source does not support binning");switch(e.binParameters.type){case"auto-interval":if(!i.supportsAutoInterval)throw new R(r,"Layer source does not support auto-interval binning");break;case"date":if(!i.supportsDate)throw new R(r,"Layer source does not support date binning");break;case"fixed-boundaries":if(!i.supportsFixedBoundaries)throw new R(r,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!i.supportsFixedInterval)throw new R(r,"Layer source does not support fixed-interval binning")}const n=i==null?void 0:i.supportedStatistics;if(e.outStatistics&&n){const s=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:o}of e.outStatistics){const a=s.get(o);if(a&&!n[a])throw new R(r,`Layer source does not support ${o} statistic type`)}}}let Nh=class extends Me(N){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};l([c({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Nh.prototype,"shapeAreaField",void 0),l([c({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Nh.prototype,"shapeLengthField",void 0),l([c({type:String,json:{read:e=>xae.read(e)||Eae.read(e)}})],Nh.prototype,"units",void 0),Nh=l([$("esri.layers.support.GeometryFieldsInfo")],Nh);const t3e=Nh;var PA;let Lh=PA=class extends N{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new Y}clone(){return new PA({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};l([c({type:String,json:{write:!0}})],Lh.prototype,"floorField",void 0),l([c({json:{read:!1,write:!1}})],Lh.prototype,"viewAllMode",void 0),l([c({json:{read:!1,write:!1}})],Lh.prototype,"viewAllLevelIds",void 0),Lh=PA=l([$("esri.layers.support.LayerFloorInfo")],Lh);const r3e=Lh,i8=new _e({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),n8=new _e({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Fn=class extends Me(N){constructor(t){super(t),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};l([c({json:{read:i8.read,write:i8.write}})],Fn.prototype,"cardinality",void 0),l([c({json:{read:!0,write:!0}})],Fn.prototype,"composite",void 0),l([c({json:{read:!0,write:!0}})],Fn.prototype,"id",void 0),l([c({json:{read:!0,write:!0}})],Fn.prototype,"keyField",void 0),l([c({json:{read:!0,write:!0}})],Fn.prototype,"keyFieldInRelationshipTable",void 0),l([c({json:{read:!0,write:!0}})],Fn.prototype,"name",void 0),l([c({json:{read:!0,write:!0}})],Fn.prototype,"relatedTableId",void 0),l([c({json:{read:!0,write:!0}})],Fn.prototype,"relationshipTableId",void 0),l([c({json:{read:n8.read,write:n8.write}})],Fn.prototype,"role",void 0),Fn=l([$("esri.layers.support.Relationship")],Fn);const i3e=Fn;function se(e,t,r){return!!gY(e,t,r)}function Og(e,t,r){return gY(e,t,r)}function gY(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}const n3e={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function s3e(e){var r;const t=(r=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:r.map(i=>i.toLowerCase());return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function Yv(e,t){var i;const r=(i=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:i.map(n=>n.toLowerCase());return!!(r!=null&&r.includes(t.toLowerCase()))}function o3e(e){var r;const t=(r=e==null?void 0:e.supportedStatisticTypes)==null?void 0:r.map(i=>i.toLowerCase());return{count:!!(t!=null&&t.includes("count")),sum:!!(t!=null&&t.includes("sum")),min:!!(t!=null&&t.includes("min")),max:!!(t!=null&&t.includes("max")),avg:!!(t!=null&&t.includes("avg")),var:!!(t!=null&&t.includes("var")),stddev:!!(t!=null&&t.includes("stddev")),percentileContinuous:!!(t!=null&&t.includes("percentile_continuous")),percentileDiscrete:!!(t!=null&&t.includes("percentile_discrete")),envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function vY(e,t){return{analytics:a3e(e),attachment:l3e(e),data:u3e(e),metadata:c3e(e),operations:d3e(e.capabilities,e,t),query:p3e(e,t),queryBins:m3e(e),queryRelated:h3e(e),queryTopFeatures:f3e(e),editing:y3e(e)}}function a3e(e){return{supportsCacheHint:Yv(e.advancedQueryCapabilities,"queryAnalytics")}}function l3e(e){const t=e.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:Yv(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:se(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(i=>{const n=n3e[i.name];n&&(r[n]=!!i.isEnabled)}),r}function u3e(e){return{isVersioned:se(e,"isDataVersioned",!1),isBranchVersioned:se(e,"isDataBranchVersioned",!1),supportsAttachment:se(e,"hasAttachments",!1),supportsM:se(e,"hasM",!1),supportsZ:se(e,"hasZ",!1)}}function c3e(e){return{supportsAdvancedFieldProperties:se(e,"supportsFieldDescriptionProperty",!1)}}function d3e(e,t,r){const i=e?e.toLowerCase().split(",").map(m=>m.trim()):[],n=r?ic(r):null,s=i.includes(n!=null&&n.serverType==="MapServer"?"data":"query"),o=i.includes("editing")&&!t.datesInUnknownTimezone;let a=o&&i.includes("create"),u=o&&i.includes("delete"),d=o&&i.includes("update");const h=i.includes("changetracking"),f=t.advancedQueryCapabilities;return o&&!(a||u||d)&&(a=u=d=!0),{supportsCalculate:se(t,"supportsCalculate",!1),supportsTruncate:se(t,"supportsTruncate",!1),supportsValidateSql:se(t,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:u,supportsEditing:o,supportsChangeTracking:h,supportsQuery:s,supportsQueryAnalytics:se(f,"supportsQueryAnalytic",!1),supportsQueryAttachments:se(f,"supportsQueryAttachments",!1),supportsQueryBins:se(f,"supportsQueryBins",!1),supportsQueryTopFeatures:se(f,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:se(t,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:d,supportsExceedsLimitStatistics:se(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:se(t,"supportsAsyncConvert3D",!1)}}function p3e(e,t){const r=e.advancedQueryCapabilities,i=e.ownershipBasedAccessControlForFeatures,n=e.archivingInfo,s=e.currentVersion,o=t==null?void 0:t.includes("MapServer"),a=!o||s>=L("mapserver-pbf-version-support"),u=IW(t),d=new Set((e.supportedQueryFormats??"").split(",").map(h=>h.toLowerCase().trim()));return{maxRecordCount:Og(e,"maxRecordCount",void 0),maxRecordCountFactor:Og(e,"maxRecordCountFactor",void 0),standardMaxRecordCount:Og(e,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:s3e(r),supportsCacheHint:se(r,"supportsQueryWithCacheHint",!1)||Yv(r,"query"),supportsCentroid:se(r,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:u,supportsDefaultSpatialReference:se(r,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:se(r,"supportsDisjointSpatialRel",!1),supportsDistance:se(r,"supportsQueryWithDistance",!1),supportsDistinct:se(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:se(r,"supportsReturningQueryExtent",!1),supportsFormatPBF:a&&d.has("pbf"),supportsFullTextSearch:se(r,"supportsFullTextSearch",!1),supportsGeometryProperties:se(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:se(r,"supportsHavingClause",!1),supportsHistoricMoment:se(n,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:se(r,"supportsMaxRecordCountFactor",!1),supportsOrderBy:se(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:se(r,"supportsPagination",!1),supportsPercentileStatistics:se(r,"supportsPercentileStatistics",!1),supportsQuantization:se(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:se(e,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:se(i,"allowAnonymousToQuery",!0),supportsQueryByOthers:se(i,"allowOthersToQuery",!0),supportsQueryGeometry:se(e,"supportsReturningQueryGeometry",!1),supportsResultType:se(r,"supportsQueryWithResultType",!1),supportsSpatialAggregationStatistics:se(r,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:se(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:se(e,"useStandardizedQueries",!1),supportsStatistics:se(r,"supportsStatistics",e.supportsStatistics),supportsTopFeaturesQuery:se(r,"supportsTopFeaturesQuery",!1),tileMaxRecordCount:Og(e,"tileMaxRecordCount",void 0)}}function h3e(e){const t=e.advancedQueryCapabilities,r=se(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:se(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:Yv(t,"queryRelated")}}function f3e(e){return{supportsCacheHint:Yv(e.advancedQueryCapabilities,"queryTopFilter")}}function m3e(e){const t=e?e.queryBinsCapabilities:void 0;return{supportsDate:se(t,"supportsDateBin",!1),supportsFixedInterval:se(t,"supportsFixedIntervalBin",!1),supportsAutoInterval:se(t,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:se(t,"supportsFixedBoundariesBin",!1),supportedStatistics:o3e(t)}}function y3e(e){const t=e.ownershipBasedAccessControlForFeatures,r=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:se(e,"allowGeometryUpdates",!0),supportsGlobalId:se(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:se(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:se(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:se(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:se(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:se(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:se(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:se(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:se(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:se(r,"supportsAsyncApplyEdits",!1),zDefault:Og(e,"zDefault",void 0)}}function R6e(e){var t;return{operations:{supportsAppend:se(e,"supportsAppend",!1),supportsCoverageQuery:((t=e==null?void 0:e.playbackInfo)==null?void 0:t.klv["0601"])??!1,supportsExportClip:se(e,"supportsExportClip",!1),supportsExportFrameset:se(e,"supportsExportFrameset",!1),supportsMensuration:se(e,"supportsMensuration",!1),supportsUpdate:se(e,"supportsUpdate",!1)}}}let Ra=class extends Me(N){constructor(t){super(t),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(t){if(!t)return null;const r={};for(const i of Object.keys(t))r[i]=v$(t[i]);return r}writeDomains(t,r){var n;if(!t)return;const i={};for(const s of Object.keys(t))t[s]&&(i[s]=(n=t[s])==null?void 0:n.toJSON());r.domains=i}};l([c({type:Number,json:{write:!0}})],Ra.prototype,"code",void 0),l([c({type:Object,json:{write:!0}})],Ra.prototype,"defaultValues",void 0),l([c({json:{write:!0}})],Ra.prototype,"domains",void 0),l([G("domains")],Ra.prototype,"readDomains",null),l([B("domains")],Ra.prototype,"writeDomains",null),l([c({type:String,json:{write:!0}})],Ra.prototype,"name",void 0),Ra=l([$("esri.layers.support.Subtype")],Ra);const g3e=Ra,v3e=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(Y.ofType(Fo)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=me.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}get authenticationTriggerEvent(){var n;if(!this.url)return null;const{capabilities:r}=this;if(r){const{query:s,operations:o,editing:a}=r;if(!s.supportsQueryByOthers||!s.supportsQueryByAnonymous||o.supportsEditing&&!(a.supportsUpdateByOthers&&a.supportsUpdateByAnonymous&&a.supportsDeleteByOthers&&a.supportsDeleteByAnonymous))return"load"}if((n=this.serviceDefinitionExpression)!=null&&n.toLowerCase().includes("current_user"))return"load";if(this.userHasUpdateItemPrivileges){if(KIe(this))return"load";if(this.hasUpdateItemRestrictions)return r.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const i=this.editFieldsInfo;return(i!=null&&i.creatorField||i!=null&&i.editorField)&&(r!=null&&r.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(r,i){return vY(i,this.url)}readEditingInfo(r,i){const{editingInfo:n}=i;return n?{lastEditDate:n.lastEditDate!=null?new Date(n.lastEditDate):null}:null}get effectiveCapabilities(){const r=this.capabilities;if(!r)return null;const i=C(r),{operations:n,editing:s}=i;return ab(this)?(this.userHasUpdateItemPrivileges&&(n.supportsQuery=!0),i):this.userHasUpdateItemPrivileges?(n.supportsAdd=n.supportsDelete=n.supportsEditing=n.supportsQuery=n.supportsUpdate=s.supportsDeleteByOthers=s.supportsGeometryUpdate=s.supportsUpdateByOthers=!0,i):(this.userHasFullEditingPrivileges&&n.supportsEditing&&(n.supportsAdd=n.supportsDelete=n.supportsUpdate=s.supportsGeometryUpdate=!0),i)}readGlobalIdFieldFromService(r,i){return fY(i)}get hasFullEditingRestrictions(){const r=this.capabilities;if(!r||ab(this))return!1;const{operations:i,editing:n}=r;return i.supportsEditing&&!(i.supportsAdd&&i.supportsDelete&&i.supportsUpdate&&n.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const r=this.capabilities;if(!r)return!1;const{operations:i,editing:n}=r;return ab(this)?!i.supportsQuery:!(i.supportsAdd&&i.supportsDelete&&i.supportsEditing&&i.supportsQuery&&i.supportsUpdate&&n.supportsDeleteByOthers&&n.supportsGeometryUpdate&&n.supportsUpdateByOthers)}readIsTableFromService(r,i){return i.type==="Table"}readMaxScale(r,i){return i.effectiveMaxScale||r||0}readMinScale(r,i){return i.effectiveMinScale||r||0}readObjectIdFieldFromService(r,i){return mY(i)}readServiceDefinitionExpression(r,i){return i.definitionQuery||i.definitionExpression}set url(r){if(r==null)return void this._set("url",r);const i=_ve({layer:this,url:r,nonStandardUrlAllowed:!0,logger:j.getLogger(this)});this._set("url",i.url),i.layerId!=null&&this._set("layerId",i.layerId)}writeUrl(r,i,n,s){bve(this,r,null,i,s)}readVersion(r,i){return GIe(i)}};return l([c({readOnly:!0})],t.prototype,"authenticationTriggerEvent",null),l([c({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),l([c({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),l([G("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),l([c(CS("dateFieldsTimeReference"))],t.prototype,"dateFieldsTimeZone",void 0),l([c({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),l([c({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),l([c({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),l([c({readOnly:!0,type:xIe})],t.prototype,"editFieldsInfo",void 0),l([c({readOnly:!0})],t.prototype,"editingInfo",void 0),l([G("editingInfo")],t.prototype,"readEditingInfo",null),l([c({readOnly:!0})],t.prototype,"effectiveCapabilities",null),l([c((()=>{const r=C(wIe),i=r.json.origins;return i["web-map"]={read:!1,write:!1},i["portal-item"]={read:!1,write:!1},r})())],t.prototype,"elevationInfo",void 0),l([c({type:r3e,json:{name:"layerDefinition.floorInfo",write:!0,origins:{"web-scene":{name:"layerDefinition.floorInfo",write:{enabled:!0,layerContainerTypes:Ar}}}}})],t.prototype,"floorInfo",void 0),l([c({type:qe,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),l([c()],t.prototype,"gdbVersion",void 0),l([c({readOnly:!0,type:t3e,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),l([c({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:kA.read}}}})],t.prototype,"geometryType",void 0),l([c({type:String})],t.prototype,"globalIdField",void 0),l([G("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),l([c({readOnly:!0})],t.prototype,"hasFullEditingRestrictions",null),l([c({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),l([c({readOnly:!0})],t.prototype,"hasUpdateItemRestrictions",null),l([c({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),l([c({readOnly:!0,type:l$})],t.prototype,"heightModelInfo",void 0),l([c({type:Date})],t.prototype,"historicMoment",void 0),l([c({type:Y.ofType(Fo),readOnly:!0})],t.prototype,"indexes",void 0),l([c({readOnly:!0})],t.prototype,"isTable",void 0),l([G("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),l([c({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),l([c($Ie)],t.prototype,"maxScale",void 0),l([G("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),l([c(SIe)],t.prototype,"minScale",void 0),l([G("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),l([c({type:String})],t.prototype,"objectIdField",void 0),l([G("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),l([c(CS("preferredTimeReference"))],t.prototype,"preferredTimeZone",void 0),l([c({type:[i3e],readOnly:!0})],t.prototype,"relationships",void 0),l([c({type:Boolean})],t.prototype,"returnM",void 0),l([c({type:Boolean})],t.prototype,"returnZ",void 0),l([c({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),l([c({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),l([G("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),l([c({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"serviceItemId",void 0),l([c()],t.prototype,"sourceJSON",void 0),l([c({type:me,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),l([c({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),l([c({type:[g3e],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"subtypes",void 0),l([c({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),l([c(gIe)],t.prototype,"url",null),l([B("url")],t.prototype,"writeUrl",null),l([c({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),l([G("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),t=l([$("esri.layers.mixins.FeatureLayerBase")],t),t};let Fh=class extends Me(N){constructor(t){super(t),this.expression=null,this.title=null,this.returnType=null}};l([c({type:String,json:{write:!0}})],Fh.prototype,"expression",void 0),l([c({type:String,json:{write:!0}})],Fh.prototype,"title",void 0),l([c({type:String,json:{write:!0}})],Fh.prototype,"returnType",void 0),Fh=l([$("esri.layers.support.ExpressionInfo")],Fh);const vP=Fh;var NA;let Oa=NA=class extends N{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new NA({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:C(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};l([c({type:Boolean,json:{write:!0}})],Oa.prototype,"isAutoGenerated",void 0),l([c({type:String,json:{write:!0}})],Oa.prototype,"name",void 0),l([c({type:String,json:{write:!0}})],Oa.prototype,"alias",void 0),l([c({type:String,json:{write:!0}})],Oa.prototype,"onStatisticField",void 0),l([c({type:vP,json:{write:!0}})],Oa.prototype,"onStatisticExpression",void 0),l([c({type:String,json:{write:!0}})],Oa.prototype,"statisticType",void 0),Oa=NA=l([$("esri.layers.support.AggregateField")],Oa);const yp=Oa;let Wu=class extends N{constructor(){super(...arguments),this.type=null}};l([c({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Wu.prototype,"type",void 0),Wu=l([$("esri.layers.support.FeatureReduction")],Wu);const wP="__begin__",_P="__end__",w3e=new RegExp(wP,"ig"),_3e=new RegExp(_P,"ig"),s8=new RegExp("^"+wP,"i"),o8=new RegExp(_P+"$","i"),i2='"',b3e=i2+" + ",S3e=" + "+i2;function $3e(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function T3e(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function bP(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=$3e(e.labelExpression),t.type="conventional"),t}function x3e(e){const t=bP(e);if(!t)return null;switch(t.type){case"conventional":return LA(t.expression);case"arcade":return t.expression}return null}function E3e(e){const t=bP(e);if(!t)return null;switch(t.type){case"conventional":return I3e(t.expression);case"arcade":return wY(t.expression)}return null}function LA(e){let t;return e?(t=T2(e,r=>wP+'$feature["'+r+'"]'+_P),t=s8.test(t)?t.replace(s8,""):i2+t,t=o8.test(t)?t.replace(o8,""):t+i2,t=t.replaceAll(w3e,b3e).replaceAll(_3e,S3e)):t='""',t}const M3e=/^\s*\{([^}]+)\}\s*$/i;function I3e(e){const t=e==null?void 0:e.match(M3e);return(t==null?void 0:t[1].trim())||null}const C3e=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,A3e=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,R3e=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function wY(e){if(!e)return null;let t=C3e.exec(e)||A3e.exec(e);return t?t[1]||t[3]:(t=R3e.exec(e),t?t[2]:null)}var FA;let ru=FA=class extends N{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?LA(t.value):e}writeExpression(e,t,r){this.value!=null&&(e=LA(this.value)),e!=null&&(t[r]=e)}clone(){return new FA({expression:this.expression,title:this.title,value:this.value})}};l([c({type:String,json:{write:{writerEnsuresNonNull:!0}}})],ru.prototype,"expression",void 0),l([G("expression",["expression","value"])],ru.prototype,"readExpression",null),l([B("expression")],ru.prototype,"writeExpression",null),l([c({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ru.prototype,"title",void 0),l([c({json:{read:!1,write:!1}})],ru.prototype,"value",void 0),ru=FA=l([$("esri.layers.support.LabelExpressionInfo")],ru);const _Y=ru;var DA;const hw=new _e({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function fw(e,t,r){return{enabled:!cI(r==null?void 0:r.layer)}}function bY(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function O3e(e){return(e==null?void 0:e.type)==="map-image"}function SY(e){var t,r;return!!O3e(e)&&!!((r=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&r.supportsArcadeExpressionForLabeling)}function k3e(e){return bY(e)||SY(e==null?void 0:e.layer)}let Dt=DA=class extends N{static evaluateWhere(e,t){const r=(i,n,s)=>{switch(n){case"=":return i==s;case"<>":return i!=s;case">":return i>s;case">=":return i>=s;case"<":return i<s;case"<=":return i<=s}return!1};try{if(e==null)return!0;const i=e.split(" ");if(i.length===3)return r(t[i[0]],i[1],i[2]);if(i.length===7){const n=r(t[i[0]],i[1],i[2]),s=i[3],o=r(t[i[4]],i[5],i[6]);switch(s){case"AND":return n&&o;case"OR":return n||o}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=jTe,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){const r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,t,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=T3e(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const i=wY(this.labelExpressionInfo.expression);i&&(e="["+i+"]")}}e!=null&&(t[r]=e)}writeLabelExpressionInfo(e,t,r,i){if(e==null&&this.labelExpression!=null&&bY(i))e=new _Y({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(i);n.expression&&(t[r]=n)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return bP(this)}getLabelExpressionArcade(){return x3e(this)}getLabelExpressionSingleField(){return E3e(this)}hash(){return JSON.stringify(this)}clone(){return new DA({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:C(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:C(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};l([c({type:String,json:{write:!0}})],Dt.prototype,"name",void 0),l([c({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:fw}}}}})],Dt.prototype,"allowOverrun",void 0),l([c({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:fw}}}}})],Dt.prototype,"deconflictionStrategy",void 0),l([c({type:String,json:{write:{overridePolicy(e,t,r){return this.labelExpressionInfo&&(r==null?void 0:r.origin)==="service"&&SY(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],Dt.prototype,"labelExpression",void 0),l([G("labelExpression")],Dt.prototype,"readLabelExpression",null),l([B("labelExpression")],Dt.prototype,"writeLabelExpression",null),l([c({type:_Y,json:{write:{overridePolicy:(e,t,r)=>k3e(r)?{allowNull:!0}:{enabled:!1}}}})],Dt.prototype,"labelExpressionInfo",void 0),l([B("labelExpressionInfo")],Dt.prototype,"writeLabelExpressionInfo",null),l([c({type:hw.apiValues,json:{type:hw.jsonValues,read:hw.read,write:hw.write}})],Dt.prototype,"labelPlacement",void 0),l([c({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Dt.prototype,"labelPosition",void 0),l([c({type:Number})],Dt.prototype,"maxScale",void 0),l([B("maxScale")],Dt.prototype,"writeMaxScale",null),l([c({type:Number})],Dt.prototype,"minScale",void 0),l([B("minScale")],Dt.prototype,"writeMinScale",null),l([c({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:fw}}}}})],Dt.prototype,"repeatLabel",void 0),l([c({type:Number,cast:Fe,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:fw}}}}})],Dt.prototype,"repeatLabelDistance",void 0),l([c({types:E0e,json:{origins:{"web-scene":{types:M0e,write:t6,default:null}},write:t6,default:null}})],Dt.prototype,"symbol",void 0),l([c({type:Boolean,json:{write:!0}})],Dt.prototype,"useCodedValues",void 0),l([c({type:String,json:{write:!0}})],Dt.prototype,"where",void 0),Dt=DA=l([$("esri.layers.support.LabelClass")],Dt);const V$=Dt;var jA;let ti=jA=class extends Wu{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=Fe("12px"),this.fields=[],this.renderer=null}writeFields(e,t,r){const i=e.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());cr(r,i,t)}readRenderer(e,t,r){var n;const i=(n=t.drawingInfo)==null?void 0:n.renderer;return i?cv(i,t,r)??void 0:gP(t,r)}clone(){return new jA({fields:C(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:C(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:C(this.popupTemplate),renderer:C(this.renderer),binType:C(this.binType),size:this.size})}};l([X({binning:"binning"})],ti.prototype,"type",void 0),l([X({geohash:"geohash",square:"square"}),c({type:["geohash","square"]})],ti.prototype,"binType",void 0),l([c({type:Number,json:{write:!0}})],ti.prototype,"fixedBinLevel",void 0),l([c({type:[V$],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],ti.prototype,"labelingInfo",void 0),l([c(fP)],ti.prototype,"labelsVisible",void 0),l([c({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],ti.prototype,"maxScale",void 0),l([c(hP)],ti.prototype,"popupEnabled",void 0),l([c({type:hc,json:{name:"popupInfo",write:!0}})],ti.prototype,"popupTemplate",void 0),l([c({cast:e=>e==="auto"?e:vi(Fe(e))})],ti.prototype,"size",void 0),l([c({type:[yp],json:{write:!0}})],ti.prototype,"fields",void 0),l([B("fields")],ti.prototype,"writeFields",null),l([c({types:F$,json:{write:{target:"drawingInfo.renderer"}}})],ti.prototype,"renderer",void 0),l([G("renderer",["drawingInfo.renderer"])],ti.prototype,"readRenderer",null),ti=jA=l([$("esri.layers.support.FeatureReductionBinning")],ti);const $Y=ti;var VA;function a8(e){var t;return e.type==="simple"&&!((t=e.visualVariables)!=null&&t.length)}let Qt=VA=class extends N{constructor(e){super(e),this.type="cluster",this.clusterRadius=Fe("80px"),this.clusterMinSize=Fe("12px"),this.clusterMaxSize=Fe("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(e,t,r){var n,s;const i=(n=t.drawingInfo)==null?void 0:n.renderer;return(s=i==null?void 0:i.authoringInfo)!=null&&s.isAutoGenerated?null:i?a8(i)?null:cv(i,t,r)??void 0:gP(t,r)}readSymbol(e,t,r){var n,s;const i=(n=t.drawingInfo)==null?void 0:n.renderer;if((s=i==null?void 0:i.authoringInfo)!=null&&s.isAutoGenerated)return null;if(i&&a8(i)){const o=cv(i,t,r);return o==null?void 0:o.symbol}return null}writeSymbol(e,t,r,i){var s,o;const n=(o=(s=this.renderer)==null?void 0:s.authoringInfo)==null?void 0:o.isAutoGenerated;if(!this.renderer||n){const a=new Dm({symbol:e});t.drawingInfo={renderer:a.write({},i)}}}writeFields(e,t,r){const i=e.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());cr(r,i,t)}readFields(e,t,r){return e.filter(i=>!i.isAutoGenerated).map(i=>yp.fromJSON(i))}clone(){return new VA({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:C(this.labelingInfo),labelsVisible:this.labelsVisible,fields:C(this.fields),maxScale:this.maxScale,renderer:C(this.renderer),symbol:C(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:C(this.popupTemplate)})}};l([c({type:["cluster"],readOnly:!0,json:{write:!0}})],Qt.prototype,"type",void 0),l([c({cast:e=>e==="auto"?e:vi(Fe(e)),json:{write:!0}})],Qt.prototype,"clusterRadius",void 0),l([c({type:Number,cast:Fe,json:{write:!0}})],Qt.prototype,"clusterMinSize",void 0),l([c({type:Number,cast:Fe,json:{write:!0}})],Qt.prototype,"clusterMaxSize",void 0),l([c({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Qt.prototype,"maxScale",void 0),l([c(hP)],Qt.prototype,"popupEnabled",void 0),l([c({type:hc,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Qt.prototype,"popupTemplate",void 0),l([c({types:F$,json:{write:{target:"drawingInfo.renderer"}}})],Qt.prototype,"renderer",void 0),l([G("renderer",["drawingInfo.renderer"])],Qt.prototype,"readRenderer",null),l([c({types:T0e})],Qt.prototype,"symbol",void 0),l([G("symbol",["drawingInfo.renderer"])],Qt.prototype,"readSymbol",null),l([B("symbol")],Qt.prototype,"writeSymbol",null),l([c({type:[V$],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Qt.prototype,"labelingInfo",void 0),l([c(fP)],Qt.prototype,"labelsVisible",void 0),l([c({type:[yp],json:{write:!0}})],Qt.prototype,"fields",void 0),l([B("fields")],Qt.prototype,"writeFields",null),l([G("fields")],Qt.prototype,"readFields",null),Qt=VA=l([$("esri.layers.support.FeatureReductionCluster")],Qt);const TY=Qt;var UA;let lb=UA=class extends Wu{constructor(e){super(e),this.type="selection"}clone(){return new UA}};l([c({type:["selection"]})],lb.prototype,"type",void 0),lb=UA=l([$("esri.layers.support.FeatureReductionSelection")],lb);const l8=lb,u8={key:"type",base:Wu,typeMap:{cluster:TY,binning:$Y}},P3e={types:{key:"type",base:Wu,typeMap:{selection:l8,cluster:TY,binning:$Y}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:u8},"portal-item":{types:u8},"web-scene":{types:{key:"type",base:Wu,typeMap:{selection:l8}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:Ar}}}}},Hp={Base64:0,Hex:1,String:2,Raw:3},zf=8,xY=(1<<zf)-1;function ku(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function N3e(e){const t=[];for(let r=0,i=e.length*zf;r<i;r+=zf)t[r>>5]|=(e.charCodeAt(r/zf)&xY)<<r%32;return t}function L3e(e){const t=[];for(let r=0,i=32*e.length;r<i;r+=zf)t.push(String.fromCharCode(e[r>>5]>>>r%32&xY));return t.join("")}function F3e(e){const t="0123456789abcdef",r=[];for(let i=0,n=4*e.length;i<n;i++)r.push(t.charAt(e[i>>2]>>i%4*8+4&15)+t.charAt(e[i>>2]>>i%4*8&15));return r.join("")}function D3e(e){const t="=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=[];for(let n=0,s=4*e.length;n<s;n+=3){const o=(e[n>>2]>>n%4*8&255)<<16|(e[n+1>>2]>>(n+1)%4*8&255)<<8|e[n+2>>2]>>(n+2)%4*8&255;for(let a=0;a<4;a++)8*n+6*a>32*e.length?i.push(t):i.push(r.charAt(o>>6*(3-a)&63))}return i.join("")}function j3e(e,t){return e<<t|e>>>32-t}function U$(e,t,r,i,n,s){return ku(j3e(ku(ku(t,e),ku(i,s)),n),r)}function Wr(e,t,r,i,n,s,o){return U$(t&r|~t&i,e,t,n,s,o)}function Zr(e,t,r,i,n,s,o){return U$(t&i|r&~i,e,t,n,s,o)}function Jr(e,t,r,i,n,s,o){return U$(t^r^i,e,t,n,s,o)}function Kr(e,t,r,i,n,s,o){return U$(r^(t|~i),e,t,n,s,o)}function V3e(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let r=1732584193,i=-271733879,n=-1732584194,s=271733878;for(let o=0;o<e.length;o+=16){const a=r,u=i,d=n,h=s;r=Wr(r,i,n,s,e[o],7,-680876936),s=Wr(s,r,i,n,e[o+1],12,-389564586),n=Wr(n,s,r,i,e[o+2],17,606105819),i=Wr(i,n,s,r,e[o+3],22,-1044525330),r=Wr(r,i,n,s,e[o+4],7,-176418897),s=Wr(s,r,i,n,e[o+5],12,1200080426),n=Wr(n,s,r,i,e[o+6],17,-1473231341),i=Wr(i,n,s,r,e[o+7],22,-45705983),r=Wr(r,i,n,s,e[o+8],7,1770035416),s=Wr(s,r,i,n,e[o+9],12,-1958414417),n=Wr(n,s,r,i,e[o+10],17,-42063),i=Wr(i,n,s,r,e[o+11],22,-1990404162),r=Wr(r,i,n,s,e[o+12],7,1804603682),s=Wr(s,r,i,n,e[o+13],12,-40341101),n=Wr(n,s,r,i,e[o+14],17,-1502002290),i=Wr(i,n,s,r,e[o+15],22,1236535329),r=Zr(r,i,n,s,e[o+1],5,-165796510),s=Zr(s,r,i,n,e[o+6],9,-1069501632),n=Zr(n,s,r,i,e[o+11],14,643717713),i=Zr(i,n,s,r,e[o],20,-373897302),r=Zr(r,i,n,s,e[o+5],5,-701558691),s=Zr(s,r,i,n,e[o+10],9,38016083),n=Zr(n,s,r,i,e[o+15],14,-660478335),i=Zr(i,n,s,r,e[o+4],20,-405537848),r=Zr(r,i,n,s,e[o+9],5,568446438),s=Zr(s,r,i,n,e[o+14],9,-1019803690),n=Zr(n,s,r,i,e[o+3],14,-187363961),i=Zr(i,n,s,r,e[o+8],20,1163531501),r=Zr(r,i,n,s,e[o+13],5,-1444681467),s=Zr(s,r,i,n,e[o+2],9,-51403784),n=Zr(n,s,r,i,e[o+7],14,1735328473),i=Zr(i,n,s,r,e[o+12],20,-1926607734),r=Jr(r,i,n,s,e[o+5],4,-378558),s=Jr(s,r,i,n,e[o+8],11,-2022574463),n=Jr(n,s,r,i,e[o+11],16,1839030562),i=Jr(i,n,s,r,e[o+14],23,-35309556),r=Jr(r,i,n,s,e[o+1],4,-1530992060),s=Jr(s,r,i,n,e[o+4],11,1272893353),n=Jr(n,s,r,i,e[o+7],16,-155497632),i=Jr(i,n,s,r,e[o+10],23,-1094730640),r=Jr(r,i,n,s,e[o+13],4,681279174),s=Jr(s,r,i,n,e[o],11,-358537222),n=Jr(n,s,r,i,e[o+3],16,-722521979),i=Jr(i,n,s,r,e[o+6],23,76029189),r=Jr(r,i,n,s,e[o+9],4,-640364487),s=Jr(s,r,i,n,e[o+12],11,-421815835),n=Jr(n,s,r,i,e[o+15],16,530742520),i=Jr(i,n,s,r,e[o+2],23,-995338651),r=Kr(r,i,n,s,e[o],6,-198630844),s=Kr(s,r,i,n,e[o+7],10,1126891415),n=Kr(n,s,r,i,e[o+14],15,-1416354905),i=Kr(i,n,s,r,e[o+5],21,-57434055),r=Kr(r,i,n,s,e[o+12],6,1700485571),s=Kr(s,r,i,n,e[o+3],10,-1894986606),n=Kr(n,s,r,i,e[o+10],15,-1051523),i=Kr(i,n,s,r,e[o+1],21,-2054922799),r=Kr(r,i,n,s,e[o+8],6,1873313359),s=Kr(s,r,i,n,e[o+15],10,-30611744),n=Kr(n,s,r,i,e[o+6],15,-1560198380),i=Kr(i,n,s,r,e[o+13],21,1309151649),r=Kr(r,i,n,s,e[o+4],6,-145523070),s=Kr(s,r,i,n,e[o+11],10,-1120210379),n=Kr(n,s,r,i,e[o+2],15,718787259),i=Kr(i,n,s,r,e[o+9],21,-343485551),r=ku(r,a),i=ku(i,u),n=ku(n,d),s=ku(s,h)}return[r,i,n,s]}function EY(e,t=Hp.Hex){const r=t||Hp.Base64,i=V3e(N3e(e),e.length*zf);switch(r){case Hp.Raw:return i;case Hp.Hex:return F3e(i);case Hp.String:return L3e(i);case Hp.Base64:return D3e(i)}}const U3e=()=>j.getLogger("esri.views.2d.layers.support.clusterUtils");L.add("esri-cluster-arcade-enabled",!0);const z3e=L("esri-cluster-arcade-enabled"),G3e=new Set(["simple-line","simple-fill","picture-fill"]);function c8(e,t){let r=t.clone();if(!B3e(r))return r;if(t.getSymbols().some(i=>G3e.has(i.type))&&(r=new Dm({symbol:new ea})),r.authoringInfo||(r.authoringInfo=new Jk),r.authoringInfo.isAutoGenerated=!0,"visualVariables"in r){const i=(r.visualVariables||[]).filter(n=>n.valueExpression!=="$view.scale");i.forEach(n=>{n.type==="rotation"?n.field?n.field=Mc(e,n.field,"avg_angle","number"):n.valueExpression&&(n.field=_y(e,n.valueExpression,"avg_angle","number"),n.valueExpression=null):n.normalizationField?(n.field=Mc(e,n.field,"avg_norm","number",n.normalizationField),n.normalizationField=null):n.field?n.field=Mc(e,n.field,"avg","number"):n.valueExpression&&(n.field=_y(e,n.valueExpression,"avg","number"),n.valueExpression=null)}),r.visualVariables=i}switch(r.type){case"simple":break;case"pie-chart":for(const i of r.attributes)i.field?i.field=Mc(e,i.field,"sum","number"):i.valueExpression&&(i.field=_y(e,i.valueExpression,"sum","number"),i.valueExpression=null);break;case"unique-value":r.field?r.field=Mc(e,r.field,"mode","string"):r.valueExpression&&(r.field=_y(e,r.valueExpression,"mode","string"),r.valueExpression=null);break;case"class-breaks":r.normalizationField?(r.field=Mc(e,r.field,"avg_norm","number",r.normalizationField),r.normalizationField=null):r.field?r.field=Mc(e,r.field,"avg","number"):r.valueExpression&&(r.field=_y(e,r.valueExpression,"avg","number"),r.valueExpression=null)}return r}const B3e=e=>{const t=r=>U3e().error(new R("Unsupported-renderer",r,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const r=e.normalizationType;if(r!=="field")return t(`FeatureReductionCluster does not support a normalizationType of ${r}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!z3e){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some(r=>!(!("valueExpression"in r)||!r.valueExpression)))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function q3e(e,t,r){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const i=r,n="field",s=t.toLowerCase()+",norm:"+n+","+i.toLowerCase();return"cluster_avg_"+EY(s)}}}function _y(e,t,r,i){const n=EY(t),s=r==="mode"?`cluster_type_${n}`:r==="sum"?`cluster_sum_${n}`:`cluster_avg_${n}`;return e.some(o=>o.name===s)||e.push(new yp({name:s,isAutoGenerated:!0,onStatisticExpression:new vP({expression:t,returnType:i}),statisticType:r})),s}function Mc(e,t,r,i,n){if(t==="cluster_count"||e.some(o=>o.name===t))return t;const s=q3e(r,t,n);return e.some(o=>o.name===s)||(r==="avg_norm"?e.push(new yp({name:s,isAutoGenerated:!0,onStatisticExpression:new vP({expression:`$feature.${t} / $feature.${n}`,returnType:i}),statisticType:"avg"})):e.push(new yp({name:s,isAutoGenerated:!0,onStatisticField:t,statisticType:r}))),s}const H3e=e=>{let t=class extends e{constructor(...r){super(...r),this.addHandles(ce(()=>this.renderer,()=>{if(this.featureReduction){const i=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",i)}},Jo))}set featureReduction(r){const i=this._normalizeFeatureReduction(r);this._set("featureReduction",i)}set renderer(r){}_withClusterVariable(r,i,n){const s=r.clone();return"visualVariables"in s&&(s.visualVariables||(s.visualVariables=[]),s.visualVariables.some(o=>o.type==="size")||s.visualVariables.push(new O$({field:"cluster_count",stops:[new q_({value:1}),new q_({useMinValue:!0,size:i}),new q_({useMaxValue:!0,size:n})]}))),s}_normalizeFeatureReduction(r){var f;if((r==null?void 0:r.type)!=="cluster")return r;const i=r.clone(),n=[new yp({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],s=(i.fields??[]).filter(m=>!m.isAutoGenerated),o=r.renderer&&!((f=r.renderer.authoringInfo)!=null&&f.isAutoGenerated),{clusterMinSize:a,clusterMaxSize:u}=i;if(o){i.fields=[...n,...s];const m=this._withClusterVariable(i.renderer,a,u);return i.effectiveFeatureRenderer=m,i.effectiveClusterRenderer=m,i}if(r.symbol){if(i.fields=[...n,...s],i.renderer=null,!this.renderer)return i.effectiveFeatureRenderer=null,i.effectiveClusterRenderer=null,i;const m=c8(n,this.renderer),y=this._withClusterVariable(m,a,u),g="visualVariables"in y&&y.visualVariables?y.visualVariables:[],v=new Dm({symbol:r.symbol,visualVariables:g});return i.fields=[...n,...s],i.effectiveFeatureRenderer=y,i.effectiveClusterRenderer=v,i}if(!this.renderer)return r;const d=c8(n,this.renderer);i.fields=[...n,...s],i.renderer=d;const h=this._withClusterVariable(d,a,u);return i.effectiveFeatureRenderer=h,i.effectiveClusterRenderer=h,i}};return l([c(P3e)],t.prototype,"featureReduction",null),t=l([$("esri.layers.mixins.FeatureReductionLayer")],t),t},d8={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},p8={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},h8={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},W3e={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":d8,"web-map/basemap":p8,"web-map/tables":h8,"link-chart/operational-layers":{...d8,LinkChartLayer:!0},"link-chart/basemap":p8,"link-chart/tables":h8,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0}},Z3e=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(r,i,n){var s;return((s=n==null?void 0:n.portalItem)==null?void 0:s.type)==="Group Layer"?void 0:r}writeListMode(r,i,n,s){(s&&s.layerContainerType==="ground"||r&&roe(this,n,{},s))&&(i[n]=r)}writeOperationalLayerType(r,i,n,s){r&&(s==null?void 0:s.layerContainerType)!=="tables"&&(i.layerType=r)}writeTitle(r,i){i.title=r??"Layer"}readTimeExtent(r){return r?pr.fromArray(r):null}writeTimeExtent(r,i,n,s){r&&s.layerContainerType!=="tables"&&(r.isEmpty?s!=null&&s.messages&&s.messages.push(new R("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):i[n]=r.toArray())}read(r,i){i&&(i.layer=this),Qz(this,r,n=>super.read(r,n),i)}write(r,i){var o,a;if(!this.persistenceEnabled&&!(i!=null&&i.ignorePersistenceEnabled))return null;if(i!=null&&i.origin){const u=`${i.origin}/${i.layerContainerType||"operational-layers"}`,d=W3e[u];let h=!!(d!=null&&d[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&u==="web-scene/operational-layers"&&(h=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&u==="web-map/operational-layers"&&(h=!1),!h)return(o=i.messages)==null||o.push(new R("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${u}'`,{layer:this})),null}const n=super.write(r,{...i,layer:this}),s=!!i&&!!i.messages&&!!i.messages.filter(u=>u instanceof R&&u.name==="web-document-write:property-required").length;return P2(n==null?void 0:n.url)?((a=i==null?void 0:i.messages)==null||a.push(new R("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&s?null:n}beforeSave(){}};return l([c({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),l([G("id",["id"])],t.prototype,"readId",null),l([c(dY)],t.prototype,"listMode",void 0),l([B("listMode")],t.prototype,"writeListMode",null),l([c({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:Ar}}}}})],t.prototype,"operationalLayerType",void 0),l([B("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),l([c(AA)],t.prototype,"opacity",void 0),l([c({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),l([c({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),l([B("title"),B(["web-scene"],"title")],t.prototype,"writeTitle",null),l([c({type:pr,json:{origins:{"web-scene":{write:{layerContainerTypes:Ar}}}}})],t.prototype,"visibilityTimeExtent",void 0),l([G("visibilityTimeExtent")],t.prototype,"readTimeExtent",null),l([B(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[ke,vm]]}})],t.prototype,"writeTimeExtent",null),l([c({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:Ar}}},name:"visibility",write:!0}})],t.prototype,"visible",void 0),t=l([$("esri.layers.mixins.OperationalLayer")],t),t};var zA;const mw=new _e({asc:"ascending",desc:"descending"});let Dh=zA=class extends N{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new zA({field:this.field,valueExpression:this.valueExpression,order:this.order})}};l([c({type:String,json:{write:!0}})],Dh.prototype,"field",void 0),l([c({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Dh.prototype,"valueExpression",void 0),l([c({type:mw.apiValues,json:{type:mw.jsonValues,read:mw.read,write:mw.write}})],Dh.prototype,"order",void 0),Dh=zA=l([$("esri.layers.support.OrderByInfo")],Dh);const MY=Dh;function J3e(e,t,r){if(!e)return null;const i=e.find(s=>!!s.field);if(!i)return null;const n=new MY;return n.read(i,r),[n]}function K3e(e,t,r,i){const n=e.find(s=>!!s.field);n&&cr(r,[n.toJSON()],t)}const Y3e={type:[MY],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:J3e},write:{writer:K3e}}},Q3e=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return l([c(Y3e)],t.prototype,"orderBy",void 0),t=l([$("esri.layers.mixins.OrderedLayer")],t),t},X3e=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=st(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(r){r!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",r))}readPortalItem(r,i,n){if(i.itemId)return new Ho({id:i.itemId,portal:n==null?void 0:n.portal})}writePortalItem(r,i){r!=null&&r.id&&(i.itemId=r.id)}async loadFromPortal(r,i){var n;if((n=this.portalItem)!=null&&n.id)try{const{load:s}=await D(()=>import("./layersLoader-nuObLk4D.js"),__vite__mapDeps([234,139,137,138,136]),import.meta.url);return _t(i),await s({instance:this,supportedTypes:r.supportedTypes,validateItem:r.validateItem,supportsData:r.supportsData,layerModuleTypeMap:r.layerModuleTypeMap},i)}catch(s){throw Or(s)||j.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${s}`),s}}async finishLoadEditablePortalLayer(r){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(r).catch(i=>(Do(i),!0)))}async setUserPrivileges(r,i){if(!je.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(i);if(this.url)try{const{features:{edit:n,fullEdit:s},content:{updateItem:o}}=await this._fetchUserPrivileges(r,i);this._set("userHasEditingPrivileges",n),this._set("userHasFullEditingPrivileges",s),this._set("userHasUpdateItemPrivileges",o)}catch(n){Do(n)}}async _fetchUserPrivileges(r,i){let n=this.portalItem;if(!r||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(i);const s=r===n.id;if(s&&n.portal.user)return GD(n);let o,a;if(s)o=n.portal.url;else try{o=await Rq(this.url,i)}catch(f){Do(f)}if(!o||!_oe(o,n.portal.url))return this._fetchFallbackUserPrivileges(i);try{const f=i!=null?i.signal:null;a=await(Ae==null?void 0:Ae.getCredential(`${o}/sharing`,{prompt:!1,signal:f}))}catch(f){Do(f)}const u=!0,d=!1,h=!1;if(!a)return{features:{edit:u,fullEdit:d},content:{updateItem:h}};try{if(s?await n.reload():(n=new Ho({id:r,portal:{url:o}}),await n.load(i)),n.portal.user)return GD(n)}catch(f){Do(f)}return{features:{edit:u,fullEdit:d},content:{updateItem:h}}}async _fetchFallbackUserPrivileges(r){let i=!0;try{i=await this._fetchUserHasEditingPrivileges(r)}catch(n){Do(n)}return{features:{edit:i,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(r){const i=this.url?Ae==null?void 0:Ae.findCredential(this.url):null;if(!i)return!0;const n=yw.credential===i?yw.user:await this._fetchEditingUser(r);return yw.credential=i,yw.user=n,(n==null?void 0:n.privileges)==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(r){var h,f;const i=(f=(h=this.portalItem)==null?void 0:h.portal)==null?void 0:f.user;if(i)return i;const n=Ae==null?void 0:Ae.findServerInfo(this.url??"");if(!(n!=null&&n.owningSystemUrl))return null;const s=`${n.owningSystemUrl}/sharing/rest`,o=fr.getDefault();if(o&&o.loaded&&ts(o.restUrl)===ts(s))return o.user;const a=`${s}/community/self`,u=r!=null?r.signal:null,d=await U2(Le(a,{authMode:"no-prompt",query:{f:"json"},signal:u}));return d.ok?rk.fromJSON(d.value.data):null}read(r,i){i&&(i.layer=this),super.read(r,i)}write(r,i){var o;const n=i==null?void 0:i.portal,s=((o=this.portalItem)==null?void 0:o.id)&&(this.portalItem.portal||fr.getDefault());return n&&s&&!a7(s.restUrl,n.restUrl)?(i.messages&&i.messages.push(new R("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(r,{...i,layer:this})}};return l([c({type:Ho})],t.prototype,"portalItem",null),l([G("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),l([B("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),l([c({clonable:!1})],t.prototype,"resourceReferences",void 0),l([c({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),l([c({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),l([c({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=l([$("esri.layers.mixins.PortalLayer")],t),t},yw={credential:null,user:null};let kg=class extends te{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};l([c()],kg.prototype,"updating",void 0),l([c()],kg.prototype,"status",void 0),kg=l([$("esri.layers.support.PublishingInfo")],kg);const eCe=kg,tCe=Symbol(),rCe=e=>{var t;let r=class extends e{constructor(){super(...arguments),this[t]=!0}get publishingInfo(){if(this.destroyed)return null;const i=this._get("publishingInfo");if(i)return i;const n=new eCe;return this._checkPublishingStatus(n),n}_checkPublishingStatus(i){let o=0;const a=async d=>{let h;i.updating=!0;try{h=await this.fetchPublishingStatus()}catch{h="unavailable"}h!=="published"&&h!=="unavailable"||(i.status==="publishing"&&this.refresh(),u.remove()),i.status=h,i.updating=!1,u.removed||(o=setTimeout(a,d,d+125))},u={removed:!1,remove(){this.removed=!0,clearTimeout(o)}};this.when().catch(()=>u.remove()),a(250),this.addHandles(u)}};return t=tCe,l([c({readOnly:!0,clonable:!1})],r.prototype,"publishingInfo",null),r=l([$("esri.layers.mixins.PublishableLayer")],r),r},Pu=new Y,y0=new WeakMap;function iCe(e){sCe(e)&&Pu.push(new WeakRef(e))}function nCe(e){const t=Pu.find(r=>r.deref()===e);t&&Pu.remove(t)}function sCe(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function IY(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:IY(t,e%t):0}let qx=0,gw=0;function oCe(){const e=Date.now();let t=!1;for(const r of Pu){const i=r.deref();i?i.refreshInterval&&e-(y0.get(i)??0)+5>=6e4*i.refreshInterval&&(y0.set(i,e),i.refresh(e)):t=!0}if(t)for(let r=Pu.length-1;r>=0;r--)Pu.at(r).deref()||Pu.removeAt(r)}Gz(()=>{const e=Date.now();let t=0;for(const r of Pu){const i=r.deref();i&&(t=IY(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?y0.get(i)||y0.set(i,e):y0.delete(i))}if(t!==gw){if(gw=t,clearInterval(qx),gw===0)return void(qx=0);qx=setInterval(oCe,gw)}},Jo);const f8=.1,aCe=e=>{let t=class extends e{constructor(...r){super(...r),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=R2(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||iCe(this)},()=>{})}destroy(){nCe(this)}castRefreshInterval(r){return r>=f8?r:r<=0?0:f8}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(r=Date.now()){iS(this._debounceHasDataChanged()).then(i=>{i&&this._set("refreshTimestamp",r),this.emit("refresh",{dataChanged:i})},i=>{j.getLogger(this).error(i),this.emit("refresh",{dataChanged:!1,error:i})})}async hasDataChanged(){return!0}get test(){}};return l([c({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:Ar}}}}})],t.prototype,"refreshInterval",void 0),l([Ne("refreshInterval")],t.prototype,"castRefreshInterval",null),l([c({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),l([c({readOnly:!0})],t.prototype,"refreshParameters",null),t=l([$("esri.layers.mixins.RefreshableLayer")],t),t},lCe=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const r={minScale:this.minScale,maxScale:this.maxScale},i=this.parent;i&&"effectiveScaleRange"in i&&uCe(r,i.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===r.minScale&&n.maxScale===r.maxScale?n:r}};return l([c({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),l([c({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),l([c({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=l([$("esri.layers.mixins.ScaleRangeLayer")],t),t};function uCe(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}function m8(e,t){return hm.fromJSON({value:e,unit:t})}let Nr=class extends Me(N){constructor(t){super(t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(t,r){return r.timeExtent&&Array.isArray(r.timeExtent)&&r.timeExtent.length===2?pr.fromArray(r.timeExtent):null}writeFullTimeExtent(t,r){(t==null?void 0:t.start)!=null&&t.end!=null?r.timeExtent=t.toArray():r.timeExtent=null}readInterval(t,r){return r.timeInterval&&r.timeIntervalUnits?m8(r.timeInterval,r.timeIntervalUnits):r.defaultTimeInterval&&r.defaultTimeIntervalUnits?m8(r.defaultTimeInterval,r.defaultTimeIntervalUnits):null}writeInterval(t,r){r.timeInterval=(t==null?void 0:t.toJSON().value)??null,r.timeIntervalUnits=(t==null?void 0:t.toJSON().unit)??null}};l([c({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],Nr.prototype,"cumulative",void 0),l([c({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],Nr.prototype,"endField",void 0),l([c({type:pr,json:{write:{enabled:!0,allowNull:!0}}})],Nr.prototype,"fullTimeExtent",void 0),l([G("fullTimeExtent",["timeExtent"])],Nr.prototype,"readFullTimeExtent",null),l([B("fullTimeExtent")],Nr.prototype,"writeFullTimeExtent",null),l([c({type:Boolean,json:{write:!0}})],Nr.prototype,"hasLiveData",void 0),l([c({type:hm,json:{write:{enabled:!0,allowNull:!0}}})],Nr.prototype,"interval",void 0),l([G("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Nr.prototype,"readInterval",null),l([B("interval")],Nr.prototype,"writeInterval",null),l([c({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],Nr.prototype,"startField",void 0),l([c(CS("timeReference",!0))],Nr.prototype,"timeZone",void 0),l([c({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Nr.prototype,"trackIdField",void 0),l([c({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],Nr.prototype,"useTime",void 0),l([c({type:[Date],json:{read:!1}})],Nr.prototype,"stops",void 0),Nr=l([$("esri.layers.support.TimeInfo")],Nr);const CY=Nr,cCe={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:Ar}}},dCe=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(r,i){const n=i.timeInfo.exportOptions;if(!n)return null;const s=n.timeOffset,o=qk.fromJSON(n.timeOffsetUnits);return s&&o?new hm({value:s,unit:o}):null}set timeInfo(r){fH(r,this.fieldsIndex),this._set("timeInfo",r)}};return l([c({type:pr,json:{write:!1}})],t.prototype,"timeExtent",void 0),l([c({type:hm})],t.prototype,"timeOffset",void 0),l([G("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),l([c({value:null,type:CY,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),l([c(cCe)],t.prototype,"useViewTime",void 0),t=l([$("esri.layers.mixins.TemporalLayer")],t),t},y8=new _e({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let iu=class extends Me(N){constructor(t){super(t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};l([c({json:{write:!0}})],iu.prototype,"name",void 0),l([c({json:{write:!0}})],iu.prototype,"description",void 0),l([c({json:{read:y8.read,write:y8.write}})],iu.prototype,"drawingTool",void 0),l([c({json:{write:!0}})],iu.prototype,"prototype",void 0),l([c({json:{write:!0}})],iu.prototype,"thumbnail",void 0),iu=l([$("esri.layers.support.FeatureTemplate")],iu);const SP=iu;let ka=class extends Me(N){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){const r={};for(const i of Object.keys(t))r[i]=v$(t[i]);return r}writeDomains(t,r){var n;const i={};for(const s of Object.keys(t))t[s]&&(i[s]=(n=t[s])==null?void 0:n.toJSON());r.domains=i}};l([c({json:{write:!0}})],ka.prototype,"id",void 0),l([c({json:{write:!0}})],ka.prototype,"name",void 0),l([c({json:{write:!0}})],ka.prototype,"domains",void 0),l([G("domains")],ka.prototype,"readDomains",null),l([B("domains")],ka.prototype,"writeDomains",null),l([c({type:[SP],json:{write:!0}})],ka.prototype,"templates",void 0),ka=l([$("esri.layers.support.FeatureType")],ka);const AY=ka;function pCe(){return{fields:{type:[Ik],value:null,set:function(e){if(e&&L("big-integer-warning-enabled")){const t=e.filter(r=>r.type==="big-integer"||r.type==="oid"&&(r.length||0)>=8);if(t.length){const r=t.map(i=>`'${i.name}'`).join(", ");j.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${r}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return pK.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var t;const e=this._userOutFields;if(!(e!=null&&e.length))return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const r of e)((t=this.fieldsIndex)==null?void 0:t.has(r))||j.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${r} found in outFields`,{layer:this,outFields:e});return u$(this.fieldsIndex,e)}}}}const Hx=()=>j.getLogger("esri.layers.support.labelingInfo"),hCe=/\[([^[\]]+)\]/gi;function Wx(e,t,r){return e?e.map(i=>{var s;const n=new V$;if(n.read(i,r),n.labelExpression){const o=t.fields||((s=t.layerDefinition)==null?void 0:s.fields)||this.fields;n.labelExpression=n.labelExpression.replaceAll(hCe,(a,u)=>`[${fCe(u,o)}]`)}return n}):null}function fCe(e,t){if(!t)return e;const r=e.toLowerCase();for(let i=0;i<t.length;i++){const n=t[i].name;if(n.toLowerCase()===r)return n}return e}const mCe={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function j6e(e,t){const r=[];for(const i of e){const n=i.labelPlacement,s=mCe[t];if(!i.symbol)return Hx().warn("No ILabelClass symbol specified."),[];if(!s)return Hx().error(new R("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),[];if(s.includes(n))r.push(i);else{const o=s[0];n&&Hx().warn(`Found invalid label placement type ${n} for ${t}. Defaulting to ${o}`);const a=i.clone();a.labelPlacement=o,r.push(a)}}return r}const jh=[];function yCe(e,t){if(IW(e.url??""))return!0;const{wkid:r}=t;for(const i of jh){if((e.version??0)>=i[0])return!0;if(typeof i[1]=="function"&&(i[1]=i[1]()),i[1].has(r))return!1}return!0}jh.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),jh.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),jh.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),jh.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),jh.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]);async function gCe(e,t,r){const i=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(i&&i.type==="unique-value"&&i.styleOrigin){const n=await U2(i.populateFromStyle());if(_t(r),n.ok===!1){const s=n.error;t!=null&&t.messages&&t.messages.push(new wn("renderer:style-reference",`Failed to create unique value renderer from style reference: ${s.message}`,{error:s,context:t})),e.clear("renderer",t==null?void 0:t.origin)}}}function vCe({displayField:e,editFieldsInfo:t,fields:r,objectIdField:i,title:n},s){if(!r)return null;const o=SCe({editFieldsInfo:t,fields:r,objectIdField:i},s);if(!o.length)return null;const a=xCe({titleBase:n,fields:r,displayField:e}),u=TCe();return new hc({title:a,content:u,fieldInfos:o})}function V6e(e){var u;const{title:t,graphic:r}=e??{},{attributes:i,sourceLayer:n}=r??{},s=n&&"displayField"in n?n.displayField:null,o=s?i==null?void 0:i[s]:null,a=(u=r==null?void 0:r.getObjectId())==null?void 0:u.toString();return t||o||a||""}const wCe=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):ige(e,t);function _Ce({fields:e,ignoreFieldTypes:t,sortDisabled:r}){const i=e;return t&&(e=e.filter(n=>!t.includes(n.type))),e===i&&(e=e.slice()),r!==!0&&e.sort(bCe),e}function bCe(e,t){return e.type==="oid"?-1:t.type==="oid"?1:g8(e)?-1:g8(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function SCe(e,t){const r=t==null?void 0:t.visibleFieldNames;return _Ce({fields:e.fields??[],ignoreFieldTypes:(t==null?void 0:t.ignoreFieldTypes)||ECe,sortDisabled:t==null?void 0:t.sortDisabled}).map(i=>new ck({fieldName:i.name,isEditable:rge(i,e),label:i.alias,format:$Ce(i),visible:wCe(i,{...e,visibleFieldNames:r})}))}function $Ce(e){switch(e.type){case"small-integer":case"integer":case"single":return new h_({digitSeparator:!0,places:0});case"double":return new h_({digitSeparator:!0,places:2});case"string":return Mge(e.name)?new h_({digitSeparator:!0,places:0}):void 0;default:return}}function TCe(){return[new dm,new cm]}function xCe(e){const t=Hye(e),{titleBase:r}=e;return t?`${r}: {${t.trim()}}`:r??""}function g8(e){var r;return(e.name&&e.name.toLowerCase())==="name"?!0:((r=e.alias)==null?void 0:r.toLowerCase())==="name"}const ECe=["geometry","blob","raster","guid","xml"],MCe=1/255.5,kr="FeatureLayer";function vw(e,t){return new R("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function v8(e){return e&&e instanceof Y}const Zx=pCe();function Jx(e,t,r){const i=!!(r!=null&&r.writeLayerSchema);return{enabled:i,ignoreOrigin:i}}let re=class extends v3e(H3e(cIe(rCe(oIe(nIe(Q3e(dCe(lCe(aCe(OMe(Z3e(X3e(I$(sIe(RMe(Me(sH))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=me.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=R2(async(t,r,i)=>{const{save:n,saveAs:s}=await D(()=>import("./featureLayerUtils-CwSrpTEQ.js"),__vite__mapDeps([235,227,228,236,231,139]),import.meta.url);switch(t){case Uo.SAVE:return n(this,r);case Uo.SAVE_AS:return s(this,i,r)}})}destroy(){var e;(e=this.source)==null||e.destroy()}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){var i;const t=e!=null?e.signal:null;if((i=this.portalItem)!=null&&i.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(t).then(n=>this.initLayerProperties(n))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(Do).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const n=await this._fetchFirstValidLayerId(t);n!=null&&(this.layerId=n)}if(!this.url&&!this._hasMemorySource())throw new R("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(t))}).then(()=>ZIe(this,"load",e));return this.addResolvingPromise(r),Promise.resolve(this)}warnInvisibleDrapedSymbols(){var e,t,r;((e=this.elevationInfo)==null?void 0:e.mode)==="on-the-ground"&&((t=this.renderer)==null?void 0:t.type)==="simple"&&((r=this.renderer.symbol)==null?void 0:r.type)==="polygon-3d"&&this.renderer.symbol.symbolLayers.some(i=>i.type==="fill"&&i.material!=null&&(!i.material.color||i.material.color.a*this.opacity<MCe)&&(this.loadWarnings.push(new wn("feature-layer:invisible-draped-symbols","FeatureLayer has fully transparent symbols which will no longer render or highlight",{layer:this})),!0))}readCapabilities(e,t){return t=t.layerDefinition||t,vY(t,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,r){return this._readEditingEnabled(t,!0,r)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,r,i){this._writeEditingEnabled(e,t,!0,i)}get effectiveEditingEnabled(){return JIe(this)}readIsTable(e,t){return(t=(t==null?void 0:t.layerDefinition)??t).type==="Table"||!t.geometryType}writeIsTable(e,t,r,i){i!=null&&i.writeLayerSchema&&cr(r,e?"Table":"Feature Layer",t)}readGlobalIdField(e,t){return fY(t.layerDefinition||t)}readObjectIdField(e,t){return mY(t.layerDefinition||t)}get parsedUrl(){const e=hr(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=em(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=em(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){J5(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,r){var n;t=t.layerDefinition||t;const i=(n=t.drawingInfo)==null?void 0:n.renderer;if(i){const s=cv(i,t,r)??void 0;return s||j.getLogger(this).error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),s}return gP(t,r)}set source(e){const t=this._get("source");t!==e&&(v8(t)&&this._resetMemorySource(t),v8(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof Y?new Ga({layer:this,items:e}):e:null}readSource(e,t){const r=QK.fromJSON(t.featureSet);return new Ga({layer:this,items:(r==null?void 0:r.features)??[]})}readTemplates(e,t){const r=t.editFieldsInfo,i=r==null?void 0:r.creatorField,n=r==null?void 0:r.editorField;return e=e==null?void 0:e.map(s=>SP.fromJSON(s)),this._fixTemplates(e,i),this._fixTemplates(e,n),e}readTitle(e,t){var n,s,o;const r=((n=t.layerDefinition)==null?void 0:n.name)??t.name,i=t.title||((s=t.layerDefinition)==null?void 0:s.title);if(r){const a=(o=this.portalItem)==null?void 0:o.title;if(this.sublayerTitleMode==="item-title")return this.url?vve(this.url,r):r;let u=r;if(!u&&this.url){const d=ic(this.url);d!=null&&(u=d.title)}return u?(this.sublayerTitleMode==="item-title-and-service-name"&&a&&a!==u&&(u=a+" - "+u),Ak(u)):void 0}if(this.sublayerTitleMode==="item-title"&&i)return i}readTitleFromWebMap(e,t){var r;return t.title||((r=t.layerDefinition)==null?void 0:r.name)}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const i=t.fields.find(n=>n.name.toLowerCase()===r);i&&(r=i.name)}return r}readTypes(e,t){e=(t=t.layerDefinition||t).types;const r=t.editFieldsInfo,i=r==null?void 0:r.creatorField,n=r==null?void 0:r.editorField;return e==null?void 0:e.map(s=>(s=AY.fromJSON(s),this._fixTemplates(s.templates,i),this._fixTemplates(s.templates,n),s))}readVisible(e,t){var r;return((r=t.layerDefinition)==null?void 0:r.defaultVisibility)!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}async addAttachment(e,t){const r=await CIe(this,e,t,kr);return this.lastEditsEventDate=new Date,r}async updateAttachment(e,t,r){const i=await AIe(this,e,t,r,kr);return this.lastEditsEventDate=new Date,i}async applyEdits(e,t){return RIe(this,e,t)}async uploadAssets(e,t){return OIe(this,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return vCe(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:t}=await Nz(D(()=>import("./FeatureLayerSource-CHbmpxb5.js"),__vite__mapDeps([237,41,48,238,233,239,44,82,43,83,232,27,25,28,240,241,54,52,53,13,16,129,15]),import.meta.url),e);return new t({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=zIe(this);e.dynamicDataSource=this.dynamicDataSource;const t=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=Aye(this.definitionExpression,t);return e.where=r||"1=1",e}async deleteAttachments(e,t){const r=await kIe(this,e,t,kr);return this.lastEditsEventDate=new Date,r}async fetchRecomputedExtents(e){return PIe(this,e,kr)}getFeatureType(e){return QIe(this.types,this.typeIdField,e)}getFieldDomain(e,t){var a,u;const r=t==null?void 0:t.feature,i=!!((a=this.subtypes)!=null&&a.length);if(i&&!(t!=null&&t.excludeImpliedDomains)){const d=qIe(this,e);if(d)return d}const n=i&&BIe(this,r);if(n){const d=(u=n==null?void 0:n.domains)==null?void 0:u[e];return(d==null?void 0:d.type)==="inherited"?this._getLayerDomain(e):d}const s=this.getFeatureType(r),o=this._getLayerDomain(e);if(s){const d=s.domains&&s.domains[e];if(d&&(d==null?void 0:d.type)!=="inherited")return d}if(o)return o;if(!(t!=null&&t.excludeImpliedDomains)){const d=HIe(this,e);if(d)return d}return null}getField(e){return this.fieldsIndex.get(e)}async queryAttachments(e,t){return NIe(this,e,t,kr)}async queryFeatures(e,t){const r=await this.load(),i=await r.source.queryFeatures(Yo.from(e)??r.createQuery(),t);if(i!=null&&i.features)for(const n of i.features)n.layer=n.sourceLayer=r;return i}async queryObjectIds(e,t){return LIe(this,e,t,kr)}async queryFeatureCount(e,t){return FIe(this,e,t,kr)}async queryExtent(e,t){return DIe(this,e,t,kr)}async queryRelatedFeatures(e,t){return jIe(this,e,t,kr)}async queryRelatedFeaturesCount(e,t){return VIe(this,e,t,kr)}async queryTopFeatures(e,t){var o;const{source:r,capabilities:i}=await this.load();if(!r.queryTopFeatures||!((o=i==null?void 0:i.query)!=null&&o.supportsTopFeaturesQuery))throw new R(kr,"Layer source does not support queryTopFeatures capability");const n=await D(()=>import("./TopFeaturesQuery-lTOQIWFF.js"),[],import.meta.url),s=await r.queryTopFeatures(n.default.from(e),t);if(s!=null&&s.features)for(const a of s.features)a.layer=a.sourceLayer=this;return s}async queryBins(e,t){var o;const{source:r,capabilities:i}=await this.load();if(!r.queryBins||!((o=i==null?void 0:i.operations)!=null&&o.supportsQueryBins))throw new R(kr,"Layer source does not support queryBins capability");e3e(e,i,kr);const n=await D(()=>import("./BinsQuery-UVfF1CPh.js"),__vite__mapDeps([242,20,10]),import.meta.url),s=await r.queryBins(n.default.from(e),t);if(s.features)for(const a of s.features)a.layer=a.sourceLayer=this;return s}async queryTopObjectIds(e,t){const{source:r,capabilities:i}=await this.load();if(!r.queryTopObjectIds||!(i!=null&&i.query.supportsTopFeaturesQuery))throw new R(kr,"Layer source does not support queryTopObjectIds capability");const n=await D(()=>import("./TopFeaturesQuery-lTOQIWFF.js"),[],import.meta.url);return r.queryTopObjectIds(n.default.from(e),t)}async queryTopFeaturesExtent(e,t){var s;const{source:r,capabilities:i}=await this.load();if(!r.queryTopExtents||!((s=i==null?void 0:i.query)!=null&&s.supportsTopFeaturesQuery))throw new R(kr,"Layer source does not support queryTopExtents capability");const n=await D(()=>import("./TopFeaturesQuery-lTOQIWFF.js"),[],import.meta.url);return r.queryTopExtents(n.default.from(e),t)}async queryTopFeatureCount(e,t){var s;const{source:r,capabilities:i}=await this.load();if(!r.queryTopCount||!((s=i==null?void 0:i.query)!=null&&s.supportsTopFeaturesQuery))throw new R(kr,"Layer source does not support queryFeatureCount capability");const n=await D(()=>import("./TopFeaturesQuery-lTOQIWFF.js"),[],import.meta.url);return r.queryTopCount(n.default.from(e),t)}read(e,t){const r=e.featureCollection;if((r||e.type==="Feature Collection")&&(this.resourceInfo=e),r){const i=r.layers;i&&i.length===1&&(super.read(i[0],t),r.showLegend!=null&&super.read({showLegend:r.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,t){t={...t,origin:(t==null?void 0:t.origin)??void 0,writeLayerSchema:(t==null?void 0:t.writeLayerSchema)??this._hasMemorySource()};const{origin:r,layerContainerType:i,messages:n}=t;if(this.dynamicDataSource)return n==null||n.push(vw(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((r==="web-map"||r==="web-scene")&&i!=="tables")return n==null||n.push(vw(this,`a table source can only be written to tables, not ${i}`)),null;if(this._hasMemorySource())return n==null||n.push(vw(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(r==="web-map"||r==="web-scene")&&i==="tables")return n==null||n.push(vw(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new R(kr,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var t;return!!this.loaded&&(((t=this.source)==null?void 0:t.type)==="memory"||yCe(this,e))}async save(e){return this._debouncedSaveOperations(Uo.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(Uo.SAVE_AS,t,e)}_readEditingEnabled(e,t,r){var n;let i=(n=e.layerDefinition)==null?void 0:n.capabilities;return i?this._hasEditingCapability(i):(i=e.capabilities,t&&(r==null?void 0:r.origin)==="web-map"&&!this._hasMemorySource()&&i?this._hasEditingCapability(i):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,r,i){var n,s;if(!e){const o=(s=(n=this.capabilities)==null?void 0:n.operations)!=null&&s.supportsSync?"Query,Sync":"Query";cr("layerDefinition.capabilities",o,t),r&&!(i!=null&&i.writeLayerSchema)&&(t.capabilities=o)}}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstValidLayerId(e){return Le(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{const r=t.data;if(r)return this.findFirstValidLayerId(r)})}async initLayerProperties(e){var t;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(t=this.portalItem)==null?void 0:t.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),J5(this.renderer,this.fieldsIndex),fH(this.timeInfo,this.fieldsIndex),gCe(this,{origin:"service"})}async hasDataChanged(){return UIe(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var t,r;const e=((t=this.parsedUrl)==null?void 0:t.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(r=this.fields)!=null&&r.some(i=>i.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(r=>{var n;const i=(n=r.prototype)==null?void 0:n.attributes;i&&t&&delete i[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new R("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new R("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this.addHandles([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};l([c(TIe)],re.prototype,"attributeTableTemplate",void 0),l([G("service","capabilities")],re.prototype,"readCapabilities",null),l([c({json:{origins:{"web-scene":{write:!1}},write:!0}})],re.prototype,"charts",void 0),l([c({readOnly:!0})],re.prototype,"createQueryVersion",null),l([c({json:{read:{source:"layerDefinition.copyrightText"}}})],re.prototype,"copyright",void 0),l([c({json:{read:{source:"layerDefinition.displayField"}}})],re.prototype,"displayField",void 0),l([c({types:Ou,readOnly:!0})],re.prototype,"defaultSymbol",void 0),l([c({type:Us})],re.prototype,"dynamicDataSource",void 0),l([c({type:Boolean})],re.prototype,"editingEnabled",null),l([G(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],re.prototype,"readEditingEnabled",null),l([G("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],re.prototype,"readEditingEnabledFromWebMap",null),l([B(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],re.prototype,"writeEditingEnabled",null),l([B("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],re.prototype,"writeEditingEnabledToWebMap",null),l([c({readOnly:!0})],re.prototype,"effectiveEditingEnabled",null),l([c({...Zx.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:Jx}}}}})],re.prototype,"fields",void 0),l([c(Zx.fieldsIndex)],re.prototype,"fieldsIndex",void 0),l([c({type:EMe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],re.prototype,"formTemplate",void 0),l([c({json:{read:{source:"layerDefinition.extent"}}})],re.prototype,"fullExtent",void 0),l([c({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:Jx,writer(e,t,r){const i=e?kA.toJSON(e):null;i&&cr(r,i,t)}}}},read:{source:"layerDefinition.geometryType",reader:kA.read}}})],re.prototype,"geometryType",void 0),l([c({json:{read:{source:"layerDefinition.hasM"}}})],re.prototype,"hasM",void 0),l([c({json:{read:{source:"layerDefinition.hasZ"}}})],re.prototype,"hasZ",void 0),l([c(bIe)],re.prototype,"id",void 0),l([c({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],re.prototype,"infoFor3D",void 0),l([c({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],re.prototype,"isTable",void 0),l([G("service","isTable",["type","geometryType"]),G("isTable",["layerDefinition.type","layerDefinition.geometryType"])],re.prototype,"readIsTable",null),l([B("web-map","isTable")],re.prototype,"writeIsTable",null),l([c(fP)],re.prototype,"labelsVisible",void 0),l([c({type:[V$],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:Wx,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:Wx,write:{enabled:!0,layerContainerTypes:Ar}}},name:"layerDefinition.drawingInfo.labelingInfo",read:Wx,write:!0}})],re.prototype,"labelingInfo",void 0),l([c((()=>{const e=C(_Ie);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,r,i){cr(i,n$(t),r)}}},e})())],re.prototype,"opacity",void 0),l([c(vIe)],re.prototype,"legendEnabled",void 0),l([c({type:["show","hide"],json:(()=>{const e=C(dY.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],re.prototype,"listMode",void 0),l([G("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],re.prototype,"readGlobalIdField",null),l([c({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:Jx}}}}})],re.prototype,"objectIdField",void 0),l([G("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],re.prototype,"readObjectIdField",null),l([c({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],re.prototype,"operationalLayerType",void 0),l([c(Zx.outFields)],re.prototype,"outFields",void 0),l([c({readOnly:!0})],re.prototype,"parsedUrl",null),l([c({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],re.prototype,"path",void 0),l([c(hP)],re.prototype,"popupEnabled",void 0),l([c({type:hc,json:{name:"popupInfo",write:!0}})],re.prototype,"popupTemplate",void 0),l([c({readOnly:!0})],re.prototype,"defaultPopupTemplate",null),l([c({types:F$,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:QEe,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:Ar,overridePolicy:(e,t,r)=>({ignoreOrigin:r==null?void 0:r.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,r)=>({ignoreOrigin:r==null?void 0:r.writeLayerSchema})}}})],re.prototype,"renderer",null),l([G("service","renderer",["drawingInfo.renderer","defaultSymbol"]),G("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],re.prototype,"readRenderer",null),l([c()],re.prototype,"resourceInfo",void 0),l([c((()=>{const e=C(yIe);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],re.prototype,"screenSizePerspectiveEnabled",void 0),l([c({clonable:!1})],re.prototype,"source",null),l([Ne("source")],re.prototype,"castSource",null),l([G("portal-item","source",["featureSet"]),G("web-map","source",["featureSet"])],re.prototype,"readSource",null),l([c({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],re.prototype,"spatialReference",void 0),l([c({type:Number})],re.prototype,"subtypeCode",void 0),l([c({type:[SP]})],re.prototype,"templates",void 0),l([G("templates",["editFieldsInfo","creatorField","editorField","templates"])],re.prototype,"readTemplates",null),l([c({type:CY})],re.prototype,"timeInfo",void 0),l([c()],re.prototype,"title",void 0),l([G("service","title",["name"]),G("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],re.prototype,"readTitle",null),l([G("web-map","title",["layerDefinition.name","title"])],re.prototype,"readTitleFromWebMap",null),l([c({type:String})],re.prototype,"sublayerTitleMode",void 0),l([c({json:{read:!1}})],re.prototype,"type",void 0),l([c({type:String})],re.prototype,"typeIdField",void 0),l([G("service","typeIdField"),G("typeIdField",["layerDefinition.typeIdField"])],re.prototype,"readTypeIdField",null),l([c({type:[AY]})],re.prototype,"types",void 0),l([G("service","types",["types"]),G("types",["layerDefinition.types"])],re.prototype,"readTypes",null),l([c({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],re.prototype,"visible",void 0),l([G("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],re.prototype,"readVisible",null),re=l([$("esri.layers.FeatureLayer")],re);const $P=re,U6e=Object.freeze(Object.defineProperty({__proto__:null,default:$P},Symbol.toStringTag,{value:"Module"}));let Co=class extends N{constructor(t){super(t),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.dirtyAreaCount=null,this.exceededTransferLimit=null,this.serviceEdits=null,this.discoveredSubnetworks=null}};l([c({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.moment=e?e.getTime():null}}}})],Co.prototype,"moment",void 0),l([c({type:Boolean,json:{write:!0}})],Co.prototype,"fullUpdate",void 0),l([c({type:Boolean,json:{write:!0}})],Co.prototype,"validateErrorsCreated",void 0),l([c({type:Number,json:{write:!0}})],Co.prototype,"dirtyAreaCount",void 0),l([c({type:Boolean,json:{write:!0}})],Co.prototype,"exceededTransferLimit",void 0),l([c({type:[Object],json:{write:!0}})],Co.prototype,"serviceEdits",void 0),l([c({type:[Object],json:{write:!0}})],Co.prototype,"discoveredSubnetworks",void 0),Co=l([$("esri.rest.networks.support.ValidateNetworkTopologyResult")],Co);const ICe=Co,CCe=mr()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let nu=class extends ICe{constructor(t){super(t),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(t){const r={...t,query:{f:"json"}},{data:i}=await Le(this.statusUrl,r);return this.read(i),this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null}),this}async waitForJobCompletion(t={}){const{interval:r=1e3,statusCallback:i}=t;return new Promise((n,s)=>{this._clearTimer();const o=setInterval(()=>{this._timer||s(ot()),this.checkJobStatus().then(a=>{const{status:u}=a;switch(this.status=u,u){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":i&&i(this)}},a=>{this._clearTimer(),s(a)})},r);this._timer=o})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};l([c()],nu.prototype,"editsResolver",void 0),l([c({type:String,json:{write:!0}})],nu.prototype,"statusUrl",void 0),l([X(CCe)],nu.prototype,"status",void 0),l([c({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.submissionTime=e?e.getTime():null}}}})],nu.prototype,"submissionTime",void 0),l([c({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.lastUpdatedTime=e?e.getTime():null}}}})],nu.prototype,"lastUpdatedTime",void 0),nu=l([$("esri.networks.support.TopologyValidationJobInfo")],nu);const ACe=nu;async function w8(e,t){if(e==="Utility Network Layer"){const{default:r}=await D(()=>Promise.resolve().then(()=>HCe),void 0,import.meta.url);return new r({layerUrl:t})}return null}async function RCe(e){var o;let t="portalItem"in e?e:{portalItem:e};!t.portalItem||t.portalItem instanceof Ho||(t={...t,portalItem:new Ho(t.portalItem)});const r=t.portalItem;if(await r.load(),r.type!=="Feature Service")throw new R("portal:unknown-item-type","Unknown item type '${type}'",{type:r.type});const i=r.url,n=await Le(i,{responseType:"json",query:{f:"json"}}),s="Network Layer";if((o=n.data.type)!=null&&o.includes(s))return w8(n.data.type,i);if(n.data.layers){const a=n.data.layers.find(u=>u.type.includes(s));if(a){const u=`${i}/${a.id}`;return w8(a.type,u)}}return null}let Gt=class extends I$(ls){static fromPortalItem(t){return RCe(t)}constructor(t){super(t),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null,this.gdbVersion=null,this.historicMoment=null,this._sourceIdByLayerId=new Map,this._layerIdBySourceId=new Map,this._applyEditsHandler=r=>{const{serviceUrl:i,gdbVersion:n,result:s}=r,o=i===this.featureServiceUrl,a=m0(i,n,this.gdbVersion);o&&a&&s.then(u=>{ob(i,n)&&(this.historicMoment=u.historicMoment)})},this._updateMomentHandler=r=>{const{serviceUrl:i,gdbVersion:n,moment:s}=r,o=i===this.featureServiceUrl,a=m0(i,n,this.gdbVersion);o&&a&&(this.historicMoment=s)},this.when().then(()=>{this.addHandles([iY(this._applyEditsHandler),nY(this._updateMomentHandler)])},()=>{})}initialize(){this.when().catch(t=>{Or(t)||j.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}get datasetName(){var t;return((t=this.dataElement)==null?void 0:t.name)??null}get owner(){var t;return((t=this.dataElement)==null?void 0:t.userIdentity)??null}get schemaGeneration(){var t;return((t=this.dataElement)==null?void 0:t.schemaGeneration)??null}get parsedUrl(){return hr(this.layerUrl)}get featureServiceUrl(){return ic(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer")}get layerId(){return ic(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}async load(t){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),t)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,t)),this}getLayerIdBySourceId(t){if(!this.dataElement)return null;const r=this._layerIdBySourceId.get(t);if(r!=null)return r;const i=this.dataElement.domainNetworks,n=this._traverseNetworkSources(i,this._layerIdBySourceId,"sourceId","layerId",t);return n>=0?n:null}getSourceIdByLayerId(t){if(!this.dataElement)return null;const r=this._sourceIdByLayerId.get(t);if(r!=null)return r;const i=this.dataElement.domainNetworks,n=this._traverseNetworkSources(i,this._sourceIdByLayerId,"layerId","sourceId",t);return n>=0?n:null}getObjectIdsFromElements(t){const r=[],i=new Map;for(const s of t){const o=this.getLayerIdBySourceId(s.networkSourceId);if(o==null)continue;let a=i.get(o);a===void 0&&(a=[]),a.push(s.objectId),i.set(o,a)}const n=this.featureServiceUrl;return i.forEach((s,o)=>r.push({layerUrl:`${n}/${o}`,objectIds:s})),r}async queryNamedTraceConfigurations(t,r){var a;const[{queryNamedTraceConfigurations:i},{default:n}]=await Promise.all([D(()=>import("./queryNamedTraceConfigurations-BGFsADkF.js"),[],import.meta.url),D(()=>import("./QueryNamedTraceConfigurationsParameters-B1kOd2Pm.js"),[],import.meta.url)]),s=this.networkServiceUrl,o=n.from(t);return(a=await i(s,o,{...r}))==null?void 0:a.namedTraceConfigurations}async validateTopology(t,r){var h,f,m;if(!t.validateArea)throw new R("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const[{validateNetworkTopology:i},{default:n}]=await Promise.all([D(()=>import("./validateNetworkTopology-B6Wm-RBa.js"),[],import.meta.url),D(()=>import("./ValidateNetworkTopologyParameters-C9_sAoit.js"),[],import.meta.url)]),s=n.from(t);ob(this.featureServiceUrl,this.gdbVersion||null)?(s.sessionID=_A,await Hj(this.featureServiceUrl,this.gdbVersion,!0)):s.sessionID=null,s.gdbVersion=this.gdbVersion;const o=this.networkServiceUrl,a=this.featureServiceUrl,u=Wj(a,null,this.gdbVersion,!0),d=await i(o,s,{...r});if(d!=null&&d.serviceEdits){const y=[];for(const g of d.serviceEdits){const{editedFeatures:v}=g,_=v!=null&&v.spatialReference?new me(v.spatialReference):null;y.push({layerId:g.layerId,editedFeatures:{adds:((h=v==null?void 0:v.adds)==null?void 0:h.map(w=>ww(w,_)))||[],updates:((f=v==null?void 0:v.updates)==null?void 0:f.map(w=>({original:ww(w[0],_),current:ww(w[1],_)})))||[],deletes:((m=v==null?void 0:v.deletes)==null?void 0:m.map(w=>ww(w,_)))||[],spatialReference:_}})}u.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:y,exceededTransferLimit:!1,historicMoment:d.moment})}return d}async submitTopologyValidationJob(t,r){let i=null;if(!t.validateArea)throw new R("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!this.gdbVersion){const h=this.layerUrl.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");i=(await Le(h,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}const[{submitValidateNetworkTopologyJob:n},{default:s}]=await Promise.all([D(()=>import("./validateNetworkTopology-B6Wm-RBa.js"),[],import.meta.url),D(()=>import("./ValidateNetworkTopologyParameters-C9_sAoit.js"),[],import.meta.url)]),o=s.from(t);ob(this.featureServiceUrl,this.gdbVersion||null)?(o.sessionID=_A,await Hj(this.featureServiceUrl,this.gdbVersion,!0)):o.sessionID=null,o.gdbVersion=this.gdbVersion||i;const a=this.networkServiceUrl,u=this.featureServiceUrl?Wj(this.featureServiceUrl,null,this.gdbVersion,!0):void 0,d=await n(a,o,{...r});return new ACe({statusUrl:d,editsResolver:u})}_traverseNetworkSources(t,r,i,n,s){for(const o of t)for(const a of[o.edgeSources??[],o.junctionSources??[]])for(const u of a)if(u[i]===s)return r.set(s,u[n]),u[n];return-1}async _fetchLayerMetaData(t,r){const i=await Le(t,{responseType:"json",query:{f:"json"},...r});this.sourceJSON=i.data,this.read(i.data,{origin:"service"})}async _fetchDataElement(t,r,i){if(this.dataElement)return;const n=await Le(`${t}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([r]),f:"json"},...i}).then(s=>{var o;return(o=s.data.layerDataElements)==null?void 0:o[0]});n&&this.read(n,{origin:"service"})}};function ww(e,t){return new Ti({attributes:e.attributes,geometry:dl({...e.geometry,spatialReference:t})})}l([c({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],Gt.prototype,"id",void 0),l([c({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],Gt.prototype,"title",void 0),l([c({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],Gt.prototype,"layerUrl",void 0),l([c({type:Object,json:{origins:{service:{read:!0}},read:!1}})],Gt.prototype,"dataElement",void 0),l([c({type:qe,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],Gt.prototype,"fullExtent",void 0),l([c({type:me,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],Gt.prototype,"spatialReference",void 0),l([c({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],Gt.prototype,"type",void 0),l([c({readOnly:!0})],Gt.prototype,"datasetName",null),l([c({readOnly:!0})],Gt.prototype,"owner",null),l([c({readOnly:!0})],Gt.prototype,"schemaGeneration",null),l([c({readOnly:!0})],Gt.prototype,"parsedUrl",null),l([c({readOnly:!0})],Gt.prototype,"featureServiceUrl",null),l([c({readOnly:!0})],Gt.prototype,"networkServiceUrl",null),l([c({readOnly:!0})],Gt.prototype,"layerId",null),l([c()],Gt.prototype,"sourceJSON",void 0),l([c({readOnly:!0})],Gt.prototype,"networkSystemLayers",null),l([c()],Gt.prototype,"gdbVersion",void 0),l([c({type:Date})],Gt.prototype,"historicMoment",void 0),Gt=l([$("esri.networks.Network")],Gt);const OCe=Gt;var Ja;(function(e){e[e.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity",e[e.RTAttachment=2]="RTAttachment",e[e.RTContainment=3]="RTContainment",e[e.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity",e[e.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity"})(Ja||(Ja={}));const _w=new _e({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation"}),q6e=new _e({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionMidspanConnectivity:"junction-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"}),kCe={connectivity:1,"junction-junction-connectivity":1,attachment:2,containment:3,"junction-edge-from-connectivity":4,"junction-midspan-connectivity":5,"junction-edge-to-connectivity":6},H6e=Array.from({length:33},(e,t)=>2*t),W6e=new Map([[1,"connectivity"],[2,"containment"],[3,"attachment"],[4,"junction-edge-from-connectivity"],[5,"junction-midspan-connectivity"],[6,"junction-edge-to-connectivity"]]),Z6e=new _e({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});let su=class extends Sm(ls){constructor(t){super(t),this.rulesCategorized={attachment:[],containment:[],connectivity:[]},this.request=Le}initialize(){}async load(t){const r=this.layer.load(t).then(()=>this._initializeRulesTable());return this.addResolvingPromise(r),this}getFeatureSQL(t,r){var d,h;const i=t.layerId.toString(),n=(d=t.fieldsIndex)==null?void 0:d.normalizeFieldName("assetGroup"),s=(h=t.fieldsIndex)==null?void 0:h.normalizeFieldName("assetType"),o=n?r.attributes[n]:null,a=s?r.attributes[s]:null,u=this.rulesHash[i];if(u){const f=u.assetGroupHash[o];if(f)return f.assetTypeHash[a]||null}return null}async _initializeRulesTable(){var n,s,o,a,u,d,h,f,m,y,g;const t={};let r;(function(v){v[v.from=0]="from",v[v.to=1]="to",v[v.via=2]="via"})(r||(r={}));const i=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];this.rulesCategorized={attachment:[],containment:[],connectivity:[]};for(const v of this.rules){if(v.ruleType===Ja.RTAttachment){this.rulesCategorized.attachment.push(v);continue}if(v.ruleType===Ja.RTContainment){this.rulesCategorized.containment.push(v);continue}if(v.ruleType===Ja.RTJunctionJunctionConnectivity){this.rulesCategorized.connectivity.push(v);continue}this.rulesCategorized.connectivity.push(v);let _=[[r.from,r.to],[r.to,r.from]];v.ruleType===Ja.RTEdgeJunctionEdgeConnectivity&&(_=[[r.from,r.via],[r.via,r.from],[r.to,r.via],[r.via,r.to]]);for(const w of _){const b=w.shift(),T=w.shift();let x=!1;switch(v.ruleType){case Ja.RTEdgeJunctionEdgeConnectivity:x=b===r.from||b===r.to;break;case Ja.RTJunctionEdgeConnectivity:x=b===r.to}const M=i[b],I=((n=v[M.networkSourceId])==null?void 0:n.layerId.toString())??"",O=(o=(s=v[M.assetGroupId])==null?void 0:s.assetGroupCode)==null?void 0:o.toString(),P=v[M.assetTypeId],z=(a=P==null?void 0:P.assetTypeCode)==null?void 0:a.toString(),U=i[T],W=((u=v[U.networkSourceId])==null?void 0:u.layerId.toString())??"",ee=(h=(d=v[U.assetGroupId])==null?void 0:d.assetGroupCode)==null?void 0:h.toString(),de=v[U.assetTypeId],oe=(f=de==null?void 0:de.assetTypeCode)==null?void 0:f.toString(),Pe=t[I]??{assetGroupHash:{}};if(!(O&&z&&ee&&oe))continue;const tr=Pe.assetGroupHash[O]??{assetTypeHash:{}},Re=tr.assetTypeHash[z]??{};if(Re[W]=Re[W]??{},x){Re[I]=Re[I]??{};const pe=`(assetgroup = ${O} AND assettype = ${z})`;(de==null?void 0:de.connectivityPolicy)==="esriNECPEndVertex"?Re[I].endVertex=(m=Re[I])!=null&&m.endVertex?`${Re[I].endVertex}`:`${pe}`:Re[I].anyVertex=Re[I].anyVertex?`${Re[I].anyVertex}`:`${pe}`}const q=`(assetgroup = ${ee} AND assettype = ${oe})`;(de==null?void 0:de.connectivityPolicy)==="esriNECPEndVertex"?Re[W].endVertex=(y=Re[W])!=null&&y.endVertex?`${Re[W].endVertex} OR ${q}`:`${q}`:Re[W].anyVertex=(g=Re[W])!=null&&g.anyVertex?`${Re[W].anyVertex} OR ${q}`:`${q}`,tr.assetTypeHash[z]=Re,Pe.assetGroupHash[O]=tr,t[I]=Pe}}this.rulesHash=t}};l([c({constructOnly:!0})],su.prototype,"layer",void 0),l([c({constructOnly:!0})],su.prototype,"rules",void 0),l([c()],su.prototype,"rulesHash",void 0),l([c()],su.prototype,"rulesCategorized",void 0),l([c({constructOnly:!0})],su.prototype,"request",void 0),su=l([$("esri.networks.RulesTable")],su);const PCe=su;let Dn=class extends N{constructor(t){super(t),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};l([c({type:[Object],json:{write:!0}})],Dn.prototype,"conditionBarriers",void 0),l([c({type:[Object],json:{write:!0}})],Dn.prototype,"outputConditions",void 0),l([c({type:[Object],json:{write:!0}})],Dn.prototype,"functions",void 0),l([c({type:[Object],json:{write:!0}})],Dn.prototype,"functionBarriers",void 0),l([c({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Dn.prototype,"traversabilityScope",void 0),l([c({type:String,json:{write:!0}})],Dn.prototype,"shortestPathNetworkAttributeName",void 0),l([c({type:Boolean,json:{write:!0}})],Dn.prototype,"includeBarriers",void 0),l([c({type:Boolean,json:{write:!0}})],Dn.prototype,"validateConsistency",void 0),l([c({type:Boolean,json:{write:!0}})],Dn.prototype,"ignoreBarriersAtStartingPoints",void 0),Dn=l([$("esri.networks.support.TraceConfiguration")],Dn);const TP=Dn;let xt=class extends TP{constructor(t){super(t),this.filterBarriers=[],this.arcadeExpressionBarrier=null,this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.allowIndeterminateFlow=null,this.includeUpToFirstSpatialContainer=null,this.nearestNeighbor=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.diagramTemplateName=null,this.tierName=null,this.validateLocatability=null}};l([c({type:[Object],json:{write:!0}})],xt.prototype,"filterBarriers",void 0),l([c({type:String,json:{write:!0}})],xt.prototype,"arcadeExpressionBarrier",void 0),l([c({type:String,json:{write:!0}})],xt.prototype,"domainNetworkName",void 0),l([c({type:String,json:{write:!0}})],xt.prototype,"filterBitsetNetworkAttributeName",void 0),l([c({type:[Object],json:{write:!0}})],xt.prototype,"filterFunctionBarriers",void 0),l([c({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],xt.prototype,"filterScope",void 0),l([c({type:Boolean,json:{write:!0}})],xt.prototype,"includeContainers",void 0),l([c({type:Boolean,json:{write:!0}})],xt.prototype,"includeContent",void 0),l([c({type:Boolean,json:{write:!0}})],xt.prototype,"includeIsolated",void 0),l([c({type:Boolean,json:{write:!0}})],xt.prototype,"includeStructures",void 0),l([c({type:Boolean,json:{write:!0}})],xt.prototype,"allowIndeterminateFlow",void 0),l([c({type:Boolean,json:{write:!0}})],xt.prototype,"includeUpToFirstSpatialContainer",void 0),l([c({type:Object,json:{write:!0}})],xt.prototype,"nearestNeighbor",void 0),l([c({type:[Object],json:{write:!0}})],xt.prototype,"outputFilterCategories",void 0),l([c({type:[Object],json:{write:!0}})],xt.prototype,"outputFilters",void 0),l([c({type:[Object],json:{write:!0}})],xt.prototype,"propagators",void 0),l([c({type:String,json:{write:!0}})],xt.prototype,"subnetworkName",void 0),l([c({type:String,json:{write:!0}})],xt.prototype,"targetTierName",void 0),l([c({type:String,json:{write:!0}})],xt.prototype,"diagramTemplateName",void 0),l([c({type:String,json:{write:!0}})],xt.prototype,"tierName",void 0),l([c({type:Boolean,json:{write:!0}})],xt.prototype,"validateLocatability",void 0),xt=l([$("esri.networks.support.UNTraceConfiguration")],xt);const NCe=xt;let Ni=class extends aC{constructor(t){super(t),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(t,r){return t.tierName!==void 0?NCe.fromJSON(t):TP.fromJSON(t)}};l([c({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],Ni.prototype,"globalId",void 0),l([c({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],Ni.prototype,"title",void 0),l([c({type:TP,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Ni.prototype,"traceConfiguration",void 0),l([G("service","traceConfiguration")],Ni.prototype,"readTraceConfiguration",null),l([c({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Ni.prototype,"creationDate",void 0),l([c({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Ni.prototype,"creator",void 0),l([c({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Ni.prototype,"description",void 0),l([c({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],Ni.prototype,"minStartingPoints",void 0),l([c({json:{origins:{service:{read:!0,write:!0}},read:!1}})],Ni.prototype,"resultTypes",void 0),l([c({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],Ni.prototype,"tags",void 0),l([c({type:_w.apiValues,json:{type:_w.jsonValues,origins:{service:{read:_w.read,write:_w.write}},read:!1}})],Ni.prototype,"traceType",void 0),Ni=l([$("esri.networks.support.NamedTraceConfiguration")],Ni);const LCe=Ni;let ks=class extends te{constructor(t){super(t),this.rulesTableId=null,this.rulesTableUrl=null,this.subnetworksTableId=null,this.subnetworksTableUrl=null,this.dirtyAreasLayerId=null,this.dirtyAreasLayerUrl=null,this.associationsTableId=null,this.associationsTableUrl=null}};l([c({constructOnly:!0})],ks.prototype,"rulesTableId",void 0),l([c({constructOnly:!0})],ks.prototype,"rulesTableUrl",void 0),l([c({constructOnly:!0})],ks.prototype,"subnetworksTableId",void 0),l([c({constructOnly:!0})],ks.prototype,"subnetworksTableUrl",void 0),l([c({constructOnly:!0})],ks.prototype,"dirtyAreasLayerId",void 0),l([c({constructOnly:!0})],ks.prototype,"dirtyAreasLayerUrl",void 0),l([c({constructOnly:!0})],ks.prototype,"associationsTableId",void 0),l([c({constructOnly:!0})],ks.prototype,"associationsTableUrl",void 0),ks=l([$("esri.networks.support.NetworkSystemLayers")],ks);const FCe=ks;let Vh=class extends N{constructor(t){super(t),this.id=null,this.name=null}};l([c({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],Vh.prototype,"id",void 0),l([c({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],Vh.prototype,"name",void 0),l([c({type:Boolean,json:{write:!0}})],Vh.prototype,"isUpstreamTerminal",void 0),Vh=l([$("esri.networks.support.Terminal")],Vh);const DCe=Vh,bw=new _e({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let ou=class extends N{constructor(t){super(t),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};l([c({type:String,json:{write:!0}})],ou.prototype,"defaultConfiguration",void 0),l([c({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],ou.prototype,"id",void 0),l([c({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],ou.prototype,"name",void 0),l([c({type:[DCe],json:{write:!0}})],ou.prototype,"terminals",void 0),l([c({type:bw.apiValues,json:{type:bw.jsonValues,read:bw.read,write:bw.write}})],ou.prototype,"traversabilityModel",void 0),ou=l([$("esri.networks.support.TerminalConfiguration")],ou);const _8=ou;let Uh=class extends N{constructor(t){super(t),this.line=null,this.multipoint=null,this.polygon=null}};l([c({type:Kn,json:{write:!0},readOnly:!0})],Uh.prototype,"line",void 0),l([c({type:Av,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],Uh.prototype,"multipoint",void 0),l([c({type:Zi,json:{write:!0},readOnly:!0})],Uh.prototype,"polygon",void 0),Uh=l([$("esri.rest.networks.support.AggregatedGeometry")],Uh);const jCe=Uh;let zh=class extends N{constructor(t){super(t),this.functionType=null,this.networkAttributeName=null,this.result=null}};l([c({type:["add","subtract","average","count","min","max"],json:{write:!0},readOnly:!0})],zh.prototype,"functionType",void 0),l([c({type:String,json:{write:!0},readOnly:!0})],zh.prototype,"networkAttributeName",void 0),l([c({type:Number,json:{write:!0},readOnly:!0})],zh.prototype,"result",void 0),zh=l([$("esri.rest.networks.support.FunctionResult")],zh);const VCe=zh;let Ps=class extends N{constructor(t){super(t),this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};l([c({type:Number,json:{write:!0}})],Ps.prototype,"assetGroupCode",void 0),l([c({type:Number,json:{write:!0}})],Ps.prototype,"assetTypeCode",void 0),l([c({type:String,json:{write:!0}})],Ps.prototype,"globalId",void 0),l([c({type:Number,json:{write:!0}})],Ps.prototype,"networkSourceId",void 0),l([c({type:Number,json:{write:!0}})],Ps.prototype,"objectId",void 0),l([c({type:Number,json:{write:!0}})],Ps.prototype,"positionFrom",void 0),l([c({type:Number,json:{write:!0}})],Ps.prototype,"positionTo",void 0),l([c({type:Number,json:{write:!0}})],Ps.prototype,"terminalId",void 0),Ps=l([$("esri.rest.networks.support.NetworkElement")],Ps);const UCe=Ps;let Pa=class extends N{constructor(t){super(t),this.aggregatedGeometry=null,this.elements=null,this.globalFunctionResults=null,this.kFeaturesForKNNFound=!1,this.startingPointsIgnored=!1,this.warnings=null}};l([c({type:jCe,json:{write:!0},readOnly:!0})],Pa.prototype,"aggregatedGeometry",void 0),l([c({type:[UCe],json:{write:!0},readOnly:!0})],Pa.prototype,"elements",void 0),l([c({type:[VCe],json:{write:!0},readOnly:!0})],Pa.prototype,"globalFunctionResults",void 0),l([c({type:Boolean,json:{write:!0},readOnly:!0})],Pa.prototype,"kFeaturesForKNNFound",void 0),l([c({type:Boolean,json:{write:!0},readOnly:!0})],Pa.prototype,"startingPointsIgnored",void 0),l([c({type:[String],json:{write:!0},readOnly:!0})],Pa.prototype,"warnings",void 0),Pa=l([$("esri.rest.networks.support.TraceResult")],Pa);const zCe=Pa,GCe=mr()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let bd=class extends zCe{constructor(t){super(t),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(t){const r={...t,query:{f:"json"}},{data:i}=await Le(this.statusUrl,r),n=i.traceResults?{...i.traceResults,...i}:i;return this.read(n),this}async waitForJobCompletion(t={}){const{interval:r=1e3,statusCallback:i}=t;return new Promise((n,s)=>{this._clearTimer();const o=setInterval(()=>{this._timer||s(ot()),this.checkJobStatus().then(a=>{const{status:u}=a;switch(this.status=u,u){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":i&&i(this)}},a=>{this._clearTimer(),s(a)})},r);this._timer=o})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};l([c({type:String,json:{write:!0}})],bd.prototype,"statusUrl",void 0),l([X(GCe)],bd.prototype,"status",void 0),l([c({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.submissionTime=e?e.getTime():null}}}})],bd.prototype,"submissionTime",void 0),l([c({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.lastUpdatedTime=e?e.getTime():null}}}})],bd.prototype,"lastUpdatedTime",void 0),bd=l([$("esri.networks.support.TraceJobInfo")],bd);const BCe=bd;let Na=class extends OCe{constructor(t){super(t),this.sharedNamedTraceConfigurations=[],this.type="utility",this._terminalById=new Map}get serviceTerritoryFeatureLayerId(){var t;return((t=this.dataElement)==null?void 0:t.serviceTerritoryFeatureLayerId)??null}get networkSystemLayers(){var t,r,i,n,s,o,a,u;return new FCe({rulesTableId:(t=this.sourceJSON)==null?void 0:t.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(r=this.sourceJSON)==null?void 0:r.systemLayers.rulesTableId}`:null,subnetworksTableId:(i=this.sourceJSON)==null?void 0:i.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(n=this.sourceJSON)==null?void 0:n.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:(s=this.sourceJSON)==null?void 0:s.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${(o=this.sourceJSON)==null?void 0:o.systemLayers.dirtyAreasLayerId}`:null,associationsTableId:(a=this.sourceJSON)==null?void 0:a.systemLayers.associationsTableId,associationsTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(u=this.sourceJSON)==null?void 0:u.systemLayers.associationsTableId}`:null})}get terminalConfigurations(){var t;return((t=this.dataElement)==null?void 0:t.terminalConfigurations.map(r=>_8.fromJSON(r)))||[]}get domainNetworkNames(){var t;return((t=this.dataElement)==null?void 0:t.domainNetworks.map(r=>r.domainNetworkName))||[]}get _utilityLayerList(){var r,i;const t=new Set;return(i=(r=this.dataElement)==null?void 0:r.domainNetworks)==null||i.map(n=>{n.edgeSources.map(s=>{t.add(s.layerId)}),n.junctionSources.map(s=>{t.add(s.layerId)})}),t}async load(t){return this.addResolvingPromise(super.load(t)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(t)),this}getTerminalConfiguration(t){var d,h,f,m;let r=null,i=null;const n=t.layer;let s=null;if((n==null?void 0:n.type)==="feature"){if(s=n.layerId,s===null)return null}else if((n==null?void 0:n.type)!=="subtype-sublayer"||(s=((d=n==null?void 0:n.parent)==null?void 0:d.layerId)??null,s===null))return null;const o=t.attributes;if(o==null)return null;for(const y of Object.keys(o))y.toUpperCase()==="ASSETGROUP"&&(r=t.getAttribute(y)),y.toUpperCase()==="ASSETTYPE"&&(i=t.getAttribute(y));if(!this.dataElement)return null;let a=null;const u=this.dataElement.domainNetworks;for(const y of u){const g=(h=y.junctionSources)==null?void 0:h.find(v=>v.layerId===s);if(g){const v=(f=g.assetGroups)==null?void 0:f.find(_=>_.assetGroupCode===r);if(v){const _=(m=v.assetTypes)==null?void 0:m.find(w=>w.assetTypeCode===i);if(_){a=_.terminalConfigurationId;break}}}}if(a!=null){const y=this.dataElement.terminalConfigurations,g=y==null?void 0:y.find(v=>v.terminalConfigurationId===a);return g?_8.fromJSON(g):null}return null}getTierNames(t){var i;const r=(i=this.dataElement)==null?void 0:i.domainNetworks.find(n=>n.domainNetworkName===t);return(r==null?void 0:r.tiers.map(n=>n.name))||[]}async getRulesTable(){return this._sharedRulesTable||(this._sharedRulesTable=this._createRulesTable()),await this._sharedRulesTable}getTerminalById(t){if(!this.dataElement||t==null)return null;const r=this._terminalById.get(t);return r??(this.terminalConfigurations.forEach(i=>{i.terminals.forEach(n=>{this._terminalById.set(n.id,n)})}),this._terminalById.get(t))}isUtilityLayer(t){var r;return"layerId"in t&&this._utilityLayerList.has(t.layerId)&&(((r=t.url)==null?void 0:r.startsWith(this.featureServiceUrl))??!1)}async queryAssociations(t){const[{queryAssociations:r},{default:i}]=await Promise.all([D(()=>import("./queryAssociations-DzoJQAdj.js"),__vite__mapDeps([243,131]),import.meta.url),D(()=>import("./QueryAssociationsParameters-BFkfskOF.js"),[],import.meta.url)]),n=i.from(t);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,(await r(this.networkServiceUrl,n)).associations}async synthesizeAssociationGeometries(t){const[{synthesizeAssociationGeometries:r},{default:i}]=await Promise.all([D(()=>import("./synthesizeAssociationGeometries-nVL1-Zbu.js"),__vite__mapDeps([244,131]),import.meta.url),D(()=>import("./SynthesizeAssociationGeometriesParameters-87z26DQK.js"),[],import.meta.url)]),n=i.from(t);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,r(this.networkServiceUrl,n)}async trace(t){const[{trace:r},{default:i}]=await Promise.all([D(()=>import("./trace-DLVFOn-r.js"),[],import.meta.url),D(()=>import("./TraceParameters-BD93xE0u.js"),[],import.meta.url)]),n=i.from(t);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,r(this.networkServiceUrl,n)}async submitTraceJob(t){const[{submitTraceJob:r},{default:i}]=await Promise.all([D(()=>import("./trace-DLVFOn-r.js"),[],import.meta.url),D(()=>import("./TraceParameters-BD93xE0u.js"),[],import.meta.url)]),n=i.from(t);n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment;const s=await r(this.networkServiceUrl,n);return new BCe({statusUrl:s})}async canAddAssociation(t){const r=await this.getRulesTable();if(!r)return!1;await r.load();const i=(s,o)=>s?s.terminalId===1?!(o!=null&&o.terminalId)||(o==null?void 0:o.terminalId)===s.terminalId:s.terminalId===(o==null?void 0:o.terminalId):!(o!=null&&o.terminalId),n=(s,o)=>{var a,u,d,h,f,m,y,g,v,_,w,b;return((a=s.fromNetworkSource)==null?void 0:a.sourceId)===((u=o.fromNetworkElement)==null?void 0:u.networkSourceId)&&((d=s.toNetworkSource)==null?void 0:d.sourceId)===((h=o.toNetworkElement)==null?void 0:h.networkSourceId)&&((f=s.fromAssetGroup)==null?void 0:f.assetGroupCode)===((m=o.fromNetworkElement)==null?void 0:m.assetGroupCode)&&((y=s.fromAssetType)==null?void 0:y.assetTypeCode)===((g=o.fromNetworkElement)==null?void 0:g.assetTypeCode)&&((v=s.toAssetGroup)==null?void 0:v.assetGroupCode)===((_=o.toNetworkElement)==null?void 0:_.assetGroupCode)&&((w=s.toAssetType)==null?void 0:w.assetTypeCode)===((b=o.toNetworkElement)==null?void 0:b.assetTypeCode)&&i(s.fromTerminal,o.fromNetworkElement)&&i(s.toTerminal,o.toNetworkElement)};return t.associationType==="containment"?r.rulesCategorized.containment.some(s=>n(s,t)):t.associationType==="attachment"?r.rulesCategorized.attachment.some(s=>n(s,t)):r.rulesCategorized.connectivity.some(s=>{var o,a,u,d,h,f,m,y,g,v,_,w,b,T,x,M,I,O,P,z,U,W,ee,de;return s.viaNetworkSource?((o=s.fromNetworkSource)==null?void 0:o.sourceId)===((a=t.fromNetworkElement)==null?void 0:a.networkSourceId)&&((u=s.viaNetworkSource)==null?void 0:u.sourceId)===((d=t.toNetworkElement)==null?void 0:d.networkSourceId)&&((h=s.fromAssetGroup)==null?void 0:h.assetGroupCode)===((f=t.fromNetworkElement)==null?void 0:f.assetGroupCode)&&((m=s.fromAssetType)==null?void 0:m.assetTypeCode)===((y=t.fromNetworkElement)==null?void 0:y.assetTypeCode)&&((g=s.viaAssetGroup)==null?void 0:g.assetGroupCode)===((v=t.toNetworkElement)==null?void 0:v.assetGroupCode)&&((_=s.viaAssetType)==null?void 0:_.assetTypeCode)===((w=t.toNetworkElement)==null?void 0:w.assetTypeCode)&&i(s.fromTerminal,t.fromNetworkElement)&&i(s.viaTerminal,t.toNetworkElement)||((b=s.viaNetworkSource)==null?void 0:b.sourceId)===((T=t.fromNetworkElement)==null?void 0:T.networkSourceId)&&((x=s.toNetworkSource)==null?void 0:x.sourceId)===((M=t.toNetworkElement)==null?void 0:M.networkSourceId)&&((I=s.viaAssetGroup)==null?void 0:I.assetGroupCode)===((O=t.fromNetworkElement)==null?void 0:O.assetGroupCode)&&((P=s.viaAssetType)==null?void 0:P.assetTypeCode)===((z=t.fromNetworkElement)==null?void 0:z.assetTypeCode)&&((U=s.toAssetGroup)==null?void 0:U.assetGroupCode)===((W=t.toNetworkElement)==null?void 0:W.assetGroupCode)&&((ee=s.toAssetType)==null?void 0:ee.assetTypeCode)===((de=t.toNetworkElement)==null?void 0:de.assetTypeCode)&&i(s.viaTerminal,t.fromNetworkElement)&&i(s.toTerminal,t.toNetworkElement):n(s,t)})}generateAddAssociations(t){return{addFeatures:t.map(r=>{var i,n,s,o,a,u;return new Ti({attributes:{fromnetworksourceid:(i=r.fromNetworkElement)==null?void 0:i.networkSourceId,fromglobalid:(n=r.fromNetworkElement)==null?void 0:n.globalId,fromterminalid:(s=r.fromNetworkElement)==null?void 0:s.terminalId,tonetworksourceid:(o=r.toNetworkElement)==null?void 0:o.networkSourceId,toglobalid:(a=r.toNetworkElement)==null?void 0:a.globalId,toterminalid:(u=r.toNetworkElement)==null?void 0:u.terminalId,associationtype:kCe[r.associationType],iscontentvisible:r.isContentVisible?1:0,percentalong:r.percentAlong,globalid:r.globalId}})}),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:"globalid",objectIdField:"objectid"}}}generateDeleteAssociations(t){return{deleteFeatures:t.map(r=>({globalId:r.globalId})),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:"globalid",objectIdField:"objectid"}}}async _loadNamedTraceConfigurationsFromNetwork(t){var n;if(((n=this.sharedNamedTraceConfigurations)==null?void 0:n.length)===0)return;const r=this.sharedNamedTraceConfigurations.map(s=>s.globalId),i=await this.queryNamedTraceConfigurations({globalIds:r},t);for(const s of this.sharedNamedTraceConfigurations){const o=i==null?void 0:i.find(a=>a.globalId===s.globalId);if(o){const a=o.write({},{origin:"service"});s.read(a,{origin:"service"})}}}async _createRulesTable(){var o;const t=this.networkSystemLayers.rulesTableUrl,r=new $P({url:t});await r.load();const i=(o=this.dataElement)==null?void 0:o.domainNetworks;if(!i)return null;const n=i.flatMap(a=>[...a.edgeSources||[],...a.junctionSources||[]]),s=(await qCe(r)).map(a=>this._hydrateRuleInfo(r,n,a));return new PCe({layer:r,rules:s})}_hydrateRuleInfo(t,r,i){const n=t.fieldsIndex,s=n.get("RULETYPE"),o=n.get("CREATIONDATE"),a=n.get("FROMNETWORKSOURCEID"),u=n.get("FROMASSETGROUP"),d=n.get("FROMASSETTYPE"),h=n.get("FROMTERMINALID"),f=n.get("TONETWORKSOURCEID"),m=n.get("TOASSETGROUP"),y=n.get("TOASSETTYPE"),g=n.get("TOTERMINALID"),v=n.get("VIANETWORKSOURCEID"),_=n.get("VIAASSETGROUP"),w=n.get("VIAASSETTYPE"),b=n.get("VIATERMINALID"),T=i.attributes[s.name],x=new Date(i.attributes[o.name]),M=[{networkSourceId:i.attributes[a.name],assetGroupId:i.attributes[u.name],assetTypeId:i.attributes[d.name],terminalId:i.attributes[h.name]},{networkSourceId:i.attributes[f.name],assetGroupId:i.attributes[m.name],assetTypeId:i.attributes[y.name],terminalId:i.attributes[g.name]},{networkSourceId:i.attributes[v.name],assetGroupId:i.attributes[_.name],assetTypeId:i.attributes[w.name],terminalId:i.attributes[b.name]}];let I;(function(P){P[P.from=0]="from",P[P.to=1]="to",P[P.via=2]="via"})(I||(I={}));const O={ruleType:T,creationDate:x};for(const P of[I.from,I.to,I.via]){if(T!==Ja.RTEdgeJunctionEdgeConnectivity&&P===I.via)continue;const z=M[P],U=r.find(Pe=>Pe.sourceId===z.networkSourceId),W=U==null?void 0:U.assetGroups.find(Pe=>Pe.assetGroupCode===z.assetGroupId),ee=W==null?void 0:W.assetTypes.find(Pe=>Pe.assetTypeCode===z.assetTypeId),de=this._getTerminal(ee,z);let oe="";switch(P){case I.from:oe="from";break;case I.to:oe="to";break;case I.via:oe="via"}O[`${oe}NetworkSource`]=U,O[`${oe}AssetGroup`]=W,O[`${oe}AssetType`]=ee,O[`${oe}Terminal`]=de==null?void 0:de.toJSON()}return O}_getTerminal(t,r){var s,o;const i=t==null?void 0:t.terminalConfigurationId,n=(s=this.terminalConfigurations)==null?void 0:s.find(a=>a.id===i);return((o=n==null?void 0:n.terminals)==null?void 0:o.find(a=>a.id===r.terminalId))??null}};async function qCe(e){const t=new Yo({where:"1=1",outFields:["*"]});return(await pY(e,t)).features}l([c({type:[LCe],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],Na.prototype,"sharedNamedTraceConfigurations",void 0),l([c({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],Na.prototype,"type",void 0),l([c({readOnly:!0})],Na.prototype,"serviceTerritoryFeatureLayerId",null),l([c({readOnly:!0})],Na.prototype,"networkSystemLayers",null),l([c({readOnly:!0})],Na.prototype,"terminalConfigurations",null),l([c({readOnly:!0})],Na.prototype,"domainNetworkNames",null),Na=l([$("esri.networks.UtilityNetwork")],Na);const RY=Na,HCe=Object.freeze(Object.defineProperty({__proto__:null,default:RY},Symbol.toStringTag,{value:"Module"}));let Gh=class extends Me(N){constructor(t){super(t),this.expression=null,this.returnType="string",this.title=null}};l([c({type:String,json:{write:{isRequired:!0}}})],Gh.prototype,"expression",void 0),l([c({type:["number","string"],json:{write:!0}})],Gh.prototype,"returnType",void 0),l([c({type:String,json:{write:!0}})],Gh.prototype,"title",void 0),Gh=l([$("esri.webdoc.geotriggersInfo.ExpressionInfo")],Gh);const OY=Gh,Sw=new _e({deviceLocation:"device-location"});let Pg=class extends Me(N){constructor(t){super(t),this.filterExpression=null,this.type="device-location"}};l([c({type:OY,json:{write:!0}})],Pg.prototype,"filterExpression",void 0),l([c({type:Sw.apiValues,readOnly:!0,json:{type:Sw.jsonValues,read:Sw.read,write:Sw.write}})],Pg.prototype,"type",void 0),Pg=l([$("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],Pg);const WCe=Pg;let Ng=class extends Me(N){constructor(t){super(t),this.geometry=null,this.where=null}};l([c({types:bp,json:{read:dl,write:!0}})],Ng.prototype,"geometry",void 0),l([c({type:String,json:{write:!0}})],Ng.prototype,"where",void 0),Ng=l([$("esri.webdoc.geotriggersInfo.FeatureFilter")],Ng);const ZCe=Ng;let Bh=class extends Me(N){constructor(t){super(t),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};l([c({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],Bh.prototype,"layerId",void 0),l([c({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],Bh.prototype,"layerUrl",void 0),l([X({featureLayer:"feature-layer"},{readOnly:!0})],Bh.prototype,"type",void 0),Bh=l([$("esri.webdoc.geotriggersInfo.FeatureLayerSource")],Bh);const JCe=Bh;let Sd=class extends Me(N){constructor(t){super(t),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};l([c({type:JCe,json:{write:{isRequired:!0}}})],Sd.prototype,"fenceSource",void 0),l([c({type:ZCe,json:{write:!0}})],Sd.prototype,"filter",void 0),l([c({type:Number,json:{write:!0}})],Sd.prototype,"bufferDistance",void 0),l([X({features:"features"},{readOnly:!0})],Sd.prototype,"type",void 0),Sd=l([$("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],Sd);const KCe=Sd;let ub=class extends Me(N){constructor(t){super(t),this.type="fence"}};l([X({fence:"fence"},{readOnly:!0})],ub.prototype,"type",void 0),ub=l([$("esri.webdoc.geotriggersInfo.Geotrigger")],ub);const kY=ub;let Lg=class extends Me(N){constructor(t){super(t),this.expressionInfo=null,this.requestedActions=null}};l([c({type:OY,json:{write:!0}})],Lg.prototype,"expressionInfo",void 0),l([c({type:[String],json:{write:!0}})],Lg.prototype,"requestedActions",void 0),Lg=l([$("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],Lg);const YCe=Lg,QCe=new _e({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),XCe=new _e({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),$w=new _e({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});let Ns=class extends kY{constructor(t){super(t),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};l([X(QCe)],Ns.prototype,"enterExitRule",void 0),l([c({type:WCe,json:{write:{isRequired:!0}}})],Ns.prototype,"feed",void 0),l([X(XCe)],Ns.prototype,"feedAccuracyMode",void 0),l([c({type:$w.apiValues,json:{type:$w.jsonValues,read:$w.read,write:{writer:$w.write,isRequired:!0}}})],Ns.prototype,"fenceNotificationRule",void 0),l([c({type:KCe,json:{write:{isRequired:!0}}})],Ns.prototype,"fenceParameters",void 0),l([c({type:String,json:{write:!0}})],Ns.prototype,"name",void 0),l([c({type:YCe,json:{write:!0}})],Ns.prototype,"notificationOptions",void 0),l([X({fence:"fence"},{readOnly:!0})],Ns.prototype,"type",void 0),Ns=l([$("esri.webdoc.geotriggersInfo.FenceGeotrigger")],Ns);const eAe=Ns,tAe={base:kY,key:"type",typeMap:{fence:eAe}};let cb=class extends Me(N){constructor(t){super(t),this.geotriggers=null}};l([c({types:[tAe],json:{write:{isRequired:!0}}})],cb.prototype,"geotriggers",void 0),cb=l([$("esri.webdoc.GeotriggersInfo")],cb);const rAe=cb;let qh=class extends Me(N){constructor(t){super(t),this.portalItem=null}readPortalItem(t,r,i){const{itemId:n}=r;if(n)return new Ho({id:n,portal:i==null?void 0:i.portal})}writePortalItem(t,r){t!=null&&t.id&&(r.itemId=t.id)}};l([c({type:Ho,json:{write:{isRequired:!0}}})],qh.prototype,"portalItem",void 0),l([G("portalItem",["itemId"])],qh.prototype,"readPortalItem",null),l([B("portalItem",{itemId:{type:String}})],qh.prototype,"writePortalItem",null),qh=l([$("esri.webdoc.ips.PositioningService")],qh);const iAe=qh;let db=class extends Me(N){constructor(t){super(t),this.positioningService=null}};l([c({type:iAe,json:{write:{isRequired:!0}}})],db.prototype,"positioningService",void 0),db=l([$("esri.webdoc.IPSInfo")],db);const nAe=db,sAe={currentVersion:AJ,createInitialViewProperties:()=>new e2,parseVersion:jf.parse,itemType:"Web Map",name:"webmap",origin:"web-map"},oAe=Y.ofType(RY);let au=class extends Q$e{constructor(t){super(t),this.geotriggersInfo=null,this.ipsInfo=null,this.presentation=null,this.utilityNetworks=null}destroy(){if(this.utilityNetworks){const t=this.utilityNetworks.removeAll();for(const r of t)r.destroy();this.utilityNetworks.destroy()}}get context(){return sAe}loadAll(){return t$(this,t=>{var r,i;t(this.ground,this.basemap,this.layers,this.tables,(i=(r=this.ipsInfo)==null?void 0:r.positioningService)==null?void 0:i.portalItem)})}static fromJSON(t){if(t)return new this({resourceInfo:t});throw new R("webmap:empty-resource","Expected a JSON resource but got nothing")}};au.VERSION=AJ,l([c({type:rAe,json:{write:!0}})],au.prototype,"geotriggersInfo",void 0),l([c({type:nAe,json:{write:!0,name:"mapIPSInfo"}})],au.prototype,"ipsInfo",void 0),l([c({json:{write:!0}})],au.prototype,"presentation",void 0),l([c({type:oAe,json:{read:!0,write:!0}})],au.prototype,"utilityNetworks",void 0),au=l([$("esri.WebMap")],au);const aAe=au;let La=class extends E$(cs.EventedAccessor){constructor(t){super(t),this._initialViewpoint=null,this._goingHomeController=null,this.go=this.go.bind(this)}destroy(){this._cancelGo(),this.view=null}get state(){var t;return(t=this.view)!=null&&t.ready?this._goingHomeController?"going-home":"ready":"disabled"}set view(t){this._initialViewpoint=null,this._set("view",t),t&&t.when().then(()=>{this.view===t&&(this._initialViewpoint=t.viewpoint.clone(),this.notifyChange("viewpoint"))})}get viewpoint(){return this._get("viewpoint")||this._initialViewpoint}set viewpoint(t){this._set("viewpoint",t)}async go(){var r,i;if(!((r=this.view)!=null&&r.ready))throw new R("home:disabled-state","Cannot go when disabled.");this._cancelGo(),this.emit("go");const t=new AbortController;this._goingHomeController=t;try{await((i=this.view)==null?void 0:i.when()),await this.callGoTo({target:this.viewpoint,options:{signal:t.signal}})}catch{}this._goingHomeController=null}cancelGo(){this._cancelGo()}_cancelGo(){const{_goingHomeController:t}=this;t&&t.abort(),this._goingHomeController=null}};l([c()],La.prototype,"_goingHomeController",void 0),l([c({readOnly:!0})],La.prototype,"state",null),l([c()],La.prototype,"view",null),l([c({type:dr})],La.prototype,"viewpoint",null),l([c()],La.prototype,"go",null),l([c()],La.prototype,"cancelGo",null),La=l([$("esri.widgets.Home.HomeViewModel")],La);const PY=La;function xP(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const r=t._delegatedEventNames,i=Array.isArray(e)?e:lAe(e);r.push(...i)}}function lAe(e){return e.split(",").map(t=>t.trim())}const uAe={base:"esri-home"};let jn=class extends ta{constructor(t,r){super(t,r),this.messages=null,this.messagesCommon=null,this.uiStrings=void 0,this.viewModel=new PY,this._go=()=>{const{viewModel:i}=this;i.state==="going-home"?i.cancelGo():i.go()}}loadDependencies(){return Cp({button:()=>D(()=>import("./calcite-button-CbVluA9b.js"),__vite__mapDeps([216,217,218,219,220,221,222,223,224,225]),import.meta.url),loader:()=>D(()=>import("./calcite-loader-DmOo300H.js"),__vite__mapDeps([245,225,222,223]),import.meta.url)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get icon(){return"home"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get viewpoint(){return this.viewModel.viewpoint}set viewpoint(t){this.viewModel.viewpoint=t}cancelGo(){this.viewModel.cancelGo()}go(){return this.viewModel.go()}render(){var o;const{messagesCommon:t,messages:r,icon:i}=this,n=(o=this.viewModel)==null?void 0:o.state,s=n==="going-home";return H("div",{class:this.classes(uAe.base,Te.widget)},H("calcite-button",{class:Te.widgetButton,disabled:n==="disabled",iconStart:s?void 0:i,kind:"neutral",label:r.widgetLabel,onclick:this._go,scale:s?"s":"m",title:n==="going-home"?t.cancel:r.title},s?H("calcite-loader",{inline:!0,label:""}):null))}};l([c()],jn.prototype,"goToOverride",null),l([c()],jn.prototype,"icon",null),l([c()],jn.prototype,"label",null),l([c(),Ji("esri/widgets/Home/t9n/Home")],jn.prototype,"messages",void 0),l([c(),Ji("esri/t9n/common")],jn.prototype,"messagesCommon",void 0),l([c()],jn.prototype,"uiStrings",void 0),l([c()],jn.prototype,"view",null),l([c({type:PY}),xP("go")],jn.prototype,"viewModel",void 0),l([c()],jn.prototype,"viewpoint",null),jn=l([$("esri.widgets.Home")],jn);const cAe=jn,it="esri-search",Xe={base:it,hasMultipleSources:`${it}--multiple-sources`,isLoading:`${it}--loading`,isSearching:`${it}--searching`,showSuggestions:`${it}--show-suggestions`,showSources:`${it}--sources`,showWarning:`${it}--warning`,container:`${it}__container`,input:`${it}__input`,inputContainer:`${it}__input-container`,form:`${it}__form`,submitButton:`${it}__submit-button`,sourcesButton:`${it}__sources-button`,sourcesButtonDown:`${it}__sources-button--down`,sourcesButtonUp:`${it}__sources-button--up`,clearButton:`${it}__clear-button`,sourceName:`${it}__source-name`,suggestionsMenu:`${it}__suggestions-menu`,suggestionList:`${it}__suggestions-list`,suggestionListCurrentLocation:`${it}__suggestions-list--current-location`,sourcesMenu:`${it}__sources-menu`,source:`${it}__source`,warningMenu:`${it}__warning-menu`,warningMenuBody:`${it}__warning-body`,warningMenuHeader:`${it}__warning-header`,warningMenuText:`${it}__warning-text`,noValueText:`${it}__no-value-text`},Ic="esri-search-result-renderer",Cc={base:Ic,showMoreResults:`${Ic}__more-results--show-more-results`,moreResults:`${Ic}__more-results`,moreResultsList:`${Ic}__more-results-list`,moreResultsHeader:`${Ic}__more-results-header`,moreResultsItem:`${Ic}__more-results-item`,moreResultsListHeader:`${Ic}__more-results-list-header`},NY=96;function Sje(e,t){const r=e.extent,i=e.width,n=io(r==null?void 0:r.spatialReference);return r&&i?r.width/i*n*R7*NY:0}function dAe(e,t){return e/(io(t)*R7*NY)}function pAe(e,t){const r=e.extent,i=e.width-(e.padding?e.padding.left+e.padding.right:0),n=dAe(t,r.spatialReference);return r.clone().expand(n*i/r.width)}function $je(e,t,r){return hAe(e,t)&&fAe(e,r)}function hAe(e,t){return t===0||Jg(e,t)||e<t}function fAe(e,t){return t===0||Jg(e,t)||e>t}function b8(e){var t;switch(e==null?void 0:e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":case"polyline":return(t=e.extent)==null?void 0:t.center;default:return null}}async function mAe(e,t){var n,s;if(e.hasZ||t.type==="2d")return e;const r=(n=t.map)==null?void 0:n.ground;if(!(r!=null&&r.layers.length))return e;const{geometry:i}=await r.queryElevation(e,{cache:(s=t.basemapTerrain)==null?void 0:s.elevationQueryCache});return i}function GA(e,t,r){return LY(e.center,t,r)}function EP(e,t,r){switch(e==null?void 0:e.type){case"extent":return e;case"multipoint":case"polygon":case"polyline":return e.extent;case"point":return LY(e,t,r);default:return null}}function LY(e,t,r){const i=e.hasZ?e.z:void 0;if(t!=null&&t.map)return(r!=null?pAe(t,r):t.extent).clone().centerAt(e).set({zmax:i,zmin:i});const{x:n,y:s,spatialReference:o}=e;return new qe({xmin:n-.25,ymin:s-.25,xmax:n+.25,ymax:s+.25,spatialReference:o,zmin:i,zmax:i})}function yAe(e){return e&&typeof e.highlight=="function"}function gAe(e,t,r){return e==null||e>=r&&(t===0||e<=t)}function Tje(e,t){if(t&&e){const{minScale:r,maxScale:i}=e;if(vAe(r,i))return gAe(t,r,i)}return!0}function vAe(e,t){return e!=null&&e>0||t!=null&&t>0}function xje(e){return!(e!=null&&e.minScale)||!e.maxScale||e.minScale>=e.maxScale}let Bt=class extends jv(N){constructor(t){super(t),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};l([c()],Bt.prototype,"autoNavigate",void 0),l([c()],Bt.prototype,"filter",void 0),l([c()],Bt.prototype,"getResults",void 0),l([c()],Bt.prototype,"getSuggestions",void 0),l([c()],Bt.prototype,"maxResults",void 0),l([c()],Bt.prototype,"maxSuggestions",void 0),l([c()],Bt.prototype,"minSuggestCharacters",void 0),l([c()],Bt.prototype,"outFields",void 0),l([c()],Bt.prototype,"placeholder",void 0),l([c()],Bt.prototype,"popupEnabled",void 0),l([c()],Bt.prototype,"popupTemplate",void 0),l([c()],Bt.prototype,"prefix",void 0),l([c()],Bt.prototype,"resultGraphicEnabled",void 0),l([c()],Bt.prototype,"resultSymbol",void 0),l([c()],Bt.prototype,"suggestionsEnabled",void 0),l([c()],Bt.prototype,"suffix",void 0),l([c()],Bt.prototype,"withinViewEnabled",void 0),l([c()],Bt.prototype,"zoomScale",void 0),Bt=l([$("esri.widgets.Search.SearchSource")],Bt);const MP=Bt,wAe=/https?:\/\/services.*\.arcgis\.com/i,_Ae=/(?:\{([^}]+)\})/g,Gf=()=>j.getLogger("esri.widgets.Search.support.layerSearchUtils");function bAe(e,t){const{exactMatch:r=!1,location:i,maxResults:n,spatialReference:s,source:o,sourceIndex:a,suggestResult:u,view:d}=e,{layer:h,filter:f,zoomScale:m}=o,y=d==null?void 0:d.scale,g=FY(o,d),v=t==null?void 0:t.signal;return jY(h).then(()=>{const _=h.popupTemplate;return _?_.getRequiredFields(h.fieldsIndex):null}).then(_=>{var W,ee,de,oe;const{objectIdField:w,returnZ:b}=h,T=qY(o);if(!IP(h,T))throw Gf().error("invalid-field: displayField is invalid."),new R("getResults():invalid-field","displayField is invalid.");const x=_!=null&&_.length?_:[T],M=o.outFields||x,I=DY(M);if(M.includes(w)||I||M.push(w),(W=h.floorInfo)!=null&&W.floorField&&M.push(h.floorInfo.floorField),!(I||n2(h,M)))throw Gf().error("invalid-field: outField is invalid."),new R("getResults():invalid-field","outField is invalid.");const O=h.createQuery(),{orderByFields:P}=o;if(P&&(O.orderByFields=P),s){O.outSpatialReference=s;const Pe=1/io(s);Pe&&(O.maxAllowableOffset=Pe)}const z=h.geometryType==="mesh"||h.geometryType==="multipatch",U=((de=(ee=h.capabilities)==null?void 0:ee.data)==null?void 0:de.supportsZ)&&!z;if(O.returnZ=U&&b!==!1,O.returnGeometry=!0,O.multipatchOption=z?"xyFootprint":null,M&&(O.outFields=M),i)O.geometry=i;else if(u.key)O.objectIds=[u.key];else{const Pe=o.searchFields||[T];if(!n2(h,Pe))throw Gf().error("invalid-field: search field is invalid."),new R("getResults():invalid-field","search field is invalid.");if(BY(h)&&(O.num=n),g&&(O.geometry=g),!((oe=u.text)==null?void 0:oe.trim()))return[];const Re=u.text,{prefix:q="",suffix:pe=""}=o,Ie=HY(`${q}${Re}${pe}`);GY(h)&&UY(h,Pe)&&!r&&Re&&(O.fullText=zY({text:Re,searchFields:Pe}));const dt=WY({searchTerm:Ie,layer:h,searchFields:Pe,filter:f,exactMatch:r,query:O,type:"search"});if(O.where=dt,!VY(O))return[]}return h.queryFeatures(O,{signal:v}).then(Pe=>PAe(Pe,d,o,a,T,y,m))})}function SAe(e,t){const{source:r,spatialReference:i,view:n,suggestTerm:s,maxSuggestions:o,sourceIndex:a,exactMatch:u}=e,{layer:d,filter:h}=r,f=t==null?void 0:t.signal,m=FY(r,n);return jY(d).then(()=>{if(!BY(d))return[];const y=qY(r),g=r.searchFields||[y],v=[];r.suggestionTemplate?r.suggestionTemplate.replaceAll(_Ae,(U,W)=>(v.push(W),U)):v.push(y);const _=DY(v);v.includes(d.objectIdField)||_||v.push(d.objectIdField);const w=IP(d,y),b=_||n2(d,v),T=n2(d,g);if(!w)throw Gf().error("invalid-field: displayField is invalid."),new R("getSuggestions():invalid-field","displayField is invalid.");if(!b)throw Gf().error("invalid-field: outField is invalid."),new R("getSuggestions():invalid-field","outField is invalid.");if(!T)throw Gf().error("invalid-field: search field is invalid."),new R("getSuggestions():invalid-field","search field is invalid.");const x=d.createQuery(),{orderByFields:M}=r;if(M&&(x.orderByFields=M),x.outSpatialReference=i,x.returnGeometry=!1,x.num=o,x.outFields=v,m&&(x.geometry=m),!s.trim())return[];const{prefix:I="",suffix:O=""}=r,P=HY(`${I}${s}${O}`);GY(d)&&UY(d,g)&&!u&&s&&(x.fullText=zY({text:s,searchFields:g}));const z=WY({searchTerm:P,layer:d,searchFields:g,filter:h,exactMatch:u,query:x,type:"suggest"});return x.where=z,VY(x)?d.queryFeatures(x,{signal:f}).then(U=>RAe(U,r,a,y)):[]})}function FY(e,t){const{filter:r,withinViewEnabled:i}=e,n=t==null?void 0:t.extent;return(r==null?void 0:r.geometry)??(i&&n?n:void 0)}function DY(e){return e&&e.includes("*")}async function jY(e){e&&await e.load()}function VY(e){return!(!e.fullText&&!e.where)}function UY(e,t){const r=e==null?void 0:e.indexes;return!r||!(t!=null&&t.length)?!1:r.filter(i=>i.indexType==="FullText").some(i=>{var s;const n=((s=i.fields)==null?void 0:s.split(",").map(o=>o.trim().toLowerCase()))||[];return t.every(o=>n.includes(o.toLowerCase()))})}function zY({text:e,searchFields:t}){return e.trim().split(" ").filter(r=>!!r.trim()).map(r=>new fW({onFields:t,searchTerm:r,searchType:"prefix"}))}function GY(e){var t,r;return((r=(t=e==null?void 0:e.capabilities)==null?void 0:t.query)==null?void 0:r.supportsFullTextSearch)??!1}function BY(e){var t,r;return((r=(t=e==null?void 0:e.capabilities)==null?void 0:t.query)==null?void 0:r.supportsPagination)??!1}function $Ae(e){var t,r,i;return((i=(r=(t=e==null?void 0:e.fieldsIndex)==null?void 0:t.fields)==null?void 0:r.find(n=>n.type==="string"))==null?void 0:i.name)??""}function qY(e){return e.displayField||e.layer.displayField||$Ae(e.layer)}function n2(e,t){return!(!e||!(t!=null&&t.length))&&t.every(r=>IP(e,r))}function IP(e,t){return!!e.getField(t)}function TAe(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}function xAe({codedValues:e},t,r){return j0(e??[],i=>{const n=i.name,s=r?n:n.toLowerCase();return(r?t:t.toLowerCase())===s?i.code.toString():null})??null}function HY(e){return e.replaceAll("'","''")}function by(e,t){const r=t==null?void 0:t.where;return r?`(${e}) AND (${r})`:e}function EAe({currentTerm:e,field:t,filter:r,exactMatch:i,url:n,type:s}){const o=t==null?void 0:t.type,a=t==null?void 0:t.name;if(o==="string"||o==="date"||o==="global-id"){const u=wAe.test(n??""),d=u&&TAe(e)?"N":"";return by(i&&s==="search"?`${a} = ${d}'${e}'`:u?`${a} LIKE ${d}${`'${e}%'`}`:`${`LOWER(${a})`} LIKE ${d}${`'${e.toLowerCase()}%'`}`,r)}if(o==="oid"||o==="small-integer"||o==="integer"||o==="single"||o==="double"){const u=Number(e);return isNaN(u)?null:by(`${a} = ${u}`,r)}return by(`${a} = ${e}`,r)}function MAe(e,t){return e?` OR (${t})`:`(${t})`}function WY({searchTerm:e,layer:t,searchFields:r,filter:i,exactMatch:n,query:s,type:o}){const{definitionExpression:a,url:u}=t;let d="";return!s.fullText&&e&&r&&r.forEach(h=>{var g;const f=t.getField(h),m=(g=t.getFieldDomain)==null?void 0:g.call(t,h,{excludeImpliedDomains:L("esri-widget-legacy-field-domain-calculation")}),y=(m&&m.type==="coded-value"?xAe(m,e,n):null)||e||null;if(y!==null){const v=EAe({currentTerm:y,field:f,filter:i,exactMatch:n,url:u,type:o});v&&(d+=MAe(d,v))}}),a&&d?`(${a}) AND (${d})`:a||d}function IAe(e,t){let r=null;const{codedValues:i}=e;return i&&i.length&&i.some(n=>n.code===t&&(r=n.name,!0)),r}function CAe(e,t){return e[t]??e[Object.keys(e).find(r=>r.toLowerCase()===t.toLowerCase())]}function ZY(e,t,r){var o;const i=e.sourceLayer,{attributes:n}=e,s=(o=i.getFieldDomain)==null?void 0:o.call(i,r,{feature:e,excludeImpliedDomains:L("esri-widget-legacy-field-domain-calculation")});if(t)return kB(t,n);if(r&&n){const a=i.getField(r),u=CAe(n,r);return u==null?"":s&&s.type==="coded-value"?IAe(s,u)??"":(a==null?void 0:a.type)==="date"?ec(new Date(u)):typeof u=="number"?u.toString():typeof u!="string"?"":u.trim()}return""}function AAe(e,t,r,i){const n=e.sourceLayer,{attributes:s}=e,{objectIdField:o}=n,a=o?s[o]:null;return{text:ZY(e,t.suggestionTemplate,i),key:a,sourceIndex:r}}function RAe(e,t,r,i){return e.features.map(n=>AAe(n,t,r,i))}function OAe(e){return e!=null&&e.minScale!=null&&e.maxScale!=null}function kAe(e,t,r,i,n,s,o){const a=e.clone(),u=e.sourceLayer,d=u==null?void 0:u.objectIdField,h=d?e.attributes[d]:null,f=ZY(e,r.searchTemplate,n);s!=null&&OAe(u)&&(u.minScale&&u.minScale<s?s=u.minScale:u.maxScale&&u.maxScale>s&&(s=u.maxScale));const m=a.geometry?EP(a.geometry,t??void 0,s??void 0):void 0,y=typeof o=="number"&&m?GA(C(m),t??void 0,o):m,g=e.clone();return y!=null&&(g.geometry=Zi.fromExtent(y)),{extent:y,target:g,feature:a,key:h,name:f,sourceIndex:i}}function PAe(e,t,r,i,n,s,o){return e.features.map(a=>kAe(a,t,r,i,n,s,o))}var BA;let Ls=BA=class extends MP{constructor(e){super(e),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(t,r)=>bAe({source:this,...t},r),this.getSuggestions=(t,r)=>SAe({source:this,...t},r)}set layer(e){this._set("layer",e),e&&e.load().catch(()=>{})}get name(){return this._getLayerTitle()??""}set name(e){this._overrideIfSome("name",e)}clone(){return new BA({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?C(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?C(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var e,t;return((t=(e=this.layer.fieldsIndex)==null?void 0:e.fields.find(r=>r.type==="string"))==null?void 0:t.name)??""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:e,searchFields:t}=this;return e.loaded?`: ${(t||[this._getDisplayField()]).map(r=>{const i=e.getField(r);return(i==null?void 0:i.alias)||r}).join(", ")}`:""}_getLayerTitle(){const{layer:e}=this;if(!e)return;const{title:t}=e;return t?`${t}${this._getSearchFieldsString()}`:void 0}};l([c({json:{read:{source:"field.name"},write:{target:"field.name"}}})],Ls.prototype,"displayField",void 0),l([c({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],Ls.prototype,"exactMatch",void 0),l([c({value:null})],Ls.prototype,"layer",null),l([c()],Ls.prototype,"name",null),l([c({type:[String],json:{write:!0}})],Ls.prototype,"orderByFields",void 0),l([c()],Ls.prototype,"searchFields",void 0),l([c()],Ls.prototype,"searchTemplate",void 0),l([c()],Ls.prototype,"suggestionTemplate",void 0),Ls=BA=l([$("esri.widgets.Search.LayerSearchSource")],Ls);const Hh=Ls;function NAe(e){return!!e&&typeof e.x=="number"&&typeof e.y=="number"}function LAe(e){return e&&typeof e.xmin=="number"&&typeof e.ymin=="number"&&typeof e.xmax=="number"&&typeof e.ymax=="number"}let lu=class extends N{constructor(t){super(t),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};l([c({type:String,json:{write:!0}})],lu.prototype,"address",void 0),l([c({type:Object,json:{write:!0}})],lu.prototype,"attributes",void 0),l([c({type:qe,json:{write:!0}})],lu.prototype,"extent",void 0),l([c({type:ge,json:{write:!0}})],lu.prototype,"location",void 0),l([c({type:Number,json:{write:!0}})],lu.prototype,"score",void 0),lu=l([$("esri.rest.support.AddressCandidate")],lu);const JY=lu,CP={type:String,json:{read:{source:"token"},write:{target:"token"}}};let Lr=class extends N{constructor(t){super(t),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};l([c({type:Object,json:{write:!0}})],Lr.prototype,"address",void 0),l([c(CP)],Lr.prototype,"apiKey",void 0),l([c({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],Lr.prototype,"categories",void 0),l([c({type:String,json:{write:!0}})],Lr.prototype,"countryCode",void 0),l([c({type:Boolean,json:{write:!0}})],Lr.prototype,"forStorage",void 0),l([c({type:ge,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],Lr.prototype,"location",void 0),l([c({type:String,json:{write:!0}})],Lr.prototype,"locationType",void 0),l([c({type:String,json:{write:!0}})],Lr.prototype,"magicKey",void 0),l([c({type:Number,json:{write:!0}})],Lr.prototype,"maxLocations",void 0),l([c({type:[String],json:{write:{writer:(e,t)=>{t.outFields=e?e.join(","):null}}}})],Lr.prototype,"outFields",void 0),l([c({type:me,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Lr.prototype,"outSpatialReference",void 0),l([c({type:qe,json:{write:{writer:(e,t)=>{const r=e?e.shiftCentralMeridian():null;t.searchExtent=r}}}})],Lr.prototype,"searchExtent",void 0),Lr=l([$("esri.rest.support.AddressToLocationsParameters")],Lr),Lr.from=bt(Lr);const KY=Lr;async function FAe(e,t,r){t=KY.from(t);const i=Hv(e),{address:n,...s}=t.toJSON(),o={...n,...s,f:"json"},a=S$({...i.query,...o}),u=b$(a,r),d=`${i.path}/findAddressCandidates`;return Le(d,u).then(DAe)}function DAe({data:e}){if(!e)return[];const{candidates:t,spatialReference:r}=e;return t?t.map(i=>{if(!i)return;const{extent:n,location:s}=i,o=!n||LAe(n);return NAe(s)&&o?(n&&(n.spatialReference=r),s&&(s.spatialReference=r),JY.fromJSON(i)):void 0}):[]}let Fa=class extends N{constructor(t){super(t),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};l([c(CP)],Fa.prototype,"apiKey",void 0),l([c({type:ge,json:{write:{writer:(e,t)=>{const r=e?e.clone().normalize():null,i=r!==void 0;t.location=i?r:null}}}})],Fa.prototype,"location",void 0),l([c({type:String,json:{write:!0}})],Fa.prototype,"locationType",void 0),l([c({type:me,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Fa.prototype,"outSpatialReference",void 0),Fa=l([$("esri.rest.support.LocationToAddressParameters")],Fa),Fa.from=bt(Fa);const YY=Fa;async function jAe(e,t,r){t=YY.from(t);const i=Hv(e),n={...t.toJSON(),f:"json"},s=S$({...i.query,...n}),o=b$(s,r),a=`${i.path}/reverseGeocode`;return Le(a,o).then(VAe)}function VAe({data:e}){if(!e)return;const{address:t,location:r}=e,i=(t==null?void 0:t.Match_addr)||"";return JY.fromJSON({address:i,attributes:t||{},location:r,score:100})}let Wh=class extends N{constructor(t){super(t),this.isCollection=null,this.magicKey=null,this.text=null}};l([c({type:Boolean,json:{write:!0}})],Wh.prototype,"isCollection",void 0),l([c({type:String,json:{write:!0}})],Wh.prototype,"magicKey",void 0),l([c({type:String,json:{write:!0}})],Wh.prototype,"text",void 0),Wh=l([$("esri.rest.support.SuggestionCandidate")],Wh);const UAe=Wh;let an=class extends N{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};l([c(CP)],an.prototype,"apiKey",void 0),l([c({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],an.prototype,"categories",void 0),l([c({type:String,json:{write:!0}})],an.prototype,"countryCode",void 0),l([c({type:ge,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],an.prototype,"location",void 0),l([c({type:Number,json:{write:!0}})],an.prototype,"maxSuggestions",void 0),l([c({type:me,json:{read:{source:"outSR"},write:{target:"outSR"}}})],an.prototype,"outSpatialReference",void 0),l([c({type:qe,json:{write:{writer:(e,t)=>{const r=e?e.shiftCentralMeridian():null;t.searchExtent=JSON.stringify(r)}}}})],an.prototype,"searchExtent",void 0),l([c({type:String,json:{write:!0}})],an.prototype,"text",void 0),an=l([$("esri.rest.support.SuggestLocationsParameters")],an),an.from=bt(an);const QY=an;async function zAe(e,t,r){const i=Hv(e),n={...(t=QY.from(t)).toJSON(),f:"json"},s=S$({...i.query,...n}),o=b$(s,r),a=`${i.path}/suggest`;return Le(a,o).then(GAe)}function GAe(e){const{data:t}=e;if(!t)return[];const{suggestions:r}=t;return r?r.map(i=>new UAe(i)):[]}const BAe="Single Line Input",qAe=3e5;function HAe(e,t){return e.location?YAe(e,t):QAe(e,t)}function XY(e,t){var i;if(t.localSearchDisabled)return null;const r=e==null?void 0:e.scale;return typeof r=="number"&&r<=qAe?(i=e==null?void 0:e.extent)==null?void 0:i.center:null}async function WAe(e,t){const{source:r,spatialReference:i,view:n,suggestTerm:s,maxSuggestions:o,sourceIndex:a}=e,u=new QY,{apiKey:d,url:h}=r,f=eQ(r,n),m=t==null?void 0:t.signal;if(!h)return null;d&&(u.apiKey=d),r.categories&&(u.categories=r.categories),i&&(u.outSpatialReference=i);const y=XY(n,r);if(y&&(u.location=y),!s.trim())return null;const{prefix:g="",suffix:v=""}=r,_=`${g}${s}${v}`;return u.text=_,f&&(u.searchExtent=f),u.maxSuggestions=o,r.countryCode&&(u.countryCode=r.countryCode),zAe(h,u,{signal:m}).then(w=>eRe(w,a))}function ZAe(e){return!!e&&/(?:geocode-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e)}function JAe(e){return!!e&&/(?:\/servers\/[\da-z.-]+\/rest\/services\/world\/geocodeserver).*/i.test(e)}function S8(e){return!!e&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e)}const KAe="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";async function YAe(e,t){const{source:r,spatialReference:i,location:n,sourceIndex:s,view:o}=e,{apiKey:a,url:u,zoomScale:d,defaultZoomScale:h}=r;if(u==null)return[];const f=o==null?void 0:o.scale,m=t==null?void 0:t.signal,y=new YY({location:n});a&&(y.apiKey=a),i&&(y.outSpatialReference=i);try{return tQ([await jAe(u,y,{signal:m})],{sourceIndex:s,scale:f,view:o,zoomScale:d,defaultZoomScale:h})}catch{return[]}}function eQ(e,t){const{filter:r,withinViewEnabled:i}=e,n=t==null?void 0:t.scale,s=t==null?void 0:t.extent,o=r==null?void 0:r.geometry;return(o?EP(o,t??void 0,n):void 0)||(i&&s?s:void 0)}async function QAe(e,t){var O;const{source:r,suggestResult:i,spatialReference:n,view:s,maxResults:o,sourceIndex:a}=e,u=r==null?void 0:r.zoomScale,d=r==null?void 0:r.defaultZoomScale;if(!((O=i.text)==null?void 0:O.trim()))return null;const f=!i.key&&r.prefix?r.prefix:"",m=!i.key&&r.suffix?r.suffix:"",y=`${f}${i.text}${m}`,g=new KY,{apiKey:v,url:_}=r,w=s==null?void 0:s.scale,b=eQ(r,s),T=t==null?void 0:t.signal;if(v&&(g.apiKey=v),!_)return null;r.categories&&(g.categories=r.categories),r.locationType&&(g.locationType=r.locationType),n&&(g.outSpatialReference=n);const x=XY(s,r);x&&(g.location=x),g.maxLocations=o,b&&(g.searchExtent=b),r.countryCode&&(g.countryCode=r.countryCode);const{key:M}=i,I=`${M}`;return M&&(g.magicKey=I),g.address={},g.address[r.singleLineFieldName||BAe]=y,r.outFields&&(g.outFields=r.outFields),FAe(_,g,{signal:T}).then(P=>tQ(P,{key:I,scale:w,sourceIndex:a,view:s,zoomScale:u,defaultZoomScale:d}))}function XAe(e,t){return{text:e.text,key:e.magicKey,sourceIndex:t}}function eRe(e,t){return e.map(r=>XAe(r,t))}function tRe(e,t){const{key:r,scale:i,sourceIndex:n,view:s,zoomScale:o,defaultZoomScale:a}=t,{attributes:u,extent:d,location:h,address:f}=e,m=new Ti({geometry:h,attributes:u}),y=d||h,g=y?EP(y,s??void 0,i??void 0):void 0,v=g?typeof o=="number"?GA(g,s??void 0,o):typeof a=="number"&&(y==null?void 0:y.type)==="point"?GA(g,s??void 0,a):g:null,_=h?`${h.x},${h.y}`:"",w=f||_,b=m.clone();return v!=null&&(b.geometry=Zi.fromExtent(v)),{extent:v,feature:m,target:b,key:r,name:w,sourceIndex:n}}function tQ(e,t){return e.filter(Boolean).map(r=>tRe(r,t))}var qA;let ri=qA=class extends MP{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(t,r)=>HAe({source:this,...t},r),this.getSuggestions=(t,r)=>WAe({source:this,...t},r)}clone(){return new qA({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?C(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?C(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};l([c()],ri.prototype,"apiKey",void 0),l([c()],ri.prototype,"categories",void 0),l([c()],ri.prototype,"countryCode",void 0),l([c({json:{write:!0}})],ri.prototype,"defaultZoomScale",void 0),l([c()],ri.prototype,"localSearchDisabled",void 0),l([c()],ri.prototype,"locationType",void 0),l([c({json:{write:!0}})],ri.prototype,"name",void 0),l([c({json:{write:!0}})],ri.prototype,"placeholder",void 0),l([c()],ri.prototype,"searchTemplate",void 0),l([c({json:{write:!0}})],ri.prototype,"singleLineFieldName",void 0),l([c({json:{read:{source:"suggest"},write:{target:"suggest"}}})],ri.prototype,"suggestionsEnabled",void 0),l([c({json:{write:!0}})],ri.prototype,"url",void 0),l([c({json:{write:!0}})],ri.prototype,"zoomScale",void 0),ri=qA=l([$("esri.widgets.Search.LocatorSearchSource")],ri);const rQ=ri,iQ=()=>j.getLogger("esri.widgets.support.geolocationUtils"),rRe={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function iRe(){const e=!!L("esri-geolocation");return e||iQ().warn("geolocation-unsupported","Geolocation unsupported."),e}function nRe(){const e=window.isSecureContext;return e||iQ().warn("insecure-context","Geolocation requires a secure origin."),e}function HA(){return iRe()&&nRe()}function nQ(e){return e??(e=rRe),new Promise((r,i)=>{setTimeout(()=>i(new R("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(r,i,e??void 0)})}function sQ(e,t){const{position:r,view:i}=e,n=sRe(r),s=n==null?void 0:n.coords;if(!s)throw new R("geometry-service:no-coords","Geolocation has no coordinates");return aRe(oRe(s),i,t)}function sRe(e){const t=e&&e.coords||{},r={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed};return e&&{coords:r,timestamp:e.timestamp}}function oRe({longitude:e,latitude:t,altitude:r}){return new ge({longitude:e,latitude:t,z:r||void 0,spatialReference:{wkid:4326}})}function aRe(e,t,r){if(!t)return Promise.resolve(e);const i=t.spatialReference;return i.isWGS84?Promise.resolve(e):i.isWebMercator?Promise.resolve(il(e)):lRe(r).then(n=>{if(!n)throw new R("geometry-service:missing-url","Geometry service URL is missing");const s=new Hk({geometries:[e],outSpatialReference:i});return GJ(n,s,r).then(o=>o[0])})}function lRe(e){if(je.geometryServiceUrl)return Promise.resolve(je.geometryServiceUrl);const t=fr.getDefault();return t.load(e).catch(()=>{}).then(()=>{var r,i;return(i=(r=t.helperServices)==null?void 0:r.geometry)==null?void 0:i.url})}function Yr(e,t){return e.hasOwnProperty(t)&&e[t]!=null&&e[t]!==""}const uRe=()=>J2("esri/widgets/Search/t9n/Search"),$8="highlight",pb=Y.ofType({key:e=>e.layer?"layer":"locator",base:MP,typeMap:{layer:Hh,locator:rQ}}),T8=me.WGS84,cRe="esri/images/search/search-symbol-32.png",dRe=/<[\s\S]*?>/g,Zh=-1;let Ee=class extends E$(cs.EventedMixin(te)){constructor(e){super(e),this._gotoController=null,this._searching=null,this._updatingPromise=null,this._createdFeatureLayers=[],this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new pb,this.defaultSymbols={point:new km({url:Ve(cRe),size:24,width:24,height:24}),polyline:new Ki({color:[130,130,130,1],width:2}),polygon:new yc({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=fr.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new pb,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const e=async()=>{const t=await uRe();this.messages=t,this.defaultPopupTemplate=new hc({title:t.searchResult,content:"{Match_addr}"})};e(),this.addHandles([ce(()=>[this.includeDefaultSources,this.view,this.portal],()=>this._update(),zt),z2(e)])}destroy(){this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics()}get activeSource(){return this.allSources.at(this.activeSourceIndex)??null}get activeSourceIndex(){return this.allSources.length===1||!this.searchAllEnabled?0:Zh}set activeSourceIndex(e){this._overrideIfSome("activeSourceIndex",e)}get allPlaceholder(){var e;return(e=this.messages)==null?void 0:e.allPlaceholder}set allPlaceholder(e){this._overrideIfSome("allPlaceholder",e)}get allSources(){const{sources:e,defaultSources:t,includeDefaultSources:r}=this,i=typeof r=="function"?r.call(null,{sources:e,defaultSources:t}):r?t.concat(e):e,n=this._get("allSources")||new pb;return n.removeAll(),n.addMany(i.filter(Boolean)),n}get locationEnabled(){return this._get("locationEnabled")||HA()}set locationEnabled(e){if(e===void 0)return void this._clearOverride("locationEnabled");const t=HA();if(e&&!t){const r=new R("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});j.getLogger(this).error(r)}this._override("locationEnabled",!!e&&t)}get placeholder(){const{allSources:e,activeSourceIndex:t,allPlaceholder:r}=this;if(t===Zh)return r??"";const i=e.at(t);return(i==null?void 0:i.placeholder)??""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),e===""&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":this.allSources.length===0?"disabled":"ready"}get updating(){return this._updatingPromise!=null}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup();const{view:e,resultGraphic:t}=this;e&&t&&e.graphics.remove(t),this._set("resultGraphic",null)}search(e,t){this.emit("search-start"),this.clearGraphics();const r=this._createSuggestionForSearch(e),i=(async()=>{var n;try{await this.when();const s=await this._getResultsFromSources(r,t);if((n=t==null?void 0:t.signal)!=null&&n.aborted)return null;const o={activeSourceIndex:this.activeSourceIndex,searchTerm:r.text??"",numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(o,s,r);const a=this._getFirstResult(o.results),u=r.location&&a?a.name:r.text,d=u==null?void 0:u.replace(dRe,"");return this._set("searchTerm",d),(r.key&&typeof r.sourceIndex=="number"||r.location)&&this._set("selectedSuggestion",r),this._set("results",o.results),this._set("resultCount",o.results.reduce((h,f)=>{var m;return h+(((m=f.results)==null?void 0:m.length)??0)},0)),this.emit("search-complete",o),await this._selectFirstResult(a),o}finally{this._clearSearching()}})();return this._searching=i,i}async searchNearby(e){if(!this.locationEnabled){const r=new R("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});throw j.getLogger(this).error(r),r}const t=(async()=>{try{const r=await nQ(),i=await sQ({position:r,view:this.view},e);return await this.search(i,e)}finally{this._clearSearching()}})();return this._searching=t,t}async select(e){if(this.clearGraphics(),!e){const z=new R("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});throw j.getLogger(this).error(z),z}const{view:t}=this,r=Yr(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),i=r!=null?this.allSources.at(r):null;if(!i){const z=new R("select:missing-source","Cannot select without a source.",{source:i});throw j.getLogger(this).error(z),z}const n=i instanceof Hh?this._getLayerSourcePopupTemplate(i):i.popupTemplate,s=i.resultSymbol||this._getDefaultSymbol(e),o=Yr(i,"resultGraphicEnabled")?i.resultGraphicEnabled:this.resultGraphicEnabled,a=Yr(i,"autoNavigate")?i.autoNavigate:this.autoNavigate,u=Yr(i,"popupEnabled")?i.popupEnabled:this.popupEnabled,d=u?n||this.popupTemplate||this.defaultPopupTemplate:null,{feature:h}=e;if(!h){const z=new R("select:missing-feature","Cannot select without a feature.",{feature:h});throw j.getLogger(this).error(z),z}const{attributes:f,geometry:m,layer:y,sourceLayer:g}=h,v=m?b8(m):null,_={layerViewQuery:this._getLayerView(h),elevationQuery:t&&v!=null?mAe(v,t):Promise.resolve(v)},w=await Od(_),b=w.layerViewQuery.value,T=w.elevationQuery.value;s instanceof Mp&&(s.text=e.name);const x=t&&a?e.target||e.extent:null;await(x!=null?this._goToSearchResult(x):Promise.resolve());const I=b?h:new Ti({geometry:m,symbol:s,attributes:f,layer:y,sourceLayer:g,popupTemplate:d}),O=t==null?void 0:t.popup,P=O&&u&&I.getEffectivePopupTemplate(O.defaultPopupTemplateEnabled);return P&&await t.openPopup({features:[I],location:T}),b&&yAe(b)&&!P&&this._highlightFeature({graphic:I,layerView:b}),!b&&o&&t&&t.graphics.push(I),this._setResultFloor(e),this._set("selectedResult",e),this._set("resultGraphic",I),this.emit("select-result",{result:e,source:i,sourceIndex:r}),e}async suggest(e,t,r){const i=e||this.searchTerm;this.emit("suggest-start",{searchTerm:i}),await this._suggestTimer(t,r);const n=await this._suggestImmediate(i,r);return this._set("suggestions",n==null?void 0:n.results),this._set("suggestionCount",(n==null?void 0:n.results.reduce((s,o)=>{var a;return s+(((a=o.results)==null?void 0:a.length)??0)},0))??null),this.emit("suggest-complete",n),n}async when(){await up(()=>!this.updating)}async _update(){const{portal:e,view:t}=this;if(this.includeDefaultSources){const r=this._updatingPromise=Od([e==null?void 0:e.load(),t==null?void 0:t.when()]);if(this.destroyed||(await r,r!==this._updatingPromise))return}await up(()=>this.messages),this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){var t,r;const e=(r=(t=this.portal)==null?void 0:t.helperServices)==null?void 0:r.geocode;return e?e.map(i=>{var a;if(i.placefinding===!1)return;const n=je.apiKey&&S8(i.url)?{url:KAe}:null,s=rQ.fromJSON({...i,...n}),o=s.url;if(S8(o)||JAe(o)||ZAe(o)){const u=s.outFields??["Addr_type","Match_addr","StAddr","City"],d=(s.placeholder||((a=this.messages)==null?void 0:a.placeholder))??"",h=typeof s.defaultZoomScale=="number"?s.defaultZoomScale:2500;s.singleLineFieldName="SingleLine",s.outFields=u,s.placeholder=d,s.defaultZoomScale=h}return s.singleLineFieldName?s:void 0}).filter(Js):[]}_destroyFeatureLayers(){this._createdFeatureLayers.forEach(e=>e==null?void 0:e.destroy()),this._createdFeatureLayers=[]}_getLayerSources(e,t){var i;const r=(i=this.view)==null?void 0:i.map;return e.map(n=>{const s=r.findLayerById(n.id);if(!s)return;const o=this._getLayerJSON(n),a=Hh.fromJSON(o);return a.placeholder=t,this._getLayer(s,o).then(u=>{a.layer=u}),a}).filter(Js).toArray()}_getTableSources(e,t){var i;const r=(i=this.view)==null?void 0:i.map;return e.map(n=>{if(!n.id)return;const s=r.findTableById(n.id);if(!s)return;const o=this._getLayerJSON(n),a=Hh.fromJSON(o);return a.placeholder=t,this._getLayer(s,o).then(u=>{a.layer=u}),a}).filter(Js).toArray()}_convertApplicationProperties(){var o,a,u;const e=(o=this.view)==null?void 0:o.map,t=(u=(a=e==null?void 0:e.applicationProperties)==null?void 0:a.viewing)==null?void 0:u.search;if(!t)return[];const{enabled:r,hintText:i,layers:n,tables:s}=t;return r?[...this._getLayerSources(n,i),...this._getTableSources(s,i)]:[]}async _getSubLayer(e,t){var n;if(await e.load(),!e.allSublayers)throw new Error;const r=e.allSublayers.find(s=>s.id===t.subLayer);if(!r)throw new Error;const i=await((n=r.createFeatureLayer)==null?void 0:n.call(r));if(!i)throw new Error;return this._createdFeatureLayers.push(i),i}async _getBuildingSubLayer(e,t){await e.load();const r=e.allSublayers.find(i=>i.id===t.subLayer);if((r==null?void 0:r.type)!=="building-component")throw new Error;if(await r.load(),r.associatedLayer==null)throw new Error;return await r.associatedLayer.load(),r}async _getLayer(e,t){if(e.type==="feature"||e.type==="scene"||e.type==="csv"||e.type==="geojson"||e.type==="ogc-feature")return e;if(e.type==="map-image")try{return await this._getSubLayer(e,t)}catch{const i=new R("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return j.getLogger(this).error(i),null}return e.type==="building-scene"?this._getBuildingSubLayer(e,t):null}_getLayerJSON(e){return typeof e.toJSON=="function"?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:t}=this;this._destroyFeatureLayers(),e.removeAll(),t&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var n;const e=(n=this.view)==null?void 0:n.popup,{resultGraphic:t}=this;if(!e||!t)return;const r="selectedFeature"in e,i=r?e.selectedFeature:null;r&&i&&i===t&&e.close()}_suggestTimer(e,t){const r=e??this.suggestionDelay;return oO(r,null,t==null?void 0:t.signal)}_createLocationForSearch(e){return e instanceof Ti&&e.geometry?b8(e.geometry):e instanceof ge?e:Array.isArray(e)&&e.length===2?new ge({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&Yr(e,"key")&&Yr(e,"text")&&Yr(e,"sourceIndex"))return e;const t=this._createLocationForSearch(e),r=typeof e=="string"?e:this.searchTerm,{selectedSuggestion:i,selectedResult:n}=this,s=!e&&i&&n,o=s&&i.key===n.key&&i.sourceIndex===n.sourceIndex,a=s&&i.location;return o||a?i:{location:t,text:t?"":r,sourceIndex:null,key:null}}_getFirstResult(e){return j0(e,({results:t})=>t==null?void 0:t[0])??null}async _selectFirstResult(e){return this.autoSelect&&e?this.select(e):null}async _suggestImmediate(e,t){var n;await this.when();const r=await this._getSuggestionsFromSources(e,t);if((n=t==null?void 0:t.signal)!=null&&n.aborted)return null;const i={activeSourceIndex:this.activeSourceIndex,searchTerm:e??"",numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(i,r),i}_formatSourceResponse(e,t,r){const i=(t==null?void 0:t.value)||[],n=t==null?void 0:t.error,s=this.allSources.at(r);if(n){const o={sourceIndex:r,source:s,error:n};e.errors.push(o),j.getLogger(this).error(n),e.numErrors++}else{const o={sourceIndex:r,source:s,results:i};e.results.push(o),e.numResults+=i.length}}_formatResponse(e,t,r){if(t)if(e.activeSourceIndex===Zh){const i=r&&Yr(r,"sourceIndex")&&r.sourceIndex!==-1?r.sourceIndex:void 0;t.forEach((n,s)=>{const o=i!==void 0?i:s;this._formatSourceResponse(e,n,o)})}else this._formatSourceResponse(e,t[0],e.activeSourceIndex)}async _getResultsFromSources(e,t){const{allSources:r}=this,i=!e.location&&Yr(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,n=[];if(!r.length){const s=new R("search:no-sources-defined","At least one source is required.",{allSources:r});throw j.getLogger(this).error(s),s}return i===Zh?r.forEach((s,o)=>{n.push(this._getResultsFromSource(e,o,t))}):n.push(this._getResultsFromSource(e,i,t)),Od(n)}async _getSuggestionsFromSources(e,t){const{allSources:r,activeSourceIndex:i}=this,n=[];if(!r.length){const s=new R("suggest:no-sources-defined","At least one source is required.",{allSources:r});throw j.getLogger(this).error(s),s}return i===Zh?r.forEach((s,o)=>{n.push(this._getSuggestionsFromSource(e,o,t))}):n.push(this._getSuggestionsFromSource(e,i,t)),Od(n)}async _getResultsFromSource(e,t,r){var d,h;const i=t!=null?this.allSources.at(t):null;if(!i)return null;const{location:n=null}=e,s=((d=this.view)==null?void 0:d.spatialReference)||T8,o=Yr(i,"maxResults")?i.maxResults:this.maxResults,a=!!(i instanceof Hh&&Yr(i,"exactMatch"))&&i.exactMatch,{view:u}=this;return(h=i.getResults)==null?void 0:h.call(i,{view:u,sourceIndex:t,location:n,suggestResult:e,spatialReference:s,exactMatch:a,maxResults:o},r)}async _getSuggestionsFromSource(e,t,r){var a,u;const i=this.allSources.at(t);if(!i)return null;e??(e="");const n=Yr(i,"suggestionsEnabled")?i.suggestionsEnabled:this.suggestionsEnabled,s=e==null?void 0:e.length,o=Yr(i,"minSuggestCharacters")?i.minSuggestCharacters:this.minSuggestCharacters;if(n&&e.trim()&&s>=o){const d=((a=this.view)==null?void 0:a.spatialReference)||T8,h=Yr(i,"maxSuggestions")?i.maxSuggestions:this.maxSuggestions,{view:f}=this,m=!!(i instanceof Hh&&Yr(i,"exactMatch"))&&i.exactMatch;return(u=i.getSuggestions)==null?void 0:u.call(i,{view:f,sourceIndex:t,suggestTerm:e,spatialReference:d,maxSuggestions:h,exactMatch:m},r)}return null}_getLayerSourcePopupTemplate(e){const{layer:t}=e;if(t)return Yr(e,"popupTemplate")?e.popupTemplate:t.popupTemplate}_getSourceIndexOfResult(e){return j0(this.results??[],({results:t,sourceIndex:r})=>(t==null?void 0:t.includes(e))?r:null)??null}async _goToSearchResult(e){this._abortGoTo();const t=new AbortController;this._gotoController=t;const r={target:{target:e},options:{signal:t.signal}};e||(r.options.animate=!1),await this.callGoTo(r),this._gotoController=null}_getDefaultSymbol(e){var i;const{defaultSymbols:t}=this,r=(i=e.feature)==null?void 0:i.geometry;if(r==null)return null;switch(r.type){case"point":case"multipoint":return t.point;case"polyline":return t.polyline;case"extent":case"polygon":return t.polygon;default:return null}}_removeHighlight(){this.removeHandles($8)}async _getLayerView(e){var i,n;const{view:t}=this;if(!e||!t||((i=e.layer)==null?void 0:i.type)==="building-component"||((n=e.layer)==null?void 0:n.type)==="subtype-sublayer")return null;const{layer:r}=e;return r?(await t.when(),t.whenLayerView(r)):null}_highlightFeature(e){const{graphic:t,layerView:r}=e,{attributes:i,layer:n}=t,{objectIdField:s}=n,o=(s&&(i==null?void 0:i[s]))??null,a=r.highlight(o??t);this.addHandles(a,$8)}_setResultFloor(e){var n,s,o;const{view:t}=this,r=(n=e.feature)==null?void 0:n.attributes,i=(s=e.feature)==null?void 0:s.sourceLayer;if(i&&"floorInfo"in i&&((o=i==null?void 0:i.floorInfo)!=null&&o.floorField)&&r){const a=r[i.floorInfo.floorField];t==null||t.emit("select-result-floor",a)}}};Ee.ALL_INDEX=Zh,l([c()],Ee.prototype,"_searching",void 0),l([c()],Ee.prototype,"_updatingPromise",void 0),l([c({readOnly:!0,value:null})],Ee.prototype,"activeSource",null),l([c()],Ee.prototype,"activeSourceIndex",null),l([c()],Ee.prototype,"allPlaceholder",null),l([c({readOnly:!0})],Ee.prototype,"allSources",null),l([c()],Ee.prototype,"autoNavigate",void 0),l([c()],Ee.prototype,"autoSelect",void 0),l([c()],Ee.prototype,"defaultPopupTemplate",void 0),l([c({readOnly:!0})],Ee.prototype,"defaultSources",void 0),l([c()],Ee.prototype,"defaultSymbols",void 0),l([c()],Ee.prototype,"includeDefaultSources",void 0),l([c()],Ee.prototype,"locationEnabled",null),l([c()],Ee.prototype,"maxInputLength",void 0),l([c()],Ee.prototype,"maxResults",void 0),l([c()],Ee.prototype,"maxSuggestions",void 0),l([c()],Ee.prototype,"messages",void 0),l([c()],Ee.prototype,"minSuggestCharacters",void 0),l([c({readOnly:!0})],Ee.prototype,"placeholder",null),l([c()],Ee.prototype,"popupEnabled",void 0),l([c({type:hc})],Ee.prototype,"popupTemplate",void 0),l([c({type:fr})],Ee.prototype,"portal",void 0),l([c()],Ee.prototype,"resultCount",void 0),l([c()],Ee.prototype,"resultGraphicEnabled",void 0),l([c({readOnly:!0})],Ee.prototype,"resultGraphic",void 0),l([c({readOnly:!0})],Ee.prototype,"results",void 0),l([c({readOnly:!0})],Ee.prototype,"selectedSuggestion",void 0),l([c()],Ee.prototype,"searchAllEnabled",void 0),l([c({readOnly:!0})],Ee.prototype,"selectedResult",void 0),l([c()],Ee.prototype,"searchTerm",null),l([c({type:pb})],Ee.prototype,"sources",void 0),l([c({readOnly:!0})],Ee.prototype,"state",null),l([c()],Ee.prototype,"suggestionDelay",void 0),l([c()],Ee.prototype,"suggestionCount",void 0),l([c({readOnly:!0})],Ee.prototype,"suggestions",void 0),l([c()],Ee.prototype,"suggestionsEnabled",void 0),l([c({readOnly:!0})],Ee.prototype,"updating",null),l([c()],Ee.prototype,"view",void 0),l([c()],Ee.prototype,"clear",null),Ee=l([$("esri.widgets.Search.SearchViewModel")],Ee);const gf=Ee;let uu=class extends ta{constructor(t,r){super(t,r),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}destroy(){this.viewModel=null}render(){const t={[Cc.showMoreResults]:this.showMoreResultsOpen};return H("div",{class:this.classes(Cc.base,Te.widget)},H("div",{class:this.classes(Cc.moreResults,t),key:"esri-search-renderer__container"},this._renderSearchResultName(),this._renderMoreResults()))}_renderMoreResults(){return H("div",{key:"esri-search-renderer__more-results"},this._renderMoreResultsButton(),this._renderMoreResultsLists())}_renderSearchResultName(){var i;const t=(i=this.viewModel)==null?void 0:i.selectedResult,r=(t==null?void 0:t.name)||"";return H("div",{class:Cc.moreResultsItem,key:"esri-search-renderer__result-name"},r)}_renderMoreResultsLists(){const{viewModel:t}=this;if(!t)return[];const r=t.results;if((t.resultCount??0)<2)return null;const i=r==null?void 0:r.map(n=>this._renderMoreResultsList(n));return H("div",{class:Cc.moreResultsList,key:"esri-search-renderer__more-results-container"},i)}_renderMoreResultsButton(){const{messages:t,viewModel:r}=this;return r?(r.resultCount??0)<2?null:H("div",{class:Cc.moreResultsItem,key:"esri-search-renderer__more-results-button"},H("a",{bind:this,class:Te.anchor,href:"#",onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?t.hideMoreResults:t.showMoreResults)):null}_renderMoreResultsHeader(t,r){return H("div",{class:Cc.moreResultsListHeader,key:`esri-search-result-renderer__header-${r}`},t)}_renderMoreResultsList(t){var f,m,y;const{results:r}=t,i=(r==null?void 0:r.length)??0,n=i>0,s=(f=this.viewModel)==null?void 0:f.selectedResult,o=i===1&&r[0]===s,a=this._getSourceName(t.source,t.sourceIndex),u=(((y=(m=this.viewModel)==null?void 0:m.results)==null?void 0:y.length)??0)>1&&!o?this._renderMoreResultsHeader(a,t.sourceIndex):null,d=n&&r.map((g,v)=>this._renderMoreResultsListItem(g,v)),h=n&&!o?H("ul",{key:`esri-search-result-renderer__list-${t.sourceIndex}`},d):null;return n?H("div",{key:`esri-search-result-renderer__results-${t.sourceIndex}`},u,h):null}_renderMoreResultsListItem(t,r){var n;const i=(n=this.viewModel)==null?void 0:n.selectedResult;return t!==i?H("li",{key:`esri-search-result-renderer__list-item-${r}`},H("a",{bind:this,class:Te.anchor,"data-result":t,href:"#",onclick:this._selectResultClick,onkeydown:this._selectResultClick,tabIndex:0},t.name)):null}_showMoreResultsClick(t){var i,n;t.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const r=(n=(i=this.viewModel)==null?void 0:i.view)==null?void 0:n.popup;r&&"reposition"in r&&r.reposition()}_selectResultClick(t){var i;t.preventDefault();const r=t.currentTarget["data-result"];(i=this.viewModel)==null||i.select(r)}_getSourceName(t,r){return r===gf.ALL_INDEX?this.messages.all:t.name}};l([c(),Ji("esri/widgets/Search/t9n/Search")],uu.prototype,"messages",void 0),l([c()],uu.prototype,"showMoreResultsOpen",void 0),l([c()],uu.prototype,"viewModel",void 0),l([nC()],uu.prototype,"_showMoreResultsClick",null),l([nC()],uu.prototype,"_selectResultClick",null),uu=l([$("esri.widgets.Search.SearchResultRenderer")],uu);const pRe=uu,Gn={close:"esri-icon-close",collapse:"esri-icon-collapse",down:"esri-icon-down",downArrow:"esri-icon-down-arrow",dragHorizontal:"esri-icon-drag-horizontal",dragVertical:"esri-icon-drag-vertical",duplicate:"esri-icon-duplicate",expand:"esri-icon-expand",fontFallbackText:"esri-icon-font-fallback-text",forward:"esri-icon-forward",handleVertical:"esri-icon-handle-vertical",icon:"esri-icon",left:"esri-icon-left",locateCircled:"esri-icon-locate-circled",noticeTriangle:"esri-icon-notice-triangle",pause:"esri-icon-pause",play:"esri-icon-play",plus:"esri-icon-plus",radioChecked:"esri-icon-radio-checked",radioUnchecked:"esri-icon-radio-unchecked",refresh:"esri-icon-refresh",reverse:"esri-icon-reverse",right:"esri-icon-right",search:"esri-icon-search",swap:"esri-icon-swap",table:"esri-icon-table",trash:"esri-icon-trash",up:"esri-icon-up",upArrow:"esri-icon-up-arrow",upDownArrows:"esri-icon-up-down-arrows",urbanModel:"esri-icon-urban-model",zoomInMagnifyingGlass:"esri-icon-zoom-in-magnifying-glass",zoomToObject:"esri-icon-zoom-to-object"},hRe=/<[a-z/][\s\S]*>/i,fRe=(e,t)=>{const r=ine(t).split(/\s/),i=new RegExp(`(${r.join("|")})`,"gi");return e.replace(i,n=>`<strong>${n}</strong>`)};let Ce=class extends ta{constructor(e,t){super(e,t),this._activeMenuItemIndex=-1,this._inputNode=null,this._focusAbortController=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new pRe,this._suggestController=null,this._searchController=null,this._locateFailed=!1,this._container=null,this.activeMenu="none",this.disabled=!1,this.messages=null,this.messagesCommon=null,this.viewModel=new gf,this._clearActiveMenu=()=>{this.activeMenu="none"},this._removeActiveMenu=r=>{var n;const i=r.relatedTarget;i&&((n=this._container)!=null&&n.contains(i))||this._clearActiveMenu()},this._renderSearchResultsContent=()=>this._searchResultRenderer,this.addHandles([ce(()=>this.searchTerm,r=>{var i,n;(r&&this.activeMenu==="warning"||!r&&!((n=(i=this.viewModel)==null?void 0:i.selectedSuggestion)!=null&&n.location))&&this._clearActiveMenu()}),pl(()=>{var r;return(r=this.viewModel)==null?void 0:r.allSources},"change",()=>this._watchSourceChanges()),ce(()=>this.activeMenu,()=>this._resetActiveMenuItemIndex(),zt),ce(()=>this.viewModel,r=>this._searchResultRenderer.viewModel=r,zt),ce(()=>this.viewModel.results,()=>this._searchResultRenderer.showMoreResultsOpen=!1),ce(()=>{var r;return(r=this.viewModel)==null?void 0:r.defaultPopupTemplate},r=>{r&&(r.content=this._renderSearchResultsContent)},zt)])}destroy(){var e;this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer=st(this._searchResultRenderer),(e=this._focusAbortController)==null||e.abort()}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}get activeSource(){var e;return(e=this.viewModel)==null?void 0:e.activeSource}get activeSourceIndex(){return this.viewModel.activeSourceIndex}set activeSourceIndex(e){this.viewModel.activeSourceIndex=e}get allPlaceholder(){return this.viewModel.allPlaceholder}set allPlaceholder(e){this.viewModel.allPlaceholder=e}get allSources(){return this.viewModel.allSources}get autoNavigate(){return this.viewModel.autoNavigate}set autoNavigate(e){this.viewModel.autoNavigate=e}get autoSelect(){return this.viewModel.autoSelect}set autoSelect(e){this.viewModel.autoSelect=e}get defaultSources(){return this.viewModel.defaultSources}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return"search"}set icon(e){this._overrideIfSome("icon",e)}get includeDefaultSources(){return this.viewModel.includeDefaultSources}set includeDefaultSources(e){this.viewModel.includeDefaultSources=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get locationEnabled(){return this.viewModel.locationEnabled}set locationEnabled(e){this.viewModel.locationEnabled=e}get maxResults(){return this.viewModel.maxResults}set maxResults(e){this.viewModel.maxResults=e}get maxSuggestions(){return this.viewModel.maxSuggestions}set maxSuggestions(e){this.viewModel.maxSuggestions=e}get minSuggestCharacters(){return this.viewModel.minSuggestCharacters}set minSuggestCharacters(e){this.viewModel.minSuggestCharacters=e}get popupEnabled(){return this.viewModel.popupEnabled}set popupEnabled(e){this.viewModel.popupEnabled=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get portal(){var e;return(e=this.viewModel)==null?void 0:e.portal}set portal(e){this.viewModel&&(this.viewModel.portal=e)}get resultGraphic(){return this.viewModel.resultGraphic}set resultGraphic(e){this.viewModel.resultGraphic=e}get resultGraphicEnabled(){return this.viewModel.resultGraphicEnabled}set resultGraphicEnabled(e){this.viewModel.resultGraphicEnabled=e}get results(){return this.viewModel.results}get searchAllEnabled(){return this.viewModel.searchAllEnabled}set searchAllEnabled(e){this.viewModel.searchAllEnabled=e}get searchTerm(){return this.viewModel.searchTerm}set searchTerm(e){this.viewModel.searchTerm=e}get selectedResult(){return this.viewModel.selectedResult}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get suggestions(){return this.viewModel.suggestions}get suggestionsEnabled(){return this.viewModel.suggestionsEnabled}set suggestionsEnabled(e){this.viewModel.suggestionsEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}clear(){this.viewModel.clear()}focus(){this._handleFocus(),this.emit("search-focus")}async _handleFocus(){var t,r;(t=this._focusAbortController)==null||t.abort(),this._focusAbortController=new AbortController;const e=this._focusAbortController.signal;await iS(Dz(e)),(r=this._inputNode)==null||r.focus()}blur(){var e;(e=this._inputNode)==null||e.blur(),this.emit("search-blur")}async search(e){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const t=new AbortController,{signal:r}=t;this._searchController=t;try{const i=await this.viewModel.search(e,{signal:r});return this._searchController!==t?void 0:(this.activeMenu=i!=null&&i.numResults?"none":"warning",this._searchController=null,i)}catch{return this._searchController!==t?void 0:(this._clearActiveMenu(),void(this._searchController=null))}}async suggest(e){this._cancelSuggest();const t=new AbortController,{signal:r}=t;this._suggestController=t;try{const i=await this.viewModel.suggest(e,null,{signal:r});return this._suggestController!==t?void 0:(this._suggestController=null,i!=null&&i.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),i)}catch{return this._suggestController!==t||(this._suggestController=null),null}}render(){const{state:e}=this.viewModel,t={[Te.disabled]:e==="disabled",[Te.widgetDisabled]:this.disabled};return H("div",{class:this.classes(Xe.base,Te.widget,t)},e==="loading"?this._renderLoader():this._renderContainer())}_renderSubmitButton(){const{messages:e,disabled:t}=this;return H("button",{"aria-label":e.searchButtonTitle,bind:this,class:this.classes(Xe.submitButton,Te.widgetButton),disabled:t,key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle,type:"button"},H("span",{"aria-hidden":"true",class:Gn.search}))}_renderWarningMenu(){return H("div",{class:this.classes(Te.menu,Xe.warningMenu),key:"esri-search__error-menu"},H("div",{class:Xe.warningMenuBody},this._renderWarning()))}_renderSourceMenuButton(){const{messages:e,activeMenu:t,sourceMenuId:r,sourceMenuButtonId:i,disabled:n}=this,{activeSourceIndex:s,allSources:o}=this.viewModel;return o.length>1?H("button",{afterCreate:V1,"aria-controls":r,"aria-expanded":(t==="source").toString(),"aria-haspopup":"true","aria-label":e.searchIn,bind:this,class:this.classes(Xe.sourcesButton,Te.widgetButton),"data-node-ref":"_sourceMenuButtonNode",disabled:n,id:i,key:"esri-search__source-menu-button",onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,title:e.searchIn,type:"button"},H("span",{"aria-hidden":"true",class:this.classes(Gn.downArrow,Xe.sourcesButtonDown)}),H("span",{"aria-hidden":"true",class:this.classes(Gn.upArrow,Xe.sourcesButtonUp)}),H("span",{class:Xe.sourceName},this._getSourceName(s))):null}_renderSourcesList(){const{allSources:e,searchAllEnabled:t}=this.viewModel,{_activeMenuItemIndex:r,activeMenu:i,sourceMenuId:n,sourceMenuButtonId:s}=this,o=i==="source"&&r>-1?this._buildId("source-item",r):null;return e.length>1?H("ul",{afterCreate:V1,"aria-activedescendant":o,"aria-labelledby":s,bind:this,class:Te.menuList,"data-node-ref":"_sourceListNode",id:n,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,role:"menu",tabIndex:-1},t?this._renderSource(gf.ALL_INDEX):null,e.map((a,u)=>this._renderSource(u)).toArray()):null}_renderSourcesMenu(){const{allSources:e}=this.viewModel;return e.length>1?H("div",{class:this.classes(Te.menu,Xe.sourcesMenu),key:"esri-search__source-menu"},this._renderSourcesList()):null}_renderLoader(){const{messages:e,messagesCommon:t,disabled:r}=this;return H("div",{class:Te.loader,key:"base-loader",tabIndex:r?-1:void 0},H("span",{"aria-hidden":"true",class:Te.loaderAnimation}),H("span",{class:Gn.fontFallbackText},e.searchButtonTitle),H("span",{class:Te.loaderText},t.loading))}_renderContainer(){const{allSources:e,state:t}=this.viewModel,{activeMenu:r}=this,i={[Xe.hasMultipleSources]:e.length>1,[Xe.isLoading]:t==="loading",[Xe.isSearching]:t==="searching",[Xe.showWarning]:r==="warning",[Xe.showSources]:r==="source",[Xe.showSuggestions]:r==="suggestion"};return H("div",{afterCreate:n=>{this._container=n,n.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:n=>{n.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes(i,Xe.container),key:"base-container",tabIndex:-1},this._renderSourceMenuButton(),this._renderSourcesMenu(),this._renderInputContainer(),this._renderSubmitButton(),this._renderWarningMenu())}_renderClearButton(){return this.searchTerm?H("button",{bind:this,class:this.classes(Xe.clearButton,Te.widgetButton),disabled:this.disabled,key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},H("span",{"aria-hidden":"true",class:Gn.close})):null}_renderLocationGroup(){const{messages:e,locationEnabled:t,displayedSearchTerm:r}=this,i=t&&!r,n=this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0;return i?H("ul",{class:this.classes(Te.menuList,Xe.suggestionList,Xe.suggestionListCurrentLocation),key:"esri-search__suggestion-list-current-location",role:"group"},H("li",{"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0).toString(),bind:this,class:this.classes(Te.menuItem,n?Te.menuItemFocus:null),"data-current-location-item":!0,id:this._buildId("suggestion-item",0),onclick:this._handleUseCurrentLocationClick,role:"option"},H("span",{"aria-hidden":"true",class:Gn.locateCircled})," ",e.useCurrentLocation)):null}_renderInput(){const{activeMenu:e,locationEnabled:t,displayedSearchTerm:r,messages:i,suggestionsMenuId:n,inputId:s,_activeMenuItemIndex:o,disabled:a}=this,{maxInputLength:u,placeholder:d,searchTerm:h,suggestionCount:f}=this.viewModel,m=!(!(t&&!r)&&!f),y=e==="suggestion"&&o>-1?this._buildId("suggestion-item",o):null;return H("input",{afterCreate:V1,"aria-activedescendant":y,"aria-autocomplete":"list","aria-controls":m?n:null,"aria-expanded":(m&&e==="suggestion").toString(),"aria-haspopup":"listbox","aria-label":i.searchButtonTitle,autocomplete:"off",bind:this,class:this.classes(Te.input,Xe.input),"data-node-ref":"_inputNode",disabled:a,id:s,maxlength:u,onblur:this.blur,onclick:this._openSuggestionMenu,onfocus:this.focus,oninput:this._handleInputPaste,onkeyup:this._handleInputKeyup,onpaste:this._handleInputPaste,placeholder:d,role:"combobox",title:h?"":d,type:"text",value:h})}_renderForm(){return H("form",{bind:this,class:Xe.form,disabled:this.disabled,key:"esri-search__form",onsubmit:this._formSubmit,role:"search"},this._renderInput())}_renderSuggestList(e){const{sourceIndex:t}=e,{results:r}=e;return(r==null?void 0:r.length)?H("ul",{class:this.classes(Te.menuList,Xe.suggestionList),key:`esri-search__suggestion-list-${t}`,role:"group"},r==null?void 0:r.map(n=>this._renderSuggestion(n,this._menuItemCount++))):null}_renderSuggestionsGroup(){const{suggestions:e}=this.viewModel;return e?e.map(t=>[this._renderSuggestionHeader(t),this._renderSuggestList(t)]):[]}_renderSuggestionsMenu(){const{displayedSearchTerm:e,locationEnabled:t,suggestionsMenuId:r,inputId:i}=this,{suggestionCount:n}=this.viewModel,s=t&&!e||n;return this._menuItemCount=0,s?H("div",{afterCreate:V1,"aria-labelledby":i,bind:this,class:this.classes(Te.menu,Xe.suggestionsMenu),"data-node-ref":"_suggestionListNode",id:r,key:"esri-search__suggestions-menu",role:"listbox"},this._renderLocationGroup(),this._renderSuggestionsGroup()):null}_renderInputContainer(){return H("div",{class:Xe.inputContainer,key:"esri-search__input-container"},this._renderForm(),this._renderSuggestionsMenu(),this._renderClearButton())}_renderSuggestionHeader(e){var o;const{allSources:t,activeSourceIndex:r}=this.viewModel,{sourceIndex:i}=e,n=(o=e.results)==null?void 0:o.length,s=t.length>1&&r===gf.ALL_INDEX;return n&&s?H("div",{class:Te.menuHeader,key:`esri-search__suggestion-header-${i}`},this._getSourceName(i)):null}_renderSuggestion(e,t){const{_activeMenuItemIndex:r,viewModel:{searchTerm:i}}=this;if(!i)return;const n=this.activeMenu==="suggestion"&&r===t;return H("li",{"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===t).toString(),bind:this,class:this.classes(Te.menuItem,n?Te.menuItemFocus:null),"data-suggestion":e,id:this._buildId("suggestion-item",t),innerHTML:this._getSuggestResultHTML(e.text,i),key:`esri-search__suggestion_${t}`,onclick:this._handleSuggestionClick,role:"option"})}_renderSource(e){const{activeSourceIndex:t,searchAllEnabled:r}=this.viewModel,i={[Te.menuItemActive]:e===t,[Te.menuItemFocus]:this.activeMenu==="source"&&e===(r?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},n=r?e+1:e;return H("li",{"aria-checked":(e===t).toString(),bind:this,class:this.classes(Xe.source,Te.menuItem,i),"data-source-index":e,id:this._buildId("source-item",n),key:`esri-search__source-${e}`,onclick:this._handleSourceClick,role:"menuitemradio"},this._getSourceName(e))}_renderNoResultsWarning(e){const{messages:t}=this,r=e?kB(t.noResultsFoundForValue,{value:`"${e}"`}):t.noResultsFound;return H("div",{key:"esri-search__no_results"},H("div",{class:Xe.warningMenuHeader},t.noResults),H("div",{class:Xe.warningMenuText},r))}_renderEmptySearchWarning(){const{messages:e}=this;return H("div",{key:"esri-search__empty-search"},H("span",{"aria-hidden":"true",class:Gn.noticeTriangle}),H("span",{class:Xe.noValueText},e.emptyValue))}_renderLocateWarning(){const{messages:e}=this;return H("div",{key:"esri-search__locate-error"},H("span",{"aria-hidden":"true",class:Gn.noticeTriangle}),H("span",{class:Xe.noValueText},e.locateError))}_renderWarning(){var i;const{displayedSearchTerm:e,_locateFailed:t}=this,{viewModel:r}=this;return t?this._renderLocateWarning():(i=r.selectedSuggestion)!=null&&i.location||e?this._renderNoResultsWarning(e):this._renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(e,t){return`${this.id}-${e}${t===void 0?"":`-${t}`}`}_watchSourceChanges(){const{viewModel:{allSources:e}}=this,t="sources";this.removeHandles(t),e.forEach(r=>this.addHandles(ce(()=>r.name,()=>this.scheduleRender()),t))}_handleSourcesMenuToggleFocus(){this.activeMenu!=="source"&&this._clearActiveMenu()}_handleSourcesMenuToggleClick(){var t;const e=this.activeMenu==="source";this.activeMenu=e?"none":"source",this.renderNow(),this.activeMenu==="source"&&((t=this._sourceListNode)==null||t.focus())}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(e){const t=x8(e.currentTarget);t&&(this._focus(),this.search(t))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const e=new AbortController,{signal:t}=e;this._searchController=e,(async()=>{try{const r=await this.viewModel.searchNearby({signal:t});this.activeMenu=r!=null&&r.numResults?"none":"warning"}catch{this._locateFailed=!0,this.activeMenu="warning"}finally{this._searchController=null}})()}_handleSourceClick(e){this._setSourceFromMenuItem(e.currentTarget)}_setSourceFromMenuItem(e){var r;if(!e)return;const t=mRe(e);t!=null&&(this.viewModel.activeSourceIndex=t,this._clearActiveMenu(),(r=this._sourceMenuButtonNode)==null||r.focus())}_cancelSuggest(){this._suggestController=ep(this._suggestController)}_cancelSearch(){this._searchController=ep(this._searchController),this._locateFailed=!1}_handleInputKeyup(e){var n;const{key:t}=e;if(e.ctrlKey||e.metaKey||t==="Copy"||t==="ArrowLeft"||t==="ArrowRight"||t==="Shift")return;if(t==="Tab"||t==="Escape"||e.shiftKey&&t==="Tab")return this._cancelSuggest(),void(t==="Escape"&&this._clearActiveMenu());const r=t==="Home"||t==="End"||t==="ArrowUp"||t==="ArrowDown";if(t==="Enter"&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const i=(n=this._suggestionListNode)==null?void 0:n.getElementsByTagName("li");if(i!=null&&i.length){if(this.activeMenu!=="suggestion"&&this._openSuggestionMenu(),r)return e.preventDefault(),this._cancelSuggest(),void this._handleItemNavigation(t,i,this._suggestionListNode);const s=i[this._activeMenuItemIndex];if(t==="Enter"&&s){const o=x8(s);return void(o?(this._focus(),this.search(o)):yRe(s)&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}_handleItemNavigation(e,t,r){const i=this._activeMenuItemIndex;e==="Home"&&(this._activeMenuItemIndex=0),e==="End"&&(this._activeMenuItemIndex=t.length-1),e==="ArrowUp"&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?t.length-1:this._activeMenuItemIndex-1),e==="ArrowDown"&&(this._activeMenuItemIndex=this._activeMenuItemIndex===t.length-1?0:this._activeMenuItemIndex+1),i!==this._activeMenuItemIndex&&r&&gRe(t[this._activeMenuItemIndex],r)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_openSuggestionMenu(){this.activeMenu="suggestion"}_handleInputPaste(e){const t=e.target;this.viewModel.searchTerm!==t.value&&(this.viewModel.searchTerm=t.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(e){var r;const{key:t}=e;if(wq(t)){e.preventDefault();const i=(r=this._sourceListNode)==null?void 0:r.getElementsByTagName("li"),n=i==null?void 0:i[this._activeMenuItemIndex];this._setSourceFromMenuItem(n)}else t!=="ArrowUp"&&t!=="ArrowDown"&&t!=="End"&&t!=="Home"||e.preventDefault()}_handleSourceMenuKeyup(e){var n,s,o;const{key:t}=e,r=t==="ArrowUp"||t==="ArrowDown"||t==="End"||t==="Home";if(r&&e.preventDefault(),t==="Escape")return this._clearActiveMenu(),void((n=this._sourceMenuButtonNode)==null?void 0:n.focus());const i=(s=this._sourceListNode)==null?void 0:s.getElementsByTagName("li");return i&&i.length!==0&&r?(this.activeMenu!=="source"&&(this.activeMenu="source"),void this._handleItemNavigation(t,i,(o=this._sourceListNode)==null?void 0:o.parentElement)):void 0}_focus(e){this.focus(),e&&(this.activeMenu=e)}_formSubmit(e){e.preventDefault(),this._activeMenuItemIndex===-1&&this.search()}_getSourceName(e){const{messages:t}=this,r=this.viewModel,{allSources:i}=r,n=i.at(e);return e===gf.ALL_INDEX?t.all:n&&n.name||t.untitledSource}_getSuggestResultHTML(e,t){return e?hRe.test(e)?e:fRe(e,t):this.messages.untitledResult}};function x8(e){return e==null?void 0:e["data-suggestion"]}function mRe(e){return e==null?void 0:e["data-source-index"]}function yRe(e){return!!(e!=null&&e["data-current-location-item"])}function gRe(e,t){const r=e.getBoundingClientRect(),i=t.getBoundingClientRect(),n=r.top+r.height,s=i.top+i.height,o=r.top,a=i.top;(n>s||o<a)&&e.scrollIntoView({block:"end"})}l([c()],Ce.prototype,"_activeMenuItemIndex",void 0),l([c()],Ce.prototype,"displayedSearchTerm",null),l([c({readOnly:!0})],Ce.prototype,"inputId",null),l([c({readOnly:!0})],Ce.prototype,"suggestionsMenuId",null),l([c({readOnly:!0})],Ce.prototype,"sourceMenuId",null),l([c({readOnly:!0})],Ce.prototype,"sourceMenuButtonId",null),l([c()],Ce.prototype,"activeMenu",void 0),l([c({readOnly:!0})],Ce.prototype,"activeSource",null),l([c()],Ce.prototype,"activeSourceIndex",null),l([c()],Ce.prototype,"allPlaceholder",null),l([c({readOnly:!0})],Ce.prototype,"allSources",null),l([c()],Ce.prototype,"autoNavigate",null),l([c()],Ce.prototype,"autoSelect",null),l([c({readOnly:!0})],Ce.prototype,"defaultSources",null),l([c()],Ce.prototype,"disabled",void 0),l([c()],Ce.prototype,"goToOverride",null),l([c()],Ce.prototype,"icon",null),l([c()],Ce.prototype,"includeDefaultSources",null),l([c()],Ce.prototype,"label",null),l([c()],Ce.prototype,"locationEnabled",null),l([c()],Ce.prototype,"maxResults",null),l([c()],Ce.prototype,"maxSuggestions",null),l([c(),Ji("esri/widgets/Search/t9n/Search")],Ce.prototype,"messages",void 0),l([c(),Ji("esri/t9n/common")],Ce.prototype,"messagesCommon",void 0),l([c()],Ce.prototype,"minSuggestCharacters",null),l([c()],Ce.prototype,"popupEnabled",null),l([c()],Ce.prototype,"popupTemplate",null),l([c()],Ce.prototype,"portal",null),l([c()],Ce.prototype,"resultGraphic",null),l([c()],Ce.prototype,"resultGraphicEnabled",null),l([c({readOnly:!0})],Ce.prototype,"results",null),l([c()],Ce.prototype,"searchAllEnabled",null),l([c()],Ce.prototype,"searchTerm",null),l([c({readOnly:!0})],Ce.prototype,"selectedResult",null),l([c()],Ce.prototype,"sources",null),l([c({readOnly:!0})],Ce.prototype,"suggestions",null),l([c()],Ce.prototype,"suggestionsEnabled",null),l([c()],Ce.prototype,"view",null),l([xP(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),c({type:gf})],Ce.prototype,"viewModel",void 0),Ce=l([$("esri.widgets.Search")],Ce);const vRe=Ce,Oje=Y.ofType({key:"type",defaultKeyValue:"button",base:h$,typeMap:{button:Vv,toggle:fk}}),kje=new Vv({icon:"magnifying-glass-plus",id:"zoom-to-feature",title:"{messages.zoom}",className:Gn.zoomInMagnifyingGlass}),wRe=new Vv({icon:"trash",id:"remove-selected-feature",title:"{messages.remove}",className:Gn.trash}),Pje=new Vv({icon:"magnifying-glass-plus",id:"zoom-to-clustered-features",title:"{messages.zoom}",className:Gn.zoomInMagnifyingGlass}),Nje=new fk({icon:"table",id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:Gn.table,value:!1}),_Re=2500,oQ={type:"CIMPictureMarker",primitiveName:"headingOverride",enable:!0,anchorPoint:{x:0,y:-.5},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:36,billboardMode3D:"FaceNearPlane",invertBackfaceTexture:!0,scaleX:1,textureFilter:"Picture",url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAkCAYAAACe0YppAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAYaSURBVHgBvVfNb1VFFD/nzP16xRYJKYREEiJoDLLShQkrSNzoHv8I2QgxwY8FJWHhxoVxISEu2AordWNiQjAxEBeEsKAmhCCwkPDRAn1t33v33jnH37n3Fam0pa8kTjOde+/MnN/5+J0z85jW08yYTpxgfzx0bS+fO0R0YHqyeb9w7YEtLTv+9rSdOH7ciNleJJJX/Do1JQ3AltdlT35fiN6gG8kD8akdmzO+6w/zM7wdw725rUY78DBXtmATA6PZntFgm9Kjm6o/HFJpdi5Xhp+16sDBC+H+gUmZfjIXHKC+35U42ZHZfpe30BZS7okNFnhu8wTRk2ek5LEV2q+N8nEj6yuNVRjHddftrt4ahyJbOxF+Uppi/Rf47NlA05Pp9vkyRNkkD8sqUJHwOGfSpYFQFXhTJryQBaZSeAxbFus+U1K0gJm2oy3QKwuZzqeuSK5kpW6BEsE6+nCsAHDXQWuaOljzU8uP/ToxUW4KcwKg8QzOSdFL6Swm0hurAC7N2qIW7ncwNgYKF4la3/w7RnzrUK29KseXWqmTKXGl45Zrd9CLrsSjr96fcw4kS46mTsJznSTrVBR6VQJQdDbpZTWexxgCYCFz30cquD8oYVQgtUAUzfo8wGtqGoNRFmFZ1KKulJMQu3Vpm/I8Pup3ekvES57GaabXo4lsszEA6zrkhcmAAkBNshi59O9wVsokBLZUCQAxllXVBkyCDRQuTlLLiLSEqw3gfUqU0kVdsKymsnzyPLm8fXZxDxVZgvUhg9QyaKDI7AhpSlRVEaA83JM+/V8pGO0PMTHyZwra9FQVk4i1e0D6dPK9v5agkmXAhc0Bw5MjlAQQE0lSDbUmbBX4kGfsiiQWuSZtdle1S4F73cUKJgviyw4mmmqlVSoR/FAK2d1noWQZ8N79MySw0tgNzhN00jRFaPM6y3IyLWBxXuOdvMfhaIy1MQctmvnEMGrMq2Y/ekC3dHF14I84gmZP2s0pgiJFHVwYhIIrMC1zgT4fQgsS0CG48LWtslAsgeKZK5U1c5Slj+nEvvJZqOWubr5ks8iE3bVqCMQCz4p5aiUqpMrOdHz2qLFTxAMSPLwY8WpmntNwrXIMCWvESGH+7n9hVi6ZJ6/sR5gnycFFQgsCQEEB8T9TbsCGy4PrZrEBjGyIt4EApoGRXWKP6Mt3fnvOvhWBjR4gdjtJEDmGQQkBSCS6Teys5qECABTPWOBwcPWgAPIU+E2+Rq3J8lsrQawMHNPbqAXvRqasWcMB/mK42N3twM6/FsbJTZK2Fru15K7niPVIp6RHn++9vRKErAg8ta+MFq4LBxAJKY1EajpxLj5KUzFzOMTni4btxoUzXPzIIOwLnEPxGVqlyWoTdO/WNRUXJhDmAgNAJVd0eABj8FTCvLbpEnxdOycJlFNXVq6MDvzthwOQ654LaMGGVofQWIWtXhM9xaCQp85QIZFMPXcpuUPH3uquJj6htVonvySD+KY6c2AulPAzHdVaZElvPCGBgvkIRUECr1J4qmV6LdGyJvAnu+94HZMla1Eg1AuGVyQWnNCwzqsUXK5+AIsUyPRc1Rbpi93X1xK9tsXtkj9U7INWSWvU0DaZ6OlVAmUDiqgbrwY2Z3ThRVKFXrgi/R0x9GMplxAyER6ynAtZin1DQoLVznLMU+/mywMf3dlDpbyMlbjLQDhLw/Sh24sm5dhTrlHKgS/T0X2zLw/sLeGr5OlEbg2uHwAFw5reKuKsJj8kcIj0zq9H5PqAj+z6E8y+YRIaUhnAEOrcWgv9m3shQ1H7mz5duVJtDLhZqZcNlrEDwXKwCzncdFg+PJeVf1m3uPUupLR7Hq6tHNyLhw1TCmdGbm0BmaUjr63LzaMBH943D9f+yO5uZ7HfcLktqdwqMU0jtPUDN6vDOfzgKFrXtta6q83vfHU4M5KoURbT4W3zsPIqrgQFO8GozV8ocZGOTN4dRdRowN6CnOLmKkk5t7H1i+HPNGJj2kj7buYajoRXh2+36eOt+2nENrrF3ozODEmFC0D4hjbQNgYc+DSYjd9qqGSJXqL/tZ16/DWdfvw9bbCt41hcpYn9RAEX9Q22fwC74ny5v9iplQAAAABJRU5ErkJggg=="},bRe=new wl({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:14,billboardMode3D:"FaceNearPlane",frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[8.5,0],[7.02,.13],[5.59,.51],[4.25,1.14],[3.04,1.99],[1.99,3.04],[1.14,4.25],[.51,5.59],[.13,7.02],[0,8.5],[.13,9.98],[.51,11.41],[1.14,12.75],[1.99,13.96],[3.04,15.01],[4.25,15.86],[5.59,16.49],[7.02,16.87],[8.5,17],[9.98,16.87],[11.41,16.49],[12.75,15.86],[13.96,15.01],[15.01,13.96],[15.86,12.75],[16.49,11.41],[16.87,9.98],[17,8.5],[16.87,7.02],[16.49,5.59],[15.86,4.25],[15.01,3.04],[13.96,1.99],[12.75,1.14],[11.41,.51],[9.98,.13],[8.5,0]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Round",joinStyle:"Round",lineStyle3D:"Strip",miterLimit:10,width:2,color:[255,255,255,255]},{type:"CIMSolidFill",enable:!0,color:[0,122,194,255]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:16,billboardMode3D:"FaceNearPlane",frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[8.5,0],[7.02,.13],[5.59,.51],[4.25,1.14],[3.04,1.99],[1.99,3.04],[1.14,4.25],[.51,5.59],[.13,7.02],[0,8.5],[.13,9.98],[.51,11.41],[1.14,12.75],[1.99,13.96],[3.04,15.01],[4.25,15.86],[5.59,16.49],[7.02,16.87],[8.5,17],[9.98,16.87],[11.41,16.49],[12.75,15.86],[13.96,15.01],[15.01,13.96],[15.86,12.75],[16.49,11.41],[16.87,9.98],[17,8.5],[16.87,7.02],[16.49,5.59],[15.86,4.25],[15.01,3.04],[13.96,1.99],[12.75,1.14],[11.41,.51],[9.98,.13],[8.5,0]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Round",joinStyle:"Round",lineStyle3D:"Strip",miterLimit:10,width:0,color:[255,255,255,255]},{type:"CIMSolidFill",enable:!0,color:[0,0,0,66]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0,offsetX:0,offsetY:-1},oQ],angleAlignment:"Map"},primitiveOverrides:[{type:"CIMPrimitiveOverride",primitiveName:"headingOverride",propertyName:"Rotation",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Rotation override",expression:"360 - $feature.heading",returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"headingOverride",propertyName:"TintColor",valueExpressionInfo:{type:"CIMExpressionInfo",title:"TintColor override",expression:"IIF(IsEmpty($feature.heading), [255, 255, 255, 0], [255, 255, 255, 1])",returnType:"Default"}}]}});let Ao=class extends E$(cs.EventedMixin(te)){constructor(){super(...arguments),this._geolocationUsable=!0,this.geolocationOptions=null,this.goToLocationEnabled=!0,this.graphic=new Ti({symbol:bRe}),this.scale=null,this.rotationEnabled=!0,this.view=null}initialize(){HA()||(this._geolocationUsable=!1),this.addHandles([ce(()=>{var t;return(t=this.view)==null?void 0:t.type},()=>this._handleViewTypeChange(),zt)])}destroy(){this._clearGraphic(),this.view=null}_clearGraphic(){const{view:t,graphic:r}=this;t&&r&&t.graphics.remove(r)}_addGraphic(){const{view:t,graphic:r}=this;t!=null&&t.graphics&&r&&!t.graphics.includes(r)&&t.graphics.push(r)}_handleViewTypeChange(){var t;oQ.enable=((t=this.view)==null?void 0:t.type)==="2d"}_getScaleWithinConstraints(t,r){if(!r)return t;if(r.type==="2d"){const{effectiveMaxScale:i,effectiveMinScale:n}=r.constraints;return Math.min(n,Math.max(i,t))}return t}_getScale(t){const{scale:r}=this,i=typeof r=="number"?r:_Re;return this._getScaleWithinConstraints(i,t)}_getHeading(t,r){var o;const i=r==null?void 0:r.spatialReference,n=(i==null?void 0:i.isWebMercator)||(i==null?void 0:i.isGeographic),s=(o=t.coords)==null?void 0:o.heading;return!n||typeof s!="number"||isNaN(s)||s<0||s>360?null:s}_addHeading(t){const{heading:r,target:i,view:n}=t;n&&r!==null&&(n.type!=="3d"?n.type==="2d"&&(i.rotation=360-r):i.heading=r)}async _animatePoint(t,r,i,n){const{view:s}=this;if(!this.goToLocationEnabled||!s)return;const o={target:t,scale:r};this.rotationEnabled&&this._addHeading({heading:i,target:o,view:s});const a={signal:n.signal};_t(a),await this.callGoTo({target:o,options:a})}async updatePosition(t,r){try{const i=this.view,n=await sQ({position:t,view:i},{signal:r.signal}),{graphic:s}=this,{timestamp:o,coords:a}=t,{accuracy:u,altitude:d,altitudeAccuracy:h,latitude:f,longitude:m,speed:y}=a,g=this._getHeading(t,i),v={timestamp:o,accuracy:u,altitude:d,altitudeAccuracy:h,heading:g,latitude:f,longitude:m,speed:y};s&&(s.geometry=n,s.attributes=v);const _=this._getScale(i);await this._animatePoint(n,_,g,r)}catch(i){if(!Or(i))throw new R("geolocation-positioning:invalid-point","Cannot position invalid point",{error:i})}return t}};l([c()],Ao.prototype,"_geolocationUsable",void 0),l([c()],Ao.prototype,"geolocationOptions",void 0),l([c()],Ao.prototype,"goToLocationEnabled",void 0),l([c({type:Ti,nonNullable:!0})],Ao.prototype,"graphic",void 0),l([c()],Ao.prototype,"scale",void 0),l([c()],Ao.prototype,"rotationEnabled",void 0),l([c()],Ao.prototype,"view",void 0),Ao=l([$("esri.widgets.support.GeolocationPositioning")],Ao);const SRe=Ao;async function $Re(){const e=await J2("esri/widgets/Locate/t9n/Locate");return new hc({title:e.currentLocation,fieldInfos:[{fieldName:"timestamp",label:e.timestamp,format:{dateFormat:"short-date-short-time"}},{fieldName:"latitude",label:e.latitude,format:{places:4,digitSeparator:!0}},{fieldName:"longitude",label:e.longitude,format:{places:4,digitSeparator:!0}},{fieldName:"accuracy",label:e.accuracy,format:{places:0,digitSeparator:!0}},{fieldName:"altitude",label:e.altitude,format:{places:0,digitSeparator:!0}},{fieldName:"altitudeAccuracy",label:e.altitudeAccuracy,format:{places:0,digitSeparator:!0}},{fieldName:"heading",label:e.heading,format:{places:0,digitSeparator:!0}},{fieldName:"speed",label:e.speed,format:{places:0,digitSeparator:!0}}],actions:[wRe.clone()],content:[{type:"fields"}]})}let Da=class extends SRe{constructor(t){super(t),this._locateController=null,this.error=void 0,this.popupEnabled=!0,this.locate=this.locate.bind(this)}initialize(){this.addHandles([z2(()=>{var n;const{graphic:t,view:r}=this;if(!t)return;((n=r==null?void 0:r.graphics)==null?void 0:n.includes(t))&&this._updatePopupTemplate(t)})])}destroy(){this.cancelLocate()}get state(){var t;return this._geolocationUsable?(t=this.view)!=null&&t.ready?this._locateController?"locating":this.error!=null?"error":"ready":"disabled":"feature-unsupported"}async locate(){if(this.cancelLocate(),this.state==="disabled")throw new R("locate:disabled-state","Cannot locate when disabled.");if(this.state==="feature-unsupported")throw new R("locate:feature-unsupported-state","Cannot locate in unsecure domain.");const t=new AbortController;this._locateController=t,this.error=void 0;try{const r=await nQ(this.geolocationOptions);if(await this.updatePosition(r,t),this._locateController!==t)return null;const{graphic:i}=this;return i&&await this._updatePopupTemplate(i),this._addGraphic(),this.emit("locate",{position:r}),this._locateController=null,r}catch(r){if(Or(r))return null;throw t===this._locateController&&(this._locateController=null),this.error=r,this.emit("locate-error",{error:r}),r}}cancelLocate(){this._clearGraphic(),this._locateController&&this._locateController.abort(),this._locateController=null}async _updatePopupTemplate(t){if(!this.popupEnabled)return;const r=await $Re(),i=t!==this.graphic;this.destroyed||i||(t.popupTemplate=r)}};l([c()],Da.prototype,"_locateController",void 0),l([c()],Da.prototype,"error",void 0),l([c()],Da.prototype,"popupEnabled",void 0),l([c({readOnly:!0})],Da.prototype,"state",null),l([c()],Da.prototype,"locate",null),l([c()],Da.prototype,"cancelLocate",null),Da=l([$("esri.widgets.Locate.LocateViewModel")],Da);const aQ=Da,TRe={base:"esri-locate"};let ii=class extends ta{constructor(t,r){super(t,r),this.messages=null,this.messagesCommon=null,this.viewModel=new aQ,this._locate=()=>{const{viewModel:i}=this;i.state==="locating"?i.cancelLocate():i.locate().catch(()=>{})}}loadDependencies(){return Cp({button:()=>D(()=>import("./calcite-button-CbVluA9b.js"),__vite__mapDeps([216,217,218,219,220,221,222,223,224,225]),import.meta.url),loader:()=>D(()=>import("./calcite-loader-DmOo300H.js"),__vite__mapDeps([245,225,222,223]),import.meta.url),tooltip:()=>D(()=>import("./calcite-tooltip-DuvO-zwH.js"),__vite__mapDeps([246,247,248,249,250]),import.meta.url)})}get geolocationOptions(){return this.viewModel.geolocationOptions}set geolocationOptions(t){this.viewModel.geolocationOptions=t}get goToLocationEnabled(){return this.viewModel.goToLocationEnabled}set goToLocationEnabled(t){this.viewModel.goToLocationEnabled=t}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get icon(){return"gps-off"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get popupEnabled(){return this.viewModel.popupEnabled}set popupEnabled(t){this.viewModel.popupEnabled=t}get rotationEnabled(){return IL(j.getLogger(this),"rotationEnabled",{replacement:"use Track widget",version:"4.29",warnOnce:!0}),this.viewModel.rotationEnabled}set rotationEnabled(t){IL(j.getLogger(this),"rotationEnabled",{replacement:"use Track widget",version:"4.29",warnOnce:!0}),this.viewModel.rotationEnabled=t}get scale(){return this.viewModel.scale}set scale(t){this.viewModel.scale=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}cancelLocate(){this.viewModel.cancelLocate()}locate(){return this.viewModel.locate()}render(){var u;const{viewModel:t,icon:r}=this,{state:i}=t,n=i==="locating",s=n?this.messagesCommon.cancel:this.messages.title,o=i==="feature-unsupported",a=this._localizeError((u=this.viewModel)==null?void 0:u.error);return H("div",{class:this.classes(TRe.base,Te.widget)},!o&&H("calcite-button",{class:Te.widgetButton,disabled:i==="disabled",iconStart:n?void 0:r,kind:"neutral",label:s,onclick:this._locate,title:s},n?H("calcite-loader",{inline:!0,label:""}):null),a?H("calcite-tooltip",{open:!0,overlayPositioning:"fixed",referenceElement:this.container},a):null)}_localizeError(t){var r,i,n;return t instanceof GeolocationPositionError?t.code===GeolocationPositionError.PERMISSION_DENIED?(r=this.messages)==null?void 0:r.permissionError:t.code===GeolocationPositionError.TIMEOUT?(i=this.messages)==null?void 0:i.timeoutError:(n=this.messages)==null?void 0:n.positionUnavailable:t instanceof Error?t.message:void 0}};l([c()],ii.prototype,"geolocationOptions",null),l([c()],ii.prototype,"goToLocationEnabled",null),l([c()],ii.prototype,"goToOverride",null),l([c()],ii.prototype,"graphic",null),l([c()],ii.prototype,"icon",null),l([c()],ii.prototype,"label",null),l([c(),Ji("esri/widgets/Locate/t9n/Locate")],ii.prototype,"messages",void 0),l([c(),Ji("esri/t9n/common")],ii.prototype,"messagesCommon",void 0),l([c()],ii.prototype,"popupEnabled",null),l([c()],ii.prototype,"rotationEnabled",null),l([c()],ii.prototype,"scale",null),l([c()],ii.prototype,"view",null),l([c({type:aQ}),xP(["locate","locate-error"])],ii.prototype,"viewModel",void 0),ii=l([$("esri.widgets.Locate")],ii);const xRe=ii;let Vn=class extends te{constructor(t){super(t),this._basemapCache={},this._loadingProjectionEngine=!1,this.nextBasemap=d_("hybrid",this._basemapCache),this.view=null}initialize(){ce(()=>this.nextBasemap,t=>{t&&!t.loaded&&t.load().catch(()=>{})},zt)}destroy(){this.view=null,Qq(this._basemapCache),this._basemapCache=null}get _nextBasemapSpatialReferenceTask(){return fye(this.view,this.nextBasemap)}get _viewSpatialReferenceLocked(){const{view:t}=this;return!t||!("spatialReferenceLocked"in t)||t.spatialReferenceLocked}get activeBasemap(){var t,r;return d_(((r=(t=this.view)==null?void 0:t.map)==null?void 0:r.basemap)??"topo-vector",this._basemapCache)}castNextBasemap(t){return d_(t,this._basemapCache)}get state(){const{view:t}=this;if(!(t!=null&&t.ready)||this._nextBasemapSpatialReferenceTask.updating)return"disabled";const{spatialReference:r}=this._nextBasemapSpatialReferenceTask;return this._viewSpatialReferenceLocked&&r!=null&&!t.spatialReference.equals(r)?"incompatible-next-basemap":this._loadingProjectionEngine?"loading":"ready"}async toggle(){const{activeBasemap:t,nextBasemap:r,state:i,view:n}=this;if(!n||i==="disabled"||i==="incompatible-next-basemap")return;const s=this._viewSpatialReferenceLocked;if(!s){if(await up(()=>!this._nextBasemapSpatialReferenceTask.updating),r!==this.nextBasemap||t!==this.activeBasemap)return;const{spatialReference:o}=this._nextBasemapSpatialReferenceTask;if(o==null||Ht(n.spatialReference,o)||gl()||ro(n.spatialReference,o)||(this._loadingProjectionEngine=!0,await hl(),this._loadingProjectionEngine=!1),r!==this.nextBasemap||t!==this.activeBasemap)return}n.map.basemap=r,s||this._nextBasemapSpatialReferenceTask.spatialReference==null||Ht(n.spatialReference,this._nextBasemapSpatialReferenceTask.spatialReference)||(n.spatialReference=this._nextBasemapSpatialReferenceTask.spatialReference),this.nextBasemap=t}static getThumbnailUrl(t){return tH(t)}};l([c()],Vn.prototype,"_loadingProjectionEngine",void 0),l([c({readOnly:!0})],Vn.prototype,"_nextBasemapSpatialReferenceTask",null),l([c({readOnly:!0})],Vn.prototype,"_viewSpatialReferenceLocked",null),l([c({readOnly:!0})],Vn.prototype,"activeBasemap",null),l([c()],Vn.prototype,"nextBasemap",void 0),l([Ne("nextBasemap")],Vn.prototype,"castNextBasemap",null),l([c({readOnly:!0})],Vn.prototype,"state",null),l([c()],Vn.prototype,"view",void 0),l([c()],Vn.prototype,"toggle",null),Vn=l([$("esri.widgets.BasemapToggle.BasemapToggleViewModel")],Vn);const lQ=Vn,Ac="esri-basemap-toggle",Sy="esri-basemap-thumbnail",lo={base:Ac,secondaryBasemapImage:`${Ac}__image--secondary`,container:`${Sy} ${Ac}__container`,image:`${Sy}__image ${Ac}__image`,imageLoading:`${Ac}__image--loading`,overlay:`${Sy}__overlay ${Ac}__image-overlay`,title:`${Sy}__title ${Ac}__title`,overlayScrim:`${Sy}__overlay-scrim`};function E8(e){const t=tH(e);return t?{backgroundImage:"url("+t+")"}:{backgroundImage:""}}const M8={title:!1};let Un=class extends ta{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new lQ,this.visibleElements={...M8},this.toggle=()=>this.viewModel.toggle()}loadDependencies(){return Cp({button:()=>D(()=>import("./calcite-button-CbVluA9b.js"),__vite__mapDeps([216,217,218,219,220,221,222,223,224,225]),import.meta.url),icon:()=>D(()=>import("./calcite-icon-B-VB2seh.js"),[],import.meta.url),scrim:()=>D(()=>import("./calcite-scrim-CketMvFK.js"),__vite__mapDeps([251,252,222,223,224,225]),import.meta.url)})}get activeBasemap(){return this.viewModel.activeBasemap}get icon(){return"layer-basemap"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get nextBasemap(){return this.viewModel.nextBasemap}set nextBasemap(t){this.viewModel.nextBasemap=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}castVisibleElements(t){return{...M8,...t}}render(){const t=this.viewModel,r=t.state==="disabled"?null:t.activeBasemap,i=t.state==="disabled"?null:t.nextBasemap,n=t.state==="loading",s=t.state==="incompatible-next-basemap",o=(i==null?void 0:i.title)??"",a=i&&i.loadStatus!=="loaded";let u;const d=this.visibleElements.title&&o,h=s;return(d||h)&&(u=H("div",{class:lo.overlay,key:"overlay"},d?H("span",{class:lo.title,title:o},o):null,h?H("calcite-scrim",{class:lo.overlayScrim,title:this.messages.incompatibleSpatialReference},H("calcite-icon",{icon:"exclamation-mark-triangle"})):null)),H("div",{class:this.classes(lo.base,Te.widget)},H("calcite-button",{appearance:"transparent","data-basemap-id":i?i.id:"",disabled:s,kind:"neutral",label:this.label,onclick:()=>{this.toggle()},title:this.label},H("div",{class:this.classes(lo.container,lo.secondaryBasemapImage)},H("div",{class:lo.image,styles:E8(r)})),H("div",{class:lo.container},H("div",{class:this.classes(lo.image,a?lo.imageLoading:null),styles:E8(i)},a||n?H("calcite-scrim",null,H("span",{"aria-hidden":"true",class:Te.loaderAnimation,role:"presentation"})):null),u)))}};l([c({readOnly:!0})],Un.prototype,"activeBasemap",null),l([c()],Un.prototype,"icon",null),l([c()],Un.prototype,"label",null),l([c(),Ji("esri/widgets/BasemapToggle/t9n/BasemapToggle")],Un.prototype,"messages",void 0),l([c()],Un.prototype,"nextBasemap",null),l([c()],Un.prototype,"view",null),l([c({type:lQ})],Un.prototype,"viewModel",void 0),l([c()],Un.prototype,"visibleElements",void 0),l([Ne("visibleElements")],Un.prototype,"castVisibleElements",null),Un=l([$("esri.widgets.BasemapToggle")],Un);const ERe=Un;let cu=class extends te{constructor(e){super(e),this._viewpointHandle=null,this.group=null}initialize(){this.addHandles(pl(()=>{var e;return(e=this.view)==null?void 0:e.ui},"expand",e=>{const{target:t}=e;t&&t!==this&&t.expanded&&t.group&&t.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){var i;const t=!!e;this._set("expanded",t);const r=(i=this.view)==null?void 0:i.ui;r&&r.emit("expand",{target:this}),this._viewpointHandleChange(t)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&as(()=>e.ready,()=>{this.view===e&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?as(()=>{var t;return(t=this.view)==null?void 0:t.stationary},()=>{var t;return(t=this._viewpointHandle)==null?void 0:t.resume()},{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const e="viewpoint";this.removeHandles(e),this._viewpointHandle=null;const{autoCollapse:t,view:r}=this;if(!r||!t)return;const i=qle(()=>r.type==="3d"?r.camera:r.viewpoint,()=>this._collapse());this.addHandles(i,e),this._viewpointHandle=i}_collapse(){this.expanded=!1}};l([c({value:!1})],cu.prototype,"autoCollapse",null),l([c({value:!1})],cu.prototype,"expanded",null),l([c()],cu.prototype,"group",void 0),l([c({readOnly:!0})],cu.prototype,"state",null),l([c({value:null})],cu.prototype,"view",null),cu=l([$("esri.widgets.Expand.ExpandViewModel")],cu);const uQ=cu;function Kx(e){return e&&typeof e.render=="function"}function MRe(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}const Mn="esri-expand",Qi={base:Mn,toggle:`${Mn}__toggle`,popoverContent:`${Mn}__popover-content`,panel:`${Mn}__panel`,panelContent:`${Mn}__panel-content`,sheet:`${Mn}__sheet`,panelIconNumber:`${Mn}__panel-icon-number`,contentContainer:`${Mn}__content-container`,icon:"esri-collapse__icon",iconFlip:"esri-collapse__icon-flip",iconExpanded:`${Mn}__icon--expanded`,iconNumber:`${Mn}__icon-number`,content:`${Mn}__content`,contentExpanded:`${Mn}__content--expanded`},I8="chevrons-left",C8="chevrons-right";let Mt=class extends ta{constructor(e,t){super(e,t),this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expandTooltip="",this.iconNumber=0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.placement=null,this.viewModel=new uQ,this.toggle=()=>{this.viewModel.expanded=!this.viewModel.expanded},this._handlePopoverClose=r=>{r.target===this._popoverEl&&(this.viewModel.expanded=r.target.open)},this._handleSheetClose=r=>{this.viewModel.expanded=r.target.open},this._handlePanelClose=r=>{this.viewModel.expanded=!r.target.closed},this._handleKeyDown=r=>{this.viewModel.expanded&&r.key==="Escape"&&!this._willCloseOnEsc(r)&&r.preventDefault()},this._storeToggleActionEl=r=>{this._toggleActionEl=r},this._storePopoverEl=r=>{this._popoverEl=r}}loadDependencies(){return Cp({action:()=>D(()=>import("./calcite-action-DbX3VyGl.js"),__vite__mapDeps([253,254,218,221,222,223,220,224,225]),import.meta.url),icon:()=>D(()=>import("./calcite-icon-B-VB2seh.js"),[],import.meta.url),panel:()=>D(()=>import("./calcite-panel-h_5sOXgQ.js"),__vite__mapDeps([255,256,218,221,257,223,254,222,220,224,225,258,247,248,259,249,250,252]),import.meta.url),popover:()=>D(()=>import("./calcite-popover-d-INBawo.js"),__vite__mapDeps([260,258,247,248,259,249,222,223,224,221,250,220,254,218,225]),import.meta.url),sheet:()=>D(()=>import("./calcite-sheet-BFq5GhBT.js"),__vite__mapDeps([261,259,221,249,225,222,223,252,224]),import.meta.url)})}get expandTitle(){const{expanded:e,messagesCommon:t,collapseTooltip:r,expandTooltip:i}=this;return(e?r||(t==null?void 0:t.collapse):i||(t==null?void 0:t.expand))??""}get _displaySheet(){var e;switch(this.mode){case"drawer":return!0;case"auto":return((e=this.viewModel.view)==null?void 0:e.widthBreakpoint)==="xsmall";default:return!1}}get autoCollapse(){return this.viewModel.autoCollapse}set autoCollapse(e){this.viewModel.autoCollapse=e}get collapseIcon(){return C8}set collapseIcon(e){this._overrideIfSome("collapseIcon",e)}get expanded(){return this.viewModel.expanded}set expanded(e){this.viewModel.expanded=e}get expandIcon(){return Kx(this.content)?this.content.icon:I8}set expandIcon(e){this._overrideIfSome("expandIcon",e)}get group(){return this.viewModel.group}set group(e){this.viewModel.group=e}get icon(){return null}get label(){var e;return(Kx(this.content)?this.content.label:null)??((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}render(){const{_displaySheet:e,_toggleActionEl:t,viewModel:{expanded:r},label:i,placement:n}=this;return H("div",{class:this.classes(Qi.base,Te.widget)},this._renderToggle(),e?H("calcite-sheet",{class:Qi.sheet,heightScale:"l",label:i,onkeydown:this._handleKeyDown,open:r,position:"block-end",onCalciteSheetClose:this._handleSheetClose},H("calcite-panel",{class:Qi.panel,closable:!0,closed:!r,heading:i,onkeydown:this._handleKeyDown,onCalcitePanelClose:this._handlePanelClose},H("div",{class:Qi.panelContent},this._renderContent()))):t?H("calcite-popover",{afterCreate:this._storePopoverEl,afterUpdate:this._storePopoverEl,label:i,onkeydown:this._handleKeyDown,open:r,overlayPositioning:"fixed",placement:n??this._getPlacement(),referenceElement:t,onCalcitePopoverClose:this._handlePopoverClose},H("div",{class:Qi.popoverContent},this._renderContent())):null)}_getPlacement(){const{container:e,view:t}=this,r=e&&t?t.ui.getPosition(e):null;if(!r||r==="manual")return"auto";const[i,n]=r.split("-");return`${n==="right"?"left":"right"}-${i==="bottom"?"end":"start"}`}_willCloseOnEsc(e){const{closeOnEsc:t}=this;return typeof t=="function"?t(e):t}_renderBadgeNumber(){const{expanded:e,iconNumber:t}=this;return t&&!e?H("span",{class:Qi.iconNumber,key:"expand__icon-number"},t):null}_renderToggleButton(){const{expanded:e,expandTitle:t,expandIcon:r,collapseIcon:i}=this,n=e?i:r,s=n===I8||n===C8;return H("calcite-action",{afterCreate:this._storeToggleActionEl,afterUpdate:this._storeToggleActionEl,class:Te.widgetButton,onclick:this.toggle,scale:"s",text:t,title:t},n?H("calcite-icon",{class:this.classes(Qi.icon,s&&Qi.iconFlip),icon:n,scale:"s"}):null)}_renderToggle(){return H("div",{class:Qi.toggle},this._renderToggleButton(),this._renderBadgeNumber())}_renderContent(){const{content:e}=this;return typeof e=="string"?H("div",{class:Qi.contentContainer,innerHTML:e,key:"content__string"}):Kx(e)?H("div",{class:Qi.contentContainer,key:"content__widget"},e.render()):e instanceof HTMLElement?H("div",{afterCreate:this._attachToNode,bind:e,class:Qi.contentContainer,key:"content__html-element"}):MRe(e)?H("div",{afterCreate:this._attachToNode,bind:e.domNode,class:Qi.contentContainer,key:"content__node"}):null}_attachToNode(e){const t=this;e.appendChild(t)}};l([c({readOnly:!0})],Mt.prototype,"expandTitle",null),l([c()],Mt.prototype,"_toggleActionEl",void 0),l([c()],Mt.prototype,"_displaySheet",null),l([c()],Mt.prototype,"autoCollapse",null),l([c()],Mt.prototype,"closeOnEsc",void 0),l([c()],Mt.prototype,"collapseIcon",null),l([c()],Mt.prototype,"collapseTooltip",void 0),l([c()],Mt.prototype,"content",void 0),l([c()],Mt.prototype,"expanded",null),l([c()],Mt.prototype,"expandIcon",null),l([c()],Mt.prototype,"expandTooltip",void 0),l([c()],Mt.prototype,"group",null),l([c()],Mt.prototype,"icon",null),l([c()],Mt.prototype,"iconNumber",void 0),l([c()],Mt.prototype,"label",null),l([c(),Ji("esri/widgets/Expand/t9n/Expand")],Mt.prototype,"messages",void 0),l([c(),Ji("esri/t9n/common")],Mt.prototype,"messagesCommon",void 0),l([c()],Mt.prototype,"mode",void 0),l([c()],Mt.prototype,"placement",void 0),l([c()],Mt.prototype,"view",null),l([c({type:uQ})],Mt.prototype,"viewModel",void 0),Mt=l([$("esri.widgets.Expand")],Mt);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const IRe={icon:"icon",flipRtl:"flip-rtl"},cQ={},Yx={},dQ={s:16,m:24,l:32};function pQ({icon:e,scale:t}){const r=dQ[t],i=RRe(e),n=i.charAt(i.length-1)==="F";return`${n?i.substring(0,i.length-1):i}${r}${n?"F":""}`}async function CRe(e){const t=pQ(e),r=hQ(t);if(r)return r;Yx[t]||(Yx[t]=fetch(iU(`./assets/icon/${t}.json`)).then(n=>n.json()).catch(()=>(console.error(`"${t}" is not a valid calcite-ui-icon name`),"")));const i=await Yx[t];return cQ[t]=i,i}function ARe(e){return hQ(pQ(e))}function hQ(e){return cQ[e]}function RRe(e){const t=!isNaN(Number(e.charAt(0))),r=e.split("-");if(r.length>0){const n=/[a-z]/i;e=r.map((s,o)=>s.replace(n,function(u,d){return o===0&&d===0?u:u.toUpperCase()})).join("")}return t?`i${e}`:e}const ORe=":host{display:inline-flex;color:var(--calcite-icon-color, var(--calcite-ui-icon-color, currentColor))}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}",kRe=ORe,PRe=gU(class extends eU{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.icon=null,this.flipRtl=!1,this.scale="m",this.textLabel=void 0,this.pathData=void 0,this.visible=!1}connectedCallback(){this.visible||this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}disconnectedCallback(){var t;(t=this.intersectionObserver)==null||t.disconnect(),this.intersectionObserver=null}render(){const{el:t,flipRtl:r,pathData:i,scale:n,textLabel:s}=this,o=pie(t),a=dQ[n],u=!!s,d=[].concat(i||"");return Je(oU,{key:"724265acdc6fb528bf7b25d7ec445c73a63f4c8e","aria-hidden":bie(!u),"aria-label":u?s:null,role:u?"img":null},Je("svg",{key:"864ee2d80bebd282543ba5d94c57f84b48a6204d","aria-hidden":"true",class:{[IRe.flipRtl]:o==="rtl"&&r,svg:!0},fill:"currentColor",height:"100%",viewBox:`0 0 ${a} ${a}`,width:"100%",xmlns:"http://www.w3.org/2000/svg"},d.map(h=>typeof h=="string"?Je("path",{d:h}):Je("path",{d:h.d,opacity:"opacity"in h?h.opacity:1}))))}async loadIconPathData(){const{icon:t,scale:r,visible:i}=this;if(!HR()||!t||!i)return;const n={icon:t,scale:r},s=ARe(n)||await CRe(n);t===this.icon&&(this.pathData=s)}waitUntilVisible(t){if(this.intersectionObserver=wU("intersection",r=>{r.forEach(i=>{i.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,t())})},{rootMargin:"50px"}),!this.intersectionObserver){t();return}this.intersectionObserver.observe(this.el)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{icon:["loadIconPathData"],scale:["loadIconPathData"]}}static get style(){return kRe}},[1,"calcite-icon",{icon:[513],flipRtl:[516,"flip-rtl"],scale:[513],textLabel:[1,"text-label"],pathData:[32],visible:[32]},void 0,{icon:["loadIconPathData"],scale:["loadIconPathData"]}]);function NRe(){if(typeof customElements>"u")return;["calcite-icon"].forEach(t=>{switch(t){case"calcite-icon":customElements.get(t)||customElements.define(t,PRe);break}})}NRe();const LRe="data:image/svg+xml,%3csvg%20width='30'%20height='30'%20viewBox='0%200%2030%2030'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M23.0912%2024.9866C23.4954%2024.9864%2023.883%2024.8202%2024.1687%2024.5245L29.5544%2018.9479C29.84%2018.652%2030.0003%2018.251%2030%2017.833L29.9961%2011.1451C29.9959%2010.727%2029.8352%2010.3262%2029.5493%2010.0307L24.1571%204.4608C23.8702%204.16448%2023.4832%203.99864%2023.079%204.00001L1.52309%204.0134C1.3228%204.01293%201.12439%204.05342%200.939276%204.13253C0.754162%204.21164%200.585998%204.32782%200.444452%204.47438C0.302906%204.62094%200.190773%204.795%200.114499%204.98654C0.0382246%205.17807%20-0.000684416%205.38332%209.11036e-06%205.59046L0.0103705%2023.4248C0.0106744%2023.8428%200.171492%2024.2436%200.457456%2024.539C0.74342%2024.8344%201.13112%2025.0002%201.53529%2025L23.0912%2024.9866ZM3.04893%207.16468L22.4492%207.15263L26.9485%2011.8001L26.9516%2017.1817L22.4578%2021.8348L3.05746%2021.8468L3.04893%207.16468Z'%20fill='%23666666'/%3e%3cpath%20d='M18.3924%2012.6604C17.4126%2013.6749%2017.4136%2015.3188%2018.3945%2016.332C19.3755%2017.3453%2020.965%2017.3443%2021.9448%2016.3298C22.9246%2015.3153%2022.9236%2013.6715%2021.9426%2012.6582C20.9617%2011.6449%2019.3722%2011.6459%2018.3924%2012.6604Z'%20fill='%23666666'/%3e%3c/svg%3e";function FRe(e){const t=r=>{e.setActualTheme(r),e.setVisibleLayers(e.view,r),window.history.replaceState(null,null,`?theme=${r}`)};return jr.useEffect(()=>{},[]),ze.jsxs("div",{className:`app-widget ${e.opened?"opened":"closed"}`,children:[ze.jsxs("div",{className:"header section",children:[ze.jsx("div",{children:"Tmata a oblasti parkovn"}),ze.jsx(Uie,{icon:"x",scale:"m","text-label":"Zavt",onClick:e.toggleAppWidget})]}),ze.jsxs("div",{className:"themes section",children:[ze.jsx("div",{className:"section-title",children:"Zvolte tma mapy:"}),ze.jsx("div",{className:"section-content",children:e.config&&e.config.appThemes.map(r=>ze.jsxs("div",{className:`theme-item ${r.name===e.actualThemeInfo.name?"active":""}`,onClick:()=>{t(r.name)},children:[ze.jsx("img",{src:r.name===e.actualThemeInfo.name?PU:LRe,alt:"tma"}),r.label]},r.name))})]}),ze.jsxs("div",{className:"zones section",children:[ze.jsx("div",{className:"section-title",children:"Vyberte oblast, kter se zvrazn v map:"}),ze.jsx("div",{className:"section-content",style:{fontSize:"12px"},children:'Tady budou "kvtinky".'})]})]})}function DRe(e){const[t,r]=jr.useState(null),[i,n]=jr.useState(!1),s=jr.useRef(null),o=jr.useRef(null),a=()=>{n(!i)};return jr.useEffect(()=>{if(s.current&&e.config){const u=new aAe({portalItem:{id:e.config.webMapId,portal:{url:e.config.portal}}}),d=new y$e({container:s.current,map:u}),h=new cAe({view:d}),f=new xRe({view:d}),m=document.createElement("div");m.classList.add("toggle-basemap-container"),new ERe({view:d,container:m,nextBasemap:new Lf({portalItem:{id:e.config.nextBasemap.portalItemId}})});const y=new vRe({view:d,includeDefaultSources:!1,sources:[{layer:new $P({url:e.config.search.layerUrl,outFields:["*"],definitionExpression:e.config.search.layerUrl.definitionExpression}),searchFields:e.config.search.layerUrl.searchFields,displayField:e.config.search.layerUrl.displayField,exactMatch:!1,outFields:["*"],name:"Adresn msta",placeholder:"Hledat adresu",maxResults:6,maxSuggestions:6,suggestionsEnabled:!0,minSuggestCharacters:3,popupEnabled:!1,resultSymbol:{type:"simple-marker",size:"12px",color:[0,0,0,0],outline:{color:[217,0,18],width:2}}}]});d.ui.add(y,"manual"),d.ui.add(h,"top-left"),d.ui.move(["zoom"],"top-left"),d.ui.add(f,"top-left"),d.ui.add(m,"manual"),d.ui.add(o.current,"manual"),d.when(()=>{e.loaded(!0),e.setVisibleLayers(d,null),r(d)})}},[s]),ze.jsxs("div",{className:"map-div",ref:s,children:[ze.jsxs("div",{ref:o,title:"Tmata a oblasti parkovn",className:"app-button",onClick:a,children:[ze.jsx("div",{className:"icon"}),ze.jsx("div",{className:"label",children:"Tmata a oblasti parkovn"})]}),ze.jsx(FRe,{opened:i,toggleAppWidget:a,view:t,config:e.config,setActualTheme:e.setActualTheme,actualThemeInfo:e.actualThemeInfo,setVisibleLayers:e.setVisibleLayers})]})}nU("https://js.arcgis.com/calcite-components/2.13.2/assets");function jRe(){const[e,t]=jr.useState(new URLSearchParams(window.location.search).get("theme")),r=544,[i,n]=jr.useState(window.innerWidth);jr.useState(i>r);const[s,o]=jr.useState(null),[a,u]=jr.useState(!1);jr.useState(null);const d=g=>{u(g)},h=async()=>(await fetch("./config.json")).json(),f=g=>{const v=s==null?void 0:s.appThemes.filter(_=>{if(_.name===g)return _});return(v==null?void 0:v.length)>0?v[0]:s==null?void 0:s.appThemes[0]},m=g=>{t(g)},y=(g,v)=>{let _=f(v||e);g.map.layers.forEach(w=>{w.visible=!1,_.visibleLayers.includes(w.title)&&(w.visible=!0)})};return jr.useEffect(()=>{(async()=>{const v=await h();o(v)})();const g=()=>n(window.innerWidth);return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]),ze.jsxs(ze.Fragment,{children:[!a&&ze.jsx("calcite-loader",{}),ze.jsxs(zie,{"content-behind":!0,children:[ze.jsx("div",{slot:"header",children:ze.jsx(Bie,{appTitle:s?s.appTitle:"",appLogoLink:s?s.appLogoLink:"",actualThemeInfo:f(e)})}),s&&ze.jsx(DRe,{config:s,loaded:d,setVisibleLayers:y,setActualTheme:m,actualThemeInfo:f(e)})]})]})}Xx.createRoot(document.getElementById("root")).render(ze.jsx(jRe,{}));export{qe as $,fr as A,VJ as B,VRe as C,uf as D,Hk as E,Js as F,me as G,eU as H,PRe as I,GJ as J,aC as K,_Ne as L,hr as M,n4e as N,i$ as O,l as P,c as Q,UCe as R,Ho as S,ENe as T,hye as U,q6e as V,_oe as W,$ as X,N as Y,E2 as Z,D as _,b$e as a,Gd as a$,B as a0,Hv as a1,b$ as a2,S$ as a3,Le as a4,zCe as a5,gve as a6,pke as a7,wNe as a8,O$e as a9,k1e as aA,Y as aB,Ti as aC,BNe as aD,N2 as aE,np as aF,Zo as aG,Si as aH,txe as aI,ixe as aJ,nxe as aK,cxe as aL,mxe as aM,bK as aN,wK as aO,_K as aP,fxe as aQ,_xe as aR,bxe as aS,LZ as aT,obe as aU,Ibe as aV,Y3 as aW,uc as aX,Cm as aY,o$ as aZ,yG as a_,gCe as aa,IU as ab,nOe as ac,HR as ad,xre as ae,KRe as af,iU as ag,ge as ah,D0 as ai,j as aj,_be as ak,_t as al,OTe as am,kTe as an,PTe as ao,L as ap,C as aq,QK as ar,Yo as as,b6e as at,Wj as au,_n as av,Dfe as aw,Lfe as ax,rp as ay,SFe as az,GRe as b,Zke as b$,IO as b0,mG as b1,rF as b2,$Le as b3,tPe as b4,Cz as b5,_p as b6,URe as b7,sOe as b8,zRe as b9,KS as bA,hFe as bB,fG as bC,O5e as bD,vSe as bE,rD as bF,nD as bG,sD as bH,iD as bI,Tr as bJ,VPe as bK,zPe as bL,UPe as bM,Kn as bN,Zi as bO,os as bP,rz as bQ,Ui as bR,bi as bS,uS as bT,Z1 as bU,pPe as bV,ZW as bW,ele as bX,Fd as bY,s6 as bZ,o6 as b_,eOe as ba,Do as bb,Ae as bc,ca as bd,My as be,yie as bf,die as bg,BRe as bh,WRe as bi,uie as bj,qRe as bk,HRe as bl,xU as bm,X3 as bn,oD as bo,JS as bp,Up as bq,Po as br,BU as bs,HU as bt,WU as bu,pOe as bv,Yie as bw,POe as bx,rFe as by,SD as bz,b2 as c,ar as c$,Be as c0,UC as c1,HOe as c2,Gk as c3,qOe as c4,Od as c5,em as c6,fke as c7,G as c8,kpe as c9,nc as cA,pl as cB,jNe as cC,u$ as cD,qi as cE,ine as cF,Oe as cG,ce as cH,zt as cI,hc as cJ,l6e as cK,Dm as cL,st as cM,gl as cN,hl as cO,cc as cP,io as cQ,ro as cR,SM as cS,gt as cT,bM as cU,TM as cV,gS as cW,KB as cX,HZ as cY,ie as cZ,ov as c_,FL as ca,Or as cb,Av as cc,gge as cd,zNe as ce,GNe as cf,APe as cg,RPe as ch,ec as ci,PPe as cj,kPe as ck,Xu as cl,OPe as cm,Ik as cn,ve as co,le as cp,xDe as cq,MDe as cr,EDe as cs,sEe as ct,nEe as cu,u0 as cv,D_e as cw,k4e as cx,xe as cy,N4e as cz,ic as d,F2 as d$,ZS as d0,ZZ as d1,dD as d2,ut as d3,Pve as d4,bT as d5,je as d6,Uv as d7,YI as d8,fPe as d9,dDe as dA,sF as dB,l0 as dC,p3 as dD,a6e as dE,o6e as dF,iae as dG,HDe as dH,KDe as dI,U5 as dJ,vge as dK,pp as dL,ime as dM,YDe as dN,_e as dO,X as dP,cs as dQ,SLe as dR,cPe as dS,Wke as dT,ZU as dU,JU as dV,sae as dW,_O as dX,bO as dY,oae as dZ,L2 as d_,fLe as da,TLe as db,rc as dc,Eq as dd,te as de,Aye as df,$je as dg,B0 as dh,Vd as di,QE as dj,lSe as dk,NU as dl,nIe as dm,lCe as dn,hIe as dp,B5 as dq,sH as dr,Me as ds,ICe as dt,Z6e as du,WEe as dv,Am as dw,Ioe as dx,ZEe as dy,s6e as dz,Je as e,J7 as e$,Lv as e0,Z0 as e1,C7 as e2,pK as e3,Mk as e4,sge as e5,UNe as e6,OO as e7,Rv as e8,Gye as e9,IZ as eA,Sbe as eB,Kke as eC,Fq as eD,pc as eE,pbe as eF,Tme as eG,SS as eH,Rke as eI,S6e as eJ,Sm as eK,jv as eL,aCe as eM,Z3e as eN,X3e as eO,I$ as eP,bIe as eQ,vIe as eR,gIe as eS,Br as eT,Ki as eU,km as eV,ea as eW,yc as eX,OMe as eY,sIe as eZ,RMe as e_,SH as ea,wge as eb,HNe as ec,$H as ed,qNe as ee,hn as ef,Qke as eg,ji as eh,D2 as ei,HO as ej,CZ as ek,OZ as el,NZ as em,Z_e as en,H_e as eo,wn as ep,OOe as eq,u7 as er,Xf as es,yO as et,Xne as eu,KO as ev,Ale as ew,r4e as ex,W_e as ey,kZ as ez,UJ as f,Epe as f$,X_e as f0,ebe as f1,$be as f2,wIe as f3,fz as f4,I2 as f5,ik as f6,Dv as f7,K0 as f8,Iu as f9,yu as fA,U0 as fB,IW as fC,Ne as fD,Mv as fE,lke as fF,gke as fG,zj as fH,Bre as fI,qre as fJ,dl as fK,Gde as fL,lOe as fM,JTe as fN,vLe as fO,ELe as fP,qd as fQ,R2 as fR,IOe as fS,Hu as fT,MOe as fU,yl as fV,Qo as fW,il as fX,IL as fY,NCe as fZ,_w as f_,yn as fa,Mfe as fb,P2 as fc,Ife as fd,EY as fe,cke as ff,gNe as fg,Jo as fh,tS as fi,x2 as fj,dCe as fk,Sje as fl,vS as fm,pr as fn,t$ as fo,yCe as fp,CS as fq,ke as fr,Mp as fs,$P as ft,sPe as fu,bpe as fv,dPe as fw,iPe as fx,cr as fy,o4 as fz,Zre as g,as as g$,o_ as g0,Cke as g1,mke as g2,ls as g3,ZIe as g4,MMe as g5,Hj as g6,ob as g7,_6e as g8,_A as g9,Zde as gA,sO as gB,cZ as gC,B3 as gD,pm as gE,dZ as gF,uwe as gG,Vk as gH,LL as gI,P_ as gJ,KT as gK,Sv as gL,iS as gM,EOe as gN,uD as gO,ep as gP,y7 as gQ,dO as gR,rPe as gS,hbe as gT,nwe as gU,xr as gV,owe as gW,uZ as gX,aIe as gY,_m as gZ,Rt as g_,jU as ga,oO as gb,Jde as gc,Kde as gd,Yde as ge,V2 as gf,Ome as gg,qde as gh,kme as gi,Wme as gj,bt as gk,bp as gl,lf as gm,j2 as gn,Bw as go,YM as gp,mPe as gq,Iv as gr,kre as gs,rOe as gt,jke as gu,Ve as gv,T5e as gw,kLe as gx,$Pe as gy,fn as gz,uL as h,SIe as h$,xv as h0,Ir as h1,LCe as h2,ywe as h3,Xke as h4,rwe as h5,Lke as h6,KL as h7,M7 as h8,I7 as h9,V$ as hA,Wx as hB,AA as hC,hP as hD,F$ as hE,QEe as hF,yIe as hG,SP as hH,pCe as hI,Iye as hJ,Mye as hK,Sye as hL,dI as hM,Uo as hN,Wi as hO,dn as hP,bOe as hQ,l4 as hR,AY as hS,Bu as hT,Coe as hU,Wo as hV,ts as hW,T2 as hX,cv as hY,gP as hZ,$Ie as h_,Lq as ha,nbe as hb,Dq as hc,gme as hd,Yke as he,tae as hf,o5 as hg,GPe as hh,BPe as hi,k as hj,Sme as hk,Xde as hl,a$ as hm,yOe as hn,fbe as ho,ibe as hp,Ope as hq,dp as hr,Q3e as hs,H3e as ht,cIe as hu,J5 as hv,fH as hw,vCe as hx,TIe as hy,fP as hz,_$e as i,one as i$,_Ie as i0,mP as i1,XRe as i2,QRe as i3,gie as i4,iOe as i5,_S as i6,tD as i7,l4e as i8,lwe as i9,bNe as iA,Uw as iB,Wde as iC,Y_e as iD,Mbe as iE,Cbe as iF,fwe as iG,gxe as iH,rae as iI,zB as iJ,N$ as iK,uae as iL,Bde as iM,zS as iN,Q_e as iO,AZ as iP,RS as iQ,Fm as iR,lbe as iS,PZ as iT,l$ as iU,vve as iV,Ak as iW,_ve as iX,bve as iY,A_ as iZ,MY as i_,MD as ia,eD as ib,gOe as ic,Ese as id,Xs as ie,es as ig,ot as ih,RM as ii,AS as ij,Ple as ik,$ke as il,Tke as im,xke as io,Eke as ip,Mke as iq,Ike as ir,Ov as is,he as it,aOe as iu,eC as iv,d0 as iw,iZ as ix,ak as iy,HB as iz,oU as j,g5e as j$,J0 as j0,EMe as j1,v3e as j2,oIe as j3,RIe as j4,QIe as j5,UIe as j6,t7 as j7,a7 as j8,Ape as j9,PIe as jA,BIe as jB,NIe as jC,LIe as jD,FIe as jE,DIe as jF,jIe as jG,VIe as jH,CY as jI,ese as jJ,vi as jK,DM as jL,JB as jM,Ur as jN,i4e as jO,roe as jP,XK as jQ,aye as jR,lye as jS,XF as jT,p5e as jU,h5e as jV,v5e as jW,w5e as jX,f5e as jY,m5e as jZ,y5e as j_,CJ as ja,zFe as jb,vY as jc,eO as jd,ah as je,IIe as jf,j6e as jg,r3e as jh,i3e as ji,Us as jj,wm as jk,_l as jl,aP as jm,dK as jn,SDe as jo,zIe as jp,qIe as jq,mIe as jr,lK as js,aK as jt,oK as ju,JIe as jv,CIe as jw,AIe as jx,Nz as jy,kIe as jz,JRe as k,dAe as k$,P$ as k0,Tm as k1,bn as k2,NOe as k3,$O as k4,Gae as k5,lPe as k6,U2 as k7,mle as k8,rS as k9,OSe as kA,tC as kB,eFe as kC,lD as kD,Zn as kE,qZ as kF,Ua as kG,aD as kH,tFe as kI,QF as kJ,sle as kK,nle as kL,Uke as kM,uPe as kN,WS as kO,x5e as kP,E5e as kQ,M5e as kR,gSe as kS,uDe as kT,cDe as kU,lDe as kV,DK as kW,Vae as kX,Wae as kY,Cv as kZ,Fke as k_,ple as ka,gk as kb,mLe as kc,hLe as kd,wse as ke,WOe as kf,KR as kg,YR as kh,Fe as ki,us as kj,S as kk,_ke as kl,_v as km,tOe as kn,Ji as ko,ta as kp,Cp as kq,H as kr,kB as ks,M2e as kt,Nhe as ku,Qie as kv,uke as kw,aoe as kx,k2 as ky,yke as kz,BFe as l,FW as l$,hp as l0,H7 as l1,Fw as l2,wOe as l3,_Oe as l4,vOe as l5,ml as l6,Soe as l7,mf as l8,fp as l9,Ase as lA,mOe as lB,Kie as lC,oPe as lD,Lge as lE,hm as lF,kNe as lG,YIe as lH,Wu as lI,l8 as lJ,Y0 as lK,cCe as lL,xme as lM,yme as lN,vme as lO,gse as lP,mr as lQ,fde as lR,U0e as lS,mW as lT,V0e as lU,L5e as lV,qW as lW,aZ as lX,iv as lY,Rk as lZ,z3 as l_,JSe as la,YSe as lb,QSe as lc,Tje as ld,Fv as le,xje as lf,Ebe as lg,kwe as lh,Pwe as li,Zie as lj,bLe as lk,Nve as ll,RZ as lm,qDe as ln,pG as lo,Bke as lp,wt as lq,Ev as lr,UH as ls,SZ as lt,Gle as lu,Vz as lv,QOe as lw,YOe as lx,N2e as ly,Rse as lz,NRe as m,Pme as m$,qv as m0,$Oe as m1,ASe as m2,hZ as m3,lH as m4,Qu as m5,rIe as m6,iIe as m7,uIe as m8,P3e as m9,Hp as mA,cD as mB,X5e as mC,RSe as mD,mD as mE,fD as mF,cwe as mG,_De as mH,nP as mI,wDe as mJ,xd as mK,wi as mL,T6e as mM,vfe as mN,kH as mO,x6e as mP,V_e as mQ,wve as mR,sue as mS,wke as mT,fFe as mU,cLe as mV,uLe as mW,e0e as mX,pLe as mY,dLe as mZ,fO as m_,Y3e as ma,qU as mb,c7 as mc,ake as md,A7 as me,zL as mf,Iq as mg,v2e as mh,vke as mi,kt as mj,R6e as mk,gDe as ml,KTe as mm,ePe as mn,swe as mo,Kve as mp,qve as mq,Bv as mr,Jke as ms,lk as mt,mFe as mu,dke as mv,Pz as mw,Ou as mx,rP as my,uTe as mz,wU as n,d5e as n$,Rme as n0,sbe as n1,Ame as n2,i0e as n3,Iz as n4,sv as n5,Iwe as n6,GEe as n7,zEe as n8,PLe as n9,W1e as nA,Df as nB,c4e as nC,vDe as nD,dme as nE,Cy as nF,INe as nG,to as nH,cp as nI,jye as nJ,Lye as nK,$3e as nL,q5e as nM,GZ as nN,j6 as nO,G6 as nP,Dke as nQ,zDe as nR,W5e as nS,H5e as nT,o5e as nU,a5e as nV,a6 as nW,jo as nX,u1e as nY,_$ as nZ,kM as n_,NLe as na,LLe as nb,Ks as nc,CP as nd,Lm as ne,Jk as nf,rTe as ng,iTe as nh,O$ as ni,YJ as nj,TTe as nk,iK as nl,r2 as nm,ZJ as nn,h0 as no,$5e as np,$D as nq,l5e as nr,o$e as ns,dr as nt,T$ as nu,$Ne as nv,tZ as nw,nZ as nx,D1e as ny,u4e as nz,ZRe as o,k5e as o$,c1e as o0,BW as o1,ID as o2,QZ as o3,U5e as o4,z5e as o5,G5e as o6,B5e as o7,C5e as o8,R5e as o9,ADe as oA,GC as oB,GDe as oC,IK as oD,$De as oE,ODe as oF,CDe as oG,pEe as oH,lEe as oI,RDe as oJ,fj as oK,pj as oL,hj as oM,DDe as oN,FDe as oO,jDe as oP,VDe as oQ,aEe as oR,L$ as oS,F5e as oT,kk as oU,nl as oV,cEe as oW,N5e as oX,P5e as oY,TDe as oZ,PSe as o_,A5e as oa,KSe as ob,lr as oc,Yk as od,s5e as oe,JDe as of,u6 as og,Jg as oh,lIe as oi,VNe as oj,NNe as ok,FNe as ol,LNe as om,DNe as on,$i as oo,WNe as op,dFe as oq,pL as or,PNe as os,pFe as ot,Eae as ou,xae as ov,Pke as ow,cne as ox,BDe as oy,zC as oz,gU as p,b8 as p$,xD as p0,u5e as p1,c5e as p2,j5e as p3,D5e as p4,Z5e as p5,J5e as p6,_5e as p7,K5e as p8,Y5e as p9,Rhe as pA,Gn as pB,Ahe as pC,Kx as pD,ck as pE,eb as pF,dOe as pG,Age as pH,SW as pI,E2e as pJ,Cge as pK,Q0 as pL,ev as pM,dm as pN,SOe as pO,H6e as pP,W6e as pQ,xFe as pR,V6e as pS,MRe as pT,kje as pU,T5 as pV,Pje as pW,Nje as pX,wRe as pY,E$ as pZ,Oje as p_,ySe as pa,_Se as pb,I5e as pc,pJ as pd,Qf as pe,V5e as pf,hke as pg,R1e as ph,ZB as pi,dwe as pj,Nk as pk,aFe as pl,lFe as pm,uFe as pn,WSe as po,YZ as pp,b5e as pq,S5e as pr,BSe as ps,cFe as pt,n5e as pu,Mge as pv,NPe as pw,Te as px,V1 as py,KPe as pz,hie as q,wae as q$,yAe as q0,Dz as q1,xP as q2,Vv as q3,MPe as q4,R7 as q5,rue as q6,t6e as q7,e6e as q8,YF as q9,w6 as qA,d6 as qB,p6 as qC,h6 as qD,O6 as qE,sj as qF,lj as qG,_6 as qH,f$ as qI,nPe as qJ,kDe as qK,PDe as qL,MCe as qM,Fr as qN,Loe as qO,wLe as qP,_Le as qQ,Kme as qR,Jme as qS,rv as qT,GW as qU,wl as qV,b7 as qW,vO as qX,MM as qY,LPe as qZ,j7 as q_,s4 as qa,I6 as qb,$6 as qc,Kae as qd,T6 as qe,Vke as qf,dEe as qg,V6 as qh,x6 as qi,hPe as qj,R6 as qk,Z6 as ql,J6 as qm,K6 as qn,gle as qo,qke as qp,Xae as qq,Y6 as qr,Hke as qs,MLe as qt,twe as qu,IDe as qv,UDe as qw,NDe as qx,LDe as qy,oj as qz,pie as r,xLe as r$,vae as r0,b1e as r1,Ok as r2,zke as r3,rle as r4,Gve as r5,VW as r6,zW as r7,BS as r8,bbe as r9,aDe as rA,xNe as rB,Vve as rC,Uve as rD,gbe as rE,bDe as rF,bo as rG,Lve as rH,Wv as rI,Hie as rJ,sS as rK,fOe as rL,Lme as rM,Zme as rN,vK as rO,Vme as rP,TNe as rQ,cOe as rR,qie as rS,uOe as rT,gLe as rU,yLe as rV,iFe as rW,kxe as rX,Axe as rY,Pxe as rZ,aPe as r_,GS as ra,Xve as rb,kle as rc,Yve as rd,Fve as re,Ake as rf,Yhe as rg,kke as rh,gae as ri,bke as rj,Ske as rk,Mse as rl,I2e as rm,SNe as rn,U7 as ro,wS as rp,Oke as rq,tv as rr,Gz as rs,w$ as rt,Ove as ru,e1e as rv,Rxe as rw,t1e as rx,Gke as ry,NF as rz,R as s,dc as s0,qPe as s1,WPe as s2,yFe as s3,sDe as s4,I6e as s5,U6e as s6,bie as t,GFe as u,YRe as v,up as w,KFe as x,fye as y,Ht as z};
