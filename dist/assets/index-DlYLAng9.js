const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./statsWorker-D4jtU5DE.js","./utils-D7mFJ4zG.js","./utils-bEY7ozZk.js","./ClassBreaksDefinition-C-8GkdwH.js","./geometryEngineWorker-Bqj7rl3F.js","./geometryEngineJSON-B9tQWDOK.js","./json-Wa8cmqdu.js","./CSVSourceWorker-mERCYZ0l.js","./date-DLgTylpo.js","./FeatureStore-OiYYHaG-.js","./featureConversionUtils-BW6X6Me-.js","./BoundsStore-B6btcM2X.js","./PooledRBush-tuK_-OKr.js","./timeSupport-CKADg2Zd.js","./queryUtils-D455-WeM.js","./optimizedFeatureQueryEngineAdapter-SbP_34QS.js","./centroid-DdLmOD72.js","./QueryEngine-C0j_YkU4.js","./WhereClause-DvvXrPqq.js","./QueryEngineCapabilities-DjYb9CEb.js","./SnappingCandidate-O5eRSE6e.js","./number-6Gv_gG75.js","./clientSideDefaults-DBqmJrT3.js","./capabilities-Y9lFlGVh.js","./EdgeProcessingWorker-BcKUEdLz.js","./workerHelper-C_Aeqm1i.js","./InterleavedLayout-dLRV2bPJ.js","./BufferView-BZkdS9-S.js","./types-D0PSWh4d.js","./Util-U83NQdF9.js","./edgeProcessing-C95r-tFW.js","./deduplicate-CeM2ZT6M.js","./Indices-Dt1mee1f.js","./VertexAttribute-Cq4MnHjR.js","./glUtil-Qwn7SQT0.js","./VertexElementDescriptor-BOD-G50G.js","./Normals-BGsWqzzQ.js","./ElevationSamplerWorker-B5sKu5JR.js","./MeshLocalVertexSpace-C75Ge6Eg.js","./vertexSpaceConversion-BySMILg1.js","./spatialReferenceEllipsoidUtils-DnxvYBuR.js","./computeTranslationToOriginAndRotation-DTSr9xyo.js","./meshVertexSpaceUtils-CIoe51m7.js","./vec3-Cqby1b-t.js","./vec4-DZ90zUZw.js","./FeatureServiceSnappingSourceWorker-CGv86oJY.js","./symbologySnappingCandidates-C4v8HDwj.js","./GeoJSONSourceWorker-tUZuWBQ5.js","./geojson-CF8ytgOf.js","./sourceUtils-GNtyDEyF.js","./MemorySourceWorker-DVq7sMJq.js","./objectIdUtils-4dd1rf9p.js","./PBFDecoderWorker-B8vWACD7.js","./dehydratedFeatures-BRQ0rwup.js","./FeaturePipelineWorker--U3SQJFM.js","./AttributeStore-B-wW5Lnq.js","./LabelMetric-Bi7T9Xtj.js","./Program-1C7xHKi7.js","./BufferObject-BoUktkYr.js","./BoundingBox-Bc4_8-kv.js","./CIMSymbolHelper-DjPta98G.js","./BidiEngine-DNnuvc1i.js","./fontUtils-BD4sdIhk.js","./GeometryUtils-Cq9CNqLc.js","./Rect-CUzevAry.js","./UpdateTracking2D-eGeFwY6o.js","./BindType-BmZEZMMh.js","./MeshWriterRegistry-DpBuXrx1.js","./PieChartMeshWriter-CKDRhpcD.js","./TurboLine-CIA0gnrr.js","./earcut-Lltz9D9k.js","./constants-F8oTIn7N.js","./grouping-CrrkjPpj.js","./ogcFeatureUtils-DkNJOuoq.js","./CircularArray-CujHzHWW.js","./createConnection-Z2ASUwce.js","./PointCloudWorker-CFwkJnE9.js","./quat-C0pgtFsO.js","./vec3f32-nZdmKIgz.js","./PointCloudUniqueValueRenderer-iK_IBlsp.js","./I3SBinaryReader-BLk_rGDG.js","./orientedBoundingBox-Dm6vNPPC.js","./RasterWorker-BZvxtC__.js","./dataUtils-BHYzfIqy.js","./RasterSymbolizer-C_GnhOQa.js","./PolynomialTransform-BOfonpcH.js","./rasterProjectionHelper-DqT3kmaV.js","./SceneLayerSnappingSourceWorker-DPPjuCGe.js","./lineSegment-DGUkrBK2.js","./Octree-DJA4oTEx.js","./SceneLayerWorker-C4GCgUHz.js","./I3SUtil-Cn-lnPLw.js","./edgeUtils-HELoX4g9.js","./floatRGBA-Bbrv7M8l.js","./symbolColorUtils-DzgzBikr.js","./interfaces-DDtDqZYj.js","./NormalAttribute.glsl-BwMPPyY4.js","./WFSSourceWorker-CEqovzne.js","./wfsUtils-BAFHXk4_.js","./xmlUtils-CtUoQO7q.js","./WorkerTileHandler-Cm44rNky.js","./enums-BRzLM11V.js","./config-MDUrh2eL.js","./StyleDefinition-KZfPmCwd.js","./SourceLayerData-C46tJcVt.js","./StyleRepository-D8UqZ48y.js","./Feature3DPipelineWorker-Dh5Bagen.js","./projectVectorToPoint-CoK9PLY_.js","./Geometry--XMmyy_V.js","./renderState-Cbuk9Tzl.js","./basicInterfaces-CZwQPxTp.js","./boundedPlane-BTv8VpRF.js","./requestImageUtils-ClkwRbxa.js","./triangle-oOuv5YkR.js","./HUDMaterial.glsl-D2LMmHel.js","./NestedMap-GuqgquCN.js","./VertexArrayObject-DeWTJQd0.js","./dehydratedFeatureUtils-D4EhkVql.js","./IntersectorInterfaces-BgX4KEwK.js","./doublePrecisionUtils-B0owpBza.js","./hydratedFeatures-CSsaIKxp.js","./RealisticTree.glsl-Df-bLD_t.js","./LodResources-BT49sdOV.js","./ElevationLayer-Kaut7An-.js","./ArcGISCachedService-DMPoT3Ol.js","./TileInfoTilemapCache-DnU1d6T5.js","./TilemapCache-GsLDqPmK.js","./WorkerHandle-CGCWnY6c.js","./layersCreator-Bg_-AcQ5.js","./portalLayers-B1JsFSpE.js","./associatedFeatureServiceUtils-C4z0_BRE.js","./fetchService-B76mZoHO.js","./arcgisLayers-C3-9jXCT.js","./arcadeUtils-nY7fQzuv.js","./languageUtils-B3Yo0q63.js","./ImmutableArray-BPVd6ESQ.js","./webglDeps-DNQF78mD.js","./ProgramTemplate-Bbtp28iQ.js","./mapViewDeps-DHLK-bI0.js","./FeatureCommandQueue-BgYzzNE4.js","./WGLContainer-CDyq8x0N.js","./Container-DNhWkwGM.js","./SDFHelper-AdC21uLn.js","./GridShader-DIsxEmV8.js","./testSVGPremultipliedAlpha-BO5Tw8DN.js","./RenderingContext-Bkonvqu-.js","./CIMResourceManager-YQDcbSJA.js","./rasterizingUtils-m9IA4M_m.js","./utils-BOgHfln_.js","./GraphicsView2D-B8zeFJ8J.js","./normalizeUtilsSync-CABBgj2K.js","./GraphicContainer-DWW7qK93.js","./AGraphicContainer-rUre69u_.js","./TechniqueInstance-CAFaoVnc.js","./TileContainer-BC0_mnrL.js","./gridUtils-AZ8NxtDL.js","./TileLayerView2D-6C--jOJI.js","./imageUtils-C6ja6R6Z.js","./Bitmap-BaNe4uF6.js","./LayerView2D-PMZDtiB4.js","./HighlightGraphicContainer-D_XeoT4y.js","./LayerView-CavNcmMx.js","./RefreshableLayerView-DNvp17Jm.js","./MapServiceLayerViewHelper-2yAwfqhY.js","./drapedUtils-Bq_vau89.js","./highlightUtils-CF3AwpLV.js","./popupUtils-BYrdL4Vw.js","./FeatureLayerView2D-DnzkkqRo.js","./timeSupport-48IRyqNW.js","./HighlightCounter-Czi-fdpx.js","./BaseDynamicLayerView2D-QvYONtKo.js","./BitmapContainer-Afiuq5ZE.js","./ExportStrategy-xqSnIBSA.js","./CatalogLayerView2D-DFFcnACj.js","./CatalogDynamicGroupLayerView2D-D9eGdeJA.js","./CatalogFootprintLayerView2D-C9PAUhdh.js","./GeoRSSLayerView2D-B3VdJ2Fv.js","./GraphicsLayerView2D-kjw1mym4.js","./GroupLayerView2D-tp1qBLBe.js","./ImageryLayerView2D-D2J87j7R.js","./RasterVFDisplayObject-HesPQ6iz.js","./ImageryTileLayerView2D-Br4PqM1B.js","./multidimensionalUtils-yGP7xRgr.js","./rasterUtils-De6sSTvo.js","./RawBlockCache-ClLF7yyZ.js","./KMLLayerView2D-D56p5pcO.js","./kmlUtils-KDIp-o8p.js","./KnowledgeGraphLayerView2D-C656q44c.js","./MapImageLayerView2D-DVS-0ffz.js","./MapNotesLayerView2D-CwCI_e6i.js","./MediaLayerView2D-DxRfWIQn.js","./perspectiveUtils-B8w0RbIA.js","./OverlayContainer-CB1iNStk.js","./OGCFeatureLayerView2D-gVOAwp8t.js","./RouteLayerView2D-BrPClVL9.js","./Stop-U0rnqHMl.js","./StreamLayerView2D-nVrn28Fb.js","./SubtypeGroupLayerView2D-CxXhfS-i.js","./VectorTileLayerView2D-ByearBI-.js","./VideoLayerView2D-DBln9Blj.js","./TelemetryDisplay-Ntv5FdHu.js","./WMSLayerView2D--q1D-xFI.js","./ExportWMSImageParameters-1avYsvdF.js","./WMTSLayerView2D-DWVxrTJi.js","./calcite-button-DicafOzy.js","./loader-B67E5FsB.js","./chartUtilsAm5-DskUoJxF.js","./Theme-Bum7wF4p.js","./Tooltip-ClsGZere.js","./DefaultTheme-BptvJMCx.js","./chartCommon-DN7t_6OL.js","./Button-DBnR95_6.js","./ColorSet-Dl-iNCBx.js","./pieChart-DsCJwepM.js","./Tick-B6O9PFeP.js","./xyChart-BLUqqOPc.js","./editingSupport-BlQGD5l8.js","./infoFor3D-CxdEiWhp.js","./layersLoader-C2CycyYh.js","./featureLayerUtils-CjeWP9Gz.js","./originUtils-D69mHv66.js","./multiOriginJSONSupportUtils-C0wm8_Yw.js","./utils-KwTwq1Mr.js","./saveUtils-Cp__g180.js","./FeatureLayerSource-BD67Kgx7.js","./External-CV891tAU.js","./MeshTransform-Db1x8PEj.js","./axisAngleDegrees-DfBCPUqO.js","./QueryTask-DkxKeyKs.js","./executeForIds-9ljFn8KG.js","./BinsQuery-Cv_d_iYZ.js","./arcade-DeowIB1O.js","./calcite-loader-BYXdEs7m.js","./calcite-list-BrvAaUx7.js","./resources4-DXHY1U7R.js","./utils3-DsFkS0Nt.js","./scrim-C07_c0wp.js","./calcite-list-item-DzQsSgvs.js","./action-kb2OeX0q.js","./calcite-notice-kwETwl5K.js","./openCloseComponent-DHX9xFaL.js","./calcite-tooltip-D9jVgGfo.js","./floating-ui-CyX9hTmg.js","./FloatingArrow-BK9_5w2j.js","./calcite-action-e0C_v5mP.js","./calcite-action-bar-Cuj6u15i.js","./action-group-CBd0bDBZ.js","./action-menu-flr59Ml7.js","./popover-BGA4VPTu.js","./focusTrapComponent-FZFxibrf.js","./calcite-action-group-BStvxvBS.js","./calcite-flow-item-CXm7AXI6.js","./panel-D_K5ceHy.js","./previewSymbol2D-DflDHZZp.js","./previewCIMSymbol-DPl0lBtI.js","./CIMSymbolRasterizer-DDkyORPm.js","./calcite-list-item-group-DrRzBCt3.js","./webdocSaveUtils-CH79mBab.js","./resourceUtils-DIbgrTQJ.js","./resourceUtils-cvK32z0R.js","./calcite-scrim-BD0qYNLH.js","./calcite-panel-CrVqPt0j.js","./calcite-popover-TtlNlgf_.js","./calcite-sheet-DOKqFMeX.js","./calcite-action-menu-B4SGbHT0.js","./SelfSnappingEngine-CAqt-InQ.js","./geodesicLengthMeasurementUtils-BfpERgYc.js","./GridSnappingEngine-CoGFPB52.js","./editingTools-CT1tL42F.js","./SnappingVisualizer2D-BST0GCGH.js","./SnappingContext-xSmZ5pmI.js","./PointSnappingHint-C_AFX4Wv.js","./automaticLengthMeasurementUtils-g8raq8PQ.js","./memoize-DsJmrG76.js","./editPlaneUtils-D0stdHaV.js","./GraphicManipulator-Cx9V90Lp.js","./drawUtils-MtqUR4Z_.js","./ImageMaterial.glsl-tzqoBoHj.js","./RibbonLine.glsl-BcJL_TI8.js","./DefaultLayouts-C1CRL0Mi.js","./triangulationUtils-CJXqxyIv.js","./SelectedVertexTooltipInfo-DCrv_PWf.js","./TranslateTooltipInfo-DUMndi02.js","./persistable-Bs25ezWM.js","./resourceExtension-DWn4bSKk.js","./ExtentScaleTooltipInfo-DG5vK4KS.js","./LineCallout.glsl-yTAqaJw0.js","./geometryServiceUtils-CfUYqhL3.js","./GraphicMover-T_eSXt7I.js","./Box-CkNHzMZE.js","./settings-CqXxJvWx.js","./Reshape-m2XiJIHc.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();function aY(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lY={exports:{}},p6={},uY={exports:{}},Bt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_=Symbol.for("react.element"),D0e=Symbol.for("react.portal"),j0e=Symbol.for("react.fragment"),z0e=Symbol.for("react.strict_mode"),V0e=Symbol.for("react.profiler"),U0e=Symbol.for("react.provider"),G0e=Symbol.for("react.context"),B0e=Symbol.for("react.forward_ref"),q0e=Symbol.for("react.suspense"),H0e=Symbol.for("react.memo"),W0e=Symbol.for("react.lazy"),iz=Symbol.iterator;function Z0e(e){return e===null||typeof e!="object"?null:(e=iz&&e[iz]||e["@@iterator"],typeof e=="function"?e:null)}var cY={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hY=Object.assign,dY={};function a2(e,t,i){this.props=e,this.context=t,this.refs=dY,this.updater=i||cY}a2.prototype.isReactComponent={};a2.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};a2.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function pY(){}pY.prototype=a2.prototype;function QR(e,t,i){this.props=e,this.context=t,this.refs=dY,this.updater=i||cY}var eP=QR.prototype=new pY;eP.constructor=QR;hY(eP,a2.prototype);eP.isPureReactComponent=!0;var rz=Array.isArray,fY=Object.prototype.hasOwnProperty,tP={current:null},yY={key:!0,ref:!0,__self:!0,__source:!0};function mY(e,t,i){var r,n={},o=null,u=null;if(t!=null)for(r in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(o=""+t.key),t)fY.call(t,r)&&!yY.hasOwnProperty(r)&&(n[r]=t[r]);var f=arguments.length-2;if(f===1)n.children=i;else if(1<f){for(var g=Array(f),b=0;b<f;b++)g[b]=arguments[b+2];n.children=g}if(e&&e.defaultProps)for(r in f=e.defaultProps,f)n[r]===void 0&&(n[r]=f[r]);return{$$typeof:B_,type:e,key:o,ref:u,props:n,_owner:tP.current}}function J0e(e,t){return{$$typeof:B_,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function iP(e){return typeof e=="object"&&e!==null&&e.$$typeof===B_}function K0e(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var nz=/\/+/g;function S$(e,t){return typeof e=="object"&&e!==null&&e.key!=null?K0e(""+e.key):t.toString(36)}function Hx(e,t,i,r,n){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(o){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case B_:case D0e:u=!0}}if(u)return u=e,n=n(u),e=r===""?"."+S$(u,0):r,rz(n)?(i="",e!=null&&(i=e.replace(nz,"$&/")+"/"),Hx(n,t,i,"",function(b){return b})):n!=null&&(iP(n)&&(n=J0e(n,i+(!n.key||u&&u.key===n.key?"":(""+n.key).replace(nz,"$&/")+"/")+e)),t.push(n)),1;if(u=0,r=r===""?".":r+":",rz(e))for(var f=0;f<e.length;f++){o=e[f];var g=r+S$(o,f);u+=Hx(o,t,i,g,n)}else if(g=Z0e(e),typeof g=="function")for(e=g.call(e),f=0;!(o=e.next()).done;)o=o.value,g=r+S$(o,f++),u+=Hx(o,t,i,g,n);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function XS(e,t,i){if(e==null)return e;var r=[],n=0;return Hx(e,r,"","",function(o){return t.call(i,o,n++)}),r}function Y0e(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ao={current:null},Wx={transition:null},X0e={ReactCurrentDispatcher:ao,ReactCurrentBatchConfig:Wx,ReactCurrentOwner:tP};function gY(){throw Error("act(...) is not supported in production builds of React.")}Bt.Children={map:XS,forEach:function(e,t,i){XS(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return XS(e,function(){t++}),t},toArray:function(e){return XS(e,function(t){return t})||[]},only:function(e){if(!iP(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Bt.Component=a2;Bt.Fragment=j0e;Bt.Profiler=V0e;Bt.PureComponent=QR;Bt.StrictMode=z0e;Bt.Suspense=q0e;Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X0e;Bt.act=gY;Bt.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=hY({},e.props),n=e.key,o=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,u=tP.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var f=e.type.defaultProps;for(g in t)fY.call(t,g)&&!yY.hasOwnProperty(g)&&(r[g]=t[g]===void 0&&f!==void 0?f[g]:t[g])}var g=arguments.length-2;if(g===1)r.children=i;else if(1<g){f=Array(g);for(var b=0;b<g;b++)f[b]=arguments[b+2];r.children=f}return{$$typeof:B_,type:e.type,key:n,ref:o,props:r,_owner:u}};Bt.createContext=function(e){return e={$$typeof:G0e,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:U0e,_context:e},e.Consumer=e};Bt.createElement=mY;Bt.createFactory=function(e){var t=mY.bind(null,e);return t.type=e,t};Bt.createRef=function(){return{current:null}};Bt.forwardRef=function(e){return{$$typeof:B0e,render:e}};Bt.isValidElement=iP;Bt.lazy=function(e){return{$$typeof:W0e,_payload:{_status:-1,_result:e},_init:Y0e}};Bt.memo=function(e,t){return{$$typeof:H0e,type:e,compare:t===void 0?null:t}};Bt.startTransition=function(e){var t=Wx.transition;Wx.transition={};try{e()}finally{Wx.transition=t}};Bt.unstable_act=gY;Bt.useCallback=function(e,t){return ao.current.useCallback(e,t)};Bt.useContext=function(e){return ao.current.useContext(e)};Bt.useDebugValue=function(){};Bt.useDeferredValue=function(e){return ao.current.useDeferredValue(e)};Bt.useEffect=function(e,t){return ao.current.useEffect(e,t)};Bt.useId=function(){return ao.current.useId()};Bt.useImperativeHandle=function(e,t,i){return ao.current.useImperativeHandle(e,t,i)};Bt.useInsertionEffect=function(e,t){return ao.current.useInsertionEffect(e,t)};Bt.useLayoutEffect=function(e,t){return ao.current.useLayoutEffect(e,t)};Bt.useMemo=function(e,t){return ao.current.useMemo(e,t)};Bt.useReducer=function(e,t,i){return ao.current.useReducer(e,t,i)};Bt.useRef=function(e){return ao.current.useRef(e)};Bt.useState=function(e){return ao.current.useState(e)};Bt.useSyncExternalStore=function(e,t,i){return ao.current.useSyncExternalStore(e,t,i)};Bt.useTransition=function(){return ao.current.useTransition()};Bt.version="18.3.1";uY.exports=Bt;var ot=uY.exports;const pC=aY(ot);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q0e=ot,eye=Symbol.for("react.element"),tye=Symbol.for("react.fragment"),iye=Object.prototype.hasOwnProperty,rye=Q0e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nye={key:!0,ref:!0,__self:!0,__source:!0};function vY(e,t,i){var r,n={},o=null,u=null;i!==void 0&&(o=""+i),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(u=t.ref);for(r in t)iye.call(t,r)&&!nye.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:eye,type:e,key:o,ref:u,props:n,_owner:rye.current}}p6.Fragment=tye;p6.jsx=vY;p6.jsxs=vY;lY.exports=p6;var Fe=lY.exports,fC={},wY={exports:{}},Ea={},bY={exports:{}},_Y={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(pe,_e){var Le=pe.length;pe.push(_e);e:for(;0<Le;){var Re=Le-1>>>1,qe=pe[Re];if(0<n(qe,_e))pe[Re]=_e,pe[Le]=qe,Le=Re;else break e}}function i(pe){return pe.length===0?null:pe[0]}function r(pe){if(pe.length===0)return null;var _e=pe[0],Le=pe.pop();if(Le!==_e){pe[0]=Le;e:for(var Re=0,qe=pe.length,ht=qe>>>1;Re<ht;){var At=2*(Re+1)-1,Fi=pe[At],Rr=At+1,hs=pe[Rr];if(0>n(Fi,Le))Rr<qe&&0>n(hs,Fi)?(pe[Re]=hs,pe[Rr]=Le,Re=Rr):(pe[Re]=Fi,pe[At]=Le,Re=At);else if(Rr<qe&&0>n(hs,Le))pe[Re]=hs,pe[Rr]=Le,Re=Rr;else break e}}return _e}function n(pe,_e){var Le=pe.sortIndex-_e.sortIndex;return Le!==0?Le:pe.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var u=Date,f=u.now();e.unstable_now=function(){return u.now()-f}}var g=[],b=[],E=1,I=null,M=3,k=!1,L=!1,P=!1,D=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(pe){for(var _e=i(b);_e!==null;){if(_e.callback===null)r(b);else if(_e.startTime<=pe)r(b),_e.sortIndex=_e.expirationTime,t(g,_e);else break;_e=i(b)}}function W(pe){if(P=!1,V(pe),!L)if(i(g)!==null)L=!0,ye(Q);else{var _e=i(b);_e!==null&&ue(W,_e.startTime-pe)}}function Q(pe,_e){L=!1,P&&(P=!1,j(ie),ie=-1),k=!0;var Le=M;try{for(V(_e),I=i(g);I!==null&&(!(I.expirationTime>_e)||pe&&!xe());){var Re=I.callback;if(typeof Re=="function"){I.callback=null,M=I.priorityLevel;var qe=Re(I.expirationTime<=_e);_e=e.unstable_now(),typeof qe=="function"?I.callback=qe:I===i(g)&&r(g),V(_e)}else r(g);I=i(g)}if(I!==null)var ht=!0;else{var At=i(b);At!==null&&ue(W,At.startTime-_e),ht=!1}return ht}finally{I=null,M=Le,k=!1}}var Z=!1,ee=null,ie=-1,oe=5,le=-1;function xe(){return!(e.unstable_now()-le<oe)}function $e(){if(ee!==null){var pe=e.unstable_now();le=pe;var _e=!0;try{_e=ee(!0,pe)}finally{_e?Te():(Z=!1,ee=null)}}else Z=!1}var Te;if(typeof z=="function")Te=function(){z($e)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,se=de.port2;de.port1.onmessage=$e,Te=function(){se.postMessage(null)}}else Te=function(){D($e,0)};function ye(pe){ee=pe,Z||(Z=!0,Te())}function ue(pe,_e){ie=D(function(){pe(e.unstable_now())},_e)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(pe){pe.callback=null},e.unstable_continueExecution=function(){L||k||(L=!0,ye(Q))},e.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<pe?Math.floor(1e3/pe):5},e.unstable_getCurrentPriorityLevel=function(){return M},e.unstable_getFirstCallbackNode=function(){return i(g)},e.unstable_next=function(pe){switch(M){case 1:case 2:case 3:var _e=3;break;default:_e=M}var Le=M;M=_e;try{return pe()}finally{M=Le}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(pe,_e){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var Le=M;M=pe;try{return _e()}finally{M=Le}},e.unstable_scheduleCallback=function(pe,_e,Le){var Re=e.unstable_now();switch(typeof Le=="object"&&Le!==null?(Le=Le.delay,Le=typeof Le=="number"&&0<Le?Re+Le:Re):Le=Re,pe){case 1:var qe=-1;break;case 2:qe=250;break;case 5:qe=1073741823;break;case 4:qe=1e4;break;default:qe=5e3}return qe=Le+qe,pe={id:E++,callback:_e,priorityLevel:pe,startTime:Le,expirationTime:qe,sortIndex:-1},Le>Re?(pe.sortIndex=Le,t(b,pe),i(g)===null&&pe===i(b)&&(P?(j(ie),ie=-1):P=!0,ue(W,Le-Re))):(pe.sortIndex=qe,t(g,pe),L||k||(L=!0,ye(Q))),pe},e.unstable_shouldYield=xe,e.unstable_wrapCallback=function(pe){var _e=M;return function(){var Le=M;M=_e;try{return pe.apply(this,arguments)}finally{M=Le}}}})(_Y);bY.exports=_Y;var sye=bY.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oye=ot,ma=sye;function Ue(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var SY=new Set,U3={};function cm(e,t){_v(e,t),_v(e+"Capture",t)}function _v(e,t){for(U3[e]=t,e=0;e<t.length;e++)SY.add(t[e])}var td=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yC=Object.prototype.hasOwnProperty,aye=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sz={},oz={};function lye(e){return yC.call(oz,e)?!0:yC.call(sz,e)?!1:aye.test(e)?oz[e]=!0:(sz[e]=!0,!1)}function uye(e,t,i,r){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function cye(e,t,i,r){if(t===null||typeof t>"u"||uye(e,t,i,r))return!0;if(r)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function lo(e,t,i,r,n,o,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=u}var os={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){os[e]=new lo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];os[t]=new lo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){os[e]=new lo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){os[e]=new lo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){os[e]=new lo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){os[e]=new lo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){os[e]=new lo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){os[e]=new lo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){os[e]=new lo(e,5,!1,e.toLowerCase(),null,!1,!1)});var rP=/[\-:]([a-z])/g;function nP(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(rP,nP);os[t]=new lo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(rP,nP);os[t]=new lo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(rP,nP);os[t]=new lo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){os[e]=new lo(e,1,!1,e.toLowerCase(),null,!1,!1)});os.xlinkHref=new lo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){os[e]=new lo(e,1,!1,e.toLowerCase(),null,!0,!0)});function sP(e,t,i,r){var n=os.hasOwnProperty(t)?os[t]:null;(n!==null?n.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(cye(t,i,n,r)&&(i=null),r||n===null?lye(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):n.mustUseProperty?e[n.propertyName]=i===null?n.type===3?!1:"":i:(t=n.attributeName,r=n.attributeNamespace,i===null?e.removeAttribute(t):(n=n.type,i=n===3||n===4&&i===!0?"":""+i,r?e.setAttributeNS(r,t,i):e.setAttribute(t,i))))}var cd=oye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,QS=Symbol.for("react.element"),gg=Symbol.for("react.portal"),vg=Symbol.for("react.fragment"),oP=Symbol.for("react.strict_mode"),mC=Symbol.for("react.profiler"),xY=Symbol.for("react.provider"),EY=Symbol.for("react.context"),aP=Symbol.for("react.forward_ref"),gC=Symbol.for("react.suspense"),vC=Symbol.for("react.suspense_list"),lP=Symbol.for("react.memo"),vp=Symbol.for("react.lazy"),IY=Symbol.for("react.offscreen"),az=Symbol.iterator;function Z2(e){return e===null||typeof e!="object"?null:(e=az&&e[az]||e["@@iterator"],typeof e=="function"?e:null)}var wr=Object.assign,x$;function jw(e){if(x$===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);x$=t&&t[1]||""}return`
`+x$+e}var E$=!1;function I$(e,t){if(!e||E$)return"";E$=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(b){var r=b}Reflect.construct(e,[],t)}else{try{t.call()}catch(b){r=b}e.call(t.prototype)}else{try{throw Error()}catch(b){r=b}e()}}catch(b){if(b&&r&&typeof b.stack=="string"){for(var n=b.stack.split(`
`),o=r.stack.split(`
`),u=n.length-1,f=o.length-1;1<=u&&0<=f&&n[u]!==o[f];)f--;for(;1<=u&&0<=f;u--,f--)if(n[u]!==o[f]){if(u!==1||f!==1)do if(u--,f--,0>f||n[u]!==o[f]){var g=`
`+n[u].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}while(1<=u&&0<=f);break}}}finally{E$=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?jw(e):""}function hye(e){switch(e.tag){case 5:return jw(e.type);case 16:return jw("Lazy");case 13:return jw("Suspense");case 19:return jw("SuspenseList");case 0:case 2:case 15:return e=I$(e.type,!1),e;case 11:return e=I$(e.type.render,!1),e;case 1:return e=I$(e.type,!0),e;default:return""}}function wC(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vg:return"Fragment";case gg:return"Portal";case mC:return"Profiler";case oP:return"StrictMode";case gC:return"Suspense";case vC:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case EY:return(e.displayName||"Context")+".Consumer";case xY:return(e._context.displayName||"Context")+".Provider";case aP:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case lP:return t=e.displayName||null,t!==null?t:wC(e.type)||"Memo";case vp:t=e._payload,e=e._init;try{return wC(e(t))}catch{}}return null}function dye(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wC(t);case 8:return t===oP?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function uf(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function TY(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function pye(e){var t=TY(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var n=i.get,o=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(u){r=""+u,o.call(this,u)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(u){r=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function e5(e){e._valueTracker||(e._valueTracker=pye(e))}function $Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),r="";return e&&(r=TY(e)?e.checked?"true":"false":e.value),e=r,e!==i?(t.setValue(e),!0):!1}function J4(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function bC(e,t){var i=t.checked;return wr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function lz(e,t){var i=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;i=uf(t.value!=null?t.value:i),e._wrapperState={initialChecked:r,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function MY(e,t){t=t.checked,t!=null&&sP(e,"checked",t,!1)}function _C(e,t){MY(e,t);var i=uf(t.value),r=t.type;if(i!=null)r==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?SC(e,t.type,i):t.hasOwnProperty("defaultValue")&&SC(e,t.type,uf(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function uz(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function SC(e,t,i){(t!=="number"||J4(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var zw=Array.isArray;function qg(e,t,i,r){if(e=e.options,t){t={};for(var n=0;n<i.length;n++)t["$"+i[n]]=!0;for(i=0;i<e.length;i++)n=t.hasOwnProperty("$"+e[i].value),e[i].selected!==n&&(e[i].selected=n),n&&r&&(e[i].defaultSelected=!0)}else{for(i=""+uf(i),t=null,n=0;n<e.length;n++){if(e[n].value===i){e[n].selected=!0,r&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function xC(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ue(91));return wr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function cz(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(Ue(92));if(zw(i)){if(1<i.length)throw Error(Ue(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:uf(i)}}function CY(e,t){var i=uf(t.value),r=uf(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),r!=null&&(e.defaultValue=""+r)}function hz(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function AY(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function EC(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?AY(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var t5,kY=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,r,n){MSApp.execUnsafeLocalFunction(function(){return e(t,i,r,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(t5=t5||document.createElement("div"),t5.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=t5.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function G3(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var s3={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fye=["Webkit","ms","Moz","O"];Object.keys(s3).forEach(function(e){fye.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),s3[t]=s3[e]})});function LY(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||s3.hasOwnProperty(e)&&s3[e]?(""+t).trim():t+"px"}function OY(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var r=i.indexOf("--")===0,n=LY(i,t[i],r);i==="float"&&(i="cssFloat"),r?e.setProperty(i,n):e[i]=n}}var yye=wr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function IC(e,t){if(t){if(yye[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ue(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ue(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ue(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ue(62))}}function TC(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $C=null;function uP(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var MC=null,Hg=null,Wg=null;function dz(e){if(e=W_(e)){if(typeof MC!="function")throw Error(Ue(280));var t=e.stateNode;t&&(t=v6(t),MC(e.stateNode,e.type,t))}}function RY(e){Hg?Wg?Wg.push(e):Wg=[e]:Hg=e}function PY(){if(Hg){var e=Hg,t=Wg;if(Wg=Hg=null,dz(e),t)for(e=0;e<t.length;e++)dz(t[e])}}function NY(e,t){return e(t)}function FY(){}var T$=!1;function DY(e,t,i){if(T$)return e(t,i);T$=!0;try{return NY(e,t,i)}finally{T$=!1,(Hg!==null||Wg!==null)&&(FY(),PY())}}function B3(e,t){var i=e.stateNode;if(i===null)return null;var r=v6(i);if(r===null)return null;i=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(Ue(231,t,typeof i));return i}var CC=!1;if(td)try{var J2={};Object.defineProperty(J2,"passive",{get:function(){CC=!0}}),window.addEventListener("test",J2,J2),window.removeEventListener("test",J2,J2)}catch{CC=!1}function mye(e,t,i,r,n,o,u,f,g){var b=Array.prototype.slice.call(arguments,3);try{t.apply(i,b)}catch(E){this.onError(E)}}var o3=!1,K4=null,Y4=!1,AC=null,gye={onError:function(e){o3=!0,K4=e}};function vye(e,t,i,r,n,o,u,f,g){o3=!1,K4=null,mye.apply(gye,arguments)}function wye(e,t,i,r,n,o,u,f,g){if(vye.apply(this,arguments),o3){if(o3){var b=K4;o3=!1,K4=null}else throw Error(Ue(198));Y4||(Y4=!0,AC=b)}}function hm(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function jY(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function pz(e){if(hm(e)!==e)throw Error(Ue(188))}function bye(e){var t=e.alternate;if(!t){if(t=hm(e),t===null)throw Error(Ue(188));return t!==e?null:e}for(var i=e,r=t;;){var n=i.return;if(n===null)break;var o=n.alternate;if(o===null){if(r=n.return,r!==null){i=r;continue}break}if(n.child===o.child){for(o=n.child;o;){if(o===i)return pz(n),e;if(o===r)return pz(n),t;o=o.sibling}throw Error(Ue(188))}if(i.return!==r.return)i=n,r=o;else{for(var u=!1,f=n.child;f;){if(f===i){u=!0,i=n,r=o;break}if(f===r){u=!0,r=n,i=o;break}f=f.sibling}if(!u){for(f=o.child;f;){if(f===i){u=!0,i=o,r=n;break}if(f===r){u=!0,r=o,i=n;break}f=f.sibling}if(!u)throw Error(Ue(189))}}if(i.alternate!==r)throw Error(Ue(190))}if(i.tag!==3)throw Error(Ue(188));return i.stateNode.current===i?e:t}function zY(e){return e=bye(e),e!==null?VY(e):null}function VY(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=VY(e);if(t!==null)return t;e=e.sibling}return null}var UY=ma.unstable_scheduleCallback,fz=ma.unstable_cancelCallback,_ye=ma.unstable_shouldYield,Sye=ma.unstable_requestPaint,zr=ma.unstable_now,xye=ma.unstable_getCurrentPriorityLevel,cP=ma.unstable_ImmediatePriority,GY=ma.unstable_UserBlockingPriority,X4=ma.unstable_NormalPriority,Eye=ma.unstable_LowPriority,BY=ma.unstable_IdlePriority,f6=null,Sc=null;function Iye(e){if(Sc&&typeof Sc.onCommitFiberRoot=="function")try{Sc.onCommitFiberRoot(f6,e,void 0,(e.current.flags&128)===128)}catch{}}var du=Math.clz32?Math.clz32:Mye,Tye=Math.log,$ye=Math.LN2;function Mye(e){return e>>>=0,e===0?32:31-(Tye(e)/$ye|0)|0}var i5=64,r5=4194304;function Vw(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Q4(e,t){var i=e.pendingLanes;if(i===0)return 0;var r=0,n=e.suspendedLanes,o=e.pingedLanes,u=i&268435455;if(u!==0){var f=u&~n;f!==0?r=Vw(f):(o&=u,o!==0&&(r=Vw(o)))}else u=i&~n,u!==0?r=Vw(u):o!==0&&(r=Vw(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&n)&&(n=r&-r,o=t&-t,n>=o||n===16&&(o&4194240)!==0))return t;if(r&4&&(r|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)i=31-du(t),n=1<<i,r|=e[i],t&=~n;return r}function Cye(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Aye(e,t){for(var i=e.suspendedLanes,r=e.pingedLanes,n=e.expirationTimes,o=e.pendingLanes;0<o;){var u=31-du(o),f=1<<u,g=n[u];g===-1?(!(f&i)||f&r)&&(n[u]=Cye(f,t)):g<=t&&(e.expiredLanes|=f),o&=~f}}function kC(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function qY(){var e=i5;return i5<<=1,!(i5&4194240)&&(i5=64),e}function $$(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function q_(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-du(t),e[t]=i}function kye(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<i;){var n=31-du(i),o=1<<n;t[n]=0,r[n]=-1,e[n]=-1,i&=~o}}function hP(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var r=31-du(i),n=1<<r;n&t|e[r]&t&&(e[r]|=t),i&=~n}}var Ti=0;function HY(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var WY,dP,ZY,JY,KY,LC=!1,n5=[],Hp=null,Wp=null,Zp=null,q3=new Map,H3=new Map,Cp=[],Lye="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yz(e,t){switch(e){case"focusin":case"focusout":Hp=null;break;case"dragenter":case"dragleave":Wp=null;break;case"mouseover":case"mouseout":Zp=null;break;case"pointerover":case"pointerout":q3.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":H3.delete(t.pointerId)}}function K2(e,t,i,r,n,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:i,eventSystemFlags:r,nativeEvent:o,targetContainers:[n]},t!==null&&(t=W_(t),t!==null&&dP(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function Oye(e,t,i,r,n){switch(t){case"focusin":return Hp=K2(Hp,e,t,i,r,n),!0;case"dragenter":return Wp=K2(Wp,e,t,i,r,n),!0;case"mouseover":return Zp=K2(Zp,e,t,i,r,n),!0;case"pointerover":var o=n.pointerId;return q3.set(o,K2(q3.get(o)||null,e,t,i,r,n)),!0;case"gotpointercapture":return o=n.pointerId,H3.set(o,K2(H3.get(o)||null,e,t,i,r,n)),!0}return!1}function YY(e){var t=ly(e.target);if(t!==null){var i=hm(t);if(i!==null){if(t=i.tag,t===13){if(t=jY(i),t!==null){e.blockedOn=t,KY(e.priority,function(){ZY(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zx(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=OC(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var r=new i.constructor(i.type,i);$C=r,i.target.dispatchEvent(r),$C=null}else return t=W_(i),t!==null&&dP(t),e.blockedOn=i,!1;t.shift()}return!0}function mz(e,t,i){Zx(e)&&i.delete(t)}function Rye(){LC=!1,Hp!==null&&Zx(Hp)&&(Hp=null),Wp!==null&&Zx(Wp)&&(Wp=null),Zp!==null&&Zx(Zp)&&(Zp=null),q3.forEach(mz),H3.forEach(mz)}function Y2(e,t){e.blockedOn===t&&(e.blockedOn=null,LC||(LC=!0,ma.unstable_scheduleCallback(ma.unstable_NormalPriority,Rye)))}function W3(e){function t(n){return Y2(n,e)}if(0<n5.length){Y2(n5[0],e);for(var i=1;i<n5.length;i++){var r=n5[i];r.blockedOn===e&&(r.blockedOn=null)}}for(Hp!==null&&Y2(Hp,e),Wp!==null&&Y2(Wp,e),Zp!==null&&Y2(Zp,e),q3.forEach(t),H3.forEach(t),i=0;i<Cp.length;i++)r=Cp[i],r.blockedOn===e&&(r.blockedOn=null);for(;0<Cp.length&&(i=Cp[0],i.blockedOn===null);)YY(i),i.blockedOn===null&&Cp.shift()}var Zg=cd.ReactCurrentBatchConfig,eE=!0;function Pye(e,t,i,r){var n=Ti,o=Zg.transition;Zg.transition=null;try{Ti=1,pP(e,t,i,r)}finally{Ti=n,Zg.transition=o}}function Nye(e,t,i,r){var n=Ti,o=Zg.transition;Zg.transition=null;try{Ti=4,pP(e,t,i,r)}finally{Ti=n,Zg.transition=o}}function pP(e,t,i,r){if(eE){var n=OC(e,t,i,r);if(n===null)F$(e,t,r,tE,i),yz(e,r);else if(Oye(n,e,t,i,r))r.stopPropagation();else if(yz(e,r),t&4&&-1<Lye.indexOf(e)){for(;n!==null;){var o=W_(n);if(o!==null&&WY(o),o=OC(e,t,i,r),o===null&&F$(e,t,r,tE,i),o===n)break;n=o}n!==null&&r.stopPropagation()}else F$(e,t,r,null,i)}}var tE=null;function OC(e,t,i,r){if(tE=null,e=uP(r),e=ly(e),e!==null)if(t=hm(e),t===null)e=null;else if(i=t.tag,i===13){if(e=jY(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return tE=e,null}function XY(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xye()){case cP:return 1;case GY:return 4;case X4:case Eye:return 16;case BY:return 536870912;default:return 16}default:return 16}}var Rp=null,fP=null,Jx=null;function QY(){if(Jx)return Jx;var e,t=fP,i=t.length,r,n="value"in Rp?Rp.value:Rp.textContent,o=n.length;for(e=0;e<i&&t[e]===n[e];e++);var u=i-e;for(r=1;r<=u&&t[i-r]===n[o-r];r++);return Jx=n.slice(e,1<r?1-r:void 0)}function Kx(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function s5(){return!0}function gz(){return!1}function Ia(e){function t(i,r,n,o,u){this._reactName=i,this._targetInst=n,this.type=r,this.nativeEvent=o,this.target=u,this.currentTarget=null;for(var f in e)e.hasOwnProperty(f)&&(i=e[f],this[f]=i?i(o):o[f]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?s5:gz,this.isPropagationStopped=gz,this}return wr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=s5)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=s5)},persist:function(){},isPersistent:s5}),t}var l2={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yP=Ia(l2),H_=wr({},l2,{view:0,detail:0}),Fye=Ia(H_),M$,C$,X2,y6=wr({},H_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mP,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==X2&&(X2&&e.type==="mousemove"?(M$=e.screenX-X2.screenX,C$=e.screenY-X2.screenY):C$=M$=0,X2=e),M$)},movementY:function(e){return"movementY"in e?e.movementY:C$}}),vz=Ia(y6),Dye=wr({},y6,{dataTransfer:0}),jye=Ia(Dye),zye=wr({},H_,{relatedTarget:0}),A$=Ia(zye),Vye=wr({},l2,{animationName:0,elapsedTime:0,pseudoElement:0}),Uye=Ia(Vye),Gye=wr({},l2,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Bye=Ia(Gye),qye=wr({},l2,{data:0}),wz=Ia(qye),Hye={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wye={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zye={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jye(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Zye[e])?!!t[e]:!1}function mP(){return Jye}var Kye=wr({},H_,{key:function(e){if(e.key){var t=Hye[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Kx(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wye[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mP,charCode:function(e){return e.type==="keypress"?Kx(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Kx(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yye=Ia(Kye),Xye=wr({},y6,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bz=Ia(Xye),Qye=wr({},H_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mP}),eme=Ia(Qye),tme=wr({},l2,{propertyName:0,elapsedTime:0,pseudoElement:0}),ime=Ia(tme),rme=wr({},y6,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),nme=Ia(rme),sme=[9,13,27,32],gP=td&&"CompositionEvent"in window,a3=null;td&&"documentMode"in document&&(a3=document.documentMode);var ome=td&&"TextEvent"in window&&!a3,eX=td&&(!gP||a3&&8<a3&&11>=a3),_z=" ",Sz=!1;function tX(e,t){switch(e){case"keyup":return sme.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iX(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var wg=!1;function ame(e,t){switch(e){case"compositionend":return iX(t);case"keypress":return t.which!==32?null:(Sz=!0,_z);case"textInput":return e=t.data,e===_z&&Sz?null:e;default:return null}}function lme(e,t){if(wg)return e==="compositionend"||!gP&&tX(e,t)?(e=QY(),Jx=fP=Rp=null,wg=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return eX&&t.locale!=="ko"?null:t.data;default:return null}}var ume={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xz(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ume[e.type]:t==="textarea"}function rX(e,t,i,r){RY(r),t=iE(t,"onChange"),0<t.length&&(i=new yP("onChange","change",null,i,r),e.push({event:i,listeners:t}))}var l3=null,Z3=null;function cme(e){fX(e,0)}function m6(e){var t=Sg(e);if($Y(t))return e}function hme(e,t){if(e==="change")return t}var nX=!1;if(td){var k$;if(td){var L$="oninput"in document;if(!L$){var Ez=document.createElement("div");Ez.setAttribute("oninput","return;"),L$=typeof Ez.oninput=="function"}k$=L$}else k$=!1;nX=k$&&(!document.documentMode||9<document.documentMode)}function Iz(){l3&&(l3.detachEvent("onpropertychange",sX),Z3=l3=null)}function sX(e){if(e.propertyName==="value"&&m6(Z3)){var t=[];rX(t,Z3,e,uP(e)),DY(cme,t)}}function dme(e,t,i){e==="focusin"?(Iz(),l3=t,Z3=i,l3.attachEvent("onpropertychange",sX)):e==="focusout"&&Iz()}function pme(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return m6(Z3)}function fme(e,t){if(e==="click")return m6(t)}function yme(e,t){if(e==="input"||e==="change")return m6(t)}function mme(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vu=typeof Object.is=="function"?Object.is:mme;function J3(e,t){if(vu(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var n=i[r];if(!yC.call(t,n)||!vu(e[n],t[n]))return!1}return!0}function Tz(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $z(e,t){var i=Tz(e);e=0;for(var r;i;){if(i.nodeType===3){if(r=e+i.textContent.length,e<=t&&r>=t)return{node:i,offset:t-e};e=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Tz(i)}}function oX(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?oX(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function aX(){for(var e=window,t=J4();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=J4(e.document)}return t}function vP(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function gme(e){var t=aX(),i=e.focusedElem,r=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&oX(i.ownerDocument.documentElement,i)){if(r!==null&&vP(i)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=i.textContent.length,o=Math.min(r.start,n);r=r.end===void 0?o:Math.min(r.end,n),!e.extend&&o>r&&(n=r,r=o,o=n),n=$z(i,o);var u=$z(i,r);n&&u&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vme=td&&"documentMode"in document&&11>=document.documentMode,bg=null,RC=null,u3=null,PC=!1;function Mz(e,t,i){var r=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;PC||bg==null||bg!==J4(r)||(r=bg,"selectionStart"in r&&vP(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),u3&&J3(u3,r)||(u3=r,r=iE(RC,"onSelect"),0<r.length&&(t=new yP("onSelect","select",null,t,i),e.push({event:t,listeners:r}),t.target=bg)))}function o5(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var _g={animationend:o5("Animation","AnimationEnd"),animationiteration:o5("Animation","AnimationIteration"),animationstart:o5("Animation","AnimationStart"),transitionend:o5("Transition","TransitionEnd")},O$={},lX={};td&&(lX=document.createElement("div").style,"AnimationEvent"in window||(delete _g.animationend.animation,delete _g.animationiteration.animation,delete _g.animationstart.animation),"TransitionEvent"in window||delete _g.transitionend.transition);function g6(e){if(O$[e])return O$[e];if(!_g[e])return e;var t=_g[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in lX)return O$[e]=t[i];return e}var uX=g6("animationend"),cX=g6("animationiteration"),hX=g6("animationstart"),dX=g6("transitionend"),pX=new Map,Cz="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xf(e,t){pX.set(e,t),cm(t,[e])}for(var R$=0;R$<Cz.length;R$++){var P$=Cz[R$],wme=P$.toLowerCase(),bme=P$[0].toUpperCase()+P$.slice(1);xf(wme,"on"+bme)}xf(uX,"onAnimationEnd");xf(cX,"onAnimationIteration");xf(hX,"onAnimationStart");xf("dblclick","onDoubleClick");xf("focusin","onFocus");xf("focusout","onBlur");xf(dX,"onTransitionEnd");_v("onMouseEnter",["mouseout","mouseover"]);_v("onMouseLeave",["mouseout","mouseover"]);_v("onPointerEnter",["pointerout","pointerover"]);_v("onPointerLeave",["pointerout","pointerover"]);cm("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cm("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cm("onBeforeInput",["compositionend","keypress","textInput","paste"]);cm("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cm("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cm("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uw="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_me=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uw));function Az(e,t,i){var r=e.type||"unknown-event";e.currentTarget=i,wye(r,t,void 0,e),e.currentTarget=null}function fX(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var r=e[i],n=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var u=r.length-1;0<=u;u--){var f=r[u],g=f.instance,b=f.currentTarget;if(f=f.listener,g!==o&&n.isPropagationStopped())break e;Az(n,f,b),o=g}else for(u=0;u<r.length;u++){if(f=r[u],g=f.instance,b=f.currentTarget,f=f.listener,g!==o&&n.isPropagationStopped())break e;Az(n,f,b),o=g}}}if(Y4)throw e=AC,Y4=!1,AC=null,e}function Wi(e,t){var i=t[zC];i===void 0&&(i=t[zC]=new Set);var r=e+"__bubble";i.has(r)||(yX(t,e,2,!1),i.add(r))}function N$(e,t,i){var r=0;t&&(r|=4),yX(i,e,r,t)}var a5="_reactListening"+Math.random().toString(36).slice(2);function K3(e){if(!e[a5]){e[a5]=!0,SY.forEach(function(i){i!=="selectionchange"&&(_me.has(i)||N$(i,!1,e),N$(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[a5]||(t[a5]=!0,N$("selectionchange",!1,t))}}function yX(e,t,i,r){switch(XY(t)){case 1:var n=Pye;break;case 4:n=Nye;break;default:n=pP}i=n.bind(null,t,i,e),n=void 0,!CC||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),r?n!==void 0?e.addEventListener(t,i,{capture:!0,passive:n}):e.addEventListener(t,i,!0):n!==void 0?e.addEventListener(t,i,{passive:n}):e.addEventListener(t,i,!1)}function F$(e,t,i,r,n){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var u=r.tag;if(u===3||u===4){var f=r.stateNode.containerInfo;if(f===n||f.nodeType===8&&f.parentNode===n)break;if(u===4)for(u=r.return;u!==null;){var g=u.tag;if((g===3||g===4)&&(g=u.stateNode.containerInfo,g===n||g.nodeType===8&&g.parentNode===n))return;u=u.return}for(;f!==null;){if(u=ly(f),u===null)return;if(g=u.tag,g===5||g===6){r=o=u;continue e}f=f.parentNode}}r=r.return}DY(function(){var b=o,E=uP(i),I=[];e:{var M=pX.get(e);if(M!==void 0){var k=yP,L=e;switch(e){case"keypress":if(Kx(i)===0)break e;case"keydown":case"keyup":k=Yye;break;case"focusin":L="focus",k=A$;break;case"focusout":L="blur",k=A$;break;case"beforeblur":case"afterblur":k=A$;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=vz;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=jye;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=eme;break;case uX:case cX:case hX:k=Uye;break;case dX:k=ime;break;case"scroll":k=Fye;break;case"wheel":k=nme;break;case"copy":case"cut":case"paste":k=Bye;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=bz}var P=(t&4)!==0,D=!P&&e==="scroll",j=P?M!==null?M+"Capture":null:M;P=[];for(var z=b,V;z!==null;){V=z;var W=V.stateNode;if(V.tag===5&&W!==null&&(V=W,j!==null&&(W=B3(z,j),W!=null&&P.push(Y3(z,W,V)))),D)break;z=z.return}0<P.length&&(M=new k(M,L,null,i,E),I.push({event:M,listeners:P}))}}if(!(t&7)){e:{if(M=e==="mouseover"||e==="pointerover",k=e==="mouseout"||e==="pointerout",M&&i!==$C&&(L=i.relatedTarget||i.fromElement)&&(ly(L)||L[id]))break e;if((k||M)&&(M=E.window===E?E:(M=E.ownerDocument)?M.defaultView||M.parentWindow:window,k?(L=i.relatedTarget||i.toElement,k=b,L=L?ly(L):null,L!==null&&(D=hm(L),L!==D||L.tag!==5&&L.tag!==6)&&(L=null)):(k=null,L=b),k!==L)){if(P=vz,W="onMouseLeave",j="onMouseEnter",z="mouse",(e==="pointerout"||e==="pointerover")&&(P=bz,W="onPointerLeave",j="onPointerEnter",z="pointer"),D=k==null?M:Sg(k),V=L==null?M:Sg(L),M=new P(W,z+"leave",k,i,E),M.target=D,M.relatedTarget=V,W=null,ly(E)===b&&(P=new P(j,z+"enter",L,i,E),P.target=V,P.relatedTarget=D,W=P),D=W,k&&L)t:{for(P=k,j=L,z=0,V=P;V;V=Am(V))z++;for(V=0,W=j;W;W=Am(W))V++;for(;0<z-V;)P=Am(P),z--;for(;0<V-z;)j=Am(j),V--;for(;z--;){if(P===j||j!==null&&P===j.alternate)break t;P=Am(P),j=Am(j)}P=null}else P=null;k!==null&&kz(I,M,k,P,!1),L!==null&&D!==null&&kz(I,D,L,P,!0)}}e:{if(M=b?Sg(b):window,k=M.nodeName&&M.nodeName.toLowerCase(),k==="select"||k==="input"&&M.type==="file")var Q=hme;else if(xz(M))if(nX)Q=yme;else{Q=pme;var Z=dme}else(k=M.nodeName)&&k.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&(Q=fme);if(Q&&(Q=Q(e,b))){rX(I,Q,i,E);break e}Z&&Z(e,M,b),e==="focusout"&&(Z=M._wrapperState)&&Z.controlled&&M.type==="number"&&SC(M,"number",M.value)}switch(Z=b?Sg(b):window,e){case"focusin":(xz(Z)||Z.contentEditable==="true")&&(bg=Z,RC=b,u3=null);break;case"focusout":u3=RC=bg=null;break;case"mousedown":PC=!0;break;case"contextmenu":case"mouseup":case"dragend":PC=!1,Mz(I,i,E);break;case"selectionchange":if(vme)break;case"keydown":case"keyup":Mz(I,i,E)}var ee;if(gP)e:{switch(e){case"compositionstart":var ie="onCompositionStart";break e;case"compositionend":ie="onCompositionEnd";break e;case"compositionupdate":ie="onCompositionUpdate";break e}ie=void 0}else wg?tX(e,i)&&(ie="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(ie="onCompositionStart");ie&&(eX&&i.locale!=="ko"&&(wg||ie!=="onCompositionStart"?ie==="onCompositionEnd"&&wg&&(ee=QY()):(Rp=E,fP="value"in Rp?Rp.value:Rp.textContent,wg=!0)),Z=iE(b,ie),0<Z.length&&(ie=new wz(ie,e,null,i,E),I.push({event:ie,listeners:Z}),ee?ie.data=ee:(ee=iX(i),ee!==null&&(ie.data=ee)))),(ee=ome?ame(e,i):lme(e,i))&&(b=iE(b,"onBeforeInput"),0<b.length&&(E=new wz("onBeforeInput","beforeinput",null,i,E),I.push({event:E,listeners:b}),E.data=ee))}fX(I,t)})}function Y3(e,t,i){return{instance:e,listener:t,currentTarget:i}}function iE(e,t){for(var i=t+"Capture",r=[];e!==null;){var n=e,o=n.stateNode;n.tag===5&&o!==null&&(n=o,o=B3(e,i),o!=null&&r.unshift(Y3(e,o,n)),o=B3(e,t),o!=null&&r.push(Y3(e,o,n))),e=e.return}return r}function Am(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function kz(e,t,i,r,n){for(var o=t._reactName,u=[];i!==null&&i!==r;){var f=i,g=f.alternate,b=f.stateNode;if(g!==null&&g===r)break;f.tag===5&&b!==null&&(f=b,n?(g=B3(i,o),g!=null&&u.unshift(Y3(i,g,f))):n||(g=B3(i,o),g!=null&&u.push(Y3(i,g,f)))),i=i.return}u.length!==0&&e.push({event:t,listeners:u})}var Sme=/\r\n?/g,xme=/\u0000|\uFFFD/g;function Lz(e){return(typeof e=="string"?e:""+e).replace(Sme,`
`).replace(xme,"")}function l5(e,t,i){if(t=Lz(t),Lz(e)!==t&&i)throw Error(Ue(425))}function rE(){}var NC=null,FC=null;function DC(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jC=typeof setTimeout=="function"?setTimeout:void 0,Eme=typeof clearTimeout=="function"?clearTimeout:void 0,Oz=typeof Promise=="function"?Promise:void 0,Ime=typeof queueMicrotask=="function"?queueMicrotask:typeof Oz<"u"?function(e){return Oz.resolve(null).then(e).catch(Tme)}:jC;function Tme(e){setTimeout(function(){throw e})}function D$(e,t){var i=t,r=0;do{var n=i.nextSibling;if(e.removeChild(i),n&&n.nodeType===8)if(i=n.data,i==="/$"){if(r===0){e.removeChild(n),W3(t);return}r--}else i!=="$"&&i!=="$?"&&i!=="$!"||r++;i=n}while(i);W3(t)}function Jp(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Rz(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var u2=Math.random().toString(36).slice(2),wc="__reactFiber$"+u2,X3="__reactProps$"+u2,id="__reactContainer$"+u2,zC="__reactEvents$"+u2,$me="__reactListeners$"+u2,Mme="__reactHandles$"+u2;function ly(e){var t=e[wc];if(t)return t;for(var i=e.parentNode;i;){if(t=i[id]||i[wc]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Rz(e);e!==null;){if(i=e[wc])return i;e=Rz(e)}return t}e=i,i=e.parentNode}return null}function W_(e){return e=e[wc]||e[id],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Sg(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ue(33))}function v6(e){return e[X3]||null}var VC=[],xg=-1;function Ef(e){return{current:e}}function er(e){0>xg||(e.current=VC[xg],VC[xg]=null,xg--)}function Bi(e,t){xg++,VC[xg]=e.current,e.current=t}var cf={},js=Ef(cf),Po=Ef(!1),Ny=cf;function Sv(e,t){var i=e.type.contextTypes;if(!i)return cf;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var n={},o;for(o in i)n[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function No(e){return e=e.childContextTypes,e!=null}function nE(){er(Po),er(js)}function Pz(e,t,i){if(js.current!==cf)throw Error(Ue(168));Bi(js,t),Bi(Po,i)}function mX(e,t,i){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return i;r=r.getChildContext();for(var n in r)if(!(n in t))throw Error(Ue(108,dye(e)||"Unknown",n));return wr({},i,r)}function sE(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cf,Ny=js.current,Bi(js,e),Bi(Po,Po.current),!0}function Nz(e,t,i){var r=e.stateNode;if(!r)throw Error(Ue(169));i?(e=mX(e,t,Ny),r.__reactInternalMemoizedMergedChildContext=e,er(Po),er(js),Bi(js,e)):er(Po),Bi(Po,i)}var Fh=null,w6=!1,j$=!1;function gX(e){Fh===null?Fh=[e]:Fh.push(e)}function Cme(e){w6=!0,gX(e)}function If(){if(!j$&&Fh!==null){j$=!0;var e=0,t=Ti;try{var i=Fh;for(Ti=1;e<i.length;e++){var r=i[e];do r=r(!0);while(r!==null)}Fh=null,w6=!1}catch(n){throw Fh!==null&&(Fh=Fh.slice(e+1)),UY(cP,If),n}finally{Ti=t,j$=!1}}return null}var Eg=[],Ig=0,oE=null,aE=0,Ja=[],Ka=0,Fy=null,qh=1,Hh="";function Xf(e,t){Eg[Ig++]=aE,Eg[Ig++]=oE,oE=e,aE=t}function vX(e,t,i){Ja[Ka++]=qh,Ja[Ka++]=Hh,Ja[Ka++]=Fy,Fy=e;var r=qh;e=Hh;var n=32-du(r)-1;r&=~(1<<n),i+=1;var o=32-du(t)+n;if(30<o){var u=n-n%5;o=(r&(1<<u)-1).toString(32),r>>=u,n-=u,qh=1<<32-du(t)+n|i<<n|r,Hh=o+e}else qh=1<<o|i<<n|r,Hh=e}function wP(e){e.return!==null&&(Xf(e,1),vX(e,1,0))}function bP(e){for(;e===oE;)oE=Eg[--Ig],Eg[Ig]=null,aE=Eg[--Ig],Eg[Ig]=null;for(;e===Fy;)Fy=Ja[--Ka],Ja[Ka]=null,Hh=Ja[--Ka],Ja[Ka]=null,qh=Ja[--Ka],Ja[Ka]=null}var da=null,ua=null,ur=!1,su=null;function wX(e,t){var i=Qa(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function Fz(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,da=e,ua=Jp(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,da=e,ua=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Fy!==null?{id:qh,overflow:Hh}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=Qa(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,da=e,ua=null,!0):!1;default:return!1}}function UC(e){return(e.mode&1)!==0&&(e.flags&128)===0}function GC(e){if(ur){var t=ua;if(t){var i=t;if(!Fz(e,t)){if(UC(e))throw Error(Ue(418));t=Jp(i.nextSibling);var r=da;t&&Fz(e,t)?wX(r,i):(e.flags=e.flags&-4097|2,ur=!1,da=e)}}else{if(UC(e))throw Error(Ue(418));e.flags=e.flags&-4097|2,ur=!1,da=e}}}function Dz(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;da=e}function u5(e){if(e!==da)return!1;if(!ur)return Dz(e),ur=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!DC(e.type,e.memoizedProps)),t&&(t=ua)){if(UC(e))throw bX(),Error(Ue(418));for(;t;)wX(e,t),t=Jp(t.nextSibling)}if(Dz(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ue(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){ua=Jp(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}ua=null}}else ua=da?Jp(e.stateNode.nextSibling):null;return!0}function bX(){for(var e=ua;e;)e=Jp(e.nextSibling)}function xv(){ua=da=null,ur=!1}function _P(e){su===null?su=[e]:su.push(e)}var Ame=cd.ReactCurrentBatchConfig;function Q2(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(Ue(309));var r=i.stateNode}if(!r)throw Error(Ue(147,e));var n=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(u){var f=n.refs;u===null?delete f[o]:f[o]=u},t._stringRef=o,t)}if(typeof e!="string")throw Error(Ue(284));if(!i._owner)throw Error(Ue(290,e))}return e}function c5(e,t){throw e=Object.prototype.toString.call(t),Error(Ue(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function jz(e){var t=e._init;return t(e._payload)}function _X(e){function t(j,z){if(e){var V=j.deletions;V===null?(j.deletions=[z],j.flags|=16):V.push(z)}}function i(j,z){if(!e)return null;for(;z!==null;)t(j,z),z=z.sibling;return null}function r(j,z){for(j=new Map;z!==null;)z.key!==null?j.set(z.key,z):j.set(z.index,z),z=z.sibling;return j}function n(j,z){return j=Qp(j,z),j.index=0,j.sibling=null,j}function o(j,z,V){return j.index=V,e?(V=j.alternate,V!==null?(V=V.index,V<z?(j.flags|=2,z):V):(j.flags|=2,z)):(j.flags|=1048576,z)}function u(j){return e&&j.alternate===null&&(j.flags|=2),j}function f(j,z,V,W){return z===null||z.tag!==6?(z=H$(V,j.mode,W),z.return=j,z):(z=n(z,V),z.return=j,z)}function g(j,z,V,W){var Q=V.type;return Q===vg?E(j,z,V.props.children,W,V.key):z!==null&&(z.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===vp&&jz(Q)===z.type)?(W=n(z,V.props),W.ref=Q2(j,z,V),W.return=j,W):(W=r9(V.type,V.key,V.props,null,j.mode,W),W.ref=Q2(j,z,V),W.return=j,W)}function b(j,z,V,W){return z===null||z.tag!==4||z.stateNode.containerInfo!==V.containerInfo||z.stateNode.implementation!==V.implementation?(z=W$(V,j.mode,W),z.return=j,z):(z=n(z,V.children||[]),z.return=j,z)}function E(j,z,V,W,Q){return z===null||z.tag!==7?(z=by(V,j.mode,W,Q),z.return=j,z):(z=n(z,V),z.return=j,z)}function I(j,z,V){if(typeof z=="string"&&z!==""||typeof z=="number")return z=H$(""+z,j.mode,V),z.return=j,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case QS:return V=r9(z.type,z.key,z.props,null,j.mode,V),V.ref=Q2(j,null,z),V.return=j,V;case gg:return z=W$(z,j.mode,V),z.return=j,z;case vp:var W=z._init;return I(j,W(z._payload),V)}if(zw(z)||Z2(z))return z=by(z,j.mode,V,null),z.return=j,z;c5(j,z)}return null}function M(j,z,V,W){var Q=z!==null?z.key:null;if(typeof V=="string"&&V!==""||typeof V=="number")return Q!==null?null:f(j,z,""+V,W);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case QS:return V.key===Q?g(j,z,V,W):null;case gg:return V.key===Q?b(j,z,V,W):null;case vp:return Q=V._init,M(j,z,Q(V._payload),W)}if(zw(V)||Z2(V))return Q!==null?null:E(j,z,V,W,null);c5(j,V)}return null}function k(j,z,V,W,Q){if(typeof W=="string"&&W!==""||typeof W=="number")return j=j.get(V)||null,f(z,j,""+W,Q);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case QS:return j=j.get(W.key===null?V:W.key)||null,g(z,j,W,Q);case gg:return j=j.get(W.key===null?V:W.key)||null,b(z,j,W,Q);case vp:var Z=W._init;return k(j,z,V,Z(W._payload),Q)}if(zw(W)||Z2(W))return j=j.get(V)||null,E(z,j,W,Q,null);c5(z,W)}return null}function L(j,z,V,W){for(var Q=null,Z=null,ee=z,ie=z=0,oe=null;ee!==null&&ie<V.length;ie++){ee.index>ie?(oe=ee,ee=null):oe=ee.sibling;var le=M(j,ee,V[ie],W);if(le===null){ee===null&&(ee=oe);break}e&&ee&&le.alternate===null&&t(j,ee),z=o(le,z,ie),Z===null?Q=le:Z.sibling=le,Z=le,ee=oe}if(ie===V.length)return i(j,ee),ur&&Xf(j,ie),Q;if(ee===null){for(;ie<V.length;ie++)ee=I(j,V[ie],W),ee!==null&&(z=o(ee,z,ie),Z===null?Q=ee:Z.sibling=ee,Z=ee);return ur&&Xf(j,ie),Q}for(ee=r(j,ee);ie<V.length;ie++)oe=k(ee,j,ie,V[ie],W),oe!==null&&(e&&oe.alternate!==null&&ee.delete(oe.key===null?ie:oe.key),z=o(oe,z,ie),Z===null?Q=oe:Z.sibling=oe,Z=oe);return e&&ee.forEach(function(xe){return t(j,xe)}),ur&&Xf(j,ie),Q}function P(j,z,V,W){var Q=Z2(V);if(typeof Q!="function")throw Error(Ue(150));if(V=Q.call(V),V==null)throw Error(Ue(151));for(var Z=Q=null,ee=z,ie=z=0,oe=null,le=V.next();ee!==null&&!le.done;ie++,le=V.next()){ee.index>ie?(oe=ee,ee=null):oe=ee.sibling;var xe=M(j,ee,le.value,W);if(xe===null){ee===null&&(ee=oe);break}e&&ee&&xe.alternate===null&&t(j,ee),z=o(xe,z,ie),Z===null?Q=xe:Z.sibling=xe,Z=xe,ee=oe}if(le.done)return i(j,ee),ur&&Xf(j,ie),Q;if(ee===null){for(;!le.done;ie++,le=V.next())le=I(j,le.value,W),le!==null&&(z=o(le,z,ie),Z===null?Q=le:Z.sibling=le,Z=le);return ur&&Xf(j,ie),Q}for(ee=r(j,ee);!le.done;ie++,le=V.next())le=k(ee,j,ie,le.value,W),le!==null&&(e&&le.alternate!==null&&ee.delete(le.key===null?ie:le.key),z=o(le,z,ie),Z===null?Q=le:Z.sibling=le,Z=le);return e&&ee.forEach(function($e){return t(j,$e)}),ur&&Xf(j,ie),Q}function D(j,z,V,W){if(typeof V=="object"&&V!==null&&V.type===vg&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case QS:e:{for(var Q=V.key,Z=z;Z!==null;){if(Z.key===Q){if(Q=V.type,Q===vg){if(Z.tag===7){i(j,Z.sibling),z=n(Z,V.props.children),z.return=j,j=z;break e}}else if(Z.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===vp&&jz(Q)===Z.type){i(j,Z.sibling),z=n(Z,V.props),z.ref=Q2(j,Z,V),z.return=j,j=z;break e}i(j,Z);break}else t(j,Z);Z=Z.sibling}V.type===vg?(z=by(V.props.children,j.mode,W,V.key),z.return=j,j=z):(W=r9(V.type,V.key,V.props,null,j.mode,W),W.ref=Q2(j,z,V),W.return=j,j=W)}return u(j);case gg:e:{for(Z=V.key;z!==null;){if(z.key===Z)if(z.tag===4&&z.stateNode.containerInfo===V.containerInfo&&z.stateNode.implementation===V.implementation){i(j,z.sibling),z=n(z,V.children||[]),z.return=j,j=z;break e}else{i(j,z);break}else t(j,z);z=z.sibling}z=W$(V,j.mode,W),z.return=j,j=z}return u(j);case vp:return Z=V._init,D(j,z,Z(V._payload),W)}if(zw(V))return L(j,z,V,W);if(Z2(V))return P(j,z,V,W);c5(j,V)}return typeof V=="string"&&V!==""||typeof V=="number"?(V=""+V,z!==null&&z.tag===6?(i(j,z.sibling),z=n(z,V),z.return=j,j=z):(i(j,z),z=H$(V,j.mode,W),z.return=j,j=z),u(j)):i(j,z)}return D}var Ev=_X(!0),SX=_X(!1),lE=Ef(null),uE=null,Tg=null,SP=null;function xP(){SP=Tg=uE=null}function EP(e){var t=lE.current;er(lE),e._currentValue=t}function BC(e,t,i){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===i)break;e=e.return}}function Jg(e,t){uE=e,SP=Tg=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ko=!0),e.firstContext=null)}function al(e){var t=e._currentValue;if(SP!==e)if(e={context:e,memoizedValue:t,next:null},Tg===null){if(uE===null)throw Error(Ue(308));Tg=e,uE.dependencies={lanes:0,firstContext:e}}else Tg=Tg.next=e;return t}var uy=null;function IP(e){uy===null?uy=[e]:uy.push(e)}function xX(e,t,i,r){var n=t.interleaved;return n===null?(i.next=i,IP(t)):(i.next=n.next,n.next=i),t.interleaved=i,rd(e,r)}function rd(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var wp=!1;function TP(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function EX(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Jh(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Kp(e,t,i){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ni&2){var n=r.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),r.pending=t,rd(e,i)}return n=r.interleaved,n===null?(t.next=t,IP(r)):(t.next=n.next,n.next=t),r.interleaved=t,rd(e,i)}function Yx(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,hP(e,i)}}function zz(e,t){var i=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var n=null,o=null;if(i=i.firstBaseUpdate,i!==null){do{var u={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};o===null?n=o=u:o=o.next=u,i=i.next}while(i!==null);o===null?n=o=t:o=o.next=t}else n=o=t;i={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function cE(e,t,i,r){var n=e.updateQueue;wp=!1;var o=n.firstBaseUpdate,u=n.lastBaseUpdate,f=n.shared.pending;if(f!==null){n.shared.pending=null;var g=f,b=g.next;g.next=null,u===null?o=b:u.next=b,u=g;var E=e.alternate;E!==null&&(E=E.updateQueue,f=E.lastBaseUpdate,f!==u&&(f===null?E.firstBaseUpdate=b:f.next=b,E.lastBaseUpdate=g))}if(o!==null){var I=n.baseState;u=0,E=b=g=null,f=o;do{var M=f.lane,k=f.eventTime;if((r&M)===M){E!==null&&(E=E.next={eventTime:k,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var L=e,P=f;switch(M=t,k=i,P.tag){case 1:if(L=P.payload,typeof L=="function"){I=L.call(k,I,M);break e}I=L;break e;case 3:L.flags=L.flags&-65537|128;case 0:if(L=P.payload,M=typeof L=="function"?L.call(k,I,M):L,M==null)break e;I=wr({},I,M);break e;case 2:wp=!0}}f.callback!==null&&f.lane!==0&&(e.flags|=64,M=n.effects,M===null?n.effects=[f]:M.push(f))}else k={eventTime:k,lane:M,tag:f.tag,payload:f.payload,callback:f.callback,next:null},E===null?(b=E=k,g=I):E=E.next=k,u|=M;if(f=f.next,f===null){if(f=n.shared.pending,f===null)break;M=f,f=M.next,M.next=null,n.lastBaseUpdate=M,n.shared.pending=null}}while(!0);if(E===null&&(g=I),n.baseState=g,n.firstBaseUpdate=b,n.lastBaseUpdate=E,t=n.shared.interleaved,t!==null){n=t;do u|=n.lane,n=n.next;while(n!==t)}else o===null&&(n.shared.lanes=0);jy|=u,e.lanes=u,e.memoizedState=I}}function Vz(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],n=r.callback;if(n!==null){if(r.callback=null,r=i,typeof n!="function")throw Error(Ue(191,n));n.call(r)}}}var Z_={},xc=Ef(Z_),Q3=Ef(Z_),e_=Ef(Z_);function cy(e){if(e===Z_)throw Error(Ue(174));return e}function $P(e,t){switch(Bi(e_,t),Bi(Q3,e),Bi(xc,Z_),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:EC(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=EC(t,e)}er(xc),Bi(xc,t)}function Iv(){er(xc),er(Q3),er(e_)}function IX(e){cy(e_.current);var t=cy(xc.current),i=EC(t,e.type);t!==i&&(Bi(Q3,e),Bi(xc,i))}function MP(e){Q3.current===e&&(er(xc),er(Q3))}var gr=Ef(0);function hE(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var z$=[];function CP(){for(var e=0;e<z$.length;e++)z$[e]._workInProgressVersionPrimary=null;z$.length=0}var Xx=cd.ReactCurrentDispatcher,V$=cd.ReactCurrentBatchConfig,Dy=0,vr=null,pn=null,kn=null,dE=!1,c3=!1,t_=0,kme=0;function ps(){throw Error(Ue(321))}function AP(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!vu(e[i],t[i]))return!1;return!0}function kP(e,t,i,r,n,o){if(Dy=o,vr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xx.current=e===null||e.memoizedState===null?Pme:Nme,e=i(r,n),c3){o=0;do{if(c3=!1,t_=0,25<=o)throw Error(Ue(301));o+=1,kn=pn=null,t.updateQueue=null,Xx.current=Fme,e=i(r,n)}while(c3)}if(Xx.current=pE,t=pn!==null&&pn.next!==null,Dy=0,kn=pn=vr=null,dE=!1,t)throw Error(Ue(300));return e}function LP(){var e=t_!==0;return t_=0,e}function nc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?vr.memoizedState=kn=e:kn=kn.next=e,kn}function ll(){if(pn===null){var e=vr.alternate;e=e!==null?e.memoizedState:null}else e=pn.next;var t=kn===null?vr.memoizedState:kn.next;if(t!==null)kn=t,pn=e;else{if(e===null)throw Error(Ue(310));pn=e,e={memoizedState:pn.memoizedState,baseState:pn.baseState,baseQueue:pn.baseQueue,queue:pn.queue,next:null},kn===null?vr.memoizedState=kn=e:kn=kn.next=e}return kn}function i_(e,t){return typeof t=="function"?t(e):t}function U$(e){var t=ll(),i=t.queue;if(i===null)throw Error(Ue(311));i.lastRenderedReducer=e;var r=pn,n=r.baseQueue,o=i.pending;if(o!==null){if(n!==null){var u=n.next;n.next=o.next,o.next=u}r.baseQueue=n=o,i.pending=null}if(n!==null){o=n.next,r=r.baseState;var f=u=null,g=null,b=o;do{var E=b.lane;if((Dy&E)===E)g!==null&&(g=g.next={lane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),r=b.hasEagerState?b.eagerState:e(r,b.action);else{var I={lane:E,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null};g===null?(f=g=I,u=r):g=g.next=I,vr.lanes|=E,jy|=E}b=b.next}while(b!==null&&b!==o);g===null?u=r:g.next=f,vu(r,t.memoizedState)||(ko=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=g,i.lastRenderedState=r}if(e=i.interleaved,e!==null){n=e;do o=n.lane,vr.lanes|=o,jy|=o,n=n.next;while(n!==e)}else n===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function G$(e){var t=ll(),i=t.queue;if(i===null)throw Error(Ue(311));i.lastRenderedReducer=e;var r=i.dispatch,n=i.pending,o=t.memoizedState;if(n!==null){i.pending=null;var u=n=n.next;do o=e(o,u.action),u=u.next;while(u!==n);vu(o,t.memoizedState)||(ko=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),i.lastRenderedState=o}return[o,r]}function TX(){}function $X(e,t){var i=vr,r=ll(),n=t(),o=!vu(r.memoizedState,n);if(o&&(r.memoizedState=n,ko=!0),r=r.queue,OP(AX.bind(null,i,r,e),[e]),r.getSnapshot!==t||o||kn!==null&&kn.memoizedState.tag&1){if(i.flags|=2048,r_(9,CX.bind(null,i,r,n,t),void 0,null),Nn===null)throw Error(Ue(349));Dy&30||MX(i,t,n)}return n}function MX(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=vr.updateQueue,t===null?(t={lastEffect:null,stores:null},vr.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function CX(e,t,i,r){t.value=i,t.getSnapshot=r,kX(t)&&LX(e)}function AX(e,t,i){return i(function(){kX(t)&&LX(e)})}function kX(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!vu(e,i)}catch{return!0}}function LX(e){var t=rd(e,1);t!==null&&pu(t,e,1,-1)}function Uz(e){var t=nc();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i_,lastRenderedState:e},t.queue=e,e=e.dispatch=Rme.bind(null,vr,e),[t.memoizedState,e]}function r_(e,t,i,r){return e={tag:e,create:t,destroy:i,deps:r,next:null},t=vr.updateQueue,t===null?(t={lastEffect:null,stores:null},vr.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,t.lastEffect=e)),e}function OX(){return ll().memoizedState}function Qx(e,t,i,r){var n=nc();vr.flags|=e,n.memoizedState=r_(1|t,i,void 0,r===void 0?null:r)}function b6(e,t,i,r){var n=ll();r=r===void 0?null:r;var o=void 0;if(pn!==null){var u=pn.memoizedState;if(o=u.destroy,r!==null&&AP(r,u.deps)){n.memoizedState=r_(t,i,o,r);return}}vr.flags|=e,n.memoizedState=r_(1|t,i,o,r)}function Gz(e,t){return Qx(8390656,8,e,t)}function OP(e,t){return b6(2048,8,e,t)}function RX(e,t){return b6(4,2,e,t)}function PX(e,t){return b6(4,4,e,t)}function NX(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function FX(e,t,i){return i=i!=null?i.concat([e]):null,b6(4,4,NX.bind(null,t,e),i)}function RP(){}function DX(e,t){var i=ll();t=t===void 0?null:t;var r=i.memoizedState;return r!==null&&t!==null&&AP(t,r[1])?r[0]:(i.memoizedState=[e,t],e)}function jX(e,t){var i=ll();t=t===void 0?null:t;var r=i.memoizedState;return r!==null&&t!==null&&AP(t,r[1])?r[0]:(e=e(),i.memoizedState=[e,t],e)}function zX(e,t,i){return Dy&21?(vu(i,t)||(i=qY(),vr.lanes|=i,jy|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ko=!0),e.memoizedState=i)}function Lme(e,t){var i=Ti;Ti=i!==0&&4>i?i:4,e(!0);var r=V$.transition;V$.transition={};try{e(!1),t()}finally{Ti=i,V$.transition=r}}function VX(){return ll().memoizedState}function Ome(e,t,i){var r=Xp(e);if(i={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null},UX(e))GX(t,i);else if(i=xX(e,t,i,r),i!==null){var n=ro();pu(i,e,r,n),BX(i,t,r)}}function Rme(e,t,i){var r=Xp(e),n={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null};if(UX(e))GX(t,n);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var u=t.lastRenderedState,f=o(u,i);if(n.hasEagerState=!0,n.eagerState=f,vu(f,u)){var g=t.interleaved;g===null?(n.next=n,IP(t)):(n.next=g.next,g.next=n),t.interleaved=n;return}}catch{}finally{}i=xX(e,t,n,r),i!==null&&(n=ro(),pu(i,e,r,n),BX(i,t,r))}}function UX(e){var t=e.alternate;return e===vr||t!==null&&t===vr}function GX(e,t){c3=dE=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function BX(e,t,i){if(i&4194240){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,hP(e,i)}}var pE={readContext:al,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},Pme={readContext:al,useCallback:function(e,t){return nc().memoizedState=[e,t===void 0?null:t],e},useContext:al,useEffect:Gz,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Qx(4194308,4,NX.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Qx(4194308,4,e,t)},useInsertionEffect:function(e,t){return Qx(4,2,e,t)},useMemo:function(e,t){var i=nc();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var r=nc();return t=i!==void 0?i(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ome.bind(null,vr,e),[r.memoizedState,e]},useRef:function(e){var t=nc();return e={current:e},t.memoizedState=e},useState:Uz,useDebugValue:RP,useDeferredValue:function(e){return nc().memoizedState=e},useTransition:function(){var e=Uz(!1),t=e[0];return e=Lme.bind(null,e[1]),nc().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var r=vr,n=nc();if(ur){if(i===void 0)throw Error(Ue(407));i=i()}else{if(i=t(),Nn===null)throw Error(Ue(349));Dy&30||MX(r,t,i)}n.memoizedState=i;var o={value:i,getSnapshot:t};return n.queue=o,Gz(AX.bind(null,r,o,e),[e]),r.flags|=2048,r_(9,CX.bind(null,r,o,i,t),void 0,null),i},useId:function(){var e=nc(),t=Nn.identifierPrefix;if(ur){var i=Hh,r=qh;i=(r&~(1<<32-du(r)-1)).toString(32)+i,t=":"+t+"R"+i,i=t_++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=kme++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Nme={readContext:al,useCallback:DX,useContext:al,useEffect:OP,useImperativeHandle:FX,useInsertionEffect:RX,useLayoutEffect:PX,useMemo:jX,useReducer:U$,useRef:OX,useState:function(){return U$(i_)},useDebugValue:RP,useDeferredValue:function(e){var t=ll();return zX(t,pn.memoizedState,e)},useTransition:function(){var e=U$(i_)[0],t=ll().memoizedState;return[e,t]},useMutableSource:TX,useSyncExternalStore:$X,useId:VX,unstable_isNewReconciler:!1},Fme={readContext:al,useCallback:DX,useContext:al,useEffect:OP,useImperativeHandle:FX,useInsertionEffect:RX,useLayoutEffect:PX,useMemo:jX,useReducer:G$,useRef:OX,useState:function(){return G$(i_)},useDebugValue:RP,useDeferredValue:function(e){var t=ll();return pn===null?t.memoizedState=e:zX(t,pn.memoizedState,e)},useTransition:function(){var e=G$(i_)[0],t=ll().memoizedState;return[e,t]},useMutableSource:TX,useSyncExternalStore:$X,useId:VX,unstable_isNewReconciler:!1};function Ql(e,t){if(e&&e.defaultProps){t=wr({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function qC(e,t,i,r){t=e.memoizedState,i=i(r,t),i=i==null?t:wr({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var _6={isMounted:function(e){return(e=e._reactInternals)?hm(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var r=ro(),n=Xp(e),o=Jh(r,n);o.payload=t,i!=null&&(o.callback=i),t=Kp(e,o,n),t!==null&&(pu(t,e,n,r),Yx(t,e,n))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var r=ro(),n=Xp(e),o=Jh(r,n);o.tag=1,o.payload=t,i!=null&&(o.callback=i),t=Kp(e,o,n),t!==null&&(pu(t,e,n,r),Yx(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=ro(),r=Xp(e),n=Jh(i,r);n.tag=2,t!=null&&(n.callback=t),t=Kp(e,n,r),t!==null&&(pu(t,e,r,i),Yx(t,e,r))}};function Bz(e,t,i,r,n,o,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,u):t.prototype&&t.prototype.isPureReactComponent?!J3(i,r)||!J3(n,o):!0}function qX(e,t,i){var r=!1,n=cf,o=t.contextType;return typeof o=="object"&&o!==null?o=al(o):(n=No(t)?Ny:js.current,r=t.contextTypes,o=(r=r!=null)?Sv(e,n):cf),t=new t(i,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=_6,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=o),t}function qz(e,t,i,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,r),t.state!==e&&_6.enqueueReplaceState(t,t.state,null)}function HC(e,t,i,r){var n=e.stateNode;n.props=i,n.state=e.memoizedState,n.refs={},TP(e);var o=t.contextType;typeof o=="object"&&o!==null?n.context=al(o):(o=No(t)?Ny:js.current,n.context=Sv(e,o)),n.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(qC(e,t,o,i),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&_6.enqueueReplaceState(n,n.state,null),cE(e,i,n,r),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function Tv(e,t){try{var i="",r=t;do i+=hye(r),r=r.return;while(r);var n=i}catch(o){n=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:n,digest:null}}function B$(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function WC(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var Dme=typeof WeakMap=="function"?WeakMap:Map;function HX(e,t,i){i=Jh(-1,i),i.tag=3,i.payload={element:null};var r=t.value;return i.callback=function(){yE||(yE=!0,rA=r),WC(e,t)},i}function WX(e,t,i){i=Jh(-1,i),i.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var n=t.value;i.payload=function(){return r(n)},i.callback=function(){WC(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(i.callback=function(){WC(e,t),typeof r!="function"&&(Yp===null?Yp=new Set([this]):Yp.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),i}function Hz(e,t,i){var r=e.pingCache;if(r===null){r=e.pingCache=new Dme;var n=new Set;r.set(t,n)}else n=r.get(t),n===void 0&&(n=new Set,r.set(t,n));n.has(i)||(n.add(i),e=Xme.bind(null,e,t,i),t.then(e,e))}function Wz(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zz(e,t,i,r,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Jh(-1,1),t.tag=2,Kp(i,t,1))),i.lanes|=1),e)}var jme=cd.ReactCurrentOwner,ko=!1;function Ys(e,t,i,r){t.child=e===null?SX(t,null,i,r):Ev(t,e.child,i,r)}function Jz(e,t,i,r,n){i=i.render;var o=t.ref;return Jg(t,n),r=kP(e,t,i,r,o,n),i=LP(),e!==null&&!ko?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,nd(e,t,n)):(ur&&i&&wP(t),t.flags|=1,Ys(e,t,r,n),t.child)}function Kz(e,t,i,r,n){if(e===null){var o=i.type;return typeof o=="function"&&!UP(o)&&o.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=o,ZX(e,t,o,r,n)):(e=r9(i.type,null,r,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&n)){var u=o.memoizedProps;if(i=i.compare,i=i!==null?i:J3,i(u,r)&&e.ref===t.ref)return nd(e,t,n)}return t.flags|=1,e=Qp(o,r),e.ref=t.ref,e.return=t,t.child=e}function ZX(e,t,i,r,n){if(e!==null){var o=e.memoizedProps;if(J3(o,r)&&e.ref===t.ref)if(ko=!1,t.pendingProps=r=o,(e.lanes&n)!==0)e.flags&131072&&(ko=!0);else return t.lanes=e.lanes,nd(e,t,n)}return ZC(e,t,i,r,n)}function JX(e,t,i){var r=t.pendingProps,n=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bi(Mg,aa),aa|=i;else{if(!(i&1073741824))return e=o!==null?o.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Bi(Mg,aa),aa|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:i,Bi(Mg,aa),aa|=r}else o!==null?(r=o.baseLanes|i,t.memoizedState=null):r=i,Bi(Mg,aa),aa|=r;return Ys(e,t,n,i),t.child}function KX(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function ZC(e,t,i,r,n){var o=No(i)?Ny:js.current;return o=Sv(t,o),Jg(t,n),i=kP(e,t,i,r,o,n),r=LP(),e!==null&&!ko?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,nd(e,t,n)):(ur&&r&&wP(t),t.flags|=1,Ys(e,t,i,n),t.child)}function Yz(e,t,i,r,n){if(No(i)){var o=!0;sE(t)}else o=!1;if(Jg(t,n),t.stateNode===null)e9(e,t),qX(t,i,r),HC(t,i,r,n),r=!0;else if(e===null){var u=t.stateNode,f=t.memoizedProps;u.props=f;var g=u.context,b=i.contextType;typeof b=="object"&&b!==null?b=al(b):(b=No(i)?Ny:js.current,b=Sv(t,b));var E=i.getDerivedStateFromProps,I=typeof E=="function"||typeof u.getSnapshotBeforeUpdate=="function";I||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(f!==r||g!==b)&&qz(t,u,r,b),wp=!1;var M=t.memoizedState;u.state=M,cE(t,r,u,n),g=t.memoizedState,f!==r||M!==g||Po.current||wp?(typeof E=="function"&&(qC(t,i,E,r),g=t.memoizedState),(f=wp||Bz(t,i,f,r,M,g,b))?(I||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=g),u.props=r,u.state=g,u.context=b,r=f):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{u=t.stateNode,EX(e,t),f=t.memoizedProps,b=t.type===t.elementType?f:Ql(t.type,f),u.props=b,I=t.pendingProps,M=u.context,g=i.contextType,typeof g=="object"&&g!==null?g=al(g):(g=No(i)?Ny:js.current,g=Sv(t,g));var k=i.getDerivedStateFromProps;(E=typeof k=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(f!==I||M!==g)&&qz(t,u,r,g),wp=!1,M=t.memoizedState,u.state=M,cE(t,r,u,n);var L=t.memoizedState;f!==I||M!==L||Po.current||wp?(typeof k=="function"&&(qC(t,i,k,r),L=t.memoizedState),(b=wp||Bz(t,i,b,r,M,L,g)||!1)?(E||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,L,g),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,L,g)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||f===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=L),u.props=r,u.state=L,u.context=g,r=b):(typeof u.componentDidUpdate!="function"||f===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),r=!1)}return JC(e,t,i,r,o,n)}function JC(e,t,i,r,n,o){KX(e,t);var u=(t.flags&128)!==0;if(!r&&!u)return n&&Nz(t,i,!1),nd(e,t,o);r=t.stateNode,jme.current=t;var f=u&&typeof i.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&u?(t.child=Ev(t,e.child,null,o),t.child=Ev(t,null,f,o)):Ys(e,t,f,o),t.memoizedState=r.state,n&&Nz(t,i,!0),t.child}function YX(e){var t=e.stateNode;t.pendingContext?Pz(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Pz(e,t.context,!1),$P(e,t.containerInfo)}function Xz(e,t,i,r,n){return xv(),_P(n),t.flags|=256,Ys(e,t,i,r),t.child}var KC={dehydrated:null,treeContext:null,retryLane:0};function YC(e){return{baseLanes:e,cachePool:null,transitions:null}}function XX(e,t,i){var r=t.pendingProps,n=gr.current,o=!1,u=(t.flags&128)!==0,f;if((f=u)||(f=e!==null&&e.memoizedState===null?!1:(n&2)!==0),f?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),Bi(gr,n&1),e===null)return GC(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=r.children,e=r.fallback,o?(r=t.mode,o=t.child,u={mode:"hidden",children:u},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=u):o=E6(u,r,0,null),e=by(e,r,i,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=YC(i),t.memoizedState=KC,e):PP(t,u));if(n=e.memoizedState,n!==null&&(f=n.dehydrated,f!==null))return zme(e,t,u,r,f,n,i);if(o){o=r.fallback,u=t.mode,n=e.child,f=n.sibling;var g={mode:"hidden",children:r.children};return!(u&1)&&t.child!==n?(r=t.child,r.childLanes=0,r.pendingProps=g,t.deletions=null):(r=Qp(n,g),r.subtreeFlags=n.subtreeFlags&14680064),f!==null?o=Qp(f,o):(o=by(o,u,i,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,u=e.child.memoizedState,u=u===null?YC(i):{baseLanes:u.baseLanes|i,cachePool:null,transitions:u.transitions},o.memoizedState=u,o.childLanes=e.childLanes&~i,t.memoizedState=KC,r}return o=e.child,e=o.sibling,r=Qp(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=i),r.return=t,r.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=r,t.memoizedState=null,r}function PP(e,t){return t=E6({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function h5(e,t,i,r){return r!==null&&_P(r),Ev(t,e.child,null,i),e=PP(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function zme(e,t,i,r,n,o,u){if(i)return t.flags&256?(t.flags&=-257,r=B$(Error(Ue(422))),h5(e,t,u,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,n=t.mode,r=E6({mode:"visible",children:r.children},n,0,null),o=by(o,n,u,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Ev(t,e.child,null,u),t.child.memoizedState=YC(u),t.memoizedState=KC,o);if(!(t.mode&1))return h5(e,t,u,null);if(n.data==="$!"){if(r=n.nextSibling&&n.nextSibling.dataset,r)var f=r.dgst;return r=f,o=Error(Ue(419)),r=B$(o,r,void 0),h5(e,t,u,r)}if(f=(u&e.childLanes)!==0,ko||f){if(r=Nn,r!==null){switch(u&-u){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(r.suspendedLanes|u)?0:n,n!==0&&n!==o.retryLane&&(o.retryLane=n,rd(e,n),pu(r,e,n,-1))}return VP(),r=B$(Error(Ue(421))),h5(e,t,u,r)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=Qme.bind(null,e),n._reactRetry=t,null):(e=o.treeContext,ua=Jp(n.nextSibling),da=t,ur=!0,su=null,e!==null&&(Ja[Ka++]=qh,Ja[Ka++]=Hh,Ja[Ka++]=Fy,qh=e.id,Hh=e.overflow,Fy=t),t=PP(t,r.children),t.flags|=4096,t)}function Qz(e,t,i){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),BC(e.return,t,i)}function q$(e,t,i,r,n){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:n}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=i,o.tailMode=n)}function QX(e,t,i){var r=t.pendingProps,n=r.revealOrder,o=r.tail;if(Ys(e,t,r.children,i),r=gr.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Qz(e,i,t);else if(e.tag===19)Qz(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Bi(gr,r),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(i=t.child,n=null;i!==null;)e=i.alternate,e!==null&&hE(e)===null&&(n=i),i=i.sibling;i=n,i===null?(n=t.child,t.child=null):(n=i.sibling,i.sibling=null),q$(t,!1,n,i,o);break;case"backwards":for(i=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&hE(e)===null){t.child=n;break}e=n.sibling,n.sibling=i,i=n,n=e}q$(t,!0,i,null,o);break;case"together":q$(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function e9(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function nd(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),jy|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ue(153));if(t.child!==null){for(e=t.child,i=Qp(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Qp(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Vme(e,t,i){switch(t.tag){case 3:YX(t),xv();break;case 5:IX(t);break;case 1:No(t.type)&&sE(t);break;case 4:$P(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,n=t.memoizedProps.value;Bi(lE,r._currentValue),r._currentValue=n;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Bi(gr,gr.current&1),t.flags|=128,null):i&t.child.childLanes?XX(e,t,i):(Bi(gr,gr.current&1),e=nd(e,t,i),e!==null?e.sibling:null);Bi(gr,gr.current&1);break;case 19:if(r=(i&t.childLanes)!==0,e.flags&128){if(r)return QX(e,t,i);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Bi(gr,gr.current),r)break;return null;case 22:case 23:return t.lanes=0,JX(e,t,i)}return nd(e,t,i)}var eQ,XC,tQ,iQ;eQ=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};XC=function(){};tQ=function(e,t,i,r){var n=e.memoizedProps;if(n!==r){e=t.stateNode,cy(xc.current);var o=null;switch(i){case"input":n=bC(e,n),r=bC(e,r),o=[];break;case"select":n=wr({},n,{value:void 0}),r=wr({},r,{value:void 0}),o=[];break;case"textarea":n=xC(e,n),r=xC(e,r),o=[];break;default:typeof n.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=rE)}IC(i,r);var u;i=null;for(b in n)if(!r.hasOwnProperty(b)&&n.hasOwnProperty(b)&&n[b]!=null)if(b==="style"){var f=n[b];for(u in f)f.hasOwnProperty(u)&&(i||(i={}),i[u]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(U3.hasOwnProperty(b)?o||(o=[]):(o=o||[]).push(b,null));for(b in r){var g=r[b];if(f=n!=null?n[b]:void 0,r.hasOwnProperty(b)&&g!==f&&(g!=null||f!=null))if(b==="style")if(f){for(u in f)!f.hasOwnProperty(u)||g&&g.hasOwnProperty(u)||(i||(i={}),i[u]="");for(u in g)g.hasOwnProperty(u)&&f[u]!==g[u]&&(i||(i={}),i[u]=g[u])}else i||(o||(o=[]),o.push(b,i)),i=g;else b==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,f=f?f.__html:void 0,g!=null&&f!==g&&(o=o||[]).push(b,g)):b==="children"?typeof g!="string"&&typeof g!="number"||(o=o||[]).push(b,""+g):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(U3.hasOwnProperty(b)?(g!=null&&b==="onScroll"&&Wi("scroll",e),o||f===g||(o=[])):(o=o||[]).push(b,g))}i&&(o=o||[]).push("style",i);var b=o;(t.updateQueue=b)&&(t.flags|=4)}};iQ=function(e,t,i,r){i!==r&&(t.flags|=4)};function ew(e,t){if(!ur)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function fs(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,r=0;if(t)for(var n=e.child;n!==null;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags&14680064,r|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=r,e.childLanes=i,t}function Ume(e,t,i){var r=t.pendingProps;switch(bP(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fs(t),null;case 1:return No(t.type)&&nE(),fs(t),null;case 3:return r=t.stateNode,Iv(),er(Po),er(js),CP(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(u5(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,su!==null&&(oA(su),su=null))),XC(e,t),fs(t),null;case 5:MP(t);var n=cy(e_.current);if(i=t.type,e!==null&&t.stateNode!=null)tQ(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Ue(166));return fs(t),null}if(e=cy(xc.current),u5(t)){r=t.stateNode,i=t.type;var o=t.memoizedProps;switch(r[wc]=t,r[X3]=o,e=(t.mode&1)!==0,i){case"dialog":Wi("cancel",r),Wi("close",r);break;case"iframe":case"object":case"embed":Wi("load",r);break;case"video":case"audio":for(n=0;n<Uw.length;n++)Wi(Uw[n],r);break;case"source":Wi("error",r);break;case"img":case"image":case"link":Wi("error",r),Wi("load",r);break;case"details":Wi("toggle",r);break;case"input":lz(r,o),Wi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Wi("invalid",r);break;case"textarea":cz(r,o),Wi("invalid",r)}IC(i,o),n=null;for(var u in o)if(o.hasOwnProperty(u)){var f=o[u];u==="children"?typeof f=="string"?r.textContent!==f&&(o.suppressHydrationWarning!==!0&&l5(r.textContent,f,e),n=["children",f]):typeof f=="number"&&r.textContent!==""+f&&(o.suppressHydrationWarning!==!0&&l5(r.textContent,f,e),n=["children",""+f]):U3.hasOwnProperty(u)&&f!=null&&u==="onScroll"&&Wi("scroll",r)}switch(i){case"input":e5(r),uz(r,o,!0);break;case"textarea":e5(r),hz(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=rE)}r=n,t.updateQueue=r,r!==null&&(t.flags|=4)}else{u=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=AY(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=u.createElement(i,{is:r.is}):(e=u.createElement(i),i==="select"&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,i),e[wc]=t,e[X3]=r,eQ(e,t,!1,!1),t.stateNode=e;e:{switch(u=TC(i,r),i){case"dialog":Wi("cancel",e),Wi("close",e),n=r;break;case"iframe":case"object":case"embed":Wi("load",e),n=r;break;case"video":case"audio":for(n=0;n<Uw.length;n++)Wi(Uw[n],e);n=r;break;case"source":Wi("error",e),n=r;break;case"img":case"image":case"link":Wi("error",e),Wi("load",e),n=r;break;case"details":Wi("toggle",e),n=r;break;case"input":lz(e,r),n=bC(e,r),Wi("invalid",e);break;case"option":n=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},n=wr({},r,{value:void 0}),Wi("invalid",e);break;case"textarea":cz(e,r),n=xC(e,r),Wi("invalid",e);break;default:n=r}IC(i,n),f=n;for(o in f)if(f.hasOwnProperty(o)){var g=f[o];o==="style"?OY(e,g):o==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&kY(e,g)):o==="children"?typeof g=="string"?(i!=="textarea"||g!=="")&&G3(e,g):typeof g=="number"&&G3(e,""+g):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(U3.hasOwnProperty(o)?g!=null&&o==="onScroll"&&Wi("scroll",e):g!=null&&sP(e,o,g,u))}switch(i){case"input":e5(e),uz(e,r,!1);break;case"textarea":e5(e),hz(e);break;case"option":r.value!=null&&e.setAttribute("value",""+uf(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?qg(e,!!r.multiple,o,!1):r.defaultValue!=null&&qg(e,!!r.multiple,r.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=rE)}switch(i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return fs(t),null;case 6:if(e&&t.stateNode!=null)iQ(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Ue(166));if(i=cy(e_.current),cy(xc.current),u5(t)){if(r=t.stateNode,i=t.memoizedProps,r[wc]=t,(o=r.nodeValue!==i)&&(e=da,e!==null))switch(e.tag){case 3:l5(r.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&l5(r.nodeValue,i,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(i.nodeType===9?i:i.ownerDocument).createTextNode(r),r[wc]=t,t.stateNode=r}return fs(t),null;case 13:if(er(gr),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ur&&ua!==null&&t.mode&1&&!(t.flags&128))bX(),xv(),t.flags|=98560,o=!1;else if(o=u5(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(Ue(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Ue(317));o[wc]=t}else xv(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;fs(t),o=!1}else su!==null&&(oA(su),su=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||gr.current&1?mn===0&&(mn=3):VP())),t.updateQueue!==null&&(t.flags|=4),fs(t),null);case 4:return Iv(),XC(e,t),e===null&&K3(t.stateNode.containerInfo),fs(t),null;case 10:return EP(t.type._context),fs(t),null;case 17:return No(t.type)&&nE(),fs(t),null;case 19:if(er(gr),o=t.memoizedState,o===null)return fs(t),null;if(r=(t.flags&128)!==0,u=o.rendering,u===null)if(r)ew(o,!1);else{if(mn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=hE(e),u!==null){for(t.flags|=128,ew(o,!1),r=u.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=i,i=t.child;i!==null;)o=i,e=r,o.flags&=14680066,u=o.alternate,u===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Bi(gr,gr.current&1|2),t.child}e=e.sibling}o.tail!==null&&zr()>$v&&(t.flags|=128,r=!0,ew(o,!1),t.lanes=4194304)}else{if(!r)if(e=hE(u),e!==null){if(t.flags|=128,r=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),ew(o,!0),o.tail===null&&o.tailMode==="hidden"&&!u.alternate&&!ur)return fs(t),null}else 2*zr()-o.renderingStartTime>$v&&i!==1073741824&&(t.flags|=128,r=!0,ew(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(i=o.last,i!==null?i.sibling=u:t.child=u,o.last=u)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=zr(),t.sibling=null,i=gr.current,Bi(gr,r?i&1|2:i&1),t):(fs(t),null);case 22:case 23:return zP(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?aa&1073741824&&(fs(t),t.subtreeFlags&6&&(t.flags|=8192)):fs(t),null;case 24:return null;case 25:return null}throw Error(Ue(156,t.tag))}function Gme(e,t){switch(bP(t),t.tag){case 1:return No(t.type)&&nE(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Iv(),er(Po),er(js),CP(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return MP(t),null;case 13:if(er(gr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ue(340));xv()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return er(gr),null;case 4:return Iv(),null;case 10:return EP(t.type._context),null;case 22:case 23:return zP(),null;case 24:return null;default:return null}}var d5=!1,Ls=!1,Bme=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function $g(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(r){kr(e,t,r)}else i.current=null}function QC(e,t,i){try{i()}catch(r){kr(e,t,r)}}var eV=!1;function qme(e,t){if(NC=eE,e=aX(),vP(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var r=i.getSelection&&i.getSelection();if(r&&r.rangeCount!==0){i=r.anchorNode;var n=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{i.nodeType,o.nodeType}catch{i=null;break e}var u=0,f=-1,g=-1,b=0,E=0,I=e,M=null;t:for(;;){for(var k;I!==i||n!==0&&I.nodeType!==3||(f=u+n),I!==o||r!==0&&I.nodeType!==3||(g=u+r),I.nodeType===3&&(u+=I.nodeValue.length),(k=I.firstChild)!==null;)M=I,I=k;for(;;){if(I===e)break t;if(M===i&&++b===n&&(f=u),M===o&&++E===r&&(g=u),(k=I.nextSibling)!==null)break;I=M,M=I.parentNode}I=k}i=f===-1||g===-1?null:{start:f,end:g}}else i=null}i=i||{start:0,end:0}}else i=null;for(FC={focusedElem:e,selectionRange:i},eE=!1,Qe=t;Qe!==null;)if(t=Qe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Qe=e;else for(;Qe!==null;){t=Qe;try{var L=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(L!==null){var P=L.memoizedProps,D=L.memoizedState,j=t.stateNode,z=j.getSnapshotBeforeUpdate(t.elementType===t.type?P:Ql(t.type,P),D);j.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var V=t.stateNode.containerInfo;V.nodeType===1?V.textContent="":V.nodeType===9&&V.documentElement&&V.removeChild(V.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ue(163))}}catch(W){kr(t,t.return,W)}if(e=t.sibling,e!==null){e.return=t.return,Qe=e;break}Qe=t.return}return L=eV,eV=!1,L}function h3(e,t,i){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do{if((n.tag&e)===e){var o=n.destroy;n.destroy=void 0,o!==void 0&&QC(t,i,o)}n=n.next}while(n!==r)}}function S6(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var r=i.create;i.destroy=r()}i=i.next}while(i!==t)}}function eA(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function rQ(e){var t=e.alternate;t!==null&&(e.alternate=null,rQ(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[wc],delete t[X3],delete t[zC],delete t[$me],delete t[Mme])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function nQ(e){return e.tag===5||e.tag===3||e.tag===4}function tV(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||nQ(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tA(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=rE));else if(r!==4&&(e=e.child,e!==null))for(tA(e,t,i),e=e.sibling;e!==null;)tA(e,t,i),e=e.sibling}function iA(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(iA(e,t,i),e=e.sibling;e!==null;)iA(e,t,i),e=e.sibling}var ts=null,iu=!1;function bd(e,t,i){for(i=i.child;i!==null;)sQ(e,t,i),i=i.sibling}function sQ(e,t,i){if(Sc&&typeof Sc.onCommitFiberUnmount=="function")try{Sc.onCommitFiberUnmount(f6,i)}catch{}switch(i.tag){case 5:Ls||$g(i,t);case 6:var r=ts,n=iu;ts=null,bd(e,t,i),ts=r,iu=n,ts!==null&&(iu?(e=ts,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):ts.removeChild(i.stateNode));break;case 18:ts!==null&&(iu?(e=ts,i=i.stateNode,e.nodeType===8?D$(e.parentNode,i):e.nodeType===1&&D$(e,i),W3(e)):D$(ts,i.stateNode));break;case 4:r=ts,n=iu,ts=i.stateNode.containerInfo,iu=!0,bd(e,t,i),ts=r,iu=n;break;case 0:case 11:case 14:case 15:if(!Ls&&(r=i.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){n=r=r.next;do{var o=n,u=o.destroy;o=o.tag,u!==void 0&&(o&2||o&4)&&QC(i,t,u),n=n.next}while(n!==r)}bd(e,t,i);break;case 1:if(!Ls&&($g(i,t),r=i.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=i.memoizedProps,r.state=i.memoizedState,r.componentWillUnmount()}catch(f){kr(i,t,f)}bd(e,t,i);break;case 21:bd(e,t,i);break;case 22:i.mode&1?(Ls=(r=Ls)||i.memoizedState!==null,bd(e,t,i),Ls=r):bd(e,t,i);break;default:bd(e,t,i)}}function iV(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new Bme),t.forEach(function(r){var n=e1e.bind(null,e,r);i.has(r)||(i.add(r),r.then(n,n))})}}function wl(e,t){var i=t.deletions;if(i!==null)for(var r=0;r<i.length;r++){var n=i[r];try{var o=e,u=t,f=u;e:for(;f!==null;){switch(f.tag){case 5:ts=f.stateNode,iu=!1;break e;case 3:ts=f.stateNode.containerInfo,iu=!0;break e;case 4:ts=f.stateNode.containerInfo,iu=!0;break e}f=f.return}if(ts===null)throw Error(Ue(160));sQ(o,u,n),ts=null,iu=!1;var g=n.alternate;g!==null&&(g.return=null),n.return=null}catch(b){kr(n,t,b)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)oQ(t,e),t=t.sibling}function oQ(e,t){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wl(t,e),$u(e),r&4){try{h3(3,e,e.return),S6(3,e)}catch(P){kr(e,e.return,P)}try{h3(5,e,e.return)}catch(P){kr(e,e.return,P)}}break;case 1:wl(t,e),$u(e),r&512&&i!==null&&$g(i,i.return);break;case 5:if(wl(t,e),$u(e),r&512&&i!==null&&$g(i,i.return),e.flags&32){var n=e.stateNode;try{G3(n,"")}catch(P){kr(e,e.return,P)}}if(r&4&&(n=e.stateNode,n!=null)){var o=e.memoizedProps,u=i!==null?i.memoizedProps:o,f=e.type,g=e.updateQueue;if(e.updateQueue=null,g!==null)try{f==="input"&&o.type==="radio"&&o.name!=null&&MY(n,o),TC(f,u);var b=TC(f,o);for(u=0;u<g.length;u+=2){var E=g[u],I=g[u+1];E==="style"?OY(n,I):E==="dangerouslySetInnerHTML"?kY(n,I):E==="children"?G3(n,I):sP(n,E,I,b)}switch(f){case"input":_C(n,o);break;case"textarea":CY(n,o);break;case"select":var M=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!o.multiple;var k=o.value;k!=null?qg(n,!!o.multiple,k,!1):M!==!!o.multiple&&(o.defaultValue!=null?qg(n,!!o.multiple,o.defaultValue,!0):qg(n,!!o.multiple,o.multiple?[]:"",!1))}n[X3]=o}catch(P){kr(e,e.return,P)}}break;case 6:if(wl(t,e),$u(e),r&4){if(e.stateNode===null)throw Error(Ue(162));n=e.stateNode,o=e.memoizedProps;try{n.nodeValue=o}catch(P){kr(e,e.return,P)}}break;case 3:if(wl(t,e),$u(e),r&4&&i!==null&&i.memoizedState.isDehydrated)try{W3(t.containerInfo)}catch(P){kr(e,e.return,P)}break;case 4:wl(t,e),$u(e);break;case 13:wl(t,e),$u(e),n=e.child,n.flags&8192&&(o=n.memoizedState!==null,n.stateNode.isHidden=o,!o||n.alternate!==null&&n.alternate.memoizedState!==null||(DP=zr())),r&4&&iV(e);break;case 22:if(E=i!==null&&i.memoizedState!==null,e.mode&1?(Ls=(b=Ls)||E,wl(t,e),Ls=b):wl(t,e),$u(e),r&8192){if(b=e.memoizedState!==null,(e.stateNode.isHidden=b)&&!E&&e.mode&1)for(Qe=e,E=e.child;E!==null;){for(I=Qe=E;Qe!==null;){switch(M=Qe,k=M.child,M.tag){case 0:case 11:case 14:case 15:h3(4,M,M.return);break;case 1:$g(M,M.return);var L=M.stateNode;if(typeof L.componentWillUnmount=="function"){r=M,i=M.return;try{t=r,L.props=t.memoizedProps,L.state=t.memoizedState,L.componentWillUnmount()}catch(P){kr(r,i,P)}}break;case 5:$g(M,M.return);break;case 22:if(M.memoizedState!==null){nV(I);continue}}k!==null?(k.return=M,Qe=k):nV(I)}E=E.sibling}e:for(E=null,I=e;;){if(I.tag===5){if(E===null){E=I;try{n=I.stateNode,b?(o=n.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(f=I.stateNode,g=I.memoizedProps.style,u=g!=null&&g.hasOwnProperty("display")?g.display:null,f.style.display=LY("display",u))}catch(P){kr(e,e.return,P)}}}else if(I.tag===6){if(E===null)try{I.stateNode.nodeValue=b?"":I.memoizedProps}catch(P){kr(e,e.return,P)}}else if((I.tag!==22&&I.tag!==23||I.memoizedState===null||I===e)&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===e)break e;for(;I.sibling===null;){if(I.return===null||I.return===e)break e;E===I&&(E=null),I=I.return}E===I&&(E=null),I.sibling.return=I.return,I=I.sibling}}break;case 19:wl(t,e),$u(e),r&4&&iV(e);break;case 21:break;default:wl(t,e),$u(e)}}function $u(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(nQ(i)){var r=i;break e}i=i.return}throw Error(Ue(160))}switch(r.tag){case 5:var n=r.stateNode;r.flags&32&&(G3(n,""),r.flags&=-33);var o=tV(e);iA(e,o,n);break;case 3:case 4:var u=r.stateNode.containerInfo,f=tV(e);tA(e,f,u);break;default:throw Error(Ue(161))}}catch(g){kr(e,e.return,g)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Hme(e,t,i){Qe=e,aQ(e)}function aQ(e,t,i){for(var r=(e.mode&1)!==0;Qe!==null;){var n=Qe,o=n.child;if(n.tag===22&&r){var u=n.memoizedState!==null||d5;if(!u){var f=n.alternate,g=f!==null&&f.memoizedState!==null||Ls;f=d5;var b=Ls;if(d5=u,(Ls=g)&&!b)for(Qe=n;Qe!==null;)u=Qe,g=u.child,u.tag===22&&u.memoizedState!==null?sV(n):g!==null?(g.return=u,Qe=g):sV(n);for(;o!==null;)Qe=o,aQ(o),o=o.sibling;Qe=n,d5=f,Ls=b}rV(e)}else n.subtreeFlags&8772&&o!==null?(o.return=n,Qe=o):rV(e)}}function rV(e){for(;Qe!==null;){var t=Qe;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ls||S6(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ls)if(i===null)r.componentDidMount();else{var n=t.elementType===t.type?i.memoizedProps:Ql(t.type,i.memoizedProps);r.componentDidUpdate(n,i.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Vz(t,o,r);break;case 3:var u=t.updateQueue;if(u!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Vz(t,u,i)}break;case 5:var f=t.stateNode;if(i===null&&t.flags&4){i=f;var g=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&i.focus();break;case"img":g.src&&(i.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var b=t.alternate;if(b!==null){var E=b.memoizedState;if(E!==null){var I=E.dehydrated;I!==null&&W3(I)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ue(163))}Ls||t.flags&512&&eA(t)}catch(M){kr(t,t.return,M)}}if(t===e){Qe=null;break}if(i=t.sibling,i!==null){i.return=t.return,Qe=i;break}Qe=t.return}}function nV(e){for(;Qe!==null;){var t=Qe;if(t===e){Qe=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Qe=i;break}Qe=t.return}}function sV(e){for(;Qe!==null;){var t=Qe;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{S6(4,t)}catch(g){kr(t,i,g)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var n=t.return;try{r.componentDidMount()}catch(g){kr(t,n,g)}}var o=t.return;try{eA(t)}catch(g){kr(t,o,g)}break;case 5:var u=t.return;try{eA(t)}catch(g){kr(t,u,g)}}}catch(g){kr(t,t.return,g)}if(t===e){Qe=null;break}var f=t.sibling;if(f!==null){f.return=t.return,Qe=f;break}Qe=t.return}}var Wme=Math.ceil,fE=cd.ReactCurrentDispatcher,NP=cd.ReactCurrentOwner,rl=cd.ReactCurrentBatchConfig,ni=0,Nn=null,en=null,ns=0,aa=0,Mg=Ef(0),mn=0,n_=null,jy=0,x6=0,FP=0,d3=null,To=null,DP=0,$v=1/0,Ah=null,yE=!1,rA=null,Yp=null,p5=!1,Pp=null,mE=0,p3=0,nA=null,t9=-1,i9=0;function ro(){return ni&6?zr():t9!==-1?t9:t9=zr()}function Xp(e){return e.mode&1?ni&2&&ns!==0?ns&-ns:Ame.transition!==null?(i9===0&&(i9=qY()),i9):(e=Ti,e!==0||(e=window.event,e=e===void 0?16:XY(e.type)),e):1}function pu(e,t,i,r){if(50<p3)throw p3=0,nA=null,Error(Ue(185));q_(e,i,r),(!(ni&2)||e!==Nn)&&(e===Nn&&(!(ni&2)&&(x6|=i),mn===4&&Ap(e,ns)),Fo(e,r),i===1&&ni===0&&!(t.mode&1)&&($v=zr()+500,w6&&If()))}function Fo(e,t){var i=e.callbackNode;Aye(e,t);var r=Q4(e,e===Nn?ns:0);if(r===0)i!==null&&fz(i),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(i!=null&&fz(i),t===1)e.tag===0?Cme(oV.bind(null,e)):gX(oV.bind(null,e)),Ime(function(){!(ni&6)&&If()}),i=null;else{switch(HY(r)){case 1:i=cP;break;case 4:i=GY;break;case 16:i=X4;break;case 536870912:i=BY;break;default:i=X4}i=yQ(i,lQ.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function lQ(e,t){if(t9=-1,i9=0,ni&6)throw Error(Ue(327));var i=e.callbackNode;if(Kg()&&e.callbackNode!==i)return null;var r=Q4(e,e===Nn?ns:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=gE(e,r);else{t=r;var n=ni;ni|=2;var o=cQ();(Nn!==e||ns!==t)&&(Ah=null,$v=zr()+500,wy(e,t));do try{Kme();break}catch(f){uQ(e,f)}while(!0);xP(),fE.current=o,ni=n,en!==null?t=0:(Nn=null,ns=0,t=mn)}if(t!==0){if(t===2&&(n=kC(e),n!==0&&(r=n,t=sA(e,n))),t===1)throw i=n_,wy(e,0),Ap(e,r),Fo(e,zr()),i;if(t===6)Ap(e,r);else{if(n=e.current.alternate,!(r&30)&&!Zme(n)&&(t=gE(e,r),t===2&&(o=kC(e),o!==0&&(r=o,t=sA(e,o))),t===1))throw i=n_,wy(e,0),Ap(e,r),Fo(e,zr()),i;switch(e.finishedWork=n,e.finishedLanes=r,t){case 0:case 1:throw Error(Ue(345));case 2:Qf(e,To,Ah);break;case 3:if(Ap(e,r),(r&130023424)===r&&(t=DP+500-zr(),10<t)){if(Q4(e,0)!==0)break;if(n=e.suspendedLanes,(n&r)!==r){ro(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=jC(Qf.bind(null,e,To,Ah),t);break}Qf(e,To,Ah);break;case 4:if(Ap(e,r),(r&4194240)===r)break;for(t=e.eventTimes,n=-1;0<r;){var u=31-du(r);o=1<<u,u=t[u],u>n&&(n=u),r&=~o}if(r=n,r=zr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Wme(r/1960))-r,10<r){e.timeoutHandle=jC(Qf.bind(null,e,To,Ah),r);break}Qf(e,To,Ah);break;case 5:Qf(e,To,Ah);break;default:throw Error(Ue(329))}}}return Fo(e,zr()),e.callbackNode===i?lQ.bind(null,e):null}function sA(e,t){var i=d3;return e.current.memoizedState.isDehydrated&&(wy(e,t).flags|=256),e=gE(e,t),e!==2&&(t=To,To=i,t!==null&&oA(t)),e}function oA(e){To===null?To=e:To.push.apply(To,e)}function Zme(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var r=0;r<i.length;r++){var n=i[r],o=n.getSnapshot;n=n.value;try{if(!vu(o(),n))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ap(e,t){for(t&=~FP,t&=~x6,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-du(t),r=1<<i;e[i]=-1,t&=~r}}function oV(e){if(ni&6)throw Error(Ue(327));Kg();var t=Q4(e,0);if(!(t&1))return Fo(e,zr()),null;var i=gE(e,t);if(e.tag!==0&&i===2){var r=kC(e);r!==0&&(t=r,i=sA(e,r))}if(i===1)throw i=n_,wy(e,0),Ap(e,t),Fo(e,zr()),i;if(i===6)throw Error(Ue(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qf(e,To,Ah),Fo(e,zr()),null}function jP(e,t){var i=ni;ni|=1;try{return e(t)}finally{ni=i,ni===0&&($v=zr()+500,w6&&If())}}function zy(e){Pp!==null&&Pp.tag===0&&!(ni&6)&&Kg();var t=ni;ni|=1;var i=rl.transition,r=Ti;try{if(rl.transition=null,Ti=1,e)return e()}finally{Ti=r,rl.transition=i,ni=t,!(ni&6)&&If()}}function zP(){aa=Mg.current,er(Mg)}function wy(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Eme(i)),en!==null)for(i=en.return;i!==null;){var r=i;switch(bP(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&nE();break;case 3:Iv(),er(Po),er(js),CP();break;case 5:MP(r);break;case 4:Iv();break;case 13:er(gr);break;case 19:er(gr);break;case 10:EP(r.type._context);break;case 22:case 23:zP()}i=i.return}if(Nn=e,en=e=Qp(e.current,null),ns=aa=t,mn=0,n_=null,FP=x6=jy=0,To=d3=null,uy!==null){for(t=0;t<uy.length;t++)if(i=uy[t],r=i.interleaved,r!==null){i.interleaved=null;var n=r.next,o=i.pending;if(o!==null){var u=o.next;o.next=n,r.next=u}i.pending=r}uy=null}return e}function uQ(e,t){do{var i=en;try{if(xP(),Xx.current=pE,dE){for(var r=vr.memoizedState;r!==null;){var n=r.queue;n!==null&&(n.pending=null),r=r.next}dE=!1}if(Dy=0,kn=pn=vr=null,c3=!1,t_=0,NP.current=null,i===null||i.return===null){mn=1,n_=t,en=null;break}e:{var o=e,u=i.return,f=i,g=t;if(t=ns,f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var b=g,E=f,I=E.tag;if(!(E.mode&1)&&(I===0||I===11||I===15)){var M=E.alternate;M?(E.updateQueue=M.updateQueue,E.memoizedState=M.memoizedState,E.lanes=M.lanes):(E.updateQueue=null,E.memoizedState=null)}var k=Wz(u);if(k!==null){k.flags&=-257,Zz(k,u,f,o,t),k.mode&1&&Hz(o,b,t),t=k,g=b;var L=t.updateQueue;if(L===null){var P=new Set;P.add(g),t.updateQueue=P}else L.add(g);break e}else{if(!(t&1)){Hz(o,b,t),VP();break e}g=Error(Ue(426))}}else if(ur&&f.mode&1){var D=Wz(u);if(D!==null){!(D.flags&65536)&&(D.flags|=256),Zz(D,u,f,o,t),_P(Tv(g,f));break e}}o=g=Tv(g,f),mn!==4&&(mn=2),d3===null?d3=[o]:d3.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var j=HX(o,g,t);zz(o,j);break e;case 1:f=g;var z=o.type,V=o.stateNode;if(!(o.flags&128)&&(typeof z.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(Yp===null||!Yp.has(V)))){o.flags|=65536,t&=-t,o.lanes|=t;var W=WX(o,f,t);zz(o,W);break e}}o=o.return}while(o!==null)}dQ(i)}catch(Q){t=Q,en===i&&i!==null&&(en=i=i.return);continue}break}while(!0)}function cQ(){var e=fE.current;return fE.current=pE,e===null?pE:e}function VP(){(mn===0||mn===3||mn===2)&&(mn=4),Nn===null||!(jy&268435455)&&!(x6&268435455)||Ap(Nn,ns)}function gE(e,t){var i=ni;ni|=2;var r=cQ();(Nn!==e||ns!==t)&&(Ah=null,wy(e,t));do try{Jme();break}catch(n){uQ(e,n)}while(!0);if(xP(),ni=i,fE.current=r,en!==null)throw Error(Ue(261));return Nn=null,ns=0,mn}function Jme(){for(;en!==null;)hQ(en)}function Kme(){for(;en!==null&&!_ye();)hQ(en)}function hQ(e){var t=fQ(e.alternate,e,aa);e.memoizedProps=e.pendingProps,t===null?dQ(e):en=t,NP.current=null}function dQ(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=Gme(i,t),i!==null){i.flags&=32767,en=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{mn=6,en=null;return}}else if(i=Ume(i,t,aa),i!==null){en=i;return}if(t=t.sibling,t!==null){en=t;return}en=t=e}while(t!==null);mn===0&&(mn=5)}function Qf(e,t,i){var r=Ti,n=rl.transition;try{rl.transition=null,Ti=1,Yme(e,t,i,r)}finally{rl.transition=n,Ti=r}return null}function Yme(e,t,i,r){do Kg();while(Pp!==null);if(ni&6)throw Error(Ue(327));i=e.finishedWork;var n=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(Ue(177));e.callbackNode=null,e.callbackPriority=0;var o=i.lanes|i.childLanes;if(kye(e,o),e===Nn&&(en=Nn=null,ns=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||p5||(p5=!0,yQ(X4,function(){return Kg(),null})),o=(i.flags&15990)!==0,i.subtreeFlags&15990||o){o=rl.transition,rl.transition=null;var u=Ti;Ti=1;var f=ni;ni|=4,NP.current=null,qme(e,i),oQ(i,e),gme(FC),eE=!!NC,FC=NC=null,e.current=i,Hme(i),Sye(),ni=f,Ti=u,rl.transition=o}else e.current=i;if(p5&&(p5=!1,Pp=e,mE=n),o=e.pendingLanes,o===0&&(Yp=null),Iye(i.stateNode),Fo(e,zr()),t!==null)for(r=e.onRecoverableError,i=0;i<t.length;i++)n=t[i],r(n.value,{componentStack:n.stack,digest:n.digest});if(yE)throw yE=!1,e=rA,rA=null,e;return mE&1&&e.tag!==0&&Kg(),o=e.pendingLanes,o&1?e===nA?p3++:(p3=0,nA=e):p3=0,If(),null}function Kg(){if(Pp!==null){var e=HY(mE),t=rl.transition,i=Ti;try{if(rl.transition=null,Ti=16>e?16:e,Pp===null)var r=!1;else{if(e=Pp,Pp=null,mE=0,ni&6)throw Error(Ue(331));var n=ni;for(ni|=4,Qe=e.current;Qe!==null;){var o=Qe,u=o.child;if(Qe.flags&16){var f=o.deletions;if(f!==null){for(var g=0;g<f.length;g++){var b=f[g];for(Qe=b;Qe!==null;){var E=Qe;switch(E.tag){case 0:case 11:case 15:h3(8,E,o)}var I=E.child;if(I!==null)I.return=E,Qe=I;else for(;Qe!==null;){E=Qe;var M=E.sibling,k=E.return;if(rQ(E),E===b){Qe=null;break}if(M!==null){M.return=k,Qe=M;break}Qe=k}}}var L=o.alternate;if(L!==null){var P=L.child;if(P!==null){L.child=null;do{var D=P.sibling;P.sibling=null,P=D}while(P!==null)}}Qe=o}}if(o.subtreeFlags&2064&&u!==null)u.return=o,Qe=u;else e:for(;Qe!==null;){if(o=Qe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:h3(9,o,o.return)}var j=o.sibling;if(j!==null){j.return=o.return,Qe=j;break e}Qe=o.return}}var z=e.current;for(Qe=z;Qe!==null;){u=Qe;var V=u.child;if(u.subtreeFlags&2064&&V!==null)V.return=u,Qe=V;else e:for(u=z;Qe!==null;){if(f=Qe,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:S6(9,f)}}catch(Q){kr(f,f.return,Q)}if(f===u){Qe=null;break e}var W=f.sibling;if(W!==null){W.return=f.return,Qe=W;break e}Qe=f.return}}if(ni=n,If(),Sc&&typeof Sc.onPostCommitFiberRoot=="function")try{Sc.onPostCommitFiberRoot(f6,e)}catch{}r=!0}return r}finally{Ti=i,rl.transition=t}}return!1}function aV(e,t,i){t=Tv(i,t),t=HX(e,t,1),e=Kp(e,t,1),t=ro(),e!==null&&(q_(e,1,t),Fo(e,t))}function kr(e,t,i){if(e.tag===3)aV(e,e,i);else for(;t!==null;){if(t.tag===3){aV(t,e,i);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Yp===null||!Yp.has(r))){e=Tv(i,e),e=WX(t,e,1),t=Kp(t,e,1),e=ro(),t!==null&&(q_(t,1,e),Fo(t,e));break}}t=t.return}}function Xme(e,t,i){var r=e.pingCache;r!==null&&r.delete(t),t=ro(),e.pingedLanes|=e.suspendedLanes&i,Nn===e&&(ns&i)===i&&(mn===4||mn===3&&(ns&130023424)===ns&&500>zr()-DP?wy(e,0):FP|=i),Fo(e,t)}function pQ(e,t){t===0&&(e.mode&1?(t=r5,r5<<=1,!(r5&130023424)&&(r5=4194304)):t=1);var i=ro();e=rd(e,t),e!==null&&(q_(e,t,i),Fo(e,i))}function Qme(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),pQ(e,i)}function e1e(e,t){var i=0;switch(e.tag){case 13:var r=e.stateNode,n=e.memoizedState;n!==null&&(i=n.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Ue(314))}r!==null&&r.delete(t),pQ(e,i)}var fQ;fQ=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||Po.current)ko=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return ko=!1,Vme(e,t,i);ko=!!(e.flags&131072)}else ko=!1,ur&&t.flags&1048576&&vX(t,aE,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;e9(e,t),e=t.pendingProps;var n=Sv(t,js.current);Jg(t,i),n=kP(null,t,r,e,n,i);var o=LP();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,No(r)?(o=!0,sE(t)):o=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,TP(t),n.updater=_6,t.stateNode=n,n._reactInternals=t,HC(t,r,e,i),t=JC(null,t,r,!0,o,i)):(t.tag=0,ur&&o&&wP(t),Ys(null,t,n,i),t=t.child),t;case 16:r=t.elementType;e:{switch(e9(e,t),e=t.pendingProps,n=r._init,r=n(r._payload),t.type=r,n=t.tag=i1e(r),e=Ql(r,e),n){case 0:t=ZC(null,t,r,e,i);break e;case 1:t=Yz(null,t,r,e,i);break e;case 11:t=Jz(null,t,r,e,i);break e;case 14:t=Kz(null,t,r,Ql(r.type,e),i);break e}throw Error(Ue(306,r,""))}return t;case 0:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:Ql(r,n),ZC(e,t,r,n,i);case 1:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:Ql(r,n),Yz(e,t,r,n,i);case 3:e:{if(YX(t),e===null)throw Error(Ue(387));r=t.pendingProps,o=t.memoizedState,n=o.element,EX(e,t),cE(t,r,null,i);var u=t.memoizedState;if(r=u.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){n=Tv(Error(Ue(423)),t),t=Xz(e,t,r,i,n);break e}else if(r!==n){n=Tv(Error(Ue(424)),t),t=Xz(e,t,r,i,n);break e}else for(ua=Jp(t.stateNode.containerInfo.firstChild),da=t,ur=!0,su=null,i=SX(t,null,r,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(xv(),r===n){t=nd(e,t,i);break e}Ys(e,t,r,i)}t=t.child}return t;case 5:return IX(t),e===null&&GC(t),r=t.type,n=t.pendingProps,o=e!==null?e.memoizedProps:null,u=n.children,DC(r,n)?u=null:o!==null&&DC(r,o)&&(t.flags|=32),KX(e,t),Ys(e,t,u,i),t.child;case 6:return e===null&&GC(t),null;case 13:return XX(e,t,i);case 4:return $P(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ev(t,null,r,i):Ys(e,t,r,i),t.child;case 11:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:Ql(r,n),Jz(e,t,r,n,i);case 7:return Ys(e,t,t.pendingProps,i),t.child;case 8:return Ys(e,t,t.pendingProps.children,i),t.child;case 12:return Ys(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(r=t.type._context,n=t.pendingProps,o=t.memoizedProps,u=n.value,Bi(lE,r._currentValue),r._currentValue=u,o!==null)if(vu(o.value,u)){if(o.children===n.children&&!Po.current){t=nd(e,t,i);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var f=o.dependencies;if(f!==null){u=o.child;for(var g=f.firstContext;g!==null;){if(g.context===r){if(o.tag===1){g=Jh(-1,i&-i),g.tag=2;var b=o.updateQueue;if(b!==null){b=b.shared;var E=b.pending;E===null?g.next=g:(g.next=E.next,E.next=g),b.pending=g}}o.lanes|=i,g=o.alternate,g!==null&&(g.lanes|=i),BC(o.return,i,t),f.lanes|=i;break}g=g.next}}else if(o.tag===10)u=o.type===t.type?null:o.child;else if(o.tag===18){if(u=o.return,u===null)throw Error(Ue(341));u.lanes|=i,f=u.alternate,f!==null&&(f.lanes|=i),BC(u,i,t),u=o.sibling}else u=o.child;if(u!==null)u.return=o;else for(u=o;u!==null;){if(u===t){u=null;break}if(o=u.sibling,o!==null){o.return=u.return,u=o;break}u=u.return}o=u}Ys(e,t,n.children,i),t=t.child}return t;case 9:return n=t.type,r=t.pendingProps.children,Jg(t,i),n=al(n),r=r(n),t.flags|=1,Ys(e,t,r,i),t.child;case 14:return r=t.type,n=Ql(r,t.pendingProps),n=Ql(r.type,n),Kz(e,t,r,n,i);case 15:return ZX(e,t,t.type,t.pendingProps,i);case 17:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:Ql(r,n),e9(e,t),t.tag=1,No(r)?(e=!0,sE(t)):e=!1,Jg(t,i),qX(t,r,n),HC(t,r,n,i),JC(null,t,r,!0,e,i);case 19:return QX(e,t,i);case 22:return JX(e,t,i)}throw Error(Ue(156,t.tag))};function yQ(e,t){return UY(e,t)}function t1e(e,t,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qa(e,t,i,r){return new t1e(e,t,i,r)}function UP(e){return e=e.prototype,!(!e||!e.isReactComponent)}function i1e(e){if(typeof e=="function")return UP(e)?1:0;if(e!=null){if(e=e.$$typeof,e===aP)return 11;if(e===lP)return 14}return 2}function Qp(e,t){var i=e.alternate;return i===null?(i=Qa(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function r9(e,t,i,r,n,o){var u=2;if(r=e,typeof e=="function")UP(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case vg:return by(i.children,n,o,t);case oP:u=8,n|=8;break;case mC:return e=Qa(12,i,t,n|2),e.elementType=mC,e.lanes=o,e;case gC:return e=Qa(13,i,t,n),e.elementType=gC,e.lanes=o,e;case vC:return e=Qa(19,i,t,n),e.elementType=vC,e.lanes=o,e;case IY:return E6(i,n,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xY:u=10;break e;case EY:u=9;break e;case aP:u=11;break e;case lP:u=14;break e;case vp:u=16,r=null;break e}throw Error(Ue(130,e==null?e:typeof e,""))}return t=Qa(u,i,t,n),t.elementType=e,t.type=r,t.lanes=o,t}function by(e,t,i,r){return e=Qa(7,e,r,t),e.lanes=i,e}function E6(e,t,i,r){return e=Qa(22,e,r,t),e.elementType=IY,e.lanes=i,e.stateNode={isHidden:!1},e}function H$(e,t,i){return e=Qa(6,e,null,t),e.lanes=i,e}function W$(e,t,i){return t=Qa(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function r1e(e,t,i,r,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$$(0),this.expirationTimes=$$(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$$(0),this.identifierPrefix=r,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function GP(e,t,i,r,n,o,u,f,g){return e=new r1e(e,t,i,f,g),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Qa(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},TP(o),e}function n1e(e,t,i){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gg,key:r==null?null:""+r,children:e,containerInfo:t,implementation:i}}function mQ(e){if(!e)return cf;e=e._reactInternals;e:{if(hm(e)!==e||e.tag!==1)throw Error(Ue(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(No(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ue(171))}if(e.tag===1){var i=e.type;if(No(i))return mX(e,i,t)}return t}function gQ(e,t,i,r,n,o,u,f,g){return e=GP(i,r,!0,e,n,o,u,f,g),e.context=mQ(null),i=e.current,r=ro(),n=Xp(i),o=Jh(r,n),o.callback=t??null,Kp(i,o,n),e.current.lanes=n,q_(e,n,r),Fo(e,r),e}function I6(e,t,i,r){var n=t.current,o=ro(),u=Xp(n);return i=mQ(i),t.context===null?t.context=i:t.pendingContext=i,t=Jh(o,u),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Kp(n,t,u),e!==null&&(pu(e,n,u,o),Yx(e,n,u)),u}function vE(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function lV(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function BP(e,t){lV(e,t),(e=e.alternate)&&lV(e,t)}function s1e(){return null}var vQ=typeof reportError=="function"?reportError:function(e){console.error(e)};function qP(e){this._internalRoot=e}T6.prototype.render=qP.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ue(409));I6(e,t,null,null)};T6.prototype.unmount=qP.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zy(function(){I6(null,e,null,null)}),t[id]=null}};function T6(e){this._internalRoot=e}T6.prototype.unstable_scheduleHydration=function(e){if(e){var t=JY();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Cp.length&&t!==0&&t<Cp[i].priority;i++);Cp.splice(i,0,e),i===0&&YY(e)}};function HP(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function $6(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function uV(){}function o1e(e,t,i,r,n){if(n){if(typeof r=="function"){var o=r;r=function(){var b=vE(u);o.call(b)}}var u=gQ(t,r,e,0,null,!1,!1,"",uV);return e._reactRootContainer=u,e[id]=u.current,K3(e.nodeType===8?e.parentNode:e),zy(),u}for(;n=e.lastChild;)e.removeChild(n);if(typeof r=="function"){var f=r;r=function(){var b=vE(g);f.call(b)}}var g=GP(e,0,!1,null,null,!1,!1,"",uV);return e._reactRootContainer=g,e[id]=g.current,K3(e.nodeType===8?e.parentNode:e),zy(function(){I6(t,g,i,r)}),g}function M6(e,t,i,r,n){var o=i._reactRootContainer;if(o){var u=o;if(typeof n=="function"){var f=n;n=function(){var g=vE(u);f.call(g)}}I6(t,u,e,n)}else u=o1e(i,t,e,n,r);return vE(u)}WY=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Vw(t.pendingLanes);i!==0&&(hP(t,i|1),Fo(t,zr()),!(ni&6)&&($v=zr()+500,If()))}break;case 13:zy(function(){var r=rd(e,1);if(r!==null){var n=ro();pu(r,e,1,n)}}),BP(e,1)}};dP=function(e){if(e.tag===13){var t=rd(e,134217728);if(t!==null){var i=ro();pu(t,e,134217728,i)}BP(e,134217728)}};ZY=function(e){if(e.tag===13){var t=Xp(e),i=rd(e,t);if(i!==null){var r=ro();pu(i,e,t,r)}BP(e,t)}};JY=function(){return Ti};KY=function(e,t){var i=Ti;try{return Ti=e,t()}finally{Ti=i}};MC=function(e,t,i){switch(t){case"input":if(_C(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var r=i[t];if(r!==e&&r.form===e.form){var n=v6(r);if(!n)throw Error(Ue(90));$Y(r),_C(r,n)}}}break;case"textarea":CY(e,i);break;case"select":t=i.value,t!=null&&qg(e,!!i.multiple,t,!1)}};NY=jP;FY=zy;var a1e={usingClientEntryPoint:!1,Events:[W_,Sg,v6,RY,PY,jP]},tw={findFiberByHostInstance:ly,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},l1e={bundleType:tw.bundleType,version:tw.version,rendererPackageName:tw.rendererPackageName,rendererConfig:tw.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cd.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zY(e),e===null?null:e.stateNode},findFiberByHostInstance:tw.findFiberByHostInstance||s1e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var f5=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!f5.isDisabled&&f5.supportsFiber)try{f6=f5.inject(l1e),Sc=f5}catch{}}Ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a1e;Ea.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!HP(t))throw Error(Ue(200));return n1e(e,t,null,i)};Ea.createRoot=function(e,t){if(!HP(e))throw Error(Ue(299));var i=!1,r="",n=vQ;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=GP(e,1,!1,null,null,i,!1,r,n),e[id]=t.current,K3(e.nodeType===8?e.parentNode:e),new qP(t)};Ea.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ue(188)):(e=Object.keys(e).join(","),Error(Ue(268,e)));return e=zY(t),e=e===null?null:e.stateNode,e};Ea.flushSync=function(e){return zy(e)};Ea.hydrate=function(e,t,i){if(!$6(t))throw Error(Ue(200));return M6(null,e,t,!0,i)};Ea.hydrateRoot=function(e,t,i){if(!HP(e))throw Error(Ue(405));var r=i!=null&&i.hydratedSources||null,n=!1,o="",u=vQ;if(i!=null&&(i.unstable_strictMode===!0&&(n=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onRecoverableError!==void 0&&(u=i.onRecoverableError)),t=gQ(t,null,e,1,i??null,n,!1,o,u),e[id]=t.current,K3(e),r)for(e=0;e<r.length;e++)i=r[e],n=i._getVersion,n=n(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,n]:t.mutableSourceEagerHydrationData.push(i,n);return new T6(t)};Ea.render=function(e,t,i){if(!$6(t))throw Error(Ue(200));return M6(null,e,t,!1,i)};Ea.unmountComponentAtNode=function(e){if(!$6(e))throw Error(Ue(40));return e._reactRootContainer?(zy(function(){M6(null,null,e,!1,function(){e._reactRootContainer=null,e[id]=null})}),!0):!1};Ea.unstable_batchedUpdates=jP;Ea.unstable_renderSubtreeIntoContainer=function(e,t,i,r){if(!$6(i))throw Error(Ue(200));if(e==null||e._reactInternals===void 0)throw Error(Ue(38));return M6(e,t,i,!1,r)};Ea.version="18.3.1-next-f1338f8080-20240426";function wQ(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wQ)}catch(e){console.error(e)}}wQ(),wY.exports=Ea;var u1e=wY.exports,cV=u1e;fC.createRoot=cV.createRoot,fC.hydrateRoot=cV.hydrateRoot;var bQ={},_Q={},SQ={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(){for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];if(typeof window<"u"){var f;typeof window.gtag>"u"&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(f=window).gtag.apply(f,o)}},i=t;e.default=i})(SQ);var xQ={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var t=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;function i(f){return f.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(g,b,E){return b>0&&b+g.length!==E.length&&g.search(t)>-1&&E.charAt(b-2)!==":"&&(E.charAt(b+g.length)!=="-"||E.charAt(b-1)==="-")&&E.charAt(b-1).search(/[^\s-]/)<0?g.toLowerCase():g.substr(1).search(/[A-Z]|\../)>-1?g:g.charAt(0).toUpperCase()+g.substr(1)})}function r(f){return typeof f=="string"&&f.indexOf("@")!==-1}var n="REDACTED (Potential Email Address)";function o(f){return r(f)?(console.warn("This arg looks like an email address, redacting."),n):f}function u(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,E=f||"";return g&&(E=i(f)),b&&(E=o(E)),E}})(xQ);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.GA4=void 0;var t=u(SQ),i=u(xQ),r=["eventCategory","eventAction","eventLabel","eventValue","hitType"],n=["title","location"],o=["page","hitType"];function u(de){return de&&de.__esModule?de:{default:de}}function f(de,se){if(de==null)return{};var ye=g(de,se),ue,pe;if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(de);for(pe=0;pe<_e.length;pe++)ue=_e[pe],!(se.indexOf(ue)>=0)&&Object.prototype.propertyIsEnumerable.call(de,ue)&&(ye[ue]=de[ue])}return ye}function g(de,se){if(de==null)return{};var ye={},ue=Object.keys(de),pe,_e;for(_e=0;_e<ue.length;_e++)pe=ue[_e],!(se.indexOf(pe)>=0)&&(ye[pe]=de[pe]);return ye}function b(de){"@babel/helpers - typeof";return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(se){return typeof se}:function(se){return se&&typeof Symbol=="function"&&se.constructor===Symbol&&se!==Symbol.prototype?"symbol":typeof se},b(de)}function E(de){return k(de)||M(de)||z(de)||I()}function I(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M(de){if(typeof Symbol<"u"&&de[Symbol.iterator]!=null||de["@@iterator"]!=null)return Array.from(de)}function k(de){if(Array.isArray(de))return V(de)}function L(de,se){var ye=Object.keys(de);if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(de);se&&(ue=ue.filter(function(pe){return Object.getOwnPropertyDescriptor(de,pe).enumerable})),ye.push.apply(ye,ue)}return ye}function P(de){for(var se=1;se<arguments.length;se++){var ye=arguments[se]!=null?arguments[se]:{};se%2?L(Object(ye),!0).forEach(function(ue){oe(de,ue,ye[ue])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(ye)):L(Object(ye)).forEach(function(ue){Object.defineProperty(de,ue,Object.getOwnPropertyDescriptor(ye,ue))})}return de}function D(de,se){return Q(de)||W(de,se)||z(de,se)||j()}function j(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z(de,se){if(de){if(typeof de=="string")return V(de,se);var ye=Object.prototype.toString.call(de).slice(8,-1);if(ye==="Object"&&de.constructor&&(ye=de.constructor.name),ye==="Map"||ye==="Set")return Array.from(de);if(ye==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ye))return V(de,se)}}function V(de,se){(se==null||se>de.length)&&(se=de.length);for(var ye=0,ue=new Array(se);ye<se;ye++)ue[ye]=de[ye];return ue}function W(de,se){var ye=de==null?null:typeof Symbol<"u"&&de[Symbol.iterator]||de["@@iterator"];if(ye!=null){var ue,pe,_e,Le,Re=[],qe=!0,ht=!1;try{if(_e=(ye=ye.call(de)).next,se!==0)for(;!(qe=(ue=_e.call(ye)).done)&&(Re.push(ue.value),Re.length!==se);qe=!0);}catch(At){ht=!0,pe=At}finally{try{if(!qe&&ye.return!=null&&(Le=ye.return(),Object(Le)!==Le))return}finally{if(ht)throw pe}}return Re}}function Q(de){if(Array.isArray(de))return de}function Z(de,se){if(!(de instanceof se))throw new TypeError("Cannot call a class as a function")}function ee(de,se){for(var ye=0;ye<se.length;ye++){var ue=se[ye];ue.enumerable=ue.enumerable||!1,ue.configurable=!0,"value"in ue&&(ue.writable=!0),Object.defineProperty(de,le(ue.key),ue)}}function ie(de,se,ye){return se&&ee(de.prototype,se),Object.defineProperty(de,"prototype",{writable:!1}),de}function oe(de,se,ye){return se=le(se),se in de?Object.defineProperty(de,se,{value:ye,enumerable:!0,configurable:!0,writable:!0}):de[se]=ye,de}function le(de){var se=xe(de,"string");return b(se)==="symbol"?se:String(se)}function xe(de,se){if(b(de)!=="object"||de===null)return de;var ye=de[Symbol.toPrimitive];if(ye!==void 0){var ue=ye.call(de,se||"default");if(b(ue)!=="object")return ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return(se==="string"?String:Number)(de)}var $e=function(){function de(){var se=this;Z(this,de),oe(this,"reset",function(){se.isInitialized=!1,se._testMode=!1,se._currentMeasurementId,se._hasLoadedGA=!1,se._isQueuing=!1,se._queueGtag=[]}),oe(this,"_gtag",function(){for(var ye=arguments.length,ue=new Array(ye),pe=0;pe<ye;pe++)ue[pe]=arguments[pe];se._testMode||se._isQueuing?se._queueGtag.push(ue):t.default.apply(void 0,ue)}),oe(this,"_loadGA",function(ye,ue){var pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"https://www.googletagmanager.com/gtag/js";if(!(typeof window>"u"||typeof document>"u")&&!se._hasLoadedGA){var _e=document.createElement("script");_e.async=!0,_e.src="".concat(pe,"?id=").concat(ye),ue&&_e.setAttribute("nonce",ue),document.body.appendChild(_e),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},se._hasLoadedGA=!0}}),oe(this,"_toGtagOptions",function(ye){if(ye){var ue={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"},pe=Object.entries(ye).reduce(function(_e,Le){var Re=D(Le,2),qe=Re[0],ht=Re[1];return ue[qe]?_e[ue[qe]]=ht:_e[qe]=ht,_e},{});return pe}}),oe(this,"initialize",function(ye){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ye)throw new Error("Require GA_MEASUREMENT_ID");var pe=typeof ye=="string"?[{trackingId:ye}]:ye;se._currentMeasurementId=pe[0].trackingId;var _e=ue.gaOptions,Le=ue.gtagOptions,Re=ue.nonce,qe=ue.testMode,ht=qe===void 0?!1:qe,At=ue.gtagUrl;if(se._testMode=ht,ht||se._loadGA(se._currentMeasurementId,Re,At),se.isInitialized||(se._gtag("js",new Date),pe.forEach(function(hs){var zc=P(P(P({},se._toGtagOptions(P(P({},_e),hs.gaOptions))),Le),hs.gtagOptions);Object.keys(zc).length?se._gtag("config",hs.trackingId,zc):se._gtag("config",hs.trackingId)})),se.isInitialized=!0,!ht){var Fi=E(se._queueGtag);for(se._queueGtag=[],se._isQueuing=!1;Fi.length;){var Rr=Fi.shift();se._gtag.apply(se,E(Rr)),Rr[0]==="get"&&(se._isQueuing=!0)}}}),oe(this,"set",function(ye){if(!ye){console.warn("`fieldsObject` is required in .set()");return}if(b(ye)!=="object"){console.warn("Expected `fieldsObject` arg to be an Object");return}Object.keys(ye).length===0&&console.warn("empty `fieldsObject` given to .set()"),se._gaCommand("set",ye)}),oe(this,"_gaCommandSendEvent",function(ye,ue,pe,_e,Le){se._gtag("event",ue,P(P({event_category:ye,event_label:pe,value:_e},Le&&{non_interaction:Le.nonInteraction}),se._toGtagOptions(Le)))}),oe(this,"_gaCommandSendEventParameters",function(){for(var ye=arguments.length,ue=new Array(ye),pe=0;pe<ye;pe++)ue[pe]=arguments[pe];if(typeof ue[0]=="string")se._gaCommandSendEvent.apply(se,E(ue.slice(1)));else{var _e=ue[0],Le=_e.eventCategory,Re=_e.eventAction,qe=_e.eventLabel,ht=_e.eventValue;_e.hitType;var At=f(_e,r);se._gaCommandSendEvent(Le,Re,qe,ht,At)}}),oe(this,"_gaCommandSendTiming",function(ye,ue,pe,_e){se._gtag("event","timing_complete",{name:ue,value:pe,event_category:ye,event_label:_e})}),oe(this,"_gaCommandSendPageview",function(ye,ue){if(ue&&Object.keys(ue).length){var pe=se._toGtagOptions(ue),_e=pe.title,Le=pe.location,Re=f(pe,n);se._gtag("event","page_view",P(P(P(P({},ye&&{page_path:ye}),_e&&{page_title:_e}),Le&&{page_location:Le}),Re))}else ye?se._gtag("event","page_view",{page_path:ye}):se._gtag("event","page_view")}),oe(this,"_gaCommandSendPageviewParameters",function(){for(var ye=arguments.length,ue=new Array(ye),pe=0;pe<ye;pe++)ue[pe]=arguments[pe];if(typeof ue[0]=="string")se._gaCommandSendPageview.apply(se,E(ue.slice(1)));else{var _e=ue[0],Le=_e.page;_e.hitType;var Re=f(_e,o);se._gaCommandSendPageview(Le,Re)}}),oe(this,"_gaCommandSend",function(){for(var ye=arguments.length,ue=new Array(ye),pe=0;pe<ye;pe++)ue[pe]=arguments[pe];var _e=typeof ue[0]=="string"?ue[0]:ue[0].hitType;switch(_e){case"event":se._gaCommandSendEventParameters.apply(se,ue);break;case"pageview":se._gaCommandSendPageviewParameters.apply(se,ue);break;case"timing":se._gaCommandSendTiming.apply(se,E(ue.slice(1)));break;case"screenview":case"transaction":case"item":case"social":case"exception":console.warn("Unsupported send command: ".concat(_e));break;default:console.warn("Send command doesn't exist: ".concat(_e))}}),oe(this,"_gaCommandSet",function(){for(var ye=arguments.length,ue=new Array(ye),pe=0;pe<ye;pe++)ue[pe]=arguments[pe];typeof ue[0]=="string"&&(ue[0]=oe({},ue[0],ue[1])),se._gtag("set",se._toGtagOptions(ue[0]))}),oe(this,"_gaCommand",function(ye){for(var ue=arguments.length,pe=new Array(ue>1?ue-1:0),_e=1;_e<ue;_e++)pe[_e-1]=arguments[_e];switch(ye){case"send":se._gaCommandSend.apply(se,pe);break;case"set":se._gaCommandSet.apply(se,pe);break;default:console.warn("Command doesn't exist: ".concat(ye))}}),oe(this,"ga",function(){for(var ye=arguments.length,ue=new Array(ye),pe=0;pe<ye;pe++)ue[pe]=arguments[pe];if(typeof ue[0]=="string")se._gaCommand.apply(se,ue);else{var _e=ue[0];se._gtag("get",se._currentMeasurementId,"client_id",function(Le){se._isQueuing=!1;var Re=se._queueGtag;for(_e({get:function(At){return At==="clientId"?Le:At==="trackingId"?se._currentMeasurementId:At==="apiVersion"?"1":void 0}});Re.length;){var qe=Re.shift();se._gtag.apply(se,E(qe))}}),se._isQueuing=!0}return se.ga}),oe(this,"event",function(ye,ue){if(typeof ye=="string")se._gtag("event",ye,se._toGtagOptions(ue));else{var pe=ye.action,_e=ye.category,Le=ye.label,Re=ye.value,qe=ye.nonInteraction,ht=ye.transport;if(!_e||!pe){console.warn("args.category AND args.action are required in event()");return}var At={hitType:"event",eventCategory:(0,i.default)(_e),eventAction:(0,i.default)(pe)};Le&&(At.eventLabel=(0,i.default)(Le)),typeof Re<"u"&&(typeof Re!="number"?console.warn("Expected `args.value` arg to be a Number."):At.eventValue=Re),typeof qe<"u"&&(typeof qe!="boolean"?console.warn("`args.nonInteraction` must be a boolean."):At.nonInteraction=qe),typeof ht<"u"&&(typeof ht!="string"?console.warn("`args.transport` must be a string."):(["beacon","xhr","image"].indexOf(ht)===-1&&console.warn("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),At.transport=ht)),se._gaCommand("send",At)}}),oe(this,"send",function(ye){se._gaCommand("send",ye)}),this.reset()}return ie(de,[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}]),de}();e.GA4=$e;var Te=new $e;e.default=Te})(_Q);(function(e){function t(f){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},t(f)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ReactGAImplementation=void 0;var i=n(_Q);function r(f){if(typeof WeakMap!="function")return null;var g=new WeakMap,b=new WeakMap;return(r=function(I){return I?b:g})(f)}function n(f,g){if(f&&f.__esModule)return f;if(f===null||t(f)!=="object"&&typeof f!="function")return{default:f};var b=r(g);if(b&&b.has(f))return b.get(f);var E={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in f)if(M!=="default"&&Object.prototype.hasOwnProperty.call(f,M)){var k=I?Object.getOwnPropertyDescriptor(f,M):null;k&&(k.get||k.set)?Object.defineProperty(E,M,k):E[M]=f[M]}return E.default=f,b&&b.set(f,E),E}var o=i.GA4;e.ReactGAImplementation=o;var u=i.default;e.default=u})(bQ);const ou=aY(bQ);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const EQ="calcite-mode-auto",IQ="calcite-mode-dark",c1e="calcite-mode-light",TQ={autoMode:EQ,darkMode:IQ,lightMode:c1e,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"},h1e={filter:250,nextTick:0,resize:150,reposition:100},d1e="modulepreload",p1e=function(e,t){return new URL(e,t).href},hV={},ce=function(t,i,r){let n=Promise.resolve();if(i&&i.length>0){const u=document.getElementsByTagName("link"),f=document.querySelector("meta[property=csp-nonce]"),g=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));n=Promise.allSettled(i.map(b=>{if(b=p1e(b,r),b in hV)return;hV[b]=!0;const E=b.endsWith(".css"),I=E?'[rel="stylesheet"]':"";if(!!r)for(let L=u.length-1;L>=0;L--){const P=u[L];if(P.href===b&&(!E||P.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${b}"]${I}`))return;const k=document.createElement("link");if(k.rel=E?"stylesheet":d1e,E||(k.as="script"),k.crossOrigin="",k.href=b,g&&k.setAttribute("nonce",g),document.head.appendChild(k),E)return new Promise((L,P)=>{k.addEventListener("load",L),k.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${b}`)))})}))}function o(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return n.then(u=>{for(const f of u||[])f.status==="rejected"&&o(f.reason);return t().catch(o)})};var Ya={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},f1e=Object.defineProperty,y1e=(e,t)=>{for(var i in t)f1e(e,i,{get:t[i],enumerable:!0})},$Q=new WeakMap,dm=e=>$Q.get(e),m1e=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return $Q.set(e,i)},dV=(e,t)=>t in e,J_=(e,t)=>(0,console.error)(e,t),wE=new Map,g1e=[],v1e="slot-fb{display:contents}slot-fb[hidden]{display:none}",pV="http://www.w3.org/1999/xlink",K_=typeof window<"u"?window:{},fu=K_.document||{head:{}},pm=K_.HTMLElement||class{},Vn={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,r)=>e.addEventListener(t,i,r),rel:(e,t,i,r)=>e.removeEventListener(t,i,r),ce:(e,t)=>new CustomEvent(e,t)},w1e=(()=>{let e=!1;try{fu.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),b1e=e=>Promise.resolve(e),_1e=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),aA=!1,lA=[],MQ=[],CQ=(e,t)=>i=>{e.push(i),aA||(aA=!0,t&&Vn.$flags$&4?S1e(uA):Vn.raf(uA))},fV=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(i){J_(i)}e.length=0},uA=()=>{fV(lA),fV(MQ),(aA=lA.length>0)&&Vn.raf(uA)},S1e=e=>b1e().then(e),jet=CQ(lA,!1),x1e=CQ(MQ,!0),WP=e=>{const t=new URL(e,Vn.$resourcesUrl$);return t.origin!==K_.location.origin?t.href:t.pathname},AQ=e=>Vn.$resourcesUrl$=e,yV={},E1e="http://www.w3.org/2000/svg",I1e="http://www.w3.org/1999/xhtml",T1e=e=>e!=null,ZP=e=>(e=typeof e,e==="object"||e==="function");function $1e(e){var t,i,r;return(r=(i=(t=e.head)==null?void 0:t.querySelector('meta[name="csp-nonce"]'))==null?void 0:i.getAttribute("content"))!=null?r:void 0}var M1e={};y1e(M1e,{err:()=>kQ,map:()=>C1e,ok:()=>cA,unwrap:()=>A1e,unwrapErr:()=>k1e});var cA=e=>({isOk:!0,isErr:!1,value:e}),kQ=e=>({isOk:!1,isErr:!0,value:e});function C1e(e,t){if(e.isOk){const i=t(e.value);return i instanceof Promise?i.then(r=>cA(r)):cA(i)}if(e.isErr){const i=e.value;return kQ(i)}throw"should never get here"}var A1e=e=>{if(e.isOk)return e.value;throw e.value},k1e=e=>{if(e.isErr)return e.value;throw e.value},Vy=(e,t="")=>()=>{},Be=(e,t,...i)=>{let r=null,n=null,o=null,u=!1,f=!1;const g=[],b=I=>{for(let M=0;M<I.length;M++)r=I[M],Array.isArray(r)?b(r):r!=null&&typeof r!="boolean"&&((u=typeof e!="function"&&!ZP(r))&&(r=String(r)),u&&f?g[g.length-1].$text$+=r:g.push(u?bE(null,r):r),f=u)};if(b(i),t){t.key&&(n=t.key),t.name&&(o=t.name);{const I=t.className||t.class;I&&(t.class=typeof I!="object"?I:Object.keys(I).filter(M=>I[M]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,g,O1e);const E=bE(e,null);return E.$attrs$=t,g.length>0&&(E.$children$=g),E.$key$=n,E.$name$=o,E},bE=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},Y_={},L1e=e=>e&&e.$tag$===Y_,O1e={forEach:(e,t)=>e.map(mV).forEach(t),map:(e,t)=>e.map(mV).map(t).map(R1e)},mV=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),R1e=e=>{if(typeof e.vtag=="function"){const i={...e.vattrs};return e.vkey&&(i.key=e.vkey),e.vname&&(i.name=e.vname),Be(e.vtag,i,...e.vchildren||[])}const t=bE(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},P1e=e=>g1e.map(t=>t(e)).find(t=>!!t),N1e=(e,t)=>e!=null&&!ZP(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,F1e=e=>e,hy=(e,t,i)=>{const r=F1e(e);return{emit:n=>D1e(r,t,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:n})}},D1e=(e,t,i)=>{const r=Vn.ce(t,i);return e.dispatchEvent(r),r},gV=new WeakMap,j1e=(e,t,i)=>{let r=wE.get(e);_1e&&i?(r=r||new CSSStyleSheet,typeof r=="string"?r=t:r.replaceSync(t)):r=t,wE.set(e,r)},z1e=(e,t,i)=>{var r;const n=LQ(t,i),o=wE.get(n);if(e=e.nodeType===11?e:fu,o)if(typeof o=="string"){e=e.head||e;let u=gV.get(e),f;if(u||gV.set(e,u=new Set),!u.has(n)){{f=fu.createElement("style"),f.innerHTML=o;const g=(r=Vn.$nonce$)!=null?r:$1e(fu);g!=null&&f.setAttribute("nonce",g),(!(t.$flags$&1)||t.$flags$&1&&e.nodeName!=="HEAD")&&e.insertBefore(f,e.querySelector("link"))}t.$flags$&4&&(f.innerHTML+=v1e),u&&u.add(n)}}else e.adoptedStyleSheets.includes(o)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,o]);return n},V1e=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,r=t.$flags$,n=Vy("attachStyles",t.$tagName$),o=z1e(i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);r&10&&r&2&&(i["s-sc"]=o,i.classList.add(o+"-h"),r&2&&i.classList.add(o+"-s")),n()},LQ=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),vV=(e,t,i,r,n,o)=>{if(i!==r){let u=dV(e,t),f=t.toLowerCase();if(t==="class"){const g=e.classList,b=wV(i),E=wV(r);g.remove(...b.filter(I=>I&&!E.includes(I))),g.add(...E.filter(I=>I&&!b.includes(I)))}else if(t==="style"){for(const g in i)(!r||r[g]==null)&&(g.includes("-")?e.style.removeProperty(g):e.style[g]="");for(const g in r)(!i||r[g]!==i[g])&&(g.includes("-")?e.style.setProperty(g,r[g]):e.style[g]=r[g])}else if(t!=="key")if(t==="ref")r&&r(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n"){if(t[2]==="-"?t=t.slice(3):dV(K_,f)?t=f.slice(2):t=f[2]+t.slice(3),i||r){const g=t.endsWith(OQ);t=t.replace(G1e,""),i&&Vn.rel(e,t,i,g),r&&Vn.ael(e,t,r,g)}}else{const g=ZP(r);if((u||g&&r!==null)&&!n)try{if(e.tagName.includes("-"))e[t]=r;else{const E=r??"";t==="list"?u=!1:(i==null||e[t]!=E)&&(e[t]=E)}}catch{}let b=!1;f!==(f=f.replace(/^xlink\:?/,""))&&(t=f,b=!0),r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&(b?e.removeAttributeNS(pV,t):e.removeAttribute(t)):(!u||o&4||n)&&!g&&(r=r===!0?"":r,b?e.setAttributeNS(pV,t,r):e.setAttribute(t,r))}}},U1e=/\s/,wV=e=>e?e.split(U1e):[],OQ="Capture",G1e=new RegExp(OQ+"$"),RQ=(e,t,i)=>{const r=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,n=e&&e.$attrs$||yV,o=t.$attrs$||yV;for(const u of bV(Object.keys(n)))u in o||vV(r,u,n[u],void 0,i,t.$flags$);for(const u of bV(Object.keys(o)))vV(r,u,n[u],o[u],i,t.$flags$)};function bV(e){return e.includes("ref")?[...e.filter(t=>t!=="ref"),"ref"]:e}var o1,hA,Mv,_E=!1,SE=!1,JP=!1,la=!1,xE=(e,t,i,r)=>{var n;const o=t.$children$[i];let u=0,f,g,b;if(_E||(JP=!0,o.$tag$==="slot"&&(o1&&r.classList.add(o1+"-s"),o.$flags$|=o.$children$?2:1)),o.$text$!==null)f=o.$elm$=fu.createTextNode(o.$text$);else if(o.$flags$&1)f=o.$elm$=fu.createTextNode("");else{if(la||(la=o.$tag$==="svg"),f=o.$elm$=fu.createElementNS(la?E1e:I1e,!_E&&Ya.slotRelocation&&o.$flags$&2?"slot-fb":o.$tag$),la&&o.$tag$==="foreignObject"&&(la=!1),RQ(null,o,la),!!f.getRootNode().querySelector("body")&&Ya.scoped&&T1e(o1)&&f["s-si"]!==o1&&f.classList.add(f["s-si"]=o1),YP(f,r),o.$children$)for(u=0;u<o.$children$.length;++u)g=xE(e,o,u,f),g&&f.appendChild(g);o.$tag$==="svg"?la=!1:f.tagName==="foreignObject"&&(la=!0)}return f["s-hn"]=Mv,o.$flags$&3&&(f["s-sr"]=!0,f["s-cr"]=hA,f["s-sn"]=o.$name$||"",f["s-rf"]=(n=o.$attrs$)==null?void 0:n.ref,b=e&&e.$children$&&e.$children$[i],b&&b.$tag$===o.$tag$&&e.$elm$&&s_(e.$elm$,!1)),f},s_=(e,t)=>{Vn.$flags$|=1;const i=Array.from(e.childNodes);if(e["s-sr"]&&Ya.experimentalSlotFixes){let r=e;for(;r=r.nextSibling;)r&&r["s-sn"]===e["s-sn"]&&r["s-sh"]===Mv&&i.push(r)}for(let r=i.length-1;r>=0;r--){const n=i[r];n["s-hn"]!==Mv&&n["s-ol"]&&(ef(FQ(n),n,KP(n)),n["s-ol"].remove(),n["s-ol"]=void 0,n["s-sh"]=void 0,JP=!0),t&&s_(n,t)}Vn.$flags$&=-2},PQ=(e,t,i,r,n,o)=>{let u=e["s-cr"]&&e["s-cr"].parentNode||e,f;for(u.shadowRoot&&u.tagName===Mv&&(u=u.shadowRoot);n<=o;++n)r[n]&&(f=xE(null,i,n,e),f&&(r[n].$elm$=f,ef(u,f,KP(t))))},NQ=(e,t,i)=>{for(let r=t;r<=i;++r){const n=e[r];if(n){const o=n.$elm$;zQ(n),o&&(SE=!0,o["s-ol"]?o["s-ol"].remove():s_(o,!0),o.remove())}}},B1e=(e,t,i,r,n=!1)=>{let o=0,u=0,f=0,g=0,b=t.length-1,E=t[0],I=t[b],M=r.length-1,k=r[0],L=r[M],P,D;for(;o<=b&&u<=M;)if(E==null)E=t[++o];else if(I==null)I=t[--b];else if(k==null)k=r[++u];else if(L==null)L=r[--M];else if(y5(E,k,n))a1(E,k,n),E=t[++o],k=r[++u];else if(y5(I,L,n))a1(I,L,n),I=t[--b],L=r[--M];else if(y5(E,L,n))(E.$tag$==="slot"||L.$tag$==="slot")&&s_(E.$elm$.parentNode,!1),a1(E,L,n),ef(e,E.$elm$,I.$elm$.nextSibling),E=t[++o],L=r[--M];else if(y5(I,k,n))(E.$tag$==="slot"||L.$tag$==="slot")&&s_(I.$elm$.parentNode,!1),a1(I,k,n),ef(e,I.$elm$,E.$elm$),I=t[--b],k=r[++u];else{for(f=-1,g=o;g<=b;++g)if(t[g]&&t[g].$key$!==null&&t[g].$key$===k.$key$){f=g;break}f>=0?(D=t[f],D.$tag$!==k.$tag$?P=xE(t&&t[u],i,f,e):(a1(D,k,n),t[f]=void 0,P=D.$elm$),k=r[++u]):(P=xE(t&&t[u],i,u,e),k=r[++u]),P&&ef(FQ(E.$elm$),P,KP(E.$elm$))}o>b?PQ(e,r[M+1]==null?null:r[M+1].$elm$,i,r,u,M):u>M&&NQ(t,o,b)},y5=(e,t,i=!1)=>e.$tag$===t.$tag$?e.$tag$==="slot"?"$nodeId$"in e&&i&&e.$elm$.nodeType!==8?!1:e.$name$===t.$name$:i?!0:e.$key$===t.$key$:!1,KP=e=>e&&e["s-ol"]||e,FQ=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,a1=(e,t,i=!1)=>{const r=t.$elm$=e.$elm$,n=e.$children$,o=t.$children$,u=t.$tag$,f=t.$text$;let g;f===null?(la=u==="svg"?!0:u==="foreignObject"?!1:la,u==="slot"&&!_E||RQ(e,t,la),n!==null&&o!==null?B1e(r,n,t,o,i):o!==null?(e.$text$!==null&&(r.textContent=""),PQ(r,null,t,o,0,o.length-1)):!i&&Ya.updatable&&n!==null&&NQ(n,0,n.length-1),la&&u==="svg"&&(la=!1)):(g=r["s-cr"])?g.parentNode.textContent=f:e.$text$!==f&&(r.data=f)},DQ=e=>{const t=e.childNodes;for(const i of t)if(i.nodeType===1){if(i["s-sr"]){const r=i["s-sn"];i.hidden=!1;for(const n of t)if(n!==i){if(n["s-hn"]!==i["s-hn"]||r!==""){if(n.nodeType===1&&(r===n.getAttribute("slot")||r===n["s-sn"])||n.nodeType===3&&r===n["s-sn"]){i.hidden=!0;break}}else if(n.nodeType===1||n.nodeType===3&&n.textContent.trim()!==""){i.hidden=!0;break}}}DQ(i)}},Dh=[],jQ=e=>{let t,i,r;for(const n of e.childNodes){if(n["s-sr"]&&(t=n["s-cr"])&&t.parentNode){i=t.parentNode.childNodes;const o=n["s-sn"];for(r=i.length-1;r>=0;r--)if(t=i[r],!t["s-cn"]&&!t["s-nr"]&&t["s-hn"]!==n["s-hn"]&&!Ya.experimentalSlotFixes)if(_V(t,o)){let u=Dh.find(f=>f.$nodeToRelocate$===t);SE=!0,t["s-sn"]=t["s-sn"]||o,u?(u.$nodeToRelocate$["s-sh"]=n["s-hn"],u.$slotRefNode$=n):(t["s-sh"]=n["s-hn"],Dh.push({$slotRefNode$:n,$nodeToRelocate$:t})),t["s-sr"]&&Dh.map(f=>{_V(f.$nodeToRelocate$,t["s-sn"])&&(u=Dh.find(g=>g.$nodeToRelocate$===t),u&&!f.$slotRefNode$&&(f.$slotRefNode$=u.$slotRefNode$))})}else Dh.some(u=>u.$nodeToRelocate$===t)||Dh.push({$nodeToRelocate$:t})}n.nodeType===1&&jQ(n)}},_V=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",zQ=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(zQ)},ef=(e,t,i)=>{const r=e==null?void 0:e.insertBefore(t,i);return YP(t,e),r},VQ=e=>{const t=[];return e&&t.push(...e["s-scs"]||[],e["s-si"],e["s-sc"],...VQ(e.parentElement)),t},YP=(e,t,i=!1)=>{var r;if(e&&t&&e.nodeType===1){const n=new Set(VQ(t).filter(Boolean));if(n.size&&((r=e.classList)==null||r.add(...e["s-scs"]=[...n]),e["s-ol"]||i))for(const o of Array.from(e.childNodes))YP(o,e,!0)}},q1e=(e,t,i=!1)=>{var r,n,o,u,f;const g=e.$hostElement$,b=e.$cmpMeta$,E=e.$vnode$||bE(null,null),I=L1e(t)?t:Be(null,null,t);if(Mv=g.tagName,b.$attrsToReflect$&&(I.$attrs$=I.$attrs$||{},b.$attrsToReflect$.map(([M,k])=>I.$attrs$[k]=g[M])),i&&I.$attrs$)for(const M of Object.keys(I.$attrs$))g.hasAttribute(M)&&!["key","ref","style","class"].includes(M)&&(I.$attrs$[M]=g[M]);I.$tag$=null,I.$flags$|=4,e.$vnode$=I,I.$elm$=E.$elm$=g.shadowRoot||g,o1=g["s-sc"],_E=(b.$flags$&1)!==0,hA=g["s-cr"],SE=!1,a1(E,I,i);{if(Vn.$flags$|=1,JP){jQ(I.$elm$);for(const M of Dh){const k=M.$nodeToRelocate$;if(!k["s-ol"]){const L=fu.createTextNode("");L["s-nr"]=k,ef(k.parentNode,k["s-ol"]=L,k)}}for(const M of Dh){const k=M.$nodeToRelocate$,L=M.$slotRefNode$;if(L){const P=L.parentNode;let D=L.nextSibling;{let j=(r=k["s-ol"])==null?void 0:r.previousSibling;for(;j;){let z=(n=j["s-nr"])!=null?n:null;if(z&&z["s-sn"]===k["s-sn"]&&P===z.parentNode){for(z=z.nextSibling;z===k||z!=null&&z["s-sr"];)z=z==null?void 0:z.nextSibling;if(!z||!z["s-nr"]){D=z;break}}j=j.previousSibling}}(!D&&P!==k.parentNode||k.nextSibling!==D)&&k!==D&&(!k["s-hn"]&&k["s-ol"]&&(k["s-hn"]=k["s-ol"].parentNode.nodeName),ef(P,k,D),k.nodeType===1&&(k.hidden=(o=k["s-ih"])!=null?o:!1)),k&&typeof L["s-rf"]=="function"&&L["s-rf"](k)}else k.nodeType===1&&(i&&(k["s-ih"]=(u=k.hidden)!=null?u:!1),k.hidden=!0)}}SE&&DQ(I.$elm$),Vn.$flags$&=-2,Dh.length=0}if(Ya.experimentalScopedSlotChanges&&b.$flags$&2)for(const M of I.$elm$.childNodes)M["s-hn"]!==Mv&&!M["s-sh"]&&(i&&M["s-ih"]==null&&(M["s-ih"]=(f=M.hidden)!=null?f:!1),M.hidden=!0);hA=void 0},H1e=(e,t)=>{},XP=(e,t)=>(e.$flags$|=16,H1e(e,e.$ancestorComponent$),x1e(()=>W1e(e,t))),W1e=(e,t)=>{const i=e.$hostElement$,r=Vy("scheduleUpdate",e.$cmpMeta$.$tagName$),n=i;if(!n)throw new Error(`Can't render component <${i.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let o;return t?o=Yg(n,"componentWillLoad"):o=Yg(n,"componentWillUpdate"),o=SV(o,()=>Yg(n,"componentWillRender")),r(),SV(o,()=>J1e(e,n,t))},SV=(e,t)=>Z1e(e)?e.then(t).catch(i=>{console.error(i),t()}):t(),Z1e=e=>e instanceof Promise||e&&e.then&&typeof e.then=="function",J1e=async(e,t,i)=>{const r=e.$hostElement$,n=Vy("update",e.$cmpMeta$.$tagName$);r["s-rc"],i&&V1e(e);const o=Vy("render",e.$cmpMeta$.$tagName$);K1e(e,t,r,i),o(),n(),Y1e(e)},xV=null,K1e=(e,t,i,r)=>{try{xV=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(Ya.hasRenderFn||Ya.reflect)&&(Ya.vdomRender||Ya.reflect)&&(Ya.hydrateServerSide||q1e(e,t,r))}catch(g){J_(g,e.$hostElement$)}return xV=null,null},Y1e=e=>{const t=e.$cmpMeta$.$tagName$,i=e.$hostElement$,r=Vy("postUpdate",t),n=i;e.$ancestorComponent$,Yg(n,"componentDidRender"),e.$flags$&64?(Yg(n,"componentDidUpdate"),r()):(e.$flags$|=64,Yg(n,"componentDidLoad"),r())},C6=e=>{{const t=dm(e),i=t.$hostElement$.isConnected;return i&&(t.$flags$&18)===2&&XP(t,!1),i}},Yg=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(r){J_(r)}},X1e=(e,t)=>dm(e).$instanceValues$.get(t),Q1e=(e,t,i,r)=>{const n=dm(e),o=e,u=n.$instanceValues$.get(t),f=n.$flags$,g=o;i=N1e(i,r.$members$[t][0]);const b=Number.isNaN(u)&&Number.isNaN(i);if(i!==u&&!b){n.$instanceValues$.set(t,i);{if(r.$watchers$&&f&128){const I=r.$watchers$[t];I&&I.map(M=>{try{g[M](i,u,t)}catch(k){J_(k,o)}})}if((f&18)===2){if(g.componentShouldUpdate&&g.componentShouldUpdate(i,u,t)===!1)return;XP(n,!1)}}}},ege=(e,t,i)=>{var r,n;const o=e.prototype;if(t.$members$||t.$watchers$||e.watchers){e.watchers&&!t.$watchers$&&(t.$watchers$=e.watchers);const u=Object.entries((r=t.$members$)!=null?r:{});u.map(([f,[g]])=>{(g&31||g&32)&&Object.defineProperty(o,f,{get(){return X1e(this,f)},set(b){Q1e(this,f,b,t)},configurable:!0,enumerable:!0})});{const f=new Map;o.attributeChangedCallback=function(g,b,E){Vn.jmp(()=>{var I;const M=f.get(g);if(this.hasOwnProperty(M))E=this[M],delete this[M];else{if(o.hasOwnProperty(M)&&typeof this[M]=="number"&&this[M]==E)return;if(M==null){const k=dm(this),L=k==null?void 0:k.$flags$;if(L&&!(L&8)&&L&128&&E!==b){const D=this,j=(I=t.$watchers$)==null?void 0:I[g];j==null||j.forEach(z=>{D[z]!=null&&D[z].call(D,E,b,g)})}return}}this[M]=E===null&&typeof this[M]=="boolean"?!1:E})},e.observedAttributes=Array.from(new Set([...Object.keys((n=t.$watchers$)!=null?n:{}),...u.filter(([g,b])=>b[0]&15).map(([g,b])=>{var E;const I=b[1]||g;return f.set(I,g),b[0]&512&&((E=t.$attrsToReflect$)==null||E.push([g,I])),I})]))}}return e},tge=async(e,t,i,r)=>{let n;if(!(t.$flags$&32)){t.$flags$|=32,i.$lazyBundleId$;{n=e.constructor;const u=e.localName;customElements.whenDefined(u).then(()=>t.$flags$|=128)}if(n&&n.style){let u;typeof n.style=="string"?u=n.style:typeof n.style!="string"&&(t.$modeName$=P1e(e),t.$modeName$&&(u=n.style[t.$modeName$]));const f=LQ(i,t.$modeName$);if(!wE.has(f)){const g=Vy("registerStyles",i.$tagName$);j1e(f,u,!!(i.$flags$&1)),g()}}}t.$ancestorComponent$,XP(t,!0)},EV=e=>{},ige=e=>{if(!(Vn.$flags$&1)){const t=dm(e),i=t.$cmpMeta$,r=Vy("connectedCallback",i.$tagName$);t.$flags$&1?(UQ(e,t,i.$listeners$),t!=null&&t.$lazyInstance$?EV(t.$lazyInstance$):t!=null&&t.$onReadyPromise$&&t.$onReadyPromise$.then(()=>EV(t.$lazyInstance$))):(t.$flags$|=1,i.$flags$&12&&rge(e),i.$members$&&Object.entries(i.$members$).map(([n,[o]])=>{if(o&31&&e.hasOwnProperty(n)){const u=e[n];delete e[n],e[n]=u}}),tge(e,t,i)),r()}},rge=e=>{const t=e["s-cr"]=fu.createComment("");t["s-cn"]=!0,ef(e,t,e.firstChild)},nge=async e=>{if(!(Vn.$flags$&1)){const t=dm(e);t.$rmListeners$&&(t.$rmListeners$.map(i=>i()),t.$rmListeners$=void 0)}},fm=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};i.$members$=t[2],i.$listeners$=t[3],i.$watchers$=e.$watchers$,i.$attrsToReflect$=[];const r=e.prototype.connectedCallback,n=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){m1e(this,i)},connectedCallback(){const o=dm(this);UQ(this,o,i.$listeners$),ige(this),r&&r.call(this)},disconnectedCallback(){nge(this),n&&n.call(this)},__attachShadow(){if(!this.shadowRoot)this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)});else if(this.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${i.$tagName$}! Mode is set to ${this.shadowRoot.mode} but Stencil only supports open shadow roots.`)}}),e.is=i.$tagName$,ege(e,i)},sge=(e,t)=>t,UQ=(e,t,i,r)=>{i&&i.map(([n,o,u])=>{const f=age(e,n),g=oge(t,u),b=lge(n);Vn.ael(f,o,g,b),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>Vn.rel(f,o,g,b))})},oge=(e,t)=>i=>{var r;try{Ya.lazyLoad||e.$hostElement$[t](i)}catch(n){J_(n)}},age=(e,t)=>t&4?fu:t&8?K_:t&16?fu.body:e,lge=e=>w1e?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Kh=globalThis.calciteConfig,zet=(Kh==null?void 0:Kh.focusTrapStack)||[];Kh!=null&&Kh.logLevel;const IV="2.13.2",uge="2024-10-24",cge="e38e2977d";function hge(){if(Kh&&Kh.version)return;console.info(`Using Calcite Components ${IV} [Date: ${uge}, Revision: ${cge}]`);const e=Kh||globalThis.calciteConfig||{};Object.defineProperty(e,"version",{value:IV,writable:!1}),globalThis.calciteConfig=e}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const X_=()=>typeof navigator<"u"&&typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function TV(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>e.contains(IQ)||e.contains(EQ)&&t?"dark":"light",r=u=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:u}})),n=u=>{o!==u&&r(u),o=u};let o=i();r(o),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",u=>n(u.matches?"dark":"light")),new MutationObserver(()=>n(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function dge(){X_()&&(document.readyState==="interactive"?TV():document.addEventListener("DOMContentLoaded",()=>TV(),{once:!0})),hge()}const pge=dge;pge();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function Q_(e,t,i){if(!X_())return;const r=fge(e);return new r(t,i)}function fge(e){class t extends window.MutationObserver{constructor(r){super(r),this.observedEntry=[],this.callback=r}observe(r,n){return this.observedEntry.push({target:r,options:n}),super.observe(r,n)}unobserve(r){const n=this.observedEntry.filter(o=>o.target!==r);this.observedEntry=[],this.callback(super.takeRecords(),this),this.disconnect(),n.forEach(o=>this.observe(o.target,o.options))}}return function(){return e==="intersection"?window.IntersectionObserver:e==="mutation"?t:window.ResizeObserver}()}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */let n9;const yge={childList:!0};function mge(e){n9||(n9=Q_("mutation",vge)),n9.observe(e.el,yge)}function gge(e){n9.unobserve(e.el)}function vge(e){e.forEach(({target:t})=>{C6(t)})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function wge(e){return e.map(t=>{let i="";for(let r=0;r<t;r++)i+=((1+Math.random())*65536|0).toString(16).substring(1);return i}).join("-")}const GQ=()=>wge([2,1,1,1,3]);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 *//*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var BQ=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],EE=BQ.join(","),qQ=typeof Element>"u",Uy=qQ?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,IE=!qQ&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},TE=function e(t,i){var r;i===void 0&&(i=!0);var n=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),o=n===""||n==="true",u=o||i&&t&&e(t.parentNode);return u},bge=function(t){var i,r=t==null||(i=t.getAttribute)===null||i===void 0?void 0:i.call(t,"contenteditable");return r===""||r==="true"},HQ=function(t,i,r){if(TE(t))return[];var n=Array.prototype.slice.apply(t.querySelectorAll(EE));return i&&Uy.call(t,EE)&&n.unshift(t),n=n.filter(r),n},WQ=function e(t,i,r){for(var n=[],o=Array.from(t);o.length;){var u=o.shift();if(!TE(u,!1))if(u.tagName==="SLOT"){var f=u.assignedElements(),g=f.length?f:u.children,b=e(g,!0,r);r.flatten?n.push.apply(n,b):n.push({scopeParent:u,candidates:b})}else{var E=Uy.call(u,EE);E&&r.filter(u)&&(i||!t.includes(u))&&n.push(u);var I=u.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(u),M=!TE(I,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(u));if(I&&M){var k=e(I===!0?u.children:I.children,!0,r);r.flatten?n.push.apply(n,k):n.push({scopeParent:u,candidates:k})}else o.unshift.apply(o,u.children)}}return n},ZQ=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},JQ=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||bge(t))&&!ZQ(t)?0:t.tabIndex},_ge=function(t,i){var r=JQ(t);return r<0&&i&&!ZQ(t)?0:r},Sge=function(t,i){return t.tabIndex===i.tabIndex?t.documentOrder-i.documentOrder:t.tabIndex-i.tabIndex},KQ=function(t){return t.tagName==="INPUT"},xge=function(t){return KQ(t)&&t.type==="hidden"},Ege=function(t){var i=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return i},Ige=function(t,i){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===i)return t[r]},Tge=function(t){if(!t.name)return!0;var i=t.form||IE(t),r=function(f){return i.querySelectorAll('input[type="radio"][name="'+f+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=r(window.CSS.escape(t.name));else try{n=r(t.name)}catch(u){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",u.message),!1}var o=Ige(n,t.form);return!o||o===t},$ge=function(t){return KQ(t)&&t.type==="radio"},Mge=function(t){return $ge(t)&&!Tge(t)},Cge=function(t){var i,r=t&&IE(t),n=(i=r)===null||i===void 0?void 0:i.host,o=!1;if(r&&r!==t){var u,f,g;for(o=!!((u=n)!==null&&u!==void 0&&(f=u.ownerDocument)!==null&&f!==void 0&&f.contains(n)||t!=null&&(g=t.ownerDocument)!==null&&g!==void 0&&g.contains(t));!o&&n;){var b,E,I;r=IE(n),n=(b=r)===null||b===void 0?void 0:b.host,o=!!((E=n)!==null&&E!==void 0&&(I=E.ownerDocument)!==null&&I!==void 0&&I.contains(n))}}return o},$V=function(t){var i=t.getBoundingClientRect(),r=i.width,n=i.height;return r===0&&n===0},Age=function(t,i){var r=i.displayCheck,n=i.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var o=Uy.call(t,"details>summary:first-of-type"),u=o?t.parentElement:t;if(Uy.call(u,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof n=="function"){for(var f=t;t;){var g=t.parentElement,b=IE(t);if(g&&!g.shadowRoot&&n(g)===!0)return $V(t);t.assignedSlot?t=t.assignedSlot:!g&&b!==t.ownerDocument?t=b.host:t=g}t=f}if(Cge(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return $V(t);return!1},kge=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var i=t.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var n=i.children.item(r);if(n.tagName==="LEGEND")return Uy.call(i,"fieldset[disabled] *")?!0:!n.contains(t)}return!0}i=i.parentElement}return!1},$E=function(t,i){return!(i.disabled||TE(i)||xge(i)||Age(i,t)||Ege(i)||kge(i))},dA=function(t,i){return!(Mge(i)||JQ(i)<0||!$E(t,i))},Lge=function(t){var i=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},Oge=function e(t){var i=[],r=[];return t.forEach(function(n,o){var u=!!n.scopeParent,f=u?n.scopeParent:n,g=_ge(f,u),b=u?e(n.candidates):f;g===0?u?i.push.apply(i,b):i.push(f):r.push({documentOrder:o,tabIndex:g,item:n,isScope:u,content:b})}),r.sort(Sge).reduce(function(n,o){return o.isScope?n.push.apply(n,o.content):n.push(o.content),n},[]).concat(i)},Rge=function(t,i){i=i||{};var r;return i.getShadowRoot?r=WQ([t],i.includeContainer,{filter:dA.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:Lge}):r=HQ(t,i.includeContainer,dA.bind(null,i)),Oge(r)},Vet=function(t,i){i=i||{};var r;return i.getShadowRoot?r=WQ([t],i.includeContainer,{filter:$E.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=HQ(t,i.includeContainer,$E.bind(null,i)),r},Uet=function(t,i){if(i=i||{},!t)throw new Error("No node provided");return Uy.call(t,EE)===!1?!1:dA(i,t)},Pge=BQ.concat("iframe").join(","),Get=function(t,i){if(i=i||{},!t)throw new Error("No node provided");return Uy.call(t,Pge)===!1?!1:$E(i,t)};const Nge={getShadowRoot:!0};function Bet(e){return e?e.id=e.id||`${e.tagName.toLowerCase()}-${GQ()}`:""}function QP(e){const t="dir",i=`[${t}]`,r=Tf(e,i);return r?r.getAttribute(t):"ltr"}function eN(e){return e.getRootNode()}function qet(e){const t=eN(e);return"host"in t?t:null}function YQ(e){return e.host||null}function tN(e,{selector:t,id:i}){if(!e)return null;e.assignedSlot&&(e=e.assignedSlot);const r=eN(e);return(i?"getElementById"in r?r.getElementById(i):null:t?r.querySelector(t):null)||tN(YQ(r),{selector:t,id:i})}function Tf(e,t){return e?e.closest(t)||Tf(YQ(eN(e)),t):null}function Fge(e,t){return XQ(e,t)}function XQ(e,t){if(!e)return;const i=t(e);if(i!==void 0)return i;const{parentNode:r}=e;return XQ(r instanceof ShadowRoot?r.host:r,t)}function Dge(e,t){return!!Fge(t,i=>i===e?!0:void 0)}function jge(e){return typeof(e==null?void 0:e.setFocus)=="function"}async function zge(e){if(e)return jge(e)?e.setFocus():e.focus()}function Vge(e){if(e)return Rge(e,Nge)[0]??e}function Het(e){var t;(t=Vge(e))==null||t.focus()}const o_=":not([slot])";function Uge(e,t,i){t&&!Array.isArray(t)&&typeof t!="string"&&(i=t,t=null);const r=t?Array.isArray(t)?t.map(n=>`[slot="${n}"]`).join(","):`[slot="${t}"]`:o_;return i!=null&&i.all?Gge(e,r,i):Bge(e,r,i)}function QQ(e,t){return e?Array.from(e.children||[]).filter(i=>i==null?void 0:i.matches(t)):[]}function Gge(e,t,i){let r=t===o_?QQ(e,o_):Array.from(e.querySelectorAll(t));r=i&&i.direct===!1?r:r.filter(o=>o.parentElement===e),r=i!=null&&i.matches?r.filter(o=>o==null?void 0:o.matches(i.matches)):r;const n=i==null?void 0:i.selector;return n?r.map(o=>Array.from(o.querySelectorAll(n))).reduce((o,u)=>[...o,...u],[]).filter(o=>!!o):r}function Bge(e,t,i){let r=t===o_?QQ(e,o_)[0]||null:e.querySelector(t);r=i&&i.direct===!1||(r==null?void 0:r.parentElement)===e?r:null,r=i!=null&&i.matches?r!=null&&r.matches(i.matches)?r:null:r;const n=i==null?void 0:i.selector;return n?r==null?void 0:r.querySelector(n):r}function qge(e,t){return e.filter(i=>i.matches(t))}function ME(e,t,i){if(typeof t=="string"&&t!=="")return t;if(t==="")return e[i]}function CE(e){return(!!e).toString()}function Wet(e){return eu(e)||Wge(e)}function Hge(e){return Zge(e).filter(t=>t.nodeType===Node.TEXT_NODE).map(t=>t.textContent).join("").trim()}function Wge(e){return!!Hge(e)}function Zge(e){return e.currentTarget.assignedNodes({flatten:!0})}function eu(e){return!!Gw(e).length}function Gw(e,t){return Jge(e.target,t)}function Jge(e,t){const i=e.assignedElements({flatten:!0});return t?qge(i,t):i}function Kge(e){return!!(e.isPrimary&&e.button===0)}function Zet(e){return e.detail===0}const Jet=(e,t,i,r=!0)=>{const n=e.indexOf(t),o=n===0,u=n===e.length-1;r&&(i=i==="previous"&&o?"last":i==="next"&&u?"first":i);let f;return i==="previous"?f=e[n-1]||e[r?e.length-1:n]:i==="next"?f=e[n+1]||e[r?0:n]:i==="last"?f=e[e.length-1]:f=e[0],zge(f),f};function Yge(e,t){if(e.parentNode!==t.parentNode)return!1;const i=Array.from(e.parentNode.children);return i.indexOf(e)<i.indexOf(t)}async function Ket(e,t,i,r){return Xge(e,t,"transition",i,r)}async function Xge(e,t,i,r,n){const o=window.getComputedStyle(e),u=o.transitionDuration,f=o.transitionProperty,g=u.split(","),E=f.split(",").map(D=>D.trim()).indexOf(t),I=g[E]??g[0];function M(){requestAnimationFrame(()=>{r==null||r(),requestAnimationFrame(()=>n==null?void 0:n())})}if(I==="0s"){M();return}const k="transitionstart",L="transitionend",P="transitioncancel";return new Promise(D=>{const j=window.setTimeout(()=>{e.removeEventListener(k,z),e.removeEventListener(L,V),e.removeEventListener(P,V),M(),D()},parseFloat(I)*1e3);e.addEventListener(k,z),e.addEventListener(L,V),e.addEventListener(P,V);function z(W){W.target===e&&MV(W)===t&&(window.clearTimeout(j),e.removeEventListener(k,z),r==null||r())}function V(W){W.target===e&&MV(W)===t&&(e.removeEventListener(L,V),e.removeEventListener(P,V),n==null||n(),D())}})}function Qge(e){return"propertyName"in e}function MV(e){return Qge(e)?e.propertyName:e.animationName}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Mu={main:"main",content:"content",contentBehind:"content--behind",contentBottom:"content-bottom",contentNonInteractive:"content--non-interactive",footer:"footer",positionedSlotWrapper:"positioned-slot-wrapper",container:"container",contentBehindCenterContent:"center-content"},bl={centerRow:"center-row",panelStart:"panel-start",panelEnd:"panel-end",panelTop:"panel-top",panelBottom:"panel-bottom",header:"header",footer:"footer",alerts:"alerts",sheets:"sheets",modals:"modals",dialogs:"dialogs"},eve=":host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{position:absolute;inset:0px;display:flex;block-size:100%;inline-size:100%;flex-direction:column;overflow:hidden;--calcite-shell-tip-spacing:26vw}.main{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;flex-direction:row;justify-content:space-between;overflow:hidden}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;overflow:auto;justify-content:space-between}.content ::slotted(calcite-shell-center-row),.content ::slotted(calcite-panel),.content ::slotted(calcite-flow){flex:1 1 auto;align-self:stretch;max-block-size:unset}.content--behind{position:absolute;inset:0px;border-width:0px;z-index:calc(var(--calcite-z-index) - 1);display:initial}.content--non-interactive{pointer-events:none;display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap}::slotted(calcite-shell-center-row){inline-size:unset}::slotted(.header .heading){font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-normal)}slot[name=panel-start]::slotted(calcite-shell-panel),slot[name=panel-end]::slotted(calcite-shell-panel){position:relative;z-index:calc(var(--calcite-z-index) + 1)}slot[name=panel-end]::slotted(calcite-shell-panel){margin-inline-start:auto}::slotted(calcite-panel),::slotted(calcite-flow){border-width:1px;border-inline-start-width:0px;border-inline-end-width:0px;border-style:solid;border-color:var(--calcite-color-border-3)}slot[name=center-row]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-top]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-bottom]::slotted(calcite-shell-center-row:not([detached])){border-inline-start-width:1px;border-inline-end-width:1px;border-color:var(--calcite-color-border-3)}.center-content{display:flex;flex-direction:column;justify-content:space-between;block-size:100%;inline-size:100%;min-inline-size:0}.content-bottom{justify-content:flex-end}::slotted(calcite-shell-center-row){flex:none;align-self:stretch}::slotted(calcite-tip-manager){position:absolute;z-index:var(--calcite-z-index-toast);box-sizing:border-box}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}::slotted(calcite-tip-manager){animation:in-up var(--calcite-internal-animation-timing-slow) ease-in-out;border-radius:0.25rem;--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);inset-block-end:0.5rem;inset-inline:var(--calcite-shell-tip-spacing)}slot[name=center-row]::slotted(calcite-shell-center-row),slot[name=panel-bottom]::slotted(calcite-shell-center-row){margin-block-start:auto}slot[name=panel-top]::slotted(calcite-shell-center-row){margin-block-end:auto}.position-wrapper{position:absolute;pointer-events:none;inset:0}:host([hidden]){display:none}[hidden]{display:none}",tve=eve,ive=fm(class extends pm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.handleHeaderSlotChange=t=>{this.hasHeader=!!eu(t)},this.handleFooterSlotChange=t=>{this.hasFooter=!!eu(t)},this.handleAlertsSlotChange=t=>{var i;this.hasAlerts=!!eu(t),(i=Gw(t))==null||i.map(r=>{r.tagName==="CALCITE-ALERT"&&(r.embedded=!0)})},this.handleSheetsSlotChange=t=>{var i;this.hasSheets=!!eu(t),(i=Gw(t))==null||i.map(r=>{r.tagName==="CALCITE-SHEET"&&(r.embedded=!0)})},this.handleModalsSlotChange=t=>{var i;this.hasModals=!!eu(t),(i=Gw(t))==null||i.map(r=>{r.tagName==="CALCITE-MODAL"&&(r.embedded=!0)})},this.handlePanelTopChange=t=>{this.hasPanelTop=eu(t)},this.handlePanelBottomChange=t=>{this.hasPanelBottom=eu(t)},this.handleDialogsSlotChange=t=>{var i;this.hasDialogs=!!eu(t),(i=Gw(t))==null||i.map(r=>{r.tagName==="CALCITE-DIALOG"&&(r.embedded=!0)})},this.contentBehind=!1,this.hasHeader=!1,this.hasFooter=!1,this.hasAlerts=!1,this.hasModals=!1,this.hasDialogs=!1,this.hasSheets=!1,this.hasPanelTop=!1,this.hasPanelBottom=!1,this.hasOnlyPanelBottom=!1,this.panelIsResizing=!1}handleCalciteInternalShellPanelResizeStart(t){this.panelIsResizing=!0,t.stopPropagation()}handleCalciteInternalShellPanelResizeEnd(t){this.panelIsResizing=!1,t.stopPropagation()}updateHasOnlyPanelBottom(){this.hasOnlyPanelBottom=!this.hasPanelTop&&this.hasPanelBottom}connectedCallback(){mge(this)}disconnectedCallback(){gge(this)}renderHeader(){return Be("div",{hidden:!this.hasHeader},Be("slot",{key:"header",name:bl.header,onSlotchange:this.handleHeaderSlotChange}))}renderFooter(){return Be("div",{class:Mu.footer,hidden:!this.hasFooter,key:"footer"},Be("slot",{name:bl.footer,onSlotchange:this.handleFooterSlotChange}))}renderAlerts(){return Be("div",{hidden:!this.hasAlerts},Be("slot",{key:"alerts",name:bl.alerts,onSlotchange:this.handleAlertsSlotChange}))}renderSheets(){return Be("div",{hidden:!this.hasSheets},Be("slot",{key:"sheets",name:bl.sheets,onSlotchange:this.handleSheetsSlotChange}))}renderModals(){return Be("div",{hidden:!this.hasModals},Be("slot",{key:"modals",name:bl.modals,onSlotchange:this.handleModalsSlotChange}))}renderDialogs(){return Be("div",{hidden:!this.hasDialogs},Be("slot",{key:"dialogs",name:bl.dialogs,onSlotchange:this.handleDialogsSlotChange}))}renderContent(){const{panelIsResizing:t}=this,i=Be("slot",{key:"default-slot"}),r=t?Be("div",{class:Mu.contentNonInteractive},i):i,n=Be("slot",{key:"center-row-slot",name:bl.centerRow}),o=Be("slot",{key:"panel-bottom-slot",name:bl.panelBottom,onSlotchange:this.handlePanelBottomChange}),u=Be("slot",{key:"panel-top-slot",name:bl.panelTop,onSlotchange:this.handlePanelTopChange}),f="content-container";return this.contentBehind?[Be("div",{class:{[Mu.content]:!0,[Mu.contentBehind]:!0},key:f},r),Be("div",{class:{[Mu.contentBehindCenterContent]:!0,[Mu.contentBottom]:this.hasOnlyPanelBottom}},u,o,n)]:[Be("div",{class:{[Mu.content]:!0,[Mu.contentBottom]:this.hasOnlyPanelBottom},key:f},u,r,o,n)]}renderMain(){return Be("div",{class:Mu.main},Be("slot",{name:bl.panelStart}),this.renderContent(),Be("slot",{name:bl.panelEnd}))}renderPositionedSlots(){return Be("div",{class:Mu.positionedSlotWrapper},this.renderAlerts(),this.renderModals(),this.renderDialogs(),this.renderSheets())}render(){return Be(sge,{key:"6864b8b95b6edd871ad622b0d49a3f4a42a0a8a8"},this.renderHeader(),this.renderMain(),this.renderFooter(),this.renderPositionedSlots())}get el(){return this}static get watchers(){return{hasPanelTop:["updateHasOnlyPanelBottom"],hasPanelBottom:["updateHasOnlyPanelBottom"]}}static get style(){return tve}},[1,"calcite-shell",{contentBehind:[516,"content-behind"],hasHeader:[32],hasFooter:[32],hasAlerts:[32],hasModals:[32],hasDialogs:[32],hasSheets:[32],hasPanelTop:[32],hasPanelBottom:[32],hasOnlyPanelBottom:[32],panelIsResizing:[32]},[[0,"calciteInternalShellPanelResizeStart","handleCalciteInternalShellPanelResizeStart"],[0,"calciteInternalShellPanelResizeEnd","handleCalciteInternalShellPanelResizeEnd"]],{hasPanelTop:["updateHasOnlyPanelBottom"],hasPanelBottom:["updateHasOnlyPanelBottom"]}]);function rve(){if(typeof customElements>"u")return;["calcite-shell"].forEach(t=>{switch(t){case"calcite-shell":customElements.get(t)||customElements.define(t,ive);break}})}rve();const nve=e=>e.toLowerCase().split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(""),eee=e=>e.replace(/([A-Z])/g,t=>`-${t[0].toLowerCase()}`),sve=(e,t,i={})=>{if(e instanceof Element){const r=ove(e.classList,t,i);r!==""&&(e.className=r),Object.keys(t).forEach(n=>{if(!(n==="children"||n==="style"||n==="ref"||n==="class"||n==="className"||n==="forwardedRef"))if(n.indexOf("on")===0&&n[2]===n[2].toUpperCase()){const o=n.substring(2),u=o[0].toLowerCase()+o.substring(1);tee(u)||lve(e,u,t[n])}else e[n]=t[n],typeof t[n]==="string"&&e.setAttribute(eee(n),t[n])})}},ove=(e,t,i)=>{const r=t.className||t.class,n=i.className||i.class,o=Z$(e),u=Z$(r?r.split(" "):[]),f=Z$(n?n.split(" "):[]),g=[];return o.forEach(b=>{u.has(b)?(g.push(b),u.delete(b)):f.has(b)||g.push(b)}),u.forEach(b=>g.push(b)),g.join(" ")},ave=e=>{switch(e){case"doubleclick":return"dblclick"}return e};/**
 * Checks if an event is supported in the current execution environment.
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */const tee=e=>{if(typeof document>"u")return!0;{const t="on"+ave(e);let i=t in document;if(!i){const r=document.createElement("div");r.setAttribute(t,"return;"),i=typeof r[t]=="function"}return i}},lve=(e,t,i)=>{const r=e.__events||(e.__events={}),n=r[t];n&&e.removeEventListener(t,n),e.addEventListener(t,r[t]=function(u){i&&i.call(this,u)})},Z$=e=>{const t=new Map;return e.forEach(i=>t.set(i,i)),t},uve=(e,t)=>{typeof e=="function"?e(t):e!=null&&(e.current=t)},cve=(...e)=>t=>{e.forEach(i=>{uve(i,t)})},hve=(e,t)=>{const i=(r,n)=>pC.createElement(e,Object.assign({},r,{forwardedRef:n}));return i.displayName=t,pC.forwardRef(i)};var dve=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]]);return i};const eS=(e,t,i,r)=>{const n=nve(e),o=class extends pC.Component{constructor(u){super(u),this.setComponentElRef=f=>{this.componentEl=f}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(u){sve(this.componentEl,this.props,u)}render(){const u=this.props,{children:f,forwardedRef:g,style:b,className:E,ref:I}=u,M=dve(u,["children","forwardedRef","style","className","ref"]);let k=Object.keys(M).reduce((P,D)=>{const j=M[D];if(D.indexOf("on")===0&&D[2]===D[2].toUpperCase()){const z=D.substring(2).toLowerCase();typeof document<"u"&&tee(z)&&(P[D]=j)}else{const z=typeof j;(z==="string"||z==="boolean"||z==="number")&&(P[eee(D)]=j)}return P},{});const L=Object.assign(Object.assign({},k),{ref:cve(g,this.setComponentElRef),style:b});return ot.createElement(e,L,f)}static get displayName(){return n}};return hve(o,n)},Bc=eS("calcite-icon"),pve=eS("calcite-input"),J$=eS("calcite-input-message"),fve=eS("calcite-shell"),yve=eS("calcite-text-area"),mve="data:image/svg+xml,%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:a='http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/'%20x='0px'%20y='0px'%20width='138'%20height='60'%20viewBox='0%200%20138%2060'%20enable-background='new%200%200%20138%2060'%20xml:space='preserve'%3e%3cdefs%3e%3c/defs%3e%3crect%20fill='%23CA1517'%20width='138'%20height='60'/%3e%3cpath%20fill='%23FFFFFF'%20d='M110.604,33.848h1.432V36.1h-1.468c-0.466,0-0.575-0.25-0.575-0.752v-0.787%20C109.992,34.096,110.102,33.848,110.604,33.848%20M117.871,28.226c0-2.974-1.252-5.048-4.906-5.048h-7.948v5.44%20c0.429-0.323,1.217-0.43,1.899-0.43h4.582c0.465,0,0.537,0.146,0.537,0.646v0.825h-3.008c-3.615,0-4.869,2.073-4.869,5.009v1.29%20c0,3.041,1.287,5.12,4.869,5.12h8.844V28.226z%20M98.383,41.078l4.621-17.9H96.67l-1.576,11.526l-1.649-11.526h-6.62l4.581,17.9%20H98.383z%20M77.75,33.848h1.432V36.1h-1.467c-0.467,0-0.572-0.25-0.572-0.752v-0.787C77.143,34.096,77.248,33.848,77.75,33.848%20M85.017,28.226c0-2.974-1.253-5.048-4.901-5.048h-7.949v5.44c0.426-0.323,1.217-0.43,1.895-0.43h4.585%20c0.464,0,0.536,0.146,0.536,0.646v0.825h-3.008c-3.615,0-4.867,2.073-4.867,5.009v1.29c0,3.041,1.285,5.12,4.867,5.12h8.843V28.226z%20M62.01,41.078h5.836V16.018H62.01V41.078z%20M50.095,23.178v-7.16H44.26v25.061h5.835V28.295h1.54c0.429,0,0.498,0.182,0.498,0.682%20v12.102h5.839V28.295c0-3.005-1.183-5.117-4.906-5.117H50.095z%20M33.879,21.89h5.834v-5.872h-5.834V21.89z%20M33.879,41.078h5.834%20V23.179h-5.834V41.078z%20M23.07,35.457h-2.257c-0.321,0-0.678-0.036-1.037-0.18v5.801h5.12c3.616,0,4.833-2.079,4.833-5.085V16.018%20h-6.122v18.76C23.607,35.277,23.461,35.457,23.07,35.457'/%3e%3cscript%20xmlns=''%20id='bw-fido2-page-script'/%3e%3c/svg%3e",iee="data:image/svg+xml,%3csvg%20width='30'%20height='30'%20viewBox='0%200%2030%2030'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M23.0912%2024.9866C23.4954%2024.9864%2023.883%2024.8202%2024.1687%2024.5245L29.5544%2018.9479C29.84%2018.652%2030.0003%2018.251%2030%2017.833L29.9961%2011.1451C29.9959%2010.727%2029.8352%2010.3262%2029.5493%2010.0307L24.1571%204.4608C23.8702%204.16448%2023.4832%203.99864%2023.079%204.00001L1.52309%204.0134C1.3228%204.01293%201.12439%204.05342%200.939276%204.13253C0.754162%204.21164%200.585998%204.32782%200.444452%204.47438C0.302906%204.62094%200.190773%204.795%200.114499%204.98654C0.0382246%205.17807%20-0.000684416%205.38332%209.11036e-06%205.59046L0.0103705%2023.4248C0.0106744%2023.8428%200.171492%2024.2436%200.457456%2024.539C0.74342%2024.8344%201.13112%2025.0002%201.53529%2025L23.0912%2024.9866ZM3.04893%207.16468L22.4492%207.15263L26.9485%2011.8001L26.9516%2017.1817L22.4578%2021.8348L3.05746%2021.8468L3.04893%207.16468Z'%20fill='%236C9B2E'/%3e%3cpath%20d='M18.3924%2012.6604C17.4126%2013.6749%2017.4136%2015.3188%2018.3945%2016.332C19.3755%2017.3453%2020.965%2017.3443%2021.9448%2016.3298C22.9246%2015.3153%2022.9236%2013.6715%2021.9426%2012.6582C20.9617%2011.6449%2019.3722%2011.6459%2018.3924%2012.6604Z'%20fill='%236C9B2E'/%3e%3c/svg%3e";function gve(e){var t;return Fe.jsxs("div",{className:"app-header",children:[Fe.jsx("div",{className:"logo",children:Fe.jsx("a",{href:e.appLogoLink,target:"_blank",children:Fe.jsx("img",{className:"logo-image",src:mve,alt:"logo"})})}),Fe.jsxs("div",{className:"title",children:[Fe.jsx("div",{className:`main-title title-item ${e.actualThemeInfo?"":"no-sub-title"}`,children:e.appTitle}),e.actualThemeInfo&&Fe.jsxs("div",{className:"sub-title title-item",children:[Fe.jsx("img",{src:iee,alt:"téma"}),(t=e.actualThemeInfo)==null?void 0:t.label]})]})]})}function m(e,t,i,r){var n,o=arguments.length,u=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(e,t,i,r);else for(var f=e.length-1;f>=0;f--)(n=e[f])&&(u=(o<3?n(u):o>3?n(t,i,u):n(t,i))||u);return o>3&&u&&Object.defineProperty(t,i,u),u}function Xet(e,t){return function(i,r){t(i,r,e)}}function Qet(e,t,i,r){function n(o){return o instanceof i?o:new i(function(u){u(o)})}return new(i||(i=Promise))(function(o,u){function f(E){try{b(r.next(E))}catch(I){u(I)}}function g(E){try{b(r.throw(E))}catch(I){u(I)}}function b(E){E.done?o(E.value):n(E.value).then(f,g)}b((r=r.apply(e,[])).next())})}let Np;function we(e){return typeof Np[e]=="function"?Np[e]=Np[e](globalThis):Np[e]}var XK,QK,eY,tY;Np=(XK=globalThis.dojoConfig)!=null&&XK.has||(QK=globalThis.esriConfig)!=null&&QK.has?{...(eY=globalThis.dojoConfig)==null?void 0:eY.has,...(tY=globalThis.esriConfig)==null?void 0:tY.has}:{},we.add=(e,t,i,r)=>{(r||Np[e]===void 0)&&(Np[e]=t),i&&we(e)},we.cache=Np,we.add("big-integer-warning-enabled",!0),we.add("esri-deprecation-warnings",!0),we.add("esri-tests-disable-screenshots",!1),we.add("esri-tests-use-full-window",!1),we.add("esri-tests-post-to-influx",!0),we.add("esri-cim-animations-enable-status","enabled"),we.add("esri-cim-animations-spotlight",!1),we.add("esri-cim-animations-freeze-time",!1),we.add("enable-feature:multiple-highlights",!1),(()=>{var t;we.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(we.add("host-browser",e),we.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),we.add("dom",e),we("host-browser")){const i=navigator,r=i.userAgent,n=i.appVersion,o=parseFloat(n);if(we.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),we.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),we.add("khtml",n.includes("Konqueror")?o:void 0),we.add("edge",parseFloat(r.split("Edge/")[1])||void 0),we.add("opr",parseFloat(r.split("OPR/")[1])||void 0),we.add("webkit",!we("wp")&&!we("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),we.add("chrome",!we("edge")&&!we("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),we.add("android",!we("wp")&&parseFloat(r.split("Android ")[1])||void 0),we.add("safari",!n.includes("Safari")||we("wp")||we("chrome")||we("android")||we("edge")||we("opr")?void 0:parseFloat(n.split("Version/")[1])),we.add("mac",n.includes("Macintosh")),!we("wp")&&/(iPhone|iPod|iPad)/.test(r)){const u=RegExp.$1.replace(/P/,"p"),f=/OS ([\d_]+)/.test(r)?RegExp.$1:"1",g=parseFloat(f.replace(/_/,".").replaceAll("_",""));we.add(u,g),we.add("ios",g)}we("webkit")||(!r.includes("Gecko")||we("wp")||we("khtml")||we("edge")||we.add("mozilla",o),we("mozilla")&&we.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),i=/iPhone/i.test(e);t&&we.add("esri-mobile",t),i&&we.add("esri-iPhone",i),we.add("esri-geolocation",!!navigator.geolocation)}we.add("esri-wasm","WebAssembly"in globalThis),we.add("esri-performance-mode-frames-between-render",20),we.add("esri-force-performance-mode",!1),we.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),we.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),we.add("esri-atomics","Atomics"in globalThis),we.add("esri-workers","Worker"in globalThis),we.add("web-feat:cache","caches"in globalThis),we.add("esri-workers-arraybuffer-transfer",!we("safari")||Number(we("safari"))>=12),we.add("workers-pool-size",8),we.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),we.add("featurelayer-simplify-payload-size-factors",[1,1,4]),we.add("featurelayer-fast-triangulation-enabled",!0),we.add("featurelayer-animation-enabled",!0),we.add("featurelayer-snapshot-enabled",!0),we.add("featurelayer-snapshot-point-min-threshold",8e4),we.add("featurelayer-snapshot-point-max-threshold",4e5),we.add("featurelayer-snapshot-point-coverage",.1),we.add("featurelayer-query-max-depth",4),we.add("featurelayer-query-pausing-enabled",!1),we.add("featurelayer-advanced-symbols",!1),we.add("featurelayer-pbf",!0),we.add("featurelayer-pbf-statistics",!1),we.add("feature-layers-workers",!0),we.add("feature-polyline-generalization-factor",1),we.add("mapview-transitions-duration",200),we.add("mapview-essential-goto-duration",200),we.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),we.add("mapserver-pbf-version-support",10.81),we.add("mapservice-popup-identify-max-tolerance",20),we("host-webworker")||we("host-browser")&&(we.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),we.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{we.add("esri-image-decode",!0,!0,!0)}).catch(()=>{we.add("esri-image-decode",!1,!0,!0)})}return!1}),we.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();let s9=class e0{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*e0._m}getInt(){return this._seed=(e0._a*this._seed+e0._c)%e0._m,this._seed}getFloat(){return this.getInt()/(e0._m-1)}getIntRange(t,i){return Math.round(this.getFloatRange(t,i))}getFloatRange(t,i){const r=i-t;return t+this.getInt()/e0._m*r}};s9._m=2147483647,s9._a=48271,s9._c=0;const vve=1.5,ett=1/vve,ttt=.5;function iN(e,t){return t?e.filter((i,r,n)=>n.findIndex(t.bind(null,i))===r):Array.from(new Set(e))}function tS(e,t,i){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function pA(e,t,i){let r,n;return i?(r=t.filter(o=>!e.some(u=>i(u,o))),n=e.filter(o=>!t.some(u=>i(u,o)))):(r=t.filter(o=>!e.includes(o)),n=e.filter(o=>!t.includes(o))),{added:r,removed:n}}function itt(e){return e&&typeof e.length=="number"}let ree=class{constructor(){this.last=0}};const nee=new ree;function fA(e,t,i,r){r=r||nee;const n=Math.max(0,r.last-10);for(let u=n;u<i;++u)if(e[u]===t)return r.last=u,u;const o=Math.min(n,i);for(let u=0;u<o;++u)if(e[u]===t)return r.last=u,u;return-1}function wve(e,t,i,r){const n=e.length,o=fA(e,t,n,r);if(o!==-1)return e[o]=e[n-1],e.pop(),t}const _l=new Set;function bve(e,t,i=e.length,r=t.length,n,o){if(r===0||i===0)return i;_l.clear();for(let f=0;f<r;++f)_l.add(t[f]);n=n||nee;const u=Math.max(0,n.last-10);for(let f=u;f<i;++f)if(_l.has(e[f])&&(o==null||o.push(e[f]),_l.delete(e[f]),e[f]=e[i-1],--i,--f,_l.size===0||i===0))return _l.clear(),i;for(let f=0;f<u;++f)if(_l.has(e[f])&&(o==null||o.push(e[f]),_l.delete(e[f]),e[f]=e[i-1],--i,--f,_l.size===0||i===0))return _l.clear(),i;return _l.clear(),i}function ntt(e,t){let i=0;for(let r=0;r<e.length;++r){const n=e[r];t(n,r)&&(e[i]=n,i++)}e.length=i}function see(e){return e?(CV.seed=e,()=>CV.getFloat()):Math.random}function oee(e,t){const i=see(t);for(let r=e.length-1;r>0;r--){const n=Math.floor(i()*(r+1)),o=e[r];e[r]=e[n],e[n]=o}return e}const CV=new s9;function rN(e,t){const i=e.indexOf(t);return i!==-1?(e.splice(i,1),t):null}function cr(e,t){return e!=null}const stt=[];function aee(e){return 32+e.length}function nN(){return 16}function ott(e){if(!e)return 0;let t=uee;for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];switch(typeof r){case"string":t+=aee(r);break;case"number":t+=nN();break;case"boolean":t+=4}}return t}function _ve(e){if(!e)return 0;if(Array.isArray(e))return Sve(e);let t=uee;for(const i in e)e.hasOwnProperty(i)&&(t+=lee(e[i]));return t}function Sve(e){const t=e.length;if(t===0||typeof e[0]=="number")return 32+8*t;let i=cee;for(let r=0;r<t;r++)i+=lee(e[r]);return i}function lee(e){switch(typeof e){case"object":return _ve(e);case"string":return aee(e);case"number":return nN();case"boolean":return 4;default:return 8}}function xve(e,t){return cee+e.length*t}const uee=32,cee=16;function att(e){return e instanceof ArrayBuffer}function sN(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int8Array"}function hee(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8Array"}function dee(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8ClampedArray"}function oN(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int16Array"}function pee(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint16Array"}function aN(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int32Array"}function fee(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint32Array"}function A6(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float32Array"}function k6(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float64Array"}function yee(e){return!("buffer"in e)}function ltt(...e){return e.reduce((t,i)=>t+(i?yee(i)?xve(i,nN()):i.byteLength+Eve:0),0)}const Eve=145,mee=1024;function utt(e){return k6(e)||A6(e)||aN(e)||oN(e)||sN(e)}function ctt(e){return k6(e)||A6(e)}function htt(e){return k6(e)?179769e303:A6(e)?3402823e32:fee(e)?4294967295:pee(e)?65535:hee(e)||dee(e)?255:aN(e)?2147483647:oN(e)?32767:sN(e)?127:256}function Ive(e,t){let i;for(i in e)e.hasOwnProperty(i)&&e[i]===void 0&&delete e[i];return e}function he(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=wee(e);if(t!=null)return t;if(AE(e))return e.clone();if(gee(e))return e.map(he);if(vee(e))return e.clone();const i={};for(const r of Object.getOwnPropertyNames(e))i[r]=he(e[r]);return i}function yA(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=wee(e);if(t!=null)return t;if(gee(e)){let i=!0;const r=e.map(n=>{const o=yA(n);return n!=null&&o==null&&(i=!1),o});return i?r:null}if(AE(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(!vee(e)){const i=new(Object.getPrototypeOf(e)).constructor;for(const r of Object.getOwnPropertyNames(e)){const n=e[r],o=yA(n);if(n!=null&&o==null)return null;i[r]=o}return i}return null}function AE(e){return typeof e.clone=="function"}function gee(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function vee(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function AV(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function wee(e){if(sN(e)||hee(e)||dee(e)||oN(e)||pee(e)||aN(e)||fee(e)||A6(e)||k6(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[i,r]of e)t.set(i,he(r));return t}if(e instanceof Set){const t=new Set;for(const i of e)t.add(he(i));return t}return null}function lN(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e==null?void 0:e.getTime)=="function"&&typeof(t==null?void 0:t.getTime)=="function"&&e.getTime()===t.getTime()||!1}function bee(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&tS(e,t):e instanceof Set?t instanceof Set&&$ve(e,t):e instanceof Map?t instanceof Map&&Mve(e,t):!!AV(e)&&AV(t)&&Tve(e,t))}function Tve(e,t){if(e===null||t===null)return!1;const i=Object.keys(e);if(t===null||Object.keys(t).length!==i.length)return!1;for(const r of i)if(e[r]!==t[r]||!Object.prototype.hasOwnProperty.call(t,r))return!1;return!0}function $ve(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function Mve(e,t){if(e.size!==t.size)return!1;for(const[i,r]of e){const n=t.get(i);if(n!==r||n===void 0&&!t.has(i))return!1}return!0}function uN(e,t,i=!1){return See(e,t,i)}function iS(e,t){if(t!=null)return t[e]||_ee(e.split("."),!1,t)}function vn(e,t,i){const r=e.split("."),n=r.pop(),o=_ee(r,!0,i);o&&n&&(o[n]=t)}function kV(e,t){if(e==null&&t==null)return!1;if(e==null||t==null)return!0;if(typeof e=="object"){if(Array.isArray(e)){const i=t;if(e.length!==i.length)return!0;for(let r=0;r<e.length;r++)if(kV(e[r],i[r]))return!0;return!1}if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const i in e)if(kV(e[i],t[i]))return!0;return!1}return e!==t}function _ee(e,t,i){let r=i;for(const n of e){if(r==null)return;if(!(n in r)){if(!t)return;r[n]={}}r=r[n]}return r}function See(e,t,i){return t?Object.keys(t).reduce((r,n)=>{let o=r[n],u=t[n];return o===u?r:o===void 0?(r[n]=he(u),r):(Array.isArray(u)||Array.isArray(r)?(o=o?Array.isArray(o)?r[n]=o.slice():r[n]=[o]:r[n]=[],u&&(Array.isArray(u)||(u=[u]),i?u.forEach(f=>{o.includes(f)||o.push(f)}):r[n]=u.slice())):u&&typeof u=="object"?r[n]=See(o,u,i):r.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(r[n]=u),r)},e||{}):e}var iY;const Kt={apiKey:void 0,applicationName:"",applicationUrl:(iY=globalThis.location)==null?void 0:iY.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(uN(Kt,globalThis.esriConfig,!0),delete Kt.has),!Kt.assetsPath){{const e="4.31";Kt.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}Kt.defaultAssetsPath=Kt.assetsPath}const Cve=/\{([^}]+)\}/g;function LV(e){return e??""}function wu(e,t){return t?e.replaceAll(Cve,typeof t=="object"?(i,r)=>LV(iS(r,t)):(i,r)=>LV(t(r))):e}function Ave(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,i=>t!=null&&t.includes(i)?i:`\\${i}`)}function xee(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}let OV;function kve(e){return OV??(OV=new DOMParser),OV.parseFromString(e||"","text/html").body.innerText||""}function RV(e,t){return new RegExp(`{${t}}`,"ig").test(e)}function dtt(e,...t){let i=e[0];for(let r=0;r<t.length;++r)i+=t[r]+e[r+1];return i}const PV={info:0,warn:1,error:2,none:3};let Se=class Zo{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,Zo._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=Zo.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){}static get test(){}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,Zo._loggers.get(t)||new Zo({module:t})}_log(t,i,...r){if(this._matchLevel(t)){if(i!=="always"&&!Zo._throttlingDisabled){const n=Ove(r),o=this._loggedMessages[t].get(n);if(i==="once"&&o!=null||i==="oncePerTick"&&o&&o>=Zo._tickCounter)return;this._loggedMessages[t].set(n,Zo._tickCounter),Zo._scheduleTickCounterIncrement()}for(const n of Kt.log.interceptors)if(n(t,this.module,...r))return;this._inheritedWriter()(t,this.module,...r)}}_parentWithMember(t,i){let r=this;for(;r!=null;){const n=r[t];if(n!=null)return n;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",Lve)}_matchLevel(t){const i=Kt.log.level||"warn";return PV[this._parentWithMember("level",i)]<=PV[t]}static _scheduleTickCounterIncrement(){Zo._tickCounterScheduled||(Zo._tickCounterScheduled=!0,Promise.resolve().then(()=>{Zo._tickCounter++,Zo._tickCounterScheduled=!1}))}};function Lve(e,t,...i){console[e](`[${t}]`,...i)}function Ove(...e){return xee(JSON.stringify(e,(i,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}Se._loggers=new Map,Se._tickCounter=0,Se._tickCounterScheduled=!1,Se._throttlingDisabled=!1;function Rve(e,t){for(const i of e.values())if(t(i))return!0;return!1}function ptt(e,t){for(const i of e.values())if(t(i))return i;return null}function c2(e,t,i){const r=e.get(t);if(r!==void 0)return r;const n=i();return e.set(t,n),n}function ftt(e){const t=new Map;return i=>(t.has(i)||t.set(i,e(i)),t.get(i))}const Xg=()=>Se.getLogger("esri.core.accessorSupport.ensureTypes");function Pve(e){return e==null?e:new Date(e)}function Nve(e){return e==null?e:!!e}function rS(e){return e==null?e:e.toString()}function Qs(e,t=0){return e==null?e:(e=parseFloat(e),isNaN(e)?t:e)}function cN(e){return e==null?e:Math.round(parseFloat(e))}function Fve(e){return null}function Dve(e,t){return i=>{let r=e(i);return t.step!=null&&(r=Math.round(r/t.step)*t.step),t.min!=null&&(r=Math.max(t.min,r)),t.max!=null&&(r=Math.min(t.max,r)),r}}function Eee(e){return(e==null?void 0:e.constructor)&&e.constructor.__accessorMetadata__!==void 0}function kE(e,t){return t!=null&&e&&!(t instanceof e)}function Iee(e){return e&&"isCollection"in e}function NV(e){return e!=null&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function jve(e,t){if(!(t!=null&&t.constructor)||!Iee(t.constructor))return mA(e,t)?t:new e(t);const i=NV(e.prototype.itemType),r=NV(t.constructor.prototype.itemType);return i?r?i===r?t:i.prototype.isPrototypeOf(r.prototype)?new e(t):(mA(e,t),t):new e(t):t}function mA(e,t){return!!Eee(t)&&(Xg().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+L6(e)+"'"),!0)}function h2(e,t){return t==null?t:Iee(e)?jve(e,t):kE(e,t)?mA(e,t)?t:new e(t):t}function L6(e){var t;return((t=e==null?void 0:e.prototype)==null?void 0:t.declaredClass)||"unknown"}const zve=new WeakMap;function Vve(e){switch(e){case Number:return t=>Qs(t);case Ot:return cN;case Boolean:return Nve;case String:return rS;case Date:return Pve;case d2:return Fve;default:return c2(zve,e,()=>h2.bind(null,e))}}function ir(e,t){const i=Vve(e);return arguments.length===1?i:i(t)}function a_(e,t,i){return arguments.length===1?a_.bind(null,e):t&&(Array.isArray(t)?t.map(r=>e(r,i)):[e(t,i)])}function Uve(e,t){return arguments.length===1?a_(i=>ir(e,i)):a_(i=>ir(e,i),t)}function Tee(e,t,i){return t!==0&&Array.isArray(i)?i.map(r=>Tee(e,t-1,r)):e(i)}function LE(e,t,i){if(arguments.length===2)return o=>LE(e,t,o);if(!i)return i;i=Tee(e,t,i);let r=t,n=i;for(;r>0&&Array.isArray(n);)r--,n=n[0];if(n!==void 0)for(let o=0;o<r;o++)i=[i];return i}function Gve(e,t,i){return arguments.length===2?LE(r=>ir(e,r),t):LE(r=>ir(e,r),t,i)}function $ee(e){return!!Array.isArray(e)&&!e.some(t=>{const i=typeof t;return!(i==="string"||i==="number"||i==="function"&&e.length>1)})}function gA(e,t){if(arguments.length===2)return gA(e).call(null,t);const i=new Set,r=e.filter(f=>typeof f!="function"),n=e.filter(f=>typeof f=="function");for(const f of e)typeof f!="string"&&typeof f!="number"||i.add(f);let o=null,u=null;return(f,g)=>{if(f==null)return f;const b=typeof f,E=b==="string"||b==="number";return E&&(i.has(f)||n.some(I=>b==="string"&&I===String||b==="number"&&I===Number))||b==="object"&&n.some(I=>!kE(f,I))?f:(E&&r.length?(o||(o=r.map(I=>typeof I=="string"?`'${I}'`:`${I}`).join(", ")),Xg().error("Accessor#set",`'${f}' is not a valid value for this property, only the following values are valid: ${o}`)):typeof f=="object"&&n.length?(u||(u=n.map(I=>L6(I)).join(", ")),Xg().error("Accessor#set",`'${f}' is not a valid value for this property, value must be one of ${u}`)):Xg().error("Accessor#set",`'${f}' is not a valid value for this property`),g&&(g.valid=!1),null)}}function ul(e,t){if(arguments.length===2)return ul(e).call(null,t);const i={},r=[],n=[];for(const g in e.typeMap){const b=e.typeMap[g];i[g]=ir(b),r.push(L6(b)),n.push(g)}const o=()=>`'${r.join("', '")}'`,u=()=>`'${n.join("', '")}'`,f=typeof e.key=="string"?g=>g[e.key]:e.key;return g=>{if(e.base&&!kE(e.base,g)||g==null)return g;const b=f(g)||e.defaultKeyValue,E=i[b];if(!E)return Xg().error("Accessor#set",`Invalid property value, value needs to be one of ${o()}, or a plain object that can autocast (having .type = ${u()})`),null;if(!kE(e.typeMap[b],g))return g;if(typeof e.key=="string"&&!Eee(g)){const I={};for(const M in g)M!==e.key&&(I[M]=g[M]);return E(I)}return E(g)}}let Ot=class{},d2=class{};const gtt={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function Bve(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function Mee(e){switch(e.type){case"native":return ir(e.value);case"array":return a_(Mee(e.value));case"one-of":return qve(e);default:return null}}function qve(e){let t=null;return(i,r)=>wA(i,e)?i:(t==null&&(t=vA(e)),Xg().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),r&&(r.valid=!1),null)}function vA(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Ot:return"integer";case Date:return"date";case d2:return"null";default:return L6(e.value)}case"array":return`array of ${vA(e.value)}`;case"one-of":{const t=e.values.map(i=>vA(i));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function wA(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case Ot:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case d2:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(i=>!wA(i,t.value));case"one-of":return t.values.some(i=>wA(e,i))}}const Hve={remove:()=>{}};function Yt(e){return e?{remove(){e&&(e(),e=void 0)}}:Hve}function Cee(e){e.forEach(t=>t==null?void 0:t.remove())}function Cu(e){Cee(e),e.length=0}function p2(e){return Yt(()=>Cee(e))}function vtt(e){return Yt(()=>{var t;return(t=e())==null?void 0:t.remove()})}function wtt(e){return Yt(()=>e==null?void 0:e.abort())}function Wve(e){return Yt(e!=null?()=>e.destroy():void 0)}function zo(e){return e.__accessor__??null}function Zve(e,t){var i;return((i=e==null?void 0:e.metadata)==null?void 0:i[t])!=null}function o9(e,t,i){return i?OE(e,t,{policy:i,path:""}):OE(e,t,null)}function OE(e,t,i){return t?Object.keys(t).reduce((r,n)=>{const o=n;let u=null,f="merge";if(i&&(u=i.path?`${i.path}.${n}`:n,f=i.policy(u)),f==="replace"||f==="replace-arrays"&&Array.isArray(r[o]))return r[o]=t[o],r;if(r[o]===void 0)return r[o]=he(t[o]),r;let g=r[o],b=t[o];if(g===b)return r;if(Array.isArray(b)||Array.isArray(r))g=g?Array.isArray(g)?r[o]=g.slice():r[o]=[g]:r[o]=[],b&&(Array.isArray(b)||(b=[b]),b.forEach(E=>{g.includes(E)||g.push(E)}));else if(b&&typeof b=="object")if(i){const E=i.path;i.path=u,r[o]=OE(g,b,i),i.path=E}else r[o]=OE(g,b,null);else r.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(r[o]=b);return r},e||{}):e}function Aee(e){return Array.isArray(e)?e:e.split(".")}function FV(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function Jve(e){if(Array.isArray(e)){const t=[];for(const i of e)t.push(...FV(i));return t}return FV(e)}function kee(e,t,i,r){const n=Jve(t);if(n.length!==1){const o=n.map(u=>r(e,u,i));return p2(o)}return r(e,n[0],i)}function Lee(e,t){const i=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.at(n)}const r=zo(t);return Zve(r,i)?r.get(i):t[i]}function Oee(e,t,i){if(e==null)return e;const r=Lee(t[i],e);return!r&&i<t.length-1?void 0:i===t.length-1?r:Oee(r,t,i+1)}function nS(e,t,i=0){return typeof t!="string"||t.includes(".")?Oee(e,Aee(t),i):Lee(t,e)}function Ps(e,t){return nS(e,t)}function DV(e,t){return nS(t,e)!==void 0}function sS(e){let t=e.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!i){t=Object.create(t);for(const r in t)t[r]=he(t[r]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function O6(e,t){const i=sS(e);let r=i[t];return r||(r=i[t]={}),r}function Kve(e,t){return o9(e,t,Xve)}const Yve=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function Xve(e){return Yve.test(e)?"replace":"merge"}function Qve(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(i,r)=>r===""?"$":(iS(r,t)??"").toString())}let Ree=class{constructor(t,i,r=void 0){this.name=t,this.details=r,this.message=(i&&Qve(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},ne=class Pee extends Ree{constructor(t,i,r){super(t,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return he(i)}catch{return"[object]"}}))}}catch(t){throw Se.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new Pee(t.name,t.message,t.details)}};ne.prototype.type="error";function RE(e,t,i){if(e&&t)if(typeof t=="object")for(const r of Object.getOwnPropertyNames(t))RE(e,r,t[r]);else{if(t.includes(".")){const n=t.split("."),o=n.splice(-1,1)[0];return void RE(Ps(e,n),o,i)}const r=e.__accessor__;r!=null&&e2e(t,r),e[t]=i}}function e2e(e,t){if(we("esri-unknown-property-errors")&&!t2e(e,t))throw new ne("set:unknown-property",i2e(e,t))}function t2e(e,t){return t.metadata[e]!=null}function i2e(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}function w(e={}){return(t,i)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(t,i),n=O6(t,i);r&&(r.get||r.set?(n.get=r.get||n.get,n.set=r.set||n.set):"value"in r&&("value"in e&&Se.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${t.constructor.name}" already defined in the metadata`,e),n.value=e.value=r.value)),e.readOnly!=null&&(n.readOnly=e.readOnly);const o=e.aliasOf;if(o){const g=typeof o=="string"?o:o.source,b=typeof o=="string"?null:o.overridable===!0;let E;n.dependsOn=[g],n.get=function(){let I=Ps(this,g);if(typeof I=="function"){E||(E=g.split(".").slice(0,-1).join("."));const M=Ps(this,E);M&&(I=I.bind(M))}return I},n.readOnly||(n.set=b?function(I){this._override(i,I)}:function(I){RE(this,g,I)})}const u=e.type,f=e.types;if(!n.cast){let g;u?g=r2e(u):f&&(g=Array.isArray(f)?a_(ul(f[0])):ul(f)),e.cast=n2e(e.cast,g)}Kve(n,e),e.range&&(n.cast=Dve(n.cast,e.range))}}function Nee(e,t,i){const r=O6(e,i);r.json||(r.json={});let n=r.json;return t!==void 0&&(n.origins||(n.origins={}),n.origins[t]||(n.origins[t]={}),n=n.origins[t]),n}function r2e(e){let t=0,i=e;if(Bve(e))return Mee(e);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],t++;const r=i;if($ee(r))return t===0?gA(r):LE(gA(r),t);if(t===1)return Uve(r);if(t>1)return Gve(r,t);const n=e;return n.from?n.from:ir(n)}function n2e(e,t){if(e||t)return e?t?(i,r)=>t(e(i,r),r):e:t}const Fee=Symbol("Accessor-beforeDestroy");var $o;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED",e[e.DESTROYED=3]="DESTROYED"})($o||($o={}));var fi;(function(e){e[e.Dirty=1]="Dirty",e[e.Overridden=2]="Overridden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(fi||(fi={}));let R6=class{constructor(t){this.accessed=void 0,this._handles=void 0,this._observer=t}destroy(){var t;(t=this.accessed)==null||t.clear(),this.clear()}onAccessed(t){this._observer!=null&&t!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(t))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(t=>{this._handles.push(t.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let t=0;t<this._handles.length;++t)this._handles[t].remove();this._handles.length=0}}};const PE=new R6,Bw=[];let f3=PE;function et(e){f3.onAccessed(e)}let a9=!1,l9=!1;function sd(e,t,i){if(a9)return hN(e,t,i);let r=null;return Dee(e),r=t.call(i),jee(),r}function s2e(e,t){return sd(PE,e,t)}function hN(e,t,i){const r=a9;a9=!0,Dee(e);let n=null;try{n=t.call(i)}catch(o){l9&&Se.getLogger("esri.core.accessorSupport.tracking").error(o)}return jee(),a9=r,n}function Dee(e){f3=e,Bw.push(e)}function jee(){const e=Bw.length;if(e>1){const t=Bw.pop();f3=Bw[e-2],t.onTrackingEnd()}else if(e===1){const t=Bw.pop();f3=PE,t.onTrackingEnd()}else f3=PE}function zee(e,t){if(t.flags&fi.DepTrackingInitialized)return;t.flags|=fi.DepTrackingInitialized;const i=l9;l9=!1,t.flags&fi.AutoTracked?hN(t.trackingTarget,t.metadata.get,e):Vee(e,t),l9=i}const o2e=[];function Vee(e,t){t.flags&fi.ExplicitlyTracking||(t.flags|=fi.ExplicitlyTracking,hN(t.trackingTarget,()=>{const i=t.metadata.dependsOn||o2e;for(const r of i)if(typeof r!="string"||r.includes(".")){const n=Aee(r);for(let o=0,u=e;o<n.length&&u!=null&&typeof u=="object";++o)u=jV(u,n[o],o!==n.length-1)}else jV(e,r,!1)}),t.flags&=~fi.ExplicitlyTracking)}function jV(e,t,i){const r=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const o=parseInt(r,10);if(!isNaN(o))return Array.isArray(e)?e[o]:e.at(o)}const n=zo(e);if(n){const o=n.propertiesByName.get(r);o&&(et(o),zee(e,o))}return i?e[r]:void 0}function a2e(e){if(e.json&&e.json.origins){const t=e.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(t[r]){const n=t[r];i[r].forEach(o=>{t[o]=n}),delete t[r]}}}let ga=class extends Ree{constructor(t,i,r){super(t,i,r)}};ga.prototype.type="warning";function Uee(e){var t;return!!e&&((t=e.prototype)==null?void 0:t.declaredClass)&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const bA=()=>Se.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function zV(e,t,i){var r,n;e&&(!i&&!t.read||(r=t.read)!=null&&r.reader||((n=t.read)==null?void 0:n.enabled)===!1||c2e(e)&&vn("read.reader",f2(e),t))}function f2(e){var i,r;const t=e.ndimArray??0;if(t>1)return u2e(e);if(t===1)return VV(e);if("type"in e&&Bee(e.type)){const n=(r=(i=e.type.prototype)==null?void 0:i.itemType)==null?void 0:r.Type,o=VV(typeof n=="function"?{type:n}:{types:n});return(u,f,g)=>{const b=o(u,f,g);return b&&new e.type(b)}}return dN(e)}function dN(e){return"type"in e?l2e(e.type):h2e(e.types)}function l2e(e){return e.prototype.read?(t,i,r)=>{if(t==null)return t;const n=typeof t;if(n!=="object")return void bA().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${n}'`);const o=new e;return o.read(t,r),o}:e.fromJSON}function Gee(e,t,i,r){return r!==0&&Array.isArray(t)?t.map(n=>Gee(e,n,i,r-1)):e(t,void 0,i)}function u2e(e){const t=dN(e),i=Gee.bind(null,t),r=e.ndimArray??0;return(n,o,u)=>{if(n==null)return n;n=i(n,u,r);let f=r,g=n;for(;f>0&&Array.isArray(g);)f--,g=g[0];if(g!==void 0)for(let b=0;b<f;b++)n=[n];return n}}function VV(e){const t=dN(e);return(i,r,n)=>{if(i==null)return i;if(Array.isArray(i)){const u=[];for(const f of i){const g=t(f,void 0,n);g!==void 0&&u.push(g)}return u}const o=t(i,void 0,n);return o!==void 0?[o]:void 0}}function Bee(e){if(!Uee(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?pN(t.Type):qee(t.Type))}function c2e(e){return"types"in e?qee(e.types):pN(e.type)}function pN(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||Bee(e))}function qee(e){for(const t in e.typeMap)if(!pN(e.typeMap[t]))return!1;return!0}function h2e(e){let t=null;const i=e.errorContext??"type",r=e.validate;return(n,o,u)=>{if(n==null)return n;const f=typeof n;if(f!=="object")return void bA().error(`Expected JSON value of type 'object' to deserialize, but got '${f}'`);t||(t=d2e(e));const g=e.key;if(typeof g!="string")return;const b=n[g],E=b?t[b]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!E){const M=`Type '${b||"unknown"}' is not supported`;return u!=null&&u.messages&&n&&u.messages.push(new ga(`${i}:unsupported`,M,{definition:n,context:u})),void bA().error(M)}const I=new E;return I.read(n,u),r?r(I):I}}function d2e(e){var i,r;const t={};for(const n in e.typeMap){const o=e.typeMap[n],u=sS(o.prototype);if(typeof e.key=="function")continue;const f=u[e.key];if(!f)continue;if((i=f.json)!=null&&i.type&&Array.isArray(f.json.type)&&f.json.type.length===1&&typeof f.json.type[0]=="string"){t[f.json.type[0]]=o;continue}const g=(r=f.json)==null?void 0:r.write;if(!(g!=null&&g.writer)){t[n]=o;continue}const b=g.target,E=typeof b=="string"?b:e.key,I={};g.writer(n,I,E),I[E]&&(t[I[E]]=o)}return t}function p2e(e){if(e.json||(e.json={}),GV(e.json),BV(e.json),UV(e.json),e.json.origins)for(const t in e.json.origins)GV(e.json.origins[t]),BV(e.json.origins[t]),UV(e.json.origins[t]);return!0}function UV(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function GV(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function BV(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function qV(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const i=(e==null?void 0:e.ndimArray)??0;e&&(i===1||"type"in e&&Uee(e.type))?t.write.writer=m2e:i>1?t.write.writer=g2e(i):t.types?Array.isArray(t.types)?t.write.writer=y2e(t.types[0]):t.write.writer=f2e(t.types):t.write.writer=l_}function f2e(e){return(t,i,r,n)=>t?Hee(t,e,n)?l_(t,i,r,n):void 0:l_(t,i,r,n)}function Hee(e,t,i){for(const r in t.typeMap)if(e instanceof t.typeMap[r])return!0;if(i!=null&&i.messages){const r=t.errorContext??"type",n=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&e&&i.messages.push(new ne(`${r}:unsupported`,n,{definition:e,context:i})),Se.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function y2e(e){return(t,i,r,n)=>!t||!Array.isArray(t)?l_(t,i,r,n):l_(t.filter(o=>Hee(o,e,n)),i,r,n)}function l_(e,t,i,r){vn(i,NE(e,r),t)}function NE(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?FE(e):e}function FE(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function m2e(e,t,i,r){let n;e===null?n=null:e&&typeof e.map=="function"?(n=e.map(o=>NE(o,r)),typeof n.toArray=="function"&&(n=n.toArray())):n=[NE(e,r)],vn(i,n,t)}function Wee(e,t,i){return i!==0&&Array.isArray(e)?e.map(r=>Wee(r,t,i-1)):NE(e,t)}function g2e(e){return(t,i,r,n)=>{let o;if(t===null)o=null;else{o=Wee(t,n,e);let u=e,f=o;for(;u>0&&Array.isArray(f);)u--,f=f[0];if(f!==void 0)for(let g=0;g<u;g++)o=[o]}vn(r,o,i)}}function v2e(e,t){return fN(e,"any",t==null?void 0:t.origin)}function _A(e,t){return fN(e,"read",t==null?void 0:t.origin)}function Zee(e,t){return fN(e,"write",t==null?void 0:t.origin)}function fN(e,t,i){let r=e==null?void 0:e.json;if(r!=null&&r.origins&&i){let n;n=i==="link-chart"?r.origins[i]&&(t==="any"||t in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],n&&(t==="any"||t in n)&&(r=n)}return r}function w2e(e){var i;const t=b2e(e);if(e.json.origins)for(const r in e.json.origins){const n=e.json.origins[r],o=n.types?_2e(n):t;zV(o,n,!1),n.types&&!n.write&&((i=e.json.write)!=null&&i.enabled)&&(n.write={...e.json.write}),qV(o,n)}zV(t,e.json,!0),qV(t,e.json)}function b2e(e){return e.json.types?SA(e.json):e.type?Jee(e):SA(e)}function _2e(e){return e.type?Jee(e):SA(e)}function Jee(e){if(!e.type)return;let t=0,i=e.type;for(;Array.isArray(i)&&!$ee(i);)i=i[0],t++;return{type:i,ndimArray:t}}function SA(e){if(!e.types)return;let t=0,i=e.types;for(;Array.isArray(i);)i=i[0],t++;return{types:i,ndimArray:t}}function S2e(e){p2e(e)&&(a2e(e),w2e(e))}const K$=new Set,Y$=new Set;function H(e){return t=>{e??(e="esri.core.Accessor"),t.prototype.declaredClass=e,E2e(t);const i=[],r=[];let n=t.prototype;for(;n;)n.hasOwnProperty("initialize")&&!K$.has(n.initialize)&&(K$.add(n.initialize),i.push(n.initialize)),n.hasOwnProperty("destroy")&&!Y$.has(n.destroy)&&(Y$.add(n.destroy),r.push(n.destroy)),n=Object.getPrototypeOf(n);K$.clear(),Y$.clear();const o=class extends t{constructor(...f){if(super(...f),this.constructor===o&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let g=i.length-1;g>=0;g--)i[g].call(this)}}),r.length){let g=!1;const b=this[Fee];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!g){g=!0,b.call(this);for(let E=0;E<r.length;E++)r[E].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};o.__accessorMetadata__=sS(t.prototype),o.prototype.declaredClass=e;const u=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(o,"name",{value:u,configurable:!0}),o}}function x2e(e,t){return t.get==null?function(){const i=this.__accessor__,r=i.propertiesByName.get(e);if(r===void 0)return;i.mutable&&et(r);const n=i.store;return n.has(e)?n.get(e):r.metadata.value}:function(){const i=this.__accessor__,r=i.propertiesByName.get(e);if(r!==void 0)return r.getComputed(i)}}function E2e(e){const t=e.prototype,i=sS(t),r={};for(const n of Object.getOwnPropertyNames(i)){const o=i[n];S2e(o),r[n]={enumerable:!0,configurable:!0,get:x2e(n,o),set(u){const f=this.__accessor__;if(f!==void 0){if(f.mutable)return f.initialized&&o.readOnly?HV("read-only",n):f.lifecycle===$o.CONSTRUCTED&&o.constructOnly?HV("construct-only",n):void f.set(n,u)}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:u})}}}Object.defineProperties(e.prototype,r)}const HV=(e,t)=>{Se.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)},WV=new WeakMap;function I2e(e,t,i=!1){const r=`🛑 DEPRECATED - ${t}`;if(!i)return void e.warn(r);let n=WV.get(e);n||(n=new Set,WV.set(e,n)),n.has(t)||(n.add(t),e.warn(r))}function Kee(e,t,i={}){if(we("esri-deprecation-warnings")){const{moduleName:r}=i;u_(e,`Function: ${(r?r+"::":"")+t+"()"}`,i)}}function bc(e,t,i={}){if(we("esri-deprecation-warnings")){const{moduleName:r}=i;u_(e,`Property: ${(r?r+"::":"")+t}`,i)}}function T2e(e,t,i={}){we("esri-deprecation-warnings")&&u_(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...i})}function u_(e,t,i={}){if(we("esri-deprecation-warnings")){const{replacement:r,version:n,see:o,warnOnce:u}=i;let f=t;r&&(f+=`
	🛠️ Replacement: ${r}`),n&&(f+=`
	⚙️ Version: ${n}`),o&&(f+=`
	🔗 See ${o} for more details.`),I2e(e,f,u)}}function xtt(e){const t=[];return function*(){yield*t;for(const i of e)t.push(i),yield i}}function $2e(e,t){for(const i of e)if(i!=null&&t(i))return i}function DE(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let y2=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(i=>{t+=i.length}),t}add(t,i){if(DE(t)){const r=this._getOrCreateGroup(i);for(const n of t)JV(n)&&r.push(n)}else JV(t)&&this._getOrCreateGroup(i).push(t);return this}forEach(t,i){if(typeof t=="function")this._groups.forEach(r=>r.forEach(t));else{const r=this._getGroup(t);r&&i&&r.forEach(i)}}has(t){return this._groups.has(m5(t))}remove(t){if(typeof t!="string"&&DE(t)){for(const i of t)this.remove(i);return this}return this.has(t)?(ZV(this._getGroup(t)),this._groups.delete(m5(t)),this):this}removeAll(){return this._groups.forEach(ZV),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const i=[];return this._groups.set(m5(t),i),i}_getGroup(t){return this._groups.get(m5(t))}};function m5(e){return e||"_default_"}function ZV(e){for(const t of e)t instanceof y2?t.removeAll():t.remove()}function JV(e){return e!=null&&(!!e.remove||e instanceof y2)}function oS(e,t){if(e==null)throw new Error(t??"value is None")}function Jt(e){return e==null||e.destroy(),null}function Itt(e){return e==null||e.dispose(),null}function tr(e){return e==null||e.remove(),null}function Ec(e){return e==null||e.abort(),null}function Ttt(e){return e==null||e.release(),null}function M2e(e,t,i){return e!=null&&t!=null?i!=null?i(e,t):e.equals(t):e===t}function c_(e,t){let i;return e.some((r,n)=>(i=t(r,n),i!=null)),i??void 0}function C2e(e){return(e==null?void 0:e.release)&&typeof e.release=="function"}function A2e(e){return(e==null?void 0:e.acquire)&&typeof e.acquire=="function"}let $f=class xA{constructor(t,i,r,n=1,o=0){this._ctor=t,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=n,this._pool=new Array(o),this._initialSize=o;for(let u=0;u<o;u++)this._pool[u]=new this._ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...t){let i;if(xA.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let n=0;n<r;n++)this._pool[n]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...t):A2e(i)&&i.acquire(...t),i}release(t){t&&!xA.test.disabled&&(this._releaseFunction?this._releaseFunction(t):C2e(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};$f.test={disabled:!1};let k2e=class{constructor(t,i){this._observers=t,this._observer=i}remove(){rN(this._observers,this._observer)}},Yee=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return L2e;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,n=!1;const o=i.length;for(let u=0;u<o;++u){const f=i[u];if(f.destroyed)n=!0;else if(f===t){r=!0;break}}return r||(i.push(t),n&&this._removeDestroyedObservers()),new k2e(i,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const i=t.length;let r=0;for(let n=0;n<i;++n){for(;n+r<i&&t[n+r].destroyed;)++r;if(r>0){if(!(n+r<i))break;t[n]=t[n+r]}}t.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const i of t)i.onCommitted();this._observers=null}}};const L2e=Yt();var yt;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(yt||(yt={}));const EA=yt.USER+1;function Fp(e){switch(e){case"defaults":return yt.DEFAULTS;case"service":return yt.SERVICE;case"portal-item":return yt.PORTAL_ITEM;case"web-scene":return yt.WEB_SCENE;case"web-map":return yt.WEB_MAP;case"link-chart":return yt.LINK_CHART;case"user":return yt.USER;default:return null}}function jE(e){switch(e){case yt.DEFAULTS:return"defaults";case yt.SERVICE:return"service";case yt.PORTAL_ITEM:return"portal-item";case yt.WEB_SCENE:return"web-scene";case yt.WEB_MAP:return"web-map";case yt.LINK_CHART:return"link-chart";case yt.USER:return"user"}}function O2e(e){return jE(e)}let KV=class extends Yee{constructor(t,i){super(),this.propertyName=t,this.metadata=i,this.trackingTarget=new R6(this),this.flags=0,this.flags=fi.Dirty|(i.nonNullable?fi.NonNullable:0)|(i.hasOwnProperty("value")?fi.HasDefaultValue:0)|(i.get===void 0?fi.DepTrackingInitialized:0)|(i.dependsOn===void 0?fi.AutoTracked:0)}destroy(){this.flags&fi.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(t){t.mutable&&et(this);const i=t.store,r=this.propertyName,n=this.flags,o=i.get(r);if(n&fi.Computing||~n&fi.Dirty&&i.has(r))return o;this.flags|=fi.Computing;const u=t.host;let f;n&fi.AutoTracked?f=sd(this.trackingTarget,this.metadata.get,u):(Vee(u,this),f=this.metadata.get.call(u)),this.flags|=fi.DepTrackingInitialized,i.set(r,f,yt.COMPUTED);const g=i.get(r);return g===o?this.flags&=~fi.Dirty:s2e(this.commit,this),this.flags&=~fi.Computing,g}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~fi.Dirty,this.onCommitted()}onInvalidated(){~this.flags&fi.Overridden&&(this.flags|=fi.Dirty);const t=this._observers;if(t&&t.length>0)for(const i of t)i.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const i=t.slice();for(const r of i)r.onCommitted()}}},R2e=class Xee{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new Xee;return this._values.forEach((r,n)=>{t&&t.has(n)||i.set(n,he(r))}),i}get(t){return this._values.get(t)}originOf(){return yt.USER}keys(){return[...this._values.keys()]}set(t,i){this._values.set(t,i)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function g5(e,t,i){return e!==void 0}function YV(e,t,i,r){return e!==void 0&&(!(i==null&&e.flags&fi.NonNullable)||(r.lifecycle,$o.INITIALIZING,!1))}let P2e=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=$o.INITIALIZING,this.store=new R2e,this.mutable=!0,this._origin=yt.USER;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const n=new KV(r,i[r]);this.propertiesByName.set(r,n)}this.metadata=i}initialize(){this.lifecycle=$o.CONSTRUCTING}constructed(){this.lifecycle=$o.CONSTRUCTED}destroy(){this.lifecycle=$o.DESTROYED,this.propertiesByName.forEach(t=>t.destroy())}get initialized(){return this.lifecycle!==$o.INITIALIZING}get(t){const i=this.propertiesByName.get(t);if(i.metadata.get)return i.getComputed(this);this.mutable&&et(i);const r=this.store;return r.has(t)?r.get(t):i.metadata.value}originOf(t){const i=this.store.originOf(t);if(i===void 0){const r=this.propertiesByName.get(t);if(r!==void 0&&r.flags&fi.HasDefaultValue)return"defaults"}return jE(i)}has(t){return this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const i=this.propertiesByName.get(t);if(g5(i))return this.store.has(t)?this.store.get(t):i.metadata.value}internalSet(t,i){const r=this.propertiesByName.get(t);g5(r)&&this._internalSet(r,i)}getDependsInfo(t,i,r){const n=this.propertiesByName.get(i);if(!g5(n))return"";const o=new R6,u=sd(o,()=>{var b;return(b=n.metadata.get)==null?void 0:b.call(t)});let f=`${r}${t.declaredClass.split(".").pop()}.${i}: ${u}
`;const g=o.accessed??new Set;if(g.size===0)return f;r+="  ";for(const b of g)b instanceof KV&&(f+=`${r}${b.propertyName}: undefined
`);return f}setAtOrigin(t,i,r){const n=this.propertiesByName.get(t);if(g5(n))return this._setAtOrigin(n,i,r)}isOverridden(t){const i=this.propertiesByName.get(t);return i!==void 0&&!!(i.flags&fi.Overridden)}clearOverride(t){const i=this.propertiesByName.get(t);i&&i.flags&fi.Overridden&&(i.flags&=~fi.Overridden,i.notifyChange())}override(t,i){const r=this.propertiesByName.get(t);if(!YV(r,t,i,this))return;const n=r.metadata.cast;if(n){const o=this._cast(n,i),{valid:u,value:f}=o;if(X$.release(o),!u)return;i=f}r.flags|=fi.Overridden,this._internalSet(r,i)}set(t,i){const r=this.propertiesByName.get(t);if(!YV(r,t,i,this))return;const n=r.metadata.cast;if(n){const u=this._cast(n,i),{valid:f,value:g}=u;if(X$.release(u),!f)return;i=g}const o=r.metadata.set;o?o.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(t){this._origin=Fp(t)}getDefaultOrigin(){return jE(this._origin)}notifyChange(t){const i=this.propertiesByName.get(t);i!==void 0&&i.notifyChange()}invalidate(t){const i=this.propertiesByName.get(t);i!==void 0&&i.invalidate()}commit(t){const i=this.propertiesByName.get(t);i!==void 0&&i.commit()}_internalSet(t,i){const r=this.lifecycle!==$o.INITIALIZING?this._origin:yt.DEFAULTS;this._setAtOrigin(t,i,r)}_setAtOrigin(t,i,r){const n=this.store,o=t.propertyName;n.has(o,r)&&lN(i,n.get(o))&&~t.flags&fi.Overridden&&r===n.originOf(o)||(t.invalidate(),n.set(o,i,r),t.commit(),zee(this.host,t))}_cast(t,i){const r=X$.acquire();return r.valid=!0,r.value=i,t&&(r.value=t.call(this.host,i,r)),r}},N2e=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const X$=new $f(N2e);let F2e;function D2e(){return F2e}var XV;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(XV||(XV={}));function j2e(e){e.length=0}let eo=class{constructor(t=50,i=50){this._pool=new $f(Array,void 0,j2e,i,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return Q$.acquire()}static release(t){return Q$.release(t)}static prune(){Q$.prune()}};const Q$=new eo(100);let Qee=class extends $f{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const i=super.acquire(...t);return this._set.delete(i),i}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const v5=[];function Cv(e){v5.push(e),v5.length===1&&queueMicrotask(()=>{const t=v5.slice();v5.length=0;for(const i of t)i()})}let y3=class{constructor(t,i=30){this.name=t,this._counter=0,this._samples=new Array(i)}push(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}set(t){t!=null&&(this._samples[this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,i)=>t-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,i)=>t+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var IA;(function(e){const t=(o,u,f,g)=>{let b=u,E=u;const I=f>>>1,M=o[b-1];for(;E<=I;){E=b<<1,E<f&&g(o[E-1],o[E])<0&&++E;const k=o[E-1];if(g(k,M)<=0)break;o[b-1]=k,b=E}o[b-1]=M},i=(o,u)=>o<u?-1:o>u?1:0;function r(o,u,f,g){u===void 0&&(u=0),f===void 0&&(f=o.length),g===void 0&&(g=i);for(let E=f>>>1;E>u;E--)t(o,E,f,g);const b=u+1;for(let E=f-1;E>u;E--){const I=o[u];o[u]=o[E],o[E]=I,t(o,b,E,g)}}function*n(o,u,f,g){u===void 0&&(u=0),f===void 0&&(f=o.length),g===void 0&&(g=i);for(let E=f>>>1;E>u;E--)t(o,E,f,g),yield;const b=u+1;for(let E=f-1;E>u;E--){const I=o[u];o[u]=o[E],o[E]=I,t(o,b,E,g),yield}}e.sort=r,e.iterableSort=n})(IA||(IA={}));const QV=IA,z2e=1.5,V2e=1.1;let _y=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new ree,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>eU(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const i=new Array;for(let r=0;r<this._length;r++){const n=this.data[r];t(n)&&i.push(n)}return i}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,i){const r=this.data.indexOf(t,i);return r!==-1&&r<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let i=t;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,i=t.length){for(let r=0;r<i;r++)this.data[this._length++]=t[r]}fill(t,i){for(let r=0;r<i;r++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,eU(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const i=fA(this.data,t,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(fA(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,i=t.length,r){this.length=bve(this.data,t,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,i){if(t>=this.length||i>=this.length||t===i)return;const r=this.data[t];this.data[t]=this.data[i],this.data[i]=r}sort(t){QV.sort(this.data,0,this.length,t)}iterableSort(t){return QV.iterableSort(this.data,0,this.length,t)}some(t,i){for(let r=0;r<this.length;++r)if(t.call(i,this.data[r],r,this.data))return!0;return!1}find(t,i){const{data:r,length:n}=this;for(let o=0;o<n;++o)if(t.call(i,r[o]))return r[o]}filterInPlace(t,i){let r=0;for(let n=0;n<this._length;++n){const o=this.data[n];t.call(i,o,n,this.data)&&(this.data[n]=this.data[r],this.data[r]=o,r++)}if(this._deallocator)for(let n=r;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=r,this._shrink(),this}forAll(t,i){const{data:r,length:n}=this;for(let o=0;o<n;++o)t.call(i,r[o],o,r)}forEach(t,i){this.data.slice(0,this.length).forEach(t,i)}map(t,i){const r=new Array(this.length);for(let n=0;n<this.length;++n)r[n]=t.call(i,this.data[n],n,this.data);return r}reduce(t,i){let r=i;for(let n=0;n<this.length;++n)r=t(r,this.data[n],n,this.data);return r}has(t){const i=this.length,r=this.data;for(let n=0;n<i;++n)if(r[n]===t)return!0;return!1}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.data[t]}};function eU(e){e.data.length>z2e*e.length&&(e.data.length=Math.floor(e.length*V2e))}function U2e(e){return{setTimeout:(t,i)=>{const r=e.setTimeout(t,i);return Yt(()=>e.clearTimeout(r))}}}const m2=U2e(globalThis);function P6(e){return G2e(e)||ete(e)}function G2e(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function ete(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function aS(e,t,i){if(!P6(e))throw new TypeError("target is not a Evented or EventTarget object");return ete(e)?B2e(e,t,i):e.on(t,i)}function B2e(e,t,i,r){if(Array.isArray(t)){const n=t.slice();for(const o of n)e.addEventListener(o,i,r);return Yt(()=>{for(const o of n)e.removeEventListener(o,i,r)})}return e.addEventListener(t,i,r),Yt(()=>e.removeEventListener(t,i,r))}function tte(e,t,i){if(!P6(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,i);const r=aS(e,t,n=>{r.remove(),i.call(e,n)});return r}function wi(e="Aborted"){return new ne("AbortError",e)}function Li(e,t="Aborted"){if(va(e))throw wi(t)}function lS(e){return e instanceof AbortSignal?e:(e==null?void 0:e.signal)??void 0}function va(e){const t=lS(e);return t!=null&&t.aborted}function mc(e){if(Or(e))throw e}function TA(e){if(!Or(e))throw e}function nl(e,t){const i=lS(e);if(i!=null){if(!i.aborted)return tte(i,"abort",()=>t());t()}}function yN(e,t){const i=lS(e);if(i!=null)return Li(i),tte(i,"abort",()=>t(wi()))}function N6(e,t){return lS(t)==null?e:new Promise((i,r)=>{let n=nl(t,()=>r(wi()));const o=()=>{n=tr(n)};e.then(o,o),e.then(i,r)})}function Or(e){return(e==null?void 0:e.name)==="AbortError"}async function Do(e){try{return await e}catch(t){if(!Or(t))throw t;return}}async function Lo(e){if(!e)return;if(typeof e.forEach!="function"){const i=Object.keys(e),r=i.map(u=>e[u]),n=await Lo(r),o={};return i.map((u,f)=>o[u]=n[f]),o}const t=e;return Promise.allSettled(t).then(i=>Array.from(t,(r,n)=>{const o=i[n];return o.status==="fulfilled"?{promise:r,value:o.value}:{promise:r,error:o.reason}}))}async function q2e(e){return(await Promise.allSettled(e)).filter(t=>t.status==="fulfilled").map(t=>t.value)}async function Ntt(e){return(await Promise.allSettled(e)).filter(t=>t.status==="rejected").map(t=>t.reason)}function ym(e,t=void 0,i){const r=new AbortController;return nl(i,()=>r.abort()),new Promise((n,o)=>{let u=setTimeout(()=>{u=0,n(t)},e);nl(r,()=>{u&&(clearTimeout(u),o(wi()))})})}function H2e(e,t){const i=new AbortController,r=setTimeout(()=>i.abort(),t);return nl(e,()=>{i.abort(),clearTimeout(r)}),{...e,signal:i.signal}}function Fc(e){return e&&typeof e.then=="function"}function $A(e){return Fc(e)?e:Promise.resolve(e)}function yu(e,t=-1){let i,r,n,o,u=null;const f=(...g)=>{if(i){r=g,o&&o.reject(wi()),o=wa();const M=o.promise;if(u){const k=u;u=null,k.abort()}return M}if(n=o||wa(),o=null,t>0){const M=new AbortController;i=$A(e(...g,M.signal));const k=i;ym(t).then(()=>{i===k&&(o?M.abort():u=M)})}else i=1,i=$A(e(...g));const b=()=>{const M=r;r=n=i=u=null,M!=null&&f(...M)},E=i,I=n;return E.then(b,b),E.then(I.resolve,I.reject),I.promise};return f}function wa(){let e,t;const i=new Promise((n,o)=>{e=n,t=o}),r=n=>{e(n)};return r.resolve=n=>e(n),r.reject=n=>t(n),r.timeout=(n,o)=>m2.setTimeout(()=>r.reject(o),n),r.promise=i,r}async function tU(e){await Promise.resolve(),Li(e)}function Ftt(e){return e}function W2e(e){return 1e3*e}function Dtt(e){return e}function jtt(e){return .001*e}let Z2e=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},J2e=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},MA=0;const iw={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},CA=["prepare","preRender","render","postRender","update","finish"],AA=[],Gy=new _y;let K2e=class{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};function Y2e(){Sy!=null&&(cancelAnimationFrame(Sy),Sy=requestAnimationFrame(mN))}const zE={frameTasks:Gy,willDispatch:!1,clearFrameTasks:X2e,dispatch:rte,executeFrameTasks:Q2e,reschedule:Y2e};function uS(e){const t=new J2e(e);return AA.push(t),zE.willDispatch||(zE.willDispatch=!0,Cv(rte)),t}function Av(e){const t=new Z2e(e);return Gy.push(t),Sy==null&&(MA=performance.now(),Sy=requestAnimationFrame(mN)),new K2e(t)}let Sy=null;function X2e(e=!1){Gy.forAll(t=>{t.removed=!0}),e&&ite()}function mN(){const e=performance.now();Sy=null,Sy=Gy.length>0?requestAnimationFrame(mN):null,zE.executeFrameTasks(e)}function Q2e(e){const t=e-MA;MA=e;const i=1e3/60,r=Math.max(0,t-i);iw.time=e,iw.frameDuration=i-r;for(let n=0;n<CA.length;n++){const o=performance.now(),u=CA[n];Gy.forAll(f=>{var g;f.paused||f.removed||(n===0&&f.ticks++,f.phases[u]&&(iw.elapsedFrameTime=performance.now()-e,iw.deltaTime=f.ticks===0?0:t,(g=f.phases[u])==null||g.call(f,iw)))}),iwe[n].push(performance.now()-o)}ite(),rwe.push(performance.now()-e)}const w5=new _y;function ite(){Gy.forAll(e=>{e.removed&&w5.push(e)}),Gy.removeUnorderedMany(w5.data,w5.length),w5.clear()}function rte(){for(;AA.length;){const e=AA.shift();e.isActive&&e.callback()}zE.willDispatch=!1}function ewe(e=1,t){const i=wa(),r=()=>{va(t)?i.reject(wi()):e===0?i():(--e,Cv(()=>r()))};return r(),i.promise}function twe(e){return ewe(1,e)}async function F6(e){await twe(e),await new Promise(t=>requestAnimationFrame(()=>{e!=null&&e.aborted||t()}))}const iwe=CA.map(e=>new y3(e)),rwe=new y3("total");function nte(e,t){for(const i of e.values())if(t(i))return!0;return!1}function VE(e,t){if(!t)return e;for(const i of t)i!=null&&e.add(i);return e}function iU(e,t){return t!=null&&e.add(t),e}function ste(e,t){const i=new Set;return VE(i,e),VE(i,t),i}function ote(e,t){const i=new Set;for(const r of t)e.has(r)&&i.add(r);return i}function Gtt(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const i of e)if(!t.has(i))return!1;return!0}function Btt(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function nwe(e,t){const i=new Set(e);for(const r of t)i.delete(r);return i}function swe(e,t){return nwe(ste(e,t),ote(e,t))}let owe=0;function u9(){return++owe}let D6=class extends R6{constructor(t){super(new awe(t)),this._observer&&rU.register(this,new WeakRef(this._observer),this)}destroy(){var t,i;this._observer&&rU.unregister(this._observer),(t=this.accessed)==null||t.clear(),this.clear(),(i=this._observer)==null||i.destroy()}},awe=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=lwe}};const rU=new FinalizationRegistry(e=>{var t;(t=e.deref())==null||t.destroy()});function lwe(){}let Qg=!1;const UE=[];function ate(e,t){let i=new D6(o),r=null,n=!1;function o(){if(!i||n)return;if(Qg)return void cte(o);const f=r;i.clear(),Qg=!0,n=!0,r=sd(i,e),n=!1,Qg=!1,t(r,f),hte()}function u(){i&&(i.destroy(),i=null,r=null)}return n=!0,r=sd(i,e),n=!1,Yt(u)}function lte(e,t){let i=new D6(n),r=null;function n(){t(r,u)}function o(){i&&(i.destroy(),i=null),r=null}function u(){return i?(i.clear(),r=sd(i,e),r):null}return u(),Yt(o)}function ute(e,t){let i=!1,r=!1;const n=!!(t!=null&&t.sync);let o=new D6(()=>{i||r||(r=!0,n?u():queueMicrotask(u))});function u(){r=!1,o&&!i&&(Qg?cte(u):(o.clear(),Qg=!0,i=!0,sd(o,e),i=!1,Qg=!1,hte()))}function f(){o&&(o.destroy(),o=null)}return i=!0,sd(o,e),i=!1,Yt(f)}function cte(e){UE.includes(e)||UE.unshift(e)}function hte(){for(;UE.length;)UE.pop()()}var m3;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(m3||(m3={}));let h_=class{constructor(){this.uid=u9(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,i,r,n,o){return this.pool.acquire(m3.Untracked,t,i,r,n,o,lN)}static acquireTracked(t,i,r,n){return this.pool.acquire(m3.Tracked,t,i,r,null,null,n)}notify(t,i){this.type===m3.Untracked?this.callback.call(this.target,t,i,this.path,this.target):this.callback.call(null,t,i,void 0,void 0)}acquire(t,i,r,n,o,u,f){this.uid=u9(),this.removed=!1,this.type=t,this.oldValue=i,this.callback=r,this.getValue=n,this.target=o,this.path=u,this.equals=f}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=u9(),this.removed=!0}};h_.pool=new Qee(h_);const c9=new eo,Yh=new Set;let GE;function BE(e){Yh.delete(e),Yh.add(e),GE||(GE=uS(hwe))}function uwe(e){if(e.removed)return;const t=e.oldValue,i=e.getValue();e.equals(t,i)||(e.oldValue=i,e.notify(i,t))}function cwe(e){for(const t of Yh.values())t.target===e&&(t.removed=!0)}function hwe(){let e=10;for(;GE&&e--;){GE=null;const t=dwe(),i=c9.acquire();for(const r of t){const n=r.uid;uwe(r),n===r.uid&&r.removed&&i.push(r)}for(const r of Yh)r.removed&&(i.push(r),Yh.delete(r));for(const r of i)h_.pool.release(r);c9.release(i),c9.release(t),kA.forEach(r=>r())}}function dwe(){const e=c9.acquire();e.length=Yh.size;let t=0;for(const i of Yh)e[t]=i,++t;return Yh.clear(),e}const kA=new Set;function pwe(e){return kA.add(e),Yt(()=>kA.delete(e))}function fwe(e,t,i){let r=kee(e,t,i,(n,o,u)=>{let f,g,b=lte(()=>nS(n,o),(E,I)=>{var M;((M=n.__accessor__)==null?void 0:M.lifecycle)===$o.DESTROYED||f&&f.uid!==g?r.remove():(f||(f=h_.acquireUntracked(E,u,I,n,o),g=f.uid),BE(f))});return Yt(()=>{b.remove(),f&&(f.uid!==g||f.removed||(f.removed=!0,BE(f)),f=null),r=b=null})});return r}function ywe(e,t,i){const r=kee(e,t,i,(n,o,u)=>{let f=!1;return ate(()=>nS(n,o),(g,b)=>{n.__accessor__.lifecycle!==$o.DESTROYED?f||(f=!0,lN(b,g)||u.call(n,g,b,o,n),f=!1):r.remove()})});return r}function mwe(e,t,i,r=!1){return e.__accessor__&&e.__accessor__.lifecycle!==$o.DESTROYED?r?ywe(e,t,i):fwe(e,t,i):Yt()}function gwe(e,t,i){let r,n,o=lte(e,(u,f)=>{r&&r.uid!==n?o.remove():(r||(r=h_.acquireTracked(u,t,f,i),n=r.uid),BE(r))});return Yt(()=>{o.remove(),r&&(r.uid!==n||r.removed||(r.removed=!0,BE(r)),r=null),o=null})}function vwe(e,t,i){let r=!1;return ate(e,(n,o)=>{r||(r=!0,i(o,n)||t(n,o),r=!1)})}function wwe(e,t,i=!1,r=bee){return i?vwe(e,t,r):gwe(e,t,r)}function nU(e){return nte(Yh,t=>t.oldValue===e)}var dte,pte;function bwe(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return(t=e.constructor)!=null&&t.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const Ou=Symbol("Accessor-Handles"),LA=Symbol("Accessor-Initialized");let De=class h9{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:n}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const o=this;class u extends o{constructor(...g){super(...g),this.inherited=null,n&&n.apply(this,g)}}sS(u.prototype);for(const f in t){const g=t[f];u.prototype[f]=typeof g=="function"?function(...b){const E=this.inherited;let I;this.inherited=function(...M){if(o.prototype[f])return o.prototype[f].apply(this,M)};try{I=g.apply(this,b)}catch(M){throw this.inherited=E,M}return this.inherited=E,I}:t[f]}for(const f in i){const g=bwe(i[f]);w(g)(u.prototype,f)}return H(r)(u)}static freeze(t){return t instanceof h9?t.__accessor__.mutable=!1:Object.freeze(t),t}static isFrozen(t){return t instanceof h9?!t.__accessor__.mutable:Object.isFrozen(t)}constructor(...t){var r;if(this[dte]=null,this[pte]=!1,this.constructor===h9)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new P2e(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),t.length>0&&(i.ctorArgs=((r=this.normalizeCtorArgs)==null?void 0:r.apply(this,t))??t[0])}postscript(){const t=this.__accessor__,i=t.ctorArgs;t.initialize(),i&&(this.set(i),t.ctorArgs=null),t.constructed(),this.initialize(),this[LA]=!0}initialize(){}[Fee](){this[Ou]=Jt(this[Ou])}destroy(){var t;this.destroyed||(cwe(this),this.__accessor__.destroy(),(t=D2e())==null||t.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[LA]}get destroyed(){var t;return((t=this.__accessor__)==null?void 0:t.lifecycle)===$o.DESTROYED||!1}commitProperty(t){Ps(this,t)}get(t){return Kee(Se.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),Ps(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,i){return RE(this,t,i),this}watch(t,i,r){return mwe(this,t,i,r)}addHandles(t,i){if(this.destroyed){const r=Array.isArray(t)?t:[t];for(const n of r)n.remove();return}(this[Ou]??(this[Ou]=new y2)).add(t,i)}removeHandles(t){var i;(i=this[Ou])==null||i.remove(t)}removeAllHandles(){var t;(t=this[Ou])==null||t.removeAll()}removeHandlesReference(t){var i;(i=this[Ou])==null||i.removeReference(t)}hasHandles(t){var i;return((i=this[Ou])==null?void 0:i.has(t))===!0}_override(t,i){i===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,i){i==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,i){return this.__accessor__.internalSet(t,i),this}};dte=Ou,pte=LA;let _we=class fte{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new fte;return this._values.forEach((r,n)=>{t&&t.has(n)||i.set(n,he(r.value),r.origin)}),i}get(t,i){i=this._normalizeOrigin(i);const r=this._values.get(t);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(t){var i;return((i=this._values.get(t))==null?void 0:i.origin)??yt.USER}keys(t){t=this._normalizeOrigin(t);const i=[...this._values.keys()];return t==null?i:i.filter(r=>{var n;return((n=this._values.get(r))==null?void 0:n.origin)===t})}set(t,i,r){if((r=this._normalizeOrigin(r))===yt.DEFAULTS){const n=this._values.get(t);if((n==null?void 0:n.origin)!=null&&n.origin>r)return}this._values.set(t,new Swe(i,r))}delete(t,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(t))==null?void 0:r.origin)!==i||this._values.delete(t)}has(t,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(t))==null?void 0:r.origin)===i:this._values.has(t)}forEach(t){this._values.forEach(({value:i},r)=>t(i,r))}_normalizeOrigin(t){if(t!=null)return t===yt.DEFAULTS?t:yt.USER}},Swe=class{constructor(t,i){this.value=t,this.origin=i}};function yte(e,t,i){t.keys().forEach(n=>{i.set(n,t.get(n),yt.DEFAULTS)});const r=e.metadata;Object.keys(r).forEach(n=>{e.internalGet(n)&&i.set(n,e.internalGet(n),yt.DEFAULTS)})}function xwe(e,t,i){if(!(e!=null&&e.read)||e.read.enabled===!1||!e.read.source)return!1;const r=e.read.source;if(typeof r=="string"){if(r===t||r.includes(".")&&r.indexOf(t)===0&&DV(r,i))return!0}else for(const n of r)if(n===t||n.includes(".")&&n.indexOf(t)===0&&DV(n,i))return!0;return!1}function Ewe(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function Iwe(e,t,i,r,n){let o=_A(t[i],n);Ewe(o)&&(e[i]=!0);for(const u of Object.getOwnPropertyNames(t))o=_A(t[u],n),xwe(o,i,r)&&(e[u]=!0)}function Twe(e,t,i,r){const n=i.metadata,o=v2e(n[t],r),u=o==null?void 0:o.default;if(u===void 0)return;const f=typeof u=="function"?u.call(e,t,r):u;f!==void 0&&i.set(t,f)}const mte={origin:"service"};function gte(e,t,i=mte){if(!t||typeof t!="object")return;const r=zo(e),n=r.metadata,o={};for(const u of Object.getOwnPropertyNames(t))Iwe(o,n,u,t,i);r.setDefaultOrigin(i.origin);for(const u of Object.getOwnPropertyNames(o)){const f=_A(n[u],i).read,g=f==null?void 0:f.source;let b;b=g&&typeof g=="string"?nS(t,g):t[u],f!=null&&f.reader&&(b=f.reader.call(e,b,t,i)),b!==void 0&&r.set(u,b)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const u of Object.getOwnPropertyNames(n))o[u]||Twe(e,u,r,i)}r.setDefaultOrigin("user")}function vte(e,t,i,r=mte){var o;const n={...r,messages:[]};i(n),(o=n.messages)==null||o.forEach(u=>{u.type!=="warning"||e.loaded?r!=null&&r.messages&&r.messages.push(u):e.loadWarnings.push(u)})}function $we(e,t,i,r,n){var u,f;const o={};return(f=(u=t.write)==null?void 0:u.writer)==null||f.call(e,r,o,i,n),o}function wte(e,t,i,r,n,o){if(!(r!=null&&r.write))return!1;const u=Ps(e,i);if(!n&&r.write.overridePolicy){const f=r.write.overridePolicy.call(e,u,i,o??void 0);f!==void 0&&(n=f)}if(n||(n=r.write),!n||n.enabled===!1||n.layerContainerTypes&&(o!=null&&o.layerContainerType)&&!n.layerContainerTypes.includes(o.layerContainerType))return!1;if((u===null&&!n.allowNull&&!n.writerEnsuresNonNull||u===void 0)&&n.isRequired){const f=new ne("web-document-write:property-required",`Missing value for required property '${i}' on '${e.declaredClass}'`,{propertyName:i,target:e});return f&&(o!=null&&o.messages)?o.messages.push(f):f&&!o&&Se.getLogger("esri.core.accessorSupport.write").error(f.name,f.message),!1}return!(u===void 0||u===null&&!n.allowNull&&!n.writerEnsuresNonNull||!n.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(i)===yt.DEFAULTS)&&Mwe(e,i,o,r,u)||!n.ignoreOrigin&&(o!=null&&o.origin)&&t.store.multipleOriginsSupported&&t.store.originOf(i)<Fp(o.origin))}function Mwe(e,t,i,r,n){const o=r.default;if(o===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(n);if(typeof o=="function"){if(Array.isArray(n)){const u=o.call(e,t,i??void 0);return tS(u,n)}return!1}return o===n}function Cwe(e,t,i,r){const n=zo(e),o=n.metadata,u=Zee(o[t],r);return!!u&&wte(e,n,t,u,i,r)}function bte(e,t,i){var o,u;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return o9(t,e.toJSON(i));const r=zo(e),n=r.metadata;for(const f in n){const g=Zee(n[f],i);if(!wte(e,r,f,g,void 0,i))continue;const b=Ps(e,f),E=$we(e,g,g.write&&typeof g.write.target=="string"?g.write.target:f,b,i);Object.keys(E).length>0&&(t=o9(t,E),(u=(o=i==null?void 0:i.resources)==null?void 0:o.pendingOperations)!=null&&u.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>o9(t,E,()=>"replace-arrays"))),i!=null&&i.writtenProperties&&i.writtenProperties.push({target:e,propName:f,oldOrigin:O2e(r.store.originOf(f)),newOrigin:i.origin}))}return t}const g2=e=>{let t=class extends e{constructor(...i){super(...i);const r=zo(this),n=r.store,o=new _we;r.store=o,yte(r,n,o)}read(i,r){gte(this,i,r)}write(i,r){return bte(this,i??{},r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return Awe.call(this,i,r)}};return t=m([H("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function Awe(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(e,t),i}function qE(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}let be=class extends g2(De){};be=m([H("esri.core.JSONSupport")],be);function ke(e,t,i){let r,n;return t===void 0||Array.isArray(t)?(n=e,i=t,r=[void 0]):(n=t,r=Array.isArray(e)?e:[e]),(o,u)=>{const f=o.constructor.prototype;r.forEach(g=>{const b=Nee(o,g,n);b.read&&typeof b.read=="object"||(b.read={}),b.read.reader=f[u],i&&(b.read.source=(b.read.source||[]).concat(i))})}}let gt=class{constructor(t,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=kwe(t),this.apiValues=sU(this._apiToJSON),this.jsonValues=sU(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,n,o)=>{const u=this.toJSON(r);u!==void 0&&vn(o,u,n)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const i=this._apiToJSON[t];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}};function kwe(e){const t={};for(const i in e)t[e[i]]=i;return t}function sU(e){const t=[];for(const i in e)t.push(i);return t.sort(),t}function _n(){return function(e,t){return new gt(e,{ignoreUnknown:!0,...t})}}let gN=class{constructor(t,i,r,n,o,u){this.semiMajorAxis=t,this.flattening=i,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=n,this.scaleHeight=o;const f=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*f,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=u||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const br=new gN(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),Ic=new gN(3396190,1/169.8944472236118,23e4,6e4,.111),hf=new gN(1737400,0,0,0,0),Lwe=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,Owe={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function oU(e){const t=e==null?void 0:e.match(Lwe);if(!t)return null;const[,i,r,n]=t;if(!i)return null;let o=null,u=null,f=null;const{devext:g,qaext:b,www:E}=Owe;if(r)if(o=i,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:u,portalHostname:f}=g);break;case"qa":({customBaseUrl:u,portalHostname:f}=b);break;default:return null}else({customBaseUrl:u,portalHostname:f}=E);else switch(i.toLowerCase()){case"devext":({customBaseUrl:u,portalHostname:f}=g);break;case"qaext":({customBaseUrl:u,portalHostname:f}=b);break;case"www":({customBaseUrl:u,portalHostname:f}=E);break;default:return null}return{customBaseUrl:u,isPortal:!1,portalHostname:f,urlKey:o}}function Rwe(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function _te(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):i.test(e)?e=e.replace(i,"https://devext.arcgis.com"):r.test(e)&&(e=e.replace(r,"https://qaext.arcgis.com")),e}function Ste(e){const t=atob(e),i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i.buffer}function Pwe(e){const t=new Uint8Array(e);let i="";for(let r=0;r<t.length;r++)i+=String.fromCharCode(t[r]);return btoa(i)}const Nwe=()=>Se.getLogger("esri.core.urlUtils"),v2=Kt.request,aU="esri/config: esriConfig.request.proxyUrl is not set.",xte=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,Ete=/^\s*http:/i,Fwe=/^\s*https:/i,Dwe=/^\s*file:/i,jwe=/:\d+$/,zwe=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,Vwe=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),Uwe=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let tf=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(Vwe);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(Uwe),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const b5={},Gwe=new tf(Kt.applicationUrl);let Os=Gwe;const Bwe=qwe();let vN=Bwe;const wN=()=>Os,Qtt=()=>vN;function qwe(){const e=Os.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${`${Os.scheme}://${Os.host}${Os.port!=null?`:${Os.port}`:""}`}${t}`}function _r(e){if(!e)return null;const t={path:null,query:null},i=new tf(e),r=e.indexOf("?");return i.query===null?t.path=e:(t.path=e.slice(0,r),t.query=bN(i.query)),i.fragment&&(t.hash=i.fragment,i.query===null&&(t.path=t.path.slice(0,t.path.length-(i.fragment.length+1)))),t}function bN(e){const t=e.split("&"),i={};for(const r of t){if(!r)continue;const n=r.indexOf("=");let o,u;n<0?(o=decodeURIComponent(r),u=""):(o=decodeURIComponent(r.slice(0,n)),u=decodeURIComponent(r.slice(n+1)));let f=i[o];typeof f=="string"&&(f=i[o]=[f]),Array.isArray(f)?f.push(u):i[o]=u}return i}function d_(e,t){return e?Object.keys(e).map(i=>{const r=e[i];if(r==null)return"";const n=encodeURIComponent(i)+"=",o=t==null?void 0:t[i];return o?n+encodeURIComponent(o(r)):Array.isArray(r)?r.map(u=>qE(u)?n+encodeURIComponent(JSON.stringify(u)):n+encodeURIComponent(u)).join("&"):qE(r)?n+encodeURIComponent(JSON.stringify(r)):n+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function Ite(e=!1){let t,i=v2.proxyUrl;if(typeof e=="string"){t=Cte(e);const r=j6(e);r&&(i=r.proxyUrl)}else t=!!e;if(!i)throw Nwe().warn(aU),new ne("urlUtils:proxy-not-set",aU);return t&&RA()&&(i=IN(i)),_r(i)}function eit(e,t=!1){const i=j6(e);let r,n;if(i){const o=_N(i.proxyUrl);r=o.path,n=o.query?bN(o.query):null}else if(t){const o=Ite(e);r=o.path,n=o.query}if(r){const o=_r(e);e=r+"?"+o.path;const u=d_({...n,...o.query});u&&(e=`${e}?${u}`)}return e}const rw={path:"",query:""};function _N(e){const t=e.indexOf("?");return t!==-1?(rw.path=e.slice(0,t),rw.query=e.slice(t+1)):(rw.path=e,rw.query=null),rw}function Tte(e){return e=(e=WE(e=tbe(e=_N(e).path),!0)).toLowerCase()}function Hwe(e){const t={proxyUrl:e.proxyUrl,urlPrefix:Tte(e.urlPrefix)},i=v2.proxyRules,r=t.urlPrefix;let n=i.length;for(let o=0;o<i.length;o++){const u=i[o].urlPrefix;if(r.indexOf(u)===0){if(r.length===u.length)return-1;n=o;break}u.indexOf(r)===0&&(n=o+1)}return i.splice(n,0,t),n}function j6(e){const t=v2.proxyRules,i=Tte(e);for(let r=0;r<t.length;r++)if(i.indexOf(t[r].urlPrefix)===0)return t[r]}function Wwe(e,t){if(!e||!t)return!1;e=HE(e),t=HE(t);const i=oU(e),r=oU(t);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&kv(e,t,!0)}function $te(e,t){return e=HE(e),t=HE(t),WE(e)===WE(t)}function HE(e){const t=(e=sl(e)).indexOf("/sharing");return t>0?e.slice(0,t):e.replace(/\/+$/,"")}function OA(e,t=v2.interceptors){const i=r=>r==null||r instanceof RegExp&&r.test(e)||typeof r=="string"&&e.startsWith(r);if(t){for(const r of t)if(Array.isArray(r.urls)){if(r.urls.some(i))return r}else if(i(r.urls))return r}return null}function kv(e,t,i=!1){if(!e||!t)return!1;const r=NA(e),n=NA(t);return!(!i&&r.scheme!==n.scheme)&&r.host!=null&&n.host!=null&&r.host.toLowerCase()===n.host.toLowerCase()&&r.port===n.port}function SN(e){if(typeof e=="string"){if(!pa(e))return!0;e=NA(e)}if(kv(e,Os))return!0;const t=v2.trustedServers||[];for(let i=0;i<t.length;i++){const r=Zwe(t[i]);for(let n=0;n<r.length;n++)if(kv(e,r[n]))return!0}return!1}function Zwe(e){return b5[e]||(EN(e)||Ac(e)?b5[e]=[new tf(Co(e))]:b5[e]=[new tf(`http://${e}`),new tf(`https://${e}`)]),b5[e]}function Co(e,t=vN,i){return Ac(e)?i!=null&&i.preserveProtocolRelative?e:Os.scheme==="http"&&Os.authority===ol(e).slice(2)?`http:${e}`:`https:${e}`:EN(e)?e:By(e[0]==="/"?ebe(t):t,e)}function xN(e,t=vN,i){if(e==null||!pa(e))return e;const r=sl(e),n=r.toLowerCase(),o=sl(t).toLowerCase().replace(/\/+$/,""),u=i?sl(i).toLowerCase().replace(/\/+$/,""):null;if(u&&o.indexOf(u)!==0)return e;const f=(I,M,k)=>(k=I.indexOf(M,k))===-1?I.length:k;let g=f(n,"/",n.indexOf("//")+2),b=-1;for(;n.slice(0,g+1)===o.slice(0,g)+"/"&&(b=g+1,g!==n.length);)g=f(n,"/",g+1);if(b===-1||u&&b<u.length)return e;e=r.slice(b);const E=o.slice(b-1).replaceAll(/[^/]+/g,"").length;if(E>0)for(let I=0;I<E;I++)e=`../${e}`;else e=`./${e}`;return e}function sl(e){return e=nbe(e=rbe(e=ibe(e=Co(e=e.trim()))))}function By(...e){const t=e.filter(cr);if(!(t!=null&&t.length))return;const i=[];if(pa(t[0])){const n=t[0],o=n.indexOf("//");o!==-1&&(i.push(n.slice(0,o+1)),Xwe(t[0])&&(i[0]+="/"),t[0]=n.slice(o+2))}else t[0][0]==="/"&&i.push("");const r=t.reduce((n,o)=>o?n.concat(o.split("/")):n,[]);for(let n=0;n<r.length;n++){const o=r[n];o===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!o&&n===r.length-1||o&&(o!=="."||i.length===0))&&i.push(o)}return i.join("/")}function ol(e,t=!1){if(e==null||z6(e)||hd(e))return null;let i=e.indexOf("://");if(i===-1&&Ac(e))i=2;else{if(i===-1)return null;i+=3}const r=e.indexOf("/",i);return r!==-1&&(e=e.slice(0,r)),t&&(e=WE(e,!0)),e}function pa(e){return Ac(e)||EN(e)}function z6(e){return e!=null&&e.slice(0,5)==="blob:"}function hd(e){return e!=null&&e.slice(0,5)==="data:"}function Jwe(e){const t=qy(e);return t!=null&&t.isBase64?Ste(t.data):null}function tit(e){return Pwe(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const Kwe=/^data:(.*?)(;base64)?,(.*)$/;function qy(e){const t=e.match(Kwe);if(!t)return null;const[,i,r,n]=t;return{mediaType:i,isBase64:!!r,data:n}}function Mte(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function iit(e){return(await fetch(e)).blob()}function rit(e){const t=Jwe(e);if(!t)return null;const i=qy(e);return new Blob([t],{type:i.mediaType})}function Ac(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function EN(e){return e!=null&&xte.test(e)}function Cte(e){return e!=null&&Fwe.test(e)||Os.scheme==="https"&&Ac(e)}function Ywe(e){return e!=null&&Ete.test(e)||Os.scheme==="http"&&Ac(e)}function Xwe(e){return e!=null&&Dwe.test(e)}function IN(e){return Ac(e)?`https:${e}`:e.replace(Ete,"https:")}function Qwe(){return Os.scheme==="http"}function RA(){return Os.scheme==="https"}function WE(e,t=!1){return Ac(e)?e.slice(2):(e=e.replace(xte,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function ebe(e){const t=e.indexOf("//"),i=e.indexOf("/",t+2);return i===-1?e:e.slice(0,i)}function TN(e){let t=0;if(pa(e)){const r=e.indexOf("//");r!==-1&&(t=r+2)}const i=e.lastIndexOf("/");return i<t?e:e.slice(0,i+1)}function nit(e,t){if(!e)return"";const i=_r(e).path.replace(/\/+$/,""),r=i.slice(i.lastIndexOf("/")+1);if(!(t!=null&&t.length))return r;const n=new RegExp(`\\.(${t.join("|")})$`,"i");return r.replace(n,"")}function tbe(e){return e.endsWith("/")?e:`${e}/`}function Ate(e){return e.replace(/\/+$/,"")}function ibe(e){if(/^https?:\/\//i.test(e)){const t=_N(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function rbe(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function nbe(e){const t=v2.httpsDomains;if(!Ywe(e))return e;const i=e.indexOf("/",7);let r;if(r=i===-1?e:e.slice(0,i),r=r.toLowerCase().slice(7),jwe.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return Qwe()&&r===Os.authority&&!zwe.test(e)||(RA()&&r===Os.authority||t&&t.some(n=>r===n||r.endsWith(`.${n}`))||RA()&&!j6(e))&&(e=IN(e)),e}function PA(e,t,i){if(!(t&&i&&e&&pa(e)))return e;const r=e.indexOf("//"),n=e.indexOf("/",r+2),o=e.indexOf(":",r+2),u=Math.min(n<0?e.length:n,o<0?e.length:o);return e.slice(r+2,u).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,r+2)}${i}${e.slice(u)}`}function NA(e){return typeof e=="string"?new tf(Co(e)):(e.scheme||(e.scheme=Os.scheme),e)}function sit(e){return sbe.test(e)}function kte(e,t){const i=_r(e),r=Object.keys(i.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function Lte(e,t,i){const r=_r(e),n=r.query||{};return n[t]=String(i),`${r.path}?${d_(n)}`}function d9(e,t){if(!t)return e;const i=_r(e),r=i.query||{};for(const[o,u]of Object.entries(t))u!=null&&(r[o]=u);const n=d_(r);return n?`${i.path}?${n}`:i.path}function oit(e){if(e==null)return null;const t=e.match(Ote);return t?t[2]:null}function lU(e){if(e==null)return null;const t=e.match(Ote);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function ait(e){return typeof e=="string"?qy(e)??{data:e}:new Promise((t,i)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(qy(r.result)),r.onerror=n=>i(n)})}const Ote=/([^.]*)\.([^/]*)$/,sbe=/(^data:image\/svg|\.svg$)/i,Rte="20241122",Pte="f6f7099a0e79cf518abdcf87c5aa8b6f24ecdcd8";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const Nte="4.31";let Et,$N=Nte;$N="4.31.6";function lit(e){Et=e}function obe(e){const t=Et==null?void 0:Et.findCredential(e);return t!=null&&t.token?Lte(e,"token",t.token):e}we("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),we("host-webworker");const abe=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function lbe(e){const t=ol(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!abe.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function Fte(e,t){return!(!Kt.apiKey||!lbe(e))}function ube(e,t,i=!1,r){return new Promise((n,o)=>{if(va(r))return void o(uU());let u=()=>{b(),o(new Error(`Unable to load ${t}`))},f=()=>{const E=e;b(),n(E)},g=()=>{if(!e)return;const E=e;b(),E.src="",o(uU())};const b=()=>{we("esri-image-decode")||(e.removeEventListener("error",u),e.removeEventListener("load",f)),u=null,f=null,e=null,r!=null&&r.removeEventListener("abort",g),g=null,i&&URL.revokeObjectURL(t)};r!=null&&r.addEventListener("abort",g),we("esri-image-decode")?e.decode().then(f,u):(e.addEventListener("error",u),e.addEventListener("load",f))})}function uU(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const Dte="Timeout exceeded";function cbe(){return new Error(Dte)}function uit(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===Dte}function hbe(e){Kt.request.crossOriginNoCorsDomains||(Kt.request.crossOriginNoCorsDomains={});const t=Kt.request.crossOriginNoCorsDomains;for(let i of e)i=i.toLowerCase(),/^https?:\/\//.test(i)?t[ol(i)??""]=0:(t[ol("http://"+i)??""]=0,t[ol("https://"+i)??""]=0)}function dbe(e){const t=Kt.request.crossOriginNoCorsDomains;if(t){let i=ol(e);if(i)return i=i.toLowerCase(),!kv(i,wN())&&t[i]<Date.now()-36e5}return!1}async function pbe(e){var n;const t=_r(e);e=t.path,((n=t.query)==null?void 0:n.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}const i=Kt.request.crossOriginNoCorsDomains,r=ol(e);i&&r&&(i[r.toLowerCase()]=Date.now())}async function Ct(e,t){var M;e instanceof URL&&(e=e.toString()),(t==null?void 0:t.query)instanceof URLSearchParams&&(t.query=bN(t.query.toString().replaceAll("+"," ")));const i=hd(e),r=z6(e);r||i||(e=sl(e));const n={url:e,requestOptions:{...t}},o=k=>({data:k,getAllHeaders:Lv,getHeader:Lv,httpStatus:200,requestOptions:n.requestOptions,url:n.url}),u=OA(e,Za.internalInterceptors);if(u){const k=await hU(u,n);if(k!=null)return o(k)}let f=OA(e);if(f){const k=await hU(f,n);if(k!=null)return o(k);f.after||f.error||(f=null)}if(e=n.url,(t=n.requestOptions).responseType==="image"&&(we("host-webworker")||we("host-node")))throw Tc("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n);if(t.method==="head"){if(t.body)throw Tc("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(i||r)throw Tc("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await vbe(),ZE)return ZE.execute(e,t);const g=new AbortController,b=nl(t,()=>g.abort()),E={controller:g,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:f,params:n,redoRequest:!1,useIdentity:Za.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},I=await Sbe(E).finally(()=>b==null?void 0:b.remove());return(M=f==null?void 0:f.after)==null||M.call(f,I),I}let ZE;const Za=Kt.request,jte="FormData"in globalThis,fbe=new Set([499,498,403,401]),ybe=new Set(["COM_0056","COM_0057","SB_0008"]),mbe=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],Lv=()=>null,JE=Symbol();function gbe(e){const t=ol(e);t&&!Ct._corsServers.includes(t)&&Ct._corsServers.push(t)}function cU(e){const t=ol(e);return!t||t.endsWith(".arcgis.com")||Ct._corsServers.includes(t)||SN(t)}function Tc(e,t,i,r){let n="Error";const o={url:i.url,requestOptions:i.requestOptions,getAllHeaders:Lv,getHeader:Lv,ssl:!1};if(t instanceof ne)return t.details?(t.details=he(t.details),t.details.url=i.url,t.details.requestOptions=i.requestOptions):t.details=o,t;if(t){const u=r&&(()=>Array.from(r.headers)),f=r&&(E=>r.headers.get(E)),g=r==null?void 0:r.status,b=t.message;b&&(n=b),u&&f&&(o.getAllHeaders=u,o.getHeader=f),o.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||g||0,o.subCode=t.subcode,o.messageCode=t.messageCode,typeof t.details=="string"?o.messages=[t.details]:o.messages=t.details,o.raw=JE in t?t[JE]:t}return Or(t)?wi():new ne(e,n,o)}async function vbe(){we("host-webworker")&&!ZE&&(ZE=await ce(()=>import("./request-BnEtHAd9.js"),[],import.meta.url))}async function FA(){Et||await ce(()=>import("./IdentityManager-TeMBLisH.js"),[],import.meta.url)}async function wbe(e){var f;const t=e.params.url,i=e.params.requestOptions,r=e.controller.signal,n=i.body;let o=null,u=null;if(jte&&"HTMLFormElement"in globalThis&&(n instanceof FormData?o=n:n instanceof HTMLFormElement&&(o=new FormData(n))),typeof n=="string"&&(u=n),e.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:Za.priority,redirect:"follow",signal:r},(o||u)&&(e.fetchOptions.body=o||u),i.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||(f=i.query)!=null&&f.token||o!=null&&o.get("token")),!e.hasToken&&Fte(t)&&(i.query||(i.query={}),i.query.token=Kt.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!zte(t)&&!va(r)){let g;i.authMode==="immediate"?(await FA(),g=await Et.getCredential(t,{signal:r}),e.credential=g):i.authMode==="no-prompt"?(await FA(),g=await Et.getCredential(t,{prompt:!1,signal:r}).catch(()=>{}),e.credential=g):Et&&(g=Et.findCredential(t)),g&&(e.credentialToken=g.token,e.useSSL=!!g.ssl)}}function zte(e){return mbe.some(t=>t.test(e))}async function bbe(e){let t=e.params.url;const i=e.params.requestOptions,r=e.fetchOptions??{},n=z6(t)||hd(t),o=i.responseType||"json",u=n?0:i.timeout!=null?i.timeout:Za.timeout;let f=!1;if(!n){e.useSSL&&(t=IN(t));let M={...i.query};e.credentialToken&&(M.token=e.credentialToken);let k=d_(M);we("esri-url-encodes-apostrophe")&&(k=k.replaceAll("'","%27"));const L=t.length+1+k.length;let P;f=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||L>Za.maxUrlLength;const D=i.useProxy||!!j6(t);if(D){const j=Ite(t);P=j.path,!f&&P.length+1+L>Za.maxUrlLength&&(f=!0),j.query&&(M={...j.query,...M})}if(r.method==="HEAD"&&(f||D)){if(f)throw L>Za.maxUrlLength?Tc("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):Tc("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(D)throw Tc("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(f?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?t=d9(t,M):(r.body=d_(M),r.headers||(r.headers={}),r.headers["Content-Type"]="application/x-www-form-urlencoded")):t=d9(t,M),D&&(e.useProxy=!0,t=`${P}?${t}`),M.token&&jte&&r.body instanceof FormData&&!Rwe(t)&&r.body.set("token",M.token),i.hasOwnProperty("withCredentials"))e.withCredentials=i.withCredentials;else if(!kv(t,wN())){if(SN(t))e.withCredentials=!0;else if(Et){const j=Et.findServerInfo(t);j!=null&&j.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(r.credentials="include",dbe(t)&&await pbe(f?d9(t,M):t))}let g,b,E=0,I=!1;u>0&&(E=setTimeout(()=>{I=!0,e.controller.abort()},u));try{if(i.responseType==="native-request-init")b=r,b.url=t,i.signal?b.signal=i.signal:delete b.signal;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||f||_be(i.headers)||!n&&!e.useProxy&&Za.proxyUrl&&!cU(t)){if(Ct._beforeFetch&&await Ct._beforeFetch(t,r),g=await fetch(t,r),Ct._afterFetch&&await Ct._afterFetch(g),e.useProxy||gbe(t),i.responseType==="native")b=g;else if(r.method!=="HEAD")if(g.ok){switch(o){case"array-buffer":b=await g.arrayBuffer();break;case"blob":case"image":b=await g.blob();break;default:b=await g.text()}if(E&&(clearTimeout(E),E=0),o==="json"||o==="xml"||o==="document")if(b)switch(o){case"json":b=JSON.parse(b);break;case"xml":b=dU(b,"application/xml");break;case"document":b=dU(b,"text/html")}else b=null;if(b){if(o==="array-buffer"||o==="blob"){const M=g.headers.get("Content-Type");if(M&&/application\/json|text\/plain/i.test(M)&&b[o==="blob"?"size":"byteLength"]<=750)try{const k=await new Response(b).json();k.error&&(b=k)}catch{}}o==="image"&&b instanceof Blob&&(b=await pU(URL.createObjectURL(b),e,!0))}}else{b=await g.text();try{b=JSON.parse(b)}catch{}}}else b=await pU(t,e)}catch(M){if(M.name==="AbortError")throw I?cbe():wi("Request canceled");if(!(!g&&M instanceof TypeError&&Za.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||e.useProxy||cU(t))throw M;e.redoRequest=!0,Hwe({proxyUrl:Za.proxyUrl,urlPrefix:ol(t)??""})}finally{E&&clearTimeout(E)}return[g,b]}async function hU(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let i,r;try{r=await e.before(t)}catch(n){i=Tc("request:interceptor",n,t)}if((r instanceof Error||r instanceof ne)&&(i=Tc("request:interceptor",r,t)),i)throw e.error&&e.error(i),i;return r}}function _be(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function dU(e,t){let i;try{i=new DOMParser().parseFromString(e,t)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function Sbe(e){var o,u;let t,i;await wbe(e);try{do[t,i]=await bbe(e);while(!await xbe(e,t,i))}catch(f){const g=Tc("request:server",f,e.params,t);throw g.details.ssl=e.useSSL,(o=e.interceptor)!=null&&o.error&&e.interceptor.error(g),g}const r=e.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!e.hasToken&&!e.credentialToken&&((u=i.user)!=null&&u.username)&&!SN(r)){const f=ol(r,!0);f&&Za.trustedServers.push(f)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&hbe(i.authorizedCrossOriginNoCorsDomains)}const n=e.credential;if(n&&Et){const f=Et.findServerInfo(n.server);let g=f==null?void 0:f.owningSystemUrl;if(g){g=g.replace(/\/?$/,"/sharing");const b=Et.findCredential(g,n.userId);b&&Et._getIdenticalSvcIdx(g,b)===-1&&b.resources.unshift(g)}}return{data:i,getAllHeaders:t?()=>Array.from(t.headers):Lv,getHeader:t?f=>t.headers.get(f):Lv,httpStatus:(t==null?void 0:t.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function xbe(e,t,i){var b;if(e.redoRequest)return e.redoRequest=!1,!1;const r=e.params.requestOptions;if(!t||r.responseType==="native"||r.responseType==="native-request-init")return!0;let n,o;if(i&&(i.error&&typeof i.error=="object"?n=i.error:i.status==="error"&&Array.isArray(i.messages)&&(n={...i},n[JE]=i,n.details=i.messages)),!n&&!t.ok)throw n=new Error(`Unable to load ${t.url} status: ${t.status}`),n[JE]=i,n;let u,f=null;n&&(o=Number(n.code),f=n.hasOwnProperty("subcode")?Number(n.subcode):null,u=n.messageCode,u=u==null?void 0:u.toUpperCase());const g=r.authMode;if(o===403&&(f===4||(b=n.message)!=null&&b.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(g!=="no-prompt"||o===498)&&o!==void 0&&fbe.has(o)&&!zte(e.params.url)&&(o!==403||(!u||!ybe.has(u))&&(f==null||f===2&&e.credentialToken))){await FA();try{const E=await Et.getCredential(e.params.url,{error:Tc("request:server",n,e.params),prompt:g!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=E,e.credentialToken=E.token,e.useSSL=e.useSSL||E.ssl,!1}catch(E){if(g==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;n=E}}if(n)throw n;return!0}function pU(e,t,i=!1){const r=t.controller.signal,n=new Image;return t.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=Za.priority,n.src=e,ube(n,e,i,r)}Ct._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],Ct._beforeFetch=void 0,Ct._afterFetch=void 0;function Vt(e){if(!Kt.assetsPath)throw Se.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new ne("assets:path-not-set","config.assetsPath is not set");return By(Kt.assetsPath,e)}let eM,fe=null;function MN(){return!!fe}function Ebe(){return!!we("esri-wasm")}function Vte(){return eM||(eM=ce(()=>import("./pe-wasm-BfTF7yRR.js"),[],import.meta.url).then(e=>e.p).then(({default:e})=>e({locateFile:t=>Vt(`esri/geometry/support/${t}`)})).then(e=>{Bte(e)}),eM)}var DA,Qi;(function(e){function t(o,u,f){fe.ensureCache.prepare();const g=Y0(f),b=f===g,E=fe.ensureFloat64(g),I=fe._pe_geog_to_proj(fe.getPointer(o),u,E);return I&&kp(f,u,E,b),I}function i(o,u,f,g){switch(g){case Qi.PE_TRANSFORM_P_TO_G:return r(o,u,f);case Qi.PE_TRANSFORM_G_TO_P:return t(o,u,f)}return 0}function r(o,u,f){return n(o,u,f,0)}function n(o,u,f,g){fe.ensureCache.prepare();const b=Y0(f),E=f===b,I=fe.ensureFloat64(b),M=fe._pe_proj_to_geog_center(fe.getPointer(o),u,I,g);return M&&kp(f,u,I,E),M}e.geogToProj=t,e.projGeog=i,e.projToGeog=r,e.projToGeogCenter=n})(DA||(DA={})),function(e){function t(){e.PE_BUFFER_MAX=fe.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=fe.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=fe.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=fe.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=fe.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=fe.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=fe.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=fe.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=fe.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=fe.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=fe.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=fe.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=fe.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=fe.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=fe.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=fe.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=fe.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=fe.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=fe.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=fe.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=fe.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=fe.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=fe.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=fe.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=fe.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=fe.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=fe.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=fe.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=fe.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=fe.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=fe.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=fe.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(Qi||(Qi={}));let Ute=null;var jA;(function(e){const t={},i={},r=k=>{const L=k.getType();switch(L){case Qi.PE_TYPE_GEOGCS:k=fe.castObject(k,fe.PeGeogcs);break;case Qi.PE_TYPE_PROJCS:k=fe.castObject(k,fe.PeProjcs);break;case Qi.PE_TYPE_GEOGTRAN:k=fe.castObject(k,fe.PeGeogtran);break;default:L&Qi.PE_TYPE_UNIT&&(k=fe.castObject(k,fe.PeUnit))}return k};function n(){fe.PeFactory.prototype.initialize(null)}function o(k){return u(Qi.PE_TYPE_COORDSYS,k)}function u(k,L){let P=null,D=t[k];if(D||(D={},t[k]=D),D.hasOwnProperty(String(L))&&(P=D[L],fe.compare(P,fe.NULL)&&(P=null)),!P){const j=fe.PeFactory.prototype.factoryByType(k,L);fe.compare(j,fe.NULL)||(P=r(j),D[L]=P)}return P}function f(k,L){let P=null,D=i[k];if(D||(D={},i[k]=D),D.hasOwnProperty(L)&&(P=D[L],fe.compare(P,fe.NULL)&&(P=null)),!P){const j=fe.PeFactory.prototype.fromString(k,L);fe.compare(j,fe.NULL)||(P=r(j),D[L]=P)}return P}function g(k){return u(Qi.PE_TYPE_GEOGCS,k)}function b(k){return u(Qi.PE_TYPE_GEOGTRAN,k)}function E(k){return fe.PeFactory.prototype.getCode(k)}function I(k){return u(Qi.PE_TYPE_PROJCS,k)}function M(k){return u(Qi.PE_TYPE_UNIT,k)}e.initialize=n,e.coordsys=o,e.factoryByType=u,e.fromString=f,e.geogcs=g,e.geogtran=b,e.getCode=E,e.projcs=I,e.unit=M})(jA||(jA={}));let Gte=null;var KE,zA,VA,UA,GA,BA,YE,qA,XE,QE,HA;function Bte(e){function t(o,u,f){o[u]=f(o[u])}fe=e,Qi.init(),KE.init(),YE.init(),XE.init(),QE.init(),Ute=class extends fe.PeDouble{constructor(o=NaN){super(o)}destroy(){fe.destroy(this)}[Symbol.dispose](){this.destroy()}},Gte=class extends fe.PeGCSExtent{destroy(){fe.destroy(this)}[Symbol.dispose](){this.destroy()}};const i=[fe.PeAngunit,fe.PeDatum,fe.PeGeogcs,fe.PeGeogtran,fe.PeObject,fe.PeParameter,fe.PePrimem,fe.PeProjcs,fe.PeSpheroid,fe.PeUnit];for(const o of i)t(o.prototype,"getName",u=>function(){return u.call(this,new Array(Qi.PE_NAME_MAX))});for(const o of[fe.PeGeogtran,fe.PeProjcs])t(o.prototype,"getParameters",u=>function(){const f=new Array(Qi.PE_PARM_MAX);let g=u.call(this);for(let b=0;b<f.length;b++){const E=fe.getValue(g,"*");f[b]=E?fe.wrapPointer(E,fe.PeParameter):null,g+=Int32Array.BYTES_PER_ELEMENT}return f});t(fe.PeHorizon.prototype,"getCoord",o=>function(u=!1){const f=this.getSize();if(!f)return null;const g=[];return kp(g,f,o.call(this),u),g}),t(fe.PeGTlistExtendedEntry.prototype,"getEntries",o=>{const u=fe._pe_getPeGTlistExtendedGTsSize();return function(){let f=null;const g=o.call(this);if(!fe.compare(g,fe.NULL)){f=[g];const b=this.getSteps();if(b>1){const E=fe.getPointer(g);for(let I=1;I<b;I++)f.push(fe.wrapPointer(E+u*I,fe.PeGTlistExtendedGTs))}}return f}});const r=fe._pe_getPeHorizonSize(),n=o=>function(){let u=this._cache;if(u||(u=new Map,this._cache=u),u.has(o))return u.get(o);let f=null;const g=o.call(this);if(!fe.compare(g,fe.NULL)){f=[g];const b=g.getNump();if(b>1){const E=fe.getPointer(g);for(let I=1;I<b;I++)f.push(fe.wrapPointer(E+r*I,fe.PeHorizon))}}return u.set(o,f),f};t(fe.PeProjcs.prototype,"horizonGcsGenerate",n),t(fe.PeProjcs.prototype,"horizonPcsGenerate",n),fe.PeObject.prototype.toString=function(o=Qi.PE_STR_OPTS_NONE){fe.ensureCache.prepare();const u=fe.getPointer(this),f=fe.ensureInt8(new Array(Qi.PE_BUFFER_MAX));return fe.UTF8ToString(fe._pe_object_to_string_ext(u,o,f))},fe.PeGeogcs.prototype.destroy=function(){this.Delete(),Kl(this),this.ptr=0},fe.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},fe.PeProjcs.prototype.destroy=function(){this.Delete(),Kl(this),this.ptr=0},fe.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function Kl(e){if(!e)return;const t=fe.getClass(e);if(!t)return;const i=fe.getCache(t);if(!i)return;const r=fe.getPointer(e);r&&delete i[r]}function _5(e,t){const i=[],r=new Array(t);for(let n=0;n<e;n++)i.push(fe.ensureInt8(r));return i}function Y0(e){return ArrayBuffer.isView(e)?e:Array.isArray(e[0])?e.flat():e}function kp(e,t,i,r=!1){if(r)for(let n=0;n<2*t;n++)e[n]=fe.getValue(i+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=e.length===0;for(let o=0;o<t;o++)n&&(e[o]=new Array(2)),e[o][0]=fe.getValue(i,"double"),e[o][1]=fe.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function i(){e.PE_GTLIST_OPTS_COMMON=fe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=fe._pe_getPeGTlistExtendedEntrySize()}function r(n,o,u,f,g,b){let E=null;const I=new fe.PeInteger(b);try{const M=fe.PeGTlistExtended.prototype.getGTlist(n,o,u,f,g,I);if((b=I.val)&&(E=[M],b>1)){const k=fe.getPointer(M);for(let L=1;L<b;L++)E.push(fe.wrapPointer(k+t*L,fe.PeGTlistExtendedEntry))}}finally{fe.destroy(I)}return E}e.init=i,e.getGTlist=r})(KE||(KE={})),function(e){function t(i){if(i!=null&&i.length){for(const r of i)Kl(r),r.getEntries().forEach(n=>{Kl(n);const o=n.getGeogtran();Kl(o),o.getParameters().forEach(Kl),[o.getGeogcs1(),o.getGeogcs2()].forEach(u=>{Kl(u);const f=u.getDatum();Kl(f),Kl(f.getSpheroid()),Kl(u.getPrimem()),Kl(u.getUnit())})});fe.PeGTlistExtendedEntry.prototype.Delete(i[0])}}e.destroy=t}(zA||(zA={})),function(e){function t(i,r,n,o,u){fe.ensureCache.prepare();const f=Y0(n),g=n===f,b=fe.ensureFloat64(f);let E=0;o&&(E=fe.ensureFloat64(o));const I=fe._pe_geog_to_geog(fe.getPointer(i),r,b,E,u);return I&&kp(n,r,b,g),I}e.geogToGeog=t}(VA||(VA={})),function(e){function t(o,u,f,g,b,E,I,M){fe.PeLineType.prototype.geodesic_coordinate(o,u,f,g,b,E,I,M)}function i(o,u,f,g,b,E,I,M,k){fe.PeLineType.prototype.geodetic_coordinate(o,u,f,g,b,E,I,M,k)}function r(o,u,f,g,b,E,I,M,k,L){fe.PeLineType.prototype.geodetic_distance(o,u,f,g,b,E,I,M,k,L)}function n(o,u,f,g,b,E,I,M,k){fe.PeLineType.prototype.great_elliptic_distance(o,u,f,g,b,E,I,M,k)}e.geodesicCoordinate=t,e.geodeticCoordinate=i,e.geodeticDistance=r,e.greatEllipticDistance=n}(UA||(UA={})),function(e){function t(u,f){return fe.PeMath.prototype.phi_to_eta(u,f)}function i(u,f){return fe.PeMath.prototype.eta_to_phi(u,f)}function r(u,f){return fe.PeMath.prototype.phi_to_phig(u,f)}function n(u,f,g){return fe.PeMath.prototype.q(u,f,g)}function o(u,f){return fe.PeMath.prototype.q90(u,f)}e.phiToEta=t,e.etaToPhi=i,e.phiToPhig=r,e.q=n,e.q90=o}(GA||(GA={})),function(e){const t=(b,E,I,M,k,L)=>{let P,D;switch(fe.ensureCache.prepare(),b){case"dd":P=fe._pe_geog_to_dd,D=Qi.PE_DD_MAX;break;case"ddm":P=fe._pe_geog_to_ddm,D=Qi.PE_DDM_MAX;break;case"dms":P=fe._pe_geog_to_dms,D=Qi.PE_DMS_MAX}let j=0;E&&(j=fe.getPointer(E));const z=Y0(M),V=fe.ensureFloat64(z),W=_5(I,D),Q=P(j,I,V,k,fe.ensureInt32(W));if(Q)for(let Z=0;Z<I;Z++)L[Z]=fe.UTF8ToString(W[Z]);return Q},i=(b,E,I,M,k)=>{let L;switch(fe.ensureCache.prepare(),b){case"dd":L=fe._pe_dd_to_geog;break;case"ddm":L=fe._pe_ddm_to_geog;break;case"dms":L=fe._pe_dms_to_geog}let P=0;E&&(P=fe.getPointer(E));const D=M.map(W=>fe.ensureString(W)),j=fe.ensureInt32(D),z=fe.ensureFloat64(new Array(2*I)),V=L(P,I,j,z);return V&&kp(k,I,z),V};function r(b,E,I,M,k){return t("dms",b,E,I,M,k)}function n(b,E,I,M){return i("dms",b,E,I,M)}function o(b,E,I,M,k){return t("ddm",b,E,I,M,k)}function u(b,E,I,M){return i("ddm",b,E,I,M)}function f(b,E,I,M,k){return t("dd",b,E,I,M,k)}function g(b,E,I,M){return i("dd",b,E,I,M)}e.geogToDms=r,e.dmsToGeog=n,e.geogToDdm=o,e.ddmToGeog=u,e.geogToDd=f,e.ddToGeog=g}(BA||(BA={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=fe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=fe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=fe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=fe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=fe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(n,o,u,f,g,b,E){fe.ensureCache.prepare();let I=0;n&&(I=fe.getPointer(n));const M=Y0(u),k=fe.ensureFloat64(M),L=_5(o,Qi.PE_MGRS_MAX),P=fe.ensureInt32(L),D=fe._pe_geog_to_mgrs_extended(I,o,k,f,g,b,P);if(D)for(let j=0;j<o;j++)E[j]=fe.UTF8ToString(L[j]);return D}function r(n,o,u,f,g){fe.ensureCache.prepare();let b=0;n&&(b=fe.getPointer(n));const E=u.map(L=>fe.ensureString(L)),I=fe.ensureInt32(E),M=fe.ensureFloat64(new Array(2*o)),k=fe._pe_mgrs_to_geog_extended(b,o,I,f,M);return k&&kp(g,o,M),k}e.init=t,e.geogToMgrsExtended=i,e.mgrsToGeogExtended=r}(YE||(YE={})),function(e){function t(r,n,o,u,f,g,b){fe.ensureCache.prepare();let E=0;r&&(E=fe.getPointer(r));const I=Y0(o),M=fe.ensureFloat64(I),k=_5(n,Qi.PE_MGRS_MAX),L=fe.ensureInt32(k),P=fe._pe_geog_to_usng(E,n,M,u,f,g,L);if(P)for(let D=0;D<n;D++)b[D]=fe.UTF8ToString(k[D]);return P}function i(r,n,o,u){fe.ensureCache.prepare();let f=0;r&&(f=fe.getPointer(r));const g=o.map(M=>fe.ensureString(M)),b=fe.ensureInt32(g),E=fe.ensureFloat64(new Array(2*n)),I=fe._pe_usng_to_geog(f,n,b,E);return I&&kp(u,n,E),I}e.geogToUsng=t,e.usngToGeog=i}(qA||(qA={})),function(e){function t(){e.PE_UTM_OPTS_NONE=fe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=fe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=fe.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(n,o,u,f,g){fe.ensureCache.prepare();let b=0;n&&(b=fe.getPointer(n));const E=Y0(u),I=fe.ensureFloat64(E),M=_5(o,Qi.PE_UTM_MAX),k=fe.ensureInt32(M),L=fe._pe_geog_to_utm(b,o,I,f,k);if(L)for(let P=0;P<o;P++)g[P]=fe.UTF8ToString(M[P]);return L}function r(n,o,u,f,g){fe.ensureCache.prepare();let b=0;n&&(b=fe.getPointer(n));const E=u.map(L=>fe.ensureString(L)),I=fe.ensureInt32(E),M=fe.ensureFloat64(new Array(2*o)),k=fe._pe_utm_to_geog(b,o,I,f,M);return k&&kp(g,o,M),k}e.init=t,e.geogToUtm=i,e.utmToGeog=r}(XE||(XE={})),function(e){const t=new Map;function i(){e.PE_PCSINFO_OPTION_NONE=fe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=fe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=fe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=fe.PePCSInfo.prototype.PE_POLE_POINT}function r(n,o=e.PE_PCSINFO_OPTION_DOMAIN){let u=null,f=null;return t.has(n)&&(f=t.get(n),f[o]&&(u=f[o])),u||(u=fe.PePCSInfo.prototype.generate(n,o),f||(f=[],t.set(n,f)),f[o]=u),u}e.init=i,e.generate=r}(QE||(QE={})),function(e){function t(){return fe.PeVersion.prototype.version_string()}e.versionString=t}(HA||(HA={}));const Ibe=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return DA},get PeDefs(){return Qi},get PeDouble(){return Ute},get PeFactory(){return jA},get PeGCSExtent(){return Gte},get PeGTTransformations(){return VA},get PeGTlistExtended(){return KE},get PeGTlistExtendedEntry(){return zA},get PeLineType(){return UA},get PeMath(){return GA},get PeNotationDms(){return BA},get PeNotationMgrs(){return YE},get PeNotationUsng(){return qA},get PeNotationUtm(){return XE},get PePCSInfo(){return QE},get PeVersion(){return HA},_init:Bte,get _pe(){return fe},isLoaded:MN,isSupported:Ebe,load:Vte},Symbol.toStringTag,{value:"Module"}));var Hy;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(Hy||(Hy={}));let $;const J={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for($=2e3;$<=2045;$++)J[$]=0;for($=2056;$<=2065;$++)J[$]=0;for($=2067;$<=2135;$++)J[$]=0;for($=2137;$<=2154;$++)J[$]=0;for($=2161;$<=2170;$++)J[$]=0;for($=2172;$<=2193;$++)J[$]=0;for($=2195;$<=2198;$++)J[$]=0;for($=2200;$<=2203;$++)J[$]=0;for($=2205;$<=2217;$++)J[$]=0;for($=2222;$<=2224;$++)J[$]=1;for($=2225;$<=2250;$++)J[$]=2;for($=2251;$<=2253;$++)J[$]=1;for($=2257;$<=2264;$++)J[$]=2;for($=2274;$<=2279;$++)J[$]=2;for($=2280;$<=2282;$++)J[$]=1;for($=2283;$<=2289;$++)J[$]=2;for($=2290;$<=2292;$++)J[$]=0;for($=2308;$<=2313;$++)J[$]=0;for($=2315;$<=2491;$++)J[$]=0;for($=2494;$<=2866;$++)J[$]=0;for($=2867;$<=2869;$++)J[$]=1;for($=2870;$<=2888;$++)J[$]=2;for($=2891;$<=2895;$++)J[$]=2;for($=2896;$<=2898;$++)J[$]=1;for($=2902;$<=2908;$++)J[$]=2;for($=2915;$<=2920;$++)J[$]=2;for($=2921;$<=2923;$++)J[$]=1;for($=2924;$<=2930;$++)J[$]=2;for($=2931;$<=2962;$++)J[$]=0;for($=2964;$<=2968;$++)J[$]=2;for($=2969;$<=2973;$++)J[$]=0;for($=2975;$<=2991;$++)J[$]=0;for($=2995;$<=3051;$++)J[$]=0;for($=3054;$<=3079;$++)J[$]=0;for($=3081;$<=3088;$++)J[$]=0;for($=3092;$<=3101;$++)J[$]=0;for($=3106;$<=3138;$++)J[$]=0;for($=3146;$<=3151;$++)J[$]=0;for($=3153;$<=3166;$++)J[$]=0;for($=3168;$<=3172;$++)J[$]=0;for($=3174;$<=3203;$++)J[$]=0;for($=3294;$<=3358;$++)J[$]=0;for($=3367;$<=3403;$++)J[$]=0;for($=3408;$<=3416;$++)J[$]=0;for($=3417;$<=3438;$++)J[$]=2;for($=3441;$<=3446;$++)J[$]=2;for($=3447;$<=3450;$++)J[$]=0;for($=3451;$<=3459;$++)J[$]=2;for($=3460;$<=3478;$++)J[$]=0;for($=3554;$<=3559;$++)J[$]=0;for($=3560;$<=3570;$++)J[$]=2;for($=3571;$<=3581;$++)J[$]=0;for($=3594;$<=3597;$++)J[$]=0;for($=3601;$<=3604;$++)J[$]=0;for($=3637;$<=3639;$++)J[$]=0;for($=3665;$<=3667;$++)J[$]=0;for($=3693;$<=3695;$++)J[$]=0;for($=3701;$<=3727;$++)J[$]=0;for($=3728;$<=3739;$++)J[$]=2;for($=3740;$<=3751;$++)J[$]=0;for($=3753;$<=3760;$++)J[$]=2;for($=3761;$<=3773;$++)J[$]=0;for($=3775;$<=3777;$++)J[$]=0;for($=3779;$<=3781;$++)J[$]=0;for($=3783;$<=3785;$++)J[$]=0;for($=3788;$<=3791;$++)J[$]=0;for($=3797;$<=3802;$++)J[$]=0;for($=3814;$<=3816;$++)J[$]=0;for($=3825;$<=3829;$++)J[$]=0;for($=3832;$<=3841;$++)J[$]=0;for($=3844;$<=3852;$++)J[$]=0;for($=3873;$<=3885;$++)J[$]=0;for($=3890;$<=3893;$++)J[$]=0;for($=3907;$<=3912;$++)J[$]=0;for($=3942;$<=3950;$++)J[$]=0;for($=3968;$<=3970;$++)J[$]=0;for($=3973;$<=3976;$++)J[$]=0;for($=3986;$<=3989;$++)J[$]=0;for($=3994;$<=3997;$++)J[$]=0;for($=4048;$<=4051;$++)J[$]=0;for($=4056;$<=4063;$++)J[$]=0;for($=4093;$<=4096;$++)J[$]=0;for($=4390;$<=4398;$++)J[$]=0;for($=4399;$<=4413;$++)J[$]=2;for($=4418;$<=4433;$++)J[$]=2;for($=4455;$<=4457;$++)J[$]=2;for($=4484;$<=4489;$++)J[$]=0;for($=4491;$<=4554;$++)J[$]=0;for($=4568;$<=4589;$++)J[$]=0;for($=4652;$<=4656;$++)J[$]=0;for($=4766;$<=4800;$++)J[$]=0;for($=5014;$<=5016;$++)J[$]=0;for($=5069;$<=5072;$++)J[$]=0;for($=5105;$<=5130;$++)J[$]=0;for($=5167;$<=5188;$++)J[$]=0;for($=5253;$<=5259;$++)J[$]=0;for($=5269;$<=5275;$++)J[$]=0;for($=5292;$<=5311;$++)J[$]=0;for($=5329;$<=5331;$++)J[$]=0;for($=5343;$<=5349;$++)J[$]=0;for($=5355;$<=5357;$++)J[$]=0;for($=5387;$<=5389;$++)J[$]=0;for($=5459;$<=5463;$++)J[$]=0;for($=5479;$<=5482;$++)J[$]=0;for($=5518;$<=5520;$++)J[$]=0;for($=5530;$<=5539;$++)J[$]=0;for($=5550;$<=5552;$++)J[$]=0;for($=5562;$<=5583;$++)J[$]=0;for($=5623;$<=5625;$++)J[$]=2;for($=5631;$<=5639;$++)J[$]=0;for($=5649;$<=5653;$++)J[$]=0;for($=5663;$<=5680;$++)J[$]=0;for($=5682;$<=5685;$++)J[$]=0;for($=5875;$<=5877;$++)J[$]=0;for($=5896;$<=5899;$++)J[$]=0;for($=5921;$<=5940;$++)J[$]=0;for($=6050;$<=6125;$++)J[$]=0;for($=6244;$<=6275;$++)J[$]=0;for($=6328;$<=6348;$++)J[$]=0;for($=6350;$<=6356;$++)J[$]=0;for($=6366;$<=6372;$++)J[$]=0;for($=6381;$<=6387;$++)J[$]=0;for($=6393;$<=6404;$++)J[$]=0;for($=6480;$<=6483;$++)J[$]=0;for($=6511;$<=6514;$++)J[$]=0;for($=6579;$<=6581;$++)J[$]=0;for($=6619;$<=6624;$++)J[$]=0;for($=6625;$<=6627;$++)J[$]=2;for($=6628;$<=6632;$++)J[$]=0;for($=6634;$<=6637;$++)J[$]=0;for($=6669;$<=6692;$++)J[$]=0;for($=6707;$<=6709;$++)J[$]=0;for($=6720;$<=6723;$++)J[$]=0;for($=6732;$<=6738;$++)J[$]=0;for($=6931;$<=6933;$++)J[$]=0;for($=6956;$<=6959;$++)J[$]=0;for($=7005;$<=7007;$++)J[$]=0;for($=7057;$<=7070;$++)J[$]=2;for($=7074;$<=7082;$++)J[$]=0;for($=7109;$<=7118;$++)J[$]=0;for($=7119;$<=7127;$++)J[$]=1;for($=7374;$<=7376;$++)J[$]=0;for($=7528;$<=7586;$++)J[$]=0;for($=7587;$<=7645;$++)J[$]=2;for($=7692;$<=7696;$++)J[$]=0;for($=7755;$<=7787;$++)J[$]=0;for($=7791;$<=7795;$++)J[$]=0;for($=7799;$<=7801;$++)J[$]=0;for($=7803;$<=7805;$++)J[$]=0;for($=7825;$<=7831;$++)J[$]=0;for($=7845;$<=7859;$++)J[$]=0;for($=8013;$<=8032;$++)J[$]=0;for($=8065;$<=8068;$++)J[$]=1;for($=8518;$<=8529;$++)J[$]=2;for($=8533;$<=8536;$++)J[$]=2;for($=8538;$<=8540;$++)J[$]=2;for($=8677;$<=8679;$++)J[$]=0;for($=8836;$<=8840;$++)J[$]=0;for($=8857;$<=8859;$++)J[$]=0;for($=8908;$<=8910;$++)J[$]=0;for($=9154;$<=9159;$++)J[$]=0;for($=9205;$<=9218;$++)J[$]=0;for($=9271;$<=9273;$++)J[$]=0;for($=9295;$<=9297;$++)J[$]=0;for($=9356;$<=9360;$++)J[$]=0;for($=9404;$<=9407;$++)J[$]=0;for($=9476;$<=9482;$++)J[$]=0;for($=9487;$<=9494;$++)J[$]=0;for($=9697;$<=9699;$++)J[$]=0;for($=9821;$<=9865;$++)J[$]=0;for($=10285;$<=10291;$++)J[$]=0;for($=10314;$<=10317;$++)J[$]=0;for($=10448;$<=10465;$++)J[$]=0;for($=10731;$<=10733;$++)J[$]=0;for($=11114;$<=11118;$++)J[$]=0;for($=20004;$<=20032;$++)J[$]=0;for($=20047;$<=20049;$++)J[$]=0;for($=20062;$<=20092;$++)J[$]=0;for($=20135;$<=20138;$++)J[$]=0;for($=20248;$<=20258;$++)J[$]=0;for($=20348;$<=20358;$++)J[$]=0;for($=20436;$<=20440;$++)J[$]=0;for($=20822;$<=20824;$++)J[$]=0;for($=20904;$<=20932;$++)J[$]=0;for($=20934;$<=20936;$++)J[$]=0;for($=21004;$<=21032;$++)J[$]=0;for($=21035;$<=21037;$++)J[$]=0;for($=21095;$<=21097;$++)J[$]=0;for($=21148;$<=21150;$++)J[$]=0;for($=21207;$<=21264;$++)J[$]=0;for($=21307;$<=21364;$++)J[$]=0;for($=21413;$<=21423;$++)J[$]=0;for($=21453;$<=21463;$++)J[$]=0;for($=21473;$<=21483;$++)J[$]=0;for($=21780;$<=21782;$++)J[$]=0;for($=21891;$<=21894;$++)J[$]=0;for($=21896;$<=21899;$++)J[$]=0;for($=22171;$<=22177;$++)J[$]=0;for($=22181;$<=22187;$++)J[$]=0;for($=22191;$<=22197;$++)J[$]=0;for($=22207;$<=22222;$++)J[$]=0;for($=22229;$<=22232;$++)J[$]=0;for($=22234;$<=22236;$++)J[$]=0;for($=22243;$<=22250;$++)J[$]=0;for($=22262;$<=22265;$++)J[$]=0;for($=22307;$<=22322;$++)J[$]=0;for($=22348;$<=22357;$++)J[$]=0;for($=22407;$<=22422;$++)J[$]=0;for($=22462;$<=22465;$++)J[$]=0;for($=22521;$<=22525;$++)J[$]=0;for($=22607;$<=22622;$++)J[$]=0;for($=22641;$<=22646;$++)J[$]=0;for($=22648;$<=22657;$++)J[$]=0;for($=22707;$<=22722;$++)J[$]=0;for($=22762;$<=22765;$++)J[$]=0;for($=22807;$<=22822;$++)J[$]=0;for($=22991;$<=22994;$++)J[$]=0;for($=23028;$<=23038;$++)J[$]=0;for($=23301;$<=23333;$++)J[$]=2;for($=23830;$<=23853;$++)J[$]=0;for($=23866;$<=23872;$++)J[$]=0;for($=23877;$<=23884;$++)J[$]=0;for($=23886;$<=23894;$++)J[$]=0;for($=23946;$<=23948;$++)J[$]=0;for($=24311;$<=24313;$++)J[$]=0;for($=24342;$<=24347;$++)J[$]=0;for($=24370;$<=24374;$++)J[$]=10;for($=24375;$<=24381;$++)J[$]=0;for($=24718;$<=24721;$++)J[$]=0;for($=24817;$<=24821;$++)J[$]=0;for($=24877;$<=24882;$++)J[$]=0;for($=24891;$<=24893;$++)J[$]=0;for($=25391;$<=25395;$++)J[$]=0;for($=25828;$<=25838;$++)J[$]=0;for($=26191;$<=26195;$++)J[$]=0;for($=26391;$<=26393;$++)J[$]=0;for($=26701;$<=26722;$++)J[$]=0;for($=26729;$<=26799;$++)J[$]=2;for($=26801;$<=26803;$++)J[$]=2;for($=26811;$<=26813;$++)J[$]=2;for($=26847;$<=26870;$++)J[$]=2;for($=26891;$<=26899;$++)J[$]=0;for($=26901;$<=26923;$++)J[$]=0;for($=26929;$<=26946;$++)J[$]=0;for($=26948;$<=26998;$++)J[$]=0;for($=27037;$<=27040;$++)J[$]=0;for($=27205;$<=27232;$++)J[$]=0;for($=27258;$<=27260;$++)J[$]=0;for($=27391;$<=27398;$++)J[$]=0;for($=27561;$<=27564;$++)J[$]=0;for($=27571;$<=27574;$++)J[$]=0;for($=27581;$<=27584;$++)J[$]=0;for($=27591;$<=27594;$++)J[$]=0;for($=27700;$<=27707;$++)J[$]=0;for($=28191;$<=28193;$++)J[$]=0;for($=28348;$<=28358;$++)J[$]=0;for($=28402;$<=28432;$++)J[$]=0;for($=28462;$<=28492;$++)J[$]=0;for($=29118;$<=29122;$++)J[$]=0;for($=29168;$<=29172;$++)J[$]=0;for($=29177;$<=29185;$++)J[$]=0;for($=29187;$<=29195;$++)J[$]=0;for($=29900;$<=29903;$++)J[$]=0;for($=30161;$<=30179;$++)J[$]=0;for($=30491;$<=30494;$++)J[$]=0;for($=30729;$<=30732;$++)J[$]=0;for($=31251;$<=31259;$++)J[$]=0;for($=31265;$<=31268;$++)J[$]=0;for($=31275;$<=31279;$++)J[$]=0;for($=31281;$<=31297;$++)J[$]=0;for($=31461;$<=31469;$++)J[$]=0;for($=31491;$<=31495;$++)J[$]=0;for($=31917;$<=31922;$++)J[$]=0;for($=31965;$<=32e3;$++)J[$]=0;for($=32001;$<=32003;$++)J[$]=2;for($=32005;$<=32031;$++)J[$]=2;for($=32033;$<=32060;$++)J[$]=2;for($=32064;$<=32067;$++)J[$]=2;for($=32074;$<=32077;$++)J[$]=2;for($=32081;$<=32086;$++)J[$]=0;for($=32107;$<=32130;$++)J[$]=0;for($=32133;$<=32159;$++)J[$]=0;for($=32164;$<=32167;$++)J[$]=2;for($=32180;$<=32199;$++)J[$]=0;for($=32201;$<=32260;$++)J[$]=0;for($=32301;$<=32360;$++)J[$]=0;for($=32401;$<=32460;$++)J[$]=0;for($=32501;$<=32560;$++)J[$]=0;for($=32601;$<=32662;$++)J[$]=0;for($=32664;$<=32667;$++)J[$]=2;for($=32701;$<=32761;$++)J[$]=0;for($=53001;$<=53004;$++)J[$]=0;for($=53008;$<=53019;$++)J[$]=0;for($=53021;$<=53032;$++)J[$]=0;for($=53034;$<=53037;$++)J[$]=0;for($=53042;$<=53046;$++)J[$]=0;for($=53074;$<=53080;$++)J[$]=0;for($=54001;$<=54004;$++)J[$]=0;for($=54008;$<=54019;$++)J[$]=0;for($=54021;$<=54032;$++)J[$]=0;for($=54034;$<=54037;$++)J[$]=0;for($=54042;$<=54046;$++)J[$]=0;for($=54048;$<=54053;$++)J[$]=0;for($=54074;$<=54080;$++)J[$]=0;for($=54098;$<=54101;$++)J[$]=0;for($=102001;$<=102040;$++)J[$]=0;for($=102042;$<=102063;$++)J[$]=0;for($=102065;$<=102067;$++)J[$]=0;for($=102070;$<=102117;$++)J[$]=0;for($=102122;$<=102216;$++)J[$]=0;for($=102221;$<=102377;$++)J[$]=0;for($=102382;$<=102388;$++)J[$]=0;for($=102389;$<=102398;$++)J[$]=2;for($=102399;$<=102444;$++)J[$]=0;for($=102445;$<=102447;$++)J[$]=2;for($=102448;$<=102458;$++)J[$]=0;for($=102459;$<=102468;$++)J[$]=2;for($=102469;$<=102499;$++)J[$]=0;for($=102500;$<=102519;$++)J[$]=1;for($=102520;$<=102524;$++)J[$]=0;for($=102525;$<=102529;$++)J[$]=2;for($=102530;$<=102588;$++)J[$]=0;for($=102590;$<=102598;$++)J[$]=0;for($=102601;$<=102603;$++)J[$]=0;for($=102605;$<=102628;$++)J[$]=0;for($=102629;$<=102646;$++)J[$]=2;for($=102648;$<=102700;$++)J[$]=2;for($=102701;$<=102703;$++)J[$]=0;for($=102707;$<=102730;$++)J[$]=2;for($=102733;$<=102758;$++)J[$]=2;for($=102767;$<=102900;$++)J[$]=0;for($=102901;$<=102933;$++)J[$]=2;for($=102934;$<=102950;$++)J[$]=13;for($=102951;$<=102963;$++)J[$]=0;for($=102965;$<=102969;$++)J[$]=0;for($=102971;$<=102973;$++)J[$]=0;for($=102975;$<=102989;$++)J[$]=0;for($=102990;$<=102992;$++)J[$]=1;for($=102997;$<=103002;$++)J[$]=0;for($=103003;$<=103008;$++)J[$]=2;for($=103009;$<=103011;$++)J[$]=0;for($=103012;$<=103014;$++)J[$]=2;for($=103019;$<=103021;$++)J[$]=0;for($=103022;$<=103024;$++)J[$]=2;for($=103029;$<=103031;$++)J[$]=0;for($=103032;$<=103034;$++)J[$]=2;for($=103065;$<=103068;$++)J[$]=0;for($=103074;$<=103076;$++)J[$]=0;for($=103077;$<=103079;$++)J[$]=1;for($=103080;$<=103082;$++)J[$]=0;for($=103083;$<=103085;$++)J[$]=2;for($=103090;$<=103093;$++)J[$]=0;for($=103097;$<=103099;$++)J[$]=0;for($=103100;$<=103102;$++)J[$]=2;for($=103107;$<=103109;$++)J[$]=0;for($=103110;$<=103112;$++)J[$]=2;for($=103113;$<=103116;$++)J[$]=0;for($=103117;$<=103120;$++)J[$]=2;for($=103153;$<=103157;$++)J[$]=0;for($=103158;$<=103162;$++)J[$]=2;for($=103163;$<=103165;$++)J[$]=0;for($=103166;$<=103168;$++)J[$]=1;for($=103169;$<=103171;$++)J[$]=2;for($=103186;$<=103188;$++)J[$]=0;for($=103189;$<=103191;$++)J[$]=2;for($=103192;$<=103195;$++)J[$]=0;for($=103196;$<=103199;$++)J[$]=2;for($=103200;$<=103224;$++)J[$]=0;for($=103225;$<=103227;$++)J[$]=1;for($=103232;$<=103237;$++)J[$]=0;for($=103238;$<=103243;$++)J[$]=2;for($=103244;$<=103246;$++)J[$]=0;for($=103247;$<=103249;$++)J[$]=2;for($=103254;$<=103256;$++)J[$]=0;for($=103257;$<=103259;$++)J[$]=2;for($=103264;$<=103266;$++)J[$]=0;for($=103267;$<=103269;$++)J[$]=2;for($=103300;$<=103375;$++)J[$]=0;for($=103381;$<=103383;$++)J[$]=0;for($=103384;$<=103386;$++)J[$]=1;for($=103387;$<=103389;$++)J[$]=0;for($=103390;$<=103392;$++)J[$]=2;for($=103397;$<=103399;$++)J[$]=0;for($=103400;$<=103471;$++)J[$]=2;for($=103476;$<=103478;$++)J[$]=0;for($=103479;$<=103481;$++)J[$]=2;for($=103486;$<=103488;$++)J[$]=0;for($=103489;$<=103491;$++)J[$]=2;for($=103492;$<=103495;$++)J[$]=0;for($=103496;$<=103499;$++)J[$]=2;for($=103528;$<=103543;$++)J[$]=0;for($=103544;$<=103548;$++)J[$]=2;for($=103549;$<=103551;$++)J[$]=0;for($=103552;$<=103554;$++)J[$]=1;for($=103555;$<=103557;$++)J[$]=2;for($=103558;$<=103560;$++)J[$]=0;for($=103571;$<=103573;$++)J[$]=0;for($=103574;$<=103576;$++)J[$]=2;for($=103577;$<=103580;$++)J[$]=0;for($=103581;$<=103583;$++)J[$]=2;for($=103595;$<=103694;$++)J[$]=0;for($=103696;$<=103699;$++)J[$]=0;for($=103700;$<=103793;$++)J[$]=2;for($=103794;$<=103890;$++)J[$]=0;for($=103891;$<=103896;$++)J[$]=2;for($=103900;$<=103971;$++)J[$]=2;for($=103972;$<=103977;$++)J[$]=0;for($=112e3;$<=112101;$++)J[$]=0;const qte=[102100,102113,3857,3785,900913],Tbe=[104905,104971],$be=[4326,...qte,...Tbe],p_=[-20037508342788905e-9,20037508342788905e-9],WA=[-20037508342787e-6,20037508342787e-6],tM={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:p_,origin:WA,dx:1e-5},Hte={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:p_,origin:WA,dx:1e-5},102100:tM,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:p_,origin:WA,dx:1e-5},3857:tM,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:tM};function pr(e,t){if(e===t)return!0;if(e==null||t==null)return!1;const i=e.wkid,r=t.wkid;if(i!=null||r!=null){if(i===r||bu(e)&&bu(t))return!0;const u=e.latestWkid;if(u!=null&&r===u)return!0;const f=t.latestWkid;return f!=null&&i===f}let n,o;return e.wkt2&&t.wkt2?(n=e.wkt2,o=t.wkt2):e.wkt&&t.wkt&&(n=e.wkt,o=t.wkt),!(!n||!o)&&n.toUpperCase()===o.toUpperCase()}function no(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&Hte[t]||null}function Ov(e){if(!e)return;const{wkid:t,vcsWkid:i}=e;if(t)return i?JSON.stringify({wkid:t,vcsWkid:i}):String(t);const r=e.wkt||e.wkt2;return JSON.stringify(r?i?{wkt:r,vcsWkid:i}:{wkt:r}:{})}function cS(e){if(!ca(e))return!1;const{wkid:t}=e;if(t)return J[t]==null;const i=e.wkt2||e.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function Mbe(e){return!(Wte(e)||Zte(e))}function Wy(e){return(e==null?void 0:e.wkid)===4326}function cit(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function fU(e){return(e==null?void 0:e.wkid)===Hy.CGCS2000}function bu(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&qte.includes(t)}function Cbe(e){return(e==null?void 0:e.wkid)===32662}function V6(e){return e===Hy.GCSMARS2000||e===Hy.GCSMARS2000_SPHERE}function Wte(e){return V6(e==null?void 0:e.wkid)}function U6(e){return e===Hy.GCSMOON2000}function Zte(e){return U6(e==null?void 0:e.wkid)}function Abe(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&$be.includes(t)}function ca(e){if(e==null)return!1;const t=e.wkid;return t!=null&&t>=2e3||e.wkt2!=null||e.wkt!=null}const Jte={wkid:4326,wkt:wu(Hte[4326].wkTemplate,{Central_Meridian:"0.0"})},Kte={wkid:102100,latestWkid:3857},kbe={wkid:32662};function CN(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const Lbe=CN(br),AN=CN(Ic),kN=CN(hf),Obe={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${br.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},Rbe=AN.wkt.toUpperCase(),Pbe=kN.wkt.toUpperCase();function Yte(e){if(e!=null&&ca(e)){const t=e.wkid,i=e.wkt2??e.wkt;if(V6(t))return Ic;const r=i==null?void 0:i.toUpperCase();if(i&&r===Rbe)return Ic;if(U6(t)||r&&r===Pbe)return hf}return br}function hit(e){return V6(e)?Ic:U6(e)?hf:br}function eI(e){return pr(e,Lbe)}function df(e){return eI(e)||pr(e,AN)||pr(e,kN)}const Xte=39.37,Nbe=br.radius*Math.PI/200,Qte=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,xy=J,eie=/UNIT\[([^\]]+)]/i,Fbe=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),Dbe=_n()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain:"chains",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),Au=e=>e*e,_d=e=>e*e*e,f_={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937},"clarke-feet":{inBaseUnits:.3047972654},"clarke-yards":{inBaseUnits:.9143917962},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"gold-coast-feet":{inBaseUnits:.3047997101815088},chains:{inBaseUnits:20.1168},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Au(.001)},"square-centimeters":{inBaseUnits:Au(.01)},"square-decimeters":{inBaseUnits:Au(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Au(1e3)},"square-inches":{inBaseUnits:Au(.0254)},"square-feet":{inBaseUnits:Au(.3048)},"square-yards":{inBaseUnits:Au(.9144)},"square-miles":{inBaseUnits:Au(1609.344)},"square-us-feet":{inBaseUnits:Au(1200/3937)},acres:{inBaseUnits:.0015625*Au(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*_d(.001)},"cubic-centimeters":{inBaseUnits:1e3*_d(.01)},"cubic-decimeters":{inBaseUnits:1e3*_d(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*_d(1e3)},"cubic-inches":{inBaseUnits:1e3*_d(.0254)},"cubic-feet":{inBaseUnits:1e3*_d(.3048)},"cubic-yards":{inBaseUnits:1e3*_d(.9144)},"cubic-miles":{inBaseUnits:1e3*_d(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},jbe=(()=>{const e={};for(const t in f_)for(const i in f_[t].units)e[i]=t;return e})();function zbe(e,t,i){return e*f_[i].units[t].inBaseUnits}function Vbe(e,t,i){return e/f_[i].units[t].inBaseUnits}const tie=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],Ube=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function Zy(e){const t=jbe[e];if(!t)throw new Error("unknown type");return t}function yU(e,t=null){return t=t||Zy(e),f_[t].baseUnit===e}function Ut(e,t,i){if(t===i)return e;const r=Zy(t);if(r!==Zy(i))throw new Error("incompatible units");const n=yU(t,r)?e:zbe(e,t,r);return yU(i,r)?n:Vbe(n,i,r)}function Gbe(e){switch(e){case"metric":return"meters";case"imperial":return"feet";default:return e}}function dit(e){return Gbe(e)}function pit(e){switch(e){case"metric":return"square-meters";case"imperial":return"square-feet";default:return e}}function iie(e,t){const i=Ut(e,t,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function rie(e,t){const i=Ut(e,t,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function nie(e,t){const i=Ut(e,t,"feet");return Math.abs(i)<1e3?"feet":"miles"}function sie(e,t){const i=Ut(e,t,"feet");return Math.abs(i)<1e5?"feet":"miles"}function Bbe(e,t){const i=Ut(e,t,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function qbe(e,t){const i=Ut(e,t,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function Hbe(e,t,i){return Ut(e,t,"meters")/(i*Math.PI/180)}function oie(e){return Dbe.fromJSON(e.toLowerCase())||null}function Rv(e){if(e!=null&&!Mbe(e))return 1;const t=xu(e);return t>1e5?1:t}function aie(e){return xu(e)>=Yte(e).metersPerDegree?"meters":hS(e)}function xu(e,t=br.metersPerDegree){return Wbe(e,!0)??t}function Wbe(e,t=!1){const i=(e==null?void 0:e.wkid)??null,r=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let n=null;if(i){if(V6(i))return Ic.metersPerDegree;if(U6(i))return hf.metersPerDegree;n=xy.values[xy[i]],!n&&t&&Fbe.has(i)&&(n=Nbe)}else r&&(cie(r)?n=mU(Qte.exec(r),n):uie(r)&&(n=mU(eie.exec(r),n)));return n}function fit(e){return cS(e)?1:xu(e)}function mU(e,t){return e!=null&&e[1]?lie(e[1]):t}function lie(e){return parseFloat(e.split(",")[1])}function hS(e){const t=(e==null?void 0:e.wkid)??null,i=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let r=null;if(t)r=xy.units[xy[t]];else if(i){const n=cie(i)?Qte:uie(i)?eie:null;if(n){const o=n.exec(i);o!=null&&o[1]&&(r=Kbe(o[1]))}}return r!=null?oie(r):null}function yit(e){const t=hS(e);return t!=null&&tie.includes(t)?t:null}function Zbe(e){const t=aie(e);return t!=null&&tie.includes(t)?t:null}function mit(e){const t=hS(e);return t==null?null:Ube.get(t)}function uie(e){return/^GEOCCS/i.test(e)}function cie(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const Jbe=1e-7;function Kbe(e){const t=/[\\"']{1}([^\\"']+)/.exec(e);let i=t==null?void 0:t[1];if(!i||!xy.units.includes(i)){const r=lie(e);i=null;const n=xy.values;for(let o=0;o<n.length;++o)if(Math.abs(r-n[o])<Jbe){i=xy.units[o];break}}return i}function git(e){const t=hS(e);if(t==null)return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"chains":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}const Ybe={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},Xbe={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},Qbe={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},e3e=_n()(Ybe),t3e=_n()(Xbe),vit=_n()(Qbe);function Pe(e,t,i){let r,n;return t===void 0?(n=e,r=[void 0]):typeof t!="string"?(n=e,r=[void 0],i=t):(n=t,r=Array.isArray(e)?e:[e]),(o,u)=>{const f=o.constructor.prototype;for(const g of r){const b=Nee(o,g,n);b.write&&typeof b.write=="object"||(b.write={}),i&&(b.write.target=i),b.write.writer=f[u]}}}var Ru;let mi=Ru=class extends be{static fromJSON(e){if(!e)return null;if((e==null?void 0:e.wkid)===102100)return Ru.WebMercator;if((e==null?void 0:e.wkid)===4326)return Ru.WGS84;const t=new Ru;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return Wy(this)}get isWebMercator(){return bu(this)}get isGeographic(){return cS(this)}get isWrappable(){return Abe(this)}get metersPerUnit(){return xu(this)}get unit(){return hS(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===Ru.WGS84)return new Ru(Jte);if(this===Ru.WebMercator)return new Ru(Kte);const e=new Ru;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=he(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:r}=e.imageCoordinateSystem,n=this.imageCoordinateSystem;return t==null||r?JSON.stringify(n)===JSON.stringify(e.imageCoordinateSystem):i?n.id===t&&n.referenceServiceName===i:n.id===t}return pr(this,e)}toJSON(e){return this.write(void 0,e)}};mi.GCS_NAD_1927=null,mi.WGS84=null,mi.WebMercator=null,mi.PlateCarree=null,m([w({readOnly:!0})],mi.prototype,"isWGS84",null),m([w({readOnly:!0})],mi.prototype,"isWebMercator",null),m([w({readOnly:!0})],mi.prototype,"isGeographic",null),m([w({readOnly:!0})],mi.prototype,"isWrappable",null),m([w({type:Ot,json:{write:!0}})],mi.prototype,"latestWkid",void 0),m([w({readOnly:!0})],mi.prototype,"metersPerUnit",null),m([w({readOnly:!0})],mi.prototype,"unit",null),m([w({type:Ot,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],mi.prototype,"wkid",void 0),m([w({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],mi.prototype,"wkt",void 0),m([Pe("wkt"),Pe("web-scene","wkt")],mi.prototype,"writeWkt",null),m([w({type:String,json:{write:!1}})],mi.prototype,"wkt2",void 0),m([w({type:Ot,json:{write:!0}})],mi.prototype,"vcsWkid",void 0),m([w({type:Ot,json:{write:!0}})],mi.prototype,"latestVcsWkid",void 0),m([w()],mi.prototype,"imageCoordinateSystem",void 0),mi=Ru=m([H("esri.geometry.SpatialReference")],mi),mi.prototype.toJSON.isDefaultToJSON=!0,mi.GCS_NAD_1927=De.freeze(new mi({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),mi.WGS84=De.freeze(new mi(Jte)),mi.WebMercator=De.freeze(new mi(Kte)),mi.PlateCarree=De.freeze(new mi(kbe));const st=mi;let Pu=class extends be{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=st.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,i){if(t instanceof st)return t;if(t!=null){const r=new st;return r.read(t,i),r}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,i){this.cache[t]=i}};m([w()],Pu.prototype,"type",void 0),m([w({readOnly:!0})],Pu.prototype,"cache",null),m([w({readOnly:!0})],Pu.prototype,"extent",null),m([w({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Pu.prototype,"hasM",void 0),m([w({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Pu.prototype,"hasZ",void 0),m([w({type:st,json:{write:!0},value:st.WGS84})],Pu.prototype,"spatialReference",void 0),m([ke("spatialReference")],Pu.prototype,"readSpatialReference",null),Pu=m([H("esri.geometry.Geometry")],Pu);const dd=Pu,i3e=Object.prototype.toString;function r3e(e){const t="__accessorMetadata__"in e?ir(e):e;return function(...i){if(i.push(t),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return n3e.apply(this,i)}}function n3e(e,t,i,r){O6(e,t).cast=r}function s3e(e){return(t,i)=>{O6(t,e).cast=t[i]}}function St(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&i3e.call(e[0])==="[object Function]"?r3e(e[0]):e.length===1&&typeof e[0]=="string"?s3e(e[0]):void 0}const o3e=57.29577951308232,a3e=.017453292519943;function gU(e){return e*o3e}function vU(e){return e*a3e}function bit(e){return Math.PI/2-2*Math.atan(Math.exp(-e/br.radius))}function ZA(e){return e.wkid!=null||e.wkt!=null}const iM=[0,0];function tI(e,t,i,r,n){const o=e,u=n;if(u.spatialReference=i,"x"in o&&"x"in u)[u.x,u.y]=t(o.x,o.y,iM,r);else if("xmin"in o&&"xmin"in u)[u.xmin,u.ymin]=t(o.xmin,o.ymin,iM,r),[u.xmax,u.ymax]=t(o.xmax,o.ymax,iM,r);else if("paths"in o&&"paths"in u||"rings"in o&&"rings"in u){const f="paths"in o?o.paths:o.rings,g=[];let b;for(let E=0;E<f.length;E++){const I=f[E];b=[],g.push(b);for(let M=0;M<I.length;M++)b.push(t(I[M][0],I[M][1],[0,0],r)),I[M].length>2&&b[M].push(I[M][2]),I[M].length>3&&b[M].push(I[M][3])}"paths"in u?u.paths=g:u.rings=g}else if("points"in o&&"points"in u){const f=o.points,g=[];for(let b=0;b<f.length;b++)g[b]=t(f[b][0],f[b][1],[0,0],r),f[b].length>2&&g[b].push(f[b][2]),f[b].length>3&&g[b].push(f[b][3]);u.points=g}return n}function p9(e,t){const i=e&&(ZA(e)?e:e.spatialReference),r=t&&(ZA(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!i||!r)&&(!!pr(r,i)||bu(r)&&Wy(i)||bu(i)&&Wy(r))}function G6(e,t){if(e==null)return null;const i=e.spatialReference,r=t&&(ZA(t)?t:t.spatialReference);return p9(i,r)?pr(i,r)?he(e):bu(r)?tI(e,Cg,st.WebMercator,!1,he(e)):Wy(r)?tI(e,B6,st.WGS84,!1,he(e)):null:null}function Cg(e,t,i=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const r=vU(t);return i[0]=vU(e)*br.radius,i[1]=br.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function B6(e,t,i=[0,0],r=!1){if(e===p_[0])i[0]=-180;else if(e===p_[1])i[0]=180;else{const n=gU(e/br.radius);i[0]=r?n:n-360*Math.floor((n+180)/360)}return i[1]=gU(Math.PI/2-2*Math.atan(Math.exp(-t/br.radius))),i}function $c(e,t=!1,i=he(e)){return tI(e,Cg,st.WebMercator,t,i)}function Ag(e,t=!1,i=he(e)){return tI(e,B6,st.WGS84,t,i)}function hie(e,t){const i=e.x-t.x,r=e.y-t.y,n=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(i*i+r*r+n*n)}function l3e(e){var t;return((t=die(e,pie))==null?void 0:t[0])??null}function u3e(e){var t;return((t=die(e,pie))==null?void 0:t[1])??null}function die({x:e,y:t,spatialReference:i},r=[0,0]){if(i){if(bu(i))return B6(e,t,r);if(cS(i))return r[0]=e,r[1]=t,r}return null}const pie=[0,0];var f9;const rM=[0,0];function wU(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let qs=f9=class extends dd{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const i=e._get("spatialReference");t._set("spatialReference",De.isFrozen(i)?i:i.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,i,r,n){let o;if(Array.isArray(e))o=e,n=t,e=o[0],t=o[1],i=o[2],r=o[3];else if(e&&typeof e=="object"){if(o=e,e=o.x!=null?o.x:o.longitude,t=o.y!=null?o.y:o.latitude,i=o.z,r=o.m,(n=o.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new st(n)),o.longitude!=null||o.latitude!=null){if(o.longitude==null)Se.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(o.latitude==null)Se.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!o.declaredClass&&(n!=null&&n.isWebMercator)){const f=Cg(o.longitude,o.latitude,rM);e=f[0],t=f[1]}}}else wU(i)?(n=i,i=null):wU(r)&&(n=r,r=null);const u={x:e,y:t};return u.x==null&&u.y!=null?Se.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):u.y==null&&u.x!=null&&Se.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(u.spatialReference=n),i!=null&&(u.z=i),r!=null&&(u.m=r),u}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return u3e(this)}set latitude(e){const{spatialReference:t,x:i}=this;e!=null&&t&&(t.isWebMercator?this._set("y",Cg(i,e,rM)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return l3e(this)}set longitude(e){const{y:t,spatialReference:i}=this;e!=null&&i&&(i.isWebMercator?this._set("x",Cg(e,t,rM)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,i){t[i]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new f9;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return f9.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:i,z:r,m:n,spatialReference:o}=this,{z:u,m:f}=e;let{x:g,y:b,spatialReference:E}=e;if(!o.equals(E))if(o.isWebMercator&&E.isWGS84)[g,b]=Cg(g,b),E=o;else{if(!o.isWGS84||!E.isWebMercator)return!1;[g,b]=B6(g,b),E=o}return t===g&&i===b&&r===u&&n===f&&o.wkid===E.wkid}offset(e,t,i){return this.x+=e,this.y+=t,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const e=no(this.spatialReference);if(!e)return this;let t=this.x;const[i,r]=e.valid,n=2*r;let o;return t>r?(o=Math.ceil(Math.abs(t-r)/n),t-=o*n):t<i&&(o=Math.ceil(Math.abs(t-i)/n),t+=o*n),this._set("x",t),this}distance(e){return hie(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};m([w({readOnly:!0})],qs.prototype,"cache",null),m([w({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],qs.prototype,"hasM",null),m([w({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],qs.prototype,"hasZ",null),m([w({type:Number})],qs.prototype,"latitude",null),m([w({type:Number})],qs.prototype,"longitude",null),m([w({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),St(e=>isNaN(e)?e:Qs(e))],qs.prototype,"x",void 0),m([Pe("x")],qs.prototype,"writeX",null),m([ke("x")],qs.prototype,"readX",null),m([w({type:Number,json:{write:!0}})],qs.prototype,"y",void 0),m([w({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],qs.prototype,"z",void 0),m([w({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],qs.prototype,"m",void 0),qs=f9=m([H("esri.geometry.Point")],qs),qs.prototype.toJSON.isDefaultToJSON=!0;const lt=qs,nM=[0,0];function dS(e,t){return t!=null&&Ks(e,t.x,t.y,t.z)}function _it(e,t){if(!t.points||t.points.length)return!1;for(const i of t.points)if(!Pv(e,i))return!1;return!0}function c3e(e,t){const{xmin:i,ymin:r,zmin:n,xmax:o,ymax:u,zmax:f}=t;return e.hasZ&&t.hasZ?Ks(e,i,r,n)&&Ks(e,i,u,n)&&Ks(e,o,u,n)&&Ks(e,o,r,n)&&Ks(e,i,r,f)&&Ks(e,i,u,f)&&Ks(e,o,u,f)&&Ks(e,o,r,f):Ks(e,i,r)&&Ks(e,i,u)&&Ks(e,o,u)&&Ks(e,o,r)}function Pv(e,t){return Ks(e,t[0],t[1])}function h3e(e,t){return Ks(e,t[0],t[1],t[2])}function Ks(e,t,i,r){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax&&(r==null||!e.hasZ||r>=e.zmin&&r<=e.zmax)}function LN(e,t){return nM[1]=t.y,nM[0]=t.x,d3e(e,nM)}function d3e(e,t){return ON(e.rings,t)}function ON(e,t){if(!e)return!1;if(p3e(e))return bU(!1,e,t);let i=!1;for(let r=0,n=e.length;r<n;r++)i=bU(i,e[r],t);return i}function p3e(e){return!Array.isArray(e[0][0])}function bU(e,t,i){const[r,n]=i;let o=e,u=0;for(let f=0,g=t.length;f<g;f++){u++,u===g&&(u=0);const[b,E]=t[f],[I,M]=t[u];(E<n&&M>=n||M<n&&E>=n)&&b+(n-E)/(M-E)*(I-b)<r&&(o=!o)}return o}function f3e(e,t){return dS(e,t)}function y3e(e,t){const i=e.hasZ&&t.hasZ;let r,n,o;if(e.xmin<=t.xmin){if(r=t.xmin,e.xmax<r)return!1}else if(r=e.xmin,t.xmax<r)return!1;if(e.ymin<=t.ymin){if(n=t.ymin,e.ymax<n)return!1}else if(n=e.ymin,t.ymax<n)return!1;if(i&&t.hasZ){if(e.zmin<=t.zmin){if(o=t.zmin,e.zmax<o)return!1}else if(o=e.zmin,t.zmax<o)return!1}return!0}function m3e(e,t){const{points:i,hasZ:r}=t,n=r?h3e:Pv;for(const o of i)if(n(e,o))return!0;return!1}const Jy=[0,0],Ky=[0,0],Yy=[0,0],Xy=[0,0],g3e=[Jy,Ky,Yy,Xy],fie=[[Yy,Jy],[Jy,Ky],[Ky,Xy],[Xy,Yy]];function v3e(e,t){return w3e(e,t.rings)}function w3e(e,t){Jy[0]=e.xmin,Jy[1]=e.ymax,Ky[0]=e.xmax,Ky[1]=e.ymax,Yy[0]=e.xmin,Yy[1]=e.ymin,Xy[0]=e.xmax,Xy[1]=e.ymin;for(const i of g3e)if(ON(t,i))return!0;for(const i of t){if(!i.length)continue;let r=i[0];if(Pv(e,r))return!0;for(let n=1;n<i.length;n++){const o=i[n];if(Pv(e,o)||yie(r,o,fie))return!0;r=o}}return!1}function b3e(e,t){Jy[0]=e.xmin,Jy[1]=e.ymax,Ky[0]=e.xmax,Ky[1]=e.ymax,Yy[0]=e.xmin,Yy[1]=e.ymin,Xy[0]=e.xmax,Xy[1]=e.ymin;const i=t.paths;for(const r of i){if(!i.length)continue;let n=r[0];if(Pv(e,n))return!0;for(let o=1;o<r.length;o++){const u=r[o];if(Pv(e,u)||yie(n,u,fie))return!0;n=u}}return!1}const xn=[0,0];function _3e(e){for(let t=0;t<e.length;t++){const i=e[t];for(let n=0;n<i.length-1;n++){const o=i[n],u=i[n+1];for(let f=t+1;f<e.length;f++)for(let g=0;g<e[f].length-1;g++){const b=e[f][g],E=e[f][g+1];if(JA(o,u,b,E,xn)&&!(xn[0]===o[0]&&xn[1]===o[1]||xn[0]===b[0]&&xn[1]===b[1]||xn[0]===u[0]&&xn[1]===u[1]||xn[0]===E[0]&&xn[1]===E[1]))return!0}}const r=i.length;if(!(r<=4))for(let n=0;n<r-3;n++){let o=r-1;n===0&&(o=r-2);const u=i[n],f=i[n+1];for(let g=n+2;g<o;g++){const b=i[g],E=i[g+1];if(JA(u,f,b,E,xn)&&!(xn[0]===u[0]&&xn[1]===u[1]||xn[0]===b[0]&&xn[1]===b[1]||xn[0]===f[0]&&xn[1]===f[1]||xn[0]===E[0]&&xn[1]===E[1]))return!0}}}return!1}function yie(e,t,i){for(let r=0;r<i.length;r++)if(JA(e,t,i[r][0],i[r][1]))return!0;return!1}function JA(e,t,i,r,n){const[o,u]=e,[f,g]=t,[b,E]=i,[I,M]=r,k=I-b,L=o-b,P=f-o,D=M-E,j=u-E,z=g-u,V=D*P-k*z;if(V===0)return!1;const W=(k*j-D*L)/V,Q=(P*j-z*L)/V;return W>=0&&W<=1&&Q>=0&&Q<=1&&(n&&(n[0]=o+W*(f-o),n[1]=u+W*(g-u)),!0)}function S3e(e){switch(e){case"esriGeometryEnvelope":case"extent":return y3e;case"esriGeometryMultipoint":case"multipoint":return m3e;case"esriGeometryPoint":case"point":return f3e;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return v3e;case"esriGeometryPolyline":case"polyline":return b3e}}var Aa;function x3e(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Sd(e,t,i){return t==null?i:i==null?t:e(t,i)}let ln=Aa=class extends dd{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,i,r,n){return x3e(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?st.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:i,ymax:r,spatialReference:n??st.WGS84}}static fromBounds(e,t){return new Aa({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new Aa({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new lt({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new Aa;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&p9(t,i)&&(e=t.isWebMercator?$c(e):Ag(e,!0)),e.type==="point"?dS(this,e):e.type==="extent"&&c3e(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&p9(t,i)&&(e=t.isWebMercator?$c(e):Ag(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),i=this.width*t,r=this.height*t;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const n=(this.zmax-this.zmin)*t;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*t;this.mmin+=n,this.mmax-=n}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,i=e.spatialReference;return t&&i&&!pr(t,i)&&p9(t,i)&&(e=t.isWebMercator?$c(e):Ag(e,!0)),S3e(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,i){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Sd(Math.min,this.zmin,e.zmin),this.zmax=Sd(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Sd(Math.min,this.mmin,e.mmin),this.mmax=Sd(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Sd(Math.max,this.zmin,e.zmin),this.zmax=Sd(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Sd(Math.max,this.mmin,e.mmin),this.mmax=Sd(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=no(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,i=this._getCM(e);if(i){const r=t.isWebMercator?Ag(i):i;this.xmin-=i.x,this.xmax-=i.x,t.isWebMercator||(r.x=sM(r.x,e).x),this.spatialReference=new st(wu((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(e){let t=null;const[i,r]=e.valid,n=this.xmin,o=this.xmax;return n>=i&&n<=r&&o>=i&&o<=r||(t=this.center),t}_normalize(e,t,i){const r=this.spatialReference;if(!r)return this;const n=i??no(r);if(n==null)return this;const o=this._getParts(n).map(g=>g.extent);if(o.length<2)return o[0]||this;if(o.length>2)return e?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(e)return this._shiftCM(n);if(t)return o;let u=!0,f=!0;return o.forEach(g=>{g.hasZ||(u=!1),g.hasM||(f=!1)}),{rings:o.map(g=>{const b=[[g.xmin,g.ymin],[g.xmin,g.ymax],[g.xmax,g.ymax],[g.xmax,g.ymin],[g.xmin,g.ymin]];if(u){const E=(g.zmax-g.zmin)/2;for(let I=0;I<b.length;I++)b[I].push(E)}if(f){const E=(g.mmax-g.mmin)/2;for(let I=0;I<b.length;I++)b[I].push(E)}return b}),hasZ:u,hasM:f,spatialReference:r}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:n,ymax:o,spatialReference:u}=this,f=this.width,g=this.xmin,b=this.xmax;let E;e=e||no(u);const[I,M]=e.valid;E=sM(this.xmin,e);const k=E.x,L=E.frameId;E=sM(this.xmax,e);const P=E.x,D=E.frameId,j=k===P&&f>0;if(f>2*M){const z=new Aa(g<b?k:P,n,M,o,u),V=new Aa(I,n,g<b?P:k,o,u),W=new Aa(0,n,M,o,u),Q=new Aa(I,n,0,o,u),Z=[],ee=[];z.contains(W)&&Z.push(L),z.contains(Q)&&ee.push(L),V.contains(W)&&Z.push(D),V.contains(Q)&&ee.push(D);for(let ie=L+1;ie<D;ie++)Z.push(ie),ee.push(ie);t.push({extent:z,frameIds:[L]},{extent:V,frameIds:[D]},{extent:W,frameIds:Z},{extent:Q,frameIds:ee})}else k>P||j?t.push({extent:new Aa(k,n,M,o,u),frameIds:[L]},{extent:new Aa(I,n,P,o,u),frameIds:[D]}):t.push({extent:new Aa(k,n,P,o,u),frameIds:[L]});this.cache._parts=t}const i=this.hasZ,r=this.hasM;if(i||r){const n={};i&&(n.zmin=this.zmin,n.zmax=this.zmax),r&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let o=0;o<t.length;o++)t[o].extent.set(n)}return t}};function sM(e,t){const[i,r]=t.valid,n=2*r;let o,u=0;return e>r?(o=Math.ceil(Math.abs(e-r)/n),e-=o*n,u=o):e<i&&(o=Math.ceil(Math.abs(e-i)/n),e+=o*n,u=-o),{x:e,frameId:u}}m([w({readOnly:!0})],ln.prototype,"cache",null),m([w({readOnly:!0})],ln.prototype,"center",null),m([w({readOnly:!0})],ln.prototype,"extent",null),m([w({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],ln.prototype,"hasM",null),m([w({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],ln.prototype,"hasZ",null),m([w({readOnly:!0})],ln.prototype,"height",null),m([w({readOnly:!0})],ln.prototype,"width",null),m([w({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],ln.prototype,"xmin",void 0),m([w({type:Number,json:{write:!0}})],ln.prototype,"ymin",void 0),m([w({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],ln.prototype,"mmin",void 0),m([w({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ln.prototype,"zmin",void 0),m([w({type:Number,json:{write:!0}})],ln.prototype,"xmax",void 0),m([w({type:Number,json:{write:!0}})],ln.prototype,"ymax",void 0),m([w({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],ln.prototype,"mmax",void 0),m([w({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ln.prototype,"zmax",void 0),ln=Aa=m([H("esri.geometry.Extent")],ln),ln.prototype.toJSON.isDefaultToJSON=!0;const Ht=ln;function Nv(e,t,i=!1){let{hasM:r,hasZ:n}=e;Array.isArray(t)?t.length!==4||r||n?t.length===3&&i&&!r?(n=!0,r=!1):t.length===3&&r&&n&&(r=!1,n=!1):(r=!0,n=!0):(n=!n&&t.hasZ&&(!r||t.hasM),r=!r&&t.hasM&&(!n||t.hasZ)),e.hasZ=n,e.hasM=r}var KA;function _U(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}function E3e(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Nd=KA=class extends dd{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){var n;if(!e&&!t)return{};const i={};Array.isArray(e)?(i.points=e,i.spatialReference=t):E3e(e)?i.spatialReference=e:(e.points&&(i.points=e.points),e.spatialReference&&(i.spatialReference=e.spatialReference),e.hasZ&&(i.hasZ=e.hasZ),e.hasM&&(i.hasM=e.hasM));const r=(n=i.points)==null?void 0:n[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new Ht,i=this.hasZ,r=this.hasM,n=i?3:2,o=e[0],u=_U(Math.min),f=_U(Math.max);let g,b,E,I,[M,k]=o,[L,P]=o;for(let D=0,j=e.length;D<j;D++){const z=e[D],[V,W]=z;if(M=u(M,V),k=u(k,W),L=f(L,V),P=f(P,W),i&&z.length>2){const Q=z[2];g=u(g,Q),E=f(E,Q)}if(r&&z.length>n){const Q=z[n];b=u(b,Q),I=f(I,Q)}}return t.xmin=M,t.ymin=k,t.xmax=L,t.ymax=P,t.spatialReference=this.spatialReference,i?(t.zmin=g,t.zmax=E):(t.zmin=void 0,t.zmax=void 0),r?(t.mmin=b,t.mmax=I):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=he(this.points)}addPoint(e){return Nv(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:he(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new KA(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],i={x:t[0],y:t[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=t[2],r=3),this.hasM&&(i.m=t[r]),new lt(i)}removePoint(e){if(!this._validateInputs(e))return null;const t=new lt(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(Nv(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};m([w({readOnly:!0})],Nd.prototype,"cache",null),m([w()],Nd.prototype,"extent",null),m([w({type:[[Number]],json:{write:{isRequired:!0}}})],Nd.prototype,"points",void 0),m([Pe("points")],Nd.prototype,"writePoints",null),Nd=KA=m([H("esri.geometry.Multipoint")],Nd),Nd.prototype.toJSON.isDefaultToJSON=!0;const w2=Nd;function Sit(e){const t=[];for(e.reset();e.nextPath();){const i=[];for(;e.nextPoint();)i.push([e.x,e.y]);t.push(i)}return e.reset(),t}function I3e(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}var rf;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(rf||(rf={}));function SU(e){if(!e)return null;if(Array.isArray(e))return e;const t=e.hasZ,i=e.hasM;if(e.type==="point")return i&&t?[e.x,e.y,e.z,e.m]:t?[e.x,e.y,e.z]:i?[e.x,e.y,e.m]:[e.x,e.y];if(e.type==="polygon")return e.rings.slice();if(e.type==="polyline")return e.paths.slice();if(e.type==="multipoint")return e.points.slice();if(e.type==="extent"){const r=e.clone().normalize();if(!r)return null;let n=!1,o=!1;return r.forEach(u=>{u.hasZ&&(n=!0),u.hasM&&(o=!0)}),r.map(u=>{const f=[[u.xmin,u.ymin],[u.xmin,u.ymax],[u.xmax,u.ymax],[u.xmax,u.ymin],[u.xmin,u.ymin]];if(n&&u.hasZ){const g=.5*(u.zmax-u.zmin);for(let b=0;b<f.length;b++)f[b].push(g)}if(o&&u.hasM){const g=.5*(u.mmax-u.mmin);for(let b=0;b<f.length;b++)f[b].push(g)}return f})}return null}function q6(e,t){const i=t[0]-e[0],r=t[1]-e[1];if(e.length>2&&t.length>2){const n=e[2]-t[2];return Math.sqrt(i*i+r*r+n*n)}return Math.sqrt(i*i+r*r)}function mie(e,t,i){const r=e[0]+i*(t[0]-e[0]),n=e[1]+i*(t[1]-e[1]);return e.length>2&&t.length>2?[r,n,e[2]+i*(t[2]-e[2])]:[r,n]}function T3e(e,t,i,r){return $3e(e,t,i[r],i[r+1])}function $3e(e,t,i,r){const[n,o]=t,[u,f]=i,[g,b]=r,E=g-u,I=b-f,M=E*E+I*I,k=(n-u)*E+(o-f)*I,L=Math.min(1,Math.max(0,k/M));return e[0]=u+E*L,e[1]=f+I*L,e}function xit(e,t,i,r,n,o){let u=i,f=r,g=n-u,b=o-f;if(g!==0||b!==0){const E=((e-u)*g+(t-f)*b)/(g*g+b*b);E>1?(u=n,f=o):E>0&&(u+=g*E,f+=b*E)}return g=e-u,b=t-f,g*g+b*b}function gie(e,t){return mie(e,t,.5)}function Eit(e){const t=e.length;let i=0;for(let r=0;r<t-1;++r)i+=q6(e[r],e[r+1]);return i}function Iit(e,t){if(t<=0)return e[0];const i=e.length;let r=0;for(let n=0;n<i-1;++n){const o=q6(e[n],e[n+1]);if(t-r<o){const u=(t-r)/o;return mie(e[n],e[n+1],u)}r+=o}return e[i-1]}function vie(e,t=rf.X,i=rf.Y){let r=0;const n=e.length;let o=e[0];for(let u=1;u<n;u++){const f=e[u];r+=(f[t]-o[t])*(f[i]+o[i]),o=f}if(!wie(e)){const u=e[0];r+=(u[t]-o[t])*(u[i]+o[i])}return r>=0}function wie(e){const t=e.length;return t<3||tS(e[0],e[t-1])}function Tit(e){"rings"in e&&(M3e(e),C3e(e))}function M3e(e){if(!("rings"in e))return!1;let t=!1;for(const i of e.rings)wie(i)||(i.push(i[0].slice()),t=!0);return t}function C3e(e){if(!("rings"in e)||e.rings.length===0||vie(e.rings[0]))return!1;for(const t of e.rings)t.reverse();return!0}function $it(e){return e.type!=="polygon"&&e.type!=="polyline"||A3e(e.type==="polygon"?e.rings:e.paths,e.spatialReference),e}function A3e(e,t){const i=no(t);if(!i)return;const r=i.valid[0],n=i.valid[1],o=n-r;for(const u of e){let f=1/0,g=-1/0;for(const E of u){const I=k3e(E[0],r,n);f=Math.min(f,I),g=Math.max(g,I),E[0]=I}const b=g-f;o-b<b&&u.forEach(E=>{E[0]<0&&(E[0]+=o)})}}function k3e(e,t,i){const r=i-t;return e<t?i-(t-e)%r:e>i?t+(e-t)%r:e}function Mit(e,t){if(e===t)return!0;if(e.type!==t.type)return!1;if(e.type==="point"||e.type==="mesh"||e.type==="extent")return!0;if(e.type==="multipoint")return e.points.length===t.points.length;const[i,r]=e.type==="polyline"?[e.paths,t.paths]:[e.rings,t.rings];return i.length===r.length&&i.every((n,o)=>n.length===r[o].length)}function Cit(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function L3e(e){return e?O3e(e.rings,e.hasZ??!1):null}function O3e(e,t){if(!(e!=null&&e.length))return null;const i=[],r=[],n=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let o=0,u=e.length;o<u;o++){const f=bie(e[o],t,n);f&&r.push(f)}if(r.sort((o,u)=>{let f=o[2]-u[2];return f===0&&t&&(f=o[4]-u[4]),f}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],t&&(i[2]=r[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||t&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){const o=e[0]&&e[0].length?R3e(e[0],t):null;if(!o)return null;i[0]=o[0],i[1]=o[1],t&&o.length>2&&(i[2]=o[2])}return i}function bie(e,t,i){let r=0,n=0,o=0,u=0,f=0;const g=e.length?e[0][0]:0,b=e.length?e[0][1]:0,E=e.length&&t?e[0][2]:0;for(let M=0;M<e.length;M++){const k=e[M],L=e[(M+1)%e.length],[P,D,j]=k,z=P-g,V=D-b,[W,Q,Z]=L,ee=W-g,ie=Q-b,oe=z*ie-ee*V;if(u+=oe,r+=(z+ee)*oe,n+=(V+ie)*oe,t&&k.length>2&&L.length>2){const le=j-E,xe=Z-E,$e=z*xe-ee*le;o+=(le+xe)*$e,f+=$e}P<i[0]&&(i[0]=P),P>i[1]&&(i[1]=P),D<i[2]&&(i[2]=D),D>i[3]&&(i[3]=D),t&&(j<i[4]&&(i[4]=j),j>i[5]&&(i[5]=j))}if(u>0&&(u*=-1),f>0&&(f*=-1),!u)return null;u*=.5,f*=.5;const I=[r/(6*u)+g,n/(6*u)+b,u];return t&&(i[4]===i[5]||f===0?(I[3]=(i[4]+i[5])/2,I[4]=0):(I[3]=o/(6*f)+E,I[4]=f)),I}function Ait(e,t){let i=0,r=0,n=0;e.nextPoint();const o=e.pathSize?e.x:0,u=e.pathSize?e.y:0;for(let f=0;f<e.pathSize;f++){e.seekInPath(f);const g=[e.x,e.y];e.seekInPath((f+1)%e.pathSize);const b=[e.x,e.y],[E,I]=g,M=E-o,k=I-u,[L,P]=b,D=L-o,j=P-u,z=M*j-D*k;n+=z,i+=(M+D)*z,r+=(k+j)*z,E<t[0]&&(t[0]=E),E>t[1]&&(t[1]=E),I<t[2]&&(t[2]=I),I>t[3]&&(t[3]=I)}return n>0&&(n*=-1),n?(n*=.5,[i/(6*n)+o,r/(6*n)+u,n]):null}function R3e(e,t){const i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let n=0,o=0,u=0,f=0;for(let g=0,b=e.length;g<b-1;g++){const E=e[g],I=e[g+1];if(E&&I){i[0]=E[0],i[1]=E[1],r[0]=I[0],r[1]=I[1],t&&E.length>2&&I.length>2&&(i[2]=E[2],r[2]=I[2]);const M=q6(i,r);if(M){n+=M;const k=gie(E,I);o+=M*k[0],u+=M*k[1],t&&k.length>2&&(f+=M*k[2])}}}return n>0?t?[o/n,u/n,f/n]:[o/n,u/n]:e.length?e[0]:null}function P3e(e){const{hasZ:t,totalSize:i}=e;if(i===0)return null;const r=[],n=[],o=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const u=bie(I3e(e),e.hasZ,o);u&&n.push(u)}if(n.sort((u,f)=>{let g=u[2]-f[2];return g===0&&t&&(g=u[4]-f[4]),g}),n.length&&(r[0]=n[0][0],r[1]=n[0][1],t&&(r[2]=n[0][3]),(r[0]<o[0]||r[0]>o[1]||r[1]<o[2]||r[1]>o[3]||t&&(r[2]<o[4]||r[2]>o[5]))&&(r.length=0)),!r.length){e.reset(),e.nextPath();const u=e.pathSize?N3e(e):null;if(!u)return null;r[0]=u[0],r[1]=u[1],t&&u.length>2&&(r[2]=u[2])}return r}function N3e(e){const{hasZ:t}=e,i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let n=0,o=0,u=0,f=0;if(e.nextPoint()){let g=e.x,b=e.y,E=e.z;for(;e.nextPoint();){const I=e.x,M=e.y,k=e.z;i[0]=g,i[1]=b,r[0]=I,r[1]=M,t&&(i[2]=E,r[2]=k);const L=q6(i,r);if(L){n+=L;const P=gie(i,r);o+=L*P[0],u+=L*P[1],t&&P.length>2&&(f+=L*P[2])}g=I,b=M,E=k}}return n>0?t?[o/n,u/n,f/n]:[o/n,u/n]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const F3e=1e-6;function kit(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<F3e){const n=P3e(e);return n?[n[0],n[1]]:null}const i=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const r=[e.x,e.y];for(e.reset();e.nextPath();)j3e(i,r,e);return i[0]*=1/t,i[1]*=1/t,i[0]+=r[0],i[1]+=r[1],i}const D3e=1/3;function j3e(e,t,i){if(!e||!i||i.pathSize<3)return null;i.nextPoint();const r=i.x,n=i.y;i.nextPoint();let o,u=i.x-r,f=i.y-n,g=0,b=0;for(;i.nextPoint();)g=i.x-r,b=i.y-n,o=.5*D3e*(g*f-b*u),e[0]+=o*(u+g),e[1]+=o*(f+b),u=g,f=b;const E=i.getCurrentRingArea(),I=[r,n];return I[0]-=t[0],I[1]-=t[1],I[0]*=E,I[1]*=E,e[0]+=I[0],e[1]+=I[1],e}const xU=new Float32Array(1);function Lit(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function oo(e,t,i){return Math.min(Math.max(e,t),i)}function Oit(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function qw(e,t,i){return e+(t-e)*i}function Rit(e,t,i,r,n){return qw(r,n,(e-t)/(i-t))}function H6(e){return e*Math.PI/180}function _ie(e){return 180*e/Math.PI}function Pit(e,t=1e-6){return(e<0?-1:1)/Math.max(Math.abs(e),t)}function RN(e){return Math.acos(oo(e,-1,1))}function PN(e){return Math.asin(oo(e,-1,1))}function ev(e,t,i=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=i}const iI=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function YA(e){return iI.setFloat64(0,e),iI.getBigInt64(0)}function z3e(e){return iI.setBigInt64(0,e),iI.getFloat64(0)}const y9=BigInt("1000000"),V3e=Sie(1);function Sie(e){const t=YA(e=Math.abs(e)),i=z3e(t<=y9?y9:t-y9);return Math.abs(e-i)}function Nit(e,t,i=V3e){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(i!=null&&Sie(Math.min(Math.abs(e),Math.abs(t)))<i)return Math.abs(e-t)<=i;const r=YA(e),n=YA(t);return r<0!=n<0?!1:!((r<n?n-r:r-n)>y9)}function Fit(e){return xie(Math.max(-EU,Math.min(e,EU)))}function xie(e){return xU[0]=e,xU[0]}function Dit(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],r=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(ev(t,1)&&ev(i,1)&&ev(r,1))}const EU=xie(34028234663852886e22);function jit(e,t,i){if(i===void 0||+i==0)return Math[e](t);if(t=+t,i=+i,isNaN(t)||typeof i!="number"||i%1!=0)return NaN;let r=t.toString().split("e");return r=(t=Math[e](+(r[0]+"e"+(r[1]?+r[1]-i:-i)))).toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+i:i))}function to(e=B3e){return[e[0],e[1],e[2],e[3]]}function Eie(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function zit(e,t,i,r,n=to()){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n}function Vit(e,t=to()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function Uit(e,t){return new Ht({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function Git(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function Bit(e,t,i){if(t!=null)if("length"in t)XA(t)?(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[2]),i[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[0]),i[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":i[0]=Math.min(e[0],t.xmin),i[1]=Math.min(e[1],t.ymin),i[2]=Math.max(e[2],t.xmax),i[3]=Math.max(e[3],t.ymax);break;case"point":i[0]=Math.min(e[0],t.x),i[1]=Math.min(e[1],t.y),i[2]=Math.max(e[2],t.x),i[3]=Math.max(e[3],t.y)}else Eie(i,e)}function qit(e,t,i=e){const r=t.length;let n=e[0],o=e[1],u=e[2],f=e[3];for(let g=0;g<r;g++){const b=t[g];n=Math.min(n,b[0]),o=Math.min(o,b[1]),u=Math.max(u,b[0]),f=Math.max(f,b[1])}return i[0]=n,i[1]=o,i[2]=u,i[3]=f,i}function Hit(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function Iie(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function Tie(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function Wit(e){return Iie(e)*Tie(e)}function Zit(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function Jit(e,t){return U3e(e,t.x,t.y)}function U3e(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function Kit(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function G3e(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function Yit(e,t,i,r=e){return r[0]=e[0]+t,r[1]=e[1]+i,r[2]=e[2]+t,r[3]=e[3]+i,r}function Xit(e){return e?Eie(e,IU):to(IU)}function XA(e){return e!=null&&e.length===4}function Qit(e,t){return XA(e)&&XA(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const IU=[1/0,1/0,-1/0,-1/0],B3e=[0,0,0,0];function $ie(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function Mie(e){return e.points!==void 0}function Cie(e){return e.x!==void 0&&e.y!==void 0}function Aie(e){return e.paths!==void 0}function kie(e){return e.rings!==void 0}function Lie(e){function t(i,r){return i==null?r:r==null?i:e(i,r)}return t}const Dp=Lie(Math.min),jp=Lie(Math.max);function ert(e,t){return Aie(t)?Fv(e,t.paths,!1,!1):kie(t)?Fv(e,t.rings,!1,!1):Mie(t)?NN(e,t.points,!1,!1,!1,!1):$ie(t)?Oie(e,t):(Cie(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function trt(e){let t,i,r,n;for(e.reset(),t=r=1/0,i=n=-1/0;e.nextPath();){const o=q3e(e);t=Math.min(o[0],t),r=Math.min(o[1],r),i=Math.max(o[2],i),n=Math.max(o[3],n)}return to([t,r,i,n])}function q3e(e){let t,i,r,n;for(t=r=1/0,i=n=-1/0;e.nextPoint();)t=Math.min(e.x,t),r=Math.min(e.y,r),i=Math.max(e.x,i),n=Math.max(e.y,n);return to([t,r,i,n])}function irt(e,t){return Aie(t)?Fv(e,t.paths,!0,!1):kie(t)?Fv(e,t.rings,!0,!1):Mie(t)?NN(e,t.points,!0,!1,!0,!1):$ie(t)?Oie(e,t,!0,!1,!0,!1):(Cie(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function Fv(e,t,i,r){const n=i?3:2;if(!t.length||!t[0].length)return null;let o,u,f,g,[b,E]=t[0][0],[I,M]=t[0][0];for(let k=0;k<t.length;k++){const L=t[k];for(let P=0;P<L.length;P++){const D=L[P],[j,z]=D;if(b=Dp(b,j),E=Dp(E,z),I=jp(I,j),M=jp(M,z),i&&D.length>2){const V=D[2];o=Dp(o,V),u=jp(u,V)}if(r&&D.length>n){const V=D[n];f=Dp(o,V),g=jp(u,V)}}}return i?r?(e[0]=b,e[1]=E,e[2]=o,e[3]=f,e[4]=I,e[5]=M,e[6]=u,e[7]=g,e.length=8,e):(e[0]=b,e[1]=E,e[2]=o,e[3]=I,e[4]=M,e[5]=u,e.length=6,e):r?(e[0]=b,e[1]=E,e[2]=f,e[3]=I,e[4]=M,e[5]=g,e.length=6,e):(e[0]=b,e[1]=E,e[2]=I,e[3]=M,e.length=4,e)}function Oie(e,t,i,r,n,o){const u=t.xmin,f=t.xmax,g=t.ymin,b=t.ymax;let E=t.zmin,I=t.zmax,M=t.mmin,k=t.mmax;return n?(E=E||0,I=I||0,o?(M=M||0,k=k||0,e[0]=u,e[1]=g,e[2]=E,e[3]=M,e[4]=f,e[5]=b,e[6]=I,e[7]=k,e):(e[0]=u,e[1]=g,e[2]=E,e[3]=f,e[4]=b,e[5]=I,e)):o?(M=M||0,k=k||0,e[0]=u,e[1]=g,e[2]=M,e[3]=f,e[4]=b,e[5]=k,e):(e[0]=u,e[1]=g,e[2]=f,e[3]=b,e)}function NN(e,t,i,r,n,o){const u=i?3:2,f=r&&o,g=i&&n;if(!t.length||!t[0].length)return null;let b,E,I,M,[k,L]=t[0],[P,D]=t[0];for(let j=0;j<t.length;j++){const z=t[j],[V,W]=z;if(k=Dp(k,V),L=Dp(L,W),P=jp(P,V),D=jp(D,W),g&&z.length>2){const Q=z[2];b=Dp(b,Q),E=jp(E,Q)}if(f&&z.length>u){const Q=z[u];I=Dp(b,Q),M=jp(E,Q)}}return n?(b=b||0,E=E||0,o?(I=I||0,M=M||0,e[0]=k,e[1]=L,e[2]=b,e[3]=I,e[4]=P,e[5]=D,e[6]=E,e[7]=M,e):(e[0]=k,e[1]=L,e[2]=b,e[3]=P,e[4]=D,e[5]=E,e)):o?(I=I||0,M=M||0,e[0]=k,e[1]=L,e[2]=I,e[3]=P,e[4]=D,e[5]=M,e):(e[0]=k,e[1]=L,e[2]=P,e[3]=D,e)}function H3e(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function W3e(e){return e.points!==void 0}function Z3e(e){return e.x!==void 0&&e.y!==void 0}function J3e(e){return e.paths!==void 0}function K3e(e){return e.rings!==void 0}const FN=[];function Rie(e,t,i,r){return{xmin:e,ymin:t,xmax:i,ymax:r}}function Pie(e,t,i,r,n,o){return{xmin:e,ymin:t,zmin:i,xmax:r,ymax:n,zmax:o}}function Nie(e,t,i,r,n,o){return{xmin:e,ymin:t,mmin:i,xmax:r,ymax:n,mmax:o}}function Fie(e,t,i,r,n,o,u,f){return{xmin:e,ymin:t,zmin:i,mmin:r,xmax:n,ymax:o,zmax:u,mmax:f}}function DN(e,t=!1,i=!1){return t?i?Fie(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):Pie(e[0],e[1],e[2],e[3],e[4],e[5]):i?Nie(e[0],e[1],e[2],e[3],e[4],e[5]):Rie(e[0],e[1],e[2],e[3])}function rrt(e){return e?H3e(e)?e:Z3e(e)?X3e(e):K3e(e)?Die(e):J3e(e)?jie(e):W3e(e)?Y3e(e):null:null}function Y3e(e){const{hasZ:t,hasM:i,points:r}=e;return DN(NN(FN,r,t??!1,i??!1),t,i)}function X3e(e){const{x:t,y:i,z:r,m:n}=e,o=n!=null;return r!=null?o?Fie(t,i,r,n,t,i,r,n):Pie(t,i,r,t,i,r):o?Nie(t,i,n,t,i,n):Rie(t,i,t,i)}function Die(e){const{hasZ:t,hasM:i,rings:r}=e,n=Fv(FN,r,t??!1,i??!1);return n?DN(n,t,i):null}function jie(e){const{hasZ:t,hasM:i,paths:r}=e,n=Fv(FN,r,t??!1,i??!1);return n?DN(n,t,i):null}var m9;function TU(e){return!Array.isArray(e[0])}function Q3e(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function e_e(e){var o,u;if(!e)return;let{rings:t,hasM:i,hasZ:r,spatialReference:n}=e;switch(t??(t=[]),Q3e(t)&&(t=[t]),(u=(o=t[0])==null?void 0:o[0])==null?void 0:u.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return n??(n=st.WGS84),{...e,hasM:i,hasZ:r,rings:t,spatialReference:n}}let sc=m9=class extends dd{static fromExtent(e){const t=e.clone().normalize(),{spatialReference:i}=e;let r=!1,n=!1;for(const u of t)u.hasZ&&(r=!0),u.hasM&&(n=!0);const o={rings:t.map(u=>{const f=[[u.xmin,u.ymin],[u.xmin,u.ymax],[u.xmax,u.ymax],[u.xmax,u.ymin],[u.xmin,u.ymin]];if(r&&u.hasZ){const g=u.zmin+.5*(u.zmax-u.zmin);for(let b=0;b<f.length;b++)f[b].push(g)}if(n&&u.hasM){const g=u.mmin+.5*(u.mmax-u.mmin);for(let b=0;b<f.length;b++)f[b].push(g)}return f}),spatialReference:i};return r&&(o.hasZ=!0),n&&(o.hasM=!0),new m9(o)}constructor(e){super(e_e(e)),this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=L3e(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new lt;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=Die(this);if(!t)return null;const i=new Ht(t);return i.spatialReference=e,i}get isSelfIntersecting(){return _3e(this.rings)}writeRings(e,t){t.rings=he(this.rings)}addRing(e){if(!e)return;const t=this.rings,i=t.length;if(TU(e)){const r=[];for(let n=0,o=e.length;n<o;n++)r[n]=e[n].toArray();t[i]=r}else t[i]=e.slice();return this.notifyChange("rings"),this}clone(){const e=new m9;return e.spatialReference=this.spatialReference,e.rings=he(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,i=e.spatialReference;if(t!=null!=(i!=null)||t!=null&&i!=null&&!t.equals(i)||this.rings.length!==e.rings.length)return!1;const r=([n,o,u,f],[g,b,E,I])=>n===g&&o===b&&(u==null&&E==null||u===E)&&(f==null&&I==null||f===I);for(let n=0;n<this.rings.length;n++){const o=this.rings[n],u=e.rings[n];if(!tS(o,u,r))return!1}return!0}contains(e){if(!e)return!1;const t=G6(e,this.spatialReference);return LN(this,t??e)}isClockwise(e){const t=TU(e)?e.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):e;return vie(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.rings[e][t],r=this.hasZ,n=this.hasM;return r&&!n?new lt(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new lt(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new lt(i[0],i[1],i[2],i[3],this.spatialReference):new lt(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Nv(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e].splice(t,0,i),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new lt(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],i=this.spatialReference,r=t.map(n=>new lt(n,i));return this.notifyChange("rings"),r}setPoint(e,t,i){return this._validateInputs(e,t)?(Nv(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e][t]=i,this.notifyChange("rings"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const r=this.rings[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};m([w({readOnly:!0})],sc.prototype,"cache",null),m([w({readOnly:!0})],sc.prototype,"centroid",null),m([w({readOnly:!0})],sc.prototype,"extent",null),m([w({readOnly:!0})],sc.prototype,"isSelfIntersecting",null),m([w({type:[[[Number]]],json:{write:{isRequired:!0}}})],sc.prototype,"rings",void 0),m([Pe("rings")],sc.prototype,"writeRings",null),sc=m9=m([H("esri.geometry.Polygon")],sc);const zs=sc;sc.prototype.toJSON.isDefaultToJSON=!0;var QA;function t_e(e){return!Array.isArray(e[0])}function i_e(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function r_e(e){var o,u;if(!e)return;let{paths:t,hasM:i,hasZ:r,spatialReference:n}=e;switch(t??(t=[]),i_e(t)&&(t=[t]),(u=(o=t[0])==null?void 0:o[0])==null?void 0:u.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return n??(n=st.WGS84),{...e,hasM:i,hasZ:r,paths:t,spatialReference:n}}let bp=QA=class extends dd{constructor(e){super(r_e(e)),this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=jie(this);if(!t)return null;const i=new Ht(t);return i.spatialReference=e,i}writePaths(e,t){t.paths=he(this.paths)}addPath(e){if(!e)return;const t=this.paths,i=t.length;if(t_e(e)){const r=[];for(let n=0,o=e.length;n<o;n++)r[n]=e[n].toArray();t[i]=r}else t[i]=e.slice();return this.notifyChange("paths"),this}clone(){const e=new QA;return e.spatialReference=this.spatialReference,e.paths=he(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.paths[e][t],r=this.hasZ,n=this.hasM;return r&&!n?new lt(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new lt(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new lt(i[0],i[1],i[2],i[3],this.spatialReference):new lt(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Nv(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e].splice(t,0,i),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],i=this.spatialReference,r=t.map(n=>new lt(n,i));return this.notifyChange("paths"),r}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new lt(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(e,t,i){return this._validateInputs(e,t)?(Nv(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e][t]=i,this.notifyChange("paths"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const r=this.paths[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};m([w({readOnly:!0})],bp.prototype,"cache",null),m([w({readOnly:!0})],bp.prototype,"extent",null),m([w({type:[[[Number]]],json:{write:{isRequired:!0}}})],bp.prototype,"paths",void 0),m([Pe("paths")],bp.prototype,"writePaths",null),bp=QA=m([H("esri.geometry.Polyline")],bp);const io=bp;bp.prototype.toJSON.isDefaultToJSON=!0;const n_e=_n()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),$U=_n()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function zie(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function Vie(e){return e.points!==void 0}function Uie(e){return e.x!==void 0&&e.y!==void 0}function jN(e){return e.paths!==void 0}function Ey(e){return e.rings!==void 0}function od(e){return e==null?null:e instanceof dd?e:Uie(e)?lt.fromJSON(e):jN(e)?io.fromJSON(e):Ey(e)?zs.fromJSON(e):Vie(e)?w2.fromJSON(e):zie(e)?Ht.fromJSON(e):null}function b2(e){return e?Uie(e)?"esriGeometryPoint":jN(e)?"esriGeometryPolyline":Ey(e)?"esriGeometryPolygon":zie(e)?"esriGeometryEnvelope":Vie(e)?"esriGeometryMultipoint":null:null}const s_e={esriGeometryPoint:lt,esriGeometryPolyline:io,esriGeometryPolygon:zs,esriGeometryEnvelope:Ht,esriGeometryMultipoint:w2,esriGeometryMultiPatch:zs};function o_e(e){return e&&s_e[e]||null}const mm={base:dd,key:"type",typeMap:{extent:Ht,multipoint:w2,point:lt,polyline:io,polygon:zs}};ul(mm);const It=e=>{let t=class extends e{clone(){var g;const i=zo(this);oS(i,"unable to clone instance of non-accessor class");const r=i.metadata,n=i.store,o={},u=new Map;for(const b in r){const E=r[b],I=n==null?void 0:n.originOf(b),M=E.clonable;if(E.readOnly||M===!1||I!==yt.USER&&I!==yt.DEFAULTS&&I!==yt.WEB_MAP&&I!==yt.WEB_SCENE)continue;const k=this[b];let L=null;L=typeof M=="function"?M(k):M==="reference"?k:yA(k),k!=null&&L==null||(I===yt.DEFAULTS?u.set(b,L):o[b]=L)}const f=new(Object.getPrototypeOf(this)).constructor(o);if(u.size){const b=(g=zo(f))==null?void 0:g.store;if(b)for(const[E,I]of u)b.set(E,I,yt.DEFAULTS)}return f}};return t=m([H("esri.core.Clonable")],t),t};let e8=class extends It(De){};e8=m([H("esri.core.Clonable")],e8);let t0=class extends e8{constructor(t){super(t),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(t){return t!=null&&this.row===t.row&&this.rows===t.rows&&this.column===t.column&&this.columns===t.columns}};m([w({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],t0.prototype,"row",void 0),m([w({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],t0.prototype,"column",void 0),m([w({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],t0.prototype,"rows",void 0),m([w({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],t0.prototype,"columns",void 0),t0=m([H("esri.CameraLayout")],t0);const Gie=t0;let W6=class{constructor(t,i){this.min=t,this.max=i,this.range=i-t}normalize(t,i=0,r=!1){return MU(this.range,this.min,this.max,t,i,r)}clamp(t,i=0){return oo(t-i,this.min,this.max)+i}monotonic(t,i,r){return t<i?i:i+t8(this.range,t-i,r)}minimalMonotonic(t,i,r){return MU(this.range,t,t+this.range,i,r)}center(t,i,r){return i=this.monotonic(t,i,r),this.normalize((t+i)/2,r)}diff(t,i,r){return this.monotonic(t,i,r)-t}shortestSignedDiff(t,i){t=this.normalize(t);const r=(i=this.normalize(i))-t,n=i<t?this.minimalMonotonic(t,i)-t:i-this.minimalMonotonic(i,t);return Math.abs(r)<Math.abs(n)?r:n}contains(t,i,r){return i=this.minimalMonotonic(t,i),(r=this.minimalMonotonic(t,r))>t&&r<i}};function MU(e,t,i,r,n=0,o=!1){return(r-=n)<t?r+=t8(e,t-r):r>i&&(r-=t8(e,r-i)),o&&r===i&&(r=t),r+n}function t8(e,t,i=0){return Math.ceil((t-i)/e)*e+i}const art=new W6(0,2*Math.PI),lrt=new W6(-Math.PI,Math.PI),zN=new W6(0,360);let Nu=class extends It(be){constructor(...t){super(...t),this.position=new lt([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new Gie}normalizeCtorArgs(t,i,r,n){if(t&&typeof t=="object"&&("x"in t||Array.isArray(t))){const o={position:t};return i!=null&&(o.heading=i),r!=null&&(o.tilt=r),n!=null&&(o.fov=n),o}return t}writePosition(t,i,r,n){const o=t.clone();o.x=Qs(t.x||0),o.y=Qs(t.y||0),o.z=t.hasZ?Qs(t.z||0):t.z,i[r]=o.write({},n)}readPosition(t,i){const r=new lt;return r.read(t,i),r.x=Qs(r.x||0),r.y=Qs(r.y||0),r.z=r.hasZ?Qs(r.z||0):r.z,r}equals(t){return t!=null&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)&&this.layout.equals(t.layout)}};m([w({type:lt,json:{write:{isRequired:!0}}})],Nu.prototype,"position",void 0),m([Pe("position")],Nu.prototype,"writePosition",null),m([ke("position")],Nu.prototype,"readPosition",null),m([w({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),St(e=>zN.normalize(Qs(e)))],Nu.prototype,"heading",void 0),m([w({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),St(e=>oo(Qs(e),-180,180))],Nu.prototype,"tilt",void 0),m([w({type:Number,nonNullable:!0,json:{default:55,write:!0}}),St(e=>oo(Qs(e,55),1,170))],Nu.prototype,"fov",void 0),m([w({type:Gie,nonNullable:!0,json:{read:!1,write:!1}})],Nu.prototype,"layout",void 0),Nu=m([H("esri.Camera")],Nu);const a_e=Nu;var i8;let Fd=i8=class extends be{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new i8({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};m([w({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:oM}}}}})],Fd.prototype,"rotation",void 0),m([St("rotation")],Fd.prototype,"castRotation",null),m([w({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:oM}}}}})],Fd.prototype,"scale",void 0),m([w({types:mm,json:{read:od,write:!0,origins:{"web-scene":{read:od,write:{overridePolicy:oM}}}}})],Fd.prototype,"targetGeometry",void 0),m([w({type:a_e,json:{write:!0}})],Fd.prototype,"camera",void 0),Fd=i8=m([H("esri.Viewpoint")],Fd);const Fn=Fd;function oM(){return{enabled:!this.camera}}let g9=class Bie{constructor(){this._emitter=new Bie.EventEmitter(this)}emit(t,i){return this._emitter.emit(t,i)}on(t,i){return this._emitter.on(t,i)}once(t,i){return this._emitter.once(t,i)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(n=null){this._target=n,this._listenersMap=null}clear(){var n;(n=this._listenersMap)==null||n.clear(),this._listenersMap=null}destroy(){this.clear()}emit(n,o){var b;let u=(b=this._listenersMap)==null?void 0:b.get(n);if(!u)return!1;const f=this._target||this;let g=!1;for(const E of u.slice()){const I="deref"in E?E.deref():E;I?I==null||I.call(f,o):g=!0}return g&&(u=u.filter(E=>!("deref"in E)||E.deref()!=null),this._listenersMap.set(n,u)),u.length>0}on(n,o){if(Array.isArray(n)){const f=n.map(g=>this.on(g,o));return p2(f)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const u=this._listenersMap.get(n)||[];return u.push(o),this._listenersMap.set(n,u),Yt(()=>{var b;const f=(b=this._listenersMap)==null?void 0:b.get(n),g=(f==null?void 0:f.indexOf(o))??-1;g>=0&&f.splice(g,1)})}once(n,o){const u=this.on(n,f=>{u.remove();const g="deref"in o?o.deref():o;g==null||g.call(null,f)});return u}hasEventListener(n){var u;const o=(u=this._listenersMap)==null?void 0:u.get(n);return o!=null&&o.length>0}}e.EventEmitter=t,e.EventedMixin=r=>{let n=class extends r{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(o,u){return this._emitter.emit(o,u)}on(o,u){return this._emitter.on(o,u)}once(o,u){return this._emitter.once(o,u)}hasEventListener(o){return this._emitter.hasEventListener(o)}};return n=m([H("esri.core.Evented")],n),n};let i=class extends De{constructor(){super(...arguments),this._emitter=new g9.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,n){return this._emitter.emit(r,n)}on(r,n){return this._emitter.on(r,n)}once(r,n){return this._emitter.once(r,n)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=m([H("esri.core.Evented.EventedAccessor")],i),e.EventedAccessor=i})(g9||(g9={}));const Us=g9;var li;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(li||(li={}));function VN(e){return(t,i)=>{t[i]=e}}let _2=class extends Yee{notify(){const t=this._observers;if(t&&t.length>0){const i=t.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}};var jh;let l_e=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}},u_e=class{constructor(t,i,r,n,o){this.target=t,this.added=i,this.removed=r,this.start=n,this.deleteCount=o}};const $a=new $f(l_e,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1});function CU(e){e&&typeof e=="object"&&"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}function aM(e){return e?e instanceof kh?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function lM(e){if(e!=null&&e.length)return e[0]}function c_e(e,t,i,r){const n=Math.min(e.length-i,t.length-r);let o=0;for(;o<n&&e[i+o]===t[r+o];)o++;return o}function qie(e,t,i,r){t&&t.forEach((n,o,u)=>{e.push(n),qie(e,i.call(r,n,o,u),i,r)})}const xd=new Set,Ed=new Set,Id=new Set,uM=new Map;let h_e=0,kh=jh=class extends Us.EventedAccessor{static isCollection(e){return e!=null&&e instanceof jh}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new _2,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:h_e++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof jh?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return et(this._observable),this._items}set items(e){this._emitBeforeChanges(li.ADD)||(this._splice(0,this.length,aM(e)),this._emitAfterChanges(li.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,t){if(this.destroyed)return Yt();if(e==="change"){const i=this._chgListeners,r={removed:!1,callback:t};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),Yt(()=>{r.removed=!0,i.splice(i.indexOf(r),1)})}return this._emitter.on(e,t)}once(e,t){const i="deref"in t?()=>t.deref():()=>t,r=this.on(e,n=>{var o;(o=i())==null||o.call(null,n),r.remove()});return r}add(e,t){if(et(this._observable),this._emitBeforeChanges(li.ADD))return this;const i=this.getNextIndex(t??null);return this._splice(i,0,[e]),this._emitAfterChanges(li.ADD),this}addMany(e,t=this._items.length){if(et(this._observable),!(e!=null&&e.length))return this;if(this._emitBeforeChanges(li.ADD))return this;const i=this.getNextIndex(t);return this._splice(i,0,aM(e)),this._emitAfterChanges(li.ADD),this}at(e){if(et(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(et(this._observable),!this.length||this._emitBeforeChanges(li.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(li.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return et(this._observable),this._createNewInstance({items:this._items.map(he)})}concat(...e){et(this._observable);const t=e.map(aM);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(et(this._observable),!this.length||this._emitBeforeChanges(li.REMOVE))return;const i=this._splice(0,this.length),r=i.length;for(let n=0;n<r;n++)e.call(t,i[n],n,i);this._emitAfterChanges(li.REMOVE)}destroyAll(){this.drain(CU)}destroyMany(e){const t=this.removeMany(e);return t.forEach(CU),t}every(e,t){return et(this._observable),this._items.every(e,t)}filter(e,t){let i;return et(this._observable),i=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:i})}find(e,t){return et(this._observable),this._items.find(e,t)}findIndex(e,t){return et(this._observable),this._items.findIndex(e,t)}flatten(e,t){et(this._observable);const i=[];return qie(i,this,e,t),new jh(i)}forEach(e,t){return et(this._observable),this._items.forEach(e,t)}getItemAt(e){return et(this._observable),this._items[e]}getNextIndex(e){et(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return et(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return et(this._observable),this._items.indexOf(e,t)}join(e=","){return et(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return et(this._observable),this._items.lastIndexOf(e,t)}map(e,t){et(this._observable);const i=this._items.map(e,t);return new jh({items:i})}reorder(e,t=this.length-1){et(this._observable);const i=this.indexOf(e);if(i!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(li.MOVE))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(li.MOVE)}return e}}pop(){if(et(this._observable),!this.length||this._emitBeforeChanges(li.REMOVE))return;const e=lM(this._splice(this.length-1,1));return this._emitAfterChanges(li.REMOVE),e}push(...e){return et(this._observable),this._emitBeforeChanges(li.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(li.ADD)),this.length}reduce(e,t){et(this._observable);const i=this._items;return arguments.length===2?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){et(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return et(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(et(this._observable),e<0||e>=this.length||this._emitBeforeChanges(li.REMOVE))return;const t=lM(this._splice(e,1));return this._emitAfterChanges(li.REMOVE),t}removeMany(e){if(et(this._observable),!(e!=null&&e.length)||this._emitBeforeChanges(li.REMOVE))return[];const t=e instanceof jh?e.toArray():e,i=this._items,r=[],n=t.length;for(let o=0;o<n;o++){const u=t[o],f=i.indexOf(u);if(f>-1){const g=1+c_e(t,i,o+1,f+1),b=this._splice(f,g);b&&b.length>0&&r.push.apply(r,b),o+=g-1}}return this._emitAfterChanges(li.REMOVE),r}reverse(){if(et(this._observable),this._emitBeforeChanges(li.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(li.MOVE),this}shift(){if(et(this._observable),!this.length||this._emitBeforeChanges(li.REMOVE))return;const e=lM(this._splice(0,1));return this._emitAfterChanges(li.REMOVE),e}slice(e=0,t=this.length){return et(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return et(this._observable),this._items.some(e,t)}sort(e){if(et(this._observable),!this.length||this._emitBeforeChanges(li.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(li.MOVE),this}splice(e,t,...i){et(this._observable);const r=(t?li.REMOVE:0)|(i.length?li.ADD:0);if(this._emitBeforeChanges(r))return[];const n=this._splice(e,t,i)||[];return this._emitAfterChanges(r),n}toArray(){return et(this._observable),this._items.slice()}toJSON(){return et(this._observable),this.toArray()}toLocaleString(){return et(this._observable),this._items.toLocaleString()}toString(){return et(this._observable),this._items.toString()}unshift(...e){return et(this._observable),!e.length||this._emitBeforeChanges(li.ADD)||(this._splice(0,0,e),this._emitAfterChanges(li.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const r=this._items,n=this.itemType;let o,u;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=uS(()=>this._dispatchChange())),e<0&&(e+=this.length),t){if(u=r.splice(e,t),this.hasEventListener("before-remove")){const f=$a.acquire();f.target=this,f.cancellable=!0;for(let g=0,b=u.length;g<b;g++)o=u[g],f.reset(o),this.emit("before-remove",f),f.defaultPrevented&&(u.splice(g,1),r.splice(e,0,o),e+=1,g-=1,b-=1);$a.release(f)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const f=$a.acquire();f.target=this,f.cancellable=!1;const g=u.length;for(let b=0;b<g;b++)f.reset(u[b]),this.emit("after-remove",f);$a.release(f)}}if(i!=null&&i.length){if(n){const E=[];for(const I of i){const M=n.ensureType(I);M==null&&I!=null||E.push(M)}i=E}const f=this.hasEventListener("before-add"),g=this.hasEventListener("after-add"),b=e===this.length;if(f||g){const E=$a.acquire();E.target=this,E.cancellable=!0;const I=$a.acquire();I.target=this,I.cancellable=!1;for(const M of i)f?(E.reset(M),this.emit("before-add",E),E.defaultPrevented||(b?r.push(M):r.splice(e++,0,M),this._set("length",r.length),g&&(I.reset(M),this.emit("after-add",I)))):(b?r.push(M):r.splice(e++,0,M),this._set("length",r.length),I.reset(M),this.emit("after-add",I));$a.release(I),$a.release(E)}else{if(b)for(const E of i)r.push(E);else r.splice(e,0,...i);this._set("length",r.length)}}if((i!=null&&i.length||u!=null&&u.length)&&this._notifyChangeEvent(i,u),this.hasEventListener("after-splice")){const f=new u_e(this,i,u,e,t);this.emit("after-splice",f)}return u}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=$a.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,$a.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=$a.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),$a.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const i=t.changes;xd.clear(),Ed.clear(),Id.clear();for(const{added:g,removed:b}of i){if(g)if(Id.size===0&&Ed.size===0)for(const E of g)xd.add(E);else for(const E of g)Ed.has(E)?(Id.add(E),Ed.delete(E)):Id.has(E)||xd.add(E);if(b)if(Id.size===0&&xd.size===0)for(const E of b)Ed.add(E);else for(const E of b)xd.has(E)?xd.delete(E):(Id.delete(E),Ed.add(E))}const r=eo.acquire();xd.forEach(g=>{r.push(g)});const n=eo.acquire();Ed.forEach(g=>{n.push(g)});const o=this._items,u=t.items,f=eo.acquire();if(Id.forEach(g=>{u.indexOf(g)!==o.indexOf(g)&&f.push(g)}),t.listeners&&(r.length||n.length||f.length)){const g={target:this,added:r,removed:n,moved:f},b=t.listeners.length;for(let E=0;E<b;E++){const I=t.listeners[E];I.removed||I.callback.call(this,g)}}eo.release(r),eo.release(n),eo.release(f)}xd.clear(),Ed.clear(),Id.clear()}};kh.ofType=e=>{if(!e)return jh;if(uM.has(e))return uM.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const r in e.typeMap){const n=e.typeMap[r].prototype.declaredClass;t?t+=` | ${n}`:t=n}let i=class extends jh{};return m([VN({Type:e,ensureType:typeof e=="function"?ir(e):ul(e)})],i.prototype,"itemType",void 0),i=m([H(`esri.core.Collection<${t}>`)],i),uM.set(e,i),i},m([w()],kh.prototype,"_updating",void 0),m([w()],kh.prototype,"length",void 0),m([w()],kh.prototype,"items",null),m([w({readOnly:!0})],kh.prototype,"updating",null),kh=jh=m([H("esri.core.Collection")],kh);const Oe=kh;function d_e(e,t,i){return Lo(e.map((r,n)=>t.apply(i,[r,n])))}async function p_e(e,t,i){return(await Lo(e.map((r,n)=>t.apply(i,[r,n])))).map(r=>r.value)}function UN(e){return{ok:!0,value:e}}function GN(e){return{ok:!1,error:e}}function f_e(e){return e!=null&&e.ok===!0?e.value:null}function y_e(e){return e!=null&&e.ok===!1?e.error:null}async function Z6(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return UN(await e)}catch(t){return GN(t)}}async function m_e(e){try{return UN(await e)}catch(t){return mc(t),GN(t)}}function pS(e,t){return new Dd(e,t)}let Dd=class extends De{get value(){return f_e(this._result)}get error(){return y_e(this._result)}get finished(){return this._result!=null}constructor(t,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=Ec(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=t(r),this.promise.then(n=>{this._result=UN(n),this._cleanup()},n=>{this._result=GN(n),this._cleanup()}),this._abortHandle=nl(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=tr(this._abortHandle),this._abortController=null}};m([w()],Dd.prototype,"value",null),m([w()],Dd.prototype,"error",null),m([w()],Dd.prototype,"finished",null),m([w()],Dd.prototype,"promise",void 0),m([w()],Dd.prototype,"_result",void 0),Dd=m([H("esri.core.asyncUtils.ReactiveTask")],Dd);function me(e,t,i={}){return BN(e,t,i,Hie)}function rn(e,t,i={}){return BN(e,t,i,Wie)}function BN(e,t,i={},r){let n=null;const o=i.once?(u,f)=>{r(u)&&(tr(n),t(u,f))}:(u,f)=>{r(u)&&t(u,f)};if(n=wwe(e,o,i.sync,i.equals),i.initial){const u=e();o(u,u)}return n}function Lr(e,t,i,r={}){let n=null,o=null,u=null;function f(){var E;n&&o&&(o.remove(),(E=r.onListenerRemove)==null||E.call(r,n),n=null,o=null)}function g(E){r.once&&r.once&&tr(u),i(E)}const b=me(e,(E,I)=>{var M;f(),P6(E)&&(n=E,o=aS(E,t,g),(M=r.onListenerAdd)==null||M.call(r,E))},{sync:r.sync,initial:!0});return u=Yt(()=>{b.remove(),f()}),u}function cl(e,t){return g_e(e,Wie,t)}function g_e(e,t,i){if(va(i))return Promise.reject(wi());const r=e();if(t!=null&&t(r))return Promise.resolve(r);let n=null;function o(){n=tr(n)}return new Promise((u,f)=>{n=p2([nl(i,()=>{o(),f(wi())}),BN(e,g=>{o(),u(g)},{sync:!1,once:!0},t??Hie)])})}function Hie(e){return!0}function Wie(e){return!!e}function v_e(e,t,i={}){let r=!1;const n=me(e,(o,u)=>{r||t(o,u)},i);return{remove(){n.remove()},pause(){r=!0},resume(){r=!1}}}function w_e(e,t){const i=new Oe,r=Lr(e,"after-splice",({added:n,start:o,deleteCount:u})=>{const f=i.splice(o,u);for(const g of f)g.remove();if(n!=null&&n.length){const g=n.map(t);i.addMany(g,o)}},{sync:!0,onListenerRemove:()=>i.drain(n=>n.remove()),onListenerAdd:n=>i.addMany(n.items.map(t))});return i.addHandles(r),i}function frt(e,t){const i=new Oe,r=w_e(e,f=>pS(async g=>{const b=await t(f,g);if(va(g))throw b.remove(),wi();return b})),n=()=>null,o=async f=>{const g=await f.promise,b=r.indexOf(f);b<0||i.splice(b,1,g)};i.addMany(r.items.map(n));for(const f of r)Do(o(f));const u=r.on("after-splice",({added:f,start:g,deleteCount:b})=>{const E=i.splice(g,b);for(const I of E)I==null||I.remove();if(f!=null&&f.length){i.addMany(f.map(n),g);for(const I of f)Do(o(I))}});return i.addHandles([Wve(r),u]),i}const hl={sync:!0},Je={initial:!0},Ln={sync:!0,initial:!0};let l1=class extends Oe{constructor(t){super(t),this.getCollections=null}initialize(){this.addHandles(ute(()=>this._refresh(),hl))}destroy(){this.getCollections=null}_refresh(){const t=this.getCollections!=null?this.getCollections():null;if(t==null)return void this.removeAll();let i=0;for(const r of t)r!=null&&(i=this._processCollection(i,r));this.splice(i,this.length)}_createNewInstance(t){return new Oe(t)}_processCollection(t,i){if(!i)return t;const r=this.itemFilterFunction??(n=>!!n);for(const n of i)if(n){if(r(n)){const o=this.indexOf(n,t);o>=0?o!==t&&this.reorder(n,t):this.add(n,t),++t}if(this.getChildrenFunction){const o=this.getChildrenFunction(n);if(Array.isArray(o))for(const u of o)t=this._processCollection(t,u);else t=this._processCollection(t,o)}}return t}};m([w()],l1.prototype,"getCollections",void 0),m([w()],l1.prototype,"getChildrenFunction",void 0),m([w()],l1.prototype,"itemFilterFunction",void 0),l1=m([H("esri.core.CollectionFlattener")],l1);const y_=l1;let rI=class{constructor(t=i=>i.values().next().value){this._peeker=t,this._observable=new _2,this._items=new Set}get length(){return et(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return et(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const i=this.length;return this._items.forEach(r=>{t(r)||this._items.delete(r)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){et(this._observable),yield*this._items}};const Zie=new FinalizationRegistry(e=>{e.close()});function b_e(e,t){Zie.register(e,t,t)}function __e(e){Zie.unregister(e)}function Jie(e,t){return new Proxy({},{get:(i,r,n)=>(...o)=>{let u,f;const g=o[o.length-1];return S_e(g)&&(u=g.signal,f=g.transferList,o.pop()),e.apply(t?`${t}.${r.toString()}`:r.toString(),o,{transferList:f,signal:u})}})}function S_e(e){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&("signal"in e||"transferList"in e||Object.keys(e).length===0)}const x_e={statsWorker:()=>ce(()=>import("./statsWorker-D4jtU5DE.js"),__vite__mapDeps([0,1,2,3]),import.meta.url),geometryEngineWorker:()=>ce(()=>import("./geometryEngineWorker-Bqj7rl3F.js"),__vite__mapDeps([4,5,6]),import.meta.url),CSVSourceWorker:()=>ce(()=>import("./CSVSourceWorker-mERCYZ0l.js"),__vite__mapDeps([7,8,6,9,10,11,12,13,14,15,16,17,18,19,1,2,3,20,21,22,23]),import.meta.url),EdgeProcessingWorker:()=>ce(()=>import("./EdgeProcessingWorker-BcKUEdLz.js"),__vite__mapDeps([24,25,26,27,28,29,30,31,32,33,34,35,36]),import.meta.url),ElevationSamplerWorker:()=>ce(()=>import("./ElevationSamplerWorker-B5sKu5JR.js"),__vite__mapDeps([37,12,38,39,40,41,42,43,27,44]),import.meta.url),FeatureServiceSnappingSourceWorker:()=>ce(()=>import("./FeatureServiceSnappingSourceWorker-CGv86oJY.js"),__vite__mapDeps([45,9,10,11,12,13,14,6,15,16,17,18,19,1,2,3,20,46]),import.meta.url),GeoJSONSourceWorker:()=>ce(()=>import("./GeoJSONSourceWorker-tUZuWBQ5.js"),__vite__mapDeps([47,10,9,11,12,13,14,6,15,16,17,18,19,1,2,3,20,48,8,22,23,49]),import.meta.url),LercWorker:()=>ce(()=>import("./LercWorker-B1smRI6D.js"),[],import.meta.url),MemorySourceWorker:()=>ce(()=>import("./MemorySourceWorker-DVq7sMJq.js"),__vite__mapDeps([50,10,51,9,11,12,13,14,6,15,16,17,18,19,1,2,3,20,22,23,49,8]),import.meta.url),PBFDecoderWorker:()=>ce(()=>import("./PBFDecoderWorker-B8vWACD7.js"),__vite__mapDeps([52,53,10]),import.meta.url),FeaturePipelineWorker:()=>ce(()=>import("./FeaturePipelineWorker--U3SQJFM.js"),__vite__mapDeps([54,55,56,57,58,35,59,60,61,62,63,64,16,10,65,66,29,14,6,13,67,68,69,70,71,72,15,17,18,19,1,2,3,20,73,48,8,22,23,49,74,75]),import.meta.url),PointCloudWorker:()=>ce(()=>import("./PointCloudWorker-CFwkJnE9.js"),__vite__mapDeps([76,77,78,79,80,33,81,40,41]),import.meta.url),RasterWorker:()=>ce(()=>import("./RasterWorker-BZvxtC__.js"),__vite__mapDeps([82,83,84,85,86]),import.meta.url),SceneLayerSnappingSourceWorker:()=>ce(()=>import("./SceneLayerSnappingSourceWorker-DPPjuCGe.js"),__vite__mapDeps([87,88,89,29,30,31,32,26,27,28,33,34,35,36]),import.meta.url),SceneLayerWorker:()=>ce(()=>import("./SceneLayerWorker-C4GCgUHz.js"),__vite__mapDeps([90,38,43,91,80,33,92,93,94,95,96,66,81,77,40,41]),import.meta.url),WFSSourceWorker:()=>ce(()=>import("./WFSSourceWorker-CEqovzne.js"),__vite__mapDeps([97,10,9,11,12,13,14,6,15,16,17,18,19,1,2,3,20,48,8,49,98,99]),import.meta.url),WorkerTileHandler:()=>ce(()=>import("./WorkerTileHandler-Cm44rNky.js"),__vite__mapDeps([100,101,63,64,102,103,69,104,105,35,70,61]),import.meta.url),Lyr3DWorker:()=>ce(()=>import("./Lyr3DWorker-BVXWl9zd.js"),[],import.meta.url),Feature3DPipelineWorker:()=>ce(()=>import("./Feature3DPipelineWorker-Dh5Bagen.js"),__vite__mapDeps([106,17,10,18,13,14,6,19,1,2,3,20,12,16,32,107,108,96,95,33,81,77,40,41,109,110,66,111,88,29,112,27,113,34,35,26,28,114,115,89,116,93,117,118,119,42,38,120,78,58,121,94,122]),import.meta.url)},Kie="worker:port-closed";var On;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(On||(On={}));let E_e=0;function Yie(){return E_e++}function I_e(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function m_(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function qN(e,t,i,r){if(t.type===On.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==On.INVOKE&&t.type!==On.RESPONSE)return void e.postMessage(t);let n;if(I_e(i)?(n=AU(i.transferList),t.data=i.result):(n=AU(r),t.data=i),n){if(we("ff")){for(const o of n)if("byteLength"in o&&o.byteLength>267386880){const u="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case On.INVOKE:throw u;case On.RESPONSE:return void qN(e,{type:On.RESPONSE,jobId:t.jobId,error:m_(u)})}}}e.postMessage(t,n)}else e.postMessage(t)}function g_(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function AU(e){if(!(e!=null&&e.length))return null;if(we("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(i=>!T_e(i));return t.length?t:null}function T_e(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="ArrayBuffer"}async function grt(e){try{return await e}catch(t){const i=(t==null?void 0:t.name)===Kie;if(!(Or(t)||i))throw t;return}}const{CLOSE:kU,ABORT:LU,INVOKE:OU,RESPONSE:nw,OPEN_PORT:RU,ON:$_e}=On,M_e=2;let C_e=class{constructor(t){this._invoke=t,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(t){t.type===On.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},pf=class u1{static connect(t,i){const r=new MessageChannel;let n;n=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const o=new u1(r.port1,{channel:r,client:n,schedule:i});return typeof n=="object"&&"remoteClient"in n&&(n.remoteClient=o),u1.clients.set(o,n),r.port2}static loadWorker(t){const i=x_e[t];return i?i():Promise.resolve(null)}constructor(t,i,r){this._port=t,this._jobQueue=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new C_e(n=>this._onInvokeMessage(n)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:kU}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,i,r){return this.apply(t,[i],r)}apply(t,i,r){const n=r==null?void 0:r.signal,o=r==null?void 0:r.transferList;if(!this._port)return Promise.reject(new ne(Kie,`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:i}));const u=Yie();return new Promise((f,g)=>{if(va(n))return this._processWork(),void g(wi());const b=nl(n,()=>{const I=this._outJobs.get(u);I&&(this._outJobs.delete(u),this._processWork(),tr(I.abortHandle),this._post({type:LU,jobId:u}),g(wi()))}),E={resolve:f,reject:g,abortHandle:b,debugInfo:t};this._outJobs.set(u,E),this._post({type:OU,jobId:u,methodName:t,abortable:n!=null},i,o)})}createInvokeProxy(t){return Jie(this,t)}on(t,i){const r=new MessageChannel;function n(o){i(o.data)}return this._port.postMessage({type:On.ON,eventType:t,port:r.port2},[r.port2]),r.port1.addEventListener("message",n),r.port1.start(),Yt(()=>{r.port1.postMessage({type:On.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",n)})}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:RU,port:t.port2}),t.port1}_processWork(){var u;if(this._outJobs.size>=M_e)return;const t=(u=this._jobQueue)==null?void 0:u.pop();if(!t)return;const{methodName:i,data:r,invokeOptions:n,resolver:o}=t;this.apply(i,r,n).then(f=>o.resolve(f)).catch(f=>o.reject(f))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{tr(t.abortHandle),t.reject(wi(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule(()=>this._processMessage(t,!0)):this._processMessage(t,!1)}_processMessage(t,i){const r=g_(t);if(r)switch(r.type){case nw:this._onResponseMessage(r);break;case OU:i?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case LU:this._onAbortMessage(r);break;case kU:this._onCloseMessage();break;case RU:this._onOpenPortMessage(r);break;case $_e:this._onOnMessage(r)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,n=i.get(r);this._invokeQueue.push(t),n&&(n.controller&&n.controller.abort(),i.delete(r))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&u1.clients.get(this)===t&&t.destroy(),u1.clients.delete(this),t!=null&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:i,jobId:r,data:n=[],abortable:o}=t,u=o?new AbortController:null,f=this._inJobs;let g,b=this._client,E=b[i];try{if(!E&&i&&i.includes(".")){const I=i.split(".");for(let M=0;M<I.length-1;M++)b=b[I[M]],E=b[I[M+1]]}if(typeof E!="function")throw new TypeError(`${i} is not a function`);n.push({client:this,signal:u?u.signal:null}),g=E.apply(b,n)}catch(I){return void this._post({type:nw,jobId:r,error:m_(I)})}Fc(g)?(f.set(r,{controller:u,promise:g}),g.then(I=>{f.has(r)&&(f.delete(r),this._post({type:nw,jobId:r},I))},I=>{f.has(r)&&(f.delete(r),Or(I)||this._post({type:nw,jobId:r,error:m_(I||{message:`Error encountered at method ${i}`})}))})):this._post({type:nw,jobId:r},g)}_onOpenPortMessage(t){new u1(t.port,{client:this._client})}_onOnMessage(t){const{port:i}=t,r=this._client.on(t.eventType,o=>{i.postMessage(o)}),n=aS(t.port,"message",o=>{const u=g_(o);(u==null?void 0:u.type)===On.CLOSE&&(n.remove(),r.remove(),i.close())})}_onResponseMessage(t){const{jobId:i,error:r,data:n}=t,o=this._outJobs;if(!o.has(i))return;const u=o.get(i);o.delete(i),this._processWork(),tr(u.abortHandle),r?u.reject(ne.fromJSON(JSON.parse(r))):u.resolve(n)}_post(t,i,r){return qN(this._port,t,i,r)}};pf.kernelInfo={buildDate:Rte,fullVersion:$N,revision:Pte},pf.clients=new Map;let A_e=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new rI}destroy(){this.close()}get closed(){var t;return!((t=this._clients)!=null&&t.length)}open(t,i){return new Promise((r,n)=>{let o=!0;const u=f=>{Li(i.signal),o&&(o=!1,f())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let f=0;f<t.length;++f){const g=t[f];Fc(g)?this._clientPromises[f]=g.then(b=>(this._clients[f]=new pf(b,i,this._ongoingJobsQueue),u(r),this._clients[f]),()=>(u(n),null)):(this._clients[f]=new pf(g,i,this._ongoingJobsQueue),this._clientPromises[f]=Promise.resolve(this._clients[f]),u(r))}})}broadcast(t,i,r){const n=new Array(this._clientPromises.length);for(let o=0;o<this._clientPromises.length;++o){const u=this._clientPromises[o];n[o]=u.then(f=>f==null?void 0:f.invoke(t,i,r))}return n}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject(wi(`Worker closing, aborting job calling '${t.methodName}'`));for(const i of this._clientPromises)i.then(r=>r==null?void 0:r.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,__e(this)}invoke(t,i,r){return this.apply(t,[i],r)}apply(t,i,r){const n=wa();this._ongoingJobsQueue.push({methodName:t,data:i,invokeOptions:r,resolver:n});for(let o=0;o<this._clientPromises.length;o++){const u=this._clients[o];u?u.jobAdded():this._clientPromises[o].then(f=>f==null?void 0:f.jobAdded())}return n.promise}createInvokeProxy(t){return Jie(this,t)}on(t,i){return Promise.all(this._clientPromises).then(()=>p2(this._clients.map(r=>r.on(t,i))))}openPorts(){return new Promise(t=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(o=>{o&&(i[n]=o.openPort()),--r==0&&t(i)})})}get test(){}};const k_e={async request(e,t){var u,f;const i=e.options,r=i.responseType;i.signal=t==null?void 0:t.signal,i.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&((u=OA(e.url))!=null&&u.after)?r:"array-buffer";const n=await Ct(e.url,i),o={data:n.data,httpStatus:n.httpStatus,ssl:n.ssl};switch((f=n.requestOptions)==null?void 0:f.responseType){case"native-request-init":return delete o.data.signal,o;case"blob":o.data=await o.data.arrayBuffer();break;case"json":o.data=new TextEncoder().encode(JSON.stringify(o.data)).buffer;break;case"text":o.data=new TextEncoder().encode(o.data).buffer}return{result:o,transferList:[o.data]}}};let g3;var rY,nY;const L_e=((rY=globalThis.esriConfig)==null?void 0:rY.locale)??((nY=globalThis.dojoConfig)==null?void 0:nY.locale);var sY;const v3=(sY=globalThis.document)==null?void 0:sY.documentElement;function Xie(){var i;const e=v3==null?void 0:v3.getAttribute("lang"),t=(i=globalThis.navigator)==null?void 0:i.language;return L_e??e??t??"en"}function Ds(){return g3===void 0&&(g3=Xie()),g3}function O_e(e=Ds()){const t=/^([a-zA-Z]{2,3})(?:[_-][a-zA-Z0-9]+)*$/.exec(e);return t==null?void 0:t[1].toLowerCase()}const v9=[];function fS(e){return v9.push(e),Yt(()=>v9.splice(v9.indexOf(e),1))}const w9=[];function HN(e){return w9.push(e),Yt(()=>w9.splice(w9.indexOf(e),1))}function PU(){const e=Xie();g3!==e&&([...w9].forEach(t=>t(e)),g3=e,[...v9].forEach(t=>t(e)))}var oY;(oY=globalThis.addEventListener)==null||oY.call(globalThis,"languagechange",PU),v3&&new MutationObserver(()=>{PU()}).observe(v3,{attributeFilter:["lang"]});const NU=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class gm extends Error{}class R_e extends gm{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class P_e extends gm{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class N_e extends gm{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class kg extends gm{}class Qie extends gm{constructor(t){super(`Invalid unit ${t}`)}}class As extends gm{}class Td extends gm{constructor(){super("Zone is an abstract class")}}const We="numeric",_u="short",fa="long",nI={year:We,month:We,day:We},ere={year:We,month:_u,day:We},F_e={year:We,month:_u,day:We,weekday:_u},tre={year:We,month:fa,day:We},ire={year:We,month:fa,day:We,weekday:fa},rre={hour:We,minute:We},nre={hour:We,minute:We,second:We},sre={hour:We,minute:We,second:We,timeZoneName:_u},ore={hour:We,minute:We,second:We,timeZoneName:fa},are={hour:We,minute:We,hourCycle:"h23"},lre={hour:We,minute:We,second:We,hourCycle:"h23"},ure={hour:We,minute:We,second:We,hourCycle:"h23",timeZoneName:_u},cre={hour:We,minute:We,second:We,hourCycle:"h23",timeZoneName:fa},hre={year:We,month:We,day:We,hour:We,minute:We},dre={year:We,month:We,day:We,hour:We,minute:We,second:We},pre={year:We,month:_u,day:We,hour:We,minute:We},fre={year:We,month:_u,day:We,hour:We,minute:We,second:We},D_e={year:We,month:_u,day:We,weekday:_u,hour:We,minute:We},yre={year:We,month:fa,day:We,hour:We,minute:We,timeZoneName:_u},mre={year:We,month:fa,day:We,hour:We,minute:We,second:We,timeZoneName:_u},gre={year:We,month:fa,day:We,weekday:fa,hour:We,minute:We,timeZoneName:fa},vre={year:We,month:fa,day:We,weekday:fa,hour:We,minute:We,second:We,timeZoneName:fa};class vm{get type(){throw new Td}get name(){throw new Td}get ianaName(){return this.name}get isUniversal(){throw new Td}offsetName(t,i){throw new Td}formatOffset(t,i){throw new Td}offset(t){throw new Td}equals(t){throw new Td}get isValid(){throw new Td}}let cM=null;class J6 extends vm{static get instance(){return cM===null&&(cM=new J6),cM}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:i,locale:r}){return $re(t,i,r)}formatOffset(t,i){return w3(this.offset(t),i)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let b9={};function j_e(e){return b9[e]||(b9[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),b9[e]}const z_e={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function V_e(e,t){const i=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,n,o,u,f,g,b,E]=r;return[u,n,o,f,g,b,E]}function U_e(e,t){const i=e.formatToParts(t),r=[];for(let n=0;n<i.length;n++){const{type:o,value:u}=i[n],f=z_e[o];o==="era"?r[f]=u:_t(f)||(r[f]=parseInt(u,10))}return r}let S5={};class Vo extends vm{static create(t){return S5[t]||(S5[t]=new Vo(t)),S5[t]}static resetCache(){S5={},b9={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Vo.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:i,locale:r}){return $re(t,i,r,this.name)}formatOffset(t,i){return w3(this.offset(t),i)}offset(t){const i=new Date(t);if(isNaN(i))return NaN;const r=j_e(this.name);let[n,o,u,f,g,b,E]=r.formatToParts?U_e(r,i):V_e(r,i);f==="BC"&&(n=-Math.abs(n)+1);const M=Y6({year:n,month:o,day:u,hour:g===24?0:g,minute:b,second:E,millisecond:0});let k=+i;const L=k%1e3;return k-=L>=0?L:1e3+L,(M-k)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let FU={};function G_e(e,t={}){const i=JSON.stringify([e,t]);let r=FU[i];return r||(r=new Intl.ListFormat(e,t),FU[i]=r),r}let r8={};function n8(e,t={}){const i=JSON.stringify([e,t]);let r=r8[i];return r||(r=new Intl.DateTimeFormat(e,t),r8[i]=r),r}let s8={};function B_e(e,t={}){const i=JSON.stringify([e,t]);let r=s8[i];return r||(r=new Intl.NumberFormat(e,t),s8[i]=r),r}let o8={};function q_e(e,t={}){const{base:i,...r}=t,n=JSON.stringify([e,r]);let o=o8[n];return o||(o=new Intl.RelativeTimeFormat(e,t),o8[n]=o),o}let Hw=null;function H_e(){return Hw||(Hw=new Intl.DateTimeFormat().resolvedOptions().locale,Hw)}let DU={};function W_e(e){let t=DU[e];if(!t){const i=new Intl.Locale(e);t="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,DU[e]=t}return t}function Z_e(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const i=e.indexOf("-u-");if(i===-1)return[e];{let r,n;try{r=n8(e).resolvedOptions(),n=e}catch{const g=e.substring(0,i);r=n8(g).resolvedOptions(),n=g}const{numberingSystem:o,calendar:u}=r;return[n,o,u]}}function J_e(e,t,i){return(i||t)&&(e.includes("-u-")||(e+="-u"),i&&(e+=`-ca-${i}`),t&&(e+=`-nu-${t}`)),e}function K_e(e){const t=[];for(let i=1;i<=12;i++){const r=Ze.utc(2009,i,1);t.push(e(r))}return t}function Y_e(e){const t=[];for(let i=1;i<=7;i++){const r=Ze.utc(2016,11,13+i);t.push(e(r))}return t}function x5(e,t,i,r){const n=e.listingMode();return n==="error"?null:n==="en"?i(t):r(t)}function X_e(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class Q_e{constructor(t,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:n,floor:o,...u}=r;if(!i||Object.keys(u).length>0){const f={useGrouping:!1,...r};r.padTo>0&&(f.minimumIntegerDigits=r.padTo),this.inf=B_e(t,f)}}format(t){if(this.inf){const i=this.floor?Math.floor(t):t;return this.inf.format(i)}else{const i=this.floor?Math.floor(t):YN(t,3);return Xr(i,this.padTo)}}}class eSe{constructor(t,i,r){this.opts=r,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const u=-1*(t.offset/60),f=u>=0?`Etc/GMT+${u}`:`Etc/GMT${u}`;t.offset!==0&&Vo.create(f).valid?(n=f,this.dt=t):(n="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,n=t.zone.name):(n="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const o={...this.opts};o.timeZone=o.timeZone||n,this.dtf=n8(i,o)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class tSe{constructor(t,i,r){this.opts={style:"long",...r},!i&&Ire()&&(this.rtf=q_e(t,r))}format(t,i){return this.rtf?this.rtf.format(t,i):ESe(i,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,i){return this.rtf?this.rtf.formatToParts(t,i):[]}}const iSe={firstDay:1,minimalDays:4,weekend:[6,7]};class gi{static fromOpts(t){return gi.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,i,r,n,o=!1){const u=t||Ar.defaultLocale,f=u||(o?"en-US":H_e()),g=i||Ar.defaultNumberingSystem,b=r||Ar.defaultOutputCalendar,E=a8(n)||Ar.defaultWeekSettings;return new gi(f,g,b,E,u)}static resetCache(){Hw=null,r8={},s8={},o8={}}static fromObject({locale:t,numberingSystem:i,outputCalendar:r,weekSettings:n}={}){return gi.create(t,i,r,n)}constructor(t,i,r,n,o){const[u,f,g]=Z_e(t);this.locale=u,this.numberingSystem=i||f||null,this.outputCalendar=r||g||null,this.weekSettings=n,this.intl=J_e(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=o,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=X_e(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&i?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:gi.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,a8(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,i=!1){return x5(this,t,Are,()=>{const r=i?{month:t,day:"numeric"}:{month:t},n=i?"format":"standalone";return this.monthsCache[n][t]||(this.monthsCache[n][t]=K_e(o=>this.extract(o,r,"month"))),this.monthsCache[n][t]})}weekdays(t,i=!1){return x5(this,t,Ore,()=>{const r=i?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},n=i?"format":"standalone";return this.weekdaysCache[n][t]||(this.weekdaysCache[n][t]=Y_e(o=>this.extract(o,r,"weekday"))),this.weekdaysCache[n][t]})}meridiems(){return x5(this,void 0,()=>Rre,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ze.utc(2016,11,13,9),Ze.utc(2016,11,13,19)].map(i=>this.extract(i,t,"dayperiod"))}return this.meridiemCache})}eras(t){return x5(this,t,Pre,()=>{const i={era:t};return this.eraCache[t]||(this.eraCache[t]=[Ze.utc(-40,1,1),Ze.utc(2017,1,1)].map(r=>this.extract(r,i,"era"))),this.eraCache[t]})}extract(t,i,r){const n=this.dtFormatter(t,i),o=n.formatToParts(),u=o.find(f=>f.type.toLowerCase()===r);return u?u.value:null}numberFormatter(t={}){return new Q_e(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,i={}){return new eSe(t,this.intl,i)}relFormatter(t={}){return new tSe(this.intl,this.isEnglish(),t)}listFormatter(t={}){return G_e(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Tre()?W_e(this.locale):iSe}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let hM=null;class tn extends vm{static get utcInstance(){return hM===null&&(hM=new tn(0)),hM}static instance(t){return t===0?tn.utcInstance:new tn(t)}static parseSpecifier(t){if(t){const i=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new tn(X6(i[1],i[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${w3(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${w3(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,i){return w3(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class rSe extends vm{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Lp(e,t){if(_t(e)||e===null)return t;if(e instanceof vm)return e;if(uSe(e)){const i=e.toLowerCase();return i==="default"?t:i==="local"||i==="system"?J6.instance:i==="utc"||i==="gmt"?tn.utcInstance:tn.parseSpecifier(i)||Vo.create(e)}else return nf(e)?tn.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new rSe(e)}const WN={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},jU={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},nSe=WN.hanidec.replace(/[\[|\]]/g,"").split("");function sSe(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);if(e[i].search(WN.hanidec)!==-1)t+=nSe.indexOf(e[i]);else for(const n in jU){const[o,u]=jU[n];r>=o&&r<=u&&(t+=r-o)}}return parseInt(t,10)}else return t}let c1={};function oSe(){c1={}}function Sl({numberingSystem:e},t=""){const i=e||"latn";return c1[i]||(c1[i]={}),c1[i][t]||(c1[i][t]=new RegExp(`${WN[i]}${t}`)),c1[i][t]}let zU=()=>Date.now(),VU="system",UU=null,GU=null,BU=null,qU=60,HU,WU=null;class Ar{static get now(){return zU}static set now(t){zU=t}static set defaultZone(t){VU=t}static get defaultZone(){return Lp(VU,J6.instance)}static get defaultLocale(){return UU}static set defaultLocale(t){UU=t}static get defaultNumberingSystem(){return GU}static set defaultNumberingSystem(t){GU=t}static get defaultOutputCalendar(){return BU}static set defaultOutputCalendar(t){BU=t}static get defaultWeekSettings(){return WU}static set defaultWeekSettings(t){WU=a8(t)}static get twoDigitCutoffYear(){return qU}static set twoDigitCutoffYear(t){qU=t%100}static get throwOnInvalid(){return HU}static set throwOnInvalid(t){HU=t}static resetCaches(){gi.resetCache(),Vo.resetCache(),Ze.resetCache(),oSe()}}class uu{constructor(t,i){this.reason=t,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const wre=[0,31,59,90,120,151,181,212,243,273,304,334],bre=[0,31,60,91,121,152,182,213,244,274,305,335];function el(e,t){return new uu("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function ZN(e,t,i){const r=new Date(Date.UTC(e,t-1,i));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const n=r.getUTCDay();return n===0?7:n}function _re(e,t,i){return i+(yS(e)?bre:wre)[t-1]}function Sre(e,t){const i=yS(e)?bre:wre,r=i.findIndex(o=>o<t),n=t-i[r];return{month:r+1,day:n}}function JN(e,t){return(e-t+7)%7+1}function sI(e,t=4,i=1){const{year:r,month:n,day:o}=e,u=_re(r,n,o),f=JN(ZN(r,n,o),i);let g=Math.floor((u-f+14-t)/7),b;return g<1?(b=r-1,g=v_(b,t,i)):g>v_(r,t,i)?(b=r+1,g=1):b=r,{weekYear:b,weekNumber:g,weekday:f,...Q6(e)}}function ZU(e,t=4,i=1){const{weekYear:r,weekNumber:n,weekday:o}=e,u=JN(ZN(r,1,t),i),f=tv(r);let g=n*7+o-u-7+t,b;g<1?(b=r-1,g+=tv(b)):g>f?(b=r+1,g-=tv(r)):b=r;const{month:E,day:I}=Sre(b,g);return{year:b,month:E,day:I,...Q6(e)}}function dM(e){const{year:t,month:i,day:r}=e,n=_re(t,i,r);return{year:t,ordinal:n,...Q6(e)}}function JU(e){const{year:t,ordinal:i}=e,{month:r,day:n}=Sre(t,i);return{year:t,month:r,day:n,...Q6(e)}}function KU(e,t){if(!_t(e.localWeekday)||!_t(e.localWeekNumber)||!_t(e.localWeekYear)){if(!_t(e.weekday)||!_t(e.weekNumber)||!_t(e.weekYear))throw new kg("Cannot mix locale-based week fields with ISO-based week fields");return _t(e.localWeekday)||(e.weekday=e.localWeekday),_t(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),_t(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function aSe(e,t=4,i=1){const r=K6(e.weekYear),n=tl(e.weekNumber,1,v_(e.weekYear,t,i)),o=tl(e.weekday,1,7);return r?n?o?!1:el("weekday",e.weekday):el("week",e.weekNumber):el("weekYear",e.weekYear)}function lSe(e){const t=K6(e.year),i=tl(e.ordinal,1,tv(e.year));return t?i?!1:el("ordinal",e.ordinal):el("year",e.year)}function xre(e){const t=K6(e.year),i=tl(e.month,1,12),r=tl(e.day,1,oI(e.year,e.month));return t?i?r?!1:el("day",e.day):el("month",e.month):el("year",e.year)}function Ere(e){const{hour:t,minute:i,second:r,millisecond:n}=e,o=tl(t,0,23)||t===24&&i===0&&r===0&&n===0,u=tl(i,0,59),f=tl(r,0,59),g=tl(n,0,999);return o?u?f?g?!1:el("millisecond",n):el("second",r):el("minute",i):el("hour",t)}function _t(e){return typeof e>"u"}function nf(e){return typeof e=="number"}function K6(e){return typeof e=="number"&&e%1===0}function uSe(e){return typeof e=="string"}function cSe(e){return Object.prototype.toString.call(e)==="[object Date]"}function Ire(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Tre(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function hSe(e){return Array.isArray(e)?e:[e]}function YU(e,t,i){if(e.length!==0)return e.reduce((r,n)=>{const o=[t(n),n];return r&&i(r[0],o[0])===r[0]?r:o},null)[1]}function dSe(e,t){return t.reduce((i,r)=>(i[r]=e[r],i),{})}function Dv(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a8(e){if(e==null)return null;if(typeof e!="object")throw new As("Week settings must be an object");if(!tl(e.firstDay,1,7)||!tl(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!tl(t,1,7)))throw new As("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function tl(e,t,i){return K6(e)&&e>=t&&e<=i}function pSe(e,t){return e-t*Math.floor(e/t)}function Xr(e,t=2){const i=e<0;let r;return i?r="-"+(""+-e).padStart(t,"0"):r=(""+e).padStart(t,"0"),r}function _p(e){if(!(_t(e)||e===null||e===""))return parseInt(e,10)}function Df(e){if(!(_t(e)||e===null||e===""))return parseFloat(e)}function KN(e){if(!(_t(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function YN(e,t,i=!1){const r=10**t;return(i?Math.trunc:Math.round)(e*r)/r}function yS(e){return e%4===0&&(e%100!==0||e%400===0)}function tv(e){return yS(e)?366:365}function oI(e,t){const i=pSe(t-1,12)+1,r=e+(t-i)/12;return i===2?yS(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function Y6(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function XU(e,t,i){return-JN(ZN(e,1,t),i)+t-1}function v_(e,t=4,i=1){const r=XU(e,t,i),n=XU(e+1,t,i);return(tv(e)-r+n)/7}function l8(e){return e>99?e:e>Ar.twoDigitCutoffYear?1900+e:2e3+e}function $re(e,t,i,r=null){const n=new Date(e),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(o.timeZone=r);const u={timeZoneName:t,...o},f=new Intl.DateTimeFormat(i,u).formatToParts(n).find(g=>g.type.toLowerCase()==="timezonename");return f?f.value:null}function X6(e,t){let i=parseInt(e,10);Number.isNaN(i)&&(i=0);const r=parseInt(t,10)||0,n=i<0||Object.is(i,-0)?-r:r;return i*60+n}function Mre(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new As(`Invalid unit value ${e}`);return t}function aI(e,t){const i={};for(const r in e)if(Dv(e,r)){const n=e[r];if(n==null)continue;i[t(r)]=Mre(n)}return i}function w3(e,t){const i=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),n=e>=0?"+":"-";switch(t){case"short":return`${n}${Xr(i,2)}:${Xr(r,2)}`;case"narrow":return`${n}${i}${r>0?`:${r}`:""}`;case"techie":return`${n}${Xr(i,2)}${Xr(r,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function Q6(e){return dSe(e,["hour","minute","second","millisecond"])}const fSe=["January","February","March","April","May","June","July","August","September","October","November","December"],Cre=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ySe=["J","F","M","A","M","J","J","A","S","O","N","D"];function Are(e){switch(e){case"narrow":return[...ySe];case"short":return[...Cre];case"long":return[...fSe];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const kre=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Lre=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],mSe=["M","T","W","T","F","S","S"];function Ore(e){switch(e){case"narrow":return[...mSe];case"short":return[...Lre];case"long":return[...kre];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Rre=["AM","PM"],gSe=["Before Christ","Anno Domini"],vSe=["BC","AD"],wSe=["B","A"];function Pre(e){switch(e){case"narrow":return[...wSe];case"short":return[...vSe];case"long":return[...gSe];default:return null}}function bSe(e){return Rre[e.hour<12?0:1]}function _Se(e,t){return Ore(t)[e.weekday-1]}function SSe(e,t){return Are(t)[e.month-1]}function xSe(e,t){return Pre(t)[e.year<0?0:1]}function ESe(e,t,i="always",r=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=["hours","minutes","seconds"].indexOf(e)===-1;if(i==="auto"&&o){const I=e==="days";switch(t){case 1:return I?"tomorrow":`next ${n[e][0]}`;case-1:return I?"yesterday":`last ${n[e][0]}`;case 0:return I?"today":`this ${n[e][0]}`}}const u=Object.is(t,-0)||t<0,f=Math.abs(t),g=f===1,b=n[e],E=r?g?b[1]:b[2]||b[1]:g?n[e][0]:e;return u?`${f} ${E} ago`:`in ${f} ${E}`}function QU(e,t){let i="";for(const r of e)r.literal?i+=r.val:i+=t(r.val);return i}const ISe={D:nI,DD:ere,DDD:tre,DDDD:ire,t:rre,tt:nre,ttt:sre,tttt:ore,T:are,TT:lre,TTT:ure,TTTT:cre,f:hre,ff:pre,fff:yre,ffff:gre,F:dre,FF:fre,FFF:mre,FFFF:vre};class Rs{static create(t,i={}){return new Rs(t,i)}static parseFormat(t){let i=null,r="",n=!1;const o=[];for(let u=0;u<t.length;u++){const f=t.charAt(u);f==="'"?(r.length>0&&o.push({literal:n||/^\s+$/.test(r),val:r}),i=null,r="",n=!n):n||f===i?r+=f:(r.length>0&&o.push({literal:/^\s+$/.test(r),val:r}),r=f,i=f)}return r.length>0&&o.push({literal:n||/^\s+$/.test(r),val:r}),o}static macroTokenToFormatOpts(t){return ISe[t]}constructor(t,i){this.opts=i,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...i}).format()}dtFormatter(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i})}formatDateTime(t,i){return this.dtFormatter(t,i).format()}formatDateTimeParts(t,i){return this.dtFormatter(t,i).formatToParts()}formatInterval(t,i){return this.dtFormatter(t.start,i).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,i){return this.dtFormatter(t,i).resolvedOptions()}num(t,i=0){if(this.opts.forceSimple)return Xr(t,i);const r={...this.opts};return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(t)}formatDateTimeFromString(t,i){const r=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",o=(k,L)=>this.loc.extract(t,k,L),u=k=>t.isOffsetFixed&&t.offset===0&&k.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,k.format):"",f=()=>r?bSe(t):o({hour:"numeric",hourCycle:"h12"},"dayperiod"),g=(k,L)=>r?SSe(t,k):o(L?{month:k}:{month:k,day:"numeric"},"month"),b=(k,L)=>r?_Se(t,k):o(L?{weekday:k}:{weekday:k,month:"long",day:"numeric"},"weekday"),E=k=>{const L=Rs.macroTokenToFormatOpts(k);return L?this.formatWithSystemDefault(t,L):k},I=k=>r?xSe(t,k):o({era:k},"era"),M=k=>{switch(k){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return u({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return u({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return u({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return f();case"d":return n?o({day:"numeric"},"day"):this.num(t.day);case"dd":return n?o({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return b("short",!0);case"cccc":return b("long",!0);case"ccccc":return b("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return b("short",!1);case"EEEE":return b("long",!1);case"EEEEE":return b("narrow",!1);case"L":return n?o({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return n?o({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return g("short",!0);case"LLLL":return g("long",!0);case"LLLLL":return g("narrow",!0);case"M":return n?o({month:"numeric"},"month"):this.num(t.month);case"MM":return n?o({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return g("short",!1);case"MMMM":return g("long",!1);case"MMMMM":return g("narrow",!1);case"y":return n?o({year:"numeric"},"year"):this.num(t.year);case"yy":return n?o({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return n?o({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return n?o({year:"numeric"},"year"):this.num(t.year,6);case"G":return I("short");case"GG":return I("long");case"GGGGG":return I("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return E(k)}};return QU(Rs.parseFormat(i),M)}formatDurationFromString(t,i){const r=g=>{switch(g[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=g=>b=>{const E=r(b);return E?this.num(g.get(E),b.length):b},o=Rs.parseFormat(i),u=o.reduce((g,{literal:b,val:E})=>b?g:g.concat(E),[]),f=t.shiftTo(...u.map(r).filter(g=>g));return QU(o,n(f))}}const Nre=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function S2(...e){const t=e.reduce((i,r)=>i+r.source,"");return RegExp(`^${t}$`)}function x2(...e){return t=>e.reduce(([i,r,n],o)=>{const[u,f,g]=o(t,n);return[{...i,...u},f||r,g]},[{},null,1]).slice(0,2)}function E2(e,...t){if(e==null)return[null,null];for(const[i,r]of t){const n=i.exec(e);if(n)return r(n)}return[null,null]}function Fre(...e){return(t,i)=>{const r={};let n;for(n=0;n<e.length;n++)r[e[n]]=_p(t[i+n]);return[r,null,i+n]}}const Dre=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,TSe=`(?:${Dre.source}?(?:\\[(${Nre.source})\\])?)?`,XN=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,jre=RegExp(`${XN.source}${TSe}`),QN=RegExp(`(?:T${jre.source})?`),$Se=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,MSe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,CSe=/(\d{4})-?(\d{3})/,ASe=Fre("weekYear","weekNumber","weekDay"),kSe=Fre("year","ordinal"),LSe=/(\d{4})-(\d\d)-(\d\d)/,zre=RegExp(`${XN.source} ?(?:${Dre.source}|(${Nre.source}))?`),OSe=RegExp(`(?: ${zre.source})?`);function iv(e,t,i){const r=e[t];return _t(r)?i:_p(r)}function RSe(e,t){return[{year:iv(e,t),month:iv(e,t+1,1),day:iv(e,t+2,1)},null,t+3]}function I2(e,t){return[{hours:iv(e,t,0),minutes:iv(e,t+1,0),seconds:iv(e,t+2,0),milliseconds:KN(e[t+3])},null,t+4]}function mS(e,t){const i=!e[t]&&!e[t+1],r=X6(e[t+1],e[t+2]),n=i?null:tn.instance(r);return[{},n,t+3]}function gS(e,t){const i=e[t]?Vo.create(e[t]):null;return[{},i,t+1]}const PSe=RegExp(`^T?${XN.source}$`),NSe=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function FSe(e){const[t,i,r,n,o,u,f,g,b]=e,E=t[0]==="-",I=g&&g[0]==="-",M=(k,L=!1)=>k!==void 0&&(L||k&&E)?-k:k;return[{years:M(Df(i)),months:M(Df(r)),weeks:M(Df(n)),days:M(Df(o)),hours:M(Df(u)),minutes:M(Df(f)),seconds:M(Df(g),g==="-0"),milliseconds:M(KN(b),I)}]}const DSe={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function eF(e,t,i,r,n,o,u){const f={year:t.length===2?l8(_p(t)):_p(t),month:Cre.indexOf(i)+1,day:_p(r),hour:_p(n),minute:_p(o)};return u&&(f.second=_p(u)),e&&(f.weekday=e.length>3?kre.indexOf(e)+1:Lre.indexOf(e)+1),f}const jSe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function zSe(e){const[,t,i,r,n,o,u,f,g,b,E,I]=e,M=eF(t,n,r,i,o,u,f);let k;return g?k=DSe[g]:b?k=0:k=X6(E,I),[M,new tn(k)]}function VSe(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const USe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,GSe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,BSe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function eG(e){const[,t,i,r,n,o,u,f]=e;return[eF(t,n,r,i,o,u,f),tn.utcInstance]}function qSe(e){const[,t,i,r,n,o,u,f]=e;return[eF(t,f,i,r,n,o,u),tn.utcInstance]}const HSe=S2($Se,QN),WSe=S2(MSe,QN),ZSe=S2(CSe,QN),JSe=S2(jre),Vre=x2(RSe,I2,mS,gS),KSe=x2(ASe,I2,mS,gS),YSe=x2(kSe,I2,mS,gS),XSe=x2(I2,mS,gS);function QSe(e){return E2(e,[HSe,Vre],[WSe,KSe],[ZSe,YSe],[JSe,XSe])}function e5e(e){return E2(VSe(e),[jSe,zSe])}function t5e(e){return E2(e,[USe,eG],[GSe,eG],[BSe,qSe])}function i5e(e){return E2(e,[NSe,FSe])}const r5e=x2(I2);function n5e(e){return E2(e,[PSe,r5e])}const s5e=S2(LSe,OSe),o5e=S2(zre),a5e=x2(I2,mS,gS);function l5e(e){return E2(e,[s5e,Vre],[o5e,a5e])}const tG="Invalid Duration",Ure={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},u5e={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Ure},Ma=146097/400,km=146097/4800,c5e={years:{quarters:4,months:12,weeks:Ma/7,days:Ma,hours:Ma*24,minutes:Ma*24*60,seconds:Ma*24*60*60,milliseconds:Ma*24*60*60*1e3},quarters:{months:3,weeks:Ma/28,days:Ma/4,hours:Ma*24/4,minutes:Ma*24*60/4,seconds:Ma*24*60*60/4,milliseconds:Ma*24*60*60*1e3/4},months:{weeks:km/7,days:km,hours:km*24,minutes:km*24*60,seconds:km*24*60*60,milliseconds:km*24*60*60*1e3},...Ure},dy=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],h5e=dy.slice(0).reverse();function $d(e,t,i=!1){const r={values:i?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new ri(r)}function Gre(e,t){let i=t.milliseconds??0;for(const r of h5e.slice(1))t[r]&&(i+=t[r]*e[r].milliseconds);return i}function iG(e,t){const i=Gre(e,t)<0?-1:1;dy.reduceRight((r,n)=>{if(_t(t[n]))return r;if(r){const o=t[r]*i,u=e[n][r],f=Math.floor(o/u);t[n]+=f*i,t[r]-=f*u*i}return n},null),dy.reduce((r,n)=>{if(_t(t[n]))return r;if(r){const o=t[r]%1;t[r]-=o,t[n]+=o*e[r][n]}return n},null)}function d5e(e){const t={};for(const[i,r]of Object.entries(e))r!==0&&(t[i]=r);return t}class ri{constructor(t){const i=t.conversionAccuracy==="longterm"||!1;let r=i?c5e:u5e;t.matrix&&(r=t.matrix),this.values=t.values,this.loc=t.loc||gi.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(t,i){return ri.fromObject({milliseconds:t},i)}static fromObject(t,i={}){if(t==null||typeof t!="object")throw new As(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new ri({values:aI(t,ri.normalizeUnit),loc:gi.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(t){if(nf(t))return ri.fromMillis(t);if(ri.isDuration(t))return t;if(typeof t=="object")return ri.fromObject(t);throw new As(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,i){const[r]=i5e(t);return r?ri.fromObject(r,i):ri.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,i){const[r]=n5e(t);return r?ri.fromObject(r,i):ri.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,i=null){if(!t)throw new As("need to specify a reason the Duration is invalid");const r=t instanceof uu?t:new uu(t,i);if(Ar.throwOnInvalid)throw new N_e(r);return new ri({invalid:r})}static normalizeUnit(t){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!i)throw new Qie(t);return i}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?Rs.create(this.loc,r).formatDurationFromString(this,t):tG}toHuman(t={}){if(!this.isValid)return tG;const i=dy.map(r=>{const n=this.values[r];return _t(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:r.slice(0,-1)}).format(n)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=YN(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},Ze.fromMillis(i,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Gre(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const i=ri.fromDurationLike(t),r={};for(const n of dy)(Dv(i.values,n)||Dv(this.values,n))&&(r[n]=i.get(n)+this.get(n));return $d(this,{values:r},!0)}minus(t){if(!this.isValid)return this;const i=ri.fromDurationLike(t);return this.plus(i.negate())}mapUnits(t){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=Mre(t(this.values[r],r));return $d(this,{values:i},!0)}get(t){return this[ri.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const i={...this.values,...aI(t,ri.normalizeUnit)};return $d(this,{values:i})}reconfigure({locale:t,numberingSystem:i,conversionAccuracy:r,matrix:n}={}){const u={loc:this.loc.clone({locale:t,numberingSystem:i}),matrix:n,conversionAccuracy:r};return $d(this,u)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return iG(this.matrix,t),$d(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=d5e(this.normalize().shiftToAll().toObject());return $d(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(u=>ri.normalizeUnit(u));const i={},r={},n=this.toObject();let o;for(const u of dy)if(t.indexOf(u)>=0){o=u;let f=0;for(const b in r)f+=this.matrix[b][u]*r[b],r[b]=0;nf(n[u])&&(f+=n[u]);const g=Math.trunc(f);i[u]=g,r[u]=(f*1e3-g*1e3)/1e3}else nf(n[u])&&(r[u]=n[u]);for(const u in r)r[u]!==0&&(i[o]+=u===o?r[u]:r[u]/this.matrix[o][u]);return iG(this.matrix,i),$d(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=this.values[i]===0?0:-this.values[i];return $d(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function i(r,n){return r===void 0||r===0?n===void 0||n===0:r===n}for(const r of dy)if(!i(this.values[r],t.values[r]))return!1;return!0}}const Lm="Invalid Interval";function p5e(e,t){return!e||!e.isValid?Cr.invalid("missing or invalid start"):!t||!t.isValid?Cr.invalid("missing or invalid end"):t<e?Cr.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class Cr{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,i=null){if(!t)throw new As("need to specify a reason the Interval is invalid");const r=t instanceof uu?t:new uu(t,i);if(Ar.throwOnInvalid)throw new P_e(r);return new Cr({invalid:r})}static fromDateTimes(t,i){const r=sw(t),n=sw(i),o=p5e(r,n);return o??new Cr({start:r,end:n})}static after(t,i){const r=ri.fromDurationLike(i),n=sw(t);return Cr.fromDateTimes(n,n.plus(r))}static before(t,i){const r=ri.fromDurationLike(i),n=sw(t);return Cr.fromDateTimes(n.minus(r),n)}static fromISO(t,i){const[r,n]=(t||"").split("/",2);if(r&&n){let o,u;try{o=Ze.fromISO(r,i),u=o.isValid}catch{u=!1}let f,g;try{f=Ze.fromISO(n,i),g=f.isValid}catch{g=!1}if(u&&g)return Cr.fromDateTimes(o,f);if(u){const b=ri.fromISO(n,i);if(b.isValid)return Cr.after(o,b)}else if(g){const b=ri.fromISO(r,i);if(b.isValid)return Cr.before(f,b)}}return Cr.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",i){if(!this.isValid)return NaN;const r=this.start.startOf(t,i);let n;return i!=null&&i.useLocaleWeeks?n=this.end.reconfigure({locale:r.locale}):n=this.end,n=n.startOf(t,i),Math.floor(n.diff(r,t).get(t))+(n.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:i}={}){return this.isValid?Cr.fromDateTimes(t||this.s,i||this.e):this}splitAt(...t){if(!this.isValid)return[];const i=t.map(sw).filter(u=>this.contains(u)).sort((u,f)=>u.toMillis()-f.toMillis()),r=[];let{s:n}=this,o=0;for(;n<this.e;){const u=i[o]||this.e,f=+u>+this.e?this.e:u;r.push(Cr.fromDateTimes(n,f)),n=f,o+=1}return r}splitBy(t){const i=ri.fromDurationLike(t);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,n=1,o;const u=[];for(;r<this.e;){const f=this.start.plus(i.mapUnits(g=>g*n));o=+f>+this.e?this.e:f,u.push(Cr.fromDateTimes(r,o)),r=o,n+=1}return u}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const i=this.s>t.s?this.s:t.s,r=this.e<t.e?this.e:t.e;return i>=r?null:Cr.fromDateTimes(i,r)}union(t){if(!this.isValid)return this;const i=this.s<t.s?this.s:t.s,r=this.e>t.e?this.e:t.e;return Cr.fromDateTimes(i,r)}static merge(t){const[i,r]=t.sort((n,o)=>n.s-o.s).reduce(([n,o],u)=>o?o.overlaps(u)||o.abutsStart(u)?[n,o.union(u)]:[n.concat([o]),u]:[n,u],[[],null]);return r&&i.push(r),i}static xor(t){let i=null,r=0;const n=[],o=t.map(g=>[{time:g.s,type:"s"},{time:g.e,type:"e"}]),u=Array.prototype.concat(...o),f=u.sort((g,b)=>g.time-b.time);for(const g of f)r+=g.type==="s"?1:-1,r===1?i=g.time:(i&&+i!=+g.time&&n.push(Cr.fromDateTimes(i,g.time)),i=null);return Cr.merge(n)}difference(...t){return Cr.xor([this].concat(t)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Lm}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=nI,i={}){return this.isValid?Rs.create(this.s.loc.clone(i),t).formatInterval(this):Lm}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Lm}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Lm}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Lm}toFormat(t,{separator:i=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${i}${this.e.toFormat(t)}`:Lm}toDuration(t,i){return this.isValid?this.e.diff(this.s,t,i):ri.invalid(this.invalidReason)}mapEndpoints(t){return Cr.fromDateTimes(t(this.s),t(this.e))}}class E5{static hasDST(t=Ar.defaultZone){const i=Ze.now().setZone(t).set({month:12});return!t.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(t){return Vo.isValidZone(t)}static normalizeZone(t){return Lp(t,Ar.defaultZone)}static getStartOfWeek({locale:t=null,locObj:i=null}={}){return(i||gi.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:i=null}={}){return(i||gi.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:i=null}={}){return(i||gi.create(t)).getWeekendDays().slice()}static months(t="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:o="gregory"}={}){return(n||gi.create(i,r,o)).months(t)}static monthsFormat(t="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:o="gregory"}={}){return(n||gi.create(i,r,o)).months(t,!0)}static weekdays(t="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||gi.create(i,r,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||gi.create(i,r,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return gi.create(t).meridiems()}static eras(t="short",{locale:i=null}={}){return gi.create(i,null,"gregory").eras(t)}static features(){return{relative:Ire(),localeWeek:Tre()}}}function rG(e,t){const i=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(t)-i(e);return Math.floor(ri.fromMillis(r).as("days"))}function f5e(e,t,i){const r=[["years",(g,b)=>b.year-g.year],["quarters",(g,b)=>b.quarter-g.quarter+(b.year-g.year)*4],["months",(g,b)=>b.month-g.month+(b.year-g.year)*12],["weeks",(g,b)=>{const E=rG(g,b);return(E-E%7)/7}],["days",rG]],n={},o=e;let u,f;for(const[g,b]of r)i.indexOf(g)>=0&&(u=g,n[g]=b(e,t),f=o.plus(n),f>t?(n[g]--,e=o.plus(n),e>t&&(f=e,n[g]--,e=o.plus(n))):e=f);return[e,n,f,u]}function y5e(e,t,i,r){let[n,o,u,f]=f5e(e,t,i);const g=t-n,b=i.filter(I=>["hours","minutes","seconds","milliseconds"].indexOf(I)>=0);b.length===0&&(u<t&&(u=n.plus({[f]:1})),u!==n&&(o[f]=(o[f]||0)+g/(u-n)));const E=ri.fromObject(o,r);return b.length>0?ri.fromMillis(g,r).shiftTo(...b).plus(E):E}const m5e="missing Intl.DateTimeFormat.formatToParts support";function hi(e,t=i=>i){return{regex:e,deser:([i])=>t(sSe(i))}}const g5e=" ",Bre=`[ ${g5e}]`,qre=new RegExp(Bre,"g");function v5e(e){return e.replace(/\./g,"\\.?").replace(qre,Bre)}function nG(e){return e.replace(/\./g,"").replace(qre," ").toLowerCase()}function xl(e,t){return e===null?null:{regex:RegExp(e.map(v5e).join("|")),deser:([i])=>e.findIndex(r=>nG(i)===nG(r))+t}}function sG(e,t){return{regex:e,deser:([,i,r])=>X6(i,r),groups:t}}function I5(e){return{regex:e,deser:([t])=>t}}function w5e(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function b5e(e,t){const i=Sl(t),r=Sl(t,"{2}"),n=Sl(t,"{3}"),o=Sl(t,"{4}"),u=Sl(t,"{6}"),f=Sl(t,"{1,2}"),g=Sl(t,"{1,3}"),b=Sl(t,"{1,6}"),E=Sl(t,"{1,9}"),I=Sl(t,"{2,4}"),M=Sl(t,"{4,6}"),k=D=>({regex:RegExp(w5e(D.val)),deser:([j])=>j,literal:!0}),P=(D=>{if(e.literal)return k(D);switch(D.val){case"G":return xl(t.eras("short"),0);case"GG":return xl(t.eras("long"),0);case"y":return hi(b);case"yy":return hi(I,l8);case"yyyy":return hi(o);case"yyyyy":return hi(M);case"yyyyyy":return hi(u);case"M":return hi(f);case"MM":return hi(r);case"MMM":return xl(t.months("short",!0),1);case"MMMM":return xl(t.months("long",!0),1);case"L":return hi(f);case"LL":return hi(r);case"LLL":return xl(t.months("short",!1),1);case"LLLL":return xl(t.months("long",!1),1);case"d":return hi(f);case"dd":return hi(r);case"o":return hi(g);case"ooo":return hi(n);case"HH":return hi(r);case"H":return hi(f);case"hh":return hi(r);case"h":return hi(f);case"mm":return hi(r);case"m":return hi(f);case"q":return hi(f);case"qq":return hi(r);case"s":return hi(f);case"ss":return hi(r);case"S":return hi(g);case"SSS":return hi(n);case"u":return I5(E);case"uu":return I5(f);case"uuu":return hi(i);case"a":return xl(t.meridiems(),0);case"kkkk":return hi(o);case"kk":return hi(I,l8);case"W":return hi(f);case"WW":return hi(r);case"E":case"c":return hi(i);case"EEE":return xl(t.weekdays("short",!1),1);case"EEEE":return xl(t.weekdays("long",!1),1);case"ccc":return xl(t.weekdays("short",!0),1);case"cccc":return xl(t.weekdays("long",!0),1);case"Z":case"ZZ":return sG(new RegExp(`([+-]${f.source})(?::(${r.source}))?`),2);case"ZZZ":return sG(new RegExp(`([+-]${f.source})(${r.source})?`),2);case"z":return I5(/[a-z_+-/]{1,256}?/i);case" ":return I5(/[^\S\n\r]/);default:return k(D)}})(e)||{invalidReason:m5e};return P.token=e,P}const _5e={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function S5e(e,t,i){const{type:r,value:n}=e;if(r==="literal"){const g=/^\s+$/.test(n);return{literal:!g,val:g?" ":n}}const o=t[r];let u=r;r==="hour"&&(t.hour12!=null?u=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?u="hour12":u="hour24":u=i.hour12?"hour12":"hour24");let f=_5e[u];if(typeof f=="object"&&(f=f[o]),f)return{literal:!1,val:f}}function x5e(e){return[`^${e.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,e]}function E5e(e,t,i){const r=e.match(t);if(r){const n={};let o=1;for(const u in i)if(Dv(i,u)){const f=i[u],g=f.groups?f.groups+1:1;!f.literal&&f.token&&(n[f.token.val[0]]=f.deser(r.slice(o,o+g))),o+=g}return[r,n]}else return[r,{}]}function I5e(e){const t=o=>{switch(o){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return _t(e.z)||(i=Vo.create(e.z)),_t(e.Z)||(i||(i=new tn(e.Z)),r=e.Z),_t(e.q)||(e.M=(e.q-1)*3+1),_t(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),_t(e.u)||(e.S=KN(e.u)),[Object.keys(e).reduce((o,u)=>{const f=t(u);return f&&(o[f]=e[u]),o},{}),i,r]}let pM=null;function T5e(){return pM||(pM=Ze.fromMillis(1555555555555)),pM}function $5e(e,t){if(e.literal)return e;const i=Rs.macroTokenToFormatOpts(e.val),r=Jre(i,t);return r==null||r.includes(void 0)?e:r}function Hre(e,t){return Array.prototype.concat(...e.map(i=>$5e(i,t)))}class Wre{constructor(t,i){if(this.locale=t,this.format=i,this.tokens=Hre(Rs.parseFormat(i),t),this.units=this.tokens.map(r=>b5e(r,t)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,n]=x5e(this.units);this.regex=RegExp(r,"i"),this.handlers=n}}explainFromTokens(t){if(this.isValid){const[i,r]=E5e(t,this.regex,this.handlers),[n,o,u]=r?I5e(r):[null,null,void 0];if(Dv(r,"a")&&Dv(r,"H"))throw new kg("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:r,result:n,zone:o,specificOffset:u}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Zre(e,t,i){return new Wre(e,i).explainFromTokens(t)}function M5e(e,t,i){const{result:r,zone:n,specificOffset:o,invalidReason:u}=Zre(e,t,i);return[r,n,o,u]}function Jre(e,t){if(!e)return null;const r=Rs.create(t,e).dtFormatter(T5e()),n=r.formatToParts(),o=r.resolvedOptions();return n.map(u=>S5e(u,e,o))}const fM="Invalid DateTime",oG=864e13;function Ww(e){return new uu("unsupported zone",`the zone "${e.name}" is not supported`)}function yM(e){return e.weekData===null&&(e.weekData=sI(e.c)),e.weekData}function mM(e){return e.localWeekData===null&&(e.localWeekData=sI(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function jf(e,t){const i={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Ze({...i,...t,old:i})}function Kre(e,t,i){let r=e-t*60*1e3;const n=i.offset(r);if(t===n)return[r,t];r-=(n-t)*60*1e3;const o=i.offset(r);return n===o?[r,n]:[e-Math.min(n,o)*60*1e3,Math.max(n,o)]}function T5(e,t){e+=t*60*1e3;const i=new Date(e);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function _9(e,t,i){return Kre(Y6(e),t,i)}function aG(e,t){const i=e.o,r=e.c.year+Math.trunc(t.years),n=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,o={...e.c,year:r,month:n,day:Math.min(e.c.day,oI(r,n))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},u=ri.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),f=Y6(o);let[g,b]=Kre(f,i,e.zone);return u!==0&&(g+=u,b=e.zone.offset(g)),{ts:g,o:b}}function Om(e,t,i,r,n,o){const{setZone:u,zone:f}=i;if(e&&Object.keys(e).length!==0||t){const g=t||f,b=Ze.fromObject(e,{...i,zone:g,specificOffset:o});return u?b:b.setZone(f)}else return Ze.invalid(new uu("unparsable",`the input "${n}" can't be parsed as ${r}`))}function $5(e,t,i=!0){return e.isValid?Rs.create(gi.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(e,t):null}function gM(e,t){const i=e.c.year>9999||e.c.year<0;let r="";return i&&e.c.year>=0&&(r+="+"),r+=Xr(e.c.year,i?6:4),t?(r+="-",r+=Xr(e.c.month),r+="-",r+=Xr(e.c.day)):(r+=Xr(e.c.month),r+=Xr(e.c.day)),r}function lG(e,t,i,r,n,o){let u=Xr(e.c.hour);return t?(u+=":",u+=Xr(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!i)&&(u+=":")):u+=Xr(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!i)&&(u+=Xr(e.c.second),(e.c.millisecond!==0||!r)&&(u+=".",u+=Xr(e.c.millisecond,3))),n&&(e.isOffsetFixed&&e.offset===0&&!o?u+="Z":e.o<0?(u+="-",u+=Xr(Math.trunc(-e.o/60)),u+=":",u+=Xr(Math.trunc(-e.o%60))):(u+="+",u+=Xr(Math.trunc(e.o/60)),u+=":",u+=Xr(Math.trunc(e.o%60)))),o&&(u+="["+e.zone.ianaName+"]"),u}const Yre={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},C5e={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},A5e={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Xre=["year","month","day","hour","minute","second","millisecond"],k5e=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],L5e=["year","ordinal","hour","minute","second","millisecond"];function O5e(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new Qie(e);return t}function uG(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return O5e(e)}}function R5e(e){return x9[e]||(S9===void 0&&(S9=Ar.now()),x9[e]=e.offset(S9)),x9[e]}function cG(e,t){const i=Lp(t.zone,Ar.defaultZone);if(!i.isValid)return Ze.invalid(Ww(i));const r=gi.fromObject(t);let n,o;if(_t(e.year))n=Ar.now();else{for(const g of Xre)_t(e[g])&&(e[g]=Yre[g]);const u=xre(e)||Ere(e);if(u)return Ze.invalid(u);const f=R5e(i);[n,o]=_9(e,f,i)}return new Ze({ts:n,zone:i,loc:r,o})}function hG(e,t,i){const r=_t(i.round)?!0:i.round,n=(u,f)=>(u=YN(u,r||i.calendary?0:2,!0),t.loc.clone(i).relFormatter(i).format(u,f)),o=u=>i.calendary?t.hasSame(e,u)?0:t.startOf(u).diff(e.startOf(u),u).get(u):t.diff(e,u).get(u);if(i.unit)return n(o(i.unit),i.unit);for(const u of i.units){const f=o(u);if(Math.abs(f)>=1)return n(f,u)}return n(e>t?-0:0,i.units[i.units.length-1])}function dG(e){let t={},i;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],i=Array.from(e).slice(0,e.length-1)):i=Array.from(e),[t,i]}let S9,x9={};class Ze{constructor(t){const i=t.zone||Ar.defaultZone;let r=t.invalid||(Number.isNaN(t.ts)?new uu("invalid input"):null)||(i.isValid?null:Ww(i));this.ts=_t(t.ts)?Ar.now():t.ts;let n=null,o=null;if(!r)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(i))[n,o]=[t.old.c,t.old.o];else{const f=nf(t.o)&&!t.old?t.o:i.offset(this.ts);n=T5(this.ts,f),r=Number.isNaN(n.year)?new uu("invalid input"):null,n=r?null:n,o=r?null:f}this._zone=i,this.loc=t.loc||gi.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=n,this.o=o,this.isLuxonDateTime=!0}static now(){return new Ze({})}static local(){const[t,i]=dG(arguments),[r,n,o,u,f,g,b]=i;return cG({year:r,month:n,day:o,hour:u,minute:f,second:g,millisecond:b},t)}static utc(){const[t,i]=dG(arguments),[r,n,o,u,f,g,b]=i;return t.zone=tn.utcInstance,cG({year:r,month:n,day:o,hour:u,minute:f,second:g,millisecond:b},t)}static fromJSDate(t,i={}){const r=cSe(t)?t.valueOf():NaN;if(Number.isNaN(r))return Ze.invalid("invalid input");const n=Lp(i.zone,Ar.defaultZone);return n.isValid?new Ze({ts:r,zone:n,loc:gi.fromObject(i)}):Ze.invalid(Ww(n))}static fromMillis(t,i={}){if(nf(t))return t<-oG||t>oG?Ze.invalid("Timestamp out of range"):new Ze({ts:t,zone:Lp(i.zone,Ar.defaultZone),loc:gi.fromObject(i)});throw new As(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,i={}){if(nf(t))return new Ze({ts:t*1e3,zone:Lp(i.zone,Ar.defaultZone),loc:gi.fromObject(i)});throw new As("fromSeconds requires a numerical input")}static fromObject(t,i={}){t=t||{};const r=Lp(i.zone,Ar.defaultZone);if(!r.isValid)return Ze.invalid(Ww(r));const n=gi.fromObject(i),o=aI(t,uG),{minDaysInFirstWeek:u,startOfWeek:f}=KU(o,n),g=Ar.now(),b=_t(i.specificOffset)?r.offset(g):i.specificOffset,E=!_t(o.ordinal),I=!_t(o.year),M=!_t(o.month)||!_t(o.day),k=I||M,L=o.weekYear||o.weekNumber;if((k||E)&&L)throw new kg("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(M&&E)throw new kg("Can't mix ordinal dates with month/day");const P=L||o.weekday&&!k;let D,j,z=T5(g,b);P?(D=k5e,j=C5e,z=sI(z,u,f)):E?(D=L5e,j=A5e,z=dM(z)):(D=Xre,j=Yre);let V=!1;for(const le of D){const xe=o[le];_t(xe)?V?o[le]=j[le]:o[le]=z[le]:V=!0}const W=P?aSe(o,u,f):E?lSe(o):xre(o),Q=W||Ere(o);if(Q)return Ze.invalid(Q);const Z=P?ZU(o,u,f):E?JU(o):o,[ee,ie]=_9(Z,b,r),oe=new Ze({ts:ee,zone:r,o:ie,loc:n});return o.weekday&&k&&t.weekday!==oe.weekday?Ze.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${oe.toISO()}`):oe.isValid?oe:Ze.invalid(oe.invalid)}static fromISO(t,i={}){const[r,n]=QSe(t);return Om(r,n,i,"ISO 8601",t)}static fromRFC2822(t,i={}){const[r,n]=e5e(t);return Om(r,n,i,"RFC 2822",t)}static fromHTTP(t,i={}){const[r,n]=t5e(t);return Om(r,n,i,"HTTP",i)}static fromFormat(t,i,r={}){if(_t(t)||_t(i))throw new As("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:o=null}=r,u=gi.fromOpts({locale:n,numberingSystem:o,defaultToEN:!0}),[f,g,b,E]=M5e(u,t,i);return E?Ze.invalid(E):Om(f,g,r,`format ${i}`,t,b)}static fromString(t,i,r={}){return Ze.fromFormat(t,i,r)}static fromSQL(t,i={}){const[r,n]=l5e(t);return Om(r,n,i,"SQL",t)}static invalid(t,i=null){if(!t)throw new As("need to specify a reason the DateTime is invalid");const r=t instanceof uu?t:new uu(t,i);if(Ar.throwOnInvalid)throw new R_e(r);return new Ze({invalid:r})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,i={}){const r=Jre(t,gi.fromObject(i));return r?r.map(n=>n?n.val:null).join(""):null}static expandFormat(t,i={}){return Hre(Rs.parseFormat(t),gi.fromObject(i)).map(n=>n.val).join("")}static resetCache(){S9=void 0,x9={}}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?yM(this).weekYear:NaN}get weekNumber(){return this.isValid?yM(this).weekNumber:NaN}get weekday(){return this.isValid?yM(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?mM(this).weekday:NaN}get localWeekNumber(){return this.isValid?mM(this).weekNumber:NaN}get localWeekYear(){return this.isValid?mM(this).weekYear:NaN}get ordinal(){return this.isValid?dM(this.c).ordinal:NaN}get monthShort(){return this.isValid?E5.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?E5.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?E5.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?E5.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,i=6e4,r=Y6(this.c),n=this.zone.offset(r-t),o=this.zone.offset(r+t),u=this.zone.offset(r-n*i),f=this.zone.offset(r-o*i);if(u===f)return[this];const g=r-u*i,b=r-f*i,E=T5(g,u),I=T5(b,f);return E.hour===I.hour&&E.minute===I.minute&&E.second===I.second&&E.millisecond===I.millisecond?[jf(this,{ts:g}),jf(this,{ts:b})]:[this]}get isInLeapYear(){return yS(this.year)}get daysInMonth(){return oI(this.year,this.month)}get daysInYear(){return this.isValid?tv(this.year):NaN}get weeksInWeekYear(){return this.isValid?v_(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?v_(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:i,numberingSystem:r,calendar:n}=Rs.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:n}}toUTC(t=0,i={}){return this.setZone(tn.instance(t),i)}toLocal(){return this.setZone(Ar.defaultZone)}setZone(t,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(t=Lp(t,Ar.defaultZone),t.equals(this.zone))return this;if(t.isValid){let n=this.ts;if(i||r){const o=t.offset(this.ts),u=this.toObject();[n]=_9(u,o,t)}return jf(this,{ts:n,zone:t})}else return Ze.invalid(Ww(t))}reconfigure({locale:t,numberingSystem:i,outputCalendar:r}={}){const n=this.loc.clone({locale:t,numberingSystem:i,outputCalendar:r});return jf(this,{loc:n})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const i=aI(t,uG),{minDaysInFirstWeek:r,startOfWeek:n}=KU(i,this.loc),o=!_t(i.weekYear)||!_t(i.weekNumber)||!_t(i.weekday),u=!_t(i.ordinal),f=!_t(i.year),g=!_t(i.month)||!_t(i.day),b=f||g,E=i.weekYear||i.weekNumber;if((b||u)&&E)throw new kg("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(g&&u)throw new kg("Can't mix ordinal dates with month/day");let I;o?I=ZU({...sI(this.c,r,n),...i},r,n):_t(i.ordinal)?(I={...this.toObject(),...i},_t(i.day)&&(I.day=Math.min(oI(I.year,I.month),I.day))):I=JU({...dM(this.c),...i});const[M,k]=_9(I,this.o,this.zone);return jf(this,{ts:M,o:k})}plus(t){if(!this.isValid)return this;const i=ri.fromDurationLike(t);return jf(this,aG(this,i))}minus(t){if(!this.isValid)return this;const i=ri.fromDurationLike(t).negate();return jf(this,aG(this,i))}startOf(t,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const r={},n=ri.normalizeUnit(t);switch(n){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(n==="weeks")if(i){const o=this.loc.getStartOfWeek(),{weekday:u}=this;u<o&&(r.weekNumber=this.weekNumber-1),r.weekday=o}else r.weekday=1;if(n==="quarters"){const o=Math.ceil(this.month/3);r.month=(o-1)*3+1}return this.set(r)}endOf(t,i){return this.isValid?this.plus({[t]:1}).startOf(t,i).minus(1):this}toFormat(t,i={}){return this.isValid?Rs.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,t):fM}toLocaleString(t=nI,i={}){return this.isValid?Rs.create(this.loc.clone(i),t).formatDateTime(this):fM}toLocaleParts(t={}){return this.isValid?Rs.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:n=!0,extendedZone:o=!1}={}){if(!this.isValid)return null;const u=t==="extended";let f=gM(this,u);return f+="T",f+=lG(this,u,i,r,n,o),f}toISODate({format:t="extended"}={}){return this.isValid?gM(this,t==="extended"):null}toISOWeekDate(){return $5(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:n=!1,extendedZone:o=!1,format:u="extended"}={}){return this.isValid?(n?"T":"")+lG(this,u==="extended",i,t,r,o):null}toRFC2822(){return $5(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return $5(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?gM(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let n="HH:mm:ss.SSS";return(i||t)&&(r&&(n+=" "),i?n+="z":t&&(n+="ZZ")),$5(this,n,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():fM}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const i={...this.c};return t.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,i="milliseconds",r={}){if(!this.isValid||!t.isValid)return ri.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...r},o=hSe(i).map(ri.normalizeUnit),u=t.valueOf()>this.valueOf(),f=u?this:t,g=u?t:this,b=y5e(f,g,o,n);return u?b.negate():b}diffNow(t="milliseconds",i={}){return this.diff(Ze.now(),t,i)}until(t){return this.isValid?Cr.fromDateTimes(this,t):this}hasSame(t,i,r){if(!this.isValid)return!1;const n=t.valueOf(),o=this.setZone(t.zone,{keepLocalTime:!0});return o.startOf(i,r)<=n&&n<=o.endOf(i,r)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const i=t.base||Ze.fromObject({},{zone:this.zone}),r=t.padding?this<i?-t.padding:t.padding:0;let n=["years","months","days","hours","minutes","seconds"],o=t.unit;return Array.isArray(t.unit)&&(n=t.unit,o=void 0),hG(i,this.plus(r),{...t,numeric:"always",units:n,unit:o})}toRelativeCalendar(t={}){return this.isValid?hG(t.base||Ze.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Ze.isDateTime))throw new As("min requires all arguments be DateTimes");return YU(t,i=>i.valueOf(),Math.min)}static max(...t){if(!t.every(Ze.isDateTime))throw new As("max requires all arguments be DateTimes");return YU(t,i=>i.valueOf(),Math.max)}static fromFormatExplain(t,i,r={}){const{locale:n=null,numberingSystem:o=null}=r,u=gi.fromOpts({locale:n,numberingSystem:o,defaultToEN:!0});return Zre(u,t,i)}static fromStringExplain(t,i,r={}){return Ze.fromFormatExplain(t,i,r)}static buildFormatParser(t,i={}){const{locale:r=null,numberingSystem:n=null}=i,o=gi.fromOpts({locale:r,numberingSystem:n,defaultToEN:!0});return new Wre(o,t)}static fromFormatParser(t,i,r={}){if(_t(t)||_t(i))throw new As("fromFormatParser requires an input string and a format parser");const{locale:n=null,numberingSystem:o=null}=r,u=gi.fromOpts({locale:n,numberingSystem:o,defaultToEN:!0});if(!u.equals(i.locale))throw new As(`fromFormatParser called with a locale of ${u}, but the format parser was created for ${i.locale}`);const{result:f,zone:g,specificOffset:b,invalidReason:E}=i.explainFromTokens(t);return E?Ze.invalid(E):Om(f,g,r,`format ${i.format}`,t,b)}static get DATE_SHORT(){return nI}static get DATE_MED(){return ere}static get DATE_MED_WITH_WEEKDAY(){return F_e}static get DATE_FULL(){return tre}static get DATE_HUGE(){return ire}static get TIME_SIMPLE(){return rre}static get TIME_WITH_SECONDS(){return nre}static get TIME_WITH_SHORT_OFFSET(){return sre}static get TIME_WITH_LONG_OFFSET(){return ore}static get TIME_24_SIMPLE(){return are}static get TIME_24_WITH_SECONDS(){return lre}static get TIME_24_WITH_SHORT_OFFSET(){return ure}static get TIME_24_WITH_LONG_OFFSET(){return cre}static get DATETIME_SHORT(){return hre}static get DATETIME_SHORT_WITH_SECONDS(){return dre}static get DATETIME_MED(){return pre}static get DATETIME_MED_WITH_SECONDS(){return fre}static get DATETIME_MED_WITH_WEEKDAY(){return D_e}static get DATETIME_FULL(){return yre}static get DATETIME_FULL_WITH_SECONDS(){return mre}static get DATETIME_HUGE(){return gre}static get DATETIME_HUGE_WITH_SECONDS(){return vre}}function sw(e){if(Ze.isDateTime(e))return e;if(e&&e.valueOf&&nf(e.valueOf()))return Ze.fromJSDate(e);if(e&&typeof e=="object")return Ze.fromObject(e);throw new As(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const ba="system",Qy="unknown",kc="UTC",P5e=Intl.DateTimeFormat().resolvedOptions().timeZone,N5e="shortOffset";function F5e(e){return"timeZoneIANA"in e}function D5e(e){return e.startsWith("UTC")}function lI(e,t=!1){return{json:{read:{source:e,reader:(i,r)=>r[e]?E9(r[e]):null},write:!!t&&{allowNull:!0,writer(i,r){r[e]=i?j5e(i):null}}}}}function E9(e,t=ba){return e?F5e(e)?e.timeZoneIANA:z5e(e,t):t}function j5e(e){return{timeZoneIANA:e}}function z5e(e,t=ba){if(!e||!NU.has(e.timeZone))return t;const i=NU.get(e.timeZone);return D5e(e.timeZone)||e.respectsDaylightSaving?i:V5e(i)}function V5e(e){const t=Ze.local().setZone(e),i=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${tn.instance(-i).formatOffset(0,"narrow")}`}function Qre(e,t,i,r,n){if(t&&n==="date")return{timeZone:kc,timeZoneName:void 0};const o=r.timeStyle||r.hour,u=i===Qy;return{timeZone:u?n==="timestamp-offset"?void 0:e??kc:i,timeZoneName:u&&o?N5e:void 0}}function U5e(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map(r=>r.toLowerCase()));return e===ba||e===Qy||t.has(e.toLowerCase())||i.has(e.toLowerCase())}const G5e={year:void 0,month:void 0,day:void 0,weekday:void 0},B5e={hour:void 0,minute:void 0,second:void 0},ene={timeZone:kc},ku={year:"numeric",month:"numeric",day:"numeric"},ow={year:"numeric",month:"long",day:"numeric"},aw={year:"numeric",month:"short",day:"numeric"},lw={year:"numeric",month:"long",weekday:"long",day:"numeric"},Sp={hour:"numeric",minute:"numeric"},i0={...Sp,second:"numeric"},tne={hourCycle:"h23"},uw={...Sp,...tne},cw={...i0,...tne},ine={"short-date":ku,"short-date-short-time":{...ku,...Sp},"short-date-short-time-24":{...ku,...uw},"short-date-long-time":{...ku,...i0},"short-date-long-time-24":{...ku,...cw},"short-date-le":ku,"short-date-le-short-time":{...ku,...Sp},"short-date-le-short-time-24":{...ku,...uw},"short-date-le-long-time":{...ku,...i0},"short-date-le-long-time-24":{...ku,...cw},"long-month-day-year":ow,"long-month-day-year-short-time":{...ow,...Sp},"long-month-day-year-short-time-24":{...ow,...uw},"long-month-day-year-long-time":{...ow,...i0},"long-month-day-year-long-time-24":{...ow,...cw},"day-short-month-year":aw,"day-short-month-year-short-time":{...aw,...Sp},"day-short-month-year-short-time-24":{...aw,...uw},"day-short-month-year-long-time":{...aw,...i0},"day-short-month-year-long-time-24":{...aw,...cw},"long-date":lw,"long-date-short-time":{...lw,...Sp},"long-date-short-time-24":{...lw,...uw},"long-date-long-time":{...lw,...i0},"long-date-long-time-24":{...lw,...cw},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Sp,"long-time":i0},q5e=_n()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),rne={ar:"ar-u-nu-latn-ca-gregory"};let u8=new WeakMap;const eT=ine["short-date-short-time"];function H5e(e){let t=u8.get(e);if(!t){const i=Ds(),r=rne[i]||i,n=tF(e.timeZone??ba),o={...e,timeZone:n};t=new Intl.DateTimeFormat(r,o),u8.set(e,t)}return t}function X0(e){return ine[e]}function Oo(e,t=eT){return H5e(t).format(e)}function W5e(e,t=eT){return Oo(new Date(e),{...t,...ene,...B5e})}function Z5e(e,t=eT){return Oo(new Date(`1970-01-01T${e}Z`),{...t,...ene,...G5e})}function J5e(e,t=eT){if(t.timeZone)return Oo(new Date(e),t);const i=Ze.fromISO(e,{setZone:!0}),r=Ds(),n=rne[r]??r,o=i.offset===0?kc:t.timeZone,u={...t,timeZone:o};return i.toLocaleString(u,{locale:n})}function tF(e){switch(e){case ba:return P5e;case Qy:return kc;default:return e}}HN(()=>{u8=new WeakMap});const K5e={ar:"ar-u-nu-latn"};let I9=new WeakMap,nne={};function c8(e){const t=e||nne;if(!I9.has(t)){const i=Ds(),r=K5e[Ds()]||i;I9.set(t,new Intl.NumberFormat(r,e))}return I9.get(t)}function uI(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function as(e,t){return Object.is(e,-0)&&(e=0),c8(t).format(e)}function brt(e,t=Ds()){var r,n;if(!e)return null;let i=pG.get(t);if(!i){const o=c8().formatToParts(12345.6),u=[...c8({useGrouping:!1}).format(9876543210)].reverse(),f=new Map(u.map((k,L)=>[k,L])),g=new RegExp(`[${(r=o.find(k=>k.type==="group"))==null?void 0:r.value}]`,"g"),b=new RegExp(`[${(n=o.find(k=>k.type==="decimal"))==null?void 0:n.value}]`),E=new RegExp(`[${u.join("")}]`,"g"),I=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,M=/[-\u2212\u2013\u2014\u2015]/g;i=k=>{if((k=k.trim().replaceAll(g,"").replace(b,".").replace(E,P=>String(f.get(P))).replaceAll(I,"").replaceAll(M,"-"))==="")return null;const L=Number(k);return isNaN(L)?null:L},pG.set(t,i)}return i(e)}HN(()=>{I9=new WeakMap,nne={}});const pG=new Map,sne=()=>Se.getLogger("esri.intl.substitute");function Rn(e,t,i={}){const{format:r={}}=i;return wu(e,n=>Y5e(n,t,r))}function Y5e(e,t,i){let r,n;const o=e.indexOf(":");if(o===-1?r=e.trim():(r=e.slice(0,o).trim(),n=e.slice(o+1).trim()),!r)return"";const u=iS(r,t);if(u==null)return"";const f=(n?i==null?void 0:i[n]:null)??(i==null?void 0:i[r]);return f?X5e(u,f):n?Q5e(u,n):iF(u)}function X5e(e,t){switch(t.type){case"date":return Oo(e,t.intlOptions);case"number":return as(e,t.intlOptions);default:return sne().warn("missing format descriptor for key {key}"),iF(e)}}function Q5e(e,t){switch(t.toLowerCase()){case"dateformat":return Oo(e);case"numberformat":return as(e);default:return sne().warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?Oo(e):/^numberformat/i.test(t)?as(e):iF(e)}}function iF(e){switch(typeof e){case"string":return e;case"number":return as(e);case"boolean":return""+e;default:return e instanceof Date?Oo(e):""}}const fG=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,exe={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function yG(e){return e in exe}const Zw=[],rv=new Map;function mG(e){for(const t of rv.keys())one(e.pattern,t)&&rv.delete(t)}function txe(e){return Zw.includes(e)||(mG(e),Zw.unshift(e)),Yt(()=>{const t=Zw.indexOf(e);t>-1&&(Zw.splice(t,1),mG(e))})}async function vS(e){const t=Ds();rv.has(e)||rv.set(e,rxe(e,t));const i=rv.get(e);return i&&await nxe.add(i),i}function ixe(e){if(!fG.test(e))return null;const t=fG.exec(e);if(t===null)return null;const[,i,r]=t,n=i+(r?"-"+r.toUpperCase():"");return yG(n)?n:yG(i)?i:null}async function rxe(e,t){const i=[];for(const r of Zw)if(one(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(n){i.push(n)}throw i.length?new ne("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:i}):new ne("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function one(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}HN(()=>{rv.clear()});const nxe=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=wa())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function sxe(e,t,i,r){const n=t.exec(i);if(!n)throw new ne("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const o=n[1]?`${n[1]}/`:"",u=n[2],f=ixe(r),g=`${o}${u}.json`,b=f?`${o}${u}_${f}.json`:g;let E;try{E=await gG(e(b))}catch(I){if(b===g)throw new ne("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:I});try{E=await gG(e(g))}catch(M){throw new ne("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:M})}}return E}async function gG(e){if(vG.fetchBundleAsset!=null)return vG.fetchBundleAsset(e);const t=await Ct(e,{responseType:"text"});return JSON.parse(t.data)}let oxe=class{constructor({base:t="",pattern:i,location:r=new URL(window.location.href)}){let n;n=typeof r=="string"?o=>new URL(o,new URL(r,window.location.href)).href:r instanceof URL?o=>new URL(o,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=n,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,i){return sxe(this.getAssetUrl,this.matcher,t,i)}};function axe(e){return new oxe(e)}const vG={};txe(axe({pattern:"esri/",location:Vt}));const wG={};function lxe(e){var i;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:((i=e.packages)==null?void 0:i.slice())||[],paths:{...wG.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=wG.baseUrl),t}let uxe=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>t[i](...r)})}},T9=class{constructor(){this._dispatcher=new uxe,this._workerPostMessage({type:On.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){Cv(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,i,r){this._dispatcher.addEventListener(t,i,r)}removeEventListener(t,i,r){this._dispatcher.removeEventListener(t,i,r)}_workerPostMessage(t){Cv(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const i=g_(t);if(i&&i.type===On.OPEN){const{modulePath:r,jobId:n}=i;let o=await pf.loadWorker(r);o||(o=await import(r));const u=pf.connect(o);this._workerPostMessage({type:On.OPENED,jobId:n,data:u})}}};const h8=()=>Se.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:cxe}=On,hxe='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let M5,C5;const bG="Failed to create Worker. Fallback to execute module in main thread";async function dxe(){if(!we("esri-workers"))return _G(new T9);if(!M5&&!C5)try{const t=hxe.split("{CONFIGURATION}").join(pxe());M5=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){C5=t||{}}let e;if(M5)try{e=new Worker(M5,{name:"esri-worker-"+fxe++})}catch{h8().warn(bG,C5),e=new T9}else h8().warn(bG,C5),e=new T9;return _G(e)}async function _G(e){return new Promise(t=>{function i(n){const o=g_(n);o&&o.type===cxe&&(e.removeEventListener("message",i),e.removeEventListener("error",r),t(e))}function r(n){n.preventDefault(),e.removeEventListener("message",i),e.removeEventListener("error",r),h8().warn("Failed to create Worker. Fallback to execute module in main thread",n),(e=new T9).addEventListener("message",i),e.addEventListener("error",r)}e.addEventListener("message",i),e.addEventListener("error",r)})}function pxe(){let e;if(Kt.default!=null){const n={...Kt};delete n.default,e=JSON.parse(JSON.stringify(n))}else e=JSON.parse(JSON.stringify(Kt));e.assetsPath=Co(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?Co(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=Ds(),e.has={"esri-csp-restrictions":we("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":we("esri-2d-update-debug"),"esri-2d-log-updating":we("esri-2d-log-updating"),"featurelayer-pbf":we("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":we("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":we("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":we("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":we("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":we("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":we("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":we("featurelayer-snapshot-enabled"),"esri-atomics":we("esri-atomics"),"esri-shared-array-buffer":we("esri-shared-array-buffer"),"esri-tiles-debug":we("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":we("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":we("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=Co(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=Co(e.workers.workerPath):e.workers.workerPath=Co(Vt("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=Kt.workers.loaderConfig,i=lxe({baseUrl:t==null?void 0:t.baseUrl,locale:Ds(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]});return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:{buildDate:Rte,fullVersion:$N,revision:Pte}})}let fxe=0;const{ABORT:SG,INVOKE:yxe,OPEN:mxe,OPENED:gxe,RESPONSE:hw}=On;let vxe=class ane{static async create(t){const i=await dxe();return new ane(i,t)}constructor(t,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=i,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",r=>{r.preventDefault(),Se.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(t,i={}){const{signal:r}=i,n=Yie();return new Promise((o,u)=>{const f={resolve:o,reject:u,abortHandle:yN(r,()=>{this._outJobs.delete(n),this._post({type:SG,jobId:n})})};this._outJobs.set(n,f),this._post({type:mxe,jobId:n,modulePath:t})})}_onMessage(t){const i=g_(t);if(i)switch(i.type){case gxe:this._onOpenedMessage(i);break;case hw:this._onResponseMessage(i);break;case SG:this._onAbortMessage(i);break;case yxe:this._onInvokeMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,n=i.get(r);n&&(n.controller&&n.controller.abort(),i.delete(r))}_onInvokeMessage(t){const{methodName:i,jobId:r,data:n,abortable:o}=t,u=o?new AbortController:null,f=this._inJobs,g=k_e[i];let b;try{if(typeof g!="function")throw new TypeError(`${i} is not a function`);b=g.call(null,n,{signal:u?u.signal:null})}catch(E){return void this._post({type:hw,jobId:r,error:m_(E)})}Fc(b)?(f.set(r,{controller:u,promise:b}),b.then(E=>{f.has(r)&&(f.delete(r),this._post({type:hw,jobId:r},E))},E=>{f.has(r)&&(f.delete(r),E||(E={message:"Error encountered at method"+i}),Or(E)||this._post({type:hw,jobId:r,error:m_(E||{message:`Error encountered at method ${i}`})}))})):this._post({type:hw,jobId:r},b)}_onOpenedMessage(t){const{jobId:i,data:r}=t,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),tr(n.abortHandle),n.resolve(r))}_onResponseMessage(t){const{jobId:i,error:r,data:n}=t,o=this._outJobs.get(i);o&&(this._outJobs.delete(i),tr(o.abortHandle),r?o.reject(ne.fromJSON(JSON.parse(r))):o.resolve(n))}_post(t,i,r){return qN(this.worker,t,i,r)}};const xG=we("host-browser")?Math.min(navigator.hardwareConcurrency-1,we("workers-pool-size")??8):0;let py=we("esri-mobile")?Math.min(xG,3):xG;py||(py=we("safari")&&we("mac")?7:2);let EG=0;const $9=[];function wxe(){lne()}async function A5(e,t){const i=new A_e,{registryTarget:r,...n}=t;return await i.open(e,n),r&&b_e(r,i),i}async function bxe(e,t={}){if(typeof e!="string")throw new ne("workers:undefined-module","modulePath is missing");let i=t.strategy||"distributed";if(we("host-webworker")&&!we("esri-workers")&&(i="local"),i==="local"){let r=await pf.loadWorker(e);r||(r=await import(e)),Li(t.signal);const n=t.client||r;return A5([pf.connect(r,t.schedule)],{...t,client:n})}if(await lne(),Li(t.signal),i==="dedicated"){const r=EG++%py;return A5([await $9[r].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const r=Math.min(t.maxNumWorkers,py);if(r<py){const n=new Array(r);for(let o=0;o<r;++o){const u=EG++%py;n[o]=$9[u].open(e,t)}return A5(n,t)}}return A5($9.map(r=>r.open(e,t)),t)}let k5=null;async function lne(){if(k5)return k5;new AbortController;const e=[];for(let t=0;t<py;t++){const i=vxe.create(t).then(r=>($9[t]=r,r));e.push(i)}return k5=Promise.all(e),k5}function nt(){return[0,0,0]}function _a(e){return[e[0],e[1],e[2]]}function Lc(e,t,i){return[e,t,i]}function _xe(e,t,i){return[e,t,i]}function Sxe(e,t=nt()){const i=Math.min(3,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function xxe(e,t){return new Float64Array(e,t,3)}function une(){return nt()}function cne(){return Lc(1,1,1)}function hne(){return Lc(1,0,0)}function dne(){return Lc(0,1,0)}function pne(){return Lc(0,0,1)}const Exe=une(),fne=cne(),Ixe=hne(),Txe=dne(),yne=pne();Object.freeze(Object.defineProperty({__proto__:null,ONES:fne,UNIT_X:Ixe,UNIT_Y:Txe,UNIT_Z:yne,ZEROS:Exe,clone:_a,create:nt,createView:xxe,freeze:_xe,fromArray:Sxe,fromValues:Lc,ones:cne,unitX:hne,unitY:dne,unitZ:pne,zeros:une},Symbol.toStringTag,{value:"Module"}));const Xs=Math.PI/180,$xe=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Md=br.radius,El=br.eccentricitySquared,Mxe={a1:Md*El,a2:Md*El*Md*El,a3:Md*El*El/2,a4:Md*El*Md*El*2.5,a5:Md*El+Md*El*El/2,a6:1-El},Cxe={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:br.radius,f:br.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:hf.radius,f:hf.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Ic.radius,f:Ic.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Ic.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var ve;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=7]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=9]="GCSMOON2000",e[e.LON_LAT=10]="LON_LAT",e[e.PLATE_CARREE=11]="PLATE_CARREE"})(ve||(ve={}));const Axe={[ve.WGS84]:{[ve.CGCS2000]:Yi,[ve.GCSMARS2000]:null,[ve.GCSMOON2000]:null,[ve.LON_LAT]:Yi,[ve.SPHERICAL_ECEF]:_3,[ve.SPHERICAL_MARS_PCPF]:null,[ve.SPHERICAL_MOON_PCPF]:null,[ve.UNKNOWN]:null,[ve.WEB_MERCATOR]:nv,[ve.PLATE_CARREE]:sv,[ve.WGS84]:Yi,[ve.WGS84_ECEF]:lv},[ve.CGCS2000]:{[ve.CGCS2000]:Yi,[ve.GCSMARS2000]:null,[ve.GCSMOON2000]:null,[ve.LON_LAT]:Yi,[ve.SPHERICAL_ECEF]:_3,[ve.SPHERICAL_MARS_PCPF]:null,[ve.SPHERICAL_MOON_PCPF]:null,[ve.UNKNOWN]:null,[ve.WEB_MERCATOR]:nv,[ve.PLATE_CARREE]:sv,[ve.WGS84]:Yi,[ve.WGS84_ECEF]:lv},[ve.GCSMARS2000]:{[ve.CGCS2000]:null,[ve.GCSMARS2000]:Yi,[ve.GCSMOON2000]:null,[ve.LON_LAT]:Yi,[ve.SPHERICAL_ECEF]:null,[ve.SPHERICAL_MARS_PCPF]:$G,[ve.SPHERICAL_MOON_PCPF]:null,[ve.UNKNOWN]:null,[ve.WEB_MERCATOR]:null,[ve.PLATE_CARREE]:null,[ve.WGS84]:null,[ve.WGS84_ECEF]:null},[ve.GCSMOON2000]:{[ve.CGCS2000]:null,[ve.GCSMARS2000]:null,[ve.GCSMOON2000]:Yi,[ve.LON_LAT]:Yi,[ve.SPHERICAL_ECEF]:null,[ve.SPHERICAL_MARS_PCPF]:null,[ve.SPHERICAL_MOON_PCPF]:TG,[ve.UNKNOWN]:null,[ve.WEB_MERCATOR]:null,[ve.PLATE_CARREE]:null,[ve.WGS84]:null,[ve.WGS84_ECEF]:null},[ve.WEB_MERCATOR]:{[ve.CGCS2000]:b3,[ve.GCSMARS2000]:null,[ve.GCSMOON2000]:null,[ve.LON_LAT]:b3,[ve.SPHERICAL_ECEF]:kxe,[ve.SPHERICAL_MARS_PCPF]:null,[ve.SPHERICAL_MOON_PCPF]:null,[ve.UNKNOWN]:null,[ve.WEB_MERCATOR]:Yi,[ve.PLATE_CARREE]:Rxe,[ve.WGS84]:b3,[ve.WGS84_ECEF]:Lxe},[ve.WGS84_ECEF]:{[ve.CGCS2000]:uv,[ve.GCSMARS2000]:null,[ve.GCSMOON2000]:null,[ve.LON_LAT]:uv,[ve.SPHERICAL_ECEF]:Gxe,[ve.SPHERICAL_MARS_PCPF]:null,[ve.SPHERICAL_MOON_PCPF]:null,[ve.UNKNOWN]:null,[ve.WEB_MERCATOR]:Bxe,[ve.PLATE_CARREE]:Pxe,[ve.WGS84]:uv,[ve.WGS84_ECEF]:Yi},[ve.SPHERICAL_ECEF]:{[ve.CGCS2000]:av,[ve.GCSMARS2000]:null,[ve.GCSMOON2000]:null,[ve.LON_LAT]:av,[ve.SPHERICAL_ECEF]:Yi,[ve.SPHERICAL_MARS_PCPF]:null,[ve.SPHERICAL_MOON_PCPF]:null,[ve.UNKNOWN]:null,[ve.WEB_MERCATOR]:zxe,[ve.PLATE_CARREE]:Nxe,[ve.WGS84]:av,[ve.WGS84_ECEF]:Vxe},[ve.SPHERICAL_MARS_PCPF]:{[ve.CGCS2000]:null,[ve.GCSMARS2000]:CG,[ve.GCSMOON2000]:null,[ve.LON_LAT]:CG,[ve.SPHERICAL_ECEF]:null,[ve.SPHERICAL_MARS_PCPF]:Yi,[ve.SPHERICAL_MOON_PCPF]:null,[ve.UNKNOWN]:null,[ve.WEB_MERCATOR]:null,[ve.PLATE_CARREE]:null,[ve.WGS84]:null,[ve.WGS84_ECEF]:null},[ve.SPHERICAL_MOON_PCPF]:{[ve.CGCS2000]:null,[ve.GCSMARS2000]:null,[ve.GCSMOON2000]:MG,[ve.LON_LAT]:MG,[ve.SPHERICAL_ECEF]:null,[ve.SPHERICAL_MARS_PCPF]:null,[ve.SPHERICAL_MOON_PCPF]:Yi,[ve.UNKNOWN]:null,[ve.WEB_MERCATOR]:null,[ve.PLATE_CARREE]:null,[ve.WGS84]:null,[ve.WGS84_ECEF]:null},[ve.UNKNOWN]:{[ve.CGCS2000]:null,[ve.GCSMARS2000]:null,[ve.GCSMOON2000]:null,[ve.LON_LAT]:null,[ve.SPHERICAL_ECEF]:null,[ve.SPHERICAL_MARS_PCPF]:null,[ve.SPHERICAL_MOON_PCPF]:null,[ve.UNKNOWN]:Yi,[ve.WEB_MERCATOR]:null,[ve.PLATE_CARREE]:null,[ve.WGS84]:null,[ve.WGS84_ECEF]:null},[ve.LON_LAT]:{[ve.CGCS2000]:Yi,[ve.GCSMARS2000]:Yi,[ve.GCSMOON2000]:Yi,[ve.LON_LAT]:Yi,[ve.SPHERICAL_ECEF]:_3,[ve.SPHERICAL_MARS_PCPF]:$G,[ve.SPHERICAL_MOON_PCPF]:TG,[ve.UNKNOWN]:null,[ve.WEB_MERCATOR]:nv,[ve.PLATE_CARREE]:sv,[ve.WGS84]:Yi,[ve.WGS84_ECEF]:lv},[ve.PLATE_CARREE]:{[ve.CGCS2000]:ov,[ve.GCSMARS2000]:null,[ve.GCSMOON2000]:null,[ve.LON_LAT]:ov,[ve.SPHERICAL_ECEF]:Fxe,[ve.SPHERICAL_MARS_PCPF]:null,[ve.SPHERICAL_MOON_PCPF]:null,[ve.UNKNOWN]:null,[ve.WEB_MERCATOR]:Dxe,[ve.PLATE_CARREE]:Yi,[ve.WGS84]:ov,[ve.WGS84_ECEF]:jxe}};function mne(e,t,i=gne()){return e==null||t==null?null:qxe(e,t,i).projector}function IG(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=xu(e,1)),eI(e)?t.spatialReferenceId=ve.SPHERICAL_ECEF:Wy(e)?t.spatialReferenceId=ve.WGS84:bu(e)?t.spatialReferenceId=ve.WEB_MERCATOR:Cbe(e)?t.spatialReferenceId=ve.PLATE_CARREE:e.wkt===Obe.wkt?t.spatialReferenceId=ve.WGS84_ECEF:e.wkid===Hy.CGCS2000?t.spatialReferenceId=ve.CGCS2000:e.wkt===AN.wkt?t.spatialReferenceId=ve.SPHERICAL_MARS_PCPF:e.wkt===kN.wkt?t.spatialReferenceId=ve.SPHERICAL_MOON_PCPF:Wte(e)?t.spatialReferenceId=ve.GCSMARS2000:Zte(e)?t.spatialReferenceId=ve.GCSMOON2000:t.spatialReferenceId=ve.UNKNOWN):ve.UNKNOWN}function Yi(e,t,i,r){e!==i&&(i[r++]=e[t++],i[r++]=e[t++],i[r]=e[t])}function b3(e,t,i,r){i[r]=zv*(e[t]/Iy),i[r+1]=zv*(wne-2*Math.atan(Math.exp(-e[t+1]/Iy))),i[r+2]=e[t+2]}function kxe(e,t,i,r){const n=e[t]/Iy,o=wne-2*Math.atan(Math.exp(-e[t+1]/Iy)),u=Iy+e[t+2],f=Math.cos(o)*u;i[r]=Math.cos(n)*f,i[r+1]=Math.sin(n)*f,i[r+2]=Math.sin(o)*u}function Lxe(e,t,i,r){b3(e,t,i,r),lv(i,r,i,r)}function Oxe(e,t,i,r,n){const o=.4999999*tT,u=oo(jv*e[t+1],-o,o),f=Math.sin(u);i[r++]=jv*e[t]*n.radius,i[r++]=n.halfSemiMajorAxis*Math.log((1+f)/(1-f)),i[r]=e[t+2]}function nv(e,t,i,r){Oxe(e,t,i,r,br)}function sv(e,t,i,r){i[r]=e[t]*AG,i[r+1]=e[t+1]*AG,i[r+2]=e[t+2]}function ov(e,t,i,r){i[r]=e[t]*kG,i[r+1]=e[t+1]*kG,i[r+2]=e[t+2]}function Rxe(e,t,i,r){b3(e,t,i,r),sv(i,r,i,r)}function Pxe(e,t,i,r){uv(e,t,i,r),sv(i,r,i,r)}function Nxe(e,t,i,r){av(e,t,i,r),sv(i,r,i,r)}function Fxe(e,t,i,r){ov(e,t,i,r),_3(i,r,i,r)}function Dxe(e,t,i,r){ov(e,t,i,r),nv(i,r,i,r)}function jxe(e,t,i,r){ov(e,t,i,r),lv(i,r,i,r)}function rF(e,t,i,r,n){const o=n+e[t+2],u=jv*e[t+1],f=jv*e[t],g=Math.cos(u)*o;i[r]=Math.cos(f)*g,i[r+1]=Math.sin(f)*g,i[r+2]=Math.sin(u)*o}function TG(e,t,i,r){rF(e,t,i,r,hf.radius)}function $G(e,t,i,r){rF(e,t,i,r,Ic.radius)}function _3(e,t,i,r){rF(e,t,i,r,br.radius)}function nF(e,t,i,r,n){const o=e[t],u=e[t+1],f=e[t+2],g=Math.sqrt(o*o+u*u+f*f),b=PN(f/(g===0?1:g)),E=Math.atan2(u,o);i[r++]=zv*E,i[r++]=zv*b,i[r]=g-n}function MG(e,t,i,r){nF(e,t,i,r,hf.radius)}function CG(e,t,i,r){nF(e,t,i,r,Ic.radius)}function av(e,t,i,r){nF(e,t,i,r,br.radius)}function zxe(e,t,i,r){av(e,t,i,r),nv(i,r,i,r)}function Vxe(e,t,i,r){av(e,t,i,r),lv(i,r,i,r)}function Uxe(e,t,i,r,n){const o=jv*e[t],u=jv*e[t+1],f=e[t+2],g=Math.sin(u),b=Math.cos(u),E=n.radius/Math.sqrt(1-n.eccentricitySquared*g*g);i[r++]=(E+f)*b*Math.cos(o),i[r++]=(E+f)*b*Math.sin(o),i[r++]=(E*(1-n.eccentricitySquared)+f)*g}function lv(e,t,i,r){Uxe(e,t,i,r,br)}function uv(e,t,i,r){const n=Mxe,o=e[t],u=e[t+1],f=e[t+2];let g,b,E,I,M,k,L,P,D,j,z,V,W,Q,Z,ee,ie,oe,le,xe,$e;g=Math.abs(f),b=o*o+u*u,E=Math.sqrt(b),I=b+f*f,M=Math.sqrt(I),xe=Math.atan2(u,o),k=f*f/I,L=b/I,Q=n.a2/M,Z=n.a3-n.a4/M,L>.3?(P=g/M*(1+L*(n.a1+Q+k*Z)/M),le=Math.asin(P),j=P*P,D=Math.sqrt(1-j)):(D=E/M*(1-k*(n.a5-Q-L*Z)/M),le=Math.acos(D),j=1-D*D,P=Math.sqrt(j)),z=1-br.eccentricitySquared*j,V=br.radius/Math.sqrt(z),W=n.a6*V,Q=E-V*D,Z=g-W*P,ie=D*Q+P*Z,ee=D*Z-P*Q,oe=ee/(W/z+ie),le+=oe,$e=ie+ee*oe/2,f<0&&(le=-le),i[r++]=zv*xe,i[r++]=zv*le,i[r]=$e}function Gxe(e,t,i,r){uv(e,t,i,r),_3(i,r,i,r)}function Bxe(e,t,i,r){uv(e,t,i,r),nv(i,r,i,r)}function qxe(e,t,i){if(e==null||t==null||i.source.spatialReference===e&&i.dest.spatialReference===t)return i;const r=IG(e,i.source),n=IG(t,i.dest);return r===ve.UNKNOWN&&n===ve.UNKNOWN?pr(e,t)?i.projector=Yi:i.projector=null:i.projector=Axe[r][n],i}function gne(){return{source:{spatialReference:null,spatialReferenceId:ve.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:ve.UNKNOWN,metersPerUnit:1},projector:Yi}}const Ert={spatialReference:null,spatialReferenceId:ve.UNKNOWN},Irt={spatialReference:null,spatialReferenceId:ve.UNKNOWN},vne=gne(),jv=H6(1),zv=_ie(1),tT=Math.PI,wne=.5*tT,Iy=br.radius,AG=Iy*tT/180,kG=180/(Iy*tT);function T2(e,t,i,r,n,o,u=Math.floor(e.length/3)){const f=mne(t,n,vne);if(f==null)return!1;if(f===Yi){if(e===r&&i===o)return!0;const b=i+3*u;for(let E=i,I=o;E<b;E++,I++)r[I]=e[E];return!0}const g=i+3*u;for(let b=i,E=o;b<g;b+=3,E+=3)f(e,b,r,E);return!0}const Trt=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:T2},Symbol.toStringTag,{value:"Module"}));function LG(e,t,i,r,n,o){return L5[0]=e,L5[1]=t,L5[2]=i,T2(L5,r,0,n,o,0)}const L5=nt();let O5=0,vM=class d8{static fromGE(t){const i=new d8;return i._wkt=t.wkt,i._wkid=t.wkid,i._isInverse=t.isInverse,i}constructor(t){this.uid=O5++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=O5++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=O5++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=O5++}getInverse(){const t=new d8;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},cI=class Jw{static cacheKey(t,i){var r,n,o,u,f,g;return[((r=t.wkid)==null?void 0:r.toString())??"-1",((n=t.wkt)==null?void 0:n.toString())??"",((o=t.wkt2)==null?void 0:o.toString())??"",((u=i.wkid)==null?void 0:u.toString())??"-1",((f=i.wkt)==null?void 0:f.toString())??"",((g=i.wkt2)==null?void 0:g.toString())??""].join()}static fromGE(t){const i=new Jw;let r="";for(const n of t.steps){const o=vM.fromGE(n);i.steps.push(o),r+=o.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=r,i}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t==null?void 0:t.steps)for(const i of t.steps)i instanceof vM?this.steps.push(i):this.steps.push(new vM({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const t=new Jw;t.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];t.steps.push(r.getInverse())}return t}getGTListEntry(){let t="";for(const i of this.steps)t+=i.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,i,r){this._cachedProjection[Jw.cacheKey(t,i)]=r}getCachedGeTransformation(t,i){let r="";for(const o of this.steps)r+=o.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const n=this._cachedProjection[Jw.cacheKey(t,i)];return n===void 0?null:n}};function bne(e,t,i){if(t==null||i==null||i.vcsWkid||pr(t,i)||df(t)||df(i))return null;const r=Rv(t)/Rv(i);if(r===1)return null;switch(e){case"point":case"esriGeometryPoint":return n=>Hxe(n,r);case"polyline":case"esriGeometryPolyline":return n=>Zxe(n,r);case"polygon":case"esriGeometryPolygon":return n=>Wxe(n,r);case"multipoint":case"esriGeometryMultipoint":return n=>Jxe(n,r);case"extent":case"esriGeometryEnvelope":return n=>Kxe(n,r);default:return null}}function Hxe(e,t){(e==null?void 0:e.z)!=null&&(e.z*=t)}function Wxe(e,t){if(e)for(const i of e.rings)for(const r of i)r.length>2&&(r[2]*=t)}function Zxe(e,t){if(e)for(const i of e.paths)for(const r of i)r.length>2&&(r[2]*=t)}function Jxe(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}function Kxe(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let mu=null,ff=null,S3=null,M9={};const sF=new _2;function Dc(){return!!mu&&MN()}function _ne(){return!!Dc()||(et(sF),Oc(),!1)}function Sne(e,t){return!e||!t||Sa(e,t)||_ne()}function Yxe(e,t){return!Sa(e,t)&&!Dc()}function Oc(e){return S3==null&&(S3=Promise.all([Vte(),ce(()=>Promise.resolve().then(()=>UWe),[],import.meta.url).then(t=>t.g),ce(()=>Promise.resolve().then(()=>JWe),void 0,import.meta.url)])),S3.then(([,t,{hydratedAdapter:i}])=>{Li(e),ff=i,mu=t.default,mu._enableProjection(Ibe),sF.notify()})}function dl(e,t,i=null,r=null){return Array.isArray(e)?e.length===0?[]:p8(ff,e,e[0].spatialReference,t,i,r):p8(ff,[e],e.spatialReference,t,i,r)[0]}function p8(e,t,i,r,n=null,o=null){if(i==null||r==null)return t;if(Sa(i,r,n))return t.map(u=>C9(u,i,r));if(n==null&&eI(i))return t.map(u=>C9(u,i,st.WGS84)).map(u=>Vv(u,r));if(n==null&&eI(r))return t.map(u=>Vv(u,st.WGS84)).map(u=>C9(u,st.WGS84,r));if(n==null){const u=cI.cacheKey(i,r);M9[u]!==void 0?n=M9[u]:((n=Ine(i,r,void 0))==null&&(n=new cI),M9[u]=n)}if(mu==null||e==null)throw new iT;return o!=null?mu._project(e,t,i,r,n,o):mu._project(e,t,i,r,n)}function xne(e,t){const i=Ene([e],t);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function Ene(e,t){if(!Dc()){for(const i of e)if(i!=null&&!pr(i.spatialReference,t)&&ca(i.spatialReference)&&ca(t)&&!Sa(i.spatialReference,t))return et(sF),{pending:Oc(),geometries:null}}return{pending:null,geometries:e.map(i=>i==null?null:pr(i.spatialReference,t)?i:ca(i.spatialReference)&&ca(t)?Vv(i,t):null)}}function Ine(e,t,i=null){if(e==null||t==null)return null;if(mu==null||ff==null)throw new iT;const r=mu._getTransformation(ff,e,t,i,i==null?void 0:i.spatialReference);return r!==null?cI.fromGE(r):null}function Xxe(e,t,i=null){if(mu==null||ff==null)throw new iT;const r=mu._getTransformationBySuitability(ff,e,t,i,i==null?void 0:i.spatialReference);if(r!==null){const n=[];for(const o of r)n.push(cI.fromGE(o));return n}return[]}let iT=class extends ne{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function Qxe(){mu=null,ff=null,S3=null,M9={}}const e9e={get loadPromise(){return S3}};function Vv(e,t){try{const i=dl(e,t);if(i==null)return null;"xmin"in e&&"xmin"in i&&(i.zmin=e.zmin,i.zmax=e.zmax);const r=bne(i.type,e.spatialReference,t);return r!=null&&r(i),i}catch(i){if(!(i instanceof iT))throw i;return null}}async function t9e(e,t,i){const r=e.spatialReference;return r!=null&&t!=null&&await $2(r,t,null,i),Vv(e,t)}function Sa(e,t,i){return!i&&(!!pr(e,t)||ca(e)&&ca(t)&&!!mne(e,t,vne))}function i9e(e,t){if(pr(e,t))return!0;if(!ca(e)||!ca(t))return!1;const i=Wy(e)||bu(e)||fU(e),r=Wy(t)||bu(t)||fU(t);return i&&r}async function $2(e,t,i,r){if(Dc())return tU(r);if(Array.isArray(e)){for(const{source:n,dest:o,geographicTransformation:u}of e)if(n&&o&&!Sa(n,o,u))return Oc(r)}else if(e&&t&&!Sa(e,t,i))return Oc(r);return tU(r)}function C9(e,t,i){return e?"x"in e?Tne(e,t,new lt,i,0):"xmin"in e?Ane(e,t,new Ht,i,0):"rings"in e?Cne(e,t,new zs,i,0):"paths"in e?Mne(e,t,new io,i,0):"points"in e?$ne(e,t,new w2,i,0):null:null}function r9e(e,t,i=t.spatialReference,r=0){return i!=null&&e.spatialReference!=null&&Tne(e,e.spatialReference,t,i,r)!=null}function Tne(e,t,i,r,n){ks[0]=e.x,ks[1]=e.y;const o=e.z;return ks[2]=o!==void 0?o:n,T2(ks,t,0,ks,r,0)?(i.x=ks[0],i.y=ks[1],i.spatialReference=r,o!==void 0||df(r)?(i.z=ks[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),e.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=e.m,i.hasM=!0),i):null}function n9e(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&$ne(e,e.spatialReference,t,i,r)!=null}function $ne(e,t,i,r,n){const{points:o,hasZ:u,hasM:f}=e,g=[],b=o.length,E=[];for(const M of o)E.push(M[0],M[1],u?M[2]:n);if(!T2(E,t,0,E,r,0,b))return null;const I=u||df(r);for(let M=0;M<b;++M){const k=3*M,L=E[k],P=E[k+1];I&&f?g.push([L,P,E[k+2],o[M][3]]):I?g.push([L,P,E[k+2]]):f?g.push([L,P,o[M][2]]):g.push([L,P])}return i.points=g,i.spatialReference=r,i.hasZ=u,i.hasM=f,i}function s9e(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&Mne(e,e.spatialReference,t,i,r)!=null}function Mne(e,t,i,r,n){const{paths:o,hasZ:u,hasM:f}=e,g=[];if(!kne(o,u??!1,f??!1,t,g,r,n))return null;const b=u||df(r);return i.paths=g,i.spatialReference=r,i.hasZ=b,i.hasM=f,i}function o9e(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&Cne(e,e.spatialReference,t,i,r)!=null}function Cne(e,t,i,r,n){const{rings:o,hasZ:u,hasM:f}=e,g=[];if(!kne(o,u??!1,f??!1,t,g,r,n))return null;const b=u||df(r);return i.rings=g,i.spatialReference=r,i.hasZ=b,i.hasM=f,i}function a9e(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&Ane(e,e.spatialReference,t,i,r)!=null}function Ane(e,t,i,r,n){const{xmin:o,ymin:u,xmax:f,ymax:g,hasZ:b,hasM:E}=e,I=b?e.zmin:n;if(!LG(o,u,I,t,ks,r))return null;const M=b||df(r);i.xmin=ks[0],i.ymin=ks[1],M&&(i.zmin=ks[2]);const k=b?e.zmax:n;return LG(f,g,k,t,ks,r)?(i.xmax=ks[0],i.ymax=ks[1],M&&(i.zmax=ks[2]),E&&(i.mmin=e.mmin,i.mmax=e.mmax),i.spatialReference=r,i):null}function kne(e,t,i,r,n,o,u=0){const f=new Array;for(const E of e)for(const I of E)f.push(I[0],I[1],t?I[2]:u);if(!T2(f,r,0,f,o,0))return!1;let g=0;n.length=0;const b=t||df(o);for(const E of e){const I=new Array;for(const M of E)b&&i?I.push([f[g++],f[g++],f[g++],M[3]]):b?I.push([f[g++],f[g++],f[g++]]):i?(I.push([f[g++],f[g++],M[2]]),g++):(I.push([f[g++],f[g++]]),g++);n.push(I)}return!0}const ks=nt(),Mrt=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:Sa,getTransformation:Ine,getTransformations:Xxe,initializeProjection:$2,isEqualBaseGCS:i9e,isLoaded:Dc,isLoadedOrLoad:_ne,isLoadedOrLoadFor:Sne,load:Oc,project:dl,projectExtent:a9e,projectMany:p8,projectMultipoint:n9e,projectOrLoad:xne,projectOrLoadMany:Ene,projectPoint:r9e,projectPolygon:o9e,projectPolyline:s9e,projectWithZConversion:t9e,projectWithoutEngine:C9,requiresLoad:Yxe,test:e9e,tryProjectWithZConversion:Vv,unload:Qxe},Symbol.toStringTag,{value:"Module"}));var f8;let Fu=f8=class extends be{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new f8({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};m([w({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Fu.prototype,"cols",void 0),m([w({type:Ot,json:{write:!0}})],Fu.prototype,"level",void 0),m([w({type:String,json:{write:!0}})],Fu.prototype,"levelValue",void 0),m([w({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Fu.prototype,"origin",void 0),m([w({type:Number,json:{write:!0}})],Fu.prototype,"resolution",void 0),m([w({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Fu.prototype,"rows",void 0),m([w({type:Number,json:{write:!0}})],Fu.prototype,"scale",void 0),Fu=f8=m([H("esri.layers.support.LOD")],Fu);const xp=Fu;let l9e=class{constructor(t,i,r,n,o=void 0){this.id=t,this.level=i,this.row=r,this.col=n,this.extent=o}};var jd;const OG=new gt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Wn=jd=class extends be{static create(e={}){const{resolutionFactor:t=1,scales:i,size:r=256,spatialReference:n=st.WebMercator,numLODs:o=24}=e;if(!ca(n)){const I=[];if(i)for(let M=0;M<i.length;M++){const k=i[M];I.push(new xp({level:M,scale:k,resolution:k}))}else{let M=5e-4;for(let k=o-1;k>=0;k--)I.unshift(new xp({level:k,scale:M,resolution:M})),M*=2}return new jd({dpi:96,lods:I,origin:new lt(0,0,n),size:[r,r],spatialReference:n})}const u=no(n),f=e.origin?new lt({x:e.origin.x,y:e.origin.y,spatialReference:n}):new lt(u?{x:u.origin[0],y:u.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),g=96,b=1/(xu(n)*39.37*g),E=[];if(i)for(let I=0;I<i.length;I++){const M=i[I],k=M*b;E.push(new xp({level:I,scale:M,resolution:k}))}else{let I=cS(n)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const M=Math.ceil(o/t);E.push(new xp({level:0,scale:I,resolution:I*b}));for(let k=1;k<M;k++){const L=I/2**t,P=L*b;E.push(new xp({level:k,scale:L,resolution:P})),I=L}}return new jd({dpi:g,lods:E,origin:f,size:[r,r],spatialReference:n})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=no(e);return e.isWrappable&&!!i&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return lt.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const r=[],n=this._levelToLOD={};e&&(t=-1/0,i=1/0,e.forEach(o=>{r.push(o.scale),t=o.scale>t?o.scale:t,i=o.scale<i?o.scale:i,n[o.level]=o})),this._set("scales",r),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const i=Math.floor(e),r=i+1;return t[i]/(t[i]/t[r])**(e-i)}scaleToZoom(e){const t=this.scales,i=t.length-1;let r=0;for(;r<i;r++){const n=t[r],o=t[r+1];if(n<=e)return r;if(o===e)return r+1;if(n>e&&o<e)return r+Math.log(n/e)/Math.log(n/o)}return r}tileAt(e,t,i,r){const n=this.lodAt(e);if(!n)return null;let o,u;if(typeof t=="number")o=t,u=i;else if(pr(t.spatialReference,this.spatialReference))o=t.x,u=t.y,r=i;else{const b=G6(t,this.spatialReference);if(b==null)return null;o=b.x,u=b.y,r=i}const f=n.resolution*this.size[0],g=n.resolution*this.size[1];return r||(r=new l9e(null,0,0,0,to())),r.level=e,r.row=Math.floor((this.origin.y-u)/g+.001),r.col=Math.floor((o-this.origin.x)/f+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=jd.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&t===jd.ExtrapolateOptions.POWER_OF_TWO){const u=this.lods[this.lods.length-1];u.level<e.level&&(i=u)}if(!i)return;const r=e.level-i.level,n=i.resolution*this.size[0]/2**r,o=i.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=to()),e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+o}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const i=this.lodAt(t.level);if(i==null)return null;const{resolution:r}=i,n=r*this.size[0],o=r*this.size[1];return e[0]=this.origin.x+t.col*n,e[1]=this.origin.y-(t.row+1)*o,e[2]=e[0]+n,e[3]=e[1]+o,e}lodAt(e){var t;return((t=this._levelToLOD)==null?void 0:t[e])??null}clone(){return jd.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const t=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&t===0)return this;const i=[],r=this.lods.length-t;for(let n=0;n<r;n++){const o=n+t,{scale:u,resolution:f}=o>=0?this.lods[o]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};i.push(new xp({level:n,scale:u,resolution:f}))}return new jd({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const r=e[i];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};m([w({type:Number,json:{write:!0}})],Wn.prototype,"compressionQuality",void 0),m([w({type:Number,json:{write:!0}})],Wn.prototype,"dpi",void 0),m([w({type:String,json:{read:OG.read,write:OG.write,origins:{"web-scene":{read:!1,write:!1}}}})],Wn.prototype,"format",void 0),m([w({readOnly:!0})],Wn.prototype,"isWrappable",null),m([w({type:lt,json:{write:!0}})],Wn.prototype,"origin",void 0),m([ke("origin")],Wn.prototype,"readOrigin",null),m([w({type:[xp],value:null,json:{write:!0}})],Wn.prototype,"lods",null),m([w({readOnly:!0})],Wn.prototype,"scales",void 0),m([w({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],Wn.prototype,"size",void 0),m([ke("size",["rows","cols"])],Wn.prototype,"readSize",null),m([Pe("size",{cols:{type:Ot},rows:{type:Ot}})],Wn.prototype,"writeSize",null),m([w({type:st,json:{write:!0}})],Wn.prototype,"spatialReference",void 0),Wn=jd=m([H("esri.layers.support.TileInfo")],Wn),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(Wn||(Wn={}));const u9e=Wn,A9={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],r=t[1],n=this.values;return r>=i?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},wM={xsmall:544,small:768,medium:992,large:1200};function c9e(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function bM(e,t){return t?A9[e].valueToClassName[t].split(" "):[]}const h9e=e=>{let t=class extends e{constructor(...i){super(...i),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=wM}initialize(){this.addHandles(me(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Je))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(i){if(i!==this._get("breakpoints")){if(!c9e(i)){const r=JSON.stringify(wM,null,2);console.warn("provided breakpoints are not valid, using defaults:"+r),i=wM}this._set("breakpoints",{...i})}}_updateClassNames(){if(!this.container)return;const i=eo.acquire(),r=eo.acquire();let n,o=!1;for(n in A9){const u=this[n],f=A9[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});u!==f&&(o=!0,this[n]=f,bM(n,u).forEach(g=>r.push(g)),bM(n,f).forEach(g=>i.push(g)))}o&&(this._applyClassNameChanges(i,r),eo.release(i),eo.release(r))}_applyClassNameChanges(i,r){const n=this.container;n&&(r.forEach(o=>n.classList.remove(o)),i.forEach(o=>n.classList.add(o)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in A9)bM(r,this[r]).forEach(n=>i.classList.remove(n))}};return m([w()],t.prototype,"breakpoints",null),m([w()],t.prototype,"orientation",void 0),m([w()],t.prototype,"widthBreakpoint",void 0),m([w()],t.prototype,"heightBreakpoint",void 0),t=m([H("esri.views.BreakpointsOwner")],t),t};function oF(e){return typeof e=="string"?document.getElementById(e):e??null}function RG(e,t){for(;;){const i=e.firstChild;if(!i)break;t.appendChild(i)}}let Ty=class extends De{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(t,i,r={}){return this._installWatch(t,i,r,me)}addWhen(t,i,r={}){return this._installWatch(t,i,r,rn)}addOnCollectionChange(t,i,{initial:r=!1,final:n=!1}={}){const o=++this._handleId;return this.addHandles([Lr(t,"after-changes",this._createSyncUpdatingCallback(),hl),Lr(t,"change",i,{onListenerAdd:r?u=>i({added:u.toArray(),removed:[]}):void 0,onListenerRemove:n?u=>i({added:[],removed:u.toArray()}):void 0})],o),Yt(()=>this.removeHandles(o))}addPromise(t){if(t==null)return t;const i=++this._handleId;this.addHandles(Yt(()=>{this._pendingPromises.delete(t)&&(this._pendingPromises.size!==0||this.hasHandles(R5)||this._set("updating",!1))}),i),this._pendingPromises.add(t),this._set("updating",!0);const r=()=>this.removeHandles(i);return t.then(r,r),t}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(t,i,r={},n){const o=++this._handleId;r.sync||this._installSyncUpdatingWatch(t,o);const u=n(t,i,r);return this.addHandles(u,o),Yt(()=>this.removeHandles(o))}_installSyncUpdatingWatch(t,i){const r=this._createSyncUpdatingCallback(),n=me(t,r,{sync:!0,equals:()=>!1});return this.addHandles(n,i),n}_createSyncUpdatingCallback(){return()=>{this.removeHandles(R5),++this._scheduleHandleId;const t=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(uS(()=>{t===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(R5))}),R5)}}};m([w({readOnly:!0})],Ty.prototype,"updating",void 0),Ty=m([H("esri.core.support.UpdatingHandles")],Ty);const R5=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var hI=function(){return hI=Object.assign||function(t){for(var i,r=1,n=arguments.length;r<n;r++){i=arguments[r];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t},hI.apply(this,arguments)},y8={exports:{}},Sr={},m8={exports:{}},wm={};function Lne(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function d9e(e,t,i){}function p9e(e,t,i){}var f9e=/javascript\s*\:/img;function y9e(e,t){return f9e.test(t)?"":t}wm.whiteList=Lne();wm.getDefaultWhiteList=Lne;wm.onAttr=d9e;wm.onIgnoreAttr=p9e;wm.safeAttrValue=y9e;var m9e={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,n;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,n=e.length;r<n;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},dw=m9e;function g9e(e,t){e=dw.trimRight(e),e[e.length-1]!==";"&&(e+=";");var i=e.length,r=!1,n=0,o=0,u="";function f(){if(!r){var E=dw.trim(e.slice(n,o)),I=E.indexOf(":");if(I!==-1){var M=dw.trim(E.slice(0,I)),k=dw.trim(E.slice(I+1));if(M){var L=t(n,u.length,M,k,E);L&&(u+=L+"; ")}}}n=o+1}for(;o<i;o++){var g=e[o];if(g==="/"&&e[o+1]==="*"){var b=e.indexOf("*/",o+2);if(b===-1)break;o=b+1,n=o+1,r=!1}else g==="("?r=!0:g===")"?r=!1:g===";"?r||f():g===`
`&&f()}return dw.trim(u)}var v9e=g9e,P5=wm,w9e=v9e;function PG(e){return e==null}function b9e(e){var t={};for(var i in e)t[i]=e[i];return t}function One(e){e=b9e(e||{}),e.whiteList=e.whiteList||P5.whiteList,e.onAttr=e.onAttr||P5.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||P5.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||P5.safeAttrValue,this.options=e}One.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,n=i.onAttr,o=i.onIgnoreAttr,u=i.safeAttrValue,f=w9e(e,function(g,b,E,I,M){var k=r[E],L=!1;if(k===!0?L=k:typeof k=="function"?L=k(I):k instanceof RegExp&&(L=k.test(I)),L!==!0&&(L=!1),I=u(E,I),!!I){var P={position:b,sourcePosition:g,source:M,isWhite:L};if(L){var D=n(E,I,P);return PG(D)?E+":"+I:D}else{var D=o(E,I,P);if(!PG(D))return D}}});return f};var _9e=One;(function(e,t){var i=wm,r=_9e;function n(u,f){var g=new r(f);return g.process(u)}t=e.exports=n,t.FilterCSS=r;for(var o in i)t[o]=i[o]})(m8,m8.exports);var aF=m8.exports,lF={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,n;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,n=e.length;r<n;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,i=t.exec(e);return i?i.index:-1}},S9e=aF.FilterCSS,x9e=aF.getDefaultWhiteList,dI=lF;function Rne(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Pne=new S9e;function E9e(e,t,i){}function I9e(e,t,i){}function T9e(e,t,i){}function $9e(e,t,i){}function Nne(e){return e.replace(C9e,"&lt;").replace(A9e,"&gt;")}function M9e(e,t,i,r){if(i=Une(i),t==="href"||t==="src"){if(i=dI.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(t==="background"){if(N5.lastIndex=0,N5.test(i))return""}else if(t==="style"){if(NG.lastIndex=0,NG.test(i)||(FG.lastIndex=0,FG.test(i)&&(N5.lastIndex=0,N5.test(i))))return"";r!==!1&&(r=r||Pne,i=r.process(i))}return i=Gne(i),i}var C9e=/</g,A9e=/>/g,k9e=/"/g,L9e=/&quot;/g,O9e=/&#([a-zA-Z0-9]*);?/gim,R9e=/&colon;?/gim,P9e=/&newline;?/gim,N5=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,NG=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,FG=/u\s*r\s*l\s*\(.*/gi;function Fne(e){return e.replace(k9e,"&quot;")}function Dne(e){return e.replace(L9e,'"')}function jne(e){return e.replace(O9e,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function zne(e){return e.replace(R9e,":").replace(P9e," ")}function Vne(e){for(var t="",i=0,r=e.length;i<r;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return dI.trim(t)}function Une(e){return e=Dne(e),e=jne(e),e=zne(e),e=Vne(e),e}function Gne(e){return e=Fne(e),e=Nne(e),e}function N9e(){return""}function F9e(e,t){typeof t!="function"&&(t=function(){});var i=!Array.isArray(e);function r(u){return i?!0:dI.indexOf(e,u)!==-1}var n=[],o=!1;return{onIgnoreTag:function(u,f,g){if(r(u))if(g.isClosing){var b="[/removed]",E=g.position+b.length;return n.push([o!==!1?o:g.position,E]),o=!1,b}else return o||(o=g.position),"[removed]";else return t(u,f,g)},remove:function(u){var f="",g=0;return dI.forEach(n,function(b){f+=u.slice(g,b[0]),g=b[1]}),f+=u.slice(g),f}}}function D9e(e){for(var t="",i=0;i<e.length;){var r=e.indexOf("<!--",i);if(r===-1){t+=e.slice(i);break}t+=e.slice(i,r);var n=e.indexOf("-->",r);if(n===-1)break;i=n+3}return t}function j9e(e){var t=e.split("");return t=t.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}Sr.whiteList=Rne();Sr.getDefaultWhiteList=Rne;Sr.onTag=E9e;Sr.onIgnoreTag=I9e;Sr.onTagAttr=T9e;Sr.onIgnoreTagAttr=$9e;Sr.safeAttrValue=M9e;Sr.escapeHtml=Nne;Sr.escapeQuote=Fne;Sr.unescapeQuote=Dne;Sr.escapeHtmlEntities=jne;Sr.escapeDangerHtml5Entities=zne;Sr.clearNonPrintableCharacter=Vne;Sr.friendlyAttrValue=Une;Sr.escapeAttrValue=Gne;Sr.onIgnoreTagStripAll=N9e;Sr.StripTagBody=F9e;Sr.stripCommentTag=D9e;Sr.stripBlankChar=j9e;Sr.cssFilter=Pne;Sr.getDefaultCSSWhiteList=x9e;var rT={},Ep=lF;function z9e(e){var t=Ep.spaceIndex(e),i;return t===-1?i=e.slice(1,-1):i=e.slice(1,t+1),i=Ep.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function V9e(e){return e.slice(0,2)==="</"}function U9e(e,t,i){var r="",n=0,o=!1,u=!1,f=0,g=e.length,b="",E="";e:for(f=0;f<g;f++){var I=e.charAt(f);if(o===!1){if(I==="<"){o=f;continue}}else if(u===!1){if(I==="<"){r+=i(e.slice(n,f)),o=f,n=f;continue}if(I===">"){r+=i(e.slice(n,o)),E=e.slice(o,f+1),b=z9e(E),r+=t(o,r.length,b,E,V9e(E)),n=f+1,o=!1;continue}if(I==='"'||I==="'")for(var M=1,k=e.charAt(f-M);k.trim()===""||k==="=";){if(k==="="){u=I;continue e}k=e.charAt(f-++M)}}else if(I===u){u=!1;continue}}return n<e.length&&(r+=i(e.substr(n))),r}var G9e=/[^a-zA-Z0-9\\_:.-]/gim;function B9e(e,t){var i=0,r=0,n=[],o=!1,u=e.length;function f(M,k){if(M=Ep.trim(M),M=M.replace(G9e,"").toLowerCase(),!(M.length<1)){var L=t(M,k||"");L&&n.push(L)}}for(var g=0;g<u;g++){var b=e.charAt(g),E,I;if(o===!1&&b==="="){o=e.slice(i,g),i=g+1,r=e.charAt(i)==='"'||e.charAt(i)==="'"?i:H9e(e,g+1);continue}if(o!==!1&&g===r){if(I=e.indexOf(b,g+1),I===-1)break;E=Ep.trim(e.slice(r+1,I)),f(o,E),o=!1,g=I,i=g+1;continue}if(/\s|\n|\t/.test(b))if(e=e.replace(/\s|\n|\t/g," "),o===!1)if(I=q9e(e,g),I===-1){E=Ep.trim(e.slice(i,g)),f(E),o=!1,i=g+1;continue}else{g=I-1;continue}else if(I=W9e(e,g-1),I===-1){E=Ep.trim(e.slice(i,g)),E=DG(E),f(o,E),o=!1,i=g+1;continue}else continue}return i<e.length&&(o===!1?f(e.slice(i)):f(o,DG(Ep.trim(e.slice(i))))),Ep.trim(n.join(" "))}function q9e(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="="?t:-1}}function H9e(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="'"||i==='"'?t:-1}}function W9e(e,t){for(;t>0;t--){var i=e[t];if(i!==" ")return i==="="?t:-1}}function Z9e(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function DG(e){return Z9e(e)?e.substr(1,e.length-2):e}rT.parseTag=U9e;rT.parseAttr=B9e;var J9e=aF.FilterCSS,tu=Sr,Bne=rT,K9e=Bne.parseTag,Y9e=Bne.parseAttr,k9=lF;function F5(e){return e==null}function X9e(e){var t=k9.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=k9.trim(e.slice(t+1,-1));var i=e[e.length-1]==="/";return i&&(e=k9.trim(e.slice(0,-1))),{html:e,closing:i}}function Q9e(e){var t={};for(var i in e)t[i]=e[i];return t}function e4e(e){var t={};for(var i in e)Array.isArray(e[i])?t[i.toLowerCase()]=e[i].map(function(r){return r.toLowerCase()}):t[i.toLowerCase()]=e[i];return t}function qne(e){e=Q9e(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=tu.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=e4e(e.whiteList||e.allowList):e.whiteList=tu.whiteList,e.onTag=e.onTag||tu.onTag,e.onTagAttr=e.onTagAttr||tu.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||tu.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||tu.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||tu.safeAttrValue,e.escapeHtml=e.escapeHtml||tu.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new J9e(e.css))}qne.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,n=i.onTag,o=i.onIgnoreTag,u=i.onTagAttr,f=i.onIgnoreTagAttr,g=i.safeAttrValue,b=i.escapeHtml,E=t.cssFilter;i.stripBlankChar&&(e=tu.stripBlankChar(e)),i.allowCommentTag||(e=tu.stripCommentTag(e));var I=!1;i.stripIgnoreTagBody&&(I=tu.StripTagBody(i.stripIgnoreTagBody,o),o=I.onIgnoreTag);var M=K9e(e,function(k,L,P,D,j){var z={sourcePosition:k,position:L,isClosing:j,isWhite:Object.prototype.hasOwnProperty.call(r,P)},V=n(P,D,z);if(!F5(V))return V;if(z.isWhite){if(z.isClosing)return"</"+P+">";var W=X9e(D),Q=r[P],Z=Y9e(W.html,function(ee,ie){var oe=k9.indexOf(Q,ee)!==-1,le=u(P,ee,ie,oe);return F5(le)?oe?(ie=g(P,ee,ie,E),ie?ee+'="'+ie+'"':ee):(le=f(P,ee,ie,oe),F5(le)?void 0:le):le});return D="<"+P,Z&&(D+=" "+Z),W.closing&&(D+=" /"),D+=">",D}else return V=o(P,D,z),F5(V)?b(D):V},b);return I&&(M=I.remove(M)),M};var t4e=qne;(function(e,t){var i=Sr,r=rT,n=t4e;function o(f,g){var b=new n(g);return b.process(f)}t=e.exports=o,t.filterXSS=o,t.FilterXSS=n,function(){for(var f in i)t[f]=i[f];for(var g in r)t[g]=r[g]}();function u(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}u()&&(self.filterXSS=e.exports)})(y8,y8.exports);var Rm=y8.exports,i4e=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},r4e=function(){function e(t,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=hI(hI({},Rm.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(o,u,f,g){return o==="a"&&u==="href"||(o==="img"||o==="source")&&u==="src"?r.sanitizeUrl(f):Rm.safeAttrValue(o,u,f,g)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;t&&!i?n=t:t&&i?(n=Object.create(this.arcgisFilterOptions),n.css={whiteList:this.arcgisCSSWhiteList},Object.keys(t).forEach(function(o){if(o==="whiteList")n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,t.whiteList||{}]);else if(o==="css"){var u=t.css.whiteList;u!=null&&t.css instanceof Object&&Object.keys(u).forEach(function(f){return n.css.whiteList[f]=u[f]})}else n[o]=t[o]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList,n.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=n,this._xssFilter=new Rm.FilterXSS(n)}return e.prototype.sanitize=function(t,i){switch(i===void 0&&(i={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,i);default:return i.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,i){var r=(i??{}).isProtocolRequired,n=r===void 0?!0:r,o=this._trim(t.substring(0,t.indexOf(":"))),u=t==="/",f=/^#/.test(t),g=o&&this.allowedProtocols.indexOf(o.toLowerCase())>-1;return u||f||g?Rm.escapeAttrValue(t):!o&&!n?Rm.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,i,r,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,i,r,n):Rm.safeAttrValue(t,i,r,n)},e.prototype.validate=function(t,i){i===void 0&&(i={});var r=this.sanitize(t,i);return{isValid:t===r,sanitized:r}},e.prototype.encodeHTML=function(t){var i=this;return String(t).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},e.prototype.encodeAttrValue=function(t){var i=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(r,n){return i.test(r)?r:"&#x".concat(Number(t.charCodeAt(n)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var i={};return t.forEach(function(r){Object.keys(r).forEach(function(n){Array.isArray(r[n])&&Array.isArray(i[n])?i[n]=i[n].concat(r[n]):i[n]=r[n]})}),i},e.prototype._iterateOverObject=function(t,i){var r=this;i===void 0&&(i={});try{var n=!1,o=void 0;if(Array.isArray(t))o=t.reduce(function(f,g){var b=r.validate(g,i);return b.isValid?f.concat([g]):(n=!0,f.concat([b.sanitized]))},[]);else if(i4e(t)){var u=Object.keys(t);o=u.reduce(function(f,g){var b=t[g],E=r.validate(b,i);return E.isValid?f[g]=b:(n=!0,f[g]=E.sanitized),f},{})}else return i.allowUndefined&&typeof t>"u"?void 0:null;return n?o:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const nT=new Map;function Hne(){nT.clear()}function n4e(e){return nT.get(e)}function s4e(e,t){nT.set(e,t)}function _M(e){nT.delete(e)}function Lg(...e){const t=eo.acquire();for(let r=0;r<e.length;r++){const n=e[r],o=typeof n;if(o==="string")t.push(n);else if(Array.isArray(n))t.push.apply(t,n);else if(o==="object")for(const u in n)n[u]&&t.push(u)}const i=t.join(" ");return eo.release(t),i}(()=>{const e=new Map,t=new ResizeObserver(r=>{var n;Hne();for(const o of r)(n=e.get(o.target))==null||n(o)}),i=(r,n,o)=>(e.set(r,n),t.observe(r,o),Yt(()=>{t.unobserve(r),e.delete(r)}));return(r,n,o)=>{let u=null;return p2([me(()=>typeof r=="function"?r():r,f=>{u==null||u.remove(),f&&(u=i(f,n,o))},Ln),Yt(()=>u==null?void 0:u.remove())])}})();function ha(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function jG(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function Og(e){const t="data-node-ref";this[e.getAttribute(t)]=e}const o4e=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],a4e=o4e.reduce((e,t)=>(e[t]=[],e),{}),l4e=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],Wne=new r4e({whiteList:a4e,onTagAttr:(e,t,i)=>{const r=`${t}="${i}"`;if(l4e.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function Zne(e){return e==="Enter"||e===" "}async function cv(e,t){await F6(lS(t));const i=typeof e=="function"?e():e;i&&("setFocus"in i&&typeof i.setFocus=="function"?await i.setFocus():i instanceof HTMLElement&&i.focus())}const Jne="http://www.w3.org/",sT=`${Jne}2000/svg`,Kne=`${Jne}1999/xlink`;let zG=[],uF=(e,t)=>{let i={};return Object.keys(e).forEach(r=>{i[r]=e[r]}),t&&Object.keys(t).forEach(r=>{i[r]=t[r]}),i},cF=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),Yne=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},u4e=(e,t,i)=>{if(t.vnodeSelector!==""){for(let r=i;r<e.length;r++)if(cF(e[r],t))return r}return-1},SM=(e,t,i,r)=>{let n=e[t];if(n.vnodeSelector==="")return;let o=n.properties;if(!(o&&(o.key===void 0?o.bind:o.key))){for(let u=0;u<e.length;u++)if(u!==t){let f=e[u];if(cF(f,n))throw new Error(`${i.vnodeSelector} had a ${n.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},c4e=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},g8=[],v8=!1,Xne=e=>{(e.children||[]).forEach(Xne),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},VG=()=>{v8=!1,g8.forEach(Xne),g8.length=0},UG=e=>{g8.push(e),v8||(v8=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(VG,{timeout:16}):setTimeout(VG,16))},GG=e=>{let t=e.domNode;if(e.properties){let i=e.properties.exitAnimation;if(i)return t.style.pointerEvents="none",void i(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),UG(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),UG(e))},h4e=(e,t,i)=>{if(!t)return;let r=i.eventHandlerInterceptor,n=Object.keys(t),o=n.length;for(let u=0;u<o;u++){let f=n[u],g=t[f];if(f==="className")throw new Error('Property "className" is not supported, use "class".');if(f==="class")b8(e,g,!0);else if(f==="classes"){let b=Object.keys(g),E=b.length;for(let I=0;I<E;I++){let M=b[I];g[M]&&e.classList.add(M)}}else if(f==="styles"){let b=Object.keys(g),E=b.length;for(let I=0;I<E;I++){let M=b[I],k=g[M];k&&(Yne(k),i.styleApplyer(e,M,k))}}else if(f!=="key"&&g!=null){let b=typeof g;b==="function"?(f.lastIndexOf("on",0)===0&&(r&&(g=r(f,g,e,t)),f==="oninput"&&function(){let E=g;g=function(I){E.apply(this,[I]),I.target["oninput-value"]=I.target.value}}()),e[f]=g):i.namespace===sT?f==="href"?e.setAttributeNS(Kne,f,g):e.setAttribute(f,g):b==="string"&&f!=="value"?f==="innerHTML"?e[f]=Wne.sanitize(g):w8(e)&&f in e?e[f]=g:e.setAttribute(f,g):e[f]=g}}};function w8(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let pI,d4e=(e,t,i)=>{if(t)for(let r of t)Rg(r,e,void 0,i)},Qne=(e,t,i)=>{d4e(e,t.children,i),t.text&&(e.textContent=t.text),h4e(e,t.properties,i),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,i,t.vnodeSelector,t.properties,t.children])},Rg=(e,t,i,r)=>{let n,o=0,u=e.vnodeSelector,f=t.ownerDocument;if(u==="")n=e.domNode=f.createTextNode(e.text),i!==void 0?t.insertBefore(n,i):t.appendChild(n);else{for(let g=0;g<=u.length;++g){let b=u.charAt(g);if(g===u.length||b==="."||b==="#"){let E=u.charAt(o-1),I=u.slice(o,g);E==="."?n.classList.add(I):E==="#"?n.id=I:(I==="svg"&&(r=uF(r,{namespace:sT})),r.namespace!==void 0?n=e.domNode=f.createElementNS(r.namespace,I):(n=e.domNode=e.domNode||f.createElement(I),I==="input"&&e.properties&&e.properties.type!==void 0&&n.setAttribute("type",e.properties.type)),i!==void 0?t.insertBefore(n,i):n.parentNode!==t&&t.appendChild(n)),o=g+1}}Qne(n,e,r)}},b8=(e,t,i)=>{t&&t.split(" ").forEach(r=>{r&&e.classList.toggle(r,i)})},p4e=(e,t,i,r)=>{if(!i)return;let n=!1,o=Object.keys(i),u=o.length;for(let f=0;f<u;f++){let g=o[f],b=i[g],E=t[g];if(g==="class")E!==b&&(b8(e,E,!1),b8(e,b,!0));else if(g==="classes"){let I=e.classList,M=Object.keys(b),k=M.length;for(let L=0;L<k;L++){let P=M[L],D=!!b[P];D!==!!E[P]&&(n=!0,D?I.add(P):I.remove(P))}}else if(g==="styles"){let I=Object.keys(b),M=I.length;for(let k=0;k<M;k++){let L=I[k],P=b[L];P!==E[L]&&(n=!0,P?(Yne(P),r.styleApplyer(e,L,P)):r.styleApplyer(e,L,""))}}else if(b||typeof E!="string"||(b=""),g!=="value"||w8(e)){if(b!==E){let I=typeof b;I==="function"&&r.eventHandlerInterceptor||(r.namespace===sT?g==="href"?e.setAttributeNS(Kne,g,b):e.setAttribute(g,b):I==="string"?g==="innerHTML"?e[g]=Wne.sanitize(b):g==="role"&&b===""?e.removeAttribute(g):w8(e)&&g in e?e[g]=b:e.setAttribute(g,b):e[g]!==b&&(e[g]=b),n=!0)}}else{let I=e[g];I!==b&&(e["oninput-value"]?I===e["oninput-value"]:b!==E)&&(e[g]=b,e["oninput-value"]=void 0),b!==E&&(n=!0)}}return n},f4e=(e,t,i,r,n)=>{if(i===r)return!1;r=r||zG;let o,u=(i=i||zG).length,f=r.length,g=0,b=0,E=!1;for(;b<f;){let I=g<u?i[g]:void 0,M=r[b];if(I!==void 0&&cF(I,M))E=pI(I,M,n)||E,g++;else{let k=u4e(i,M,g+1);if(k>=0){for(o=g;o<k;o++)GG(i[o]),SM(i,o,e,"removed");E=pI(i[k],M,n)||E,g=k+1}else Rg(M,t,g<u?i[g].domNode:void 0,n),c4e(M),SM(r,b,e,"added")}b++}if(u>g)for(o=g;o<u;o++)GG(i[o]),SM(i,o,e,"removed");return E};pI=(e,t,i)=>{let r=e.domNode,n=!1;if(e===t)return!1;let o=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let u=r.ownerDocument.createTextNode(t.text);return r.parentNode.replaceChild(u,r),t.domNode=u,n=!0,n}t.domNode=r}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(i=uF(i,{namespace:sT})),e.text!==t.text&&(o=!0,t.text===void 0?r.removeChild(r.firstChild):r.textContent=t.text),t.domNode=r,o=f4e(t,r,e.children,t.children,i)||o,o=p4e(r,e.properties,t.properties,i)||o,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[r,i,t.vnodeSelector,t.properties,t.children]);return o&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(r,t.properties,e.properties),n};let pw=(e,t)=>({getLastRender:()=>e,update:i=>{if(e.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=e;e=i,pI(r,i,t)},domNode:e.domNode});const y4e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}};let h1=e=>uF(y4e,e),zp={create:(e,t)=>(t=h1(t),Rg(e,document.createElement("div"),void 0,t),pw(e,t)),append:(e,t,i)=>(i=h1(i),Rg(t,e,void 0,i),pw(t,i)),insertBefore:(e,t,i)=>(i=h1(i),Rg(t,e.parentNode,e,i),pw(t,i)),merge:(e,t,i)=>(i=h1(i),t.domNode=e,Qne(e,t,i),pw(t,i)),replace:(e,t,i)=>(i=h1(i),Rg(t,e.parentNode,e,i),e.parentNode.removeChild(e),pw(t,i))},ese,m4e=(e,t)=>{let i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i};ese=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let g4e=(e,t)=>{let i=e;return t.forEach(r=>{i=i&&i.children?ese(i.children,n=>n.domNode===r):void 0}),i},v4e=(e,t,i)=>{let r=function(n){i("domEvent",n);let o=t(),u=m4e(n.currentTarget,o.domNode);u.reverse();let f,g=g4e(o.getLastRender(),u);return e.scheduleRender(),g&&(f=g.properties[`on${n.type}`].apply(g.properties.bind||this,arguments)),i("domEventProcessed",n),f};return(n,o,u,f)=>r},fI=e=>{let t,i,r=h1(e),n=r.performanceLogger,o=!0,u=!1,f=[],g=[],b=(I,M,k)=>{let L,P=()=>L;r.eventHandlerInterceptor=v4e(t,P,n),L=I(M,k(),r),f.push(L),g.push(k)},E=()=>{if(i=void 0,o){o=!1,n("renderStart",void 0);for(let I=0;I<f.length;I++){let M=g[I]();n("rendered",void 0),f[I].update(M),n("patched",void 0)}n("renderDone",void 0),o=!0}};return t={renderNow:E,scheduleRender:()=>{i||u||(i=requestAnimationFrame(E))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),u=!0},resume:()=>{u=!1,o=!0,t.scheduleRender()},append:(I,M)=>{b(zp.append,I,M)},insertBefore:(I,M)=>{b(zp.insertBefore,I,M)},merge:(I,M)=>{b(zp.merge,I,M)},replace:(I,M)=>{b(zp.replace,I,M)},detach:I=>{for(let M=0;M<g.length;M++)if(g[M]===I)return g.splice(M,1),f.splice(M,1)[0];throw new Error("renderFunction was not found")}},t},zd=class extends De{constructor(){super(...arguments),this.items=new Oe,this._watchUpdatingTracking=new Ty,this._callbacks=new Map,this._projector=fI(),this._hiddenProjector=fI()}get needsRender(){return this.items.length>0}get updating(){var t;return((t=this._watchUpdatingTracking)==null?void 0:t.updating)??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const r of i.added){const n=()=>r.render();this._callbacks.set(r,n),this._projector.append(this.surface,n)}for(const r of i.removed){const n=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(n.domNode),this._callbacks.delete(r)}})}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach(t=>this._projector.detach(t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const i=this._hiddenSurface,r=this._hiddenProjector;let n;const o=()=>(n=t.render(),n);r.append(i,o),r.renderNow();const u={left:0,top:0,right:0,bottom:0};if(n!=null&&n.domNode){const f=n.domNode.getBoundingClientRect();u.left=f.left,u.top=f.top,u.right=f.right,u.bottom=f.bottom}for(r.detach(o);i.firstChild;)i.removeChild(i.firstChild);return u}overlaps(t,i){const r=this.computeBoundingRect(t),n=this.computeBoundingRect(i);return Math.max(r.left,n.left)<=Math.min(r.right,n.right)&&Math.max(r.top,n.top)<=Math.min(r.bottom,n.bottom)}get hasVisibleItems(){return this.items.some(t=>t.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(t,i){const r=!!(i!=null&&i.disableDecorations);if(!this.items.some(o=>o.visible&&!(r&&o.isDecoration)))return;const n=t.getContext("2d");n.save(),n.font=this._fontString(),this.items.forEach(o=>{r&&o.isDecoration||(n.save(),o.renderCanvas(n),n.restore())}),n.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};m([w({readOnly:!0})],zd.prototype,"surface",void 0),m([w({readOnly:!0})],zd.prototype,"items",void 0),m([w({readOnly:!0})],zd.prototype,"needsRender",null),m([w({readOnly:!0})],zd.prototype,"_watchUpdatingTracking",void 0),m([w({readOnly:!0})],zd.prototype,"updating",null),zd=m([H("esri.views.overlay.ViewOverlay")],zd);const BG=zd,xM=[0,0];function w4e(e){const t=(e.ownerDocument||window.document).defaultView,i=e.getBoundingClientRect();return xM[0]=i.left+((t==null?void 0:t.pageXOffset)??0),xM[1]=i.top+((t==null?void 0:t.pageYOffset)??0),xM}function qG(e){e&&(e.textContent="",e.parentNode&&e.parentNode.removeChild(e))}function b4e(e){const t=document.createElement("div");return e.appendChild(t),t}const fw=16,D5=750,_4e=512,S4e=2,x4e=e=>{let t=class extends e{constructor(...i){super(...i),this._freqInfo={freq:fw,time:D5},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([me(()=>this.cursor,r=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",r)}),me(()=>this.navigating,r=>{const{surface:n}=this;n&&n.setAttribute("data-navigating",r.toString())})])}initialize(){this.addHandles([me(()=>this.ui,(i,r)=>this._handleUIChange(i,r),Je),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=Jt(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(i){const r=this._get("container"),n=oF(i);if(n||typeof i!="string"||Se.getLogger(this).error("#container",`element with id '${i}' not found`),r===n)return;if(this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(qG(this.root),this._set("root",null)),this.userContent&&(RG(this.userContent,r),qG(this.userContent),this._set("userContent",null))),!n)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);n.classList.add("esri-view");const o=document.createElement("div");o.className="esri-view-user-storage",RG(n,o),n.appendChild(o),this._set("userContent",o);const u=document.createElement("div");u.className="esri-view-root",n.insertBefore(u,n.firstChild),this._set("root",u);const f=document.createElement("div");f.className="esri-view-surface",f.setAttribute("role","application"),f.tabIndex=0,u.appendChild(f),this._set("surface",f);const g=new BG;u.appendChild(g.surface),this._set("overlay",g),this.addHandles(me(()=>g.needsRender,b=>{b&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Av({render:()=>{var E;return(E=this.overlay)==null?void 0:E.render()}}):this._overlayRenderTaskHandle=tr(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",n),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}blur(){var i;(i=this.surface)==null||i.blur()}focus(){var i;(i=this.surface)==null||i.focus()}pageToContainer(i,r,n){const o=this.position;return i-=o?o[0]:0,r-=o?o[1]:0,n?(n[0]=i,n[1]=r):n=[i,r],n}containerToPage(i,r,n){const o=this.position;return i+=o?o[0]:0,r+=o?o[1]:0,n?(n[0]=i,n[1]=r):n=[i,r],n}_handleUIChange(i,r){this.removeHandles("ui"),r&&r!==i&&r.destroy(),i&&(i.view=this,this.addHandles(me(()=>this.root,n=>{i.container=n?b4e(n):null},Je),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=fw,i.time=D5,this.addHandles([aS(window,"resize",()=>{i.freq=fw,i.time=D5}),Av({prepare:r=>{const n=this._measure(),o=this._freqInfo;if(o.time+=r.deltaTime,n&&(o.freq=fw,this._get("resizing")||this._set("resizing",!0)),o.time<o.freq)return;o.time=0;const u=this._position();o.freq=u||n?fw:Math.min(D5,o.freq*S4e),!n&&o.freq>=_4e&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,n=i?i.clientHeight:0;if(r===0||n===0)return this.suspended||this._set("suspended",!0),!1;const o=this.width,u=this.height;return r===o&&n===u?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:o,oldHeight:u,width:r,height:n}),!0)}_position(){const i=this.container,r=this.position,n=i&&w4e(i);return!!n&&(!r||n[0]!==r[0]||n[1]!==r[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return m([w()],t.prototype,"container",null),m([w({readOnly:!0})],t.prototype,"focused",null),m([w({readOnly:!0})],t.prototype,"height",void 0),m([w()],t.prototype,"messagesCommon",void 0),m([w({type:BG})],t.prototype,"overlay",void 0),m([w({readOnly:!0})],t.prototype,"position",void 0),m([w({readOnly:!0})],t.prototype,"resizing",void 0),m([w({readOnly:!0})],t.prototype,"root",void 0),m([w({value:null,readOnly:!0})],t.prototype,"size",null),m([w({readOnly:!0})],t.prototype,"surface",void 0),m([w({readOnly:!0})],t.prototype,"suspended",void 0),m([w()],t.prototype,"ui",void 0),m([w({readOnly:!0})],t.prototype,"userContent",void 0),m([w({readOnly:!0})],t.prototype,"width",void 0),m([w()],t.prototype,"widthBreakpoint",void 0),t=m([H("esri.views.DOMContainer")],t),t},tse=we("mac")?"Meta":"Control",E4e=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),I4e=e=>E4e.has(e);let T4e=class{constructor(t,i=[]){this.eventType=t,this.keyModifiers=i}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=t.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}},Sn=class{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const i=this._incoming[t];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager||(t.setEventCallback(i=>this._handleEvent(i)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,i,r){let n;typeof i=="function"?(r=i,n=[]):n=i||[];const o=typeof t=="string"?new T4e(t,n):t,u=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},f=E=>{const I=this._incoming[E.match.eventType];if(I){const M=I.indexOf(E);I.splice(M,1),u(),this._manager&&this._manager.updateDependencies()}},g=new $4e(o,r,{onPause:f,onRemove:f,onResume:E=>{const I=this._incoming[E.match.eventType];I&&!I.includes(E)&&(I.push(E),u(),this._manager&&this._manager.updateDependencies())}});let b=this._incoming[o.eventType];return b||(b=[],this._incoming[o.eventType]=b),b.push(g),u(),this._manager&&this._manager.updateDependencies(),g}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const i=new M4e(t,{onEmit:(r,n,o,u)=>{var f;(f=this._manager)==null||f.emit(r.eventType,n,o,u)},onRemove:r=>{var n;delete this._outgoing[r.eventType],(n=this._manager)==null||n.updateDependencies()}});return this._outgoing[t]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(t){var i;(i=this._manager)==null||i.setPointerCapture(t,!0)}stopCapturingPointer(t){var i;(i=this._manager)==null||i.setPointerCapture(t,!1)}refreshHasPendingInputs(){var t;(t=this._manager)==null||t.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(t){var r;const i=this._incoming[t.type];if(i){for(const n of i)if(n.match.matches(t)&&((r=n.callback)==null||r.call(n,t),t.shouldStopPropagation()))break}}},$4e=class{constructor(t,i,r){this.match=t,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},M4e=class{constructor(t,i){this.eventType=t,this._removed=!1,this._handler=i}emit(t,i,r){this._removed||this._handler.onEmit(this,t,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},C4e=class extends Sn{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>this._update(i.data))}_update(t){const i=t.native.pointerType==="touch"?"touch":"mouse",{x:r,y:n}=t;i===this._value&&this._x===r&&this._y===n||(this._value=i,this._x=r,this._y=n,this._onChange(i,r,n))}},A4e=class{constructor(t,i){this._observable=new _2,this._value=t,this._equalityFunction=i}get value(){return et(this._observable),this._value}set value(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}mutate(t){t(this._value),this._observable.notify()}};function w_(e,t=bee){return new A4e(e,t)}let k4e=class extends Sn{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=w_(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},L4e=class{constructor(t,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in t){const n=t[r],o=new Qee(n,void 0,void 0,2,2);this._properties[r]={pool:o,acquired:[]}}this._afterDispatchHandle=pwe(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const i=this._properties[t];for(const r of i.acquired)nU(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(t){const i=this._owner._get(t),r=this._properties[t];let n=r.pool.acquire();for(r.acquired.push(n);n===i;)r.acquired.push(n),n=r.pool.acquire();return n}_release(){for(const t in this._properties){const i=this._properties[t];let r=0;for(const n of i.acquired)nU(n)?i.acquired[r++]=n:i.pool.release(n);i.acquired.length=r}}},ka=class extends De{constructor(t){super(t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=tse,this._latestPointerType="mouse",this._propertiesPool=new L4e({latestPointerLocation:P4e},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const t=Object.keys(this._nameToGroup);for(const i of t)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(t=>t.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(t,i,r=Ii.INTERNAL){if(this._nameToGroup[t]||i.length===0)return;const n={name:t,handlers:i.map(o=>({handler:o,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[t]=n;for(let o=n.handlers.length-1;o>=0;o--){const u=n.handlers[o];this._handlers.push(u),u.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(f,g,b,E,I)=>{this._emitInputEvent(u.priorityIndex+1,f,g,b,I,E)},setPointerCapture:(f,g)=>{this._setPointerCapture(n,u,f,g)},setEventCallback:f=>{u.eventCallback=f},setUninstallCallback:f=>{u.uninstallCallback=f},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(t){const i=this._nameToGroup[t];i?(i.handlers.forEach(r=>{var n;r.removed=!0,(n=r.uninstallCallback)==null||n.call(r)}),delete this._nameToGroup[t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):Se.getLogger(this).error("There is no InputHandler group registered under the name `"+t+"`")}hasHandlers(t){return this._nameToGroup[t]!==void 0}isModifierKeyDown(t){return this._activeKeyModifiers.has(t)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const t=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const n=this._handlers[r];n.priorityIndex=r,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const n=this._handlersPriority[r];n.priorityIndex=r;let o=n.handler.hasSideEffects;if(!o){for(const u of n.handler.outgoingEventTypes)if(t.has(u)){o=!0;break}}if(o)for(const u of n.handler.incomingEventMatches){t.add(u.eventType);for(const f of u.keyModifiers)I4e(f)||i.add(f)}n.active=o}this._sourceEvents=t,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(t,i,r){this._latestPointerType=t;const n=this._get("latestPointerLocation");if(n==null||n.x!==i||n.y!==r){const o=this._propertiesPool.get("latestPointerLocation");o.x=i,o.y=r,this._set("latestPointerLocation",o)}}_onEventReceived(t,i){if(t==="pointer-capture-lost"){const o=i;this._pointerCaptures.delete(o.native.pointerId)}this._updateKeyModifiers(t,i);const r=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,n=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(t,i,r,n)}_updateKeyModifiers(t,i){if(!i)return;let r=!1;const n=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},o=(f,g)=>{g&&!this._activeKeyModifiers.has(f)?(n(),this._activeKeyModifiers.add(f)):!g&&this._activeKeyModifiers.has(f)&&(n(),this._activeKeyModifiers.delete(f))};if(t==="key-down"||t==="key-up"){const f=i.key;this._keyModifiers.has(f)&&o(f,t==="key-down")}const u=i.native;o("Alt",!!(u!=null&&u.altKey)),o("Control",!!(u!=null&&u.ctrlKey)),o("Ctrl",!!(u!=null&&u.ctrlKey)),o("Shift",!!(u!=null&&u.shiftKey)),o("Meta",!!(u!=null&&u.metaKey)),o("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new C4e((t,i,r)=>this._setLatestPointer(t,i,r)),this._multiTouchHandler=new k4e,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Ii.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Ii.INTERNAL)}_setPointerCapture(t,i,r,n){const o=t.name+"-"+i.priorityIndex,u=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,u),n?(u.add(o),u.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):u.has(o)&&(u.delete(o),u.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(t=>!t.removed),this.updateDependencies()}_emitInputEventFromSource(t,i,r,n){this._emitInputEvent(0,t,i,r,n)}_emitInputEvent(t,i,r,n,o,u){const f=n!==void 0?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),g=o!==void 0&&o,b={event:new O4e(i,r,f,u||this._activeKeyModifiers,g),priorityIndex:t};this._currentPropagation?this._currentPropagation.events.push(b):this._doNewPropagation(b)}_doNewPropagation(t){this._currentPropagation={events:new rI,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:t.event.timestamp},this._currentPropagation.events.push(t),this._continuePropagation()}_continuePropagation(){var i,r,n;this._paused=!1;const t=this._currentPropagation;if(t){for(;t.events.length>0;){const{event:o,priorityIndex:u}=t.events.pop(),f=(i=o.data)==null?void 0:i.eventId;if(!(f!=null&&this._stoppedPropagationEventIds.has(f)))for(t.currentHandler=this._handlersPriority[u];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!o.shouldStopPropagation()&&((n=(r=t.currentHandler).eventCallback)==null||n.call(r,o)),o.shouldStopPropagation()){f!=null&&this._stoppedPropagationEventIds.add(f);break}if(o.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:o,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(t){const i=new rI;i.push(t);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(t,i){if(t.handler.hasSideEffects!==i.handler.hasSideEffects)return t.handler.hasSideEffects?1:-1;if(t.groupPriority!==i.groupPriority)return t.groupPriority>i.groupPriority?-1:1;for(const r of t.handler.incomingEventMatches)for(const n of i.handler.incomingEventMatches){if(r.eventType!==n.eventType)continue;const o=r.keyModifiers.filter(u=>n.keyModifiers.includes(u));if(o.length===r.keyModifiers.length!=(o.length===n.keyModifiers.length))return r.keyModifiers.length>n.keyModifiers.length?-1:1}return t.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(t){const i=[];for(const r of t){let n=0;for(;n<i.length&&this._compareHandlerPriority(r,i[n])>=0;)n++;i.splice(n,0,r)}return i}get debug(){const t=i=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=r};return{injectEvent:(i,r)=>{t(()=>this._onEventReceived(i,r))},disablePointerCapture:t}}};m([w({readOnly:!0})],ka.prototype,"hasPendingInputs",null),m([w({constructOnly:!0})],ka.prototype,"eventSource",void 0),m([w({constructOnly:!0})],ka.prototype,"recognizers",void 0),m([w()],ka.prototype,"_latestPointerType",void 0),m([w()],ka.prototype,"latestPointerType",null),m([w()],ka.prototype,"multiTouchActive",null),m([w({readOnly:!0})],ka.prototype,"latestPointerLocation",void 0),m([w()],ka.prototype,"_paused",void 0),m([w({readOnly:!0})],ka.prototype,"updating",null),ka=m([H("esri.views.input.InputManager")],ka);let O4e=class{constructor(t,i,r,n,o){this.type=t,this.data=i,this.timestamp=r,this.modifiers=n,this.cancelable=o,this._propagationState=Ip.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Ip.STOPPED}shouldStopPropagation(){return!!(this._propagationState&Ip.STOPPED)}async(t){this._propagationState|=Ip.PAUSED;const i=(r,n)=>{this._propagationState&=~Ip.PAUSED;const o=this._resumeCallback;if(this._resumeCallback=null,o&&o(),n)throw r;return r};return(typeof t=="function"?t():t).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(t){return!!(this._propagationState&Ip.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}};var Ip;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(Ip||(Ip={}));const Ii={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let R4e=class{};const P4e=R4e;function Cd(e){return e!=null&&"open"in e&&"declaredClass"in e}function HG(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}const N4e=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([me(()=>[this.ui,this.popup],([i,r],n)=>{const o="popup",u="manual";if(n){const[f,g]=n;f&&Cd(g)&&(g.view=null,HG(g)&&f.remove(g,o))}i&&Cd(r)&&(r.view=this,HG(r)&&i.add(r,{key:o,position:u,internal:!0}))},Je),this.on("click",i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&(Cd(this.popup)?this.popup.viewModel.handleViewClick(i):i.async(async()=>{await this.setupPopup(),Cd(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)}))},Ii.WIDGET)]),cl(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{ce(()=>Promise.resolve().then(()=>PJ),void 0,import.meta.url)})}destroy(){this.destroyed||this.closePopup()}async openPopup(i){if(Cd(this.popup))return this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void Se.getLogger(this).error(new ne("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){var i;(i=this._popupSetupTask)==null||i.abort(),Cd(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,r){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(i,r),r)}async setupPopup(){var i;if((i=this._popupSetupTask)==null||i.abort(),this.popup&&!Cd(this.popup))return this._popupSetupTask=pS(async r=>{const{default:n}=await ce(()=>Promise.resolve().then(()=>PJ),void 0,import.meta.url);if(Li(r),!this.popup||Cd(this.popup))return;const o=this.popup;delete o.open,delete o.close,this.popup=new n(o)}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:i,hits:r},n){const o=[],u=[];let f=!1;const g=H2e(n,we("popup-view-fetch-timeout")??D4e),b=M=>{const k=new F4e(M);return u.push(k),o.push(k.promise),k},E=M=>{const k=u.at(-1);return k&&k.layerView===M&&!f?k:b(M)};for(const M of r)"graphic"in M?(E(M.layerView).graphics.push(M.graphic),f=!1):(o.push(M.layerView.fetchPopupFeaturesAtLocation(M.mapPoint,g)),f=!0);u.map(M=>M.resolve(g));const I=q2e(o).then(M=>M.filter(k=>!!k).flat());return{pendingFeatures:o,allGraphicsPromise:I,location:i}}async _getPopupHits(i,r){const{hits:n,location:o}=await this.popupHitTest(i);Li(r);const u=[];for(const f of n)if("graphic"in f){if(this._isValidPopupGraphic(f.graphic,r)){const g=this._isValidPopupGraphicsLayerView(f.layerView)?f.layerView:void 0;u.push({graphic:f.graphic,layerView:g})}}else this._isValidPopupLocationLayerView(f.layerView)&&u.push({mapPoint:f.mapPoint,layerView:f.layerView});return{hits:u,location:o}}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(r==null?void 0:r.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(i){return!i||(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesFromGraphics"in i}_isValidPopupLocationLayerView(i){return(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesAtLocation"in i}};return m([w()],t.prototype,"popup",void 0),m([w()],t.prototype,"popupEnabled",void 0),t=m([H("esri.views.PopupView")],t),t};let F4e=class{constructor(t){this.layerView=t,this._resolver=wa(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(t){const{layerView:i,graphics:r,_resolver:n}=this;if(!i)return n.resolve(r),n.promise;let o;return i.fetchPopupFeaturesFromGraphics(r,t).catch(u=>(o=u,null)).then(u=>{u?n.resolve(u):n.reject(o)}),n.promise}};const D4e=5e3;function yf(e,t,i=Oe){return t||(t=new i),t===e||(t.removeAll(),j4e(e)?t.addMany(e):e&&t.add(e)),t}function ise(e){return e}function j4e(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}var Tp;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(Tp||(Tp={}));let z4e=class{constructor(){this._resolver=wa(),this._status=Tp.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Tp.RESOLVED,this._cleanUp()},()=>{this._status=Tp.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===Tp.RESOLVED}isRejected(){return this._status===Tp.REJECTED}isFulfilled(){return this._status!==Tp.PENDING}abort(){this._resolver.reject(wi())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=wa(),i=[...this._resolvingPromises,t.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},n=>{this.isFulfilled()||this._allPromise!==r||Or(n)||this._resolver.reject(n)}),t.resolve()}};const wS=e=>{let t=class extends e{constructor(...i){super(...i),this._promiseProps=new z4e,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return this._promiseProps.promise.then(()=>this).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return t=m([H("esri.core.Promise")],t),t};let yI=class extends wS(De){};yI=m([H("esri.core.Promise")],yI);const V4e="not-loaded",U4e="loading",G4e="failed",WG="loaded",rse=e=>{let t=class extends e{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const n=this.load.bind(this);this.load=o=>{const u=new Promise((f,g)=>{const b=yN(o,g);this.destroyed&&g(new ne("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(f,g).finally(()=>{b&&b.remove()})});if(this.loadStatus===V4e){this._set("loadStatus",U4e);const f=this._loadController=new AbortController;n({signal:f.signal})}return r(),u}})),this.when(()=>{this._set("loadStatus",WG),this._loadController=null},r=>{this._set("loadStatus",G4e),this._set("loadError",r),this._loadController=null})}destroy(){this._loadController&&(this._loadController=Ec(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===WG}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new ne("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort(),this._promiseProps.abort()),this}};return m([w({readOnly:!0})],t.prototype,"loaded",null),m([w({readOnly:!0})],t.prototype,"loadError",void 0),m([w({clonable:!1})],t.prototype,"loadStatus",void 0),m([w({type:[ga],readOnly:!0})],t.prototype,"loadWarnings",null),t=m([H("esri.core.Loadable")],t),t};let Kw=class extends rse(yI){};Kw=m([H("esri.core.Loadable")],Kw),function(e){function t(i){return!(!i||!i.load)}e.LoadableMixin=rse,e.isLoadable=t}(Kw||(Kw={}));const pl=Kw;async function oT(e,t){return await e.load(),B4e(e,t)}async function B4e(e,t){const i=[],r=(...o)=>{for(const u of o)u!=null&&(Array.isArray(u)?r(...u):Oe.isCollection(u)?u.forEach(f=>r(f)):pl.isLoadable(u)&&i.push(u))};t(r);let n=null;if(await p_e(i,async o=>{const u=await Z6(q4e(o)?o.loadAll():o.load());u.ok!==!1||n||(n=u)}),n)throw n.error;return e}function q4e(e){return"loadAll"in e&&typeof e.loadAll=="function"}let j5;function H4e(e){return j5&&!j5.destroyed||(j5=e()),j5}var _8;const W4e=new gt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let La=_8=class extends De{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new _8({categories:this.categories?he(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let i=[];this.categories&&(i=this.categories.map(u=>Array.isArray(u)?JSON.stringify(u):u));let r="";if(this.extent){const u=G6(this.extent,st.WGS84);u!=null&&(r=`${u.xmin},${u.ymin},${u.xmax},${u.ymax}`)}let n=this.query;!this.disableExtraQuery&&e.extraQuery&&(n="("+n+")"+e.extraQuery);const o={categories:i,bbox:r,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(o.sortField=this.sortField.split(",").map(u=>W4e.toJSON(u.trim())).join(","),o.sortOrder=this.sortOrder),{query:{...t,...o}}}};m([w()],La.prototype,"categories",void 0),m([w()],La.prototype,"disableExtraQuery",void 0),m([w({type:Ht})],La.prototype,"extent",void 0),m([w()],La.prototype,"filter",void 0),m([w()],La.prototype,"num",void 0),m([w()],La.prototype,"query",void 0),m([w()],La.prototype,"sortField",void 0),m([w()],La.prototype,"sortOrder",null),m([w()],La.prototype,"start",void 0),La=_8=m([H("esri.portal.PortalQueryParams")],La);const lu=La;var S8;let Hr=S8=class extends be{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var i;const e=this.url,t=this.thumbnail;return e&&t&&this.portal?(i=this.portal)==null?void 0:i.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then(t=>{const i=t.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):i})}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new ne("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new S8({sourceJSON:e});return t.read(e),t}queryItems(e,t){let i=ir(lu,e);const r=this.portal;return parseFloat(r.currentVersion)>5?(i=i||new lu,r.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",t)):(i=i?i.clone():new lu,i.query="group:"+this.id+(i.query?" "+i.query:""),r.queryItems(i,t))}_fetchCategorySchemaSet(e,t){const i=this.portal;return i.fetchSelf(i.authMode,!0,t).then(r=>{const n=r.contentCategorySetsGroupQuery;if(n){const o=new lu({disableExtraQuery:!0,num:1,query:n});return i.queryGroups(o,t)}throw new ne("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const n=r.results[0],o=new lu({num:1,query:`typekeywords:"${e}"`});return n.queryItems(o,t)}throw new ne("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",t).then(n=>{const o=n==null?void 0:n.categorySchema;return o!=null&&o.length?o:[]}):[])}};m([w()],Hr.prototype,"access",void 0),m([w({type:Date})],Hr.prototype,"created",void 0),m([w()],Hr.prototype,"description",void 0),m([w()],Hr.prototype,"id",void 0),m([w()],Hr.prototype,"isInvitationOnly",void 0),m([w({type:Date})],Hr.prototype,"modified",void 0),m([w()],Hr.prototype,"owner",void 0),m([w()],Hr.prototype,"portal",void 0),m([w()],Hr.prototype,"snippet",void 0),m([w()],Hr.prototype,"sortField",void 0),m([w()],Hr.prototype,"sortOrder",void 0),m([w()],Hr.prototype,"sourceJSON",void 0),m([w()],Hr.prototype,"tags",void 0),m([w()],Hr.prototype,"thumbnail",void 0),m([w({readOnly:!0})],Hr.prototype,"thumbnailUrl",null),m([w()],Hr.prototype,"title",void 0),m([w({readOnly:!0})],Hr.prototype,"url",null),Hr=S8=m([H("esri.portal.PortalGroup")],Hr);const x8=Hr;let r0=class extends De{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};m([w()],r0.prototype,"nextQueryParams",void 0),m([w()],r0.prototype,"queryParams",void 0),m([w()],r0.prototype,"results",void 0),m([w()],r0.prototype,"total",void 0),r0=m([H("esri.portal.PortalQueryResult")],r0);const Z4e=r0;let Yc=class extends be{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var i;const t=(i=this.portal)==null?void 0:i.restUrl;return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new ne("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};m([w({type:Date})],Yc.prototype,"created",void 0),m([w()],Yc.prototype,"id",void 0),m([w()],Yc.prototype,"portal",void 0),m([w()],Yc.prototype,"title",void 0),m([w({readOnly:!0})],Yc.prototype,"url",null),m([w()],Yc.prototype,"username",void 0),Yc=m([H("esri.portal.PortalFolder")],Yc);const J4e=Yc;var E8;let Pi=E8=class extends be{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/content/users/${this.username}`:null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,i=e==null?void 0:e.data,r=e==null?void 0:e.folder,n={method:"post"};t&&(n.query=t.createPostQuery(),i!=null&&(typeof i=="string"?n.query.text=i:typeof i=="object"&&(n.query.text=JSON.stringify(i))));let o=this.userContentUrl;return r&&(o+="/"+(typeof r=="string"?r:r.id)),this.portal.request(o+"/addItem",n).then(u=>(t.id=u.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}async deleteItem(e,t=!1){let i=this.userContentUrl;e.ownerFolder&&(i+="/"+e.ownerFolder);const r=t?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${e.id}/delete`,{method:"post",query:r}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.slice();const i=this.userContentUrl+"/deleteItems",r=[],n=e.map(o=>o.id);if(n.length){const o={method:"post",query:{items:n.join(","),permanentDelete:t}},u=await this.portal.request(i,o);for(const f of u.results){const g=e.find(I=>f.itemId===I.id),b=f.success;let E=null;b?(g.id=null,g.portal=null):f.error&&(E=new ne("portal:delete-item-failed",f.error.message,f.error)),r.push({item:g,success:b,error:E})}}return r}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(t=>{let i;return i=t&&t.folders?t.folders.map(r=>{const n=J4e.fromJSON(r);return n.portal=this.portal,n}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(i=>{const r=x8.fromJSON(i);return r.portal=this.portal,r}):[],t})}async fetchItems(e){e??(e={});let t=this.userContentUrl??"";e.folder&&(t+="/"+e.folder.id);const{default:i}=await ce(()=>Promise.resolve().then(()=>ose),void 0,import.meta.url),r={folders:!1,inRecycleBin:!!e.inRecycleBin||null,foldersContent:!(e.folder||!e.includeSubfolderItems)||null,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"},n=await this.portal.request(t,{query:r});let o;return n!=null&&n.items?(o=n.items.map(u=>{const f=i.fromJSON(u);return f.portal=this.portal,f}),await Promise.all(o.map(u=>u.load())),{items:o,nextStart:n.nextStart,total:n.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new x8({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new ne("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(e,t){const i=this.userContentUrl,r=t?{folderID:typeof t=="string"?t:t.id}:null;await this.portal.request(i+`/items/${e.id}/restore`,{method:"post",query:r})}toJSON(){throw new ne("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new E8({sourceJSON:e});return t.read(e),t}};m([w()],Pi.prototype,"access",void 0),m([w({type:Date})],Pi.prototype,"created",void 0),m([w()],Pi.prototype,"culture",void 0),m([w()],Pi.prototype,"description",void 0),m([w()],Pi.prototype,"email",void 0),m([w()],Pi.prototype,"favGroupId",void 0),m([w()],Pi.prototype,"fullName",void 0),m([w({type:Date})],Pi.prototype,"modified",void 0),m([w()],Pi.prototype,"orgId",void 0),m([w()],Pi.prototype,"portal",void 0),m([w()],Pi.prototype,"preferredView",void 0),m([w()],Pi.prototype,"privileges",void 0),m([w()],Pi.prototype,"region",void 0),m([w()],Pi.prototype,"role",void 0),m([w()],Pi.prototype,"roleId",void 0),m([w()],Pi.prototype,"sourceJSON",void 0),m([w()],Pi.prototype,"thumbnail",void 0),m([w({readOnly:!0})],Pi.prototype,"thumbnailUrl",null),m([w()],Pi.prototype,"units",void 0),m([w({readOnly:!0})],Pi.prototype,"userContentUrl",null),m([w({readOnly:!0})],Pi.prototype,"url",null),m([w()],Pi.prototype,"username",void 0),m([w()],Pi.prototype,"userLicenseTypeId",void 0),m([w()],Pi.prototype,"userType",void 0),Pi=E8=m([H("esri.portal.PortalUser")],Pi);const hF=Pi;var Jo;let yw;const ZG={PortalGroup:()=>Promise.resolve({default:x8}),PortalItem:()=>ce(()=>Promise.resolve().then(()=>ose),void 0,import.meta.url),PortalUser:()=>Promise.resolve({default:hF})};let je=Jo=class extends g2(pl){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Kt.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){JG.unregister(this),this.defaultBasemap=Jt(this.defaultBasemap),this.defaultDevBasemap=Jt(this.defaultDevBasemap),this.defaultVectorBasemap=Jt(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=tr(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)Kt.request.trustedServers.includes(t)||Kt.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){var i;const e=(i=this.user)==null?void 0:i.orgId,t=!e||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get hasAPIKey(){return Fte(this.url)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.slice(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=hF.fromJSON(e),t.portal=this),t}load(e){const t=ce(()=>Promise.resolve().then(()=>_Ee),void 0,import.meta.url).then(({default:i})=>{Li(e),yw=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(i=>{var r;if(!this.hasAPIKey&&Et){const n=Et;this.credential=n.findCredential(this.restUrl),this.credential||this.authMode!==Jo.AUTH_MODE_AUTO&&this.authMode!==Jo.AUTH_MODE_NO_PROMPT||((r=this._esriIdCredentialCreateHandle)==null||r.remove(),this._esriIdCredentialCreateHandle=n.on("credential-create",K4e(new WeakRef(this))),JG.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await ce(async()=>{const{default:i}=await import("./ElevationLayer-Kaut7An-.js");return{default:i}},__vite__mapDeps([123,124,125,126,127]),import.meta.url)).default;return e?e.map(i=>new t({id:i.id,url:i.url})):[]}async fetchBasemaps(e,t){const i=await this._fetchBasemaps(e,t);if((t==null?void 0:t.include3d)===!0&&this.use3dBasemaps!==!1){const r=await this._fetchBasemaps3D(e,t);i.unshift(...r)}return i}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const t=new lu;t.query=this.default3DBasemapQuery,t.disableExtraQuery=!0;const i=(await this.queryItems(t,e)).results.find(r=>r.type==="Web Scene");return i?new yw({portalItem:i}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):va(e)?Promise.reject(wi()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,i=new lu({num:100,sortField:"title"});if(t!=null&&t.length){const r=[];for(const n of t)r.push(`(title:"${n.title}" AND owner:${n.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,e).then(n=>n.results)}return va(e)?Promise.reject(wi()):Promise.resolve([])}fetchRegions(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||Ds();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||Ds();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return H4e(()=>new Jo)}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,i){const r=this.restUrl+"/portals/self",n={authMode:e,query:{culture:Ds().toLowerCase()},withCredentials:!0,...i};return n.authMode==="auto"&&(n.authMode="no-prompt"),t&&(n.query.default=!0),this.request(r,n)}queryPortal(e,t,i,r){const n=ir(lu,t),o=u=>this.request(this.restUrl+e,{...n.toRequestOptions(this),...r}).then(f=>{const g=n.clone();return g.start=f.nextStart,new Z4e({nextQueryParams:g,queryParams:n,total:f.total,results:Jo._resultsToTypedArray(u,{portal:this},f,r)})}).then(f=>Promise.all(f.results.map(g=>typeof g.when=="function"?g.when():f)).then(()=>f,g=>(mc(g),f)));return i&&ZG[i]?ZG[i]().then(({default:u})=>(Li(r),o(u))):o()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new ne("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===Jo.AUTH_MODE_ANONYMOUS||this.authMode===Jo.AUTH_MODE_NO_PROMPT&&!Et)return Promise.reject(new ne("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return Et?Et.getCredential(this.restUrl,{prompt:this.authMode!==Jo.AUTH_MODE_NO_PROMPT}).then(t=>e(t)):e(this.credential)}normalizeUrl(e){var i;const t=(i=this.credential)==null?void 0:i.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,i){return this.request(e,t).then(r=>{const n=Jo._resultsToTypedArray(i,{portal:this},r);return Promise.all(n.map(o=>typeof o.when=="function"?o.when():r)).then(()=>n,()=>n)})}request(e,t={}){const i={f:"json",...t.query},{authMode:r=this.authMode===Jo.AUTH_MODE_ANONYMOUS||this.authMode===Jo.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:n=null,cacheBust:o=!1,method:u="auto",responseType:f="json",signal:g}=t,b={authMode:r,body:n,cacheBust:o,method:u,query:i,responseType:f,timeout:0,signal:g};return t.withCredentials&&(b.withCredentials=!0),Ct(this._normalizeSSL(e),b).then(E=>E.data)}toJSON(){throw new ne("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Jo({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new ne("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const i=new lu;i.query=e||(this.hasAPIKey?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const r=await this.queryGroups(i,t);if(!r.total)return[];const n=r.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=n.sortField||"name",i.sortOrder=n.sortOrder||"desc";const o=await n.queryItems(i,t);return o.total?o.results.filter(u=>u.type==="Web Map").map(u=>new yw({portalItem:u})):[]}async _fetchBasemaps3D(e,t){const i=e||this.basemapGalleryGroupQuery3D;if(!i)return[];const r=new lu({query:i,disableExtraQuery:!0}),n=await this.queryGroups(r,t);if(!n.total)return[];const o=n.results[0];r.num=100,r.query='type:"Web Scene"',r.sortField=o.sortField||"name",r.sortOrder=o.sortOrder||"desc";const u=await o.queryItems(r,t);return u.total?u.results.filter(f=>f.type==="Web Scene").map(f=>new yw({portalItem:f})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=yw.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,i,r){let n;if(i){const o=r!=null?r.signal:null;n=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||t)&&(n=n.map(u=>{const f=Object.assign(e?e.fromJSON(u):u,t);return typeof f.load=="function"&&f.load(o),f}))}else n=[];return n}};je.AUTH_MODE_ANONYMOUS="anonymous",je.AUTH_MODE_AUTO="auto",je.AUTH_MODE_IMMEDIATE="immediate",je.AUTH_MODE_NO_PROMPT="no-prompt",m([w()],je.prototype,"access",void 0),m([w()],je.prototype,"allSSL",void 0),m([w()],je.prototype,"authMode",void 0),m([w()],je.prototype,"authorizedCrossOriginDomains",void 0),m([ke("authorizedCrossOriginDomains")],je.prototype,"readAuthorizedCrossOriginDomains",null),m([w()],je.prototype,"basemapGalleryGroupQuery",void 0),m([w({json:{name:"3DBasemapGalleryGroupQuery"}})],je.prototype,"basemapGalleryGroupQuery3D",void 0),m([w()],je.prototype,"bingKey",void 0),m([w()],je.prototype,"canListApps",void 0),m([w()],je.prototype,"canListData",void 0),m([w()],je.prototype,"canListPreProvisionedItems",void 0),m([w()],je.prototype,"canProvisionDirectPurchase",void 0),m([w()],je.prototype,"canSearchPublic",void 0),m([w()],je.prototype,"canShareBingPublic",void 0),m([w()],je.prototype,"canSharePublic",void 0),m([w()],je.prototype,"canSignInArcGIS",void 0),m([w()],je.prototype,"canSignInIDP",void 0),m([w()],je.prototype,"colorSetsGroupQuery",void 0),m([w()],je.prototype,"commentsEnabled",void 0),m([w({type:Date})],je.prototype,"created",void 0),m([w()],je.prototype,"credential",void 0),m([w()],je.prototype,"culture",void 0),m([w()],je.prototype,"currentVersion",void 0),m([w()],je.prototype,"customBaseUrl",void 0),m([w()],je.prototype,"default3DBasemapQuery",void 0),m([w()],je.prototype,"defaultBasemap",void 0),m([ke("defaultBasemap")],je.prototype,"readDefaultBasemap",null),m([w()],je.prototype,"defaultDevBasemap",void 0),m([ke("defaultDevBasemap")],je.prototype,"readDefaultDevBasemap",null),m([w({type:Ht})],je.prototype,"defaultExtent",void 0),m([w()],je.prototype,"defaultVectorBasemap",void 0),m([ke("defaultVectorBasemap")],je.prototype,"readDefaultVectorBasemap",null),m([w()],je.prototype,"description",void 0),m([w()],je.prototype,"devBasemapGalleryGroupQuery",void 0),m([w()],je.prototype,"eueiEnabled",void 0),m([w({readOnly:!0})],je.prototype,"extraQuery",null),m([w()],je.prototype,"featuredGroups",void 0),m([w()],je.prototype,"featuredItemsGroupQuery",void 0),m([w()],je.prototype,"galleryTemplatesGroupQuery",void 0),m([w()],je.prototype,"layoutGroupQuery",void 0),m([w()],je.prototype,"livingAtlasGroupQuery",void 0),m([w({readOnly:!0})],je.prototype,"hasAPIKey",null),m([w()],je.prototype,"hasCategorySchema",void 0),m([w()],je.prototype,"hasClassificationSchema",void 0),m([w()],je.prototype,"helpBase",void 0),m([w()],je.prototype,"helperServices",void 0),m([w()],je.prototype,"helpMap",void 0),m([w()],je.prototype,"homePageFeaturedContent",void 0),m([w()],je.prototype,"homePageFeaturedContentCount",void 0),m([w()],je.prototype,"httpPort",void 0),m([w()],je.prototype,"httpsPort",void 0),m([w()],je.prototype,"id",void 0),m([w()],je.prototype,"ipCntryCode",void 0),m([w({readOnly:!0})],je.prototype,"isOrganization",null),m([w()],je.prototype,"isPortal",void 0),m([w()],je.prototype,"isReadOnly",void 0),m([w({readOnly:!0})],je.prototype,"itemPageUrl",null),m([w()],je.prototype,"layerTemplatesGroupQuery",void 0),m([w()],je.prototype,"maxTokenExpirationMinutes",void 0),m([w({type:Date})],je.prototype,"modified",void 0),m([w()],je.prototype,"name",void 0),m([w()],je.prototype,"portalHostname",void 0),m([w()],je.prototype,"portalMode",void 0),m([w()],je.prototype,"portalProperties",void 0),m([w()],je.prototype,"region",void 0),m([w()],je.prototype,"recycleBinEnabled",void 0),m([w({readOnly:!0})],je.prototype,"restUrl",null),m([w()],je.prototype,"rotatorPanels",void 0),m([w()],je.prototype,"showHomePageDescription",void 0),m([w()],je.prototype,"sourceJSON",void 0),m([w()],je.prototype,"staticImagesUrl",void 0),m([w({json:{name:"2DStylesGroupQuery"}})],je.prototype,"stylesGroupQuery2d",void 0),m([w({json:{name:"stylesGroupQuery"}})],je.prototype,"stylesGroupQuery3d",void 0),m([w()],je.prototype,"supportsHostedServices",void 0),m([w()],je.prototype,"symbolSetsGroupQuery",void 0),m([w()],je.prototype,"templatesGroupQuery",void 0),m([w()],je.prototype,"thumbnail",void 0),m([w({readOnly:!0})],je.prototype,"thumbnailUrl",null),m([w()],je.prototype,"units",void 0),m([w()],je.prototype,"url",void 0),m([w()],je.prototype,"urlKey",void 0),m([ke("urlKey")],je.prototype,"readUrlKey",null),m([w()],je.prototype,"user",void 0),m([ke("user")],je.prototype,"readUser",null),m([w()],je.prototype,"use3dBasemaps",void 0),m([w()],je.prototype,"useDefault3dBasemap",void 0),m([w()],je.prototype,"useStandardizedQuery",void 0),m([w()],je.prototype,"useVectorBasemaps",void 0),m([w()],je.prototype,"vectorBasemapGalleryGroupQuery",void 0),je=Jo=m([H("esri.portal.Portal")],je);const Ur=je,JG=new FinalizationRegistry(e=>{e.remove()});function K4e(e){const t=Et;return()=>{const i=e.deref();i&&t.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}let Xc=class extends De{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t!=null&&t.portalItem&&t.path?{...t,path:KG(t.path,t.portalItem)}:t}set path(t){t!=null&&pa(t)?Se.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return KG(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",i){const r=this.cdnUrl;if(r==null)throw new ne("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:t,query:{token:this.portalItem.apiKey,_ts:i!=null&&i.cacheBust?Date.now():null},signal:i==null?void 0:i.signal})}async update(t,i){const{addOrUpdateResources:r}=await ce(()=>import("./resourceUtils-cvK32z0R.js"),[],import.meta.url);return await r(this.portalItem,[{resource:this,content:t,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"update",i),this}hasPath(){return this.path!=null}};function KG(e,t){return e==null?e:(e=e.replace(/^\/+/,""),t!=null&&pa(e)&&(e=xN(e,t.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}m([w()],Xc.prototype,"portalItem",void 0),m([w({type:String,value:null})],Xc.prototype,"path",null),m([St("path")],Xc.prototype,"_castPath",null),m([w({type:String,readOnly:!0})],Xc.prototype,"url",null),m([w({type:String,readOnly:!0})],Xc.prototype,"cdnUrl",null),m([w({type:String,readOnly:!0})],Xc.prototype,"itemRelativeUrl",null),Xc=m([H("esri.portal.PortalItemResource")],Xc);const Y4e=Xc;let Yw=class extends De{constructor(t){super(t),this.created=null,this.rating=null}};m([w()],Yw.prototype,"created",void 0),m([w()],Yw.prototype,"rating",void 0),Yw=m([H("esri.portal.PortalRating")],Yw);const EM=Yw;function mf(e,t){var r;const i=(r=t==null?void 0:t.url)==null?void 0:r.path;if(e&&i&&(e=Co(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const n=xN(e,t.portalItem.itemUrl);n!=null&&X4e.test(n)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(n).path)}return(e=I8(e,t==null?void 0:t.portal))&&aT.test(e)?pF(e):e}function bS(e,t,i=b_.YES){var n,o;if((e=e&&aT.test(e)?sse(e):e)==null)return e;!pa(e)&&(t!=null&&t.blockedRelativeUrls)&&t.blockedRelativeUrls.push(e);let r=Co(e);if(t){const u=((n=t.verifyItemRelativeUrls)==null?void 0:n.rootPath)||((o=t.url)==null?void 0:o.path);if(u){const f=I8(u,t.portal),g=I8(r,t.portal);r=xN(g,f,f),r!=null&&r!==g&&r!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=nse(r,t==null?void 0:t.portal),pa(r)&&(r=sl(r)),t!=null&&t.resources&&(t!=null&&t.portalItem)&&!pa(r)&&!hd(r)&&i===b_.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r),compress:!1}),r}function dF(e,t,i){return mf(e,i)}function em(e,t,i,r){const n=bS(e,r);n!==void 0&&(t[i]=n)}const aT=/\/items\/([^/]+)\/resources\/(.*)/,X4e=/^\.\/resources\//;function Q4e(e){const t=(e==null?void 0:e.match(aT))??null;return(t==null?void 0:t[1])??null}function eEe(e){const t=(e==null?void 0:e.match(aT))??null;if(t==null)return null;const i=t[2],r=i.lastIndexOf("/");if(r===-1){const{path:u,extension:f}=lU(i);return{prefix:null,filename:u,extension:f}}const{path:n,extension:o}=lU(i.slice(r+1));return{prefix:i.slice(0,r),filename:n,extension:o}}function nse(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?PA(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function I8(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`,r=wN();return kv(r,`${r.scheme}://${i}`)?PA(e,t.portalHostname,i):PA(e,i,t.portalHostname)}function pF(e){if(!e)return e||null;let t=e;return t&&Et&&!Et.findCredential(t)&&(t=_te(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function sse(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&Et&&!Et.findCredential(t)&&(t=_te(t)),t}var b_;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(b_||(b_={}));const Yrt=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return b_},ensureMainOnlineDomain:nse,fromCDNUrl:sse,fromJSON:mf,itemIdFromResourceUrl:Q4e,prefixAndFilenameFromResourceUrl:eEe,read:dF,toCDNUrl:pF,toJSON:bS,write:em},Symbol.toStringTag,{value:"Module"}));var n0;const tEe=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),iEe=new Set(["KML","GeoJson","CSV"]);let wt=n0=class extends g2(pl){static from(e){return h2(n0,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return e==="Feature Service"||e==="Feature Collection"?i=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?i=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?i="Scene Layer":e==="Video Service"?i="Video Layer":e==="Scene Package"?i="Scene Layer Package":e==="Stream Service"?i="Feature Layer":e==="Geoprocessing Service"?i=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geoenrichment Service"?i="GeoEnrichment Service":e==="Geocoding Service"?i="Locator":e==="Microsoft Powerpoint"?i="Microsoft PowerPoint":e==="GeoJson"?i="GeoJSON":e==="Globe Service"?i="Globe Layer":e==="Vector Tile Service"?i="Tile Layer":e==="netCDF"?i="NetCDF":e==="Map Service"?i=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e!=null&&e.toLowerCase().includes("add in")?i=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?i="Big Data File Share":e==="Compact Tile Package"?i="Tile Package (tpkx)":e==="Raster function template"?i="Raster Function Template":e==="OGCFeatureServer"?i="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?i="Instant App":e==="Insights Page"?i="Insights Report":e==="Excalibur Imagery Project"?i="Excalibur Project":e==="3DTiles Service"?i="3D tiles layer":e==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(e){return e&&e.length?new Ht(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){var k;const e=((k=this.type)==null?void 0:k.toLowerCase())||"",t=this.typeKeywords||[],i="esri/images/portal/",r="16";let n,o=!1,u=!1,f=!1,g=!1,b=!1,E=!1,I=!1,M=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(o=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(u=t.includes("Table"),f=t.includes("Route Layer"),g=t.includes("Markup"),b=t.includes("Spatiotemporal"),E=t.includes("UtilityNetwork"),n=b&&u?"spatiotemporaltable":u?"table":f?"routelayer":g?"markup":b?"spatiotemporal":E?"utilitynetwork":o?"featureshosted":"features"):e==="map service"||e==="wms"||e==="wmts"?(b=t.includes("Spatiotemporal"),I=t.includes("Relational"),n=b||I?"mapimages":o||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages"):n=e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?n="maps":e==="web scene"?n=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?n="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?n="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?n="mapsgray":e==="service definition"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?n="datafiles":e==="360 vr experience"?n="360vr":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?n="appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?n="addindesktop":e==="pdf"?n="pdf":e==="microsoft word"?n="word":e==="microsoft excel"?n="excel":e==="microsoft powerpoint"?n="ppt":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?n="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?n="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?n="layersgray":e==="analysis model"?n="analysismodel":e==="scene package"?n="scenepackage":e==="3dtiles package"?n="3dtileslayerpackage":e==="3dtiles service"?n="3dtileslayer":e==="mobile scene package"?n="mobilescenepackage":e==="tile package"||e==="compact tile package"?n="tilepackage":e==="task file"?n="taskfile":e==="report template"?n="report-template":e==="statistical data collection"?n="statisticaldatacollection":e==="insights workbook"?n="workbook":e==="insights model"?n="insightsmodel":e==="insights page"?n="insightspage":e==="insights theme"?n="insightstheme":e==="hub initiative"?n="hubinitiative":e==="hub page"?n="hubpage":e==="hub site application"?n="hubsite":e==="hub event"?n="hubevent":e==="hub project"?n="hubproject":e==="relational database connection"?n="relationaldatabaseconnection":e==="big data file share"?n="datastorecollection":e==="image collection"?n="imagecollection":e==="desktop style"?n="desktopstyle":e==="style"?n=t.includes("Dictionary")?"dictionarystyle":"style":e==="dashboard"?n="dashboard":e==="raster function template"?n="rasterprocessingtemplate":e==="vector tile package"?n="vectortilepackage":e==="ortho mapping project"?n="orthomappingproject":e==="ortho mapping template"?n="orthomappingtemplate":e==="solution"?n="solutions":e==="geopackage"?n="geopackage":e==="deep learning package"?n="deeplearningpackage":e==="real time analytic"?n="realtimeanalytics":e==="reality mapping project"?n="realitymappingproject":e==="big data analytic"?n="bigdataanalytics":e==="feed"?n="feed":e==="excalibur imagery project"?n="excaliburimageryproject":e==="notebook"?n="notebook":e==="storymap"?n="storymap":e==="survey123 add in"?n="survey123addin":e==="mission"?n="mission":e==="mission report"?n="missionreport":e==="mission template"?n="missiontemplate":e==="quickcapture project"?n="quickcaptureproject":e==="pro report"?n="proreport":e==="pro report template"?n="proreporttemplate":e==="urban model"?n="urbanmodel":e==="urban project"?n="urbanproject":e==="web experience"?n="experiencebuilder":e==="web experience template"?n="webexperiencetemplate":e==="experience builder widget"?n="experiencebuilderwidget":e==="experience builder widget package"?n="experiencebuilderwidgetpackage":e==="workflow"?n="workflow":e==="kernel gateway connection"?n="kernelgatewayconnection":e==="insights script"?n="insightsscript":e==="hub initiative template"?n="hubinitiativetemplate":e==="storymap theme"?n="storymaptheme":e==="knowledge graph"?n="knowledgegraph":e==="knowledge graph layer"?n="knowledgegraphlayer":e==="knowledge studio project"?n="knowledgestudio":e==="native application"?n="nativeapp":e==="native application installer"?n="nativeappinstaller":e==="web link chart"?n="linkchart":e==="knowledge graph web investigation"?n="investigation":e==="ogcfeatureserver"?n="features":e==="pro presentation"?n="propresentation":e==="pro project"?n="proproject":e==="insights workbook package"?n="insightsworkbookpackage":e==="apache parquet"?n="apacheparquet":e==="notebook code snippet library"?n="notebookcodesnippets":e==="suitability model"?n="suitabilitymodel":e==="esri classifier definition"?n="classifierdefinition":e==="esri classification schema"?n="classificationschema":e==="insights data engineering workbook"?n="dataengineeringworkbook":e==="insights data engineering model"?n="dataengineeringmodel":e==="deep learning studio project"?n="deeplearningproject":e==="discussion"?n="discussion":e==="allsource project"?n="allsourceproject":e==="api key"?n="apikey":e==="data pipeline"?n="datapipelines":e==="group layer"?(M=t.includes("Map"),n=M?"layergroup2d":"layergroup"):n=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":e==="csv"?"csv":e==="image"?"image":"maps",n?Vt(i+n+r+".png"):null}get isLayer(){return this.type!=null&&tEe.has(this.type)}get itemCdnUrl(){return pF(this.itemUrl)}get itemPageUrl(){var t;const e=(t=this.portal)==null?void 0:t.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const e=this.itemUrl,t=this.thumbnail;return e&&t?((i=this.portal)==null?void 0:i.normalizeUrl(`${e}/info/${t}?f=json`))??null:null}get userItemUrl(){var i,r,n;const e=(i=this.portal)==null?void 0:i.restUrl;if(!e)return null;const t=this.owner||((n=(r=this.portal)==null?void 0:r.user)==null?void 0:n.username);return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=Ur.getDefault()),i=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}};return e instanceof EM&&(e=e.rating),e==null||isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new EM({rating:e,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:he(this.applicationProxies),avgRating:this.avgRating,categories:he(this.categories),classification:he(this.classification),created:he(this.created),culture:this.culture,description:this.description,extent:he(this.extent),groupCategories:he(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:he(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:he(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:he(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:he(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new n0({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){var t;const e=this.toJSON();for(const i of["tags","typeKeywords","categories"])e[i]=(t=e[i])==null?void 0:t.join(", ");for(const i of["extent","classification"]){const r=e[i];r&&(e[i]=JSON.stringify(r))}return e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new EM(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},n0)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.applicationProxies&&!Object.hasOwn(e,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e==null?void 0:e.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?i.query.text=t:typeof t=="object"&&(i.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new ne("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new ne("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:i}=this;await t.signIn();const{copyResources:r,folder:n,tags:o,title:u}=e||{},f={method:"post",query:{copyPrivateResources:r==="all",folder:typeof n=="string"?n:n==null?void 0:n.id,includeResources:!!r,tags:o==null?void 0:o.join(","),title:u}},{itemId:g}=await t.request(`${i}/copy`,f);return new n0({id:g,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,i=e.filename,r={method:"post"};if(typeof t=="string")hd(t)?r.query={data:t}:r.query={url:Co(t)},i!=null&&(r.query.filename=i);else{const n=new FormData;i!=null?n.append("file",t,i):n.append("file",t),r.body=n}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new ne("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:i}=await ce(()=>import("./resourceUtils-cvK32z0R.js"),[],import.meta.url);return i(this,e,t)}async addResource(e,t,i){const{addOrUpdateResources:r}=await ce(()=>import("./resourceUtils-cvK32z0R.js"),[],import.meta.url);return e.portalItem=this,await r(this,[{resource:e,content:t,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"add",i),e}async removeResource(e,t){const{removeResource:i}=await ce(()=>import("./resourceUtils-cvK32z0R.js"),[],import.meta.url);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new ne("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await ce(()=>import("./resourceUtils-cvK32z0R.js"),[],import.meta.url);return t(this,e)}resourceFromPath(e){return new Y4e({portalItem:this,path:e})}toJSON(){var i,r;const e=this.extent,t={accessInformation:this.accessInformation,categories:he(this.categories),classification:he(this.classification),created:(i=this.created)==null?void 0:i.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(r=this.modified)==null?void 0:r.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:he(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:he(this.typeKeywords),url:this.url};return Ive(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new n0({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};m([w({type:["private","shared","org","public"]})],wt.prototype,"access",void 0),m([w()],wt.prototype,"accessInformation",void 0),m([w({type:String})],wt.prototype,"apiKey",void 0),m([w({json:{read:{source:"appProxies"}}})],wt.prototype,"applicationProxies",void 0),m([w()],wt.prototype,"avgRating",void 0),m([w()],wt.prototype,"categories",void 0),m([w()],wt.prototype,"classification",void 0),m([w({type:Date})],wt.prototype,"created",void 0),m([w()],wt.prototype,"culture",void 0),m([w()],wt.prototype,"description",void 0),m([w({readOnly:!0})],wt.prototype,"displayName",null),m([w({type:Ht})],wt.prototype,"extent",void 0),m([ke("extent")],wt.prototype,"readExtent",null),m([w()],wt.prototype,"groupCategories",void 0),m([w({readOnly:!0})],wt.prototype,"iconUrl",null),m([w()],wt.prototype,"id",void 0),m([w({readOnly:!0})],wt.prototype,"isLayer",null),m([w({type:Boolean,readOnly:!0})],wt.prototype,"isOrgItem",void 0),m([w()],wt.prototype,"itemControl",void 0),m([w({readOnly:!0})],wt.prototype,"itemPageUrl",null),m([w({readOnly:!0})],wt.prototype,"itemUrl",null),m([w()],wt.prototype,"licenseInfo",void 0),m([w({type:Date})],wt.prototype,"modified",void 0),m([w()],wt.prototype,"name",void 0),m([w()],wt.prototype,"numComments",void 0),m([w()],wt.prototype,"numRatings",void 0),m([w()],wt.prototype,"numViews",void 0),m([w()],wt.prototype,"owner",void 0),m([w()],wt.prototype,"ownerFolder",void 0),m([w({type:Ur})],wt.prototype,"portal",void 0),m([w()],wt.prototype,"screenshots",void 0),m([w()],wt.prototype,"size",void 0),m([w()],wt.prototype,"snippet",void 0),m([w()],wt.prototype,"sourceJSON",void 0),m([w({type:String})],wt.prototype,"sourceUrl",void 0),m([w({type:String})],wt.prototype,"spatialReference",void 0),m([w()],wt.prototype,"tags",void 0),m([w()],wt.prototype,"thumbnail",void 0),m([w({readOnly:!0})],wt.prototype,"thumbnailUrl",null),m([w()],wt.prototype,"title",void 0),m([w()],wt.prototype,"type",void 0),m([w()],wt.prototype,"typeKeywords",void 0),m([w({type:String,json:{read(e,t){var i;if(iEe.has(t.type)){const r=(i=this.portal)==null?void 0:i.restUrl;e||(e=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return e}}})],wt.prototype,"url",void 0),m([w({readOnly:!0})],wt.prototype,"userItemUrl",null),wt=n0=m([H("esri.portal.PortalItem")],wt);const Mc=wt,ose=Object.freeze(Object.defineProperty({__proto__:null,default:Mc},Symbol.toStringTag,{value:"Module"}));async function rEe(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,i=await vS("esri/t9n/basemaps");return i[e]||i[t]}const Uv={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Vt("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Vt("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Vt("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Vt("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Vt("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Vt("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Vt("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Vt("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Vt("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Vt("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Vt("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Vt("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Vt("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Vt("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return Vt("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return Vt("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return Vt("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return Vt("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Vt("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Vt("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Vt("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Vt("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Vt("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Vt("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Vt("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Vt("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Vt("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}},nEe=new Set(["ar","bs","ca","hr","cs","da","nl","en","et","fi","fr","de","el","he","hu","id","it","ja","ko","lv","lt","nb","pl","ro","ru","sr","es","sv","th","tr","uk","vi"]);let Qc=class extends De{constructor(t){super(t),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps",this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;const t=Ds().toLowerCase();switch(t){case"pt-br":return"pt-BR";case"pt-pt":return"pt-PT";case"zh-cn":return"zh-CN";case"zh-hk":return"zh-HK";case"zh-tw":return"zh-TW"}const i=O_e(t);return i==="pt"?"pt-BR":i&&nEe.has(i)?i:"global"}};m([w()],Qc.prototype,"apiKey",void 0),m([w()],Qc.prototype,"id",void 0),m([w()],Qc.prototype,"language",void 0),m([w()],Qc.prototype,"places",void 0),m([w()],Qc.prototype,"serviceUrl",void 0),m([w()],Qc.prototype,"worldview",void 0),Qc=m([H("esri.support.BasemapStyle")],Qc);const sEe=Qc;function oEe(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="feature"}function aEe(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="subtype-group"&&"sublayers"in e}function s0(e){return(e==null?void 0:e.type)==="subtype-sublayer"}const Qrt={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function T8(e){const t=e==null?void 0:e.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function lEe(e){return e==="integrated-mesh"||e==="integrated-mesh-3dtiles"}function lT(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function ent(e){var i;const t=e==null?void 0:e.type;return(t==="feature"||t==="subtype-group"||t==="oriented-imagery")&&((i=e.source)==null?void 0:i.type)==="feature-layer"}async function ase(e,t){const i=Et==null?void 0:Et.findServerInfo(e);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const r=e.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const n=`${e.slice(0,r)}/rest/info`,o=t!=null?t.signal:null,{data:u}=await Ct(n,{query:{f:"json"},responseType:"json",signal:o});return(u==null?void 0:u.owningSystemUrl)||null}function uEe(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function lse(e){return uEe(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function cEe(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function hEe(e){return!!cEe(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const dEe=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),pEe=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function fEe(e){return e.layerContainerType==="basemap"?dEe:e.layerContainerType==="operational-layers"?pEe:null}function yEe(e,t){if(t.restrictedWebMapWriting){const i=fEe(t);return i==null||i.has(e.type)&&!lT(e)}return!0}function mEe(e,t){var i;if(t)if(lT(e)){const r=iS("featureCollection.layers",t),n=(i=r==null?void 0:r[0])==null?void 0:i.layerDefinition;n&&YG(e,n)}else e.type!=="group"&&YG(e,t)}function YG(e,t){"maxScale"in e&&(t.maxScale=FE(e.maxScale)??void 0),"minScale"in e&&(t.minScale=FE(e.minScale)??void 0)}function gEe(e,t){if(mEe(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=FE(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(lT(e)){const i=t.featureCollection;i&&(i.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function $8(e,t,i){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return i!=null&&i.messages&&i.messages.push(new ne("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(lT(e)&&!e.isTable)t=e.resourceInfo;else if(yEe(e,i)){const r={};return e.write(r,i)?r:null}return t!=null&&gEe(e,t=he(t)),t}var Xw;let vEe=0,Ko=Xw=class extends g2(pl){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+vEe++,this.baseLayers=new Oe,this.referenceLayers=new Oe;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&Se.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.addHandles([this.baseLayers.on("after-add",r=>t(r.item)),this.referenceLayers.on("after-add",r=>t(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(e=>{Se.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const i of e)i.destroy();const t=this.referenceLayers.toArray();for(const i of t)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=Jt(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",yf(e,this._get("baseLayers")))}_writeBaseLayers(e,t,i){const r=[];e&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(n=>{const o=$8(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);o!=null&&r.push(o)}),this.referenceLayers.forEach(n=>{const o=$8(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);o!=null&&(n.type!=="scene"&&(o.isReference=!0),r.push(o))})),t.baseMapLayers=r}set referenceLayers(e){this._set("referenceLayers",yf(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return oT(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(t=>AE(t)?t.clone():t),referenceLayers:this.referenceLayers.map(t=>AE(t)?t.clone():t)};return this.loaded&&(e.loadStatus="loaded"),new Xw({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){var i;return e=e||{},t!=null&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&((i=this.resourceInfo)!=null&&i.data.baseMapLayers)&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(r=>{const n=he(r);return n.url&&Ac(n.url)&&(n.url=`https:${n.url}`),n.templateUrl&&Ac(n.templateUrl)&&(n.templateUrl=`https:${n.templateUrl}`),n})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:i,style:r}=this;Li(e);const n=[];if(t){const o=t.context?t.context.url:null;if(n.push(this._loadLayersFromJSON(t.data,o,e)),t.data.id&&!t.data.title){const u=t.data.id;n.push(rEe(u).then(f=>{f&&this.read({title:f},t.context)}))}}else i?n.push(this._loadFromItem(i,e)):r&&n.push(this._loadFromStylesService(r,e));await Promise.all(n)}async _loadLayersFromJSON(e,t,i){var g,b;const r=(g=this.resourceInfo)==null?void 0:g.context,n=((b=this.portalItem)==null?void 0:b.portal)||(r==null?void 0:r.portal)||null,o=bEe[(r==null?void 0:r.origin)||""]??"web-map",{populateOperationalLayers:u}=await ce(async()=>{const{populateOperationalLayers:E}=await import("./layersCreator-Bg_-AcQ5.js");return{populateOperationalLayers:E}},__vite__mapDeps([128,129,130,131]),import.meta.url),f=[];if(Li(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const E={context:{...r,origin:o,url:t,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},I=L=>o==="web-scene"&&L.layerType==="ArcGISSceneServiceLayer"||L.isReference,M=u(this.baseLayers,e.baseMapLayers.filter(L=>!I(L)),E);f.push(M);const k=u(this.referenceLayers,e.baseMapLayers.filter(I),E);f.push(k)}await Promise.allSettled(f)}async _loadFromItem(e,t){const i=await e.load(t),r=await i.fetchData("json",t),n=_r(e.itemUrl??"");return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:wEe[e.type||""]??"web-map",portal:e.portal||Ur.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||Ur.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,t)}async _loadFromStylesService(e,t){const i=`${e.serviceUrl}/${e.id}`,r=(await Ct(i,{query:{language:e.getLanguageParamValue(),places:e.places,worldview:e.worldview,token:e.apiKey},signal:t==null?void 0:t.signal})).data,n=_r(i);if(this._set("resourceInfo",{data:r.baseMap??{},context:{origin:"web-map",url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,n,t),e.apiKey)for(const o of[...this.baseLayers,...this.referenceLayers])"apiKey"in o&&(o.apiKey=e.apiKey)}static fromId(e){const t=Uv[e];return t?t.itemId?new Xw({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):Xw.fromJSON(t,{origin:t.is3d?"web-scene":"web-map"}):null}};m([w({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,i,r){this._writeBaseLayers(e,t,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Oe}},writer(e,t,i,r){this._writeBaseLayers(e,t,r)}}}}}})],Ko.prototype,"baseLayers",null),m([w({type:String,json:{origins:{"web-scene":{write:!0}}}})],Ko.prototype,"id",void 0),m([w({type:Mc})],Ko.prototype,"portalItem",void 0),m([w()],Ko.prototype,"referenceLayers",null),m([w({readOnly:!0})],Ko.prototype,"resourceInfo",void 0),m([w({type:st})],Ko.prototype,"spatialReference",void 0),m([w({type:sEe})],Ko.prototype,"style",void 0),m([w()],Ko.prototype,"thumbnailUrl",void 0),m([w({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Ko.prototype,"title",void 0),m([Pe("title")],Ko.prototype,"writeTitle",null),Ko=Xw=m([H("esri.Basemap")],Ko);const wEe={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},bEe={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},hv=Ko,_Ee=Object.freeze(Object.defineProperty({__proto__:null,default:hv},Symbol.toStringTag,{value:"Module"})),mI={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function use(e){return!!mI[e]||!!mI[e.toLowerCase()]}function fF(e){return mI[e]??mI[e.toLowerCase()]}function SEe(e){return[...fF(e)]}function IM(e,t,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?e+(t-e)*r:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function cse(e,t,i,r=1){const n=(e%360+360)%360/360,o=i<=.5?i*(t+1):i+t-i*t,u=2*i-o;return[Math.round(255*IM(u,o,n+1/3)),Math.round(255*IM(u,o,n)),Math.round(255*IM(u,o,n-1/3)),r]}function xEe(e){const t=e.length>5,i=t?8:4,r=(1<<i)-1,n=t?1:17,o=t?e.length===9:e.length===5;let u=+("0x"+e.slice(1));if(isNaN(u))return null;const f=[0,0,0,1];let g;return o&&(g=u&r,u>>=i,f[3]=n*g/255),g=u&r,u>>=i,f[2]=n*g,g=u&r,u>>=i,f[1]=n*g,g=u&r,u>>=i,f[0]=n*g,f}function z5(e){return oo(cN(e),0,255)}function V5(e,t,i){return e=Number(e),isNaN(e)?i:e<t?t:e>i?i:e}function U5(e,t){const i=e.toString(16).padStart(2,"0");return t?i.slice(0,1):i}let L9=class un{static blendColors(t,i,r,n=new un){return n.r=Math.round(t.r+(i.r-t.r)*r),n.g=Math.round(t.g+(i.g-t.g)*r),n.b=Math.round(t.b+(i.b-t.b)*r),n.a=t.a+(i.a-t.a)*r,n._sanitize()}static fromRgb(t,i){const r=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(r){const n=r[2].split(/\s*,\s*/),o=r[1];if(o==="rgb"&&n.length===3||o==="rgba"&&n.length===4){const u=n[0];if(u.charAt(u.length-1)==="%"){const f=n.map(g=>2.56*parseFloat(g));return n.length===4&&(f[3]=parseFloat(n[3])),un.fromArray(f,i)}return un.fromArray(n.map(f=>parseFloat(f)),i)}if(o==="hsl"&&n.length===3||o==="hsla"&&n.length===4)return un.fromArray(cse(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])),i)}return null}static fromHex(t,i=new un){if(t[0]!=="#"||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const r=parseInt(t.slice(1,2),16),n=parseInt(t.slice(2,3),16),o=parseInt(t.slice(3,4),16),u=t.length===5?15:parseInt(t.slice(4),16);return un.fromArray([r+16*r,n+16*n,o+16*o,(u+16*u)/255],i)}case 7:case 9:{const r=parseInt(t.slice(1,3),16),n=parseInt(t.slice(3,5),16),o=parseInt(t.slice(5,7),16),u=t.length===7?255:parseInt(t.slice(7),16);return un.fromArray([r,n,o,u/255],i)}default:return null}}static fromArray(t,i=new un){return i._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(t,i){const r=use(t)?fF(t):null;return r&&un.fromArray(r,i)||un.fromRgb(t,i)||un.fromHex(t,i)}static fromJSON(t){return t!=null?new un([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?un.fromString(t,this):Array.isArray(t)?un.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof un||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const i=(t==null?void 0:t.capitalize)??!1,r=(t==null?void 0:t.digits)??6,n=r===3||r===4,o=r===4||r===8,u=`#${U5(this.r,n)}${U5(this.g,n)}${U5(this.b,n)}${o?U5(Math.round(255*this.a),n):""}`;return i?u.toUpperCase():u}toCss(t=!1){const i=this.r+", "+this.g+", "+this.b;return t?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=un.AlphaMode.ALWAYS){const i=z5(this.r),r=z5(this.g),n=z5(this.b);return t===un.AlphaMode.ALWAYS||this.a!==1?[i,r,n,z5(255*this.a)]:[i,r,n]}clone(){return new un(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(V5(this.r,0,255)),this.g=Math.round(V5(this.g,0,255)),this.b=Math.round(V5(this.b,0,255)),this.a=V5(this.a,0,1),this}_set(t,i,r,n){this.r=t,this.g=i,this.b=r,this.a=n}};L9.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(L9||(L9={}));const Ne=L9;function tnt(e){}function EEe(e){return()=>e}function Ke(e,t={}){const i=e instanceof gt?e:new gt(e,t),{alwaysWriteDefaults:r,default:n,ignoreUnknown:o=!0,name:u,nonNullable:f,readOnly:g=!1}=t;return w({type:o?i.apiValues:String,json:{type:i.jsonValues,default:n,name:u,read:!g&&{reader:i.read},write:{writer:i.write,alwaysWriteDefaults:r}},nonNullable:f,readOnly:g})}var M8;let O9=M8=class extends be{constructor(e){super(e),this.type="none"}clone(){return new M8({type:this.type})}};m([Ke({none:"none",stayAbove:"stay-above"})],O9.prototype,"type",void 0),O9=M8=m([H("esri.ground.NavigationConstraint")],O9);function uT(e){const t=cN(100*(1-e));return Math.max(0,Math.min(t,100))}function __(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var C8;let eh=C8=class extends g2(pl){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Oe;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&Se.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>t(r.item)),this.layers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(e=>{Or(e)||Se.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)Jt(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",yf(e,this._get("layers")))}writeLayers(e,t,i,r){const n=[];e&&(r={...r,layerContainerType:"ground"},e.forEach(o=>{if("write"in o){const u={};EEe(o)().write(u,r)&&n.push(u)}else r!=null&&r.messages&&r.messages.push(new ne("layer:unsupported",`Layers (${o.title}, ${o.id}) of type '${o.declaredClass}' cannot be persisted in the ground`,{layer:o}))})),t.layers=n}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return oT(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await ce(()=>import("./ElevationQuery-AYXwwc55.js"),[],import.meta.url);Li(t);const r=new i,n=this.layers.filter(XG).toArray();return r.queryAll(n,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await ce(()=>import("./ElevationQuery-AYXwwc55.js"),[],import.meta.url);Li(t);const r=new i,n=this.layers.filter(XG).toArray();return r.createSamplerAll(n,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:he(this.surfaceColor),navigationConstraint:he(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new C8({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}async _loadLayersFromJSON(e,t,i){const r=(t==null?void 0:t.origin)||"web-scene",n=(t==null?void 0:t.portal)||null,o=(t==null?void 0:t.url)||null,{populateOperationalLayers:u}=await ce(async()=>{const{populateOperationalLayers:g}=await import("./layersCreator-Bg_-AcQ5.js");return{populateOperationalLayers:g}},__vite__mapDeps([128,129,130,131]),import.meta.url);Li(i);const f=[];if(e.layers&&Array.isArray(e.layers)){const g={context:{origin:r,url:o,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};f.push(u(this.layers,e.layers,g))}await Promise.allSettled(f)}};function IEe(e){return e&&"createElevationSampler"in e}function XG(e){return e.type==="elevation"||IEe(e)}m([w({json:{read:!1}})],eh.prototype,"layers",null),m([Pe("layers")],eh.prototype,"writeLayers",null),m([w({readOnly:!0})],eh.prototype,"resourceInfo",void 0),m([w({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Ot,read:{reader:__,source:"transparency"},write:{writer:(e,t)=>{t.transparency=uT(e)},target:"transparency"}}})],eh.prototype,"opacity",void 0),m([w({type:Ne,json:{type:[Ot],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],eh.prototype,"surfaceColor",void 0),m([w({type:O9,json:{write:!0}})],eh.prototype,"navigationConstraint",void 0),eh=C8=m([H("esri.Ground")],eh);const gI=eh,G5=new WeakMap;function yF(e){return!e.destroyed&&(G5.has(e)||e.addHandles([me(()=>{const t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||yF(t))},t=>G5.set(e,t),Ln),Yt(()=>G5.delete(e))]),G5.get(e))}function TEe(e){return typeof e=="object"&&e!=null&&"loaded"in e&&e.loaded===!0&&"type"in e}function $Ee(e){var t,i;return!(!TEe(e)||!((i=(t=lse(e))==null?void 0:t.operations)!=null&&i.supportsEditing)||"editingEnabled"in e&&!hEe(e)||yF(e))}const MEe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,CEe="screenUtils.toPt: input not recognized!",hse=96;function hr(e){return e?e/72*hse:0}function Uo(e){return e?72*e/hse:0}function Gt(e){if(typeof e=="string"){const t=e.match(MEe);if(t){const i=Number(t[1]),r=t[3]&&t[3].toLowerCase(),n=e.charAt(0)==="-",o=r==="px"?Uo(i):i;return n?-o:o}return console.warn(CEe),null}return e}function gn(e=0,t=0){return{x:e,y:t}}function int(e){return e?gn(e.x,e.y):null}function AEe(e=0,t=0){return[e,t]}function rnt(e=0,t=0,i=0){return[e,t,i]}function nnt(e){return e}function snt(e){return e}function ont(e){return e}function ant(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}function cT(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function kEe(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function LEe(e,t,i,r,n,o,u,f,g,b,E,I,M,k,L,P){const D=new Float32Array(16);return D[0]=e,D[1]=t,D[2]=i,D[3]=r,D[4]=n,D[5]=o,D[6]=u,D[7]=f,D[8]=g,D[9]=b,D[10]=E,D[11]=I,D[12]=M,D[13]=k,D[14]=L,D[15]=P,D}function OEe(e,t){return new Float32Array(e,t,16)}const REe=cT();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:REe,clone:kEe,create:cT,createView:OEe,fromValues:LEe},Symbol.toStringTag,{value:"Module"}));let mF=1e-6;function Vr(){return mF}function PEe(e){mF=e}const hT=Math.random,NEe=Math.PI/180,FEe=180/Math.PI;function gF(e){return e*NEe}function DEe(e){return e*FEe}function jEe(e,t){return Math.abs(e-t)<=mF*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:hT,equals:jEe,getEpsilon:Vr,setEpsilon:PEe,toDegree:DEe,toRadian:gF},Symbol.toStringTag,{value:"Module"}));function dse(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Mf(e,t,i,r,n,o,u,f,g,b,E,I,M,k,L,P,D){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=o,e[5]=u,e[6]=f,e[7]=g,e[8]=b,e[9]=E,e[10]=I,e[11]=M,e[12]=k,e[13]=L,e[14]=P,e[15]=D,e}function dT(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Cf(e,t){if(e===t){const i=t[1],r=t[2],n=t[3],o=t[6],u=t[7],f=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=n,e[13]=u,e[14]=f}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function zEe(e,t){return pse(e,t)||dT(e),e}function pse(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],u=t[4],f=t[5],g=t[6],b=t[7],E=t[8],I=t[9],M=t[10],k=t[11],L=t[12],P=t[13],D=t[14],j=t[15],z=i*f-r*u,V=i*g-n*u,W=i*b-o*u,Q=r*g-n*f,Z=r*b-o*f,ee=n*b-o*g,ie=E*P-I*L,oe=E*D-M*L,le=E*j-k*L,xe=I*D-M*P,$e=I*j-k*P,Te=M*j-k*D;let de=z*Te-V*$e+W*xe+Q*le-Z*oe+ee*ie;return de?(de=1/de,e[0]=(f*Te-g*$e+b*xe)*de,e[1]=(n*$e-r*Te-o*xe)*de,e[2]=(P*ee-D*Z+j*Q)*de,e[3]=(M*Z-I*ee-k*Q)*de,e[4]=(g*le-u*Te-b*oe)*de,e[5]=(i*Te-n*le+o*oe)*de,e[6]=(D*W-L*ee-j*V)*de,e[7]=(E*ee-M*W+k*V)*de,e[8]=(u*$e-f*le+b*ie)*de,e[9]=(r*le-i*$e-o*ie)*de,e[10]=(L*Z-P*W+j*z)*de,e[11]=(I*W-E*Z-k*z)*de,e[12]=(f*oe-u*xe-g*ie)*de,e[13]=(i*xe-r*oe+n*ie)*de,e[14]=(P*V-L*Q-D*z)*de,e[15]=(E*Q-I*V+M*z)*de,e):null}function VEe(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],u=t[4],f=t[5],g=t[6],b=t[7],E=t[8],I=t[9],M=t[10],k=t[11],L=t[12],P=t[13],D=t[14],j=t[15];return e[0]=f*(M*j-k*D)-I*(g*j-b*D)+P*(g*k-b*M),e[1]=-(r*(M*j-k*D)-I*(n*j-o*D)+P*(n*k-o*M)),e[2]=r*(g*j-b*D)-f*(n*j-o*D)+P*(n*b-o*g),e[3]=-(r*(g*k-b*M)-f*(n*k-o*M)+I*(n*b-o*g)),e[4]=-(u*(M*j-k*D)-E*(g*j-b*D)+L*(g*k-b*M)),e[5]=i*(M*j-k*D)-E*(n*j-o*D)+L*(n*k-o*M),e[6]=-(i*(g*j-b*D)-u*(n*j-o*D)+L*(n*b-o*g)),e[7]=i*(g*k-b*M)-u*(n*k-o*M)+E*(n*b-o*g),e[8]=u*(I*j-k*P)-E*(f*j-b*P)+L*(f*k-b*I),e[9]=-(i*(I*j-k*P)-E*(r*j-o*P)+L*(r*k-o*I)),e[10]=i*(f*j-b*P)-u*(r*j-o*P)+L*(r*b-o*f),e[11]=-(i*(f*k-b*I)-u*(r*k-o*I)+E*(r*b-o*f)),e[12]=-(u*(I*D-M*P)-E*(f*D-g*P)+L*(f*M-g*I)),e[13]=i*(I*D-M*P)-E*(r*D-n*P)+L*(r*M-n*I),e[14]=-(i*(f*D-g*P)-u*(r*D-n*P)+L*(r*g-n*f)),e[15]=i*(f*M-g*I)-u*(r*M-n*I)+E*(r*g-n*f),e}function UEe(e){const t=e[0],i=e[1],r=e[2],n=e[3],o=e[4],u=e[5],f=e[6],g=e[7],b=e[8],E=e[9],I=e[10],M=e[11],k=e[12],L=e[13],P=e[14],D=e[15];return(t*u-i*o)*(I*D-M*P)-(t*f-r*o)*(E*D-M*L)+(t*g-n*o)*(E*P-I*L)+(i*f-r*u)*(b*D-M*k)-(i*g-n*u)*(b*P-I*k)+(r*g-n*f)*(b*L-E*k)}function fse(e,t,i){const r=t[0],n=t[1],o=t[2],u=t[3],f=t[4],g=t[5],b=t[6],E=t[7],I=t[8],M=t[9],k=t[10],L=t[11],P=t[12],D=t[13],j=t[14],z=t[15];let V=i[0],W=i[1],Q=i[2],Z=i[3];return e[0]=V*r+W*f+Q*I+Z*P,e[1]=V*n+W*g+Q*M+Z*D,e[2]=V*o+W*b+Q*k+Z*j,e[3]=V*u+W*E+Q*L+Z*z,V=i[4],W=i[5],Q=i[6],Z=i[7],e[4]=V*r+W*f+Q*I+Z*P,e[5]=V*n+W*g+Q*M+Z*D,e[6]=V*o+W*b+Q*k+Z*j,e[7]=V*u+W*E+Q*L+Z*z,V=i[8],W=i[9],Q=i[10],Z=i[11],e[8]=V*r+W*f+Q*I+Z*P,e[9]=V*n+W*g+Q*M+Z*D,e[10]=V*o+W*b+Q*k+Z*j,e[11]=V*u+W*E+Q*L+Z*z,V=i[12],W=i[13],Q=i[14],Z=i[15],e[12]=V*r+W*f+Q*I+Z*P,e[13]=V*n+W*g+Q*M+Z*D,e[14]=V*o+W*b+Q*k+Z*j,e[15]=V*u+W*E+Q*L+Z*z,e}function GEe(e,t,i){const r=i[0],n=i[1],o=i[2];if(t===e)e[12]=t[0]*r+t[4]*n+t[8]*o+t[12],e[13]=t[1]*r+t[5]*n+t[9]*o+t[13],e[14]=t[2]*r+t[6]*n+t[10]*o+t[14],e[15]=t[3]*r+t[7]*n+t[11]*o+t[15];else{const u=t[0],f=t[1],g=t[2],b=t[3],E=t[4],I=t[5],M=t[6],k=t[7],L=t[8],P=t[9],D=t[10],j=t[11];e[0]=u,e[1]=f,e[2]=g,e[3]=b,e[4]=E,e[5]=I,e[6]=M,e[7]=k,e[8]=L,e[9]=P,e[10]=D,e[11]=j,e[12]=u*r+E*n+L*o+t[12],e[13]=f*r+I*n+P*o+t[13],e[14]=g*r+M*n+D*o+t[14],e[15]=b*r+k*n+j*o+t[15]}return e}function BEe(e,t,i){const r=i[0],n=i[1],o=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function qEe(e,t,i,r){let n=r[0],o=r[1],u=r[2],f=Math.sqrt(n*n+o*o+u*u);if(f<=Vr())return void dse(e,t);f=1/f,n*=f,o*=f,u*=f;const g=Math.sin(i),b=Math.cos(i),E=1-b,I=t[0],M=t[1],k=t[2],L=t[3],P=t[4],D=t[5],j=t[6],z=t[7],V=t[8],W=t[9],Q=t[10],Z=t[11],ee=n*n*E+b,ie=o*n*E+u*g,oe=u*n*E-o*g,le=n*o*E-u*g,xe=o*o*E+b,$e=u*o*E+n*g,Te=n*u*E+o*g,de=o*u*E-n*g,se=u*u*E+b;e[0]=I*ee+P*ie+V*oe,e[1]=M*ee+D*ie+W*oe,e[2]=k*ee+j*ie+Q*oe,e[3]=L*ee+z*ie+Z*oe,e[4]=I*le+P*xe+V*$e,e[5]=M*le+D*xe+W*$e,e[6]=k*le+j*xe+Q*$e,e[7]=L*le+z*xe+Z*$e,e[8]=I*Te+P*de+V*se,e[9]=M*Te+D*de+W*se,e[10]=k*Te+j*de+Q*se,e[11]=L*Te+z*de+Z*se,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15])}function HEe(e,t,i){const r=Math.sin(i),n=Math.cos(i),o=t[4],u=t[5],f=t[6],g=t[7],b=t[8],E=t[9],I=t[10],M=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*n+b*r,e[5]=u*n+E*r,e[6]=f*n+I*r,e[7]=g*n+M*r,e[8]=b*n-o*r,e[9]=E*n-u*r,e[10]=I*n-f*r,e[11]=M*n-g*r,e}function WEe(e,t,i){const r=Math.sin(i),n=Math.cos(i),o=t[0],u=t[1],f=t[2],g=t[3],b=t[8],E=t[9],I=t[10],M=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n-b*r,e[1]=u*n-E*r,e[2]=f*n-I*r,e[3]=g*n-M*r,e[8]=o*r+b*n,e[9]=u*r+E*n,e[10]=f*r+I*n,e[11]=g*r+M*n,e}function ZEe(e,t,i){const r=Math.sin(i),n=Math.cos(i),o=t[0],u=t[1],f=t[2],g=t[3],b=t[4],E=t[5],I=t[6],M=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n+b*r,e[1]=u*n+E*r,e[2]=f*n+I*r,e[3]=g*n+M*r,e[4]=b*n-o*r,e[5]=E*n-u*r,e[6]=I*n-f*r,e[7]=M*n-g*r,e}function JEe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function KEe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function yse(e,t,i){if(t===0)return dT(e);let r=i[0],n=i[1],o=i[2],u=Math.sqrt(r*r+n*n+o*o);if(u<=Vr())return null;u=1/u,r*=u,n*=u,o*=u;const f=Math.sin(t),g=Math.cos(t),b=1-g;return e[0]=r*r*b+g,e[1]=n*r*b+o*f,e[2]=o*r*b-n*f,e[3]=0,e[4]=r*n*b-o*f,e[5]=n*n*b+g,e[6]=o*n*b+r*f,e[7]=0,e[8]=r*o*b+n*f,e[9]=n*o*b-r*f,e[10]=o*o*b+g,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function YEe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function XEe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function QEe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function mse(e,t,i){const r=t[0],n=t[1],o=t[2],u=t[3],f=r+r,g=n+n,b=o+o,E=r*f,I=r*g,M=r*b,k=n*g,L=n*b,P=o*b,D=u*f,j=u*g,z=u*b;return e[0]=1-(k+P),e[1]=I+z,e[2]=M-j,e[3]=0,e[4]=I-z,e[5]=1-(E+P),e[6]=L+D,e[7]=0,e[8]=M+j,e[9]=L-D,e[10]=1-(E+k),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function eIe(e,t){const i=tIe,r=-t[0],n=-t[1],o=-t[2],u=t[3],f=t[4],g=t[5],b=t[6],E=t[7],I=r*r+n*n+o*o+u*u;return I>0?(i[0]=2*(f*u+E*r+g*o-b*n)/I,i[1]=2*(g*u+E*n+b*r-f*o)/I,i[2]=2*(b*u+E*o+f*n-g*r)/I):(i[0]=2*(f*u+E*r+g*o-b*n),i[1]=2*(g*u+E*n+b*r-f*o),i[2]=2*(b*u+E*o+f*n-g*r)),mse(e,t,i),e}const tIe=nt();function iIe(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function rIe(e,t){const i=t[0],r=t[1],n=t[2],o=t[4],u=t[5],f=t[6],g=t[8],b=t[9],E=t[10];return e[0]=Math.sqrt(i*i+r*r+n*n),e[1]=Math.sqrt(o*o+u*u+f*f),e[2]=Math.sqrt(g*g+b*b+E*E),e}function nIe(e,t){const i=t[0]+t[5]+t[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function sIe(e,t,i,r){const n=t[0],o=t[1],u=t[2],f=t[3],g=n+n,b=o+o,E=u+u,I=n*g,M=n*b,k=n*E,L=o*b,P=o*E,D=u*E,j=f*g,z=f*b,V=f*E,W=r[0],Q=r[1],Z=r[2];return e[0]=(1-(L+D))*W,e[1]=(M+V)*W,e[2]=(k-z)*W,e[3]=0,e[4]=(M-V)*Q,e[5]=(1-(I+D))*Q,e[6]=(P+j)*Q,e[7]=0,e[8]=(k+z)*Z,e[9]=(P-j)*Z,e[10]=(1-(I+L))*Z,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function oIe(e,t,i,r,n){const o=t[0],u=t[1],f=t[2],g=t[3],b=o+o,E=u+u,I=f+f,M=o*b,k=o*E,L=o*I,P=u*E,D=u*I,j=f*I,z=g*b,V=g*E,W=g*I,Q=r[0],Z=r[1],ee=r[2],ie=n[0],oe=n[1],le=n[2],xe=(1-(P+j))*Q,$e=(k+W)*Q,Te=(L-V)*Q,de=(k-W)*Z,se=(1-(M+j))*Z,ye=(D+z)*Z,ue=(L+V)*ee,pe=(D-z)*ee,_e=(1-(M+P))*ee;return e[0]=xe,e[1]=$e,e[2]=Te,e[3]=0,e[4]=de,e[5]=se,e[6]=ye,e[7]=0,e[8]=ue,e[9]=pe,e[10]=_e,e[11]=0,e[12]=i[0]+ie-(xe*ie+de*oe+ue*le),e[13]=i[1]+oe-($e*ie+se*oe+pe*le),e[14]=i[2]+le-(Te*ie+ye*oe+_e*le),e[15]=1,e}function aIe(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],u=i+i,f=r+r,g=n+n,b=i*u,E=r*u,I=r*f,M=n*u,k=n*f,L=n*g,P=o*u,D=o*f,j=o*g;return e[0]=1-I-L,e[1]=E+j,e[2]=M-D,e[3]=0,e[4]=E-j,e[5]=1-b-L,e[6]=k+P,e[7]=0,e[8]=M+D,e[9]=k-P,e[10]=1-b-I,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function lIe(e,t,i,r,n,o,u){const f=1/(i-t),g=1/(n-r),b=1/(o-u);return e[0]=2*o*f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*g,e[6]=0,e[7]=0,e[8]=(i+t)*f,e[9]=(n+r)*g,e[10]=(u+o)*b,e[11]=-1,e[12]=0,e[13]=0,e[14]=u*o*2*b,e[15]=0,e}function uIe(e,t,i,r,n){const o=1/Math.tan(t/2);let u;return e[0]=o/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(u=1/(r-n),e[10]=(n+r)*u,e[14]=2*n*r*u):(e[10]=-1,e[14]=-2*r),e}function cIe(e,t,i,r){const n=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),u=Math.tan(t.leftDegrees*Math.PI/180),f=Math.tan(t.rightDegrees*Math.PI/180),g=2/(u+f),b=2/(n+o);return e[0]=g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=b,e[6]=0,e[7]=0,e[8]=-(u-f)*g*.5,e[9]=(n-o)*b*.5,e[10]=r/(i-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*i/(i-r),e[15]=0,e}function hIe(e,t,i,r,n,o,u){const f=1/(t-i),g=1/(r-n),b=1/(o-u);return e[0]=-2*f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*g,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*b,e[11]=0,e[12]=(t+i)*f,e[13]=(n+r)*g,e[14]=(u+o)*b,e[15]=1,e}function dIe(e,t,i,r){const n=t[0],o=t[1],u=t[2];let f=n-i[0],g=o-i[1],b=u-i[2];const E=Vr();if(Math.abs(f)<E&&Math.abs(g)<E&&Math.abs(b)<E)return void dT(e);let I=1/Math.sqrt(f*f+g*g+b*b);f*=I,g*=I,b*=I;const M=r[0],k=r[1],L=r[2];let P=k*b-L*g,D=L*f-M*b,j=M*g-k*f;I=Math.sqrt(P*P+D*D+j*j),I?(I=1/I,P*=I,D*=I,j*=I):(P=0,D=0,j=0);let z=g*j-b*D,V=b*P-f*j,W=f*D-g*P;I=Math.sqrt(z*z+V*V+W*W),I?(I=1/I,z*=I,V*=I,W*=I):(z=0,V=0,W=0),e[0]=P,e[1]=z,e[2]=f,e[3]=0,e[4]=D,e[5]=V,e[6]=g,e[7]=0,e[8]=j,e[9]=W,e[10]=b,e[11]=0,e[12]=-(P*n+D*o+j*u),e[13]=-(z*n+V*o+W*u),e[14]=-(f*n+g*o+b*u),e[15]=1}function pIe(e,t,i,r){const n=t[0],o=t[1],u=t[2],f=r[0],g=r[1],b=r[2];let E=n-i[0],I=o-i[1],M=u-i[2],k=E*E+I*I+M*M;k>0&&(k=1/Math.sqrt(k),E*=k,I*=k,M*=k);let L=g*M-b*I,P=b*E-f*M,D=f*I-g*E;return k=L*L+P*P+D*D,k>0&&(k=1/Math.sqrt(k),L*=k,P*=k,D*=k),e[0]=L,e[1]=P,e[2]=D,e[3]=0,e[4]=I*D-M*P,e[5]=M*L-E*D,e[6]=E*P-I*L,e[7]=0,e[8]=E,e[9]=I,e[10]=M,e[11]=0,e[12]=n,e[13]=o,e[14]=u,e[15]=1,e}function fIe(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function yIe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function mIe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function gse(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function gIe(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function vIe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e[9]=t[9]+i[9]*r,e[10]=t[10]+i[10]*r,e[11]=t[11]+i[11]*r,e[12]=t[12]+i[12]*r,e[13]=t[13]+i[13]*r,e[14]=t[14]+i[14]*r,e[15]=t[15]+i[15]*r,e}function wIe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function bIe(e,t){if(e===t)return!0;const i=e[0],r=e[1],n=e[2],o=e[3],u=e[4],f=e[5],g=e[6],b=e[7],E=e[8],I=e[9],M=e[10],k=e[11],L=e[12],P=e[13],D=e[14],j=e[15],z=t[0],V=t[1],W=t[2],Q=t[3],Z=t[4],ee=t[5],ie=t[6],oe=t[7],le=t[8],xe=t[9],$e=t[10],Te=t[11],de=t[12],se=t[13],ye=t[14],ue=t[15],pe=Vr();return Math.abs(i-z)<=pe*Math.max(1,Math.abs(i),Math.abs(z))&&Math.abs(r-V)<=pe*Math.max(1,Math.abs(r),Math.abs(V))&&Math.abs(n-W)<=pe*Math.max(1,Math.abs(n),Math.abs(W))&&Math.abs(o-Q)<=pe*Math.max(1,Math.abs(o),Math.abs(Q))&&Math.abs(u-Z)<=pe*Math.max(1,Math.abs(u),Math.abs(Z))&&Math.abs(f-ee)<=pe*Math.max(1,Math.abs(f),Math.abs(ee))&&Math.abs(g-ie)<=pe*Math.max(1,Math.abs(g),Math.abs(ie))&&Math.abs(b-oe)<=pe*Math.max(1,Math.abs(b),Math.abs(oe))&&Math.abs(E-le)<=pe*Math.max(1,Math.abs(E),Math.abs(le))&&Math.abs(I-xe)<=pe*Math.max(1,Math.abs(I),Math.abs(xe))&&Math.abs(M-$e)<=pe*Math.max(1,Math.abs(M),Math.abs($e))&&Math.abs(k-Te)<=pe*Math.max(1,Math.abs(k),Math.abs(Te))&&Math.abs(L-de)<=pe*Math.max(1,Math.abs(L),Math.abs(de))&&Math.abs(P-se)<=pe*Math.max(1,Math.abs(P),Math.abs(se))&&Math.abs(D-ye)<=pe*Math.max(1,Math.abs(D),Math.abs(ye))&&Math.abs(j-ue)<=pe*Math.max(1,Math.abs(j),Math.abs(ue))}function _Ie(e){const t=Vr(),i=e[0],r=e[1],n=e[2],o=e[4],u=e[5],f=e[6],g=e[8],b=e[9],E=e[10];return Math.abs(1-(i*i+o*o+g*g))<=t&&Math.abs(1-(r*r+u*u+b*b))<=t&&Math.abs(1-(n*n+f*f+E*E))<=t}function SIe(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const xIe=fse,EIe=gse;Object.freeze(Object.defineProperty({__proto__:null,add:mIe,adjoint:VEe,copy:dse,determinant:UEe,equals:bIe,exactEquals:wIe,frob:yIe,fromQuat:aIe,fromQuat2:eIe,fromRotation:yse,fromRotationTranslation:mse,fromRotationTranslationScale:sIe,fromRotationTranslationScaleOrigin:oIe,fromScaling:KEe,fromTranslation:JEe,fromXRotation:YEe,fromYRotation:XEe,fromZRotation:QEe,frustum:lIe,getRotation:nIe,getScaling:rIe,getTranslation:iIe,hasIdentityRotation:SIe,identity:dT,invert:pse,invertOrIdentity:zEe,isOrthoNormal:_Ie,lookAt:dIe,mul:xIe,multiply:fse,multiplyScalar:gIe,multiplyScalarAndAdd:vIe,ortho:hIe,perspective:uIe,perspectiveFromFieldOfView:cIe,rotate:qEe,rotateX:HEe,rotateY:WEe,rotateZ:ZEe,scale:BEe,set:Mf,str:fIe,sub:EIe,subtract:gse,targetTo:pIe,translate:GEe,transpose:Cf},Symbol.toStringTag,{value:"Module"}));const IIe=(e,t)=>{const i=Mf(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return Cf(i,i)},TIe=(e,t)=>{const i=Mf(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return Cf(i,i)},$Ie=(e,t)=>{const i=1-t,r=Mf(e,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Cf(r,r)},MIe=(e,t)=>{const i=Math.sin(t*Math.PI/180),r=Math.cos(t*Math.PI/180),n=Mf(e,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return Cf(n,n)},CIe=(e,t)=>{const i=1-2*t,r=Mf(e,i,0,0,t,0,i,0,t,0,0,i,t,0,0,0,1);return Cf(r,r)},AIe=(e,t)=>{const i=Mf(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return Cf(i,i)},kIe=(e,t)=>{const i=1-t,r=Mf(e,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Cf(r,r)};let vse=class wse{constructor(t,i,r){this.strength=t,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(t,i,r){this.strength=Io(t.strength,i.strength,r),this.radius=Io(t.radius,i.radius,r),this.threshold=Io(t.threshold,i.threshold,r)}clone(){return new wse(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:x3(this.radius),strength:this.strength,threshold:this.threshold}}},bse=class _se{constructor(t){this.radius=t,this.type="blur"}interpolate(t,i,r){this.radius=Math.round(Io(t.radius,i.radius,r))}clone(){return new _se(this.radius)}toJSON(){return{type:"blur",radius:x3(this.radius)}}},A8=class Sse{constructor(t,i){this.type=t,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.amount=Io(t.amount,i.amount,r),this._updateMatrix()}clone(){return new Sse(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||cT();switch(this.type){case"brightness":this._colorMatrix=IIe(t,this.amount);break;case"contrast":this._colorMatrix=TIe(t,this.amount);break;case"grayscale":this._colorMatrix=$Ie(t,this.amount);break;case"invert":this._colorMatrix=CIe(t,this.amount);break;case"saturate":this._colorMatrix=AIe(t,this.amount);break;case"sepia":this._colorMatrix=kIe(t,this.amount)}}},xse=class Ese{constructor(t,i,r,n){this.offsetX=t,this.offsetY=i,this.blurRadius=r,this.color=n,this.type="drop-shadow"}interpolate(t,i,r){this.offsetX=Io(t.offsetX,i.offsetX,r),this.offsetY=Io(t.offsetY,i.offsetY,r),this.blurRadius=Io(t.blurRadius,i.blurRadius,r),this.color[0]=Math.round(Io(t.color[0],i.color[0],r)),this.color[1]=Math.round(Io(t.color[1],i.color[1],r)),this.color[2]=Math.round(Io(t.color[2],i.color[2],r)),this.color[3]=Io(t.color[3],i.color[3],r)}clone(){return new Ese(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:x3(this.offsetX),yoffset:x3(this.offsetY),blurRadius:x3(this.blurRadius),color:t}}},Ise=class Tse{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.angle=Io(t.angle,i.angle,r),this._updateMatrix()}clone(){return new Tse(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||cT();this._colorMatrix=MIe(t,this.angle)}},$se=class Mse{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,i,r){this.amount=Io(t.amount,i.amount,r)}clone(){return new Mse(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Io(e,t,i){return e+(t-e)*i}function x3(e){return Math.round(1e3*Uo(e))/1e3}function LIe(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new A8(e.type,0);case"saturate":case"brightness":case"contrast":return new A8(e.type,1);case"opacity":return new $se(1);case"hue-rotate":return new Ise(0);case"blur":return new bse(0);case"drop-shadow":return new xse(0,0,0,[...fF("transparent")]);case"bloom":return new vse(0,0,1)}}function Cse(e,t){const i=e.length>t.length?e:t;return(e.length>t.length?t:e).every((r,n)=>r.type===i[n].type)}function Ase(e,t){const i=e.length>t.length?e:t,r=e.length>t.length?t:e;for(let n=r.length;n<i.length;n++)r.push(LIe(i[n]))}function OIe(e){const t=e[0];return!!t&&"type"in t}function RIe(e,t){return JSON.stringify(e??null)===JSON.stringify(t??null)}const TM=()=>Se.getLogger("esri.support.basemapUtils");function PIe(){return{}}function kse(e){for(const t in e){const i=e[t];Jt(i),delete e[t]}}function R9(e,t){let i;if(typeof e=="string"){const r=e in Uv,n=!r&&e.includes("/");if(!r&&!n){if(Kt.apiKey)TM().warn(`Unable to find basemap definition for: ${e}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const o=Object.entries(Uv).filter(([u,f])=>f.classic||f.is3d).map(([u])=>`"${u}"`).sort().join(", ");TM().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${o}`)}return null}t&&(i=t[e]),i||(i=r?hv.fromId(e):new hv({style:{id:e}}),t&&(t[e]=i))}else i=ir(hv,e);return i!=null&&i.destroyed&&(TM().warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function lnt(e,t){var i,r,n,o;return((r=(i=e.basemap)==null?void 0:i.referenceLayers)==null?void 0:r.some(u=>u.uid===t))||((o=(n=e.basemap)==null?void 0:n.baseLayers)==null?void 0:o.some(u=>u.uid===t))}function NIe(e){let t=null;const i=zIe(e),r=!(i!=null&&i.baseLayers.length);for(const n in Uv){const o=GIe(i,Lse(Uv[n]),{mustMatchReferences:r});if(o==="equal"){t=n;break}o==="base-layers-equal"&&(t=n)}return t}function unt(e){return!!(e!=null&&e.baseLayers.concat(e.referenceLayers).some(FIe))}function FIe(e){if(QG(e.url))return!0;if(e.type==="vector-tile")for(const t in e.sourceNameToSource){const i=e.sourceNameToSource[t];if(QG(i==null?void 0:i.sourceUrl))return!0}return!1}function DIe(e,t){var o;if(t==null||e==null)return{spatialReference:null,updating:!1};if(t.loadStatus==="not-loaded")return t.load(),{spatialReference:null,updating:!0};if(t.spatialReference)return{spatialReference:t.spatialReference,updating:!1};if(t.baseLayers.length===0)return{spatialReference:null,updating:!1};const i=t.baseLayers.at(0);switch(i.loadStatus){case"not-loaded":i.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const r=(("supportedSpatialReferences"in i?i.supportedSpatialReferences:null)||["tileInfo"in i?(o=i.tileInfo)==null?void 0:o.spatialReference:i.spatialReference]).filter(Boolean),n=e.spatialReference;return n?{spatialReference:r.find(u=>n.equals(u))??r[0]??null,updating:!1}:{spatialReference:r[0],updating:!1}}const jIe=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function QG(e){if(!e)return!1;const t=new tf(Co(e));return!!t.authority&&jIe.test(t.authority)}function zIe(e){return e?!e.loaded&&e.resourceInfo?Lse(e.resourceInfo.data):{baseLayers:eB(e.baseLayers),referenceLayers:eB(e.referenceLayers)}:null}function eB(e){return(Oe.isCollection(e)?e.toArray():e).map(VIe)}function VIe(e){var t,i;return{type:e.type,effect:"effect"in e?e.effect:void 0,url:Ose("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl||""),minScale:"minScale"in e&&e.minScale!=null?e.minScale:0,maxScale:"maxScale"in e&&e.maxScale!=null?e.maxScale:0,opacity:e.opacity!=null?e.opacity:1,visible:e.visible==null||!!e.visible,sublayers:e.type!=="map-image"&&e.type!=="wms"||e.sublayers==null||(t=e.sublayers)==null?void 0:t.map(r=>({id:r.id,visible:r.visible})),activeLayerId:e.type==="wmts"?(i=e.activeLayer)==null?void 0:i.id:void 0}}function tB(e){return e.isReference||e.layerType==="ArcGISSceneServiceLayer"}function Lse(e){return e?{baseLayers:iB((e.baseMapLayers??[]).filter(t=>!tB(t))),referenceLayers:iB((e.baseMapLayers??[]).filter(t=>tB(t)))}:null}function iB(e){return e.map(t=>UIe(t))}function UIe(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;case"ArcGISSceneServiceLayer":t="scene";break;default:t="unknown"}return{type:t,effect:e.effect,url:Ose(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:e.minScale??0,maxScale:e.maxScale??0,opacity:e.opacity??1,visible:e.visibility==null||!!e.visibility,sublayers:void 0,activeLayerId:void 0}}function GIe(e,t,i){return e!=null!=(t!=null)?"not-equal":!e||!t?"equal":rB(e.baseLayers,t.baseLayers)?rB(e.referenceLayers,t.referenceLayers)?"equal":i.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal"}function rB(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!BIe(e[i],t[i]))return!1;return!0}function BIe(e,t){if(e.type!==t.type||e.url!==t.url||e.minScale!==t.minScale||e.maxScale!==t.maxScale||e.visible!==t.visible||e.opacity!==t.opacity||!RIe(e.effect,t.effect))return!1;if(e.activeLayerId!=null||t.activeLayerId!=null)return e.activeLayerId===t.activeLayerId;if(e.sublayers!=null||t.sublayers!=null){if(e.sublayers==null||t.sublayers==null||e.sublayers.length!==t.sublayers.length)return!1;for(let i=0;i<e.sublayers.length;i++){const r=e.sublayers.at(i),n=t.sublayers.at(i);if((r==null?void 0:r.id)!==(n==null?void 0:n.id)||(r==null?void 0:r.visible)!==(n==null?void 0:n.visible))return!1}}return!0}function Ose(e){return e?sl(e).replace(/^\s*https?:/i,"").toLowerCase():""}function Rse(e){if(!e)return null;const{thumbnailUrl:t}=e;if(t)return t;const i=NIe(e);return i?Uv[i].thumbnailUrl:c_(e.baseLayers,qIe)}function qIe(e){var t;return"portalItem"in e?(t=e.portalItem)==null?void 0:t.thumbnailUrl:void 0}function HIe(e){return new y_({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const i=[];return"tables"in t&&i.push(t.tables),"layers"in t&&i.push(t.layers),i},itemFilterFunction:t=>{const i=t.parent;return!!i&&"tables"in i&&i.tables.includes(t)}})}function $M(e){for(const t of e.values())t==null||t.destroy();e.clear()}const nB={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function WIe(e){let t=null;if(typeof e=="string")if(e in nB){const i=nB[e];t=new gI({resourceInfo:{data:{layers:[i]}}})}else Se.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=ir(gI,e);return t}let Pse=0;const Eu=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+Pse++})}};return t=m([H("esri.core.Identifiable")],t),t},vF=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Pse++})}};return t=m([H("esri.core.Identifiable.NumericIdentifiable")],t),t};let sB=class extends Eu(class{}){};sB=m([H("esri.core.Identifiable")],sB);async function ZIe(e){var r;const t="portalItem"in e?e:{portalItem:e},{fromItem:i}=await ce(async()=>{const{fromItem:n}=await import("./portalLayers-B1JsFSpE.js").then(o=>o.p);return{fromItem:n}},__vite__mapDeps([129,130,131]),import.meta.url);try{return await i(t)}catch(n){const o=t==null?void 0:t.portalItem,u=(o==null?void 0:o.id)||"unset",f=((r=o==null?void 0:o.portal)==null?void 0:r.url)||Kt.portalUrl;throw Se.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+f+"', id: '"+u+"')",n),n}}const k8={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function MM(e,t,i,r=ba){const n=new Vo(tF(r)),o=Ze.fromJSDate(e,{zone:n}),u=i==="decades"||i==="centuries"?"year":Fse(i);return i==="decades"&&(t*=10),i==="centuries"&&(t*=100),o.plus({[u]:t}).toJSDate()}function hnt(e,t,i="milliseconds"){const r=e.getTime(),n=Nse(t,i,"milliseconds");return new Date(r+n)}function oB(e,t,i=ba){const r=new Vo(tF(i)),n=Ze.fromJSDate(e,{zone:r});if(t==="decades"||t==="centuries"){const u=n.startOf("year"),{year:f}=u,g=f-f%(t==="decades"?10:100);return u.set({year:g}).toJSDate()}const o=Fse(t);return n.startOf(o).toJSDate()}function Nse(e,t,i){return e===0?0:e*k8[t]/k8[i]}function JIe(e,t){return e&&t?e.intersection(t):e||t}function Fse(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Oa;let sa=Oa=class extends be{static get allTime(){return aB}static get empty(){return KIe}static fromArray(e){return new Oa({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(Oa.allTime)}get isEmpty(){return this.equals(Oa.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=(e==null?void 0:e.getTime())??null}clone(){return new Oa({end:this.end,start:this.start})}equals(e){var o,u,f,g;if(!e)return!1;const t=((o=this.start)==null?void 0:o.getTime())??this.start,i=((u=this.end)==null?void 0:u.getTime())??this.end,r=((f=e.start)==null?void 0:f.getTime())??e.start,n=((g=e.end)==null?void 0:g.getTime())??e.end;return t===r&&i===n}expandTo(e,t=ba){if(this.isEmpty||this.isAllTime)return this.clone();let i=this.start;i&&(i=oB(i,e,t));let r=this.end;if(r){const n=oB(r,e,t);r=r.getTime()===n.getTime()?n:MM(n,1,e,t)}return new Oa({start:i,end:r})}intersection(e){var f,g,b,E;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Oa.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=((f=this.start)==null?void 0:f.getTime())??-1/0,i=((g=this.end)==null?void 0:g.getTime())??1/0,r=((b=e.start)==null?void 0:b.getTime())??-1/0,n=((E=e.end)==null?void 0:E.getTime())??1/0;let o,u;return r>=t&&r<=i?o=r:t>=r&&t<=n&&(o=t),i>=r&&i<=n?u=i:n>=t&&n<=i&&(u=n),o==null||u==null||isNaN(o)||isNaN(u)?Oa.empty:new Oa({start:o===-1/0?null:new Date(o),end:u===1/0?null:new Date(u)})}offset(e,t,i=ba){if(this.isEmpty||this.isAllTime)return this.clone();const r=new Oa,{start:n,end:o}=this;return n!=null&&(r.start=MM(n,e,t,i)),o!=null&&(r.end=MM(o,e,t,i)),r}toArray(){var e,t;return this.isEmpty?[void 0,void 0]:[((e=this.start)==null?void 0:e.getTime())??null,((t=this.end)==null?void 0:t.getTime())??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return aB.clone();const t=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Oa({start:t,end:i})}};m([w({type:Date,json:{write:{allowNull:!0}}})],sa.prototype,"end",void 0),m([ke("end")],sa.prototype,"readEnd",null),m([Pe("end")],sa.prototype,"writeEnd",null),m([w({readOnly:!0,json:{read:!1}})],sa.prototype,"isAllTime",null),m([w({readOnly:!0,json:{read:!1}})],sa.prototype,"isEmpty",null),m([w({type:Date,json:{write:{allowNull:!0}}})],sa.prototype,"start",void 0),m([ke("start")],sa.prototype,"readStart",null),m([Pe("start")],sa.prototype,"writeStart",null),sa=Oa=m([H("esri.time.TimeExtent")],sa);const wn=sa,aB=new sa,KIe=new sa({start:void 0,end:void 0});let YIe=0,Ir=class extends Us.EventedMixin(Eu(pl)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Ht(-180,-90,180,90,st.WGS84),this.id=Date.now().toString(16)+"-layer-"+YIe++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=st.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(t){const i=typeof t=="string"?{url:t}:t;return(await ce(async()=>{const{fromUrl:r}=await import("./arcgisLayers-C3-9jXCT.js");return{fromUrl:r}},__vite__mapDeps([132,130,131]),import.meta.url)).fromUrl(i)}static fromPortalItem(t){return ZIe(t)}initialize(){this.when().catch(t=>{Or(t)||Se.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){const t=this.parent;if(t){const i=this;"layers"in t&&t.layers.includes(i)?t.layers.remove(i):"tables"in t&&t.tables.includes(i)?t.tables.remove(i):"baseLayers"in t&&t.baseLayers.includes(i)?t.baseLayers.remove(i):"referenceLayers"in t&&t.referenceLayers.includes(i)&&t.referenceLayers.remove(i),this._set("parent",null)}}get effectiveVisible(){let t=this.visible;const i=this.parent;return t&&i&&"effectiveVisible"in i&&t&&(t=i.effectiveVisible),t}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return _r(this.url)}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await Ct(t,{query:{f:"json"},responseType:"json"})).data;throw new ne("layer:no-attribution-data","Layer does not have attribution data")}};m([w({type:String})],Ir.prototype,"attributionDataUrl",void 0),m([w({readOnly:!0})],Ir.prototype,"effectiveVisible",null),m([w({type:Ht})],Ir.prototype,"fullExtent",void 0),m([w({readOnly:!0})],Ir.prototype,"hasAttributionData",null),m([w({type:String,clonable:!1})],Ir.prototype,"id",void 0),m([w({type:Boolean,nonNullable:!0})],Ir.prototype,"legendEnabled",void 0),m([w({type:["show","hide","hide-children"]})],Ir.prototype,"listMode",void 0),m([w({type:Number,range:{min:0,max:1},nonNullable:!0})],Ir.prototype,"opacity",void 0),m([w({clonable:!1})],Ir.prototype,"parent",void 0),m([w({readOnly:!0})],Ir.prototype,"parsedUrl",null),m([w({type:Boolean,readOnly:!0})],Ir.prototype,"persistenceEnabled",void 0),m([w({type:Boolean})],Ir.prototype,"popupEnabled",void 0),m([w({type:Boolean})],Ir.prototype,"attributionVisible",void 0),m([w({type:st})],Ir.prototype,"spatialReference",void 0),m([w({type:String})],Ir.prototype,"title",void 0),m([w({readOnly:!0,json:{read:!1}})],Ir.prototype,"type",void 0),m([w()],Ir.prototype,"url",void 0),m([w({type:wn})],Ir.prototype,"visibilityTimeExtent",void 0),m([w({type:Boolean,nonNullable:!0})],Ir.prototype,"visible",void 0),Ir=m([H("esri.layers.Layer")],Ir);const S_=Ir;function L8(e,t,i){let r,n;if(e)for(let o=0,u=e.length;o<u;o++){if(r=e.at(o),(r==null?void 0:r[t])===i)return r;if((r==null?void 0:r.type)==="group"&&(n=L8(r.layers,t,i),n))return n}}const XIe=e=>{let t=class extends e{constructor(...i){super(...i),this.layers=new Oe;const r=u=>{u.parent&&"remove"in u.parent&&u.parent.remove(u)},n=u=>{u.parent=this,this.layerAdded(u),u.type!=="elevation"&&u.type!=="base-elevation"||Se.getLogger(this).error(`Layer 'title:${u.title}, id:${u.id}' of type '${u.type}' is not supported as an operational layer and will therefore be ignored.`)},o=u=>{u.parent=null,this.layerRemoved(u)};this.addHandles([this.layers.on("before-add",u=>{if(u.item===this)return u.preventDefault(),void Se.getLogger(this).error("#add()","Cannot add layer to itself.");r(u.item)}),this.layers.on("after-add",u=>n(u.item)),this.layers.on("after-remove",u=>o(u.item))])}destroy(){const i=this.layers.toArray();for(const r of i)r.destroy();this.layers.destroy()}set layers(i){this._set("layers",yf(i,this._get("layers")))}add(i,r){const n=this.layers;if(r=n.getNextIndex(r),i instanceof S_){const o=i;o.parent===this?this.reorder(o,r):n.add(o,r)}else Fc(i)?i.then(o=>{this.destroyed||this.add(o,r)}):Se.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const n=this.layers;let o=n.getNextIndex(r);i.slice().forEach(u=>{u.parent!==this?(n.add(u,o),o+=1):this.reorder(u,o)})}findLayerById(i){return L8(this.layers,"id",i)}findLayerByUid(i){return L8(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return m([w()],t.prototype,"layers",null),t=m([H("esri.support.LayersMixin")],t),t};function O8(e,t,i){if(e)for(let r=0,n=e.length;r<n;r++){const o=e.at(r);if(o[t]===i)return o;if((o==null?void 0:o.type)==="group"){const u=O8(o.tables,t,i);if(u)return u}}}const QIe=e=>{let t=class extends e{constructor(...i){super(...i),this.tables=new Oe,this.addHandles([this.tables.on("after-add",r=>{const n=r.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,n.type!=="feature"&&Se.getLogger(this).error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})])}destroy(){const i=this.tables.toArray();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",yf(i,this._get("tables")))}findTableById(i){return O8(this.tables,"id",i)}findTableByUid(i){return O8(this.tables,"uid",i)}};return m([w()],t.prototype,"tables",null),t=m([H("esri.support.TablesMixin")],t),t};let Cl=class extends QIe(XIe(Us.EventedMixin(De))){constructor(t){super(t),this.allLayers=new y_({getCollections:()=>{var i,r,n;return[(i=this.basemap)==null?void 0:i.baseLayers,(r=this.ground)==null?void 0:r.layers,this.layers,(n=this.basemap)==null?void 0:n.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=HIe(this),this.basemap=null,this.editableLayers=new y_({getCollections:()=>[this.allLayers],itemFilterFunction:$Ee}),this.ground=new gI,this._basemapCache=PIe()}destroy(){kse(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=Jt(this.basemap),Jt(this.ground),this._set("ground",null)}castBasemap(t){return R9(t,this._basemapCache)}castGround(t){return WIe(t)??this._get("ground")}findLayerById(t){return this.allLayers.find(i=>i.id===t)}findTableById(t){return this.allTables.find(i=>i.id===t)}};m([w({readOnly:!0,dependsOn:[]})],Cl.prototype,"allLayers",void 0),m([w({readOnly:!0})],Cl.prototype,"allTables",void 0),m([w({type:hv,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Cl.prototype,"basemap",void 0),m([St("basemap")],Cl.prototype,"castBasemap",null),m([w({readOnly:!0})],Cl.prototype,"editableLayers",void 0),m([w({type:gI,nonNullable:!0})],Cl.prototype,"ground",void 0),m([St("ground")],Cl.prototype,"castGround",null),m([w()],Cl.prototype,"undoRedo",void 0),Cl=m([H("esri.Map")],Cl);const Dse=Cl;let E3=class extends Oe{constructor(t){super(t),this.addHandles([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}_ownAll(){for(const t of this.items)this._own(t)}_releaseAll(){for(const t of this.items)this._release(t)}_createNewInstance(t){return this.itemType?new(Oe.ofType(this.itemType.Type))(t):new Oe(t)}};function R8(e,t){return{type:e,cast:ise,set(i){const r=yf(i,this._get(t),e);r.owner=this,this._set(t,r)}}}m([w()],E3.prototype,"owner",null),E3=m([H("esri.core.support.OwningCollection")],E3);var Qw;const vI=_n()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),jse=vI.jsonValues.slice();wve(jse,"orthometric");const I3=_n()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Al=Qw=class extends be{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,i){return vI.write(e,t,i)}readHeightModel(e,t,i){return vI.read(e)||(i!=null&&i.messages&&i.messages.push(e6e(e,{context:i})),null)}readHeightUnit(e,t,i){return I3.read(e)||(i!=null&&i.messages&&i.messages.push(lB(e,{context:i})),null)}readHeightUnitService(e,t,i){return oie(e)||I3.read(e)||(i!=null&&i.messages&&i.messages.push(lB(e,{context:i})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new Qw({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const i=aie(t);return new Qw({heightModel:e.heightModel,heightUnit:i??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new Qw;return t.read(e,{origin:"web-scene"}),t}};function lB(e,t){return new ga("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function e6e(e,t){return new ga("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}m([w({type:vI.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:jse,default:"ellipsoidal"}}}})],Al.prototype,"heightModel",void 0),m([Pe("web-scene","heightModel")],Al.prototype,"writeHeightModel",null),m([ke(["web-scene","service"],"heightModel")],Al.prototype,"readHeightModel",null),m([w({type:I3.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:I3.jsonValues,write:I3.write}}}})],Al.prototype,"heightUnit",void 0),m([ke("web-scene","heightUnit")],Al.prototype,"readHeightUnit",null),m([ke("service","heightUnit")],Al.prototype,"readHeightUnitService",null),m([w({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Al.prototype,"vertCRS",void 0),m([ke("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Al.prototype,"readVertCRS",null),Al=Qw=m([H("esri.geometry.HeightModelInfo")],Al);const _S=Al;let wI=class extends E3{constructor(t){super(t),this.addHandles(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(Se.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};wI=m([H("esri.support.AnalysesCollection")],wI);async function wF(e,t){const{WhereClause:i}=await ce(()=>import("./WhereClause-DvvXrPqq.js").then(r=>r.W),[],import.meta.url);return i.create(e,{fieldsIndex:t})}function bF(e,t){return e==="1=1"?t??e:t==="1=1"?e??t:e!=null&&e!==""?t!=null&&t!==""?`(${e}) AND (${t})`:e:t}function _F(e){return typeof e=="string"||e instanceof String}var dv;(function(e){e.HM="HH:mm",e.HMS="HH:mm:ss",e.HMS_MS="HH:mm:ss.SSS"})(dv||(dv={}));const t6e=[dv.HMS_MS,dv.HMS,dv.HM,"TT"],i6e="yyyy-MM-dd";dv.HMS;function uB(e){if(!e||!_F(e))return null;const t=Ze.fromFormat(e,i6e);return t.isValid?t:null}function cB(e){return e&&_F(e)?c_(t6e,t=>{const i=Ze.fromFormat(e,t);return i.isValid?i:null})??null:null}function hB(e){if(!e||!_F(e))return null;const t=Ze.fromISO(e);return t.isValid?t:null}var Gv;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(Gv||(Gv={}));const r6e=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function n6e(e){return e!=null&&r6e.has(e.type)}function zse(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function Vse(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function Use(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function s6e(e,t,i){const r=e==null?void 0:e.domain;if(!r)return null;switch(r.type){case"range":{const{min:n,max:o}=o6e(e);if(n!=null&&+t<n||o!=null&&+t>o)return Gv.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(r.codedValues==null||r.codedValues.every(n=>n==null||n.code!==t))return Gv.INVALID_CODED_VALUE}return null}function o6e(e,t){const i=e==null?void 0:e.domain;if(!i||i.type!=="range")return;const r="range"in i?i.range[0]:i.minValue,n="range"in i?i.range[1]:i.maxValue,o=n6e(e);return zse(e)||Use(e)||Vse(e)?{...a6e(e,n,r),isInteger:o}:{min:r!=null&&typeof r=="number"?r:null,max:n!=null&&typeof n=="number"?n:null,rawMin:r,rawMax:n,isInteger:o}}function a6e(e,t,i){var r,n,o,u,f,g;return zse(e)?{min:(r=uB(i))==null?void 0:r.toMillis(),max:(n=uB(t))==null?void 0:n.toMillis(),rawMin:i,rawMax:t}:Use(e)?{min:(o=cB(i))==null?void 0:o.toMillis(),max:(u=cB(t))==null?void 0:u.toMillis(),rawMin:i,rawMax:t}:Vse(e)?{min:(f=hB(i))==null?void 0:f.toMillis(),max:(g=hB(t))==null?void 0:g.toMillis(),rawMin:i,rawMax:t}:{max:null,min:null}}const l6e=()=>Se.getLogger("esri.support.arcadeOnDemand");let CM;function ad(){return CM||(CM=(async()=>{const e=await ce(()=>import("./arcadeUtils-nY7fQzuv.js").then(t=>t.i),__vite__mapDeps([133,134,135,21,10]),import.meta.url);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),CM}const u6e=(e,t,i)=>Gse.create(e,t,i,null,["$feature","$view"],[]),c6e=(e,t,i,r)=>Gse.create(e,t,i,r,["$feature","$view"],[]);let Gse=class Bse{constructor(t,i,r,n,o,u,f){this.services=null,this.script=t,this.evaluate=n;const g=Array.isArray(u)?u:u==null?void 0:u.fields;this.fields=g??[],this._syntaxTree=r,this._arcade=i,this._arcadeFeature=o,this._spatialReference=f,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,i,r,n,o,u){const{arcade:f,Feature:g,Dictionary:b}=await ad(),E=i instanceof st?i:st.fromJSON(i);let I;try{I=f.parseScript(t,u)}catch(ie){return l6e().error(new ne("arcade-bad-expression","Failed to parse arcade script",{script:t,error:ie})),null}const M=o.reduce((ie,oe)=>({...ie,[oe]:null}),{});let k=null;n!=null&&(k=new b(n),k.immutable=!0,M.$config=null);const L=f.scriptUsesGeometryEngine(I),P=L&&f.enableGeometrySupport(),D=f.scriptUsesFeatureSet(I)&&f.enableFeatureSetSupport(),j=f.scriptIsAsync(I),z=j&&f.enableAsyncSupport(),V={vars:M,spatialReference:E,useAsync:!!z};await Promise.all([P,D,z]);const W=new Set;await f.loadDependentModules(W,I,null,j,L);const Q=new b;Q.immutable=!1,Q.setField("scale",0);const Z=f.compileScript(I,V),ee=(ie,oe)=>{var xe;const le=(xe=ie.$view)==null?void 0:xe.timeZone;return"$view"in ie&&ie.$view&&(Q.setField("scale",typeof ie.$view=="object"&&"scale"in ie.$view?ie.$view.scale:void 0),ie.$view=Q),k&&(ie.$config=k),Z({vars:ie,spatialReference:E,services:oe,timeZone:le})};return new Bse(t,f,I,ee,new g,r,E)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const h6e=/^([0-9_])/,d6e=/[^a-z0-9_\u0080-\uffff]+/gi;function p6e(e){return e==null?null:e.trim().replaceAll(d6e,"_").replace(h6e,"F$1")||null}const f6e=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],y6e=["field","normalizationField"];function dB(e,t){if(e!=null&&t!=null){for(const i of Array.isArray(e)?e:[e])if(pB(f6e,i,t),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)pB(y6e,r,t)}}function pB(e,t,i){if(e)for(const r of e){const n=iS(r,t),o=n&&typeof n!="function"&&i.get(n);o&&vn(r,o.name,t)}}function qse(e,t){var i;if(e!=null&&((i=t==null?void 0:t.fields)!=null&&i.length))if("startField"in e){const r=t.get(e.startField),n=t.get(e.endField);e.startField=(r==null?void 0:r.name)??null,e.endField=(n==null?void 0:n.name)??null}else{const r=t.get(e.startTimeField),n=t.get(e.endTimeField);e.startTimeField=(r==null?void 0:r.name)??null,e.endTimeField=(n==null?void 0:n.name)??null}}const AM=new Set;function pT(e,t){return e&&t?(AM.clear(),tm(AM,e,t),Array.from(AM).sort()):[]}function tm(e,t,i){var r;if(i)if((r=t==null?void 0:t.fields)!=null&&r.length)if(i.includes("*"))for(const{name:n}of t.fields)e.add(n);else for(const n of i)so(e,t,n);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const n of i)n!=null&&e.add(n)}}function so(e,t,i){if(typeof i=="string")if(t){const r=t.get(i);r&&e.add(r.name)}else e.add(i)}function mnt(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map(i=>i.name):t}function gnt(e,t,i=1){if(!t||!e)return[];if(t.includes("*"))return["*"];const r=pT(e,t);return r.length/e.fields.length>=i?["*"]:r}async function Vs(e,t,i){var o;if(!i)return;const{arcadeUtils:r}=await ad(),n=r.extractFieldNames(i,(o=t==null?void 0:t.fields)==null?void 0:o.map(u=>u.name));for(const u of n)so(e,t,u)}async function Hse(e,t,i){if(i&&i!=="1=1"){const r=await wF(i,t);if(!r.isStandardized)throw new ne("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});tm(e,t,r.fieldNames)}}function m6e({displayField:e,fields:t}){return e||(t!=null&&t.length?kM(t,"name-or-title")||kM(t,"unique-identifier")||kM(t,"type-or-category")||g6e(t):null)}function g6e(e){for(const t of e){if(!(t!=null&&t.name))continue;const i=t.name.toLowerCase();if(i.includes("name")||i.includes("title"))return t.name}return null}function kM(e,t){for(const i of e)if(i!=null&&i.valueType&&i.valueType===t)return i.name;return null}async function vnt(e,t){var r;if(!t)return;const i=(r=t.elevationInfo)==null?void 0:r.featureExpressionInfo;return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}function v6e(e,t,i){i.onStatisticExpression?Vs(e,t,i.onStatisticExpression.expression):e.add(i.onStatisticField)}async function wnt(e,t,i){if(!t||!i||!("fields"in i))return;const r=[],n=i.popupTemplate;r.push(w6e(e,t,n)),i.fields&&r.push(...i.fields.map(async o=>v6e(e,t.fieldsIndex,o))),await Promise.all(r)}async function w6e(e,t,i){const r=[];i!=null&&i.expressionInfos&&r.push(...i.expressionInfos.map(o=>Vs(e,t.fieldsIndex,o.expression)));const n=i==null?void 0:i.content;if(Array.isArray(n))for(const o of n)o.type==="expression"&&o.expressionInfo&&r.push(Vs(e,t.fieldsIndex,o.expressionInfo.expression));await Promise.all(r)}async function bnt(e,t,i){t&&(t.timeInfo&&(i!=null&&i.timeExtent)&&tm(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&tm(e,t.fieldsIndex,[t.floorInfo.floorField]),(i==null?void 0:i.where)!=null&&await Hse(e,t.fieldsIndex,i.where))}async function _nt(e,t,i){t&&i&&await Promise.all(i.map(r=>b6e(e,t,r)))}async function b6e(e,t,i){t&&i&&(i.valueExpression?await Vs(e,t.fieldsIndex,i.valueExpression):i.field&&so(e,t.fieldsIndex,i.field))}function Snt(e){return e?pT(e.fieldsIndex,Wse(e)):[]}function _6e(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?pT(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}const S6e=new Set(["oid","global-id","guid"]),x6e=new Set(["oid","global-id"]),E6e=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function I6e(e){const t=new Set;Zse(e).forEach(r=>t.add(r)),_6e(e).forEach(r=>t.add(r.toLowerCase()));const i=e&&"infoFor3D"in e?e.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(r=>t.add(r.toLowerCase())),Object.values(i.transformFieldRoles).forEach(r=>t.add(r.toLowerCase()))),Array.from(t)}function Wse(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:i,creatorField:r,editDateField:n,editorField:o}=t;return[i,r,n,o].filter(Boolean)}function Zse(e){return Wse(e).map(t=>t.toLowerCase())}function T6e(e,t){var i;return e.editable&&!S6e.has(e.type)&&!Zse(t).includes(((i=e.name)==null?void 0:i.toLowerCase())??"")}function $6e(e,t){var r;const i=((r=e.name)==null?void 0:r.toLowerCase())??"";return!((t==null?void 0:t.objectIdField)!=null&&i===t.objectIdField.toLowerCase()||(t==null?void 0:t.globalIdField)!=null&&i===t.globalIdField.toLowerCase()||I6e(t).includes(i)||x6e.has(e.type)||E6e.some(n=>n.test(i)))}async function xnt(e,t){const{labelingInfo:i,fieldsIndex:r}=t;i!=null&&i.length&&await Promise.all(i.map(n=>M6e(e,r,n)))}async function M6e(e,t,i){if(!i)return;const r=i.getLabelExpression(),n=i.where;if(r.type==="arcade")await Vs(e,t,r.expression);else{const o=r.expression.match(/{[^}]*}/g);o&&o.forEach(u=>{so(e,t,u.slice(1,-1))})}await Hse(e,t,n)}function C6e(e){const t=e.defaultValue;return t!==void 0&&Yse(e,t)?t:e.nullable?null:void 0}function Ent(e){const t=typeof e=="string"?{type:e}:e;return Qse(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function Jse(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function A6e(e){return e===null||Jse(e)}function k6e(e){return e===null||Number.isInteger(e)}function Kse(e){return e!=null&&typeof e=="string"}function L6e(e){return e===null||Kse(e)}function O6e(){return!0}function Yse(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=e.nullable?k6e:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?A6e:Jse;break;case"string":case"esriFieldTypeString":i=e.nullable?L6e:Kse;break;default:i=O6e}return arguments.length===1?i:i(t)}const R6e=["integer","small-integer","big-integer"],P6e=["single","double"],N6e=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],F6e=["esriFieldTypeSingle","esriFieldTypeDouble"],Xse=new Set([...R6e,...N6e]),D6e=new Set([...P6e,...F6e]),j6e=ste(Xse,D6e);function z6e(e){return e!=null&&Xse.has(e.type)}function SF(e){return e!=null&&j6e.has(e.type)}function Qse(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function eoe(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function V6e(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function U6e(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function xF(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function fB(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function yB(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function Int(e,t){return G6e(e,t)===null}var bI,_I;function Tnt(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function G6e(e,t){return e==null||e.nullable&&t===null?null:SF(e)&&!B6e(e.type,Number(t))?bI.OUT_OF_RANGE:Yse(e,t)?e.domain?s6e(e,t):null:_I.INVALID_TYPE}function B6e(e,t){const i=typeof e=="string"?toe(e):e;if(!i)return!1;const r=i.min,n=i.max;return i.isInteger?Number.isInteger(t)&&t>=r&&t<=n:t>=r&&t<=n}function toe(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return q6e;case"esriFieldTypeInteger":case"integer":return H6e;case"esriFieldTypeBigInteger":case"big-integer":return W6e;case"esriFieldTypeSingle":case"single":return Z6e;case"esriFieldTypeDouble":case"double":return J6e}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(bI||(bI={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(_I||(_I={}));const q6e={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},H6e={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},W6e={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},Z6e={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},J6e={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function $nt(e,t,i){switch(e){case Gv.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Gv.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case _I.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case bI.OUT_OF_RANGE:{const{min:r,max:n}=toe(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${r} to ${n}`}}}function K6e(e,t){return!Y6e(e,t,null)}function Y6e(e,t,i){if(!(t!=null&&t.attributes)||!e)return!0;const r=new Set(Object.keys(t.attributes));let n=!1;for(const o of e)if(!r.has(o)&&(n=!0,i==null))break;return n}function P8(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}async function X6e(e,t){const i=new Set;return e!=null&&e.collectRequiredFields&&await e.collectRequiredFields(i,t),Array.from(i).sort()}function ioe(e){const t=e==null?void 0:e.match(/{[^}]+}/g);return t?t.map(i=>i.slice(1,-1).split(":")[0].trim()):[]}let P9=class extends be{constructor(t){super(t),this.type=null}};m([w({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],P9.prototype,"type",void 0),P9=m([H("esri.popup.content.Content")],P9);const pd=P9;var N8;let o0=N8=class extends pd{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new N8({description:this.description,displayType:this.displayType,title:this.title})}};m([w({type:String,json:{write:!0}})],o0.prototype,"description",void 0),m([w({type:["auto","preview","list"],json:{write:!0}})],o0.prototype,"displayType",void 0),m([w({type:String,json:{write:!0}})],o0.prototype,"title",void 0),m([w({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],o0.prototype,"type",void 0),o0=N8=m([H("esri.popup.content.AttachmentsContent")],o0);const Bv=o0;var F8;let a0=F8=class extends pd{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new F8({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?he(this.outFields):null})}};m([w()],a0.prototype,"creator",void 0),m([w()],a0.prototype,"destroyer",void 0),m([w()],a0.prototype,"outFields",void 0),m([w({type:["custom"],readOnly:!0})],a0.prototype,"type",void 0),a0=F8=m([H("esri.popup.content.CustomContent")],a0);const Q6e=a0;var D8;let d1=D8=class extends be{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new D8({title:this.title,expression:this.expression})}};m([w({type:String,json:{write:!0}})],d1.prototype,"title",void 0),m([w({type:String,json:{write:!0}})],d1.prototype,"expression",void 0),m([w({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],d1.prototype,"returnType",void 0),d1=D8=m([H("esri.popup.ElementExpressionInfo")],d1);const roe=d1;var j8;let eb=j8=class extends pd{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new j8({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};m([w({type:roe,json:{write:!0}})],eb.prototype,"expressionInfo",void 0),m([w({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],eb.prototype,"type",void 0),eb=j8=m([H("esri.popup.content.ExpressionContent")],eb);const fT=eb;let p1=class extends It(be){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};m([Ke(q5e)],p1.prototype,"dateFormat",void 0),m([w({type:Boolean,json:{write:!0}})],p1.prototype,"digitSeparator",void 0),m([w({type:Ot,json:{write:!0}})],p1.prototype,"places",void 0),p1=m([H("esri.popup.support.FieldInfoFormat")],p1);const N9=p1;var z8;let kl=z8=class extends be{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var e;return new z8({fieldName:this.fieldName,format:(e=this.format)==null?void 0:e.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};m([w({type:String,json:{write:!0}})],kl.prototype,"fieldName",void 0),m([w({type:N9,json:{write:!0}})],kl.prototype,"format",void 0),m([w({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],kl.prototype,"isEditable",void 0),m([w({type:String,json:{write:!0}})],kl.prototype,"label",void 0),m([Ke(new gt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],kl.prototype,"stringFieldOption",void 0),m([w({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],kl.prototype,"statisticType",void 0),m([w({type:String,json:{write:!0}})],kl.prototype,"tooltip",void 0),m([w({type:Boolean,json:{write:!0}})],kl.prototype,"visible",void 0),kl=z8=m([H("esri.popup.FieldInfo")],kl);const SS=kl;var V8;let th=V8=class extends pd{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(i=>i.toJSON())}clone(){return new V8(he({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};m([w({type:Object,json:{write:!0}})],th.prototype,"attributes",void 0),m([w({type:String,json:{write:!0}})],th.prototype,"description",void 0),m([w({type:[SS]})],th.prototype,"fieldInfos",void 0),m([Pe("fieldInfos")],th.prototype,"writeFieldInfos",null),m([w({type:String,json:{write:!0}})],th.prototype,"title",void 0),m([w({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],th.prototype,"type",void 0),th=V8=m([H("esri.popup.content.FieldsContent")],th);const im=th;let l0=class extends be{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};m([w({type:String,json:{write:!0}})],l0.prototype,"altText",void 0),m([w({type:String,json:{write:!0}})],l0.prototype,"caption",void 0),m([w({type:String,json:{write:!0}})],l0.prototype,"title",void 0),m([w({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],l0.prototype,"type",void 0),l0=m([H("esri.popup.content.mixins.MediaInfo")],l0);const EF=l0;var U8;let u0=U8=class extends De{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var e;return new U8({color:(e=this.color)==null?void 0:e.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};m([w()],u0.prototype,"color",void 0),m([w()],u0.prototype,"fieldName",void 0),m([w()],u0.prototype,"tooltip",void 0),m([w()],u0.prototype,"value",void 0),u0=U8=m([H("esri.popup.content.support.ChartMediaInfoValueSeries")],u0);const noe=u0;var G8;let Vd=G8=class extends be{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new G8({colors:he(this.colors),fields:he(this.fields),normalizeField:this.normalizeField,series:he(this.series),tooltipField:this.tooltipField})}};m([w({type:[Ne],json:{type:[[Ot]],write:!0}})],Vd.prototype,"colors",void 0),m([w({type:[String],json:{write:!0}})],Vd.prototype,"fields",void 0),m([w({type:String,json:{write:!0}})],Vd.prototype,"normalizeField",void 0),m([w({type:[noe],json:{read:!1}})],Vd.prototype,"series",void 0),m([w({type:String,json:{write:!0}})],Vd.prototype,"tooltipField",void 0),Vd=G8=m([H("esri.popup.content.support.ChartMediaInfoValue")],Vd);const eTe=Vd;let tb=class extends EF{constructor(t){super(t),this.type=null,this.value=void 0}};m([w({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],tb.prototype,"type",void 0),m([w({type:eTe,json:{write:!0}})],tb.prototype,"value",void 0),tb=m([H("esri.popup.content.mixins.ChartMediaInfo")],tb);const yT=tb,mT=_n()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var B8;let F9=B8=class extends yT{constructor(e){super(e),this.type="bar-chart"}clone(){var e;return new B8({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};m([w({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:mT.write}})],F9.prototype,"type",void 0),F9=B8=m([H("esri.popup.content.BarChartMediaInfo")],F9);const soe=F9;var q8;let D9=q8=class extends yT{constructor(e){super(e),this.type="column-chart"}clone(){var e;return new q8({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};m([w({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:mT.write}})],D9.prototype,"type",void 0),D9=q8=m([H("esri.popup.content.ColumnChartMediaInfo")],D9);const ooe=D9;var H8;let ib=H8=class extends be{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new H8({linkURL:this.linkURL,sourceURL:this.sourceURL})}};m([w({type:String,json:{write:!0}})],ib.prototype,"linkURL",void 0),m([w({type:String,json:{write:!0}})],ib.prototype,"sourceURL",void 0),ib=H8=m([H("esri.popup.content.support.ImageMediaInfoValue")],ib);const tTe=ib;var W8;let f1=W8=class extends EF{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var e;return new W8({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(e=this.value)==null?void 0:e.clone()})}};m([w({type:Number,json:{write:!0}})],f1.prototype,"refreshInterval",void 0),m([w({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],f1.prototype,"type",void 0),m([w({type:tTe,json:{write:!0}})],f1.prototype,"value",void 0),f1=W8=m([H("esri.popup.content.ImageMediaInfo")],f1);const aoe=f1;var Z8;let j9=Z8=class extends yT{constructor(e){super(e),this.type="line-chart"}clone(){var e;return new Z8({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};m([w({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:mT.write}})],j9.prototype,"type",void 0),j9=Z8=m([H("esri.popup.content.LineChartMediaInfo")],j9);const loe=j9;var J8;let z9=J8=class extends yT{constructor(e){super(e),this.type="pie-chart"}clone(){var e;return new J8({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};m([w({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:mT.write}})],z9.prototype,"type",void 0),z9=J8=m([H("esri.popup.content.PieChartMediaInfo")],z9);const uoe=z9,K8={base:EF,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":soe,"column-chart":ooe,"line-chart":loe,"pie-chart":uoe,image:aoe}};var Y8;let Ll=Y8=class extends pd{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?aoe.fromJSON(t):t.type==="barchart"?soe.fromJSON(t):t.type==="columnchart"?ooe.fromJSON(t):t.type==="linechart"?loe.fromJSON(t):t.type==="piechart"?uoe.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(i=>i.toJSON())}clone(){return new Y8(he({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};m([w()],Ll.prototype,"activeMediaInfoIndex",void 0),m([w({type:Object,json:{write:!0}})],Ll.prototype,"attributes",void 0),m([w({type:String,json:{write:!0}})],Ll.prototype,"description",void 0),m([w({types:[K8]})],Ll.prototype,"mediaInfos",void 0),m([ke("mediaInfos")],Ll.prototype,"readMediaInfos",null),m([Pe("mediaInfos")],Ll.prototype,"writeMediaInfos",null),m([w({type:String,json:{write:!0}})],Ll.prototype,"title",void 0),m([w({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],Ll.prototype,"type",void 0),Ll=Y8=m([H("esri.popup.content.MediaContent")],Ll);const qv=Ll;var X8;let rb=X8=class extends be{constructor(e){super(e),this.field=null,this.order=null}clone(){return new X8({field:this.field,order:this.order})}};m([w({type:String,json:{write:!0}})],rb.prototype,"field",void 0),m([w({type:["asc","desc"],json:{write:!0}})],rb.prototype,"order",void 0),rb=X8=m([H("esri.popup.support.RelatedRecordsInfoFieldOrder")],rb);const IF=rb;let Du=class extends It(pd){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};m([w({type:String,json:{write:!0}})],Du.prototype,"description",void 0),m([w({type:Number,json:{type:Ot,write:!0}})],Du.prototype,"displayCount",void 0),m([w({type:["list"],json:{write:!0}})],Du.prototype,"displayType",void 0),m([w({type:[IF],json:{write:!0}})],Du.prototype,"orderByFields",void 0),m([w({type:Number,json:{type:Ot,write:!0}})],Du.prototype,"relationshipId",void 0),m([w({type:String,json:{write:!0}})],Du.prototype,"title",void 0),m([w({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],Du.prototype,"type",void 0),Du=m([H("esri.popup.content.RelationshipContent")],Du);const x_=Du;var Q8;let nb=Q8=class extends pd{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new Q8({text:this.text})}};m([w({type:String,json:{write:!0}})],nb.prototype,"text",void 0),m([w({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],nb.prototype,"type",void 0),nb=Q8=m([H("esri.popup.content.TextContent")],nb);const rm=nb;let ju=class extends It(be){constructor(t){super(t),this.title=null,this.description=null,this.type=null,this.open=!1,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};m([w({type:String,json:{write:!0}})],ju.prototype,"title",void 0),m([w({type:String,json:{write:!0}})],ju.prototype,"description",void 0),m([w({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],ju.prototype,"type",void 0),m([w({type:Boolean,json:{read:!1}})],ju.prototype,"open",void 0),m([w({type:Number,json:{type:Ot,write:!0}})],ju.prototype,"associatedNetworkSourceId",void 0),m([w({type:Number,json:{type:Ot,write:!0}})],ju.prototype,"associatedAssetGroup",void 0),m([w({type:Number,json:{type:Ot,write:!0}})],ju.prototype,"associatedAssetType",void 0),ju=m([H("esri.popup.support.UtilityNetworkAssociationType")],ju);const iTe=ju;let c0=class extends It(pd){constructor(t){super(t),this.description=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};m([w({type:String,json:{write:!0}})],c0.prototype,"description",void 0),m([w({type:String,json:{write:!0}})],c0.prototype,"title",void 0),m([w({type:[iTe],json:{write:!0}})],c0.prototype,"associationTypes",void 0),m([Ke({utilityNetworkAssociations:"utility-network-associations"})],c0.prototype,"type",void 0),c0=m([H("esri.popup.content.UtilityNetworkAssociationsContent")],c0);const TF=c0,rTe={base:null,key:"type",typeMap:{attachment:Bv,media:qv,text:rm,expression:fT,field:im,relationship:x_,utilityNetworkAssociations:TF}},nTe={base:null,key:"type",typeMap:{attachment:Bv,media:qv,text:rm,expression:fT,field:im,relationship:x_}};var ek;let h0=ek=class extends be{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new ek({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};m([w({type:String,json:{write:!0}})],h0.prototype,"name",void 0),m([w({type:String,json:{write:!0}})],h0.prototype,"title",void 0),m([w({type:String,json:{write:!0}})],h0.prototype,"expression",void 0),m([w({type:["string","number"],json:{write:!0}})],h0.prototype,"returnType",void 0),h0=ek=m([H("esri.popup.ExpressionInfo")],h0);const coe=h0;var tk;let sb=tk=class extends be{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new tk({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};m([w({type:Boolean,json:{write:!0}})],sb.prototype,"returnTopmostRaster",void 0),m([w({type:Boolean,json:{write:!0}})],sb.prototype,"showNoDataRecords",void 0),sb=tk=m([H("esri.popup.LayerOptions")],sb);const sTe=sb;var ik;let ob=ik=class extends be{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new ik({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?he(this.orderByFields):null})}};m([w({type:Boolean,json:{write:!0}})],ob.prototype,"showRelatedRecords",void 0),m([w({type:[IF],json:{write:!0}})],ob.prototype,"orderByFields",void 0),ob=ik=m([H("esri.popup.RelatedRecordsInfo")],ob);const mB=ob;var rk;let Ra=rk=class extends Eu(De){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new rk({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};m([w()],Ra.prototype,"active",void 0),m([w()],Ra.prototype,"className",void 0),m([w()],Ra.prototype,"disabled",void 0),m([w()],Ra.prototype,"icon",void 0),m([w()],Ra.prototype,"id",void 0),m([w()],Ra.prototype,"indicator",void 0),m([w()],Ra.prototype,"title",void 0),m([w()],Ra.prototype,"type",void 0),m([w()],Ra.prototype,"visible",void 0),Ra=rk=m([H("esri.support.actions.ActionBase")],Ra);const M2=Ra;var nk;let V9=nk=class extends M2{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new nk({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};m([w()],V9.prototype,"image",void 0),V9=nk=m([H("esri.support.actions.ActionButton")],V9);const bm=V9;var sk;let ab=sk=class extends M2{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new sk({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};m([w()],ab.prototype,"image",void 0),m([w()],ab.prototype,"value",void 0),ab=sk=m([H("esri.support.actions.ActionToggle")],ab);const gT=ab,mw="relationships/",gB="expression/",oTe=Oe.ofType({key:"type",defaultKeyValue:"button",base:M2,typeMap:{button:bm,toggle:gT}}),aTe={base:pd,key:"type",typeMap:{media:qv,custom:Q6e,text:rm,attachments:Bv,fields:im,expression:fT,relationship:x_,utilityNetworkAssociations:TF}},hoe=new Set(["attachments","fields","media","text","expression","relationship"]),lTe=new Set([...hoe,"utility-network-associations"]);let Wr=class extends It(be){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map(i=>ul(aTe,i)):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||Fc(t)?t:(Se.getLogger(this).error("content error","unsupported content value",{value:t}),null)}readContent(t,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeWebSceneContent(t,i,r,n){this._writePopupTemplateContent(t,i,n)}writeWebMapContent(t,i,r,n){this._writePopupTemplateContent(t,i,n)}writeFieldInfos(t,i,r,n){const{content:o}=this,u=Array.isArray(o)?o:null;if(t){const f=u?u.filter(b=>b.type==="fields"):[],g=f.length&&f.every(b=>{var E;return(E=b.fieldInfos)==null?void 0:E.length});i.fieldInfos=t.filter(Boolean).map(b=>{const E=b.toJSON(n);return g&&(E.visible=!1),E})}if(u)for(const f of u)f.type==="fields"&&this._writeFieldsContent(f,i)}writeLayerOptions(t,i,r,n){i[r]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(n)}writeTitle(t,i){i.title=t||""}async collectRequiredFields(t,i){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(t,i,[...r,...this._getContentExpressionInfos(this.content,r)]),tm(t,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const i=new Set;return await this.collectRequiredFields(i,t),[...i].sort()}_writePopupTemplateContent(t,i,r){typeof t!="string"?Array.isArray(t)&&(i.popupElements=t.filter(n=>(r==null?void 0:r.origin)==="web-scene"?hoe.has(n.type):lTe.has(n.type)).map(n=>n==null?void 0:n.toJSON(r)),i.popupElements.forEach(n=>{n.type==="attachments"?this._writeAttachmentContent(i):n.type==="media"?this._writeMediaContent(n,i):n.type==="text"?this._writeTextContent(n,i):n.type==="relationship"&&this._writeRelationshipContent(n,i)})):i.description=t}_writeFieldsContent(t,i){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const r=he(t.fieldInfos);Array.isArray(i.fieldInfos)?r.forEach(n=>{const o=i.fieldInfos.find(u=>{var f,g;return((f=u.fieldName)==null?void 0:f.toLowerCase())===((g=n.fieldName)==null?void 0:g.toLowerCase())});o?o.visible=!0:i.fieldInfos.push(n)}):i.fieldInfos=r}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,i){var o,u;const r=((o=t.orderByFields)==null?void 0:o.map(f=>this._toFieldOrderJSON(f,t.relationshipId)))||[],n=[...((u=i.relatedRecordsInfo)==null?void 0:u.orderByFields)||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...(n==null?void 0:n.length)&&{orderByFields:n}}}_writeTextContent(t,i){!i.description&&t.text&&(i.description=t.text)}_writeMediaContent(t,i){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const r=he(t.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(t,i,r){const n={description:!1,mediaInfos:!1};return r.map(o=>o.type==="media"?(o.mediaInfos||!i||n.mediaInfos||(o.mediaInfos=i,n.mediaInfos=!0),qv.fromJSON(o)):o.type==="text"?(o.text||!t||n.description||(o.text=t,n.description=!0),rm.fromJSON(o)):o.type==="attachments"?Bv.fromJSON(o):o.type==="fields"?im.fromJSON(o):o.type==="expression"?fT.fromJSON(o):o.type==="relationship"?x_.fromJSON(o):o.type==="utilityNetworkAssociations"?TF.fromJSON(o):void 0).filter(Boolean)}_toRelationshipContent(t){const{field:i,order:r}=t;if(!(i!=null&&i.startsWith(mw)))return null;const n=i.replace(mw,"").split("/");if(n.length!==2)return null;const o=parseInt(n[0],10),u=n[1];return typeof o=="number"&&u?x_.fromJSON({relationshipId:o,orderByFields:[{field:u,order:r}]}):null}_toFieldOrderJSON(t,i){const{order:r,field:n}=t;return{field:`${mw}${i}/${n}`,order:r}}_readPopupInfo({description:t,mediaInfos:i,showAttachments:r,relatedRecordsInfo:n={showRelatedRecords:!1}}){const o=[];t?o.push(new rm({text:t})):o.push(new im),Array.isArray(i)&&i.length&&o.push(qv.fromJSON({mediaInfos:i})),r&&o.push(Bv.fromJSON({displayType:"auto"}));const{showRelatedRecords:u,orderByFields:f}=n;return u&&(f!=null&&f.length)&&f.forEach(g=>{const b=this._toRelationshipContent(g);b&&o.push(b)}),o.length?o:t}_getContentElementFields(t){const i=t==null?void 0:t.type;if(i==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(i==="custom")return t.outFields||[];if(i==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(i==="media"){const r=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...r.reduce((n,o)=>[...n,...this._getMediaInfoFields(o)],[])]}return i==="text"?this._extractFieldNames(t.text):i==="relationship"||i==="utility-network-associations"?[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)]:[]}_getMediaInfoFields(t){const{caption:i,title:r,value:n}=t,o=n||{},{fields:u,normalizeField:f,tooltipField:g,sourceURL:b,linkURL:E}=o,I=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(b),...this._extractFieldNames(E),...u??[]];return f&&I.push(f),g&&I.push(g),I}_getContentExpressionInfos(t,i){return Array.isArray(t)?t.reduce((r,n)=>[...r,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]],i):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce((i,r)=>[...i,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(t,i,r){r&&await Promise.all(r.map(n=>Vs(t,i,n.expression)))}_getFieldInfoFields(t){return t?t.filter(({fieldName:i,visible:r})=>!(r!==void 0&&!r||!i||i.startsWith(mw)||i.startsWith(gB))).map(i=>i.fieldName):[]}_getActionsFields(t){return t?t.toArray().reduce((i,r)=>[...i,...this._getActionFields(r)],[]):[]}_getActionFields(t){const{className:i,title:r,type:n}=t,o=n==="button"||n==="toggle"?t.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(o)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){return ioe(t).filter(i=>!(i.indexOf(mw)===0||i.indexOf(gB)===0))}};m([w({type:oTe})],Wr.prototype,"actions",void 0),m([w()],Wr.prototype,"content",void 0),m([St("content")],Wr.prototype,"castContent",null),m([ke("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Wr.prototype,"readContent",null),m([Pe("web-scene","content",{popupElements:{type:Oe.ofType(nTe)},showAttachments:{type:Boolean},mediaInfos:{type:Oe.ofType(K8)},description:{type:String},relatedRecordsInfo:{type:mB}})],Wr.prototype,"writeWebSceneContent",null),m([Pe("content",{popupElements:{type:Oe.ofType(rTe)},showAttachments:{type:Boolean},mediaInfos:{type:Oe.ofType(K8)},description:{type:String},relatedRecordsInfo:{type:mB}})],Wr.prototype,"writeWebMapContent",null),m([w({type:[coe],json:{write:!0}})],Wr.prototype,"expressionInfos",void 0),m([w({type:[SS]})],Wr.prototype,"fieldInfos",void 0),m([Pe("fieldInfos")],Wr.prototype,"writeFieldInfos",null),m([w({type:sTe})],Wr.prototype,"layerOptions",void 0),m([Pe("layerOptions")],Wr.prototype,"writeLayerOptions",null),m([w({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Wr.prototype,"lastEditInfoEnabled",void 0),m([w()],Wr.prototype,"outFields",void 0),m([w()],Wr.prototype,"overwriteActions",void 0),m([w()],Wr.prototype,"returnGeometry",void 0),m([w({json:{type:String}})],Wr.prototype,"title",void 0),m([Pe("title")],Wr.prototype,"writeTitle",null),Wr=m([H("esri.PopupTemplate")],Wr);const Af=Wr,vB=new gt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let uTe=0,y1=class extends be{constructor(t){super(t),this.id="sym"+uTe++,this.type=null,this.color=new Ne([0,0,0,1])}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};m([w({type:vB.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:vB.write}}})],y1.prototype,"type",void 0),m([w({type:Ne,json:{write:{allowNull:!0}}})],y1.prototype,"color",void 0),m([ke("color")],y1.prototype,"readColor",null),y1=m([H("esri.symbols.Symbol")],y1);const ls=y1;var ok;let Ud=ok=class extends ls{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const n=r.map(o=>{const u=o.valueExpressionInfo;return u?Vs(e,t,u.expression):null});await Promise.all(n)}}}clone(){return new ok({data:he(this.data)})}hash(){return xee(JSON.stringify(this.data)).toString()}};m([w({json:{write:!1}})],Ud.prototype,"color",void 0),m([w({json:{write:!0}})],Ud.prototype,"data",void 0),m([ke("data",["symbol"])],Ud.prototype,"readData",null),m([Pe("data",{})],Ud.prototype,"writeData",null),m([Ke({CIMSymbolReference:"cim"},{readOnly:!0})],Ud.prototype,"type",void 0),Ud=ok=m([H("esri.symbols.CIMSymbol")],Ud);const fd=Ud;let m1=class extends be{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,i,r){t||(i[r]=t)}};m([w({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],m1.prototype,"enabled",void 0),m([Pe("enabled")],m1.prototype,"writeEnabled",null),m([w({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],m1.prototype,"type",void 0),m1=m([H("esri.symbols.Symbol3DLayer")],m1);const jc=m1;function cTe(e,t){const i=t.transparency!=null?__(t.transparency):1,r=t.color;return r&&Array.isArray(r)?new Ne([r[0]||0,r[1]||0,r[2]||0,i]):null}function hTe(e,t){t.color=e.toJSON().slice(0,3);const i=uT(e.a);i!==0&&(t.transparency=i)}const kf={type:Ne,json:{type:[Ot],default:null,read:{source:["color","transparency"],reader:cTe},write:{target:{color:{type:[Ot]},transparency:{type:Ot}},writer:hTe}}},Rc={type:Number,cast:Gt,json:{write:!0}};let d0=class extends be{constructor(t){super(t),this.color=new Ne([0,0,0,1]),this.extensionLength=0,this.size=Uo(1)}clone(){}cloneProperties(){return{color:he(this.color),size:this.size,extensionLength:this.extensionLength}}};m([w({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],d0.prototype,"type",void 0),m([w(kf)],d0.prototype,"color",void 0),m([w({...Rc,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],d0.prototype,"extensionLength",void 0),m([w(Rc)],d0.prototype,"size",void 0),d0=m([H("esri.symbols.edges.Edges3D")],d0);const $F=d0;var ak;let U9=ak=class extends $F{constructor(e){super(e),this.type="sketch"}clone(){return new ak(this.cloneProperties())}};m([Ke({sketch:"sketch"},{readOnly:!0})],U9.prototype,"type",void 0),U9=ak=m([H("esri.symbols.edges.SketchEdges3D")],U9);const dTe=U9;var lk;let G9=lk=class extends $F{constructor(e){super(e),this.type="solid"}clone(){return new lk(this.cloneProperties())}};m([Ke({solid:"solid"},{readOnly:!0})],G9.prototype,"type",void 0),G9=lk=m([H("esri.symbols.edges.SolidEdges3D")],G9);const doe=G9,poe={types:{key:"type",base:$F,typeMap:{solid:doe,sketch:dTe}},json:{write:!0}};var uk;let Ro=uk=class extends be{constructor(e){super(e),this.color=null,this.emissiveFactor=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?_a(this.emissiveFactor):null};return new uk(e)}};m([w(kf)],Ro.prototype,"color",void 0),m([w({type:[Number],json:{write:!1}})],Ro.prototype,"emissiveFactor",void 0),Ro=uk=m([H("esri.symbols.support.Symbol3DMaterial")],Ro);var ck;let Gd=ck=class extends jc{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var e,t;return new ck({edges:(e=this.edges)==null?void 0:e.clone(),enabled:this.enabled,material:(t=this.material)==null?void 0:t.clone(),castShadows:this.castShadows,size:this.size})}};m([Ke({Extrude:"extrude"},{readOnly:!0})],Gd.prototype,"type",void 0),m([w({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Gd.prototype,"size",void 0),m([w({type:Ro,json:{write:!0}})],Gd.prototype,"material",void 0),m([w({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Gd.prototype,"castShadows",void 0),m([w(poe)],Gd.prototype,"edges",void 0),Gd=ck=m([H("esri.symbols.ExtrudeSymbol3DLayer")],Gd);const foe=Gd;let lb=class extends ls{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};m([Ke({esriSLS:"simple-line"},{readOnly:!0})],lb.prototype,"type",void 0),m([w({type:Number,cast:Gt,json:{write:!0}})],lb.prototype,"width",void 0),lb=m([H("esri.symbols.LineSymbol")],lb);const pTe=lb,fTe=["begin","end","begin-end"],yoe=["arrow","circle","square","diamond","cross","x"];var hk;let zu=hk=class extends be{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,i,r){t[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,i,r){(r==null?void 0:r.origin)==="web-map"||(t[i]=e)}clone(){return new hk({color:he(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};m([w({type:["begin","end","begin-end"],json:{write:!0}})],zu.prototype,"placement",void 0),m([Ke({"line-marker":"line-marker"},{readOnly:!0}),w({json:{origins:{"web-map":{write:!1}}}})],zu.prototype,"type",void 0),m([w({type:yoe})],zu.prototype,"style",void 0),m([Pe("style")],zu.prototype,"writeStyle",null),m([w({type:Ne,value:null,json:{write:{allowNull:!0}}})],zu.prototype,"color",null),m([ke("color")],zu.prototype,"readColor",null),m([Pe("color")],zu.prototype,"writeColor",null),zu=hk=m([H("esri.symbols.LineSymbolMarker")],zu);const yTe=zu;var dk;const LM=new gt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let ih=dk=class extends pTe{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,i,r,n,o){if(e&&typeof e!="string")return e;const u={};return e!=null&&(u.style=e),t!=null&&(u.color=t),i!=null&&(u.width=Gt(i)),r!=null&&(u.cap=r),n!=null&&(u.join=n),o!=null&&(u.miterLimit=Gt(o)),u}clone(){var e;return new dk({color:he(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};m([Ke({esriSLS:"simple-line"},{readOnly:!0})],ih.prototype,"type",void 0),m([w({type:LM.apiValues,json:{read:LM.read,write:LM.write}})],ih.prototype,"style",void 0),m([w({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null?void 0:i.origin)==null})}}})],ih.prototype,"cap",void 0),m([w({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null?void 0:i.origin)==null})}}})],ih.prototype,"join",void 0),m([w({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":yTe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],ih.prototype,"marker",void 0),m([w({type:Number,json:{read:!1,write:!1}})],ih.prototype,"miterLimit",void 0),ih=dk=m([H("esri.symbols.SimpleLineSymbol")],ih);const us=ih;let ub=class extends ls{constructor(t){super(t),this.outline=null,this.type=null}hash(){var t;return`${this.type}.${(t=this.outline)==null?void 0:t.hash()}`}};m([w({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":us}},json:{default:null,write:!0}})],ub.prototype,"outline",void 0),m([w({type:["simple-fill","picture-fill"],readOnly:!0})],ub.prototype,"type",void 0),ub=m([H("esri.symbols.FillSymbol")],ub);const moe=ub;let B9=class extends be{constructor(t){super(t)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};m([w({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],B9.prototype,"type",void 0),B9=m([H("esri.symbols.patterns.LinePattern3D")],B9);const goe=B9,mTe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var pk;const gTe=_n()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let cb=pk=class extends goe{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new pk(e)}};m([w({type:["style"]})],cb.prototype,"type",void 0),m([Ke(gTe),w({type:mTe})],cb.prototype,"style",void 0),cb=pk=m([H("esri.symbols.patterns.LineStylePattern3D")],cb);const MF=cb;let q9=class extends be{constructor(t){super(t),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};m([w({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],q9.prototype,"type",void 0),q9=m([H("esri.symbols.patterns.Pattern3D")],q9);const voe=q9,vTe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var fk;let hb=fk=class extends voe{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new fk({style:this.style})}};m([w({type:["style"]})],hb.prototype,"type",void 0),m([w({type:vTe,json:{read:!0,write:!0}})],hb.prototype,"style",void 0),hb=fk=m([H("esri.symbols.patterns.StylePattern3D")],hb);const woe=hb,wTe={types:{key:"type",base:voe,typeMap:{style:woe}},json:{write:!0}},boe={types:{key:"type",base:goe,typeMap:{style:MF}},json:{write:!0}},T3=new Ne("white");new Ne("black");const bTe=new Ne([255,255,255,0]);function _Te(e){return e.r===0&&e.g===0&&e.b===0}var yk;let $3=yk=class extends Ro{constructor(e){super(e),this.colorMixMode=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?_a(this.emissiveFactor):null,colorMixMode:this.colorMixMode};return new yk(e)}};m([Ke({multiply:"multiply",replace:"replace",tint:"tint"})],$3.prototype,"colorMixMode",void 0),$3=yk=m([H("esri.symbols.support.Symbol3DFillMaterial")],$3);function STe(e,t=!1){return e<=mee?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function Gnt(e){return(yee(e)?e.length:e.byteLength/8)<=mee?Array.from(e):new Float64Array(e)}function Bnt(e,t,i){return Array.isArray(e)?e.slice(t,t+i):e.subarray(t,t+i)}function xS(e=TTe){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function CF(e,t,i,r,n,o,u=xS()){return u[0]=e,u[1]=t,u[2]=i,u[3]=r,u[4]=n,u[5]=o,u}function qnt(e,t=xS()){return xTe(e,0,e.length/3,t)}function xTe(e,t,i,r=xS()){return _oe(r,mk),ETe(r,e,t,i),r}function Hnt(e,t=STe(24)){const[i,r,n,o,u,f]=e;return t[0]=i,t[1]=r,t[2]=n,t[3]=i,t[4]=r,t[5]=f,t[6]=i,t[7]=u,t[8]=n,t[9]=i,t[10]=u,t[11]=f,t[12]=o,t[13]=r,t[14]=n,t[15]=o,t[16]=r,t[17]=f,t[18]=o,t[19]=u,t[20]=n,t[21]=o,t[22]=u,t[23]=f,t}function Wnt(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new Ht(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function Znt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function Jnt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function Knt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function ETe(e,t,i=0,r=t.length/3){let n=e[0],o=e[1],u=e[2],f=e[3],g=e[4],b=e[5];for(let E=0;E<r;E++)n=Math.min(n,t[i+3*E]),o=Math.min(o,t[i+3*E+1]),u=Math.min(u,t[i+3*E+2]),f=Math.max(f,t[i+3*E]),g=Math.max(g,t[i+3*E+1]),b=Math.max(b,t[i+3*E+2]);e[0]=n,e[1]=o,e[2]=u,e[3]=f,e[4]=g,e[5]=b}function Ynt(e,t,i){const r=t.length;let n=e[0],o=e[1],u=e[2],f=e[3],g=e[4],b=e[5];if(i)for(let E=0;E<r;E++){const I=t[E];n=Math.min(n,I[0]),o=Math.min(o,I[1]),u=Math.min(u,I[2]),f=Math.max(f,I[0]),g=Math.max(g,I[1]),b=Math.max(b,I[2])}else for(let E=0;E<r;E++){const I=t[E];n=Math.min(n,I[0]),o=Math.min(o,I[1]),f=Math.max(f,I[0]),g=Math.max(g,I[1])}e[0]=n,e[1]=o,e[2]=u,e[3]=f,e[4]=g,e[5]=b}function Xnt(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function ES(e){return e[0]>=e[3]?0:e[3]-e[0]}function IS(e){return e[1]>=e[4]?0:e[4]-e[1]}function TS(e){return e[2]>=e[5]?0:e[5]-e[2]}function Qnt(e){const t=ES(e),i=TS(e),r=IS(e);return Math.sqrt(t*t+i*i+r*r)}function est(e,t=[0,0,0]){return t[0]=e[0]+ES(e)/2,t[1]=e[1]+IS(e)/2,t[2]=e[2]+TS(e)/2,t}function tst(e,t=[0,0,0]){return t[0]=ES(e),t[1]=IS(e),t[2]=TS(e),t}function ist(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function ITe(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function rst(e,t){return t==null||ITe(e,t)}function nst(e,t,i,r,n=e){return n[0]=e[0]+t,n[1]=e[1]+i,n[2]=e[2]+r,n[3]=e[3]+t,n[4]=e[4]+i,n[5]=e[5]+r,n}function sst(e,t,i=e){const r=e[0]+ES(e)/2,n=e[1]+IS(e)/2,o=e[2]+TS(e)/2;return i[0]=r+(e[0]-r)*t,i[1]=n+(e[1]-n)*t,i[2]=o+(e[2]-o)*t,i[3]=r+(e[3]-r)*t,i[4]=n+(e[4]-n)*t,i[5]=o+(e[5]-o)*t,i}function ost(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function ast(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function lst(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function _oe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function ust(e){return e?_oe(e,mk):xS(mk)}function cst(e,t){return t||(t=to()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function hst(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function dst(e,t,i,r,n){return e[0]=t,e[1]=i,e[2]=Number.NEGATIVE_INFINITY,e[3]=r,e[4]=n,e[5]=Number.POSITIVE_INFINITY,e}function wB(e){return e.length===6}function pst(e){return ES(e)===0&&IS(e)===0&&TS(e)===0}function fst(e,t,i){if(e==null||t==null)return e===t;if(!wB(e)||!wB(t))return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}const mk=[1/0,1/0,1/0,-1/0,-1/0,-1/0],TTe=[0,0,0,0,0,0];xS();function yst(e,{isPrimitive:t,width:i,depth:r,height:n}){const o=t?10:1;if(i==null&&n==null&&r==null)return[o*e[0],o*e[1],o*e[2]];const u=Lc(i,r,n);let f;for(let g=0;g<3;g++){const b=u[g];if(b!=null){f=b/e[g];break}}for(let g=0;g<3;g++)u[g]==null&&(u[g]=e[g]*f);return u}const $Te=CF(-.5,-.5,-.5,.5,.5,.5),MTe=CF(-.5,-.5,0,.5,.5,1),CTe=CF(-.5,-.5,0,.5,.5,.5);function mst(e){switch(e){case"sphere":case"cube":case"diamond":return $Te;case"cylinder":case"cone":case"inverted-cone":return MTe;case"tetrahedron":return CTe;default:return}}const AF=["butt","square","round"],ATe=[...AF,"none"],Soe=["miter","bevel","round"];var gk;let p0=gk=class extends be{constructor(e){super(e),this.color=new Ne([0,0,0,1]),this.size=Uo(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new gk(e)}};m([w(kf)],p0.prototype,"color",void 0),m([w(Rc)],p0.prototype,"size",void 0),m([w(boe)],p0.prototype,"pattern",void 0),m([w({type:AF,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],p0.prototype,"patternCap",void 0),p0=gk=m([H("esri.symbols.support.Symbol3DOutline")],p0);var H9;let rh=H9=class extends jc{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new H9(e)}static fromSimpleFillSymbol(e){var r,n,o;const t=e.outline&&e.outline.style&&e.outline.style!=="solid"?new MF({style:e.outline.style}):null,i={size:((r=e.outline)==null?void 0:r.width)??0,color:(((n=e.outline)==null?void 0:n.color)??T3).clone(),pattern:t};return t&&((o=e.outline)!=null&&o.cap)&&(i.patternCap=e.outline.cap),new H9({material:new $3({color:(e.color??bTe).clone()}),pattern:e.style&&e.style!=="solid"?new woe({style:e.style}):null,outline:i})}};m([Ke({Fill:"fill"},{readOnly:!0})],rh.prototype,"type",void 0),m([w({type:$3,json:{write:!0}})],rh.prototype,"material",void 0),m([w(wTe)],rh.prototype,"pattern",void 0),m([w({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],rh.prototype,"castShadows",void 0),m([w({type:p0,json:{write:!0}})],rh.prototype,"outline",void 0),m([w(poe)],rh.prototype,"edges",void 0),rh=H9=m([H("esri.symbols.FillSymbol3DLayer")],rh);const Lf=rh,kTe=["none","underline","line-through"],LTe=["normal","italic","oblique"],OTe=["normal","lighter","bold","bolder"],xoe={type:Number,cast:e=>{const t=Qs(e);return t===0?1:oo(t,.1,4)},nonNullable:!0},RTe=["left","right","center"],PTe=["baseline","top","middle","bottom"],Eoe={type:RTe,nonNullable:!0},Ioe={type:PTe,nonNullable:!0},gst=8;var vk;let nh=vk=class extends be{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return Gt(e)}clone(){return new vk({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};m([w({type:kTe,json:{default:"none",write:!0}})],nh.prototype,"decoration",void 0),m([w({type:String,json:{write:!0}})],nh.prototype,"family",void 0),m([w({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:!i||!i.textSymbol3D})}}})],nh.prototype,"size",void 0),m([St("size")],nh.prototype,"castSize",null),m([w({type:LTe,json:{default:"normal",write:!0}})],nh.prototype,"style",void 0),m([w({type:OTe,json:{default:"normal",write:!0}})],nh.prototype,"weight",void 0),nh=vk=m([H("esri.symbols.Font")],nh);const vT=nh;var wk;const NTe=_n()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let f0=wk=class extends be{constructor(e){super(e)}readHref(e,t,i){return e?mf(e,i):t.dataURI}writeHref(e,t,i,r){e&&(hd(e)?t.dataURI=e:(t.href=bS(e,r),pa(t.href)&&(t.href=sl(t.href))))}clone(){return new wk({href:this.href,primitive:this.primitive})}};m([w({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],f0.prototype,"href",void 0),m([ke("href")],f0.prototype,"readHref",null),m([Pe("href",{href:{type:String},dataURI:{type:String}})],f0.prototype,"writeHref",null),m([Ke(NTe)],f0.prototype,"primitive",void 0),f0=wk=m([H("esri.symbols.support.IconSymbol3DLayerResource")],f0);const FTe="circle";var bk;let Pg=bk=class extends De{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new bk({x:this.x,y:this.y})}};m([w({type:Number})],Pg.prototype,"x",void 0),m([w({type:Number})],Pg.prototype,"y",void 0),Pg=bk=m([H("esri.symbols.support.Symbol3DAnchorPosition2D")],Pg);var _k;let db=_k=class extends be{constructor(e){super(e),this.color=new Ne([0,0,0,1]),this.size=Uo(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new _k(e)}};m([w(kf)],db.prototype,"color",void 0),m([w(Rc)],db.prototype,"size",void 0),db=_k=m([H("esri.symbols.support.Symbol3DIconOutline")],db);var g1;const Toe="esri.symbols.IconSymbol3DLayer";let Ol=g1=class extends jc{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new g1({anchor:this.anchor,anchorPosition:he(this.anchorPosition),enabled:this.enabled,material:he(this.material),outline:he(this.outline),resource:he(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||T3,i=bB(e),r=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||T3).clone()}:null;return new g1({size:e.size,angle:e.angle,resource:{primitive:jTe(e.style)},material:{color:t},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const t=!e.color||_Te(e.color)?T3:e.color,i=bB(e);return new g1({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:t.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new g1({resource:{href:Mte({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};m([w({type:Ro,json:{write:!0}})],Ol.prototype,"material",void 0),m([w({type:f0,json:{write:!0}})],Ol.prototype,"resource",void 0),m([Ke({Icon:"icon"},{readOnly:!0})],Ol.prototype,"type",void 0),m([w(Rc)],Ol.prototype,"size",void 0),m([Ke({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],Ol.prototype,"anchor",void 0),m([w({type:Pg,json:{type:[Number],read:{reader:e=>new Pg({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Ol.prototype,"anchorPosition",void 0),m([w({type:db,json:{write:!0}})],Ol.prototype,"outline",void 0),m([w({type:Number,json:{write:!0,default:0}})],Ol.prototype,"angle",void 0),Ol=g1=m([H(Toe)],Ol);const fy=Ol;function bB(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,r=_B(e.xoffset),n=_B(e.yoffset);return(r||n)&&t&&i?{x:-r/t,y:n/i}:null}function _B(e){return isFinite(e)?e:0}const DTe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function jTe(e){return DTe[e]||(Se.getLogger(Toe).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}let y0=class extends It(be){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};m([w({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],y0.prototype,"type",void 0),m([w({type:fTe,json:{default:"begin-end",write:!0}})],y0.prototype,"placement",void 0),m([w({type:yoe,json:{default:"arrow",write:!0}})],y0.prototype,"style",void 0),m([w({type:Ne,json:{type:[Ot],default:null,write:!0}})],y0.prototype,"color",void 0),y0=m([H("esri.symbols.LineStyleMarker3D")],y0);const Sk=y0;var W9;let Vu=W9=class extends jc{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Uo(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new W9(e)}static fromSimpleLineSymbol(e){var i;const t={enabled:!0,size:e.width??Uo(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new MF({style:e.style}):null,material:new Ro({color:(e.color||T3).clone()}),marker:e.marker?new Sk({placement:e.marker.placement,style:e.marker.style,color:((i=e.marker.color)==null?void 0:i.clone())??null}):null};return new W9(t)}};m([w({type:Ro,json:{write:!0}})],Vu.prototype,"material",void 0),m([Ke({Line:"line"},{readOnly:!0})],Vu.prototype,"type",void 0),m([w({type:Soe,json:{write:!0,default:"miter"}})],Vu.prototype,"join",void 0),m([w({type:AF,json:{write:!0,default:"butt"}})],Vu.prototype,"cap",void 0),m([w(Rc)],Vu.prototype,"size",void 0),m([w(boe)],Vu.prototype,"pattern",void 0),m([w({types:{key:"type",base:Sk,typeMap:{style:Sk}},json:{write:!0}})],Vu.prototype,"marker",void 0),Vu=W9=m([H("esri.symbols.LineSymbol3DLayer")],Vu);const C2=Vu;var xk;const zTe=_n()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let pb=xk=class extends be{clone(){return new xk({href:this.href,primitive:this.primitive})}};m([w({type:String,json:{read:dF,write:em}})],pb.prototype,"href",void 0),m([Ke(zTe)],pb.prototype,"primitive",void 0),pb=xk=m([H("esri.symbols.support.ObjectSymbol3DLayerResource")],pb);const VTe="sphere";var Ek;let Q0=Ek=class extends De{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new Ek({x:this.x,y:this.y,z:this.z})}};m([w({type:Number})],Q0.prototype,"x",void 0),m([w({type:Number})],Q0.prototype,"y",void 0),m([w({type:Number})],Q0.prototype,"z",void 0),Q0=Ek=m([H("esri.symbols.support.Symbol3DAnchorPosition3D")],Q0);var Ik;let Ss=Ik=class extends jc{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,t,i;return new Ik({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((t=this.material)==null?void 0:t.clone())??null,castShadows:this.castShadows,resource:(i=this.resource)==null?void 0:i.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};m([w({type:Ro,json:{write:!0}})],Ss.prototype,"material",void 0),m([w({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ss.prototype,"castShadows",void 0),m([w({type:pb,json:{write:!0}})],Ss.prototype,"resource",void 0),m([Ke({Object:"object"},{readOnly:!0})],Ss.prototype,"type",void 0),m([w({type:Number,json:{write:!0}})],Ss.prototype,"width",void 0),m([w({type:Number,json:{write:!0}})],Ss.prototype,"height",void 0),m([w({type:Number,json:{write:!0}})],Ss.prototype,"depth",void 0),m([Ke({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],Ss.prototype,"anchor",void 0),m([w({type:Q0,json:{type:[Number],read:{reader:e=>new Q0({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Ss.prototype,"anchorPosition",void 0),m([w({type:Number,json:{write:!0}})],Ss.prototype,"heading",void 0),m([w({type:Number,json:{write:!0}})],Ss.prototype,"tilt",void 0),m([w({type:Number,json:{write:!0}})],Ss.prototype,"roll",void 0),m([w({readOnly:!0})],Ss.prototype,"isPrimitive",null),Ss=Ik=m([H("esri.symbols.ObjectSymbol3DLayer")],Ss);const kF=Ss;var Tk;let Hs=Tk=class extends jc{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new Tk({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};m([w({type:Ro,json:{write:!0}})],Hs.prototype,"material",void 0),m([w({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Hs.prototype,"castShadows",void 0),m([Ke({Path:"path"},{readOnly:!0})],Hs.prototype,"type",void 0),m([w({type:["circle","quad"],json:{write:!0,default:"circle"}})],Hs.prototype,"profile",void 0),m([w({type:Soe,json:{write:!0,default:"miter"}})],Hs.prototype,"join",void 0),m([w({type:ATe,json:{write:!0,default:"butt"}})],Hs.prototype,"cap",void 0),m([w({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Hs.prototype,"width",void 0),m([ke("width",["width","size","height"])],Hs.prototype,"readWidth",null),m([w({type:Number,json:{write:!0}})],Hs.prototype,"height",void 0),m([ke("height",["height","size","width"])],Hs.prototype,"readHeight",null),m([w({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Hs.prototype,"anchor",void 0),m([w({type:["heading","all"],json:{write:!0,default:"all"}})],Hs.prototype,"profileRotation",void 0),Hs=Tk=m([H("esri.symbols.PathSymbol3DLayer")],Hs);const LF=Hs;var $k;let Ng=$k=class extends be{constructor(){super(...arguments),this.color=new Ne([0,0,0,1]),this.size=0}clone(){const e={color:he(this.color),size:this.size};return new $k(e)}};m([w(kf)],Ng.prototype,"color",void 0),m([w(Rc)],Ng.prototype,"size",void 0),Ng=$k=m([H("esri.symbols.support.Symbol3DHalo")],Ng);let M3=class extends It(be){constructor(t){super(t),this.color=null}};m([w(kf)],M3.prototype,"color",void 0),M3=m([H("esri.symbols.support.Symbol3DTextBackground")],M3);var Z9;let po=Z9=class extends jc{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,i,r){const n={...r,textSymbol3D:!0};t.font=e.write({},n),delete t.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new Z9({enabled:this.enabled,font:this.font&&he(this.font),halo:this.halo&&he(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:he(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new Z9({font:e.font!=null?e.font.clone():new vT,halo:UTe(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new Ro({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new M3({color:e.backgroundColor.clone()}):null})}};function UTe(e,t){return e&&t!=null&&t>0?new Ng({color:he(e),size:t}):null}m([w({type:vT,json:{write:!0}})],po.prototype,"font",null),m([Pe("font")],po.prototype,"writeFont",null),m([w({type:Ng,json:{write:!0}})],po.prototype,"halo",void 0),m([w({...Eoe,json:{default:"center",write:!0}})],po.prototype,"horizontalAlignment",void 0),m([w({...xoe,json:{default:1,write:!0}})],po.prototype,"lineHeight",void 0),m([w({type:Ro,json:{write:!0}})],po.prototype,"material",void 0),m([w({type:M3,json:{write:!0}})],po.prototype,"background",void 0),m([w(Rc)],po.prototype,"size",null),m([w({type:String,json:{write:!0}})],po.prototype,"text",void 0),m([Ke({Text:"text"},{readOnly:!0})],po.prototype,"type",void 0),m([w({...Ioe,json:{default:"baseline",write:!0}})],po.prototype,"verticalAlignment",void 0),po=Z9=m([H("esri.symbols.TextSymbol3DLayer")],po);const A2=po;var Mk;let Bd=Mk=class extends jc{constructor(e){super(e),this.color=Ck.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new Mk({color:he(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};m([w({type:Ne,nonNullable:!0,json:{type:[Ot],write:(e,t,i)=>t[i]=e.toArray(Ne.AlphaMode.UNLESS_OPAQUE),default:()=>Ck.clone(),defaultEquals:e=>e.toCss(!0)===Ck.toCss(!0)}})],Bd.prototype,"color",void 0),m([Ke({Water:"water"},{readOnly:!0})],Bd.prototype,"type",void 0),m([w({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Bd.prototype,"waterbodySize",void 0),m([w({type:Number,json:{write:!0,default:null}})],Bd.prototype,"waveDirection",void 0),m([w({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Bd.prototype,"waveStrength",void 0),Bd=Mk=m([H("esri.symbols.WaterSymbol3DLayer")],Bd);const $oe=Bd,Ck=new Ne([0,119,190]);var Ak;let m0=Ak=class extends De{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new Ak({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};m([w({type:String})],m0.prototype,"name",void 0),m([w({type:String})],m0.prototype,"styleUrl",void 0),m([w({type:String})],m0.prototype,"styleName",void 0),m([w({type:Ur})],m0.prototype,"portal",void 0),m0=Ak=m([H("esri.symbols.support.StyleOrigin")],m0);const E_=m0;var kk;let $y=kk=class extends De{constructor(){super(...arguments),this.url=""}clone(){return new kk({url:this.url})}};m([w({type:String})],$y.prototype,"url",void 0),$y=kk=m([H("esri.symbols.support.Thumbnail")],$y);const Moe={icon:fy,object:kF,line:C2,path:LF,fill:Lf,extrude:foe,text:A2,water:$oe},GTe=Oe.ofType({base:jc,key:"type",typeMap:Moe,errorContext:"symbol-layer"});let Uu=class extends ls{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=i==null?void 0:i.type,n=r||Oe;this._set("symbolLayers",new n)}get color(){return null}set color(t){this.constructed&&Se.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){yf(t,this._get("symbolLayers"))}readStyleOrigin(t,i,r){if(t.styleUrl&&t.name){const n=mf(t.styleUrl,r);return new E_({styleUrl:n,name:t.name})}if(t.styleName&&t.name)return new E_({portal:(r==null?void 0:r.portal)||Ur.getDefault(),styleName:t.styleName,name:t.name});r!=null&&r.messages&&r.messages.push(new ga("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:t}))}writeStyleOrigin(t,i,r,n){if(t.styleUrl&&t.name){let o=bS(t.styleUrl,n);pa(o)&&(o=sl(o)),i.styleOrigin={styleUrl:o,name:t.name}}else t.styleName&&t.name&&(t.portal&&(n!=null&&n.portal)&&!$te(t.portal.restUrl,n.portal.restUrl)?n!=null&&n.messages&&n.messages.push(new ga("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof jc||t&&Moe[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};m([w({json:{read:!1,write:!1}})],Uu.prototype,"color",null),m([w({type:GTe,nonNullable:!0,json:{write:!0}}),St(ise)],Uu.prototype,"symbolLayers",null),m([w({type:E_})],Uu.prototype,"styleOrigin",void 0),m([ke("styleOrigin")],Uu.prototype,"readStyleOrigin",null),m([Pe("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Uu.prototype,"writeStyleOrigin",null),m([w({type:$y,json:{read:!1}})],Uu.prototype,"thumbnail",void 0),m([w({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Uu.prototype,"type",void 0),Uu=m([H("esri.symbols.Symbol3D")],Uu);const _m=Uu;let fb=class extends be{constructor(t){super(t),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};m([w({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],fb.prototype,"type",void 0),m([w({readOnly:!0})],fb.prototype,"visible",void 0),fb=m([H("esri.symbols.callouts.Callout3D")],fb);const Coe=fb;var Lk;let J9=Lk=class extends be{constructor(e){super(e),this.color=new Ne("white")}clone(){return new Lk({color:he(this.color)})}};m([w(kf)],J9.prototype,"color",void 0),J9=Lk=m([H("esri.symbols.callouts.LineCallout3DBorder")],J9);const BTe=J9;var Ok;let qd=Ok=class extends Coe{constructor(e){super(e),this.type="line",this.color=new Ne([0,0,0,1]),this.size=Uo(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new Ok({color:he(this.color),size:this.size,border:he(this.border)})}};m([Ke({line:"line"})],qd.prototype,"type",void 0),m([w(kf)],qd.prototype,"color",void 0),m([w(Rc)],qd.prototype,"size",void 0),m([w({type:BTe,json:{write:!0}})],qd.prototype,"border",void 0),m([w({readOnly:!0})],qd.prototype,"visible",null),qd=Ok=m([H("esri.symbols.callouts.LineCallout3D")],qd);const Aoe=qd;function OF(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function koe(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!OF(e)}function Sst(e){return e.type==="point-3d"||e.type==="label-3d"}function xst(e){return e.horizontalAlignment==="center"}const Loe={types:{key:"type",base:Coe,typeMap:{line:Aoe}},json:{write:!0}};var Rk;let v1=Rk=class extends be{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new Rk({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};m([w(Rc)],v1.prototype,"screenLength",void 0),m([w({type:Number,nonNullable:!0,json:{write:!0,default:0}})],v1.prototype,"minWorldLength",void 0),m([w({type:Number,json:{write:!0}})],v1.prototype,"maxWorldLength",void 0),v1=Rk=m([H("esri.symbols.support.Symbol3DVerticalOffset")],v1);const RF=v1;var K9;const Ooe=Oe.ofType({base:null,key:"type",typeMap:{text:A2}});let Hd=K9=class extends _m{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new Ooe,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return koe(this)}hasVisibleVerticalOffset(){return OF(this)}clone(){return new K9({styleOrigin:he(this.styleOrigin),symbolLayers:he(this.symbolLayers),thumbnail:he(this.thumbnail),callout:he(this.callout),verticalOffset:he(this.verticalOffset)})}static fromTextSymbol(e){return new K9({symbolLayers:new Oe([A2.fromTextSymbol(e)])})}};m([w({type:RF,json:{write:!0}})],Hd.prototype,"verticalOffset",void 0),m([w(Loe)],Hd.prototype,"callout",void 0),m([w({json:{read:!1,write:!1}})],Hd.prototype,"styleOrigin",void 0),m([w({type:Ooe})],Hd.prototype,"symbolLayers",void 0),m([Ke({LabelSymbol3D:"label-3d"},{readOnly:!0})],Hd.prototype,"type",void 0),Hd=K9=m([H("esri.symbols.LabelSymbol3D")],Hd);const wT=Hd;var Y9;const Roe=Oe.ofType({base:null,key:"type",typeMap:{line:C2,path:LF}}),qTe=Oe.ofType({base:null,key:"type",typeMap:{line:C2,path:LF}});let yb=Y9=class extends _m{constructor(e){super(e),this.symbolLayers=new Roe,this.type="line-3d"}clone(){return new Y9({styleOrigin:he(this.styleOrigin),symbolLayers:he(this.symbolLayers),thumbnail:he(this.thumbnail)})}static fromSimpleLineSymbol(e){return new Y9({symbolLayers:new Oe([C2.fromSimpleLineSymbol(e)])})}};m([w({type:Roe,json:{type:qTe}})],yb.prototype,"symbolLayers",void 0),m([Ke({LineSymbol3D:"line-3d"},{readOnly:!0})],yb.prototype,"type",void 0),yb=Y9=m([H("esri.symbols.LineSymbol3D")],yb);const Sm=yb;let Wd=class extends ls{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};m([w({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Wd.prototype,"angle",void 0),m([w({type:["simple-marker","picture-marker"],readOnly:!0})],Wd.prototype,"type",void 0),m([w({type:Number,cast:Gt,json:{write:!0}})],Wd.prototype,"xoffset",void 0),m([w({type:Number,cast:Gt,json:{write:!0}})],Wd.prototype,"yoffset",void 0),m([w({cast:e=>e==="auto"?e:Qs(Gt(e)),json:{write:!0}})],Wd.prototype,"size",void 0),Wd=m([H("esri.symbols.MarkerSymbol")],Wd);const Poe=Wd;var X9;const Noe=Oe.ofType({base:null,key:"type",typeMap:{fill:Lf}});let mb=X9=class extends _m{constructor(e){super(e),this.symbolLayers=new Noe,this.type="mesh-3d"}clone(){return new X9({styleOrigin:he(this.styleOrigin),symbolLayers:he(this.symbolLayers),thumbnail:he(this.thumbnail)})}static fromSimpleFillSymbol(e){return new X9({symbolLayers:new Oe([Lf.fromSimpleFillSymbol(e)])})}};m([w({type:Noe})],mb.prototype,"symbolLayers",void 0),m([Ke({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],mb.prototype,"type",void 0),mb=X9=m([H("esri.symbols.MeshSymbol3D")],mb);const k2=mb;function HTe(e,t,i){return t.imageData?Mte({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):Foe(t.url,i)}function Foe(e,t){if(!pa(e)){const i=ZTe(t);if(i)return By(i,"images",e)}return mf(e,t)}function WTe(e,t,i,r){if(hd(e)){const n=qy(e);if(!n)return;t.contentType=n.mediaType,t.imageData=n.data,i&&i.imageData===t.imageData&&i.url&&em(i.url,t,"url",r)}else em(e,t,"url",r)}const Doe={json:{read:{source:["imageData","url"],reader:HTe},write:{writer(e,t,i,r){WTe(e,t,this.source,r)}}}},joe={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=Foe(t.url,i)),r}}}};function ZTe(e){var n,o;if(!e)return null;const{origin:t,layer:i}=e;if(t!=="service"&&t!=="portal-item")return null;const r=i==null?void 0:i.type;return r==="feature"||r==="stream"?(n=i.parsedUrl)==null?void 0:n.path:r==="map-image"||r==="tile"?(o=e.url)==null?void 0:o.path:null}var Pk;let Pa=Pk=class extends moe{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const n={};return e&&(n.url=e),t&&(n.outline=t),i!=null&&(n.width=Gt(i)),r!=null&&(n.height=Gt(r)),n}clone(){const e=new Pk({color:he(this.color),height:this.height,outline:he(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",he(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};m([Ke({esriPFS:"picture-fill"},{readOnly:!0})],Pa.prototype,"type",void 0),m([w(Doe)],Pa.prototype,"url",void 0),m([w({type:Number,json:{write:!0}})],Pa.prototype,"xscale",void 0),m([w({type:Number,json:{write:!0}})],Pa.prototype,"yscale",void 0),m([w({type:Number,cast:Gt,json:{write:!0}})],Pa.prototype,"width",void 0),m([w({type:Number,cast:Gt,json:{write:!0}})],Pa.prototype,"height",void 0),m([w({type:Number,cast:Gt,json:{write:!0}})],Pa.prototype,"xoffset",void 0),m([w({type:Number,cast:Gt,json:{write:!0}})],Pa.prototype,"yoffset",void 0),m([w(joe)],Pa.prototype,"source",void 0),Pa=Pk=m([H("esri.symbols.PictureFillSymbol")],Pa);const PF=Pa;var Nk;let Rl=Nk=class extends Poe{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const r={};return e&&(r.url=e),t!=null&&(r.width=Gt(t)),i!=null&&(r.height=Gt(i)),r}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new Nk({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",he(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};m([w({json:{write:!1}})],Rl.prototype,"color",void 0),m([Ke({esriPMS:"picture-marker"},{readOnly:!0})],Rl.prototype,"type",void 0),m([w(Doe)],Rl.prototype,"url",void 0),m([w(joe)],Rl.prototype,"source",void 0),m([w({type:Number,cast:Gt,json:{write:!0}})],Rl.prototype,"height",void 0),m([ke("height",["height","size"])],Rl.prototype,"readHeight",null),m([w({type:Number,cast:Gt,json:{write:!0}})],Rl.prototype,"width",void 0),m([w({json:{write:!1}})],Rl.prototype,"size",void 0),Rl=Nk=m([H("esri.symbols.PictureMarkerSymbol")],Rl);const L2=Rl;var g0;const zoe=Oe.ofType({base:null,key:"type",typeMap:{icon:fy,object:kF,text:A2}});let v0=g0=class extends _m{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new zoe,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return koe(this)}hasVisibleVerticalOffset(){return OF(this)}clone(){return new g0({verticalOffset:he(this.verticalOffset),callout:he(this.callout),styleOrigin:he(this.styleOrigin),symbolLayers:he(this.symbolLayers),thumbnail:he(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new g0({symbolLayers:new Oe([fy.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new g0({symbolLayers:new Oe([fy.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){var r,n;if(((n=(r=e.data)==null?void 0:r.symbol)==null?void 0:n.type)!=="CIMPointSymbol")return null;const i=e.data.symbol;return new g0(i!=null&&i.callout?{symbolLayers:new Oe([fy.fromCIMSymbol(e)]),callout:new Aoe({size:.5,color:new Ne([0,0,0])}),verticalOffset:new RF({screenLength:40})}:{symbolLayers:new Oe([fy.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new g0({symbolLayers:new Oe([A2.fromTextSymbol(e)])})}};m([w({type:RF,json:{write:!0}})],v0.prototype,"verticalOffset",void 0),m([w(Loe)],v0.prototype,"callout",void 0),m([w({type:zoe,json:{origins:{"web-scene":{write:!0}}}})],v0.prototype,"symbolLayers",void 0),m([Ke({PointSymbol3D:"point-3d"},{readOnly:!0})],v0.prototype,"type",void 0),v0=g0=m([H("esri.symbols.PointSymbol3D")],v0);const Wh=v0;var gb;const Voe=Oe.ofType({base:null,key:"type",typeMap:{extrude:foe,fill:Lf,icon:fy,line:C2,object:kF,text:A2,water:$oe}});let vb=gb=class extends _m{constructor(e){super(e),this.symbolLayers=new Voe,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&u_(Se.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&u_(Se.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(Lr(()=>this.symbolLayers,"after-add",({item:t})=>e(t),hl))}clone(){return new gb({styleOrigin:he(this.styleOrigin),symbolLayers:he(this.symbolLayers),thumbnail:he(this.thumbnail)})}static fromJSON(e){var i;const t=new gb;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const r=t.symbolLayers.at(0),n=t.symbolLayers.at(1);!n.enabled||(i=e.symbolLayers)!=null&&i[1]&&e.symbolLayers[1].enable===!1||(r.outline={size:n.size,color:n.material!=null?n.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new gb({symbolLayers:new Oe([Lf.fromSimpleFillSymbol(e)])})}};m([w({type:Voe,json:{write:!0}})],vb.prototype,"symbolLayers",void 0),m([Ke({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],vb.prototype,"type",void 0),vb=gb=m([H("esri.symbols.PolygonSymbol3D")],vb);const Of=vb;var Fk;const OM=new gt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let w0=Fk=class extends moe{constructor(...e){super(...e),this.color=new Ne([0,0,0,.25]),this.outline=new us,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.style=e),t&&(r.outline=t),i&&(r.color=i),r}clone(){return new Fk({color:he(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};m([w()],w0.prototype,"color",void 0),m([w()],w0.prototype,"outline",void 0),m([Ke({esriSFS:"simple-fill"},{readOnly:!0})],w0.prototype,"type",void 0),m([w({type:OM.apiValues,json:{read:OM.read,write:OM.write}})],w0.prototype,"style",void 0),w0=Fk=m([H("esri.symbols.SimpleFillSymbol")],w0);const gl=w0;var Dk;const RM=new gt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Gu=Dk=class extends Poe{constructor(...e){super(...e),this.color=new Ne([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new us}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string")return e;const n={};return e&&(n.style=e),t!=null&&(n.size=Gt(t)),i&&(n.outline=i),r&&(n.color=r),n}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new Dk({angle:this.angle,color:he(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};m([w()],Gu.prototype,"color",void 0),m([Pe("color")],Gu.prototype,"writeColor",null),m([Ke({esriSMS:"simple-marker"},{readOnly:!0})],Gu.prototype,"type",void 0),m([w()],Gu.prototype,"size",void 0),m([w({type:RM.apiValues,json:{read:RM.read,write:RM.write}})],Gu.prototype,"style",void 0),m([w({type:String,json:{write:!0}})],Gu.prototype,"path",null),m([w({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":us}},json:{default:null,write:!0}})],Gu.prototype,"outline",void 0),Gu=Dk=m([H("esri.symbols.SimpleMarkerSymbol")],Gu);const Dn=Gu;var jk;let Zi=jk=class extends ls{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new vT,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.text=e),t&&(r.font=t),i&&(r.color=i),r}writeLineWidth(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}castLineWidth(e){return Gt(e)}writeLineHeight(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}clone(){return new jk({angle:this.angle,backgroundColor:he(this.backgroundColor),borderLineColor:he(this.borderLineColor),borderLineSize:this.borderLineSize,color:he(this.color),font:this.font&&this.font.clone(),haloColor:he(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e,t,i;return`${(e=this.backgroundColor)==null?void 0:e.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${(i=this.haloColor)==null?void 0:i.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};m([w({type:Ne,json:{write:!0}})],Zi.prototype,"backgroundColor",void 0),m([w({type:Ne,json:{write:!0}})],Zi.prototype,"borderLineColor",void 0),m([w({type:Number,json:{write:!0},cast:Gt})],Zi.prototype,"borderLineSize",void 0),m([w({type:vT,json:{write:!0}})],Zi.prototype,"font",void 0),m([w({...Eoe,json:{write:!0}})],Zi.prototype,"horizontalAlignment",void 0),m([w({type:Boolean,json:{write:!0}})],Zi.prototype,"kerning",void 0),m([w({type:Ne,json:{write:!0}})],Zi.prototype,"haloColor",void 0),m([w({type:Number,cast:Gt,json:{write:!0}})],Zi.prototype,"haloSize",void 0),m([w({type:Boolean,json:{write:!0}})],Zi.prototype,"rightToLeft",void 0),m([w({type:Boolean,json:{write:!0}})],Zi.prototype,"rotated",void 0),m([w({type:String,json:{write:!0}})],Zi.prototype,"text",void 0),m([Ke({esriTS:"text"},{readOnly:!0})],Zi.prototype,"type",void 0),m([w({...Ioe,json:{write:!0}})],Zi.prototype,"verticalAlignment",void 0),m([w({type:Number,cast:Gt,json:{write:!0}})],Zi.prototype,"xoffset",void 0),m([w({type:Number,cast:Gt,json:{write:!0}})],Zi.prototype,"yoffset",void 0),m([w({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Zi.prototype,"angle",void 0),m([w({type:Number,json:{write:!0}})],Zi.prototype,"width",void 0),m([w({type:Number})],Zi.prototype,"lineWidth",void 0),m([Pe("lineWidth")],Zi.prototype,"writeLineWidth",null),m([St("lineWidth")],Zi.prototype,"castLineWidth",null),m([w(xoe)],Zi.prototype,"lineHeight",void 0),m([Pe("lineHeight")],Zi.prototype,"writeLineHeight",null),Zi=jk=m([H("esri.symbols.TextSymbol")],Zi);const xm=Zi;var zk;let Pl=zk=class extends ls{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:Ur.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t==null?void 0:t.portal,super.read(e,t)}clone(){return new zk({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const i=t!=null?t.cache:null,r=i?this._fetchCacheKey:null;if(i!=null){const f=r&&i.get(r);if(f)return f.clone()}const{resolveWebStyleSymbol:n}=await ce(()=>Promise.resolve().then(()=>YUe),void 0,import.meta.url);Li(t);const o=n(this,{portal:this.portal},e,t);o.catch(f=>{Se.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",f)});const u=await o;return e==="webRef"&&u.type==="point-3d"||e==="cimRef"&&u.type==="cim"?(i!=null&&i.set(r,u.clone()),u):null}};m([w({json:{write:!1}})],Pl.prototype,"color",void 0),m([w({type:String,json:{write:!0}})],Pl.prototype,"styleName",void 0),m([w({type:Ur,json:{write:!1}})],Pl.prototype,"portal",void 0),m([w({type:String,json:{read:dF,write:em}})],Pl.prototype,"styleUrl",void 0),m([w({type:$y,json:{read:!1}})],Pl.prototype,"thumbnail",void 0),m([w({type:String,json:{write:!0}})],Pl.prototype,"name",void 0),m([Ke({styleSymbolReference:"web-style"},{readOnly:!0})],Pl.prototype,"type",void 0),m([w()],Pl.prototype,"_fetchCacheKey",null),Pl=zk=m([H("esri.symbols.WebStyleSymbol")],Pl);const Em=Pl;function bT(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Pc(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const il={base:ls,key:"type",typeMap:{"simple-fill":gl,"picture-fill":PF,"picture-marker":L2,"simple-line":us,"simple-marker":Dn,text:xm,"label-3d":wT,"line-3d":Sm,"mesh-3d":k2,"point-3d":Wh,"polygon-3d":Of,"web-style":Em,cim:fd},errorContext:"symbol"},Ist={base:ls,key:"type",typeMap:{"picture-marker":L2,"simple-marker":Dn,"point-3d":Wh,cim:fd},errorContext:"symbol"},Tst={base:ls,key:"type",typeMap:{"simple-line":us,"line-3d":Sm,cim:fd},errorContext:"symbol"},$st={base:ls,key:"type",typeMap:{"simple-fill":gl,"picture-fill":PF,"polygon-3d":Of,cim:fd},errorContext:"symbol"},JTe={base:ls,key:"type",typeMap:{"picture-marker":L2,"simple-marker":Dn,text:xm,"web-style":Em,cim:fd},errorContext:"symbol"},KTe=f2({types:il}),Uoe={base:ls,key:"type",typeMap:{"simple-fill":gl,"picture-fill":PF,"picture-marker":L2,"simple-line":us,"simple-marker":Dn,text:xm,"line-3d":Sm,"mesh-3d":k2,"point-3d":Wh,"polygon-3d":Of,"web-style":Em,cim:fd},errorContext:"symbol"},YTe={base:ls,key:"type",typeMap:{text:xm,"label-3d":wT},errorContext:"symbol"},SB={base:ls,key:"type",typeMap:{"line-3d":Sm,"mesh-3d":k2,"point-3d":Wh,"polygon-3d":Of,"web-style":Em,cim:fd},errorContext:"symbol"},XTe={base:ls,key:"type",typeMap:{"label-3d":wT},errorContext:"symbol"},Goe=ul(il);var Vk;function QTe(e){if(!e)return null;const t={};for(const i in e){const r=od(e[i]);r&&(t[i]=r)}return Object.keys(t).length!==0?t:null}function e$e(e){if(e==null)return null;const t={};for(const i in e){const r=e[i];r&&(t[i]=r.toJSON())}return Object.keys(t).length!==0?t:null}let fo=Vk=class extends It(be){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:u9(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&T2e(Se.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),(e==null?void 0:e.type)!=="mesh"&&this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}get version(){return this._version}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new Vk({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const i of[t,this.sourceLayer,this.layer])if(i){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(e&&"defaultPopupTemplate"in i&&i.defaultPopupTemplate!=null)return i.defaultPopupTemplate}return null}getAttribute(e){var t;return(t=this.attributes)==null?void 0:t[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var e;return{aggregateGeometries:e$e(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:qE(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if((t==null?void 0:t.type)==="mesh"){const i={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",i,i,e.action)}}_notifyLayer(e,t,i,r){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:t,newValue:i};e==="origin-transform"&&(n.action=r),e==="attributes"&&(n.attributeName=r),this.layer.graphicChanged(n)}_watchMeshGeometryChanges(){this.addHandles([rn(()=>{var e,t;return((e=this.geometry)==null?void 0:e.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(t=this.geometry.transform)==null?void 0:t.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())}),rn(()=>{var e;return((e=this.geometry)==null?void 0:e.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var t;const e=this.geometry;(e==null?void 0:e.type)==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(t=e.transform)==null?void 0:t.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,t)=>e===t,sync:!0})])}};m([w({value:null,json:{read:QTe}})],fo.prototype,"aggregateGeometries",null),m([w({value:null})],fo.prototype,"attributes",null),m([w({value:null,types:mm,json:{read:od}})],fo.prototype,"geometry",null),m([w({type:Boolean})],fo.prototype,"isAggregate",void 0),m([w({clonable:"reference"})],fo.prototype,"layer",void 0),m([w({clonable:"reference"})],fo.prototype,"origin",void 0),m([w({type:Af})],fo.prototype,"popupTemplate",void 0),m([w({clonable:"reference"})],fo.prototype,"sourceLayer",void 0),m([w({value:null,types:il})],fo.prototype,"symbol",null),m([w({clonable:!1,json:{read:!1,write:!1}})],fo.prototype,"_version",void 0),m([w({type:Boolean,value:!0})],fo.prototype,"visible",null),fo=Vk=m([H("esri.Graphic")],fo);const qi=fo;let My=class extends E3{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};m([VN({Type:qi,ensureType:ir(qi)})],My.prototype,"itemType",void 0),My=m([H("esri.support.GraphicsCollection")],My);let Zd=class extends De{constructor(t){super(t),this.view=null,this.baseLayerViews=new Oe,this.referenceLayerViews=new Oe,this._loadingHandle=me(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap},i=>{i&&i.load().catch(()=>{})},Je)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const t of this.baseLayerViews)t.destroy();this.baseLayerViews.length=0;for(const t of this.referenceLayerViews)t.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){var i,r,n;if((i=this.view)!=null&&i.suspended)return!1;const t=(n=(r=this.view)==null?void 0:r.map)==null?void 0:n.basemap;return!!t&&!!t.loaded&&(this.baseLayerViews.some(o=>o.updating)||this.referenceLayerViews.some(o=>o.updating))}};m([w({constructOnly:!0})],Zd.prototype,"view",void 0),m([w({readOnly:!0})],Zd.prototype,"baseLayerViews",void 0),m([w({readOnly:!0})],Zd.prototype,"referenceLayerViews",void 0),m([w({readOnly:!0})],Zd.prototype,"suspended",null),m([w({type:Boolean,readOnly:!0})],Zd.prototype,"updating",null),Zd=m([H("esri.views.BasemapView")],Zd);const t$e=Zd;function i$e(e){return"tryRecycleWith"in e}function r$e(e){return e!=null&&typeof e=="object"&&"layerViews"in e}let n$e=class{constructor(t,i,r){this.layer=t,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=wa(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,nl(this._controller.signal,()=>{const n=new ne("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(n)})}tryRecycle(t){if(!this.done||!this.layerView||!i$e(this.layerView))return null;const i=this.layer.type,r=this._controller.signal;for(let n=0;n<t.length;n++){const o=t[n];if(o.type!==i)continue;const u=this.layerView.tryRecycleWith(o,{signal:r});if(u){t.splice(n,1),this.layer=o;const f=this.layerView,g=f.view;return this.promise=Promise.race([u.then(()=>(Li(this._controller.signal),o.emit("layerview-destroy",{view:g,layerView:f}),g.emit("layerview-destroy",{view:g,layerView:f}),o.emit("layerview-create",{view:g,layerView:f}),g.emit("layerview-create",{view:g,layerView:f}),f)),new Promise((b,E)=>nl(this._controller.signal,()=>E(wi())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(t){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:t}),r.emit("layerview-destroy",{layer:i,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var n,o;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:i,view:r}=this;this._map=r.map;try{let u,f;if(await i.load({signal:t}),i.prefetchResources&&await i.prefetchResources({signal:t}),o$e(i))u=await i.createLayerView(r,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new ne("layer:view-not-supported","No layerview implementation was found");const E=await this.layerViewImporter.importLayerView(i);Li(t),u="default"in E?new E.default({layer:i,view:r}):new E({layer:i,view:r})}const g=()=>{f=tr(f),u.destroyed||u.destroy(),u.layer=null,u.parent=null,u.view=null,this.done=!0};f=nl(t,g),Li(t);try{await u.when()}catch(E){throw g(),E}if(!((o=(n=this._map)==null?void 0:n.allLayers)==null?void 0:o.includes(i)))return g(),void this._deferred.reject(new ne("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=u,i.emit("layerview-create",{view:r,layerView:u}),r.emit("layerview-create",{layer:i,layerView:u}),this.done=!0,this._deferred.resolve(u)}catch(u){i.emit("layerview-create-error",{view:r,error:u}),r.emit("layerview-create-error",{layer:i,error:u}),this.done=!0,this._deferred.reject(new ne("layerview:create-error","layerview creation failed",{layer:i,error:u}))}}},Na=class extends De{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new Ty,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var r;const i=(r=this.view.map)==null?void 0:r.allLayers;if(i)for(const n of i)this.layerViewImporter.hasLayerViewModule(n)&&this.layerViewImporter.importLayerView(n)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=wa(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(uS(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var g,b,E;if(this.destroyed)return;const i=this.view.map;if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,n=[],o=this.view.ready,u=I=>{if(I!=null){for(const M of I)if(M){r.add(M);const k=this._layerLayerViewInfoMap.get(M);k&&o?k.start():k||this._recyclingInfoMap.has(M)||n.push(M),"layers"in M&&M.layers&&u(M.layers)}}};for(const I of this._rootCollectionNames)u(Ps(this,I));for(const[I,M]of this._layerLayerViewInfoMap)if(!r.has(I)){this._layerLayerViewInfoMap.delete(M.layer);const k=M.tryRecycle(n);k?(this.notifyChange("updating"),this._recyclingInfoMap.set(M.layer,M),k.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(M.layer),this._layerLayerViewInfoMap.set(M.layer,M),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(M.layer),M.destroy(),this._reschedule()})):M.destroy()}for(const[I,M]of this._recyclingInfoMap)r.has(I)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(M.layer),M.destroy());for(const I of n)this._createLayerView(I);this._refreshCollections();const f=[(g=i==null?void 0:i.ground)==null?void 0:g.layers,(b=i==null?void 0:i.basemap)==null?void 0:b.baseLayers,(E=i==null?void 0:i.basemap)==null?void 0:E.referenceLayers,i==null?void 0:i.layers].filter(I=>!!I);r.forEach(I=>"layers"in I&&f.push(I.layers)),this.addHandles(f.map(I=>this._watchUpdatingTracking.addOnCollectionChange(()=>I,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([Lr(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),me(()=>{const t=this.view,i=t==null?void 0:t.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,t==null?void 0:t.ready]},()=>this._reschedule(),Ln)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),$M(this._recyclingInfoMap),$M(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(wi()),this._workPromise=null)}get _layersToLayerViews(){const t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||Rve(this._layerLayerViewInfoMap,t=>!t.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let t=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++t;return t}clear(){this.destroyed||($M(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(t)){if(this._recyclingInfoMap.has(t))return this._recyclingInfoMap.get(t).promise;throw new ne("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t})}return this._layerLayerViewInfoMap.get(t).promise}isCreatingLayerViewsForLayer(t,i){var o;this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(t);if(!(r!=null&&r.done))return!0;const n=r.layerView;return!(!n||!i||n.parent===i)||!!(r.done&&n&&"layers"in t&&((o=t.layers)!=null&&o.length))&&t.layers.some(u=>this.isCreatingLayerViewsForLayer(u,n))}_refreshCollections(){for(const[t,i]of this._layersToLayerViews)this._populateLayerViewsOwners(Ps(this,t),Ps(this,i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(t,i,r){if(!t||!i)return void(i&&i.removeAll());let n=0;for(const o of t){const u=this._layerLayerViewInfoMap.get(o);if(!(u!=null&&u.layerView))continue;const f=u.layerView;f.layer=o,f.parent=r,i.at(n)!==f&&i.splice(n,0,f),"layers"in o&&r$e(f)&&this._populateLayerViewsOwners(o.layers,f.layerViews,f),n+=1}n<i.length&&i.splice(n,i.length)}_createLayerView(t){t.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);const i=new n$e(t,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),r=>{r&&(Or(r)||r.name==="cancelled:layerview-create")||Se.getLogger(this).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:r}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(t,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};m([w()],Na.prototype,"_workPromise",void 0),m([w({readOnly:!0})],Na.prototype,"_watchUpdatingTracking",void 0),m([w({readOnly:!0})],Na.prototype,"_layersToLayerViews",null),m([w({readOnly:!0})],Na.prototype,"_rootCollectionNames",null),m([w()],Na.prototype,"layerViewImporter",void 0),m([w()],Na.prototype,"supportsGround",void 0),m([w({readOnly:!0})],Na.prototype,"updating",null),m([w({readOnly:!0})],Na.prototype,"updatingRemaining",null),m([w({constructOnly:!0})],Na.prototype,"view",void 0),Na=m([H("esri.views.LayerViewManager")],Na);const s$e=Na;function o$e(e){return"createLayerView"in e&&e.createLayerView!=null}let Yo=class extends De{constructor(t){super(t),this.factor=1.5,this.offset=gn(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};m([w({type:Number})],Yo.prototype,"factor",void 0),m([w({nonNullable:!0})],Yo.prototype,"offset",void 0),m([w()],Yo.prototype,"position",void 0),m([w({type:Number,range:{min:0}})],Yo.prototype,"size",void 0),m([w()],Yo.prototype,"maskUrl",void 0),m([w()],Yo.prototype,"maskEnabled",void 0),m([w()],Yo.prototype,"overlayUrl",void 0),m([w()],Yo.prototype,"overlayEnabled",void 0),m([w({readOnly:!0})],Yo.prototype,"version",null),m([w({type:Boolean})],Yo.prototype,"visible",void 0),Yo=m([H("esri.views.Magnifier")],Yo);const Boe=Yo;let sf=class{constructor(t){this._observable=new _2,this._map=new Map(t)}get size(){return et(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(t){const i=this._map.delete(t);return i&&this._observable.notify(),i}entries(){return et(this._observable),this._map.entries()}forEach(t,i){et(this._observable),this._map.forEach((r,n)=>t.call(i,r,n,this),i)}get(t){return et(this._observable),this._map.get(t)}has(t){return et(this._observable),this._map.has(t)}keys(){return et(this._observable),this._map.keys()}set(t,i){return this._map.set(t,i),this._observable.notify(),this}values(){return et(this._observable),this._map.values()}[Symbol.iterator](){return et(this._observable),this._map[Symbol.iterator]()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var Uk;let yy=Uk=class extends be{constructor(e){super(e),this.name=null,this.code=null}clone(){return new Uk({name:this.name,code:this.code})}};m([w({type:String,json:{write:!0}})],yy.prototype,"name",void 0),m([w({type:[String,Number],json:{write:!0}})],yy.prototype,"code",void 0),yy=Uk=m([H("esri.layers.support.CodedValue")],yy);const a$e=new gt({inherited:"inherited",codedValue:"coded-value",range:"range"});let wb=class extends be{constructor(t){super(t),this.name=null,this.type=null}};m([w({type:String,json:{write:!0}})],wb.prototype,"name",void 0),m([Ke(a$e)],wb.prototype,"type",void 0),wb=m([H("esri.layers.support.Domain")],wb);const _T=wb;var Gk;let bb=Gk=class extends _T{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some(r=>(String(r.code)===i&&(t=r.name),!!t))}return t}clone(){return new Gk({codedValues:he(this.codedValues),name:this.name})}};m([w({type:[yy],json:{write:!0}})],bb.prototype,"codedValues",void 0),m([Ke({codedValue:"coded-value"})],bb.prototype,"type",void 0),bb=Gk=m([H("esri.layers.support.CodedValueDomain")],bb);const ST=bb;var Bk;let Q9=Bk=class extends _T{constructor(e){super(e),this.type="inherited"}clone(){return new Bk}};m([Ke({inherited:"inherited"})],Q9.prototype,"type",void 0),Q9=Bk=m([H("esri.layers.support.InheritedDomain")],Q9);const qoe=Q9;var qk;let w1=qk=class extends _T{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new qk({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};m([w({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var i;return(i=t.range)==null?void 0:i[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]}}}})],w1.prototype,"maxValue",void 0),m([w({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var i;return(i=t.range)==null?void 0:i[0]}},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]}}}})],w1.prototype,"minValue",void 0),m([Ke({range:"range"})],w1.prototype,"type",void 0),w1=qk=m([H("esri.layers.support.RangeDomain")],w1);const Hoe=w1,Woe={key:"type",base:_T,typeMap:{range:Hoe,"coded-value":ST,inherited:qoe}};function xT(e){if(!(e!=null&&e.type))return null;switch(e.type){case"range":return Hoe.fromJSON(e);case"codedValue":return ST.fromJSON(e);case"inherited":return qoe.fromJSON(e)}return null}const NF=new gt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var Hk;const l$e=new gt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let xs=Hk=class extends be{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch{}return(i==null?void 0:i.value)??null}readValueType(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch{}return i?l$e.fromJSON(i.fieldValueType):null}clone(){var e;return new Hk({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((e=this.domain)==null?void 0:e.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};m([w({type:String,json:{write:!0}})],xs.prototype,"alias",void 0),m([w({type:[String,Number],json:{write:{allowNull:!0}}})],xs.prototype,"defaultValue",void 0),m([w()],xs.prototype,"description",void 0),m([ke("description")],xs.prototype,"readDescription",null),m([w({types:Woe,json:{read:{reader:xT},write:!0}})],xs.prototype,"domain",void 0),m([w({type:Boolean,json:{write:!0}})],xs.prototype,"editable",void 0),m([w({type:Ot,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],xs.prototype,"length",void 0),m([w({type:String,json:{write:!0}})],xs.prototype,"name",void 0),m([w({type:Boolean,json:{write:!0}})],xs.prototype,"nullable",void 0),m([Ke(NF)],xs.prototype,"type",void 0),m([w()],xs.prototype,"valueType",void 0),m([ke("valueType",["description"])],xs.prototype,"readValueType",null),m([w({type:Boolean,json:{read:!1}})],xs.prototype,"visible",void 0),xs=Hk=m([H("esri.layers.support.Field")],xs);const ET=xs;var Wk;let b1=Wk=class extends be{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new Wk({mapLayerId:e,gdbVersion:t})}};m([Ke({mapLayer:"map-layer"})],b1.prototype,"type",void 0),m([w({type:Ot,json:{write:!0}})],b1.prototype,"mapLayerId",void 0),m([w({type:String,json:{write:!0}})],b1.prototype,"gdbVersion",void 0),b1=Wk=m([H("esri.layers.support.source.MapLayerSource")],b1);var Zk;let sh=Zk=class extends be{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:i,spatialReference:r,geometryType:n}=this,o={workspaceId:e,query:t,oidFields:i,spatialReference:(r==null?void 0:r.clone())??void 0,geometryType:n};return new Zk(o)}};m([Ke({queryTable:"query-table"})],sh.prototype,"type",void 0),m([w({type:String,json:{write:!0}})],sh.prototype,"workspaceId",void 0),m([w({type:String,json:{write:!0}})],sh.prototype,"query",void 0),m([w({type:String,json:{write:!0}})],sh.prototype,"oidFields",void 0),m([w({type:st,json:{write:!0}})],sh.prototype,"spatialReference",void 0),m([Ke(n_e)],sh.prototype,"geometryType",void 0),sh=Zk=m([H("esri.layers.support.source.QueryTableDataSource")],sh);var Jk;let _1=Jk=class extends be{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new Jk({workspaceId:e,dataSourceName:t})}};m([Ke({raster:"raster"})],_1.prototype,"type",void 0),m([w({type:String,json:{write:!0}})],_1.prototype,"dataSourceName",void 0),m([w({type:String,json:{write:!0}})],_1.prototype,"workspaceId",void 0),_1=Jk=m([H("esri.layers.support.source.RasterDataSource")],_1);var Kk;let b0=Kk=class extends be{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:i}=this;return new Kk({workspaceId:e,gdbVersion:t,dataSourceName:i})}};m([Ke({table:"table"})],b0.prototype,"type",void 0),m([w({type:String,json:{write:!0}})],b0.prototype,"workspaceId",void 0),m([w({type:String,json:{write:!0}})],b0.prototype,"gdbVersion",void 0),m([w({type:String,json:{write:!0}})],b0.prototype,"dataSourceName",void 0),b0=Kk=m([H("esri.layers.support.source.TableDataSource")],b0);var Yk,Xk;const u$e=_n()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Xo=Yk=class extends be{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,i){return xB()(e,t,i)}castLeftTableSource(e){return ul(Qk(),e)}readRightTableSource(e,t,i){return xB()(e,t,i)}castRightTableSource(e){return ul(Qk(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:i,rightTableSource:r,joinType:n}=this,o={leftTableKey:e,rightTableKey:t,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(r==null?void 0:r.clone())??void 0,joinType:n};return new Yk(o)}};m([Ke({joinTable:"join-table"})],Xo.prototype,"type",void 0),m([w({type:String,json:{write:!0}})],Xo.prototype,"leftTableKey",void 0),m([w({type:String,json:{write:!0}})],Xo.prototype,"rightTableKey",void 0),m([w({json:{write:!0}})],Xo.prototype,"leftTableSource",void 0),m([ke("leftTableSource")],Xo.prototype,"readLeftTableSource",null),m([St("leftTableSource")],Xo.prototype,"castLeftTableSource",null),m([w({json:{write:!0}})],Xo.prototype,"rightTableSource",void 0),m([ke("rightTableSource")],Xo.prototype,"readRightTableSource",null),m([St("rightTableSource")],Xo.prototype,"castRightTableSource",null),m([Ke(u$e)],Xo.prototype,"joinType",void 0),Xo=Yk=m([H("esri.layers.support.source.JoinTableDataSource")],Xo);let PM=null;function xB(){return PM||(PM=f2({types:Qk()})),PM}let NM=null;function Qk(){return NM||(NM={key:"type",base:null,typeMap:{"data-layer":ru,"map-layer":b1}}),NM}const c$e={key:"type",base:null,typeMap:{"join-table":Xo,"query-table":sh,raster:_1,table:b0}};let ru=Xk=class extends be{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new Xk({fields:e,dataSource:t})}};m([Ke({dataLayer:"data-layer"})],ru.prototype,"type",void 0),m([w({type:[ET],json:{write:!0}})],ru.prototype,"fields",void 0),m([w({types:c$e,json:{write:!0}})],ru.prototype,"dataSource",void 0),ru=Xk=m([H("esri.layers.support.source.DataLayerSource")],ru),ru.from=ir(ru);let _0=class extends It(be){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};m([w({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],_0.prototype,"onFields",void 0),m([w({type:String,json:{write:!0}})],_0.prototype,"operator",void 0),m([w({type:String,json:{write:!0}})],_0.prototype,"searchTerm",void 0),m([w({type:String,json:{write:!0}})],_0.prototype,"searchType",void 0),_0=m([H("esri.rest.support.FullTextSearch")],_0);const Zoe=_0;var eL;const EB=new gt({upperLeft:"upper-left",lowerLeft:"lower-left"});let S0=eL=class extends be{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new eL(he({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};m([w({type:Ht,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],S0.prototype,"extent",void 0),m([w({type:["view","edit"],json:{write:!0}})],S0.prototype,"mode",void 0),m([w({type:String,json:{read:EB.read,write:EB.write}})],S0.prototype,"originPosition",void 0),m([w({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],S0.prototype,"tolerance",void 0),S0=eL=m([H("esri.rest.support.QuantizationParameters")],S0);const Joe=S0,h$e=new gt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var tL;const IB=new gt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Nl=tL=class extends be{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=he(e))}clone(){return new tL({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:he(this.statisticParameters)})}};m([w({type:Number,json:{write:!0}})],Nl.prototype,"maxPointCount",void 0),m([w({type:Number,json:{write:!0}})],Nl.prototype,"maxRecordCount",void 0),m([w({type:Number,json:{write:!0}})],Nl.prototype,"maxVertexCount",void 0),m([w({type:String,json:{write:!0}})],Nl.prototype,"onStatisticField",void 0),m([w({type:String,json:{write:!0}})],Nl.prototype,"outStatisticFieldName",void 0),m([w({type:String,json:{read:{source:"statisticType",reader:IB.read},write:{target:"statisticType",writer:IB.write}}})],Nl.prototype,"statisticType",void 0),m([w({type:Object})],Nl.prototype,"statisticParameters",void 0),m([Pe("statisticParameters")],Nl.prototype,"writeStatisticParameters",null),Nl=tL=m([H("esri.rest.support.StatisticDefinition")],Nl);const Koe=Nl;var e4;const d$e=new gt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let at=e4=class extends be{static from(e){return h2(e4,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const i={};for(const r in e){const n=e[r];Array.isArray(n)?i[r]=n.map(o=>o instanceof Date?o.getTime():o):n instanceof Date?i[r]=n.getTime():i[r]=n}t.parameterValues=i}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new e4(he({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};at.MAX_MAX_RECORD_COUNT_FACTOR=5,m([w({json:{write:!0}})],at.prototype,"aggregateIds",void 0),m([w({type:Boolean,json:{write:!0}})],at.prototype,"cacheHint",void 0),m([w({type:Boolean,json:{default:!1,write:!0}})],at.prototype,"compactGeometryEnabled",void 0),m([w({json:{write:!0}})],at.prototype,"datumTransformation",void 0),m([St("datumTransformation")],at.prototype,"castDatumTransformation",null),m([w({type:Boolean,json:{default:!1,write:!0}})],at.prototype,"defaultSpatialReferenceEnabled",void 0),m([w({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],at.prototype,"distance",void 0),m([w({type:ru,json:{write:!0}})],at.prototype,"dynamicDataSource",void 0),m([w({type:String,json:{write:!0}})],at.prototype,"formatOf3DObjects",void 0),m([w({type:[Zoe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],at.prototype,"fullText",void 0),m([w({type:String,json:{write:!0}})],at.prototype,"gdbVersion",void 0),m([w({types:mm,json:{read:od,write:!0}})],at.prototype,"geometry",void 0),m([w({type:Number,json:{write:!0}})],at.prototype,"geometryPrecision",void 0),m([w({type:[String],json:{write:!0}})],at.prototype,"groupByFieldsForStatistics",void 0),m([w({type:String,json:{write:!0}})],at.prototype,"having",void 0),m([w({type:Date})],at.prototype,"historicMoment",void 0),m([Pe("historicMoment")],at.prototype,"writeHistoricMoment",null),m([w({type:Number,json:{write:!0}})],at.prototype,"maxAllowableOffset",void 0),m([w({type:Number,cast:e=>e<1?1:e>at.MAX_MAX_RECORD_COUNT_FACTOR?at.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],at.prototype,"maxRecordCountFactor",void 0),m([w({type:["xyFootprint"],json:{write:!0}})],at.prototype,"multipatchOption",void 0),m([w({type:Number,json:{read:{source:"resultRecordCount"}}})],at.prototype,"num",void 0),m([w({json:{write:!0}})],at.prototype,"objectIds",void 0),m([w({type:[String],json:{write:!0}})],at.prototype,"orderByFields",void 0),m([w({type:[String],json:{write:!0}})],at.prototype,"outFields",void 0),m([w({type:st,json:{name:"outSR",write:!0}})],at.prototype,"outSpatialReference",void 0),m([w({type:[Koe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],at.prototype,"outStatistics",void 0),m([w({json:{write:!0}})],at.prototype,"parameterValues",void 0),m([Pe("parameterValues")],at.prototype,"writeParameterValues",null),m([w({type:lt,json:{write:!0}})],at.prototype,"pixelSize",void 0),m([w({type:Joe,json:{write:!0}})],at.prototype,"quantizationParameters",void 0),m([w({type:[Object],json:{write:!0}})],at.prototype,"rangeValues",void 0),m([w({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],at.prototype,"relationParameter",void 0),m([w({type:String,json:{write:!0}})],at.prototype,"resultType",void 0),m([w({type:Boolean,json:{default:!1,write:!0}})],at.prototype,"returnCentroid",void 0),m([w({type:Boolean,json:{default:!1,write:!0}})],at.prototype,"returnDistinctValues",void 0),m([w({type:Boolean,json:{default:!0,write:!0}})],at.prototype,"returnExceededLimitFeatures",void 0),m([w({type:Boolean,json:{write:!0}})],at.prototype,"returnGeometry",void 0),m([w({type:Boolean,json:{default:!1,write:!0}})],at.prototype,"returnQueryGeometry",void 0),m([w({type:Boolean,json:{default:!1,write:!0}})],at.prototype,"returnM",void 0),m([w({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],at.prototype,"returnZ",void 0),m([w({type:st,json:{write:!0}})],at.prototype,"sourceSpatialReference",void 0),m([Ke(h$e,{ignoreUnknown:!1,name:"spatialRel"})],at.prototype,"spatialRelationship",void 0),m([w({type:Number,json:{read:{source:"resultOffset"}}})],at.prototype,"start",void 0),m([Pe("start"),Pe("num")],at.prototype,"writeStart",null),m([w({type:String,json:{write:!0}})],at.prototype,"sqlFormat",void 0),m([w({type:String,json:{write:!0}})],at.prototype,"text",void 0),m([w({type:wn,json:{write:!0}})],at.prototype,"timeExtent",void 0),m([w({type:Boolean,json:{default:!1,write:!0}})],at.prototype,"timeReferenceUnknownClient",void 0),m([Ke(d$e,{ignoreUnknown:!1}),w({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null&&this.distance>0}}}}})],at.prototype,"units",void 0),m([w({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],at.prototype,"where",void 0),m([Pe("where")],at.prototype,"writeWhere",null),at=e4=m([H("esri.rest.support.Query")],at);const ss=at;function B5(e){return!!(e!=null&&typeof e=="object"&&"createQuery"in e&&e.createQuery&&"on"in e&&e.on)}let oh=class extends Us.EventedAccessor{constructor(t){super(t),this._selectionMap=new sf,this._sources=new Oe,this._trashCan=[],this._layerEditHandles=new Oe,this._vizTaskId=0,this.showHighlight=!0}initialize(){this.addHandles([me(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),Lr(()=>this.sources,"change",i=>{const r=this._selectionMap;for(const n of i.removed)r.delete(n);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);const t=new Oe;this.view.when().then(()=>{this.view.map&&(this.view.map.allLayers.flatten(i=>"sublayers"in i&&i.sublayers?i.sublayers:null).forEach(i=>{(B5(i)&&!aEe(i)||s0(i))&&t.add(i)}),this.sources=t)})}destroy(){this._layerEditHandles.drain(tr)}get selections(){return Array.from(this._selectionMap.entries()).map(t=>{const[i,r]=t;return{layer:i,selection:[...r.selection]}})}get count(){let t=0;for(const i of this._selectionMap.values())t+=i.selection.length;return t}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(t){yf(t,this._sources)}async getSelectedFeatures(t,i={},r="layerView"){const{view:n,selections:o}=this,u=(t!==void 0?o.filter(f=>t.includes(f.layer)):o).filter(f=>f.selection.length>0).map(async f=>{const{layer:g,selection:b}=f,E=s0(g)?g.parent:g;if(E==null||!$B(E))return null;if(r==="layer")return MB(E,b,i);if(TB(E))return null;const I=await n.whenLayerView(E).catch(()=>null);return I?MB(I,b,i):null});return(await Promise.all(u)).filter(f=>f!=null)}updateSelection(t){const i=new Map;for(const[o,u]of this._selectionMap)i.set(o,[...u.selection]);let r=!1;const n=t.current.concat(t.added);for(const o of n){const u=o.sourceLayer,f=o.getObjectId();if(this.sources.includes(u)&&(B5(u)||s0(u))&&f!==null){const g=c2(i,u,()=>[]);g.includes(f)||(g.push(f),r=!0)}}for(const o of t.removed){const u=o.sourceLayer,f=o.getObjectId();if(this.sources.includes(u)&&(B5(u)||s0(u))&&f!==null){const g=i.get(u),b=g==null?void 0:g.indexOf(f);b!==void 0&&b>=0&&(g==null||g.splice(b,1),r=!0)}}if(r){const{_selectionMap:o,_trashCan:u}=this,f=[];for(const[g,b]of i){const E=o.get(g);E!==void 0&&u.push(E),o.set(g,{selection:b}),f.push({layer:g,selection:b,...pA(E!==void 0?E.selection:[],b)})}this._onSelectionChange(f)}}setSelection(t,i){this._setSelection(t,i)}getSelection(t){const i=this._selectionMap.get(t);return i==null?void 0:i.selection}appendToSelection(t,i){const r=this._selectionMap.get(t),n=r!==void 0?[...r.selection]:[];for(const o of i)n.includes(o)||n.push(o);this._setSelection(t,n)}removeFromSelection(t,i){const r=this._selectionMap.get(t);if(!r)return;const n=[];for(const o of r.selection)i.includes(o)||n.push(o);this._setSelection(t,n)}toggleInSelection(t,i){const r=this._selectionMap.get(t);if(!r||r.selection.length===0)return void this._setSelection(t,i);const n=new Set(r.selection),o=new Set(i),u=swe(n,o);this._setSelection(t,Array.from(u))}clear(){const t=this._selectionMap.values();this._trashCan.push(...t);const i=[];for(const[r,n]of this._selectionMap.entries())i.push({layer:r,added:[],removed:[...n.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(i)}_onSelectionChange(t){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:t})}_refreshVisualization(){var u;if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;){const f=this._trashCan.pop();(u=f==null?void 0:f.highlightHandle)==null||u.remove()}const{sources:t,view:i,_selectionMap:r,showHighlight:n}=this,o=this._vizTaskId;for(const f of t){const g=r.get(f),b=s0(f)?f.parent:f;if(b!=null&&$B(b)){if(TB(b))continue;i.whenLayerView(b).then(E=>{var I;(I=g==null?void 0:g.highlightHandle)==null||I.remove(),g!=null&&n&&o===this._vizTaskId&&"highlight"in E&&typeof E.highlight=="function"&&g.selection.length>0&&(g.highlightHandle=E.highlight(g.selection,"selection"))}).catch(()=>{var E;(E=g==null?void 0:g.highlightHandle)==null||E.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(tr);for(const t of this.sources){const i=s0(t)?t.parent:t;if(i!=null&&B5(i)){const r=i.on("edits",n=>{this._handleEditChanges(n,t)});this._layerEditHandles.push(r)}}}_handleEditChanges(t,i){if(t.deletedFeatures!==void 0&&t.deletedFeatures.length>0&&this._selectionMap.has(i)){const r=t.deletedFeatures.filter(n=>n.error==null).map(n=>n.objectId).filter(cr);this.removeFromSelection(i,r)}}_setSelection(t,i){if(!this.sources.includes(t))throw new Error(`Cannot set selection on layer ${t.title} because it is not in 'sources'`);const r=this._selectionMap.get(t);if(r===void 0||!f$e(r,{selection:i})){r!==void 0&&this._trashCan.push(r),this._selectionMap.set(t,{selection:[...i]});const n={layer:t,selection:[...i],...pA(r!==void 0?r.selection:[],i)};this._onSelectionChange([n])}}};m([w({readOnly:!0,nonNullable:!0})],oh.prototype,"selections",null),m([w({readOnly:!0,nonNullable:!0})],oh.prototype,"count",null),m([w({constructOnly:!0,nonNullable:!0})],oh.prototype,"view",void 0),m([w({readOnly:!0,nonNullable:!0})],oh.prototype,"hasSelection",null),m([w()],oh.prototype,"showHighlight",void 0),m([w()],oh.prototype,"sources",null),oh=m([H("esri.views.SelectionManager")],oh);const TB=e=>{var t;return s0(e)?((t=e.parent)==null?void 0:t.isTable)===!0:e.isTable},p$e=e=>e.layer!==void 0,$B=e=>(e==null?void 0:e.when)!==void 0,f$e=(e,t)=>{if(e==null&&t==null)return!0;if(e!=null&&t==null||e==null&&t!=null)return!1;if(e!=null&&t!=null&&e.selection!=null&&t.selection!=null){const i=[...e.selection],r=[...t.selection];if(i.length!==r.length)return!1;i.sort(),r.sort();for(let n=0;n<i.length;n++)if(i[n]!==r[n])return!1}return!0},MB=async(e,t,i={})=>{let r;if(p$e(e)){const n=e;r=n===void 0?null:await n.queryFeatures(new ss({...i,objectIds:t})).then(o=>({data:o,layer:e.layer}))}else{const n=e;r=n===void 0?null:await n.queryFeatures(new ss({...i,objectIds:t})).then(o=>({data:o,layer:n}))}return r},y$e=oh;let _b=class extends It(De){constructor(t){super(t),this.accentColor=new Ne([255,127,0]),this.textColor=new Ne([255,255,255])}};m([w({type:Ne,nonNullable:!0})],_b.prototype,"accentColor",void 0),m([w({type:Ne,nonNullable:!0})],_b.prototype,"textColor",void 0),_b=m([H("esri.views.Theme")],_b);const iL=_b;var CB;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(CB||(CB={}));const Yoe=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],Xoe={};function Qoe(e){return!!Xoe[e]}function m$e(e){for(const t of e)if(!Qoe(t))return!1;return!0}Yoe.forEach(e=>{Xoe[e]=!0});let g$e=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:i,priority:r},n)=>{var o;return(o=this.inputManager)==null?void 0:o.installHandlers(n,[i],r)})}disconnect(){this.inputManager&&this._handlers.forEach((t,i)=>{var r;return(r=this.inputManager)==null?void 0:r.uninstallHandlers(i)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,i,r,n){const o=Array.isArray(t)?t:t.split(",");if(!m$e(o))return o.some(Qoe)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let u,f;Array.isArray(i)?f=i:(u=i,f=[]),typeof r=="function"?u=r:n=r,n=n??Ii.DEFAULT;const g=this._createUniqueGroupName(),b=new v$e(this.view,o,f,u);this._handlers.set(g,{handler:b,priority:n});for(const E of o){const I=this._handlerCounts.get(E)||0;this._handlerCounts.set(E,I+1)}return this.inputManager&&this.inputManager.installHandlers(g,[b],n),Yt(()=>this._removeHandler(g,o))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,i){if(this._handlers.has(t)){this._handlers.delete(t);for(const r of i){const n=this._handlerCounts.get(r);n===void 0||(n===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,n-1))}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},v$e=class extends Sn{constructor(t,i,r,n){super(!0),this._latestDragStart=void 0,this.view=t;for(const o of i)switch(o){case"click":this.registerIncoming("click",r,u=>n(_$e(t,u)));break;case"double-click":this.registerIncoming("double-click",r,u=>n(S$e(t,u)));break;case"immediate-click":this.registerIncoming("immediate-click",r,u=>n(x$e(t,u)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,u=>n(E$e(t,u)));break;case"hold":this.registerIncoming("hold",r,u=>n(I$e(t,u)));break;case"drag":this.registerIncoming("drag",r,u=>{const f=this._wrapDrag(u);f&&n(f)});break;case"key-down":this.registerIncoming("key-down",r,u=>n(T$e(u)));break;case"key-up":this.registerIncoming("key-up",r,u=>n($$e(u)));break;case"pointer-down":this.registerIncoming("pointer-down",r,u=>n(gw(u,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,u=>n(gw(u,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,u=>n(gw(u,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,u=>n(M$e(u)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,u=>n(C$e(u)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,u=>n(gw(u,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,u=>n(gw(u,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,u=>{n(A$e(u))});break;case"focus":this.registerIncoming("focus",r,u=>{n(w$e(u))});break;case"blur":this.registerIncoming("blur",r,u=>{n(b$e(u))})}}_wrapDrag(t){const i=t.data,{x:r,y:n}=i.center,{action:o,pointerType:u,button:f}=i;if(o==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const g=i.pointer.native,b=i.buttons,{cancelable:E,timestamp:I}=t,M={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return o==="end"&&(this._latestDragStart=void 0),{type:"drag",action:o,x:r,y:n,origin:M,pointerType:u,button:f,buttons:b,radius:i.radius,angle:_ie(i.angle),native:g,timestamp:I,cancelable:E,stopPropagation:()=>t.stopPropagation(),async:k=>t.async(k),preventDefault:()=>t.preventDefault()}}};function w$e(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function b$e(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function _$e(e,t){const{pointerType:i,button:r,buttons:n,x:o,y:u,native:f,eventId:g}=t.data,{cancelable:b,timestamp:E}=t;return{type:"click",pointerType:i,button:r,buttons:n,x:o,y:u,native:f,timestamp:E,screenPoint:gn(o,u),mapPoint:$S(e,o,u),eventId:g,cancelable:b,stopPropagation:()=>t.stopPropagation(),async:I=>t.async(I),preventDefault:()=>t.preventDefault()}}function S$e(e,t){const{pointerType:i,button:r,buttons:n,x:o,y:u,native:f,eventId:g}=t.data,{cancelable:b,timestamp:E}=t;return{type:"double-click",pointerType:i,button:r,buttons:n,x:o,y:u,native:f,timestamp:E,mapPoint:$S(e,o,u),eventId:g,cancelable:b,stopPropagation:()=>t.stopPropagation(),async:I=>t.async(I),preventDefault:()=>t.preventDefault()}}function x$e(e,t){const{pointerType:i,button:r,buttons:n,x:o,y:u,native:f,eventId:g}=t.data,b=f.pointerId,{cancelable:E,timestamp:I}=t;return{type:"immediate-click",pointerId:b,pointerType:i,button:r,buttons:n,x:o,y:u,native:f,timestamp:I,mapPoint:$S(e,o,u),eventId:g,cancelable:E,stopPropagation:()=>t.stopPropagation(),async:M=>t.async(M),preventDefault:()=>t.preventDefault()}}function E$e(e,t){const{pointerType:i,button:r,buttons:n,x:o,y:u,native:f,eventId:g}=t.data,b=f.pointerId,{cancelable:E,timestamp:I}=t;return{type:"immediate-double-click",pointerId:b,pointerType:i,button:r,buttons:n,x:o,y:u,native:f,timestamp:I,mapPoint:$S(e,o,u),eventId:g,cancelable:E,stopPropagation:()=>t.stopPropagation(),async:M=>t.async(M),preventDefault:()=>t.preventDefault()}}function I$e(e,t){const{pointerType:i,button:r,buttons:n,x:o,y:u,native:f}=t.data,{cancelable:g,timestamp:b}=t;return{type:"hold",pointerType:i,button:r,buttons:n,x:o,y:u,native:f,timestamp:b,mapPoint:$S(e,o,u),cancelable:g,stopPropagation:()=>t.stopPropagation(),async:E=>t.async(E),preventDefault:()=>t.preventDefault()}}function $S(e,t,i){return e.toMap(gn(t,i),{exclude:[]})}function T$e(e){const{key:t,repeat:i,native:r}=e.data,{cancelable:n,timestamp:o}=e;return{type:"key-down",key:t,repeat:i,native:r,timestamp:o,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:u=>e.async(u),preventDefault:()=>e.preventDefault()}}function $$e(e){const{key:t,native:i}=e.data,{cancelable:r,timestamp:n}=e;return{type:"key-up",key:t,native:i,timestamp:n,cancelable:r,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}function gw(e,t){const{x:i,y:r,button:n,buttons:o,native:u,eventId:f}=e.data,g=u.pointerId,b=u.pointerType,{cancelable:E,timestamp:I}=e;return{type:t,x:i,y:r,pointerId:g,pointerType:b,button:n,buttons:o,native:u,timestamp:I,eventId:f,cancelable:E,stopPropagation:()=>e.stopPropagation(),async:M=>e.async(M),preventDefault:()=>e.preventDefault()}}function M$e(e){const{x:t,y:i,buttons:r,native:n,eventId:o}=e.data.currentEvent,{button:u}=e.data.startEvent,f=e.data.startEvent.native.pointerId,g=e.data.startEvent.native.pointerType,b=e.data.action,E={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:I,timestamp:M}=e;return{type:"pointer-drag",x:t,y:i,pointerId:f,pointerType:g,button:u,buttons:r,action:b,origin:E,native:n,timestamp:M,eventId:o,cancelable:I,stopPropagation:()=>e.stopPropagation(),async:k=>e.async(k),preventDefault:()=>e.preventDefault()}}function C$e(e){const{cancelable:t,data:i,timestamp:r}=e,{x:n,y:o,deltaY:u,native:f}=i;return{type:"mouse-wheel",x:n,y:o,deltaY:u,native:f,timestamp:r,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:g=>e.async(g),preventDefault:()=>e.preventDefault()}}function A$e(e){const{action:t,state:i,device:r}=e.data,{cancelable:n,timestamp:o}=e,{buttons:u,axes:f}=i;return{type:"gamepad",device:r,timestamp:o,action:t,buttons:u,axes:f,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:g=>e.async(g),preventDefault:()=>e.preventDefault()}}var I_,AB,kB;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(I_||(I_={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(AB||(AB={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(kB||(kB={}));function k$e(e){return[e.on("before-add",t=>{const i=t.item;if(i==null||e.includes(i))return Se.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();i.onAdd()}),e.on("after-remove",t=>{const i=t.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function rL(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(I_.USER)&&e.getEditableFlag(I_.MANAGER)}function Ha(e){return gn(e.x,e.y)}function eae(e,t){var r;const i=(r=e instanceof HTMLElement?e:e.surface)==null?void 0:r.getBoundingClientRect();return i?gn(t.clientX-i.left,t.clientY-i.top):gn(0,0)}function tae(e,t){return t instanceof Event?eae(e,t):Ha(t)}function iae(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let L$e=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,i){const r=()=>t.stopPropagation();switch(t.type){case"pointer-move":OB(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:t.action==="start"?this._externallyDragging=!0:t.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(r(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!RB(t))break;const n=Ha(t),o=Pm(n,t.pointerType,i.forEachTool);if(o==null)break;const u=o.manipulator,f=o.tool;u==null||f==null||!u.interactive||u.grabbable&&u.grabbableForEvent(t)||!u.grabbing||u.dragging||this._releaseManipulatorBeforeDragging(u,t,i),u!=null&&f!=null&&u.interactive&&u.grabbable&&u.grabbableForEvent(t)&&!u.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:u,tool:f,start:n,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(o.tool)),u.grabbing=!0,u.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:n}),r());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,i);break;case"pointer-drag":{if(!RB(t))break;const n=this._grabbedManipulators.get(t.pointerId),o=n==null?void 0:n.manipulator,u=n==null?void 0:n.tool;if(o==null||u==null)break;const f=Ha(t);f.x=oo(f.x,0,i.view.width),f.y=oo(f.y,0,i.view.height);const g=n.start,b=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(o.dragging=!0,b?o.events.emit("drag",{action:"update",start:g,screenPoint:f}):o.events.emit("drag",{action:"start",start:g,screenPoint:f,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:u,manipulator:o,start:g}));break;case"end":o.dragging=!1,b&&o.events.emit("drag",{action:"end",start:g,screenPoint:f}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,i)}r();break}case"immediate-click":{const n=Ha(t),o=Pm(n,t.pointerType,i.forEachTool);if(O$e(t)||i.forEachTool(b=>{if((o==null||o.tool!==b||b.automaticManipulatorSelection)&&b.manipulators){let E=!1;b.manipulators.forEach(({manipulator:I})=>{I.selected&&(I.selected=!1,E=!0)}),E&&b.onManipulatorSelectionChanged&&b.onManipulatorSelectionChanged()}}),o==null)break;const{manipulator:u,tool:f}=o;if(!u.interactive)break;u.selectable&&f.automaticManipulatorSelection&&(u.selected=!u.selected,f.onManipulatorSelectionChanged&&f.onManipulatorSelectionChanged());const g=t.native.shiftKey;u.events.emit("immediate-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:g,stopPropagation:r}),FM(u,r);break}case"click":{const n=Ha(t),o=Pm(n,t.pointerType,i.forEachTool),u=o==null?void 0:o.manipulator;if(u==null||!u.interactive)break;const f=t.native.shiftKey;u.events.emit(t.type,{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:f}),r();break}case"double-click":{const n=Ha(t),o=Pm(n,t.pointerType,i.forEachTool),u=o!=null?o.manipulator:null;if(u==null||!u.interactive)break;const f=t.native.shiftKey;u.events.emit("double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:f,stopPropagation:r}),FM(u,r);break}case"immediate-double-click":{const n=Ha(t),o=Pm(n,t.pointerType,i.forEachTool),u=o!=null?o.manipulator:null;if(u==null||!u.interactive)break;const f=t.native.shiftKey;u.events.emit("immediate-double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:f,stopPropagation:r}),t.pointerType==="mouse"&&FM(u,r);break}}this._onFocusChange(i.forEachTool)}_releaseManipulatorBeforeDragging(t,i,r){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:Ha(i)}),this._grabbedManipulators.forEach(({manipulator:n},o)=>{n===t&&this._grabbedManipulators.delete(o)}),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(t,i){var n;const r=(n=this._grabbedManipulators.get(t.pointerId))==null?void 0:n.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:Ha(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorRelease(i.setActiveTool))}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=LB(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=LB(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:n})=>{i.add(n)}),this._hoveredManipulators.forEach(({tool:n})=>{r.add(n)}),t(n=>{n.hasGrabbedManipulators=i.has(n),n.hasHoveredManipulators=r.has(n);const o=this._grabbedManipulators.values(),u=$2e(o,({tool:f})=>f===n);n.firstGrabbedManipulator=u!=null?u.manipulator:null})}clearPointers(t,{forEachTool:i,setActiveTool:r},n=!0,o){const u=(f,g)=>f===t&&(o==null||o===g);this._grabbedManipulators.forEach(({tool:f,manipulator:g,pointerType:b},E)=>{u(f,g)&&(this._grabbedManipulators.delete(E),g.grabbing=!1,g.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:b}))}),this._draggedManipulators.forEach(({tool:f,manipulator:g},b)=>{u(f,g)&&(this._draggedManipulators.delete(b),g.dragging=!1,g.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:f,manipulator:g},b)=>{u(f,g)&&(this._hoveredManipulators.delete(b),g.hovering=!1)}),this._afterManipulatorRelease(r),this._onFocusChange(i)}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(gn(i.x,i.y),r,i.pointerType,t)})}handleHoverEvent(t,i){const r=t.type;r!=="pointer-up"&&r!=="immediate-click"&&r!=="pointer-move"||!OB(t.pointerType)||(r!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(t.pointerId):this._updateHoveredStateForPointerAtScreenPosition(Ha(t),t.pointerId,t.pointerType,i))}_updateHoveredStateForPointerAtScreenPosition(t,i,r,n){var f;let o=Pm(t,r,n);const u=(f=this._hoveredManipulators.get(i))==null?void 0:f.manipulator;o==null||o.manipulator.interactive||(o=null),o!=null&&u===o.manipulator||(u!=null&&(u.hovering=!1),o!=null?(o.manipulator.hovering=!0,this._hoveredManipulators.set(i,o)):this._hoveredManipulators.delete(i),this._onFocusChange(n))}_afterManipulatorRelease(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(t){this._hoveredManipulators.forEach(({manipulator:i},r)=>{t===r&&(this._hoveredManipulators.delete(t),i.hovering=!1)})}};function LB(e){for(const{manipulator:t}of e.values())if(t!=null&&t.interactive){if(t.grabbing&&t.grabCursor)return t.grabCursor;if(t.cursor)return t.cursor}return null}function Pm(e,t,i){let r=null;return i(n=>{if(n.manipulators==null||!rL(n))return!1;const o=n.manipulators.intersect(e,t);return o!=null&&(r={tool:n,manipulator:o},!0)}),r}function OB(e){return e==="mouse"}function RB(e){return e.pointerType!=="mouse"||e.button===0}function O$e(e){return!!e.native.shiftKey}function FM(e,t){e!=null&&e.consumesClicks&&t()}const PB="attached",DM="tools",R$e=1e3;let Bu=class extends De{constructor(t){super(t),this._updatingHandles=new Ty,this._clock=m2,this._manipulatorState=new L$e,this.tools=new Oe,this.cursor=null,this._interacting=!1,this._interactingTimeout=R$e,this._interactingTimeoutHandle=null,this._forEachTool=i=>{for(const r of this.tools.items)if(i(r))return}}initialize(){this.addHandles([this.view.on(Yoe,t=>{this._handleInputEvent(t)},Ii.TOOL),...k$e(this.tools),this.tools.on("before-add",({item:t})=>{this._updateToolEditableFlag(t)}),this.tools.on("before-remove",({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(t=>t.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(t!=null&&!this.view.ready)return void Se.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const i=this.activeTool;this._set("activeTool",t),i!=null&&i.deactivate(),t!=null&&t.activate(),this._removeIncompleteTools(t);for(const r of this.tools){this._updateToolEditableFlag(r);const n=rL(r);this.activeTool!=null&&n||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!n)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(t=>t.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=tr(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){var t;this.view.type==="3d"?this.addHandles([me(()=>{const{state:i}=this.view;return"camera"in i&&i.camera},()=>this._forEachManipulator(i=>i.onViewChange())),(t=this.view.elevationProvider)==null?void 0:t.on("elevation-change",i=>this._forEachManipulator(r=>r.onElevationChange(i)))],PB):this.addHandles(me(()=>this.view.extent,()=>this._forEachManipulator(i=>i.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(PB),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:r})=>t(r,i))})}_handleInputEvent(t){let i=!1;const r={...t,stopPropagation:()=>{i=!0,t.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool(n=>{!i&&n.visible&&n.handleInputEvent(r)}),!i&&t.type==="key-down"&&t.key==="Escape"&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor(),t.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(DM),this._forEachTool(t=>{if(t instanceof De){const i=me(()=>[t.cursor,t.visible,t.editable],()=>{rL(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(i,DM)}t.manipulators&&this.addHandles([t.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),t.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],DM)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){var i;(i=t.setEditableFlag)==null||i.call(t,I_.MANAGER,this.activeTool==null||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;t==null&&this._forEachTool(i=>!(i.cursor==null||!i.visible)&&(t=i.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter(i=>(t==null||i!==t)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){}};m([w({constructOnly:!0,nonNullable:!0})],Bu.prototype,"view",void 0),m([w({value:null})],Bu.prototype,"activeTool",null),m([w({readOnly:!0,type:Oe})],Bu.prototype,"tools",void 0),m([w({readOnly:!0})],Bu.prototype,"cursor",void 0),m([w({readOnly:!0})],Bu.prototype,"updating",null),m([w()],Bu.prototype,"_interacting",void 0),m([w({readOnly:!0})],Bu.prototype,"interacting",null),Bu=m([H("esri.views.ToolViewManager")],Bu);let S1=class extends De{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",t.mapping==="standard"?this._detectedDeviceType="standard":P$e.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){const t=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return N$e[this.deviceType]}};m([w({nonNullable:!0,readOnly:!0})],S1.prototype,"nativeIndex",void 0),m([w({type:String,readOnly:!0})],S1.prototype,"deviceType",null),m([w({type:Number,readOnly:!0})],S1.prototype,"axisThreshold",null),S1=m([H("esri.views.input.gamepad.GamepadInputDevice")],S1);const FF=S1,P$e=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),N$e={standard:.15,spacemouse:.025,unknown:0};let Sb=class extends De{constructor(...t){super(...t),this.devices=new Oe,this.enabledFocusMode="document"}};m([w({type:Oe.ofType(FF),readOnly:!0})],Sb.prototype,"devices",void 0),m([w({type:["document","view","none"]})],Sb.prototype,"enabledFocusMode",void 0),Sb=m([H("esri.views.input.gamepad.GamepadSettings")],Sb);const F$e=Sb;let t4=class extends De{constructor(){super(...arguments),this.gamepad=new F$e}};m([w({readOnly:!0})],t4.prototype,"gamepad",void 0),t4=m([H("esri.views.input.Input")],t4);const D$e=t4,DF=()=>Kt.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;let Jd=class extends De{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};m([w({type:Boolean,nonNullable:!0})],Jd.prototype,"enabled",void 0),m([w({type:FF})],Jd.prototype,"device",void 0),m([w({type:["pan","zoom"],nonNullable:!0})],Jd.prototype,"mode",void 0),m([w({type:["forward-down","forward-up"],nonNullable:!0})],Jd.prototype,"tiltDirection",void 0),m([w({type:Number,nonNullable:!0})],Jd.prototype,"velocityFactor",void 0),Jd=m([H("esri.views.navigation.gamepad.GamepadSettings")],Jd);const rae=Jd;let x0=class extends De{constructor(t){super(t),this.browserTouchPanEnabled=!0,this.gamepad=new rae,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!DF()}};m([w({type:Boolean})],x0.prototype,"browserTouchPanEnabled",void 0),m([w({type:rae,nonNullable:!0})],x0.prototype,"gamepad",void 0),m([w({type:Boolean})],x0.prototype,"momentumEnabled",void 0),m([w({type:Boolean})],x0.prototype,"mouseWheelZoomEnabled",void 0),x0=m([H("esri.views.navigation.Navigation")],x0);const nae=x0,sae={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},oae=Object.values(sae),aae=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${oae.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),j$e=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${oae.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),z$e=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function Wst(e){return aae.test(e)}function gf(e){if(e==null)return null;const t=_r(e),i=(t==null?void 0:t.path.match(aae))||(t==null?void 0:t.path.match(j$e));if(!i)return null;const[,r,n,o,u]=i,f=n.indexOf("/");return{title:jF(f!==-1?n.slice(f+1):n),serverType:sae[o.toLowerCase()],sublayer:u!=null&&u!==""?parseInt(u,10):null,url:{path:r}}}function V$e(e){const t=_r(e).path.match(z$e);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function jF(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function U$e(e,t){const i=[];if(e){const r=gf(e);r!=null&&r.title&&i.push(r.title)}if(t){const r=jF(t);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function lae(e){let t=ol(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")))}function G$e(e,t){return e&&Ate(kte(e,t))}function B$e(e){let{url:t}=e;if(!t)return{url:t};t=kte(t,e.logger);const i=_r(t),r=gf(i.path);let n;if(r!=null)r.sublayer!=null&&e.layer.layerId==null&&(n=r.sublayer),t=r.url.path;else if(e.nonStandardUrlAllowed){const o=V$e(i.path);o!=null&&(t=o.serviceUrl,n=o.sublayerId)}return{url:Ate(t),layerId:n}}function q$e(e,t,i,r,n){em(t,r,"url",n),r.url&&e.layerId!=null&&(r.url=By(r.url,i,e.layerId.toString()))}function Zst(e){if(!e)return!1;const t=e.toLowerCase(),i=t.includes("/services/"),r=t.includes("/mapserver/wmsserver"),n=t.includes("/imageserver/wmsserver"),o=t.includes("/wmsserver");return i&&(r||n||o)}function Jst(e){var r;if(!e)return!1;const t=new tf(Co(e)),i=(r=t.authority)==null?void 0:r.toLowerCase();return i==="server.arcgisonline.com"||i==="services.arcgisonline.com"}function Kst(e,t,i){const r=uae(e),n=t,o=H$e(r,n,i);if(r){const u=_S.deriveUnitFromSR(r,e.spatialReference).heightUnit;if(!i&&u!==r.heightUnit){const f=new ne("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${u})`,{horizontalUnit:u});return new ne("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:f})}}if(!W$e(e)||o===Eo.Unsupported)return new ne("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(o){case Eo.Units:{const u=(r==null?void 0:r.heightUnit)||"unknown",f=(n==null?void 0:n.heightUnit)||"unknown",g=new ne("layerview:incompatible-height-unit",`The vertical units of the layer (${u}) must match the vertical units of the scene (${f})`,{layerUnit:u,sceneUnit:f});return new ne("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:g})}case Eo.HeightModel:{const u=(r==null?void 0:r.heightModel)||"unknown",f=(n==null?void 0:n.heightModel)||"unknown",g=new ne("layerview:incompatible-height-model",`The height model of the layer (${u}) must match the height model of the scene (${f})`,{layerHeightModel:u,sceneHeightModel:f});return new ne("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:g})}case Eo.CRS:{const u=(r==null?void 0:r.vertCRS)||"unknown",f=(n==null?void 0:n.vertCRS)||"unknown",g=new ne("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${u}) must match the vertical datum of the scene (${f})`,{layerDatum:u,sceneDatum:f});return new ne("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:g})}}return null}function H$e(e,t,i){if(!NB(e)||!NB(t))return Eo.Unsupported;if(e==null||t==null)return Eo.Ok;if(!i&&e.heightUnit!==t.heightUnit)return Eo.Units;if(e.heightModel!==t.heightModel)return Eo.HeightModel;switch(e.heightModel){case"gravity-related-height":return Eo.Ok;case"ellipsoidal":return e.vertCRS===t.vertCRS?Eo.Ok:Eo.CRS;default:return Eo.Unsupported}}var Eo;function NB(e){return e==null||e.heightModel!=null&&e.heightUnit!=null}function W$e(e){return"heightModelInfo"in e&&e.heightModelInfo!=null||e.spatialReference!=null||!dae(e)}function uae(e){var r;if(e.type==="integrated-mesh-3dtiles")return null;const t=e.url?gf(e.url):void 0;return!(((r=e.spatialReference)==null?void 0:r.vcsWkid)==null&&t!=null&&t.serverType==="ImageServer")&&cae(e)&&e.heightModelInfo?e.heightModelInfo:dae(e)?_S.deriveUnitFromSR(J$e,e.spatialReference):null}function cae(e){return"heightModelInfo"in e}function hae(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function dae(e){return hae(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):pae(e)}function Z$e(e){return e.layers!=null||pae(e)||hae(e)||cae(e)}function pae(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"focusArea":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(Eo||(Eo={}));const J$e=new _S({heightModel:"gravity-related-height"});var SI;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(SI||(SI={}));let nL,jM=null;async function K$e(e){jM||(jM=ce(()=>import("./geometryServiceUtils-CfUYqhL3.js"),[],import.meta.url).then(t=>nL=t)),await jM,Li(e)}async function fae(e,t,i,r){if(!e)return null;const n=e.spatialReference;return Dc()||Sa(n,t)?dl(e,t):nL?nL.projectGeometry(e,t,i,r):(await Promise.race([K$e(r),Oc(r)]),fae(e,t,i,r))}let Mi=class extends De{constructor(t){super(t),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=Ec(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var r,n,o,u;const t=(r=this.map)==null?void 0:r.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:t==null?void 0:t.basemap,layers:(n=t==null?void 0:t.basemap)==null?void 0:n.baseLayers},{layers:t==null?void 0:t.layers},{parent:t==null?void 0:t.ground,layers:(o=t==null?void 0:t.ground)==null?void 0:o.layers},{parent:t==null?void 0:t.basemap,layers:(u=t==null?void 0:t.basemap)==null?void 0:u.referenceLayers}),i}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let t;if(this._collectLayers(this.mapCollections,r=>{const n=this._getSupportedSpatialReferences(r);if(n.length>0){const o=this._narrowDownSpatialReferenceCandidates(t,n);o!=null&&(t=o)}return(t==null?void 0:t.length)===1})&&(t==null?void 0:t.length)!==1)return{updating:!0};const i=this._pickSpatialReferenceCandidate(t);return{spatialReference:(i==null?void 0:i.spatialReference)??null,viewingMode:(i==null?void 0:i.viewingMode)??null,updating:!1}}get _tileInfoTask(){var o,u;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const t=(o=this.map)==null?void 0:o.call(this),i=this.spatialReference;if(!i)return{updating:this._spatialReferenceTask.updating};let r;const n=this._collectLayers([{parent:t==null?void 0:t.basemap,layers:(u=t==null?void 0:t.basemap)==null?void 0:u.baseLayers},{layers:t==null?void 0:t.layers}],f=>{var g;return!(!("tileInfo"in f)||!((g=f.tileInfo)!=null&&g.spatialReference.equals(i)))&&(r=f,!0)},f=>"tileInfo"in f);return r?{tileInfo:r.tileInfo,updating:!1}:{updating:n}}get _heightModelInfoTask(){var r;if(!this.required.heightModelInfo||this.suspended&&((r=this._get("_heightModelInfoTask"))!=null&&r.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};let t={};const i=this._collectLayers(this.mapCollections,n=>{var u,f;const o=uae(n);return!!o&&(t={heightModelInfo:o,vcsWkid:(u=n.spatialReference)==null?void 0:u.vcsWkid,latestVcsWkid:(f=n.spatialReference)==null?void 0:f.latestVcsWkid},!0)},n=>Z$e(n));return{...t,updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=[],i=this._collectLayers(this.mapCollections,r=>{const n="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),o=this.requiresExtentInSpatialReference?null:n[0],u=n.find(f=>f.spatialReference.equals(this.spatialReference))??o;if(u)return t.push({extent:u,layer:r}),!0;if(this._getSupportedSpatialReferences(r).length>0)for(const f of n)t.push({extent:f,layer:r});return!1});return{candidates:t,updating:i}}get _extentTask(){const{candidates:t,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(t==null||t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(t),n=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=Ec(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:n.clone(),task:pS(async o=>{try{const u=await fae(r.extent,n,"portalItem"in r.layer?r.layer.portalItem:void 0,o);this._projectExtentTask={...this._projectExtentTask,task:null,output:u}}catch{if(va(o))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,i){if(t==null)return i;const r=new Array;for(const n of t)for(const o of i){if(!n.spatialReference.equals(o.spatialReference))continue;const u=X$e(n.viewingMode,o.viewingMode);if(u!==!1){r.push({spatialReference:n.spatialReference,viewingMode:u});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(t){const i=this.defaultSpatialReference;return t==null||t.length<1?i?{spatialReference:i,viewingMode:null}:null:(i!=null&&t.length>1&&t.some(({spatialReference:r})=>r.equals(i))&&(t=t.filter(({spatialReference:r})=>r.equals(i))),t.length>1&&t.some(({viewingMode:r})=>r!==SI.Local)&&(t=t.filter(({viewingMode:r})=>r!==SI.Local)),t[0])}_getSupportedSpatialReferences(t){const i="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const n of i){const o=this.getSpatialReferenceSupport(n,t);if(o!=null){const u=o.constraints??[{spatialReference:n,viewingMode:null}];for(const{spatialReference:f,viewingMode:g}of u)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!f.equals(this.userSpatialReference)||r.push({spatialReference:f,viewingMode:g})}}return r}_pickExtentCandidate(t){const i=this.spatialReference;return t.find(({extent:r})=>i.equals(r.spatialReference))||t[0]}_collectLayers(t,i,r=()=>!0){var o;if(this._loadMaybe((o=this.map)==null?void 0:o.call(this))!=="loaded")return!0;const n=new Y$e(r,i);for(const u of t)if(this._collectCollection(u,n),n.done||n.preloading===this.sourcePreloadCount)break;return n.updating}_collectCollection(t,i){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of t.layers)if(i.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":if(i.updating||(i.done=i.pushLayer(r)),i.done||i.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.done||i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&t.loadStatus!=null?t.loadStatus==="not-loaded"?(t.load().catch(i=>{Or(i)}),"loading"):t.loadStatus:"loaded"}};m([w()],Mi.prototype,"required",void 0),m([w({constructOnly:!0})],Mi.prototype,"map",void 0),m([w({constructOnly:!0})],Mi.prototype,"getSpatialReferenceSupport",void 0),m([w()],Mi.prototype,"defaultSpatialReference",void 0),m([w()],Mi.prototype,"userSpatialReference",void 0),m([w()],Mi.prototype,"sourcePreloadCount",void 0),m([w()],Mi.prototype,"priorityCollection",void 0),m([w()],Mi.prototype,"requiresExtentInSpatialReference",void 0),m([w()],Mi.prototype,"suspended",void 0),m([w({readOnly:!0})],Mi.prototype,"ready",null),m([w({readOnly:!0})],Mi.prototype,"heightModelInfoReady",null),m([w({readOnly:!0})],Mi.prototype,"spatialReference",null),m([w({readOnly:!0})],Mi.prototype,"extent",null),m([w({readOnly:!0})],Mi.prototype,"heightModelInfo",null),m([w({readOnly:!0})],Mi.prototype,"vcsWkid",null),m([w({readOnly:!0})],Mi.prototype,"latestVcsWkid",null),m([w({readOnly:!0})],Mi.prototype,"viewingMode",null),m([w({readOnly:!0})],Mi.prototype,"tileInfo",null),m([w({readOnly:!0})],Mi.prototype,"mapCollections",null),m([w({readOnly:!0})],Mi.prototype,"_spatialReferenceTask",null),m([w({readOnly:!0})],Mi.prototype,"_tileInfoTask",null),m([w({readOnly:!0})],Mi.prototype,"_heightModelInfoTask",null),m([w({readOnly:!0})],Mi.prototype,"_extentCandidatesTask",null),m([w()],Mi.prototype,"_extentTask",null),m([w()],Mi.prototype,"_projectExtentTask",void 0),Mi=m([H("esri.views.support.DefaultsFromMap")],Mi);let Y$e=class{constructor(t,i){this.layerFilter=t,this.pushLayer=i,this.preloading=-1,this.updating=!1,this.done=!1}};function X$e(e,t){return e!=null?t!=null?e===t&&e:e:t}var xb;let it=xb=class extends Us.EventedMixin(wS(De)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new y2,this.updatingHandles=new Ty,this.allLayerViews=new y_({getCollections:()=>{var t,i,r;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:eMe}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new My,this.analyses=new wI,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Oe,this.magnifier=new Boe,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new D$e,this.navigation=new nae,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new g$e(this),this.persistableViewModels=new Oe,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(me(()=>this.preconditionsReady,t=>{var r,n;const i=this.ready;if(t?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,xb.views.add(this)):(this._lockedSpatialReference=null,xb.views.remove(this)),this.notifyChange("spatialReference"),!t&&i)(r=this.toolViewManager)==null||r.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(n=this.layerViewManager)==null||n.clear(),this._teardown();else if(t&&!i){try{this._startup()}catch(o){return void queueMicrotask(()=>{this.fatalError=new ne("startup-error",null,o)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},hl))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,cl(()=>this.ready)))),this.basemapView=new t$e({view:this}),this.layerViewManager=new s$e({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new Bu({view:this}),this._setupSpatialReferenceLogger(),this.selectionManager=new y$e({view:this}),this.addHandles([me(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},Ln),me(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},hl),me(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},Ln)])}_setupSpatialReferenceLogger(){let e=null;this.addHandles([me(()=>{var t;return(t=this.defaultsFromMap)==null?void 0:t.ready},t=>{var r;const i=((r=this.map)==null?void 0:r.allLayers.length)>0;if(t&&!this.spatialReference&&i){if(e!=null)return;const n=Yt(()=>e=Ec(e));e=pS(async o=>{try{await ym(this.spatialReferenceWarningDelay,null,o)}catch{return}finally{e=null}Se.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.addHandles(n,"spatial-reference-logger-task")}else this.removeHandles("spatial-reference-logger-task")},{sync:!0})])}destroy(){var e,t;this.destroyed||(xb.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Jt(this.graphics),this.analyses=Jt(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Jt(this.analysisViewManager),this.toolViewManager=Jt(this.toolViewManager),this.layerViewManager=Jt(this.layerViewManager),this.selectionManager=Jt(this.selectionManager),this.basemapView=Jt(this.basemapView),(e=this.groundView)==null||e.destroy(),(t=this.layerViews)==null||t.forEach(i=>i.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=Jt(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return Se.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Mi({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,t)=>this.getSpatialReferenceSupport(e,t),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||pl.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(Se.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),pl.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get spatialReference(){var t,i;const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&((i=(t=this.defaultsFromMap)==null?void 0:t.required)!=null&&i.heightModelInfo)){const r=e.clone();return r.vcsWkid=this.defaultsFromMap.vcsWkid,r.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,r}return e}set spatialReference(e){const t=!pr(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??ba}set timeZone(e){this._userTimeZone=e,U5e(e)||Se.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){var e;return((e=this.toolViewManager)==null?void 0:e.cursor)??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new iL}whenLayerView(e){var t;return((t=this.layerViewManager)==null?void 0:t.whenLayerView(e))??Promise.reject()}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(e){throw new ne("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,t){return this.isResolved()&&!this.ready&&Se.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(rn(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};it.views=new Oe,m([w()],it.prototype,"_userSpatialReference",void 0),m([w()],it.prototype,"activeTool",null),m([w({readOnly:!0})],it.prototype,"allLayerViews",void 0),m([w()],it.prototype,"groundView",void 0),m([w()],it.prototype,"animation",null),m([w()],it.prototype,"basemapView",void 0),m([w()],it.prototype,"center",null),m([w()],it.prototype,"defaultsFromMapSettings",null),m([w()],it.prototype,"defaultsFromMap",null),m([w()],it.prototype,"fatalError",void 0),m([w({type:Ht})],it.prototype,"extent",null),m([w(R8(My,"graphics"))],it.prototype,"graphics",void 0),m([w(R8(wI,"analyses"))],it.prototype,"analyses",void 0),m([w({readOnly:!0,type:_S})],it.prototype,"heightModelInfo",null),m([w({readOnly:!0})],it.prototype,"interacting",null),m([w({readOnly:!0})],it.prototype,"navigating",null),m([w({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],it.prototype,"preconditionsReady",null),m([w({readOnly:!0})],it.prototype,"typeSpecificPreconditionsReady",void 0),m([w({type:Oe,readOnly:!0})],it.prototype,"layerViews",void 0),m([w()],it.prototype,"resolution",null),m([w({type:Boe})],it.prototype,"magnifier",void 0),m([w({value:null,type:Dse})],it.prototype,"map",null),m([w()],it.prototype,"padding",void 0),m([w({readOnly:!0})],it.prototype,"ready",void 0),m([w({type:st})],it.prototype,"spatialReference",null),m([w()],it.prototype,"spatialReferenceWarningDelay",void 0),m([w()],it.prototype,"stationary",null),m([w({readOnly:!0})],it.prototype,"supportsGround",void 0),m([w({type:wn})],it.prototype,"timeExtent",null),m([w({type:String,nonNullable:!0})],it.prototype,"timeZone",null),m([w()],it.prototype,"tools",null),m([w()],it.prototype,"toolViewManager",void 0),m([w({readOnly:!0})],it.prototype,"type",void 0),m([w({type:Number})],it.prototype,"scale",void 0),m([w({readOnly:!0})],it.prototype,"updating",void 0),m([w({readOnly:!0})],it.prototype,"initialExtentRequired",void 0),m([w({readOnly:!0})],it.prototype,"initialExtent",null),m([w()],it.prototype,"cursor",null),m([w({readOnly:!0})],it.prototype,"input",void 0),m([w({type:nae,nonNullable:!0})],it.prototype,"navigation",void 0),m([w()],it.prototype,"layerViewManager",void 0),m([w()],it.prototype,"analysisViewManager",void 0),m([w()],it.prototype,"selectionManager",void 0),m([w()],it.prototype,"width",void 0),m([w()],it.prototype,"height",void 0),m([w({readOnly:!0})],it.prototype,"resizing",void 0),m([w({value:null,readOnly:!0})],it.prototype,"size",null),m([w({readOnly:!0})],it.prototype,"suspended",void 0),m([w({readOnly:!0})],it.prototype,"viewEvents",void 0),m([w({readOnly:!0})],it.prototype,"persistableViewModels",void 0),m([w()],it.prototype,"_isValid",void 0),m([w()],it.prototype,"_readyCycleForced",void 0),m([w()],it.prototype,"_lockedSpatialReference",void 0),m([w()],it.prototype,"_userTimeZone",void 0),m([w()],it.prototype,"_lockedTimeZone",void 0),m([w()],it.prototype,"_userTimeExtent",void 0),m([w()],it.prototype,"_lockedTimeExtent",void 0),m([w({type:iL})],it.prototype,"theme",void 0),m([w({readOnly:!0,type:iL})],it.prototype,"effectiveTheme",null),it=xb=m([H("esri.views.View")],it);const zM=globalThis.$arcgis;zM&&!zM.views&&Object.defineProperty(zM,"views",{configurable:!1,enumerable:!0,writable:!1,value:it.views});const Q$e=it;function eMe(e){return e.layerViews}function qt(){return[0,0]}function tMe(e){return[e[0],e[1]]}function Xh(e,t){return[e,t]}function iMe(e,t=qt()){const i=Math.min(2,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function rMe(e,t){return new Float64Array(e,t,2)}function yae(){return qt()}function mae(){return Xh(1,1)}function gae(){return Xh(1,0)}function vae(){return Xh(0,1)}const wae=yae(),nMe=mae(),sMe=gae(),bae=vae();Object.freeze(Object.defineProperty({__proto__:null,ONES:nMe,UNIT_X:sMe,UNIT_Y:bae,ZEROS:wae,clone:tMe,create:qt,createView:rMe,fromArray:iMe,fromValues:Xh,ones:mae,unitX:gae,unitY:vae,zeros:yae},Symbol.toStringTag,{value:"Module"}));let Kd=class extends yI{constructor(t){super(t),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=wa(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(t=this._resolver)==null||t.reject(new ne("ViewAnimation stopped")))}finish(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(t=this._resolver)==null||t.resolve())}update(t,i){i||(i=Fc(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",i)}};m([w({readOnly:!0})],Kd.prototype,"done",null),m([w({readOnly:!0,type:String})],Kd.prototype,"state",void 0),m([w()],Kd.prototype,"target",void 0),Kd=m([H("esri.views.ViewAnimation")],Kd),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Kd||(Kd={}));const sL=Kd;function pv(e,t){return e[0]=t[0],e[1]=t[1],e}function Qr(e,t,i){return e[0]=t,e[1]=i,e}function zF(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function nn(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function _ae(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function Sae(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function oMe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function aMe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function lMe(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function uMe(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function cMe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function O2(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function gu(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e}function MS(e,t){const i=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(i*i+r*r)}function Hv(e,t){const i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function Wv(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function ld(e){const t=e[0],i=e[1];return t*t+i*i}function xae(e,t){return e[0]=-t[0],e[1]=-t[1],e}function hMe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function oL(e,t){const i=t[0],r=t[1];let n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e}function Rf(e,t){return e[0]*t[0]+e[1]*t[1]}function Eae(e,t,i){const r=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=r,e}function Iae(e,t,i,r){const n=t[0],o=t[1];return e[0]=n+r*(i[0]-n),e[1]=o+r*(i[1]-o),e}function dMe(e,t=1){const i=2*hT()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function pMe(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[2]*n,e[1]=i[1]*r+i[3]*n,e}function gc(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[2]*n+i[4],e[1]=i[1]*r+i[3]*n+i[5],e}function fMe(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[3]*n+i[6],e[1]=i[1]*r+i[4]*n+i[7],e}function yMe(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[4]*n+i[12],e[1]=i[1]*r+i[5]*n+i[13],e}function mMe(e,t,i,r){const n=t[0]-i[0],o=t[1]-i[1],u=Math.sin(r),f=Math.cos(r);return e[0]=n*f-o*u+i[0],e[1]=n*u+o*f+i[1],e}function Tae(e,t){const i=e[0],r=e[1],n=t[0],o=t[1];let u=i*i+r*r;u>0&&(u=1/Math.sqrt(u));let f=n*n+o*o;f>0&&(f=1/Math.sqrt(f));const g=(i*n+r*o)*u*f;return g>1?0:g<-1?Math.PI:Math.acos(g)}function gMe(e){return"vec2("+e[0]+", "+e[1]+")"}function aL(e,t){return e[0]===t[0]&&e[1]===t[1]}function vMe(e,t){const i=e[0],r=e[1],n=t[0],o=t[1],u=Vr();return Math.abs(i-n)<=u*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-o)<=u*Math.max(1,Math.abs(r),Math.abs(o))}function wMe(e,t,i,r,n){let o=t[0]-i[0],u=t[1]-i[1];const f=(r[0]*o+r[1]*u)*(n-1);return o=r[0]*f,u=r[1]*f,e[0]=t[0]+o,e[1]=t[1]+u,e}const bMe=Wv,IT=nn,_Me=_ae,SMe=Sae,xMe=MS,EMe=Hv,IMe=ld;Object.freeze(Object.defineProperty({__proto__:null,add:zF,angle:Tae,ceil:oMe,copy:pv,cross:Eae,dist:xMe,distance:MS,div:SMe,divide:Sae,dot:Rf,equals:vMe,exactEquals:aL,floor:aMe,inverse:hMe,len:bMe,length:Wv,lerp:Iae,max:uMe,min:lMe,mul:_Me,multiply:_ae,negate:xae,normalize:oL,projectAndScale:wMe,random:dMe,rotate:mMe,round:cMe,scale:O2,scaleAndAdd:gu,set:Qr,sqrDist:EMe,sqrLen:IMe,squaredDistance:Hv,squaredLength:ld,str:gMe,sub:IT,subtract:nn,transformMat2:pMe,transformMat2d:gc,transformMat3:fMe,transformMat4:yMe},Symbol.toStringTag,{value:"Module"}));function TMe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function TT(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function $Me(e,t,i,r,n,o,u){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=o,e[5]=u,e}function VF(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],u=t[4],f=t[5];let g=i*o-r*n;return g?(g=1/g,e[0]=o*g,e[1]=-r*g,e[2]=-n*g,e[3]=i*g,e[4]=(n*f-o*u)*g,e[5]=(r*u-i*f)*g,e):null}function MMe(e){return e[0]*e[3]-e[1]*e[2]}function ey(e,t,i){const r=t[0],n=t[1],o=t[2],u=t[3],f=t[4],g=t[5],b=i[0],E=i[1],I=i[2],M=i[3],k=i[4],L=i[5];return e[0]=r*b+o*E,e[1]=n*b+u*E,e[2]=r*I+o*M,e[3]=n*I+u*M,e[4]=r*k+o*L+f,e[5]=n*k+u*L+g,e}function CS(e,t,i){const r=t[0],n=t[1],o=t[2],u=t[3],f=t[4],g=t[5],b=Math.sin(i),E=Math.cos(i);return e[0]=r*E+o*b,e[1]=n*E+u*b,e[2]=r*-b+o*E,e[3]=n*-b+u*E,e[4]=f,e[5]=g,e}function $T(e,t,i){const r=t[0],n=t[1],o=t[2],u=t[3],f=t[4],g=t[5],b=i[0],E=i[1];return e[0]=r*b,e[1]=n*b,e[2]=o*E,e[3]=u*E,e[4]=f,e[5]=g,e}function Zv(e,t,i){const r=t[0],n=t[1],o=t[2],u=t[3],f=t[4],g=t[5],b=i[0],E=i[1];return e[0]=r,e[1]=n,e[2]=o,e[3]=u,e[4]=r*b+o*E+f,e[5]=n*b+u*E+g,e}function $ae(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=-i,e[3]=r,e[4]=0,e[5]=0,e}function Mae(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function UF(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function CMe(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function AMe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function kMe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e}function Cae(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}function LMe(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e}function OMe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e}function RMe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function PMe(e,t){const i=e[0],r=e[1],n=e[2],o=e[3],u=e[4],f=e[5],g=t[0],b=t[1],E=t[2],I=t[3],M=t[4],k=t[5],L=Vr();return Math.abs(i-g)<=L*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(r-b)<=L*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(n-E)<=L*Math.max(1,Math.abs(n),Math.abs(E))&&Math.abs(o-I)<=L*Math.max(1,Math.abs(o),Math.abs(I))&&Math.abs(u-M)<=L*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(f-k)<=L*Math.max(1,Math.abs(f),Math.abs(k))}const NMe=ey,FMe=Cae;Object.freeze(Object.defineProperty({__proto__:null,add:kMe,copy:TMe,determinant:MMe,equals:PMe,exactEquals:RMe,frob:AMe,fromRotation:$ae,fromScaling:Mae,fromTranslation:UF,identity:TT,invert:VF,mul:NMe,multiply:ey,multiplyScalar:LMe,multiplyScalarAndAdd:OMe,rotate:CS,scale:$T,set:$Me,str:CMe,sub:FMe,subtract:Cae,translate:Zv},Symbol.toStringTag,{value:"Module"}));function Qh(){return[1,0,0,1,0,0]}function DMe(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function jMe(e,t,i,r,n,o){return[e,t,i,r,n,o]}function zMe(e,t){return new Float64Array(e,t,6)}const VMe=Qh();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:VMe,clone:DMe,create:Qh,createView:zMe,fromValues:jMe},Symbol.toStringTag,{value:"Module"}));const q5={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new io({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:st.WebMercator}),minus180Line:new io({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:st.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new io({paths:[[[180,-180],[180,180]]],spatialReference:st.WGS84}),minus180Line:new io({paths:[[[-180,-180],[-180,180]]],spatialReference:st.WGS84})}};function my(e,t){return Math.ceil((e-t)/(2*t))}function Aae(e,t){const i=C3(e);for(const r of i)for(const n of r)n[0]+=t;return e}function C3(e){return Ey(e)?e.rings:e.paths}function MT(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function R2(e){return typeof e=="string"?_r(e):he(e)}function CT(e,t,i){const r={};for(const n in e){if(n==="declaredClass")continue;const o=e[n];if(o!=null&&typeof o!="function")if(Array.isArray(o))r[n]=o.map(u=>CT(u));else if(typeof o=="object")if(o.toJSON){const u=o.toJSON(i==null?void 0:i[n]);r[n]=JSON.stringify(u)}else r[n]=JSON.stringify(o);else r[n]=o}return r}async function UMe(e,t,i,r){const n=R2(e),o=t[0].spatialReference,u={...r,responseType:"json",query:{...n.query,f:"json",sr:Ov(o),target:JSON.stringify({geometryType:b2(t[0]),geometries:t}),cutter:JSON.stringify(i)}},f=await Ct(n.path+"/cut",u),{cutIndexes:g,geometries:b=[]}=f.data;return{cutIndexes:g,geometries:b.map(E=>{const I=od(E);return I.spatialReference=o,I})}}function GMe(e){return{geometryType:b2(e[0]),geometries:e.map(t=>t.toJSON())}}function kae(e,t,i){const r=o_e(t);return e.map(n=>{const o=r.fromJSON(n);return o.spatialReference=i,o})}async function BMe(e,t,i){const r=typeof e=="string"?_r(e):e,n=t[0].spatialReference,o=b2(t[0]),u={...i,query:{...r.query,f:"json",sr:Ov(n),geometries:JSON.stringify(GMe(t))}},{data:f}=await Ct(r.path+"/simplify",u);return kae(f.geometries,o,n)}const Lae=()=>Se.getLogger("esri.geometry.support.normalizeUtils");function qMe(e){return e.type==="polygon"}function HMe(e){return e[0].type==="polygon"}function WMe(e){return e[0].type==="polyline"}function FB(e){const t=[];let i=0,r=0;for(let n=0;n<e.length;n++){const o=e[n];let u=null;for(let f=0;f<o.length;f++)u=o[f],t.push(u),f===0?(i=u[0],r=i):(i=Math.min(i,u[0]),r=Math.max(r,u[0]));u&&t.push([(i+r)/2,0])}return t}function ZMe(e,t){if(!(e instanceof io||e instanceof zs)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw Lae().error(n),new ne(n)}const i=C3(e),r=[];for(const n of i){const o=[];r.push(o),o.push([n[0][0],n[0][1]]);for(let u=0;u<n.length-1;u++){const f=n[u][0],g=n[u][1],b=n[u+1][0],E=n[u+1][1],I=Math.sqrt((b-f)*(b-f)+(E-g)*(E-g)),M=(E-g)/I,k=(b-f)/I,L=I/t;if(L>1){for(let z=1;z<=L-1;z++){const V=z*t,W=k*V+f,Q=M*V+g;o.push([W,Q])}const P=(I+Math.floor(L-1)*t)/2,D=k*P+f,j=M*P+g;o.push([D,j])}o.push([b,E])}}return qMe(e)?new zs({rings:r,spatialReference:e.spatialReference}):new io({paths:r,spatialReference:e.spatialReference})}function DB(e,t,i){if(t){const r=ZMe(e,1e6);e=Ag(r,!0)}return i&&(e=Aae(e,i)),e}function jB(e,t,i){if(Array.isArray(e)){const r=e[0];if(r>t){const n=my(r,t);e[0]=r+n*(-2*t)}else if(r<i){const n=my(r,i);e[0]=r+n*(-2*i)}}else{const r=e.x;if(r>t){const n=my(r,t);e=e.clone().offset(n*(-2*t),0)}else if(r<i){const n=my(r,i);e=e.clone().offset(n*(-2*i),0)}}return e}function JMe(e,t){let i=-1;for(let r=0;r<t.cutIndexes.length;r++){const n=t.cutIndexes[r],o=t.geometries[r],u=C3(o);for(let f=0;f<u.length;f++){const g=u[f];g.some(b=>{if(b[0]<180)return!0;{let E=0;for(let M=0;M<g.length;M++){const k=g[M][0];E=k>E?k:E}E=Number(E.toFixed(9));const I=-360*my(E,180);for(let M=0;M<g.length;M++){const k=o.getPoint(f,M);o.setPoint(f,M,k.clone().offset(I,0))}return!0}})}if(n===i){if(HMe(e))for(const f of C3(o))e[n]=e[n].addRing(f);else if(WMe(e))for(const f of C3(o))e[n]=e[n].addPath(f)}else i=n,e[n]=o}return e}async function Oae(e,t,i){if(!Array.isArray(e))return Oae([e],t);t&&typeof t!="string"&&Lae().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof t=="string"?t:(t==null?void 0:t.url)??Kt.geometryServiceUrl;let n,o,u,f,g,b,E,I,M=0;const k=[],L=[];for(const W of e)if(W!=null)if(n||(n=W.spatialReference,o=no(n),u=n.isWebMercator,b=u?102100:4326,f=q5[b].maxX,g=q5[b].minX,E=q5[b].plus180Line,I=q5[b].minus180Line),o)if(W.type==="mesh")L.push(W);else if(W.type==="point")L.push(jB(W.clone(),f,g));else if(W.type==="multipoint"){const Q=W.clone();Q.points=Q.points.map(Z=>jB(Z,f,g)),L.push(Q)}else if(W.type==="extent"){const Q=W.clone()._normalize(!1,!1,o);L.push(Q.rings?new zs(Q):Q)}else if(W.extent){const Q=W.extent,Z=my(Q.xmin,g)*(2*f);let ee=Z===0?W.clone():Aae(W.clone(),Z);Q.offset(Z,0);let{xmin:ie,xmax:oe}=Q;ie=Number(ie.toFixed(9)),oe=Number(oe.toFixed(9)),Q.intersects(E)&&oe!==f?(M=oe>M?oe:M,ee=DB(ee,u),k.push(ee),L.push("cut")):Q.intersects(I)&&ie!==g?(M=oe*(2*f)>M?oe*(2*f):M,ee=DB(ee,u,360),k.push(ee),L.push("cut")):L.push(ee)}else L.push(W.clone());else L.push(W);else L.push(W);let P=my(M,f),D=-90;const j=P,z=new io;for(;P>0;){const W=360*P-180;z.addPath([[W,D],[W,-1*D]]),D*=-1,P--}if(k.length>0&&j>0){const W=JMe(k,await UMe(r,k,z,i)),Q=[],Z=[];for(let oe=0;oe<L.length;oe++){const le=L[oe];if(le!=="cut")Z.push(le);else{const xe=W.shift(),$e=e[oe];$e!=null&&$e.type==="polygon"&&$e.rings&&$e.rings.length>1&&xe.rings.length>=$e.rings.length?(Q.push(xe),Z.push("simplify")):Z.push(u?$c(xe):xe)}}if(!Q.length)return Z;const ee=await BMe(r,Q,i),ie=[];for(let oe=0;oe<Z.length;oe++){const le=Z[oe];le!=="simplify"?ie.push(le):ie.push(u?$c(ee.shift()):ee.shift())}return ie}const V=[];for(let W=0;W<L.length;W++){const Q=L[W];if(Q!=="cut")V.push(Q);else{const Z=k.shift();V.push(u===!0?$c(Z):Z)}}return V}function KMe(e){if(!e)return null;const t=e.extent;if(!t)return null;const i=e.spatialReference&&no(e.spatialReference);if(!i)return t;const[r,n]=i.valid,o=2*n,{width:u}=t;let f,{xmin:g,xmax:b}=t;if([g,b]=[b,g],e.type==="extent"||u===0||u<=n||u>o||g<r||b>n)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;f=FB(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;f=FB(e.paths);break;case"multipoint":f=e.points}const E=t.clone();for(let I=0;I<f.length;I++){let M=f[I][0];M<0?(M+=n,b=Math.max(M,b)):(M-=n,g=Math.min(M,g))}return E.xmin=g,E.xmax=b,E.width<u?(E.xmin-=n,E.xmax-=n,E):t}function GF(e,t,i){const r=no(i);if(r==null)return e;const[n,o]=r.valid,u=2*o;let f=0,g=0;t>o?f=Math.ceil(Math.abs(t-o)/u):t<n&&(f=-Math.ceil(Math.abs(t-n)/u)),e>o?g=Math.ceil(Math.abs(e-o)/u):e<n&&(g=-Math.ceil(Math.abs(e-n)/u));let b=e+(f-g)*u;const E=b-t;return E>o?b-=u:E<n&&(b+=u),b}function eot(e,t){const i=no(t);if(i){const[r,n]=i.valid,o=n-r;if(e<r)for(;e<r;)e+=o;if(e>n)for(;e>n;)e-=o}return e}const Rae=96,Pae=39.37,YMe=180/Math.PI;function Nae(e){return e.wkid?e:e.spatialReference||st.WGS84}function BF(e,t){return t.type?Qr(e,t.x,t.y):pv(e,t)}function Fae(e){return xu(e)}function AT(e,t,i=0){let r=e.width,n=e.height;if(i!==0){const f=H6(i),g=Math.abs(Math.cos(f)),b=Math.abs(Math.sin(f));r=e.width*g+e.height*b,n=e.width*b+e.height*g}const o=Math.max(1,t[0]),u=Math.max(1,t[1]);return Math.max(r/o,n/u)*s7e(e.spatialReference)}async function Eb(e,t,i,r){var f,g;let n,o;if(!e||Array.isArray(e)&&!e.length)return null;if(Oe.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const b=e.every(M=>"attributes"in M),E=e.some(M=>!M.geometry);let I=e;if(b&&E&&t&&t.allLayerViews){const M=new Map;for(const D of e){const j=D.layer,z=M.get(j)||[],V=D.attributes[j.objectIdField];V!=null&&z.push(V),M.set(j,z)}const k=[];M.forEach((D,j)=>{const z=t.allLayerViews.find(V=>V.layer.id===j.id);if(z&&"queryFeatures"in z){const V=j.createQuery();V.objectIds=D,V.returnGeometry=!0,k.push(z.queryFeatures(V))}});const L=await Promise.all(k),P=[];for(const D of L)if(D&&D.features&&D.features.length)for(const j of D.features)j.geometry!=null&&P.push(j.geometry);I=P}for(const M of I)r=await Eb(M,t,i,r);return r}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=new lt(e);else if(e instanceof dd)n=e;else if("geometry"in e){if(e.geometry)n=e.geometry;else if(e.layer){const b=e.layer,E=t.allLayerViews.find(I=>I.layer.id===b.id);if(E&&"queryFeatures"in E){const I=b.createQuery();I.objectIds=[e.attributes[b.objectIdField]],I.returnGeometry=!0;const M=await E.queryFeatures(I);n=(g=(f=M==null?void 0:M.features)==null?void 0:f[0])==null?void 0:g.geometry}}}if(n==null)return null;switch(n.type){case"point":o=new Ht({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":o=KMe(n);break;default:o=n.extent}if(!o)return null;Dc()||Sa(o.spatialReference,i)||await Oc();const u=dl(o,i);if(!u)return null;if(r){const b=u.center,E=b.clone();E.x=GF(b.x,r.center.x,i),E.x!==b.x&&u.centerAt(E),r=r.union(u)}else r=u;return r}function XMe(e){var t;if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&((t=e.layer)==null?void 0:t.minScale)!=null&&e.layer.maxScale!=null){const i=e.layer;return{min:i.minScale,max:i.maxScale}}if(Array.isArray(e)&&e.length&&e.every(i=>"layer"in i)){let i=0,r=0;for(const n of e){const o=n.layer;o!=null&&o.minScale&&o.maxScale&&(i=o.minScale<i?o.minScale:i,r=o.maxScale>r?o.maxScale:r)}return i&&r?{min:i,max:r}:null}}}function zB(e,t){const i=Nae(e);return pr(i,t)||i.imageCoordinateSystem||t.imageCoordinateSystem?e:dl(e,t)}async function QMe(e,t){var D;if(!e||!t)return new Fn({targetGeometry:new lt,scale:0,rotation:0});let i=t.spatialReference;const{constraints:r,padding:n,viewpoint:o,size:u}=t,f=[n?u[0]-n.left-n.right:u[0],n?u[1]-n.top-n.bottom:u[1]];let g=null;e instanceof Fn?g=e:e.viewpoint?g=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(g=e.target);let b=null;g!=null&&g.targetGeometry?b=g.targetGeometry:e instanceof Ht?b=e:e instanceof dd?b=await Eb(e,t,i):e&&(b=await Eb(e.center,t,i)||await Eb(e.target,t,i)||await Eb(e,t,i)),!b&&(o!=null&&o.targetGeometry)?b=o.targetGeometry:!b&&t.extent&&(b=t.extent),i||(i=Nae(t.spatialReference||t.extent||b)),Dc()||pr(b.spatialReference,i)||Sa(b.spatialReference,i)||await Oc();const E=zB(b,i),I="center"in E?E.center:E;t.pickClosestTarget!==!1&&I.type==="point"&&((D=o.targetGeometry)==null?void 0:D.type)==="point"&&(I.x=GF(I.x,o.targetGeometry.x,I.spatialReference));let M=0;g?M=g.rotation:e.hasOwnProperty("rotation")?M=e.rotation:o&&(M=o.rotation);let k=0;k=(g==null?void 0:g.targetGeometry)!=null&&g.targetGeometry.type==="point"?g.scale:"scale"in e&&e.scale?e.scale:"zoom"in e&&e.zoom!==-1&&r&&r.effectiveLODs?r.zoomToScale(e.zoom):Array.isArray(b)||b.type==="point"||b.type==="extent"&&b.width===0&&b.height===0?o.scale:AT(zB(b.extent,i),f,M);const L=XMe(e.target??e);L&&(L.min&&L.min<k?k=L.min:L.max&&L.max>k&&(k=L.max));let P=new Fn({targetGeometry:I,scale:k,rotation:M});return r&&(P=r.fit(P),r.constrainByGeometry(P),r.rotationEnabled||(P.rotation=o.rotation)),P}function Ns(e,t){const i=e.targetGeometry,r=t.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function e7e(e,t,i){return i?Qr(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):O2(e,t,.5)}const t7e=function(){const e=qt();return function(t,i,r){const n=i.targetGeometry;BF(e,n);const o=.5*P2(i);return t.xmin=e[0]-o*r[0],t.ymin=e[1]-o*r[1],t.xmax=e[0]+o*r[0],t.ymax=e[1]+o*r[1],t.spatialReference=n.spatialReference,t}}();function i7e(e,t,i,r,n){var o;return lL(e,t,i.center),e.scale=AT(i,r),(o=n==null?void 0:n.constraints)==null||o.constrain(e),e}function r7e(e,t,i,r){return WF(e,t,i,r),VF(e,e)}const Dae=function(){const e=qt();return function(t,i,r){return IT(t,o7e(t,i),e7e(e,i,r))}}(),n7e=function(){const e=Qh(),t=qt();return function(i,r,n,o){const u=P2(r),f=qF(r);return Qr(t,u,u),Mae(e,t),CS(e,e,f),Zv(e,e,Dae(t,n,o)),Zv(e,e,[0,o.top-o.bottom]),Qr(i,e[4],e[5])}}();function P2(e){var t;return e.scale*jae((t=e.targetGeometry)==null?void 0:t.spatialReference)}function jae(e){return e!=null&&ca(e)?1/(Fae(e)*Pae*Rae):1}function qF(e){return gF(e.rotation)||0}function s7e(e){return ca(e)?Fae(e)*Pae*Rae:1}function o7e(e,t){return O2(e,t,.5)}const HF=function(){const e=qt(),t=qt(),i=qt();return function(r,n,o,u,f,g){return xae(e,n),O2(t,o,.5*g),Qr(i,1/u*g,-1/u*g),UF(r,t),f&&CS(r,r,f),$T(r,r,i),Zv(r,r,e),r}}(),WF=function(){const e=qt();return function(t,i,r,n){const o=P2(i),u=qF(i);return BF(e,i.targetGeometry),HF(t,e,r,o,u,n)}}(),a7e=function(){const e=qt();return function(t,i,r,n){const o=P2(i);return BF(e,i.targetGeometry),HF(t,e,r,o,0,n)}}();function zae(e){const t=no(e);return t?t.valid[1]-t.valid[0]:0}function l7e(e,t){return Math.round(zae(e)/t)}const u7e=function(){const e=qt(),t=qt(),i=[0,0,0];return function(r,n,o){nn(e,r,n),oL(e,e),nn(t,r,o),oL(t,t),Eae(i,e,t);let u=Math.acos(Rf(e,t)/(Wv(e)*Wv(t)))*YMe;return i[2]<0&&(u=-u),isNaN(u)&&(u=0),u}}(),c7e=function(){const e=qt();return function(t,i,r,n){const o=t.targetGeometry;return Ns(t,i),n7e(e,i,r,n),o.x+=e[0],o.y+=e[1],t}}(),lL=function(e,t,i){Ns(e,t);const r=e.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e},h7e=function(){const e=qt();return function(t,i,r,n,o){o||(o="center"),IT(e,r,n),O2(e,e,.5);const u=e[0],f=e[1];switch(o){case"center":Qr(e,0,0);break;case"left":Qr(e,-u,0);break;case"top":Qr(e,0,f);break;case"right":Qr(e,u,0);break;case"bottom":Qr(e,0,-f);break;case"top-left":Qr(e,-u,f);break;case"bottom-left":Qr(e,-u,-f);break;case"top-right":Qr(e,u,f);break;case"bottom-right":Qr(e,u,-f)}return kT(t,i,e),t}}();function tot(e,t,i){return Ns(e,t),e.rotation+=i,e}function d7e(e,t,i){return Ns(e,t),e.rotation=i,e}const p7e=function(){const e=qt();return function(t,i,r,n,o){return Ns(t,i),isNaN(r)||r===0||(Uae(e,n,i,o),t.scale=i.scale*r,Gae(e,e,t,o),kT(t,t,Qr(e,e[0]-n[0],n[1]-e[1]))),t}}();function VB(e,t,i){return Ns(e,t),e.scale=i,e}const Vae=function(){const e=qt();return function(t,i,r,n,o,u){return Ns(t,i),isNaN(r)||r===0||(Uae(e,o,i,u),t.scale=i.scale*r,t.rotation+=n,Gae(e,e,t,u),kT(t,t,Qr(e,e[0]-o[0],o[1]-e[1]))),t}}(),iot=function(){const e=qt(),t=qt();return function(i,r,n,o,u,f,g){return Dae(t,f,g),zF(e,u,t),o?Vae(i,r,n,o,e,f):p7e(i,r,n,e,f)}}(),Uae=function(){const e=Qh();return function(t,i,r,n){return gc(t,i,r7e(e,r,n,1))}}(),Gae=function(){const e=Qh();return function(t,i,r,n){return gc(t,i,WF(e,r,n,1))}}(),kT=function(){const e=qt(),t=Qh();return function(i,r,n){Ns(i,r);const o=P2(r),u=i.targetGeometry;return $ae(t,qF(r)),$T(t,t,Xh(o,o)),gc(e,n,t),u.x+=e[0],u.y+=e[1],i}}();function xI(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function f7e(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function y7e(e,t,i,r,n,o){const u=new Float32Array(6);return u[0]=e,u[1]=t,u[2]=i,u[3]=r,u[4]=n,u[5]=o,u}function m7e(e,t){return new Float32Array(e,t,6)}function Bae(e,t,i,r){const n=t[r],o=t[r+1];e[r]=i[0]*n+i[2]*o+i[4],e[r+1]=i[1]*n+i[3]*o+i[5]}function g7e(e,t,i,r=0,n=0,o=2){const u=n||t.length/o;for(let f=r;f<u;f++)Bae(e,t,i,f*o)}Object.freeze(Object.defineProperty({__proto__:null,clone:f7e,create:xI,createView:m7e,fromValues:y7e,transform:Bae,transformMany:g7e},Symbol.toStringTag,{value:"Module"}));function v7e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function w7e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function qae(e,t,i,r,n,o,u,f,g,b){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=o,e[5]=u,e[6]=f,e[7]=g,e[8]=b,e}function Hae(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function b7e(e,t){if(e===t){const i=t[1],r=t[2],n=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=r,e[7]=n}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function _7e(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],u=t[4],f=t[5],g=t[6],b=t[7],E=t[8],I=E*u-f*b,M=-E*o+f*g,k=b*o-u*g;let L=i*I+r*M+n*k;return L?(L=1/L,e[0]=I*L,e[1]=(-E*r+n*b)*L,e[2]=(f*r-n*u)*L,e[3]=M*L,e[4]=(E*i-n*g)*L,e[5]=(-f*i+n*o)*L,e[6]=k*L,e[7]=(-b*i+r*g)*L,e[8]=(u*i-r*o)*L,e):null}function S7e(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],u=t[4],f=t[5],g=t[6],b=t[7],E=t[8];return e[0]=u*E-f*b,e[1]=n*b-r*E,e[2]=r*f-n*u,e[3]=f*g-o*E,e[4]=i*E-n*g,e[5]=n*o-i*f,e[6]=o*b-u*g,e[7]=r*g-i*b,e[8]=i*u-r*o,e}function x7e(e){const t=e[0],i=e[1],r=e[2],n=e[3],o=e[4],u=e[5],f=e[6],g=e[7],b=e[8];return t*(b*o-u*g)+i*(-b*n+u*f)+r*(g*n-o*f)}function ZF(e,t,i){const r=t[0],n=t[1],o=t[2],u=t[3],f=t[4],g=t[5],b=t[6],E=t[7],I=t[8],M=i[0],k=i[1],L=i[2],P=i[3],D=i[4],j=i[5],z=i[6],V=i[7],W=i[8];return e[0]=M*r+k*u+L*b,e[1]=M*n+k*f+L*E,e[2]=M*o+k*g+L*I,e[3]=P*r+D*u+j*b,e[4]=P*n+D*f+j*E,e[5]=P*o+D*g+j*I,e[6]=z*r+V*u+W*b,e[7]=z*n+V*f+W*E,e[8]=z*o+V*g+W*I,e}function uL(e,t,i){const r=t[0],n=t[1],o=t[2],u=t[3],f=t[4],g=t[5],b=t[6],E=t[7],I=t[8],M=i[0],k=i[1];return e[0]=r,e[1]=n,e[2]=o,e[3]=u,e[4]=f,e[5]=g,e[6]=M*r+k*u+b,e[7]=M*n+k*f+E,e[8]=M*o+k*g+I,e}function Wae(e,t,i){const r=t[0],n=t[1],o=t[2],u=t[3],f=t[4],g=t[5],b=t[6],E=t[7],I=t[8],M=Math.sin(i),k=Math.cos(i);return e[0]=k*r+M*u,e[1]=k*n+M*f,e[2]=k*o+M*g,e[3]=k*u-M*r,e[4]=k*f-M*n,e[5]=k*g-M*o,e[6]=b,e[7]=E,e[8]=I,e}function E7e(e,t,i){const r=i[0],n=i[1],o=i[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=o*t[6],e[7]=o*t[7],e[8]=o*t[8],e}function I7e(e,t,i){const r=i[0],n=i[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e}function T7e(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function $7e(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=-i,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function M7e(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function C7e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function A7e(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],u=i+i,f=r+r,g=n+n,b=i*u,E=r*u,I=r*f,M=n*u,k=n*f,L=n*g,P=o*u,D=o*f,j=o*g;return e[0]=1-I-L,e[3]=E-j,e[6]=M+D,e[1]=E+j,e[4]=1-b-L,e[7]=k-P,e[2]=M-D,e[5]=k+P,e[8]=1-b-I,e}function k7e(e,t){const i=t[0],r=t[1],n=t[2],o=t[4],u=t[5],f=t[6],g=t[8],b=t[9],E=t[10],I=E*u-f*b,M=-E*o+f*g,k=b*o-u*g,L=i*I+r*M+n*k;if(!L)return null;const P=1/L;return e[0]=I*P,e[1]=(-E*r+n*b)*P,e[2]=(f*r-n*u)*P,e[3]=M*P,e[4]=(E*i-n*g)*P,e[5]=(-f*i+n*o)*P,e[6]=k*P,e[7]=(-b*i+r*g)*P,e[8]=(u*i-r*o)*P,e}function L7e(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],u=t[4],f=t[5],g=t[6],b=t[7],E=t[8],I=t[9],M=t[10],k=t[11],L=t[12],P=t[13],D=t[14],j=t[15],z=i*f-r*u,V=i*g-n*u,W=i*b-o*u,Q=r*g-n*f,Z=r*b-o*f,ee=n*b-o*g,ie=E*P-I*L,oe=E*D-M*L,le=E*j-k*L,xe=I*D-M*P,$e=I*j-k*P,Te=M*j-k*D;let de=z*Te-V*$e+W*xe+Q*le-Z*oe+ee*ie;return de?(de=1/de,e[0]=(f*Te-g*$e+b*xe)*de,e[1]=(g*le-u*Te-b*oe)*de,e[2]=(u*$e-f*le+b*ie)*de,e[3]=(n*$e-r*Te-o*xe)*de,e[4]=(i*Te-n*le+o*oe)*de,e[5]=(r*le-i*$e-o*ie)*de,e[6]=(P*ee-D*Z+j*Q)*de,e[7]=(D*W-L*ee-j*V)*de,e[8]=(L*Z-P*W+j*z)*de,e):null}function O7e(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function R7e(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function P7e(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function N7e(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function Zae(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function F7e(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function D7e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e}function j7e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function z7e(e,t){const i=e[0],r=e[1],n=e[2],o=e[3],u=e[4],f=e[5],g=e[6],b=e[7],E=e[8],I=t[0],M=t[1],k=t[2],L=t[3],P=t[4],D=t[5],j=t[6],z=t[7],V=t[8],W=Vr();return Math.abs(i-I)<=W*Math.max(1,Math.abs(i),Math.abs(I))&&Math.abs(r-M)<=W*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(n-k)<=W*Math.max(1,Math.abs(n),Math.abs(k))&&Math.abs(o-L)<=W*Math.max(1,Math.abs(o),Math.abs(L))&&Math.abs(u-P)<=W*Math.max(1,Math.abs(u),Math.abs(P))&&Math.abs(f-D)<=W*Math.max(1,Math.abs(f),Math.abs(D))&&Math.abs(g-j)<=W*Math.max(1,Math.abs(g),Math.abs(j))&&Math.abs(b-z)<=W*Math.max(1,Math.abs(b),Math.abs(z))&&Math.abs(E-V)<=W*Math.max(1,Math.abs(E),Math.abs(V))}function V7e(e){const t=Vr(),i=e[0],r=e[1],n=e[2],o=e[3],u=e[4],f=e[5],g=e[6],b=e[7],E=e[8];return Math.abs(1-(i*i+o*o+g*g))<=t&&Math.abs(1-(r*r+u*u+b*b))<=t&&Math.abs(1-(n*n+f*f+E*E))<=t}const U7e=ZF,G7e=Zae;Object.freeze(Object.defineProperty({__proto__:null,add:N7e,adjoint:S7e,copy:w7e,determinant:x7e,equals:z7e,exactEquals:j7e,frob:P7e,fromMat2d:C7e,fromMat4:v7e,fromQuat:A7e,fromRotation:$7e,fromScaling:M7e,fromTranslation:T7e,identity:Hae,invert:_7e,isOrthoNormal:V7e,mul:U7e,multiply:ZF,multiplyScalar:F7e,multiplyScalarAndAdd:D7e,normalFromMat4:L7e,normalFromMat4Legacy:k7e,projection:O7e,rotate:Wae,scale:E7e,scaleByVec2:I7e,set:qae,str:R7e,sub:G7e,subtract:Zae,translate:uL,transpose:b7e},Symbol.toStringTag,{value:"Module"}));function i4(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function B7e(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function q7e(e,t,i,r,n,o,u,f,g){const b=new Float32Array(9);return b[0]=e,b[1]=t,b[2]=i,b[3]=r,b[4]=n,b[5]=o,b[6]=u,b[7]=f,b[8]=g,b}function H7e(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:B7e,create:i4,createView:H7e,fromValues:q7e},Symbol.toStringTag,{value:"Module"}));function Jae(){return new Float32Array(2)}function W7e(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function Jv(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function Z7e(e,t){return new Float32Array(e,t,2)}function Kae(){return Jae()}function Yae(){return Jv(1,1)}function Xae(){return Jv(1,0)}function Qae(){return Jv(0,1)}const J7e=Kae(),K7e=Yae(),Y7e=Xae(),X7e=Qae();Object.freeze(Object.defineProperty({__proto__:null,ONES:K7e,UNIT_X:Y7e,UNIT_Y:X7e,ZEROS:J7e,clone:W7e,create:Jae,createView:Z7e,fromValues:Jv,ones:Yae,unitX:Xae,unitY:Qae,zeros:Kae},Symbol.toStringTag,{value:"Module"}));function Q7e(e){return e instanceof Float32Array&&e.length>=2}function eCe(e){return Array.isArray(e)&&e.length>=2}function VM(e){return Q7e(e)||eCe(e)}var cL;const qc=[0,0];let ah=cL=class extends be{constructor(e){super(e),this._viewpoint2D={center:qt(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Ht,this.id=0,this.inverseTransform=Qh(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Qh(),this.transformNoRotation=Qh(),this.displayMat3=i4(),this.displayViewMat3=i4(),this.viewMat3=i4(),this.viewMat2d=xI(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}get visibleArea(){const[e,t]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,t),this.toMap([0,0],e,t),this.toMap([0,0],e,0)]}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=Ns(i,e.viewpoint),this._set("size",pv(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new cL({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return VM(t)?gc(e,t,this.inverseTransform):(qc[0]=t,qc[1]=i,gc(e,qc,this.inverseTransform))}toScreen(e,t,i){return VM(t)?gc(e,t,this.transform):(qc[0]=t,qc[1]=i,gc(e,qc,this.transform))}toScreenNoRotation(e,t,i){return VM(t)?gc(e,t,this.transformNoRotation):(qc[0]=t,qc[1]=i,gc(e,qc,this.transformNoRotation))}wrapMapCoordinate(e,t){pv(e,t);const[i]=t,[r]=this.center,{extent:n,spatialReference:o}=this;let{xmin:u,xmax:f}=n;if(o.isWrappable){const g=zae(o)/2;u=Math.max(u,r-g),f=Math.min(f,r+g)}return(i<u||i>f)&&(e[0]=GF(i,r,o)),e}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,n=this._get("size");return HF(e,i,n,t,0,r),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:r}=this._viewpoint2D,n=this._get("pixelRatio")||1,o=this._get("size"),u=new Fn({targetGeometry:new lt(e[0],e[1],t),scale:i,rotation:r});if(this._set("viewpoint",u),!o||!t||!i)return;this.resolution=P2(u),this.rotation=r,this.scale=i,this.spatialReference=t,pv(this.center,e);const f=o[0]!==0?2/o[0]:0,g=o[1]!==0?-2/o[1]:0;qae(this.displayMat3,f,0,0,0,g,0,-1,1,1);const b=Hae(this.viewMat3),E=Jv(o[0]/2,o[1]/2),I=Jv(-o[0]/2,-o[1]/2),M=gF(r);uL(b,b,E),Wae(b,b,M),uL(b,b,I),ZF(this.displayViewMat3,this.displayMat3,b);const k=UF(this.viewMat2d,E);return CS(k,k,M),Zv(k,k,I),t7e(this.extent,u,o),WF(this.transform,u,o,n),VF(this.inverseTransform,this.transform),a7e(this.transformNoRotation,u,o,n),this.worldScreenWidth=l7e(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};m([w({readOnly:!0})],ah.prototype,"id",void 0),m([w({value:1,json:{write:!0}})],ah.prototype,"pixelRatio",null),m([w({json:{write:!0}})],ah.prototype,"size",null),m([w()],ah.prototype,"spatialReference",void 0),m([w({type:Fn,json:{write:!0}})],ah.prototype,"viewpoint",null),m([w({readOnly:!0})],ah.prototype,"visibleArea",null),ah=cL=m([H("esri.views.2d.ViewState")],ah);const UB=ah;var hL,dL;let zh=hL=class extends De{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new hL({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};m([w()],zh.prototype,"left",void 0),m([w()],zh.prototype,"top",void 0),m([w()],zh.prototype,"right",void 0),m([w()],zh.prototype,"bottom",void 0),zh=hL=m([H("esri.views.2d.PaddedViewState.Padding")],zh);let x1=dL=class extends UB{constructor(...e){super(...e),this.paddedViewState=new UB,this._updateContent=(()=>{const t=qt();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const n=this.paddedViewState;Qr(t,r.left+r.right,r.top+r.bottom),nn(t,i,t),pv(n.size,t);const o=n.viewpoint;o&&(this.viewpoint=o)}})(),this.addHandles(me(()=>[this.size,this.padding],()=>this._updateContent(),hl)),this.padding=new zh,this.size=[0,0]}set padding(e){this._set("padding",e||new zh)}set viewpoint(e){if(e){this.paddedViewState.viewpoint=e;let t=e;const i=this._get("padding");i&&(t=c7e(e.clone(),e,this._get("size"),i));const{targetGeometry:r,rotation:n,scale:o}=t,{x:u,y:f,spatialReference:g}=r,b=this._viewpoint2D;b.center[0]=u,b.center[1]=f,b.rotation=n,b.scale=o,b.spatialReference=g,this._update()}}clone(){return new dL({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};m([w()],x1.prototype,"paddedViewState",void 0),m([w({type:zh})],x1.prototype,"padding",null),m([w()],x1.prototype,"viewpoint",null),x1=dL=m([H("esri.views.2d.PaddedViewState")],x1);const JF=x1;function ty(e,t,i,r){const n=3*e,o=3*(i-e)-n,u=1-n-o,f=3*t,g=3*(r-t)-f,b=1-f-g;function E(L){return((u*L+o)*L+n)*L}function I(L){return((b*L+g)*L+f)*L}function M(L){return(3*u*L+2*o)*L+n}function k(L,P){let D,j,z,V,W,Q;for(z=L,Q=0;Q<8;Q++){if(V=E(z)-L,Math.abs(V)<P)return z;if(W=M(z),Math.abs(W)<1e-6)break;z-=V/W}if(D=0,j=1,z=L,z<D)return D;if(z>j)return j;for(;D<j;){if(V=E(z),Math.abs(V-L)<P)return z;L>V?D=z:j=z,z=.5*(j-D)+D}return z}return function(L,P=1e-6){return I(k(L,P))}}const tCe=/^cubic-bezier\((.*)\)/,oc={};function iCe(e){let t=oc[e]||null;if(!t){const i=tCe.exec(e);if(i){const r=i[1].split(",").map(n=>parseFloat(n.trim()));r.length!==4||r.some(n=>isNaN(n))||(t=ty.apply(ty,r))}}return t}oc.ease=ty(.25,.1,.25,1),oc.linear=ty(0,0,1,1),oc.easeIn=oc["ease-in"]=ty(.42,0,1,1),oc.easeOut=oc["ease-out"]=ty(0,0,.58,1),oc.easeInOut=oc["ease-in-out"]=ty(.42,0,.58,1);let GB=class{constructor(t){this._view=t,this.viewpoint=new Fn({targetGeometry:new lt,scale:0,rotation:0})}get view(){return this._view}get size(){const[t,i]=this._view.size;return Math.sqrt(t*t+i*i)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return jae(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(t,i){i.pan=hie(this.center,t.center);let r=Math.abs(t.rotation-this.rotation);r=r>=180?360-r:r,i.rotate=H6(r),i.sourceZoom=this.scale,i.targetZoom=t.scale}interpolate(t,i,r){const{pan:n,rotate:o,zoom:u,zoomOffset:f}=r,{center:g}=this;g.spatialReference=t.center.spatialReference,g.x=qw(t.center.x,i.center.x,n),g.y=qw(t.center.y,i.center.y,n),this.viewpoint.scale=qw(t.scale,i.scale+f,u);let b=t.rotation;const E=i.rotation;Math.abs(E-b)>=180&&(b+=360*(b<E?1:-1)),this.viewpoint.rotation=qw(b,E,o)}copyFrom(t){Ns(this.viewpoint,t.viewpoint),this._view=t.view}};const ele=e=>e*e,rCe=e=>1-ele(1-e),nCe=e=>2**(10*(e-1)),sCe=e=>1-nCe(1-e);function oCe(e){const t=2*(e-Math.sqrt((e-1)*e)),i=t/2/e;return r=>r<i?e*r*r:t*r-t+1}function aCe(e,t){return(i,r)=>i<t?t*e(i/t,r):1-e((1-i)/(1-t),r)*(1-t)}const BB=aCe(oCe(1),.5);let lCe=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const T_={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},tle={...T_,maxDuration:4e3};let uCe=class ile{constructor(t){this._createCamera=t,this.compared=new lCe,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:T_.desiredScreenFlow},this.source=t(),this.target=t()}clone(){const t=new ile(this._createCamera);return t.copyFrom(this),t}copyFrom(t){this.update(t.source,t.target,t.settings)}update(t,i,r){this.source!==t&&this.source.copyFrom(t),this.target!==i&&this.target.copyFrom(i),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow??T_.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(t){const i=this.target.pixelsPerPanAtZoom(t);return this.halfWindowSize/i}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Vr()}get hasFov(){return Math.abs(this.compared.fov)>Vr()}get hasRotate(){return this.compared.rotate>Vr()}},cCe=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},hCe=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((t,i)=>t+i.time,0)}interpolateComponentsAt(t,i){t=Math.min(Math.max(t,0),1),t*=this.time;let r=0,n=0;const o=this.definition,u=this.segments.reduce((f,g)=>f||g.definition.hasZoom,!1);for(let f=0;f<this.segments.length;f++){const g=this.segments[f],b=g.definition;if(t<=g.time||f===this.segments.length-1){if(this.segmentInterpolateComponentsAt(g,g.time===0?0:t/g.time,i),o.hasPan&&!isNaN(i.pan)&&isFinite(o.compared.pan)?i.pan=(r+b.compared.pan*i.pan)/o.compared.pan:i.pan=1,o.hasRotate&&!isNaN(i.rotate)&&isFinite(o.compared.rotate)?i.rotate=(n+b.compared.rotate*i.rotate)/o.compared.rotate:i.rotate=1,u&&!isNaN(i.zoom)&&isFinite(b.compared.targetZoom)){const{sourceZoom:E,targetZoom:I}=b.compared,M=i.zoom*(I-E)+E,k=this.segments[0].definition.compared.sourceZoom,L=this.segments[this.segments.length-1].definition.compared.targetZoom,P=Math.abs(I-k)>Math.abs(E-k)?I:E;i.zoomOffset=P-L,i.zoom=(M-k)/(P-k)}else i.zoom=1;return i}t-=g.time,r+=b.compared.pan,n+=b.compared.rotate}}segmentInterpolateComponentsAt(t,i,r){t.interpolateComponentsAt(i,r)}},UM=class{get time(){return this._time}constructor(t){t&&this.update(t)}update(t){t&&(this.definition?this.definition.copyFrom(t):this.definition=t.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const t=this.definition,i=t.compared,r=i.sourceZoom,n=i.targetZoom;this._zoomSign=r>n?1:-1,this._panPixelsAtSource=i.pan*t.source.pixelsPerPanAtZoom(r);const o=(t.source.pixelsPerRotate()+t.target.pixelsPerRotate())/2;this._rotatePixels=i.rotate*o}_updatePixelFlow(){const t=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom,{hasZoom:r,hasPan:n,hasRotate:o}=this.definition;let u=0,f=0;r&&(n&&(u=(i/t-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),o&&(f=this._zoomSign*(Math.log(t/i)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const g=this.definition.desiredPixelFlow;if(r&&n&&o){const b=u+f+u*f;this._zoomPixelFlow=u*f/b*g,this._panPixelFlow=f/b*g,this._rotatePixelFlow=u/b*g}else if(r&&n){const b=1+u;this._zoomPixelFlow=u/b*g,this._panPixelFlow=1/b*g}else if(r&&o){const b=1+f;this._zoomPixelFlow=f/b*g,this._rotatePixelFlow=1/b*g}else if(n&&o){const b=this._panPixelsAtSource/this._rotatePixels,E=1+b;this._panPixelFlow=b/E*g,this._rotatePixelFlow=1/E*g}else n?this._panPixelFlow=g:r?this._zoomPixelFlow=g:o&&(this._rotatePixelFlow=g);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const b=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=b,this._panPixelFlow/=b,this._rotatePixelFlow/=b}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/dCe:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const t=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,i=t*this._panPixelsAtSource;return Math.log(i*(this._zoomPixelFlow/this._panPixelFlow)+1)/(t*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(t){if(t===0||t===1)return t;if(this.definition.hasZoom){const i=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(i*(i/r)**-t-i)/(r-i)}return t}_interpolateComponentsFov(t){if(t===0)return this.definition.segmentStart;if(t===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:i,segmentEnd:r}=this.definition;return i+t*(r-i)}return this.definition.segmentStart}_interpolateComponentsPan(t){if(t===0||t===1)return t;if(this.definition.hasPan&&this.definition.hasZoom){const i=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(i*t*this._time)-1))/(i*Math.LN2)}return t}_interpolateComponentsRotate(t){return t}interpolateComponentsAt(t,i){t=Math.min(Math.max(t,0),1),i.zoom=this._interpolateComponentsZoom(t),i.pan=this._interpolateComponentsPan(t),i.rotate=this._interpolateComponentsRotate(t),i.zoomOffset=0,i.fov=this._interpolateComponentsFov(t)}};const dCe=H6(45);function pCe(e,t,i){const r=t-e.compared.sourceZoom,n=e.halfWindowPanAtZoom(r);return-e.halfWindowSize*(i.ascensionFactor*Math.LN2*e.compared.pan+n)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*n)}function fCe(e,t,i){const r=1/t,n=Math.log(e.compared.sourceZoom*r),o=1/e.desiredPixelFlow,u=1/Math.LN2,f=t-e.compared.sourceZoom,g=1/f,b=(i.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(f))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*r*o*u*g*b-e.halfWindowSize*n*o*u*g+e.halfWindowSize*n*o*u*b/(f*f)}function yCe(e,t,i){const r=t-e.compared.sourceZoom,n=1/r,o=1/t,u=Math.log(e.compared.sourceZoom*o),f=(i.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(r))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*n*(-2*n*o*f+2*n*u+2*o-2*u*f/(r*r)-f/(t*t))/(e.desiredPixelFlow*Math.LN2)}function mCe(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function gCe(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function vCe(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function wCe(e,t,i){return-e.compared.pan*e.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}function bCe(e,t,i){return e.compared.pan*e.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}function _Ce(e,t,i){return-2*e.compared.pan*e.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}function SCe(e,t,i){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-i.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function xCe(e,t,i){const r=Math.log(t/e.compared.targetZoom),n=1/e.desiredPixelFlow,o=1/Math.LN2,u=-t+e.compared.targetZoom,f=1/u,g=(-e.halfWindowPanAtZoom(t)-i.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*r*n*o*f+e.halfWindowSize*r*n*o*g/(u*u)+e.halfWindowSize*n*o*f*g/t}function ECe(e,t,i){const r=t-e.compared.targetZoom,n=1/r,o=1/t,u=Math.log(t/e.compared.targetZoom),f=(e.halfWindowPanAtZoom(t)+i.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*n*(-2*n*o*f-2*n*u+2*o+2*u*f/(r*r)-f/(t*t))/(e.desiredPixelFlow*Math.LN2)}function ICe(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function TCe(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function $Ce(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function MCe(e){const t=e.compared.sourceZoom-e.compared.targetZoom;if(t===0)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));const i=Math.LN2*e.compared.pan,r=t,n=e.halfWindowPanAtZoom(r),o=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*n);return e.compared.sourceZoom<=e.compared.targetZoom?o*(i-n):o*(i+n)}function CCe(e,t){let i=ACe(e,t);const r={ascensionFactor:t.ascensionFactor!=null?t.ascensionFactor:.5,descensionFactor:t.descensionFactor!=null?t.descensionFactor:.5},n=r.ascensionFactor===0,o=r.descensionFactor===0,u=n?mCe:pCe,f=n?gCe:fCe,g=n?vCe:yCe,b=o?ICe:SCe,E=o?TCe:xCe,I=o?$Ce:ECe,M=W=>u(e,W,r)+wCe(e,W,r)+b(e,W,r),k=W=>f(e,W,r)+bCe(e,W,r)+E(e,W,r),L=W=>g(e,W,r)+_Ce(e,W,r)+I(e,W,r);let P=M(i);const D=MCe(e);let j;const z=t.maximumIterations||20,V=t.maximumDistance!=null?t.maximumDistance:1/0;for(j=0;j<z;j++){const W=t.desiredSlope??1e-6;let Q=k(i);Math.abs(Q)>W&&(Q+=W);const Z=Q/L(i);if(isNaN(Z)||i>=V&&Z<0){if(!isFinite(V))return null;i=V,P=M(i);break}if(i-=Z,i<e.compared.sourceZoom||i<e.compared.targetZoom)return null;const ee=M(i);if(Math.abs(ee-P)/P<=.005)break;P=ee}return P>D*(1-.3)||i<e.compared.sourceZoom||i<e.compared.targetZoom?null:i}function ACe(e,t){const i=Math.max(e.compared.sourceZoom,e.compared.targetZoom),r=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return r<i?t.maximumDistance!=null?i+(t.maximumDistance-i)/2:1.5*i:t.maximumDistance?Math.min(t.maximumDistance,r):r}let kCe=class extends hCe{constructor(t,i){super(),this._preallocSegments=[new UM,new UM,new UM],this._ascensionSegment=null,this._descensionSegment=null,this.update(t,i)}update(t,i){if(!t)return;this.definition?this.definition.copyFrom(t):this.definition=t.clone();const r=i!=null&&i.apex?CCe(t,i.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,i==null?void 0:i.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(t,i,r){t.interpolateComponentsAt(i,r),t===this._ascensionSegment?r.zoom=rCe(r.zoom):t===this._descensionSegment&&(r.zoom=ele(r.zoom))}_updateWithApex(t,i){const[r,n,o]=this._preallocSegments,u=(i==null?void 0:i.ascensionFactor)??.5,f=Math.min(1-u,(i==null?void 0:i.ascensionFactor)!=null&&i.descensionFactor!=null?i.descensionFactor:.5),g=1-u-f;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=t,r.definition.compared.pan=this.definition.compared.pan*u,r.definition.compared.rotate=this.definition.compared.rotate*u,r.definition.segmentEnd=u,r.update(),this._ascensionSegment=r,this.segments.push(r),g>0&&(n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.copyFrom(this.definition),n.definition.compared.sourceZoom=t,n.definition.compared.targetZoom=t,n.definition.compared.pan=this.definition.compared.pan*g,n.definition.compared.rotate=this.definition.compared.rotate*g,n.definition.segmentStart=r.definition.segmentEnd,n.definition.segmentEnd=r.definition.segmentEnd+g,n.update(),this.segments.push(n)),o.definition?o.definition.copyFrom(this.definition):o.definition=this.definition.clone(),o.definition.compared.sourceZoom=t,o.definition.compared.pan=this.definition.compared.pan*f,o.definition.compared.rotate=this.definition.compared.rotate*f,o.definition.segmentStart=u+g,o.update(),this._descensionSegment=o,this.segments.push(o)}_updateWithoutApex(){const[t]=this._preallocSegments;t.update(this.definition),this.segments.push(t)}};const LCe=new cCe;let OCe=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(t){this._time=0,this._easing=BB,this.definition=new uCe(t),this.path=new kCe}update(t,i,r){this.definition.update(t,i,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(W2e(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?BB:sCe)}cameraAt(t,i){t=Math.min(Math.max(0,t),1),t=this._normalizedEasing(t);const r=this.path.interpolateComponentsAt(t,LCe);i.interpolate(this.definition.source,this.definition.target,r)}_normalizedEasing(t){const i=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(t,this._time)-i)/(r-i)}_applyTimeSettings(t,i){const r=i.speedFactor!=null?i.speedFactor:1,n=i.minDuration??T_.minDuration/r,o=i.maxDuration??T_.maxDuration/r;return t=i.duration!=null?i.duration:Math.min(Math.max(t/r,n),o)}};const qB=2e3,RCe=64;let PCe=class{constructor(t){this._view=t,this._animation=new OCe(()=>new GB(this._view)),this._current=new GB(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,i,r={}){Ns(this._current.viewpoint,t),Ns(this._source.viewpoint,t),Ns(this._target.viewpoint,i),this._animation.update(this._source,this._target,r)}applyRatio(t,i){this._animation.cameraAt(i,this._current),Ns(t,this._current.viewpoint)}},E1=class extends De{constructor(t){super(t),this._animation=null,this._destinationViewState=new JF,this.updateFunction=null,this.easing=oc.ease,this.viewpoint=new Fn({targetGeometry:new lt,scale:0,rotation:0}),this._updateTask=Av({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new PCe(t.view)}destroy(){this._updateTask=tr(this._updateTask)}get animation(){return this._animation}set animation(t){this._animation=t,this.view.animation=t}animate(t,i,r){this.stop();const n=this.viewpoint;Ns(n,i);const o=(typeof(r==null?void 0:r.easing)=="string"?iCe(r.easing):r==null?void 0:r.easing)||this.easing,u=t.target;this._transition.update(this.viewpoint,u,{apex:{maximumDistance:Math.min(Math.min(i.scale,u.scale)*RCe,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:r==null?void 0:r.duration,maxDuration:(r==null?void 0:r.animationMode)==="auto"?1/0:(r==null?void 0:r.maxDuration)??tle.maxDuration,speedFactor:r==null?void 0:r.speedFactor,easing:typeof o=="function"?g=>o(g):void 0}),(r==null?void 0:r.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=u,NCe(this._transition.animation,r,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,u,{duration:0}));const f=()=>{this.animation===t&&this._updateTask&&(t.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(f,f),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinuous(t,i){this.stop(),this.updateFunction=i,this.viewpoint=t;const r=new sL({target:t.clone()}),n=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){var r,n;const i=this.animation;if(i&&i.state!==sL.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime),(r=this.animation)==null||r.update(this.viewpoint);else{const o=performance.now()-this._startTime,u=this._transition.duration,f=u>0?o/u:1,g=f>=1;this._transition.applyRatio(this.viewpoint,f),g&&((n=this.animation)==null||n.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function NCe(e,t,i,r){if((t==null?void 0:t.duration)!=null)return!0;const{time:n,isLinear:o}=e,u=(t==null?void 0:t.speedFactor)||1,f=(t==null?void 0:t.maxDuration)??tle.maxDuration/u;if(we("esri-goto-debug")&&(console.log("speed factor:",u),console.log("adjusted duration:		",n),console.log("adjusted max duration:	",f),console.log("is linear:",o)),n>f)return we("esri-goto-debug")&&console.warn(`failed "auto" heuristic: animations must be shorter than ${f/1e3}s`),!1;if(o){const b=qt(),E=gn(...r.toScreen(b,...i.center)),I=gn(...i.toScreen(b,...r.center)),M=I!=null&&I.x>-(1.5-.5)*i.size[0]&&I.x<(1.5+.5)*i.size[0]&&I.y>-(1.5-.5)*i.size[1]&&I.y<(1.5+.5)*i.size[1],k=E!=null&&E.x>-(1.5-.5)*r.size[0]&&E.x<(1.5+.5)*r.size[0]&&E.y>-(1.5-.5)*r.size[1]&&E.y<(1.5+.5)*r.size[1];if(we("esri-goto-debug")&&(console.log(`dest is within ${1.5} screens at start view:`,M),console.log(`start is within ${1.5} screens at dest view:`,k)),n>qB/u&&!M&&!k)return we("esri-goto-debug")&&console.warn(`failed "auto" heuristic: linear animations must be...
  - shorter than ${qB/1e3/u}s, or
  - shorter than ${f/1e3}s and the destination is close enough to the starting screen, or
  - shorter than ${f/1e3}s and the start point is close enough to the destination screen`),!1}return!0}m([w()],E1.prototype,"easing",void 0),m([w()],E1.prototype,"view",void 0),m([w()],E1.prototype,"viewpoint",void 0),E1=m([H("esri.views.2d.AnimationManager")],E1);const FCe=E1;var Cs;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(Cs||(Cs={}));const rle=Symbol("Yield");let DCe=class{constructor(){this._tasks=new Array,this._runningTasks=w_(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(t){if(this.length===0)return rle;for(;!t.done&&this._process(t);)t.madeProgress()}push(t,i,r){return++this._runningTasks.value,new Promise((n,o)=>this._tasks.push(new HB(n,o,t,i,r))).finally(()=>--this._runningTasks.value)}unshift(t,i,r){return++this._runningTasks.value,new Promise((n,o)=>this._tasks.unshift(new HB(n,o,t,i,r))).finally(()=>--this._runningTasks.value)}_process(t){var r;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const n=va(i.signal);if(n&&!i.abortCallback)i.reject(wi());else{const o=n?(r=i.abortCallback)==null?void 0:r.call(i,wi()):i.callback(t);Fc(o)?o.then(i.resolve,i.reject):i.resolve(o)}}catch(n){i.reject(n)}return!0}cancelAll(){const t=wi();for(const i of this._tasks)if(i.abortCallback){const r=i.abortCallback(t);i.resolve(r)}else i.reject(t);this._tasks.length=0}},HB=class{constructor(t,i,r,n=void 0,o=void 0){this.resolve=t,this.reject=i,this.callback=r,this.signal=n,this.abortCallback=o}},Ib=class extends De{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};m([w()],Ib.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),m([w()],Ib.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),Ib=m([H("esri.views.support.debugFlags")],Ib);const jCe=new Ib;function zCe(){return new EI.Scheduler}var Tt;(function(e){e.RESOURCE_CONTROLLER_IMMEDIATE="immediate",e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.LOD_RENDERER="LoD renderer",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="clouds generator",e.MAPVIEW_FETCH_QUEUE="mapview fetch queue",e.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",e.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",e[e.NONE=0]="NONE",e[e.TEST_PRIO=1]="TEST_PRIO"})(Tt||(Tt={}));const Wa=0,WB=new Map([[Tt.RESOURCE_CONTROLLER_IMMEDIATE,Wa],[Tt.RESOURCE_CONTROLLER,4],[Tt.SLIDE,Wa],[Tt.STREAM_DATA_LOADER,Wa],[Tt.ELEVATION_QUERY,Wa],[Tt.TERRAIN_SURFACE,1],[Tt.SURFACE_GEOMETRY_UPDATES,1],[Tt.LOD_RENDERER,2],[Tt.GRAPHICS_CORE,2],[Tt.I3S_CONTROLLER,2],[Tt.POINT_CLOUD_LAYER,2],[Tt.FEATURE_TILE_FETCHER,2],[Tt.CLOUDS_GENERATOR,2],[Tt.OVERLAY,4],[Tt.STAGE,4],[Tt.GRAPHICS_DECONFLICTOR,4],[Tt.FILTER_VISIBILITY,4],[Tt.SCALE_VISIBILITY,4],[Tt.FRUSTUM_VISIBILITY,4],[Tt.POINT_OF_INTEREST_FREQUENT,6],[Tt.POINT_OF_INTEREST_INFREQUENT,30],[Tt.LABELER,8],[Tt.FEATURE_QUERY_ENGINE,8],[Tt.FEATURE_TILE_TREE,16],[Tt.FEATURE_TILE_TREE_ACTIVE,Wa],[Tt.ELEVATION_ALIGNMENT,12],[Tt.ELEVATION_ALIGNMENT_SCENE,14],[Tt.TEXT_TEXTURE_ATLAS,12],[Tt.TEXTURE_UNLOAD,12],[Tt.LINE_OF_SIGHT_TOOL,16],[Tt.LINE_OF_SIGHT_TOOL_INTERACTIVE,Wa],[Tt.SNAPPING,Wa],[Tt.SHADOW_ACCUMULATOR,30],[Tt.MAPVIEW_FETCH_QUEUE,Wa],[Tt.MAPVIEW_LAYERVIEW_UPDATE,2],[Tt.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,Wa]]);function ZB(e){return WB.has(e)?WB.get(e):typeof e=="number"?e:1}const VCe=6.5,JB=1,UCe=30,GCe=1e3/30,BCe=100,KB=.9;var EI,zf;(function(e){class t{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(o=>o.needsUpdate)}constructor(){this._updating=w_(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new y3("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=Cs.INTERACTING,this._tasks=new _y,this._runQueue=new _y,this._load=0,this._idleStateCallbacks=new _y,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=me(()=>jCe.SCHEDULER_LOG_SLOW_TASKS,o=>this._debug=o,Je);for(const o of Object.keys(Tt))this.performanceInfo.tasks.set(Tt[o],new y3(Tt[o]))}destroy(){this._tasks.toArray().forEach(o=>o.remove()),this._tasks.clear(),tr(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(o){this._updatingChanged(),o&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(o,u){const f=new i(this,o,u);return this._tasks.push(f),this._updatingChanged(),this.performanceInfo.tasks.has(o)||this.performanceInfo.tasks.set(o,new y3(o)),f}registerIdleStateCallbacks(o,u){const f={idleBegin:o,idleEnd:u};this._idleStateCallbacks.push(f),this.state===Cs.IDLE&&this._idleUpdatesStartFired&&f.idleBegin();const g=this;return{remove:()=>this._removeIdleStateCallbacks(f),set idleBegin(b){g._idleUpdatesStartFired&&(f.idleEnd(),g._state===Cs.IDLE&&b()),f.idleBegin=b},set idleEnd(b){f.idleEnd=b}}}get load(){return this._load}set state(o){this._state!==o&&(this._state=o,this.state!==Cs.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(u=>u.idleEnd())))}get state(){return this._state}updateBudget(o){this._test&&(this._test.usedBudget=0),++this._frameNumber;let u=VCe,f=o.frameDuration,g=JB;switch(this.state){case Cs.IDLE:u=0,f=Math.max(BCe,o.frameDuration),g=UCe;break;case Cs.INTERACTING:f=Math.max(GCe,o.frameDuration);case Cs.ANIMATING:}return f=f-o.elapsedFrameTime-u,this.state!==Cs.IDLE&&f<JB&&!this._forceTask?(this._forceTask=!0,!1):(f=Math.max(f,g),this._budget.reset(f,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case Cs.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(o=>o.idleBegin())),this._runIdle();break;case Cs.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(o){this._idleUpdatesStartFired&&o.idleEnd(),this._idleStateCallbacks.removeUnordered(o)}removeTask(o){this._tasks.removeUnordered(o),this._runQueue.removeUnordered(o),this._updatingChanged()}_updateTask(o){this._tasks.forAll(u=>{u.name===o&&u.setPriority(o)})}_getState(o){if(this._runQueue.some(f=>f.name===o))return zf.SCHEDULED;let u=zf.IDLE;return this._tasks.forAll(f=>{f.name===o&&f.needsUpdate&&(f.schedulePriority<=1?u=zf.READY:u!==zf.READY&&(u=zf.WAITING))}),u}_getRuntime(o){let u=0;return this._tasks.forAll(f=>{f.name===o&&(u+=f.runtime)}),u}_resetRuntimes(){this._tasks.forAll(o=>o.runtime=0)}_getRunning(){const o=new Map;if(this._tasks.forAll(f=>{f.needsUpdate&&o.set(f.name,(o.get(f.name)||0)+1)}),o.size===0)return null;let u="";return o.forEach((f,g)=>{u+=f>1?` ${f}x ${g}`:` ${g}`}),u}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const o=this._tasks.reduce((u,f)=>f.needsUpdate?++u:u,0);this._load=this._load*KB+o*(1-KB)}_schedule(){for(this._runQueue.filterInPlace(o=>!!o.needsUpdate||(o.schedulePriority=o.basePriority,!1)),this._tasks.forAll(o=>{o.basePriority===Wa&&o.needsUpdate&&!this._runQueue.includes(o)&&o.blockFrame!==this._frameNumber&&this._runQueue.unshift(o)});this._runQueue.length===0;){let o=!1,u=0;if(this._tasks.forAll(f=>{f.needsUpdate&&f.schedulePriority!==0&&f.basePriority!==Wa&&f.blockFrame!==this._frameNumber&&(o=!0,u=Math.max(u,f.basePriority),f.schedulePriority===1?(f.schedulePriority=0,this._runQueue.push(f)):--f.schedulePriority)}),!o)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const o=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const u=this._budget.now(),f=this._runQueue.pop();this._budget.resetProgress();try{f.task.runTask(this._budget)===rle&&(f.blockFrame=this._frameNumber)}catch(b){Se.getLogger("esri.views.support.Scheduler").error(`Exception in task "${f.name}"`,b),f.blockFrame=this._frameNumber}!this._budget.hasProgressed&&f.blockFrame!==this._frameNumber&&f.needsUpdate&&(f.name,Tt.I3S_CONTROLLER,f.blockFrame=this._frameNumber),f.schedulePriority=f.basePriority;const g=this._budget.now()-u;if(f.runtime+=g,this._frameTaskTimes.set(f.priority,this._frameTaskTimes.get(f.priority)+g),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-o)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-o)}_startFrameTaskTimes(){for(const o of Object.keys(Tt))this._frameTaskTimes.set(Tt[o],0)}_recordFrameTaskTimes(o){this._frameTaskTimes.forEach((u,f)=>this.performanceInfo.tasks.get(f).push(u)),this.performanceInfo.total.push(o)}get test(){return this._test}}e.Scheduler=t;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(o,u,f){this._scheduler=o,this.name=u,this.blockFrame=0,this.runtime=0,this._queue=new DCe,this._handles=new y2,this._basePriority=ZB(u),this.schedulePriority=this._basePriority,this._task=w_(f??this._queue),this._handles.add(rn(()=>this.task.running,g=>o.taskRunningChanged(g)))}remove(){this.processQueue(nle),this._scheduler.removeTask(this),this.schedule=YB.schedule,this.reschedule=YB.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(o){if(this.name===o)return;this.name=o;const u=ZB(o);this._basePriority!==Wa&&this.schedulePriority===0||(this.schedulePriority=u),this._basePriority=u}get priority(){return this.name}set priority(o){this.setPriority(o)}get needsUpdate(){return this.updating||this.task.running}schedule(o,u,f){return this._queue.push(o,u,f)}reschedule(o,u,f){return this._queue.unshift(o,u,f)}processQueue(o){return this._queue.runTask(o)}}class r{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=Cs.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(o){return!this.done&&(o()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(o){this._enabled=o}reset(o,u){this._begin=this.now(),this._budget=o,this._state=u,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=r})(EI||(EI={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(zf||(zf={}));const nle=(()=>{const e=new EI.Budget;return e.enabled=!1,e})();let qCe=class{remove(){}processQueue(){}schedule(t,i,r){try{if(va(i)){const n=wi();return r?Promise.resolve(r(n)):Promise.reject(n)}return $A(t(nle))}catch(n){return Promise.reject(n)}}reschedule(t,i,r){return this.schedule(t,i,r)}};const YB=new qCe;let HCe=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=zCe(),this.stationary=!0,this.prepare=()=>{var i;this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),((i=this.view.animation)==null?void 0:i.target)==null||Fc(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=i=>{var f;if(this._updateRequested=!1,(f=this.view)==null?void 0:f.destroyed)return;const{allLayerViews:r,graphicsView:n,labelManager:o,state:{id:u}}=this.view;r.forEach(this._updateLayerView,this),o!=null&&(o.lastUpdateId!==u&&(o.viewChange(),o.lastUpdateId=u),o.updateRequested&&o.processUpdate(this._updateParameters)),n!=null&&(n.lastUpdateId!==u&&(n.viewChange(),n.lastUpdateId=u),n.updateRequested&&n.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=Cs.ANIMATING:this.view.interacting?this._scheduler.state=Cs.INTERACTING:this._scheduler.state=Cs.IDLE,this._scheduler.updateBudget(i)&&this._scheduler.frame()}}destroy(){this.stop(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,targetState:new JF,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=me(()=>t.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=Av(this),this.requestUpdate()}stop(){var t;this._frameTaskHandle&&(this._updateRequested=!1,(t=this._stationaryHandle)==null||t.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){var n;if(!t.attached)return void this.requestUpdate();const i=this.view.state,r=t.lastUpdateId;r!=null&&(this.stationary||t.moving)||(t.moving=!0),r!==i.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=i.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&((n=t.layerViews)==null||n.forEach(this._updateLayerView,this))}},r4=class extends De{constructor(t){super(t),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(t,i){if(!t)return void Se.getLogger(this).error("#goTo()","target cannot be null or undefined");const r=new sL;this.view.animation=r,await cl(()=>this.view.ready,i);const n={...i,animate:(i==null?void 0:i.animate)??!DF(),animationMode:(i==null?void 0:i.animationMode)??"auto"},{extent:o,spatialReference:u,size:f,viewpoint:g,constraints:b,padding:E,allLayerViews:I}=this.view,M=QMe(t,{extent:o,spatialReference:u,size:f,viewpoint:g,constraints:b,padding:E,allLayerViews:I,pickClosestTarget:(i==null?void 0:i.pickClosestTarget)??!0});return r==null||r.update(M),this._gotoTask={},n.animate?this._gotoAnimated(M,n):this._gotoImmediate(M,n)}_gotoImmediate(t,i){const r=this._gotoTask,n=this.view.animation,o=t.then(u=>{if(Li(i),r!==this._gotoTask)throw new ne("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=n.target=u,n.finish()});return this._cancellableGoTo(r,n,o,i)}_gotoAnimated(t,i){const r=this._gotoTask,n=this.view.animation;if(!n)return Promise.resolve();const o=t.then(u=>{if(Li(i),r!==this._gotoTask)throw new ne("view:goto-interrupted","Goto was interrupted");return n.update(u),this.view.animationManager.animate(n,this.view.viewpoint,i),n.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,n,o,i)}_cancellableGoTo(t,i,r,n){const o=()=>t===this._gotoTask;return N6(r,n).finally(()=>{o()&&(i.done||i.stop())})}};m([w({constructOnly:!0})],r4.prototype,"view",void 0),r4=m([H("esri.views.2d.GoToManager")],r4);function Ui(){return Promise.all([ce(()=>import("./webglDeps-DNQF78mD.js"),__vite__mapDeps([136,58,57,115,137,116]),import.meta.url),ce(()=>import("./mapViewDeps-DHLK-bI0.js"),__vite__mapDeps([138,62,139,60,61,63,64,59,65,66,29,57,58,56,35,116,71,140,137,78,141,103,102,70,10,142,93,68,69,101,136,115,143,74,144,55,16,14,6,13,145,109,110,95,119,146,147,148,72,67,149,150,151,152,153,154,112,155]),import.meta.url)])}const vw=()=>Ui().then(()=>ce(()=>import("./TileLayerView2D-6C--jOJI.js"),__vite__mapDeps([156,93,65,66,29,57,58,56,35,59,63,60,61,62,64,141,140,116,137,78,103,102,70,10,101,143,74,144,55,16,14,6,13,139,71,68,69,109,110,95,149,150,157,158,154,159,160,152,153,161,162,163,134,135,21,164,165,166]),import.meta.url)),Vf=()=>Ui().then(()=>ce(()=>import("./FeatureLayerView2D-DnzkkqRo.js").then(e=>e.F),__vite__mapDeps([167,10,168,159,141,153,65,66,29,57,58,56,35,59,154,140,116,137,78,103,102,70,139,60,61,62,63,64,71,74,142,93,169,166,161,162]),import.meta.url)),XB={"base-dynamic":()=>Ui().then(()=>ce(()=>import("./BaseDynamicLayerView2D-QvYONtKo.js"),__vite__mapDeps([170,171,140,56,57,58,35,59,116,137,78,141,103,102,70,10,159,172,158,161,162]),import.meta.url)),"base-tile":vw,"bing-maps":vw,catalog:()=>Ui().then(()=>ce(()=>import("./CatalogLayerView2D-DFFcnACj.js"),__vite__mapDeps([173,159,141,161]),import.meta.url)),"catalog-dynamic-group":()=>Ui().then(()=>ce(()=>import("./CatalogDynamicGroupLayerView2D-D9eGdeJA.js"),__vite__mapDeps([174,159,141,161]),import.meta.url)),"catalog-footprint":()=>Ui().then(()=>ce(()=>import("./CatalogFootprintLayerView2D-C9PAUhdh.js"),__vite__mapDeps([175,167,10,168,159,141,153,65,66,29,57,58,56,35,59,154,140,116,137,78,103,102,70,139,60,61,62,63,64,71,74,142,93,169,166,161,162]),import.meta.url)),csv:Vf,"geo-rss":()=>Ui().then(()=>ce(()=>import("./GeoRSSLayerView2D-B3VdJ2Fv.js"),__vite__mapDeps([176,159,141,151,152,153,65,66,29,57,58,56,35,59,154,140,116,137,78,103,102,70,10,139,60,61,62,63,64,71,149,55,16,14,6,13,150,161]),import.meta.url)),feature:Vf,geojson:Vf,parquet:Vf,graphics:()=>Ui().then(()=>ce(()=>import("./GraphicsLayerView2D-kjw1mym4.js"),__vite__mapDeps([177,159,141,151,152,153,65,66,29,57,58,56,35,59,154,140,116,137,78,103,102,70,10,139,60,61,62,63,64,71,149,55,16,14,6,13,150,169,161]),import.meta.url)),group:()=>Ui().then(()=>ce(()=>import("./GroupLayerView2D-tp1qBLBe.js"),__vite__mapDeps([178,159,141,161]),import.meta.url)),imagery:()=>Ui().then(()=>ce(()=>import("./ImageryLayerView2D-D2J87j7R.js"),__vite__mapDeps([179,180,58,116,35,83,140,56,57,59,137,78,141,103,102,70,10,159,149,60,61,62,63,64,55,16,65,66,29,14,6,13,139,71,150,160,152,153,154,171,158,172,86,168,166,161,162]),import.meta.url)),"imagery-tile":()=>Ui().then(()=>ce(()=>import("./ImageryTileLayerView2D-Br4PqM1B.js"),__vite__mapDeps([181,182,180,58,116,35,83,140,56,57,59,137,78,141,103,102,70,10,159,183,154,184,86,168,166,161,162]),import.meta.url)),kml:()=>Ui().then(()=>ce(()=>import("./KMLLayerView2D-D56p5pcO.js"),__vite__mapDeps([185,186,158,141,171,140,56,57,58,35,59,116,137,78,103,102,70,10,159,151,152,153,65,66,29,154,139,60,61,62,63,64,71,149,55,16,14,6,13,150,161,86,145,136,115,109,110,95,144,93,119,183]),import.meta.url)),"knowledge-graph":()=>Ui().then(()=>ce(()=>import("./KnowledgeGraphLayerView2D-C656q44c.js"),__vite__mapDeps([187,159,141,161]),import.meta.url)),"link-chart":()=>Ui().then(()=>ce(()=>import("./KnowledgeGraphLayerView2D-C656q44c.js"),__vite__mapDeps([187,159,141,161]),import.meta.url)),"knowledge-graph-sublayer":Vf,"map-image":()=>Ui().then(()=>ce(()=>import("./MapImageLayerView2D-DVS-0ffz.js"),__vite__mapDeps([188,171,140,56,57,58,35,59,116,137,78,141,103,102,70,10,159,149,60,61,62,63,64,55,16,65,66,29,14,6,13,139,71,150,160,152,153,154,172,158,161,168,162,163,134,135,21,164,165,166]),import.meta.url)),"map-notes":()=>Ui().then(()=>ce(()=>import("./MapNotesLayerView2D-CwCI_e6i.js"),__vite__mapDeps([189,159,141,151,152,153,65,66,29,57,58,56,35,59,154,140,116,137,78,103,102,70,10,139,60,61,62,63,64,71,149,55,16,14,6,13,150,161]),import.meta.url)),media:()=>Ui().then(()=>ce(()=>import("./MediaLayerView2D-DxRfWIQn.js"),__vite__mapDeps([190,191,150,93,65,66,29,57,58,56,35,59,63,60,61,62,64,141,140,116,137,78,103,102,70,10,101,143,74,144,55,16,14,6,13,139,71,68,69,109,110,95,149,148,72,192,159,161]),import.meta.url)),"ogc-feature":()=>Ui().then(()=>ce(()=>import("./OGCFeatureLayerView2D-gVOAwp8t.js"),__vite__mapDeps([193,167,10,168,159,141,153,65,66,29,57,58,56,35,59,154,140,116,137,78,103,102,70,139,60,61,62,63,64,71,74,142,93,169,166,161,162]),import.meta.url)),"open-street-map":vw,"oriented-imagery":Vf,route:()=>Ui().then(()=>ce(()=>import("./RouteLayerView2D-BrPClVL9.js"),__vite__mapDeps([194,195,159,141,151,152,153,65,66,29,57,58,56,35,59,154,140,116,137,78,103,102,70,10,139,60,61,62,63,64,71,149,55,16,14,6,13,150,161]),import.meta.url)),stream:()=>Ui().then(()=>ce(()=>import("./StreamLayerView2D-nVrn28Fb.js"),__vite__mapDeps([196,167,10,168,159,141,153,65,66,29,57,58,56,35,59,154,140,116,137,78,103,102,70,139,60,61,62,63,64,71,74,142,93,169,166,161,162]),import.meta.url)),"subtype-group":()=>Ui().then(()=>ce(()=>import("./SubtypeGroupLayerView2D-CxXhfS-i.js"),__vite__mapDeps([197,167,10,168,159,141,153,65,66,29,57,58,56,35,59,154,140,116,137,78,103,102,70,139,60,61,62,63,64,71,74,142,93,169,166,161,162]),import.meta.url)),tile:vw,"vector-tile":()=>Ui().then(()=>ce(()=>import("./VectorTileLayerView2D-ByearBI-.js"),__vite__mapDeps([198,101,64,147,93,71,63,58,116,102,140,56,57,35,59,137,78,141,103,70,10,154,12,104,105,159,161,162]),import.meta.url)),video:()=>Ui().then(()=>ce(()=>import("./VideoLayerView2D-DBln9Blj.js"),__vite__mapDeps([199,200,192,78,140,56,57,58,35,59,116,137,141,103,102,70,10,139,60,61,62,63,64,65,66,29,71,159,151,152,153,154,149,55,16,14,6,13,150,161]),import.meta.url)),wcs:()=>Ui().then(()=>ce(()=>import("./ImageryTileLayerView2D-Br4PqM1B.js"),__vite__mapDeps([181,182,180,58,116,35,83,140,56,57,59,137,78,141,103,102,70,10,159,183,154,184,86,168,166,161,162]),import.meta.url)),"web-tile":vw,wfs:Vf,wms:()=>Ui().then(()=>ce(()=>import("./WMSLayerView2D--q1D-xFI.js"),__vite__mapDeps([201,171,140,56,57,58,35,59,116,137,78,141,103,102,70,10,159,172,158,161,162,202,168]),import.meta.url)),wmts:()=>Ui().then(()=>ce(()=>import("./WMTSLayerView2D-DWVxrTJi.js"),__vite__mapDeps([203,157,158,141,140,56,57,58,35,59,116,137,78,103,102,70,10,154,159,161,162]),import.meta.url)),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,focusArea:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};function WCe(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new ne(`${i}:view-not-supported`,`${t} is not supported in 2D`)}const QB={hasLayerViewModule:e=>XB[e.type]!=null,importLayerView:e=>{const t=XB[e.type];if(t==null)throw WCe(e);return t(e)}};function ZCe(e,t){const{spatialReference:i}=t,r=[t.x,t.y];let n=Number.POSITIVE_INFINITY,o=0,u=0;const f=[0,0],g=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const b of g)for(let E=0;E<b.length-1;E++){T3e(f,r,b,E);const I=MS(r,f);I<n&&(n=I,o=f[0],u=f[1])}return{coordinate:new lt({x:o,y:u,spatialReference:i}),distance:n}}var pL;let iy=pL=class extends vF(De){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return dl(this.geometry,this.spatialReference)}catch(e){return Se.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;const i=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?dS(this.normalizedGeometry,i):LN(this.normalizedGeometry,i))return e;const{coordinate:r}=ZCe(this.normalizedGeometry,i);return r&&(e.targetGeometry=r),e}clone(){var e,t;return new pL({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};m([w({constructOnly:!0})],iy.prototype,"geometry",void 0),m([w({readOnly:!0})],iy.prototype,"normalizedGeometry",null),m([w({constructOnly:!0})],iy.prototype,"spatialReference",void 0),iy=pL=m([H("esri.views.2d.constraints.GeometryConstraint")],iy);var fL;let Tb=fL=class extends vF(De){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new fL({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};m([w()],Tb.prototype,"enabled",void 0),m([w()],Tb.prototype,"rotationEnabled",void 0),Tb=fL=m([H("esri.views.2d.constraints.RotationConstraint")],Tb);const sle=Tb;var yL;let yo=yL=class extends vF(De){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:r,minZoom:n,maxZoom:o}=this,u=-1,f=-1,g=!1,b=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!(t!=null&&t.length))return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);t=t.map(E=>E.clone()),t.sort((E,I)=>I.scale-E.scale),t.forEach((E,I)=>E.level=I);for(const E of t)!g&&i>0&&i>=E.scale&&(u=E.level,g=!0),!b&&r>0&&r>=E.scale&&(f=e?e.level:-1,b=!0),e=E;n===-1&&(n=i===0?0:u),o===-1&&(o=r===0?t.length-1:f),n=Math.max(n,0),n=Math.min(n,t.length-1),o=Math.max(o,0),o=Math.min(o,t.length-1),n>o&&([n,o]=[o,n]),i=t[n].scale,r=t[o].scale,t.splice(0,n),t.splice(o-n+1,t.length),t.forEach((E,I)=>{this._lodByScale[E.scale]=E,this._scales[I]=E.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",o),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,r=this.effectiveMaxScale,n=e.targetGeometry,o=t&&t.targetGeometry,u=r!==0&&e.scale<r,f=i!==0&&e.scale>i;if(u||f){const g=f?i:r;if(t&&o){const b=(g-t.scale)/(e.scale-t.scale);n.x=o.x+(n.x-o.x)*b,n.y=o.y+(n.y-o.y)*b}e.scale=g}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.floor(e),r=Math.ceil(e);return t[i]+(e-i)*(t[r]-t[i])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,r;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let n=0;n<t.length-1;n++){if(i=t[n],r=t[n+1],r===e)return n+this.effectiveMinZoom+1;if(i>e&&r<e)return n+this.effectiveMinZoom+1-(e-r)/(i-r)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new yL({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t,this._scales[0])),this._lodByScale[e].scale}};m([w({readOnly:!0})],yo.prototype,"effectiveLODs",void 0),m([w({readOnly:!0})],yo.prototype,"effectiveMinZoom",void 0),m([w({readOnly:!0})],yo.prototype,"effectiveMaxZoom",void 0),m([w({readOnly:!0})],yo.prototype,"effectiveMinScale",void 0),m([w({readOnly:!0})],yo.prototype,"effectiveMaxScale",void 0),m([w()],yo.prototype,"lods",void 0),m([w()],yo.prototype,"minZoom",void 0),m([w()],yo.prototype,"maxZoom",void 0),m([w()],yo.prototype,"minScale",void 0),m([w()],yo.prototype,"maxScale",void 0),m([w()],yo.prototype,"snapToZoom",void 0),yo=yL=m([H("esri.views.2d.constraints.ZoomConstraint")],yo);const ole=yo,JCe={base:null,key:"type",typeMap:{extent:Ht,polygon:zs}};let Tr=class extends De{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Oe}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){var t,i,r;return`${(t=this._zoom)==null?void 0:t.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(r=this._geometry)==null?void 0:r.uid}`}get _geometry(){var i,r;const t=this._get("_geometry");return t&&this.geometry===t.geometry&&((i=this.view)==null?void 0:i.constraintsInfo.spatialReference)===t.spatialReference?t:new iy({geometry:this.geometry,spatialReference:(r=this.view)==null?void 0:r.constraintsInfo.spatialReference})}get _rotation(){return new sle({rotationEnabled:this.rotationEnabled})}get _zoom(){var g;const t=this._get("_zoom"),i=this.lods||((g=this.view)==null?void 0:g.constraintsInfo.lods),r=this.minZoom,n=this.maxZoom,o=this.minScale,u=this.maxScale,f=this.snapToZoom;return t&&t.lods===i&&t.minZoom===r&&t.maxZoom===n&&t.minScale===o&&t.maxScale===u&&t.snapToZoom===f?t:new ole({lods:i,minZoom:r,maxZoom:n,minScale:o,maxScale:u,snapToZoom:f})}canZoomInTo(t){const i=this.effectiveMaxScale;return i===0||t>=i}canZoomOutTo(t){const i=this.effectiveMinScale;return i===0||t<=i}constrain(t,i){return this._zoom.constrain(t,i),this._rotation.constrain(t,i),this._geometry.constrain(t,i),this.customConstraints.forEach(r=>r.constrain(t,i)),t}constrainByGeometry(t){return this._geometry.constrain(t),this.customConstraints.forEach(i=>{var r;return(r=i.applyPanConstraint)==null?void 0:r.call(i,t)}),t}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};m([w({readOnly:!0})],Tr.prototype,"effectiveLODs",null),m([w({readOnly:!0})],Tr.prototype,"effectiveMinScale",null),m([w({readOnly:!0})],Tr.prototype,"effectiveMaxScale",null),m([w({readOnly:!0})],Tr.prototype,"effectiveMinZoom",null),m([w({readOnly:!0})],Tr.prototype,"effectiveMaxZoom",null),m([w({types:JCe,value:null})],Tr.prototype,"geometry",null),m([w({type:[xp]})],Tr.prototype,"lods",void 0),m([w()],Tr.prototype,"minScale",void 0),m([w()],Tr.prototype,"maxScale",void 0),m([w()],Tr.prototype,"minZoom",void 0),m([w()],Tr.prototype,"maxZoom",void 0),m([w()],Tr.prototype,"rotationEnabled",void 0),m([w()],Tr.prototype,"snapToZoom",void 0),m([w({type:Oe})],Tr.prototype,"customConstraints",void 0),m([w()],Tr.prototype,"view",void 0),m([w({readOnly:!0})],Tr.prototype,"version",null),m([w({type:iy,readOnly:!0})],Tr.prototype,"_geometry",null),m([w({type:sle})],Tr.prototype,"_rotation",null),m([w({readOnly:!0,type:ole})],Tr.prototype,"_zoom",null),Tr=m([H("esri.views.2d.MapViewConstraints")],Tr);const ale=Tr;let vf=class E0{static getId(t,i,r,n){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${i}/${r}/${n}`}constructor(t,i,r,n){this.set(t,i,r,n)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(t){this.set(t)}get hash(){const t=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|t<<8|r}acquire(t,i,r,n){this.set(t,i,r,n)}contains(t){const i=t.level-this.level;return i>=0&&this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}containsChild(t){const i=t.level-this.level;return i>0&&this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new E0(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,i,r,n){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[o,u,f,g]=t.split("/");this.level=parseFloat(o),this.row=parseFloat(u),this.col=parseFloat(f),this.world=parseFloat(g)}else this.level=+t,this.row=+i,this.col=+r,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new E0(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(t,i,r){const n=this.clone();return n.col+=t,n.row+=i,r.normalizeKey(n),n}getChildKeys(){const t=this.level+1,i=this.row<<1,r=this.col<<1,n=this.world;return[new E0(t,i,r,n),new E0(t,i,r+1,n),new E0(t,i+1,r,n),new E0(t,i+1,r+1,n)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}};vf.pool=new $f(vf,null,null,25,50);function Nm(e,t){return[e,t]}function Uf(e,t,i){return e[0]=t,e[1]=i,e}function KCe(e,t,i,r,n){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e}const Il=new vf("0/0/0/0");let YCe=class lle{static create(t,i,r=null){const n=no(t.spatialReference),o=i.origin||Nm(t.origin.x,t.origin.y),u=Nm(t.size[0]*i.resolution,t.size[1]*i.resolution),f=Nm(-1/0,-1/0),g=Nm(1/0,1/0),b=Nm(1/0,1/0);r!=null&&(Uf(f,Math.max(0,Math.floor((r.xmin-o[0])/u[0])),Math.max(0,Math.floor((o[1]-r.ymax)/u[1]))),Uf(g,Math.max(0,Math.floor((r.xmax-o[0])/u[0])),Math.max(0,Math.floor((o[1]-r.ymin)/u[1]))),Uf(b,g[0]-f[0]+1,g[1]-f[1]+1));const{cols:E,rows:I}=i;let M,k,L,P;return!r&&E&&I&&(Uf(f,E[0],I[0]),Uf(g,E[1],I[1]),Uf(b,E[1]-E[0]+1,I[1]-I[0]+1)),t.isWrappable?(M=Nm(Math.ceil(Math.round((n.valid[1]-n.valid[0])/i.resolution)/t.size[0]),b[1]),k=!0,L=n.origin,P=n.valid):(M=b,k=!1),new lle(i.level,i.resolution,i.scale,o,f,g,b,u,M,k,L,P)}constructor(t,i,r,n,o,u,f,g,b,E,I,M){this.level=t,this.resolution=i,this.scale=r,this.origin=n,this.first=o,this.last=u,this.size=f,this.norm=g,this.worldSize=b,this.wrap=E,this._spatialReferenceOrigin=I,this._spatialReferenceValid=M}normalizeCol(t){if(!this.wrap)return t;const i=this.worldSize[0];return t<0?i-1-Math.abs((t+1)%i):t%i}normalizeKey(t){if(!this.wrap)return;const i=this.worldSize[0],r=t.col;r<0?(t.col=r+i,t.world-=1):r>=i&&(t.col=r-i,t.world+=1)}denormalizeCol(t,i){return this.wrap?this.worldSize[0]*i+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){const i=this.origin[0]+t*this.norm[0],r=this._spatialReferenceOrigin,n=this._spatialReferenceValid;return this.wrap&&r&&n?i===r[0]?n[0]:this.origin[0]===r[0]&&t===this.worldSize[0]?n[1]:i:i}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,i,r=!1){Il.set(i);const n=r?Il.col:this.denormalizeCol(Il.col,Il.world),o=Il.row;return KCe(t,this.getXForColumn(n),this.getYForRow(o+1),this.getXForColumn(n+1),this.getYForRow(o)),t}getTileCoords(t,i,r=!1){Il.set(i);const n=r?Il.col:this.denormalizeCol(Il.col,Il.world);return Array.isArray(t)?Uf(t,this.getXForColumn(n),this.getYForRow(Il.row)):(t.x=this.getXForColumn(n),t.y=this.getYForRow(Il.row)),t}},$_=class{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}*keys(){const t=this.lodInfo;for(const{row:i,colFrom:r,colTo:n}of this.spans)for(let o=r;o<=n;o++){const u=t.getWorldForColumn(o);yield new vf(t.level,i,t.normalizeCol(o),u)}}forEach(t,i){const{spans:r,lodInfo:n}=this,{level:o}=n;if(r.length!==0)for(const{row:u,colFrom:f,colTo:g}of r)for(let b=f;b<=g;b++)t.call(i,o,u,n.normalizeCol(b),n.getWorldForColumn(b))}};$_.pool=new $f($_);let GM=class{constructor(t,i,r){this.row=t,this.colFrom=i,this.colTo=r}};const Hi=new vf("0/0/0/0");let XCe=class ule{static create(t,i){t[1]>i[1]&&([t,i]=[i,t]);const[r,n]=t,[o,u]=i,f=o-r,g=u-n,b=g!==0?f/g:0,E=(Math.ceil(n)-n)*b,I=(Math.floor(n)-n)*b;return new ule(r,Math.floor(n),Math.ceil(u),b,f<0?E:I,f<0?I:E,f<0?o:r,f<0?r:o)}constructor(t,i,r,n,o,u,f,g){this.x=t,this.ymin=i,this.ymax=r,this.invM=n,this.leftAdjust=o,this.rightAdjust=u,this.leftBound=f,this.rightBound=g}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const qo=[[0,0],[0,0],[0,0],[0,0]],QCe=1e-6;let eAe=class{constructor(t,i=null,r=t.lods[0].level,n=t.lods[t.lods.length-1].level){this.tileInfo=t,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const o=t.lods.filter(f=>f.level>=r&&f.level<=n);this.minScale=o[0].scale,this.maxScale=o[o.length-1].scale;const u=this._lodInfos=o.map(f=>YCe.create(t,f,i));o.forEach((f,g)=>{this._infoByLevel[f.level]=u[g],this._infoByScale[f.scale]=u[g],this.scales[g]=f.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,i,r=!1){Hi.set(i);const n=this._infoByLevel[Hi.level];return n?n.getTileBounds(t,Hi,r):t}getTileCoords(t,i,r=!1){Hi.set(i);const n=this._infoByLevel[Hi.level];return n?n.getTileCoords(t,Hi,r):t}getTileCoverage(t,i=192,r=!0,n="closest"){if(!r&&(t.scale>this.minScale||t.scale<this.maxScale))return null;const o=n==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),u=$_.pool.acquire(o),f=this._wrap;let g,b,E,I=1/0,M=-1/0;const k=u.spans;qo[0][0]=qo[0][1]=qo[1][1]=qo[3][0]=-i,qo[1][0]=qo[2][0]=t.size[0]+i,qo[2][1]=qo[3][1]=t.size[1]+i;for(const j of qo)t.toMap(j,j),j[0]=o.getColumnForX(j[0]),j[1]=o.getRowForY(j[1]);const L=[];let P=3;for(let j=0;j<4;j++){if(qo[j][1]===qo[P][1]){P=j;continue}const z=XCe.create(qo[j],qo[P]);I=Math.min(z.ymin,I),M=Math.max(z.ymax,M),L[z.ymin]===void 0&&(L[z.ymin]=[]),L[z.ymin].push(z),P=j}if(I==null||M==null||M-I>100)return null;let D=[];for(g=I;g<M;){L[g]!=null&&(D=D.concat(L[g])),b=1/0,E=-1/0;for(let j=D.length-1;j>=0;j--){const z=D[j];b=Math.min(b,z.getLeftCol()),E=Math.max(E,z.getRightCol())}if(b=Math.floor(b),E=Math.floor(E),g>=o.first[1]&&g<=o.last[1])if(f)if(o.size[0]<o.worldSize[0]){const j=Math.floor(E/o.worldSize[0]);for(let z=Math.floor(b/o.worldSize[0]);z<=j;z++)k.push(new GM(g,Math.max(o.getFirstColumnForWorld(z),b),Math.min(o.getLastColumnForWorld(z),E)))}else k.push(new GM(g,b,E));else b>o.last[0]||E<o.first[0]||(b=Math.max(b,o.first[0]),E=Math.min(E,o.last[0]),k.push(new GM(g,b,E)));g+=1;for(let j=D.length-1;j>=0;j--){const z=D[j];z.ymax>=g?z.incrRow():D.splice(j,1)}}return u}getTileParentId(t){Hi.set(t);const i=this._infoByLevel[Hi.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(Hi,this._lodInfos[r],Hi),Hi.id)}getTileResolution(t){const i=this._infoByLevel[typeof t=="object"?t.level:t];return i?i.resolution:-1}getTileScale(t){const i=this._infoByLevel[t.level];return i?i.scale:-1}intersects(t,i){Hi.set(i);const r=this._infoByLevel[Hi.level],n=t.lodInfo;if(n.resolution>r.resolution){this._getTileIdAtLOD(Hi,n,Hi);const u=n.denormalizeCol(Hi.col,Hi.world);for(const f of t.spans)if(f.row===Hi.row&&f.colFrom<=u&&f.colTo>=u)return!0}if(n.resolution<r.resolution){const[u,f,g,b]=t.spans.reduce((P,D)=>(P[0]=Math.min(P[0],D.row),P[1]=Math.max(P[1],D.row),P[2]=Math.min(P[2],D.colFrom),P[3]=Math.max(P[3],D.colTo),P),[1/0,-1/0,1/0,-1/0]),E=r.denormalizeCol(Hi.col,Hi.world),I=n.getColumnForX(r.getXForColumn(E)),M=n.getRowForY(r.getYForRow(Hi.row)),k=n.getColumnForX(r.getXForColumn(E+1))-1,L=n.getRowForY(r.getYForRow(Hi.row+1))-1;return!(I>b||k<g||M>f||L<u)}const o=n.denormalizeCol(Hi.col,Hi.world);return t.spans.some(u=>u.row===Hi.row&&u.colFrom<=o&&u.colTo>=o)}normalizeBounds(t,i,r){if(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],this._wrap){const n=no(this.tileInfo.spatialReference),o=-r*(n.valid[1]-n.valid[0]);t[0]+=o,t[2]+=o}return t}getSmallestInfoForScale(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(t>i[r]+QCe)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(t){const i=this.scales;return this._infoByScale[t]||(t=i.reduce((r,n)=>Math.abs(n-t)<Math.abs(r-t)?n:r,i[0])),this._infoByScale[t]}scaleToLevel(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let r=i.length-1;r>=0;r--)if(t<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-t)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}zoomToScale(t){return this.tileInfo.zoomToScale(t)}_getTileIdAtLOD(t,i,r){const n=this._infoByLevel[r.level];return t.set(r),i.resolution<n.resolution?null:(i.resolution===n.resolution||(t.level=i.level,t.col=Math.floor(r.col*n.resolution/i.resolution+.01),t.row=Math.floor(r.row*n.resolution/i.resolution+.01)),t)}},tAe=class{constructor(t,i){this.item=t,this.controller=i,this.promise=null}},iAe=class{constructor(t){this._schedule=null,this._task=null,this._deferreds=new sf,this._controllers=new sf,this._processingItems=new sf,this._pausedSignal=w_(!1),this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new rI(t.peeker),this.process=t.process;const i=t.scheduler;t.priority&&i&&(this._task=i.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule=tr(this._schedule),this._task=tr(this._task)}get updating(){var t;return!!((t=this._task)!=null&&t.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(t){const i=this._controllers.get(t);i&&i.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(i=>t.push(i)),this._controllers.clear(),t.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((i,r)=>t(r))}get(t){const i=this._deferreds.get(t);return i?i.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(t,i){const r=this.get(t);if(r)return r;const n=new AbortController;let o=null;i&&(o=nl(i,()=>n.abort()));const u=()=>{const E=this._processingItems.get(t);E&&E.controller.abort(),f(),b.reject(wi())},f=()=>{g.remove(),o!=null&&o.remove(),this._removeItem(t),this._queue.remove(t),this._scheduleNext()},g=yN(n.signal,u),b=wa();return this._deferreds.set(t,b),this._controllers.set(t,n),b.promise.then(f,f),this._queue.push(t),this._scheduleNext(),b.promise}last(){return this._queue.last()}lastPromise(){const t=this.last();return t?this.get(t):null}peek(){return this._queue.peek()}popLast(){var i;const t=this._queue.popLast();return t&&((i=this._deferreds.get(t))==null||i.reject(wi()),this._removeItem(t)),t}reset(){const t=Array.from(this._processingItems.values());this._processingItems.clear();for(const i of t)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_removeItem(t){this._deferreds.delete(t),this._controllers.delete(t),this._processingItems.delete(t)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=uS(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(i))}_processError(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(i))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(t==null)return;let i;const r=new AbortController,n=new tAe(t,r);this._processingItems.set(t,n);try{i=this.process(t,r.signal)}catch(o){this._processError(n,o)}Fc(i)?(n.promise=i,i.then(o=>this._processResult(n,o),o=>this._processError(n,o))):this._processResult(n,i)}get test(){}};const eq=[0,0];let lh=class extends De{constructor(t){super(t),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:t,process:i,scheduler:r,priority:n}=this;this._queue=new iAe({concurrency:t,scheduler:r,priority:n,process:(o,u)=>{const f=this._keyToItem.get(o);return i(f,{signal:u})},peeker:o=>this._peek(o)})}destroy(){this.clear(),this._queue=Jt(this._queue)}get length(){return this._queue?this._queue.length:0}abort(t){const i=typeof t=="string"?t:t.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}pause(){this._queue.pause()}push(t){const i=t.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),n=this.tileInfoView.getTileScale(t.key),o=c2(this._tilesByScale,n,()=>new Set),u=()=>{o.delete(t.key),o.size===0&&this._tilesByScale.delete(n),this._keyToItem.delete(i)};return o.add(t.key),this._keyToItem.set(i,t),r.then(u,u),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(t){if(!this.state)return t.values().next().value;const i=new Set;for(const u of t)i.add(this._keyToItem.get(u).key);const r=this.state.scale;let n,o=Number.POSITIVE_INFINITY;for(const[u,f]of this._tilesByScale)if(nte(f,g=>i.has(g))){const g=Math.abs(u-r);g<o&&(n=f,o=g)}return this._getClosestTileKey(n,t).id}_getClosestTileKey(t,i){const r=this.tileInfoView,n=this.state.center;let o,u=Number.POSITIVE_INFINITY;for(const f of t)if(i.has(f.id)){r.getTileCoords(eq,f);const g=MS(eq,n);g<u&&(u=g,o=f)}return o}};m([w({constructOnly:!0})],lh.prototype,"concurrency",void 0),m([w({constructOnly:!0})],lh.prototype,"priority",void 0),m([w({constructOnly:!0})],lh.prototype,"process",void 0),m([w({constructOnly:!0})],lh.prototype,"scheduler",void 0),m([w()],lh.prototype,"state",void 0),m([w({constructOnly:!0})],lh.prototype,"tileInfoView",void 0),lh=m([H("esri.views.2d.tiling.TileQueue")],lh);const Iot=lh;let rAe=class{constructor(t,i,r){this.maxSize=t,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const i=this._tilePerId.get(t);if(!i)return;const r=i.key.level,n=this._tileKeysPerLevel[r];tq(this._tilePerId,t);for(let o=0;o<n.length;o++)if(n[o].id===t){n.splice(o,1);break}return i.visible=!0,i}add(t){t.visible=!1;const i=t.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,t);const n=i.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(i)}prune(t,i,r){let n=this._tilePerId.size;if(n<=this.maxSize)return;let o=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&o>=0;)o!==t&&(n=this._pruneAroundCenterTile(n,i,r,o)),o--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,i,r,t))}_pruneAroundCenterTile(t,i,r,n){const o=this._tileKeysPerLevel[n];if(!o||o.length===0)return t;const{size:u,origin:f}=this._tileInfoView.tileInfo,g=r*u[0],b=r*u[1],E=[0,0],I=[0,0];for(o.sort((M,k)=>(E[0]=f.x+g*(M.col+.5),E[1]=f.y-b*(M.row+.5),I[0]=f.x+g*(k.col+.5),I[1]=f.y-b*(k.row+.5),Hv(E,i)-Hv(I,i)));o.length>0;){const M=o.pop();if(this._removeTile(M.id),--t===this.maxSize)break}return t}_removeTile(t){const i=this._tilePerId.get(t);this._removedFunc&&i&&this._removedFunc(i),tq(this._tilePerId,t)}};function tq(e,t){e.delete(t)}const Gf=new vf(0,0,0,0),Hc=new Map,ww=[],BM=[];let $ot=class{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,t.resampling!=null&&(this.resampling=t.resampling),t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new rAe(t.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(t){var j,z;const{resampling:i,tileIndex:r}=this,{scale:n,center:o,resolution:u}=t.state,{minScale:f,maxScale:g}=this.tileInfoView,b=!t.stationary&&n>this._previousScale;if(this._previousScale=n,!i&&(n>f||n<g))return this.tiles.length=0,void this.clear();const E=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.resampling,this.coveragePolicy);if(!E)return this.tiles.length=0,void this.clear();const{spans:I,lodInfo:M}=E,{level:k}=M;this.tiles.length=0,r.forEach(V=>V.visible=!0);let L=0,P=0;if(I.length>0)for(const{row:V,colFrom:W,colTo:Q}of I)for(let Z=W;Z<=Q;Z++){L++;const ee=Gf.set(k,V,M.normalizeCol(Z),M.getWorldForColumn(Z)).id;let ie=r.get(ee);if(ie)ie.isReady?(Hc.set(ee,ie),P++):b||this._addParentTile(ee,Hc);else{if((j=this._tileCache)!=null&&j.has(ee)){if(ie=this._tileCache.pop(ee),this.tileIndex.set(ee,ie),ie.isReady){Hc.set(ee,ie),P++;continue}}else ie=this.acquireTile(Gf),this.tileIndex.set(ee,ie);b||this._addParentTile(ee,Hc)}}const D=P===L;for(const[V,W]of r){if(Hc.has(V))continue;Gf.set(V);const Q=this.tileInfoView.intersects(E,Gf),Z=this.cachePolicy==="purge"?Gf.level!==k:Gf.level>k;!Q||!b&&D?!Z&&Q||ww.push(W):W.isReady?Z&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Gf,k)?ww.push(W):BM.push(W):Z&&ww.push(W)}for(const V of BM)V.isReady&&Hc.set(V.key.id,V);for(const V of ww)this._tileCache?this._tileCache.add(V):this.releaseTile(V),r.delete(V.key.id);for(const V of Hc.values())this.tiles.push(V);for(const V of r.values())Hc.has(V.key.id)||(V.visible=!1);(z=this._tileCache)==null||z.prune(k,o,u),$_.pool.release(E),BM.length=0,ww.length=0,Hc.clear()}clear(){const{tileIndex:t}=this;for(const i of t.values())this.releaseTile(i);t.clear()}refresh(t){var i;for(const r of this.tileIndex.values())t(r);(i=this._tileCache)==null||i.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,i){var o;let r=t,n=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(n=this.tileIndex.get(r),n==null?void 0:n.isReady){i.has(n.key.id)||i.set(n.key.id,n);break}}else if((o=this._tileCache)!=null&&o.has(r)&&(n=this._tileCache.pop(r),this.tileIndex.set(r,n),n==null?void 0:n.isReady)){i.has(n.key.id)||i.set(n.key.id,n);break}}_hasReadyAncestor(t,i){const r=to();this.tileInfoView.getTileBounds(r,t,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=i&&n.key.level<t.level){const o=to();if(this.tileInfoView.getTileBounds(o,n.key,!0),G3e(o,r))return!0}return!1}},Es=class extends De{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([me(()=>{var i;return(i=this.constraints)==null?void 0:i.version},i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},hl)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new lt({x:t[0],y:t[1],spatialReference:i})}set center(t){if(t==null)return;if(!this.ready)return void this._set("center",t);let i;try{i=this._project(t,this.state.spatialReference)}catch(n){return void Se.getLogger(this).error(new ne("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:n}))}const r=this.viewpoint;lL(r,r,i),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void Se.getLogger(this).error(new ne("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(t,this.state.spatialReference)}catch(n){return void Se.getLogger(this).error(new ne("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}const r=this.viewpoint;i7e(r,r,i,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const i=this.viewpoint;d7e(i,i,t),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const i=this.viewpoint;VB(i,i,t),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){var o;if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,r;try{i=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?r=new ne("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(r=new ne("mapview:invalid-viewpoint","geometry not defined"))}catch(u){r=new ne("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:u})}if(r)return void Se.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const n=new Fn({targetGeometry:new lt,scale:0,rotation:0});Ns(n,i),(o=this.constraints)==null||o.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this._set("viewpoint",n)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){var t;return this.ready?((t=this.constraints)==null?void 0:t.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(t){var n,o;if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const u=this._get("extent");return void(u&&(this._set("extent",void 0),this._set("center",u.center)))}const i=((n=this.constraints)==null?void 0:n.zoomToScale(t))??0;if(!i)return void this._set("zoom",-1);const r=this.viewpoint;VB(r,r,i),this.viewpoint=r,this._set("zoom",((o=this.constraints)==null?void 0:o.scaleToZoom(this.scale))??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:r}=this,n=this._get("center"),o=this._get("extent"),u=this._get("scale"),f=this._get("rotation"),g=this._get("viewpoint"),b=this._get("zoom"),E=b!=null&&r!=null&&r.zoomToScale(b)||void 0;let I,M,k;const L=g==null?void 0:g.rotation,P=g==null?void 0:g.targetGeometry;(P==null?void 0:P.type)==="extent"?I=P:(P==null?void 0:P.type)==="point"&&(M=P,k=g==null?void 0:g.scale);const D=o??I;return{center:n??M??(D==null?void 0:D.center),rotation:f??L,scale:(u??E??k??(D&&AT(D,[t[0]-i.left-i.right,t[1]-i.top-i.bottom])))||void 0}}startup(t,i,r,n){var u;const o=t.targetGeometry;try{this._project(t,r)}catch(f){Se.getLogger(this).warn(new ga("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:o.toJSON(),spatialReference:r,error:f})),t.targetGeometry=n||new lt({x:0,y:0,spatialReference:r})}(u=this.constraints)==null||u.fit(t),this._set("state",new JF({padding:this.padding,size:i,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,i],spatialReference:r,rotation:n,scale:o}=this.state.paddedViewState,u=new lt({x:t,y:i,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",u),this._set("zoom",-1),this._set("rotation",n),this._set("scale",o),this._set("state",null)}changeSpatialReference(t){var g;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const b=i.viewpoint.clone();b.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=b}const r=i.clone(),[n,o]=i.center;let u=null;try{u=this._project(new lt({x:n,y:o,spatialReference:i.spatialReference}),t)}catch(b){MN()||Se.getLogger(this).warn(new ga("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:u==null?void 0:u.toJSON(),spatialReference:t,error:b}))}u||(u=new lt({x:0,y:0,spatialReference:t}));const f=lL(new Fn({targetGeometry:new lt,scale:0,rotation:0}),i.viewpoint,u);r.viewpoint=f;try{const E=[i.size[0]/2,i.size[1]/2],I=[E[0]+20,E[1]],M=i.toMap([0,0],I),{x:k,y:L}=this._project(new lt({x:M[0],y:M[1],spatialReference:i.spatialReference}),t);M[0]=k,M[1]=L,r.toScreen(M,M);const P=u7e(E,M,I),D=Math.hypot(M[0]-E[0],M[1]-E[1])/20;!Number.isFinite(D)||Math.abs(D)>4?(f.rotation=0,f.targetGeometry=new lt({x:0,y:0,spatialReference:t})):(f.scale*=D,f.scale>we("mapview-srswitch-adjust-rotation-scale-threshold")?f.rotation=0:f.rotation+=Number.isFinite(P)?P:0)}catch{}(g=this._get("constraints"))==null||g.constrain(f,void 0),this._get("state").viewpoint=f}resize(t,i){var u;if(!this.ready)return;const r=this.state;let n=this.state.paddedViewState.viewpoint;const o=this.state.paddedViewState.size.slice();r.size=[t,i],h7e(n,n,o,this.state.paddedViewState.size,this.resizeAlign),n=((u=this.constraints)==null?void 0:u.constrain(n,void 0))??n,this.state.viewpoint=n}toMap(t){if(!this.ready)return null;const i=[0,0],[r,n]=this.state.toMap(i,[t.x,t.y]),o=this.state.spatialReference;return new lt({x:r,y:n,spatialReference:o})}toScreen(t,i){if(!this.ready)return null;const r=this._project(t,this.state.spatialReference),n=[r.x,r.y];return(i==null?void 0:i.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(n,n),this.state.toScreen(n,n),gn(n[0],n[1])}_project(t,i){var o;const r=(t==null?void 0:t.targetGeometry)||t;if(!i)return t;if(!r)return null;if(i.imageCoordinateSystem||(o=r.spatialReference)!=null&&o.imageCoordinateSystem||pr(i,r.spatialReference))return t;const n=dl(r,i);if(!n)throw new ne("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:i});return nAe(t)?(t.targetGeometry=n,t):n}};function nAe(e){return(e==null?void 0:e.declaredClass)==="esri.Viewpoint"}m([w({type:lt})],Es.prototype,"center",null),m([w()],Es.prototype,"constraints",void 0),m([w({type:Ht})],Es.prototype,"extent",null),m([w({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],Es.prototype,"padding",null),m([w()],Es.prototype,"ready",void 0),m([w()],Es.prototype,"resizeAlign",void 0),m([w({readOnly:!0})],Es.prototype,"resolution",null),m([w({type:Number})],Es.prototype,"rotation",null),m([w({type:Number})],Es.prototype,"scale",null),m([w({readOnly:!0})],Es.prototype,"state",void 0),m([w({type:Fn})],Es.prototype,"viewpoint",null),m([w({readOnly:!0})],Es.prototype,"visibleArea",null),m([w()],Es.prototype,"zoom",null),Es=m([H("esri.views.2d.ViewStateManager")],Es);function KF(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}let iq=class extends Sn{constructor(t,i){super(!0),this._view=t,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(t,i){KF(t.data,"primary")&&(t.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},sAe=class extends Sn{constructor(t,i,r){super(!0),this.view=t,this.pointerType=i,this.registerIncoming("double-tap-drag",r,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(t){const{data:i}=t,{pointerType:r}=i;if(r!==this.pointerType)return;t.stopPropagation();const{action:n,delta:o}=i,{view:u}=this,{mapViewNavigation:f}=u;switch(n){case"begin":{const{scale:g}=u;this._startScale=g,this._currentScale=g,this._previousDelta=o,f.begin();break}case"update":{if(this._previousDelta.y===o.y)return;this._previousDelta=o;const g=1.015**o.y,b=this._startScale*g,E=b/this._currentScale;f.setViewpointImmediate(E),this._currentScale=b;break}case"end":{const{constraints:g}=u,{effectiveLODs:b,snapToZoom:E}=g;if(!E||!b)return void f.end();const I=g.snapScale(this._currentScale),M=(o.y>0?Math.max(I,g.snapToPreviousScale(this._startScale)):Math.min(I,g.snapToNextScale(this._startScale)))/this._currentScale;f.zoom(M).then(()=>{f.end()});break}}}},LT=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const i=t.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){var i,r;this._startEvent=t,(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}},oAe=class extends Sn{constructor(t,i,r){super(!0),this.view=t,this.pointerAction=i,this.registerIncoming("drag",r,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new LT({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&KF(r.data,this.pointerAction)})}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},aAe=class extends Sn{constructor(t,i,r){super(!0),this._view=t,this.pointerAction=i;const n=this._view.mapViewNavigation;this._dragEventSeparator=new LT({start:(o,u)=>{n.rotate.begin(this._view,u.data),u.stopPropagation()},update:(o,u)=>{n.rotate.update(this._view,u.data),u.stopPropagation()},end:(o,u)=>{n.rotate.end(),u.stopPropagation()},condition:(o,u)=>o===1&&KF(u.data,this.pointerAction)}),this.registerIncoming("drag",r,o=>this._dragEventSeparator.handle(o))}};function Su(e){const t=e[0],i=e[1],r=e[2];return Math.sqrt(t*t+i*i+r*r)}function wf(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function bn(e,t,i,r){return e[0]=t,e[1]=i,e[2]=r,e}function Pf(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function sn(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function cle(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function hle(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function lAe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function uAe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function cAe(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function hAe(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function dAe(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function pAe(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function fAe(e,t=0,i=1){return e[0]=Math.min(Math.max(e[0],t),i),e[1]=Math.min(Math.max(e[1],t),i),e[2]=Math.min(Math.max(e[2],t),i),e}function yAe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function Iu(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function Pn(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e}function N2(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(i*i+r*r+n*n)}function Kv(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2];return i*i+r*r+n*n}function OT(e){const t=e[0],i=e[1],r=e[2];return t*t+i*i+r*r}function mAe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function gAe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function fl(e,t){const i=t[0],r=t[1],n=t[2];let o=i*i+r*r+n*n;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}function vi(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function yl(e,t,i){const r=t[0],n=t[1],o=t[2],u=i[0],f=i[1],g=i[2];return e[0]=n*g-o*f,e[1]=o*u-r*g,e[2]=r*f-n*u,e}function vAe(e,t,i){const r=t[0],n=t[1],o=t[2],u=i[0],f=i[1],g=i[2],b=n*g-o*f,E=o*u-r*g,I=r*f-n*u,M=Math.sqrt(b*b+E*E+I*I);return e[0]=b/M,e[1]=E/M,e[2]=I/M,e}function YF(e,t,i,r){const n=t[0],o=t[1],u=t[2];return e[0]=n+r*(i[0]-n),e[1]=o+r*(i[1]-o),e[2]=u+r*(i[2]-u),e}function wAe(e,t,i,r,n,o){const u=o*o,f=u*(2*o-3)+1,g=u*(o-2)+o,b=u*(o-1),E=u*(3-2*o);return e[0]=t[0]*f+i[0]*g+r[0]*b+n[0]*E,e[1]=t[1]*f+i[1]*g+r[1]*b+n[1]*E,e[2]=t[2]*f+i[2]*g+r[2]*b+n[2]*E,e}function bAe(e,t,i,r,n,o){const u=1-o,f=u*u,g=o*o,b=f*u,E=3*o*f,I=3*g*u,M=g*o;return e[0]=t[0]*b+i[0]*E+r[0]*I+n[0]*M,e[1]=t[1]*b+i[1]*E+r[1]*I+n[1]*M,e[2]=t[2]*b+i[2]*E+r[2]*I+n[2]*M,e}function _Ae(e,t=1){const i=hT,r=2*i()*Math.PI,n=2*i()-1,o=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(r)*o,e[1]=Math.sin(r)*o,e[2]=n*t,e}function dle(e,t,i){const r=t[0],n=t[1],o=t[2];return e[0]=i[0]*r+i[4]*n+i[8]*o+i[12],e[1]=i[1]*r+i[5]*n+i[9]*o+i[13],e[2]=i[2]*r+i[6]*n+i[10]*o+i[14],e}function SAe(e,t,i){const r=t[0],n=t[1],o=t[2];return e[0]=r*i[0]+n*i[3]+o*i[6],e[1]=r*i[1]+n*i[4]+o*i[7],e[2]=r*i[2]+n*i[5]+o*i[8],e}function xAe(e,t,i){const r=i[0],n=i[1],o=i[2],u=i[3],f=t[0],g=t[1],b=t[2],E=n*b-o*g,I=o*f-r*b,M=r*g-n*f,k=n*M-o*I,L=o*E-r*M,P=r*I-n*E,D=2*u;return e[0]=f+E*D+2*k,e[1]=g+I*D+2*L,e[2]=b+M*D+2*P,e}function EAe(e,t,i,r){const n=[],o=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],o[0]=n[0],o[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),o[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),e[0]=o[0]+i[0],e[1]=o[1]+i[1],e[2]=o[2]+i[2],e}function IAe(e,t,i,r){const n=[],o=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],o[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),o[1]=n[1],o[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),e[0]=o[0]+i[0],e[1]=o[1]+i[1],e[2]=o[2]+i[2],e}function TAe(e,t,i,r){const n=[],o=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],o[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),o[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),o[2]=n[2],e[0]=o[0]+i[0],e[1]=o[1]+i[1],e[2]=o[2]+i[2],e}function $Ae(e,t){fl(rq,e),fl(nq,t);const i=vi(rq,nq);return i>1?0:i<-1?Math.PI:Math.acos(i)}const rq=nt(),nq=nt();function MAe(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function ki(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function ple(e,t){if(e===t)return!0;const i=e[0],r=e[1],n=e[2],o=t[0],u=t[1],f=t[2],g=Vr();return Math.abs(i-o)<=g*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-u)<=g*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-f)<=g*Math.max(1,Math.abs(n),Math.abs(f))}function CAe(e,t,i){const r=i[0]-t[0],n=i[1]-t[1],o=i[2]-t[2];let u=r*r+n*n+o*o;return u>0?(u=1/Math.sqrt(u),e[0]=r*u,e[1]=n*u,e[2]=o*u,e):(e[0]=0,e[1]=0,e[2]=0,e)}const Ao=sn,AAe=cle,kAe=hle,LAe=N2,OAe=Kv,RAe=Su,II=OT;Object.freeze(Object.defineProperty({__proto__:null,abs:cAe,add:Pf,angle:$Ae,bezier:bAe,ceil:lAe,clamp:fAe,copy:wf,cross:yl,crossAndNormalize:vAe,direction:CAe,dist:LAe,distance:N2,div:kAe,divide:hle,dot:vi,equals:ple,exactEquals:ki,floor:uAe,hermite:wAe,inverse:gAe,len:RAe,length:Su,lerp:YF,max:pAe,min:dAe,mul:AAe,multiply:cle,negate:mAe,normalize:fl,random:_Ae,rotateX:EAe,rotateY:IAe,rotateZ:TAe,round:yAe,scale:Iu,scaleAndAdd:Pn,set:bn,sign:hAe,sqrDist:OAe,sqrLen:II,squaredDistance:Kv,squaredLength:OT,str:MAe,sub:Ao,subtract:sn,transformMat3:SAe,transformMat4:dle,transformQuat:xAe},Symbol.toStringTag,{value:"Module"}));function Tl(e){let t=e*e;return e<0&&(t*=-1),t}function PAe(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function NAe(e,t,i){const r=i,n=e.state,o=e.device,u=t.tiltDirection==="forward-down"?1:-1,f=1;return o.deviceType==="standard"?(r.translation[0]=Tl(n.axes[0]),r.translation[1]=Tl(n.axes[1]),r.translation[2]=Tl(n.buttons[7])-Tl(n.buttons[6]),r.heading=Tl(n.axes[2]),r.tilt=Tl(n.axes[3])):o.deviceType==="spacemouse"&&(r.translation[0]=1.2*Tl(n.axes[0]),r.translation[1]=1.2*Tl(n.axes[1]),r.translation[2]=2*-Tl(n.axes[2]),r.heading=1.2*Tl(n.axes[5]),r.tilt=1.2*Tl(n.axes[3])),r.tilt*=u,Iu(r.translation,r.translation,f),r}function FAe(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}let DAe=class extends Sn{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new y2,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([me(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=Av({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},Je)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const i=this._view.navigation.gamepad.device;i&&t.data.device!==i||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,PAe(this._transformation)):(this._currentDevice=t.data.device,NAe(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){const i=this._transformation;if(FAe(i))return;const r=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,o=zAe*n*t;kT(r,r,[i.translation[0]*o,-i.translation[1]*o]);const u=1+i.translation[2]*VAe*t,f=this._view.constraints.rotationEnabled?-i.heading*jAe*t:0,g=this._view.size,b=[g[0]/2,g[1]];Vae(r,r,u,f,b,g);const E=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=E}};const jAe=.06,zAe=.7,VAe=6e-4;function fle(e){const t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),Yt(()=>document.removeEventListener("visibilitychange",t))}let UAe=class extends Sn{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=n=>{const o=this._keyMap[n.data.key];if(n.modifiers.has("Meta")||n.modifiers.has("Control"))return void this._stopMovement();if(o==null)return;n.stopPropagation(),n.preventDefault();const u=n.type==="key-down";if(this._pressedKeys[u?"add":"delete"](o),u){if(this._direction===o)return;this._direction=o,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const f=this._timeout===void 0,g=this._pressedKeys.size>0;f||g?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=fle(n=>n?null:this._stopMovement())}onUninstall(){var t;this._stopMovement(),(t=this._visibilityHandle)==null||t.remove()}get _direction(){return this._currentDirection}set _direction(t){const i=this._currentDirection!=null;if(t!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}},GAe=class extends Sn{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",r,n=>this._handleKeyUp(n)),this.registerIncoming("blur",r,()=>this._handleStop()),this._visibilityHandle=fle(n=>n?null:this._handleStop())}onUninstall(){var t;(t=this._visibilityHandle)==null||t.remove(),this._handleStop()}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=t.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection[t.data.key];if(this._pressed=n!=null,this._pressed){if(t.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var Fg;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(Fg||(Fg={}));let BAe=class extends Sn{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),i.zoomIn.forEach(n=>this._keysToZoomAction[n]=Fg.IN),i.zoomOut.forEach(n=>this._keysToZoomAction[n]=Fg.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const i=t.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=t.data;if(!(r in this._keysToZoomAction))return;const n=this._keysToZoomAction[r],{mapViewNavigation:o}=this.view;let u=null;switch(n){case Fg.IN:u=o.zoomIn();break;case Fg.OUT:u=o.zoomOut();break;default:return}o.begin(),u.then(()=>o.end()),t.stopPropagation()}};const qAe=.6;let HAe=class extends Sn{constructor(t,i){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:n,deltaY:o}=t.data,u=1/qAe**(1/60*o),f=i.zoom(u,[r,n]);f&&(this._canZoom=!1,f.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},WAe=class extends Sn{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new LT({start:(r,n)=>{i.pinch.begin(this.view,n.data),n.stopPropagation()},update:(r,n)=>{i.pinch.update(this.view,n.data),n.stopPropagation()},end:(r,n)=>{i.pinch.end(this.view),n.stopPropagation()},condition:r=>r>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function sq(e){const t=e.native;return t?{buttons:t.buttons.map(i=>i.pressed?i.value||1:0),axes:t.axes.map(i=>KAe(i,e.axisThreshold))}:{buttons:[],axes:[]}}function ZAe(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}function JAe(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function KAe(e,t){const i=Math.abs(e);return i<t?0:Math.sign(e)*(i-t)/(1-t)}let YAe=class{constructor(t,i){this._element=t,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=o=>{this._connectGamepad(o.gamepad)},this._onDisconnectGamepad=o=>{const u=o.gamepad,f=u.index,g=this._inputDevices[f];g&&(this._emitGamepadEvent(u,sq(g),!1),this._inputDevices.splice(f,1),this._latestUpdate.splice(f,1),this._input.gamepad.devices.remove(g),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=r&&n,this.supported&&(oq(o=>this._connectGamepad(o)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const i=new FF(t);i.deviceType!=="unknown"&&(this._inputDevices[t.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=Av({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!i;oq(n=>{const o=this._inputDevices[n.index];if(!o)return;const u=this._latestUpdate[n.index],f=sq(o),g=r||JAe(f);u&&(u.timestamp===n.timestamp||!u.active&&g||ZAe(u.state,f))||this._emitGamepadEvent(n,f,!g)})}_emitGamepadEvent(t,i,r){const n=this._latestUpdate[t.index],o=n&&n.active;if(!o&&!r)return;const u=!o&&r?"start":o&&r?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[t.index],state:i,action:u})}};function XAe(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function oq(e){for(const t of navigator.getGamepads())XAe(t)&&e(t)}const aq=we("edge"),QAe=we("chrome"),e8e=we("ff"),t8e=we("safari"),lq="esri-view-surface",Fm={touchNone:`${lq}--touch-none`,touchPan:`${lq}--touch-pan`};let yle=class mle{constructor(t,i){this._input=i,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new YAe(t,this._input),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource=Jt(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const i in this._active)if(!t||!t.has(i)){const r=this._active[i];this._element.removeEventListener(qM[i],r),delete this._active[i]}t&&t.forEach(i=>{if(!this._active[i]&&qM[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(qM[i],r),this._active[i]=r}}),this._gamepadSource.hasEventListeners=(t==null?void 0:t.has("gamepad"))??!1}setPointerCapture(t,i){i?this._setPointerCatpureSafe(t.pointerId):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Fm.touchNone:Fm.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Fm.touchPan:Fm.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Fm.touchNone),this._element.classList.remove(Fm.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(t){try{this._element.setPointerCapture(t),this._activePointerCaptures.add(t)}catch{}}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,i){const r=eae(this._element,t);return mle.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(t,i){const{key:r}=i;r&&t==="key-up"&&this._keyDownState.delete(r);const n={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&t==="key-down"&&this._keyDownState.add(n.key),this._callback(t,n)}_handlePointer(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(t,r)}_handlePointerPreventDefault(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(t,r)}_getDeltaFromTrackpadOrMouseWheel(t){return t.shiftKey&&we("mac")&&t.deltaY===0?t.deltaX:t.deltaY}_handleMouseWheel(t,i){let r=this._getDeltaFromTrackpadOrMouseWheel(i);switch(i.deltaMode){case 0:aq&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}aq?r*=.7:QAe||t8e?r*=.6:e8e&&(r*=1.375);const n=100,o=Math.abs(r);o>n&&(r=r/o*200/(1+Math.exp(-.02*(o-n))));const u=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(t,u)}_handlePointerCaptureLost(t,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(t,i)}_handleDefault(t,i){const r={native:i};i.preventDefault(),this._callback(t,r)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}};yle.test={disableSubpixelCoordinates:!1};const qM={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let i8e=class extends Sn{constructor(){super(!0),this.registerIncoming("context-menu",t=>t.data.native.preventDefault())}};const rs={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function TI(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function r8e(e,t){const i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)}function n8e(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:gn()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[V,W]=e,[Q,Z]=[W.x-V.x,W.y-V.y];return t.radius=Math.sqrt(Q*Q+Z*Z)/2,t.center.x=(V.x+W.x)/2,t.center.y=(V.y+W.y)/2,t}let i=0,r=0;for(let V=0;V<e.length;V++)i+=e[V].x,r+=e[V].y;i/=e.length,r/=e.length;const n=e.map(V=>V.x-i),o=e.map(V=>V.y-r);let u=0,f=0,g=0,b=0,E=0,I=0,M=0;for(let V=0;V<n.length;V++){const W=n[V],Q=o[V],Z=W*W,ee=Q*Q;u+=Z,f+=ee,g+=W*Q,b+=Z*W,E+=ee*Q,I+=W*ee,M+=Q*Z}const k=.5*(b+I),L=.5*(E+M),P=u*f-g*g,D=(k*f-L*g)/P,j=(u*L-g*k)/P,z=gn(D+i,j+r);return{radius:Math.sqrt(D*D+j*j+(u+f)/e.length),center:z}}function Cy(e){const{native:t}=e,{pointerId:i,button:r,pointerType:n}=t;return n==="mouse"?`${i}:${r}`:`${n}`}let s8e=class extends Sn{constructor(t=rs.maximumDoubleClickDelay,i=rs.maximumDoubleClickDistance,r=rs.maximumDoubleTouchDelay,n=rs.maximumDoubleTouchDistance,o=m2){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=o,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=gn(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new LT({start:(u,f)=>this._dragStart(u,f),update:(u,f)=>this._dragUpdate(f),end:(u,f)=>this._dragEnd(f)}),this.registerIncoming("drag",u=>this._dragEventSeparator.handle(u)),this.registerIncoming("pointer-down",u=>this._handlePointerDown(u)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=tr(t.doubleTapTimeout)})}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(t){const i=this._pointerState.get(t);i&&(i.doubleTapTimeout=tr(i.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,i){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:n}=i,{center:o}=r;this._dragStartCenter=o;const u=HM("begin",gn(0,0),r);this._doubleTapDrag.emit(u,void 0,n),i.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:n}=i,o=HM("update",gn(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(o,void 0,r),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:n}=i,o=HM("end",gn(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(o,void 0,r),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:i}=t,r=Cy(i),n=this._pointerState.get(r),{pointerType:o}=i.native;if(n){const u=o==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(r),TI(n.event.data,i)>u?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:i}=t,{pointerType:r}=i.native,n=Cy(i),o=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,u=this._clock.setTimeout(()=>this._clearPointerDown(n),o);this._pointerState.set(n,{event:t,doubleTapTimeout:u}),this.refreshHasPendingInputs()}};function HM(e,t,i){const{button:r,buttons:n,pointer:o,pointers:u,pointerType:f,timestamp:g}=i;return{action:e,delta:t,button:r,buttons:n,pointer:o,pointers:u,pointerType:f,timestamp:g}}let o8e=class extends Sn{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,i,r,n){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:n,pointers:a8e(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(t){const i=t.native.pointerId,r=H5(this._activePointerMap).angle,n={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,n);const o=n4(n,gle(this._activePointerMap));n.initialAngle=o,n.lastAngle=o,this._updatePointerAngles(r)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const i=t.native.pointerId,r=this._activePointerMap.get(i);r?r.event=t:this._addPointer(t)}_removePointer(t){const i=H5(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(i)}_updatePointerAngles(t){const i=H5(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=n4(r,i)-t,r.lastAngle=n4(r,i)-t})}_emitEvent(t,i,r){const n=H5(this._activePointerMap);this._drag.emit(this._createPayload(t,i,n,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,r=t.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const i=t.data,r=i.currentEvent,n=t.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,n)):(this._addPointer(r),this._emitEvent("added",r,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function gle(e){const t=[];return e.forEach(i=>{t.push(gn(i.event.x,i.event.y))}),n8e(t)}function H5(e){const t=gle(e);let i=0;return e.forEach(r=>{let n=n4(r,t),o=n-r.lastAngle;for(;o>Math.PI;)o-=2*Math.PI;for(;o<-Math.PI;)o+=2*Math.PI;n=r.lastAngle+o,r.lastAngle=n;const u=n-r.initialAngle;i+=u}),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function a8e(e){const t=new Map;return e.forEach((i,r)=>t.set(r,i.event)),t}function n4(e,t){const i=e.event,r=i.x-t.center.x,n=i.y-t.center.y;return Math.atan2(n,r)}var uq;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(uq||(uq={}));let l8e=class extends Sn{constructor(t=rs.maximumDoubleClickDelay,i=rs.maximumDoubleClickDistance,r=rs.maximumDoubleTouchDelay,n=rs.maximumDoubleTouchDistance,o=m2){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=o,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=Cy(i);if(!this._pointerState.has(r)){const n={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(r,n),this.startCapturingPointer(i.native)}}_handlePointerUp(t){const i=t.data,r=Cy(i),n=this._pointerState.get(r);if(n&&n.downButton===i.native.button){const o=n.immediateDoubleClick,u=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;o?(o.timeoutHandle.remove(),TI(o,t.data)>u?this._startImmediateDoubleClick(t,n):(this._immediateDoubleClick.emit(t.data,void 0,o.modifiers),this._removeState(i))):TI(n,t.data)>u?this._removeState(i):this._startImmediateDoubleClick(t,n)}}_startImmediateDoubleClick(t,i){const r=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),r)}}_removeState(t){const i=Cy(t);this._pointerState.delete(i),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}},u8e=class extends Sn{constructor(t=rs.maximumClickDelay,i=rs.movementUntilMouseDrag,r=rs.movementUntilPenDrag,n=rs.movementUntilTouchDrag,o=rs.holdDelay,u=m2){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=r,this._movementUntilTouchDrag=n,this._holdDelay=o,this._clock=u,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",f=>this._handlePointerDown(f)),this.registerIncoming("pointer-up",f=>this._handlePointerLoss(f,"pointer-up")),this.registerIncoming("pointer-capture-lost",f=>this._handlePointerLoss(f,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",f=>this._handlePointerLoss(f,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",f=>this._handlePointerMove(f)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=tr(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=i.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const u=this._pointerState.get(r);if(u){if(!u.isDragging){const f=u.previousEvent;this._pointerHold.emit(f,void 0,t.modifiers),u.holdEmitted=!0}u.holdTimeout=null}},this._holdDelay));const o={startEvent:i,previousEvent:i,startTimestamp:t.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(r,o),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){const i=t.data,r=i.native.pointerId,n=this._pointerState.get(r);n&&(n.isDragging?this._pointerDrag.emit(W5("update",n,i),void 0,n.modifiers):r8e(i,n.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(t),n.previousEvent=i)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const i=t.data,r=i.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=t.modifiers,n.isDragging=!0,r===n.startEvent.native.pointerId?this._pointerDrag.emit(W5("start",n,i)):this._pointerDrag.emit(W5("start",n,n.previousEvent),t.timestamp))})}_handlePointerLoss(t,i){const r=t.data,n=r.native.pointerId,o=this._pointerState.get(n);o&&(o.holdTimeout!=null&&(o.holdTimeout.remove(),o.holdTimeout=null),o.isDragging?this._pointerDrag.emit(W5("end",o,i==="pointer-up"?r:o.previousEvent),void 0,o.modifiers):i==="pointer-up"&&o.downButton===r.native.button&&t.timestamp-o.startTimestamp<=this._maximumClickDelay&&!o.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(n),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function W5(e,t,i){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:i}}let c8e=class extends Sn{constructor(t=rs.maximumDoubleClickDelay,i=rs.maximumDoubleClickDistance,r=rs.maximumDoubleTouchDelay,n=rs.maximumDoubleTouchDistance,o=m2){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=o,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",u=>this._handleImmediateClick(u)),this.registerIncoming("pointer-down",u=>this._handlePointerDown(u))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=tr(t.doubleClickTimer))}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(t,i){const r=this._pointerState.get(t);r&&(r.doubleClickTimer=tr(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const i=this._pointerState.get(t);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_handleImmediateClick(t){const i=t.data,{pointerType:r}=i.native,n=h8e(i);if(!this._pointerState.has(n))return void this._startClick(t);const o=this._pointerState.get(n),{data:u,modifiers:f}=o.event,g=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;TI(u,i)>g?(this._clearDoubleClickTimer(n,!0),this._startClick(t)):(this._clearDoubleClickTimer(n,!1),o.pointerDownCount===2&&this._doubleClick.emit(u,void 0,f))}_handlePointerDown(t){const i=Cy(t.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(t){const{data:i}=t,{native:{pointerType:r}}=i,n=Cy(i),o=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,u=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),o);this._pointerState.set(n,{event:t,doubleClickTimer:u,pointerDownCount:1}),this.refreshHasPendingInputs()}};function h8e(e){const{pointerId:t,pointerType:i,button:r}=e.native;return i==="mouse"?`${t}:${r}`:`${i}`}const Z5={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let I0=class extends De{initialize(){const t=()=>{var i;return(i=this.view)==null?void 0:i.ready};this.addHandles([rn(()=>!t(),()=>this._disconnect()),rn(t,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerType}get latestPointerLocation(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerLocation}get multiTouchActive(){var t;return((t=this._inputManager)==null?void 0:t.multiTouchActive)??!1}isModifierKeyDown(t){var i;return((i=this._inputManager)==null?void 0:i.isModifierKeyDown(t))??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=Jt(this._inputManager)}_connect(){const t=this.view.surface,i=new yle(t,this.view.input),r=[new l8e,new u8e,new c8e,new o8e(this.view.navigation),new s8e],n=new ka({eventSource:i,recognizers:r});n.installHandlers("prevent-context-menu",[new i8e],Ii.INTERNAL),n.installHandlers("navigation",[new WAe(this.view),new DAe(this.view),new HAe(this.view),new iq(this.view),new iq(this.view,[Z5.counter]),new oAe(this.view,"primary"),new UAe(this.view,Z5.pan),new BAe(this.view,Z5.zoom),new GAe(this.view,Z5.rotate),new aAe(this.view,"secondary"),new sAe(this.view,"touch")],Ii.INTERNAL),this.view.viewEvents.connect(n),this._source=i,this._inputManager=n,me(()=>{var o,u;return(u=(o=this.view)==null?void 0:o.navigation)==null?void 0:u.browserTouchPanEnabled},o=>{this._source&&(this._source.browserTouchPanningEnabled=!o)},Je)}get test(){}};m([w()],I0.prototype,"view",void 0),m([w()],I0.prototype,"latestPointerType",null),m([w()],I0.prototype,"latestPointerLocation",null),m([w()],I0.prototype,"multiTouchActive",null),I0=m([H("esri.views.2d.input.MapViewInputManager")],I0);const d8e=I0;function p8e(e,t,i,r,n){vle(e,t,i||0,r||e.length-1,n||f8e)}function vle(e,t,i,r,n){for(;r>i;){if(r-i>600){var o=r-i+1,u=t-i+1,f=Math.log(o),g=.5*Math.exp(2*f/3),b=.5*Math.sqrt(f*g*(o-g)/o)*(u-o/2<0?-1:1);vle(e,t,Math.max(i,Math.floor(t-u*g/o+b)),Math.min(r,Math.floor(t+(o-u)*g/o+b)),n)}var E=e[t],I=i,M=r;for(bw(e,i,t),n(e[r],E)>0&&bw(e,i,r);I<M;){for(bw(e,I,M),I++,M--;n(e[I],E)<0;)I++;for(;n(e[M],E)>0;)M--}n(e[i],E)===0?bw(e,i,M):bw(e,++M,r),M<=t&&(i=M+1),t<=M&&(r=M-1)}}function bw(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function f8e(e,t){return e<t?-1:e>t?1:0}function $I(e,t){if(!(this instanceof $I))return new $I(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function y8e(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return-1}function Dm(e,t){$b(e,0,e.children.length,t,e)}function $b(e,t,i,r,n){n||(n=I1(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var o,u=t;u<i;u++)o=e.children[u],Mb(n,e.leaf?r(o):o);return n}function Mb(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function cq(e,t){return e.minX-t.minX}function hq(e,t){return e.minY-t.minY}function WM(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function J5(e){return e.maxX-e.minX+(e.maxY-e.minY)}function m8e(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function g8e(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),n=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,n-i)*Math.max(0,o-r)}function ZM(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function K5(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function I1(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function dq(e,t,i,r,n){for(var o,u=[t,i];u.length;)(i=u.pop())-(t=u.pop())<=r||(o=t+Math.ceil((i-t)/r/2)*r,p8e(e,o,t,i,n),u.push(t,o,o,i))}$I.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!K5(e,t))return i;for(var n,o,u,f,g=[];t;){for(n=0,o=t.children.length;n<o;n++)u=t.children[n],K5(e,f=t.leaf?r(u):u)&&(t.leaf?i.push(u):ZM(e,f)?this._all(u,i):g.push(u));t=g.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!K5(e,t))return!1;for(var r,n,o,u,f=[];t;){for(r=0,n=t.children.length;r<n;r++)if(o=t.children[r],K5(e,u=t.leaf?i(o):o)){if(t.leaf||ZM(e,u))return!0;f.push(o)}t=f.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e!=null&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=I1([]),this},remove:function(e,t){if(e==null)return this;for(var i,r,n,o,u=this.data,f=this.toBBox(e),g=[],b=[];u||g.length;){if(u||(u=g.pop(),r=g[g.length-1],i=b.pop(),o=!0),u.leaf&&(n=y8e(e,u.children,t))!==-1)return u.children.splice(n,1),g.push(u),this._condense(g),this;o||u.leaf||!ZM(u,f)?r?(i++,u=r.children[i],o=!1):u=null:(g.push(u),b.push(i),i=0,r=u,u=u.children[0])}return this},toBBox:function(e){return e},compareMinX:cq,compareMinY:hq,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,r){var n,o=i-t+1,u=this._maxEntries;if(o<=u)return Dm(n=I1(e.slice(t,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(o)/Math.log(u)),u=Math.ceil(o/Math.pow(u,r-1))),(n=I1([])).leaf=!1,n.height=r;var f,g,b,E,I=Math.ceil(o/u),M=I*Math.ceil(Math.sqrt(u));for(dq(e,t,i,M,this.compareMinX),f=t;f<=i;f+=M)for(dq(e,f,b=Math.min(f+M-1,i),I,this.compareMinY),g=f;g<=b;g+=I)E=Math.min(g+I-1,b),n.children.push(this._build(e,g,E,r-1));return Dm(n,this.toBBox),n},_chooseSubtree:function(e,t,i,r){for(var n,o,u,f,g,b,E,I;r.push(t),!t.leaf&&r.length-1!==i;){for(E=I=1/0,n=0,o=t.children.length;n<o;n++)g=WM(u=t.children[n]),(b=m8e(e,u)-g)<I?(I=b,E=g<E?g:E,f=u):b===I&&g<E&&(E=g,f=u);t=f||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,n=i?e:r(e),o=[],u=this._chooseSubtree(n,this.data,t,o);for(u.children.push(e),Mb(u,n);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(n,o,t)},_split:function(e,t){var i=e[t],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var o=this._chooseSplitIndex(i,n,r),u=I1(i.children.splice(o,i.children.length-o));u.height=i.height,u.leaf=i.leaf,Dm(i,this.toBBox),Dm(u,this.toBBox),t?e[t-1].children.push(u):this._splitRoot(i,u)},_splitRoot:function(e,t){this.data=I1([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Dm(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,n,o,u,f,g,b,E;for(g=b=1/0,r=t;r<=i-t;r++)u=g8e(n=$b(e,0,r,this.toBBox),o=$b(e,r,i,this.toBBox)),f=WM(n)+WM(o),u<g?(g=u,E=r,b=f<b?f:b):u===g&&f<b&&(b=f,E=r);return E},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:cq,n=e.leaf?this.compareMinY:hq;this._allDistMargin(e,t,i,r)<this._allDistMargin(e,t,i,n)&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var n,o,u=this.toBBox,f=$b(e,0,t,u),g=$b(e,i-t,i,u),b=J5(f)+J5(g);for(n=t;n<i-t;n++)o=e.children[n],Mb(f,e.leaf?u(o):o),b+=J5(f);for(n=i-t-1;n>=t;n--)o=e.children[n],Mb(g,e.leaf?u(o):o),b+=J5(g);return b},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)Mb(t[r],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)e[i].children.length===0?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():Dm(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};let pq=class wle{constructor(t,i){this.key=new vf(0,0,0,0),this.bounds=to(),this.objectIds=new Set,this.key.set(i);const r=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.level=r.level,this.scale=r.scale,this.minScale=t.zoomToScale(r.level-1),this.maxScale=t.zoomToScale(r.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return Ht.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(t){return{$view:{scale:this.scale,timeZone:t}}}createChildTiles(){const t=this.key.getChildKeys(),i=eo.acquire();for(let r=0;r<t.length;r++)i[r]=new wle(this.tileInfoView,t[r]);return i}getQuantizationParameters(){return Joe.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const Bf={added:[],removed:[]},JM=new Set,v8e=new vf(0,0,0,0);function w8e(e,t){const i=no(t);if(!i)return null;const[r,n]=i.valid;return e[2]>n?[to([e[0],e[1],n,e[3]]),to([r,e[1],r+e[2]-n,e[3]])]:e[0]<r?[to([r,e[1],e[2],e[3]]),to([n-(r-e[0]),e[1],n,e[3]])]:null}let b8e=class extends Us{constructor(t){super(),this._tiles=new Map,this._index=$I(9,we("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||Iie(t)===0||Tie(t)===0)return[];const i=w8e(t,this.tileScheme.spatialReference);return i!=null?[...new Set([...this.boundsIntersections(i[0]),...this.boundsIntersections(i[1])])]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const i={added:[],removed:[]};for(const r of t.added)if(!this.has(r)){const n=new pq(this.tileScheme,r);this._tiles.set(r,n),this._index.insert(n),i.added.push(n)}for(const r of t.removed)if(this.has(r)){const n=this.get(r);this._tiles.delete(r),this._index.remove(n),i.removed.push(n)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(t){const i=this.tileScheme.getTileCoverage(t,0);if(!i)return;const{spans:r,lodInfo:n}=i,{level:o}=n;if(r.length>0)for(const{row:u,colFrom:f,colTo:g}of r)for(let b=f;b<=g;b++){const E=v8e.set(o,u,n.normalizeCol(b),n.getWorldForColumn(b)).id;if(JM.add(E),!this.has(E)){const I=new pq(this.tileScheme,E);this._tiles.set(E,I),this._index.insert(I),this.tiles.push(I),Bf.added.push(I)}}for(let u=this.tiles.length-1;u>=0;u--){const f=this.tiles[u];JM.has(f.id)||(this._tiles.delete(f.id),this.tiles.splice(u,1),this._index.remove(f),Bf.removed.push(f))}(Bf.added.length||Bf.removed.length)&&this.emit("update",Bf),$_.pool.release(i),JM.clear(),Bf.added.length=0,Bf.removed.length=0}};const Kot=1e-30,fq=512,Y5=16777216,Yot=8,Xot=29,Qot=24,eat=4,tat=0,iat=0,rat=0,nat=1,sat=2,oat=3,aat=4,lat=5,uat=6,cat=12,hat=13,dat=5,_8e=6,pat=5,fat=6;var yq;(function(e){e[e.FilterFlags=0]="FilterFlags",e[e.Animation=1]="Animation",e[e.GPGPU=2]="GPGPU",e[e.VV=3]="VV",e[e.DD0=4]="DD0",e[e.DD1=5]="DD1",e[e.DD2=6]="DD2",e[e.LocalTimeOrigin=7]="LocalTimeOrigin"})(yq||(yq={}));const ble=6,S8e=1<<ble,yat=S8e<<1,mat=1.05,gat=3,vat=1,wat=3,bat=3,_at=5,Sat=6,xat=1.15,x8e=2,Eat=128,E8e=256,Iat=E8e-2*x8e,Tat=2,$at=128,Mat=10,Cat=1024,Aat=128,kat=4,Lat=1,Oat=1<<20,Rat=.75,Pat=10,Nat=.75,Fat=256,Dat=32,jat=512,zat=0,Vat=1,I8e=1,Uat=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],Gat=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],_w=256,T8e=new Ne("cyan"),$8e=1,M8e=.25;new Ne("black");const Bat=.25,C8e="default",A8e="temporary",k8e=new Ne("yellow"),qat=8;let T0=class extends De{constructor(t){super(t),this.color=T8e.clone(),this.haloOpacity=$8e,this.fillOpacity=M8e}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity}};m([w({type:Ne})],T0.prototype,"color",void 0),m([w({type:Ne})],T0.prototype,"haloColor",void 0),m([w()],T0.prototype,"haloOpacity",void 0),m([w()],T0.prototype,"fillOpacity",void 0),T0=m([H("esri.views.support.HighlightOptions")],T0);const L8e=T0;var mL;let Cb=mL=class extends L8e{constructor(e){super(e),this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(e){return super.equals(e)&&this.haloWidth===e.haloWidth&&this.haloBlur===e.haloBlur}get optionsKey(){return`${this.color};${this.haloColor};${this.haloOpacity};${this.fillOpacity};${this.haloWidth};${this.haloBlur}`}clone(){var e;return new mL({color:this.color.clone(),haloColor:(e=this.haloColor)==null?void 0:e.clone(),haloOpacity:this.haloOpacity,fillOpacity:this.fillOpacity,haloWidth:this.haloWidth,haloBlur:this.haloBlur})}};m([w()],Cb.prototype,"haloWidth",void 0),m([w()],Cb.prototype,"haloBlur",void 0),Cb=mL=m([H("esri.views.2d.support.HighlightOptions")],Cb);const nm=Cb;var mq,gq,vq,wq,gL,bq,_q,ac,vL,A3,fn,MI,Xa,Gi,Xe,M_,Lh,Sq,xq,Eq;(function(e){e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e[e.COLOR=16384]="COLOR"})(mq||(mq={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(gq||(gq={})),function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(vq||(vq={})),function(e){e[e.ADD=32774]="ADD",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.SUBTRACT=32778]="SUBTRACT",e[e.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(wq||(wq={})),function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"}(gL||(gL={})),function(e){e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(bq||(bq={})),function(e){e[e.CW=2304]="CW",e[e.CCW=2305]="CCW"}(_q||(_q={})),function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=5131]="HALF_FLOAT"}(ac||(ac={})),function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"}(vL||(vL={})),function(e){e[e.ZERO=0]="ZERO",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP"}(A3||(A3={})),function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(fn||(fn={})),function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(MI||(MI={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(Xa||(Xa={})),function(e){e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.RG=33319]="RG",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER"}(Gi||(Gi={})),function(e){e[e.RGBA4=32854]="RGBA4",e[e.R16F=33325]="R16F",e[e.RG16F=33327]="RG16F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.R32F=33326]="R32F",e[e.RG32F=33328]="RG32F",e[e.RGBA32F=34836]="RGBA32F",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB5_A1=32855]="RGB5_A1",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.RGB16F=34843]="RGB16F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.RGB565=36194]="RGB565",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2=32857]="RGB10_A2",e[e.RGB10_A2UI=36975]="RGB10_A2UI"}(Xe||(Xe={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.INT=5124]="INT",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(M_||(M_={})),function(e){e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(Lh||(Lh={})),function(e){e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_READ=35045]="STATIC_READ",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.STREAM_COPY=35042]="STREAM_COPY"}(Sq||(Sq={})),function(e){e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER"}(xq||(xq={})),function(e){e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(Eq||(Eq={}));const Wat=33984;var CI,Iq,Tq;(function(e){e[e.Texture=0]="Texture",e[e.BufferObject=1]="BufferObject",e[e.VertexArrayObject=2]="VertexArrayObject",e[e.Shader=3]="Shader",e[e.Program=4]="Program",e[e.FramebufferObject=5]="FramebufferObject",e[e.Renderbuffer=6]="Renderbuffer",e[e.TransformFeedback=7]="TransformFeedback",e[e.Sync=8]="Sync",e[e.UNCOUNTED=9]="UNCOUNTED",e[e.LinesOfCode=9]="LinesOfCode",e[e.Uniform=10]="Uniform",e[e.COUNT=11]="COUNT"})(CI||(CI={})),function(e){e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(Iq||(Iq={})),function(e){e[e.NONE=0]="NONE",e[e.BACK=1029]="BACK"}(Tq||(Tq={}));const Zat=33306;var es,$q,Mq,Cq,Aq,kq,Lq;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(es||(es={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT=5124]="INT",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}($q||($q={})),function(e){e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS"}(Mq||(Mq={})),function(e){e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED"}(Cq||(Cq={})),function(e){e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED"}(Aq||(Aq={})),function(e){e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(kq||(kq={})),function(e){e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(Lq||(Lq={}));const O8e=()=>Se.getLogger("esri.views.webgl.checkWebGLError");function R8e(e,t){switch(t){case e.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case e.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case e.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case e.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case e.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case e.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const _le=!!we("enable-feature:webgl-debug");function Sle(){return _le}function Jat(){return _le}function jm(e){if(Sle()){const t=e.getError();if(t){const i=R8e(e,t),r=new Error().stack;O8e().error(new ne("webgl-error","WebGL error occurred",{message:i,stack:r}))}}}var wL;(function(e){e[e.Texture=0]="Texture",e[e.RenderBuffer=1]="RenderBuffer"})(wL||(wL={}));function P8e(e){switch(e){case ac.BYTE:case ac.UNSIGNED_BYTE:return 1;case ac.SHORT:case ac.UNSIGNED_SHORT:case ac.HALF_FLOAT:return 2;case ac.FLOAT:case ac.INT:case ac.UNSIGNED_INT:return 4}}function N8e(e){const t=e.gl;switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case t.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case t.INVALID_OPERATION:return"The specified command is not allowed for the current state";case t.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case t.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case t.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function Kat(e,t,i,r,n=0){var u;const o=e.gl;e.bindBuffer(i);for(const f of r){const g=t.get(f.name);if(g==null){console.warn(`There is no location for vertex attribute '${f.name}' defined.`);continue}const b=n*f.stride;if(f.count<=4)o.vertexAttribPointer(g,f.count,f.type,f.normalized,f.stride,f.offset+b),o.enableVertexAttribArray(g),f.divisor>0&&e.gl.vertexAttribDivisor(g,f.divisor);else if(f.count===9)for(let E=0;E<3;E++)o.vertexAttribPointer(g+E,3,f.type,f.normalized,f.stride,f.offset+12*E+b),o.enableVertexAttribArray(g+E),f.divisor>0&&e.gl.vertexAttribDivisor(g+E,f.divisor);else if(f.count===16)for(let E=0;E<4;E++)o.vertexAttribPointer(g+E,4,f.type,f.normalized,f.stride,f.offset+16*E+b),o.enableVertexAttribArray(g+E),f.divisor>0&&((u=e.gl)==null||u.vertexAttribDivisor(g+E,f.divisor));else console.error("Unsupported vertex attribute element count: "+f.count);if(Sle()){const E=N8e(e),I=P8e(f.type),M=f.offset,k=Math.round(I/M)!==I/M?`. Offset not a multiple of stride. DataType requires ${I} bytes, but descriptor has an offset of ${M}`:"";E&&console.error(`Unable to bind vertex attribute "${f.name}" with baseInstanceOffset ${b}${k}:`,E,f)}}}function Yat(e,t,i,r){var o,u,f;const n=e.gl;e.bindBuffer(i);for(const g of r){const b=t.get(g.name);if(g.count<=4)n.disableVertexAttribArray(b),g.divisor&&g.divisor>0&&((o=e.gl)==null||o.vertexAttribDivisor(b,0));else if(g.count===9)for(let E=0;E<3;E++)n.disableVertexAttribArray(b+E),g.divisor&&g.divisor>0&&((u=e.gl)==null||u.vertexAttribDivisor(b+E,0));else if(g.count===16)for(let E=0;E<4;E++)n.disableVertexAttribArray(b+E),g.divisor&&g.divisor>0&&((f=e.gl)==null||f.vertexAttribDivisor(b+E,0));else console.error("Unsupported vertex attribute element count: "+g.count)}e.unbindBuffer(gL.ARRAY_BUFFER)}function F8e(e){switch(e){case Gi.ALPHA:case Gi.LUMINANCE:case Gi.RED:case Gi.RED_INTEGER:case Xe.R8:case Xe.R8I:case Xe.R8UI:case Xe.R8_SNORM:case Lh.STENCIL_INDEX8:return 1;case Gi.LUMINANCE_ALPHA:case Gi.RG:case Gi.RG_INTEGER:case Xe.RGBA4:case Xe.R16F:case Xe.R16I:case Xe.R16UI:case Xe.RG8:case Xe.RG8I:case Xe.RG8UI:case Xe.RG8_SNORM:case Xe.RGB565:case Xe.RGB5_A1:case Lh.DEPTH_COMPONENT16:return 2;case Gi.DEPTH_COMPONENT:case Gi.RGB:case Gi.RGB_INTEGER:case Xe.RGB8:case Xe.RGB8I:case Xe.RGB8UI:case Xe.RGB8_SNORM:case Xe.SRGB8:case Lh.DEPTH_COMPONENT24:return 3;case Gi.DEPTH_STENCIL:case Gi.DEPTH24_STENCIL8:case Gi.RGBA:case Gi.RGBA_INTEGER:case Xe.RGBA8:case Xe.R32F:case Xe.R11F_G11F_B10F:case Xe.RG16F:case Xe.R32I:case Xe.R32UI:case Xe.RG16I:case Xe.RG16UI:case Xe.RGBA8I:case Xe.RGBA8UI:case Xe.RGBA8_SNORM:case Xe.SRGB8_ALPHA8:case Xe.RGB9_E5:case Xe.RGB10_A2UI:case Xe.RGB10_A2:case Lh.DEPTH_STENCIL:case Lh.DEPTH_COMPONENT32F:case Lh.DEPTH24_STENCIL8:return 4;case Lh.DEPTH32F_STENCIL8:return 5;case Xe.RGB16F:case Xe.RGB16I:case Xe.RGB16UI:return 6;case Xe.RG32F:case Xe.RG32I:case Xe.RG32UI:case Xe.RGBA16F:case Xe.RGBA16I:case Xe.RGBA16UI:return 8;case Xe.RGB32F:case Xe.RGB32I:case Xe.RGB32UI:return 12;case Xe.RGBA32F:case Xe.RGBA32I:case Xe.RGBA32UI:return 16;case es.COMPRESSED_RGB_S3TC_DXT1_EXT:case es.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case es.COMPRESSED_RGBA_S3TC_DXT3_EXT:case es.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case es.COMPRESSED_R11_EAC:case es.COMPRESSED_SIGNED_R11_EAC:case es.COMPRESSED_RGB8_ETC2:case es.COMPRESSED_SRGB8_ETC2:case es.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case es.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case es.COMPRESSED_RG11_EAC:case es.COMPRESSED_SIGNED_RG11_EAC:case es.COMPRESSED_RGBA8_ETC2_EAC:case es.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let xle=class{constructor(t=0,i=t){this.width=t,this.height=i,this.target=Xa.TEXTURE_2D,this.pixelFormat=Gi.RGBA,this.dataType=M_.UNSIGNED_BYTE,this.samplingMode=fn.LINEAR,this.wrapMode=MI.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.depth=1,this.isImmutable=!1}};function D8e(e){return e.width<=0||e.height<=0?0:Math.round(e.width*e.height*(e.hasMipmap?4/3:1)*(e.internalFormat==null?4:F8e(e.internalFormat))*(e.target===Xa.TEXTURE_CUBE_MAP?6:1))}let j8e=class Ele extends xle{constructor(t,i){switch(super(),this.context=t,Object.assign(this,i),this.internalFormat){case Xe.R16F:case Xe.R16I:case Xe.R16UI:case Xe.R32F:case Xe.R32I:case Xe.R32UI:case Xe.R8_SNORM:case Xe.R8:case Xe.R8I:case Xe.R8UI:this.pixelFormat=Gi.RED}}static validate(t,i){return new Ele(t,i)}},Ile=class Fa{constructor(t,i=null,r=null){if(this.type=wL.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._wasImmutablyAllocated=!1,"context"in t)this._descriptor=t,r=i;else{const n=j8e.validate(t,i);if(!n)throw new ne("Texture descriptor invalid");this._descriptor=n}this._descriptor.target===Xa.TEXTURE_CUBE_MAP?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return D8e(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}dispose(){this._glName&&this._descriptor.context.instanceCounter.decrement(CI.Texture,this),this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(t,i){const r=this._descriptor;if(r.width!==t||r.height!==i){if(this._wasImmutablyAllocated)throw new ne("Immutable textures can't be resized!");r.width=t,r.height=i,this._descriptor.target===Xa.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}_setDataCubeMap(t=null){for(let i=Xa.TEXTURE_CUBE_MAP_POSITIVE_X;i<=Xa.TEXTURE_CUBE_MAP_NEGATIVE_Z;i++)this._setData(t,i)}setData(t){this._setData(t)}_setData(t,i){var b;const r=(b=this._descriptor.context)==null?void 0:b.gl;if(!r)return;jm(r),this._glName||(this._glName=r.createTexture(),this._glName&&this._descriptor.context.instanceCounter.increment(CI.Texture,this));const n=this._descriptor,o=i??n.target,u=Sw(o),f=this._descriptor.context.bindTexture(this,Fa.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(Fa.TEXTURE_UNIT_FOR_UPDATES),X5(n),this._configurePixelStorage(),jm(r);const g=this._deriveInternalFormat();if(Pq(t)){let E="width"in t?t.width:t.codedWidth,I="height"in t?t.height:t.codedHeight;const M=1;t instanceof HTMLVideoElement&&(E=t.videoWidth,I=t.videoHeight),n.width&&n.height,u&&n.depth,n.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,g,n.hasMipmap,E,I,M),this._texImage(o,0,g,E,I,M,t),jm(r),n.hasMipmap&&(this.generateMipmap(),jm(r)),n.width||(n.width=E),n.height||(n.height=I),u&&!n.depth&&(n.depth=M)}else{const{width:E,height:I,depth:M}=n;if(E==null||I==null)throw new ne("Width and height must be specified!");if(u&&M==null)throw new ne("Depth must be specified!");if(n.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,g,n.hasMipmap,E,I,M),s4(t)){const k=t.levels,L=Nq(o,E,I,M),P=Math.min(L-1,k.length-1);r.texParameteri(n.target,this._descriptor.context.gl.TEXTURE_MAX_LEVEL,P);const D=g;if(!U8e(D))throw new ne("Attempting to use compressed data with an uncompressed format!");this._forEachMipmapLevel((j,z,V,W)=>{const Q=k[Math.min(j,k.length-1)];this._compressedTexImage(o,j,D,z,V,W,Q)},P)}else this._texImage(o,0,g,E,I,M,t),jm(r),n.hasMipmap&&this.generateMipmap()}Oq(r,this._descriptor),Rq(r,this._descriptor),z8e(this._descriptor.context,this._descriptor),jm(r),this._descriptor.context.bindTexture(f,Fa.TEXTURE_UNIT_FOR_UPDATES)}updateData(t,i,r,n,o,u,f=0){u||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const g=this._descriptor,b=this._deriveInternalFormat(),{context:E,pixelFormat:I,dataType:M,target:k,isImmutable:L}=g;if(L&&!this._wasImmutablyAllocated)throw new ne("Cannot update immutable texture before allocation!");const P=E.bindTexture(this,Fa.TEXTURE_UNIT_FOR_UPDATES,!0);(i<0||r<0||i+n>g.width||r+o>g.height)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:D}=E;f&&D.pixelStorei(D.UNPACK_SKIP_ROWS,f),Pq(u)?D.texSubImage2D(k,t,i,r,n,o,I,M,u):s4(u)?D.compressedTexSubImage2D(k,t,i,r,n,o,b,u.levels[t]):D.texSubImage2D(k,t,i,r,n,o,I,M,u),f&&D.pixelStorei(D.UNPACK_SKIP_ROWS,0),E.bindTexture(P,Fa.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(t,i,r,n,o,u,f,g){g||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const b=this._descriptor,E=this._deriveInternalFormat(),{context:I,pixelFormat:M,dataType:k,isImmutable:L,target:P}=b;if(L&&!this._wasImmutablyAllocated)throw new ne("Cannot update immutable texture before allocation!");Sw(P)||console.warn("Attempting to set 3D texture data on a non-3D texture");const D=I.bindTexture(this,Fa.TEXTURE_UNIT_FOR_UPDATES);I.setActiveTexture(Fa.TEXTURE_UNIT_FOR_UPDATES),(i<0||r<0||n<0||i+o>b.width||r+u>b.height||n+f>b.depth)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:j}=I;if(s4(g))g=g.levels[t],j.compressedTexSubImage3D(P,t,i,r,n,o,u,f,E,g);else{const z=g;j.texSubImage3D(P,t,i,r,n,o,u,f,M,k,z)}I.bindTexture(D,Fa.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const t=this._descriptor;if(!t.hasMipmap){if(this._wasImmutablyAllocated)throw new ne("Cannot add mipmaps to immutable texture after allocation");t.hasMipmap=!0,this._samplingModeDirty=!0,X5(t)}t.samplingMode===fn.LINEAR?(this._samplingModeDirty=!0,t.samplingMode=fn.LINEAR_MIPMAP_NEAREST):t.samplingMode===fn.NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=fn.NEAREST_MIPMAP_NEAREST);const i=this._descriptor.context.bindTexture(this,Fa.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(Fa.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(t.target),this._descriptor.context.bindTexture(i,Fa.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const t=this._descriptor;if(t.hasMipmap){if(this._wasImmutablyAllocated)throw new ne("Cannot delete mipmaps to immutable texture after allocation");t.hasMipmap=!1,this._samplingModeDirty=!0,X5(t)}t.samplingMode===fn.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,t.samplingMode=fn.LINEAR):t.samplingMode===fn.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=fn.NEAREST)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,X5(this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const t=this._descriptor,i=t.context.gl;this._samplingModeDirty&&(Oq(i,t),this._samplingModeDirty=!1),this._wrapModeDirty&&(Rq(i,t),this._wrapModeDirty=!1)}_deriveInternalFormat(){if(this._descriptor.internalFormat!=null)return this._descriptor.internalFormat===Gi.DEPTH_STENCIL&&(this._descriptor.internalFormat=Gi.DEPTH24_STENCIL8),this._descriptor.internalFormat;switch(this._descriptor.dataType){case M_.FLOAT:switch(this._descriptor.pixelFormat){case Gi.RGBA:return this._descriptor.internalFormat=Xe.RGBA32F;case Gi.RGB:return this._descriptor.internalFormat=Xe.RGB32F;default:throw new ne("Unable to derive format")}case M_.UNSIGNED_BYTE:switch(this._descriptor.pixelFormat){case Gi.RGBA:return this._descriptor.internalFormat=Xe.RGBA8;case Gi.RGB:return this._descriptor.internalFormat=Xe.RGB8}}return this._descriptor.internalFormat=this._descriptor.pixelFormat===Gi.DEPTH_STENCIL?Gi.DEPTH24_STENCIL8:this._descriptor.pixelFormat}_configurePixelStorage(){const t=this._descriptor.context.gl,{unpackAlignment:i,flipped:r,preMultiplyAlpha:n}=this._descriptor;t.pixelStorei(t.UNPACK_ALIGNMENT,i),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,r?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n?1:0)}_texStorage(t,i,r,n,o,u){const{gl:f}=this._descriptor.context;if(!V8e(i))throw new ne("Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const g=r?Nq(t,n,o,u):1;if(Sw(t)){if(u==null)throw new ne("Missing depth dimension for 3D texture upload");f.texStorage3D(t,g,i,n,o,u)}else f.texStorage2D(t,g,i,n,o);this._wasImmutablyAllocated=!0}_texImage(t,i,r,n,o,u,f){const g=this._descriptor.context.gl,b=Sw(t),{isImmutable:E,pixelFormat:I,dataType:M}=this._descriptor;if(E){if(f!=null){const k=f;if(b){if(u==null)throw new ne("Missing depth dimension for 3D texture upload");g.texSubImage3D(t,i,0,0,0,n,o,u,I,M,k)}else g.texSubImage2D(t,i,0,0,n,o,I,M,k)}}else{const k=f;if(b){if(u==null)throw new ne("Missing depth dimension for 3D texture upload");g.texImage3D(t,i,r,n,o,u,0,I,M,k)}else g.texImage2D(t,i,r,n,o,0,I,M,k)}}_compressedTexImage(t,i,r,n,o,u,f){const g=this._descriptor.context.gl,b=Sw(t);if(this._descriptor.isImmutable){if(f!=null)if(b){if(u==null)throw new ne("Missing depth dimension for 3D texture upload");g.compressedTexSubImage3D(t,i,0,0,0,n,o,u,r,f)}else g.compressedTexSubImage2D(t,i,0,0,n,o,r,f)}else if(b){if(u==null)throw new ne("Missing depth dimension for 3D texture upload");g.compressedTexImage3D(t,i,r,n,o,u,0,f)}else g.compressedTexImage2D(t,i,r,n,o,0,f)}_forEachMipmapLevel(t,i=1/0){let{width:r,height:n,depth:o,hasMipmap:u,target:f}=this._descriptor;const g=f===Xa.TEXTURE_3D;if(r==null||n==null||g&&o==null)throw new ne("Missing texture dimensions for mipmap calculation");for(let b=0;t(b,r,n,o),u&&(r!==1||n!==1||g&&o!==1)&&!(b>=i);++b)r=Math.max(1,r>>1),n=Math.max(1,n>>1),g&&(o=Math.max(1,o>>1))}};function X5(e){(e.width!=null&&e.width<0||e.height!=null&&e.height<0||e.depth!=null&&e.depth<0)&&console.error("Negative dimension parameters are not allowed!")}function Oq(e,t){let i=t.samplingMode,r=t.samplingMode;i===fn.LINEAR_MIPMAP_NEAREST||i===fn.LINEAR_MIPMAP_LINEAR?(i=fn.LINEAR,t.hasMipmap||(r=fn.LINEAR)):i!==fn.NEAREST_MIPMAP_NEAREST&&i!==fn.NEAREST_MIPMAP_LINEAR||(i=fn.NEAREST,t.hasMipmap||(r=fn.NEAREST)),e.texParameteri(t.target,e.TEXTURE_MAG_FILTER,i),e.texParameteri(t.target,e.TEXTURE_MIN_FILTER,r)}function Rq(e,t){typeof t.wrapMode=="number"?(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode)):(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode.s),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode.t))}function z8e(e,t){const i=e.capabilities.textureFilterAnisotropic;i&&e.gl.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy??1)}function V8e(e){return e in Xe}function U8e(e){return e in es}function s4(e){return e!=null&&"type"in e&&e.type==="compressed"}function G8e(e){return e!=null&&"byteLength"in e}function Pq(e){return e!=null&&!s4(e)&&!G8e(e)}function Sw(e){return e===Xa.TEXTURE_3D||e===Xa.TEXTURE_2D_ARRAY}function Nq(e,t,i,r=1){let n=Math.max(t,i);return e===Xa.TEXTURE_3D&&(n=Math.max(n,r)),Math.round(Math.log(n)/Math.LN2)+1}Ile.TEXTURE_UNIT_FOR_UPDATES=0;const KM=()=>Se.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function B8e(e,t){t.fillColor[0]=e.color.r/255,t.fillColor[1]=e.color.g/255,t.fillColor[2]=e.color.b/255,t.fillColor[3]=e.color.a,e.haloColor?(t.outlineColor[0]=e.haloColor.r/255,t.outlineColor[1]=e.haloColor.g/255,t.outlineColor[2]=e.haloColor.b/255,t.outlineColor[3]=e.haloColor.a):(t.outlineColor[0]=t.fillColor[0],t.outlineColor[1]=t.fillColor[1],t.outlineColor[2]=t.fillColor[2],t.outlineColor[3]=t.fillColor[3]),t.fillColor[3]*=e.fillOpacity,t.outlineColor[3]*=e.haloOpacity,t.fillColor[0]*=t.fillColor[3],t.fillColor[1]*=t.fillColor[3],t.fillColor[2]*=t.fillColor[3],t.outlineColor[0]*=t.outlineColor[3],t.outlineColor[1]*=t.outlineColor[3],t.outlineColor[2]*=t.outlineColor[3],t.outlineWidth=(1-e.haloBlur)*e.haloWidth,t.outerHaloWidth=e.haloBlur*e.haloWidth/2,t.innerHaloWidth=e.haloBlur*e.haloWidth/2,t.outlinePosition=0}const q8e=[0,0,0,0];let Tle=class{constructor(){this.type="single",this._highlightOptions=new nm,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*_w),this._minMaxDistance=[0,0]}setHighlightOptions(t){this._highlightOptions=t}applyHighlightOptions(t,i){this._updateGradientTexture(t),t.bindTexture(this._shadeTex,_8e),i.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){var t;(t=this._shadeTex)==null||t.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<ble)-1,activeGradient:this}]}_updateGradientTexture(t){const{optionsKey:i}=this._highlightOptions;if(i===this._optionsShadeTexKey)return;this._optionsShadeTexKey=i,B8e(this._highlightOptions,this._convertedHighlightOptions);const r=this._convertedHighlightOptions,n=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,o=r.outlinePosition-r.outlineWidth/2,u=r.outlinePosition+r.outlineWidth/2,f=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,g=Math.sqrt(Math.PI/2)*I8e,b=Math.abs(n)>g?Math.round(10*(Math.abs(n)-g))/10:0,E=Math.abs(f)>g?Math.round(10*(Math.abs(f)-g))/10:0;let I;b&&!E?KM().error("The outer rim of the highlight is "+b+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!b&&E?KM().error("The inner rim of the highlight is "+E+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):b&&E&&KM().error("The highlight is "+Math.max(b,E)+"px away from the edge of the feature; consider reducing some width values.");const M=[void 0,void 0,void 0,void 0];function k(P,D,j){M[0]=(1-j)*P[0]+j*D[0],M[1]=(1-j)*P[1]+j*D[1],M[2]=(1-j)*P[2]+j*D[2],M[3]=(1-j)*P[3]+j*D[3]}const{_texelData:L}=this;for(let P=0;P<_w;++P)I=n+P/(_w-1)*(f-n),I<n?(M[0]=0,M[1]=0,M[2]=0,M[3]=0):I<o?k(q8e,r.outlineColor,(I-n)/(o-n)):I<u?[M[0],M[1],M[2],M[3]]=r.outlineColor:I<f?k(r.outlineColor,r.fillColor,(I-u)/(f-u)):[M[0],M[1],M[2],M[3]]=r.fillColor,L[4*P]=255*M[0],L[4*P+1]=255*M[1],L[4*P+2]=255*M[2],L[4*P+3]=255*M[3];if(this._minMaxDistance[0]=n,this._minMaxDistance[1]=f,!this._shadeTex){const P=new xle;P.wrapMode=MI.CLAMP_TO_EDGE,P.width=_w,P.height=1,this._shadeTex=new Ile(t,P)}this._shadeTex.updateData(0,0,0,_w,1,this._texelData)}},H8e=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(t){for(let i=0;i<t.length;i++)this.gradients[i]||(this.gradients[i]=new Tle),this.gradients[i].setHighlightOptions(t[i].options);for(let i=t.length+1;i<this.gradients.length;i++)this.gradients[i].destroy();this.gradients.length=t.length}destroy(){for(const t of this.gradients)t.destroy()}getReasonsWithGradients(){let t=1;const i=[];for(let r=0;r<this.gradients.length;r++){const n=this.gradients[r];i.push({activeReasons:t,activeGradient:n}),t<<=1}return i}};var Fq,Dq,jq,zq,Vq,Uq,AI,Gq,Bq;(function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT",e[e.LABEL=4]="LABEL"})(Fq||(Fq={})),function(e){e[e.NONE=0]="NONE",e[e.MAP=1]="MAP",e[e.LABEL=2]="LABEL",e[e.LABEL_ALPHA=4]="LABEL_ALPHA",e[e.HITTEST=8]="HITTEST",e[e.HIGHLIGHT=16]="HIGHLIGHT",e[e.CLIP=32]="CLIP",e[e.DEBUG=64]="DEBUG",e[e.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(Dq||(Dq={})),function(e){e[e.SIZE=0]="SIZE",e[e.COLOR=1]="COLOR",e[e.OPACITY=2]="OPACITY",e[e.ROTATION=3]="ROTATION"}(jq||(jq={})),function(e){e[e.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",e[e.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",e[e.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",e[e.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(zq||(zq={})),function(e){e[e.SPRITE=0]="SPRITE",e[e.GLYPH=1]="GLYPH"}(Vq||(Vq={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SIMPLE=1]="SIMPLE",e[e.DOT_DENSITY=2]="DOT_DENSITY",e[e.OUTLINE_FILL=3]="OUTLINE_FILL",e[e.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",e[e.HEATMAP=5]="HEATMAP",e[e.PIE_CHART=6]="PIE_CHART"}(Uq||(Uq={})),function(e){e[e.All=0]="All",e[e.Highlight=1]="Highlight",e[e.InsideEffect=2]="InsideEffect",e[e.OutsideEffect=3]="OutsideEffect"}(AI||(AI={})),function(e){e[e.BATCHING=0]="BATCHING",e[e.STRICT_ORDER=1]="STRICT_ORDER",e[e.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"}(Gq||(Gq={})),function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT"}(Bq||(Bq={}));const $le={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:vL.EQUAL,mask:255,op:{fail:A3.KEEP,zFail:A3.KEEP,zPass:A3.REPLACE}}}},W8e={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},Z8e={...$le,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function J8e({pixelRatio:e,state:t,displayLevel:i,requiredLevel:r},n){const o=1/2**(i-n.key.level),u=1/2**(r-n.key.level);return{displayMat3:t.displayMat3,displayViewMat3:t.displayViewMat3,displayViewScreenMat3:n.transforms.displayViewScreenMat3,viewMat3:t.viewMat3,tileMat3:n.transforms.tileMat3,displayZoomFactor:o,requiredZoomFactor:u,tileOffset:[n.x,n.y],currentScale:t.scale,currentZoom:i,metersPerSRUnit:xu(t.spatialReference),rotation:t.rotation,pixelRatio:e}}function Mle(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="highlight"}function Cle(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="hittest"}function K8e(e){if(!Cle(e))return null;const{position:t,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:n}=e.passOptions;return{position:t,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:n}}function Y8e(e){if(!Mle(e))return null;const{activeReasons:t,highlightAll:i}=e.passOptions;return{activeReasons:t,highlightAll:i?1:0}}function tlt(e,t,i){const r={};for(const n in i)i[n]instanceof Function?r[n]=i[n](e,t):r[n]=i[n];return r}function ilt(e,t){const{attributeView:i,context:r}=e;return{storage:i.getUniforms(r),view:J8e(e,t),hittestRequest:K8e(e),highlight:Y8e(e)}}function rlt(e){return{inside:e.selection===AI.InsideEffect,outside:e.selection===AI.OutsideEffect}}function X8e(e){return Cle(e)?W8e:Mle(e)&&e.passOptions.stepType==="clear"?Z8e:$le}function nlt(e){const{row:t,col:i}=e.key,r=i*fq,n=t*fq;return{tileOffsetFromLocalOrigin:[r%Y5,n%Y5],maxIntsToLocalOrigin:[Math.floor(r/Y5),Math.floor(n/Y5)]}}const Q8e=new gt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function slt(e){return Q8e.toJSON(e)}function olt(e){const{bandCount:t,attributeTable:i,colormap:r,pixelType:n}=e.raster.rasterInfo;return t===1&&(i!=null||r!=null||n==="u8"||n==="s8")}function eke(e,t){return t==null?(e==null||e.destroy(),null):((e==null?void 0:e.type)==="single"&&Array.isArray(t)&&(e.destroy(),e=null),(e==null?void 0:e.type)!=="multi"||Array.isArray(t)||(e.destroy(),e=null),e||(e=Array.isArray(t)?new H8e:new Tle),Array.isArray(t)?e.type==="multi"&&e.setHighlightOptions(t):e.type==="single"&&e.setHighlightOptions(t),e)}function alt(e,t,i,r){const{painter:n,highlightGradient:o}=e,{highlight:u}=n.effects;if(!o)return;const f=e.passOptions,g=o.getReasonsWithGradients();for(let b=0;b<g.length;b++){const E={...e,passOptions:{type:"highlight",activeGradient:r!=null?g[r].activeGradient:g[b].activeGradient,activeReasons:g[b].activeReasons,stepType:"burn",highlightAll:t}};if(u.bind(E),i(E),b<g.length-1){let M=0;for(let k=b+1;k<g.length;k++)M|=g[k].activeReasons;i({...e,passOptions:{type:"highlight",activeGradient:r!=null?g[r].activeGradient:g[b].activeGradient,activeReasons:M,stepType:"clear",highlightAll:t}})}const I={...e,passOptions:{type:"highlight",activeGradient:r!=null?g[r].activeGradient:g[b].activeGradient,activeReasons:g[b].activeReasons,stepType:"draw",highlightAll:t}};n.setPipelineState(X8e(e)),n.updatePipelineState(e.context),u.draw(I),u.unbind()}e.passOptions=f}const Q5=e=>parseFloat(e)/100;function tke(e,t,i){const r=typeof e.left=="string"?Q5(e.left)*t:e.left,n=typeof e.right=="string"?Q5(e.right)*t:e.right,o=typeof e.top=="string"?Q5(e.top)*i:e.top,u=typeof e.bottom=="string"?Q5(e.bottom)*i:e.bottom,f=o;return{xmin:r,xmax:Math.max(t-n,r),ymin:f,ymax:Math.max(i-u,o)}}function Ale(e,t,i,r){switch(t.type){case"rect":{const{width:n,height:o}=e,{xmin:u,xmax:f,ymin:g,ymax:b}=tke(t,n,o),{x:E,y:I}=i;return E>u&&E<f&&I>g&&I<b}case"path":return t.path.length===0||!Array.isArray(t.path[0][0])||ON(t.path,[i.x,i.y]);case"geometry":return t.geometry==null||(t.geometry.type==="polygon"?LN(t.geometry,r):dS(t.geometry,r))}}var bL;let Dg=bL=class extends De{constructor(...e){super(...e),this.name="default",this.options=new nm}clone(){return new bL({name:this.name,options:this.options.clone()})}};m([w({type:String})],Dg.prototype,"name",void 0),m([w({type:nm})],Dg.prototype,"options",void 0),Dg=bL=m([H("esri.views.2d.support.HighlightGroup")],Dg);const kle=Oe.ofType(Dg);function Lle(){return new kle([{name:C8e,options:new nm},{name:A8e,options:new nm({color:k8e})}])}Lle().items.map(e=>e.name);function ike(e){if(!e.highlights)return null;const t=e.highlights.findIndex(i=>i.name==="default");return t===-1?null:e.highlights.items[t].options}function rke(e,t){if(!e.highlights){if(!t)return;e.highlights=new kle([{name:"default",options:new nm}])}const i=e.highlights.findIndex(r=>r.name==="default");t?e.highlights.items[i].options=t:e.highlights.removeAt(i)}async function nke(e,t,i){const r=iae(t)?tae(e,t):t;if(!e.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let n=new Set;const o=new Set;let u=!1,f=null,g=null;i!=null&&i.include?Hq(i.include,qq(e,M=>{n.add(M),YM(M,k=>o.add(k))},(M,k)=>{o.add(M),n.add(k)},M=>{f||(f=new Set),f.add(M)},M=>n.add(M),()=>u=!0)):(u=!0,n=new Set(e.allLayerViews),n.forEach(M=>{YM(M,k=>o.add(k))})),i!=null&&i.exclude&&Hq(i.exclude,qq(e,M=>{n.delete(M),YM(M,k=>o.delete(k))},M=>o.delete(M),M=>{g||(g=new Set),g.add(M)}));const b=e.toMap(r),E=e.allLayerViews.filter(M=>!M.suspended&&n.has(M)&&M.clips.every(k=>Ale(e,k,r,b))).reverse();let I=[...u?e.graphicsView.hitTest(b).map(M=>({type:"graphic",graphic:M,layer:null,mapPoint:b})):[],...await Promise.all(E.map(M=>M.hitTest(b,r)).toArray())].filter(cr).flat().filter(cr);return I=I.filter(M=>{var k;return M.type!=="graphic"||((k=M.layer)==null?void 0:k.type)!=="subtype-group"||o.has(M.graphic.layer)}),f&&(I=I.filter(M=>!("graphic"in M)||!M.graphic||(f==null?void 0:f.has(_L(M.graphic))))),g&&(I=I.filter(M=>!("graphic"in M)||!M.graphic||!(g!=null&&g.has(_L(M.graphic))))),{screenPoint:r,results:I}}function qq(e,t,i,r,n,o){return u=>{if(u instanceof qi){if(u.layer===e)o==null||o();else{const f=e.allLayerViews.find(g=>g.layer===u.layer);f&&(n==null||n(f))}r(_L(u))}else if(!("layer"in u&&"element"in u))if(u.type==="subtype-sublayer"){const f=e.allLayerViews.find(g=>g.layer===u.parent);f&&i(u,f)}else{const f=e.allLayerViews.find(g=>g.layer===u);f&&t(f)}}}function Hq(e,t){if(e)if(DE(e))for(const i of e)if(DE(i))for(const r of i)t(r);else t(i);else t(e)}function _L(e){var i,r;const t=e.getObjectId();return t?`${((i=e.layer)==null?void 0:i.uid)??((r=e.sourceLayer)==null?void 0:r.uid)??"MapView"}/${t}`:`"MapView/${e.uid}`}function YM({layer:e},t){(e==null?void 0:e.type)==="subtype-group"&&e.sublayers.forEach(i=>{t(i)})}let xw=null,kI=!0;function ske(e,t,i){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(kI)try{return new ImageData(e,t)}catch{kI=!1}return Ole(e,t,i)}function llt(e,t,i,r){if(!t||!i)throw new Error("Cannot construct image data without dimensions");if(kI)try{return new ImageData(e,t,i)}catch{kI=!1}const n=Ole(t,i,r);return n.data.set(e,0),n}function oke(){return xw||(xw=document.createElement("canvas"),xw.width=1,xw.height=1),xw}function Ole(e,t,i){return i||(i=oke()),i.getContext("2d").createImageData(e,t)}async function ake(e,t){const i=window.URL.createObjectURL(e);try{const{data:r}=await Ct(i,{...t,responseType:"image"});return r}catch(r){throw Or(r)?r:new ne("invalid-image",`Could not fetch requested image at ${i}`)}finally{window.URL.revokeObjectURL(i)}}async function ult(e,t){const{arrayBuffer:i,mediaType:r}=await lke(e,t),n=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:o,parseGif:u}=await ce(()=>import("./gif-DuA06Zd9.js"),[],import.meta.url);if(o(i))return u(i,t)}if(n){const{isAnimatedPNG:o,parseApng:u}=await ce(()=>import("./apng-BgBHdR3q.js"),[],import.meta.url);if(o(i))return u(i,t)}return ake(new Blob([i],{type:r}),t)}async function lke(e,t){var n;const i=qy(e);if(i!=null&&i.isBase64)return{arrayBuffer:Ste(i.data),mediaType:i.mediaType};const r=await Ct(e,{responseType:"array-buffer",...t});return{arrayBuffer:r.data,mediaType:((n=r.getHeader)==null?void 0:n.call(r,"Content-Type"))??""}}function Rle(e,t,i){const{ctx:r,canvas:n}=Nle(e,i),o=r.getImageData(0,0,e.width,e.height),u=Dle(n,t);return Fle(n),{dataUrl:u,data:o}}function Ple(e,t){const{ctx:i,canvas:r}=Nle(e,t),n=i.getImageData(0,0,e.width,e.height);return Fle(r),n}function Nle(e,t){const i=uke();t.premultipliedAlpha&&pke(e),i.width=e.width,i.height=e.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(e,0,0),t.flipY&&dke(r),{ctx:r,canvas:i}}function Fle(e){e.width=0,e.height=0}function uke(){return XM==null&&(XM=document.createElement("canvas")),XM}let XM=null;function Dle(e,t){const i=fke[t.format],r=t.quality/100;return e.toDataURL(i,r)}function jle(e,t){const i=hke(e),r=mke[i];return{format:i,quality:oo(t??r,0,100)}}function zle(e,t){return t/Math.max(e[0],e[1])}function cke(e,t,i,r=0,n=0,o=e.width-r,u=e.height-n,f=!1){const{data:g}=e,{width:b,height:E,data:I}=t,M=o/b,k=u/E,L=Math.ceil(M/2),P=Math.ceil(k/2),D=e.width;for(let j=0;j<E;j++)for(let z=0;z<b;z++){const V=4*(z+(f?E-j-1:j)*b);let W=0,Q=0,Z=0,ee=0,ie=0,oe=0;const le=(j+.5)*k;for(let xe=Math.floor(j*k);xe<(j+1)*k;xe++){const $e=Math.abs(le-(xe+.5))/P,Te=(z+.5)*M,de=$e*$e;for(let se=Math.floor(z*M);se<(z+1)*M;se++){const ye=Math.abs(Te-(se+.5))/L,ue=Math.sqrt(de+ye*ye);if(ue>=1)continue;let pe=2*ue*ue*ue-3*ue*ue+1;const _e=4*(r+se+(n+xe)*D);oe+=pe*g[_e+3],Q+=pe,!i&&g[_e+3]<255&&(pe=pe*g[_e+3]/255),Z+=pe*g[_e],ee+=pe*g[_e+1],ie+=pe*g[_e+2],W+=pe}}I[V]=Z/W,I[V+1]=ee/W,I[V+2]=ie/W,I[V+3]=oe/Q}return t}function hke(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return yke}}function dke(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function pke(e){const t=e.data,i=t.length;for(let r=0;r<i;r+=4){const n=t[r+3];if(n!==255&&n>0){const o=255/n;t[r]=t[r]*o,t[r+1]=t[r+1]*o,t[r+2]=t[r+2]*o}}}const fke={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},Wq=98,yke="png",mke={png:100,jpg:Wq,jpeg:Wq},clt=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:ske,encode:Rle,encodeData:Ple,getFormatAndQuality:jle,getMaximumResolutionScale:zle,resampleHermite:cke,toDataUrl:Dle},Symbol.toStringTag,{value:"Module"})),Vle={flipY:!0,premultipliedAlpha:!0};async function gke(e,t){const i=await Ule(e,t),{format:r,quality:n}=jle(t==null?void 0:t.format,t==null?void 0:t.quality);return Rle(i,{format:r,quality:n},Vle)}async function vke(e,t){const i=await Ule(e,t);return Ple(i,Vle)}function Ule(e,t){const i=_ke(t||{},bke(e.stage,e.size),e.size,e.padding),r=wke(t,e.allLayerViews);return e.stage.takeScreenshot(i,r,e.backgroundColor,t==null?void 0:t.rotation)}function wke(e={},t){if(!e.layers)return;const i=[];return e.layers.forEach(r=>{const n=t.find(o=>o.layer.id===r.id);n!=null&&n.container&&i.push(n.container)}),i}function bke(e,t){return Math.min(4,zle(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function _ke(e,t,i,r){e.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let n=null;e.width!=null&&e.height!=null?n=[e.width,e.height]:e.width==null&&e.height!=null?n=[e.height,e.height]:e.width!=null&&e.height==null?n=[e.width,e.width]:e.width==null&&e.height==null&&(n=null);const o=i[0]-(r.left+r.right),u=i[1]-(r.top+r.bottom);let f,g,b=e.area||{x:0,y:0,width:o,height:u};if(n){const E=o/u,I=n[0]/n[1];if(I>E){const M=b.width/I;b={x:b.x,y:Math.round(b.y+(b.height-M)/2),width:b.width,height:Math.round(M)}}else{const M=b.height*I;b={x:Math.round(b.x+(b.width-M)/2),y:b.y,width:Math.round(M),height:b.height}}}else n=[b.width,b.height];return n[0]>b.width?(f=Math.min(n[0]/b.width,t),g=n[0]/b.width/f):(f=1,g=n[0]/b.width),{cropArea:{x:Math.round((b.x+r.left)*f),y:Math.round((b.y+r.top)*f),width:Math.round(b.width*f),height:Math.round(b.height*f)},outputScale:g,resolutionScale:f}}const Zq=160;let Ab=class extends De{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=Zq&&this.clear()},Zq))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};m([w()],Ab.prototype,"_timer",void 0),m([w()],Ab.prototype,"stationary",null),Ab=m([H("esri.views.2d.support.StationaryManager")],Ab);const Ske=e=>e.includes("Brush");let Gle=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),Ske(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}},QM;function xke(){return QM||(QM=Tke()),QM}let Eke=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}};function Ike(e){if(typeof WebGL2RenderingContext>"u")return null;const t=document.createElement("canvas");if(!t)return null;let i=t.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(i==null&&(i=t.getContext("webgl2"),i!=null&&(e.majorPerformanceCaveat=!0)),i==null)return i;e.available=!0,e.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return r&&(e.supportsHighPrecisionFragment=r.precision>0),i}function Tke(){const e=new Eke,t=Ike(e);return t==null||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function $ke(e){const t=xke();return t.available?e==="3d"&&t.majorPerformanceCaveat?new ne("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new ne("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new ne("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new ne("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function Mke(e){return e&&"nodeType"in e}function Cke(e){return e&&typeof e.render=="function"}const Jq={component:"esri-component"};let $0=class extends De{constructor(){super(...arguments),this.widget=null}destroy(){var t;this.node=null,(t=this.widget)==null||t.destroy()}get id(){var t,i;return this._get("id")??((t=this.widget)==null?void 0:t.id)??((i=this.node)==null?void 0:i.id)}set id(t){this._set("id",t)}set node(t){const i=this._get("node");t!==i&&(t&&t.classList.add(Jq.component),i&&i.classList.remove(Jq.component),this._set("node",t))}castNode(t){var i;return(i=this.widget)==null||i.destroy(),t?typeof t=="string"||Mke(t)?(this._set("widget",null),oF(t)):(Cke(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};m([w()],$0.prototype,"id",null),m([w()],$0.prototype,"node",null),m([St("node")],$0.prototype,"castNode",null),m([w({readOnly:!0})],$0.prototype,"widget",void 0),$0=m([H("esri.views.ui.Component")],$0);const o4=$0,Ble="calcite-mode-";function Ake(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function XF(){return Ake().startsWith("dark")}function kke(){return`${Ble}${XF()?"dark":"light"}`}function Lke(e){Oke(e),e.classList.add(kke())}function Oke(e){Array.from(e.classList).forEach(t=>{t.startsWith(Ble)&&e.classList.remove(t)})}const Rke={left:0,top:0,bottom:0,right:0},qle={bottom:30,top:15,right:15,left:15},Wc="esri-ui",co={ui:Wc,corner:`${Wc}-corner`,innerContainer:`${Wc}-inner-container`,manualContainer:`${Wc}-manual-container`,cornerContainer:`${Wc}-corner-container`,topLeft:`${Wc}-top-left`,topRight:`${Wc}-top-right`,bottomLeft:`${Wc}-bottom-left`,bottomRight:`${Wc}-bottom-right`};function Pke(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function ex(e){return e===0?"0":`${e}px`}function e7(e){const t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function t7(e,{top:t,bottom:i,left:r,right:n}){e.style.top=t,e.style.bottom=i,e.style.left=r,e.style.right=n}let qu=class extends Us.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Ds(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&t7(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&t7(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([me(()=>{var t;return[(t=this.view)==null?void 0:t.padding,this.container]},this._applyViewPadding,Je),me(()=>this.padding,this._applyUIPadding,Je),me(()=>[this.container,this._locale],([t,i])=>{t&&t.setAttribute("lang",i)},Je),fS(t=>{this._locale=t})])}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._componentMap.clear()}set container(t){const i=this._get("container");t!==i&&(t&&(t.classList.add(co.ui),Lke(t),this._attachContainers(t)),i&&(i.classList.remove(co.ui),t7(i,{top:"",bottom:"",left:"",right:""}),i.textContent=""),this._set("container",t))}get height(){var o;const t=((o=this.view)==null?void 0:o.height)??0;if(t===0)return t;const i=this._getViewPadding(),{top:r,bottom:n}=i;return Math.max(t-r-n,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return typeof t=="number"?{bottom:t,top:t,right:t,left:t}:{...qle,...t}}get width(){var o;const t=((o=this.view)==null?void 0:o.width)??0;if(t===0)return t;const i=this._getViewPadding(),{left:r,right:n}=i;return Math.max(t-r-n,0)}add(t,i){let r,n,o;if(Array.isArray(t))return void t.forEach(f=>this.add(f,i));const u=e7(t);u&&({index:r,position:i,component:t,key:n}=u),i&&typeof i=="object"&&({index:r,key:n,position:i,internal:o}=i),!t||i&&!this._isValidPosition(i)||this._add(t,i,r,n,o)}remove(t,i){var n,o;if(!t)return;if(Array.isArray(t))return t.map(u=>this.remove(u,i));const r=this._find(t);if(r){if(this._componentMap.has(r)&&((n=this._componentMap.get(r))==null?void 0:n.key)!==i)return;const u=this._components.indexOf(r),f=r.node.parentNode;return f==null||f.removeChild(r.node),this._componentMap.delete(r),(o=r.widget)==null||o.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(u,1)[0]}}empty(t,i={removeInternal:!1}){if(Array.isArray(t)){for(const o of t)this.empty(o,i);return}const r=this._positionNameToContainerLookup[t??"manual"],n=Array.prototype.slice.call(r.children).map(o=>this._findByNode(o)).filter(o=>{var u;return o==null?!1:!(((u=this._componentMap.get(o))==null?void 0:u.internal)??!1)||i.removeInternal});for(const o of n)this.remove(o)}move(t,i){if(Array.isArray(t)&&t.forEach(u=>this.move(u,i)),!t)return;let r;const n=e7(t)||e7(i);if(n&&(r=n.index,i=n.position,t=n.component||t),i&&!this._isValidPosition(i))return;const o=this.remove(t);o&&this.add(o,{position:i,index:r})}find(t){if(!t)return null;const i=this._findById(t);return i&&(i.widget||i.node)}getComponents(t,i={includeInternal:!1}){return t?Array.isArray(t)?t.flatMap(r=>this._getComponentsAtPosition(r,i)):this._getComponentsAtPosition(t,i):this._components.filter(r=>{var n;return i.includeInternal||!((n=this._componentMap.get(r))!=null&&n.internal)}).map(({widget:r,node:n})=>r??n)}getPosition(t){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(t))return i;return null}_add(t,i,r,n,o){t instanceof o4||(t=new o4({node:t}));const{widget:u}=t;u!=null&&u instanceof De&&u.addHandles(Yt(()=>{queueMicrotask(()=>this.remove(t))}),this._removeWidgetHandleKey),this._place({component:t,position:i,index:r}),this._components.push(t),this._componentMap.set(t,{key:n,internal:o})}_find(t){return t?t instanceof o4?this._findByComponent(t):typeof t=="string"?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){var t;return((t=this.view)==null?void 0:t.padding)??Rke}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){const t=document.createElement("div");t.classList.add(co.innerContainer,co.cornerContainer);const i=document.createElement("div");i.classList.add(co.innerContainer,co.manualContainer);const r=document.createElement("div");r.classList.add(co.topLeft,co.corner),t.appendChild(r);const n=document.createElement("div");n.classList.add(co.topRight,co.corner),t.appendChild(n);const o=document.createElement("div");o.classList.add(co.bottomLeft,co.corner),t.appendChild(o);const u=document.createElement("div");u.classList.add(co.bottomRight,co.corner),t.appendChild(u),this._innerContainer=t,this._manualContainer=i;const f=ha();this._cornerNameToContainerLookup={"top-left":r,"top-right":n,"bottom-left":o,"bottom-right":u,"top-leading":f?n:r,"top-trailing":f?r:n,"bottom-leading":f?u:o,"bottom-trailing":f?o:u},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){var b,E;const i=t.position??"manual",{component:r,index:n}=t,o=this._positionNameToContainerLookup[i],u=n!=null&&n>-1;if(Pke(r.widget)&&r.widget.startup(),!u)return void o.appendChild(r.node);const f=Array.from(o.children);if(n===0){const{firstChild:I}=o;return void(I?(b=I.parentNode)==null?void 0:b.insertBefore(r.node,I):o.appendChild(r.node))}if(n>=f.length)return void o.appendChild(r.node);const g=f[n];(E=g.parentNode)==null||E.insertBefore(r.node,g)}_toPixelPosition(t){return{top:ex(t.top),left:ex(t.left),right:ex(t.right),bottom:ex(t.bottom)}}_findByComponent(t){return this._components.find(i=>i===t)??null}_findById(t){return this._components.find(({id:i})=>i===t)??null}_findByNode(t){return this._components.find(({node:i})=>i===t)??null}_getComponentsAtPosition(t,i){const r=this._positionNameToContainerLookup[t];return Array.prototype.slice.call(r.children).map(n=>this._findByNode(n)).filter(cr).filter(n=>{var o;return i.includeInternal||!((o=this._componentMap.get(n))!=null&&o.internal)}).map(({widget:n,node:o})=>n??o)}};m([w()],qu.prototype,"_locale",void 0),m([w()],qu.prototype,"container",null),m([w()],qu.prototype,"height",null),m([w({value:qle})],qu.prototype,"padding",null),m([St("padding")],qu.prototype,"castPadding",null),m([w()],qu.prototype,"view",void 0),m([w()],qu.prototype,"width",null),qu=m([H("esri.views.ui.UI")],qu);const Nke=qu,Fke="randomUUID"in crypto;function QF(){if(Fke)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=i=>e[i].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function mlt(){return`{${QF().toUpperCase()}}`}function Dke(){return`{${QF()}}`}function jke(e){const t=e.toUpperCase();return e[0]!=="{"?`{${t}}`:t}const zke={handleInterceptedEvent:(e,t,i,r)=>(e.scheduleRender(),t.properties[`on${r.type}`].apply(t.properties.bind||i,[r]))},Vke={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}},Uke=e=>({...Vke,...e}),Gke=(e,t)=>{const i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i},Bke=(e,t)=>e.find(t),Kq=(e,t,i=!1)=>{let r=e;return t.forEach((n,o)=>{const u=r!=null&&r.children?Bke(r.children,f=>f.domNode===n):void 0;i&&!u&&o!==t.length-1||(r=u)}),r},qke=e=>{let t;const i={...zke,...e},r=Uke(i),n=r.performanceLogger;let o,u=!0,f=!1;const g=[],b=[],E=(M,k,L)=>{var j;let P;r.eventHandlerInterceptor=(z,V,W,Q)=>function(Z){let ee;n("domEvent",Z);const ie=Gke(Z.currentTarget,P.domNode),oe=ie.some(xe=>{var $e;return customElements.get(($e=xe==null?void 0:xe.tagName)==null?void 0:$e.toLowerCase())});if(Z.eventPhase===Event.CAPTURING_PHASE||!oe)ie.reverse(),ee=Kq(P.getLastRender(),ie);else{const xe=Z.composedPath(),$e=xe.slice(xe.indexOf(Z.currentTarget),xe.indexOf(P.domNode)).reverse();ee=Kq(P.getLastRender(),$e,!0)}let le;return ee&&(le=i.handleInterceptedEvent(t,ee,this,Z)),n("domEventProcessed",Z),le},(j=i.postProcessProjectionOptions)==null||j.call(i,r);const D=L();P=M(k,D,r),r.eventHandlerInterceptor=void 0,g.push(P),b.push(L),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(P,D)};let I=()=>{if(o=void 0,u){u=!1,n("renderStart",void 0);for(let M=0;M<g.length;M++){const k=b[M]();n("rendered",void 0);try{g[M].update(k)}catch(L){console.error(L)}n("patched",void 0)}n("renderDone",void 0),u=!0}};return i.modifyDoRenderImplementation&&(I=i.modifyDoRenderImplementation(I,g,b)),t={renderNow:I,scheduleRender:()=>{o||f||(o=requestAnimationFrame(I))},stop:()=>{o&&(cancelAnimationFrame(o),o=void 0),f=!0},resume:()=>{f=!1,u=!0,t.scheduleRender()},append:(M,k)=>{E(zp.append,M,k)},insertBefore:(M,k)=>{E(zp.insertBefore,M,k)},merge:(M,k)=>{E(zp.merge,M,k)},replace:(M,k)=>{E(zp.replace,M,k)},detach:M=>{for(let k=0;k<b.length;k++)if(b[k]===M)return b.splice(k,1),g.splice(k,1)[0];throw new Error("renderFunction was not found")}},t};let Hle;function Hke(){try{WP(".")}catch{AQ(Co(Vt(Hle)))}}function cs(e){var i;const t=[];for(const r of Object.keys(e))customElements.get(`calcite-${r}`)||t.push((i=e[r])==null?void 0:i.call(e));return t.length>0?Promise.all(t):null}Hle="components/assets";const Wle=Symbol("widget"),Zle=Symbol("widget-test-data"),Wke=[],Zke={},LI=new WeakMap;function Jle(e,t){let i=t.children;if(i!=null&&i.length)for(let n=0;n<i.length;++n)i[n]=Jle(e,i[n]);else i=Wke;const r=t.vnodeSelector;if(OI(r)){const n=t.properties||Zke,o=n.key||r,u={key:o,afterCreate:Jke,afterUpdate:Kke,afterRemoved:Kle,parentWidget:e,widgetConstructor:r,widgetProperties:{...n,key:o,children:i}};return{vnodeSelector:r.vnodeSelector,properties:u,children:void 0,text:void 0,domNode:null}}return t}function Jke(e,t,i,{parentWidget:r,widgetConstructor:n,widgetProperties:o}){var f;const u=new n(o);u.container=e,LI.set(e,u),(f=u.afterCreate)==null||f.call(u,u,e),r.addHandles(Yt(()=>Kle(e))),queueMicrotask(()=>{u[Zle].projector.renderNow()})}function Kke(e,t,i,{widgetProperties:r}){var o;const n=LI.get(e);n&&(n.set(r),(o=n.afterUpdate)==null||o.call(n,n,e))}function Kle(e){var i;const t=LI.get(e);t&&((i=t.afterRemoved)==null||i.call(t,t,e),t.destroy(),LI.delete(e))}function OI(e){return typeof e=="function"&&e[Wle]}const Yq=new Set;function Yke(e){Yq.add(e),e.finally(()=>Yq.delete(e))}var Yle;const Xke="esri.widgets.Widget";let Qke=0;function Xle(e,t){const i=Object.prototype.hasOwnProperty;for(const r in t)i.call(t,r)&&i.call(e,r)&&(e[r]!=null&&t[r]!=null&&typeof e[r]=="object"&&typeof t[r]=="object"?Xle(e[r],t[r]):e[r]=t[r]);return e}const eLe=qke({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,i=/capture$/i;e.eventHandlerInterceptor=(r,n,o,u)=>{const f=t==null?void 0:t(r,n,o,u),g=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in o)||g){const b=r[2].toLowerCase()+r.slice(3),E=k=>f==null?void 0:f.call(o,k);o.addEventListener(b,E,g);const I=()=>o.removeEventListener(b,E,g),M=u.afterRemoved;u.afterRemoved=k=>{M==null||M(k),I()}}return f}},handleInterceptedEvent(e,t,i,r){const{eventPhase:n,type:o}=r,u=n===Event.CAPTURING_PHASE;let f=`on${o}${u?"capture":""}`;const g=t.properties;(g&&f in g||(f=`on${o[0].toUpperCase()}${o.slice(1)}${u?"Capture":""}`,g&&f in g))&&(Hne(),e.scheduleRender(),g[f].call(g.bind||i,r))}});let i7=!1,Zr=class extends wS(Us.EventedAccessor){constructor(t,i){super(t,i),this._attached=!1,this._projector=eLe,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=yu(async()=>{var g;if((g=this._messageBundleProps)!=null&&g.length){const b=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:E,propertyName:I})=>{if(this.destroyed)return;let M=await vS(E);this.uiStrings&&Object.keys(this.uiStrings)&&(M=Xle(he(M),this.uiStrings)),this[I]=M}));if(this.destroyed)return;for(const E of b)E.status==="rejected"&&Se.getLogger(this).error("widget-intl:locale-error",this.declaredClass,E.reason)}await this.loadLocale()}),Hke();const r="esri-widget-uid-"+QF(),n=this.render.bind(this);this._trackingTarget=new D6(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const o=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),u=()=>{var I,M;if(!this._readyForTrueRender||this.destroyed)return null;const g=n()??o(),b=g.properties??(g.properties={});if(b.key??(b.key=r),OI(g.vnodeSelector)){if(!this.visible)return o()}else this.visible?b.styles||(b.styles={}):(b.class="",b.styles={display:"none"}),(I=b.styles).display??(I.display="");let E=0;return(M=g.children)==null||M.forEach(k=>{var L;OI(k.vnodeSelector)||(k.properties??(k.properties={}),(L=k.properties).key??(L.key=`${this.id}--${E++}`))}),Jle(this,g)};this.render=()=>{if(i7)return u();let g=n4e(this)??null;if(g)return g;this._trackingTarget.clear(),i7=!0;try{g=sd(this._trackingTarget,u)}catch(b){throw Se.getLogger(this).error(b),b}finally{i7=!1}return g&&s4e(this,g),g};const f=this.beforeFirstRender();f?this._resourcesFetch=f.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),Yke(this._resourcesFetch)}normalizeCtorArgs(t,i){const r={...t};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){var i;const t=this.loadDependencies();return(i=this._messageBundleProps)!=null&&i.length||t?Promise.all([t,this._loadLocale()]).then(()=>{}).catch(TA):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(Jt(this._trackingTarget),Jt(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,_M(this))}set container(t){this._get("container")||this._set("container",t)}castContainer(t){return oF(t)}get domNode(){return this.container}set domNode(t){this.container=t}get icon(){return null}set icon(t){this._overrideIfSome("icon",t)}get id(){var t;return this._get("id")||((t=this.container)==null?void 0:t.id)||Date.now().toString(16)+"-widget-"+Qke++}set id(t){t&&this._set("id",t)}get label(){return this.declaredClass.split(".").pop()}set label(t){this._overrideIfSome("label",t)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(t){this._set("visible",t)}get[(Yle=Wle,Zle)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(_M(this),this._projector.scheduleRender())}own(t){Kee(Se.getLogger(this),"`Widget.own()` is deprecated in favor of 'Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(t)}classes(...t){return Lg.apply(this,t)}renderNow(){_M(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this.addHandles(me(()=>this.viewModel,(r,n)=>{n&&this.removeHandles("delegated-events"),r&&P6(r)&&this.addHandles(this._delegatedEventNames.map(o=>aS(r,o,u=>{this.emit(o,u)})),"delegated-events")},Ln)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(TA),this.scheduleRender()};this.addHandles([fS(t),me(()=>this.uiStrings,t),rn(()=>this.container,r=>{this.destroyed||this._attach(r)},{initial:!0,once:!0})])}_attach(t){t&&(this._projector.merge(t,this.render),this._attached=!0)}_detach(t){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=t==null?void 0:t.parentNode)==null||i.removeChild(t)}};Zr[Yle]=!0,Zr.vnodeSelector="div",m([w()],Zr.prototype,"_readyForTrueRender",void 0),m([w({value:null})],Zr.prototype,"container",null),m([St("container")],Zr.prototype,"castContainer",null),m([w()],Zr.prototype,"icon",null),m([w()],Zr.prototype,"id",null),m([w()],Zr.prototype,"label",null),m([w()],Zr.prototype,"renderable",null),m([w()],Zr.prototype,"uiStrings",void 0),m([w()],Zr.prototype,"viewModel",void 0),m([w({value:!0})],Zr.prototype,"visible",null),m([w()],Zr.prototype,"key",void 0),m([w()],Zr.prototype,"children",void 0),m([w()],Zr.prototype,"afterCreate",void 0),m([w()],Zr.prototype,"afterUpdate",void 0),m([w()],Zr.prototype,"afterRemoved",void 0),Zr=m([H(Xke)],Zr);const bi=Zr,tLe=new Map;function iLe(e){return tLe.get(e)}function Xq(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function rLe(e,t){return e.length!==t.length||e.some((i,r)=>i.text!==t[r].text)}function Ew(e,t,i){!i||!t||e.find(r=>r.layerView===t&&r.text===i)||e.push({text:i,layerView:t})}function nLe(e){return e.type==="bing-maps"}const Zc=[];let T1=class extends De{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Oe,this.view=null,this._allLayerViewsChange=i=>{var n;this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const r=(n=this.view)==null?void 0:n.allLayerViews;r&&(this.addHandles(r.map(o=>me(()=>{var u;return[o.suspended,(u=o.layer)==null?void 0:u.attributionVisible]},()=>this._updateAttributionItems())).toArray(),"suspension"),r.forEach(o=>{o.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(o.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),i!=null&&i.removed&&i.removed.forEach(o=>{this._pendingAttributions.delete(o),this._fetchedAttributionData.delete(o)}),this._updateAttributionItems()},this.addHandles([Lr(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),rn(()=>{var i;return((i=this.view)==null?void 0:i.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var t;return(t=this.view)!=null&&t.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const t=this.view,i=t==null?void 0:t.allLayerViews;if(Zc.length=0,!t||!i)return void this._clear();i.forEach(n=>{var f,g;if(n.suspended||!((f=n.layer)!=null&&f.attributionVisible))return;const o=n.layer;if(Xq(o,"user"))return void Ew(Zc,n,o.copyright);if(o.hasAttributionData){if(this._fetchedAttributionData.has(n)){const b=this._fetchedAttributionData.get(n);return void(b?Ew(Zc,n,this._getDynamicAttribution(b,t,o)):Xq(o)&&Ew(Zc,n,o.copyright))}return void this._fetchAttributionData(n)}const u="portalItem"in o?(g=o.portalItem)==null?void 0:g.accessInformation:void 0;Ew(Zc,n,u||o.copyright)});const r=i.find(n=>{var o;return((o=n.layer)==null?void 0:o.type)==="integrated-mesh-3dtiles"});if(this.view&&r){const n=iLe(this.view);if(n){const o=n.getAttributionText();for(let u=0;u<o.length;++u)Ew(Zc,r,o[u])}}rLe(this.items,Zc)&&(this.items.removeAll(),this.items.addMany(Zc)),Zc.length=0,this.notifyChange("state")}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const i=await Z6(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const r=i.ok?this._createContributionIndex(i.value,nLe(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,r)}this._updateAttributionItems()}_createContributionIndex(t,i){const r=t.contributors,n={};if(!r)return n;for(let o=0;o<r.length;o++){const u=r[o],f=u.coverageAreas;if(!f)return;for(const g of f){const b=g.bbox,E=g.zoomMin-(i&&g.zoomMin?1:0),I=g.zoomMax-(i&&g.zoomMax?1:0),M=new Ht({xmin:b[1],ymin:b[0],xmax:b[3],ymax:b[2],spatialReference:st.WGS84}),k={extent:$c(M),attribution:u.attribution||"",score:g.score!=null?g.score:100,id:o};for(let L=E;L<=I;L++)n[L]??(n[L]=[]),n[L].push(k)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(t,i,r){var E;const{extent:n,scale:o}=i;let u=((E=r.tileInfo)==null?void 0:E.scaleToZoom(o))??0;if(u=Math.min(t.maxKey??0,Math.round(u)),!n||u==null||u<=-1)return"";const f=t[u],g=G6(n.center.clone().normalize(),st.WebMercator),b=new Set;return f?f.filter(I=>{const M=I.id,k=!b.has(M)&&g&&I.extent&&dS(I.extent,g);return k&&b.add(M),k}).sort((I,M)=>M.score-I.score||I.objectId-M.objectId).map(I=>I.attribution).join(", "):""}};m([w({readOnly:!0,type:Oe})],T1.prototype,"items",void 0),m([w({readOnly:!0})],T1.prototype,"state",null),m([w()],T1.prototype,"view",void 0),T1=m([H("esri.widgets.Attribution.AttributionViewModel")],T1);const Qle=T1,Ge={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"};function RI(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:oLe(e[t])}}}function sLe(e){const t=e==null?void 0:e.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function oLe(e){return function(t,...i){sLe(t)?Zne(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...i)}}function Xt(e){return(t,i)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:i})}}var aLe=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},eue=function(e,t){for(var i=0,r=e.length;i<r;i++){var n=e[i];Array.isArray(n)?eue(n,t):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=aLe(n)),t.push(n))}},lLe=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:i[0],domNode:null};var n=[];return eue(i,n),{vnodeSelector:e,properties:t||void 0,children:n,text:void 0,domNode:null}};function G(e,t,...i){return typeof e!="function"||OI(e)?lLe(e,t,...i):e(t,...i)}function tue(...e){return e}const zm="esri-attribution",Vm={base:zm,poweredBy:`${zm}__powered-by`,sources:`${zm}__sources`,open:`${zm}--open`,sourcesOpen:`${zm}__sources--open`,link:`${zm}__link`};let Ws=class extends bi{constructor(t,i){super(t,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(r=>r.forEach(({target:n})=>this._checkSourceTextOverflow(n))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new Qle}initialize(){this.addHandles(Lr(()=>{var t;return(t=this.viewModel)==null?void 0:t.items},"change",()=>this.scheduleRender()))}destroy(){var t;(t=this._resizeObserver)==null||t.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((t,i)=>(t.includes(i.text)||t.push(i.text),t),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t={[Vm.open]:this._isOpen};return G("div",{bind:this,class:this.classes(Vm.base,Ge.widget,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return G("div",{class:Vm.poweredBy},"Powered by"," ",G("a",{class:Vm.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const t=this._isOpen,i=this._isInteractive,r=i?0:void 0,{attributionText:n}=this,o={[Vm.sourcesOpen]:t,[Ge.interactive]:i};return G("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Vm.sources,o),innerHTML:n,tabIndex:r})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let i=!1;const{clientHeight:r,clientWidth:n,scrollWidth:o}=t,u=o>n,f=this._attributionTextOverflowed!==u;if(this._attributionTextOverflowed=u,f&&(i=!0),this._isOpen){const g=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,g&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};m([w()],Ws.prototype,"_isOpen",void 0),m([w()],Ws.prototype,"_isInteractive",null),m([w()],Ws.prototype,"_attributionTextOverflowed",void 0),m([w()],Ws.prototype,"_prevSourceNodeHeight",void 0),m([w({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Ws.prototype,"attributionText",null),m([w()],Ws.prototype,"icon",null),m([w()],Ws.prototype,"itemDelimiter",void 0),m([w()],Ws.prototype,"label",null),m([w(),Xt("esri/widgets/Attribution/t9n/Attribution")],Ws.prototype,"messages",void 0),m([w()],Ws.prototype,"view",null),m([w({type:Qle})],Ws.prototype,"viewModel",void 0),m([RI()],Ws.prototype,"_toggleState",null),Ws=m([H("esri.widgets.Attribution")],Ws);const uLe=Ws;function cLe(){const e=we("mapview-essential-goto-duration");return e==null?e:e}function hLe(e){var t,i;return((t=e==null?void 0:e.spatialReference)==null?void 0:t.isWebMercator)||((i=e==null?void 0:e.spatialReference)==null?void 0:i.isGeographic)||!1}const RT=e=>{let t=class extends e{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return oS(r),this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return m([w()],t.prototype,"goToOverride",void 0),m([w()],t.prototype,"view",void 0),t=m([H("esri.widgets.support.GoTo")],t),t};let M0=class extends RT(De){constructor(t){super(t),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(me(()=>this.view,this._updateRotationWatcher,Je))}destroy(){this.view=null}get canShowNorth(){return hLe(this.view)}get state(){var t;return!((t=this.view)!=null&&t.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var t,i;(t=this.view)!=null&&t.ready&&(((i=this.view)==null?void 0:i.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:cLe()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(t){t!=null&&this._set("orientation",{z:t})}_updateForCamera(t){if(!t)return;const i=-t.heading;this._set("orientation",{x:0,y:0,z:i})}_updateRotationWatcher(t){this.removeAllHandles(),t&&this.addHandles(t.type==="2d"?me(()=>t==null?void 0:t.rotation,this._updateForRotation,Je):me(()=>t==null?void 0:t.camera,this._updateForCamera,Je))}};m([w({readOnly:!0})],M0.prototype,"canShowNorth",null),m([w({readOnly:!0})],M0.prototype,"orientation",void 0),m([w({readOnly:!0})],M0.prototype,"state",null),m([w()],M0.prototype,"view",void 0),M0=m([H("esri.widgets.Compass.CompassViewModel")],M0);const iue=M0,Qq="esri-compass",eH={base:Qq,iconContainer:`${Qq}__icon-container`};let uh=class extends bi{constructor(t,i){super(t,i),this.messages=null,this.viewModel=new iue,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return cs({button:()=>ce(()=>import("./calcite-button-DicafOzy.js"),__vite__mapDeps([204,205]),import.meta.url),icon:()=>ce(()=>import("./calcite-icon-_vDov-sg.js"),[],import.meta.url)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:i}=this.viewModel,{messages:r}=this;return G("div",{class:this.classes(eH.base,Ge.widget)},G("calcite-button",{class:Ge.widgetButton,disabled:i==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},G("div",{"aria-hidden":"true",class:eH.iconContainer,title:r.reset},G("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(t)}))))}};m([w()],uh.prototype,"goToOverride",null),m([w()],uh.prototype,"icon",null),m([w()],uh.prototype,"label",null),m([w(),Xt("esri/widgets/Compass/t9n/Compass")],uh.prototype,"messages",void 0),m([w()],uh.prototype,"view",null),m([w({type:iue})],uh.prototype,"viewModel",void 0),uh=m([H("esri.widgets.Compass")],uh);const dLe=uh,tH="esri-navigation-toggle",iH={base:tH,isLayoutHorizontal:`${tH}--horizontal`};let $1=class extends De{constructor(t){super(t),this._navigationMode="pan",this.view=null}initialize(){this.addHandles(rn(()=>{var t;return(t=this.view)==null?void 0:t.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var t,i;return(t=this.view)!=null&&t.ready&&((i=this.view)==null?void 0:i.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(t){this._navigationMode=t,this._setNavigationMode()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_setNavigationMode(){var i;const t=(i=this.view)==null?void 0:i.inputManager;t&&(t.primaryDragAction=this._navigationMode==="pan"?"pan":"rotate")}};m([w({readOnly:!0})],$1.prototype,"state",null),m([w()],$1.prototype,"_navigationMode",void 0),m([w()],$1.prototype,"view",void 0),$1=m([H("esri.widgets.NavigationToggle.NavigationToggleViewModel")],$1);const rue=$1;let ch=class extends bi{constructor(t,i){super(t,i),this.messages=null,this.viewModel=new rue,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var n;const r=((n=this.viewModel)==null?void 0:n.navigationMode)==="pan"?this._rotateButton:this._panButton;cv(r),this.toggle()}}loadDependencies(){return cs({button:()=>ce(()=>import("./calcite-button-DicafOzy.js"),__vite__mapDeps([204,205]),import.meta.url)})}get icon(){return"move"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){var n,o;const t=((n=this.viewModel)==null?void 0:n.state)==="disabled",i=((o=this.viewModel)==null?void 0:o.navigationMode)==="pan",r=this.messages.toggle;return G("div",{class:this.classes(iH.base,Ge.widget,{[iH.isLayoutHorizontal]:this.layout==="horizontal"})},G("calcite-button",{afterCreate:u=>{this._panButton=u},appearance:i?"outline-fill":"solid",class:Ge.widgetButton,disabled:t,iconStart:"move",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?void 0:-1,title:r}),G("calcite-button",{afterCreate:u=>{this._rotateButton=u},appearance:i?"solid":"outline-fill",class:Ge.widgetButton,disabled:t,iconStart:"rotate",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?-1:void 0,title:r}))}};m([w()],ch.prototype,"icon",null),m([w()],ch.prototype,"label",null),m([w({value:"vertical"})],ch.prototype,"layout",null),m([w(),Xt("esri/widgets/NavigationToggle/t9n/NavigationToggle")],ch.prototype,"messages",void 0),m([w()],ch.prototype,"view",null),m([w({type:rue})],ch.prototype,"viewModel",void 0),ch=m([H("esri.widgets.NavigationToggle")],ch);const pLe=ch;let C0=class extends De{get canZoomIn(){var r,n,o;if(!((r=this.view)==null?void 0:r.ready))return!1;const i=(o=(n=this.view)==null?void 0:n.constraints)==null?void 0:o.effectiveMaxScale;return i===0||this._scale>i}get canZoomOut(){var n;const{view:t}=this;if(!(t==null?void 0:t.ready))return!1;const r=(n=t.constraints)==null?void 0:n.effectiveMinScale;return r===0||this._scale<r}get _scale(){var i,r,n;const t=(r=(i=this.view)==null?void 0:i.animation)==null?void 0:r.target;return(t&&"then"in t||t==null?void 0:t.scale)??((n=this.view)==null?void 0:n.scale)??0}};m([w({readOnly:!0})],C0.prototype,"canZoomIn",null),m([w({readOnly:!0})],C0.prototype,"canZoomOut",null),m([w()],C0.prototype,"view",void 0),m([w()],C0.prototype,"_scale",null),C0=m([H("esri.widgets.Zoom.ZoomConditions2D")],C0);const fLe=C0;let M1=class extends De{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};m([w({readOnly:!0})],M1.prototype,"canZoomIn",null),m([w({readOnly:!0})],M1.prototype,"canZoomOut",null),m([w()],M1.prototype,"view",void 0),M1=m([H("esri.widgets.Zoom.ZoomConditions3D")],M1);const yLe=M1;let Yd=class extends De{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var t;return this._zoomConditions!=null&&((t=this._zoomConditions)==null?void 0:t.canZoomOut)}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}set view(t){t?t.type==="2d"?this._zoomConditions=new fLe({view:t}):t.type==="3d"&&(this._zoomConditions=new yLe({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){if(!this.canZoomIn)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomIn():Do(t.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomOut():Do(t.goTo({zoomFactor:.5}))}};m([w()],Yd.prototype,"_zoomConditions",void 0),m([w()],Yd.prototype,"canZoomIn",null),m([w()],Yd.prototype,"canZoomOut",null),m([w({readOnly:!0})],Yd.prototype,"state",null),m([w()],Yd.prototype,"view",null),Yd=m([H("esri.widgets.Zoom.ZoomViewModel")],Yd);const nue=Yd,rH={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let hh=class extends bi{constructor(t,i){super(t,i),this.messages=null,this.viewModel=new nue,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return cs({button:()=>ce(()=>import("./calcite-button-DicafOzy.js"),__vite__mapDeps([204,205]),import.meta.url)})}get icon(){return"magnifying-glass-plus"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){const t={[rH.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=this.viewModel,{zoomIn:n,zoomOut:o}=this.messages;return G("div",{class:this.classes(rH.base,Ge.widget,t)},G("calcite-button",{class:Ge.widgetButton,disabled:!i,iconStart:"plus",kind:"neutral",label:n,onclick:this.zoomIn,title:n}),G("calcite-button",{class:Ge.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:o,onclick:this.zoomOut,title:o}))}};m([w()],hh.prototype,"icon",null),m([w()],hh.prototype,"label",null),m([w({value:"vertical"})],hh.prototype,"layout",null),m([w(),Xt("esri/widgets/Zoom/t9n/Zoom")],hh.prototype,"messages",void 0),m([w()],hh.prototype,"view",null),m([w({type:nue})],hh.prototype,"viewModel",void 0),hh=m([H("esri.widgets.Zoom")],hh);const mLe=hh;function gLe(e){return(e==null?void 0:e.view)!==void 0}let a4=class extends Nke{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(r=>{const n=this._find(r),o=n==null?void 0:n.widget;gLe(o)&&(o.view=i)})},this._componentsWatcher=(i,r)=>{this._removeComponents(r),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([me(()=>this.components,this._componentsWatcher,Je),me(()=>this.view,this._updateViewAwareWidgets,Je)])}_add(t,i,r,n,o){let u=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;u=this._createComponent(t)}super._add(u,i,r,n,o)}_removeComponents(t){t.forEach(i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())})}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(t){this.constructed&&t.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(t){const i=this._createWidget(t);return new o4({id:t,node:i})}_createWidget(t){const i=this.view;switch(t){case"attribution":return new uLe({view:i});case"compass":return new dLe({view:i});case"navigation-toggle":return new pLe({view:i});case"zoom":return new mLe({view:i})}}};m([w()],a4.prototype,"components",void 0),a4=m([H("esri.views.ui.DefaultUI")],a4);const sue=a4;let l4=class extends sue{constructor(t){super(t),this.components=["attribution","zoom"]}};m([w()],l4.prototype,"components",void 0),l4=m([H("esri.views.ui.2d.DefaultUI2D")],l4);const oue=l4;let aue=class SL{constructor(t,i,r=""){this.major=t,this.minor=i,this._context=r}lessThan(t,i){return this.major<t||t===this.major&&this.minor<i}greaterEqual(t,i){return!this.lessThan(t,i)}validate(t){if(this.major!==t.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new ne(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new SL(this.major,this.minor,this._context)}static parse(t,i=""){const[r,n]=t.split("."),o=/^\s*\d+\s*$/;if(!(r!=null&&r.match)||!o.test(r))throw new ne((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!(n!=null&&n.match)||!o.test(n))throw new ne((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const u=parseInt(r,10),f=parseInt(n,10);return new SL(u,f,i)}},fv=class extends aue{constructor(t,i){super(t,i,"webmap")}};function u4(e){return e!=null&&typeof e=="object"&&"declaredClass"in e&&e.declaredClass==="esri.WebMap"}const lue=new fv(2,32);var xL;let c4=xL=class extends be{constructor(e){super(e),this.color=new Ne([0,0,0,1])}clone(){return new xL(he({color:this.color}))}};m([w({type:Ne,json:{write:!0}})],c4.prototype,"color",void 0),c4=xL=m([H("esri.webmap.background.ColorBackground")],c4);const PT=c4;let uue,cue,hue,due,pue,fue,yue;async function vLe(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:r,MagnifierView2D:n,GridView2D:o,Stage:u}]=await Promise.all([ce(()=>import("./webglDeps-DNQF78mD.js"),__vite__mapDeps([136,58,57,115,137,116]),import.meta.url),ce(()=>import("./mapViewDeps-DHLK-bI0.js"),__vite__mapDeps([138,62,139,60,61,63,64,59,65,66,29,57,58,56,35,116,71,140,137,78,141,103,102,70,10,142,93,68,69,101,136,115,143,74,144,55,16,14,6,13,145,109,110,95,119,146,147,148,72,67,149,150,151,152,153,154,112,155]),import.meta.url)]);cue=e,hue=t,due=i,pue=r,fue=n,yue=o,uue=u}let ct=class extends h9e(N4e(x4e(Q$e))){constructor(t){super(t),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new y_({getCollections:()=>{var i,r;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.goToManager=new r4({view:this}),this.graphicsView=null,this.stateManager=new Es({constraints:new ale({view:this})}),this.stationaryManager=new Ab,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.frameTask=new HCe(this),this.floors=new Oe,this.grid=null,this.highlights=Lle(),this.inputManager=new d8e({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new Gle,this.type="2d",this.view2dType=null,this.ui=new oue,this.test={takeScreenshot:async i=>vke(this._getScreenshotView(i),i)},this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([me(()=>this.viewpoint,()=>this.stationaryManager.flip(),hl),this.on("resize",i=>this.stateManager.resize(i.width,i.height))]),wxe()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=Jt(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new b8e(this.featuresTilingScheme)}get constraintsInfo(){var r,n;const t=(r=this.defaultsFromMap)==null?void 0:r.tileInfo,i=this.spatialReference;return{lods:(n=t==null?void 0:t.spatialReference)!=null&&n.equals(i)?t.lods:null,spatialReference:i}}get state(){return this.stateManager.state}get initialExtentRequired(){var f;if(!this.stateManager)return!1;const{scale:t,constraints:i,center:r,viewpoint:n,extent:o}=this;let u=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((f=this.map.initialViewProperties)!=null&&f.viewpoint))&&!o&&(i!=null&&i.effectiveLODs||(u=-1),(!r||t===0&&u===-1)&&((n==null?void 0:n.targetGeometry)==null||n.targetGeometry.type!=="extent"&&!n.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const t=this._getDefaultViewpoint();if(!t)return!1;const i=t.targetGeometry,r=this.spatialReference;return Sne(i.spatialReference,r)}set animation(t){const i=this._get("animation");if(t===i)return;if(i&&i.stop(),t!==this.animationManager.animation&&this.animationManager.stop(),!t||t.isFulfilled())return void this._set("animation",null);this._set("animation",t);const r=()=>{var n;this.destroyed||t===this._get("animation")&&(this._set("animation",null),(n=this.frameTask)==null||n.requestFrame())};t.when(r,r)}get background(){return u4(this.map)?this.map.initialViewProperties.background:null}set background(t){this._override("background",t)}get center(){var t;return((t=this.stateManager)==null?void 0:t.center)??null}set center(t){this.stateManager.center=t}get constraints(){var t;return(t=this.stateManager)==null?void 0:t.constraints}set constraints(t){t.view=this;const i=this.stateManager.constraints;this.stateManager.constraints=t,i==null||i.destroy()}get extent(){var t;return((t=this.stateManager)==null?void 0:t.extent)??null}set extent(t){this.stateManager.extent=t}get highlightOptions(){return ike(this)}set highlightOptions(t){rke(this,t)}get padding(){var t;return(t=this.stateManager)==null?void 0:t.padding}set padding(t){this.stateManager&&(this.stateManager.padding=t)}get rendering(){var t;return((t=this.stage)==null?void 0:t.renderRequested)??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(t){this.stateManager.resizeAlign=t}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(t){const{rotationEnabled:i}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=t,this.constraints.rotationEnabled=i}get scale(){var t;return((t=this.stateManager)==null?void 0:t.scale)??0}set scale(t){this.stateManager&&(this.stateManager.scale=t)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get tileInfo(){var t;return(t=this.featuresTilingScheme)==null?void 0:t.tileInfo}get updating(){var r,n,o,u;const t=!(!this.magnifier.visible||this.magnifier.position===null||!((r=this._magnifierView)!=null&&r.updatingHandles.updating)),i=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(f=>!f.destroyed&&!("layerViews"in f)&&f.updating===!0)||t);if(we("esri-2d-log-updating")){const f=this.allLayerViews.reduce((g,b)=>({...g,[`${b.layer.id}(${b.layer.type})`]:!b.destroyed&&!("layerViews"in b)&&b.updating}),{});console.log(`Updating MapView: ${i}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(n=this.layerViewManager)==null?void 0:n.updating}
-> labelManager.updating: ${(o=this.labelManager)==null?void 0:o.updating}
-> graphicsView.updating: ${(u=this.graphicsView)==null?void 0:u.updating}
-> allLayerViews: ${JSON.stringify(f)}
-> updatingMagnifier: ${t}
`)}return i}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(t){this.stateManager.viewpoint=t,this.frameTask.requestFrame()}get visibleArea(){const t=this.stateManager.visibleArea;return t&&new zs({rings:[t.map(i=>[i[0],i[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(t){this.stateManager.zoom=t}get navigating(){var t;return((t=this.mapViewNavigation)==null?void 0:t.interacting)??!1}goTo(t,i){return this.goToManager.goTo(t,i)}async hitTest(t,i){return nke(this,t,i)}async takeScreenshot(t){return gke(this._getScreenshotView(t),t)}toMap(t){if(!this.ready)return null;const i=iae(t)?tae(this,t):t;return this.stateManager.toMap(i)}toScreen(t,i){return this.stateManager.toScreen(t,i)}on(t,i,r,n){return this.inputManager&&this.viewEvents.on(t,i,r,n)||super.on(t,i)}hasEventListener(t){return super.hasEventListener(t)||this.viewEvents.hasHandler(t)}whenLayerView(t){return super.whenLayerView(t)}graphicChanged(t){this.graphicsView&&this.graphicsView.graphicUpdateHandler(t)}whenReady(){return new Promise(t=>{this.ready?t(this):this._resolveWhenReady.push(t)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var t;return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||((t=this.defaultsFromMap)==null?void 0:t.spatialReference)||null}getDefaultTimeZone(){return u4(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return u4(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(t){return QB.hasLayerViewModule(t)}importLayerView(t){return QB.importLayerView(t)}pixelSizeAt(){return this.ready?this.resolution:(Se.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(t){var b;const i=this.toMap(t),r=await this.hitTest(t),n=this.allLayerViews.toArray().filter(E=>E.clips.every(I=>Ale(this,I,t,i))).reverse(),o=new globalThis.Map(n.map(E=>[E.layer.uid,E])),u=[];let f=0,g=0;for(;f<r.results.length||g<n.length;){const E=r.results.at(f);if(E&&E.type!=="graphic"){++f;continue}const I=o.get((b=(E==null?void 0:E.layer)??(E==null?void 0:E.graphic.layer))==null?void 0:b.uid);if((!E||I)&&g<n.length&&n.at(g)!==I){const M=n.at(g);"fetchPopupFeaturesAtLocation"in M&&u.push({mapPoint:i,layerView:M}),++g}else E&&(u.push({graphic:E.graphic,layerView:I}),++f)}return{hits:u,location:i}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let t=$ke(this.type);if(we("safari")&&we("safari")<9&&(t=new ne("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:we("safari")})),t!=null)throw Se.getLogger(this).warn("#validate()",t.message),t}loadAsyncDependencies(){return vLe()}_getDefaultViewpoint(){var D;const{constraints:t,initialExtent:i,map:r,padding:n,size:o}=this;if(!t)return null;const u=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,f=this.stateManager.getUserStartupOptions(this.size),g=u==null?void 0:u.viewpoint,b=((D=g==null?void 0:g.targetGeometry)==null?void 0:D.extent)??i,E=b==null?void 0:b.center,I=(g==null?void 0:g.rotation)??0,M=(g==null?void 0:g.scale)||b&&AT(b,[o[0]-n.left-n.right,o[1]-n.top-n.bottom]),k=f.center??E,L=f.rotation??I,P=f.scale??M;return k&&P?new Fn({targetGeometry:k,scale:P,rotation:L}):null}_startup(){var f;this.timeline.begin("MapView Startup");const t=this._getDefaultViewpoint();this.stateManager.startup(t,this.size,this.spatialReference,(f=this.defaultsFromMap.extent)==null?void 0:f.center),this.graphics.owner=this;const i=new uue(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=i,this._magnifierView=new fue,this._magnifierView.magnifier=this.magnifier,this._gridView=new yue;const r=new due({view:this});this._set("labelManager",r);const n=new FCe({view:this});this._set("animationManager",n);const o=new pue({view:this,animationManager:n});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("webgl-error",g=>this.fatalError=g.error),me(()=>this.stationary,g=>i.stationary=g,Ln),me(()=>this.background,g=>{i.backgroundColor=g==null?void 0:g.color,this._magnifierView.backgroundColor=g==null?void 0:g.color},Ln),me(()=>this.magnifier,g=>this._magnifierView.magnifier=g,Ln),me(()=>this.grid,g=>this._gridView.grid=g,Ln),me(()=>this.renderingOptions,g=>i.renderingOptions=g,Ln),me(()=>this.highlights.items.map(g=>({name:g.name,options:{fillColor:g.options.color,haloColor:g.options.haloColor,fillOpacity:g.options.fillOpacity,haloOpacity:g.options.haloOpacity,haloWidth:g.options.haloWidth,haloBlur:g.options.haloBlur}})),()=>{i.highlightGradient=eke(i.highlightGradient,this.highlights.items)},Ln),me(()=>this.state.id,()=>i.state=this.state,Ln)],"map-view"),this._updateStageChildren();const u=this._resolveWhenReady;this._resolveWhenReady=[],u.forEach(g=>g(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this.stage.addChild(i.container)});const t=this.graphicsView;this.stage.addChild(t.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const t=new eAe(u9e.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",t);const i=new cue({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new hue(t)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const t=this.graphicsView;this._set("graphicsView",null),t.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(t){var u;const{allLayerViews:i,padding:r,size:n,stage:o}=this;return{allLayerViews:i,backgroundColor:t!=null&&t.ignoreBackground?null:(u=this.background)==null?void 0:u.color,padding:r,size:n,stage:o}}_spatialReferenceChanged(t){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(t),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};ct.type="2d",m([w({readOnly:!0})],ct.prototype,"animationManager",void 0),m([w({constructOnly:!0})],ct.prototype,"deactivatedWebGLExtensions",void 0),m([w({constructOnly:!0})],ct.prototype,"debugWebGLExtensions",void 0),m([w({readOnly:!0})],ct.prototype,"featuresTilingScheme",void 0),m([w({readOnly:!0})],ct.prototype,"fullOpacity",void 0),m([w()],ct.prototype,"goToManager",void 0),m([w({readOnly:!0})],ct.prototype,"graphicsTileStore",null),m([w()],ct.prototype,"graphicsView",void 0),m([w()],ct.prototype,"stateManager",void 0),m([w()],ct.prototype,"constraintsInfo",null),m([w({readOnly:!0})],ct.prototype,"state",null),m([w()],ct.prototype,"initialExtentRequired",null),m([w()],ct.prototype,"labelManager",void 0),m([w({readOnly:!0})],ct.prototype,"mapViewNavigation",void 0),m([w({constructOnly:!0})],ct.prototype,"renderCanvas",void 0),m([w()],ct.prototype,"renderingOptions",void 0),m([w({constructOnly:!0})],ct.prototype,"supersampleScreenshotsEnabled",void 0),m([w({readOnly:!0})],ct.prototype,"supportsGround",void 0),m([w()],ct.prototype,"defaultsFromMapSettings",null),m([w({readOnly:!0})],ct.prototype,"typeSpecificPreconditionsReady",null),m([w()],ct.prototype,"animation",null),m([w({type:PT})],ct.prototype,"background",null),m([w()],ct.prototype,"center",null),m([w({type:ale})],ct.prototype,"constraints",null),m([w()],ct.prototype,"extent",null),m([w()],ct.prototype,"floors",void 0),m([w()],ct.prototype,"grid",void 0),m([w({type:nm})],ct.prototype,"highlightOptions",null),m([w({type:Oe.ofType(Dg)})],ct.prototype,"highlights",void 0),m([w({readOnly:!0})],ct.prototype,"inputManager",void 0),m([w()],ct.prototype,"map",void 0),m([w()],ct.prototype,"padding",null),m([w({readOnly:!0})],ct.prototype,"rendering",null),m([w()],ct.prototype,"resizeAlign",null),m([w({readOnly:!0})],ct.prototype,"resolution",null),m([w()],ct.prototype,"rotation",null),m([w()],ct.prototype,"scale",null),m([w({constructOnly:!0})],ct.prototype,"spatialReferenceLocked",void 0),m([w()],ct.prototype,"stationary",null),m([w({readOnly:!0})],ct.prototype,"tileInfo",null),m([w({type:Gle,readOnly:!0})],ct.prototype,"timeline",void 0),m([w({readOnly:!0})],ct.prototype,"type",void 0),m([w({readOnly:!0})],ct.prototype,"updating",null),m([w({readOnly:!0})],ct.prototype,"view2dType",void 0),m([w()],ct.prototype,"viewpoint",null),m([w({readOnly:!0})],ct.prototype,"visibleArea",null),m([w()],ct.prototype,"zoom",null),m([w({readOnly:!0})],ct.prototype,"navigating",null),m([w(),St(e=>e instanceof sue?e:h2(oue,e))],ct.prototype,"ui",void 0),ct=m([H("esri.views.View2D")],ct);const wLe=ct;let h4=class extends wLe{constructor(t){super(t),this.view2dType="map"}};m([w({readOnly:!0})],h4.prototype,"view2dType",void 0),h4=m([H("esri.views.MapView")],h4);const bLe=h4;function eD(e,t,i,r){let n=null,o=1e3;typeof t=="number"?(o=t,r=i):(n=t??null,o=i);let u,f=0;const g=()=>{f=0,e.apply(r,u)},b=(...E)=>{n&&n.apply(r,E),u=E,o?f||(f=setTimeout(g,o)):g()};return b.remove=()=>{f&&(clearTimeout(f),f=0)},b.forceUpdate=()=>{f&&(clearTimeout(f),g())},b.hasPendingUpdates=()=>!!f,b}const mue=96;function Olt(e,t){const i=e.extent,r=e.width,n=xu(i==null?void 0:i.spatialReference);return i&&r?i.width/r*n*Xte*mue:0}function _Le(e,t){return e/(xu(t)*Xte*mue)}function SLe(e,t){const i=e.extent,r=e.width-(e.padding?e.padding.left+e.padding.right:0),n=_Le(t,i.spatialReference);return i.clone().expand(n*r/i.width)}function xLe(e,t,i){return ELe(e,t)&&ILe(e,i)}function ELe(e,t){return t===0||ev(e,t)||e<t}function ILe(e,t){return t===0||ev(e,t)||e>t}function C_(e){var t;switch(e==null?void 0:e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":case"polyline":return(t=e.extent)==null?void 0:t.center;default:return null}}async function TLe(e,t){var n,o;if(e.hasZ||t.type==="2d")return e;const i=(n=t.map)==null?void 0:n.ground;if(!(i!=null&&i.layers.length))return e;const{geometry:r}=await i.queryElevation(e,{cache:(o=t.basemapTerrain)==null?void 0:o.elevationQueryCache});return r}function EL(e,t,i){return gue(e.center,t,i)}function tD(e,t,i){switch(e==null?void 0:e.type){case"extent":return e;case"multipoint":case"polygon":case"polyline":return e.extent;case"point":return gue(e,t,i);default:return null}}function gue(e,t,i){const r=e.hasZ?e.z:void 0;if(t!=null&&t.map)return(i!=null?SLe(t,i):t.extent).clone().centerAt(e).set({zmax:r,zmin:r});const{x:n,y:o,spatialReference:u}=e;return new Ht({xmin:n-.25,ymin:o-.25,xmax:n+.25,ymax:o+.25,spatialReference:u,zmin:r,zmax:r})}function nH(e){return e.icon?e.icon:"image"in e&&e.image||e.className?void 0:"question"}function vue(e){return e?{backgroundImage:`url(${e})`}:{}}function $Le({action:e,feature:t}){const i=t==null?void 0:t.attributes,r="image"in e?e.image:void 0;return r&&i?Rn(r,i):r??""}var PI;(function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"})(PI||(PI={}));function MLe(e,t){return{type:Zy(t),value:e,unit:t}}function Rlt(e){return{value:e}}function CLe(e,t){return{type:Zy(t),value:e,unit:t}}function ALe(e,t){return{type:Zy(t),value:e,unit:t}}function ud(e,t,i="arithmetic"){return{type:Zy(t),value:e,unit:t,rotationType:i}}function Plt(e,t){const i=kLe(e,t);return e.type==="angle"?ud(i,t,e.rotationType):MLe(i,t)}function kLe(e,t){return Ut(e.value,e.unit,t)}function Nlt(e,t){return e==null?t:t==null||e.value>Ut(t.value,t.unit,e.unit)?e:t}function Flt(e,t){return e==null?null:{...e,value:e.value*t}}function NT(e,t,i){if(t===i)return e;switch(i){case"arithmetic":case"geographic":return 90-e}}const Dlt=CLe(0,"meters"),jlt=ALe(0,"square-meters");ud(0,"radians");const zlt=ud(0,"degrees"),Vlt=ud(0,"degrees","geographic");function wue(e,t,i){return e.units[t][i]}function F2(e,t,i,r=2,n="abbr"){return`${as(t,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:t>0?"never":"exceptZero"})} ${wue(e,i,n)}`}function FT(e,t,i,r=2,n="abbr"){return`${as(t,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:"exceptZero"})} ${wue(e,i,n)}`}function Ult(e,t,i,r=2,n="abbr"){const o=iie(t,i);return F2(e,Ut(t,i,o),o,r,n)}function Glt(e,t,i,r=2,n="abbr"){const o=iie(t,i);return FT(e,Ut(t,i,o),o,r,n)}function Blt(e,t,i,r=2,n="abbr"){const o=rie(t,i);return F2(e,Ut(t,i,o),o,r,n)}function qlt(e,t,i,r=2,n="abbr"){const o=rie(t,i);return FT(e,Ut(t,i,o),o,r,n)}function Hlt(e,t,i,r=2,n="abbr"){const o=nie(t,i);return F2(e,Ut(t,i,o),o,r,n)}function Wlt(e,t,i,r=2,n="abbr"){const o=nie(t,i);return FT(e,Ut(t,i,o),o,r,n)}function Zlt(e,t,i,r=2,n="abbr"){const o=sie(t,i);return F2(e,Ut(t,i,o),o,r,n)}function Jlt(e,t,i,r=2,n="abbr"){const o=sie(t,i);return FT(e,Ut(t,i,o),o,r,n)}function Klt(e,t,i,r=2,n="abbr"){const o=Bbe(t,i);return F2(e,Ut(t,i,o),o,r,n)}function Ylt(e,t,i,r=2,n="abbr"){const o=qbe(t,i);return F2(e,Ut(t,i,o),o,r,n)}const LLe=(e,t)=>({style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:t,minimumFractionDigits:t,signDisplay:e>0?"never":"exceptZero"});function Xlt(e,t,i,r,n,o=zN,u=!0){let f=o.normalize(NT(Ut(e,t,"degrees"),i,r),0,u);const g=LLe(f,n??2);return f=OLe(f,g),as(f,g)}const sH=new Map;function OLe(e,t){const i=JSON.stringify(t);let r=sH.get(i);return r||(r=new Intl.NumberFormat("en-US",t),sH.set(i,r)),/^[-+]?360\.?0*°?$/.test(r.format(e))?0:e}const oH=["B","kB","MB","GB","TB"];function RLe(e,t){let i=(t=Math.round(t))===0?0:Math.floor(Math.log(t)/Math.log(PI.KILOBYTES));i=oo(i,0,oH.length-1);const r=as(t/PI.KILOBYTES**i,{maximumFractionDigits:2});return wu(e.units.bytes[oH[i]],{fileSize:r})}function PLe(e){const{exifInfo:t,exifName:i,tagName:r}=e;if(!t||!i||!r)return null;const n=t.find(o=>o.name===i);return n?NLe({tagName:r,tags:n.tags}):null}function NLe(e){const{tagName:t,tags:i}=e;if(!i||!t)return null;const r=i.find(n=>n.name===t);return(r==null?void 0:r.value)||null}var IL;const FLe={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let mo=IL=class extends be{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=PLe({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return FLe[t]||null}clone(){return new IL({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};m([w({type:String})],mo.prototype,"contentType",void 0),m([w()],mo.prototype,"exifInfo",void 0),m([w({readOnly:!0})],mo.prototype,"orientationInfo",null),m([w({type:Ot})],mo.prototype,"id",void 0),m([w({type:String})],mo.prototype,"globalId",void 0),m([w({type:String})],mo.prototype,"keywords",void 0),m([w({type:String})],mo.prototype,"name",void 0),m([w({json:{read:!1}})],mo.prototype,"parentGlobalId",void 0),m([w({json:{read:!1}})],mo.prototype,"parentObjectId",void 0),m([w({type:Ot})],mo.prototype,"size",void 0),m([w({json:{read:!1}})],mo.prototype,"url",void 0),mo=IL=m([H("esri.rest.query.support.AttachmentInfo")],mo);const DLe=mo;var TL;let En=TL=class extends be{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new TL(he({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};m([w({type:[String],json:{write:!0}})],En.prototype,"attachmentTypes",void 0),m([w({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],En.prototype,"attachmentsWhere",void 0),m([w({type:Boolean,json:{write:!0}})],En.prototype,"cacheHint",void 0),m([w({type:[String],json:{write:!0}})],En.prototype,"keywords",void 0),m([w({type:[String],json:{write:!0}})],En.prototype,"globalIds",void 0),m([w({json:{write:!0}})],En.prototype,"name",void 0),m([w({type:Number,json:{read:{source:"resultRecordCount"}}})],En.prototype,"num",void 0),m([w({type:[Number],json:{write:!0}})],En.prototype,"objectIds",void 0),m([w({type:Boolean,json:{default:!1,write:!0}})],En.prototype,"returnMetadata",void 0),m([w({type:[Number],json:{write:!0}})],En.prototype,"size",void 0),m([w({type:Number,json:{read:{source:"resultOffset"}}})],En.prototype,"start",void 0),m([Pe("start"),Pe("num")],En.prototype,"writeStart",null),m([w({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],En.prototype,"where",void 0),En=TL=m([H("esri.rest.support.AttachmentQuery")],En),En.from=ir(En);const $L=En;function bue(e){return eoe(e)||V6e(e)||U6e(e)}function iD(e,t){const{format:i,timeZoneOptions:r,fieldType:n}=t??{};let o,u;if(r&&({timeZone:o,timeZoneName:u}=Qre(r.layerTimeZone,r.datesInUnknownTimezone,r.viewTimeZone,X0(i||"short-date-short-time"),n)),typeof e=="string"&&isNaN(Date.parse(n==="time-only"?`1970-01-01T${e}Z`:e)))return e;switch(n){case"date-only":{const f=X0(i||"short-date");return typeof e=="string"?W5e(e,{...f}):Oo(e,{...f,timeZone:kc})}case"time-only":{const f=X0(i||"short-time");return typeof e=="string"?Z5e(e,f):Oo(e,{...f,timeZone:kc})}case"timestamp-offset":{if(!o&&typeof e=="string"&&new Date(e).toISOString()!==e)return e;const f=i||r?X0(i||"short-date-short-time"):void 0,g=f?{...f,timeZone:o,timeZoneName:u}:void 0;return typeof e=="string"?J5e(e,g):Oo(e,g)}default:{const f=i||r?X0(i||"short-date-short-time"):void 0;return Oo(typeof e=="string"?new Date(e):e,f?{...f,timeZone:o,timeZoneName:u}:void 0)}}}const jLe="esri.widgets.Feature.support.featureUtils",ML=()=>Se.getLogger(jLe),zLe=/href=(""|'')/gi,VLe=/(\{([^{\r\n]+)\})/g,ULe=/'/g,_ue=/^\s*expression\//i,GLe=/(\n)/gi,BLe=/[\u00A0-\u9999<>&]/gim,qLe=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,HLe=/^(?:mailto:|tel:)/,Sue="relationships/",aH=X0("short-date-short-time");function xue(e){if(e!=null)return(e.sourceLayer||e.layer)??void 0}async function NI({type:e,value:t,event:i}){try{return typeof t=="function"?t(i):await t}catch(r){return void ML().error("error",`An error occurred when calling the "${e}" function`,{error:r,graphic:i.graphic,value:t})}}function Eue(e=""){if(e)return!HLe.test(e.trim().toLowerCase())}function rD(e){return!!e&&_ue.test(e)}function WLe(e,t){if(!t||!rD(t)||!e)return;const i=t.replace(_ue,"").toLowerCase();return e.find(({name:r})=>r.toLowerCase()===i)}function Iue(e,t){const i=WLe(t,e==null?void 0:e.fieldName);return i?i.title||null:e?e.label||e.fieldName:null}function ZLe(e,t){const i=t.get(e.toLowerCase());return`{${(i==null?void 0:i.fieldName)||e}}`}function JLe(e){return e.replaceAll(zLe,"")}function A_(e,t){const i=nD(t,e);return i?i.name:e}function KLe(e,t){return e&&e.map(i=>A_(i,t))}function nD(e,t){return e&&typeof e.getField=="function"&&t?e.getField(t)??null:null}function Tue(e){return`${e}`.trim()}function gy({attributes:e,globalAttributes:t,layer:i,text:r,expressionAttributes:n,fieldInfoMap:o}){return r?CL({formattedAttributes:t,template:eOe(r,{...t,...n,...e},i),fieldInfoMap:o}):""}function CL({formattedAttributes:e,template:t,fieldInfoMap:i}){return Tue(JLe(wu(wu(t,r=>ZLe(r,i)),e)))}function YLe(e,t,i=!1){const r=t[e];if(typeof r=="string"){const n="%27",o=(i?encodeURIComponent(r):r).replaceAll(ULe,n);t[e]=o}}function XLe(e,t=!1){const i={...e};return Object.keys(i).forEach(r=>YLe(r,i,t)),i}function QLe(e,t,i){const r=(t=Tue(t))&&t[0]!=="{";return wu(e,XLe(i,r||!1))}function AL(e,t){return e.replaceAll(VLe,(i,r,n)=>{const o=nD(t,n);return o?`{${o.name}}`:r})}function eOe(e,t,i){const r=AL(e,i);return r&&r.replaceAll(qLe,(n,o,u)=>QLe(n,o||u,t))}function tOe(e,t){if(typeof e=="string"&&t&&t.dateFormat==null&&(t.places!=null||t.digitSeparator!=null)){const i=Number(e);if(!isNaN(i))return i}return e}function $ue(e){return e!=null&&typeof e=="object"&&"fieldsIndex"in e&&"geometryType"in e&&"getField"in e&&"load"in e&&"loaded"in e&&"objectIdField"in e&&"spatialReference"in e&&"type"in e&&(e.type==="feature"||e.type==="scene"||e.type==="subtype-sublayer"||e.type==="sublayer")&&"when"in e}function iOe(e){return e!=null&&typeof e=="object"&&"createQuery"in e&&"queryFeatureCount"in e&&"queryObjectIds"in e&&"queryRelatedFeatures"in e&&"queryRelatedFeaturesCount"in e&&"relationships"in e}function rOe(e){return!!(e&&typeof e=="object"&&"createQuery"in e&&"queryFeatureCount"in e&&"type"in e)&&(e.type==="subtype-sublayer"&&"parent"in e&&e.parent&&typeof e.parent=="object"?"globalIdField"in e.parent:"globalIdField"in e)}function Mue(e){return $ue(e)&&iOe(e)}function nOe(e){return $ue(e)&&rOe(e)}function sOe(e,t){var E;const{fieldInfos:i,fieldName:r,preventPlacesFormatting:n,layer:o,timeZone:u}=t,f=Cue(i,r),g=nD(o,r);if(f&&!P8(r)){const I=g==null?void 0:g.type,M=(E=f.format)==null?void 0:E.dateFormat;if(I==="date"||I==="date-only"||I==="time-only"||I==="timestamp-offset"||M)return iD(e,{format:M,fieldType:I,timeZoneOptions:{layerTimeZone:o&&"preferredTimeZone"in o?o.preferredTimeZone:null,viewTimeZone:u,datesInUnknownTimezone:!(!o||!("datesInUnknownTimezone"in o))&&!!o.datesInUnknownTimezone}})}const b=f==null?void 0:f.format;return typeof e=="string"&&P8(r)&&b?oOe(e,b):typeof(e=tOe(e,b))=="string"||e==null||b==null?AS(e):as(e,n?{...uI(b),minimumFractionDigits:0,maximumFractionDigits:20}:uI(b))}function oOe(e,t){return e=e.trim(),/\d{2}-\d{2}/.test(e)?e:e.includes(",")?r7(e,",",", ",t):e.includes(";")?r7(e,";","; ",t):e.includes(" ")?r7(e," "," ",t):as(Number(e),uI(t))}function r7(e,t,i,r){return e.trim().split(t).map(n=>as(Number(n),uI(r))).join(i)}function Cue(e,t){if(e!=null&&e.length&&t)return e.find(i=>{var r;return((r=i.fieldName)==null?void 0:r.toLowerCase())===t.toLowerCase()})}function aOe({fieldName:e,graphic:t,layer:i}){if(Zh(e)||!i||typeof i.getFeatureType!="function")return null;const{typeIdField:r}=i;if(!r||e!==r)return null;const n=i.getFeatureType(t);return n?n.name:null}function lOe({fieldName:e,value:t,graphic:i,layer:r}){if(Zh(e)||!r||typeof r.getFieldDomain!="function")return null;const n=i&&r.getFieldDomain(e,{feature:i,excludeImpliedDomains:we("esri-widget-legacy-field-domain-calculation")});return n&&n.type==="coded-value"?n.getName(t):null}function uOe(e,t,i,r){const{creatorField:n,creationDateField:o,editorField:u,editDateField:f}=e;if(!t)return;const g=Qre(r&&"preferredTimeZone"in r?r.preferredTimeZone:null,!(!r||!("datesInUnknownTimezone"in r))&&!!r.datesInUnknownTimezone,i,aH,"date"),b={...aH,...g},E=t[f];if(typeof E=="number"){const M=t[u];return{type:"edit",date:Oo(E,b),user:M}}const I=t[o];if(typeof I=="number"){const M=t[n];return{type:"create",date:Oo(I,b),user:M}}return null}function cOe(e,t){const i=new Map;if(!e)return i;for(const r of e){if(!r.fieldName)continue;const n=A_(r.fieldName,t);r.fieldName=n,i.set(n.toLowerCase(),r)}return i}function lH(e){const t=[];if(!e)return t;const{fieldInfos:i,content:r}=e;return i&&t.push(...i),r&&Array.isArray(r)&&r.forEach(n=>{if(n.type==="fields"){const o=n==null?void 0:n.fieldInfos;o&&t.push(...o)}}),t}function sD(e){return e.replaceAll(BLe,t=>`&#${t.charCodeAt(0)};`)}function AS(e){return typeof e=="string"?e.replaceAll(GLe,'<br class="esri-text-new-line" />'):e}function Aue(e){var I;const{value:t,fieldName:i,fieldInfos:r,fieldInfoMap:n,layer:o,graphic:u,timeZone:f}=e;if(t==null)return"";const g=lOe({fieldName:i,value:t,graphic:u,layer:o});if(g)return g;const b=aOe({fieldName:i,graphic:u,layer:o});if(b)return b;if(n.get(i.toLowerCase()))return sOe(t,{fieldInfos:r||Array.from(n.values()),fieldName:i,layer:o,timeZone:f});const E=(I=o==null?void 0:o.fieldsIndex)==null?void 0:I.get(i);return E&&(bue(E)||xF(E))?iD(t,{fieldType:E.type,timeZoneOptions:{layerTimeZone:o&&"preferredTimeZone"in o?o.preferredTimeZone:null,viewTimeZone:f,datesInUnknownTimezone:!(!o||!("datesInUnknownTimezone"in o))&&!!o.datesInUnknownTimezone}}):AS(t)}function n7({fieldInfos:e,attributes:t,layer:i,graphic:r,fieldInfoMap:n,relatedInfos:o,timeZone:u}){const f={};return o==null||o.forEach(g=>fOe({attributes:f,relatedInfo:g,fieldInfoMap:n,fieldInfos:e,layer:i,timeZone:u})),t&&Object.keys(t).forEach(g=>{const b=t[g];f[g]=Aue({fieldName:g,fieldInfos:e,fieldInfoMap:n,layer:i,value:b,graphic:r,timeZone:u})}),f}async function kue(e,t){var E,I;const{layer:i,graphic:r,outFields:n,objectIds:o,returnGeometry:u,spatialReference:f}=e,g=o[0];if(typeof g!="number"&&typeof g!="string"){const M="Could not query required fields for the specified feature. The feature's ID is invalid.",k={layer:i,graphic:r,objectId:g,requiredFields:n};return ML().warn(M,k),null}if(!((I=(E=lse(i))==null?void 0:E.operations)!=null&&I.supportsQuery)){const M="The specified layer cannot be queried. The following fields will not be available.",k={layer:i,graphic:r,requiredFields:n,returnGeometry:u};return ML().warn(M,k),null}const b=i.createQuery();return b.objectIds=o,b.outFields=n!=null&&n.length?n:[i.objectIdField],b.returnGeometry=!!u,b.returnZ=!!u,b.returnM=!!u,b.outSpatialReference=f,(await i.queryFeatures(b,t)).features[0]}async function hOe(e){var r;if(!((r=e.expressionInfos)!=null&&r.length))return!1;const t=await ad(),{arcadeUtils:{hasGeometryFunctions:i}}=t;return i(e)}async function dOe({graphic:e,popupTemplate:t,layer:i,spatialReference:r},n){if(!i||!t||(typeof i.load=="function"&&await i.load(n),!e.attributes))return;const o=i.objectIdField,u=e.attributes[o];if(u==null)return;const f=[u],g=await t.getRequiredFields(i.fieldsIndex),b=K6e(g,e),E=b?[]:g.includes(o)?g:[...g,o],I=t.returnGeometry||await hOe(t);if(b&&!I)return;const M=await kue({layer:i,graphic:e,outFields:E,objectIds:f,returnGeometry:I,spatialReference:r},n);M&&(M.geometry&&(e.geometry=M.geometry),M.attributes&&(e.attributes={...e.attributes,...M.attributes}))}function Zh(e=""){return!!e&&e.includes(Sue)}function pOe(e){return e?`${Sue}${e.layerId}/${e.fieldName}`:""}function uH({attributes:e,graphic:t,relatedInfo:i,fieldInfos:r,fieldInfoMap:n,layer:o,timeZone:u}){e&&t&&i&&Object.keys(t.attributes).forEach(f=>{const g=pOe({layerId:i.relation.id.toString(),fieldName:f}),b=t.attributes[f];e[g]=Aue({fieldName:g,fieldInfos:r,fieldInfoMap:n,layer:o,value:b,graphic:t,timeZone:u})})}function fOe({attributes:e,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:n,timeZone:o}){var u,f;e&&t&&((u=t.relatedFeatures)==null||u.forEach(g=>uH({attributes:e,graphic:g,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:n,timeZone:o})),(f=t.relatedStatsFeatures)==null||f.forEach(g=>uH({attributes:e,graphic:g,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:n,timeZone:o})))}const cH=e=>{if(!e)return!1;const t=e.toUpperCase();return t.includes("CURRENT_TIMESTAMP")||t.includes("CURRENT_DATE")||t.includes("CURRENT_TIME")},Lue=({layer:e,method:t,query:i,definitionExpression:r})=>{var u,f;if(!((f=(u=e.capabilities)==null?void 0:u.query)!=null&&f.supportsCacheHint)||t==="attachments")return;const n=i.where!=null?i.where:null,o=i.geometry!=null?i.geometry:null;cH(r)||cH(n)||(o==null?void 0:o.type)==="extent"||i.resultType==="tile"||(i.cacheHint=!0)},yOe=({query:e,layer:t,method:i})=>{Lue({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression??""}`})},mOe=({queryPayload:e,layer:t,method:i})=>{Lue({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression??""}`})};function gOe(e,t,i){var r,n;return e&&t&&i?t.type==="sublayer"?jg({layers:(r=t.layer)==null?void 0:r.sublayers,map:e,relatedLayer:t,relationship:i})||jg({layers:(n=t.layer)==null?void 0:n.subtables,map:e,relatedLayer:t,relationship:i}):jg({layers:e.allLayers,map:e,relatedLayer:t,relationship:i})||jg({layers:e.allTables,map:e,relatedLayer:t,relationship:i}):null}function hH(e,t){var i;return e&&"utilityNetworks"in e&&t?(i=e.utilityNetworks)==null?void 0:i.find(r=>r.isUtilityLayer(t)):null}function dH(e,t){return e==null?void 0:e.allTables.find(i=>{var r;return i.type==="feature"&&i.layerId===t.id&&i.url===((r=t.layer)==null?void 0:r.url)})}function jg({map:e,relationship:t,relationship:{relatedTableId:i},relatedLayer:r,layers:n}){var o;if(!n)return null;for(const u of n){if(u.type==="map-image"){const g=jg({layers:u.sublayers,map:e,relatedLayer:r,relationship:t})||jg({layers:u.subtables,map:e,relatedLayer:r,relationship:t});if(g)return g;continue}if(!Mue(u))continue;if(r.type==="sublayer"){if(u!==r&&u.id===i)return u.isTable?dH(e,u):u;continue}const f=r.type==="scene"&&r.associatedLayer?r.associatedLayer.url:r.url;if(!f)return null;if(u.type!=="sublayer"){if(u!==r&&u.url===f&&u.layerId===i)return u}else if(u!==r&&((o=u.layer)==null?void 0:o.url)===f&&u.id===i)return u.isTable?dH(e,u):u}return null}function Qlt(e){const t=e.getObjectId();return t!=null?`oid:${t}`:`uid:${e.uid}`}const pH={editing:!1,operations:{add:!0,update:!0,delete:!0}},Oue=Oe.ofType(DLe);let go=class extends De{constructor(t){super(t),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.capabilities={...pH},this.activeAttachmentInfo=null,this.activeFileInfo=null,this.attachmentInfos=new Oue,this.fileInfos=new Oe,this.graphic=null,this.mode="view",this.filesEnabled=!1,this.addHandles(me(()=>this.graphic,()=>this._graphicChanged(),Je))}destroy(){this._attachmentLayer=null,this.graphic=null}castCapabilities(t){return{...pH,...t}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){const{graphic:t}=this;if(!t)return!1;const i=t.layer||t.sourceLayer;return(i==null?void 0:i.loaded)&&"capabilities"in i&&i.capabilities&&"operations"in i.capabilities&&"supportsResizeAttachments"in i.capabilities.operations&&i.capabilities.operations.supportsResizeAttachments||!1}async getAttachments(){const{_attachmentLayer:t,attachmentInfos:i}=this;if(!t||typeof t.queryAttachments!="function")throw new ne("invalid-layer","getAttachments(): A valid layer is required.");const r=this._getObjectId();if(typeof r!="number")throw new ne("invalid-object-id","getAttachments(): Numeric object id is required");const n=new $L({objectIds:[r],returnMetadata:!0}),o=[],u=t.queryAttachments(n).then(g=>g[r]||o).catch(()=>o);this._getAttachmentsPromise=u,this.notifyChange("state");const f=await u;return i.destroyAll(),f.length&&i.addMany(f),this._getAttachmentsPromise=null,this.notifyChange("state"),f}async addAttachment(t,i=this.graphic){var g;const{_attachmentLayer:r,attachmentInfos:n,capabilities:o}=this;if(!i)throw new ne("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:i});if(!t)throw new ne("invalid-attachment","addAttachment(): An attachment is required.",{attachment:t});if(!((g=o.operations)!=null&&g.add))throw new ne("invalid-capabilities","addAttachment(): add capabilities are required.");if(!r||typeof r.addAttachment!="function")throw new ne("invalid-layer","addAttachment(): A valid layer is required.");const u=r.addAttachment(i,t).then(b=>this._queryAttachment(b.objectId,i)),f=await u;return n.add(f),f}async deleteAttachment(t){var g;const{_attachmentLayer:i,attachmentInfos:r,graphic:n,capabilities:o}=this;if(!t)throw new ne("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!((g=o.operations)!=null&&g.delete))throw new ne("invalid-capabilities","deleteAttachment(): delete capabilities are required.");if(!i||typeof i.deleteAttachments!="function")throw new ne("invalid-layer","deleteAttachment(): A valid layer is required.");if(!n)throw new ne("invalid-graphic","deleteAttachment(): A graphic is required.");const u=i.deleteAttachments(n,[t.id]).then(()=>t),f=await u;return r.remove(f),f.destroy(),f}async updateAttachment(t,i=this.activeAttachmentInfo){var E;const{_attachmentLayer:r,attachmentInfos:n,graphic:o,capabilities:u}=this;if(!t)throw new ne("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:t});if(!i)throw new ne("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:i});if(!((E=u.operations)!=null&&E.update))throw new ne("invalid-capabilities","updateAttachment(): Update capabilities are required.");const f=n.indexOf(i);if(!r||typeof r.updateAttachment!="function")throw new ne("invalid-layer","updateAttachment(): A valid layer is required.");if(!o)throw new ne("invalid-graphic","updateAttachment(): A graphic is required.");const g=r.updateAttachment(o,i.id,t).then(I=>this._queryAttachment(I.objectId)),b=await g;return n.splice(f,1,b),b}async commitFiles(){return await Promise.all(this.fileInfos.items.map(t=>this.addAttachment(t.form))),this.fileInfos.removeAll(),this.getAttachments()}addFile(t,i){if(!t||!i)return null;const r={file:t,form:i};return this.fileInfos.add(r),r}updateFile(t,i,r=this.activeFileInfo){if(!t||!i||!r)return null;const n=this.fileInfos.indexOf(r);return n>-1&&this.fileInfos.splice(n,1,{file:t,form:i}),this.fileInfos.items[n]}deleteFile(t){const i=this.fileInfos.find(r=>r.file===t);return i?(this.fileInfos.remove(i),i):null}async _queryAttachment(t,i){const{_attachmentLayer:r}=this;if(!t||!(r!=null&&r.queryAttachments))throw new ne("invalid-attachment-id","Could not query attachment.");const n=this._getObjectId(i);if(typeof n!="number")throw new ne("invalid-object-id","getAttachments(): Numeric object id is required");const o=new $L({objectIds:[n],attachmentsWhere:`AttachmentId=${t}`,returnMetadata:!0});return r.queryAttachments(o).then(u=>u[n][0])}_getObjectId(t=this.graphic){return(t==null?void 0:t.getObjectId())??null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>this.attachmentInfos.destroyAll()))}_setAttachmentLayer(){const{graphic:t}=this,i=xue(t);this._attachmentLayer=i?i.type==="scene"&&i.associatedLayer!=null?i.associatedLayer:i:null}};m([w()],go.prototype,"capabilities",void 0),m([St("capabilities")],go.prototype,"castCapabilities",null),m([w()],go.prototype,"activeAttachmentInfo",void 0),m([w()],go.prototype,"activeFileInfo",void 0),m([w({readOnly:!0,type:Oue})],go.prototype,"attachmentInfos",void 0),m([w()],go.prototype,"fileInfos",void 0),m([w({type:qi})],go.prototype,"graphic",void 0),m([w()],go.prototype,"mode",void 0),m([w({readOnly:!0})],go.prototype,"state",null),m([w()],go.prototype,"filesEnabled",void 0),m([w({readOnly:!0})],go.prototype,"supportsResizeAttachments",null),go=m([H("esri.widgets.Attachments.AttachmentsViewModel")],go);const oD=go;function fH(e){const t=e.toLowerCase();return t==="image/bmp"||t==="image/emf"||t==="image/exif"||t==="image/gif"||t==="image/x-icon"||t==="image/jpeg"||t==="image/png"||t==="image/tiff"||t==="image/x-wmf"}function vOe(e){const t=Vt("esri/themes/base/images/files/");return e?e==="text/plain"?`${t}text-32.svg`:e==="application/pdf"?`${t}pdf-32.svg`:e==="text/csv"?`${t}csv-32.svg`:e==="application/gpx+xml"?`${t}gpx-32.svg`:e==="application/x-dwf"?`${t}cad-32.svg`:e==="application/postscript"||e==="application/json"||e==="text/xml"||e==="model/vrml"?`${t}code-32.svg`:e==="application/x-zip-compressed"||e==="application/x-7z-compressed"||e==="application/x-gzip"||e==="application/x-tar"||e==="application/x-gtar"||e==="application/x-bzip2"||e==="application/gzip"||e==="application/x-compress"||e==="application/x-apple-diskimage"||e==="application/x-rar-compressed"||e==="application/zip"?`${t}zip-32.svg`:e.includes("image/")?`${t}image-32.svg`:e.includes("audio/")?`${t}sound-32.svg`:e.includes("video/")?`${t}video-32.svg`:e.includes("msexcel")||e.includes("ms-excel")||e.includes("spreadsheetml")?`${t}excel-32.svg`:e.includes("msword")||e.includes("ms-word")||e.includes("wordprocessingml")?`${t}word-32.svg`:e.includes("powerpoint")||e.includes("presentationml")?`${t}report-32.svg`:`${t}generic-32.svg`:`${t}generic-32.svg`}const is={close:"esri-icon-close",collapse:"esri-icon-collapse",down:"esri-icon-down",downArrow:"esri-icon-down-arrow",dragHorizontal:"esri-icon-drag-horizontal",dragVertical:"esri-icon-drag-vertical",duplicate:"esri-icon-duplicate",expand:"esri-icon-expand",fontFallbackText:"esri-icon-font-fallback-text",forward:"esri-icon-forward",handleVertical:"esri-icon-handle-vertical",icon:"esri-icon",left:"esri-icon-left",locateCircled:"esri-icon-locate-circled",noticeTriangle:"esri-icon-notice-triangle",pause:"esri-icon-pause",play:"esri-icon-play",plus:"esri-icon-plus",radioChecked:"esri-icon-radio-checked",radioUnchecked:"esri-icon-radio-unchecked",refresh:"esri-icon-refresh",reverse:"esri-icon-reverse",right:"esri-icon-right",search:"esri-icon-search",swap:"esri-icon-swap",table:"esri-icon-table",trash:"esri-icon-trash",up:"esri-icon-up",upArrow:"esri-icon-up-arrow",upDownArrows:"esri-icon-up-down-arrows",urbanModel:"esri-icon-urban-model",zoomInMagnifyingGlass:"esri-icon-zoom-in-magnifying-glass",zoomToObject:"esri-icon-zoom-to-object"},yH={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},Zt="esri-attachments",vt={base:Zt,loaderContainer:`${Zt}__loader-container`,loader:`${Zt}__loader`,fadeIn:`${Zt}--fade-in`,container:`${Zt}__container`,containerList:`${Zt}__container--list`,containerPreview:`${Zt}__container--preview`,actions:`${Zt}__actions`,deleteButton:`${Zt}__delete-button`,addAttachmentButton:`${Zt}__add-attachment-button`,errorMessage:`${Zt}__error-message`,items:`${Zt}__items`,item:`${Zt}__item`,itemButton:`${Zt}__item-button`,itemMask:`${Zt}__item-mask`,itemMaskIcon:`${Zt}__item-mask--icon`,itemImage:`${Zt}__image`,itemImageResizable:`${Zt}__image--resizable`,itemLabel:`${Zt}__label`,itemFilename:`${Zt}__filename`,itemChevronIcon:`${Zt}__item-chevron-icon`,itemLink:`${Zt}__item-link`,itemLinkOverlay:`${Zt}__item-link-overlay`,itemLinkOverlayIcon:`${Zt}__item-link-overlay-icon`,itemEditIcon:`${Zt}__item-edit-icon`,itemAddIcon:`${Zt}__item-add-icon`,itemAddButton:`${Zt}__item-add-button`,formNode:`${Zt}__form-node`,fileFieldset:`${Zt}__file-fieldset`,fileLabel:`${Zt}__file-label`,fileName:`${Zt}__file-name`,fileInput:`${Zt}__file-input`,metadata:`${Zt}__metadata`,metadataFieldset:`${Zt}__metadata-fieldset`,progressBar:`${Zt}__progress-bar`},s7=window.CSS;let Zn=class extends bi{constructor(t,i){super(t,i),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=null,this.visibleElements={...yH},this._supportsImageOrientation=s7&&s7.supports&&s7.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}normalizeCtorArgs(t){return t!=null&&t.viewModel||(t={viewModel:new oD,...t}),t}initialize(){this.addHandles([Lr(()=>{var t;return(t=this.viewModel)==null?void 0:t.attachmentInfos},"change",()=>this.scheduleRender()),Lr(()=>{var t;return(t=this.viewModel)==null?void 0:t.fileInfos},"change",()=>this.scheduleRender()),me(()=>{var t;return(t=this.viewModel)==null?void 0:t.mode},()=>this._modeChanged(),Je)])}loadDependencies(){return cs({icon:()=>ce(()=>import("./calcite-icon-_vDov-sg.js"),[],import.meta.url)})}get capabilities(){return this.viewModel.capabilities}set capabilities(t){this.viewModel.capabilities=t}get effectiveDisplayType(){const{displayType:t}=this;return t&&t!=="auto"?t:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get icon(){return"attachment"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}castVisibleElements(t){return{...yH,...t}}addAttachment(){const{_addAttachmentForm:t,viewModel:i}=this;return this._set("submitting",!0),this._set("error",null),i.addAttachment(t).then(r=>(this._set("submitting",!1),this._set("error",null),i.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new ne("attachments:add-attachment",this.messages.addErrorMessage,r)),r})}deleteAttachment(t){const{viewModel:i}=this;return this._set("submitting",!0),this._set("error",null),i.deleteAttachment(t).then(r=>(this._set("submitting",!1),this._set("error",null),i.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new ne("attachments:delete-attachment",this.messages.deleteErrorMessage,r)),r})}updateAttachment(){const{viewModel:t}=this,{_updateAttachmentForm:i}=this;return this._set("submitting",!0),this._set("error",null),t.updateAttachment(i).then(r=>(this._set("submitting",!1),this._set("error",null),t.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new ne("attachments:update-attachment",this.messages.updateErrorMessage,r)),r})}addFile(){const t=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",t}updateFile(){const{viewModel:t}=this,i=t.updateFile(this.selectedFile,this._updateAttachmentForm,t.activeFileInfo);return t.mode="view",i}deleteFile(t){var r;const i=this.viewModel.deleteFile(t||((r=this.viewModel.activeFileInfo)==null?void 0:r.file));return this.viewModel.mode="view",i}render(){const{submitting:t,viewModel:i}=this,{state:r}=i;return G("div",{class:this.classes(vt.base,Ge.widget)},t?this._renderProgressBar():null,r==="loading"?this._renderLoading():this._renderAttachments(),this._renderErrorMessage())}_renderErrorMessage(){const{error:t,visibleElements:i}=this;return t&&i.errorMessage?G("div",{class:vt.errorMessage,key:"error-message"},t.message):null}_renderAttachments(){const{activeFileInfo:t,mode:i,activeAttachmentInfo:r}=this.viewModel;return i==="add"?this._renderAddForm():i==="edit"?this._renderDetailsForm(r||t):this._renderAttachmentContainer()}_renderLoading(){return G("div",{class:vt.loaderContainer,key:"loader"},G("div",{class:vt.loader}))}_renderProgressBar(){return this.visibleElements.progressBar?G("div",{class:vt.progressBar,key:"progress-bar"}):null}_renderAddForm(){const{submitting:t,selectedFile:i}=this,r=t||!i,n=this.visibleElements.cancelAddButton?G("button",{bind:this,class:this.classes(Ge.button,Ge.buttonTertiary,Ge.buttonSmall,Ge.buttonHalf,t&&Ge.buttonDisabled),disabled:t,onclick:this._cancelForm,type:"button"},this.messages.cancel):null,o=this.visibleElements.addSubmitButton?G("button",{class:this.classes(Ge.button,Ge.buttonSecondary,Ge.buttonSmall,Ge.buttonHalf,{[Ge.buttonDisabled]:r}),disabled:r,type:"submit"},this.messages.add):null,u=i?G("span",{class:vt.fileName,key:"file-name"},i.name):null,f=G("form",{afterCreate:Og,afterRemoved:jG,bind:this,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},G("fieldset",{class:vt.fileFieldset},u,G("label",{class:this.classes(vt.fileLabel,Ge.button,Ge.buttonSecondary)},i?this.messages.changeFile:this.messages.selectFile,G("input",{bind:this,class:vt.fileInput,name:"attachment",onchange:this._handleFileInputChange,type:"file"}))),o,n);return G("div",{class:vt.formNode,key:"add-form-container"},f)}_renderDetailsForm(t){var W,Q,Z;const{visibleElements:i,viewModel:r,selectedFile:n,submitting:o}=this,{capabilities:u}=r,f=o||!n;let g,b,E,I;n?(g=n.type,b=n.name,E=n.size):t&&"file"in t?(g=t.file.type,b=t.file.name,E=t.file.size):t&&"contentType"in t&&(g=t.contentType,b=t.name,E=t.size,I=t.url);const M=u.editing&&((W=u.operations)!=null&&W.delete)&&i.deleteButton?G("button",{bind:this,class:this.classes(Ge.button,Ge.buttonSmall,Ge.buttonTertiary,vt.deleteButton,{[Ge.buttonDisabled]:o}),disabled:o,key:"delete-button",onclick:ee=>this._submitDeleteAttachment(ee,t),type:"button"},this.messages.delete):void 0,k=u.editing&&((Q=u.operations)!=null&&Q.update)&&i.updateButton?G("button",{class:this.classes(Ge.button,Ge.buttonSmall,Ge.buttonThird,{[Ge.buttonDisabled]:f}),disabled:f,key:"update-button",type:"submit"},this.messages.update):void 0,L=this.visibleElements.cancelUpdateButton?G("button",{bind:this,class:this.classes(Ge.button,Ge.buttonSmall,Ge.buttonTertiary,Ge.buttonThird,{[Ge.buttonDisabled]:o}),disabled:o,key:"cancel-button",onclick:this._cancelForm,type:"button"},this.messages.cancel):void 0,P=u.editing&&((Z=u.operations)!=null&&Z.update)?G("fieldset",{class:vt.fileFieldset,key:"file"},G("span",{class:vt.fileName,key:"file-name"},b),G("label",{class:this.classes(vt.fileLabel,Ge.button,Ge.buttonSecondary)},this.messages.changeFile,G("input",{bind:this,class:vt.fileInput,name:"attachment",onchange:this._handleFileInputChange,type:"file"}))):void 0,D=G("fieldset",{class:vt.metadataFieldset,key:"size"},G("label",null,RLe(this.messagesUnits,E??0))),j=G("fieldset",{class:vt.metadataFieldset,key:"content-type"},G("label",null,g)),z=I!=null?G("a",{class:vt.itemLink,href:I,rel:"noreferrer",target:"_blank"},this._renderImageMask(t,400),G("div",{class:vt.itemLinkOverlay},G("span",{class:vt.itemLinkOverlayIcon},G("calcite-icon",{icon:"launch"})))):this._renderImageMask(t,400),V=G("form",{afterCreate:Og,afterRemoved:jG,bind:this,"data-node-ref":"_updateAttachmentForm",onsubmit:ee=>this._submitUpdateAttachment(ee,t)},G("div",{class:vt.metadata},D,j),P,G("div",{class:vt.actions},M,L,k));return G("div",{class:vt.formNode,key:"edit-form-container"},z,V)}_renderImageMask(t,i){return t?"file"in t?this._renderGenericImageMask(t.file.name,t.file.type):this._renderImageMaskForAttachment(t,i):null}_renderGenericImageMask(t,i){const{supportsResizeAttachments:r}=this.viewModel,n=vOe(i),o={[vt.itemImageResizable]:r};return G("div",{class:this.classes(vt.itemMaskIcon,vt.itemMask),key:n},G("img",{alt:t,class:this.classes(o,vt.itemImage),src:n,title:t}))}_renderImageMaskForAttachment(t,i){const{supportsResizeAttachments:r}=this.viewModel;if(!t)return null;const{contentType:n,name:o,url:u}=t;if(!r||!fH(n))return this._renderGenericImageMask(o,n);const f=this._getCSSTransform(t),g=f?{transform:f,"image-orientation":"none"}:{},b=`${u}${u!=null&&u.includes("?")?"&":"?"}w=${i}`,E={[vt.itemImageResizable]:r};return G("div",{class:this.classes(vt.itemMask),key:b},G("img",{alt:o,class:this.classes(E,vt.itemImage),src:b,styles:g,title:o}))}_renderFile(t){const{file:i}=t;return G("li",{class:vt.item,key:i},G("button",{"aria-label":this.messages.attachmentDetails,bind:this,class:vt.itemButton,key:"details-button",onclick:()=>this._startEditFile(t),title:this.messages.attachmentDetails,type:"button"},this._renderImageMask(t),G("label",{class:vt.itemLabel},G("span",{class:vt.itemFilename},i.name||this.messages.noTitle),G("span",{"aria-hidden":"true",class:this.classes(vt.itemChevronIcon,ha(this.container)?is.left:is.right)}))))}_renderAttachmentInfo({attachmentInfo:t,displayType:i}){const{viewModel:r,effectiveDisplayType:n}=this,{capabilities:o,supportsResizeAttachments:u}=r,{contentType:f,name:g,url:b}=t,E=this._renderImageMask(t,i==="list"?48:400),I=o.editing?G("span",{"aria-hidden":"true",class:this.classes(vt.itemChevronIcon,ha(this.container)?is.left:is.right)}):null,M=[E,n==="preview"&&u&&fH(f)?null:G("label",{class:vt.itemLabel},G("span",{class:vt.itemFilename},g||this.messages.noTitle),I)],k=o.editing?G("button",{"aria-label":this.messages.attachmentDetails,bind:this,class:vt.itemButton,"data-attachment-info-id":t.id,key:"details-button",onclick:()=>this._startEditAttachment(t),title:this.messages.attachmentDetails,type:"button"},M):G("a",{class:vt.itemButton,href:b??void 0,key:"details-link",rel:"noreferrer",target:"_blank"},M);return G("li",{class:vt.item,key:t},k)}_renderAttachmentContainer(){var L;const{effectiveDisplayType:t,viewModel:i,visibleElements:r}=this,{attachmentInfos:n,capabilities:o,fileInfos:u}=i,f=!!(n!=null&&n.length),g=!!(u!=null&&u.length),b={[vt.containerList]:t!=="preview",[vt.containerPreview]:t==="preview"},E=o.editing&&((L=o.operations)!=null&&L.add)&&r.addButton?G("button",{bind:this,class:this.classes(Ge.button,Ge.buttonTertiary,vt.addAttachmentButton),onclick:()=>this._startAddAttachment(),type:"button"},G("span",{"aria-hidden":"true",class:this.classes(vt.itemAddIcon,is.plus)}),this.messages.add):void 0,I=f?G("ul",{class:vt.items,key:"attachments-list"},n.toArray().map(P=>this._renderAttachmentInfo({attachmentInfo:P,displayType:t}))):void 0,M=g?G("ul",{class:vt.items,key:"file-list"},u.toArray().map(P=>this._renderFile(P))):void 0,k=g||f?void 0:G("div",{class:Ge.empty},this.messages.noAttachments);return G("div",{class:this.classes(vt.container,b),key:"attachments-container"},I,M,k,E)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(t){var n;const i=t.target,r=(n=i.files)==null?void 0:n.item(0);this._set("selectedFile",r)}_submitDeleteAttachment(t,i){t.preventDefault(),i&&("file"in i?this.deleteFile(i.file):i&&this.deleteAttachment(i))}_submitAddAttachment(t){t.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(t,i){t.preventDefault(),i&&"file"in i?this.updateFile():this.updateAttachment()}_startEditAttachment(t){const{viewModel:i}=this;i.activeFileInfo=null,i.activeAttachmentInfo=t,i.mode="edit"}_startEditFile(t){const{viewModel:i}=this;i.activeAttachmentInfo=null,i.activeFileInfo=t,i.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(t){t.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(t){const{orientationInfo:i}=t;return!this._supportsImageOrientation&&i?[i.rotation?`rotate(${i.rotation}deg)`:"",i.mirrored?"scaleX(-1)":""].join(" "):""}};m([w()],Zn.prototype,"capabilities",null),m([w()],Zn.prototype,"displayType",void 0),m([w({readOnly:!0})],Zn.prototype,"effectiveDisplayType",null),m([w()],Zn.prototype,"graphic",null),m([w()],Zn.prototype,"icon",null),m([w()],Zn.prototype,"label",null),m([w(),Xt("esri/widgets/Attachments/t9n/Attachments")],Zn.prototype,"messages",void 0),m([w(),Xt("esri/core/t9n/Units")],Zn.prototype,"messagesUnits",void 0),m([w({readOnly:!0})],Zn.prototype,"selectedFile",void 0),m([w({readOnly:!0})],Zn.prototype,"submitting",void 0),m([w({readOnly:!0})],Zn.prototype,"error",void 0),m([w({type:oD})],Zn.prototype,"viewModel",void 0),m([w()],Zn.prototype,"visibleElements",void 0),m([St("visibleElements")],Zn.prototype,"castVisibleElements",null),Zn=m([H("esri.widgets.Attachments")],Zn);const wOe=Zn;let kb=class extends oD{constructor(t){super(t),this.description=null,this.title=null}};m([w()],kb.prototype,"description",void 0),m([w()],kb.prototype,"title",void 0),kb=m([H("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],kb);const aD=kb;function Ay({level:e,class:t,...i},r){const n=Rue(e);return G(`h${n}`,{...i,"aria-level":String(n),class:Lg(Ge.heading,t),role:"heading"},r)}function Rue(e){return oo(Math.ceil(e),1,6)}function bOe(e,t=1){return Rue(e+t)}const o7="esri-feature-element-info",a7={base:o7,title:`${o7}__title`,description:`${o7}__description`};let C1=class extends bi{constructor(t,i){super(t,i),this.description=null,this.headingLevel=2,this.title=null}render(){return G("div",{class:a7.base},this._renderTitle(),this._renderDescription())}_renderTitle(){const{title:t}=this;return t?G(Ay,{class:a7.title,innerHTML:t,level:this.headingLevel}):null}_renderDescription(){const{description:t}=this;return t?G("div",{class:a7.description,innerHTML:t,key:"description"}):null}};m([w()],C1.prototype,"description",void 0),m([w()],C1.prototype,"headingLevel",void 0),m([w()],C1.prototype,"title",void 0),C1=m([H("esri.widgets.Feature.support.FeatureElementInfo")],C1);const kS=C1,_Oe={base:"esri-feature-attachments"};let Hu=class extends bi{constructor(t,i){super(t,i),this._featureElementInfo=null,this.attachmentsWidget=new wOe,this.headingLevel=2,this.viewModel=new aD}initialize(){this._featureElementInfo=new kS,this.addHandles([me(()=>{var t,i;return[(t=this.viewModel)==null?void 0:t.description,(i=this.viewModel)==null?void 0:i.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),Je),me(()=>this.viewModel,t=>this.attachmentsWidget.viewModel=t,Je)])}destroy(){var t;this.attachmentsWidget.viewModel=null,this.attachmentsWidget.destroy(),(t=this._featureElementInfo)==null||t.destroy()}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get displayType(){return this.attachmentsWidget.displayType}set displayType(t){this.attachmentsWidget.displayType=t}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}render(){var i;const{attachmentsWidget:t}=this;return G("div",{class:_Oe.base},(i=this._featureElementInfo)==null?void 0:i.render(),t==null?void 0:t.render())}_setupFeatureElementInfo(){var n;const{description:t,title:i,headingLevel:r}=this;(n=this._featureElementInfo)==null||n.set({description:t,title:i,headingLevel:r})}};m([w({readOnly:!0})],Hu.prototype,"attachmentsWidget",void 0),m([w()],Hu.prototype,"description",null),m([w()],Hu.prototype,"displayType",null),m([w()],Hu.prototype,"graphic",null),m([w()],Hu.prototype,"headingLevel",void 0),m([w()],Hu.prototype,"title",null),m([w({type:aD})],Hu.prototype,"viewModel",void 0),Hu=m([H("esri.widgets.Feature.FeatureAttachments")],Hu);const SOe=Hu;let Xd=class extends De{constructor(t){super(t),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.addHandles(me(()=>this.creator,i=>{this._destroyContent(),this._createContent(i)},Je))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:t,graphic:i,destroyer:r}=this;t&&i&&(NI({type:"content",value:r,event:{graphic:i}}),this._set("created",null))}async _createContent(t){const i=this.graphic;if(!i||!t)return;const r=NI({type:"content",value:t,event:{graphic:i}});this._loadingPromise=r,this.notifyChange("state");const n=await r;r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",n))}};m([w({readOnly:!0})],Xd.prototype,"created",void 0),m([w()],Xd.prototype,"creator",void 0),m([w()],Xd.prototype,"destroyer",void 0),m([w({type:qi})],Xd.prototype,"graphic",void 0),m([w({readOnly:!0})],Xd.prototype,"state",null),Xd=m([H("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],Xd);const FI=Xd;function LS(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const i=t._delegatedEventNames,r=Array.isArray(e)?e:xOe(e);i.push(...r)}}function xOe(e){return e.split(",").map(t=>t.trim())}function ky(e){return e&&typeof e.render=="function"}function Pue(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}const l7="esri-feature-content",u7={base:l7,loaderContainer:`${l7}__loader-container`,loader:`${l7}__loader`};let A1=class extends bi{constructor(t,i){super(t,i),this.viewModel=null,this._addTargetToAnchors=r=>{Array.from(r.querySelectorAll("a")).forEach(n=>{Eue(n.href)&&!n.hasAttribute("target")&&n.setAttribute("target","_blank")})}}get creator(){var t;return(t=this.viewModel)==null?void 0:t.creator}set creator(t){this.viewModel&&(this.viewModel.creator=t)}get graphic(){var t;return(t=this.viewModel)==null?void 0:t.graphic}set graphic(t){this.viewModel&&(this.viewModel.graphic=t)}render(){var i;const t=(i=this.viewModel)==null?void 0:i.state;return G("div",{class:u7.base},t==="loading"?this._renderLoading():this._renderCreated())}_renderLoading(){return G("div",{class:u7.loaderContainer,key:"loader"},G("div",{class:u7.loader}))}_renderCreated(){var i;const t=(i=this.viewModel)==null?void 0:i.created;return t?t instanceof HTMLElement?G("div",{afterCreate:this._attachToNode,bind:t,key:t}):ky(t)?G("div",{key:t},!t.destroyed&&t.render()):G("div",{afterCreate:this._addTargetToAnchors,innerHTML:t,key:t}):null}_attachToNode(t){const i=this;t.appendChild(i)}};m([w()],A1.prototype,"creator",null),m([w()],A1.prototype,"graphic",null),m([w({type:FI})],A1.prototype,"viewModel",void 0),A1=m([H("esri.widgets.Feature.FeatureContent")],A1);const d4=A1;let dh=class extends De{constructor(t){super(t),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:t,fieldInfos:i}=this,r=[];return i==null||i.forEach(n=>{if(!(!n.hasOwnProperty("visible")||n.visible))return;const o=n.clone();o.label=Iue(o,t),r.push(o)}),r}};m([w()],dh.prototype,"attributes",void 0),m([w({type:[coe]})],dh.prototype,"expressionInfos",void 0),m([w()],dh.prototype,"description",void 0),m([w({type:[SS]})],dh.prototype,"fieldInfos",void 0),m([w({readOnly:!0})],dh.prototype,"formattedFieldInfos",null),m([w()],dh.prototype,"title",void 0),dh=m([H("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],dh);const DT=dh,EOe=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function IOe(e,t){if(typeof t!="string"||!t)return t;const i=EOe.find(g=>g.pattern.test(t));if(!i)return t;const r=t.match(i.pattern),n=r==null?void 0:r[2],o=wu(wu(i.label,{messages:e,hierPart:n}),{appName:i.appName}),u=i.target?` target="${i.target}"`:"",f=i.target==="_blank"?' rel="noreferrer"':"";return t.replace(i.pattern,`<a${u} href="$1"${f}>${o}</a>`)}const tx="esri-feature-fields",ix={base:tx,fieldHeader:`${tx}__field-header`,fieldData:`${tx}__field-data`,fieldDataDate:`${tx}__field-data--date`};let Fl=class extends bi{constructor(t,i){super(t,i),this._featureElementInfo=null,this.viewModel=new DT,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new kS,this.addHandles(me(()=>{var t,i;return[(t=this.viewModel)==null?void 0:t.description,(i=this.viewModel)==null?void 0:i.title]},()=>this._setupFeatureElementInfo(),Je))}destroy(){var t;(t=this._featureElementInfo)==null||t.destroy()}get attributes(){return this.viewModel.attributes}set attributes(t){this.viewModel.attributes=t}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(t){this.viewModel.expressionInfos=t}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(t){this.viewModel.fieldInfos=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}render(){var t;return G("div",{class:ix.base},(t=this._featureElementInfo)==null?void 0:t.render(),this._renderFields())}_renderFieldInfo(t,i){var E;const{attributes:r}=this.viewModel,n=t.fieldName||"",o=t.label||n,u=r?r[n]==null?"":r[n]:"",f=!!((E=t.format)!=null&&E.dateFormat),g=typeof u=="number"&&!f?this._forceLTR(u):IOe(this.messagesURIUtils,u),b={[ix.fieldDataDate]:f};return G("tr",{key:`fields-element-info-row-${n}-${i}`},G("th",{class:ix.fieldHeader,innerHTML:o,key:`fields-element-info-row-header-${n}-${i}`}),G("td",{class:this.classes(ix.fieldData,b),innerHTML:g,key:`fields-element-info-row-data-${n}-${i}`}))}_renderFields(){const{formattedFieldInfos:t}=this.viewModel;return t!=null&&t.length?G("table",{class:Ge.table,summary:this.messages.fieldsSummary},G("tbody",null,t.map((i,r)=>this._renderFieldInfo(i,r)))):null}_setupFeatureElementInfo(){var r;const{description:t,title:i}=this;(r=this._featureElementInfo)==null||r.set({description:t,title:i})}_forceLTR(t){return`&lrm;${t}`}};m([w()],Fl.prototype,"attributes",null),m([w()],Fl.prototype,"description",null),m([w()],Fl.prototype,"expressionInfos",null),m([w()],Fl.prototype,"fieldInfos",null),m([w()],Fl.prototype,"title",null),m([w({type:DT,nonNullable:!0})],Fl.prototype,"viewModel",void 0),m([w(),Xt("esri/widgets/Feature/t9n/Feature")],Fl.prototype,"messages",void 0),m([w(),Xt("esri/widgets/support/t9n/uriUtils")],Fl.prototype,"messagesURIUtils",void 0),Fl=m([H("esri.widgets.Feature.FeatureFields")],Fl);const Nue=Fl,TOe=/^-?(\d+)(\.(\d+))?$/i;function $Oe(e,t){return e-t}function MOe(e,t){let i,r;return i=Number(e.toFixed(t)),i<e?r=i+1/10**t:(r=i,i-=1/10**t),i=Number(i.toFixed(t)),r=Number(r.toFixed(t)),[i,r]}function COe(e,t,i,r,n){const o=p4(e,t,i,r),u=o.previous==null||o.previous<=n,f=o.next==null||o.next<=n;return u&&f||o.previous+o.next<=2*n}function DI(e){const t=String(e),i=t.match(TOe);if(i!=null&&i[1])return{integer:i[1].split("").length,fractional:i[3]?i[3].split("").length:0};if(t.toLowerCase().includes("e")){const r=t.split("e"),n=r[0],o=r[1];if(n&&o){const u=Number(n);let f=Number(o);const g=f>0;g||(f=Math.abs(f));const b=DI(u);return g?(b.integer+=f,f>b.fractional?b.fractional=0:b.fractional-=f):(b.fractional+=f,f>b.integer?b.integer=1:b.integer-=f),b}}return{integer:0,fractional:0}}function p4(e,t,i,r){const n={previous:null,next:null};if(i!=null){const o=e-i,u=t-i-o;n.previous=Math.floor(Math.abs(100*u/o))}if(r!=null){const o=r-e,u=r-t-o;n.next=Math.floor(Math.abs(100*u/o))}return n}function jI(e,t={}){const i=e.slice(),{tolerance:r=2,strictBounds:n=!1,indexes:o=i.map((u,f)=>f)}=t;o.sort($Oe);for(let u=0;u<o.length;u++){const f=o[u],g=i[f],b=f===0?null:i[f-1],E=f===i.length-1?null:i[f+1],I=DI(g).fractional;if(I){let M,k=0,L=!1;for(;k<=I&&!L;){const P=MOe(g,k);M=n&&u===0?P[1]:P[0],L=COe(g,M,b,E,r),k++}L&&(i[f]=M)}}return i}const AOe={maximumFractionDigits:20};function kOe(e){return as(e,AOe)}var kL;let A0=kL=class extends be{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,i){t[i]=e??0}clone(){return new kL({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};m([w({type:Ne,json:{type:[Ot],write:!0}})],A0.prototype,"color",void 0),m([w({type:String,json:{write:!0}})],A0.prototype,"label",void 0),m([w({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],A0.prototype,"value",void 0),m([Pe("value")],A0.prototype,"writeValue",null),A0=kL=m([H("esri.renderers.visualVariables.support.ColorStop")],A0);const LOe=A0;function OOe(e,t){function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i}function yv(e,t,i,r){var n=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(n,yv.prototype),n.expected=t,n.found=i,n.location=r,n.name="SyntaxError",n}function c7(e,t,i){return i=i||" ",e.length>t?e:(t-=e.length,e+(i+=i.repeat(t)).slice(0,t))}function ROe(e,t){var i,r={},n=(t=t!==void 0?t:{}).grammarSource,o={start:ut},u=ut,f="none",g=")",b=",",E="(",I="%",M="px",k="cm",L="mm",P="in",D="pt",j="pc",z="deg",V="rad",W="grad",Q="turn",Z="#",ee=".",ie="e",oe=/^[ \t\n\r]/,le=/^[a-z\-]/,xe=/^[0-9a-fA-F]/,$e=/^[+\-]/,Te=/^[0-9]/,de=Ae("none"),se=ae("none",!1),ye=ae(")",!1),ue=ae(",",!1),pe=Ae("whitespace"),_e=ge([" ","	",`
`,"\r"],!1,!1),Le=Ae("function"),Re=ae("(",!1),qe=Ae("identifier"),ht=ge([["a","z"],"-"],!1,!1),At=Ae("percentage"),Fi=ae("%",!1),Rr=Ae("length"),hs=ae("px",!1),zc=ae("cm",!1),$m=ae("mm",!1),Vc=ae("in",!1),vd=ae("pt",!1),ZS=ae("pc",!1),w$=Ae("angle"),b$=ae("deg",!1),_$=ae("rad",!1),Gr=ae("grad",!1),Y=ae("turn",!1),ds=Ae("number"),JS=Ae("color"),Wt=ae("#",!1),rr=ge([["0","9"],["a","f"],["A","F"]],!1,!1),Ta=ge(["+","-"],!1,!1),Un=ge([["0","9"]],!1,!1),Tu=ae(".",!1),Uc=ae("e",!1),KS=function(){return[]},YS=function(re,Ce){return{type:"function",name:re,parameters:Ce||[]}},Gc=function(re,Ce){return Ce.length>0?Cm(re,Ce,3):[re]},Ve=function(re){return{type:"quantity",value:re.value,unit:re.unit}},wd=function(re){return{type:"color",colorType:re.type,value:re.value}},d=function(re){return re},O=function(){return te()},S=function(re){return{value:re,unit:"%"}},h=function(re){return{value:re,unit:"px"}},l=function(re){return{value:re,unit:"cm"}},s=function(re){return{value:re,unit:"mm"}},a=function(re){return{value:re,unit:"in"}},c=function(re){return{value:re,unit:"pt"}},p=function(re){return{value:re,unit:"pc"}},y=function(re){return{value:re,unit:"deg"}},v=function(re){return{value:re,unit:"rad"}},_=function(re){return{value:re,unit:"grad"}},x=function(re){return{value:re,unit:"turn"}},T=function(re){return{value:re,unit:null}},C=function(){return{type:"hex",value:te()}},A=function(re){return{type:"function",value:re}},R=function(){return{type:"named",value:te()}},F=function(){return parseFloat(te())},N=0|t.peg$currPos,B=N,q=[{line:1,column:1}],U=N,K=t.peg$maxFailExpected||[],X=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in o))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');u=o[t.startRule]}function te(){return e.substring(B,N)}function ae(re,Ce){return{type:"literal",text:re,ignoreCase:Ce}}function ge(re,Ce,ze){return{type:"class",parts:re,inverted:Ce,ignoreCase:ze}}function Ee(){return{type:"end"}}function Ae(re){return{type:"other",description:re}}function Me(re){var Ce,ze=q[re];if(ze)return ze;if(re>=q.length)Ce=q.length-1;else for(Ce=re;!q[--Ce];);for(ze={line:(ze=q[Ce]).line,column:ze.column};Ce<re;)e.charCodeAt(Ce)===10?(ze.line++,ze.column=1):ze.column++,Ce++;return q[re]=ze,ze}function He(re,Ce,ze){var mt=Me(re),Oi=Me(Ce);return{source:n,start:{offset:re,line:mt.line,column:mt.column},end:{offset:Ce,line:Oi.line,column:Oi.column}}}function Ie(re){N<U||(N>U&&(U=N,K=[]),K.push(re))}function dt(re,Ce,ze){return new yv(yv.buildMessage(re,Ce),re,Ce,ze)}function ut(){var re;return(re=Nt())===r&&(re=yi()),re}function Nt(){var re,Ce;return X++,re=N,pt(),e.substr(N,4)===f?(Ce=f,N+=4):(Ce=r,X===0&&Ie(se)),Ce!==r?(pt(),B=re,re=KS()):(N=re,re=r),X--,re===r&&X===0&&Ie(de),re}function yi(){var re,Ce;if(re=[],(Ce=fr())!==r)for(;Ce!==r;)re.push(Ce),Ce=fr();else re=r;return re}function fr(){var re,Ce,ze,mt;return re=N,pt(),(Ce=$t())!==r?(pt(),(ze=_i())===r&&(ze=null),pt(),e.charCodeAt(N)===41?(mt=g,N++):(mt=r,X===0&&Ie(ye)),mt!==r?(pt(),B=re,re=YS(Ce,ze)):(N=re,re=r)):(N=re,re=r),re}function _i(){var re,Ce,ze,mt,Oi,xr,an,uo;if(re=N,(Ce=Ft())!==r){for(ze=[],mt=N,Oi=pt(),e.charCodeAt(N)===44?(xr=b,N++):(xr=r,X===0&&Ie(ue)),xr===r&&(xr=null),an=pt(),(uo=Ft())!==r?mt=Oi=[Oi,xr,an,uo]:(N=mt,mt=r);mt!==r;)ze.push(mt),mt=N,Oi=pt(),e.charCodeAt(N)===44?(xr=b,N++):(xr=r,X===0&&Ie(ue)),xr===r&&(xr=null),an=pt(),(uo=Ft())!==r?mt=Oi=[Oi,xr,an,uo]:(N=mt,mt=r);B=re,re=Gc(Ce,ze)}else N=re,re=r;return re}function Ft(){var re,Ce;return re=N,(Ce=$i())===r&&(Ce=Bo())===r&&(Ce=Pt())===r&&(Ce=Gn()),Ce!==r&&(B=re,Ce=Ve(Ce)),(re=Ce)===r&&(re=N,(Ce=ei())!==r&&(B=re,Ce=wd(Ce)),re=Ce),re}function pt(){var re,Ce;for(X++,re=[],Ce=e.charAt(N),oe.test(Ce)?N++:(Ce=r,X===0&&Ie(_e));Ce!==r;)re.push(Ce),Ce=e.charAt(N),oe.test(Ce)?N++:(Ce=r,X===0&&Ie(_e));return X--,Ce=r,X===0&&Ie(pe),re}function $t(){var re,Ce,ze;return X++,re=N,(Ce=Di())!==r?(e.charCodeAt(N)===40?(ze=E,N++):(ze=r,X===0&&Ie(Re)),ze!==r?(B=re,re=d(Ce)):(N=re,re=r)):(N=re,re=r),X--,re===r&&(Ce=r,X===0&&Ie(Le)),re}function Di(){var re,Ce,ze;if(X++,re=N,Ce=[],ze=e.charAt(N),le.test(ze)?N++:(ze=r,X===0&&Ie(ht)),ze!==r)for(;ze!==r;)Ce.push(ze),ze=e.charAt(N),le.test(ze)?N++:(ze=r,X===0&&Ie(ht));else Ce=r;return Ce!==r&&(B=re,Ce=O()),X--,(re=Ce)===r&&(Ce=r,X===0&&Ie(qe)),re}function $i(){var re,Ce,ze;return X++,re=N,pt(),(Ce=Bn())!==r?(e.charCodeAt(N)===37?(ze=I,N++):(ze=r,X===0&&Ie(Fi)),ze!==r?(B=re,re=S(Ce)):(N=re,re=r)):(N=re,re=r),X--,re===r&&X===0&&Ie(At),re}function Bo(){var re,Ce,ze;return X++,re=N,pt(),(Ce=Bn())!==r?(e.substr(N,2)===M?(ze=M,N+=2):(ze=r,X===0&&Ie(hs)),ze!==r?(B=re,re=h(Ce)):(N=re,re=r)):(N=re,re=r),re===r&&(re=N,pt(),(Ce=Bn())!==r?(e.substr(N,2)===k?(ze=k,N+=2):(ze=r,X===0&&Ie(zc)),ze!==r?(B=re,re=l(Ce)):(N=re,re=r)):(N=re,re=r),re===r&&(re=N,pt(),(Ce=Bn())!==r?(e.substr(N,2)===L?(ze=L,N+=2):(ze=r,X===0&&Ie($m)),ze!==r?(B=re,re=s(Ce)):(N=re,re=r)):(N=re,re=r),re===r&&(re=N,pt(),(Ce=Bn())!==r?(e.substr(N,2)===P?(ze=P,N+=2):(ze=r,X===0&&Ie(Vc)),ze!==r?(B=re,re=a(Ce)):(N=re,re=r)):(N=re,re=r),re===r&&(re=N,pt(),(Ce=Bn())!==r?(e.substr(N,2)===D?(ze=D,N+=2):(ze=r,X===0&&Ie(vd)),ze!==r?(B=re,re=c(Ce)):(N=re,re=r)):(N=re,re=r),re===r&&(re=N,pt(),(Ce=Bn())!==r?(e.substr(N,2)===j?(ze=j,N+=2):(ze=r,X===0&&Ie(ZS)),ze!==r?(B=re,re=p(Ce)):(N=re,re=r)):(N=re,re=r)))))),X--,re===r&&X===0&&Ie(Rr),re}function Pt(){var re,Ce,ze;return X++,re=N,(Ce=Bn())!==r?(e.substr(N,3)===z?(ze=z,N+=3):(ze=r,X===0&&Ie(b$)),ze!==r?(B=re,re=y(Ce)):(N=re,re=r)):(N=re,re=r),re===r&&(re=N,(Ce=Bn())!==r?(e.substr(N,3)===V?(ze=V,N+=3):(ze=r,X===0&&Ie(_$)),ze!==r?(B=re,re=v(Ce)):(N=re,re=r)):(N=re,re=r),re===r&&(re=N,(Ce=Bn())!==r?(e.substr(N,4)===W?(ze=W,N+=4):(ze=r,X===0&&Ie(Gr)),ze!==r?(B=re,re=_(Ce)):(N=re,re=r)):(N=re,re=r),re===r&&(re=N,(Ce=Bn())!==r?(e.substr(N,4)===Q?(ze=Q,N+=4):(ze=r,X===0&&Ie(Y)),ze!==r?(B=re,re=x(Ce)):(N=re,re=r)):(N=re,re=r)))),X--,re===r&&(Ce=r,X===0&&Ie(w$)),re}function Gn(){var re,Ce;return X++,re=N,pt(),(Ce=Bn())!==r?(B=re,re=T(Ce)):(N=re,re=r),X--,re===r&&X===0&&Ie(ds),re}function ei(){var re,Ce,ze,mt;if(X++,re=N,e.charCodeAt(N)===35?(Ce=Z,N++):(Ce=r,X===0&&Ie(Wt)),Ce!==r){if(ze=[],mt=e.charAt(N),xe.test(mt)?N++:(mt=r,X===0&&Ie(rr)),mt!==r)for(;mt!==r;)ze.push(mt),mt=e.charAt(N),xe.test(mt)?N++:(mt=r,X===0&&Ie(rr));else ze=r;ze!==r?(B=re,re=C()):(N=re,re=r)}else N=re,re=r;return re===r&&(re=N,(Ce=fr())!==r&&(B=re,Ce=A(Ce)),(re=Ce)===r&&(re=N,(Ce=Di())!==r&&(B=re,Ce=R()),re=Ce)),X--,re===r&&(Ce=r,X===0&&Ie(JS)),re}function Bn(){var re,Ce,ze,mt,Oi,xr,an,uo;for(re=N,Ce=e.charAt(N),$e.test(Ce)?N++:(Ce=r,X===0&&Ie(Ta)),Ce===r&&(Ce=null),ze=N,mt=[],Oi=e.charAt(N),Te.test(Oi)?N++:(Oi=r,X===0&&Ie(Un));Oi!==r;)mt.push(Oi),Oi=e.charAt(N),Te.test(Oi)?N++:(Oi=r,X===0&&Ie(Un));if(e.charCodeAt(N)===46?(Oi=ee,N++):(Oi=r,X===0&&Ie(Tu)),Oi!==r){if(xr=[],an=e.charAt(N),Te.test(an)?N++:(an=r,X===0&&Ie(Un)),an!==r)for(;an!==r;)xr.push(an),an=e.charAt(N),Te.test(an)?N++:(an=r,X===0&&Ie(Un));else xr=r;xr!==r?ze=mt=[mt,Oi,xr]:(N=ze,ze=r)}else N=ze,ze=r;if(ze===r)if(ze=[],mt=e.charAt(N),Te.test(mt)?N++:(mt=r,X===0&&Ie(Un)),mt!==r)for(;mt!==r;)ze.push(mt),mt=e.charAt(N),Te.test(mt)?N++:(mt=r,X===0&&Ie(Un));else ze=r;if(ze!==r){if(mt=N,e.charCodeAt(N)===101?(Oi=ie,N++):(Oi=r,X===0&&Ie(Uc)),Oi!==r){if(xr=e.charAt(N),$e.test(xr)?N++:(xr=r,X===0&&Ie(Ta)),xr===r&&(xr=null),an=[],uo=e.charAt(N),Te.test(uo)?N++:(uo=r,X===0&&Ie(Un)),uo!==r)for(;uo!==r;)an.push(uo),uo=e.charAt(N),Te.test(uo)?N++:(uo=r,X===0&&Ie(Un));else an=r;an!==r?mt=Oi=[Oi,xr,an]:(N=mt,mt=r)}else N=mt,mt=r;mt===r&&(mt=null),B=re,re=F()}else N=re,re=r;return re}function Mm(re,Ce){return re.map(function(ze){return ze[Ce]})}function Cm(re,Ce,ze){return[re].concat(Mm(Ce,ze))}if(i=u(),t.peg$library)return{peg$result:i,peg$currPos:N,peg$FAILED:r,peg$maxFailExpected:K,peg$maxFailPos:U};if(i!==r&&N===e.length)return i;throw i!==r&&N<e.length&&Ie(Ee()),dt(K,U<e.length?e.charAt(U):null,U<e.length?He(U,U+1):He(U,U))}function lD(e){if(!e||e.length===0)return null;if(typeof e=="string"){const i=mH(e);return i&&i.length!==0?i:null}const t=e.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new ne("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:mH(i.value)}});t.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<t.length-1;i++){if(!Cse(t[i].effects,t[i+1].effects))throw new ne("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[i].effects,b:t[i+1].effects});Ase(t[i].effects,t[i+1].effects)}return t.sort((i,r)=>r.scale-i.scale),t}function mH(e){let t;if(!e)return[];try{t=ROe(e)}catch(i){throw new ne("effect:invalid-syntax","Invalid effect syntax",{value:e,error:i})}return t.map(i=>POe(i))}function POe(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return NOe(e);case"opacity":return FOe(e);case"hue-rotate":return DOe(e);case"blur":return jOe(e);case"drop-shadow":return zOe(e);case"bloom":return VOe(e)}}catch(t){throw t.details.filter=e,t}throw new ne("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function NOe(e){let t=1;return D2(e.parameters,1),e.parameters.length===1&&(t=nu(e.parameters[0])),new A8(e.name,t)}function FOe(e){let t=1;return D2(e.parameters,1),e.parameters.length===1&&(t=nu(e.parameters[0])),new $se(t)}function DOe(e){let t=0;return D2(e.parameters,1),e.parameters.length===1&&(t=WOe(e.parameters[0])),new Ise(t)}function jOe(e){let t=0;return D2(e.parameters,1),e.parameters.length===1&&(t=hD(e.parameters[0]),OS(t,e.parameters[0])),new bse(t)}function zOe(e){const t=[];let i=null;for(const r of e.parameters)if(r.type==="color"){if(t.length&&Object.freeze(t),i)throw new ne("effect:type-error","Accepts only one color",{});i=ZOe(r)}else{const n=hD(r);if(Object.isFrozen(t))throw new ne("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(n),t.length===3&&OS(n,r)}if(t.length<2||t.length>3)throw new ne("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new xse(t[0],t[1],t[2]||0,i||Fue("black"))}function VOe(e){let t=1,i=0,r=0;return D2(e.parameters,3),e.parameters[0]&&(t=nu(e.parameters[0])),e.parameters[1]&&(i=hD(e.parameters[1]),OS(i,e.parameters[1])),e.parameters[2]&&(r=nu(e.parameters[2])),new vse(t,i,r)}function D2(e,t){if(e.length>t)throw new ne("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function jT(e){if(e.type==="color")return"<color>";if(e.unit){if(e.unit in cD)return"<length>";if(e.unit in uD)return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function OS(e,t){if(e<0)throw new ne("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function UOe(e){if(e.type!=="quantity"||e.unit!==null)throw new ne("effect:type-error",`Expected <double>, Actual: ${jT(e)}`,{term:e})}function GOe(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new ne("effect:type-error",`Expected <double> or <percentage>, Actual: ${jT(e)}`,{term:e})}OOe(yv,Error),yv.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var i,r=null;for(i=0;i<e.length;i++)if(e[i].source===this.location.source){r=e[i].text.split(/\r\n|\n|\r/g);break}var n=this.location.start,o=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(n):n,u=this.location.source+":"+o.line+":"+o.column;if(r){var f=this.location.end,g=c7("",o.line.toString().length," "),b=r[n.line-1],E=(n.line===f.line?f.column:b.length+1)-n.column||1;t+=`
 --> `+u+`
`+g+` |
`+o.line+" | "+b+`
`+g+" | "+c7("",n.column-1," ")+c7("",E,"^")}else t+=`
 at `+u}return t},yv.buildMessage=function(e,t){var i={literal:function(b){return'"'+n(b.text)+'"'},class:function(b){var E=b.parts.map(function(I){return Array.isArray(I)?o(I[0])+"-"+o(I[1]):o(I)});return"["+(b.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(b){return b.description}};function r(b){return b.charCodeAt(0).toString(16).toUpperCase()}function n(b){return b.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+r(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+r(E)})}function o(b){return b.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+r(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+r(E)})}function u(b){return i[b.type](b)}function f(b){var E,I,M=b.map(u);if(M.sort(),M.length>0){for(E=1,I=1;E<M.length;E++)M[E-1]!==M[E]&&(M[I]=M[E],I++);M.length=I}switch(M.length){case 1:return M[0];case 2:return M[0]+" or "+M[1];default:return M.slice(0,-1).join(", ")+", or "+M[M.length-1]}}function g(b){return b?'"'+n(b)+'"':"end of input"}return"Expected "+f(e)+" but "+g(t)+" found."};const uD={deg:1,grad:.9,rad:180/Math.PI,turn:360};function BOe(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&uD[e.unit]!=null))throw new ne("effect:type-error",`Expected <angle>, Actual: ${jT(e)}`,{term:e})}const cD={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function qOe(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&cD[e.unit]!=null))throw new ne("effect:type-error",`Expected <length>, Actual: ${jT(e)}`,{term:e})}function nu(e){GOe(e);const t=e.value;return OS(t,e),e.unit==="%"?.01*t:t}function HOe(e){return UOe(e),OS(e.value,e),e.value}function WOe(e){return BOe(e),e.value*uD[e.unit]||0}function hD(e){return qOe(e),e.value*cD[e.unit]||0}function ZOe(e){switch(e.colorType){case"hex":return xEe(e.value);case"named":return Fue(e.value);case"function":return YOe(e.value)}}function Fue(e){if(!use(e))throw new ne("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return SEe(e)}const JOe=/^rgba?/i,KOe=/^hsla?/i;function YOe(e){if(D2(e.parameters,4),JOe.test(e.name))return[nu(e.parameters[0]),nu(e.parameters[1]),nu(e.parameters[2]),e.parameters[3]?nu(e.parameters[3]):1];if(KOe.test(e.name))return cse(HOe(e.parameters[0]),nu(e.parameters[1]),nu(e.parameters[2]),e.parameters[3]?nu(e.parameters[3]):1);throw new ne("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function k_(e,t,i){var r;try{return QOe(e)}catch(n){(r=i==null?void 0:i.messages)==null||r.push(n)}return null}function L_(e,t,i,r){try{const n=XOe(e);vn(i,n,t)}catch(n){r.messages&&r.messages.push(n)}}function XOe(e){const t=lD(e);return t?OIe(t)?t.map(i=>i.toJSON()):t.map(({scale:i,effects:r})=>({scale:i,value:r.map(n=>n.toJSON())})):null}function QOe(e){if(!e||e.length===0)return null;if(eRe(e)){const t=[];for(const i of e)t.push({scale:i.scale,value:zI(i.value)});return t}return zI(e)}function eRe(e){const t=e[0];return!!t&&"scale"in t}function zI(e){if(!(e!=null&&e.length))return"";const t=[];for(const i of e){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[Jc(i,"amount")];break;case"blur":r=[Jc(i,"radius","pt")];break;case"hue-rotate":r=[Jc(i,"angle","deg")];break;case"drop-shadow":r=[Jc(i,"xoffset","pt"),Jc(i,"yoffset","pt"),Jc(i,"blurRadius","pt"),tRe(i,"color")];break;case"bloom":r=[Jc(i,"strength"),Jc(i,"radius","pt"),Jc(i,"threshold")]}const n=`${i.type}(${r.filter(Boolean).join(" ")})`;lD(n),t.push(n)}return t.join(" ")}function Jc(e,t,i){if(e[t]==null)throw new ne("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return i?e[t]+i:""+e[t]}function tRe(e,t){if(e[t]==null)throw new ne("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const i=e[t];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}var gH,vH,wH,bH,_H,SH,xH,EH,IH,TH,LL,OL,$H,MH,CH,AH,kH,LH,OH,RH,PH,NH,FH,DH,jH,zH,VH,UH,GH,BH,qH,HH,WH,ZH,JH,KH,YH,XH,QH,eW,tW,iW,rW,nW,sW,oW,aW,lW,uW,cW,hW,dW,pW,fW,yW,mW,gW,vW,wW,bW,_W,SW;(function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"})(gH||(gH={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(vH||(vH={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(wH||(wH={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(bH||(bH={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(_H||(_H={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(SH||(SH={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(xH||(xH={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(EH||(EH={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(IH||(IH={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(TH||(TH={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(LL||(LL={})),function(e){e.Linear="Linear",e.EaseIn="EaseIn",e.EaseOut="EaseOut",e.EaseInOut="EaseInOut"}(OL||(OL={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}($H||($H={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(MH||(MH={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(CH||(CH={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(AH||(AH={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(kH||(kH={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(LH||(LH={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(OH||(OH={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(RH||(RH={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(PH||(PH={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees",e.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",e.ConcentricCircles="ConcentricCircles",e.DoubleJogArrow="DoubleJogArrow",e.LinkedChevrons="LinkedChevrons",e.SegmentThenHalfCircle="SegmentThenHalfCircle",e.LineWithStraightTicks="LineWithStraightTicks",e.DoubleCurve="DoubleCurve",e.ParallelWithTicksByWidth="ParallelWithTicksByWidth",e.EnclosingRoundedRectangle="EnclosingRoundedRectangle"}(NH||(NH={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(FH||(FH={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(DH||(DH={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(jH||(jH={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(zH||(zH={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(VH||(VH={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(UH||(UH={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(GH||(GH={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(BH||(BH={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(qH||(qH={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(HH||(HH={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(WH||(WH={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(ZH||(ZH={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(JH||(JH={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(KH||(KH={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(YH||(YH={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(XH||(XH={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(QH||(QH={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(eW||(eW={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(tW||(tW={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(iW||(iW={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(rW||(rW={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(nW||(nW={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(sW||(sW={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(oW||(oW={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(aW||(aW={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(lW||(lW={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(uW||(uW={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(cW||(cW={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(hW||(hW={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(dW||(dW={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(pW||(pW={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(fW||(fW={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(yW||(yW={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(mW||(mW={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(gW||(gW={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(vW||(vW={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(wW||(wW={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(bW||(bW={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(_W||(_W={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(SW||(SW={}));const iRe={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},RL={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:LL.Loop,repeatdelay:0,easing:OL.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0},CIMSymbolAnimationOffset:{offsetx:0,offsety:0}};function rRe(e){return typeof e=="function"}function uut(e,t,i,r){return rRe(e)?e(t,i,r):e}function cut(e){return[e.r,e.g,e.b,e.a]}const nRe=` /-,
`;function xW(e){let t=e.length;for(;t--;)if(!nRe.includes(e.charAt(t)))return!1;return!0}function sRe(e,t){const i=[];let r=0,n=-1;do if(n=e.indexOf("[",r),n>=r){if(n>r){const o=e.slice(r,n);i.push([o,null,xW(o)])}if(r=n+1,n=e.indexOf("]",r),n>=r){if(n>r){const o=t[e.slice(r,n)];o&&i.push([null,o,!1])}r=n+1}}while(n!==-1);if(r<e.length){const o=e.slice(r);i.push([o,null,xW(o)])}return i}function oRe(e,t,i,r){let n="",o=null;for(const u of t){const[f,g,b]=u;if(f)b?o=f:(o&&(n+=o,o=null),n+=f);else{let E=g;i!=null&&(E=Uue(g,i));const I=e.attributes[E];I&&(o&&(n+=o,o=null),n+=I)}}return aRe(n,r)}function aRe(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function hut(e,t,i,r,n,o,u=!0){const f=t/n,g=i/o,b=Math.ceil(f/2),E=Math.ceil(g/2);for(let I=0;I<o;I++)for(let M=0;M<n;M++){const k=4*(M+(u?o-I-1:I)*n);let L=0,P=0,D=0,j=0,z=0,V=0,W=0;const Q=(I+.5)*g;for(let Z=Math.floor(I*g);Z<(I+1)*g;Z++){const ee=Math.abs(Q-(Z+.5))/E,ie=(M+.5)*f,oe=ee*ee;for(let le=Math.floor(M*f);le<(M+1)*f;le++){let xe=Math.abs(ie-(le+.5))/b;const $e=Math.sqrt(oe+xe*xe);$e>=-1&&$e<=1&&(L=2*$e*$e*$e-3*$e*$e+1,L>0&&(xe=4*(le+Z*t),W+=L*e[xe+3],D+=L,e[xe+3]<255&&(L=L*e[xe+3]/250),j+=L*e[xe],z+=L*e[xe+1],V+=L*e[xe+2],P+=L))}}r[k]=j/P,r[k+1]=z/P,r[k+2]=V/P,r[k+3]=W/D}}function Due(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function jue(e){var t;return((t=e.data)==null?void 0:t.symbol)??null}function zue(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function Vue(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function dut(e){return e!=null&&(e.type==="CIMGradientFill"||e.type==="CIMHatchFill"||e.type==="CIMPictureFill"||e.type==="CIMSolidFill"||e.type==="CIMWaterFill")}function zT(e){return e!=null&&(e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices")}const put=(e,t=0)=>e==null||isNaN(e)?t:e,fut=(e,t)=>e??t,yut=(e,t)=>e??t,mut=e=>e.tintColor?Due(e.tintColor):[255,255,255,1],gut=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function vut(){return ce(()=>import("./geometryEngineJSON-B9tQWDOK.js").then(e=>e.g),__vite__mapDeps([5,6]),import.meta.url)}function wut(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function but(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function _ut(e){let t="normal",i="normal";if(e){const r=e.toLowerCase();r.includes("italic")?t="italic":r.includes("oblique")&&(t="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:t,weight:i}}function Sut(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function EW(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const i=EW(t);if(i!=null)return i}break;case"CIMTextSymbol":return EW(e.symbol);case"CIMSolidFill":return e.color}return null}function IW(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const i of t){const r=IW(i);if(r!=null)return r}break}case"CIMTextSymbol":return IW(e.symbol);case"CIMSolidStroke":return e.color}}function TW(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const i=TW(t);if(i!==void 0)return i}break;case"CIMTextSymbol":return TW(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function xut(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function Eut(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function lRe(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:typeof e[t]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const Iut=e=>e.includes("data:image/svg+xml");function Tut(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function VT(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function $ut(e,t,i,r,n,o,u=!0){const{infos:f}=o;let g=1,b=0,E=0,I=0,M=1;for(const{absoluteAnchorPoint:P,offsetX:D,offsetY:j,rotation:z,size:V,frameHeight:W,rotateClockWise:Q,scaleSymbolsProportionally:Z}of f)M=P?1:g,E=CW(D,j,b,M,E),I=MW(D,j,b,M,I),W&&(Z||u)&&(g*=V/W),b=AW(z,Q,b);const k=CW(r,n,b,M,E),L=MW(r,n,b,M,I);return{size:e*g,rotation:AW(t,i,b),offsetX:k,offsetY:L}}function uRe(e){if(e==null)return!1;if(Array.isArray(e))return e.every(t=>uRe(t));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function cRe(e,t){if(t==="color"||t==="outlinecolor"||t==="backgroundcolor"||t==="borderlinecolor"||t==="tintcolor")return[...iRe[t]];const i=RL[e];if(!i)throw new Error(`InternalError: default value for type ${e}.`);return i[t]}function hRe(e){return e.split(" ").map(t=>Number(t))}function dRe(e){return typeof e=="string"?hRe(e):e}function pRe(e){return e!=null&&e.dashTemplate&&(e.dashTemplate=dRe(e.dashTemplate)),e}function PL(e){if(e==null)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const i of t)if(i.type==="CIMVectorMarker")return PL(i)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const i of t)if(i.symbol)return PL(i.symbol)}}return"Normal"}function Mut(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers){for(const i of e.symbolLayers)if(i)switch(i.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const r=i.size??RL.CIMVectorMarker.size;r>t&&(t=r);break}}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers){for(const i of e.symbolLayers)if(i)switch(i.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const r=i.width;r!=null&&r>t&&(t=r);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(i.markerPlacement&&zT(i.markerPlacement)){const r=i.size??RL.CIMVectorMarker.size;r>t&&(t=r)}break;case"CIMPictureFill":{const r=i.height;r!=null&&r>t&&(t=r)}}}return t}}}function Uue(e,t){if(t!==null){const i=t.get(e);return i?i.name:e}return e}function fRe(e){return e.map(t=>({...t,propertyName:VT(t.propertyName)}))}function $W(e){const t={};for(const i in e){const r=e[i];t[VT(i)]=r}return t}function MW(e,t,i,r,n){const o=i*Math.PI/180;if(o){const u=Math.cos(o);return(Math.sin(o)*e+u*t)*r+n}return t*r+n}function CW(e,t,i,r,n){const o=i*Math.PI/180;return o?(Math.cos(o)*e-Math.sin(o)*t)*r+n:e*r+n}function AW(e,t,i){return t?i-e:i+e}function Cut(e,t,i){const r=i==="Color"||i==="TintColor"||i==="ToColor",n=i==="Rotation"||i==="Angle"||i==="ToRotation";let o=t[VT(i)];if(o!=null&&(r?o=[o[0]/255,o[1]/255,o[2]/255,o[3]/255]:n&&(o*=Math.PI/180)),o==null&&(o=cRe(t.type,i.toLowerCase()),o!=null&&(r?o=[o[0]/255,o[1]/255,o[2]/255,o[3]]:n&&(o*=Math.PI/180))),t.primitiveName!=null){const u=e[t.primitiveName];if(u!=null){const f=u[i];f==null||(typeof f=="string"||typeof f=="number"||Array.isArray(f)?(o=f,o!=null&&(r?o=[o[0]/255,o[1]/255,o[2]/255,o[3]/255]:n&&(o*=Math.PI/180))):(o={valueExpressionInfo:f,defaultValue:o},o!=null&&(r?o={type:"Process",op:"ArcadeColor",value:o}:n&&(o={type:"Process",op:"Divide",left:o,right:180/Math.PI}))))}}if(o==null)throw new Error(`Failed to derive a value or an expression for "${i}".`);return o}function Gue(e,t,i,r){if(e)if(e.type!=="CIMTextSymbol"){if(e.effects)for(const n of e.effects)gRe(n,t);if(e.symbolLayers)for(const n of e.symbolLayers)switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":yRe(n,t,r);break;case"CIMPictureStroke":case"CIMSolidStroke":!(r!=null&&r.preserveOutlineWidth)&&n.width&&(n.width*=t);break;case"CIMPictureFill":n.height&&(n.height*=t),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t);break;case"CIMHatchFill":Gue(n.lineSymbol,t,!0,{...r,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t),n.separation&&(n.separation*=t)}}else e.height!=null&&(e.height*=t)}function yRe(e,t,i){if(e&&(e.markerPlacement&&mRe(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&e.anchorPointUnits==="Absolute"&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=e.size!=null?e.size*t:0,e.type==="CIMVectorMarker"&&e.markerGraphics))for(const r of e.markerGraphics)e.scaleSymbolsProportionally||Gue(r.symbol,t,!0,i)}function mRe(e,t){switch(zT(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const i=e.placementTemplate.map(r=>r*t);e.placementTemplate=i}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const i=e.placementTemplate.map(r=>r*t);e.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}function gRe(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const i=e.dashTemplate.map(r=>r*t);e.dashTemplate=i}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function Bue(e){const t=[];return NL(jue(e),t),t.length?new Ne(Due(t[0])):null}function NL(e,t){var n;if(!e)return;let i;i=e.type==="CIMTextSymbol"?e.symbol:e;const r=e.type==="CIMPolygonSymbol";if(i!=null&&i.symbolLayers){for(const o of i.symbolLayers)if(!(o.colorLocked||r&&(Vue(o)||zue(o)&&o.markerPlacement&&zT(o.markerPlacement))))switch(o.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":o.tintColor&&kW(t,o.tintColor);break;case"CIMVectorMarker":(n=o.markerGraphics)==null||n.forEach(u=>{NL(u.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":kW(t,o.color);break;case"CIMHatchFill":NL(o.lineSymbol,t)}}}function kW(e,t){for(const i of e)if(i.join(".")===t.join("."))return;e.push(t)}function que(e,t,i){t instanceof Ne||(t=new Ne(t));const r=jue(e);r&&FL(r,t)}function FL(e,t,i){var o;if(!e)return;let r;r=e.type==="CIMTextSymbol"?e.symbol:e;const n=(r==null?void 0:r.type)==="CIMPolygonSymbol";if(r!=null&&r.symbolLayers)for(const u of r.symbolLayers){if(u.colorLocked||n&&(Vue(u)||zue(u)&&u.markerPlacement&&zT(u.markerPlacement)))continue;const f=t.toArray();switch(u.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":u.tintColor=f;break;case"CIMVectorMarker":(o=u.markerGraphics)==null||o.forEach(g=>{FL(g.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":u.color=f;break;case"CIMHatchFill":FL(u.lineSymbol,t)}}}const DL=-3,vRe=DL-1;var Oh;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(Oh||(Oh={}));let wRe=class{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new _y,this._users=new _y}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,i){this._removeFuncs.push([t,i])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(i=>i[0]!==t)}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,-1),this._checkSize()}getSize(t,i){const r=this._db.get(t.id+i);return(r==null?void 0:r.size)??0}put(t,i,r,n,o){i=t.id+i;const u=this._db.get(i);if(u&&(this._size-=u.size,t.size-=u.size,this._db.delete(i),u.entry!==r&&this._notifyRemove(i,u.entry,u.size,Oh.ALL)),n>this._maxSize)return void this._notifyRemove(i,r,n,Oh.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return console.warn(`Refusing to cache entry with size ${n} for key ${i}`),void this._notifyRemove(i,r,0,Oh.ALL);const f=1+Math.max(o,vRe)-DL;this._db.set(i,new bRe(r,n,f)),this._size+=n,t.size+=n,this._checkSize()}updateSize(t,i,r,n){i=t.id+i;const o=this._db.get(i);if(o&&o.entry===r){for(this._size-=o.size,t.size-=o.size;n>this._maxSize;){const u=this._notifyRemove(i,r,n,Oh.SOME);if(!(u!=null&&u>0))return void this._db.delete(i);n=u}o.size=n,this._size+=n,t.size+=n,this._checkSize()}}pop(t,i){i=t.id+i;const r=this._db.get(i);if(r)return this._size-=r.size,t.size-=r.size,this._db.delete(i),++this._hit,r.entry;++this._miss}get(t,i){i=t.id+i;const r=this._db.get(i);if(r!==void 0)return this._db.delete(i),r.lives=r.lifetime,this._db.set(i,r),++this._hit,r.entry;++this._miss}peek(t,i){const r=this._db.get(t.id+i);return r?++this._hit:++this._miss,r==null?void 0:r.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((u,f)=>{const g=u.lifetime;r[g]=(r[g]||0)+u.size,this._users.forAll(b=>{const{id:E,name:I}=b;if(f.startsWith(E)){const M=i[I]||0;i[I]=M+u.size}})});const n={};this._users.forAll(u=>{const f=u.name;if("hitRate"in u&&typeof u.hitRate=="number"&&!isNaN(u.hitRate)&&u.hitRate>0){const g=i[f]||0;i[f]=g,n[f]=Math.round(100*u.hitRate)+"%"}else n[f]="0%"});const o=Object.keys(i);o.sort((u,f)=>i[f]-i[u]),o.forEach(u=>t[u]=Math.round(i[u]/2**20)+"MB / "+n[u]);for(let u=r.length-1;u>=0;--u){const f=r[u];f&&(t["Priority "+(u+DL-1)]=Math.round(f/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){const i=t.id;this._db.forEach((r,n)=>{n.startsWith(i)&&(this._size-=r.size,this._db.delete(n),this._notifyRemove(n,r.entry,r.size,Oh.ALL))}),t.size=0}clearAll(){this._db.forEach((t,i)=>this._notifyRemove(i,t.entry,t.size,Oh.ALL)),this._users.forAll(t=>t.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,i,r,n){let o;return this._removeFuncs.some(u=>{if(t.startsWith(u[0])){const f=u[1](i,n,r);return typeof f=="number"&&(o=f),!0}return!1}),o}_checkSize(){this._users.forAll(t=>this._checkSizeLimits(t)),this._checkSizeLimits()}_checkSizeLimits(t){const i=t??this;if(i.maxSize<0||i.size<=i.maxSize)return;const r=t==null?void 0:t.id;let n=!0;for(;n;){n=!1;for(const[o,u]of this._db)if(u.lifetime===0&&(!r||o.startsWith(r))){if(this._purgeItem(o,u,t),i.size<=.9*i.maxSize)return;n||(n=this._db.has(o))}}for(const[o,u]of this._db)if((!r||o.startsWith(r))&&(this._purgeItem(o,u,t),i.size<=.9*i.maxSize))return}_purgeItem(t,i,r=this._users.find(n=>t.startsWith(n.id))){if(this._db.delete(t),i.lives<=1){this._size-=i.size,r&&(r.size-=i.size);const n=this._notifyRemove(t,i.entry,i.size,Oh.SOME);n!=null&&n>0&&(this._size+=n,r&&(r.size+=n),i.lives=i.lifetime,i.size=n,this._db.set(t,i))}else--i.lives,this._db.set(t,i)}},bRe=class{constructor(t,i,r){this.entry=t,this.size=i,this.lifetime=r,this.lives=r}},Hue=class{constructor(t,i){this._storage=new wRe,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),i&&this._storage.registerRemoveFunc("",i)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,i,r=1){this._storage.put(this,t,i,r,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}};const Wue="picture-fill",Zue="simple-fill",_Re="simple-line",Jue="simple-marker",SRe="text",xRe="cim",LW=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),h7=new Hue(1e3);function ERe(e){const t=e.style;let i=null;if(e)switch(e.type){case Jue:t!=="cross"&&t!=="x"&&(i=e.color);break;case Zue:t&&t!=="solid"?t!=="none"&&(i={type:"pattern",x:0,y:0,src:Vt(`esri/symbols/patterns/${t}.png`),width:5,height:5}):i=e.color;break;case Wue:i={type:"pattern",src:e.url,width:hr(e.width)*e.xscale,height:hr(e.height)*e.yscale,x:hr(e.xoffset),y:hr(e.yoffset)};break;case SRe:i=e.color;break;case xRe:i=Bue(e)}return i}function IRe(e,t){const i=e+"-"+t;return h7.get(i)!==void 0?Promise.resolve(h7.get(i)):Ct(e,{responseType:"image"}).then(r=>{const n=r.data,o=n.naturalWidth,u=n.naturalHeight,f=document.createElement("canvas");f.width=o,f.height=u;const g=f.getContext("2d");g.fillStyle=t,g.fillRect(0,0,o,u),g.globalCompositeOperation="destination-in",g.drawImage(n,0,0);const b=f.toDataURL();return h7.put(i,b),b})}function O_(e){if(!e)return null;let t=null;switch(e.type){case Zue:case Wue:case Jue:t=O_(e.outline);break;case _Re:{const i=hr(e.width);e.style!=null&&e.style!=="none"&&i!==0&&(t={color:e.color,style:dD(e.style),width:i,cap:e.cap,join:e.join==="miter"?hr(e.miterLimit):e.join},t.dashArray=Kue(t).join(",")||"none");break}default:t=null}return t}function Kue(e){if(!(e!=null&&e.style))return[];const{dashArray:t,style:i,width:r}=e;if(typeof t=="string"&&t!=="none")return t.split(",").map(u=>Number(u));const n=r??0,o=LW.has(i)?LW.get(i).map(u=>u*n):[];if(e.cap!=="butt")for(const[u,f]of o.entries())o[u]=u%2==1?f+n:Math.max(f-n,1);return o}const dD=(()=>{const e={};return t=>{if(e[t])return e[t];const i=t.replaceAll("-","");return e[t]=i,i}})(),TRe=new Ne([128,128,128]),$Re=new Ne("white");function MRe(e){var i,r;const t=(i=e.symbolLayers)==null?void 0:i.at(-1);if(t&&"outline"in t)return(r=t==null?void 0:t.outline)==null?void 0:r.size}function CRe(e){var t;if(!e)return 0;if(Pc(e)){const i=MRe(e);return i??0}return Uo((t=O_(e))==null?void 0:t.width)}function UT(e){if(e==null||!("symbolLayers"in e)||e.symbolLayers==null)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some(t=>t.type==="object");case"line-3d":return e.symbolLayers.some(t=>t.type==="path");case"polygon-3d":return e.symbolLayers.some(t=>t.type==="object"||t.type==="extrude");default:return!1}}function ARe(e){var t;return((t=e.resource)==null?void 0:t.href)??""}function Um(e,t){if(!e)return null;let i=null;return Pc(e)?i=kRe(e):bT(e)&&(i=e.type==="cim"?Bue(e):e.color?new Ne(e.color):null),i?R_(i,t):null}function kRe(e){const t=e.symbolLayers;if(!t)return null;let i=null;return t.forEach(r=>{var n;r.type==="object"&&((n=r.resource)!=null&&n.href)||(i=r.type==="water"?r.color:r.material?r.material.color:null)}),i?new Ne(i):null}function R_(e,t){if(t==null||e==null)return e;const i=e.toRgba();return i[3]=i[3]*t,new Ne(i)}function LRe(e,t,i){const r=e.symbolLayers;if(!r)return;const n=o=>R_(t=t??o??(i!=null?$Re:null),i);r.forEach(o=>{var u,f;if(o.type!=="object"||!((u=o.resource)!=null&&u.href)||t)if(o.type==="water")o.color=n(o.color);else{const g=o.material!=null?o.material.color:null,b=n(g);o.material==null?o.material=new Ro({color:b}):o.material.color=b,i!=null&&"outline"in o&&((f=o.outline)==null?void 0:f.color)!=null&&(o.outline.color=R_(o.outline.color,i))}})}function ORe(e,t,i){var r;(t=t??e.color)&&(e.color=R_(t,i)),i!=null&&"outline"in e&&((r=e.outline)!=null&&r.color)&&(e.outline.color=R_(e.outline.color,i))}function d7(e,t,i){e&&(t||i!=null)&&(t&&(t=new Ne(t)),Pc(e)?LRe(e,t,i):bT(e)&&ORe(e,t,i))}async function RRe(e,t){const i=e.symbolLayers;i&&await d_e(i,async r=>PRe(r,t))}async function PRe(e,t){switch(e.type){case"extrude":FRe(e,t);break;case"icon":case"line":case"text":NRe(e,t);break;case"path":jRe(e,t);break;case"object":await DRe(e,t)}}function NRe(e,t){const i=Yue(t);i!=null&&(e.size=i)}function Yue(e){for(const t of e)if(typeof t=="number")return t;return null}function FRe(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function DRe(e,t){const{resourceSize:i,symbolSize:r}=await zRe(e),n=Xue(t,i,r);e.width=k3(t[0],r[0],i[0],n),e.depth=k3(t[1],r[1],i[1],n),e.height=k3(t[2],r[2],i[2],n)}function jRe(e,t){const i=Xue(t,fne,[e.width,void 0,e.height]);e.width=k3(t[0],e.width,1,i),e.height=k3(t[2],e.height,1,i)}function Xue(e,t,i){for(let r=0;r<3;r++){const n=e[r];switch(n){case"symbol-value":{const o=i[r];return o!=null?o/t[r]:1}case"proportional":break;default:if(n&&t[r])return n/t[r]}}return 1}async function zRe(e){const{computeObjectLayerResourceSize:t}=await ce(()=>import("./symbolLayerUtils-B7BhenFm.js"),[],import.meta.url),i=await t(e,10),{width:r,height:n,depth:o}=e,u=[r,o,n];let f=1;for(let g=0;g<3;g++){const b=u[g];if(b!=null){f=b/i[g];break}}for(let g=0;g<3;g++)u[g]==null&&(u[g]=i[g]*f);return{resourceSize:i,symbolSize:u}}function k3(e,t,i,r){switch(e){case"proportional":return i*r;case"symbol-value":return t??i;default:return e}}function VRe(e,t){const i=Yue(t);if(i!=null)switch(e.type){case"simple-marker":e.size=i;break;case"picture-marker":{const r=e.width/e.height;r>1?(e.width=i,e.height=i*r):(e.width=i*r,e.height=i);break}case"simple-line":e.width=i;break;case"text":e.font.size=i}}async function URe(e,t){if(e&&t)return Pc(e)?RRe(e,t):void(bT(e)&&VRe(e,t))}function GRe(e,t,i){if(e&&t!=null)if(Pc(e)){const r=e.symbolLayers;r&&r.forEach(n=>{if(n.type==="object")switch(i){case"tilt":n.tilt=(n.tilt??0)+t;break;case"roll":n.roll=(n.roll??0)+t;break;default:n.heading=(n.heading??0)+t}n.type==="icon"&&(n.angle+=t)})}else bT(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle+=t))}function P_(e){if(!e)return null;const t=e.effects.filter(i=>i.type!=="bloom").map(i=>i.toJSON());return zI(t)}function Out(e){return e!=null&&e.type==="polygon-3d"&&e.symbolLayers.some(t=>t.type==="extrude")}async function BRe(e,t){return await e.fetchSymbol(t)||e.fetchCIMSymbol(t)}const Que="<",ece=">";function tce(e,t,i,r){let n="";return t===0?n=`${Que} `:t===i&&(n=`${ece} `),n+(r?iD(e,r):kOe(e))}const qRe=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function jL(e){if(!("visualVariables"in e)||!e.visualVariables)return null;const t=e.visualVariables.find(u=>u.type==="color");if(!t)return null;let i=null,r=null;if(t.stops){if(t.stops.length===1)return t.stops[0].color;i=t.stops[0].value,r=t.stops[t.stops.length-1].value}const n=i!=null&&r!=null?i+(r-i)/2:0,{getColor:o}=await ce(async()=>{const{getColor:u}=await Promise.resolve().then(()=>Im);return{getColor:u}},void 0,import.meta.url);return o(t,n)??null}async function ice(e,t){const i=e.trailCap,r=e.trailWidth||1,n=t||await jL(e)||e.color;return new us({cap:i,color:n,width:r})}function HRe(e,t){var i,r;if(!t.field)return null;if("featureReduction"in e)switch((i=e.featureReduction)==null?void 0:i.type){case"cluster":case"binning":{const n=e.featureReduction.fields.find(({name:o})=>o.toLowerCase()===t.field.toLowerCase());return n&&"getField"in e?e.getField(n.onStatisticField):null}}return"getField"in e?(r=e.getField)==null?void 0:r.call(e,t.field):null}function WRe(e,t){var r,n,o;const i="popupTemplate"in e?(r=e.popupTemplate)==null?void 0:r.fieldInfos:null;if(i!=null&&i.length&&t)return(o=(n=i.find(u=>{var f;return((f=u.fieldName)==null?void 0:f.toLowerCase())===t.toLowerCase()}))==null?void 0:n.format)==null?void 0:o.dateFormat}function ZRe(e,t,i){var o,u,f,g;const r=HRe(e,t);if(!r||!bue(r)&&!xF(r))return null;let n=WRe(e,r.name);if(!n&&r.type==="date"){let b=0,E=0;t.stops?(b=((u=(o=t.stops)==null?void 0:o.at(0))==null?void 0:u.value)??b,E=((g=(f=t.stops)==null?void 0:f.at(-1))==null?void 0:g.value)??E):"minDataValue"in t&&"maxDataValue"in t&&(b=t.minDataValue??b,E=t.maxDataValue??E),n=E-b>2*k8.days?"short-date":"short-date-short-time"}return{fieldType:r.type,format:n,timeZoneOptions:{layerTimeZone:"preferredTimeZone"in e?e.preferredTimeZone:null,viewTimeZone:i,datesInUnknownTimezone:"datesInUnknownTimezone"in e&&e.datesInUnknownTimezone}}}function zL(e){var t,i;if("authoringInfo"in e)return(i=(t=e.authoringInfo)==null?void 0:t.visualVariables)==null?void 0:i.find(({theme:r})=>r==="reference-size")}const JRe=new Ne([64,64,64]);function rce(e,t){const i=[],r=e.length-1;return e.length===5?i.push(0,2,4):i.push(0,r),e.map((n,o)=>i.includes(o)?tce(n,o,r,t):null)}async function VL(e,t,i){let r=!1,n=[],o=[];if(e.stops){const b=e.stops;n=b.map(E=>E.value),r=b.some(E=>!!E.label),r&&(o=b.map(E=>E.label))}const u=n[0],f=n[n.length-1];if(u==null&&f==null)return null;const g=r?null:rce(n,i);return(await Promise.all(n.map(async(b,E)=>({value:b,color:e.type==="opacity"?await KRe(b,e,t):(await ce(async()=>{const{getColor:I}=await Promise.resolve().then(()=>Im);return{getColor:I}},void 0,import.meta.url)).getColor(e,b),label:r?o[E]:(g==null?void 0:g[E])??""})))).reverse()}async function KRe(e,t,i){const r=new Ne(i??JRe),n=(await ce(async()=>{const{getOpacity:o}=await Promise.resolve().then(()=>Im);return{getOpacity:o}},void 0,import.meta.url)).getOpacity(t,e);return n!=null&&(r.a=n),r}function YRe(e){let t=!1,i=[],r=[];i=e.map(f=>f.value),t=e.some(f=>!!f.label),t&&(r=e.map(f=>f.label??""));const n=i[0],o=i[i.length-1];if(n==null&&o==null)return null;const u=t?null:rce(i);return i.map((f,g)=>({value:f,color:nce(f,e),label:t?r[g]:(u==null?void 0:u[g])??""})).reverse()}function nce(e,t){const{startIndex:i,endIndex:r,weight:n}=XRe(e,t);if(i===r)return t[i].color;const o=Ne.blendColors(t[i].color,t[r].color,n);return new Ne(o)}function XRe(e,t){let i=0,r=t.length-1;return t.some((n,o)=>e<n.value?(r=o,!0):(i=o,!1)),{startIndex:i,endIndex:r,weight:(e-t[i].value)/(t[r].value-t[i].value)}}function QRe(e,t){let i=[];if(e&&e.type==="multipart")e.colorRamps.reverse().forEach((r,n)=>{n===0?i.push({value:t.max,color:new Ne(r.toColor),label:"high"}):i.push({value:null,color:new Ne(r.toColor),label:""}),n===e.colorRamps.length-1?i.push({value:t.min,color:new Ne(r.fromColor),label:"low"}):i.push({value:null,color:new Ne(r.fromColor),label:""})});else{let r,n;e&&e.type==="algorithmic"?(r=e.fromColor,n=e.toColor):(r=[0,0,0,1],n=[255,255,255,1]),i=[{value:t.max,color:new Ne(n),label:"high"},{value:t.min,color:new Ne(r),label:"low"}]}return i}var UL;let Lb=UL=class extends be{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new UL({color:this.color&&this.color.clone(),ratio:this.ratio})}};m([w({type:Ne,json:{type:[Ot],default:null,write:!0}})],Lb.prototype,"color",void 0),m([w({type:Number,json:{write:!0}})],Lb.prototype,"ratio",void 0),Lb=UL=m([H("esri.renderers.support.HeatmapColorStop")],Lb);const L3=Lb;function sce(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter(r=>{var n;return((n=r.color)==null?void 0:n.a)>0});let i=t.length-1;if(t&&t[0]){const r=t[i];r&&r.ratio!==1&&(t.push(new L3({ratio:1,color:r.color})),i++)}return t.map((r,n)=>{var u,f;let o="";return n===0?o=((u=e.legendOptions)==null?void 0:u.minLabel)||"low":n===i&&(o=((f=e.legendOptions)==null?void 0:f.maxLabel)||"high"),{color:r.color,label:o,ratio:r.ratio}}).reverse()}X0("short-date");async function Ho(e,t,i){c2(e,t,()=>[]).push(...i)}async function ePe(e){var i,r;const t=new Map;if(!e)return t;if("visualVariables"in e&&e.visualVariables){const n=e.visualVariables.filter(o=>o.type==="color");for(const o of n){const u=(await VL(o)??[]).map(f=>f.color);await Ho(t,o.field||o.valueExpression,u)}}if(e.type==="heatmap"){const n=sce(e).map(o=>o.color);await Ho(t,e.field||e.valueExpression,n)}else if(e.type==="pie-chart"){for(const n of e.attributes)await Ho(t,n.field||n.valueExpression,[n.color]);await Ho(t,"default",[(i=e==null?void 0:e.othersCategory)==null?void 0:i.color,Um(e.backgroundFillSymbol,null)])}else if(e.type==="dot-density"){for(const n of e.attributes)await Ho(t,n.field||n.valueExpression,[n.color]);await Ho(t,"default",[e.backgroundColor])}else if(e.type==="unique-value")if(((r=e.authoringInfo)==null?void 0:r.type)==="predominance")for(const n of e.uniqueValueInfos??[])await Ho(t,n.value.toString(),[Um(n.symbol,null)]);else{const n=(e.uniqueValueInfos??[]).map(b=>Um(b.symbol,null)),{field:o,field2:u,field3:f,valueExpression:g}=e;(o||g)&&await Ho(t,o||g,n),u&&await Ho(t,u,n),f&&await Ho(t,f,n)}else if(e.type==="class-breaks"){const n=e.classBreakInfos.map(f=>Um(f.symbol,null)),{field:o,valueExpression:u}=e;await Ho(t,o??u,n)}else e.type==="simple"&&await Ho(t,"default",[Um(e.symbol,null)]);return"defaultSymbol"in e&&e.defaultSymbol&&await Ho(t,"default",[Um(e.defaultSymbol,null)]),t.forEach((n,o)=>{const u=iN(n.filter(Boolean),(f,g)=>JSON.stringify(f)===JSON.stringify(g));t.set(o,u)}),t}function oce(e){const t={};for(const i in e){if(i==="declaredClass")continue;const r=e[i];if(r!=null&&typeof r!="function")if(Array.isArray(r)){t[i]=[];for(let n=0;n<r.length;n++)t[i][n]=oce(r[n])}else typeof r=="object"?r.toJSON&&(t[i]=JSON.stringify(r)):t[i]=r}return t}var $p;(function(e){e[e.varint=0]="varint",e[e.fixed64=1]="fixed64",e[e.delimited=2]="delimited",e[e.fixed32=5]="fixed32",e[e.unknown=99]="unknown"})($p||($p={}));const OW=4294967296,tPe=new TextDecoder("utf-8"),iPe=we("safari")||we("ios")?6:we("ff")?12:32;let GL=class f4{constructor(t,i,r=0,n=t?t.byteLength:0){this._tag=0,this._dataType=$p.unknown,this._init(t,i,r,n)}_init(t,i,r,n){this._data=t,this._dataView=i,this._pos=r,this._end=n}asUnsafe(){return this}clone(){return new f4(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;if(t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128||(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)||(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)||(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)||(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128))return t;throw new Error("Varint overflow")}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)}getSInt64(){return this._decodeSVarint()}getBool(){const t=this._data[this._pos]!==0;return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getUint32(i+4,!0)*OW;return this._skip(8),r}getSFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getInt32(i+4,!0)*OW;return this._skip(8),r}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),i=this._pos,r=this._toString(this._data,i,i+t);return this._skip(t),r}getBytes(){const t=this._getLength(),i=this._pos,r=this._toBytes(this._data,i,i+t);return this._skip(t),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,i,r,n){const o=this.getMessage(),u=t(o,i,r,n);return o.release(),u}processMessage(t){const i=this.getMessage(),r=t(i);return i.release(),r}getMessage(){const t=this._getLength(),i=f4.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),i}release(){f4.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case $p.varint:this._decodeVarint();break;case $p.fixed64:this._skip(8);break;case $p.delimited:this._skip(this._getLength());break;case $p.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let i=this._pos,r=0,n=0;if(this._end-i>=10)do{if(n=t[i++],r|=127&n,!(128&n)||(n=t[i++],r|=(127&n)<<7,!(128&n))||(n=t[i++],r|=(127&n)<<14,!(128&n))||(n=t[i++],r|=(127&n)<<21,!(128&n))||(n=t[i++],r+=268435456*(127&n),!(128&n))||(n=t[i++],r+=34359738368*(127&n),!(128&n))||(n=t[i++],r+=4398046511104*(127&n),!(128&n))||(n=t[i++],r+=562949953421312*(127&n),!(128&n))||(n=t[i++],r+=72057594037927940*(127&n),!(128&n))||(n=t[i++],r+=9223372036854776e3*(127&n),!(128&n)))break;throw new Error("Varint too long!")}while(!1);else{let o=1;for(;i!==this._end&&(n=t[i],128&n);)++i,r+=(127&n)*o,o*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=n*o}return this._pos=i,r}_decodeSVarint(){const t=this._data;let i,r=0,n=0;const o=1&t[this._pos];if(n=t[this._pos++],r|=127&n,!(128&n)||(n=t[this._pos++],r|=(127&n)<<7,!(128&n))||(n=t[this._pos++],r|=(127&n)<<14,!(128&n))||(n=t[this._pos++],r|=(127&n)<<21,!(128&n))||(n=t[this._pos++],r+=268435456*(127&n),!(128&n))||(n=t[this._pos++],r+=34359738368*(127&n),!(128&n))||(n=t[this._pos++],r+=4398046511104*(127&n),!(128&n)))return o?-(r+1)/2:r/2;if(i=BigInt(r),n=t[this._pos++],i+=0x2000000000000n*BigInt(127&n),!(128&n)||(n=t[this._pos++],i+=0x100000000000000n*BigInt(127&n),!(128&n))||(n=t[this._pos++],i+=0x8000000000000000n*BigInt(127&n),!(128&n)))return Number(o?-(i+1n)/2n:i/2n);throw new Error("Varint too long!")}_getLength(){if(this._dataType!==$p.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,i,r){if((r=Math.min(this._end,r))-i>iPe){const u=t.subarray(i,r);return tPe.decode(u)}let n="",o="";for(let u=i;u<r;++u){const f=t[u];128&f?o+="%"+f.toString(16):(n+=decodeURIComponent(o)+String.fromCharCode(f),o="")}return o.length&&(n+=decodeURIComponent(o)),n}_toBytes(t,i,r){return r=Math.min(this._end,r),new Uint8Array(t.buffer,i,r-i)}};GL.pool=new $f(GL,void 0,e=>{e._data=null,e._dataView=null});const p7=2;let N_=class k1{constructor(t=[],i=[]){this.lengths=t??[],this.coords=i??[]}static fromJSON(t){return new k1(t.lengths,t.coords)}static fromRect(t){const[i,r,n,o]=t,u=n-i,f=o-r;return new k1([5],[i,r,u,0,0,f,-u,0,0,-f])}get isPoint(){return this.lengths.length===0&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,i)=>t+i)}forEachVertex(t){let i=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];for(let o=0;o<n;o++)t(this.coords[p7*(o+i)],this.coords[p7*(o+i)+1]);i+=n}}deltaDecode(){const t=this.clone(),{coords:i,lengths:r}=t;let n=0;for(const o of r){for(let u=1;u<o;u++)i[2*(n+u)]+=i[2*(n+u)-2],i[2*(n+u)+1]+=i[2*(n+u)-1];n+=o}return t}clone(t){if(this.lengths.length===0)return new k1([],[this.coords[0],this.coords[1]]);const i=(this.lengths.length===0?1:this.lengths.reduce((n,o)=>n+o))*p7,r=this.coords.slice(0,i);return t?(t.set(r),new k1(this.lengths,t)):new k1(Array.from(this.lengths),Array.from(r))}},rPe=class y4{constructor(t=null,i={},r,n){this.geometry=t,this.attributes=i,this.centroid=r,this.objectId=n,this.displayId=0,this.geohashX=0,this.geohashY=0}static fromJSON(t,i){const r=t.geometry?N_.fromJSON(t.geometry):null,n=t.centroid?N_.fromJSON(t.centroid):null,o=t.attributes[i];return new y4(r,t.attributes,n,o)}weakClone(){const t=new y4(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}clone(){var r,n;const t=(r=this.geometry)==null?void 0:r.clone(),i=new y4(t,{...this.attributes},(n=this.centroid)==null?void 0:n.clone(),this.objectId);return i.displayId=this.displayId,i.geohashX=this.geohashX,i.geohashY=this.geohashY,i}};function nPe(e){var t,i;return!!((i=(t=e.geometry)==null?void 0:t.coords)!=null&&i.length)}let sPe=class ace{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new ace;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}};const lce=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let Rut=class{constructor(t){this._options=t,this.geometryTypes=lce,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new sPe}prepareFeatures(t){this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++}finishFeatureResult(t){if(!(t!=null&&t.features)||!t.hasZ||!this._options.sourceSpatialReference||!t.spatialReference||pr(t.spatialReference,this._options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const i=Rv(this._options.sourceSpatialReference)/Rv(t.spatialReference);if(i!==1)for(const r of t.features){if(!nPe(r))continue;const n=r.geometry.coords;for(let o=2;o<n.length;o+=3)n[o]*=i}}addFeature(t,i){t.features.push(i)}createFeature(){return new rPe}createSpatialReference(){return{wkid:0}}createGeometry(){return new N_}addField(t,i){t.fields.push(i)}allocateCoordinates(t){t.coords.length=t.lengths.reduce((i,r)=>i+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(t,i){t.coords[this._coordinatePtr++]=i}addCoordinatePoint(t,i){t.coords.push(i)}addLength(t,i){t.lengths.push(i)}addQueryGeometry(t,i){t.queryGeometry=i.queryGeometry,t.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new N_}};const RW=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],PW=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],NW=["upperLeft","lowerLeft"];function FW(e){return e>=RW.length?null:RW[e]}function oPe(e){return e>=PW.length?null:PW[e]}function DW(e){return e>=NW.length?null:NW[e]}function jW(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function aPe(e,t,i){const n=e.asUnsafe(),o=t.createPointGeometry(i);for(;n.next();)switch(n.tag()){case 3:{const u=n.getUInt32(),f=n.pos()+u;let g=0;for(;n.pos()<f;)t.addCoordinatePoint(o,n.getSInt64(),g++);break}default:n.skip()}return o}function lPe(e,t,i){const o=e.asUnsafe(),u=t.createGeometry(i),f=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;o.next();)switch(o.tag()){case 2:{const g=o.getUInt32(),b=o.pos()+g;let E=0;for(;o.pos()<b;)t.addLength(u,o.getUInt32(),E++);break}case 3:{const g=o.getUInt32(),b=o.pos()+g;let E=0;for(t.allocateCoordinates(u);o.pos()<b;)t.addCoordinate(u,o.getSInt64(),E),E++,E===f&&(E=0);break}default:o.skip()}return u}function uPe(e){const n=e.asUnsafe(),o=new N_;let u="esriGeometryPoint";for(;n.next();)switch(n.tag()){case 2:{const f=n.getUInt32(),g=n.pos()+f;for(;n.pos()<g;)o.lengths.push(n.getUInt32());break}case 3:{const f=n.getUInt32(),g=n.pos()+f;for(;n.pos()<g;)o.coords.push(n.getSInt64());break}case 1:u=lce[n.getEnum()];break;default:n.skip()}return{queryGeometry:o,queryGeometryType:u}}function cPe(e){const E=e.asUnsafe();for(;E.next();)switch(E.tag()){case 1:return E.getString();case 2:return E.getFloat();case 3:return E.getDouble();case 4:return E.getSInt32();case 5:return E.getUInt32();case 6:return E.getInt64();case 7:return E.getUInt64();case 8:return E.getSInt64();case 9:return E.getBool();default:return E.skip(),null}return null}function hPe(e){const f=e.asUnsafe(),g={type:FW(0)};for(;f.next();)switch(f.tag()){case 1:g.name=f.getString();break;case 2:g.type=FW(f.getEnum());break;case 3:g.alias=f.getString();break;case 4:g.sqlType=oPe(f.getEnum());break;case 5:f.skip();break;case 6:g.defaultValue=f.getString();break;default:f.skip()}return g}function dPe(e){const r={},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:r.name=n.getString();break;case 2:r.isSystemMaintained=n.getBool();break;default:n.skip()}return r}function pPe(e,t,i,r){const f=t.createFeature(i);let g=0;for(;e.next();)switch(e.tag()){case 1:{const b=r[g++].name;f.attributes[b]=e.processMessage(cPe);break}case 2:f.geometry=e.processMessageWithArgs(lPe,t,i);break;case 4:f.centroid=e.processMessageWithArgs(aPe,t,i);break;default:e.skip()}return f}function fPe(e){const o=[1,1,1,1],u=e.asUnsafe();for(;u.next();)switch(u.tag()){case 1:o[0]=u.getDouble();break;case 2:o[1]=u.getDouble();break;case 4:o[2]=u.getDouble();break;case 3:o[3]=u.getDouble();break;default:u.skip()}return o}function yPe(e){const o=[0,0,0,0],u=e.asUnsafe();for(;u.next();)switch(u.tag()){case 1:o[0]=u.getDouble();break;case 2:o[1]=u.getDouble();break;case 4:o[2]=u.getDouble();break;case 3:o[3]=u.getDouble();break;default:u.skip()}return o}function mPe(e){const n={originPosition:DW(0)},o=e.asUnsafe();for(;o.next();)switch(o.tag()){case 1:n.originPosition=DW(o.getEnum());break;case 2:n.scale=o.processMessage(fPe);break;case 3:n.translate=o.processMessage(yPe);break;default:o.skip()}return n}function gPe(e){const n={},o=e.asUnsafe();for(;o.next();)switch(o.tag()){case 1:n.shapeAreaFieldName=o.getString();break;case 2:n.shapeLengthFieldName=o.getString();break;case 3:n.units=o.getString();break;default:o.skip()}return n}function vPe(e,t){const f=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:f.wkid=e.getUInt32();break;case 5:f.wkt=e.getString();break;case 2:f.latestWkid=e.getUInt32();break;case 3:f.vcsWkid=e.getUInt32();break;case 4:f.latestVcsWkid=e.getUInt32();break;default:e.skip()}return f}function wPe(e,t){const P=t.createFeatureResult(),D=e.asUnsafe();P.geometryType=jW(t,0);let j=!1;for(;D.next();)switch(D.tag()){case 1:P.objectIdFieldName=D.getString();break;case 3:P.globalIdFieldName=D.getString();break;case 4:P.geohashFieldName=D.getString();break;case 5:P.geometryProperties=D.processMessage(gPe);break;case 7:P.geometryType=jW(t,D.getEnum());break;case 8:P.spatialReference=D.processMessageWithArgs(vPe,t);break;case 10:P.hasZ=D.getBool();break;case 11:P.hasM=D.getBool();break;case 12:P.transform=D.processMessage(mPe);break;case 9:P.exceededTransferLimit=D.getBool();break;case 13:t.addField(P,D.processMessage(hPe));break;case 15:j||(t.prepareFeatures(P),j=!0),t.addFeature(P,D.processMessageWithArgs(pPe,t,P,P.fields));break;case 2:P.uniqueIdField=D.processMessage(dPe);break;default:D.skip()}return t.finishFeatureResult(P),P}function bPe(e,t){const n={};let o=null;for(;e.next();)switch(e.tag()){case 4:o=e.processMessageWithArgs(uPe);break;case 1:n.featureResult=e.processMessageWithArgs(wPe,t);break;default:e.skip()}return o!=null&&n.featureResult&&t.addQueryGeometry(n,o),n}function _Pe(e,t){try{const r=new GL(new Uint8Array(e),new DataView(e)),n={};for(;r.next();)r.tag()===2?n.queryResult=r.processMessageWithArgs(bPe,t):r.skip();return n}catch(i){throw new ne("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function SPe(e,t){const i=_Pe(e,t),r=i.queryResult.featureResult,n=i.queryResult.queryGeometry,o=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const u=r.objectIdFieldName;for(const f of r.features)f.attributes&&(f.objectId=f.attributes[u])}return r&&(r.queryGeometry=n,r.queryGeometryType=o),r}function BL(e,t,i){if(!(i!=null&&i.features)||!i.hasZ)return;const r=bne(i.geometryType,t,e.outSpatialReference);if(r!=null)for(const n of i.features)r(n.geometry)}const zW="Layer does not support extent calculation.";function xPe(e,t){if(t&&e.type==="extent")return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&e.type==="point")return`${e.x},${e.y}`;const i=e.toJSON();return delete i.spatialReference,JSON.stringify(i)}function EPe(e,t){var g;const i=e.geometry,r=e.toJSON();delete r.compactGeometryEnabled,delete r.defaultSpatialReferenceEnabled;const n=r;let o,u,f;if(i!=null&&(u=i.spatialReference,f=Ov(u),n.geometryType=b2(i),n.geometry=xPe(i,e.compactGeometryEnabled),n.inSR=f),r.groupByFieldsForStatistics&&(n.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(n.objectIds=r.objectIds.join(",")),r.orderByFields&&(n.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&(t!=null&&t.returnCountOnly||t!=null&&t.returnExtentOnly||t!=null&&t.returnIdsOnly)?delete n.outFields:r.outFields.includes("*")?n.outFields="*":n.outFields=r.outFields.join(","),r.outSR?(n.outSR=Ov(r.outSR),o=e.outSpatialReference):i&&(r.returnGeometry||r.returnCentroid)&&(n.outSR=n.inSR,o=u),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(n.outStatistics=JSON.stringify(r.outStatistics)),r.fullText&&(n.fullText=JSON.stringify(r.fullText)),r.pixelSize&&(n.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&u!=null&&((g=e.quantizationParameters)==null?void 0:g.extent)!=null&&u.equals(e.quantizationParameters.extent.spatialReference)&&delete r.quantizationParameters.extent.spatialReference,n.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(n.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(n.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(n.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){const b=r.timeExtent,{start:E,end:I}=b;E==null&&I==null||(n.time=E===I?E:`${E??"null"},${I??"null"}`),delete r.timeExtent}return e.defaultSpatialReferenceEnabled&&u!=null&&o!=null&&u.equals(o)&&(n.defaultSR=n.inSR,delete n.inSR,delete n.outSR),n}async function IPe(e,t,i,r){const n=t.timeExtent!=null&&t.timeExtent.isEmpty?{data:{features:[]}}:await RS(e,t,"json",r);return BL(t,i,n.data),n}async function Nut(e,t,i,r){if(t.timeExtent!=null&&t.timeExtent.isEmpty)return{data:i.createFeatureResult()};const n=await TPe(e,t,r),o=n;return o.data=SPe(n.data,i),o}function TPe(e,t,i){return RS(e,t,"pbf",i)}function Fut(e,t,i){return t.timeExtent!=null&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):RS(e,t,"json",i,{returnIdsOnly:!0})}function Dut(e,t,i){return t.timeExtent!=null&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):RS(e,t,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}async function jut(e,t,i){if(t.timeExtent!=null&&t.timeExtent.isEmpty)return{data:{count:0,extent:null}};const r=await RS(e,t,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}),n=r.data;if(n.hasOwnProperty("extent"))return r;if(n.features)throw new Error(zW);if(n.hasOwnProperty("count"))throw new Error(zW);return r}async function RS(e,t,i,r={},n={}){const o=typeof e=="string"?_r(e):e,u=t.geometry?[t.geometry]:[],f=await Oae(u,null,{signal:r.signal}),g=f==null?void 0:f[0];g!=null&&((t=t.clone()).geometry=g);const b=oce({...o.query,f:i,...n,...EPe(t,n)});return Ct(By(o.path,$Pe(t,n)?"query3d":"query"),{...r,responseType:i==="pbf"?"array-buffer":"json",query:{...b,...r.query}})}function $Pe(e,t){return e.formatOf3DObjects!=null&&!(t.returnCountOnly||t.returnExtentOnly||t.returnIdsOnly)}var qL;const HL=new gt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let In=qL=class extends be{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){var n;const i=st.fromJSON(t.spatialReference),r=[];for(let o=0;o<e.length;o++){const u=e[o],f=qi.fromJSON(u),g=(n=u.geometry)==null?void 0:n.spatialReference;f.geometry==null||g||(f.geometry.spatialReference=i);const b=u.aggregateGeometries,E=f.aggregateGeometries;if(b&&E!=null)for(const I in E){const M=E[I],k=b[I],L=k==null?void 0:k.spatialReference;M==null||L||(M.spatialReference=i)}r.push(f)}return r}writeGeometryType(e,t,i,r){if(e)return void HL.write(e,t,i,r);const{features:n}=this;if(n){for(const o of n)if((o==null?void 0:o.geometry)!=null)return void HL.write(o.geometry.type,t,i,r)}}readQueryGeometry(e,t){if(!e)return null;const i=!!e.spatialReference,r=od(e);return r&&!i&&t.spatialReference&&(r.spatialReference=st.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(t.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new qL(this.cloneProperties())}cloneProperties(){return he({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let i=0;i<t.features.length;i++){const r=t.features[i];if(r.geometry){const n=e==null?void 0:e[i];r.geometry=(n==null?void 0:n.toJSON())||r.geometry}}return t}quantize(e){const{scale:[t,i],translate:[r,n]}=e,o=b=>Math.round((b-r)/t),u=b=>Math.round((n-b)/i),f=this.features,g=this._getQuantizationFunction(this.geometryType,o,u);for(let b=0,E=f.length;b<E;b++)g!=null&&g(f[b].geometry)||(f.splice(b,1),b--,E--);return this.transform=e,this}unquantize(){var M,k;const{geometryType:e,features:t,transform:i}=this;if(!i)return this;const{translate:[r,n],scale:[o,u]}=i,f=L=>L*o+r,g=L=>n-L*u;let b=null,E=null;if(this.hasZ&&((M=i==null?void 0:i.scale)==null?void 0:M[2])!=null){const{translate:[,,L],scale:[,,P]}=i;b=D=>D*P+L}if(this.hasM&&((k=i==null?void 0:i.scale)==null?void 0:k[3])!=null){const{translate:[,,,L],scale:[,,,P]}=i;E=D=>D==null?D:D*P+L}const I=this._getHydrationFunction(e,f,g,b,E);for(const{geometry:L}of t)L!=null&&I&&I(L);return this.transform=null,this}_quantizePoints(e,t,i){let r,n;const o=[];for(let u=0,f=e.length;u<f;u++){const g=e[u];if(u>0){const b=t(g[0]),E=i(g[1]);b===r&&E===n||(o.push([b-r,E-n]),r=b,n=E)}else r=t(g[0]),n=i(g[1]),o.push([r,n])}return o.length>0?o:null}_getQuantizationFunction(e,t,i){return e==="point"?r=>(r.x=t(r.x),r.y=i(r.y),r):e==="polyline"||e==="polygon"?r=>{const n=Ey(r)?r.rings:r.paths,o=[];for(let u=0,f=n.length;u<f;u++){const g=n[u],b=this._quantizePoints(g,t,i);b&&o.push(b)}return o.length>0?(Ey(r)?r.rings=o:r.paths=o,r):null}:e==="multipoint"?r=>{const n=this._quantizePoints(r.points,t,i);return n&&n.length>0?(r.points=n,r):null}:e==="extent"?r=>r:null}_getHydrationFunction(e,t,i,r,n){return e==="point"?o=>{o.x=t(o.x),o.y=i(o.y),r&&(o.z=r(o.z))}:e==="polyline"||e==="polygon"?o=>{const u=Ey(o)?o.rings:o.paths;let f,g;for(let b=0,E=u.length;b<E;b++){const I=u[b];for(let M=0,k=I.length;M<k;M++){const L=I[M];M>0?(f+=L[0],g+=L[1]):(f=L[0],g=L[1]),L[0]=t(f),L[1]=i(g)}}if(r&&n)for(let b=0,E=u.length;b<E;b++){const I=u[b];for(let M=0,k=I.length;M<k;M++){const L=I[M];L[2]=r(L[2]),L[3]=n(L[3])}}else if(r)for(let b=0,E=u.length;b<E;b++){const I=u[b];for(let M=0,k=I.length;M<k;M++){const L=I[M];L[2]=r(L[2])}}else if(n)for(let b=0,E=u.length;b<E;b++){const I=u[b];for(let M=0,k=I.length;M<k;M++){const L=I[M];L[2]=n(L[2])}}}:e==="extent"?o=>{o.xmin=t(o.xmin),o.ymin=i(o.ymin),o.xmax=t(o.xmax),o.ymax=i(o.ymax),r&&o.zmax!=null&&o.zmin!=null&&(o.zmax=r(o.zmax),o.zmin=r(o.zmin)),n&&o.mmax!=null&&o.mmin!=null&&(o.mmax=n(o.mmax),o.mmin=n(o.mmin))}:e==="multipoint"?o=>{const u=o.points;let f,g;for(let b=0,E=u.length;b<E;b++){const I=u[b];b>0?(f+=I[0],g+=I[1]):(f=I[0],g=I[1]),I[0]=t(f),I[1]=i(g)}if(r&&n)for(let b=0,E=u.length;b<E;b++){const I=u[b];I[2]=r(I[2]),I[3]=n(I[3])}else if(r)for(let b=0,E=u.length;b<E;b++){const I=u[b];I[2]=r(I[2])}else if(n)for(let b=0,E=u.length;b<E;b++){const I=u[b];I[2]=n(I[2])}}:null}};m([w({type:String,json:{write:!0}})],In.prototype,"displayFieldName",void 0),m([w({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],In.prototype,"exceededTransferLimit",void 0),m([w({type:[qi],json:{write:!0}})],In.prototype,"features",void 0),m([ke("features")],In.prototype,"readFeatures",null),m([w({type:[ET],json:{write:!0}})],In.prototype,"fields",void 0),m([w({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:HL.read}}})],In.prototype,"geometryType",void 0),m([Pe("geometryType")],In.prototype,"writeGeometryType",null),m([w({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],In.prototype,"hasM",void 0),m([w({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],In.prototype,"hasZ",void 0),m([w({types:mm,json:{write:!0}})],In.prototype,"queryGeometry",void 0),m([ke("queryGeometry")],In.prototype,"readQueryGeometry",null),m([w({type:st,json:{write:!0}})],In.prototype,"spatialReference",void 0),m([Pe("spatialReference")],In.prototype,"writeSpatialReference",null),m([w({json:{write:!0}})],In.prototype,"transform",void 0),In=qL=m([H("esri.rest.support.FeatureSet")],In),In.prototype.toJSON.isDefaultToJSON=!0;const pD=In;async function f7(e,t,i){const r=await MPe(e,t,i);return pD.fromJSON(r)}async function MPe(e,t,i){const r=R2(e),n={...i},o=ss.from(t),{data:u}=await IPe(r,o,o.sourceSpatialReference,n);return u}var WL;let nr=WL=class extends be{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new WL(he({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};m([w({type:Boolean,json:{write:!0}})],nr.prototype,"cacheHint",void 0),m([w({type:ru,json:{write:!0}})],nr.prototype,"dynamicDataSource",void 0),m([w({type:String,json:{write:!0}})],nr.prototype,"gdbVersion",void 0),m([w({type:Number,json:{write:!0}})],nr.prototype,"geometryPrecision",void 0),m([w({type:Date})],nr.prototype,"historicMoment",void 0),m([Pe("historicMoment")],nr.prototype,"_writeHistoricMoment",null),m([w({type:Number,json:{write:!0}})],nr.prototype,"maxAllowableOffset",void 0),m([w({json:{write:!0}})],nr.prototype,"objectIds",void 0),m([w({type:[String],json:{write:!0}})],nr.prototype,"orderByFields",void 0),m([w({type:[String],json:{write:!0}})],nr.prototype,"outFields",void 0),m([w({type:st,json:{read:{source:"outSR"},write:{target:"outSR"}}})],nr.prototype,"outSpatialReference",void 0),m([w({json:{write:!0}})],nr.prototype,"relationshipId",void 0),m([w({type:Number,json:{read:{source:"resultOffset"}}})],nr.prototype,"start",void 0),m([Pe("start"),Pe("num")],nr.prototype,"writeStart",null),m([w({type:Number,json:{read:{source:"resultRecordCount"}}})],nr.prototype,"num",void 0),m([w({json:{write:!0}})],nr.prototype,"returnGeometry",void 0),m([w({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],nr.prototype,"returnM",void 0),m([w({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],nr.prototype,"returnZ",void 0),m([w({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],nr.prototype,"where",void 0),nr=WL=m([H("esri.rest.support.RelationshipQuery")],nr),nr.from=ir(nr);const Yv=nr,zut=Object.freeze(Object.defineProperty({__proto__:null,default:Yv},Symbol.toStringTag,{value:"Module"})),CPe="esri.widgets.Feature.support.relatedFeatureUtils",VW=()=>Se.getLogger(CPe),UW=new Map;function m4(e){if(!Zh(e))return null;const[t,i]=e.split("/").slice(1);return{layerId:t,fieldName:i}}function APe(e,t){if(!t.relationships)return null;let i=null;const{relationships:r}=t;return r.some(n=>n.id===parseInt(e,10)&&(i=n,!0)),i}function kPe({originRelationship:e,relationships:t,layerId:i}){return t.find(({relatedTableId:r,id:n})=>`${r}`===i&&n===(e==null?void 0:e.id))??null}function LPe(e,t){const i=t.toLowerCase();for(const r in e)if(r.toLowerCase()===i)return e[r];return null}function OPe(e,t){const i=APe(e,t);if(i)return{url:`${t.url}/${i.relatedTableId}`,sourceSpatialReference:t.spatialReference,relation:i,relatedFields:[],outStatistics:[]}}function RPe(e,t){if(!t||!e)return;const{features:i,statsFeatures:r}=e,n=i==null?void 0:i.value;t.relatedFeatures=n?n.features:[];const o=r==null?void 0:r.value;t.relatedStatsFeatures=o?o.features:[]}function PPe(e,t,i,r){var o;const n=new Yv;return n.outFields=["*"],n.relationshipId=typeof t.id=="number"?t.id:parseInt(t.id,10),n.objectIds=[e.attributes[i.objectIdField]],n.gdbVersion=i.gdbVersion??null,n.historicMoment=i.historicMoment??null,((o=i.queryRelatedFeatures)==null?void 0:o.call(i,n,r))??Promise.resolve({})}function NPe(e,t,i){let r=0;const n=[];for(;r<t.length;)n.push(`${e} IN (${t.slice(r,i+r)})`),r+=i;return n.join(" OR ")}function FPe(e){return e?iN(e):void 0}function DPe(e){return e?iN(e,(t,i)=>JSON.stringify(t.toJSON())===JSON.stringify(i.toJSON())):void 0}async function jPe(e,t,i,r){const n=i.layerId.toString(),{layerInfo:o,relation:u,relatedFields:f,outStatistics:g,url:b,sourceSpatialReference:E}=t,I=FPe(f),M=DPe(g);if(!o||!u)return null;const k=kPe({originRelationship:u,relationships:o.relationships,layerId:n});if(k!=null&&k.relationshipTableId&&k.keyFieldInRelationshipTable){const P=(await PPe(e,k,i,r))[e.attributes[i.objectIdField]];if(!P)return null;const D=P.features.map(j=>j.attributes[o.objectIdField]);if(M!=null&&M.length&&o.supportsStatistics){const j=new ss;j.where=NPe(o.objectIdField,D,1e3),j.outFields=I,j.outStatistics=M,j.sourceSpatialReference=E;const z={features:Promise.resolve(P),statsFeatures:f7(b,j)};return Lo(z)}}const L=k==null?void 0:k.keyField;if(L){const P=SF(BPe(o.fields,L)),D=LPe(e.attributes,u.keyField),j=P?`${L}=${D}`:`${L}='${D}'`,z=i.historicMoment,V=i.gdbVersion,W=f7(b,new ss({where:j,outFields:I,sourceSpatialReference:E,historicMoment:z,gdbVersion:V}),r),Q=M!=null&&M.length&&o.supportsStatistics?f7(b,new ss({where:j,outFields:I,outStatistics:M,sourceSpatialReference:E}),r):null,Z={features:W};return Q&&(Z.statsFeatures=Q),Lo(Z)}return null}function zPe(e,t){return Ct(e,{query:{f:"json"},signal:t==null?void 0:t.signal})}function VPe({relatedInfos:e,layer:t},i){const r={};return e.forEach((n,o)=>{const{relation:u}=n;if(!u){const I=new ne("relation-required","A relation is required on a layer to retrieve related records.");throw VW().error(I),I}const{relatedTableId:f}=u;if(typeof f!="number"){const I=new ne("A related table ID is required on a layer to retrieve related records.");throw VW().error(I),I}const g=`${t.url}/${f}`,b=UW.get(g),E=b??zPe(g);b||UW.set(g,E),r[o]=E}),N6(Lo(r),i)}function UPe({graphic:e,relatedInfos:t,layer:i},r){const n={};return t.forEach((o,u)=>{o.layerInfo&&(n[u]=jPe(e,o,i,r))}),Lo(n)}function GPe({relatedInfo:e,fieldName:t,fieldInfo:i}){var r,n;if((r=e.relatedFields)==null||r.push(t),i.statisticType){const o=new Koe({statisticType:i.statisticType,onStatisticField:t,outStatisticFieldName:t});(n=e.outStatistics)==null||n.push(o)}}function BPe(e,t){if(e!=null){t=t.toLowerCase();for(const i of e)if(i&&i.name.toLowerCase()===t)return i}return null}const GW={chartAnimation:!0};let Jr=class extends De{constructor(t){super(t),this.abilities={...GW},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.isAggregate=!1,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(t){return{...GW,...t}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(t){this._setContentElementMedia(t)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(t){const{formattedMediaInfoCount:i}=this,r=(t+i)%i;this.activeMediaInfoIndex=r}_pageContentElementMedia(t){const{activeMediaInfoIndex:i}=this,r=i+t;this._setContentElementMedia(r)}_formatMediaInfos(){const{mediaInfos:t,layer:i}=this,r=this.attributes??{},n=this.formattedAttributes??{},o=this.expressionAttributes??{},u=this.fieldInfoMap??new Map;return(t==null?void 0:t.map(f=>{const g=f==null?void 0:f.clone();return g?(g.title=gy({attributes:r,fieldInfoMap:u,globalAttributes:n,expressionAttributes:o,layer:i,text:g.title}),g.caption=gy({attributes:r,fieldInfoMap:u,globalAttributes:n,expressionAttributes:o,layer:i,text:g.caption}),g.altText=gy({attributes:r,fieldInfoMap:u,globalAttributes:n,expressionAttributes:o,layer:i,text:g.altText}),g.type==="image"?g.value?(this._setImageValue({value:g.value,formattedAttributes:n,layer:i}),g.value.sourceURL?g:void 0):void 0:g.type==="pie-chart"||g.type==="line-chart"||g.type==="column-chart"||g.type==="bar-chart"?g.value?(this._setChartValue({value:g.value,chartType:g.type,attributes:r,formattedAttributes:n,layer:i,expressionAttributes:o}),g):void 0:null):null}).filter(cr))??[]}_setImageValue(t){const i=this.fieldInfoMap??new Map,{value:r,formattedAttributes:n,layer:o}=t,{linkURL:u,sourceURL:f}=r;if(f){const g=AL(f,o);r.sourceURL=CL({formattedAttributes:n,template:g,fieldInfoMap:i})}if(u){const g=AL(u,o);r.linkURL=CL({formattedAttributes:n,template:g,fieldInfoMap:i})}}_setChartValue(t){const{value:i,attributes:r,formattedAttributes:n,chartType:o,layer:u,expressionAttributes:f}=t,{popupTemplate:g,relatedInfos:b}=this,{fields:E,normalizeField:I}=i,M=u;if(i.fields=KLe(E,M),I&&(i.normalizeField=A_(I,M)),!E.some(L=>!!(n[L]!=null||Zh(L)&&(b!=null&&b.size))))return;const k=(g==null?void 0:g.fieldInfos)??[];E.forEach((L,P)=>{var z;const D=(z=i.colors)==null?void 0:z[P];if(Zh(L))return void(i.series=[...i.series,...this._getRelatedChartInfos({fieldInfos:k,fieldName:L,formattedAttributes:n,chartType:o,value:i,color:D})]);const j=this._getChartOption({value:i,attributes:r,chartType:o,formattedAttributes:n,expressionAttributes:f,fieldName:L,fieldInfos:k,color:D});i.series.push(j)})}_getRelatedChartInfos(t){var L;const{fieldInfos:i,fieldName:r,formattedAttributes:n,chartType:o,value:u,color:f}=t,g=[],b=m4(r),E=b&&((L=this.relatedInfos)==null?void 0:L.get(b.layerId.toString()));if(!E)return g;const{relatedFeatures:I,relation:M}=E;if(!M||!I)return g;const{cardinality:k}=M;return I.forEach(P=>{const{attributes:D}=P;D&&Object.keys(D).forEach(j=>{j===b.fieldName&&g.push(this._getChartOption({value:u,attributes:D,formattedAttributes:n,fieldName:r,chartType:o,relatedFieldName:j,hasMultipleRelatedFeatures:(I==null?void 0:I.length)>1,fieldInfos:i,color:f}))})}),k==="one-to-many"||k==="many-to-many"?g:[g[0]]}_getTooltip({label:t,value:i,chartType:r}){return r==="pie-chart"?`${t}`:`${t}: ${i}`}_getChartOption(t){var ee;const{value:i,attributes:r,formattedAttributes:n,expressionAttributes:o,fieldName:u,relatedFieldName:f,fieldInfos:g,chartType:b,hasMultipleRelatedFeatures:E,color:I}=t,M=this.layer,k=this.fieldInfoMap??new Map,{normalizeField:L,tooltipField:P}=i,D=L?Zh(L)?r[m4(L).fieldName]:r[L]:null,j=rD(u)&&o&&o[u]!==void 0?o[u]:f&&r[f]!==void 0?r[f]:r[u]!==void 0?r[u]:n[u],z=new noe({fieldName:u,color:I,value:j===void 0?null:j&&D?j/D:j});if(Zh(u)){const ie=k.get(u.toLowerCase()),oe=P&&k.get(P.toLowerCase()),le=(ie==null?void 0:ie.fieldName)??u,xe=E&&P?m4(P).fieldName:(oe==null?void 0:oe.fieldName)??P,$e=E&&xe?r[xe]:n[xe]??(ie==null?void 0:ie.label)??(ie==null?void 0:ie.fieldName)??f,Te=E&&f?r[f]:n[le];return z.tooltip=this._getTooltip({label:$e,value:Te,chartType:b}),z}const V=Cue(g,u),W=A_(u,M),Q=P&&n[P]!==void 0?n[P]:Iue(V||new SS({fieldName:W}),(ee=this.popupTemplate)==null?void 0:ee.expressionInfos),Z=n[W];return z.tooltip=this._getTooltip({label:Q,value:Z,chartType:b}),z}};m([w()],Jr.prototype,"abilities",void 0),m([St("abilities")],Jr.prototype,"castAbilities",null),m([w()],Jr.prototype,"activeMediaInfoIndex",void 0),m([w({readOnly:!0})],Jr.prototype,"activeMediaInfo",null),m([w()],Jr.prototype,"attributes",void 0),m([w()],Jr.prototype,"description",void 0),m([w()],Jr.prototype,"fieldInfoMap",void 0),m([w()],Jr.prototype,"formattedAttributes",void 0),m([w()],Jr.prototype,"expressionAttributes",void 0),m([w({readOnly:!0})],Jr.prototype,"formattedMediaInfos",null),m([w()],Jr.prototype,"isAggregate",void 0),m([w()],Jr.prototype,"layer",void 0),m([w({readOnly:!0})],Jr.prototype,"formattedMediaInfoCount",null),m([w()],Jr.prototype,"mediaInfos",void 0),m([w()],Jr.prototype,"popupTemplate",void 0),m([w()],Jr.prototype,"relatedInfos",void 0),m([w()],Jr.prototype,"title",void 0),Jr=m([H("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],Jr);const vy=Jr,Br="esri-feature-media",Gs={base:Br,mediaContainer:`${Br}__container`,mediaItemContainer:`${Br}__item-container`,mediaItem:`${Br}__item`,mediaItemText:`${Br}__item-text`,mediaItemTitle:`${Br}__item-title`,mediaItemCaption:`${Br}__item-caption`,mediaNavigation:`${Br}__item-navigation`,mediaPagination:`${Br}__pagination`,mediaPaginationText:`${Br}__pagination-text`,mediaPrevious:`${Br}__previous`,mediaPreviousIconLTR:`${Br}__previous-icon`,mediaPreviousIconRTL:`${Br}__previous-icon--rtl`,mediaNext:`${Br}__next`,mediaNextIconLTR:`${Br}__next-icon`,mediaNextIconRTL:`${Br}__next-icon--rtl`,mediaChart:`${Br}__chart`,mediaPaginationButton:`${Br}__pagination-button`,mediaPaginationIcon:`${Br}__pagination-icon`,mediaChartRendered:`${Br}__chart--rendered`},y7=15,Ad="category",Iw="value",qPe="rgba(50, 50, 50, 1)",HPe=250,WPe=500,ZPe=200;let Zs=class extends bi{constructor(t,i){super(t,i),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this._chartRootMap=new WeakMap,this.viewModel=new vy,this.messages=null,this._disposeChart=r=>{var n;(n=this._chartRootMap.get(r))==null||n.dispose(),this._chartRootMap.delete(r)},this._createChart=async r=>{const{destroyed:n,viewModel:o}=this;if(n||!o||!r)return;const{createRoot:u}=await ce(()=>import("./chartUtilsAm5-DskUoJxF.js"),__vite__mapDeps([206,207,208,209]),import.meta.url),f=await u(r);this._chartRootMap.set(r,f),this._renderChart({mediaInfo:o.activeMediaInfo,root:f})}}initialize(){this._featureElementInfo=new kS,this.addHandles([me(()=>{var t,i;return[(t=this.viewModel)==null?void 0:t.activeMediaInfo,(i=this.viewModel)==null?void 0:i.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),Je),me(()=>{var t,i;return[(t=this.viewModel)==null?void 0:t.description,(i=this.viewModel)==null?void 0:i.title]},()=>this._setupFeatureElementInfo(),Je)])}loadDependencies(){return cs({icon:()=>ce(()=>import("./calcite-icon-_vDov-sg.js"),[],import.meta.url)})}destroy(){var t;this._clearMediaRefreshTimer(),(t=this._featureElementInfo)==null||t.destroy()}get attributes(){return this.viewModel.attributes}set attributes(t){this.viewModel.attributes=t}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(t){this.viewModel.activeMediaInfoIndex=t}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(t){this.viewModel.fieldInfoMap=t}get layer(){return this.viewModel.layer}set layer(t){this.viewModel.layer=t}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(t){this.viewModel.mediaInfos=t}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(t){this.viewModel.popupTemplate=t}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(t){this.viewModel.relatedInfos=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}render(){var t;return G("div",{bind:this,class:Gs.base,onkeyup:this._handleMediaKeyup},(t=this._featureElementInfo)==null?void 0:t.render(),this._renderMedia())}_renderMedia(){const{formattedMediaInfoCount:t,activeMediaInfoIndex:i}=this.viewModel,r=this._renderMediaText();return t?G("div",{class:Gs.mediaContainer,key:"media-element-container"},this._renderMediaInfo(),G("div",{class:Gs.mediaNavigation},r,t>1?G("div",{class:Gs.mediaPagination},this._renderMediaPageButton("previous"),G("span",{class:Gs.mediaPaginationText},Rn(this.messages.pageText,{index:i+1,total:t})),this._renderMediaPageButton("next")):null)):null}_renderMediaText(){const{activeMediaInfo:t}=this.viewModel;if(!t)return null;const i=t&&t.title?G("div",{class:Gs.mediaItemTitle,innerHTML:t.title,key:"media-title"}):null,r=t&&t.caption?G("div",{class:Gs.mediaItemCaption,innerHTML:t.caption,key:"media-caption"}):null;return i||r?G("div",{class:Gs.mediaItemText,key:"media-text"},i,r):null}_renderImageMediaInfo(t){if(!t.value)return null;const{_refreshIntervalInfo:i}=this,{activeMediaInfoIndex:r,formattedMediaInfoCount:n}=this.viewModel,{value:o,refreshInterval:u,altText:f,title:g,type:b}=t,{sourceURL:E,linkURL:I}=o,M=Eue(I??void 0)?"_blank":"_self",k=M==="_blank"?"noreferrer":"",L=u?i:null,P=L?L.timestamp:0,D=L?L.sourceURL:E,j=G("img",{alt:f||g,key:`media-${b}-${r}-${n}-${P}`,src:D??void 0});return(I?G("a",{href:I,rel:k,target:M,title:g},j):null)??j}_renderChartMediaInfo(t){const{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel;return G("div",{afterCreate:this._createChart,afterRemoved:this._disposeChart,bind:this,class:Gs.mediaChart,key:`media-${t.type}-${i}-${r}`})}_renderMediaInfoType(){const{activeMediaInfo:t}=this.viewModel;return t?t.type==="image"?this._renderImageMediaInfo(t):t.type.includes("chart")?this._renderChartMediaInfo(t):null:null}_renderMediaInfo(){const{activeMediaInfo:t}=this.viewModel;return t?G("div",{class:Gs.mediaItemContainer,key:"media-container"},G("div",{class:Gs.mediaItem,key:"media-item-container"},this._renderMediaInfoType())):null}_renderMediaPageButton(t){if(this.viewModel.formattedMediaInfoCount<2)return null;const i=t==="previous",r=i?this.messages.previous:this.messages.next,n=i?"chevron-left":"chevron-right",o=i?"media-previous":"media-next",u=i?this._previous:this._next;return G("button",{"aria-label":r,bind:this,class:Gs.mediaPaginationButton,key:o,onclick:u,tabIndex:0,title:r,type:"button"},G("calcite-icon",{class:Gs.mediaPaginationIcon,icon:n,scale:"s"}))}_setupFeatureElementInfo(){var r;const{description:t,title:i}=this;(r=this._featureElementInfo)==null||r.set({description:t,title:i})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getRenderer(){if(!this.viewModel)return;const{isAggregate:t,layer:i}=this.viewModel;return t&&(i!=null&&i.featureReduction)&&"renderer"in i.featureReduction?i.featureReduction.renderer:i==null?void 0:i.renderer}async _getSeriesColors(t){const{colorAm5:i}=await ce(()=>import("./chartCommon-DN7t_6OL.js"),__vite__mapDeps([210,207,211,208,212]),import.meta.url),r=new Map;return t.forEach(n=>{n.color&&r.set(n,i(n.color.toCss(!0)))}),r}async _getRendererColors(){const{colorAm5:t}=await ce(()=>import("./chartCommon-DN7t_6OL.js"),__vite__mapDeps([210,207,211,208,212]),import.meta.url),i=new Map,r=this._getRenderer(),n="default";if(!r)return i;const o=await ePe(r);return o.delete(n),Array.from(o.values()).every(u=>(u==null?void 0:u.length)===1)&&Array.from(o.keys()).forEach(u=>{var g,b;const f=(b=(g=o.get(u))==null?void 0:g[0])==null?void 0:b.toCss(!0);f&&i.set(u,t(f))}),i}_handleMediaKeyup(t){const{key:i}=t;i==="ArrowLeft"&&(t.stopPropagation(),this.viewModel.previous()),i==="ArrowRight"&&(t.stopPropagation(),this.viewModel.next())}_canAnimateChart(){return!!this.viewModel&&!!this.viewModel.abilities.chartAnimation&&!DF()}_getChartAnimationMS(){return this._canAnimateChart()?HPe:0}_getChartSeriesAnimationMS(){return this._canAnimateChart()?WPe:0}async _renderChart(t){const{root:i,mediaInfo:r}=t,{value:n,type:o}=r,{ResponsiveThemeAm5:u,DarkThemeAm5:f,AnimatedThemeAm5:g,ColorSetAm5:b,ThemeAm5:E,esriChartColorSet:I}=await ce(async()=>{const{ResponsiveThemeAm5:W,DarkThemeAm5:Q,AnimatedThemeAm5:Z,ColorSetAm5:ee,ThemeAm5:ie,esriChartColorSet:oe}=await import("./chartCommon-DN7t_6OL.js");return{ResponsiveThemeAm5:W,DarkThemeAm5:Q,AnimatedThemeAm5:Z,ColorSetAm5:ee,ThemeAm5:ie,esriChartColorSet:oe}},__vite__mapDeps([210,207,211,208,212]),import.meta.url),M=E.new(i);M.rule("ColorSet").set("colors",I),M.rule("ColorSet").set("reuse",!0);const k=[u.new(i),M];XF()&&k.push(f.new(i)),this._canAnimateChart()&&k.push(g.new(i)),i.setThemes(k);const L=await this._getRendererColors(),P=await this._getSeriesColors(n.series),D=b.new(i,{}),j=P.get(n.series[0]),z=j?{lineSettings:{stroke:j}}:void 0,V=n.series.map((W,Q)=>{const Z=P.get(W)||L.get(W.fieldName)||D.getIndex(Q);return{[Ad]:W.tooltip,[Iw]:W.value,columnSettings:{fill:Z,stroke:Z},...z}}).filter(W=>o!=="pie-chart"||W.value!=null&&W.value>0);o==="pie-chart"?this._createPieChart(t,V):this._createXYChart(t,V)}_getDirection(){return ha(this.container)?"rtl":"ltr"}async _customizeChartTooltip(t,i="horizontal"){var n;const{colorAm5:r}=await ce(()=>import("./chartCommon-DN7t_6OL.js"),__vite__mapDeps([210,207,211,208,212]),import.meta.url);t.setAll({pointerOrientation:i}),(n=t.get("background"))==null||n.setAll({stroke:r(qPe)}),t.label.setAll({direction:this._getDirection(),oversizedBehavior:"wrap",maxWidth:ZPe})}async _createPieChart(t,i){const{TooltipAm5:r}=await ce(()=>import("./chartCommon-DN7t_6OL.js"),__vite__mapDeps([210,207,211,208,212]),import.meta.url),{PieChartAm5:n,PieSeriesAm5:o}=await ce(async()=>{const{PieChartAm5:P,PieSeriesAm5:D}=await import("./pieChart-DsCJwepM.js");return{PieChartAm5:P,PieSeriesAm5:D}},__vite__mapDeps([213,214,207,212,209]),import.meta.url),{mediaInfo:u,root:f}=t,{title:g}=u,b=5,E=(u==null?void 0:u.altText)||(u==null?void 0:u.title)||"",I=f.container.children.push(n.new(f,{ariaLabel:E,focusable:!0,paddingBottom:b,paddingTop:b,paddingLeft:b,paddingRight:b})),M=`{category}: {valuePercentTotal.formatNumber('0.00')}%
 ({value})`,k=r.new(f,{labelText:M}),L=I.series.push(o.new(f,{name:g,valueField:Iw,categoryField:Ad,tooltip:k}));L.ticks.template.set("forceHidden",!0),L.labels.template.set("forceHidden",!0),L.slices.template.states.create("active",{shiftRadius:b}),this._customizeChartTooltip(k),L.slices.template.setAll({ariaLabel:M,focusable:!0,templateField:"columnSettings"}),L.data.setAll(i),L.appear(this._getChartSeriesAnimationMS()),I.appear(this._getChartAnimationMS()),I.root.dom.classList.toggle(Gs.mediaChartRendered,!0)}_getMinSeriesValue(t){let i=0;return t.forEach(r=>i=Math.min(r.value,i)),i}async _createColumnChart(t,i,r){const{TooltipAm5:n,ScrollbarAm5:o}=await ce(()=>import("./chartCommon-DN7t_6OL.js"),__vite__mapDeps([210,207,211,208,212]),import.meta.url),{CategoryAxisAm5:u,AxisRendererXAm5:f,ValueAxisAm5:g,AxisRendererYAm5:b,ColumnSeriesAm5:E}=await ce(async()=>{const{CategoryAxisAm5:W,AxisRendererXAm5:Q,ValueAxisAm5:Z,AxisRendererYAm5:ee,ColumnSeriesAm5:ie}=await import("./xyChart-BLUqqOPc.js");return{CategoryAxisAm5:W,AxisRendererXAm5:Q,ValueAxisAm5:Z,AxisRendererYAm5:ee,ColumnSeriesAm5:ie}},__vite__mapDeps([215,207,212,209,214,211]),import.meta.url),{mediaInfo:I,root:M}=i,{value:k,title:L}=I;t.setAll({wheelX:"panX",wheelY:"zoomX"});const P=t.xAxes.push(u.new(M,{renderer:f.new(M,{inversed:ha(this.container)}),categoryField:Ad}));P.get("renderer").labels.template.setAll({forceHidden:!0});const D=t.yAxes.push(g.new(M,{renderer:b.new(M,{inside:!1}),min:this._getMinSeriesValue(k.series)}));D.get("renderer").labels.template.setAll({direction:this._getDirection()});const j="{categoryX}",z=n.new(M,{labelText:j}),V=t.series.push(E.new(M,{name:L,xAxis:P,yAxis:D,valueYField:Iw,categoryXField:Ad,tooltip:z}));this._customizeChartTooltip(z),V.columns.template.setAll({ariaLabel:j,focusable:!0,templateField:"columnSettings"}),k.series.length>y7&&t.set("scrollbarX",o.new(M,{orientation:"horizontal"})),P.data.setAll(r),V.data.setAll(r),V.appear(this._getChartSeriesAnimationMS()),t.appear(this._getChartAnimationMS())}async _createBarChart(t,i,r){const{TooltipAm5:n,ScrollbarAm5:o}=await ce(()=>import("./chartCommon-DN7t_6OL.js"),__vite__mapDeps([210,207,211,208,212]),import.meta.url),{CategoryAxisAm5:u,AxisRendererXAm5:f,ValueAxisAm5:g,AxisRendererYAm5:b,ColumnSeriesAm5:E}=await ce(async()=>{const{CategoryAxisAm5:W,AxisRendererXAm5:Q,ValueAxisAm5:Z,AxisRendererYAm5:ee,ColumnSeriesAm5:ie}=await import("./xyChart-BLUqqOPc.js");return{CategoryAxisAm5:W,AxisRendererXAm5:Q,ValueAxisAm5:Z,AxisRendererYAm5:ee,ColumnSeriesAm5:ie}},__vite__mapDeps([215,207,212,209,214,211]),import.meta.url),{mediaInfo:I,root:M}=i,{value:k,title:L}=I;t.setAll({wheelX:"panY",wheelY:"zoomY"});const P=t.yAxes.push(u.new(M,{renderer:b.new(M,{inversed:!0}),categoryField:Ad}));P.get("renderer").labels.template.setAll({forceHidden:!0});const D=t.xAxes.push(g.new(M,{renderer:f.new(M,{inside:!1,inversed:ha(this.container)}),min:this._getMinSeriesValue(k.series)}));D.get("renderer").labels.template.setAll({direction:this._getDirection()});const j="{categoryY}",z=n.new(M,{labelText:j}),V=t.series.push(E.new(M,{name:L,xAxis:D,yAxis:P,valueXField:Iw,categoryYField:Ad,tooltip:z}));this._customizeChartTooltip(z,"vertical"),V.columns.template.setAll({ariaLabel:j,focusable:!0,templateField:"columnSettings"}),k.series.length>y7&&t.set("scrollbarY",o.new(M,{orientation:"vertical"})),P.data.setAll(r),V.data.setAll(r),V.appear(this._getChartSeriesAnimationMS()),t.appear(this._getChartAnimationMS())}async _createLineChart(t,i,r){var Q,Z,ee;const{TooltipAm5:n,ScrollbarAm5:o}=await ce(()=>import("./chartCommon-DN7t_6OL.js"),__vite__mapDeps([210,207,211,208,212]),import.meta.url),{CategoryAxisAm5:u,AxisRendererXAm5:f,ValueAxisAm5:g,AxisRendererYAm5:b,LineSeriesAm5:E}=await ce(async()=>{const{CategoryAxisAm5:ie,AxisRendererXAm5:oe,ValueAxisAm5:le,AxisRendererYAm5:xe,LineSeriesAm5:$e}=await import("./xyChart-BLUqqOPc.js");return{CategoryAxisAm5:ie,AxisRendererXAm5:oe,ValueAxisAm5:le,AxisRendererYAm5:xe,LineSeriesAm5:$e}},__vite__mapDeps([215,207,212,209,214,211]),import.meta.url),{root:I,mediaInfo:M}=i,{value:k,title:L}=M;t.setAll({wheelX:"panX",wheelY:"zoomX"});const P=t.xAxes.push(u.new(I,{renderer:f.new(I,{inversed:ha(this.container)}),categoryField:Ad}));P.get("renderer").labels.template.setAll({forceHidden:!0});const D=t.yAxes.push(g.new(I,{renderer:b.new(I,{inside:!1}),min:this._getMinSeriesValue(k.series)}));D.get("renderer").labels.template.setAll({direction:this._getDirection()});const j="{categoryX}",z=(Z=(Q=r[0])==null?void 0:Q.lineSettings)==null?void 0:Z.stroke,V=n.new(I,{getFillFromSprite:!z,labelText:j});z&&((ee=V.get("background"))==null||ee.setAll({fill:z}));const W=t.series.push(E.new(I,{name:L,xAxis:P,yAxis:D,valueYField:Iw,categoryXField:Ad,tooltip:V}));W.strokes.template.setAll({templateField:"lineSettings"}),this._customizeChartTooltip(V,"vertical"),k.series.length>y7&&t.set("scrollbarX",o.new(I,{orientation:"horizontal"})),P.data.setAll(r),W.data.setAll(r),W.appear(this._getChartSeriesAnimationMS()),t.appear(this._getChartAnimationMS())}async _createXYChart(t,i){const{XYChartAm5:r,XYCursorAm5:n}=await ce(()=>import("./xyChart-BLUqqOPc.js"),__vite__mapDeps([215,207,212,209,214,211]),import.meta.url),{root:o,mediaInfo:u}=t,{type:f}=u,g=(u==null?void 0:u.altText)||(u==null?void 0:u.title)||"",b=o.container.children.push(r.new(o,{ariaLabel:g,focusable:!0,panX:!0,panY:!0}));b.set("cursor",n.new(o,{})),f==="column-chart"&&await this._createColumnChart(b,t,i),f==="bar-chart"&&await this._createBarChart(b,t,i),f==="line-chart"&&await this._createLineChart(b,t,i),b.root.dom.classList.toggle(Gs.mediaChartRendered,!0)}_clearMediaRefreshTimer(){const{_refreshTimer:t}=this;t&&(clearTimeout(t),this._refreshTimer=null)}_updateMediaInfoTimestamp(t){const i=Date.now();this._refreshIntervalInfo={timestamp:i,sourceURL:t&&this._getImageSource(t,i)}}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:t}=this.viewModel;(t==null?void 0:t.type)==="image"&&(t==null?void 0:t.refreshInterval)>0&&this._setRefreshTimeout(t)}_setRefreshTimeout(t){const{refreshInterval:i,value:r}=t,n=6e4*i;this._updateMediaInfoTimestamp(r.sourceURL);const o=setInterval(()=>{this._updateMediaInfoTimestamp(r.sourceURL)},n);this._refreshTimer=o}_getImageSource(t,i){const r=t.includes("?")?"&":"?",[n,o=""]=t.split("#");return`${n}${r}timestamp=${i}${o?"#":""}${o}`}};m([w()],Zs.prototype,"_refreshIntervalInfo",void 0),m([w()],Zs.prototype,"attributes",null),m([w()],Zs.prototype,"activeMediaInfoIndex",null),m([w()],Zs.prototype,"description",null),m([w()],Zs.prototype,"fieldInfoMap",null),m([w()],Zs.prototype,"layer",null),m([w()],Zs.prototype,"mediaInfos",null),m([w()],Zs.prototype,"popupTemplate",null),m([w()],Zs.prototype,"relatedInfos",null),m([w()],Zs.prototype,"title",null),m([w({type:vy})],Zs.prototype,"viewModel",void 0),m([w(),Xt("esri/widgets/Feature/t9n/Feature")],Zs.prototype,"messages",void 0),Zs=m([H("esri.widgets.Feature.FeatureMedia")],Zs);const uce=Zs;let au=class{};function JPe(e){return e instanceof vm?e===au.instance:(e==null?void 0:e.toString().toLowerCase())==="unknown"}function But(e){return JPe(e)?au.instance:e}au.instance=new Vo("Etc/UTC");var VI;(function(e){e.TimeZoneNotRecognized="TimeZoneNotRecognized"})(VI||(VI={}));const KPe={[VI.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};let YPe=class cce extends Error{constructor(t,i){super(wu(KPe[t],i)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,cce)}};function Gm(e,t,i){return e<t?e-t:e>i?e-i:0}function Bm(e,t,i){return e<t?t:e>i?i:e}let ZL=class Nr{constructor(t){this._date=t,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(t=0,i=1,r=1,n=0,o=0,u=0,f=0,g){if(isNaN(t)||isNaN(i)||isNaN(r)||isNaN(n)||isNaN(o)||isNaN(u)||isNaN(f))return null;const b=Ze.local(t,i).daysInMonth;let E=Ze.fromObject({day:Bm(r,1,b),year:t,month:Bm(i,1,12),hour:Bm(n,0,23),minute:Bm(o,0,59),second:Bm(u,0,59),millisecond:Bm(f,0,999)},{zone:fc(g)});return E=E.plus({months:Gm(i,1,12),days:Gm(r,1,b),hours:Gm(n,0,23),minutes:Gm(o,0,59),seconds:Gm(u,0,59),milliseconds:Gm(f,0,999)}),new Nr(E)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(t,i){const r=fc(i);return t.isUnknownTimeZone||r===au.instance?Nr.fromParts(t.year,t.monthJS+1,t.day,t.hour,t.minute,t.second,t.millisecond,r):new Nr(t._date.setZone(r))}static dateJSToArcadeDate(t){return new Nr(Ze.fromJSDate(t,{zone:"system"}))}static dateJSAndZoneToArcadeDate(t,i="system"){const r=fc(i);return new Nr(Ze.fromJSDate(t,{zone:r}))}static unknownEpochToArcadeDate(t){return new Nr(Ze.fromMillis(t,{zone:au.instance}))}static unknownDateJSToArcadeDate(t){return new Nr(Ze.fromMillis(t.getTime(),{zone:au.instance}))}static epochToArcadeDate(t,i="system"){const r=fc(i);return new Nr(Ze.fromMillis(t,{zone:r}))}static dateTimeToArcadeDate(t){return new Nr(t)}clone(){return new Nr(this._date)}changeTimeZone(t){const i=fc(t);return Nr.dateTimeToArcadeDate(this._date.setZone(i))}static dateTimeAndZoneToArcadeDate(t,i){const r=fc(i);return t.zone===au.instance||r===au.instance?Nr.fromParts(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond,r):new Nr(t.setZone(r))}static nowToArcadeDate(t){const i=fc(t);return new Nr(Ze.fromJSDate(new Date,{zone:i}))}static nowUTCToArcadeDate(){return new Nr(Ze.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===Nr.systemTimeZoneCanonicalName}equals(t){return this.isSystem&&t.isSystem?this.toNumber()===t.toNumber():this.isUnknownTimeZone===t.isUnknownTimeZone&&this._date.equals(t._date)}get isUnknownTimeZone(){return this._date.zone===au.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let t=this._date.weekday;return t>6&&(t=0),t}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const t=this.zone;return t.type==="fixed"?t.fixed===0?"UTC":t.formatOffset(0,"short"):t.name}stringify(){return JSON.stringify(this.toJSDate())}plus(t){return new Nr(this._date.plus(t))}diff(t,i="milliseconds"){return this._date.diff(t._date,i)[i]}toISODate(){return this._date.toISODate()}toISOString(t){return t?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(t,i){return this._date.toISOTime({suppressMilliseconds:t,includeOffset:i&&!this.isUnknownTimeZone})}toFormat(t,i){return this.isUnknownTimeZone&&(t=t.replaceAll("Z","")),this._date.toFormat(t,i)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new Nr(this._date.toUTC())}toLocal(){return new Nr(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(t){if(!t)return null;const i=Ze.fromISO(t,{setZone:!0});return new Nr(i)}};function fc(e,t=!0){if(e instanceof vm)return e;if(e.toLowerCase()==="system")return"system";if(e.toLowerCase()==="utc")return"UTC";if(e.toLowerCase()==="unknown")return au.instance;if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(e)){const r=tn.parseSpecifier("UTC"+(e.startsWith("+")||e.startsWith("-")?"":"+")+e);if(r)return r}const i=Vo.create(e);if(!i.isValid){if(t)throw new YPe(VI.TimeZoneNotRecognized);return null}return i}function BW(e){e=e.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let t="";const i=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of e.match(i)||[])switch(r){case"D":t+="d";break;case"DD":t+="dd";break;case"DDD":t+="o";break;case"d":t+="c";break;case"ddd":t+="ccc";break;case"dddd":t+="cccc";break;case"M":t+="L";break;case"MM":t+="LL";break;case"MMM":t+="LLL";break;case"MMMM":t+="LLLL";break;case"YY":t+="yy";break;case"Y":case"YYYY":t+="yyyy";break;case"Q":t+="q";break;case"X":case"x":t+=r;break;default:r.length>=2&&r.slice(0,1)==="["&&r.slice(-1)==="]"?t+=`'${r.slice(1,-1)}'`:t+=`'${r}'`}return t}let XPe=class Qo{constructor(t,i,r){this._year=t,this._month=i,this._day=r,this.declaredRootClass="esri.core.sql.dateonly"}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(t){return t instanceof Qo&&t.day===this.day&&t.month===this.month&&t.year===this.year}clone(){return new Qo(this._year,this._month,this._day)}toDateTime(t){return Ze.fromObject({day:this.day,month:this.month,year:this.year},{zone:fc(t)})}toDateTimeLuxon(t){return Ze.fromObject({day:this.day,month:this.month,year:this.year},{zone:fc(t)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(t=null,i=!0){if(t===null||t==="")return this.toString();if(i&&(t=BW(t)),!t)return"";const r=this.toDateTime("unknown");return ZL.dateTimeToArcadeDate(r).toFormat(t,{locale:Ds(),numberingSystem:"latn"})}toArcadeDate(){const t=this.toDateTime("unknown");return ZL.dateTimeToArcadeDate(t)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(t,i){return Qo.fromDateTime(this.toUTCDateTime().plus({[t]:i}))}toUTCDateTime(){return Ze.utc(this.year,this.month,this.day,0,0,0,0)}difference(t,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(t.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(t.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(t.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(t.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(t.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(t.toUTCDateTime(),"years").years}}static fromMilliseconds(t){const i=Ze.fromMillis(t,{zone:tn.utcInstance});return i.isValid?Qo.fromParts(i.year,i.month,i.day):null}static fromSeconds(t){const i=Ze.fromSeconds(t,{zone:tn.utcInstance});return i.isValid?Qo.fromParts(i.year,i.month,i.day):null}static fromReader(t){if(!t)return null;const i=t.split("-");return i.length!==3?null:new Qo(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10))}static fromParts(t,i,r){const n=new Qo(t,i,r);return n.isValid===!1?null:n}static fromDateJS(t){return Qo.fromParts(t.getFullYear(),t.getMonth()+1,t.getDay())}static fromDateTime(t){return Qo.fromParts(t.year,t.month,t.day)}static fromSqlTimeStampOffset(t){return this.fromDateTime(t.toDateTime())}static fromString(t,i=null){if(t===""||t===null)return null;const r=[];if(i)(i=BW(i))&&r.push(i);else if(i===null||i===""){const n=Ze.fromISO(t,{setZone:!0});return n.isValid?Qo.fromParts(n.year,n.month,n.day):null}for(const n of r){const o=Ze.fromFormat(t,i??n);if(o.isValid)return new Qo(o.year,o.month,o.day)}return null}static fromNow(t="system"){const i=Ze.fromJSDate(new Date).setZone(fc(t));return new Qo(i.year,i.month,i.day)}};function qut(e){if(e==null)return null;if(typeof e=="number")return e;let t=e.toLowerCase();switch(t=t.replaceAll(/\s/g,""),t=t.replaceAll("-",""),t){case"meters":case"meter":case"m":case"squaremeters":case"squaremeter":return 109404;case"miles":case"mile":case"squaremile":case"squaremiles":return 109439;case"kilometers":case"kilometer":case"squarekilometers":case"squarekilometer":case"km":return 109414;case"acres":case"acre":case"ac":return 109402;case"hectares":case"hectare":case"ha":return 109401;case"yard":case"yd":case"yards":case"squareyards":case"squareyard":return 109442;case"feet":case"ft":case"foot":case"squarefeet":case"squarefoot":return 109405;case"nmi":case"nauticalmile":case"nauticalmiles":case"squarenauticalmile":case"squarenauticalmiles":return 109409}return null}function Hut(e){if(e==null)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new Ht({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function Wut(e){if(e==null)return null;if(typeof e=="number")return e;let t=e.toLowerCase();switch(t=t.replaceAll(/\s/g,""),t=t.replaceAll("-",""),t){case"meters":case"meter":case"m":case"squaremeters":case"squaremeter":return 9001;case"miles":case"mile":case"squaremile":case"squaremiles":return 9093;case"kilometers":case"kilometer":case"squarekilometers":case"squarekilometer":case"km":return 9036;case"yard":case"yd":case"yards":case"squareyards":case"squareyard":return 9096;case"feet":case"ft":case"foot":case"squarefeet":case"squarefoot":return 9002;case"nmi":case"nauticalmile":case"nauticalmiles":case"squarenauticalmile":case"squarenauticalmiles":return 9030}return null}function Zut(e){if(e==null)return null;const t=e.clone();return e.cache._geVersion!==void 0&&(t.cache._geVersion=e.cache._geVersion),t}function rx(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function qW(e){if(!e)return"";const t=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let i="";for(const r of e.match(t)||[])switch(r){case"SSS":case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":i+=r;break;case"A":case"a":i+="a";break;default:i+=`'${r}'`}return i}let QPe=class Wu{constructor(t,i,r,n){this._hour=t,this._minute=i,this._second=r,this._millisecond=n,this.declaredRootClass="esri.core.sql.timeonly"}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(t){return t instanceof Wu&&t.hour===this.hour&&t.minute===this.minute&&t.second===this.second&&t.millisecond===this.millisecond}clone(){return new Wu(this.hour,this.minute,this.second,this.millisecond)}isValid(){return rx(this.hour)&&rx(this.minute)&&rx(this.second)&&rx(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`+(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`}toFormat(t=null){return t===null||t===""?this.toString():(t=qW(t))?Ze.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(t,{locale:Ds(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(t,i,r,n){const o=new Wu(t,i,r,n);return o.isValid()?o:null}static fromReader(t){if(!t)return null;const i=t.split(":");return i.length!==3?null:new Wu(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10),0)}static fromMilliseconds(t){if(t>864e5||t<0)return null;const i=Math.floor(t/1e3%60),r=Math.floor(t/6e4%60),n=Math.floor(t/36e5%24),o=Math.floor(t%1e3);return new Wu(n,r,i,o)}static fromDateJS(t){return new Wu(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}static fromDateTime(t){return new Wu(t.hour,t.minute,t.second,t.millisecond)}static fromSqlTimeStampOffset(t){return this.fromDateTime(t.toDateTime())}static fromString(t,i=null){if(t===""||t===null)return null;const r=[];i?(i=qW(i))&&r.push(i):i!==null&&i!==""||(r.push("HH:mm:ss"),r.push("HH:mm:ss.SSS"),r.push("hh:mm:ss a"),r.push("hh:mm:ss.SSS a"),r.push("HH:mm"),r.push("hh:mm a"),r.push("H:mm"),r.push("h:mm a"),r.push("H:mm:ss"),r.push("h:mm:ss a"),r.push("H:mm:ss.SSS"),r.push("h:mm:ss.SSS a"));for(const n of r){const o=Ze.fromFormat(t,n);if(o.isValid)return new Wu(o.hour,o.minute,o.second,o.millisecond)}return null}plus(t,i){switch(t){case"days":case"years":case"months":return this.clone();case"hours":case"minutes":case"seconds":case"milliseconds":return Wu.fromDateTime(this.toUTCDateTime().plus({[t]:i}))}return null}toUTCDateTime(){return Ze.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(t,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(t.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(t.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(t.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(t.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(t.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(t.toUTCDateTime(),"years").years}}};var HW,WW;function Jut(e){return ET.fromJSON(e.toJSON())}function Kut(e){return e.toJSON?e.toJSON():e}function Yut(e){return e instanceof Date}function Xut(e){return e instanceof Ze}function Qut(e){return e instanceof ZL}function ect(e){return e instanceof XPe}function tct(e){return e instanceof QPe}function ict(e){if(e==null)return null;if(typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109439;case"kilometers":case"kilometer":case"km":return 109414}return null}function rct(e){if(e==null)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new Ht({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function nct(e){if(e==null)return null;if(typeof e=="number"||typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9093;case"kilometers":case"kilometer":case"km":return 9036}return null}(function(e){e[e.Standardised=0]="Standardised",e[e.StandardisedNoInterval=1]="StandardisedNoInterval",e[e.SqlServer=2]="SqlServer",e[e.Oracle=3]="Oracle",e[e.Postgres=4]="Postgres",e[e.PGDB=5]="PGDB",e[e.FILEGDB=6]="FILEGDB",e[e.NotEvaluated=7]="NotEvaluated"})(HW||(HW={})),function(e){e[e.InFeatureSet=0]="InFeatureSet",e[e.NotInFeatureSet=1]="NotInFeatureSet",e[e.Unknown=2]="Unknown"}(WW||(WW={}));const sct=1e3,oct={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},act={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},lct={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate","date-only":"esriFieldTypeDateOnly","time-only":"esriFieldTypeTimeOnly","timestamp-offset":"esriFieldTypeTimestampOffset",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"esriFieldTypeXML","big-integer":"esriFieldTypeBigInteger",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeDateOnly:"esriFieldTypeDateOnly",esriFieldTypeTimeOnly:"esriFieldTypeTimeOnly",esriFieldTypeTimestampOffset:"esriFieldTypeTimestampOffset",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"esriFieldTypeXML",esriFieldTypeBigInteger:"esriFieldTypeBigInteger"};function uct(e){return e===void 0?"":e=(e=(e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function cct(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const i=typeof t.cycles=="boolean"&&t.cycles,r=t.cmp&&(n=t.cmp,function(u){return function(f,g){const b={key:f,value:u[f]},E={key:g,value:u[g]};return n(b,E)}});var n;const o=[];return function u(f){if(f!=null&&f.toJSON&&typeof f.toJSON=="function"&&(f=f.toJSON()),f===void 0)return;if(typeof f=="number")return isFinite(f)?""+f:"null";if(typeof f!="object")return JSON.stringify(f);let g,b;if(Array.isArray(f)){for(b="[",g=0;g<f.length;g++)g&&(b+=","),b+=u(f[g])||"null";return b+"]"}if(f===null)return"null";if(o.includes(f)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const E=o.push(f)-1,I=Object.keys(f).sort(r==null?void 0:r(f));for(b="",g=0;g<I.length;g++){const M=I[g],k=u(f[M]);k&&(b&&(b+=","),b+=JSON.stringify(M)+":"+k)}return o.splice(E,1),"{"+b+"}"}(e)}function eNe(e){switch(e.type){case"catalog":case"csv":case"feature":case"geojson":case"oriented-imagery":case"subtype-group":case"wfs":return!0;default:return!1}}function tNe(e){switch(e.type){case"catalog-footprint":case"subtype-sublayer":return!0;default:return eNe(e)}}var JL;let Ob=JL=class extends be{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new JL({minValue:this.minValue,maxValue:this.maxValue})}};m([w({type:Number,json:{write:!0}})],Ob.prototype,"minValue",void 0),m([w({type:Number,json:{write:!0}})],Ob.prototype,"maxValue",void 0),Ob=JL=m([H("esri.renderers.support.AuthoringInfoClassBreakInfo")],Ob);var KL;let Mp=KL=class extends be{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new KL({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:he(this.classBreakInfos)})}};m([w({type:String,json:{write:!0}})],Mp.prototype,"field",void 0),m([w({type:String,json:{write:!0}})],Mp.prototype,"normalizationField",void 0),m([w({type:String,json:{write:!0}})],Mp.prototype,"label",void 0),m([w({type:[Ob],json:{write:!0}})],Mp.prototype,"classBreakInfos",void 0),Mp=KL=m([H("esri.renderers.support.AuthoringInfoFieldInfo")],Mp);var YL;let L1=YL=class extends be{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new YL({label:this.label,value:this.value,size:this.size})}};m([w({type:String,json:{write:!0}})],L1.prototype,"label",void 0),m([w({type:Number,json:{write:!0}})],L1.prototype,"size",void 0),m([w({type:Number,json:{write:!0}})],L1.prototype,"value",void 0),L1=YL=m([H("esri.renderers.support.AuthoringInfoSizeStop")],L1);const iNe=L1;var XL;const nx=new gt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),sx=new gt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),ZW={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},JW=["high-to-low","above-and-below","centered-on","extremes"],KW=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size"])],YW=["seconds","minutes","hours","days","months","years"],rNe=["circle","diamond","hexagon-flat","hexagon-pointy","square"];let Tn=XL=class extends be{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}get normalizationField(){return this.theme==="reference-size"?this._get("normalizationField"):null}set normalizationField(e){this._set("normalizationField",e)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(e){this._set("referenceSizeScale",e)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(e){this._set("referenceSizeSymbolStyle",e)}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get sizeStops(){return this.theme==="reference-size"?this._get("sizeStops"):null}set sizeStops(e){this._set("sizeStops",e)}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new XL({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,sizeStops:he(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};m([w({types:ZW,json:{write:!0}})],Tn.prototype,"endTime",void 0),m([St("endTime")],Tn.prototype,"castEndTime",null),m([w({type:String,json:{write:!0}})],Tn.prototype,"field",void 0),m([w({type:Number,json:{write:!0}})],Tn.prototype,"maxSliderValue",void 0),m([w({type:Number,json:{write:!0}})],Tn.prototype,"minSliderValue",void 0),m([w({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],Tn.prototype,"normalizationField",null),m([w({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Tn.prototype,"referenceSizeScale",null),m([w({type:rNe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Tn.prototype,"referenceSizeSymbolStyle",null),m([w({types:ZW,json:{write:!0}})],Tn.prototype,"startTime",void 0),m([St("startTime")],Tn.prototype,"castStartTime",null),m([w({type:[iNe],json:{origins:{"web-scene":{write:!1}},write:!0}})],Tn.prototype,"sizeStops",null),m([w({type:nx.apiValues,value:null,json:{type:nx.jsonValues,read:nx.read,write:nx.write}})],Tn.prototype,"style",null),m([w({type:KW,value:null,json:{type:KW,origins:{"web-scene":{type:JW,write:{writer:(e,t)=>{JW.includes(e)&&(t.theme=e)}}}},write:!0}})],Tn.prototype,"theme",null),m([w({type:sx.apiValues,json:{type:sx.jsonValues,read:sx.read,write:sx.write}})],Tn.prototype,"type",void 0),m([w({type:YW,json:{type:YW,write:!0}})],Tn.prototype,"units",void 0),Tn=XL=m([H("esri.renderers.support.AuthoringInfoVisualVariable")],Tn);const nNe=Tn;let g4=class extends be{constructor(t){super(t),this.type=null}};m([w({readOnly:!0,json:{read:!1,write:!0}})],g4.prototype,"type",void 0),g4=m([H("esri.rest.support.ColorRamp")],g4);const fD=g4;var QL;let k0=QL=class extends fD{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new QL({fromColor:he(this.fromColor),toColor:he(this.toColor),algorithm:this.algorithm})}};m([Ke({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],k0.prototype,"algorithm",void 0),m([w({type:Ne,json:{type:[Ot],write:!0}})],k0.prototype,"fromColor",void 0),m([w({type:Ne,json:{type:[Ot],write:!0}})],k0.prototype,"toColor",void 0),m([w({type:["algorithmic"]})],k0.prototype,"type",void 0),k0=QL=m([H("esri.rest.support.AlgorithmicColorRamp")],k0);const yD=k0;var eO;let Rb=eO=class extends fD{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new eO({colorRamps:he(this.colorRamps)})}};m([w({type:[yD],json:{write:!0}})],Rb.prototype,"colorRamps",void 0),m([w({type:["multipart"]})],Rb.prototype,"type",void 0),Rb=eO=m([H("esri.rest.support.MultipartColorRamp")],Rb);const hce=Rb,sNe={key:"type",base:fD,typeMap:{algorithmic:yD,multipart:hce}};function oNe(e){return e!=null&&e.type?e.type==="algorithmic"?yD.fromJSON(e):e.type==="multipart"?hce.fromJSON(e):null:null}var tO;const qf=new gt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),ox=new gt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),XW=new gt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),QW=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],aNe=["high-to-low","above-and-below","above","below"],lNe=["flow-line","wave-front"],uNe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let yr=tO=class extends be{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?oNe(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){var e;return new tO({classificationMethod:this.classificationMethod,colorRamp:he(this.colorRamp),fadeRatio:he(this.fadeRatio),fields:(e=this.fields)==null?void 0:e.slice(),field1:he(this.field1),field2:he(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};m([w({type:qf.apiValues,value:null,json:{type:qf.jsonValues,read:qf.read,write:qf.write,origins:{"web-document":{default:"manual",type:qf.jsonValues,read:qf.read,write:qf.write}}}})],yr.prototype,"classificationMethod",null),m([w({types:sNe,json:{write:!0}})],yr.prototype,"colorRamp",void 0),m([ke("colorRamp")],yr.prototype,"readColorRamp",null),m([w({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],yr.prototype,"fadeRatio",void 0),m([w({type:[String],value:null,json:{write:!0}})],yr.prototype,"fields",null),m([w({type:Mp,value:null,json:{write:!0}})],yr.prototype,"field1",null),m([w({type:Mp,value:null,json:{write:!0}})],yr.prototype,"field2",null),m([w({type:lNe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],yr.prototype,"flowTheme",null),m([w({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],yr.prototype,"focus",null),m([w({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],yr.prototype,"isAutoGenerated",void 0),m([w({type:Number,value:null,json:{type:Ot,write:!0}})],yr.prototype,"numClasses",null),m([w({type:QW,json:{type:QW,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],yr.prototype,"lengthUnit",void 0),m([w({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],yr.prototype,"maxSliderValue",void 0),m([w({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],yr.prototype,"minSliderValue",void 0),m([w({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],yr.prototype,"statistics",null),m([w({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],yr.prototype,"standardDeviationInterval",null),m([w({type:ox.apiValues,value:null,json:{type:ox.jsonValues,read:ox.read,write:ox.write,origins:{"web-scene":{type:XW.jsonValues,write:{writer:XW.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],yr.prototype,"type",null),m([w({type:[nNe],json:{write:!0}})],yr.prototype,"visualVariables",void 0),m([w({type:uNe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],yr.prototype,"univariateSymbolStyle",null),m([w({type:aNe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],yr.prototype,"univariateTheme",null),yr=tO=m([H("esri.renderers.support.AuthoringInfo")],yr);const mD=yr,m7=new gt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let Pb=class extends be{constructor(t){super(t),this.authoringInfo=null,this.type=null}async getRequiredFields(t){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,t),Array.from(i).sort()}getSymbol(t,i){}async getSymbolAsync(t,i){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};m([w({type:mD,json:{write:!0}})],Pb.prototype,"authoringInfo",void 0),m([w({type:m7.apiValues,readOnly:!0,json:{type:m7.jsonValues,read:!1,write:{writer:m7.write,ignoreOrigin:!0}}})],Pb.prototype,"type",void 0),Pb=m([H("esri.renderers.Renderer")],Pb);const yd=Pb;function cNe(e){var t,i;return((i=(t=e.match(hNe))==null?void 0:t[1])==null?void 0:i.replace(/\\'/g,"'"))??null}const hNe=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let Nb=class extends It(be){constructor(){super(...arguments),this.showLegend=null,this.title=null}};m([w({type:Boolean,json:{write:!0}})],Nb.prototype,"showLegend",void 0),m([w({type:String,json:{write:!0}})],Nb.prototype,"title",void 0),Nb=m([H("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],Nb);const dce=Nb,g7=new gt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Dl=class extends be{constructor(t){super(t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(t){return t==null?t:typeof t=="function"?(Se.getLogger(this).error(".field: field must be a string value"),null):rS(t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};m([w()],Dl.prototype,"index",void 0),m([w({type:g7.apiValues,readOnly:!0,json:{read:g7.read,write:g7.write}})],Dl.prototype,"type",void 0),m([w({type:String,json:{write:!0}})],Dl.prototype,"field",void 0),m([St("field")],Dl.prototype,"castField",null),m([w({type:String,json:{write:!0}})],Dl.prototype,"valueExpression",void 0),m([w({type:String,json:{write:!0}})],Dl.prototype,"valueExpressionTitle",void 0),m([w({readOnly:!0})],Dl.prototype,"arcadeRequired",null),m([w({type:dce,json:{write:!0}})],Dl.prototype,"legendOptions",void 0),Dl=m([H("esri.renderers.visualVariables.VisualVariable")],Dl);const j2=Dl;var iO;let L0=iO=class extends j2{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){var e;return new iO({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};m([w({readOnly:!0})],L0.prototype,"cache",null),m([w({type:["color"],json:{type:["colorInfo"]}})],L0.prototype,"type",void 0),m([w({type:String,json:{write:!0}})],L0.prototype,"normalizationField",void 0),m([w({type:[LOe],json:{write:!0}})],L0.prototype,"stops",null),L0=iO=m([H("esri.renderers.visualVariables.ColorVariable")],L0);const pce=L0;var rO;let Qd=rO=class extends be{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return __(t.transparency)}writeOpacity(e,t,i){t[i]=uT(e)}clone(){return new rO({label:this.label,opacity:this.opacity,value:this.value})}};m([w({type:String,json:{write:!0}})],Qd.prototype,"label",void 0),m([w({type:Number,json:{type:Ot,write:{target:"transparency"}}})],Qd.prototype,"opacity",void 0),m([ke("opacity",["transparency"])],Qd.prototype,"readOpacity",null),m([Pe("opacity")],Qd.prototype,"writeOpacity",null),m([w({type:Number,json:{write:!0}})],Qd.prototype,"value",void 0),Qd=rO=m([H("esri.renderers.visualVariables.support.OpacityStop")],Qd);const dNe=Qd;var nO;let O0=nO=class extends j2{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){var e;return new nO({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};m([w({readOnly:!0})],O0.prototype,"cache",null),m([w({type:["opacity"],json:{type:["transparencyInfo"]}})],O0.prototype,"type",void 0),m([w({type:String,json:{write:!0}})],O0.prototype,"normalizationField",void 0),m([w({type:[dNe],json:{write:!0}})],O0.prototype,"stops",null),O0=nO=m([H("esri.renderers.visualVariables.OpacityVariable")],O0);const gD=O0;var sO;let R0=sO=class extends j2{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){var e;return new sO({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}};m([w({readOnly:!0})],R0.prototype,"cache",null),m([w({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],R0.prototype,"axis",void 0),m([w({type:["rotation"],json:{type:["rotationInfo"]}})],R0.prototype,"type",void 0),m([w({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],R0.prototype,"rotationType",void 0),R0=sO=m([H("esri.renderers.visualVariables.RotationVariable")],R0);const fce=R0;function pNe(e){return Gt(e)}var oO;let ep=oO=class extends be{constructor(e){super(e),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new oO({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};m([w({type:String,json:{write:!0}})],ep.prototype,"label",void 0),m([w({type:Number,cast:Gt,json:{write:!0}})],ep.prototype,"size",void 0),m([w({type:Number,json:{write:!0}})],ep.prototype,"value",void 0),m([w({type:Boolean,json:{write:!1}})],ep.prototype,"useMinValue",void 0),m([w({type:Boolean,json:{write:!1}})],ep.prototype,"useMaxValue",void 0),ep=oO=m([H("esri.renderers.visualVariables.support.SizeStop")],ep);const v4=ep;let w4=class extends dce{constructor(){super(...arguments),this.customValues=null}};m([w({type:[Number],json:{write:!0}})],w4.prototype,"customValues",void 0),w4=m([H("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],w4);const yce=w4;var ed,yn;function zg(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function F_(e){return e!=null&&!isNaN(e)&&isFinite(e)}function mce(e){return e.valueExpression?ed.Expression:e.field&&typeof e.field=="string"?ed.Field:ed.Unknown}function fNe(e,t){const i=t||mce(e),r=e.valueUnit||"unknown";return i===ed.Unknown?yn.Constant:e.stops?yn.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?yn.ClampedLinear:r==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?yn.Proportional:yn.Additive:yn.Identity:yn.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(ed||(ed={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(yn||(yn={}));const GT={unknown:1,inches:Ut(1,"meters","inches"),feet:Ut(1,"meters","feet"),"us-feet":Ut(1,"meters","us-feet"),yards:Ut(1,"meters","yards"),miles:Ut(1,"meters","miles"),"nautical-miles":Ut(1,"meters","nautical-miles"),millimeters:Ut(1,"meters","millimeters"),centimeters:Ut(1,"meters","centimeters"),decimeters:Ut(1,"meters","decimeters"),meters:Ut(1,"meters","meters"),kilometers:Ut(1,"meters","kilometers"),"decimal-degrees":1/Hbe(1,"meters",br.radius)},gce=()=>Se.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),BT=e=>gce().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${e}`),qT=()=>gce().error("Use of arcade expressions requires an arcade context"),eZ=new qi,b4=Math.PI,vce=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function wce(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(L=>L.type==="color"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void BT("ColorVariable");const n=typeof t=="number",o=n?null:t,u=o==null?void 0:o.attributes;let f=n?t:null;const g=r.field,{ipData:b,hasExpression:E}=r.cache;let I=r.cache.compiledFunc;if(!g&&!E){const L=r.stops;return L&&L[0]&&L[0].color}if(typeof f!="number")if(E){if((i==null?void 0:i.arcade)==null)return void qT();const L={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},P=i.arcade.arcadeUtils,D=P.getViewInfo(L),j=P.createExecContext(o,D,i.timeZone);if(!I){const z=P.createSyntaxTree(r.valueExpression);I=P.createFunction(z),r.cache.compiledFunc=I}f=P.executeFunction(I,j)}else u&&(f=u[g]);const M=r.normalizationField,k=u!=null&&M!=null?parseFloat(u[M]):void 0;if(f!=null&&(!M||n||!isNaN(k)&&k!==0)){isNaN(k)||n||(f/=k);const L=vD(f,b);if(L){const P=L[0],D=L[1],j=P===D?r.stops[P].color:Ne.blendColors(r.stops[P].color,r.stops[D].color,L[2],i!=null?i.color:void 0);return new Ne(j)}}}function bce(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(L=>L.type==="opacity"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void BT("OpacityVariable");const n=typeof t=="number",o=n?null:t,u=o==null?void 0:o.attributes;let f=n?t:null;const g=r.field,{ipData:b,hasExpression:E}=r.cache;let I=r.cache.compiledFunc;if(!g&&!E){const L=r.stops;return L&&L[0]&&L[0].opacity}if(typeof f!="number")if(E){if((i==null?void 0:i.arcade)==null)return void qT();const L={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},P=i.arcade.arcadeUtils,D=P.getViewInfo(L),j=P.createExecContext(o,D,i.timeZone);if(!I){const z=P.createSyntaxTree(r.valueExpression);I=P.createFunction(z),r.cache.compiledFunc=I}f=P.executeFunction(I,j)}else u&&(f=u[g]);const M=r.normalizationField,k=u!=null&&M!=null?parseFloat(u[M]):void 0;if(f!=null&&(!M||n||!isNaN(k)&&k!==0)){isNaN(k)||n||(f/=k);const L=vD(f,b);if(L){const P=L[0],D=L[1];if(P===D)return r.stops[P].opacity;{const j=r.stops[P].opacity;return j+(r.stops[D].opacity-j)*L[2]}}}}function _ce(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(k=>k.type==="rotation"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void BT("RotationVariable");const n=r.axis||"heading",o=n==="heading"&&r.rotationType==="arithmetic"?90:0,u=n==="heading"&&r.rotationType==="arithmetic"?-1:1,f=typeof t=="number"?null:t,g=f==null?void 0:f.attributes,b=r.field,{hasExpression:E}=r.cache;let I=r.cache.compiledFunc,M=0;if(!b&&!E)return M;if(E){if((i==null?void 0:i.arcade)==null)return void qT();const k={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},L=i.arcade.arcadeUtils,P=L.getViewInfo(k),D=L.createExecContext(f,P,i.timeZone);if(!I){const j=L.createSyntaxTree(r.valueExpression);I=L.createFunction(j),r.cache.compiledFunc=I}M=L.executeFunction(I,D)}else g&&(M=g[b]||0);return M=typeof M!="number"||isNaN(M)?null:o+u*M,M}function yNe(e,t,i){const r=typeof t=="number",n=r?null:t,o=n==null?void 0:n.attributes;let u=r?t:null;const{isScaleDriven:f}=e.cache;let g=e.cache.compiledFunc;if(f){const E=i!=null?i.scale:void 0,I=i!=null?i.view:void 0;u=E==null||I==="3d"?mNe(e):E}else if(!r)switch(e.inputValueType){case ed.Expression:{if((i==null?void 0:i.arcade)==null)return void qT();const E={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},I=i.arcade.arcadeUtils,M=I.getViewInfo(E),k=I.createExecContext(n,M,i.timeZone);if(!g){const L=I.createSyntaxTree(e.valueExpression);g=I.createFunction(L),e.cache.compiledFunc=g}u=I.executeFunction(g,k);break}case ed.Field:o&&(u=o[e.field]);break;case ed.Unknown:u=null}if(!F_(u))return null;if(r||!e.normalizationField)return u;const b=o?parseFloat(o[e.normalizationField]):null;return F_(b)&&b!==0?u/b:null}function mNe(e){let t=null,i=null;const r=e.stops;return r?(t=r[0].value,i=r[r.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}function HT(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(o=>o.type==="size"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void BT("SizeVariable");const n=xce(yNe(r,t,i),r,t,i,r.cache.ipData);return n==null||isNaN(n)?0:n}function jo(e,t,i){return e==null?null:zg(e)?HT(e,t,i):F_(e)?e:null}function Sce(e,t,i){return F_(i)&&e>i?i:F_(t)&&e<t?t:e}function gNe(e,t,i,r){return e+((jo(t.minSize,i,r)||t.minDataValue)??0)}function vNe(e,t,i){const r=e.stops;let n=(r==null?void 0:r.length)&&r[0].size;return n==null&&(n=e.minSize),jo(n,t,i)}function wNe(e,t,i,r){const n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),o=jo(t.minSize,i,r),u=jo(t.maxSize,i,r),f=r!=null?r.shape:void 0;if(e<=t.minDataValue)return o;if(e>=t.maxDataValue)return u;if(o==null||u==null)return null;if(t.scaleBy==="area"&&f){const g=f==="circle",b=g?b4*(o/2)**2:o*o,E=b+n*((g?b4*(u/2)**2:u*u)-b);return g?2*Math.sqrt(E/b4):Math.sqrt(E)}return o+n*(u-o)}function bNe(e,t,i,r){const n=r!=null?r.shape:void 0,o=e/t.minDataValue,u=jo(t.minSize,i,r),f=jo(t.maxSize,i,r);let g=null;return g=n==="circle"?2*Math.sqrt(o*(u/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(o*u**2):o*u,Sce(g,u,f)}function _Ne(e,t,i,r,n){var g,b,E;const[o,u,f]=vD(e,n);if(o===u)return jo((g=t.stops)==null?void 0:g[o].size,i,r);{const I=jo((b=t.stops)==null?void 0:b[o].size,i,r);return I+(jo((E=t.stops)==null?void 0:E[u].size,i,r)-I)*f}}function SNe(e,t,i,r){const n=((r==null?void 0:r.resolution)??1)*GT[t.valueUnit],o=jo(t.minSize,i,r),u=jo(t.maxSize,i,r),{valueRepresentation:f}=t;let g=null;return g=f==="area"?2*Math.sqrt(e/b4)/n:f==="radius"||f==="distance"?2*e/n:e/n,Sce(g,o,u)}function xce(e,t,i,r,n){switch(t.transformationType){case yn.Additive:return gNe(e,t,i,r);case yn.Constant:return vNe(t,i,r);case yn.ClampedLinear:return wNe(e,t,i,r);case yn.Proportional:return bNe(e,t,i,r);case yn.Stops:return _Ne(e,t,i,r,n);case yn.RealWorldSize:return SNe(e,t,i,r);case yn.Identity:return e;case yn.Unknown:return null}}function xNe(e,t,i){const{isScaleDriven:r}=e.cache;if(!(r&&i==="3d"||t))return null;const n={scale:t,view:i};let o=jo(e.minSize,eZ,n),u=jo(e.maxSize,eZ,n);if(o!=null||u!=null){if(o>u){const f=u;u=o,o=f}return{minSize:o,maxSize:u}}}function ENe(e,t,i){if(!e.visualVariables)return;const r=[],n=[],o=[],u=[],f=[];for(const g of e.visualVariables)switch(g.type){case"color":n.push(g);break;case"opacity":o.push(g);break;case"rotation":f.push(g);break;case"size":u.push(g)}return n.forEach(g=>{const b=wce(g,t,i);r.push({variable:g,value:b})}),o.forEach(g=>{const b=bce(g,t,i);r.push({variable:g,value:b})}),f.forEach(g=>{const b=_ce(g,t,i);r.push({variable:g,value:b})}),u.forEach(g=>{const b=HT(g,t,i);r.push({variable:g,value:b})}),r.filter(g=>g.value!=null)}function vD(e,t){if(!t)return;let i=0,r=t.length-1;return t.some((n,o)=>e<n?(r=o,!0):(i=o,!1)),[i,r,(e-t[i])/(t[r]-t[i])]}function INe(e,t,i){const r=["proportional","proportional","proportional"];for(const n of e){const o=n.useSymbolValue?"symbol-value":HT(n,t,i);switch(n.axis){case"width":r[0]=o;break;case"depth":r[1]=o;break;case"height":r[2]=o;break;case"width-and-depth":r[0]=o,r[1]=o;break;case"all":case void 0:case null:r[0]=o,r[1]=o,r[2]=o;break;default:n.axis}}return r}const Im=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:INe,getColor:wce,getOpacity:bce,getRotationAngle:_ce,getSize:HT,getSizeForValue:xce,getSizeFromNumberOrVariable:jo,getSizeRangeAtScale:xNe,getVisualVariableValues:ENe,viewScaleRE:vce},Symbol.toStringTag,{value:"Module"}));var aO;const ax=new gt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),lO=new gt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function tZ(e){if(e!=null)return typeof e=="string"||typeof e=="number"?pNe(e):e.type==="size"?zg(e)?e:(delete(e={...e}).type,new ui(e)):void 0}function iZ(e,t,i){if(typeof e!="object")return e;const r=new ui;return r.read(e,i),r}let ui=aO=class extends j2{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&vce.test(this.valueExpression)}}set index(e){zg(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),zg(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return mce(this)}set maxDataValue(e){e&&this.stops&&(Se.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(Se.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return tZ(e)}readMaxSize(e,t,i){return iZ(e,t,i)}set minDataValue(e){e&&this.stops&&(Se.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(Se.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return tZ(e)}readMinSize(e,t,i){return iZ(e,t,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value):e&&(Se.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return fNe(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,i,r){if(e==="$view.scale"){if(r!=null&&r.messages){const n=this.index,o=typeof n=="string"?n:`visualVariables[${n}]`;r.messages.push(new ne("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:o+".valueExpression",context:r}))}}else t[i]=e}readValueUnit(e){return e?lO.read(e):null}clone(){var e,t;return new aO({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:zg(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:zg(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(e=this.stops)==null?void 0:e.map(i=>i.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}flipSizes(){if(this.transformationType===yn.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===yn.Stops){const e=this.stops;if(!e)return this;const t=e.map(r=>r.size).reverse(),i=e.length;for(let r=0;r<i;r++)e[r].size=t[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var e;return(e=this.stops)==null?void 0:e.map(t=>t.value||0)}};m([w({readOnly:!0})],ui.prototype,"cache",null),m([w({type:ax.apiValues,json:{type:ax.jsonValues,origins:{"web-map":{read:!1}},read:ax.read,write:ax.write}})],ui.prototype,"axis",void 0),m([w()],ui.prototype,"index",null),m([w({type:String,readOnly:!0})],ui.prototype,"inputValueType",null),m([w({type:yce,json:{write:!0}})],ui.prototype,"legendOptions",void 0),m([w({type:Number,value:null,json:{write:!0}})],ui.prototype,"maxDataValue",null),m([w({type:Number,value:null,json:{write:!0}})],ui.prototype,"maxSize",null),m([St("maxSize")],ui.prototype,"castMaxSize",null),m([ke("maxSize")],ui.prototype,"readMaxSize",null),m([w({type:Number,value:null,json:{write:!0}})],ui.prototype,"minDataValue",null),m([w({type:Number,value:null,json:{write:!0}})],ui.prototype,"minSize",null),m([St("minSize")],ui.prototype,"castMinSize",null),m([ke("minSize")],ui.prototype,"readMinSize",null),m([w({type:String,json:{write:!0}})],ui.prototype,"normalizationField",void 0),m([w({readOnly:!0})],ui.prototype,"arcadeRequired",null),m([w({type:String})],ui.prototype,"scaleBy",void 0),m([w({type:[v4],value:null,json:{write:!0}})],ui.prototype,"stops",null),m([w({type:["outline"],json:{write:!0}})],ui.prototype,"target",void 0),m([w({type:String,readOnly:!0})],ui.prototype,"transformationType",null),m([w({type:["size"],json:{type:["sizeInfo"]}})],ui.prototype,"type",void 0),m([w({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],ui.prototype,"useSymbolValue",void 0),m([w({type:String,json:{write:!0}})],ui.prototype,"valueExpression",void 0),m([ke("valueExpression",["valueExpression","expression"])],ui.prototype,"readValueExpression",null),m([Pe("web-scene","valueExpression")],ui.prototype,"writeValueExpressionWebScene",null),m([w({type:["radius","diameter","area","width","distance"],json:{write:!0}})],ui.prototype,"valueRepresentation",void 0),m([w({type:lO.apiValues,json:{write:lO.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],ui.prototype,"valueUnit",void 0),m([ke("valueUnit")],ui.prototype,"readValueUnit",null),ui=aO=m([H("esri.renderers.visualVariables.SizeVariable")],ui);const z2=ui,TNe={color:pce,size:z2,opacity:gD,rotation:fce},$Ne=new gt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),MNe=/^\[([^\]]+)\]$/i;let _4=class extends De{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(t){if(this._resetVariables(),t=t==null?void 0:t.filter(i=>!!i),t==null?void 0:t.length){for(const i of t)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&t.sort((i,r)=>{let n=null;return n=i.target===r.target?0:i.target?1:-1,n});for(let i=0;i<t.length;i++)t[i].index=i;this._set("visualVariables",t)}else this._set("visualVariables",t)}readVariables(t,i,r){const{rotationExpression:n,rotationType:o}=i,u=n==null?void 0:n.match(MNe),f=u==null?void 0:u[1];if(f&&(t||(t=[]),t.push({type:"rotationInfo",rotationType:o,field:f})),t)return t.map(g=>{const b=$Ne.read(g.type),E=TNe[b];E||(Se.getLogger(this).warn(`Unknown variable type: ${b}`),r!=null&&r.messages&&r.messages.push(new ga("visual-variable:unsupported",`visualVariable of type '${b}' is not supported`,{definition:g,context:r})));const I=new E;return I.read(g,r),I})}writeVariables(t,i){const r=[];for(const n of t){const o=n.toJSON(i);o&&r.push(o)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};m([w()],_4.prototype,"visualVariables",null),_4=m([H("esri.renderers.visualVariables.VisualVariableFactory")],_4);const CNe=_4,ANe={base:j2,key:"type",typeMap:{opacity:gD,color:pce,rotation:fce,size:z2}},V2=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new CNe}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,n){return this._vvFactory.readVariables(i,r,n)}writeVisualVariables(i,r,n,o){r[n]=this._vvFactory.writeVariables(i,o)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){const n=this.visualVariables;return n?n.filter(o=>o.type===i&&(typeof r=="string"?o.target===r:r!==!1||!o.target)):[]}async collectVVRequiredFields(i,r){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const o of n)o&&(o.field&&so(i,r,o.field),o.normalizationField&&so(i,r,o.normalizationField),o.valueExpression&&(kNe(o.valueExpression,i,r)||await Vs(i,r,o.valueExpression)))}};return m([w({types:[ANe],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),m([ke("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),m([Pe("visualVariables")],t.prototype,"writeVisualVariables",null),t=m([H("esri.renderers.mixins.VisualVariablesMixin")],t),t};function kNe(e,t,i){const r=cNe(e);return r!=null&&(so(t,i,r),!0)}const wD=[252,146,31,255],LNe=[153,153,153,255],ONe={type:"esriSMS",style:"esriSMSCircle",size:6,color:wD,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},RNe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:wD},PNe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},NNe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},FNe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},DNe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},jNe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},Ece=Dn.fromJSON(ONe),Ice=us.fromJSON(RNe),Tce=gl.fromJSON(PNe),zNe=xm.fromJSON(NNe);function gct(e){if(e==null)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return Ece;case"polyline":return Ice;case"polygon":case"extent":return Tce}return null}const vct=Dn.fromJSON(FNe),wct=us.fromJSON(DNe),bct=gl.fromJSON(jNe),VNe=Wh.fromSimpleMarkerSymbol(Ece),UNe=Sm.fromSimpleLineSymbol(Ice),GNe=Of.fromSimpleFillSymbol(Tce),BNe=new k2({symbolLayers:new Oe([new Lf({material:{color:wD},edges:new doe({size:Uo(1),color:new Ne(LNe)})})])}),qNe=new Sm({symbolLayers:new Oe([new C2({material:{color:new Ne([0,0,0])},size:Uo(1)})])}),HNe=new Of({symbolLayers:new Oe([new Lf({outline:{color:new Ne([0,0,0]),size:Uo(1)}})])});function _ct(e){if(e==null)return null;switch(e.type){case"mesh":return BNe;case"point":case"multipoint":return VNe;case"polyline":return UNe;case"polygon":case"extent":return GNe}return null}const rZ="#useCIMFallbackSymbology()",Vh={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function Xv(e,t=Vh){var g,b,E,I;if(!e)return{symbol:null};const{retainId:i=Vh.retainId,ignoreDrivers:r=Vh.ignoreDrivers,hasLabelingContext:n=Vh.hasLabelingContext,retainCIM:o=Vh.retainCIM,cimFallbackEnabled:u=Vh.cimFallbackEnabled}=t;let f=null;if(Pc(e)||e instanceof Em)f=e.clone();else if(e.type==="cim"){const M=(b=(g=e.data)==null?void 0:g.symbol)==null?void 0:b.type;switch(M){case"CIMPointSymbol":f=o?e.clone():Wh.fromCIMSymbol(e);break;case"CIMLineSymbol":u&&(f=qNe.clone(),(E=t==null?void 0:t.logWarning)==null||E.call(t,rZ,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":u&&(f=HNe.clone(),(I=t==null?void 0:t.logWarning)==null||I.call(t,rZ,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!f)return{error:new ne("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${M||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof us)f=Sm.fromSimpleLineSymbol(e);else if(e instanceof Dn)f=Wh.fromSimpleMarkerSymbol(e);else if(e instanceof L2)f=Wh.fromPictureMarkerSymbol(e);else if(e instanceof gl)f=t.geometryType&&t.geometryType==="mesh"?k2.fromSimpleFillSymbol(e):Of.fromSimpleFillSymbol(e);else{if(!(e instanceof xm))return{error:new ne("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};f=n?wT.fromTextSymbol(e):Wh.fromTextSymbol(e)}return i&&f&&f.type!=="cim"&&(f.id=e.id),r&&Pc(f)&&f.symbolLayers.forEach(M=>M.ignoreDrivers=!0),{symbol:f}}function UI(e,t,i,r){const n=$ce(e,{},{context:r,isLabelSymbol:!1});n!=null&&(t[i]=n)}function nZ(e,t,i,r){const n=$ce(e,{},{context:r,isLabelSymbol:!0});n!=null&&(t[i]=n)}function sZ(e){return e instanceof _m||e instanceof Em}function WNe(e){return e instanceof _m&&(e.type==="polygon-3d"||e.type==="line-3d")}function $ce(e,t,i){var f;if(e==null)return null;const{context:r,isLabelSymbol:n}=i,o=r==null?void 0:r.origin,u=r==null?void 0:r.messages;if(o==="web-scene"&&!sZ(e)){const g=Xv(e,{retainCIM:!0,hasLabelingContext:n});return g.symbol!=null?g.symbol.write(t,r):(u==null||u.push(new ne("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:g.error})),null)}return T8(r==null?void 0:r.layer)&&WNe(e)?(u==null||u.push(new ne("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported on layers of type '${(f=r==null?void 0:r.layer)==null?void 0:f.declaredClass}'.`,{symbol:e,context:r})),null):(o==="web-map"||o==="portal-item"&&!T8(r==null?void 0:r.layer))&&sZ(e)?(u==null||u.push(new ne("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:r})),null):e.write(t,r)}function Mce(e,t){return KTe(e,null,t)}const WT={types:Uoe,json:{write:{writer:UI},origins:{"web-scene":{types:SB,write:{writer:UI},read:{reader:f2({types:SB})}}}}},bD=uN({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},WT),_D={types:{base:ls,key:"type",typeMap:{"simple-fill":il.typeMap["simple-fill"],"picture-fill":il.typeMap["picture-fill"],"polygon-3d":il.typeMap["polygon-3d"],cim:il.typeMap.cim}},json:{write:{writer:UI},origins:{"web-scene":{type:Of,write:{writer:UI}}}}},S4={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}};var uO;let tp=uO=class extends be{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var e;return new uO({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:((e=this.symbol)==null?void 0:e.clone())??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};m([w({type:String,json:{write:!0}})],tp.prototype,"description",void 0),m([w({type:String,json:{write:!0}})],tp.prototype,"label",void 0),m([w({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],tp.prototype,"minValue",void 0),m([w({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],tp.prototype,"maxValue",void 0),m([w(bD)],tp.prototype,"symbol",void 0),tp=uO=m([H("esri.renderers.support.ClassBreakInfo")],tp);const GI=tp,ZNe=_n()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let Fb=class extends It(be){constructor(t){super(t),this.title=null,this.order=null}};m([w({type:String,json:{write:!0}})],Fb.prototype,"title",void 0),m([Ke(ZNe)],Fb.prototype,"order",void 0),Fb=m([H("esri.renderers.support.RendererLegendOptions")],Fb);const SD=Fb;var cO;const Cce="log",x4="percent-of-total",E4="field",lx=new gt({esriNormalizeByLog:Cce,esriNormalizeByPercentOfTotal:x4,esriNormalizeByField:E4}),JNe=ir(GI);let Kr=cO=class extends V2(yd){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,i){if(!Array.isArray(e))return;let r=t.minValue;return e.map(n=>{const o=new GI;return o.read(n,i),o.minValue==null&&(o.minValue=r),o.maxValue==null&&(o.maxValue=o.minValue),r=o.maxValue,o})}writeClassBreakInfos(e,t,i,r){const n=e.map(o=>o.write({},r));this._areClassBreaksConsecutive()&&n.forEach(o=>delete o.classMinValue),t[i]=n}castField(e){return e==null?e:typeof e=="function"?(Se.getLogger(this).error(".field: field must be a string value"),null):rS(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=this.normalizationTotal!=null;return t||i?(e=t&&E4||i&&x4||null,t&&i&&Se.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==E4&&e!==x4||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,i){let r=null;r=typeof e=="number"?new GI({minValue:e,maxValue:t,symbol:Goe(i)}):JNe(he(e)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]===e&&n[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(t==null?void 0:t.arcade)==null&&Se.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let i=t;this.valueExpression&&(t==null?void 0:t.arcade)==null&&(i={...i,arcade:await ad()});const r=this.getBreakIndex(e,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void Se.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(t==null?void 0:t.arcade)==null){const n=await ad(),{arcadeUtils:o}=n;o.hasGeometryOperations(this.valueExpression)&&await o.enableGeometryOperations(),i={...i,arcade:n}}const r=this.getBreakIndex(e,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((r,n)=>r+n.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var e,t;return new cO({field:this.field,backgroundFillSymbol:(e=this.backgroundFillSymbol)==null?void 0:e.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(t=this.defaultSymbol)==null?void 0:t.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:he(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:he(this.visualVariables),legendOptions:he(this.legendOptions),authoringInfo:he(this.authoringInfo)})}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),Vs(e,t,this.valueExpression)];so(e,t,this.field),so(e,t,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:n,arcade:o,timeZone:u}=t??{},{valueExpression:f}=this;let g=this._compiledValueExpression.valueExpression===f?this._compiledValueExpression.compiledFunction:null;const b=o.arcadeUtils;if(!g){const I=b.createSyntaxTree(f);g=b.createFunction(I),this._compiledValueExpression.compiledFunction=g}this._compiledValueExpression.valueExpression=f;const E=b.executeFunction(g,b.createExecContext(e,b.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),u));return this._getBreakIndexfromInfos(E)}_getBreakIndexForField(e){const t=this.field,i=e.attributes,r=this.normalizationType;let n=parseFloat(i[t]);if(r){const o=this.normalizationTotal,u=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===Cce)n=Math.log(n)*Math.LOG10E;else if(r!==x4||o==null||isNaN(o)){if(r===E4&&!isNaN(u)){if(isNaN(n)||isNaN(u))return-1;n/=u}}else n=n/o*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return i}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}};m([w(_D)],Kr.prototype,"backgroundFillSymbol",void 0),m([w({type:[GI]})],Kr.prototype,"classBreakInfos",void 0),m([ke("classBreakInfos")],Kr.prototype,"readClassBreakInfos",null),m([Pe("classBreakInfos")],Kr.prototype,"writeClassBreakInfos",null),m([w({type:String,json:{write:!0}})],Kr.prototype,"defaultLabel",void 0),m([w(WT)],Kr.prototype,"defaultSymbol",void 0),m([w({type:String,json:{write:!0}})],Kr.prototype,"field",void 0),m([St("field")],Kr.prototype,"castField",null),m([w({type:Boolean})],Kr.prototype,"isMaxInclusive",void 0),m([w({type:SD,json:{write:!0}})],Kr.prototype,"legendOptions",void 0),m([w({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Kr.prototype,"minValue",null),m([w({type:String,json:{write:!0}})],Kr.prototype,"normalizationField",void 0),m([w({type:Number,json:{write:!0}})],Kr.prototype,"normalizationTotal",void 0),m([w({type:lx.apiValues,value:null,json:{type:lx.jsonValues,read:lx.read,write:lx.write}})],Kr.prototype,"normalizationType",null),m([Ke({classBreaks:"class-breaks"})],Kr.prototype,"type",void 0),m([w({type:String,json:{write:!0}})],Kr.prototype,"valueExpression",void 0),m([w({type:String,json:{write:!0}})],Kr.prototype,"valueExpressionTitle",void 0),Kr=cO=m([H("esri.renderers.ClassBreaksRenderer")],Kr);const Ace=Kr;function KNe(e){return"timeZone"in e}function YNe(e){return"timeZone"in e}function XNe(e){return"dateFieldsTimeZone"in e}const QNe=new Map;let kce=class I4{static fromJSON(t){return new I4(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new I4(t.fields??[],aZ(t))}static fromLayerJSON(t){return new I4(t.fields??[],aZ(t))}constructor(t=[],i){var n;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=t||[],this._timeZoneByFieldName=i?new Map(i):null;const r=[];for(const o of this.fields){const u=o==null?void 0:o.name,f=oZ(u);if(u&&f){const g=ry(u);this._fieldsMap.set(u,o),this._fieldsMap.set(g,o),this._normalizedFieldsMap.set(f,o),r.push(`${g}:${o.type}:${(n=this._timeZoneByFieldName)==null?void 0:n.get(u)}`),eoe(o)?(this.dateFields.push(o),this._dateFieldsSet.add(o)):SF(o)&&(this._numericFieldsSet.add(o),this.numericFields.push(o)),fB(o)||yB(o)||(o.editable=o.editable==null||!!o.editable,o.nullable=o.nullable==null||!!o.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)fB(t)||yB(t)||t.nullable||C6e(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===(t==null?void 0:t.uid)}has(t){return this.get(t)!=null}get(t){if(!t)return;let i=this._fieldsMap.get(t);return i||(i=this._fieldsMap.get(ry(t))??this._normalizedFieldsMap.get(oZ(t)),i&&this._fieldsMap.set(t,i),i)}getTimeZone(t){const i=this.get(t&&typeof t!="string"?t.name:t);return i?this._timeZoneByFieldName?this._timeZoneByFieldName.get(i.name):i.type==="date"||i.type==="esriFieldTypeDate"?(Se.getLogger("esri.layers.support.FieldsIndex").error(new ne("getTimeZone:no-timezone-information",`no time zone information for field '${i.name}'`)),kc):Lce.has(i.type)?Qy:null:null}getLuxonTimeZone(t){const i=this.getTimeZone(t);return i?i===Qy?au.instance:i===kc?tn.utcInstance:c2(QNe,i,()=>Vo.create(i)):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return xF(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){var i;return((i=this.get(t))==null?void 0:i.name)??void 0}toJSON(){return{fields:this.fields.map(t=>qE(t)?t.toJSON():t),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function ry(e){return e.trim().toLowerCase()}function oZ(e){var t;return((t=p6e(e))==null?void 0:t.toLowerCase())??""}const Lce=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function aZ(e){const t=new Map;if(!e.fields)return t;const i=e.datesInUnknownTimezone===!0,{timeInfo:r,editFieldsInfo:n}=e,o=(r?"startField"in r?r.startField:r.startTimeField:"")??"",u=(r?"endField"in r?r.endField:r.endTimeField:"")??"",f=XNe(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?E9(e.dateFieldsTimeReference):null,g=n?KNe(n)?n.timeZone??f:n.dateFieldsTimeReference?E9(n.dateFieldsTimeReference):f??kc:null,b=r?YNe(r)?r.timeZone??f:r.timeReference?E9(r.timeReference):f:null,E=new Map([[ry((n==null?void 0:n.creationDateField)??""),g],[ry((n==null?void 0:n.editDateField)??""),g],[ry(o),b],[ry(u),b]]);for(const{name:I,type:M}of e.fields)if(Lce.has(M))t.set(I,Qy);else if(M!=="date"&&M!=="esriFieldTypeDate")t.set(I,null);else if(i)t.set(I,Qy);else{const k=E.get(ry(I??""))??f;t.set(I,k)}return t}function BI(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function eFe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Oce(e,t,i,r,n){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e}function tFe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function Rce(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function Pce(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function Nce(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function iFe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function rFe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function nFe(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e}function sFe(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e}function oFe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function aFe(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function lFe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e}function Fce(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(i*i+r*r+n*n+o*o)}function Dce(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2],o=t[3]-e[3];return i*i+r*r+n*n+o*o}function jce(e){const t=e[0],i=e[1],r=e[2],n=e[3];return Math.sqrt(t*t+i*i+r*r+n*n)}function zce(e){const t=e[0],i=e[1],r=e[2],n=e[3];return t*t+i*i+r*r+n*n}function uFe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function cFe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function hFe(e,t){const i=t[0],r=t[1],n=t[2],o=t[3];let u=i*i+r*r+n*n+o*o;return u>0&&(u=1/Math.sqrt(u),e[0]=i*u,e[1]=r*u,e[2]=n*u,e[3]=o*u),e}function Vce(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Uce(e,t,i,r){const n=t[0],o=t[1],u=t[2],f=t[3];return e[0]=n+r*(i[0]-n),e[1]=o+r*(i[1]-o),e[2]=u+r*(i[2]-u),e[3]=f+r*(i[3]-f),e}function dFe(e,t=1){const i=hT;let r,n,o,u,f,g;do r=2*i()-1,n=2*i()-1,f=r*r+n*n;while(f>=1);do o=2*i()-1,u=2*i()-1,g=o*o+u*u;while(g>=1);const b=Math.sqrt((1-f)/g);return e[0]=t*r,e[1]=t*n,e[2]=t*o*b,e[3]=t*u*b,e}function pFe(e,t,i){const r=t[0],n=t[1],o=t[2],u=t[3];return e[0]=i[0]*r+i[4]*n+i[8]*o+i[12]*u,e[1]=i[1]*r+i[5]*n+i[9]*o+i[13]*u,e[2]=i[2]*r+i[6]*n+i[10]*o+i[14]*u,e[3]=i[3]*r+i[7]*n+i[11]*o+i[15]*u,e}function fFe(e,t,i){const r=t[0],n=t[1],o=t[2],u=i[0],f=i[1],g=i[2],b=i[3],E=b*r+f*o-g*n,I=b*n+g*r-u*o,M=b*o+u*n-f*r,k=-u*r-f*n-g*o;return e[0]=E*b+k*-u+I*-g-M*-f,e[1]=I*b+k*-f+M*-u-E*-g,e[2]=M*b+k*-g+E*-f-I*-u,e[3]=t[3],e}function yFe(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function mFe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function xD(e,t){const i=e[0],r=e[1],n=e[2],o=e[3],u=t[0],f=t[1],g=t[2],b=t[3],E=Vr();return Math.abs(i-u)<=E*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(r-f)<=E*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-g)<=E*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(o-b)<=E*Math.max(1,Math.abs(o),Math.abs(b))}const gFe=Rce,vFe=Pce,wFe=Nce,bFe=Fce,_Fe=Dce,SFe=jce,xFe=zce;Object.freeze(Object.defineProperty({__proto__:null,add:tFe,ceil:iFe,copy:BI,copyVec3:eFe,dist:bFe,distance:Fce,div:wFe,divide:Nce,dot:Vce,equals:xD,exactEquals:mFe,floor:rFe,inverse:cFe,len:SFe,length:jce,lerp:Uce,max:sFe,min:nFe,mul:vFe,multiply:Pce,negate:uFe,normalize:hFe,random:dFe,round:oFe,scale:aFe,scaleAndAdd:lFe,set:Oce,sqrDist:_Fe,sqrLen:xFe,squaredDistance:Dce,squaredLength:zce,str:yFe,sub:gFe,subtract:Rce,transformMat4:pFe,transformQuat:fFe},Symbol.toStringTag,{value:"Module"}));function Nf(){return[0,0,0,0]}function EFe(e){return[e[0],e[1],e[2],e[3]]}function md(e,t,i,r){return[e,t,i,r]}function IFe(e,t,i,r){return[e,t,i,r]}function TFe(e,t=Nf()){const i=Math.min(4,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function $Fe(e,t){return new Float64Array(e,t,4)}function Gce(){return Nf()}function Bce(){return md(1,1,1,1)}function qce(){return md(1,0,0,0)}function Hce(){return md(0,1,0,0)}function Wce(){return md(0,0,1,0)}function Zce(){return md(0,0,0,1)}const MFe=Gce(),CFe=Bce(),AFe=qce(),kFe=Hce(),LFe=Wce(),OFe=Zce();Object.freeze(Object.defineProperty({__proto__:null,ONES:CFe,UNIT_W:OFe,UNIT_X:AFe,UNIT_Y:kFe,UNIT_Z:LFe,ZEROS:MFe,clone:EFe,create:Nf,createView:$Fe,freeze:IFe,fromArray:TFe,fromValues:md,ones:Bce,unitW:Zce,unitX:qce,unitY:Hce,unitZ:Wce,zeros:Gce},Symbol.toStringTag,{value:"Module"}));function Jce(e){return"r"in e&&"g"in e&&"b"in e}function Kce(e){return"h"in e&&"s"in e&&"v"in e}function Yce(e){return"l"in e&&"a"in e&&"b"in e}function Xce(e){return"l"in e&&"c"in e&&"h"in e}function RFe(e){return"x"in e&&"y"in e&&"z"in e}const PFe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],NFe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function Qce(e,t){const i=[];let r,n;if(e[0].length!==t.length)throw new Error("dimensions do not match");const o=e.length,u=e[0].length;let f=0;for(r=0;r<o;r++){for(f=0,n=0;n<u;n++)f+=e[r][n]*t[n];i.push(f)}return i}function ehe(e){const t=[e.r/255,e.g/255,e.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=Qce(PFe,t);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function ED(e){const t=Qce(NFe,[e.x/100,e.y/100,e.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function the(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function ihe(e){const t=e.l,i=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function FFe(e){const t=e.l,i=e.a,r=e.b,n=Math.sqrt(i*i+r*r);let o=Math.atan2(r,i);return o=o>0?o:o+2*Math.PI,{l:t,c:n,h:o}}function DFe(e){const t=e.l,i=e.c,r=e.h;return{l:t,a:i*Math.cos(r),b:i*Math.sin(r)}}function jFe(e){return the(ehe(e))}function zFe(e){return ED(ihe(e))}function VFe(e){return FFe(the(ehe(e)))}function UFe(e){return ED(ihe(DFe(e)))}function GFe(e){const t=e.r,i=e.g,r=e.b,n=Math.max(t,i,r),o=n-Math.min(t,i,r);let u=n,f=o===0?0:n===t?(i-r)/o%6:n===i?(r-t)/o+2:(t-i)/o+4,g=o===0?0:o/u;return f<0&&(f+=6),f*=60,g*=100,u*=100/255,{h:f,s:g,v:u}}function BFe(e){const t=(e.h+360)%360/60,i=e.s/100,r=e.v/100*255,n=r*i,o=n*(1-Math.abs(t%2-1));let u;switch(Math.floor(t)){case 0:u={r:n,g:o,b:0};break;case 1:u={r:o,g:n,b:0};break;case 2:u={r:0,g:n,b:o};break;case 3:u={r:0,g:o,b:n};break;case 4:u={r:o,g:0,b:n};break;case 5:case 6:u={r:n,g:0,b:o};break;default:u={r:0,g:0,b:0}}return u.r=Math.round(u.r+r-n),u.g=Math.round(u.g+r-n),u.b=Math.round(u.b+r-n),u}function Tm(e){return Jce(e)?e:Xce(e)?UFe(e):Yce(e)?zFe(e):RFe(e)?ED(e):Kce(e)?BFe(e):e}function ZT(e){return Kce(e)?e:GFe(Tm(e))}function qFe(e){return Yce(e)?e:jFe(Tm(e))}function xct(e){return Xce(e)?e:VFe(Tm(e))}function HFe(e){let{r:t,g:i,b:r,a:n}=e;return n<1&&(t=Math.round(n*t+255*(1-n)),i=Math.round(n*i+255*(1-n)),r=Math.round(n*r+255*(1-n))),new Ne({r:t,g:i,b:r})}function WFe(e,t){const{r:i,g:r,b:n}=t!=null&&t.ignoreAlpha?e:HFe(e);return .2126*i+.7152*r+.0722*n}var hO;function Ect(e,t=hO.High){return WFe(e,{ignoreAlpha:!0})>t?new Ne([0,0,0,e.a]):new Ne([255,255,255,e.a])}function Ict(e,t){const i=qFe(e);i.l*=1-t;const r=Tm(i),n=e.clone();return n.setColor(r),n.a=e.a,n}function Tct(e,t){const i=e.clone();return i.a*=t,i}function $ct(e,t){const i=ZT(e);i.s*=t;const r=Tm(i),n=e.clone();return n.setColor(r),n.a=e.a,n}function Mct(e){return Ne.toUnitRGBA(e)}function Cct(e){return md(e[0],e[1],e[2],e.length>3?e[3]:1)}function Act(e,t){const i=Ne.toUnitRGBA(e);return i[3]*=t,i}function kct(e,t,i={}){if(e.length===0||t<=0)return[];if((e=e.map(r=>typeof r=="string"?new Ne(r):r)).length===1||t===1){const r=[],n=e[0];for(let o=0;o<t;o++)r.push(n.clone());return r}if(i.shuffle&&(e=oee(he(e),i.seed)),e.length>=t){const r=[],n=(e.length-1)/(t-1);for(let o=0;o<t;o++){const u=Math.round(o*n);r.push(e[u].clone())}return r}return ZFe(e,t,i)}function ZFe(e,t,i={}){const r=[],n=e.length-1,o=Math.ceil((t-e.length)/n);e:for(let u=0;u<n;u++){const f=e[u],g=e[u+1];for(let b=1;b<=o;b++){const E=b/(o+1);if(r.push(JFe(f,g,E,i)),r.length+e.length===t)break e}}return[...e.map(u=>u.clone()),...oee(r,i.seed??1)]}(function(e){e[e.Low=160]="Low",e[e.High=225]="High"})(hO||(hO={}));const v7=(e,t)=>{const i=Math.floor(10*t())-5;return Math.min(255,Math.max(0,e+i))};function JFe(e,t,i,r={}){const n=e.r,o=e.g,u=e.b,f=t.r,g=t.g,b=t.b,E=Math.round(n+(f-n)*i),I=Math.round(o+(g-o)*i),M=Math.round(u+(b-u)*i);if(!r.offset)return new Ne([E,I,M]);const k=see(r.seed);return new Ne([v7(E,k),v7(I,k),v7(M,k)])}function Lct(e){return e?{originPosition:e.originPosition==="upper-left"?"upperLeft":e.originPosition==="lower-left"?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:e.extent!=null?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null}function KFe(e){return e.originPosition==="lowerLeft"&&e.scale.length===4&&e.translate.length===4}function PS(e){if(KFe(e))return e;const{originPosition:t,scale:i,translate:r}=e,n=i[0]??1,o=i[1]??1;return{originPosition:"lowerLeft",scale:[n,t==="lowerLeft"?o:-o,i[2]??1,i[3]??1],translate:[r[0]??0,r[1]??0,r[2]??0,r[3]??0]}}function YFe({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function XFe({scale:e,translate:t},i){return Math.round((i-t[1])/e[1])}function QFe({scale:e,translate:t},i){return Math.round(((i??0)-t[2])/e[2])}function eDe({scale:e,translate:t},i){return i?Math.round((i-t[3])/e[3]):0}function NS({scale:e,translate:t},i){return i*e[0]+t[0]}function FS({scale:e,translate:t},i){return i*e[1]+t[1]}function D_({scale:e,translate:t},i){return(i??0)*e[2]+t[2]}function j_({scale:e,translate:t},i){return i?i*e[3]+t[3]:0}function ID(e,t){return e&&t?nDe:e&&!t?iDe:!e&&t?rDe:tDe}const tDe=(e,t)=>{const i=new Array(t.length);if(!t.length)return i;const r=t[0];let n=NS(e,r[0]),o=FS(e,r[1]);i[0]=[n,o];const{scale:u,originPosition:f}=e,g=u[0],b=f==="lowerLeft"?u[1]:-u[1];for(let E=1;E<t.length;E++){const[I,M]=t[E];n+=g*I,o+=b*M,i[E]=[n,o]}return i},iDe=(e,t)=>{const i=new Array(t.length);if(!t.length)return i;const r=t[0];let n=NS(e,r[0]),o=FS(e,r[1]);i[0]=[n,o,D_(e,r[2])];const{scale:u,originPosition:f}=e,g=u[0],b=f==="lowerLeft"?u[1]:-u[1];for(let E=1;E<t.length;E++){const[I,M,k]=t[E];n+=g*I,o+=b*M,i[E]=[n,o,D_(e,k)]}return i},rDe=(e,t)=>{const i=new Array(t.length);if(!t.length)return i;const r=t[0];let n=NS(e,r[0]),o=FS(e,r[1]);i[0]=[n,o,j_(e,r[2])];const{scale:u,originPosition:f}=e,g=u[0],b=f==="lowerLeft"?u[1]:-u[1];for(let E=1;E<t.length;E++){const[I,M,k]=t[E];n+=g*I,o+=b*M,i[E]=[n,o,j_(e,k)]}return i},nDe=(e,t)=>{const i=new Array(t.length);if(!t.length)return i;const r=t[0];let n=NS(e,r[0]),o=FS(e,r[1]);i[0]=[n,o,D_(e,r[2]),j_(e,r[3])];const{scale:u,originPosition:f}=e,g=u[0],b=f==="lowerLeft"?u[1]:-u[1];for(let E=1;E<t.length;E++){const[I,M,k,L]=t[E];n+=g*I,o+=b*M,i[E]=[n,o,D_(e,k),j_(e,L)]}return i};function rhe(e,t,i){const r=new Array(i.length);for(let n=0;n<i.length;n++)r[n]=t(e,i[n]);return r}function Oct(e,t,i){const r=PS(e);return t.x=YFe(r,i.x),t.y=XFe(r,i.y),i.z!=null&&(t.z=QFe(r,i.z)),i.m!=null&&(t.m=eDe(r,i.m)),t}function sDe(e,t,i,r=(i==null?void 0:i.hasZ)??!1,n=(i==null?void 0:i.hasM)??!1){if(i!=null){const o=PS(e);t.points=ID(r,n)(o,i.points),t.hasZ=r,t.hasM=n}return t}function oDe(e,t,i,r=(i==null?void 0:i.z)!=null,n=(i==null?void 0:i.m)!=null){if(i==null)return t;const o=PS(e);return t.x=NS(o,i.x),t.y=FS(o,i.y),r&&(t.z=D_(o,i.z)),n&&(t.m=j_(o,i.m)),t}function aDe(e,t,i,r=(i==null?void 0:i.hasZ)??!1,n=(i==null?void 0:i.hasM)??!1){if(i!=null){const o=PS(e);t.rings=rhe(o,ID(r,n),i.rings),t.hasZ=r,t.hasM=n}return t}function lDe(e,t,i,r=(i==null?void 0:i.hasZ)??!1,n=(i==null?void 0:i.hasM)??!1){if(i!=null){const o=PS(e);t.paths=rhe(o,ID(r,n),i.paths),t.hasZ=r,t.hasM=n}return t}function uDe(e,t,i,r,n){if(e==null)return null;const o=e.referencesGeometry()&&n?cDe(t,r,n):t,u=e.repurposeFeature(o);try{return e.evaluate({...i,$feature:u},e.services)}catch(f){return Se.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",f),null}}const w7=new Map;function cDe(e,t,i){const{transform:r,hasZ:n,hasM:o}=i;w7.has(t)||w7.set(t,hDe(t));const u=w7.get(t)(e.geometry,r,n,o);return{...e,geometry:u}}function hDe(e){const t={};switch(e){case"esriGeometryPoint":return(i,r,n,o)=>oDe(r,t,i,n,o);case"esriGeometryPolygon":return(i,r,n,o)=>aDe(r,t,i,n,o);case"esriGeometryPolyline":return(i,r,n,o)=>lDe(r,t,i,n,o);case"esriGeometryMultipoint":return(i,r,n,o)=>sDe(r,t,i,n,o);default:return Se.getLogger("esri.views.2d.support.arcadeOnDemand").error(new ne("mapview-arcade",`Unable to handle geometryType: ${e}`)),i=>i}}const dDe=e=>{if(!e)return[0,0,0,0];const{r:t,g:i,b:r,a:n}=e;return[t,i,r,255*n]};let nhe=class sr{static findApplicableOverrides(t,i,r){if(t&&i){if(t.primitiveName){let n=!1;for(const o of r)if(o.primitiveName===t.primitiveName){n=!0;break}if(!n)for(const o of i)o.primitiveName===t.primitiveName&&r.push(o)}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects)for(const n of t.effects)sr.findApplicableOverrides(n,i,r);if(t.symbolLayers)for(const n of t.symbolLayers)sr.findApplicableOverrides(n,i,r);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(t.effects)for(const n of t.effects)sr.findApplicableOverrides(n,i,r);if(t.markerPlacement&&sr.findApplicableOverrides(t.markerPlacement,i,r),t.type==="CIMVectorMarker"){if(t.markerGraphics)for(const n of t.markerGraphics)sr.findApplicableOverrides(n,i,r),sr.findApplicableOverrides(n.symbol,i,r)}else t.type==="CIMCharacterMarker"?sr.findApplicableOverrides(t.symbol,i,r):t.type==="CIMHatchFill"?sr.findApplicableOverrides(t.lineSymbol,i,r):t.type==="CIMPictureMarker"&&sr.findApplicableOverrides(t.animatedSymbolProperties,i,r)}}}static findEffectOverrides(t,i){if(!t)return null;if(t.type==="CIMGeometricEffectDashes"&&pRe(t),!i||!t.primitiveName)return{type:"cim-effect-param",effect:t,overrides:[]};const r=$W(t),n=t.primitiveName,o=[];for(const u of i)u.primitiveName===n&&o.push($W(u));return{type:"cim-effect-param",effect:r,overrides:fRe(o)}}static async resolveSymbolOverrides(t,i,r,n,o,u,f){if(!(t!=null&&t.symbol))return null;let{symbol:g,primitiveOverrides:b}=t;const E=!!b;if(!E&&!n)return g;g=he(g),b=he(b);let I=!0;if(i||(i={attributes:{}},I=!1),E){if(I||(b=b.filter(M=>{var k;return!((k=M.valueExpressionInfo)!=null&&k.expression.includes("$feature"))})),f||(b=b.filter(M=>{var k;return!((k=M.valueExpressionInfo)!=null&&k.expression.includes("$view"))})),b.length>0){const M={spatialReference:r,fields:lRe(i.attributes),geometryType:o};await sr.createRenderExpressions(b,M),sr.evaluateOverrides(b,i,o??"esriGeometryPoint",u,f)}sr.applyOverrides(g,b)}return n&&sr.applyDictionaryTextOverrides(g,i,n,null),g}static async createRenderExpressions(t,i){const r=[];for(const n of t){const o=n.valueExpressionInfo;if(!o||sr._expressionToRenderExpression.has(o.expression))continue;const u=u6e(o.expression,i.spatialReference,i.fields);r.push(u),u.then(f=>sr._expressionToRenderExpression.set(o.expression,f))}r.length>0&&await Promise.all(r)}static evaluateOverrides(t,i,r,n,o){const u={$view:{scale:o==null?void 0:o.scale}};for(const f of t){f.value&&typeof f.value=="object"&&Jce(f.value)&&(f.propertyName==="Color"||f.propertyName==="StrokeColor")&&(f.value=dDe(f.value));const g=f.valueExpressionInfo;if(!g)continue;const b=sr._expressionToRenderExpression.get(g.expression);b&&(f.value=uDe(b,i,u,r,n))}}static applyDictionaryTextOverrides(t,i,r,n,o="Normal"){if(t!=null&&t.type)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const u=t.symbolLayers;if(!u)return;for(const f of u)f&&f.type==="CIMVectorMarker"&&sr.applyDictionaryTextOverrides(f,i,r,n,t.type==="CIMTextSymbol"?t.textCase:o)}break;case"CIMVectorMarker":{const u=t.markerGraphics;if(!u)return;for(const f of u)f&&sr.applyDictionaryTextOverrides(f,i,r,n)}break;case"CIMMarkerGraphic":{const u=t.textString;if(u&&u.includes("[")){const f=sRe(u,r);t.textString=oRe(i,f,n,o)}}}}static applyOverrides(t,i,r,n){if(t.primitiveName){for(const o of i)if(o.primitiveName===t.primitiveName){const u=VT(o.propertyName);if(n&&n.push({cim:t,nocapPropertyName:u,value:t[u]}),r){let f=!1;for(const g of r)g.primitiveName===t.primitiveName&&(f=!0);f||r.push(o)}o.value!=null&&(t[u]=o.value)}}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects)for(const o of t.effects)sr.applyOverrides(o,i,r,n);if(t.symbolLayers)for(const o of t.symbolLayers)sr.applyOverrides(o,i,r,n);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(t.effects)for(const o of t.effects)sr.applyOverrides(o,i,r,n);if(t.type==="CIMVectorMarker"&&t.markerGraphics)for(const o of t.markerGraphics)sr.applyOverrides(o,i,r,n),sr.applyOverrides(o.symbol,i,r,n)}}static restoreOverrides(t){for(const i of t)i.cim[i.nocapPropertyName]=i.value}static buildOverrideKey(t){let i="";for(const r of t)r.value!==void 0&&(i+=`${r.primitiveName}${r.propertyName}${JSON.stringify(r.value)}`);return i}static toValue(t,i){if(t==="DashTemplate")return i.split(" ").map(r=>Number(r));if(t==="Color"){const r=new Ne(i).toRgba();return r[3]*=255,r}return i}};nhe._expressionToRenderExpression=new Map;const lZ="esri.renderers.support.DictionaryLoader",pDe={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let she=class{constructor(t,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new Hue(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=t,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,i){var I;let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(M){if(Or(M))return this._dictionaryPromise=null,null}const n=(I=this._dictionaryVersion)==null?void 0:I.greaterEqual(4,0),o={};if(this.fieldMap)for(const M of this._symbolFields){const k=Uue(this.fieldMap[M],this._fieldIndex);if(k){const L=t.attributes[k];o[M]=n?L:L!=null?""+t.attributes[k]:""}else o[M]=""}let u=null;try{u=r==null?void 0:r(o,i)}catch{return null}if(!u||typeof u!="string"||u==="invalid")return null;const f=u.split(";"),g=[],b=[];for(let M=0;M<f.length;M++){const k=f[M];if(k){if(k.includes("po:")){const L=k.slice(3).split("|");if(L.length===3){const P=L[0],D=L[1];let j=L[2];const z="countrylabel";if(P===z&&D==="TextString"){if(this.fieldMap!=null){let V=this.fieldMap[z];V==null&&(V=z,this.fieldMap[V]=V),t.attributes[V]=j}continue}if(D==="DashTemplate")j=j.split(" ").map(V=>Number(V));else if(D==="Color"){const V=new Ne(j).toRgba();j=[V[0],V[1],V[2],255*V[3]]}else j=Number(j);b.push({primitiveName:P,propertyName:D,value:j,defaultValue:null})}}else if(k.includes("|")){for(const L of k.split("|"))if(this._itemNames.has(L)){g.push(L);break}}else if(this._itemNames.has(k))g.push(k);else if(M===0){g.length=0;let L="Invalid_P";t.geometry!=null&&(Ey(t.geometry)?L="Invalid_A":jN(t.geometry)&&(L="Invalid_L")),g.push(L);break}}}const E=t.geometry==null||!t.geometry.hasZ&&t.geometry.type==="point";return this._cimPartsToCIMSymbol(t,g,b,E,i)}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void Se.getLogger(lZ).error("no valid URL!");const i=Ct(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:t!=null?t.signal:null}),[{data:r}]=await Promise.all([i,ad()]);if(!r)throw this._dictionaryPromise=null,new ne("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:n,dictionary_version:o,expression:u,itemsNames:f}=r,g=u;let b=!1;o&&(this._dictionaryVersion=aue.parse(o),b=this._dictionaryVersion.greaterEqual(4,0)),this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(f),this._symbolFields=n.symbol;const E={};if(this.config){const k=this.config;for(const L in k)E[L]=k[L]}if(n.configuration)for(const k of n.configuration)E.hasOwnProperty(k.name)||(E[k.name]=k.value);const I=[];if(t!=null&&t.fields&&this.fieldMap)for(const k in this.fieldMap){const L=this.fieldMap[k],P=t.fields.filter(D=>D.name.toLowerCase()===(L==null?void 0:L.toLowerCase()));P.length>0&&I.push({...P[0],type:b?P[0].type:"esriFieldTypeString"})}I.length>0&&(this._fieldIndex=new kce(I));const M=c6e(g,t!=null?t.spatialReference:null,I,E).then(k=>{const L={scale:0};return(P,D)=>{if(k==null)return null;const j=k.repurposeFeature({geometry:null,attributes:P});return L.scale=D!=null?D.scale??void 0:void 0,k.evaluate({$feature:j,$view:L},k.services)}}).catch(k=>(Se.getLogger(lZ).error("Creating dictionary expression failed:",k),null));return this._dictionaryPromise=M,M}async _cimPartsToCIMSymbol(t,i,r,n,o){const u=new Array(i.length);for(let b=0;b<i.length;b++)u[b]=this._getSymbolPart(i[b],o);let f=await Promise.all(u);const g=this.fieldMap;if(g){f=he(f);for(const b of f)nhe.applyDictionaryTextOverrides(b,t,g,this._fieldIndex,PL(b))}return new fd({data:fDe(f,r,n)})}async _getSymbolPart(t,i){const r=this._symbolCache.get(t);if(r)return r;if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(u=>u.data);const n=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,t),o=Ct(n,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(t,o),o.finally(()=>this._ongoingRequests.delete(t));try{const u=await o;return this._symbolCache.put(t,u.data),u.data}catch(u){throw u}}};function fDe(e,t,i){if(!e||e.length===0)return null;const r={...e[0]};if(e.length>1){r.effects=null,r.symbolLayers=[];for(const n of e){const o=n;if(o.effects!=null)for(const u of o.symbolLayers)u.effects==null?u.effects=o.effects:u.effects.unshift(...o.effects);r.symbolLayers.unshift(...o.symbolLayers)}}return i&&(r.callout=pDe),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:t}}var dO;let jl=dO=class extends V2(yd){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new she(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,r){r!=null&&r.origin||super.writeVisualVariables(e,t,i,r)}clone(){return new dO({config:he(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:he(this.fieldMap),url:he(this.url),visualVariables:he(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await Vs(e,t,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];t.has(r)&&e.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};m([w({type:she})],jl.prototype,"_loader",null),m([w({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],jl.prototype,"config",void 0),m([w({type:Object,json:{write:!0}})],jl.prototype,"fieldMap",void 0),m([w({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],jl.prototype,"scaleExpression",void 0),m([Pe("scaleExpression")],jl.prototype,"writeData",null),m([w({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],jl.prototype,"scaleExpressionTitle",void 0),m([w({type:String,json:{write:!0}})],jl.prototype,"url",void 0),m([Pe("visualVariables")],jl.prototype,"writeVisualVariables",null),jl=dO=m([H("esri.renderers.DictionaryRenderer")],jl);const yDe=jl;var pO;let ph=pO=class extends be{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(Se.getLogger(this).error(".field: field must be a string value"),null):rS(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var e;return new pO({color:(e=this.color)==null?void 0:e.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};m([w({type:Ne,json:{type:[Number],write:!0}})],ph.prototype,"color",void 0),m([w({type:String,json:{write:!0}})],ph.prototype,"field",void 0),m([St("field")],ph.prototype,"castField",null),m([w({type:String,json:{write:!0}})],ph.prototype,"label",void 0),m([w({type:String,json:{write:!0}})],ph.prototype,"valueExpression",void 0),m([w({type:String,json:{write:!0}})],ph.prototype,"valueExpressionTitle",void 0),ph=pO=m([H("esri.renderers.support.AttributeColorInfo")],ph);const ohe=ph;var fO;let T4=fO=class extends be{constructor(){super(...arguments),this.unit=null}clone(){return new fO({unit:this.unit})}};m([w({type:String,json:{write:!0}})],T4.prototype,"unit",void 0),T4=fO=m([H("esri.renderers.support.DotDensityLegendOptions")],T4);const mDe=T4;var yO;let vo=yO=class extends V2(yd){constructor(e){super(e),this.attributes=null,this.backgroundColor=new Ne([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new us,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new gl({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var e;return((e=this.attributes)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new yO({attributes:he(this.attributes),backgroundColor:he(this.backgroundColor),dotBlendingEnabled:he(this.dotBlendingEnabled),dotShape:he(this.dotShape),dotSize:he(this.dotSize),dotValue:he(this.dotValue),legendOptions:he(this.legendOptions),outline:he(this.outline),referenceScale:he(this.referenceScale),seed:he(this.seed),visualVariables:he(this.visualVariables),authoringInfo:he(this.authoringInfo)})}getControllerHash(){var t;return`${(t=this.attributes)==null?void 0:t.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes??[])i.valueExpression&&await Vs(e,t,i.valueExpression),i.field&&e.add(i.field)}};m([w({type:[ohe],json:{write:!0}})],vo.prototype,"attributes",void 0),m([w({type:Ne,json:{write:!0}})],vo.prototype,"backgroundColor",void 0),m([w({type:Boolean,json:{write:!0}})],vo.prototype,"dotBlendingEnabled",void 0),m([w({type:String,json:{write:!1}})],vo.prototype,"dotShape",void 0),m([w({type:Number,json:{write:!0}})],vo.prototype,"dotSize",void 0),m([w({type:mDe,json:{write:!0}})],vo.prototype,"legendOptions",void 0),m([w({type:us,json:{default:null,write:!0}})],vo.prototype,"outline",void 0),m([w({type:Number,json:{write:!0}})],vo.prototype,"dotValue",void 0),m([w({type:Number,json:{write:!0}})],vo.prototype,"referenceScale",void 0),m([w({type:Number,json:{write:!0}})],vo.prototype,"seed",void 0),m([Ke({dotDensity:"dot-density"})],vo.prototype,"type",void 0),vo=yO=m([H("esri.renderers.DotDensityRenderer")],vo);const gDe=vo;let O1=class extends It(be){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};m([w({type:String,json:{write:!0}})],O1.prototype,"minLabel",void 0),m([w({type:String,json:{write:!0}})],O1.prototype,"maxLabel",void 0),m([w({type:String,json:{write:!0}})],O1.prototype,"title",void 0),O1=m([H("esri.renderers.support.HeatmapLegendOptions")],O1);const TD=2.4;function vDe(e){return Uo(e*TD)}function wDe(e){return hr(e)/TD}function bDe(e,t,i,r){let{color:n,ratio:o}=t,{color:u,ratio:f}=i;f===o&&(f===1?o-=1e-6:f+=1e-6);const g=oo((r-o)/(f-o),0,1);Uce(e,n.toArray(),u.toArray(),g)}function Nct(e){const i=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:f})=>f>=0&&f<=1).sort((f,g)=>f.ratio-g.ratio).map(({color:f,ratio:g})=>({color:f,ratio:Math.max(g,.001)})),e.length<1)return i;let r=e[0],n=e[0],o=1;const u=Nf();for(let f=0;f<512;f++){const g=(f+.5)/512;for(;g>n.ratio&&o<e.length;)r=n,n=e[o++];bDe(u,r,n,g),i.set(u,4*f)}return i}function Fct(e,t,i){const r=Math.sqrt(e**2+t**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function Dct(e){return typeof e=="function"?e:e?t=>+t[e]:()=>1}var mO;function uZ(e){if(e!=null){const{maxDensity:t,minDensity:i,radius:r}=e;if(t!=null||i!=null||r!=null){const{blurRadius:n,maxPixelIntensity:o,minPixelIntensity:u,...f}=e;return f}}return e}let $n=mO=class extends yd{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new L3({ratio:0,color:new Ne("rgba(255, 140, 0, 0)")}),new L3({ratio:.75,color:new Ne("rgba(255, 140, 0, 1)")}),new L3({ratio:.9,color:new Ne("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(e){return uZ(e)}get blurRadius(){return wDe(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",vDe(e)),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(TD**2*this.blurRadius**4)}read(e,t){e=uZ(e),super.read(e,t)}getSymbol(){return new Dn}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&so(e,t,i),r&&typeof r=="string"&&await Vs(e,t,r)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new mO({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:he(this.colorStops),field:this.field,legendOptions:he(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};m([w({type:mD,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],$n.prototype,"authoringInfo",void 0),m([w({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],$n.prototype,"blurRadius",null),m([w({type:[L3],json:{write:!0}})],$n.prototype,"colorStops",void 0),m([w({type:String,json:{write:!0}})],$n.prototype,"field",void 0),m([w({type:O1,json:{write:!0}})],$n.prototype,"legendOptions",void 0),m([w({type:Number,json:{write:!0}})],$n.prototype,"maxDensity",void 0),m([w({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],$n.prototype,"maxPixelIntensity",null),m([w({type:Number,json:{write:!0}})],$n.prototype,"minDensity",void 0),m([w({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],$n.prototype,"minPixelIntensity",null),m([w({type:Number,cast:Gt,json:{write:!0}})],$n.prototype,"radius",void 0),m([w({type:Number,range:{min:0},json:{default:0,write:!0}})],$n.prototype,"referenceScale",void 0),m([Ke({heatmap:"heatmap"})],$n.prototype,"type",void 0),m([w({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],$n.prototype,"valueExpression",void 0),m([w({type:String})],$n.prototype,"valueExpressionTitle",void 0),m([w({readOnly:!0})],$n.prototype,"_pixelIntensityToDensity",null),$n=mO=m([H("esri.renderers.HeatmapRenderer")],$n);const ahe=$n;let ny=class extends It(be){constructor(){super(...arguments),this.color=new Ne([0,0,0,0]),this.label=null,this.threshold=0}};m([w({type:Ne,json:{write:!0}})],ny.prototype,"color",void 0),m([w({type:String,json:{write:!0}})],ny.prototype,"label",void 0),m([w({type:Number,range:{min:0,max:1},json:{write:!0}})],ny.prototype,"threshold",void 0),ny=m([H("esri.renderers.support.OthersCategory")],ny);const _De={base:j2,key:"type",typeMap:{size:z2,opacity:gD}};let wo=class extends V2(It(yd)){constructor(t){super(t),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new Ne([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new ny,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){var t;return new Dn({size:this.size?this.size/2+(((t=this.outline)==null?void 0:t.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(cr)}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((i,r)=>i+r.getAttributeHash(),""))??""}getMeshHash(){return this.getSymbols().reduce((t,i)=>t+JSON.stringify(i),"")}async collectRequiredFields(t,i){await this.collectVVRequiredFields(t,i);for(const r of this.attributes)r.valueExpression&&await Vs(t,i,r.valueExpression),r.field&&t.add(r.field)}};m([w({type:[ohe],json:{write:!0}})],wo.prototype,"attributes",void 0),m([w(_D)],wo.prototype,"backgroundFillSymbol",void 0),m([w({type:Ne,json:{write:!0}})],wo.prototype,"defaultColor",void 0),m([w({type:String,json:{write:!0}})],wo.prototype,"defaultLabel",void 0),m([w({type:Number,range:{min:0,max:1},json:{write:!0}})],wo.prototype,"holePercentage",void 0),m([w({type:ny,json:{write:!0}})],wo.prototype,"othersCategory",void 0),m([w({type:SD,json:{write:!0}})],wo.prototype,"legendOptions",void 0),m([w({type:us,json:{default:null,write:!0}})],wo.prototype,"outline",void 0),m([w({type:Number,cast:Gt,json:{write:!0}})],wo.prototype,"size",void 0),m([Ke({pieChart:"pie-chart"})],wo.prototype,"type",void 0),m([w({types:[_De]})],wo.prototype,"visualVariables",void 0),wo=m([H("esri.renderers.PieChartRenderer")],wo);const SDe=wo;var gO;let P0=gO=class extends V2(yd){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new gO({description:this.description,label:this.label,symbol:he(this.symbol),visualVariables:he(this.visualVariables),authoringInfo:he(this.authoringInfo)})}};m([w({type:String,json:{write:!0}})],P0.prototype,"description",void 0),m([w({type:String,json:{write:!0}})],P0.prototype,"label",void 0),m([w(bD)],P0.prototype,"symbol",void 0),m([Ke({simple:"simple"})],P0.prototype,"type",void 0),P0=gO=m([H("esri.renderers.SimpleRenderer")],P0);const U2=P0,xDe=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function vO(e){return e instanceof De}function cZ(e){return e instanceof Oe?Object.keys(e.items):vO(e)?zo(e).keys():e?Object.keys(e):[]}function ux(e,t){return e instanceof Oe?e.items[t]:e[t]}function EDe(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function O3(e){return e?e.declaredClass:null}function lhe(e,t){var I;const i=e.diff;if(i&&typeof i=="function")return i(e,t);const r=cZ(e),n=cZ(t);if(r.length===0&&n.length===0)return;if(!r.length||!n.length||EDe(e,t))return{type:"complete",oldValue:e,newValue:t};const o=n.filter(M=>!r.includes(M)),u=r.filter(M=>!n.includes(M)),f=r.filter(M=>n.includes(M)&&ux(e,M)!==ux(t,M)).concat(o,u).sort(),g=O3(e);if(g&&xDe.has(g)&&f.length)return{type:"complete",oldValue:e,newValue:t};let b;const E=vO(e)&&vO(t);for(const M of f){const k=ux(e,M),L=ux(t,M);let P;if((E||typeof k!="function"&&typeof L!="function")&&k!==L&&(k!=null||L!=null)){if(i&&i[M]&&typeof i[M]=="function")P=(I=i[M])==null?void 0:I.call(i,k,L);else if(k instanceof Date&&L instanceof Date){if(k.getTime()===L.getTime())continue;P={type:"complete",oldValue:k,newValue:L}}else P=typeof k=="object"&&typeof L=="object"&&O3(k)===O3(L)?lhe(k,L):{type:"complete",oldValue:k,newValue:L};P!=null&&(b!=null?b.diff[M]=P:b={type:"partial",diff:{[M]:P}})}}return b}function Vct(e,t){return IDe(e,t)}function IDe(e,t){if(e==null)return!1;const i=t.split(".");let r=e;for(const n of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const o=r.diff[n];if(!o)return!1;r=o}}return!0}function Uct(e,t){if(!e)return!1;if(e.type==="partial"){const i=Object.keys(e.diff);return i.length===1&&i[0]===t}return!1}function TDe(e,t){if(typeof e!="function"&&typeof t!="function"&&(e!=null||t!=null))return e==null||t==null||typeof e=="object"&&typeof t=="object"&&O3(e)!==O3(t)?{type:"complete",oldValue:e,newValue:t}:lhe(e,t)}function cx(e){if(e==null)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const i of t.added)if(!cx(i))return!1;for(const i of t.removed)if(!cx(i))return!1;for(const i of t.changed)if(!cx(i))return!1;return!0}case"partial":for(const t in e.diff)if(!cx(e.diff[t]))return!1;return!0}}let R1=class extends It(be){constructor(t){super(t),this.value=null,this.value2=null,this.value3=null}};m([w(S4)],R1.prototype,"value",void 0),m([w(S4)],R1.prototype,"value2",void 0),m([w(S4)],R1.prototype,"value3",void 0),R1=m([H("esri.renderers.support.UniqueValue")],R1);const mv=R1;let ip=class extends It(be){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(t){if(t==null)return null;const i=typeof(t=Array.isArray(t)?t:[t])[0];return i==="string"||i==="number"?t.map(r=>new mv({value:r})):i==="object"?t[0]instanceof mv?t:t.map(r=>new mv(r)):null}};m([w({type:String,json:{write:!0}})],ip.prototype,"description",void 0),m([w({type:String,json:{write:!0}})],ip.prototype,"label",void 0),m([w(WT)],ip.prototype,"symbol",void 0),m([w({type:[mv],json:{type:[[String]],read:{reader:e=>e?e.map(t=>new mv({value:t[0],value2:t[1],value3:t[2]})):null},write:{writer:(e,t)=>{const i=[];for(const r of e){const n=[r.value,r.value2,r.value3].filter(cr).map(o=>o.toString());i.push(n)}t.values=i}}}})],ip.prototype,"values",void 0),m([St("values")],ip.prototype,"castValues",null),ip=m([H("esri.renderers.support.UniqueValueClass")],ip);const uhe=ip;let Db=class extends It(be){constructor(t){super(t),this.heading=null,this.classes=null}};m([w({type:String,json:{write:!0}})],Db.prototype,"heading",void 0),m([w({type:[uhe],json:{write:!0}})],Db.prototype,"classes",void 0),Db=m([H("esri.renderers.support.UniqueValueGroup")],Db);const wO=Db;var bO;let N0=bO=class extends be{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new bO({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var t;const e=JSON.stringify((t=this.symbol)==null?void 0:t.toJSON());return`${this.value}.${e}`}};m([w({type:String,json:{write:!0}})],N0.prototype,"description",void 0),m([w({type:String,json:{write:!0}})],N0.prototype,"label",void 0),m([w(bD)],N0.prototype,"symbol",void 0),m([w(S4)],N0.prototype,"value",void 0),N0=bO=m([H("esri.renderers.support.UniqueValueInfo")],N0);const R3=N0,hZ=new Map;async function $De(e,t){try{return{data:(await $D(e,t)).data,baseUrl:TN(e),styleUrl:e}}catch(i){return mc(i),null}}function MDe(e,t,i){var g;const r=t.portal!=null?t.portal:Ur.getDefault();let n;const o=`${r.url} - ${(g=r.user)==null?void 0:g.username} - ${e}`,u=hZ.get(o);if(u)return u;const f=CDe(e,r,i).then(b=>(n=b,b.fetchData())).then(b=>({data:b,baseUrl:n.itemUrl??"",styleName:e}));return hZ.set(o,f),f}function CDe(e,t,i){return t.load(i).then(()=>{const r=new lu({disableExtraQuery:!0,query:`owner:${dZ} AND type:${pZ} AND typekeywords:"${e}"`});return t.queryItems(r,i)}).then(({results:r})=>{var u;let n=null;const o=e.toLowerCase();if(r&&Array.isArray(r)){for(const f of r)if(((u=f.typeKeywords)==null?void 0:u.some(b=>b.toLowerCase()===o))&&f.type===pZ&&f.owner===dZ){n=f;break}}if(!n)throw new ne("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return n.load(i)})}function che(e,t,i){return(e==null?void 0:e.styleUrl)!=null?$De(e.styleUrl,i):(e==null?void 0:e.styleName)!=null?MDe(e.styleName,t,i):Promise.reject(new ne("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function hhe(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function ADe(e,t,i=["gltf"]){if(t==="cimRef")return encodeURI(e.cimRef);if(e.formatInfos&&!we("enable-feature:force-wosr"))for(const r of i){const n=e.formatInfos.find(o=>o.type===r);if(n)return n.href}return encodeURI(e.webRef)}function $D(e,t){const i={responseType:"json",query:{f:"json"},...t};return Ct(sl(e),i)}const dZ="esri_en",pZ="Style",kDe="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var jb;const dhe="esri.renderers.UniqueValueRenderer",kd=()=>Se.getLogger(dhe),fZ="uvInfos-watcher",yZ="uvGroups-watcher",LDe=",",ODe=ir(R3);function RDe(e){const{field1:t,field2:i,field3:r,fieldDelimiter:n,uniqueValueInfos:o,valueExpression:u}=e,f=!(!t||!i);return[{classes:(o??[]).map(g=>{var j;const{symbol:b,label:E,value:I,description:M}=g,[k,L,P]=f?((j=I==null?void 0:I.toString())==null?void 0:j.split(n||""))||[]:[I],D=[];return(t||u)&&D.push(k),i&&D.push(L),r&&D.push(P),{symbol:b,label:E,values:[D],description:M}})}]}function qm(e){return e!=null&&e!==""&&(typeof e!="string"||e.trim()!==""&&e.toLowerCase()!=="<null>")||(e=null),e+""}let Ji=jb=class extends V2(yd){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,i){if(!t&&!i)return;if(!t||!i)return{type:"complete",oldValue:t,newValue:i};let r=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let o=0;o<i.length;o++){const u=t.find(f=>f.value===i[o].value);u?TDe(u,i[o])?(n.changed.push({type:"complete",oldValue:u,newValue:i[o]}),r=!0):n.unchanged.push({oldValue:u,newValue:i[o]}):(n.added.push(i[o]),r=!0)}for(let o=0;o<t.length;o++)i.find(u=>u.value===t[o].value)||(n.removed.push(t[o]),r=!0);return r?n:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:rS(e)}writeField(e,t,i,r){typeof e=="string"?t[i]=e:r!=null&&r.messages?r.messages.push(new ne("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):kd().error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,i){return i.portal||Ur.getDefault()}readStyleOrigin(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const r=mf(t.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(e,t,i,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=bS(e.styleUrl,r))}set uniqueValueGroups(e){this.styleOrigin?kd().error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?kd().error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){var r;if(this.styleOrigin)return void kd().error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof e=="object"?ODe(e):new R3({value:e,symbol:Goe(t)}),(r=this.uniqueValueInfos)==null||r.push(i),this._valueInfoMap[qm(i.value)]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void kd().error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let i=0;i<t.length;i++){const r=t[i];if(String(r.value)===String(e)){delete this._valueInfoMap[qm(e)],t.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let i=t;return this.valueExpression&&(t==null?void 0:t.arcade)==null&&(i={...i,arcade:await ad()}),this._getUniqueValueInfo(e,i)}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void kd().error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(e,t);return(i==null?void 0:i.symbol)||this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(i==null?void 0:i.arcade)==null){const n=await ad(),{arcadeUtils:o}=n;o.hasGeometryOperations(this.valueExpression)&&await o.enableGeometryOperations(),i={...i,arcade:n}}const r=this._getUniqueValueInfo(e,i);return(r==null?void 0:r.symbol)||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){var r;const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=(r=this.uniqueValueInfos)==null?void 0:r.reduce((n,o)=>n+o.getMeshHash(),"");return`${e}.${t}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new jb({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:he(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:he(this.visualVariables),legendOptions:he(this.legendOptions),authoringInfo:he(this.authoringInfo),backgroundFillSymbol:he(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=he(this.uniqueValueInfos),i=he(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(he(this.styleOrigin))),Object.freeze(t),Object.freeze(i)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",i),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),Vs(e,t,this.valueExpression)];so(e,t,this.field),so(e,t,this.field2),so(e,t,this.field3),await Promise.all(i)}populateFromStyle(){return che(this.styleOrigin,{portal:this.portal}).then(e=>{var i;const t=[];return this._valueInfoMap={},e!=null&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(r=>{const n=new Em({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=n,this._isDefaultSymbolDerived=!0);const o=new R3({value:r.name,symbol:n});t.push(o),this._valueInfoMap[qm(r.name)]=o}),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",LDe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[qm(t.value)]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(fZ);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const i of e)t.push(me(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,n)=>{r!==n&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,fZ)}}_watchUniqueValueGroups(){this.removeHandles(yZ);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const i of e){t.push(me(()=>({classes:i.classes}),(r,n)=>{r!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes??[])t.push(me(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(n,o)=>{n!==o&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(t,yZ)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:i,field3:r,fieldDelimiter:n,uniqueValueGroups:o,valueExpression:u}=this;if(!t&&!u)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const f=!(!t||!i);for(const g of o)for(const b of g.classes??[]){const{symbol:E,label:I,values:M,description:k}=b;for(const L of M??[]){const{value:P,value2:D,value3:j}=L,z=[P];i&&z.push(D),r&&z.push(j);const V=f?z.join(n||""):z[0]??void 0;e.push(new R3({symbol:E,label:I,value:V,description:k}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:i,valueExpression:r,fieldDelimiter:n,uniqueValueInfos:o}=this;if(!t&&!r||!o.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const u=!(!t||!i),f=o.map(b=>{var j;const{symbol:E,label:I,value:M,description:k}=b,[L,P,D]=u?((j=M==null?void 0:M.toString())==null?void 0:j.split(n||""))||[]:[M];return new uhe({symbol:E,label:I,description:k,values:[new mv({value:L,value2:P,value3:D})]})}),g=[new wO({classes:f})];e&&Object.freeze(g),this._set("uniqueValueGroups",g),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:n,arcade:o,timeZone:u}=t??{};let f=this._cache.compiledFunc;const g=o.arcadeUtils;if(!f){const E=g.createSyntaxTree(this.valueExpression);f=g.createFunction(E),this._cache.compiledFunc=f}const b=g.executeFunction(f,g.createExecContext(e,g.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),u));return this._valueInfoMap[qm(b)]}_getUnqiueValueInfoForFields(e){const t=this.field,i=e.attributes;let r;if(this.field2){const n=this.field2,o=this.field3,u=[];t&&u.push(i[t]),n&&u.push(i[n]),o&&u.push(i[o]),r=u.join(this.fieldDelimiter||"")}else t&&(r=i[t]);return this._valueInfoMap[qm(r)]}static fromPortalStyle(e,t){const i=new jb(t==null?void 0:t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",(t==null?void 0:t.portal)||Ur.getDefault());const r=i.populateFromStyle();return r.catch(n=>{kd().error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",n)}),r}static fromStyleUrl(e,t){const i=new jb(t==null?void 0:t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));const r=i.populateFromStyle();return r.catch(n=>{kd().error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),r}};m([w({readOnly:!0})],Ji.prototype,"_cache",null),m([Ke({uniqueValue:"unique-value"})],Ji.prototype,"type",void 0),m([w(_D)],Ji.prototype,"backgroundFillSymbol",void 0),m([w({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Ji.prototype,"field",null),m([St("field")],Ji.prototype,"castField",null),m([Pe("field")],Ji.prototype,"writeField",null),m([w({type:String,value:null,json:{write:!0}})],Ji.prototype,"field2",null),m([w({type:String,value:null,json:{write:!0}})],Ji.prototype,"field3",null),m([w({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Ji.prototype,"orderByClassesEnabled",void 0),m([w({type:String,value:null,json:{write:!0}})],Ji.prototype,"valueExpression",null),m([w({type:String,json:{write:!0}})],Ji.prototype,"valueExpressionTitle",void 0),m([w({type:SD,json:{write:!0}})],Ji.prototype,"legendOptions",void 0),m([w({type:String,json:{write:!0}})],Ji.prototype,"defaultLabel",void 0),m([w(uN({...WT},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Ji.prototype,"defaultSymbol",null),m([w({type:String,value:null,json:{write:!0}})],Ji.prototype,"fieldDelimiter",null),m([w({type:Ur,readOnly:!0})],Ji.prototype,"portal",void 0),m([ke("portal",["styleName"])],Ji.prototype,"readPortal",null),m([w({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Ji.prototype,"styleOrigin",void 0),m([ke("styleOrigin",["styleName","styleUrl"])],Ji.prototype,"readStyleOrigin",null),m([Pe("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Ji.prototype,"writeStyleOrigin",null),m([w({type:[wO],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,i)=>(t.uniqueValueGroups||RDe(t)).map(r=>wO.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Ji.prototype,"uniqueValueGroups",null),m([w({type:[R3],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Ji.prototype,"uniqueValueInfos",null),Ji=jb=m([H(dhe)],Ji);const MD=Ji,JT={key:"type",base:yd,typeMap:{heatmap:ahe,simple:U2,"unique-value":MD,"class-breaks":Ace,"dot-density":gDe,dictionary:yDe,"pie-chart":SDe},errorContext:"renderer"},PDe={key:"type",base:yd,typeMap:{simple:U2,"unique-value":MD,"class-breaks":Ace,heatmap:ahe},errorContext:"renderer",validate:NDe};function NDe(e){switch(e.type){case"simple":return FDe(e);case"unique-value":return DDe(e);case"class-breaks":return jDe(e);case"heatmap":return e}}function FDe(e){if(e.symbol)return e;Se.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function DDe(e){const t=e.uniqueValueInfos,i=t==null?void 0:t.filter(({symbol:r,label:n},o)=>(r||Se.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${o}] ${n}) without a symbol from web scene.`),!!r));return(i==null?void 0:i.length)!==(t==null?void 0:t.length)&&(e.uniqueValueInfos=i),e}function jDe(e){const t=e.classBreakInfos,i=t==null?void 0:t.filter(({symbol:r,label:n},o)=>(r||Se.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${o}] ${n}) without a symbol from web scene.`),!!r));return(i==null?void 0:i.length)!==(t==null?void 0:t.length)&&(e.classBreakInfos=i),e}function zDe(e,t){return z_(e,null,t)}const VDe=f2({types:JT});function z_(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(i!=null&&i.messages&&i.messages.push(new ga("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):VDe(e,t,i):null}let UDe=class phe{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(EA),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const i=new phe,r=this._originStores[yt.DEFAULTS];r&&r.forEach((n,o)=>{i.set(o,he(n),yt.DEFAULTS)});for(let n=yt.SERVICE;n<EA;n++){const o=this._originStores[n];o&&o.forEach((u,f)=>{t&&t.has(f)||i.set(f,he(u),n)})}return i}get(t,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(t):void 0}keys(t){const i=t==null?this._values:this._originStores[t];return i?[...i.keys()]:[]}set(t,i,r=yt.USER){let n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(t,i),!this._values.has(t)||this._propertyOriginMap.get(t)<=r){const o=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,r),o!==i}return!1}delete(t,i=yt.USER){const r=this._originStores[i];if(!r)return;const n=r.get(t);if(r.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===i){this._values.delete(t);for(let o=i-1;o>=0;o--){const u=this._originStores[o];if(u&&u.has(t)){this._values.set(t,u.get(t)),this._propertyOriginMap.set(t,o);break}}}return n}has(t,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(t)}revert(t,i){for(;i>0&&!this.has(t,i);)--i;const r=this._originStores[i],n=r==null?void 0:r.get(t),o=this._values.get(t);return this._values.set(t,n),this._propertyOriginMap.set(t,i),o!==n}originOf(t){return this._propertyOriginMap.get(t)||yt.DEFAULTS}forEach(t){this._values.forEach(t)}};const fhe=e=>{let t=class extends e{constructor(...i){super(...i);const r=zo(this),n=r.store,o=new UDe;r.store=o,yte(r,n,o)}read(i,r){gte(this,i,r)}getAtOrigin(i,r){const n=b7(this),o=Fp(r);if(typeof i=="string")return n.get(i,o);const u={};return i.forEach(f=>{u[f]=n.get(f,o)}),u}originOf(i){return jE(this.originIdOf(i))}originIdOf(i){return b7(this).originOf(i)}revert(i,r){const n=b7(this),o=Fp(r),u=zo(this);let f;f=typeof i=="string"?i==="*"?n.keys(o):[i]:i,f.forEach(g=>{u.invalidate(g),n.revert(g,o),u.commit(g)})}};return t=m([H("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function b7(e){return zo(e).store}let mZ=class extends fhe(De){};mZ=m([H("esri.core.ReadOnlyMultiOriginJSONSupport")],mZ);const GDe=e=>{let t=class extends e{constructor(...i){super(...i)}clear(i,r="user"){return _7(this).delete(i,Fp(r))}write(i,r){return bte(this,i=i||{},r),i}setAtOrigin(i,r,n){zo(this).setAtOrigin(i,r,Fp(n))}removeOrigin(i){const r=_7(this),n=Fp(i),o=r.keys(n);for(const u of o)r.originOf(u)===n&&r.set(u,r.get(u,n),yt.USER)}updateOrigin(i,r){const n=_7(this),o=Fp(r),u=Ps(this,i);for(let f=o+1;f<EA;++f)n.delete(i,f);n.set(i,u,o)}toJSON(i){return this.write({},i)}};return t=m([H("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function _7(e){return zo(e).store}const KT=e=>{let t=class extends GDe(fhe(e)){constructor(...i){super(...i)}};return t=m([H("esri.core.MultiOriginJSONSupport")],t),t};let _O=class extends KT(De){};_O=m([H("esri.core.MultiOriginJSONSupport")],_O);const jn=(e=>e)(["operational-layers","basemap","ground"]);var SO;let F0=SO=class extends be{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new SO({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};m([w({type:String,json:{write:!0}})],F0.prototype,"expression",void 0),m([w({type:String,json:{write:!0}})],F0.prototype,"name",void 0),m([w({type:["boolean","date","number","string"],json:{write:!0}})],F0.prototype,"returnType",void 0),m([w({type:String,json:{write:!0}})],F0.prototype,"title",void 0),F0=SO=m([H("esri.form.ExpressionInfo")],F0);const BDe=F0;let D0=class extends be{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};m([w({type:String,json:{write:!0}})],D0.prototype,"description",void 0),m([w({type:String,json:{write:!0}})],D0.prototype,"label",void 0),m([w()],D0.prototype,"type",void 0),m([w({type:String,json:{write:!0}})],D0.prototype,"visibilityExpression",void 0),D0=m([H("esri.form.elements.Element")],D0);const sm=D0;let $4=class extends It(be){constructor(t){super(t),this.type=null}};m([w()],$4.prototype,"type",void 0),$4=m([H("esri.form.elements.inputs.attachments.Input")],$4);const bf=$4,YT=["any","capture","upload"];let P1=class extends bf{constructor(t){super(t),this.type="audio",this.inputMethod="any",this.maxDuration=null}};m([w({type:["audio"],readOnly:!0,json:{write:!0}})],P1.prototype,"type",void 0),m([w({type:YT,json:{write:!0}})],P1.prototype,"inputMethod",void 0),m([w({type:Number,json:{write:!0}})],P1.prototype,"maxDuration",void 0),P1=m([H("esri.form.elements.inputs.attachments.AudioInput")],P1);const gZ=P1;let zb=class extends bf{constructor(t){super(t),this.type="document",this.maxFileSize=null}};m([w({type:["document"],readOnly:!0,json:{write:!0}})],zb.prototype,"type",void 0),m([w({type:Number,json:{write:!0}})],zb.prototype,"maxFileSize",void 0),zb=m([H("esri.form.elements.inputs.attachments.DocumentInput")],zb);const vZ=zb;let N1=class extends bf{constructor(t){super(t),this.type="image",this.inputMethod="any",this.maxImageSize=null}};m([w({type:["image"],readOnly:!0,json:{write:!0}})],N1.prototype,"type",void 0),m([w({type:YT,json:{write:!0}})],N1.prototype,"inputMethod",void 0),m([w({type:Number,json:{write:!0}})],N1.prototype,"maxImageSize",void 0),N1=m([H("esri.form.elements.inputs.attachments.ImageInput")],N1);const wZ=N1;let Vb=class extends bf{constructor(t){super(t),this.type="signature",this.inputMethod="any"}};m([w({type:["signature"],readOnly:!0,json:{write:!0}})],Vb.prototype,"type",void 0),m([w({type:YT,json:{write:!0}})],Vb.prototype,"inputMethod",void 0),Vb=m([H("esri.form.elements.inputs.attachments.SignatureInput")],Vb);const bZ=Vb;let F1=class extends bf{constructor(t){super(t),this.type="video",this.inputMethod="any",this.maxDuration=null}};m([w({type:["video"],readOnly:!0,json:{write:!0}})],F1.prototype,"type",void 0),m([w({type:YT,json:{write:!0}})],F1.prototype,"inputMethod",void 0),m([w({type:Number,json:{write:!0}})],F1.prototype,"maxDuration",void 0),F1=m([H("esri.form.elements.inputs.attachments.VideoInput")],F1);const _Z=F1;function yhe(e){return{nestableTypes:{base:bf,key:"type",typeMap:{audio:gZ,document:vZ,image:wZ,signature:bZ,video:_Z}},allTypes:{base:bf,key:"type",typeMap:{attachment:e,audio:gZ,document:vZ,image:wZ,signature:bZ,video:_Z}}}}function qDe(e,t,i){return e?e.map(r=>ul(t.nestableTypes,r)):null}function HDe(e,t,i){if(!e)return null;const r=t.nestableTypes.typeMap;return e.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function WDe(e,t,i){if(!e)return null;const r=t.nestableTypes.typeMap;return e.filter(n=>r[n.type]).map(n=>n.toJSON())}let lc=class extends bf{constructor(t){super(t),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(t){return qDe(t,S7)}readInputs(t,i){return HDe(i.inputTypes,S7)}writeInputs(t,i){i.inputTypes=WDe(t,S7)}};m([w({type:["attachment"],readOnly:!0,json:{write:!0}})],lc.prototype,"type",void 0),m([w({type:["any","exact","exactOrNone"],json:{write:!0}})],lc.prototype,"attachmentAssociationType",void 0),m([w({json:{write:{isRequired:!0}}})],lc.prototype,"inputTypes",void 0),m([St("inputTypes")],lc.prototype,"castInputs",null),m([ke("inputTypes")],lc.prototype,"readInputs",null),m([Pe("inputTypes")],lc.prototype,"writeInputs",null),lc=m([H("esri.form.elements.inputs.attachments.AttachmentInput")],lc);const S7=yhe(lc),ZDe=lc;var xO;const JDe=yhe(ZDe);let ea=xO=class extends sm{constructor(e){super(e),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){var e;return new xO({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:(e=this.input)==null?void 0:e.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};m([w({type:Boolean,json:{write:!0}})],ea.prototype,"allowUserRename",void 0),m([w({type:String,json:{write:{isRequired:!0}}})],ea.prototype,"attachmentKeyword",void 0),m([w({type:Boolean,json:{write:!0}})],ea.prototype,"displayFilename",void 0),m([w({type:String,json:{write:!0}})],ea.prototype,"editableExpression",void 0),m([w({type:String,json:{write:!0}})],ea.prototype,"filenameExpression",void 0),m([w({types:JDe.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],ea.prototype,"input",void 0),m([w({type:Number,json:{write:!0}})],ea.prototype,"maxAttachmentCount",void 0),m([w({type:Number,json:{write:!0}})],ea.prototype,"minAttachmentCount",void 0),m([w({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],ea.prototype,"type",void 0),m([w({type:Boolean,json:{write:!0}})],ea.prototype,"useOriginalFilename",void 0),ea=xO=m([H("esri.form.elements.AttachmentElement")],ea);const SZ=ea;let M4=class extends be{constructor(t){super(t),this.type=null}};m([w()],M4.prototype,"type",void 0),M4=m([H("esri.form.elements.inputs.Input")],M4);const gd=M4;let Ub=class extends gd{constructor(t){super(t),this.maxLength=null,this.minLength=0}};m([w({type:Number,json:{write:!0}})],Ub.prototype,"maxLength",void 0),m([w({type:Number,json:{write:!0}})],Ub.prototype,"minLength",void 0),Ub=m([H("esri.form.elements.inputs.TextInput")],Ub);const CD=Ub;var EO;let C4=EO=class extends CD{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new EO({maxLength:this.maxLength,minLength:this.minLength})}};m([w({type:["barcode-scanner"],json:{read:!1,write:!0}})],C4.prototype,"type",void 0),C4=EO=m([H("esri.form.elements.inputs.BarcodeScannerInput")],C4);const KDe=C4;var IO;let D1=IO=class extends gd{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new IO({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};m([w({type:String,json:{write:!0}})],D1.prototype,"noValueOptionLabel",void 0),m([w({type:Boolean,json:{write:!0}})],D1.prototype,"showNoValueOption",void 0),m([w({type:["combo-box"],json:{read:!1,write:!0}})],D1.prototype,"type",void 0),D1=IO=m([H("esri.form.elements.inputs.ComboBoxInput")],D1);const YDe=D1;var TO;function xZ(e){return e??null}function EZ(e){return e??null}let Zu=TO=class extends gd{constructor(e){super(e),this.max=null,this.min=null,this.type="date-picker"}readMax(e,t){return xZ(t.max)}writeMax(e,t){t.max=EZ(e)}readMin(e,t){return xZ(t.min)}writeMin(e,t){t.min=EZ(e)}clone(){return new TO({max:this.max,min:this.min})}};m([w({type:String,json:{type:String,write:!0}})],Zu.prototype,"max",void 0),m([ke("max")],Zu.prototype,"readMax",null),m([Pe("max")],Zu.prototype,"writeMax",null),m([w({type:String,json:{type:String,write:!0}})],Zu.prototype,"min",void 0),m([ke("min")],Zu.prototype,"readMin",null),m([Pe("min")],Zu.prototype,"writeMin",null),m([w({type:["date-picker"],json:{read:!1,write:!0}})],Zu.prototype,"type",void 0),Zu=TO=m([H("esri.form.elements.inputs.DatePickerInput")],Zu);const XDe=Zu;var $O;function x7(e){return e??null}function E7(e){return e??null}let bo=$O=class extends gd{constructor(e){super(e),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(e,t){return x7(t.max)}writeMax(e,t){t.max=E7(e)}readMin(e,t){return x7(t.min)}writeMin(e,t){t.min=E7(e)}readTimeResolution(e,t){return x7(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=E7(e)}clone(){return new $O({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};m([w({type:Boolean,json:{write:!0}})],bo.prototype,"includeTimeOffset",void 0),m([w({type:String,json:{type:String,write:!0}})],bo.prototype,"max",void 0),m([ke("max")],bo.prototype,"readMax",null),m([Pe("max")],bo.prototype,"writeMax",null),m([w({type:String,json:{type:String,write:!0}})],bo.prototype,"min",void 0),m([ke("min")],bo.prototype,"readMin",null),m([Pe("min")],bo.prototype,"writeMin",null),m([w({type:String,json:{type:String,write:!0}})],bo.prototype,"timeResolution",void 0),m([ke("timeResolution")],bo.prototype,"readTimeResolution",null),m([Pe("timeResolution")],bo.prototype,"writeTimeResolution",null),m([w({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],bo.prototype,"type",void 0),bo=$O=m([H("esri.form.elements.inputs.DateTimeOffsetPickerInput")],bo);const QDe=bo;var MO;function IZ(e){return e!=null?new Date(e):null}function TZ(e){return e?e.getTime():null}let zl=MO=class extends gd{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return IZ(t.max)}writeMax(e,t){t.max=TZ(e)}readMin(e,t){return IZ(t.min)}writeMin(e,t){t.min=TZ(e)}clone(){return new MO({includeTime:this.includeTime,max:this.max,min:this.min})}};m([w({type:Boolean,json:{write:!0}})],zl.prototype,"includeTime",void 0),m([w({type:Date,json:{type:Number,write:!0}})],zl.prototype,"max",void 0),m([ke("max")],zl.prototype,"readMax",null),m([Pe("max")],zl.prototype,"writeMax",null),m([w({type:Date,json:{type:Number,write:!0}})],zl.prototype,"min",void 0),m([ke("min")],zl.prototype,"readMin",null),m([Pe("min")],zl.prototype,"writeMin",null),m([w({type:["datetime-picker"],json:{read:!1,write:!0}})],zl.prototype,"type",void 0),zl=MO=m([H("esri.form.elements.inputs.DateTimePickerInput")],zl);const eje=zl;var CO;let j1=CO=class extends gd{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new CO({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};m([w({type:String,json:{write:!0}})],j1.prototype,"noValueOptionLabel",void 0),m([w({type:Boolean,json:{write:!0}})],j1.prototype,"showNoValueOption",void 0),m([w({type:["radio-buttons"],json:{read:!1,write:!0}})],j1.prototype,"type",void 0),j1=CO=m([H("esri.form.elements.inputs.RadioButtonsInput")],j1);const tje=j1;var AO;let z1=AO=class extends gd{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new AO({offValue:this.offValue,onValue:this.onValue})}};m([w({type:[String,Number],json:{write:!0}})],z1.prototype,"offValue",void 0),m([w({type:[String,Number],json:{write:!0}})],z1.prototype,"onValue",void 0),m([w({type:["switch"],json:{read:!1,write:!0}})],z1.prototype,"type",void 0),z1=AO=m([H("esri.form.elements.inputs.SwitchInput")],z1);const ije=z1;var kO;let A4=kO=class extends CD{constructor(e){super(e),this.type="text-area"}clone(){return new kO({maxLength:this.maxLength,minLength:this.minLength})}};m([w({type:["text-area"],json:{read:!1,write:!0}})],A4.prototype,"type",void 0),A4=kO=m([H("esri.form.elements.inputs.TextAreaInput")],A4);const rje=A4;var LO;let k4=LO=class extends CD{constructor(e){super(e),this.type="text-box"}clone(){return new LO({maxLength:this.maxLength,minLength:this.minLength})}};m([w({type:["text-box"],json:{read:!1,write:!0}})],k4.prototype,"type",void 0),k4=LO=m([H("esri.form.elements.inputs.TextBoxInput")],k4);const nje=k4;var OO;function I7(e){return e??null}function T7(e){return e??null}let ta=OO=class extends gd{constructor(e){super(e),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(e,t){return I7(t.max)}writeMax(e,t){t.max=T7(e)}readMin(e,t){return I7(t.min)}writeMin(e,t){t.min=T7(e)}readTimeResolution(e,t){return I7(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=T7(e)}clone(){return new OO({max:this.max,min:this.min,timeResolution:this.timeResolution})}};m([w({type:String,json:{type:String,write:!0}})],ta.prototype,"max",void 0),m([ke("max")],ta.prototype,"readMax",null),m([Pe("max")],ta.prototype,"writeMax",null),m([w({type:String,json:{type:String,write:!0}})],ta.prototype,"min",void 0),m([ke("min")],ta.prototype,"readMin",null),m([Pe("min")],ta.prototype,"writeMin",null),m([w({type:String,json:{type:String,write:!0}})],ta.prototype,"timeResolution",void 0),m([ke("timeResolution")],ta.prototype,"readTimeResolution",null),m([Pe("timeResolution")],ta.prototype,"writeTimeResolution",null),m([w({type:["time-picker"],json:{read:!1,write:!0}})],ta.prototype,"type",void 0),ta=OO=m([H("esri.form.elements.inputs.TimePickerInput")],ta);const sje=ta,oje={base:gd,key:"type",typeMap:{"barcode-scanner":KDe,"combo-box":YDe,"date-picker":XDe,"datetime-picker":eje,"datetimeoffset-picker":QDe,"radio-buttons":tje,switch:ije,"text-area":rje,"text-box":nje,"time-picker":sje}};var RO;let Da=RO=class extends sm{constructor(e){super(e),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new RO({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};m([w({types:Woe,json:{read:{reader:xT},write:!0}})],Da.prototype,"domain",void 0),m([w({type:Boolean,json:{write:!0}})],Da.prototype,"editable",void 0),m([w({type:String,json:{write:!0}})],Da.prototype,"editableExpression",void 0),m([w({type:String,json:{write:!0}})],Da.prototype,"fieldName",void 0),m([w({type:String,json:{write:!0}})],Da.prototype,"hint",void 0),m([w({types:oje,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Da.prototype,"input",void 0),m([w({type:String,json:{write:!0}})],Da.prototype,"requiredExpression",void 0),m([w({type:String,json:{read:!1,write:!0}})],Da.prototype,"type",void 0),m([w({type:String,json:{write:!0}})],Da.prototype,"valueExpression",void 0),Da=RO=m([H("esri.form.elements.FieldElement")],Da);const $Z=Da;var PO;let fh=PO=class extends sm{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new PO({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:he(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};m([w({type:Number,json:{write:!0}})],fh.prototype,"displayCount",void 0),m([w({type:["list"],json:{write:!0}})],fh.prototype,"displayType",void 0),m([w({type:String,json:{write:!0}})],fh.prototype,"editableExpression",void 0),m([w({type:[IF],json:{write:!0}})],fh.prototype,"orderByFields",void 0),m([w({type:Number,json:{write:!0}})],fh.prototype,"relationshipId",void 0),m([w({type:["relationship"],json:{read:!1,write:!0}})],fh.prototype,"type",void 0),fh=PO=m([H("esri.form.elements.RelationshipElement")],fh);const MZ=fh;var NO;let V1=NO=class extends sm{constructor(e){super(e),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new NO({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};m([w({type:String,json:{write:!0}})],V1.prototype,"text",void 0),m([w({type:String,json:{write:!0}})],V1.prototype,"textFormat",void 0),m([w({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],V1.prototype,"type",void 0),V1=NO=m([H("esri.form.elements.TextElement")],V1);const CZ=V1;function mhe(e){return{typesWithGroup:{base:sm,key:"type",typeMap:{attachment:SZ,field:$Z,group:e,relationship:MZ,text:CZ}},typesWithoutGroup:{base:sm,key:"type",typeMap:{attachment:SZ,field:$Z,relationship:MZ,text:CZ}}}}function ghe(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function vhe(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>r[n.type]).map(n=>n.toJSON())}function whe(e,t,i=!0){return e?e.map(r=>ul(i?t.typesWithGroup:t.typesWithoutGroup,r)):null}var FO;let uc=FO=class extends sm{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return whe(e,$7,!1)}readElements(e,t){return ghe(t.formElements,$7,!1)}writeElements(e,t){t.formElements=vhe(e,$7,!1)}clone(){return new FO({description:this.description,elements:he(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};m([w({json:{write:!0}})],uc.prototype,"elements",void 0),m([St("elements")],uc.prototype,"castElements",null),m([ke("elements",["formElements"])],uc.prototype,"readElements",null),m([Pe("elements")],uc.prototype,"writeElements",null),m([w({type:["collapsed","expanded"],json:{write:!0}})],uc.prototype,"initialState",void 0),m([w({type:String,json:{read:!1,write:!0}})],uc.prototype,"type",void 0),uc=FO=m([H("esri.form.elements.GroupElement")],uc);const $7=mhe(uc),aje=uc,lje=e=>e.type==="field",uje=e=>e.type==="group",cje=e=>e.type==="text";var DO;const M7=mhe(aje);let Vl=DO=class extends be{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return whe(e,M7)}readElements(e,t){return ghe(t.formElements,M7)}writeElements(e,t){t.formElements=vhe(e,M7)}clone(){return new DO({description:this.description,expressionInfos:he(this.expressionInfos),elements:he(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(e,t){const i=new Set,{description:r,elements:n,expressionInfos:o,title:u}=this;if(P3(i,e,r),P3(i,e,u),!n)return[];const f=hje(n,o).map(g=>Vs(i,e,g));await Promise.all(f);for(const g of n)bhe(i,{fieldsIndex:e,relationships:t},g);return Array.from(i).sort()}};function bhe(e,t,i){var n;const{fieldsIndex:r}=t;if(!r||r.fields.length!==e.size)switch(P3(e,r,i.label),P3(e,r,i.description),i.type){case"field":so(e,r,i.fieldName);break;case"group":i.elements.forEach(o=>bhe(e,t,o));break;case"relationship":if(t.relationships){const o=t.relationships.find(u=>u.id===i.relationshipId);o&&so(e,r,o.keyField)}tm(e,r,(n=i.orderByFields)==null?void 0:n.map(o=>o.field));break;case"text":P3(e,r,i.text)}}function hje(e,t){if(!t||t.length===0)return[];const i=_he(e),r=[];for(const n of t)i.has(n.name)&&r.push(n.expression);return r}function _he(e){const t=new Set;for(const i of e)if(iU(t,i.visibilityExpression),!cje(i)){if(uje(i))VE(t,_he(i.elements));else if(iU(t,i.editableExpression),lje(i)){const{requiredExpression:r,valueExpression:n}=i;VE(t,[r,n])}}return t}function P3(e,t,i){tm(e,t,ioe(i))}m([w({type:String,json:{write:!0}})],Vl.prototype,"description",void 0),m([w({json:{write:!0}})],Vl.prototype,"elements",void 0),m([St("elements")],Vl.prototype,"castElements",null),m([ke("elements",["formElements"])],Vl.prototype,"readElements",null),m([Pe("elements")],Vl.prototype,"writeElements",null),m([w({type:[BDe],json:{write:!0}})],Vl.prototype,"expressionInfos",void 0),m([w({type:Boolean,json:{default:!1,write:!0}})],Vl.prototype,"preserveFieldValuesWhenHidden",void 0),m([w({type:String,json:{write:!0}})],Vl.prototype,"title",void 0),Vl=DO=m([H("esri.form.FormTemplate")],Vl);const dje=Vl;function AZ(e,t,i){if(e.hasM==null||e.hasZ)for(const r of t)for(const n of r)n.length>2&&(n[2]*=i)}function pje(e,t,i){if(!e&&!t||!i)return;const r=Rv(i);kZ(e,i,r),kZ(t,i,r)}function kZ(e,t,i){if(e)for(const r of e)fje(r.geometry,t,i)}function fje(e,t,i){if(!(e!=null&&e.spatialReference)||pr(e.spatialReference,t))return;const r=Rv(e.spatialReference)/i;if(r!==1){if("x"in e)e.z!=null&&(e.z*=r);else if("rings"in e)AZ(e,e.rings,r);else if("paths"in e)AZ(e,e.paths,r);else if("points"in e&&(e.hasM==null||e.hasZ))for(const n of e.points)n.length>2&&(n[2]*=r)}}let yje=0,Rh=class extends pl.LoadableMixin(wS(Oe)){constructor(t){super(t),this._idToClientGraphic=null,this.type="memory"}load(t){const i=t!=null?t.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var t;(t=this._connection)==null||t.close(),this._connection=null}get _workerGeometryType(){var i;const t=(i=this.layer)==null?void 0:i.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(t){return this.load().then(()=>this._applyEdits(t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(t,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",t?t.toJSON():null,i);BL(t,this.layer.spatialReference,r);const n=pD.fromJSON(r);if(!this._requiresClientGraphicMapping())return n;const o=this.layer.objectIdField;for(const u of n.features){const f=u.attributes[o],g=this._idToClientGraphic.get(f);g&&(u.geometry=g.geometry)}return n.geometryType=this.layer.geometryType,n}async queryFeaturesJSON(t,i={}){if(this._requiresClientGraphicMapping())throw new ne("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",t?t.toJSON():null,i);return BL(t,this.layer.spatialReference,r),r}queryFeatureCount(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,i))}queryObjectIds(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,i))}queryExtent(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",t?t.toJSON():null,i)).then(r=>({count:r.count,extent:Ht.fromJSON(r.extent)}))}querySnapping(t,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",t,i))}async _applyEdits(t){if(!this._connection)throw new ne("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const n=[],o=[];await Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);const u=E=>"objectId"in E&&E.objectId!=null?E.objectId:"attributes"in E&&E.attributes[i]!=null?E.attributes[i]:null;if(t.addFeatures&&(r=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures)for(const E of t.deleteFeatures){const I=u(E);I!=null&&n.push(I)}const f=t.updateFeatures&&this._idToClientGraphic?new Map:null;if(t.updateFeatures){for(const E of t.updateFeatures)if(o.push(this._serializeFeature(E)),f){const I=u(E);I!=null&&f.set(I,E)}}pje(r?r.features:null,o,this.layer.spatialReference);const{fullExtent:g,featureEditResults:b}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:o,deletes:n});return this.fullExtent=g,r&&r.finish(b.uidToObjectId),this._updateClientGraphicIds(f,b),this._createEditsResult(b)}async _prepareClientMapping(t,i){if(this._layerOrSourceGeometryType!=="mesh"||t==null)return;const r=[];for(const{geometry:n}of t)n==null||n.type!=="mesh"||n.hasExtent||n.loaded||r.push(n.load({signal:i}));r.length&&await Promise.all(r)}_updateClientGraphicIds(t,i){if(this._idToClientGraphic){if(t)for(const r of i.updateResults){if(!r.success)continue;const n=t.get(r.objectId);n!=null&&this._addIdToClientGraphic(n)}for(const r of i.deleteResults)r.success&&this._idToClientGraphic.delete(r.objectId)}}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const i=t.success===!0?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:i?new ne("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(t){const i=new Map,r=new Array(t.length);let n=null;for(let u=0;u<t.length;u++){const f=t[u],g=this._serializeFeature(f);n||f.geometry==null||(n=f.geometry.type),r[u]=g,i.set(`${g.uid}`,f)}const o=this;return{features:r,inferredGeometryType:n,finish(u){const f=o.sourceJSON.objectIdField;for(const g in u){const b=u[g],E=i.get(g);E&&(E.attributes||(E.attributes={}),b===-1?delete E.attributes[f]:E.attributes[f]=b,o._addIdToClientGraphic(E))}}}}_addIdToClientGraphic(t){var n;if(!this._idToClientGraphic)return;const i=this.sourceJSON.objectIdField,r=(n=t.attributes)==null?void 0:n[i];r!=null&&this._idToClientGraphic.set(r,t)}get _layerOrSourceGeometryType(){var t,i;return((t=this.layer)==null?void 0:t.geometryType)??((i=this.sourceJSON)==null?void 0:i.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(t){return this._geometryTypeRequiresClientGraphicMapping(t.type)}_geometryTypeRequiresClientGraphicMapping(t){return t==="mesh"||t==="multipatch"||t==="extent"}_serializeFeature(t){const{attributes:i}=t,r=this._geometryForSerialization(t),n=(yje++).toString();return r?{uid:n,geometry:r.toJSON(),attributes:i}:{uid:n,attributes:i}}_geometryForSerialization(t){const{geometry:i}=t;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?zs.fromExtent(i.extent):null:i}async _startWorker(t){this._connection=await bxe("MemorySourceWorker",{strategy:we("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:this});const{fields:i,spatialReference:r,objectIdField:n,hasM:o,hasZ:u,timeInfo:f,dateFieldsTimeZone:g}=this.layer,b=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,t);const E=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",L=>{Se.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),L.preventDefault()}));const I={features:E.features,fields:i==null?void 0:i.map(L=>L.toJSON()),geometryType:$U.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&o,hasZ:this._layerOrSourceGeometryType==="mesh"||u,objectIdField:n,spatialReference:b?null:r&&r.toJSON(),timeInfo:(f==null?void 0:f.toJSON())??null,dateFieldsTimeZone:g},M=await this._connection.invoke("load",I,{signal:t});for(const L of M.warnings)Se.getLogger(this.layer).warn("#load()",`${L.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:L});M.featureErrors.length&&Se.getLogger(this.layer).warn("#load()",`Encountered ${M.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:M.featureErrors});const k=M.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(E.inferredGeometryType)&&(k.geometryType=$U.toJSON(E.inferredGeometryType)),this.sourceJSON=k,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),E.finish(M.assignedObjectIds)}};m([VN({Type:qi,ensureType:ir(qi)})],Rh.prototype,"itemType",void 0),m([w()],Rh.prototype,"type",void 0),m([w({constructOnly:!0})],Rh.prototype,"layer",void 0),m([w({readOnly:!0})],Rh.prototype,"_workerGeometryType",null),m([w()],Rh.prototype,"sourceJSON",void 0),Rh=m([H("esri.layers.graphics.sources.MemorySource")],Rh);function mje(e){return"portalItem"in e}const gje=e=>{let t=class extends e{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):mje(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return m([w({type:String})],t.prototype,"apiKey",null),t=m([H("esri.layers.mixins.APIKeyMixin")],t),t},vje=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=gf(this.url);if(i!=null&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",G$e(i,Se.getLogger(this)))}};return m([w()],t.prototype,"title",null),m([w({type:String})],t.prototype,"url",null),t=m([H("esri.layers.mixins.ArcGISService")],t),t},wje={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}},LZ={read:{reader:k_},write:{allowNull:!0,writer:L_}},bje={json:{read:!1,write:!1,origins:{"web-map":LZ,"portal-item":LZ}}},She=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return m([w(wje)],t.prototype,"blendMode",void 0),m([w(bje)],t.prototype,"effect",void 0),t=m([H("esri.layers.mixins.BlendLayer")],t),t},_je=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return m([w({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],t.prototype,"customParameters",void 0),t=m([H("esri.layers.mixins.CustomParametersMixin")],t),t},jO=Dke(),xhe=new Map,Ehe=new Map;async function sht(e,t,i){if(!e||!i)return!1;if(!t)return!0;const r=new URL(e).host;let n=xhe.get(r);if(!n){const o=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");n=(await Ct(o,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return n===t}async function OZ(e,t,i=!1){var o,u,f;if(!e||!t)return!0;const r=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),n=(o=Ehe.get(r))==null?void 0:o.entries();if(n){for(const[g,b]of n)if(b.name===t){const E=!((u=b.stack)!=null&&u.hasForwardEdits());if(!E&&i){const[{deleteForwardEdits:I},{default:M}]=await Promise.all([ce(()=>import("./deleteForwardEdits-DHP5sHO1.js"),[],import.meta.url),ce(()=>import("./DeleteForwardEditsParameters-DHns9Fgj.js"),[],import.meta.url)]),k=await I(r,g,new M({sessionId:jO,moment:b.moment}));return k.success&&((f=b.stack)==null||f.clearForwardEdits()),k.success}return E}}return!0}function L4(e,t){var n;if(!e)return!1;const i=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),r=(n=Ehe.get(i))==null?void 0:n.entries();if(r){for(const[o,u]of r)if(u.name===t)return u.lockType==="edit"}return!1}const AD=new Us.EventEmitter;function Ihe(e){return AD.on("apply-edits",new WeakRef(e))}function The(e){return AD.on("update-moment",new WeakRef(e))}function RZ(e,t,i=null,r=!1){const n=wa();return r=t==null||r,AD.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:i,mayReceiveServiceEdits:r,result:n.promise}),n}const $he=Symbol();function oht(e){return e!=null&&typeof e=="object"&&$he in e}function Tw(e){return e!=null&&typeof e=="object"&&"gdbVersion"in e}function N3(e,t,i){const r=new URL(e).host,n=xhe.get(r),o=u=>!u||u===n;return o(t)&&o(i)||t===i}const Sje=e=>{var t;let i=class extends e{constructor(...r){super(...r),this[t]=!0,this._applyEditsHandler=n=>{const{serviceUrl:o,layerId:u,gdbVersion:f,mayReceiveServiceEdits:g,result:b}=n,E=o===this.url,I=u!=null&&this.layerId!=null&&u===this.layerId,M=Tw(this),k=Tw(this)&&N3(o,f,this.gdbVersion);if(!E||M&&!k||!I&&!g)return;const L=b.then(P=>{var z;if(this.lastEditsEventDate=new Date,I&&(P.addedFeatures.length||P.updatedFeatures.length||P.deletedFeatures.length||P.addedAttachments.length||P.updatedAttachments.length||P.deletedAttachments.length))return this.emit("edits",he(P)),P;const D=(z=P.editedFeatures)==null?void 0:z.find(({layerId:V})=>V===this.layerId);if(D){const{adds:V,updates:W,deletes:Q}=D.editedFeatures,Z={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:V?V.map(({attributes:ee})=>({objectId:this.objectIdField&&ee[this.objectIdField],globalId:this.globalIdField&&ee[this.globalIdField]})):[],deletedFeatures:Q?Q.map(({attributes:ee})=>({objectId:this.objectIdField&&ee[this.objectIdField],globalId:this.globalIdField&&ee[this.globalIdField]})):[],updatedFeatures:W?W.map(({current:{attributes:ee}})=>({objectId:this.objectIdField&&ee[this.objectIdField],globalId:this.globalIdField&&ee[this.globalIdField]})):[],editedFeatures:he(P.editedFeatures),exceededTransferLimit:!1,historicMoment:he(P.historicMoment)};return this.emit("edits",Z),Z}const j={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:he(P.editedFeatures),exceededTransferLimit:!1,historicMoment:he(P.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(o,f,j.historicMoment)&&this.emit("edits",j),j}).then(P=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(o,f,P.historicMoment)&&(this.historicMoment=P.historicMoment),P));this.emit("apply-edits",{result:L})},this._updateMomentHandler=n=>{const{serviceUrl:o,gdbVersion:u,moment:f}=n,g=o===this.url,b=Tw(this),E=Tw(this)&&N3(o,u,this.gdbVersion),I=Tw(this)&&!N3(o,this.gdbVersion,null);g&&b&&E&&I&&"historicMoment"in this&&this.historicMoment!==f&&(this.historicMoment=f)},this.when().then(()=>{this.addHandles(Ihe(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(The(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(r,n,o){return"historicMoment"in this&&this.historicMoment!==o&&L4(r,n)}};return t=$he,m([w()],i.prototype,"lastEditsEventDate",void 0),i=m([H("esri.layers.mixins.EditBusLayer")],i),i};var zO;const C7=new gt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),A7=new gt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Ju=zO=class extends be{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:r,timeExtent:n,objectIds:o,units:u,distance:f}=this;return new ss({geometry:he(i),objectIds:he(o),spatialRelationship:r,timeExtent:he(n),where:t,units:u,distance:f,...e})}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:r,objectIds:n,units:o,distance:u}=this;return new zO({geometry:he(t),objectIds:he(n),spatialRelationship:i,timeExtent:he(r),where:e,units:o,distance:u})}};m([w({type:String,json:{write:!0}})],Ju.prototype,"where",void 0),m([w({types:mm,json:{write:!0}})],Ju.prototype,"geometry",void 0),m([w({type:C7.apiValues,json:{name:"spatialRel",read:{reader:C7.read},write:{allowNull:!1,writer:C7.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],Ju.prototype,"spatialRelationship",void 0),m([w({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Ju.prototype,"distance",void 0),m([w({type:[Number],json:{write:!0}})],Ju.prototype,"objectIds",void 0),m([w({type:A7.apiValues,json:{read:A7.read,write:{writer:A7.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Ju.prototype,"units",void 0),m([w({type:wn,json:{write:!0}})],Ju.prototype,"timeExtent",void 0),Ju=zO=m([H("esri.layers.support.FeatureFilter")],Ju);const xje=Ju;var VO;const PZ={read:{reader:k_},write:{writer:L_,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},NZ={read:{reader:k_},write:{writer:L_,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},FZ={name:"showExcludedLabels",default:!0};let j0=VO=class extends be{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var r,n;const i=super.write(e,t);if(t!=null&&t.origin){if(i.filter){const o=Object.keys(i.filter);if(o.length>1||o[0]!=="where")return(r=t.messages)==null||r.push(new ne("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in i)return(n=t.messages)==null||n.push(new ne("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return i}clone(){return new VO({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};m([w({type:xje,json:{write:{allowNull:!0,writer(e,t,i,r){const n=e==null?void 0:e.write({},r);n&&Object.keys(n).length!==0?vn(i,n,t):vn(i,null,t)}}}})],j0.prototype,"filter",void 0),m([w({json:{read:k_,write:{writer:L_,allowNull:!0},origins:{"web-map":PZ,"portal-item":PZ}}})],j0.prototype,"includedEffect",void 0),m([w({json:{read:k_,write:{writer:L_,allowNull:!0},origins:{"web-map":NZ,"portal-item":NZ}}})],j0.prototype,"excludedEffect",void 0),m([w({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":FZ,"portal-item":FZ}}})],j0.prototype,"excludedLabelsVisible",void 0),j0=VO=m([H("esri.layers.support.FeatureEffect")],j0);const Eje=j0,DZ={write:{allowNull:!0}},Ije={type:Eje,json:{origins:{"web-map":DZ,"portal-item":DZ}}},Tje=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return m([w(Ije)],t.prototype,"featureEffect",void 0),t=m([H("esri.layers.mixins.FeatureEffectLayer")],t),t};var UO;let Gb=UO=class extends be{constructor(e){super(e)}async collectRequiredFields(e,t){return Vs(e,t,this.expression)}clone(){return new UO({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};m([w({type:String,json:{write:!0}})],Gb.prototype,"expression",void 0),m([w({type:String,json:{write:!0}})],Gb.prototype,"title",void 0),Gb=UO=m([H("esri.symbols.support.FeatureExpressionInfo")],Gb);const jZ=Gb;function aht(e){return!!e&&GT[e]!=null}function $je(e){return 1/(GT[e]||1)}function Mje(){const e=Object.keys(GT);return rN(e,"decimal-degrees"),e.sort(),e}const Cje=Mje();var GO;const hx=_n()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),zZ=new gt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let yh=GO=class extends be{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,i,r){t[i]=e.write({},r),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new GO({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&M2e(this.featureExpressionInfo,e.featureExpressionInfo)}};m([w({type:jZ,json:{write:!0}})],yh.prototype,"featureExpressionInfo",void 0),m([ke("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],yh.prototype,"readFeatureExpressionInfo",null),m([Pe("featureExpressionInfo",{featureExpressionInfo:{type:jZ},"featureExpression.value":{type:[0]}})],yh.prototype,"writeFeatureExpressionInfo",null),m([w({type:hx.apiValues,nonNullable:!0,json:{type:hx.jsonValues,read:hx.read,write:{writer:hx.write,isRequired:!0}}})],yh.prototype,"mode",null),m([w({type:Number,json:{write:!0}})],yh.prototype,"offset",void 0),m([w({type:Cje,json:{type:String,read:zZ.read,write:zZ.write}})],yh.prototype,"unit",null),yh=GO=m([H("esri.symbols.support.ElevationInfo")],yh);const Mhe=yh;let U1=class extends be{constructor(t){super(t),this.description=null,this.label=null,this.type=null}};m([w({type:String,json:{write:!0}})],U1.prototype,"description",void 0),m([w({type:String,json:{write:!0}})],U1.prototype,"label",void 0),m([w()],U1.prototype,"type",void 0),U1=m([H("esri.tables.elements.AttributeTableElement")],U1);const Qv=U1;var BO;let Bb=BO=class extends Qv{constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return new BO({description:this.description,displayType:this.displayType,label:this.label})}};m([w({type:["auto"],json:{write:!0}})],Bb.prototype,"displayType",void 0),m([w({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],Bb.prototype,"type",void 0),Bb=BO=m([H("esri.tables.elements.AttributeTableAttachmentElement")],Bb);const VZ=Bb;var qO;let qb=qO=class extends Qv{constructor(e){super(e),this.fieldName=null,this.type="field"}clone(){return new qO({description:this.description,fieldName:this.fieldName,label:this.label})}};m([w({type:String,json:{write:!0}})],qb.prototype,"fieldName",void 0),m([w({type:String,json:{read:!1,write:!0}})],qb.prototype,"type",void 0),qb=qO=m([H("esri.tables.elements.AttributeTableFieldElement")],qb);const UZ=qb;var HO;let Hb=HO=class extends Qv{constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return new HO({description:this.description,label:this.label,relationshipId:this.relationshipId})}};m([w({type:Number,json:{write:!0}})],Hb.prototype,"relationshipId",void 0),m([w({type:["relationship"],json:{read:!1,write:!0}})],Hb.prototype,"type",void 0),Hb=HO=m([H("esri.tables.elements.AttributeTableRelationshipElement")],Hb);const GZ=Hb;function Che(e){return{typesWithGroup:{base:Qv,key:"type",typeMap:{attachment:VZ,field:UZ,group:e,relationship:GZ}},typesWithoutGroup:{base:Qv,key:"type",typeMap:{attachment:VZ,field:UZ,relationship:GZ}}}}function Ahe(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function khe(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>r[n.type]).map(n=>n.toJSON())}function Lhe(e,t,i=!0){return e?e.map(r=>ul(i?t.typesWithGroup:t.typesWithoutGroup,r)):null}var WO;let Ph=WO=class extends Qv{constructor(e){super(e),this.elements=null,this.type="group"}castElements(e){return Lhe(e,k7,!1)}readElements(e,t){return Ahe(t.attributeTableElements,k7,!1)}writeElements(e,t){t.attributeTableElements=khe(e,k7,!1)}clone(){return new WO({description:this.description,elements:he(this.elements),label:this.label})}};m([w({json:{write:!0}})],Ph.prototype,"elements",void 0),m([St("elements")],Ph.prototype,"castElements",null),m([ke("elements",["attributeTableElements"])],Ph.prototype,"readElements",null),m([Pe("elements")],Ph.prototype,"writeElements",null),m([w({type:String,json:{read:!1,write:!0}})],Ph.prototype,"type",void 0),Ph=WO=m([H("esri.tables.elements.AttributeTableGroupElement")],Ph);const k7=Che(Ph),Aje=Ph;var ZO;const L7=Che(Aje);let rp=ZO=class extends be{constructor(e){super(e),this.elements=null,this.orderByFields=null}castElements(e){return Lhe(e,L7)}readElements(e,t){return Ahe(t.attributeTableElements,L7)}writeElements(e,t){t.attributeTableElements=khe(e,L7)}clone(){return new ZO({elements:he(this.elements),orderByFields:this.orderByFields})}};m([w({json:{write:!0}})],rp.prototype,"elements",void 0),m([St("elements")],rp.prototype,"castElements",null),m([ke("elements",["attributeTableElements"])],rp.prototype,"readElements",null),m([Pe("elements")],rp.prototype,"writeElements",null),m([w({type:[Object],json:{write:!0}})],rp.prototype,"orderByFields",void 0),rp=ZO=m([H("esri.tables.AttributeTableTemplate")],rp);const kje=rp,Lje={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:jn}}},kD={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},LD={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:jn}}},Oje={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:em}}},Rje={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:jn}}},Pje={value:null,type:Mhe,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:jn}}};function uht(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const Ohe={write:{enabled:!0,layerContainerTypes:jn},read:!0},JO={type:Number,json:{origins:{"web-document":Ohe,"portal-item":{write:!0}}}},Nje={...JO,json:{...JO.json,origins:{"web-document":{...Ohe,write:{enabled:!0,layerContainerTypes:jn,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>{var r;return i&&i.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?(r=t.layerDefinition)!=null&&r.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?__(t.layerDefinition.drawingInfo.transparency):void 0:__(t.drawingInfo.transparency)}}}},cht={type:Ht,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const i=Ht.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(i.spatialReference=st.fromJSON(t.spatialReference)),i}}}},read:!1}},Fje={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},Dje={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:jn}}},name:"layerDefinition.minScale",write:!0}},jje={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:jn}}},name:"layerDefinition.maxScale",write:!0}},Rhe={json:{write:{ignoreOrigin:!0,layerContainerTypes:jn},origins:{"web-map":{read:!1,write:!1}}}},zje={type:kje,json:{name:"attributeTableInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}};let mh=class extends It(be){constructor(t){super(t),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};m([w()],mh.prototype,"creatorField",void 0),m([w()],mh.prototype,"creationDateField",void 0),m([w()],mh.prototype,"editorField",void 0),m([w()],mh.prototype,"editDateField",void 0),m([w()],mh.prototype,"realm",void 0),m([w(lI("dateFieldsTimeReference",!0))],mh.prototype,"timeZone",void 0),mh=m([H("esri.layers.support.EditFieldsInfo")],mh);const Vje=mh;let cc=class extends It(be){constructor(t){super(t)}};m([w({constructOnly:!0,json:{write:!0}})],cc.prototype,"name",void 0),m([w({constructOnly:!0,json:{write:!0}})],cc.prototype,"fields",void 0),m([w({constructOnly:!0,json:{write:!0}})],cc.prototype,"isAscending",void 0),m([w({constructOnly:!0,json:{write:!0}})],cc.prototype,"indexType",void 0),m([w({constructOnly:!0,json:{write:!0}})],cc.prototype,"isUnique",void 0),m([w({constructOnly:!0,json:{write:!0}})],cc.prototype,"description",void 0),cc=m([H("esri.layers.support.FeatureIndex")],cc);async function Phe(e,t,i){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=Nhe(e));const r=Uje(e),n=e.capabilities.query.supportsPagination;t.start=0,t.num=r;let o=null;for(;;){const u=await e.source.queryFeaturesJSON(t,i);if(o==null?o=u:o.features=o.features.concat(u.features),o.exceededTransferLimit=u.exceededTransferLimit,!n||!u.exceededTransferLimit)break;t.start+=r}return o}function Uje(e){return Nhe(e)*Gje(e)}function Gje(e){return e.capabilities.query.maxRecordCount||2e3}function Nhe(e){return e.capabilities.query.supportsMaxRecordCountFactor?ss.MAX_MAX_RECORD_COUNT_FACTOR:1}const KO=new gt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function Bje(e,t,i,r){const n=await Ff(e);if(await OD(e,t,r),!n.addAttachment)throw new ne(r,"Layer source does not support addAttachment capability");return n.addAttachment(t,i)}function OD(e,t,i){var o,u;const{attributes:r}=t,{objectIdField:n}=e;return(u=(o=e.capabilities)==null?void 0:o.data)!=null&&u.supportsAttachment?t?r?n&&r[n]?Promise.resolve():Promise.reject(new ne(i,`feature is missing the identifying attribute ${n}`)):Promise.reject(new ne(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new ne(i,"A feature is required to add/delete/update attachments")):Promise.reject(new ne(i,"this layer doesn't support attachments"))}async function qje(e,t,i,r,n){const o=await Ff(e);if(await OD(e,t,n),!o.updateAttachment)throw new ne(n,"Layer source does not support updateAttachment capability");return o.updateAttachment(t,i,r)}async function Hje(e,t,i){const{applyEdits:r}=await ce(()=>import("./editingSupport-BlQGD5l8.js"),__vite__mapDeps([216,217]),import.meta.url),n=await e.load();let o=i;return n.type==="feature"&&n.infoFor3D&&t.deleteFeatures!=null&&n.globalIdField!=null&&(o={...o,globalIdToObjectId:await dze(n,t.deleteFeatures,n.globalIdField)}),r(n,n.source,t,i)}async function Wje(e,t,i){const{uploadAssets:r}=await ce(()=>import("./editingSupport-BlQGD5l8.js"),__vite__mapDeps([216,217]),import.meta.url),n=await e.load();return r(n,n.source,t,i)}async function Zje(e,t,i,r){const n=await Ff(e);if(await OD(e,t,r),!n.deleteAttachments)throw new ne(r,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(t,i)}async function Jje(e,t,i){const r=(await e.load({signal:t==null?void 0:t.signal})).source;if(!r.fetchRecomputedExtents)throw new ne(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(t)}async function Kje(e,t,i,r){var k,L;t=$L.from(t),await e.load();const n=e.source,o=e.capabilities;if(!((k=o==null?void 0:o.data)!=null&&k.supportsAttachment))throw new ne(r,"this layer doesn't support attachments");const{attachmentTypes:u,objectIds:f,globalIds:g,num:b,size:E,start:I,where:M}=t;if(!((L=o==null?void 0:o.operations)!=null&&L.supportsQueryAttachments)&&((u==null?void 0:u.length)>0||(g==null?void 0:g.length)>0||(E==null?void 0:E.length)>0||b||I||M))throw new ne(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(f!=null&&f.length||g!=null&&g.length||M))throw new ne(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!n.queryAttachments)throw new ne(r,"Layer source does not support queryAttachments capability",t);return n.queryAttachments(t)}async function Yje(e,t,i,r){const n=await Ff(e);if(!n.queryObjectIds)throw new ne(r,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(ss.from(t)??e.createQuery(),i)}async function Xje(e,t,i,r){const n=await Ff(e);if(!n.queryFeatureCount)throw new ne(r,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(ss.from(t)??e.createQuery(),i)}async function Qje(e,t,i,r){const n=await Ff(e);if(!n.queryExtent)throw new ne(r,"Layer source does not support queryExtent capability");return n.queryExtent(ss.from(t)??e.createQuery(),i)}async function eze(e,t,i,r){const n=await Ff(e);if(!n.queryRelatedFeatures)throw new ne(r,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(Yv.from(t),i)}async function tze(e,t,i,r){const n=await Ff(e);if(!n.queryRelatedFeaturesCount)throw new ne(r,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(Yv.from(t),i)}async function ize(e){const t=e.source;if(t!=null&&t.refresh)try{const{dataChanged:i,updates:r}=await t.refresh();if(r!=null&&(e.sourceJSON={...e.sourceJSON,...r},e.read(r,{origin:"service",url:e.parsedUrl})),i)return!0}catch{}if(e.definitionExpression)try{return(await wF(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function rze(e){var u,f;const t=new ss,i=(u=e.capabilities)==null?void 0:u.data,r=(f=e.capabilities)==null?void 0:f.query;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,r&&(t.compactGeometryEnabled=r.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),i&&(i.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),i.supportsM&&e.returnM!=null&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:n,timeExtent:o}=e;return t.timeExtent=n!=null&&o!=null?o.offset(-n.value,n.unit):o||null,t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null,t}function Fhe(e){const{globalIdField:t,fields:i}=e;if(t)return t;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function Dhe(e){const{objectIdField:t,fields:i}=e;if(t)return t;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function nze(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}function sze(e,t){const{subtypes:i,subtypeField:r}=e;if(!(t!=null&&t.attributes)||!(i!=null&&i.length)||!r)return null;const n=t.attributes[r];return n==null?null:i.find(o=>o.code===n)}function oze(e,t){var u,f;const{fieldsIndex:i,subtypeField:r}=e,{name:n,type:o}=i.get(t)??{};if(!n)return null;if((r&&((u=i.get(r))==null?void 0:u.name))===n&&((f=e.subtypes)!=null&&f.length)){const g=e.subtypes.map(b=>new yy({code:jhe(b.code,o),name:b.name}));if(g!=null&&g.length)return new ST({codedValues:g})}return null}function aze(e,t){var o,u;const{fieldsIndex:i}=e,{name:r,type:n}=i.get(t)??{};if(!r)return null;if(("typeIdField"in e?(o=i.get(e.typeIdField))==null?void 0:o.name:null)===r&&"types"in e&&((u=e.types)!=null&&u.length)){const f=e.types.map(g=>new yy({code:jhe(g.id,n),name:g.name}));return new ST({codedValues:f})}return null}function jhe(e,t){return t?Qse({type:t})&&typeof e=="number"?`${e}`:z6e({type:t})&&typeof e=="string"?Number.parseInt(e,10):e:e}async function Ff(e){return(await e.load()).source}async function lze(e,t){if(!Et||Et.findCredential(e))return;let i;try{const r=await ase(e,t);r&&(i=await Et.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=t!=null?t.signal:null;await Et.getCredential(e,{signal:r})}catch{}}async function uze(e,t,i){var n;const r=(n=e.parsedUrl)==null?void 0:n.path;r&&e.authenticationTriggerEvent===t&&await lze(r,i)}function cze(e){return!O4(e)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const O7=f2({types:Uoe});function RD(e,t){var i;if(e.defaultSymbol)return(i=e.types)!=null&&i.length?new MD({defaultSymbol:O7(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map(r=>({id:r.id,symbol:O7(r.symbol,r,t)}))}):new U2({symbol:O7(e.defaultSymbol,e,t)})}function hze(e){var r,n,o;let t=(r=e.sourceJSON)==null?void 0:r.cacheMaxAge;if(!t)return!1;const i=(o=(n=e.editingInfo)==null?void 0:n.lastEditDate)==null?void 0:o.getTime();return i==null||(t*=1e3,Date.now()-i<t)}async function dze(e,t,i){if(t==null)return null;const r=[],{objectIdField:n}=e;if(t.forEach(b=>{let E=null;if("attributes"in b){const{attributes:I}=b;E={globalId:I[i],objectId:I[n]!=null&&I[n]!==-1?I[n]:null}}else E={globalId:b.globalId,objectId:b.objectId!=null&&b.objectId!==-1?b.objectId:null};E.globalId!=null&&(E.objectId!=null&&E.objectId!==-1||r.push(E.globalId))}),r.length===0)return null;const o=e.createQuery();o.where=r.map(b=>`${i}='${b}'`).join(" OR "),o.returnGeometry=!1,o.outFields=[n,i],o.cacheHint=!1;const u=await m_e(Phe(e,o));if(!u.ok)return null;const f=new Map,g=u.value.features;for(const b of g){const E=b.attributes[i],I=b.attributes[n];E!=null&&I!=null&&I!==-1&&f.set(jke(E),I)}return f}function pze(e,t,i){if(!t||!i||!e)return null;const r=i.getAttribute(t);return r==null?null:e.find(n=>{const{id:o}=n;return o!=null&&o.toString()===r.toString()})??null}function O4(e){var t;return((t=e.sourceJSON)==null?void 0:t.isMultiServicesView)||fze(e)}function fze(e){var t,i;return!!((i=(t=e.sourceJSON)==null?void 0:t.capabilities)!=null&&i.toLowerCase().split(",").map(r=>r.trim()).includes("map"))}function yze(e,t,i){const r=t==null?void 0:t.queryBins;if(!r)throw new ne(i,"Layer source does not support binning");switch(e.binParameters.type){case"auto-interval":if(!r.supportsAutoInterval)throw new ne(i,"Layer source does not support auto-interval binning");break;case"date":if(!r.supportsDate)throw new ne(i,"Layer source does not support date binning");break;case"fixed-boundaries":if(!r.supportsFixedBoundaries)throw new ne(i,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!r.supportsFixedInterval)throw new ne(i,"Layer source does not support fixed-interval binning")}const n=r==null?void 0:r.supportedStatistics;if(e.outStatistics&&n){const o=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:u}of e.outStatistics){const f=o.get(u);if(f&&!n[f])throw new ne(i,`Layer source does not support ${u} statistic type`)}}}let G1=class extends It(be){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};m([w({type:String,json:{read:{source:"shapeAreaFieldName"}}})],G1.prototype,"shapeAreaField",void 0),m([w({type:String,json:{read:{source:"shapeLengthFieldName"}}})],G1.prototype,"shapeLengthField",void 0),m([w({type:String,json:{read:e=>e3e.read(e)||t3e.read(e)}})],G1.prototype,"units",void 0),G1=m([H("esri.layers.support.GeometryFieldsInfo")],G1);const mze=G1;var YO;let B1=YO=class extends be{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new Oe}clone(){return new YO({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};m([w({type:String,json:{write:!0}})],B1.prototype,"floorField",void 0),m([w({json:{read:!1,write:!1}})],B1.prototype,"viewAllMode",void 0),m([w({json:{read:!1,write:!1}})],B1.prototype,"viewAllLevelIds",void 0),B1=YO=m([H("esri.layers.support.LayerFloorInfo")],B1);const gze=B1,BZ=new gt({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),qZ=new gt({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let ja=class extends It(be){constructor(t){super(t),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};m([w({json:{read:BZ.read,write:BZ.write}})],ja.prototype,"cardinality",void 0),m([w({json:{read:!0,write:!0}})],ja.prototype,"composite",void 0),m([w({json:{read:!0,write:!0}})],ja.prototype,"id",void 0),m([w({json:{read:!0,write:!0}})],ja.prototype,"keyField",void 0),m([w({json:{read:!0,write:!0}})],ja.prototype,"keyFieldInRelationshipTable",void 0),m([w({json:{read:!0,write:!0}})],ja.prototype,"name",void 0),m([w({json:{read:!0,write:!0}})],ja.prototype,"relatedTableId",void 0),m([w({json:{read:!0,write:!0}})],ja.prototype,"relationshipTableId",void 0),m([w({json:{read:qZ.read,write:qZ.write}})],ja.prototype,"role",void 0),ja=m([H("esri.layers.support.Relationship")],ja);const vze=ja;function tt(e,t,i){return!!zhe(e,t,i)}function Wb(e,t,i){return zhe(e,t,i)}function zhe(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i}const wze={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function bze(e){var i;const t=(i=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:i.map(r=>r.toLowerCase());return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function DS(e,t){var r;const i=(r=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:r.map(n=>n.toLowerCase());return!!(i!=null&&i.includes(t.toLowerCase()))}function _ze(e){var i;const t=(i=e==null?void 0:e.supportedStatisticTypes)==null?void 0:i.map(r=>r.toLowerCase());return{count:!!(t!=null&&t.includes("count")),sum:!!(t!=null&&t.includes("sum")),min:!!(t!=null&&t.includes("min")),max:!!(t!=null&&t.includes("max")),avg:!!(t!=null&&t.includes("avg")),var:!!(t!=null&&t.includes("var")),stddev:!!(t!=null&&t.includes("stddev")),percentileContinuous:!!(t!=null&&t.includes("percentile_continuous")),percentileDiscrete:!!(t!=null&&t.includes("percentile_discrete")),envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function Vhe(e,t){return{analytics:Sze(e),attachment:xze(e),data:Eze(e),metadata:Ize(e),operations:Tze(e.capabilities,e,t),query:$ze(e,t),queryBins:Aze(e),queryRelated:Mze(e),queryTopFeatures:Cze(e),editing:kze(e)}}function Sze(e){return{supportsCacheHint:DS(e.advancedQueryCapabilities,"queryAnalytics")}}function xze(e){const t=e.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:DS(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:tt(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(r=>{const n=wze[r.name];n&&(i[n]=!!r.isEnabled)}),i}function Eze(e){return{isVersioned:tt(e,"isDataVersioned",!1),isBranchVersioned:tt(e,"isDataBranchVersioned",!1),supportsAttachment:tt(e,"hasAttachments",!1),supportsM:tt(e,"hasM",!1),supportsZ:tt(e,"hasZ",!1)}}function Ize(e){return{supportsAdvancedFieldProperties:tt(e,"supportsFieldDescriptionProperty",!1)}}function Tze(e,t,i){const r=e?e.toLowerCase().split(",").map(M=>M.trim()):[],n=i?gf(i):null,o=r.includes(n!=null&&n.serverType==="MapServer"?"data":"query"),u=r.includes("editing")&&!t.datesInUnknownTimezone;let f=u&&r.includes("create"),g=u&&r.includes("delete"),b=u&&r.includes("update");const E=r.includes("changetracking"),I=t.advancedQueryCapabilities;return u&&!(f||g||b)&&(f=g=b=!0),{supportsCalculate:tt(t,"supportsCalculate",!1),supportsTruncate:tt(t,"supportsTruncate",!1),supportsValidateSql:tt(t,"supportsValidateSql",!1),supportsAdd:f,supportsDelete:g,supportsEditing:u,supportsChangeTracking:E,supportsQuery:o,supportsQueryAnalytics:tt(I,"supportsQueryAnalytic",!1),supportsQueryAttachments:tt(I,"supportsQueryAttachments",!1),supportsQueryBins:tt(I,"supportsQueryBins",!1),supportsQueryTopFeatures:tt(I,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:tt(t,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:b,supportsExceedsLimitStatistics:tt(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:tt(t,"supportsAsyncConvert3D",!1)}}function $ze(e,t){const i=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,n=e.archivingInfo,o=e.currentVersion,u=t==null?void 0:t.includes("MapServer"),f=!u||o>=we("mapserver-pbf-version-support"),g=lae(t),b=new Set((e.supportedQueryFormats??"").split(",").map(E=>E.toLowerCase().trim()));return{maxRecordCount:Wb(e,"maxRecordCount",void 0),maxRecordCountFactor:Wb(e,"maxRecordCountFactor",void 0),standardMaxRecordCount:Wb(e,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:bze(i),supportsCacheHint:tt(i,"supportsQueryWithCacheHint",!1)||DS(i,"query"),supportsCentroid:tt(i,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:g,supportsDefaultSpatialReference:tt(i,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:tt(i,"supportsDisjointSpatialRel",!1),supportsDistance:tt(i,"supportsQueryWithDistance",!1),supportsDistinct:tt(i,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:tt(i,"supportsReturningQueryExtent",!1),supportsFormatPBF:f&&b.has("pbf"),supportsFullTextSearch:tt(i,"supportsFullTextSearch",!1),supportsGeometryProperties:tt(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:tt(i,"supportsHavingClause",!1),supportsHistoricMoment:tt(n,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:tt(i,"supportsMaxRecordCountFactor",!1),supportsOrderBy:tt(i,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:tt(i,"supportsPagination",!1),supportsPercentileStatistics:tt(i,"supportsPercentileStatistics",!1),supportsQuantization:tt(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:tt(e,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:tt(r,"allowAnonymousToQuery",!0),supportsQueryByOthers:tt(r,"allowOthersToQuery",!0),supportsQueryGeometry:tt(e,"supportsReturningQueryGeometry",!1),supportsResultType:tt(i,"supportsQueryWithResultType",!1),supportsSpatialAggregationStatistics:tt(i,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:tt(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:tt(e,"useStandardizedQueries",!1),supportsStatistics:tt(i,"supportsStatistics",e.supportsStatistics),supportsTopFeaturesQuery:tt(i,"supportsTopFeaturesQuery",!1),tileMaxRecordCount:Wb(e,"tileMaxRecordCount",void 0)}}function Mze(e){const t=e.advancedQueryCapabilities,i=tt(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:tt(t,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:DS(t,"queryRelated")}}function Cze(e){return{supportsCacheHint:DS(e.advancedQueryCapabilities,"queryTopFilter")}}function Aze(e){const t=e?e.queryBinsCapabilities:void 0;return{supportsDate:tt(t,"supportsDateBin",!1),supportsFixedInterval:tt(t,"supportsFixedIntervalBin",!1),supportsAutoInterval:tt(t,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:tt(t,"supportsFixedBoundariesBin",!1),supportedStatistics:_ze(t)}}function kze(e){const t=e.ownershipBasedAccessControlForFeatures,i=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:tt(e,"allowGeometryUpdates",!0),supportsGlobalId:tt(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:tt(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:tt(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:tt(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:tt(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:tt(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:tt(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:tt(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:tt(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:tt(i,"supportsAsyncApplyEdits",!1),zDefault:Wb(e,"zDefault",void 0)}}function yht(e){var t;return{operations:{supportsAppend:tt(e,"supportsAppend",!1),supportsCoverageQuery:((t=e==null?void 0:e.playbackInfo)==null?void 0:t.klv["0601"])??!1,supportsExportClip:tt(e,"supportsExportClip",!1),supportsExportFrameset:tt(e,"supportsExportFrameset",!1),supportsMensuration:tt(e,"supportsMensuration",!1),supportsUpdate:tt(e,"supportsUpdate",!1)}}}let gh=class extends It(be){constructor(t){super(t),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(t){if(!t)return null;const i={};for(const r of Object.keys(t))i[r]=xT(t[r]);return i}writeDomains(t,i){var n;if(!t)return;const r={};for(const o of Object.keys(t))t[o]&&(r[o]=(n=t[o])==null?void 0:n.toJSON());i.domains=r}};m([w({type:Number,json:{write:!0}})],gh.prototype,"code",void 0),m([w({type:Object,json:{write:!0}})],gh.prototype,"defaultValues",void 0),m([w({json:{write:!0}})],gh.prototype,"domains",void 0),m([ke("domains")],gh.prototype,"readDomains",null),m([Pe("domains")],gh.prototype,"writeDomains",null),m([w({type:String,json:{write:!0}})],gh.prototype,"name",void 0),gh=m([H("esri.layers.support.Subtype")],gh);const Lze=gh,Oze=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(Oe.ofType(cc)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=st.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}get authenticationTriggerEvent(){var n;if(!this.url)return null;const{capabilities:i}=this;if(i){const{query:o,operations:u,editing:f}=i;if(!o.supportsQueryByOthers||!o.supportsQueryByAnonymous||u.supportsEditing&&!(f.supportsUpdateByOthers&&f.supportsUpdateByAnonymous&&f.supportsDeleteByOthers&&f.supportsDeleteByAnonymous))return"load"}if((n=this.serviceDefinitionExpression)!=null&&n.toLowerCase().includes("current_user"))return"load";if(this.userHasUpdateItemPrivileges){if(hze(this))return"load";if(this.hasUpdateItemRestrictions)return i.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const r=this.editFieldsInfo;return(r!=null&&r.creatorField||r!=null&&r.editorField)&&(i!=null&&i.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(i,r){return Vhe(r,this.url)}readEditingInfo(i,r){const{editingInfo:n}=r;return n?{lastEditDate:n.lastEditDate!=null?new Date(n.lastEditDate):null}:null}get effectiveCapabilities(){const i=this.capabilities;if(!i)return null;const r=he(i),{operations:n,editing:o}=r;return O4(this)?(this.userHasUpdateItemPrivileges&&(n.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(n.supportsAdd=n.supportsDelete=n.supportsEditing=n.supportsQuery=n.supportsUpdate=o.supportsDeleteByOthers=o.supportsGeometryUpdate=o.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&n.supportsEditing&&(n.supportsAdd=n.supportsDelete=n.supportsUpdate=o.supportsGeometryUpdate=!0),r)}readGlobalIdFieldFromService(i,r){return Fhe(r)}get hasFullEditingRestrictions(){const i=this.capabilities;if(!i||O4(this))return!1;const{operations:r,editing:n}=i;return r.supportsEditing&&!(r.supportsAdd&&r.supportsDelete&&r.supportsUpdate&&n.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const i=this.capabilities;if(!i)return!1;const{operations:r,editing:n}=i;return O4(this)?!r.supportsQuery:!(r.supportsAdd&&r.supportsDelete&&r.supportsEditing&&r.supportsQuery&&r.supportsUpdate&&n.supportsDeleteByOthers&&n.supportsGeometryUpdate&&n.supportsUpdateByOthers)}readIsTableFromService(i,r){return r.type==="Table"}readMaxScale(i,r){return r.effectiveMaxScale||i||0}readMinScale(i,r){return r.effectiveMinScale||i||0}readObjectIdFieldFromService(i,r){return Dhe(r)}readServiceDefinitionExpression(i,r){return r.definitionQuery||r.definitionExpression}set url(i){if(i==null)return void this._set("url",i);const r=B$e({layer:this,url:i,nonStandardUrlAllowed:!0,logger:Se.getLogger(this)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(i,r,n,o){q$e(this,i,null,r,o)}readVersion(i,r){return nze(r)}};return m([w({readOnly:!0})],t.prototype,"authenticationTriggerEvent",null),m([w({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),m([w({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),m([ke("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),m([w(lI("dateFieldsTimeReference"))],t.prototype,"dateFieldsTimeZone",void 0),m([w({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),m([w({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),m([w({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),m([w({readOnly:!0,type:Vje})],t.prototype,"editFieldsInfo",void 0),m([w({readOnly:!0})],t.prototype,"editingInfo",void 0),m([ke("editingInfo")],t.prototype,"readEditingInfo",null),m([w({readOnly:!0})],t.prototype,"effectiveCapabilities",null),m([w((()=>{const i=he(Pje),r=i.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},i})())],t.prototype,"elevationInfo",void 0),m([w({type:gze,json:{name:"layerDefinition.floorInfo",write:!0,origins:{"web-scene":{name:"layerDefinition.floorInfo",write:{enabled:!0,layerContainerTypes:jn}}}}})],t.prototype,"floorInfo",void 0),m([w({type:Ht,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),m([w()],t.prototype,"gdbVersion",void 0),m([w({readOnly:!0,type:mze,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),m([w({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:KO.read}}}})],t.prototype,"geometryType",void 0),m([w({type:String})],t.prototype,"globalIdField",void 0),m([ke("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),m([w({readOnly:!0})],t.prototype,"hasFullEditingRestrictions",null),m([w({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),m([w({readOnly:!0})],t.prototype,"hasUpdateItemRestrictions",null),m([w({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),m([w({readOnly:!0,type:_S})],t.prototype,"heightModelInfo",void 0),m([w({type:Date})],t.prototype,"historicMoment",void 0),m([w({type:Oe.ofType(cc),readOnly:!0})],t.prototype,"indexes",void 0),m([w({readOnly:!0})],t.prototype,"isTable",void 0),m([ke("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),m([w({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),m([w(jje)],t.prototype,"maxScale",void 0),m([ke("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),m([w(Dje)],t.prototype,"minScale",void 0),m([ke("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),m([w({type:String})],t.prototype,"objectIdField",void 0),m([ke("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),m([w(lI("preferredTimeReference"))],t.prototype,"preferredTimeZone",void 0),m([w({type:[vze],readOnly:!0})],t.prototype,"relationships",void 0),m([w({type:Boolean})],t.prototype,"returnM",void 0),m([w({type:Boolean})],t.prototype,"returnZ",void 0),m([w({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),m([w({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),m([ke("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),m([w({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"serviceItemId",void 0),m([w()],t.prototype,"sourceJSON",void 0),m([w({type:st,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),m([w({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),m([w({type:[Lze],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"subtypes",void 0),m([w({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),m([w(Oje)],t.prototype,"url",null),m([Pe("url")],t.prototype,"writeUrl",null),m([w({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),m([ke("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),t=m([H("esri.layers.mixins.FeatureLayerBase")],t),t};let q1=class extends It(be){constructor(t){super(t),this.expression=null,this.title=null,this.returnType=null}};m([w({type:String,json:{write:!0}})],q1.prototype,"expression",void 0),m([w({type:String,json:{write:!0}})],q1.prototype,"title",void 0),m([w({type:String,json:{write:!0}})],q1.prototype,"returnType",void 0),q1=m([H("esri.layers.support.ExpressionInfo")],q1);const PD=q1;var XO;let vh=XO=class extends be{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new XO({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:he(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};m([w({type:Boolean,json:{write:!0}})],vh.prototype,"isAutoGenerated",void 0),m([w({type:String,json:{write:!0}})],vh.prototype,"name",void 0),m([w({type:String,json:{write:!0}})],vh.prototype,"alias",void 0),m([w({type:String,json:{write:!0}})],vh.prototype,"onStatisticField",void 0),m([w({type:PD,json:{write:!0}})],vh.prototype,"onStatisticExpression",void 0),m([w({type:String,json:{write:!0}})],vh.prototype,"statisticType",void 0),vh=XO=m([H("esri.layers.support.AggregateField")],vh);const om=vh;let of=class extends be{constructor(){super(...arguments),this.type=null}};m([w({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],of.prototype,"type",void 0),of=m([H("esri.layers.support.FeatureReduction")],of);const ND="__begin__",FD="__end__",Rze=new RegExp(ND,"ig"),Pze=new RegExp(FD,"ig"),HZ=new RegExp("^"+ND,"i"),WZ=new RegExp(FD+"$","i"),qI='"',Nze=qI+" + ",Fze=" + "+qI;function Dze(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function jze(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function DD(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=Dze(e.labelExpression),t.type="conventional"),t}function zze(e){const t=DD(e);if(!t)return null;switch(t.type){case"conventional":return QO(t.expression);case"arcade":return t.expression}return null}function Vze(e){const t=DD(e);if(!t)return null;switch(t.type){case"conventional":return Gze(t.expression);case"arcade":return Uhe(t.expression)}return null}function QO(e){let t;return e?(t=wu(e,i=>ND+'$feature["'+i+'"]'+FD),t=HZ.test(t)?t.replace(HZ,""):qI+t,t=WZ.test(t)?t.replace(WZ,""):t+qI,t=t.replaceAll(Rze,Nze).replaceAll(Pze,Fze)):t='""',t}const Uze=/^\s*\{([^}]+)\}\s*$/i;function Gze(e){const t=e==null?void 0:e.match(Uze);return(t==null?void 0:t[1].trim())||null}const Bze=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,qze=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,Hze=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function Uhe(e){if(!e)return null;let t=Bze.exec(e)||qze.exec(e);return t?t[1]||t[3]:(t=Hze.exec(e),t?t[2]:null)}var eR;let np=eR=class extends be{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?QO(t.value):e}writeExpression(e,t,i){this.value!=null&&(e=QO(this.value)),e!=null&&(t[i]=e)}clone(){return new eR({expression:this.expression,title:this.title,value:this.value})}};m([w({type:String,json:{write:{writerEnsuresNonNull:!0}}})],np.prototype,"expression",void 0),m([ke("expression",["expression","value"])],np.prototype,"readExpression",null),m([Pe("expression")],np.prototype,"writeExpression",null),m([w({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],np.prototype,"title",void 0),m([w({json:{read:!1,write:!1}})],np.prototype,"value",void 0),np=eR=m([H("esri.layers.support.LabelExpressionInfo")],np);const Ghe=np;var tR;const dx=new gt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function px(e,t,i){return{enabled:!T8(i==null?void 0:i.layer)}}function Bhe(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function Wze(e){return(e==null?void 0:e.type)==="map-image"}function qhe(e){var t,i;return!!Wze(e)&&!!((i=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function Zze(e){return Bhe(e)||qhe(e==null?void 0:e.layer)}let $r=tR=class extends be{static evaluateWhere(e,t){const i=(r,n,o)=>{switch(n){case"=":return r==o;case"<>":return r!=o;case">":return r>o;case">=":return r>=o;case"<":return r<o;case"<=":return r<=o}return!1};try{if(e==null)return!0;const r=e.split(" ");if(r.length===3)return i(t[r[0]],r[1],r[2]);if(r.length===7){const n=i(t[r[0]],r[1],r[2]),o=r[3],u=i(t[r[4]],r[5],r[6]);switch(o){case"AND":return n&&u;case"OR":return n||u}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=zNe,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){const i=t.labelExpressionInfo;if(!i||!i.value&&!i.expression)return e}writeLabelExpression(e,t,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=jze(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=Uhe(this.labelExpressionInfo.expression);r&&(e="["+r+"]")}}e!=null&&(t[i]=e)}writeLabelExpressionInfo(e,t,i,r){if(e==null&&this.labelExpression!=null&&Bhe(r))e=new Ghe({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(r);n.expression&&(t[i]=n)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return DD(this)}getLabelExpressionArcade(){return zze(this)}getLabelExpressionSingleField(){return Vze(this)}hash(){return JSON.stringify(this)}clone(){return new tR({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:he(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:he(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};m([w({type:String,json:{write:!0}})],$r.prototype,"name",void 0),m([w({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:px}}}}})],$r.prototype,"allowOverrun",void 0),m([w({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:px}}}}})],$r.prototype,"deconflictionStrategy",void 0),m([w({type:String,json:{write:{overridePolicy(e,t,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&qhe(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],$r.prototype,"labelExpression",void 0),m([ke("labelExpression")],$r.prototype,"readLabelExpression",null),m([Pe("labelExpression")],$r.prototype,"writeLabelExpression",null),m([w({type:Ghe,json:{write:{overridePolicy:(e,t,i)=>Zze(i)?{allowNull:!0}:{enabled:!1}}}})],$r.prototype,"labelExpressionInfo",void 0),m([Pe("labelExpressionInfo")],$r.prototype,"writeLabelExpressionInfo",null),m([w({type:dx.apiValues,json:{type:dx.jsonValues,read:dx.read,write:dx.write}})],$r.prototype,"labelPlacement",void 0),m([w({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],$r.prototype,"labelPosition",void 0),m([w({type:Number})],$r.prototype,"maxScale",void 0),m([Pe("maxScale")],$r.prototype,"writeMaxScale",null),m([w({type:Number})],$r.prototype,"minScale",void 0),m([Pe("minScale")],$r.prototype,"writeMinScale",null),m([w({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:px}}}}})],$r.prototype,"repeatLabel",void 0),m([w({type:Number,cast:Gt,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:px}}}}})],$r.prototype,"repeatLabelDistance",void 0),m([w({types:YTe,json:{origins:{"web-scene":{types:XTe,write:nZ,default:null}},write:nZ,default:null}})],$r.prototype,"symbol",void 0),m([w({type:Boolean,json:{write:!0}})],$r.prototype,"useCodedValues",void 0),m([w({type:String,json:{write:!0}})],$r.prototype,"where",void 0),$r=tR=m([H("esri.layers.support.LabelClass")],$r);const XT=$r;var iR;let Is=iR=class extends of{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=Gt("12px"),this.fields=[],this.renderer=null}writeFields(e,t,i){const r=e.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());vn(i,r,t)}readRenderer(e,t,i){var n;const r=(n=t.drawingInfo)==null?void 0:n.renderer;return r?z_(r,t,i)??void 0:RD(t,i)}clone(){return new iR({fields:he(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:he(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:he(this.popupTemplate),renderer:he(this.renderer),binType:he(this.binType),size:this.size})}};m([Ke({binning:"binning"})],Is.prototype,"type",void 0),m([Ke({geohash:"geohash",square:"square"}),w({type:["geohash","square"]})],Is.prototype,"binType",void 0),m([w({type:Number,json:{write:!0}})],Is.prototype,"fixedBinLevel",void 0),m([w({type:[XT],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Is.prototype,"labelingInfo",void 0),m([w(LD)],Is.prototype,"labelsVisible",void 0),m([w({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Is.prototype,"maxScale",void 0),m([w(kD)],Is.prototype,"popupEnabled",void 0),m([w({type:Af,json:{name:"popupInfo",write:!0}})],Is.prototype,"popupTemplate",void 0),m([w({cast:e=>e==="auto"?e:Qs(Gt(e))})],Is.prototype,"size",void 0),m([w({type:[om],json:{write:!0}})],Is.prototype,"fields",void 0),m([Pe("fields")],Is.prototype,"writeFields",null),m([w({types:JT,json:{write:{target:"drawingInfo.renderer"}}})],Is.prototype,"renderer",void 0),m([ke("renderer",["drawingInfo.renderer"])],Is.prototype,"readRenderer",null),Is=iR=m([H("esri.layers.support.FeatureReductionBinning")],Is);const Hhe=Is;var rR;function ZZ(e){var t;return e.type==="simple"&&!((t=e.visualVariables)!=null&&t.length)}let Yr=rR=class extends be{constructor(e){super(e),this.type="cluster",this.clusterRadius=Gt("80px"),this.clusterMinSize=Gt("12px"),this.clusterMaxSize=Gt("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(e,t,i){var n,o;const r=(n=t.drawingInfo)==null?void 0:n.renderer;return(o=r==null?void 0:r.authoringInfo)!=null&&o.isAutoGenerated?null:r?ZZ(r)?null:z_(r,t,i)??void 0:RD(t,i)}readSymbol(e,t,i){var n,o;const r=(n=t.drawingInfo)==null?void 0:n.renderer;if((o=r==null?void 0:r.authoringInfo)!=null&&o.isAutoGenerated)return null;if(r&&ZZ(r)){const u=z_(r,t,i);return u==null?void 0:u.symbol}return null}writeSymbol(e,t,i,r){var o,u;const n=(u=(o=this.renderer)==null?void 0:o.authoringInfo)==null?void 0:u.isAutoGenerated;if(!this.renderer||n){const f=new U2({symbol:e});t.drawingInfo={renderer:f.write({},r)}}}writeFields(e,t,i){const r=e.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());vn(i,r,t)}readFields(e,t,i){return e.filter(r=>!r.isAutoGenerated).map(r=>om.fromJSON(r))}clone(){return new rR({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:he(this.labelingInfo),labelsVisible:this.labelsVisible,fields:he(this.fields),maxScale:this.maxScale,renderer:he(this.renderer),symbol:he(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:he(this.popupTemplate)})}};m([w({type:["cluster"],readOnly:!0,json:{write:!0}})],Yr.prototype,"type",void 0),m([w({cast:e=>e==="auto"?e:Qs(Gt(e)),json:{write:!0}})],Yr.prototype,"clusterRadius",void 0),m([w({type:Number,cast:Gt,json:{write:!0}})],Yr.prototype,"clusterMinSize",void 0),m([w({type:Number,cast:Gt,json:{write:!0}})],Yr.prototype,"clusterMaxSize",void 0),m([w({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Yr.prototype,"maxScale",void 0),m([w(kD)],Yr.prototype,"popupEnabled",void 0),m([w({type:Af,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Yr.prototype,"popupTemplate",void 0),m([w({types:JT,json:{write:{target:"drawingInfo.renderer"}}})],Yr.prototype,"renderer",void 0),m([ke("renderer",["drawingInfo.renderer"])],Yr.prototype,"readRenderer",null),m([w({types:JTe})],Yr.prototype,"symbol",void 0),m([ke("symbol",["drawingInfo.renderer"])],Yr.prototype,"readSymbol",null),m([Pe("symbol")],Yr.prototype,"writeSymbol",null),m([w({type:[XT],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Yr.prototype,"labelingInfo",void 0),m([w(LD)],Yr.prototype,"labelsVisible",void 0),m([w({type:[om],json:{write:!0}})],Yr.prototype,"fields",void 0),m([Pe("fields")],Yr.prototype,"writeFields",null),m([ke("fields")],Yr.prototype,"readFields",null),Yr=rR=m([H("esri.layers.support.FeatureReductionCluster")],Yr);const Whe=Yr;var nR;let R4=nR=class extends of{constructor(e){super(e),this.type="selection"}clone(){return new nR}};m([w({type:["selection"]})],R4.prototype,"type",void 0),R4=nR=m([H("esri.layers.support.FeatureReductionSelection")],R4);const JZ=R4,KZ={key:"type",base:of,typeMap:{cluster:Whe,binning:Hhe}},Jze={types:{key:"type",base:of,typeMap:{selection:JZ,cluster:Whe,binning:Hhe}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:KZ},"portal-item":{types:KZ},"web-scene":{types:{key:"type",base:of,typeMap:{selection:JZ}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:jn}}}}},Hm={Base64:0,Hex:1,String:2,Raw:3},gv=8,Zhe=(1<<gv)-1;function Vp(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function Kze(e){const t=[];for(let i=0,r=e.length*gv;i<r;i+=gv)t[i>>5]|=(e.charCodeAt(i/gv)&Zhe)<<i%32;return t}function Yze(e){const t=[];for(let i=0,r=32*e.length;i<r;i+=gv)t.push(String.fromCharCode(e[i>>5]>>>i%32&Zhe));return t.join("")}function Xze(e){const t="0123456789abcdef",i=[];for(let r=0,n=4*e.length;r<n;r++)i.push(t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15));return i.join("")}function Qze(e){const t="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let n=0,o=4*e.length;n<o;n+=3){const u=(e[n>>2]>>n%4*8&255)<<16|(e[n+1>>2]>>(n+1)%4*8&255)<<8|e[n+2>>2]>>(n+2)%4*8&255;for(let f=0;f<4;f++)8*n+6*f>32*e.length?r.push(t):r.push(i.charAt(u>>6*(3-f)&63))}return r.join("")}function eVe(e,t){return e<<t|e>>>32-t}function QT(e,t,i,r,n,o){return Vp(eVe(Vp(Vp(t,e),Vp(r,o)),n),i)}function ys(e,t,i,r,n,o,u){return QT(t&i|~t&r,e,t,n,o,u)}function ms(e,t,i,r,n,o,u){return QT(t&r|i&~r,e,t,n,o,u)}function gs(e,t,i,r,n,o,u){return QT(t^i^r,e,t,n,o,u)}function vs(e,t,i,r,n,o,u){return QT(i^(t|~r),e,t,n,o,u)}function tVe(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let i=1732584193,r=-271733879,n=-1732584194,o=271733878;for(let u=0;u<e.length;u+=16){const f=i,g=r,b=n,E=o;i=ys(i,r,n,o,e[u],7,-680876936),o=ys(o,i,r,n,e[u+1],12,-389564586),n=ys(n,o,i,r,e[u+2],17,606105819),r=ys(r,n,o,i,e[u+3],22,-1044525330),i=ys(i,r,n,o,e[u+4],7,-176418897),o=ys(o,i,r,n,e[u+5],12,1200080426),n=ys(n,o,i,r,e[u+6],17,-1473231341),r=ys(r,n,o,i,e[u+7],22,-45705983),i=ys(i,r,n,o,e[u+8],7,1770035416),o=ys(o,i,r,n,e[u+9],12,-1958414417),n=ys(n,o,i,r,e[u+10],17,-42063),r=ys(r,n,o,i,e[u+11],22,-1990404162),i=ys(i,r,n,o,e[u+12],7,1804603682),o=ys(o,i,r,n,e[u+13],12,-40341101),n=ys(n,o,i,r,e[u+14],17,-1502002290),r=ys(r,n,o,i,e[u+15],22,1236535329),i=ms(i,r,n,o,e[u+1],5,-165796510),o=ms(o,i,r,n,e[u+6],9,-1069501632),n=ms(n,o,i,r,e[u+11],14,643717713),r=ms(r,n,o,i,e[u],20,-373897302),i=ms(i,r,n,o,e[u+5],5,-701558691),o=ms(o,i,r,n,e[u+10],9,38016083),n=ms(n,o,i,r,e[u+15],14,-660478335),r=ms(r,n,o,i,e[u+4],20,-405537848),i=ms(i,r,n,o,e[u+9],5,568446438),o=ms(o,i,r,n,e[u+14],9,-1019803690),n=ms(n,o,i,r,e[u+3],14,-187363961),r=ms(r,n,o,i,e[u+8],20,1163531501),i=ms(i,r,n,o,e[u+13],5,-1444681467),o=ms(o,i,r,n,e[u+2],9,-51403784),n=ms(n,o,i,r,e[u+7],14,1735328473),r=ms(r,n,o,i,e[u+12],20,-1926607734),i=gs(i,r,n,o,e[u+5],4,-378558),o=gs(o,i,r,n,e[u+8],11,-2022574463),n=gs(n,o,i,r,e[u+11],16,1839030562),r=gs(r,n,o,i,e[u+14],23,-35309556),i=gs(i,r,n,o,e[u+1],4,-1530992060),o=gs(o,i,r,n,e[u+4],11,1272893353),n=gs(n,o,i,r,e[u+7],16,-155497632),r=gs(r,n,o,i,e[u+10],23,-1094730640),i=gs(i,r,n,o,e[u+13],4,681279174),o=gs(o,i,r,n,e[u],11,-358537222),n=gs(n,o,i,r,e[u+3],16,-722521979),r=gs(r,n,o,i,e[u+6],23,76029189),i=gs(i,r,n,o,e[u+9],4,-640364487),o=gs(o,i,r,n,e[u+12],11,-421815835),n=gs(n,o,i,r,e[u+15],16,530742520),r=gs(r,n,o,i,e[u+2],23,-995338651),i=vs(i,r,n,o,e[u],6,-198630844),o=vs(o,i,r,n,e[u+7],10,1126891415),n=vs(n,o,i,r,e[u+14],15,-1416354905),r=vs(r,n,o,i,e[u+5],21,-57434055),i=vs(i,r,n,o,e[u+12],6,1700485571),o=vs(o,i,r,n,e[u+3],10,-1894986606),n=vs(n,o,i,r,e[u+10],15,-1051523),r=vs(r,n,o,i,e[u+1],21,-2054922799),i=vs(i,r,n,o,e[u+8],6,1873313359),o=vs(o,i,r,n,e[u+15],10,-30611744),n=vs(n,o,i,r,e[u+6],15,-1560198380),r=vs(r,n,o,i,e[u+13],21,1309151649),i=vs(i,r,n,o,e[u+4],6,-145523070),o=vs(o,i,r,n,e[u+11],10,-1120210379),n=vs(n,o,i,r,e[u+2],15,718787259),r=vs(r,n,o,i,e[u+9],21,-343485551),i=Vp(i,f),r=Vp(r,g),n=Vp(n,b),o=Vp(o,E)}return[i,r,n,o]}function Jhe(e,t=Hm.Hex){const i=t||Hm.Base64,r=tVe(Kze(e),e.length*gv);switch(i){case Hm.Raw:return r;case Hm.Hex:return Xze(r);case Hm.String:return Yze(r);case Hm.Base64:return Qze(r)}}const iVe=()=>Se.getLogger("esri.views.2d.layers.support.clusterUtils");we.add("esri-cluster-arcade-enabled",!0);const rVe=we("esri-cluster-arcade-enabled"),nVe=new Set(["simple-line","simple-fill","picture-fill"]);function YZ(e,t){let i=t.clone();if(!sVe(i))return i;if(t.getSymbols().some(r=>nVe.has(r.type))&&(i=new U2({symbol:new Dn})),i.authoringInfo||(i.authoringInfo=new mD),i.authoringInfo.isAutoGenerated=!0,"visualVariables"in i){const r=(i.visualVariables||[]).filter(n=>n.valueExpression!=="$view.scale");r.forEach(n=>{n.type==="rotation"?n.field?n.field=Hf(e,n.field,"avg_angle","number"):n.valueExpression&&(n.field=$w(e,n.valueExpression,"avg_angle","number"),n.valueExpression=null):n.normalizationField?(n.field=Hf(e,n.field,"avg_norm","number",n.normalizationField),n.normalizationField=null):n.field?n.field=Hf(e,n.field,"avg","number"):n.valueExpression&&(n.field=$w(e,n.valueExpression,"avg","number"),n.valueExpression=null)}),i.visualVariables=r}switch(i.type){case"simple":break;case"pie-chart":for(const r of i.attributes)r.field?r.field=Hf(e,r.field,"sum","number"):r.valueExpression&&(r.field=$w(e,r.valueExpression,"sum","number"),r.valueExpression=null);break;case"unique-value":i.field?i.field=Hf(e,i.field,"mode","string"):i.valueExpression&&(i.field=$w(e,i.valueExpression,"mode","string"),i.valueExpression=null);break;case"class-breaks":i.normalizationField?(i.field=Hf(e,i.field,"avg_norm","number",i.normalizationField),i.normalizationField=null):i.field?i.field=Hf(e,i.field,"avg","number"):i.valueExpression&&(i.field=$w(e,i.valueExpression,"avg","number"),i.valueExpression=null)}return i}const sVe=e=>{const t=i=>iVe().error(new ne("Unsupported-renderer",i,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const i=e.normalizationType;if(i!=="field")return t(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!rVe){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function oVe(e,t,i){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const r=i,n="field",o=t.toLowerCase()+",norm:"+n+","+r.toLowerCase();return"cluster_avg_"+Jhe(o)}}}function $w(e,t,i,r){const n=Jhe(t),o=i==="mode"?`cluster_type_${n}`:i==="sum"?`cluster_sum_${n}`:`cluster_avg_${n}`;return e.some(u=>u.name===o)||e.push(new om({name:o,isAutoGenerated:!0,onStatisticExpression:new PD({expression:t,returnType:r}),statisticType:i})),o}function Hf(e,t,i,r,n){if(t==="cluster_count"||e.some(u=>u.name===t))return t;const o=oVe(i,t,n);return e.some(u=>u.name===o)||(i==="avg_norm"?e.push(new om({name:o,isAutoGenerated:!0,onStatisticExpression:new PD({expression:`$feature.${t} / $feature.${n}`,returnType:r}),statisticType:"avg"})):e.push(new om({name:o,isAutoGenerated:!0,onStatisticField:t,statisticType:i}))),o}const aVe=e=>{let t=class extends e{constructor(...i){super(...i),this.addHandles(me(()=>this.renderer,()=>{if(this.featureReduction){const r=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",r)}},hl))}set featureReduction(i){const r=this._normalizeFeatureReduction(i);this._set("featureReduction",r)}set renderer(i){}_withClusterVariable(i,r,n){const o=i.clone();return"visualVariables"in o&&(o.visualVariables||(o.visualVariables=[]),o.visualVariables.some(u=>u.type==="size")||o.visualVariables.push(new z2({field:"cluster_count",stops:[new v4({value:1}),new v4({useMinValue:!0,size:r}),new v4({useMaxValue:!0,size:n})]}))),o}_normalizeFeatureReduction(i){var I;if((i==null?void 0:i.type)!=="cluster")return i;const r=i.clone(),n=[new om({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],o=(r.fields??[]).filter(M=>!M.isAutoGenerated),u=i.renderer&&!((I=i.renderer.authoringInfo)!=null&&I.isAutoGenerated),{clusterMinSize:f,clusterMaxSize:g}=r;if(u){r.fields=[...n,...o];const M=this._withClusterVariable(r.renderer,f,g);return r.effectiveFeatureRenderer=M,r.effectiveClusterRenderer=M,r}if(i.symbol){if(r.fields=[...n,...o],r.renderer=null,!this.renderer)return r.effectiveFeatureRenderer=null,r.effectiveClusterRenderer=null,r;const M=YZ(n,this.renderer),k=this._withClusterVariable(M,f,g),L="visualVariables"in k&&k.visualVariables?k.visualVariables:[],P=new U2({symbol:i.symbol,visualVariables:L});return r.fields=[...n,...o],r.effectiveFeatureRenderer=k,r.effectiveClusterRenderer=P,r}if(!this.renderer)return i;const b=YZ(n,this.renderer);r.fields=[...n,...o],r.renderer=b;const E=this._withClusterVariable(b,f,g);return r.effectiveFeatureRenderer=E,r.effectiveClusterRenderer=E,r}};return m([w(Jze)],t.prototype,"featureReduction",null),t=m([H("esri.layers.mixins.FeatureReductionLayer")],t),t},XZ={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},QZ={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},eJ={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},lVe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":XZ,"web-map/basemap":QZ,"web-map/tables":eJ,"link-chart/operational-layers":{...XZ,LinkChartLayer:!0},"link-chart/basemap":QZ,"link-chart/tables":eJ,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0}},uVe=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(i,r,n){var o;return((o=n==null?void 0:n.portalItem)==null?void 0:o.type)==="Group Layer"?void 0:i}writeListMode(i,r,n,o){(o&&o.layerContainerType==="ground"||i&&Cwe(this,n,{},o))&&(r[n]=i)}writeOperationalLayerType(i,r,n,o){i&&(o==null?void 0:o.layerContainerType)!=="tables"&&(r.layerType=i)}writeTitle(i,r){r.title=i??"Layer"}readTimeExtent(i){return i?wn.fromArray(i):null}writeTimeExtent(i,r,n,o){i&&o.layerContainerType!=="tables"&&(i.isEmpty?o!=null&&o.messages&&o.messages.push(new ne("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):r[n]=i.toArray())}read(i,r){r&&(r.layer=this),vte(this,i,n=>super.read(i,n),r)}write(i,r){var u,f;if(!this.persistenceEnabled&&!(r!=null&&r.ignorePersistenceEnabled))return null;if(r!=null&&r.origin){const g=`${r.origin}/${r.layerContainerType||"operational-layers"}`,b=lVe[g];let E=!!(b!=null&&b[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&g==="web-scene/operational-layers"&&(E=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&g==="web-map/operational-layers"&&(E=!1),!E)return(u=r.messages)==null||u.push(new ne("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${g}'`,{layer:this})),null}const n=super.write(i,{...r,layer:this}),o=!!r&&!!r.messages&&!!r.messages.filter(g=>g instanceof ne&&g.name==="web-document-write:property-required").length;return z6(n==null?void 0:n.url)?((f=r==null?void 0:r.messages)==null||f.push(new ne("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&o?null:n}beforeSave(){}};return m([w({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),m([ke("id",["id"])],t.prototype,"readId",null),m([w(Rhe)],t.prototype,"listMode",void 0),m([Pe("listMode")],t.prototype,"writeListMode",null),m([w({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:jn}}}}})],t.prototype,"operationalLayerType",void 0),m([Pe("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),m([w(JO)],t.prototype,"opacity",void 0),m([w({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),m([w({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),m([Pe("title"),Pe(["web-scene"],"title")],t.prototype,"writeTitle",null),m([w({type:wn,json:{origins:{"web-scene":{write:{layerContainerTypes:jn}}}}})],t.prototype,"visibilityTimeExtent",void 0),m([ke("visibilityTimeExtent")],t.prototype,"readTimeExtent",null),m([Pe(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[Ot,d2]]}})],t.prototype,"writeTimeExtent",null),m([w({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:jn}}},name:"visibility",write:!0}})],t.prototype,"visible",void 0),t=m([H("esri.layers.mixins.OperationalLayer")],t),t};var sR;const fx=new gt({asc:"ascending",desc:"descending"});let H1=sR=class extends be{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new sR({field:this.field,valueExpression:this.valueExpression,order:this.order})}};m([w({type:String,json:{write:!0}})],H1.prototype,"field",void 0),m([w({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],H1.prototype,"valueExpression",void 0),m([w({type:fx.apiValues,json:{type:fx.jsonValues,read:fx.read,write:fx.write}})],H1.prototype,"order",void 0),H1=sR=m([H("esri.layers.support.OrderByInfo")],H1);const Khe=H1;function cVe(e,t,i){if(!e)return null;const r=e.find(o=>!!o.field);if(!r)return null;const n=new Khe;return n.read(r,i),[n]}function hVe(e,t,i,r){const n=e.find(o=>!!o.field);n&&vn(i,[n.toJSON()],t)}const dVe={type:[Khe],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:cVe},write:{writer:hVe}}},pVe=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return m([w(dVe)],t.prototype,"orderBy",void 0),t=m([H("esri.layers.mixins.OrderedLayer")],t),t};async function fVe(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return Ag(e);const i=st.WGS84;return await $2(t,i),dl(e,i)}function yVe(e,t){if(!Yhe(e,t)){const i=e.typeKeywords;i?i.push(t):e.typeKeywords=[t]}}function Yhe(e,t){var i;return!!((i=e.typeKeywords)!=null&&i.includes(t))}function wht(e){return Yhe(e,Xhe.HOSTED_SERVICE)}function mVe(e,t){const i=e.typeKeywords;if(i){const r=i.indexOf(t);r>-1&&i.splice(r,1)}}function bht(e,t,i){i?yVe(e,t):mVe(e,t)}async function _ht(e){const t=e.clone().normalize();let i;if(t.length>1)for(const r of t)i?r.width>i.width&&(i=r):i=r;else i=t[0];return fVe(i)}const Xhe={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer"};function tJ(e){var g;const{portal:t,isOrgItem:i,itemControl:r}=e,n=(g=t.user)==null?void 0:g.privileges;let o=!n||n.includes("features:user:edit"),u=!!i&&!!(n!=null&&n.includes("features:user:fullEdit"));const f=r==="update"||r==="admin";return f?u=o=!0:u&&(o=!0),{features:{edit:o,fullEdit:u},content:{updateItem:f}}}const gVe=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=Jt(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,n){if(r.itemId)return new Mc({id:r.itemId,portal:n==null?void 0:n.portal})}writePortalItem(i,r){i!=null&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){var n;if((n=this.portalItem)!=null&&n.id)try{const{load:o}=await ce(()=>import("./layersLoader-C2CycyYh.js"),__vite__mapDeps([218,131,129,130,128]),import.meta.url);return Li(r),await o({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap},r)}catch(o){throw Or(o)||Se.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${o}`),o}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(mc(r),!0)))}async setUserPrivileges(i,r){if(!Kt.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:n,fullEdit:o},content:{updateItem:u}}=await this._fetchUserPrivileges(i,r);this._set("userHasEditingPrivileges",n),this._set("userHasFullEditingPrivileges",o),this._set("userHasUpdateItemPrivileges",u)}catch(n){mc(n)}}async _fetchUserPrivileges(i,r){let n=this.portalItem;if(!i||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(r);const o=i===n.id;if(o&&n.portal.user)return tJ(n);let u,f;if(o)u=n.portal.url;else try{u=await ase(this.url,r)}catch(I){mc(I)}if(!u||!Wwe(u,n.portal.url))return this._fetchFallbackUserPrivileges(r);try{const I=r!=null?r.signal:null;f=await(Et==null?void 0:Et.getCredential(`${u}/sharing`,{prompt:!1,signal:I}))}catch(I){mc(I)}const g=!0,b=!1,E=!1;if(!f)return{features:{edit:g,fullEdit:b},content:{updateItem:E}};try{if(o?await n.reload():(n=new Mc({id:i,portal:{url:u}}),await n.load(r)),n.portal.user)return tJ(n)}catch(I){mc(I)}return{features:{edit:g,fullEdit:b},content:{updateItem:E}}}async _fetchFallbackUserPrivileges(i){let r=!0;try{r=await this._fetchUserHasEditingPrivileges(i)}catch(n){mc(n)}return{features:{edit:r,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const r=this.url?Et==null?void 0:Et.findCredential(this.url):null;if(!r)return!0;const n=yx.credential===r?yx.user:await this._fetchEditingUser(i);return yx.credential=r,yx.user=n,(n==null?void 0:n.privileges)==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var E,I;const r=(I=(E=this.portalItem)==null?void 0:E.portal)==null?void 0:I.user;if(r)return r;const n=Et==null?void 0:Et.findServerInfo(this.url??"");if(!(n!=null&&n.owningSystemUrl))return null;const o=`${n.owningSystemUrl}/sharing/rest`,u=Ur.getDefault();if(u&&u.loaded&&sl(u.restUrl)===sl(o))return u.user;const f=`${o}/community/self`,g=i!=null?i.signal:null,b=await Z6(Ct(f,{authMode:"no-prompt",query:{f:"json"},signal:g}));return b.ok?hF.fromJSON(b.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){var u;const n=r==null?void 0:r.portal,o=((u=this.portalItem)==null?void 0:u.id)&&(this.portalItem.portal||Ur.getDefault());return n&&o&&!$te(o.restUrl,n.restUrl)?(r.messages&&r.messages.push(new ne("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return m([w({type:Mc})],t.prototype,"portalItem",null),m([ke("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),m([Pe("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),m([w({clonable:!1})],t.prototype,"resourceReferences",void 0),m([w({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),m([w({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),m([w({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=m([H("esri.layers.mixins.PortalLayer")],t),t},yx={credential:null,user:null};let Zb=class extends De{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};m([w()],Zb.prototype,"updating",void 0),m([w()],Zb.prototype,"status",void 0),Zb=m([H("esri.layers.support.PublishingInfo")],Zb);const vVe=Zb,wVe=Symbol(),bVe=e=>{var t;let i=class extends e{constructor(){super(...arguments),this[t]=!0}get publishingInfo(){if(this.destroyed)return null;const r=this._get("publishingInfo");if(r)return r;const n=new vVe;return this._checkPublishingStatus(n),n}_checkPublishingStatus(r){let u=0;const f=async b=>{let E;r.updating=!0;try{E=await this.fetchPublishingStatus()}catch{E="unavailable"}E!=="published"&&E!=="unavailable"||(r.status==="publishing"&&this.refresh(),g.remove()),r.status=E,r.updating=!1,g.removed||(u=setTimeout(f,b,b+125))},g={removed:!1,remove(){this.removed=!0,clearTimeout(u)}};this.when().catch(()=>g.remove()),f(250),this.addHandles(g)}};return t=wVe,m([w({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=m([H("esri.layers.mixins.PublishableLayer")],i),i},Up=new Oe,F3=new WeakMap;function _Ve(e){xVe(e)&&Up.push(new WeakRef(e))}function SVe(e){const t=Up.find(i=>i.deref()===e);t&&Up.remove(t)}function xVe(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function Qhe(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:Qhe(t,e%t):0}let R7=0,mx=0;function EVe(){const e=Date.now();let t=!1;for(const i of Up){const r=i.deref();r?r.refreshInterval&&e-(F3.get(r)??0)+5>=6e4*r.refreshInterval&&(F3.set(r,e),r.refresh(e)):t=!0}if(t)for(let i=Up.length-1;i>=0;i--)Up.at(i).deref()||Up.removeAt(i)}ute(()=>{const e=Date.now();let t=0;for(const i of Up){const r=i.deref();r&&(t=Qhe(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?F3.get(r)||F3.set(r,e):F3.delete(r))}if(t!==mx){if(mx=t,clearInterval(R7),mx===0)return void(R7=0);R7=setInterval(EVe,mx)}},hl);const iJ=.1,IVe=e=>{let t=class extends e{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=yu(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||_Ve(this)},()=>{})}destroy(){SVe(this)}castRefreshInterval(i){return i>=iJ?i:i<=0?0:iJ}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){Do(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{Se.getLogger(this).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}get test(){}};return m([w({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:jn}}}}})],t.prototype,"refreshInterval",void 0),m([St("refreshInterval")],t.prototype,"castRefreshInterval",null),m([w({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),m([w({readOnly:!0})],t.prototype,"refreshParameters",null),t=m([H("esri.layers.mixins.RefreshableLayer")],t),t},ede=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&TVe(i,r.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===i.minScale&&n.maxScale===i.maxScale?n:i}};return m([w({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),m([w({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),m([w({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=m([H("esri.layers.mixins.ScaleRangeLayer")],t),t};function TVe(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const jD=_n()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let Jb=class extends It(be){constructor(t){super(t),this.unit="milliseconds",this.value=0}toMilliseconds(){return Nse(this.value,this.unit,"milliseconds")}};m([Ke(jD,{nonNullable:!0})],Jb.prototype,"unit",void 0),m([w({type:Number,json:{write:!0},nonNullable:!0})],Jb.prototype,"value",void 0),Jb=m([H("esri.time.TimeInterval")],Jb);const e2=Jb;function rJ(e,t){return e2.fromJSON({value:e,unit:t})}let Jn=class extends It(be){constructor(t){super(t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(t,i){return i.timeExtent&&Array.isArray(i.timeExtent)&&i.timeExtent.length===2?wn.fromArray(i.timeExtent):null}writeFullTimeExtent(t,i){(t==null?void 0:t.start)!=null&&t.end!=null?i.timeExtent=t.toArray():i.timeExtent=null}readInterval(t,i){return i.timeInterval&&i.timeIntervalUnits?rJ(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?rJ(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(t,i){i.timeInterval=(t==null?void 0:t.toJSON().value)??null,i.timeIntervalUnits=(t==null?void 0:t.toJSON().unit)??null}};m([w({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],Jn.prototype,"cumulative",void 0),m([w({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],Jn.prototype,"endField",void 0),m([w({type:wn,json:{write:{enabled:!0,allowNull:!0}}})],Jn.prototype,"fullTimeExtent",void 0),m([ke("fullTimeExtent",["timeExtent"])],Jn.prototype,"readFullTimeExtent",null),m([Pe("fullTimeExtent")],Jn.prototype,"writeFullTimeExtent",null),m([w({type:Boolean,json:{write:!0}})],Jn.prototype,"hasLiveData",void 0),m([w({type:e2,json:{write:{enabled:!0,allowNull:!0}}})],Jn.prototype,"interval",void 0),m([ke("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Jn.prototype,"readInterval",null),m([Pe("interval")],Jn.prototype,"writeInterval",null),m([w({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],Jn.prototype,"startField",void 0),m([w(lI("timeReference",!0))],Jn.prototype,"timeZone",void 0),m([w({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Jn.prototype,"trackIdField",void 0),m([w({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],Jn.prototype,"useTime",void 0),m([w({type:[Date],json:{read:!1}})],Jn.prototype,"stops",void 0),Jn=m([H("esri.layers.support.TimeInfo")],Jn);const tde=Jn,$Ve={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:jn}}},MVe=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const n=r.timeInfo.exportOptions;if(!n)return null;const o=n.timeOffset,u=jD.fromJSON(n.timeOffsetUnits);return o&&u?new e2({value:o,unit:u}):null}set timeInfo(i){qse(i,this.fieldsIndex),this._set("timeInfo",i)}};return m([w({type:wn,json:{write:!1}})],t.prototype,"timeExtent",void 0),m([w({type:e2})],t.prototype,"timeOffset",void 0),m([ke("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),m([w({value:null,type:tde,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),m([w($Ve)],t.prototype,"useViewTime",void 0),t=m([H("esri.layers.mixins.TemporalLayer")],t),t},nJ=new gt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let sp=class extends It(be){constructor(t){super(t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};m([w({json:{write:!0}})],sp.prototype,"name",void 0),m([w({json:{write:!0}})],sp.prototype,"description",void 0),m([w({json:{read:nJ.read,write:nJ.write}})],sp.prototype,"drawingTool",void 0),m([w({json:{write:!0}})],sp.prototype,"prototype",void 0),m([w({json:{write:!0}})],sp.prototype,"thumbnail",void 0),sp=m([H("esri.layers.support.FeatureTemplate")],sp);const zD=sp;let wh=class extends It(be){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){const i={};for(const r of Object.keys(t))i[r]=xT(t[r]);return i}writeDomains(t,i){var n;const r={};for(const o of Object.keys(t))t[o]&&(r[o]=(n=t[o])==null?void 0:n.toJSON());i.domains=r}};m([w({json:{write:!0}})],wh.prototype,"id",void 0),m([w({json:{write:!0}})],wh.prototype,"name",void 0),m([w({json:{write:!0}})],wh.prototype,"domains",void 0),m([ke("domains")],wh.prototype,"readDomains",null),m([Pe("domains")],wh.prototype,"writeDomains",null),m([w({type:[zD],json:{write:!0}})],wh.prototype,"templates",void 0),wh=m([H("esri.layers.support.FeatureType")],wh);const ide=wh;function CVe(){return{fields:{type:[ET],value:null,set:function(e){if(e&&we("big-integer-warning-enabled")){const t=e.filter(i=>i.type==="big-integer"||i.type==="oid"&&(i.length||0)>=8);if(t.length){const i=t.map(r=>`'${r.name}'`).join(", ");Se.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${i}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return kce.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var t;const e=this._userOutFields;if(!(e!=null&&e.length))return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const i of e)((t=this.fieldsIndex)==null?void 0:t.has(i))||Se.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:e});return pT(this.fieldsIndex,e)}}}}const P7=()=>Se.getLogger("esri.layers.support.labelingInfo"),AVe=/\[([^[\]]+)\]/gi;function N7(e,t,i){return e?e.map(r=>{var o;const n=new XT;if(n.read(r,i),n.labelExpression){const u=t.fields||((o=t.layerDefinition)==null?void 0:o.fields)||this.fields;n.labelExpression=n.labelExpression.replaceAll(AVe,(f,g)=>`[${kVe(g,u)}]`)}return n}):null}function kVe(e,t){if(!t)return e;const i=e.toLowerCase();for(let r=0;r<t.length;r++){const n=t[r].name;if(n.toLowerCase()===i)return n}return e}const LVe={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function $ht(e,t){const i=[];for(const r of e){const n=r.labelPlacement,o=LVe[t];if(!r.symbol)return P7().warn("No ILabelClass symbol specified."),[];if(!o)return P7().error(new ne("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),[];if(o.includes(n))i.push(r);else{const u=o[0];n&&P7().warn(`Found invalid label placement type ${n} for ${t}. Defaulting to ${u}`);const f=r.clone();f.labelPlacement=u,i.push(f)}}return i}const W1=[];function OVe(e,t){if(lae(e.url??""))return!0;const{wkid:i}=t;for(const r of W1){if((e.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}W1.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),W1.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),W1.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),W1.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),W1.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]);async function RVe(e,t,i){const r=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const n=await Z6(r.populateFromStyle());if(Li(i),n.ok===!1){const o=n.error;t!=null&&t.messages&&t.messages.push(new ga("renderer:style-reference",`Failed to create unique value renderer from style reference: ${o.message}`,{error:o,context:t})),e.clear("renderer",t==null?void 0:t.origin)}}}function PVe({displayField:e,editFieldsInfo:t,fields:i,objectIdField:r,title:n},o){if(!i)return null;const u=jVe({editFieldsInfo:t,fields:i,objectIdField:r},o);if(!u.length)return null;const f=UVe({titleBase:n,fields:i,displayField:e}),g=VVe();return new Af({title:f,content:g,fieldInfos:u})}function HI(e){var g;const{title:t,graphic:i}=e??{},{attributes:r,sourceLayer:n}=i??{},o=n&&"displayField"in n?n.displayField:null,u=o?r==null?void 0:r[o]:null,f=(g=i==null?void 0:i.getObjectId())==null?void 0:g.toString();return t||u||f||""}const NVe=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):$6e(e,t);function FVe({fields:e,ignoreFieldTypes:t,sortDisabled:i}){const r=e;return t&&(e=e.filter(n=>!t.includes(n.type))),e===r&&(e=e.slice()),i!==!0&&e.sort(DVe),e}function DVe(e,t){return e.type==="oid"?-1:t.type==="oid"?1:sJ(e)?-1:sJ(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function jVe(e,t){const i=t==null?void 0:t.visibleFieldNames;return FVe({fields:e.fields??[],ignoreFieldTypes:(t==null?void 0:t.ignoreFieldTypes)||GVe,sortDisabled:t==null?void 0:t.sortDisabled}).map(r=>new SS({fieldName:r.name,isEditable:T6e(r,e),label:r.alias,format:zVe(r),visible:NVe(r,{...e,visibleFieldNames:i})}))}function zVe(e){switch(e.type){case"small-integer":case"integer":case"single":return new N9({digitSeparator:!0,places:0});case"double":return new N9({digitSeparator:!0,places:2});case"string":return P8(e.name)?new N9({digitSeparator:!0,places:0}):void 0;default:return}}function VVe(){return[new im,new Bv]}function UVe(e){const t=m6e(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i??""}function sJ(e){var i;return(e.name&&e.name.toLowerCase())==="name"?!0:((i=e.alias)==null?void 0:i.toLowerCase())==="name"}const GVe=["geometry","blob","raster","guid","xml"],BVe=1/255.5;var _c;(function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"})(_c||(_c={}));const qn="FeatureLayer";function gx(e,t){return new ne("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function oJ(e){return e&&e instanceof Oe}const F7=CVe();function D7(e,t,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let Ye=class extends Oze(aVe(Tje(bVe(Sje(She(pVe(MVe(ede(IVe(vje(uVe(gVe(KT(_je(gje(It(S_))))))))))))))))){constructor(...t){super(...t),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=st.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=yu(async(i,r,n)=>{const{save:o,saveAs:u}=await ce(()=>import("./featureLayerUtils-CjeWP9Gz.js"),__vite__mapDeps([219,220,221,222,223,131]),import.meta.url);switch(i){case _c.SAVE:return o(this,r);case _c.SAVE_AS:return u(this,n,r)}})}destroy(){var t;(t=this.source)==null||t.destroy()}normalizeCtorArgs(t,i){return typeof t=="string"?{url:t,...i}:t}load(t){var n;const i=t!=null?t.signal:null;if((n=this.portalItem)!=null&&n.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(i).then(o=>this.initLayerProperties(o))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},t).catch(mc).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const o=await this._fetchFirstValidLayerId(i);o!=null&&(this.layerId=o)}if(!this.url&&!this._hasMemorySource())throw new ne("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(i))}).then(()=>uze(this,"load",t));return this.addResolvingPromise(r),Promise.resolve(this)}warnInvisibleDrapedSymbols(){var t,i,r;((t=this.elevationInfo)==null?void 0:t.mode)==="on-the-ground"&&((i=this.renderer)==null?void 0:i.type)==="simple"&&((r=this.renderer.symbol)==null?void 0:r.type)==="polygon-3d"&&this.renderer.symbol.symbolLayers.some(n=>n.type==="fill"&&n.material!=null&&(!n.material.color||n.material.color.a*this.opacity<BVe)&&(this.loadWarnings.push(new ga("feature-layer:invisible-draped-symbols","FeatureLayer has fully transparent symbols which will no longer render or highlight",{layer:this})),!0))}readCapabilities(t,i){return i=i.layerDefinition||i,Vhe(i,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var t;return!(this.loaded&&!((t=this.capabilities)!=null&&t.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(t){this._overrideIfSome("editingEnabled",t)}readEditingEnabled(t,i){return this._readEditingEnabled(i,!1)}readEditingEnabledFromWebMap(t,i,r){return this._readEditingEnabled(i,!0,r)}writeEditingEnabled(t,i){this._writeEditingEnabled(t,i,!1)}writeEditingEnabledToWebMap(t,i,r,n){this._writeEditingEnabled(t,i,!0,n)}get effectiveEditingEnabled(){return cze(this)}readIsTable(t,i){return(i=(i==null?void 0:i.layerDefinition)??i).type==="Table"||!i.geometryType}writeIsTable(t,i,r,n){n!=null&&n.writeLayerSchema&&vn(r,t?"Table":"Feature Layer",i)}readGlobalIdField(t,i){return Fhe(i.layerDefinition||i)}readObjectIdField(t,i){return Dhe(i.layerDefinition||i)}get parsedUrl(){const t=_r(this.url);return t!=null&&(this.dynamicDataSource!=null?t.path=By(t.path,"dynamicLayer"):this.layerId!=null&&(t.path=By(t.path,this.layerId.toString()))),t}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(t){dB(t,this.fieldsIndex),this._set("renderer",t)}readRenderer(t,i,r){var o;i=i.layerDefinition||i;const n=(o=i.drawingInfo)==null?void 0:o.renderer;if(n){const u=z_(n,i,r)??void 0;return u||Se.getLogger(this).error("Failed to create renderer",{rendererDefinition:i.drawingInfo.renderer,layer:this,context:r}),u}return RD(i,r)}set source(t){const i=this._get("source");i!==t&&(oJ(i)&&this._resetMemorySource(i),oJ(t)&&this._initMemorySource(t),this._set("source",t))}castSource(t){return t?Array.isArray(t)||t instanceof Oe?new Rh({layer:this,items:t}):t:null}readSource(t,i){const r=pD.fromJSON(i.featureSet);return new Rh({layer:this,items:(r==null?void 0:r.features)??[]})}readTemplates(t,i){const r=i.editFieldsInfo,n=r==null?void 0:r.creatorField,o=r==null?void 0:r.editorField;return t=t==null?void 0:t.map(u=>zD.fromJSON(u)),this._fixTemplates(t,n),this._fixTemplates(t,o),t}readTitle(t,i){var o,u,f;const r=((o=i.layerDefinition)==null?void 0:o.name)??i.name,n=i.title||((u=i.layerDefinition)==null?void 0:u.title);if(r){const g=(f=this.portalItem)==null?void 0:f.title;if(this.sublayerTitleMode==="item-title")return this.url?U$e(this.url,r):r;let b=r;if(!b&&this.url){const E=gf(this.url);E!=null&&(b=E.title)}return b?(this.sublayerTitleMode==="item-title-and-service-name"&&g&&g!==b&&(b=g+" - "+b),jF(b)):void 0}if(this.sublayerTitleMode==="item-title"&&n)return n}readTitleFromWebMap(t,i){var r;return i.title||((r=i.layerDefinition)==null?void 0:r.name)}readTypeIdField(t,i){let r=(i=i.layerDefinition||i).typeIdField;if(r&&i.fields){r=r.toLowerCase();const n=i.fields.find(o=>o.name.toLowerCase()===r);n&&(r=n.name)}return r}readTypes(t,i){t=(i=i.layerDefinition||i).types;const r=i.editFieldsInfo,n=r==null?void 0:r.creatorField,o=r==null?void 0:r.editorField;return t==null?void 0:t.map(u=>(u=ide.fromJSON(u),this._fixTemplates(u.templates,n),this._fixTemplates(u.templates,o),u))}readVisible(t,i){var r;return((r=i.layerDefinition)==null?void 0:r.defaultVisibility)!=null?!!i.layerDefinition.defaultVisibility:i.visibility!=null?!!i.visibility:void 0}async addAttachment(t,i){const r=await Bje(this,t,i,qn);return this.lastEditsEventDate=new Date,r}async updateAttachment(t,i,r){const n=await qje(this,t,i,r,qn);return this.lastEditsEventDate=new Date,n}async applyEdits(t,i){return Hje(this,t,i)}async uploadAssets(t,i){return Wje(this,t,i)}on(t,i){return super.on(t,i)}createPopupTemplate(t){return PVe(this,t)}async createGraphicsSource(t){if(this._hasMemorySource()&&this.source)return this.source.load({signal:t});const{default:i}=await N6(ce(()=>import("./FeatureLayerSource-BD67Kgx7.js"),__vite__mapDeps([224,38,42,225,217,226,77,227,216,22,19,23,228,229,10]),import.meta.url),t);return new i({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:t})}createQuery(){const t=rze(this);t.dynamicDataSource=this.dynamicDataSource;const i=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=bF(this.definitionExpression,i);return t.where=r||"1=1",t}async deleteAttachments(t,i){const r=await Zje(this,t,i,qn);return this.lastEditsEventDate=new Date,r}async fetchRecomputedExtents(t){return Jje(this,t,qn)}getFeatureType(t){return pze(this.types,this.typeIdField,t)}getFieldDomain(t,i){var g,b;const r=i==null?void 0:i.feature,n=!!((g=this.subtypes)!=null&&g.length);if(n&&!(i!=null&&i.excludeImpliedDomains)){const E=oze(this,t);if(E)return E}const o=n&&sze(this,r);if(o){const E=(b=o==null?void 0:o.domains)==null?void 0:b[t];return(E==null?void 0:E.type)==="inherited"?this._getLayerDomain(t):E}const u=this.getFeatureType(r),f=this._getLayerDomain(t);if(u){const E=u.domains&&u.domains[t];if(E&&(E==null?void 0:E.type)!=="inherited")return E}if(f)return f;if(!(i!=null&&i.excludeImpliedDomains)){const E=aze(this,t);if(E)return E}return null}getField(t){return this.fieldsIndex.get(t)}async queryAttachments(t,i){return Kje(this,t,i,qn)}async queryFeatures(t,i){const r=await this.load(),n=await r.source.queryFeatures(ss.from(t)??r.createQuery(),i);if(n!=null&&n.features)for(const o of n.features)o.layer=o.sourceLayer=r;return n}async queryObjectIds(t,i){return Yje(this,t,i,qn)}async queryFeatureCount(t,i){return Xje(this,t,i,qn)}async queryExtent(t,i){return Qje(this,t,i,qn)}async queryRelatedFeatures(t,i){return eze(this,t,i,qn)}async queryRelatedFeaturesCount(t,i){return tze(this,t,i,qn)}async queryTopFeatures(t,i){var f;const{source:r,capabilities:n}=await this.load();if(!r.queryTopFeatures||!((f=n==null?void 0:n.query)!=null&&f.supportsTopFeaturesQuery))throw new ne(qn,"Layer source does not support queryTopFeatures capability");const o=await ce(()=>import("./TopFeaturesQuery-BiFAsl-o.js"),[],import.meta.url),u=await r.queryTopFeatures(o.default.from(t),i);if(u!=null&&u.features)for(const g of u.features)g.layer=g.sourceLayer=this;return u}async queryBins(t,i){var f;const{source:r,capabilities:n}=await this.load();if(!r.queryBins||!((f=n==null?void 0:n.operations)!=null&&f.supportsQueryBins))throw new ne(qn,"Layer source does not support queryBins capability");yze(t,n,qn);const o=await ce(()=>import("./BinsQuery-Cv_d_iYZ.js"),__vite__mapDeps([230,14,6]),import.meta.url),u=await r.queryBins(o.default.from(t),i);if(u.features)for(const g of u.features)g.layer=g.sourceLayer=this;return u}async queryTopObjectIds(t,i){const{source:r,capabilities:n}=await this.load();if(!r.queryTopObjectIds||!(n!=null&&n.query.supportsTopFeaturesQuery))throw new ne(qn,"Layer source does not support queryTopObjectIds capability");const o=await ce(()=>import("./TopFeaturesQuery-BiFAsl-o.js"),[],import.meta.url);return r.queryTopObjectIds(o.default.from(t),i)}async queryTopFeaturesExtent(t,i){var u;const{source:r,capabilities:n}=await this.load();if(!r.queryTopExtents||!((u=n==null?void 0:n.query)!=null&&u.supportsTopFeaturesQuery))throw new ne(qn,"Layer source does not support queryTopExtents capability");const o=await ce(()=>import("./TopFeaturesQuery-BiFAsl-o.js"),[],import.meta.url);return r.queryTopExtents(o.default.from(t),i)}async queryTopFeatureCount(t,i){var u;const{source:r,capabilities:n}=await this.load();if(!r.queryTopCount||!((u=n==null?void 0:n.query)!=null&&u.supportsTopFeaturesQuery))throw new ne(qn,"Layer source does not support queryFeatureCount capability");const o=await ce(()=>import("./TopFeaturesQuery-BiFAsl-o.js"),[],import.meta.url);return r.queryTopCount(o.default.from(t),i)}read(t,i){const r=t.featureCollection;if((r||t.type==="Feature Collection")&&(this.resourceInfo=t),r){const n=r.layers;n&&n.length===1&&(super.read(n[0],i),r.showLegend!=null&&super.read({showLegend:r.showLegend},i))}super.read(t,i),i&&i.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(t,i){i={...i,origin:(i==null?void 0:i.origin)??void 0,writeLayerSchema:(i==null?void 0:i.writeLayerSchema)??this._hasMemorySource()};const{origin:r,layerContainerType:n,messages:o}=i;if(this.dynamicDataSource)return o==null||o.push(gx(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((r==="web-map"||r==="web-scene")&&n!=="tables")return o==null||o.push(gx(this,`a table source can only be written to tables, not ${n}`)),null;if(this._hasMemorySource())return o==null||o.push(gx(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(r==="web-map"||r==="web-scene")&&n==="tables")return o==null||o.push(gx(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(t,i)}clone(){if(this._hasMemorySource())throw new ne(qn,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(t){var i;return!!this.loaded&&(((i=this.source)==null?void 0:i.type)==="memory"||OVe(this,t))}async save(t){return this._debouncedSaveOperations(_c.SAVE,t)}async saveAs(t,i){return this._debouncedSaveOperations(_c.SAVE_AS,i,t)}_readEditingEnabled(t,i,r){var o;let n=(o=t.layerDefinition)==null?void 0:o.capabilities;return n?this._hasEditingCapability(n):(n=t.capabilities,i&&(r==null?void 0:r.origin)==="web-map"&&!this._hasMemorySource()&&n?this._hasEditingCapability(n):void 0)}_hasEditingCapability(t){return t.toLowerCase().split(",").map(i=>i.trim()).includes("editing")}_writeEditingEnabled(t,i,r,n){var o,u;if(!t){const f=(u=(o=this.capabilities)==null?void 0:o.operations)!=null&&u.supportsSync?"Query,Sync":"Query";vn("layerDefinition.capabilities",f,i),r&&!(n!=null&&n.writeLayerSchema)&&(i.capabilities=f)}}_getLayerDomain(t){const i=this.fieldsIndex.get(t);return i?i.domain:null}_fetchFirstValidLayerId(t){return Ct(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(i=>{const r=i.data;if(r)return this.findFirstValidLayerId(r)})}async initLayerProperties(t){var i;return this._set("source",t),t.sourceJSON&&(this.sourceJSON=t.sourceJSON,this.read(t.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(i=this.portalItem)==null?void 0:i.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),dB(this.renderer,this.fieldsIndex),qse(this.timeInfo,this.fieldsIndex),RVe(this,{origin:"service"})}async hasDataChanged(){return ize(this)}async fetchPublishingStatus(){const t=this.source;return t!=null&&t.fetchPublishingStatus?t.fetchPublishingStatus():"unavailable"}_verifyFields(){var i,r;const t=((i=this.parsedUrl)==null?void 0:i.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+t+")"),this.isTable||this._hasMemorySource()||t.search(/\/FeatureServer\//i)!==-1||(r=this.fields)!=null&&r.some(n=>n.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+t+")")}_fixTemplates(t,i){t&&t.forEach(r=>{var o;const n=(o=r.prototype)==null?void 0:o.attributes;n&&i&&delete n[i]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new ne("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new ne("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(t){t.forEach(i=>{i.layer=this,i.sourceLayer=this}),this.addHandles([t.on("after-add",i=>{i.item.layer=this,i.item.sourceLayer=this}),t.on("after-remove",i=>{i.item.layer=null,i.item.sourceLayer=null})],"fl-source")}_resetMemorySource(t){t.forEach(i=>{i.layer=null,i.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(t){return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}};m([w(zje)],Ye.prototype,"attributeTableTemplate",void 0),m([ke("service","capabilities")],Ye.prototype,"readCapabilities",null),m([w({json:{origins:{"web-scene":{write:!1}},write:!0}})],Ye.prototype,"charts",void 0),m([w({readOnly:!0})],Ye.prototype,"createQueryVersion",null),m([w({json:{read:{source:"layerDefinition.copyrightText"}}})],Ye.prototype,"copyright",void 0),m([w({json:{read:{source:"layerDefinition.displayField"}}})],Ye.prototype,"displayField",void 0),m([w({types:il,readOnly:!0})],Ye.prototype,"defaultSymbol",void 0),m([w({type:ru})],Ye.prototype,"dynamicDataSource",void 0),m([w({type:Boolean})],Ye.prototype,"editingEnabled",null),m([ke(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Ye.prototype,"readEditingEnabled",null),m([ke("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Ye.prototype,"readEditingEnabledFromWebMap",null),m([Pe(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Ye.prototype,"writeEditingEnabled",null),m([Pe("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Ye.prototype,"writeEditingEnabledToWebMap",null),m([w({readOnly:!0})],Ye.prototype,"effectiveEditingEnabled",null),m([w({...F7.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:D7}}}}})],Ye.prototype,"fields",void 0),m([w(F7.fieldsIndex)],Ye.prototype,"fieldsIndex",void 0),m([w({type:dje,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Ye.prototype,"formTemplate",void 0),m([w({json:{read:{source:"layerDefinition.extent"}}})],Ye.prototype,"fullExtent",void 0),m([w({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:D7,writer(e,t,i){const r=e?KO.toJSON(e):null;r&&vn(i,r,t)}}}},read:{source:"layerDefinition.geometryType",reader:KO.read}}})],Ye.prototype,"geometryType",void 0),m([w({json:{read:{source:"layerDefinition.hasM"}}})],Ye.prototype,"hasM",void 0),m([w({json:{read:{source:"layerDefinition.hasZ"}}})],Ye.prototype,"hasZ",void 0),m([w(Fje)],Ye.prototype,"id",void 0),m([w({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Ye.prototype,"infoFor3D",void 0),m([w({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Ye.prototype,"isTable",void 0),m([ke("service","isTable",["type","geometryType"]),ke("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Ye.prototype,"readIsTable",null),m([Pe("web-map","isTable")],Ye.prototype,"writeIsTable",null),m([w(LD)],Ye.prototype,"labelsVisible",void 0),m([w({type:[XT],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:N7,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:N7,write:{enabled:!0,layerContainerTypes:jn}}},name:"layerDefinition.drawingInfo.labelingInfo",read:N7,write:!0}})],Ye.prototype,"labelingInfo",void 0),m([w((()=>{const e=he(Nje);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,i,r){vn(r,uT(t),i)}}},e})())],Ye.prototype,"opacity",void 0),m([w(Rje)],Ye.prototype,"legendEnabled",void 0),m([w({type:["show","hide"],json:(()=>{const e=he(Rhe.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],Ye.prototype,"listMode",void 0),m([ke("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Ye.prototype,"readGlobalIdField",null),m([w({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:D7}}}}})],Ye.prototype,"objectIdField",void 0),m([ke("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Ye.prototype,"readObjectIdField",null),m([w({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Ye.prototype,"operationalLayerType",void 0),m([w(F7.outFields)],Ye.prototype,"outFields",void 0),m([w({readOnly:!0})],Ye.prototype,"parsedUrl",null),m([w({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Ye.prototype,"path",void 0),m([w(kD)],Ye.prototype,"popupEnabled",void 0),m([w({type:Af,json:{name:"popupInfo",write:!0}})],Ye.prototype,"popupTemplate",void 0),m([w({readOnly:!0})],Ye.prototype,"defaultPopupTemplate",null),m([w({types:JT,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:PDe,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:jn,overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],Ye.prototype,"renderer",null),m([ke("service","renderer",["drawingInfo.renderer","defaultSymbol"]),ke("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Ye.prototype,"readRenderer",null),m([w()],Ye.prototype,"resourceInfo",void 0),m([w((()=>{const e=he(Lje);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],Ye.prototype,"screenSizePerspectiveEnabled",void 0),m([w({clonable:!1})],Ye.prototype,"source",null),m([St("source")],Ye.prototype,"castSource",null),m([ke("portal-item","source",["featureSet"]),ke("web-map","source",["featureSet"])],Ye.prototype,"readSource",null),m([w({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Ye.prototype,"spatialReference",void 0),m([w({type:Number})],Ye.prototype,"subtypeCode",void 0),m([w({type:[zD]})],Ye.prototype,"templates",void 0),m([ke("templates",["editFieldsInfo","creatorField","editorField","templates"])],Ye.prototype,"readTemplates",null),m([w({type:tde})],Ye.prototype,"timeInfo",void 0),m([w()],Ye.prototype,"title",void 0),m([ke("service","title",["name"]),ke("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Ye.prototype,"readTitle",null),m([ke("web-map","title",["layerDefinition.name","title"])],Ye.prototype,"readTitleFromWebMap",null),m([w({type:String})],Ye.prototype,"sublayerTitleMode",void 0),m([w({json:{read:!1}})],Ye.prototype,"type",void 0),m([w({type:String})],Ye.prototype,"typeIdField",void 0),m([ke("service","typeIdField"),ke("typeIdField",["layerDefinition.typeIdField"])],Ye.prototype,"readTypeIdField",null),m([w({type:[ide]})],Ye.prototype,"types",void 0),m([ke("service","types",["types"]),ke("types",["layerDefinition.types"])],Ye.prototype,"readTypes",null),m([w({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Ye.prototype,"visible",void 0),m([ke("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Ye.prototype,"readVisible",null),Ye=m([H("esri.layers.FeatureLayer")],Ye);const G2=Ye,Cht=Object.freeze(Object.defineProperty({__proto__:null,default:G2},Symbol.toStringTag,{value:"Module"})),qVe="esri.widgets.Feature.support.arcadeFeatureUtils",aJ=()=>Se.getLogger(qVe);function HVe(e){return typeof e=="string"?AS(sD(e)):Array.isArray(e)?WVe(e):(e==null?void 0:e.declaredClass)==="esri.arcade.Dictionary"?ZVe(e):e}function WVe(e){return`<ul class="esri-widget__list">${e.map(t=>`<li>${typeof t=="string"?AS(sD(t)):t}</li>`).join("")}</ul>`}function ZVe(e){const t=e.keys().map(i=>{const r=e.field(i);return`<tr><th>${i}</th><td>${typeof r=="string"?AS(sD(r)):r}</td></tr>`}).join("");return`<table class="${Ge.table}">${t}</table>`}function rde(){return ce(()=>import("./arcade-DeowIB1O.js"),__vite__mapDeps([231,135]),import.meta.url)}function JVe(e){return"createQuery"in e&&"queryFeatures"in e}async function KVe({graphic:e,view:t,options:i}){const{isAggregate:r,layer:n}=e;if(!r||!n||(t==null?void 0:t.type)!=="2d")return[];const o=await t.whenLayerView(n);if(!JVe(o))return[];const u=o.createQuery(),f=e.getObjectId();u.aggregateIds=f!=null?[f]:[];const{features:g}=await o.queryFeatures(u,i);return g}function YVe({layer:e,aggregatedFeatures:t,interceptor:i}){const{fields:r,objectIdField:n,geometryType:o,spatialReference:u,displayField:f}=e;return new G2({fields:r,objectIdField:n,geometryType:o,spatialReference:u,displayField:f,interceptor:i,...e.type==="feature"?{templates:e.templates,typeIdField:e.typeIdField,types:e.types}:null,source:t})}async function nde({expressionInfo:e,arcade:t,interceptor:i,spatialReference:r,map:n,graphic:o,location:u,view:f,options:g}){var V;if(!(e!=null&&e.expression))return null;const{isAggregate:b}=o,E=(o.sourceLayer||o.layer)??void 0,I=b?"feature-reduction-popup":"popup",M=t.createArcadeProfile(I),k=t.createArcadeExecutor(e.expression,M).catch(W=>aJ().error("arcade-executor-error",{error:W,expressionInfo:e})),[L,P]=await Promise.all([KVe({graphic:o,view:f,options:g}),k]);if(!P)return null;const D=I==="feature-reduction-popup"?YVe({layer:E,aggregatedFeatures:L,interceptor:i}):void 0,j={...I==="feature-reduction-popup"?{$aggregatedFeatures:D}:{$datastore:E==null?void 0:E.url,$layer:E!=null&&tNe(E)?E:(E==null?void 0:E.type)==="scene"&&E.associatedLayer!=null?E.associatedLayer:void 0,$map:n,$userInput:u,$graph:(E==null?void 0:E.type)==="knowledge-graph-sublayer"?(V=E==null?void 0:E.parentCompositeLayer)==null?void 0:V.knowledgeGraph:void 0},$feature:o},z={abortSignal:(g==null?void 0:g.signal)??void 0,interceptor:i??void 0,rawOutput:!0,spatialReference:r??void 0,timeZone:f==null?void 0:f.timeZone};return await P.executeAsync(j,z).catch(W=>aJ().error("arcade-execution-error",{error:W,graphic:o,expressionInfo:e})).finally(()=>D==null?void 0:D.destroy())}async function XVe({expressionInfos:e,spatialReference:t,graphic:i,interceptor:r,map:n,view:o,location:u,options:f}){if(!(e!=null&&e.length))return{};const g=await rde(),b={};for(const M of e)b[`expression/${M.name}`]=nde({expressionInfo:M,arcade:g,interceptor:r,spatialReference:t,map:n,graphic:i,location:u,view:o,options:f});const E=await Lo(b),I={};for(const M in E)I[M]=HVe(E[M].value);return I}const QVe=1;let _o=class extends De{constructor(t){super(t),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.location=null,this.view=null,this._cancelQuery=()=>{const{_abortController:i}=this;i&&i.abort(),this._abortController=null},this._createVM=()=>{var n,o;const i=(n=this.contentElement)==null?void 0:n.type;(o=this.contentElementViewModel)==null||o.destroy();const r=i==="fields"?new DT:i==="media"?new vy:i==="text"?new FI:null;this._set("contentElementViewModel",r)},this._compile=async()=>{this._cancelQuery();const i=new AbortController;this._abortController=i,await this._compileExpression(),this._abortController===i&&(this._abortController=null)},this._compileThrottled=eD(this._compile,QVe,this),this._compileExpression=async()=>{const{expressionInfo:i,graphic:r,interceptor:n,spatialReference:o,map:u,location:f,view:g,_abortController:b}=this;if(!i||!r)return void this._set("contentElement",null);const E=await rde();if(b!==this._abortController)return;const I=await nde({arcade:E,expressionInfo:i,graphic:r,location:f,interceptor:n,map:u,spatialReference:o,view:g});if(!I||I.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const M=await I.castAsJsonAsync(b==null?void 0:b.signal),k=M==null?void 0:M.type,L=k==="media"?qv.fromJSON(M):k==="text"?rm.fromJSON(M):k==="fields"?im.fromJSON(M):null;L.type==="media"&&!L.mediaInfos||L.type==="fields"&&!L.fieldInfos||L.type==="text"&&!L.text?this._set("contentElement",null):this._set("contentElement",L)},this.addHandles([me(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),Je),me(()=>[this.contentElement],()=>this._createVM(),Je)])}initialize(){this.addHandles(this._compileThrottled)}destroy(){var t;this._cancelQuery(),(t=this.contentElementViewModel)==null||t.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var t;return((t=this.view)==null?void 0:t.spatialReference)??null}set spatialReference(t){this._override("spatialReference",t)}get state(){const{_abortController:t,contentElement:i,contentElementViewModel:r}=this;return t?"loading":i||r?"ready":"disabled"}get map(){var t;return((t=this.view)==null?void 0:t.map)??null}set map(t){this._override("map",t)}};m([w()],_o.prototype,"_abortController",void 0),m([w({type:roe})],_o.prototype,"expressionInfo",void 0),m([w({type:qi})],_o.prototype,"graphic",void 0),m([w({readOnly:!0})],_o.prototype,"contentElement",void 0),m([w({readOnly:!0})],_o.prototype,"contentElementViewModel",void 0),m([w()],_o.prototype,"interceptor",void 0),m([w({type:lt})],_o.prototype,"location",void 0),m([w()],_o.prototype,"spatialReference",null),m([w({readOnly:!0})],_o.prototype,"state",null),m([w()],_o.prototype,"map",null),m([w()],_o.prototype,"view",void 0),_o=m([H("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],_o);const VD=_o,lJ="esri-feature",uJ={base:`${lJ}-expression`,loadingSpinnerContainer:`${lJ}__loading-container`};let P4=class extends bi{constructor(t,i){super(t,i),this._contentWidget=null,this.viewModel=new VD}initialize(){this.addHandles(me(()=>{var t;return(t=this.viewModel)==null?void 0:t.contentElementViewModel},()=>this._setupExpressionWidget(),Je))}loadDependencies(){return cs({loader:()=>ce(()=>import("./calcite-loader-BYXdEs7m.js"),__vite__mapDeps([232,205]),import.meta.url)})}destroy(){this._destroyContentWidget()}render(){var i;const{state:t}=this.viewModel;return G("div",{class:uJ.base},t==="loading"?this._renderLoading():t==="disabled"?null:(i=this._contentWidget)==null?void 0:i.render())}_renderLoading(){return G("div",{class:uJ.loadingSpinnerContainer,key:"loading-container"},G("calcite-loader",{inline:!0,label:""}))}_destroyContentWidget(){const{_contentWidget:t}=this;t&&(t.viewModel=null,t.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:t,contentElement:i}=this.viewModel,r=i==null?void 0:i.type;this._destroyContentWidget();const n=t?r==="fields"?new Nue({viewModel:t}):r==="media"?new uce({viewModel:t}):r==="text"?new d4({viewModel:t}):null:null;this._contentWidget=n,this.scheduleRender()}};m([w({type:VD})],P4.prototype,"viewModel",void 0),P4=m([H("esri.widgets.Feature.FeatureExpression")],P4);const eUe=P4;var cJ;(function(e){e.TOO_SHORT="length-validation-error::too-short",e.TOO_LONG="length-validation-error::too-long"})(cJ||(cJ={}));const tUe=e=>{var i;const t=[];if(e.formTemplate){const{description:r,title:n}=e.formTemplate;(i=e.fields)==null||i.forEach(o=>{const u=n&&RV(n,o.name),f=r&&RV(r,o.name);(u||f)&&t.push(o.name)})}return t},j7=100;let di=class extends It(Eu(De)){constructor(t){super(t),this._loaded=!1,this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featuresPerPage=10,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.orderByFields=null,this.featureCount=0,this.relationshipId=null,this.showAllEnabled=!1,this.title=null,this._cancelQuery=()=>{const{_queryAbortController:i}=this;i&&i.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:i}=this;i&&i.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{const{_queryPageAbortController:i}=this;i&&i.abort(),this._queryPageAbortController=null},this._queryController=async()=>{this._cancelQuery();const i=new AbortController;this._queryAbortController=i,await Do(this._query()),this._queryAbortController===i&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._loaded=!1,this._cancelQueryFeatureCount();const i=new AbortController;this._queryFeatureCountAbortController=i,await Do(this._queryFeatureCount()),this._queryFeatureCountAbortController===i&&(this._queryFeatureCountAbortController=null),this._loaded=!0},this._queryPageController=async()=>{const i=new AbortController;this._queryPageAbortController=i,await Do(this._queryPage()),this._queryPageAbortController===i&&(this._queryPageAbortController=null)},this._queryDebounced=yu(this._queryController,j7),this._queryFeatureCountDebounced=yu(this._queryFeatureCountController,j7),this._queryPageDebounced=yu(this._queryPageController,j7),this._query=async()=>{const{_queryAbortController:i,relatedFeatures:r}=this;this.featureCount&&(this._destroyRelatedFeatureViewModels(),this.featurePage=1,r.destroyAll(),this.destroyed||r.addMany(this._sliceFeatures(await this._queryRelatedFeatures({signal:i==null?void 0:i.signal}))))},this.addHandles([me(()=>{var i;return[this.displayCount,this.graphic,this.layer,(i=this.layer)==null?void 0:i.loaded,this.map,this.orderByFields,this.relationshipId,this.featuresPerPage,this.showAllEnabled,this.canQuery,this.featureCount]},()=>this._queryDebounced(),Je),me(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageDebounced()),me(()=>[this.layer,this.relationshipId,this.objectId,this.canQuery],()=>this._queryFeatureCountDebounced())])}destroy(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.destroyAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}set featurePage(t){const{featuresPerPage:i,featureCount:r}=this,n=1,o=Math.ceil(r/i)||1;this._set("featurePage",Math.min(Math.max(t,n),o))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){const{orderByFields:t,relatedLayer:i}=this;return t&&(i!=null&&i.loaded)?t.map(r=>{const n=r.clone();return n.field=A_(r.field,i),n}):t??[]}get supportsCacheHint(){var t,i,r;return!!((r=(i=(t=this.layer)==null?void 0:t.capabilities)==null?void 0:i.queryRelated)!=null&&r.supportsCacheHint)}get canLoad(){return!!this.map&&this.relationshipId!=null&&typeof this.objectId=="number"}get canQuery(){var i,r;const t=(r=(i=this.layer)==null?void 0:i.capabilities)==null?void 0:r.queryRelated;return!!(this.relatedLayer&&this.relationship&&this.relationshipId!=null&&this.objectId!=null&&(t!=null&&t.supportsCount)&&(t!=null&&t.supportsPagination))}get itemDescriptionFieldName(){var t;return((t=this.orderByFieldsFixedCasing[0])==null?void 0:t.field)||null}set displayCount(t){this._set("displayCount",Math.min(Math.max(t,0),10))}get displayCount(){return this._get("displayCount")}get objectId(){var t,i;return(this.objectIdField&&((i=(t=this.graphic)==null?void 0:t.attributes)==null?void 0:i[this.objectIdField]))??null}get objectIdField(){var t;return((t=this.layer)==null?void 0:t.objectIdField)||null}get relatedFeatures(){return this._get("relatedFeatures")||new Oe}get relatedLayer(){const{layer:t,map:i,relationship:r}=this;return t!=null&&t.loaded&&i&&r?gOe(i,t,r)??null:null}get relationship(){var r;const{relationshipId:t,layer:i}=this;return t!=null?((r=i==null?void 0:i.relationships)==null?void 0:r.find(({id:n})=>n===t))??null:null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||new Oe}get state(){const{_queryAbortController:t,_queryFeatureCountAbortController:i,_queryPageAbortController:r,canQuery:n,_loaded:o,canLoad:u}=this;return i||u&&!o?"loading":t||r?"querying":n?"ready":"disabled"}getRelatedFeatureByObjectId(t){return this.relatedFeatures.find(i=>i.getObjectId()===t)}refresh(){this._queryFeatureCountDebounced()}_destroyRelatedFeatureViewModels(){var t;(t=this.relatedFeatureViewModels)==null||t.destroyAll()}async _queryFeatureCount(){const{layer:t,relatedLayer:i,relationshipId:r,objectId:n,_queryFeatureCountAbortController:o,canQuery:u,supportsCacheHint:f}=this;if(await(t==null?void 0:t.load()),await(i==null?void 0:i.load()),!u||!t||!i||n==null)return void this._set("featureCount",0);const g=i.createQuery(),{historicMoment:b,gdbVersion:E}=t,I=new Yv({cacheHint:f,gdbVersion:E,historicMoment:b,relationshipId:r,returnGeometry:!1,objectIds:[n],where:g.where??void 0}),M=await t.queryRelatedFeaturesCount(I,{signal:o==null?void 0:o.signal});this._set("featureCount",M[n]||0)}_sliceFeatures(t){const{showAllEnabled:i,displayCount:r}=this;return i?t:r?t.slice(0,r):[]}async _queryPage(){const{relatedFeatures:t,featurePage:i,showAllEnabled:r,_queryPageAbortController:n,featureCount:o}=this;!r||i<2||!o||t.addMany(await this._queryRelatedFeatures({signal:n==null?void 0:n.signal}))}async _queryRelatedFeatures(t){var oe;const{orderByFieldsFixedCasing:i,showAllEnabled:r,featuresPerPage:n,displayCount:o,layer:u,relationshipId:f,featurePage:g,featureCount:b,relatedLayer:E,supportsCacheHint:I}=this,{canQuery:M,objectId:k}=this;if(!M||!u||!E||k==null)return[];const L=r?((g-1)*n+b)%b:0,P=r?n:o,D=E.objectIdField,j=[...i.map(le=>le.field),...tUe(E),D].filter(cr),z=i.map(le=>`${le.field} ${le.order}`),V=E.createQuery(),{historicMoment:W,gdbVersion:Q}=u,Z=new Yv({orderByFields:z,start:L,num:P,outFields:j,cacheHint:I,historicMoment:W,gdbVersion:Q,relationshipId:f,returnGeometry:!1,objectIds:[k],where:V.where??void 0}),ee=await u.queryRelatedFeatures(Z,{signal:t==null?void 0:t.signal}),ie=((oe=ee[k])==null?void 0:oe.features)||[];return ie.forEach(le=>{le.sourceLayer=E,le.layer=E}),ie}};m([w()],di.prototype,"_loaded",void 0),m([w()],di.prototype,"_queryAbortController",void 0),m([w()],di.prototype,"_queryPageAbortController",void 0),m([w()],di.prototype,"_queryFeatureCountAbortController",void 0),m([w({value:1})],di.prototype,"featurePage",null),m([w()],di.prototype,"featuresPerPage",void 0),m([w({readOnly:!0})],di.prototype,"orderByFieldsFixedCasing",null),m([w({readOnly:!0})],di.prototype,"supportsCacheHint",null),m([w({readOnly:!0})],di.prototype,"canLoad",null),m([w({readOnly:!0})],di.prototype,"canQuery",null),m([w()],di.prototype,"description",void 0),m([w({readOnly:!0})],di.prototype,"itemDescriptionFieldName",null),m([w({value:3})],di.prototype,"displayCount",null),m([w({type:qi})],di.prototype,"graphic",void 0),m([w()],di.prototype,"layer",void 0),m([w()],di.prototype,"map",void 0),m([w({readOnly:!0})],di.prototype,"objectId",null),m([w({readOnly:!0})],di.prototype,"objectIdField",null),m([w()],di.prototype,"orderByFields",void 0),m([w({readOnly:!0})],di.prototype,"relatedFeatures",null),m([w({readOnly:!0})],di.prototype,"relatedLayer",null),m([w({readOnly:!0})],di.prototype,"relationship",null),m([w()],di.prototype,"featureCount",void 0),m([w({readOnly:!0})],di.prototype,"relatedFeatureViewModels",null),m([w()],di.prototype,"relationshipId",void 0),m([w()],di.prototype,"showAllEnabled",void 0),m([w()],di.prototype,"state",null),m([w()],di.prototype,"title",void 0),di=m([H("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],di);const UD=di;var oR;const N4="esri-feature",Mw=`${N4}-relationship`,Ld={base:Mw,listContainer:`${Mw}__list`,listItem:`${Mw}__list-item`,listItemHidden:`${Mw}__list-item--hidden`,listContainerQuerying:`${Mw}__list--querying`,featureObserver:`${N4}__feature-observer`,stickySpinnerContainer:`${N4}__sticky-loading-container`,loadingSpinnerContainer:`${N4}__loading-container`},hJ={title:!0,description:!0};let Mn=oR=class extends bi{constructor(e,t){super(e,t),this._featureElementInfo=null,this._relatedFeatureIntersectionObserverNode=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver(([i])=>{i!=null&&i.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this.flowItems=null,this.flowType="feature-relationship",this.headingLevel=2,this.viewModel=new UD,this.messages=null,this.messagesCommon=null,this.visibleElements={...hJ},this._increaseFeaturePage=()=>{const{state:i,showAllEnabled:r,relatedFeatures:n,featuresPerPage:o,featurePage:u}=this.viewModel;i==="ready"&&r&&n.length>=o*u&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new kS,this.addHandles([me(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),Je),me(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),Lr(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])}loadDependencies(){return cs({icon:()=>ce(()=>import("./calcite-icon-_vDov-sg.js"),[],import.meta.url),list:()=>ce(()=>import("./calcite-list-BrvAaUx7.js"),__vite__mapDeps([233,234,235,205,236]),import.meta.url),"list-item":()=>ce(()=>import("./calcite-list-item-DzQsSgvs.js"),__vite__mapDeps([237,235,234,238,205]),import.meta.url),loader:()=>ce(()=>import("./calcite-loader-BYXdEs7m.js"),__vite__mapDeps([232,205]),import.meta.url),notice:()=>ce(()=>import("./calcite-notice-kwETwl5K.js"),__vite__mapDeps([239,240]),import.meta.url)})}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=Jt(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:e,featureCount:t,displayCount:i,state:r}=this.viewModel;return!e&&!!t&&r==="ready"&&(t>i||i===0)}get displayListItems(){return this.displayShowAllButton||this.viewModel.relatedFeatureViewModels.length>0}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get featureCountDescription(){const{messages:e}=this,{featureCount:t}=this.viewModel;return Rn(e==null?void 0:e.numberRecords,{number:t})}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}castVisibleElements(e){return{...hJ,...e}}render(){var t;const{state:e}=this.viewModel;return G("div",{class:this.classes(Ld.base,Ge.widget)},(t=this._featureElementInfo)==null?void 0:t.render(),e==="loading"?this._renderLoading():e==="disabled"?this._renderRelationshipNotFound():this._renderRelatedFeatures())}async _selectRecord(e){const{flowItems:t,featureVisibleElements:i}=this;if(!t)return;e.abilities={relationshipContent:!0};const{default:r}=await ce(()=>Promise.resolve().then(()=>ade),void 0,import.meta.url);t.push(new r({flowItems:t,flowType:this.flowType,viewModel:e,visibleElements:i}))}_showAllRecords(){const{flowItems:e}=this;if(!e)return;const{viewModel:t,featureVisibleElements:i}=this;t.showAllEnabled=!0;const r=new oR({flowItems:e,featureVisibleElements:i,visibleElements:{title:!1,description:!1},viewModel:t});e.push(r)}_renderStickyLoading(){return this.viewModel.state==="querying"?G("div",{class:Ld.stickySpinnerContainer,key:"sticky-loader"},this._renderLoadingIcon()):null}_renderLoadingIcon(){return G("calcite-loader",{inline:!0,label:""})}_renderLoading(){return G("div",{class:Ld.loadingSpinnerContainer,key:"loading-container"},this._renderLoadingIcon())}_renderShowAllIconNode(){return G("calcite-icon",{icon:"list",scale:"s",slot:"content-end"})}_renderChevronIconNode(){const e=ha(this.container)?"chevron-left":"chevron-right";return G("calcite-icon",{icon:e,scale:"s",slot:"content-end"})}_renderRelatedFeature(e){var n;const{itemDescriptionFieldName:t}=this.viewModel,i=e.title;e.description=t&&((n=e.formattedAttributes)==null?void 0:n.global[t]);const r=e.state==="loading";return G("calcite-list-item",{class:this.classes(Ld.listItem,{[Ld.listItemHidden]:r}),description:e.description??"",key:e.uid,label:i,onCalciteListItemSelect:()=>this._selectRecord(e)},this._renderChevronIconNode())}_renderShowAllListItem(){var e;return this.displayShowAllButton?G("calcite-list-item",{description:this.featureCountDescription,key:"show-all-item",label:(e=this.messages)==null?void 0:e.showAll,onCalciteListItemSelect:()=>this._showAllRecords()},this._renderShowAllIconNode()):null}_renderNoRelatedFeaturesMessage(){var e;return G("calcite-notice",{icon:"information",key:"no-related-features-message",kind:"brand",open:!0,scale:"s",width:"full"},G("div",{slot:"message"},(e=this.messages)==null?void 0:e.noRelatedFeatures))}_renderFeatureObserver(){return G("div",{afterCreate:this._relatedFeatureIntersectionObserverCreated,bind:this,class:Ld.featureObserver,key:"feature-observer"})}_renderList(){const{relatedFeatureViewModels:e}=this.viewModel;return G("calcite-list",null,e.toArray().map(t=>this._renderRelatedFeature(t)),this._renderShowAllListItem())}_renderRelatedFeatures(){const{displayListItems:e}=this,{state:t}=this.viewModel;return G("div",{class:this.classes(Ld.listContainer,{[Ld.listContainerQuerying]:t==="querying"}),key:"list-container"},e?this._renderList():t==="ready"?this._renderNoRelatedFeaturesMessage():null,this._renderStickyLoading(),this._renderFeatureObserver())}_renderRelationshipNotFound(){var e;return G("calcite-notice",{icon:"exclamation-mark-triangle",key:"relationship-not-found",kind:"danger",open:!0,scale:"s",width:"full"},G("div",{slot:"message"},(e=this.messages)==null?void 0:e.relationshipNotFound))}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:e}=this.viewModel,t="related-feature-viewmodels";this.removeHandles(t),e==null||e.forEach(i=>{this.addHandles(me(()=>[i.title,i.state],()=>this.scheduleRender(),Je),t)}),this.scheduleRender()}_setupFeatureElementInfo(){var n;const{headingLevel:e,visibleElements:t}=this,i=t.description&&this.description,r=t.title&&this.title;(n=this._featureElementInfo)==null||n.set({description:i,title:r,headingLevel:e})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:e,showAllEnabled:t}=this.viewModel;await ym(0),this._relatedFeatureIntersectionObserverNode&&e==="ready"&&t&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(e){this._relatedFeatureIntersectionObserverNode=e}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};m([w()],Mn.prototype,"_relatedFeatureIntersectionObserverNode",void 0),m([w({readOnly:!0})],Mn.prototype,"displayShowAllButton",null),m([w({readOnly:!0})],Mn.prototype,"displayListItems",null),m([w()],Mn.prototype,"description",null),m([w({readOnly:!0})],Mn.prototype,"featureCountDescription",null),m([w()],Mn.prototype,"featureVisibleElements",void 0),m([w()],Mn.prototype,"flowItems",void 0),m([w()],Mn.prototype,"flowType",void 0),m([w()],Mn.prototype,"headingLevel",void 0),m([w()],Mn.prototype,"title",null),m([w({type:UD})],Mn.prototype,"viewModel",void 0),m([w(),Xt("esri/widgets/Feature/t9n/Feature")],Mn.prototype,"messages",void 0),m([w(),Xt("esri/t9n/common")],Mn.prototype,"messagesCommon",void 0),m([w()],Mn.prototype,"visibleElements",void 0),m([St("visibleElements")],Mn.prototype,"castVisibleElements",null),Mn=oR=m([H("esri.widgets.Feature.FeatureRelationship")],Mn);const iUe=Mn;var Uh;(function(e){e[e.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity",e[e.RTAttachment=2]="RTAttachment",e[e.RTContainment=3]="RTContainment",e[e.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity",e[e.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity"})(Uh||(Uh={}));const vx=new gt({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation"}),wx=new gt({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionMidspanConnectivity:"junction-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"}),rUe={connectivity:1,"junction-junction-connectivity":1,attachment:2,containment:3,"junction-edge-from-connectivity":4,"junction-midspan-connectivity":5,"junction-edge-to-connectivity":6},nUe=Array.from({length:33},(e,t)=>2*t),sUe=new Map([[1,"connectivity"],[2,"containment"],[3,"attachment"],[4,"junction-edge-from-connectivity"],[5,"junction-midspan-connectivity"],[6,"junction-edge-to-connectivity"]]),Oht=new gt({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});let Ul=class extends be{constructor(t){super(t),this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};m([w({type:Number,json:{write:!0}})],Ul.prototype,"assetGroupCode",void 0),m([w({type:Number,json:{write:!0}})],Ul.prototype,"assetTypeCode",void 0),m([w({type:String,json:{write:!0}})],Ul.prototype,"globalId",void 0),m([w({type:Number,json:{write:!0}})],Ul.prototype,"networkSourceId",void 0),m([w({type:Number,json:{write:!0}})],Ul.prototype,"objectId",void 0),m([w({type:Number,json:{write:!0}})],Ul.prototype,"positionFrom",void 0),m([w({type:Number,json:{write:!0}})],Ul.prototype,"positionTo",void 0),m([w({type:Number,json:{write:!0}})],Ul.prototype,"terminalId",void 0),Ul=m([H("esri.rest.networks.support.NetworkElement")],Ul);const am=Ul;let Kn=class extends be{constructor(t){super(t),this.globalId=null,this.associationType=null,this.fromNetworkElement=null,this.toNetworkElement=null,this.geometry=null,this.errorMessage=null,this.percentAlong=null,this.errorCode=null,this.isContentVisible=null,this.status=null}readFromNetworkElement(t,i){return new am({globalId:i.fromGlobalId,networkSourceId:i.fromNetworkSourceId,terminalId:i.fromTerminalId})}writeFromNetworkElement(t,i){t&&(i.fromGlobalId=t.globalId,i.fromNetworkSourceId=t.networkSourceId,i.fromTerminalId=t.terminalId)}readToNetworkElement(t,i){return new am({globalId:i.toGlobalId,networkSourceId:i.toNetworkSourceId,terminalId:i.toTerminalId})}writeToNetworkElement(t,i){t&&(i.toGlobalId=t.globalId,i.toNetworkSourceId=t.networkSourceId,i.toTerminalId=t.terminalId)}};m([w({type:String,json:{write:!0}})],Kn.prototype,"globalId",void 0),m([w({type:wx.apiValues,json:{type:wx.jsonValues,read:wx.read,write:wx.write}})],Kn.prototype,"associationType",void 0),m([w({type:am,json:{write:{target:{fromGlobalId:{type:String},fromNetworkSourceId:{type:Number},fromTerminalId:{type:Number}}},read:{source:["fromGlobalId","fromNetworkSourceId","fromTerminalId"]}}})],Kn.prototype,"fromNetworkElement",void 0),m([ke("fromNetworkElement")],Kn.prototype,"readFromNetworkElement",null),m([Pe("fromNetworkElement")],Kn.prototype,"writeFromNetworkElement",null),m([w({type:am,json:{write:{target:{toGlobalId:{type:String},toNetworkSourceId:{type:Number},toTerminalId:{type:Number}}},read:{source:["toGlobalId","toNetworkSourceId","toTerminalId"]}}})],Kn.prototype,"toNetworkElement",void 0),m([ke("toNetworkElement")],Kn.prototype,"readToNetworkElement",null),m([Pe("toNetworkElement")],Kn.prototype,"writeToNetworkElement",null),m([w({type:io,json:{write:!0}})],Kn.prototype,"geometry",void 0),m([w({type:String,json:{write:!0}})],Kn.prototype,"errorMessage",void 0),m([w({type:Number,json:{write:!0}})],Kn.prototype,"percentAlong",void 0),m([w({type:Number,json:{write:!0}})],Kn.prototype,"errorCode",void 0),m([w({type:Boolean,json:{write:!0}})],Kn.prototype,"isContentVisible",void 0),m([w({type:Number,json:{write:!0}})],Kn.prototype,"status",void 0),Kn=m([H("esri.rest.networks.support.Association")],Kn);const oUe=Kn,ji={fromGlobalId:"fromglobalid",fromNetworkSourceId:"fromnetworksourceid",fromTerminalId:"fromterminalid",toGlobalId:"toglobalid",toNetworkSourceId:"tonetworksourceid",toTerminalId:"toterminalid",associationType:"associationtype",globalId:"globalid",status:"status",isContentVisible:"iscontentvisible",percentAlong:"percentalong",assetGroup:"assetgroup",assetType:"assettype"},dJ=100;let Dt=class extends It(Eu(De)){constructor(t){super(t),this._loaded=!1,this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.networkSourceIdsInUse=new Set,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.featureCount=0,this.associationTypes=null,this.showAllEnabled=!1,this.title=null,this.attachmentsFeatureCount=0,this.structureFeatureCount=0,this.contentFeatureCount=0,this.containerFeatureCount=0,this.connectivityFeatureCount=0,this._cancelQuery=()=>{const{_queryAbortController:i}=this;i&&i.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:i}=this;i&&i.abort(),this._queryFeatureCountAbortController=null},this._queryController=async i=>{this._cancelQuery();const r=new AbortController;this._queryAbortController=r,await Do(this._query(i)),this._queryAbortController===r&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._loaded=!1,this._cancelQueryFeatureCount();const i=new AbortController;this._queryFeatureCountAbortController=i,await Do(this._queryFeatureCount()),this._queryFeatureCountAbortController===i&&(this._queryFeatureCountAbortController=null),this._loaded=!0},this._queryDebounced=yu(this._queryController,dJ),this._queryFeatureCountDebounced=yu(this._queryFeatureCountController,dJ)}initialize(){var t,i;(t=this.associationTypes)==null||t.forEach(r=>{r.open=!1}),this.addHandles([...((i=this.associationTypes)==null?void 0:i.map(r=>me(()=>r.open,()=>{r.open&&this._queryDebounced(r)})))??[],me(()=>[this.graphic,this.layer,this.map,this.associationTypes,this.objectId,this.globalId,this.canQuery],()=>this._queryFeatureCountDebounced(),Je)])}destroy(){this._cancelQuery(),this._cancelQueryFeatureCount(),this._destroyAssociatedFeatureViewModels()}get supportsCacheHint(){var t,i,r;return!!((r=(i=(t=this.layer)==null?void 0:t.capabilities)==null?void 0:i.query)!=null&&r.supportsCacheHint)}get canLoad(){return!!this.map&&!!this.associationTypes&&typeof this.globalId=="string"}get canQuery(){var i,r;const t=(r=(i=this.layer)==null?void 0:i.capabilities)==null?void 0:r.query;return!!this.associationTypes&&typeof this.globalId=="string"&&!!(t!=null&&t.supportsPagination)}get objectId(){var t,i;return(this.objectIdField&&((i=(t=this.graphic)==null?void 0:t.attributes)==null?void 0:i[this.objectIdField]))??null}get objectIdField(){var t;return((t=this.layer)==null?void 0:t.objectIdField)||null}get globalId(){var t,i;return(this.globalIdField&&((i=(t=this.graphic)==null?void 0:t.attributes)==null?void 0:i[this.globalIdField]))??null}get globalIdField(){const{layer:t}=this;return(t==null?void 0:t.type)==="subtype-sublayer"&&(t!=null&&t.parent)?t.parent.globalIdField??null:(t==null?void 0:t.globalIdField)??null}get state(){const{_queryAbortController:t,_queryFeatureCountAbortController:i,_queryPageAbortController:r,canQuery:n,_loaded:o,canLoad:u}=this;return i||u&&!o?"loading":t||r?"querying":n&&this.featureCount!==0?"ready":"disabled"}get utilityNetwork(){const{layer:t,map:i}=this;return t!=null&&t.loaded&&i?(t==null?void 0:t.type)==="subtype-sublayer"&&(t!=null&&t.parent)?hH(i,t.parent)??null:hH(i,t)??null:null}get associationsLayer(){const{utilityNetwork:t}=this;return t!=null&&t.loaded?new G2({url:t.networkSystemLayers.associationsTableUrl,gdbVersion:t.gdbVersion}):null}get attachmentsAssociations(){return this._get("attachmentsAssociations")||new Oe}get structureAssociations(){return this._get("structureAssociations")||new Oe}get contentAssociations(){return this._get("contentAssociations")||new Oe}get containerAssociations(){return this._get("containerAssociations")||new Oe}get connectivityAssociations(){return this._get("connectivityAssociations")||new Oe}get associationFeatures(){return this._get("associationFeatures")||new sf}get associationViewModels(){return this._get("associationViewModels")||new Map}refresh(){this._queryFeatureCountDebounced()}_destroyAssociatedFeatureViewModels(){this.associationViewModels.forEach(t=>t.destroyAll())}_generateGlobalIdWhereClause(t,i){const{globalId:r,networkSourceIdsInUse:n}=this,{associatedNetworkSourceId:o}=t,u=i.fieldsIndex.get(ji.fromGlobalId),f=i.fieldsIndex.get(ji.toGlobalId),g=i.fieldsIndex.get(ji.fromNetworkSourceId),b=i.fieldsIndex.get(ji.toNetworkSourceId),E=o!=null,I=`(${Array.from(n.values())})`,M=E?` AND ${b.name} = ${o} AND ${b.name} IN ${I}`:"",k=E?` AND ${g.name} = ${o} AND ${g.name} IN ${I}`:"";switch(t.type){case"connectivity":return`((${u.name} = '${r}'${M}) OR (${f.name} = '${r}'${k}))`;case"attachment":case"content":return`${u.name} = '${r}'${M}`;case"container":case"structure":return`${f.name} = '${r}'${k}`;default:return""}}_generateNetworkSourceIdWhereClause(t){const{networkSourceIdsInUse:i}=this,r=`(${Array.from(i.values())})`,n=t.fieldsIndex.get(ji.fromNetworkSourceId),o=t.fieldsIndex.get(ji.toNetworkSourceId);return`(${n.name} IN ${r} AND ${o.name} IN ${r})`}_generateAssociationTypeWhereClause(t,i){const r=i.fieldsIndex.get(ji.associationType);switch(t.type){case"attachment":case"structure":return`${r.name} = 3`;case"connectivity":return`${r.name} IN  (1, 4, 5, 6)`;case"container":case"content":return`${r.name} = 2`;default:return""}}_generateWhereClause(t,i){const r=i.fieldsIndex.get(ji.status),n=`(${nUe.join(",")})`,o=`${r.name} IN ${n}`;return`(${this._generateGlobalIdWhereClause(t,i)} AND ${o} AND ${this._generateAssociationTypeWhereClause(t,i)})`}async _loadUtiltyNetworks(){var n;const t=this.map;if(!t)return;await Promise.allSettled(((n=t.utilityNetworks)==null?void 0:n.map(async o=>{await o.load()}))??[]);const i=o=>{if("layerId"in o&&r.isUtilityLayer(o)){const u=r.getSourceIdByLayerId(o.layerId);u!==null&&this.networkSourceIdsInUse.add(u)}},r=this.utilityNetwork;this._set("networkSourceIdsInUse",new Set),t.allLayers.forEach(i),t.allTables.forEach(i)}async _findLayersBySourceId(t){const{utilityNetwork:i,map:r}=this,n=b=>{const E=b;return b.url&&E.layerId===o?b.url.replace(/\/\d+$/,"")===(i==null?void 0:i.featureServiceUrl):!1};await(i==null?void 0:i.load());const o=i.getLayerIdBySourceId(t),u=r.allLayers.filter(n),f=r.allTables.filter(n),g=u.concat(f).toArray();return await Promise.allSettled(g.map(b=>b.load())),g}_clearAssociations(){this.attachmentsAssociations.removeAll(),this.structureAssociations.removeAll(),this.contentAssociations.removeAll(),this.containerAssociations.removeAll(),this.connectivityAssociations.removeAll()}_clearFeatures(){this.associationFeatures.forEach(t=>t.removeAll()),this.associationFeatures.clear()}_getAssociationsByType(t){switch(t){case"attachment":return this.attachmentsAssociations;case"structure":return this.structureAssociations;case"connectivity":return this.connectivityAssociations;case"container":return this.containerAssociations;case"content":return this.contentAssociations}}_createAssociationFromFeature(t,i){if(!t)return null;const r=sUe.get(i.attributes[t.fieldsIndex.get(ji.associationType).name]);return new oUe({globalId:i.attributes[t.fieldsIndex.get(ji.globalId).name],fromNetworkElement:new am({globalId:i.attributes[t.fieldsIndex.get(ji.fromGlobalId).name],networkSourceId:i.attributes[t.fieldsIndex.get(ji.fromNetworkSourceId).name],terminalId:i.attributes[t.fieldsIndex.get(ji.fromTerminalId).name]}),toNetworkElement:new am({globalId:i.attributes[t.fieldsIndex.get(ji.toGlobalId).name],networkSourceId:i.attributes[t.fieldsIndex.get(ji.toNetworkSourceId).name],terminalId:i.attributes[t.fieldsIndex.get(ji.toTerminalId).name]}),associationType:r,status:i.attributes[t.fieldsIndex.get(ji.status).name],isContentVisible:i.attributes[t.fieldsIndex.get(ji.isContentVisible).name],percentAlong:i.attributes[t.fieldsIndex.get(ji.percentAlong).name]})}async _queryLayer(t,i,r,n,o){const u=t.fieldsIndex.get(ji.assetGroup),f=t.fieldsIndex.get(ji.assetType),g=r!=null,b=n!=null,E="("+i.map(P=>`'${P}'`).join(", ")+")",I=g?` AND ${u==null?void 0:u.name} = ${r}`:"",M=g&&b?` AND ${f==null?void 0:f.name} = ${n}`:"",k=`${t.globalIdField} IN ${E}`+I+M,L=new ss({outFields:["*"],cacheHint:this.supportsCacheHint,where:k});return await this._queryAll(L,t,{signal:o==null?void 0:o.signal})}async _createAssociationFeatureObjects(t,i,r,n,o,u){if(t.length===0)return[];const f=new Map;for(const[b,E]of i){const I=await this._findLayersBySourceId(b);for(const M of I)(await this._queryLayer(M,E,n,o,u)).forEach(k=>{if(k.getEffectivePopupTemplate()&&k.layer){const L=f.get(k.attributes[M.globalIdField])??[];L.push(k),f.set(k.attributes[M.globalIdField],L)}})}const g=[];return t.toArray().forEach(b=>{const E=b.fromNetworkElement.globalId===r?b.toNetworkElement:b.fromNetworkElement;(f.get(E.globalId)??[]).forEach(I=>{var k,L;const M=(L=(k=this.utilityNetwork)==null?void 0:k.getTerminalById(E==null?void 0:E.terminalId))==null?void 0:L.name;g.push({association:b,feature:I,terminalName:M})})}),g}_parseFeatureObjects(t,i){t.forEach(r=>{const n=r==null?void 0:r.feature,o=n.layer,u=i.get(o)??new Oe;u.add(r),i.set(o,u)})}async _queryAll(t,i,r){var f;const n=[];let o=0,u=!1;t.num=((f=i.sourceJSON)==null?void 0:f.maxRecordCount)??2e3;do{t.start=o;const g=await i.queryFeatures(t,r);n.push(...g.features),u=g.exceededTransferLimit,u&&(o+=g.features.length)}while(u);return n}async _queryAssociatedFeatureCount(t){const{layer:i,globalId:r,supportsCacheHint:n,associationTypes:o,associationsLayer:u,utilityNetwork:f,canQuery:g}=this;if(await Promise.allSettled([i==null?void 0:i.load(),f==null?void 0:f.load(),u==null?void 0:u.load()]),this._clearAssociations(),!(g&&i&&o&&u))return;const b=u.fieldsIndex.get(ji.toGlobalId).name,E=u.fieldsIndex.get(ji.fromGlobalId).name,I=o.map(z=>this._generateWhereClause(z,u)),M=this._generateNetworkSourceIdWhereClause(u),k=I.join(" OR "),L=new ss({outFields:["*"],cacheHint:n,returnGeometry:!1,where:`(${k}) AND (${M})`}),P=await this._queryAll(L,u,{signal:t==null?void 0:t.signal}),D=new Map;o.forEach(z=>{D.set(z.type,[])}),P.forEach(z=>{const V=u.fieldsIndex.get(ji.associationType);switch(z.attributes[V.name]){case 1:case 4:case 5:case 6:z.attributes[E]===r?D.get("connectivity").push(z.attributes[b]):D.get("connectivity").push(z.attributes[E]),this.connectivityAssociations.add(this._createAssociationFromFeature(u,z));break;case 2:z.attributes[E]===r?(D.get("content").push(z.attributes[b]),this.contentAssociations.add(this._createAssociationFromFeature(u,z))):(D.get("container").push(z.attributes[E]),this.containerAssociations.add(this._createAssociationFromFeature(u,z)));break;case 3:z.attributes[E]===r?(D.get("attachment").push(z.attributes[b]),this.attachmentsAssociations.add(this._createAssociationFromFeature(u,z))):(D.get("structure").push(z.attributes[E]),this.structureAssociations.add(this._createAssociationFromFeature(u,z)))}});const j=o.map(async z=>{const{associatedNetworkSourceId:V,associatedAssetGroup:W,associatedAssetType:Q}=z,Z=D.get(z.type),ee=W!=null?await this._countAssociatedFeatures(V,Z,W,Q,t):Z.length;switch(z.type){case"attachment":this._set("attachmentsFeatureCount",ee);break;case"structure":this._set("structureFeatureCount",ee);break;case"content":this._set("contentFeatureCount",ee);break;case"container":this._set("containerFeatureCount",ee);break;case"connectivity":this._set("connectivityFeatureCount",ee)}});await Promise.allSettled(j)}async _countAssociatedFeatureCount(t,i,r,n,o){const u=t.fieldsIndex.get(ji.assetGroup),f=t.fieldsIndex.get(ji.assetType),g=n!=null,b="("+i.map(k=>`'${k}'`).join(", ")+")",E=` AND ${u==null?void 0:u.name} = ${r}`,I=g?` AND ${f==null?void 0:f.name} = ${n}`:"",M=`${t.globalIdField} IN ${b}`+E+I;return t.queryFeatureCount({where:M,outFields:["*"],returnGeometry:!1},{signal:o==null?void 0:o.signal})}async _countAssociatedFeatures(t,i,r,n,o){if(i.length===0)return 0;const u=(await this._findLayersBySourceId(t)).map(async f=>this._countAssociatedFeatureCount(f,i,r,n,o));return(await Promise.all(u)).reduce((f,g)=>f+g,0)}async _queryAssociatedFeatures(t,i){const{layer:r,globalId:n,associationTypes:o,associationsLayer:u,utilityNetwork:f,canQuery:g,associationFeatures:b}=this;if(await Promise.allSettled([r==null?void 0:r.load(),f==null?void 0:f.load(),u==null?void 0:u.load()]),!(g&&r&&o&&u))return;const E=this._getAssociationsByType(t.type),{associatedAssetGroup:I,associatedAssetType:M}=t,k=new Map;E.forEach(P=>{const{networkSourceId:D,elementGlobalId:j}=P.fromNetworkElement.globalId===n?{networkSourceId:P.toNetworkElement.networkSourceId,elementGlobalId:P.toNetworkElement.globalId}:{networkSourceId:P.fromNetworkElement.networkSourceId,elementGlobalId:P.fromNetworkElement.globalId},z=k.get(D)||[];z.push(j),k.set(D,z)});const L=await this._createAssociationFeatureObjects(E,k,n,I,M,i);this._parseFeatureObjects(L,b)}async _queryFeatureCount(){await this._loadUtiltyNetworks();const{_queryFeatureCountAbortController:t,canQuery:i}=this;i?(await this._queryAssociatedFeatureCount(t),this._set("featureCount",this.attachmentsFeatureCount+this.structureFeatureCount+this.contentFeatureCount+this.containerFeatureCount+this.connectivityFeatureCount)):this._set("featureCount",0)}async _query(t){await this._loadUtiltyNetworks();const{_queryAbortController:i}=this;this.featureCount&&(this._destroyAssociatedFeatureViewModels(),this._clearFeatures(),this.destroyed||await this._queryAssociatedFeatures(t,{signal:i==null?void 0:i.signal}))}};m([w()],Dt.prototype,"_loaded",void 0),m([w()],Dt.prototype,"_queryAbortController",void 0),m([w()],Dt.prototype,"_queryPageAbortController",void 0),m([w()],Dt.prototype,"_queryFeatureCountAbortController",void 0),m([w({readOnly:!0})],Dt.prototype,"supportsCacheHint",null),m([w({readOnly:!0})],Dt.prototype,"canLoad",null),m([w({readOnly:!0})],Dt.prototype,"canQuery",null),m([w()],Dt.prototype,"networkSourceIdsInUse",void 0),m([w()],Dt.prototype,"description",void 0),m([w({type:qi})],Dt.prototype,"graphic",void 0),m([w()],Dt.prototype,"layer",void 0),m([w()],Dt.prototype,"map",void 0),m([w({readOnly:!0})],Dt.prototype,"objectId",null),m([w({readOnly:!0})],Dt.prototype,"objectIdField",null),m([w({readOnly:!0})],Dt.prototype,"globalId",null),m([w({readOnly:!0})],Dt.prototype,"globalIdField",null),m([w()],Dt.prototype,"featureCount",void 0),m([w()],Dt.prototype,"associationTypes",void 0),m([w()],Dt.prototype,"showAllEnabled",void 0),m([w()],Dt.prototype,"state",null),m([w()],Dt.prototype,"title",void 0),m([w({readOnly:!0})],Dt.prototype,"utilityNetwork",null),m([w({readOnly:!0})],Dt.prototype,"associationsLayer",null),m([w({readOnly:!0})],Dt.prototype,"attachmentsFeatureCount",void 0),m([w({readOnly:!0})],Dt.prototype,"structureFeatureCount",void 0),m([w({readOnly:!0})],Dt.prototype,"attachmentsAssociations",null),m([w({readOnly:!0})],Dt.prototype,"structureAssociations",null),m([w({readOnly:!0})],Dt.prototype,"contentFeatureCount",void 0),m([w({readOnly:!0})],Dt.prototype,"containerFeatureCount",void 0),m([w({readOnly:!0})],Dt.prototype,"contentAssociations",null),m([w({readOnly:!0})],Dt.prototype,"containerAssociations",null),m([w({readOnly:!0})],Dt.prototype,"connectivityFeatureCount",void 0),m([w({readOnly:!0})],Dt.prototype,"connectivityAssociations",null),m([w({readOnly:!0})],Dt.prototype,"associationFeatures",null),m([w({readOnly:!0})],Dt.prototype,"associationViewModels",null),Dt=m([H("esri.widgets.Feature.FeatureUtilityNetworkAssociations.FeatureUtilityNetworkAssociationsViewModel")],Dt);const jS=Dt;let Kb=class extends De{constructor(t){super(t),this.title=!0,this.description=!0}};m([w({type:Boolean,nonNullable:!0})],Kb.prototype,"title",void 0),m([w({type:Boolean,nonNullable:!0})],Kb.prototype,"description",void 0),Kb=m([H("esri.widgets.Feature.FeatureUtilityNetworkAssociations.VisibleElements")],Kb);const e$=Kb;var aR;const Yb="esri-feature",Wm=`${Yb}-relationship`,Zm={base:Wm,listContainer:`${Wm}__list`,listItem:`${Wm}__list-item`,listItemHidden:`${Wm}__list-item--hidden`,listContainerQuerying:`${Wm}__list--querying`,featureObserver:`${Yb}__feature-observer`,stickySpinnerContainer:`${Yb}__sticky-loading-container`,loadingSpinnerContainer:`${Yb}__loading-container`,expander:`${Wm}__expander`,filterContainer:`${Yb}__filter-container`};let Ki=aR=class extends bi{constructor(e,t){super(e,t),this.flowType="feature-utility-network-association-type",this.description=null,this.headingLevel=2,this.title=null,this.viewModel=new jS,this.parentFeatureViewModel=null,this.listType=null,this.selectedLayer=null,this.flowItems=null,this.messages=null,this.messagesCommon=null,this.visibleElements=new e$,this._featuresPerPage=50,this._maxNumFeatures=1e3,this._currentFeaturePage=1,this._previewDisplayCount=3,this._associatedFeatureIntersectionObserverNode=null,this._associatedFeatureIntersectionObserver=new IntersectionObserver(([i])=>{i!=null&&i.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this._tooltipReferenceMap=new sf,this._filterText=""}initialize(){this.addHandles([me(()=>[this._associatedFeatureIntersectionObserverNode],()=>this._handleAssociatedFeatureObserverChange())])}loadDependencies(){return cs({chip:()=>ce(()=>import("./calcite-chip-CG7e-Fx1.js"),[],import.meta.url),icon:()=>ce(()=>import("./calcite-icon-_vDov-sg.js"),[],import.meta.url),input:()=>ce(()=>import("./calcite-input-BbQO9hrl.js"),[],import.meta.url),loader:()=>ce(()=>import("./calcite-loader-BYXdEs7m.js"),__vite__mapDeps([232,205]),import.meta.url),list:()=>ce(()=>import("./calcite-list-BrvAaUx7.js"),__vite__mapDeps([233,234,235,205,236]),import.meta.url),"list-item":()=>ce(()=>import("./calcite-list-item-DzQsSgvs.js"),__vite__mapDeps([237,235,234,238,205]),import.meta.url),tooltip:()=>ce(()=>import("./calcite-tooltip-D9jVgGfo.js"),__vite__mapDeps([241,242,240,243]),import.meta.url)})}destroy(){this._tooltipReferenceMap.clear()}get _numAssociatedFeatures(){const e=this.viewModel.associationViewModels;return this.selectedLayer?e.get(this.selectedLayer).length:0}set currentFeaturePage(e){const{_featuresPerPage:t,_numAssociatedFeatures:i}=this,r=1,n=Math.ceil(i/t)||1;this._currentFeaturePage=Math.max(Math.min(e,n),r)}get currentFeaturePage(){return this._currentFeaturePage}render(){const e=this.viewModel.associationViewModels,{state:t,showAllEnabled:i}=this.viewModel,{state:r}=this.parentFeatureViewModel??{};return G("div",{class:this.classes(Zm.base,Ge.widget)},t==="loading"||t==="querying"||r==="loading"?this._renderLoading():G("calcite-list",null,i&&this.selectedLayer?G(tue,null,this._renderFilter(),this._renderAssociatedFeatureListPage(),this._renderFeatureObserver()):Array.from(e.keys(),n=>this._renderTypeList(n,e.get(n)))))}_renderFilter(){return G("div",{class:Zm.filterContainer,key:"filter"},G("calcite-input",{icon:"search",placeholder:this.messages.associationFilterPlaceholder,type:"search",onCalciteInputInput:e=>{this._filterText=e.target.value.trim().toLowerCase(),this._currentFeaturePage=1}}))}_showAllAssociations(e){const{flowItems:t,viewModel:i,description:r}=this;if(!t||!e)return;i.showAllEnabled=!0;const n=new aR({selectedLayer:e,title:e==null?void 0:e.title,flowItems:t,parentFeatureViewModel:this.parentFeatureViewModel,featureVisibleElements:this.featureVisibleElements,description:r,visibleElements:{title:!1,description:!1},viewModel:i});t.push(n)}_renderAssociatedFeatureListPage(){const{currentFeaturePage:e,_featuresPerPage:t,_maxNumFeatures:i,_filterText:r}=this,n=Math.min(e*t,i),o=this.viewModel.associationViewModels.get(this.selectedLayer).filter(u=>HI(u.featureViewModel).toLowerCase().includes(r)).slice(0,n);return[...this._renderTooltips(o),...this._renderAssociatedFeatureList(o)]}async _handleAssociatedFeatureObserverChange(){this._associatedFeatureIntersectionObserverNode&&this._associatedFeatureIntersectionObserver.unobserve(this._associatedFeatureIntersectionObserverNode);const{state:e,showAllEnabled:t}=this.viewModel;await ym(0),this._associatedFeatureIntersectionObserverNode&&e==="ready"&&t&&this._associatedFeatureIntersectionObserver.observe(this._associatedFeatureIntersectionObserverNode)}_associatedFeatureIntersectionObserverCreated(e){this._associatedFeatureIntersectionObserverNode=e}_renderFeatureObserver(){return G("div",{afterCreate:this._associatedFeatureIntersectionObserverCreated,bind:this,class:Zm.featureObserver,key:"feature-observer"})}_increaseFeaturePage(){this.currentFeaturePage++}_renderLoading(){return G("div",{class:Zm.loadingSpinnerContainer,key:"loading-container"},this._renderLoadingIcon())}_renderLoadingIcon(){return G("calcite-loader",{inline:!0,label:""})}isConnectivity(e){return["connectivity","junction-junction-connectivity","junction-edge-from-connectivity","junction-midspan-connectivity","junction-edge-to-connectivity"].includes(e.association.associationType)}_getConnectivityTooltip(e){switch(e){case"connectivity":case"junction-junction-connectivity":return this.messages.associationsJunctionJunction;case"junction-edge-from-connectivity":return this.messages.associationsJunctionEdgeFrom;case"junction-midspan-connectivity":return this.messages.associationsJunctionEdgeMidspan;case"junction-edge-to-connectivity":return this.messages.associationsJunctionEdgeTo;default:return""}}_renderItemTooltip(e){const{_tooltipReferenceMap:t}=this;return this.isConnectivity(e)?G("calcite-tooltip",{key:`tooltip-${e.featureViewModel.uid}`,referenceElement:t.get(e.featureViewModel.uid)},this._getConnectivityTooltip(e.association.associationType)):null}_renderConnectivityIcon(e,t){let i;switch(e){case"junction-edge-from-connectivity":i="connection-end-left";break;case"junction-edge-to-connectivity":i="connection-end-right";break;case"junction-midspan-connectivity":i="connection-middle";break;default:i="connection-to-connection"}return G("calcite-icon",{afterCreate:r=>this._tooltipReferenceMap.set(t,r),afterRemoved:()=>this._tooltipReferenceMap.delete(t),icon:i,scale:"s",slot:"content-start"})}_formatPercentAlong(e){return`${as(e.association.percentAlong,{style:"percent",maximumFractionDigits:2})}`}_renderAssociatedFeature(e){const{featureViewModel:t}=e,i=HI(t),r=t.state==="loading",n=this._findFlowItem(t),o=n<0&&this._isParentFeature(t),u=o||n>=0,f=this.isConnectivity(e),g=f&&e.association.associationType==="junction-midspan-connectivity";return G("calcite-list-item",{class:this.classes(Zm.listItem,{[Zm.listItemHidden]:r}),description:e.terminalName??"",key:`associated-feature-type-${t.uid}`,label:i,onCalciteListItemSelect:()=>this._handleFeatureClick(o,n,t)},f?this._renderConnectivityIcon(e.association.associationType,e.featureViewModel.uid):null,g?G("calcite-chip",{scale:"s",slot:"content-end",value:e.association.percentAlong},this._formatPercentAlong(e)):null,this._renderChevronIconNode(u))}async _selectAssociation(e){const{flowItems:t,featureVisibleElements:i}=this;if(!t)return;e.abilities={utilityNetworkAssociationsContent:!0};const{default:r}=await ce(()=>Promise.resolve().then(()=>ade),void 0,import.meta.url);t.push(new r({flowItems:t,flowType:"feature-association",viewModel:e,visibleElements:i}))}_handleFeatureClick(e,t,i){if(e)this.flowItems.drain(r=>{"showAllEnabled"in r.viewModel&&(r.viewModel.showAllEnabled=!1),r.viewModel=null,r.destroy()});else if(t<0||!this.flowItems)this._selectAssociation(i);else for(;this.flowItems.length>t+1;){const r=this.flowItems.pop();r&&("showAllEnabled"in r.viewModel&&(r.viewModel.showAllEnabled=!1),r.viewModel=null,r.destroy())}}_featureViewModelMatch(e,t){const i=e.graphic,r=i==null?void 0:i.layer;let n=null;(r==null?void 0:r.type)==="subtype-sublayer"&&r.parent?n=r.parent.globalIdField??null:r&&"globalIdField"in r&&(n=r.globalIdField);const o=n?i==null?void 0:i.attributes[n]:null,u=t.graphic,f=u==null?void 0:u.layer;let g=null;(f==null?void 0:f.type)==="subtype-sublayer"&&f.parent?g=f.parent.globalIdField??null:f&&"globalIdField"in f&&(g=f.globalIdField);const b=g?u==null?void 0:u.attributes[g]:null;return o&&b&&o===b}_isParentFeature(e){var r;const t=(r=this.flowItems)==null?void 0:r.getItemAt(0);if(!t)return!1;const i=t.parentFeatureViewModel;return this._featureViewModelMatch(i,e)}_findFlowItem(e){var t;return((t=this.flowItems)==null?void 0:t.findIndex(i=>{if(i.flowType!=="feature")return!1;const r=i.viewModel;return this._featureViewModelMatch(r,e)}))??-1}_renderTooltips(e){return e.toArray().map(t=>this._renderItemTooltip(t))}_renderAssociatedFeatureList(e){return e.toArray().map(t=>this._renderAssociatedFeature(t))}_renderChevronIconNode(e){return G("calcite-icon",{flipRtl:!0,icon:e?"move-up":"chevron-right",scale:"s",slot:"content-end"})}_renderTypeList(e,t){const{messages:i}=this,r=t.slice(0,this._previewDisplayCount),n=r.length<t.length;return G("calcite-list-item",{key:"show-all",label:e.title,open:!0,value:e.id},G("calcite-chip",{scale:"s",slot:"actions-end",value:e.id},t.length),G("calcite-list",{group:e.id},[this._renderTooltips(r),this._renderAssociatedFeatureList(r)],n?G("calcite-list-item",{description:Rn(i==null?void 0:i.numberRecords,{number:t.length.toString()}),key:"show-all-item",label:i.showAll,onCalciteListItemSelect:()=>this._showAllAssociations(e)},G("calcite-icon",{icon:"list",scale:"s",slot:"content-end"})):null))}};m([w()],Ki.prototype,"flowType",void 0),m([w()],Ki.prototype,"description",void 0),m([w()],Ki.prototype,"headingLevel",void 0),m([w()],Ki.prototype,"title",void 0),m([w({type:jS})],Ki.prototype,"viewModel",void 0),m([w()],Ki.prototype,"parentFeatureViewModel",void 0),m([w()],Ki.prototype,"listType",void 0),m([w()],Ki.prototype,"selectedLayer",void 0),m([w()],Ki.prototype,"featureVisibleElements",void 0),m([w()],Ki.prototype,"flowItems",void 0),m([w(),Xt("esri/widgets/Feature/t9n/Feature")],Ki.prototype,"messages",void 0),m([w(),Xt("esri/t9n/common")],Ki.prototype,"messagesCommon",void 0),m([w({type:e$,nonNullable:!0})],Ki.prototype,"visibleElements",void 0),m([w()],Ki.prototype,"_featuresPerPage",void 0),m([w()],Ki.prototype,"_maxNumFeatures",void 0),m([w()],Ki.prototype,"_numAssociatedFeatures",null),m([w()],Ki.prototype,"_currentFeaturePage",void 0),m([w()],Ki.prototype,"currentFeaturePage",null),m([w()],Ki.prototype,"_previewDisplayCount",void 0),m([w()],Ki.prototype,"_associatedFeatureIntersectionObserverNode",void 0),m([w()],Ki.prototype,"_tooltipReferenceMap",void 0),m([w()],Ki.prototype,"_filterText",void 0),Ki=aR=m([H("esri.widgets.Feature.FeatureUtilityNetworkAssociationType")],Ki);const aUe=Ki,F4="esri-feature",Jm=`${F4}-relationship`,Cw={base:Jm,listContainer:`${Jm}__list`,listItem:`${Jm}__list-item`,listItemHidden:`${Jm}__list-item--hidden`,listContainerQuerying:`${Jm}__list--querying`,featureObserver:`${F4}__feature-observer`,stickySpinnerContainer:`${F4}__sticky-loading-container`,loadingSpinnerContainer:`${F4}__loading-container`,expander:`${Jm}__expander`};let So=class extends bi{constructor(t,i){super(t,i),this._featureElementInfo=null,this.flowType="feature-utility-network-associations",this.flowItems=null,this.parentFeatureViewModel=null,this.headingLevel=2,this.viewModel=new jS,this.messages=null,this.messagesCommon=null,this.visibleElements=new e$}initialize(){this._featureElementInfo=new kS,this.addHandles([me(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),Je)])}loadDependencies(){return cs({chip:()=>ce(()=>import("./calcite-chip-CG7e-Fx1.js"),[],import.meta.url),icon:()=>ce(()=>import("./calcite-icon-_vDov-sg.js"),[],import.meta.url),loader:()=>ce(()=>import("./calcite-loader-BYXdEs7m.js"),__vite__mapDeps([232,205]),import.meta.url),notice:()=>ce(()=>import("./calcite-notice-kwETwl5K.js"),__vite__mapDeps([239,240]),import.meta.url),list:()=>ce(()=>import("./calcite-list-BrvAaUx7.js"),__vite__mapDeps([233,234,235,205,236]),import.meta.url),"list-item":()=>ce(()=>import("./calcite-list-item-DzQsSgvs.js"),__vite__mapDeps([237,235,234,238,205]),import.meta.url)})}destroy(){this._featureElementInfo=Jt(this._featureElementInfo)}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}render(){var i;const{state:t}=this.viewModel;return G("div",{class:this.classes(Cw.base,Ge.widget)},(i=this._featureElementInfo)==null?void 0:i.render(),t==="loading"?this._renderLoading():t==="disabled"?this._renderAssociationNotFound():this._renderContent())}_renderStickyLoading(){return this.viewModel.state==="querying"?G("div",{class:Cw.stickySpinnerContainer,key:"sticky-loader"},this._renderLoadingIcon()):null}_renderLoadingIcon(){return G("calcite-loader",{inline:!0,label:""})}_renderLoading(){return G("div",{class:Cw.loadingSpinnerContainer,key:"loading-container"},this._renderLoadingIcon())}_renderAssociationNotFound(){var t;return G("calcite-notice",{icon:"exclamation-mark-triangle",key:"association-not-found",kind:"danger",open:!0,scale:"s",width:"full"},G("div",{slot:"message"},(t=this.messages)==null?void 0:t.noAssociations))}_setupFeatureElementInfo(){var o;const{headingLevel:t,visibleElements:i}=this,r=i.description&&this.description,n=i.title&&this.title;(o=this._featureElementInfo)==null||o.set({description:r,title:n,headingLevel:t})}_getAssociationTypeTitle(t){const{messages:i}=this;if(t.title)return t.title;switch(t.type){case"attachment":return i.associationsAttachments;case"connectivity":return i.associationsConnectivity;case"structure":return i.associationsStructure;case"content":return i.associationsContents;case"container":return i.associationsContainer}}_selectAssociationType(t){var f;const{viewModel:i,flowItems:r,parentFeatureViewModel:n}=this;if(!r)return;const{associationTypes:o}=i;o.forEach(g=>{g.type===t.type?g.open=!0:g.open=!1});const u=new aUe({viewModel:i,parentFeatureViewModel:n,listType:t,title:this._getAssociationTypeTitle(t),featureVisibleElements:this.featureVisibleElements,description:(f=this.parentFeatureViewModel)==null?void 0:f.title,flowItems:r});r.push(u)}_renderAssociationType(t){const i=this._getAssociationTypeTitle(t);return G("calcite-list-item",{description:t.description,key:`association-type-${t.type}`,label:i,value:t.type,onCalciteListItemSelect:()=>this._selectAssociationType(t)},G("calcite-chip",{scale:"s",slot:"content-end",value:t.type},this._getFeatureCount(t.type)),G("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"}))}_getFeatureCount(t){switch(t){case"attachment":return this.viewModel.attachmentsFeatureCount;case"structure":return this.viewModel.structureFeatureCount;case"content":return this.viewModel.contentFeatureCount;case"container":return this.viewModel.containerFeatureCount;case"connectivity":return this.viewModel.connectivityFeatureCount}}_renderAssociations(t){return G("div",null,this._getFeatureCount(t.type)>0?this._renderAssociationType(t):null)}_renderContent(){const{state:t,associationTypes:i}=this.viewModel;return G("div",{class:this.classes(Cw.listContainer,{[Cw.listContainerQuerying]:t==="querying"}),key:"list-container"},t==="ready"?G("calcite-list",null,i.map(r=>this._renderAssociations(r))):null,this._renderStickyLoading())}};m([w()],So.prototype,"flowType",void 0),m([w()],So.prototype,"flowItems",void 0),m([w()],So.prototype,"parentFeatureViewModel",void 0),m([w()],So.prototype,"featureVisibleElements",void 0),m([w()],So.prototype,"description",null),m([w()],So.prototype,"headingLevel",void 0),m([w()],So.prototype,"title",null),m([w({type:jS})],So.prototype,"viewModel",void 0),m([w(),Xt("esri/widgets/Feature/t9n/Feature")],So.prototype,"messages",void 0),m([w(),Xt("esri/t9n/common")],So.prototype,"messagesCommon",void 0),m([w({type:e$,nonNullable:!0})],So.prototype,"visibleElements",void 0),So=m([H("esri.widgets.Feature.FeatureUtilityNetworkAssociations")],So);const lUe=So;let uUe=class{constructor(t,i){this.preLayerQueryCallback=t,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=r=>{}),this.preRequestCallback||(this.preLayerQueryCallback=r=>{})}};var Z1;const cUe=1,pJ="content-view-models",fJ="relationship-view-models",hUe="association-view-models",yJ={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0,utilityNetworkAssociationsContent:!0};let xi=Z1=class extends Eu(De){constructor(e){super(e),this._error=null,this._featureAbortController=null,this._associationVMAbortController=null,this._graphicChangedThrottled=eD(this._graphicChanged,cUe,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...yJ},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.location=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=t=>{const{abilities:i}=this;return t.type==="attachments"&&!!i.attachmentsContent||t.type==="custom"&&!!i.customContent||t.type==="fields"&&!!i.fieldsContent||t.type==="media"&&!!i.mediaContent||t.type==="text"&&!!i.textContent||t.type==="expression"&&!!i.expressionContent||t.type==="relationship"&&!!i.relationshipContent||t.type==="utility-network-associations"&&!!i.utilityNetworkAssociationsContent},this.addHandles(me(()=>[this.graphic,this._effectivePopupTemplate,this.abilities,this.timeZone],()=>this._graphicChangedThrottled(),Je))}initialize(){this.addHandles(this._graphicChangedThrottled)}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return this.graphic!=null?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return cOe(lH(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return xue(this.graphic)}castAbilities(e){return{...yJ,...e}}get isTable(){var e;return((e=this._sourceLayer)==null?void 0:e.isTable)||!1}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(e){this._featureAbortController=new AbortController,this._set("graphic",(e==null?void 0:e.clone())??null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)??null}set spatialReference(e){this._override("spatialReference",e)}get timeZone(){var e;return((e=this.view)==null?void 0:e.timeZone)??ba}set timeZone(e){this._overrideIfSome("timeZone",e)}get map(){var e;return((e=this.view)==null?void 0:e.map)||null}set map(e){this._override("map",e)}get waitingForContent(){return!(!this._featureAbortController&&!this._associationVMAbortController)}setActiveMedia(e,t){const i=this.contentViewModels[e];i instanceof vy&&i.setActiveMedia(t)}nextMedia(e){const t=this.contentViewModels[e];t instanceof vy&&t.next()}previousMedia(e){const t=this.contentViewModels[e];t instanceof vy&&t.previous()}async updateGeometry(){var u;const{graphic:e,spatialReference:t,_sourceLayer:i}=this;await(i==null?void 0:i.load());const r=i==null?void 0:i.objectIdField;if(!r||!e||!i)return;const n=(u=e==null?void 0:e.attributes)==null?void 0:u[r];if(n==null)return;const o=[n];if(!e.geometry){const f=await kue({layer:i,graphic:e,outFields:[],objectIds:o,returnGeometry:!0,spatialReference:t}),g=f==null?void 0:f.geometry;g&&(e.geometry=g)}}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:e}=this;if(!e)return;const t=new AbortController;this._featureAbortController=t;try{await this._queryFeature({signal:t.signal})}catch(i){Or(i)||(this._error=i,Se.getLogger(this).error("error","The popupTemplate could not be displayed for this feature.",{error:i,graphic:e,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===t&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:e}=this;e&&e.abort(),this._featureAbortController=null}_compileContentElement(e,t){return e.type==="attachments"?this._compileAttachments(e,t):e.type==="custom"?this._compileCustom(e,t):e.type==="fields"?this._compileFields(e,t):e.type==="media"?this._compileMedia(e,t):e.type==="text"?this._compileText(e,t):e.type==="expression"?this._compileExpression(e,t):e.type==="relationship"?this._compileRelationship(e,t):e.type==="utility-network-associations"?this._compileUtilityNetworkAssociation(e,t):void 0}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map((t,i)=>this._compileContentElement(t,i)).filter(cr):typeof e=="string"?this._compileText(new rm({text:e}),0).text:e}_destroyContentViewModels(){this.removeHandles(fJ),this.removeHandles(pJ),this.contentViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("contentViewModels",[])}_matchesFeature(e,t){var n;const i=(n=e==null?void 0:e.graphic)==null?void 0:n.getObjectId(),r=t==null?void 0:t.getObjectId();return i!=null&&r!=null&&i===r}_setRelatedFeaturesViewModels({relatedFeatureViewModels:e,relatedFeatures:t,map:i}){const{view:r,spatialReference:n,timeZone:o}=this;t==null||t.filter(Boolean).forEach(u=>{e.some(f=>this._matchesFeature(f,u))||e.add(new Z1({abilities:{relationshipContent:!1},map:i,view:r,spatialReference:n,timeZone:o,graphic:u}))}),e.forEach(u=>{(t==null?void 0:t.find(g=>this._matchesFeature(u,g)))||e.remove(u)})}_setExpressionContentVM(e,t){const i=this.formattedAttributes,{contentElement:r,contentElementViewModel:n}=e,o=r==null?void 0:r.type;n&&o&&(o==="fields"&&(this._createFieldsFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),n.set(this._createFieldsVMParams(r,t))),o==="media"&&(this._createMediaFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),n.set(this._createMediaVMParams(r,t))),o==="text"&&n.set(this._createTextVMParams(r)))}_compileRelationship(e,t){const{displayCount:i,orderByFields:r,relationshipId:n,title:o,description:u}=e,{_sourceLayer:f,graphic:g,map:b}=this;if(!Mue(f))return;const E=new UD({displayCount:i,graphic:g,orderByFields:r,relationshipId:n,layer:f,map:b,...this._compileTitleAndDesc({title:o,description:u})});return this.contentViewModels[t]=E,this.addHandles(Lr(()=>E.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(E)),fJ),e}_matchesGlobalFeature(e,t){const i=e==null?void 0:e.association.globalId,r=t==null?void 0:t.association.globalId;return i!=null&&r!=null&&i===r}async _setUpUtilityNetworkAssociationsViewModels(e,t,i){const{view:r,spatialReference:n,timeZone:o}=this;e.forEach((f,g)=>{const b=t.get(g);b?f.forEach(E=>{b.find(I=>this._matchesGlobalFeature(E,I))||(f.remove(E),f.length===0&&e.delete(g))}):(f.removeAll(),e.delete(g))}),t.forEach((f,g)=>{const b=e.get(g)||new Oe;f==null||f.filter(Boolean).forEach(E=>{b.some(I=>this._matchesGlobalFeature(I,E))||b.add({association:E.association,featureViewModel:new Z1({abilities:{utilityNetworkAssociationsContent:!1},map:i,view:r,spatialReference:n,timeZone:o,graphic:E.feature}),terminalName:E.terminalName})}),e.set(g,b)});const u=new AbortController;this._associationVMAbortController=u,await this._sortListObjectsByTitle(e,{signal:u.signal}),this._associationVMAbortController===u&&(this._associationVMAbortController=null)}async _sortListObjectsByTitle(e,t){for(const i of e.values()){const r=i.map(n=>cl(()=>n.featureViewModel.state==="ready",t==null?void 0:t.signal));await Promise.all(r),i.sort(this._compareByFeatureTitle)}}_compareByFeatureTitle(e,t){const i=HI(e.featureViewModel),r=HI(t.featureViewModel);return i.localeCompare(r,void 0,{numeric:!0})}_compileUtilityNetworkAssociation(e,t){const{title:i,description:r,associationTypes:n}=e,{_sourceLayer:o,graphic:u,map:f}=this;if(!nOe(o))return;const g=new jS({graphic:u,associationTypes:n,layer:o,map:f,...this._compileTitleAndDesc({title:i,description:r})});return this.contentViewModels[t]=g,this.addHandles([me(()=>g.associationFeatures.values(),()=>this._setUpUtilityNetworkAssociationsViewModels(g.associationViewModels,g.associationFeatures,g.map))],hUe),e}_compileExpression(e,t){const{expressionInfo:i}=e,{graphic:r,map:n,spatialReference:o,view:u,location:f}=this,g=new VD({expressionInfo:i,graphic:r,interceptor:Z1.interceptor,map:n,spatialReference:o,view:u,location:f});return this.contentViewModels[t]=g,this.addHandles(me(()=>g.contentElementViewModel,()=>this._setExpressionContentVM(g,t),Je),pJ),e}_compileAttachments(e,t){const{graphic:i}=this,{description:r,title:n}=e;return this.contentViewModels[t]=new aD({graphic:i,...this._compileTitleAndDesc({title:n,description:r})}),e}_compileCustom(e,t){const{graphic:i}=this,{creator:r,destroyer:n}=e;return this.contentViewModels[t]=new FI({graphic:i,creator:r,destroyer:n}),e}_compileTitleAndDesc({title:e,description:t}){const{_fieldInfoMap:i,_sourceLayer:r,graphic:n,formattedAttributes:o}=this,u=n==null?void 0:n.attributes,f=this._expressionAttributes,g=o.global;return{title:gy({attributes:u,fieldInfoMap:i,globalAttributes:g,expressionAttributes:f,layer:r,text:e}),description:gy({attributes:u,fieldInfoMap:i,globalAttributes:g,expressionAttributes:f,layer:r,text:t})}}_createFieldsVMParams(e,t){const i=this._effectivePopupTemplate,r=this.formattedAttributes,n={...r==null?void 0:r.global,...r==null?void 0:r.content[t]},o=(e==null?void 0:e.fieldInfos)||(i==null?void 0:i.fieldInfos),u=o==null?void 0:o.filter(({fieldName:E})=>!!E&&(rD(E)||Zh(E)||n.hasOwnProperty(E))),f=i==null?void 0:i.expressionInfos,{description:g,title:b}=e;return{attributes:n,expressionInfos:f,fieldInfos:u,...this._compileTitleAndDesc({title:b,description:g})}}_compileFields(e,t){const i=e.clone(),r=new DT(this._createFieldsVMParams(e,t));return this.contentViewModels[t]=r,i.fieldInfos=r.formattedFieldInfos.slice(),i}_createMediaVMParams(e,t){const{abilities:i,graphic:r,_fieldInfoMap:n,_effectivePopupTemplate:o,relatedInfos:u,_sourceLayer:f,_expressionAttributes:g}=this,b=this.formattedAttributes,E=(r==null?void 0:r.attributes)??{},{description:I,mediaInfos:M,title:k}=e;return{abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:E,isAggregate:r==null?void 0:r.isAggregate,layer:f,fieldInfoMap:n,formattedAttributes:{...b==null?void 0:b.global,...b==null?void 0:b.content[t]},expressionAttributes:g,mediaInfos:M,popupTemplate:o,relatedInfos:u,...this._compileTitleAndDesc({title:k,description:I})}}_compileMedia(e,t){const i=e.clone(),r=new vy(this._createMediaVMParams(e,t));return i.mediaInfos=r.formattedMediaInfos.slice(),this.contentViewModels[t]=r,i}_createTextVMParams(e){var o;const{graphic:t,_fieldInfoMap:i,_sourceLayer:r,_expressionAttributes:n}=this;if(e&&e.text){const u=(t==null?void 0:t.attributes)??{},f=((o=this.formattedAttributes)==null?void 0:o.global)??{};e.text=gy({attributes:u,fieldInfoMap:i,globalAttributes:f,expressionAttributes:n,layer:r,text:e.text})}return{graphic:t,creator:e.text}}_compileText(e,t){const i=e.clone();return this.contentViewModels[t]=new FI(this._createTextVMParams(i)),i}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:t,graphic:i,timeZone:r}=this;if(!e)return;const{lastEditInfoEnabled:n}=e,o=t==null?void 0:t.editFieldsInfo;return n&&o?uOe(o,i==null?void 0:i.attributes,r,t):void 0}_compileTitle(e){var f;const{_fieldInfoMap:t,_sourceLayer:i,graphic:r,_expressionAttributes:n}=this,o=(r==null?void 0:r.attributes)??{},u=((f=this.formattedAttributes)==null?void 0:f.global)??{};return gy({attributes:o,fieldInfoMap:t,globalAttributes:u,expressionAttributes:n,layer:i,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:t}=this;return t?NI({type:"title",value:e==null?void 0:e.title,event:{graphic:t}}):null}async _getContent(){const{_effectivePopupTemplate:e,graphic:t}=this;return t?NI({type:"content",value:e==null?void 0:e.content,event:{graphic:t}}):null}async _queryFeature(e){const{_featureAbortController:t,_sourceLayer:i,graphic:r,_effectivePopupTemplate:n}=this,o=this.map,u=this.view,f=this.spatialReference,g=this.location;if(t!==this._featureAbortController||!r)return;await dOe({graphic:r,popupTemplate:n,layer:i,spatialReference:f},e);const{content:{value:b},title:{value:E}}=await Lo({content:this._getContent(),title:this._getTitle()}),{expressionAttributes:{value:I}}=await Lo({checkForRelatedFeatures:this._checkForRelatedFeatures(e),expressionAttributes:XVe({expressionInfos:n==null?void 0:n.expressionInfos,spatialReference:f,graphic:r,map:o,interceptor:Z1.interceptor,view:u,options:e,location:g})});t===this._featureAbortController&&r&&(this._expressionAttributes=I,this._graphicExpressionAttributes={...r.attributes,...I},this._set("formattedAttributes",this._createFormattedAttributes(b)),this._set("title",this._compileTitle(E)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(b)||null))}_createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){const{_effectivePopupTemplate:r,graphic:n,relatedInfos:o,_sourceLayer:u,_fieldInfoMap:f,_graphicExpressionAttributes:g,timeZone:b}=this;i.content[t]=n7({fieldInfos:r==null?void 0:r.fieldInfos,graphic:n,attributes:{...g,...e.attributes},layer:u,fieldInfoMap:f,relatedInfos:o,timeZone:b})}_createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){if(e.fieldInfos){const{graphic:r,relatedInfos:n,_sourceLayer:o,_fieldInfoMap:u,_graphicExpressionAttributes:f,timeZone:g}=this;i.content[t]=n7({fieldInfos:e.fieldInfos,graphic:r,attributes:{...f,...e.attributes},layer:o,fieldInfoMap:u,relatedInfos:n,timeZone:g})}}_createFormattedAttributes(e){const{_effectivePopupTemplate:t,graphic:i,relatedInfos:r,_sourceLayer:n,_fieldInfoMap:o,_graphicExpressionAttributes:u,timeZone:f}=this,g=t==null?void 0:t.fieldInfos,b={global:n7({fieldInfos:g,graphic:i,attributes:u,layer:n,fieldInfoMap:o,relatedInfos:r,timeZone:f}),content:[]};return Array.isArray(e)&&e.forEach((E,I)=>{E.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:E,contentElementIndex:I,formattedAttributes:b}),E.type==="media"&&this._createMediaFormattedAttributes({contentElement:E,contentElementIndex:I,formattedAttributes:b})}),b}_checkForRelatedFeatures(e){const{graphic:t,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(t,lH(i),e)}async _queryRelatedInfos(e,t,i){const{relatedInfos:r,_sourceLayer:n}=this;r.clear();const o=(n==null?void 0:n.associatedLayer)!=null?await(n==null?void 0:n.associatedLayer.load(i)):n;if(!o||!e)return;const u=t.filter(b=>!!b.fieldName&&Zh(b.fieldName));if(!(u!=null&&u.length))return;t.forEach(b=>this._configureRelatedInfo(b,o));const f=await VPe({relatedInfos:r,layer:o},i);Object.keys(f).forEach(b=>{var M;const E=r.get(b.toString()),I=(M=f[b])==null?void 0:M.value;E&&I&&(E.layerInfo=I.data)});const g=await UPe({graphic:e,relatedInfos:r,layer:o},i);Object.keys(g).forEach(b=>{var E;RPe((E=g[b])==null?void 0:E.value,r.get(b.toString()))})}_configureRelatedInfo(e,t){const{relatedInfos:i}=this,r=m4(e.fieldName||"");if(!r)return;const{layerId:n,fieldName:o}=r;if(!n)return;const u=i.get(n.toString())||OPe(n,t);u&&(GPe({relatedInfo:u,fieldName:o,fieldInfo:e}),this.relatedInfos.set(n,u))}};xi.interceptor=new uUe(yOe,mOe),m([w()],xi.prototype,"_error",void 0),m([w()],xi.prototype,"_featureAbortController",void 0),m([w()],xi.prototype,"_associationVMAbortController",void 0),m([w({readOnly:!0})],xi.prototype,"_effectivePopupTemplate",null),m([w({readOnly:!0})],xi.prototype,"_fieldInfoMap",null),m([w({readOnly:!0})],xi.prototype,"_sourceLayer",null),m([w()],xi.prototype,"abilities",void 0),m([St("abilities")],xi.prototype,"castAbilities",null),m([w({readOnly:!0})],xi.prototype,"content",void 0),m([w({readOnly:!0})],xi.prototype,"contentViewModels",void 0),m([w()],xi.prototype,"description",void 0),m([w({type:Boolean})],xi.prototype,"defaultPopupTemplateEnabled",void 0),m([w({readOnly:!0})],xi.prototype,"isTable",null),m([w({readOnly:!0})],xi.prototype,"state",null),m([w({readOnly:!0})],xi.prototype,"formattedAttributes",void 0),m([w({type:qi,value:null})],xi.prototype,"graphic",null),m([w({readOnly:!0})],xi.prototype,"lastEditInfo",void 0),m([w({type:lt})],xi.prototype,"location",void 0),m([w({readOnly:!0})],xi.prototype,"relatedInfos",void 0),m([w()],xi.prototype,"spatialReference",null),m([w()],xi.prototype,"timeZone",null),m([w({readOnly:!0})],xi.prototype,"title",void 0),m([w()],xi.prototype,"map",null),m([w({readOnly:!0})],xi.prototype,"waitingForContent",null),m([w()],xi.prototype,"view",void 0),xi=Z1=m([H("esri.widgets.Feature.FeatureViewModel")],xi);const GD=xi,Hn="esri-feature",mr={base:Hn,container:`${Hn}__size-container`,title:`${Hn}__title`,main:`${Hn}__main-container`,btn:`${Hn}__button`,icon:`${Hn}__icon`,content:`${Hn}__content`,contentNode:`${Hn}__content-node`,contentNodeText:`${Hn}__content-node--text`,contentElement:`${Hn}__content-element`,text:`${Hn}__text`,lastEditedInfo:`${Hn}__last-edited-info`,fields:`${Hn}__fields`,fieldHeader:`${Hn}__field-header`,fieldData:`${Hn}__field-data`,fieldDataDate:`${Hn}__field-data--date`,loadingSpinnerContainer:`${Hn}__loading-container`},sde=e=>{let t=class extends e{constructor(){super(...arguments),this.renderNodeContent=i=>ky(i)&&!i.destroyed?G("div",{class:mr.contentNode,key:i},i.render()):i instanceof HTMLElement?G("div",{afterCreate:this._attachToNode,bind:i,class:mr.contentNode,key:i}):Pue(i)?G("div",{afterCreate:this._attachToNode,bind:i.domNode,class:mr.contentNode,key:i}):null}_attachToNode(i){const r=this;i.appendChild(r)}};return t=m([H("esri.widgets.Feature.support.FeatureContentMixin")],t),t},mJ={title:!0,content:!0,lastEditedInfo:!0};let Mr=class extends sde(bi){constructor(t,i){super(t,i),this._contentWidgets=[],this.flowType="feature",this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.visibleElements={...mJ},this.viewModel=new GD}initialize(){this.addHandles(me(()=>{var t;return(t=this.viewModel)==null?void 0:t.contentViewModels},()=>this._setupContentWidgets(),Je))}loadDependencies(){return cs({notice:()=>ce(()=>import("./calcite-notice-kwETwl5K.js"),__vite__mapDeps([239,240]),import.meta.url),loader:()=>ce(()=>import("./calcite-loader-BYXdEs7m.js"),__vite__mapDeps([232,205]),import.meta.url)})}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(t){this.viewModel.defaultPopupTemplateEnabled=t}get isTable(){return this.viewModel.isTable}get icon(){return"polygon"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get location(){return this.viewModel.location}set location(t){this.viewModel.location=t}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(t){this.viewModel.spatialReference=t}get timeZone(){return this.viewModel.timeZone}set timeZone(t){this.viewModel.timeZone=t}get title(){return this.viewModel.title}castVisibleElements(t){return{...mJ,...t}}get map(){return this.viewModel.map}set map(t){this.viewModel.map=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}setActiveMedia(t,i){return this.viewModel.setActiveMedia(t,i)}nextMedia(t){return this.viewModel.nextMedia(t)}previousMedia(t){return this.viewModel.previousMedia(t)}render(){const{state:t}=this.viewModel,i=G("div",{class:mr.container,key:"container"},this._renderTitle(),t==="error"?this._renderError():t==="loading"?this._renderLoading():this._renderContentContainer());return G("div",{class:this.classes(mr.base,Ge.widget)},i)}_renderError(){const{messagesCommon:t,messages:i,visibleElements:r}=this;return G("calcite-notice",{icon:"exclamation-mark-circle",kind:"danger",open:!0,scale:"s"},r.title?G("div",{key:"error-title",slot:"title"},t.errorMessage):null,G("div",{key:"error-message",slot:"message"},i.loadingError))}_renderLoading(){return G("div",{class:mr.loadingSpinnerContainer,key:"loading-container"},G("calcite-loader",{inline:!0,label:""}))}_renderContentContainer(){const{visibleElements:t}=this;return t.content?G("div",{class:mr.main},[this._renderContent(),this._renderLastEditInfo()]):null}_renderTitle(){const{visibleElements:t,title:i}=this;return t.title?G(Ay,{class:mr.title,innerHTML:i,level:this.headingLevel}):null}_renderContent(){const t=this.viewModel.content,i="content";if(!t)return null;if(Array.isArray(t))return t.length?G("div",{class:mr.contentNode,key:`${i}-content-elements`},t.map(this._renderContentElement,this)):null;if(typeof t=="string"){const r=this._contentWidgets[0];return!r||r.destroyed?null:G("div",{class:this.classes(mr.contentNode,mr.contentNodeText),key:`${i}-content`},r.render())}return this.renderNodeContent(t)}_renderContentElement(t,i){var n;const{visibleElements:r}=this;if(typeof r.content!="boolean"&&!((n=r.content)!=null&&n[t.type]))return null;switch(t.type){case"attachments":return this._renderAttachments(i);case"custom":return this._renderCustom(t,i);case"fields":return this._renderFields(i);case"media":return this._renderMedia(i);case"text":return this._renderText(t,i);case"expression":return this._renderExpression(i);case"relationship":return this._renderRelationship(i);case"utility-network-associations":return this._renderAssociation(i);default:return null}}_renderAttachments(t){const i=this._contentWidgets[t];if(!i||i.destroyed)return null;const{state:r,attachmentInfos:n}=i.viewModel;return r==="loading"||n.length>0?G("div",{class:this.classes(mr.contentElement),key:this._buildKey("attachments-element",t)},i.render()):null}_renderRelationship(t){const i=this._contentWidgets[t];return i&&!i.destroyed&&this.flowItems?G("div",{class:mr.contentElement,key:this._buildKey("relationship-element",t)},i.render()):null}_renderAssociation(t){const i=this._contentWidgets[t];return i&&!i.destroyed&&this.flowItems?G("div",{class:mr.contentElement,key:this._buildKey("utility-network-association-element",t)},i.render()):null}_renderExpression(t){const i=this._contentWidgets[t];return i&&!i.destroyed&&i.viewModel.contentElement?G("div",{class:mr.contentElement,key:this._buildKey("expression-element",t)},i.render()):null}_renderCustom(t,i){const{creator:r}=t,n=this._contentWidgets[i];return!n||n.destroyed?null:r?G("div",{class:mr.contentElement,key:this._buildKey("custom-element",i)},n.render()):null}_renderFields(t){const i=this._contentWidgets[t];return!i||i.destroyed?null:G("div",{class:mr.contentElement,key:this._buildKey("fields-element",t)},i.render())}_renderMedia(t){const i=this._contentWidgets[t];return!i||i.destroyed?null:G("div",{class:mr.contentElement,key:this._buildKey("media-element",t)},i.render())}_renderLastEditInfo(){const{visibleElements:t,messages:i}=this,{lastEditInfo:r}=this.viewModel;if(!r||!t.lastEditedInfo)return null;const{date:n,user:o}=r,u=r.type==="edit"?o?i.lastEditedByUser:i.lastEdited:o?i.lastCreatedByUser:i.lastCreated,f=Rn(u,{date:n,user:o});return G("div",{class:this.classes(mr.lastEditedInfo,mr.contentElement),key:"edit-info-element"},f)}_renderText(t,i){const r=t.text,n=this._contentWidgets[i];return!n||n.destroyed?null:r?G("div",{class:this.classes(mr.contentElement,mr.text),key:this._buildKey("text-element",i)},n.render()):null}_buildKey(t,...i){var r,n;return`${t}__${((n=(r=this.viewModel)==null?void 0:r.graphic)==null?void 0:n.uid)||"0"}-${i.join("-")}`}_destroyContentWidget(t){t&&(t.viewModel=null,!t.destroyed&&t.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach(t=>this._destroyContentWidget(t)),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:t,visibleElements:i,flowItems:r,viewModel:n}=this,o=n==null?void 0:n.content,{contentViewModels:u}=n;if(Array.isArray(o))o.forEach((f,g)=>{if(f.type==="attachments"&&(this._contentWidgets[g]=new SOe({displayType:f.displayType,headingLevel:i.title&&t<6?t+1:t,viewModel:u[g]})),f.type==="fields"&&(this._contentWidgets[g]=new Nue({viewModel:u[g]})),f.type==="media"&&(this._contentWidgets[g]=new uce({viewModel:u[g]})),f.type==="text"&&(this._contentWidgets[g]=new d4({viewModel:u[g]})),f.type==="custom"&&(this._contentWidgets[g]=new d4({viewModel:u[g]})),f.type==="expression"&&(this._contentWidgets[g]=new eUe({viewModel:u[g]})),f.type==="relationship"){const b=new iUe({flowItems:r,featureVisibleElements:i,viewModel:u[g]});this._contentWidgets[g]=b}if(f.type==="utility-network-associations"){const b=new lUe({flowItems:r,parentFeatureViewModel:n,featureVisibleElements:i,viewModel:u[g]});this._contentWidgets[g]=b}},this);else{const f=u[0];f&&!f.destroyed&&(this._contentWidgets[0]=new d4({viewModel:f}))}this.scheduleRender()}};m([w()],Mr.prototype,"flowType",void 0),m([w()],Mr.prototype,"graphic",null),m([w()],Mr.prototype,"defaultPopupTemplateEnabled",null),m([w()],Mr.prototype,"flowItems",void 0),m([w()],Mr.prototype,"headingLevel",void 0),m([w({readOnly:!0})],Mr.prototype,"isTable",null),m([w()],Mr.prototype,"icon",null),m([w()],Mr.prototype,"label",null),m([w()],Mr.prototype,"location",null),m([w(),Xt("esri/widgets/Feature/t9n/Feature")],Mr.prototype,"messages",void 0),m([w(),Xt("esri/t9n/common")],Mr.prototype,"messagesCommon",void 0),m([w()],Mr.prototype,"spatialReference",null),m([w()],Mr.prototype,"timeZone",null),m([w({readOnly:!0})],Mr.prototype,"title",null),m([w()],Mr.prototype,"visibleElements",void 0),m([St("visibleElements")],Mr.prototype,"castVisibleElements",null),m([w()],Mr.prototype,"map",null),m([w()],Mr.prototype,"view",null),m([w({type:GD})],Mr.prototype,"viewModel",void 0),Mr=m([H("esri.widgets.Feature")],Mr);const ode=Mr,ade=Object.freeze(Object.defineProperty({__proto__:null,default:ode},Symbol.toStringTag,{value:"Module"}));let z0=class extends Us.EventedAccessor{constructor(t){super(t),this.location=null,this.screenLocationEnabled=!1,this.view=null,this.addHandles([rn(()=>{const i=this.screenLocationEnabled?this.view:null;return i?[i.size,i.type==="3d"?i.camera:i.viewpoint]:null},()=>this.notifyChange("screenLocation")),me(()=>this.screenLocation,(i,r)=>{i!=null&&r!=null&&this.emit("view-change")})])}destroy(){this.view=null}get screenLocation(){const{location:t,view:i,screenLocationEnabled:r}=this,n=i==null?void 0:i.spatialReference,o=n?xne(t,n).geometry:null;return r&&o&&(i!=null&&i.ready)?i.toScreen(o):null}};m([w()],z0.prototype,"location",void 0),m([w()],z0.prototype,"screenLocation",null),m([w()],z0.prototype,"screenLocationEnabled",void 0),m([w()],z0.prototype,"view",void 0),z0=m([H("esri.widgets.support.AnchorElementViewModel")],z0);const lde=z0;let D4=class extends lde{constructor(t){super(t),this.visible=!1}};m([w()],D4.prototype,"visible",void 0),D4=m([H("esri.widgets.Spinner.SpinnerViewModel")],D4);const ude=D4,z7="esri-spinner",V7={base:z7,spinnerStart:`${z7}--start`,spinnerFinish:`${z7}--finish`};let V0=class extends bi{constructor(t,i){super(t,i),this._animationDelay=500,this._animationPromise=null,this.viewModel=new ude}initialize(){this.addHandles(me(()=>this.visible,t=>this._visibleChange(t)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(t){this.viewModel.location=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get visible(){return this.viewModel.visible}set visible(t){this.viewModel.visible=t}show(t){const{location:i,promise:r}=t??{};i&&(this.viewModel.location=i),this.visible=!0;const n=()=>this.hide();r&&r.catch(()=>{}).then(n)}hide(){this.visible=!1}render(){const{visible:t}=this,{screenLocation:i}=this.viewModel,r=!!i,n=t&&r,o=!t&&r,u={[V7.spinnerStart]:n,[V7.spinnerFinish]:o},f=this._getPositionStyles();return G("div",{class:this.classes(V7.base,u),styles:f})}_visibleChange(t){if(t)return void(this.viewModel.screenLocationEnabled=!0);const i=ym(this._animationDelay);this._animationPromise=i,i.catch(()=>{}).then(()=>{this._animationPromise===i&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:t,view:i}=this.viewModel;if(i==null||t==null)return{};const{padding:r}=i;return{left:t.x-r.left+"px",top:t.y-r.top+"px"}}};m([w()],V0.prototype,"location",null),m([w()],V0.prototype,"view",null),m([w({type:ude})],V0.prototype,"viewModel",void 0),m([w()],V0.prototype,"visible",null),V0=m([H("esri.widgets.Spinner")],V0);const dUe=V0,ws="esri-features",An={icon:`${ws}__icon`,actionImage:`${ws}__action-image`,base:ws,container:`${ws}__container`,contentContainer:`${ws}__content-container`,contentFeature:`${ws}__content-feature`,flowItemCollapsed:`${ws}__flow-item--collapsed`,header:`${ws}__header`,footer:`${ws}__footer`,featureMenuObserver:`${ws}__feature-menu-observer`,actionExit:`${ws}__action--exit`,loader:`${ws}__loader`,featuresHeading:`${ws}__heading`,paginationActionBar:`${ws}__pagination-action-bar`,paginationPrevious:`${ws}__pagination-previous`,paginationNext:`${ws}__pagination-next`},Ly=Oe.ofType({key:"type",defaultKeyValue:"button",base:M2,typeMap:{button:bm,toggle:gT}}),Gp=new bm({icon:"magnifying-glass-plus",id:"zoom-to-feature",title:"{messages.zoom}",className:is.zoomInMagnifyingGlass}),lR=new bm({icon:"trash",id:"remove-selected-feature",title:"{messages.remove}",className:is.trash}),Vg=new bm({icon:"magnifying-glass-plus",id:"zoom-to-clustered-features",title:"{messages.zoom}",className:is.zoomInMagnifyingGlass}),Op=new gT({icon:"table",id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:is.table,value:!1}),Od=Gp.clone();let U0=class extends bi{constructor(t,i){super(t,i),this.messages=null,this.closed=!1,this.closable=!0,this._handleOpenFeature=r=>{this.emit("open-feature",{feature:r})},this._handleZoomToFeature=r=>{this.emit("zoom-to-feature",{featureWidget:r})}}loadDependencies(){return cs({action:()=>ce(()=>import("./calcite-action-e0C_v5mP.js"),__vite__mapDeps([244,238,205]),import.meta.url),"action-bar":()=>ce(()=>import("./calcite-action-bar-Cuj6u15i.js"),__vite__mapDeps([245,246,247,238,205,248,242,249,240,243]),import.meta.url),"action-group":()=>ce(()=>import("./calcite-action-group-BStvxvBS.js"),__vite__mapDeps([250,246,247,238,205,248,242,249,240,243]),import.meta.url),"flow-item":()=>ce(()=>import("./calcite-flow-item-CXm7AXI6.js"),__vite__mapDeps([251,252,247,238,205,248,242,249,240,243,236]),import.meta.url)})}render(){const{flowItems:t}=this,i=t==null?void 0:t.toArray();return G(tue,null,i==null?void 0:i.map(r=>this._renderFlowItem(r)))}_handleCloseClick(){this.emit("close")}_handleExitClick(){this.emit("exit")}_handleDrillInBackClick(){var i;const t=(i=this.flowItems)==null?void 0:i.pop();t&&("showAllEnabled"in t.viewModel&&(t.viewModel.showAllEnabled=!1),t&&(t.viewModel=null,t.destroy()))}_getExitMessage(t){switch(t.flowType){case"feature":case"feature-association":return"";case"feature-relationship":return this.messages.exitRelatedRecords;case"feature-utility-network-associations":case"feature-utility-network-association-type":return this.messages.exitAssociations}}_renderFlowItem(t){const{messages:i,closable:r,closed:n}=this,o="graphic"in t&&!t.isTable,u=t.flowType==="feature-association",f=this._getExitMessage(t),g=i.selectFeature;return G("calcite-flow-item",{bind:this,closable:r,closed:n,description:this._getDrillInFlowItemDescription(t),heading:t.title??"",key:`flow-item-${t.viewModel.uid}`,onCalciteFlowItemBack:b=>{b.preventDefault(),this._handleDrillInBackClick()},onCalciteFlowItemClose:this._handleCloseClick},G("calcite-action",{appearance:"transparent",bind:this,class:An.actionExit,icon:"move-up",key:"exit-action",onclick:this._handleExitClick,slot:"header-actions-start",text:f,title:f}),o?G("calcite-action",{appearance:"transparent",bind:this,icon:"zoom-to-object",key:"open-feature-action",onclick:()=>this._handleOpenFeature(t),slot:"header-actions-end",text:g,title:g}):null,u?G("calcite-action-bar",{expandDisabled:!0,expanded:!0,key:"header-action-bar",scale:"s",slot:"action-bar"},G("calcite-action-group",{overlayPositioning:"fixed",scale:"s"},this._renderDefaultActions(t))):null,G("div",{class:An.container},t.render()))}_renderDefaultActions(t){const i=this._getActionTitle(Od);return G("calcite-action",{active:Od.active,appearance:"solid",bind:this,"data-action-uid":Od.uid,disabled:Od.disabled,icon:Od.icon??"question",indicator:Od.indicator,key:`action-${Od.uid}`,loading:Od.active,onclick:()=>this._handleZoomToFeature(t),scale:"s",text:i,textEnabled:!0,title:i})}_getActionTitle(t){const{messages:i}=this,{id:r}=t,n=t.title??"";return r==="zoom-to-feature"?Rn(n,{messages:i}):n}_getDrillInFlowItemDescription(t){switch(t.flowType){case"feature":case"feature-association":case"feature-utility-network-associations":return t.viewModel.description??"";case"feature-relationship":return t.featureCountDescription;case"feature-utility-network-association-type":return t.description??""}}};m([w()],U0.prototype,"flowItems",void 0),m([w(),Xt("esri/widgets/Features/t9n/Features")],U0.prototype,"messages",void 0),m([w()],U0.prototype,"closed",void 0),m([w()],U0.prototype,"closable",void 0),U0=m([H("esri.widgets.Features.FeaturesDrillIn")],U0);const pUe=U0;let fUe=class{constructor(t){this._observable=new _2,this._set=new Set(t)}get size(){return et(this._observable),this._set.size}add(t){const i=this._set.size;return this._set.add(t),this._set.size!==i&&this._observable.notify(),this}clear(){this._set.size>0&&(this._set.clear(),this._observable.notify())}delete(t){const i=this._set.delete(t);return i&&this._observable.notify(),i}entries(){return et(this._observable),this._set.entries()}forEach(t,i){et(this._observable),this._set.forEach((r,n)=>t.call(i,r,n,this),i)}has(t){return et(this._observable),this._set.has(t)}keys(){return et(this._observable),this._set.keys()}values(){return et(this._observable),this._set.values()}[Symbol.iterator](){return et(this._observable),this._set[Symbol.iterator]()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}};const yUe="OBJECTID";var on;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(on||(on={}));const D3={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],meshSymbol3DFill:[{type:"path",path:"M -10,-8 L 6,0 L 6,6 L -10,6 L -10,-8 Z"},{type:"path",path:"M -10,-8 L -7,-10 L 9,-2 L 6,0 L -10,-8 Z"},{type:"path",path:"M 6,0 L 9,-2 L 9,4 L 6,6 L 6,0 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function mUe(e,t,i){const r=on.size;let n=r,o=r;e<1?n*=.75:e>1&&(o*=1.25);const u=0,f=0;let g=r,b=r;return t&&i&&(n=o=g=b=0),[{type:"path",path:[{command:"M",values:[g,u]},{command:"L",values:[i?g:.875*g,u]},{command:"L",values:[i?n-.5*g:f,o-.5*b]},{command:"L",values:[n-.5*g,o-.5*b]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[g,u]},{command:"L",values:[g,t?u:.125*b]},{command:"L",values:[n-.5*g,t?o-.5*b:b]},{command:"L",values:[n-.5*g,o-.5*b]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n-.5*g,o-.5*b]},{command:"L",values:[i?n-.5*g:f,o-.5*b]},{command:"L",values:[i?n-.5*g:f,t?o-.5*b:b]},{command:"L",values:[n-.5*g,t?o-.5*b:b]},{command:"Z",values:[]}]}]}function gUe(e){const t=on.size,i=.5*e,r=0,n=0;return[{type:"path",path:[{command:"M",values:[n,.7*t*.5]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+i]},{command:"L",values:[n,.7*t+i-.7*t*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+i]},{command:"L",values:[t,i]},{command:"L",values:[t,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,r]},{command:"L",values:[t,r]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[n,.7*t*.5]},{command:"Z",values:[]}]}]}function vUe(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function wUe(e,t){let i=t?on.tallSymbolWidth:e;const r=e,n=t?4:6;i<=on.size?i-=.5*n:i-=n;const o=0,u=0,f=t?.35*i:.5*i;return[{type:"path",path:[{command:"M",values:[.5*i,o]},{command:"L",values:[i,.5*f]},{command:"L",values:[.5*i,f]},{command:"L",values:[u,.5*f]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,.5*f]},{command:"L",values:[.5*i,f]},{command:"L",values:[.5*i,r]},{command:"L",values:[u,r-.5*f]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*i,f]},{command:"L",values:[.5*i,r]},{command:"L",values:[i,r-.5*f]},{command:"L",values:[i,.5*f]},{command:"Z",values:[]}]}]}function bUe(e,t){let i=t?on.tallSymbolWidth:e;const r=e,n=t?4:6;i<=on.size?i-=.5*n:i-=n;const o=.5*i,u=.15*i,f=0,g=r-u;return[{type:"ellipse",cx:.5*i,cy:g,rx:o,ry:u},{type:"path",path:[{command:"M",values:[f,u]},{command:"L",values:[f,g]},{command:"L",values:[i,g]},{command:"L",values:[i,u]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*i,cy:u,rx:o,ry:u}]}function _Ue(e,t){let i=t?on.tallSymbolWidth:e;const r=e,n=t?4:6;i<=on.size?i-=.5*n:i-=n;const o=.15*i,u=r-o;return[{type:"ellipse",cx:.5*i,cy:u,rx:.5*i,ry:o},{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,u]},{command:"L",values:[0,u]},{command:"Z",values:[]}]}]}function SUe(e){let t=e;const i=e,r=6;t<on.size?t-=.5*r:t-=r;const n=.15*t,o=0;return[{type:"path",path:[{command:"M",values:[0,o]},{command:"L",values:[t,o]},{command:"L",values:[.5*t,i-n]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:o,rx:.5*t,ry:n}]}function xUe(e){let t=e;const i=e,r=4;t<on.size?t-=.5*r:t-=r;const n=0,o=0,u=t,f=i,g=Math.floor(e/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*u,n]},{command:"L",values:[u,.5*f-g]},{command:"L",values:[.45*u-g,.5*f+g]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*u,n]},{command:"L",values:[.45*u-g,.5*f+g]},{command:"L",values:[o,.5*f-g]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,.5*f-g]},{command:"L",values:[.45*u-g,.5*f+g]},{command:"L",values:[.45*u,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*u,i]},{command:"L",values:[u,.5*f-g]},{command:"L",values:[.45*u-g,.5*f+g]},{command:"Z",values:[]}]}]}function EUe(e){const t=e,i=2;let r=e;r<on.size?r-=.5*i:r-=i;const n=0,o=0;return[{type:"path",path:[{command:"M",values:[.45*t,n]},{command:"L",values:[t,r]},{command:"L",values:[.45*t,.6*r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*t,n]},{command:"L",values:[.45*t,.6*r]},{command:"L",values:[o,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,r]},{command:"L",values:[.45*t,.6*r]},{command:"L",values:[t,r]},{command:"Z",values:[]}]}]}function af(e,t){return Math.round(Math.min(Math.max(e+255*t*.75,0),255))}function Hht(e,t){if(e==null)return new Ne;if("type"in e&&(e.type==="linear"||e.type==="pattern"))return e;const i=new Ne(e);return new Ne([af(i.r,t),af(i.g,t),af(i.b,t),i.a])}let IUe=0;function TUe(){return IUe++}let $Ue=0;function MUe(){return $Ue++}let CUe=0;function AUe(){return CUe++}const kUe="http://www.w3.org/2000/svg",gJ=we("android"),LUe=we("chrome")||gJ&&gJ>=4?"auto":"optimizeLegibility",OUe={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},RUe=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let lr={},oi={};const PUe=Math.PI;function Bp(e,t){const i=e*(PUe/180);return Math.abs(t*Math.sin(i))+Math.abs(t*Math.cos(i))}function cde(e){return e.map(t=>`${t.command} ${t.values.join(" ")}`).join(" ").trim()}function BD(e,t,i,r,n){if(e){if(e.type==="circle")return G("circle",{cx:e.cx,cy:e.cy,fill:t,"fill-rule":"evenodd",r:e.r,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(e.type==="ellipse")return G("ellipse",{cx:e.cx,cy:e.cy,fill:t,"fill-rule":"evenodd",rx:e.rx,ry:e.ry,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(e.type==="rect")return G("rect",{fill:t,"fill-rule":"evenodd",height:e.height,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,width:e.width,x:e.x,y:e.y});if(e.type==="image")return G("image",{alt:n||"image",height:e.height,href:e.src,preserveAspectRatio:"none",width:e.width,x:e.x,y:e.y});if(e.type==="path"){const o=typeof e.path!="string"?cde(e.path):e.path;return G("path",{d:o,fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width})}if(e.type==="text")return oS(r),G("text",{"dominant-baseline":r.dominantBaseline,fill:t,"fill-rule":"evenodd","font-family":r.font.family,"font-size":r.font.size,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,kerning:r.kerning,rotate:r.rotate,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,"text-anchor":r.align,"text-decoration":r.decoration,"text-rendering":LUe,x:e.x,y:e.y},e.text)}return null}function qD(e){if(!e)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in e))return{fill:new Ne(e).toString(),pattern:null,linearGradient:null};if(e.type==="pattern"){const i=`patternId-${TUe()}`;return{fill:`url(#${i})`,pattern:{id:i,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}},linearGradient:null}}const t=`linearGradientId-${MUe()}`;return{fill:`url(#${t})`,pattern:null,linearGradient:{id:t,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map(i=>({offset:i.offset,color:i.color&&new Ne(i.color).toString()}))}}}function HD(e){const t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return e&&(e.width!=null&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=new Ne(e.color).toString()),e.dashArray&&(t.dashArray=e.dashArray),e.dashoffset&&(t.dashOffset=e.dashoffset),e.style&&!e.dashArray&&(t.dashArray=Kue(e).join(",")||"none")),t}function hde(e,t){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(e){const r=e.alignBaseline,n=r==="baseline"?"auto":r==="top"?"text-top":r==="bottom"?"hanging":r;i.align=e.align,i.dominantBaseline=n,i.decoration=e.decoration,i.kerning=e.kerning?"auto":"0",i.rotate=e.rotated?"90":"0",oS(t),i.font.style=t.style||"normal",i.font.variant=t.variant||"normal",i.font.weight=t.weight||"normal",i.font.size=t.size&&t.size.toString()||"10pt",i.font.family=t.family||"serif"}return i}function dde(e){const{pattern:t,linearGradient:i}=e;if(t)return G("pattern",{height:t.height,id:t.id,patternUnits:"userSpaceOnUse",width:t.width,x:t.x,y:t.y},G("image",{height:t.image.height,href:t.image.href,width:t.image.width,x:t.image.x,y:t.image.y}));if(i){const r=i.stops.map((n,o)=>G("stop",{key:`${o}-stop`,offset:n.offset,"stop-color":n.color}));return G("linearGradient",{gradientUnits:"userSpaceOnUse",id:i.id,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2},r)}return null}function NUe(e,t){if(!e||e.length===0)return null;const i=[];for(const r of e){const{shape:n,fill:o,stroke:u,font:f}=r,g=qD(o),b=HD(u),E=n.type==="text"?hde(n,f):null,I=BD(n,g.fill,b,E);I&&i.push(I)}return G("mask",{id:t,maskUnits:"userSpaceOnUse"},G("g",null,i))}function vJ(e,t,i){return Zv(e,TT(e),[t,i])}function wJ(e,t,i,r,n){return $T(e,TT(e),[t,i]),e[4]=e[4]*t-r*t+r,e[5]=e[5]*i-n*i+n,e}function FUe(e,t,i,r){const n=t%360*Math.PI/180;CS(e,TT(e),n);const o=Math.cos(n),u=Math.sin(n),f=e[4],g=e[5];return e[4]=f*o-g*u+r*u-i*o+i,e[5]=g*o+f*u-i*u-r*o+r,e}function Bs(e,t){lr&&"left"in lr?(lr.left!=null&&lr.left>e&&(lr.left=e),(lr.right==null||lr.right<e)&&(lr.right=e),(lr.top==null||lr.top>t)&&(lr.top=t),(lr.bottom==null||lr.bottom<t)&&(lr.bottom=t)):lr={left:e,bottom:t,right:e,top:t}}function bJ(e){const t=e.args,i=t.length;let r;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<i;r+=2)Bs(t[r],t[r+1]);oi.x=t[i-2],oi.y=t[i-1];break;case"H":for(r=0;r<i;++r)Bs(t[r],oi.y);oi.x=t[i-1];break;case"V":for(r=0;r<i;++r)Bs(oi.x,t[r]);oi.y=t[i-1];break;case"m":{let n=0;for(("x"in oi)||(Bs(oi.x=t[0],oi.y=t[1]),n=2),r=n;r<i;r+=2)Bs(oi.x+=t[r],oi.y+=t[r+1]);break}case"l":case"t":for(r=0;r<i;r+=2)Bs(oi.x+=t[r],oi.y+=t[r+1]);break;case"h":for(r=0;r<i;++r)Bs(oi.x+=t[r],oi.y);break;case"v":for(r=0;r<i;++r)Bs(oi.x,oi.y+=t[r]);break;case"c":for(r=0;r<i;r+=6)Bs(oi.x+t[r],oi.y+t[r+1]),Bs(oi.x+t[r+2],oi.y+t[r+3]),Bs(oi.x+=t[r+4],oi.y+=t[r+5]);break;case"s":case"q":for(r=0;r<i;r+=4)Bs(oi.x+t[r],oi.y+t[r+1]),Bs(oi.x+=t[r+2],oi.y+=t[r+3]);break;case"A":for(r=0;r<i;r+=7)Bs(t[r+5],t[r+6]);oi.x=t[i-2],oi.y=t[i-1];break;case"a":for(r=0;r<i;r+=7)Bs(oi.x+=t[r+5],oi.y+=t[r+6])}}function _J(e,t,i){const r=OUe[e.toLowerCase()];let n;typeof r=="number"&&(r?t.length>=r&&(n={action:e,args:t.slice(0,t.length-t.length%r)},i.push(n),bJ(n)):(n={action:e,args:[]},i.push(n),bJ(n)))}function DUe(e){const t=(typeof e.path!="string"?cde(e.path):e.path).match(RUe),i=[];if(lr={},oi={},!t)return null;let r="",n=[];const o=t.length;for(let f=0;f<o;++f){const g=t[f],b=parseFloat(g);isNaN(b)?(r&&_J(r,n,i),n=[],r=g):n.push(b)}_J(r,n,i);const u={x:0,y:0,width:0,height:0};return lr&&"left"in lr&&(u.x=lr.left,u.y=lr.top,u.width=lr.right-lr.left,u.height=lr.bottom-lr.top),u}function pde(e){const t={x:0,y:0,width:0,height:0};if(e.type==="circle")t.x=e.cx-e.r,t.y=e.cy-e.r,t.width=2*e.r,t.height=2*e.r;else if(e.type==="ellipse")t.x=e.cx-e.rx,t.y=e.cy-e.ry,t.width=2*e.rx,t.height=2*e.ry;else if(e.type==="image"||e.type==="rect")t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height;else if(e.type==="path"){const i=DUe(e);t.x=i.x,t.y=i.y,t.width=i.width,t.height=i.height}return t}function fde(e){const t={x:0,y:0,width:0,height:0};let i=null,r=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(const o of e)i?(i.x=Math.min(i.x,o.x),i.y=Math.min(i.y,o.y),r=Math.max(r,o.x+o.width),n=Math.max(n,o.y+o.height)):(i=t,i.x=o.x,i.y=o.y,r=o.x+o.width,n=o.y+o.height);return i&&(i.width=r-i.x,i.height=n-i.y),i}function uR(e,t,i,r,n,o,u,f,g){let b=(u&&o?Bp(o,t):t)/2,E=(u&&o?Bp(o,i):i)/2;if(g){const z=g[0],V=g[1];b=(u&&o?Bp(o,z):z)/2,E=(u&&o?Bp(o,V):V)/2}const I=e.width+r,M=e.height+r,k=xI(),L=xI();let P=!1;if(n&&I!==0&&M!==0){const z=t!==i?t/i:I/M,V=t>i?t:i;let W=1,Q=1;isNaN(V)||(z>1?(W=V/I,Q=V/z/M):(Q=V/M,W=V*z/I)),ey(L,L,wJ(k,W,Q,b,E)),P=!0}const D=e.x+(I-r)/2,j=e.y+(M-r)/2;if(ey(L,L,vJ(k,b-D,E-j)),!P&&(I>t||M>i)){const z=I/t>M/i,V=(z?t:i)/(z?I:M);ey(L,L,wJ(k,V,V,D,j))}return f&&ey(L,L,vJ(k,f[0],f[1])),o&&ey(L,L,FUe(k,o,D,j)),`matrix(${L[0]},${L[1]},${L[2]},${L[3]},${L[4]},${L[5]})`}function jUe(e,t,i){const r=e==null?void 0:e.effects.find(b=>b.type==="bloom");if(!r)return null;const{strength:n,radius:o}=r,u=n>0?o:0,f=(n+u)*t,g=4*n+1;return G("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${i}`,width:"300%",x:"-100%",y:"-100%"},G("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(n+.5*u)*(5**(t/100)*(.4+t/100)),result:"dilate"}),G("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:f/25}),G("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:f/50}),G("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},G("feFuncR",{slope:g,type:"linear"}),G("feFuncG",{slope:g,type:"linear"}),G("feFuncB",{slope:g,type:"linear"})),G("feMerge",null,G("feMergeNode",{in:"intensityBlur"}),G("feMergeNode",{in:"intensityBrightness"}),G("feGaussianBlur",{stdDeviation:n/10})))}function yde(e,t,i,r={}){var M,k,L;const n=[],o=[],u=AUe(),f=jUe(r.effectView,t,u);let g=null;if(f){const P=(M=r.effectView)==null?void 0:M.effects.find(V=>V.type==="bloom"),D=(P.strength?P.strength+P.radius/2:0)/3,j=t+t*D,z=i+i*D;g=[Math.max(j,10),Math.max(z,10)]}let b=t,E=i;if(r.useRotationSize)for(let P=0;P<e.length;P++){const D=((k=r.rotations)==null?void 0:k[P])??0;b=Math.max(Bp(D,t),b),E=Math.max(Bp(D,i),E)}for(let P=0;P<e.length;P++){const D=e[P],j=[],z=[];let V=0,W=0,Q=0;for(const oe of D){const{shape:le,fill:xe,stroke:$e,font:Te,offset:de}=oe;r.ignoreStrokeWidth||le.type==="text"||(V+=($e==null?void 0:$e.width)||0);const se=qD(xe),ye=HD($e),ue=le.type==="text"?hde(le,Te):null;n.push(dde(se)),j.push(BD(le,se.fill,ye,ue,r.ariaLabel)),z.push(pde(le)),de&&(W+=de[0],Q+=de[1])}const Z=((L=r.rotations)==null?void 0:L[P])??0;r.useRotationSize&&(W+=(b-Bp(Z,t))/2,Q+=(E-Bp(Z,i))/2);const ee=uR(fde(z),t,i,V,r.scale??!1,Z,r.useRotationSize??!1,[W,Q],g);let ie=null;if(r.masking){const oe=`mask-${P}`,le=r.masking[P];n.push(NUe(le,oe)),ie=`url(#${oe})`}o.push(ie?G("g",{mask:ie},G("g",{transform:ee},j)):G("g",{transform:ee},j))}return f&&(oS(g),b=g[0],E=g[1]),G("svg",{"aria-label":r.ariaLabel,focusable:!1,height:E,role:"img",style:"display: block;",width:b,xmlns:kUe},f,G("defs",null,n),f?G("g",{filter:`url(#bloom${u})`},o):o)}const SJ=fI();function zUe(e,t){SJ.append(e,t),SJ.detach(t)}function zS(e,t,i){const r=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!e.some(u=>!!u.length))return null;const o=(i==null?void 0:i.node)||document.createElement("div");return i.opacity!=null&&(o.style.opacity=i.opacity.toString()),i.effectView!=null&&(o.style.filter=P_(i.effectView)),zUe(o,()=>yde(e,r,n,i)),o}function VUe(e,t){e=Math.ceil(e),t=Math.ceil(t);const i=document.createElement("canvas");i.width=e,i.height=t,i.style.width=e+"px",i.style.height=t+"px";const r=i.getContext("2d");return r.clearRect(0,0,e,t),r}function UUe(e,t,i){return e?Ct(e,{responseType:"image"}).then(r=>{const n=r.data,o=n.width,u=n.height,f=o/u;let g=t;if(i){const b=Math.max(o,u);g=Math.min(g,b)}return{image:n,width:f<=1?Math.ceil(g*f):g,height:f<=1?g:Math.ceil(g/f)}}):Promise.reject(new ne("renderUtils: imageDataSize","href not provided."))}function GUe(e,t){return!(!e||t==="ignore")&&(t!=="multiply"||e.r!==255||e.g!==255||e.b!==255||e.a!==1)}function BUe(e,t,i,r,n){switch(n){case"multiply":e[t]*=i[0],e[t+1]*=i[1],e[t+2]*=i[2],e[t+3]*=i[3];break;default:{const o=ZT({r:e[t],g:e[t+1],b:e[t+2]});o.h=r.h,o.s=r.s,o.v=o.v/100*r.v;const u=Tm(o);e[t]=u.r,e[t+1]=u.g,e[t+2]=u.b,e[t+3]*=i[3];break}}}function qUe(e,t,i,r,n){return UUe(e,t,n).then(o=>{const u=o.width??t,f=o.height??t;if(o.image&&GUe(i,r)){let g=o.image.width,b=o.image.height;we("edge")&&/\.svg$/i.test(e)&&(g-=1,b-=1);const E=VUe(u,f);E.drawImage(o.image,0,0,g,b,0,0,u,f);const I=E.getImageData(0,0,u,f),M=[i.r/255,i.g/255,i.b/255,i.a],k=ZT(i);for(let L=0;L<I.data.length;L+=4)BUe(I.data,L,M,k,r);E.putImageData(I,0,0),e=E.canvas.toDataURL("image/png")}else{const g=Et==null?void 0:Et.findCredential(e);if(g!=null&&g.token){const b=e.includes("?")?"&":"?";e=`${e}${b}token=${g.token}`}}return{url:e,width:u,height:f}}).catch(()=>({url:e,width:t,height:t}))}const mde="esri-relationship-ramp",Km=`${mde}--diamond`,Rd=`${mde}--square`,HUe="http://www.w3.org/2000/svg",Ci={diamondContainer:`${Km}__container`,diamondLeftCol:`${Km}__left-column`,diamondRightCol:`${Km}__right-column`,diamondMidCol:`${Km}__middle-column`,diamondMidColLabel:`${Km}__middle-column--label`,diamondMidColRamp:`${Km}__middle-column--ramp`,squareTable:`${Rd}__table`,squareTableRow:`${Rd}__table-row`,squareTableCell:`${Rd}__table-cell`,squareTableLabel:`${Rd}__table-label`,squareTableLabelLeftBottom:`${Rd}__table-label--left-bottom`,squareTableLabelRightBottom:`${Rd}__table-label--right-bottom`,squareTableLabelLeftTop:`${Rd}__table-label--left-top`,squareTableLabelRightTop:`${Rd}__table-label--right-top`};function gde(e,t,i={}){const{focus:r,labels:n}=e,o=!!r,u=WUe(e,t,i),f={justifyContent:"center"},g=ha(),b=i.key??t;return o?G("div",{class:Ci.diamondContainer,key:`${b}-container`,styles:f},G("div",{class:Ci.diamondLeftCol},g?n.right:n.left),G("div",{class:Ci.diamondMidCol},G("div",{class:Ci.diamondMidColLabel},n.top),u,G("div",{class:Ci.diamondMidColLabel},n.bottom)),G("div",{class:Ci.diamondRightCol},g?n.left:n.right)):G("div",{class:Ci.squareTable,key:`${b}-container`},G("div",{class:Ci.squareTableRow},G("div",{class:Lg(Ci.squareTableCell,Ci.squareTableLabel,Ci.squareTableLabelRightBottom)},g?n.top:n.left),G("div",{class:Ci.squareTableCell}),G("div",{class:Lg(Ci.squareTableCell,Ci.squareTableLabel,Ci.squareTableLabelLeftBottom)},g?n.left:n.top)),G("div",{class:Ci.squareTableRow},G("div",{class:Ci.squareTableCell}),u,G("div",{class:Ci.squareTableCell})),G("div",{class:Ci.squareTableRow},G("div",{class:Lg(Ci.squareTableCell,Ci.squareTableLabel,Ci.squareTableLabelRightTop)},g?n.right:n.bottom),G("div",{class:Ci.squareTableCell}),G("div",{class:Lg(Ci.squareTableCell,Ci.squareTableLabel,Ci.squareTableLabelLeftTop)},g?n.bottom:n.right)))}function xJ(e,t,i){const r=`${i}_arrowStart`,n=`${i}_arrowEnd`,o=e==="left",u={markerStart:null,markerEnd:null};switch(t){case"HL":o?u.markerStart=`url(#${n})`:u.markerEnd=`url(#${r})`;break;case"LL":u.markerStart=`url(#${n})`;break;case"LH":o?u.markerEnd=`url(#${r})`:u.markerStart=`url(#${n})`;break;default:u.markerEnd=`url(#${r})`}return u}function WUe(e,t,i={}){const{focus:r,numClasses:n,colors:o,rotation:u}=e,{opacity:f,effectList:g,ariaLabel:b}=i,E=i.size??60,I=!!r,M=Math.sqrt(E**2+E**2)+(I?0:5),k=[],L=[],P=[],D=(E||75)/n;for(let $e=0;$e<n;$e++){const Te=$e*D;for(let de=0;de<n;de++){const se=de*D,ye=qD(o[$e][de]),ue=HD(null),pe={type:"rect",x:se,y:Te,width:D,height:D},_e=dde(ye);_e&&k.push(_e);const Le=BD(pe,ye.fill,ue,null);Le&&L.push(Le),P.push(pde(pe))}}const j=10,z=15,V=15,W=10;let Q=null;I||(Q="margin: -15px -15px -18px -15px");const Z=xJ("left",r,t),ee=xJ("right",r,t),ie=fde(P),oe=uR(ie,M,M,0,!1,u,!1),le=uR(ie,M,M,0,!1,I?-45:null,!1),xe={filter:P_(g)??void 0,opacity:f==null?"":`${f}`};return G("div",{class:I?Ci.diamondMidColRamp:Ci.squareTableCell,styles:xe},G("svg",{"aria-label":b,focusable:!1,height:M,role:"image",style:Q,width:M,xmlns:HUe},G("defs",null,G("marker",{id:`${t}_arrowStart`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"5",refY:"5"},G("polyline",{fill:"none",points:"0,0 5,5 0,10",stroke:"#555555","stroke-width":"1"})),G("marker",{id:`${t}_arrowEnd`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"0",refY:"5"},G("polyline",{fill:"none",points:"5,0 0,5 5,10",stroke:"#555555","stroke-width":"1"})),k),G("g",{transform:oe},L),G("g",{transform:le},G("line",{fill:"none","marker-end":Z.markerEnd,"marker-start":Z.markerStart,stroke:"#555555","stroke-width":"1",x1:-j,x2:-j,y1:E-z,y2:z}),G("line",{fill:"none","marker-end":ee.markerEnd,"marker-start":ee.markerStart,stroke:"#555555","stroke-width":"1",x1:V,x2:E-V,y1:E+W,y2:E+W}))))}function ZUe(e){return e=e||globalThis.location.hostname,JUe.some(t=>(e==null?void 0:e.match(t))!=null)}function EJ(e,t){return e?(t=t||globalThis.location.hostname)?t.match(vde)!=null||t.match(bde)!=null?e.replace("static.arcgis.com","staticdev.arcgis.com"):t.match(wde)!=null||t.match(_de)!=null?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e:null}const vde=/^devext\.arcgis\.com$/,wde=/^qaext\.arcgis\.com$/,bde=/^[\w-]*\.mapsdevext\.arcgis\.com$/,_de=/^[\w-]*\.mapsqa\.arcgis\.com$/,JUe=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local\.esri\.com$/,vde,wde,/^jsapps\.esri\.com$/,bde,_de];function Sde(e,t,i,r){const n=e.name;return n==null?Promise.reject(new ne("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):e.styleName==="Esri2DPointSymbolsStyle"?KUe(n,t,r):che(e,t,r).then(o=>Ede(o,n,t,i,ADe,r))}function xde(e,t){return t.items.find(i=>i.name===e)}function Ede(e,t,i,r,n,o){var k,L;const u=(i==null?void 0:i.portal)!=null?i.portal:Ur.getDefault(),f={portal:u,url:_r(e.baseUrl),origin:"portal-item"},g=xde(t,e.data);if(!g){const P=`The symbol name '${t}' could not be found`;return Promise.reject(new ne("symbolstyleutils:symbol-name-not-found",P,{symbolName:t}))}let b=mf(n(g,r),f),E=((k=g.thumbnail)==null?void 0:k.href)??null;const I=(L=g.thumbnail)==null?void 0:L.imageData;ZUe()&&(b=EJ(b)??"",E=EJ(E));const M={portal:u,url:_r(TN(b)),origin:"portal-item"};return $D(b,o).then(P=>{const D=r==="cimRef"?hhe(P.data):P.data,j=Mce(D,M);if(j&&Pc(j)){if(E){const z=mf(E,f);j.thumbnail=new $y({url:z})}else I&&(j.thumbnail=new $y({url:`data:image/png;base64,${I}`}));e.styleUrl?j.styleOrigin=new E_({portal:i.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(j.styleOrigin=new E_({portal:i.portal,styleName:e.styleName,name:t}))}return j})}function KUe(e,t,i){const r=kDe.replaceAll(/\{SymbolName\}/gi,e),n=t.portal!=null?t.portal:Ur.getDefault();return $D(r,i).then(o=>{const u=hhe(o.data);return Mce(u,{portal:n,url:_r(TN(r)),origin:"portal-item"})})}const YUe=Object.freeze(Object.defineProperty({__proto__:null,fetchSymbolFromStyle:Ede,getStyleItemFromStyle:xde,resolveWebStyleSymbol:Sde},Symbol.toStringTag,{value:"Module"})),sy=on.size,j4=on.maxSize,WD=on.maxOutlineSize,IJ=on.lineWidth,cR=on.tallSymbolWidth;function Ug(e){const t=e.outline,i=e.material!=null?e.material.color:null,r=i!=null?i.toHex():null;if(t==null||"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"&&t.pattern.style==="none")return e.type==="fill"&&r==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const n=hr(t.size)||0;return{color:"rgba("+(t.color!=null?t.color.toRgba():"255,255,255,1")+")",width:Math.min(n,WD),style:"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"?dD(t.pattern.style):null,join:"butt",cap:"patternCap"in t?t.patternCap:"butt"}}async function XUe(e,t){var r,n,o;if((r=e.thumbnail)!=null&&r.url)return e.thumbnail.url;if(t.type==="icon"&&((n=t==null?void 0:t.resource)==null?void 0:n.href))return ARe(t);const i=Vt("esri/images/Legend/legend3dsymboldefault.png");if(e.styleOrigin&&(e.styleOrigin.styleName||e.styleOrigin.styleUrl)){const u=await Sde(e.styleOrigin,{portal:e.styleOrigin.portal},"webRef").catch(()=>null);if(u&&"thumbnail"in u&&((o=u.thumbnail)!=null&&o.url))return u.thumbnail.url}return i}function U7(e,t=1){const i=e.a,r=ZT(e),n=r.h,o=r.s/t,u=100-(100-r.v)/t,{r:f,g,b}=Tm({h:n,s:o,v:u});return[f,g,b,i]}function WI(e){var t;return e.type==="water"?e.color==null?null:e.color:((t=e.material)==null?void 0:t.color)==null?null:e.material.color}function ii(e,t=0){const i=WI(e);if(!i){if(e.type==="fill")return null;const n=TRe.r,o=af(n,t);return[o,o,o,100]}const r=i.toRgba();for(let n=0;n<3;n++)r[n]=af(r[n],t);return r}async function Ide(e,t){const i=e.style;return i==="none"?null:{type:"pattern",x:0,y:0,src:await IRe(Vt(`esri/symbols/patterns/${i}.png`),t.toCss(!0)),width:5,height:5}}function TJ(e){return e.outline?Ug(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function ZD(e,t){const i=WI(e);if(!i)return null;let r="rgba(";return r+=af(i.r,t)+",",r+=af(i.g,t)+",",r+=af(i.b,t)+",",r+i.a+");"}function hR(e,t){const i=ZD(e,t);return i?"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"&&e.pattern.style==="none"?null:{color:i,width:Math.min(e.size?hr(e.size):.75,WD),style:"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"?dD(e.pattern.style):null,cap:"cap"in e?e.cap:null,join:"join"in e?e.join==="miter"?hr(2):e.join:null}:{}}function bx(e,t,i){const r=i!=null?.75*i:0;return{type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function QUe(e){const t=e.depth,i=e.height,r=e.width;return r!==0&&t!==0&&i!==0&&r===t&&r!=null&&i!=null&&r<i}function eGe(e,t,i){var n,o;const r=[];if(!e)return r;switch(e.type){case"icon":{const g=t,b=t;switch(((n=e.resource)==null?void 0:n.primitive)??FTe){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:ii(e,0),stroke:Ug(e)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[0,b]},{command:"L",values:[0,0]},{command:"L",values:[g,0]},{command:"L",values:[g,b]},{command:"Z",values:[]}]},fill:ii(e,0),stroke:Ug(e)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[0,b]},{command:"L",values:[.5*g,0]},{command:"L",values:[g,b]},{command:"Z",values:[]}]},fill:ii(e,0),stroke:Ug(e)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*g,0]},{command:"L",values:[.5*g,b]},{command:"M",values:[0,.5*b]},{command:"L",values:[g,.5*b]}]},stroke:TJ(e)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[g,b]},{command:"M",values:[g,0]},{command:"L",values:[0,b]}]},stroke:TJ(e)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*b]},{command:"L",values:[.5*g,0]},{command:"L",values:[g,.5*b]},{command:"L",values:[.5*g,b]},{command:"Z",values:[]}]},fill:ii(e,0),stroke:Ug(e)})}break}case"object":switch(((o=e.resource)==null?void 0:o.primitive)??VTe){case"cone":{const u=bx(ii(e,0),ii(e,-.6),i?cR:t),f=_Ue(t,i);r.push({shape:f[0],fill:u},{shape:f[1],fill:u});break}case"inverted-cone":{const u=ii(e,0),f=bx(u,ii(e,-.6),t),g=SUe(t);r.push({shape:g[0],fill:f},{shape:g[1],fill:u});break}case"cube":{const u=wUe(t,i);r.push({shape:u[0],fill:ii(e,0)},{shape:u[1],fill:ii(e,-.3)},{shape:u[2],fill:ii(e,-.5)});break}case"cylinder":{const u=bx(ii(e,0),ii(e,-.6),i?cR:t),f=bUe(t,i);r.push({shape:f[0],fill:u},{shape:f[1],fill:u},{shape:f[2],fill:ii(e,0)});break}case"diamond":{const u=xUe(t);r.push({shape:u[0],fill:ii(e,-.3)},{shape:u[1],fill:ii(e,0)},{shape:u[2],fill:ii(e,-.3)},{shape:u[3],fill:ii(e,-.7)});break}case"sphere":{const u=bx(ii(e,0),ii(e,-.6));u.x1=0,u.y1=0,u.x2=.25*t,u.y2=.25*t,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:u});break}case"tetrahedron":{const u=EUe(t);r.push({shape:u[0],fill:ii(e,-.3)},{shape:u[1],fill:ii(e,0)},{shape:u[2],fill:ii(e,-.6)});break}}break}return r}function t$(e){const t=typeof(e==null?void 0:e.size)=="number"?e==null?void 0:e.size:null;return t?hr(t):null}function tGe(e){return e.type==="icon"?"multiply":"tint"}async function iGe(e,t){const i=t$(t),r=t!=null&&t.maxSize?hr(t.maxSize):null,n=(t==null?void 0:t.disableUpsampling)??!1,o=e.symbolLayers,u=[],f=[];let g=!1,b=0,E=0,I=0;o.forEach(L=>{var z,V,W,Q;if(L.type!=="icon"&&L.type!=="object")return;L&&L.type==="icon"&&(I=Math.max(L.size&&hr(L.size),I));const P=L.type==="icon"?L.size&&hr(L.size):0,D=i||P?Math.ceil(Math.min(i||P,r||j4)):sy;let j=L.type==="icon"?L.angle:null;if((t==null?void 0:t.rotation)!=null&&(j=(j??0)+t.rotation),f.push(j),(z=L==null?void 0:L.resource)==null?void 0:z.href){const Z=XUe(e,L).then(ee=>{var le;const ie=(le=L==null?void 0:L.material)==null?void 0:le.color,oe=tGe(L);return qUe(ee,D,ie,oe,n)}).then(ee=>{const ie=ee.width,oe=ee.height;return b=Math.max(b,ie),E=Math.max(E,oe),j&&(g=!0),[{shape:{type:"image",x:0,y:0,width:ie,height:oe,src:ee.url},fill:null,stroke:null}]});u.push(Z)}else{let Z=D;L.type==="icon"&&i&&(Z=D*(P/I));const ee=(t==null?void 0:t.symbolConfig)==="tall"||((V=t==null?void 0:t.symbolConfig)==null?void 0:V.isTall)||L.type==="object"&&QUe(L);b=Math.max(b,ee?cR:Z),E=Math.max(E,Z),j&&((W=L.resource)!=null&&W.primitive)&&["square","triangle","x"].includes((Q=L.resource)==null?void 0:Q.primitive)&&(g=!0),u.push(Promise.resolve(eGe(L,Z,ee)))}});const M=await Promise.allSettled(u),k=[];return M.forEach(L=>{L.status==="fulfilled"?k.push(L.value):L.reason&&Se.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",L.reason)}),zS(k,[b,E],{node:t==null?void 0:t.node,scale:!1,opacity:t==null?void 0:t.opacity,ariaLabel:t==null?void 0:t.ariaLabel,rotations:f,useRotationSize:g})}function rGe(e,t){const i=e.symbolLayers,r=[],n=UT(e),o=t$(t),u=(t!=null&&t.maxSize?hr(t.maxSize):null)||WD;let f,g=0,b=0;return i.forEach((E,I)=>{if(!E||E.type!=="line"&&E.type!=="path")return;const M=[];switch(E.type){case"line":{const k=hR(E,0);if(k==null)break;const L=(k==null?void 0:k.width)||0;I===0&&(f=L);const P=Math.min(o||L,u),D=I===0?P:o?P*(L/f):P,j=D>IJ/2?2*D:IJ;b=Math.max(b,D),g=Math.max(g,j),k.width=D,M.push({shape:{type:"path",path:[{command:"M",values:[0,.5*b]},{command:"L",values:[g,.5*b]}]},stroke:k});break}case"path":{const k=Math.min(o||sy,u),L=ii(E,0),P=ii(E,-.2),D=ZD(E,-.4),j=D?{color:D,width:1}:{};if(E.profile==="quad"){const z=E.width,V=E.height,W=mUe(z&&V?z/V:1,V===0,z===0),Q={...j,join:"bevel"};M.push({shape:W[0],fill:P,stroke:Q},{shape:W[1],fill:P,stroke:Q},{shape:W[2],fill:L,stroke:Q})}else M.push({shape:D3.pathSymbol3DLayer[0],fill:P,stroke:j},{shape:D3.pathSymbol3DLayer[1],fill:L,stroke:j});b=Math.max(b,k),g=b}}r.push(M)}),Promise.resolve(zS(r,[g,b],{node:t==null?void 0:t.node,scale:n,opacity:t==null?void 0:t.opacity,ariaLabel:t==null?void 0:t.ariaLabel}))}async function nGe(e,t){const i=e.type==="mesh-3d",r=e.symbolLayers,n=t$(t),o=t!=null&&t.maxSize?hr(t.maxSize):null,u=n||sy,f=[];let g=0,b=0,E=!1;for(let I=0;I<r.length;I++){const M=r.at(I),k=[];if(!i||M.type==="fill"){switch(M.type){case"fill":{const L=Math.min(u,o||j4);if(g=Math.max(g,L),b=Math.max(b,L),E=!0,i){const P=D3.meshSymbol3DFill,D=ZD(M,-.4),j=D?{color:D,width:1,join:"round"}:{};k.push({shape:P[0],fill:ii(M,0),stroke:j},{shape:P[1],fill:ii(M,-.2),stroke:j},{shape:P[2],fill:ii(M,-.6),stroke:j})}else{let P=ii(M,0);const D="pattern"in M?M.pattern:null,j=Ug(M),z=WI(M);D!=null&&D.type==="style"&&D.style!=="solid"&&z&&(P=await Ide(D,z)),k.push({shape:D3.fill[0],fill:P,stroke:j})}break}case"line":{const L=hR(M,0);if(L==null)break;const P={stroke:L,shape:D3.fill[0]};g=Math.max(g,sy),b=Math.max(b,sy),k.push(P);break}case"extrude":{const L={join:"round",width:1,...hR(M,-.4)},P=ii(M,0),D=ii(M,-.2),j=Math.min(u,o||j4),z=gUe(j);L.width=1,k.push({shape:z[0],fill:D,stroke:L},{shape:z[1],fill:D,stroke:L},{shape:z[2],fill:P,stroke:L});const V=sy,W=.7*sy+.5*j;g=Math.max(g,V),b=Math.max(b,W);break}case"water":{const L=WI(M),P=U7(L),D=U7(L,2),j=U7(L,3),z=vUe();E=!0,k.push({shape:z[0],fill:P},{shape:z[1],fill:D},{shape:z[2],fill:j});const V=Math.min(u,o||j4);g=Math.max(g,V),b=Math.max(b,V);break}}f.push(k)}}return zS(f,[g,b],{node:t==null?void 0:t.node,scale:E,opacity:t==null?void 0:t.opacity,ariaLabel:t==null?void 0:t.ariaLabel})}function sGe(e,t){if(e.symbolLayers.length===0)return Promise.reject(new ne("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(e.type){case"point-3d":return iGe(e,t);case"line-3d":return rGe(e,t);case"polygon-3d":case"mesh-3d":return nGe(e,t)}return Promise.reject(new ne("symbolPreview: swatchInfo3D","symbol not supported."))}const oGe=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:Ide,getSizeFromOptions:t$,getSymbolLayerFill:ii,previewSymbol3D:sGe},Symbol.toStringTag,{value:"Module"})),$J={HH:315,HL:45,LL:135,LH:225},aGe={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function lGe(e){if(!e)return;const{type:t}=e;if(t.includes("3d"))return ii(e.symbolLayers.at(0));if(t==="simple-line"){const i=O_(e);return i&&i.color}if(e.type==="simple-marker"&&(e.style==="x"||e.style==="cross")){const i=O_(e);return i&&i.color}return ERe(e)}function uGe(e,t){const i=t.HH.label,r=t.LL.label,n=t.HL.label,o=t.LH.label;switch(e){case"HH":default:return{top:i,bottom:r,left:n,right:o};case"HL":return{top:n,bottom:o,left:r,right:i};case"LL":return{top:r,bottom:i,left:o,right:n};case"LH":return{top:o,bottom:n,left:i,right:r}}}function cGe(e){const{focus:t,infos:i,numClasses:r}=e,n=aGe[r],o={};i.forEach(f=>{o[f.value]={label:f.label,fill:lGe(f.symbol)}});const u=[];for(let f=0;f<r;f++){const g=[];for(let b=0;b<r;b++){const E=o[n[f][b]];g.push(E.fill)}u.push(g)}return{type:"relationship-ramp",numClasses:r,focus:t,colors:u,labels:uGe(t,o),rotation:Tde(t)}}function Tde(e){let t=$J[e];return e&&t==null&&(t=$J.HH),t||0}let Ym=null;const MJ=[255,255,255];function CJ(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function hGe(e,t,i){const{backgroundColor:r,outline:n,dotSize:o}=e,u=(i==null?void 0:i.swatchSize)||on.size,f=.8,g=Math.round(u*u/Math.max(o,.5)**2*f),b=window.devicePixelRatio,E=document.createElement("canvas"),I=u*b;E.width=I,E.height=I,E.style.width=E.width/b+"px",E.style.height=E.height/b+"px";const M=E.getContext("2d");if(r&&(M.fillStyle=r.toCss(!0),M.fillRect(0,0,I,I),M.fill()),M.fillStyle=(t==null?void 0:t.toCss(!0))??"",Ym&&Ym.length/2===g)for(let L=0;L<2*g;L+=2){const P=Ym[L],D=Ym[L+1];M.fillRect(P,D,o*b,o*b),M.fill()}else{Ym=[];for(let L=0;L<2*g;L+=2){const P=CJ(0,I),D=CJ(0,I);Ym.push(P,D),M.fillRect(P,D,o*b,o*b),M.fill()}}n&&(n.color&&(M.strokeStyle=n.color.toCss(!0)),M.lineWidth=n.width,M.strokeRect(0,0,I,I));const k=new Image(u,u);return k.src=E.toDataURL(),k.ariaLabel=(i==null?void 0:i.ariaLabel)??null,k.alt=(i==null?void 0:i.ariaLabel)??"",k}function dGe(e,t={}){const i=t.radius||40,r=2*Math.PI*i,n=e.length,o=r/n,u=[],f=O_(t.outline);(f==null?void 0:f.width)!=null&&(f.width*=2),(f||t.backgroundColor)&&u.push({shape:{type:"circle",cx:i,cy:i,r:i},fill:t.backgroundColor,stroke:f,offset:[0,0]});const g=t.values,b=g&&g.length===n&&g.reduce((L,P)=>L+P,0)===100,E=[0];for(let L=0;L<n;L++){let P=null;b&&(P=g[L]*r/100,E.push(P+E[L])),u.push({shape:{type:"circle",cx:i,cy:i,r:i/2},fill:[0,0,0,0],stroke:{width:i,dashArray:`${(P??o)/2} ${r}`,dashoffset:"-"+(b?E[L]/2:L*(o/2)),color:e[L]},offset:[0,0]})}let I=null;const M=2*i+((f==null?void 0:f.width)||0),k=t.holePercentage;if(k){f&&u.push({shape:{type:"circle",cx:i,cy:i,r:i*k},fill:null,stroke:f,offset:[0,0]});const L=M/2;I=[[{shape:{type:"circle",cx:L,cy:L,r:L},fill:MJ,stroke:f?{...f,color:MJ}:null,offset:[0,0]},{shape:{type:"circle",cx:L,cy:L,r:i*k},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return zS([u],[M,M],{effectView:t.effectList,ignoreStrokeWidth:!0,masking:I,rotations:[-90],ariaLabel:t.ariaLabel})}function G0(e,t={}){const n=t.align==="horizontal",o=n?75:24,u=n?24:75,f=t.width??o,g=t.height??u,b=t.gradient??!0,E=window.devicePixelRatio,I=f*E,M=g*E,k=document.createElement("canvas");k.width=I,k.height=M,k.ariaLabel=t.ariaLabel??null,k.style.width=`${f}px`,k.style.height=`${g}px`;const L=k.getContext("2d"),P=n?I:0,D=n?0:M;if(b){const z=L.createLinearGradient(0,0,P,D),V=e.length,W=V===1?0:1/(V-1);e.forEach((Q,Z)=>z.addColorStop(Z*W,Q.toString())),L.fillStyle=z,L.fillRect(0,0,I,M)}else{const z=n?I/e.length:I,V=n?M:M/e.length;let W=0,Q=0;for(const Z of e)L.fillStyle=Z.toString(),L.fillRect(W,Q,z,V),W=n?W+z:0,Q=n?0:Q+V}const j=document.createElement("div");return j.style.width=`${f}px`,j.style.height=`${g}px`,pGe(j,t==null?void 0:t.effectList),j.appendChild(k),j}function pGe(e,t){if(!t)return;e.style.filter=P_(t);const i=t.effects;if(i){for(const r of i)if((r==null?void 0:r.type)==="drop-shadow"){r.offsetX<0?e.style.marginLeft=`${Math.abs(r.offsetX)}px`:e.style.marginRight=`${r.offsetX}px`;break}}}async function $de(e,t){switch(e.type){case"web-style":{const{previewWebStyleSymbol:i}=await ce(()=>import("./previewWebStyleSymbol-DHB5YsZz.js"),[],import.meta.url);return i(e,$de,t)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:i}=await ce(()=>Promise.resolve().then(()=>oGe),void 0,import.meta.url);return i(e,t)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:i}=await ce(()=>import("./previewSymbol2D-DflDHZZp.js"),__vite__mapDeps([253,62]),import.meta.url);return i(e,t)}case"cim":{const{previewCIMSymbol:i}=await ce(()=>import("./previewCIMSymbol-DPl0lBtI.js"),__vite__mapDeps([254,60,61,62,63,64,59,255,146]),import.meta.url);return i(e,t)}default:return}}function Mde(e){return e&&"opacity"in e?e.opacity*Mde(e.parent):1}async function AJ(e,t){var V;if(!e)return;const i=e.sourceLayer,r=(t!=null&&t.useSourceLayer?i:e.layer)??i,n=Mde(r);if(e.symbol!=null&&(t==null||t.ignoreGraphicSymbol!==!0)){const W=e.symbol.type==="web-style"?await BRe(e.symbol,{...t,cache:t!=null?t.webStyleCache:null}):e.symbol.clone();return d7(W,null,n),W}const o=(t==null?void 0:t.renderer)??fGe(r);let u=o&&"getSymbolAsync"in o?await o.getSymbolAsync(e,t):null;if(!u)return;if(u=u.type==="web-style"?await u.fetchSymbol({...t,cache:t!=null?t.webStyleCache:null}):u.clone(),!o||!("visualVariables"in o)||!((V=o.visualVariables)!=null&&V.length))return d7(u,null,n),u;if("arcadeRequiredForVisualVariables"in o&&o.arcadeRequiredForVisualVariables&&(t==null?void 0:t.arcade)==null){const W={...t};W.arcade=await ad(),t=W}const{getColor:f,getOpacity:g,getAllSizes:b,getRotationAngle:E}=await ce(()=>Promise.resolve().then(()=>Im),void 0,import.meta.url),I=[],M=[],k=[],L=[];for(const W of o.visualVariables)switch(W.type){case"color":I.push(W);break;case"opacity":M.push(W);break;case"rotation":L.push(W);break;case"size":W.target||k.push(W)}const P=!!I.length&&I[I.length-1],D=P?f(P,e,t):null,j=!!M.length&&M[M.length-1];let z=j?g(j,e,t):null;if(n!=null&&(z=z!=null?z*n:n),d7(u,D,z),k.length){const W=b(k,e,t);await URe(u,W)}for(const W of L)GRe(u,E(W,e,t),W.axis);return u}function fGe(e){if(e)return"renderer"in e?e.renderer:void 0}function dR(e){return e&&typeof e.highlight=="function"}function yGe(e,t,i){return e==null||e>=i&&(t===0||e<=t)}function Wht(e,t){if(t&&e){const{minScale:i,maxScale:r}=e;if(mGe(i,r))return yGe(t,i,r)}return!0}function mGe(e,t){return e!=null&&e>0||t!=null&&t>0}function Zht(e){return!(e!=null&&e.minScale)||!e.maxScale||e.minScale>=e.maxScale}const gGe="esri.widgets.Popup.PopupViewModel",ZI=()=>Se.getLogger(gGe),vGe=e=>{const{event:t,view:i,viewModel:r}=e,{action:n}=t;if(!n)return Promise.reject(new ne("trigger-action:missing-arguments","Event has no action"));const{disabled:o,id:u}=n;if(!u)return Promise.reject(new ne("trigger-action:invalid-action","action.id is missing"));if(o)return Promise.reject(new ne("trigger-action:invalid-action","Action is disabled"));if(u===Gp.id)return Ade(r).catch(TA);if(u===Vg.id)return bGe(r);if(u===Op.id)return r.browseClusterEnabled=!r.browseClusterEnabled,r.featureMenuOpen=r.browseClusterEnabled,Promise.resolve();if(u===lR.id){r.visible=!1;const{selectedFeature:f}=r;if(!f)return Promise.reject(new ne(`trigger-action:${lR.id}`,"selectedFeature is required",{selectedFeature:f}));const{sourceLayer:g}=f;return g?g.remove(f):i==null||i.graphics.remove(f),Promise.resolve()}return Promise.resolve()};function Cde(e){const{selectedFeature:t,location:i,view:r}=e;return r?t??i??null:null}function oy(e){var t,i;return!!e&&e.isAggregate&&((i=(t=e.sourceLayer)==null?void 0:t.featureReduction)==null?void 0:i.type)==="cluster"}async function wGe(e,t){if((t==null?void 0:t.type)!=="3d"||!e||e.declaredClass!=="esri.Graphic")return!0;const i=t.getViewForGraphic(e);if(i&&"whenGraphicBounds"in i){let r=null;try{r=await i.whenGraphicBounds(e,{useViewElevation:!0})}catch{}return!r||!r.boundingBox||r.boundingBox[0]===r.boundingBox[3]&&r.boundingBox[1]===r.boundingBox[4]&&r.boundingBox[2]===r.boundingBox[5]}return!0}async function Ade(e,t){var I,M;const{location:i,selectedFeature:r,view:n,zoomFactor:o}=e;await((I=t==null?void 0:t.viewModel)==null?void 0:I.updateGeometry());const u=t==null?void 0:t.graphic,f=u!=null&&u.geometry?u:Cde(e);if(!n||!f){const k=new ne("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:f,view:n});throw ZI().error(k),k}const g=n.scale/o,b=(u==null?void 0:u.geometry)??((M=e.selectedFeature)==null?void 0:M.geometry)??i,E=b!=null&&b.type==="point"&&await wGe(u??r,n);Gp.active=!0,Gp.disabled=!0;try{await e.zoomTo({target:{target:f,scale:E?g:void 0}})}catch(k){if(Or(k))return;const L=new ne("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:u??r});ZI().error(L)}finally{Gp.active=!1,Gp.disabled=!1,e.zoomToLocation=null,E&&(e.location=b)}}async function bGe(e){const{selectedFeature:t,view:i}=e;if((i==null?void 0:i.type)!=="2d"){const u=new ne("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw ZI().error(u),u}if(!t||!oy(t)){const u=new ne("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw ZI().error(u),u}const[r,n]=await JD(i,t);Vg.active=!0,Vg.disabled=!0;const{extent:o}=await r.queryExtent(n);o&&await e.zoomTo({target:o}),Vg.active=!1,Vg.disabled=!1}async function _Ge(e){const{view:t,selectedFeature:i}=e;if(!t||!i)return;const[r,n]=await JD(t,i),{extent:o}=await r.queryExtent(n);e.selectedClusterBoundaryFeature.geometry=o,t.graphics.add(e.selectedClusterBoundaryFeature)}async function SGe(e){const{selectedFeature:t,view:i}=e;if(!i||!t)return;const[r,n]=await JD(i,t);Op.active=!0,Op.disabled=!0;const{features:o}=await r.queryFeatures(n);Op.active=!1,Op.disabled=!1,Op.value=!0,e==null||e.open({features:[t].concat(o),featureMenuOpen:!0})}async function JD(e,t){const i=await e.whenLayerView(t.sourceLayer),r=i.createQuery(),n=t.getObjectId();return r.aggregateIds=n!=null?[n]:[],[i,r]}function xGe(e){Op.value=!1;const t=e.features.filter(i=>oy(i));t.length&&(e.features=t)}const G7="location-scale-handle",EGe=()=>[Gp.clone()],IGe=()=>[Vg.clone(),Op.clone()];let _x=null;function TGe(e,t){return e==="building-scene"||t==="2d"&&(e==="map-image"||e==="tile"||e==="imagery"||e==="imagery-tile")}let kt=class extends RT(lde){constructor(t){super(t),this._pendingPromises=new fUe,this._fetchFeaturesController=null,this._highlightSelectedFeaturePromise=null,this._highlightActiveFeaturePromise=null,this._selectedClusterFeature=null,this.actions=new Ly,this.activeFeature=null,this.autoCloseEnabled=!1,this.browseClusterEnabled=!1,this.content=null,this.defaultPopupTemplateEnabled=!1,this.featurePage=null,this.featuresPerPage=20,this.featureMenuOpen=!1,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new qi({symbol:new gl({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null,this._debouncedLocationUpdate=yu(async i=>{var u,f,g,b;const{spatialReference:r}=this,n=(f=(u=this.selectedFeature)==null?void 0:u.geometry)==null?void 0:f.type,o=this.location??i;if(n&&n!=="mesh"&&r&&o&&this.selectedFeature)if(n!=="point")try{const E=this.selectedFeature;let I=E.geometry;const M=this._getHighlightLayer(E),k=E.getObjectId();if(!M||!this.view)return;if(k){const L=(g=this.view)==null?void 0:g.allLayerViews.find(j=>j.layer.uid===M.uid);if(!L||!("queryFeatures"in L))return;const P=L.createQuery();P.outSpatialReference=r,P.objectIds=[k],P.returnGeometry=!0;const{features:D}=await L.queryFeatures(P);I=(b=D[0])==null?void 0:b.geometry}if(!I||I.type==="mesh")return;if(I=dl(I,r),_x||(_x=await ce(()=>import("./geometryEngineAsync-BS9jnzgG.js"),[],import.meta.url)),!await _x.intersects(I,o)){const L=(await _x.nearestCoordinate(I,o)).coordinate??o;this.selectedFeature===E&&(this.location=L)}}catch(E){Or(E)||Se.getLogger(this).error(E)}else this.location=C_(this.selectedFeature.geometry)??o})}initialize(){this.addHandles([this.on("view-change",()=>this._autoClose()),me(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),me(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),me(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.animation)==null?void 0:i.state},t=>this._animationStateChange(t)),me(()=>this.location,t=>this._locationChange(t)),me(()=>this.selectedFeature,t=>this._selectedFeatureChange(t)),me(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),me(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),me(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",t=>vGe({event:t,viewModel:this,view:this.view})),rn(()=>!this.waitingForResult,()=>this._waitingForResultChange(),hl),me(()=>[this.features,this.map,this.spatialReference,this.timeZone],()=>this._updateFeatureVMs()),me(()=>{var t;return(t=this.view)==null?void 0:t.scale},()=>this._viewScaleChange()),rn(()=>!this.visible,()=>this.browseClusterEnabled=!1),me(()=>this.browseClusterEnabled,t=>t?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null,this.map=null,this.spatialReference=null,this.timeZone=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const t=this._get("allActions")||new Ly;t.removeAll();const{actions:i,defaultActions:r,defaultPopupTemplateEnabled:n,includeDefaultActions:o,selectedFeature:u}=this,f=o?r.concat(i):i,g=u&&(typeof u.getEffectivePopupTemplate=="function"&&u.getEffectivePopupTemplate(n)||u.popupTemplate),b=g==null?void 0:g.actions,E=g!=null&&g.overwriteActions?b:(b==null?void 0:b.concat(f))??f;return E==null||E.filter(Boolean).forEach(I=>t.add(I)),t}get defaultActions(){const t=this._get("defaultActions")||new Ly;return t.removeAll(),t.addMany(oy(this.selectedFeature)?IGe():EGe()),t}get featureCount(){return this.features.length}set features(t){const i=t||[];this._set("features",i);const{pendingPromisesCount:r,promiseCount:n,selectedFeatureIndex:o}=this,u=n&&i.length;u&&r&&o===-1?this.selectedFeatureIndex=0:u&&o!==-1||(this.selectedFeatureIndex=i.length?0:-1)}set location(t){var o,u;let i=t;const r=(o=this.spatialReference)==null?void 0:o.isWebMercator;((u=t==null?void 0:t.spatialReference)==null?void 0:u.isWGS84)&&r&&(i=$c(t)),this._set("location",i)}get map(){var t;return((t=this.view)==null?void 0:t.map)??null}set map(t){this._override("map",t)}get pendingPromisesCount(){return this._pendingPromises.size}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(t){this._pendingPromises.clear(),this.features=[],Array.isArray(t)&&t.length?(this._set("promises",t),(t=t.slice()).forEach(i=>this._pendingPromises.add(i)),t.reduce((i,r)=>i.finally(()=>r.then(n=>{this._pendingPromises.has(r)&&this._updateFeatures(n)}).finally(()=>this._pendingPromises.delete(r)).catch(()=>{})),Promise.resolve())):this._set("promises",[])}get selectedFeature(){const{features:t,selectedFeatureIndex:i}=this;return i===-1?null:t[i]||null}get selectedFeatureIndex(){const t=this._get("selectedFeatureIndex");return typeof t=="number"?t:-1}set selectedFeatureIndex(t){const{featureCount:i}=this;t=isNaN(t)||t<-1||!i?-1:(t+i)%i,this.activeFeature=null,this._set("selectedFeatureIndex",t)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get spatialReference(){var t;return((t=this.view)==null?void 0:t.spatialReference)??null}set spatialReference(t){this._override("spatialReference",t)}get state(){const{view:t,map:i}=this;return t?t.ready?"ready":"disabled":i?"ready":"disabled"}get timeZone(){var t;return((t=this.view)==null?void 0:t.timeZone)??ba}set timeZone(t){this._overrideIfSome("timeZone",t)}get waitingForContents(){return this.featureViewModels.some(t=>t.waitingForContent)}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}centerAtLocation(){const{view:t}=this,i=Cde(this);return i&&t?this.callGoTo({target:{target:i,scale:t.scale}}):Promise.reject(new ne("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:i,view:t}))}zoomTo(t){return this.callGoTo(t)}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(t,i){var n;const{view:r}=this;if(!r||!t)throw new ne("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:t,view:r});return r.fetchPopupFeatures(t,{pointerType:(n=i==null?void 0:i.event)==null?void 0:n.pointerType,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:i==null?void 0:i.signal})}open(t){const i={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...t,visible:!0},{fetchFeatures:r}=i;delete i.fetchFeatures,r&&this._setFetchFeaturesPromises(i.location);const n=["actionsMenuOpen","collapsed"];for(const o of n)delete i[o];this.set(i)}triggerAction(t){const i=this.allActions.at(t);i&&!i.disabled&&this.emit("trigger-action",{action:i})}next(){return this.selectedFeatureIndex++,this}previous(){return this.selectedFeatureIndex--,this}disableClusterBrowsing(){xGe(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:t,selectedFeature:i}=this;(t==null?void 0:t.type)==="2d"?oy(i)?(await _Ge(this),await SGe(this)):Se.getLogger(this).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",i):Se.getLogger(this).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",i)}handleViewClick(t){this._fetchFeaturesAndOpen(t)}_animationStateChange(t){this.zoomToLocation||(Gp.disabled=t==="waiting-for-target")}_clearBrowsedClusterGraphics(){var i,r;const t=[this.selectedClusterBoundaryFeature,this._selectedClusterFeature].filter(cr);(r=(i=this.view)==null?void 0:i.graphics)==null||r.removeMany(t),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(oy(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=this.selectedFeature?[this.selectedFeature]:[])}_locationChange(t){const{selectedFeature:i,updateLocationEnabled:r,view:n}=this;n&&r&&t&&(!i||i.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:t,featureCount:i,featurePage:r,featuresPerPage:n,featureViewModels:o}=this;if(r===null)return;const u=((r-1)*n+i)%i,f=u+n;o.slice(u,f).forEach((g,b)=>{g&&(g.graphic??(g.graphic=t[u+b]))})}async _selectedFeatureChange(t){var u,f;const{location:i,updateLocationEnabled:r,view:n}=this;if(!t||!n)return;if(this.browseClusterEnabled)return this._selectedClusterFeature&&(n.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),oy(t)?void 0:(t.symbol=await AJ(t),this._selectedClusterFeature=t,void n.graphics.add(this._selectedClusterFeature));const o=(u=t.sourceLayer)==null?void 0:u.type;if(o!=="map-image"&&o!=="imagery"&&o!=="imagery-tile"||(t.symbol=await AJ(t)),!r&&i||!t.geometry){if(r&&!t.geometry){await this.centerAtLocation();const g=(f=n.center)==null?void 0:f.clone();g&&(this.location=g)}}else this.location=C_(t.geometry)}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}async _setFetchFeaturesPromises(t){const{pendingFeatures:i}=await this._fetchFeaturesWithController({mapPoint:t});this.promises=i}_destroyFeatureVMs(){this.featureViewModels.forEach(t=>t&&!t.destroyed&&t.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:t,features:i,featureViewModels:r,view:n,spatialReference:o,map:u,timeZone:f,location:g}=this;if(oy(t)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!(i!=null&&i.length))return;const b=r.slice(),E=[];i.forEach((I,M)=>{if(!I)return;let k=null;if(b.some((L,P)=>(L&&L.graphic===I&&(k=L,b.splice(P,1)),!!k)),k)E[M]=k;else{const L=new GD({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:o,graphic:I===t?I:null,location:g,map:u,view:n,timeZone:f});E[M]=L}}),b.forEach(I=>I&&!I.destroyed&&I.destroy()),this._set("featureViewModels",E)}async _getScreenPoint(t,i){const{spatialReference:r,view:n}=this;if(!n)return null;await(n==null?void 0:n.when());const o=t==null?void 0:t.spatialReference;return o&&r?(await $2(o,r,null,i),n.toScreen(t)):null}_cancelFetchingFeatures(){const t=this._fetchFeaturesController;t&&t.abort(),this._fetchFeaturesController=null}async _projectScreenPointAndFetchFeatures({mapPoint:t,screenPoint:i,event:r,signal:n}){return this.fetchFeatures(i??await this._getScreenPoint(t??this.location,{signal:n}),{signal:n,event:r})}_fetchFeaturesWithController({mapPoint:t,screenPoint:i,event:r}){this._cancelFetchingFeatures();const n=new AbortController,{signal:o}=n;this._fetchFeaturesController=n;const u=this._projectScreenPointAndFetchFeatures({mapPoint:t,screenPoint:i,signal:o,event:r});return u.catch(()=>{}).then(()=>{this._fetchFeaturesController=null}),u}async _fetchFeaturesAndOpen(t){const{mapPoint:i,screenPoint:r}=t,{view:n}=this;this.removeHandles(G7),this.addHandles([me(()=>{var u;return(u=this.view)==null?void 0:u.scale},()=>this._debouncedLocationUpdate(i).catch(u=>{Or(u)||Se.getLogger(this).error(u)})),rn(()=>!this.visible,()=>{this.removeHandles(G7)},{once:!0})],G7);const{pendingFeatures:o}=await this._fetchFeaturesWithController({mapPoint:i,screenPoint:r,event:t});n!=null&&n.popup&&"open"in n.popup&&n.popup.open({location:i??void 0,promises:o})}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}async _getLayerView(t,i){return await t.when(),t.whenLayerView(i)}_getHighlightLayer(t){const{layer:i,sourceLayer:r}=t;return r&&"layer"in r&&r.layer?r.layer:(r==null?void 0:r.type)==="map-notes"||(r==null?void 0:r.type)==="subtype-group"?r:i}_getHighlightTarget(t,i,r){if(TGe(i.type,r))return t;const n=t.getObjectId();if(n!=null)return n;const o=i.type==="imagery"?void 0:"objectIdField"in i?i.objectIdField||yUe:null,u=t.attributes;return u&&o&&u[o]||t}_mapIncludesLayer(t){var i,r;return!!((r=(i=this.map)==null?void 0:i.allLayers)!=null&&r.includes(t))}async _highlightActiveFeature(){const t="highlight-active-feature";this.removeHandles(t);const{highlightEnabled:i,view:r,activeFeature:n,visible:o}=this;if(!(n&&r&&i&&o))return;const u=this._getHighlightLayer(n);if(!(u&&u instanceof S_&&this._mapIncludesLayer(u)))return;const f=this._getLayerView(r,u);this._highlightActiveFeaturePromise=f;const g=await f;if(!(g&&dR(g)&&this._highlightActiveFeaturePromise===f&&this.activeFeature&&this.highlightEnabled))return;const b=g.highlight(this._getHighlightTarget(n,u,r.type));this.addHandles(b,t)}async _highlightSelectedFeature(){const t="highlight-selected-feature";this.removeHandles(t);const{selectedFeature:i,highlightEnabled:r,view:n,visible:o}=this;if(!(i&&n&&r&&o))return;const u=this._getHighlightLayer(i);if(!(u&&u instanceof S_&&this._mapIncludesLayer(u)))return;const f=this._getLayerView(n,u);this._highlightSelectedFeaturePromise=f;const g=await f;if(!(g&&dR(g)&&this._highlightSelectedFeaturePromise===f&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const b=g.highlight(this._getHighlightTarget(i,u,n.type));this.addHandles(b,t)}_updateFeatures(t){const{features:i}=this,r=t.filter(n=>!i.includes(n));r!=null&&r.length&&(this.features=i.concat(r))}};m([w()],kt.prototype,"_fetchFeaturesController",void 0),m([w({type:Ly})],kt.prototype,"actions",void 0),m([w({readOnly:!0})],kt.prototype,"active",null),m([w()],kt.prototype,"activeFeature",void 0),m([w({readOnly:!0})],kt.prototype,"allActions",null),m([w()],kt.prototype,"autoCloseEnabled",void 0),m([w()],kt.prototype,"browseClusterEnabled",void 0),m([w()],kt.prototype,"content",void 0),m([w({type:Ly,readOnly:!0})],kt.prototype,"defaultActions",null),m([w({type:Boolean})],kt.prototype,"defaultPopupTemplateEnabled",void 0),m([w({readOnly:!0})],kt.prototype,"featureCount",null),m([w()],kt.prototype,"featurePage",void 0),m([w({value:[]})],kt.prototype,"features",null),m([w()],kt.prototype,"featuresPerPage",void 0),m([w()],kt.prototype,"featureMenuOpen",void 0),m([w()],kt.prototype,"featureViewModelAbilities",void 0),m([w({readOnly:!0})],kt.prototype,"featureViewModels",void 0),m([w()],kt.prototype,"highlightEnabled",void 0),m([w()],kt.prototype,"includeDefaultActions",void 0),m([w({type:lt})],kt.prototype,"location",null),m([w()],kt.prototype,"map",null),m([w({readOnly:!0})],kt.prototype,"pendingPromisesCount",null),m([w({readOnly:!0})],kt.prototype,"promiseCount",null),m([w()],kt.prototype,"promises",null),m([w({readOnly:!0})],kt.prototype,"selectedClusterBoundaryFeature",void 0),m([w({value:null,readOnly:!0})],kt.prototype,"selectedFeature",null),m([w({value:-1})],kt.prototype,"selectedFeatureIndex",null),m([w({readOnly:!0})],kt.prototype,"selectedFeatureViewModel",null),m([w({readOnly:!0})],kt.prototype,"state",null),m([w()],kt.prototype,"timeZone",null),m([w()],kt.prototype,"title",void 0),m([w()],kt.prototype,"updateLocationEnabled",void 0),m([w()],kt.prototype,"view",void 0),m([w()],kt.prototype,"visible",void 0),m([w({readOnly:!0})],kt.prototype,"waitingForContents",null),m([w({readOnly:!0})],kt.prototype,"waitingForResult",null),m([w()],kt.prototype,"zoomFactor",void 0),m([w()],kt.prototype,"zoomToLocation",void 0),m([w()],kt.prototype,"centerAtLocation",null),kt=m([H("esri.widgets.Features.FeaturesViewModel")],kt);const KD=kt;let Gl=class extends De{constructor(){super(...arguments),this.actionBar=!0,this.closeButton=!0,this.collapseButton=!1,this.featureNavigation=!0,this.featureListLayerTitle=!0,this.flow=!0,this.heading=!0,this.spinner=!0}};m([w({type:Boolean,nonNullable:!0})],Gl.prototype,"actionBar",void 0),m([w({type:Boolean,nonNullable:!0})],Gl.prototype,"closeButton",void 0),m([w({type:Boolean,nonNullable:!0})],Gl.prototype,"collapseButton",void 0),m([w({type:Boolean,nonNullable:!0})],Gl.prototype,"featureNavigation",void 0),m([w({type:Boolean,nonNullable:!0})],Gl.prototype,"featureListLayerTitle",void 0),m([w({type:Boolean,nonNullable:!0})],Gl.prototype,"flow",void 0),m([w({type:Boolean,nonNullable:!0})],Gl.prototype,"heading",void 0),m([w({type:Boolean,nonNullable:!0})],Gl.prototype,"spinner",void 0),Gl=m([H("esri.widgets.Features.FeaturesVisibleElements")],Gl);const kde=Gl,kJ="selected-index",$Ge=0,LJ="features-spinner";function OJ(e){return(e==null?void 0:e.declaredClass.startsWith("esri.layers."))??!1}let jt=class extends sde(bi){constructor(t,i){super(t,i),this._featureMenuIntersectionObserverCallback=([r])=>{r!=null&&r.isIntersecting&&this.viewModel.featurePage!=null&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._featureMenuIntersectionObserverNode=null,this._spinner=null,this._feature=null,this._focusAbortController=null,this._drillInFlowItems=new Oe,this._drillInWidget=new pUe({flowItems:this._drillInFlowItems}),this._rootFlowItemNode=null,this._featureMenuViewportNode=null,this._actionBarMenuNode=null,this.collapsed=!1,this.featureNavigationTop=!1,this.headerActions=new Ly,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.responsiveActionsEnabled=!1,this.viewModel=new KD,this.visibleElements=new kde,this._renderAction=(r,n)=>{const o=this._getActionTitle(r),{type:u,active:f,uid:g,disabled:b,indicator:E}=r;return r.visible?G("calcite-action",{active:u==="toggle"&&r.value,appearance:"solid",bind:this,"data-action-uid":g,disabled:b,icon:this._getActionIcon(r),indicator:E,key:`action-${n}`,loading:f,onclick:this._triggerAction,scale:"s",text:o,title:this._hideActionText?o:void 0},this._getFallbackIcon(r)):null},this._openFeatureMenu=()=>{this.featureMenuOpen=!0,this._focusFlowItemNode("menu-flow-item")},this._previousFeature=()=>{this.viewModel.selectedFeatureIndex--},this._nextFeature=()=>{this.viewModel.selectedFeatureIndex++},this._handleFeatureMenuBack=()=>{this.featureMenuOpen&&(this._focusFlowItemNode("root-flow-item"),this.featureMenuOpen=!1)},this._displaySpinnerThrottled=eD(()=>this._displaySpinner(),$Ge),this._addSelectedFeatureIndexHandle(),this.addHandles([this._displaySpinnerThrottled,me(()=>{var r;return(r=this.viewModel)==null?void 0:r.active},()=>this._toggleScreenLocationEnabled()),me(()=>{var r;return(r=this.viewModel)==null?void 0:r.active},r=>this._drillInWidget.closed=!r),me(()=>{var r;return(r=this.visibleElements)==null?void 0:r.closeButton},r=>this._drillInWidget.closable=r),me(()=>{var r;return(r=this.visibleElements)==null?void 0:r.spinner},r=>this._spinnerEnabledChange(r)),me(()=>{var r;return(r=this.viewModel)==null?void 0:r.view},(r,n)=>this._viewChange(r,n)),me(()=>{var r,n;return(n=(r=this.viewModel)==null?void 0:r.view)==null?void 0:n.ready},(r,n)=>this._viewReadyChange(r??!1,n??!1)),me(()=>{var r,n;return[(r=this.viewModel)==null?void 0:r.waitingForResult,(n=this.viewModel)==null?void 0:n.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),me(()=>{var r;return(r=this.viewModel)==null?void 0:r.screenLocation},()=>this._closeOpenActionMenu()),me(()=>this.selectedFeatureWidget,()=>this._destroyDrillInFlowItemWidgets()),me(()=>{var n;const r=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel;return[r==null?void 0:r.title,r==null?void 0:r.state]},()=>this._setTitleFromFeatureWidget()),me(()=>{var n;const r=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel;return[r==null?void 0:r.content,r==null?void 0:r.state]},()=>this._setContentFromFeatureWidget()),me(()=>{var r;return(r=this.viewModel)==null?void 0:r.featureViewModels},()=>this._featureMenuViewportScrollTop()),this._drillInWidget.on("close",()=>this.close()),this._drillInWidget.on("exit",()=>this._destroyDrillInFlowItemWidgets()),this._drillInWidget.on("open-feature",({feature:r})=>this._openRelatedFeature(r)),this._drillInWidget.on("zoom-to-feature",({featureWidget:r})=>Ade(this.viewModel,r))])}loadDependencies(){return cs({action:()=>ce(()=>import("./calcite-action-e0C_v5mP.js"),__vite__mapDeps([244,238,205]),import.meta.url),"action-bar":()=>ce(()=>import("./calcite-action-bar-Cuj6u15i.js"),__vite__mapDeps([245,246,247,238,205,248,242,249,240,243]),import.meta.url),"action-group":()=>ce(()=>import("./calcite-action-group-BStvxvBS.js"),__vite__mapDeps([250,246,247,238,205,248,242,249,240,243]),import.meta.url),button:()=>ce(()=>import("./calcite-button-DicafOzy.js"),__vite__mapDeps([204,205]),import.meta.url),flow:()=>ce(()=>import("./calcite-flow-BGpdeU11.js"),[],import.meta.url),"flow-item":()=>ce(()=>import("./calcite-flow-item-CXm7AXI6.js"),__vite__mapDeps([251,252,247,238,205,248,242,249,240,243,236]),import.meta.url),list:()=>ce(()=>import("./calcite-list-BrvAaUx7.js"),__vite__mapDeps([233,234,235,205,236]),import.meta.url),"list-item":()=>ce(()=>import("./calcite-list-item-DzQsSgvs.js"),__vite__mapDeps([237,235,234,238,205]),import.meta.url),"list-item-group":()=>ce(()=>import("./calcite-list-item-group-DrRzBCt3.js"),__vite__mapDeps([256,234]),import.meta.url),loader:()=>ce(()=>import("./calcite-loader-BYXdEs7m.js"),__vite__mapDeps([232,205]),import.meta.url)})}destroy(){var t,i,r;this._destroyDrillInFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),this._unobserveFeatureMenuObserver(),(t=this._featureMenuIntersectionObserver)==null||t.disconnect(),(i=this._drillInWidget)==null||i.destroy(),(r=this._focusAbortController)==null||r.abort()}get _hideActionText(){var i;if(!this.responsiveActionsEnabled)return!1;const t=(i=this.view)==null?void 0:i.widthBreakpoint;return t==="xsmall"||t==="small"||t==="medium"}get _featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get _isCollapsed(){return this._collapseEnabled&&this.collapsed}get _collapseEnabled(){return this.visibleElements.collapseButton&&!!this.title&&!!this.content}get active(){return this.viewModel.active}get content(){return this.viewModel.content}set content(t){this.viewModel.content=t}get icon(){return null}get featureMenuOpen(){return this.viewModel.featureMenuOpen}set featureMenuOpen(t){this.viewModel.featureMenuOpen=t}get features(){return this.viewModel.features}set features(t){this.viewModel.features=t}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get location(){return this.viewModel.location}set location(t){this.viewModel.location=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get map(){return this.viewModel.map}set map(t){this.viewModel.map=t}get promises(){return this.viewModel.promises}set promises(t){this.viewModel.promises=t}get selectedFeature(){return this.viewModel.selectedFeature}get selectedDrillInFeature(){const t=Array.from(this._drillInFlowItems).at(-1);if(!t)return null;const{flowType:i}=t;return i==="feature-association"||i==="feature-relationship"?t.graphic??null:null}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(t){this.viewModel.selectedFeatureIndex=t}get selectedFeatureWidget(){const{_feature:t,headingLevel:i,_drillInFlowItems:r,timeZone:n,spatialReference:o,map:u}=this,{selectedFeatureViewModel:f}=this.viewModel,g={title:!1};return f?(t?(t.viewModel=f,t.visibleElements=g):this._feature=new ode({flowItems:r,headingLevel:i+1,timeZone:n,spatialReference:o,map:u,viewModel:f,visibleElements:g}),this._feature):null}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(t){this.viewModel.spatialReference=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}get timeZone(){return this.viewModel.timeZone}set timeZone(t){this.viewModel.timeZone=t}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(t){this.viewModel.updateLocationEnabled=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get visible(){return this.viewModel.visible}set visible(t){this.viewModel.visible=t}blur(){var i;const{active:t}=this.viewModel;t?(i=this._rootFlowItemNode)==null||i.blur():Se.getLogger(this).warn("Features can only be blurred when currently active.")}clear(){return this.viewModel.clear()}close(){this.viewModel.visible=!1}fetchFeatures(t,i){return this.viewModel.fetchFeatures(t,i)}focus(){const{active:t}=this.viewModel;t?this._focusFlowItemNode(this.featureMenuOpen?"menu-flow-item":"root-flow-item"):Se.getLogger(this).warn("Features can only be focused when currently active.")}next(){return this.viewModel.next()}open(t){this.removeHandles(kJ);const i={collapsed:(t==null?void 0:t.collapsed)??!1};this.set(i),this.viewModel.open(t),this.addHandles(rn(()=>!this.viewModel.waitingForResult,()=>this._addSelectedFeatureIndexHandle(),{once:!0}))}previous(){return this.viewModel.previous()}triggerAction(t){return this.viewModel.triggerAction(t)}render(){return G("div",{bind:this,class:this.classes(An.base,Ge.widget,Ge.panel),onkeydown:this._onMainKeydown},this._renderHeader(),this._renderContentContainer())}_renderFeatureNavigation(){return[this._renderPagination(),this._renderFeatureMenuButton()]}_renderHeader(){return!this.featureMenuOpen&&this.featureNavigationTop&&this._featureNavigationVisible?G("div",{class:An.header,key:"header-actions"},this._renderFeatureNavigation()):null}_renderFooter(){return this.featureMenuOpen||this.featureNavigationTop||!this._featureNavigationVisible?null:G("div",{class:An.footer,key:"footer-actions",slot:"footer"},this._renderFeatureNavigation())}_renderFeatureMenuButton(){const{messages:t,viewModel:i}=this,{featureCount:r,selectedFeatureIndex:n,pendingPromisesCount:o}=i;return G("calcite-action",{appearance:"solid",bind:this,icon:"list",key:"feature-menu-button",label:t.selectFeature,loading:o>0,onclick:this._openFeatureMenu,scale:"s",text:Rn(t.pageText,{index:as(n+1),total:as(r)}),textEnabled:!0,title:t.selectFeature})}_renderPagination(){const{previous:t,next:i}=this.messagesCommon.pagination;return G("calcite-action-bar",{class:An.paginationActionBar,expandDisabled:!0,key:"pagination-action-bar",layout:"horizontal",overflowActionsDisabled:!0,scale:"s"},G("calcite-action-group",{scale:"s"},G("calcite-action",{appearance:"solid",class:An.paginationPrevious,icon:"chevron-left",iconFlipRtl:!0,label:t,onclick:this._previousFeature,scale:"s",text:t,title:t}),G("calcite-action",{appearance:"solid",icon:"chevron-right",iconFlipRtl:!0,label:i,onclick:this._nextFeature,scale:"s",text:i,title:i})))}_renderFeatureMenuItem(t){const{selectedFeatureViewModel:i,featureViewModels:r}=this.viewModel,n=t===i,o=r.indexOf(t);return G("calcite-list-item",{bind:this,"data-feature-index":o,key:`feature-menu-item-${t.uid}`,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onmouseleave:this._removeActiveFeature,onmouseover:this._setActiveFeature,selected:n,onCalciteListItemSelect:this._selectFeature},G("span",{innerHTML:t.title||this.messagesCommon.untitled,slot:"content"}))}_groupResultsByLayer(){const{featureViewModels:t}=this.viewModel,i=new Map;return t.forEach(r=>{const n=r==null?void 0:r.graphic;if(!n)return;const{layer:o,sourceLayer:u}=n,f=(OJ(o)?o:null)||(OJ(u)?u:null),g=i.get(f)??[];i.set(f,[...g,r])}),i}_renderFeatureMenu(){const{featureViewModels:t}=this.viewModel,i=this._groupResultsByLayer();return t.length?G("calcite-list",{selectionAppearance:"icon",selectionMode:"single"},Array.from(i.keys(),r=>{var u;const n=(u=i.get(r))==null?void 0:u.map(f=>this._renderFeatureMenuItem(f)),o=r?r.title??this.messagesCommon.untitled:null;return this.visibleElements.featureListLayerTitle&&o!==null?G("calcite-list-item-group",{heading:o,key:(r==null?void 0:r.uid)||"map-graphics"},n):n})):null}_renderHeaderAction(t,i){const r=t.title||"";return t.visible?G("calcite-action",{active:t.type==="toggle"&&t.value,appearance:"solid",bind:this,"data-action-uid":t.uid,disabled:t.disabled,icon:t.icon??void 0,indicator:t.indicator,key:`header-action-${i}`,loading:t.active,onclick:this._triggerHeaderAction,slot:"header-actions-end",text:r,title:r}):null}_renderHeaderActions(){return this.headerActions.map((t,i)=>this._renderHeaderAction(t,i)).toArray()}_renderContentFeature(){const{headingLevel:t,visibleElements:i,_isCollapsed:r,_collapseEnabled:n,featureNavigationTop:o}=this,{title:u,active:f}=this.viewModel,g=i.heading&&u?u:"";return G("calcite-flow-item",{afterCreate:this._storeRootFlowItemNode,bind:this,class:this.classes({[An.contentFeature]:!0,[An.flowItemCollapsed]:r}),closable:i.closeButton,closed:!f,collapsed:r,collapseDirection:o?"down":"up",collapsible:n,headingLevel:t,key:"root-flow-item",onCalciteFlowItemClose:this.close,onCalciteFlowItemToggle:this._handleCollapseToggle},g?G(Ay,{class:this.classes(An.featuresHeading,Ge.heading),innerHTML:g,key:"header-content",level:this.headingLevel,slot:"header-content"}):null,this._renderHeaderActions(),this._renderActionBar(),r?null:G("div",{class:this.classes(An.container,An.contentContainer)},this._renderContent()),this._renderFooter())}_renderFeatureMenuContainer(){const{viewModel:t,featureMenuOpen:i,messages:r,messagesCommon:n}=this,{active:o,featureViewModels:u,pendingPromisesCount:f}=t;return i?G("calcite-flow-item",{afterCreate:this._storeFeatureMenuFlowItemNode,bind:this,closable:!1,closed:!o,description:Rn(r.total,{total:u.length}),heading:r.selectFeature,key:"feature-menu",loading:t.waitingForContents,onCalciteFlowItemBack:g=>{g.preventDefault(),this._handleFeatureMenuBack()}},f>0?G("calcite-loader",{class:An.loader,inline:!0,key:"feature-menu-loader",label:n.loading,slot:"header-actions-end"}):null,G("div",{class:An.container},this._renderFeatureMenu()),G("div",{afterCreate:this._featureMenuIntersectionObserverCreated,bind:this,class:An.featureMenuObserver}),G("calcite-button",{appearance:"transparent",onclick:this._handleFeatureMenuBack,slot:"footer-actions",width:"full"},n.back)):null}_renderContentContainer(){const t=[this._renderContentFeature(),this._renderFeatureMenuContainer(),this._drillInWidget.render()];return this.visibleElements.flow?G("calcite-flow",{key:"content-container"},t):t}_getFallbackIcon(t){const{className:i,icon:r}=t;if(r)return null;const n=$Le({action:t,feature:this.selectedFeature}),o={[An.icon]:!!i,[An.actionImage]:!!n};return i&&(o[i]=!0),n||i?G("span",{"aria-hidden":"true",class:this.classes(An.icon,o),key:"icon",styles:vue(n)}):null}_renderActionBar(){var t;return!this._isCollapsed&&this.visibleElements.actionBar&&((t=this.viewModel.allActions)!=null&&t.length)?G("calcite-action-bar",{expandDisabled:!0,expanded:!this._hideActionText,key:"header-action-bar",scale:"s",slot:"action-bar"},G("calcite-action-group",{afterCreate:i=>this._actionBarMenuNode=i,overlayPositioning:"fixed",scale:"s"},this._renderActions())):null}_renderActions(){return this.viewModel.allActions.toArray().map(this._renderAction)}_renderContent(){var i;const t=(i=this.viewModel)==null?void 0:i.content;return t?typeof t=="string"?G("div",{class:mr.contentNode,innerHTML:t,key:t}):this.renderNodeContent(t):null}_handleCollapseToggle(){this.collapsed=!this.collapsed}async _openRelatedFeature(t){await t.viewModel.updateGeometry();const i=t.graphic,r=i==null?void 0:i.geometry;if(r==null||i==null)return;this._destroyDrillInFlowItemWidgets(),await this.viewModel.zoomTo({target:r});const n=C_(r);this.open({features:[i],location:n??void 0})}async _focusFlowItemNode(t){var n;(n=this._focusAbortController)==null||n.abort(),this._focusAbortController=new AbortController;const i=this._focusAbortController.signal;await Do(F6(i));const r=t==="menu-flow-item"?this._featureMenuViewportNode:this._rootFlowItemNode;cv(r)}_storeRootFlowItemNode(t){this._rootFlowItemNode=t}_storeFeatureMenuFlowItemNode(t){this._featureMenuViewportNode=t}_setActiveFeature(t){var n;const{viewModel:i}=this,r=t.currentTarget["data-feature-index"];i.activeFeature=((n=i.features)==null?void 0:n[r])||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_selectFeature(t){const i=t.currentTarget["data-feature-index"];isNaN(i)||(this.viewModel.selectedFeatureIndex=i),this._handleFeatureMenuBack()}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(t){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(t),this._featureMenuIntersectionObserverNode=t}_getActionIcon(t){return t.icon?t.icon:t.image||t.className?void 0:"question"}_getActionTitle(t){const{messages:i,selectedFeature:r,messagesCommon:n}=this,{id:o}=t,u=r==null?void 0:r.attributes,f=t.title??"",g=o==="zoom-to-feature"?Rn(f,{messages:i}):o==="remove-selected-feature"?Rn(f,{messages:n}):o==="zoom-to-clustered-features"||o==="browse-clustered-features"?Rn(f,{messages:i}):t.title;return g&&u?Rn(g,u):g??""}_onMainKeydown(t){const{key:i}=t;i==="ArrowLeft"&&(t.stopPropagation(),this._handleFeatureMenuBack(),this.previous()),i==="ArrowRight"&&(t.stopPropagation(),this._handleFeatureMenuBack(),this.next())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&this._featureMenuViewportNode.scrollContentTo({top:0})}_setContentFromFeatureWidget(){const{selectedFeatureWidget:t}=this;t&&(this.viewModel.content=t)}_setTitleFromFeatureWidget(){const{selectedFeatureWidget:t,messagesCommon:i}=this,r=t==null?void 0:t.viewModel;t&&(this.viewModel.title=(r==null?void 0:r.state)==="error"?i==null?void 0:i.errorMessage:(r==null?void 0:r.title)||"")}_addSelectedFeatureIndexHandle(){const t=me(()=>{var i;return(i=this.viewModel)==null?void 0:i.selectedFeatureIndex},(i,r)=>this._selectedFeatureIndexUpdated(i,r));this.addHandles(t,kJ)}_selectedFeatureIndexUpdated(t,i){const{featureCount:r}=this.viewModel;r&&t!==i&&t!==-1&&(this._destroyDrillInFlowItemWidgets(),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))}_triggerHeaderAction(t){const i=t.currentTarget;if(i.disabled)return;const r=i.dataset.actionUid,n=this.headerActions.find(({uid:o})=>o===r);n&&!n.disabled&&((n==null?void 0:n.type)==="toggle"&&(n.value=!n.value),this.emit("trigger-header-action",{action:n}))}_triggerAction(t){const i=t.currentTarget;if(i.disabled)return;const r=i.dataset.actionUid,{allActions:n}=this.viewModel,o=n.findIndex(f=>f.uid===r),u=n.at(o);u&&u.type==="toggle"&&(u.value=!u.value),this.viewModel.triggerAction(o)}_createSpinner(t){t&&(this._spinner=new dUe({view:t}),t.ui.add(this._spinner,{key:LJ,position:"manual",internal:!0}))}_wireUpView(t){var i;this._destroySpinner(),t&&((i=this.visibleElements)!=null&&i.spinner)&&this._createSpinner(t)}_hideSpinner(){const{_spinner:t}=this;t&&(t.location=null,t.hide())}_viewReadyChange(t,i){var r;t?this._wireUpView((r=this.viewModel)==null?void 0:r.view):i&&this.viewModel.clear()}_viewChange(t,i){t&&i&&this.viewModel.clear()}_destroySelectedFeatureWidget(){const{_feature:t}=this;t&&(t.viewModel=null,!t.destroyed&&t.destroy()),this._feature=null}_closeOpenActionMenu(){const{_actionBarMenuNode:t}=this;t&&(t.menuOpen=!1)}_destroyDrillInFlowItemWidgets(){this._drillInFlowItems.drain(t=>{"showAllEnabled"in t.viewModel&&(t.viewModel.showAllEnabled=!1),t.viewModel=null,t.destroy()})}_toggleScreenLocationEnabled(){const{viewModel:t}=this;t&&(t.screenLocationEnabled=t.active)}_displaySpinner(){const{_spinner:t}=this;if(!t)return;const{location:i,waitingForResult:r}=this.viewModel;r&&i?t.show({location:i}):t.hide()}_destroySpinner(){var r;const{_spinner:t,view:i}=this;t&&((r=i==null?void 0:i.ui)==null||r.remove(t,LJ),t.destroy(),this._spinner=null)}_spinnerEnabledChange(t){var i;this._destroySpinner(),t&&this._createSpinner((i=this.viewModel)==null?void 0:i.view)}};m([w()],jt.prototype,"_drillInFlowItems",void 0),m([w()],jt.prototype,"_hideActionText",null),m([w()],jt.prototype,"_featureNavigationVisible",null),m([w()],jt.prototype,"_isCollapsed",null),m([w()],jt.prototype,"_collapseEnabled",null),m([w({readOnly:!0})],jt.prototype,"active",null),m([w()],jt.prototype,"collapsed",void 0),m([w()],jt.prototype,"content",null),m([w()],jt.prototype,"icon",null),m([w()],jt.prototype,"featureMenuOpen",null),m([w()],jt.prototype,"featureNavigationTop",void 0),m([w()],jt.prototype,"features",null),m([w()],jt.prototype,"goToOverride",null),m([w({type:Ly})],jt.prototype,"headerActions",void 0),m([w()],jt.prototype,"headingLevel",void 0),m([w()],jt.prototype,"location",null),m([w()],jt.prototype,"label",null),m([w()],jt.prototype,"map",null),m([w(),Xt("esri/widgets/Features/t9n/Features")],jt.prototype,"messages",void 0),m([w(),Xt("esri/t9n/common")],jt.prototype,"messagesCommon",void 0),m([w()],jt.prototype,"promises",null),m([w()],jt.prototype,"responsiveActionsEnabled",void 0),m([w({readOnly:!0})],jt.prototype,"selectedFeature",null),m([w({readOnly:!0})],jt.prototype,"selectedDrillInFeature",null),m([w()],jt.prototype,"selectedFeatureIndex",null),m([w({readOnly:!0})],jt.prototype,"selectedFeatureWidget",null),m([w()],jt.prototype,"spatialReference",null),m([w()],jt.prototype,"title",null),m([w()],jt.prototype,"timeZone",null),m([w()],jt.prototype,"updateLocationEnabled",null),m([w()],jt.prototype,"view",null),m([w({type:KD}),LS(["triggerAction","trigger-action"])],jt.prototype,"viewModel",void 0),m([w({type:kde,nonNullable:!0})],jt.prototype,"visibleElements",void 0),m([w()],jt.prototype,"visible",null),jt=m([H("esri.widgets.Features")],jt);const MGe=jt,ia="esri-popup",Wf=`${ia}--is-docked`,Pr={base:ia,baseHidden:`${ia}--hidden`,main:`${ia}__main-container`,shadow:`${ia}--shadow`,isDocked:Wf,isDockedTopLeft:`${Wf}-top-left`,isDockedTopCenter:`${Wf}-top-center`,isDockedTopRight:`${Wf}-top-right`,isDockedBottomLeft:`${Wf}-bottom-left`,isDockedBottomCenter:`${Wf}-bottom-center`,isDockedBottomRight:`${Wf}-bottom-right`,alignTopCenter:`${ia}--aligned-top-center`,alignBottomCenter:`${ia}--aligned-bottom-center`,alignTopLeft:`${ia}--aligned-top-left`,alignBottomLeft:`${ia}--aligned-bottom-left`,alignTopRight:`${ia}--aligned-top-right`,alignBottomRight:`${ia}--aligned-bottom-right`,pointer:`${ia}__pointer`,pointerDirection:`${ia}__pointer-direction`};let pR=class extends KD{constructor(t){super(t)}};pR=m([H("esri.widgets.Popup.PopupViewModel")],pR);const Lde=pR;let Ku=class extends De{constructor(){super(...arguments),this.actionBar=!0,this.closeButton=!0,this.collapseButton=!0,this.featureNavigation=!0,this.featureListLayerTitle=!0,this.heading=!0,this.spinner=!0}};m([w({type:Boolean,nonNullable:!0})],Ku.prototype,"actionBar",void 0),m([w({type:Boolean,nonNullable:!0})],Ku.prototype,"closeButton",void 0),m([w({type:Boolean,nonNullable:!0})],Ku.prototype,"collapseButton",void 0),m([w({type:Boolean,nonNullable:!0})],Ku.prototype,"featureNavigation",void 0),m([w({type:Boolean,nonNullable:!0})],Ku.prototype,"featureListLayerTitle",void 0),m([w({type:Boolean,nonNullable:!0})],Ku.prototype,"heading",void 0),m([w({type:Boolean,nonNullable:!0})],Ku.prototype,"spinner",void 0),Ku=m([H("esri.widgets.Popup.PopupVisibleElements")],Ku);const fR=Ku,CGe=200,RJ={buttonEnabled:!0,position:"auto",breakpoint:{width:544}};let zt=class extends bi{constructor(t,i){super(t,i),this._dockAction=new bm({id:"popup-dock-action"}),this._featuresWidget=new MGe({responsiveActionsEnabled:!0}),this._containerNode=null,this._mainContainerNode=null,this._pointerOffsetInPx=16,this._focusAbortController=null,this.alignment="auto",this.dockEnabled=!1,this.headingLevel=2,this.messages=null,this.viewModel=new Lde,this.visibleElements=new fR}initialize(){this.addHandles([me(()=>{var t,i;return[(i=(t=this.viewModel)==null?void 0:t.view)==null?void 0:i.widthBreakpoint,this.dockEnabled]},()=>this._handleDockIcon(),Je),me(()=>{var t,i;return[this.dockEnabled,(t=this.messages)==null?void 0:t.undock,(i=this.messages)==null?void 0:i.dock]},()=>this._handleDockEnabled(),Je),me(()=>this.dockOptions,t=>{const{_dockAction:i}=this,r=this._featuresWidget.headerActions;r.remove(i),t.buttonEnabled&&r.add(i)},Je),me(()=>{var t;return(t=this.viewModel)==null?void 0:t.screenLocation},()=>this._positionContainer()),me(()=>{var t;return[(t=this.viewModel)==null?void 0:t.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),me(()=>{var t,i,r,n,o,u,f;return[(t=this.viewModel)==null?void 0:t.screenLocation,(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.padding,(o=(n=this.viewModel)==null?void 0:n.view)==null?void 0:o.size,(u=this.viewModel)==null?void 0:u.active,(f=this.viewModel)==null?void 0:f.location,this.alignment]},()=>this.reposition()),me(()=>{var t,i;return(i=(t=this.viewModel)==null?void 0:t.view)==null?void 0:i.size},(t,i)=>this._updateDockEnabledForViewSize(t,i)),me(()=>{var t;return(t=this.viewModel)==null?void 0:t.view},(t,i)=>this._viewChange(t,i)),me(()=>{var t,i;return(i=(t=this.viewModel)==null?void 0:t.view)==null?void 0:i.ready},(t,i)=>this._viewReadyChange(t??!1,i??!1)),me(()=>this.viewModel,()=>this._featuresWidget.viewModel=this.viewModel,Je),me(()=>this._featureNavigationTop,t=>this._featuresWidget.featureNavigationTop=t,Je),me(()=>this.headingLevel,t=>this._featuresWidget.headingLevel=t,Je),me(()=>this.visibleElements.actionBar,t=>this._featuresWidget.visibleElements.actionBar=!!t,Je),me(()=>this.visibleElements.closeButton,t=>this._featuresWidget.visibleElements.closeButton=!!t,Je),me(()=>this.visibleElements.collapseButton,t=>this._featuresWidget.visibleElements.collapseButton=!!t,Je),me(()=>this.visibleElements.heading,t=>this._featuresWidget.visibleElements.heading=!!t,Je),me(()=>this.visibleElements.spinner,t=>this._featuresWidget.visibleElements.spinner=!!t,Je),me(()=>this.visibleElements.featureNavigation,t=>this._featuresWidget.visibleElements.featureNavigation=!!t,Je),me(()=>this.visibleElements.featureListLayerTitle,t=>this._featuresWidget.visibleElements.featureListLayerTitle=!!t,Je),Lr(()=>this._featuresWidget,"trigger-header-action",t=>{t.action===this._dockAction&&(this.dockEnabled=!this.dockEnabled)})])}normalizeCtorArgs(t){const i={...t};return(t==null?void 0:t.visibleElements)!=null&&(i.visibleElements=new fR(t.visibleElements),t.collapseEnabled!=null&&(i.visibleElements.collapseButton=t.collapseEnabled),t.spinnerEnabled!=null&&(i.visibleElements.spinner=t.spinnerEnabled)),i}destroy(){var t,i;this._dockAction.destroy(),(t=this._featuresWidget)==null||t.destroy(),(i=this._focusAbortController)==null||i.abort()}get _featureNavigationTop(){const{currentAlignment:t,currentDockPosition:i}=this;return t==="bottom-left"||t==="bottom-center"||t==="bottom-right"||i==="top-left"||i==="top-center"||i==="top-right"}get actions(){return this.viewModel.actions}set actions(t){this.viewModel.actions=t}get active(){return this.viewModel.active}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(t){this.viewModel.autoCloseEnabled=t}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(t){this.viewModel.defaultPopupTemplateEnabled=t}get content(){return this.viewModel.content}set content(t){this.viewModel.content=t}get collapsed(){return this._featuresWidget.collapsed}set collapsed(t){this._featuresWidget.collapsed=t}get collapseEnabled(){return bc(Se.getLogger(this),"collapseEnabled",{replacement:"PopupVisibleElements.collapseButton",version:"4.29"}),this.visibleElements.collapseButton}set collapseEnabled(t){bc(Se.getLogger(this),"collapseEnabled",{replacement:"PopupVisibleElements.collapseButton",version:"4.29"}),this.visibleElements.collapseButton=t}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||RJ}set dockOptions(t){var g,b;const i={...RJ},r=(b=(g=this.viewModel)==null?void 0:g.view)==null?void 0:b.breakpoints,n={};r&&(n.width=r.xsmall,n.height=r.xsmall);const o={...i,...t},u={...i.breakpoint,...n},{breakpoint:f}=o;typeof f=="object"?o.breakpoint={...u,...f}:f&&(o.breakpoint=u),this._set("dockOptions",o),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get featureMenuOpen(){return this.viewModel.featureMenuOpen}set featureMenuOpen(t){this.viewModel.featureMenuOpen=t}get features(){return this.viewModel.features}set features(t){this.viewModel.features=t}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(t){this.viewModel.highlightEnabled=t}get icon(){return"popup"}set icon(t){this._overrideIfSome("icon",t)}get location(){return this.viewModel.location}set location(t){this.viewModel.location=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get promises(){return this.viewModel.promises}set promises(t){this.viewModel.promises=t}get selectedFeature(){return this.viewModel.selectedFeature}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(t){this.viewModel.selectedFeatureIndex=t}get selectedFeatureWidget(){return this._featuresWidget.selectedFeatureWidget}get spinnerEnabled(){return bc(Se.getLogger(this),"spinnerEnabled",{replacement:"PopupVisibleElements.spinner",version:"4.29"}),this.visibleElements.spinner}set spinnerEnabled(t){bc(Se.getLogger(this),"spinnerEnabled",{replacement:"PopupVisibleElements.spinner",version:"4.29"}),this.visibleElements.spinner=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(t){this.viewModel.updateLocationEnabled=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get visible(){return this.viewModel.visible}set visible(t){this.viewModel.visible=t}blur(){const{active:t}=this.viewModel;t||Se.getLogger(this).warn("Popup can only be blurred when currently active."),this._featuresWidget.blur()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(t,i){return this.viewModel.fetchFeatures(t,i)}focus(){const{active:t}=this.viewModel;t||Se.getLogger(this).warn("Popup can only be focused when currently active."),this._handleFocus()}next(){return this.viewModel.next()}open(t){const i=!!t&&!!t.featureMenuOpen,r={collapsed:!!t&&!!t.collapsed,featureMenuOpen:i};this.set(r),this.viewModel.open(t),t!=null&&t.shouldFocus&&this._handleFocus(!0)}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(t){return this.viewModel.triggerAction(t)}render(){var I,M,k,L;const{dockEnabled:t,currentAlignment:i,currentDockPosition:r}=this,{active:n,screenLocation:o}=this.viewModel,u=n&&t,f=n&&!t,g=(M=(I=this.selectedFeature)==null?void 0:I.layer)==null?void 0:M.title,b=(L=(k=this.selectedFeature)==null?void 0:k.layer)==null?void 0:L.id,E={[Pr.alignTopCenter]:i==="top-center",[Pr.alignBottomCenter]:i==="bottom-center",[Pr.alignTopLeft]:i==="top-left",[Pr.alignBottomLeft]:i==="bottom-left",[Pr.alignTopRight]:i==="top-right",[Pr.alignBottomRight]:i==="bottom-right",[Pr.isDocked]:u,[Pr.shadow]:f,[Pr.isDockedTopLeft]:r==="top-left",[Pr.isDockedTopCenter]:r==="top-center",[Pr.isDockedTopRight]:r==="top-right",[Pr.isDockedBottomLeft]:r==="bottom-left",[Pr.isDockedBottomCenter]:r==="bottom-center",[Pr.isDockedBottomRight]:r==="bottom-right"};return G("div",{afterCreate:this._positionContainer,afterUpdate:this._positionContainer,bind:this,class:this.classes(Pr.base,E,{[Pr.baseHidden]:!o&&!t}),"data-layer-id":b,"data-layer-title":g,role:"presentation"},n?[this._renderMainContainer(),this._renderPointer()]:null)}_renderPointer(){return this.dockEnabled?null:G("div",{class:Pr.pointer,key:"popup-pointer",role:"presentation"},G("div",{class:this.classes(Pr.pointerDirection,Pr.shadow)}))}_renderMainContainer(){const{dockEnabled:t}=this,i={[Pr.shadow]:t};return G("div",{afterCreate:this._setMainContainerNode,afterUpdate:this._setMainContainerNode,bind:this,class:this.classes(Pr.main,Ge.widget,i)},this._featuresWidget.render())}_getAnimationDurationMS(){const{_containerNode:t}=this;return t?1e3*parseFloat(window.getComputedStyle(t).animationDuration):CGe}async _handleFocus(t=!1){var r;(r=this._focusAbortController)==null||r.abort(),this._focusAbortController=new AbortController;const i=this._focusAbortController.signal;t&&await cl(()=>{var n;return((n=this.viewModel)==null?void 0:n.active)===!0},{signal:i}),await Do(F6(i)),await Do(ym(this._getAnimationDurationMS(),i)),this._featuresWidget.focus()}_isOutsideView(t){const{popupHeight:i,popupWidth:r,screenLocation:n,side:o,view:u}=t;if(isNaN(r)||isNaN(i)||!u||!n)return!1;const f=u.padding;return o==="right"&&n.x+r/2>u.width-f.right||o==="left"&&n.x-r/2<f.left||o==="top"&&n.y-i<f.top||o==="bottom"&&n.y+i>u.height-f.bottom}_calculateAutoAlignment(t){if(t!=="auto")return t;const{_pointerOffsetInPx:i,_containerNode:r,_mainContainerNode:n,viewModel:o}=this,{screenLocation:u,view:f}=o;if(u==null||!f||!r)return"top-center";function g(W){return parseInt(W.replaceAll(/[^-\d.]/g,""),10)}const b=n?window.getComputedStyle(n,null):null,E=b?g(b.getPropertyValue("max-height")):0,I=b?g(b.getPropertyValue("height")):0,{height:M,width:k}=r.getBoundingClientRect(),L=k+i,P=Math.max(M,E,I)+i,D=this._isOutsideView({popupHeight:P,popupWidth:L,screenLocation:u,side:"right",view:f}),j=this._isOutsideView({popupHeight:P,popupWidth:L,screenLocation:u,side:"left",view:f}),z=this._isOutsideView({popupHeight:P,popupWidth:L,screenLocation:u,side:"top",view:f}),V=this._isOutsideView({popupHeight:P,popupWidth:L,screenLocation:u,side:"bottom",view:f});return j?z?"bottom-right":"top-right":D?z?"bottom-left":"top-left":z?V?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(t){return typeof t=="function"?t.call(this):t}_getCurrentAlignment(){const{alignment:t,dockEnabled:i}=this;return i||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(t)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(t){const i=["left","right"];return ha(this.container)&&i.reverse(),t==null?void 0:t.replace(/leading/gi,i[0]).replaceAll(/trailing/gi,i[1])}_callDockPosition(t){return typeof t=="function"?t.call(this):t}_getDockPosition(){var t;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((t=this.dockOptions)==null?void 0:t.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_calculateAutoDockPosition(t){var f;if(t!=="auto")return t;const i=(f=this.viewModel)==null?void 0:f.view,r=ha(this.container)?"top-left":"top-right";if(!i)return r;const n=i.padding||{left:0,right:0,top:0,bottom:0},o=i.width-n.left-n.right,{breakpoints:u}=i;return u&&o<=u.xsmall?"bottom-center":r}_getDockIcon(){const t=this._getDockPosition();if(this.dockEnabled)return"minimize";switch(t){case"top-left":case"bottom-left":return"dock-left";case"top-center":return"maximize";case"bottom-center":return"dock-bottom";default:return"dock-right"}}_handleDockIcon(){this._dockAction.icon=this._getDockIcon()}_handleDockEnabled(){var t,i;this._dockAction.title=this.dockEnabled?(t=this.messages)==null?void 0:t.undock:(i=this.messages)==null?void 0:i.dock}_setMainContainerNode(t){this._mainContainerNode=t}_positionContainer(t=this._containerNode){if(t&&(this._containerNode=t),!this._containerNode)return;const{screenLocation:i}=this.viewModel,{width:r}=this._containerNode.getBoundingClientRect(),n=this._calculatePositionStyle(i,r);n&&Object.assign(this._containerNode.style,n)}_calculateFullWidth(t){const{currentAlignment:i,_pointerOffsetInPx:r}=this;return i==="top-left"||i==="bottom-left"||i==="top-right"||i==="bottom-right"?t+r:t}_calculateAlignmentPosition(t,i,r,n){const{currentAlignment:o,_pointerOffsetInPx:u}=this;if(!r)return;const{padding:f}=r,g=n/2,b=r.height-i,E=r.width-t;return o==="bottom-center"?{top:i+u-f.top,left:t-g-f.left}:o==="top-left"?{bottom:b+u-f.bottom,right:E+u-f.right}:o==="bottom-left"?{top:i+u-f.top,right:E+u-f.right}:o==="top-right"?{bottom:b+u-f.bottom,left:t+u-f.left}:o==="bottom-right"?{top:i+u-f.top,left:t+u-f.left}:o==="top-center"?{bottom:b+u-f.bottom,left:t-g-f.left}:void 0}_calculatePositionStyle(t,i){const{dockEnabled:r,view:n}=this;if(!n)return;if(r)return{left:"",top:"",right:"",bottom:""};if(t==null||!i)return;const o=this._calculateFullWidth(i),u=this._calculateAlignmentPosition(t.x,t.y,n,o);return u?{top:u.top!==void 0?`${u.top}px`:"auto",left:u.left!==void 0?`${u.left}px`:"auto",bottom:u.bottom!==void 0?`${u.bottom}px`:"auto",right:u.right!==void 0?`${u.right}px`:"auto"}:void 0}_viewChange(t,i){t&&i&&(this.close(),this.clear())}_viewReadyChange(t,i){t?this._wireUpView():i&&(this.close(),this.clear())}_wireUpView(){this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(t,i,r){const[n,o]=t,[u,f]=i,{width:g=0,height:b=0}=r??{};return n<=g&&u>g||n>g&&u<=g||o<=b&&f>b||o>b&&f<=b}_updateDockEnabledForViewSize(t,i){var E,I;if(!t||!i)return;const r=((I=(E=this.viewModel)==null?void 0:E.view)==null?void 0:I.padding)||{left:0,right:0,top:0,bottom:0},n=r.left+r.right,o=r.top+r.bottom,u=[],f=[];u[0]=t[0]-n,u[1]=t[1]-o,f[0]=i[0]-n,f[1]=i[1]-o;const{dockOptions:g}=this,b=g.breakpoint;this._dockingThresholdCrossed(u,f,b)&&this._setDockEnabledForViewSize(g),this._setCurrentDockPosition()}_toggleScreenLocationEnabled(){const{dockEnabled:t,viewModel:i}=this;if(!i)return;const r=i.active&&!t;i.screenLocationEnabled=r}_shouldDockAtCurrentViewSize(t){var g,b;const i=t.breakpoint,r=(b=(g=this.viewModel)==null?void 0:g.view)==null?void 0:b.ui;if(!r)return!1;const{width:n,height:o}=r;if(isNaN(n)||isNaN(o)||!i)return!1;const u=i.hasOwnProperty("width")&&n<=(i.width??0),f=i.hasOwnProperty("height")&&o<=(i.height??0);return u||f}_setDockEnabledForViewSize(t){t.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(t))}};m([w({readOnly:!0})],zt.prototype,"_featureNavigationTop",null),m([w()],zt.prototype,"actions",null),m([w({readOnly:!0})],zt.prototype,"active",null),m([w()],zt.prototype,"alignment",void 0),m([w()],zt.prototype,"autoCloseEnabled",null),m([w()],zt.prototype,"defaultPopupTemplateEnabled",null),m([w()],zt.prototype,"content",null),m([w()],zt.prototype,"collapsed",null),m([w()],zt.prototype,"collapseEnabled",null),m([w({readOnly:!0})],zt.prototype,"currentAlignment",null),m([w({readOnly:!0})],zt.prototype,"currentDockPosition",null),m([w()],zt.prototype,"dockOptions",null),m([w()],zt.prototype,"dockEnabled",void 0),m([w({readOnly:!0})],zt.prototype,"featureCount",null),m([w()],zt.prototype,"featureMenuOpen",null),m([w()],zt.prototype,"features",null),m([w()],zt.prototype,"goToOverride",null),m([w()],zt.prototype,"headingLevel",void 0),m([w()],zt.prototype,"highlightEnabled",null),m([w()],zt.prototype,"icon",null),m([w()],zt.prototype,"location",null),m([w()],zt.prototype,"label",null),m([w(),Xt("esri/widgets/Popup/t9n/Popup")],zt.prototype,"messages",void 0),m([w()],zt.prototype,"promises",null),m([w({readOnly:!0})],zt.prototype,"selectedFeature",null),m([w()],zt.prototype,"selectedFeatureIndex",null),m([w({readOnly:!0})],zt.prototype,"selectedFeatureWidget",null),m([w()],zt.prototype,"spinnerEnabled",null),m([w()],zt.prototype,"title",null),m([w()],zt.prototype,"updateLocationEnabled",null),m([w()],zt.prototype,"view",null),m([w({type:Lde}),LS(["triggerAction","trigger-action"])],zt.prototype,"viewModel",void 0),m([w()],zt.prototype,"visible",null),m([w({type:fR,nonNullable:!0})],zt.prototype,"visibleElements",void 0),zt=m([H("esri.widgets.Popup")],zt);const Ode=zt,PJ=Object.freeze(Object.defineProperty({__proto__:null,default:Ode},Symbol.toStringTag,{value:"Module"}));let op=class extends be{constructor(t){super(t),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};m([w({type:String,json:{write:!0}})],op.prototype,"facilityIdField",void 0),m([w({type:String,json:{write:!0}})],op.prototype,"layerId",void 0),m([w({type:String,json:{write:!0}})],op.prototype,"nameField",void 0),m([w({type:String,json:{write:!0}})],op.prototype,"siteIdField",void 0),m([w({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],op.prototype,"sublayerId",void 0),op=m([H("esri.layers.support.FacilityLayerInfo")],op);const AGe=op;let Bl=class extends be{constructor(t){super(t),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};m([w({type:String,json:{write:!0}})],Bl.prototype,"facilityIdField",void 0),m([w({type:String,json:{write:!0}})],Bl.prototype,"layerId",void 0),m([w({type:String,json:{write:!0}})],Bl.prototype,"levelIdField",void 0),m([w({type:String,json:{write:!0}})],Bl.prototype,"levelNumberField",void 0),m([w({type:String,json:{write:!0}})],Bl.prototype,"longNameField",void 0),m([w({type:String,json:{write:!0}})],Bl.prototype,"shortNameField",void 0),m([w({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Bl.prototype,"sublayerId",void 0),m([w({type:String,json:{write:!0}})],Bl.prototype,"verticalOrderField",void 0),Bl=m([H("esri.layers.support.LevelLayerInfo")],Bl);const kGe=Bl;let B0=class extends be{constructor(t){super(t),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};m([w({type:String,json:{write:!0}})],B0.prototype,"layerId",void 0),m([w({type:String,json:{write:!0}})],B0.prototype,"nameField",void 0),m([w({type:String,json:{write:!0}})],B0.prototype,"siteIdField",void 0),m([w({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],B0.prototype,"sublayerId",void 0),B0=m([H("esri.layers.support.SiteLayerInfo")],B0);const LGe=B0;let J1=class extends be{constructor(t){super(t),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};m([w({type:kGe,json:{write:!0}})],J1.prototype,"levelLayer",void 0),m([w({type:AGe,json:{write:!0}})],J1.prototype,"facilityLayer",void 0),m([w({type:LGe,json:{write:!0}})],J1.prototype,"siteLayer",void 0),J1=m([H("esri.support.MapFloorInfo")],J1);const OGe=J1;var yR;let K1=yR=class extends be{constructor(e){super(e),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new yR(he({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};m([w({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],K1.prototype,"activeRange",void 0),m([w({type:[Number],json:{write:!0}})],K1.prototype,"currentRangeExtent",void 0),m([w({type:[Number],json:{write:!0}})],K1.prototype,"fullRangeExtent",void 0),K1=yR=m([H("esri.webdoc.RangeInfo")],K1);const YD=K1;var mR;let Yu=mR=class extends be{constructor(e){super(e),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new mR(he({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};m([w({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],Yu.prototype,"enabled",void 0),m([w({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],Yu.prototype,"longNames",void 0),m([w({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],Yu.prototype,"minimized",void 0),m([w({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],Yu.prototype,"pinnedLevels",void 0),m([w({type:String,json:{read:{source:"site"},write:{target:"site"}}})],Yu.prototype,"site",void 0),m([w({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],Yu.prototype,"facility",void 0),m([w({type:String,json:{read:{source:"level"},write:{target:"level"}}})],Yu.prototype,"level",void 0),Yu=mR=m([H("esri.webdoc.widgets.FloorFilter")],Yu);const RGe=Yu;var gR;const Sx=new gt({slider:"slider",picker:"picker"});let Y1=gR=class extends be{constructor(e){super(e),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new gR({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};m([w({type:Sx.apiValues,nonNullable:!0,json:{type:Sx.jsonValues,default:null,read:{reader:Sx.read},write:{isRequired:!0,writer:Sx.write}}})],Y1.prototype,"interactionMode",void 0),m([w({type:Ot,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const e=this.stopInterval!=null;return{enabled:!e,isRequired:!e}}}}})],Y1.prototype,"numStops",void 0),m([w({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],Y1.prototype,"stopInterval",void 0),Y1=gR=m([H("esri.webdoc.widgets.Range")],Y1);const PGe=Y1;var vR;let cn=vR=class extends be{constructor(e){super(e),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(e){return e?wn.fromArray(e):void 0}writeCurrentTimeExtent(e,t,i){e&&vn(i,e.toArray(),t)}readFullTimeExtent(e,t){const i=t.properties;if(!i)return;const r=i.endTime!=null?new Date(i.endTime):null,n=i.startTime!=null?new Date(i.startTime):null;return new wn({start:n,end:r})}writeFullTimeExtent(e,t){if(!e)return;const i=t.properties=t.properties||{},r=e.end,n=e.start;r&&(i.endTime=r!=null?r.getTime():null),n&&(i.startTime=n!=null?n.getTime():null)}readStopInterval(e,t,i){return e?e2.fromJSON({value:e.interval,unit:e.units},i):null}writeStopInterval(e,t,i,r){if(!e)return;const n=e.toJSON(r);vn("properties.timeStopInterval",{interval:n.value,units:n.unit},t)}readStops(e){return e!=null&&e.length?e.map(t=>new Date(t)):null}writeStops(e,t,i){e!=null&&e.length&&vn(i,e.map(r=>r.getTime()),t)}clone(){return new vR(he({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};m([w({type:wn,json:{type:[[Ot,d2]],read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],cn.prototype,"currentTimeExtent",void 0),m([ke("currentTimeExtent")],cn.prototype,"readCurrentTimeExtent",null),m([Pe("currentTimeExtent")],cn.prototype,"writeCurrentTimeExtent",null),m([w({type:wn,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],cn.prototype,"fullTimeExtent",void 0),m([ke("fullTimeExtent")],cn.prototype,"readFullTimeExtent",null),m([Pe("fullTimeExtent")],cn.prototype,"writeFullTimeExtent",null),m([w({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],cn.prototype,"loop",void 0),m([w({type:Ot,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var r;const e=!!this.stopInterval,t=!!((r=this.stops)!=null&&r.length),i=!(e||t);return{enabled:i,isRequired:i}}}}})],cn.prototype,"numStops",void 0),m([w({type:[1,2],nonNullable:!0,json:{type:Ot,read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],cn.prototype,"numThumbs",void 0),m([w({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],cn.prototype,"stopDelay",void 0),m([w({type:e2,json:{read:{source:"properties.timeStopInterval"},write:{target:{"properties.timeStopInterval.interval":{type:Number},"properties.timeStopInterval.units":{type:jD.jsonValues.filter(e=>e!=="esriTimeUnitsUnknown")}},overridePolicy(){var i;const e=this.numStops!=null,t=!!((i=this.stops)!=null&&i.length);return{enabled:!t,isRequired:!(e||t)}}}}})],cn.prototype,"stopInterval",void 0),m([ke("stopInterval")],cn.prototype,"readStopInterval",null),m([Pe("stopInterval")],cn.prototype,"writeStopInterval",null),m([w({type:[Date],json:{type:[Ot],read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],cn.prototype,"stops",void 0),m([ke("stops")],cn.prototype,"readStops",null),m([Pe("stops")],cn.prototype,"writeStops",null),cn=vR=m([H("esri.webdoc.widgets.TimeSlider")],cn);const NGe=cn;var wR;let X1=wR=class extends be{constructor(e){super(e),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new wR(he({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};m([w({type:PGe,json:{write:!0}})],X1.prototype,"range",void 0),m([w({type:NGe,json:{write:!0}})],X1.prototype,"timeSlider",void 0),m([w({type:RGe,json:{write:!0}})],X1.prototype,"floorFilter",void 0),X1=wR=m([H("esri.webdoc.Widgets")],X1);const FGe=X1,DGe={width:600,height:400},xx=1.5;function jGe(e,t){t=t||DGe;let{width:i,height:r}=t;const n=i/r;return n<xx?r=i/xx:n>xx&&(i=r*xx),i>e.width&&(r*=e.width/i,i=e.width),r>e.height&&(i*=e.height/r,r=e.height),{width:Math.round(i),height:Math.round(r)}}function zGe(e,t){return{...Rde(e,t),readResourcePaths:[]}}function sdt(e,t,i){const r=_r(e.itemUrl);return{...Rde(e,t),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:r?{rootPath:r.path,writtenUrls:[]}:null,resources:i?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function Rde(e,t){return{origin:t,url:_r(e.itemUrl),portal:e.portal||Ur.getDefault(),portalItem:e}}let q0=class extends be{constructor(t){super(t),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const t=this.geometries.map(n=>n.toJSON()),i=this.geometries[0],r={};return r.outSR=Ov(this.outSpatialReference),r.inSR=Ov(i.spatialReference),r.geometries=JSON.stringify({geometryType:b2(i),geometries:t}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(r.transformForward=this.transformForward),r}};m([w()],q0.prototype,"geometries",void 0),m([w({json:{read:{source:"outSR"}}})],q0.prototype,"outSpatialReference",void 0),m([w()],q0.prototype,"transformation",void 0),m([w()],q0.prototype,"transformForward",void 0),q0=m([H("esri.rest.support.ProjectParameters")],q0);const XD=q0,VGe=ir(XD);async function Pde(e,t,i){t=VGe(t);const r=R2(e),n={...r.query,f:"json",...t.toJSON()},o=t.outSpatialReference,u=b2(t.geometries[0]),f=MT(n,i);return Ct(r.path+"/project",f).then(({data:{geometries:g}})=>kae(g,u,o))}function UGe(e,t){var i;return t.resourceInfo?Nde(t,t.resourceInfo,{origin:e.origin}):(i=t.portalItem)!=null&&i.id?GGe(e,t,t.portalItem):Promise.resolve()}function Nde(e,t,i){const r={context:{...i,layerContainerType:"operational-layers"}};return e.portalItem&&(r.context.portal=e.portalItem.portal||Ur.getDefault()),ce(()=>import("./layersCreator-Bg_-AcQ5.js"),__vite__mapDeps([128,129,130,131]),import.meta.url).then(({populateOperationalLayers:n})=>{const o=[],u=t.operationalLayers;u!=null&&u.length&&o.push(n(e.layers,u,r));const f={...r,context:{...r.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},g=t.tables;return g!=null&&g.length&&o.push(n(e.tables,g,f)),Promise.allSettled(o).then(()=>{})})}async function GGe(e,t,i){var u;if(await i.load().catch(f=>{throw new ne(`${e.name}:load-portal-item`,"Failed to load portal item",{error:f})}),i.type!==e.itemType)throw new ne(`${e.name}:invalid-portal-item`,`Invalid portal item type '${i.type}', expected '${e.itemType}'`,{type:i.type});const r=await i.fetchData();t.resourceInfo=r;const n=zGe(i,e.origin);await BGe(e,t,r,n),t.resourceReferences={portalItem:i,paths:n.readResourcePaths};const o=await HGe(t.initialViewProperties,i,Se.getLogger(t));if(o){const f=((u=t.initialViewProperties)==null?void 0:u.clone())??e.createInitialViewProperties();f.viewpoint=o,t.initialViewProperties=f}}function BGe(e,t,i,r){const n=qGe(e,i);return t.read(n,r),Nde(t,n,r)}function qGe(e,t){const i=e.parseVersion(t.version||"",e.name);return e.currentVersion.validate(i),t.version=`${i.major}.${i.minor}`,t}async function HGe(e,t,i){var o;if((o=e==null?void 0:e.viewpoint)==null?void 0:o.targetGeometry)return null;const n=await WGe(e,t,i);return n?new Fn({targetGeometry:n}):null}async function WGe(e,t,i){const r=e==null?void 0:e.spatialReference,n=t==null?void 0:t.extent;if(!r||!n)return null;if(r.isWGS84)return n.clone();if(r.isWebMercator)return $c(n);const{getGeometryServiceURL:o}=await ce(()=>import("./geometryServiceUtils-CfUYqhL3.js"),[],import.meta.url);try{const u=await o(t),f=new XD({geometries:[n],outSpatialReference:r});return(await Pde(u,f))[0]}catch(u){i.error("Error projecting item's extent:",u)}return null}function NJ(e){return{enabled:!!(e!=null&&e.length)}}var bR;let Q1=bR=class extends be{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new bR({exactMatch:this.exactMatch,type:this.type,name:this.name})}};m([w({type:Boolean,json:{write:!0}})],Q1.prototype,"exactMatch",void 0),m([w({type:String,json:{write:!0}})],Q1.prototype,"name",void 0),m([Ke(NF)],Q1.prototype,"type",void 0),Q1=bR=m([H("esri.webdoc.applicationProperties.SearchLayerField")],Q1);const ZGe=Q1;var _R;let eg=_R=class extends be{constructor(e){super(e),this.field=null,this.id=null,this.subLayer=null}clone(){return new _R(he({field:this.field,id:this.id,subLayer:this.subLayer}))}};m([w({type:ZGe,json:{write:{isRequired:!0}}})],eg.prototype,"field",void 0),m([w({type:String,json:{write:{isRequired:!0}}})],eg.prototype,"id",void 0),m([w({type:Ot,json:{write:!0}})],eg.prototype,"subLayer",void 0),eg=_R=m([H("esri.webdoc.applicationProperties.SearchLayer")],eg);const JGe=eg;var SR;let tg=SR=class extends be{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new SR({exactMatch:this.exactMatch,type:this.type,name:this.name})}};m([w({type:Boolean,json:{write:!0}})],tg.prototype,"exactMatch",void 0),m([w({type:String,json:{write:!0}})],tg.prototype,"name",void 0),m([Ke(NF)],tg.prototype,"type",void 0),tg=SR=m([H("esri.webdoc.applicationProperties.SearchTableField")],tg);const KGe=tg;var xR;let Xb=xR=class extends be{constructor(e){super(e),this.field=null,this.id=null}clone(){return new xR(he({field:this.field,id:this.id}))}};m([w({type:KGe,json:{write:{isRequired:!0}}})],Xb.prototype,"field",void 0),m([w({type:String,json:{write:{isRequired:!0}}})],Xb.prototype,"id",void 0),Xb=xR=m([H("esri.webdoc.applicationProperties.SearchTable")],Xb);const YGe=Xb;var ER;const Fde=Oe.ofType(JGe),Dde=Oe.ofType(YGe);let Xu=ER=class extends be{constructor(e){super(e),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new Fde,this.tables=new Dde}readAddressSearchEnabled(e){return!e}writeAddressSearchEnabled(e,t,i){t[i]=!e}clone(){return new ER(he({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};m([w({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],Xu.prototype,"addressSearchEnabled",void 0),m([ke("addressSearchEnabled")],Xu.prototype,"readAddressSearchEnabled",null),m([Pe("addressSearchEnabled")],Xu.prototype,"writeAddressSearchEnabled",null),m([w({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],Xu.prototype,"enabled",void 0),m([w({type:String,json:{write:!0}})],Xu.prototype,"hintText",void 0),m([w({type:Fde,json:{write:{overridePolicy:NJ},origins:{"web-scene":{write:{isRequired:!0}}}}})],Xu.prototype,"layers",void 0),m([w({type:Dde,json:{read:!0,write:{overridePolicy:NJ}}})],Xu.prototype,"tables",void 0),Xu=ER=m([H("esri.webdoc.applicationProperties.Search")],Xu);const XGe=Xu;var IR;let z4=IR=class extends be{constructor(e){super(e),this.search=null}clone(){return new IR(he({search:this.search}))}};m([w({type:XGe,json:{write:!0}})],z4.prototype,"search",void 0),z4=IR=m([H("esri.webdoc.applicationProperties.Viewing")],z4);const QGe=z4;var TR;let ig=TR=class extends be{constructor(e){super(e),this.editing=null,this.offline=null,this.viewing=null}clone(){return new TR(he({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};m([w({json:{write:!0}})],ig.prototype,"editing",void 0),m([w({json:{write:!0}})],ig.prototype,"offline",void 0),m([w({type:QGe,json:{write:!0}})],ig.prototype,"viewing",void 0),ig=TR=m([H("esri.webmap.ApplicationProperties")],ig);const eBe=ig;var $R;let Bh=$R=class extends be{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}get isSecureUrl(){return Cte(this.url)}get isDataURI(){return hd(this.url)}clone(){return new $R({url:this.url})}};m([w({type:String,json:{write:{isRequired:!0}}})],Bh.prototype,"url",void 0),m([w()],Bh.prototype,"isSecureUrl",null),m([w()],Bh.prototype,"isDataURI",null),Bh=$R=m([H("esri.webdoc.support.SlideThumbnail")],Bh);const tBe={type:wn,json:{read:{source:"timeExtent",reader:e=>e?Array.isArray(e)?wn.fromArray(e):wn.fromJSON(e):null},write:{writer:(e,t,i,r)=>{e&&(e.isEmpty?r!=null&&r.messages&&r.messages.push(new ne("invalid-timeExtent","TimeExtent cannot be empty")):t[i]=e.toArray())},target:{timeExtent:{type:[[Ot,d2]]}}}}};var MR;let Qu=MR=class extends Eu(be){constructor(e){super(e),this.name=null,this.thumbnail=new Bh,this.timeExtent=null}castThumbnail(e){return typeof e=="string"?new Bh({url:e}):ir(Bh,e)}set viewpoint(e){const{targetGeometry:t,scale:i}=e;t!=null&&t.type==="point"&&i==null&&Se.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",e),this._set("viewpoint",e)}readViewpoint(e,t){const{extent:i,viewpoint:r}=t;return Fn.fromJSON(r||{targetGeometry:i})}writeViewpoint(e,t,i,r){if(!e)return;const{targetGeometry:n}=e;if(n==null||n.type==="extent")n!=null&&(t.extent=n.toJSON()),t[i]=e.toJSON();else{const o="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";r!=null&&r.messages?r.messages.push(new ne("property:unsupported",o)):Se.getLogger(this).error(o)}}clone(){return new MR(he({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};m([w({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],Qu.prototype,"name",void 0),m([w({type:Bh,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],Qu.prototype,"thumbnail",void 0),m([St("thumbnail")],Qu.prototype,"castThumbnail",null),m([w(tBe)],Qu.prototype,"timeExtent",void 0),m([w({type:Fn,nonNullable:!0,json:{write:!0}})],Qu.prototype,"viewpoint",null),m([ke("viewpoint",["extent","viewpoint"])],Qu.prototype,"readViewpoint",null),m([Pe("viewpoint")],Qu.prototype,"writeViewpoint",null),Qu=MR=m([H("esri.webmap.Bookmark")],Qu);const iBe=Qu;let bh=class extends It(De){constructor(t){super(t),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.timeExtent=null,this.timeZone=ba,this.viewpoint=null}};m([w({type:PT})],bh.prototype,"background",void 0),m([w({type:YD})],bh.prototype,"rangeInfo",void 0),m([w({type:st})],bh.prototype,"spatialReference",void 0),m([w({type:wn})],bh.prototype,"timeExtent",void 0),m([w({nonNullable:!0})],bh.prototype,"timeZone",void 0),m([w({type:Fn})],bh.prototype,"viewpoint",void 0),bh=m([H("esri.webmap.InitialViewProperties")],bh);const JI=bh,jde=Oe.ofType(iBe),rBe=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),nBe="ArcGIS Pro",sBe=Xhe.JSAPI;let zi=class extends KT(pl.LoadableMixin(wS(Dse))){constructor(t){super(t),this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1,this._thumbnailFilename=null,this._updateFromPromise=null,this.resourceReferences={portalItem:null,paths:[]},this.applicationProperties=null,this.bookmarks=new jde,this.floorInfo=null,this.initialViewProperties=new JI,this.portalItem=null,this.sourceVersion=null,this.widgets=null,this._debouncedSaveOperations=yu(async(i,r,n)=>{const{save:o,saveAs:u}=await ce(()=>import("./webdocSaveUtils-CH79mBab.js"),__vite__mapDeps([257,220,221,258,259,223]),import.meta.url);switch(i){case _c.SAVE:return o(this.context,this,r);case _c.SAVE_AS:return u(this.context,this,n,r)}}),this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){this.portalItem=Jt(this.portalItem)}initialize(){if(this.when().catch(t=>{Se.getLogger(this).error("#load()","Failed to load web map",t)}),this.resourceInfo){let t;try{t=this._validateJSON(this.resourceInfo)}catch(i){return void this.addResolvingPromise(Promise.reject(i))}this.read(t)}}set authoringApp(t){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",t)}writeAuthoringApp(t,i){t&&this._isAuthoringAppSetByUser?i.authoringApp=t:i.authoringApp=sBe}set authoringAppVersion(t){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",t)}writeAuthoringAppVersion(t,i){t&&this._isAuthoringAppVersionSetByUser?i.authoringAppVersion=t:i.authoringAppVersion=Nte}readInitialViewProperties(t,i){var u,f;const r=new JI;i.background&&(r.background=PT.fromJSON(i.background));const n=(u=i.initialState)==null?void 0:u.timeExtent;n&&(r.timeExtent=wn.fromArray(n));const o=(f=i.initialState)==null?void 0:f.viewpoint;return o&&(o.rotation&&fv.parse(i.version||"","webmap").lessThan(2,20)&&i.authoringApp===nBe&&(o.rotation*=-1),r.viewpoint=Fn.fromJSON(o)),i.mapRangeInfo&&(r.rangeInfo=YD.fromJSON(i.mapRangeInfo)),i.spatialReference&&(r.spatialReference=st.fromJSON(i.spatialReference)),i.timeZone&&(r.timeZone=i.timeZone),r}writeInitialViewProperties(t,i,r,n){var f;if(!t)return;(f=t.background)!=null&&f.color&&(i.background=t.background.write({},n));const{timeExtent:o,viewpoint:u}=t;if(u||o){const g={};u&&(g.viewpoint=u.write({},n)),o&&(g.timeExtent=o.toArray()),i.initialState=g}t.rangeInfo&&(i.mapRangeInfo=t.rangeInfo.toJSON(n)),t.spatialReference&&(i.spatialReference=t.spatialReference.write({},n)),i.timeZone=t.timeZone}writeLayers(t,i,r,n){i[r]=this._writeLayers(t,n,"operational-layers")}readSourceVersion(t,i){const[r,n]=i.version.split(".");return new fv(parseInt(r,10),parseInt(n,10))}writeSourceVersion(t,i,r){i[r]=`${this.context.currentVersion.major}.${this.context.currentVersion.minor}`}writeTables(t,i,r,n){const o=this._writeLayers(t,n,"tables");o.length&&(i[r]=o)}get thumbnailUrl(){var t;return((t=this.portalItem)==null?void 0:t.thumbnailUrl)||null}set thumbnailUrl(t){t?(this._override("thumbnailUrl",t),this._thumbnailFilename=this._generateCustomThumbnailFilename(t)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(t){return this.addResolvingPromise(UGe(this.context,this)),Promise.resolve(this)}loadAll(){return oT(this,t=>{t(this.ground,this.basemap,this.layers,this.tables)})}read(t,i){i={...i,origin:this.context.origin};const r=this._getAuthoringPropsState();vte(this,t,n=>super.read(t,n),i),this._restoreAuthoringPropsFromState(r)}write(t,i){if(this.loadStatus!=="loaded"){const r=new ne("webmap:not-loaded","Web map must be loaded before it can be serialized");throw Se.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),r}return this._removeDanglingLayerRefs(),i={...i,origin:this.context.origin,restrictedWebMapWriting:!0,webmap:this},super.write(t,i)}async save(t){return this._debouncedSaveOperations(_c.SAVE,t)}async saveAs(t,i){return this._debouncedSaveOperations(_c.SAVE_AS,i,t)}async updateFrom(t,i){const r=this._updateFromInternal(t,i);this._updateFromPromise=r,await r,r===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(t){var r,n,o,u;const i=this.resourceInfo;return this._collectAllLayersJSON([...((r=i==null?void 0:i.baseMap)==null?void 0:r.baseMapLayers)||[],...(i==null?void 0:i.operationalLayers)||[],...((u=(o=(n=this.basemap)==null?void 0:n.resourceInfo)==null?void 0:o.data)==null?void 0:u.baseMapLayers)||[]]).find(f=>f.id===t.id)}async updateItemThumbnail(){var t;this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await((t=this.portalItem)==null?void 0:t.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename})),this._clearThumbnailOverride())}getThumbnailState(){let t=this.thumbnailUrl;return t&&(t=this._isOverridden("thumbnailUrl")?t:Lte(t,"w","8192")),{thumbnailUrl:t,filename:this._thumbnailFilename}}restoreThumbnailFromState(t){this.thumbnailUrl=t.thumbnailUrl,this._thumbnailFilename=t.filename}_collectAllLayersJSON(t){return t.reduce((i,r)=>(i.push(r),r.layerType==="GroupLayer"&&(i=i.concat(this._collectAllLayersJSON(r.layers||[]))),i),[])}_writeLayers(t,i,r){return i={...i,layerContainerType:r},t.map(n=>$8(n,r==="tables"?null:this.getLayerJSONFromResourceInfo(n),i)).filter(cr).toArray()}_validateJSON(t){const i=fv.parse(t.version||"","webmap");return this.context.currentVersion.validate(i),t.version=`${i.major}.${i.minor}`,t}_removeDanglingLayerRefs(){var u,f;const t=this.applicationProperties,i=(u=t==null?void 0:t.viewing)==null?void 0:u.search,r=g=>this.allLayers.some(b=>b.id===g);if(i!=null&&i.layers&&(i.layers=i.layers.filter(g=>r(g.id))),i!=null&&i.tables&&(i.tables=i.tables.filter(g=>this.tables.some(b=>b.id===g.id))),t){const g=(f=t.editing)==null?void 0:f.locationTracking;g!=null&&g.info&&!r(g.info.layerId)&&(t.editing=null)}const n="presentation"in this?this.presentation:null,o=n==null?void 0:n.slides;o&&o.forEach(g=>{g.visibleLayers&&(g.visibleLayers=g.visibleLayers.filter(b=>r(b.id)))})}async _updateFromInternal(t,i){if(i??(i={}),await cl(()=>t.ready),this._updateInitialViewProperties(t,i),t.map===this)for(const r of t.allLayerViews)"visible"in r&&"visible"in r.layer&&r._isOverridden("visible")&&(r.layer.visible=r.visible),"featureEffect"in r&&"featureEffect"in r.layer&&r._isOverridden("featureEffect")&&(r.layer.featureEffect=r.featureEffect);await this._updateThumbnailUrl(t,i)}_updateInitialViewProperties(t,i){var r,n;if(i.backgroundExcluded||(this.initialViewProperties.background=(r=t.background)==null?void 0:r.clone()),this.initialViewProperties.spatialReference=(n=t.spatialReference)==null?void 0:n.clone(),this.initialViewProperties.timeZone=t.timeZone,i.viewpointExcluded||(this.initialViewProperties.viewpoint=new Fn({rotation:t.rotation,scale:i.scalePreserved?t.scale:null,targetGeometry:this._getViewExtent(t)})),!i.widgetsExcluded)for(const o of t.persistableViewModels)o.updateWebDocument(this)}_getViewExtent(t){const i=t.center.clone().normalize(),r=t.extent.clone(),n=r.width/2;return r.xmin=i.x-n,r.xmax=i.x+n,r}async _updateThumbnailUrl(t,i){if(i.thumbnailExcluded)return;const r=jGe(t,i.thumbnailSize),n=await t.takeScreenshot({format:"png",width:r.width,height:r.height});this._setAutoGeneratedThumbnail(n.dataUrl)}_setAutoGeneratedThumbnail(t){this.thumbnailUrl=t,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(t){if(hd(t)){const i=qy(t),r=i==null?void 0:i.mediaType,n=r&&rBe.get(r.toLowerCase())||null,o=`thumbnail${Date.now()}`;return n?`${o}.${n}`:o}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(t){t.isAuthoringAppSetByUser?this.authoringApp=t.authoringApp:this._isAuthoringAppSetByUser=!1,t.isAuthoringAppVersionSetByUser?this.authoringAppVersion=t.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}};m([w()],zi.prototype,"_updateFromPromise",void 0),m([w({type:eBe,json:{write:!0}})],zi.prototype,"applicationProperties",void 0),m([w({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],zi.prototype,"authoringApp",null),m([Pe("authoringApp")],zi.prototype,"writeAuthoringApp",null),m([w({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],zi.prototype,"authoringAppVersion",null),m([Pe("authoringAppVersion")],zi.prototype,"writeAuthoringAppVersion",null),m([w({type:jde,json:{write:{overridePolicy:e=>({enabled:!!(e&&e.length>0),ignoreOrigin:!0})}}})],zi.prototype,"bookmarks",void 0),m([w({type:OGe,json:{name:"mapFloorInfo",write:!0}})],zi.prototype,"floorInfo",void 0),m([w({type:JI,nonNullable:!0,json:{read:{source:["background","initialState.timeExtent","initialState.viewpoint","mapRangeInfo","spatialReference","timeZone"]},write:{ignoreOrigin:!0,target:{background:{type:PT},"initialState.timeExtent":{type:wn},"initialState.viewpoint":{type:Fn},mapRangeInfo:{type:YD},spatialReference:{type:st},"timeZone:":{type:String}}}}})],zi.prototype,"initialViewProperties",void 0),m([ke("initialViewProperties")],zi.prototype,"readInitialViewProperties",null),m([Pe("initialViewProperties")],zi.prototype,"writeInitialViewProperties",null),m([w({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],zi.prototype,"layers",void 0),m([Pe("layers")],zi.prototype,"writeLayers",null),m([w({type:Mc})],zi.prototype,"portalItem",void 0),m([w()],zi.prototype,"resourceInfo",void 0),m([w({readOnly:!0,type:fv,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],zi.prototype,"sourceVersion",void 0),m([ke("sourceVersion")],zi.prototype,"readSourceVersion",null),m([Pe("sourceVersion")],zi.prototype,"writeSourceVersion",null),m([w({json:{read:!1,write:{ignoreOrigin:!0}}})],zi.prototype,"tables",void 0),m([Pe("tables")],zi.prototype,"writeTables",null),m([w()],zi.prototype,"thumbnailUrl",null),m([w()],zi.prototype,"updatingFromView",null),m([w({type:FGe,json:{write:!0}})],zi.prototype,"widgets",void 0),zi=m([H("esri.WebDocument2D")],zi);const oBe=zi;let ec=class extends be{constructor(t){super(t),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.dirtyAreaCount=null,this.exceededTransferLimit=null,this.serviceEdits=null,this.discoveredSubnetworks=null}};m([w({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.moment=e?e.getTime():null}}}})],ec.prototype,"moment",void 0),m([w({type:Boolean,json:{write:!0}})],ec.prototype,"fullUpdate",void 0),m([w({type:Boolean,json:{write:!0}})],ec.prototype,"validateErrorsCreated",void 0),m([w({type:Number,json:{write:!0}})],ec.prototype,"dirtyAreaCount",void 0),m([w({type:Boolean,json:{write:!0}})],ec.prototype,"exceededTransferLimit",void 0),m([w({type:[Object],json:{write:!0}})],ec.prototype,"serviceEdits",void 0),m([w({type:[Object],json:{write:!0}})],ec.prototype,"discoveredSubnetworks",void 0),ec=m([H("esri.rest.networks.support.ValidateNetworkTopologyResult")],ec);const aBe=ec,lBe=_n()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let ap=class extends aBe{constructor(t){super(t),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(t){const i={...t,query:{f:"json"}},{data:r}=await Ct(this.statusUrl,i);return this.read(r),this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null}),this}async waitForJobCompletion(t={}){const{interval:i=1e3,statusCallback:r}=t;return new Promise((n,o)=>{this._clearTimer();const u=setInterval(()=>{this._timer||o(wi()),this.checkJobStatus().then(f=>{const{status:g}=f;switch(this.status=g,g){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":r&&r(this)}},f=>{this._clearTimer(),o(f)})},i);this._timer=u})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};m([w()],ap.prototype,"editsResolver",void 0),m([w({type:String,json:{write:!0}})],ap.prototype,"statusUrl",void 0),m([Ke(lBe)],ap.prototype,"status",void 0),m([w({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.submissionTime=e?e.getTime():null}}}})],ap.prototype,"submissionTime",void 0),m([w({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.lastUpdatedTime=e?e.getTime():null}}}})],ap.prototype,"lastUpdatedTime",void 0),ap=m([H("esri.networks.support.TopologyValidationJobInfo")],ap);const uBe=ap;async function FJ(e,t){if(e==="Utility Network Layer"){const{default:i}=await ce(()=>Promise.resolve().then(()=>xBe),void 0,import.meta.url);return new i({layerUrl:t})}return null}async function cBe(e){var u;let t="portalItem"in e?e:{portalItem:e};!t.portalItem||t.portalItem instanceof Mc||(t={...t,portalItem:new Mc(t.portalItem)});const i=t.portalItem;if(await i.load(),i.type!=="Feature Service")throw new ne("portal:unknown-item-type","Unknown item type '${type}'",{type:i.type});const r=i.url,n=await Ct(r,{responseType:"json",query:{f:"json"}}),o="Network Layer";if((u=n.data.type)!=null&&u.includes(o))return FJ(n.data.type,r);if(n.data.layers){const f=n.data.layers.find(g=>g.type.includes(o));if(f){const g=`${r}/${f.id}`;return FJ(f.type,g)}}return null}let Fr=class extends KT(pl){static fromPortalItem(t){return cBe(t)}constructor(t){super(t),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null,this.gdbVersion=null,this.historicMoment=null,this._sourceIdByLayerId=new Map,this._layerIdBySourceId=new Map,this._applyEditsHandler=i=>{const{serviceUrl:r,gdbVersion:n,result:o}=i,u=r===this.featureServiceUrl,f=N3(r,n,this.gdbVersion);u&&f&&o.then(g=>{L4(r,n)&&(this.historicMoment=g.historicMoment)})},this._updateMomentHandler=i=>{const{serviceUrl:r,gdbVersion:n,moment:o}=i,u=r===this.featureServiceUrl,f=N3(r,n,this.gdbVersion);u&&f&&(this.historicMoment=o)},this.when().then(()=>{this.addHandles([Ihe(this._applyEditsHandler),The(this._updateMomentHandler)])},()=>{})}initialize(){this.when().catch(t=>{Or(t)||Se.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}get datasetName(){var t;return((t=this.dataElement)==null?void 0:t.name)??null}get owner(){var t;return((t=this.dataElement)==null?void 0:t.userIdentity)??null}get schemaGeneration(){var t;return((t=this.dataElement)==null?void 0:t.schemaGeneration)??null}get parsedUrl(){return _r(this.layerUrl)}get featureServiceUrl(){return gf(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer")}get layerId(){return gf(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}async load(t){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),t)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,t)),this}getLayerIdBySourceId(t){if(!this.dataElement)return null;const i=this._layerIdBySourceId.get(t);if(i!=null)return i;const r=this.dataElement.domainNetworks,n=this._traverseNetworkSources(r,this._layerIdBySourceId,"sourceId","layerId",t);return n>=0?n:null}getSourceIdByLayerId(t){if(!this.dataElement)return null;const i=this._sourceIdByLayerId.get(t);if(i!=null)return i;const r=this.dataElement.domainNetworks,n=this._traverseNetworkSources(r,this._sourceIdByLayerId,"layerId","sourceId",t);return n>=0?n:null}getObjectIdsFromElements(t){const i=[],r=new Map;for(const o of t){const u=this.getLayerIdBySourceId(o.networkSourceId);if(u==null)continue;let f=r.get(u);f===void 0&&(f=[]),f.push(o.objectId),r.set(u,f)}const n=this.featureServiceUrl;return r.forEach((o,u)=>i.push({layerUrl:`${n}/${u}`,objectIds:o})),i}async queryNamedTraceConfigurations(t,i){var f;const[{queryNamedTraceConfigurations:r},{default:n}]=await Promise.all([ce(()=>import("./queryNamedTraceConfigurations-CA18zAW-.js"),[],import.meta.url),ce(()=>import("./QueryNamedTraceConfigurationsParameters-Co1Ijx0_.js"),[],import.meta.url)]),o=this.networkServiceUrl,u=n.from(t);return(f=await r(o,u,{...i}))==null?void 0:f.namedTraceConfigurations}async validateTopology(t,i){var E,I,M;if(!t.validateArea)throw new ne("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const[{validateNetworkTopology:r},{default:n}]=await Promise.all([ce(()=>import("./validateNetworkTopology-DI3vlkbH.js"),[],import.meta.url),ce(()=>import("./ValidateNetworkTopologyParameters-CMooYxAz.js"),[],import.meta.url)]),o=n.from(t);L4(this.featureServiceUrl,this.gdbVersion||null)?(o.sessionID=jO,await OZ(this.featureServiceUrl,this.gdbVersion,!0)):o.sessionID=null,o.gdbVersion=this.gdbVersion;const u=this.networkServiceUrl,f=this.featureServiceUrl,g=RZ(f,null,this.gdbVersion,!0),b=await r(u,o,{...i});if(b!=null&&b.serviceEdits){const k=[];for(const L of b.serviceEdits){const{editedFeatures:P}=L,D=P!=null&&P.spatialReference?new st(P.spatialReference):null;k.push({layerId:L.layerId,editedFeatures:{adds:((E=P==null?void 0:P.adds)==null?void 0:E.map(j=>Ex(j,D)))||[],updates:((I=P==null?void 0:P.updates)==null?void 0:I.map(j=>({original:Ex(j[0],D),current:Ex(j[1],D)})))||[],deletes:((M=P==null?void 0:P.deletes)==null?void 0:M.map(j=>Ex(j,D)))||[],spatialReference:D}})}g.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:k,exceededTransferLimit:!1,historicMoment:b.moment})}return b}async submitTopologyValidationJob(t,i){let r=null;if(!t.validateArea)throw new ne("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!this.gdbVersion){const E=this.layerUrl.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");r=(await Ct(E,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}const[{submitValidateNetworkTopologyJob:n},{default:o}]=await Promise.all([ce(()=>import("./validateNetworkTopology-DI3vlkbH.js"),[],import.meta.url),ce(()=>import("./ValidateNetworkTopologyParameters-CMooYxAz.js"),[],import.meta.url)]),u=o.from(t);L4(this.featureServiceUrl,this.gdbVersion||null)?(u.sessionID=jO,await OZ(this.featureServiceUrl,this.gdbVersion,!0)):u.sessionID=null,u.gdbVersion=this.gdbVersion||r;const f=this.networkServiceUrl,g=this.featureServiceUrl?RZ(this.featureServiceUrl,null,this.gdbVersion,!0):void 0,b=await n(f,u,{...i});return new uBe({statusUrl:b,editsResolver:g})}_traverseNetworkSources(t,i,r,n,o){for(const u of t)for(const f of[u.edgeSources??[],u.junctionSources??[]])for(const g of f)if(g[r]===o)return i.set(o,g[n]),g[n];return-1}async _fetchLayerMetaData(t,i){const r=await Ct(t,{responseType:"json",query:{f:"json"},...i});this.sourceJSON=r.data,this.read(r.data,{origin:"service"})}async _fetchDataElement(t,i,r){if(this.dataElement)return;const n=await Ct(`${t}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([i]),f:"json"},...r}).then(o=>{var u;return(u=o.data.layerDataElements)==null?void 0:u[0]});n&&this.read(n,{origin:"service"})}};function Ex(e,t){return new qi({attributes:e.attributes,geometry:od({...e.geometry,spatialReference:t})})}m([w({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],Fr.prototype,"id",void 0),m([w({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],Fr.prototype,"title",void 0),m([w({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],Fr.prototype,"layerUrl",void 0),m([w({type:Object,json:{origins:{service:{read:!0}},read:!1}})],Fr.prototype,"dataElement",void 0),m([w({type:Ht,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],Fr.prototype,"fullExtent",void 0),m([w({type:st,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],Fr.prototype,"spatialReference",void 0),m([w({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],Fr.prototype,"type",void 0),m([w({readOnly:!0})],Fr.prototype,"datasetName",null),m([w({readOnly:!0})],Fr.prototype,"owner",null),m([w({readOnly:!0})],Fr.prototype,"schemaGeneration",null),m([w({readOnly:!0})],Fr.prototype,"parsedUrl",null),m([w({readOnly:!0})],Fr.prototype,"featureServiceUrl",null),m([w({readOnly:!0})],Fr.prototype,"networkServiceUrl",null),m([w({readOnly:!0})],Fr.prototype,"layerId",null),m([w()],Fr.prototype,"sourceJSON",void 0),m([w({readOnly:!0})],Fr.prototype,"networkSystemLayers",null),m([w()],Fr.prototype,"gdbVersion",void 0),m([w({type:Date})],Fr.prototype,"historicMoment",void 0),Fr=m([H("esri.networks.Network")],Fr);const hBe=Fr;let lp=class extends g2(pl){constructor(t){super(t),this.rulesCategorized={attachment:[],containment:[],connectivity:[]},this.request=Ct}initialize(){}async load(t){const i=this.layer.load(t).then(()=>this._initializeRulesTable());return this.addResolvingPromise(i),this}getFeatureSQL(t,i){var b,E;const r=t.layerId.toString(),n=(b=t.fieldsIndex)==null?void 0:b.normalizeFieldName("assetGroup"),o=(E=t.fieldsIndex)==null?void 0:E.normalizeFieldName("assetType"),u=n?i.attributes[n]:null,f=o?i.attributes[o]:null,g=this.rulesHash[r];if(g){const I=g.assetGroupHash[u];if(I)return I.assetTypeHash[f]||null}return null}async _initializeRulesTable(){var n,o,u,f,g,b,E,I,M,k,L;const t={};let i;(function(P){P[P.from=0]="from",P[P.to=1]="to",P[P.via=2]="via"})(i||(i={}));const r=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];this.rulesCategorized={attachment:[],containment:[],connectivity:[]};for(const P of this.rules){if(P.ruleType===Uh.RTAttachment){this.rulesCategorized.attachment.push(P);continue}if(P.ruleType===Uh.RTContainment){this.rulesCategorized.containment.push(P);continue}if(P.ruleType===Uh.RTJunctionJunctionConnectivity){this.rulesCategorized.connectivity.push(P);continue}this.rulesCategorized.connectivity.push(P);let D=[[i.from,i.to],[i.to,i.from]];P.ruleType===Uh.RTEdgeJunctionEdgeConnectivity&&(D=[[i.from,i.via],[i.via,i.from],[i.to,i.via],[i.via,i.to]]);for(const j of D){const z=j.shift(),V=j.shift();let W=!1;switch(P.ruleType){case Uh.RTEdgeJunctionEdgeConnectivity:W=z===i.from||z===i.to;break;case Uh.RTJunctionEdgeConnectivity:W=z===i.to}const Q=r[z],Z=((n=P[Q.networkSourceId])==null?void 0:n.layerId.toString())??"",ee=(u=(o=P[Q.assetGroupId])==null?void 0:o.assetGroupCode)==null?void 0:u.toString(),ie=P[Q.assetTypeId],oe=(f=ie==null?void 0:ie.assetTypeCode)==null?void 0:f.toString(),le=r[V],xe=((g=P[le.networkSourceId])==null?void 0:g.layerId.toString())??"",$e=(E=(b=P[le.assetGroupId])==null?void 0:b.assetGroupCode)==null?void 0:E.toString(),Te=P[le.assetTypeId],de=(I=Te==null?void 0:Te.assetTypeCode)==null?void 0:I.toString(),se=t[Z]??{assetGroupHash:{}};if(!(ee&&oe&&$e&&de))continue;const ye=se.assetGroupHash[ee]??{assetTypeHash:{}},ue=ye.assetTypeHash[oe]??{};if(ue[xe]=ue[xe]??{},W){ue[Z]=ue[Z]??{};const _e=`(assetgroup = ${ee} AND assettype = ${oe})`;(Te==null?void 0:Te.connectivityPolicy)==="esriNECPEndVertex"?ue[Z].endVertex=(M=ue[Z])!=null&&M.endVertex?`${ue[Z].endVertex}`:`${_e}`:ue[Z].anyVertex=ue[Z].anyVertex?`${ue[Z].anyVertex}`:`${_e}`}const pe=`(assetgroup = ${$e} AND assettype = ${de})`;(Te==null?void 0:Te.connectivityPolicy)==="esriNECPEndVertex"?ue[xe].endVertex=(k=ue[xe])!=null&&k.endVertex?`${ue[xe].endVertex} OR ${pe}`:`${pe}`:ue[xe].anyVertex=(L=ue[xe])!=null&&L.anyVertex?`${ue[xe].anyVertex} OR ${pe}`:`${pe}`,ye.assetTypeHash[oe]=ue,se.assetGroupHash[ee]=ye,t[Z]=se}}this.rulesHash=t}};m([w({constructOnly:!0})],lp.prototype,"layer",void 0),m([w({constructOnly:!0})],lp.prototype,"rules",void 0),m([w()],lp.prototype,"rulesHash",void 0),m([w()],lp.prototype,"rulesCategorized",void 0),m([w({constructOnly:!0})],lp.prototype,"request",void 0),lp=m([H("esri.networks.RulesTable")],lp);const dBe=lp;let za=class extends be{constructor(t){super(t),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};m([w({type:[Object],json:{write:!0}})],za.prototype,"conditionBarriers",void 0),m([w({type:[Object],json:{write:!0}})],za.prototype,"outputConditions",void 0),m([w({type:[Object],json:{write:!0}})],za.prototype,"functions",void 0),m([w({type:[Object],json:{write:!0}})],za.prototype,"functionBarriers",void 0),m([w({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],za.prototype,"traversabilityScope",void 0),m([w({type:String,json:{write:!0}})],za.prototype,"shortestPathNetworkAttributeName",void 0),m([w({type:Boolean,json:{write:!0}})],za.prototype,"includeBarriers",void 0),m([w({type:Boolean,json:{write:!0}})],za.prototype,"validateConsistency",void 0),m([w({type:Boolean,json:{write:!0}})],za.prototype,"ignoreBarriersAtStartingPoints",void 0),za=m([H("esri.networks.support.TraceConfiguration")],za);const QD=za;let or=class extends QD{constructor(t){super(t),this.filterBarriers=[],this.arcadeExpressionBarrier=null,this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.allowIndeterminateFlow=null,this.includeUpToFirstSpatialContainer=null,this.nearestNeighbor=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.diagramTemplateName=null,this.tierName=null,this.validateLocatability=null}};m([w({type:[Object],json:{write:!0}})],or.prototype,"filterBarriers",void 0),m([w({type:String,json:{write:!0}})],or.prototype,"arcadeExpressionBarrier",void 0),m([w({type:String,json:{write:!0}})],or.prototype,"domainNetworkName",void 0),m([w({type:String,json:{write:!0}})],or.prototype,"filterBitsetNetworkAttributeName",void 0),m([w({type:[Object],json:{write:!0}})],or.prototype,"filterFunctionBarriers",void 0),m([w({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],or.prototype,"filterScope",void 0),m([w({type:Boolean,json:{write:!0}})],or.prototype,"includeContainers",void 0),m([w({type:Boolean,json:{write:!0}})],or.prototype,"includeContent",void 0),m([w({type:Boolean,json:{write:!0}})],or.prototype,"includeIsolated",void 0),m([w({type:Boolean,json:{write:!0}})],or.prototype,"includeStructures",void 0),m([w({type:Boolean,json:{write:!0}})],or.prototype,"allowIndeterminateFlow",void 0),m([w({type:Boolean,json:{write:!0}})],or.prototype,"includeUpToFirstSpatialContainer",void 0),m([w({type:Object,json:{write:!0}})],or.prototype,"nearestNeighbor",void 0),m([w({type:[Object],json:{write:!0}})],or.prototype,"outputFilterCategories",void 0),m([w({type:[Object],json:{write:!0}})],or.prototype,"outputFilters",void 0),m([w({type:[Object],json:{write:!0}})],or.prototype,"propagators",void 0),m([w({type:String,json:{write:!0}})],or.prototype,"subnetworkName",void 0),m([w({type:String,json:{write:!0}})],or.prototype,"targetTierName",void 0),m([w({type:String,json:{write:!0}})],or.prototype,"diagramTemplateName",void 0),m([w({type:String,json:{write:!0}})],or.prototype,"tierName",void 0),m([w({type:Boolean,json:{write:!0}})],or.prototype,"validateLocatability",void 0),or=m([H("esri.networks.support.UNTraceConfiguration")],or);const pBe=or;let xo=class extends _O{constructor(t){super(t),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(t,i){return t.tierName!==void 0?pBe.fromJSON(t):QD.fromJSON(t)}};m([w({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],xo.prototype,"globalId",void 0),m([w({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],xo.prototype,"title",void 0),m([w({type:QD,json:{origins:{service:{read:!0,write:!0}},read:!1}})],xo.prototype,"traceConfiguration",void 0),m([ke("service","traceConfiguration")],xo.prototype,"readTraceConfiguration",null),m([w({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],xo.prototype,"creationDate",void 0),m([w({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],xo.prototype,"creator",void 0),m([w({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],xo.prototype,"description",void 0),m([w({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],xo.prototype,"minStartingPoints",void 0),m([w({json:{origins:{service:{read:!0,write:!0}},read:!1}})],xo.prototype,"resultTypes",void 0),m([w({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],xo.prototype,"tags",void 0),m([w({type:vx.apiValues,json:{type:vx.jsonValues,origins:{service:{read:vx.read,write:vx.write}},read:!1}})],xo.prototype,"traceType",void 0),xo=m([H("esri.networks.support.NamedTraceConfiguration")],xo);const fBe=xo;let ql=class extends De{constructor(t){super(t),this.rulesTableId=null,this.rulesTableUrl=null,this.subnetworksTableId=null,this.subnetworksTableUrl=null,this.dirtyAreasLayerId=null,this.dirtyAreasLayerUrl=null,this.associationsTableId=null,this.associationsTableUrl=null}};m([w({constructOnly:!0})],ql.prototype,"rulesTableId",void 0),m([w({constructOnly:!0})],ql.prototype,"rulesTableUrl",void 0),m([w({constructOnly:!0})],ql.prototype,"subnetworksTableId",void 0),m([w({constructOnly:!0})],ql.prototype,"subnetworksTableUrl",void 0),m([w({constructOnly:!0})],ql.prototype,"dirtyAreasLayerId",void 0),m([w({constructOnly:!0})],ql.prototype,"dirtyAreasLayerUrl",void 0),m([w({constructOnly:!0})],ql.prototype,"associationsTableId",void 0),m([w({constructOnly:!0})],ql.prototype,"associationsTableUrl",void 0),ql=m([H("esri.networks.support.NetworkSystemLayers")],ql);const yBe=ql;let rg=class extends be{constructor(t){super(t),this.id=null,this.name=null}};m([w({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],rg.prototype,"id",void 0),m([w({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],rg.prototype,"name",void 0),m([w({type:Boolean,json:{write:!0}})],rg.prototype,"isUpstreamTerminal",void 0),rg=m([H("esri.networks.support.Terminal")],rg);const mBe=rg,Ix=new gt({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let up=class extends be{constructor(t){super(t),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};m([w({type:String,json:{write:!0}})],up.prototype,"defaultConfiguration",void 0),m([w({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],up.prototype,"id",void 0),m([w({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],up.prototype,"name",void 0),m([w({type:[mBe],json:{write:!0}})],up.prototype,"terminals",void 0),m([w({type:Ix.apiValues,json:{type:Ix.jsonValues,read:Ix.read,write:Ix.write}})],up.prototype,"traversabilityModel",void 0),up=m([H("esri.networks.support.TerminalConfiguration")],up);const DJ=up;let ng=class extends be{constructor(t){super(t),this.line=null,this.multipoint=null,this.polygon=null}};m([w({type:io,json:{write:!0},readOnly:!0})],ng.prototype,"line",void 0),m([w({type:w2,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],ng.prototype,"multipoint",void 0),m([w({type:zs,json:{write:!0},readOnly:!0})],ng.prototype,"polygon",void 0),ng=m([H("esri.rest.networks.support.AggregatedGeometry")],ng);const gBe=ng;let sg=class extends be{constructor(t){super(t),this.functionType=null,this.networkAttributeName=null,this.result=null}};m([w({type:["add","subtract","average","count","min","max"],json:{write:!0},readOnly:!0})],sg.prototype,"functionType",void 0),m([w({type:String,json:{write:!0},readOnly:!0})],sg.prototype,"networkAttributeName",void 0),m([w({type:Number,json:{write:!0},readOnly:!0})],sg.prototype,"result",void 0),sg=m([H("esri.rest.networks.support.FunctionResult")],sg);const vBe=sg;let _h=class extends be{constructor(t){super(t),this.aggregatedGeometry=null,this.elements=null,this.globalFunctionResults=null,this.kFeaturesForKNNFound=!1,this.startingPointsIgnored=!1,this.warnings=null}};m([w({type:gBe,json:{write:!0},readOnly:!0})],_h.prototype,"aggregatedGeometry",void 0),m([w({type:[am],json:{write:!0},readOnly:!0})],_h.prototype,"elements",void 0),m([w({type:[vBe],json:{write:!0},readOnly:!0})],_h.prototype,"globalFunctionResults",void 0),m([w({type:Boolean,json:{write:!0},readOnly:!0})],_h.prototype,"kFeaturesForKNNFound",void 0),m([w({type:Boolean,json:{write:!0},readOnly:!0})],_h.prototype,"startingPointsIgnored",void 0),m([w({type:[String],json:{write:!0},readOnly:!0})],_h.prototype,"warnings",void 0),_h=m([H("esri.rest.networks.support.TraceResult")],_h);const wBe=_h,bBe=_n()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let H0=class extends wBe{constructor(t){super(t),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(t){const i={...t,query:{f:"json"}},{data:r}=await Ct(this.statusUrl,i),n=r.traceResults?{...r.traceResults,...r}:r;return this.read(n),this}async waitForJobCompletion(t={}){const{interval:i=1e3,statusCallback:r}=t;return new Promise((n,o)=>{this._clearTimer();const u=setInterval(()=>{this._timer||o(wi()),this.checkJobStatus().then(f=>{const{status:g}=f;switch(this.status=g,g){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":r&&r(this)}},f=>{this._clearTimer(),o(f)})},i);this._timer=u})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};m([w({type:String,json:{write:!0}})],H0.prototype,"statusUrl",void 0),m([Ke(bBe)],H0.prototype,"status",void 0),m([w({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.submissionTime=e?e.getTime():null}}}})],H0.prototype,"submissionTime",void 0),m([w({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.lastUpdatedTime=e?e.getTime():null}}}})],H0.prototype,"lastUpdatedTime",void 0),H0=m([H("esri.networks.support.TraceJobInfo")],H0);const _Be=H0;let Sh=class extends hBe{constructor(t){super(t),this.sharedNamedTraceConfigurations=[],this.type="utility",this._terminalById=new Map}get serviceTerritoryFeatureLayerId(){var t;return((t=this.dataElement)==null?void 0:t.serviceTerritoryFeatureLayerId)??null}get networkSystemLayers(){var t,i,r,n,o,u,f,g;return new yBe({rulesTableId:(t=this.sourceJSON)==null?void 0:t.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(i=this.sourceJSON)==null?void 0:i.systemLayers.rulesTableId}`:null,subnetworksTableId:(r=this.sourceJSON)==null?void 0:r.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(n=this.sourceJSON)==null?void 0:n.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:(o=this.sourceJSON)==null?void 0:o.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${(u=this.sourceJSON)==null?void 0:u.systemLayers.dirtyAreasLayerId}`:null,associationsTableId:(f=this.sourceJSON)==null?void 0:f.systemLayers.associationsTableId,associationsTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(g=this.sourceJSON)==null?void 0:g.systemLayers.associationsTableId}`:null})}get terminalConfigurations(){var t;return((t=this.dataElement)==null?void 0:t.terminalConfigurations.map(i=>DJ.fromJSON(i)))||[]}get domainNetworkNames(){var t;return((t=this.dataElement)==null?void 0:t.domainNetworks.map(i=>i.domainNetworkName))||[]}get _utilityLayerList(){var i,r;const t=new Set;return(r=(i=this.dataElement)==null?void 0:i.domainNetworks)==null||r.map(n=>{n.edgeSources.map(o=>{t.add(o.layerId)}),n.junctionSources.map(o=>{t.add(o.layerId)})}),t}async load(t){return this.addResolvingPromise(super.load(t)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(t)),this}getTerminalConfiguration(t){var b,E,I,M;let i=null,r=null;const n=t.layer;let o=null;if((n==null?void 0:n.type)==="feature"){if(o=n.layerId,o===null)return null}else if((n==null?void 0:n.type)!=="subtype-sublayer"||(o=((b=n==null?void 0:n.parent)==null?void 0:b.layerId)??null,o===null))return null;const u=t.attributes;if(u==null)return null;for(const k of Object.keys(u))k.toUpperCase()==="ASSETGROUP"&&(i=t.getAttribute(k)),k.toUpperCase()==="ASSETTYPE"&&(r=t.getAttribute(k));if(!this.dataElement)return null;let f=null;const g=this.dataElement.domainNetworks;for(const k of g){const L=(E=k.junctionSources)==null?void 0:E.find(P=>P.layerId===o);if(L){const P=(I=L.assetGroups)==null?void 0:I.find(D=>D.assetGroupCode===i);if(P){const D=(M=P.assetTypes)==null?void 0:M.find(j=>j.assetTypeCode===r);if(D){f=D.terminalConfigurationId;break}}}}if(f!=null){const k=this.dataElement.terminalConfigurations,L=k==null?void 0:k.find(P=>P.terminalConfigurationId===f);return L?DJ.fromJSON(L):null}return null}getTierNames(t){var r;const i=(r=this.dataElement)==null?void 0:r.domainNetworks.find(n=>n.domainNetworkName===t);return(i==null?void 0:i.tiers.map(n=>n.name))||[]}async getRulesTable(){return this._sharedRulesTable||(this._sharedRulesTable=this._createRulesTable()),await this._sharedRulesTable}getTerminalById(t){if(!this.dataElement||t==null)return null;const i=this._terminalById.get(t);return i??(this.terminalConfigurations.forEach(r=>{r.terminals.forEach(n=>{this._terminalById.set(n.id,n)})}),this._terminalById.get(t))}isUtilityLayer(t){var i;return"layerId"in t&&this._utilityLayerList.has(t.layerId)&&(((i=t.url)==null?void 0:i.startsWith(this.featureServiceUrl))??!1)}async queryAssociations(t){const[{queryAssociations:i},{default:r}]=await Promise.all([ce(()=>import("./queryAssociations-Bpw-3jba.js"),[],import.meta.url),ce(()=>import("./QueryAssociationsParameters-BMZED53z.js"),[],import.meta.url)]),n=r.from(t);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,(await i(this.networkServiceUrl,n)).associations}async synthesizeAssociationGeometries(t){const[{synthesizeAssociationGeometries:i},{default:r}]=await Promise.all([ce(()=>import("./synthesizeAssociationGeometries-nkYVH7wh.js"),[],import.meta.url),ce(()=>import("./SynthesizeAssociationGeometriesParameters-BQGR4QVM.js"),[],import.meta.url)]),n=r.from(t);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,i(this.networkServiceUrl,n)}async trace(t){const[{trace:i},{default:r}]=await Promise.all([ce(()=>import("./trace-DB3euTF7.js"),[],import.meta.url),ce(()=>import("./TraceParameters-DCi04j8o.js"),[],import.meta.url)]),n=r.from(t);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,i(this.networkServiceUrl,n)}async submitTraceJob(t){const[{submitTraceJob:i},{default:r}]=await Promise.all([ce(()=>import("./trace-DB3euTF7.js"),[],import.meta.url),ce(()=>import("./TraceParameters-DCi04j8o.js"),[],import.meta.url)]),n=r.from(t);n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment;const o=await i(this.networkServiceUrl,n);return new _Be({statusUrl:o})}async canAddAssociation(t){const i=await this.getRulesTable();if(!i)return!1;await i.load();const r=(o,u)=>o?o.terminalId===1?!(u!=null&&u.terminalId)||(u==null?void 0:u.terminalId)===o.terminalId:o.terminalId===(u==null?void 0:u.terminalId):!(u!=null&&u.terminalId),n=(o,u)=>{var f,g,b,E,I,M,k,L,P,D,j,z;return((f=o.fromNetworkSource)==null?void 0:f.sourceId)===((g=u.fromNetworkElement)==null?void 0:g.networkSourceId)&&((b=o.toNetworkSource)==null?void 0:b.sourceId)===((E=u.toNetworkElement)==null?void 0:E.networkSourceId)&&((I=o.fromAssetGroup)==null?void 0:I.assetGroupCode)===((M=u.fromNetworkElement)==null?void 0:M.assetGroupCode)&&((k=o.fromAssetType)==null?void 0:k.assetTypeCode)===((L=u.fromNetworkElement)==null?void 0:L.assetTypeCode)&&((P=o.toAssetGroup)==null?void 0:P.assetGroupCode)===((D=u.toNetworkElement)==null?void 0:D.assetGroupCode)&&((j=o.toAssetType)==null?void 0:j.assetTypeCode)===((z=u.toNetworkElement)==null?void 0:z.assetTypeCode)&&r(o.fromTerminal,u.fromNetworkElement)&&r(o.toTerminal,u.toNetworkElement)};return t.associationType==="containment"?i.rulesCategorized.containment.some(o=>n(o,t)):t.associationType==="attachment"?i.rulesCategorized.attachment.some(o=>n(o,t)):i.rulesCategorized.connectivity.some(o=>{var u,f,g,b,E,I,M,k,L,P,D,j,z,V,W,Q,Z,ee,ie,oe,le,xe,$e,Te;return o.viaNetworkSource?((u=o.fromNetworkSource)==null?void 0:u.sourceId)===((f=t.fromNetworkElement)==null?void 0:f.networkSourceId)&&((g=o.viaNetworkSource)==null?void 0:g.sourceId)===((b=t.toNetworkElement)==null?void 0:b.networkSourceId)&&((E=o.fromAssetGroup)==null?void 0:E.assetGroupCode)===((I=t.fromNetworkElement)==null?void 0:I.assetGroupCode)&&((M=o.fromAssetType)==null?void 0:M.assetTypeCode)===((k=t.fromNetworkElement)==null?void 0:k.assetTypeCode)&&((L=o.viaAssetGroup)==null?void 0:L.assetGroupCode)===((P=t.toNetworkElement)==null?void 0:P.assetGroupCode)&&((D=o.viaAssetType)==null?void 0:D.assetTypeCode)===((j=t.toNetworkElement)==null?void 0:j.assetTypeCode)&&r(o.fromTerminal,t.fromNetworkElement)&&r(o.viaTerminal,t.toNetworkElement)||((z=o.viaNetworkSource)==null?void 0:z.sourceId)===((V=t.fromNetworkElement)==null?void 0:V.networkSourceId)&&((W=o.toNetworkSource)==null?void 0:W.sourceId)===((Q=t.toNetworkElement)==null?void 0:Q.networkSourceId)&&((Z=o.viaAssetGroup)==null?void 0:Z.assetGroupCode)===((ee=t.fromNetworkElement)==null?void 0:ee.assetGroupCode)&&((ie=o.viaAssetType)==null?void 0:ie.assetTypeCode)===((oe=t.fromNetworkElement)==null?void 0:oe.assetTypeCode)&&((le=o.toAssetGroup)==null?void 0:le.assetGroupCode)===((xe=t.toNetworkElement)==null?void 0:xe.assetGroupCode)&&(($e=o.toAssetType)==null?void 0:$e.assetTypeCode)===((Te=t.toNetworkElement)==null?void 0:Te.assetTypeCode)&&r(o.viaTerminal,t.fromNetworkElement)&&r(o.toTerminal,t.toNetworkElement):n(o,t)})}generateAddAssociations(t){return{addFeatures:t.map(i=>{var r,n,o,u,f,g;return new qi({attributes:{fromnetworksourceid:(r=i.fromNetworkElement)==null?void 0:r.networkSourceId,fromglobalid:(n=i.fromNetworkElement)==null?void 0:n.globalId,fromterminalid:(o=i.fromNetworkElement)==null?void 0:o.terminalId,tonetworksourceid:(u=i.toNetworkElement)==null?void 0:u.networkSourceId,toglobalid:(f=i.toNetworkElement)==null?void 0:f.globalId,toterminalid:(g=i.toNetworkElement)==null?void 0:g.terminalId,associationtype:rUe[i.associationType],iscontentvisible:i.isContentVisible?1:0,percentalong:i.percentAlong,globalid:i.globalId}})}),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:"globalid",objectIdField:"objectid"}}}generateDeleteAssociations(t){return{deleteFeatures:t.map(i=>({globalId:i.globalId})),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:"globalid",objectIdField:"objectid"}}}async _loadNamedTraceConfigurationsFromNetwork(t){var n;if(((n=this.sharedNamedTraceConfigurations)==null?void 0:n.length)===0)return;const i=this.sharedNamedTraceConfigurations.map(o=>o.globalId),r=await this.queryNamedTraceConfigurations({globalIds:i},t);for(const o of this.sharedNamedTraceConfigurations){const u=r==null?void 0:r.find(f=>f.globalId===o.globalId);if(u){const f=u.write({},{origin:"service"});o.read(f,{origin:"service"})}}}async _createRulesTable(){var u;const t=this.networkSystemLayers.rulesTableUrl,i=new G2({url:t});await i.load();const r=(u=this.dataElement)==null?void 0:u.domainNetworks;if(!r)return null;const n=r.flatMap(f=>[...f.edgeSources||[],...f.junctionSources||[]]),o=(await SBe(i)).map(f=>this._hydrateRuleInfo(i,n,f));return new dBe({layer:i,rules:o})}_hydrateRuleInfo(t,i,r){const n=t.fieldsIndex,o=n.get("RULETYPE"),u=n.get("CREATIONDATE"),f=n.get("FROMNETWORKSOURCEID"),g=n.get("FROMASSETGROUP"),b=n.get("FROMASSETTYPE"),E=n.get("FROMTERMINALID"),I=n.get("TONETWORKSOURCEID"),M=n.get("TOASSETGROUP"),k=n.get("TOASSETTYPE"),L=n.get("TOTERMINALID"),P=n.get("VIANETWORKSOURCEID"),D=n.get("VIAASSETGROUP"),j=n.get("VIAASSETTYPE"),z=n.get("VIATERMINALID"),V=r.attributes[o.name],W=new Date(r.attributes[u.name]),Q=[{networkSourceId:r.attributes[f.name],assetGroupId:r.attributes[g.name],assetTypeId:r.attributes[b.name],terminalId:r.attributes[E.name]},{networkSourceId:r.attributes[I.name],assetGroupId:r.attributes[M.name],assetTypeId:r.attributes[k.name],terminalId:r.attributes[L.name]},{networkSourceId:r.attributes[P.name],assetGroupId:r.attributes[D.name],assetTypeId:r.attributes[j.name],terminalId:r.attributes[z.name]}];let Z;(function(ie){ie[ie.from=0]="from",ie[ie.to=1]="to",ie[ie.via=2]="via"})(Z||(Z={}));const ee={ruleType:V,creationDate:W};for(const ie of[Z.from,Z.to,Z.via]){if(V!==Uh.RTEdgeJunctionEdgeConnectivity&&ie===Z.via)continue;const oe=Q[ie],le=i.find(se=>se.sourceId===oe.networkSourceId),xe=le==null?void 0:le.assetGroups.find(se=>se.assetGroupCode===oe.assetGroupId),$e=xe==null?void 0:xe.assetTypes.find(se=>se.assetTypeCode===oe.assetTypeId),Te=this._getTerminal($e,oe);let de="";switch(ie){case Z.from:de="from";break;case Z.to:de="to";break;case Z.via:de="via"}ee[`${de}NetworkSource`]=le,ee[`${de}AssetGroup`]=xe,ee[`${de}AssetType`]=$e,ee[`${de}Terminal`]=Te==null?void 0:Te.toJSON()}return ee}_getTerminal(t,i){var o,u;const r=t==null?void 0:t.terminalConfigurationId,n=(o=this.terminalConfigurations)==null?void 0:o.find(f=>f.id===r);return((u=n==null?void 0:n.terminals)==null?void 0:u.find(f=>f.id===i.terminalId))??null}};async function SBe(e){const t=new ss({where:"1=1",outFields:["*"]});return(await Phe(e,t)).features}m([w({type:[fBe],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],Sh.prototype,"sharedNamedTraceConfigurations",void 0),m([w({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],Sh.prototype,"type",void 0),m([w({readOnly:!0})],Sh.prototype,"serviceTerritoryFeatureLayerId",null),m([w({readOnly:!0})],Sh.prototype,"networkSystemLayers",null),m([w({readOnly:!0})],Sh.prototype,"terminalConfigurations",null),m([w({readOnly:!0})],Sh.prototype,"domainNetworkNames",null),Sh=m([H("esri.networks.UtilityNetwork")],Sh);const zde=Sh,xBe=Object.freeze(Object.defineProperty({__proto__:null,default:zde},Symbol.toStringTag,{value:"Module"}));let og=class extends It(be){constructor(t){super(t),this.expression=null,this.returnType="string",this.title=null}};m([w({type:String,json:{write:{isRequired:!0}}})],og.prototype,"expression",void 0),m([w({type:["number","string"],json:{write:!0}})],og.prototype,"returnType",void 0),m([w({type:String,json:{write:!0}})],og.prototype,"title",void 0),og=m([H("esri.webdoc.geotriggersInfo.ExpressionInfo")],og);const Vde=og,Tx=new gt({deviceLocation:"device-location"});let Qb=class extends It(be){constructor(t){super(t),this.filterExpression=null,this.type="device-location"}};m([w({type:Vde,json:{write:!0}})],Qb.prototype,"filterExpression",void 0),m([w({type:Tx.apiValues,readOnly:!0,json:{type:Tx.jsonValues,read:Tx.read,write:Tx.write}})],Qb.prototype,"type",void 0),Qb=m([H("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],Qb);const EBe=Qb;let e3=class extends It(be){constructor(t){super(t),this.geometry=null,this.where=null}};m([w({types:mm,json:{read:od,write:!0}})],e3.prototype,"geometry",void 0),m([w({type:String,json:{write:!0}})],e3.prototype,"where",void 0),e3=m([H("esri.webdoc.geotriggersInfo.FeatureFilter")],e3);const IBe=e3;let ag=class extends It(be){constructor(t){super(t),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};m([w({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],ag.prototype,"layerId",void 0),m([w({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],ag.prototype,"layerUrl",void 0),m([Ke({featureLayer:"feature-layer"},{readOnly:!0})],ag.prototype,"type",void 0),ag=m([H("esri.webdoc.geotriggersInfo.FeatureLayerSource")],ag);const TBe=ag;let W0=class extends It(be){constructor(t){super(t),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};m([w({type:TBe,json:{write:{isRequired:!0}}})],W0.prototype,"fenceSource",void 0),m([w({type:IBe,json:{write:!0}})],W0.prototype,"filter",void 0),m([w({type:Number,json:{write:!0}})],W0.prototype,"bufferDistance",void 0),m([Ke({features:"features"},{readOnly:!0})],W0.prototype,"type",void 0),W0=m([H("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],W0);const $Be=W0;let V4=class extends It(be){constructor(t){super(t),this.type="fence"}};m([Ke({fence:"fence"},{readOnly:!0})],V4.prototype,"type",void 0),V4=m([H("esri.webdoc.geotriggersInfo.Geotrigger")],V4);const Ude=V4;let t3=class extends It(be){constructor(t){super(t),this.expressionInfo=null,this.requestedActions=null}};m([w({type:Vde,json:{write:!0}})],t3.prototype,"expressionInfo",void 0),m([w({type:[String],json:{write:!0}})],t3.prototype,"requestedActions",void 0),t3=m([H("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],t3);const MBe=t3,CBe=new gt({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),ABe=new gt({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),$x=new gt({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});let Hl=class extends Ude{constructor(t){super(t),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};m([Ke(CBe)],Hl.prototype,"enterExitRule",void 0),m([w({type:EBe,json:{write:{isRequired:!0}}})],Hl.prototype,"feed",void 0),m([Ke(ABe)],Hl.prototype,"feedAccuracyMode",void 0),m([w({type:$x.apiValues,json:{type:$x.jsonValues,read:$x.read,write:{writer:$x.write,isRequired:!0}}})],Hl.prototype,"fenceNotificationRule",void 0),m([w({type:$Be,json:{write:{isRequired:!0}}})],Hl.prototype,"fenceParameters",void 0),m([w({type:String,json:{write:!0}})],Hl.prototype,"name",void 0),m([w({type:MBe,json:{write:!0}})],Hl.prototype,"notificationOptions",void 0),m([Ke({fence:"fence"},{readOnly:!0})],Hl.prototype,"type",void 0),Hl=m([H("esri.webdoc.geotriggersInfo.FenceGeotrigger")],Hl);const kBe=Hl,LBe={base:Ude,key:"type",typeMap:{fence:kBe}};let U4=class extends It(be){constructor(t){super(t),this.geotriggers=null}};m([w({types:[LBe],json:{write:{isRequired:!0}}})],U4.prototype,"geotriggers",void 0),U4=m([H("esri.webdoc.GeotriggersInfo")],U4);const OBe=U4;let lg=class extends It(be){constructor(t){super(t),this.portalItem=null}readPortalItem(t,i,r){const{itemId:n}=i;if(n)return new Mc({id:n,portal:r==null?void 0:r.portal})}writePortalItem(t,i){t!=null&&t.id&&(i.itemId=t.id)}};m([w({type:Mc,json:{write:{isRequired:!0}}})],lg.prototype,"portalItem",void 0),m([ke("portalItem",["itemId"])],lg.prototype,"readPortalItem",null),m([Pe("portalItem",{itemId:{type:String}})],lg.prototype,"writePortalItem",null),lg=m([H("esri.webdoc.ips.PositioningService")],lg);const RBe=lg;let G4=class extends It(be){constructor(t){super(t),this.positioningService=null}};m([w({type:RBe,json:{write:{isRequired:!0}}})],G4.prototype,"positioningService",void 0),G4=m([H("esri.webdoc.IPSInfo")],G4);const PBe=G4,NBe={currentVersion:lue,createInitialViewProperties:()=>new JI,parseVersion:fv.parse,itemType:"Web Map",name:"webmap",origin:"web-map"},FBe=Oe.ofType(zde);let cp=class extends oBe{constructor(t){super(t),this.geotriggersInfo=null,this.ipsInfo=null,this.presentation=null,this.utilityNetworks=null}destroy(){if(this.utilityNetworks){const t=this.utilityNetworks.removeAll();for(const i of t)i.destroy();this.utilityNetworks.destroy()}}get context(){return NBe}loadAll(){return oT(this,t=>{var i,r;t(this.ground,this.basemap,this.layers,this.tables,(r=(i=this.ipsInfo)==null?void 0:i.positioningService)==null?void 0:r.portalItem)})}static fromJSON(t){if(t)return new this({resourceInfo:t});throw new ne("webmap:empty-resource","Expected a JSON resource but got nothing")}};cp.VERSION=lue,m([w({type:OBe,json:{write:!0}})],cp.prototype,"geotriggersInfo",void 0),m([w({type:PBe,json:{write:!0,name:"mapIPSInfo"}})],cp.prototype,"ipsInfo",void 0),m([w({json:{write:!0}})],cp.prototype,"presentation",void 0),m([w({type:FBe,json:{read:!0,write:!0}})],cp.prototype,"utilityNetworks",void 0),cp=m([H("esri.WebMap")],cp);const DBe=cp,Ri="esri-search",Si={base:Ri,hasMultipleSources:`${Ri}--multiple-sources`,isLoading:`${Ri}--loading`,isSearching:`${Ri}--searching`,showSuggestions:`${Ri}--show-suggestions`,showSources:`${Ri}--sources`,showWarning:`${Ri}--warning`,container:`${Ri}__container`,input:`${Ri}__input`,inputContainer:`${Ri}__input-container`,form:`${Ri}__form`,submitButton:`${Ri}__submit-button`,sourcesButton:`${Ri}__sources-button`,sourcesButtonDown:`${Ri}__sources-button--down`,sourcesButtonUp:`${Ri}__sources-button--up`,clearButton:`${Ri}__clear-button`,sourceName:`${Ri}__source-name`,suggestionsMenu:`${Ri}__suggestions-menu`,suggestionList:`${Ri}__suggestions-list`,suggestionListCurrentLocation:`${Ri}__suggestions-list--current-location`,sourcesMenu:`${Ri}__sources-menu`,source:`${Ri}__source`,warningMenu:`${Ri}__warning-menu`,warningMenuBody:`${Ri}__warning-body`,warningMenuHeader:`${Ri}__warning-header`,warningMenuText:`${Ri}__warning-text`,noValueText:`${Ri}__no-value-text`},Zf="esri-search-result-renderer",Jf={base:Zf,showMoreResults:`${Zf}__more-results--show-more-results`,moreResults:`${Zf}__more-results`,moreResultsList:`${Zf}__more-results-list`,moreResultsHeader:`${Zf}__more-results-header`,moreResultsItem:`${Zf}__more-results-item`,moreResultsListHeader:`${Zf}__more-results-list-header`};let Dr=class extends Eu(be){constructor(t){super(t),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};m([w()],Dr.prototype,"autoNavigate",void 0),m([w()],Dr.prototype,"filter",void 0),m([w()],Dr.prototype,"getResults",void 0),m([w()],Dr.prototype,"getSuggestions",void 0),m([w()],Dr.prototype,"maxResults",void 0),m([w()],Dr.prototype,"maxSuggestions",void 0),m([w()],Dr.prototype,"minSuggestCharacters",void 0),m([w()],Dr.prototype,"outFields",void 0),m([w()],Dr.prototype,"placeholder",void 0),m([w()],Dr.prototype,"popupEnabled",void 0),m([w()],Dr.prototype,"popupTemplate",void 0),m([w()],Dr.prototype,"prefix",void 0),m([w()],Dr.prototype,"resultGraphicEnabled",void 0),m([w()],Dr.prototype,"resultSymbol",void 0),m([w()],Dr.prototype,"suggestionsEnabled",void 0),m([w()],Dr.prototype,"suffix",void 0),m([w()],Dr.prototype,"withinViewEnabled",void 0),m([w()],Dr.prototype,"zoomScale",void 0),Dr=m([H("esri.widgets.Search.SearchSource")],Dr);const ej=Dr,jBe=/https?:\/\/services.*\.arcgis\.com/i,zBe=/(?:\{([^}]+)\})/g,vv=()=>Se.getLogger("esri.widgets.Search.support.layerSearchUtils");function VBe(e,t){const{exactMatch:i=!1,location:r,maxResults:n,spatialReference:o,source:u,sourceIndex:f,suggestResult:g,view:b}=e,{layer:E,filter:I,zoomScale:M}=u,k=b==null?void 0:b.scale,L=Gde(u,b),P=t==null?void 0:t.signal;return qde(E).then(()=>{const D=E.popupTemplate;return D?D.getRequiredFields(E.fieldsIndex):null}).then(D=>{var xe,$e,Te,de;const{objectIdField:j,returnZ:z}=E,V=Yde(u);if(!tj(E,V))throw vv().error("invalid-field: displayField is invalid."),new ne("getResults():invalid-field","displayField is invalid.");const W=D!=null&&D.length?D:[V],Q=u.outFields||W,Z=Bde(Q);if(Q.includes(j)||Z||Q.push(j),(xe=E.floorInfo)!=null&&xe.floorField&&Q.push(E.floorInfo.floorField),!(Z||KI(E,Q)))throw vv().error("invalid-field: outField is invalid."),new ne("getResults():invalid-field","outField is invalid.");const ee=E.createQuery(),{orderByFields:ie}=u;if(ie&&(ee.orderByFields=ie),o){ee.outSpatialReference=o;const se=1/xu(o);se&&(ee.maxAllowableOffset=se)}const oe=E.geometryType==="mesh"||E.geometryType==="multipatch",le=((Te=($e=E.capabilities)==null?void 0:$e.data)==null?void 0:Te.supportsZ)&&!oe;if(ee.returnZ=le&&z!==!1,ee.returnGeometry=!0,ee.multipatchOption=oe?"xyFootprint":null,Q&&(ee.outFields=Q),r)ee.geometry=r;else if(g.key)ee.objectIds=[g.key];else{const se=u.searchFields||[V];if(!KI(E,se))throw vv().error("invalid-field: search field is invalid."),new ne("getResults():invalid-field","search field is invalid.");if(Kde(E)&&(ee.num=n),L&&(ee.geometry=L),!((de=g.text)==null?void 0:de.trim()))return[];const ue=g.text,{prefix:pe="",suffix:_e=""}=u,Le=Xde(`${pe}${ue}${_e}`);Jde(E)&&Wde(E,se)&&!i&&ue&&(ee.fullText=Zde({text:ue,searchFields:se}));const Re=Qde({searchTerm:Le,layer:E,searchFields:se,filter:I,exactMatch:i,query:ee,type:"search"});if(ee.where=Re,!Hde(ee))return[]}return E.queryFeatures(ee,{signal:P}).then(se=>eqe(se,b,u,f,V,k,M))})}function UBe(e,t){const{source:i,spatialReference:r,view:n,suggestTerm:o,maxSuggestions:u,sourceIndex:f,exactMatch:g}=e,{layer:b,filter:E}=i,I=t==null?void 0:t.signal,M=Gde(i,n);return qde(b).then(()=>{if(!Kde(b))return[];const k=Yde(i),L=i.searchFields||[k],P=[];i.suggestionTemplate?i.suggestionTemplate.replaceAll(zBe,(le,xe)=>(P.push(xe),le)):P.push(k);const D=Bde(P);P.includes(b.objectIdField)||D||P.push(b.objectIdField);const j=tj(b,k),z=D||KI(b,P),V=KI(b,L);if(!j)throw vv().error("invalid-field: displayField is invalid."),new ne("getSuggestions():invalid-field","displayField is invalid.");if(!z)throw vv().error("invalid-field: outField is invalid."),new ne("getSuggestions():invalid-field","outField is invalid.");if(!V)throw vv().error("invalid-field: search field is invalid."),new ne("getSuggestions():invalid-field","search field is invalid.");const W=b.createQuery(),{orderByFields:Q}=i;if(Q&&(W.orderByFields=Q),W.outSpatialReference=r,W.returnGeometry=!1,W.num=u,W.outFields=P,M&&(W.geometry=M),!o.trim())return[];const{prefix:Z="",suffix:ee=""}=i,ie=Xde(`${Z}${o}${ee}`);Jde(b)&&Wde(b,L)&&!g&&o&&(W.fullText=Zde({text:o,searchFields:L}));const oe=Qde({searchTerm:ie,layer:b,searchFields:L,filter:E,exactMatch:g,query:W,type:"suggest"});return W.where=oe,Hde(W)?b.queryFeatures(W,{signal:I}).then(le=>YBe(le,i,f,k)):[]})}function Gde(e,t){const{filter:i,withinViewEnabled:r}=e,n=t==null?void 0:t.extent;return(i==null?void 0:i.geometry)??(r&&n?n:void 0)}function Bde(e){return e&&e.includes("*")}async function qde(e){e&&await e.load()}function Hde(e){return!(!e.fullText&&!e.where)}function Wde(e,t){const i=e==null?void 0:e.indexes;return!i||!(t!=null&&t.length)?!1:i.filter(r=>r.indexType==="FullText").some(r=>{var o;const n=((o=r.fields)==null?void 0:o.split(",").map(u=>u.trim().toLowerCase()))||[];return t.every(u=>n.includes(u.toLowerCase()))})}function Zde({text:e,searchFields:t}){return e.trim().split(" ").filter(i=>!!i.trim()).map(i=>new Zoe({onFields:t,searchTerm:i,searchType:"prefix"}))}function Jde(e){var t,i;return((i=(t=e==null?void 0:e.capabilities)==null?void 0:t.query)==null?void 0:i.supportsFullTextSearch)??!1}function Kde(e){var t,i;return((i=(t=e==null?void 0:e.capabilities)==null?void 0:t.query)==null?void 0:i.supportsPagination)??!1}function GBe(e){var t,i,r;return((r=(i=(t=e==null?void 0:e.fieldsIndex)==null?void 0:t.fields)==null?void 0:i.find(n=>n.type==="string"))==null?void 0:r.name)??""}function Yde(e){return e.displayField||e.layer.displayField||GBe(e.layer)}function KI(e,t){return!(!e||!(t!=null&&t.length))&&t.every(i=>tj(e,i))}function tj(e,t){return!!e.getField(t)}function BBe(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}function qBe({codedValues:e},t,i){return c_(e??[],r=>{const n=r.name,o=i?n:n.toLowerCase();return(i?t:t.toLowerCase())===o?r.code.toString():null})??null}function Xde(e){return e.replaceAll("'","''")}function Aw(e,t){const i=t==null?void 0:t.where;return i?`(${e}) AND (${i})`:e}function HBe({currentTerm:e,field:t,filter:i,exactMatch:r,url:n,type:o}){const u=t==null?void 0:t.type,f=t==null?void 0:t.name;if(u==="string"||u==="date"||u==="global-id"){const g=jBe.test(n??""),b=g&&BBe(e)?"N":"";return Aw(r&&o==="search"?`${f} = ${b}'${e}'`:g?`${f} LIKE ${b}${`'${e}%'`}`:`${`LOWER(${f})`} LIKE ${b}${`'${e.toLowerCase()}%'`}`,i)}if(u==="oid"||u==="small-integer"||u==="integer"||u==="single"||u==="double"){const g=Number(e);return isNaN(g)?null:Aw(`${f} = ${g}`,i)}return Aw(`${f} = ${e}`,i)}function WBe(e,t){return e?` OR (${t})`:`(${t})`}function Qde({searchTerm:e,layer:t,searchFields:i,filter:r,exactMatch:n,query:o,type:u}){const{definitionExpression:f,url:g}=t;let b="";return!o.fullText&&e&&i&&i.forEach(E=>{var L;const I=t.getField(E),M=(L=t.getFieldDomain)==null?void 0:L.call(t,E,{excludeImpliedDomains:we("esri-widget-legacy-field-domain-calculation")}),k=(M&&M.type==="coded-value"?qBe(M,e,n):null)||e||null;if(k!==null){const P=HBe({currentTerm:k,field:I,filter:r,exactMatch:n,url:g,type:u});P&&(b+=WBe(b,P))}}),f&&b?`(${f}) AND (${b})`:f||b}function ZBe(e,t){let i=null;const{codedValues:r}=e;return r&&r.length&&r.some(n=>n.code===t&&(i=n.name,!0)),i}function JBe(e,t){return e[t]??e[Object.keys(e).find(i=>i.toLowerCase()===t.toLowerCase())]}function epe(e,t,i){var u;const r=e.sourceLayer,{attributes:n}=e,o=(u=r.getFieldDomain)==null?void 0:u.call(r,i,{feature:e,excludeImpliedDomains:we("esri-widget-legacy-field-domain-calculation")});if(t)return Rn(t,n);if(i&&n){const f=r.getField(i),g=JBe(n,i);return g==null?"":o&&o.type==="coded-value"?ZBe(o,g)??"":(f==null?void 0:f.type)==="date"?Oo(new Date(g)):typeof g=="number"?g.toString():typeof g!="string"?"":g.trim()}return""}function KBe(e,t,i,r){const n=e.sourceLayer,{attributes:o}=e,{objectIdField:u}=n,f=u?o[u]:null;return{text:epe(e,t.suggestionTemplate,r),key:f,sourceIndex:i}}function YBe(e,t,i,r){return e.features.map(n=>KBe(n,t,i,r))}function XBe(e){return e!=null&&e.minScale!=null&&e.maxScale!=null}function QBe(e,t,i,r,n,o,u){const f=e.clone(),g=e.sourceLayer,b=g==null?void 0:g.objectIdField,E=b?e.attributes[b]:null,I=epe(e,i.searchTemplate,n);o!=null&&XBe(g)&&(g.minScale&&g.minScale<o?o=g.minScale:g.maxScale&&g.maxScale>o&&(o=g.maxScale));const M=f.geometry?tD(f.geometry,t??void 0,o??void 0):void 0,k=typeof u=="number"&&M?EL(he(M),t??void 0,u):M,L=e.clone();return k!=null&&(L.geometry=zs.fromExtent(k)),{extent:k,target:L,feature:f,key:E,name:I,sourceIndex:r}}function eqe(e,t,i,r,n,o,u){return e.features.map(f=>QBe(f,t,i,r,n,o,u))}var CR;let Wl=CR=class extends ej{constructor(e){super(e),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(t,i)=>VBe({source:this,...t},i),this.getSuggestions=(t,i)=>UBe({source:this,...t},i)}set layer(e){this._set("layer",e),e&&e.load().catch(()=>{})}get name(){return this._getLayerTitle()??""}set name(e){this._overrideIfSome("name",e)}clone(){return new CR({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?he(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?he(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var e,t;return((t=(e=this.layer.fieldsIndex)==null?void 0:e.fields.find(i=>i.type==="string"))==null?void 0:t.name)??""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:e,searchFields:t}=this;return e.loaded?`: ${(t||[this._getDisplayField()]).map(i=>{const r=e.getField(i);return(r==null?void 0:r.alias)||i}).join(", ")}`:""}_getLayerTitle(){const{layer:e}=this;if(!e)return;const{title:t}=e;return t?`${t}${this._getSearchFieldsString()}`:void 0}};m([w({json:{read:{source:"field.name"},write:{target:"field.name"}}})],Wl.prototype,"displayField",void 0),m([w({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],Wl.prototype,"exactMatch",void 0),m([w({value:null})],Wl.prototype,"layer",null),m([w()],Wl.prototype,"name",null),m([w({type:[String],json:{write:!0}})],Wl.prototype,"orderByFields",void 0),m([w()],Wl.prototype,"searchFields",void 0),m([w()],Wl.prototype,"searchTemplate",void 0),m([w()],Wl.prototype,"suggestionTemplate",void 0),Wl=CR=m([H("esri.widgets.Search.LayerSearchSource")],Wl);const ug=Wl;function tqe(e){return!!e&&typeof e.x=="number"&&typeof e.y=="number"}function iqe(e){return e&&typeof e.xmin=="number"&&typeof e.ymin=="number"&&typeof e.xmax=="number"&&typeof e.ymax=="number"}let hp=class extends be{constructor(t){super(t),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};m([w({type:String,json:{write:!0}})],hp.prototype,"address",void 0),m([w({type:Object,json:{write:!0}})],hp.prototype,"attributes",void 0),m([w({type:Ht,json:{write:!0}})],hp.prototype,"extent",void 0),m([w({type:lt,json:{write:!0}})],hp.prototype,"location",void 0),m([w({type:Number,json:{write:!0}})],hp.prototype,"score",void 0),hp=m([H("esri.rest.support.AddressCandidate")],hp);const tpe=hp,ij={type:String,json:{read:{source:"token"},write:{target:"token"}}};let Yn=class extends be{constructor(t){super(t),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};m([w({type:Object,json:{write:!0}})],Yn.prototype,"address",void 0),m([w(ij)],Yn.prototype,"apiKey",void 0),m([w({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],Yn.prototype,"categories",void 0),m([w({type:String,json:{write:!0}})],Yn.prototype,"countryCode",void 0),m([w({type:Boolean,json:{write:!0}})],Yn.prototype,"forStorage",void 0),m([w({type:lt,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],Yn.prototype,"location",void 0),m([w({type:String,json:{write:!0}})],Yn.prototype,"locationType",void 0),m([w({type:String,json:{write:!0}})],Yn.prototype,"magicKey",void 0),m([w({type:Number,json:{write:!0}})],Yn.prototype,"maxLocations",void 0),m([w({type:[String],json:{write:{writer:(e,t)=>{t.outFields=e?e.join(","):null}}}})],Yn.prototype,"outFields",void 0),m([w({type:st,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Yn.prototype,"outSpatialReference",void 0),m([w({type:Ht,json:{write:{writer:(e,t)=>{const i=e?e.shiftCentralMeridian():null;t.searchExtent=i}}}})],Yn.prototype,"searchExtent",void 0),Yn=m([H("esri.rest.support.AddressToLocationsParameters")],Yn),Yn.from=ir(Yn);const ipe=Yn;async function rqe(e,t,i){t=ipe.from(t);const r=R2(e),{address:n,...o}=t.toJSON(),u={...n,...o,f:"json"},f=CT({...r.query,...u}),g=MT(f,i),b=`${r.path}/findAddressCandidates`;return Ct(b,g).then(nqe)}function nqe({data:e}){if(!e)return[];const{candidates:t,spatialReference:i}=e;return t?t.map(r=>{if(!r)return;const{extent:n,location:o}=r,u=!n||iqe(n);return tqe(o)&&u?(n&&(n.spatialReference=i),o&&(o.spatialReference=i),tpe.fromJSON(r)):void 0}):[]}let xh=class extends be{constructor(t){super(t),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};m([w(ij)],xh.prototype,"apiKey",void 0),m([w({type:lt,json:{write:{writer:(e,t)=>{const i=e?e.clone().normalize():null,r=i!==void 0;t.location=r?i:null}}}})],xh.prototype,"location",void 0),m([w({type:String,json:{write:!0}})],xh.prototype,"locationType",void 0),m([w({type:st,json:{read:{source:"outSR"},write:{target:"outSR"}}})],xh.prototype,"outSpatialReference",void 0),xh=m([H("esri.rest.support.LocationToAddressParameters")],xh),xh.from=ir(xh);const rpe=xh;async function sqe(e,t,i){t=rpe.from(t);const r=R2(e),n={...t.toJSON(),f:"json"},o=CT({...r.query,...n}),u=MT(o,i),f=`${r.path}/reverseGeocode`;return Ct(f,u).then(oqe)}function oqe({data:e}){if(!e)return;const{address:t,location:i}=e,r=(t==null?void 0:t.Match_addr)||"";return tpe.fromJSON({address:r,attributes:t||{},location:i,score:100})}let cg=class extends be{constructor(t){super(t),this.isCollection=null,this.magicKey=null,this.text=null}};m([w({type:Boolean,json:{write:!0}})],cg.prototype,"isCollection",void 0),m([w({type:String,json:{write:!0}})],cg.prototype,"magicKey",void 0),m([w({type:String,json:{write:!0}})],cg.prototype,"text",void 0),cg=m([H("esri.rest.support.SuggestionCandidate")],cg);const aqe=cg;let ra=class extends be{constructor(t){super(t),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};m([w(ij)],ra.prototype,"apiKey",void 0),m([w({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],ra.prototype,"categories",void 0),m([w({type:String,json:{write:!0}})],ra.prototype,"countryCode",void 0),m([w({type:lt,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],ra.prototype,"location",void 0),m([w({type:Number,json:{write:!0}})],ra.prototype,"maxSuggestions",void 0),m([w({type:st,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ra.prototype,"outSpatialReference",void 0),m([w({type:Ht,json:{write:{writer:(e,t)=>{const i=e?e.shiftCentralMeridian():null;t.searchExtent=JSON.stringify(i)}}}})],ra.prototype,"searchExtent",void 0),m([w({type:String,json:{write:!0}})],ra.prototype,"text",void 0),ra=m([H("esri.rest.support.SuggestLocationsParameters")],ra),ra.from=ir(ra);const npe=ra;async function lqe(e,t,i){const r=R2(e),n={...(t=npe.from(t)).toJSON(),f:"json"},o=CT({...r.query,...n}),u=MT(o,i),f=`${r.path}/suggest`;return Ct(f,u).then(uqe)}function uqe(e){const{data:t}=e;if(!t)return[];const{suggestions:i}=t;return i?i.map(r=>new aqe(r)):[]}const cqe="Single Line Input",hqe=3e5;function dqe(e,t){return e.location?gqe(e,t):vqe(e,t)}function spe(e,t){var r;if(t.localSearchDisabled)return null;const i=e==null?void 0:e.scale;return typeof i=="number"&&i<=hqe?(r=e==null?void 0:e.extent)==null?void 0:r.center:null}async function pqe(e,t){const{source:i,spatialReference:r,view:n,suggestTerm:o,maxSuggestions:u,sourceIndex:f}=e,g=new npe,{apiKey:b,url:E}=i,I=ope(i,n),M=t==null?void 0:t.signal;if(!E)return null;b&&(g.apiKey=b),i.categories&&(g.categories=i.categories),r&&(g.outSpatialReference=r);const k=spe(n,i);if(k&&(g.location=k),!o.trim())return null;const{prefix:L="",suffix:P=""}=i,D=`${L}${o}${P}`;return g.text=D,I&&(g.searchExtent=I),g.maxSuggestions=u,i.countryCode&&(g.countryCode=i.countryCode),lqe(E,g,{signal:M}).then(j=>bqe(j,f))}function fqe(e){return!!e&&/(?:geocode-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e)}function yqe(e){return!!e&&/(?:\/servers\/[\da-z.-]+\/rest\/services\/world\/geocodeserver).*/i.test(e)}function jJ(e){return!!e&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e)}const mqe="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";async function gqe(e,t){const{source:i,spatialReference:r,location:n,sourceIndex:o,view:u}=e,{apiKey:f,url:g,zoomScale:b,defaultZoomScale:E}=i;if(g==null)return[];const I=u==null?void 0:u.scale,M=t==null?void 0:t.signal,k=new rpe({location:n});f&&(k.apiKey=f),r&&(k.outSpatialReference=r);try{return ape([await sqe(g,k,{signal:M})],{sourceIndex:o,scale:I,view:u,zoomScale:b,defaultZoomScale:E})}catch{return[]}}function ope(e,t){const{filter:i,withinViewEnabled:r}=e,n=t==null?void 0:t.scale,o=t==null?void 0:t.extent,u=i==null?void 0:i.geometry;return(u?tD(u,t??void 0,n):void 0)||(r&&o?o:void 0)}async function vqe(e,t){var ee;const{source:i,suggestResult:r,spatialReference:n,view:o,maxResults:u,sourceIndex:f}=e,g=i==null?void 0:i.zoomScale,b=i==null?void 0:i.defaultZoomScale;if(!((ee=r.text)==null?void 0:ee.trim()))return null;const I=!r.key&&i.prefix?i.prefix:"",M=!r.key&&i.suffix?i.suffix:"",k=`${I}${r.text}${M}`,L=new ipe,{apiKey:P,url:D}=i,j=o==null?void 0:o.scale,z=ope(i,o),V=t==null?void 0:t.signal;if(P&&(L.apiKey=P),!D)return null;i.categories&&(L.categories=i.categories),i.locationType&&(L.locationType=i.locationType),n&&(L.outSpatialReference=n);const W=spe(o,i);W&&(L.location=W),L.maxLocations=u,z&&(L.searchExtent=z),i.countryCode&&(L.countryCode=i.countryCode);const{key:Q}=r,Z=`${Q}`;return Q&&(L.magicKey=Z),L.address={},L.address[i.singleLineFieldName||cqe]=k,i.outFields&&(L.outFields=i.outFields),rqe(D,L,{signal:V}).then(ie=>ape(ie,{key:Z,scale:j,sourceIndex:f,view:o,zoomScale:g,defaultZoomScale:b}))}function wqe(e,t){return{text:e.text,key:e.magicKey,sourceIndex:t}}function bqe(e,t){return e.map(i=>wqe(i,t))}function _qe(e,t){const{key:i,scale:r,sourceIndex:n,view:o,zoomScale:u,defaultZoomScale:f}=t,{attributes:g,extent:b,location:E,address:I}=e,M=new qi({geometry:E,attributes:g}),k=b||E,L=k?tD(k,o??void 0,r??void 0):void 0,P=L?typeof u=="number"?EL(L,o??void 0,u):typeof f=="number"&&(k==null?void 0:k.type)==="point"?EL(L,o??void 0,f):L:null,D=E?`${E.x},${E.y}`:"",j=I||D,z=M.clone();return P!=null&&(z.geometry=zs.fromExtent(P)),{extent:P,feature:M,target:z,key:i,name:j,sourceIndex:n}}function ape(e,t){return e.filter(Boolean).map(i=>_qe(i,t))}var AR;let Ts=AR=class extends ej{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(t,i)=>dqe({source:this,...t},i),this.getSuggestions=(t,i)=>pqe({source:this,...t},i)}clone(){return new AR({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?he(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?he(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};m([w()],Ts.prototype,"apiKey",void 0),m([w()],Ts.prototype,"categories",void 0),m([w()],Ts.prototype,"countryCode",void 0),m([w({json:{write:!0}})],Ts.prototype,"defaultZoomScale",void 0),m([w()],Ts.prototype,"localSearchDisabled",void 0),m([w()],Ts.prototype,"locationType",void 0),m([w({json:{write:!0}})],Ts.prototype,"name",void 0),m([w({json:{write:!0}})],Ts.prototype,"placeholder",void 0),m([w()],Ts.prototype,"searchTemplate",void 0),m([w({json:{write:!0}})],Ts.prototype,"singleLineFieldName",void 0),m([w({json:{read:{source:"suggest"},write:{target:"suggest"}}})],Ts.prototype,"suggestionsEnabled",void 0),m([w({json:{write:!0}})],Ts.prototype,"url",void 0),m([w({json:{write:!0}})],Ts.prototype,"zoomScale",void 0),Ts=AR=m([H("esri.widgets.Search.LocatorSearchSource")],Ts);const lpe=Ts,upe=()=>Se.getLogger("esri.widgets.support.geolocationUtils"),Sqe={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function xqe(){const e=!!we("esri-geolocation");return e||upe().warn("geolocation-unsupported","Geolocation unsupported."),e}function Eqe(){const e=window.isSecureContext;return e||upe().warn("insecure-context","Geolocation requires a secure origin."),e}function kR(){return xqe()&&Eqe()}function cpe(e){return e??(e=Sqe),new Promise((i,r)=>{setTimeout(()=>r(new ne("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(i,r,e??void 0)})}function hpe(e,t){const{position:i,view:r}=e,n=Iqe(i),o=n==null?void 0:n.coords;if(!o)throw new ne("geometry-service:no-coords","Geolocation has no coordinates");return $qe(Tqe(o),r,t)}function Iqe(e){const t=e&&e.coords||{},i={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed};return e&&{coords:i,timestamp:e.timestamp}}function Tqe({longitude:e,latitude:t,altitude:i}){return new lt({longitude:e,latitude:t,z:i||void 0,spatialReference:{wkid:4326}})}function $qe(e,t,i){if(!t)return Promise.resolve(e);const r=t.spatialReference;return r.isWGS84?Promise.resolve(e):r.isWebMercator?Promise.resolve($c(e)):Mqe(i).then(n=>{if(!n)throw new ne("geometry-service:missing-url","Geometry service URL is missing");const o=new XD({geometries:[e],outSpatialReference:r});return Pde(n,o,i).then(u=>u[0])})}function Mqe(e){if(Kt.geometryServiceUrl)return Promise.resolve(Kt.geometryServiceUrl);const t=Ur.getDefault();return t.load(e).catch(()=>{}).then(()=>{var i,r;return(r=(i=t.helperServices)==null?void 0:i.geometry)==null?void 0:r.url})}function bs(e,t){return e.hasOwnProperty(t)&&e[t]!=null&&e[t]!==""}const Cqe=()=>vS("esri/widgets/Search/t9n/Search"),zJ="highlight",B4=Oe.ofType({key:e=>e.layer?"layer":"locator",base:ej,typeMap:{layer:ug,locator:lpe}}),VJ=st.WGS84,Aqe="esri/images/search/search-symbol-32.png",kqe=/<[\s\S]*?>/g,hg=-1;let Mt=class extends RT(Us.EventedMixin(De)){constructor(t){super(t),this._gotoController=null,this._searching=null,this._updatingPromise=null,this._createdFeatureLayers=[],this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new B4,this.defaultSymbols={point:new L2({url:Vt(Aqe),size:24,width:24,height:24}),polyline:new us({color:[130,130,130,1],width:2}),polygon:new gl({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=Ur.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new B4,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const t=async()=>{const i=await Cqe();this.messages=i,this.defaultPopupTemplate=new Af({title:i.searchResult,content:"{Match_addr}"})};t(),this.addHandles([me(()=>[this.includeDefaultSources,this.view,this.portal],()=>this._update(),Je),fS(t)])}destroy(){this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics()}get activeSource(){return this.allSources.at(this.activeSourceIndex)??null}get activeSourceIndex(){return this.allSources.length===1||!this.searchAllEnabled?0:hg}set activeSourceIndex(t){this._overrideIfSome("activeSourceIndex",t)}get allPlaceholder(){var t;return(t=this.messages)==null?void 0:t.allPlaceholder}set allPlaceholder(t){this._overrideIfSome("allPlaceholder",t)}get allSources(){const{sources:t,defaultSources:i,includeDefaultSources:r}=this,n=typeof r=="function"?r.call(null,{sources:t,defaultSources:i}):r?i.concat(t):t,o=this._get("allSources")||new B4;return o.removeAll(),o.addMany(n.filter(Boolean)),o}get locationEnabled(){return this._get("locationEnabled")||kR()}set locationEnabled(t){if(t===void 0)return void this._clearOverride("locationEnabled");const i=kR();if(t&&!i){const r=new ne("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});Se.getLogger(this).error(r)}this._override("locationEnabled",!!t&&i)}get placeholder(){const{allSources:t,activeSourceIndex:i,allPlaceholder:r}=this;if(i===hg)return r??"";const n=t.at(i);return(n==null?void 0:n.placeholder)??""}set searchTerm(t){this._set("searchTerm",t||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==t&&this._set("selectedSuggestion",null),t===""&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":this.allSources.length===0?"disabled":"ready"}get updating(){return this._updatingPromise!=null}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup();const{view:t,resultGraphic:i}=this;t&&i&&t.graphics.remove(i),this._set("resultGraphic",null)}search(t,i){this.emit("search-start"),this.clearGraphics();const r=this._createSuggestionForSearch(t),n=(async()=>{var o;try{await this.when();const u=await this._getResultsFromSources(r,i);if((o=i==null?void 0:i.signal)!=null&&o.aborted)return null;const f={activeSourceIndex:this.activeSourceIndex,searchTerm:r.text??"",numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(f,u,r);const g=this._getFirstResult(f.results),b=r.location&&g?g.name:r.text,E=b==null?void 0:b.replace(kqe,"");return this._set("searchTerm",E),(r.key&&typeof r.sourceIndex=="number"||r.location)&&this._set("selectedSuggestion",r),this._set("results",f.results),this._set("resultCount",f.results.reduce((I,M)=>{var k;return I+(((k=M.results)==null?void 0:k.length)??0)},0)),this.emit("search-complete",f),await this._selectFirstResult(g),f}finally{this._clearSearching()}})();return this._searching=n,n}async searchNearby(t){if(!this.locationEnabled){const r=new ne("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});throw Se.getLogger(this).error(r),r}const i=(async()=>{try{const r=await cpe(),n=await hpe({position:r,view:this.view},t);return await this.search(n,t)}finally{this._clearSearching()}})();return this._searching=i,i}async select(t){if(this.clearGraphics(),!t){const le=new ne("select:missing-parameter","Cannot select without a searchResult.",{searchResult:t});throw Se.getLogger(this).error(le),le}const{view:i}=this,r=bs(t,"sourceIndex")?t.sourceIndex:this._getSourceIndexOfResult(t),n=r!=null?this.allSources.at(r):null;if(!n){const le=new ne("select:missing-source","Cannot select without a source.",{source:n});throw Se.getLogger(this).error(le),le}const o=n instanceof ug?this._getLayerSourcePopupTemplate(n):n.popupTemplate,u=n.resultSymbol||this._getDefaultSymbol(t),f=bs(n,"resultGraphicEnabled")?n.resultGraphicEnabled:this.resultGraphicEnabled,g=bs(n,"autoNavigate")?n.autoNavigate:this.autoNavigate,b=bs(n,"popupEnabled")?n.popupEnabled:this.popupEnabled,E=b?o||this.popupTemplate||this.defaultPopupTemplate:null,{feature:I}=t;if(!I){const le=new ne("select:missing-feature","Cannot select without a feature.",{feature:I});throw Se.getLogger(this).error(le),le}const{attributes:M,geometry:k,layer:L,sourceLayer:P}=I,D=k?C_(k):null,j={layerViewQuery:this._getLayerView(I),elevationQuery:i&&D!=null?TLe(D,i):Promise.resolve(D)},z=await Lo(j),V=z.layerViewQuery.value,W=z.elevationQuery.value;u instanceof xm&&(u.text=t.name);const Q=i&&g?t.target||t.extent:null;await(Q!=null?this._goToSearchResult(Q):Promise.resolve());const ee=V?I:new qi({geometry:k,symbol:u,attributes:M,layer:L,sourceLayer:P,popupTemplate:E}),ie=i==null?void 0:i.popup,oe=ie&&b&&ee.getEffectivePopupTemplate(ie.defaultPopupTemplateEnabled);return oe&&await i.openPopup({features:[ee],location:W}),V&&dR(V)&&!oe&&this._highlightFeature({graphic:ee,layerView:V}),!V&&f&&i&&i.graphics.push(ee),this._setResultFloor(t),this._set("selectedResult",t),this._set("resultGraphic",ee),this.emit("select-result",{result:t,source:n,sourceIndex:r}),t}async suggest(t,i,r){const n=t||this.searchTerm;this.emit("suggest-start",{searchTerm:n}),await this._suggestTimer(i,r);const o=await this._suggestImmediate(n,r);return this._set("suggestions",o==null?void 0:o.results),this._set("suggestionCount",(o==null?void 0:o.results.reduce((u,f)=>{var g;return u+(((g=f.results)==null?void 0:g.length)??0)},0))??null),this.emit("suggest-complete",o),o}async when(){await cl(()=>!this.updating)}async _update(){const{portal:t,view:i}=this;if(this.includeDefaultSources){const r=this._updatingPromise=Lo([t==null?void 0:t.load(),i==null?void 0:i.when()]);if(this.destroyed||(await r,r!==this._updatingPromise))return}await cl(()=>this.messages),this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){var i,r;const t=(r=(i=this.portal)==null?void 0:i.helperServices)==null?void 0:r.geocode;return t?t.map(n=>{var g;if(n.placefinding===!1)return;const o=Kt.apiKey&&jJ(n.url)?{url:mqe}:null,u=lpe.fromJSON({...n,...o}),f=u.url;if(jJ(f)||yqe(f)||fqe(f)){const b=u.outFields??["Addr_type","Match_addr","StAddr","City"],E=(u.placeholder||((g=this.messages)==null?void 0:g.placeholder))??"",I=typeof u.defaultZoomScale=="number"?u.defaultZoomScale:2500;u.singleLineFieldName="SingleLine",u.outFields=b,u.placeholder=E,u.defaultZoomScale=I}return u.singleLineFieldName?u:void 0}).filter(cr):[]}_destroyFeatureLayers(){this._createdFeatureLayers.forEach(t=>t==null?void 0:t.destroy()),this._createdFeatureLayers=[]}_getLayerSources(t,i){var n;const r=(n=this.view)==null?void 0:n.map;return t.map(o=>{const u=r.findLayerById(o.id);if(!u)return;const f=this._getLayerJSON(o),g=ug.fromJSON(f);return g.placeholder=i,this._getLayer(u,f).then(b=>{g.layer=b}),g}).filter(cr).toArray()}_getTableSources(t,i){var n;const r=(n=this.view)==null?void 0:n.map;return t.map(o=>{if(!o.id)return;const u=r.findTableById(o.id);if(!u)return;const f=this._getLayerJSON(o),g=ug.fromJSON(f);return g.placeholder=i,this._getLayer(u,f).then(b=>{g.layer=b}),g}).filter(cr).toArray()}_convertApplicationProperties(){var f,g,b;const t=(f=this.view)==null?void 0:f.map,i=(b=(g=t==null?void 0:t.applicationProperties)==null?void 0:g.viewing)==null?void 0:b.search;if(!i)return[];const{enabled:r,hintText:n,layers:o,tables:u}=i;return r?[...this._getLayerSources(o,n),...this._getTableSources(u,n)]:[]}async _getSubLayer(t,i){var o;if(await t.load(),!t.allSublayers)throw new Error;const r=t.allSublayers.find(u=>u.id===i.subLayer);if(!r)throw new Error;const n=await((o=r.createFeatureLayer)==null?void 0:o.call(r));if(!n)throw new Error;return this._createdFeatureLayers.push(n),n}async _getBuildingSubLayer(t,i){await t.load();const r=t.allSublayers.find(n=>n.id===i.subLayer);if((r==null?void 0:r.type)!=="building-component")throw new Error;if(await r.load(),r.associatedLayer==null)throw new Error;return await r.associatedLayer.load(),r}async _getLayer(t,i){if(t.type==="feature"||t.type==="scene"||t.type==="csv"||t.type==="geojson"||t.type==="ogc-feature")return t;if(t.type==="map-image")try{return await this._getSubLayer(t,i)}catch{const n=new ne("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:t});return Se.getLogger(this).error(n),null}return t.type==="building-scene"?this._getBuildingSubLayer(t,i):null}_getLayerJSON(t){return typeof t.toJSON=="function"?t.toJSON():t}_updateDefaultSources(){const{defaultSources:t,includeDefaultSources:i}=this;this._destroyFeatureLayers(),t.removeAll(),i&&t.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var o;const t=(o=this.view)==null?void 0:o.popup,{resultGraphic:i}=this;if(!t||!i)return;const r="selectedFeature"in t,n=r?t.selectedFeature:null;r&&n&&n===i&&t.close()}_suggestTimer(t,i){const r=t??this.suggestionDelay;return ym(r,null,i==null?void 0:i.signal)}_createLocationForSearch(t){return t instanceof qi&&t.geometry?C_(t.geometry):t instanceof lt?t:Array.isArray(t)&&t.length===2?new lt({longitude:t[0],latitude:t[1]}):null}_createSuggestionForSearch(t){if(t&&bs(t,"key")&&bs(t,"text")&&bs(t,"sourceIndex"))return t;const i=this._createLocationForSearch(t),r=typeof t=="string"?t:this.searchTerm,{selectedSuggestion:n,selectedResult:o}=this,u=!t&&n&&o,f=u&&n.key===o.key&&n.sourceIndex===o.sourceIndex,g=u&&n.location;return f||g?n:{location:i,text:i?"":r,sourceIndex:null,key:null}}_getFirstResult(t){return c_(t,({results:i})=>i==null?void 0:i[0])??null}async _selectFirstResult(t){return this.autoSelect&&t?this.select(t):null}async _suggestImmediate(t,i){var o;await this.when();const r=await this._getSuggestionsFromSources(t,i);if((o=i==null?void 0:i.signal)!=null&&o.aborted)return null;const n={activeSourceIndex:this.activeSourceIndex,searchTerm:t??"",numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(n,r),n}_formatSourceResponse(t,i,r){const n=(i==null?void 0:i.value)||[],o=i==null?void 0:i.error,u=this.allSources.at(r);if(o){const f={sourceIndex:r,source:u,error:o};t.errors.push(f),Se.getLogger(this).error(o),t.numErrors++}else{const f={sourceIndex:r,source:u,results:n};t.results.push(f),t.numResults+=n.length}}_formatResponse(t,i,r){if(i)if(t.activeSourceIndex===hg){const n=r&&bs(r,"sourceIndex")&&r.sourceIndex!==-1?r.sourceIndex:void 0;i.forEach((o,u)=>{const f=n!==void 0?n:u;this._formatSourceResponse(t,o,f)})}else this._formatSourceResponse(t,i[0],t.activeSourceIndex)}async _getResultsFromSources(t,i){const{allSources:r}=this,n=!t.location&&bs(t,"sourceIndex")?t.sourceIndex:this.activeSourceIndex,o=[];if(!r.length){const u=new ne("search:no-sources-defined","At least one source is required.",{allSources:r});throw Se.getLogger(this).error(u),u}return n===hg?r.forEach((u,f)=>{o.push(this._getResultsFromSource(t,f,i))}):o.push(this._getResultsFromSource(t,n,i)),Lo(o)}async _getSuggestionsFromSources(t,i){const{allSources:r,activeSourceIndex:n}=this,o=[];if(!r.length){const u=new ne("suggest:no-sources-defined","At least one source is required.",{allSources:r});throw Se.getLogger(this).error(u),u}return n===hg?r.forEach((u,f)=>{o.push(this._getSuggestionsFromSource(t,f,i))}):o.push(this._getSuggestionsFromSource(t,n,i)),Lo(o)}async _getResultsFromSource(t,i,r){var E,I;const n=i!=null?this.allSources.at(i):null;if(!n)return null;const{location:o=null}=t,u=((E=this.view)==null?void 0:E.spatialReference)||VJ,f=bs(n,"maxResults")?n.maxResults:this.maxResults,g=!!(n instanceof ug&&bs(n,"exactMatch"))&&n.exactMatch,{view:b}=this;return(I=n.getResults)==null?void 0:I.call(n,{view:b,sourceIndex:i,location:o,suggestResult:t,spatialReference:u,exactMatch:g,maxResults:f},r)}async _getSuggestionsFromSource(t,i,r){var g,b;const n=this.allSources.at(i);if(!n)return null;t??(t="");const o=bs(n,"suggestionsEnabled")?n.suggestionsEnabled:this.suggestionsEnabled,u=t==null?void 0:t.length,f=bs(n,"minSuggestCharacters")?n.minSuggestCharacters:this.minSuggestCharacters;if(o&&t.trim()&&u>=f){const E=((g=this.view)==null?void 0:g.spatialReference)||VJ,I=bs(n,"maxSuggestions")?n.maxSuggestions:this.maxSuggestions,{view:M}=this,k=!!(n instanceof ug&&bs(n,"exactMatch"))&&n.exactMatch;return(b=n.getSuggestions)==null?void 0:b.call(n,{view:M,sourceIndex:i,suggestTerm:t,spatialReference:E,maxSuggestions:I,exactMatch:k},r)}return null}_getLayerSourcePopupTemplate(t){const{layer:i}=t;if(i)return bs(t,"popupTemplate")?t.popupTemplate:i.popupTemplate}_getSourceIndexOfResult(t){return c_(this.results??[],({results:i,sourceIndex:r})=>(i==null?void 0:i.includes(t))?r:null)??null}async _goToSearchResult(t){this._abortGoTo();const i=new AbortController;this._gotoController=i;const r={target:{target:t},options:{signal:i.signal}};t||(r.options.animate=!1),await this.callGoTo(r),this._gotoController=null}_getDefaultSymbol(t){var n;const{defaultSymbols:i}=this,r=(n=t.feature)==null?void 0:n.geometry;if(r==null)return null;switch(r.type){case"point":case"multipoint":return i.point;case"polyline":return i.polyline;case"extent":case"polygon":return i.polygon;default:return null}}_removeHighlight(){this.removeHandles(zJ)}async _getLayerView(t){var n,o;const{view:i}=this;if(!t||!i||((n=t.layer)==null?void 0:n.type)==="building-component"||((o=t.layer)==null?void 0:o.type)==="subtype-sublayer")return null;const{layer:r}=t;return r?(await i.when(),i.whenLayerView(r)):null}_highlightFeature(t){const{graphic:i,layerView:r}=t,{attributes:n,layer:o}=i,{objectIdField:u}=o,f=(u&&(n==null?void 0:n[u]))??null,g=r.highlight(f??i);this.addHandles(g,zJ)}_setResultFloor(t){var o,u,f;const{view:i}=this,r=(o=t.feature)==null?void 0:o.attributes,n=(u=t.feature)==null?void 0:u.sourceLayer;if(n&&"floorInfo"in n&&((f=n==null?void 0:n.floorInfo)!=null&&f.floorField)&&r){const g=r[n.floorInfo.floorField];i==null||i.emit("select-result-floor",g)}}};Mt.ALL_INDEX=hg,m([w()],Mt.prototype,"_searching",void 0),m([w()],Mt.prototype,"_updatingPromise",void 0),m([w({readOnly:!0,value:null})],Mt.prototype,"activeSource",null),m([w()],Mt.prototype,"activeSourceIndex",null),m([w()],Mt.prototype,"allPlaceholder",null),m([w({readOnly:!0})],Mt.prototype,"allSources",null),m([w()],Mt.prototype,"autoNavigate",void 0),m([w()],Mt.prototype,"autoSelect",void 0),m([w()],Mt.prototype,"defaultPopupTemplate",void 0),m([w({readOnly:!0})],Mt.prototype,"defaultSources",void 0),m([w()],Mt.prototype,"defaultSymbols",void 0),m([w()],Mt.prototype,"includeDefaultSources",void 0),m([w()],Mt.prototype,"locationEnabled",null),m([w()],Mt.prototype,"maxInputLength",void 0),m([w()],Mt.prototype,"maxResults",void 0),m([w()],Mt.prototype,"maxSuggestions",void 0),m([w()],Mt.prototype,"messages",void 0),m([w()],Mt.prototype,"minSuggestCharacters",void 0),m([w({readOnly:!0})],Mt.prototype,"placeholder",null),m([w()],Mt.prototype,"popupEnabled",void 0),m([w({type:Af})],Mt.prototype,"popupTemplate",void 0),m([w({type:Ur})],Mt.prototype,"portal",void 0),m([w()],Mt.prototype,"resultCount",void 0),m([w()],Mt.prototype,"resultGraphicEnabled",void 0),m([w({readOnly:!0})],Mt.prototype,"resultGraphic",void 0),m([w({readOnly:!0})],Mt.prototype,"results",void 0),m([w({readOnly:!0})],Mt.prototype,"selectedSuggestion",void 0),m([w()],Mt.prototype,"searchAllEnabled",void 0),m([w({readOnly:!0})],Mt.prototype,"selectedResult",void 0),m([w()],Mt.prototype,"searchTerm",null),m([w({type:B4})],Mt.prototype,"sources",void 0),m([w({readOnly:!0})],Mt.prototype,"state",null),m([w()],Mt.prototype,"suggestionDelay",void 0),m([w()],Mt.prototype,"suggestionCount",void 0),m([w({readOnly:!0})],Mt.prototype,"suggestions",void 0),m([w()],Mt.prototype,"suggestionsEnabled",void 0),m([w({readOnly:!0})],Mt.prototype,"updating",null),m([w()],Mt.prototype,"view",void 0),m([w()],Mt.prototype,"clear",null),Mt=m([H("esri.widgets.Search.SearchViewModel")],Mt);const Gg=Mt;let dp=class extends bi{constructor(t,i){super(t,i),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}destroy(){this.viewModel=null}render(){const t={[Jf.showMoreResults]:this.showMoreResultsOpen};return G("div",{class:this.classes(Jf.base,Ge.widget)},G("div",{class:this.classes(Jf.moreResults,t),key:"esri-search-renderer__container"},this._renderSearchResultName(),this._renderMoreResults()))}_renderMoreResults(){return G("div",{key:"esri-search-renderer__more-results"},this._renderMoreResultsButton(),this._renderMoreResultsLists())}_renderSearchResultName(){var r;const t=(r=this.viewModel)==null?void 0:r.selectedResult,i=(t==null?void 0:t.name)||"";return G("div",{class:Jf.moreResultsItem,key:"esri-search-renderer__result-name"},i)}_renderMoreResultsLists(){const{viewModel:t}=this;if(!t)return[];const i=t.results;if((t.resultCount??0)<2)return null;const r=i==null?void 0:i.map(n=>this._renderMoreResultsList(n));return G("div",{class:Jf.moreResultsList,key:"esri-search-renderer__more-results-container"},r)}_renderMoreResultsButton(){const{messages:t,viewModel:i}=this;return i?(i.resultCount??0)<2?null:G("div",{class:Jf.moreResultsItem,key:"esri-search-renderer__more-results-button"},G("a",{bind:this,class:Ge.anchor,href:"#",onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?t.hideMoreResults:t.showMoreResults)):null}_renderMoreResultsHeader(t,i){return G("div",{class:Jf.moreResultsListHeader,key:`esri-search-result-renderer__header-${i}`},t)}_renderMoreResultsList(t){var I,M,k;const{results:i}=t,r=(i==null?void 0:i.length)??0,n=r>0,o=(I=this.viewModel)==null?void 0:I.selectedResult,u=r===1&&i[0]===o,f=this._getSourceName(t.source,t.sourceIndex),g=(((k=(M=this.viewModel)==null?void 0:M.results)==null?void 0:k.length)??0)>1&&!u?this._renderMoreResultsHeader(f,t.sourceIndex):null,b=n&&i.map((L,P)=>this._renderMoreResultsListItem(L,P)),E=n&&!u?G("ul",{key:`esri-search-result-renderer__list-${t.sourceIndex}`},b):null;return n?G("div",{key:`esri-search-result-renderer__results-${t.sourceIndex}`},g,E):null}_renderMoreResultsListItem(t,i){var n;const r=(n=this.viewModel)==null?void 0:n.selectedResult;return t!==r?G("li",{key:`esri-search-result-renderer__list-item-${i}`},G("a",{bind:this,class:Ge.anchor,"data-result":t,href:"#",onclick:this._selectResultClick,onkeydown:this._selectResultClick,tabIndex:0},t.name)):null}_showMoreResultsClick(t){var r,n;t.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const i=(n=(r=this.viewModel)==null?void 0:r.view)==null?void 0:n.popup;i&&"reposition"in i&&i.reposition()}_selectResultClick(t){var r;t.preventDefault();const i=t.currentTarget["data-result"];(r=this.viewModel)==null||r.select(i)}_getSourceName(t,i){return i===Gg.ALL_INDEX?this.messages.all:t.name}};m([w(),Xt("esri/widgets/Search/t9n/Search")],dp.prototype,"messages",void 0),m([w()],dp.prototype,"showMoreResultsOpen",void 0),m([w()],dp.prototype,"viewModel",void 0),m([RI()],dp.prototype,"_showMoreResultsClick",null),m([RI()],dp.prototype,"_selectResultClick",null),dp=m([H("esri.widgets.Search.SearchResultRenderer")],dp);const Lqe=dp,Oqe=/<[a-z/][\s\S]*>/i,Rqe=(e,t)=>{const i=Ave(t).split(/\s/),r=new RegExp(`(${i.join("|")})`,"gi");return e.replace(r,n=>`<strong>${n}</strong>`)};let Lt=class extends bi{constructor(t,i){super(t,i),this._activeMenuItemIndex=-1,this._inputNode=null,this._focusAbortController=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new Lqe,this._suggestController=null,this._searchController=null,this._locateFailed=!1,this._container=null,this.activeMenu="none",this.disabled=!1,this.messages=null,this.messagesCommon=null,this.viewModel=new Gg,this._clearActiveMenu=()=>{this.activeMenu="none"},this._removeActiveMenu=r=>{var o;const n=r.relatedTarget;n&&((o=this._container)!=null&&o.contains(n))||this._clearActiveMenu()},this._renderSearchResultsContent=()=>this._searchResultRenderer,this.addHandles([me(()=>this.searchTerm,r=>{var n,o;(r&&this.activeMenu==="warning"||!r&&!((o=(n=this.viewModel)==null?void 0:n.selectedSuggestion)!=null&&o.location))&&this._clearActiveMenu()}),Lr(()=>{var r;return(r=this.viewModel)==null?void 0:r.allSources},"change",()=>this._watchSourceChanges()),me(()=>this.activeMenu,()=>this._resetActiveMenuItemIndex(),Je),me(()=>this.viewModel,r=>this._searchResultRenderer.viewModel=r,Je),me(()=>this.viewModel.results,()=>this._searchResultRenderer.showMoreResultsOpen=!1),me(()=>{var r;return(r=this.viewModel)==null?void 0:r.defaultPopupTemplate},r=>{r&&(r.content=this._renderSearchResultsContent)},Je)])}destroy(){var t;this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer=Jt(this._searchResultRenderer),(t=this._focusAbortController)==null||t.abort()}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}get activeSource(){var t;return(t=this.viewModel)==null?void 0:t.activeSource}get activeSourceIndex(){return this.viewModel.activeSourceIndex}set activeSourceIndex(t){this.viewModel.activeSourceIndex=t}get allPlaceholder(){return this.viewModel.allPlaceholder}set allPlaceholder(t){this.viewModel.allPlaceholder=t}get allSources(){return this.viewModel.allSources}get autoNavigate(){return this.viewModel.autoNavigate}set autoNavigate(t){this.viewModel.autoNavigate=t}get autoSelect(){return this.viewModel.autoSelect}set autoSelect(t){this.viewModel.autoSelect=t}get defaultSources(){return this.viewModel.defaultSources}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get icon(){return"search"}set icon(t){this._overrideIfSome("icon",t)}get includeDefaultSources(){return this.viewModel.includeDefaultSources}set includeDefaultSources(t){this.viewModel.includeDefaultSources=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get locationEnabled(){return this.viewModel.locationEnabled}set locationEnabled(t){this.viewModel.locationEnabled=t}get maxResults(){return this.viewModel.maxResults}set maxResults(t){this.viewModel.maxResults=t}get maxSuggestions(){return this.viewModel.maxSuggestions}set maxSuggestions(t){this.viewModel.maxSuggestions=t}get minSuggestCharacters(){return this.viewModel.minSuggestCharacters}set minSuggestCharacters(t){this.viewModel.minSuggestCharacters=t}get popupEnabled(){return this.viewModel.popupEnabled}set popupEnabled(t){this.viewModel.popupEnabled=t}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(t){this.viewModel.popupTemplate=t}get portal(){var t;return(t=this.viewModel)==null?void 0:t.portal}set portal(t){this.viewModel&&(this.viewModel.portal=t)}get resultGraphic(){return this.viewModel.resultGraphic}set resultGraphic(t){this.viewModel.resultGraphic=t}get resultGraphicEnabled(){return this.viewModel.resultGraphicEnabled}set resultGraphicEnabled(t){this.viewModel.resultGraphicEnabled=t}get results(){return this.viewModel.results}get searchAllEnabled(){return this.viewModel.searchAllEnabled}set searchAllEnabled(t){this.viewModel.searchAllEnabled=t}get searchTerm(){return this.viewModel.searchTerm}set searchTerm(t){this.viewModel.searchTerm=t}get selectedResult(){return this.viewModel.selectedResult}get sources(){return this.viewModel.sources}set sources(t){this.viewModel.sources=t}get suggestions(){return this.viewModel.suggestions}get suggestionsEnabled(){return this.viewModel.suggestionsEnabled}set suggestionsEnabled(t){this.viewModel.suggestionsEnabled=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}clear(){this.viewModel.clear()}focus(){this._handleFocus(),this.emit("search-focus")}async _handleFocus(){var i,r;(i=this._focusAbortController)==null||i.abort(),this._focusAbortController=new AbortController;const t=this._focusAbortController.signal;await Do(F6(t)),(r=this._inputNode)==null||r.focus()}blur(){var t;(t=this._inputNode)==null||t.blur(),this.emit("search-blur")}async search(t){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const i=new AbortController,{signal:r}=i;this._searchController=i;try{const n=await this.viewModel.search(t,{signal:r});return this._searchController!==i?void 0:(this.activeMenu=n!=null&&n.numResults?"none":"warning",this._searchController=null,n)}catch{return this._searchController!==i?void 0:(this._clearActiveMenu(),void(this._searchController=null))}}async suggest(t){this._cancelSuggest();const i=new AbortController,{signal:r}=i;this._suggestController=i;try{const n=await this.viewModel.suggest(t,null,{signal:r});return this._suggestController!==i?void 0:(this._suggestController=null,n!=null&&n.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),n)}catch{return this._suggestController!==i||(this._suggestController=null),null}}render(){const{state:t}=this.viewModel,i={[Ge.disabled]:t==="disabled",[Ge.widgetDisabled]:this.disabled};return G("div",{class:this.classes(Si.base,Ge.widget,i)},t==="loading"?this._renderLoader():this._renderContainer())}_renderSubmitButton(){const{messages:t,disabled:i}=this;return G("button",{"aria-label":t.searchButtonTitle,bind:this,class:this.classes(Si.submitButton,Ge.widgetButton),disabled:i,key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:t.searchButtonTitle,type:"button"},G("span",{"aria-hidden":"true",class:is.search}))}_renderWarningMenu(){return G("div",{class:this.classes(Ge.menu,Si.warningMenu),key:"esri-search__error-menu"},G("div",{class:Si.warningMenuBody},this._renderWarning()))}_renderSourceMenuButton(){const{messages:t,activeMenu:i,sourceMenuId:r,sourceMenuButtonId:n,disabled:o}=this,{activeSourceIndex:u,allSources:f}=this.viewModel;return f.length>1?G("button",{afterCreate:Og,"aria-controls":r,"aria-expanded":(i==="source").toString(),"aria-haspopup":"true","aria-label":t.searchIn,bind:this,class:this.classes(Si.sourcesButton,Ge.widgetButton),"data-node-ref":"_sourceMenuButtonNode",disabled:o,id:n,key:"esri-search__source-menu-button",onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,title:t.searchIn,type:"button"},G("span",{"aria-hidden":"true",class:this.classes(is.downArrow,Si.sourcesButtonDown)}),G("span",{"aria-hidden":"true",class:this.classes(is.upArrow,Si.sourcesButtonUp)}),G("span",{class:Si.sourceName},this._getSourceName(u))):null}_renderSourcesList(){const{allSources:t,searchAllEnabled:i}=this.viewModel,{_activeMenuItemIndex:r,activeMenu:n,sourceMenuId:o,sourceMenuButtonId:u}=this,f=n==="source"&&r>-1?this._buildId("source-item",r):null;return t.length>1?G("ul",{afterCreate:Og,"aria-activedescendant":f,"aria-labelledby":u,bind:this,class:Ge.menuList,"data-node-ref":"_sourceListNode",id:o,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,role:"menu",tabIndex:-1},i?this._renderSource(Gg.ALL_INDEX):null,t.map((g,b)=>this._renderSource(b)).toArray()):null}_renderSourcesMenu(){const{allSources:t}=this.viewModel;return t.length>1?G("div",{class:this.classes(Ge.menu,Si.sourcesMenu),key:"esri-search__source-menu"},this._renderSourcesList()):null}_renderLoader(){const{messages:t,messagesCommon:i,disabled:r}=this;return G("div",{class:Ge.loader,key:"base-loader",tabIndex:r?-1:void 0},G("span",{"aria-hidden":"true",class:Ge.loaderAnimation}),G("span",{class:is.fontFallbackText},t.searchButtonTitle),G("span",{class:Ge.loaderText},i.loading))}_renderContainer(){const{allSources:t,state:i}=this.viewModel,{activeMenu:r}=this,n={[Si.hasMultipleSources]:t.length>1,[Si.isLoading]:i==="loading",[Si.isSearching]:i==="searching",[Si.showWarning]:r==="warning",[Si.showSources]:r==="source",[Si.showSuggestions]:r==="suggestion"};return G("div",{afterCreate:o=>{this._container=o,o.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:o=>{o.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes(n,Si.container),key:"base-container",tabIndex:-1},this._renderSourceMenuButton(),this._renderSourcesMenu(),this._renderInputContainer(),this._renderSubmitButton(),this._renderWarningMenu())}_renderClearButton(){return this.searchTerm?G("button",{bind:this,class:this.classes(Si.clearButton,Ge.widgetButton),disabled:this.disabled,key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},G("span",{"aria-hidden":"true",class:is.close})):null}_renderLocationGroup(){const{messages:t,locationEnabled:i,displayedSearchTerm:r}=this,n=i&&!r,o=this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0;return n?G("ul",{class:this.classes(Ge.menuList,Si.suggestionList,Si.suggestionListCurrentLocation),key:"esri-search__suggestion-list-current-location",role:"group"},G("li",{"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0).toString(),bind:this,class:this.classes(Ge.menuItem,o?Ge.menuItemFocus:null),"data-current-location-item":!0,id:this._buildId("suggestion-item",0),onclick:this._handleUseCurrentLocationClick,role:"option"},G("span",{"aria-hidden":"true",class:is.locateCircled})," ",t.useCurrentLocation)):null}_renderInput(){const{activeMenu:t,locationEnabled:i,displayedSearchTerm:r,messages:n,suggestionsMenuId:o,inputId:u,_activeMenuItemIndex:f,disabled:g}=this,{maxInputLength:b,placeholder:E,searchTerm:I,suggestionCount:M}=this.viewModel,k=!(!(i&&!r)&&!M),L=t==="suggestion"&&f>-1?this._buildId("suggestion-item",f):null;return G("input",{afterCreate:Og,"aria-activedescendant":L,"aria-autocomplete":"list","aria-controls":k?o:null,"aria-expanded":(k&&t==="suggestion").toString(),"aria-haspopup":"listbox","aria-label":n.searchButtonTitle,autocomplete:"off",bind:this,class:this.classes(Ge.input,Si.input),"data-node-ref":"_inputNode",disabled:g,id:u,maxlength:b,onblur:this.blur,onclick:this._openSuggestionMenu,onfocus:this.focus,oninput:this._handleInputPaste,onkeyup:this._handleInputKeyup,onpaste:this._handleInputPaste,placeholder:E,role:"combobox",title:I?"":E,type:"text",value:I})}_renderForm(){return G("form",{bind:this,class:Si.form,disabled:this.disabled,key:"esri-search__form",onsubmit:this._formSubmit,role:"search"},this._renderInput())}_renderSuggestList(t){const{sourceIndex:i}=t,{results:r}=t;return(r==null?void 0:r.length)?G("ul",{class:this.classes(Ge.menuList,Si.suggestionList),key:`esri-search__suggestion-list-${i}`,role:"group"},r==null?void 0:r.map(o=>this._renderSuggestion(o,this._menuItemCount++))):null}_renderSuggestionsGroup(){const{suggestions:t}=this.viewModel;return t?t.map(i=>[this._renderSuggestionHeader(i),this._renderSuggestList(i)]):[]}_renderSuggestionsMenu(){const{displayedSearchTerm:t,locationEnabled:i,suggestionsMenuId:r,inputId:n}=this,{suggestionCount:o}=this.viewModel,u=i&&!t||o;return this._menuItemCount=0,u?G("div",{afterCreate:Og,"aria-labelledby":n,bind:this,class:this.classes(Ge.menu,Si.suggestionsMenu),"data-node-ref":"_suggestionListNode",id:r,key:"esri-search__suggestions-menu",role:"listbox"},this._renderLocationGroup(),this._renderSuggestionsGroup()):null}_renderInputContainer(){return G("div",{class:Si.inputContainer,key:"esri-search__input-container"},this._renderForm(),this._renderSuggestionsMenu(),this._renderClearButton())}_renderSuggestionHeader(t){var f;const{allSources:i,activeSourceIndex:r}=this.viewModel,{sourceIndex:n}=t,o=(f=t.results)==null?void 0:f.length,u=i.length>1&&r===Gg.ALL_INDEX;return o&&u?G("div",{class:Ge.menuHeader,key:`esri-search__suggestion-header-${n}`},this._getSourceName(n)):null}_renderSuggestion(t,i){const{_activeMenuItemIndex:r,viewModel:{searchTerm:n}}=this;if(!n)return;const o=this.activeMenu==="suggestion"&&r===i;return G("li",{"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===i).toString(),bind:this,class:this.classes(Ge.menuItem,o?Ge.menuItemFocus:null),"data-suggestion":t,id:this._buildId("suggestion-item",i),innerHTML:this._getSuggestResultHTML(t.text,n),key:`esri-search__suggestion_${i}`,onclick:this._handleSuggestionClick,role:"option"})}_renderSource(t){const{activeSourceIndex:i,searchAllEnabled:r}=this.viewModel,n={[Ge.menuItemActive]:t===i,[Ge.menuItemFocus]:this.activeMenu==="source"&&t===(r?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},o=r?t+1:t;return G("li",{"aria-checked":(t===i).toString(),bind:this,class:this.classes(Si.source,Ge.menuItem,n),"data-source-index":t,id:this._buildId("source-item",o),key:`esri-search__source-${t}`,onclick:this._handleSourceClick,role:"menuitemradio"},this._getSourceName(t))}_renderNoResultsWarning(t){const{messages:i}=this,r=t?Rn(i.noResultsFoundForValue,{value:`"${t}"`}):i.noResultsFound;return G("div",{key:"esri-search__no_results"},G("div",{class:Si.warningMenuHeader},i.noResults),G("div",{class:Si.warningMenuText},r))}_renderEmptySearchWarning(){const{messages:t}=this;return G("div",{key:"esri-search__empty-search"},G("span",{"aria-hidden":"true",class:is.noticeTriangle}),G("span",{class:Si.noValueText},t.emptyValue))}_renderLocateWarning(){const{messages:t}=this;return G("div",{key:"esri-search__locate-error"},G("span",{"aria-hidden":"true",class:is.noticeTriangle}),G("span",{class:Si.noValueText},t.locateError))}_renderWarning(){var n;const{displayedSearchTerm:t,_locateFailed:i}=this,{viewModel:r}=this;return i?this._renderLocateWarning():(n=r.selectedSuggestion)!=null&&n.location||t?this._renderNoResultsWarning(t):this._renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(t,i){return`${this.id}-${t}${i===void 0?"":`-${i}`}`}_watchSourceChanges(){const{viewModel:{allSources:t}}=this,i="sources";this.removeHandles(i),t.forEach(r=>this.addHandles(me(()=>r.name,()=>this.scheduleRender()),i))}_handleSourcesMenuToggleFocus(){this.activeMenu!=="source"&&this._clearActiveMenu()}_handleSourcesMenuToggleClick(){var i;const t=this.activeMenu==="source";this.activeMenu=t?"none":"source",this.renderNow(),this.activeMenu==="source"&&((i=this._sourceListNode)==null||i.focus())}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(t){const i=UJ(t.currentTarget);i&&(this._focus(),this.search(i))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const t=new AbortController,{signal:i}=t;this._searchController=t,(async()=>{try{const r=await this.viewModel.searchNearby({signal:i});this.activeMenu=r!=null&&r.numResults?"none":"warning"}catch{this._locateFailed=!0,this.activeMenu="warning"}finally{this._searchController=null}})()}_handleSourceClick(t){this._setSourceFromMenuItem(t.currentTarget)}_setSourceFromMenuItem(t){var r;if(!t)return;const i=Pqe(t);i!=null&&(this.viewModel.activeSourceIndex=i,this._clearActiveMenu(),(r=this._sourceMenuButtonNode)==null||r.focus())}_cancelSuggest(){this._suggestController=Ec(this._suggestController)}_cancelSearch(){this._searchController=Ec(this._searchController),this._locateFailed=!1}_handleInputKeyup(t){var o;const{key:i}=t;if(t.ctrlKey||t.metaKey||i==="Copy"||i==="ArrowLeft"||i==="ArrowRight"||i==="Shift")return;if(i==="Tab"||i==="Escape"||t.shiftKey&&i==="Tab")return this._cancelSuggest(),void(i==="Escape"&&this._clearActiveMenu());const r=i==="Home"||i==="End"||i==="ArrowUp"||i==="ArrowDown";if(i==="Enter"&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const n=(o=this._suggestionListNode)==null?void 0:o.getElementsByTagName("li");if(n!=null&&n.length){if(this.activeMenu!=="suggestion"&&this._openSuggestionMenu(),r)return t.preventDefault(),this._cancelSuggest(),void this._handleItemNavigation(i,n,this._suggestionListNode);const u=n[this._activeMenuItemIndex];if(i==="Enter"&&u){const f=UJ(u);return void(f?(this._focus(),this.search(f)):Nqe(u)&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}_handleItemNavigation(t,i,r){const n=this._activeMenuItemIndex;t==="Home"&&(this._activeMenuItemIndex=0),t==="End"&&(this._activeMenuItemIndex=i.length-1),t==="ArrowUp"&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?i.length-1:this._activeMenuItemIndex-1),t==="ArrowDown"&&(this._activeMenuItemIndex=this._activeMenuItemIndex===i.length-1?0:this._activeMenuItemIndex+1),n!==this._activeMenuItemIndex&&r&&Fqe(i[this._activeMenuItemIndex],r)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_openSuggestionMenu(){this.activeMenu="suggestion"}_handleInputPaste(t){const i=t.target;this.viewModel.searchTerm!==i.value&&(this.viewModel.searchTerm=i.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(t){var r;const{key:i}=t;if(Zne(i)){t.preventDefault();const n=(r=this._sourceListNode)==null?void 0:r.getElementsByTagName("li"),o=n==null?void 0:n[this._activeMenuItemIndex];this._setSourceFromMenuItem(o)}else i!=="ArrowUp"&&i!=="ArrowDown"&&i!=="End"&&i!=="Home"||t.preventDefault()}_handleSourceMenuKeyup(t){var o,u,f;const{key:i}=t,r=i==="ArrowUp"||i==="ArrowDown"||i==="End"||i==="Home";if(r&&t.preventDefault(),i==="Escape")return this._clearActiveMenu(),void((o=this._sourceMenuButtonNode)==null?void 0:o.focus());const n=(u=this._sourceListNode)==null?void 0:u.getElementsByTagName("li");return n&&n.length!==0&&r?(this.activeMenu!=="source"&&(this.activeMenu="source"),void this._handleItemNavigation(i,n,(f=this._sourceListNode)==null?void 0:f.parentElement)):void 0}_focus(t){this.focus(),t&&(this.activeMenu=t)}_formSubmit(t){t.preventDefault(),this._activeMenuItemIndex===-1&&this.search()}_getSourceName(t){const{messages:i}=this,r=this.viewModel,{allSources:n}=r,o=n.at(t);return t===Gg.ALL_INDEX?i.all:o&&o.name||i.untitledSource}_getSuggestResultHTML(t,i){return t?Oqe.test(t)?t:Rqe(t,i):this.messages.untitledResult}};function UJ(e){return e==null?void 0:e["data-suggestion"]}function Pqe(e){return e==null?void 0:e["data-source-index"]}function Nqe(e){return!!(e!=null&&e["data-current-location-item"])}function Fqe(e,t){const i=e.getBoundingClientRect(),r=t.getBoundingClientRect(),n=i.top+i.height,o=r.top+r.height,u=i.top,f=r.top;(n>o||u<f)&&e.scrollIntoView({block:"end"})}m([w()],Lt.prototype,"_activeMenuItemIndex",void 0),m([w()],Lt.prototype,"displayedSearchTerm",null),m([w({readOnly:!0})],Lt.prototype,"inputId",null),m([w({readOnly:!0})],Lt.prototype,"suggestionsMenuId",null),m([w({readOnly:!0})],Lt.prototype,"sourceMenuId",null),m([w({readOnly:!0})],Lt.prototype,"sourceMenuButtonId",null),m([w()],Lt.prototype,"activeMenu",void 0),m([w({readOnly:!0})],Lt.prototype,"activeSource",null),m([w()],Lt.prototype,"activeSourceIndex",null),m([w()],Lt.prototype,"allPlaceholder",null),m([w({readOnly:!0})],Lt.prototype,"allSources",null),m([w()],Lt.prototype,"autoNavigate",null),m([w()],Lt.prototype,"autoSelect",null),m([w({readOnly:!0})],Lt.prototype,"defaultSources",null),m([w()],Lt.prototype,"disabled",void 0),m([w()],Lt.prototype,"goToOverride",null),m([w()],Lt.prototype,"icon",null),m([w()],Lt.prototype,"includeDefaultSources",null),m([w()],Lt.prototype,"label",null),m([w()],Lt.prototype,"locationEnabled",null),m([w()],Lt.prototype,"maxResults",null),m([w()],Lt.prototype,"maxSuggestions",null),m([w(),Xt("esri/widgets/Search/t9n/Search")],Lt.prototype,"messages",void 0),m([w(),Xt("esri/t9n/common")],Lt.prototype,"messagesCommon",void 0),m([w()],Lt.prototype,"minSuggestCharacters",null),m([w()],Lt.prototype,"popupEnabled",null),m([w()],Lt.prototype,"popupTemplate",null),m([w()],Lt.prototype,"portal",null),m([w()],Lt.prototype,"resultGraphic",null),m([w()],Lt.prototype,"resultGraphicEnabled",null),m([w({readOnly:!0})],Lt.prototype,"results",null),m([w()],Lt.prototype,"searchAllEnabled",null),m([w()],Lt.prototype,"searchTerm",null),m([w({readOnly:!0})],Lt.prototype,"selectedResult",null),m([w()],Lt.prototype,"sources",null),m([w({readOnly:!0})],Lt.prototype,"suggestions",null),m([w()],Lt.prototype,"suggestionsEnabled",null),m([w()],Lt.prototype,"view",null),m([LS(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),w({type:Gg})],Lt.prototype,"viewModel",void 0),Lt=m([H("esri.widgets.Search")],Lt);const Dqe=Lt,jqe=2500,dpe={type:"CIMPictureMarker",primitiveName:"headingOverride",enable:!0,anchorPoint:{x:0,y:-.5},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:36,billboardMode3D:"FaceNearPlane",invertBackfaceTexture:!0,scaleX:1,textureFilter:"Picture",url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAkCAYAAACe0YppAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAYaSURBVHgBvVfNb1VFFD/nzP16xRYJKYREEiJoDLLShQkrSNzoHv8I2QgxwY8FJWHhxoVxISEu2AordWNiQjAxEBeEsKAmhCCwkPDRAn1t33v33jnH37n3Fam0pa8kTjOde+/MnN/5+J0z85jW08yYTpxgfzx0bS+fO0R0YHqyeb9w7YEtLTv+9rSdOH7ciNleJJJX/Do1JQ3AltdlT35fiN6gG8kD8akdmzO+6w/zM7wdw725rUY78DBXtmATA6PZntFgm9Kjm6o/HFJpdi5Xhp+16sDBC+H+gUmZfjIXHKC+35U42ZHZfpe30BZS7okNFnhu8wTRk2ek5LEV2q+N8nEj6yuNVRjHddftrt4ahyJbOxF+Uppi/Rf47NlA05Pp9vkyRNkkD8sqUJHwOGfSpYFQFXhTJryQBaZSeAxbFus+U1K0gJm2oy3QKwuZzqeuSK5kpW6BEsE6+nCsAHDXQWuaOljzU8uP/ToxUW4KcwKg8QzOSdFL6Swm0hurAC7N2qIW7ncwNgYKF4la3/w7RnzrUK29KseXWqmTKXGl45Zrd9CLrsSjr96fcw4kS46mTsJznSTrVBR6VQJQdDbpZTWexxgCYCFz30cquD8oYVQgtUAUzfo8wGtqGoNRFmFZ1KKulJMQu3Vpm/I8Pup3ekvES57GaabXo4lsszEA6zrkhcmAAkBNshi59O9wVsokBLZUCQAxllXVBkyCDRQuTlLLiLSEqw3gfUqU0kVdsKymsnzyPLm8fXZxDxVZgvUhg9QyaKDI7AhpSlRVEaA83JM+/V8pGO0PMTHyZwra9FQVk4i1e0D6dPK9v5agkmXAhc0Bw5MjlAQQE0lSDbUmbBX4kGfsiiQWuSZtdle1S4F73cUKJgviyw4mmmqlVSoR/FAK2d1noWQZ8N79MySw0tgNzhN00jRFaPM6y3IyLWBxXuOdvMfhaIy1MQctmvnEMGrMq2Y/ekC3dHF14I84gmZP2s0pgiJFHVwYhIIrMC1zgT4fQgsS0CG48LWtslAsgeKZK5U1c5Slj+nEvvJZqOWubr5ks8iE3bVqCMQCz4p5aiUqpMrOdHz2qLFTxAMSPLwY8WpmntNwrXIMCWvESGH+7n9hVi6ZJ6/sR5gnycFFQgsCQEEB8T9TbsCGy4PrZrEBjGyIt4EApoGRXWKP6Mt3fnvOvhWBjR4gdjtJEDmGQQkBSCS6Teys5qECABTPWOBwcPWgAPIU+E2+Rq3J8lsrQawMHNPbqAXvRqasWcMB/mK42N3twM6/FsbJTZK2Fru15K7niPVIp6RHn++9vRKErAg8ta+MFq4LBxAJKY1EajpxLj5KUzFzOMTni4btxoUzXPzIIOwLnEPxGVqlyWoTdO/WNRUXJhDmAgNAJVd0eABj8FTCvLbpEnxdOycJlFNXVq6MDvzthwOQ654LaMGGVofQWIWtXhM9xaCQp85QIZFMPXcpuUPH3uquJj6htVonvySD+KY6c2AulPAzHdVaZElvPCGBgvkIRUECr1J4qmV6LdGyJvAnu+94HZMla1Eg1AuGVyQWnNCwzqsUXK5+AIsUyPRc1Rbpi93X1xK9tsXtkj9U7INWSWvU0DaZ6OlVAmUDiqgbrwY2Z3ThRVKFXrgi/R0x9GMplxAyER6ynAtZin1DQoLVznLMU+/mywMf3dlDpbyMlbjLQDhLw/Sh24sm5dhTrlHKgS/T0X2zLw/sLeGr5OlEbg2uHwAFw5reKuKsJj8kcIj0zq9H5PqAj+z6E8y+YRIaUhnAEOrcWgv9m3shQ1H7mz5duVJtDLhZqZcNlrEDwXKwCzncdFg+PJeVf1m3uPUupLR7Hq6tHNyLhw1TCmdGbm0BmaUjr63LzaMBH943D9f+yO5uZ7HfcLktqdwqMU0jtPUDN6vDOfzgKFrXtta6q83vfHU4M5KoURbT4W3zsPIqrgQFO8GozV8ocZGOTN4dRdRowN6CnOLmKkk5t7H1i+HPNGJj2kj7buYajoRXh2+36eOt+2nENrrF3ozODEmFC0D4hjbQNgYc+DSYjd9qqGSJXqL/tZ16/DWdfvw9bbCt41hcpYn9RAEX9Q22fwC74ny5v9iplQAAAABJRU5ErkJggg=="},zqe=new fd({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:14,billboardMode3D:"FaceNearPlane",frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[8.5,0],[7.02,.13],[5.59,.51],[4.25,1.14],[3.04,1.99],[1.99,3.04],[1.14,4.25],[.51,5.59],[.13,7.02],[0,8.5],[.13,9.98],[.51,11.41],[1.14,12.75],[1.99,13.96],[3.04,15.01],[4.25,15.86],[5.59,16.49],[7.02,16.87],[8.5,17],[9.98,16.87],[11.41,16.49],[12.75,15.86],[13.96,15.01],[15.01,13.96],[15.86,12.75],[16.49,11.41],[16.87,9.98],[17,8.5],[16.87,7.02],[16.49,5.59],[15.86,4.25],[15.01,3.04],[13.96,1.99],[12.75,1.14],[11.41,.51],[9.98,.13],[8.5,0]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Round",joinStyle:"Round",lineStyle3D:"Strip",miterLimit:10,width:2,color:[255,255,255,255]},{type:"CIMSolidFill",enable:!0,color:[0,122,194,255]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:16,billboardMode3D:"FaceNearPlane",frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[8.5,0],[7.02,.13],[5.59,.51],[4.25,1.14],[3.04,1.99],[1.99,3.04],[1.14,4.25],[.51,5.59],[.13,7.02],[0,8.5],[.13,9.98],[.51,11.41],[1.14,12.75],[1.99,13.96],[3.04,15.01],[4.25,15.86],[5.59,16.49],[7.02,16.87],[8.5,17],[9.98,16.87],[11.41,16.49],[12.75,15.86],[13.96,15.01],[15.01,13.96],[15.86,12.75],[16.49,11.41],[16.87,9.98],[17,8.5],[16.87,7.02],[16.49,5.59],[15.86,4.25],[15.01,3.04],[13.96,1.99],[12.75,1.14],[11.41,.51],[9.98,.13],[8.5,0]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Round",joinStyle:"Round",lineStyle3D:"Strip",miterLimit:10,width:0,color:[255,255,255,255]},{type:"CIMSolidFill",enable:!0,color:[0,0,0,66]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0,offsetX:0,offsetY:-1},dpe],angleAlignment:"Map"},primitiveOverrides:[{type:"CIMPrimitiveOverride",primitiveName:"headingOverride",propertyName:"Rotation",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Rotation override",expression:"360 - $feature.heading",returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"headingOverride",propertyName:"TintColor",valueExpressionInfo:{type:"CIMExpressionInfo",title:"TintColor override",expression:"IIF(IsEmpty($feature.heading), [255, 255, 255, 0], [255, 255, 255, 1])",returnType:"Default"}}]}});let tc=class extends RT(Us.EventedMixin(De)){constructor(){super(...arguments),this._geolocationUsable=!0,this.geolocationOptions=null,this.goToLocationEnabled=!0,this.graphic=new qi({symbol:zqe}),this.scale=null,this.rotationEnabled=!0,this.view=null}initialize(){kR()||(this._geolocationUsable=!1),this.addHandles([me(()=>{var t;return(t=this.view)==null?void 0:t.type},()=>this._handleViewTypeChange(),Je)])}destroy(){this._clearGraphic(),this.view=null}_clearGraphic(){const{view:t,graphic:i}=this;t&&i&&t.graphics.remove(i)}_addGraphic(){const{view:t,graphic:i}=this;t!=null&&t.graphics&&i&&!t.graphics.includes(i)&&t.graphics.push(i)}_handleViewTypeChange(){var t;dpe.enable=((t=this.view)==null?void 0:t.type)==="2d"}_getScaleWithinConstraints(t,i){if(!i)return t;if(i.type==="2d"){const{effectiveMaxScale:r,effectiveMinScale:n}=i.constraints;return Math.min(n,Math.max(r,t))}return t}_getScale(t){const{scale:i}=this,r=typeof i=="number"?i:jqe;return this._getScaleWithinConstraints(r,t)}_getHeading(t,i){var u;const r=i==null?void 0:i.spatialReference,n=(r==null?void 0:r.isWebMercator)||(r==null?void 0:r.isGeographic),o=(u=t.coords)==null?void 0:u.heading;return!n||typeof o!="number"||isNaN(o)||o<0||o>360?null:o}_addHeading(t){const{heading:i,target:r,view:n}=t;n&&i!==null&&(n.type!=="3d"?n.type==="2d"&&(r.rotation=360-i):r.heading=i)}async _animatePoint(t,i,r,n){const{view:o}=this;if(!this.goToLocationEnabled||!o)return;const u={target:t,scale:i};this.rotationEnabled&&this._addHeading({heading:r,target:u,view:o});const f={signal:n.signal};Li(f),await this.callGoTo({target:u,options:f})}async updatePosition(t,i){try{const r=this.view,n=await hpe({position:t,view:r},{signal:i.signal}),{graphic:o}=this,{timestamp:u,coords:f}=t,{accuracy:g,altitude:b,altitudeAccuracy:E,latitude:I,longitude:M,speed:k}=f,L=this._getHeading(t,r),P={timestamp:u,accuracy:g,altitude:b,altitudeAccuracy:E,heading:L,latitude:I,longitude:M,speed:k};o&&(o.geometry=n,o.attributes=P);const D=this._getScale(r);await this._animatePoint(n,D,L,i)}catch(r){if(!Or(r))throw new ne("geolocation-positioning:invalid-point","Cannot position invalid point",{error:r})}return t}};m([w()],tc.prototype,"_geolocationUsable",void 0),m([w()],tc.prototype,"geolocationOptions",void 0),m([w()],tc.prototype,"goToLocationEnabled",void 0),m([w({type:qi,nonNullable:!0})],tc.prototype,"graphic",void 0),m([w()],tc.prototype,"scale",void 0),m([w()],tc.prototype,"rotationEnabled",void 0),m([w()],tc.prototype,"view",void 0),tc=m([H("esri.widgets.support.GeolocationPositioning")],tc);const Vqe=tc;async function Uqe(){const e=await vS("esri/widgets/Locate/t9n/Locate");return new Af({title:e.currentLocation,fieldInfos:[{fieldName:"timestamp",label:e.timestamp,format:{dateFormat:"short-date-short-time"}},{fieldName:"latitude",label:e.latitude,format:{places:4,digitSeparator:!0}},{fieldName:"longitude",label:e.longitude,format:{places:4,digitSeparator:!0}},{fieldName:"accuracy",label:e.accuracy,format:{places:0,digitSeparator:!0}},{fieldName:"altitude",label:e.altitude,format:{places:0,digitSeparator:!0}},{fieldName:"altitudeAccuracy",label:e.altitudeAccuracy,format:{places:0,digitSeparator:!0}},{fieldName:"heading",label:e.heading,format:{places:0,digitSeparator:!0}},{fieldName:"speed",label:e.speed,format:{places:0,digitSeparator:!0}}],actions:[lR.clone()],content:[{type:"fields"}]})}let Eh=class extends Vqe{constructor(t){super(t),this._locateController=null,this.error=void 0,this.popupEnabled=!0,this.locate=this.locate.bind(this)}initialize(){this.addHandles([fS(()=>{var n;const{graphic:t,view:i}=this;if(!t)return;((n=i==null?void 0:i.graphics)==null?void 0:n.includes(t))&&this._updatePopupTemplate(t)})])}destroy(){this.cancelLocate()}get state(){var t;return this._geolocationUsable?(t=this.view)!=null&&t.ready?this._locateController?"locating":this.error!=null?"error":"ready":"disabled":"feature-unsupported"}async locate(){if(this.cancelLocate(),this.state==="disabled")throw new ne("locate:disabled-state","Cannot locate when disabled.");if(this.state==="feature-unsupported")throw new ne("locate:feature-unsupported-state","Cannot locate in unsecure domain.");const t=new AbortController;this._locateController=t,this.error=void 0;try{const i=await cpe(this.geolocationOptions);if(await this.updatePosition(i,t),this._locateController!==t)return null;const{graphic:r}=this;return r&&await this._updatePopupTemplate(r),this._addGraphic(),this.emit("locate",{position:i}),this._locateController=null,i}catch(i){if(Or(i))return null;throw t===this._locateController&&(this._locateController=null),this.error=i,this.emit("locate-error",{error:i}),i}}cancelLocate(){this._clearGraphic(),this._locateController&&this._locateController.abort(),this._locateController=null}async _updatePopupTemplate(t){if(!this.popupEnabled)return;const i=await Uqe(),r=t!==this.graphic;this.destroyed||r||(t.popupTemplate=i)}};m([w()],Eh.prototype,"_locateController",void 0),m([w()],Eh.prototype,"error",void 0),m([w()],Eh.prototype,"popupEnabled",void 0),m([w({readOnly:!0})],Eh.prototype,"state",null),m([w()],Eh.prototype,"locate",null),m([w()],Eh.prototype,"cancelLocate",null),Eh=m([H("esri.widgets.Locate.LocateViewModel")],Eh);const rj=Eh,Gqe={base:"esri-locate"};let $s=class extends bi{constructor(t,i){super(t,i),this.messages=null,this.messagesCommon=null,this.viewModel=new rj,this._locate=()=>{const{viewModel:r}=this;r.state==="locating"?r.cancelLocate():r.locate().catch(()=>{})}}loadDependencies(){return cs({button:()=>ce(()=>import("./calcite-button-DicafOzy.js"),__vite__mapDeps([204,205]),import.meta.url),loader:()=>ce(()=>import("./calcite-loader-BYXdEs7m.js"),__vite__mapDeps([232,205]),import.meta.url),tooltip:()=>ce(()=>import("./calcite-tooltip-D9jVgGfo.js"),__vite__mapDeps([241,242,240,243]),import.meta.url)})}get geolocationOptions(){return this.viewModel.geolocationOptions}set geolocationOptions(t){this.viewModel.geolocationOptions=t}get goToLocationEnabled(){return this.viewModel.goToLocationEnabled}set goToLocationEnabled(t){this.viewModel.goToLocationEnabled=t}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get icon(){return"gps-off"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get popupEnabled(){return this.viewModel.popupEnabled}set popupEnabled(t){this.viewModel.popupEnabled=t}get rotationEnabled(){return bc(Se.getLogger(this),"rotationEnabled",{replacement:"use Track widget",version:"4.29",warnOnce:!0}),this.viewModel.rotationEnabled}set rotationEnabled(t){bc(Se.getLogger(this),"rotationEnabled",{replacement:"use Track widget",version:"4.29",warnOnce:!0}),this.viewModel.rotationEnabled=t}get scale(){return this.viewModel.scale}set scale(t){this.viewModel.scale=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}cancelLocate(){this.viewModel.cancelLocate()}locate(){return this.viewModel.locate()}render(){var g;const{viewModel:t,icon:i}=this,{state:r}=t,n=r==="locating",o=n?this.messagesCommon.cancel:this.messages.title,u=r==="feature-unsupported",f=this._localizeError((g=this.viewModel)==null?void 0:g.error);return G("div",{class:this.classes(Gqe.base,Ge.widget)},!u&&G("calcite-button",{class:Ge.widgetButton,disabled:r==="disabled",iconStart:n?void 0:i,kind:"neutral",label:o,onclick:this._locate,title:o},n?G("calcite-loader",{inline:!0,label:""}):null),f?G("calcite-tooltip",{open:!0,overlayPositioning:"fixed",referenceElement:this.container},f):null)}_localizeError(t){var i,r,n;return t instanceof GeolocationPositionError?t.code===GeolocationPositionError.PERMISSION_DENIED?(i=this.messages)==null?void 0:i.permissionError:t.code===GeolocationPositionError.TIMEOUT?(r=this.messages)==null?void 0:r.timeoutError:(n=this.messages)==null?void 0:n.positionUnavailable:t instanceof Error?t.message:void 0}};m([w()],$s.prototype,"geolocationOptions",null),m([w()],$s.prototype,"goToLocationEnabled",null),m([w()],$s.prototype,"goToOverride",null),m([w()],$s.prototype,"graphic",null),m([w()],$s.prototype,"icon",null),m([w()],$s.prototype,"label",null),m([w(),Xt("esri/widgets/Locate/t9n/Locate")],$s.prototype,"messages",void 0),m([w(),Xt("esri/t9n/common")],$s.prototype,"messagesCommon",void 0),m([w()],$s.prototype,"popupEnabled",null),m([w()],$s.prototype,"rotationEnabled",null),m([w()],$s.prototype,"scale",null),m([w()],$s.prototype,"view",null),m([w({type:rj}),LS(["locate","locate-error"])],$s.prototype,"viewModel",void 0),$s=m([H("esri.widgets.Locate")],$s);const Bqe=$s;let Va=class extends De{constructor(t){super(t),this._basemapCache={},this._loadingProjectionEngine=!1,this.nextBasemap=R9("hybrid",this._basemapCache),this.view=null}initialize(){me(()=>this.nextBasemap,t=>{t&&!t.loaded&&t.load().catch(()=>{})},Je)}destroy(){this.view=null,kse(this._basemapCache),this._basemapCache=null}get _nextBasemapSpatialReferenceTask(){return DIe(this.view,this.nextBasemap)}get _viewSpatialReferenceLocked(){const{view:t}=this;return!t||!("spatialReferenceLocked"in t)||t.spatialReferenceLocked}get activeBasemap(){var t,i;return R9(((i=(t=this.view)==null?void 0:t.map)==null?void 0:i.basemap)??"topo-vector",this._basemapCache)}castNextBasemap(t){return R9(t,this._basemapCache)}get state(){const{view:t}=this;if(!(t!=null&&t.ready)||this._nextBasemapSpatialReferenceTask.updating)return"disabled";const{spatialReference:i}=this._nextBasemapSpatialReferenceTask;return this._viewSpatialReferenceLocked&&i!=null&&!t.spatialReference.equals(i)?"incompatible-next-basemap":this._loadingProjectionEngine?"loading":"ready"}async toggle(){const{activeBasemap:t,nextBasemap:i,state:r,view:n}=this;if(!n||r==="disabled"||r==="incompatible-next-basemap")return;const o=this._viewSpatialReferenceLocked;if(!o){if(await cl(()=>!this._nextBasemapSpatialReferenceTask.updating),i!==this.nextBasemap||t!==this.activeBasemap)return;const{spatialReference:u}=this._nextBasemapSpatialReferenceTask;if(u==null||pr(n.spatialReference,u)||Dc()||Sa(n.spatialReference,u)||(this._loadingProjectionEngine=!0,await Oc(),this._loadingProjectionEngine=!1),i!==this.nextBasemap||t!==this.activeBasemap)return}n.map.basemap=i,o||this._nextBasemapSpatialReferenceTask.spatialReference==null||pr(n.spatialReference,this._nextBasemapSpatialReferenceTask.spatialReference)||(n.spatialReference=this._nextBasemapSpatialReferenceTask.spatialReference),this.nextBasemap=t}static getThumbnailUrl(t){return Rse(t)}};m([w()],Va.prototype,"_loadingProjectionEngine",void 0),m([w({readOnly:!0})],Va.prototype,"_nextBasemapSpatialReferenceTask",null),m([w({readOnly:!0})],Va.prototype,"_viewSpatialReferenceLocked",null),m([w({readOnly:!0})],Va.prototype,"activeBasemap",null),m([w()],Va.prototype,"nextBasemap",void 0),m([St("nextBasemap")],Va.prototype,"castNextBasemap",null),m([w({readOnly:!0})],Va.prototype,"state",null),m([w()],Va.prototype,"view",void 0),m([w()],Va.prototype,"toggle",null),Va=m([H("esri.widgets.BasemapToggle.BasemapToggleViewModel")],Va);const ppe=Va,Kf="esri-basemap-toggle",kw="esri-basemap-thumbnail",Lu={base:Kf,secondaryBasemapImage:`${Kf}__image--secondary`,container:`${kw} ${Kf}__container`,image:`${kw}__image ${Kf}__image`,imageLoading:`${Kf}__image--loading`,overlay:`${kw}__overlay ${Kf}__image-overlay`,title:`${kw}__title ${Kf}__title`,overlayScrim:`${kw}__overlay-scrim`};function GJ(e){const t=Rse(e);return t?{backgroundImage:"url("+t+")"}:{backgroundImage:""}}const BJ={title:!1};let Ua=class extends bi{constructor(t,i){super(t,i),this.messages=null,this.viewModel=new ppe,this.visibleElements={...BJ},this.toggle=()=>this.viewModel.toggle()}loadDependencies(){return cs({button:()=>ce(()=>import("./calcite-button-DicafOzy.js"),__vite__mapDeps([204,205]),import.meta.url),icon:()=>ce(()=>import("./calcite-icon-_vDov-sg.js"),[],import.meta.url),scrim:()=>ce(()=>import("./calcite-scrim-BD0qYNLH.js"),__vite__mapDeps([260,236,205]),import.meta.url)})}get activeBasemap(){return this.viewModel.activeBasemap}get icon(){return"layer-basemap"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get nextBasemap(){return this.viewModel.nextBasemap}set nextBasemap(t){this.viewModel.nextBasemap=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}castVisibleElements(t){return{...BJ,...t}}render(){const t=this.viewModel,i=t.state==="disabled"?null:t.activeBasemap,r=t.state==="disabled"?null:t.nextBasemap,n=t.state==="loading",o=t.state==="incompatible-next-basemap",u=(r==null?void 0:r.title)??"",f=r&&r.loadStatus!=="loaded";let g;const b=this.visibleElements.title&&u,E=o;return(b||E)&&(g=G("div",{class:Lu.overlay,key:"overlay"},b?G("span",{class:Lu.title,title:u},u):null,E?G("calcite-scrim",{class:Lu.overlayScrim,title:this.messages.incompatibleSpatialReference},G("calcite-icon",{icon:"exclamation-mark-triangle"})):null)),G("div",{class:this.classes(Lu.base,Ge.widget)},G("calcite-button",{appearance:"transparent","data-basemap-id":r?r.id:"",disabled:o,kind:"neutral",label:this.label,onclick:()=>{this.toggle()},title:this.label},G("div",{class:this.classes(Lu.container,Lu.secondaryBasemapImage)},G("div",{class:Lu.image,styles:GJ(i)})),G("div",{class:Lu.container},G("div",{class:this.classes(Lu.image,f?Lu.imageLoading:null),styles:GJ(r)},f||n?G("calcite-scrim",null,G("span",{"aria-hidden":"true",class:Ge.loaderAnimation,role:"presentation"})):null),g)))}};m([w({readOnly:!0})],Ua.prototype,"activeBasemap",null),m([w()],Ua.prototype,"icon",null),m([w()],Ua.prototype,"label",null),m([w(),Xt("esri/widgets/BasemapToggle/t9n/BasemapToggle")],Ua.prototype,"messages",void 0),m([w()],Ua.prototype,"nextBasemap",null),m([w()],Ua.prototype,"view",null),m([w({type:ppe})],Ua.prototype,"viewModel",void 0),m([w()],Ua.prototype,"visibleElements",void 0),m([St("visibleElements")],Ua.prototype,"castVisibleElements",null),Ua=m([H("esri.widgets.BasemapToggle")],Ua);const qqe=Ua;let pp=class extends De{constructor(t){super(t),this._viewpointHandle=null,this.group=null}initialize(){this.addHandles(Lr(()=>{var t;return(t=this.view)==null?void 0:t.ui},"expand",t=>{const{target:i}=t;i&&i!==this&&i.expanded&&i.group&&i.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null}set autoCollapse(t){this._set("autoCollapse",t),this._watchViewpoint()}set expanded(t){var n;const i=!!t;this._set("expanded",i);const r=(n=this.view)==null?void 0:n.ui;r&&r.emit("expand",{target:this}),this._viewpointHandleChange(i)}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}set view(t){this._get("view")!==t&&(this._set("view",t),t&&rn(()=>t.ready,()=>{this.view===t&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(t){this._viewpointHandle&&(t?rn(()=>{var i;return(i=this.view)==null?void 0:i.stationary},()=>{var i;return(i=this._viewpointHandle)==null?void 0:i.resume()},{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const t="viewpoint";this.removeHandles(t),this._viewpointHandle=null;const{autoCollapse:i,view:r}=this;if(!r||!i)return;const n=v_e(()=>r.type==="3d"?r.camera:r.viewpoint,()=>this._collapse());this.addHandles(n,t),this._viewpointHandle=n}_collapse(){this.expanded=!1}};m([w({value:!1})],pp.prototype,"autoCollapse",null),m([w({value:!1})],pp.prototype,"expanded",null),m([w()],pp.prototype,"group",void 0),m([w({readOnly:!0})],pp.prototype,"state",null),m([w({value:null})],pp.prototype,"view",null),pp=m([H("esri.widgets.Expand.ExpandViewModel")],pp);const fpe=pp,Ca="esri-expand",Wo={base:Ca,toggle:`${Ca}__toggle`,popoverContent:`${Ca}__popover-content`,panel:`${Ca}__panel`,panelContent:`${Ca}__panel-content`,sheet:`${Ca}__sheet`,panelIconNumber:`${Ca}__panel-icon-number`,contentContainer:`${Ca}__content-container`,icon:"esri-collapse__icon",iconFlip:"esri-collapse__icon-flip",iconExpanded:`${Ca}__icon--expanded`,iconNumber:`${Ca}__icon-number`,content:`${Ca}__content`,contentExpanded:`${Ca}__content--expanded`},qJ="chevrons-left",HJ="chevrons-right";let ar=class extends bi{constructor(t,i){super(t,i),this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expandTooltip="",this.iconNumber=0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.placement=null,this.viewModel=new fpe,this.toggle=()=>{this.viewModel.expanded=!this.viewModel.expanded},this._handlePopoverClose=r=>{r.target===this._popoverEl&&(this.viewModel.expanded=r.target.open)},this._handleSheetClose=r=>{this.viewModel.expanded=r.target.open},this._handlePanelClose=r=>{this.viewModel.expanded=!r.target.closed},this._handleKeyDown=r=>{this.viewModel.expanded&&r.key==="Escape"&&!this._willCloseOnEsc(r)&&r.preventDefault()},this._storeToggleActionEl=r=>{this._toggleActionEl=r},this._storePopoverEl=r=>{this._popoverEl=r}}loadDependencies(){return cs({action:()=>ce(()=>import("./calcite-action-e0C_v5mP.js"),__vite__mapDeps([244,238,205]),import.meta.url),icon:()=>ce(()=>import("./calcite-icon-_vDov-sg.js"),[],import.meta.url),panel:()=>ce(()=>import("./calcite-panel-CrVqPt0j.js"),__vite__mapDeps([261,252,247,238,205,248,242,249,240,243,236]),import.meta.url),popover:()=>ce(()=>import("./calcite-popover-TtlNlgf_.js"),__vite__mapDeps([262,248,242,249,240,243,238,205]),import.meta.url),sheet:()=>ce(()=>import("./calcite-sheet-DOKqFMeX.js"),__vite__mapDeps([263,249,240,205,236]),import.meta.url)})}get expandTitle(){const{expanded:t,messagesCommon:i,collapseTooltip:r,expandTooltip:n}=this;return(t?r||(i==null?void 0:i.collapse):n||(i==null?void 0:i.expand))??""}get _displaySheet(){var t;switch(this.mode){case"drawer":return!0;case"auto":return((t=this.viewModel.view)==null?void 0:t.widthBreakpoint)==="xsmall";default:return!1}}get autoCollapse(){return this.viewModel.autoCollapse}set autoCollapse(t){this.viewModel.autoCollapse=t}get collapseIcon(){return HJ}set collapseIcon(t){this._overrideIfSome("collapseIcon",t)}get expanded(){return this.viewModel.expanded}set expanded(t){this.viewModel.expanded=t}get expandIcon(){return ky(this.content)?this.content.icon:qJ}set expandIcon(t){this._overrideIfSome("expandIcon",t)}get group(){return this.viewModel.group}set group(t){this.viewModel.group=t}get icon(){return null}get label(){var t;return(ky(this.content)?this.content.label:null)??((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}render(){const{_displaySheet:t,_toggleActionEl:i,viewModel:{expanded:r},label:n,placement:o}=this;return G("div",{class:this.classes(Wo.base,Ge.widget)},this._renderToggle(),t?G("calcite-sheet",{class:Wo.sheet,heightScale:"l",label:n,onkeydown:this._handleKeyDown,open:r,position:"block-end",onCalciteSheetClose:this._handleSheetClose},G("calcite-panel",{class:Wo.panel,closable:!0,closed:!r,heading:n,onkeydown:this._handleKeyDown,onCalcitePanelClose:this._handlePanelClose},G("div",{class:Wo.panelContent},this._renderContent()))):i?G("calcite-popover",{afterCreate:this._storePopoverEl,afterUpdate:this._storePopoverEl,label:n,onkeydown:this._handleKeyDown,open:r,overlayPositioning:"fixed",placement:o??this._getPlacement(),referenceElement:i,onCalcitePopoverClose:this._handlePopoverClose},G("div",{class:Wo.popoverContent},this._renderContent())):null)}_getPlacement(){const{container:t,view:i}=this,r=t&&i?i.ui.getPosition(t):null;if(!r||r==="manual")return"auto";const[n,o]=r.split("-");return`${o==="right"?"left":"right"}-${n==="bottom"?"end":"start"}`}_willCloseOnEsc(t){const{closeOnEsc:i}=this;return typeof i=="function"?i(t):i}_renderBadgeNumber(){const{expanded:t,iconNumber:i}=this;return i&&!t?G("span",{class:Wo.iconNumber,key:"expand__icon-number"},i):null}_renderToggleButton(){const{expanded:t,expandTitle:i,expandIcon:r,collapseIcon:n}=this,o=t?n:r,u=o===qJ||o===HJ;return G("calcite-action",{afterCreate:this._storeToggleActionEl,afterUpdate:this._storeToggleActionEl,class:Ge.widgetButton,onclick:this.toggle,scale:"s",text:i,title:i},o?G("calcite-icon",{class:this.classes(Wo.icon,u&&Wo.iconFlip),icon:o,scale:"s"}):null)}_renderToggle(){return G("div",{class:Wo.toggle},this._renderToggleButton(),this._renderBadgeNumber())}_renderContent(){const{content:t}=this;return typeof t=="string"?G("div",{class:Wo.contentContainer,innerHTML:t,key:"content__string"}):ky(t)?G("div",{class:Wo.contentContainer,key:"content__widget"},t.render()):t instanceof HTMLElement?G("div",{afterCreate:this._attachToNode,bind:t,class:Wo.contentContainer,key:"content__html-element"}):Pue(t)?G("div",{afterCreate:this._attachToNode,bind:t.domNode,class:Wo.contentContainer,key:"content__node"}):null}_attachToNode(t){const i=this;t.appendChild(i)}};m([w({readOnly:!0})],ar.prototype,"expandTitle",null),m([w()],ar.prototype,"_toggleActionEl",void 0),m([w()],ar.prototype,"_displaySheet",null),m([w()],ar.prototype,"autoCollapse",null),m([w()],ar.prototype,"closeOnEsc",void 0),m([w()],ar.prototype,"collapseIcon",null),m([w()],ar.prototype,"collapseTooltip",void 0),m([w()],ar.prototype,"content",void 0),m([w()],ar.prototype,"expanded",null),m([w()],ar.prototype,"expandIcon",null),m([w()],ar.prototype,"expandTooltip",void 0),m([w()],ar.prototype,"group",null),m([w()],ar.prototype,"icon",null),m([w()],ar.prototype,"iconNumber",void 0),m([w()],ar.prototype,"label",null),m([w(),Xt("esri/widgets/Expand/t9n/Expand")],ar.prototype,"messages",void 0),m([w(),Xt("esri/t9n/common")],ar.prototype,"messagesCommon",void 0),m([w()],ar.prototype,"mode",void 0),m([w()],ar.prototype,"placement",void 0),m([w()],ar.prototype,"view",null),m([w({type:fpe})],ar.prototype,"viewModel",void 0),ar=m([H("esri.widgets.Expand")],ar);const WJ=ar;function ZJ(e,t){const i=e.featureReduction;return i&&i.type!=="selection"&&(!("maxScale"in i)||!i.maxScale||i.maxScale<t.scale)?i:null}const V_=-1;let Zl=class extends De{constructor(t){super(t),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=we("mapview-transitions-duration"),this.effects=[]}set effect(t){if(this._get("effect")!==(t=t||"")){this._set("effect",t);try{this._transitionTo(JJ(t))}catch(i){this._transitionTo([]),Se.getLogger(this).warn("Invalid Effect",{effect:t,error:i})}}}get final(){return this._final}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(t){this._updateForScale(t)}get transitioning(){return this._to!==null}canTransitionTo(t){try{return this.scale>0&&KJ(this._current,JJ(t),this.scale)}catch{return!1}}transitionStep(t,i){this._applyTimeTransition(t),this._updateForScale(i)}endTransition(){this._applyTimeTransition(this.duration)}_transitionTo(t){this.scale>0&&KJ(this._current,t,this.scale)?(this._final=t,this._to=he(t),Hqe(this._current,this._to,this.scale),this._from=he(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=t),this._set("effects",this._current[0]?he(this._current[0].effects):[])}_applyTimeTransition(t){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=t;const i=Math.min(1,this._time/this.duration);for(let r=0;r<this._current.length;r++){const n=this._current[r],o=this._from[r],u=this._to[r];n.scale=Wqe(o.scale,u.scale,i);for(let f=0;f<n.effects.length;f++){const g=n.effects[f],b=o.effects[f],E=u.effects[f];g.interpolate(b,E,i)}}i===1&&(this._current=this._final,this._set("effects",this._current[0]?he(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(t){if(this._set("scale",t),this._current.length===0)return;const i=this._current,r=this._current.length-1;let n,o,u=1;if(i.length===1||t>=i[0].scale)o=n=i[0].effects;else if(t<=i[r].scale)o=n=i[r].effects;else for(let f=0;f<r;f++){const g=i[f],b=i[f+1];if(g.scale>=t&&b.scale<=t){u=(t-g.scale)/(b.scale-g.scale),n=g.effects,o=b.effects;break}}for(let f=0;f<this.effects.length;f++)this.effects[f].interpolate(n[f],o[f],u)}};function JJ(e){const t=lD(e)||[];return Zqe(t)?[{scale:V_,effects:t}]:t}function KJ(e,t,i){var r,n,o,u;return!((r=e[0])!=null&&r.effects)||!((n=t[0])!=null&&n.effects)?!0:!((((o=e[0])==null?void 0:o.scale)===V_||((u=t[0])==null?void 0:u.scale)===V_)&&(e.length>1||t.length>1)&&i<=0)&&Cse(e[0].effects,t[0].effects)}function Hqe(e,t,i){const r=e.length>t.length?e:t,n=e.length>t.length?t:e,o=n[n.length-1],u=(o==null?void 0:o.scale)??i,f=(o==null?void 0:o.effects)??[];for(let g=n.length;g<r.length;g++)n.push({scale:u,effects:[...f]});for(let g=0;g<r.length;g++)n[g].scale=n[g].scale===V_?i:n[g].scale,r[g].scale=r[g].scale===V_?i:r[g].scale,Ase(n[g].effects,r[g].effects)}function Wqe(e,t,i){return e+(t-e)*i}function Zqe(e){const t=e[0];return!!t&&"type"in t}m([w()],Zl.prototype,"_to",void 0),m([w()],Zl.prototype,"duration",void 0),m([w({value:""})],Zl.prototype,"effect",null),m([w({readOnly:!0})],Zl.prototype,"effects",void 0),m([w({readOnly:!0})],Zl.prototype,"final",null),m([w({readOnly:!0})],Zl.prototype,"hasEffects",null),m([w({value:0})],Zl.prototype,"scale",null),m([w({readOnly:!0})],Zl.prototype,"transitioning",null),Zl=m([H("esri.layers.effects.EffectView")],Zl);function Qdt(e){var i;const t=e.layer;return"floorInfo"in t&&((i=t.floorInfo)!=null&&i.floorField)&&"floors"in e.view?ype(e.view.floors,t.floorInfo.floorField):null}function YJ(e,t){var i;return"floorInfo"in t&&((i=t.floorInfo)!=null&&i.floorField)?ype(e,t.floorInfo.floorField):null}function ype(e,t){if(!(e!=null&&e.length))return null;const i=e.filter(r=>r!=="").map(r=>`'${r}'`);return i.push("''"),`${t} IN (${i.join(",")}) OR ${t} IS NULL`}function ept(e,t,i){return t.flatten(({sublayers:n})=>n).length!==e.length?!0:!!e.some(n=>n.originIdOf("minScale")>i||n.originIdOf("maxScale")>i||n.originIdOf("renderer")>i||n.originIdOf("labelingInfo")>i||n.originIdOf("opacity")>i||n.originIdOf("labelsVisible")>i||n.originIdOf("source")>i)||!mpe(e,t)}function Jqe(e,t,i){return!!e.some(r=>{const n=r.source,o=!n||n.type==="map-layer"&&n.mapLayerId===r.id&&(n.gdbVersion==null||n.gdbVersion===i);return r.commitProperty("renderer"),r.commitProperty("labelingInfo"),r.commitProperty("opacity"),r.commitProperty("labelsVisible"),!o||r.originIdOf("renderer")>yt.SERVICE||r.originIdOf("labelingInfo")>yt.SERVICE||r.originIdOf("opacity")>yt.SERVICE||r.originIdOf("labelsVisible")>yt.SERVICE})||!mpe(e,t)}function mpe(e,t){if(!(e!=null&&e.length)||t==null)return!0;const i=t.slice().reverse().flatten(({sublayers:o})=>o&&o.toArray().reverse()).map(o=>o.id).toArray();if(e.length>i.length)return!1;let r=0;const n=i.length;for(const{id:o}of e){for(;r<n&&i[r]!==o;)r++;if(r>=n)return!1}return!0}function tpt(e){return!!e&&e.some(t=>{var i;return t.minScale!=null||((i=t.layerDefinition)==null?void 0:i.minScale)!=null})}const Kqe={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let Ga=class extends De{constructor(t){super(t),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const t=this.visibleSublayers.map(i=>{const r=YJ(this.floors,i);return i.toExportImageJSON(r)});return t.length?JSON.stringify(t):null}get hasDynamicLayers(){return this.layer&&Jqe(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(t){this._get("layer")!==t&&(this._set("layer",t),this.removeHandles("layer"),t&&this.addHandles([t.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),t.on("sublayer-update",i=>this.notifyChange(Kqe[i.propertyName]))],"layer"))}get layers(){const t=this.visibleSublayers;return t?t.length?"show:"+t.map(i=>i.id).join(","):"show:-1":null}get layerDefs(){var r;const t=!!((r=this.floors)!=null&&r.length),i=this.visibleSublayers.filter(n=>n.definitionExpression!=null||t&&n.floorInfo!=null);return i.length?JSON.stringify(i.reduce((n,o)=>{const u=YJ(this.floors,o),f=bF(u,o.definitionExpression);return f!=null&&(n[o.id]=f),n},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers");const t=this.layer;return t&&(t.commitProperty("dpi"),t.commitProperty("imageFormat"),t.commitProperty("imageTransparency"),t.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const t=[];if(!this.layer)return t;const i=this.layer.sublayers,r=this.scale,n=u=>{u.visible&&(r===0||xLe(r,u.minScale,u.maxScale))&&(u.sublayers?u.sublayers.forEach(n):t.unshift(u))};i&&i.forEach(n);const o=this._get("visibleSublayers");return!o||o.length!==t.length||o.some((u,f)=>t[f]!==u)?t:o}toJSON(){const t=this.layer;let i={dpi:t.dpi,format:t.imageFormat,transparent:t.imageTransparency,gdbVersion:t.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?i.dynamicLayers=this.dynamicLayers:i={...i,layers:this.layers,layerDefs:this.layerDefs},i}};m([w({readOnly:!0})],Ga.prototype,"dynamicLayers",null),m([w()],Ga.prototype,"floors",void 0),m([w({readOnly:!0})],Ga.prototype,"hasDynamicLayers",null),m([w()],Ga.prototype,"layer",null),m([w({readOnly:!0})],Ga.prototype,"layers",null),m([w({readOnly:!0})],Ga.prototype,"layerDefs",null),m([w({type:Number})],Ga.prototype,"scale",void 0),m([w({readOnly:!0})],Ga.prototype,"version",null),m([w({readOnly:!0})],Ga.prototype,"visibleSublayers",null),Ga=m([H("esri.layers.support.ExportImageParameters")],Ga);const Yqe=9999999e31,Xqe=2e-7,Qqe={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function YI(e){return Qqe[e]??[-34028234663852886e22,34028234663852886e22]}function rpt(e,t){return e==null||t==null?"s32":e<0?e>=-128&&t<128?"s8":e>=-32768&&t<32768?"s16":"s32":t<256?"u8":t<65536?"u16":"u32"}function eHe(e){return((e==null?void 0:e.startsWith("s"))||(e==null?void 0:e.startsWith("u")))??!1}function npt(e,t,i,r){let[n,o]=YI(i);const u=eHe(i);return u&&(n-=1e-5,o+=1e-5),u?i.startsWith("u")?tHe(e,t,r,[n,o]):iHe(e,t,r,[n,o]):rHe(e,t,r,[n,o])}function spt(e,t){for(let i=0;i<t.length;i++)t[i]&&isNaN(e[i])&&(t[i]=0,e[i]=0)}function tHe(e,t,i,r){const[n,o]=r;for(let u=0;u<t.length;u++)if(t[u]){const f=e[u];f<n||f>o?t[u]=0:i[u]=f+.5|0}}function iHe(e,t,i,r){const[n,o]=r;for(let u=0;u<t.length;u++)if(t[u]){const f=e[u];f<n||f>o?t[u]=0:i[u]=f+(f>0?.5:-.5)|0}}function rHe(e,t,i,r){const[n,o]=r;for(let u=0;u<t.length;u++)if(t[u]){const f=e[u];f<n||f>o?t[u]=0:i[u]=f}}function opt(e,t,i){var M,k;if(e.depthCount&&e.depthCount>1)return;const{pixels:r,statistics:n,pixelType:o}=e,u=r[0].length,f=e.bandMasks??[],g=e.mask??new Uint8Array(u).fill(255),b=o==="f32"||o==="f64",E=YI(o);let I=!1;for(let L=0;L<r.length;L++){const P=typeof t=="number"?t:t[L];if(P==null)continue;const D=((M=n==null?void 0:n[L])==null?void 0:M.minValue)??E[0],j=((k=n==null?void 0:n[L])==null?void 0:k.maxValue)??E[1];if(D>P+Number.EPSILON||j<P-Number.EPSILON)continue;const z=f[L]||g.slice(),V=r[L],W=i==null?void 0:i.customFloatTolerance;if(b&&W!==0){let Q=W;Q||(Q=Math.abs(P)>=Yqe?Xqe*Math.abs(P):o==="f32"?2**-23:Number.EPSILON);for(let Z=0;Z<V.length;Z++)z[Z]&&Math.abs(V[Z]-P)<Q&&(V[Z]=0,z[Z]=0,g[Z]=0,I=!0)}else for(let Q=0;Q<V.length;Q++)z[Q]&&V[Q]===P&&(V[Q]=0,z[Q]=0,g[Q]=0,I=!0);f[L]=z}I&&(e.bandMasks=e.bandMasks||e.pixels.length>1?f:null,e.mask=g),I&&"updateStatistics"in e&&e.updateStatistics()}function gpe(e){return e==null||e.type==="simple"||e.type==="unique-value"||e.type==="class-breaks"||e.type==="dictionary"||e.type==="heatmap"}function apt(e,t){if(e==null)return null;if(!gpe(e))return new ne("renderer-conversion-3d:unsupported-renderer",`Unsupported renderer of type '${e.type||e.declaredClass}'`,{renderer:e});switch(e.type){case"simple":return nHe(e,t);case"unique-value":return sHe(e,t);case"class-breaks":return oHe(e,t);case"dictionary":case"heatmap":return null}return null}function nj(e,t){if(!t)return null;let i;if(i=Array.isArray(t)?t:[t],i.length>0){const r=i.map(o=>o.details.symbol.type||o.details.symbol.declaredClass).filter(o=>!!o);r.sort();const n=[];return r.forEach((o,u)=>{u!==0&&o===r[u-1]||n.push(o)}),new ne("renderer-conversion-3d:unsupported-symbols",`Renderer contains symbols (${n.join(", ")}) which are not supported in 3D`,{renderer:e,symbolErrors:i})}return null}function nHe(e,t){const i={...Vh,...t,cimFallbackEnabled:!0};return nj(e,Xv(e.symbol,i).error)}function sHe(e,t){var o;const i={...Vh,...t,cimFallbackEnabled:!0},r=(o=e.uniqueValueInfos)==null?void 0:o.map(u=>Xv(u.symbol,i).error).filter(cr),n=Xv(e.defaultSymbol,i);return n.error&&(r==null||r.unshift(n.error)),nj(e,r)}function oHe(e,t){const i={...Vh,...t,cimFallbackEnabled:!0},r=e.classBreakInfos.map(o=>Xv(o.symbol,i).error).filter(cr),n=Xv(e.defaultSymbol,i);return n.error&&r.unshift(n.error),nj(e,r)}var LR;function aHe(e){switch(e){case"circle":return{rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};case"square":return{rings:[[[.5,.5],[.5,16.5],[16.5,16.5],[16.5,.5],[.5,.5]]]};case"diamond":return{rings:[[[8.5,.5],[.2,8.5],[8.5,16.5],[16.5,8.5],[8.5,.5]]]};case"hexagon-pointy":return{rings:[[[15.86,12.75],[15.86,4.25],[8.5,0],[1.14,4.25],[1.14,12.75],[8.5,17],[15.86,12.75]]]};case"hexagon-flat":return{rings:[[[12.75,15.86],[17,8.5],[12.75,1.14],[4.25,1.14],[0,8.5],[4.25,15.86],[12.75,15.86]]]}}}function sj(e){var t;return(e==null?void 0:e.type)==="CIMVectorMarker"?(t=e.markerGraphics)==null?void 0:t[0]:void 0}function vpe(e){var t,i;return((t=e==null?void 0:e.symbol)==null?void 0:t.type)==="CIMPolygonSymbol"?(i=e.symbol.symbolLayers)==null?void 0:i[0]:void 0}function lHe(e,t){(e==null?void 0:e.type)==="CIMVectorMarker"&&t!=null&&(e.size=t)}function uHe(e,t){const i=sj(e);i&&t!=null&&(i.geometry=aHe(t))}function cHe(e,t){const i=vpe(sj(e));i&&t!=null&&(i.color=t.toArray())}function hHe(e,t,i){const r=vpe(sj(e));r&&t!=null&&i&&(r.colorLocked=t)}function wpe(e,t){var b;const{outerRingSize:i,innerDotSize:r,type:n,color:o,colorLocked:u,primitiveOverrides:f}=t,g=((b=e.data.symbol)==null?void 0:b.type)==="CIMPolygonSymbol"?e.data.symbol.symbolLayers:null;if((g==null?void 0:g.length)===2)for(const E of g){const I=E.primitiveName===LR.OuterRing;lHe(E,I?i:r),uHe(E,n),cHe(E,o),hHe(E,u,I)}return i!=null&&r!=null&&(e.data.primitiveOverrides=null),f!==void 0&&(e.data.primitiveOverrides=he(f)),e}(function(e){e.OuterRing="reference-size-outer-ring",e.InnerDot="reference-size-inner-dot"})(LR||(LR={}));function dHe(e,t,i){const r=e.effectiveClusterRenderer;if(!r||!("visualVariables"in r)||!r.visualVariables)return null;const n=r.visualVariables.find(E=>E.type==="size");if(!("stops"in n)||!n.stops)return null;const o=n.stops.find(E=>E.useMinValue),u=n.stops.find(E=>E.useMaxValue);if(o==null||u==null)return null;const f=i.featuresTilingScheme.getClosestInfoForScale(i.scale).level,g=n.field,b=t.getDisplayStatistics(f,g);return b?new z2({field:n.field,minSize:e.clusterMinSize,minDataValue:b.minValue,maxSize:e.clusterMaxSize,maxDataValue:b.maxValue}):null}const OR=30,RR=12,PR=24,bpe=[255,255,255],oj=[200,200,200],Bg=[128,128,128],pHe=20,fHe=5;function yHe(e){return e.declaredClass==="esri.symbols.SimpleMarkerSymbol"}function mHe(e){return e.declaredClass==="esri.symbols.PictureMarkerSymbol"}function gHe(e){return e.declaredClass==="esri.symbols.SimpleLineSymbol"}function vHe(e){return e.declaredClass==="esri.symbols.TextSymbol"}function wHe(e,t){const i=e.length-1;return e.map((r,n)=>tce(r,n,i,t))}async function bHe(e,t,i,r,n,o,u){const f=t.legendOptions,g=f==null?void 0:f.customValues,b=u||await EHe(e,i),E=t.stops,I=!!b,M=!!g,k=t.minSize!=null&&t.maxSize!=null,L=E&&E.length>1,P=!!t.target;if(!I||!M&&!(k||L&&!P))return;const D=UT(b);let j=!1,z=null,V=null;z=D&&!L?jI([t.minDataValue,t.maxDataValue]):g??await THe(t,b,r,n==null?void 0:n.type);const W=e==null?void 0:e.authoringInfo,Q=(W==null?void 0:W.type)==="univariate-color-size",Z=Q&&(W==null?void 0:W.univariateTheme)==="above-and-below",ee=!!zL(e);if(!z&&L&&(z=E.map(xe=>xe.value),j=E.some(xe=>!!xe.label),e.type==="flow"&&(z=jI(z)),j&&(V=E.map(xe=>xe.label))),D&&z!=null&&(z==null?void 0:z.length)>2&&!Z&&(z=[z[0],z[z.length-1]]),!z)return null;Q&&(z==null?void 0:z.length)!==5&&(z=xpe({minSize:z[0],maxSize:z[z.length-1]}));const ie=D?_He(e,z):null,oe=CRe(b),le=j?null:wHe(z,o);return(await Promise.all(z.map(async(xe,$e)=>{const Te=D?ie[$e]:await dg(t,b,xe,r,n==null?void 0:n.type);return{value:xe,symbol:!ee||e.type!=="class-breaks"&&e.type!=="unique-value"?CHe(Z&&e.type==="class-breaks"?xHe(e,$e):b,Te):SHe(e,Te,t.maxSize,i)??b,label:j?V[$e]:le[$e],size:ee?PR:Te,outlineSize:oe}}))).reverse()}function _He(e,t){const i=e==null?void 0:e.authoringInfo,r=(i==null?void 0:i.type)==="univariate-color-size";let n=[RR,OR];if(r){const o=t[0],u=t[t.length-1],f=RR,g=OR;n=t.map(b=>f+(b-o)/(u-o)*(g-f))}return r&&(i==null?void 0:i.univariateTheme)==="below"&&n.reverse(),n}function SHe(e,t,i,r){var u,f,g,b,E,I;const n=e.type==="class-breaks",o=n?(g=(f=(u=e.classBreakInfos)==null?void 0:u[0])==null?void 0:f.symbol)==null?void 0:g.clone():(I=(E=(b=e.uniqueValueInfos)==null?void 0:b[0])==null?void 0:E.symbol)==null?void 0:I.clone();return o&&"type"in o&&o.type==="cim"?(wpe(o,{color:r??(n?null:new Ne(oj)),innerDotSize:t*(PR/i)||1,outerRingSize:PR}),o):null}function xHe(e,t){var u;const i=e.classBreakInfos,r=i.length,n=r<2||!(t>=2)?i[0].symbol.clone():i[r-1].symbol.clone();return((u=e.visualVariables)==null?void 0:u.some(f=>f.type==="color"))&&(n.type.includes("3d")?_pe(n):Spe(n)),n}async function EHe(e,t){var n,o;if(e.type==="flow")return ice(e,t);if(e.type==="pie-chart")return new Dn({color:null,outline:(n=e.outline)!=null&&n.width?e.outline:new us});let i=null,r=null;if(e.type==="simple")i=e.symbol;else if(e.type==="class-breaks"){const u=e.classBreakInfos;i=u&&u[0]&&u[0].symbol,r=u.length>1}else if(e.type==="unique-value"){const u=e.uniqueValueInfos;i=(o=u==null?void 0:u[0])==null?void 0:o.symbol,r=u!=null&&u.length>1}return!i||IHe(i)?null:(i=i.clone(),(t||r)&&(i.type.includes("3d")?_pe(i):Spe(i)),i)}function IHe(e){return e?Pc(e)?!!e.symbolLayers&&e.symbolLayers.some(t=>t&&t.type==="fill"):e.type.includes("fill"):!1}function _pe(e){e.type==="line-3d"?e.symbolLayers.forEach(t=>{t.material={color:Bg}}):e.symbolLayers.forEach(t=>{var i;t.type!=="icon"||(i=t.resource)!=null&&i.href?t.material={color:oj}:(t.material={color:bpe},t.outline={color:Bg,size:1.5})})}function Spe(e){var i,r;const t=XF();e.type==="cim"?que(e,new Ne(oj)):e.type.includes("line")?e.color=Bg:(e.color=t?Bg:bpe,e.type==="simple-marker"&&(e.outline?((r=(i=e.outline)==null?void 0:i.color)==null?void 0:r.toHex())==="#ffffff"&&(e.outline.color=Bg):e.outline={color:Bg,width:1.5}))}async function THe(e,t,i,r){const n=(await ce(async()=>{const{getSizeRangeAtScale:f}=await Promise.resolve().then(()=>Im);return{getSizeRangeAtScale:f}},void 0,import.meta.url)).getSizeRangeAtScale(e,i,r),o=n&&xpe(n);if(!n||!o)return;let u=o.map(f=>$He(f,e,n));u=jI(u);for(let f=1;f<u.length-1;f++){const g=await MHe(e,t,u[f],u[f-1],i,r);g&&(u[f]=g[0],o[f]=g[1])}return u}function xpe(e){const t=e.minSize,i=e.maxSize,r=fHe,n=(i-t)/(r-1),o=[];for(let u=0;u<r;u++)o.push(t+n*u);return o}function $He(e,t,i){const r=i.minSize,n=i.maxSize,o=t.minDataValue,u=t.maxDataValue;let f;return e<=r?f=o:e>=n?f=u:f=(e-r)/(n-r)*(u-o)+o,f}async function MHe(e,t,i,r,n,o){const u=await dg(e,t,i,n,o),f=await dg(e,t,r,n,o),g=DI(i),b=g.fractional,E=pHe;let I=g.integer,M=null,k=null;i>0&&i<1&&(M=10**b,I=DI(i*=M).integer);for(let L=I-1;L>=0;L--){const P=10**L;let D=Math.floor(i/P)*P,j=Math.ceil(i/P)*P;M!=null&&(D/=M,j/=M);let z=(D+j)/2;[,z]=jI([D,z,j],{indexes:[1]});const V=await dg(e,t,D,n,o),W=await dg(e,t,j,n,o),Q=await dg(e,t,z,n,o),Z=p4(u,V,f,null),ee=p4(u,W,f,null),ie=p4(u,Q,f,null);let oe=Z.previous<=E,le=ee.previous<=E;if(oe&&le&&(Z.previous<=ee.previous?(oe=!0,le=!1):(le=!0,oe=!1)),oe?k=[D,V]:le?k=[j,W]:ie.previous<=E&&(k=[z,Q]),k)break}return k}async function dg(e,t,i,r,n){const{getSize:o}=await ce(()=>Promise.resolve().then(()=>Im),void 0,import.meta.url);return o(e,i,{scale:r,view:n,shape:t.type==="simple-marker"?t.style:null})}function CHe(e,t){const i=e.clone();if(Pc(i))UT(i)||i.symbolLayers.forEach(r=>{r.type!=="fill"&&(r.size=t)});else if(yHe(i))i.size=t;else if(mHe(i)){const r=i.width,n=i.height;i.height=t,i.width=t*(r/n)}else gHe(i)?i.width=t:vHe(i)&&i.font&&(i.font.size=t);return i}function AHe(e){const i=Math.floor(Math.log10(Math.abs(e)))+1,r=i<4||i>6?4:i,n=1e6,o=Math.abs(e)>=n?"compact":"standard";return as(e,{notation:o,minimumSignificantDigits:2,maximumSignificantDigits:r})}const XJ=16,kHe="https://utility.arcgis.com/sharing/tools/legend",LHe="esri.layers.ImageryLayer",OHe="esri.layers.ImageryTileLayer",RHe="esri.layers.WCSLayer",Mx=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,PHe=new gt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Cx=new Dn({size:6,outline:{color:[128,128,128,.5],width:.5}}),NHe=new gl({style:"solid"});function NR(e){return e.type==="flow"}function Epe(e){return e.type==="vector-field"}function Ipe(e){return e.type==="raster-colormap"}function Tpe(e){return e.type==="raster-stretch"}function $pe(e){return e.type==="raster-shaded-relief"}function pg(e){return e.declaredClass==="esri.renderers.SimpleRenderer"}function Z0(e){return e.declaredClass==="esri.renderers.ClassBreaksRenderer"}function fg(e){return e.declaredClass==="esri.renderers.UniqueValueRenderer"}function Mpe(e){return e.declaredClass==="esri.renderers.HeatmapRenderer"}function FHe(e){return aj(e)||lj(e)||uj(e)||DHe(e)}function DHe(e){return e.declaredClass==="esri.renderers.PointCloudRGBRenderer"}function aj(e){return e.declaredClass==="esri.renderers.PointCloudClassBreaksRenderer"}function lj(e){return e.declaredClass==="esri.renderers.PointCloudStretchRenderer"}function uj(e){return e.declaredClass==="esri.renderers.PointCloudUniqueValueRenderer"}function Cpe(e){return e.declaredClass==="esri.renderers.DotDensityRenderer"}function Ape(e){return e.declaredClass==="esri.renderers.PieChartRenderer"}function jHe(e,t){return pg(e)||Z0(e)||fg(e)||Mpe(e)||Cpe(e)||Ape(e)?t.type==="2d"||gpe(e):Tpe(e)||Ipe(e)||$pe(e)||aj(e)||lj(e)||uj(e)||Epe(e)||NR(e)}function zHe(e){return e.declaredClass==="esri.layers.BuildingSceneLayer"}function B7(e){return e.declaredClass==="esri.layers.SubtypeGroupLayer"}function VHe(e){return e.declaredClass==="esri.layers.VoxelLayer"}function UHe(e){return e.declaredClass==="esri.layers.WMSLayer"}function GHe(e){return e.declaredClass==="esri.layers.WMTSLayer"}function q7(e){return e.declaredClass==="esri.layers.MapImageLayer"}function QJ(e){return e.declaredClass==="esri.layers.TileLayer"}function Xm(e){return e.declaredClass===LHe}function Ax(e){return e.declaredClass===OHe}function BHe(e){return e.declaredClass===RHe}function qHe(e){return e.type==="stretch-ramp"}function HHe(e){const t="authoringInfo"in e?e==null?void 0:e.authoringInfo:null;return(t==null?void 0:t.type)==="univariate-color-size"}function WHe(e){const t="authoringInfo"in e?e==null?void 0:e.authoringInfo:null;return(t==null?void 0:t.type)==="univariate-color-size"&&(t==null?void 0:t.univariateTheme)==="above-and-below"}function eK(e){return"sublayers"in e}async function Kc(e,t){const i=await vS("esri/widgets/Legend/t9n/Legend");return e!=="previewTemplateAriaLabel"||t||(e="previewAriaLabel"),Rn(i[e],{label:t})}function ZHe(e,t){const{field:i,field2:r,field3:n,fieldDelimiter:o,valueExpression:u}=e;if(!i)return null;const f=!i&&!u||!r&&!n?[t]:t==null?void 0:t.toString().split(o||""),g=i?{[i]:f==null?void 0:f[0]}:null;return g&&(r&&(g[r]=f==null?void 0:f[1]),n&&(g[n]=f==null?void 0:f[2])),g}const JHe=new Dn({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let Qm={},jr=class extends De{constructor(e){super(e),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this._layerDefinitionExpression=null,this._layerDefinitionExpressionClause=null,this.children=new Oe,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const e=()=>this.notifyChange("ready");this.addHandles([Lr(()=>this.children,"change",t=>{const{added:i,removed:r}=t;i.forEach(n=>{const o=`activeLayerInfo-ready-watcher-${n.layer.uid}`;this.addHandles(me(()=>n.ready,e,Je),o)}),r.forEach(n=>this.removeHandles(n.layer.uid)),e()})]),this.keepCacheOnDestroy||(Qm={})}destroy(){this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(Qm=null),this._layerDefinitionExpressionClause=null}get effectList(){const e=this.layer;let t=null;return"effect"in e&&e.effect&&(t=new Zl,t.effect=e.effect,t.endTransition(),t.scale=this.scale),t}get opacity(){var n;const e=this.layer.opacity,t=(n=this.parent)==null?void 0:n.opacity,i=this.layer.parent,r=i&&"uid"in i?this._getParentLayerOpacity(i):null;return t!=null?t*e:r!=null?r*e:e}get ready(){return this.layer===null||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){var e;return((e=this.view)==null?void 0:e.scale)??0}get isScaleDriven(){const e=this.layer;if(e===null)return!1;if("effect"in e&&e.effect&&Array.isArray(e.effect))return!0;if("featureReduction"in e&&e.featureReduction){if(e.featureReduction.type==="cluster")return!0;if(e.featureReduction.type==="binning"&&"renderer"in e.featureReduction&&e.featureReduction.renderer)return this._isRendererScaleDriven(e.featureReduction.renderer)}return"renderer"in e&&e.renderer?this._isRendererScaleDriven(e.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(e){if(!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],void this.notifyChange("ready");const t=Array.from(e,i=>{var r;if(oEe(i))return this._getRendererLegendElements(i.renderer,{title:i.title});if((r=i.featureSet)!=null&&r.features.length){const n=i.layerDefinition,o=n==null?void 0:n.drawingInfo,u=o&&zDe(o.renderer),f=PHe.read(n.geometryType);return u?this._getRendererLegendElements(u,{title:i.name,geometryType:f}):(Se.getLogger(this).warn("drawingInfo not available!"),null)}return null});try{const i=[],r=await Promise.allSettled(t);for(const n of r)if(n.status==="fulfilled")for(const o of n.value??[])i.push(o);this.legendElements=i,this.notifyChange("ready")}catch(i){Se.getLogger(this).warn("error while building legend for layer!",i)}}async buildLegendElementsForRenderer(e){try{const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getRendererLegendElements(e):[],this.notifyChange("ready")}catch(t){Se.getLogger(this).warn("error while building legend for layer!",t)}}async buildLegendElementsForFeatureReduction(e){try{const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getLegendElementsForFeatureReduction(e):[],this.notifyChange("ready")}catch(t){Se.getLogger(this).warn("error while building legend for layer!",t)}}async buildLegendElementsForTools(){var t,i;const e=this.layer;if(VHe(e))this._constructLegendElementsForVoxelLayer();else if(GHe(e))this._constructLegendElementsForWMTSlayer();else if(UHe(e))await this._constructLegendElementsForWMSSublayers();else if(zHe(e))await this._constructLegendElementsForBuildingSceneLayer();else if(q7(e)||QJ(e)||B7(e))await this._constructLegendElementsForSublayers();else{this.removeHandles("imageryLayers-watcher");let r="default";if(Xm(e)){const n=e;r=(((t=n==null?void 0:n.rasterFunction)==null?void 0:t.functionName)||"default")+"_"+((i=e.bandIds)!=null&&i.length?e.bandIds.join(""):"###")}if(Ax(e)||e.type==="link-chart")return;await this._getLegendLayers(`${e.uid}-${r}`).then(async n=>{this.legendElements=[],this.notifyChange("ready");const o=n.map(async u=>{if(Xm(e)){const g=me(()=>[e.rasterFunction,e.bandIds],()=>yu(async()=>{Qm.default=null,e.renderer?await this.buildLegendElementsForRenderer(e.renderer):await this.buildLegendElementsForTools()})());this.addHandles(g,"imageryLayers-watcher")}const f=this._generateSymbolTableElementForLegendLayer(u);f!=null&&f.infos.length&&(Xm(e)&&(f.title=e.title),this.legendElements.push(f)),this.notifyChange("ready")});await Promise.allSettled(o)}).catch(n=>{Se.getLogger(this).warn("Request to server for legend has failed!",n)})}}async _isLayerInCurrentView(){const e=this.layer,t=this.layerView,i=t&&"createQuery"in t&&"queryFeatureCount"in t;if(!i&&!(t&&"createQuery"in e&&"queryFeatureCount"in e))return!0;await cl(()=>!t.updating);const r=i?"createQuery"in t&&t.createQuery():"createQuery"in e&&e.createQuery();return r?(r.geometry=this.view.extent,(i?"queryFeatureCount"in t&&await t.queryFeatureCount(r):"queryFeatureCount"in e&&await e.queryFeatureCount(r))!==0):!0}_getParentLayerOpacity(e){let t=1;const i=e.parent;return i&&"uid"in i&&(t=this._getParentLayerOpacity(i)),e.opacity*t}_isGroupActive(){return this.children.some(e=>e.ready)}_isRendererScaleDriven(e){if(e.type==="dot-density")return!0;const t="valueExpression"in e?e.valueExpression:null;if(Mx.test(t))return!0;const i="visualVariables"in e?e.visualVariables:null;return!!(i!=null&&i.some(r=>this._isScaleDrivenSizeVariable(r)))||this._hasScaleDrivenSymbols(e)}_hasScaleDrivenSymbols(e){var t;switch(e.type){case"simple":return this._isScaleDrivenSymbol(e.symbol);case"class-breaks":return this._isScaleDrivenSymbol(e.defaultSymbol)||e.classBreakInfos.some(i=>this._isScaleDrivenSymbol(i.symbol));case"unique-value":return this._isScaleDrivenSymbol(e.defaultSymbol)||!!((t=e.uniqueValueInfos)!=null&&t.some(i=>this._isScaleDrivenSymbol(i.symbol)))}return!1}_isScaleDrivenSymbol(e){if((e==null?void 0:e.type)==="cim"){const{primitiveOverrides:t,minScale:i,maxScale:r}=e.data,n=(t==null?void 0:t.some(o=>{var u;return/\$view\.scale/.test(((u=o.valueExpressionInfo)==null?void 0:u.expression)||"")}))??!1;return i!=null||r!=null||n}return!1}_isScaleDrivenSizeVariable(e){if(e&&e.type!=="size")return!1;const t=e,i=t.minSize,r=t.maxSize;return!(typeof i!="object"||!i||!this._isScaleDrivenSizeVariable(i))||!(typeof r!="object"||!r||!this._isScaleDrivenSizeVariable(r))||Mx.test(t.valueExpression)}_isLayerScaleDriven(e){if("minScale"in e&&e.minScale>0||"maxScale"in e&&e.maxScale>0)return!0;if("sublayers"in e&&e.sublayers)return e.sublayers.some(i=>this._isLayerScaleDriven(i));const t=e.parent;if(e.loaded===!1&&t&&q7(t)&&"source"in e&&e.source&&e.source.type==="map-layer"){for(const i of t.sourceJSON.layers??[])if(i.id===e.source.mapLayerId&&(i.minScale>0||i.maxScale>0))return!0}return!1}async _constructLegendElementsForVoxelLayer(){var o;this.legendElements=[],this.removeHandles("voxel-style-watcher"),this.removeHandles("voxel-current-variable");const e=this.layer;this.addHandles(me(()=>e.currentVariableId,()=>this._constructLegendElementsForVoxelLayer()),"voxel-current-variable"),this.addHandles(me(()=>e.getVariableStyles(),()=>this._constructLegendElementsForVoxelLayer()),"voxel-style-watcher");const t=e.getVariableStyle(null),i=[];if(t){if((o=t.uniqueValues)!=null&&o.length){const u=[];t.uniqueValues.forEach(f=>{f.enabled&&u.push({label:f.label||`${f.value}`,value:f.value,symbol:new gl({color:f.color,outline:null})})}),u.length&&i.push({type:"symbol-table",title:t.label,infos:u})}else if(t.transferFunction){const{colorStops:u,stretchRange:f}=t.transferFunction,g=u.toArray().reverse(),b=f.map((I,M)=>`${M===0?Que:ece} ${AHe(I)}`).reverse(),E=g.map(I=>({color:I.color,value:null,label:null}));E[0].label=b[0],E[E.length-1].label=b[1],i.push({type:"color-ramp",title:t.label,infos:E,preview:G0(g.map(I=>I.color),{ariaLabel:await Kc("previewColorRampAriaLabel")})})}}const r=e.opacity,n=i.reduce((u,f)=>[...u,...this._getAllInfos(f)],[]).filter(u=>!!(u!=null&&u.symbol)).map(u=>this._getSymbolPreview(u,r));await Promise.allSettled(n),this.legendElements=i,this.notifyChange("ready")}_constructLegendElementsForWMTSlayer(){var i,r;this.legendElements=[],this.removeHandles("wmts-activeLayer-watcher");const e=this.layer.activeLayer;this.addHandles(me(()=>{const{layer:n}=this;return n&&"activeLayer"in n&&n.activeLayer},()=>this._constructLegendElementsForWMTSlayer()),"wmts-activeLayer-watcher");const t=e.styleId?(r=(i=e.styles)==null?void 0:i.find(({id:n})=>n===e.styleId))==null?void 0:r.legendUrl:void 0;t&&(this.legendElements=[{type:"symbol-table",title:e.title,infos:[{src:t,opacity:this.opacity}]}]),this.notifyChange("ready")}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this.removeHandles("wms-sublayers-watcher");const e=this.layer;let t=null;(e.customParameters||e.customLayerParameters)&&(t={...e.customParameters,...e.customLayerParameters}),this.addHandles(me(()=>{const{layer:i}=this;return i&&"sublayers"in i&&i.sublayers},()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher"),this.legendElements=await this._generateLegendElementsForWMSSublayers(e.sublayers,t),this.notifyChange("ready")}async _generateLegendElementsForWMSSublayers(e,t){var u,f;const i=this.layer,r=[];this.addHandles(e.on("change",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");const n=((f=(u=this.sublayerIds)==null?void 0:u.map(g=>i.findSublayerById(g)))==null?void 0:f.filter(cr))??[],o=n.length?n:e.toArray();for(const g of o){const b=me(()=>[g.title,g.visible,g.legendEnabled],()=>this._constructLegendElementsForWMSSublayers());if(this.addHandles(b,"wms-sublayers-watcher"),!this.respectLayerVisibility||g.visible&&g.legendEnabled){const E=await this._generateSymbolTableElementForWMSSublayer(g,t);E!=null&&E.infos.length&&r.unshift(E)}}return r}async _generateSymbolTableElementForWMSSublayer(e,t){if(!e.legendUrl&&e.sublayers){const i=(await this._generateLegendElementsForWMSSublayers(e.sublayers,t)).filter(r=>r);return{type:"symbol-table",title:e.title,infos:i}}return this._generateSymbolTableElementForLegendUrl(e,t)}async _generateSymbolTableElementForLegendUrl(e,t){var u;let i=e.legendUrl;if(!i)return;const r={type:"symbol-table",title:e.title||e.name||String(e.id??""),infos:[]};t&&(i=d9(i,t));let n=null;const o=(u=e.layer)==null?void 0:u.opacity;try{n=(await Ct(i,{responseType:"image"})).data,n&&(n.style.opacity=o)}catch{}return r.infos.push({src:i,preview:n,opacity:o}),r}_getLegendLayers(e,t){const i=Qm&&Qm[e];return i?Promise.resolve(i):this._legendRequest(t).then(r=>{const n=r.layers;return Qm[e]=n,n})}_legendRequest(e){var n;const t=this.layer;let i={f:"json",dynamicLayers:e};if(Xm(t)){const o=t.exportImageServiceParameters.rasterFunction;if(o&&(i.renderingRule=JSON.stringify(((n=o.functionDefinition)==null?void 0:n.toJSON())||o.toJSON())),t.bandIds&&(i.bandIds=t.bandIds.join()),t.raster||t.viewId||t.customParameters){const{raster:u,viewId:f,customParameters:g}=t;i={raster:u,viewId:f,...i,...g}}}let r=t.url.replace(/(\/)+$/,"");if("version"in t&&+t.version>=10.01){const o=r.indexOf("?");o>-1?r=r.slice(0,o)+"/legend"+r.slice(o):r+="/legend"}else{const o=r.toLowerCase().indexOf("/rest/"),u=o===-1?r:r.slice(0,o)+r.slice(o+5);r=kHe+"?soapUrl="+encodeURI(u)+"&returnbytes=true"}return Ct(r,{query:i}).then(o=>o.data)}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this.removeHandles("sublayers-watcher");const e=this.layer;this.addHandles(me(()=>e.sublayers,()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(e.sublayers,this.opacity),this.notifyChange("ready")}catch(t){Se.getLogger(this).warn("Request to server for legend has failed!",t)}}async _generateLegendElementsForBuildingSublayers(e,t){let i=[];this.addHandles(e.on("change",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");const r=e.toArray();for(const n of r){const o=me(()=>["renderer"in n&&n.renderer,n.opacity,n.title,n.visible],()=>this._constructLegendElementsForBuildingSceneLayer());if(this.addHandles(o,"sublayers-watcher"),!this.respectLayerVisibility||n.visible){const u=(n==null?void 0:n.opacity)!=null?n.opacity:null,f=u!=null?u*t:t;if(n.type==="building-group"){const g={type:"symbol-table",title:n.title,infos:[]},b=await this._generateLegendElementsForBuildingSublayers(n.sublayers,f);g.infos.push(...b),i=[g,...i]}else n.renderer&&(i=[...await this._getRendererLegendElements(n.renderer,{title:n.title,opacity:f,sublayer:n}),...i])}}return i.filter(n=>!!n&&(!("infos"in n)||!n.infos||n.infos.length>0))}async _constructLegendElementsForSublayers(){this.legendElements=[],this.removeHandles("sublayers-watcher");const e=this.layer;if(q7(e)||QJ(e)||B7(e)){this.addHandles(me(()=>e.sublayers,()=>this._constructLegendElementsForSublayers),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(e.sublayers,this.opacity),this.notifyChange("ready")}catch(t){Se.getLogger(this).warn("Request to server for legend has failed!",t)}}}async _generateLegendElementsForSublayers(e,t,i){const r=this.layer;let n=[];this.addHandles(e.on("change",()=>this._constructLegendElementsForSublayers()),"sublayers-watcher");let o=e.toArray();!i&&this.sublayerIds&&this.sublayerIds.length&&(o=B7(r)?this.sublayerIds.map(u=>r.findSublayerForSubtypeCode(u)).filter(cr):this.sublayerIds.map(u=>r.findSublayerById(u)).filter(cr));for(const u of o){const f=me(()=>[u.renderer,u.opacity,u.title,u.visible,u.legendEnabled],()=>this._constructLegendElementsForSublayers());if(this.addHandles(f,"sublayers-watcher"),!this.respectLayerVisibility||u.visible&&u.legendEnabled&&this._isSublayerInScale(u)){const g=(u==null?void 0:u.opacity)!=null?u.opacity:null,b=g!=null?g*t:t,E=!eK(u)||u.originIdOf("renderer")>yt.SERVICE&&!u.sublayers;if(u.renderer&&E)await u.load(),n=[...await this._getRendererLegendElements(u.renderer,{title:u.title,opacity:b,sublayer:u}),...n];else if(eK(u)){const I=await this._generateSymbolTableElementForSublayer(u,b,i);I&&n.unshift(I)}}}return n.filter(u=>!!u&&(!("infos"in u)||!u.infos||u.infos.length>0))}async _generateSymbolTableElementForSublayer(e,t,i){if(!i){i=new Map;const n=this.layer,o=e.source;let u=null;if(!(!o||o.type==="map-layer"&&o.mapLayerId===e.id&&(!o.gdbVersion||o.gdbVersion===("gdbVersion"in n&&n.gdbVersion)))||e.originIdOf("renderer")>yt.SERVICE||e.originIdOf("labelingInfo")>yt.SERVICE||e.originIdOf("labelsVisible")>yt.SERVICE){const g=new Ga({layer:this.layer});u=g.hasDynamicLayers?g.dynamicLayers:null,g.destroy()}const f=u||`${n.uid}-default`;(await this._getLegendLayers(f,u)).forEach(g=>i.set(g.layerId,g))}const r=i.get(e.id);if((!r||r!=null&&r.subLayerIds&&r.defaultVisibility)&&e.sublayers){const n=await this._generateLegendElementsForSublayers(e.sublayers,t,i);return{type:"symbol-table",title:e.title,infos:n}}return this._generateSymbolTableElementForLegendLayer(r,e,t)}_generateSymbolTableElementForLegendLayer(e,t,i){if(!(e!=null&&e.legend)||this.respectLayerVisibility&&!this._isLegendLayerInScale(e,t))return null;const r=t==null?void 0:t.renderer;let n=(t==null?void 0:t.title)||e.layerName;if(r&&(!t||(t==null?void 0:t.originIdOf("renderer"))>yt.SERVICE)){const f=(t==null?void 0:t.title)||this._getRendererTitle(r,t);f&&(n&&typeof f!="string"&&"title"in f&&(f.title=n),n=f)}const o={type:"symbol-table",title:n,legendType:e.legendType||null,infos:[]},u=t?this._sanitizeLegendForSublayer(e.legend.slice(),t):e.legend;return e.legendGroups&&e.legendGroups.length>0?e.legendGroups.forEach(f=>{var b;const g={type:"symbol-table",title:f.heading,legendType:e.legendType||null,infos:this._generateSymbolTableElementInfosForLegendLayer(u.filter(E=>E.groupId===f.id),e.layerId,i)};((b=g.infos)==null?void 0:b.length)>0&&o.infos.push(g)}):o.infos=this._generateSymbolTableElementInfosForLegendLayer(u,e.layerId,i),o.infos.length>0?o:null}_generateSymbolTableElementInfosForLegendLayer(e,t,i){return e.map(r=>{let n=r.url;if(r.imageData&&r.imageData.length>0)n=`data:image/png;base64,${r.imageData}`;else{if(n.indexOf("http")===0)return null;n=obe(`${this.layer.url}/${t}/images/${n}`)}return{label:r.label,src:n,opacity:i??this.opacity,width:r.width,height:r.height}}).filter(cr)}_isSublayerInScale(e){const t=e.minScale||0,i=e.maxScale||0;return!(t>0&&t<this.scale||i>this.scale)}_isLegendLayerInScale(e,t){const i=t||this.layer;let r=null,n=null,o=!0;return!i.minScale&&i.minScale!==0||!i.maxScale&&i.maxScale!==0?(e.minScale===0&&i.tileInfo&&(r=i.tileInfo.lods[0].scale),e.maxScale===0&&i.tileInfo&&(n=i.tileInfo.lods[i.tileInfo.lods.length-1].scale)):(r=Math.min(i.minScale,e.minScale)||i.minScale||e.minScale,n=Math.max(i.maxScale,e.maxScale)),(r>0&&r<this.scale||n>this.scale)&&(o=!1),o}_sanitizeLegendForSublayer(e,t){if("version"in this.layer&&+this.layer.version<10.1||e.length===0)return e;const i=t.renderer,r=e.some(u=>u.values);let n=0,o=null;return r&&e.some((u,f)=>(u.values||(n=f,o=u,o.label||(o.label="others")),o!=null)),i?i.type==="unique-value"?o&&(e.splice(n,1),e.push(o)):i.type==="class-breaks"&&(o&&e.splice(n,1),e.reverse(),o&&e.push(o)):o&&(e.splice(n,1),e.push(o)),e}async _getRendererLegendElements(e,t={}){if(!jHe(e,this.view))return Se.getLogger(this).warn(`Renderer of type '${e.type}' not supported!`),[];if(FHe(e))return this._constructPointCloudRendererLegendElements(e,t);if(Cpe(e))return this._constructDotDensityRendererLegendElements(e);const i=await this._loadRenderer(e);return Ape(i)?this._constructPieChartRendererLegendElements(i):this._constructRendererLegendElements(i,t)}async _getLegendElementsForFeatureReduction(e){let t=null;return e.type==="binning"?t=e.renderer:e.type==="cluster"&&(t=this._getClusterRenderer(e)),t?this._getRendererLegendElements(t):[]}_getPointCloudRendererTitle(e){var t;return(((t=e.legendOptions)==null?void 0:t.title)||e.field)??""}async _constructPointCloudRendererLegendElements(e,t={}){var f;const i=t.title,r=[];let n=null,o=null;if(aj(e))n={type:"symbol-table",title:i||this._getPointCloudRendererTitle(e),infos:[]},e.colorClassBreakInfos.forEach(g=>{n.infos.unshift({label:g.label||g.minValue+" - "+g.maxValue,value:[g.minValue,g.maxValue],symbol:this._getAppliedCloneSymbol(Cx,g.color)})});else if(lj(e)){const g=e.stops;let b=null;if(g!=null&&g.length&&(g.length===1&&(b=g[0].color),!b)){const I=g[0].value,M=g[g.length-1].value;I!=null&&M!=null&&(b=nce(I+(M-I)/2,g))}n={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(Cx,b||Cx.color)}]};const E=YRe(e.stops??[])??[];o={type:"color-ramp",title:i||this._getPointCloudRendererTitle(e),infos:E,preview:G0(E.map(I=>I.color),{ariaLabel:await Kc("previewColorRampAriaLabel")})}}else uj(e)&&(n={type:"symbol-table",title:i||this._getPointCloudRendererTitle(e),infos:[]},(f=e.colorUniqueValueInfos)==null||f.forEach(g=>{n.infos.push({label:g.label||g.values.join(", "),value:g.values.join(", "),symbol:this._getAppliedCloneSymbol(Cx,g.color)})}));n!=null&&n.infos.length&&r.push(n),o!=null&&o.infos.length&&r.push(o);const u=r.reduce((g,b)=>[...g,...b.infos??[]],[]).filter(g=>!!g.symbol).map(g=>this._getSymbolPreview(g,this.opacity,{symbolConfig:{applyColorModulation:!!e.colorModulation}}));return await Promise.allSettled(u),r}async _getElementInfoForDotDensity(e,t){const{color:i,label:r,valueExpressionTitle:n}=t,{backgroundColor:o,outline:u,dotSize:f}=e,g=this.effectList,b=g==null?void 0:g.effects.map(j=>j.toJSON()),E=zI(b),I=await Kc("previewTemplateAriaLabel",r||n),M=f+"-"+i+"-"+o+"-"+(u&&JSON.stringify(u.toJSON()))+"-"+E,k=this._dotDensityUrlCache,L=k.has(M)?k.get(M):hGe(e,i,{ariaLabel:I});k.set(M,L);const P={shape:{type:"image",x:0,y:0,width:L.width,height:L.height,src:L.src},fill:null,stroke:null,offset:[0,0]},D=zS([[P]],[L.width,L.height],{effectView:this.effectList,ariaLabel:I});return{opacity:1,src:L.src,preview:D,width:L.width,height:L.height}}async _constructDotDensityRendererLegendElements(e){var n;const t=e.calculateDotValue(this.view.scale),i=(n=e.legendOptions)==null?void 0:n.unit,r={type:"symbol-table",title:{value:t&&Math.round(t),unit:i||""},infos:[]};for(const o of e.attributes){const u=await this._getElementInfoForDotDensity(e,o);u.label=o.label||o.valueExpressionTitle||o.field,r.infos.push(u)}return[r]}async _constructPieChartRendererLegendElements(e){var g,b,E,I;const t=this.layer.opacity,i=[];let r=null;const n=e.outline;e.attributes.forEach(M=>{const k=new Dn({color:M.color,outline:n}),L=M.label||M.valueExpressionTitle||M.field;i.push({label:L,symbol:k})});const o=i.length?[...i]:[];if((g=e.othersCategory)!=null&&g.color&&((b=e.othersCategory)==null?void 0:b.threshold)!==0){const M=new Dn({color:e.othersCategory.color,outline:n});r=e.othersCategory.label||"Other",i.push({label:r,symbol:M})}if((E=e.defaultColor)!=null&&E.a){const M=new Dn({color:e.defaultColor,outline:n});i.push({label:e.defaultLabel,symbol:M})}const u=await this._getVisualVariableLegendElements(e,this.layer)||[];if(i.length){u.unshift({type:"symbol-table",title:null,infos:i});const M=o.filter(L=>L.label!==r).map(L=>L.symbol.color).filter(Boolean),k=dGe(M,{holePercentage:e.holePercentage,backgroundColor:(I=e.backgroundFillSymbol)==null?void 0:I.color,effectList:this.effectList,outline:n,ariaLabel:await Kc("previewPieChartAriaLabel")});u.unshift({type:"pie-chart-ramp",title:this._getRendererTitle(e,this.layer),infos:i,preview:k})}const f=u.reduce((M,k)=>[...M,...this._getAllInfos(k)],[]).filter(M=>!!(M!=null&&M.symbol)&&!(M!=null&&M.preview)).map(M=>this._getSymbolPreview(M,t,{effectList:this.effectList}));return await Promise.allSettled(f),u}async _constructRendererLegendElements(e,t={}){var D,j,z,V,W,Q;const{title:i,sublayer:r}=t,n=r||this.layer,o=zL(e);if("definitionExpression"in n){const Z=n.definitionExpression;if(Z&&this.respectLayerDefinitionExpression&&fg(e)){if(this._layerDefinitionExpression!==Z){this._layerDefinitionExpressionClause=await wF(Z,n.fieldsIndex);const ee=new Set((await X6e(e,n.fieldsIndex)).map(oe=>oe.toLowerCase())),ie=(D=this._layerDefinitionExpressionClause)==null?void 0:D.fieldNames.map(oe=>oe.toLowerCase());ie!=null&&ie.every(oe=>ee.has(oe))||(this._layerDefinitionExpressionClause=null,ie!=null&&ie.length&&Se.getLogger(this).warn("Definition expression will be ignored in the Legend, as fields in the expression do not match with renderer fields"))}}else this._layerDefinitionExpressionClause=null;this._layerDefinitionExpression=Z}this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const u=await this._getVisualVariableLegendElements(e,n)||[],f={type:"symbol-table",title:i||this._getRendererTitle(e,n),infos:[]};let g=null,b=!1;const E=new Set;if(NR(e)&&!this._hasSizeRamp){const Z=await ice(e);f.infos.push({label:null,symbol:Z})}else if(HHe(e)){let Z=i;const ee=WHe(e)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",ie=u.findIndex(Te=>Te.type==="color-ramp"),oe=ie!==-1?u.splice(ie,1)[0]:null,le=u.findIndex(Te=>Te.type==="size-ramp"),xe=le!==-1?u.splice(le,1)[0]:null,$e=[];oe&&(Z=oe.title,$e.push(oe)),xe&&(Z=xe.title,$e.push(xe)),$e.length>0&&u.push({type:ee,title:Z,infos:$e})}else if(Mpe(e)){const Z=sce(e);u.push({type:"heatmap-ramp",title:i||this._getRendererTitle(e,n),infos:Z,preview:G0(Z.map(ee=>ee.color),{effectList:this.effectList,ariaLabel:await Kc("previewColorRampAriaLabel")})})}else if(fg(e)){const Z=e.authoringInfo;if(Z&&Z.type==="relationship"){const{numClasses:ee,field1:ie,field2:oe}=Z,le=Z.focus;if(ee&&ie&&oe){const xe=[ie,oe];let $e=Tde(le)||0;for(const de of xe){const{field:se,normalizationField:ye,label:ue}=de,pe=ue||{field:this._getFieldAlias(se,n),normField:ye&&this._getFieldAlias(ye,n)},_e=JHe.clone();_e.angle=$e,f.infos.push({label:pe,symbol:_e}),E.add(_e),$e+=90}const Te=cGe({focus:le,numClasses:ee,infos:e.uniqueValueInfos??[]});u.unshift(Te)}}else if(Xm(this.layer)||Ax(this.layer))(j=e.uniqueValueInfos)==null||j.forEach(ee=>{ee.symbol&&this._checkDefinitionExpressionForUVR(e,ee.value)&&f.infos.push({label:ee.label||ee.value,value:ee.value,symbol:ee.symbol})});else{const{field:ee,field2:ie,field3:oe,fieldDelimiter:le,valueExpression:xe,defaultSymbol:$e}=e,Te=!(!ee&&!xe||!ie&&!oe),de=[];if((z=e.uniqueValueGroups)==null||z.forEach(se=>{var ue;const ye={type:"symbol-table",title:se.heading,infos:[]};(ue=se.classes)==null||ue.forEach(pe=>{const{symbol:_e,values:Le}=pe;if(_e){const Re=[],qe=[];for(const Rr of Le??[]){const{value:hs,value2:zc,value3:$m}=Rr,Vc=[],vd=[];(ee||xe)&&(Vc.push(hs),vd.push(this._getDomainName(ee,hs,n))),ie&&(Vc.push(zc),vd.push(this._getDomainName(ie,zc,n))),oe&&(Vc.push($m),vd.push(this._getDomainName(oe,$m,n))),Re.push(Te?Vc.join(le||""):Vc[0]),qe.push(vd.join(" - "))}const ht=Re.join(", ");let At=pe.label;if(!At){const Rr=qe.filter(Boolean);At=Rr.length?Rr.join(", "):ht}const Fi=_e.clone();Fi.type==="cim"&&o&&wpe(Fi,{innerDotSize:.5*XJ,outerRingSize:XJ}),Re.some(Rr=>this._checkDefinitionExpressionForUVR(e,Rr))&&ye.infos.push({label:At,value:ht,symbol:Fi})}}),ye.infos.length&&de.push(ye)}),de.length){const se=de[0];de.length===1&&"title"in se&&!se.title?f.infos.push(...se.infos??[]):($e&&(de.push({type:"symbol-table",infos:[{label:e.defaultLabel||"others",symbol:$e}]}),b=!0),f.infos.push(...de)),i||(V=e.legendOptions)!=null&&V.title||e.valueExpressionTitle||(f.title=null)}}e.defaultSymbol&&!b&&(f.infos.push({label:e.defaultLabel||"others",symbol:e.defaultSymbol}),b=!0)}else if(Z0(e)){if(!o){if(g=this._isUnclassedRenderer(e),!g||!this._hasSizeRamp){const Z=e.classBreakInfos.filter(({symbol:ee})=>ee);for(const{label:ee,minValue:ie,maxValue:oe,symbol:le}of Z)f.infos.unshift({label:ee||(g?null:`${ie} - ${oe}`),value:[ie,oe],symbol:le});g&&(f.title=null),this._updateInfosForClassedSizeRenderer(e,f.infos)}e.defaultSymbol&&!g&&(f.infos.push({label:e.defaultLabel||"others",symbol:e.defaultSymbol}),b=!0)}}else if(Tpe(e))if(Ax(this.layer)||BHe(this.layer)){const Z=await this._constructTileImageryStretchRendererElements(e);qHe(Z)?u.push(Z):f.infos=Z}else{const Z=this.layer;let ee,ie;(W=e.customStatistics)!=null&&W.length&&({min:ee,max:ie}=e.customStatistics[0]);let oe=[],le=Z.serviceRasterInfo;if(Z.rasterFunction)try{le=await Z.generateRasterInfo(Z.rasterFunction)}catch{}const xe=YI(le.pixelType);if(le.bandCount===1){const $e=((Q=Z.bandIds)==null?void 0:Q[0])||0;ee=ee??(le.statistics?le.statistics[$e].min:xe[0]),ie=ie??(le.statistics?le.statistics[$e].max:xe[1]),ee||ie?u.push(await this._getStretchLegendElements(e,{min:ee,max:ie})):this._getServerSideLegend()}else if(Z.bandIds&&Z.bandIds.length===1)ee=ee??(le.statistics?le.statistics[Z.bandIds[0]].min:xe[0]),ie=ie??(le.statistics?le.statistics[Z.bandIds[0]].max:xe[1]),ee||ie?u.push(await this._getStretchLegendElements(e,{min:ee,max:ie})):this._getServerSideLegend();else if(le.bandCount>=3){const{bandInfos:$e}=le,{bandIds:Te}=Z;$e.length>=le.bandCount?(Te==null?void 0:Te.length)===3?(oe=Te.map(de=>$e[de].name),f.infos=this._createSymbolTableElementMultiBand(oe)):Z.format==="lerc"?(oe=[0,1,2].map(de=>$e[de].name),f.infos=this._createSymbolTableElementMultiBand(oe)):this._getServerSideLegend():Z.format==="lerc"?(oe=["band1","band2","band3"],f.infos=this._createSymbolTableElementMultiBand(oe)):this._getServerSideLegend()}else this._getServerSideLegend()}else if(Ipe(e))e.colormapInfos.forEach(Z=>{f.infos.push({label:Z.label,value:Z.value,symbol:this._getAppliedCloneSymbol(NHe,Z.color)})});else if(pg(e)){let Z=e.symbol;switch(t.geometryType){case"point":Z="pointSymbol"in n?n.pointSymbol:null;break;case"polyline":Z="lineSymbol"in n?n.lineSymbol:null;break;case"polygon":Z="polygonSymbol"in n?n.polygonSymbol:null}const ee=this._hasClusterSizeVariable&&this._getClusterSymbol()||!this._hasSizeRamp;e.symbol&&ee&&f.infos.push({label:e.label,symbol:Z})}else if(Epe(e)){e.outputUnit&&(this.title="("+e.toJSON().outputUnit+")"),f.title=e.attributeField;const Z=e.getClassBreakInfos();Z!=null&&Z.length?Z.forEach(ee=>{f.infos.push({label:ee.minValue+" - "+ee.maxValue,symbol:ee.symbol})}):f.infos.push({label:e.attributeField,symbol:e.getDefaultSymbol()})}else $pe(e)&&u.push(await this._getStretchLegendElements(e,{min:0,max:255}));const I=e.defaultSymbol;!I||b||pg(e)||g&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||u.push({type:"symbol-table",infos:[{label:e.defaultLabel||"others",symbol:I}]}),f.infos.length&&u.unshift(f);const M=t.opacity==null?this.opacity:t.opacity,k=this._isTallSymbol("visualVariables"in e?e.visualVariables:null),L=Xm(this.layer)||Ax(this.layer),P=u.reduce((Z,ee)=>[...Z,...this._getAllInfos(ee)],[]).filter(Z=>!!(Z!=null&&Z.symbol)).filter(Z=>{if(Z.symbol.type==="cim"){const{minScale:ee,maxScale:ie}=Z.symbol.data;if(ee&&ee<this.scale||ie&&ie>this.scale)return!1}return!0}).map(Z=>this._getSymbolPreview(Z,M,{isDefault:Z.symbol===I,applyScaleDrivenSize:!E.has(Z.symbol),symbolConfig:{isTall:k,isSquareFill:L},effectList:E.has(Z.symbol)?null:this.effectList}));return e=null,await Promise.allSettled(P),u}_checkDefinitionExpressionForUVR(e,t){if(!this._layerDefinitionExpressionClause)return!0;const i=ZHe(e,t);return(i&&this._layerDefinitionExpressionClause.testFeature(i))??!0}_getServerSideLegend(){setTimeout(()=>this.buildLegendElementsForTools(),0)}_getAllInfos(e){const t=e==null?void 0:e.infos;return t?t.reduce((i,r)=>i.concat(this._getAllInfos(r)),[]):[e]}async _constructTileImageryStretchRendererElements(e){var f,g,b;const t=this.layer,i=t.symbolizer.rasterInfo??t.raster.rasterInfo;let r,n;const o=(f=e==null?void 0:e.customStatistics)!=null&&f.length?e.customStatistics:i==null?void 0:i.statistics;if(o)({min:r,max:n}=o[0]);else{const E=YI(i.pixelType);r=E[0],n=E[1]}if(t.hasStandardTime()&&(r=t.getStandardTimeValue(r),n=t.getStandardTimeValue(n)),i.bandCount===1||((g=t.bandIds)==null?void 0:g.length)===1)return this._getStretchLegendElements(e,{min:r,max:n});const u=((b=t==null?void 0:t.bandIds)!=null&&b.length?t.bandIds:Array.from(Array(Math.min(i.bandCount,3)).keys())).map(E=>i.bandInfos[E].name);return u.length<3?u.push(u[1]):u.length>3&&u.splice(3),this._createSymbolTableElementMultiBand(u)}async _getStretchLegendElements(e,t){const i=e.colorRamp,r=QRe(i,t);return{type:"stretch-ramp",title:"",infos:r,preview:G0(r.map(n=>n.color),{ariaLabel:await Kc("previewColorRampAriaLabel")})}}_getClusterSymbol(){var r;const e=this.layer,t="featureReduction"in e&&e.featureReduction,i=t&&"symbol"in t&&t.renderer;return i&&((r=i==null?void 0:i.authoringInfo)==null?void 0:r.isAutoGenerated)!==!0?null:t&&"symbol"in t?t.symbol:null}async _getSizeLegendElement(e,t,i,r){return{type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(t):e,infos:await bHe(i,t,await jL(i),this.scale,this.view,r,this._hasClusterSizeVariable?this._getClusterSymbol():null)}}_createSymbolTableElementMultiBand(e){const t=[],i=["red","green","blue"];return e.forEach((r,n)=>{t.push({label:{colorName:i[n],bandName:r},src:qRe[n],opacity:this.opacity??1})}),t}_updateInfosForClassedSizeRenderer(e,t){const i=e.authoringInfo&&e.authoringInfo.type==="class-breaks-size",r=e.classBreakInfos.some(n=>UT(n.symbol));if(i&&r){const n=OR,o=RR,u=e.classBreakInfos.length,f=(n-o)/(u>1?u-1:u);t.forEach((g,b)=>{g.size=n-f*b})}}_isTallSymbol(e){let t=!1,i=!1;if(e)for(let r=0;r<e.length&&(!t||!i);r++){const n=e[r];n.type==="size"&&(n.axis==="height"&&(t=!0),n.axis==="width-and-depth"&&(i=!0))}return t&&i}async _getSymbolPreview(e,t,i){var o,u,f;let r=!(i!=null&&i.isDefault)&&e.size==null&&this._hasSizeRamp?Uo(on.size):e.size;if(this._scaleDrivenSizeVariable&&(i!=null&&i.applyScaleDrivenSize)){const{getSize:g}=await ce(()=>Promise.resolve().then(()=>Im),void 0,import.meta.url);r=g(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:e.symbol.type==="simple-marker"?e.symbol.style:null})}const n=!(i!=null&&i.isDefault)&&this._hasSizeRamp||!(!this._scaleDrivenSizeVariable||!(i!=null&&i.applyScaleDrivenSize));return $de(e.symbol,{size:r,opacity:t,scale:!1,symbolConfig:i==null?void 0:i.symbolConfig,effectView:i==null?void 0:i.effectList,style:"legend",cimOptions:{allowScalingUp:n,viewParams:this.isScaleDriven?{viewingMode:((o=this.view)==null?void 0:o.type)==="2d"?"map":(u=this.view)==null?void 0:u.viewingMode,scale:(f=this.view)==null?void 0:f.scale}:null},ariaLabel:e.label&&typeof e.label!="string"?null:await Kc("previewTemplateAriaLabel",e.label)}).then(g=>(e.preview=g,e)).catch(()=>(e.preview=null,e))}_getClusterRenderer(e){var n,o;this._hasClusterSizeVariable=!1;const t="renderer"in this.layer?this.layer.renderer:null,i=((n=e.renderer)==null?void 0:n.clone())||(t==null?void 0:t.clone()),r=dHe(e,this.layerView,this.view);if(r&&i!=null&&"visualVariables"in i&&!((o=i.visualVariables)==null?void 0:o.some(f=>f.type==="size"&&f.target!=="outline"&&!Mx.test(f.valueExpression)))){if("clusterMinSize"in e&&"clusterMaxSize"in e){const{clusterMinSize:g,clusterMaxSize:b}=e;r.legendOptions=new yce({showLegend:g!==b})}const f=i.visualVariables||[];i.visualVariables=f.concat([r]),this._hasClusterSizeVariable=!0}return i}async _loadRenderer(e){const t=[],i=e.clone(),r=await jL(i);if(Z0(i)||fg(i)){const n=(i.classBreakInfos||i.uniqueValueInfos).map(o=>this._fetchSymbol(o.symbol,r).then(u=>{o.symbol=u}).catch(()=>{o.symbol=null}));Array.prototype.push.apply(t,n)}return t.push(this._fetchSymbol(i.symbol||i.defaultSymbol,i.defaultSymbol?null:r).then(n=>{this._applySymbolToRenderer(i,n,pg(i))}).catch(()=>{this._applySymbolToRenderer(i,null,pg(i))})),await Promise.allSettled(t),i}_applySymbolToRenderer(e,t,i){i?e.symbol=t:e.defaultSymbol=t}async _fetchSymbol(e,t){if(!e)throw new Error;if(e.type==="web-style"){const i=this._webStyleSymbolCache;try{const r=await(this.view.type==="2d"?e.fetchCIMSymbol({cache:i}):e.fetchSymbol({cache:i}));return this._getAppliedCloneSymbol(r,t)}catch{throw Se.getLogger(this).warn("Fetching web-style failed!"),new Error}}return this._getAppliedCloneSymbol(e,t)}_getAppliedCloneSymbol(e,t){if(!e||!t)return e;const i=e.clone(),r=t&&t.toRgba();return i.type.includes("3d")?this._applyColorTo3dSymbol(i,r):i.type==="cim"?que(i,t):i.color&&(i.color=new Ne(r||i.color)),i}_applyColorTo3dSymbol(e,t){t&&e.symbolLayers.forEach(i=>{i&&(i.material||(i.material={}),i.material.color=new Ne(t))})}async _getVisualVariableLegendElements(e,t){var I,M;if(!("visualVariables"in e)||e.type==="vector-field")return null;const i=e.visualVariables??[],r=[],n=[],o=[],u=zL(e);if(((I=u==null?void 0:u.sizeStops)==null?void 0:I.length)===2&&(Z0(e)||fg(e))){const[k,L]=u.sizeStops;n.push(new z2({field:u.field??void 0,normalizationField:u.normalizationField,minSize:k.size,maxSize:L.size,minDataValue:k.value,maxDataValue:L.value}))}for(const k of i)k.type==="color"?r.push(k):k.type==="size"?n.push(k):k.type==="opacity"&&o.push(k);const f=[...r,...n,...o];let g,b;if(r.length===0&&Z0(e)&&e.classBreakInfos&&e.classBreakInfos.length===1){const k=e.classBreakInfos[0];g=k&&k.symbol}if(r.length===0&&pg(e)&&(g=e.symbol),g)if(g.type.includes("3d")){const k=g.symbolLayers.at(0);k.type==="water"?k.color!=null&&(b=k.color):((M=k.material)==null?void 0:M.color)!=null&&(b=k.material.color)}else g.url||(b=g.color);const E=this.effectList;return(await Promise.all(f.map(async k=>{if(!k.legendOptions||k.legendOptions.showLegend!==!1){const L=NR(e)?k.field:this._getRampTitle(k,t);let P=null;const D=ZRe(t,k,this.view.timeZone);if(k.type==="color"){const j=await VL(k,null,D)??[];P={type:"color-ramp",title:L,infos:j,preview:G0(j.map(z=>z.color),{effectList:E,ariaLabel:await Kc("previewColorRampAriaLabel")})},this._hasColorRamp||(this._hasColorRamp=j.length>0)}else if(k.type==="size"&&k.target!=="outline")Mx.test(k.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=k):(P=await this._getSizeLegendElement(L,k,e,D),this._hasSizeRamp||(this._hasSizeRamp=!(P.infos==null||!P.infos.length)));else if(k.type==="opacity"){const j=await VL(k,b,D)??[];P={type:"opacity-ramp",title:L,infos:j,preview:G0(j.map(z=>z.color),{effectList:E,ariaLabel:await Kc("previewColorRampAriaLabel")})},this._hasOpacityRamp||(this._hasOpacityRamp=j.length>0)}return P!=null&&P.infos?P:null}}))).filter(cr)}_getDomainName(e,t,i){var r;if(e&&typeof e!="function"){const n="getField"in i&&((r=i.getField)==null?void 0:r.call(i,e)),o=n&&"getFieldDomain"in i&&i.getFieldDomain?i.getFieldDomain(n.name,{excludeImpliedDomains:we("esri-widget-legacy-field-domain-calculation")}):null;return(o==null?void 0:o.type)==="coded-value"?o.getName(t):null}return null}_getClusterTitle(e){const t=this.layer,i=e.field;if("featureReduction"in t&&t.featureReduction&&t.featureReduction.type==="cluster"){const r=t.featureReduction,n="popupTemplate"in r&&r.popupTemplate,o=n&&n.fieldInfos;if(o){for(const u of o)if(u.fieldName===i)return i==="cluster_count"?u.label||{showCount:!0}:u.label}}return{showCount:!0}}_getRampTitle(e,t){var b,E;let i=e.field,r=e.normalizationField,n=!1,o=!1,u=!1,f=null;i=typeof i=="function"?null:i,r=typeof r=="function"?null:r;const g=(b=e.legendOptions)==null?void 0:b.title;if(g!=null)f=g;else if(e.valueExpressionTitle)f=e.valueExpressionTitle;else{if("renderer"in t&&t.renderer&&"authoringInfo"in t.renderer&&((E=t.renderer.authoringInfo)!=null&&E.visualVariables)){const I=t.renderer.authoringInfo.visualVariables;for(let M=0;M<I.length;M++){const k=I[M];if(k.type==="color"){if(k.style==="ratio"){n=!0;break}if(k.style==="percent"){o=!0;break}if(k.style==="percent-of-total"){u=!0;break}}}}f={field:i&&this._getFieldAlias(i,t),normField:r&&this._getFieldAlias(r,t),ratio:n,ratioPercent:o,ratioPercentTotal:u}}return f}_getRendererTitle(e,t){var f;const i=e;if((f=i.legendOptions)!=null&&f.title)return i.legendOptions.title;if(i.valueExpressionTitle)return i.valueExpressionTitle;let r=i.field,n=null,o=null;if(Z0(i)&&(n=i.normalizationField,o=i.normalizationType==="percent-of-total"),r=typeof r=="function"?null:r,n=typeof n=="function"?null:n,fg(i)){const{field2:g,field3:b,fieldDelimiter:E}=i;let I=r&&this._getFieldAlias(r,t);return g&&(I=`<${I}>${E}<${this._getFieldAlias(g,t)}>`,b&&(I=`${I}${E}<${this._getFieldAlias(b,t)}>`)),I}let u=null;return(r||n)&&(u={field:r&&this._getFieldAlias(r,t),normField:n&&this._getFieldAlias(n,t),normByPct:o}),u}_getFieldAlias(e,t){var E,I;const i="popupTemplate"in t?t.popupTemplate:null,r=i==null?void 0:i.fieldInfos;let n=r==null?void 0:r.find(M=>e===M.fieldName),o=null;"getField"in t&&t.getField?o=t.getField(e):"fieldsIndex"in t&&t.fieldsIndex&&(o=t.fieldsIndex.get(e));let u=null;const f="featureReduction"in t&&t.featureReduction;f&&(n??(n="popupTemplate"in f?(I=(E=f.popupTemplate)==null?void 0:E.fieldInfos)==null?void 0:I.find(M=>{var k;return(e==null?void 0:e.toLowerCase())===((k=M.fieldName)==null?void 0:k.toLowerCase())}):void 0),"fields"in f&&f.fields&&(u=f.fields.find(M=>{var k;return((k=M.name)==null?void 0:k.toLowerCase())===(e==null?void 0:e.toLowerCase())})));const g=n||o||u;let b=null;return g&&(b=(n==null?void 0:n.label)||(o==null?void 0:o.alias)||(u==null?void 0:u.alias)||"name"in g&&g.name||"fieldName"in g&&g.fieldName||null),b}_isUnclassedRenderer(e){const t=e.visualVariables;let i=!1;return Z0(e)&&e.classBreakInfos&&e.classBreakInfos.length===1&&t&&(i=e.field?t.some(r=>!(!r||e.field!==r.field||(e.normalizationField||r.normalizationField)&&e.normalizationField!==r.normalizationField)):!!t.length),i}};m([w()],jr.prototype,"children",void 0),m([w({readOnly:!0})],jr.prototype,"effectList",null),m([w()],jr.prototype,"layerView",void 0),m([w()],jr.prototype,"layer",void 0),m([w()],jr.prototype,"legendElements",void 0),m([w({readOnly:!0})],jr.prototype,"opacity",null),m([w()],jr.prototype,"parent",void 0),m([w({readOnly:!0,dependsOn:[]})],jr.prototype,"ready",null),m([w()],jr.prototype,"hideLayersNotInCurrentView",void 0),m([w()],jr.prototype,"keepCacheOnDestroy",void 0),m([w()],jr.prototype,"respectLayerDefinitionExpression",void 0),m([w()],jr.prototype,"respectLayerVisibility",void 0),m([w({readOnly:!0})],jr.prototype,"scale",null),m([w()],jr.prototype,"sublayerIds",void 0),m([w({readOnly:!0})],jr.prototype,"isScaleDriven",null),m([w()],jr.prototype,"title",void 0),m([w({readOnly:!0,dependsOn:["ready"],value:0})],jr.prototype,"version",null),m([w()],jr.prototype,"view",void 0),jr=m([H("esri.widgets.Legend.support.ActiveLayerInfo")],jr);const kpe=jr,Yf={state:"state",view:"view",allLayerViews:"all-layer-views",legendProperties:"legend-properties"},Lpe=Oe.ofType(kpe),KHe=new Set(["esri.layers.BuildingSceneLayer","esri.layers.CatalogLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.OrientedImageryLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.SubtypeGroupLayer","esri.layers.TileLayer","esri.layers.VoxelLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer","esri.layers.LinkChartLayer","esri.layers.catalog.CatalogFootprintLayer","esri.layers.catalog.CatalogDynamicGroupLayer","esri.layers.knowledgeGraph.KnowledgeGraphSublayer","esri.layers.KnowledgeGraphLayer"]),Ope="view.basemapView.baseLayerViews",Rpe="view.groundView.layerViews",Ppe="view.basemapView.referenceLayerViews",YHe=[Ope,Rpe,"view.layerViews",Ppe];let na=class extends De{constructor(t){super(t),this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new Oe,this.activeLayerInfos=new Lpe,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this.addHandles(me(()=>this.view,()=>this._viewHandles(),Je),Yf.view),this.addHandles(fS(()=>this._refresh()))}destroy(){this._destroyViewActiveLayerInfos(),this.view=null}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}_viewHandles(){this.removeHandles(Yf.state),this.view&&this.addHandles(me(()=>this.state,()=>this._stateHandles(),Je),Yf.state)}_stateHandles(){this._resetAll(),this.state==="ready"&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this.removeHandles([Yf.allLayerViews,Yf.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(t){this.removeHandles(t);const i=this._activeLayerInfosByLayerViewId[t];delete this._activeLayerInfosByLayerViewId[t],i!=null&&i.parent&&i.parent.children.remove(i)}_watchPropertiesAndAllLayerViews(){const{view:t}=this;if(!t)return;const{allLayerViews:i}=t;i.length&&this._refresh(),this.addHandles(i.on("change",r=>this._allLayerViewsChangeHandle(r)),Yf.allLayerViews),this.addHandles(me(()=>[this.layerInfos,this.basemapLegendVisible,this.groundLegendVisible],()=>this._propertiesChangeHandle()),Yf.legendProperties)}_allLayerViewsChangeHandle(t){t.moved.length?this._propertiesChangeHandle():(t.removed.forEach(i=>this._destroyViewActiveLayerInfo(i.uid)),this._refresh())}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(t){const i=this.view;if(t.length<2||!i)return;const r=[];t.forEach(o=>{if(!o.parent){const u=o.layer.parent,f=u&&"uid"in u&&this._layerViewByLayerId[u.uid],g=f&&this._activeLayerInfosByLayerViewId[f.uid];g&&t.includes(g)&&(r.push(o),o.parent=g,g.children.add(o),this._sortActiveLayerInfos(g.children))}}),t.removeMany(r);const n={};i.allLayerViews.forEach((o,u)=>n[o.layer.uid]=u),t.sort((o,u)=>{const f=n[o.layer.uid]||0;return(n[u.layer.uid]||0)-f})}_generateLayerViews(){const t=[];return YHe.filter(this._filterLayerViews,this).map(i=>Ps(this,i)).filter(i=>i!=null).forEach(this._collectLayerViews("layerViews",t)),t}_filterLayerViews(t){const i=!this.basemapLegendVisible&&(t===Ope||t===Ppe),r=!this.groundLegendVisible&&t===Rpe;return!i&&!r}_collectLayerViews(t,i){const r=n=>(n&&n.forEach(o=>{i.push(o),r(o[t])}),i);return r}_filterLayerViewsByLayerInfos(t){const i=this.layerInfos;return!i||!i.length||i.some(r=>this._hasLayerInfo(r,t))}_hasLayerInfo(t,i){const r=this._isLayerUIDMatching(t.layer,i.layer.uid);return r&&(this._layerInfosByLayerViewId[i.uid]=t),r}_isLayerUIDMatching(t,i){return t&&(t.uid===i||this._hasLayerUID(t.layers,i))}_hasLayerUID(t,i){return t&&t.some(r=>this._isLayerUIDMatching(r,i))}_isLayerViewSupported(t){return!!KHe.has(t.layer.declaredClass)&&(this._layerViewByLayerId[t.layer.uid]=t,!0)}_generateActiveLayerInfo(t){this._isLayerActive(t)?this._buildActiveLayerInfo(t):(this.removeHandles(t.uid),this.addHandles(me(()=>{var i;return[t.legendEnabled,(i=t.layer)==null?void 0:i.legendEnabled]},()=>this._layerActiveHandle(t)),t.uid))}_layerActiveHandle(t){this._isLayerActive(t)&&(this.removeHandles(t.uid),this._buildActiveLayerInfo(t))}_isLayerActive(t){var i;return!this.respectLayerVisibility||t.legendEnabled&&((i=t.layer)==null?void 0:i.legendEnabled)}_buildActiveLayerInfo(t){var f;const i=t.layer,r=t.uid,n=this._layerInfosByLayerViewId[r];let o=this._activeLayerInfosByLayerViewId[r];if(!o){const g=(n==null?void 0:n.title)!==void 0&&n.layer.uid===i.uid;o=new kpe({layer:i,layerView:t,title:g?n.title:i.title,view:this.view??void 0,respectLayerDefinitionExpression:this.respectLayerDefinitionExpression,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:(n==null?void 0:n.sublayerIds)||[]}),this._activeLayerInfosByLayerViewId[r]=o}const u=i.parent&&"uid"in i.parent?this._layerViewByLayerId[(f=i.parent)==null?void 0:f.uid]:null;if(o.parent=this._activeLayerInfosByLayerViewId[u==null?void 0:u.uid],!this.hasHandles(r)){const g=[me(()=>i.title,b=>this._titleHandle(b,o)),me(()=>[i.opacity,"renderer"in i&&i.renderer,"pointSymbol"in i&&i.pointSymbol,"lineSymbol"in i&&i.lineSymbol,"polygonSymbol"in i&&i.polygonSymbol],()=>this._constructLegendElements(o)),rn(()=>{var b;return((b=this.view)==null?void 0:b.stationary)===!0},()=>this._scaleHandle(o),Je),me(()=>t.layer?ZJ(t.layer,t.view):null,()=>this._constructLegendElements(o)),me(()=>t.updating,()=>{t.layer!=null&&ZJ(t.layer,t.view)!=null&&this._constructLegendElements(o)}),me(()=>"effect"in i&&i.effect,()=>this._constructLegendElements(o)),rn(()=>{var b;return(b=this.view)==null?void 0:b.timeZone},()=>this._constructLegendElements(o),Je)];if(this.respectLayerVisibility){const b=me(()=>t.legendEnabled,I=>this._legendEnabledHandle(I,o)),E=me(()=>i.legendEnabled,I=>this._legendEnabledHandle(I,o));g.push(b,E)}if(this.respectLayerDefinitionExpression&&"definitionExpression"in i){const b=me(()=>[i.definitionExpression,this.respectLayerDefinitionExpression],()=>{o.respectLayerDefinitionExpression=this.respectLayerDefinitionExpression,this._constructLegendElements(o)});g.push(b)}this.addHandles(g,r)}o.isScaleDriven||this._constructLegendElements(o),this._addActiveLayerInfo(o)}_titleHandle(t,i){i.title=t,this._constructLegendElements(i)}_legendEnabledHandle(t,i){t?this._addActiveLayerInfo(i):this._removeActiveLayerInfo(i)}_scaleHandle(t){(t.isScaleDriven||t.hideLayersNotInCurrentView)&&this._constructLegendElements(t)}_addActiveLayerInfo(t){var n;const{layerView:i,layer:r}=t;if(this._isLayerActive(i)&&!this.activeLayerInfos.includes(t)){const o=t.parent;if(o)o.children.includes(t)||o.children.push(t),this._sortActiveLayerInfos(o.children);else{const u=(n=this.layerInfos)==null?void 0:n.some(g=>g.layer.uid===r.uid),f=r.parent;f&&"uid"in f&&this._layerViewByLayerId[f.uid]&&!u?this._activeLayerInfosWithNoParent.add(t):(this.activeLayerInfos.add(t),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const u=[];this._activeLayerInfosWithNoParent.forEach(f=>{const g=f.layer.parent,b=g&&"uid"in g?this._layerViewByLayerId[g==null?void 0:g.uid]:null,E=this._activeLayerInfosByLayerViewId[b==null?void 0:b.uid];E&&(u.push(f),f.parent=E)}),u.length&&(this._activeLayerInfosWithNoParent.removeMany(u),u.forEach(f=>this._addActiveLayerInfo(f)))}}}_removeActiveLayerInfo(t){const i=t.parent;i?i.children.remove(t):this.activeLayerInfos.remove(t)}_constructLegendElements(t){const i=t.layer;"featureCollections"in i&&i.featureCollections?t.buildLegendElementsForFeatureCollections(i.featureCollections):"featureReduction"in i&&i.featureReduction&&"renderer"in i.featureReduction&&(i.featureReduction.type==="binning"||i.featureReduction.type==="cluster")&&(!this.view||i.featureReduction.maxScale<=this.view.scale)?t.buildLegendElementsForFeatureReduction(i.featureReduction):"renderer"in i&&i.renderer&&!("sublayers"in i)?t.buildLegendElementsForRenderer(i.renderer):"url"in i&&i.url&&i.type!=="catalog"&&i.type!=="knowledge-graph"?t.buildLegendElementsForTools():t.children.forEach(r=>this._constructLegendElements(r))}};m([w({type:Lpe})],na.prototype,"activeLayerInfos",void 0),m([w()],na.prototype,"basemapLegendVisible",void 0),m([w()],na.prototype,"groundLegendVisible",void 0),m([w()],na.prototype,"hideLayersNotInCurrentView",void 0),m([w()],na.prototype,"keepCacheOnDestroy",void 0),m([w()],na.prototype,"respectLayerDefinitionExpression",void 0),m([w()],na.prototype,"respectLayerVisibility",void 0),m([w()],na.prototype,"layerInfos",void 0),m([w({readOnly:!0})],na.prototype,"state",null),m([w()],na.prototype,"view",void 0),na=m([H("esri.widgets.Legend.LegendViewModel")],na);const XHe=na,ti="esri-legend--card",e1="esri-legend",rt={activated:`${ti}__carousel-indicator--activated`,base:ti,stacked:`${e1}--stacked`,carouselTitle:`${ti}__carousel-title`,indicator:`${ti}__carousel-indicator`,intervalSeparator:`${ti}__interval-separator`,imageryLayerStretchedImage:`${ti}__imagery-layer-image--stretched`,imageLabel:`${ti}__image-label`,layerCaption:`${ti}__layer-caption`,labelElement:`${ti}__label-element`,layerRow:`${ti}__layer-row`,labelCell:`${ti}__label-cell`,message:`${ti}__message`,rampLabel:`${ti}__ramp-label`,section:`${ti}__section`,relationshipSection:`${ti}__relationship-section`,serviceCaptionText:`${ti}__service-caption-text`,serviceContent:`${ti}__service-content`,service:`${ti}__service`,groupLayer:`${ti}__group-layer`,groupLayerChild:`${ti}__group-layer-child`,symbol:`${ti}__symbol`,sizeRampRow:`${ti}__size-ramp-row`,symbolRow:`${ti}__symbol-row`,symbolCell:`${ti}__symbol-cell`,indicatorContainer:`${ti}__carousel-indicator-container`,intervalSeparatorsContainer:`${ti}__interval-separators-container`,relationshipLabelContainer:`${ti}__relationship-label-container`,labelContainer:`${ti}__label-container`,serviceCaptionContainer:`${ti}__service-caption-container`,symbolContainer:`${ti}__symbol-container`,sizeRampContainer:`${ti}__size-ramp-container`,sizeRampPreview:`${ti}__size-ramp-preview`,pieChartRampPreview:`${ti}__pie-chart-ramp-preview`,rampContainer:`${e1}__ramps`,sizeRampHorizontal:`${e1}__size-ramp--horizontal`,rampLabelsContainer:`${e1}__ramp-labels`,layerInfo:`${e1}__layer-cell ${e1}__layer-cell--info`,univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card"},QHe=fI(),Npe=10,cj=20,i$=10,hj=20,dj={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};function eWe(e="vertical"){const t="stroke:rgb(200, 200, 200);stroke-width:1";return e==="vertical"?G("svg",{height:"4",width:"10"},G("line",{style:t,x1:"0",x2:"10",y1:"2",y2:"2"})):G("svg",{height:"10",width:"10"},G("line",{style:t,x1:"5",x2:"5",y1:"0",y2:"10"}))}function tWe(e,t="vertical"){const i=document.createElement("div");return i.style.height=`${cj}px`,i.className=dj.univariateAboveAndBelowSymbol,e!=null&&(i.style.opacity=e.toString()),QHe.append(i,eWe.bind(null,t)),i}function Fpe(e,t,i="vertical",r){e.infos.forEach((n,o)=>{if(r&&o===2)n.preview=tWe(t,i);else{const u=hr(n.size)+(i==="horizontal"?hj:i$),f=n.preview,g=(f==null?void 0:f.tagName.toLowerCase())==="div",b=g?f:document.createElement("div");b.className=dj.univariateAboveAndBelowSymbol,i==="horizontal"?b.style.width=`${u}px`:b.style.height=`${u}px`,!g&&f&&b.appendChild(f),n.preview=b}})}function XI(e,t="classic"){const i=e.infos;return t==="classic"?(hr(i[0].size)+i$)/2:(hr(i[0].size)-hr(i[i.length-1].size))/2}function wv(e,t){if(!e)return null;const i=e.infos.map(n=>n.color),r=G0(t.type==="full"?i:t.type==="above"?i.slice(0,3):i.slice(2,5),{width:t.width,height:t.height,align:t.rampAlignment,effectList:t.effectList,ariaLabel:t.ariaLabel});return r.className=dj.colorRamp,t.opacity!=null&&(r.style.opacity=t.opacity.toString()),r}function FR(e,t,i,r="vertical"){let n=0;const o=e.infos,u=Math.floor(o.length/2),f=t==="full"||t==="above"?0:u,g=t==="full"||t==="below"?o.length-1:u;for(let b=f;b<=g;b++)i&&b===u?n+=r==="horizontal"?Npe:cj:n+=hr(o[b].size)+(r==="horizontal"?hj:i$);return Math.round(n)}function bv(e,t,i,r="vertical"){const n=FR(e,t,i,r),o=e.infos,u=Math.floor(o.length/2),f=t==="full"||t==="above"?0:u,g=t==="full"||t==="below"?o.length-1:u,b=t==="full"?o[f].size+o[g].size:t==="above"?o[f].size:o[g].size,E=i?r==="vertical"?cj:Npe:0,I=r==="vertical"?i$*(t==="full"?2:1):hj*(t==="full"?2:1);return Math.round(n-(hr(b)/2+E/2+I/2))}function Dpe(e,t,i="vertical"){const r=e.infos;let n=r.find(({type:u})=>u==="size-ramp"),o=r.find(({type:u})=>u==="color-ramp");return n&&(n={...n},n.infos=[...n.infos],Fpe(n,t,i,!0)),o&&(o={...o},o.infos=[...o.infos]),i==="horizontal"&&(n==null||n.infos.reverse(),o==null||o.infos.reverse()),{sizeRampElement:n,colorRampElement:o}}function jpe(e,t="vertical"){const i=e.infos;let r=i.find(({type:o})=>o==="size-ramp"),n=i.find(({type:o})=>o==="color-ramp");return r&&(r={...r},r.infos=[...r.infos],Fpe(r,null,t,!1)),n&&(n={...n},n.infos=[...n.infos]),t==="horizontal"&&(r==null||r.infos.reverse(),n==null||n.infos.reverse()),{sizeRampElement:r,colorRampElement:n}}function iWe(e,t){return t}function dn(e){const t=this;e.appendChild(t)}function qp(e,t,i){if(!t)return;if(typeof t=="number")return t;if(typeof t=="string")return kve(t);if("value"in t||"unit"in t)return Rn(e.dotValue,t);if("colorName"in t&&"bandName"in t)return e[t.colorName]+": "+(e[t.bandName]||t.bandName);if("showCount"in t)return t.showCount?e.clusterCountTitle:void 0;let r=null;return iWe(t,i)?r=t.ratioPercentTotal?"showRatioPercentTotal":t.ratioPercent?"showRatioPercent":t.ratio?"showRatio":t.normField?"showNormField":t.field?"showField":null:zpe(t,i)&&(r=t.normField?"showNormField":t.normByPct?"showNormPct":t.field?"showField":null),r?Rn(r==="showField"?"{field}":e[r],{field:t.field,normField:t.normField}):void 0}function zpe(e,t){return!t}function Vpe(e,t){return!!(t&&t==="Stretched"&&e.version>=10.3&&e.declaredClass==="esri.layers.ImageryLayer")}function Upe(e,t){var i;return e.label?t[e.label]+": "+(typeof e.value=="string"?e.value:as(e.value??0,{style:"decimal",notation:(i=e.value)!=null&&i.toString().toLowerCase().includes("e")?"scientific":"standard"})):""}const rWe=25,nWe=25,sWe=768,oWe=100,aWe="#ddd",t1=window.devicePixelRatio;function lWe(e){var t,i;if(e){if(e.type.includes("3d")){const r=(t=e.symbolLayers)==null?void 0:t.length;if(!r)return;const n=e.symbolLayers.at(r-1),o=(i=n.resource)==null?void 0:i.primitive;return o==="circle"||o==="cross"||o==="kite"||o==="sphere"||o==="cube"||o==="diamond"}{const r=e.style;return r==="circle"||r==="diamond"||r==="cross"}}}function uWe(e){var t;if(e){if(e.type.includes("3d")){const i=(t=e.symbolLayers)==null?void 0:t.length;if(!i)return;const r=e.symbolLayers.at(i-1).get("resource.primitive");return r==="triangle"||r==="cone"||r==="tetrahedron"}return e.style==="triangle"}}let Jl=class extends bi{constructor(t,i){super(t,i),this._hasIndicators=!1,this._selectedSectionName=null,this._sectionNames=[],this._sectionMap=new Map,this.activeLayerInfos=null,this.headingLevel=3,this.layout="stack",this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}initialize(){this.addHandles(me(()=>this.activeLayerInfos,t=>{this.removeAllHandles(),this._watchForSectionChanges(t)}))}render(){const{view:t}=this;this._hasIndicators=this.layout==="auto"&&t&&t.container.clientWidth<=sWe||this.layout==="stack";const i=this.activeLayerInfos,r=i==null?void 0:i.toArray().map(b=>this._renderLegendForLayer(b)).filter(b=>!!b);this._hasIndicators?this._selectedSectionName&&this._sectionNames.includes(this._selectedSectionName)||(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;const n=this._sectionNames.length,o=this._sectionNames.map((b,E)=>{const I=Rn(this.messagesCommon.pagination.pageText,{index:E+1,total:n});return G("div",{"aria-controls":`${b}-panel`,"aria-label":I,"aria-selected":(this._selectedSectionName===b).toString(),bind:this,class:this.classes(rt.indicator,{[rt.activated]:this._selectedSectionName===b}),"data-section-name":b,id:b,key:b,onclick:this._selectSection,onkeydown:this._focusSection,role:"tab",tabIndex:this._selectedSectionName===b?0:-1,title:I})}),u=this._hasIndicators&&n>1?G("div",{class:rt.indicatorContainer,key:"carousel-navigation",role:"tablist"},o):null,f=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):r!=null&&r.length?r:null,g={[rt.stacked]:this._hasIndicators};return G("div",{class:this.classes(rt.base,g)},f||G("div",{class:rt.message},this.messages.noLegend),u)}_selectSection(t){const i=t.target.getAttribute("data-section-name");i&&(this._selectedSectionName=i)}_focusSection(t){switch(t.key){case"ArrowLeft":case"ArrowRight":this._switchSectionOnArrowPress(t);break;case"Enter":case" ":this._selectSection(t)}}_switchSectionOnArrowPress(t){const i=t.key,r=i==="ArrowLeft"?-1:1,n=t.target.getAttribute("data-section-name"),o=this._sectionNames.indexOf(n),u=this._sectionNames;let f=null;o!==-1&&(u[o+r]?f=document.getElementById(u[o+r]):i==="ArrowLeft"?f=document.getElementById(u[u.length-1]):i==="ArrowRight"&&(f=document.getElementById(u[0])),f==null||f.focus())}_watchForSectionChanges(t){if(this._generateSectionNames(),t){t.forEach(r=>{const n=`activeLayerInfo-${r.layer.uid}-version-change`;this.removeHandles(n),this._watchForSectionChanges(r.children),this.addHandles(me(()=>r.version,()=>this._generateSectionNames()),n)});const i="activeLayerInfos-collection-change";this.removeHandles(i),this.addHandles(t.on("change",()=>this._watchForSectionChanges(t)),i)}}_generateSectionNames(){this._sectionNames.length=0,this._selectedSectionName=null,this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this)}_getSectionName(t,i,r){return`${this.id}${t.uid}-type-${i.type}-${r}`}_generateSectionNamesForActiveLayerInfo(t){t.children.forEach(this._generateSectionNamesForActiveLayerInfo,this),t.legendElements&&t.legendElements.forEach((i,r)=>{this._sectionNames.push(this._getSectionName(t.layer,i,r))})}_renderLegendForLayer(t){if(!t.ready)return null;if(t.children.length){const i=t.children.map(r=>this._renderLegendForLayer(r)).toArray();return G("div",{class:this.classes(rt.service,rt.groupLayer),key:t.layer.uid},G("div",{class:rt.serviceCaptionContainer},t.title),i)}{const i=t.legendElements;if(i&&!i.length)return null;const r=i.some(u=>u.type==="relationship-ramp"),n=i.map((u,f)=>this._renderLegendForElement(u,t,f,r)).filter(u=>!!u);if(!n.length)return null;const o={[rt.groupLayerChild]:!!t.parent};return G("div",{class:this.classes(rt.service,o),key:t.layer.uid},G("div",{class:rt.serviceCaptionContainer},G("div",{class:rt.serviceCaptionText},t.title)),G("div",{class:rt.serviceContent},n))}}_renderLegendForElement(t,i,r,n=!1,o=!1){var P;const u=t.type==="color-ramp",f=t.type==="opacity-ramp",g=i.layer;let b=null;if(typeof t.title=="string")b=t.title;else if(t.title){const D=t.title,j=qp(this.messages,D,u||f);b=D.title?`${D.title} (${j})`:j}const E=this._getSectionName(g,t,r),I=this._hasIndicators&&!o?G("div",null,G(Ay,{class:rt.carouselTitle,level:this.headingLevel},i.title),G(Ay,{class:rt.layerCaption,level:bOe(this.headingLevel)},b)):b?G(Ay,{class:rt.layerCaption,level:this.headingLevel},b):null,M=i.effectList;let k=null;switch(t.type){case"symbol-table":{const D=t.infos.map((j,z)=>this._renderLegendForElementInfo(j,i,t.legendType,z)).filter(j=>!!j);if(D.length){const j=(P=D[0].properties.classes)==null?void 0:P[rt.symbolRow],z={[rt.labelContainer]:!j&&!n,[rt.relationshipLabelContainer]:n};k=G("div",{class:this.classes(z)},D)}break}case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":k=this._renderLegendForRamp(t,g.opacity,M);break;case"size-ramp":k=this._renderSizeRamp(t,g.opacity);break;case"pie-chart-ramp":k=this._renderPieChartRamp(t);break;case"relationship-ramp":k=gde(t,this.id,{opacity:g.opacity,effectList:M,ariaLabel:this.messages.previewRelationshipRampAriaLabel});break;case"univariate-above-and-below-ramp":k=this._renderUnivariateAboveAndBelowRamp(t,g.opacity,M);break;case"univariate-color-size-ramp":k=this._renderUnivariateColorSizeRamp(t,g.opacity,M)}if(!k)return null;const L=G("div",{"aria-labelledby":E,class:rt.section,id:`${E}-panel`,key:E,role:"tabpanel",tabIndex:0},[I,k]);return o||this._sectionMap.set(E,L),L}_renderPieChartRamp(t){return G("div",{afterCreate:dn,bind:t.preview,class:rt.pieChartRampPreview})}_renderUnivariateAboveAndBelowRamp(t,i,r){var Q;const{sizeRampElement:n,colorRampElement:o}=Dpe(t,i,"horizontal");if(!n)return null;const u=FR(n,"full",!0,"horizontal"),f=bv(n,"above",!0,"horizontal"),g=bv(n,"below",!0,"horizontal"),b=12,E=(Q=this.messages)==null?void 0:Q.previewColorRampAriaLabel,I=wv(o,{width:f,height:b,rampAlignment:"horizontal",opacity:i,type:"above",effectList:r,ariaLabel:E}),M=wv(o,{width:g,height:b,rampAlignment:"horizontal",opacity:i,type:"below",effectList:r,ariaLabel:E}),k=XI(n,"card"),L=n.infos.map(Z=>Z.label),P=L.length-1,D=L.map((Z,ee)=>ee===0||ee===P?G("div",{key:ee},Z):null),j={display:"flex",flexDirection:"column"},z={display:"flex",flexDirection:"row"},V={marginTop:"3px",display:"flex"};ha(this.container)?V.marginRight=`${k}px`:V.marginLeft=`${k}px`;const W={width:`${u}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return G("div",{class:rt.layerRow,key:"size-ramp-preview",styles:j},G("div",{class:this.classes(rt.symbolContainer,rt.sizeRampHorizontal),styles:z},n.infos.map((Z,ee)=>G("div",{afterCreate:dn,bind:Z.preview,class:rt.symbol,key:ee}))),I?G("div",{class:rt.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:V},G("div",{afterCreate:dn,bind:I}),G("div",{afterCreate:dn,bind:M})):null,G("div",{class:rt.layerInfo},G("div",{class:rt.rampLabelsContainer,styles:W},D)))}_renderUnivariateColorSizeRamp(t,i,r){var D;const{sizeRampElement:n,colorRampElement:o}=jpe(t,"horizontal");if(!n)return null;const u=FR(n,"full",!1,"horizontal"),f=bv(n,"full",!1,"horizontal"),g=wv(o,{width:f,height:12,rampAlignment:"horizontal",opacity:i,type:"full",effectList:r,ariaLabel:(D=this.messages)==null?void 0:D.previewColorRampAriaLabel}),b=XI(n,"card"),E=n.infos.length-1,I=n.infos.map((j,z)=>z===0||z===E?G("div",{key:z},j.label):null),M={display:"flex",flexDirection:"column"},k={display:"flex",flexDirection:"row"},L={marginTop:"3px",display:"flex"};ha(this.container)?L.marginRight=`${b}px`:L.marginLeft=`${b}px`;const P={width:`${u}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return G("div",{class:rt.layerRow,key:"size-ramp-preview",styles:M},G("div",{class:this.classes(rt.symbolContainer,rt.sizeRampHorizontal),styles:k},n.infos.map((j,z)=>G("div",{afterCreate:dn,bind:j.preview,class:rt.symbol,key:z}))),G("div",{class:rt.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:L},G("div",{afterCreate:dn,bind:g})),G("div",{class:rt.layerInfo},G("div",{class:rt.rampLabelsContainer,styles:P},I)))}_renderLegendForElementInfo(t,i,r,n){var g,b,E,I,M;const o=i.layer;if(t.type)return this._renderLegendForElement(t,i,n,!1,!0);const u=Vpe(o,r),f=qp(this.messages,t.label,!1)??"";if(t.preview){if(!((g=t.symbol)!=null&&g.type.includes("simple-fill"))){if(!t.label)return G("div",{afterCreate:dn,bind:t.preview,key:n});const le={[rt.symbolCell]:this._hasIndicators};return G("div",{class:this.classes(rt.layerRow,{[rt.symbolRow]:this._hasIndicators}),key:n},G("div",{afterCreate:dn,bind:t.preview,class:this.classes(le)}),G("div",{class:this.classes(rt.imageLabel,{[rt.labelCell]:this._hasIndicators})},f))}let k=255,L=255,P=255,D=0,j=255,z=255,V=255,W=0;const Q=(b=t.symbol.color)==null?void 0:b.a,Z=(I=(E=t.symbol.outline)==null?void 0:E.color)==null?void 0:I.a;Q&&(k=t.symbol.color.r,L=t.symbol.color.g,P=t.symbol.color.b,D=t.symbol.color.a*o.opacity),Z&&(j=t.symbol.outline.color.r,z=t.symbol.outline.color.g,V=t.symbol.outline.color.b,W=t.symbol.outline.color.a*o.opacity);const ee=((M=t.symbol.color)==null?void 0:M.isBright)??!0,ie=ee?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)",oe={background:Q?`rgba(${k}, ${L}, ${P}, ${D})`:"none",color:ee?"black":"white",textShadow:`-1px -1px 0 ${ie},
                                              1px -1px 0 ${ie},
                                              -1px 1px 0 ${ie},
                                              1px 1px 0 ${ie}`,border:Z?`1px solid rgba(${j}, ${z}, ${V}, ${W})`:"none",filter:P_(i.effectList)??void 0};return G("div",{class:rt.layerRow,key:n},G("div",{class:rt.labelElement,styles:oe},f))}if(t.src){const k=this._renderImage(t,o,u);return G("div",{class:rt.layerRow,key:n},k,G("div",{class:rt.imageLabel},f))}}_renderImage(t,i,r){const{label:n,src:o,opacity:u}=t,f={[rt.imageryLayerStretchedImage]:r,[rt.symbol]:!r},g={opacity:`${u??i.opacity}`};return G("img",{alt:qp(this.messages,n,!1),"aria-label":qp(this.messages,n,!1),border:0,class:this.classes(f),height:t.height,src:o,styles:g,width:t.width})}_renderSizeRampLines(t){const i=t.infos,r=i[0],n=i[i.length-1],o=r.symbol,u=this._hasIndicators,f=hr(r.size+r.outlineSize)*t1,g=hr(n.size+n.outlineSize)*t1,b=u?f:f+50*t1,E=u?f/2+50*t1:f,I=uWe(o),M=lWe(o),k=document.createElement("canvas");k.width=b,k.height=E,k.style.width=k.width/t1+"px",k.style.height=k.height/t1+"px";const L=k.getContext("2d");if(u){L.beginPath();const P=0,D=0,j=b/2-g/2,z=E;L.moveTo(P,D),L.lineTo(j,z);const V=b,W=0,Q=b/2+g/2,Z=E;L.moveTo(V,W),L.lineTo(Q,Z)}else{L.beginPath();const P=0,D=E/2-g/2,j=b;L.moveTo(P,D),L.lineTo(j,0);const V=0,W=E/2+g/2,Q=b,Z=E;L.moveTo(V,W),L.lineTo(Q,Z)}return L.strokeStyle=aWe,L.stroke(),G("div",{afterCreate:dn,bind:k,styles:u?{display:"flex",marginTop:`-${I?0:M?f/2:0}px`,marginBottom:`-${I?g:M?g/2:0}px`}:{display:"flex",marginRight:`-${I?0:M?f/2:0}px`,marginLeft:`-${I?0:M?g/2:0}px`}})}_renderSizeRamp(t,i){const r=t.infos,n=r[0].label,o=r[r.length-1].label;let u=r[0].preview,f=r[r.length-1].preview;const g=this._hasIndicators,b={"flex-direction":g?"column":"row-reverse"};u&&(u=u.cloneNode(!0),u.style.display="flex"),f&&(f=f.cloneNode(!0),f.style.display="flex");const E={opacity:i!=null?`${i}`:""};return G("div",{class:this.classes(rt.layerRow,{[rt.sizeRampRow]:g})},G("div",{class:rt.rampLabel},g?n:o),G("div",{class:rt.sizeRampContainer,styles:b},G("div",{afterCreate:dn,bind:u,class:rt.sizeRampPreview,styles:E}),this._renderSizeRampLines(t),G("div",{afterCreate:dn,bind:f,class:rt.sizeRampContainer,styles:E})),G("div",{class:rt.rampLabel},g?o:n))}_getRampStopLabel(t,i){switch(i){case"heatmap-ramp":return this.messages[t.label];case"stretch-ramp":return Upe(t,this.messages);default:return t.label}}_renderLegendForRamp(t,i,r){const n=t.infos,o=t.type,u=o==="heatmap-ramp",f=n.length-1,g=nWe,b=f>2&&!u?rWe*f:oWe,E=b+20,I=10,M=n.slice().reverse(),k=M.length-1,L=M.length%2!=0?M[M.length/2|0]:null,P=L&&G("div",{class:rt.intervalSeparatorsContainer},G("div",{class:rt.intervalSeparator},"|"),G("div",{class:rt.rampLabel},this._getRampStopLabel(L,o))),D=[[{shape:{type:"path",path:`M0 ${g/2} L${I} 0 L${I} ${g} Z`},fill:M[0].color,stroke:{width:0}},{shape:{type:"rect",x:I,y:0,width:b,height:g},fill:{type:"linear",x1:I,y1:0,x2:b+I,y2:0,colors:M.map((W,Q)=>({color:W.color,offset:u&&"ratio"in W?W.ratio:Q/f}))},stroke:{width:0}},{shape:{type:"path",path:`M${b+I} 0 L${E} ${g/2} L${b+I} ${g} Z`},fill:M[k].color,stroke:{width:0}}]],j=yde(D,E,g),z={filter:P_(r)??void 0,opacity:i==null?void 0:`${i}`},V={justifyContent:"center"};return G("div",{class:rt.layerRow,styles:V},G("div",{class:rt.rampLabel},this._getRampStopLabel(M[0],o)),G("div",{class:rt.symbolContainer},G("div",{styles:z},j),P),G("div",{class:rt.rampLabel},this._getRampStopLabel(M[k],o)))}};m([w()],Jl.prototype,"activeLayerInfos",void 0),m([w()],Jl.prototype,"headingLevel",void 0),m([w()],Jl.prototype,"layout",void 0),m([w(),Xt("esri/widgets/Legend/t9n/Legend")],Jl.prototype,"messages",void 0),m([w(),Xt("esri/t9n/common")],Jl.prototype,"messagesCommon",void 0),m([w({readOnly:!0})],Jl.prototype,"type",void 0),m([w()],Jl.prototype,"view",void 0),m([RI()],Jl.prototype,"_selectSection",null),Jl=m([H("esri.widgets.Legend.styles.Card")],Jl);const H7=Jl,ai="esri-legend",ft={service:`${ai}__service`,label:`${ai}__service-label`,layer:`${ai}__layer`,groupLayer:`${ai}__group-layer`,groupLayerChild:`${ai}__group-layer-child`,layerTable:`${ai}__layer-table`,layerTableSizeRamp:`${ai}__layer-table--size-ramp`,layerChildTable:`${ai}__layer-child-table`,layerCaption:`${ai}__layer-caption`,layerBody:`${ai}__layer-body`,layerRow:`${ai}__layer-row`,layerCell:`${ai}__layer-cell`,layerInfo:`${ai}__layer-cell ${ai}__layer-cell--info`,imageryLayerStretchedImage:`${ai}__imagery-layer-image--stretched`,imageryLayerCellStretched:`${ai}__imagery-layer-cell--stretched`,imageryLayerInfoStretched:`${ai}__imagery-layer-info--stretched`,symbolContainer:`${ai}__layer-cell ${ai}__layer-cell--symbols`,symbol:`${ai}__symbol`,rampContainer:`${ai}__ramps`,sizeRamp:`${ai}__size-ramp`,colorRamp:`${ai}__color-ramp`,opacityRamp:`${ai}__opacity-ramp`,borderlessRamp:`${ai}__borderless-ramp`,rampTick:`${ai}__ramp-tick`,rampFirstTick:`${ai}__ramp-tick-first`,rampLastTick:`${ai}__ramp-tick-last`,rampLabelsContainer:`${ai}__ramp-labels`,rampLabel:`${ai}__ramp-label`,message:`${ai}__message`,univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label"},cWe=`${ai}__`,hWe=24,tK={display:"flex",alignItems:"flex-start"},W7={marginLeft:"3px"},i1={display:"table-cell",verticalAlign:"middle"};let J0=class extends bi{constructor(t,i){super(t,i),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){const t=this.activeLayerInfos,i=t==null?void 0:t.toArray().map(r=>this._renderLegendForLayer(r)).filter(r=>!!r);return G("div",null,i!=null&&i.length?i:G("div",{class:ft.message},this.messages.noLegend))}_renderLegendForLayer(t,i){if(!t.ready)return null;const r=!!t.children.length,n=`${t.layer.uid}-version-${t.version}`,o=`${cWe}${i?`${i}-`:""}${n}`,u=t.title?Ay({level:this.headingLevel,class:this.classes(Ge.heading,ft.label)},t.title):null;if(r){const f=t.children.map(g=>this._renderLegendForLayer(g,n)).toArray();return G("div",{class:this.classes(ft.service,ft.groupLayer),key:o},u,f)}{const f=t.legendElements;if(f&&!f.length)return null;const g=f.map(E=>this._renderLegendForElement(E,t.layer,t.effectList,o)).filter(E=>!!E);if(!g.length)return null;const b={[ft.groupLayerChild]:!!t.parent};return G("div",{class:this.classes(ft.service,b),key:o},u,G("div",{class:ft.layer},g))}}_renderLegendForElement(t,i,r,n,o){const u=t.type==="color-ramp",f=t.type==="opacity-ramp",g=t.type==="size-ramp";let b=null;const E=`${n}-${t.type}`;if(t.type==="symbol-table"||g){const D=t.infos.map(j=>this._renderLegendForElementInfo(j,i,r,g,t.legendType,E)).filter(j=>!!j);D.length&&(b=G("div",{class:ft.layerBody},D))}else t.type==="color-ramp"||t.type==="opacity-ramp"||t.type==="heatmap-ramp"||t.type==="stretch-ramp"?b=this._renderLegendForRamp(t,i.opacity,E):t.type==="relationship-ramp"?b=gde(t,this.id,{opacity:i.opacity,effectList:r,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:E}):t.type==="pie-chart-ramp"?b=this._renderPieChartRamp(t,E):t.type==="univariate-above-and-below-ramp"?b=this._renderUnivariateAboveAndBelowRamp(t,i.opacity,r,E):t.type==="univariate-color-size-ramp"&&(b=this._renderUnivariateColorSizeRamp(t,i.opacity,r,E));if(!b)return null;const I=t.title;let M=null;if(typeof I=="string")M=I;else if(I){const D=qp(this.messages,I,u||f);M=zpe(I,u||f)&&I.title?`${I.title} (${D})`:D}const k=o?ft.layerChildTable:ft.layerTable,L=M?G("div",{class:ft.layerCaption},M):null,P={[ft.layerTableSizeRamp]:g||!o};return G("div",{class:this.classes(k,P),key:`${n}-table`},L,b)}_renderPieChartRamp(t,i){return G("div",{afterCreate:dn,bind:t.preview,key:`${i}-preview`})}_renderUnivariateAboveAndBelowRamp(t,i,r,n){var ee;const{sizeRampElement:o,colorRampElement:u}=Dpe(t,i);if(!o)return null;const f=(ee=this.messages)==null?void 0:ee.previewColorRampAriaLabel,g=bv(o,"above",!0),b=bv(o,"below",!0),E=12,I=wv(u,{width:E,height:g,rampAlignment:"vertical",opacity:i,type:"above",effectList:r,ariaLabel:f}),M=wv(u,{width:E,height:b,rampAlignment:"vertical",opacity:i,type:"below",effectList:r,ariaLabel:f}),k=XI(o),L=o.infos.map(ie=>ie.label),P=L.map((ie,oe)=>oe===0?G("div",{class:ie?I?ft.univariateAboveAndBelowLabel:ft.rampLabel:void 0,key:`${n}-color-ramp-above-label-${ie??oe}`},ie):oe===2?G("div",null):null),D=L.length-1,j=Math.floor(L.length/2),z=L.map((ie,oe)=>oe===j||oe===D?G("div",{class:ie?I?ft.univariateAboveAndBelowLabel:ft.rampLabel:void 0,key:`${n}-color-ramp-below-label-${ie??oe}`},ie):null),V={display:"table-cell",verticalAlign:"middle"},W={marginTop:`${k}px`},Q={height:`${g}px`},Z={height:`${b}px`};return G("div",{key:`${n}-container`,styles:tK},G("div",{class:ft.layerBody},o.infos.map((ie,oe)=>G("div",{class:this.classes(ft.layerRow,ft.sizeRamp),key:`${n}-row-${oe}`},G("div",{afterCreate:dn,bind:ie.preview,class:ft.symbol,styles:V}),I||oe%2!=0?null:G("div",{class:ft.layerInfo},L[oe])))),I?G("div",{styles:W},G("div",{styles:W7},G("div",{styles:i1},G("div",{afterCreate:dn,bind:I,class:ft.rampContainer})),G("div",{styles:i1},G("div",{class:ft.rampLabelsContainer,styles:Q},P))),G("div",{styles:W7},G("div",{styles:i1},G("div",{afterCreate:dn,bind:M,class:ft.rampContainer})),G("div",{styles:i1},G("div",{class:ft.rampLabelsContainer,styles:Z},z)))):null)}_renderUnivariateColorSizeRamp(t,i,r,n){var D;const{sizeRampElement:o,colorRampElement:u}=jpe(t);if(!o)return null;const f=XI(o),g=12,b=bv(o,"full",!1),E=wv(u,{width:g,height:b,rampAlignment:"vertical",opacity:i,type:"full",effectList:r,ariaLabel:(D=this.messages)==null?void 0:D.previewColorRampAriaLabel}),I=o.infos.length-1,M=o.infos.map((j,z)=>z===0||z===I?G("div",{class:j.label?u?ft.univariateAboveAndBelowLabel:ft.rampLabel:void 0,key:`${n}-color-ramp-label-${j.label??z}`},j.label):null),k={display:"table-cell",verticalAlign:"middle"},L={marginTop:`${f}px`},P={height:`${b}px`};return G("div",{key:`${n}-container`,styles:tK},G("div",{class:ft.layerBody},o.infos.map((j,z)=>G("div",{class:this.classes(ft.layerRow,ft.sizeRamp),key:`${n}-row-${z}`},G("div",{afterCreate:dn,bind:j.preview,class:ft.symbol,styles:k})))),G("div",{styles:L},G("div",{styles:W7},G("div",{styles:i1},G("div",{afterCreate:dn,bind:E,class:ft.rampContainer})),G("div",{styles:i1},G("div",{class:ft.rampLabelsContainer,styles:P},M)))))}_renderLegendForRamp(t,i,r){const n=t.infos,o=t.type==="opacity-ramp",u=t.type==="heatmap-ramp",f=t.type==="stretch-ramp",g=t.preview,b=o?ft.opacityRamp:"";g.className=`${ft.colorRamp} ${b}`,i!=null&&(g.style.opacity=i.toString());const E=n.map((k,L)=>G("div",{class:k.label?ft.rampLabel:void 0,key:`${r}-stop-${k.label??L}-label`},u?this.messages[k.label]||k.label:f?Upe(k,this.messages):k.label)),I={width:`${hWe}px`},M={height:g.style.height};return G("div",{class:ft.layerRow,key:`${r}-row`},G("div",{class:ft.symbolContainer,styles:I},G("div",{afterCreate:dn,bind:g,class:ft.rampContainer})),G("div",{class:ft.layerInfo},G("div",{class:ft.rampLabelsContainer,styles:M},E)))}_renderLegendForElementInfo(t,i,r,n,o,u){const f=`${u}-${t.label}`;if(t.type)return this._renderLegendForElement(t,i,r,f,!0);let g=null;const b=Vpe(i,o);if(t.preview?g=G("div",{afterCreate:dn,bind:t.preview,class:ft.symbol}):t.src&&(g=this._renderImage(t,i,b)),!g)return null;const E={[ft.imageryLayerInfoStretched]:b},I={[ft.imageryLayerInfoStretched]:b,[ft.sizeRamp]:!b&&n};return G("div",{class:ft.layerRow,key:`${f}-row`},G("div",{class:this.classes(ft.symbolContainer,I)},g),G("div",{class:this.classes(ft.layerInfo,E)},qp(this.messages,t.label,!1)||""))}_renderImage(t,i,r){const{label:n,src:o,opacity:u}=t,f={[ft.imageryLayerStretchedImage]:r,[ft.symbol]:!r},g={opacity:`${u??i.opacity}`};return G("img",{alt:qp(this.messages,n,!1),"aria-label":qp(this.messages,n,!1),border:0,class:this.classes(f),height:t.height,src:o,styles:g,width:t.width})}};m([w()],J0.prototype,"activeLayerInfos",void 0),m([w()],J0.prototype,"headingLevel",void 0),m([w(),Xt("esri/widgets/Legend/t9n/Legend")],J0.prototype,"messages",void 0),m([w({readOnly:!0})],J0.prototype,"type",void 0),J0=m([H("esri.widgets.Legend.styles.Classic")],J0);const r1=J0,dWe={base:"esri-legend"};let hn=class extends bi{constructor(t,i){super(t,i),this.headingLevel=3,this.messages=null,this.style=new r1,this.viewModel=new XHe}initialize(){this.addHandles([Lr(()=>this.view,"resize",()=>this.scheduleRender()),Lr(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),me(()=>this.headingLevel,t=>{const{style:i}=this;i&&(i.headingLevel=t)}),me(()=>this.style,(t,i)=>{i&&t!==i&&i.destroy(),t&&(t.activeLayerInfos=this.activeLayerInfos,t.type==="card"&&(t.view=this.view),t.headingLevel=this.headingLevel)},Je)])}get activeLayerInfos(){return this.viewModel.activeLayerInfos}set activeLayerInfos(t){this.viewModel.activeLayerInfos=t}get basemapLegendVisible(){return this.viewModel.basemapLegendVisible}set basemapLegendVisible(t){this.viewModel.basemapLegendVisible=t}get groundLegendVisible(){return this.viewModel.groundLegendVisible}set groundLegendVisible(t){this.viewModel.groundLegendVisible=t}get hideLayersNotInCurrentView(){return this.viewModel.hideLayersNotInCurrentView}set hideLayersNotInCurrentView(t){this.viewModel.hideLayersNotInCurrentView=t}get keepCacheOnDestroy(){return this.viewModel.keepCacheOnDestroy}set keepCacheOnDestroy(t){this.viewModel.keepCacheOnDestroy=t}get respectLayerDefinitionExpression(){return this.viewModel.respectLayerDefinitionExpression}set respectLayerDefinitionExpression(t){this.viewModel.respectLayerDefinitionExpression=t}get respectLayerVisibility(){return this.viewModel.respectLayerVisibility}set respectLayerVisibility(t){this.viewModel.respectLayerVisibility=t}get icon(){return"legend"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(t){this.viewModel.layerInfos=t}castStyle(t){if(t instanceof H7||t instanceof r1)return t;if(typeof t=="string")return t==="card"?new H7:new r1;if(t&&typeof t.type=="string"){const i={...t};return delete i.type,new(t.type==="card"?H7:r1)(i)}return new r1}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){return G("div",{class:this.classes(dWe.base,Ge.widget,this.style instanceof r1?Ge.panel:null)},this.style.render())}_refreshActiveLayerInfos(t){t.forEach(i=>{this.removeHandles(`version_${i.layer.uid}`),this._renderOnActiveLayerInfoChange(i)}),this.scheduleRender()}_renderOnActiveLayerInfoChange(t){const i=me(()=>t.version,()=>this.scheduleRender());this.addHandles(i,`version_${t.layer.uid}`);const r=Lr(()=>t.children,"change",()=>t.children.forEach(n=>this._renderOnActiveLayerInfoChange(n)),Je);this.addHandles(r,`version_${t.layer.uid}`),t.children.forEach(n=>this._renderOnActiveLayerInfoChange(n))}};m([w()],hn.prototype,"activeLayerInfos",null),m([w()],hn.prototype,"basemapLegendVisible",null),m([w()],hn.prototype,"groundLegendVisible",null),m([w()],hn.prototype,"headingLevel",void 0),m([w()],hn.prototype,"hideLayersNotInCurrentView",null),m([w()],hn.prototype,"keepCacheOnDestroy",null),m([w()],hn.prototype,"respectLayerDefinitionExpression",null),m([w()],hn.prototype,"respectLayerVisibility",null),m([w()],hn.prototype,"icon",null),m([w()],hn.prototype,"label",null),m([w()],hn.prototype,"layerInfos",null),m([w(),Xt("esri/widgets/Legend/t9n/Legend")],hn.prototype,"messages",void 0),m([w()],hn.prototype,"style",void 0),m([St("style")],hn.prototype,"castStyle",null),m([w()],hn.prototype,"view",null),m([w()],hn.prototype,"viewModel",void 0),hn=m([H("esri.widgets.Legend")],hn);const Gpe=hn,pWe=Object.freeze(Object.defineProperty({__proto__:null,default:Gpe},Symbol.toStringTag,{value:"Module"})),Ba="esri-layer-list",$l=`${Ba}__item`,Lw={base:Ba,actionMenu:`${Ba}__action-menu`,actionGroup:`${Ba}__action-group`,filterNoResults:`${Ba}__filter-no-results`,item:$l,itemActive:`${$l}--active`,itemContent:`${$l}-content`,itemContentBottom:`${$l}-content-bottom`,itemMessage:`${$l}-message`,itemInvisible:`${$l}--invisible`,itemActionIcon:`${$l}-action-icon`,itemActionImage:`${$l}-action-image`,itemTemporaryIcon:`${$l}-temporary-icon`,itemTableIcon:`${$l}-table-icon`,itemCatalogIcon:`${$l}-catalog-icon`,statusIndicator:`${Ba}__status-indicator`,publishing:`${Ba}__publishing`,updating:`${Ba}__updating`,connectionStatus:`${Ba}__connection-status`,connectionStatusConnected:`${Ba}__connection-status--connected`,visibleToggle:`${Ba}__visible-toggle`,visibleIcon:`${Ba}__visible-icon`},Bpe={hide:"hide",hideChildren:"hide-children"},fWe=10,yWe=2;function mWe({exclusive:e,visible:t,visibilityAppearance:i}){const r=i==="checkbox";return t?e?"circle-f":r?"check-square-f":"view-visible":e?"circle":r?"square":"view-hide"}function gWe({connectionStatus:e,publishing:t}){return e?e==="connected"?"beacon":"offline":t?"square":"bullet-point"}function vWe(e){return(e==null?void 0:e.listMode)===Bpe.hideChildren}function QI(e){return(e==null?void 0:e.listMode)??void 0}function wWe(e){return e!=null&&"minScale"in e&&e.minScale!=null?e.minScale:void 0}function bWe(e){return e!=null&&"maxScale"in e&&e.maxScale!=null?e.maxScale:void 0}function _We(e){if(!e)return"inherited";const t=TWe(pj(e)?e.layer:e);return t!=null?t?"independent":"inherited":"visibilityMode"in e&&e.visibilityMode!=null?e.visibilityMode:"independent"}function qpe(e){if(e&&(!("type"in e)||e.type!=="wmts"))return"sublayers"in e?"sublayers":"layers"in e?"layers":void 0}function SWe(e){const t=(e!=null&&e.layer&&pj(e.layer)?e.layer.layer:void 0)??(e==null?void 0:e.layer);return!!t&&t.type!=="catalog"&&($We(t)??!0)}function xWe(e){return QI(e)!==Bpe.hide}function EWe(e,t){if(!e||t==null||isNaN(t))return!1;const i=wWe(e),r=bWe(e),n=i!=null&&!isNaN(i)&&i>0&&t>i,o=r!=null&&!isNaN(r)&&r>0&&t<r;return n||o}function Hpe(e,t){e==null||e.sort((i,r)=>{const n="uid"in i?t.indexOf(i.uid):-1,o="uid"in r?t.indexOf(r.uid):-1;return n>o?-1:n<o?1:0})}function IWe(e,t){const i=e==null?void 0:e.layer;if(!i)return;const r=qpe(i);if(!r)return;let n;r==="layers"&&"layers"in i?n=i.layers:r==="sublayers"&&"sublayers"in i&&(n=i.sublayers),Hpe(n,t)}function iK(e){const t=e==null?void 0:e.layer;return t&&"layers"in t?t.layers:null}function pj(e){return e!=null&&"layer"in e&&e.layer!=null}function TWe(e){const t=Wpe(e);return t!=null&&"supportsSublayerVisibility"in t?t.supportsSublayerVisibility:void 0}function $We(e){const t=Wpe(e);return t!=null&&"supportsDynamicLayers"in t?t.supportsDynamicLayers:void 0}function Wpe(e){return e&&"capabilities"in e&&e.capabilities!=null&&"exportMap"in e.capabilities?e.capabilities.exportMap:void 0}function ic(e){return e==null?void 0:e["data-item"]}function rK(e){return e==null?void 0:e.getAttribute("data-layer-type")}function MWe({children:e,error:t,incompatible:i}){return!!(e!=null&&e.filter(r=>!r.hidden).length)&&!t&&!i}function CWe(e){for(const t of e)for(const i of t)if(i.type==="button"||i.type==="toggle")return i}var DR;let bt=DR=class extends bi{constructor(e){super(e),this.dragEnabled=!1,this.listModeDisabled=!1,this.parent=null,this.parentTitles=null,this.viewModel=null,this._onActionMenuOpen=t=>{this.item.actionsOpen=t.target.open},this._setTooltipReference=t=>{var i;(i=this.onTooltipReferenceChange)==null||i.call(this,this.item.layer.uid,t)},this._removeTooltipReference=()=>{var t;(t=this.onTooltipReferenceChange)==null||t.call(this,this.item.layer.uid,null)}}loadDependencies(){return cs({"action-group":()=>ce(()=>import("./calcite-action-group-BStvxvBS.js"),__vite__mapDeps([250,246,247,238,205,248,242,249,240,243]),import.meta.url),"action-menu":()=>ce(()=>import("./calcite-action-menu-B4SGbHT0.js"),__vite__mapDeps([264,247,238,205,248,242,249,240,243]),import.meta.url),action:()=>ce(()=>import("./calcite-action-e0C_v5mP.js"),__vite__mapDeps([244,238,205]),import.meta.url),icon:()=>ce(()=>import("./calcite-icon-_vDov-sg.js"),[],import.meta.url),"list-item":()=>ce(()=>import("./calcite-list-item-DzQsSgvs.js"),__vite__mapDeps([237,235,234,238,205]),import.meta.url),list:()=>ce(()=>import("./calcite-list-BrvAaUx7.js"),__vite__mapDeps([233,234,235,205,236]),import.meta.url),notice:()=>ce(()=>import("./calcite-notice-kwETwl5K.js"),__vite__mapDeps([239,240]),import.meta.url)})}render(){var L,P;const e=this.parentTitles??[],{_title:t,item:i,activeItem:r,selectedDragItemLayerUid:n,selectionMode:o,selectedItems:u,messages:f,parent:g,css:b}=this,E="visibleAtCurrentTimeExtent"in i&&"layerInvisibleAtTime"in f&&!i.visibleAtCurrentTimeExtent?`${t} (${f.layerInvisibleAtTime})`:"visibleAtCurrentScale"in i&&"layerInvisibleAtScale"in f&&!i.visibleAtCurrentScale?`${t} (${f.layerInvisibleAtScale})`:t,I="parent"in i&&((P=(L=i.parent)==null?void 0:L.layer)==null?void 0:P.type)==="catalog",{layer:M}=i,k="visibleAtCurrentScale"in i&&!i.visibleAtCurrentScale||"visibleAtCurrentTimeExtent"in i&&!i.visibleAtCurrentTimeExtent;return G("calcite-list-item",{afterCreate:D=>this._focusSelectedDragEl(D,i),afterUpdate:D=>this._focusSelectedDragEl(D,i),class:this.classes(b.item,"itemActive"in b&&{[b.itemActive]:r===i}),"data-item":i,"data-layer-id":M.id,dragDisabled:!i.sortable||I,dragSelected:M.uid===n,id:M.uid,key:`list-item-${M.uid}`,label:t,metadata:{parentTitles:e,_title:t},open:"open"in i&&i.open,selected:o!=="none"&&u.includes(i),title:E,unavailable:k,value:M.uid,onCalciteListItemDragHandleChange:D=>this._handleCalciteListItemDragHandleChange(D,i),onCalciteListItemSelect:D=>"visible"in i&&this._handleCalciteListItemSelect(D,i,g),onCalciteListItemToggle:D=>"open"in i&&this._handleCalciteListItemToggle(D,i)},this._renderedCatalogFootprintIcon,this._renderedCatalogDynamicIcon,G("div",{class:this.classes(b.itemContent,"itemInvisible"in b&&{[b.itemInvisible]:k}),slot:"content"},t),this._renderedItemStatus,this._renderedItemToggle,this._renderedCatalogSelectNode,this._renderedItemTemporaryIcon,this._renderedChildList,this._renderedItemMessage,this._renderedPanel,this._renderedPanelAction,this._renderedActions)}get _title(){const{messages:e}=this;return this.item.title||("untitledTable"in e?e.untitledTable:e.untitledLayer)}get _renderedItemStatus(){const{item:e,parent:t,visibleElements:i,css:r}=this;if(!i.statusIndicators)return null;const{publishing:n}=e,o="updating"in e&&e.updating&&!t,u="connectionStatus"in e?e.connectionStatus:void 0,f=!!u;return G("calcite-icon",{class:this.classes(r.statusIndicator,{[r.publishing]:n},"updating"in r&&{[r.updating]:o},"connectionStatus"in r&&{[r.connectionStatus]:f},"connectionStatusConnected"in r&&{[r.connectionStatusConnected]:f&&u==="connected"}),icon:gWe({connectionStatus:u,publishing:n}),key:"layer-item-status",scale:"s",slot:"content-end"})}get _renderedItemTemporaryIcon(){const{item:e,visibleElements:t,css:i}=this,{layer:r}=e,n="temporaryLayerIndicators"in t&&t.temporaryLayerIndicators,o="temporaryTableIndicators"in t&&t.temporaryTableIndicators,u="persistenceEnabled"in r&&(yF(r)||!r.persistenceEnabled);return(n||o)&&u?G("calcite-icon",{class:i.itemTemporaryIcon,icon:"temporary",key:"temporary-icon",scale:"s",slot:"actions-start",title:this.messages.temporary}):null}get _renderedItemToggle(){const{item:e,parent:t,messages:i,visibilityAppearance:r,css:n}=this;if(!("visible"in e&&"layerVisibility"in i&&"visibleToggle"in n&&r))return null;const{visible:o}=e,u=t==null?void 0:t.visibilityMode;if(u==="inherited")return null;const f=mWe({visible:o,exclusive:u==="exclusive",visibilityAppearance:r}),g=r==="checkbox",b=i.layerVisibility;return G("calcite-action",{appearance:"transparent",class:n.visibleToggle,icon:g?f:void 0,key:"visibility-toggle",onclick:()=>this._toggleVisibility(e,t),scale:"s",slot:g?"actions-start":"actions-end",text:b,title:b},g?null:G("calcite-icon",{class:this.classes({[n.visibleIcon]:u!=="exclusive"&&o}),icon:f,scale:"s"}))}get _renderedPanel(){const{panel:e}=this.item;return!(e!=null&&e.open)||e.disabled||e.flowEnabled?null:G("div",{class:this.css.itemContentBottom,key:`content-panel-${e.uid}`,slot:"content-bottom"},e.render())}get _renderedPanelAction(){const{panel:e}=this.item;if(!(e!=null&&e.visible))return null;const{open:t,title:i,disabled:r}=e;return G("calcite-action",{active:t,appearance:"transparent",disabled:r,icon:nH(e),key:`action-${e.uid}`,onclick:()=>this._togglePanel(e),scale:"s",slot:"actions-end",text:i??"",title:i??void 0},this._renderFallbackIcon(e))}get _renderedActions(){switch(this._actionsCount){case 0:return null;case 1:return this._singleAction;default:return this._renderedActionMenu}}get _renderedActionMenu(){const{item:e,messagesCommon:t}=this,i=t.options;return G("calcite-action-menu",{appearance:"transparent",key:"item-action-menu",label:t.menu,open:e.actionsOpen,overlayPositioning:"fixed",placement:"bottom-end",scale:"s",slot:"actions-end",onCalciteActionMenuOpen:this._onActionMenuOpen},G("calcite-action",{appearance:"transparent",icon:"ellipsis",scale:"s",slot:"trigger",text:i,title:i}),this._renderedActionMenuContent)}get _renderedActionMenuContent(){return this._filteredSections.toArray().map(e=>G("calcite-action-group",{key:`action-section-${e.uid}`},e.toArray().map(t=>this._renderAction({action:t,textEnabled:!0}))))}get _renderedCatalogFootprintIcon(){var i;const{css:e}=this,t=((i=this.item.layer)==null?void 0:i.type)==="catalog-footprint";return"itemCatalogIcon"in e&&t?G("calcite-icon",{class:e.itemCatalogIcon,icon:"footprint",key:"footprint",scale:"s",slot:"content-start"}):null}get _renderedCatalogDynamicIcon(){var i;const{css:e}=this,t=((i=this.item.layer)==null?void 0:i.type)==="catalog-dynamic-group";return"itemCatalogIcon"in e&&t?G("calcite-icon",{class:e.itemCatalogIcon,icon:"catalog-dataset",key:"catalog-dataset",scale:"s",slot:"content-start"}):null}get _renderedCatalogSelectNode(){const{_title:e,item:t,visibleElements:i}=this;if(!("visible"in t))return;const{layer:r}=t,n=(r==null?void 0:r.type)==="catalog-dynamic-group";return"catalogLayerList"in i&&i.catalogLayerList&&n?G("calcite-action",{appearance:"transparent",disabled:!r.visible,icon:"chevron-right",iconFlipRtl:!0,onclick:()=>this._triggerOnCatalogOpen(t),scale:"s",slot:"actions-end",text:e}):null}get _renderedChildList(){const{dragEnabled:e,item:t,rootGroupUid:i,listModeDisabled:r,selectionMode:n}=this;if(!("visible"in t))return;const o=[...this.parentTitles??[],t.title],{children:u,layer:f}=t,g=(f==null?void 0:f.type)!=="catalog-dynamic-group"&&MWe(t),b=!r&&vWe(f);return g||!b&&!g&&e&&(f==null?void 0:f.type)==="group"?G("calcite-list",{canPull:E=>!!this.canMove&&this.canMove(E,"pull"),canPut:E=>!!this.canMove&&this.canMove(E,"put"),"data-item":t,"data-layer-type":i,dragEnabled:!!e&&t.childrenSortable&&SWe(t),group:`${i}-${f.uid}`,key:`child-list-${f.uid}`,selectionAppearance:"border",selectionMode:n},u==null?void 0:u.filter(E=>!E.hidden).toArray().map(E=>this._renderItem(E,t,o)),this._renderedTablesItem):null}get _hasTables(){var i,r;const{layerTablesEnabled:e}=this,t=this.item.layer;if(!e||!t)return!1;switch(t.type){case"knowledge-graph":return e.includes(t.type)&&!!((i=t.tables)!=null&&i.length);case"map-image":case"tile":return e.includes(t.type)&&!!((r=t.subtables)!=null&&r.length);default:return!1}}get _renderedTablesItem(){const{item:e,messages:t,css:i}=this,{layer:r}=e;return"itemTableIcon"in i&&"visible"in e&&"tables"in t&&this._hasTables?G("calcite-list-item",{class:i.item,"data-layer-id":r.id,dragDisabled:!0,key:`list-item-table-list-tables-${r.uid}`,title:t.tables,onCalciteListItemSelect:()=>this._triggerOnTablesOpen(e)},G("div",{class:i.itemContent,slot:"content"},t.tables),G("calcite-icon",{class:i.itemTableIcon,icon:"table",scale:"s",slot:"content-start"}),G("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"})):null}get _renderedItemMessage(){const{item:e,messages:t,css:i}=this;return e.error?G("div",{class:i.itemMessage,key:"esri-layer-list__error",slot:"content-bottom"},G("calcite-notice",{icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",width:"full"},G("div",{slot:"message"},"tableError"in t?t.tableError:t.layerError))):"incompatible"in e&&e.incompatible&&"layerIncompatible"in t?G("div",{class:i.itemMessage,key:"esri-layer-list__incompatible",slot:"content-bottom"},G("calcite-notice",{afterCreate:this._setTooltipReference,afterRemoved:this._removeTooltipReference,bind:this,icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",tabIndex:0,width:"full"},G("div",{slot:"message"},t.layerIncompatible))):null}get _singleAction(){return this._renderAction({action:CWe(this._filteredSections),textEnabled:!1})}get _filteredSections(){return this.item.actionsSections.map(e=>e.filter(t=>t.visible))}get _actionsCount(){return this.item.actionsSections.reduce((e,t)=>e+t.length,0)}_renderAction(e){const{item:t}=this,{action:i,textEnabled:r}=e;if(!i)return null;const{active:n,disabled:o,title:u,type:f,indicator:g}=i;return G("calcite-action",{active:f==="toggle"&&i.value,appearance:"transparent",disabled:o,icon:nH(i),indicator:g,key:`action-${i.uid}`,loading:n,onclick:()=>this._triggerAction(t,i),scale:"s",slot:r?void 0:"actions-end",text:u??"",textEnabled:r,title:u??void 0},this._renderFallbackIcon(i))}_renderFallbackIcon(e){const{css:t}=this,{className:i,icon:r}=e;if(r)return null;const n="image"in e?e.image:void 0,o={[t.itemActionIcon]:!!i,[t.itemActionImage]:!!n};return i&&(o[i]=!0),n||i?G("span",{"aria-hidden":"true",class:this.classes(t.itemActionIcon,o),key:"icon",styles:vue(n)}):null}_renderItem(e,t,i=[]){return G(DR,{activeItem:this.activeItem,canMove:this.canMove,css:this.css,dragEnabled:this.dragEnabled,item:e,key:`layerListItem-${e.layer.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:t,parentTitles:i,rootGroupUid:this.rootGroupUid,selectedDragItemLayerUid:this.selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this.onAction,onCatalogOpen:this.onCatalogOpen,onPanelOpen:this.onPanelOpen,onSelectedDragItemLayerUidChange:this.onSelectedDragItemLayerUidChange,onTablesOpen:this.onTablesOpen,onTooltipReferenceChange:this.onTooltipReferenceChange})}_triggerAction(e,t){t&&e&&(t.type==="toggle"&&(t.value=!t.value),this.onAction(t,e))}_triggerOnTablesOpen(e){e&&this.onTablesOpen&&this.onTablesOpen(e)}_triggerOnCatalogOpen(e){var t;e&&((t=this.onCatalogOpen)==null||t.call(this,e))}_focusSelectedDragEl(e,t){this.selectedDragItemLayerUid===t.layer.uid&&cv(e)}_handleCalciteListItemToggle(e,t){e.stopPropagation(),t.open=e.target.open}_handleCalciteListItemDragHandleChange(e,t){var r;e.stopPropagation();const i=e.target.dragSelected;(r=this.onSelectedDragItemLayerUidChange)==null||r.call(this,i?t.layer.uid:null)}_handleCalciteListItemSelect(e,t,i){ic(e.target)===t&&this.selectionMode==="none"&&(i==null?void 0:i.visibilityMode)!=="inherited"&&this._toggleVisibility(t,i)}_togglePanel(e){e.open=!e.open,e.open&&this.onPanelOpen()}_toggleVisibility(e,t){if(!e)return;(t==null?void 0:t.visibilityMode)==="exclusive"&&e.visible||(e.visible=!e.visible)}};bt.vnodeSelector="calcite-list-item",m([w()],bt.prototype,"activeItem",void 0),m([w()],bt.prototype,"canMove",void 0),m([w()],bt.prototype,"css",void 0),m([w()],bt.prototype,"dragEnabled",void 0),m([w()],bt.prototype,"item",void 0),m([w()],bt.prototype,"layerTablesEnabled",void 0),m([w()],bt.prototype,"listModeDisabled",void 0),m([w()],bt.prototype,"messages",void 0),m([w()],bt.prototype,"messagesCommon",void 0),m([w()],bt.prototype,"onAction",void 0),m([w()],bt.prototype,"onPanelOpen",void 0),m([w()],bt.prototype,"onCatalogOpen",void 0),m([w()],bt.prototype,"onTablesOpen",void 0),m([w()],bt.prototype,"onSelectedDragItemLayerUidChange",void 0),m([w()],bt.prototype,"onTooltipReferenceChange",void 0),m([w()],bt.prototype,"parent",void 0),m([w()],bt.prototype,"parentTitles",void 0),m([w()],bt.prototype,"rootGroupUid",void 0),m([w()],bt.prototype,"selectionMode",void 0),m([w()],bt.prototype,"selectedItems",void 0),m([w()],bt.prototype,"selectedDragItemLayerUid",void 0),m([w()],bt.prototype,"visibleElements",void 0),m([w()],bt.prototype,"visibilityAppearance",void 0),m([w()],bt.prototype,"_title",null),m([w()],bt.prototype,"_renderedItemStatus",null),m([w()],bt.prototype,"_renderedItemTemporaryIcon",null),m([w()],bt.prototype,"_renderedItemToggle",null),m([w()],bt.prototype,"_renderedPanel",null),m([w()],bt.prototype,"_renderedPanelAction",null),m([w()],bt.prototype,"_renderedActions",null),m([w()],bt.prototype,"_renderedActionMenu",null),m([w()],bt.prototype,"_renderedActionMenuContent",null),m([w()],bt.prototype,"_renderedCatalogFootprintIcon",null),m([w()],bt.prototype,"_renderedCatalogDynamicIcon",null),m([w()],bt.prototype,"_renderedCatalogSelectNode",null),m([w()],bt.prototype,"_renderedChildList",null),m([w()],bt.prototype,"_hasTables",null),m([w()],bt.prototype,"_renderedTablesItem",null),m([w()],bt.prototype,"_renderedItemMessage",null),m([w()],bt.prototype,"_singleAction",null),m([w()],bt.prototype,"_filteredSections",null),m([w()],bt.prototype,"_actionsCount",null),bt=DR=m([H("esri.widgets.LayerList.LayerListItem")],bt);const AWe=bt;function nK(e){return e!=null&&typeof e=="object"&&e.type==="2d"&&e.view2dType==="linkchart"}var jR;let fp=jR=class extends M2{constructor(e){super(e),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new jR({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};m([w()],fp.prototype,"displayValueEnabled",void 0),m([w()],fp.prototype,"max",void 0),m([w()],fp.prototype,"min",void 0),m([w()],fp.prototype,"step",void 0),m([w()],fp.prototype,"value",void 0),fp=jR=m([H("esri.support.actions.ActionSlider")],fp);const kWe=fp;let Xn=class extends Eu(bi){constructor(t,i){super(t,i),this._legend=null,this.className=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([me(()=>this._canCreateLegend,()=>this._createLegend(),Je),me(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),Je)])}destroy(){this._legend=Jt(this._legend)}get _canCreateLegend(){const{content:t,listItem:i}=this;if(!i)return!1;const r="legend";return t===r||t!=null&&!!Array.isArray(t)&&t.includes(r)}get _legendOptions(){const{listItem:t,_legendLayerInfo:i}=this,r=t==null?void 0:t.view;return i&&r?{view:r,layerInfos:[i]}:{}}get _legendLayerInfo(){var u;const t=(u=this.listItem)==null?void 0:u.layer;if(!t||t.type==="subtype-sublayer")return null;const i=pj(t)?t:null,r=t==null?void 0:t.parent,n=r!=null&&"type"in r&&r.type==="map-image"?i==null?void 0:i.source:null,o="";return n&&r?{layer:r,title:o,sublayerIds:[n.mapLayerId]}:{layer:t,title:o}}get disabled(){var n;const{listItem:t,_legend:i,content:r}=this;return!t||!(Array.isArray(r)&&r.length>1)&&!!i&&(!((n=i.activeLayerInfos)!=null&&n.length)||!t.visibleAtCurrentScale||!t.visible)}set disabled(t){this._overrideIfSome("disabled",t)}get icon(){const{image:t}=this,i=this._getFirstWidget();return this._get("icon")??(!t&&i?i.icon:null)}set icon(t){this._overrideIfSome("icon",t)}get title(){var t;return this._get("title")||(((t=this._getFirstWidget())==null?void 0:t.label)??"")}set title(t){this._override("title",t)}render(){return G("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(t){const{_legend:i,disabled:r,open:n}=this;return t&&!r&&n?t==="legend"&&i?G("div",{key:"legend-widget"},i.render()):typeof t=="string"?G("div",{innerHTML:t,key:t}):ky(t)?G("div",{key:"content-widget"},t.render()):t instanceof HTMLElement?G("div",{afterCreate:this._attachToNode,bind:t,key:"content-element"}):null:null}_renderContents(){const{content:t,open:i}=this;return i?Array.isArray(t)?t.map(r=>this._renderContent(r)):this._renderContent(t):null}async _createLegend(){if(Jt(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:t}=await ce(()=>Promise.resolve().then(()=>pWe),void 0,import.meta.url),i=new t(this._legendOptions);this._legend=i}_attachToNode(t){t.appendChild(this)}_updateLegend(){const t=this._legend;t&&t.set(this._legendOptions)}_getWidget(t){return t==="legend"?this._legend:ky(t)?t:null}_getFirstWidget(){const{content:t}=this;return Array.isArray(t)?t.map(i=>this._getWidget(i)).find(i=>i):this._getWidget(t)}};m([w()],Xn.prototype,"_legend",void 0),m([w()],Xn.prototype,"_canCreateLegend",null),m([w()],Xn.prototype,"_legendOptions",null),m([w()],Xn.prototype,"_legendLayerInfo",null),m([w()],Xn.prototype,"className",void 0),m([w()],Xn.prototype,"content",void 0),m([w()],Xn.prototype,"disabled",null),m([w()],Xn.prototype,"flowEnabled",void 0),m([w()],Xn.prototype,"icon",null),m([w()],Xn.prototype,"image",void 0),m([w()],Xn.prototype,"listItem",void 0),m([w()],Xn.prototype,"open",void 0),m([w()],Xn.prototype,"title",null),m([w()],Xn.prototype,"visible",void 0),Xn=m([H("esri.widgets.LayerList.ListItemPanel")],Xn);const Zpe=Xn;var i3;const LWe=Oe.ofType({key:"type",defaultKeyValue:"button",base:M2,typeMap:{button:bm,toggle:gT,slider:kWe}}),Jpe=Oe.ofType(LWe),Z7="layer",kx="child-list-mode",OWe="hide";let Ei=i3=class extends Eu(De){constructor(e){super(e),this.actionsSections=new Jpe,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(Oe.ofType(i3)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.panel=null,this.parent=null,this.view=null}initialize(){if(this.addHandles([me(()=>{var e;return[this.layer,(e=this.layer)==null?void 0:e.listMode,this.listModeDisabled]},()=>this._watchLayerProperties(this.layer),Je),me(()=>this.checkPublishStatusEnabled,e=>this._updateChildrenPublishing(e),Je),me(()=>this.view,e=>this._updateChildrenView(e),Je),me(()=>this.panel,e=>this._setListItemOnPanel(e),Je)]),typeof this.listItemCreatedFunction=="function"){const e={item:this};this.listItemCreatedFunction.call(null,e)}}destroy(){var e;(e=this.panel)==null||e.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:e,publishing:t}=this;if(!t&&e&&"connectionStatus"in e)return e.connectionStatus}get error(){var e;return(e=this.layer)==null?void 0:e.loadError}get incompatible(){const{layerView:e}=this;return!(!e||!("spatialReferenceSupported"in e))&&!e.spatialReferenceSupported}get layerView(){const{layer:e,view:t}=this;if(!e||!t||e.type==="sublayer")return null;const i=e.type==="subtype-sublayer"?e.parent:e;return t.allLayerViews.find(r=>r.layer===i)??null}castPanel(e){var t;return(t=this.panel)!=null&&t.open&&!e.hasOwnProperty("open")&&(e.open=!0),e?new Zpe(e):null}get sortable(){var e;return((e=this.layer)==null?void 0:e.type)!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(e){this._set("sortable",e)}get title(){const e=Ps(this,"layer.layer");return(!e||e&&Ps(this,"layer.layer.loaded"))&&Ps(this,"layer.title")||Ps(this,"layer.attributes.title")||""}set title(e){this._override("title",e)}get publishing(){var i;const{layer:e,checkPublishStatusEnabled:t}=this;return t&&e&&"publishingInfo"in e&&((i=e.publishingInfo)==null?void 0:i.status)==="publishing"}get updating(){const{layerView:e,connectionStatus:t,layer:i,publishing:r}=this;return!r&&!t&&(e?e.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var e;return(e=this.layer)==null?void 0:e.visible}set visible(e){const t=this.layer;t&&(t.visible=e)}get visibleAtCurrentScale(){var e,t;return((e=this.layerView)==null?void 0:e.visibleAtCurrentScale)??!EWe(this.layer,(t=this.view)==null?void 0:t.scale)}get visibleAtCurrentTimeExtent(){var e;return((e=this.layerView)==null?void 0:e.visibleAtCurrentTimeExtent)??!0}get visibilityMode(){return _We(this.layer)}clone(){return new i3({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(e){e&&(e.listItem=this)}_updateChildrenPublishing(e){const t=this.children;t&&t.forEach(i=>i.checkPublishStatusEnabled=e)}_updateChildrenView(e){const t=this.children;t&&t.forEach(i=>i.view=e)}_createChildren(e){const{listModeDisabled:t,children:i}=this,r=e.filter(n=>!i.some(o=>o.layer===n));i.addMany(this._createChildItems(r,t))}_destroyChildren(e){const{children:t}=this,i=t.filter(r=>!e.includes(r.layer));t.destroyMany(i)}_sortChildren(e){this.children.sort((t,i)=>e.indexOf(i.layer)-e.indexOf(t.layer))}_destroyAllChildren(){this.removeHandles(kx),this.children.destroyAll()}_watchChildLayerListMode(e){this.removeHandles(kx),this.listModeDisabled||this.addHandles(e.toArray().map(t=>me(()=>t.listMode,()=>this._compileChildren(e))),kx)}_compileChildren(e){const t=this.listModeDisabled?e:e==null?void 0:e.filter(i=>QI(i)!==OWe);t!=null&&t.length?(this._createChildren(t),this._destroyChildren(t),this._sortChildren(t),this._watchChildLayerListMode(e)):this._destroyAllChildren()}_watchSublayerChanges(e){e&&this.addHandles(e.on("change",()=>this._compileChildren(e)),Z7)}_initializeChildLayers(e){this._compileChildren(e),this._watchSublayerChanges(e)}_createChildItems(e,t){return e.map(i=>t||xWe(i)?new i3({layer:i,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(cr).reverse()}_watchLayerProperties(e){if(this.removeHandles(Z7),this.removeHandles(kx),!e)return;if((!this.listModeDisabled&&QI(e))==="hide-children")return void this.children.destroyAll();const t=qpe(e);t&&this.addHandles(me(()=>e[t],i=>{e.hasOwnProperty(t)&&this._initializeChildLayers(i)},Je),Z7)}};m([w({type:Jpe})],Ei.prototype,"actionsSections",void 0),m([w()],Ei.prototype,"actionsOpen",void 0),m([w()],Ei.prototype,"checkPublishStatusEnabled",void 0),m([w({type:Oe})],Ei.prototype,"children",void 0),m([w()],Ei.prototype,"childrenSortable",void 0),m([w({readOnly:!0})],Ei.prototype,"connectionStatus",null),m([w({readOnly:!0})],Ei.prototype,"error",null),m([w()],Ei.prototype,"hidden",void 0),m([w({readOnly:!0})],Ei.prototype,"incompatible",null),m([w()],Ei.prototype,"layer",void 0),m([w({readOnly:!0})],Ei.prototype,"layerView",null),m([w()],Ei.prototype,"listItemCreatedFunction",void 0),m([w({nonNullable:!0})],Ei.prototype,"listModeDisabled",void 0),m([w()],Ei.prototype,"open",void 0),m([w({type:Zpe})],Ei.prototype,"panel",void 0),m([St("panel")],Ei.prototype,"castPanel",null),m([w()],Ei.prototype,"parent",void 0),m([w({value:!0})],Ei.prototype,"sortable",null),m([w()],Ei.prototype,"title",null),m([w({readOnly:!0})],Ei.prototype,"publishing",null),m([w({readOnly:!0})],Ei.prototype,"updating",null),m([w()],Ei.prototype,"view",void 0),m([w()],Ei.prototype,"visible",null),m([w({readOnly:!0})],Ei.prototype,"visibleAtCurrentScale",null),m([w({readOnly:!0})],Ei.prototype,"visibleAtCurrentTimeExtent",null),m([w({readOnly:!0})],Ei.prototype,"visibilityMode",null),Ei=i3=m([H("esri.widgets.LayerList.ListItem")],Ei);const fj=Ei,Ml={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},RWe="hide",Kpe=Oe.ofType(fj);let rc=class extends Us.EventedAccessor{constructor(t){super(t),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.operationalItems=new Kpe,this.view=null}initialize(){this.addHandles([me(()=>{var t;return((t=this.view)==null?void 0:t.ready)===!0},()=>this._viewHandles(),Je),me(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled],()=>this._recompileList()),me(()=>nK(this.view)?this.view.inGeographicLayout:null,()=>this._compileList())],Ml.view)}destroy(){this._removeAllItems(),this.view=null}get state(){const{view:t}=this;return t!=null&&t.ready?"ready":t?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten(t=>t.children).length}triggerAction(t,i){t&&!t.disabled&&this.emit("trigger-action",{action:t,item:i})}moveListItem(t,i,r,n){var k,L;const o=t==null?void 0:t.layer;if(!o||o.type==="subtype-sublayer"||o.type==="sublayer")return;const u=(L=(k=this.view)==null?void 0:k.map)==null?void 0:L.layers,f=i?iK(i):u,g=r?iK(r):u;if(!f||!g)return;const{operationalItems:b}=this,E=(i==null?void 0:i.children)||b,I=(r==null?void 0:r.children)||b,M=g.length-n;t.parent=r||null,E.remove(t),f.remove(o),I.includes(t)||I.add(t,M),g.includes(o)||g.add(o,M),this._compileList()}_createLayerViewHandles(t){this.removeHandles(Ml.layerViews),this._compileList(),t&&this.addHandles(t.on("change",()=>this._compileList()),Ml.layerViews)}_createMapLayerHandles(t){this.removeHandles(Ml.mapLayers),this._compileList(),t&&this.addHandles(t.on("change",()=>this._compileList()),Ml.mapLayers)}_createListItem(t){const{view:i,listItemCreatedFunction:r,checkPublishStatusEnabled:n,listModeDisabled:o}=this;return new fj({checkPublishStatusEnabled:n,listModeDisabled:o,layer:t,listItemCreatedFunction:r,view:i})}_removeAllItems(){this.operationalItems.destroyAll()}_getViewableLayers(t){return t?this.listModeDisabled?t:t.filter(i=>QI(i)!==RWe):void 0}_watchLayersListMode(t){this.removeHandles(Ml.layerListMode),t&&!this.listModeDisabled&&this.addHandles(me(()=>t.filter(i=>"listMode"in i).map(i=>i.listMode).toArray(),()=>this._compileList()),Ml.layerListMode)}_compileList(){var n,o;const t=(o=(n=this.view)==null?void 0:n.map)==null?void 0:o.layers,i=nK(this.view)&&!this.view.inGeographicLayout?t==null?void 0:t.filter(({type:u})=>u==="link-chart"):t;this._watchLayersListMode(i);const r=this._getViewableLayers(i);r!=null&&r.length?(this._createNewItems(r),this._removeItems(r),this._sortItems(r)):this._removeAllItems()}_createNewItems(t){const{operationalItems:i}=this;t.forEach(r=>{i.some(n=>n.layer===r)||i.add(this._createListItem(r))})}_removeItems(t){const{operationalItems:i}=this,r=[];i.forEach(n=>{n&&t&&t.includes(n.layer)||r.push(n)}),i.destroyMany(r)}_sortItems(t){const{operationalItems:i}=this;i.sort((r,n)=>{const o=t.indexOf(r.layer),u=t.indexOf(n.layer);return o>u?-1:o<u?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:t}=this;this.removeHandles([Ml.mapLayers,Ml.layerViews,Ml.viewLayers]),t!=null&&t.ready?this.addHandles([me(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.allLayers},i=>this._createMapLayerHandles(i),Je),me(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},i=>this._createLayerViewHandles(i),Je)],Ml.viewLayers):this._removeAllItems()}};m([w()],rc.prototype,"checkPublishStatusEnabled",void 0),m([w()],rc.prototype,"listItemCreatedFunction",void 0),m([w({nonNullable:!0})],rc.prototype,"listModeDisabled",void 0),m([w({type:Kpe})],rc.prototype,"operationalItems",void 0),m([w({readOnly:!0})],rc.prototype,"state",null),m([w()],rc.prototype,"totalItems",null),m([w()],rc.prototype,"view",void 0),rc=m([H("esri.widgets.LayerList.LayerListViewModel")],rc);const Ype=rc;let qa=class extends De{constructor(){super(...arguments),this.catalogLayerList=!0,this.closeButton=!1,this.collapseButton=!1,this.errors=!1,this.filter=!1,this.flow=!0,this.heading=!1,this.statusIndicators=!0,this.temporaryLayerIndicators=!1}};m([w({type:Boolean,nonNullable:!0})],qa.prototype,"catalogLayerList",void 0),m([w({type:Boolean,nonNullable:!0})],qa.prototype,"closeButton",void 0),m([w({type:Boolean,nonNullable:!0})],qa.prototype,"collapseButton",void 0),m([w({type:Boolean,nonNullable:!0})],qa.prototype,"errors",void 0),m([w({type:Boolean,nonNullable:!0})],qa.prototype,"filter",void 0),m([w({type:Boolean,nonNullable:!0})],qa.prototype,"flow",void 0),m([w({type:Boolean,nonNullable:!0})],qa.prototype,"heading",void 0),m([w({type:Boolean,nonNullable:!0})],qa.prototype,"statusIndicators",void 0),m([w({type:Boolean,nonNullable:!0})],qa.prototype,"temporaryLayerIndicators",void 0),qa=m([H("esri.widgets.LayerList.LayerListVisibleElements")],qa);const Xpe=qa,PWe=["label","description","metadata"],NWe=Oe.ofType(fj);let xt=class extends Eu(bi){constructor(t,i){super(t,i),this._activeItem=null,this._tooltipReferenceMap=new sf,this._focusRootFlowItem=!1,this._focusPanelFlowItem=!1,this._focusLayerFlowItem=null,this._layerListMap=new sf,this._lastDragDetail=null,this._selectedDragItemLayerUid=null,this._rootGroupUid=`operational-${this.uid}`,this._openedLayersController=null,this.catalogLayerList=null,this.catalogOptions=null,this.collapsed=!1,this.dragEnabled=!1,this.filterPlaceholder="",this.filterText="",this.headingLevel=2,this.knowledgeGraphOptions=null,this.layerTablesEnabled=new Oe(["knowledge-graph"]),this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.mapImageOptions=null,this.messages=null,this.messagesCommon=null,this.minDragEnabledItems=yWe,this.minFilterItems=fWe,this.openedLayers=new Oe,this.openedLayerLists=new Oe,this.selectedItems=new NWe,this.selectionMode="none",this.tableList=null,this.tileOptions=null,this.viewModel=new Ype,this.visibilityAppearance="default",this.visibleElements=new Xpe,this._canMove=({dragEl:r,fromEl:n,toEl:o},u)=>{var Q,Z,ee;const f=u==="pull"?this.listItemCanGiveFunction:this.listItemCanReceiveFunction,g=ic(r);if(!(g!=null&&g.sortable))return!1;const b=ic(n),E=rK(n),I=ic(o),M=rK(o),k=!!E&&!!M&&E===M,L={selected:g,from:b,to:I},P=n.group,D=o.group,j=((Q=b==null?void 0:b.layer)==null?void 0:Q.type)??"",z=((Z=I==null?void 0:I.layer)==null?void 0:Z.type)??"",V=new Set(["map-image","catalog","knowledge-graph"]);return P&&D&&typeof f=="function"?f.call(null,L):k&&!V.has(j)&&!V.has(z)&&((ee=g==null?void 0:g.layer)==null?void 0:ee.type)!=="sublayer"},this._onCatalogOpen=r=>{this.openedLayers.push(r.layer.parent),this._focusLayerFlowItem=r.layer.uid},this._onTablesOpen=r=>{this.openedLayers.push(r.layer),this._focusLayerFlowItem=r.layer.uid},this._onPanelOpen=()=>{this._focusPanelFlowItem=!0},this._onSelectedDragItemLayerUidChange=r=>{this._selectedDragItemLayerUid=r},this._onTooltipReferenceChange=(r,n)=>{n?this._tooltipReferenceMap.set(r,n):this._tooltipReferenceMap.delete(r)},this._onTriggerAction=(r,n)=>{this.triggerAction(r,n)},this._clearActiveItem=()=>{this._activeItem=null},this._setActiveItem=r=>{if(this.visibilityAppearance!=="default")return;const n=Array.from(r.composedPath()).find(o=>{var u;return(u=o.classList)==null?void 0:u.contains(Lw.item)});this._activeItem=ic(n)},this._onCalciteListOrderChange=r=>{const{_lastDragDetail:n}=this,{toEl:o,fromEl:u,dragEl:f,newIndex:g}=r;if(u&&o&&!((n==null?void 0:n.newIndex)===g&&(n==null?void 0:n.dragEl)===f&&(n==null?void 0:n.toEl)===o&&(n==null?void 0:n.fromEl)===u))if(this._lastDragDetail=r,u!==o)this._moveLayerFromChildList({toEl:o,fromEl:u,dragEl:f,newIndex:g});else{const b=Array.from(u.children).filter(E=>E==null?void 0:E.matches("calcite-list-item")).map(E=>E.value);this._sortLayers(u,b)}}}initialize(){this.addHandles(Lr(()=>this.openedLayers,"change",()=>this._handleOpenedLayersChange(),Je))}loadDependencies(){return cs({button:()=>ce(()=>import("./calcite-button-DicafOzy.js"),__vite__mapDeps([204,205]),import.meta.url),flow:()=>ce(()=>import("./calcite-flow-BGpdeU11.js"),[],import.meta.url),"flow-item":()=>ce(()=>import("./calcite-flow-item-CXm7AXI6.js"),__vite__mapDeps([251,252,247,238,205,248,242,249,240,243,236]),import.meta.url),list:()=>ce(()=>import("./calcite-list-BrvAaUx7.js"),__vite__mapDeps([233,234,235,205,236]),import.meta.url),notice:()=>ce(()=>import("./calcite-notice-kwETwl5K.js"),__vite__mapDeps([239,240]),import.meta.url),tooltip:()=>ce(()=>import("./calcite-tooltip-D9jVgGfo.js"),__vite__mapDeps([241,242,240,243]),import.meta.url)})}destroy(){this._destroyOpenedLayerLists(),this._tooltipReferenceMap.clear()}get _totalItems(){return this.viewModel.operationalItems.flatten(t=>t.children.filter(i=>i.layer.type!=="catalog-dynamic-group")).length}get _dragEnabled(){return this._totalItems>=this.minDragEnabledItems&&this.dragEnabled}get _filterEnabled(){return this._totalItems>=this.minFilterItems&&this.visibleElements.filter}get _renderedOpenLayerFlowItems(){return this.openedLayers.toArray().map(t=>this._renderLayerFlowItem(t))}get icon(){return"layers"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(t){this.viewModel.listItemCreatedFunction=t}get multipleSelectionEnabled(){return bc(Se.getLogger(this),"multipleSelectionEnabled",{replacement:"selectionMode",version:"4.29",warnOnce:!0}),this.selectionMode==="multiple"}set multipleSelectionEnabled(t){bc(Se.getLogger(this),"multipleSelectionEnabled",{replacement:"selectionMode",version:"4.29",warnOnce:!0}),this.selectionMode=t?"multiple":this.selectionEnabled?"single":"none"}get operationalItems(){return this.viewModel.operationalItems}set operationalItems(t){this.viewModel.operationalItems=t}get selectionEnabled(){return bc(Se.getLogger(this),"selectionEnabled",{replacement:"selectionMode, dragEnabled",version:"4.29",warnOnce:!0}),this.selectionMode!=="none"&&this.dragEnabled}set selectionEnabled(t){bc(Se.getLogger(this),"selectionEnabled",{replacement:"selectionMode, dragEnabled",version:"4.29",warnOnce:!0}),this.dragEnabled=t,this.selectionMode=t?this.multipleSelectionEnabled?"multiple":"single":"none"}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}triggerAction(t,i){return this.viewModel.triggerAction(t,i)}render(){var n,o;const t=(n=this.viewModel)==null?void 0:n.state,i={[Ge.hidden]:t==="loading",[Ge.disabled]:t==="disabled"},r=(o=this.operationalItems)==null?void 0:o.filter(u=>!u.hidden&&(this.visibleElements.errors||!u.error));return G("div",{class:this.classes(Lw.base,Ge.widget,Ge.panel,i)},r!=null&&r.length?[this._renderItemTooltips(r),this._renderItems(r)]:this._renderNoItems())}async _createFlowList(t,i){const{_layerListMap:r}=this,n=r.get(t);if(n)return n;const o=t.type==="catalog"?await this._createCatalogLayerList(t):await this._createTableList(t);return i.aborted||r.set(t,o),o}async _handleOpenedLayersChange(){var g;const{_layerListMap:t,openedLayers:i,openedLayerLists:r}=this;(g=this._openedLayersController)==null||g.abort();const n=new AbortController,{signal:o}=n;this._openedLayersController=n,t.forEach((b,E)=>{i.includes(E)||(b.destroy(),t.delete(E))});const u=await Promise.all(i.map(b=>this._createFlowList(b,o)));if(o.aborted)return;r.removeAll(),r.addMany(u);const f=r.at(-1);f?"catalogLayer"in f?(this._set("catalogLayerList",f),this._set("tableList",null)):(this._set("catalogLayerList",null),this._set("tableList",f)):(this._set("catalogLayerList",null),this._set("tableList",null))}_destroyOpenedLayerLists(){this.openedLayerLists.destroyAll(),this.openedLayers.removeAll(),this._layerListMap.clear()}_renderItemTooltip(t){const{_tooltipReferenceMap:i,messages:r}=this;return t?G("calcite-tooltip",{key:`tooltip-${t.layer.uid}`,referenceElement:i.get(t.layer.uid)},r.layerIncompatibleTooltip):null}_renderItemTooltipNodes(t){var i;return t.incompatible?this._renderItemTooltip(t):(i=t.children)==null?void 0:i.filter(r=>!r.hidden).toArray().map(r=>this._renderItemTooltipNodes(r))}_renderItemTooltips(t){return t==null?void 0:t.toArray().map(i=>this._renderItemTooltipNodes(i))}_renderNoItemsMessage(){return G("div",{slot:"message"},this.messages.noItemsToDisplay)}_renderNoItems(){return G("div",{class:Lw.itemMessage,key:"esri-layer-list__no-items"},G("calcite-notice",{icon:"information",kind:"info",open:!0,width:"full"},this._renderNoItemsMessage()))}async _createCatalogLayerList(t){const{default:i}=await ce(()=>import("./CatalogLayerList-7Cq_lTXb.js"),[],import.meta.url),{headingLevel:r,catalogOptions:n,view:o,filterPlaceholder:u,listItemCreatedFunction:f,minFilterItems:g,selectionMode:b,visibilityAppearance:E,_onCatalogOpen:I,_onTablesOpen:M,layerTablesEnabled:k}=this;return new i({headingLevel:r,view:o,filterPlaceholder:u,listItemCreatedFunction:f,minFilterItems:g,selectionMode:b,visibilityAppearance:E,...n,catalogLayer:t,layerTablesEnabled:k,onCatalogOpen:I,onTablesOpen:M})}_getTableListParams(t){switch(t.type){case"knowledge-graph":return{...this.knowledgeGraphOptions,tables:t.tables};case"map-image":return{...this.mapImageOptions,tables:t.subtables};case"tile":return{...this.tileOptions,tables:t.subtables};default:return null}}async _createTableList(t){const{default:i}=await ce(()=>import("./TableList-BIS02K-M.js"),[],import.meta.url),{headingLevel:r,selectionMode:n,dragEnabled:o}=this;return new i({headingLevel:r,selectionMode:n,dragEnabled:o,...this._getTableListParams(t)})}_renderLayerFlowItem(t){var o;const{messages:i,openedLayers:r}=this,n=t.title||this.messages.untitledLayer;return G("calcite-flow-item",{afterCreate:this._focusLayerFlowItemNode,afterUpdate:this._focusLayerFlowItemNode,bind:this,"data-layer-uid":t.uid,description:n,heading:i[t.type==="catalog"?"catalogLayers":"tables"],headingLevel:this.headingLevel,key:`flow-layer-list-${t.uid}`,onCalciteFlowItemBack:u=>{u.preventDefault(),r.pop();const f=r.at(-1);f?this._focusLayerFlowItem=f.uid:this._focusRootFlowItem=!0}},(o=this._layerListMap.get(t))==null?void 0:o.render())}_renderPanelFlowItems(t){return t?t.flatten(i=>i.children).filter(({hidden:i,panel:r})=>!i&&(r==null?void 0:r.open)&&!r.disabled&&r.flowEnabled).toArray().map(({title:i,panel:r})=>{const n=()=>this._handlePanelFlowItemBack(r);return G("calcite-flow-item",{afterCreate:this._focusPanelFlowItemNode,afterUpdate:this._focusPanelFlowItemNode,bind:this,description:i,heading:r.title,headingLevel:this.headingLevel,key:`flow-panel-${r.uid}`,onCalciteFlowItemBack:o=>{o.preventDefault(),n()}},r.render(),G("calcite-button",{appearance:"transparent",onclick:n,slot:"footer-actions",width:"full"},this.messagesCommon.back))}):[]}_handlePanelFlowItemBack(t){t.open=!1,this._focusRootFlowItem=!0}_focusRootFlowItemNode(t){this._focusRootFlowItem&&(this._focusRootFlowItem=!1,cv(t))}_focusLayerFlowItemNode(t){this._focusLayerFlowItem===t.dataset.layerUid&&(this._focusLayerFlowItem=null,cv(t))}_focusPanelFlowItemNode(t){this._focusPanelFlowItem&&(this._focusPanelFlowItem=!1,cv(t))}_renderItems(t){const{visible:i,collapsed:r,_filterEnabled:n,_rootGroupUid:o,visibleElements:{closeButton:u,collapseButton:f,heading:g,flow:b},_dragEnabled:E,selectionMode:I,filterText:M,filterPlaceholder:k,messages:L}=this,P=[G("calcite-flow-item",{afterCreate:this._focusRootFlowItemNode,afterUpdate:this._focusRootFlowItemNode,bind:this,closable:u,closed:!i,collapsed:r,collapsible:f,heading:g?L.widgetLabel:void 0,headingLevel:this.headingLevel,key:"root-flow-item",onCalciteFlowItemClose:()=>this.visible=!1},G("calcite-list",{afterCreate:D=>{D.addEventListener("focusin",this._setActiveItem),D.addEventListener("focusout",this._clearActiveItem)},afterRemoved:D=>{D.removeEventListener("focusin",this._setActiveItem),D.removeEventListener("focusout",this._clearActiveItem)},canPull:D=>this._canMove(D,"pull"),canPut:D=>this._canMove(D,"put"),"data-layer-type":o,dragEnabled:E,filterEnabled:n,filterPlaceholder:k,filterProps:PWe,filterText:n?M:"",group:o,key:"root-list",label:L.widgetLabel,onmouseleave:this._clearActiveItem,onmouseover:this._setActiveItem,selectionAppearance:"border",selectionMode:I,onCalciteListChange:D=>this._handleCalciteListChange(D),onCalciteListDragEnd:D=>this._handleCalciteListDragEnd(D.detail),onCalciteListFilter:D=>{var j;return this.filterText=((j=D.target)==null?void 0:j.filterText)??""},onCalciteListOrderChange:D=>this._onCalciteListOrderChange(D.detail)},t==null?void 0:t.toArray().map(D=>this._renderItem(D)),t!=null&&t.length&&n?G("div",{class:Lw.filterNoResults,slot:"filter-no-results"},G("calcite-notice",{kind:"info",open:!0,width:"full"},this._renderNoItemsMessage())):null)),this._renderPanelFlowItems(t),this._renderedOpenLayerFlowItems];return i?b?G("calcite-flow",{key:"root-flow"},P):P:null}_renderItem(t,i,r){return G(AWe,{activeItem:this._activeItem,canMove:this._canMove,css:Lw,dragEnabled:this.dragEnabled,item:t,key:`layerListItem-${t.layer.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.viewModel.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:i,parentTitles:r,rootGroupUid:this._rootGroupUid,selectedDragItemLayerUid:this._selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this._onTriggerAction,onCatalogOpen:this._onCatalogOpen,onPanelOpen:this._onPanelOpen,onSelectedDragItemLayerUidChange:this._onSelectedDragItemLayerUidChange,onTablesOpen:this._onTablesOpen,onTooltipReferenceChange:this._onTooltipReferenceChange})}_moveLayerFromChildList({toEl:t,fromEl:i,dragEl:r,newIndex:n}){const o=ic(r),u=ic(t),f=ic(i);this.viewModel.moveListItem(o,f,u,n)}_handleCalciteListDragEnd(t){const{fromEl:i,dragEl:r,oldIndex:n}=t;i.insertBefore(r,i.children[n])}_sortLayers(t,i){var r,n;if(t)if(t.group===this._rootGroupUid)Hpe((n=(r=this.view)==null?void 0:r.map)==null?void 0:n.layers,i);else{const o=ic(t);if(!o)return;IWe(o,i)}}_handleCalciteListChange(t){const{selectionMode:i,selectedItems:r}=this;if(i==="none")return;const n=t.target.selectedItems.map(o=>ic(o)).filter(Boolean);r.removeAll(),r.addMany(n)}};m([w()],xt.prototype,"_activeItem",void 0),m([w()],xt.prototype,"_tooltipReferenceMap",void 0),m([w()],xt.prototype,"_focusRootFlowItem",void 0),m([w()],xt.prototype,"_focusPanelFlowItem",void 0),m([w()],xt.prototype,"_focusLayerFlowItem",void 0),m([w()],xt.prototype,"_layerListMap",void 0),m([w()],xt.prototype,"_totalItems",null),m([w()],xt.prototype,"_dragEnabled",null),m([w()],xt.prototype,"_filterEnabled",null),m([w()],xt.prototype,"_renderedOpenLayerFlowItems",null),m([w({readOnly:!0})],xt.prototype,"catalogLayerList",void 0),m([w()],xt.prototype,"catalogOptions",void 0),m([w()],xt.prototype,"collapsed",void 0),m([w()],xt.prototype,"dragEnabled",void 0),m([w()],xt.prototype,"filterPlaceholder",void 0),m([w()],xt.prototype,"filterText",void 0),m([w()],xt.prototype,"headingLevel",void 0),m([w()],xt.prototype,"icon",null),m([w()],xt.prototype,"knowledgeGraphOptions",void 0),m([w()],xt.prototype,"label",null),m([w()],xt.prototype,"layerTablesEnabled",void 0),m([w()],xt.prototype,"listItemCanGiveFunction",void 0),m([w()],xt.prototype,"listItemCanReceiveFunction",void 0),m([w()],xt.prototype,"listItemCreatedFunction",null),m([w()],xt.prototype,"mapImageOptions",void 0),m([w(),Xt("esri/widgets/LayerList/t9n/LayerList")],xt.prototype,"messages",void 0),m([w(),Xt("esri/t9n/common")],xt.prototype,"messagesCommon",void 0),m([w()],xt.prototype,"minDragEnabledItems",void 0),m([w()],xt.prototype,"minFilterItems",void 0),m([w()],xt.prototype,"multipleSelectionEnabled",null),m([w({readOnly:!0})],xt.prototype,"openedLayers",void 0),m([w({readOnly:!0})],xt.prototype,"openedLayerLists",void 0),m([w()],xt.prototype,"operationalItems",null),m([w()],xt.prototype,"selectionEnabled",null),m([w()],xt.prototype,"selectedItems",void 0),m([w()],xt.prototype,"selectionMode",void 0),m([w({readOnly:!0})],xt.prototype,"tableList",void 0),m([w()],xt.prototype,"tileOptions",void 0),m([w()],xt.prototype,"view",null),m([LS("trigger-action"),w({type:Ype})],xt.prototype,"viewModel",void 0),m([w()],xt.prototype,"visibilityAppearance",void 0),m([w({type:Xpe,nonNullable:!0})],xt.prototype,"visibleElements",void 0),xt=m([H("esri.widgets.LayerList")],xt);const FWe=xt;let Ih=class extends She(ede(S_)){constructor(t){super(t),this.elevationInfo=null,this.graphics=new My,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(t){return this.graphics.add(t),this}addMany(t){return this.graphics.addMany(t),this}removeAll(){return this.graphics.removeAll(),this}remove(t){this.graphics.remove(t)}removeMany(t){this.graphics.removeMany(t)}on(t,i){return super.on(t,i)}graphicChanged(t){this.emit("graphic-update",t)}};m([w({type:Mhe})],Ih.prototype,"elevationInfo",void 0),m([w(R8(My,"graphics"))],Ih.prototype,"graphics",void 0),m([w({type:["show","hide"]})],Ih.prototype,"listMode",void 0),m([w()],Ih.prototype,"screenSizePerspectiveEnabled",void 0),m([w({readOnly:!0})],Ih.prototype,"type",void 0),m([w({constructOnly:!0})],Ih.prototype,"internal",void 0),Ih=m([H("esri.layers.GraphicsLayer")],Ih);const Qpe=Ih;var gpt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function DWe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function jWe(e,t){for(var i=0;i<t.length;i++){const r=t[i];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in e)){const o=Object.getOwnPropertyDescriptor(r,n);o&&Object.defineProperty(e,n,o.get?o:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var sK,oK={exports:{}};function zWe(){return sK||(sK=1,function(e){function t(){function r(d){if(typeof d=="number")return Y.Tc.Zg(d);if(d==null)return null;if(KS[d]!=null)return Y.Tc.Zg(KS[d]);throw Error("Unrecognised Unit Type")}function n(d){if(typeof d=="number")return Y.Tc.Zg(d);if(d==null)return null;if(YS[d]!=null)return Y.Tc.Zg(YS[d]);throw Error("Unrecognised Unit Type")}function o(d){if(d)switch(d){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function u(d,O,S,h){if(S==null||S.B())return null;switch(S.getType()){case Y.qn.Point:return d.exportPoint(O,S,h);case Y.qn.Polygon:return d.exportPolygon(O,S,h);case Y.qn.Polyline:return d.exportPolyline(O,S,h);case Y.qn.MultiPoint:return d.exportMultipoint(O,S,h);case Y.qn.Envelope:return d.exportExtent(O,S,h)}return null}function f(d,O,S,h){if(S.getType()!==Y.qn.Point)throw Error("Geometry not Point");return d.exportPoint(O,S,h)}function g(d,O,S){return d.convertToGEGeometry(O,S)}function b(d){var O=d.wkid;d=d.wkt2||d.wkt;var S=Gc.get(O||d);return S==null&&(O!==-1&&O!=null?(S=Y.Eg.create(O),Gc.set(O,S)):d&&(S=Y.Eg.qP(d),Gc.set(d,S)),wd.has(O||d)&&S.VW(wd.get(O||d))),S}function E(d){var O,S,h;if(d==null)return null;var l=b(d);return d=l.Hd(),l=l.Kn(),(O={}).tolerance=l,O.unitType=d==null?-1:d.od,O.unitID=d==null?-1:d.Ec(),O.unitBaseFactor=d==null?0:d.ai,O.unitSquareDerivative=d==null?0:(h=(S=Y.Tc.aG(d))===null||S===void 0?void 0:S.Ec())!==null&&h!==void 0?h:0,O}function I(d,O,S,h){return S==null?null:(S=Y.$b.clip(g(d,Ve,S),g(d,Ve,h),b(O)),u(d,Ve,S,O))}function M(d,O,S,h){S=Y.$b.dl(g(d,Ve,S),g(d,Ve,h),b(O)),h=[];for(var l=0;l<S.length;l++)h.push(u(d,Ve,S[l],O));return h}function k(d,O,S,h){if(S==null||h==null)throw Error("Illegal Argument Exception");return Y.$b.contains(g(d,Ve,S),g(d,Ve,h),b(O))}function L(d,O,S,h){if(S==null||h==null)throw Error("Illegal Argument Exception");return Y.$b.BP(g(d,Ve,S),g(d,Ve,h),b(O))}function P(d,O,S,h,l){if(S==null||h==null)throw Error("Illegal Argument Exception");return Y.$b.tb(g(d,Ve,S),g(d,Ve,h),b(O),r(l))}function D(d,O,S,h){return!(S==null&&h!=null||h==null&&S!=null)&&Y.$b.Nb(g(d,Ve,S),g(d,Ve,h),b(O))}function j(d,O,S,h){if(S==null||h==null)throw Error("Illegal Argument Exception");return Y.$b.TS(g(d,Ve,S),g(d,Ve,h),b(O))}function z(d,O,S,h){if(S==null||h==null)throw Error("Illegal Argument Exception");return Y.$b.touches(g(d,Ve,S),g(d,Ve,h),b(O))}function V(d,O,S,h){if(S==null||h==null)throw Error("Illegal Argument Exception");return Y.$b.qY(g(d,Ve,S),g(d,Ve,h),b(O))}function W(d,O,S,h){if(S==null||h==null)throw Error("Illegal Argument Exception");return Y.$b.TP(g(d,Ve,S),g(d,Ve,h),b(O))}function Q(d,O,S,h){if(S==null||h==null)throw Error("Illegal Argument Exception");return Y.$b.DU(g(d,Ve,S),g(d,Ve,h),b(O))}function Z(d,O,S,h,l){if(S==null||h==null)throw Error("Illegal Argument Exception");return Y.$b.yB(g(d,Ve,S),g(d,Ve,h),b(O),l)}function ee(d,O,S){if(S==null)throw Error("Illegal Argument Exception");return Y.$b.dT(g(d,Ve,S),b(O))}function ie(d,O,S){if(S==null)throw Error("Illegal Argument Exception");return S=Y.$b.eC(g(d,Ve,S),b(O)),u(d,Ve,S,O)}function oe(d,O,S,h){if(h===void 0&&(h=!1),S==null)throw Error("Illegal Argument Exception");if(Array.isArray(S)){var l=h,s=[];for(h=0;h<S.length;h++)s.push(g(d,Ve,S[h]));for(S=Y.$b.jP(s,l),l=Array(S.length),h=0;h<S.length;h++)l[h]=u(d,Ve,S[h],O);return l}return h=Y.$b.iP(g(d,Ve,S),b(O)),u(d,Ve,h,O)}function le(d,O,S,h){if(S==null||h==null)throw Error("Illegal Argument Exception");if(Array.isArray(S)){for(var l=[],s=0;s<S.length;s++)l.push(g(d,Ve,S[s]));for(S=Y.$b.QP(l,g(d,Ve,h),b(O)),h=Array(S.length),s=0;s<S.length;s++)h[s]=u(d,Ve,S[s],O);return h}return s=Y.$b.im(g(d,Ve,S),g(d,Ve,h),b(O)),u(d,Ve,s,O)}function xe(d,O,S,h){if(S==null||h==null)throw Error("Illegal Argument Exception");if(Array.isArray(S)){for(var l=[],s=0;s<S.length;s++)l.push(g(d,Ve,S[s]));for(S=Y.$b.VX(l,g(d,Ve,h),b(O)),h=Array(S.length),s=0;s<S.length;s++)h[s]=u(d,Ve,S[s],O);return h}return s=Y.$b.ep(g(d,Ve,S),g(d,Ve,h),b(O)),u(d,Ve,s,O)}function $e(d,O,S,h){if(S==null||h==null)throw Error("Illegal Argument Exception");if(Array.isArray(S)){for(var l=[],s=0;s<S.length;s++)l.push(g(d,Ve,S[s]));for(S=Y.$b.RS(l,g(d,Ve,h),b(O)),h=Array(S.length),s=0;s<S.length;s++)h[s]=u(d,Ve,S[s],O);return h}return s=Y.$b.Ea(g(d,Ve,S),g(d,Ve,h),b(O)),u(d,Ve,s,O)}function Te(d,O,S,h){if(S==null)return null;var l=[];if(Array.isArray(S)){if(S.length===0)return null;for(h=0;h<S.length;h++)l.push(g(d,Ve,S[h]))}else l.push(g(d,Ve,S)),h!=null&&l.push(g(d,Ve,h));return u(d,Ve,Y.$b.jY(l,b(O)),O)}function de(d,O,S,h,l,s,a,c){var p=0;if(s!=null)switch(s){case"round":p=0;break;case"bevel":p=1;break;case"miter":p=2;break;case"square":p=3}if(Array.isArray(S)){if(S==null)d=null;else if(S.length===0)d=[];else{var y=[];for(s=0;s<S.length;s++)y.push(g(d,Ve,S[s]));for(S=Y.$b.BU(y,b(O),h,p,a,c,r(l)),h=Array(S.length),s=0;s<S.length;s++)h[s]=u(d,Ve,S[s],O);d=h}return d}return S=Y.$b.offset(g(d,Ve,S),b(O),h,p,a,c,r(l)),u(d,Ve,S,O)}function se(d,O,S,h,l,s){if(s===void 0&&(s=!1),Array.isArray(S)){if(!Array.isArray(h)){for(var a=[],c=0;c<S.length;c++)a.push(h);h=a}if(h.length!=S.length){if(h.length==0)throw Error("Illegal Argument Exception");a=[];var p=0;for(c=0;c<S.length;c++)h[c]===void 0?a.push(p):(a.push(h[c]),p=h[c]);h=a}return ue(d,O,S,h,l,!1,s,"geodesic",NaN)}return S=Y.$b.buffer(g(d,Ve,S),b(O),h,r(l),!1,0,NaN),u(d,Ve,S,O)}function ye(d,O,S,h,l,s,a,c){if(Array.isArray(S)){if(!Array.isArray(h)){for(var p=[],y=0;y<S.length;y++)p.push(h);h=p}if(h.length!==S.length){if(h.length===0)throw Error("Illegal Argument Exception");p=[];var v=0;for(y=0;y<S.length;y++)h[y]===void 0?p.push(v):(p.push(h[y]),v=h[y]);h=p}return ue(d,O,S,h,l,!0,s,a,c)}return a===void 0&&(a=NaN),S=Y.$b.buffer(g(d,Ve,S),b(O),h,r(l),!0,o(s),a),u(d,Ve,S,O)}function ue(d,O,S,h,l,s,a,c,p){if(p===void 0&&(p=NaN),S==null)return null;if(S.length===0)return[];for(var y=[],v=0;v<S.length;v++)y.push(g(d,Ve,S[v]));for(S=Y.$b.MN(y,b(O),h,r(l),s,a,o(c),p),h=Array(S.length),v=0;v<S.length;v++)h[v]=u(d,Ve,S[v],O);return h}function pe(d,O,S,h,l){var s;return l===void 0&&(l=!0),S=Y.$b.nz(g(d,Ve,S),g(d,Ve,h),l),(s={}).coordinate=f(d,Ve,S.fz(),O),s.distance=S.hz(),s.isRightSide=S.Sz(),s.vertexIndex=S.Ua(),s.isEmpty=S.B(),s}function _e(d,O,S,h){var l;return S=Y.$b.oz(g(d,Ve,S),g(d,Ve,h)),(l={}).coordinate=f(d,Ve,S.fz(),O),l.distance=S.hz(),l.isRightSide=S.Sz(),l.vertexIndex=S.Ua(),l.isEmpty=S.B(),l}function Le(d,O,S,h,l,s){var a;for(S=Y.$b.pz(g(d,Ve,S),g(d,Ve,h),l,s),h=[],l=0;l<S.length;l++)S[l].B()===!1&&h.push(((a={}).coordinate=f(d,Ve,S[l].fz(),O),a.distance=S[l].hz(),a.isRightSide=S[l].Sz(),a.vertexIndex=S[l].Ua(),a.isEmpty=S[l].B(),a));return h}function Re(d,O,S,h,l,s){return S=Y.$b.QQ(g(d,Ve,S),b(O),h,l,r(s)),u(d,Ve,S,O)}function qe(d,O,S,h,l){return S=Y.$b.Qr(g(d,Ve,S),b(O),h,r(l)),u(d,Ve,S,O)}function ht(d,O,S,h,l,s){return s===void 0&&(s=0),S=Y.$b.Wy(g(d,Ve,S),b(O),h,r(l),s),u(d,Ve,S,O)}function At(d,O,S,h){if(S==null)throw Error("Illegal Argument Exception");return Y.$b.JU(g(d,Ve,S),b(O),n(h))}function Fi(d,O,S,h){if(S==null)throw Error("Illegal Argument Exception");return Y.$b.KU(g(d,Ve,S),b(O),r(h))}function Rr(d,O,S,h,l){if(S==null)throw Error("Illegal Argument Exception");return Y.$b.WQ(g(d,Ve,S),b(O),n(h),o(l))}function hs(d,O,S,h,l){if(S==null)throw Error("Illegal Argument Exception");return Y.$b.ZQ(g(d,Ve,S),b(O),r(h),o(l))}function zc(d){Y.NL.bind(d)}function $m(d,O,S,h,l){var s=null,a=null;if(h){if(!l)throw Y.i.N("AOI missing Spatial Reference");s=g(d,Ve,h),a=b(l).fh()}return(d=Y.gu.XR(b(O).fh(),b(S).fh(),s,a))!==null?d:null}function Vc(d,O,S,h,l){var s=null,a=null;if(h){if(!l)throw Y.i.N("AOI missing Spatial Reference");s=g(d,Ve,h),a=b(l).fh()}return Y.gu.YR(b(O).fh(),b(S).fh(),s,a)}function vd(d,O,S,h,l,s){if(l===void 0&&(l=null),s===void 0&&(s=null),s){var a=new Y.yC;a.Vu=s.densificationStep,a.Jr=s.centralMeridianOfOutputGCS,s.clipWithInputHorizon&&a.PW(s.clipWithInputHorizon),s.clipWithOutputHorizon&&a.QW(s.clipWithOutputHorizon)}if(this.KY===!1)throw Error("Projection Engine must be enabled using enableProjection");if(O.length===0)return[];if(l){if(!(s=l.getCachedGeTransformation(S,h)))e:{if(s=l,l=null,s){var c=s.getGTListEntry();if(c!==null){l=new Y.wC(null);for(var p=0,y=c.steps;p<y.length;p++){c=y[p];var v=new Y.Dx(c.geogtran);c.isInverse&&v.Qz(),l.add(v)}a=Y.vr.Nr(b(S).fh(),b(h).fh(),l,a),s.assignCachedGe(S,h,a),s=a;break e}}if(l===null&&s&&s.steps&&0<s.steps.length){for(l=new Y.wC(null),p=0,y=s.steps;p<y.length;p++)(c=y[p]).wkid!=-1&&c.wkid!=null?l.add(Y.Dx.create(c.wkid,c.isInverse)):l.add(Y.Dx.uP(c.wkt,c.isInverse));a=Y.vr.Nr(b(S).fh(),b(h).fh(),l,a),s.assignCachedGe(S,h,a),s=a}else s=Y.vr.Nr(b(S).fh(),b(h).fh(),l,a)}for(S=[],l=0;l<O.length;l++)a=O[l],S.push(ZS(d,a,h,s))}else for(s=Y.vr.Nr(b(S).fh(),b(h).fh(),null),S=[],l=0;l<O.length;l++)a=O[l],S.push(ZS(d,a,h,s));return S}function ZS(d,O,S,h){return O=Y.$b.zh(g(d,Ve,O),h),u(d,Ve,O,S)}function w$(d,O){d!=null&&(d=d.wkid||d.wkt2||d.wkt,wd.has(d),wd.set(d,O),Gc.has(d)&&Gc.delete(d))}function b$(d){d!=null&&(d=d.wkid||d.wkt2||d.wkt,wd.has(d)&&(wd.delete(d),Gc.has(d)&&Gc.delete(d)))}function _$(d,O,S,h){if(S==null||h==null)return[];var l=[],s=0;for(S=Y.$b.QS(g(d,Ve,S),g(d,Ve,h),b(O))||[];s<S.length;s++)l.push(u(d,Ve,S[s],O));return l}var Gr,Y,ds,JS,Wt=this&&this.__extends||function(){function d(O,S){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,l){h.__proto__=l}||function(h,l){for(var s in l)l.hasOwnProperty(s)&&(h[s]=l[s])})(O,S)}return function(O,S){function h(){this.constructor=O}d(O,S),O.prototype=S===null?Object.create(S):(h.prototype=S.prototype,new h)}}();(function(d){var O;(O=d.qn||(d.qn={}))[O.Unknown=0]="Unknown",O[O.Point=33]="Point",O[O.Line=322]="Line",O[O.Envelope=197]="Envelope",O[O.MultiPoint=550]="MultiPoint",O[O.Polyline=1607]="Polyline",O[O.Polygon=1736]="Polygon",function(h){h[h.enumMild=0]="enumMild",h[h.enumMedium=1]="enumMedium",h[h.enumHot=2]="enumHot"}(d.YK||(d.YK={}));var S=function(){function h(){this.description=null,this.VA=0}return h.prototype.getType=function(){return 0},h.prototype.Db=function(){return-1},h.prototype.Nf=function(l){this.vc(),l!=this.description&&this.sn(l)},h.prototype.sn=function(){},h.prototype.Jl=function(l){this.vc(),l!=this.description&&(l=d.ee.CR(this.description,l))!=this.description&&this.sn(l)},h.prototype.hasAttribute=function(l){return this.description.hasAttribute(l)},h.prototype.re=function(l){this.vc(),this.description.hasAttribute(l)||(l=d.ee.BR(this.description,l),this.sn(l))},h.prototype.Tg=function(){return null},h.prototype.bn=function(){},h.prototype.A=function(){},h.prototype.Qo=function(){},h.prototype.xc=function(l){this.A(l)},h.prototype.B=function(){return!0},h.prototype.Oa=function(){},h.prototype.Oc=function(){},h.prototype.Ia=function(){return null},h.prototype.copyTo=function(){},h.prototype.Ke=function(){return 0},h.prototype.Qb=function(){return 0},h.prototype.iG=function(){return this.hasAttribute(1)},h.tf=function(l){return 1+((192&l)>>6)>>1},h.Rn=function(l){return!!(32&l)},h.US=function(l){return!!(128&l)},h.yd=function(l){return!!(256&l)},h.xj=function(l){return!!(512&l)},h.Hc=function(l){return!!(1024&l)},h.prototype.Of=function(){var l=this.Ia();return this.copyTo(l),l},h.prototype.mg=function(){return null},h.jg=function(l){var s=l.Ia();return l.copyTo(s),s},h.prototype.vc=function(){0<=this.VA&&(this.VA+=2147483649)},h.Ax=function(l){var s=l.getType();if(h.xj(s))return l.I();if(l.B())return 0;if(s==197)return 4;if(s==33)return 1;if(h.yd(s))return 2;throw d.i.fa("missing type")},h}();d.aa=S})(Y||(Y={})),ds=Y||(Y={}),JS=function(){function d(){this.y=this.x=0}return d.construct=function(O,S){var h=new d;return h.x=O,h.y=S,h},d.al=function(O){var S=new d;return S.x=O.x,S.y=O.y,S},d.prototype.ma=function(O,S){this.x=O,this.y=S},d.prototype.L=function(O){this.x=O.x,this.y=O.y},d.prototype.fq=function(O,S){return this.x===O&&this.y===S},d.prototype.Rz=function(O){return 2220446049250313e-31>=Math.abs(this.x-O.x)&&2220446049250313e-31>=Math.abs(this.y-O.y)},d.prototype.qb=function(O){return this.x===O.x&&this.y===O.y},d.prototype.Nb=function(O){return O==this||O instanceof d&&this.x==O.x&&this.y==O.y},d.prototype.sub=function(O){this.x-=O.x,this.y-=O.y},d.prototype.uc=function(O,S){this.x=O.x-S.x,this.y=O.y-S.y},d.prototype.add=function(O,S){S!==void 0?(this.x=O.x+S.x,this.y=O.y+S.y):(this.x+=O.x,this.y+=O.y)},d.prototype.Sq=function(){this.x=-this.x,this.y=-this.y},d.prototype.mt=function(O){this.x=-O.x,this.y=-O.y},d.prototype.NS=function(O,S,h){this.x=O.x*(1-h)+S.x*h,this.y=O.y*(1-h)+S.y*h},d.prototype.Ct=function(O,S){this.x=this.x*O+S.x,this.y=this.y*O+S.y},d.prototype.HW=function(O,S,h){this.x=S.x*O+h.x,this.y=S.y*O+h.y},d.prototype.scale=function(O){this.x*=O,this.y*=O},d.prototype.compare=function(O){return this.y<O.y?-1:this.y>O.y?1:this.x<O.x?-1:this.x>O.x?1:0},d.prototype.normalize=function(){var O=this.length();O==0&&(this.x=1,this.y=0),this.x/=O,this.y/=O},d.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},d.prototype.Sk=function(){return this.x*this.x+this.y*this.y},d.tb=function(O,S){return Math.sqrt(this.yc(O,S))},d.Oy=function(O,S,h,l){return O-=h,S-=l,Math.sqrt(O*O+S*S)},d.prototype.Qh=function(O){return this.x*O.x+this.y*O.y},d.prototype.fD=function(O){return Math.abs(this.x*O.x)+Math.abs(this.y*O.y)},d.prototype.wi=function(O){return this.x*O.y-this.y*O.x},d.prototype.Bt=function(O,S){var h=-this.x*S+this.y*O;this.x=this.x*O+this.y*S,this.y=h},d.prototype.Hv=function(){var O=this.x;this.x=-this.y,this.y=O},d.prototype.MG=function(O){this.x=-O.y,this.y=O.x},d.prototype.ar=function(){var O=this.x;this.x=this.y,this.y=-O},d.prototype.qu=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:this.x==0?4:3},d.nu=function(O,S){var h=O.qu(),l=S.qu();return l==h?0>(O=O.wi(S))?1:0<O?-1:0:h<l?-1:1},d.yc=function(O,S){var h=O.x-S.x;return h*h+(O=O.y-S.y)*O},d.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},d.prototype.Rc=function(){this.y=this.x=NaN},d.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},d.prototype.offset=function(O,S){var h=d.tb(O,S),l=d.construct(this.x,this.y);if(h==0)return d.tb(l,O);var s=new d;return s.L(S),s.sub(O),l.sub(O),l.wi(s)/h},d.Uq=function(O,S,h){var l=new ds.Wb;l.set(S.x),l.sub(O.x);var s=new ds.Wb;s.set(h.y),s.sub(O.y);var a=new ds.Wb;a.set(S.y),a.sub(O.y);var c=new ds.Wb;return c.set(h.x),c.sub(O.x),l.Ag(s),a.Ag(c),l.sub(a),l.ps()?(l=new ds.hp(S.x),s=new ds.hp(O.x),a=new ds.hp(O.y),l=l.jt(s),O=(O=new ds.hp(h.y)).jt(a),S=(S=new ds.hp(S.y)).jt(a),h=(h=new ds.hp(h.x)).jt(s),l=l.lr(O),S=S.lr(h),(l=l.lr(S)).nT()?-1:l.fS()?1:0):0>(h=l.value())?-1:0<h?1:0},d.prototype.cc=function(){return ds.O.uj(ds.O.uj())},d}(),ds.h=JS,function(d){var O=function(){function S(h){this.Fy=this.Mt=0,this.OX=h}return S.prototype.reset=function(){this.Fy=this.Mt=0},S.prototype.add=function(h){h-=this.Fy;var l=this.Mt+h;this.Fy=l-this.Mt-h,this.Mt=l},S.prototype.sub=function(h){this.add(-h)},S.prototype.rm=function(){return this.OX+this.Mt},S}();d.Fx=O,d.lc=function(){function S(){}return S.Cn=function(h,l){return 0<=l?Math.abs(h):-Math.abs(h)},S.sign=function(h){return 0>h?-1:0<h?1:0},S.RK=function(h){return h-360*Math.floor(h/360)},S.round=function(h){return Math.floor(h+.5)},S.ox=function(h){return h*h},S.hq=function(h,l,s){return .5>=s?h+(l-h)*s:l-(l-h)*(1-s)},S.OG=function(h,l,s,a){.5>=s?(a.x=h.x+(l.x-h.x)*s,a.y=h.y+(l.y-h.y)*s):(a.x=l.x-(l.x-h.x)*(1-s),a.y=l.y-(l.y-h.y)*(1-s))},S.lT=function(h,l,s,a,c,p){.5>=c?(p.x=h+(s-h)*c,p.y=l+(a-l)*c):(p.x=s-(s-h)*(1-c),p.y=a-(a-l)*(1-c))},S}()}(Y||(Y={})),function(d){var O=function(S){function h(){var l=S.call(this)||this;return l.sa=0,l.na=0,l.pa=0,l.la=0,l.ka=null,l}return Wt(h,S),h.prototype.ac=function(){return d.h.construct(this.sa,this.na)},h.prototype.Yp=function(l){l.x=this.sa,l.y=this.na},h.prototype.Dc=function(l){this.em(0,l)},h.prototype.ZB=function(l,s){this.em(0,d.h.construct(l,s))},h.prototype.To=function(l){this.hD(0,l)},h.prototype.setStart=function(l){this.uD(0,l)},h.prototype.wv=function(l,s){return this.Od(0,l,s)},h.prototype.YB=function(l,s,a){this.tn(0,l,s,a)},h.prototype.wc=function(){return d.h.construct(this.pa,this.la)},h.prototype.Tr=function(l){l.x=this.pa,l.y=this.la},h.prototype.Qc=function(l){this.em(1,l)},h.prototype.Ql=function(l,s){this.em(1,d.h.construct(l,s))},h.prototype.Po=function(l){this.hD(1,l)},h.prototype.setEnd=function(l){this.uD(1,l)},h.prototype.gv=function(l,s){return this.Od(1,l,s)},h.prototype.OB=function(l,s,a){this.tn(1,l,s,a)},h.prototype.Db=function(){return 1},h.prototype.B=function(){return this.Ac()},h.prototype.Oa=function(){},h.prototype.Ke=function(){return 0},h.prototype.Ea=function(l,s,a,c,p){return this.KM(l,s,a,c,p)},h.prototype.isIntersecting=function(l,s){return this.zr(l,s,!1)!=0},h.prototype.qs=function(l,s){return this.ru(l,s,!1)},h.prototype.ru=function(){return null},h.prototype.Ac=function(){return!1},h.prototype.ay=function(l){if(this.vc(),this.ka==null&&0<l)this.ka=d.O.lg(2*l);else if(this.ka!=null&&this.ka.length<2*l){for(var s=this.ka.slice(0),a=this.ka.length;a<2*l;a++)s[a]=0;this.ka=s}},h.gM=function(l,s,a){if(0<a)var c=0;for(var p=0;p<a;p++)s[0+c]=l[0],c++},h.prototype.em=function(l,s){l!=0?(this.pa=s.x,this.la=s.y):(this.sa=s.x,this.na=s.y)},h.prototype.sn=function(l){if(this.ka!=null){for(var s=d.ee.Iw(l,this.description),a=[],c=h.Gg(this.description,0),p=h.Gg(this.description,1),y=h.Gg(l,0),v=h.Gg(l,1),_=0,x=1,T=l.Aa;x<T;x++){var C=l.kd(x),A=d.ra.Va(C);if(s[x]==-1){var R=d.ra.se(C);for(C=0;C<A;C++)a[y+_]=R,a[v+_]=R,_++}else for(R=this.description.$j(s[x])-2,C=0;C<A;C++)a[y+_]=this.ka[c+R],a[v+_]=this.ka[p+R],_++,R++}this.ka=a}this.description=l},h.prototype.hD=function(l,s){if(this.Ac())throw d.i.fa("empty geometry");s.Nf(this.description),s.Ac()&&s.un();for(var a=0;a<this.description.Aa;a++)for(var c=this.description.Ed(a),p=0,y=d.ra.Va(c);p<y;p++){var v=this.Od(l,c,p);s.setAttribute(c,p,v)}},h.prototype.uD=function(l,s){if(this.vc(),s.Ac())throw d.i.fa("empty geometry");for(var a=s.description,c=0,p=a.Aa;c<p;c++)for(var y=a.Ed(c),v=d.ra.Va(y),_=0;_<v;_++){var x=s.Uc(y,_);this.tn(l,y,_,x)}},h.prototype.Od=function(l,s,a){if(this.Ac())throw d.i.fa("This operation was performed on an Empty Geometry.");if(s==0)return l!=0?a!=0?this.la:this.pa:a!=0?this.na:this.sa;if(a>=d.ra.Va(s))throw d.i.ce();var c=this.description.Pf(s);return 0<=c?(this.ka!=null&&this.ay(this.description.Ae.length-2),this.ka[h.Gg(this.description,l)+this.description.$j(c)-2+a]):d.ra.se(s)},h.prototype.tn=function(l,s,a,c){if(this.vc(),a>=d.ra.Va(s))throw d.i.ce();var p=this.description.Pf(s);0>p&&(this.re(s),p=this.description.Pf(s)),s==0?l!=0?a!=0?this.la=c:this.pa=c:a!=0?this.na=c:this.sa=c:(this.ka==null&&this.ay(this.description.Ae.length-2),this.ka[h.Gg(this.description,l)+this.description.$j(p)-2+a]=c)},h.prototype.copyTo=function(l){if(l.getType()!=this.getType())throw d.i.N();l.description=this.description,l.ay(this.description.Ae.length-2),h.gM(this.ka,l.ka,2*(this.description.Ae.length-2)),l.sa=this.sa,l.na=this.na,l.pa=this.pa,l.la=this.la,l.vc(),this.op(l)},h.prototype.Tg=function(l,s){var a=new d.Nc;return this.Ac()?(a.Oa(),a):(a.oa=this.Od(0,l,s),a.va=a.oa,a.Lk(this.Od(1,l,s)),a)},h.prototype.ZI=function(l){this.Ac()?l.Oa():(l.oa=this.Od(0,0,0),l.va=l.oa,l.Lk(this.Od(1,0,0)))},h.prototype.Tw=function(l,s){s.Nf(this.description),s.Cb(this.hc(l));for(var a=1,c=this.description.Aa;a<c;a++)for(var p=this.description.Ed(a),y=d.ra.Va(p),v=0;v<y;v++){var _=this.Uc(l,p,v);s.setAttribute(p,v,_)}},h.prototype.FM=function(l){if(this.description!=l.description||this.sa!=l.sa||this.pa!=l.pa||this.na!=l.na||this.la!=l.la)return!1;for(var s=0;s<2*(this.description.Ae.length-2);s++)if(this.ka[s]!=l.ka[s])return!1;return!0},h.prototype.BG=function(){return this.sa==this.pa&&this.na==this.la},h.prototype.reverse=function(){var l=this.sa;this.sa=this.pa,this.pa=l,l=this.na,this.na=this.la,this.la=l,l=1;for(var s=this.description.Aa;l<s;l++)for(var a=this.description.kd(l),c=0,p=d.ra.Va(a);c<p;c++){var y=this.Od(0,a,c),v=this.Od(1,a,c);this.tn(0,a,c,v),this.tn(1,a,c,y)}},h.prototype.zr=function(l,s,a){var c=this.getType(),p=l.getType();if(c===322){if(p==322)return d.yb.OM(this,l,s,a);throw d.i.Qa()}throw d.i.Qa()},h.prototype.KM=function(l,s,a,c,p){var y=this.getType(),v=l.getType();if(y===322){if(v==322)return d.yb.Zx(this,l,s,a,c,p);throw d.i.Qa()}throw d.i.Qa()},h.prototype.Tx=function(){return null},h.Gg=function(l,s){return s*(l.Ae.length-2)},h.prototype.hc=function(l,s){if(s===void 0)return s=new d.h,this.hc(l,s),s;d.lc.lT(this.sa,this.na,this.pa,this.la,l,s)},h.prototype.fe=function(){return null},h.prototype.eG=function(){return null},h.prototype.cq=function(){return null},h.prototype.Bi=function(){return null},h.prototype.Pn=function(){return null},h.prototype.kg=function(){return null},h.prototype.Ux=function(l,s){return s!==void 0?this.vx(s)-this.vx(l):this.vx(l)},h.prototype.op=function(){},h.prototype.dl=function(){return null},h.prototype.ah=function(){},h.prototype.Uc=function(){return null},h.prototype.Pe=function(){return null},h.prototype.vx=function(){return null},h.prototype.NG=function(){return null},h.prototype.tb=function(l,s){if(!s&&this.zr(l,0,!1)!=0)return 0;s=17976931348623157e292;var a=this.ac(),c=l.fe(a,!1);return a.sub(l.hc(c)),(a=a.length())<s&&(s=a),a=this.wc(),c=l.fe(a,!1),a.sub(l.hc(c)),(a=a.length())<s&&(s=a),a=l.ac(),c=this.fe(a,!1),a.sub(this.hc(c)),(a=a.length())<s&&(s=a),a=l.wc(),c=this.fe(a,!1),a.sub(this.hc(c)),(a=a.length())<s&&(s=a),s},h.prototype.mg=function(){return d.pi.gm(this,null)},h}(d.aa);d.SC=O}(Y||(Y={})),new Y.h,function(d){var O;(O=d.$K||(d.$K={}))[O.Unknown=-1]="Unknown",O[O.Not=0]="Not",O[O.Weak=1]="Weak",O[O.Strong=2]="Strong",function(h){h[h.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",h[h.IsWeakSimple=2]="IsWeakSimple",h[h.IsStrongSimple=4]="IsStrongSimple",h[h.DirtyOGCFlags=8]="DirtyOGCFlags",h[h.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",h[h.DirtyExactIntervals=64]="DirtyExactIntervals",h[h.DirtyLooseIntervals=128]="DirtyLooseIntervals",h[h.DirtyIntervals=192]="DirtyIntervals",h[h.DirtyIsEnvelope=256]="DirtyIsEnvelope",h[h.DirtyLength2D=512]="DirtyLength2D",h[h.DirtyRingAreas2D=1024]="DirtyRingAreas2D",h[h.DirtyCoordinates=1993]="DirtyCoordinates",h[h.DirtyAllInternal=65535]="DirtyAllInternal",h[h.DirtyAll=16777215]="DirtyAll"}(d.MK||(d.MK={}));var S=function(h){function l(){var s=h.call(this)||this;return s.Hm=65535,s.wa=0,s.Pg=-1,s.Bb=null,s}return Wt(l,h),l.prototype.op=function(){},l.prototype.$x=function(){},l.prototype.iy=function(){},l.prototype.I=function(){return this.wa},l.prototype.B=function(){return this.Ac()},l.prototype.Ac=function(){return this.wa==0},l.prototype.ak=function(s){return!!(this.Hm&s)},l.prototype.Lf=function(s,a){this.Hm=a?this.Hm|s:this.Hm&~s},l.prototype.mc=function(){this.ak(32)&&this.bN()},l.prototype.wx=function(){if(this.Ac())throw d.i.fa("This operation was performed on an Empty Geometry.")},l.prototype.ve=function(s,a){if(0>s||s>=this.wa)throw d.i.fa("index out of bounds");this.mc(),a.Nf(this.description),a.B()&&a.un();for(var c=0;c<this.description.Aa;c++)for(var p=this.description.Ed(c),y=0,v=d.ra.Va(p);y<v;y++){var _=this.za[c].eg(v*s+y);a.setAttribute(p,y,_)}},l.prototype.Ht=function(s,a){this.mc();for(var c=a.description,p=0;p<c.Aa;p++)for(var y=c.Ed(p),v=d.ra.Va(y),_=0;_<v;_++){var x=a.Uc(y,_);this.setAttribute(y,s,_,x)}},l.prototype.D=function(s,a){if(0>s||s>=this.I())throw d.i.ce();this.mc(),this.za[0].tc(2*s,a)},l.prototype.Na=function(s){var a=new d.h;return this.D(s,a),a},l.prototype.Gc=function(s,a){this.za[0].tc(2*s,a)},l.prototype.Cb=function(s,a,c){if(0>s||s>=this.wa)throw d.i.ce();this.mc();var p=this.za[0];c!==void 0?(p.write(2*s,a),p.write(2*s+1,c)):p.Tt(2*s,a),this.Pc(1993)},l.prototype.Cz=function(){if(void 0>=this.I())throw d.i.ce();this.mc();var s=this.za[0],a=new d.Nd;return a.x=s.read(NaN),a.y=s.read(NaN),a.z=this.hasAttribute(1)?this.za[1].eg():d.ra.se(1),a},l.prototype.dC=function(s){if(0>s||s>=this.I())throw d.i.ce();this.re(1),this.mc(),this.Pc(1993);var a=this.za[0];a.write(2*s,(void 0).x),a.write(2*s+1,(void 0).y),this.za[1].pr(s,(void 0).z)},l.prototype.Uc=function(s,a,c){if(0>a||a>=this.wa)throw d.i.ce();var p=d.ra.Va(s);if(c>=p)throw d.i.ce();this.mc();var y=this.description.Pf(s);return 0<=y?this.za[y].eg(a*p+c):d.ra.se(s)},l.prototype.yF=function(s,a){return this.Uc(s,a)},l.prototype.setAttribute=function(s,a,c,p){if(0>a||a>=this.wa)throw d.i.ce();var y=d.ra.Va(s);if(c>=y)throw d.i.ce();this.re(s),this.mc(),s=this.description.Pf(s),this.Pc(1993),this.za[s].pr(a*y+c,p)},l.prototype.ub=function(s){return this.wx(),this.re(s),this.mc(),this.za[this.description.Pf(s)]},l.prototype.hn=function(s,a){if(a!=null&&d.ra.Tp(s)!=a.Tp())throw d.i.N();this.re(s),s=this.description.Pf(s),this.za==null&&(this.za=d.Yc.qI(this.description.Aa)),this.za[s]=a,this.Pc(16777215)},l.prototype.sn=function(s){var a=null;if(this.za!=null){var c=d.ee.Iw(s,this.description);a=[];for(var p=0,y=s.Aa;p<y;p++)c[p]!=-1&&(a[p]=this.za[c[p]])}this.description=s,this.za=a,this.Pg=-1,this.Pc(16777215)},l.prototype.AD=function(s){this.wu(!0),s instanceof d.l?this.$.A(s):this.$.Qo(s)},l.prototype.aN=function(s){this.wu(!1),s instanceof d.l?this.$.A(s):this.$.Qo(s)},l.prototype.bn=function(s){this.wu(!0),this.$.copyTo(s)},l.prototype.A=function(s){this.AD(s)},l.prototype.Qo=function(s){this.AD(s)},l.prototype.xc=function(s){this.aN(s)},l.prototype.Tg=function(s,a){var c=new d.Nc;return this.Ac()?(c.Oa(),c):(this.wu(!0),this.$.Tg(s,a))},l.prototype.cc=function(){var s=this.description.cc();if(!this.Ac())for(var a=this.I(),c=0,p=this.description.Aa;c<p;c++)s=this.za[c].An(s,0,a*d.ra.Va(this.description.Ed(c)));return s},l.prototype.Nb=function(s){if(s==this)return!0;if(!(s instanceof l&&this.description.Nb(s.description))||this.Ac()!=s.Ac())return!1;if(this.Ac())return!0;var a=this.I();if(a!=s.I())return!1;for(var c=0;c<this.description.Aa;c++){var p=this.description.kd(c),y=this.ub(p),v=s.ub(p);if(!y.Nb(v,0,a*d.ra.Va(p)))return!1}return!0},l.prototype.copyTo=function(s){if(s.getType()!=this.getType())throw d.i.N();this.dD(s)},l.prototype.dD=function(s){this.mc(),s.description=this.description,s.za=null;var a=this.description.Aa,c=null;if(this.za!=null){c=[];for(var p=0;p<a;p++)this.za[p]!=null&&(c[p]=this.za[p].GB(this.I()*d.ra.Va(this.description.Ed(p))))}this.$!=null?(s.$=this.$.Ia(),this.$.copyTo(s.$)):s.$=null,s.wa=this.wa,s.Hm=this.Hm,s.za=c;try{this.op(s)}catch{throw s.Oa(),d.i.fu()}},l.prototype.wD=function(){this.wa=0,this.Pg=-1,this.za=null,this.Pc(16777215)},l.prototype.Pc=function(s){s==16777215&&(this.Pg=-1,this.$x()),this.Hm|=s,this.lM(),this.vc()},l.prototype.wu=function(s){if(this.mc(),this.ak(192))if(this.$==null?this.$=new d.Fh(this.description):this.$.Nf(this.description),this.B())this.$.Oa();else{this.hy(s);for(var a=1;a<this.description.Aa;a++)for(var c=this.description.Ed(a),p=d.ra.Va(c),y=this.za[a],v=0;v<p;v++){var _=new d.Nc;_.Oa();for(var x=0;x<this.wa;x++){var T=y.eg(x*p+v);_.Zb(T)}this.$.setInterval(c,v,_)}s&&this.Lf(192,!1)}},l.prototype.hy=function(){this.$.Oa();for(var s=this.za[0],a=new d.h,c=0;c<this.wa;c++)s.tc(2*c,a),this.$.Zb(a)},l.prototype.yp=function(s){s.Oa();for(var a=this.za[0],c=new d.h,p=0;p<this.wa;p++)a.tc(2*p,c),s.Zb(c)},l.prototype.bN=function(){if(this.Pg<this.wa){this.za==null&&(this.za=d.Yc.qI(this.description.Aa)),this.Pg=2147483647;for(var s=0;s<this.description.Aa;s++){var a=this.description.Ed(s);if(this.za[s]!=null){var c=d.ra.Va(a),p=d.O.truncate(this.za[s].size/c);p<this.wa&&(p=d.O.truncate(this.Pg>this.wa+5?(5*this.wa+3)/4:this.wa),this.za[s].resize(p*c,d.ra.se(a))),p<this.Pg&&(this.Pg=p)}else this.za[s]=d.Yc.YE(a,this.wa),this.Pg=this.wa}}this.iy(),this.Lf(32,!1)},l.prototype.dm=function(s){if(0>s)throw d.i.N();s!=this.wa&&(this.wa=s,this.Pc(65535))},l.prototype.om=function(s){if(!this.ak(1)){if(!this.ak(2))return 0;if(this.QT>=s)return this.ak(8)?1:2}return-1},l.prototype.Ch=function(s,a){if(this.QT=a,s==-1)this.Lf(1,!0),this.Lf(8,!0);else if(this.Lf(1,!1),this.Lf(8,!0),s==0)this.Lf(2,!1),this.Lf(4,!1);else if(s==1)this.Lf(2,!0),this.Lf(4,!1);else{if(s!=2)throw d.i.fa("internal error.");this.Lf(2,!0),this.Lf(4,!0)}},l.prototype.lM=function(){this.Bb!=null&&(this.Bb=null)},l.prototype.kD=function(s,a,c,p){if(0>s||s>=this.wa||0>a||a>=this.wa)throw d.i.fa("index out of bounds");this.mc(),p.Nf(this.description),p.B()&&p.un();for(var y=0;y<this.description.Aa;y++)for(var v=this.description.Ed(y),_=0,x=d.ra.Va(v);_<x;_++){var T=this.za[y].eg(x*s+_),C=this.za[y].eg(x*a+_);p.setAttribute(v,_,d.lc.hq(T,C,c))}},l.prototype.yr=function(s,a){var c=this.za[0].o,p=c[2*s]-c[2*a];return s=c[2*s+1]-c[2*a+1],Math.sqrt(p*p+s*s)},l.prototype.KR=function(s){if(0>s||s>=this.wa)throw d.i.ce();this.mc();var a=new d.Sa;a.Nf(this.description),a.B()&&a.un();for(var c=0;c<this.description.Aa;c++)for(var p=this.description.kd(c),y=0,v=d.ra.Va(p);y<v;y++){var _=this.za[c].eg(v*s+y);a.setAttribute(p,y,_)}return a},l.prototype.Dh=function(s,a){if(0>s||s>=this.wa)throw d.i.ce();if(a.B())throw d.i.N();this.mc();for(var c=a.description,p=0;p<c.Aa;p++)for(var y=c.kd(p),v=d.ra.Va(y),_=0;_<v;_++){var x=a.Uc(y,_);this.setAttribute(y,s,_,x)}},l.prototype.lu=function(){return null},l.prototype.fj=function(){return null},l}(d.aa);d.Gx=S}(Y||(Y={})),function(d){var O=function(){function S(){this.ob=this.Zn=null,this.Tm=124234251,this.Rv=!0,this.Qe=-1,this.ob=new d.$c(7),this.Zn=null}return S.prototype.Vo=function(h){this.Zn=h},S.prototype.RP=function(){this.Rv=!1},S.prototype.De=function(h){this.ob.De(h)},S.prototype.Pr=function(h){var l=this.ob.Ce();return this.rX(l),this.uX(h,l),l},S.prototype.MP=function(h){this.ob.jd(h)},S.prototype.addElement=function(h,l){return l==-1&&(this.Qe==-1&&(this.Qe=this.Pr(-1)),l=this.Qe),this.FD(h,0,l)},S.prototype.KD=function(h){return this.Qe==-1&&(this.Qe=this.Pr(-1)),this.FD(h,1,this.Qe)},S.prototype.xn=function(h){this.Qe==-1&&(this.Qe=this.Pr(-1));var l=this.Qe,s=this.ob.o;if(l==-1||s[7*l]==-1)return h=this.ob.Ll([-1,-1,-1,h,this.gl(),-1,-1]),(s=this.ob.o)[7*l]=h,this.vp(-1,h,l,s),h;var a=l==-1?-1:s[7*l+2];return h=this.ob.Ll([-1,-1,a,h,this.gl(),-1,-1]),(s=this.ob.o)[7*a+1]=h,this.oy(h,s),s[7*h+2]===-1&&(s[7*l]=h),this.vp(-1,h,l,s),h},S.prototype.zu=function(h,l,s,a){var c=-1;c==-1&&(this.Qe==-1&&(this.Qe=this.Pr(-1)),c=this.Qe);var p=this.ob.o;if(c==-1||p[7*c]==-1)return s=this.ob.Ll([-1,-1,-1,s,this.gl(),-1,-1]),(p=this.ob.o)[7*c]=s,this.vp(-1,s,c,p),s;if(a){a=l!=-1?this.Zn.compare(this,s,l):-1;var y=h!=-1?this.Zn.compare(this,s,h):1}else a=-1,y=1;if(a==0||y==0)return p[7*c+3]=a==0?l:h,-1;for((l!=-1&&h!=-1?this.Tm>d.O.bB(this.Tm)>>1:l!=-1)?h=l:a=y,l=!0;;){if(0>a){if((y=p[7*h])==-1){a=h,s=this.ob.Ll([-1,-1,h,s,this.gl(),-1,-1]),(p=this.ob.o)[7*h]=s;break}h=y}else{if((y=p[7*h+1])==-1){a=p[7*h+6],s=this.ob.Ll([-1,-1,h,s,this.gl(),-1,-1]),(p=this.ob.o)[7*h+1]=s;break}h=y}l&&(a*=-1,l=!1)}return this.oy(s,p),p[7*s+2]===-1&&(p[7*c]=s),this.vp(a,s,c,p),s},S.prototype.FF=function(){return this.iR(this.Qe)},S.prototype.vd=function(h,l){l=l==-1?this.Qe:l,this.Rv?this.LP(h,l):this.iY(h,l)},S.prototype.search=function(h,l){for(l=this.sv(l);l!=-1;){var s=this.Zn.compare(this,h,l);if(s==0)return l;l=0>s?this.ll(l):this.Xp(l)}return-1},S.prototype.IW=function(h){for(var l=this.sv(-1),s=-1;l!=-1;){var a=h.compare(this,l);if(a==0)return l;0>a?l=this.ll(l):(s=l,l=this.Xp(l))}return s},S.prototype.uJ=function(h){for(var l=this.sv(-1),s=-1;l!=-1;){var a=h.compare(this,l);if(a==0)return l;0>a?(s=l,l=this.ll(l)):l=this.Xp(l)}return s},S.prototype.ja=function(h){return this.ob.T(h,3)},S.prototype.ll=function(h){return this.ob.T(h,0)},S.prototype.Xp=function(h){return this.ob.T(h,1)},S.prototype.getParent=function(h){return this.ob.T(h,2)},S.prototype.lb=function(h){return this.ob.T(h,6)},S.prototype.we=function(h){return this.ob.T(h,5)},S.prototype.rc=function(h){return h==-1?this.kl(this.Qe):this.kl(h)},S.prototype.Fc=function(h){return h==-1?this.Zr(this.Qe):this.Zr(h)},S.prototype.ZR=function(h){return h==-1?this.bG(this.Qe):this.bG(h)},S.prototype.Sj=function(h,l){this.NB(h,l)},S.prototype.sv=function(h){return h==-1?this.YF(this.Qe):this.YF(h)},S.prototype.clear=function(){this.ob.mj(!1),this.Qe=-1},S.prototype.size=function(h){return h==-1?this.$F(this.Qe):this.$F(h)},S.prototype.KN=function(h,l){for(var s=l[7*h],a=l[7*h+1],c=l[7*h+4];s!=-1||a!=-1;){var p=s!=-1?l[7*s+4]:2147483647;if(a=a!=-1?l[7*a+4]:2147483647,c<=Math.min(p,a))break;p<=a?this.sJ(s,l):this.rJ(h,l),s=l[7*h],a=l[7*h+1]}},S.prototype.oy=function(h,l){if(this.Rv)for(var s=l[7*h+4],a=l[7*h+2];a!=-1&&l[7*a+4]>s;)l[7*a]==h?this.sJ(h,l):this.rJ(a,l),a=l[7*h+2]},S.prototype.rJ=function(h,l){var s=l[7*h+1];l[7*s+2]=l[7*h+2],l[7*h+2]=s;var a=l[7*s];l[7*h+1]=a,a!=-1&&(l[7*a+2]=h),l[7*s]=h,(a=l[7*s+2])!=-1&&(l[7*a]==h?l[7*a]=s:l[7*a+1]=s)},S.prototype.sJ=function(h,l){var s=l[7*h+2];l[7*h+2]=l[7*s+2],l[7*s+2]=h;var a=l[7*h+1];l[7*s]=a,a!=-1&&(l[7*a+2]=s),l[7*h+1]=s,(a=l[7*h+2])!=-1&&(l[7*a]===s?l[7*a]=h:l[7*a+1]=h)},S.prototype.Pk=function(h,l){this.ob.S(h,2,l)},S.prototype.TB=function(h,l){this.ob.S(h,0,l)},S.prototype.XB=function(h,l){this.ob.S(h,1,l)},S.prototype.WB=function(h,l){this.ob.S(h,5,l)},S.prototype.ex=function(h,l){this.ob.S(h,6,l)},S.prototype.XJ=function(h,l){this.ob.S(l,0,h)},S.prototype.rX=function(h){this.ob.S(h,4,0)},S.prototype.uX=function(h,l){this.ob.S(l,5,h)},S.prototype.YF=function(h){return h==-1?-1:this.ob.T(h,0)},S.prototype.kl=function(h){return h==-1?-1:this.ob.T(h,1)},S.prototype.Zr=function(h){return h==-1?-1:this.ob.T(h,2)},S.prototype.iR=function(h){return h==-1?-1:this.ob.T(h,3)},S.prototype.$F=function(h){return h==-1?0:this.ob.T(h,4)},S.prototype.bG=function(h){return this.ob.T(h,5)},S.prototype.Pw=function(){return this.ob.Ll([-1,-1,-1,void 0,this.gl(),-1,-1])},S.prototype.fl=function(h){h!=-1&&this.ob.jd(h)},S.prototype.gl=function(){return this.Tm=d.O.bB(this.Tm),1073741823&this.Tm},S.prototype.FD=function(h,l,s){var a=this.ob.o;if(s==-1||a[7*s]==-1)return h=this.ob.Ll([-1,-1,-1,h,this.gl(),-1,-1]),(a=this.ob.o)[7*s]=h,this.vp(-1,h,s,a),h;for(var c=s==-1?-1:a[7*s];;){var p=l==-1?1:this.Zn.compare(this,h,c);if(0>p){if((p=this.ll(c))==-1){l=c,h=this.ob.Ll([-1,-1,c,h,this.gl(),-1,-1]),(a=this.ob.o)[7*c]=h;break}c=p}else{if(l==1&&p==0)return a[7*s+3]=c,-1;if((p=a[7*c+1])==-1){l=a[7*c+6],h=this.ob.Ll([-1,-1,c,h,this.gl(),-1,-1]),(a=this.ob.o)[7*c+1]=h;break}c=p}}return this.oy(h,a),a[7*h+2]===-1&&(a[7*s]=h),this.vp(l,h,s,a),h},S.prototype.vp=function(h,l,s,a){if(h!=-1){var c=a[7*h+5];a[7*h+5]=l}else c=s==-1?-1:a[7*s+2];a[7*l+5]=c,c!=-1&&(a[7*c+6]=l),a[7*l+6]=h,h==(s==-1?-1:a[7*s+1])&&(a[7*s+1]=l),h==-1&&(a[7*s+2]=l),a[7*s+4]=(s==-1?0:a[7*s+4])+1},S.prototype.AB=function(h,l){var s=this.ob.o,a=s[7*h+5];h=s[7*h+6],a!=-1?s[7*a+6]=h:s[7*l+1]=h,h!=-1?s[7*h+5]=a:s[7*l+2]=a,s[7*l+4]=l===-1?-1:s[7*l+4]-1},S.prototype.iY=function(h,l){this.AB(h,l);var s=this.ll(h),a=this.Xp(h),c=this.getParent(h),p=h;if(s!=-1&&a!=-1){this.Tm=d.O.bB(this.Tm);var y=1073741823<this.Tm?this.lb(h):this.we(h),v=this.getParent(y)==h;this.ob.gC(h,y,0),this.ob.gC(h,y,1),this.ob.gC(h,y,2),c!=-1?this.ll(c)==h?this.TB(c,y):this.XB(c,y):this.XJ(y,l),v?(s==y?(this.TB(y,h),this.Pk(a,y)):a==y&&(this.XB(y,h),this.Pk(s,y)),this.Pk(h,y),c=y):(this.Pk(s,y),this.Pk(a,y),c=this.getParent(h),p=y),s=this.ll(h),a=this.Xp(h),s!=-1&&this.Pk(s,h),a!=-1&&this.Pk(a,h)}s=s!=-1?s:a,c==-1?this.XJ(s,l):this.ll(c)==p?this.TB(c,s):this.XB(c,s),s!=-1&&this.Pk(s,c),this.fl(h)},S.prototype.LP=function(h,l){var s=this.ob.o;s[7*h+4]=2147483647;var a=-1,c=-1,p=l===-1?-1:s[7*l],y=p==h;if(y&&(a=s[7*p],c=s[7*p+1],a==-1&&c==-1))return this.AB(p,l),this.fl(p),void(s[7*l]=-1);this.KN(h,s),(p=s[7*h+2])!=-1&&(s[7*p]==h?s[7*p]=-1:s[7*p+1]=-1),this.AB(h,l),this.fl(h),y&&(s[7*l]=a==-1||s[7*a+2]!=-1?c:a)},S.prototype.NB=function(h,l){this.ob.S(h,3,l)},S}();d.Yj=O}(Y||(Y={})),function(d){var O=function(){function S(h,l){h!==void 0&&this.K(h,l)}return S.prototype.K=function(h,l){this.oa=h,this.va=l,this.normalize()},S.prototype.isIntersecting=function(h){return this.oa<=h.oa?this.va>=h.oa:h.va>=this.oa},S.prototype.move=function(h){this.B()||(this.oa+=h,this.va+=h)},S.prototype.normalize=function(){if(!isNaN(this.oa)){if(this.oa>this.va){var h=this.oa;this.oa=this.va,this.va=h}isNaN(this.va)&&this.Oa()}},S.prototype.Oa=function(){this.va=this.oa=NaN},S.prototype.B=function(){return isNaN(this.oa)},S.prototype.Zb=function(h){typeof h=="number"?this.B()?this.va=this.oa=h:this.Lk(h):h.B()||(this.B()?(this.oa=h.oa,this.va=h.va):(this.oa>h.oa&&(this.oa=h.oa),this.va<h.va&&(this.va=h.va),this.oa>this.va&&this.Oa()))},S.prototype.Lk=function(h){h<this.oa?this.oa=h:h>this.va&&(this.va=h)},S.prototype.contains=function(h){return typeof h=="number"?h>=this.oa&&h<=this.va:h.oa>=this.oa&&h.va<=this.va},S.prototype.Ea=function(h){this.B()||h.B()?this.Oa():(this.oa<h.oa&&(this.oa=h.oa),this.va>h.va&&(this.va=h.va),this.oa>this.va&&this.Oa())},S.prototype.W=function(h){this.B()||(this.oa-=h,this.va+=h,this.va<this.oa&&this.Oa())},S.prototype.xr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.oa)+Math.abs(this.va)+1)},S.prototype.KB=function(h,l){h>l?(this.oa=l,this.va=h):(this.oa=h,this.va=l)},S.prototype.It=function(h){return d.O.Rk(h,this.oa,this.va)},S.prototype.R=function(){return this.va-this.oa},S.prototype.sf=function(){return .5*(this.oa+this.va)},S.prototype.Nb=function(h){return h==this||h instanceof S&&(!(!this.B()||!h.B())||this.oa==h.oa&&this.va==h.va)},S.prototype.cc=function(){return d.O.uj(d.O.uj())},S}();d.Nc=O}(Y||(Y={})),function(d){var O=new d.Nc,S=new d.Nc,h=function(){this.ne=null,this.pb=-1,this.sb=new d.yb,this.qA=55555555,this.Tv=this.Vv=!1,this.Uf=new d.Nc,this.Uf.KB(0,0)};d.IY=h;var l=function(){function s(a,c,p){this.g=a,this.Hk=NaN,this.NH=this.Kq=0,this.OH=NaN,this.qa=c,this.Nq=10*c,this.PH=this.QH=NaN,this.rg=!1,this.Dm=this.gt=this.Lo=this.Xs=this.Ws=-1,this.gA=p,this.TA=new h,this.YH=new h,d.O.truncate(3*a.fd/2)}return s.prototype.mG=function(a,c,p,y){a.ne=y===null?null:y[p[5*c]],a.Tv=a.ne!=null,a.Tv||((y=p[5*c+2])!==-1&&this.g.mW(p[5*c],p[5*y],a.sb),a.ne=a.sb,a.Uf.KB(a.sb.sa,a.sb.pa),a.Uf.va+=this.qa,a.sb.rI(),a.Vv=a.sb.la==a.sb.na,a.Vv||(a.qA=(a.sb.pa-a.sb.sa)/(a.sb.la-a.sb.na)))},s.prototype.OO=function(a,c){var p=a.zr(c,this.qa,!0);return p!=0?p==2?this.Qy():this.xi():(a.Yp(Ta),a.Tr(Un),c.Yp(Tu),c.Tr(Uc),rr.ma(this.Kq,this.Hk),Ta.qb(Tu)&&this.Hk==Ta.y?0>Un.compare(Uc)?rr.L(Un):rr.L(Uc):Ta.qb(Uc)&&this.Hk==Ta.y?0>Un.compare(Tu)?rr.L(Un):rr.L(Tu):Tu.qb(Un)&&this.Hk==Tu.y?0>Ta.compare(Uc)?rr.L(Ta):rr.L(Uc):Un.qb(Uc)&&this.Hk==Un.y&&(0>Ta.compare(Tu)?rr.L(Ta):rr.L(Tu)),a.Pe(rr.y,rr.x)<c.Pe(rr.y,rr.x)?-1:1)},s.prototype.MO=function(a,c){if(a.sb.na==c.sb.na&&a.sb.sa==c.sb.sa)return a.sb.la==c.sb.la&&a.sb.pa==c.sb.pa?this.gA?this.Qy():0:this.PE(a,c);if(a.sb.la==c.sb.la&&a.sb.pa==c.sb.pa)return this.OE(a,c);var p=this.OE(a,c);return a=this.PE(a,c),0>p&&0>a?-1:0<p&&0<a?1:this.xi()},s.prototype.IO=function(a,c){if(a.pa>c.pa){if(c.pa>c.sa&&c.la-c.na<2*this.qa&&a.vi(c.pa,c.la,this.qa))return this.xi()}else if((c.la-c.na)/(c.pa-c.sa)*(a.pa-a.sa)<this.Nq&&c.vi(a.pa,a.la,this.qa))return this.xi();return 1},s.prototype.JO=function(a,c){if(a.sa<c.sa){if(c.pa>c.sa&&c.la-c.na<2*this.qa&&a.vi(c.pa,c.la,this.qa))return this.xi()}else if((c.la-c.na)/(c.pa-c.sa)*(a.sa-a.pa)<this.Nq&&c.vi(a.sa,a.na,this.qa))return this.xi();return-1},s.prototype.KO=function(a,c){var p=new d.h;p.uc(c.wc(),c.ac()),p.ar(),p.normalize();var y=new d.h;y.uc(a.ac(),c.ac());var v=new d.h;v.uc(a.wc(),c.ac()),y=y.Qh(p),p=v.Qh(p),v=Math.abs(y);var _=Math.abs(p);if(v<_){if(v<this.Nq&&c.vi(a.sa,a.na,this.qa))return this.xi()}else if(_<this.Nq&&c.vi(a.pa,a.la,this.qa))return this.xi();return 0>y&&0>p?-1:0<y&&0<p?1:this.xi()},s.prototype.NE=function(a,c){return a.na==c.na&&a.sa==c.sa?this.IO(a,c):a.la==c.la&&a.pa==c.pa?this.JO(a,c):this.KO(a,c)},s.prototype.LO=function(a,c){return a.la==c.la&&a.pa==c.pa&&a.na==c.na&&a.sa==c.sa?this.gA?this.Qy():0:this.xi()},s.prototype.OE=function(a,c){var p=1;if(a.sb.na<c.sb.na){p=-1;var y=a;a=c,c=y}a=a.sb,y=c.sb;var v=a.sa-y.sa;c=c.qA*(a.na-y.na);var _=this.Nq;return v<c-_?-p:v>c+_?p:y.vi(a.sa,a.na,this.qa)?this.xi():v<c?-p:p},s.prototype.PE=function(a,c){var p=1;if(c.sb.la<a.sb.la){p=-1;var y=a;a=c,c=y}a=a.sb,y=c.sb;var v=a.pa-y.sa;c=c.qA*(a.la-y.na);var _=this.Nq;return v<c-_?-p:v>c+_?p:y.vi(a.pa,a.la,this.qa)?this.xi():v<c?-p:p},s.prototype.Qy=function(){return this.rg=!0,this.Ni=new d.Md(5,this.Lo,this.gt),-1},s.prototype.xi=function(){return this.rg=!0,this.gA?this.Ni=new d.Md(4,this.Lo,this.gt):this.gt=this.Lo=this.Xs=this.Ws=-1,-1},s.prototype.NO=function(a,c,p,y){if(this.rg)return-1;var v=this.OH==this.Hk&&this.NH==this.Kq;if(v&&a==this.Ws)var _=this.PH;else _=NaN,this.Ws=-1;return v&&c==this.Xs?v=this.QH:(v=NaN,this.Xs=-1),p.ne.ZI(O),y.ne.ZI(S),O.va<S.oa?-1:S.va<O.oa?1:(this.OH=this.Hk,this.NH=this.Kq,isNaN(_)&&(this.Ws=a,this.PH=_=a=p.ne.Pe(this.Hk,this.Kq)),isNaN(v)&&(this.Xs=c,this.QH=v=a=y.ne.Pe(this.Hk,this.Kq)),Math.abs(_-v)<=this.qa?this.OO(p.ne,y.ne):_<v?-1:_>v?1:0)},s.prototype.Kr=function(){this.rg=!1},s.prototype.rm=function(){return this.Ni},s.prototype.$J=function(a,c){this.Hk=a,this.Kq=c,this.gt=this.Lo=this.Xs=this.Ws=-1},s.prototype.compare=function(a,c,p){return this.rg?-1:(a=a.ja(p),this.Dm=p,this.RE(c,c,a,a))},s.prototype.RE=function(a,c,p,y){if(this.Lo==c)var v=this.TA;else this.Lo=c,v=this.TA,this.TA.pb=a,this.mG(v,c,this.g.td.o,this.g.We);if(_==null){this.gt=y;var _=this.YH;this.YH.pb=p,this.mG(_,y,this.g.td.o,this.g.We)}return v.Tv||_.Tv?this.NO(c,y,v,_):v.Uf.va<_.Uf.oa?-1:_.Uf.va<v.Uf.oa?1:(a=v.Vv?1:0,(a|=_.Vv?2:0)==0?this.MO(v,_):a==1?this.NE(v.sb,_.sb):a==2?-1*this.NE(_.sb,v.sb):this.LO(v.sb,_.sb))},s}();d.UC=l}(Y||(Y={})),function(d){var O=function(){function S(h,l){this.g=h,this.qa=l,this.rg=!1,this.Lo=-1,this.Uf=new d.Nc,this.Gq=new d.h,this.Gq.Rc(),this.ie=new d.yb,this.Dm=-1,this.BA=17976931348623157e292}return S.prototype.Kr=function(){this.rg=!1,this.BA=17976931348623157e292},S.prototype.Dh=function(h){this.Gq.L(h)},S.prototype.compare=function(h,l){return this.SE(l,h.ja(l))},S.prototype.SE=function(h,l){var s=this.g.bc(l)!=null;if(s||(this.g.ed(l,this.ie),this.Uf.KB(this.ie.sa,this.ie.pa)),s)throw d.i.fa("not implemented");if(this.Gq.x+this.qa<this.Uf.oa)return-1;if(this.Gq.x-this.qa>this.Uf.va)return 1;if(this.ie.na==this.ie.la)return this.Dm=h,this.rg=!0,0;this.ie.rI(),s=this.ie.ac(),(l=new d.h).uc(this.ie.wc(),s),l.ar();var a=new d.h;return a.uc(this.Gq,s),s=l.Qh(a),(s/=l.length())<10*-this.qa?-1:s>10*this.qa?1:this.ie.qs(this.Gq,this.qa)&&((l=Math.abs(s))<this.BA&&(this.Dm=h,this.BA=l),this.rg=!0,l<.25*this.qa)?0:0>s?-1:1},S}();d.aM=O}(Y||(Y={})),function(d){function O(h,l,s,a){s=new Float64Array(h.subarray(s,a)),h.set(s,l)}var S=function(){function h(l){this.Pb=this.pk=!1,this.o=null;var s=l;2>s&&(s=2),this.o=new Float64Array(s),this.size=l}return h.prototype.rotate=function(l,s,a){if(this.Pb)throw d.i.fa("invalid_call");if(s<l||s>a||l>a)throw d.i.N();l!=s&&a!=s&&(this.ni(l,s-l,1),this.ni(s,a-s,1),this.ni(l,a-l,1))},h.qf=function(l,s){var a=new h(l),c=a.o;if(2>l&&(l=2),s!==0)for(var p=0;p<l;p++)c[p]=s;return a},h.Bn=function(l){var s=new h(0);return s.o=new Float64Array(l.o),s.size=l.size,s},h.Lr=function(l,s){var a=new h(0);return a.size=l.size,a.size>s&&(a.size=s),2>(s=a.size)&&(s=2),a.o=new Float64Array(s),a.o.set(l.o.length<=s?l.o:l.o.subarray(0,s),0),a},h.prototype.Jb=function(l){0>=l||(this.o==null?this.o=new Float64Array(l):l<=this.o.length||(0<this.o.length?((l=new Float64Array(l)).set(this.o),this.o=l):this.o=new Float64Array(l)))},h.prototype.read=function(l){return this.o[l]},h.prototype.tc=function(l,s){s.x=this.o[l],s.y=this.o[l+1]},h.prototype.get=function(l){return this.o[l]},h.prototype.write=function(l,s){if(this.Pb)throw d.i.Hb();this.o[l]=s},h.prototype.set=function(l,s){if(this.Pb)throw d.i.Hb();this.o[l]=s},h.prototype.Tt=function(l,s){if(this.Pb)throw d.i.Hb();this.o[l]=s.x,this.o[l+1]=s.y},h.prototype.add=function(l){this.resize(this.size+1),this.o[this.size-1]=l},h.prototype.GB=function(l){return h.Lr(this,l)},h.prototype.eg=function(l){return this.read(l)},h.prototype.resize=function(l,s){if(s===void 0&&(s=0),this.pk)throw d.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(l<=this.size){if(30<this.o.length&&5*l/4<this.o.length){var a=new Float64Array(this.o,0,l);this.o=a}}else{l>this.o.length&&(a=d.O.truncate(64>l?Math.max(2*l,4):5*l/4),(a=new Float64Array(a)).set(this.o),this.o=a),a=this.o;for(var c=this.size;c<l;c++)a[c]=s}this.size=l},h.prototype.Bh=function(l){if((this.o==null||l>this.o.length)&&this.resize(l),this.pk)throw d.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=l},h.prototype.pr=function(l,s){this.write(l,s)},h.prototype.An=function(l,s,a){for(var c=this.size;s<c&&s<a;s++)l=d.O.uj(this.read(s));return l},h.prototype.Nb=function(l,s,a){if(l==null||!(l instanceof h))return!1;var c=this.size,p=l.size;if(a>c||a>p&&c!=p)return!1;for(a>c&&(a=c);s<a;s++)if(this.read(s)!=l.read(s))return!1;return!0},h.prototype.addRange=function(l,s,a,c,p){if(this.Pb)throw d.i.Hb();if(!c&&(1>p||a%p!=0))throw d.i.N();var y=this.size;if(this.resize(y+a),c)this.o.set(l.o.subarray(s,s+a),y);else{c=a;for(var v=0;v<a;v+=p){c-=p;for(var _=0;_<p;_++)this.o[y+v+_]=l.o[s+c+_]}}},h.prototype.Mn=function(l,s,a,c,p,y,v){if(this.Pb)throw d.i.Hb();if(!p&&(1>y||c%y!=0))throw d.i.N();var _=this.size-v;if(_<c&&this.resize(this.size+c-_),O(this.o,l+c,l,l+(v-l)),this.o==s.o&&l<a&&(a+=c),p)this.o.set(s.o.subarray(a,a+c),l);else for(p=c,v=0;v<c;v+=y)for(p-=y,_=0;_<y;_++)this.o[l+v+_]=s.o[a+p+_]},h.prototype.Iz=function(l,s,a,c,p,y){if(this.Pb)throw d.i.Hb();if(0>y&&(y=this.size),this.size+2*c>this.o.length?this.resize(this.size+2*c):this.size+=2*c,O(this.o,l+2*c,l,l+(y-l)),p)for(p=0;p<c;p++)y=s[a++],this.o[l++]=y.x,this.o[l++]=y.y;else{p=0;for(var v=c-1;p<c;++p)y=s[a+v],this.o[l++]=y.x,this.o[l++]=y.y,v--}},h.prototype.Ln=function(l,s,a,c){if(this.Pb)throw d.i.Hb();for(c-=l,O(this.o,l+c,l,l+c),c=0;c<a;c++)this.o[l+c]=s},h.prototype.vj=function(l,s,a){if(this.Pb)throw d.i.Hb();O(this.o,l+2,l,l+(a-l)),this.o[l]=s.x,this.o[l+1]=s.y},h.prototype.Ut=function(l,s,a,c,p,y){if(0>l||0>s||0>c||!p&&(0>=y||s%y!=0)||a.size<c+s)throw d.i.N();if(s!=0)if(this.size<s+l&&this.resize(s+l),a==this)this.Ar(l,s,c,p,y);else if(p)for(p=0;p<s;p++)this.o[l]=a.o[c],l++,c++;else if(c=c+s-y,y==1)for(p=0;p<s;p++)this.o[l]=a.o[c],l++,c--;else for(p=0,s=d.O.truncate(s/y);p<s;p++){for(var v=0;v<y;v++)this.o[l+v]=a.o[c+v];l+=y,c-=y}},h.prototype.En=function(l,s,a){if(this.Pb||l+s>this.size)throw d.i.Hb();0<a-(l+s)&&O(this.o,l,l+s,l+(a-(l+s))+s),this.size-=s},h.prototype.ni=function(l,s,a){if(this.Pb||1>a||s%a!=0)throw d.i.Hb();for(var c=s>>1,p=0;p<c;p+=a){s-=a;for(var y=0;y<a;y++){var v=this.o[l+p+y];this.o[l+p+y]=this.o[l+s+y],this.o[l+s+y]=v}}},h.prototype.Wj=function(l,s,a){if(0>s||0>a||0>s||a+s>this.size)throw d.i.N();for(var c=s;c<s+a;c++)this.o[c]=l},h.prototype.Ar=function(l,s,a,c,p){if(!(c&&l==a||(this.o.set(this.o.subarray(a,a+s),l),c)))for(a=l,l=l+s-p,c=0,s=d.O.truncate(s/2);c<s;c++){for(var y=0;y<p;y++){var v=this.o[a+y];this.o[a+y]=this.o[l+y],this.o[l+y]=v}a+=p,l-=p}},h.prototype.vC=function(l,s,a,c,p){if(0>l||0>s||0>c)throw d.i.N();if(s!=0)for(this.size<(s<<1)+l&&this.resize((s<<1)+l),p||(l+=s-1<<1),p=p?2:-2,s+=c;c<s;c++)this.o[l]=a[c].x,this.o[l+1]=a[c].y,l+=p},h.prototype.uC=function(l,s,a){if(0>l||0>s)throw d.i.N();if(s!=0){this.size<(s<<1)+l&&this.resize((s<<1)+l),s+=0;for(var c=0;c<s;c++)this.o[l]=a[c][0],this.o[l+1]=a[c][1],l+=2}},h.prototype.Vw=function(l,s,a,c,p){if(0>l||0>s||0>c||this.size<s+l)throw d.i.N();if(p)for(p=0;p<s;p++)a[c+p]=this.o[l+p];else for(c=c+s-1;l<s;l++)a[c]=this.o[l],c--},h.prototype.uB=function(l,s,a){if(0>l||0>s||this.size<(s>>1)+l)throw d.i.N();if(s!=0){s=0+s;for(var c=0;c<s;c++)a[c][0]=this.o[l],a[c][1]=this.o[l+1],l+=2}},h.prototype.clear=function(l){l?this.resize(0):this.Bh(0)},h.prototype.ix=function(){this.pk=this.Pb=!0},h.prototype.Vd=function(l,s,a){Array.prototype.sort.call(this.o.subarray(l,s),a)},h.prototype.Tp=function(){return 1},h}();d.be=S}(Y||(Y={})),function(d){function O(h,l,s,a){s=new Int32Array(h.subarray(s,a)),h.set(s,l)}d.rY=function(){this.random=1973};var S=function(){function h(l){this.Pb=this.pk=!1,this.o=null;var s=l;2>s&&(s=2),this.o=new Int32Array(s),this.size=l}return h.prototype.rotate=function(l,s,a){if(this.Pb)throw d.i.fa("invalid_call");if(s<l||s>a||l>a)throw d.i.N();l!=s&&a!=s&&(this.ni(l,s-l,1),this.ni(s,a-s,1),this.ni(l,a-l,1))},h.qf=function(l,s){var a=new h(l),c=a.o;if(2>l&&(l=2),s!==0)for(var p=0;p<l;p++)c[p]=s;return a},h.Bn=function(l){var s=new h(0);return s.o=new Int32Array(l.o),s.size=l.size,s},h.Lr=function(l,s){var a=new h(0);return a.size=l.size,a.size>s&&(a.size=s),2>(s=a.size)&&(s=2),a.o=new Int32Array(s),a.o.set(l.o.length<=s?l.o:l.o.subarray(0,s),0),a},h.prototype.Jb=function(l){0>=l||(this.o==null?this.o=new Int32Array(l):l<=this.o.length||(0<this.o.length?((l=new Int32Array(l)).set(this.o),this.o=l):this.o=new Int32Array(l)))},h.prototype.read=function(l){return this.o[l]},h.prototype.tc=function(l,s){s.x=this.o[l],s.y=this.o[l+1]},h.prototype.get=function(l){return this.o[l]},h.prototype.write=function(l,s){if(this.Pb)throw d.i.Hb();this.o[l]=s},h.prototype.set=function(l,s){if(this.Pb)throw d.i.Hb();this.o[l]=s},h.prototype.Tt=function(l,s){if(this.Pb)throw d.i.Hb();this.o[l]=s.x,this.o[l+1]=s.y},h.prototype.add=function(l){this.resize(this.size+1),this.o[this.size-1]=l},h.prototype.GB=function(l){return h.Lr(this,l)},h.prototype.eg=function(l){return this.read(l)},h.prototype.resize=function(l,s){if(s===void 0&&(s=0),this.pk)throw d.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(l<=this.size){if(30<this.o.length&&5*l/4<this.o.length){var a=new Int32Array(this.o,0,l);this.o=a}}else{l>this.o.length&&(a=d.O.truncate(64>l?Math.max(2*l,4):5*l/4),(a=new Int32Array(a)).set(this.o),this.o=a),a=this.o;for(var c=this.size;c<l;c++)a[c]=s}this.size=l},h.prototype.Bh=function(l){if((this.o==null||l>this.o.length)&&this.resize(l),this.pk)throw d.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=l},h.prototype.pr=function(l,s){this.write(l,s)},h.prototype.An=function(l,s,a){for(var c=this.size;s<c&&s<a;s++)l=d.O.Th(this.read(s),l);return l},h.prototype.Nb=function(l,s,a){if(l==null||!(l instanceof h))return!1;var c=this.size,p=l.size;if(a>c||a>p&&c!=p)return!1;for(a>c&&(a=c);s<a;s++)if(this.read(s)!=l.read(s))return!1;return!0},h.prototype.addRange=function(l,s,a,c,p){if(this.Pb)throw d.i.Hb();if(!c&&(1>p||a%p!=0))throw d.i.N();var y=this.size;if(this.resize(y+a),c)this.o.set(l.o.subarray(s,s+a),y);else{c=a;for(var v=0;v<a;v+=p){c-=p;for(var _=0;_<p;_++)this.o[y+v+_]=l.o[s+c+_]}}},h.prototype.Mn=function(l,s,a,c,p,y,v){if(this.Pb)throw d.i.Hb();if(!p&&(1>y||c%y!=0))throw d.i.N();if(O(this.o,l+c,l,l+(v-l)),this.o==s.o&&l<a&&(a+=c),p)this.o.set(s.o.subarray(a,a+c),l);else for(p=c,v=0;v<c;v+=y){p-=y;for(var _=0;_<y;_++)this.o[l+v+_]=s.o[a+p+_]}},h.prototype.Iz=function(l,s,a,c,p,y){if(this.Pb)throw d.i.Hb();if(0>y&&(y=this.size),this.size+2*c>this.o.length?this.resize(this.size+2*c):this.size+=2*c,O(this.o,l+2*c,l,l+(y-l)),p)for(p=0;p<c;p++)y=s[a++],this.o[l++]=y.x,this.o[l++]=y.y;else{p=0;for(var v=c-1;p<c;++p)y=s[a+v],this.o[l++]=y.x,this.o[l++]=y.y,v--}},h.prototype.Ln=function(l,s,a,c){if(this.Pb)throw d.i.Hb();for(c-=l,O(this.o,l+c,l,l+c),c=0;c<a;c++)this.o[l+c]=s},h.prototype.vj=function(l,s,a){if(this.Pb)throw d.i.Hb();O(this.o,l+2,l,l+(a-l)),this.o[l]=s.x,this.o[l+1]=s.y},h.prototype.Ut=function(l,s,a,c,p,y){if(0>l||0>s||0>c||!p&&(0>=y||s%y!=0)||a.size<c+s)throw d.i.N();if(s!=0)if(this.size<s+l&&this.resize(s+l),a==this)this.Ar(l,s,c,p,y);else if(p)for(p=0;p<s;p++)this.o[l]=a.o[c],l++,c++;else if(c=c+s-y,y==1)for(p=0;p<s;p++)this.o[l]=a.o[c],l++,c--;else for(p=0,s=d.O.truncate(s/y);p<s;p++){for(var v=0;v<y;v++)this.o[l+v]=a.o[c+v];l+=y,c-=y}},h.prototype.En=function(l,s,a){if(this.Pb||l+s>this.size)throw d.i.Hb();0<a-(l+s)&&O(this.o,l,l+s,l+(a-(l+s))+s),this.size-=s},h.prototype.ni=function(l,s,a){if(this.Pb||1>a||s%a!=0)throw d.i.Hb();for(var c=s>>1,p=0;p<c;p+=a){s-=a;for(var y=0;y<a;y++){var v=this.o[l+p+y];this.o[l+p+y]=this.o[l+s+y],this.o[l+s+y]=v}}},h.prototype.Wj=function(l,s,a){if(0>s||0>a||0>s||a+s>this.size)throw d.i.N();for(var c=s;c<s+a;c++)this.o[c]=l},h.prototype.Ar=function(l,s,a,c,p){if(!(c&&l==a||(this.o.set(this.o.subarray(a,a+s),l),c)))for(a=l,l=l+s-p,c=0,s=d.O.truncate(s/2);c<s;c++){for(var y=0;y<p;y++){var v=this.o[a+y];this.o[a+y]=this.o[l+y],this.o[l+y]=v}a+=p,l-=p}},h.prototype.vC=function(l,s,a,c,p){if(0>l||0>s||0>c)throw d.i.N();if(s!=0)for(this.size<(s<<1)+l&&this.resize((s<<1)+l),p||(l+=s-1<<1),p=p?2:-2,s+=c;c<s;c++)this.o[l]=a[c].x,this.o[l+1]=a[c].y,l+=p},h.prototype.Vw=function(l,s,a,c,p){if(0>l||0>s||0>c||this.size<s+l)throw d.i.N();if(p)for(p=0;p<s;p++)a[c+p]=this.o[l+p];else for(c=c+s-1;l<s;l++)a[c]=this.o[l],c--},h.prototype.clear=function(l){l?this.resize(0):this.Bh(0)},h.prototype.ix=function(){this.pk=this.Pb=!0},h.prototype.Vd=function(l,s,a){10>s-l?h.rG(this.o,l,s,a):h.qB(this.o,l,s-1,a)},h.prototype.Tp=function(){return 2},h.prototype.Fc=function(){return this.o[this.size-1]},h.prototype.If=function(){this.resize(this.size-1)},h.prototype.bX=function(l){this.o[this.size-1]=l},h.prototype.SV=function(l){l<this.size-1&&(this.o[l]=this.o[this.size-1]),this.resize(this.size-1)},h.prototype.lF=function(l){for(var s=0,a=this.size;s<a;s++)if(this.o[s]==l)return s;return-1},h.prototype.hG=function(l){return 0<=this.lF(l)},h.rG=function(l,s,a,c){for(var p=s;p<a;p++){for(var y=l[p],v=p-1;v>=s&&0<c(l[v],y);)l[v+1]=l[v],v--;l[v+1]=y}},h.tx=function(l,s,a){var c=l[a];l[a]=l[s],l[s]=c},h.qB=function(l,s,a,c){if(!(s>=a))for(;;){if(9>a-s){h.rG(l,s,a+1,c);break}var p=l[s];h.tx(l,s,a);for(var y=s,v=s;v<a;v++)0>=c(l[v],p)&&(h.tx(l,y,v),y+=1);h.tx(l,y,a),y-s<a-y?(h.qB(l,s,y-1,c),s=y+1):(h.qB(l,y+1,a,c),a=y-1)}},h}();d.ia=S}(Y||(Y={})),function(d){function O(h,l,s,a){s=new Int8Array(h.subarray(s,a)),h.set(s,l)}var S=function(){function h(l){this.o=null;var s=l;2>s&&(s=2),this.o=new Int8Array(s),this.size=l}return h.prototype.rotate=function(l,s,a){if(this.Pb)throw d.i.fa("invalid_call");if(s<l||s>a||l>a)throw d.i.N();l!=s&&a!=s&&(this.ni(l,s-l,1),this.ni(s,a-s,1),this.ni(l,a-l,1))},h.qf=function(l,s){var a=new h(l),c=a.o;if(2>l&&(l=2),s!==0)for(var p=0;p<l;p++)c[p]=s;return a},h.Bn=function(l){var s=new h(0);return s.o=new Int8Array(l.o),s.size=l.size,s},h.Lr=function(l,s){var a=new h(0);return a.size=l.size,a.size>s&&(a.size=s),2>(s=a.size)&&(s=2),a.o=new Int8Array(s),a.o.set(l.o.length<=s?l.o:l.o.subarray(0,s),0),a},h.prototype.Jb=function(l){0>=l||(this.o==null?this.o=new Int8Array(l):l<=this.o.length||(0<this.o.length?((l=new Int8Array(l)).set(this.o),this.o=l):this.o=new Int8Array(l)))},h.prototype.read=function(l){return this.o[l]},h.prototype.tc=function(l,s){s.x=this.o[l],s.y=this.o[l+1]},h.prototype.get=function(l){return this.o[l]},h.prototype.write=function(l,s){if(this.Pb)throw d.i.Hb();this.o[l]=s},h.prototype.set=function(l,s){if(this.Pb)throw d.i.Hb();this.o[l]=s},h.prototype.Tt=function(l,s){if(this.Pb)throw d.i.Hb();this.o[l]=s.x,this.o[l+1]=s.y},h.prototype.add=function(l){this.resize(this.size+1),this.o[this.size-1]=l},h.prototype.GB=function(l){return h.Lr(this,l)},h.prototype.eg=function(l){return this.read(l)},h.prototype.resize=function(l,s){if(s===void 0&&(s=0),this.pk)throw d.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(l<=this.size){if(30<this.o.length&&5*l/4<this.o.length){var a=new Int8Array(this.o,0,l);this.o=a}}else{l>this.o.length&&(a=d.O.truncate(64>l?Math.max(2*l,4):5*l/4),(a=new Int8Array(a)).set(this.o),this.o=a),a=this.o;for(var c=this.size;c<l;c++)a[c]=s}this.size=l},h.prototype.Bh=function(l){if((this.o==null||l>this.o.length)&&this.resize(l),this.pk)throw d.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=l},h.prototype.pr=function(l,s){this.write(l,s)},h.prototype.An=function(l,s,a){for(var c=this.size;s<c&&s<a;s++)l=d.O.Th(this.read(s),l);return l},h.prototype.Nb=function(l,s,a){if(l==null||!(l instanceof h))return!1;var c=this.size,p=l.size;if(a>c||a>p&&c!=p)return!1;for(a>c&&(a=c);s<a;s++)if(this.read(s)!=l.read(s))return!1;return!0},h.prototype.addRange=function(l,s,a,c,p){if(this.Pb)throw d.i.Hb();if(!c&&(1>p||a%p!=0))throw d.i.N();var y=this.size;if(this.resize(y+a),c)this.o.set(l.o.subarray(s,s+a),y);else{c=a;for(var v=0;v<a;v+=p){c-=p;for(var _=0;_<p;_++)this.o[y+v+_]=l.o[s+c+_]}}},h.prototype.Mn=function(l,s,a,c,p,y,v){if(this.Pb)throw d.i.Hb();if(!p&&(1>y||c%y!=0))throw d.i.N();if(O(this.o,l+c,l,l+(v-l)),this.o==s.o&&l<a&&(a+=c),p)this.o.set(s.o.subarray(a,a+c),l);else for(p=c,v=0;v<c;v+=y){p-=y;for(var _=0;_<y;_++)this.o[l+v+_]=s.o[a+p+_]}},h.prototype.Ln=function(l,s,a,c){if(this.Pb)throw d.i.Hb();for(c-=l,O(this.o,l+c,l,l+c),c=0;c<a;c++)this.o[l+c]=s},h.prototype.Iz=function(l,s,a,c,p,y){if(this.Pb)throw d.i.Hb();if(0>y&&(y=this.size),this.size+2*c>this.o.length?this.resize(this.size+2*c):this.size+=2*c,O(this.o,l+2*c,l,l+(y-l)),p)for(p=0;p<c;p++)y=s[a++],this.o[l++]=y.x,this.o[l++]=y.y;else{p=0;for(var v=c-1;p<c;++p)y=s[a+v],this.o[l++]=y.x,this.o[l++]=y.y,v--}},h.prototype.vj=function(l,s,a){if(this.Pb)throw d.i.Hb();O(this.o,l+2,l,l+(a-l)),this.o[l]=s.x,this.o[l+1]=s.y},h.prototype.Ut=function(l,s,a,c,p,y){if(0>l||0>s||0>c||!p&&(0>=y||s%y!=0)||a.size<c+s)throw d.i.N();if(s!=0)if(this.size<s+l&&this.resize(s+l),a==this)this.Ar(l,s,c,p,y);else if(p)for(p=0;p<s;p++)this.o[l]=a.o[c],l++,c++;else if(c=c+s-y,y==1)for(p=0;p<s;p++)this.o[l]=a.o[c],l++,c--;else for(p=0,s=d.O.truncate(s/y);p<s;p++){for(var v=0;v<y;v++)this.o[l+v]=a.o[c+v];l+=y,c-=y}},h.prototype.En=function(l,s,a){if(this.Pb||l+s>this.size)throw d.i.Hb();0<a-(l+s)&&O(this.o,l,l+s,l+(a-(l+s))+s),this.size-=s},h.prototype.ni=function(l,s,a){if(this.Pb||1>a||s%a!=0)throw d.i.Hb();for(var c=s>>1,p=0;p<c;p+=a){s-=a;for(var y=0;y<a;y++){var v=this.o[l+p+y];this.o[l+p+y]=this.o[l+s+y],this.o[l+s+y]=v}}},h.prototype.Wj=function(l,s,a){if(0>s||0>a||0>s||a+s>this.size)throw d.i.N();for(var c=s;c<s+a;c++)this.o[c]=l},h.prototype.Ar=function(l,s,a,c,p){if(!(c&&l==a||(this.o.set(this.o.subarray(a,a+s),l),c)))for(a=l,l=l+s-p,c=0,s=d.O.truncate(s/2);c<s;c++){for(var y=0;y<p;y++){var v=this.o[a+y];this.o[a+y]=this.o[l+y],this.o[l+y]=v}a+=p,l-=p}},h.prototype.vC=function(l,s,a,c,p){if(0>l||0>s||0>c)throw d.i.N();if(s!=0)for(this.size<(s<<1)+l&&this.resize((s<<1)+l),p||(l+=s-1<<1),p=p?2:-2,s+=c;c<s;c++)this.o[l]=a[c].x,this.o[l+1]=a[c].y,l+=p},h.prototype.Vw=function(l,s,a,c,p){if(0>l||0>s||0>c||this.size<s+l)throw d.i.N();if(p)for(p=0;p<s;p++)a[c+p]=this.o[l+p];else for(c=c+s-1;l<s;l++)a[c]=this.o[l],c--},h.prototype.clear=function(l){l?this.resize(0):this.Bh(0)},h.prototype.ix=function(){this.pk=this.Pb=!0},h.prototype.Vd=function(l,s,a){s=this.o.subarray(l,s),Array.prototype.sort.call(s,a),this.o.set(s,l)},h.prototype.zJ=function(l,s){if(this.Pb)throw d.i.fa("invalid call. Attribute Stream is read only.");this.o[l]|=s},h.prototype.KE=function(l,s){if(this.Pb)throw d.i.fa("invalid call. Attribute Stream is read only.");this.o[l]&=~s},h.prototype.Tp=function(){return 1},h}();d.pn=S}(Y||(Y={})),function(d){d.Yc=function(){function O(){}return O.Mr=function(S,h){return d.pn.qf(S,h)},O.Dn=function(S,h){return d.be.qf(S,h)},O.pP=function(S,h,l){switch(S){case 1:S=d.be.qf(h,l);break;case 2:S=d.ia.qf(h,l);break;case 4:S=d.pn.qf(h,l);break;default:throw d.i.Qa()}return S},O.YE=function(S,h){return O.pP(d.ra.Tp(S),h*d.ra.Va(S),d.ra.se(S))},O.Oh=function(S,h){return d.ia.qf(S,h)},O.qI=function(S){var h,l=[];for(h=0;h<S;h++)l.push(null);return l},O}()}(Y||(Y={})),function(d){d.ga=function(O){O===void 0&&(O=0),this.u=O}}(Y||(Y={})),function(d){d.NL=function(){function O(){}return O.bind=function(S){d.Sc=S.PeDefs,d.pf=S.PeFactory,d.NC=S.PeVertcs,d.ej=S.PeCSTransformations,d.MC=S.PeGTTransformations,d.LL=S.PeGeogtran,d.KL=S.PeFactoryCodechange,d.LC=S.PeGCSExtent,d.Cg=S.PePCSInfo,d.ML=S.PeHorizon,d.JL=S.PeCoordsys,d.lp=S.PeGTlistExtended,d.lp.PE_GTLIST_OPTS_USE_DEFAULT=128,d.pf.initialize(null),d.Mx=S.PeGTlistExtendedEntry,d.pf.fromString(d.Sc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},O}(),d.pf=null,d.NC=null,d.JL=null,d.ML=null,d.Cg=null,d.lp=null,d.Mx=null,d.LC=null,d.KL=null,d.LL=null,d.Sc=null,d.MC=null,d.ej=null}(Y||(Y={})),function(d){var O=function(){function S(){}return S.Mb=function(h,l){return 0<=l?S.P(h):-S.P(h)},S.P=function(h){return 0>h?-h:h},S.ti=function(h){return 3552713678800501e-30>h},S.KC=function(h,l,s){return S.P(h-l)<=s*(1+(S.P(h)+S.P(l))/2)},S.Y=function(h,l){return S.KC(h,l,3552713678800501e-30)},S.FL=function(h){return 3552713678800501e-30>=S.P(h)},S.Cd=function(h){return S.FL(h)},S}();d.s=O,d.F=function(){function S(){}return S.gp=function(h,l){var s=0;return(h=O.P(h))+(l=O.P(l))!=0&&(h>l?(s=l/h,s=h*Math.sqrt(1+s*s)):(s=h/l,s=l*Math.sqrt(1+s*s))),s},S.Wq=function(h,l,s,a,c){for(var p=[0,0,0],y=[0,0,0],v=0;2>=v;v++)l[v]-=h[v],s[v]-=l[v];s=p[1]*y[2]-p[2]*y[1],l=p[2]*y[0]-p[0]*y[2],p=p[0]*y[1]-p[1]*y[0],h=-1*(s*h[0]+l*h[1]+p*h[2]),a[0]=s,a[1]=l,a[2]=p,a[3]=h,y=S.on(a),a[0]/=y,a[1]/=y,a[2]/=y,a[3]/=y,c!=0&&(y=O.Cd(p)?O.Cd(h)?O.Mb(1,l):-O.Mb(1,h):O.Mb(1,p),y*=O.Mb(1,c),a[0]*=y,a[1]*=y,a[2]*=y,a[3]*=y)},S.zx=function(h,l,s){s[0]=h[1]*l[2]-l[1]*h[2],s[1]=h[2]*l[0]-l[2]*h[0],s[2]=h[0]*l[1]-l[0]*h[1]},S.St=function(h,l){return h[0]*l[0]+h[1]*l[1]+h[2]*l[2]},S.on=function(h){return S.gp(S.gp(h[0],h[1]),h[2])},S.cl=function(h,l,s,a,c,p,y,v){h=S.n(h,l,s);var _=Math.cos(s);p.u=(h+c)*_*Math.cos(a),y.u=(h+c)*_*Math.sin(a),v.u=(h*(1-l)+c)*Math.sin(s)},S.jO=function(h,l,s,a,c,p,y){var v=S.gp(l,s),_=1*Math.sqrt(1-h),x=_/1;if(O.Y(v,0))p.u=0,c.u=O.Mb(1.570796326794897,a),y.u=O.P(a)-_;else{p.u=Math.atan2(s,l),s=Math.atan2(1*a,_*v),p=Math.cos(s);var T=Math.sin(s);l=_*h/(1-h),h*=1,s=Math.atan2(a+l*T*T*T,v-h*p*p*p),3.141592653589793<O.P(s)&&(s=O.Mb(3.141592653589793,s)-s),s=Math.atan(x*Math.tan(s)),T=Math.sin(s),p=Math.cos(s),c.u=Math.atan2(a+l*T*T*T,v-h*p*p*p),1.570796326794897<O.P(c.u)&&(c.u=O.Mb(3.141592653589793,c.u)-c.u),s=Math.atan(x*Math.tan(c.u)),T=Math.sin(s),p=Math.cos(s),y.u=(a-_*T)*Math.sin(c.u)+(v-1*p)*Math.cos(c.u)}},S.n=function(h,l,s){return s=Math.sin(s),h/Math.sqrt(1-l*s*s)},S.ot=function(h,l){return Math.atan2(Math.sin(l)*(1-h),Math.cos(l))},S.Qj=function(h,l){return Math.atan2(Math.sin(l),Math.cos(l)*(1-h))},S.Rq=function(h,l){if(O.ti(h)||l==0||O.Y(O.P(l),1.570796326794897))return l;if(.006884661117170036>h){var s=Math.sqrt(1-h),a=(1-s)/(1+s),c=a*a,p=a*c,y=a*p,v=a*y,_=a*v,x=a*_,T=1.572916666666667*p-3.2578125*v+4.295068359375*x;h=2.142578125*y-6.071484375*_,s=3.129296875*v-11.249837239583334*x;var C=4.775276692708333*_,A=7.958636765252976*x,R=Math.cos(2*l);return l+Math.sin(2*l)*(1.5*a-.84375*p+.525390625*v-.2688395182291667*x-T+s-A+R*(2*(1.3125*c-1.71875*y+1.650146484375*_)-4*h+6*C+R*(4*T-12*s+24*A+R*(8*h-32*C+R*(16*s-80*A+R*(32*C+64*R*A))))))}for(s=1-h,a=h/2,p=(c=O.P(l))*S.Zu(h)/(1.570796326794897*s),y=9999,_=c,c=0;1e-16<y&&50>c;c++)x=S.w(h,_),v=_-(T=(v=(S.kG(_,h)-a*Math.sin(2*_)/x)/s-p)/(x=1/(x*x*x))),y=O.P(T),_=v;return 0<=l?_:-_},S.qW=function(h,l){return O.ti(l)?h:h*S.Zu(l)/1.570796326794897},S.ba=function(h){return 0>(h=S.pF(h,6.283185307179586))?h+6.283185307179586:3.141592653589793>O.P(h)||O.Y(O.P(h),3.141592653589793)?h:h-6.283185307179586},S.pF=function(h,l){return h-Math.floor(h/l)*l},S.Ah=function(h,l){if(.006884661117170036>l){var s=(l=(1-(l=Math.sqrt(1-l)))/(1+l))*l,a=s*s;return h/(1+l)*(1+.25*s+.015625*a+.00390625*s*a)*1.570796326794897}return h*S.Zu(l)},S.Vq=function(h,l){var s=O.Mb(1,Math.sin(l));return l=1.570796326794897>=(l=O.P(S.pF(l,3.141592653589793)))?l:3.141592653589793-l,(O.Y(l,1.570796326794897)?l:Math.atan(Math.sqrt(1-h)*Math.tan(l)))*s},S.q=function(h,l,s){if(.006884661117170036>l){var a=(l=(1-(l=Math.sqrt(1-l)))/(1+l))*l,c=l*a,p=l*c,y=l*p,v=l*y,_=l*v,x=-.7291666666666666*c+.2278645833333333*y+.03987630208333334*_,T=.615234375*p-.21533203125*v,C=-.54140625*y+.20302734375*_,A=.48876953125*v,R=-.4488699776785715*_,F=Math.cos(2*s);return h/(1+l)*((1+.25*a+.015625*p+.00390625*v)*s+Math.sin(2*s)*(-1.5*l+.1875*c+.0234375*y+.00732421875*_-x+C-R+F*(2*(.9375*a-.234375*p-.03662109375*v)-4*T+6*A+F*(4*x-12*C+24*R+F*(8*T-32*A+F*(16*C-80*R+F*(32*A+64*F*R)))))))}return h*(S.kG(s,l)-.5*l*Math.sin(2*s)/S.w(l,s))},S.w=function(h,l){return l=Math.sin(l),Math.sqrt(1-h*l*l)},S.Zu=function(h){return O.KC(h,1,2220446049250313e-31)?1:1>h?S.Xw(0,1-h)-h/3*S.Uw(0,1-h):NaN},S.kG=function(h,l){var s=O.Mb(1,h);h=O.P(h);var a=Math.floor(h/1.570796326794897);if(1<l)l=h==0?0:NaN;else if(O.Cd(a))l=(h=S.sin(h))*S.Xw(1-h*h,1-l*h*h)-l/3*h*h*h*S.Uw(1-h*h,1-l*h*h);else{var c=d.O.truncate(a%2),p=S.Zu(l);0<c?(h=1.570796326794897*(a+1)-h,l=p*(a+1)-(l=(h=Math.sin(h))*S.Xw(1-h*h,1-l*h*h)-l/3*h*h*h*S.Uw(1-h*h,1-l*h*h))):(h-=1.570796326794897*a,l=p*a+(l=(h=Math.sin(h))*S.Xw(1-h*h,1-l*h*h)-l/3*h*h*h*S.Uw(1-h*h,1-l*h*h)))}return l*s},S.sin=function(h){h=S.ba(h);var l=O.Mb(1,h);return h=O.P(h),O.Y(h,3.141592653589793)?0:O.Y(h,1.570796326794897)?1*l:Math.sin(h)*l},S.Uw=function(h,l){var s,a,c,p,y=h,v=l,_=1;for(l=0,h=1;a=((s=.2*(y+v+3*_))-y)/s,c=(s-v)/s,p=(s-_)/s,!(1e-4>O.P(a)&&1e-4>O.P(c)&&1e-4>O.P(p));)p=Math.sqrt(v),l+=h/((s=Math.sqrt(_))*(_+(p=Math.sqrt(y)*(p+s)+p*s))),h*=.25,y=.25*(y+p),v=.25*(v+p),_=.25*(_+p);return v=(y=a*c)-(_=p*p),3*l+h*(1+(_=y-6*_)*(.10227272727272728*_-.2142857142857143-.1730769230769231*p*(a=_+v+v))+p*(.1666666666666667*a+p*(-.4090909090909091*v+.1153846153846154*p*y)))/(s*Math.sqrt(s))},S.Xw=function(h,l){for(var s,a,c,p,y=1;a=2-((s=(h+l+y)/3)+h)/s,c=2-(s+l)/s,p=2-(s+y)/s,!(1e-4>O.P(a)&&1e-4>O.P(c)&&1e-4>O.P(p));y=.25*(y+s))s=Math.sqrt(l),a=Math.sqrt(y),h=.25*(h+(s=Math.sqrt(h)*(s+a)+s*a)),l=.25*(l+s);return(1+(.04166666666666666*(h=a*c-p*p)-.1-.06818181818181818*(l=a*c*p))*h+.07142857142857142*l)/Math.sqrt(s)},S.Qw=function(h,l){if(O.ti(h)||l==0||O.Y(O.P(l),1.570796326794897))return l;if(.006884661117170036>h){var s=h*h,a=h*s,c=h*a,p=h*c,y=h*p,v=h*y,_=-(.02708333333333333*a+.03430059523809524*c+.03149181547619048*p+.02634359154541446*y+.02156896735835538*v),x=.007669890873015873*c+.01299603174603175*p+.0148051353064374*y+.01454454953803912*v,T=-(.002275545634920635*p+.004830845032667949*y+.006558395368616723*v),C=.0006957236677288761*y+.001775193002406544*v,A=-.000217324089394402*v,R=Math.cos(2*l);return l+Math.sin(2*l)*(-(.5*h+.2083333333333333*s+.09375*a+.04878472222222222*c+.02916666666666667*p+.01938905423280423*y+.01388255931712963*v)-_+T-A+R*(2*(.1041666666666667*s+.0875*a+.06050347222222222*c+.04151785714285714*p+.02958958540013228*y+.02203667534722222*v)-4*x+6*C+R*(4*_-12*T+24*A+R*(8*x-32*C+R*(16*T-80*A+R*(32*C+64*R*A))))))}return l==0||O.Y(O.P(l),1.570796326794897)?s=l:(c=(a=Math.sqrt(h))*Math.sin(l),s=Math.tan(.7853981633974483+l/2)*Math.pow((1-c)/(1+c),a/2),s=2*Math.atan(s)-1.570796326794897),s},S.yO=function(h,l){if(O.ti(h)||l==0||O.Y(O.P(l),1.570796326794897))return l;if(.006884661117170036>h){var s=h*(C=h*(T=h*(R=h*h))),a=h*(A=h*s),c=.05833333333333333*T+.07232142857142858*C+.05634300595238095*s+.0355325796406526*A+.020235546186067*a,p=.02653149801587302*C+.04379960317460317*s+.0429211791776896*A+.03255384637546096*a,y=.01294022817460318*s+.02668104344536636*A+.03155651254609588*a,v=.00659454790965208*A+.0163075268674227*a,_=.003463473736911237*a,x=Math.cos(2*l);return l+Math.sin(2*l)*(.5*h+.2083333333333333*R+.08333333333333333*T+.03611111111111111*C+.01875*s+.01195601851851852*A+.008863673941798942*a-c+y-_+x*(2*(.1458333333333333*R+.1208333333333333*T+.07039930555555556*C+.03616071428571429*s+.01839451058201058*A+.01017113095238095*a)-4*p+6*v+x*(4*c-12*y+24*_+x*(8*p-32*v+x*(16*y-80*_+x*(32*v+64*x*_))))))}var T=Math.sqrt(h),C=T/2,A=Math.tan(.7853981633974483+l/2);h=0,c=1;for(var R=l;c!=0;R=a)s=T*Math.sin(R),a=A*Math.pow((1+s)/(1-s),C),a=2*Math.atan(a)-1.570796326794897,h++,(O.Y(a,R)||3e4<h)&&(c=0);return R},S}()}(Y||(Y={})),function(d){var O=function(){function S(h){this.ul=this.Us=null,this.Iv=!1,this.GA=this.HA=0,this.HH=new d.h,this.XH=new d.h,this.KA=!1,this.vq=new d.l,this.wH=this.sw=0,this.tw=null,this.zl=!1,this.Eo=null,this.bA=0,this.Ue=h,this.As=d.zb.xv(this.Ue,0,!0),this.HH.Rc(),this.XH.Rc(),this.RH=NaN;var l=h.getCode();0<l?(this.Kk=l,d.pf.getCode(h)):this.Kk=d.pf.getCode(h),0>this.Kk&&(this.Kk=0);var s=this.Ue.getType();if(this.jH=s==d.Sc.PE_TYPE_PROJCS?2:1,s==d.Sc.PE_TYPE_PROJCS&&!h.loadConstants())throw d.i.N("PeProjcs.loadConstants failed");l=s==d.Sc.PE_TYPE_GEOGCS?this.Ue:this.Ue.getGeogcs(),s!=d.Sc.PE_TYPE_GEOGCS&&d.pf.getCode(l),this.Eo=h.getUnit(),this.RH=l.getPrimem().getLongitude(),this.wH=h=l.getUnit().getUnitFactor(),h=Math.PI/(180*h),1e-10>Math.abs(h-1)&&(h=1),this.GA=h,s&d.Sc.PE_TYPE_PROJCS?(l=this.Ue,this.HA=1/l.getUnit().getUnitFactor(),this.sw=.001/this.Ue.getUnit().getUnitFactor(),this.tw=d.Cg.generate(l,d.Cg.PE_PCSINFO_OPTION_NONE),this.zl=this.tw.isPannableRectangle(),this.bA=d.zb.qN(this.tw.getCentralMeridian(),this.GA)):(this.KA=this.zl=!0,this.HA=0,s=1/l.getUnit().getUnitFactor(),this.sw=.001/l.getDatum().getSpheroid().getAxis()*s,this.bA=0),this.zl&&(this.xx(),this.DK(),this.nY(),this.CK(),this.lY(),this.mY())}return S.prototype.$r=function(){return this.Kk},S.prototype.kk=function(){return this.tw},S.Py=function(h,l){return h==l||h!=null&&l!=null&&h.Kk==0&&l.Kk==0&&h.As===l.As},S.prototype.Wc=function(){return this.zl},S.prototype.gh=function(h){h.K(this.so)},S.prototype.pv=function(){return this.so.v},S.prototype.ov=function(){return this.so.C},S.prototype.GR=function(h){h.K(this.uw)},S.prototype.lY=function(){var h=this.Ue.getType();if(h==d.Sc.PE_TYPE_PROJCS){h=this.Ue;var l=this.kk().getCentralMeridian(),s=h.getGeogcs();if(s==null)throw d.i.fa("internal error");l=[[l+(s=1/s.getUnit().getUnitFactor()*Math.PI),0]],d.ej.geogToProj(h,1,l),l=l[0][0],s=h.getParameters()[d.Sc.PE_PARM_X0].getValue();var a=this.ml();h=new d.l,a.A(h),l=(a=Math.abs(l-s))+s,s=-1*a+s,a=h.H,h=h.G;var c=new d.l;c.K(s,h,l,a),this.so==null&&(this.so=c)}else{if(h!=d.Sc.PE_TYPE_GEOGCS)throw d.i.fa("internal error");s=1/this.Ue.getUnit().getUnitFactor()*Math.PI,(h=new d.l).K(-s,-s/2,s,s/2),this.so==null&&(this.so=h)}},S.prototype.mY=function(){var h=this.Ue.getType();if(h==d.Sc.PE_TYPE_PROJCS){var l=this.Ue;if(h=this.kk().getCentralMeridian(),(l=l.getGeogcs())==null)throw d.i.fa("internal error");l=1/l.getUnit().getUnitFactor()*Math.PI;var s=this.Vr(),a=new d.l;s.A(a),(s=new d.l).K(h-l,a.G,h+l,a.H),this.uw==null&&(this.uw=s)}else{if(h!=d.Sc.PE_TYPE_GEOGCS)throw d.i.fa("internal error");l=1/this.Ue.getUnit().getUnitFactor()*Math.PI,(h=new d.l).K(-l,-l/2,l,l/2),this.uw==null&&(this.uw=h)}},S.prototype.bf=function(){return this.GA},S.prototype.pm=function(){return this.HA},S.prototype.Vr=function(){if(this.zl)return this.ul;var h=this.ul;return h??(this.xx(),this.ul)},S.prototype.Wr=function(){return this.zl?null:(this.ul!=null||this.xx(),this.YG)},S.prototype.xx=function(){if(this.Ue.getType()==d.Sc.PE_TYPE_PROJCS){var h=this.Ue,l=h.getGeogcs(),s=h.horizonGcsGenerate();if(s!=null){var a=s[0].getNump(),c=s[0].getKind();h=0<s[0].getInclusive();var p=this.bf(),y=90*p,v=360*p,_=370*p,x=180*p*d.Sc.PE_HORIZON_DELTA/Math.PI,T=new d.l,C=null;if(1<a){for(var A=1;A<a;A++)if(s[A].getKind()==d.Sc.PE_HORIZON_LINE){C==null&&(C=new d.Ta);var R=s[A].getCoord();C.sx(R[0][0],R[0][1]),C.yj(R[1][0],R[1][1])}}if(c==d.Sc.PE_HORIZON_RECT)s=s[0].getCoord(),T.K(s[0][0],s[0][1]),T.Zb(s[1][0],s[1][1]),Math.abs(T.H-y)<1e-7*x&&(T.H=y),Math.abs(T.G+y)<1e-7*x&&(T.G=-y),T.R()>_&&(s=-400*p,T.K(s,T.G,s+5*v,T.H)),s=new d.Fh(T),this.ul==null&&(this.ul=s,this.Iv=h);else{if(_=new d.Da,v=this.kk().isGcsHorizonMultiOverlap(),T=d.gu.bF(l,d.hu.Integer64),v){for(_=new d.gL,x=d.Gh.local().V(_,T,null),A=0;A<a;A++)if(s[A].getKind()==d.Sc.PE_HORIZON_POLY){for(l=s[A].getSize(),p=s[A].getCoord(),c=[],y=0;y<l;y++)c[y]=d.h.construct(p[y][0],p[y][1]);s[A].getInclusive(),v&&((p=new d.Da).Yk(c,l-1),_.ZX(p),x.qe())}_=x.next()}else for(A=0;A<a;A++)if(s[A].getKind()==d.Sc.PE_HORIZON_POLY){for(l=s[A].getSize(),p=s[A].getCoord(),v=[],y=0;y<l;y++)v[y]=d.h.construct(p[y][0],p[y][1]);s[A].getInclusive(),_.Yk(v,l-1)}h?d.Xj.local().wn(_,T,1):d.kp.local().wn(_,T,1),d.dj.local().wn(_,T,1),this.ul==null&&(this.ul=_,this.Iv=h,this.YG=C)}}}},S.prototype.hv=function(){return this.zl||this.ul==null&&this.xx(),this.Iv},S.prototype.DK=function(){if(this.jH==2){var h=this.Ue.horizonPcsGenerate();if(h!=null){var l=h[0].getKind();h[0].getInclusive();var s=h[0].getNump(),a=!1;if(l==d.Sc.PE_HORIZON_RECT)h=h[0].getCoord(),(s=new d.l).K(h[0][0],h[0][1]),s.Zb(h[1][0],h[1][1]),h=new d.Fh(s);else{for(l=-1,a=0;a<s;a++)h[a].getKind()==d.Sc.PE_HORIZON_POLY&&(l=a);for(a=h[l].getSize()-1,h=h[l].getCoord(),s=[],l=0;l<a;l++)s[l]=d.h.construct(h[l][0],h[l][1]);h=l=new d.Da,l.Yk(s,a),a=!0}this.kk().isDensificationNeeded()&&(s=1e5*this.pm(),h=d.Xl.local().V(h,s,null)),a&&(a=new d.Fh,h.bn(a),h.Ke(),h.Qb(),h.qR(),d.Xj.local().wn(h,null,1)),this.Us==null&&(this.Us=h)}}},S.prototype.ml=function(){if(this.zl)return this.Us;var h=this.Us;return h??(this.DK(),this.Us)},S.prototype.nY=function(){if(this.Ue.getType()==d.Sc.PE_TYPE_PROJCS){var h=90*this.bf();h=[[0,h],[0,-h]],d.ej.geogToProj(this.Ue,2,h);var l=this.kk(),s=l.getNorthPoleLocation()!=d.Cg.PE_POLE_OUTSIDE_BOUNDARY;l=l.getSouthPoleLocation()!=d.Cg.PE_POLE_OUTSIDE_BOUNDARY,this.KA||(s&&this.HH.ma(h[0][0],h[0][1]),l&&this.XH.ma(h[1][0],h[1][1]))}this.KA=!0},S.prototype.CK=function(){if(this.jH==1){var h=400*this.bf();this.vq.K(-h,-h,h,h)}else h=d.Cg.generate(this.Ue,d.Cg.PE_PCSINFO_OPTION_DOMAIN),h=d.l.construct(h.getDomainMinx(),h.getDomainMiny(),h.getDomainMaxx(),h.getDomainMaxy()),this.vq.B()&&this.vq.K(h)},S.prototype.hR=function(h){this.zl&&h.K(this.vq),this.vq.B()&&this.CK(),h.K(this.vq)},S.prototype.Up=function(){return this.RH},S.prototype.zi=function(){return this.bA},S.prototype.Hd=function(){return this.Eo},S.prototype.Xr=function(){return this.wH},S}();d.OC=O}(Y||(Y={})),function(d){var O=function(){function S(h){this.KT=h,this.As=d.zb.xv(h,0,!0);var l=h.getCode();this.ss=0<l?l:d.pf.getCode(h),0>this.ss&&(this.ss=0),this.Eo=l=this.KT.getUnit(),this.IH=1/l.getUnitFactor(),d.pf.getCode(h)}return S.Py=function(h,l){return h==l||h!=null&&l!=null&&h.ss==0&&l.ss==0&&h.As===l.As},S.prototype.$r=function(){return this.ss},S}();d.PL=O}(Y||(Y={})),function(d){d.Yg=function(){function O(){}return O.tb=function(S,h,l,s,a,c,p,y){if(c!=null||p!=null||y!=null){s=d.F.ba(s),h=d.F.ba(h),l=d.F.ba(l),a=d.F.ba(a),1.570796326794897<d.s.P(l)&&(l=d.s.Mb(3.141592653589793,l)-l,h=d.F.ba(h+3.141592653589793)),1.570796326794897<d.s.P(a)&&(a=d.s.Mb(3.141592653589793,a)-a,s=d.F.ba(s+3.141592653589793));var v=d.F.ba(s-h);if(d.s.Y(l,a)&&(d.s.Y(h,s)||d.s.Y(d.s.P(l),1.570796326794897)))c!=null&&(c.u=0),p!=null&&(p.u=0),y!=null&&(y.u=0);else{if(d.s.Y(l,-a)){if(d.s.Y(d.s.P(l),1.570796326794897))return c!=null&&(c.u=3.141592653589793*S),p!=null&&(p.u=0<l?d.F.ba(3.141592653589793-d.F.ba(s)):d.F.ba(s)),void(y!=null&&(y.u=0<l?d.F.ba(s):d.F.ba(3.141592653589793-d.F.ba(s))));if(d.s.Y(d.s.P(v),3.141592653589793))return c!=null&&(c.u=3.141592653589793*S),p!=null&&(p.u=0),void(y!=null&&(y.u=0))}var _=d.s.P(l)==1.570796326794897?0:Math.cos(l),x=Math.sin(l),T=d.s.P(a)==1.570796326794897?0:Math.cos(a),C=Math.sin(a),A=d.s.P(v)==1.570796326794897?0:Math.cos(v),R=d.s.P(v)==3.141592653589793?0:Math.sin(v);if(c!=null){var F=Math.sin((a-l)/2);v=Math.sin(v/2),c.u=2*Math.asin(Math.sqrt(F*F+_*T*v*v))*S}p!=null&&(p.u=d.s.Y(d.s.P(l),1.570796326794897)?0>l?s:d.F.ba(3.141592653589793-s):Math.atan2(T*R,_*C-x*T*A)),y!=null&&(d.s.Y(d.s.P(a),1.570796326794897)?y.u=0>a?h:d.F.ba(3.141592653589793-h):(y.u=Math.atan2(_*R,C*_*A-T*x),y.u=d.F.ba(y.u+3.141592653589793)))}}},O.rf=function(S,h,l,s,a,c,p){if(c!=null||p!=null){h=d.F.ba(h),l=d.F.ba(l),1.570796326794897<d.s.P(l)&&(l=d.s.Mb(3.141592653589793,l)-l,h=d.F.ba(h+3.141592653589793)),d.s.Y(d.s.P(l),1.570796326794897)&&(h=0),a=d.F.ba(a);var y=d.s.Y(d.s.P(a),1.570796326794897)?0:Math.cos(a),v=d.s.Y(d.s.P(a),3.141592653589793)?0:Math.sin(a),_=d.s.Y(d.s.P(l),1.570796326794897)?0:Math.cos(l),x=Math.sin(l);S=s/S,s=d.s.Y(d.s.P(S),1.570796326794897)?0:Math.cos(S);var T=d.s.Y(d.s.P(S),3.141592653589793)?0:Math.sin(S),C=Math.asin(x*s+_*T*y);p!=null&&(p.u=C),c!=null&&(c.u=d.s.Y(d.s.P(C),1.570796326794897)?d.s.Y(l,-C)?0>C?a:d.F.ba(3.141592653589793-a):h:d.s.Y(d.s.P(l),1.570796326794897)&&d.s.Y(S,3.141592653589793)?0>l?a:d.F.ba(3.141592653589793-a):d.F.ba(h+Math.atan2(T*v,_*s-x*T*y)))}},O}()}(Y||(Y={})),function(d){d.Wk=function(){function O(){}return O.tb=function(S,h,l,s,a,c,p,y,v){var _=new d.ga(0),x=new d.ga(0),T=[0,0,0],C=[0,0,0],A=[0,0,0],R=new d.ga(0),F=new d.ga(0),N=new d.ga(0),B=new d.ga(0),q=new d.ga(0);if(p!=null||y!=null||v!=null)if(d.s.ti(h))d.Yg.tb(S,l,s,a,c,p,y,v);else{a=d.F.ba(a),l=d.F.ba(l);var U=d.F.ba(a-l);if(d.s.Y(s,c)&&(d.s.Y(l,a)||d.s.Y(d.s.P(s),1.570796326794897)))p!=null&&(p.u=0),y!=null&&(y.u=0),v!=null&&(v.u=0);else{if(d.s.Y(s,-c)){if(d.s.Y(d.s.P(s),1.570796326794897))return p!=null&&(p.u=2*d.F.Ah(S,h)),y!=null&&(y.u=0<s?d.F.ba(3.141592653589793-d.F.ba(a)):d.F.ba(a)),void(v!=null&&(v.u=0<s?d.F.ba(a):d.F.ba(3.141592653589793-d.F.ba(a))));d.s.Y(d.s.P(U),3.141592653589793)&&(p!=null&&(p.u=2*d.F.Ah(S,h)),y!=null&&(y.u=0),v!=null&&(v.u=0))}else(d.s.Y(d.s.P(s),1.570796326794897)||d.s.Y(d.s.P(c),1.570796326794897))&&(d.s.Y(d.s.P(s),1.570796326794897)?l=a:a=l);var K=0;if(0>U){K=1;var X=l;l=a,a=X,X=s,s=c,c=X}U=d.F.ot(h,s);var te=d.F.ot(h,c);y==null&&v==null||(d.Yg.tb(S,l,U,a,te,null,_,x),_=Math.atan2(Math.sin(_.u)*Math.cos(s-U),Math.cos(_.u)),x=Math.atan2(Math.sin(x.u)*Math.cos(c-te),Math.cos(x.u)),K!=0&&(X=_,_=x,x=X),y!=null&&(y.u=_),v!=null&&(v.u=x)),p!=null&&(d.F.cl(1,h,s,l,0,N,B,q),T[0]=N.u,T[1]=B.u,T[2]=q.u,d.F.cl(1,h,c,a,0,N,B,q),C[0]=N.u,C[1]=B.u,C[2]=q.u,A[0]=T[1]*C[2]-C[1]*T[2],A[1]=-(T[0]*C[2]-C[0]*T[2]),A[2]=T[0]*C[1]-C[0]*T[1],h=1-d.F.w(h,d.F.Vq(h,d.F.Qj(h,Math.acos(A[2]/Math.sqrt(A[0]*A[0]+A[1]*A[1]+A[2]*A[2]))))),h*=2-h,y=Math.atan2(-A[1],-A[0]),A=d.F.ba(y-1.570796326794897),y=d.F.ba(y+1.570796326794897),A=d.s.P(d.F.ba(l-A))<=d.s.P(d.F.ba(l-y))?A:y,d.Yg.tb(1,A,0,l,U,R,null,null),d.Yg.tb(1,A,0,a,te,F,null,null),3.141592653589793<R.u+F.u&&(A=d.F.ba(A+3.141592653589793),d.Yg.tb(1,A,0,l,U,R,null,null),d.Yg.tb(1,A,0,a,te,F,null,null)),R.u*=d.s.Mb(1,s),F.u*=d.s.Mb(1,c),R.u=d.F.Qj(h,R.u),F.u=d.F.Qj(h,F.u),l=d.F.q(S,h,R.u),S=d.F.q(S,h,F.u),p.u=d.s.P(S-l))}}},O.rf=function(S,h,l,s,a,c,p,y){var v=0,_=new d.ga(0),x=new d.ga(0),T=[0,0,0],C=[0,0,0],A=new d.ga(0),R=new d.ga(0),F=new d.ga(0);if(p!=null||y!=null)if(d.s.ti(h))d.Yg.rf(S,l,s,a,c,p,y);else if(d.s.Cd(a))p!=null&&(p.u=l),y!=null&&(y.u=s);else if(c=d.F.ba(c),0>a&&(a=d.s.P(a),c=d.F.ba(c+3.141592653589793)),l=d.F.ba(l),s=d.F.ba(s),1.570796326794897<d.s.P(s)&&(l=d.F.ba(l+3.141592653589793),s=d.s.Mb(3.141592653589793,s)-s),d.s.Y(d.s.P(s),1.570796326794897)&&(l=0),d.s.Cd(s)){var N=d.s.P(1.570796326794897-d.s.P(c));N=d.F.Qj(h,N),N=1-d.F.w(h,d.F.Vq(h,N)),N*=2-N,S=a/d.F.Ah(S,N)*1.570796326794897,S=d.F.Rq(N,S),S=d.F.ot(N,S),d.Yg.rf(1,l,s,S,c,p,_),y!=null&&(v=_.u),y!=null&&(y.u=d.F.Qj(h,v))}else if(d.s.Y(d.s.P(s),1.570796326794897))_=2*(v=d.F.Ah(S,h)),c=0<(S=d.s.Mb(1.570796326794897,s))?d.F.ba(3.141592653589793-c):c,s=v-a,d.s.P(s)<=v?p!=null&&(p.u=c):(s=Math.floor(a/_),d.O.truncate(s%2)==0?(p!=null&&(p.u=c),a-=s*_):(p!=null&&(p.u=d.F.ba(c+3.141592653589793)),a=(s+1)*_-a),s=v-a),y!=null&&(y.u=d.F.Rq(h,s/v*S));else{N=d.F.ot(h,s),c=Math.atan2(Math.sin(c),Math.cos(c)*Math.cos(s-N));var B=d.O.truncate(d.s.Mb(1,N))*(1.570796326794897>=d.s.P(c)?1:-1);c=d.F.ba(l+Math.atan(Math.tan(c)*-Math.sin(N))),d.Yg.tb(S,c,0,l,N,null,x,null),N=d.s.P(1.570796326794897-d.s.P(x.u)),N=d.F.Qj(h,N),N=1-d.F.w(h,d.F.Vq(h,N)),N*=2-N,d.F.cl(1,h,0,c,0,A,R,F),T[0]=A.u,T[1]=R.u,T[2]=F.u,d.F.cl(1,h,s,l,0,A,R,F),C[0]=A.u,C[1]=R.u,C[2]=F.u,s=Math.acos((T[0]*C[0]+T[1]*C[1]+T[2]*C[2])/Math.sqrt(C[0]*C[0]+C[1]*C[1]+C[2]*C[2])),s=d.F.Qj(N,s),a=0<(s=d.F.q(S,N,s)+a*B)?x.u:d.F.ba(x.u+3.141592653589793),S=d.s.P(s)/d.F.Ah(S,N)*1.570796326794897,S=d.F.Rq(N,S),S=d.F.ot(N,S),d.Yg.rf(1,c,0,S,a,p,_),y!=null&&(v=_.u),y!=null&&(y.u=d.F.Qj(h,v))}},O}()}(Y||(Y={})),function(d){d.cu=function(){function O(){}return O.tb=function(S,h,l,s,a,c,p,y,v){var _=0,x=0,T=0;if(p!=null||y!=null||v!=null)if(d.s.ti(h))d.Yg.tb(S,l,s,a,c,p,y,v);else{var C=d.F.ba(a-l);if(d.s.Y(s,c)&&(d.s.Cd(C)||d.s.Y(d.s.P(s),1.570796326794897)))p!=null&&(p.u=0),y!=null&&(y.u=0),v!=null&&(v.u=0);else{if(d.s.Y(s,-c)){if(d.s.Y(d.s.P(s),1.570796326794897))return p!=null&&(p.u=2*d.F.Ah(S,h)),y!=null&&(y.u=0<s?d.F.ba(3.141592653589793-d.F.ba(a)):d.F.ba(a)),void(v!=null&&(v.u=0<s?d.F.ba(a):d.F.ba(3.141592653589793-d.F.ba(a))));d.s.Y(d.s.P(C),3.141592653589793)&&(p!=null&&(p.u=2*d.F.Ah(S,h)),y!=null&&(y.u=0),v!=null&&(v.u=0))}else if(d.s.Y(d.s.P(s),1.570796326794897)||d.s.Y(d.s.P(c),1.570796326794897)||d.s.Cd(C)||d.s.Y(d.s.P(C),3.141592653589793))return void d.Wk.tb(S,h,l,s,a,c,p,y,v);var A=1-Math.sqrt(1-h),R=h/(1-h),F=S*(1-A);S=d.F.Vq(h,s);var N=d.F.Vq(h,c);h=d.s.P(S)==1.570796326794897?0:Math.cos(S);var B=Math.sin(S),q=d.s.P(N)==1.570796326794897?0:Math.cos(N),U=Math.sin(N),K=C,X=Math.cos(K),te=Math.sin(K),ae=1,ge=0;do{var Ee=K,Ae=Math.sqrt(Math.pow(q*te,2)+Math.pow(h*U-B*q*X,2)),Me=B*U+h*q*X,He=Math.atan2(Ae,Me);if(Ae==0){ae=0;break}var Ie=h*q*te/Ae;if(_=Math.cos(Math.asin(Ie)),x=Me-2*B*U/(_*=_),1<d.s.P(x)&&(x=d.s.Mb(1,x)),K=C+(1-(K=A/16*_*(4+A*(4-3*_))))*A*Ie*(He+K*Ae*(x+K*Me*(2*(T=x*x)-1))),X=Math.cos(K),te=Math.sin(K),ge++,3.141592653589793<d.s.P(K)&&30<ge){ae=0;break}}while(5e3>=ge&&!d.s.Y(Ee,K));if(ae!=0)A=(R*=_)*(256+R*(R*(74-47*R)-128))/1024,p!=null&&(p.u=F*(1+R*(4096+R*(R*(320-175*R)-768))/16384)*(He-A*Ae*(x+A/4*(Me*(2*T-1)-A/6*x*(4*Ae*Ae-3)*(4*T-3))))),y!=null&&(y.u=d.s.Y(d.s.P(s),1.570796326794897)?0>s?a:d.F.ba(3.141592653589793-a):Math.atan2(q*te,h*U-B*q*X)),v!=null&&(d.s.Y(d.s.P(c),1.570796326794897)?v.u=0>c?l:d.F.ba(3.141592653589793-l):(v.u=Math.atan2(h*te,h*U*X-B*q),v.u=d.F.ba(v.u+3.141592653589793)));else{K=d.s.Mb(3.141592653589793,C),Me=B*U-h*q,He=Math.acos(Me),Ae=Math.sin(He),_=1,ge=Ie=0;do T=Ie,X=1-.25*(Ie=A*(_*=_)*(1+A+A*A))+.1875*(x=A*A*(X=_*_)*(1+2.25*A))-.1953125*(ae=A*A*A*X*_),Ie=.25*Ie-.25*x+.29296875*ae,te=.03125*x-.05859375*ae,ae*=.00651041666666667,x=Me-2*B*U/_,1<d.s.P(x)&&(x=d.s.Mb(1,x)),_=Math.acos(x),Me=Math.cos(2*_),Ee=Math.cos(3*_),te=(Ie=d.s.Y(s,-c)?d.F.ba(3.141592653589793-C)/(3.141592653589793*A*X):d.F.ba(K-C)/(A*(X*He+Ie*Ae*x+te*Math.sin(2*He)*Me+ae*Math.sin(3*He)*Ee)))*Ae/(h*q),K=1.570796326794897<d.s.P(C)?d.s.Mb(3.141592653589793,te)-Math.asin(te):Math.asin(te),X=Math.cos(K),Ae=Math.sqrt(Math.pow(q*te,2)+Math.pow(h*U-B*q*X,2)),He=3.141592653589793-Math.asin(d.s.P(Ae)),Me=Math.cos(He),_=Math.cos(Math.asin(Ie)),ge++;while(70>=ge&&!d.s.Y(T,Ie));p!=null&&(X=1+(R*=_*=_)*(4096+R*(R*(320-175*R)-768))/16384,d.s.Y(s,-c)?p.u=3.141592653589793*F*X:(x=Me-2*B*U/_,_=Math.acos(x),Me=Math.cos(2*_),Ee=Math.cos(3*_),p.u=F*(X*He+R*(R*(128+R*(35*R-60))-512)/2048*Ae*x+R*(5*R-4)/6144*R*R*Math.sin(2*He)*Me+ae*Math.sin(3*He)*Ee+-762939453125e-16*R*R*R*R*Math.sin(4*He)*Math.cos(4*_)))),y!=null&&(d.s.Cd(s)&&d.s.Cd(c)?(_=Math.sqrt(1-Ie*Ie),y.u=Math.acos(_),0>C&&(y.u*=-1)):d.s.Y(d.s.P(s),1.570796326794897)?y.u=0>s?a:d.F.ba(3.141592653589793-a):(p=Ie/h,F=Math.sqrt(1-p*p),0>h*U-B*q*Math.cos(K)&&(F*=-1),y.u=Math.atan2(p,F),d.s.Y(s,-c)&&d.s.P(d.F.ba(l-a))>3.141592653589793*(1-A*Math.cos(s))&&(0<s&&1.570796326794897>d.s.P(y.u)||0>s&&1.570796326794897<d.s.P(y.u))&&(y.u=d.s.Mb(3.141592653589793,y.u)-y.u))),v!=null&&(d.s.Cd(s)&&d.s.Cd(c)?(_=Math.sqrt(1-Ie*Ie),v.u=Math.acos(_),0<=C&&(v.u*=-1)):d.s.Y(d.s.P(c),1.570796326794897)?v.u=0>c?l:d.F.ba(3.141592653589793-l):(C=Ie/q,p=Math.sqrt(1-C*C),F=Math.sin(K/2),0>Math.sin(N-S)-2*h*U*F*F&&(p*=-1),v.u=Math.atan2(C,p),v.u=d.F.ba(v.u+3.141592653589793),d.s.Y(s,-c)&&!d.s.Cd(s)&&!d.s.Y(d.s.P(s),1.570796326794897)&&d.s.P(d.F.ba(l-a))>3.141592653589793*(1-A*Math.cos(s))&&(y!=null?F=y.u:(p=Ie/h,F=Math.sqrt(1-p*p),0>h*U-B*q*Math.cos(K)&&(F*=-1),F=Math.atan2(p,F),d.s.Y(s,-c)&&d.s.P(d.F.ba(l-a))>3.141592653589793*(1-A*Math.cos(s))&&(0<s&&1.570796326794897>d.s.P(F)||0>s&&1.570796326794897<d.s.P(F))&&(F=d.s.Mb(3.141592653589793,F)-F)),1.570796326794897>=d.s.P(F)&&1.570796326794897<d.s.P(v.u)||1.570796326794897<=d.s.P(F)&&1.570796326794897>d.s.P(v.u))&&(v.u=-1*d.F.ba(v.u+3.141592653589793))))}}}},O.rf=function(S,h,l,s,a,c,p,y){if(p!=null||y!=null)if(d.s.ti(h))d.Yg.rf(S,l,s,a,c,p,y);else if(c=d.F.ba(c),d.s.Y(d.s.P(s),1.570796326794897)||d.s.Cd(c)||d.s.Y(d.s.P(c),3.141592653589793))d.Wk.rf(S,h,l,s,a,c,p,y);else{var v=d.s.P(c)==1.570796326794897?0:Math.cos(c),_=d.s.P(c)==3.141592653589793?0:Math.sin(c);d.s.Y(d.s.P(s),1.570796326794897)&&(l=0),c=1-Math.sqrt(1-h);var x=d.F.Vq(h,s);s=d.s.P(x)==1.570796326794897?0:Math.cos(x);var T=Math.sin(x);x=Math.atan2(Math.tan(x),v);var C=s*_,A=C*C,R=1-A,F=h/(1-h)*R,N=(h=F*(256+F*(F*(74-47*F)-128))/1024)/4,B=h/6,q=a/(S*(1-c)*(1+F*(4096+F*(F*(320-175*F)-768))/16384)),U=q;do{var K=U;a=d.s.P(U)==1.570796326794897?0:Math.cos(U);var X=(F=d.s.P(U)==3.141592653589793?0:Math.sin(U))*F;U=h*F*((S=Math.cos(2*x+U))+N*(a*(2*(U=S*S)-1)-B*S*(4*X-3)*(4*U-3)))+q}while(!d.s.Y(K,U));a=d.s.P(U)==1.570796326794897?0:Math.cos(U),F=d.s.P(U)==3.141592653589793?0:Math.sin(U),p!=null&&(_=Math.atan2(F*_,s*a-T*F*v),R=c/16*R*(4+c*(4-3*R)),S=Math.cos(2*x+U),p.u=d.F.ba(l+(_-(1-R)*c*C*(U+R*F*(S+R*a*(2*S*S-1)))))),y!=null&&(R=T*F-s*a*v,R=(1-c)*Math.sqrt(A+R*R),y.u=Math.atan2(T*a+s*F*v,R))}},O}()}(Y||(Y={})),function(d){d.PC=function(){function O(){}return O.tb=function(S,h,l,s,a,c,p,y,v){var _=d.F.ba(a-l),x=d.s.Y(d.s.P(s),1.570796326794897),T=d.s.Y(d.s.P(c),1.570796326794897);if(d.s.Y(s,c)&&(d.s.Cd(_)||x))p!=null&&(p.u=0),y!=null&&(y.u=0),v!=null&&(v.u=0);else{if(d.s.ti(h)){var C=Math.sin(s),A=Math.sin(c);C=Math.sqrt((1+C)/(1-C)),A=Math.sqrt((1+A)/(1-A)),C=Math.log(A)-Math.log(C),C=Math.atan2(_,C),p!=null&&(p.u=d.s.Y(s,c)?d.s.P(S*Math.cos(s)*_):d.s.P((S*c-S*s)/Math.cos(C)))}else A=d.F.Qw(h,c),C=Math.sin(d.F.Qw(h,s)),A=Math.sin(A),C=Math.sqrt((1+C)/(1-C)),A=Math.sqrt((1+A)/(1-A)),C=Math.log(A)-Math.log(C),C=Math.atan2(_,C),p!=null&&(d.s.Y(s,c)?p.u=d.s.P(S*_*Math.cos(s)/d.F.w(h,s)):(_=d.F.q(S,h,s),S=d.F.q(S,h,c),p.u=d.s.P((S-_)/Math.cos(C))));y==null&&v==null||(p=d.F.ba(C+3.141592653589793),x&&T||!x&&!T||(x?C=0>s?a:d.F.ba(3.141592653589793-a):T&&(p=0>c?l:d.F.ba(3.141592653589793-l))),y!=null&&(y.u=C),v!=null&&(v.u=p))}},O.rf=function(S,h,l,s,a,c,p,y){c=d.F.ba(c),0>a&&(a=d.s.P(a),c=d.F.ba(c+3.141592653589793)),d.s.ti(h)?d.s.Y(d.s.P(s),1.570796326794897)?(l=0>s?c:d.F.ba(3.141592653589793-c),3.141592653589793>=(c=a/S%6.283185307179586)?S=s-d.s.Mb(c,s):(l=d.F.ba(l+3.141592653589793),S=-s+d.s.Mb(c-3.141592653589793,s))):d.s.Y(d.s.P(c),1.570796326794897)?(l=d.F.ba(l+d.s.Mb(a,c)/(S*Math.cos(s))),S=s):(S=s+a*Math.cos(c)/S,1.570796326794897<d.s.P(S)&&(S=1.570796326794897),d.s.Y(d.s.P(S),1.570796326794897)&&(d.s.Cd(c)||d.s.Y(d.s.P(c),3.141592653589793))||(1.570796316258184<d.s.P(S)&&(S=d.s.Mb(1.570796316258184,S)),h=Math.sin(s),s=Math.sin(S),h=Math.sqrt((1+h)/(1-h)),s=Math.sqrt((1+s)/(1-s)),h=Math.log(s)-Math.log(h),l=d.F.ba(l+Math.tan(c)*h))):d.s.Y(d.s.P(s),1.570796326794897)?(l=0>s?c:d.F.ba(3.141592653589793-c),c=a/d.F.qW(S,h),3.141592653589793>=(c%=6.283185307179586)?S=s-d.s.Mb(c,s):(l=d.F.ba(l+3.141592653589793),S=-s+d.s.Mb(c-3.141592653589793,s)),S=d.F.Rq(h,S)):d.s.Y(d.s.P(c),1.570796326794897)?(l=d.F.ba(l+d.s.Mb(a,c)*d.F.w(h,s)/(S*Math.cos(s))),S=s):(S=1.570796326794897*(a*Math.cos(c)+d.F.q(S,h,s))/d.F.Ah(S,h),1.570796326794897<d.s.P(S)&&(S=d.s.Mb(1.570796326794897,S)),S=d.F.Rq(h,S),d.s.Y(d.s.P(S),1.570796326794897)&&(d.s.Cd(c)||d.s.Y(d.s.P(c),3.141592653589793))||(a=d.F.Qw(h,s),s=d.F.Qw(h,S),1.570796316258184<d.s.P(s)&&(s=d.s.Mb(1.570796316258184,S),S=d.F.yO(h,s)),h=Math.sin(a),s=Math.sin(s),h=Math.sqrt((1+h)/(1-h)),s=Math.sqrt((1+s)/(1-s)),h=Math.log(s)-Math.log(h),l=d.F.ba(l+Math.tan(c)*h))),p!=null&&(p.u=l),y!=null&&(y.u=S)},O}()}(Y||(Y={})),function(d){d.kb=function(){function O(){}return O.Xy=function(S,h,l,s,a,c,p){d.cu.tb(S,h,l,s,a,c,null,p,null)},O.yi=function(S,h,l,s,a,c,p,y){d.cu.rf(S,h,l,s,a,c,p,y)},O.wd=function(S,h,l,s,a,c,p,y,v,_){switch(_){case 2:d.Wk.tb(S,h,l,s,a,c,p,y,v);break;case 3:d.QC.tb(S,h,l,s,a,c,p,y,v);break;case 1:d.PC.tb(S,h,l,s,a,c,p,y,v);break;default:d.cu.tb(S,h,l,s,a,c,p,y,v)}},O.oj=function(S,h,l,s,a,c,p,y,v){switch(v){case 2:d.Wk.rf(S,h,l,s,a,c,p,y);break;case 3:d.QC.rf(S,h,l,s,a,c,p,y);break;case 1:d.PC.rf(S,h,l,s,a,c,p,y);break;default:d.cu.rf(S,h,l,s,a,c,p,y)}},O}()}(Y||(Y={})),function(d){var O=function(){function h(){this.y=this.x=null}return h.construct=function(l){var s=new h;return s.x=new d.Wb,s.x.set(l.x),s.y=new d.Wb,s.y.set(l.y),s},h.VE=function(l,s){var a=new h;return a.x=new d.Wb,a.x.set(l),a.y=new d.Wb,a.y.set(s),a},h.prototype.qg=function(){return this.x.qg()&&this.y.qg()},h.prototype.value=function(){return d.h.construct(this.x.value(),this.y.value())},h}();d.vY=O;var S=function(){function h(){this.z=this.y=this.x=null}return h.construct=function(l){var s=new h;return s.x=new d.Wb,s.x.set(l.x),s.y=new d.Wb,s.y.set(l.y),s.z=new d.Wb,s.z.set(l.z),s},h.VE=function(l,s,a){var c=new h;return c.x=new d.Wb,c.x.set(l),c.y=new d.Wb,c.y.set(s),c.z=new d.Wb,c.z.set(a),c},h.prototype.qg=function(){return this.x.qg()&&this.y.qg()&&this.z.qg()},h.prototype.value=function(){return new d.Nd(this.x.value(),this.y.value(),this.z.value())},h.prototype.Qh=function(l){var s=new d.Wb,a=new d.Wb,c=new d.Wb;return s.Kl(this.x,l.x),a.Kl(this.y,l.y),c.Kl(this.z,l.z),(l=new d.Wb).dN(s,a),l.add(c),l},h.prototype.cF=function(l){var s=new h;s.x.Kl(this.y,l.z),s.y.Kl(this.z,l.x),s.z.Kl(this.x,l.y);var a=new d.Wb,c=new d.Wb,p=new d.Wb;return a.Kl(this.z,l.y),c.Kl(this.x,l.z),p.Kl(this.y,l.x),s.x.sub(a),s.y.sub(c),s.z.sub(p),s},h}();d.wY=S,d.Ox=function(){function h(){}return h.EP=function(l,s,a){var c=s.x;s=s.y,h.cl(1,l,Math.cos(c),Math.sin(c),Math.cos(s),Math.sin(s),a)},h.DP=function(l,s){var a=new d.Nd;return h.EP(l,s,a),a},h.cl=function(l,s,a,c,p,y,v){l/=Math.sqrt(1-s*y*y),v.K(l*p*a,l*p*c,l*(1-s)*y)},h.Yu=function(l,s){var a=new d.Wb,c=new d.Wb,p=new d.Wb,y=new d.Wb;a.cos(s.x),c.sin(s.x),p.cos(s.y),y.sin(s.y);var v=new d.Wb;return v.set(y),v.Ag(y),v.No(l),v.No(-1),v.kN(),v.sqrt(),(s=new d.Wb).set(1),s.jm(v),(v=new d.Wb).set(s),v.Ag(p),v.Ag(a),(a=new d.Wb).set(s),a.Ag(p),a.Ag(c),(c=new d.Wb).set(s),c.No(1-l),c.Ag(y),S.VE(v,a,c)},h.SS=function(l,s,a,c){if(Math.abs(s.x-a.x)>Math.PI||Math.abs(s.y)>.5*Math.PI||Math.abs(a.y)>.5*Math.PI||(Math.abs(s.y)==.5*Math.PI||Math.abs(a.y)==.5*Math.PI)&&s.x!=a.x)return NaN;if(c=h.cB(c,Math.min(s.x,a.x),Math.max(s.x,a.x)),!new d.Nc(s.x,a.x).contains(c))return NaN;var p=O.construct(s);if(a=O.construct(a),p=h.Yu(l,p),a=h.Yu(l,a),(a=p.cF(a)).z.qg())return s.y;var y=new d.Wb;y.set(a.x),y.jm(a.z),y.No(-1);var v=new d.Wb;v.set(a.y),v.jm(a.z),v.No(-1);var _=new d.Wb;return _.set(v),_.Ag(v),(p=new d.Wb).set(y),p.Ag(y),p.add(_),p.sqrt(),p.qg()||y.qg()&&v.qg()?s.y:(s=Math.atan2(v.value(),y.value()),s=Math.atan2(p.value()*Math.cos(s-c),1-l),c=h.DP(l,d.h.construct(c,s)),l=new d.Nd(c.x,c.y,-c.z),c=a.value().Qh(c),l=a.value().Qh(l),Math.abs(l)<Math.abs(c)&&(s=-s),s)},h.Oz=function(l,s,a,c,p){if(p[0]=NaN,p[1]=NaN,Math.abs(s.x-a.x)>Math.PI||Math.abs(s.y)>.5*Math.PI||Math.abs(a.y)>.5*Math.PI||(Math.abs(s.y)==.5*Math.PI||Math.abs(a.y)==.5*Math.PI)&&s.x!=a.x||Math.abs(c)>=.5*Math.PI||0<s.y&&0<a.y&&s.y>c&&a.y>c||0>s.y&&0>a.y&&s.y<c&&a.y<c)return 0;var y=O.construct(s),v=O.construct(a);y=h.Yu(l,y),v=h.Yu(l,v);var _=y.cF(v);if(_.z.qg())return new d.Nc(s.y,a.y).contains(c)?(p[0]=s.x,1):0;(v=new d.Wb).set(_.x),v.jm(_.z),v.No(-1),(y=new d.Wb).set(_.y),y.jm(_.z),y.No(-1),(_=new d.Wb).set(y),_.Ag(y);var x=new d.Wb;return x.set(v),x.Ag(v),x.add(_),x.sqrt(),x.qg()||v.qg()&&y.qg()?c==0?(p[0]=s.x,p[1]=a.x,2):0:(l=(1-l)*Math.tan(c)/x.value(),1<Math.abs(l)?0:(l=Math.acos(l),_=Math.atan2(y.value(),v.value()),v=Math.min(s.x,a.x),y=Math.max(s.x,a.x),a=h.cB(_-l,v,y),l=c!=0?h.cB(_+l,v,y):a,c=0,v<=a&&a<=y&&(p[c]=a,c++),l!=a&&v<=l&&l<=y&&(p[c]=l,++c==2&&Math.abs(p[0]-s.x)>Math.abs(p[1]-s.x)&&(s=p[0],p[0]=p[1],p[1]=s)),c))},h.cB=function(l,s,a){return l>a?l-=2*(s=Math.ceil((l-a)/(2*Math.PI)))*Math.PI:l<s&&(l+=2*(s=Math.ceil((s-l)/(2*Math.PI)))*Math.PI),l},h}()}(Y||(Y={})),function(d){d.XK=function(){function O(){}return O.$X=function(S,h){var l=8,s=[0,0,0,0],a=new d.h;a.L(h),a.scale(d.cb.sc(S).Hd().Ec()==9102?1:d.cb.sc(S).Hd().ai/3.141592653589793*180),-180>a.x?(a.x-=a.x%360,-180>a.x&&(a.x+=360)):180<a.x&&(a.x-=a.x%360,180<a.x&&(a.x-=360)),90<a.y&&(a.y=90),-90>a.y&&(a.y=-90);for(var c=-180,p=180,y=(S=5*l)-1,v=(h=(S+31)/32)-1;0<=v;v--)for(var _=y-32*v,x=Math.min(32,S-32*v),T=1;T<x;T+=2){var C=.5*(p+c);a.x>=C?(s[v]|=1<<_,c=C):p=C,_-=2,y-=2}for(c=-90,p=90,y=S-2,v=h-1;0<=v;v--)for(_=y-32*v,x=Math.min(32,S-32*v),T=0;T<x;T+=2)C=.5*(p+c),a.y>=C?(s[v]|=1<<_,c=C):p=C,_-=2,y-=2;return O.$P(s,l,l)},O.$P=function(S,h,l){for(var s=[],a=0;a<h;a++)s[a]="";for(var c=a=0,p=0;p<h;p++){var y=S[a]>>c&31;if(31<(c+=5)){var v=37-c;y&=(1<<v)-1,c-=32,y|=(S[++a]&(1<<c)-1)<<v}s[h-1-p]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[y]}if(l>h)for(p=0;p<l-h;p++)s.push("0");else l<h&&(s.length=l);return s.join("")},O}()}(Y||(Y={})),function(d){var O={gcstol:[0,2e-9,1,2241706620489156e-24,2,2313672246530541e-24,3,898240164660333e-23,4,8982433838020134e-24,5,8982439417325895e-24,6,8982466029667677e-24,7,8982476760268133e-24,8,8982492642167149e-24,9,898251968292634e-23,10,898253685210448e-23,11,8982546725256576e-24,12,8982557456049832e-24,13,898257333682596e-23,14,8982575482995276e-24,15,8982578488197342e-24,16,8982579775336987e-24,17,89825840676828e-22,18,8982599090925448e-24,19,8982605529473397e-24,20,8982609220517402e-24,21,8982611968030573e-24,22,8982616260407152e-24,23,8982620552787834e-24,24,8982633429954492e-24,25,8982637722351582e-24,26,898264416095491e-23,27,8982646307158072e-24,28,8982654891980968e-24,29,8982667769246082e-24,30,8982674207892485e-24,31,8982680646548117e-24,32,8982682792768713e-24,33,8982685798042582e-24,34,8982689231436652e-24,35,898269137766135e-23,36,898269266624163e-23,37,8982705114087017e-24,38,8982706830791106e-24,39,8982711958374661e-24,40,8982712839964735e-24,41,8982717991496125e-24,42,8982721424914803e-24,43,8982723571154887e-24,44,8982727863638127e-24,45,8982730868942154e-24,46,8982734302370678e-24,47,8982745033612112e-24,48,8982751472369276e-24,49,8982755764879183e-24,50,8982762203651733e-24,51,8982764776628385e-24,52,8982766496171896e-24,53,898277722749025e-23,54,898278152002477e-23,55,898279933943848e-23,56,89829143024805e-22,57,8982922161948598e-24,58,898292327314211e-23,59,8982925667349601e-24,60,8982932222965576e-24,61,8982961298941316e-24,62,8982965524049989e-24,63,8982994818246099e-24,64,8982994895706967e-24,65,898299489597736e-23,66,8983000733443498e-24,67,8983055097289157e-24,68,8983064111047368e-24,69,8983111996941178e-24,70,8983120447446023e-24,71,898312748954554e-23,72,8983134531656096e-24,73,8983141573777694e-24,74,8983148615910332e-24,75,8983152841195215e-24,76,8983153545409748e-24,77,8983153827095593e-24,78,898315396793852e-23,79,8983154249624393e-24,80,8983155658054012e-24,81,8983960794340072e-24,82,8984061344391998e-24,83,8984072829255685e-24,84,8984194981201908e-24,85,8984275233099427e-24,86,8984326127007554e-24,87,8984330099816539e-24,88,898433275258421e-23,89,8984333047023206e-24,90,8984333885258723e-24,91,8984337959508212e-24,92,8984365176209457e-24,93,8984727360418079e-24,94,8984901041679577e-24,95,898542662091587e-23,96,898610024130669e-23,97,8992894229037531e-24,98,8993203677616635e-24,99,8993206178094346e-24,100,8993216059187305e-24,101,899322029394808e-23,102,8994627867045891e-24,103,9467559984315793e-24,104,946881168618118e-23,105,9980888154931644e-24,106,9981105353606775e-24,107,9983807356573187e-24,108,1687060485811522e-23,109,1688447560354875e-23,110,2176606011487185e-23,111,2225078816042032e-23,112,2348476432064694e-23,113,2348765250187846e-23,114,2378108974103778e-23,115,314559636297708e-22,116,3297788621680806e-23,117,3667892343788279e-23,118,4235973644320739e-23,119,4794625900676345e-23,120,7262742998235812e-23,121,7499447580246377e-23,122,7525056410964318e-23,123,7979913581209237e-23,124,9662020153976783e-23,125,9799175562353741e-23,126,9897353517547472e-23,127,102313891987647e-21,128,1081460541960784e-22,129,121905913857622e-21,130,2246893314238523e-22,131,2297344808062643e-22,132,242984645941825e-21,133,2754604784282804e-22,134,2884548130346993e-22,135,3370339971357784e-22,136,4307953346848296e-22,137,5208707228462029e-22,138,5509209568565608e-22,139,6452227422644406e-22,140,6740679942715567e-22,141,6861770001566745e-22,142,7252630318111686e-22,143,7441010326374328e-22,144,7742672907173287e-22,145,9629542775307953e-22,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6666666666666667e-24,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},S={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};d.wr=function(){function h(){}return h.Sy=function(l){h.xp===!1&&h.yt();var s=h.FQ(l);if(s==-1){var a=h.Bx(l);a!=l&&(s=h.Sy(a))}return s==-1&&(a=h.FK(l))!=l&&(s=h.Sy(a)),s},h.FQ=function(l){return h.Fw[l]!==void 0?h.Fw[l]:-1},h.CQ=function(l){h.xp===!1&&h.yt();var s=h.nF(l);if(s==1e38){var a=h.Bx(l);if(a!=l&&(s=h.nF(a)),s==1e38)return 1e-10}return s},h.ZS=function(l){if(h.Is[l]!==void 0)return!0;var s=h.Bx(l);return s!=l&&h.Is[s]!==void 0},h.aT=function(l){if(h.xo[l]!==void 0)return!0;var s=h.Bx(l);return s!=l&&h.xo[s]!==void 0},h.nF=function(l){return h.xp===!1&&h.yt(),h.Is[l]!==void 0?h.Is[l]:h.xo[l]!==void 0?h.xo[l]:1e38},h.FK=function(l){return h.xp===!1&&h.yt(),h.WA[l]!==void 0?h.WA[l]:l},h.Bx=function(l){return h.xp===!1&&h.yt(),h.XA[l]!==void 0?h.XA[l]:l},h.yt=function(){for(var l,s=O,a=0;a<s.pcsid.length;a+=2)h.xo[s.pcsid[a]]=s.pcstol[2*s.pcsid[a+1]+1];for(a=0;a<s.pcsidc.length;a+=1)for(var c=(l=s.pcsidc[a])[0];c<=l[1];c++)h.xo[c]=s.pcstol[2*l[2]+1];for(a=0;a<s.gcsid.length;a+=2)h.Is[s.gcsid[a]]=s.gcstol[2*s.gcsid[a+1]+1];for(a=0;a<s.gcsidc.length;a+=1)for(c=(l=s.gcsidc[a])[0];c<=l[1];c++)h.xo[c]=s.gcstol[2*l[2]+1];for(a=0;a<S.c.length;a+=1)for(c=(l=S.c[a])[0];c<=l[1];c++)h.Fw[c]=l[2];for(a=0;a<S.nc.length;a+=2)h.Fw[S.nc[a]]=S.nc[a+1];for(S=null,a=0;a<s.newtoold.length;a+=2)h.WA[s.newtoold[a+1]]=s.newtoold[a],h.XA[s.newtoold[a]]=s.newtoold[a+1];O=null,h.xp=!0},h.xp=!1,h.Is=[],h.xo=[],h.WA=[],h.XA=[],h.Fw=[],h}()}(Y||(Y={})),function(d){function O(h){return h.length===0?'""':h[0]=='"'||h[0]=="."||"0"<=h[0]&&"9">=h[0]?h:'"'+h.trim()+'"'}var S=[];d.XC=function(){function h(){}return h.EQ=function(l){try{for(var s=0;s<S.length;s++)if(S[s].wkttext===l)return S[s].unit;for(var a,c=s="",p=!1,y=0;y<l.length;y++){var v=l[y];p===!0?v=='"'?l[y+1]=='"'?s+=v:p=p=!1:s+=v:/[\s]/.test(v)||(v==","?(c=s!==""?c+(O(s)+","):c+",",s=""):v==")"||v=="]"?(c=s!==""?c+(O(s)+"]}"):c+"]}",s=""):v=="("||v=="["?(c+='{ "entity": "'+s.toUpperCase().trim()+'", "values":[',s=""):v=='"'?(p=!0,s=""):s+=v)}a=JSON.parse(c);var _=h.mF(a);if(_===null)return null;for(a=null,v=0;v<_.values.length;v++)if(typeof _.values[v]=="object"&&(_.values[v].entity==="UNIT"||_.values[v].entity==="ANGLEUNIT"||_.values[v].entity==="LENGTHUNIT")){a=_.values[v];break}if(a===null)return null;var x=d.Tc.ZO(_.entity==="GEOGCS"||_.entity==="GEOGCRS"?1:0,a.values[1],a.values[2]);return S.push({wkttext:l,unit:x}),10<S.length&&S.shift(),x}catch{return null}},h.mF=function(l){if(l===null)return null;switch(l.entity){case"GEOGCRS":case"GEOGCS":case"PROJCRS":case"PROJCS":return l}for(var s=[],a=0;a<l.values.length;a++)if(typeof l.values[a]=="object"&&l.values[a].entity!==void 0)switch(l.values[a].entity){case"GEOGCRS":case"GEOGCS":case"PROJCRS":case"PROJCS":return l.values[a];default:s.push(l.values[a])}for(l=0;l<s.length;l++)if((a=h.mF(s[l]))!==null)return a;return null},h.DQ=function(l){var s=-1;if(l!=null&&0<l.length){var a=l.search(/PROJCR?S/);if(0<=a){var c=0;if(0<=(a=l.lastIndexOf("UNIT"))&&0<(a=l.indexOf(",",a+4))){a++;var p=l.indexOf("]",a+1);if(0<p)try{c=parseFloat(l.substring(a,p))}catch{c=0}}0<c&&(s=.001/c)}else if(0<=(a=l.search(/GEOGCR?S/))){var y=0;if(c=0,(a=l.indexOf("SPHEROID",a+6))===-1&&(a=l.indexOf("ELLIPSOID",a+7)),0<a&&0<(a=l.indexOf(",",a+8))){if(a++,0<(p=l.indexOf(",",a+1)))try{y=parseFloat(l.substring(a,p))}catch{y=0}if(0<y&&((a=l.lastIndexOf("ANGLEUNIT",p+1))===-1&&(a=l.lastIndexOf("UNIT",p+1)),0<=a&&0<(a=l.indexOf(",",a+4))&&(a++,0<(p=l.indexOf("]",a+1)))))try{c=parseFloat(l.substring(a,p))}catch{c=0}}0<y&&0<c&&(s=.001/(y*c))}}return s},h}()}(Y||(Y={})),function(d){var O;(O=d.eL||(d.eL={}))[O.NONE=0]="NONE",O[O.LINEAR=1]="LINEAR",O[O.ANGULAR=2]="ANGULAR",function(h){h[h.enumFloat=0]="enumFloat",h[h.enumDouble=1]="enumDouble",h[h.enumInt32=2]="enumInt32",h[h.enumInt64=3]="enumInt64",h[h.enumInt8=4]="enumInt8",h[h.enumInt16=5]="enumInt16"}(d.QL||(d.QL={})),function(h){h[h.POSITION=0]="POSITION",h[h.Z=1]="Z",h[h.M=2]="M",h[h.ID=3]="ID",h[h.NORMAL=4]="NORMAL",h[h.TEXTURE1D=5]="TEXTURE1D",h[h.TEXTURE2D=6]="TEXTURE2D",h[h.TEXTURE3D=7]="TEXTURE3D",h[h.ID2=8]="ID2",h[h.MAXSEMANTICS=10]="MAXSEMANTICS"}(d.Ih||(d.Ih={}));var S=function(){function h(l,s){if(this.Vs=this.Ae=null,this.Oq=this.Aa=0,this.uh=this.bg=null,this.wl=0,s!==void 0){for(this.Aa=s.Aa,this.Oq=s.Oq,this.bg=s.bg.slice(0),this.uh=s.uh.slice(0),this.wl=s.wl,this.Vs=[],l=s=0;l<this.Aa;l++)this.Vs[l]=s,s+=h.Va(this.bg[l]);for(this.Oq=s,this.Ae=[],l=0;l<this.Aa;l++){s=h.Va(this.kd(l));for(var a=h.se(this.kd(l)),c=0;c<s;c++)this.Ae[this.Vs[l]+c]=a}}else this.Oq=this.Aa=0}return h.prototype.kd=function(l){if(0>l||l>this.Aa)throw d.i.N();return this.bg[l]},h.prototype.Pf=function(l){return this.uh[l]},h.lz=function(l){return h.JM[l]},h.Tp=function(l){return h.SM[l]},h.Va=function(l){return h.rM[l]},h.prototype.hasAttribute=function(l){return 0<=this.uh[l]},h.prototype.iG=function(){return this.hasAttribute(1)},h.se=function(l){return h.eD[l]},h.prototype.LR=function(l){return this.Vs[l]},h.DG=function(l,s){return h.eD[l]===s},h.prototype.Nb=function(l){return this===l},h.prototype.An=function(){for(var l=d.O.Th(this.bg[0]),s=1;s<this.Aa;s++)l=d.O.Th(this.bg[s],l);return l},h.prototype.$j=function(l){return this.Vs[l]},h.prototype.cc=function(){return this.wl},h.prototype.Ed=function(l){return this.bg[l]},h.eD=[0,0,NaN,0,0,0,0,0,0],h.JM=[1,1,1,0,2,1,1,1,0],h.SM=[1,1,1,2,0,0,0,0,2],h.rM=[2,1,1,1,3,1,2,3,2],h}();d.ra=S}(Y||(Y={})),function(d){function O(p,y,v){var _=y-(p=new c(p)).e,x=p.c;for(x.length>++y&&S(p,_,c.eu),x[0]?v?_=y:(x=p.c,_=p.e+_+1):++_;x.length<_;x.push(0));return _=p.e,v===1||v&&(y<=_||_<=l)?(0>p.Bd&&x[0]?"-":"")+(1<x.length?x[0]+"."+x.join("").slice(1):x[0])+(0>_?"e":"e+")+_:p.toString()}function S(p,y,v,_){var x=p.c,T=p.e+y+1;if(v===1?_=5<=x[T]:v===2?_=5<x[T]||x[T]==5&&(_||0>T||x[T+1]!==void 0||1&x[T-1]):v===3?_=_||x[T]!==void 0||0>T:(_=!1,v!==0&&h("!Big.RM!")),1>T||!x[0])_?(p.e=-y,p.c=[1]):p.c=[p.e=0];else{if(x.length=T--,_)for(;9<++x[T];)x[T]=0,T--||(++p.e,x.unshift(1));for(T=x.length;!x[--T];x.pop());}return p}function h(p){throw(p=Error(p)).name="BigError",p}var l=-7,s=21,a=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,c=function(){function p(y){if(y instanceof p)this.Bd=y.Bd,this.e=y.e,this.c=y.c.slice();else{var v,_,x;for(y===0&&0>1/y?y="-0":a.test(y+="")||h(NaN),this.Bd=y.charAt(0)=="-"?(y=y.slice(1),-1):1,-1<(v=y.indexOf("."))&&(y=y.replace(".","")),0<(_=y.search(/e/i))?(0>v&&(v=_),v+=+y.slice(_+1),y=y.substring(0,_)):0>v&&(v=y.length),_=0;y.charAt(_)=="0";_++);if(_==(x=y.length))this.c=[this.e=0];else{for(;y.charAt(--x)=="0";);for(this.e=v-_-1,this.c=[],v=0;_<=x;this.c[v++]=+y.charAt(_++));}}}return p.prototype.abs=function(){var y=new p(this);return y.Bd=1,y},p.prototype.cmp=function(y){var v=this.c,_=(y=new p(y)).c,x=this.Bd,T=y.Bd,C=this.e,A=y.e;if(!v[0]||!_[0])return v[0]?x:_[0]?-T:0;if(x!=T)return x;if(y=0>x,C!=A)return C>(A^y)?1:-1;for(x=-1,T=(C=v.length)<(A=_.length)?C:A;++x<T;)if(v[x]!=_[x])return v[x]>(_[x]^y)?1:-1;return C==A?0:C>(A^y)?1:-1},p.prototype.jm=function(y){var v=this.c,_=(y=new p(y)).c,x=this.Bd==y.Bd?1:-1,T=p.rr;if((T!==~~T||0>T||1e6<T)&&h("!Big.DP!"),!v[0]||!_[0])return v[0]==_[0]&&h(NaN),_[0]||h(x/0),new p(0*x);var C,A,R=_.slice(),F=C=_.length,N=v.length,B=v.slice(0,C),q=B.length,U=y,K=U.c=[],X=0,te=T+(U.e=this.e-y.e)+1;for(U.Bd=x,x=0>te?0:te,R.unshift(0);q++<C;B.push(0));do{for(A=0;10>A;A++){if(C!=(q=B.length))var ae=C>q?1:-1;else{var ge=-1;for(ae=0;++ge<C;)if(_[ge]!=B[ge]){ae=_[ge]>B[ge]?1:-1;break}}if(!(0>ae))break;for(y=q==C?_:R;q;){if(B[--q]<y[q]){for(ge=q;ge&&!B[--ge];B[ge]=9);--B[ge],B[q]+=10}B[q]-=y[q]}for(;!B[0];B.shift());}K[X++]=ae?A:++A,B[0]&&ae?B[q]=v[F]||0:B=[v[F]]}while((F++<N||B[0]!==void 0)&&x--);return K[0]||X==1||(K.shift(),U.e--),X>te&&S(U,T,p.eu,B[0]!==void 0),U},p.prototype.fS=function(){return 0<this.cmp(0)},p.prototype.nT=function(){return 0>this.cmp(0)},p.prototype.jt=function(y){var v,_=this.Bd,x=(y=new p(y)).Bd;if(_!=x)return y.Bd=-x,this.tI(y);var T=this.c.slice(),C=this.e,A=y.c,R=y.e;if(!T[0]||!A[0])return A[0]?(y.Bd=-x,y):new p(T[0]?this:0);if(_=C-R){for((v=0>_)?(_=-_,C=T):(R=C,C=A),C.reverse(),x=_;x--;C.push(0));C.reverse()}else for(C=((v=T.length<A.length)?T:A).length,_=x=0;x<C;x++)if(T[x]!=A[x]){v=T[x]<A[x];break}if(v&&(C=T,T=A,A=C,y.Bd=-y.Bd),0<(x=(C=A.length)-(v=T.length)))for(;x--;T[v++]=0);for(x=v;C>_;){if(T[--C]<A[C]){for(v=C;v&&!T[--v];T[v]=9);--T[v],T[C]+=10}T[C]-=A[C]}for(;T[--x]==0;T.pop());for(;T[0]==0;)T.shift(),--R;return T[0]||(y.Bd=1,T=[R=0]),y.c=T,y.e=R,y},p.prototype.tI=function(y){var v=this.Bd,_=(y=new p(y)).Bd;if(v!=_)return y.Bd=-_,this.jt(y);_=this.e;var x=this.c,T=y.e,C=y.c;if(!x[0]||!C[0])return C[0]?y:new p(x[0]?this:0*v);if(x=x.slice(),v=_-T){for(0<v?(T=_,_=C):(v=-v,_=x),_.reverse();v--;_.push(0));_.reverse()}for(0>x.length-C.length&&(_=C,C=x,x=_),v=C.length,_=0;v;)_=(x[--v]=x[v]+C[v]+_)/10|0,x[v]%=10;for(_&&(x.unshift(_),++T),v=x.length;x[--v]==0;x.pop());return y.c=x,y.e=T,y},p.prototype.pow=function(y){var v=this,_=new p(1),x=_,T=0>y;for((y!==~~y||-1e6>y||1e6<y)&&h("!pow!"),y=T?-y:y;1&y&&(x=x.lr(v)),y>>=1;)v=v.lr(v);return T?_.jm(x):x},p.prototype.round=function(y,v){var _=this;return y==null?y=0:(y!==~~y||0>y||1e6<y)&&h("!round!"),S(_=new p(_),y,v??p.eu),_},p.prototype.sqrt=function(){var y=this.c,v=this.Bd,_=this.e,x=new p("0.5");if(!y[0])return new p(this);0>v&&h(NaN),(v=Math.sqrt(this.toString()))==0||v==1/0?((v=y.join("")).length+_&1||(v+="0"),(y=new p(Math.sqrt(v).toString())).e=((_+1)/2|0)-(0>_||1&_)):y=new p(v.toString()),v=y.e+(p.rr+=4);do _=y,y=x.lr(_.tI(this.jm(_)));while(_.c.slice(0,v).join("")!==y.c.slice(0,v).join(""));return S(y,p.rr-=4,p.eu),y},p.prototype.lr=function(y){var v=this.c,_=(y=new p(y)).c,x=v.length,T=_.length,C=this.e,A=y.e;if(y.Bd=this.Bd==y.Bd?1:-1,!v[0]||!_[0])return new p(0*y.Bd);if(y.e=C+A,x<T){var R=v;v=_,_=R,A=x,x=T,T=A}for(R=Array(A=x+T);A--;R[A]=0);for(C=T;C--;){for(T=0,A=x+C;A>C;)T=R[A]+_[C]*v[A-C-1]+T,R[A--]=T%10,T=T/10|0;R[A]=(R[A]+T)%10}for(T&&++y.e,R[0]||R.shift(),C=R.length;!R[--C];R.pop());return y.c=R,y},p.prototype.toString=function(){var y=this.e,v=this.c.join(""),_=v.length;if(y<=l||y>=s)v=v.charAt(0)+(1<_?"."+v.slice(1):"")+(0>y?"e":"e+")+y;else if(0>y){for(;++y;v="0"+v);v="0."+v}else if(0<y)if(++y>_)for(y-=_;y--;v+="0");else y<_&&(v=v.slice(0,y)+"."+v.slice(y));else 1<_&&(v=v.charAt(0)+"."+v.slice(1));return 0>this.Bd&&this.c[0]?"-"+v:v},p.prototype.toExponential=function(y){return y==null?y=this.c.length-1:(y!==~~y||0>y||1e6<y)&&h("!toExp!"),O(this,y,1)},p.prototype.toFixed=function(y){var v=l,_=s;if(l=-(s=1/0),y==null)var x=this.toString();else y===~~y&&0<=y&&1e6>=y&&(x=O(this,this.e+y),0>this.Bd&&this.c[0]&&0>x.indexOf("-")&&(x="-"+x));return l=v,s=_,x||h("!toFix!"),x},p.prototype.toPrecision=function(y){return y==null?this.toString():((y!==~~y||1>y||1e6<y)&&h("!toPre!"),O(this,y-1,2))},p.rr=20,p.eu=1,p}();d.hp=c}(Y||(Y={})),function(d){var O=function(){function S(h){this.lf=h}return S.prototype.nr=function(h,l,s){var a=new d.h,c=new d.h,p=this.lf;s.Vd(h,l,function(y,v){return p.tc(2*y,a),p.tc(2*v,c),a.compare(c)})},S.prototype.$p=function(h){return this.lf.read(2*h+1)},S}();d.pi=function(){function S(){}return S.aq=function(h){if(h.B())return!1;var l=h.getType();return l==1736?h.Ke()!=0:l==1607?(l=[!1],S.sE(h,!0,l),l[0]):!(l!=197&&(!d.aa.yd(l)||h.BG()))},S.gm=function(h){var l=h.getType();if(l==1736)return l=new d.Ta(h.description),h.B()||h.dD(l),l;if(l==1607)return S.sE(h,!1,null);if(l==197)return l=new d.Ta(h.description),h.B()||l.ad(h,!1),l;if(d.aa.yd(l)){if(l=new d.de(h.description),!h.B()&&!h.BG()){var s=new d.Sa;h.To(s),l.add(s),h.Po(s),l.add(s)}return l}if(d.aa.Rn(l))return null;throw d.i.N()},S.sE=function(h,l,s){s!=null&&(s[0]=!1);var a=null;if(l||(a=new d.de(h.description)),!h.B()){var c=new d.ia(0);c.Jb(2*h.da());for(var p=0,y=h.da();p<y;p++)if(0<h.Ja(p)&&!h.Nn(p)){var v=h.Ba(p);c.add(v),v=h.Vc(p)-1,c.add(v)}if(0<c.size){y=new d.Xt,p=h.ub(0),y.sort(c,0,c.size,new O(p)),y=new d.h,p.tc(2*c.get(0),y),v=0;for(var _=1,x=new d.Sa,T=new d.h,C=1,A=c.size;C<A;C++)if(p.tc(2*c.get(C),T),T.qb(y))c.get(v)>c.get(C)?(c.set(v,2147483647),v=C):c.set(C,2147483647),_++;else{if(1&_){if(l)return s!=null&&(s[0]=!0),null}else c.set(v,2147483647);y.L(T),v=C,_=1}if(1&_){if(l)return s!=null&&(s[0]=!0),null}else c.set(v,2147483647);if(!l)for(c.Vd(0,c.size,function(R,F){return R-F}),C=0,A=c.size;C<A&&c.get(C)!=2147483647;C++)h.ve(c.get(C),x),a.add(x)}}return l?null:a},S}()}(Y||(Y={})),function(d){var O=function(){function S(){this.yf=new d.ia(0),this.ys=new d.ia(0),this.EH=1,this.Es=NaN}return S.prototype.sort=function(h,l,s,a){if(32>s-l)a.nr(l,s,h);else{var c=!0;try{for(var p=1/0,y=-1/0,v=l;v<s;v++){var _=a.$p(h.get(v));_<p&&(p=_),_>y&&(y=_)}if(this.reset(s-l,p,y,s-l)){for(v=l;v<s;v++){var x=h.get(v);_=a.$p(x);var T=this.zF(_);this.yf.set(T,this.yf.get(T)+1),this.ys.write(v-l,x)}var C=this.yf.get(0);this.yf.set(0,0),v=1;for(var A=this.yf.size;v<A;v++){var R=this.yf.get(v);this.yf.set(v,C),C+=R}for(v=l;v<s;v++){x=this.ys.read(v-l),_=a.$p(x),T=this.zF(_);var F=this.yf.get(T);h.set(F+l,x),this.yf.set(T,F+1)}c=!1}}catch{this.yf.resize(0),this.ys.resize(0)}if(c)a.nr(l,s,h);else{for(v=s=0,A=this.yf.size;v<A;v++)c=s,(s=this.yf.get(v))>c&&a.nr(l+c,l+s,h);100<this.yf.size&&(this.yf.resize(0),this.ys.resize(0))}}},S.prototype.reset=function(h,l,s,a){return!(2>h||s==l)&&(h=Math.min(S.hL,h),this.yf.Jb(h),this.yf.resize(h),this.yf.Wj(0,0,this.yf.size),this.EH=l,this.ys.resize(a),this.Es=(s-l)/(h-1),!0)},S.prototype.zF=function(h){return d.O.truncate((h-this.EH)/this.Es)},S.hL=65536,S}();d.Xt=O}(Y||(Y={})),function(d){var O,S;(S=O||(O={}))[S.enum_line=1]="enum_line",S[S.enum_arc=2]="enum_arc",S[S.enum_dummy=4]="enum_dummy",S[S.enum_concave_dip=8]="enum_concave_dip",S[S.enum_connection=3]="enum_connection";var h=function(){function p(){}return p.Qu=function(y,v,_,x,T,C){var A=new p;return A.Im=new d.h,A.Vm=new d.h,A.aw=new d.h,A.Im.L(y),A.Vm.L(v),A.aw.L(_),A.Co=x,A.qh=T,A.sh=C,A},p.construct=function(y,v,_,x){var T=new p;return T.Im=new d.h,T.Vm=new d.h,T.aw=new d.h,T.Im.L(y),T.Vm.L(v),T.aw.Rc(),T.Co=4,T.qh=_,T.sh=x,T},p}(),l=function(){function p(y,v,_,x,T,C){this.Yv=null,this.ya=0,this.EA=y,this.bI=this.$H=0,this.Ka=v,this.Mj=_,this.vk=x,this.Dq=T,this.Ub=C}return p.prototype.next=function(){for(var y=new d.Sa;;){if(this.ya==this.EA.I())return null;if(this.EA.ve(this.ya,y),this.ya++,!y.B())break}var v=!1;if(this.Yv==null&&(this.$H=y.Lg(),this.bI=y.ih(),this.Yv=c.buffer(y,this.Ka,this.Mj,this.vk,this.Dq,this.Ub),v=!0),this.ya<this.EA.I()){var _=new d.Da;this.Yv.copyTo(_)}else _=this.Yv;if(!v){v=new d.Dd;var x=y.Lg()-this.$H;y=y.ih()-this.bI,v.gg(x,y),_.Oc(v)}return _},p.prototype.La=function(){return 0},p.prototype.qe=function(){},p}(),s=function(){function p(y,v){this.Wa=y,this.ya=0,this.oq=v}return p.prototype.next=function(){var y=this.Wa.X;if(this.ya<y.da()){var v=this.ya;if(this.ya++,!y.Nn(v))for(var _=y.Na(y.Vc(v)-1);this.ya<y.da();){var x=y.Na(y.Ba(this.ya));if(y.Nn(this.ya)||x!=_)break;_=y.Na(y.Vc(this.ya)-1),this.ya++}if(this.ya-v==1)return this.Wa.kE(this.Wa.X,v,this.oq);for((_=new d.Ta(this.Wa.X.description)).addPath(this.Wa.X,v,!0),v+=1;v<this.ya;v++)_.Dr(this.Wa.X,v,0,y.rv(v),!1);return this.Wa.kE(_,0,this.oq)}return null},p.prototype.La=function(){return 0},p.prototype.qe=function(){},p}(),a=function(){function p(y){this.Wa=y,this.ya=0}return p.prototype.next=function(){var y=this.Wa.X;if(this.ya<y.da()){var v=this.ya;for(y.Ir(this.ya),this.ya++;this.ya<y.da()&&!(0<y.Ir(this.ya));)this.ya++;return v==0&&this.ya==y.da()?this.Wa.py(y,0,y.da()):this.Wa.py(y,v,this.ya)}return null},p.prototype.La=function(){return 0},p.prototype.qe=function(){},p}(),c=function(){function p(y){this.Ks=this.lw=this.Ls=this.Id=null,this.Zd=[],this.Ub=y,this.rb=this.Kv=this.JT=this.Ka=this.tA=this.ct=this.qa=0,this.oA=this.vk=-1,this.oq=!0}return p.buffer=function(y,v,_,x,T,C){if(y==null||0>x)throw d.i.N();if(y.B())return new d.Da(y.description);var A=new d.l;return y.xc(A),0<v&&A.W(v,v),(C=new p(C)).Mj=_,C.X=y,C.qa=d.ta.Wd(_,A,!0),C.ct=d.ta.Wd(null,A,!0),C.Ka=v,C.JT=y.getType(),0>=T&&(T=96),C.rb=Math.abs(C.Ka),C.Kv=C.rb!=0?1/C.rb:0,isNaN(x)||x==0?x=1e-5*C.rb:x>.5*C.rb&&(x=.5*C.rb),12>T&&(T=12),(y=Math.abs(v)*(1-Math.cos(Math.PI/T)))>x?x=y:(y=Math.PI/Math.acos(1-x/Math.abs(v)))<T-1&&12>(T=d.O.truncate(y))&&(T=12,x=Math.abs(v)*(1-Math.cos(Math.PI/T))),C.vk=x,C.Dq=T,C.tA=Math.min(C.ct,.25*x),C.lE()},p.prototype.cv=function(){if(this.Id==null)this.Id=[];else if(this.Id.length!==0)return;var y=this.qE();y=d.O.truncate((y+3)/4);var v=.5*Math.PI/y;this.oA=v;for(var _=0;_<4*y;_++)this.Id.push(null);var x=Math.cos(v);v=Math.sin(v);var T=d.h.construct(0,1);for(_=0;_<y;_++)this.Id[_+0*y]=d.h.construct(T.y,-T.x),this.Id[_+1*y]=d.h.construct(-T.x,-T.y),this.Id[_+2*y]=d.h.construct(-T.y,T.x),this.Id[_+3*y]=T,(T=d.h.construct(T.x,T.y)).Bt(x,v)},p.prototype.lE=function(){var y=this.X.getType();if(d.aa.yd(y))return(y=new d.Ta(this.X.description)).oc(this.X,!0),this.X=y,this.lE();if(this.Ka<=this.qa){if(!d.aa.US(y))return new d.Da(this.X.description);if(0>=this.Ka&&(y=new d.l,this.X.A(y),y.R()<=2*-this.Ka||y.ca()<=2*this.Ka))return new d.Da(this.X.description)}switch(this.X.getType()){case 33:return this.PN();case 550:return this.ON();case 1607:return this.RN();case 1736:return this.QN();case 197:return this.LN();default:throw d.i.Qa()}},p.prototype.RN=function(){if(this.EG(this.X)){var y=new d.Sa;this.X.ve(0,y);var v=new d.l;return this.X.A(v),y.Cb(v.sf()),this.Gu(y)}return this.X=this.WV(this.X),y=new s(this,this.oq),d.Gh.local().V(y,this.Mj,this.Ub).next()},p.prototype.QN=function(){if(this.Ka==0)return this.X;var y=d.Yl.local();if(this.cv(),this.X=y.V(this.X,null,!1,this.Ub),0>this.Ka){var v=this.X;return v=this.py(v,0,v.da()),y.V(v,this.Mj,!1,this.Ub)}return this.EG(this.X)?(y=new d.Sa,this.X.ve(0,y),v=new d.l,this.X.A(v),y.Cb(v.sf()),this.Gu(y)):(y=new a(this),d.Gh.local().V(y,this.Mj,this.Ub).next())},p.prototype.py=function(y,v,_){for(var x=new d.Da(y.description);v<_;v++)if(!(1>y.Ja(v))){var T=y.Ir(v),C=new d.l;if(y.Rj(v,C),0<this.Ka){if(0<T)if(this.FG(y,v))T=new d.Sa,y.ve(y.Ba(v),T),T.Cb(C.sf()),this.yu(x,T);else{var A=T=new d.Ta(y.description);A=d.Zt.JG(this.X,v)||this.zn(this.X,v,A,!0,1)==2?this.jE(y,v):this.yn(T),x.add(A,!1)}else if(!(C.R()+this.qa<=2*this.rb||C.ca()+this.qa<=2*this.rb||(A=T=new d.Ta(y.description),this.zn(this.X,v,A,!0,1),T.B()))){var R=new d.l;for(R.K(C),R.W(this.rb,this.rb),A.tp(R),C=1,T=(A=this.yn(T)).da();C<T;C++)x.addPath(A,C,!0)}}else if(0<T){if(!(C.R()+this.qa<=2*this.rb||C.ca()+this.qa<=2*this.rb||(A=T=new d.Ta(y.description),this.zn(this.X,v,A,!0,-1),T.B())))for(R=new d.l,A.xc(R),R.W(this.rb,this.rb),A.tp(R),C=1,T=(A=this.yn(T)).da();C<T;C++)x.addPath(A,C,!0)}else for(A=T=new d.Ta(y.description),this.zn(this.X,v,A,!0,-1),C=0,T=(A=this.yn(T)).da();C<T;C++)x.addPath(A,C,!0)}if(0<this.Ka)return 1<x.da()?x=this.yn(x):p.kx(x);if(y=new d.l,x.xc(y),x.B())return p.kx(x);for(y.W(this.rb,this.rb),x.tp(y),x=this.yn(x),y=new d.Da(x.description),C=1,T=x.da();C<T;C++)y.addPath(x,C,!1);return p.kx(y)},p.prototype.PN=function(){return this.Gu(this.X)},p.prototype.Gu=function(y){var v=new d.Da(this.X.description);return this.yu(v,y),this.sX(v)},p.prototype.ON=function(){var y=new l(this.X,this.Ka,this.Mj,this.vk,this.Dq,this.Ub);return d.Gh.local().V(y,this.Mj,this.Ub).next()},p.prototype.LN=function(){var y=new d.Da(this.X.description);if(0>=this.Ka){if(this.Ka==0)y.ad(this.X,!1);else{var v=new d.Fh;this.X.bn(v),v.W(this.Ka,this.Ka),y.ad(v,!1)}return y}return y.ad(this.X,!1),this.X=y,this.jE(y,0)},p.prototype.jE=function(y,v){this.cv();var _=new d.Da(y.description),x=new d.h,T=new d.h,C=new d.h,A=new d.h,R=new d.h,F=new d.h,N=new d.h,B=new d.h,q=y.Ja(v),U=y.Ba(v),K=0;for(v=y.Ja(v);K<v;K++){if(y.D(U+K,T),y.D(U+(K+1)%q,A),y.D(U+(K+2)%q,F),N.uc(A,T),N.length()==0||(N.Hv(),N.normalize(),N.scale(this.rb),x.add(N,T),C.add(N,A),K==0?_.Lt(x):_.Ci(x),_.Ci(C),B.uc(F,A),B.length()==0))throw d.i.Qa();B.Hv(),B.normalize(),B.scale(this.rb),R.add(B,A),this.GD(_,A,C,R,!1)}return p.kx(_)},p.prototype.kE=function(y,v,_){if(this.cv(),1>y.Ja(v))return null;if(this.FG(y,v)&&0<this.Ka){_=new d.Sa,y.ve(y.Ba(v),_);var x=new d.l;return y.Rj(v,x),_.Cb(x.sf()),this.Gu(_)}if(x=new d.Ta(y.description),y.Nn(v))this.zn(y,v,x,_,1),this.zn(y,v,x,_,-1);else{var T=new d.Ta(y.description);T.addPath(y,v,!1),T.Dr(y,v,0,y.rv(v),!1),this.zn(T,0,x,_,1)}return this.yn(x)},p.prototype.Xq=function(){if(this.Ys++,this.Ys%1024==0&&this.Ub!=null&&!this.Ub.progress(-1,-1))throw d.i.fu("user_canceled")},p.prototype.yn=function(y){return d.Fg.Mk(y,this.ct,!0,!0,this.Ub)},p.prototype.qE=function(){if(this.vk==0)return this.Dq;var y=1-this.vk*Math.abs(this.Kv);return 4>(y=-1>y?4:2*Math.PI/Math.acos(y)+.5)?y=4:y>this.Dq&&(y=this.Dq),d.O.truncate(y)},p.prototype.GD=function(y,v,_,x,T){this.cv();var C=new d.h;C.uc(_,v),C.scale(this.Kv);var A=new d.h;A.uc(x,v),A.scale(this.Kv),0>(C=Math.atan2(C.y,C.x)/this.oA)&&(C=this.Id.length+C),C=this.Id.length-C,0>(A=Math.atan2(A.y,A.x)/this.oA)&&(A=this.Id.length+A),(A=this.Id.length-A)<C&&(A+=this.Id.length);var R=d.O.truncate(A);A=d.O.truncate(Math.ceil(C)),(C=new d.h).L(this.Id[A%this.Id.length]),C.Ct(this.rb,v);var F=10*this.qa;for(C.sub(_),C.length()<F&&(A+=1),C.L(this.Id[R%this.Id.length]),C.Ct(this.rb,v),C.sub(x),C.length()<F&&--R,_=R-A,_++,R=0,A%=this.Id.length;R<_;R++,A=(A+1)%this.Id.length)C.L(this.Id[A]),C.Ct(this.rb,v),y.Ci(C),this.Xq();T&&y.Ci(x)},p.prototype.zn=function(y,v,_,x,T){var C=new d.gd,A=C.mN(y,v);if(C.Gp(this.tA,!1,!1),2>C.I(A))return 0>T||(T=y,C=new d.Sa,T.ve(T.Ba(v),C),this.yu(_,C)),1;var R=C.Na(C.Xa(C.Ob(A))),F=new d.Dd;if(F.gg(-R.x,-R.y),C.Oc(F),x&&(this.tQ(C,A,T),2>C.I(A)))return 0>T||(T=y,C=new d.Sa,T.ve(T.Ba(v),C),this.yu(_,C)),1;this.Zd.length=0;var N=C.Ob(A);v=C.Xa(N);var B=T==1?C.Ma(v):C.U(v);y=T==1?C.U(v):C.Ma(v);var q=!0;x=new d.h,A=new d.h;var U=new d.h,K=new d.h,X=new d.h,te=new d.h,ae=new d.h,ge=new d.h,Ee=new d.h,Ae=new d.h,Me=this.rb;N=C.Ja(N);for(var He=0;He<N;He++)C.D(y,A),q&&(C.D(v,x),C.D(B,U),ge.uc(x,U),ge.normalize(),Ae.MG(ge),Ae.scale(Me),K.add(Ae,x)),ae.uc(A,x),ae.normalize(),Ee.MG(ae),Ee.scale(Me),X.add(x,Ee),B=ge.wi(ae),q=ge.Qh(ae),0>B||0>q&&B==0?this.Zd.push(h.Qu(K,X,x,2,this.Zd.length+1,this.Zd.length-1)):K.qb(X)||(this.Zd.push(h.construct(K,x,this.Zd.length+1,this.Zd.length-1,"dummy")),this.Zd.push(h.construct(x,X,this.Zd.length+1,this.Zd.length-1,"dummy"))),te.add(A,Ee),this.Zd.push(h.Qu(X,te,x,1,this.Zd.length+1,this.Zd.length-1)),K.L(te),Ae.L(Ee),U.L(x),x.L(A),ge.L(ae),B=v,v=y,q=!1,y=T==1?C.U(v):C.Ma(v);return this.Zd[this.Zd.length-1].qh=0,this.Zd[0].sh=this.Zd.length-1,this.YV(_),F.gg(R.x,R.y),_.YD(F,_.da()-1),1},p.prototype.YV=function(y){for(var v=this.zO(),_=!0,x=v+1,T=v;x!=v;T=x){var C=this.Zd[T];x=C.qh!=-1?C.qh:(T+1)%this.Zd.length,C.Co!=0&&(_&&y.Lt(C.Im),C.Co==2?this.GD(y,C.aw,C.Im,C.Vm,!0):y.Ci(C.Vm),_=!1)}},p.prototype.zO=function(){this.Ks==null&&(this.Ks=[null,null,null,null,null,null,null,null,null]);for(var y=0,v=0,_=this.Zd.length;v<_;){var x=this.Zd[v];if(3&x.Co){y=v;break}v=x.qh}for(_=y+1,v=y;_!=y;v=_){_=(x=this.Zd[v]).qh;for(var T=1,C=null;_!=v&&!(3&(C=this.Zd[_]).Co);)_=C.qh,T++;T!=1&&(x.Co&C.Co)==1&&(this.Ls==null&&(this.Ls=new d.yb,this.lw=new d.yb),this.Ls.Dc(x.Im),this.Ls.Qc(x.Vm),this.lw.Dc(C.Im),this.lw.Qc(C.Vm),this.Ls.Ea(this.lw,this.Ks,null,null,this.ct)==1&&(x.Vm.L(this.Ks[0]),C.Im.L(this.Ks[0]),x.qh=_,C.sh=v))}return y},p.prototype.Fv=function(y,v,_){var x=new d.h;if(x.uc(_,y),_=x.length(),0<(_=this.rb*this.rb-_*_*.25)){_=Math.sqrt(_),x.normalize(),x.ar();var T=new d.h;if(T.uc(v,y),T.Qh(x)+_>=this.rb)return!0}return!1},p.prototype.tQ=function(y,v,_){for(var x=0;1>x;x++){var T=!1,C=y.Ob(v),A=y.Ja(C);if(A==0)break;var R=A;if(3>A)break;!y.dc(C)&&(R=A-1),C=y.Xa(C),A=0<_?y.Ma(C):y.U(C);for(var F=0<_?y.U(C):y.Ma(C),N=A,B=!0,q=new d.h,U=new d.h,K=new d.h,X=new d.h,te=new d.h,ae=d.h.construct(0,0),ge=new d.h,Ee=new d.h,Ae=new d.h,Me=new d.h,He=this.rb,Ie=0,dt=0;dt<R&&(y.D(F,U),B&&(y.D(C,q),y.D(A,K),N=A),Ee.uc(q,K),Ee.normalize(),ge.uc(U,q),ge.normalize(),N!=F);){var ut=Ee.wi(ge),Nt=Ee.Qh(ge),yi=!0;if(0>ut||0>Nt&&ut==0||!this.Fv(K,q,U)||(ae.L(U),yi=!1,++Ie,T=!0),yi){if(0<Ie)for(;(ut=0<_?y.Ma(N):y.U(N))!=C;){if(y.D(ut,X),!this.Fv(X,K,ae)){ut!=F&&this.Fv(X,K,U)&&this.Fv(X,q,U)&&(K.L(X),N=ut,yi=!1,++Ie);break}K.L(X),N=ut,yi=!1,++Ie}if(!yi)continue;if(0<Ie){for(N=0<_?y.Ma(A):y.U(A),B=1;B<Ie;B++)yi=0<_?y.Ma(N):y.U(N),y.pd(N,!0),N=yi;Ae.uc(q,K),Ie=He*He-(Ie=Ae.length())*Ie*.25,He-(Ie=Math.sqrt(Ie))>.5*this.vk?(te.add(K,q),te.scale(.5),Ae.normalize(),Ae.ar(),Me.L(Ae),Me.scale(He-Ie),te.add(Me),y.mf(A,te)):y.pd(A,!0),Ie=0}K.L(q),N=C}q.L(U),A=C,C=F,F=0<_?y.U(C):y.Ma(C),dt++,B=!1}if(0<Ie){for(N=0<_?y.Ma(A):y.U(A),B=1;B<Ie;B++)yi=0<_?y.Ma(N):y.U(N),y.pd(N,!0),N=yi;te.add(K,q),te.scale(.5),Ae.uc(q,K),Ie=He*He-(Ie=Ae.length())*Ie*.25,Ie=Math.sqrt(Ie),Ae.normalize(),Ae.ar(),Me.L(Ae),Me.scale(He-Ie),te.add(Me),y.mf(A,te)}if(y.Gp(this.tA,!1,!1),!T)break}},p.prototype.FG=function(y,v){if(y.Ja(v)==1)return!0;var _=new d.l;return y.Rj(v,_),Math.max(_.R(),_.ca())<.5*this.vk},p.prototype.EG=function(y){var v=new d.l;return y.A(v),Math.max(v.R(),v.ca())<.5*this.vk},p.prototype.WV=function(y){for(var v=0,_=0,x=(y=d.EC.local().V(y,.25*this.vk,!1,this.Ub)).da();_<x;_++)v=Math.max(y.Ja(_),v);return 32>v?(this.oq=!1,y):(this.oq=!0,d.Fg.Mk(y,this.ct,!1,!0,this.Ub))},p.prototype.yu=function(y,v){if(v=v.D(),this.Id!=null&&this.Id.length!==0){var _=new d.h;_.L(this.Id[0]),_.Ct(this.rb,v),y.Lt(_);for(var x=1,T=this.Id.length;x<T;x++)_.L(this.Id[x]),_.Ct(this.rb,v),y.Ci(_)}else{x=this.qE(),_=d.O.truncate((x+3)/4),x=.5*Math.PI/_,T=Math.cos(x);for(var C=Math.sin(x),A=new d.h,R=3;0<=R;R--){switch(A.ma(0,this.rb),R){case 0:for(x=0;x<_;x++)y.yj(A.x+v.x,A.y+v.y),A.Bt(T,C);break;case 1:for(x=0;x<_;x++)y.yj(-A.y+v.x,A.x+v.y),A.Bt(T,C);break;case 2:for(x=0;x<_;x++)y.yj(-A.x+v.x,-A.y+v.y),A.Bt(T,C);break;default:for(y.sx(A.y+v.x,-A.x+v.y),x=1;x<_;x++)A.Bt(T,C),y.yj(A.y+v.x,-A.x+v.y)}this.Xq()}}},p.kx=function(y){return y.Ch(1,0),y},p.prototype.sX=function(y){return y.Ch(2,this.qa),y.fm(),y},p}();d.HK=c}(Y||(Y={})),function(d){var O=function(){function S(h){this.Ca=h,this.g=new d.gd,this.dd=new d.ia(0)}return S.prototype.Lh=function(h,l,s){switch(l){case 0:if(h.v<s&&h.C<=s)break;return h.v>=s?1:-1;case 1:if(h.G<s&&h.H<=s)break;return h.G>=s?1:-1;case 2:if(h.v>=s&&h.C>s)break;return h.C<=s?1:-1;case 3:if(!(h.G>=s&&h.H>s))return h.H<=s?1:-1}return 0},S.prototype.Ay=function(h,l){return h.getType()==1736?this.Cy(h,l):this.Dy(h)},S.prototype.Cy=function(h,l){if(this.Ca.R()==0||this.Ca.ca()==0)return h.Ia();var s=new d.l;h.xc(s),this.X=this.g.Ib(h);var a=new d.l,c=new d.l,p=new d.h,y=new d.h,v=[0,0,0,0,0,0,0,0,0],_=[0,0,0,0,0,0,0,0,0];new d.ig;var x=new d.yb,T=new d.ia(0);T.Jb(Math.min(100,h.I()));for(var C=!1,A=0;!C&&4>A;A++){var R=!1,F=!!(1&A),N=0;switch(A){case 0:N=this.Ca.v,R=s.v<=N&&s.C>=N;break;case 1:N=this.Ca.G,R=s.G<=N&&s.H>=N;break;case 2:N=this.Ca.C,R=s.v<=N&&s.C>=N;break;case 3:N=this.Ca.H,R=s.G<=N&&s.H>=N}if(R)for(C=!0,R=this.g.Ob(this.X);R!=-1;){var B=-1,q=-1,U=this.g.Xa(R),K=U;do{var X=this.g.bc(K);X==null&&(X=x,this.g.D(K,p),X.Dc(p),this.g.D(this.g.U(K),y),X.Qc(y)),X.A(a);var te=this.Lh(a,A,N),ae=0,ge=-1;if(te==-1){ae=0<(X=X.cq(F,N,v,_))?this.g.Ul(K,_,X):0,ae+=1;var Ee=K,Ae=this.g.U(Ee);for(X=0;X<ae;X++){if(this.g.D(Ee,p),this.g.D(Ae,y),(ge=this.g.bc(Ee))==null&&((ge=x).Dc(p),ge.Qc(y)),ge.A(c),(ge=this.Lh(c,A,N))==-1){if(F)(ge=Math.abs(p.y-N))<(Me=Math.abs(y.y-N))?(p.y=N,this.g.mf(Ee,p)):(y.y=N,this.g.mf(Ae,y));else{ge=Math.abs(p.x-N);var Me=Math.abs(y.x-N);ge<Me?(p.x=N,this.g.mf(Ee,p)):(y.x=N,this.g.mf(Ae,y))}(ge=this.g.bc(Ee))==null&&((ge=x).Dc(p),ge.Qc(y)),ge.A(c),ge=this.Lh(c,A,N)}Me=B,B=ge,q==-1&&(q=B),Me==0&&B==1||Me==1&&B==0||Me!=0||B!=0||T.add(Ee),B==1&&(C=!1),ge=Ee=Ae,Ae=this.g.U(Ae)}}ae==0&&(Me=B,B=te,q==-1&&(q=B),Me==0&&B==1||Me==1&&B==0||Me!=0||B!=0||T.add(K),B==1&&(C=!1),ge=this.g.U(K)),K=ge}while(K!=U);for(q==0&&B==0&&T.add(U),X=0,B=T.size;X<B;X++)q=T.get(X),this.g.pd(q,!1);T.clear(!1),R=3>this.g.Ja(R)?this.g.Zq(R):this.g.Rb(R)}}return C?h.Ia():(this.FB(),0<l&&this.My(l),this.g.Ne(this.X))},S.prototype.Dy=function(h){var l=new d.l,s=new d.l,a=[0,0,0,0,0,0,0,0,0],c=[0,0,0,0,0,0,0,0,0],p=new d.ig,y=h,v=new d.l;h.xc(v);for(var _=0;4>_;_++){var x=!1,T=!!(1&_),C=0;switch(_){case 0:C=this.Ca.v,x=v.v<=C&&v.C>=C;break;case 1:C=this.Ca.G,x=v.G<=C&&v.H>=C;break;case 2:C=this.Ca.C,x=v.v<=C&&v.C>=C;break;case 3:C=this.Ca.H,x=v.G<=C&&v.H>=C}if(x){x=y,y=h.Ia(),(x=x.Ga()).Zi();for(var A,R=new d.h;x.$a();)for(var F,N=!0;x.Ha();){var B=x.ha();B.A(l);var q=this.Lh(l,_,C);if(q==-1){if(0<(q=B.cq(T,C,a,c))){var U=0;A=B.ac();for(var K=0;K<=q;K++)if(U!=(F=K<q?c[K]:1)){B.ah(U,F,p);var X=p.get();X.Dc(A),K<q&&(T?(R.x=a[K],R.y=C):(R.x=C,R.y=a[K]),X.Qc(R)),X.A(s);var te=this.Lh(s,_,C);if(te==-1){if(A=X.ac(),U=X.wc(),T)(te=Math.abs(A.y-C))<(ae=Math.abs(U.y-C))?(A.y=C,X.Dc(A)):(U.y=C,X.Qc(U));else{te=Math.abs(A.x-C);var ae=Math.abs(U.x-C);te<ae?(A.x=C,X.Dc(A)):(U.x=C,X.Qc(U))}X.A(s),te=this.Lh(s,_,C)}A=X.wc(),U=F,(F=te)==1?(y.oc(X,N),N=!1):N=!0}}}else(F=q)==1?(y.oc(B,N),N=!1):N=!0}}}return y},S.prototype.FB=function(){this.ji=-1,this.Vl(!1,this.Ca.v),this.Vl(!1,this.Ca.C),this.Vl(!0,this.Ca.G),this.Vl(!0,this.Ca.H),this.dd.resize(0),this.dd.Jb(100),this.ji=this.g.Gd();for(var h=new d.h,l=this.g.Ob(this.X);l!=-1;l=this.g.Rb(l))for(var s=this.g.Xa(l),a=0,c=this.g.Ja(l);a<c;a++,s=this.g.U(s))this.g.D(s,h),(this.Ca.v==h.x||this.Ca.C==h.x||this.Ca.G==h.y||this.Ca.H==h.y)&&(this.g.Ra(s,this.ji,this.dd.size),this.dd.add(s));this.Nl(!1,this.Ca.v),this.Nl(!1,this.Ca.C),this.Nl(!0,this.Ca.G),this.Nl(!0,this.Ca.H),this.Ty()},S.prototype.My=function(h){for(var l=new d.h,s=new d.h,a=d.O.lg(2048,0),c=this.g.Ob(this.X);c!=-1;c=this.g.Rb(c)){var p=this.g.Xa(c),y=p;do{var v=this.g.U(y);this.g.D(y,l);var _=-1;if(l.x==this.Ca.v?(this.g.D(v,s),s.x==this.Ca.v&&(_=1)):l.x==this.Ca.C&&(this.g.D(v,s),s.x==this.Ca.C&&(_=1)),l.y==this.Ca.G?(this.g.D(v,s),s.y==this.Ca.G&&(_=0)):l.y==this.Ca.H&&(this.g.D(v,s),s.y==this.Ca.H&&(_=0)),_!=-1&&(_=d.h.tb(l,s),!(1>=(_=d.O.truncate(Math.min(Math.ceil(_/h),2048)))))){for(var x=1;x<_;x++)a[x-1]=1*x/_;this.g.Ul(y,a,_-1)}y=v}while(y!=p)}},S.prototype.Vl=function(h,l){var s=this.g.Gd(),a=new d.h,c=new d.ia(0);c.Jb(100);for(var p=this.g.Ob(this.X);p!=-1;p=this.g.Rb(p))for(var y=this.g.Xa(p),v=0,_=this.g.Ja(p);v<_;v++){var x=this.g.U(y);this.g.D(y,a),(h?a.y==l:a.x==l)&&(this.g.D(x,a),(h?a.y==l:a.x==l)&&(this.g.Pa(y,s)!=1&&(c.add(y),this.g.Ra(y,s,1)),this.g.Pa(x,s)!=1&&(c.add(x),this.g.Ra(x,s,1)))),y=x}if(this.g.Td(s),!(3>c.size)){var T=this;c.Vd(0,c.size,function(te,ae){return T.Mh(te,ae)}),s=new d.h,p=new d.h,y=new d.h,p.Rc();var C=-1;v=new d.ia(0),_=new d.ia(0),x=this.g.Gd();for(var A=this.g.Gd(),R=0,F=c.size;R<F;R++){var N=c.get(R);if(this.g.D(N,a),!a.qb(p)){if(C!=-1){for(var B=C;B<R;B++){C=c.get(B);var q=this.g.U(C);N=this.g.Ma(C);var U=!1;0>this.Mh(C,q)&&(this.g.D(q,s),h?s.y==l:s.x==l)&&(v.add(C),U=!0,this.g.Ra(C,A,1)),0>this.Mh(C,N)&&(this.g.D(N,s),h?s.y==l:s.x==l)&&(U||v.add(C),this.g.Ra(C,x,1))}for(B=0,U=v.size;B<U;B++){if(C=v.get(B),N=this.g.Pa(C,x),q=this.g.Pa(C,A),N==1){N=this.g.Ma(C),this.g.D(N,y);var K=[0];if(K[0]=0,!y.qb(a)){var X=d.h.tb(p,y);K[0]=d.h.tb(y,a)/X,K[0]==0?K[0]=2220446049250313e-31:K[0]==1&&(K[0]=.9999999999999998),this.g.Ul(N,K,1),N=this.g.Ma(C),this.g.mf(N,a),_.add(N),this.g.Ra(N,x,1),this.g.Ra(N,A,-1)}}q==1&&(q=this.g.U(C),this.g.D(q,y),(K=[0])[0]=0,y.qb(a)||(X=d.h.tb(p,y),K[0]=d.h.tb(p,a)/X,K[0]==0?K[0]=2220446049250313e-31:K[0]==1&&(K[0]=.9999999999999998),this.g.Ul(C,K,1),N=this.g.U(C),this.g.mf(N,a),_.add(N),this.g.Ra(N,x,-1),this.g.Ra(N,A,1)))}C=v,v=_,(_=C).clear(!1)}C=R,p.L(a)}}this.g.Td(x),this.g.Td(A)}},S.prototype.Nl=function(h,l){var s=new d.h,a=new d.ia(0);a.Jb(100);for(var c=this.g.Gd(),p=0,y=this.dd.size;p<y;p++){var v=this.dd.get(p);if(v!=-1){var _=this.g.U(v);this.g.D(v,s),(h?s.y==l:s.x==l)&&(this.g.D(_,s),(h?s.y==l:s.x==l)&&(this.g.Pa(v,c)!=-2&&(a.add(v),this.g.Ra(v,c,-2)),this.g.Pa(_,c)!=-2&&(a.add(_),this.g.Ra(_,c,-2))))}}if(a.size!=0){var x=this;for(a.Vd(0,a.size,function(ae,ge){return x.Mh(ae,ge)}),p=0,y=a.size;p<y;p++){var T=a.get(p);this.g.Ra(T,c,p)}v=new d.h,(_=new d.h).Rc();var C=-1;for(p=0,y=a.size;p<y;p++)if((T=a.get(p))!=-1&&(this.g.D(T,s),!s.qb(_))){if(C!=-1)for(;;){T=!1;for(var A=1<p-C?p-1:p,R=C;R<A;R++){var F=a.get(R);if(F!=-1){var N=-1,B=this.g.U(F);0>this.Mh(F,B)&&(this.g.D(B,v),h?v.y==l:v.x==l)&&(N=B),B=-1;var q=this.g.Ma(F);if(0>this.Mh(F,q)&&(this.g.D(q,v),h?v.y==l:v.x==l)&&(B=q),N!=-1&&B!=-1)this.Kh(F,a,c),this.g.pd(F,!1),this.Kh(N,a,c),this.g.pd(N,!1),T=!0;else if(N!=-1||B!=-1){for(q=R+1;q<p;q++){var U=a.get(q);if(U!=-1){var K=this.g.U(U),X=-1;0>this.Mh(U,K)&&(this.g.D(K,v),h?v.y==l:v.x==l)&&(X=K),K=this.g.Ma(U);var te=-1;if(0>this.Mh(U,K)&&(this.g.D(K,v),h?v.y==l:v.x==l)&&(te=K),X!=-1&&te!=-1){this.Kh(U,a,c),this.g.pd(U,!1),this.Kh(X,a,c),this.g.pd(X,!1),T=!0;break}if(N!=-1&&te!=-1){this.zt(a,F,N,U,te,c),T=!0;break}if(B!=-1&&X!=-1){this.zt(a,U,X,F,B,c),T=!0;break}}}if(T)break}}}if(!T)break}C=p,_.L(s)}}this.g.Td(c)},S.prototype.Kh=function(h,l,s){s=this.g.Pa(h,s),l.set(s,-1),s=this.g.Pa(h,this.ji),this.dd.set(s,-1),(l=this.g.bd(h))!=-1&&this.g.Xa(l)==h&&(this.g.Jf(l,-1),this.g.Wg(l,-1))},S.prototype.zt=function(h,l,s,a,c,p){this.g.Bc(l,a),this.g.Cc(a,l),this.g.Cc(s,c),this.g.Bc(c,s),this.Kh(a,h,p),this.g.mi(a,!1),this.Kh(c,h,p),this.g.mi(c,!0)},S.prototype.Ty=function(){for(var h=0,l=this.dd.size;h<l;h++){var s=this.dd.get(h);s!=-1&&this.g.aj(s,-1)}for(var a=0,c=0,p=this.g.Ob(this.X);p!=-1;){var y=this.g.Xa(p);if(y==-1||p!=this.g.bd(y)){var v=p;p=this.g.Rb(p),this.g.Jf(v,-1),this.g.$q(v)}else{s=y,v=0;do this.g.aj(s,p),v++,s=this.g.U(s);while(s!=y);2>=v?(s=this.g.Pa(y,this.ji),this.dd.set(s,-1),y=this.g.pd(y,!1),v==2&&(s=this.g.Pa(y,this.ji),this.dd.set(s,-1),this.g.pd(y,!1)),v=p,p=this.g.Rb(p),this.g.Jf(v,-1),this.g.$q(v)):(this.g.cp(p,!1),this.g.Wg(p,this.g.Ma(y)),this.g.Vj(p,v),c+=v,a++,p=this.g.Rb(p))}}for(h=0,l=this.dd.size;h<l;h++)if((s=this.dd.get(h))!=-1&&(p=this.g.bd(s))==-1){p=this.g.vf(this.X,-1),v=0,y=s;do this.g.aj(s,p),v++,s=this.g.U(s);while(s!=y);2>=v?(s=this.g.Pa(y,this.ji),this.dd.set(s,-1),y=this.g.pd(y,!1),v==2&&(0<=(s=this.g.Pa(y,this.ji))&&this.dd.set(s,-1),this.g.pd(y,!1)),v=p,this.g.Jf(v,-1),this.g.$q(v)):(this.g.kn(p,!0),this.g.Vj(p,v),this.g.Jf(p,y),this.g.Wg(p,this.g.Ma(y)),this.g.cp(p,!1),c+=v,a++)}for(this.g.Rl(this.X,a),this.g.Tj(this.X,c),h=0,l=this.g.ld;l!=-1;l=this.g.ue(l))h+=this.g.I(l);this.g.bC(h)},S.By=function(h,l,s){return new S(l).Ay(h,s)},S.clip=function(h,l,s,a){if(h.B())return h;if(l.B())return h.Ia();if((s=h.getType())==33)return a=h.D(),l.contains(a)?h:h.Ia();if(s==197)return a=new d.l,h.A(a),a.Ea(l)?(l=new d.Fh,h.copyTo(l),l.Xo(a),l):h.Ia();var c=new d.l;if(h.xc(c),l.contains(c))return h;if(!l.isIntersecting(c))return h.Ia();if((c=h.Bb)!=null&&(c=c.Fk)!=null){if((c=c.Ro(l))==1){if(s!=1736)throw d.i.Qa();return(h=new d.Da(h.description)).tp(l),h}if(c==0)return h.Ia()}switch(s){case 550:s=null,c=h.I();for(var p=h.ub(0),y=0,v=0;v<c;v++)a=new d.h,p.tc(2*v,a),l.contains(a)||(y==0&&(s=h.Ia()),y<v&&s.Fd(h,y,v),y=v+1);return 0<y&&s.Fd(h,y,c),y==0?h:s;case 1736:case 1607:return S.By(h,l,a);default:throw d.i.Qa()}},S.prototype.Mh=function(h,l){var s=new d.h;return this.g.D(h,s),h=new d.h,this.g.D(l,h),s.compare(h)},S}();d.Ud=O}(Y||(Y={})),function(d){var O=function(){function S(h,l){this.Ca=h,this.g=new d.gd,this.dd=new d.ia(0),this.nd=l}return S.prototype.Lh=function(h,l,s){switch(l){case 0:if(h.v<s&&h.C<=s)break;return h.v>=s?1:-1;case 1:if(h.G<s&&h.H<=s)break;return h.G>=s?1:-1;case 2:if(h.v>=s&&h.C>s)break;return h.C<=s?1:-1;case 3:if(!(h.G>=s&&h.H>s))return h.H<=s?1:-1}return 0},S.prototype.Ay=function(h,l){return h.getType()==1736?this.Cy(h,l):this.Dy(h)},S.prototype.Cy=function(h,l){if(this.Ca.R()==0||this.Ca.ca()==0)return h.Ia();var s=new d.l;h.xc(s),this.X=this.g.Ib(h);var a=new d.l,c=new d.l,p=new d.h,y=new d.h,v=[0,0,0,0,0,0,0,0,0],_=[0,0,0,0,0,0,0,0,0],x=new d.yb,T=new d.ia(0);T.Jb(256);for(var C=!1,A=0;!C&&4>A;A++){var R=!1,F=!!(1&A),N=0;switch(A){case 0:N=this.Ca.v,R=s.v<=N&&s.C>=N;break;case 1:N=this.Ca.G,R=s.G<=N&&s.H>=N;break;case 2:N=this.Ca.C,R=s.v<=N&&s.C>=N;break;case 3:N=this.Ca.H,R=s.G<=N&&s.H>=N}if(R)for(C=!0,R=this.g.Ob(this.X);R!=-1;){var B=!0,q=-1,U=-1,K=this.g.Xa(R),X=K;do{var te=this.g.bc(X);te==null&&(te=x,this.g.D(X,p),te.Dc(p),this.g.D(this.g.U(X),y),te.Qc(y)),te.A(a);var ae=this.Lh(a,A,N),ge=0,Ee=-1;if(ae==-1){ge=0<(te=te.cq(F,N,v,_))?this.g.LX(X,_,te):0,ge+=1;var Ae=X,Me=this.g.U(Ae);for(te=0;te<ge;te++){if(this.g.D(Ae,p),this.g.D(Me,y),(Ee=this.g.bc(Ae))==null&&((Ee=x).Dc(p),Ee.Qc(y)),Ee.A(c),(Ee=this.Lh(c,A,N))==-1){if(F)(Ee=Math.abs(p.y-N))<(He=Math.abs(y.y-N))?(p.y=N,this.g.mf(Ae,p)):(y.y=N,this.g.mf(Me,y));else{Ee=Math.abs(p.x-N);var He=Math.abs(y.x-N);Ee<He?(p.x=N,this.g.mf(Ae,p)):(y.x=N,this.g.mf(Me,y))}(Ee=this.g.bc(Ae))==null&&((Ee=x).Dc(p),Ee.Qc(y)),Ee.A(c),Ee=this.Lh(c,A,N)}He=q,q=Ee,U==-1&&(U=q),He==0&&q==1||He==1&&q==0||He!=0||q!=0||T.add(Ae),q==1&&(B=C=!1),Ee=Ae=Me,Me=this.g.U(Me)}}if(ge==0&&(He=q,q=ae,U==-1&&(U=q),He==0&&q==1||He==1&&q==0||He!=0||q!=0||T.add(X),q==1&&(B=C=!1),Ee=this.g.U(X)),X=Ee,256<=T.size){for(te=1,ae=T.size-1;te<ae;te++)ge=T.get(te),this.g.pd(ge,!1);T.set(1,T.Fc()),T.Bh(2)}}while(X!=K);if(!B)for(U==0&&q==0&&T.add(K),te=0,ae=T.size;te<ae;te++)ge=T.get(te),this.g.pd(ge,!1);T.clear(!1),R=B||this.g.Ja(R)==0?this.g.Zq(R):this.g.Rb(R)}}return C?h.Ia():(this.FB(),0<l&&this.My(l),this.g.Ne(this.X))},S.prototype.Dy=function(h){var l=new d.l,s=new d.l,a=[0,0,0,0,0,0,0,0,0],c=[0,0,0,0,0,0,0,0,0],p=new d.ig,y=h,v=new d.l;h.xc(v);for(var _=new d.h,x=new d.h,T=null,C=null,A=0;4>A;A++){var R=!1,F=!!(1&A),N=0;switch(A){case 0:N=this.Ca.v,R=v.v<=N&&v.C>=N;break;case 1:N=this.Ca.G,R=v.G<=N&&v.H>=N;break;case 2:N=this.Ca.C,R=v.v<=N&&v.C>=N;break;case 3:N=this.Ca.H,R=v.G<=N&&v.H>=N}if(R)for(R=y,y=h.Ia(),(R=R.Ga()).Zi();R.$a();)for(var B,q=!0;R.Ha();){var U=R.ha();U.A(l);var K=this.Lh(l,A,N);if(K==-1){if(0<(K=U.cq(F,N,a,c))){var X=0;U.Yp(_);for(var te=0;te<=K;te++)if(X!=(B=te<K?c[te]:1)){U.ah(X,B,p);var ae=p.get();ae.Dc(_),te<K&&(F?(x.x=a[te],x.y=N):(x.x=N,x.y=a[te]),ae.Qc(x)),ae.A(s);var ge=this.Lh(s,A,N);ge==-1&&(T==null&&(T=new d.h),C==null&&(C=new d.h),ae.Yp(T),ae.Tr(C),F?(X=Math.abs(T.y-N))<(ge=Math.abs(C.y-N))?(T.y=N,ae.Dc(T)):(C.y=N,ae.Qc(C)):(X=Math.abs(T.x-N))<(ge=Math.abs(C.x-N))?(T.x=N,ae.Dc(T)):(C.x=N,ae.Qc(C)),ae.A(s),ge=this.Lh(s,A,N)),ae.Tr(_),X=B,(B=ge)==1?(y.oc(ae,q),q=!1):q=!0}}}else(B=K)==1?(y.oc(U,q),q=!1):q=!0}}return y},S.prototype.FB=function(){this.ji=-1,this.Vl(!1,this.Ca.v),this.Vl(!1,this.Ca.C),this.Vl(!0,this.Ca.G),this.Vl(!0,this.Ca.H),this.dd.resize(0),this.dd.Jb(100),this.ji=this.g.Gd();for(var h=new d.h,l=this.g.Ob(this.X);l!=-1;l=this.g.Rb(l))for(var s=this.g.Xa(l),a=0,c=this.g.Ja(l);a<c;a++,s=this.g.U(s))this.g.D(s,h),(this.Ca.v==h.x||this.Ca.C==h.x||this.Ca.G==h.y||this.Ca.H==h.y)&&(this.g.Ra(s,this.ji,this.dd.size),this.dd.add(s));this.Nl(!1,this.Ca.v),this.Nl(!1,this.Ca.C),this.Nl(!0,this.Ca.G),this.Nl(!0,this.Ca.H),this.Ty()},S.prototype.My=function(h){for(var l=new d.h,s=new d.h,a=null,c=null,p=d.O.lg(2048,0),y=this.g.Ob(this.X);y!=-1;y=this.g.Rb(y)){var v=this.g.Xa(y),_=v;do{var x=this.g.U(_);this.g.D(_,l);var T=-1;if(l.x==this.Ca.v?(this.g.D(x,s),s.x==this.Ca.v&&(T=1)):l.x==this.Ca.C&&(this.g.D(x,s),s.x==this.Ca.C&&(T=1)),l.y==this.Ca.G?(this.g.D(x,s),s.y==this.Ca.G&&(T=0)):l.y==this.Ca.H&&(this.g.D(x,s),s.y==this.Ca.H&&(T=0)),T!=-1){if(a==null&&(a=new d.h),c==null&&(c=new d.h),a.L(l),c.ma(0,0),T==0){var C=l.x-this.Ca.v;c.x=d.lc.sign(s.x-l.x),a.x=h*d.lc.Cn(Math.floor(Math.abs(C/h)),C)+this.Ca.v,0>a.x&&(a.x+=h)}else C=l.y-this.Ca.G,c.y=d.lc.sign(s.y-l.y),a.y=h*d.lc.Cn(Math.floor(Math.abs(C/h)),C)+this.Ca.G,0>a.y&&(a.y+=h);C=T!=0?s.y-l.y:s.x-l.x;var A=Math.abs(C);if(65536<A/h)throw d.i.fa("internal error");if(0<A){A=d.O.truncate(A/h)+2,p.length<A&&(p=d.O.lg(A));for(var R=A=0;;R++){var F=new d.h;if(F.x=a.x+c.x*R*h,F.y=a.y+c.y*R*h,1<=(F=(T!=0?F.y-l.y:F.x-l.x)/C))break;0>=F||(p[A]=F,A++)}A!=0&&this.g.Ul(_,p,A)}}_=x}while(_!=v)}},S.prototype.Vl=function(h,l){for(var s=-1,a=new d.h,c=null,p=this.g.Ob(this.X);p!=-1;p=this.g.Rb(p))for(var y=this.g.Xa(p),v=0,_=this.g.Ja(p);v<_;v++){var x=this.g.U(y);this.g.D(y,a),(h?a.y==l:a.x==l)&&(this.g.D(x,a),(h?a.y==l:a.x==l)&&(s==-1&&(s=this.g.Gd()),c==null&&(c=new d.ia(0)).Jb(100),this.g.Pa(y,s)!=1&&(c.add(y),this.g.Ra(y,s,1)),this.g.Pa(x,s)!=1&&(c.add(x),this.g.Ra(x,s,1)))),y=x}if(s!=-1&&this.g.Td(s),!(c==null||3>c.size)){var T=this;c.Vd(0,c.size,function(te,ae){return T.Mh(te,ae)}),s=new d.h,p=new d.h,y=new d.h,p.Rc();var C=-1;v=new d.ia(0),_=new d.ia(0),x=null;for(var A=this.g.Gd(),R=this.g.Gd(),F=0,N=c.size;F<N;F++){var B=c.get(F);if(this.g.D(B,a),!a.qb(p)){if(C!=-1){for(var q=C;q<F;q++){C=c.get(q);var U=this.g.U(C);B=this.g.Ma(C);var K=!1;this.g.D(U,s),0>p.compare(s)&&(h?s.y==l:s.x==l)&&(v.add(C),K=!0,this.g.Ra(C,R,1)),this.g.D(B,s),0>p.compare(s)&&(h?s.y==l:s.x==l)&&(K||v.add(C),this.g.Ra(C,A,1))}for(q=0,K=v.size;q<K;q++){if(C=v.get(q),B=this.g.Pa(C,A),U=this.g.Pa(C,R),B==1&&(B=this.g.Ma(C),this.g.D(B,y),!y.qb(a))){x==null&&(x=[]);var X=d.h.tb(p,y);x[0]=d.h.tb(y,a)/X,x[0]==0?x[0]=2220446049250313e-31:x[0]==1&&(x[0]=.9999999999999998),this.g.Ul(B,x,1),B=this.g.Ma(C),this.g.mf(B,a),_.add(B),this.g.Ra(B,A,1),this.g.Ra(B,R,-1)}U==1&&(U=this.g.U(C),this.g.D(U,y),y.qb(a)||(x==null&&(x=[]),X=d.h.tb(p,y),x[0]=d.h.tb(p,a)/X,x[0]==0?x[0]=2220446049250313e-31:x[0]==1&&(x[0]=.9999999999999998),this.g.Ul(C,x,1),B=this.g.U(C),this.g.mf(B,a),_.add(B),this.g.Ra(B,A,-1),this.g.Ra(B,R,1)))}C=v,v=_,(_=C).clear(!1)}C=F,p.L(a)}}this.g.Td(A),this.g.Td(R)}},S.prototype.Nl=function(h,l){for(var s=new d.h,a=null,c=-1,p=0,y=this.dd.size;p<y;p++){var v=this.dd.get(p);if(v!=-1){var _=this.g.U(v);this.g.D(v,s),(h?s.y==l:s.x==l)&&(this.g.D(_,s),(h?s.y==l:s.x==l)&&(c==-1&&(c=this.g.Gd()),a==null&&(a=new d.ia(0)).Jb(100),this.g.Pa(v,c)!=-2&&(a.add(v),this.g.Ra(v,c,-2)),this.g.Pa(_,c)!=-2&&(a.add(_),this.g.Ra(_,c,-2))))}}if(a==null)c!=-1&&this.g.Td(c);else{var x=this;for(a.Vd(0,a.size,function(ae,ge){return x.Mh(ae,ge)}),p=0,y=a.size;p<y;p++){var T=a.get(p);this.g.Ra(T,c,p)}v=new d.h,(_=new d.h).Rc();var C=-1;for(p=0,y=a.size;p<y;p++)if((T=a.get(p))!=-1&&(this.g.D(T,s),!s.qb(_))){if(C!=-1)for(;;){T=!1;for(var A=1<p-C?p-1:p,R=C;R<A;R++){var F=a.get(R);if(F!=-1){var N=-1,B=this.g.U(F);this.g.D(B,v),0>_.compare(v)&&(h?v.y==l:v.x==l)&&(N=B),B=-1;var q=this.g.Ma(F);if(this.g.D(q,v),0>_.compare(v)&&(h?v.y==l:v.x==l)&&(B=q),N!=-1&&B!=-1)this.Kh(F,a,c),this.g.pd(F,!1),this.Kh(N,a,c),this.g.pd(N,!1),T=!0;else if(N!=-1||B!=-1){for(q=R+1;q<p;q++){var U=a.get(q);if(U!=-1){var K=this.g.U(U),X=-1;this.g.D(K,v),0>_.compare(v)&&(h?v.y==l:v.x==l)&&(X=K),K=this.g.Ma(U);var te=-1;if(this.g.D(K,v),0>_.compare(v)&&(h?v.y==l:v.x==l)&&(te=K),X!=-1&&te!=-1){this.Kh(U,a,c),this.g.pd(U,!1),this.Kh(X,a,c),this.g.pd(X,!1),T=!0;break}if(N!=-1&&te!=-1){this.zt(a,F,N,U,te,c),T=!0;break}if(B!=-1&&X!=-1){this.zt(a,U,X,F,B,c),T=!0;break}}}if(T)break}}}if(!T)break}C=p,_.L(s)}this.g.Td(c)}},S.prototype.Kh=function(h,l,s){s=this.g.Pa(h,s),l.set(s,-1),s=this.g.Pa(h,this.ji),this.dd.set(s,-1),(l=this.g.bd(h))!=-1&&this.g.Xa(l)==h&&(this.g.Jf(l,-1),this.g.Wg(l,-1))},S.prototype.zt=function(h,l,s,a,c,p){this.g.Bc(l,a),this.g.Cc(a,l),this.g.Cc(s,c),this.g.Bc(c,s),this.Kh(a,h,p),this.g.mi(a,!1),this.Kh(c,h,p),this.g.mi(c,!0)},S.prototype.Ty=function(){for(var h=0,l=this.dd.size;h<l;h++){var s=this.dd.get(h);s!=-1&&this.g.aj(s,-1)}for(var a=0,c=0,p=this.g.Ob(this.X);p!=-1;){var y=this.g.Xa(p);if(y==-1||p!=this.g.bd(y)){var v=p;p=this.g.Rb(p),this.g.Jf(v,-1),this.g.$q(v)}else{s=y,v=0;do this.g.aj(s,p),v++,s=this.g.U(s);while(s!=y);this.g.cp(p,!1),this.g.Wg(p,this.g.Ma(y)),this.g.Vj(p,v),c+=v,a++,p=this.g.Rb(p)}}for(h=0,l=this.dd.size;h<l;h++)if((s=this.dd.get(h))!=-1&&(p=this.g.bd(s))==-1){p=this.g.vf(this.X,-1),v=0,y=s;do this.g.aj(s,p),v++,s=this.g.U(s);while(s!=y);2>=v?(s=this.g.Pa(y,this.ji),this.dd.set(s,-1),y=this.g.pd(y,!1),v==2&&(0<=(s=this.g.Pa(y,this.ji))&&this.dd.set(s,-1),this.g.pd(y,!1)),v=p,this.g.Jf(v,-1),this.g.$q(v)):(this.g.kn(p,!0),this.g.Vj(p,v),this.g.Jf(p,y),this.g.Wg(p,this.g.Ma(y)),this.g.cp(p,!1),c+=v,a++)}for(this.g.Rl(this.X,a),this.g.Tj(this.X,c),h=0,l=this.g.ld;l!=-1;l=this.g.ue(l))h+=this.g.I(l);this.g.bC(h)},S.By=function(h,l,s,a){return new S(l,a).Ay(h,s)},S.clip=function(h,l,s,a,c){return S.Nu(h,l,null,s,a,c)},S.Nu=function(h,l,s,a,c,p){var y=h.getType();if(y==33)return c=h.D(),l.contains(c)?h:h.Ia();if(y==197)return c=new d.l,h.A(c),c.Ea(l)?(l=new d.Fh,h.copyTo(l),l.Xo(c),l):h.Ia();if(h.B())return h;if(l.B())return h.Ia();var v=new d.l;if(h.xc(v),l.contains(v))return h;if(!l.isIntersecting(v))return h.Ia();if((s!=null||isNaN(a))&&d.ta.ty(s,l,!1),!d.aa.xj(y))throw d.i.N();if((s=h.Bb)!=null&&(s=s.Fk)!=null){if((s=s.Ro(l))==1){if(y!=1736)throw d.i.fa("internal error");return(h=new d.Da(h.description)).tp(l),h}if(s==0)return h.Ia()}switch(y){case 550:for(p=null,y=h.I(),s=h.ub(0),a=0,c=new d.h,v=0;v<y;v++)s.tc(2*v,c),l.contains(c)||(a==0&&(p=h.Ia()),a<v&&p.Fd(h,a,v),a=v+1);return 0<a&&p.Fd(h,a,y),a==0?h:p;case 1736:case 1607:return S.By(h,l,c,p);default:throw d.i.fa("internal error")}},S.prototype.Mh=function(h,l){var s=new d.h;return this.g.D(h,s),h=new d.h,this.g.D(l,h),s.compare(h)},S}();d.ri=O}(Y||(Y={})),function(d){var O=new d.h,S=function(){function l(s,a,c,p,y){this.Pm=new d.h,this.Dk=new d.h,this.Pi=new d.h,this.g=s,this.Aw=c,this.no=p,this.Pm=a,this.yl=y,this.Dk.Rc(),this.Pi.Rc()}return l.prototype.xE=function(s){this.g.D(s,this.Dk),s=d.O.truncate((this.Dk.x-this.Pm.x)*this.no+.5);var a=d.O.truncate((this.Dk.y-this.Pm.y)*this.no+.5);return h.jG(s,a)},l.prototype.jz=function(s){return this.g.Pa(s,this.yl)},l.prototype.Py=function(s,a){return this.g.D(s,this.Dk),this.g.D(a,this.Pi),h.Cv(this.Dk.x,this.Dk.y,this.Pi.x,this.Pi.y,this.Aw)},l}();d.sY=function(){};var h=function(){function l(){this.Pm=new d.h,this.pq=[0,0,0,0],this.xs=[0,0,0,0],this.qo=this.yl=-1}return l.iQ=function(s,a){var c=new l;return c.g=s,c.qa=a,c.Aw=a*a,c.$v=2*a,c.no=1/c.$v,c.BO()},l.Cv=function(s,a,c,p,y){return(s-=c)*s+(a-=p)*a<=y},l.jG=function(s,a){return d.O.Th(a,d.O.Th(s))},l.prototype.DO=function(s,a){this.g.Gc(s,O);for(var c=(O.y-this.Pm.y)*this.no,p=d.O.truncate((O.x-this.Pm.x)*this.no),y=d.O.truncate(c),v=c=0;1>=v;v+=1)for(var _=0;1>=_;_+=1){var x=l.jG(p+v,y+_),T=this.xl.rR(x);T!=-1&&(this.pq[c]=T,this.xs[c]=x,c++)}for(p=c-1;1<=p;p--)for(T=this.pq[p],y=p-1;0<=y;y--)if(T==this.pq[y]){this.xs[y]=-1,p!=--c&&(this.xs[p]=this.xs[c],this.pq[p]=this.pq[c]);break}for(y=0;y<c;y++)this.EO(s,this.xs[y],O,this.pq[y],a)},l.prototype.EO=function(s,a,c,p,y){for(var v=new d.h;p!=-1;p=this.xl.ER(p)){var _=this.xl.ja(p);s==_||a!=-1&&this.g.Pa(_,this.yl)!=a||(this.g.Gc(_,v),l.Cv(c.x,c.y,v.x,v.y,this.Aw)&&y.add(p))}},l.prototype.Xm=function(s,a,c){var p=this.g.Pa(s,this.qo),y=this.g.Pa(a,this.qo);return p==-1&&(p=this.zd.Ph(),this.zd.addElement(p,s),this.g.Ra(s,this.qo,p)),y==-1?this.zd.addElement(p,a):this.zd.Hy(p,y),this.g.Ra(a,this.qo,-2),a=this.YT(s,a),c&&(c=this.kw.xE(s),this.g.Ra(s,this.yl,c)),a},l.WT=function(s,a,c){s.Nb(a),c=s;var p=new d.h;l.XT(s.D(),a.D(),p),c.Cb(p)},l.XT=function(s,a,c){var p=s.x;s.x!=a.x&&(p=(1*s.x+1*a.x)/2);var y=s.y;s.y!=a.y&&(y=(1*s.y+1*a.y)/2),c.ma(p,y)},l.prototype.YT=function(s,a){var c=new d.h;this.g.D(s,c);var p=new d.h;this.g.D(a,p);var y=this.g.cG(s),v=y+(a=this.g.cG(a)),_=0,x=c.x;c.x!=p.x&&(x=(c.x*y+p.x*a)/v,_++);var T=c.y;return c.y!=p.y&&(T=(c.y*y+p.y*a)/v,_++),0<_&&this.g.Cb(s,x,T),this.g.vX(s,v),_!=0},l.prototype.BO=function(){var s=this.g.fd,a=this.g.IF();for(this.Pm=a.mz(),a=Math.max(a.ca(),a.R())/2147483646,this.$v<a&&(this.$v=a,this.no=1/this.$v),this.zd=new d.au,this.zd.At(d.O.truncate(this.g.fd/3+1)),this.zd.fn(d.O.truncate(this.g.fd/3+1)),this.yl=this.g.Gd(),this.qo=this.g.Gd(),this.kw=new S(this.g,this.Pm,this.Aw,this.no,this.yl),this.xl=new d.dL(d.O.truncate(4*s/3),this.kw),this.xl.AW(this.g.fd),s=!1,a=this.g.ld;a!=-1;a=this.g.ue(a))for(var c=this.g.Ob(a);c!=-1;c=this.g.Rb(c))for(var p=this.g.Xa(c),y=0,v=this.g.Ja(c);y<v;y++){var _=this.kw.xE(p);this.g.Ra(p,this.yl,_),this.xl.addElement(p,_),p=this.g.U(p)}var x=new d.ia(0);for(x.Jb(10),a=this.g.ld;a!=-1;a=this.g.ue(a))for(c=this.g.Ob(a);c!=-1;c=this.g.Rb(c))for(p=this.g.Xa(c),y=0,v=this.g.Ja(c);y<v;y++){if(this.g.Pa(p,this.qo)!=-2)for(_=this.g.Pa(p,this.yl),this.xl.jd(p,_);this.DO(p,x),x.size!=0;){_=!1;for(var T=0,C=x.size;T<C;T++){var A=x.get(T),R=this.xl.ja(A);this.xl.vd(A),_=this.Xm(p,R,T+1==C)||_}if(s=s||_,x.clear(!1),!_)break}p=this.g.U(p)}return s&&this.vN(),this.kw=this.xl=null,this.g.Td(this.yl),this.g.Td(this.qo),s},l.prototype.vN=function(){for(var s=new d.h,a=this.zd.je;a!=-1;a=this.zd.qz(a)){var c=this.zd.rc(a);for(this.g.D(this.zd.ja(c),s),c=this.zd.lb(c);c!=-1;c=this.zd.lb(c))this.g.mf(this.zd.ja(c),s)}},l}();d.Yt=h}(Y||(Y={})),function(d){var O=function(){function S(h){h===void 0&&(h=null),this.yg=null,this.Pb=!1,this.yg=h===null?[]:h}return S.prototype.copyTo=function(h){if(h.Pb)throw d.i.fa("CompositeGeographicTransformation is read-only");for(var l=0;l<this.yg.length;l++)h.yg.push(this.yg[l].Of())},S.prototype.count=function(){return this.yg.length},S.prototype.add=function(h){if(this.Pb)throw d.i.fa("CompositeGeographicTransformation is read-only");this.yg.push(h.Of())},S.prototype.clear=function(){if(this.Pb)throw d.i.fa("CompositeGeographicTransformation is read-only");this.yg.length=0},S.prototype.remove=function(h){if(this.Pb)throw d.i.fa("CompositeGeographicTransformation is read-only");this.yg.splice(h,1)},S.prototype.jg=function(){var h=new S;return this.copyTo(h),h},S.prototype.Of=function(){return this.jg()},S.prototype.transform=function(h,l,s,a){if(h.length<l)throw d.i.fa("invalid Argument");var c=s;for(s=0;s<this.yg.length;s++){var p=this.yg[s];if(p.qm()!=null){var y=p.Un,v=y?1:0,_=y?p.qm().getGeogcs2():p.qm().getGeogcs1();if(_=c/(_=_.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(_-1))for(c=0;c<l;c++)h[c][0]*=_,h[c][1]*=_;d.MC.geogToGeog(p.qm(),l,h,null,v),c=(y?p.qm().getGeogcs1():p.qm().getGeogcs2()).getUnit().getUnitFactor()}}if(_=c/a,3552713678800501e-30<Math.abs(_-1))for(c=0;c<l;c++)h[c][0]*=_,h[c][1]*=_;return l},S.prototype.Nb=function(h){if(h==this)return!0;if(!(h instanceof S)||this.yg.length!=h.yg.length)return!1;for(var l=0;l<this.yg.length;l++)if(!this.yg[l].Nb(h.yg[l]))return!1;return!0},S.prototype.ix=function(){this.Pb=!0},S.prototype.toString=function(){for(var h="CGT ("+this.count()+") ",l=0,s=this.count();l<s;++l)h+=this.yg[l].toString()+", ";return 200<h.length?h.substring(0,197)+"... ("+h.length.toString()+" characters)":h},S.create=function(){return new S},S}();d.wC=O}(Y||(Y={})),function(d){var O,S=Math.PI,h=2*Math.PI,l=Math.PI/2,s=function(){function p(){}return p.TO=function(y,v){var _=new p;return _.x=y,_.y=v,_.type=0,_.Uh=0,_},p.al=function(y){var v=new p;return v.x=y.x,v.y=y.y,v.type=0,v.Uh=0,v},p.SO=function(y){var v=new p;return v.x=y.x,v.y=y.y,v.type=y.type,v.Uh=y.Uh,v},p.Pd=function(y,v,_){var x=new p;return x.x=y.x+v*Math.cos(_),x.y=y.y+v*Math.sin(_),x.type=y.type,x.Uh=y.Uh,x},p.Pu=function(y,v){var _=new p;return _.x=.5*(y.x+v.x),_.y=.5*(y.y+v.y),_.type=y.type,_.Uh=y.Uh,_},p.TE=function(y,v){var _=new p;return _.x=y.x+.001*(v.x-y.x),_.y=y.y+.001*(v.y-y.y),_.type=y.type,_.Uh=y.Uh,_},p}(),a=function(){};(O=d.fL||(d.fL={}))[O.Round=0]="Round",O[O.Bevel=1]="Bevel",O[O.Miter=2]="Miter",O[O.Square=3]="Square";var c=function(){function p(y){this.NA=this.Yb=this.wg=null,this.nd=y}return p.V=function(y,v,_,x,T,C){if(y==null||1>y.Db())throw d.i.N();return v==0||y.B()?y:((C=new p(C)).ko=y,C.Ka=v,C.qa=T,C.Ki=_,C.CA=x,C.Rx())},p.prototype.eM=function(){var y=this.ko,v=y.ac(),_=y.wc(),x=new d.h;return x.uc(_,v),x.normalize(),x.Hv(),x.scale(this.Ka),v.add(x),_.add(x),x=y.Ia(),y.Dc(v),y.Qc(_),x},p.prototype.dM=function(){var y=this.ko;if(0<this.Ka&&this.Ki!=2){var v=new d.Da;return v.ad(y,!1),this.ko=v,this.Rx()}return(y=new d.Fh(y.$)).W(this.Ka,this.Ka),y},p.prototype.tJ=function(y,v,_,x){return(v.x-y.x)*(x.x-_.x)+(v.y-y.y)*(x.y-_.y)},p.prototype.fc=function(y,v){if(v===void 0)this.Yb.push(y),this.gf++;else if(this.gf==0)this.fc(y);else{var _=this.Bw,x=this.wg[v==0?_-1:v-1],T=this.wg[v],C=this.tJ(x,T,this.Yb[this.gf-1],y);0<C?this.fc(y):0>C&&(0<this.tJ(x,T,T,this.Yb[this.gf-1])?(T=this.wg[v==0?_-2:v==1?_-1:v-2],_=s.Pd(x,this.Ka,Math.atan2(x.y-T.y,x.x-T.x)-l),this.Yb[this.gf-1]=_,this.Ki==1||this.Ki==2?(_=s.Pu(_,x),this.fc(_),_=s.Pd(x,this.Ka,this.Jv+l),(x=s.Pu(_,x)).type|=256,this.fc(x)):(_=s.Pd(x,this.Ka,this.Jv+l)).type|=256,this.fc(_),this.fc(y,v)):(_=s.Pd(T,this.Ka,this.Jv+l),this.fc(_),this.Ki==1||this.Ki==2?(_=s.Pu(_,T),this.fc(_),_=s.Pd(T,this.Ka,this.aA-l),(x=s.Pu(_,T)).type|=256,this.fc(x)):(_=s.Pd(T,this.Ka,this.aA-l)).type|=256,this.fc(_)))}},p.prototype.mE=function(){var y,v=this.Bw;this.gf=0;var _=.5*this.qa,x=0,T=0;for(y=0;y<v;y++){var C=this.wg[y],A=y==0?this.wg[v-1]:this.wg[y-1],R=y==v-1?this.wg[0]:this.wg[y+1],F=A.x-C.x,N=A.y-C.y,B=R.x-C.x,q=R.y-C.y,U=Math.atan2(N,F),K=Math.atan2(q,B);if(this.Jv=U,this.aA=K,y==0&&(x=U,T=K),F=F*q-B*N,N=K,K<U&&(K+=h),0<F*this.Ka)this.Ki==1||this.Ki==2?(U=s.Pd(C,this.Ka,U+l),this.fc(U),U=s.TE(C,U),this.fc(U),U=s.Pd(C,this.Ka,K-l),(C=s.TE(C,U)).type|=256,this.fc(C),this.fc(U)):(F=.5*(K-U),F=this.Ka/Math.abs(Math.sin(F)),U=s.Pd(C,F,.5*(U+K)),this.fc(U,y));else if(512&C.type){for(F=1-_/Math.abs(this.Ka),A=1,R=0>this.Ka?-S:S,-1<F&&1>F&&(.017453292519943295>(N=2*Math.acos(F))&&(N=.017453292519943295),1<(A=d.O.truncate(S/N+1.5))&&(R/=A)),N=U+l,U=s.Pd(C,this.Ka,N),y==0&&(U.type|=1024),this.fc(U,y),F=this.Ka/Math.cos(R/2),N+=R/2,(U=s.Pd(C,F,N)).type|=1024,this.fc(U);0<--A;)N+=R,(U=s.Pd(C,F,N)).type|=1024,this.fc(U);(U=s.Pd(C,this.Ka,K-l)).type|=1024,this.fc(U)}else if(this.Ki==1)U=s.Pd(C,this.Ka,U+l),this.fc(U,y),U=s.Pd(C,this.Ka,K-l),this.fc(U);else if(this.Ki==0)for(F=1-_/Math.abs(this.Ka),A=1,R=K-l-(U+l),-1<F&&1>F&&(.017453292519943295>(N=2*Math.acos(F))&&(N=.017453292519943295),1<(A=d.O.truncate(Math.abs(R)/N+1.5))&&(R/=A)),F=this.Ka/Math.cos(.5*R),N=U+l+.5*R,U=s.Pd(C,F,N),this.fc(U,y);0<--A;)N+=R,U=s.Pd(C,F,N),this.fc(U);else this.Ki==2?(F=A.x-C.x,N=A.y-C.y,.99999999<(A=(F*(B=R.x-C.x)+N*(q=R.y-C.y))/Math.sqrt(F*F+N*N)/Math.sqrt(B*B+q*q))?(U=s.Pd(C,1.4142135623730951*this.Ka,K-.25*S),this.fc(U,y),U=s.Pd(C,1.4142135623730951*this.Ka,K+.25*S),this.fc(U)):(A=Math.abs(this.Ka/Math.sin(.5*Math.acos(A))))>(R=Math.abs(this.CA*this.Ka))?(F=.5*(K-U),F=this.Ka/Math.abs(Math.sin(F)),U=s.Pd(C,F,.5*(U+K)),K=d.h.construct(U.x,U.y),U=d.h.construct(C.x,C.y),(C=new d.h).uc(K,U),(K=new d.h).HW(R/C.length(),C,U),U=(A-R)*Math.abs(this.Ka)/Math.sqrt(A*A-this.Ka*this.Ka),0<this.Ka?C.Hv():C.ar(),C.scale(U/C.length()),(U=new d.h).add(K,C),(A=new d.h).uc(K,C),U=s.al(U),this.fc(U,y),U=s.al(A),this.fc(U)):(F=.5*(K-U),F=this.Ka/Math.abs(Math.sin(F)),U=s.Pd(C,F,.5*(U+K)),this.fc(U,y))):(K=N,0<this.Ka?(K>U&&(K-=h),A=U-K<l):(K<U&&(K+=h),A=K-U<l),A?(N=0>(F=1.4142135623730951*this.Ka)?U+.25*S:U+.75*S,U=s.Pd(C,F,N),this.fc(U,y),N=0>F?K-.25*S:K-.75*S,U=s.Pd(C,F,N),this.fc(U)):(F=.5*(K-U),F=this.Ka/Math.abs(Math.sin(F)),K<U&&(K+=h),U=s.Pd(C,F,(U+K)/2),this.fc(U,y)))}return this.Jv=x,this.aA=T,this.fc(this.Yb[0],0),C=s.SO(this.Yb[this.gf-1]),this.Yb[0]=C,this.wW()},p.prototype.Au=function(y,v){if(!(2>v))for(var _=0;_<v;_++){var x=this.Yb[y+_];_!=0?this.NA.Ci(d.h.construct(x.x,x.y)):this.NA.Lt(d.h.construct(x.x,x.y))}},p.prototype.fM=function(y,v,_){var x=y.Ba(v),T=y.Vc(v);if(this.Yb=[],this.NA=_,y.dc(v)){for(v=y.Na(x);y.Na(T-1).qb(v);)T--;if(2<=T-x){for(this.Bw=T-x,this.wg=[],v=x;v<T;v++)this.wg.push(s.al(y.Na(v)));this.mE()&&this.Au(0,this.gf-1)}}else{for(v=y.Na(x);x<T&&y.Na(x+1).qb(v);)x++;for(v=y.Na(T-1);x<T&&y.Na(T-2).qb(v);)T--;if(2<=T-x){for(this.Bw=2*(T-x)-2,this.wg=[],(_=s.al(y.Na(x))).type|=1536,this.wg.push(_),v=x+1;v<T-1;v++)_=s.al(y.Na(v)),this.wg.push(_);for((_=s.al(y.Na(T-1))).type|=512,this.wg.push(_),v=T-2;v>=x+1;v--)(_=s.al(y.Na(v))).type|=1024,this.wg.push(_);if(this.mE())if(2<=this.Yb.length){for(y=-1,(T=!!(1024&this.Yb[this.gf-1].type))||(y=0),v=1;v<this.gf;v++)(x=!!(1024&this.Yb[v].type))?T||1<(T=v-1)-y+1&&this.Au(y,T-y+1):T&&(y=v-1),T=x;T||1<(T=this.gf-1)-y+1&&this.Au(y,T-y+1)}else y=0,T=this.gf-1,0<=y&&1<=T-y&&this.Au(y,T-y+1)}}this.wg=null,this.Bw=0,this.Yb=null,this.gf=0},p.prototype.wW=function(){for(var y=!1,v=0;v<this.gf;v++){var _=this.Yb[v];_.qh=v+1,_.sh=v-1,this.Yb[v]=_}for((_=this.Yb[0]).sh=this.gf-2,this.Yb[0]=_,(_=this.Yb[this.gf-2]).qh=0,this.Yb[this.gf-2]=_,v=_=0;v<this.gf;v++)if(256&this.Yb[_].type){var x=this.GP(_);if(x==-1){y=!0;break}_=x}else _=this.Yb[_].qh;return!y&&(this.QO(_),!0)},p.prototype.GP=function(y){for(var v,_,x=this.gf-1,T=y,C=1;C<=x-2;C++){v=T=this.Yb[T].qh,_=y;for(var A=1;A<=C;A++){if(_=this.Yb[_].sh,!(256&this.Yb[_].type||256&this.Yb[v].type)){var R=this.gS(_,v);if(R!=-1)return R}v=this.Yb[v].sh}}return-1},p.prototype.gS=function(y,v){var _=this.Yb[this.Yb[y].sh],x=this.Yb[y],T=this.Yb[this.Yb[v].sh],C=this.Yb[v];if(!this.JW(_,x,T,C))return-1;var A=new a;return this.xQ(_,x,T,C,A)&&!A.bE&&d.O.bK((x.x-_.x)*(C.y-T.y)-(x.y-_.y)*(C.x-T.x))!=d.O.bK(this.Ka)?(_=this.Yb[y].sh,A.an.type=x.type,A.an.qh=v,A.an.sh=_,this.Yb[y]=A.an,A.an=this.Yb[v],A.an.sh=y,this.Yb[v]=A.an,v):-1},p.prototype.JW=function(y,v,_,x){return Math.max(y.x,v.x)>=Math.min(_.x,x.x)&&Math.max(_.x,x.x)>=Math.min(y.x,v.x)&&Math.max(y.y,v.y)>=Math.min(_.y,x.y)&&Math.max(_.y,x.y)>=Math.min(y.y,v.y)},p.prototype.xQ=function(y,v,_,x,T){T.bE=!1;var C=(v.y-y.y)*(x.x-_.x)-(v.x-y.x)*(x.y-_.y),A=(_.y-y.y)*(v.x-y.x)-(_.x-y.x)*(v.y-y.y);if(0<=(C=C==0?2:A/C)&&1>=C){var R=C;if(C=(x.y-_.y)*(v.x-y.x)-(x.x-_.x)*(v.y-y.y),A=(y.y-_.y)*(x.x-_.x)-(y.x-_.x)*(x.y-_.y),0<=(C=C==0?2:A/C)&&1>=C)return T.an=s.TO(y.x+C*(v.x-y.x),y.y+C*(v.y-y.y)),T.an.Uh=_.Uh+R*(x.Uh-_.Uh),R!=0&&R!=1||C!=0&&C!=1||(T.bE=!0),T.VY=C,T.WY=R,!((R==0||R==1)&&0<C&&1>C||(C==0||C==1)&&0<R&&1>R)}return!1},p.prototype.QO=function(y){for(;this.Yb[y].sh<y;)y=this.Yb[y].sh;var v=0,_=y;do _=this.Yb[_],this.Yb[v]=_,_=_.qh,v++;while(_!=y);this.Yb[v]=this.Yb[0],this.gf=v+1},p.prototype.$C=function(y){var v=this.ko,_=v.Ga();if(_!=null){_.Zi();for(var x=-1;_.$a();)x++,this.fM(v,x,y)}},p.prototype.Rx=function(){var y=this.ko.getType();return y==322?this.eM():y==197?this.dM():d.aa.yd(y)?((y=new d.Ta).oc(this.ko,!0),this.ko=y,this.Rx()):y==1607?(y=new d.Ta,this.$C(y),y):y==1736?(y=new d.Da,this.$C(y),y):null},p}();d.IK=c}(Y||(Y={})),function(d){var O=function(){function s(a){this.qk=a}return s.prototype.D=function(a,c){this.qk.g.D(a,c)},s.prototype.vd=function(a){var c=this.qk.Fa.ja(a);this.qk.Fa.vd(a,-1),this.qk.g.pd(c,!1)},s}(),S=function(){function s(a){this.qk=a}return s.prototype.D=function(a,c){this.qk.IT.D(a,c)},s.prototype.vd=function(a){this.qk.Fa.vd(a,-1)},s}(),h=function(){function s(a){this.qk=a}return s.prototype.D=function(a,c){c.L(this.qk.LT[a])},s.prototype.vd=function(a){this.qk.Fa.vd(a,-1)},s}(),l=function(){function s(a){a===void 0?(this.Fa=new d.Yj,this.Fa.De(20),this.g=new d.gd,this.xT=this.g.Ig(550),this.Ss=this.g.vf(this.xT,-1),this.Xh=new O(this)):a instanceof Array?(this.Fa=new d.Yj,this.Fa.De(20),this.LT=a,this.Xh=new h(this)):(this.Fa=new d.Yj,this.Fa.De(20),this.IT=a,this.Xh=new S(this))}return s.prototype.Ib=function(a){var c=a.getType();if(d.Gx.xj(c))this.jN(a);else if(d.Vk.yd(c))this.oN(a);else if(c==197)this.gN(a);else{if(c!=33)throw d.i.N("invalid shape type");this.nN(a)}},s.prototype.cR=function(){var a=new d.Sa,c=this.Fa.rc(-1),p=new d.Da(this.g.ht);for(this.g.Vi(this.Fa.ja(c),a),p.nf(a),c=this.Fa.lb(c);c!=-1;c=this.Fa.lb(c))this.g.Vi(this.Fa.ja(c),a),p.lineTo(a);return p},s.RO=function(a){var c=new s(a),p=a.I(),y=1,v=new d.h,_=new d.h,x=new d.h;for(a.D(0,v);a.D(y,_),_.Rz(v)&&y<p-1;)y++;for(c.Fa.addElement(0,-1),c.Fa.xn(y),p=y+1;p<a.I();p++)a.D(p,x),(y=c.pC(x))!=-1&&c.Fa.Sj(y,p);for(x=new d.Sa,y=c.Fa.rc(-1),p=new d.Da(a.description),a.ve(c.Fa.ja(y),x),p.nf(x),y=c.Fa.lb(y);y!=-1;y=c.Fa.lb(y))a.ve(c.Fa.ja(y),x),p.lineTo(x);return p},s.construct=function(a,c,p){for(var y=new s(a),v=1,_=a[0];a[v].Rz(_)&&v<c-1;)v++;for(y.Fa.addElement(0,-1),y.Fa.xn(v),v+=1;v<c;v++)(_=y.pC(a[v]))!=-1&&y.Fa.Sj(_,v);for(a=0,c=y.Fa.rc(-1);c!=-1;c=y.Fa.lb(c))p[a++]=y.Fa.ja(c);return a},s.JG=function(a,c){var p=a.Ba(c),y=a.Vc(c);if(c=!a.dc(c)&&a.Nn(c),a=a.ub(0),y*=2,c&&(y-=2),6>y-(p*=2))return!0;c=new d.h;var v=new d.h,_=new d.h;a.tc(p,c),a.tc(p+2,v),a.tc(p+4,_);var x=s.Wu(v,_,c);if(x.ps()||!s.um(x.value()))return!1;var T=d.h.construct(v.x,v.y),C=new d.h;for(p+=6;p<y;p+=2)if(C.L(v),v.L(_),a.tc(p,_),(x=s.Wu(v,_,c)).ps()||!s.um(x.value())||(x=s.Wu(T,_,c)).ps()||!s.um(x.value())||(x=s.Wu(v,_,C)).ps()||!s.um(x.value()))return!1;return!0},s.prototype.jN=function(a){for(var c=new d.Sa,p=new d.h,y=0;y<a.I();y++){a.D(y,p);var v=this.Cr(p);if(v!=-1){a.ve(y,c);var _=this.g.fc(this.Ss,c);this.Fa.Sj(v,_)}}},s.prototype.gN=function(a){for(var c=new d.Sa,p=new d.h,y=0;4>y;y++){a.mB(y,p);var v=this.Cr(p);if(v!=-1){a.Hf(y,c);var _=this.g.fc(this.Ss,c);this.Fa.Sj(v,_)}}},s.prototype.oN=function(a){var c=new d.Sa,p=a.ac();if((p=this.Cr(p))!=-1){a.To(c);var y=this.g.fc(this.Ss,c);this.Fa.Sj(p,y)}p=a.wc(),(p=this.Cr(p))!=-1&&(a.Po(c),a=this.g.fc(this.Ss,c),this.Fa.Sj(p,a))},s.prototype.nN=function(a){var c=a.D();(c=this.Cr(c))!=-1&&(a=this.g.fc(this.Ss,a),this.Fa.Sj(c,a))},s.prototype.Cr=function(a){var c=-1;if(this.Fa.size(-1)==0)return this.Fa.addElement(-4,-1);if(this.Fa.size(-1)==1){var p=this.g.Na(this.Fa.ja(this.Fa.rc(-1)));return a.Rz(p)||(c=this.Fa.xn(-5)),c}return this.pC(a)},s.prototype.pC=function(a){var c=-1;do{var p=this.Fa.rc(-1),y=this.Fa.Fc(-1),v=this.Fa.ja(p),_=this.Fa.ja(y),x=new d.h,T=new d.h;if(this.Xh.D(v,x),this.Xh.D(_,T),v=d.h.Uq(T,a,x),s.um(v))c=this.Fa.xn(-1),(x=this.nC(a,y,p))!=p&&this.oC(a,p,this.Fa.we(x));else if(s.CG(v)){T=this.Fa.sv(-1);var C=this.Fa.rc(-1),A=this.Fa.Fc(-1);for(v=new d.h,_=new d.h;C!=this.Fa.we(A);){var R=this.Fa.ja(T);this.Xh.D(R,v),R=d.h.Uq(v,a,x),s.CG(R)?(A=T,T=this.Fa.ll(T)):(C=T,T=this.Fa.Xp(T))}if(T=A,x=C,R=this.Fa.ja(T),C=this.Fa.ja(x),this.Xh.D(R,v),this.Xh.D(C,_),x!=p&&(v=d.h.Uq(_,a,v),!s.um(v)))continue;c=this.Fa.zu(x,T,-2,!1),this.oC(a,T,y),this.nC(a,x,p)}else this.sb==null&&(this.sb=new d.yb),this.sb.Dc(T),this.sb.Qc(x),0>(x=this.sb.fe(a,!0))?(x=this.Fa.we(y),this.Fa.vd(y,-1),c=this.Fa.xn(-3),this.nC(a,x,p)):1<x&&(x=this.Fa.lb(p),this.Fa.vd(p,-1),c=this.Fa.zu(-1,x,-3,!1),this.oC(a,x,y))}while(!1);return c},s.prototype.oC=function(a,c,p){if(c!=p){var y=this.Fa.ja(c),v=this.Fa.lb(c),_=new d.h,x=new d.h;for(this.Xh.D(y,_);c!=p&&2<this.Fa.size(-1)&&(this.Xh.D(this.Fa.ja(v),x),y=d.h.Uq(x,a,_),!s.um(y));)y=c,c=v,_.L(x),v=this.Fa.lb(c),this.Xh.vd(y)}},s.prototype.nC=function(a,c,p){if(c==p)return p;var y=this.Fa.ja(c),v=this.Fa.we(c),_=new d.h,x=new d.h;for(this.Xh.D(y,_);c!=p&&2<this.Fa.size(-1)&&(this.Xh.D(this.Fa.ja(v),x),y=d.h.Uq(_,a,x),!s.um(y));)y=c,c=v,_.L(x),v=this.Fa.we(c),this.Xh.vd(y);return c},s.Wu=function(a,c,p){var y=new d.Wb;y.set(c.x),y.sub(a.x);var v=new d.Wb;v.set(p.y),v.sub(a.y);var _=new d.Wb;return _.set(c.y),_.sub(a.y),(c=new d.Wb).set(p.x),c.sub(a.x),y.Ag(v),_.Ag(c),y.sub(_),y},s.um=function(a){return 0>a},s.CG=function(a){return 0<a},s}();d.Zt=l}(Y||(Y={})),function(d){var O=function(){function S(h){this.g=null,this.tH=!0,this.nd=h}return S.zU=function(h,l,s){return h=d.ta.Er(h),d.Yt.Cv(l.Lg(),l.ih(),s.Lg(),s.ih(),d.lc.ox(h))},S.CO=function(h,l){var s=new d.Sa;return d.Yt.WT(h,l,s),s},S.V=function(h,l,s,a){return(s=new S(s)).g=h,s.qa=l,s.tH=a,s.EM()},S.prototype.nM=function(h){return d.Yt.iQ(this.g,h)},S.prototype.sM=function(h){return d.$t.V(this.g,h,this.nd)},S.prototype.EM=function(){var h=this.qa,l=d.ta.Er(h),s=1.00001*(h=d.ta.rN(h));h*=1.000001;for(var a=!1,c=30<this.g.fd+10?1e3:(this.g.fd+10)*(this.g.fd+10),p=0,y=this.g.jS();;p++){if(p>c)throw d.i.fa("Internal Error: max number of iterations exceeded");var v=this.nM(l);if(a=a||v,this.tH&&(v=this.g.Gp(l,!0,!1)!=0,a=a||v),v=!1,(p==0||y||d.$t.kI(!0,this.g,h,null,this.nd))&&(v=this.sM(s),a=a||v),!v)break;d.mp.zp(this.nd)}return a},S}();d.Tk=O}(Y||(Y={})),function(d){var O=function(){function h(l){this.$d=this.Mc=null,this.Ys=0,this.Ub=l,this.cA=!0}return h.prototype.uv=function(l,s){var a=this.g.bc(l);if(a==null){if(!this.g.ed(l,s))return null;a=s}return a},h.prototype.Xq=function(){var l;l===void 0&&(l=!1),this.Ys++,!l&&4095&this.Ys||(this.Ys=0,d.mp.zp(this.Ub))},h.prototype.nP=function(){var l=this.g.Yq(!1),s=!1,a=new d.yb,c=new d.yb,p=new d.l;p.Oa();var y=new d.l;y.Oa();for(var v=new d.Sa,_=new d.TC,x=l.next();x!=-1;x=l.next()){d.mp.zp(this.Ub);var T=null,C=!1;if(!d.aa.Rn(this.g.ic(l.ck))){if((T=this.uv(x,a))==null)continue;if(T.A(p),p.W(this.qa,this.qa),T.Bi(this.qa)){if(!T.Bi(0))continue;C=!0,T=null}}var A=this.g.Yq(l),R=A.next();for(R!=-1&&(R=A.next());R!=-1;R=A.next()){var F=null,N=!1;if(!d.aa.Rn(this.g.ic(A.ck))){if((F=this.uv(R,c))==null)continue;if(F.A(y),F.Bi(this.qa)){if(!F.Bi(0))continue;N=!0,F=null}}var B=0,q=0;if(T!=null&&F!=null)p.HG(y)&&(_.Oo(T),_.Oo(F),_.Ea(this.qa,!1),0<(B=_.ol(0))+(q=_.ol(1))&&(this.g.jr(x,_,0,!0),this.g.jr(R,_,1,!0)),_.clear());else if(T!=null){var U=new d.h;if(this.g.D(R,U),p.contains(U)){if(_.Oo(T),this.g.Vi(R,v),_.Kz(this.qa,v,!1),0<(B=_.ol(0)))if(this.g.jr(x,_,0,!0),N){for(N=-1,U=this.g.U(R);U!=-1&&U!=R&&(N=U,(F=this.uv(U,c))!=null&&F.Bi(0));U=this.g.U(U));for(U=R;U!=-1&&(this.g.Dh(U,_.Bf),U!=N);U=this.g.U(U));}else this.g.Dh(R,_.Bf);_.clear()}}else{if(F==null)continue;if(U=new d.h,this.g.D(x,U),y.W(this.qa,this.qa),y.contains(U)){if(_.Oo(F),this.g.Vi(x,v),_.Kz(this.qa,v,!1),0<(q=_.ol(0)))if(this.g.jr(R,_,0,!0),C){for(N=-1,U=this.g.U(x);U!=-1&&U!=x&&(N=U,(F=this.uv(U,c))!=null&&F.Bi(0));U=this.g.U(U));for(U=x;U!=-1&&(this.g.Dh(U,_.Bf),U!=N);U=this.g.U(U));}else this.g.Dh(x,_.Bf);_.clear()}}if(B+q!=0){if(B!=0){if((T=this.g.bc(x))==null){if(!this.g.ed(x,a))continue;T=a,a.A(p)}else T.A(p);if(T.Bi(this.qa))break}s=!0}}}return s},h.prototype.oP=function(){return this.QU()},h.prototype.QU=function(){return new d.RC().PX(this.g,this.qa)},h.prototype.lI=function(){var l=!1;this.Mc==null&&(this.Mc=new d.Yj);var s=new d.ia(0);s.Jb(this.g.fd+1);for(var a=this.g.Yq(),c=a.next();c!=-1;c=a.next())s.add(c);this.g.nx(s,s.size),s.add(-1),a=this.g.Gd(),c=this.g.Gd(),this.$d=new d.UC(this.g,this.qa,!this.cA),this.Mc.Vo(this.$d);var p=new d.ia(0),y=new d.ia(0),v=0;new d.h;var _=this.g.td;this.g.vb.mc();for(var x,T,C=this.g.vb.za[0].o,A=s.get(v++);A!=-1;){var R=x=C[2*(T=_.T(A,0))],F=T=C[2*T+1];do{var N=_.T(A,2),B=_.T(A,1);if(N!=-1){var q=_.T(N,0),U=C[2*q];0>(F<(q=C[2*q+1])?-1:F>q?1:R<U?-1:R>U?1:0)&&(y.add(A),y.add(N))}B!=-1&&(U=C[2*(q=_.T(B,0))],0>(F<(q=C[2*q+1])?-1:F>q?1:R<U?-1:R>U?1:0)&&(y.add(B),y.add(B))),(U=this.g.Pa(A,a))!=-1&&(p.add(U),this.g.Ra(A,a,-1)),(U=this.g.Pa(A,c))!=-1&&(p.add(U),this.g.Ra(A,c,-1)),(A=s.get(v++))!==-1&&(R=C[2*(F=_.T(A,0))],F=C[2*F+1])}while(A!=-1&&R===x&&F===T);for(R=p.size==1&&y.size==2,U=F=-1,N=0,B=p.size;N<B;N++){q=p.get(N);var K=this.Mc.we(q);if(K==-1||p.hG(K)||(F=K),(q=this.Mc.lb(q))==-1||p.hG(q)||(U=q),F!=-1&&U!=-1)break}for(this.$d.$J(T,x),N=0,B=p.size;N<B;N++)q=p.get(N),this.Mc.vd(q,-1);if(p.clear(!1),!R&&F!=-1&&U!=-1&&this.qO(F,U)){l=!0,this.Ni=this.$d.rm();break}for(N=0,B=y.size;N<B;N+=2){if(T=y.get(N),x=y.get(N+1),R?(T=this.Mc.zu(F,U,T,!0),R=!1):T=this.Mc.addElement(T,-1),this.$d.rg){this.Ni=this.$d.rm(),l=!0;break}this.g.Pa(x,a)==-1?this.g.Ra(x,a,T):this.g.Ra(x,c,T)}if(l)break;y.Bh(0)}return this.g.Td(a),this.g.Td(c),l},h.prototype.qO=function(l,s){return this.$d.compare(this.Mc,this.Mc.ja(l),s),l=this.$d.rg,this.$d.Kr(),l},h.yE=function(l){for(var s=l.ld;s!=-1;s=l.ue(s))if(d.aa.Hc(l.ic(s)))return!0;return!1},h.fQ=function(l,s,a,c){return!!h.yE(l)&&((s=new h(c)).g=l,s.qa=a,15>l.fd?l=s.nP():s.oP())},h.V=function(l,s,a){return h.fQ(l,l.IF(),s,a)},h.kI=function(l,s,a,c,p){if(!h.yE(s))return!1;var y=new h(p);if(y.g=s,y.qa=a,y.cA=l,y.lI())return c!=null&&c.Wt(y.Ni),!0;var v=new d.Dd;return v.$B(),s.Oc(v),(y=new h(p)).g=s,y.qa=a,y.cA=l,l=y.lI(),v.$B(),s.Oc(v),!!l&&(c!=null&&c.Wt(y.Ni),!0)},h.Ml=function(l,s){return!(16>(l=l.I()))&&2*l+Math.log(l)*Math.LOG10E/Math.log(2)*s<1*l*s},h.lP=function(l,s,a,c){var p=s.getType();if(d.aa.Hc(p))return new h(c).mP(l,s,a);throw d.i.fa("crack_A_with_B")},h.prototype.mP=function(l,s,a){var c=new d.l;l.xc(c);var p=new d.l;if(s.xc(p),p.W(a,a),!p.isIntersecting(c))return l;var y=l.Bb,v=null;y!=null&&(v=y.Fb),h.Ml(l,l.I())&&(v=d.ta.jj(l,p));var _=v!=null?v.getIterator():null,x=s.Ga();s=l.Ga();var T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(p=[];x.$a();)for(;x.Ha();){var C=x.ha();if(v!=null){for(_.Uo(C,a),y=_.next();y!=-1;y=_.next())if(this.Xq(),s.Vb(v.ja(y),-1),s.Ha()){var A=(y=s.ha()).Ea(C,null,T,null,a);for(y=0;y<A;++y){var R=T[y];if(R!=0&&R!=1){var F=s.wb(),N=new S;N.t=R,N.index=F,p.push(N)}}}}else{var B=new d.l;if(C.xc(B),B.W(a,a),c.isIntersecting(B)){for(s.Zi();s.$a();)for(;s.Ha();)if(this.Xq(),y=s.ha(),R=new d.l,y.xc(R),R.isIntersecting(B))for(A=y.Ea(C,null,T,null,a),y=0;y<A;++y)(R=T[y])!=0&&R!=1&&(F=s.wb(),(N=new S).t=R,N.index=F,p.push(N))}}}if(p.length==0)return l;for(p=p.sort(S.Ey),l=l.Ia(),s.Zi();s.$a()&&!s.Ha(););for(a=s.ha(),c=new d.ig,v=-1,y=0,_=p.length;y<_;){for(T=p[y].index,x=y+1;x<_&&p[x].index==T;)++x;for(;s.wb()<T;){if(this.Xq(),C=s.Ha(),R=s.gb,(B=C||!s.On()||s.Pn())&&l.oc(a,v!=R),v=R,!C)for(;s.$a()&&!s.Ha(););a=s.ha()}for(T=0;y<x;y++)(R=p[y].t)!=T&&(a.ah(T,R,c),T=R,R=s.gb,l.oc(c.get(),v!=R),v=R);if((B=(C=s.Ha())||!s.On()||s.Pn())&&(a.ah(T,1,c),l.oc(c.get(),!1)),C)a=s.ha();else{for(;s.$a()&&!s.Ha(););a=s.Ha()?s.ha():null}y=x}for(a!=null&&(R=s.gb,(B=(C=s.Ha())||!s.On()||s.Pn())&&l.oc(a,v!=R),v=R),C=s.Ha();;){if(!C){for(;s.$a()&&!(C=s.Ha()););if(!C)break}a=s.ha(),R=s.gb,(B=(C=s.Ha())||!s.On()||s.Pn())&&l.oc(a,v!=R),v=R}return l},h}();d.$t=O;var S=function(){function h(){}return h.Ey=function(l,s){return l.index==s.index?l.t>s.t?1:l.t<s.t?-1:0:l.index>s.index?1:-1},h}()}(Y||(Y={})),function(d){var O;(O=d.KK||(d.KK={}))[O.Left=0]="Left",O[O.Right=1]="Right",O[O.Coincident=2]="Coincident",O[O.Undefined=3]="Undefined",O[O.Uncut=4]="Uncut";var S=function(s,a,c,p,y,v,_,x,T,C,A){this.X=s,this.bt=a,this.Ns=c,this.tg=p,this.Lm=C,this.Al=A};d.uY=S;var h=function(){function s(a,c){this.JH=a,this.Hi=c}return s.prototype.qM=function(a,c){var p=new d.h;this.Hi.D(a,p);var y=new d.h;return this.Hi.D(c,y),(p=p.compare(y))!=0?p:(a=this.Hi.Pa(a,this.JH))<(c=this.Hi.Pa(c,this.JH))?-1:a==c?0:1},s}(),l=function(s,a,c,p,y,v,_,x,T){this.tg=s,this.Ns=a,this.OA=c,this.UH=p,this.Ei=y,this.Al=v,this.Lm=_,this.VH=x,this.OT=T};d.tY=l,d.LK=function(){function s(){}return s.JK=function(a,c,p,y,v,_){if(c.B())a=new S(c,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),v.push(a);else if(p.B())a=new S(c,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),v.push(a);else{var x=new d.gd;if(x.Ib(c),x.Ib(p),d.Tk.V(x,y,_,!0),x.fd==0)a=new S(c.Ia(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),v.push(a);else{for(c=0,p=x.Gd(),y=x.ld;y!=-1;y=x.ue(y))for(_=x.Ob(y);_!=-1;_=x.Rb(_))for(var T=x.Xa(_),C=0,A=x.Ja(_);C<A;T=x.U(T),C++)x.Ra(T,p,c++);c=s.HM(p,x),s.cM(a,c,x,v)}}},s.HM=function(a,c){for(var p=c.fd,y=new d.ia(0),v=c.ld;v!=-1;v=c.ue(v))for(var _=c.Ob(v);_!=-1;_=c.Rb(_))for(var x=c.Xa(_),T=0,C=c.Ja(_);T<C;x=c.U(x),T++)y.add(x);var A=new h(a,c);y.Vd(0,p,function(Ae,Me){return A.qM(Ae,Me)}),a=[];var R=[],F=c.Gd(),N=c.Gd();v=c.ld,_=c.ue(v),C=new d.h;var B=new d.h,q=y.get(0),U=c.bd(q),K=c.Qf(U);c.D(q,C);var X=1;for(x=0;X<p-1;){var te=!1;for(T=X;T<p;T++)if(T!=x){var ae=y.get(T),ge=c.bd(ae),Ee=c.Qf(ge);if(c.D(ae,B),!C.qb(B))break;K==v&&Ee==_&&(te=s.uM(F,N,c,a,R,U,q,ge,ae))}if(te||x==X-1){if(te&&x==X-1&&X--,++x==p)break;q=y.get(x),U=c.bd(q),K=c.Qf(U),c.D(q,C)}te||(X=x+1)}for(p=[],v=c.ld;v!=-1;v=c.ue(v))for(_=c.Ob(v);_!=-1;_=c.Rb(_))for(y=c.Xa(_),T=0,C=c.Ja(_);T<C;y=c.U(y),T++){if(0<=(x=c.Pa(y,N)))for(;x<R.length&&R[x].tg==y;)p.push(R[x++]);if(0<=(x=c.Pa(y,F)))for(;x<a.length&&a[x].tg==y;)p.push(a[x++])}return c.Td(F),c.Td(N),p},s.uM=function(a,c,p,y,v,_,x,T,C){var A=p.rj(_),R=p.rj(T),F=p.Xa(_),N=p.Xa(T),B=p.Ma(x),q=p.Ma(C),U=!1,K=!1,X=!1,te=!1;return x!=F&&(C!=N&&(U=s.vM(a,p,y,_,B,T,q)),C!=R&&(K=s.wM(a,p,y,_,B,T,C))),x!=A&&(C!=N&&(X=s.xM(c,p,v,_,x,T,q,F)),C!=R&&(te=s.yM(c,p,v,_,x,T,C,F))),U&&K&&X?(a=y.length-1,v[te?v.length-2:v.length-1].Ei==2&&(y[a-1]=y[a],--y.length)):U&&K&&te&&v[v.length-1].Ei==2&&(v=y[y.length-1],--y.length,p.Pa(v.tg,a)==y.length&&p.Ra(v.tg,a,-1)),U||K||X||te},s.vM=function(a,c,p,y,v,_,x){var T=new d.yb,C=new d.yb,A=[0,0],R=[0,0],F=c.bc(v);return F==null&&(c.ed(v,T),F=T),(T=c.bc(x))==null&&(c.ed(x,C),T=C),2>(F=F.Ea(T,null,A,R,0))&&(y=new l(v,y,A[0],NaN,F,x,_,R[0],NaN),p.push(y),0>(y=c.Pa(v,a))&&c.Ra(v,a,p.length-1)),!0},s.wM=function(a,c,p,y,v,_,x){var T=new d.yb,C=new d.yb,A=[0,0],R=[0,0],F=c.bc(v);return F==null&&(c.ed(v,T),F=T),(T=c.bc(x))==null&&(c.ed(x,C),T=C),2>(F=F.Ea(T,null,A,R,0))&&(y=new l(v,y,A[0],NaN,F,x,_,R[0],NaN),p.push(y),0>(y=c.Pa(v,a))&&c.Ra(v,a,p.length-1),!0)},s.xM=function(a,c,p,y,v,_,x,T){var C=new d.yb,A=new d.yb,R=[0,0],F=[0,0],N=c.bc(v);return N==null&&(c.ed(v,C),N=C),(C=c.bc(x))==null&&(c.ed(x,A),C=A),(N=N.Ea(C,null,R,F,0))==2?(y=new l(v,y,R[0],R[1],N,x,_,F[0],F[1]),p.push(y),0>(y=c.Pa(v,a))&&c.Ra(v,a,p.length-1),!0):(A=!1,v==T&&(y=new l(v,y,R[0],NaN,N,x,_,F[0],NaN),p.push(y),0>(y=c.Pa(v,a))&&c.Ra(v,a,p.length-1),A=!0),A)},s.yM=function(a,c,p,y,v,_,x,T){var C=new d.yb,A=new d.yb,R=[0,0],F=[0,0],N=c.bc(v);return N==null&&(c.ed(v,C),N=C),(C=c.bc(x))==null&&(c.ed(x,A),C=A),(N=N.Ea(C,null,R,F,0))==2?(y=new l(v,y,R[0],R[1],N,x,_,F[0],F[1]),p.push(y),0>(y=c.Pa(v,a))&&c.Ra(v,a,p.length-1),!0):(A=!1,v==T&&(y=new l(v,y,R[0],NaN,N,x,_,F[0],NaN),p.push(y),0>(y=c.Pa(v,a))&&c.Ra(v,a,p.length-1),A=!0),A)},s.cM=function(a,c,p,y){var v=[];v[0]=new d.h,v[1]=new d.h,v[2]=new d.h,v[3]=new d.h;var _=new d.h,x=new d.h,T=new d.h,C=new d.h,A=null;y!=null&&(A=new d.ig).Or();var R=0,F=null,N=new d.yb;new d.yb;for(var B=p.Ob(p.ld);B!=-1;B=p.Rb(B)){for(var q=4,U=-1,K=-1,X=-1,te=-1,ae=NaN,ge=!0,Ee=!1,Ae=!0,Me=!0,He=!0,Ie=0,dt=B,ut=0,Nt=p.Xa(B),yi=p.Ja(B),fr=0;fr<yi;Nt=p.U(Nt),fr++){var _i=p.bc(Nt);if(_i==null){if(!p.ed(Nt,N))continue;_i=N}K==-1&&(K=Nt);for(var Ft=0;R<c.length&&Nt==c[R].tg;){U=c[R].Ns;var pt=c[R].tg,$t=c[R].OA,Di=c[R].Lm,$i=c[R].Al,Bo=c[R].VH;if(c[R].Ei==2){if(Ee||(dt=U,K=pt,ut=$t,X=Di,te=$i,ae=Bo,q=2,y!=null?F=new d.Ta:Ie=0,He=!1,Me=!0),$t=c[R].UH,Bo=c[R].OT,y!=null?(_i.ah(Ft,c[R].UH,A),F.oc(A.get(),Me)):Ie++,Ft=$t,Ee=!0,Me=ge=!1,R+1==c.length||c[R+1].Ei!=2||c[R+1].tg==pt&&c[R+1].OA!=Ft){if(y!=null){var Pt=new S(F,2,U,pt,$t,q,dt,K,ut,Di,$i);y.push(Pt)}else null.add(Ie);dt=U,K=pt,ut=$t,X=Di,te=$i,ae=Bo,q=2,Ee=ge=!1,Me=He=!0}}else{var Gn=p.U(pt);if(R<c.length-1&&c[R+1].tg==Gn&&c[R+1].Al==$i&&c[R+1].Ei==2)$t!=Ft&&(He&&(y!=null?F=new d.Ta:Ie=0),ge=0<R&&c[R-1].Ns==U?q==1?0:q==0?1:3:3,y!=null?(_i.ah(Ft,$t,A),F.oc(A.get(),Me),Pt=new S(F,ge,U,pt,$t,q,dt,K,ut,Di,$i),y.push(Pt)):(Ie++,null.add(Ie)),Ft=$t,dt=U,K=pt,ut=$t,X=Di,te=$i,ae=Bo,q=ge,ge=Ae=!1,Me=He=!0);else if(!s.CM(a,p,c,R,_,x)){s.zM(p,c,R,B,Nt,T,C);var ei=!1;if(Gn=!1,Pt=!0,!(_.qb(T)||x.qb(T)||_.qb(C)||x.qb(C))){v[0].L(_),v[1].L(x),v[2].L(T),v[3].L(C),v.sort(d.h.nu);var Bn=v[0],Mm=v[1],Cm=v[2],re=v[3];Bn.qb(_)?Mm.qb(x)?a?(Gn=ei=!0,Pt=!1):ei=!1:re.qb(x)?a?Pt=Gn=ei=!0:ei=!1:(ei=!0,Pt=Mm.qb(T)):Mm.qb(_)?Cm.qb(x)?a?(Gn=ei=!0,Pt=!1):ei=!1:Bn.qb(x)?a?Pt=Gn=ei=!0:ei=!1:(ei=!0,Pt=Cm.qb(T)):Cm.qb(_)?re.qb(x)?a?(Gn=ei=!0,Pt=!1):ei=!1:Mm.qb(x)?a?Pt=Gn=ei=!0:ei=!1:(ei=!0,Pt=re.qb(T)):Bn.qb(x)?a?(Gn=ei=!0,Pt=!1):ei=!1:Cm.qb(x)?a?Pt=Gn=ei=!0:ei=!1:(ei=!0,Pt=Bn.qb(T))}ei&&(ei=Nt==pt,($t!=Ft||ei&&Ft==0)&&(He&&(y!=null?F=new d.Ta:Ie=0),y!=null?(_i.ah(Ft,$t,A),F.oc(A.get(),Me)):Ie++),Pt?q!=1?(($t!=Ft||ei&&Ft==0)&&(y!=null?(Pt=new S(F,1,U,pt,$t,q,dt,K,ut,Di,$i),y.push(Pt)):null.add(Ie)),Gn?(R>=c.length-2||c[R+2].Ns!=U)&&(q=0):q=1):(($t!=Ft||ei&&Ft==0)&&(y!=null?(Pt=new S(F,3,U,pt,$t,q,dt,K,ut,Di,$i),y.push(Pt)):null.add(Ie)),q=1):q!=0?(($t!=Ft||ei&&Ft==0)&&(y!=null?(Pt=new S(F,0,U,pt,$t,q,dt,K,ut,Di,$i),y.push(Pt)):null.add(Ie)),Gn?(R>=c.length-2||c[R+2].Ns!=U)&&(q=1):q=0):(($t!=Ft||ei&&Ft==0)&&(y!=null?(Pt=new S(F,3,U,pt,$t,q,dt,K,ut,Di,$i),y.push(Pt)):null.add(Ie)),q=0),($t!=Ft||ei&&Ft==0)&&(Ft=$t,dt=U,K=pt,ut=$t,X=Di,te=$i,ae=Bo,ge=Ae=!1,Me=He=!0))}}R++}Ft!=1&&(He&&(y!=null?F=new d.Ta:Ie=0),y!=null?(_i.ah(Ft,1,A),F.oc(A.get(),Me)):Ie++,Me=He=!1,Ae=!0)}Ae&&($t=1,pt=p.rj(B),pt=p.Ma(pt),$i=Di=-1,Bo=NaN,ge?y!=null?(Pt=new S(F,4,U,pt,$t,q,dt,K,ut,Di,$i),y.push(Pt)):null.add(Ie):(ge=q==1?0:q==0?1:3,y!=null?(Pt=new S(F,ge,U,pt,$t,q,dt,K,ut,Di,$i),y.push(Pt)):null.add(Ie)))}},s.CM=function(a,c,p,y,v,_){var x=p[y].VH;if(x==1)return s.AM(a,c,p,y,v,_);if(x==0)return s.BM(a,c,p,y,v,_);throw d.i.Qa()},s.AM=function(a,c,p,y,v,_){var x=new d.yb,T=p[y].tg,C=p[y].Lm,A=p[y].Al,R=-1,F=-1,N=-1,B=-1;if(!a&&0<y){var q=p[y-1];R=q.tg,F=q.Lm,N=q.Al,B=q.Ei}var U=-1,K=-1,X=-1,te=-1;y<p.length-1&&(U=(q=p[y+1]).tg,K=q.Lm,X=q.Al,te=q.Ei);var ae=c.U(T);return q=c.U(A),a?y==p.length-1||U!=T||K!=C||X!=q||te==2?((a=c.bc(A))==null&&(c.ed(A,x),a=x),_.L(a.kg()),v.mt(_),_.normalize(),v.normalize(),!1):((a=c.bc(A))==null&&(c.ed(A,x),a=x),v.L(a.kg()),(a=c.bc(q))==null&&(c.ed(q,x),a=x),_.L(a.kg()),v.Sq(),_.normalize(),v.normalize(),!1):0<y&&R==T&&F==C&&N==q&&B==2||y<p.length-1&&U==ae&&K==C&&X==q&&te==2?((a=c.bc(A))==null&&(c.ed(A,x),a=x),_.L(a.kg()),v.mt(_),_.normalize(),v.normalize(),!1):!(y<p.length-1&&U==T&&K==C&&X==q)||((a=c.bc(A))==null&&(c.ed(A,x),a=x),v.L(a.kg()),(a=c.bc(q))==null&&(c.ed(q,x),a=x),_.L(a.kg()),v.Sq(),_.normalize(),v.normalize(),!1)},s.BM=function(a,c,p,y,v,_){var x=new d.yb,T=p[y].tg,C=p[y].Lm,A=p[y].Al,R=-1,F=-1,N=-1,B=-1;if(!a&&y<p.length-1){var q=p[y+1];R=q.tg,F=q.Lm,N=q.Al,B=q.Ei}var U=-1,K=-1,X=-1;q=-1,0<y&&(U=(q=p[y-1]).tg,K=q.Lm,X=q.Al,q=q.Ei);var te=c.U(T),ae=c.Ma(A);return a?y!=0&&U==T&&K==C&&X==ae&&q!=2||((a=c.bc(A))==null&&(c.ed(A,x),a=x),_.L(a.kg()),v.mt(_),_.normalize(),v.normalize(),!1):!(0<y&&U==T&&K==C&&X==ae&&q==2||y<p.length-1&&R==te&&F==C&&N==ae&&B==2)||((a=c.bc(A))==null&&(c.ed(A,x),a=x),_.L(a.kg()),v.mt(_),_.normalize(),v.normalize(),!1)},s.zM=function(a,c,p,y,v,_,x){var T=new d.yb,C=a.bc(v);if(C==null&&(a.ed(v,T),C=T),c=(p=c[p]).tg,p=p.OA,v=a.U(c),p==1)_.L(C.kg()),v!=-1&&v!=a.rj(y)?((C=a.bc(v))==null&&(a.ed(v,T),C=T),x.L(C.kg()),(C=a.bc(c))==null&&a.ed(c,T)):x.L(_),_.Sq(),x.normalize(),_.normalize();else{if(p!=0)throw d.i.Qa();x.L(C.kg()),_.mt(x),x.normalize(),_.normalize()}},s}()}(Y||(Y={})),function(d){var O;(O=d.bM||(d.bM={}))[O.Linear=0]="Linear",O[O.Angular=1]="Angular",O[O.Area=2]="Area";var S=function(){function y(v,_,x){this.od=_,this.ai=x,this.vA=v}return y.prototype.Nb=function(v){return v instanceof y&&this.ai===v.ai},y.aG=function(v){return v.od!==0?null:v.vA===-1?new y(-1,2,v.ai*v.ai):y.Zg(c[v.vA])},y.Zg=function(v){return(v=a[v])===void 0?null:v},y.ZO=function(v,_,x){var T=null;if(x!=null)try{x.values[0]==="EPSG"&&(T=y.Zg(parseInt(x.values[1])))}catch{}return T===null&&(T=new y(-1,v,_)),T},y.prototype.Ec=function(){return this.vA},y.prototype.CF=function(v){if(v.od!=this.od)throw d.i.Hb();return this.ai/v.ai},y.Nh=function(v,_,x){return _.CF(x)*v},y.XE=function(v,_,x,T,C){for(x=x.CF(T),T=0;T<_;T++)C[T]=v[T]*x},y}();d.Tc=S;for(var h=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2.5899984703195216e6,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988110336e-6,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3.4345281495040003e6,109458,3434290937856e-6,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1244521604938272e-22,109465,1e-12,109466,1e-18],l=[1031,484813681109536e-23,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],s=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],a=[],c=[],p=0;p<h.length;p+=2)a[h[p]]=new S(h[p],2,h[p+1]);for(h=null,p=0;p<l.length;p+=2)a[l[p]]=new S(l[p],1,l[p+1]);for(l=null,p=0;p<s.length;p+=3)a[s[p]]=new S(s[p],0,s[p+1]),c[s[p]]=s[p+2];s=null}(Y||(Y={})),function(d){var O=function(){function S(){this.xb=this.pb=0}return S.prototype.set=function(h,l){l!==void 0?(this.pb=h,this.xb=l):typeof h=="number"?(this.pb=h,this.xb=0):(this.pb=h.pb,this.xb=h.xb)},S.prototype.value=function(){return this.pb},S.prototype.add=function(h){var l=this.pb+h.pb;h=this.xb+h.xb+2220446049250313e-31*Math.abs(l),this.pb=l,this.xb=h},S.prototype.kN=function(){var h=this.pb+1,l=this.xb+2220446049250313e-31*Math.abs(h);this.pb=h,this.xb=l},S.prototype.dN=function(h,l){this.pb=h.pb+l.pb,this.xb=h.xb+l.xb+2220446049250313e-31*Math.abs(this.pb)},S.prototype.sub=function(h){if(typeof h=="number"){var l=this.pb-h;h=this.xb+2220446049250313e-31*Math.abs(l)}else l=this.pb-h.pb,h=this.xb+h.xb+2220446049250313e-31*Math.abs(l);this.pb=l,this.xb=h},S.prototype.Ag=function(h){var l=this.pb*h.pb;this.xb=this.xb*Math.abs(h.pb)+h.xb*Math.abs(this.pb)+this.xb*h.xb+2220446049250313e-31*Math.abs(l),this.pb=l},S.prototype.No=function(h){var l=this.pb*h;this.xb=this.xb*Math.abs(h)+2220446049250313e-31*Math.abs(l),this.pb=l},S.prototype.Kl=function(h,l){var s=Math.abs(h.pb)*Math.abs(l.pb);this.xb=h.xb*Math.abs(l.pb)+l.xb*Math.abs(h.pb)+h.xb*l.xb+2220446049250313e-31*Math.abs(s),this.pb=s},S.prototype.jm=function(h){var l=Math.abs(h.pb),s=this.pb/h.pb,a=(this.xb+Math.abs(s)*h.xb)/l;h.xb>.01*l&&(a*=1+(1+(h=h.xb/l))*h),this.pb=s,this.xb=a+2220446049250313e-31*Math.abs(s)},S.prototype.sqrt=function(){if(0<=this.pb){var h=Math.sqrt(this.pb),l=this.pb>10*this.xb?.5*this.xb/h:this.pb>this.xb?h-Math.sqrt(this.pb-this.xb):Math.max(h,Math.sqrt(this.pb+this.xb)-h);l+=2220446049250313e-31*Math.abs(h)}else this.pb<-1*this.xb?l=h=NaN:(h=0,l=Math.sqrt(this.xb));this.pb=h,this.xb=l},S.prototype.sin=function(h){var l=Math.sin(h.pb),s=Math.cos(h.pb);this.pb=l,l=Math.abs(l),this.xb=(Math.abs(s)+.5*l*h.xb)*h.xb+2220446049250313e-31*l},S.prototype.cos=function(h){var l=Math.sin(h.pb),s=Math.cos(h.pb);this.pb=s,s=Math.abs(s),this.xb=(Math.abs(l)+.5*s*h.xb)*h.xb+2220446049250313e-31*s},S.prototype.qg=function(){return Math.abs(this.pb)<=this.xb},S.prototype.ps=function(){return this.qg()&&this.xb!=0},S}();d.Wb=O}(Y||(Y={}));var rr=new Y.h,Ta=new Y.h,Un=new Y.h,Tu=new Y.h,Uc=new Y.h;(function(d){var O,S;(S=O||(O={}))[S.closedPath=1]="closedPath",S[S.exteriorPath=2]="exteriorPath",S[S.ringAreaValid=4]="ringAreaValid";var h=function(){function l(s,a,c,p,y,v,_){a!==void 0?(this.ib=s,this.ck=a,this.bl=c,this.ii=p,this.ya=v,this.hA=_,this.ew=y):(this.ib=s.ib,this.ck=s.ck,this.bl=s.bl,this.ii=s.ii,this.ya=s.ya,this.hA=s.hA,this.ew=s.ew),this.bH=!0}return l.prototype.next=function(){return this.bH?(this.bH=!1,this.ii):this.ii!=-1?(this.ii=this.ib.U(this.ii),this.ya++,this.ii!=-1&&this.ii!=this.ew?this.ii:this.$T()):-1},l.prototype.$T=function(){for(this.bl=this.ib.Rb(this.bl),this.ya=0;this.ck!=-1;){for(;this.bl!=-1;this.bl=this.ib.Rb(this.bl))if(this.ew=this.ii=this.ib.Xa(this.bl),this.ii!=-1)return this.ii;if(this.ck=this.ib.ue(this.ck),this.ck==-1)break;this.hA&&!d.aa.Hc(this.ib.ic(this.ck))||(this.bl=this.ib.Ob(this.ck))}return-1},l.AP=function(s,a,c,p,y,v,_){return new l(s,a,c,p,y,v,_)},l}();d.zY=h,O=function(){function l(){this.jo=this.Am=this.wk=this.cd=this.Ck=this.vo=this.Oi=this.md=this.bi=this.Sg=this.We=this.Il=null,this.qw=this.ld=-1,this.fd=0,this.fA=!1,this.ht=this.it=this.vb=null}return l.prototype.Sh=function(s){return this.We!=null?this.We[s]:null},l.prototype.Xg=function(s,a){if(this.We==null){if(a==null)return;this.We=[];for(var c=0,p=this.vb.I();c<p;c++)this.We.push(null)}this.We[s]=a},l.prototype.bp=function(s,a){this.md.S(s,1,a)},l.prototype.ap=function(s,a){this.md.S(s,2,a)},l.prototype.VB=function(s,a){this.md.S(s,6,a)},l.prototype.Sp=function(s){return this.md.T(s,6)},l.prototype.gx=function(s,a){this.md.S(s,7,a)},l.prototype.qv=function(s){return this.md.T(s,0)},l.prototype.OJ=function(s,a){this.cd.S(s,1,a)},l.prototype.SJ=function(s,a){this.cd.S(s,0,a)},l.prototype.JF=function(s){return this.cd.T(s,7)},l.prototype.Zo=function(s,a){this.cd.S(s,3,a)},l.prototype.$o=function(s,a){this.cd.S(s,4,a)},l.prototype.uU=function(s){this.cd==null&&(this.cd=new d.$c(8));var a=this.cd.Ce();return this.cd.S(a,2,s),this.cd.S(a,5,0),this.cd.S(a,6,0),this.cd.S(a,7,a),a},l.prototype.OQ=function(s){this.cd.jd(s)},l.prototype.wU=function(s){this.md==null&&(this.md=new d.$c(8),this.td=new d.$c(5),this.Oi=new d.be(0),this.vo=new d.be(0));var a=this.md.Ce();return this.md.S(a,0,a),this.md.S(a,3,0),this.md.S(a,6,0),this.gx(a,s),a>=this.Oi.size&&(s=16>a?16:d.O.truncate(3*a/2),this.Oi.resize(s),this.vo.resize(s)),this.Oi.set(a,0),this.vo.set(a,0),a},l.prototype.sF=function(s){this.md.jd(s)},l.prototype.Vy=function(s){this.td.jd(s),this.fd--},l.prototype.oI=function(s){this.md==null&&(this.md=new d.$c(8),this.td=new d.$c(5),this.Oi=new d.be(0),this.vo=new d.be(0));var a=this.td.Ce(),c=0<=s?s:a;if(this.td.S(a,0,c),0>s){if(c>=this.vb.I()){if(s=16>c?16:d.O.truncate(3*c/2),this.vb.resize(s),this.We!=null)for(var p=0;p<s;p++)this.We.push(null);this.Sg!=null&&this.Sg.resize(s),this.it=this.vb.ub(0)}this.vb.Cb(c,-1e38,-1e38),this.We!=null&&(this.We[c]=null),this.Sg!=null&&this.Sg.write(c,1)}return this.td.S(a,4,2*c),this.fd++,a},l.prototype.wj=function(s,a,c){var p=a!=-1?this.Ma(a):this.rj(s),y=p!=-1?this.U(p):-1,v=this.oI(c==null?this.fd:-1),_=this.Ua(v);return c!=null&&this.vb.Ht(_,c),this.aj(v,s),this.Bc(v,y),this.Cc(v,p),y!=-1&&this.Cc(y,v),p!=-1&&this.Bc(p,v),c=this.dc(s),p=this.Xa(s),a==-1&&this.Wg(s,v),a==p&&this.Jf(s,v),c&&y==-1&&(this.Bc(v,v),this.Cc(v,v)),this.Vj(s,this.Ja(s)+1),s=this.Qf(s),this.Tj(s,this.I(s)+1),v},l.prototype.nm=function(){return this.jo==null&&(this.jo=new d.Sa(this.vb.description)),this.jo},l.prototype.Yo=function(s,a){this.cd.S(s,2,-134217729&this.cd.T(s,2)||(a==1?134217728:0))},l.prototype.In=function(s){return 134217728&this.cd.T(s,2)?1:0},l.prototype.hN=function(s){var a=this.Ig(s.getType(),s.description);return s.getType()==1736&&this.Yo(a,s.In()),this.UD(a,s),a},l.prototype.iN=function(s){var a=this.Ig(s.getType(),s.description);return this.VD(a,s),a},l.prototype.XV=function(s,a){this.md==null&&(this.md=new d.$c(8),this.td=new d.$c(5),this.Oi=new d.be(0),this.vo=new d.be(0)),this.md.De(this.md.Hg+s),this.td.De(this.td.Hg+a),this.Oi.Jb(this.Oi.size+s),this.vo.Jb(this.vo.size+s)},l.prototype.UD=function(s,a){this.XV(a.da(),a.I()),this.Il.Fd(a,0,a.I()),this.it=this.vb.ub(0);for(var c=this.We!=null&&a.Ve!=null,p=0,y=a.da();p<y;p++)if(!(2>a.Ja(p))){var v=this.vf(s,-1);this.kn(v,a.dc(p));for(var _=a.Ba(p),x=a.Vc(p);_<x;_++){var T=this.wj(v,-1,null);if(c)if(T=this.Ua(T),1&a.ZF(_))this.Xg(T,null);else{var C=new d.ig;a.bc(_,C,!0),this.Xg(T,C.get())}}}},l.prototype.VD=function(s,a){this.Il.Fd(a,0,a.I()),this.it=this.vb.ub(0),s=this.vf(s,-1);var c=0;for(a=a.I();c<a;c++)this.wj(s,-1,null)},l.prototype.NX=function(s,a,c){var p=this.U(s);if(p==-1)throw d.i.Qa();for(var y=this.nm(),v=this.bd(s),_=0,x=a.ol(c);_<x;_++){var T=this.Ua(s),C=this.U(s),A=a.Vp(c,_);_==0&&(A.To(y),this.Dh(s,y)),A.getType()==322?this.Xg(T,null):this.Xg(T,d.aa.jg(A)),A.Po(y),_<x-1?s=this.wj(v,C,y):this.Dh(p,y)}},l.prototype.MX=function(s,a,c){var p=this.U(s);if(p==-1)throw d.i.Qa();for(var y=this.nm(),v=this.bd(s),_=0,x=a.ol(c);_<x;_++){var T=this.Ua(s),C=this.U(s),A=a.Vp(c,x-_-1);_==0&&(A.Po(y),this.Dh(s,y)),A.getType()==322?this.Xg(T,null):this.Xg(T,d.aa.jg(A)),A.To(y),_<x-1?s=this.wj(v,C,y):this.Dh(p,y)}},l.prototype.IF=function(){var s=new d.l;s.Oa();for(var a=this.Yq(),c=new d.h,p=!0,y=a.next();y!=-1;y=a.next())this.D(y,c),p?s.Zb(c.x,c.y):s.Lk(c.x,c.y),p=!1;return s},l.prototype.Ib=function(s){var a=s.getType();if(d.aa.Hc(a))return this.hN(s);if(a==550)return this.iN(s);throw d.i.Qa()},l.prototype.uN=function(s,a){var c=a.getType();if(d.aa.Hc(c))this.UD(s,a);else{if(c!=550)throw d.i.Qa();this.VD(s,a)}},l.prototype.mN=function(s,a){var c=this.Ig(1736,s.description);if(2>s.Ja(a))return c;this.Il.Fd(s,s.Ba(a),s.Vc(a)),this.it=this.vb.ub(0);var p=this.vf(c,-1);this.kn(p,s.dc(a)||!0);var y=this.We!=null&&s.Ve!=null,v=s.Ba(a);for(a=s.Vc(a);v<a;v++){var _=this.wj(p,-1,null);if(y)if(_=this.Ua(_),1&s.ZF(v))this.Xg(_,null);else{var x=new d.ig;s.bc(v,x,!0),this.Xg(_,x.get())}}return c},l.prototype.Ne=function(s){var a=this.ic(s),c=d.ZK.Ig(a,this.Il.description),p=this.I(s);if(p==0)return c;if(d.aa.Hc(a)){a=this.da(s);for(var y=d.Yc.Oh(a+1),v=d.Yc.Mr(a+1,0),_=c.description,x=0,T=_.Aa;x<T;x++){for(var C=_.kd(x),A=d.ra.Va(C),R=d.Yc.YE(C,p),F=this.vb.ub(C),N=0,B=0,q=0,U=this.Ob(s);U!=-1;U=this.Rb(U)){var K=0;this.dc(U)&&(K|=1),this.YS(U)&&(K|=4),K!=0&&v.zJ(B,K);var X=this.Ja(U);if(y.write(B++,q),q+=X,C==0){X=F;var te=R,ae=new d.h;for(K=this.Xa(U);N<q;K=this.U(K),N++){var ge=this.Ua(K);X.tc(2*ge,ae),te.Tt(2*N,ae)}}else for(K=this.Xa(U);N<q;K=this.U(K),N++)for(ge=this.Ua(K),te=0;te<A;te++)ae=F.eg(ge*A+te),R.pr(N*A+te,ae)}c.hn(C,R),y.write(a,p)}c.PJ(v),c.QJ(y),c.Pc(16777215)}else if(a==550){for(_=c.description,c.resize(p),x=0,T=_.Aa;x<T;x++){for(C=_.kd(x),A=d.ra.Va(C),R=c.ub(C),F=this.vb.ub(C),N=0,U=this.Ob(s),X=this.Ja(U),K=this.Xa(U);N<X;K=this.U(K),N++)for(ge=this.Ua(K),te=0;te<A;te++)ae=F.eg(ge*A+te),R.pr(N*A+te,ae);c.hn(C,R)}c.Pc(16777215)}return c},l.prototype.BB=function(s){for(var a=this.Ob(s);a!=-1;a=this.Zq(a));a=this.PR(s);var c=this.ue(s);a!=-1?this.OJ(a,c):this.ld=c,c!=-1?this.SJ(c,a):this.qw=a,this.OQ(s)},l.prototype.Ig=function(s,a){return a===void 0?this.$E(s,d.ee.og()):this.$E(s,a)},l.prototype.$E=function(s,a){return s=this.uU(s),this.vb==null?this.vb=this.Il=new d.de(a):this.Il.Jl(a),this.ht=this.Il.description,this.fA=1<this.ht.Aa,this.ld==-1?this.ld=s:(this.SJ(s,this.qw),this.OJ(this.qw,s)),this.qw=s},l.prototype.ue=function(s){return this.cd.T(s,1)},l.prototype.PR=function(s){return this.cd.T(s,0)},l.prototype.ic=function(s){return 2147483647&this.cd.T(s,2)},l.prototype.HJ=function(s,a,c){a=this.wk[a],(s=this.JF(s))>=a.size&&a.resize(Math.max(d.O.truncate(1.25*s),16),-1),a.write(s,c)},l.prototype.KF=function(s,a){return(s=this.JF(s))<(a=this.wk[a]).size?a.read(s):-1},l.prototype.aF=function(){this.wk==null&&(this.wk=[]);for(var s=0;s<this.wk.length;s++)if(this.wk[s]==null)return this.wk[s]=d.Yc.Oh(0),s;return this.wk.push(d.Yc.Oh(0)),this.wk.length-1},l.prototype.xW=function(s){this.wk[s]=null},l.prototype.Ob=function(s){return this.cd.T(s,3)},l.prototype.kv=function(s){return this.cd.T(s,4)},l.prototype.I=function(s){return this.cd.T(s,5)},l.prototype.da=function(s){return this.cd.T(s,6)},l.prototype.Gp=function(s,a,c){for(var p=0,y=this.ld;y!=-1;y=this.ue(y)){var v=this.ic(y);if(d.aa.Hc(v)&&(!c||v==1736)){v=this.ic(y)==1736;for(var _=this.Ob(y);_!=-1;){for(var x=0,T=this.Xa(_);x<d.O.truncate(this.Ja(_)/2);){var C=this.U(T);if(C==-1)break;var A=this.Ua(T),R=this.Sh(A);R!=null?A=R.Qb():(R=this.Ua(C),A=this.vb.yr(A,R)),A<=s?(A==0?p==0&&(p=-1):p=1,C!=this.rj(_)&&(this.lC(C,T),this.pd(C,!0))):T=this.U(T),x++}for(x=this.Xa(_),T=this.dc(_)?x:this.rj(_);0<this.Ja(_);){if((C=this.Ma(T))==-1){this.pd(T,!0),p==0&&(p=-1);break}var F=this.Ua(C);if((R=this.Sh(F))!=null?A=R.Qb():(A=this.Ua(T),A=this.vb.yr(A,F)),A<=s)A==0?p==0&&(p=-1):p=1,this.lC(C,T),this.pd(C,!1),x==C&&(x=this.Xa(_));else if((T=this.Ma(T))==x)break}T=this.Ja(_),a&&(v?3>T:2>T)?(_=this.Zq(_),p=0<T?1:p==0?-1:p):_=this.Rb(_)}}}return p},l.prototype.lC=function(s,a){var c=this.Ua(s),p=this.Ua(a);if(this.Sg!=null&&(c=this.Sg.read(c),this.Sg.write(p,c)),this.bi!=null){for(p=0,c=this.bi.length;p<c;p++)if(this.bi[p]!=null){var y=this.Pa(s,p);y!=-1&&this.Ra(a,p,y)}}},l.prototype.Ul=function(s,a,c){var p=0,y=this.U(s);if(y==-1)throw d.i.Qa();for(var v=this.Ua(s),_=this.Ua(y),x=this.Sh(v),T=x==null?this.vb.yr(v,_):x.Qb(),C=0;C<c;C++){var A=a[C];if(0<A&&1>A){var R=A;x!=null&&(R=0<T?x.Ux(A)/T:0),this.vb.kD(v,_,R,this.nm());var F=this.wj(this.bd(s),y,this.nm());if(p++,x!=null){var N=x.dl(0,A);R=this.Ua(this.Ma(F)),this.Xg(R,N),this.mf(F,N.wc()),C!=c-1&&a[C+1]!=1||(A=x.dl(A,1),this.Xg(R,A))}}}return p},l.prototype.LX=function(s,a,c){var p=0,y=this.U(s);if(y==-1)throw d.i.fa("internal error");var v=this.Ua(s),_=this.Ua(y),x=this.Sh(v),T=x==null?this.vb.yr(v,_):x.Qb(),C=0;s=this.bd(s);for(var A=0;A<c;A++){var R=a[A];if(C<R&&1>R){var F=R;if(x!=null&&(F=0<T?x.Ux(R)/T:0),this.vb.kD(v,_,F,this.nm()),F=this.yS(s,y,this.nm()),p++,x!=null){C=x.dl(C,R);var N=this.Ua(this.Ma(F));this.Xg(N,C),this.Cb(F,C.pa,C.la),A!=c-1&&a[A+1]!=1||(C=x.dl(R,1),F=this.Ua(F),this.Xg(F,C))}}C=R}return p},l.prototype.yS=function(s,a,c){var p=a!=-1?this.Ma(a):this.rj(s),y=p!=-1?this.U(p):-1,v=this.oI(c==null?this.fd:-1),_=this.Ua(v);return c!=null&&this.vb.Ht(_,c),this.aj(v,s),this.Bc(v,y),this.Cc(v,p),y!=-1&&this.Cc(y,v),p!=-1&&this.Bc(p,v),c=this.dc(s),p=this.Xa(s),a==-1&&this.Wg(s,v),a==p&&(c&&p!=-1||this.Jf(s,v)),c&&y==-1&&(this.Bc(v,v),this.Cc(v,v)),this.Vj(s,this.Ja(s)+1),s=this.Qf(s),this.Tj(s,this.I(s)+1),v},l.prototype.uE=function(s,a,c){var p=this.Ua(a),y=this.Ua(c);if(0>p||y>this.fd-1)throw d.i.N("invalid call");if(p>y&&!this.dc(s))throw d.i.N("cannot iterate across an open path");for(s=0;a!=c;a=this.U(a))p=this.Ua(a),(y=this.Sh(p))!=null?s+=y.Qb():(y=this.Ua(this.U(a)),s+=this.vb.yr(p,y));return s},l.prototype.Dh=function(s,a){var c=this.Ua(s);this.vb.Ht(c,a),(c=this.Sh(c))!=null&&c.setStart(a),(s=this.Ma(s))!=-1&&(s=this.Ua(s),this.Sh(s)!=null&&c.setEnd(a))},l.prototype.Vi=function(s,a){s=this.Ua(s),this.vb.ve(s,a)},l.prototype.mf=function(s,a){this.Cb(s,a.x,a.y)},l.prototype.Cb=function(s,a,c){var p=this.Ua(s);this.vb.Cb(p,a,c),(p=this.Sh(p))!=null&&p.ZB(a,c),(s=this.Ma(s))!=-1&&(s=this.Ua(s),this.Sh(s)!=null&&p.Ql(a,c))},l.prototype.D=function(s,a){this.vb.D(this.td.T(s,0),a)},l.prototype.Gc=function(s,a){this.vb.za[0].tc(2*this.td.T(s,0),a)},l.prototype.Na=function(s){var a=new d.h;return this.vb.D(this.td.T(s,0),a),a},l.prototype.dG=function(s,a){this.it.tc(2*s,a)},l.prototype.Uc=function(s,a,c){return this.vb.Uc(s,this.Ua(a),c)},l.prototype.setAttribute=function(s,a,c,p){this.vb.setAttribute(s,this.Ua(a),c,p)},l.prototype.Ua=function(s){return this.td.T(s,0)},l.prototype.ih=function(){var s=new d.h;return this.D(void 0,s),s.y},l.prototype.fq=function(s,a){s=this.Ua(s),a=this.Ua(a);var c=this.vb.za[0].o;return c[2*s]===c[2*a]&&c[2*s+1]===c[2*a+1]},l.prototype.Dv=function(s,a){s=this.Ua(s);var c=this.vb.za[0].o;return c[2*s]===a.x&&c[2*s+1]===a.y},l.prototype.vX=function(s,a){if(1>a&&(a=1),this.Sg==null){if(a==1)return;this.Sg=d.Yc.Dn(this.vb.I(),1)}(s=this.Ua(s))>=this.Sg.size&&this.Sg.resize(s+1,1),this.Sg.write(s,a)},l.prototype.cG=function(s){return s=this.Ua(s),this.Sg==null||s>=this.Sg.size?1:this.Sg.read(s)},l.prototype.Ra=function(s,a,c){a=this.bi[a],s=this.Ua(s),a.size<this.vb.I()&&a.resize(this.vb.I(),-1),a.write(s,c)},l.prototype.Pa=function(s,a){return(s=this.Ua(s))<(a=this.bi[a]).size?a.read(s):-1},l.prototype.Gd=function(){this.bi==null&&(this.bi=[]);for(var s=0;s<this.bi.length;s++)if(this.bi[s]==null)return this.bi[s]=d.Yc.Oh(0,-1),s;return this.bi.push(d.Yc.Oh(0,-1)),this.bi.length-1},l.prototype.Td=function(s){this.bi[s]=null},l.prototype.bc=function(s){return this.We!=null?(s=this.Ua(s),this.We[s]):null},l.prototype.ed=function(s,a){var c=this.td.T(s,2);if(c==-1)return!1;if(this.fA){var p=new d.Sa;this.Vi(s,p),a.setStart(p),this.Vi(c,p),a.setEnd(p)}else this.vb.Gc(this.td.T(s,0),rr),a.em(0,rr),this.vb.Gc(this.td.T(c,0),rr),a.em(1,rr);return!0},l.prototype.mW=function(s,a,c){if(this.fA){var p=new d.Sa;this.Vi(s,p),c.setStart(p),this.Vi(a,p),c.setEnd(p)}else this.vb.Gc(s,rr),c.em(0,rr),this.vb.Gc(a,rr),c.em(1,rr)},l.prototype.vf=function(s,a){if(a!=-1){if(s!=this.Qf(a))throw d.i.Qa();var c=this.cs(a)}else c=this.kv(s);var p=this.wU(s);return a!=-1&&this.bp(a,p),this.ap(p,a),this.bp(p,c),c!=-1?this.ap(c,p):this.Zo(s,p),a==-1&&this.$o(s,p),this.Rl(s,this.da(s)+1),p},l.prototype.nG=function(s,a,c,p){s=this.vf(s,-1);for(var y=0,v=a,_=!1;v==c&&(_=!0),this.aj(v,s),y++,(v=this.U(v))!=a;);return this.kn(s,!0),this.Vj(s,y),_&&(a=c),this.Jf(s,a),this.Wg(s,this.Ma(a)),this.cp(s,!1),p!=null&&(p[0]=_),s},l.prototype.Zq=function(s){var a=this.cs(s),c=this.Rb(s),p=this.Qf(s);return a!=-1?this.ap(a,c):this.Zo(p,c),c!=-1?this.bp(c,a):this.$o(p,a),this.AO(s),this.Rl(p,this.da(p)-1),this.sF(s),c},l.prototype.AO=function(s){var a=this.Xa(s);if(a!=-1){for(var c=0,p=this.Ja(s);c<p;c++){var y=a;a=this.U(a),this.Vy(y)}a=this.Qf(s),this.Tj(a,this.I(a)-this.Ja(s))}this.Vj(s,0)},l.prototype.Rb=function(s){return this.md.T(s,2)},l.prototype.cs=function(s){return this.md.T(s,1)},l.prototype.Ja=function(s){return this.md.T(s,3)},l.prototype.dc=function(s){return!!(1&this.Sp(s))},l.prototype.kn=function(s,a){if(this.dc(s)!=a){if(0<this.Ja(s)){var c=this.Xa(s),p=this.rj(s);a?(this.Bc(p,c),this.Cc(c,p),c=this.Ua(p)):(this.Bc(p,-1),this.Cc(c,-1),c=this.Ua(p)),this.Xg(c,null)}this.VB(s,(1|this.Sp(s))-1|(a?1:0))}},l.prototype.Qf=function(s){return this.md.T(s,7)},l.prototype.YS=function(s){return!!(2&this.Sp(s))},l.prototype.PB=function(s,a){this.VB(s,(2|this.Sp(s))-2|(a?2:0))},l.prototype.wz=function(s){if(this.cT(s))return this.Oi.get(this.qv(s));var a=new d.yb,c=this.Xa(s);if(c==-1)return 0;var p=new d.h;this.D(c,p);for(var y=0,v=0,_=this.Ja(s);v<_;v++,c=this.U(c)){var x=this.bc(c);if(x==null){if(!this.ed(c,a))continue;x=a}y+=x.Tx(p.x,p.y)}return this.cp(s,!0),this.Oi.set(this.qv(s),y),y},l.prototype.gr=function(s,a,c){a=this.Ck[a],s=this.qv(s),a.size<this.Oi.size&&a.resize(this.Oi.size,-1),a.write(s,c)},l.prototype.sj=function(s,a){return(s=this.qv(s))<(a=this.Ck[a]).size?a.read(s):-1},l.prototype.Ky=function(){this.Ck==null&&(this.Ck=[]);for(var s=0;s<this.Ck.length;s++)if(this.Ck[s]==null)return this.Ck[s]=d.Yc.Oh(0),s;return this.Ck.push(d.Yc.Oh(0)),this.Ck.length-1},l.prototype.CB=function(s){this.Ck[s]=null},l.prototype.ZT=function(s,a,c){if(c==-1)throw d.i.N();if(a!=c){var p=this.Rb(c),y=this.cs(c),v=this.Qf(c);y==-1?this.Zo(v,p):this.ap(y,p),p==-1?this.$o(v,y):this.bp(p,y),this.Tj(v,this.I(v)-this.Ja(c)),this.Rl(v,this.da(v)-1),y=a==-1?this.kv(s):this.cs(a),this.bp(c,y),this.ap(c,a),a==-1?this.$o(s,c):this.bp(a,c),y==-1?this.Zo(s,c):this.ap(y,c),this.Tj(s,this.I(s)+this.Ja(c)),this.Rl(s,this.da(s)+1),this.gx(c,s)}},l.prototype.ij=function(s,a){this.vb.ve(this.Ua(a),this.nm()),this.wj(s,-1,this.nm())},l.prototype.pd=function(s,a){var c=this.bd(s),p=this.Ma(s),y=this.U(s);p!=-1&&this.Bc(p,y);var v=this.Ja(c);if(s==this.Xa(c)&&this.Jf(c,1<v?y:-1),y!=-1&&this.Cc(y,p),s==this.rj(c)&&this.Wg(c,1<v?p:-1),p!=-1&&y!=-1){p=this.Ua(p);var _=this.Ua(y);a?(a=this.Sh(p))!=null&&(p=new d.h,this.vb.D(_,p),a.Qc(p)):(_=this.Ua(s),a=this.Sh(_),this.Xg(p,a),a!=null&&(p=this.vb.Na(p),a.Dc(p)))}return this.Vj(c,v-1),c=this.Qf(c),this.Tj(c,this.I(c)-1),this.Vy(s),y},l.prototype.Xa=function(s){return this.md.T(s,4)},l.prototype.rj=function(s){return this.md.T(s,5)},l.prototype.U=function(s){return this.td.T(s,2)},l.prototype.Ma=function(s){return this.td.T(s,1)},l.prototype.bd=function(s){return this.td.T(s,3)},l.prototype.fc=function(s,a){return this.wj(s,-1,a)},l.prototype.Yq=function(s){if(s===void 0)return this.Yq(!1);if(s instanceof h)return new h(s);var a,c=-1,p=-1,y=-1,v=0,_=!1;for(a=this.ld;a!=-1;a=this.ue(a))if(!s||d.aa.Hc(this.ic(a))){for(c=this.Ob(a);c!=-1;c=this.Rb(c))if(y=p=this.Xa(c),v=0,p!=-1){_=!0;break}if(_)break}return h.AP(this,a,c,p,y,v,s)},l.prototype.Oc=function(s){if(this.Il.Oc(s),this.We!=null)for(var a=0,c=this.We.length;a<c;a++)this.We[a]!=null&&this.We[a].Oc(s)},l.prototype.jr=function(s,a,c,p){p?this.NX(s,a,c):this.MX(s,a,c)},l.prototype.Cc=function(s,a){this.td.S(s,1,a)},l.prototype.Bc=function(s,a){this.td.S(s,2,a)},l.prototype.aj=function(s,a){this.td.S(s,3,a)},l.prototype.Vj=function(s,a){this.md.S(s,3,a)},l.prototype.Jf=function(s,a){this.md.S(s,4,a)},l.prototype.Wg=function(s,a){this.md.S(s,5,a)},l.prototype.Rl=function(s,a){this.cd.S(s,6,a)},l.prototype.Tj=function(s,a){this.cd.S(s,5,a)},l.prototype.pJ=function(s){var a=s;do{var c=this.U(a);this.Bc(a,this.Ma(a)),this.Cc(a,c),a=c}while(a!=s)},l.prototype.bC=function(s){this.fd=s},l.prototype.$q=function(s){var a=this.cs(s),c=this.Rb(s),p=this.Qf(s);a!=-1?this.ap(a,c):this.Zo(p,c),c!=-1?this.bp(c,a):this.$o(p,a),this.Jf(s,-1),this.Wg(s,-1),this.sF(s)},l.prototype.mi=function(s,a){var c=this.Ma(s),p=this.U(s);if(c!=-1&&this.Bc(c,p),p!=-1&&this.Cc(p,c),c!=-1&&p!=-1)if(c=this.Ua(c),p=this.Ua(p),a){if((a=this.Sh(c))!=null){var y=new d.h;this.vb.D(p,y),a.Qc(y)}}else a=this.Ua(s),a=this.Sh(a),this.Xg(c,a),a!=null&&(y=new d.h,this.vb.D(c,y),a.Dc(y));this.Vy(s)},l.prototype.cT=function(s){return!!(4&this.Sp(s))},l.prototype.cp=function(s,a){this.VB(s,(4|this.Sp(s))-4|(a?4:0))},l.prototype.nx=function(s,a){var c=this.td.o;this.vb.mc();var p=this.vb.za[0].o;s.Vd(0,a,function(y,v){var _=c[5*y];y=c[5*v],v=p[2*_],_=p[2*_+1];var x=p[2*y];return _<(y=p[2*y+1])?-1:_>y?1:v<x?-1:v>x?1:0})},l.prototype.jS=function(){for(var s=this.ld;s!=-1;s=this.ue(s))if(!d.aa.Hc(this.ic(s)))return!0;return!1},l.prototype.hC=function(s,a){for(var c=this.Ob(s),p=this.Ob(a),y=this.kv(s),v=this.kv(a),_=this.Ob(s);_!=-1;_=this.Rb(_))this.gx(_,a);for(_=this.Ob(a);_!=-1;_=this.Rb(_))this.gx(_,s);this.Zo(s,p),this.Zo(a,c),this.$o(s,v),this.$o(a,y),c=this.I(s),p=this.da(s),y=this.da(a),this.Tj(s,this.I(a)),this.Tj(a,c),this.Rl(s,y),this.Rl(a,p),c=this.cd.T(s,2),this.cd.S(s,2,this.cd.T(a,2)),this.cd.S(a,2,c)},l}(),d.gd=O})(Y||(Y={})),function(d){var O=function(S){function h(l,s,a,c){var p=S.call(this)||this;return p.$=new d.l,l===void 0?p.UE():typeof l=="number"?p.VO(l,s,a,c):l instanceof d.Sa?s!==void 0?p.Qu(l,s,a):p.WO(l):l instanceof d.ra?s!==void 0?p.YO(l,s):p.XO(l):l instanceof d.l?p.UO(l):p.UE(),p}return Wt(h,S),h.prototype.Qu=function(l,s,a){this.description=d.ee.og(),this.$.Oa(),l.B()||this.tu(l,s,a)},h.prototype.UO=function(l){this.description=d.ee.og(),this.$.K(l),this.$.normalize()},h.prototype.XO=function(l){if(l==null)throw d.i.N();this.description=l,this.$.Oa()},h.prototype.YO=function(l,s){if(l==null)throw d.i.N();this.description=l,this.$.K(s),this.$.normalize()},h.prototype.UE=function(){this.description=d.ee.og(),this.$.Oa()},h.prototype.WO=function(l){this.description=d.ee.og(),this.$.Oa(),l.B()||this.tu(l)},h.prototype.VO=function(l,s,a,c){this.description=d.ee.og(),this.K(l,s,a,c)},h.prototype.K=function(l,s,a,c){if(this.vc(),typeof l=="number")this.$.K(l,s,a,c);else for(this.Oa(),s=0,a=l.length;s<a;s++)this.Zb(l[s])},h.prototype.Xo=function(l){if(this.vc(),!l.fT())throw d.i.N();this.$.K(l)},h.prototype.Oa=function(){this.vc(),this.$.Oa()},h.prototype.B=function(){return this.$.B()},h.prototype.R=function(){return this.$.R()},h.prototype.ca=function(){return this.$.ca()},h.prototype.gk=function(){return this.$.gk()},h.prototype.Jp=function(){return this.$.Jp()},h.prototype.Ip=function(){return this.$.sf()},h.prototype.Zb=function(l){if(l instanceof d.h)this.vc(),this.$.Zb(l);else if(l instanceof d.l)this.vc(),this.$.Zb(l);else if(l instanceof d.Sa){if(this.vc(),!l.Ac()){var s=l.description;if(this.description!=s&&this.Jl(s),this.B())this.tu(l);else{this.$.Zb(l.D());for(var a=1,c=s.Aa;a<c;a++)for(var p=s.Ed(a),y=d.ra.Va(p),v=0;v<y;v++){var _=l.Uc(p,v),x=this.Tg(p,v);x.Zb(_),this.setInterval(p,v,x)}}}}else if(l instanceof h&&!l.B())for((s=l.description)!=this.description&&this.Jl(s),this.$.Zb(l.$),a=1,c=s.Aa;a<c;a++)for(p=s.kd(a),y=d.ra.Va(p),v=0;v<y;v++)_=l.Tg(p,v),(x=this.Tg(p,v)).Zb(_),this.setInterval(p,v,x)},h.prototype.tu=function(l,s,a){if(s!==void 0){this.$.K(l.D(),s,a),a=1;for(var c=(s=l.description).Aa;a<c;a++)for(var p=s.Ed(a),y=d.ra.Va(p),v=0;v<y;v++){var _=l.Uc(p,v);this.setInterval(p,v,_,_)}}else for(this.$.K(l.ka[0],l.ka[1]),a=1,c=(s=l.description).Aa;a<c;a++)for(p=s.Ed(a),y=d.ra.Va(p),v=0;v<y;v++)_=l.Uc(p,v),this.setInterval(p,v,_,_)},h.prototype.setInterval=function(l,s,a,c){if(a=typeof a=="number"?new d.Nc(a,c):a,this.vc(),l==0)if(s==0)this.$.v=a.oa,this.$.C=a.va;else{if(s!=1)throw d.i.ce();this.$.G=a.oa,this.$.H=a.va}else this.vD(0,l,s,a.oa),this.vD(1,l,s,a.va)},h.prototype.W=function(l,s){this.vc(),this.$.W(l,s)},h.prototype.Oc=function(l){if(l instanceof d.Dd)this.vc(),l.mC(this.$);else if(this.vc(),!this.$.B()){var s=new d.OK;this.Qo(s),s.XS()?s.Oa():l.mC(s)}},h.prototype.copyTo=function(l){if(l.getType()!=this.getType())throw d.i.N();if(l.vc(),l.description=this.description,l.$.K(this.$),l.ka=null,this.ka!=null){l.ou();for(var s=0;s<2*(this.description.Ae.length-2);s++)l.ka[s]=this.ka[s]}},h.prototype.Ia=function(){return new h(this.description)},h.prototype.Ke=function(){return this.$.wF()},h.prototype.Qb=function(){return this.$.yR()},h.prototype.getType=function(){return 197},h.prototype.Db=function(){return 2},h.prototype.bn=function(l){this.copyTo(l)},h.prototype.A=function(l){l.v=this.$.v,l.G=this.$.G,l.C=this.$.C,l.H=this.$.H},h.prototype.Qo=function(l){l.v=this.$.v,l.G=this.$.G,l.C=this.$.C,l.H=this.$.H,l.K(this.$.v,this.$.G,this.Od(0,1,0),this.$.C,this.$.H,this.Od(1,1,0))},h.prototype.Tg=function(l,s){var a=new d.Nc;return a.K(this.Od(0,l,s),this.Od(1,l,s)),a},h.prototype.Hf=function(l,s){s.Nf(this.description);var a=this.description.Aa-1;switch(l){case 0:for(l=0;l<a;l++)for(var c=this.description.kd(l),p=d.ra.Va(c),y=0;y<p;y++)s.setAttribute(c,y,this.Od(0,c,y));s.Cb(this.$.v,this.$.G);break;case 1:for(l=0;l<a;l++)for(c=this.description.kd(l),p=d.ra.Va(c),y=0;y<p;y++)s.setAttribute(c,y,this.Od(1,c,y));s.Cb(this.$.v,this.$.H);break;case 2:for(l=0;l<a;l++)for(c=this.description.kd(l),p=d.ra.Va(c),y=0;y<p;y++)s.setAttribute(c,y,this.Od(0,c,y));s.Cb(this.$.C,this.$.H);break;case 3:for(l=0;l<a;l++)for(c=this.description.kd(l),p=d.ra.Va(c),y=0;y<p;y++)s.setAttribute(c,y,this.Od(1,c,y));s.Cb(this.$.C,this.$.G);break;default:throw d.i.ce()}},h.prototype.mB=function(l,s){l=this.$.mB(l),s.ma(l.x,l.y)},h.prototype.kR=function(l,s){return s*(l.Oq-2)},h.prototype.xF=function(l,s,a){if(this.$.B())throw d.i.fa("empty geometry");if(s==0)return l!=0?a!=0?this.$.H:this.$.C:a!=0?this.$.G:this.$.v;if(a>=d.ra.Va(s))throw d.i.N();var c=this.description.Pf(s);return this.ou(),0<=c?this.ka[this.kR(this.description,l)+this.description.LR(c)-2+a]:d.ra.se(s)},h.prototype.ou=function(){if(this.vc(),this.ka==null&&2<this.description.Ae.length){this.ka=[];for(var l=h.Gg(this.description,0),s=h.Gg(this.description,1),a=0,c=1,p=this.description.Aa;c<p;c++){var y=this.description.kd(c),v=d.ra.Va(y);y=d.ra.se(y);for(var _=0;_<v;_++)this.ka[l+a]=y,this.ka[s+a]=y,a++}}},h.prototype.sn=function(l){if(this.ka!=null)if(2<l.Ae.length){for(var s=d.ee.Iw(l,this.description),a=[],c=h.Gg(this.description,0),p=h.Gg(this.description,1),y=h.Gg(l,0),v=h.Gg(l,1),_=0,x=1,T=l.Aa;x<T;x++){var C=l.kd(x),A=d.ra.Va(C);if(s[x]==-1){var R=d.ra.se(C);for(C=0;C<A;C++)a[y+_]=R,a[v+_]=R,_++}else for(R=this.description.$j(s[x])-2,C=0;C<A;C++)a[y+_]=this.ka[c+R],a[v+_]=this.ka[p+R],_++,R++}this.ka=a}else this.ka=null;this.description=l},h.prototype.Od=function(l,s,a){if(this.$.B())throw d.i.fa("This operation was performed on an Empty Geometry.");if(s==0)return l!=0?a!=0?this.$.H:this.$.C:a!=0?this.$.G:this.$.v;if(a>=d.ra.Va(s))throw d.i.ce();var c=this.description.Pf(s);return 0<=c?(this.ou(),this.ka[h.Gg(this.description,l)+this.description.$j(c)-2+a]):d.ra.se(s)},h.prototype.vD=function(l,s,a,c){if(this.vc(),s==0)l!=0?a!=0?this.$.H=c:this.$.C=c:a!=0?this.$.G=c:this.$.v=c;else{if(a>=d.ra.Va(s))throw d.i.ce();if(!this.hasAttribute(s)){if(d.ra.DG(s,c))return;this.re(s)}s=this.description.Pf(s),this.ou(),this.ka[h.Gg(this.description,l)+this.description.$j(s)-2+a]=c}},h.Gg=function(l,s){return s*(l.Ae.length-2)},h.prototype.Ea=function(l){this.vc();var s=new d.l;return l.A(s),this.$.Ea(s)},h.prototype.isIntersecting=function(l){return l instanceof d.l?this.$.isIntersecting(l):this.$.isIntersecting(l.$)},h.prototype.Ju=function(l,s){this.vc(),l.B()?this.Oa():s!==void 0?this.tu(l,s):this.$.Ju(l.Lg(),l.ih())},h.prototype.offset=function(l,s){this.vc(),this.$.offset(l,s)},h.prototype.normalize=function(){this.vc(),this.$.normalize()},h.prototype.sf=function(l){if(l===void 0){if(l=new d.Sa(this.description),this.B())return l;for(s=this.description.Aa,a=1;a<s;a++)for(c=this.description.Ed(a),p=d.ra.Va(c),y=0;y<p;y++)v=.5*(this.Od(0,c,y)+this.Od(1,c,y)),l.setAttribute(c,y,v);return l.Cb(this.$.gk(),this.$.Jp()),l}if(l.Nf(this.description),this.B())l.Oa();else{for(var s=this.description.Aa,a=1;a<s;a++)for(var c=this.description.kd(a),p=d.ra.Va(c),y=0;y<p;y++){var v=.5*(this.xF(0,c,y)+this.xF(1,c,y));l.setAttribute(c,y,v)}l.Cb(this.$.sf())}},h.prototype.mz=function(){return new d.Sa(this.$.mz())},h.prototype.contains=function(l){return l instanceof d.Sa?!l.B()&&this.$.contains(l.Lg(),l.ih()):this.$.contains(l.$)},h.prototype.dP=function(l){return this.$.contains(l)},h.prototype.Nb=function(l){if(l==this)return!0;if(!(l instanceof h)||this.description!=l.description)return!1;if(this.B())return!!l.B();if(!this.$.Nb(l.$))return!1;for(var s=0,a=2*(this.description.Ae.length-2);s<a;s++)if(this.ka[s]!=l.ka[s])return!1;return!0},h.prototype.cc=function(){var l=this.description.cc();if(l=d.O.Th(l,this.$.cc()),!this.B()&&this.ka!=null)for(var s=0,a=2*(this.description.Ae.length-2);s<a;s++)l=d.O.Th(l,this.ka[s]);return l},h.prototype.es=function(){return this.$.v},h.prototype.gs=function(){return this.$.G},h.prototype.ds=function(){return this.$.C},h.prototype.fs=function(){return this.$.H},h.prototype.mg=function(){return d.pi.gm(this,null)},h.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.$.v+", "+this.$.G+", "+this.$.C+", "+this.$.H+"]"},h}(d.aa);d.Fh=O}(Y||(Y={})),function(d){var O=function(){function S(h,l,s,a){h===void 0?this.Oa():(this.v=h,this.G=l,this.C=s,this.H=a)}return S.construct=function(h,l,s,a){var c=new S;return c.v=h,c.G=l,c.C=s,c.H=a,c},S.prototype.K=function(h,l,s,a){typeof h=="number"?s!==void 0?(this.v=h,this.G=l,this.C=s,this.H=a,this.normalize()):(this.v=h,this.G=l,this.C=h,this.H=l):h instanceof d.h?l!==void 0?(this.v=h.x-.5*l,this.C=this.v+l,this.G=h.y-.5*s,this.H=this.G+s,this.normalize()):(this.v=h.x,this.G=h.y,this.C=h.x,this.H=h.y):h instanceof S?this.K(h.v,h.G,h.C,h.H):h instanceof d.Nc&&(h.B()||l.B()?this.Oa():(this.v=h.oa,this.C=h.va,this.G=l.oa,this.H=l.va))},S.prototype.Zw=function(h,l){if(l!==void 0)if(l==0)this.Oa();else{this.v=h[0].x,this.G=h[0].y,this.C=this.v,this.H=this.G;for(var s=1;s<l;s++){var a=h[s];a.x<this.v?this.v=a.x:a.x>this.C&&(this.C=a.x),a.y<this.G?this.G=a.y:a.y>this.H&&(this.H=a.y)}}else if(h==null||h.length==0)this.Oa();else for(a=h[0],this.K(a.x,a.y),s=1;s<h.length;s++)l=h[s],this.Lk(l.x,l.y)},S.prototype.Oa=function(){this.H=this.C=this.G=this.v=NaN},S.prototype.B=function(){return isNaN(this.v)},S.prototype.Zb=function(h,l){typeof h=="number"?this.B()?(this.v=h,this.G=l,this.C=h,this.H=l):(this.v>h?this.v=h:this.C<h&&(this.C=h),this.G>l?this.G=l:this.H<l&&(this.H=l)):h instanceof d.h||h instanceof d.Nd?this.Zb(h.x,h.y):h instanceof S&&!h.B()&&(this.Zb(h.v,h.G),this.Zb(h.C,h.H))},S.prototype.Lk=function(h,l){this.v>h?this.v=h:this.C<h&&(this.C=h),this.G>l?this.G=l:this.H<l&&(this.H=l)},S.prototype.W=function(h,l){this.B()||(this.v-=h,this.C+=h,this.G-=l,this.H+=l,(this.v>this.C||this.G>this.H)&&this.Oa())},S.prototype.scale=function(h){0>h&&this.Oa(),this.B()||(this.v*=h,this.C*=h,this.G*=h,this.H*=h)},S.prototype.zoom=function(h,l){this.B()||this.K(this.sf(),h*this.R(),l*this.ca())},S.prototype.isIntersecting=function(h){return!this.B()&&!h.B()&&(this.v<=h.v?this.C>=h.v:h.C>=this.v)&&(this.G<=h.G?this.H>=h.G:h.H>=this.G)},S.prototype.HG=function(h){return(this.v<=h.v?this.C>=h.v:h.C>=this.v)&&(this.G<=h.G?this.H>=h.G:h.H>=this.G)},S.prototype.Ea=function(h){return!this.B()&&!h.B()&&(h.v>this.v&&(this.v=h.v),h.C<this.C&&(this.C=h.C),h.G>this.G&&(this.G=h.G),h.H<this.H&&(this.H=h.H),(h=this.v<=this.C&&this.G<=this.H)||this.Oa(),h)},S.prototype.mB=function(h){switch(h){case 0:return d.h.construct(this.v,this.G);case 1:return d.h.construct(this.v,this.H);case 2:return d.h.construct(this.C,this.H);case 3:return d.h.construct(this.C,this.G);default:throw d.i.ce()}},S.prototype.nB=function(h){if(h==null||4>h.length)throw d.i.N();h[0]!=null?h[0].ma(this.v,this.G):h[0]=d.h.construct(this.v,this.G),h[1]!=null?h[1].ma(this.v,this.H):h[1]=d.h.construct(this.v,this.H),h[2]!=null?h[2].ma(this.C,this.H):h[2]=d.h.construct(this.C,this.H),h[3]!=null?h[3].ma(this.C,this.G):h[3]=d.h.construct(this.C,this.G)},S.prototype.wF=function(){return this.B()?0:this.R()*this.ca()},S.prototype.yR=function(){return this.B()?0:2*(this.R()+this.ca())},S.prototype.gk=function(){return(this.C+this.v)/2},S.prototype.Jp=function(){return(this.H+this.G)/2},S.prototype.R=function(){return this.C-this.v},S.prototype.ca=function(){return this.H-this.G},S.prototype.move=function(h,l){this.B()||(this.v+=h,this.G+=l,this.C+=h,this.H+=l)},S.prototype.Ju=function(h,l){if(l!==void 0)this.move(h-this.gk(),l-this.Jp());else if(h instanceof d.h)this.Ju(h.x,h.y);else{if(!(h instanceof d.Sa))throw d.i.N();l=(this.C-this.v)/2;var s=(this.H-this.G)/2;this.v=h.Lg()-l,this.C=h.Lg()+l,this.G=h.ih()-s,this.H=h.ih()+s}},S.prototype.offset=function(h,l){this.v+=h,this.C+=h,this.G+=l,this.H+=l},S.prototype.normalize=function(){if(!this.B()){var h=Math.min(this.v,this.C),l=Math.max(this.v,this.C);this.v=h,this.C=l,h=Math.min(this.G,this.H),l=Math.max(this.G,this.H),this.G=h,this.H=l}},S.prototype.dn=function(h){h.ma(this.v,this.G)},S.prototype.$I=function(h){h.ma(this.C,this.G)},S.prototype.cJ=function(h){h.ma(this.v,this.H)},S.prototype.en=function(h){h.ma(this.C,this.H)},S.prototype.fT=function(){return this.B()||this.v<=this.C&&this.G<=this.H},S.prototype.sf=function(){return d.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},S.prototype.mz=function(){return d.h.construct(this.v,this.G)},S.prototype.contains=function(h,l){if(l!==void 0)return h>=this.v&&h<=this.C&&l>=this.G&&l<=this.H;if(h instanceof d.Sa)return this.contains(h.Lg(),h.ih());if(h instanceof d.h)return this.contains(h.x,h.y);if(h instanceof S)return h.v>=this.v&&h.C<=this.C&&h.G>=this.G&&h.H<=this.H;throw d.i.N()},S.prototype.hm=function(h,l){if(l!==void 0)return h>this.v&&h<this.C&&l>this.G&&l<this.H;if(h instanceof d.h)return this.hm(h.x,h.y);if(h instanceof S)return h.v>this.v&&h.C<this.C&&h.G>this.G&&h.H<this.H;throw d.i.N()},S.prototype.Nb=function(h){return h==this||h instanceof S&&(!(!this.B()||!h.B())||this.v==h.v&&this.G==h.G&&this.C==h.C&&this.H==h.H)},S.prototype.cc=function(){var h=this.v;h=d.O.truncate(h^h>>>32);var l=d.O.Th(h);return h=this.C,h=d.O.truncate(h^h>>>32),l=d.O.Th(h,l),h=this.G,h=d.O.truncate(h^h>>>32),l=d.O.Th(h,l),h=this.H,h=d.O.truncate(h^h>>>32),d.O.Th(h,l)},S.prototype.xr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},S.prototype.zy=function(h,l){var s=this.Zj(h),a=this.Zj(l);if(s&a)return 0;if(!(s|a))return 4;var c=(s!=0?1:0)|(a!=0?2:0);do{var p=l.x-h.x,y=l.y-h.y;if(p>y?s&S.YC?(s&S.ju?(h.y+=y*(this.v-h.x)/p,h.x=this.v):(h.y+=y*(this.C-h.x)/p,h.x=this.C),s=this.Zj(h)):a&S.YC?(a&S.ju?(l.y+=y*(this.v-l.x)/p,l.x=this.v):(l.y+=y*(this.C-l.x)/p,l.x=this.C),a=this.Zj(l)):s!=0?(s&S.ku?(h.x+=p*(this.G-h.y)/y,h.y=this.G):(h.x+=p*(this.H-h.y)/y,h.y=this.H),s=this.Zj(h)):(a&S.ku?(l.x+=p*(this.G-l.y)/y,l.y=this.G):(l.x+=p*(this.H-l.y)/y,l.y=this.H),a=this.Zj(l)):s&S.ZC?(s&S.ku?(h.x+=p*(this.G-h.y)/y,h.y=this.G):(h.x+=p*(this.H-h.y)/y,h.y=this.H),s=this.Zj(h)):a&S.ZC?(a&S.ku?(l.x+=p*(this.G-l.y)/y,l.y=this.G):(l.x+=p*(this.H-l.y)/y,l.y=this.H),a=this.Zj(l)):s!=0?(s&S.ju?(h.y+=y*(this.v-h.x)/p,h.x=this.v):(h.y+=y*(this.C-h.x)/p,h.x=this.C),s=this.Zj(h)):(a&S.ju?(l.y+=y*(this.v-l.x)/p,l.x=this.v):(l.y+=y*(this.C-l.x)/p,l.x=this.C),a=this.Zj(l)),s&a)return 0}while(s|a);return c},S.prototype.Zj=function(h){return(h.x<this.v?1:0)|(h.x>this.C?1:0)<<1|(h.y<this.G?1:0)<<2|(h.y>this.H?1:0)<<3},S.prototype.Bi=function(h){return!this.B()&&(this.R()<=h||this.ca()<=h)},S.prototype.tb=function(h){return h instanceof d.h?Math.sqrt(this.iK(h)):Math.sqrt(this.px(h))},S.prototype.px=function(h){var l=0,s=0,a=this.v-h.C;return a>l&&(l=a),(a=this.G-h.H)>s&&(s=a),(a=h.v-this.C)>l&&(l=a),(a=h.G-this.H)>s&&(s=a),l*l+s*s},S.prototype.iK=function(h){var l=0,s=0,a=this.v-h.x;return a>l&&(l=a),(a=this.G-h.y)>s&&(s=a),(a=h.x-this.C)>l&&(l=a),(a=h.y-this.H)>s&&(s=a),l*l+s*s},S.prototype.cn=function(h){this.B()?h.Oa():h.K(this.v,this.C)},S.ju=1,S.ku=4,S.YC=3,S.ZC=12,S}();d.l=O}(Y||(Y={})),function(d){var O,S;(S=O||(O={}))[S.initialize=0]="initialize",S[S.initializeRed=1]="initializeRed",S[S.initializeBlue=2]="initializeBlue",S[S.initializeRedBlue=3]="initializeRedBlue",S[S.sweep=4]="sweep",S[S.sweepBruteForce=5]="sweepBruteForce",S[S.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",S[S.sweepRedBlue=7]="sweepRedBlue",S[S.sweepRed=8]="sweepRed",S[S.sweepBlue=9]="sweepBlue",S[S.iterate=10]="iterate",S[S.iterateRed=11]="iterateRed",S[S.iterateBlue=12]="iterateBlue",S[S.iterateBruteForce=13]="iterateBruteForce",S[S.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",S[S.resetRed=15]="resetRed",S[S.resetBlue=16]="resetBlue";var h=function(){function l(s,a){this.ci=s,this.dH=a}return l.prototype.nr=function(s,a,c){this.ci.JX(c,s,a,this.dH)},l.prototype.$p=function(s){return this.ci.Rr(s,this.dH)},l}();O=function(){function l(){this.ow=this.oo=this.ff=this.rd=null,this.wq=new d.l,this.Am=this.Hj=this.Ij=this.Ad=this.Ef=this.Ld=this.cw=this.fo=this.qd=this.Eb=null,this.Xb=-1,this.qa=0,this.Nk()}return l.prototype.kr=function(){this.Nk(),this.Pv=!0,this.Eb==null?(this.fo=new d.ia(0),this.Eb=[]):(this.fo.Bh(0),this.Eb.length=0)},l.prototype.ad=function(s,a){if(!this.Pv)throw d.i.Hb();var c=new d.l;c.K(a),this.fo.add(s),this.Eb.push(c)},l.prototype.Fp=function(){if(!this.Pv)throw d.i.Hb();this.Pv=!1,this.Eb!=null&&0<this.Eb.length&&(this.Xb=0,this.Ic=!1)},l.prototype.pK=function(){this.Nk(),this.Ov=!0,this.Eb==null?(this.fo=new d.ia(0),this.Eb=[]):(this.fo.Bh(0),this.Eb.length=0)},l.prototype.JD=function(s,a){if(!this.Ov)throw d.i.Hb();var c=new d.l;c.K(a),this.fo.add(s),this.Eb.push(c)},l.prototype.iF=function(){if(!this.Ov)throw d.i.Hb();this.Ov=!1,this.Eb!=null&&0<this.Eb.length&&this.qd!=null&&0<this.qd.length&&(this.Xb==-1||this.Xb==2?this.Xb=3:this.Xb!=3&&(this.Xb=1),this.Ic=!1)},l.prototype.oK=function(){this.Nk(),this.Nv=!0,this.qd==null?(this.cw=new d.ia(0),this.qd=[]):(this.cw.Bh(0),this.qd.length=0)},l.prototype.ED=function(s,a){if(!this.Nv)throw d.i.Hb();var c=new d.l;c.K(a),this.cw.add(s),this.qd.push(c)},l.prototype.hF=function(){if(!this.Nv)throw d.i.Hb();this.Nv=!1,this.Eb!=null&&0<this.Eb.length&&this.qd!=null&&0<this.qd.length&&(this.Xb==-1||this.Xb==1?this.Xb=3:this.Xb!=3&&(this.Xb=2),this.Ic=!1)},l.prototype.next=function(){if(this.Ic)return!1;for(var s=!0;s;)switch(this.Xb){case 0:s=this.Gz();break;case 1:s=this.rS();break;case 2:s=this.oS();break;case 3:s=this.qS();break;case 4:s=this.UX();break;case 5:s=this.QX();break;case 6:s=this.RX();break;case 7:s=this.SX();break;case 8:s=this.ux();break;case 9:s=this.iC();break;case 10:s=this.Uz();break;case 11:s=this.jT();break;case 12:s=this.gT();break;case 13:s=this.hT();break;case 14:s=this.iT();break;case 15:s=this.kJ();break;case 16:s=this.jJ();break;default:throw d.i.Qa()}return!this.Ic},l.prototype.aC=function(s){this.qa=s},l.prototype.uz=function(s){return this.Eb[s]},l.prototype.az=function(s){return this.qd[s]},l.prototype.nl=function(s){return this.fo.read(s)},l.prototype.hl=function(s){return this.cw.read(s)},l.Tz=function(s){return!(1&~s)},l.eq=function(s){return!(1&s)},l.prototype.Nk=function(){this.Pv=this.Nv=this.Ov=!1,this.Cf=this.Df=this.Rg=this.pe=-1,this.Ic=!0},l.prototype.Gz=function(){if(this.Af=this.Vf=-1,10>this.Eb.length)return this.pe=this.Eb.length,this.Xb=5,!0;this.rd==null&&(this.rd=new d.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new d.ia(0)),this.rd.kr();for(var s=0;s<this.Eb.length;s++){var a=this.Eb[s];this.rd.Br(a.v,a.C)}for(this.rd.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ld.resize(0),s=0;s<2*this.Eb.length;s++)this.Ld.add(s);return this.Kt(this.Ld,2*this.Eb.length,!0),this.pe=2*this.Eb.length,this.Xb=4,!0},l.prototype.rS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.rd==null&&(this.rd=new d.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new d.ia(0)),this.rd.kr();for(var s=0;s<this.Eb.length;s++){var a=this.Eb[s];this.rd.Br(a.v,a.C)}for(this.rd.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ld.resize(0),s=0;s<2*this.Eb.length;s++)this.Ld.add(s);return this.Kt(this.Ld,this.Ld.size,!0),this.pe=this.Ld.size,this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Xb=7,this.jJ()},l.prototype.oS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.ff==null&&(this.ff=new d.sr(!0),this.ow=this.ff.getIterator(),this.Ef=new d.ia(0)),this.ff.kr();for(var s=0;s<this.qd.length;s++){var a=this.qd[s];this.ff.Br(a.v,a.C)}for(this.ff.Fp(),this.Ef.Jb(2*this.qd.length),this.Ef.resize(0),s=0;s<2*this.qd.length;s++)this.Ef.add(s);return this.Kt(this.Ef,this.Ef.size,!1),this.Rg=this.Ef.size,this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Xb=7,this.kJ()},l.prototype.qS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.rd==null&&(this.rd=new d.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new d.ia(0)),this.ff==null&&(this.ff=new d.sr(!0),this.ow=this.ff.getIterator(),this.Ef=new d.ia(0)),this.rd.kr();for(var s=0;s<this.Eb.length;s++){var a=this.Eb[s];this.rd.Br(a.v,a.C)}for(this.rd.Fp(),this.ff.kr(),s=0;s<this.qd.length;s++)a=this.qd[s],this.ff.Br(a.v,a.C);for(this.ff.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ef.Jb(2*this.qd.length),this.Ld.resize(0),this.Ef.resize(0),s=0;s<2*this.Eb.length;s++)this.Ld.add(s);for(s=0;s<2*this.qd.length;s++)this.Ef.add(s);return this.Kt(this.Ld,this.Ld.size,!0),this.Kt(this.Ef,this.Ef.size,!1),this.pe=this.Ld.size,this.Rg=this.Ef.size,this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Xb=7,!0},l.prototype.UX=function(){var s=this.Ld.get(--this.pe),a=s>>1;return l.eq(s)?(this.rd.remove(a),this.pe!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1)):(this.oo.EB(this.Eb[a].v,this.Eb[a].C,this.qa),this.Vf=a,this.Xb=10,!0)},l.prototype.QX=function(){return--this.pe==-1?(this.Af=this.Vf=-1,this.Ic=!0,!1):(this.Rg=this.Vf=this.pe,this.Xb=13,!0)},l.prototype.RX=function(){return--this.pe==-1?(this.Af=this.Vf=-1,this.Ic=!0,!1):(this.Vf=this.pe,this.Rg=this.qd.length,this.Xb=14,!0)},l.prototype.SX=function(){var s=this.Ld.get(this.pe-1),a=this.Ef.get(this.Rg-1),c=this.Rr(s,!0),p=this.Rr(a,!1);return c>p?this.ux():c<p?this.iC():l.Tz(s)?this.ux():l.Tz(a)?this.iC():this.ux()},l.prototype.ux=function(){var s=this.Ld.get(--this.pe),a=s>>1;if(l.eq(s))return this.Df!=-1&&this.Ij.get(a)!=-1?(this.Ad.jd(this.Df,this.Ij.get(a)),this.Ij.set(a,-1)):this.rd.remove(a),this.pe!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1);if(this.Cf!=-1&&0<this.Ad.bs(this.Cf))for(s=this.Ad.rc(this.Cf);s!=-1;){var c=this.Ad.getData(s);this.ff.vj(c),this.Hj.set(c,-1),c=this.Ad.lb(s),this.Ad.jd(this.Cf,s),s=c}return 0<this.ff.size()?(this.ow.EB(this.Eb[a].v,this.Eb[a].C,this.qa),this.Vf=a,this.Xb=12):(this.Df==-1&&(this.Ad==null&&(this.Ad=new d.jp),this.Ij=new d.ia(0),this.Ij.resize(this.Eb.length,-1),this.Ij.Wj(-1,0,this.Eb.length),this.Df=this.Ad.Ph(1)),this.Ij.set(a,this.Ad.addElement(this.Df,a)),this.Xb=7),!0},l.prototype.iC=function(){var s=this.Ef.get(--this.Rg),a=s>>1;if(l.eq(s))return this.Cf!=-1&&this.Hj.get(a)!=-1?(this.Ad.jd(this.Cf,this.Hj.get(a)),this.Hj.set(a,-1)):this.ff.remove(a),this.Rg!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1);if(this.Df!=-1&&0<this.Ad.bs(this.Df))for(s=this.Ad.rc(this.Df);s!=-1;){var c=this.Ad.getData(s);this.rd.vj(c),this.Ij.set(c,-1),c=this.Ad.lb(s),this.Ad.jd(this.Df,s),s=c}return 0<this.rd.size()?(this.oo.EB(this.qd[a].v,this.qd[a].C,this.qa),this.Af=a,this.Xb=11):(this.Cf==-1&&(this.Ad==null&&(this.Ad=new d.jp),this.Hj=new d.ia(0),this.Hj.resize(this.qd.length,-1),this.Hj.Wj(-1,0,this.qd.length),this.Cf=this.Ad.Ph(0)),this.Hj.set(a,this.Ad.addElement(this.Cf,a)),this.Xb=7),!0},l.prototype.Uz=function(){if(this.Af=this.oo.next(),this.Af!=-1)return!1;var s=this.Ld.get(this.pe)>>1;return this.rd.vj(s),this.Xb=4,!0},l.prototype.jT=function(){if(this.Vf=this.oo.next(),this.Vf!=-1)return!1;this.Af=this.Vf=-1;var s=this.Ef.get(this.Rg)>>1;return this.ff.vj(s),this.Xb=7,!0},l.prototype.gT=function(){if(this.Af=this.ow.next(),this.Af!=-1)return!1;var s=this.Ld.get(this.pe)>>1;return this.rd.vj(s),this.Xb=7,!0},l.prototype.hT=function(){if(--this.Rg==-1)return this.Xb=5,!0;this.wq.K(this.Eb[this.pe]);var s=this.Eb[this.Rg];return this.wq.W(this.qa,this.qa),!this.wq.isIntersecting(s)||(this.Af=this.Rg,!1)},l.prototype.iT=function(){if(--this.Rg==-1)return this.Xb=6,!0;this.wq.K(this.Eb[this.pe]);var s=this.qd[this.Rg];return this.wq.W(this.qa,this.qa),!this.wq.isIntersecting(s)||(this.Af=this.Rg,!1)},l.prototype.kJ=function(){return this.rd==null?(this.Ic=!0,!1):(this.pe=this.Ld.size,0<this.rd.size()&&this.rd.reset(),this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Ic=!1,!0)},l.prototype.jJ=function(){return this.ff==null?(this.Ic=!0,!1):(this.Rg=this.Ef.size,0<this.ff.size()&&this.ff.reset(),this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Ic=!1,!0)},l.prototype.Kt=function(s,a,c){this.Am==null&&(this.Am=new d.Xt),c=new h(this,c),this.Am.sort(s,0,a,c)},l.prototype.JX=function(s,a,c,p){var y=this;s.Vd(a,c,function(v,_){var x=y.Rr(v,p),T=y.Rr(_,p);return x<T||x==T&&l.eq(v)&&l.Tz(_)?-1:1})},l.prototype.Rr=function(s,a){var c=.5*this.qa;return a?(a=this.Eb[s>>1],l.eq(s)?a.G-c:a.H+c):(a=this.qd[s>>1],l.eq(s)?a.G-c:a.H+c)},l}(),d.xC=O}(Y||(Y={})),function(d){var O=function(){function S(){}return S.construct=function(h,l,s,a,c,p){var y=new S;return y.v=h,y.G=l,y.Ye=s,y.C=a,y.H=c,y.Bg=p,y},S.prototype.Oa=function(){this.Ye=this.v=NaN},S.prototype.B=function(){return isNaN(this.v)},S.prototype.XS=function(){return isNaN(this.Ye)},S.prototype.K=function(h,l,s,a,c,p){a!==void 0?typeof h=="number"?(this.v=h,this.G=l,this.Ye=s,this.C=a,this.H=c,this.Bg=p):(this.v=h.x-.5*l,this.C=this.v+l,this.G=h.y-.5*s,this.H=this.G+s,this.Ye=h.z-.5*a,this.Bg=this.Ye+a):(this.v=h,this.G=l,this.Ye=s,this.C=h,this.H=l,this.Bg=s)},S.prototype.move=function(h){this.v+=h.x,this.G+=h.y,this.Ye+=h.z,this.C+=h.x,this.H+=h.y,this.Bg+=h.z},S.prototype.copyTo=function(h){h.v=this.v,h.G=this.G,h.C=this.C,h.H=this.H},S.prototype.Lk=function(h,l,s){this.v>h?this.v=h:this.C<h&&(this.C=h),this.G>l?this.G=l:this.H<l&&(this.H=l),isNaN(this.Ye)==0?this.Ye>s?this.Ye=s:this.Bg<s&&(this.Bg=s):this.Bg=this.Ye=s},S.prototype.Zb=function(h,l,s){if(typeof h=="number")this.B()?(this.v=h,this.G=l,this.Ye=s,this.C=h,this.H=l,this.Bg=s):this.Lk(h,l,s);else if(h instanceof d.Nd)this.Zb(h.x,h.y,h.z);else{if(!(h instanceof S))throw d.i.N();h.B()||(this.Zb(h.v,h.G,h.Ye),this.Zb(h.C,h.H,h.Bg))}},S.prototype.construct=function(h,l,s){h.B()||l.B()?this.Oa():(this.v=h.oa,this.C=h.va,this.G=l.oa,this.H=l.va,this.Ye=s.oa,this.Bg=s.va)},S.prototype.nB=function(h){if(h==null||8>h.length)throw d.i.N();h[0]=new d.Nd(this.v,this.G,this.Ye),h[1]=new d.Nd(this.v,this.H,this.Ye),h[2]=new d.Nd(this.C,this.H,this.Ye),h[3]=new d.Nd(this.C,this.G,this.Ye),h[4]=new d.Nd(this.v,this.G,this.Bg),h[5]=new d.Nd(this.v,this.H,this.Bg),h[6]=new d.Nd(this.C,this.H,this.Bg),h[7]=new d.Nd(this.C,this.G,this.Bg)},S.prototype.Zw=function(h){if(h==null||h.length==0)this.Oa();else{var l=h[0];for(this.K(l.x,l.y,l.z),l=1;l<h.length;l++){var s=h[l];this.Lk(s.x,s.y,s.z)}}},S}();d.OK=O}(Y||(Y={})),function(d){(function(O){O.Qa=function(){var S=Error();return S.message="Internal Error",S},O.Ie=function(){var S=Error();return S.message="Not Implemented",S},O.Xk=function(){var S=Error();return S.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",S},O.Hb=function(){var S=Error();return S.message="Invalid Call",S},O.N=function(S){var h=Error();return h.message="Illegal Argument Exception",S!==void 0&&(h.message+=": "+S),h},O.fu=function(S){var h=Error();return h.message=S!==void 0?"Runtime Exception: "+S:"Runtime Exception.",h},O.fa=function(S){var h=Error();return h.message="Geometry Exception: "+S,h},O.GK=function(){var S=Error();return S.message="Assert Failed Exception",S},O.ce=function(){var S=Error();return S.message="IndexOutOfBoundsException",S},O.WC=function(){var S=Error();return S.message="UserCancelException",S}})(d.i||(d.i={}))}(Y||(Y={})),function(d){(d=d.bm||(d.bm={}))[d.forward=0]="forward",d[d.reverse=1]="reverse"}(Y||(Y={})),function(d){var O=function(){function l(s,a){this.Wa=s,this.FH=a,this.LH=-1,this.sl=!1}return l.prototype.qe=function(){},l.prototype.next=function(){if(++this.LH==this.FH.I())return null;var s=this.FH.Na(this.LH);s.scale(this.Wa.ec);var a=new d.Da;return this.Wa.sy(s,this.sl,a),a},l.prototype.La=function(){return 0},l}(),S=function(){function l(s,a,c){this.Wa=s,this.rw=a,this.Xn=!1,this.co=c,this.bw=[0],this.sk=[0],this.Nj=[0],this.Gs=[0],this.sl=!1,this.qq=new d.Da,this.uk=[]}return l.prototype.qe=function(){},l.prototype.next=function(){if(this.Xn){this.Xn=!1,this.sd.ha();var s=d.aa.jg(this.qq);return d.Fg.Mk(s,this.Wa.Aq,!0,!0,this.Wa.Ub)}if(this.sd==null&&(this.sd=this.rw.Ga(),this.sd.$a(),this.co!=null&&this.co.Yk(null,0)),!this.sd.Ha()){if(!this.sd.$a())return null;this.co!=null&&this.co.Yk(null,0)}s=null,this.sk[0]=0,this.FA=this.bw[0]=0,this.di=NaN,this.Xn=!1;for(var a=this.uk.length=0,c=new d.h,p=new d.h,y=[0];this.sd.Ha()&&8>this.FA;){var v=this.sd.ha();if(c.L(v.ac()),p.L(v.wc()),c.scale(this.Wa.ec),p.scale(this.Wa.ec),d.cj.Mu(c,p)?c.x=p.x:d.cj.Ku(c,p)&&(p.x=c.x),this.uk.length=0,d.cj.tF(this.Wa.Tb,this.Wa.kc,this.Wa.ze,c,p,this.Wa.QA,this.Wa.Zs,y,this.Nj,this.Gs,this.uk,this.bw),this.co!=null&&(v=this.uk.slice(0),this.co.qG(this.co.da()-1,v,v.length-1)),d.cj.Lu(c,p)?(this.qq.Oa(),this.Wa.sy(c,this.sl,this.qq),this.Xn=!0):(this.qq.Oa(),this.Xn=this.xy(y[0],this.qq)),this.Xn){if(this.sd.li(),this.sd.Ez()){this.sd.li(),this.sd.ha();break}this.sd.DW();break}s==null&&(s=new d.Da).Yk(null,0),this.OD(s),a++}if(this.bw[0]=0,0<a){for(y=this.sd.wb();0<a;)this.sd.li(),c.L(this.rw.Na(this.sd.wb())),p.L(this.rw.Na(this.sd.ik())),c.scale(this.Wa.ec),p.scale(this.Wa.ec),this.sl&&(d.cj.Mu(c,p)?c.x=p.x:d.cj.Ku(c,p)&&(p.x=c.x)),this.uk.length=0,d.cj.tF(this.Wa.Tb,this.Wa.kc,this.Wa.ze,p,c,this.Wa.QA,this.Wa.Zs,null,this.Nj,this.Gs,this.uk,this.bw),this.OD(s),a--;return c.L(this.rw.Na(this.sd.wb())),c.scale(this.Wa.ec),h.Hr(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,c,this.di+1.570796326794897,this.di+4.71238898038469,this.Wa.ao,this.sl,this.sk,s,NaN,NaN),this.sd.Vb(y),this.sd.ha(),a=d.ta.kj(null,s,!0),d.Fg.Mk(s,a,!0,!0,this.Wa.Ub)}return this.Xn=!1,this.sd.ha(),s=d.aa.jg(this.qq),d.Fg.Mk(s,this.Wa.Aq,!0,!0,this.Wa.Ub)},l.prototype.OD=function(s){var a=this.uk[0],c=this.Nj[0]-1.570796326794897,p=this.Gs[0]+1.570796326794897;if(!isNaN(this.di)){if(this.di>=this.Nj[0]){var y=this.di+1.570796326794897;c=y+3.141592653589793-(this.di-this.Nj[0])}else c=(y=this.di+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Nj[0]-this.di));var v=!(this.di>=this.Nj[0]&&3.141592653589793>=this.di-this.Nj[0])&&!(this.di<this.Nj[0]&&3.141592653589793<=this.Nj[0]-this.di),_=!1;if(Math.abs(c-y)<=.5*this.Wa.ao)if(v){var x=s.Na(s.I()-2);x.scale(this.Wa.ec);var T=new d.ga(0);for(d.kb.Xy(this.Wa.Tb,this.Wa.kc,a.x,a.y,x.x,x.y,T),x=T.u;x<=y;)x+=6.283185307179586;for(;x>y;)x-=6.283185307179586;x<c&&(_=!0)}else _=!0;_?(s.DB(0,s.I()-1),this.sl||((a=new d.h).L(s.Na(s.I()-1)),a.scale(this.Wa.ec),-3.141592653589793>a.x-this.sk[0]?this.sk[0]-=6.283185307179586:3.141592653589793<a.x-this.sk[0]&&(this.sk[0]+=6.283185307179586)),v||(c=.5*(c+y))):(v?((y=new d.h).L(a),y.scale(1/this.Wa.ec),s.wf(0,-1,y)):h.Hr(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,this.uk[0],y,c,this.Wa.ao,this.sl,this.sk,s,NaN,NaN),this.FA+=1)}h.qy(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,this.Wa.ze,this.uk,c,p,this.sl,this.sk,s),this.di=this.Gs[0]},l.prototype.xy=function(s,a){return this.Wa.xy(this.uk,s,this.Nj[0],this.Gs[0],this.sl,a)},l.prototype.La=function(){return 0},l}(),h=function(){function l(){}return l.buffer=function(s,a,c,p,y,v){if(s==null)throw d.i.N("Geometry::Geodesic_bufferer::buffer");if(s.B())return new d.Da(s.description);var _=new l;_.Qg=a,_.Jc=d.cb.sc(a);var x=d.cb.vv(_.Jc);if(_.Ub=v,_.Tb=d.cb.ev(_.Jc),_.kc=x*(2-x),_.ec=_.Jc.Hd().ai,_.qa=_.Qg.Kn(),_.Aq=_.Jc.Kn(),_.Zs=_.Aq*_.ec,_.zq=1.570796326794897/_.ec,_.OY=3.141592653589793/_.ec,_.Js=6.283185307179586/_.ec,_.PY=_.Js/6,_.LA=0,_.NY=1.5707963267948966*_.Tb/_.LA,c==4?(_.ze=2,_.Wv=!0):(_.ze=c,_.Wv=!1),_.Ka=p,_.rb=Math.abs(p),isNaN(y)||.001>y?_.xX():_.$n=y,c=s.getType(),d.aa.yd(c)?((c=new d.Ta(s.description)).oc(s,!0),s=c,c=1607):c==197&&(c=new d.l,s.A(c),c.R()<=_.qa||c.ca()<=_.qa?((c=new d.Ta(s.description)).ad(s,!1),s=c,c=1607):((c=new d.Da(s.description)).ad(s,!1),s=c,c=1736)),_.yX(),d.aa.Rn(c)||_.zX(),_.rb<=.5*_.$n)return c!=1736?new d.Da(s.description):_.Wv?s:d.cj.Qr(s,_.Qg,_.ze,_.QA,-1,v);if(0>_.Ka&&c!=1736)return new d.Da(s.description);if(_.Wv&&d.aa.Hc(c)?(a=d.cj.Qr(s,a,4,NaN,_.$n,v),s=d.cb.zh(a,_.Qg,_.Jc)):s=d.cb.zh(s,_.Qg,_.Jc),(s=d.Hh.lj(s,_.Jc)).B())return new d.Da(s.description);switch(!_.Wv&&d.aa.Hc(c)&&(s=d.cj.pI(_.ec,s)),s=l.KX(s,_.Jc),c){case 1736:a=_.UN(s);break;case 1607:a=_.VN(s);break;case 550:a=_.SN(s);break;case 33:a=_.TN(s);break;default:throw d.i.fa("corrupted_geometry")}return(_=d.cb.zh(a,_.Jc,_.Qg)).Jl(s.description),_},l.prototype.UN=function(s){var a=new d.Da;s=new S(this,s,a),s=d.Gh.local().V(s,this.Jc,this.Ub).next(),s=d.ip.nj(s,this.Jc,2);var c=new d.Dd;return c.scale(1/this.ec,1/this.ec),a.Oc(c),a=d.ip.nj(a,this.Jc,2),0<=this.Ka?d.Gh.local().V(a,s,this.Jc,this.Ub):d.kp.local().V(a,s,this.Jc,this.Ub)},l.prototype.VN=function(s){return s=new S(this,s,null),s=d.Gh.local().V(s,this.Jc,this.Ub).next(),d.ip.nj(s,this.Jc,2)},l.prototype.SN=function(s){return s=new O(this,s),s=d.Gh.local().V(s,this.Jc,this.Ub).next(),d.ip.nj(s,this.Jc,2)},l.prototype.TN=function(s){(s=s.D()).scale(this.ec);var a=new d.Da;return this.sy(s,!1,a),d.ip.nj(a,this.Jc,2)},l.prototype.xy=function(s,a,c,p,y,v){var _=s[0],x=s[s.length-1],T=_.y>x.y?_.y:x.y,C=d.F.q(this.Tb,this.kc,_.y<x.y?_.y:x.y);if(T=d.F.q(this.Tb,this.kc,T),.001<this.LA-(C+a+this.rb)&&.001<this.LA+(T-a-this.rb))return!1;C=(a=c-1.570796326794897)-3.141592653589793,T=a+3.141592653589793;var A=(c=p+1.570796326794897)+3.141592653589793,R=[NaN],F=[NaN],N=[NaN],B=[NaN];if(p=!1,l.dJ(this.Tb,this.kc,this.rb,_,a,C,x,c,R,F),l.dJ(this.Tb,this.kc,this.rb,x,A,c,_,C,N,B),(c<R[0]&&R[0]<A||c<F[0]&&F[0]<A)&&(p=!0),p||(C<N[0]&&N[0]<a||C<B[0]&&B[0]<a)&&(p=!0),!p&&y)return!1;for(var q=[],U=s.length-1;0<=U;U--)q.push(s[U]);return v.Oa(),v.Yk(null,0),U=[0],l.qy(this.Tb,this.kc,this.ec,this.rb,this.ze,s,a,c,y,U,v),l.Hr(this.Tb,this.kc,this.ec,this.rb,x,c,A,this.ao,y,U,v,R[0],F[0]),l.qy(this.Tb,this.kc,this.ec,this.rb,this.ze,q,A,T,y,U,v),l.Hr(this.Tb,this.kc,this.ec,this.rb,_,C,a,this.ao,y,U,v,N[0],B[0]),s=!1,y||(s=this.IE(this.ec,v)),p||s},l.prototype.sy=function(s,a,c){c.Oa(),c.Yk(null,0),l.Hr(this.Tb,this.kc,this.ec,this.rb,s,-this.ao,6.283185307179586,this.ao,a,[0],c,NaN,NaN),a||this.IE(this.ec,c)},l.prototype.IE=function(s,a){var c=this.vO(s,a);return s=this.wO(s,a),c||s},l.prototype.vO=function(s,a){var c=a.I(),p=!1,y=new d.l;if(a.A(y),!d.s.Y(y.H*s,1.570796326794897)&&!d.s.Y(y.G*s,-1.570796326794897))return!1;var v=new d.h;for(--c;0<=c;c--)a.D(c,v),(v.y==y.H&&d.s.Y(v.y*s,1.570796326794897)||v.y==y.G&&d.s.Y(v.y*s,-1.570796326794897))&&(p=!0,this.OI(v,c,a));return p},l.prototype.wO=function(s,a){var c=a.Na(0),p=a.Na(a.I()-1);return 3.141592653589793<Math.abs(c.x-p.x)*s?(this.VV(a),!0):this.uO(a)},l.prototype.uO=function(s){return 0>s.Ke()&&(this.UV(s),!0)},l.prototype.OI=function(s,a,c){var p=c.I(),y=0<a?a-1:p-1;if(p=c.Na(a<p-1?a+1:0),y=c.Na(y),!d.s.Y(p.y,s.y)&&!d.s.Y(p.x,s.x)){var v=new d.h;v.ma(p.x,s.y),c.Cb(a,v)}d.s.Y(y.y,s.y)||d.s.Y(y.x,s.x)||((p=new d.h).ma(y.x,s.y),c.wf(0,a,p))},l.prototype.VV=function(s){var a=new d.Da,c=new d.Da,p=new d.Dd,y=s.Na(0),v=s.Na(s.I()-1),_=new d.h;y.x>v.x?(v=this.zq,p.gg(-this.Js,0)):(v=-this.zq,p.gg(this.Js,0)),a.add(s,!1),s.Oa(),c.add(a,!1),c.Oc(p),y=new d.l,c.A(y),y.W((this.Js-y.R())/2,0),y.G=-this.zq,y.H=this.zq;for(var x=0;x<c.I();x++)c.D(x,_),a.wf(0,-1,_);for(c.Oc(p),x=0;x<c.I();x++)c.D(x,_),a.wf(0,-1,_);c=a.Na(0),p=a.Na(a.I()-1),_.ma(p.x,v),a.wf(0,-1,_),_.ma(.5*(p.x+c.x),v),a.wf(0,-1,_),_.ma(c.x,v),a.wf(0,-1,_),a=d.Hh.ks(a,this.Jc,2,!0,y.v),a=d.Hh.ks(a,this.Jc,2,!0,y.C),a=d.Ud.clip(a,y,this.Aq,NaN),s.add(a,!1)},l.prototype.UV=function(s){var a=new d.l;s.A(a),a.W((this.Js-a.R())/2,0),a.G=-this.zq,a.H=this.zq,s.Yk(null,0);var c=new d.h;c.ma(a.v,a.G),s.wf(1,-1,c),c.ma(a.v,a.H),s.wf(1,-1,c),c.ma(.5*(a.v+a.C),a.H),s.wf(1,-1,c),c.ma(a.C,a.H),s.wf(1,-1,c),c.ma(a.C,a.G),s.wf(1,-1,c),c.ma(.5*(a.v+a.C),a.G),s.wf(1,-1,c)},l.qy=function(s,a,c,p,y,v,_,x,T,C,A){var R=null;T||((R=new d.h).Rc(),0<A.I()&&(R.L(A.Na(A.I()-1)),R.scale(c)));var F=new d.ga(0),N=new d.ga(0),B=new d.ga(0),q=new d.h,U=new d.h,K=v[v.length-1];c=1/c;for(var X=0;X<v.length;X++){var te=v[X];if(X==0)var ae=_;else X==v.length-1?ae=x:(d.kb.wd(s,a,K.x,K.y,te.x,te.y,null,null,F,y),ae=F.u-1.570796326794897);d.kb.yi(s,a,te.x,te.y,p,ae,N,B),T?U.ma(N.u,B.u):(q.ma(N.u,B.u),l.gJ(te.x,q.x,R.x,C),U.ma(C[0]+q.x,q.y),R.L(U)),U.scale(c),A.wf(0,-1,U)}},l.Hr=function(s,a,c,p,y,v,_,x,T,C,A,R,F){if(!(_-v<x)){var N=new d.ga(0),B=new d.ga(0),q=new d.h,U=new d.h,K=null;T||((K=new d.h).Rc(),0<A.I()&&(K.L(A.Na(A.I()-1)),K.scale(c)));var X=d.O.truncate(Math.ceil(v/x)),te=X++*x;for(te==v&&(te=X++*x),c=1/c;te<_+x&&(v<R&&R<te?(te=R,X--):v<F&&F<te&&(te=F,X--),!(te>=_));)d.kb.yi(s,a,y.x,y.y,p,te,N,B),T?U.ma(N.u,B.u):(q.ma(N.u,B.u),l.gJ(y.x,q.x,K.x,C),U.ma(C[0]+q.x,q.y),K.L(U)),U.scale(c),A.wf(0,-1,U),v=te,te=X++*x}},l.dJ=function(s,a,c,p,y,v,_,x,T,C){var A=new d.h,R=new d.h,F=new d.ga(0),N=new d.ga(0);for(d.kb.yi(s,a,p.x,p.y,c,y,F,N),A.ma(F.u,N.u),d.kb.yi(s,a,p.x,p.y,c,v,F,N),R.ma(F.u,N.u),c=new d.ga(0),d.kb.Xy(s,a,_.x,_.y,A.x,A.y,c),T[0]=c.u,d.kb.Xy(s,a,_.x,_.y,R.x,R.y,c),C[0]=c.u;T[0]<=C[0];)T[0]+=6.283185307179586;for(;T[0]>C[0];)T[0]-=6.283185307179586;for(;T[0]>=x;)T[0]-=6.283185307179586,C[0]-=6.283185307179586;for(;T[0]<x;)T[0]+=6.283185307179586,C[0]+=6.283185307179586},l.gJ=function(s,a,c,p){if(isNaN(c)){for(;3.141592653589793<p[0]+a-s;)p[0]-=6.283185307179586;for(;3.141592653589793<s-(p[0]+a);)p[0]+=6.283185307179586}else 3.141592653589793<p[0]+a-c?p[0]-=6.283185307179586:3.141592653589793<c-(p[0]+a)&&(p[0]+=6.283185307179586)},l.KX=function(s,a){var c=s.getType(),p=d.aa.Hc(c)?s.da():c==550?s.I():1;if(p==1)return s;var y=new d.ia(0);y.resize(p);for(var v=[],_=new d.l,x=0;x<p;x++){if(y.write(x,x),d.aa.Hc(c)){s.Rj(x,_);var T=_.sf()}else T=s.Na(x);T=d.XK.$X(a,T),v[x]=T}for(y.Vd(0,y.size,function(C,A){return v[C]<v[A]?-1:v[C]>v[A]?1:0}),a=s.Ia(),x=0;x<p;x++)_=y.read(x),d.aa.Hc(c)?a.addPath(s,_,!0):a.Fd(s,_,_+1);return a},l.prototype.yX=function(){var s=Math.min(3.141592653589793*this.Tb-this.rb,this.rb);s=Math.min(s,.39269908169872414*this.Tb);var a=new d.h;a.ma(0,10*this.ec);var c=45*this.ec,p=new d.ga(0),y=new d.ga(0),v=new d.ga(0),_=new d.ga(0),x=new d.ga(0),T=new d.ga(0),C=new d.ga(0),A=new d.ga(0),R=new d.h,F=new d.h,N=new d.h,B=new d.h;d.kb.yi(this.Tb,this.kc,a.x,a.y,s,0,p,y),R.ma(p.u,y.u),d.kb.yi(this.Tb,this.kc,a.x,a.y,s,c,v,_),F.ma(v.u,_.u),p=new d.ga(0),y=new d.ga(0);for(var q=new d.ga(0);d.kb.yi(this.Tb,this.kc,a.x,a.y,s,.5*(0+c),x,T),N.ma(x.u,T.u),d.kb.wd(this.Tb,this.kc,R.x,R.y,F.x,F.y,p,y,null,2),d.kb.oj(this.Tb,this.kc,R.x,R.y,.5*p.u,y.u,C,A,2),B.ma(C.u,A.u),d.kb.wd(this.Tb,this.kc,N.x,N.y,B.x,B.y,q,null,null,2),!(q.u<=this.$n);)c*=.9,d.kb.yi(this.Tb,this.kc,a.x,a.y,s,c,v,_),F.ma(v.u,_.u);this.ao=6.283185307179586/Math.ceil(6.283185307179586/(c-0))},l.prototype.zX=function(){var s=Math.min(3.141592653589793*this.Tb-this.rb,this.rb);s=Math.min(s,.39269908169872414*this.Tb);var a=new d.h,c=new d.h;a.ma(0,10*this.ec),c.ma(10*this.ec,10*this.ec);var p=new d.ga(0),y=new d.ga(0),v=new d.ga(0);d.kb.wd(this.Tb,this.kc,a.x,a.y,c.x,c.y,v,p,y,this.ze);var _=new d.ga(0),x=new d.ga(0),T=new d.ga(0),C=new d.ga(0),A=new d.h,R=new d.ga(0),F=new d.ga(0),N=new d.ga(0),B=new d.ga(0),q=new d.ga(0),U=new d.ga(0),K=new d.ga(0),X=new d.ga(0),te=new d.ga(0),ae=new d.h,ge=new d.h,Ee=new d.h,Ae=new d.h,Me=1;p=p.u,y=y.u+1.570796326794897,v=v.u,d.kb.yi(this.Tb,this.kc,a.x,a.y,s,p-1.570796326794897,F,N),ae.ma(F.u,N.u),d.kb.yi(this.Tb,this.kc,c.x,c.y,s,y,B,q),ge.ma(B.u,q.u),F=new d.ga(0),N=new d.ga(0),y=new d.ga(0);for(var He=new d.ga(0);d.kb.oj(this.Tb,this.kc,a.x,a.y,.5*(0+Me)*v,p,_,x,this.ze),A.ma(_.u,x.u),d.kb.wd(this.Tb,this.kc,a.x,a.y,A.x,A.y,null,null,R,this.ze),d.kb.yi(this.Tb,this.kc,A.x,A.y,s,R.u+1.570796326794897,U,K),Ee.ma(U.u,K.u),d.kb.wd(this.Tb,this.kc,ae.x,ae.y,ge.x,ge.y,F,N,null,2),d.kb.oj(this.Tb,this.kc,ae.x,ae.y,.5*F.u,N.u,X,te,2),Ae.ma(X.u,te.u),d.kb.wd(this.Tb,this.kc,Ee.x,Ee.y,Ae.x,Ae.y,y,null,null,2),!(y.u<=this.$n);)Me*=.9,d.kb.oj(this.Tb,this.kc,a.x,a.y,Me*v,p,T,C,this.ze),c.ma(T.u,C.u),d.kb.wd(this.Tb,this.kc,a.x,a.y,c.x,c.y,null,null,He,this.ze),d.kb.yi(this.Tb,this.kc,c.x,c.y,s,He.u+1.570796326794897,B,q),ge.ma(B.u,q.u);1e5<(s=Me*v)&&(s=1e5),this.QA=s},l.prototype.xX=function(){var s=5e4<this.rb?100:1e4<this.rb?10:1;500>this.rb/s&&(s=this.rb/500),.01>s&&(s=.01),this.$n=s},l}();d.VK=h}(Y||(Y={})),function(d){var O=function(){function S(){}return S.Mf=function(h,l){var s=new d.h;s.L(l),h.push(s)},S.up=function(h,l){h.add(l.x),h.add(l.y)},S.hB=function(h){h.Bh(h.size-2)},S.oB=function(h,l){l.ma(h.get(h.size-2),h.get(h.size-1))},S.Qr=function(h,l,s,a,c,p){if(h==null)throw d.i.N();var y=h.getType();if(h.B()||d.aa.Rn(y))return h;var v=new S;v.Qg=l,v.Jc=d.cb.sc(l);var _=d.cb.vv(v.Jc);if(v.Ub=p,v.Tb=d.cb.ev(v.Jc),v.kc=_*(2-_),v.ec=v.Jc.Hd().ai,v.Aq=v.Jc.Kn(),v.Zs=v.Aq*v.ec,v.AA=a,v.zA=c,v.ze=s,y==197?(s=new d.Da(h.description)).ad(h,!1):d.aa.yd(y)?(s=new d.Ta(h.description)).oc(h,!0):s=h,v.ze!=4){if((l=v.Qg.Nb(v.Jc)==0?d.cb.zh(s,v.Qg,v.Jc):d.Hh.lj(s,v.Jc)).B())return l;l=S.pI(v.ec,l),l=v.Zy(l),l=d.ip.nj(l,v.Jc,v.ze),v=d.cb.zh(l,v.Jc,v.Qg)}else{if(d.Eg.Sb(l)==2?(h=d.cb.ml(),(l=d.Xj.local().V(s,h,l,p))==h&&(l=new d.Da,h.copyTo(l))):l=d.Hh.lj(s,v.Jc),l.B())return l;v=v.CX(l)}return v},S.pI=function(h,l){var s=new d.l;if(l.xc(s),3.141592653589793>s.R()*h)return l;var a=!1;s=l.Ga();for(var c=new d.h,p=new d.h;s.$a();)for(;s.Ha();){var y=s.ha();if(c.L(y.ac()),p.L(y.wc()),c.scale(h),p.scale(h),3.141592653589793<Math.abs(c.x-p.x)){var v=S.Lu(c,p);if(!v){a=!0;break}if(6.283185307179586<Math.abs(c.x-p.x)){a=!0;break}}}if(!a)return l;a=l.Ia();var _=1<l.description.Aa,x=new d.h,T=new d.h,C=new d.h,A=new d.h,R=new d.Sa;for(s.Zi();s.$a();)for(var F=NaN,N=[0];s.Ha();){if(y=s.ha(),c.L(y.ac()),p.L(y.wc()),c.scale(h),p.scale(h),isNaN(F)?(S.Wi(c.x,NaN,N),T.L(c)):T.L(C),F=T.x,v=S.Lu(c,p)){if(6.283185307179586<p.x-c.x)for(;6.283185307179586<p.x-c.x;)p.x-=6.283185307179586;if(-6.283185307179586>p.x-c.x)for(;-6.283185307179586>p.x-c.x;)p.x+=6.283185307179586;S.Wi(p.x,NaN,N),C.L(p)}else x.L(p),S.AU(x),S.Wi(x.x,F,N),C.ma(N[0]+x.x,x.y);.5>Math.abs(C.x-p.x)&&C.L(p),_?(y.Tw(0,R),A.L(T),A.scale(1/h),R.Cb(A),(v=s.vm())?a.nf(R):a.lineTo(R),s.Qn()&&!l.dc(s.gb)&&(y.Tw(1,R),A.L(C),A.scale(1/h),R.Cb(A),a.lineTo(R))):((v=s.vm())&&a.Hz(null,0),y=a.da()-1,A.L(T),A.scale(1/h),a.wf(y,-1,A),s.Qn()&&!l.dc(s.gb)&&(A.L(C),A.scale(1/h),a.wf(y,-1,A)))}return a},S.tF=function(h,l,s,a,c,p,y,v,_,x,T,C){var A=new d.h,R=new d.h,F=0<a.compare(c);S.fJ(F,a,c,A,R),S.uF(h,l,s,A,R,p,NaN,y,v,_,x,null,T,C),F&&S.fC(_,x,null,T)},S.prototype.Zy=function(h){var l=h.Ia(),s=h.Ga(),a=[],c=null,p=null,y=1<h.description.Aa;y&&(c=new d.be(0),p=new d.ig);for(var v=[0],_=new d.h,x=new d.h,T=new d.h,C=new d.h;s.$a();)for(v[0]=0;s.Ha();){var A=s.ha();_.L(A.ac()),x.L(A.wc()),_.scale(this.ec),x.scale(this.ec);var R=0<_.compare(x);S.fJ(R,_,x,T,C),a.length=0,c!=null&&c.Bh(0),0<this.AA?S.uF(this.Tb,this.kc,this.ze,T,C,this.AA,this.zA,this.Zs,null,null,null,y?c:null,a,v):S.aR(this.Tb,this.kc,this.ze,T,C,this.zA,this.Zs,y?c:null,a,v),R&&S.fC(null,null,y?c:null,a),a[0].L(A.ac()),a[a.length-1].L(A.wc());for(var F=1;F<a.length-1;F++)a[F].scale(1/this.ec);y?(R=S.eJ(R,A,p),S.TD(s.vm(),s.Qn()&&!h.dc(s.gb),A,R,c,a,l)):S.SD(s.vm(),s.Qn()&&!h.dc(s.gb),a,l)}return l},S.prototype.CX=function(h){var l=h.Ia(),s=h.Ga(),a=[],c=null,p=new d.ig,y=1<h.description.Aa;for(y&&(c=new d.be(0));s.$a();)for(;s.Ha();){var v=s.ha(),_=v.ac(),x=v.wc();_=0<_.compare(x),x=S.eJ(_,v,p),a.length=0,c!=null&&c.Bh(0),S.BX(this.Tb,this.kc,this.ec,x,this.Qg,this.AA,this.zA,y?c:null,a),_&&S.fC(null,null,y?c:null,a),y?S.TD(s.vm(),s.Qn()&&!h.dc(s.gb),v,x,c,a,l):S.SD(s.vm(),s.Qn()&&!h.dc(s.gb),a,l)}return l},S.SD=function(h,l,s,a){h&&a.Hz(null,0),h=a.da()-1;var c=s.slice(0);a.qG(h,c,c.length-1),l&&a.wf(h,-1,s[s.length-1])},S.TD=function(h,l,s,a,c,p,y){var v=new d.Sa;if(s.To(v),h?y.nf(v):y.lineTo(v),2<p.length){h=a.Qb();for(var _=1;_<p.length-1;_++){var x=a.NG(c.get(_)*h);a.Tw(x,v),v.Cb(p[_]),y.lineTo(v)}}l&&(s.Po(v),y.lineTo(v))},S.uF=function(h,l,s,a,c,p,y,v,_,x,T,C,A,R){var F=new d.ga(0),N=new d.ga(0),B=new d.ga(0);d.kb.wd(h,l,a.x,a.y,c.x,c.y,B,F,N,s),B=B.u;var q=F=F.u;0>q&&(q+=6.283185307179586),0>(N=N.u)&&(N+=6.283185307179586),_!=null&&(_[0]=B),x!=null&&(x[0]=q),T!=null&&(T[0]=N),x=_=NaN,C!=null&&(_=((x=d.F.Ah(h,l))-(T=d.F.q(h,l,a.y)))/B,x=(x+T)/B),T=S.Mu(a,c),N=S.Ku(a,c),q=T||N;var U=S.FE(a,c,v),K=new d.ga(0),X=new d.ga(0),te=new d.h,ae=new d.h,ge=new d.h;S.Wi(a.x,NaN,R);var Ee=[R[0]];if(B<=p)S.Mf(A,a),S.Wi(c.x,NaN,R),C!=null&&C.add(0),q?(T&&S.kB(a,c,C,A),N&&S.iB(a,c,C,A)):U?S.jB(a,c,F,_,x,C,A):0<y&&(ae.ma(a.x-Ee[0],a.y),te.ma(c.x-R[0],c.y),S.Yy(h,l,s,a,B,F,ae,te,0,1,y,C,A,Ee)),S.Mf(A,c);else{var Ae=B/((p=1+d.O.truncate(Math.ceil(B/p)))-1),Me=new d.h,He=0;S.Mf(A,a),Me.L(a),ae.ma(a.x-R[0],a.y),C!=null&&C.add(0);for(var Ie=1;Ie<p;Ie++){if(Ie<p-1){d.kb.oj(h,l,a.x,a.y,Ie*Ae,F,K,X,s),te.ma(K.u,X.u),S.Wi(te.x,Me.x,R),ge.ma(R[0]+te.x,te.y);var dt=Ie/(p-1)}else S.Wi(c.x,NaN,R),te.ma(c.x-R[0],c.y),ge.L(c),dt=1;q?(Ie==1&&T&&S.kB(a,ge,C,A),Ie==p-1&&N&&S.iB(Me,c,C,A)):U?S.EE(Me,ge,v)&&(a.x<c.x?Me.x>ge.x&&(R[0]+=6.283185307179586,ge.ma(R[0]+te.x,te.y)):Me.x<ge.x&&(R[0]-=6.283185307179586,ge.ma(R[0]+te.x,te.y)),S.jB(Me,ge,F,_,x,C,A)):0<y&&S.Yy(h,l,s,a,B,F,ae,te,He,dt,y,C,A,Ee),S.Mf(A,ge),C!=null&&C.add(dt),Me.L(ge),ae.L(te),Ee[0]=R[0],He=dt}}},S.aR=function(h,l,s,a,c,p,y,v,_,x){var T=new d.ga(0),C=new d.ga(0),A=new d.ga(0);d.kb.wd(h,l,a.x,a.y,c.x,c.y,A,T,C,s),C=A.u,T=T.u;var R=A=NaN;if(v!=null){R=d.F.Ah(h,l);var F=d.F.q(h,l,a.y);A=(R-F)/C,R=(R+F)/C}F=S.Mu(a,c);var N=S.Ku(a,c),B=F||N;y=S.FE(a,c,y);var q=S.Lu(a,c);q=B||y||q,S.Wi(a.x,NaN,x);var U=new d.h;S.Mf(_,a),U.L(a),v!=null&&v.add(0),q?(B?(F&&S.kB(a,c,v,_),N&&S.iB(a,c,v,_)):y&&S.jB(a,c,T,A,R,v,_),S.Wi(c.x,NaN,x),S.Mf(_,c)):C<=p?(S.Wi(c.x,NaN,x),S.Mf(_,c)):(A=new d.h,y=new d.h,A.L(a),y.L(c),A.x-=x[0],y.x-=x[0],-3.141592653589793>y.x?y.x+=6.283185307179586:3.141592653589793<y.x&&(y.x-=6.283185307179586),S.Yy(h,l,s,a,C,T,A,y,0,1,p,v,_,x),S.Mf(_,c),S.Wi(c.x,NaN,x)),v!=null&&v.add(1)},S.Yy=function(h,l,s,a,c,p,y,v,_,x,T,C,A,R){var F=new d.h,N=new d.h;F.ma(y.x+R[0],y.y),new d.ga(0),new d.ga(0),new d.ga(0),new d.ga(0);var B=new d.ga(0),q=new d.ga(0),U=new d.ga(0),K=new d.h,X=new d.h,te=new d.h,ae=new d.h;K.L(y),X.L(v),y=new d.be(0),v=new d.be(0),S.up(y,X),v.add(x);var ge=new d.h,Ee=new d.yb,Ae=[];for(S.YJ(4,Ae);0<y.size;){for(var Me,He=!1,Ie=NaN,dt=0;3>dt;dt++)if(Me=Ae[dt]*x+(1-Ae[dt])*_,d.kb.oj(h,l,a.x,a.y,Me*c,p,B,q,s),te.ma(B.u,q.u),dt==0&&(Ie=Me,ae.L(te)),S.WW(K,te,X,Ee),Ee.hc(Ee.fe(te,!0),ge),d.kb.wd(h,l,te.x,te.y,ge.x,ge.y,U,null,null,2),U.u>T){He=!0;break}He?(X.L(ae),x=Ie,S.up(y,X),v.add(x)):(S.hB(y),v.En(v.size-1,1,v.size-1),0<y.size&&(S.Wi(X.x,F.x,R),N.ma(R[0]+X.x,X.y),S.Mf(A,N),F.L(N),C!=null&&C.add(x),K.L(X),_=x,S.oB(y,X),x=v.get(v.size-1)))}},S.BX=function(h,l,s,a,c,p,y,v,_){var x=new d.h,T=new d.h,C=new d.h,A=new d.h,R=new d.h,F=new d.h,N=new d.h,B=new d.h,q=new d.h,U=new d.h,K=new d.ga(0),X=new d.ga(0),te=new d.h,ae=[[],[]],ge=d.Eg.Sb(c)==1;c=c.Xd(0);var Ee=a.ac(),Ae=a.wc();ge?(F.ma(Ee.x*s,Ee.y*s),N.ma(Ae.x*s,Ae.y*s)):(ae[0][0]=Ee.x,ae[0][1]=Ee.y,ae[1][0]=Ae.x,ae[1][1]=Ae.y,d.cb.vt(),F.x=ae[0][0]*s,F.y=ae[0][1]*s,N.x=ae[1][0]*s,N.y=ae[1][1]*s);var Me=0,He=0,Ie=1,dt=a.Pn();x.L(Ee),T.L(Ae),Ae=new d.be(0);var ut=new d.be(0),Nt=new d.be(0);S.up(Ae,T),S.up(ut,N),Nt.add(Ie),S.Mf(_,x),v!=null&&v.add(He);var yi=[],fr=0<y?dt?5:3:dt?5:1;S.YJ(fr,yi);for(var _i=new d.ga(0),Ft=new d.ga(0),pt=new d.ga(0),$t=new d.ga(0),Di=new d.ga(0),$i=new d.ga(0),Bo=new d.ga(0);0<ut.size;){var Pt=!1,Gn=NaN;for(d.kb.wd(h,l,F.x,F.y,N.x,N.y,_i,Ft,null,2),Ee=0;Ee<fr&&!(Ee==0&&(!dt&&0>=y&&_i.u<=p&&3.141592653589793>Math.abs(F.x-N.x)||a.Ux(He,Ie)<=c));Ee++){var ei=yi[Ee]*Ie+(1-yi[Ee])*He;if(a.hc(ei,C),ge?B.ma(C.x*s,C.y*s):(ae[0][0]=C.x,ae[0][1]=C.y,d.cb.vt(),B.x=ae[0][0]*s,B.y=ae[0][1]*s),Ee==0&&(Gn=ei,R.L(C),U.L(B),0<p&&(_i.u>p||3.141592653589793<=Math.abs(F.x-N.x)))){Pt=!0;break}if(dt&&0<p){if(d.kb.wd(h,l,F.x,F.y,B.x,B.y,pt,null,null,2),pt.u>p||3.141592653589793<=Math.abs(F.x-B.x)){Pt=!0;break}}else if(0<y){if(dt?(A.NS(x,T,yi[Ee]),ge?q.ma(A.x*s,A.y*s):(ae[0][0]=A.x,ae[0][1]=A.y,d.cb.vt(),q.x=ae[0][0]*s,q.y=ae[0][1]*s)):(A.L(C),q.L(B)),d.kb.wd(h,l,F.x,F.y,q.x,q.y,$t,null,null,2),!($t.u<=_i.u)){Pt=!0;break}if(d.kb.oj(h,l,F.x,F.y,$t.u,Ft.u,K,X,2),te.ma(K.u,X.u),d.kb.wd(h,l,te.x,te.y,B.x,B.y,Di,null,null,2),Di.u>y){Pt=!0;break}if(dt){if(d.kb.wd(h,l,te.x,te.y,q.x,q.y,$i,null,null,2),$i.u>y){Pt=!0;break}if(d.kb.wd(h,l,q.x,q.y,B.x,B.y,Bo,null,null,2),Bo.u>y){Pt=!0;break}}}}Pt?(T.L(R),N.L(U),Ie=Gn,S.up(Ae,T),S.up(ut,N),Nt.add(Ie)):(S.hB(Ae),S.hB(ut),Nt.En(Nt.size-1,1,Nt.size-1),S.Mf(_,T),Me+=_i.u,v!=null&&v.add(Me),0<ut.size&&(x.L(T),F.L(N),He=Ie,S.oB(Ae,T),S.oB(ut,N),Ie=Nt.get(Nt.size-1)))}if(v!=null)for(h=1/Me,Ee=0;Ee<v.size;Ee++)v.write(Ee,v.read(Ee)*h)},S.fC=function(h,l,s,a){a.reverse(),s!=null&&s.ni(0,s.size,1),s=h!=null?h[0]:NaN,a=l!=null?l[0]:NaN,h!=null&&(h[0]=a),l!=null&&(l[0]=s)},S.fJ=function(h,l,s,a,c){h?(a.L(s),c.L(l)):(a.L(l),c.L(s))},S.eJ=function(h,l,s){return h?(s.create(l.getType()),l.copyTo(s.get()),s.get().reverse(),s.get()):l},S.Wi=function(h,l,s){if(isNaN(l)){for(;3.141592653589793<s[0]-h;)s[0]-=6.283185307179586;for(;3.141592653589793<h-s[0];)s[0]+=6.283185307179586}else 3.141592653589793<s[0]+h-l?s[0]-=6.283185307179586:3.141592653589793<l-(s[0]+h)&&(s[0]+=6.283185307179586)},S.WW=function(h,l,s,a){3.141592653589793>Math.abs(l.x-h.x)?(a.Dc(h),3.141592653589793<=s.x-h.x?a.Ql(s.x-6.283185307179586,s.y):3.141592653589793<=h.x-s.x?a.Ql(s.x+6.283185307179586,s.y):a.Ql(s.x,s.y)):(a.Dc(s),3.141592653589793<=h.x-s.x?a.Ql(h.x-6.283185307179586,h.y):3.141592653589793<=s.x-h.x?a.Ql(h.x+6.283185307179586,h.y):a.Ql(h.x,h.y))},S.YJ=function(h,l){for(var s=0;s<h;s++){var a=Math.ceil(s/2)/(h+1);s%2!=0&&(a=-a),l[s]=.5+a}},S.Mu=function(h,l){return!!(d.s.Y(h.y,1.570796326794897)&&!d.s.Y(l.y,1.570796326794897)||d.s.Y(h.y,-1.570796326794897)&&!d.s.Y(l.y,-1.570796326794897))},S.Ku=function(h,l){return!!(d.s.Y(l.y,1.570796326794897)&&!d.s.Y(h.y,1.570796326794897)||d.s.Y(l.y,-1.570796326794897)&&!d.s.Y(h.y,-1.570796326794897))},S.FE=function(h,l,s){return!(!S.EE(h,l,s)||d.s.Y(h.y,1.570796326794897)||d.s.Y(h.y,-1.570796326794897)||d.s.Y(l.y,1.570796326794897)||d.s.Y(l.y,-1.570796326794897))},S.EE=function(h,l,s){return Math.abs(Math.abs(h.x-l.x)-3.141592653589793)<=s},S.Lu=function(h,l){return!!(d.s.Y(h.y,1.570796326794897)&&d.s.Y(l.y,1.570796326794897)||d.s.Y(h.y,-1.570796326794897)&&d.s.Y(l.y,-1.570796326794897))},S.kB=function(h,l,s,a){if(0<h.y){var c=new d.h;c.ma(l.x,1.570796326794897)}else(c=new d.h).ma(l.x,-1.570796326794897);d.s.Y(h.x,c.x)||d.s.Y(l.y,c.y)||(S.Mf(a,c),s!=null&&s.add(0))},S.iB=function(h,l,s,a){if(0<l.y){var c=new d.h;c.ma(h.x,1.570796326794897)}else(c=new d.h).ma(h.x,-1.570796326794897);d.s.Y(l.x,c.x)||d.s.Y(h.y,c.y)||(S.Mf(a,c),s!=null&&s.add(1))},S.jB=function(h,l,s,a,c,p,y){d.s.Cd(s)?(0<1.570796326794897-h.y&&((s=new d.h).ma(h.x,1.570796326794897),S.Mf(y,s),p!=null&&p.add(a)),0<1.570796326794897-l.y&&((s=new d.h).ma(l.x,1.570796326794897),S.Mf(y,s),p!=null&&p.add(a))):(0<1.570796326794897+h.y&&((s=new d.h).ma(h.x,-1.570796326794897),S.Mf(y,s),p!=null&&p.add(c)),0<1.570796326794897+l.y&&((s=new d.h).ma(l.x,-1.570796326794897),S.Mf(y,s),p!=null&&p.add(c)))},S.AU=function(h){if(-3.141592653589793>h.x)for(;-3.141592653589793>h.x;)h.x+=6.283185307179586;if(3.141592653589793<h.x)for(;3.141592653589793<h.x;)h.x-=6.283185307179586},S}();d.cj=O}(Y||(Y={})),function(d){d.ip=function(){function O(){}return O.nj=function(S,h,l){if(S==null||h==null||!d.cb.Wc(h))throw d.i.N();if(S.B())return S;var s=S,a=s.getType();if(d.aa.Hc(a)){s=d.Hh.lj(S,h),S=new d.l,s.A(S),a=d.ta.Wd(h,S,!1);for(var c=d.cb.gh(h),p=Math.floor((S.v-c.v)/c.R())*c.R()+c.v;p<S.C;)p>S.v+a&&p<S.C-a&&(s=d.Hh.ks(s,h,l,!0,p)),p+=c.R()}else{if(a==197)return(S=new d.Da(s.description)).ad(s,!1),O.nj(S,h,l);if(d.aa.yd(a))return(S=new d.Ta(s.description)).oc(s,!0),O.nj(S,h,l)}return O.Uy(s,h)},O.Uy=function(S,h){if(S==null||h==null||!d.cb.Wc(h))throw d.i.N();if(S.B())return S;var l=S.getType();return l==197?(l=new d.Da(S.description)).ad(S,!1):d.aa.yd(l)?(l=new d.Ta(S.description)).oc(S,!0):l=S,(l=d.Hh.lj(l,h)).B()?l:d.Eg.Sb(h)==1?d.Hh.Fn(l,h,0,l!=S,0):O.NQ(l,h,l!=S)},O.NQ=function(S,h,l){if(!d.cb.Wc(h))throw d.i.N();if(S.B())return S;var s=d.cb.bf(h),a=-180*s;return s*=360,d.Eg.Sb(h)==2&&(s=(a=d.cb.gh(h)).C,s-=a=a.v),d.Hh.Hp(S,a,s,h,l,0,!0)},O}()}(Y||(Y={})),function(d){d.BY=function(){function O(){}return O.P=function(S){return 0>S?-S:S},O.Mb=function(S,h){return 0<=h?O.P(S):-O.P(S)},O.Y=function(S,h){return S==h||O.P(S-h)<=O.JC*(1+(O.P(S)+O.P(h))/2)},O.Cd=function(S){return S==0||O.P(S)<=O.JC},O.Ah=function(S,h){var l=(h=(1-(h=Math.sqrt(1-h)))/(1+h))*h;return S/(1+h)*(1+l*(.25+l*(.015625+1/256*l)))*O.EL},O.EL=1.5707963267948966,O.JC=3552713678800501e-30,O}()}(Y||(Y={})),function(d){var O=function(h){this.Wf=h,this.Kk=this.Wf.getCode(),0>this.Kk&&(this.Kk=0)};d.DY=O;var S=function(){function h(l){l===void 0&&(l=null),this.Cj=null,this.Un=!1,l!==null&&(this.Cj=new O(l))}return h.prototype.Ec=function(){return this.Cj!=null?this.Cj.Kk:0},h.prototype.Of=function(){var l=new h;return this.copyTo(l),l},h.prototype.copyTo=function(l){l.Cj=this.Cj,l.Un=this.Un},h.prototype.Qz=function(){this.Un=!this.Un},h.prototype.qm=function(){return this.Cj!=null?this.Cj.Wf:null},h.prototype.LJ=function(l){if(0>=l)throw d.i.N();if(l!=this.Ec()){if((l=d.pf.geogtran(l))==null)throw d.i.N("Geogtran not found.");this.Cj=new O(l)}},h.prototype.Bz=function(){return this.Cj==null?null:this.Cj.Wf.toString()},h.prototype.tX=function(l){if(l==null)throw d.i.N();var s=null;try{s=d.pf.fromString(d.Sc.PE_TYPE_GEOGTRAN,l)}catch{throw d.i.N()}this.Cj=new O(s)},h.prototype.Nb=function(l){return l==this||!(!(l instanceof h)||(0>=this.Ec()||this.Ec()!=l.Ec())&&!this.qm().isEqual(l.qm()))&&this.Un==l.Un},h.prototype.toString=function(){var l="GeographicTransformation: "+this.Bz();return 200<l.length?l.substring(0,197)+"... ("+l.length.toString()+" characters)":l},h.create=function(l,s){var a=new h;return a.LJ(l),s&&a.Qz(),a},h.uP=function(l,s){var a=new h;return a.tX(l),s&&a.Qz(),a},h}();d.Dx=S}(Y||(Y={})),function(d){var O=function(){function h(){}return h.construct=function(l,s,a,c){var p=new h;return p.hw=l,p.iw=s,p.QY=a,p.RY=c,p},h.Ey=function(l,s){return l.hw==s.hw?l.iw==s.iw?0:l.iw<s.iw?-1:1:l.hw<s.hw?-1:1},h}(),S=function(){function h(){this.yT=[],this.zT=[],this.qp()}return h.kz=function(){return h.jK==null&&(h.jK=new h),h.jK},h.prototype.qp=function(){this.iD(this.yT),this.iD(this.zT)},h.prototype.iD=function(l){try{var s=[];s=s.sort(O.Ey);for(var a=0;a<s.length;a++)l.push(s[a])}catch{}},h}();d.CY=S}(Y||(Y={})),function(d){var O=function(){function S(){}return S.prototype.yD=function(h){this.Fk=h},S.prototype.WM=function(h){this.Fb=h},S.prototype.xD=function(h){this.zo=h},S.CE=function(h){return!(h.B()||h.getType()!=1607&&h.getType()!=1736)},S.AE=function(h){return!(h.B()||h.getType()!=1607&&h.getType()!=1736||20>h.I())},S.BE=function(h){return!(h.B()||h.getType()!=1607&&h.getType()!=1736||20>h.I())},S}();d.Uk=O}(Y||(Y={})),function(d){d.$b=function(){function O(){}return O.TT=function(S){var h=new d.Da;return h.sx(S.es(),S.gs()),h.yj(S.es(),S.fs()),h.yj(S.ds(),S.fs()),h.yj(S.ds(),S.gs()),h},O.zh=function(S,h){return S===null?null:d.Hx.local().V(S,h,null)},O.jY=function(S,h){var l=d.Gh.local();return S=new d.Zc(S),l.V(S,h,null).next()},O.im=function(S,h,l){return d.kp.local().V(S,h,l,null)},O.ep=function(S,h,l){return d.Kx.local().V(S,h,l,null)},O.VX=function(S,h,l){var s=d.Kx.local();for(S=new d.Zc(S),h=new d.Zc(h),l=s.V(S,h,l,null),s=[];(h=l.next())!=null;)s.push(h);return s},O.Nb=function(S,h,l){return d.dj.local().V(3,S,h,l,null)},O.TP=function(S,h,l){return d.dj.local().V(4,S,h,l,null)},O.RS=function(S,h,l){var s=d.Xj.local();for(S=new d.Zc(S),h=new d.Zc(h),l=s.V(S,h,l,null),s=[];(h=l.next())!=null;)s.push(h);return s},O.QP=function(S,h,l){var s=d.kp.local();for(S=new d.Zc(S),h=new d.Zc(h),l=s.V(S,h,l,null),s=[];(h=l.next())!=null;)s.push(h);return s},O.Ea=function(S,h,l){return d.Xj.local().V(S,h,l,null)},O.QS=function(S,h,l){if((S=d.Xj.local().V(S,h,l,null,1))===null)return[];if(S.getType()===550){for(h=[],l=0;l<S.wa;l++)h.push(S.KR(l));return h}return S.getType()===33?[S]:[]},O.qY=function(S,h,l){return d.dj.local().V(2,S,h,l,null)},O.contains=function(S,h,l){return d.dj.local().V(1,S,h,l,null)},O.BP=function(S,h,l){return d.dj.local().V(16,S,h,l,null)},O.touches=function(S,h,l){return d.dj.local().V(8,S,h,l,null)},O.DU=function(S,h,l){return d.dj.local().V(32,S,h,l,null)},O.TS=function(S,h,l){return d.dj.local().V(1073741824,S,h,l,null)},O.yB=function(S,h,l,s){return d.zL.local().V(S,h,l,s,null)},O.tb=function(S,h,l,s){var a=null;if(l!=null){if(a=l.Hd(),s!=null&&a.Ec()!=s.Ec()&&a.od!=s.od)throw d.i.Xk()}else if(s!=null)throw d.i.N();return S=d.rL.local().V(S,h,null),a!==null&&s!==null&&(S=d.Tc.Nh(S,a,s)),S},O.clip=function(S,h,l){return d.kL.local().V(S,d.l.construct(h.es(),h.gs(),h.ds(),h.fs()),l,null)},O.dl=function(S,h,l){if(S==null||h==null)return null;for(S=d.mL.local().V(!0,S,h,l,null),h=[];(l=S.next())!=null;)l.B()||h.push(l);return h.slice(0)},O.MN=function(S,h,l,s,a,c,p,y){if(a===!0)return O.NN(S,h,l,s,c,p,y);if(a=l,h!=null){if(p=h.Hd(),s!=null&&p.Ec()!=s.Ec()){if(p.od!=s.od)throw d.i.Xk();a=[],d.Tc.XE(l,l.length,s,p,a)}}else if(s!=null)throw d.i.N();if(l=d.AC.local(),c){for(S=new d.Zc(S),h=l.V(S,h,a,c,null),S=[];(c=h.next())!=null;)S.push(c);c=S.slice(0)}else for(c=[],s=0;s<S.length;s++)c[s]=l.V(S[s],h,a[s],null);return c},O.NN=function(S,h,l,s,a,c,p){if(h===null||(s==null&&(s=h.Ec()!==4326?h.Hd():d.Tc.Zg(9001)),s.od!==0))throw d.i.N();if(d.Tc.XE(l,l.length,s,d.Tc.Zg(9001),l),s=d.FC.local(),a){for(S=new d.Zc(S),h=s.V(S,h,c,l,p,!1,a,null),l=[];(c=h.next())!=null;)l.push(c);a=l.slice(0)}else{a=[];for(var y=0;y<S.length;y++)a[y]=s.V(S[y],h,c,l[y],p,!1,null)}return a},O.buffer=function(S,h,l,s,a,c,p){var y=l;if(a===!1){if(h!=null){if(a=h.Hd(),s!=null&&a.Ec()!=s.Ec()){if(a.od!=s.od)throw d.i.Xk();y=d.Tc.Nh(l,s,a)}}else if(s!=null)throw d.i.N();S=d.AC.local().V(S,h,y,null)}else{if(h===null||(s==null&&(s=h.Ec()!==4326?h.Hd():d.Tc.Zg(9001)),s.od!==0))throw d.i.N();y=d.Tc.Nh(l,s,d.Tc.Zg(9001)),S=d.FC.local().V(S,h,c,y,p,!1,null)}return S},O.BU=function(S,h,l,s,a,c,p){if(h!=null){var y=h.Hd();if(p!=null&&y.Ec()!=p.Ec()){if(y.od!=p.od)throw d.i.Xk();l=d.Tc.Nh(l,p,y)}}else if(p!=null)throw d.i.N();for(S=new d.Zc(S),h=d.IC.local().V(S,h,l,s,a,c,null),l=[];(s=h.next())!=null;)l.push(s);return l.slice(0)},O.offset=function(S,h,l,s,a,c,p){if(h!=null){var y=h.Hd();if(p!=null&&y.Ec()!=p.Ec()){if(y.od!=p.od)throw d.i.Xk();l=d.Tc.Nh(l,p,y)}}else if(p!=null)throw d.i.N();return d.IC.local().V(S,h,l,s,a,c,null)},O.iP=function(S){return d.CC.local().V(S,null)},O.jP=function(S,h){var l=d.CC.local();for(S=new d.Zc(S),h=l.V(S,h,null),l=[];(S=h.next())!=null;)l.push(S);return l},O.nz=function(S,h,l){return d.Ix.local().nz(S,h,l)},O.oz=function(S,h){return d.Ix.local().oz(S,h)},O.pz=function(S,h,l,s){return d.Ix.local().pz(S,h,l,s)},O.eC=function(S,h){return d.Yl.local().V(S,h,!1,null)},O.dT=function(S,h){return d.Yl.local().rs(S,h,null)},O.QQ=function(S,h,l,s,a){var c=d.EC.local();if(h!=null){if(h=h.Hd(),a!=null&&h.Ec()!=a.Ec()){if(h.od!=a.od)throw d.i.Xk();l=d.Tc.Nh(l,a,h)}}else if(a!=null)throw d.i.N();return c.V(S,l,s,null)},O.Qr=function(S,h,l,s){var a=d.Xl.local();if(h!=null){if(h=h.Hd(),s!=null&&h.Ec()!=s.Ec()){if(h.od!=s.od)throw d.i.Xk();l=d.Tc.Nh(l,s,h)}}else if(s!=null)throw d.i.N();return a.V(S,l,null)},O.Wy=function(S,h,l,s,a){a===void 0&&(a=0);var c=d.tL.local();if(a==4||a!==0)throw d.i.Ie();if(s!==null){if(s.od!==0)throw d.i.N("Unit must be a linear unit type");l=d.Tc.Nh(l,s,d.Tc.Zg(9001))}return c.V(S,l,h,a,null)},O.WQ=function(S,h,l,s){if(S===null)return 0;if(s==4||s!==0)throw d.i.Ie();if(S.getType()==197)S=O.TT(S);else if(S.getType()!=1736)return 0;if(s=d.cb.sc(h),S=d.cb.zh(S,h,s),S=d.UK.XQ([S])[0],l!==null){if(l.od!==2)throw d.i.N("Unit must be a area unit type");S=d.Tc.Nh(S,d.Tc.Zg(109404),l)}return S},O.ZQ=function(S,h,l,s){if(S=d.vL.local().V(S,h,s,null),l!==null){if(l.od!==0)throw d.i.N("Unit must be a linear unit type");S=d.Tc.Nh(S,d.Tc.Zg(9001),l)}return S},O.JU=function(S,h,l){if(S===null)return 0;var s=null;if(h!=null){if((s=h.Hd()).od==0&&(s=d.Tc.aG(s))==null&&l!==null)throw d.i.N();if(l!=null&&s.Ec()!=l.Ec()&&s.od!=l.od)throw d.i.Xk()}else if(l!=null)throw d.i.N();return S.getType()==1736||S.getType()==197?(S=S.Ke(),l!==null?d.Tc.Nh(S,s,l):S):0},O.KU=function(S,h,l){if(S===null||S.B()||1>S.Db())return 0;var s=null;if(h!=null){if(s=h.Hd(),l!=null&&s.Ec()!=l.Ec()&&s.od!=l.od)throw d.i.Xk()}else if(l!=null)throw d.i.N();S.getType()==1736||S.getType()==197?h=S.mg():d.aa.yd(S.getType())?(h=new d.Ta(S.description)).oc(S,!0):h=S,S=0,h=h.Ga();for(var a=new d.h,c=new d.h;h.$a();)for(;h.Ha();){var p=h.ha();p.Yp(a),p.Tr(c),S+=d.h.tb(a,c)}return s!==null&&l!==null&&(S=d.Tc.Nh(S,s,l)),S},O.fP=function(S){return S.points!==void 0?O.mS(S,S.hasZ!==void 0&&S.hasZ,S.hasM!==void 0&&S.hasM):S.rings!==void 0?O.lG(S.rings,S.hasZ!==void 0&&S.hasZ,S.hasM!==void 0&&S.hasM,"P"):S.paths!==void 0?O.lG(S.paths,S.hasZ!==void 0&&S.hasZ,S.hasM!==void 0&&S.hasM,"L"):S.x!==void 0?O.nS(S):S.xmin!==void 0?O.lS(S):null},O.nS=function(S){if(S.x==null||S.x=="NaN")return new d.Sa;var h=new d.Sa(S.x,S.y);return S.z!==void 0&&S.z!==null&&h.wX(S.z),S.m!==void 0&&S.m!==null&&h.hX(S.m),h},O.lS=function(S){if(S.xmin==null||S.xmin=="NaN")return new d.Fh;var h=new d.Fh(S.xmin,S.ymin,S.xmax,S.ymax);return S.zmin!==void 0&&S.zmin!==null&&h.setInterval(1,0,S.zmin,S.zmax),S.mmin!==void 0&&S.mmin!==null&&h.setInterval(2,0,S.mmin,S.mmax),h},O.mS=function(S,h,l){var s=0,a=new d.de,c=3*S.points.length;c%2!=0&&c++,2>c&&(c=2);var p=d.O.truncate(3*S.points.length/2);4>p?p=4:16>p&&(p=16),c=d.Yc.Dn(c,0);var y=d.Yc.Dn(p);p=d.Yc.Dn(p);for(var v=0;v<S.points.length;v++)c.write(2*v,S.points[v][0]),c.write(2*v+1,S.points[v][1]),y.write(v,h||l?S.points[v][2]:NaN),p.write(v,l&&h?S.points[v][3]:NaN),s++;return s!=0&&(a.resize(s),a.hn(0,c)),h&&(a.re(1),a.hn(1,y)),l&&(a.re(2),a.hn(2,h==0?y:p)),a.Pc(16777215),a},O.lG=function(S,h,l,s){var a=0,c=2;if(s=="P"){var p=new d.Da;a=1,c=3}else p=new d.Ta;for(var y=d.Yc.Oh(0),v=d.Yc.Mr(0),_=0,x=0,T=[],C=[],A=0;A<S.length;A++){var R=S[A].length;if(T[A]=!1,s==="P"&&S[A][0][0]===S[A][S[A].length-1][0]&&S[A][0][1]===S[A][S[A].length-1][1]){var F=l==0||S[A][0][3]===S[A][S[A].length-1][3]||S[A][0][3]===void 0&&S[A][S[A].length-1][3]===void 0;(h==0||S[A][0][2]===S[A][S[A].length-1][2]||S[A][0][2]===void 0&&S[A][S[A].length-1][2]===void 0)&&F&&(T[A]=!0,--R)}R>=c?(C[A]=!1,x+=1,y.add(_),v.add(a),_+=R):C[A]=!0}for((s=3*_)%2!=0&&s++,2>s&&(s=2),4>(A=d.O.truncate(3*_/2))?A=4:16>A&&(A=16),s=d.Yc.Dn(s,0),a=d.Yc.Dn(A),c=d.Yc.Dn(A),A=R=0;A<S.length;A++)if(C[A]===!1)for(F=0;F<S[A].length;F++){var N=!1;F===S[A].length-1&&T[A]===!0&&(N=!0),N||(s.write(2*R,S[A][F][0]),s.write(2*R+1,S[A][F][1]),a.write(R,h||l?S[A][F][2]:NaN),c.write(R,l&&h?S[A][F][3]:NaN),R++)}return _!=0&&(S=p,y.resize(x),v.resize(x),0<_&&(y.add(_),v.add(0)),S.hn(0,s),S.PJ(v),S.QJ(y)),h&&(p.re(1),p.hn(1,a)),l&&(p.re(2),p.hn(2,h==0?a:c)),p.Pc(16777215),p},O}()}(Y||(Y={})),function(d){d.Ex=function(){function O(){}return O.br=function(S){var h,l=0,s=S.length,a=S[0];for(h=0;h<s-1;h++){var c=S[h+1];l+=(c[0]-a[0])*(c[1]+a[1]),a=c}return 0<=l},O.rotate=function(S,h,l){h=h*Math.PI/180;var s=Math.cos(h),a=Math.sin(h);if(S.paths!==void 0){h={paths:[]};for(var c=0;c<S.paths.length;c++){for(var p=S.paths[c],y=[],v=0;v<p.length;v++){var _=p[v].slice(0);y.push(_);var x=s*(p[v][0]-l.x)-a*(p[v][1]-l.y)+l.x,T=a*(p[v][0]-l.x)+s*(p[v][1]-l.y)+l.y;_[0]=x,_[1]=T}h.paths.push(y),S.hasZ!==void 0&&(h.hasZ=S.hasZ),S.hasM!==void 0&&(h.hasM=S.hasM)}return h}if(S.rings!==void 0){for(h={rings:[]},c=0;c<S.rings.length;c++){p=S.rings[c],y=[];var C=O.br(p);for(v=0;v<p.length;v++)_=p[v].slice(0),y.push(_),x=s*(p[v][0]-l.x)-a*(p[v][1]-l.y)+l.x,T=a*(p[v][0]-l.x)+s*(p[v][1]-l.y)+l.y,_[0]=x,_[1]=T;O.br(y)!==C&&y.reverse(),h.rings.push(y),S.hasZ!==void 0&&(h.hasZ=S.hasZ),S.hasM!==void 0&&(h.hasM=S.hasM)}return h}if(S.x!==void 0)return h={x:s*(S.x-l.x)-a*(S.y-l.y)+l.x,y:a*(S.x-l.x)+s*(S.y-l.y)+l.y},S.z!==void 0&&(h.z=S.z),S.m!==void 0&&(h.m=S.m),S.hasZ!==void 0&&(h.hasZ=S.hasZ),S.hasM!==void 0&&(h.hasM=S.hasM),h;if(S.points!==void 0){for(h={points:[]},c=S.points,v=0;v<c.length;v++)(p=c[v].slice(0))[0]=s*(c[v][0]-l.x)-a*(c[v][1]-l.y)+l.x,p[1]=a*(c[v][0]-l.x)+s*(c[v][1]-l.y)+l.y,h.points.push(p);return S.hasZ!==void 0&&(h.hasZ=S.hasZ),S.hasM!==void 0&&(h.hasM=S.hasM),h}return null},O.JQ=function(S,h){if(S.paths!==void 0){for(var l={paths:[]},s=0;s<S.paths.length;s++){for(var a=S.paths[s],c=[],p=0;p<a.length;p++){var y=a[p].slice(0);c.push(y);var v=h.x-a[p][0];y[0]=a[p][0]+2*v}l.paths.push(c)}return S.hasZ!==void 0&&(l.hasZ=S.hasZ),S.hasM!==void 0&&(l.hasM=S.hasM),l}if(S.rings!==void 0){for(l={rings:[]},s=0;s<S.rings.length;s++){a=S.rings[s];var _=O.br(a);for(c=[],p=0;p<a.length;p++)y=a[p].slice(0),c.push(y),v=h.x-a[p][0],y[0]=a[p][0]+2*v;O.br(c)!==_&&c.reverse(),l.rings.push(c)}return S.hasZ!==void 0&&(l.hasZ=S.hasZ),S.hasM!==void 0&&(l.hasM=S.hasM),l}if(S.x!==void 0)return v=h.x-S.x,l={x:S.x+2*v,y:S.y},S.z!==void 0&&(l.z=S.z),S.m!==void 0&&(l.m=S.m),S.hasZ!==void 0&&(l.hasZ=S.hasZ),S.hasM!==void 0&&(l.hasM=S.hasM),l;if(S.points!==void 0){for(l={points:[]},s=S.points,p=0;p<s.length;p++)a=s[p].slice(0),v=h.x-a[0],a[0]+=2*v,l.points.push(a);return S.hasZ!==void 0&&(l.hasZ=S.hasZ),S.hasM!==void 0&&(l.hasM=S.hasM),l}return S.xmin!==void 0?(l={v:S.xmin,G:S.ymin,C:S.xmax,H:S.ymax},S.zmin!==void 0&&(l.zmin=S.zmin,l.zmax=S.zmax),S.mmin!==void 0&&(l.mmin=S.mmin,l.mmax=S.mmax),v=h.x-S.xmin,l.xmax=S.xmin+2*v,v=h.x-S.xmax,l.xmin=S.xmax+2*v,S.zmin!==void 0&&(l.zmin=S.zmin),S.zmax!==void 0&&(l.zmax=S.zmax),S.mmin!==void 0&&(l.mmin=S.mmin),S.mmax!==void 0&&(l.mmax=S.mmax),S.hasZ!==void 0&&(l.hasZ=S.hasZ),S.hasM!==void 0&&(l.hasM=S.hasM),l):null},O.KQ=function(S,h){if(S.paths!==void 0){for(var l={paths:[]},s=0;s<S.paths.length;s++){for(var a=S.paths[s],c=[],p=0;p<a.length;p++){var y=a[p].slice(0);c.push(y);var v=h.y-a[p][1];y[1]=a[p][1]+2*v}l.paths.push(c)}return S.hasZ!==void 0&&(l.hasZ=S.hasZ),S.hasM!==void 0&&(l.hasM=S.hasM),l}if(S.rings!==void 0){for(l={rings:[]},s=0;s<S.rings.length;s++){a=S.rings[s];var _=O.br(a);for(c=[],p=0;p<a.length;p++)y=a[p].slice(0),c.push(y),v=h.y-a[p][1],y[1]=a[p][1]+2*v;O.br(c)!==_&&c.reverse(),l.rings.push(c)}return S.hasZ!==void 0&&(l.hasZ=S.hasZ),S.hasM!==void 0&&(l.hasM=S.hasM),l}if(S.x!==void 0)return v=h.y-S.y,l={y:S.y+2*v,x:S.x},S.z!==void 0&&(l.z=S.z),S.m!==void 0&&(l.m=S.m),S.hasZ!==void 0&&(l.hasZ=S.hasZ),S.hasM!==void 0&&(l.hasM=S.hasM),l;if(S.points!==void 0){for(l={points:[]},s=S.points,p=0;p<s.length;p++)a=s[p].slice(0),v=h.y-a[1],a[1]+=2*v,l.points.push(a);return S.hasZ!==void 0&&(l.hasZ=S.hasZ),S.hasM!==void 0&&(l.hasM=S.hasM),l}return S.xmin!==void 0?(l={v:S.xmin,G:S.ymin,C:S.xmax,H:S.ymax},S.zmin!==void 0&&(l.zmin=S.zmin,l.zmax=S.zmax),S.mmin!==void 0&&(l.mmin=S.mmin,l.mmax=S.mmax),v=h.y-S.ymin,l.ymax=S.ymin+2*v,v=h.y-S.ymax,l.ymin=S.ymax+2*v,S.zmin!==void 0&&(l.zmin=S.zmin),S.zmax!==void 0&&(l.zmax=S.zmax),S.mmin!==void 0&&(l.mmin=S.mmin),S.mmax!==void 0&&(l.mmax=S.mmax),S.hasZ!==void 0&&(l.hasZ=S.hasZ),S.hasM!==void 0&&(l.hasM=S.hasM),l):null},O}()}(Y||(Y={})),function(d){d.ZK=function(){function O(){}return O.Ig=function(S,h){switch(h==null&&(h=d.ee.og()),S){case 33:return new d.Sa(h);case 322:return new d.yb(h);case 197:return new d.Fh(h);case 550:return new d.de(h);case 1607:return new d.Ta(h);case 1736:return new d.Da(h);default:throw d.i.fa("invalid argument.")}},O}()}(Y||(Y={})),function(d){var O=function(){function S(h,l){this.Te=d.ia.qf(h,-1),this.ua=new d.au,this.wl=l}return S.prototype.AW=function(h){this.ua.At(Math.min(this.Te.size,h)),this.ua.fn(h)},S.prototype.addElement=function(h,l){if(l===void 0)return this.eN(h);l=d.O.truncate(l%this.Te.size);var s=this.Te.get(l);return s==-1&&(s=this.ua.Ph(),this.Te.set(l,s)),this.ua.addElement(s,h)},S.prototype.eN=function(h){var l=this.wl.jz(h);l=d.O.truncate(l%this.Te.size);var s=this.Te.get(l);return s==-1&&(s=this.ua.Ph(),this.Te.set(l,s)),this.ua.addElement(s,h)},S.prototype.jd=function(h,l){if(l===void 0)this.KP(h);else{l=d.O.truncate(l%this.Te.size);var s=this.Te.get(l);if(s==-1)throw d.i.N();for(var a=this.ua.rc(s),c=-1;a!=-1;){var p=this.ua.lb(a);this.ua.ja(a)==h?(this.ua.jd(s,c,a),this.ua.rc(s)==-1&&(this.ua.bh(s),this.Te.set(l,-1))):c=a,a=p}}},S.prototype.KP=function(h){var l=this.wl.jz(h);l=d.O.truncate(l%this.Te.size);var s=this.Te.get(l);if(s==-1)throw d.i.N();for(var a=this.ua.rc(s),c=-1;a!=-1;){var p=this.ua.lb(a);this.ua.ja(a)==h?(this.ua.jd(s,c,a),this.ua.rc(s)==-1&&(this.ua.bh(s),this.Te.set(l,-1))):c=a,a=p}},S.prototype.rR=function(h){return h=d.O.truncate(h%this.Te.size),(h=this.Te.get(h))==-1?-1:this.ua.rc(h)},S.prototype.ER=function(h){return this.ua.lb(h)},S.prototype.vd=function(h){var l=this.wl.jz(this.ja(h));l=d.O.truncate(l%this.Te.size);var s=this.Te.get(l);if(s==-1)throw d.i.N();for(var a=this.ua.rc(s),c=-1;a!=-1;){if(a==h)return this.ua.jd(s,c,a),void(this.ua.rc(s)==-1&&(this.ua.bh(s),this.Te.set(l,-1)));c=a,a=this.ua.lb(a)}throw d.i.N()},S.prototype.ja=function(h){return this.ua.ja(h)},S.prototype.clear=function(){this.Te=d.ia.qf(this.Te.size,-1),this.ua.clear()},S.prototype.size=function(){return this.ua.TF()},S}();d.dL=O}(Y||(Y={})),function(d){var O=function(){function S(){this.Li=new d.$c(3),this.ua=new d.$c(6),this.sT=!1,this.je=-1}return S.prototype.fl=function(h){this.Li.jd(h)},S.prototype.Pw=function(){return this.Li.Ce()},S.prototype.bv=function(h){this.ua.jd(h)},S.prototype.$A=function(){return this.ua.Ce()},S.prototype.WB=function(h,l){this.Li.S(h,1,l)},S.prototype.ex=function(h,l){this.Li.S(h,2,l)},S.prototype.gX=function(h,l){this.Li.S(h,3,l)},S.prototype.UB=function(h,l){this.ua.S(h,4,l)},S.prototype.jX=function(h,l){this.ua.S(h,3,l)},S.prototype.TJ=function(h,l){this.ua.S(h,2,l)},S.prototype.Ph=function(h){var l=this.$A();return this.ua.S(l,3,this.je),this.ua.S(l,4,0),this.ua.S(l,5,h),this.je!=-1&&this.TJ(this.je,l),this.je=l},S.prototype.bh=function(h){this.LE(h);var l=this.ua.T(h,2),s=this.ua.T(h,3);return l!=-1?this.jX(l,s):this.je=s,s!=-1&&this.TJ(s,l),this.bv(h),s},S.prototype.At=function(h){this.ua.De(h)},S.prototype.PF=function(h){return this.ua.T(h,5)},S.prototype.fX=function(h,l){this.ua.S(h,5,l)},S.prototype.addElement=function(h,l){return this.tS(h,l)},S.prototype.tS=function(h,l){var s=this.Pw();this.ex(s,-1),this.ua.T(h,0)==-1&&this.ua.S(h,0,s);var a=this.ua.T(h,1);return this.WB(s,a),a!=-1&&this.ex(a,s),this.ua.S(h,1,s),this.setData(s,l),this.UB(h,this.bs(h)+1),this.sT&&this.gX(s,h),s},S.prototype.jd=function(h,l){var s=this.we(l),a=this.lb(l);return s!=-1?this.ex(s,a):this.ua.S(h,0,a),a!=-1?this.WB(a,s):this.ua.S(h,1,s),this.fl(l),this.UB(h,this.bs(h)-1),a},S.prototype.fn=function(h){this.Li.De(h)},S.prototype.getData=function(h){return this.Li.T(h,0)},S.prototype.setData=function(h,l){this.Li.S(h,0,l)},S.prototype.lb=function(h){return this.Li.T(h,2)},S.prototype.we=function(h){return this.Li.T(h,1)},S.prototype.rc=function(h){return this.ua.T(h,0)},S.prototype.Fc=function(h){return this.ua.T(h,1)},S.prototype.clear=function(){for(var h=this.je;h!=-1;)h=this.bh(h)},S.prototype.LE=function(h){for(var l=this.Fc(h);l!=-1;){var s=l;l=this.we(s),this.fl(s)}this.ua.S(h,0,-1),this.ua.S(h,1,-1),this.UB(h,0)},S.prototype.B=function(){return this.Li.size==0},S.prototype.TF=function(){return this.Li.size},S.prototype.bs=function(h){return this.ua.T(h,4)},S.prototype.qz=function(h){return this.ua.T(h,3)},S}();d.jp=O}(Y||(Y={})),function(d){var O=function(){function S(h){h===void 0?(this.ug=new d.$c(2),this.ua=new d.$c(4),this.je=-1,this.Qv=!0):(this.ug=new d.$c(2),this.ua=new d.$c(h?4:2),this.je=-1,this.Qv=h)}return S.prototype.fl=function(h){this.ug.jd(h)},S.prototype.Pw=function(){return this.ug.Ce()},S.prototype.bv=function(h){this.ua.jd(h)},S.prototype.$A=function(){return this.ua.Ce()},S.prototype.Ph=function(){var h=this.$A();return this.Qv&&(this.ua.S(h,3,this.je),this.je!=-1&&this.ua.S(this.je,2,h),this.je=h),h},S.prototype.bh=function(h){for(var l=this.rc(h);l!=-1;){var s=l;l=this.lb(l),this.fl(s)}this.Qv&&(l=this.ua.T(h,2),s=this.ua.T(h,3),l!=-1?this.ua.S(l,3,s):this.je=s,s!=-1&&this.ua.S(s,2,l)),this.bv(h)},S.prototype.At=function(h){this.ua.De(h)},S.prototype.addElement=function(h,l){var s=this.ua.T(h,1),a=this.Pw();return s!=-1?this.ug.S(s,1,a):this.ua.S(h,0,a),this.ua.S(h,1,a),this.ug.S(a,0,l),a},S.prototype.fn=function(h){this.ug.De(h)},S.prototype.jd=function(h,l,s){l!=-1?(this.ug.S(l,1,this.ug.T(s,1)),this.ua.T(h,1)==s&&this.ua.S(h,1,l)):(this.ua.S(h,0,this.ug.T(s,1)),this.ua.T(h,1)==s&&this.ua.S(h,1,-1)),this.fl(s)},S.prototype.Hy=function(h,l){var s=this.ua.T(h,1),a=this.ua.T(l,0);a!=-1&&(s!=-1?this.ug.S(s,1,a):this.ua.S(h,0,a),this.ua.S(h,1,this.ua.T(l,1))),this.Qv&&(h=this.ua.T(l,2),s=this.ua.T(l,3),h!=-1?this.ua.S(h,3,s):this.je=s,s!=-1&&this.ua.S(s,2,h)),this.bv(l)},S.prototype.ja=function(h){return this.ug.T(h,0)},S.prototype.Sj=function(h,l){this.ug.S(h,0,l)},S.prototype.lb=function(h){return this.ug.T(h,1)},S.prototype.rc=function(h){return this.ua.T(h,0)},S.prototype.Jn=function(h){return this.ja(this.rc(h))},S.prototype.clear=function(){this.ug.mj(!0),this.ua.mj(!0),this.je=-1},S.prototype.B=function(){return this.ug.size==0},S.prototype.TF=function(){return this.ug.size},S.prototype.qz=function(h){return this.ua.T(h,3)},S}();d.au=O}(Y||(Y={})),function(d){d.ta=function(){function O(){}return O.Wd=function(S,h,l){return h=h.xr(),S=S!=null&&S.Xd!==void 0?S.Xd(0):0,l&&(h*=4,S*=1.1),Math.max(S,h)},O.Er=function(S){return 2*Math.sqrt(2)*S},O.rN=function(S){return Math.sqrt(2)*S},O.kj=function(S,h,l){var s=new d.l;return h.A(s),O.Wd(S,s,l)},O.wE=function(S,h,l){return h=h.Tg(1,0).xr(),S=S!=null?S.Xd(1):0,l&&(h*=4,S*=1.1),Math.max(S,h)},O.mv=function(S,h){var l=new d.l;return S.xc(l),S=new d.l,h.xc(S),l.Zb(S),l},O.YN=function(S){var h=new d.l;if(S.xc(h),h.B())return null;var l=new d.du(h,8),s=-1,a=new d.l,c=!1;do for(var p=0,y=S.da();p<y;p++){if(S.Rj(p,a),(s=l.Jz(p,a,s))==-1){if(c)throw d.i.fa("internal error");S.yp(h,!1),c=!0,l.reset(h,8);break}c=!1}while(c);return l},O.nE=function(S){var h=new d.l;S.xc(h);for(var l=new d.du(h,8),s=-1,a=S.Ga(),c=new d.l,p=!1;a.$a();)for(;a.Ha();){var y=a.ha(),v=a.wb();if(y.A(c),(s=l.Jz(v,c,s))==-1){if(p)throw d.i.Qa();S.yp(h,!1),p=!0,l.reset(h,8),a.Zi();break}}return l},O.jj=function(S,h){var l=new d.l;S.xc(l);for(var s=new d.du(l,8),a=-1,c=new d.l,p=S.Ga(),y=!1;p.$a();)for(;p.Ha();){var v=p.ha(),_=p.wb();if(v.A(c),c.isIntersecting(h)&&(a=s.Jz(_,c,a))==-1){if(y)throw d.i.fa("internal error.");S.yp(l,!1),y=!0,s.reset(l,8),p.Zi();break}}return s},O.oE=function(S,h){for(var l=new d.du(h,8),s=new d.h,a=!1,c=new d.l,p=0;p<S.I();p++)if(S.D(p,s),h.contains(s)&&(c.K(s),l.vj(p,c)==-1)){if(a)throw d.i.Qa();a=!0,p=new d.l,S.yp(p,!1),l.reset(p,8),p=-1}return l},O.lR=function(S,h,l){var s=new d.l,a=new d.l;S.xc(s),h.xc(a),s.W(l,l),a.W(l,l);var c=new d.l;c.K(s),c.Ea(a),S=S.Ga(),h=h.Ga();var p=new d.xC;p.aC(l);var y=!1;for(p.pK();S.$a();)for(;S.Ha();)S.ha().A(s),s.isIntersecting(c)&&(y=!0,(l=new d.l).K(s),p.JD(S.wb(),l));if(p.iF(),!y)return null;for(s=!1,p.oK();h.$a();)for(;h.Ha();)h.ha().A(a),a.isIntersecting(c)&&(s=!0,(l=new d.l).K(a),p.ED(h.wb(),l));return p.hF(),s?p:null},O.mR=function(S,h,l,s,a){var c=S.getType(),p=h.getType(),y=new d.l,v=new d.l;S.xc(y),h.xc(v),y.W(l,l),v.W(l,l);var _=new d.l;_.K(y),_.Ea(v);var x=new d.xC;x.aC(l);var T=!1;x.pK();var C=0;for(l=S.da();C<l;C++)s&&c==1736&&!S.Ev(C)||(S.Rj(C,y),y.isIntersecting(_)&&(T=!0,x.JD(C,y)));if(x.iF(),!T)return null;for(S=!1,x.oK(),s=0,l=h.da();s<l;s++)a&&p==1736&&!h.Ev(s)||(h.Rj(s,v),v.isIntersecting(_)&&(S=!0,x.ED(s,v)));return x.hF(),S?x:null},O.Ru=function(S,h,l){if(S!=h)for(var s=0;s<l;s++)S[s]==null?S[s]=d.h.al(h[s]):S[s].L(h[s])},O.Jy=function(S,h,l,s){var a=0;for(s+=0;a<s;l++,a++)S[a]==null&&(S[a]=[0,0]),S[a][0]=h[l].x,S[a][1]=h[l].y},O.Iy=function(S,h,l,s){var a=h,c=0;for(h=s+h;a<h;c++,a++)S[a]==null?S[a]=d.h.construct(l[c][0],l[c][1]):S[a].ma(l[c][0],l[c][1])},O.kP=function(S,h,l){if(S!=h)for(var s=0;s<l;s++)S[s]==null?S[s]=new d.Sa(h[s]):h[s].copyTo(S[s])},O.vE=function(S,h,l,s){var a=0;return S!=null&&(a=S.Xd(0),s&&!l||S==null||(a+=1.01*S.vz(0))),l&&(h*=4,a*=1.01),Math.max(a,h)},O.ty=function(S,h,l){return O.vE(S,h.xr(),l,!1)},O.gO=function(S,h){var l=new d.l;return h.A(l),O.ty(S,l,!0)},O.uy=function(S,h){return O.vE(S,h.xr(),!1,!0)},O.Hu=function(S,h){var l=new d.l;return h.A(l),O.uy(S,l)},O.AG=function(S,h,l,s){s*=s;var a=new d.h;if(a.uc(S,h),(S=new d.h).uc(l,h),h=a.Sk(),l=S.Sk(),h<=s&&l<=s)return!0;var c=d.lc.ox(a.wi(S));return(c<=s*h||c<=s*l)&&0<=a.Qh(S)},O.dK=function(S,h,l,s){for(var a=0;a<h;a++){var c=S[a].y,p=d.O.Rk(c,l,s);p!=c&&(S[a].y=p)}},O}()}(Y||(Y={})),function(d){var O,S,h=function(){function c(p){this.Ya=p}return c.prototype.compare=function(p,y,v){p=p.ja(v),v=this.Ya.nk(y);var _=this.Ya.nk(p);return v<_?-1:v==_?a.gq(y)&&a.Gv(p)?-1:a.gq(p)&&a.Gv(y)?1:0:1},c}(),l=function(){function c(p){this.Ya=p}return c.prototype.nr=function(p,y,v){this.Ya.GX(v,p,y)},c.prototype.$p=function(p){return this.Ya.nk(p)},c}();(S=O||(O={}))[S.initialize=0]="initialize",S[S.pIn=1]="pIn",S[S.pL=2]="pL",S[S.pR=3]="pR",S[S.pT=4]="pT",S[S.right=5]="right",S[S.left=6]="left",S[S.all=7]="all";var s=function(){function c(){this.Ya=null,this.Qi=new d.Nc,this.hi=new d.ia(0),this.sg=[0,0]}return c.prototype.Xi=function(p,y){this.Qi.oa=p.oa-y,this.Qi.va=p.va+y,this.hi.resize(0),this.he=0,this.sg[0]=0},c.prototype.EB=function(p,y,v){if(p>y)throw d.i.N();this.Qi.oa=p-v,this.Qi.va=y+v,this.hi.resize(0),this.he=0,this.sg[0]=0},c.prototype.Uo=function(p,y){this.Qi.oa=p-y,this.Qi.va=p+y,this.hi.resize(0),this.he=0,this.sg[0]=0},c.prototype.next=function(){if(!this.Ya.lq)throw d.i.Hb();if(0>this.he)return-1;for(var p=!0;p;)switch(this.sg[this.he]){case 1:p=this.FU();break;case 2:p=this.GU();break;case 3:p=this.HU();break;case 4:p=this.IU();break;case 5:p=this.GW();break;case 6:p=this.kT();break;case 7:p=this.tN();break;case 0:p=this.Gz();break;default:throw d.i.Qa()}return this.Og!=-1?this.Mp()>>1:-1},c.construct=function(p){var y=new c;return y.Ya=p,y.hi.Jb(20),y.he=-1,y},c.prototype.Gz=function(){return this.Og=this.vH=this.Mi=this.Lc=-1,this.Ya.me!=null&&0<this.Ya.me.size?(this.sg[0]=1,this.Mi=this.Ya.kf,!0):(this.he=-1,!1)},c.prototype.FU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.Og=this.he=-1,!1;var p=this.Ya.Np(this.Lc);return this.Qi.va<p?(p=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),p!=-1&&(this.ei=this.Ya.kl(p),this.sg[++this.he]=6),!0):p<this.Qi.oa?(p=this.Ya.mk(this.Lc),this.Mi=this.Ya.lk(this.Lc),p!=-1&&(this.ei=this.Ya.Zr(p),this.sg[++this.he]=5),!0):(this.sg[this.he]=2,this.vH=this.Lc,p=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),p!=-1&&(this.ei=this.Ya.kl(p),this.sg[++this.he]=7),!0)},c.prototype.GU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.sg[this.he]=3,this.Mi=this.Ya.lk(this.vH),!0;if(this.Ya.Np(this.Lc)<this.Qi.oa){var p=this.Ya.mk(this.Lc);return this.Mi=this.Ya.lk(this.Lc),p!=-1&&(this.ei=this.Ya.Zr(p),this.sg[++this.he]=5),!0}return p=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),p!=-1&&(this.ei=this.Ya.kl(p),this.sg[++this.he]=7),(p=this.Ya.lk(this.Lc))!=-1&&this.hi.add(p),!0},c.prototype.HU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.sg[this.he]=4,!0;if(this.Qi.va<this.Ya.Np(this.Lc)){var p=this.Ya.mk(this.Lc);return this.Mi=this.Ya.qj(this.Lc),p!=-1&&(this.ei=this.Ya.kl(p),this.sg[++this.he]=6),!0}return p=this.Ya.mk(this.Lc),this.Mi=this.Ya.lk(this.Lc),p!=-1&&(this.ei=this.Ya.kl(p),this.sg[++this.he]=7),(p=this.Ya.qj(this.Lc))!=-1&&this.hi.add(p),!0},c.prototype.IU=function(){if(this.hi.size==0)return this.Og=this.he=-1,!1;this.Lc=this.hi.get(this.hi.size-1),this.hi.resize(this.hi.size-1);var p=this.Ya.mk(this.Lc);return p!=-1&&(this.ei=this.Ya.kl(p),this.sg[++this.he]=7),this.Ya.qj(this.Lc)!=-1&&this.hi.add(this.Ya.qj(this.Lc)),this.Ya.lk(this.Lc)!=-1&&this.hi.add(this.Ya.lk(this.Lc)),!0},c.prototype.kT=function(){return this.Og=this.ei,this.Og!=-1&&a.gq(this.Mp())&&this.Ya.nk(this.Mp())<=this.Qi.va?(this.ei=this.SF(),!1):(this.he--,!0)},c.prototype.GW=function(){return this.Og=this.ei,this.Og!=-1&&a.Gv(this.Mp())&&this.Ya.nk(this.Mp())>=this.Qi.oa?(this.ei=this.QR(),!1):(this.he--,!0)},c.prototype.tN=function(){return this.Og=this.ei,this.Og!=-1&&a.gq(this.Mp())?(this.ei=this.SF(),!1):(this.he--,!0)},c.prototype.SF=function(){return this.Ya.Sf?this.Ya.$f.lb(this.Og):this.Ya.Ti.lb(this.Og)},c.prototype.QR=function(){return this.Ya.Sf?this.Ya.$f.we(this.Og):this.Ya.Ti.we(this.Og)},c.prototype.Mp=function(){return this.Ya.Sf?this.Ya.$f.ja(this.Og):this.Ya.Ti.getData(this.Og)},c}();d.EY=s;var a=function(){function c(p){this.Am=this.$h=this.$f=this.Ti=this.Km=this.Ej=this.me=this.Fj=null,this.Sf=p,this.lq=this.Sv=!1}return c.prototype.kr=function(){this.Nk(!0)},c.prototype.Br=function(p,y){if(!this.Sv)throw d.i.Hb();this.Fj.push(new d.Nc(p,y))},c.prototype.Fp=function(){if(!this.Sv)throw d.i.fa("invalid call");this.Sv=!1,this.lq=!0,this.Sf||(this.vS(),this.Zv=this.Fj.length)},c.prototype.vj=function(p){if(!this.Sf||!this.lq)throw d.i.N("invalid call");if(this.kf==-1){var y=this.Fj.length;if(this.iA){var v=new d.ia(0);v.Jb(2*y),this.bJ(v),this.$h.Jb(2*y),this.$h.resize(0),this.aJ(v),this.Km.resize(y,-1),this.Km.Wj(-1,0,y),this.iA=!1}else this.Km.Wj(-1,0,y);this.kf=this.Tu()}y=this.pG(p<<1,this.kf),v=this.$f.addElement(1+(p<<1),this.xz(y)),this.VJ(y,v),this.Km.set(p,y),this.Zv++},c.prototype.remove=function(p){if(!this.Sf||!this.lq)throw d.i.fa("invalid call");var y=this.Km.get(p);if(y==-1)throw d.i.N("the interval does not exist in the interval tree");this.Km.set(p,-1),this.Zv--;var v=this.xz(y),_=this.$f.ZR(v);this.$f.vd(this.wR(y),v),this.$f.vd(this.TR(y),v),(p=this.$f.size(v))==0&&(this.$f.MP(v),this.ZJ(_,-1)),this.Ej.jd(y),v=this.UF(_);var x=this.qj(_),T=this.lk(_);for(y=0;!(0<p||_==this.kf||x!=-1&&T!=-1);)_==this.qj(v)?x!=-1?(this.Ok(v,x),this.Uj(x,v),this.Ok(_,-1)):T!=-1?(this.Ok(v,T),this.Uj(T,v),this.Qk(_,-1)):this.Ok(v,-1):x!=-1?(this.Qk(v,x),this.Uj(x,v),this.Ok(_,-1)):T!=-1?(this.Qk(v,T),this.Uj(T,v),this.Qk(_,-1)):this.Qk(v,-1),this.Uj(_,-1),y++,_=v,p=(v=this.mk(_))!=-1?this.$f.size(v):0,x=this.qj(_),T=this.lk(_),v=this.UF(_)},c.prototype.reset=function(){if(!this.Sf||!this.lq)throw d.i.N("invalid call");this.Nk(!1)},c.prototype.size=function(){return this.Zv},c.prototype.getIterator=function(){return s.construct(this)},c.prototype.bJ=function(p){for(var y=this.Fj.length,v=0;v<2*y;v++)p.add(v);this.HX(p,2*y)},c.prototype.aJ=function(p){for(var y=NaN,v=0;v<p.size;v++){var _=p.get(v),x=this.nk(_);x!=y&&(this.$h.add(_),y=x)}},c.prototype.vS=function(){var p=this.Fj.length,y=new d.ia(0);y.Jb(2*p),this.bJ(y),this.$h.Jb(2*p),this.$h.resize(0),this.aJ(y),this.Ej.De(p),this.Ti.fn(2*p);var v=d.Yc.Oh(p);for(v.Wj(-1,0,p),this.kf=this.Tu(),p=0;p<y.size;p++){var _=y.get(p),x=v.get(_>>1);x!=-1?this.VJ(x,this.Ti.addElement(this.xz(x),_)):(x=this.pG(_,this.kf),v.set(_>>1,x))}},c.prototype.pG=function(p,y){var v=y,_=y,x=-1,T=0,C=this.$h.size-1,A=0,R=p>>1,F=NaN,N=NaN,B=!0,q=this.DR(R);for(R=this.AR(R);B;){T<C?(A=T+d.O.truncate((C-T)/2),this.gz(v)==-1&&this.FJ(v,this.$h.get(A),this.$h.get(A+1))):this.gz(v)==-1&&this.FJ(v,this.$h.get(T),this.$h.get(T));var U=this.Np(v);if(R<U)y!=-1&&(y==v?(_=v,F=U,N=(y=this.qj(v))!=-1?this.Np(y):NaN):N>U&&(U<F?this.Ok(_,v):this.Qk(_,v),this.Qk(v,y),this.Sf&&(this.Uj(v,_),this.Uj(y,v)),_=v,F=U,y=-1,N=NaN)),(C=this.xR(v))==-1&&(C=this.Tu(),this.dX(v,C)),v=C,C=A;else if(q>U)y!=-1&&(y==v?(_=v,F=U,N=(y=this.lk(v))!=-1?this.Np(y):NaN):N<U&&(U<F?this.Ok(_,v):this.Qk(_,v),this.Ok(v,y),this.Sf&&(this.Uj(v,_),this.Uj(y,v)),_=v,F=U,y=-1,N=NaN)),(T=this.UR(v))==-1&&(T=this.Tu(),this.oX(v,T)),v=T,T=A+1;else{(B=this.mk(v))==-1&&(B=this.zP(v),this.ZJ(v,B));var K=this.fN(B,p);x=this.xP(),this.qX(x,B),this.cX(x,K),v!=y&&(U<F?this.Ok(_,v):this.Qk(_,v),this.Sf&&this.Uj(v,_),y!=-1&&(N<U?this.Ok(v,y):this.Qk(v,y),this.Sf&&this.Uj(y,v))),B=!1}}return x},c.prototype.Tu=function(){return this.me.Ce()},c.prototype.zP=function(p){return this.Sf?this.$f.Pr(p):this.Ti.Ph(p)},c.prototype.xP=function(){return this.Ej.Ce()},c.prototype.Nk=function(p){p?(this.Sv=this.iA=!0,this.lq=!1,this.$h==null?this.$h=d.Yc.Oh(0):this.$h.resize(0),this.Fj==null?this.Fj=[]:this.Fj.length=0):this.iA=!1,this.Sf?this.Km==null?(this.Km=d.Yc.Oh(0),this.$f=new d.Yj,this.$f.Vo(new h(this))):this.$f.clear():this.Ti==null?this.Ti=new d.jp:this.Ti.clear(),this.me==null?(this.Ej=new d.$c(3),this.me=new d.$c(this.Sf?8:7)):(this.Ej.mj(!1),this.me.mj(!1)),this.kf=-1,this.Zv=0},c.prototype.FJ=function(p,y,v){this.XW(p,y),this.YW(p,v)},c.prototype.Np=function(p){var y=this.gz(p);return y==-1?NaN:(y=this.nk(y))==(p=this.nk(this.gR(p)))?y:.5*(y+p)},c.prototype.XW=function(p,y){this.me.S(p,0,y)},c.prototype.YW=function(p,y){this.me.S(p,1,y)},c.prototype.dX=function(p,y){this.me.S(p,3,y)},c.prototype.oX=function(p,y){this.me.S(p,4,y)},c.prototype.ZJ=function(p,y){this.me.S(p,2,y)},c.prototype.Ok=function(p,y){this.me.S(p,5,y)},c.prototype.Qk=function(p,y){this.me.S(p,6,y)},c.prototype.Uj=function(p,y){this.me.S(p,7,y)},c.prototype.qX=function(p,y){this.Ej.S(p,0,y)},c.prototype.fN=function(p,y){return this.Sf?this.$f.addElement(y,p):this.Ti.addElement(p,y)},c.prototype.cX=function(p,y){this.Ej.S(p,1,y)},c.prototype.VJ=function(p,y){this.Ej.S(p,2,y)},c.prototype.kl=function(p){return this.Sf?this.$f.rc(p):this.Ti.rc(p)},c.prototype.Zr=function(p){return this.Sf?this.$f.Fc(p):this.Ti.Fc(p)},c.gq=function(p){return!(1&p)},c.Gv=function(p){return!(1&~p)},c.prototype.gz=function(p){return this.me.T(p,0)},c.prototype.gR=function(p){return this.me.T(p,1)},c.prototype.mk=function(p){return this.me.T(p,2)},c.prototype.xR=function(p){return this.me.T(p,3)},c.prototype.UR=function(p){return this.me.T(p,4)},c.prototype.qj=function(p){return this.me.T(p,5)},c.prototype.lk=function(p){return this.me.T(p,6)},c.prototype.UF=function(p){return this.me.T(p,7)},c.prototype.xz=function(p){return this.Ej.T(p,0)},c.prototype.wR=function(p){return this.Ej.T(p,1)},c.prototype.TR=function(p){return this.Ej.T(p,2)},c.prototype.DR=function(p){return this.Fj[p].oa},c.prototype.AR=function(p){return this.Fj[p].va},c.prototype.HX=function(p,y){this.Am==null&&(this.Am=new d.Xt);var v=new l(this);this.Am.sort(p,0,y,v)},c.prototype.GX=function(p,y,v){var _=this;p.Vd(y,v,function(x,T){var C=_.nk(x),A=_.nk(T);return C<A||C==A&&c.gq(x)&&c.Gv(T)?-1:1})},c.prototype.nk=function(p){var y=this.Fj[p>>1];return c.gq(p)?y.oa:y.va},c}();d.sr=a}(Y||(Y={})),function(d){var O=function(){function S(h){if(h==null)throw d.i.fa("Invalid arguement");this.hf=h;var l=h.nR();l.hS()?h.ef.IG()?this.lo=d.si.PannableFold:this.lo=d.si.Clip:this.lo=d.si.DontClip,l.iS()?h.Yf.IG()?this.Qm=d.si.PannableFold:this.Qm=d.si.Clip:this.Qm=d.si.DontClip,this.Bm=l.Jr,this.mH=l.Vu,h=this.hf.sH,this.aH=h.hs(2147483648),this.Uv=h.hs(1073741824)}return S.zh=function(h,l,s){return l.ww.zh(h,s)},S.Rt=function(h,l,s,a){return h.ww.Rt(l,s,a)},S.Qt=function(h,l,s,a){if(s=0>s?l.length:s,(h=h.ww.Rt(l,s,a))==s)return h;for(var c=l=0;c<s;c++){var p=a[c];p.isNaN()||(l<c&&a[l].L(p),l++)}for(;l<s;l++)a[l].Rc();return h},S.transform=function(h,l,s,a,c){if(h.isIdentity())return d.ta.kP(a,l,s),s;for(var p=[],y=0,v=0;v<s;){for(var _=Math.min(p.length,s-v),x=v,T=0;x<_;x++,T++)p[T]==null?p[T]=l[x].D():l[x].D(p[T]);var C=c?S.Qt(h,p,_,p):S.Rt(h,p,_,p);for(T=x=0;x<C;x++,T++)a[v]==null&&(a[v]=new d.Sa(l[v])),a[v].Cb(p[T]);v+=_,y+=C}return y},S.prototype.Rt=function(h,l,s){if(this.hf.isIdentity())return h!=s&&d.ta.Ru(s,h,l),l;var a=this.hf.ef,c=this.hf.Yf,p=a.Sb(),y=c.Sb();if(p==0&&p===y){var v=a.Qp();return c=v/(c=c.Qp()),(v=new d.Dd).setScale(c,c),v.eY(h,l,s),l}if(v=d.O.Fu(Math.min(l,64)),p==3){var _=a.Ji;p=(a=_.fk()).Sb(),s!=h&&d.ta.Ru(s,h,l),d.zb.$k(_,s,l,!0),_.Qt(d.bm.forward,s,l),d.zb.Zk(_,s,l,!0)}if(p==3||y===3)throw d.i.fa("image: transform_in_place_");if(p==2)this.lo==d.si.Clip?(s!=h&&d.ta.Ru(s,h,l),h=a.ml(),d.zb.OS(h,a,s,l)):(s!=h&&d.ta.Ru(s,h,l),a.Wc()&&(p=a.Xd(0),_=a.Oe(),d.zb.EX(s,l,_,p),d.zb.qF(s,l,a,0))),d.zb.IL(a,s,l,v);else for(p=a.Xd(0),_=a.Oe(),a=0;a<l;a++)d.zb.FX(h[a],_,p,s[a]);for(d.zb.GL(this.hf,s,l,v),h=0,(y=y==2)?h=c.zi():isNaN(this.Bm)||(h=this.Bm),y&&this.Qm!=d.si.Clip||d.zb.qF(s,l,c.sc(),h),y&&(d.zb.yG(s,l,c,this.Qm),d.zb.HL(c,s,l,v)),h=l,a=0;a<l;++a)s[a].isNaN()&&h--;return h},S.prototype.zh=function(h,l){if(this.hf.isIdentity()||h.B())return h;if(h.getType()==33)return this.XI(h);var s=this.hf.ef,a=this.hf.Yf,c=s.Sb(),p=a.Sb();if(c==0&&c==p)return l=s.Qp(),l/=a=a.Qp(),(a=new d.Dd).setScale(l,l),(h=d.aa.jg(h)).Oc(a),h;switch(h.getType()){case 1607:case 1736:h=this.VI(h,l);break;case 550:h=this.fW(h,l);break;case 197:h=this.eW(h,l);break;default:throw d.i.fa("")}return h},S.prototype.XI=function(h){var l=h.D(),s=[];return s[0]=l,this.Rt(s,1,s),(h=new d.Sa(h)).Cb(s[0]),h},S.prototype.VI=function(h,l){if(h.tm())throw d.i.fa("curves not supported");var s=h.getType();if(s==1736)return this.gW(h,l);if(s==1607)return this.hW(h,l);throw d.i.fa("projectMultiPath")},S.prototype.gW=function(h,l){var s=this.hf.ef,a=this.hf.Yf,c=s.Sb(),p=a.Sb(),y=d.O.Fu(Math.min(h.I(),64)),v=d.Da.jg(h);c==3&&(c=(s=(h=s.Ji).fk()).Sb(),v=h.$k(v,!0),this.wp(h,d.bm.forward,v),v=h.Zk(v,!0)),h=null,p==3&&(p=(a=(h=a.Ji).fk()).Sb());var _=c==2,x=p==2,T=x?a.sc():a,C=!x&&!this.Uv;p=!1;var A=v;if(_){if((A=d.zb.UI(A,s,this.lo,l)).B())return A}else{if(v=new d.l,A.xc(v),c=s.Oe(),v.G<c.G||v.H>c.H){var R=d.l.construct(v.v-1,c.G,v.C+1,c.H);if((A=d.ri.Nu(A,R,s,NaN,0,l)).B())return A}v.R()>2*c.R()&&(A=d.zb.Hp(A,-2*c.R(),2*c.R(),s,!0,0,!0,l))}v=this.mH,(c=!isNaN(v))&&(A=d.Xl.local().V(A,v,l)),R=x?a.kk():null;var F=NaN;_&&(F=s.zi());var N=a.Wr()!=null;if(this.aH)_&&(d.zb.ur(s,F,A,y),c&&(_=s.hh(),v*=(F=s.sc().hh())/_)),d.zb.tr(this.hf,A,C,y),c&&(_=s.sc().hh(),v*=(F=a.sc().hh())/_),s=A;else{var B=new d.Ta(A.description);B.DD(A),_&&(d.zb.ur(s,F,B,y),c&&(_=s.hh(),v*=(F=s.sc().hh())/_)),d.zb.tr(this.hf,B,C,y),c&&(_=s.sc().pm(),v*=(F=a.sc().pm())/_),C=NaN,x?(R=a.kk(),C=a.zi()):isNaN(this.Bm)||(C=this.Bm),_=S.tv(s)|S.tv(a),F=10*T.Xd(0),this.Uv&&(_=3,F=0),s=d.zb.UQ(A,s,B,T,C,l,_,F)}return N&&(s=d.zb.XD(s,a,l)),x&&(p||(x=T.Oe().R(),s.Tg(0,0).R()>=x-T.Xd(0)&&(T=R.getNorthPoleLocation(),x=R.getSouthPoleLocation(),A=R.getNorthPoleGeometry(),R=R.getSouthPoleGeometry(),C=0,A==d.Cg.PE_POLE_POINT&&T!=d.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(C=1),R==d.Cg.PE_POLE_POINT&&x!=d.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(C|=2),C!==0&&(p=!0))),s=d.zb.Mz(s,a,this.Qm,l),c&&(s=d.Xl.local().V(s,v,l)),d.zb.Lx(a,s,y)),s.B()||(p&&(s=d.Yl.local().V(s,a,!1,l)),h!=null&&(s=h.Zk(s,!1),this.wp(h,d.bm.reverse,s),s=h.$k(s,!1))),s},S.tv=function(h){if(h.Sb()!=2)return 0;var l=0,s=h.kk();h=s.getNorthPoleLocation();var a=s.getSouthPoleLocation(),c=s.getNorthPoleGeometry();return s=s.getSouthPoleGeometry(),c==d.Cg.PE_POLE_POINT&&h!=d.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(l=1),s==d.Cg.PE_POLE_POINT&&a!=d.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(l|=2),l},S.prototype.hW=function(h,l){var s=this.hf.ef,a=this.hf.Yf,c=s.Sb(),p=a.Sb(),y=d.O.Fu(Math.min(h.I(),64)),v=d.Ta.jg(h);c==3&&(c=(s=(h=s.Ji).fk()).Sb(),v=h.$k(v,!0),this.wp(h,d.bm.forward,v),v=h.Zk(v,!0)),h=null,p==3&&(p=(a=(h=a.Ji).fk()).Sb());var _=c==2;c=(p=p==2)?a.sc():a;var x=!p&&!this.Uv;if(_){if((v=d.zb.UI(v,s,this.lo,l)).B())return v}else{var T=new d.l;v.xc(T);var C=s.Oe();if((T.G<C.G||T.H>C.H)&&(T=d.l.construct(T.v-1,C.G,T.C+1,C.H),(v=d.ri.Nu(v,T,s,NaN,0,l)).B()))return v}var A=NaN;_&&(A=s.zi()),T=a.Wr()!=null,C=this.mH;var R=!isNaN(C);if(R&&(v=d.Xl.local().V(v,C,l)),this.aH)_&&d.zb.ur(s,A,v,y),R&&(_=s.hh(),C*=(A=s.sc().hh())/_),d.zb.tr(this.hf,v,x,y),R&&(_=s.sc().hh(),C*=(A=a.sc().hh())/_),s=v;else{var F=new d.Ta(v.description);F.DD(v),_&&(d.zb.ur(s,A,F,y),R&&(_=s.hh(),C*=(A=s.sc().hh())/_)),d.zb.tr(this.hf,F,x,y),R&&(_=s.sc().hh(),C*=(A=a.sc().hh())/_),x=NaN,p?x=a.zi():isNaN(this.Bm)||(x=this.Bm),_=S.tv(s)|S.tv(a),A=10*c.Xd(0),this.Uv&&(_=3,A=0),s=d.zb.VQ(v,s,F,c,x,l,_,A)}return T&&(s=d.zb.XD(s,a,l)),p&&(s=d.zb.Mz(s,a,this.Qm,l),R&&(s=d.Xl.local().V(s,C,l)),d.zb.Lx(a,s,y)),s.B()||h!=null&&(s=h.Zk(s,!1),this.wp(h,d.bm.reverse,s),s=h.$k(s,!1)),s},S.prototype.eW=function(h,l){var s=(h.ca()+h.R())/400;return s!=0?(s=d.Xl.local().V(h,s,l),s=this.VI(s,l),l=h.Ia(),s.bn(l)):(l=new d.Sa(h.Ip()),s=this.XI(l),l=h.Ia(),s.B()?l.Oa():(h.copyTo(l),h=s.D(),l.K(h.x,h.y,h.x,h.y))),l},S.prototype.fW=function(h,l){h=d.aa.jg(h);var s=this.hf.ef,a=this.hf.Yf,c=s.Sb(),p=a.Sb(),y=d.O.Fu(Math.min(h.I(),64));if(c==3){var v=s.Ji;c=(s=v.fk()).Sb(),h=v.Zk(h,!0),this.wp(v,d.bm.forward,h),h=v.$k(h,!0)}if(c==2){if(this.lo==d.si.Clip?h=d.Xj.local().V(h,s.ml(),s,l):s.Wc()&&(c=new d.l,h.xc(c),s.Oe().contains(c)||(this.lo==d.si.PannableFold&&(h=d.zb.lj(h,s)),d.zb.Jt(h,s.Oe(),s.Xd(0),!0),h=d.zb.Fn(h,s,0,!0,0,l))),h.B())return h;d.zb.ur(s,0,h,y)}else d.zb.Jt(h,s.Oe(),s.Xd(0),!0);return d.zb.tr(this.hf,h,!1,y),s=0,c=!1,v=null,p==3&&(c=!0,p=(a=(v=a.Ji).fk()).Sb()),(p=p==2)?s=a.zi():isNaN(this.Bm)||(s=this.Bm),p&&this.Qm!=d.si.Clip||(h=d.zb.Fn(h,a.sc(),s,!1,0,l)),p&&(h=d.zb.Mz(h,a,this.Qm,l),d.zb.Lx(a,h,y),h.B())||c&&(h=v.Zk(h,!0),this.wp(v,d.bm.reverse,h),h=v.$k(h,!0)),h},S.prototype.wp=function(h,l,s){var a=s.I();if(a!=0){for(var c=s.ub(0),p=d.O.lg(200,0),y=[],v=0;v<a;){var _=Math.min(100,a-v);c.Vw(2*v,2*_,p,2,!0);for(var x=0;x<_;++x)y[x]=d.h.construct(p[2*v],p[2*v+1]);h.Qt(l,y,_),v+=_}s.Pc(1993)}},S.Uy=function(h,l,s){if(h==null||l==null||!l.Wc())throw d.i.fa("Invalid Arguement");if(h.B())return h;var a=h.getType();return a==197?(a=new d.Da(h.description)).ad(h,!1):d.aa.yd(a)?(a=new d.Ta(h.description)).oc(h,!0):a=h,(a=d.zb.lj(a,l)).B()?a:d.zb.Fn(a,l,0,a!=h,0,s)},S.nj=function(h,l,s,a){if(h==null||l==null||!l.Wc())throw d.i.fa("Invalid Arguement");if(h.B())return h;var c=h.getType();if(d.aa.Hc(c)){h=d.zb.lj(h,l),c=new d.l,h.A(c);for(var p=d.ta.ty(l,c,!1),y=l.gh(),v=Math.floor((c.v-y.v)/y.R())*y.R()+y.v;v<c.C;)v>c.v+p&&v<c.C-p&&(h=d.zb.uS(h,l,s,v)),v+=y.R()}else{if(c==197)return(c=new d.Da(h.description)).ad(h,!1),S.nj(c,l,s,a);if(d.aa.yd(c))return(c=new d.Ta(h.description)).oc(h,!0),S.nj(c,l,s,a)}return S.Uy(h,l,a)},S}();d.bu=O}(Y||(Y={})),function(d){var O=function(S){function h(l,s,a,c){var p=S.call(this)||this;return l===void 0?p.description=d.ee.og():a===void 0?p.description=l:(p.description=d.ee.og(),p.ZB(l,s),p.Ql(a,c)),p}return Wt(h,S),h.prototype.getType=function(){return 322},h.prototype.Qb=function(){var l=this.sa-this.pa,s=this.na-this.la;return Math.sqrt(l*l+s*s)},h.prototype.Bi=function(l){var s=this.sa-this.pa,a=this.na-this.la;return Math.sqrt(s*s+a*a)<=l},h.prototype.Pn=function(){return!1},h.prototype.kg=function(){var l=new d.h;return l.uc(this.wc(),this.ac()),l},h.cP=function(l,s){return new h(l.x,l.y,s.x,s.y)},h.prototype.bn=function(l){l.Oa(),l.Nf(this.description);var s=new d.l;this.A(s),l.Xo(s),s=1;for(var a=this.description.Aa;s<a;s++)for(var c=this.description.kd(s),p=d.ra.Va(c);s<p;s++){var y=this.Tg(c,0);l.setInterval(c,0,y)}},h.prototype.A=function(l){l.K(this.sa,this.na,this.pa,this.la),l.normalize()},h.prototype.Qo=function(l){l.Oa(),l.Zb(this.sa,this.na,this.Od(0,1,0)),l.Zb(this.pa,this.la,this.Od(1,1,0))},h.prototype.Oc=function(l){if(l instanceof d.Dd){this.vc();var s=new d.h;s.x=this.sa,s.y=this.na,l.Eh(s,s),this.sa=s.x,this.na=s.y,s.x=this.pa,s.y=this.la,l.Eh(s,s),this.pa=s.x,this.la=s.y}else this.vc(),(s=new d.Nd).x=this.sa,s.y=this.na,s.z=this.Od(0,1,0),s=l.fp(s),this.sa=s.x,this.na=s.y,this.tn(0,1,0,s.z),s.x=this.pa,s.y=this.la,s.z=this.Od(1,1,0),s=l.fp(s),this.pa=s.x,this.la=s.y,this.tn(1,1,0,s.z)},h.prototype.Ia=function(){return new h(this.description)},h.prototype.Tx=function(l,s){return(this.pa-l-(this.sa-l))*(this.la-s+(this.na-s))*.5},h.prototype.vx=function(l){return l*this.Qb()},h.prototype.NG=function(l){return l/this.Qb()},h.prototype.DF=function(l){return d.lc.hq(this.sa,this.pa,l)},h.prototype.fR=function(l){return d.lc.hq(this.na,this.la,l)},h.prototype.dl=function(l,s){var a=new d.ig;return this.ah(l,s,a),a.get()},h.prototype.ah=function(l,s,a){if(a==null)throw d.i.N();a.Or(),(a=a.get()).Nf(this.description);var c=new d.h;this.hc(l,c),a.ZB(c.x,c.y),this.hc(s,c),a.Ql(c.x,c.y),c=1;for(var p=this.description.Aa;c<p;c++)for(var y=this.description.Ed(c),v=d.ra.Va(y),_=0;_<v;_++){var x=this.Uc(l,y,_);a.YB(y,_,x),x=this.Uc(s,y,_),a.OB(y,_,x)}},h.prototype.Uc=function(l,s,a){if(s==0)return a==0?this.hc(l).x:this.hc(l).y;switch(d.ra.lz(s)){case 0:return .5>l?this.wv(s,a):this.gv(s,a);case 1:var c=this.wv(s,a);return s=this.gv(s,a),d.lc.hq(c,s,l);case 2:throw d.i.fa("not implemented")}throw d.i.Qa()},h.prototype.fe=function(l,s){var a=this.pa-this.sa,c=this.la-this.na,p=a*a+c*c;return p==0?.5:(l=((l.x-this.sa)*a+(l.y-this.na)*c)/p,s||(0>l?l=0:1<l&&(l=1)),l)},h.prototype.cq=function(l,s,a,c){if(l){if((l=this.la-this.na)==0)return s==this.la?-1:0;if(0>(s=(s-this.na)/l)||1<s)return 0;a!=null&&(a[0]=this.DF(s))}else{if((l=this.pa-this.sa)==0)return s==this.pa?-1:0;if(0>(s=(s-this.sa)/l)||1<s)return 0;a!=null&&(a[0]=this.fR(s))}return c!=null&&(c[0]=s),1},h.prototype.Pe=function(l,s){var a=this.la-this.na;return a==0?l==this.la?s:NaN:(l=(l-this.na)/a,s=this.DF(l),l==1&&(s=this.pa),s)},h.prototype.ru=function(l,s,a){return 0<=this.rp(l.x,l.y,s,a)},h.prototype.vi=function(l,s,a){return 0<=this.rp(l,s,a,!0)},h.prototype.qs=function(l,s){return this.ru(l,s,!1)},h.prototype.rI=function(){if(this.la<this.na||this.la==this.na&&this.pa<this.sa){var l=this.sa;this.sa=this.pa,this.pa=l,l=this.na,this.na=this.la,this.la=l,l=0;for(var s=this.description.Oq-2;l<s;l++){var a=this.ka[l];this.ka[l]=this.ka[l+s],this.ka[l+s]=a}}},h.prototype.uu=function(l,s){(s=d.h.construct(l,s)).sub(this.ac());var a=new d.h;return a.uc(this.wc(),this.ac()),(l=a.wi(s))>(s=8881784197001252e-31*(Math.abs(a.x*s.y)+Math.abs(a.y*s.x)))?-1:l<-s?1:0},h.prototype.rp=function(l,s,a,c){var p=this.sa,y=this.na,v=l-p,_=s-y;if((v=Math.sqrt(v*v+_*_))<=Math.max(a,6661338147750939e-31*v))return c&&v==0?NaN:0;if(v=l-this.pa,_=s-this.la,(v=Math.sqrt(v*v+_*_))<=Math.max(a,6661338147750939e-31*v))return c&&v==0?NaN:1;if(v=this.pa-this.sa,_=this.la-this.na,0<(c=Math.sqrt(v*v+_*_))){var x=1/c,T=l-p,C=s-y,A=T*(v*=x)+C*(_*=x),R=17763568394002505e-31*(Math.abs(T*v)+Math.abs(C*_)),F=v;if(v=-_,_=F,A<-(R=Math.max(a,R))||A>c+R)return NaN;if(Math.abs(T*v+C*_)<=Math.max(a,17763568394002505e-31*(Math.abs(T*v)+Math.abs(C*_)))&&(.5>=(v=d.O.Rk(A*x,0,1))?(_=this.sa+(this.pa-this.sa)*v,c=this.na+(this.la-this.na)*v):(_=this.pa-(this.pa-this.sa)*(1-v),c=this.la-(this.la-this.na)*(1-v)),d.h.Oy(_,c,l,s)<=a)){if(.5>v){if(d.h.Oy(_,c,p,y)<=a)return 0}else if(d.h.Oy(_,c,this.pa,this.la)<=a)return 1;return v}}return NaN},h.prototype.Nb=function(l){return l!=null&&(l==this||l.constructor===this.constructor&&this.FM(l))},h.prototype.rD=function(l,s,a){var c=a?this.sa:this.pa;a=a?this.na:this.la;var p=new d.h;return p.x=l.pa-c,p.y=l.la-a,!(s.Qh(p)>6661338147750939e-31*s.fD(p))||(p.x=l.sa-c,p.y=l.na-a,s.Qh(p)<=6661338147750939e-31*s.fD(p))},h.prototype.qD=function(l){var s=new d.h;return s.x=this.pa-this.sa,s.y=this.la-this.na,!!this.rD(l,s,!1)&&(s.Sq(),!!this.rD(l,s,!0))},h.NM=function(l,s){var a=l.uu(s.sa,s.na),c=l.uu(s.pa,s.la);return!(0>a&&0>c||0<a&&0<c)&&(a=s.uu(l.sa,l.na),c=s.uu(l.pa,l.la),!(0>a&&0>c||0<a&&0<c)&&((a=l.Qb())>(c=s.Qb())?l.qD(s):s.qD(l)))},h.LM=function(l,s,a){var c=d.h.construct(NaN,NaN),p=l.pa-l.sa,y=l.la-l.na,v=s.pa-s.sa,_=s.la-s.na,x=v*y-p*_;if(x==0)return c;var T=8881784197001252e-31*(Math.abs(v*y)+Math.abs(p*_)),C=s.sa-l.sa,A=s.na-l.na,R=v*A-C*_,F=R/x,N=Math.abs(x);return F<-(v=(8881784197001252e-31*(Math.abs(v*A)+Math.abs(C*_))*N+T*Math.abs(R))/(x*x)+2220446049250313e-31*Math.abs(F))||F>1+v||(v=(_=p*A-C*y)/x)<-(p=(8881784197001252e-31*(Math.abs(p*A)+Math.abs(C*y))*N+T*Math.abs(_))/(x*x)+2220446049250313e-31*Math.abs(v))||v>1+p||(F=d.O.Rk(F,0,1),p=d.O.Rk(v,0,1),y=l.hc(F),x=s.hc(p),(T=new d.h).uc(y,x),T.length()>a&&(T.add(y,x),T.scale(.5),F=l.fe(T,!1),p=s.fe(T,!1),l=l.hc(F),s=s.hc(p),l.sub(s),l.length()>a)||c.ma(F,p)),c},h.OM=function(l,s,a,c){var p=0;if((l.sa==s.sa&&l.na==s.na||l.sa==s.pa&&l.na==s.la)&&(p++,!c))return 1;if(l.pa==s.sa&&l.la==s.na||l.pa==s.pa&&l.la==s.la){if(++p==2)return 2;if(!c)return 1}return s.vi(l.sa,l.na,a)||s.vi(l.pa,l.la,a)||l.vi(s.sa,s.na,a)||l.vi(s.pa,s.la,a)?1:c&&p!=0||h.NM(l,s)==0?0:1},h.Zx=function(l,s,a,c,p,y){var v=0,_=l.rp(s.sa,s.na,y,!1),x=l.rp(s.pa,s.la,y,!1),T=s.rp(l.sa,l.na,y,!1),C=s.rp(l.pa,l.la,y,!1);return isNaN(_)||(c!=null&&(c[v]=_),p!=null&&(p[v]=0),a!=null&&(a[v]=d.h.construct(s.sa,s.na)),v++),isNaN(x)||(c!=null&&(c[v]=x),p!=null&&(p[v]=1),a!=null&&(a[v]=d.h.construct(s.pa,s.la)),v++),v==2||isNaN(T)||_==0&&T==0||x==0&&T==1||(c!=null&&(c[v]=0),p!=null&&(p[v]=T),a!=null&&(a[v]=d.h.construct(l.sa,l.na)),v++),v==2||isNaN(C)||_==1&&C==0||x==1&&C==1||(c!=null&&(c[v]=1),p!=null&&(p[v]=C),a!=null&&(a[v]=d.h.construct(s.pa,s.la)),v++),0<v?(v==2&&c!=null&&c[0]>c[1]&&(l=c[0],c[0]=c[1],c[1]=l,p!=null&&(c=p[0],p[0]=p[1],p[1]=c),a!=null&&(p=d.h.construct(a[0].x,a[0].y),a[0]=a[1],a[1]=p)),v):(v=h.LM(l,s,y),isNaN(v.x)?0:(a!=null&&(a[0]=l.hc(v.x)),c!=null&&(c[0]=v.x),p!=null&&(p[0]=v.y),1))},h.prototype.eG=function(){return 0},h.prototype.op=function(){},h.prototype.toString=function(){return"Line: ["+this.sa.toString()+", "+this.na.toString()+", "+this.pa.toString()+", "+this.la.toString()+"]"},h}(d.SC);d.yb=O}(Y||(Y={})),function(d){var O=function(){function S(){this.Jm=[],this.ya=-1}return S.prototype.La=function(){return this.ya},S.prototype.next=function(){if(this.Jm!=null&&this.Jm.length!=0){this.ya++;var h=this.Jm[0];return this.Jm=1>=this.Jm.length?[]:this.Jm.slice(1),h}return this.Jm=null},S.prototype.ZX=function(h){this.Jm.push(h)},S.prototype.qe=function(){},S}();d.gL=O}(Y||(Y={})),function(d){var O;(O=d.SL||(d.SL={}))[O.enumFillRuleOddEven=0]="enumFillRuleOddEven",O[O.enumFillRuleWinding=1]="enumFillRuleWinding";var S=function(h){function l(s,a){var c=h.call(this)||this;if(c.xf=!1,c.Eq=null,c.sq=0,c.rq=0,c.Aj=null,c.Mg=!1,c.nb=null,c.mb=null,c.Ve=null,c.Lj=null,c.Sd=null,c.tq=0,c.gb=0,c.xq=0,a===void 0)c.xf=s,c.Mg=!1,c.tq=0,c.sq=0,c.rq=0,c.wa=0,c.description=d.ee.og();else{if(a==null)throw d.i.N();c.xf=s,c.Mg=!1,c.tq=0,c.sq=0,c.rq=0,c.wa=0,c.description=a}return c.Aj=null,c.gb=0,c}return Wt(l,h),l.prototype.tm=function(){return 0<this.tq},l.prototype.Yx=function(){this.vc(),this.Eq==null?this.Eq=new d.Sa(this.description):this.Eq.Nf(this.description)},l.prototype.sx=function(s,a){var c=new d.h;c.x=s,c.y=a,this.Lt(c)},l.prototype.Lt=function(s){this.Yx(),this.Eq.Cb(s),this.Mg=!0},l.prototype.nf=function(s){if(s.B())throw d.i.N();this.Jl(s.description),this.Yx(),s.copyTo(this.Eq),this.Mg=!0},l.prototype.Sx=function(){var s=1;this.Mg&&(this.Yx(),this.nb==null?(this.nb=d.Yc.Oh(2),this.nb.write(0,0),this.mb=d.Yc.Mr(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.xf&&this.mb.write(this.mb.size-2,1),s++);var a=this.wa;this.nb.write(this.nb.size-1,this.wa+s),this.dm(a+s),this.mb.write(this.nb.size-1,0),this.Mg&&(this.Ht(a,this.Eq),this.Mg=!1)},l.prototype.yj=function(s,a){this.Sx(),this.Cb(this.wa-1,s,a)},l.prototype.Ci=function(s){this.Sx(),this.Cb(this.wa-1,s)},l.prototype.lineTo=function(s){this.Sx(),this.Ht(this.wa-1,s)},l.prototype.CU=function(s){if(this.vc(),this.xf)throw d.i.Qa();var a=this.da();if(s>a)throw d.i.Qa();if(this.dc(s)){if(this.mb==null)throw d.i.Qa();var c=this.wa,p=this.Ba(s),y=this.Vc(s);this.dm(this.wa+1),this.mc();for(var v=0,_=this.description.Aa;v<_;v++)if(this.za[v]!=null){var x=d.ra.Va(this.description.Ed(v));this.za[v].Mn(x*y,this.za[v],x*p,x,!0,1,x*c)}for(;a>s;a--)c=this.nb.read(a),this.nb.write(a,c+1);this.mb.KE(s,1)}},l.prototype.Ap=function(){if(this.wx(),s===void 0){this.Mg=!1;var s=this.da()-1}var a=this.mb.read(s);this.mb.write(s,1|a),this.Ve!=null&&(s=this.Vc(s)-1,this.Ve.write(s,1),this.Lj.write(s,-1))},l.prototype.dc=function(s){return!!(1&this.mb.read(s))},l.prototype.Nn=function(s){if(this.dc(s))return!0;var a=this.Ba(s);return!(a>(s=this.Vc(s)-1))&&(a=this.Na(a),s=this.Na(s),a.qb(s))},l.prototype.yv=function(s){return!!(2&this.mb.read(s))},l.prototype.oc=function(s,a){if(this.Jl(s.description),s.getType()!=322)throw d.i.Qa();var c=new d.Sa;(a||this.B())&&(s.To(c),this.nf(c)),s.Po(c),this.lineTo(c)},l.prototype.tp=function(s){var a=this.wa==0;this.sx(s.v,s.G),this.yj(s.v,s.H),this.yj(s.C,s.H),this.yj(s.C,s.G),this.Ap(),this.Mg=!1,a&&this.Lf(256,!1)},l.prototype.ad=function(s,a){if(!s.B()){for(var c=this.wa==0,p=new d.Sa(this.description),y=0;4>y;y++)s.Hf(a?4-y-1:y,p),y==0?this.nf(p):this.lineTo(p);this.Ap(),this.Mg=!1,c&&!a&&this.Lf(256,!1)}},l.prototype.add=function(s,a){for(var c=0;c<s.da();c++)this.addPath(s,c,!a)},l.prototype.addPath=function(s,a,c){this.vf(-1,s,a,c)},l.prototype.Yk=function(s,a){this.Hz(s,a)},l.prototype.Dr=function(s,a,c,p,y){if(y||this.da()!=0||(y=!0),0>a&&(a=s.da()-1),a>=s.da()||0>c||0>p||p>s.rv(a))throw d.i.fa("index out of bounds");if(p!=0){var v=s.dc(a)&&c+p==s.rv(a);if(!v||p!=1){if(this.Mg=!1,this.Jl(s.description),c=s.Ba(a)+c+1,y&&(p++,c--),v&&p--,v=this.wa,this.dm(this.wa+p),this.mc(),y){if(p==0)return;this.nb.add(this.wa),y=s.mb.read(a),y&=-5,this.xf&&(y|=1),this.mb.write(this.mb.size-1,y),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.wa);y=0;for(var _=this.description.Aa;y<_;y++){var x=this.description.kd(y),T=d.ra.Va(x),C=s.description.Pf(x);0>C||s.za[C]==null?this.za[y].Ln(T*v,d.ra.se(x),p*T,T*v):this.za[y].Mn(T*v,s.za[C],T*c,p*T,!0,T,T*v)}if(this.tm()||s.yv(a))throw d.i.Qa();this.Pc(1993)}}},l.prototype.oJ=function(){for(var s=0,a=this.da();s<a;s++)this.FW(s)},l.prototype.FW=function(s){if(this.mc(),s>=this.da())throw d.i.N();var a=this.Ba(s),c=this.Ja(s);s=this.dc(s)?1:0;for(var p=0,y=this.description.Aa;p<y;p++)if(this.za[p]!=null){var v=d.ra.Va(this.description.Ed(p));this.za[p].ni(v*(a+s),v*(c-s),v)}this.Pc(1993)},l.prototype.Zq=function(s){this.mc();var a=this.da();if(0>s&&(s=a-1),s>=a)throw d.i.N();for(var c=this.Ba(s),p=this.Ja(s),y=0,v=this.description.Aa;y<v;y++)if(this.za[y]!=null){var _=d.ra.Va(this.description.Ed(y));this.za[y].En(_*c,_*p,_*this.wa)}for(c=s+1;c<=a;c++)y=this.nb.read(c),this.nb.write(c-1,y-p);if(this.mb==null)for(c=s+1;c<=a;c++)s=this.mb.read(c),this.mb.write(c-1,s);this.nb.resize(a),this.mb.resize(a),this.wa-=p,this.Pg-=p,this.Pc(1993)},l.prototype.vf=function(s,a,c,p){if(a==this||c>=a.da())throw d.i.N();var y=this.da();if(s>y)throw d.i.N();0>s&&(s=y),0>c&&(c=a.da()-1),this.Mg=!1,this.Jl(a.description),a.mc();var v=a.Ba(c),_=a.Ja(c),x=this.wa,T=a.dc(c)&&!p?1:0;this.dm(this.wa+_),this.mc();for(var C=s<y?this.Ba(s):x,A=0,R=this.description.Aa;A<R;A++){var F=this.description.Ed(A),N=a.description.Pf(F),B=d.ra.Va(F);0<=N&&a.za[N]!=null?(T!=0&&this.za[A].Mn(C*B,a.za[N],B*v,B,!0,B,B*x),this.za[A].Mn((C+T)*B,a.za[N],B*(v+T),B*(_-T),p,B,B*(x+T))):this.za[A].Ln(C*B,d.ra.se(F),B*_,B*x)}for(this.nb.add(x+_),p=y;p>=s+1;p--)v=this.nb.read(p-1),this.nb.write(p,v+_);for(a.yv(c),this.mb.add(0),p=y-1;p>=s+1;p--)y=this.mb.read(p),y&=-5,this.mb.write(p+1,y);y=a.JR().read(c),y&=-5,this.xf&&(y|=1),this.mb.write(s,y)},l.prototype.Hz=function(s,a){var c=-1,p=this.da();if(c>p)throw d.i.N();0>c&&(c=p),this.Mg=!1;var y=this.wa;this.dm(this.wa+a),this.mc();var v=c<p?this.Ba(c):y;if(s!=null)this.za[0].Iz(2*v,s,0,a,!0,2*y);else{var _=d.ra.se(0);this.za[0].Ln(2*v,_,2*a,2*y)}s=1;for(var x=this.description.Aa;s<x;s++){_=this.description.kd(s);var T=d.ra.Va(_);_=d.ra.se(_),this.za[s].Ln(v*T,_,T*a,T*y)}for(this.nb.add(this.wa),y=p;y>=c+1;y--)v=this.nb.read(y-1),this.nb.write(y,v+a);for(this.mb.add(0),y=p-1;y>=c+1;y--)a=this.mb.read(y),a&=-5,this.mb.write(y+1,a);this.xf&&this.mb.write(c,1)},l.prototype.qG=function(s,a,c){var p=-1;if(0>s&&(s=this.da()),s>this.da()||p>this.Ja(s)||c>a.length)throw d.i.fa("index out of bounds");if(c!=0){s==this.da()&&(this.nb.add(this.wa),this.xf?this.mb.add(1):this.mb.add(0)),0>p&&(p=this.Ja(s)),this.mc();var y=this.wa;this.dm(this.wa+c),this.mc();for(var v=0,_=this.description.Aa;v<_;v++){var x=this.description.Ed(v),T=d.ra.Va(x);this.za[v].Ut(T*(this.Ba(s)+p+c),(y-this.Ba(s)-p)*T,this.za[v],T*(this.Ba(s)+p),!0,T),v==0?this.za[v].vC(T*(this.Ba(s)+p),c,a,0,!0):this.za[v].Wj(d.ra.se(x),(this.Ba(s)+p)*T,c*T)}for(this.tm()&&(this.Ve.Ut(this.Ba(s)+p+c,y-this.Ba(s)-p,this.Ve,this.Ba(s)+p,!0,1),this.Lj.Ut(this.Ba(s)+p+c,y-this.Ba(s)-p,this.Lj,this.Ba(s)+p,!0,1),this.Ve.Wj(1,this.Ba(s)+p,c),this.Lj.Wj(-1,this.Ba(s)+p,c)),s+=1,a=this.da();s<=a;s++)this.nb.write(s,this.nb.read(s)+c)}},l.prototype.wf=function(s,a,c){var p=this.da();if(0>s&&(s=this.da()),s>=p||a>this.Ja(s))throw d.i.fa("index out of bounds");s==this.da()&&(this.nb.add(this.wa),this.xf?this.mb.add(1):this.mb.add(0)),0>a&&(a=this.Ja(s));var y=this.wa;this.dm(this.wa+1),this.mc();var v=this.Ba(s);this.za[0].vj(2*(v+a),c,2*y),c=1;for(var _=this.description.Aa;c<_;c++){var x=this.description.Ed(c),T=d.ra.Va(x);this.za[c].Ln(T*(v+a),d.ra.se(x),T,T*y)}for(s+=1;s<=p;s++)this.nb.write(s,this.nb.read(s)+1)},l.prototype.DB=function(s,a){var c=this.da();if(0>s&&(s=c-1),s>=c||a>=this.Ja(s))throw d.i.fa("index out of bounds");this.mc();var p=this.Ba(s);0>a&&(a=this.Ja(s)-1),a=p+a,p=0;for(var y=this.description.Aa;p<y;p++)if(this.za[p]!=null){var v=d.ra.Va(this.description.Ed(p));this.za[p].En(v*a,v,v*this.wa)}for(;c>=s+1;c--)a=this.nb.read(c),this.nb.write(c,a-1);this.wa--,this.Pg--,this.Pc(1993)},l.prototype.uE=function(s,a,c){var p=this.Ba(s)+a;if((c=this.Ba(c)+void 0)<p||0>p||c>this.I()-1)throw d.i.N();a=0,(s=this.Ga()).Vb(p);do{for(;s.Ha()&&(p=s.ha(),s.wb()!=c);)a+=p=p.Qb();if(s.wb()==c)break}while(s.$a());return a},l.prototype.fO=function(s,a,c){if(a=this.Ba(s)+a,c=this.Ba(s)+c,0>a||c>this.I()-1)throw d.i.N();var p=this.Ga();if(a>c){if(!this.dc(s))throw d.i.N("cannot iterate across an open path");p.JB()}var y=s=0;p.Vb(a);do y+=s,s=p.ha().Qb();while(p.wb()!=c);return y},l.prototype.mg=function(){return d.pi.gm(this,null)},l.prototype.KS=function(s,a,c){for(var p=s;p<c-1;p++)if(this.dc(p))throw d.i.N("cannot interpolate across closed paths");if((p=this.description.Aa)!=1){var y=this.uE(s,a,c);if(y!=0)for(var v=1;v<p;v++){var _=this.description.kd(v);if(d.ra.lz(_)!=2)for(var x=d.ra.Va(_),T=0;T<x;T++)this.MS(_,s,a,c,y,T)}}},l.prototype.JS=function(s,a,c){var p=this.description.Aa;if(p!=1){var y=this.fO(s,a,c);if(y!=0)for(var v=1;v<p;v++){var _=this.description.kd(v);if(d.ra.lz(_)!=2)for(var x=d.ra.Va(_),T=0;T<x;T++)this.LS(_,s,a,c,y,T)}}},l.prototype.MS=function(s,a,c,p,y,v){var _=this.Ga(),x=this.Ba(a)+c;p=this.Ba(p)+void 0,a=this.Uc(s,x,v),c=this.Uc(s,p,v);var T=a,C=0;_.Vb(x);do if(_.Ha()){if(_.ha(),_.wb()==p)break;this.setAttribute(s,_.wb(),v,T),_.li();do{if(x=_.ha(),_.ik()==p)return;C+=x=x.Qb(),T=d.lc.hq(a,c,C/y),_.On()||this.setAttribute(s,_.ik(),v,T)}while(_.Ha())}while(_.$a())},l.prototype.LS=function(s,a,c,p,y,v){var _=this.Ga(),x=this.Ba(a)+c;if((a=this.Ba(a)+p)!=x){p=this.Uc(s,x,v),c=this.Uc(s,a,v);var T=0;_.Vb(x),_.JB(),x=p;do{var C=_.ha();this.setAttribute(s,_.wb(),v,x),T+=x=C.Qb(),x=d.lc.hq(p,c,T/y)}while(_.ik()!=a)}},l.prototype.Oa=function(){this.tq=0,this.Mg=!1,this.Sd=this.Ve=this.Lj=this.mb=this.nb=null,this.wD()},l.prototype.Oc=function(s){s instanceof d.Dd?this.YD(s,-1):this.wN(s)},l.prototype.YD=function(s,a){if(!this.B()&&!s.isIdentity()){this.mc();var c=this.za[0],p=new d.h,y=new d.h;if(0>a){var v=this.tm(),_=0;a=this.wa}else v=this.yv(a),_=this.Ba(a),a=this.Vc(a);for(;_<a;_++){if(p.x=c.read(2*_),p.y=c.read(2*_+1),v){var x=this.Lj.read(_);if(0<=x)switch(7&this.Ve.read(_)){case 2:y.x=this.Sd.read(x),y.y=this.Sd.read(x+1),s.Eh(y,y),this.Sd.write(x,y.x),this.Sd.write(x+1,y.y),y.x=this.Sd.read(x+3),y.y=this.Sd.read(x+4),s.Eh(y,y),this.Sd.write(x+3,y.x),this.Sd.write(x+4,y.y);break;case 4:throw d.i.Qa()}}s.Eh(p,p),c.write(2*_,p.x),c.write(2*_+1,p.y)}this.Pc(1993)}},l.prototype.wN=function(s){if(!this.B()){this.re(1),this.mc();for(var a=this.za[0],c=this.za[1],p=new d.Nd,y=new d.Nd,v=this.tm(),_=0;_<this.wa;_++){if(p.x=a.read(2*_),p.y=a.read(2*_+1),p.z=c.read(_),v){var x=this.Lj.read(_);if(0<=x)switch(7&this.Ve.read(_)){case 2:y.x=this.Sd.read(x),y.y=this.Sd.read(x+1),y.z=this.Sd.read(x+2),y=s.fp(y),this.Sd.write(x,y.x),this.Sd.write(x+1,y.y),this.Sd.write(x+1,y.z),y.x=this.Sd.read(x+3),y.y=this.Sd.read(x+4),y.z=this.Sd.read(x+5),y=s.fp(y),this.Sd.write(x+3,y.x),this.Sd.write(x+4,y.y),this.Sd.write(x+5,y.z);break;case 4:throw d.i.Qa()}}p=s.fp(p),a.write(2*_,p.x),a.write(2*_+1,p.y),c.write(_,p.z)}this.Pc(1993)}},l.prototype.iy=function(){this.nb==null&&(this.nb=d.Yc.Oh(1,0),this.mb=d.Yc.Mr(1,0)),this.Ve!=null&&(this.Ve.resize(this.Pg,1),this.Lj.resize(this.Pg,-1))},l.prototype.op=function(s){s.Mg=!1,s.tq=this.tq,s.xq=this.xq,s.nb=this.nb!=null?d.ia.Bn(this.nb):null,s.mb=this.mb!=null?d.pn.Bn(this.mb):null,s.Lj=this.Lj!=null?d.ia.Bn(this.Lj):null,s.Ve=this.Ve!=null?d.pn.Bn(this.Ve):null,s.Sd=this.Sd!=null?d.be.Bn(this.Sd):null,s.sq=this.sq,s.rq=this.rq,s.Aj=this.ak(1024)?null:this.Aj},l.prototype.Qb=function(){if(!this.ak(512))return this.sq;for(var s=this.Ga(),a=new d.Fx(0);s.$a();)for(;s.Ha();)a.add(s.ha().Qb());return this.sq=a.rm(),this.Lf(512,!1),a.rm()},l.prototype.Nb=function(s){if(s==this)return!0;if(!(s instanceof l&&h.prototype.Nb.call(this,s)))return!1;var a=this.da();return!(a!=s.da()||this.nb!=null&&!this.nb.Nb(s.nb,0,a+1)||this.xq!=s.xq||this.mb!=null&&!this.mb.Nb(s.mb,0,a))&&h.prototype.Nb.call(this,s)},l.prototype.Ga=function(){return new d.YL(this)},l.prototype.hy=function(s){if(h.prototype.hy.call(this,s),this.tm())for(s=this.Ga();s.$a();)s.Ha()},l.prototype.yp=function(s,a){if(h.prototype.yp.call(this,s,a),this.tm())for(s=this.Ga();s.$a();)s.Ha()},l.prototype.$x=function(){this.wa=this.nb==null||this.nb.size==0?0:this.nb.read(this.nb.size-1)},l.prototype.Ke=function(){return this.xf?(this.xu(),this.rq):0},l.prototype.Ev=function(s){return!!this.xf&&(this.ak(8)?(this.xu(),0<this.Aj.read(s)):!!(4&this.mb.read(s)))},l.prototype.Ir=function(s){return this.xf?(this.xu(),this.Aj.read(s)):0},l.prototype.xu=function(){if(this.ak(1024)){var s=this.da();this.Aj==null?this.Aj=new d.be(s):this.Aj.size!=s&&this.Aj.resize(s),s=new d.Fx(0);for(var a=new d.Fx(0),c=new d.h,p=0,y=this.Ga();y.$a();){for(a.reset(),this.D(this.Ba(y.gb),c);y.Ha();)a.add(y.ha().Tx(c.x,c.y));s.add(a.rm());var v=p++;this.Aj.write(v,a.rm())}this.rq=s.rm(),this.Lf(1024,!1)}},l.prototype.FR=function(){if(this.xf){this.fm();for(var s=this.da(),a=0;a<s;a++)4&this.mb.read(a)}},l.prototype.fm=function(){if(this.ak(8)){this.xu();var s=this.da();(this.mb==null||this.mb.size<s)&&(this.mb=d.Yc.Mr(s+1));for(var a=1,c=0;c<s;c++){var p=this.Aj.read(c);c==0&&(a=0<p?1:-1),0<p*a?this.mb.zJ(c,4):this.mb.KE(c,4)}this.Lf(8,!1)}},l.prototype.sz=function(s){var a=this.gb,c=this.da();if(0<=a&&a<c){if(s<this.Vc(a)){if(s>=this.Ba(a))return a;a--}else a++;if(0<=a&&a<c&&s>=this.Ba(a)&&s<this.Vc(a))return this.gb=a}if(5>c){for(a=0;a<c;a++)if(s<this.Vc(a))return this.gb=a;throw d.i.fa("corrupted geometry")}for(a=0,--c;c>a;){var p=a+(c-a>>1);if(s<this.Ba(p))c=p-1;else{if(!(s>=(a=this.Vc(p))))return this.gb=p;a=p+1}}return this.gb=a},l.prototype.yz=function(){var s=this.I();if(!this.xf){s-=this.da();for(var a=0,c=this.da();a<c;a++)this.dc(a)&&s++}return s},l.prototype.rv=function(s){var a=this.Ja(s);return this.dc(s)||a--,a},l.prototype.Ia=function(){return new l(this.xf,this.description)},l.prototype.Db=function(){return this.xf?2:1},l.prototype.getType=function(){return this.xf?1736:1607},l.prototype.QJ=function(s){this.nb=s,this.Pc(16777215)},l.prototype.VR=function(){return this.wx(),this.Ve},l.prototype.JR=function(){return this.wx(),this.mb},l.prototype.PJ=function(s){this.mb=s,this.Pc(16777215)},l.prototype.da=function(){return this.nb!=null?this.nb.size-1:0},l.prototype.Vc=function(s){return this.nb.read(s+1)},l.prototype.Ja=function(s){return this.nb.read(s+1)-this.nb.read(s)},l.prototype.Ba=function(s){return this.nb.read(s)},l.prototype.lu=function(s,a){this.Bb==null&&(this.Bb=new d.Uk),a=d.Nx.pW(a);var c=this.Bb.Fk;if(c!=null){if(!(c.Ik<s||a>c.RR()))return!0;this.Bb.yD(null)}return c=d.Nx.create(this,s,a),this.Bb.yD(c),!0},l.prototype.cc=function(){var s=h.prototype.cc.call(this);if(!this.Ac()){var a=this.da();this.nb!=null&&this.nb.An(s,0,a+1),this.mb!=null&&this.mb.An(s,0,a)}return s},l.prototype.ZF=function(s){return this.Ve!=null?this.Ve.read(s):1},l.prototype.bc=function(s,a,c){var p=this.sz(s);if(s==this.Vc(p)-1&&!this.dc(p))throw d.i.fa("index out of bounds");this.mc();var y=this.Ve,v=1;if(y!=null&&(v=7&y.read(s)),v!==1)throw d.i.Qa();if(a.Or(),a=a.get(),c?a.Nf(d.ee.og()):a.Nf(this.description),p=s==this.Vc(p)-1&&this.dc(p)?this.Ba(p):s+1,y=new d.h,this.D(s,y),a.Dc(y),this.D(p,y),a.Qc(y),!c)for(c=1,y=this.description.Aa;c<y;c++){v=this.description.Ed(c);for(var _=d.ra.Va(v),x=0;x<_;x++){var T=this.Uc(v,s,x);a.YB(v,x,T),T=this.Uc(v,p,x),a.OB(v,x,T)}}},l.prototype.Rj=function(s,a){if(s>=this.da())throw d.i.N();if(this.B())a.Oa();else{if(this.yv(s))throw d.i.fa("not implemented");var c=this.ub(0),p=new d.h,y=new d.l;y.Oa();var v=this.Ba(s);for(s=this.Vc(s);v<s;v++)c.tc(2*v,p),y.Zb(p);a.K(y)}},l.prototype.fj=function(s){return this.Bb==null&&(this.Bb=new d.Uk),!(s==0||16>this.I())&&(s=d.ta.nE(this),this.Bb.WM(s),!0)},l.prototype.hM=function(){if(this.Bb==null&&(this.Bb=new d.Uk),this.Bb.zo==null){this.Bb.xD(null);var s=d.ta.YN(this);this.Bb.xD(s)}},l.prototype.Yo=function(s){this.xq=s},l.prototype.In=function(){return this.xq},l.prototype.DD=function(s){if(this==s)throw d.i.fa("MultiPathImpl.add");for(var a=this.da(),c=0;c<s.da();c++)this.addPath(s,c,!0),this.CU(a),a++},l.prototype.kO=function(s){var a=this.sz(s),c=this.Ba(a);if(c!=s){if(s>=(a=this.Vc(a))||s<c)throw d.i.fa("change_ring_start_point");for(var p=0,y=this.description.Aa;p<y;p++){var v=this.description.kd(p);v=d.ra.Va(v),this.za[p].rotate(c*v,s*v,a*v)}}},l}(d.Gx);d.Vk=S}(Y||(Y={})),function(d){var O=function(S){function h(l){var s=S.call(this)||this;if(l!==void 0){if(l==null)throw d.i.N();s.description=l}else s.description=d.ee.og();return s.wa=0,s}return Wt(h,S),h.prototype.Ia=function(){return new h(this.description)},h.prototype.add=function(l){this.resize(this.wa+1),this.Dh(this.wa-1,l)},h.prototype.Bu=function(l,s){this.resize(this.wa+1);var a=new d.h;a.ma(l,s),this.Cb(this.wa-1,a)},h.prototype.Fd=function(l,s,a){if(a=0>a?l.I():a,0>s||s>l.I()||a<s)throw d.i.N();if(s!=a){this.Jl(l.description),a-=s;var c=this.wa;this.resize(this.wa+a),this.mc();for(var p=0,y=l.description.Aa;p<y;p++){var v=l.description.Ed(p),_=d.ra.Va(v),x=this.ub(v);v=l.ub(v),x.Mn(c*_,v,s*_,a*_,!0,1,c*_)}}},h.prototype.HD=function(l,s){var a=l.length;if(s=0>s?a:s,0>a||0>s)throw d.i.N();if(s!=0){a=s-0,s=this.wa,this.resize(this.wa+a);for(var c=0;c<a;c++)this.Cb(s+c,l[0+c])}},h.prototype.DB=function(l){if(0>l||l>=this.I())throw d.i.fa("index out of bounds");this.mc();for(var s=0,a=this.description.Aa;s<a;s++)if(this.za[s]!=null){var c=d.ra.Va(this.description.Ed(s));this.za[s].En(c*l,c,c*this.wa)}this.wa--,this.Pg--,this.Pc(1993)},h.prototype.resize=function(l){this.dm(l)},h.prototype.op=function(){},h.prototype.Oa=function(){S.prototype.wD.call(this)},h.prototype.Oc=function(l){if(l instanceof d.Dd){if(this.B())return;this.mc();for(var s=this.za[0],a=new d.h,c=0;c<this.wa;c++)a.x=s.read(2*c),a.y=s.read(2*c+1),l.Eh(a,a),s.write(2*c,a.x),s.write(2*c+1,a.y)}else{if(this.B())return;this.mc(),this.re(1),this.mc(),s=this.za[0],a=this.za[1];var p=new d.Nd;for(c=0;c<this.wa;c++){p.x=s.read(2*c),p.y=s.read(2*c+1),p.z=a.read(c);var y=l.fp(p);s.write(2*c,y.x),s.write(2*c+1,y.y),a.write(c,y.z)}}this.Pc(1993)},h.prototype.Db=function(){return 0},h.prototype.getType=function(){return 550},h.prototype.Ke=function(){return 0},h.prototype.Qb=function(){return 0},h.prototype.Nb=function(l){return l==this||l instanceof h&&S.prototype.Nb.call(this,l)},h.prototype.lW=function(l,s){var a=this.wa;if(a=Math.min(a,s+1e3),0>s||s>=this.wa||a<s||l.length!=1e3)throw d.i.N();var c=a-s,p=[];for(this.ub(0).Vw(2*s,2*c,p,0,!0),s=0;s<c;s++)l[s]=d.h.construct(p[2*s],p[2*s+1]);return a},h.prototype.$x=function(){},h.prototype.iy=function(){},h.prototype.lu=function(){return!1},h.prototype.fj=function(){return!1},h.prototype.mg=function(){return null},h}(d.Gx);d.de=O}(Y||(Y={})),function(d){var O;(O=d.iL||(d.iL={}))[O.NotDetermined=0]="NotDetermined",O[O.Structure=1]="Structure",O[O.DegenerateSegments=2]="DegenerateSegments",O[O.Clustering=3]="Clustering",O[O.Cracking=4]="Cracking",O[O.CrossOver=5]="CrossOver",O[O.RingOrientation=6]="RingOrientation",O[O.RingOrder=7]="RingOrder",O[O.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",O[O.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",O[O.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var S=function(){function h(l,s,a){l===void 0?(this.Jj=0,this.Ko=this.Jo=-1):(this.Jj=l,this.Jo=s,this.Ko=a)}return h.prototype.Wt=function(l){this.Jj=l.Jj,this.Jo=l.Jo,this.Ko=l.Ko},h}();d.Md=S}(Y||(Y={})),function(d){d.O=function(){function O(){}return O.assert=function(S){if(S===!1)throw d.i.GK()},O.bK=function(S){return isNaN(S)?NaN:S===0?S:0<S?1:-1},O.Fu=function(S){var h;h===void 0&&(h=0);for(var l=[],s=0;s<S;s++)l[s]=O.lg(2,h);return l},O.lg=function(S,h){h===void 0&&(h=0);for(var l=[],s=0;s<S;s++)l[s]=h;return l},O.$u=function(S,h){var l,s;for(l===void 0&&(l=0),s===void 0&&(s=S.length-1);l<=s;l++)S[l]=h},O.Rk=function(S,h,l){return S<h?h:S>l?l:S},O.Th=function(S,h){var l=5381;return((l=((l=((l=h!==void 0?(h<<5)+h+(255&S):(l<<5)+l+(255&S))<<5)+l+(S>>8&255))<<5)+l+(S>>16&255))<<5)+l+(S>>24&255)&2147483647},O.uj=function(){throw Error("Not Implemented")},O.bB=function(S){return O.aU(S)+12345&2147483647},O.XG=function(S){var h=32,l=S%O.Qx|0,s=S/O.Qx|0;return(h&=63)==0?S:(32>h?(S=l>>>h|s<<32-h,h=s>>h):(S=s>>h-32,h=0<=s?0:-1),h*O.Qx+(S>>>0))},O.aU=function(S){var h=1103515245,l=65535&h;return((h-l)*(S|=0)|0)+(l*S|0)|0},O.truncate=function(S){return 0>S?-1*Math.floor(Math.abs(S)):Math.floor(S)},O.MAX_SAFE_INTEGER=Math.pow(2,53)-1,O.MIN_SAFE_INTEGER=-O.MAX_SAFE_INTEGER,O.VC=65536,O.Qx=O.VC*O.VC,O}()}(Y||(Y={})),function(d){var O;(O=d.CL||(d.CL={}))[O.Project=0]="Project",O[O.Union=1]="Union",O[O.Difference=2]="Difference",O[O.Proximity2D=3]="Proximity2D",O[O.Relate=4]="Relate",O[O.Equals=5]="Equals",O[O.Disjoint=6]="Disjoint",O[O.Intersects=7]="Intersects",O[O.Within=8]="Within",O[O.Contains=9]="Contains",O[O.Crosses=10]="Crosses",O[O.Touches=11]="Touches",O[O.Overlaps=12]="Overlaps",O[O.Buffer=13]="Buffer",O[O.Distance=14]="Distance",O[O.Intersection=15]="Intersection",O[O.Clip=16]="Clip",O[O.Cut=17]="Cut",O[O.DensifyByLength=18]="DensifyByLength",O[O.DensifyByAngle=19]="DensifyByAngle",O[O.LabelPoint=20]="LabelPoint",O[O.GeodesicBuffer=21]="GeodesicBuffer",O[O.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",O[O.ShapePreservingDensify=23]="ShapePreservingDensify",O[O.GeodeticLength=24]="GeodeticLength",O[O.GeodeticArea=25]="GeodeticArea",O[O.Simplify=26]="Simplify",O[O.SimplifyOGC=27]="SimplifyOGC",O[O.Offset=28]="Offset",O[O.Generalize=29]="Generalize",O[O.SymmetricDifference=30]="SymmetricDifference",O[O.ConvexHull=31]="ConvexHull",O[O.Boundary=32]="Boundary",O[O.SimpleRelation=33]="SimpleRelation";var S=function(){function h(){}return h.prototype.getType=function(){return null},h.prototype.wn=function(){},h.prototype.Iu=function(){return!1},h}();d.Je=S}(Y||(Y={})),function(d){var O=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Wt(h,S),h.prototype.getType=function(){return 13},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.V=function(l,s,a,c,p){return l instanceof d.aa?(p=new d.Zc(l),this.V(p,s,[a],!1,c).next()):c===!0?(a=new d.BC(l,s,a,!1,p),d.Gh.local().V(a,s,p)):new d.BC(l,s,a,!1,p)},h.instance=null,h}(d.Je);d.AC=O}(Y||(Y={})),function(d){var O=function(){function S(h,l,s,a,c){this.ya=-1,this.Rd=h,this.$z=l,this.Cs=s,this.tT=new d.l,this.tT.Oa(),this.eo=-1,this.Ub=c}return S.prototype.next=function(){for(var h;(h=this.Rd.next())!=null;)return this.ya=this.Rd.La(),this.eo+1<this.Cs.length&&this.eo++,this.buffer(h,this.Cs[this.eo]);return null},S.prototype.La=function(){return this.ya},S.prototype.buffer=function(h,l){return d.HK.buffer(h,l,this.$z,NaN,96,this.Ub)},S.prototype.qe=function(){},S}();d.BC=O}(Y||(Y={})),function(d){var O=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Wt(h,S),h.prototype.getType=function(){return 16},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.V=function(l,s,a,c){return l instanceof d.aa?(l=new d.Zc(l),this.V(l,s,a,c).next()):new d.lL(l,s,a,c)},h.instance=null,h}(d.Je);d.kL=O}(Y||(Y={})),function(d){var O=function(){function S(h,l,s){if(this.ya=-1,h==null)throw d.i.N();this.$=l,this.yk=h,this.qa=d.ta.Wd(s,l,!1)}return S.prototype.next=function(){var h;return(h=this.yk.next())!=null?(this.ya=this.yk.La(),d.Ud.clip(h,this.$,this.qa,0)):null},S.prototype.La=function(){return this.ya},S.prototype.qe=function(){},S}();d.lL=O}(Y||(Y={})),function(d){var O=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Wt(h,S),h.prototype.getType=function(){return 31},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.V=function(l,s,a){return l instanceof d.aa?d.DC.rE(l):new d.DC(s,l,a)},h.instance=null,h}(d.Je);d.CC=O}(Y||(Y={})),function(d){var O=function(){function S(h,l,s){if(this.uA=new d.Zt,this.ya=-1,l==null)throw d.i.N();this.cH=h,this.Ic=!1,this.yk=l,this.Ub=s}return S.prototype.next=function(){if(this.cH){if(!this.Ic){var h=this.dO(this.yk);return this.Ic=!0,h}return null}if(!this.Ic){if((h=this.yk.next())!=null)return this.ya=this.yk.La(),S.rE(h);this.Ic=!0}return null},S.prototype.La=function(){return this.ya},S.prototype.dO=function(h){for(var l;(l=h.next())!=null;)this.uA.Ib(l);return this.uA.cR()},S.prototype.qe=function(){if(!this.Ic){if(!this.cH)throw d.i.fa("Invalid call for non merging convex hull.");var h=this.yk.next();if(h==null)throw d.i.fa("Expects a non-null geometry.");this.uA.Ib(h)}},S.rE=function(h){if(S.VS(h))return h;var l=h.getType();if(d.Vk.yd(l))return(l=new d.Ta(h.description)).oc(h,!0),l;if(l==550&&h.I()==2){var s=new d.Sa;return l=new d.Ta(h.description),h.ve(0,s),l.nf(s),h.ve(1,s),l.lineTo(s),l}return d.Zt.RO(h)},S.VS=function(h){if(h.B())return!0;var l=h.getType();return l==33||l==197||!d.Vk.yd(l)&&(l==550?h.I()==1:l==1607?h.da()==1&&2>=h.I():h.da()==1&&(2>=h.I()||d.Zt.JG(h,0)))},S}();d.DC=O}(Y||(Y={})),function(d){var O=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Wt(h,S),h.prototype.getType=function(){return 17},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.V=function(l,s,a,c,p){return new d.nL(l,s,a,c,p)},h.instance=null,h}(d.Je);d.mL=O}(Y||(Y={})),function(d){var O=function(){function S(h,l,s,a,c){if(this.Tf=null,l==null||s==null)throw d.i.fa("invalid argument");this.qT=h,this.nA=l,this.lH=s,h=d.ta.mv(l,s),this.qa=d.ta.Wd(a,h,!0),this.kH=-1,this.nd=c}return S.prototype.La=function(){return 0},S.prototype.next=function(){return this.RQ(),++this.kH<this.Tf.length?this.Tf[this.kH]:null},S.prototype.RQ=function(){if(this.Tf==null)switch(this.Tf=[],this.nA.getType()){case 1607:this.TQ();break;case 1736:this.SQ()}},S.prototype.TQ=function(){var h=new d.Ta,l=new d.Ta,s=new d.Ta;this.Tf.push(h),this.Tf.push(l);var a=[];d.LK.JK(this.qT,this.nA,this.lH,this.qa,a,this.nd);for(var c=0;c<a.length;c++){var p=a[c];if(p.bt==0)h.add(p.X,!1);else if(p.bt==1||p.bt==2)l.add(p.X,!1);else if(p.bt==3)this.Tf.push(p.X);else{if(p.bt!=4)throw d.i.fa("internal");s.add(p.X,!1)}}s.B()||h.B()&&l.B()&&!(3<=this.Tf.length)||this.Tf.push(s),h.B()&&l.B()&&3>this.Tf.length&&(this.Tf.length=0)},S.prototype.SQ=function(){var h=new d.ia(0),l=new d.gd,s=l.aF(),a=l.Ib(this.nA),c=l.Ib(this.lH),p=new d.Fg;try{p.Ft(l,this.qa,this.nd),p.dl(s,a,c,h);var y=l.Ne(a),v=new d.Da,_=new d.Da;for(this.Tf.length=0,this.Tf.push(v),this.Tf.push(_),a=0;a<h.size;a++){var x=new d.gd,T=x.Ib(y),C=x.Ib(l.Ne(h.get(a)));p.dr(x,this.nd);var A=p.Av(T,C),R=x.Ne(A);if(!R.B()){var F=l.KF(h.get(a),s);F==2?v.add(R,!1):F==1?_.add(R,!1):this.Tf.push(R);var N=new d.gd;T=N.Ib(y),C=N.Ib(l.Ne(h.get(a))),p.dr(N,this.nd),y=N.Ne(p.im(T,C))}}!y.B()&&0<h.size&&this.Tf.push(y),v.B()&&_.B()&&(this.Tf.length=0)}finally{p.Ug()}},S.prototype.qe=function(){},S}();d.nL=O}(Y||(Y={})),function(d){var O=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Wt(h,S),h.prototype.getType=function(){return 18},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.V=function(l,s,a){if(l instanceof d.aa)return l=new d.Zc(l),this.V(l,s,a).next();if(0>=s)throw d.i.N();return new d.oL(l,s,a)},h.instance=null,h}(d.Je);d.Xl=O}(Y||(Y={})),function(d){var O=function(){function S(h,l){this.ya=-1,this.Rd=h,this.Ps=l}return S.prototype.La=function(){return this.ya},S.prototype.next=function(){var h;return(h=this.Rd.next())!=null?(this.ya=this.Rd.La(),this.NP(h)):null},S.prototype.NP=function(h){if(h.B()||1>h.Db())return h;var l=h.getType();if(l==1736||l==1607)return this.Ny(h);if(d.aa.yd(l))return this.PP(h);if(l==197)return this.OP(h);throw d.i.Qa()},S.prototype.PP=function(h){if(h.Qb()<=this.Ps)return h;var l=new d.Ta(h.description);return l.oc(h,!0),this.Ny(l)},S.prototype.OP=function(h){var l=new d.Da(h.description);l.ad(h,!1);var s=new d.l;return h.A(s),h=s.ca(),s.R()<=this.Ps&&h<=this.Ps?l:this.Ny(l)},S.prototype.Ny=function(h){for(var l=h.Ia(),s=h.Ga();s.$a();)for(var a=!0;s.Ha();){var c=s.ha();if(c.getType()!=322)throw d.i.fa("not implemented");var p=s.On(),y=c.Qb();if(y>this.Ps){var v=Math.ceil(y/this.Ps);y=new d.Sa(h.description),a&&(c.To(y),l.nf(y));var _=a=1/v,x=0;for(--v;x<v;x++)c.Tw(_,y),l.lineTo(y),_+=a;p?l.Ap():(c.Po(y),l.lineTo(y))}else p?l.Ap():l.oc(c,a);a=!1}return l},S.prototype.qe=function(){},S}();d.oL=O}(Y||(Y={})),function(d){var O=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Wt(h,S),h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.getType=function(){return 2},h.prototype.V=function(l,s,a,c){return l instanceof d.aa?(l=new d.Zc(l),s=new d.Zc(s),this.V(l,s,a,c).next()):new d.qL(l,s,a,c)},h.im=function(l,s,a,c){if(l.B()||s.B())return l;var p=l.Db(),y=s.Db();if(p>y)return l;var v=l.getType(),_=s.getType(),x=new d.l,T=new d.l,C=new d.l;l.A(x),s.A(T),C.K(x),C.Zb(T);var A=(C=d.ta.Wd(a,C,!0))*Math.sqrt(2)*1.00001,R=new d.l;if(R.K(x),R.W(A,A),!R.isIntersecting(T))return l;if(p==1&&y==2)return h.KV(l,s,_,a,c);if(v==33)switch(d.Vk.yd(_)?(a=new d.Ta(s.description),a.oc(s,!0)):a=s,_){case 1736:return h.XU(l,a,C);case 1607:return h.YU(l,a,C);case 550:return h.VU(l,a,C);case 197:return h.UU(l,a,C);case 33:return h.WU(l,a,C);default:throw d.i.N()}else if(v==550)switch(_){case 1736:return h.nU(l,s,C);case 197:return h.lU(l,s,C);case 33:return h.mU(l,s,C)}return d.Fg.im(l,s,a,c)},h.XU=function(l,s,a){return d.hd.KG(s,l,a)==0?l:l.Ia()},h.YU=function(l,s,a){var c=l.D();s=s.Ga();for(var p=a*Math.sqrt(2)*1.00001,y=p*p,v=new d.l;s.$a();)for(;s.Ha();){var _=s.ha();if(_.A(v),v.W(p,p),v.contains(c)){if(_.qs(c,a))return l.Ia();var x=_.ac();if(d.h.yc(c,x)<=y||(x=_.wc(),d.h.yc(c,x)<=y))return l.Ia()}}return l},h.VU=function(l,s,a){var c=s.ub(0);s=s.I();var p=l.D(),y=new d.h;a=a*Math.sqrt(2)*1.00001,a*=a;for(var v=0;v<s;v++)if(c.tc(2*v,y),d.h.yc(y,p)<=a)return l.Ia();return l},h.UU=function(l,s,a){var c=new d.l;return s.A(c),c.W(a,a),s=l.D(),c.contains(s)?l.Ia():l},h.WU=function(l,s,a){a=a*Math.sqrt(2)*1.00001,a*=a;var c=l.D();return s=s.D(),d.h.yc(c,s)<=a?l.Ia():l},h.nU=function(l,s,a){var c=new d.l;s.A(c),c.W(a,a);for(var p=l.I(),y=!1,v=[],_=0;_<p;_++)v[_]=!1;var x=new d.h;for(_=0;_<p;_++)l.D(_,x),c.contains(x)&&d.hd.Yd(s,x,a)!=0&&(y=!0,v[_]=!0);if(!y)return l;for(s=l.Ia(),_=0;_<p;_++)v[_]||s.Fd(l,_,_+1);return s},h.lU=function(l,s,a){var c=new d.l;s.A(c),c.W(a,a),s=l.I();var p=!1;a=[];for(var y=0;y<s;y++)a[y]=!1;var v=new d.h;for(y=0;y<s;y++)l.D(y,v),c.contains(v)&&(p=!0,a[y]=!0);if(!p)return l;for(c=l.Ia(),y=0;y<s;y++)a[y]||c.Fd(l,y,y+1);return c},h.mU=function(l,s,a){var c=l.ub(0),p=l.I(),y=s.D(),v=new d.h,_=!1;s=[];for(var x=0;x<p;x++)s[x]=!1;for(a=(x=a*Math.sqrt(2)*1.00001)*x,x=0;x<p;x++)c.tc(2*x,v),d.h.yc(v,y)<=a&&(_=!0,s[x]=!0);if(!_)return l;for(c=l.Ia(),x=0;x<p;x++)s[x]||c.Fd(l,x,x+1);return c},h.KV=function(l,s,a,c,p){var y=new d.Fh;l.bn(y);var v=new d.l;return s.A(v),y.Zb(v),y.W(.1*y.R(),.1*y.ca()),(v=new d.Da).ad(y,!1),a==1736?v.add(s,!0):v.ad(s,!0),d.Xj.local().V(l,v,c,p)},h.instance=null,h}(d.Je);d.kp=O}(Y||(Y={})),function(d){var O=function(){function S(h,l,s,a){this.ts=l==null,this.ya=-1,this.Rd=h,this.$z=s,this.wT=l.next(),this.Ub=a}return S.prototype.next=function(){return this.ts?null:(h=this.Rd.next())!=null?(this.ya=this.Rd.La(),d.kp.im(h,this.wT,this.$z,this.Ub)):null;var h},S.prototype.La=function(){return this.ya},S.prototype.qe=function(){},S}();d.qL=O}(Y||(Y={})),function(d){var O=function(){function h(l){this.nd=l,this.Bj=new d.l,this.Bj.Oa(),this.oh=new d.l,this.oh.Oa()}return h.prototype.Nt=function(){var l=this.Bj.v;this.Bj.v=this.oh.v,this.oh.v=l,l=this.Bj.C,this.Bj.C=this.oh.C,this.oh.C=l,l=this.Bj.G,this.Bj.G=this.oh.G,this.oh.G=l,l=this.Bj.H,this.Bj.H=this.oh.H,this.oh.H=l},h.prototype.eQ=function(l,s){if(this.nd!=null&&!this.nd.progress(-1,-1))throw d.i.fu("user_canceled");var a=!this.Bj.isIntersecting(this.oh);return d.aa.Hc(l.getType())&&d.aa.Hc(s.getType())?l.I()>s.I()?this.gE(l,s,a):(this.Nt(),l=this.gE(s,l,a),this.Nt(),l):l.getType()==550&&d.aa.Hc(s.getType())?(l=this.hE(s,l,a),this.Nt(),l):s.getType()==550&&d.aa.Hc(l.getType())?this.hE(l,s,a):l.getType()==550&&s.getType()==550?l.I()>s.I()?this.iE(l,s):(this.Nt(),l=this.iE(s,l),this.Nt(),l):0},h.prototype.gE=function(l,s,a){var c=l.Ga(),p=s.Ga(),y=new d.l,v=new d.l,_=17976931348623157e292;if(!a&&this.pY(l,s,c,p))return 0;for(;c.$a();)for(;c.Ha();)if((l=c.ha()).A(y),!(y.px(this.oh)>_)){for(;p.$a();)for(;p.Ha();)if((s=p.ha()).A(v),y.px(v)<_&&(s=l.tb(s,a),(s*=s)<_)){if(s==0)return 0;_=s}p.Zi()}return Math.sqrt(_)},h.prototype.hE=function(l,s,a){var c=l.Ga(),p=new d.l,y=17976931348623157e292,v=new d.h,_=s.I();for(a=!a&&l.getType()==1736;c.$a();)for(;c.Ha();){var x=c.ha();if(x.A(p),!(1<_&&p.px(this.oh)>y)){for(var T=0;T<_;T++){if(s.D(T,v),a&&d.hd.Yd(l,v,0)!=0)return 0;var C=x.fe(v,!1);if(v.sub(x.hc(C)),(C=v.Sk())<y){if(C==0)return 0;y=C}}a=!1}}return Math.sqrt(y)},h.prototype.iE=function(l,s){for(var a,c=17976931348623157e292,p=new d.h,y=new d.h,v=l.I(),_=s.I(),x=0;x<v;x++)if(l.D(x,p),!(1<_&&this.oh.iK(p)>c)){for(var T=0;T<_;T++)if(s.D(T,y),(a=d.h.yc(p,y))<c){if(a==0)return 0;c=a}}return Math.sqrt(c)},h.prototype.pY=function(l,s,a,c){if(l.getType()==1736){for(;c.$a();)if(c.Ha()){var p=c.ha();if(d.hd.Yd(l,p.wc(),0)!=0)return!0}c.Zi()}if(s.getType()==1736){for(;a.$a();)if(a.Ha()&&(l=a.ha(),d.hd.Yd(s,l.wc(),0)!=0))return!0;a.Zi()}return!1},h.prototype.gm=function(l,s){return l.B()||s.B()?NaN:(l.A(this.Bj),s.A(this.oh),this.eQ(l,s))},h}(),S=function(h){function l(){return h!==null&&h.apply(this,arguments)||this}return Wt(l,h),l.prototype.V=function(s,a,c){if(s==null||a==null)throw d.i.N();if(s.B()||a.B())return NaN;var p=s.getType(),y=a.getType();if(p==33){if(y==33)return d.h.tb(s.D(),a.D());if(y==197)return c=new d.l,a.A(c),c.tb(s.D());(p=new d.de).add(s),s=p}else if(p==197){if(y==197)return y=new d.l,s.A(y),c=new d.l,a.A(c),c.tb(y);(p=new d.Da).ad(s,!1),s=p}return y==33?((y=new d.de).add(a),a=y):y==197&&((y=new d.Da).ad(a,!1),a=y),new O(c).gm(s,a)},l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.prototype.getType=function(){return 14},l.instance=null,l}(d.Je);d.rL=S}(Y||(Y={})),function(d){var O=function(){function S(h,l,s,a){this.zH=h,this.DH=l,this.nd=a,this.$G=s}return S.prototype.next=function(){var h=this.zH.next();return h==null?null:this.zC(h)},S.prototype.La=function(){return this.zH.La()},S.prototype.zC=function(h){var l=h.getType();if(d.aa.Rn(l))return h;if(l==197)return(l=new d.Da(h.description)).ad(h,!1),this.zC(l);if(h.B())return h;if(h==null)throw d.i.Qa();l=h.Ia();for(var s=new d.yb,a=0,c=h.da();a<c;a++)this.TK(h,a,l,s);return l},S.prototype.TK=function(h,l,s,a){if(!(2>h.Ja(l))){var c=h.Ba(l),p=h.Vc(l)-1,y=h.ub(0),v=h.dc(l),_=new d.ia(0);_.Jb(h.Ja(l)+1);var x=new d.ia(0);for(x.Jb(h.Ja(l)+1),_.add(v?c:p),_.add(c),c=new d.h;1<_.size;){var T=_.Fc();_.If();var C=_.Fc();h.D(T,c),a.Dc(c),h.D(C,c),a.Qc(c),0<=(C=this.SK(a,c,y,T,C,p))?(_.add(C),_.add(T)):x.add(T)}if(v||x.add(_.get(0)),x.size==_.size)s.addPath(h,l,!0);else if(2<=x.size&&(!this.$G||x.size!=2||!(v||d.h.tb(h.Na(x.get(0)),h.Na(x.get(1)))<=this.DH))){for(l=new d.Sa,a=0,p=x.size;a<p;a++)h.ve(x.get(a),l),a==0?s.nf(l):s.lineTo(l);v&&(this.$G||x.size!=2||s.lineTo(l),s.Ap())}}},S.prototype.SK=function(h,l,s,a,c,p){var y=c-1;for(c<=a&&(y=p),p=c=-1,a+=1;a<=y;a++){s.tc(2*a,l);var v=l.x,_=l.y;h.hc(h.fe(l,!1),l),l.x-=v,l.y-=_,(v=l.length())>this.DH&&v>p&&(c=a,p=v)}return c},S.prototype.qe=function(){},S}();d.sL=O}(Y||(Y={})),function(d){var O=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Wt(h,S),h.prototype.getType=function(){return 29},h.prototype.V=function(l,s,a,c){return l instanceof d.aa?(l=new d.Zc(l),this.V(l,s,a,c).next()):new d.sL(l,s,a,c)},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.instance=null,h}(d.Je);d.EC=O}(Y||(Y={})),function(d){var O=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Wt(h,S),h.prototype.getType=function(){return 21},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.V=function(l,s,a,c,p,y,v,_){return l instanceof d.aa?(_=new d.Zc(l),this.V(_,s,a,[c],p,y,!1,v).next()):v===!0?(a=new d.GC(l,s,a,c,p,!1,!1,_),d.Gh.local().V(a,s,_)):new d.GC(l,s,a,c,p,!1,!1,_)},h.instance=null,h}(d.Je);d.FC=O}(Y||(Y={})),function(d){var O=function(){function S(h,l,s,a,c,p,y,v){if(p)throw d.i.Ie();if(l==null)throw d.i.N();this.ya=-1,this.Ms=h,this.vg=l,this.ze=s,this.Cs=a,this.$n=c,this.eo=-1,this.Ub=v,this.uT=new d.l,this.uT.Oa()}return S.prototype.next=function(){for(var h;(h=this.Ms.next())!=null;)return this.ya=this.Ms.La(),this.eo+1<this.Cs.length&&this.eo++,this.$Q(h,this.Cs[this.eo]);return null},S.prototype.La=function(){return this.ya},S.prototype.$Q=function(h,l){return d.VK.buffer(h,this.vg,this.ze,l,this.$n,this.Ub)},S.prototype.qe=function(){},S}();d.GC=O}(Y||(Y={})),function(d){var O=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Wt(h,S),h.prototype.getType=function(){return 24},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.V=function(l,s,a){if(s==null)throw d.i.N();if(l.B()||1>l.Db())return 0;if(a==4)throw d.i.Ie();var c=d.cb.sc(s),p=d.cb.vv(c),y=d.cb.ev(c);p*=2-p;var v=c.Hd().ai,_=l.getType();if(_==1736||_==197)var x=l.mg();else d.aa.yd(_)?(x=new d.Ta(l.description)).oc(l,!0):x=l;if(c.Nb(s)==0){if(d.cb.Wc(s)){x=d.Hh.lj(x,s),_==1607&&x==l&&(x=d.aa.jg(l)),l=new d.Nc,d.cb.gh(s).cn(l),_=0;for(var T=x.I();_<T;_++){var C=x.Na(_);C.x=d.Hh.Zm(C.x,l),x.Cb(_,C)}}l=x.Ia(),x=d.Hh.WI(s,c,x,l)?l:d.cb.zh(x,s,c)}return this.hQ(x,a,y,p,v)},h.prototype.hQ=function(l,s,a,c,p){var y=new d.ga(0),v=0;for(l=l.Ga();l.$a();)for(;l.Ha();){var _=l.ha(),x=_.ac();_=_.wc(),x.scale(p),_.scale(p),d.kb.wd(a,c,x.x,x.y,_.x,_.y,y,null,null,s),v+=y.u}return v},h.instance=null,h}(d.Je);d.vL=O}(Y||(Y={})),function(d){var O=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Wt(h,S),h.prototype.getType=function(){return 18},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.V=function(l,s,a,c,p){return l instanceof d.aa?(l=new d.Zc(l),this.V(l,s,a,c,p).next()):new d.uL(l,a,c,s,-1,-1,p)},h.instance=null,h}(d.Je);d.tL=O}(Y||(Y={})),function(d){var O=function(){function S(h,l,s,a,c,p){if(0<p||s!=4&&0<c)throw d.i.Ie();if(l==null)throw d.i.N();this.ya=-1,this.Ms=h,this.vg=l,this.ze=s,this.DT=a,this.CT=c}return S.prototype.next=function(){for(var h;(h=this.Ms.next())!=null;)return this.ya=this.Ms.La(),this.Zy(h);return null},S.prototype.La=function(){return this.ya},S.prototype.Zy=function(h){return d.cj.Qr(h,this.vg,this.ze,this.DT,this.CT,this.Ub)},S.prototype.qe=function(){},S}();d.uL=O}(Y||(Y={})),function(d){(function(O){O[O.Unknown=0]="Unknown",O[O.Contains=1]="Contains",O[O.Within=2]="Within",O[O.Equals=3]="Equals",O[O.Disjoint=4]="Disjoint",O[O.Touches=8]="Touches",O[O.Crosses=16]="Crosses",O[O.Overlaps=32]="Overlaps",O[O.NoThisRelation=64]="NoThisRelation",O[O.Intersects=1073741824]="Intersects",O[O.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(d.cL||(d.cL={})),d.wL=function(){function O(){}return O.nW=function(S,h){var l=S.getType(),s=h.getType();if(d.aa.xj(l)){var a=S.Bb;if(a!=null&&(a=a.Fk)!=null){if(s==33){var c=h.D();a=a.So(c.x,c.y)}else c=new d.l,h.A(c),a=a.Ro(c);if(a==1)return 1;if(a==0)return 4}}if(d.aa.xj(s)&&(a=h.Bb)!=null&&(a=a.Fk)!=null){if(l==33?(S=S.D(),a=a.So(S.x,S.y)):(h=new d.l,S.A(h),a=a.Ro(h)),a==1)return 2;if(a==0)return 4}return 0},O}()}(Y||(Y={})),function(d){var O=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Wt(h,S),h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.getType=function(){return 15},h.prototype.V=function(l,s,a,c,p){return l instanceof d.aa?(l=new d.Zc(l),s=new d.Zc(s),this.V(l,s,a,c,p===void 0?-1:p).next()):p===void 0?new d.HC(l,s,a,c,-1):new d.HC(l,s,a,c,p)},h.prototype.wn=function(l,s,a){this.Iu(l)&&(s=d.ta.kj(s,l,!1),l.fj(a)||l.lu(s,a))},h.prototype.Iu=function(l){return d.Nx.zE(l)},h.instance=null,h}(d.Je);d.Xj=O}(Y||(Y={})),function(d){var O=function(){function S(h,l,s,a,c){if(this.ts=l==null,this.ya=-1,this.Rd=h,this.vg=s,this.Se=l.next(),this.Dj=this.Se.getType(),this.Ub=a,this.Fi=c,this.Fi!=-1&&(0>=this.Fi||7<this.Fi))throw d.i.N("bad dimension mask")}return S.prototype.next=function(){if(this.ts)return null;if(this.zw!=null){var h=this.zw.next();if(h!=null)return h;this.zw=null}for(;(h=this.Rd.next())!=null;)return this.ya=this.Rd.La(),this.Fi==-1?h=this.Ea(h):(this.zw=this.PS(h),h=this.zw.next()),h;return null},S.prototype.La=function(){return this.ya},S.prototype.Ea=function(h){var l=this.zK(h);if(l!=null)return l;l=d.ta.mv(this.Se,h);var s=d.ta.Wd(this.vg,l,!0);l=new d.l,this.Se.A(l);var a=new d.l;return h.A(a),l.W(2*s,2*s),l.Ea(a),l.W(100*s,100*s),s=d.Ud.clip(this.Se,l,0,0),h=d.Ud.clip(h,l,0,0),d.Fg.Av(h,s,this.vg,this.Ub)},S.prototype.QI=function(h,l,s){var a=0;if(1&l)s[0]==null&&(s[0]=new d.de(h)),a++;else for(var c=0;c<s.length-1;c++)s[c]=s[c+1];if(2&l)s[a]==null&&(s[a]=new d.Ta(h)),a++;else for(c=a;c<s.length-1;c++)s[c]=s[c+1];if(4&l)s[a]==null&&(s[a]=new d.Da(h)),a++;else for(c=a;c<s.length-1;c++)s[c]=s[c+1];if(a!=3){for(h=[],c=0;c<a;c++)h[c]=s[c];return new d.Zc(h)}return new d.Zc(s)},S.prototype.PS=function(h){var l=this.zK(h);if(l!=null){var s=[null,null,null];return s[l.Db()]=l,this.QI(h.description,this.Fi,s)}l=d.ta.mv(this.Se,h),s=d.ta.Wd(this.vg,l,!0),l=new d.l,this.Se.A(l),l.W(2*s,2*s);var a=new d.l;return h.A(a),l.Ea(a),l.W(100*s,100*s),s=d.Ud.clip(this.Se,l,0,0),l=d.Ud.clip(h,l,0,0),s=d.Fg.Pz(l,s,this.vg,this.Ub),this.QI(h.description,this.Fi,s)},S.prototype.zK=function(h){var l=d.ta.mv(h,this.Se),s=d.ta.Wd(this.vg,l,!0);l=h.getType();var a=h.B(),c=this.Se.B();if(!(c=a||c)){c=new d.l,h.A(c);var p=new d.l;this.Se.A(p),p.W(2*s,2*s),c=!c.isIntersecting(p)}if(!c)if((p=d.wL.nW(this.Se,h))==4)c=!0;else{if(2&p)return this.Se;if(1&p)return h}if(c)return(s=d.aa.tf(l))<(c=d.aa.tf(this.Dj))?S.HB(h,a):s>c||s==0&&l==550&&this.Dj==33?this.nJ():S.HB(h,a);if((this.Fi==-1||this.Fi==4)&&l==197&&this.Dj==197)return s=this.Se,l=new d.l,h.A(l),a=new d.l,s.A(a),l.Ea(a),s=new d.Fh,h.copyTo(s),s.Xo(l),s;if(l==197&&d.aa.tf(this.Dj)==0||this.Dj==197&&d.aa.tf(l)==0)return a=l==197?h:this.Se,h=l==197?this.Se:h,l=new d.l,a.A(l),d.Ud.clip(h,l,s,0);if(d.aa.tf(l)==0&&0<d.aa.tf(this.Dj)||0<d.aa.tf(l)&&d.aa.tf(this.Dj)==0){if(s=d.ta.kj(this.vg,h,!1),l==550||l==33)return d.Fg.zG(h,this.Se,s);if(this.Dj==550||this.Dj==33)return d.Fg.zG(this.Se,h,s);throw d.i.Qa()}return this.Fi!=-1&&this.Fi!=2||l!=1607||this.Dj!=1736?this.Fi!=-1&&this.Fi!=2||l!=1736||this.Dj!=1607?null:this.wK(this.Se,h):this.wK(h,this.Se)},S.prototype.wK=function(h,l){var s=h,a=l,c=d.ta.kj(this.vg,l,!1),p=new d.l;a.A(p);var y=new d.l;s.A(y),y.W(2*c,2*c),p.Ea(y),p.W(10*c,10*c),s=h=d.Ud.clip(h,p,0,0),y=new d.ia(0);var v=-1,_=a.Bb;if(_!=null){var x=_.Fk;if(x!=null){v=0,y.Jb(s.I()+s.da());for(var T=new d.l,C=s.Ga();C.$a();)for(;C.Ha();){C.ha().A(T);var A=x.Ro(T);A==1?y.add(1):A==0?y.add(0):(y.add(-1),v++)}}}if(5<l.I()&&(_=(a=l=d.Ud.clip(l,p,0,0)).Bb),0>v&&(v=s.yz()),p=s.I()+a.I(),v*a.I()>Math.log(p)*p*4)return null;p=null,v=a.Ga(),_!=null&&_.Fb!=null&&(p=_.Fb),p==null&&20<a.I()&&(p=d.ta.nE(a)),h=h.Ia(),a=null,_=s.Ga(),x=[0,0,0,0,0,0,0,0,0],T=new d.be(0),C=new d.ig,A=-1;for(var R=0,F=0,N=0<y.size,B=-1;_.$a();){B=_.gb;var q=0;for(A=-1,R=0;_.Ha();){var U=N?d.O.truncate(y.get(F)):-1;F++;var K=_.ha();if(0>U){if(p!=null)for(a==null?a=p.vR(K,c):a.Uo(K,c),U=a.next();U!=-1;U=a.next()){v.Vb(p.ja(U)),U=v.ha();var X=K.Ea(U,null,x,null,c);for(U=0;U<X;U++)T.add(x[U])}else for(v.Zi();v.$a();)for(;v.Ha();)for(U=v.ha(),X=K.Ea(U,null,x,null,c),U=0;U<X;U++)T.add(x[U]);if(0<T.size){T.Vd(0,T.size,function(Ae,Me){return Ae-Me});var te=0;T.add(1),X=-1,U=0;for(var ae=T.size;U<ae;U++){var ge=T.get(U);if(ge!=te){var Ee=!1;if(te!=0||ge!=1?(K.ah(te,ge,C),te=C.get()):(te=K,Ee=!0),2<=q){if(h.Dr(s,B,A,R,q==3),this.QD(l,te.ac(),c)!=1&&this.RD(l,te,c)!=1)return null;h.oc(te,!1),q=1,R=0}else switch(X=this.RD(l,te,c),X){case 1:Ee?2>q?(A=_.wb()-s.Ba(B),R=1,q=q==0?3:2):R++:(h.oc(te,q==0),q=1);break;case 0:q=0,A=-1,R=0;break;default:return null}te=ge}}}else{if(0>(U=this.QD(l,K.ac(),c)))return null;U==1?(2>q&&(A=_.wb()-s.Ba(B),q=q==0?3:2),R++):(A=-1,R=0)}T.clear(!1)}else U!=0&&U==1&&(q==0?(q=3,A=_.wb()-s.Ba(B)):q==1?(q=2,A=_.wb()-s.Ba(B)):R++)}2<=q&&(h.Dr(s,B,A,R,q==3),A=-1)}return h},S.prototype.QD=function(h,l,s){return d.Dg.wm(h,l,s)},S.prototype.RD=function(h,l,s){var a=l.ac();l=l.wc();var c=d.Dg.wm(h,a,s),p=d.Dg.wm(h,l,s);return c==1&&p==0||c==0&&p==1?-1:c==0||p==0?0:c==1||p==1?1:((c=new d.h).add(a,l),c.scale(.5),(h=d.Dg.wm(h,c,s))==0?0:h==1?1:-1)},S.HB=function(h,l){return l?h:h.Ia()},S.prototype.nJ=function(){return this.yH==null&&(this.yH=this.Se.Ia()),this.yH},S.prototype.qe=function(){},S}();d.HC=O}(Y||(Y={})),function(d){var O=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Wt(h,S),h.prototype.getType=function(){return 28},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.V=function(l,s,a,c,p,y,v){return l instanceof d.aa?(l=new d.Zc(l),this.V(l,s,a,c,p,y,v).next()):new d.xL(l,s,a,c,p,y,v)},h.instance=null,h}(d.Je);d.IC=O}(Y||(Y={})),function(d){var O=function(){function S(h,l,s,a,c,p,y){this.ya=-1,this.Rd=h,this.Mj=l,this.Ka=s,this.Ki=a,this.CA=c,this.uH=p,this.nd=y}return S.prototype.next=function(){var h=this.Rd.next();return h!=null?(this.ya=this.Rd.La(),this.jL(h)):null},S.prototype.La=function(){return this.ya},S.prototype.jL=function(h){var l=0>=this.uH?d.ta.kj(this.Mj,h,!1):this.uH;return d.IK.V(h,this.Ka,this.Ki,this.CA,l,this.nd)},S.prototype.qe=function(){},S}();d.xL=O}(Y||(Y={})),function(d){var O;(O=d.NK||(d.NK={}))[O.clipToDomainOnly=1]="clipToDomainOnly",O[O.clipWithHorizon=2]="clipWithHorizon",O[O.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var S=function(h){function l(){return h!==null&&h.apply(this,arguments)||this}return Wt(l,h),l.prototype.getType=function(){return 0},l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.prototype.V=function(s,a,c){return s instanceof d.aa?(s=new d.Zc(s),this.V(s,a,c).next()):new d.yL(s,a,c)},l.prototype.transform=function(s,a,c,p){return d.bu.transform(s,a,c,p,!0)},l.prototype.Qt=function(s,a,c,p){return d.bu.Qt(s,a,c,p)},l.instance=null,l}(d.Je);d.Hx=S}(Y||(Y={})),function(d){var O=function(){function S(h,l,s){this.ya=-1,this.Rd=h,this.MT=l,this.nd=s}return S.prototype.next=function(){var h=this.Rd.next();return h!=null?(this.ya=this.Rd.La(),d.bu.zh(h,this.MT,this.nd)):null},S.prototype.La=function(){return this.ya},S.prototype.qe=function(){},S}();d.yL=O}(Y||(Y={})),function(d){var O=function(){function h(){}return h.prototype.reset=function(){this.ph=this.xk=-1,this.us=this.kq=!1},h.prototype.AQ=function(l,s,a){for(l.Vb(s,a);l.Ha();){var c=l.ha();if((c=c.Qb())!=0)return l.wb()}for(l.Vb(s,a);l.Ez();)if((c=(c=l.li()).Qb())!=0)return l.wb();return-1},h.prototype.BQ=function(l,s){for(l.Vb(s,-1);l.Ez();)if(l.li().Qb()!=0)return l.wb();return-1},h.prototype.zQ=function(l,s){for(l.Vb(s,-1),l.ha();l.Ha();)if(l.ha().Qb()!=0)return l.wb();return-1},h.prototype.yQ=function(l,s,a,c){if(this.xk=this.AQ(s,a,c),this.xk!=-1){s.Vb(this.xk,-1);var p=s.ha(),y=p.hc(p.fe(l,!1));if(a=d.h.yc(y,l),(c=new d.h).L(y),c.sub(p.ac()),(y=new d.h).L(l),y.sub(p.ac()),this.kq=0>c.wi(y),this.ph=this.zQ(s,this.xk),this.ph!=-1){s.Vb(this.ph,-1);var v=(p=s.ha()).fe(l,!1);v=p.hc(v);var _=d.h.yc(v,l);_>a?this.ph=-1:(c.L(v),c.sub(p.ac()),y.L(l),y.sub(p.ac()),this.us=0>c.wi(y))}this.ph==-1&&(this.ph=this.BQ(s,this.xk),this.ph!=-1&&(s.Vb(this.ph,-1),v=(p=s.ha()).fe(l,!1),v=p.hc(v),(_=d.h.yc(v,l))>a?this.ph=-1:(c.L(v),c.sub(p.ac()),y.L(l),y.sub(p.ac()),this.us=0>c.wi(y),l=this.xk,this.xk=this.ph,this.ph=l,l=this.kq,this.kq=this.us,this.us=l)))}},h.prototype.cO=function(l,s,a,c,p){return a=a.Ga(),this.yQ(l,a,c,p),this.xk!=-1&&this.ph==-1?this.kq:this.xk!=-1&&this.ph!=-1?this.kq==this.us?this.kq:(a.Vb(this.xk,-1),l=a.ha().kg(),a.Vb(this.ph,-1),s=a.ha().kg(),0<=l.wi(s)):s},h}(),S=function(h){function l(){return h!==null&&h.apply(this,arguments)||this}return Wt(l,h),l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.prototype.getType=function(){return 3},l.prototype.nz=function(s,a,c){var p;if(p===void 0&&(p=!1),s.B())return new d.$l;a=a.D();var y=s,v=s.getType();switch(v==197&&((y=new d.Da).ad(s,!1),v=1736),v){case 33:return this.xI(y,a);case 550:return this.jI(y,a);case 1607:case 1736:return this.bU(y,a,c,p);default:throw d.i.fa("not implemented")}},l.prototype.oz=function(s,a){if(s.B())return new d.$l;a=a.D();var c=s,p=s.getType();switch(p==197&&((c=new d.Da).ad(s,!1),p=1736),p){case 33:return this.xI(c,a);case 550:case 1607:case 1736:return this.jI(c,a);default:throw d.i.fa("not implemented")}},l.prototype.pz=function(s,a,c,p){if(0>p)throw d.i.N();if(s.B())return[];a=a.D();var y=s,v=s.getType();switch(v==197&&((y=new d.Da).ad(s,!1),v=1736),v){case 33:return this.TU(y,a,c,p);case 550:case 1607:case 1736:return this.tU(y,a,c,p);default:throw d.i.fa("not implemented")}},l.prototype.bU=function(s,a,c,p){if(s.getType()==1736&&c&&(c=new d.l,s.A(c),c=d.ta.Wd(null,c,!1),(p?d.hd.Yd(s,a,0):d.hd.Yd(s,a,c))!=0)){var y=new d.$l(a,0,0);return p&&y.WJ(!0),y}var v=s.Ga();y=new d.h;for(var _=c=-1,x=17976931348623157e292,T=0;v.$a();)for(;v.Ha();){var C=v.ha();C=C.hc(C.fe(a,!1));var A=d.h.yc(C,a);A<x?(T=1,y=C,c=v.wb(),_=v.gb,x=A):A==x&&T++}return y=new d.$l(y,c,Math.sqrt(x)),p&&(v.Vb(c,_),C=v.ha(),p=0>d.h.Uq(a,C.ac(),C.wc()),1<T&&((T=new O).reset(),p=T.cO(a,p,s,c,_)),y.WJ(p)),y},l.prototype.xI=function(s,a){return s=s.D(),a=d.h.tb(s,a),new d.$l(s,0,a)},l.prototype.jI=function(s,a){for(var c=s.ub(0),p=s.I(),y=s=0,v=0,_=17976931348623157e292,x=0;x<p;x++){var T=new d.h;c.tc(2*x,T);var C=d.h.yc(T,a);C<_&&(y=T.x,v=T.y,s=x,_=C)}return(a=new d.$l).ey(y,v,s,Math.sqrt(_)),a},l.prototype.TU=function(s,a,c,p){return p==0?[]:(c*=c,s=s.D(),(a=d.h.yc(s,a))<=c?(c=[],(p=new d.$l).ey(s.x,s.y,0,Math.sqrt(a)),c[0]=p):c=[],c)},l.prototype.tU=function(s,a,c,p){if(p==0)return[];var y=s.ub(0),v=s.I();s=[],c*=c;for(var _=0;_<v;_++){var x=y.read(2*_),T=y.read(2*_+1),C=a.x-x,A=a.y-T;(C=C*C+A*A)<=c&&((A=new d.$l).ey(x,T,_,Math.sqrt(C)),s.push(A))}return a=s.length,s.sort(function(R,F){return R.Ka<F.Ka?-1:R.Ka==F.Ka?0:1}),p>=a||(s.length=p),s.slice(0)},l.instance=null,l}(d.Je);d.Ix=S}(Y||(Y={})),function(d){var O=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Wt(h,S),h.prototype.getType=function(){return 4},h.prototype.V=function(l,s,a,c,p){return d.am.yB(l,s,a,c,p)},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.Iu=function(l){return d.Vt.wy(l)},h.prototype.wn=function(l,s,a){d.Vt.CD(l,s,a)},h.instance=null,h}(d.Je);d.zL=O}(Y||(Y={})),function(d){var O=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Wt(h,S),h.prototype.getType=function(){return 33},h.prototype.V=function(l,s,a,c,p){return l===1073741824?!d.ud.zB(s,a,c,4,p):d.ud.zB(s,a,c,l,p)},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.Iu=function(l){return d.Vt.wy(l)},h.prototype.wn=function(l,s,a){d.Vt.CD(l,s,a)},h.instance=null,h}(d.Je);d.dj=O}(Y||(Y={})),function(d){var O=function(){function S(h,l,s,a){if(this.nd=a,this.rT=s,this.ya=-1,h==null)throw d.i.N();this.yk=h,this.Mj=l}return S.prototype.next=function(){var h;if((h=this.yk.next())!=null){if(this.ya=this.yk.La(),this.nd!=null&&!this.nd.progress(-1,-1))throw d.i.fu("user_canceled");return this.eC(h)}return null},S.prototype.La=function(){return this.ya},S.prototype.eC=function(h){if(h==null)throw d.i.N();return d.Jx.cK(h,this.Mj,this.rT,this.nd)},S.prototype.qe=function(){},S}();d.AL=O}(Y||(Y={})),function(d){var O=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Wt(h,S),h.prototype.getType=function(){return 26},h.prototype.V=function(l,s,a,c){return l instanceof d.aa?(l=new d.Zc(l),this.V(l,s,a,c).next()):new d.AL(l,s,a,c)},h.prototype.rs=function(l,s,a,c,p){return 0<(c!==void 0?d.Jx.rs(l,s,a,c,p):d.Jx.rs(l,s,!1,null,a))},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.instance=null,h}(d.Je);d.Yl=O}(Y||(Y={})),function(d){var O=function(){function p(){this.yq=0}return p.prototype.nX=function(y){this.yq&=-2,this.yq|=y?1:0},p.prototype.Wp=function(){return!!(1&this.yq)},p.prototype.XF=function(){return this.Wp()?0:1},p}();d.xY=O;var S=function(){},h=function(p,y,v,_){this.x=p,this.y=y,this.Ai=v,this.xm=_},l=function(){function p(y){this.Be=y}return p.prototype.compare=function(y,v,_){return y=y.ja(_),v=this.Be.lf.read(2*v),0>(v-=y=this.Be.lf.read(2*y))?-1:0<v?1:0},p}(),s=function(){function p(y){this.Be=y}return p.prototype.compare=function(y,v,_){v=this.Be.hb[v],y=this.Be.hb[y.ja(_)];var x=v.Wp(),T=y.Wp();_=v.ne.Pe(this.Be.Mo,0);var C=y.ne.Pe(this.Be.Mo,0);return _==C&&((x=.5*((_=Math.min(x?v.ne.na:v.ne.la,T?y.ne.na:y.ne.la))-this.Be.Mo)+this.Be.Mo)==this.Be.Mo&&(x=_),_=v.ne.Pe(x,0),C=y.ne.Pe(x,0)),_<C?-1:_>C?1:0},p}(),a=function(){function p(y,v){this.YI=new d.h,this.parent=y,this.dS=v}return p.prototype.nr=function(y,v,_){var x=this.parent,T=this.dS;_.Vd(y,v,function(C,A){return x.Mh(C,A,T)})},p.prototype.$p=function(y){return y=this.parent.gi.get(y),this.parent.lf.tc(2*(y>>1),this.YI),this.YI.y+(1&y?this.parent.Oj:-this.parent.Oj)},p}(),c=function(){function p(y,v,_,x,T){this.nH=y.description,this.X=y,this.Qg=v,this.Oj=d.ta.kj(this.Qg,y,!1),this.Bo=d.ta.kj(this.Qg,y,!0),this.xA=_,this.oT=this.nH.Aa,this.hb=[],this.po=[],this.mh=new d.jp,this.fb=new d.Yj,this.ke=new d.Md,this.ZG=this.ql=T}return p.prototype.eT=function(){return this.ZG=!0,(!d.aa.Hc(this.X.getType())||this.GE()&&this.DE(!1))&&this.mO()?d.aa.Hc(this.X.getType())?this.pO()?this.X.getType()==1607?this.rO()?2:0:this.sO()?this.tO():0:0:2:0},p.prototype.kC=function(y,v){var _=this.lf.read(2*y);y=this.lf.read(2*y+1);var x=this.lf.read(2*v);v=this.lf.read(2*v+1);var T=!d.Yt.Cv(_,y,x,v,this.Oj*this.Oj);return T||this.X.Db()!=0&&_==x&&y==v},p.prototype.GE=function(){for(var y=this.X,v=y.xf?3:2,_=0,x=y.da();_<x;_++)if(y.Ja(_)<v)return this.ke=new d.Md(1,_,0),!1;return!0},p.prototype.DE=function(y){var v=this.X,_=v.Ga(),x=v.hasAttribute(1);for(v=x?d.ta.wE(this.Qg,v,!1):0;_.$a();)for(;_.Ha();){var T=_.ha();if(!(T.Qb()>this.Oj)){if(y&&x){var C=T.wv(1,0);if(T=T.wv(1,0),Math.abs(T-C)>v)continue}return this.ke=new d.Md(2,_.wb(),-1),!1}}return!0},p.prototype.mO=function(){var y=this.X,v=null;d.aa.Hc(this.X.getType())&&(v=this.X);var _=(this.ZG||this.ql)&&v!=null,x=y.I();this.lf=y.ub(0),this.gi=new d.ia(0),this.gi.Jb(2*x),this.fi=new d.ia(0),this.fi.Jb(2*x),_&&(this.Fl==null&&(this.Fl=new d.ia(0)),this.Fl.Jb(x));for(var T=y=0;T<x;T++)if(this.gi.add(2*T),this.gi.add(2*T+1),this.fi.add(2*T),this.fi.add(2*T+1),_){for(;T>=v.Vc(y);)y++;this.Fl.add(y)}for(new d.Xt().sort(this.fi,0,2*x,new a(this,_)),this.fb.clear(),this.fb.Vo(new l(this)),this.fb.De(x),v=0,x*=2;v<x;v++)if(_=this.fi.get(v),_=(y=this.gi.get(_))>>1,1&y){if(y=this.fb.search(_,-1),T=this.fb.we(y),C=this.fb.lb(y),this.fb.vd(y,-1),T!=-1&&C!=-1&&!this.kC(this.fb.ja(T),this.fb.ja(C)))return this.ke=new d.Md(3,this.fb.ja(T),this.fb.ja(C)),!1}else{if(y=this.fb.addElement(_,-1),(T=this.fb.we(y))!=-1&&!this.kC(this.fb.ja(T),_))return this.ke=new d.Md(3,_,this.fb.ja(T)),!1;var C=this.fb.lb(y);if(C!=-1&&!this.kC(this.fb.ja(C),_))return this.ke=new d.Md(3,_,this.fb.ja(C)),!1}return!0},p.prototype.pO=function(){return 10>this.X.I()?this.nO():this.oO()},p.prototype.oO=function(){var y=new d.gd;y.Ib(this.X);var v=new d.Md;return!d.$t.kI(!1,y,this.Oj,v,this.nd)||(v.Jo=y.Ua(v.Jo),v.Ko=y.Ua(v.Ko),this.ke.Wt(v),!1)},p.prototype.nO=function(){var y=this.X,v=y.Ga();for(y=y.Ga();v.$a();)for(;v.Ha();){var _=v.ha();if(!v.Qn()||!v.$S()){y.BW(v);do for(;y.Ha();){var x=y.ha();if((x=_.zr(x,this.Oj,!0))!=0)return this.ke=new d.Md(x==2?5:4,v.wb(),y.wb()),!1}while(y.$a())}}return!0},p.prototype.sO=function(){var y=this.X;this.hb.length=0,this.po.length=0,this.Zf=y.Ga(),this.Zf.JB();var v=new d.ia(0);v.Jb(10);var _=NaN,x=0,T=0;for(y=2*y.I();T<y;T++){var C=this.fi.get(T);if(!(1&(C=this.gi.get(C)))){C>>=1;var A=this.lf.read(2*C),R=this.lf.read(2*C+1);if(v.size!=0&&(A!=_||R!=x)){if(!this.RI(v))return!1;v!=null&&v.clear(!1)}v.add(C),_=A,x=R}}return!!this.RI(v)},p.prototype.rO=function(){for(var y=this.X,v=Array(y.da()),_=0,x=y.da();_<x;_++)v[_]=y.Nn(_);x=new S;var T=new d.h;_=this.fi.get(0);var C=(_=this.gi.get(_))>>1;this.lf.tc(2*C,T);var A=v[_=this.Fl.get(C)],R=y.Ba(_),F=y.Vc(_)-1;x.el=C==R||C==F,x.ny=this.ql?!A&&x.el:x.el,x.Ai=_,x.x=T.x,x.y=T.y,x.xm=C;for(var N=new S,B=1,q=this.fi.size;B<q;B++)if(_=this.fi.get(B),!(1&(_=this.gi.get(_)))){C=_>>1,this.lf.tc(2*C,T),(_=this.Fl.get(C))!=x.Ai&&(A=v[_],R=y.Ba(_),F=y.Vc(_)-1);var U=C==R||C==F,K=this.ql?!A&&x.el:x.el;if(N.x=T.x,N.y=T.y,N.Ai=_,N.xm=C,N.ny=K,N.el=U,N.x==x.x&&N.y==x.y){if(this.ql){if(!(N.ny&&x.ny||N.Ai==x.Ai&&(N.el||x.el)))return this.ke=new d.Md(8,N.xm,x.xm),!1}else if(!N.el||!x.el)return this.ke=new d.Md(5,N.xm,x.xm),!1}_=x,x=N,N=_}return!0},p.prototype.JE=function(){for(var y=this.X,v=[],_=-1,x=!1,T=0,C=y.da();T<C;T++)y.Ev(T)&&(x=!1,_++,T<C-1&&(y.Ev(T+1)||(x=!0))),v[T]=x?_:-1;x=new d.h,T=this.fi.get(0);var A=(T=this.gi.get(T))>>1;this.lf.tc(2*A,x),T=this.Fl.get(A),_=new h(x.x,x.y,T,A,v[T]),y=[];var R=1;for(C=this.fi.size;R<C;R++)if(T=this.fi.get(R),!(1&(T=this.gi.get(T)))){if(A=T>>1,this.lf.tc(2*A,x),T=this.Fl.get(A),(T=new h(x.x,x.y,T,A,v[T])).x==_.x&&T.y==_.y){if(T.Ai==_.Ai)return this.ke=new d.Md(9,T.xm,_.xm),!1;0<=v[T.Ai]&&v[T.Ai]==v[_.Ai]&&(y.length!=0&&y[y.length-1]==_||y.push(_),y.push(T))}_=T}if(y.length==0)return!0;for(T=new d.jp(!0),d.O.$u(v,-1),x=-1,(R=new d.h).Rc(),_=0,C=y.length;_<C;_++){(A=y[_]).x==R.x&&A.y==R.y||(x=T.Ph(0),R.x=A.x,R.y=A.y);var F=v[A.Ai];F==-1&&(F=T.Ph(2),v[A.Ai]=F),T.addElement(F,x),T.addElement(x,F)}for((C=new d.ia(0)).Jb(10),_=T.je;_!=-1;_=T.qz(_))if(!(1&(y=T.PF(_)))&&2&y){for(y=-1,C.add(_),C.add(-1);0<C.size;){if(x=C.Fc(),C.If(),R=C.Fc(),C.If(),1&(A=T.PF(R))){y=2&A?R:x;break}for(T.fX(R,1|A),A=T.rc(R);A!=-1;A=T.lb(A))(F=T.getData(A))!=x&&(C.add(F),C.add(R))}if(y!=-1){for(T=-1,_=0,C=v.length;_<C;_++)if(v[_]==y){T=_;break}return this.ke=new d.Md(10,T,-1),!1}}return!0},p.prototype.tO=function(){var y=this.X;if(0>=y.Ke())return this.ke=new d.Md(6,y.da()==1?1:-1,-1),0;if(y.da()==1)return this.ql&&!this.JE()?0:2;this.to=d.ia.qf(y.da(),0),this.JA=d.ia.qf(y.da(),-1);for(var v=-1,_=0,x=0,T=y.da();x<T;x++){var C=y.Ir(x);if(this.to.write(x,0>C?0:256),0<C)v=x,_=C;else{if(C==0)return this.ke=new d.Md(6,x,-1),0;if((0>v||_<Math.abs(C))&&(this.ke=new d.Md(7,x,-1),this.ql))return 0;this.JA.write(x,v)}}for(this.dt=y.da(),this.Om=new d.ia(0),this.Om.Jb(10),T=y.I(),this.Mo=NaN,(y=new d.ia(0)).Jb(10),this.Qq=d.ia.qf(T,-1),this.Hw=d.ia.qf(T,-1),this.zj!=null?this.zj.clear(!1):this.zj=new d.ia(0),this.zj.Jb(10),this.fb.clear(),this.fb.Vo(new s(this)),v=0,T*=2;0<this.dt&&v<T;v++)if(_=this.fi.get(v),!(1&(_=this.gi.get(_)))){if(_>>=1,(x=this.lf.read(2*_+1))!=this.Mo&&y.size!=0){if(!this.ut(y))return 0;y!=null&&y.clear(!1)}y.add(_),this.Mo=x}return 0<this.dt&&!this.ut(y)?0:this.ql?this.ke.Jj==0&&this.JE()?2:0:this.ke.Jj==0?2:1},p.prototype.RI=function(y){if(y.size==1)return!0;for(var v=0,_=y.size;v<_;v++){var x=y.get(v);this.Zf.Vb(x);var T=this.Zf.li();this.hb.push(this.Su(T,x,this.Zf.gb,!0)),this.Zf.ha(),T=this.Zf.ha(),this.hb.push(this.Su(T,x,this.Zf.gb,!1))}var C=this;for(this.hb.sort(function(F,N){return C.XP(F,N)}),(x=this.mh.je)==-1&&(x=this.mh.Ph(0)),this.mh.fn(this.hb.length),v=0,_=this.hb.length;v<_;v++)this.mh.addElement(x,v);v=!0;for(var A=_=-1;v&&(v=!1,(T=this.mh.rc(x))!=-1);)for(var R=this.mh.lb(T);R!=-1;)if(_=this.mh.getData(T),A=this.mh.getData(R),(_=this.hb[_].Io)!=(A=this.hb[A].Io))T=R,R=this.mh.lb(T);else if(v=!0,this.mh.jd(x,T),T=this.mh.we(R),(R=this.mh.jd(x,R))==-1||T==-1)break;if(v=this.mh.bs(x),this.mh.LE(x),0<v)return this.ke=new d.Md(5,_,A),!1;for(v=0,_=y.size;v<_;v++)this.vB(this.hb[v]);return this.hb.length=0,!0},p.prototype.ut=function(y){for(var v=0,_=y.size;v<_;v++){var x=y.get(v),T=this.Qq.read(x);if(T!=-1){var C=this.fb.ja(T);this.zj.add(C),this.fb.vd(T,-1),this.vB(this.hb[C]),this.hb[C]=null,this.Qq.write(x,-1)}(T=this.Hw.read(x))!=-1&&(C=this.fb.ja(T),this.zj.add(C),this.fb.vd(T,-1),this.vB(this.hb[C]),this.hb[C]=null,this.Hw.write(x,-1))}for(v=0,_=y.size;v<_;v++){if(x=y.get(v),this.Zf.Vb(x),(T=this.Zf.li()).na>T.la){var A=this.Zf.wb(),R=this.Su(T,x,this.Zf.gb,!0);0<this.zj.size?(C=this.zj.Fc(),this.zj.If(),this.hb[C]=R):(C=this.hb.length,this.hb.push(R)),T=this.fb.addElement(C,-1),this.Qq.read(A)==-1?this.Qq.write(A,T):this.Hw.write(A,T),!(3&this.to.read(this.Zf.gb))&&this.Om.add(T)}this.Zf.ha(),(T=this.Zf.ha()).na<T.la&&(A=this.Zf.ik(),R=this.Su(T,x,this.Zf.gb,!1),0<this.zj.size?(C=this.zj.Fc(),this.zj.If(),this.hb[C]=R):(C=this.hb.length,this.hb.push(R)),T=this.fb.addElement(C,-1),this.Qq.read(A)==-1?this.Qq.write(A,T):this.Hw.write(A,T),!(3&this.to.read(this.Zf.gb))&&this.Om.add(T))}for(v=0,_=this.Om.size;v<_&&0<this.dt;v++)if(T=this.Om.get(v),!(3&this.to.read(this.hb[this.fb.ja(T)].IA))){y=-1,x=this.fb.we(T);var F=T;R=null,C=-1;for(var N=0;x!=-1&&(C=this.fb.ja(x),C=(R=this.hb[C]).IA,!(3&(N=this.to.read(C))));)F=x,x=this.fb.we(x);x==-1?(A=1,x=F):(y=(3&N)==1?C:this.JA.read(C),A=R.XF()!=0?0:1,x=this.fb.lb(x));do{if(C=this.fb.ja(x),C=(R=this.hb[C]).IA,!(3&(F=this.to.read(C)))){if(A!=R.XF())return this.ke=new d.Md(6,C,-1),!1;if(F=252&F|(N=A==0||R.Wp()?2:1),this.to.write(C,N),N==2&&this.ke.Jj==0&&this.JA.read(C)!=y&&(this.ke=new d.Md(7,C,-1),this.ql))return!1;if(this.dt--,this.dt==0)return!0}(3&F)==1&&(y=C),F=x,x=this.fb.lb(x),A=A!=0?0:1}while(F!=T)}return this.Om!=null?this.Om.clear(!1):this.Om=new d.ia(0),!0},p.prototype.Su=function(y,v,_,x){if(y.getType()!=322)throw d.i.Qa();return(y=this.sP(y)).Io=v,y.IA=_,y.yq=0,y.nX(x),y},p.prototype.sP=function(y){if(0<this.po.length){var v=this.po[this.po.length-1];--this.po.length,y.copyTo(v.ne)}else(v=new O).ne=d.SC.jg(y);return v},p.prototype.vB=function(y){y.ne.getType()==322&&this.po.push(y)},p.prototype.kU=function(){for(var y=this.X.I(),v=new d.ia(0),_=0;_<y;_++)v.add(_);var x=this;for(v.Vd(0,y,function(T,C){return x.Ou(T,C)}),_=1;_<y;_++)if(this.Ou(v.get(_-1),v.get(_))==0)return this.ke=new d.Md(3,v.get(_-1),v.get(_)),0;return 2},p.prototype.JV=function(){return this.GE()&&this.DE(!0)?2:0},p.prototype.oV=function(){return this.eT()},p.prototype.pU=function(){for(var y=this.X.I(),v=new d.ia(0),_=0;_<y;_++)v.add(_);var x=this;v.Vd(0,y,function(F,N){return x.PO(F,N)});var T=Array(y);for(d.O.$u(T,!1),T[v.get(0)]=!0,_=1;_<y;_++){var C=v.get(_-1),A=v.get(_);this.Ou(C,A)==0?T[A]=!1:T[A]=!0}v=this.X.Ia(),C=this.X,A=0;var R=1;for(_=0;_<y;_++)T[_]?R=_+1:(A<R&&v.Fd(C,A,R),A=_+1);return A<R&&v.Fd(C,A,R),v.Ch(2,this.Bo),v},p.prototype.NV=function(){var y=this.X,v=y.Ga(),_=y.Ga(),x=this.X.Ia(),T=this.X,C=y.hasAttribute(1),A=C?d.ta.wE(this.Qg,y,!0):0,R=new d.ia(0),F=new d.ia(0);for(R.Jb(d.O.truncate(y.I()/2+1)),F.Jb(d.O.truncate(y.I()/2+1));v.$a();)if(_.$a(),!(2>y.Ja(v.gb))){_.EW();for(var N,B,q=!0;v.Ha();){var U=v.ha(),K=_.li();if(v.wb()>_.wb())break;q&&(R.add(v.wb()),F.add(_.ik()),q=!1),B=R.Fc();var X=v.ik();if(1<X-B){var te=new d.h;te.uc(y.Na(B),y.Na(X)),N=te.length()}else N=U.Qb();B=F.Fc(),1<(X=_.wb())-B?((te=new d.h).uc(y.Na(B),y.Na(X)),B=te.length()):B=K.Qb(),N>this.Bo?R.add(v.ik()):C&&(N=y.Uc(1,R.Fc(),0),U=U.gv(1,0),Math.abs(U-N)>A&&R.add(v.ik())),B>this.Bo?F.add(_.wb()):C&&(N=y.Uc(1,F.Fc(),0),U=K.gv(1,0),Math.abs(U-N)>A&&F.add(_.wb()))}if(R.Fc()<F.Fc()?R.size>F.size?R.If():F.If():(R.Fc()!=F.Fc()&&F.If(),F.If()),2<=F.size+R.size){for(q=new d.Sa,K=0,U=R.size;K<U;K++)T.ve(R.get(K),q),K==0?x.nf(q):x.lineTo(q);for(K=F.size-1;0<K;K--)T.ve(F.get(K),q),x.lineTo(q);T.dc(v.gb)?x.Ap():0<F.size&&(T.ve(F.get(0),q),x.lineTo(q))}R!=null&&R.clear(!1),F!=null&&F.clear(!1)}return x.Ch(2,this.Bo),x},p.prototype.rV=function(){return this.DX()},p.prototype.DX=function(){return this.X.getType()==1736&&this.X.In()==1?d.Fg.Mk(this.X,this.Bo,!0,!1,this.nd):(this.Hi=new d.gd,this.Hi.Ib(this.X),this.Hi.fd!=0&&(this.xA!=1&&d.Tk.V(this.Hi,this.Bo,this.nd,!0),this.X.getType()==1736&&d.rn.V(this.Hi,this.Hi.ld,this.xA,!1,this.nd)),this.X=this.Hi.Ne(this.Hi.ld),this.X.getType()==1736&&(this.X.fm(),this.X.Yo(0)),this.X.Ch(2,this.Bo),this.X)},p.rs=function(y,v,_,x,T){if(x!=null&&(x.Jj=0,x.Jo=-1,x.Ko=-1),y.B())return 1;var C=y.getType();if(C==33)return 1;var A=d.ta.kj(v,y,!1);if(C==197)return v=new d.l,y.A(v),v.Bi(A)?(x!=null&&(x.Jj=2,x.Jo=-1,x.Ko=-1),0):1;if(d.aa.yd(C))return(A=new d.Ta(y.description)).oc(y,!0),p.rs(A,v,_,x,T);var R=y.om(A);if((_=_?-1:R)!=-1)return _;if(v=new p(y,v,_,T,!1),C==550)_=v.kU();else if(C==1607)_=v.JV();else{if(C!=1736)throw d.i.Qa();_=v.oV()}return y.Ch(_,A),x!=null&&_==0&&x.Wt(v.ke),_},p.cK=function(y,v,_,x){if(y.B())return y;var T=y.getType();if(T==33)return y;var C=d.ta.kj(v,y,!1);if(T==197)return v=new d.l,y.A(v),v.Bi(C)?y.Ia():y;if(d.aa.yd(T))return(T=new d.Ta(y.description)).oc(y,!0),p.cK(T,v,_,x);if(C=y.om(C),(_=_?-1:C)==2)return y;if(y=new p(y,v,_,x,!1),T==550)y=y.pU();else if(T==1607)y=y.NV();else{if(T!=1736)throw d.i.Qa();y=y.rV()}return y},p.prototype.Mh=function(y,v,_){if(y==v)return 0;y=this.gi.get(y);var x=this.gi.get(v);v=y>>1;var T=x>>1,C=new d.h,A=new d.h;return this.lf.tc(2*v,C),C.y+=1&y?this.Oj:-this.Oj,this.lf.tc(2*T,A),A.y+=1&x?this.Oj:-this.Oj,(y=C.compare(A))==0&&_?0>(_=this.Fl.get(v)-this.Fl.get(T))?-1:0<_?1:0:y},p.prototype.Ou=function(y,v){if(y==v)return 0;var _=this.X,x=_.Na(y),T=_.Na(v);if(x.x<T.x)return-1;if(x.x>T.x)return 1;if(x.y<T.y)return-1;if(x.y>T.y)return 1;for(x=1;x<this.oT;x++){T=this.nH.kd(x);for(var C=d.ra.Va(T),A=0;A<C;A++){var R=_.Uc(T,y,A),F=_.Uc(T,v,A);if(R<F)return-1;if(R>F)return 1}}return 0},p.prototype.PO=function(y,v){var _=this.Ou(y,v);return _==0?y<v?-1:1:_},p.prototype.XP=function(y,v){if(y===v)return 0;var _=y.ne.kg();y.Wp()&&_.Sq(),y=v.ne.kg(),v.Wp()&&y.Sq(),v=_.qu();var x=y.qu();return x==v?(v=_.wi(y),Math.abs(v)<=8881784197001252e-31*(Math.abs(y.x*_.y)+Math.abs(y.y*_.x))&&(v--,v++),0>v?1:0<v?-1:0):v<x?-1:1},p}();d.Jx=c}(Y||(Y={})),function(d){var O=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Wt(h,S),h.prototype.getType=function(){return 30},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.V=function(l,s,a,c){return l instanceof d.aa?(l=new d.Zc(l),s=new d.Zc(s),this.V(l,s,a,c).next()):new d.BL(l,s,a,c)},h.ep=function(l,s,a,c){var p=l.Db(),y=s.Db();if(l.B()&&s.B())return p>y?l:s;if(l.B())return s;if(s.B())return l;var v=new d.l,_=new d.l,x=new d.l;return l.A(v),s.A(_),x.K(v),x.Zb(_),v=d.ta.Wd(a,x,!0),_=l.getType(),x=s.getType(),_==33&&x==33?h.aV(l,s,v):_!=x?0<p||0<y?p>y?l:s:_==550?h.iI(l,s,v):h.iI(s,l,v):d.Fg.ep(l,s,a,c)},h.aV=function(l,s,a){a=a*Math.sqrt(2)*1.00001,a*=a;var c=l.D(),p=s.D(),y=new d.de(l.description);return d.h.yc(c,p)>a&&(y.add(l),y.add(s)),y},h.iI=function(l,s,a){var c=l.ub(0),p=l.I(),y=s.D(),v=l.Ia();a=a*Math.sqrt(2)*1.00001;var _=new d.l;if(l.A(_),_.W(a,a),_.contains(y)){a*=a,_=!1;for(var x=[],T=0;T<p;T++)x[T]=!1;for(T=0;T<p;T++){var C=c.read(2*T),A=c.read(2*T+1);(C-=y.x)*C+(A-=y.y)*A<=a&&(_=!0,x[T]=!0)}if(_)for(T=0;T<p;T++)x[T]||v.Fd(l,T,T+1);else v.Fd(l,0,p),v.add(s)}else v.Fd(l,0,p),v.add(s);return v},h.instance=null,h}(d.Je);d.Kx=O}(Y||(Y={})),function(d){var O=function(){function S(h,l,s,a){this.ts=l==null,this.ya=-1,this.Rd=h,this.vg=s,this.NT=l.next(),this.Ub=a}return S.prototype.next=function(){return this.ts?null:(h=this.Rd.next())!=null?(this.ya=this.Rd.La(),d.Kx.ep(h,this.NT,this.vg,this.Ub)):null;var h},S.prototype.La=function(){return this.ya},S.prototype.qe=function(){},S}();d.BL=O}(Y||(Y={})),function(d){var O=function(){function l(){}return l.prototype.Fz=function(){this.$y=null,this.Ax=-1,this.AK=!1},l}(),S=function(){function l(){this.Gr=0,this.pj=[]}return l.prototype.pN=function(s){this.Gr+=s.Ax,this.pj.push(s)},l.prototype.TV=function(){this.Gr-=this.pj[this.pj.length-1].Ax,--this.pj.length},l.prototype.my=function(){return this.pj[this.pj.length-1]},l.prototype.Nb=function(s){return s===this},l}(),h=function(){function l(s,a,c){this.ya=-1,this.Ic=!1,this.AH=[!1,!1,!1,!1],this.uq=[0,0,0,0],this.jA=!1,this.zk=-1,this.iq=0,this.bo=-1,this.Do=[],this.Rd=s,this.vg=a,this.Ub=c}return l.dE=function(s){var a=[],c=0;for(s=Object.keys(s);c<s.length;c++)a.push(Number(s[c]));return a.sort(function(p,y){return p-y}),a},l.prototype.fG=function(s){var a=this.Do[s],c=l.dE(a)[0],p=a[c],y=p.my().$y;return p=p.my().AK,delete a[c],p&&(y=d.Yl.local().V(y,this.vg,!1,this.Ub),s==0&&y.getType()==33&&(s=new d.de(y.description),y.B()||s.add(y),y=s)),y},l.prototype.next=function(){if(this.Ic&&this.bo==this.zk)return null;for(;!this.qK(););if(this.zk==-1)return null;if(this.jA){for(this.bo++;;){if(this.bo>this.zk||0>this.bo)throw d.i.Qa();if(this.AH[this.bo])break}return this.ya++,this.fG(this.bo)}return this.ya=0,this.bo=this.zk,this.fG(this.zk)},l.prototype.La=function(){return this.ya},l.prototype.qK=function(){if(this.Ic)return!0;var s=null;if(this.Rd!=null&&(s=this.Rd.next())==null&&(this.Ic=!0,this.Rd=null),d.mp.zp(this.Ub),s!=null){var a=s.Db();this.AH[a]=!0,a>=this.zk&&!this.jA&&(this.ND(a,!1,s),a>this.zk&&!this.jA&&this.zW(a))}if(0<this.iq)for(a=0;a<=this.zk;a++)for(;1<this.uq[a]&&(s=this.FO(a)).length!=0;)s=d.Fg.VP(s,this.vg,this.Ub),this.ND(a,!0,s);return this.Ic},l.prototype.FO=function(s){for(var a=[],c=[],p=this.Do[s],y=l.dE(p),v=0;v<y.length;v++){var _=y[v],x=p[_];if(this.Ic||1e4<x.Gr&&1<x.pj.length){for(this.uq[s]-=x.pj.length,this.iq-=x.pj.length;0<x.pj.length;)a.push(x.my().$y),x.TV();c.push(_)}}for(v=0;v<c.length;v++)delete p[c[v]];return a},l.prototype.zW=function(s){for(var a=0;a<s;a++)this.Do[a]=[],this.iq-=this.uq[a],this.uq[a]=0},l.prototype.ND=function(s,a,c){var p=new O;if(p.Fz(),p.$y=c,c=l.eS(c),p.Ax=c,c=l.cS(c),s+1>this.Do.length)for(var y=0,v=Math.max(2,s+1);y<v;y++)this.Do.push([]);(y=this.Do[s][c])===void 0&&(y=new S,this.Do[s][c]=y),p.AK=a,y.pN(p),this.uq[s]++,this.iq++,this.zk=Math.max(this.zk,s)},l.cS=function(s){return 0<s?d.O.truncate(Math.log(s)/Math.log(4)+.5):0},l.eS=function(s){var a=s.getType();if(d.aa.xj(a))return s.I();if(a==33)return 1;if(a==197)return 4;if(d.aa.yd(a))return 2;throw d.i.Qa()},l.prototype.qe=function(){this.qK()},l}();d.DL=h}(Y||(Y={})),function(d){var O=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Wt(h,S),h.prototype.getType=function(){return 1},h.prototype.V=function(l,s,a,c){return c===void 0?new d.DL(l,s,a):this.gQ(l,s,a,c)},h.prototype.gQ=function(l,s,a,c){return l=new d.Zc([l,s]),this.V(l,a,c).next()},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.instance=null,h}(d.Je);d.Gh=O}(Y||(Y={})),function(d){var O,S;(S=O||(O={}))[S.nextPath=0]="nextPath",S[S.nextSegment=1]="nextSegment",S[S.iterate=2]="iterate",O=function(){function h(l,s,a,c){this.Ts=new d.l,this.GT=l,this.HT=s,this.mq=c,this.uo=-1,this.rl=!1;var p=l.Bb;p!=null&&(p=c?p.zo:p.Fb)!=null&&(this.Ic=!1,this.qa=a,this.Fb=p,this.xw=this.Fb.getIterator(),this.nq=this.rl=!0,this.Xb=0,c?this.uo=s.da():this.sd=s.Ga()),this.rl||(p=s.Bb)!=null&&(p=c?p.zo:p.Fb)!=null&&(this.Ic=!1,this.qa=a,this.Fb=p,this.xw=this.Fb.getIterator(),this.rl=!0,this.nq=!1,this.Xb=0,c?this.uo=l.da():this.sd=l.Ga()),this.rl||(this.ci=c?d.ta.mR(l,s,a,1<=l.om(0),1<=s.om(0)):d.ta.lR(l,s,a))}return h.prototype.next=function(){if(this.rl){if(this.Ic)return!1;for(var l=!0;l;)switch(this.Xb){case 0:l=this.xU();break;case 1:l=this.yU();break;case 2:l=this.Uz();break;default:throw d.i.fa("internal error")}return!this.Ic}return this.ci!=null&&this.ci.next()},h.prototype.nl=function(){return this.rl?this.nq?this.Fb.ja(this.Fs):this.mq?this.uo:this.sd.wb():this.ci.nl(this.ci.Vf)},h.prototype.hl=function(){return this.rl?this.nq?this.mq?this.uo:this.sd.wb():this.Fb.ja(this.Fs):this.ci.hl(this.ci.Af)},h.prototype.uz=function(){if(!this.mq)throw d.i.fa("internal error");return this.rl?this.nq?this.Fb.GF(this.Fs):this.Ts:this.ci.uz(this.ci.Vf)},h.prototype.az=function(){if(!this.mq)throw d.i.fa("internal error");return this.rl?this.nq?this.Ts:this.Fb.GF(this.Fs):this.ci.az(this.ci.Af)},h.prototype.xU=function(){return this.mq?--this.uo==-1?(this.Ic=!0,!1):(this.nq?this.HT.Rj(this.uo,this.Ts):this.GT.Rj(this.uo,this.Ts),this.xw.Xi(this.Ts,this.qa),this.Xb=2,!0):this.sd.$a()?(this.Xb=1,!0):(this.Ic=!0,!1)},h.prototype.yU=function(){if(!this.sd.Ha())return this.Xb=0,!0;var l=this.sd.ha();return this.xw.Uo(l,this.qa),this.Xb=2,!0},h.prototype.Uz=function(){return this.Fs=this.xw.next(),this.Fs==-1&&(this.Xb=this.mq?0:1,!0)},h}(),d.Zl=O}(Y||(Y={})),function(d){(d=d.OL||(d.OL={}))[d.enumClosed=1]="enumClosed",d[d.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",d[d.enumOGCStartPolygon=4]="enumOGCStartPolygon",d[d.enumCalcMask=4]="enumCalcMask"}(Y||(Y={})),function(d){d.QC=function(){function O(){}return O.tb=function(S,h,l,s,a,c,p,y,v){var _=[0,0,0],x=[0,0,0],T=[0,0,0],C=[0,0,0,0],A=new d.ga(0),R=new d.ga(0),F=new d.ga(0);if(p!=null||y!=null||v!=null)if(d.s.ti(h))d.Yg.tb(S,l,s,a,c,p,y,v);else{a=d.F.ba(a),l=d.F.ba(l);var N=d.F.ba(a-l);if(d.s.Y(s,c)&&(d.s.Y(l,a)||d.s.Y(d.s.P(s),1.570796326794897)))p!=null&&(p.u=0),y!=null&&(y.u=0),v!=null&&(v.u=0);else{if(d.s.Y(s,-c)){if(d.s.Y(d.s.P(s),1.570796326794897))return p!=null&&(p.u=2*d.F.Ah(S,h)),y!=null&&(y.u=0<s?d.F.ba(3.141592653589793-d.F.ba(a)):d.F.ba(a)),void(v!=null&&(v.u=0<s?d.F.ba(a):d.F.ba(3.141592653589793-d.F.ba(a))));d.s.Y(d.s.P(N),3.141592653589793)&&(p!=null&&(p.u=2*d.F.Ah(S,h)),y!=null&&(y.u=0),v!=null&&(v.u=0))}else if(d.s.Y(d.s.P(s),1.570796326794897)||d.s.Y(d.s.P(c),1.570796326794897)||d.s.Y(l,a)||d.s.Y(d.s.P(N),3.141592653589793)||d.s.Cd(s))return void d.Wk.tb(S,h,l,s,a,c,p,y,v);var B=Math.sqrt(1-h);a=d.F.ba(a-l),l=0,d.F.cl(1,h,s,l,0,A,R,F),_[0]=A.u,_[1]=R.u,_[2]=F.u,d.F.cl(1,h,c,a,0,A,R,F),x[0]=A.u,x[1]=R.u,x[2]=F.u,T[0]=0,T[1]=0,T[2]=-1*h*d.F.n(1,h,s)*Math.sin(s),0>a?d.F.Wq(T,x,_,C,0):d.F.Wq(T,_,x,C,0),R=[0,0,0],F=[0,0,0];var q=[0,0,0];_=[0,0,0],A=[0,0,0];var U=Math.acos(C[2]/1),K=1-h,X=Math.tan(U),te=1+X*X/K,ae=2*T[2]*X/K;for(K=(-ae+(X=Math.sqrt(ae*ae-4*te*(T[2]*T[2]/K-1))))/(te*=2),ae=(-ae-X)/te,X=Math.tan(U),U=(K+ae)/2,T=((te=X*K+T[2])+(X*ae+T[2]))/2,X=d.F.gp(K-U,te-T),K=T/B*1.570796326794897,ae=0;100>ae&&(te=(te=d.F.w(h,K))*te/Math.cos(K)*(Math.sin(K)-T*te/(1-h)),!d.s.Cd(te));ae++)K-=te;T=d.F.n(1,h,K)*Math.cos(K),X=1-X/(T=Math.sqrt((T-U)*(T+U))),X*=2-X,te=d.F.on(R),U=d.F.on(F),K=d.F.on(q);var ge=d.F.St(q,R);ae=d.F.St(q,F),d.F.zx(q,R,_),d.F.zx(q,F,A),R=Math.acos(ge/(K*te)),F=Math.acos(ae/(K*U)),F*=d.s.Mb(1,d.F.St(_,A)),(1.570796326794897<=d.s.P(R)&&1.570796326794897<=d.s.P(F)||3.141592653589793<d.s.P(R-F))&&(R=(3.141592653589793-d.s.P(R))*d.s.Mb(1,R),F=(3.141592653589793-d.s.P(F))*d.s.Mb(1,F)),_=d.F.Qj(X,F),A=d.F.q(T,X,d.F.Qj(X,R)),_=d.F.q(T,X,_),_=d.s.P(_-A)*S,R=new d.ga(0),F=new d.ga(0),q=C[1]/1,q*=-d.s.Mb(1,N),A=Math.acos(q)*d.s.Mb(1,N),O.rf(S,h,l,s,_,A,R,F),d.s.Y(a,R.u)&&d.s.Y(c,F.u)||(X=d.F.gp(d.F.ba(a-R.u),c-F.u),O.rf(S,h,l,s,_,d.F.ba(A+3.141592653589793),R,F),(te=d.F.gp(d.F.ba(a-R.u),c-F.u))<X&&(A=d.F.ba(A+3.141592653589793))),R=[0,0,0,0],F=[0,0,0,0],X=[0,0,0],S=[0,0,0],l=[0,0,0],s=[0,0,0],q=[0,0,0],(T=[0,0,0])[0]=0,T[1]=0,T[2]=B,X[0]=0,X[1]=0,X[2]=0,d.F.Wq(X,T,x,R,0),d.s.Cd(c)?(S[0]=x[0],S[1]=x[1],S[2]=1,l[0]=1*Math.cos(a)-1*Math.sin(a),l[1]=1*Math.sin(a)+1*Math.cos(a)):(h=d.F.n(1,h,c)*Math.cos(c),S[0]=0,S[1]=0,x[2]+=Math.tan(1.570796326794897-d.s.P(c))*h*d.s.Mb(1,c),l[0]=h*Math.cos(a)-h*Math.sin(a),l[1]=h*Math.sin(a)+h*Math.cos(a)),l[2]=x[2],d.F.Wq(x,l,S,F,1),d.F.zx(F,R,s),d.F.zx(F,C,q),q=d.F.St(s,q)/(d.F.on(s)*d.F.on(q)),q*=d.s.Mb(1,N),a=Math.acos(q)*-d.s.Mb(1,N),(0<A&&0<a||0>A&&0>a)&&(a=d.F.ba(a+3.141592653589793)),p!=null&&(p.u=_),y!=null&&(y.u=A),v!=null&&(v.u=a)}}},O.rf=function(S,h,l,s,a,c,p,y){var v=[0,0,0],_=[0,0,0],x=[0,0,0],T=[0,0,0],C=[0,0,0],A=[0,0,0],R=[0,0,0],F=[0,0,0,0],N=new d.ga(0),B=new d.ga(0),q=new d.ga(0),U=new d.ga(0),K=new d.ga(0),X=new d.ga(0);if(p!=null&&y!=null)if(d.s.ti(h))d.Yg.rf(S,l,s,a,c,p,y);else if(d.s.Cd(a))p!=null&&(p.u=l),y!=null&&(y.u=s);else if(c=d.F.ba(c),0>a&&(a=d.s.P(a),c=d.F.ba(c+3.141592653589793)),l=d.F.ba(l),s=d.F.ba(s),1.570796326794897<d.s.P(s)&&(l=d.F.ba(l+3.141592653589793),s=d.s.Mb(3.141592653589793,s)-s),d.s.Y(d.s.P(s),1.570796326794897)||d.s.Cd(s)||d.s.Cd(c)||d.s.Y(d.s.P(c),3.141592653589793))d.Wk.rf(S,h,l,s,a,c,p,y);else{var te=Math.sqrt(1-h);for(S=a/S,d.F.cl(1,h,s,0,0,U,K,X),v[0]=U.u,v[1]=K.u,v[2]=K.u,R[0]=0,R[1]=0,R[2]=-1*h*d.F.n(1,h,s)*Math.sin(s),U=d.F.n(1,h,s),K=d.F.ba(1.570796326794897-c),X=Math.sin(K),a=Math.cos(s),s=Math.sin(s),C[0]=U*a-s*X,C[1]=Math.cos(K),C[2]=(1-h)*U*s+a*X,0>c?d.F.Wq(R,C,v,F,0):d.F.Wq(R,v,C,F,0),v=Math.acos(F[2]/1),F=Math.atan2(-F[1],-F[0]),s=1-h,K=1+(C=Math.tan(v))*C/s,s=(-(U=2*R[2]*C/s)+(C=Math.sqrt(U*U-4*K*(R[2]*R[2]/s-1))))/(K*=2),U=(-U-C)/K,C=Math.tan(v),v=(s+U)/2,R=((K=C*s+R[2])+(C*U+R[2]))/2,C=d.F.gp(s-v,K-R),te=R/te*1.570796326794897,s=0;100>s&&(U=(U=d.F.w(h,te))*U/Math.cos(te)*(Math.sin(te)-R*U/(1-h)),!d.s.Cd(U));s++)te-=U;te=d.F.n(1,h,te)*Math.cos(te),R=1-C/(te=Math.sqrt((te-v)*(te+v))),R*=2-R,A=Math.acos(d.F.St(A,_)/(d.F.on(A)*d.F.on(_))),A*=d.s.Mb(1,_[0]),c=(d.F.q(te,R,d.F.Qj(R,A))+S*d.s.Mb(1,c))/d.F.Ah(te,R),c=d.F.ba(1.570796326794897*c),c=d.F.Rq(R,c),d.F.n(te,R,c),C=d.F.ba(F+l),l=Math.cos(C),c=Math.sin(C),x[0]=T[0]*l+T[1]*-c,x[1]=T[0]*c+T[1]*l,x[2]=T[2],d.F.jO(h,x[0],x[1],x[2],q,B,N),p!=null&&(p.u=B.u),y!=null&&(y.u=q.u)}},O}()}(Y||(Y={})),function(d){var O=function(){function a(c){this.Ya=null,this.wt=new d.h,this.xt=new d.h,this.g=c}return a.prototype.compare=function(c,p,y){return this.g.Gc(p,this.wt),this.g.Gc(c.ja(y),this.xt),this.wt.compare(this.xt)},a}(),S=function(){function a(c){this.Bf=new d.h,this.Dk=new d.h,this.g=c}return a.prototype.Dh=function(c){this.Bf.L(c)},a.prototype.compare=function(c,p){return this.g.Gc(c.ja(p),this.Dk),this.Bf.compare(this.Dk)},a}(),h=function(a){function c(p){var y=a.call(this,p.g,p.qa,!1)||this;return y.ib=p,y}return Wt(c,a),c.prototype.compare=function(p,y,v){if(this.rg)return-1;var _=this.ib.Qd.Jn(this.ib.Rh(y));p=p.ja(v);var x=this.ib.Qd.Jn(this.ib.Rh(p));return this.Dm=v,this.RE(y,_,p,x)},c}(d.UC),l=function(a){function c(p){var y=a.call(this,p.g,p.qa)||this;return y.ib=p,y}return Wt(c,a),c.prototype.compare=function(p,y){return this.rg?-1:(p=this.ib.Qd.Jn(this.ib.Rh(p.ja(y))),this.Dm=y,this.SE(y,p))},c}(d.aM),s=function(){function a(){this.Mc=this.df=this.jo=this.Qd=this.lh=this.zd=this.hb=this.g=null,this.Ng=!1,this.vh=this.Nm=this.ie=this.Gk=this.nh=this.Ak=this.Ff=this.$d=null,this.xh=this.Jq=this.UA=this.qa=0,this.Xv=this.Wn=!1,this.yo=new d.h,this.Pi=new d.h,this.hb=new d.$c(8),this.zd=new d.$c(5),this.lh=new d.au,this.Qd=new d.au,this.Ng=!1,this.vh=new d.h,this.vh.ma(0,0),this.qa=0,this.xh=-1,this.Wn=!1,this.g=null,this.df=new d.Yj,this.Mc=new d.Yj,this.nh=new d.ia(0),this.Gk=new d.TC,this.Ff=new d.ia(0),this.Ak=new d.ia(0),this.jo=new d.Sa}return a.prototype.PX=function(c,p){var y=new d.Dd;return y.$B(),c.Oc(y),this.er(c),this.Wn=!1,this.qa=p,this.UA=p*p,p=this.jC(),c.Oc(y),p||(this.qQ(),p||this.jC()),this.xh!=-1&&(this.g.Td(this.xh),this.xh=-1),this.g=null,this.Wn},a.prototype.TX=function(c,p){this.er(c),this.Wn=!1,this.qa=p,this.UA=p*p,this.Ng=!1,this.jC(),this.Ng||(this.Ng=c.Gp(p,!0,!1)==1),this.xh!=-1&&(this.g.Td(this.xh),this.xh=-1),this.g=null},a.prototype.pg=function(c,p){return this.hb.T(c,0+p)},a.prototype.LB=function(c,p,y){this.hb.S(c,0+p,y)},a.prototype.Rh=function(c){return this.hb.T(c,2)},a.prototype.ZW=function(c,p){this.hb.S(c,2,p)},a.prototype.RF=function(c,p){return this.hb.T(c,3+p)},a.prototype.Pp=function(c){return this.hb.T(c,7)},a.prototype.Pl=function(c,p){this.hb.S(c,7,p)},a.prototype.Rp=function(c,p){return this.hb.T(c,3+this.Op(c,p))},a.prototype.fr=function(c,p,y){this.hb.S(c,3+this.Op(c,p),y)},a.prototype.NR=function(c,p){return this.hb.T(c,5+this.Op(c,p))},a.prototype.hr=function(c,p,y){this.hb.S(c,5+this.Op(c,p),y)},a.prototype.Sr=function(c){return this.zd.T(c,0)},a.prototype.UW=function(c,p){this.zd.S(c,0,p)},a.prototype.ez=function(c){return this.zd.T(c,4)},a.prototype.cr=function(c,p){this.zd.S(c,4,p)},a.prototype.il=function(c){return this.zd.T(c,1)},a.prototype.ln=function(c,p){this.zd.S(c,1,p)},a.prototype.dz=function(c){return this.zd.T(c,3)},a.prototype.Et=function(c,p){this.zd.S(c,3,p)},a.prototype.Ym=function(c){var p=this.zd.Ce(),y=this.lh.Ph();return this.UW(p,y),c!=-1?(this.lh.addElement(y,c),this.g.Ra(c,this.xh,p),this.cr(p,this.g.Ua(c))):this.cr(p,-1),p},a.prototype.HP=function(c){this.zd.jd(c)},a.prototype.LD=function(c,p){this.lh.addElement(this.Sr(c),p),this.g.Ra(p,this.xh,c)},a.prototype.nt=function(c){var p=this.hb.Ce(),y=this.Qd.Ph();return this.ZW(p,y),c!=-1&&this.Qd.addElement(y,c),p},a.prototype.MD=function(c,p){this.Qd.addElement(this.Rh(c),p)},a.prototype.Uu=function(c){this.hb.jd(c),0<=(c=this.nh.lF(c))&&this.nh.SV(c)},a.prototype.hj=function(c,p){if(this.pg(c,0)==-1)this.LB(c,0,p);else{if(this.pg(c,1)!=-1)throw d.i.Qa();this.LB(c,1,p)}this.ky(c,p)},a.prototype.ky=function(c,p){var y=this.il(p);if(y!=-1){var v=this.Rp(y,p);this.hr(v,p,c),this.fr(c,p,v),this.fr(y,p,c),this.hr(c,p,y)}else this.hr(c,p,c),this.fr(c,p,c),this.ln(p,c)},a.prototype.Op=function(c,p){return this.pg(c,0)==p?0:1},a.prototype.Xm=function(c,p){var y,v=this.dz(p);if(v!=-1&&(this.df.vd(v,-1),this.Et(p,-1)),(v=this.il(p))!=-1){var _=y=v;do{var x=!1,T=this.Op(y,p),C=this.RF(y,T);if(this.pg(y,T+1&1)==c){if(this.Xu(y),this.Qd.bh(this.Rh(y)),this.Uu(y),y==C){v=-1;break}v==y&&(v=this.il(p),_=C,x=!0)}y=C}while(y!=_||x);if(v!=-1){do T=this.Op(y,p),C=this.RF(y,T),this.LB(y,T,c),y=C;while(y!=_);(y=this.il(c))!=-1?(_=this.Rp(y,c),x=this.Rp(v,c),_==y?(this.ln(c,v),this.ky(y,c),this.ln(c,y)):x==v&&this.ky(v,c),this.fr(v,c,_),this.hr(_,c,v),this.fr(y,c,x),this.hr(x,c,y)):this.ln(c,v)}}for(v=this.Sr(c),y=this.Sr(p),_=this.lh.rc(y);_!=-1;_=this.lh.lb(_))this.g.Ra(this.lh.ja(_),this.xh,c);this.lh.Hy(v,y),this.HP(p)},a.prototype.UT=function(c,p){var y=this.pg(c,0),v=this.pg(c,1),_=this.pg(p,0),x=this.pg(p,1);this.Qd.Hy(this.Rh(c),this.Rh(p)),p==this.il(y)&&this.ln(y,c),p==this.il(v)&&this.ln(v,c),this.Xu(p),this.Uu(p),y==_&&v==x||v==_&&y==x||(this.Hn(y,this.yo),this.Hn(_,this.Pi),this.yo.qb(this.Pi)?(y!=_&&this.Xm(y,_),v!=x&&this.Xm(v,x)):(v!=_&&this.Xm(v,_),y!=x&&this.Xm(y,x)))},a.prototype.Xu=function(c){var p=this.pg(c,1);this.dF(c,this.pg(c,0)),this.dF(c,p)},a.prototype.dF=function(c,p){var y=this.Rp(c,p),v=this.NR(c,p),_=this.il(p);y!=c?(this.fr(v,p,y),this.hr(y,p,v),_==c&&this.ln(p,y)):this.ln(p,-1)},a.prototype.WD=function(c,p,y){var v=this.Qd.rc(c),_=this.Qd.ja(v);c=this.Le(_);var x=this.Le(this.g.U(_));for(this.g.jr(_,p,y,!0),v=this.Qd.lb(v);v!=-1;v=this.Qd.lb(v)){_=this.Qd.ja(v);var T=this.Le(_)==c;this.g.jr(_,p,y,T)}v=p.Vp(y,0).ac(),p=p.Vp(y,p.ol(y)-1).wc(),this.BK(c,v),this.BK(x,p)},a.prototype.ZE=function(c,p,y){var v=this.Rh(c),_=this.pg(c,0),x=this.pg(c,1),T=this.nt(-1);for(this.nh.add(T),this.Pl(T,-3),this.Ff.add(T),this.hj(T,_),c=1,p=p.ol(y);c<p;c++)y=this.Ym(-1),this.Ak.add(y),this.Ff.add(y),this.hj(T,y),T=this.nt(-1),this.nh.add(T),this.Pl(T,-3),this.Ff.add(T),this.hj(T,y);for(this.hj(T,x),v=this.Qd.rc(v);v!=-1;v=this.Qd.lb(v))if(x=this.Qd.ja(v),this.Le(x)==_){c=0;do 0<c&&(T=this.Ff.get(c-1),this.LD(T,x),this.ez(T)==-1&&this.cr(T,this.g.Ua(x))),T=this.Ff.get(c),c+=2,this.MD(T,x),x=this.g.U(x);while(c<this.Ff.size)}else{c=this.Ff.size-1;do c<this.Ff.size-2&&(T=this.Ff.get(c+1),this.LD(T,x),0>this.ez(T)&&this.cr(T,this.g.Ua(x))),T=this.Ff.get(c),c-=2,this.MD(T,x),x=this.g.U(x);while(0<=c)}this.Ff.clear(!1)},a.prototype.Le=function(c){return this.g.Pa(c,this.xh)},a.prototype.TI=function(c,p,y){var v=this.pg(p,0),_=new d.h;this.Hn(v,_);var x=new d.h,T=this.pg(p,1);this.Hn(T,x);var C=y.ol(c),A=y.Vp(c,0),R=new d.h;if(A.Yp(R),!_.qb(R)){if(!this.Ng){var F=_.compare(this.vh);0>F*(R=R.compare(this.vh))&&(this.Ng=!0)}this.vF(v,this.Ff),this.Ak.add(v)}for(!this.Ng&&1<C&&(F=_.compare(x),A=A.wc(),(_.compare(A)!=F||A.compare(x)!=F||0>A.compare(this.vh))&&(this.Ng=!0)),c=(A=y.Vp(c,C-1)).wc(),x.qb(c)||(this.Ng||0>(F=x.compare(this.vh))*(R=c.compare(this.vh))&&(this.Ng=!0),this.vF(T,this.Ff),this.Ak.add(T)),this.Ff.add(p),x=0,T=this.Ff.size;x<T;x++)c=this.Ff.get(x),y=this.Pp(c),d.$c.LG(y)&&(this.Mc.vd(y,-1),this.Pl(c,-1)),c!=p&&this.Pp(c)!=-3&&(this.nh.add(c),this.Pl(c,-3));this.Ff.clear(!1)},a.prototype.lO=function(c,p){this.$d.compare(this.Mc,this.Mc.ja(c),p),this.$d.rg&&(this.$d.Kr(),this.oF(c,p))},a.prototype.oF=function(c,p){this.Wn=!0,c=this.Mc.ja(c),p=this.Mc.ja(p);var y=this.Qd.Jn(this.Rh(c)),v=this.Qd.Jn(this.Rh(p)),_=this.g.bc(y);_==null&&(this.ie==null&&(this.ie=new d.yb),this.g.ed(y,this.ie),_=this.ie),(y=this.g.bc(v))==null&&(this.Nm==null&&(this.Nm=new d.yb),this.g.ed(v,this.Nm),y=this.Nm),this.Gk.Oo(_),this.Gk.Oo(y),this.Gk.Ea(this.qa,!0)&&(this.Ng=!0),this.hK(c,p,-1,this.Gk),this.Gk.clear()},a.prototype.GQ=function(c,p){this.Wn=!0,p=this.Mc.ja(p);var y=this.Qd.Jn(this.Rh(p)),v=this.g.bc(y);v==null&&(this.ie==null&&(this.ie=new d.yb),this.g.ed(y,this.ie),v=this.ie),y=this.BF(c),this.Gk.Oo(v),this.g.Vi(y,this.jo),this.Gk.Kz(this.qa,this.jo,!0),this.hK(p,-1,c,this.Gk),this.Gk.clear()},a.prototype.xS=function(){if(this.nh.size!=0)for(;this.nh.size!=0;){if(this.nh.size>Math.max(100,this.g.fd)){this.nh.clear(!1),this.Ng=!0;break}var c=this.nh.Fc();this.nh.If(),this.Pl(c,-1),this.WS(c)!=-1&&this.wS(c),this.Vn=!1}},a.prototype.wS=function(c){if(this.Vn){var p=this.Mc.zu(this.MH,this.GH,c,!0);this.Vn=!1}else p=this.Mc.KD(c);p==-1?this.UT(this.Mc.ja(this.Mc.FF()),c):(this.Pl(c,p),this.$d.rg&&(this.$d.Kr(),this.oF(this.$d.Dm,p)))},a.prototype.WS=function(c){var p=this.pg(c,0);if(c=this.pg(c,1),this.Hn(p,this.yo),this.Hn(c,this.Pi),d.h.yc(this.yo,this.Pi)<=this.UA)return this.Ng=!0,-1;var y=this.yo.compare(this.vh),v=this.Pi.compare(this.vh);return 0>=y&&0<v?c:0>=v&&0<y?p:-1},a.prototype.oQ=function(){var c=new d.ia(0);c.Jb(this.g.fd);for(var p=this.g.Yq(),y=p.next();y!=-1;y=p.next())this.g.Pa(y,this.xh)!=-1&&c.add(y);this.g.nx(c,c.size),this.pQ(c)},a.prototype.pQ=function(c){this.df.clear(),this.df.De(c.size),this.df.Vo(new O(this.g));var p=new d.h;p.Rc();for(var y=-1,v=new d.h,_=0,x=c.size;_<x;_++){var T=c.get(_);this.g.Gc(T,v),v.qb(p)?(T=this.g.Pa(T,this.xh),this.Xm(y,T)):(y=this.Le(T),this.g.Gc(T,p),T=this.df.xn(T),this.Et(y,T))}},a.prototype.qQ=function(){var c=new d.ia(0);c.Jb(this.g.fd);for(var p=this.df.rc(-1);p!=-1;p=this.df.lb(p))c.add(this.df.ja(p));this.df.clear(),this.g.nx(c,c.size),p=0;for(var y=c.size;p<y;p++){var v=c.get(p),_=this.Le(v);v=this.df.xn(v),this.Et(_,v)}},a.prototype.vF=function(c,p){var y=this.il(c);if(y!=-1){var v=y;do d.$c.LG(this.Pp(v))&&p.add(v),v=this.Rp(v,c);while(v!=y)}},a.prototype.BK=function(c,p){for(c=this.lh.rc(this.Sr(c));c!=-1;c=this.lh.lb(c))this.g.mf(this.lh.ja(c),p)},a.prototype.hK=function(c,p,y,v){this.Xu(c),p!=-1&&this.Xu(p),this.TI(0,c,v),p!=-1&&this.TI(1,p,v),y!=-1&&(v.Bf.D(this.yo),this.Hn(y,this.Pi),this.Pi.qb(this.yo)||this.Ak.add(y)),y=0;for(var _=this.Ak.size;y<_;y++){var x=this.Ak.get(y),T=this.dz(x);T!=-1&&(this.df.vd(T,-1),this.Et(x,-1))}for(y=this.Rh(c),_=p!=-1?this.Rh(p):-1,this.WD(y,v,0),p!=-1&&this.WD(_,v,1),this.ZE(c,v,0),p!=-1&&this.ZE(p,v,1),this.Qd.bh(y),this.Uu(c),p!=-1&&(this.Qd.bh(_),this.Uu(p)),y=0,_=this.Ak.size;y<_;y++)(x=this.Ak.get(y))==this.Jq&&(this.Xv=!0),(T=this.dz(x))==-1&&((T=this.df.KD(this.BF(x)))==-1?(c=this.Le(this.df.ja(this.df.FF())),this.Xm(c,x)):this.Et(x,T));this.Ak.clear(!1)},a.prototype.Hn=function(c,p){this.g.dG(this.ez(c),p)},a.prototype.BF=function(c){return this.lh.Jn(this.Sr(c))},a.prototype.jC=function(){this.Xv=!1,this.Jq=-1,this.$d==null&&(this.Mc.Rv=!1,this.$d=new h(this),this.Mc.Zn=this.$d);var c=new d.ia(0),p=null,y=null;this.GH=this.MH=-1,this.Vn=!1;for(var v=this.df.rc(-1);v!=-1;){this.Vn=!1;var _=this.df.ja(v);this.Jq=this.Le(_),this.g.Gc(_,this.vh),this.$d.$J(this.vh.y,this.vh.x);var x=this.il(this.Jq),T=x==-1;if(!T){_=x;do{var C=this.Pp(_);C==-1?(this.nh.add(_),this.Pl(_,-3)):C!=-3&&c.add(C),_=this.Rp(_,this.Jq)}while(_!=x)}if(0<c.size){for(this.Vn=c.size==1&&this.nh.size==1,T=0,x=c.size;T<x;T++)_=this.Mc.ja(c.get(T)),this.Pl(_,-2);var A=-2,R=-2;for(T=0,x=c.size;T<x;T++){if(C=c.get(T),A==-2){var F=this.Mc.we(C);F!=-1?(_=this.Mc.ja(F),(_=this.Pp(_))!=-2&&(A=F)):A=-1}if(R==-2&&((C=this.Mc.lb(C))!=-1?(_=this.Mc.ja(C),(_=this.Pp(_))!=-2&&(R=C)):R=-1),A!=-2&&R!=-2)break}for(T=0,x=c.size;T<x;T++)C=c.get(T),_=this.Mc.ja(C),this.Mc.vd(C,-1),this.Pl(_,-1);c.clear(!1),this.MH=A!=-1?A:-1,this.GH=R!=-1?R:-1,A!=-1&&R!=-1?this.Vn||this.lO(A,R):A==-1&&R==-1&&(this.Vn=!1)}else T&&(p==null&&(p=new l(this)),p.Dh(this.vh),this.Mc.uJ(p),p.rg&&(p.Kr(),this.GQ(this.Jq,p.Dm)));this.xS(),this.Xv?(this.Xv=!1,y==null&&(y=new S(this.g)),y.Dh(this.vh),v=this.df.uJ(y)):v=this.df.lb(v)}return this.Wn},a.prototype.er=function(c){for(this.g=c,this.xh=this.g.Gd(),this.hb.De(c.fd+32),this.zd.De(c.fd),this.lh.At(c.fd),this.lh.fn(c.fd),this.Qd.At(c.fd+32),this.Qd.fn(c.fd+32),c=this.g.ld;c!=-1;c=this.g.ue(c))if(d.aa.Hc(this.g.ic(c)))for(C=this.g.Ob(c);C!=-1;C=this.g.Rb(C)){var p=this.g.Ja(C),y=this.g.Xa(C),v=this.Ym(y),_=this.nt(y);for(this.hj(_,v),A=this.g.U(y),y=0,p-=2;y<p;y++){var x=this.g.U(A),T=this.Ym(A);this.hj(_,T),_=this.nt(A),this.hj(_,T),A=x}this.g.dc(C)?(T=this.Ym(A),this.hj(_,T),_=this.nt(A),this.hj(_,T),this.hj(_,v)):(T=this.Ym(A),this.hj(_,T))}else for(var C=this.g.Ob(c);C!=-1;C=this.g.Rb(C)){var A=this.g.Xa(C);for(v=0,p=this.g.Ja(C);v<p;v++)this.Ym(A),A=this.g.U(A)}this.oQ()},a}();d.RC=s}(Y||(Y={})),function(d){var O=function(S){function h(l,s,a){var c=S.call(this)||this;if(l!==void 0)if(a!==void 0){c.description=d.ee.og();var p=new d.Nd;p.K(l,s,a),c.dC(p)}else if(s!==void 0)c.description=d.ee.og(),c.Cb(l,s);else if(l instanceof d.ra)c.description=l;else if(l instanceof d.h)c.description=d.ee.og(),c.Cb(l);else{if(!(l instanceof h))throw d.i.N();c.description=l.description,c.Cb(l.Lg(),l.ih()),l.ka!==null&&(c.ka=l.ka.slice(0))}else c.description=d.ee.og();return c}return Wt(h,S),h.prototype.D=function(l){if(l===void 0){if(this.Ac())throw d.i.fa("This operation should not be performed on an empty geometry.");return(l=new d.h).ma(this.ka[0],this.ka[1]),l}if(this.Ac())throw d.i.fa("This operation should not be performed on an empty geometry.");l.ma(this.ka[0],this.ka[1])},h.prototype.Cb=function(l,s){typeof l=="number"?(this.vc(),this.ka==null&&this.un(),this.ka[0]=l,this.ka[1]=s):(this.vc(),this.Cb(l.x,l.y))},h.prototype.Cz=function(){if(this.Ac())throw d.i.fa("This operation should not be performed on an empty geometry.");var l=new d.Nd;return l.x=this.ka[0],l.y=this.ka[1],l.z=this.description.iG()?this.ka[2]:d.ra.se(1),l},h.prototype.dC=function(l){this.vc();var s=this.hasAttribute(1);s||d.ra.DG(1,l.z)||(this.re(1),s=!0),this.ka==null&&this.un(),this.ka[0]=l.x,this.ka[1]=l.y,s&&(this.ka[2]=l.z)},h.prototype.Lg=function(){if(this.Ac())throw d.i.fa("This operation should not be performed on an empty geometry.");return this.ka[0]},h.prototype.cC=function(l){this.setAttribute(0,0,l)},h.prototype.ih=function(){if(this.Ac())throw d.i.fa("This operation should not be performed on an empty geometry.");return this.ka[1]},h.prototype.aK=function(l){this.setAttribute(0,1,l)},h.prototype.bS=function(){return this.Uc(1,0)},h.prototype.wX=function(l){this.setAttribute(1,0,l)},h.prototype.zR=function(){return this.Uc(2,0)},h.prototype.hX=function(l){this.setAttribute(2,0,l)},h.prototype.Ec=function(){return this.yF(3,0)},h.prototype.LJ=function(l){this.setAttribute(3,0,l)},h.prototype.Uc=function(l,s){var a=this.description.Pf(l);return 0<=a?this.ka[this.description.$j(a)+s]:d.ra.se(l)},h.prototype.yF=function(l,s){var a=this.description.Pf(l);return 0<=a?this.ka[this.description.$j(a)+s]:d.ra.se(l)},h.prototype.setAttribute=function(l,s,a){this.vc();var c=this.description.Pf(l);0>c&&(this.re(l),c=this.description.Pf(l)),this.ka==null&&this.un(),this.ka[this.description.$j(c)+s]=a},h.prototype.getType=function(){return 33},h.prototype.Db=function(){return 0},h.prototype.Oa=function(){this.vc(),this.ka!=null&&(this.ka[0]=NaN,this.ka[1]=NaN)},h.prototype.sn=function(l){if(this.ka!=null){for(var s=d.ee.Iw(l,this.description),a=[],c=0,p=0,y=l.Aa;p<y;p++){var v=l.kd(p),_=d.ra.Va(v);if(s[p]==-1){var x=d.ra.se(v);for(v=0;v<_;v++)a[c]=x,c++}else for(x=this.description.$j(s[p]),v=0;v<_;v++)a[c]=this.ka[x],c++,x++}this.ka=a}this.description=l},h.prototype.un=function(){this.lJ(this.description.Ae.length),h.cE(this.description.Ae,this.ka,this.description.Ae.length),this.ka[0]=NaN,this.ka[1]=NaN},h.prototype.Oc=function(l){if(l instanceof d.Dd){if(!this.Ac()){var s=this.D();l.Eh(s,s),this.Cb(s)}}else this.Ac()||(this.re(1),s=this.Cz(),this.dC(l.fp(s)))},h.prototype.copyTo=function(l){if(l.getType()!=33)throw d.i.N();l.vc(),this.ka==null?(l.Oa(),l.ka=null,l.Nf(this.description)):(l.Nf(this.description),l.lJ(this.description.Ae.length),h.cE(this.ka,l.ka,this.description.Ae.length))},h.prototype.Ia=function(){return new h(this.description)},h.prototype.B=function(){return this.Ac()},h.prototype.Ac=function(){return this.ka==null||isNaN(this.ka[0])||isNaN(this.ka[1])},h.prototype.bn=function(l){l.Oa(),this.description!=l.description&&l.Nf(this.description),l.Zb(this)},h.prototype.A=function(l){this.Ac()?l.Oa():(l.v=this.ka[0],l.G=this.ka[1],l.C=this.ka[0],l.H=this.ka[1])},h.prototype.Qo=function(l){if(this.Ac())l.Oa();else{var s=this.Cz();l.v=s.x,l.G=s.y,l.Ye=s.z,l.C=s.x,l.H=s.y,l.Bg=s.z}},h.prototype.Tg=function(l,s){var a=new d.Nc;return this.Ac()?(a.Oa(),a):(l=this.Uc(l,s),a.oa=l,a.va=l,a)},h.prototype.lJ=function(l){if(this.ka==null)this.ka=d.O.lg(l);else if(this.ka.length<l){for(var s=this.ka.slice(0),a=this.ka.length;a<l;a++)s[a]=0;this.ka=s}},h.cE=function(l,s,a){if(0<a)for(a=0;a<l.length;a++)s[a]=l[a]},h.prototype.Nb=function(l){if(l==this)return!0;if(!(l instanceof h)||this.description!=l.description)return!1;if(this.Ac())return!!l.Ac();for(var s=0,a=this.description.Ae.length;s<a;s++)if(this.ka[s]!=l.ka[s])return!1;return!0},h.prototype.cc=function(){var l=this.description.cc();if(!this.Ac())for(var s=0,a=this.description.Ae.length;s<a;s++){var c=this.ka[s];c=d.O.truncate(c^c>>>32),l=d.O.Th(c,l)}return l},h.prototype.mg=function(){return null},h}(d.aa);d.Sa=O}(Y||(Y={})),function(d){var O=function(){function S(h,l,s){h!==void 0&&(this.x=h,this.y=l,this.z=s)}return S.construct=function(h,l,s){var a=new S;return a.x=h,a.y=l,a.z=s,a},S.prototype.K=function(h,l,s){this.x=h,this.y=l,this.z=s},S.prototype.lx=function(){this.z=this.y=this.x=0},S.prototype.normalize=function(){var h=this.length();h==0&&(this.x/=h,this.y/=h,this.z/=h)},S.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},S.prototype.sub=function(h){return new S(this.x-h.x,this.y-h.y,this.z-h.z)},S.prototype.Ag=function(h){new S(this.x*h,this.y*h,this.z*h)},S.prototype.Qh=function(h){return this.x*h.x+this.y*h.y+this.z*h.z},S}();d.Nd=O}(Y||(Y={})),function(d){var O=function(){function S(h,l,s){this.Gw=this.DA=null,this.Xf=l,this.FT=l.y-s,this.ET=l.y+s,this.Ew=0,this.dA=h,this.qa=s,this.RT=s*s,this.eA=s!=0,this.Lv=!1}return S.prototype.result=function(){return this.Ew!=0?1:0},S.prototype.ZM=function(h){return h=h.hc(h.fe(this.Xf,!1)),d.h.yc(h,this.Xf)<=this.RT},S.prototype.fF=function(h){if(!this.eA&&(this.dA&&this.Xf.qb(h.ac())||this.Xf.qb(h.wc())))this.Lv=!0;else if(h.na==this.Xf.y&&h.na==h.la){if(this.dA&&!this.eA){var l=Math.max(h.sa,h.pa);this.Xf.x>Math.min(h.sa,h.pa)&&this.Xf.x<l&&(this.Lv=!0)}}else{var s=!1;if(l=Math.max(h.sa,h.pa),this.Xf.x>l?s=!0:this.Xf.x>=Math.min(h.sa,h.pa)&&(s=0<h.cq(!0,this.Xf.y,this.Gw,null)&&this.Gw[0]<=this.Xf.x),s){if(this.Xf.y==h.ac().y){if(this.Xf.y<h.wc().y)return}else if(this.Xf.y==h.wc().y&&this.Xf.y<h.ac().y)return;this.Ew=this.dA?1^this.Ew:this.Ew+(h.ac().y>h.wc().y?1:-1)}}},S.prototype.SI=function(h){var l=h.Tg(0,1);if(l.oa>this.ET||l.va<this.FT)return!1;if(this.eA&&this.ZM(h))return!0;if(l.oa>this.Xf.y||l.va<this.Xf.y)return!1;if(this.DA==null&&(this.DA=[null,null,null,null,null]),this.Gw==null&&(this.Gw=[0,0,0]),0<(l=h.eG()))for(h=0;h<l;h++){var s=this.DA[h].get();if(this.fF(s),this.Lv)return!0}else if(this.fF(h),this.Lv)return!0;return!1},S.PM=function(h,l,s){for(l=new S(h.In()==0,l,s),h=h.Ga();h.$a();)for(;h.Ha();)if(s=h.ha(),l.SI(s))return-1;return l.result()},S.QM=function(h,l,s,a){var c=new d.l;h.xc(c),c.W(a,a);var p=new S(h.In()==0,s,a);h=h.Ga();var y=new d.l;for(y.K(c),y.C=s.x+a,y.G=s.y-a,y.H=s.y+a,a=(s=l.MF(y,a)).next();a!=-1;a=s.next())if(h.Vb(l.ja(a)),h.Ha()&&(a=h.ha(),p.SI(a)))return-1;return p.result()},S.wm=function(h,l,s){if(h.B())return 0;var a=new d.l;if(h.xc(a),a.W(s,s),!a.contains(l))return 0;if((a=h.Bb)!=null){var c=a.Fk;if(c!=null){if((c=c.So(l.x,l.y))==1)return 1;if(c==0)return 0}if((a=a.Fb)!=null)return S.QM(h,a,l,s)}return S.PM(h,l,s)},S.bT=function(h,l,s){return l.B()?0:S.wm(h,l.D(),s)},S.Ml=function(h,l){return!(16>(h=h.I()))&&2*h+Math.log(h)/Math.log(2)*l<1*h*l},S}();d.Dg=O}(Y||(Y={})),function(d){var O=function(S){function h(l){return S.call(this,!0,l)||this}return Wt(h,S),h.prototype.Ia=function(){return new h(this.description)},h.prototype.Db=function(){return 2},h.prototype.getType=function(){return 1736},h.prototype.xG=function(l,s,a){this.JS(l,s,a)},h.prototype.qR=function(){this.FR()},h}(d.Vk);d.Da=O}(Y||(Y={})),function(d){(function(O){O[O.PiPOutside=0]="PiPOutside",O[O.PiPInside=1]="PiPInside",O[O.PiPBoundary=2]="PiPBoundary"})(d.RL||(d.RL={})),d.hd=function(){function O(){}return O.KG=function(S,h,l){return(S=d.Dg.bT(S,h,l))==0?0:S==1?1:2},O.Yd=function(S,h,l){return(S=d.Dg.wm(S,h,l))==0?0:S==1?1:2},O.WX=function(S,h,l,s,a){if(h.length<l||a.length<l)throw d.i.N();for(var c=0;c<l;c++)a[c]=O.Yd(S,h[c],s)},O.sK=function(S,h,l,s,a){if(S.getType()==1736)O.WX(S,h,l,s,a);else{if(S.getType()!=197)throw d.i.fa("invalid_call");var c=new d.l;S.A(c),O.$M(c,h,l,s,a)}},O.$M=function(S,h,l,s,a){if(h.length<l||a.length<l)throw d.i.N();if(S.B())for(s=0;s<l;s++)a[s]=0;else for(S.W(.5*-s,.5*-s),S.W(.5*s,.5*s),s=0;s<l;s++)S.contains(h[s])?a[s]=1:S.contains(h[s])?a[s]=2:a[s]=0},O.YX=function(S,h,l,s,a){for(var c=0;c<l;c++)a[c]=S.qs(h[c],s)?2:0},O.XX=function(S,h,l,s,a){var c=S.Bb,p=null;c!=null&&(p=c.Fk),c=l;for(var y=0;y<l;y++)if(a[y]=1,p!=null){var v=h[y];p.So(v.x,v.y)==0&&(a[y]=0,c--)}if(c!=0)for(S=S.Ga();S.$a()&&c!=0;)for(;S.Ha()&&c!=0;)for(p=S.ha(),y=0;y<l&&c!=0;y++)a[y]==1&&p.qs(h[y],s)&&(a[y]=2,c--);for(y=0;y<l;y++)a[y]==1&&(a[y]=0)},O.tK=function(S,h,l,s,a){var c=S.getType();if(c==1607)O.XX(S,h,l,s,a);else{if(!d.aa.yd(c))throw d.i.fa("Invalid call.");O.YX(S,h,l,s,a)}},O}()}(Y||(Y={})),function(d){var O=function(S){function h(l,s){if(arguments.length==2){var a=S.call(this,!1,l.description)||this;a.nf(l),a.lineTo(s)}else a=S.call(this,!1,l)||this;return a}return Wt(h,S),h.prototype.Ia=function(){return new h(this.description)},h.prototype.Db=function(){return 1},h.prototype.getType=function(){return 1607},h.prototype.xG=function(l,s,a){this.KS(l,s,a)},h}(d.Vk);d.Ta=O}(Y||(Y={})),function(d){var O=function(){function S(){}return S.prototype.progress=function(){return!0},S.zp=function(h){if(h!=null&&!h.progress(-1,-1))throw d.i.WC()},S}();d.mp=O}(Y||(Y={})),function(d){var O;(O=d.PK||(d.PK={}))[O.clipWithInputHorizon=1]="clipWithInputHorizon",O[O.clipWithOutputHorizon=2]="clipWithOutputHorizon";var S=function(){function s(){this.Kg=3,this.Vu=this.Jr=NaN}return s.prototype.PW=function(a){this.QB(1,a)},s.prototype.QW=function(a){this.QB(2,a)},s.prototype.hS=function(){return this.hs(1)},s.prototype.iS=function(){return this.hs(2)},s.prototype.QB=function(a,c){this.Kg=c?this.Kg|a:this.Kg&~a},s.prototype.hs=function(a){return!!(this.Kg&a)},s.prototype.Of=function(){var a=new s;return a.Jr=this.Jr,a.Vu=this.Vu,a.Kg=this.Kg,a},s}();d.yC=S,function(s){s[s.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",s[s.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(d.QK||(d.QK={}));var h=function(){function s(){this.Kg=0}return s.prototype.QB=function(a,c){this.Kg=c?this.Kg|a:this.Kg&~a},s.prototype.hs=function(a){return!!(this.Kg&a)},s.jg=function(a){var c=new s;return c.Kg=a.Kg,c},s.prototype.mM=function(a){this.Kg=a.Kg},s}();d.AY=h;var l=function(){function s(a,c,p){this.ef=a,this.Yf=c,this.Uf=new d.l,this.Uf.K(p),this.AT=a.cc()+c.cc()+this.Uf.cc().toString()}return s.prototype.cc=function(){return this.AT},s.prototype.Nb=function(a){return this==a||this.ef.Nb(a.ef)&&this.Yf.Nb(a.Yf)&&this.Uf.Nb(a.Uf)},s}();d.FY=l,l=function(){function s(){this.Yf=this.ef=null,this.rH=new S,this.sH=new h,this.ww=this.Wf=null,this.mw=this.Tn=!0}return s.Nr=function(a,c,p,y){var v;y===void 0&&(y=null),v===void 0&&(v=null);var _=new s;return _.qp(a,c,p,y,v),_},s.prototype.qp=function(a,c,p,y,v){if(a==null||c==null)throw d.i.fa("invalidArgument");if(this.ef=a,this.Yf=c,this.mw=this.Tn=!1,y!=null&&(this.rH=y.Of()),v!=null&&this.sH.mM(v),v=!1,c.Sb()==1&&y!=null&&(y=y.Jr,isNaN(y)||y==0||(v=!0)),a==c)this.Tn=!v,this.mw=!0;else{y=a.Sb();var _=c.Sb();if(y==0||_==0){if(p!=null)throw d.i.N();a.Hd()!=null&&c.Hd()!=null&&(this.Tn=a.Hd().Nb(c.Hd()))}else y==3||_==3?this.Tn=a.Nb(c):this.ef.kS(this.Yf)?this.Tn=!v:this.Tn=!1,this.Wf=p,this.Wf!=null&&this.Wf.ix(),this.mw=(this.Wf==null||this.Wf.count()==0)&&this.ef.sc().Nb(this.Yf.sc())}this.oY()},s.prototype.isIdentity=function(){return this.Tn},s.prototype.nR=function(){return this.rH.Of()},s.prototype.Nb=function(a){return a==this||!!(a instanceof s&&this.ef.Nb(a.ef)&&this.Yf.Nb(a.Yf))&&(this.Wf==a.Wf||!(this.Wf==null||a.Wf==null||!this.Wf.Nb(a.Wf)))},s.prototype.oY=function(){this.ww=new d.bu(this)},s}(),d.vr=l}(Y||(Y={})),function(d){var O=function(){function S(){}return S.Cp=function(h){return h*S.oW},S.mx=function(h,l){return S.gP(l-h)},S.hP=function(h){return-360<=h&&720>h?(0>h?h+=360:360<=h&&(h-=360),h):(0>(h=d.lc.RK(h))&&(h+=360),h)},S.gP=function(h){return 180<(h=S.hP(h))&&(h-=360),h},S.oW=57.29577951308232,S}();d.qr=O,d.Hh=function(){function S(){}return S.lj=function(h,l){var s=new d.l;h.A(s);var a=d.cb.gh(l),c=new d.l;return c.K(a),c.v=s.v,c.C=s.C,c.W(.01*c.ca(),0),l=d.ta.Wd(l,s,!1),c.contains(s)?h:d.Ud.clip(h,c,l,0)},S.ks=function(h,l,s,a,c){if(!d.cb.Wc(l))throw d.i.N();var p=d.ta.kj(l,h,!1),y=d.cb.gh(l),v=d.cb.sc(l),_=v.Hd().ai,x=d.cb.vv(v);v=d.cb.ev(v),x*=2-x;var T=new d.Nc;y.cn(T);var C=[[0,0],[0,0]];if(d.Eg.Sb(l)==2?a?(C[0][0]=S.Zm(c,T),C[0][1]=y.Jp(),d.cb.vt(),y=C[0][0]*_):(C[0][0]=y.gk(),C[0][1]=c,d.cb.vt(),y=C[0][1]*_):y=c*_,!a&&y!=0)throw d.i.N();var A=new d.ga,R=new d.gd;h=R.Ib(h);for(var F=[0],N=new d.h,B=new d.h,q=new d.h,U=new d.h,K=new d.h,X=new d.h,te=R.Ob(h);te!=-1;te=R.Rb(te)){var ae=R.Xa(te);R.D(ae,q);for(var ge=!1,Ee=ae=R.U(ae);Ee!=-1;Ee=R.U(Ee)){if(Ee==ae){if(ge)break;ge=!0}if(R.D(Ee,U),a&&p<c-q.x&&U.x-c>p||p<c-U.x&&q.x-c>p||!a&&p<-q.y&&U.y>p||p<-U.y&&q.y>p)do if(!(Math.abs(q.x-U.x)>=.5*T.R())){if(d.Eg.Sb(l)==2?(C[0][0]=S.Zm(q.x,T),C[0][1]=q.y,C[1][0]=S.Zm(U.x,T),C[1][1]=U.y,d.cb.dW(),K.x=C[0][0]*_,K.y=C[0][1]*_,X.x=C[1][0]*_,X.y=C[1][1]*_):(K.x=q.x*_,K.y=q.y*_,X.x=U.x*_,X.y=U.y*_),X.x=6.283185307179586*(U.x-q.x)/T.R()+K.x,a){if(B.x=y,B.y=S.Nz(v,x,K,X,y,s),isNaN(B.y))break}else{if(B.x=S.Lz(v,x,K,X,s),isNaN(B.x))break;B.y=0}d.kb.wd(v,x,K.x,K.y,X.x,X.y,A,null,null,s);var Ae=A.u;d.kb.wd(v,x,K.x,K.y,B.x,B.y,A,null,null,s);var Me=A.u;d.Eg.Sb(l)==2?(C[0][0]=B.x/_,C[0][1]=B.y/_,d.cb.bR(),a?(N.y=C[0][1],N.x=c):(N.x=S.os(C[0][0],q.x,U.x,T),N.y=c)):a?(N.x=c,N.y=B.y/_):(N.x=S.os(B.x/_,q.x,U.x,T),N.y=c),F[0]=0<Ae?d.O.Rk(Me/Ae,0,1):.5,F[0]!=0&&F[0]!=1&&(Ae=R.Ma(Ee),R.Ul(Ae,F,1),R.Cb(R.U(Ae),N.x,N.y))}while(!1);q.L(U)}}return R.Ne(h)},S.Fn=function(h,l,s,a,c){if(h.B())return h;var p=d.cb.bf(l);return S.Hp(h,s-180*p,360*p,l,a,c,!0)},S.Nz=function(h,l,s,a,c,p){if(3.141592653589793<=Math.abs(s.x-a.x)||!S.Sn(s.x,a.x,c))return NaN;if(s.x>a.x)var y=a;else y=s,s=a;a=new d.ga(0);var v=new d.ga(0),_=new d.ga(0);d.kb.wd(h,l,y.x,y.y,s.x,s.y,v,a,null,p);var x=v.u,T=0,C=1,A=new d.h;for(A.L(y);x*(C-T)>1e-12*h;){var R=.5*(T+C);if(d.kb.oj(h,l,y.x,y.y,x*R,a.u,v,_,p),A.x=v.u,A.y=_.u,A.x==c)break;if(S.Sn(y.x,A.x,c))C=R;else{if(!S.Sn(s.x,A.x,c))return NaN;T=R}}return A.y},S.Sn=function(h,l,s){return h=O.Cp(h),l=O.mx(h,O.Cp(l)),(s=O.mx(h,O.Cp(s)))==0||0<l&&0<s&&s<=l||0>l&&0>s&&s>=l},S.Zm=function(h,l){var s=l.va-l.oa;return l.It(h-Math.floor((h-l.oa)/s)*s)},S.os=function(h,l,s,a){var c=new d.Nc;for(c.K(l,s),s=a.R(),h=Math.floor((h-l)/s)*s+h,c=c.sf();Math.abs(h-c)>Math.abs(h+s-c);)h+=s;return h},S.Lz=function(h,l,s,a,c){if(s.y>a.y)var p=a;else p=s,s=a;if((a=new d.Nc).K(p.y,s.y),!a.contains(0)||3.141592653589793<=Math.abs(p.x-s.x))return NaN;if(p.x==s.x)return p.x;var y=new d.ga(0),v=new d.ga(0),_=new d.ga(0);d.kb.wd(h,l,p.x,p.y,s.x,s.y,v,y,null,c);var x=v.u,T=0,C=1,A=new d.h;for(A.L(p);x*(C-T)>1e-12*h;){var R=.5*(T+C);if(d.kb.oj(h,l,p.x,p.y,x*R,y.u,v,_,c),A.x=v.u,A.y=_.u,a.K(p.y,A.y),A.y==0)break;if(a.contains(0))C=R;else{if(a.K(s.y,A.y),!a.contains(0))return NaN;T=R}}return A.x},S.Hp=function(h,l,s,a,c,p,y){var v=new d.l;if(h.A(v),v.B())return h;var _=new d.Nc;v.cn(_);var x=new d.Nc;if(x.K(l,l+s),x.contains(_)&&x.va!=_.va)return h;var T=new d.l;T.K(v);var C=h.getType();if(C==33)return((v=(T=c?h:h.Of()).Lg())<x.oa||v>=x.va||y&&v==x.va)&&(v+=Math.ceil((x.oa-v)/s)*s,v=x.It(v),T.cC(v)),T;if(C==550){for(a=(T=c?h:h.Of()).ub(0),C=2*T.I(),h=!1,c=0;c<C;c+=2)((v=a.read(c))<x.oa||v>=x.va||y&&v==x.va)&&(h=!0,v+=Math.ceil((x.oa-v)/s)*s,v=x.It(v),a.write(c,v));return h&&T.Pc(1993),T}if(x.contains(_))return h;if(C==197)return s=c?h:h.Of(),v.Ea(T),s.Xo(v),s;var A=.1*Math.max(v.ca(),v.R());for(T.W(0,A),y=h,x=a.Xd(0),h=d.Gh.local(),c=new d.Dd;;){var R=Math.floor((_.oa-l)/s),F=Math.ceil((_.va-l)/s);if(!(3<F-R))break;R=Math.floor(.5*(F+R)),T.v=v.v-A,T.C=l+s*R;var N=d.Ud.clip(y,T,x,p);T.v=T.C,T.C=v.C+A;var B=d.Ud.clip(y,T,x,p);c.gg((R-F)*s,0),B.Oc(c),C==1736?y=h.V(N,B,a,null):(y=N).add(B,!1),y.A(v),v.cn(_)}for(T.v=l,T.C=l+s,(l=new d.l).K(T),l.W(x,0),(l=Math.floor((v.v-T.v)/s)*s)!=0?(T.move(l,0),c.gg(-l,0)):c.RB(),l=C==1607?new d.Ta(y.description):new d.Da(y.description),p=new d.l,_=new d.l;v.C>T.v;)(A=d.Ud.clip(y,T,x,0)).A(_),(C==1607?!A.B()&&(_.R()>x||_.ca()>x):!A.B()&&(C!=1736||_.R()>x))&&(A.Oc(c),A.A(_),l.A(p),p.W(x,x),p.isIntersecting(_)&&C==1736?l=h.V(l,A,a,null):l.add(A,!1)),T.move(s,0),c.shift(-s,0);return l},S.WI=function(h,l,s,a){var c=new d.de(s.description);c.Fd(s,0,-1),c=d.cb.zh(c,h,l);var p=s.I();if(a.Oa(),!d.cb.Wc(h)||p!=c.I())return!1;var y=new d.l;s.A(y);var v=new d.l;if(c.A(v),y=y.R(),v=v.R(),y!=0&&v!=0){if(v/=y,h=d.cb.gh(l).R()/d.cb.gh(h).R(),1e-10<Math.abs(v/h-1))return!1}else if(y!=0||v!=0)return!1;for(a.add(s,!1),s=0;s<p;s++)h=c.Na(s),a.Cb(s,h);return!0},S.Oz=function(){throw d.i.Ie()},S}()}(Y||(Y={})),function(d){var O,S,h;(S=O=d.si||(d.si={}))[S.Clip=0]="Clip",S[S.DontClip=1]="DontClip",S[S.PannableFold=2]="PannableFold",function(l){l[l.Geodesic=0]="Geodesic",l[l.Loxodrome=1]="Loxodrome",l[l.GreatElliptic=2]="GreatElliptic",l[l.NormalSection=3]="NormalSection",l[l.ShapePreserving=4]="ShapePreserving"}(h=d.WK||(d.WK={})),d.zb=function(){function l(){}return l.xv=function(s,a,c){if(c||0<a){for(s=s.toString(d.Sc.PE_STR_NAME_CANON|d.Sc.PE_STR_AUTH_NONE),a=[],c=0;c<s.length;c++)a[c]="a"<=s[c]&&"z">=s[c]?a[c]=s[c].toUpperCase():s[c];return a.join()}return s.toString(d.Sc.PE_STR_AUTH_TOP)},l.ur=function(s,a,c,p){var y=p.length,v=c.I();if(v!=0){var _=c.ub(0),x=Math.min(v,y),T=0,C=s.eh();isNaN(a)&&(a=0);for(var A=s.Wc(),R=179*(s=A?s.sc().Oe().R():0)/360;0<v;){if(_.uB(T<<1,x,p),d.ej.projToGeogCenter(C,x,p,a),A)for(var F=0;F<x;F++){var N=p[F][0]-a,B=d.lc.sign(N),q=_.read(2*(T+F));0>B*d.lc.sign(q)&&Math.abs(N)>R&&(p[F][0]+=-B*s)}_.uC(T<<1,x,p),T+=x,v-=x,x=Math.min(v,y)}c.Pc(1993)}},l.IL=function(s,a,c,p){var y=0,v=s.eh();isNaN(y)&&(y=0);var _=s.Wc(),x=s.bf();s=360*x,x*=179;for(var T=p.length,C=0;C<c;){for(var A=C;A<c&&a[A].isNaN();++A)C++;var R=Math.min(T,c-C);if(0<R){A=1;for(var F=C+1;A<R;++A,++F)if(a[F].isNaN()){R=A;break}if(d.ta.Jy(p,a,C,R),d.ej.projToGeogCenter(v,R,p,y),_)for(A=0,F=C;A<R;++A,++F){var N=a[F].x,B=p[A][0]-y,q=d.lc.sign(B);0>q*d.lc.sign(N)&&Math.abs(B)>x&&(p[A][0]-=q*s)}d.ta.Iy(a,C,p,R),C+=R}}},l.Lx=function(s,a,c){var p=c.length,y=a.I();if(!(1>y)){var v=a.ub(0),_=Math.min(y,p),x=0,T=s.eh(),C=s.Wc(),A=C?s.Oe().R():0,R=179*A/360,F=0;for(C&&(F=s.zi());0<y;){if(v.uB(x<<1,_,c),d.ej.geogToProj(T,_,c),C)for(s=0;s<_;s++){var N=c[s][0],B=d.lc.sign(N),q=v.read(2*(x+s))-F;0>B*d.lc.sign(q)&&Math.abs(N)>R&&(c[s][0]+=-B*A)}v.uC(x<<1,_,c),x+=_,y-=_,_=Math.min(y,p)}a.Pc(1993)}},l.HL=function(s,a,c,p){if(c!=0){var y=s.eh(),v=s.Wc(),_=v?s.Oe().R():0,x=179*_/360,T=0;for(v&&(T=s.zi()),s=0;s<c;){for(var C=s;C<c&&a[C].isNaN();++C)s++;var A=Math.min(p.length,c-s);if(0<A){C=1;for(var R=s+1;C<A;++C,++R)if(a[R].isNaN()){A=C;break}if(d.ta.Jy(p,a,s,A),d.ej.geogToProj(y,A,p),v)for(C=0,R=s;C<A;C++){var F=p[C][0],N=d.lc.sign(F);0>N*d.lc.sign(a[R].x-T)&&Math.abs(F)>x&&(p[C][0]-=N*_)}d.ta.Iy(a,s,p,A),s+=A}}}},l.tr=function(s,a,c,p){var y=a.I();if(y!=0){var v=a.ub(0),_=s.ef,x=s.Yf,T=_.sc().Qp(),C=x.sc().Qp(),A=_.bf(),R=x.bf();if((s=s.Wf)==null||s.count()==0){for(c=T/C,p=(_.Up()-x.Up())*R,C=-90*A,s=90*A,T=!1,R=1,_=2*y;R<_;)A=v.get(R),(x=d.O.Rk(A,C,s))!=A&&(v.set(R,x),T=!0),R+=2;if(p!=0||c!=1)for(T=!0,C=new d.h,R=0;R<y;R++)v.tc(2*R,C),C.x*=c,C.x+=p,C.y*=c,v.Tt(2*R,C);T&&a.Pc(1993)}else{_=p.length,x=Math.min(y,_);var F=d.O.lg(x),N=null,B=0,q=NaN,U=NaN,K=360*R,X=R/A;c&&(U=90*R,q=89.9*A,N=d.O.lg(x));for(var te=!0,ae=0;y!=0;){for(A=!1,v.uB(B<<1,x,p),R=0;R<x;R++)F[R]=p[R][0];if(c)for(R=0;R<x;R++){var ge=Math.abs(p[R][1])-q;0<ge&&(A=p[R][1],p[R][1]=d.lc.Cn(q,A),N[R]=d.lc.Cn(ge,A),A=!0)}for(R=p[0][0],s.transform(p,x,T,C),te&&(ae=p[0][0]-X*R,te=!1),R=0;R<x;R++)ge=p[R][0]-F[R]*X-ae,200<Math.abs(ge)&&(p[R][0]=0<ge?p[R][0]-K:p[R][0]+K);if(A){for(R=0;R<x;R++)N[R]!=0&&(p[R][1]+=X*N[R],p[R][1]>U?p[R][1]=U:p[R][1]<-U&&(p[R][1]=-U));for(A=0;A<x;A++)N[A]=0}v.uC(B<<1,x,p),B+=x,y-=x,x=Math.min(y,_)}a.Pc(1993)}}},l.GL=function(s,a,c,p){if(s.mw)p=90*s.ef.bf(),d.ta.dK(a,c,-p,p);else{var y=s.Wf,v=s.ef,_=s.Yf;s=v.Xr();var x=_.Xr(),T=v.bf(),C=90*T,A=_.bf();if(y==null||y.count()==0){if(p=s/x,y=(v.Up()-_.Up())*A,d.ta.dK(a,c,-C,C),y!=0||p!=1)for(A=0;A<c;A++)a[A].x*=p,a[A].x+=y,a[A].y*=p}else{v=Math.min(c,p.length),C=d.O.lg(v),_=360*A,T=A/T;for(var R=!0,F=0,N=0;c!=0;){for(A=0;A<v;A++)C[A]=a[A+N].x;for(A=a[0].x,d.ta.Jy(p,a,N,v),y.transform(p,v,s,x),d.ta.Iy(a,N,p,v),R&&(F=a[0].x-T*A,R=!1),A=0;A<v;A++){var B=a[N+A].x-C[A]*T-F;200<Math.abs(B)&&(a[N+A].x=0<B?a[N+A].x-_:a[N+A].x+_)}N+=v,c-=v,v=Math.min(c,p.length)}}}},l.dv=function(s,a){return s=s.gh(),isNaN(a)||s.Ju(a,0),s},l.UQ=function(s,a,c,p,y,v,_,x){for(var T=l.dv(p,y),C=T.R(),A=C/360,R=l.pE*A,F=s.ub(0),N=a.Wc(),B=N?C/a.Oe().R():0,q=!1,U=new d.Da(c.description),K=0,X=c.da();K<X;++K){var te=N,ae=new d.Ta(c.description);if(ae.addPath(c,K,!0),_!=0){var ge=l.PD(!0,ae,T.H-x,T.H,_);(q=q||ge)&&(te=!1)}var Ee=-1;te&&(Ee=s.Ba(K));var Ae=ae.ub(0),Me=ae.I(),He=0,Ie=Ae.read(0),dt=0;ge=3*p.Xd(0);var ut=!1,Nt=new d.h;Nt.Rc();var yi=new d.h;yi.Rc();for(var fr=!1,_i=1;_i<Me;++_i){var Ft=d.h.construct(Ae.eg(2*_i),Ae.eg(2*_i+1)),pt=Ft.x,$t=pt+He,Di=$t-Ie;if(Ft.x=$t,Math.abs(Di)>R){if(te){var $i=Ee+(_i+1<Me?_i:0),Bo=F.read(2*(Ee+_i-1));$i=(F.read(2*$i)-Bo)*B,Math.abs(Di-$i)>1*A&&(te=!1)}te||($t=pt+(He-=d.lc.Cn(C,$t-Ie)),++dt,fr=He!=0,Ft.x=$t)}else ut||d.ta.AG(yi,Nt,Ft,ge)&&(ut=!0);fr&&Ae.write(2*_i,$t),Ie=$t,yi.L(Nt),Nt.L(Ft)}0<dt&&ae.Pc(1993),te=ae.Na(0),Me=ae.Na(Me-1),ae=d.h.tb(te,Me)<ge?l.uQ(ae,p,y,v,ut):l.vQ(s,K,ae,p,y),U.add(ae,!1)}return y=p.Xd(0),c=T.R()/180,l.Jt(U,T,.1*y,!1),U=U!=(y=d.ri.clip(U,T,y,c,v)),s=s.Ke(),_=0,0<(x=y.Ke())&&0>s?_=1:0>=x&&0<s&&(x==0?(x=NaN,a.Sb()==2?x=a.ml().Ke():a.Sb()==1&&(x=a.Oe().wF()),s>.99*x&&(_=-1)):_=-1),_!=0&&((a=new d.Da(y.description)).tp(T),(a=d.Xl.local().V(a,c,v)).add(y,!1),U=!0,y=a),U&&(y=d.Yl.local().V(y,p,!1,v)),y},l.vQ=function(s,a,c,p,y){var v=c.I(),_=c.Na(0),x=c.Na(v-1);y=(p=l.dv(p,y)).R(),_=d.lc.sign(x.x-_.x);var T=new d.l;c.xc(T);var C=p.gk();if(x=C-y,C+=y,0<=_){var A=Math.ceil((x-T.v)/y);for(A*=y;x>T.v+A;)A+=y;for(;x<T.C+A;)A-=y;var R=A;720<T.R()&&(C=x+360*Math.ceil(T.R()/360))}else{for(A=Math.ceil((C-T.C)/y),A*=y;C<T.C+A;)A-=y;for(;C>T.v+A;)A+=y;R=A,720<T.R()&&(x=C-360*Math.ceil(T.R()/360))}A=_*y;var F=d.l.construct(T.v,T.G,T.C,T.H);F.move(R,0);var N=new d.Dd;N.gg(R,0),c.Oc(N),(T=new d.Ta(c.description)).add(c,!1),R=c.Na(v-1),y=0;for(var B=T.Na(0).x,q=0;0<_?F.C<C:F.v>x;)1024<=q&&(q=0),F.move(A,0),N.Gb=A,c.Oc(N),B+=A,p.v<=B&&p.C>=B&&(y=T.I()-1),c.Cb(0,R),R=c.Na(v-1),T.Dr(c,0,0,v-1,!1);return c=new d.Da(T.description),v=0<s.Ir(a),c.add(T,!1),s=T.Na(0),x=T.Na(T.I()-1),a=c.da()-1,(0>_?v:!v)?(_=d.h.construct(x.x,p.H),c.Ci(_),_=d.h.construct(p.gk(),p.H),c.Ci(_),p=d.h.construct(s.x,p.H)):(_=d.h.construct(x.x,p.G),c.Ci(_),_=d.h.construct(p.gk(),p.G),c.Ci(_),p=d.h.construct(s.x,p.G)),c.Ci(p),c.xG(0,a,0),c.kO(y),c},l.uQ=function(s,a,c,p,y){var v=new d.Da(s.description);v.add(s,!1),v.DB(0,v.I()-1);var _=new d.l;v.xc(_);var x=(c=l.dv(a,c)).R(),T=Math.ceil((c.v-_.v)/x);for(T*=x;c.v>_.v+T;)T+=x;for(;c.v<_.C+T;)T-=x;if((T+=x)!=0){_.move(T,0);var C=new d.Dd;C.gg(T,0),v.Oc(C)}if(c.v<=_.v&&c.C>_.C)return y&&(y=v.Ke(),a=(v=d.Yl.local().V(v,a,!0,p)).Ke(),(a=d.lc.sign(y)!=d.lc.sign(a))&&v.oJ()),v;for((s=new d.Da(s.description)).add(v,!1),y=y||_.R()>x-a.Xd(0);_.v<c.C;)_.move(x,0),(C=new d.Dd).gg(x,0),v.Oc(C),s.add(v,!1);return y&&(y=s.Ke(),s.Yo(1),a=(s=d.Yl.local().V(s,a,!0,p)).Ke(),(a=d.lc.sign(y)!=d.lc.sign(a))&&s.oJ()),s},l.PD=function(s,a,c,p,y){for(var v=a.ub(0),_=a.I(),x=!1,T=0;T<_;T++){var C=d.h.construct(v.eg(2*T),v.eg(2*T+1));if(1&y&&C.y>=c){x=!0;break}if(2&y&&C.y<=-c){x=!0;break}}if(!x)return!1;v=!1,s&&(v=a.Nn(0)),_=(s=new d.gd).Ib(a),x=s.Ob(_);var A=-1,R=!0,F=new d.h;F.Rc(),T=new d.Sa;for(var N=-1,B=s.Xa(x);B!=-1;B=s.U(B)){C=s.Na(B);var q=1&y&&90<=C.y?1:0;if(q|=2&y&&C.y<=-c?2:0,0<A&&A!=q){if(F.x!=C.x){F.x=C.x,s.Vi(s.Ma(B),T);var U=s.wj(x,B,T);s.mf(U,F)}if(v)for(N=N!=-1?s.U(N):s.Xa(x),U=s.Ma(B);N!=U;)N=s.pd(N,!1);N=-1}0<q&&(C.y=d.lc.Cn(p,C.y),s.mf(B,C),R||A==q||(C.x!=F.x?(s.Vi(B,T),U=s.wj(x,B,T),s.Cb(U,F.x,C.y),N=U):N=B)),A=q,F=C,R=!1}if(v){if(N!=-1)for(N=s.U(N);N!=-1;)N=s.pd(N,!1);c=s.Xa(x),s.fq(c,s.rj(x))||(s.Vi(c,T),s.wj(x,-1,T))}return s.Ne(_).copyTo(a),!0},l.Mz=function(s,a,c,p){var y=s;if(y.B()||c==O.DontClip)return y;var v=y.getType();if(v==33)return y=[(p=y).D()],l.yG(y,1,a,c),y[0].isNaN()?p.Oa():p.Cb(y[0]),s;var _=(s=a.sc()).bf(),x=90*_,T=180*_,C=360*_,A=a.zi(),R=.5*_,F=new d.l;y.A(F);var N=a.Vr(),B=a.PQ(),q=N.getType()==197;if(a=new d.l,N.A(a),c==O.PannableFold&&(c=s.Oe().R(),a.v=A-.5*c,a.C=a.v+c),F.G<-x||F.H>x){if(new d.l().K(F.v-_,-x,F.C+_,x),(y=d.ri.Nu(y,a,s,NaN,0,p)).B())return y;y.A(F)}if(B&&(a.H<F.G||a.G>F.H))return y.Ia();if(F.R()>C&&(y=l.Hp(y,A-T,C,s,!0,0,!0,p)).A(F),(x=l.eO(F.v,F.C,a.v,a.C,C))!=0&&F.move(x,0),F.C>a.C||F.v<a.v){if(F.C>a.C)for(;F.v>=a.C;)F.move(-C,0),x-=C;for(;F.v<a.C-C;)F.move(C,0),x+=C}if(c=d.ta.Hu(s,N),x!=0&&((_=new d.Dd).gg(x,0),y.Oc(_)),B){if(q&&a.contains(F))return y;for(B=[null,null],x=0;2>x;x++){if(q?_=d.aa.Hc(v)?d.ri.clip(y,a,c,R,p):d.ri.clip(y,a,c,0,p):(_=d.Xj.local().V(y,N,s,p))==N&&(_=d.aa.jg(_)),a.v<=F.v&&a.C>=F.C||a.v>=F.v&&a.C<=F.C)return _;B[x]=_,x==0&&(F.move(-C,0),(_=new d.Dd).gg(-C,0),y.Oc(_))}if(v==550)B[0].Fd(B[1],0,-1);else if(d.aa.Hc(v))B[0].add(B[1],!1);else{if(v!=33)throw d.i.fa("intersect_with_GCS_horizon: unexpected geometry type");B[0].B()&&(B[0]=B[1])}return B[0]}if(a.H<F.G||a.G>F.H)return y;for(v=0;!y.B()&&F.C>a.v;)v!=0&&((_=new d.Dd).gg(v,0),y.Oc(_)),d.dj.local().V(4,y,N,s,p)||N==(y=d.kp.local().V(y,N,s,p))&&(y=d.aa.jg(y)),v!=0&&((R=new d.Dd).gg(-v,0),y.Oc(R)),v-=C,F.move(-C,0);return y},l.yG=function(s,a,c,p){if(a!=0&&p!=O.DontClip)if(p==O.PannableFold){p=c.HR();for(var y=a,v=0;v<a;v++)(s[v].y>p.H||s[v].y<p.G)&&(s[v].Rc(),y--);y!=0&&l.av(s,a,p.v,p.R())}else{var _=90*(p=c.bf()),x=180*p;for(p*=360,y=a,v=0;v<a;v++)(s[v].y>_||s[v].y<-_)&&(s[v].Rc(),y--);if(y!=0){(y=new d.l).Zw(s,a),_=c.Vr();var T=c.hv();v=_.getType()==197;var C=new d.l;if(_.A(C),!T||!(C.H<y.G||C.G>y.H))if(T)if(l.av(s,a,C.gk()-x,p),y=a,v)for(v=0;v<a;v++)C.contains(s[v])||(s[v].Rc(),y--);else for(c=d.ta.Hu(c.sc(),_),v=0;v<a;v++)(x=d.hd.Yd(_,s[v],c)!=0)||(s[v].Rc(),y--);else for(l.av(s,a,-x,p),y=a,c=d.ta.Hu(c.sc(),_),v=0;v<a;v++)(x=s[v]).isNaN()&&y--,T=l.tE(x.x,C.v,C.C,p),x.x+=T,(x=d.hd.Yd(_,x,c)!=0)&&(s[v].Rc(),y--)}}},l.Hp=function(s,a,c,p,y,v,_,x){var T=s.getType(),C=a+c;if(T===33){var A=(p=y?s:s.Of()).Lg();return(A<a||A>=C||_&&A==C)&&(A+=Math.ceil((a-A)/c)*c,A=d.O.Rk(A,a,C),p.cC(A)),p}if(s.B()||(A=new d.l,s.A(A),A.B()))return s;var R=new d.Nc;A.cn(R);var F=new d.Nc;if(F.K(a,C),F.contains(R))return s;if((C=new d.l).K(A),T===550){for(x=(p=y?s:s.Of()).ub(0),T=2*p.I(),C=!1,a=0;a<T;a+=2)((A=x.read(a))<F.oa||A>=F.va||_&&A==F.va)&&(C=!0,A+=Math.ceil((F.oa-A)/c)*c,A=F.It(A),x.write(a,A));return C&&p.Pc(1993),p}if(T==197)return c=y?s:s.Of(),A.Ea(C),c.Xo(A),c;var N=.1*Math.max(A.ca(),A.R());for(C.W(0,N),_=s,F=p.Xd(0),s=d.Gh.local(),y=new d.Dd;;){var B=Math.floor((R.oa-a)/c),q=Math.ceil((R.va-a)/c);if(!(3<q-B))break;B=Math.floor(.5*(q+B)),C.v=A.v-N,C.C=a+c*B;var U=d.ri.clip(_,C,F,v,x);C.v=C.C,C.C=A.C+N;var K=d.ri.clip(_,C,F,v,x);y.gg((B-q)*c,0),K.Oc(y),T==1736?_=s.V(U,K,p,null):(_=U).add(K,!1),_.A(A),A.cn(R)}for(C.v=a,C.C=a+c,(a=new d.l).K(C),a.W(F,0),(a=Math.floor((A.v-C.v)/c)*c)!=0?(C.move(a,0),y.gg(-a,0)):y.RB(),a=T==1607?new d.Ta(_.description):new d.Da(_.description),v=new d.l,R=new d.l;A.C>C.v;)(N=d.ri.clip(_,C,F,0,x)).A(R),(T==1607?!N.B()&&(R.R()>F||R.ca()>F):!N.B()&&(T!=1736||R.R()>F))&&(N.Oc(y),N.A(R),a.A(v),v.W(F,F),v.isIntersecting(R)&&T==1736?a=s.V(a,N,p,null):a.add(N,!1)),C.move(c,0),y.shift(-c,0);return a},l.av=function(s,a,c,p){for(var y=c+p,v=0;v<a;v++){var _=s[v].x;c<=_&&_<y||!(_<c||_>y||_==y)||(_+=Math.ceil((c-_)/p)*p,_=d.O.Rk(_,c,y),s[v].x=_)}},l.Fn=function(s,a,c,p,y,v){if(!a.Wc())throw d.i.fa("fold_into_360_degree_range");if(s.B())return s;if(a.Sb()==2){c=a.pv();var _=a.ov()-c}else{var x=a.bf();_=360*x,c-=180*x}return l.Hp(s,c,_,a,p,y,!0,v)},l.qF=function(s,a,c,p){if(c.Sb()==2)p=c.pv(),c=c.ov()-p;else{var y=c.bf();c=360*y,p-=180*y}l.av(s,a,p,c)},l.lj=function(s,a){var c=a.Oe();if(s.getType()==33){var p=s.ih();return c.G<=p&&p<=c.H?s:s.Ia()}p=new d.l,s.A(p);var y=new d.l;return y.K(c),y.v=p.v,y.C=p.C,y.W(.01*y.ca(),0),c=d.ta.uy(a,p),y.contains(p)?s:d.ri.clip(s,y,c,0,null)},l.ir=function(s,a,c){return s>a.C&&s-a.C<c?a.C:s<a.v&&a.v-s<c?a.v:s},l.FX=function(s,a,c,p){p.x=l.ir(s.x,a,c),p.y=s.y},l.EX=function(s,a,c,p){for(var y=0;y<a;y++)s[y].y<c.G||s[y].y>c.H?s[y].Rc():s[y].x=l.ir(s[y].x,c,p)},l.Jt=function(s,a,c,p){if(!s.B()){var y=s.getType();if(!p||y!=1736)if(d.aa.xj(y)){p=s.ub(0),y=0;for(var v=s.I();y<v;y++){var _=p.read(2*y),x=l.ir(_,a,c);x!=_&&p.write(2*y,x)}s.Pc(1993)}else if(y==197)p=new d.l,s.A(p),p.v=l.ir(p.v,a,c),p.C=l.ir(p.C,a,c),s.Xo(p);else{if(y!=33)throw d.i.fa("internal error");s.cC(l.ir(s.Lg(),a,c))}}},l.uS=function(s,a,c,p){var y=new d.gd,v=y.Ib(s);return s=d.ta.Hu(a,s),l.ks(y,v,a,s,c,!0,p),y.Ne(v)},l.ks=function(s,a,c,p,y,v,_){if(!c.Wc())throw d.i.N("invalid call");var x=c.Oe(),T=c.sc(),C=T.eh().getDatum().getSpheroid();T=T.Hd().ai;var A=C.getFlattening();C=C.getAxis(),A*=2-A;var R=new d.Nc;x.cn(R);var F=null,N=[[0,0],[0,0]];if(c.Sb()==2?(F=c.eh(),v?(N[0][0]=l.Zm(_,R),N[0][1]=x.Jp(),d.ej.projToGeog(F,1,N),x=N[0][0]*T):(N[0][0]=x.gk(),N[0][1]=_,d.ej.projToGeog(F,1,N),x=N[0][1]*T)):x=_*T,!v&&x!=0&&y!=h.GreatElliptic)throw d.i.fa("invalid argument");var B=new d.ga,q=[0],U=new d.h,K=new d.h,X=new d.h,te=[null,null],ae=new d.h,ge=new d.h,Ee=new d.h,Ae=new d.h;for(a=s.Ob(a);a!=-1;a=s.Rb(a)){var Me=s.Xa(a);s.D(Me,ae);for(var He=!1,Ie=Me=s.U(Me);Ie!=-1;Ie=s.U(Ie)){if(Ie==Me){if(He)break;He=!0}if(s.D(Ie,ge),v&&(p<_-ae.x&&ge.x-_>p||p<_-ge.x&&ae.x-_>p)||!v&&(_!=0||p<-ae.y&&ge.y>p||p<-ge.y&&ae.y>p))do if(!(Math.abs(ae.x-ge.x)>=.5*R.R())){if(c.Sb()==2?(N[0][0]=l.Zm(ae.x,R),N[0][1]=ae.y,N[1][0]=l.Zm(ge.x,R),N[1][1]=ge.y,d.ej.projToGeogCenter(F,2,N,0),Ee.x=N[0][0]*T,Ee.y=N[0][1]*T,Ae.y=N[1][1]*T):(Ee.x=ae.x*T,Ee.y=ae.y*T,Ae.y=ge.y*T),Ae.x=2*(ge.x-ae.x)*Math.PI/R.R()+Ee.x,v){if(K.x=x,K.y=l.Nz(C,A,Ee,Ae,x,y),isNaN(K.y))break;te[0]=K;var dt=1}else if(y==h.GreatElliptic){var ut=[0,0];if((dt=d.Ox.Oz(A,Ee,Ae,x,ut))==0)break;K.x=ut[0],K.y=x,te[0]=K,dt==2&&(X.x=ut[1],X.y=x,te[1]=X)}else{if(K.x=l.Lz(C,A,Ee,Ae,y),isNaN(K.x))break;K.y=0,te[0]=K,dt=1}var Nt=-1;for(ut=0;ut<dt;ut++){d.kb.wd(C,A,Ee.x,Ee.y,Ae.x,Ae.y,B,null,null,y);var yi=B.u;d.kb.wd(C,A,Ee.x,Ee.y,te[ut].x,te[ut].y,B,null,null,y);var fr=B.u;if(c.Sb()==2?(N[0][0]=te[ut].x/T,N[0][1]=te[ut].y/T,d.ej.geogToProj(F,1,N),v?(U.y=N[0][1],U.x=_):(U.x=l.os(N[0][0],ae.x,ge.x,R),U.y=_)):v?(U.x=_,U.y=te[ut].y/T):(U.x=l.os(te[ut].x/T,ae.x,ge.x,R),U.y=_),q[0]=0<yi?d.O.Rk(fr/yi,0,1):.5,q[0]==0||q[0]==1)break;Nt>q[0]||(Nt=s.Ma(Ie),s.Ul(Nt,q,1),s.Cb(s.U(Nt),U.x,U.y),Nt=q[0])}}while(!1);ae.L(ge)}}},l.Zm=function(s,a){var c=a.va-a.oa;return a.It(s-Math.floor((s-a.oa)/c)*c)},l.os=function(s,a,c,p){var y=new d.Nc;for(y.K(a,c),c=p.R(),s=Math.floor((s-a)/c)*c+s,y=y.sf();Math.abs(s-y)>Math.abs(s+c-y);)s+=c;return s},l.Sn=function(s,a,c){return s=d.qr.Cp(s),a=d.qr.mx(s,d.qr.Cp(a)),(c=d.qr.mx(s,d.qr.Cp(c)))==0||0<a&&0<c&&c<=a||0>a&&0>c&&c>=a},l.Nz=function(s,a,c,p,y,v){if(v==h.GreatElliptic)return d.Ox.SS(a,c,p,y);if(Math.abs(c.x-p.x)>=Math.PI||!l.Sn(c.x,p.x,y))return NaN;if(c.x>p.x)var _=p;else _=c,c=p;p=new d.ga;var x=new d.ga,T=new d.ga;d.kb.wd(s,a,_.x,_.y,c.x,c.y,x,p,null,v);var C=x.u,A=0,R=1,F=new d.h;for(F.L(_);C*(R-A)>1e-12*s;){var N=.5*(A+R);if(d.kb.oj(s,a,_.x,_.y,C*N,p.u,x,T,v),F.x=x.u,F.y=T.u,F.x==y)break;if(l.Sn(_.x,F.x,y))R=N;else{if(!l.Sn(c.x,F.x,y))return NaN;A=N}}return F.y},l.Lz=function(s,a,c,p,y){if(y==h.GreatElliptic)return s=[0,0],d.Ox.Oz(a,c,p,0,s),s[0];if(c.y>p.y)var v=p;else v=c,c=p;if((p=new d.Nc).K(v.y,c.y),!p.contains(0)||Math.abs(v.x-c.x)>=Math.PI)return NaN;if(v.x==c.x)return v.x;var _=new d.ga,x=new d.ga,T=new d.ga;d.kb.wd(s,a,v.x,v.y,c.x,c.y,x,_,null,y);var C=x.u,A=0,R=1,F=new d.h;for(F.L(v);C*(R-A)>1e-12*s;){var N=.5*(A+R);if(d.kb.oj(s,a,v.x,v.y,C*N,_.u,x,T,y),F.x=x.u,F.y=T.u,p.K(v.y,F.y),F.y==0)break;if(p.contains(0))R=N;else{if(p.K(c.y,F.y),!p.contains(0))return NaN;A=N}}return F.x},l.WI=function(s,a,c,p){if(!s.ef.Wc())return!1;var y=new d.de(a.description);if(y.Fd(a,0,-1),p=d.Hx.local().V(y,s,p),y=a.I(),c.Oa(),y!=p.I())return!1;var v=new d.l;a.A(v);var _=new d.l;if(p.A(_),v=v.R(),_=_.R(),v!=0&&_!=0){if(_/=v,s=s.Yf.gh().R()/s.ef.gh().R(),1e-10<Math.abs(_/s-1))return!1}else if(v!=0||_!=0)return!1;for(c.add(a,!1),a=new d.h,s=0;s<y;s++)p.D(s,a),c.Cb(s,a);return!0},l.qN=function(s,a){return(s%=360*a)>=180*a&&(s-=360*a),s},l.UI=function(s,a,c,p){if(c==O.Clip){var y=a.ml();y.getType()==197?(c=new d.l,y.A(c),y=d.ta.uy(a,c),s=d.ri.clip(s,c,y,5e4*a.pm(),p)):d.dj.local().V(1,y,s,a,p)||(s=d.Xj.local().V(s,y,a,p))==y&&(s=d.Vk.jg(s))}else a.Wc()&&(p=new d.l,s.xc(p),a.Oe().contains(p)||(l.Jt(s,a.Oe(),a.Xd(0),!0),c==O.PannableFold&&(s=l.lj(s,a)),s=l.Fn(s,a,0,!0,1e5*a.pm(),null)));return s},l.XD=function(s,a,c){var p=a.Wr();if(p==null)return s;var y=(a=a.sc()).Oe().R(),v=new d.l;s.xc(v);var _=new d.Nc;v.cn(_),v=p.Ga(),p=null;for(var x=new d.Dd;v.$a();)for(;v.Ha();){var T=v.ha(),C=T.Tg(0,0),A=new d.Nc;for(A.K(C.oa,C.va),C=0;A.va>_.oa;)A.move(-y),--C;for(;A.oa<=_.va;){if(A.isIntersecting(_)){p==null&&(p=new d.Ta);var R=d.yb.cP(T.ac(),T.wc());C!=0&&(x.gg(C*y,0),R.Oc(x)),p.oc(R,!0)}A.move(y),++C}}return p!=null?(a=d.ta.gO(a,p),a=d.ta.Er(a),d.$t.lP(s,p,a,c)):s},l.eO=function(s,a,c,p,y){return s>=c&&a<=p?0:l.tE(.5*(a+s),c,p,y)},l.tE=function(s,a,c,p){return d.lc.round((.5*(c+a)-s)/p)*p},l.VQ=function(s,a,c,p,y,v,_,x){var T=l.dv(p,y),C=T.R(),A=C/360,R=l.pE*A,F=s.ub(0),N=a.Wc(),B=N?C/a.Oe().R():0;a=s.Ia();for(var q=0,U=c.da();q<U;++q){var K=N,X=new d.Ta(c.description);X.addPath(c,q,!0);var te=c.dc(q);_!=0&&(te=l.PD(te,X,T.H-x,T.H,_))&&(K=!1);var ae=-1;te=X.I();var ge=!1;K&&(ae=s.Ba(q),ge=s.dc(q));var Ee=X.ub(0),Ae=0,Me=Ee.read(0),He=0,Ie=3*p.Xd(0),dt=!1,ut=new d.h;ut.Rc();var Nt=new d.h;Nt.Rc();for(var yi=!1,fr=1;fr<te;++fr){var _i=d.h.construct(Ee.eg(2*fr),Ee.eg(2*fr+1)),Ft=_i.x,pt=Ft+Ae,$t=pt-Me;if(_i.x=pt,Math.abs($t)>R){if(K){var Di=ae+fr-1,$i=ae;(!ge||fr+1<te)&&($i+=fr),Di=F.read(2*Di),$i=(F.read(2*$i)-Di)*B,Math.abs($t-$i)>1*A&&(N=!1)}K||(pt=Ft+(Ae-=d.lc.Cn(C,pt-Me)),++He,yi=Ae!=0,_i.x=pt)}else dt||d.ta.AG(ut,Nt,_i,Ie)&&(dt=!0);yi&&Ee.write(2*fr,pt),Me=pt,ut.L(Nt),Nt.L(_i)}He!=0&&X.Pc(1993),K=X.Na(0),te=X.Na(te-1),d.h.tb(K,te),X=l.wQ(X,p,isNaN(y)?0:y,v),a.add(X,!1)}return s=p.Xd(0),c=T.R()/180,l.Jt(a,T,.1*s,!1),d.ri.clip(a,T,s,c,v)},l.wQ=function(s,a,c,p){return l.Fn(s,a,c,!0,0,p)},l.OS=function(s,a,c,p){var y=s.getType();if(y==1736)for(a=a!=null?a.Xd(0):0,y=0;y<p;y++)d.hd.Yd(s,c[y],a)!=1&&c[y].Rc();else{if(y!=197)throw d.i.N();for(y=0;y<p;y++)s.dP(c[y])||c[y].Rc()}},l.$k=function(s,a,c,p){if(32>c)for(var y=new d.Sa,v=0;v<c;v++)y.Cb(a[v]),s.$k(y,p).D(a[v]);else{var _=new d.de;for(_.re(3),_.HD(a,c),y=_.ub(3),v=0;v<c;v++)y.write(v,v);for(v=s.$k(_,p),s=v.ub(0),y=v.ub(3),p=d.h.construct(NaN,NaN),_=0;_<c;_++)a[_]=p;for(c=v.I(),v=0;v<c;v++)p=y.read(v),s.tc(2*v,a[p])}},l.Zk=function(s,a,c,p){if(32>c)for(var y=new d.Sa,v=0;v<c;v++)y.Cb(a[v]),s.Zk(y,p).D(a[v]);else{var _=new d.de;for(_.re(3),_.HD(a,c),y=_.ub(3),v=0;v<c;v++)y.write(v,v);for(v=s.Zk(_,p),s=v.ub(0),y=v.ub(3),p=d.h.construct(NaN,NaN),_=0;_<c;_++)a[_]=p;for(c=v.I(),v=0;v<c;v++)p=y.read(v),s.tc(2*v,a[p])}},l.pE=210,l}()}(Y||(Y={})),function(d){var O;(O=d.UL||(d.UL={}))[O.rightSide=1]="rightSide";var S=function(){function h(l,s,a){this.Bs=new d.h,l===void 0?this.Io=-1:(this.Bs.L(l),this.Io=s,this.Ka=a,this.nw=0)}return h.prototype.WJ=function(l){this.nw=l?1|this.nw:-2&this.nw},h.prototype.B=function(){return 0>this.Io},h.prototype.fz=function(){if(this.B())throw d.i.fa("invalid call");return new d.Sa(this.Bs.x,this.Bs.y)},h.prototype.Ua=function(){if(this.B())throw d.i.fa("invalid call");return this.Io},h.prototype.hz=function(){if(this.B())throw d.i.fa("invalid call");return this.Ka},h.prototype.Sz=function(){return!!(1&this.nw)},h.prototype.ey=function(l,s,a,c){this.Bs.x=l,this.Bs.y=s,this.Io=a,this.Ka=c},h}();d.$l=S}(Y||(Y={})),function(d){var O=function(){function h(){}return h.prototype.Uo=function(l,s){if(this.th.resize(0),this.Ii.length=0,this.tk=-1,l.xc(this.Ek),this.Ek.W(s,s),this.Ek.isIntersecting(this.Fb.Ca)){var a=l.getType();(this.vs=d.aa.yd(a))?(this.TH=l.ac(),this.SH=l.wc(),this.qa=s):this.qa=NaN,this.th.add(this.Fb.kf),this.Ii.push(this.Fb.Ca),this.Qs=this.Fb.Ur(this.Fb.kf)}else this.Qs=-1},h.prototype.Xi=function(l,s){this.th.resize(0),this.Ii.length=0,this.tk=-1,this.Ek.K(l),this.Ek.W(s,s),this.qa=NaN,this.Ek.isIntersecting(this.Fb.Ca)?(this.th.add(this.Fb.kf),this.Ii.push(this.Fb.Ca),this.Qs=this.Fb.Ur(this.Fb.kf),this.vs=!1):this.Qs=-1},h.prototype.next=function(){if(this.th.size==0)return-1;this.tk=this.Qs;var l=null,s=null,a=null,c=null;this.vs&&(l=new d.h,s=new d.h,a=new d.l);for(var p=!1;!p;){for(;this.tk!=-1;){var y=this.Fb.bz(this.Fb.fv(this.tk));if(y.isIntersecting(this.Ek)){if(!this.vs){p=!0;break}if(l.L(this.TH),s.L(this.SH),a.K(y),a.W(this.qa,this.qa),0<a.zy(l,s)){p=!0;break}}this.tk=this.Fb.nv(this.tk)}if(this.tk==-1){y=this.th.Fc();var v=this.Ii[this.Ii.length-1];for(c==null&&((c=[])[0]=new d.l,c[1]=new d.l,c[2]=new d.l,c[3]=new d.l),S.EJ(v,c),this.th.If(),--this.Ii.length,v=0;4>v;v++){var _=this.Fb.Lp(y,v);if(_!=-1&&0<this.Fb.WR(_)&&c[v].isIntersecting(this.Ek))if(this.vs){if(l.L(this.TH),s.L(this.SH),a.K(c[v]),a.W(this.qa,this.qa),0<a.zy(l,s)){var x=new d.l;x.K(c[v]),this.th.add(_),this.Ii.push(x)}}else(x=new d.l).K(c[v]),this.th.add(_),this.Ii.push(x)}if(this.th.size==0)return-1;this.tk=this.Fb.Ur(this.th.get(this.th.size-1))}}return this.Qs=this.Fb.nv(this.tk),this.tk},h.bP=function(l,s,a){var c=new h;return c.Fb=l,c.Ek=new d.l,c.th=new d.ia(0),c.Ii=[],c.Uo(s,a),c},h.aP=function(l,s,a){var c=new h;return c.Fb=l,c.Ek=new d.l,c.th=new d.ia(0),c.Ii=[],c.Xi(s,a),c},h.$O=function(l){var s=new h;return s.Fb=l,s.Ek=new d.l,s.th=new d.ia(0),s.Ii=[],s},h}();d.GY=O;var S=function(){function h(l,s){this.jf=new d.$c(11),this.Zh=new d.$c(5),this.ws=[],this.gw=new d.ia(0),this.Ca=new d.l,this.Nk(l,s)}return h.prototype.reset=function(l,s){this.jf.mj(!1),this.Zh.mj(!1),this.ws.length=0,this.gw.clear(!1),this.Nk(l,s)},h.prototype.vj=function(l,s){return this.zv(l,s,0,this.Ca,this.kf,!1,-1)},h.prototype.Jz=function(l,s,a){a=a==-1?this.kf:this.WF(a);var c=this.ca(a),p=this.oR(a);return this.zv(l,s,c,p,a,!1,-1)},h.prototype.ja=function(l){return this.jR(l)},h.prototype.GF=function(l){return this.bz(this.fv(l))},h.prototype.ca=function(l){return this.jv(l)},h.prototype.oR=function(l){var s=new d.l;s.K(this.Ca);var a=this.jv(l);l=this.QF(l);for(var c=0;c<2*a;c+=2){var p=d.O.truncate(3&l>>c);p==0?(s.v=.5*(s.v+s.C),s.G=.5*(s.G+s.H)):p==1?(s.C=.5*(s.v+s.C),s.G=.5*(s.G+s.H)):(p==2?s.C=.5*(s.v+s.C):s.v=.5*(s.v+s.C),s.H=.5*(s.G+s.H))}return s},h.prototype.WR=function(l){return this.Az(l)},h.prototype.vR=function(l,s){return O.bP(this,l,s)},h.prototype.MF=function(l,s){return O.aP(this,l,s)},h.prototype.getIterator=function(){return O.$O(this)},h.prototype.Nk=function(l,s){if(0>s||32<2*s)throw d.i.N("invalid height");this.BT=s,this.Ca.K(l),this.kf=this.jf.Ce(),this.jx(this.kf,0),this.ax(this.kf,0),this.NJ(this.kf,0),this.KJ(this.kf,0)},h.prototype.zv=function(l,s,a,c,p,y,v){if(!c.contains(s))return a==0?-1:this.zv(l,s,0,this.Ca,this.kf,y,v);if(!y)for(var _=p;_!=-1;_=this.IR(_))this.jx(_,this.Az(_)+1);(_=new d.l).K(c),c=p;var x=[];for(x[0]=new d.l,x[1]=new d.l,x[2]=new d.l,x[3]=new d.l;a<this.BT&&this.iO(c);a++){h.EJ(_,x);for(var T=!1,C=0;4>C;C++)if(x[C].contains(s)){T=!0;var A=this.Lp(c,C);A==-1&&(A=this.rP(c,C)),this.jx(A,this.Az(A)+1),c=A,_.K(x[C]);break}if(!T)break}return this.sS(l,s,a,_,c,y,p,v)},h.prototype.sS=function(l,s,a,c,p,y,v,_){var x=this.NF(p);if(y){if(p==v)return _;this.SP(_),y=_}else y=this.tP(),this.NB(y,l),this.KW(this.fv(y),s);return this.mX(y,p),x!=-1?(this.hx(y,x),this.bx(x,y)):this.GJ(p,y),this.SB(p,y),this.ax(p,this.lv(p)+1),this.hO(p)&&this.MQ(a,c,p),y},h.prototype.SP=function(l){var s=this.WF(l),a=this.NF(s),c=this.OR(l),p=this.nv(l);this.Ur(s)==l?(p!=-1?this.hx(p,-1):this.SB(s,-1),this.GJ(s,p)):a==l?(this.bx(c,-1),this.SB(s,c)):(this.hx(p,c),this.bx(c,p)),this.hx(l,-1),this.bx(l,-1),this.ax(s,this.lv(s)-1)},h.EJ=function(l,s){var a=.5*(l.v+l.C),c=.5*(l.G+l.H);s[0].K(a,c,l.C,l.H),s[1].K(l.v,c,a,l.H),s[2].K(l.v,l.G,a,c),s[3].K(a,l.G,l.C,c)},h.prototype.hO=function(l){return this.lv(l)==8&&!this.gG(l)},h.prototype.MQ=function(l,s,a){var c=this.Ur(a);do{var p=this.fv(c),y=this.Zh.T(c,0);p=this.bz(p),this.zv(y,p,l,s,a,!0,c),c=y=this.nv(c)}while(c!=-1)},h.prototype.iO=function(l){return 8<=this.lv(l)||this.gG(l)},h.prototype.gG=function(l){return this.Lp(l,0)!=-1||this.Lp(l,1)!=-1||this.Lp(l,2)!=-1||this.Lp(l,3)!=-1},h.prototype.rP=function(l,s){var a=this.jf.Ce();return this.OW(l,s,a),this.jx(a,0),this.ax(a,0),this.Pk(a,l),this.KJ(a,this.jv(l)+1),this.NJ(a,s<<2*this.jv(l)|this.QF(l)),a},h.prototype.tP=function(){var l=this.Zh.Ce();if(0<this.gw.size){var s=this.gw.Fc();this.gw.If()}else s=this.ws.length,this.ws.push(new d.l);return this.LW(l,s),l},h.prototype.Lp=function(l,s){return this.jf.T(l,s)},h.prototype.OW=function(l,s,a){this.jf.S(l,s,a)},h.prototype.Ur=function(l){return this.jf.T(l,4)},h.prototype.GJ=function(l,s){this.jf.S(l,4,s)},h.prototype.NF=function(l){return this.jf.T(l,5)},h.prototype.SB=function(l,s){this.jf.S(l,5,s)},h.prototype.QF=function(l){return this.jf.T(l,6)},h.prototype.NJ=function(l,s){this.jf.S(l,6,s)},h.prototype.lv=function(l){return this.jf.T(l,7)},h.prototype.Az=function(l){return this.jf.T(l,8)},h.prototype.ax=function(l,s){this.jf.S(l,7,s)},h.prototype.jx=function(l,s){this.jf.S(l,8,s)},h.prototype.IR=function(l){return this.jf.T(l,9)},h.prototype.Pk=function(l,s){this.jf.S(l,9,s)},h.prototype.jv=function(l){return this.jf.T(l,10)},h.prototype.KJ=function(l,s){this.jf.S(l,10,s)},h.prototype.jR=function(l){return this.Zh.T(l,0)},h.prototype.NB=function(l,s){this.Zh.S(l,0,s)},h.prototype.OR=function(l){return this.Zh.T(l,1)},h.prototype.nv=function(l){return this.Zh.T(l,2)},h.prototype.hx=function(l,s){this.Zh.S(l,1,s)},h.prototype.bx=function(l,s){this.Zh.S(l,2,s)},h.prototype.WF=function(l){return this.Zh.T(l,3)},h.prototype.mX=function(l,s){this.Zh.S(l,3,s)},h.prototype.fv=function(l){return this.Zh.T(l,4)},h.prototype.LW=function(l,s){this.Zh.S(l,4,s)},h.prototype.bz=function(l){return this.ws[l]},h.prototype.KW=function(l,s){this.ws[l].K(s)},h}();d.du=S}(Y||(Y={})),function(d){var O;(O=d.aL||(d.aL={}))[O.Outside=0]="Outside",O[O.Inside=1]="Inside",O[O.Border=2]="Border";var S=function(){function l(s,a){this.PT=a,this.Vh=s}return l.prototype.setColor=function(s,a){this.iH!=a&&s.flush(),this.iH=a},l.prototype.gF=function(s,a){for(var c=0;c<a;)for(var p=s[c++],y=s[c++],v=s[c++]*this.PT;p<y;p++)this.Vh[v+(p>>4)]|=this.iH<<2*(15&p)},l}();d.HY=S;var h=function(){function l(s,a,c){this.Vh=null,this.SA=this.Ik=this.cI=this.aI=this.Es=this.qH=this.Gf=this.Um=0,this.Ri=this.Jk=this.vl=null,this.Fz(s,a,c)}return l.create=function(s,a,c){if(!l.zE(s))throw d.i.N();return l.wP(s,a,c)},l.pW=function(s){switch(s){case 0:s=1024;break;case 1:s=16384;break;case 2:s=262144;break;default:throw d.i.fa("Internal Error")}return s},l.zE=function(s){return!(s.B()||s.getType()!=1607&&s.getType()!=1736)},l.prototype.rQ=function(s,a){a=a.Ga();for(var c=new d.h,p=new d.h;a.$a();)for(;a.Ha();){var y=a.ha();if(y.getType()!=322)throw d.i.fa("Internal Error");s.Eh(y.ac(),c),s.Eh(y.wc(),p),this.Ri.jy(c.x,c.y,p.x,p.y)}this.Ri.iJ(d.Px.Cx)},l.prototype.sQ=function(){throw d.i.fa("Internal Error")},l.prototype.Ry=function(s,a){for(var c=1;4>c;c++)s.jy(a[c-1].x,a[c-1].y,a[c].x,a[c].y);s.jy(a[3].x,a[3].y,a[0].x,a[0].y),this.Ri.iJ(d.Px.Cx)},l.prototype.rK=function(s,a,c){for(var p=[null,null,null,null],y=0;y<p.length;y++)p[y]=new d.h;a=a.Ga(),c=this.Jk.dY(c)+1.5,y=new d.h;for(var v=new d.h,_=new d.h,x=new d.h,T=new d.h,C=new d.l,A=new d.h;a.$a();){var R=!1,F=!0;for(A.ma(0,0);a.Ha();){var N=a.ha();if(x.x=N.sa,x.y=N.na,T.x=N.pa,T.y=N.la,C.Oa(),C.Zb(x.x,x.y),C.Lk(T.x,T.y),this.vl.HG(C)){this.Jk.Eh(T,T),F?(this.Jk.Eh(x,x),A.L(x),F=!1):x.L(A),y.uc(T,x);var B=.5>(N=y.length());N==0?y.ma(1,0):(B||A.L(T),y.scale(c/N),v.ma(-y.y,y.x),_.ma(y.y,-y.x),x.sub(y),T.add(y),p[0].add(x,v),p[1].add(x,_),p[2].add(T,_),p[3].add(T,v),B?R=!0:this.Ry(s,p))}else R&&(this.Ry(s,p),R=!1),F=!0}R&&this.Ry(s,p)}},l.prototype.sC=function(s){return d.O.truncate(s*this.qH+this.aI)},l.prototype.tC=function(s){return d.O.truncate(s*this.Es+this.cI)},l.wP=function(s,a,c){return new l(s,a,c)},l.prototype.Fz=function(s,a,c){this.Gf=Math.max(d.O.truncate(2*Math.sqrt(c)+.5),64),this.Um=d.O.truncate((2*this.Gf+31)/32),this.vl=new d.l,this.Ik=a,c=0;for(var p=this.Gf,y=this.Um;8<=p;)c+=p*y,p=d.O.truncate(p/2),y=d.O.truncate((2*p+31)/32);this.Vh=d.O.lg(c,0),this.Ri=new d.Px,c=new S(this.Vh,this.Um,this),this.Ri.AX(this.Gf,this.Gf,c),s.A(this.vl),this.vl.W(a,a),p=new d.l;var v=a*(y=d.l.construct(1,1,this.Gf-2,this.Gf-2)).R();switch(a*=y.ca(),p.K(this.vl.sf(),Math.max(v,this.vl.R()),Math.max(a,this.vl.ca())),this.SA=this.Ik,this.Jk=new d.Dd,this.Jk.pS(p,y),new d.Dd,s.getType()){case 550:c.setColor(this.Ri,2),this.sQ();break;case 1607:c.setColor(this.Ri,2),this.rK(this.Ri,s,this.SA);break;case 1736:c.setColor(this.Ri,1),this.rQ(this.Jk,s),c.setColor(this.Ri,2),this.rK(this.Ri,s,this.SA)}this.qH=this.Jk.bb,this.Es=this.Jk.ab,this.aI=this.Jk.Gb,this.cI=this.Jk.Lb,this.XN()},l.prototype.XN=function(){this.Ri.flush();for(var s=0,a=this.Gf*this.Um,c=this.Gf,p=d.O.truncate(this.Gf/2),y=this.Um,v=d.O.truncate((2*p+31)/32);8<c;){for(c=0;c<p;c++)for(var _=2*c,x=2*c+1,T=0;T<p;T++){var C=2*T,A=2*T+1,R=C>>4;C=2*(15&C);var F=A>>4;A=2*(15&A);var N=this.Vh[s+y*_+R]>>C&3;N|=this.Vh[s+y*_+F]>>A&3,N|=this.Vh[s+y*x+R]>>C&3,N|=this.Vh[s+y*x+F]>>A&3,this.Vh[a+v*c+(T>>4)]|=N<<2*(15&T)}c=p,y=v,s=a,p=d.O.truncate(c/2),v=d.O.truncate((2*p+31)/32),a=s+y*c}},l.prototype.So=function(s,a){return this.vl.contains(s,a)?(s=this.sC(s),a=this.tC(a),0>s||s>=this.Gf||0>a||a>=this.Gf||(a=this.Vh[this.Um*a+(s>>4)]>>2*(15&s)&3)==0?0:a==1?1:2):0},l.prototype.Ro=function(s){if(!s.Ea(this.vl))return 0;var a=this.sC(s.v),c=this.sC(s.C),p=this.tC(s.G);if(s=this.tC(s.H),0>a&&(a=0),0>p&&(p=0),c>=this.Gf&&(c=this.Gf-1),s>=this.Gf&&(s=this.Gf-1),a>c||p>s)return 0;for(var y=Math.max(c-a,1)*Math.max(s-p,1),v=0,_=this.Um,x=this.Gf,T=0;;){if(32>y||16>x){for(y=p;y<=s;y++)for(var C=a;C<=c;C++)if(1<(T=this.Vh[v+_*y+(C>>4)]>>2*(15&C)&3))return 2;if(T==0)return 0;if(T==1)return 1}v+=_*x,x=d.O.truncate(x/2),_=d.O.truncate((2*x+31)/32),a=d.O.truncate(a/2),p=d.O.truncate(p/2),c=d.O.truncate(c/2),s=d.O.truncate(s/2),y=Math.max(c-a,1)*Math.max(s-p,1)}},l.prototype.RR=function(){return this.Gf*this.Um},l}();d.Nx=h}(Y||(Y={})),function(d){var O;(O=d.VL||(d.VL={}))[O.contains=1]="contains",O[O.within=2]="within",O[O.equals=3]="equals",O[O.disjoint=4]="disjoint",O[O.touches=8]="touches",O[O.crosses=16]="crosses",O[O.overlaps=32]="overlaps",O[O.unknown=0]="unknown",O[O.intersects=1073741824]="intersects";var S=function(){function l(){}return l.construct=function(s,a,c,p,y,v,_,x){var T=new l;return T.pw=s,T.Mm=a,T.Kj=c,T.Si=p,T.BH=y,T.SY=v,T.TY=_,T.UY=x,T},l}();d.Vt=function(){function l(){}return l.CD=function(s,a,c){if(l.wy(s)){var p=d.ta.kj(a,s,!1);a=!1,d.Uk.CE(s)&&(a=a||s.lu(p,c)),(p=s.getType())!=1736&&p!=1607||!d.Uk.AE(s)||c==0||(a=a||s.fj(c)),p!=1736&&p!=1607||!d.Uk.BE(s)||c==0||a||s.hM()}},l.wy=function(s){return d.Uk.CE(s)||d.Uk.AE(s)||d.Uk.BE(s)},l}();var h=function(){function l(){this.rh=[]}return l.zB=function(s,a,c,p,y){var v=s.getType(),_=a.getType();if(v==197){if(_==197)return l.tW(s,a,c,p);if(_==33)return p==2?p=1:p==1&&(p=2),l.hJ(a,s,c,p)}else if(v==33){if(_==197)return l.hJ(s,a,c,p);if(_==33)return l.vW(s,a,c,p)}if(s.B()||a.B())return p==4;var x=new d.l;s.A(x);var T=new d.l;a.A(T);var C=new d.l;if(C.K(x),C.Zb(T),c=d.ta.Wd(c,C,!1),l.dk(x,T,c))return p==4;switch(x=!1,d.Vk.yd(v)&&((v=new d.Ta(s.description)).oc(s,!0),s=v,v=1607),d.Vk.yd(_)&&((_=new d.Ta(a.description)).oc(a,!0),a=_,_=1607),v!=197&&_!=197?(s.Db()<a.Db()||v==33&&_==550)&&(p==2?p=1:p==1&&(p=2)):v!=1736&&_!=197&&(p==2?p=1:p==1&&(p=2)),v){case 1736:switch(_){case 1736:x=l.rt(s,a,c,p,y);break;case 1607:x=l.$m(s,a,c,p,y);break;case 33:x=l.qt(s,a,c,p);break;case 550:x=l.pt(s,a,c,p,y);break;case 197:x=l.GI(s,a,c,p,y)}break;case 1607:switch(_){case 1736:x=l.$m(a,s,c,p,y);break;case 1607:x=l.gB(s,a,c,p,y);break;case 33:x=l.tt(s,a,c,p,y);break;case 550:x=l.st(s,a,c,p,y);break;case 197:x=l.MI(s,a,c,p)}break;case 33:switch(_){case 1736:x=l.qt(a,s,c,p);break;case 1607:x=l.tt(a,s,c,p,y);break;case 550:x=l.lt(a,s,c,p)}break;case 550:switch(_){case 1736:x=l.pt(a,s,c,p,y);break;case 1607:x=l.st(a,s,c,p,y);break;case 550:x=l.ZA(s,a,c,p,y);break;case 33:x=l.lt(s,a,c,p);break;case 197:x=l.hI(s,a,c,p)}break;case 197:switch(_){case 1736:x=l.GI(a,s,c,p,y);break;case 1607:x=l.MI(a,s,c,p);break;case 550:x=l.hI(a,s,c,p)}}return x},l.tW=function(s,a,c,p){if(s.B()||a.B())return p==4;var y=new d.l,v=new d.l,_=new d.l;switch(s.A(y),a.A(v),_.K(y),_.Zb(v),s=d.ta.Wd(c,_,!1),p){case 4:return l.dk(y,v,s);case 2:return l.jF(v,y,s);case 1:return l.jF(y,v,s);case 3:return l.ek(y,v,s);case 8:return l.cQ(y,v,s);case 32:return l.bQ(y,v,s);case 16:return l.aQ(y,v,s)}return!1},l.hJ=function(s,a,c,p){if(s.B()||a.B())return p==4;s=s.D();var y=new d.l,v=new d.l;switch(a.A(y),v.K(s),v.Zb(y),a=d.ta.Wd(c,v,!1),p){case 4:return l.Rw(s,y,a);case 2:return l.eB(s,y,a);case 1:return l.RU(s,y,a);case 3:return l.vI(s,y,a);case 8:return l.dB(s,y,a)}return!1},l.vW=function(s,a,c,p){if(s.B()||a.B())return p==4;s=s.D(),a=a.D();var y=new d.l;switch(y.K(s),y.Zb(a),c=d.ta.Wd(c,y,!1),p){case 4:return l.SU(s,a,c);case 2:return l.uI(a,s,c);case 1:return l.uI(s,a,c);case 3:return l.wI(s,a,c)}return!1},l.rt=function(s,a,c,p,y){switch(p){case 4:return l.kV(s,a,c);case 2:return l.Sw(a,s,c,y);case 1:return l.Sw(s,a,c,y);case 3:return l.nV(s,a,c);case 8:return l.vV(s,a,c);case 32:return l.qV(s,a,c,y)}return!1},l.$m=function(s,a,c,p,y){switch(p){case 4:return l.lV(s,a,c);case 1:return l.fB(s,a,c,y);case 8:return l.wV(s,a,c,y);case 16:return l.gV(s,a,c)}return!1},l.qt=function(s,a,c,p){switch(p){case 4:return l.jV(s,a,c);case 1:return l.dV(s,a,c);case 8:return l.uV(s,a,c)}return!1},l.pt=function(s,a,c,p){switch(p){case 4:return l.iV(s,a,c);case 1:return l.cV(s,a,c);case 8:return l.tV(s,a,c);case 16:return l.fV(s,a,c)}return!1},l.GI=function(s,a,c,p,y){if(l.hV(s,a,c))return p==4;if(p==4)return!1;switch(p){case 2:return l.xV(s,a,c);case 1:return l.bV(s,a,c);case 3:return l.mV(s,a,c);case 8:return l.sV(s,a,c,y);case 32:return l.pV(s,a,c,y);case 16:return l.eV(s,a,c,y)}return!1},l.gB=function(s,a,c,p){switch(p){case 4:return l.GV(s,a,c);case 2:return l.KI(a,s,c);case 1:return l.KI(s,a,c);case 3:return l.IV(s,a,c);case 8:return l.NI(s,a,c);case 32:return l.MV(s,a,c);case 16:return l.LI(s,a,c)}return!1},l.tt=function(s,a,c,p){switch(p){case 4:return l.FV(s,a,c);case 1:return l.AV(s,a,c);case 8:return l.QV(s,a,c)}return!1},l.st=function(s,a,c,p){switch(p){case 4:return l.EV(s,a,c);case 1:return l.zV(s,a,c);case 8:return l.PV(s,a,c);case 16:return l.CV(s,a,c)}return!1},l.MI=function(s,a,c,p){if(l.DV(s,a,c))return p==4;if(p==4)return!1;switch(p){case 2:return l.RV(s,a,c);case 1:return l.yV(s,a,c);case 3:return l.HV(s,a,c);case 8:return l.OV(s,a,c);case 32:return l.LV(s,a,c);case 16:return l.BV(s,a,c)}return!1},l.ZA=function(s,a,c,p){switch(p){case 4:return l.gU(s,a,c);case 2:return l.eI(a,s,c);case 1:return l.eI(s,a,c);case 3:return l.iU(s,a,c);case 32:return l.oU(s,a,c)}return!1},l.lt=function(s,a,c,p){switch(p){case 4:return l.fI(s,a,c);case 2:return l.sU(s,a,c);case 1:return l.dU(s,a,c);case 3:return l.Nw(s,a,c)}return!1},l.hI=function(s,a,c,p){switch(p){case 4:return l.fU(s,a,c);case 2:return l.rU(s,a,c);case 1:return l.cU(s,a,c);case 3:return l.hU(s,a,c);case 8:return l.qU(s,a,c);case 16:return l.eU(s,a,c)}return!1},l.nV=function(s,a,c){var p=new d.l,y=new d.l;return s.A(p),a.A(y),!!l.ek(p,y,c)&&(p=l.qc(s,a,!1))!=4&&p!=1&&p!=2&&(!!l.dI(s,a,c)||(p=s.Qb(),y=a.Qb(),!(Math.abs(p-y)>4*Math.max(s.I(),a.I())*c)&&l.Wz(s,a,c,!0)))},l.kV=function(s,a,c){var p=l.qc(s,a,!0);return p==4||p!=1&&p!=2&&p!=1073741824&&l.EI(s,a,c)},l.vV=function(s,a,c){var p=l.qc(s,a,!1);return p!=4&&p!=1&&p!=2&&l.II(s,a,c,null)},l.qV=function(s,a,c,p){var y=l.qc(s,a,!1);return y!=4&&y!=1&&y!=2&&l.FI(s,a,c,p)},l.Sw=function(s,a,c,p){var y=new d.l,v=new d.l;return s.A(y),a.A(v),!!l.zc(y,v,c)&&(y=l.qc(s,a,!1))!=4&&y!=2&&(y==1||l.BI(s,a,c,p))},l.lV=function(s,a,c){var p=l.qc(s,a,!0);return p==4||p!=1&&p!=1073741824&&l.EI(s,a,c)},l.wV=function(s,a,c,p){var y=l.qc(s,a,!1);return y!=4&&y!=1&&l.JI(s,a,c,p)},l.gV=function(s,a,c){var p=l.qc(s,a,!1);return p!=4&&p!=1&&l.DI(s,a,c,null)},l.fB=function(s,a,c,p){var y=new d.l,v=new d.l;return s.A(y),a.A(v),!!l.zc(y,v,c)&&(y=l.qc(s,a,!1))!=4&&(y==1||l.CI(s,a,c,p))},l.jV=function(s,a,c){return d.hd.KG(s,a,c)==0},l.uV=function(s,a,c){return a=a.D(),l.HI(s,a,c)},l.dV=function(s,a,c){return a=a.D(),l.AI(s,a,c)},l.iV=function(s,a,c){var p=l.qc(s,a,!1);if(p==4)return!0;if(p==1)return!1;p=new d.l,s.A(p),p.W(c,c);for(var y=new d.h,v=0;v<a.I();v++)if(a.D(v,y),p.contains(y)){var _=d.hd.Yd(s,y,c);if(_==1||_==2)return!1}return!0},l.tV=function(s,a,c){var p=this.qc(s,a,!1);if(p==4||p==1)return!1;p=new d.l,s.A(p),p.W(c,c);for(var y=!1,v=s,_=!1,x=0;x<a.I();x++){var T=a.Na(x);if(p.contains(T)){if((T=d.hd.Yd(v,T,c))==2)y=!0;else if(T==1)return!1}_||(!d.Dg.Ml(s,a.I()-1)||s.Bb!=null&&s.Bb.Fb!=null?v=s:(v=new d.Da,s.copyTo(v),v.fj(1)),_=!0)}return!!y},l.fV=function(s,a,c){var p=this.qc(s,a,!1);if(p==4||p==1)return!1;var y=new d.l;p=new d.l;var v=new d.l;s.A(y),a.A(v),p.K(y),p.W(c,c),v=y=!1;for(var _=s,x=!1,T=0;T<a.I();T++){var C=a.Na(T);if(p.contains(C)?(C=d.hd.Yd(_,C,c))==0?v=!0:C==1&&(y=!0):v=!0,y&&v)return!0;x||(!d.Dg.Ml(s,a.I()-1)||s.Bb!=null&&s.Bb.Fb!=null?_=s:(_=new d.Da,s.copyTo(_),_.fj(1)),x=!0)}return!1},l.cV=function(s,a,c){var p=new d.l,y=new d.l;if(s.A(p),a.A(y),!this.zc(p,y,c)||(y=this.qc(s,a,!1))==4)return!1;if(y==1)return!0;y=!1;for(var v=s,_=!1,x=0;x<a.I();x++){var T=a.Na(x);if(!p.contains(T))return!1;if((T=d.hd.Yd(v,T,c))==1)y=!0;else if(T==0)return!1;_||(!d.Dg.Ml(s,a.I()-1)||s.Bb!=null&&s.Bb.Fb!=null?v=s:(v=new d.Da,s.copyTo(v),v.fj(1)),_=!0)}return y},l.mV=function(s,a,c){var p=new d.l,y=new d.l;return s.A(p),a.A(y),!!l.ek(p,y,c)&&((p=new d.Da).ad(a,!1),l.Wz(s,p,c,!0))},l.hV=function(s,a,c){var p=l.qc(s,a,!1);if(p==4)return!0;if(p==1||p==2)return!1;var y=new d.l;if(p=new d.l,s.A(y),a.A(p),l.zc(p,y,c)||(y=new d.h,p.dn(y),(a=d.hd.Yd(s,y,c))!=0)||(p.$I(y),(a=d.hd.Yd(s,y,c))!=0)||(p.en(y),(a=d.hd.Yd(s,y,c))!=0)||(p.cJ(y),(a=d.hd.Yd(s,y,c))!=0))return!1;a=s.ub(0),(y=new d.l).K(p),y.W(c,c);for(var v=0,_=s.I();v<_;v++){var x=a.read(2*v),T=a.read(2*v+1);if(y.contains(x,T))return!1}return!l.TG(s,p,c)},l.sV=function(s,a,c,p){var y=l.qc(s,a,!1);if(y==4||y==1||y==2)return!1;y=new d.l;var v=new d.l;return s.A(y),a.A(v),!l.zc(v,y,c)&&(v.R()<=c&&v.ca()<=c?(a=a.Ip(),l.HI(s,a,c)):v.R()<=c||v.ca()<=c?(y=new d.Ta,v=new d.Sa,a.Hf(0,v),y.nf(v),a.Hf(2,v),y.lineTo(v),l.JI(s,y,c,p)):((y=new d.Da).ad(a,!1),l.II(s,y,c,p)))},l.pV=function(s,a,c,p){var y=l.qc(s,a,!1);if(y==4||y==1||y==2)return!1;y=new d.l;var v=new d.l;return s.A(y),a.A(v),!(l.zc(v,y,c)||v.R()<=c||v.ca()<=c)&&((y=new d.Da).ad(a,!1),l.FI(s,y,c,p))},l.xV=function(s,a,c){var p=new d.l,y=new d.l;return s.A(p),a.A(y),l.zc(y,p,c)},l.bV=function(s,a,c){var p=new d.l,y=new d.l;return s.A(p),a.A(y),!!l.zc(p,y,c)&&(p=l.qc(s,a,!1))!=4&&p!=2&&(p==1||(y.R()<=c&&y.ca()<=c?(a=a.Ip(),l.AI(s,a,c)):y.R()<=c||y.ca()<=c?(y=new d.Ta,p=new d.Sa,a.Hf(0,p),y.nf(p),a.Hf(2,p),y.lineTo(p),l.CI(s,y,c,null)):((y=new d.Da).ad(a,!1),l.BI(s,y,c,null))))},l.eV=function(s,a,c,p){var y=new d.l,v=new d.l;return s.A(y),a.A(v),!(l.zc(v,y,c)||v.ca()>c&&v.R()>c||v.ca()<=c&&v.R()<=c)&&(y=new d.Ta,v=new d.Sa,a.Hf(0,v),y.nf(v),a.Hf(2,v),y.lineTo(v),l.DI(s,y,c,p))},l.IV=function(s,a,c){var p=new d.l,y=new d.l;return s.A(p),a.A(y),!(!l.ek(p,y,c)||l.qc(s,a,!1)==4)&&(!!l.dI(s,a,c)||l.Wz(s,a,c,!1))},l.GV=function(s,a,c){return this.qc(s,a,!1)==4||!!new d.Zl(s,a,c,!0).next()&&!this.UG(s,a,c)},l.NI=function(s,a,c){if(l.qc(s,a,!1)==4)return!1;var p=new d.be(0);if(l.Xz(s,a,c,p)!=0)return!1;for(var y=new d.de,v=0;v<p.size;v+=2){var _=p.read(v),x=p.read(v+1);y.Bu(_,x)}return s=s.mg(),a=a.mg(),s.Fd(a,0,a.I()),l.Mw(s,y,c)},l.LI=function(s,a,c){if(l.qc(s,a,!1)==4)return!1;var p=new d.be(0);if(l.Xz(s,a,c,p)!=0)return!1;for(var y=new d.de,v=0;v<p.size;v+=2){var _=p.read(v),x=p.read(v+1);y.Bu(_,x)}return s=s.mg(),a=a.mg(),s.Fd(a,0,a.I()),!l.Mw(s,y,c)},l.MV=function(s,a,c){return l.qc(s,a,!1)!=4&&l.WG(s,a,c)},l.KI=function(s,a,c){var p=new d.l,y=new d.l;return s.A(p),a.A(y),!(!l.zc(p,y,c)||l.qc(s,a,!1)==4)&&l.ym(a,s,c,!1)},l.FV=function(s,a,c){return l.qc(s,a,!1)==4||(a=a.D(),!l.Yz(s,a,c))},l.QV=function(s,a,c){return l.qc(s,a,!1)!=4&&(a=a.D(),l.Zz(s,a,c))},l.AV=function(s,a,c){return l.qc(s,a,!1)!=4&&(a=a.D(),l.SG(s,a,c))},l.EV=function(s,a,c){return l.qc(s,a,!1)==4||!l.VG(s,a,c,!1)},l.PV=function(s,a,c){if(this.qc(s,a,!1)==4)return!1;var p=s.Ga(),y=new d.l,v=new d.l,_=new d.l;s.A(y),a.A(v),y.W(c,c),v.W(c,c),_.K(y),_.Ea(v),y=null;var x=s.Bb;if(x!=null){var T=x.Fb;y=x.zo,T==null&&(T=x=d.ta.jj(s,_))}else T=x=d.ta.jj(s,_);var C=T.getIterator(),A=null;y!=null&&(A=y.getIterator());var R=new d.h,F=new d.h,N=!1,B=c*c;for(y=new d.pn(a.I()),x=0;x<a.I();x++)y.write(x,0);for(x=0;x<a.I();x++)if(a.D(x,R),_.contains(R)){if(v.K(R.x,R.y,R.x,R.y),A!=null&&(A.Xi(v,c),A.next()==-1))continue;C.Xi(v,c);for(var q=C.next();q!=-1;q=C.next())if(p.Vb(T.ja(q)),(q=p.ha()).hc(q.fe(R,!1),F),d.h.yc(R,F)<=B){y.write(x,1),N=!0;break}}if(!N)return!1;for(s=s.mg(),p=new d.de,v=new d.h,x=0;x<a.I();x++)y.read(x)!=0&&(a.D(x,v),p.Bu(v.x,v.y));return this.Mw(s,p,c)},l.CV=function(s,a,c){if(this.qc(s,a,!1)==4)return!1;var p=s.Ga(),y=new d.l,v=new d.l,_=new d.l;s.A(y),a.A(v),y.W(c,c),v.W(c,c),_.K(y),_.Ea(v),y=null;var x=s.Bb;if(x!=null){var T=x.Fb;y=x.zo,T==null&&(T=x=d.ta.jj(s,_))}else T=x=d.ta.jj(s,_);var C=T.getIterator(),A=null;y!=null&&(A=y.getIterator());var R=new d.h,F=new d.h,N=!1,B=!1,q=c*c;for(y=new d.pn(a.I()),x=0;x<a.I();x++)y.write(x,0);for(x=0;x<a.I();x++)if(a.D(x,R),_.contains(R)){if(v.K(R.x,R.y,R.x,R.y),A!=null&&(A.Xi(v,c),A.next()==-1)){B=!0;continue}C.Xi(v,c);for(var U=!1,K=C.next();K!=-1;K=C.next())if(p.Vb(T.ja(K)),(K=p.ha()).hc(K.fe(R,!1),F),d.h.yc(R,F)<=q){y.write(x,1),U=N=!0;break}U||(B=!0)}else B=!0;if(!N||!B)return!1;for(s=s.mg(),p=new d.de,v=new d.h,x=0;x<a.I();x++)y.read(x)!=0&&(a.D(x,v),p.Bu(v.x,v.y));return!this.Mw(s,p,c)},l.zV=function(s,a,c){var p=new d.l,y=new d.l;return s.A(p),a.A(y),!(!l.zc(p,y,c)||l.qc(s,a,!1)==4||!l.VG(s,a,c,!0))&&(s=s.mg(),!l.gI(s,a,c))},l.HV=function(s,a,c){var p=new d.l,y=new d.l;return s.A(p),a.A(y),!(y.ca()>c&&y.R()>c)&&l.ek(p,y,c)},l.DV=function(s,a,c){var p=new d.l,y=new d.l;return s.A(p),a.A(y),!l.zc(y,p,c)&&!l.TG(s,y,c)},l.OV=function(s,a,c){var p=new d.l,y=new d.l;if(s.A(p),a.A(y),y.ca()<=c&&y.R()<=c)return y=a.Ip(),l.Zz(s,y,c);if(y.ca()<=c||y.R()<=c)return y=new d.Ta,p=new d.Sa,a.Hf(0,p),y.nf(p),a.Hf(2,p),y.lineTo(p),l.NI(s,y,c);s=s.Ga(),a=new d.l,p=new d.l,a.K(y),p.K(y),a.W(-c,-c),p.W(c,c),y=!1;for(var v=new d.l,_=new d.l;s.$a();)for(;s.Ha();){if(s.ha().A(v),_.K(a),_.Ea(v),!_.B()&&(_.ca()>c||_.R()>c))return!1;_.K(p),_.Ea(v),_.B()||(y=!0)}return y},l.LV=function(s,a,c){var p=new d.l,y=new d.l;return s.A(p),a.A(y),!(l.zc(p,y,c)||l.zc(y,p,c)||l.zc(y,p,c)||y.ca()>c&&y.R()>c||y.ca()<=c&&y.R()<=c)&&(p=new d.Ta,y=new d.Sa,a.Hf(0,y),p.nf(y),a.Hf(2,y),p.lineTo(y),l.WG(s,p,c))},l.RV=function(s,a,c){var p=new d.l,y=new d.l;if(s.A(p),a.A(y),!l.zc(y,p,c)||y.ca()<=c&&y.R()<=c)return!1;if(y.ca()<=c||y.R()<=c)return l.zc(y,p,c);s=s.Ga(),(a=new d.l).K(y),a.W(-c,-c),y=!1,p=new d.l;for(var v=new d.l;s.$a();)for(;s.Ha();)s.ha().A(p),a.hm(p)?y=!0:(v.K(a),v.Ea(p),!v.B()&&(v.ca()>c||v.R()>c)&&(y=!0));return y},l.yV=function(s,a,c){var p=new d.l,y=new d.l;return a.A(y),s.A(p),!(!l.zc(p,y,c)||y.ca()>c&&y.R()>c)&&(y.ca()<=c&&y.R()<=c?(a=a.Ip(),l.SG(s,a,c)):(p=new d.Ta,y=new d.Sa,a.Hf(0,y),p.nf(y),a.Hf(2,y),p.lineTo(y),l.ym(p,s,c,!1)))},l.BV=function(s,a,c){var p=new d.l,y=new d.l;if(s.A(p),a.A(y),l.zc(y,p,c)||y.ca()<=c&&y.R()<=c)return!1;if(y.ca()<=c||y.R()<=c)return p=new d.Ta,y=new d.Sa,a.Hf(0,y),p.nf(y),a.Hf(2,y),p.lineTo(y),l.LI(s,p,c);s=s.Ga(),a=new d.l,(p=new d.l).K(y),a.K(y),p.W(-c,-c),a.W(c,c);for(var v=y=!1,_=new d.l,x=new d.l;s.$a();)for(;s.Ha();)if(s.ha().A(_),v||a.contains(_)||(v=!0),y||(x.K(p),x.Ea(_),!x.B()&&(x.ca()>c||x.R()>c)&&(y=!0)),y&&v)return!0;return!1},l.iU=function(s,a,c){var p=new d.l,y=new d.l;return s.A(p),a.A(y),!!l.ek(p,y,c)&&(!!l.jU(s,a,c)||l.YA(s,a,c,!1,!0,!1))},l.gU=function(s,a,c){return!l.gI(s,a,c)},l.oU=function(s,a,c){return l.YA(s,a,c,!1,!1,!0)},l.eI=function(s,a,c){var p=new d.l,y=new d.l;return s.A(p),a.A(y),!!l.zc(p,y,c)&&l.YA(a,s,c,!0,!1,!1)},l.Mw=function(s,a,c){c*=c;for(var p=new d.h,y=new d.h,v=0;v<a.I();v++){a.D(v,y);for(var _=!1,x=0;x<s.I();x++)if(s.D(x,p),d.h.yc(p,y)<=c){_=!0;break}if(!_)return!1}return!0},l.Nw=function(s,a,c){var p=new d.l,y=new d.l;return s.A(p),a.A(y),l.ek(p,y,c)},l.fI=function(s,a,c){return a=a.D(),l.kt(s,a,c)},l.sU=function(s,a,c){return l.Nw(s,a,c)},l.dU=function(s,a,c){return!l.fI(s,a,c)},l.hU=function(s,a,c){var p=new d.l,y=new d.l;return s.A(p),a.A(y),!(y.ca()>c||y.R()>c)&&l.ek(p,y,c)},l.fU=function(s,a,c){var p=new d.l,y=new d.l;if(s.A(p),a.A(y),l.zc(y,p,c))return!1;for((a=new d.l).K(y),a.W(c,c),c=new d.h,y=0;y<s.I();y++)if(s.D(y,c),a.contains(c))return!1;return!0},l.qU=function(s,a,c){var p=new d.l,y=new d.l,v=new d.l;if(a.A(p),p.ca()<=c&&p.R()<=c)return!1;if(p.ca()<=c||p.R()<=c){a=new d.h;var _=!1;y.K(p),v.K(p),y.W(c,c),p.ca()>c?v.W(0,-c):v.W(-c,0);for(var x=0;x<s.I();x++)if(s.D(x,a),y.contains(a)){if(p.ca()>c){if(a.y>v.G&&a.y<v.H)return!1}else if(a.x>v.v&&a.x<v.C)return!1;_=!0}return _}for(y.K(p),v.K(p),y.W(c,c),v.W(-c,-c),a=new d.h,_=!1,x=0;x<s.I();x++)if(s.D(x,a),y.contains(a)){if(v.hm(a))return!1;_=!0}return _},l.rU=function(s,a,c){var p=new d.l,y=new d.l;if(s.A(p),a.A(y),!l.zc(y,p,c))return!1;if(y.ca()<=c&&y.R()<=c)return l.ek(p,y,c);if(y.ca()<=c||y.R()<=c){a=!1,p=new d.l;var v=new d.l;p.K(y),v.K(y),y.ca()>c?p.W(0,-c):p.W(-c,0),v.W(c,c);for(var _=new d.h,x=0;x<s.I();x++){if(s.D(x,_),!v.contains(_))return!1;y.ca()>c?_.y>p.G&&_.y<p.H&&(a=!0):_.x>p.v&&_.x<p.C&&(a=!0)}return a}for(a=!1,p=new d.l,v=new d.l,p.K(y),v.K(y),p.W(-c,-c),v.W(c,c),_=new d.h,x=0;x<s.I();x++){if(s.D(x,_),!v.contains(_))return!1;p.hm(_)&&(a=!0)}return a},l.cU=function(s,a,c){var p=new d.l,y=new d.l;return s.A(p),a.A(y),!(!l.zc(p,y,c)||y.ca()>c||y.R()>c)&&(a=a.Ip(),!l.kt(s,a,c))},l.eU=function(s,a,c){var p=new d.l,y=new d.l;if(s.A(p),a.A(y),l.zc(y,p,c)||y.ca()<=c&&y.R()<=c)return!1;if(y.ca()<=c||y.R()<=c){a=new d.l,p=new d.l,a.K(y),y.ca()>c?a.W(0,-c):a.W(-c,0),p.K(y),p.W(c,c);for(var v=new d.h,_=!1,x=!1,T=0;T<s.I();T++)if(s.D(T,v),_||(y.ca()>c?v.y>a.G&&v.y<a.H&&(_=!0):v.x>a.v&&v.x<a.C&&(_=!0)),x||p.contains(v)||(x=!0),_&&x)return!0;return!1}for(a=new d.l,p=new d.l,a.K(y),a.W(-c,-c),p.K(y),p.W(c,c),v=new d.h,x=_=!1,T=0;T<s.I();T++)if(s.D(T,v),!_&&a.hm(v)&&(_=!0),x||p.contains(v)||(x=!0),_&&x)return!0;return!1},l.wI=function(s,a,c){return d.h.yc(s,a)<=c*c},l.SU=function(s,a,c){return d.h.yc(s,a)>c*c},l.uI=function(s,a,c){return l.wI(s,a,c)},l.vI=function(s,a,c){var p=new d.l;return p.K(s),l.ek(p,a,c)},l.Rw=function(s,a,c){var p=new d.l;return p.K(a),p.W(c,c),!p.contains(s)},l.dB=function(s,a,c){if(a.ca()<=c&&a.R()<=c)return!1;var p=new d.l,y=new d.l;if(p.K(a),p.W(c,c),!p.contains(s))return!1;if(a.ca()<=c||a.R()<=c){if(y.K(a),a.ca()>c?y.W(0,-c):y.W(-c,0),a.ca()>c){if(s.y>y.G&&s.y<y.H)return!1}else if(s.x>y.v&&s.x<y.C)return!1;return!0}return y.K(a),y.W(-c,-c),!y.hm(s)},l.eB=function(s,a,c){if(a.ca()<=c&&a.R()<=c)return!0;if(a.ca()<=c||a.R()<=c){var p=new d.l;p.K(a),a.ca()>c?p.W(0,-c):p.W(-c,0);var y=!1;return a.ca()>c?s.y>p.G&&s.y<p.H&&(y=!0):s.x>p.v&&s.x<p.C&&(y=!0),y}return(p=new d.l).K(a),p.W(-c,-c),p.hm(s)},l.RU=function(s,a,c){return l.vI(s,a,c)},l.ek=function(s,a,c){return l.zc(s,a,c)&&l.zc(a,s,c)},l.dk=function(s,a,c){var p=new d.l;return p.K(a),p.W(c,c),!s.isIntersecting(p)},l.cQ=function(s,a,c){if(s.ca()<=c&&s.R()<=c){var p=s.sf();return l.dB(p,a,c)}if(a.ca()<=c&&a.R()<=c)return p=a.sf(),l.dB(p,s,c);if(s.ca()>c&&s.R()>c&&(a.ca()<=c||a.R()<=c)?p=a:(p=s,s=a),p.ca()<=c||p.R()<=c){if(s.ca()<=c||s.R()<=c){a=new d.yb;var y=new d.yb,v=[0,0],_=[0,0],x=new d.h;return p.dn(x),a.Dc(x),p.en(x),a.Qc(x),s.dn(x),y.Dc(x),s.en(x),y.Qc(x),a.Ea(y,null,v,_,c),a.Ea(y,null,null,null,c)==1&&(v[0]==0||v[1]==1||_[0]==0||_[1]==1)}return a=new d.l,y=new d.l,a.K(s),a.W(-c,-c),y.K(a),y.Ea(p),!(!y.B()&&(y.ca()>c||y.R()>c))}return s.W(c,c),(y=new d.l).K(p),y.Ea(s),!(y.B()||!y.B()&&y.ca()>c&&y.R()>c)},l.bQ=function(s,a,c){if(l.zc(s,a,c)||l.zc(a,s,c)||s.ca()<=c&&s.R()<=c||a.ca()<=c&&a.R()<=c)return!1;if(s.ca()<=c||s.R()<=c){if(a.ca()>c&&a.R()>c)return!1;var p=new d.yb,y=new d.yb,v=[0,0],_=[0,0],x=new d.h;return s.dn(x),p.Dc(x),s.en(x),p.Qc(x),a.dn(x),y.Dc(x),a.en(x),y.Qc(x),p.Ea(y,null,v,_,c),p.Ea(y,null,null,null,c)==2&&(0<v[0]||1>v[1])&&(0<_[0]||1>_[1])}return!(a.ca()<=c||a.R()<=c)&&((p=new d.l).K(s),p.Ea(a),!(p.B()||p.ca()<=c||p.R()<=c))},l.jF=function(s,a,c){if(!l.zc(s,a,c))return!1;if(s.ca()<=c&&s.R()<=c)return s=s.sf(),l.eB(s,a,c);if(a.ca()<=c&&a.R()<=c)return a=a.sf(),l.eB(a,s,c);if(s.ca()<=c||s.R()<=c)return l.zc(s,a,c);if(a.ca()<=c||a.R()<=c){var p=new d.l;return p.K(s),p.W(-c,-c),p.hm(a)?!0:((s=new d.l).K(p),s.Ea(a),!(s.B()||s.ca()<=c&&s.R()<=c))}return l.zc(s,a,c)},l.aQ=function(s,a,c){if(l.zc(s,a,c)||l.zc(a,s,c)||s.ca()<=c&&s.R()<=c||a.ca()<=c&&a.R()<=c||a.ca()>c&&a.R()>c&&s.ca()>c&&s.R()>c)return!1;if(s.ca()>c&&s.R()>c)var p=a;else p=s,s=a;if(s.ca()>c&&s.R()>c){a=new d.l;var y=new d.l;return y.K(s),y.W(-c,-c),a.K(y),a.Ea(p),!(a.B()||a.ca()<=c&&a.R()<=c)}a=new d.yb,y=new d.yb;var v=[0,0],_=[0,0],x=new d.h;return p.dn(x),a.Dc(x),p.en(x),a.Qc(x),s.dn(x),y.Dc(x),s.en(x),y.Qc(x),a.Ea(y,null,v,_,c),a.Ea(y,null,null,null,c)==1&&0<v[0]&&1>v[1]&&0<_[0]&&1>_[1]},l.EI=function(s,a,c){var p=new d.l,y=new d.l,v=new d.Zl(s,a,c,!0);if(!v.next())return!0;if(this.UG(s,a,c))return!1;var _=s,x=null;a.getType()==1736&&(x=a);var T=!1,C=!1;do{var A=v.nl(),R=v.hl();if(R=a.Na(a.Ba(R)),p.K(v.uz()),p.W(c,c),p.contains(R)&&(R=d.hd.Yd(_,R,0))!=0||a.getType()==1736&&(A=s.Na(s.Ba(A)),y.K(v.az()),y.W(c,c),y.contains(A)&&(R=d.hd.Yd(x,A,0))!=0))return!1;T||(!d.Dg.Ml(s,a.da()-1)||s.Bb!=null&&s.Bb.Fb!=null?_=s:(_=new d.Da,s.copyTo(_),_.fj(1)),T=!0),a.getType()!=1736||C||(C=a,!d.Dg.Ml(C,s.da()-1)||a.Bb!=null&&a.Bb.Fb!=null?x=a:(x=new d.Da,C.copyTo(x),x.fj(1)),C=!0)}while(v.next());return!0},l.zc=function(s,a,c){var p=new d.l;return p.K(s),p.W(c,c),p.contains(a)},l.ls=function(s,a,c){var p=new d.l;return p.K(a),p.W(c,c),a=new d.h,s.dn(a),!p.contains(a)||(s.$I(a),!p.contains(a)||(s.cJ(a),!p.contains(a)||(s.en(a),!p.contains(a))))},l.dI=function(s,a,c){if(s.da()!=a.da()||s.I()!=a.I())return!1;var p=new d.h,y=new d.h,v=!0;c*=c;for(var _=0;_<s.da();_++){if(s.Vc(_)!=a.Vc(_)){v=!1;break}for(var x=s.Ba(_);x<a.Vc(_);x++)if(s.D(x,p),a.D(x,y),d.h.yc(p,y)>c){v=!1;break}if(!v)break}return!!v},l.jU=function(s,a,c){if(s.I()!=a.I())return!1;var p=new d.h,y=new d.h,v=!0;c*=c;for(var _=0;_<s.I();_++)if(s.D(_,p),a.D(_,y),d.h.yc(p,y)>c){v=!1;break}return!!v},l.YA=function(s,a,c,p,y,v){var _=!1;if(s.I()>a.I()){p&&(p=!1,_=!0);var x=a}else x=s,s=a;if(a=null,y||v||_){a=new d.pn(s.I());for(var T=0;T<s.I();T++)a.write(T,0)}T=new d.l;var C=new d.l,A=new d.l;x.A(T),s.A(C),T.W(c,c),C.W(c,c),A.K(T),A.Ea(C),C=new d.h;for(var R=new d.h,F=!0,N=d.ta.oE(s,A),B=N.getIterator(),q=c*c,U=0;U<x.I();U++)if(x.D(U,C),A.contains(C)){var K=!1;T.K(C.x,C.y,C.x,C.y),B.Xi(T,c);for(var X=B.next();X!=-1&&(X=N.ja(X),s.D(X,R),!(d.h.yc(C,R)<=q&&((y||v||_)&&a.write(X,1),K=!0,p)));X=B.next());if(!K&&(F=!1,y||p))return!1}else{if(y||p)return!1;F=!1}if(v&&F)return!1;if(p)return!0;for(T=0;T<s.I();T++)if(a.read(T)==1){if(v)return!0}else if(y||_)return!1;return!v},l.gI=function(s,a,c){if(s.I()>a.I())var p=a;else p=s,s=a;a=new d.l;var y=new d.l,v=new d.l;p.A(a),s.A(y),a.W(c,c),y.W(c,c),v.K(a),v.Ea(y),y=new d.h;for(var _=new d.h,x=c*c,T=d.ta.oE(s,v),C=T.getIterator(),A=0;A<p.I();A++)if(p.D(A,y),v.contains(y)){a.K(y.x,y.y,y.x,y.y),C.Xi(a,c);for(var R=C.next();R!=-1;R=C.next())if(s.D(T.ja(R),_),d.h.yc(y,_)<=x)return!0}return!1},l.Wz=function(s,a,c,p){return l.ym(s,a,c,p)&&l.ym(a,s,c,p)},l.ym=function(s,a,c,p){function y(He,Ie){return R.QE(He,Ie)}var v,_=!0,x=[0,0],T=[0,0],C=0,A=new d.ia(0),R=new l,F=new d.l,N=new d.l,B=new d.l;s.A(F),a.A(N),F.W(c,c),N.W(c,c),B.K(F),B.Ea(N),s=s.Ga(),N=a.Ga();var q=null,U=q=null,K=a.Bb;for(K!=null?(q=K.Fb,U=K.zo,q==null&&(q=d.ta.jj(a,B))):q=d.ta.jj(a,B),a=q.getIterator(),K=null,U!=null&&(K=U.getIterator());s.$a();)for(;s.Ha();){var X=!1,te=s.ha();if(te.A(F),!F.isIntersecting(B)||K!=null&&(K.Xi(F,c),K.next()==-1))return!1;for(U=te.Qb(),a.Uo(te,c),v=a.next();v!=-1;v=a.next()){N.Vb(q.ja(v)),v=N.ha();var ae=te.Ea(v,null,x,T,c);if(ae==2&&(!p||T[0]<=T[1])){ae=x[0];var ge=x[1],Ee=T[0],Ae=T[1];if(ae*U<=c&&(1-ge)*U<=c){X=!0,C=0,A.resize(0),R.rh.length=0;var Me=s.wb();for(Ee=!0;Ee;){if(s.Ha()){if(U=(te=s.ha()).Qb(),(ae=te.Ea(v,null,x,T,c))==2&&(!p||T[0]<=T[1])&&(ae=x[0],ge=x[1],ae*U<=c&&(1-ge)*U<=c)){Me=s.wb();continue}if(N.Ha()&&(v=N.ha(),(ae=te.Ea(v,null,x,T,c))==2&&(!p||T[0]<=T[1])&&(ae=x[0],ge=x[1],ae*U<=c&&(1-ge)*U<=c))){Me=s.wb();continue}}Ee=!1}Me!=s.wb()&&(s.Vb(Me),s.ha());break}Me=s.wb(),v=S.construct(Me,s.gb,ae,ge,N.wb(),N.gb,Ee,Ae),R.rh.push(v),A.add(A.size)}}if(!X){if(C==R.rh.length)return!1;for(1<A.size-C&&A.Vd(C,A.size,y),X=0;C<R.rh.length;C++)if(!((v=R.rh[A.get(C)]).Kj<X&&v.Si<X)){if(U*(v.Kj-X)>c)return!1;if(U*(1-(X=v.Si))<=c||X==1)break}if(U*(1-X)>c)return!1;C=0,A.resize(0),R.rh.length=0}}return _},l.WG=function(s,a,c){if(1>l.Xz(s,a,c,null))return!1;var p=new d.l,y=new d.l;s.A(p),a.A(y);var v=l.ls(p,y,c);return p=l.ls(y,p,c),!(!v||!p)||(v&&!p?!l.ym(a,s,c,!1):p&&!v?!l.ym(s,a,c,!1):!l.ym(s,a,c,!1)&&!l.ym(a,s,c,!1))},l.Xz=function(s,a,c,p){function y(Nt,yi){return F.QE(Nt,yi)}if(s.yz()>a.yz())var v=a,_=s;else v=s,_=a;s=v.Ga(),a=_.Ga();var x=[0,0],T=[0,0],C=-1,A=0,R=new d.ia(0),F=new l,N=new d.l,B=new d.l,q=new d.l;v.A(N),_.A(B),N.W(c,c),B.W(c,c),q.K(N),q.Ea(B),v=null,p!=null&&(v=new d.h);var U=B=B=null,K=_.Bb;for(K!=null?(B=K.Fb,U=K.zo,B==null&&(B=d.ta.jj(_,q))):B=d.ta.jj(_,q),_=B.getIterator(),K=null,U!=null&&(K=U.getIterator());s.$a();)for(U=0;s.Ha();){var X=s.ha();if(X.A(N),N.isIntersecting(q)){if(K!=null&&(K.Xi(N,c),K.next()==-1))continue;var te=X.Qb();_.Uo(X,c);for(var ae=_.next();ae!=-1;ae=_.next()){var ge=B.ja(ae);a.Vb(ge);var Ee=a.ha(),Ae=Ee.Qb(),Me=X.Ea(Ee,null,x,T,c);if(0<Me){ae=x[0],C=T[0];var He=Me==2?x[1]:NaN,Ie=Me==2?T[1]:NaN;if(Me==2){if(te*(He-ae)>c)return 1;var dt=te*(He-ae);if(a.Ha()){if(Ee=a.ha(),(Me=X.Ea(Ee,null,x,null,c))==2){Me=x[0];var ut=x[1];if(dt+(Me=te*(ut-Me))>c)return 1}a.Vb(ge),a.ha()}if(!a.vm()){if(a.li(),Ee=a.li(),(Me=X.Ea(Ee,null,x,null,c))==2&&(Me=x[0],dt+(Me=te*((ut=x[1])-Me))>c))return 1;a.Vb(ge),a.ha()}if(s.Ha()){if(ge=s.wb(),(Me=(X=s.ha()).Ea(Ee,null,x,null,c))==2&&(Me=x[0],dt+(Me=te*((ut=x[1])-Me))>c))return 1;s.Vb(ge),s.ha()}if(!s.vm()){if(ge=s.wb(),s.li(),(Me=(X=s.li()).Ea(Ee,null,x,null,c))==2&&(Me=x[0],dt+(Me=Ae*((ut=x[1])-Me))>c))return 1;s.Vb(ge),s.ha()}Ee=S.construct(s.wb(),s.gb,ae,He,a.wb(),a.gb,C,Ie),F.rh.push(Ee),R.add(R.size)}C=0,p!=null&&(X.hc(ae,v),p.add(v.x),p.add(v.y))}}if(A<F.rh.length){for(R.Vd(A,R.size,y),X=0,ae=F.rh[R.get(A)].Mm;A<F.rh.length;A++)if(!((Ee=F.rh[R.get(A)]).Kj<X&&Ee.Si<X))if(te*(Ee.Kj-X)>c)U=te*(Ee.Si-Ee.Kj),X=Ee.Si,ae=Ee.Mm;else{if(Ee.Mm!=ae?(U=te*(Ee.Si-Ee.Kj),ae=Ee.Mm):U+=te*(Ee.Si-Ee.Kj),U>c)return 1;if((X=Ee.Si)==1)break}te*(1-X)>c&&(U=0),A=0,R.resize(0),F.rh.length=0}}}return C},l.UG=function(s,a,c){var p=s.Ga(),y=a.Ga();for(s=new d.Zl(s,a,c,!1);s.next();){a=s.nl();var v=s.hl();if(p.Vb(a),y.Vb(v),a=p.ha(),0<y.ha().Ea(a,null,null,null,c))return!0}return!1},l.VG=function(s,a,c,p){var y=s.Ga(),v=new d.l,_=new d.l,x=new d.l;s.A(v),a.A(_),v.W(c,c),v.contains(_),_.W(c,c),x.K(v),x.Ea(_),(v=s.Bb)!=null?(v=v.Fb)==null&&(v=d.ta.jj(s,x)):v=d.ta.jj(s,x),s=v.getIterator();for(var T=new d.h,C=new d.h,A=c*c,R=0;R<a.I();R++)if(a.D(R,T),x.contains(T)){_.K(T.x,T.y,T.x,T.y),s.Xi(_,c);for(var F=!1,N=s.next();N!=-1;N=s.next())if(y.Vb(v.ja(N)),(N=y.ha()).hc(N.fe(T,!1),C),d.h.yc(C,T)<=A){F=!0;break}if(p){if(!F)return!1}else if(F)return!0}return!!p},l.Yz=function(s,a,c){var p=new d.h,y=c*c,v=s.Ga();if((s=s.Bb)!=null&&(s=s.Fb)!=null){var _=new d.l;for(_.K(a),_=(c=s.MF(_,c)).next();_!=-1;_=c.next())if(v.Vb(s.ja(_)),v.Ha()){var x=(_=v.ha()).fe(a,!1);if(_.hc(x,p),d.h.yc(a,p)<=y)return!0}return!1}for(s=new d.l;v.$a();)for(;v.Ha();)if((_=v.ha()).A(s),s.W(c,c),s.contains(a)&&(x=_.fe(a,!1),_.hc(x,p),d.h.yc(a,p)<=y))return!0;return!1},l.SG=function(s,a,c){return l.Yz(s,a,c)&&!l.Zz(s,a,c)},l.Zz=function(s,a,c){return s=s.mg(),!l.kt(s,a,c)},l.TG=function(s,a,c){if(s.tm()){var p=new d.yb(a.v,a.G,a.v,a.H),y=new d.yb(a.v,a.H,a.C,a.H),v=new d.yb(a.C,a.H,a.C,a.G);for(a=new d.yb(a.C,a.G,a.v,a.G),s=s.Ga();s.$a();)for(;s.Ha();){var _=s.ha();if(_.isIntersecting(p,c)||_.isIntersecting(y,c)||_.isIntersecting(v,c)||_.isIntersecting(a,c))return!0}}else{(p=new d.l).K(a),p.W(c,c),c=s.ub(0),y=new d.h,v=new d.h,a=new d.h,_=new d.h;for(var x=0,T=s.da();x<T;x++)for(var C=!0,A=s.Ba(x),R=s.Vc(x);A<R;A++)if(C)c.tc(2*A,v),C=!1;else{if(c.tc(2*A,y),a.L(v),_.L(y),p.zy(a,_)!=0)return!0;v.L(y)}}return!1},l.qc=function(s,a,c){var p=s.getType(),y=a.getType();if(d.aa.xj(p)){var v=s.Bb;if(v!=null&&(v=v.Fk)!=null)if(y==33){var _=a.D();if((_=v.So(_.x,_.y))==1)return 1;if(_==0)return 4}else{if(_=new d.l,a.A(_),(_=v.Ro(_))==1)return 1;if(_==0)return 4;if(c&&d.aa.xj(y)&&l.HE(a,v))return 1073741824}}if(d.aa.xj(y)&&(v=a.Bb)!=null&&(v=v.Fk)!=null)if(p==33){if(s=s.D(),(_=v.So(s.x,s.y))==1)return 2;if(_==0)return 4}else{if(a=new d.l,s.A(a),(_=v.Ro(a))==1)return 2;if(_==0)return 4;if(c&&d.aa.xj(p)&&l.HE(s,v))return 1073741824}return 0},l.HE=function(s,a){for(var c=s.I(),p=new d.h,y=0;y<c;y++)if(s.D(y,p),a.So(p.x,p.y)==1)return!0;return!1},l.II=function(s,a,c,p){for(var y=1<=s.om(0)&&1<=a.om(0),v=s.Ga(),_=a.Ga(),x=[0,0],T=[0,0],C=new d.Zl(s,a,c,!1),A=!1;C.next();){var R=C.nl(),F=C.hl();if(v.Vb(R),_.Vb(F),R=v.ha(),(F=_.ha().Ea(R,null,T,x,c))==2){if(A=x[0],F=x[1],R=R.Qb(),y&&(F-A)*R>c)return!1;A=!0}else if(F!=0){if(A=x[0],R=T[0],0<A&&1>A&&0<R&&1>R)return!1;A=!0}}return!!A&&(v=new d.l,_=new d.l,y=new d.l,s.A(v),a.A(_),v.W(1e3*c,1e3*c),_.W(1e3*c,1e3*c),y.K(v),y.Ea(_),!(10<s.I()&&(s=d.Ud.clip(s,y,c,0),s.B())||10<a.I()&&(a=d.Ud.clip(a,y,c,0),a.B()))&&d.am.rt(s,a,c,"F********",p))},l.FI=function(s,a,c,p){var y=1<=s.om(0)&&1<=a.om(0),v=new d.l,_=new d.l,x=new d.l;s.A(v),a.A(_);for(var T=!1,C=l.ls(v,_,c),A=l.ls(_,v,c),R=s.Ga(),F=a.Ga(),N=[0,0],B=[0,0],q=new d.Zl(s,a,c,!1);q.next();){var U=q.nl(),K=q.hl();if(R.Vb(U),F.Vb(K),K=R.ha(),(U=F.ha().Ea(K,null,B,N,c))==2){U=N[0];var X=N[1];if(K=K.Qb(),y&&(X-U)*K>c&&(T=!0,C&&A))return!0}else if(U!=0&&(U=N[0],K=B[0],0<U&&1>U&&0<K&&1>K))return!0}if(y=new d.l,R=new d.l,y.K(v),y.W(1e3*c,1e3*c),R.K(_),R.W(1e3*c,1e3*c),x.K(y),x.Ea(R),v="",v=T?v+"**":v+"T*",C){if(10<a.I()&&(a=d.Ud.clip(a,x,c,0)).B())return!1;v+="****"}else v+="T***";if(A){if(10<s.I()&&(s=d.Ud.clip(s,x,c,0)).B())return!1;v+="***"}else v+="T**";return d.am.rt(s,a,c,v.toString(),p)},l.BI=function(s,a,c,p){var y=[!1],v=l.zI(s,a,c,y);return y[0]?v:(y=new d.l,a.A(y),y.W(1e3*c,1e3*c),!(10<s.I()&&(s=d.Ud.clip(s,y,c,0),s.B()))&&d.am.Sw(s,a,c,p))},l.zI=function(s,a,c,p){p[0]=!1;for(var y=s.Ga(),v=a.Ga(),_=[0,0],x=[0,0],T=new d.Zl(s,a,c,!1),C=!1;T.next();){var A=T.nl(),R=T.hl();if(y.Vb(A,-1),v.Vb(R,-1),A=y.ha(),(A=v.ha().Ea(A,null,x,_,c))!=0&&(C=!0,A==1&&(A=_[0],R=x[0],0<A&&1>A&&0<R&&1>R)))return p[0]=!0,!1}if(!C){for(p[0]=!0,_=new d.l,s.A(_),_.W(c,c),T=s,C=!1,x=new d.l,p=0,y=a.da();p<y;p++)if(0<a.Ja(p)){if(a.Rj(p,x),!_.isIntersecting(x)||(v=a.Na(a.Ba(p)),(v=d.Dg.wm(T,v,0))==0))return!1;C||(!d.Dg.Ml(s,a.da()-1)||s.Bb!=null&&s.Bb.Fb!=null?T=s:(v=new d.Da,s.copyTo(v),v.fj(1),T=v),C=!0)}if(s.da()==1||a.getType()==1607)return!0;for(_=new d.l,a.A(_),_.W(c,c),x=a,T=!1,c=new d.l,p=0,y=s.da();p<y;p++)if(0<s.Ja(p)){if(s.Rj(p,c),_.isIntersecting(c)&&(v=s.Na(s.Ba(p)),(v=d.Dg.wm(x,v,0))==1))return!1;T||(!d.Dg.Ml(a,s.da()-1)||a.Bb!=null&&a.Bb.Fb!=null?x=a:(v=new d.Da,a.copyTo(v),v.fj(1),x=v),T=!0)}return!0}return!1},l.JI=function(s,a,c,p){for(var y=s.Ga(),v=a.Ga(),_=[0,0],x=[0,0],T=new d.Zl(s,a,c,!1),C=!1;T.next();){var A=T.nl(),R=T.hl();if(y.Vb(A),v.Vb(R),A=y.ha(),(A=v.ha().Ea(A,null,x,_,c))==2)C=!0;else if(A!=0){if(C=_[0],A=x[0],0<C&&1>C&&0<A&&1>A)return!1;C=!0}}return!!C&&(v=new d.l,_=new d.l,y=new d.l,s.A(v),a.A(_),v.W(1e3*c,1e3*c),_.W(1e3*c,1e3*c),y.K(v),y.Ea(_),!(10<s.I()&&(s=d.Ud.clip(s,y,c,0),s.B())||10<a.I()&&(a=d.Ud.clip(a,y,c,0),a.B()))&&d.am.$m(s,a,c,"F********",p))},l.DI=function(s,a,c,p){for(var y=s.Ga(),v=a.Ga(),_=[0,0],x=[0,0],T=new d.Zl(s,a,c,!1),C=!1;T.next();){var A=T.nl(),R=T.hl();if(y.Vb(A),v.Vb(R),A=y.ha(),(A=v.ha().Ea(A,null,x,_,c))==2)C=!0;else if(A!=0){if(C=_[0],A=x[0],0<C&&1>C&&0<A&&1>A)return!0;C=!0}}return!!C&&(v=new d.l,_=new d.l,x=new d.l,T=new d.l,y=new d.l,s.A(v),a.A(_),l.ls(_,v,c)?(x.K(v),x.W(1e3*c,1e3*c),T.K(_),T.W(1e3*c,1e3*c),y.K(x),y.Ea(T),!(10<s.I()&&(s=d.Ud.clip(s,y,c,0),s.B())||10<a.I()&&(a=d.Ud.clip(a,y,c,0),a.B()))&&(c=d.am.$m(s,a,c,"T********",p))):c=d.am.$m(s,a,c,"T*****T**",p))},l.CI=function(s,a,c,p){var y=[!1],v=l.zI(s,a,c,y);return y[0]?v:(y=new d.l,a.A(y),y.W(1e3*c,1e3*c),!(10<s.I()&&(s=d.Ud.clip(s,y,c,0),s.B()))&&d.am.fB(s,a,c,p))},l.AI=function(s,a,c){return d.hd.Yd(s,a,c)==1},l.HI=function(s,a,c){return d.hd.Yd(s,a,c)==2},l.kt=function(s,a,c){var p=new d.h;c*=c;for(var y=0;y<s.I();y++)if(s.D(y,p),d.h.yc(p,a)<=c)return!1;return!0},l.prototype.QE=function(s,a){return s=this.rh[s],a=this.rh[a],s.Mm<a.Mm||s.Mm==a.Mm&&(s.pw<a.pw||s.pw==a.pw&&(s.Kj<a.Kj||s.Kj==a.Kj&&(s.Si<a.Si||s.Si==a.Si&&s.BH<a.BH)))?-1:1},l}();d.ud=h}(Y||(Y={})),function(d){var O,S,h;(S=O||(O={}))[S.InteriorInterior=0]="InteriorInterior",S[S.InteriorBoundary=1]="InteriorBoundary",S[S.InteriorExterior=2]="InteriorExterior",S[S.BoundaryInterior=3]="BoundaryInterior",S[S.BoundaryBoundary=4]="BoundaryBoundary",S[S.BoundaryExterior=5]="BoundaryExterior",S[S.ExteriorInterior=6]="ExteriorInterior",S[S.ExteriorBoundary=7]="ExteriorBoundary",S[S.ExteriorExterior=8]="ExteriorExterior",function(l){l[l.AreaAreaPredicates=0]="AreaAreaPredicates",l[l.AreaLinePredicates=1]="AreaLinePredicates",l[l.LineLinePredicates=2]="LineLinePredicates",l[l.AreaPointPredicates=3]="AreaPointPredicates",l[l.LinePointPredicates=4]="LinePointPredicates",l[l.PointPointPredicates=5]="PointPointPredicates"}(h||(h={})),O=function(){function l(){this.le=0,this.j=new d.iu,this.J=[0,0,0,0,0,0,0,0,0],this.Za=[0,0,0,0,0,0,0,0,0],this.ea=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Sm=this.vw=-1}return l.yB=function(s,a,c,p,y){if(p.length!=9)throw d.i.fa("relation string length has to be 9 characters");for(var v=0;9>v;v++){var _=p.charAt(v);if(_!="*"&&_!="T"&&_!="F"&&_!="0"&&_!="1"&&_!="2")throw d.i.fa("relation string")}if((v=this.MR(p,s.Db(),a.Db()))!=0)return d.ud.zB(s,a,c,v,y);v=new d.l,s.A(v),_=new d.l,a.A(_);var x=new d.l;if(x.K(v),x.Zb(_),c=d.ta.Wd(c,x,!1),s=this.WE(s,c),a=this.WE(a,c),s.B()||a.B())return this.uW(s,a,p);switch(v=s.getType(),_=a.getType(),x=!1,v){case 1736:switch(_){case 1736:x=this.rt(s,a,c,p,y);break;case 1607:x=this.$m(s,a,c,p,y);break;case 33:x=this.qt(s,a,c,p);break;case 550:x=this.pt(s,a,c,p,y)}break;case 1607:switch(_){case 1736:x=this.$m(a,s,c,this.Zp(p),y);break;case 1607:x=this.gB(s,a,c,p,y);break;case 33:x=this.tt(s,a,c,p,y);break;case 550:x=this.st(s,a,c,p,y)}break;case 33:switch(_){case 1736:x=this.qt(a,s,c,this.Zp(p));break;case 1607:x=this.tt(a,s,c,this.Zp(p),y);break;case 33:x=this.$U(s,a,c,p);break;case 550:x=this.lt(a,s,c,this.Zp(p))}break;case 550:switch(_){case 1736:x=this.pt(a,s,c,this.Zp(p),y);break;case 1607:x=this.st(a,s,c,this.Zp(p),y);break;case 550:x=this.ZA(s,a,c,p,y);break;case 33:x=this.lt(s,a,c,p)}break;default:x=!1}return x},l.rt=function(s,a,c,p,y){var v=new l;v.Yi(),v.bj(p),v.xJ();var _=new d.l,x=new d.l;return s.A(_),a.A(x),p=!1,d.ud.dk(_,x,c)&&(v.Cu(s,a),p=!0),p||((_=d.ud.qc(s,a,!1))==4?(v.Cu(s,a),p=!0):_==1?(v.ly(a),p=!0):_==2&&(v.ZD(s),p=!0)),p||(s=(p=new d.gd).Ib(s),a=p.Ib(a),v.Wo(p,c,y),v.Bp(s,a),v.j.Ug()),l.fg(v.J,v.Xc)},l.Sw=function(s,a,c,p){var y=new l;y.Yi(),y.bj("T*****F**"),y.xJ();var v=new d.l,_=new d.l;s.A(v),a.A(_);var x=!1;return d.ud.dk(v,_,c)&&(y.Cu(s,a),x=!0),x||((v=d.ud.qc(s,a,!1))==4?(y.Cu(s,a),x=!0):v==1?(y.ly(a),x=!0):v==2&&(y.ZD(s),x=!0)),x?this.fg(y.J,y.Xc):(s=(x=new d.gd).Ib(s),v=x.Ib(a),d.Tk.V(x,c,p,!1),c=x.Ne(v).mg(),x.Gp(0,!0,!0),d.rn.V(x,s,-1,!1,p),x.I(s)!=0&&(d.rn.V(x,v,-1,!1,p),y.er(x,p),(a=x.I(v)==0)||(y.Bp(s,v),y.j.Ug(),v=this.fg(y.J,y.Xc))?(s=x.Ne(s),s=(x=new d.gd).Ib(s),v=x.Ib(c),y.er(x,p),y.le=0,y.Yi(),y.bj(a?"T*****F**":"******F**"),y.IB(),y.Bp(s,v),y.j.Ug(),this.fg(y.J,y.Xc)):v))},l.$m=function(s,a,c,p,y){var v=new l;v.Yi(),v.bj(p),v.IB();var _=new d.l,x=new d.l;return s.A(_),a.A(x),p=!1,d.ud.dk(_,x,c)&&(v.Du(s,a),p=!0),p||((_=d.ud.qc(s,a,!1))==4?(v.Du(s,a),p=!0):_==1&&(v.$D(a),p=!0)),p||(s=(p=new d.gd).Ib(s),a=p.Ib(a),v.Wo(p,c,y),v.kh=v.j.Dp(),l.Jw(a,v.j,v.kh),v.Bp(s,a),v.j.Ep(v.kh),v.j.Ug()),l.fg(v.J,v.Xc)},l.fB=function(s,a,c,p){var y=new l;y.Yi(),y.bj("T*****F**"),y.IB();var v=new d.l,_=new d.l;s.A(v),a.A(_);var x=!1;return d.ud.dk(v,_,c)&&(y.Du(s,a),x=!0),x||((v=d.ud.qc(s,a,!1))==4?(y.Du(s,a),x=!0):v==1&&(y.$D(a),x=!0)),x?this.fg(y.J,y.Xc):(s=(x=new d.gd).Ib(s),a=x.Ib(a),y.Wo(x,c,p),x.I(s)!=0&&(y.Bp(s,a),y.j.Ug(),this.fg(y.J,y.Xc)))},l.pt=function(s,a,c,p,y){var v=new l;v.Yi(),v.bj(p),v.yJ();var _=new d.l,x=new d.l;return s.A(_),a.A(x),p=!1,d.ud.dk(_,x,c)&&(v.Eu(s),p=!0),p||((_=d.ud.qc(s,a,!1))==4?(v.Eu(s),p=!0):_==1&&(v.zN(),p=!0)),p||(s=(p=new d.gd).Ib(s),a=p.Ib(a),v.Wo(p,c,y),v.Gy(s,a),v.j.Ug()),l.fg(v.J,v.Xc)},l.gB=function(s,a,c,p,y){var v=new l;v.Yi(),v.bj(p),v.eX(),p=new d.l;var _=new d.l;s.A(p),a.A(_);var x=!1;return d.ud.dk(p,_,c)&&(v.PG(s,a),x=!0),x||d.ud.qc(s,a,!1)!=4||(v.PG(s,a),x=!0),x||(s=(p=new d.gd).Ib(s),a=p.Ib(a),v.Wo(p,c,y),v.Yh=v.j.Dp(),v.kh=v.j.Dp(),l.Jw(s,v.j,v.Yh),l.Jw(a,v.j,v.kh),v.Bp(s,a),v.j.Ep(v.Yh),v.j.Ep(v.kh),v.j.Ug()),l.fg(v.J,v.Xc)},l.st=function(s,a,c,p,y){var v=new l;v.Yi(),v.bj(p),v.MJ(),p=new d.l;var _=new d.l;s.A(p),a.A(_);var x=!1;return d.ud.dk(p,_,c)&&(v.Vz(s),x=!0),x||d.ud.qc(s,a,!1)!=4||(v.Vz(s),x=!0),x||(s=(p=new d.gd).Ib(s),a=p.Ib(a),v.Wo(p,c,y),v.Yh=v.j.Dp(),l.Jw(s,v.j,v.Yh),v.Gy(s,a),v.j.Ep(v.Yh),v.j.Ug()),l.fg(v.J,v.Xc)},l.ZA=function(s,a,c,p,y){var v=new l;v.Yi(),v.bj(p),v.RJ(),p=new d.l;var _=new d.l;s.A(p),a.A(_);var x=!1;return d.ud.dk(p,_,c)&&(v.yI(),x=!0),x||(s=(p=new d.gd).Ib(s),a=p.Ib(a),v.Wo(p,c,y),v.Gy(s,a),v.j.Ug()),l.fg(v.J,v.Xc)},l.qt=function(s,a,c,p){var y=new l;y.Yi(),y.bj(p),y.yJ();var v=new d.l;s.A(v),a=a.D();var _=!1;return d.ud.Rw(a,v,c)&&(y.Eu(s),_=!0),_||((c=d.hd.Yd(s,a,c))==1?(y.J[0]=0,y.J[2]=2,y.J[3]=-1,y.J[5]=1,y.J[6]=-1):c==2?(y.J[6]=-1,s.Ke()!=0?(y.J[0]=-1,y.J[3]=0,y.J[2]=2,y.J[5]=1):(y.J[0]=0,y.J[3]=-1,y.J[5]=-1,c=new d.l,s.A(c),y.J[2]=c.ca()==0&&c.R()==0?-1:1)):y.Eu(s)),this.fg(y.J,p)},l.tt=function(s,a,c,p,y){var v=new l;v.Yi(),v.bj(p),v.MJ();var _=new d.l;s.A(_),p=a.D();var x=!1;if(d.ud.Rw(p,_,c)&&(v.Vz(s),x=!0),!x){_=null;var T=x=!1;(v.ea[0]||v.ea[6])&&(d.ud.Yz(s,p,c)?(v.ea[0]&&(_=d.pi.gm(s,y),T=!d.ud.kt(_,p,c),x=!0,v.J[0]=T?-1:0),v.J[6]=-1):(v.J[0]=-1,v.J[6]=0)),v.ea[3]&&(_!=null&&_.B()?v.J[3]=-1:(x||(_==null&&(_=d.pi.gm(s,y)),T=!d.ud.kt(_,p,c),x=!0),v.J[3]=T?0:-1)),v.ea[5]&&(_!=null&&_.B()?v.J[5]=-1:x&&!T?v.J[5]=0:(_==null&&(_=d.pi.gm(s,y)),y=d.ud.Nw(_,a,c),v.J[5]=y?-1:0)),v.ea[2]&&(s.Qb()!=0?v.J[2]=1:((y=new d.de(s.description)).Fd(s,0,s.I()),s=d.ud.Nw(y,a,c),v.J[2]=s?-1:0))}return this.fg(v.J,v.Xc)},l.lt=function(s,a,c,p){var y=new l;y.Yi(),y.bj(p),y.RJ();var v=new d.l;s.A(v),a=a.D();var _=!1;if(d.ud.Rw(a,v,c)&&(y.yI(),_=!0),!_){v=!1,_=!0,c*=c;for(var x=0;x<s.I();x++){var T=s.Na(x);if(d.h.yc(T,a)<=c?v=!0:_=!1,v&&!_)break}v?(y.J[0]=0,y.J[2]=_?-1:0,y.J[6]=-1):(y.J[0]=-1,y.J[2]=0,y.J[6]=0)}return l.fg(y.J,p)},l.$U=function(s,a,c,p){s=s.D(),a=a.D();for(var y=[],v=0;9>v;v++)y[v]=-1;return d.h.yc(s,a)<=c*c?y[0]=0:(y[2]=0,y[6]=0),y[8]=2,l.fg(y,p)},l.fg=function(s,a){for(var c=0;9>c;c++)switch(a.charAt(c)){case"T":if(s[c]==-1)return!1;break;case"F":if(s[c]!=-1)return!1;break;case"0":if(s[c]!=0)return!1;break;case"1":if(s[c]!=1)return!1;break;case"2":if(s[c]!=2)return!1}return!0},l.uW=function(s,a,c){var p=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(s.B()&&a.B()){for(var y=0;9>y;y++)p[y]=-1;return this.fg(p,c)}return y=!1,s.B()&&(s=a,y=!0),p[0]=-1,p[1]=-1,p[3]=-1,p[4]=-1,p[6]=-1,p[7]=-1,p[8]=2,a=s.getType(),d.aa.Hc(a)?a==1736?s.Ke()!=0?(p[2]=2,p[5]=1):(p[5]=-1,a=new d.l,s.A(a),p[2]=a.ca()==0&&a.R()==0?0:1):(a=s.Qb()!=0,p[2]=a?1:0,p[5]=d.pi.aq(s)?0:-1):(p[2]=0,p[5]=-1),y&&this.vK(p),this.fg(p,c)},l.MR=function(s,a,c){return l.dQ(s)?3:l.UP(s)?4:l.cY(s,a,c)?8:l.CP(s,a,c)?16:l.eP(s)?1:l.EU(s,a,c)?32:0},l.dQ=function(s){return s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="F"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="F"&&s.charAt(6)=="F"&&s.charAt(7)=="F"&&s.charAt(8)=="*"},l.UP=function(s){return s.charAt(0)=="F"&&s.charAt(1)=="F"&&s.charAt(2)=="*"&&s.charAt(3)=="F"&&s.charAt(4)=="F"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*"},l.cY=function(s,a,c){return(a!=0||c!=0)&&((a!=2||c!=2)&&(s.charAt(0)=="F"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="T"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*"||a==1&&c==1&&s.charAt(0)=="F"&&s.charAt(1)=="T"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*")||c!=0&&s.charAt(0)=="F"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="T"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*")},l.CP=function(s,a,c){return a>c?s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="T"&&s.charAt(7)=="*"&&s.charAt(8)=="*":a==1&&c==1&&s.charAt(0)=="0"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*"},l.eP=function(s){return s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="F"&&s.charAt(7)=="F"&&s.charAt(8)=="*"},l.EU=function(s,a,c){if(a==c){if(a!=1)return s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="T"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="T"&&s.charAt(7)=="*"&&s.charAt(8)=="*";if(s.charAt(0)=="1"&&s.charAt(1)=="*"&&s.charAt(2)=="T"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="T"&&s.charAt(7)=="*"&&s.charAt(8)=="*")return!0}return!1},l.Jw=function(s,a,c){s=a.La(s);for(var p=a.Re;p!=-1;p=a.Rf(p))if(a.xd(p)&s){var y=a.Me(p);if(y==-1)a.nn(p,c,0);else{var v=y,_=0;do a.dh(v)&s&&_++,v=a.jc(a.xa(v));while(v!=y);a.nn(p,c,_)}}},l.Zp=function(s){var a=""+s.charAt(0);return a+=s.charAt(3),a+=s.charAt(6),a+=s.charAt(1),a+=s.charAt(4),a+=s.charAt(7),a+=s.charAt(2),(a+=s.charAt(5))+s.charAt(8)},l.prototype.Yi=function(){for(var s=0;9>s;s++)this.J[s]=-2,this.Za[s]=-2},l.vK=function(s){var a=s[1],c=s[2],p=s[5];s[1]=s[3],s[2]=s[6],s[5]=s[7],s[3]=a,s[6]=c,s[7]=p},l.prototype.bj=function(s){for(this.Xc=s,s=0;9>s;s++)this.Xc.charAt(s)!="*"?(this.ea[s]=!0,this.le++):this.ea[s]=!1},l.prototype.UJ=function(){for(var s=0;9>s;s++)this.ea[s]&&this.J[s]==-2&&(this.J[s]=-1,this.ea[s]=!1)},l.prototype.pc=function(s){return this.J[s]!=-2&&(this.J[s]==-1?(this.ea[s]=!1,this.le--,!0):this.Xc.charAt(s)!="T"&&this.Xc.charAt(s)!="F"?!(this.J[s]<this.Za[s])&&(this.ea[s]=!1,this.le--,!0):(this.ea[s]=!1,this.le--,!0))},l.prototype.xJ=function(){this.vw=0,this.Za[0]=2,this.Za[1]=1,this.Za[2]=2,this.Za[3]=1,this.Za[4]=1,this.Za[5]=1,this.Za[6]=2,this.Za[7]=1,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},l.prototype.IB=function(){this.vw=1,this.Sm=3,this.Za[0]=1,this.Za[1]=0,this.Za[2]=2,this.Za[3]=1,this.Za[4]=0,this.Za[5]=1,this.Za[6]=1,this.Za[7]=0,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},l.prototype.eX=function(){this.vw=2,this.Sm=4,this.Za[0]=1,this.Za[1]=0,this.Za[2]=1,this.Za[3]=0,this.Za[4]=0,this.Za[5]=0,this.Za[6]=1,this.Za[7]=0,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},l.prototype.yJ=function(){this.Sm=3,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=2,this.Za[3]=0,this.Za[4]=-1,this.Za[5]=1,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},l.prototype.MJ=function(){this.Sm=4,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=1,this.Za[3]=0,this.Za[4]=-1,this.Za[5]=0,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},l.prototype.RJ=function(){this.Sm=5,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=0,this.Za[3]=-1,this.Za[4]=-1,this.Za[5]=-1,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[3]&&(this.J[3]=-1,this.ea[3]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[5]&&(this.J[5]=-1,this.ea[5]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},l.prototype.xN=function(s,a,c){var p=!0;return this.ea[0]&&(this.CS(s,a,c),p=p&&this.pc(0)),this.ea[1]&&(this.sG(s,a,1),p=p&&this.pc(1)),this.ea[2]&&(this.tG(s,a,c,2),p=p&&this.pc(2)),this.ea[3]&&(this.sG(s,c,3),p=p&&this.pc(3)),this.ea[4]&&(this.BN(s,a,c),p=p&&this.pc(4)),this.ea[5]&&(this.eE(s,c,5),p=p&&this.pc(5)),this.ea[6]&&(this.tG(s,c,a,6),p=p&&this.pc(6)),this.ea[7]&&(this.eE(s,a,7),p=p&&this.pc(7)),p},l.prototype.Cu=function(s,a){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Fr(s,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5)),this.Fr(a,this.ea[6]?6:-1,this.Xc.charAt(6),this.ea[7]?7:-1,this.Xc.charAt(7))},l.prototype.Fr=function(s,a,c,p,y){a==-1&&p==-1||((c!="T"&&c!="F"&&a!=-1||y!="T"&&y!="F"&&p!=-1)&&s.Ke()==0?(p!=-1&&(this.J[p]=-1),a!=-1&&(c=new d.l,s.A(c),this.J[a]=c.ca()==0&&c.R()==0?0:1)):(a!=-1&&(this.J[a]=2),p!=-1&&(this.J[p]=1)))},l.prototype.ly=function(s){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Fr(s,this.ea[0]?0:-1,this.Xc.charAt(0),this.ea[1]?1:-1,this.Xc.charAt(1))},l.prototype.ZD=function(s){this.ly(s),l.vK(this.J)},l.prototype.Du=function(s,a){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.ea[6]){var c=this.Xc.charAt(6);c=c=="T"||c=="F"||a.Qb()!=0,this.J[6]=c?1:0}this.ea[7]&&(a=d.pi.aq(a),this.J[7]=a?0:-1),this.Fr(s,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5))},l.prototype.$D=function(s){if(this.ea[0]){var a=this.Xc.charAt(0);a=a=="T"||a=="F"||s.Qb()!=0,this.J[0]=a?1:0}this.ea[1]&&(s=d.pi.aq(s),this.J[1]=s?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},l.prototype.Eu=function(s){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Fr(s,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5))},l.prototype.zN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},l.prototype.PG=function(s,a){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.ea[2]){var c=this.Xc.charAt(2);c=c=="T"||c=="F"||s.Qb()!=0,this.J[2]=c?1:0}this.ea[5]&&(s=d.pi.aq(s),this.J[5]=s?0:-1),this.ea[6]&&(c=(c=this.Xc.charAt(6))=="T"||c=="F"||a.Qb()!=0,this.J[6]=c?1:0),this.ea[7]&&(a=d.pi.aq(a),this.J[7]=a?0:-1)},l.prototype.Vz=function(s){if(this.J[0]=-1,this.J[3]=-1,this.ea[2]){var a=this.Xc.charAt(2);a=a=="T"||a=="F"||s.Qb()!=0,this.J[2]=a?1:0}this.ea[5]&&(s=d.pi.aq(s),this.J[5]=s?0:-1),this.J[6]=0},l.prototype.yI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},l.prototype.yN=function(s,a,c){var p=!0;return this.ea[0]&&(this.DS(s,a),p=p&&this.pc(0)),this.ea[1]&&(this.zS(s,a,c,this.kh),p=p&&this.pc(1)),this.ea[2]&&(this.AS(s,a),p=p&&this.pc(2)),this.ea[3]&&(this.FN(s,a,c,this.kh),p=p&&this.pc(3)),this.ea[4]&&(this.CN(s,a,c,this.kh),p=p&&this.pc(4)),this.ea[5]&&(this.DN(s,a,c),p=p&&this.pc(5)),this.ea[6]&&(this.lQ(s,a),p=p&&this.pc(6)),this.ea[7]&&(this.kQ(s,a,c,this.kh),p=p&&this.pc(7)),p},l.prototype.mT=function(s,a,c){var p=!0;return this.ea[0]&&(this.GS(s,a,c,this.Yh,this.kh),p=p&&this.pc(0)),this.ea[1]&&(this.uG(s,a,c,this.Yh,this.kh,1),p=p&&this.pc(1)),this.ea[2]&&(this.vG(s,a,c,2),p=p&&this.pc(2)),this.ea[3]&&(this.uG(s,c,a,this.kh,this.Yh,3),p=p&&this.pc(3)),this.ea[4]&&(this.HN(s,a,c,this.Yh,this.kh),p=p&&this.pc(4)),this.ea[5]&&(this.fE(s,c,this.Yh,5),p=p&&this.pc(5)),this.ea[6]&&(this.vG(s,c,a,6),p=p&&this.pc(6)),this.ea[7]&&(this.fE(s,a,this.kh,7),p=p&&this.pc(7)),p},l.prototype.aE=function(s,a,c){var p=!0;return this.ea[0]&&(this.ES(s,a),p=p&&this.pc(0)),this.ea[2]&&(this.BS(s,a),p=p&&this.pc(2)),this.ea[3]&&(this.GN(s,a,c),p=p&&this.pc(3)),this.ea[5]&&(this.EN(s,a),p=p&&this.pc(5)),this.ea[6]&&(this.mQ(s,a),p=p&&this.pc(6)),p},l.prototype.QG=function(s,a,c){var p=!0;return this.ea[0]&&(this.HS(s,a,c,this.Yh),p=p&&this.pc(0)),this.ea[2]&&(this.FS(s,c),p=p&&this.pc(2)),this.ea[3]&&(this.JN(s,a,c,this.Yh),p=p&&this.pc(3)),this.ea[5]&&(this.IN(s,a,c,this.Yh),p=p&&this.pc(5)),this.ea[6]&&(this.nQ(s,a,c),p=p&&this.pc(6)),p},l.prototype.ZU=function(s,a,c){var p=!0;return this.ea[0]&&(this.IS(s,a,c),p=p&&this.pc(0)),this.ea[2]&&(this.wG(s,a,c,2),p=p&&this.pc(2)),this.ea[6]&&(this.wG(s,c,a,6),p=p&&this.pc(6)),p},l.prototype.CS=function(s,a,c){this.J[0]!=2&&(s=this.j.af(s))&a&&s&c&&(this.J[0]=2)},l.prototype.sG=function(s,a,c){if(this.J[c]!=1){var p=this.j.af(this.j.xa(s));this.j.af(s)&a&&p&a&&(this.J[c]=1)}},l.prototype.tG=function(s,a,c,p){this.J[p]!=2&&(s=this.j.af(s))&a&&!(s&c)&&(this.J[p]=2)},l.prototype.BN=function(s,a,c){if(this.J[4]!=1){var p=this.j.dh(s);p&a&&p&c?this.J[4]=1:this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1&&(s=this.j.xd(this.j.uf(s)))&a&&s&c&&(this.J[4]=0)}},l.prototype.eE=function(s,a,c){if(this.J[c]!=1){var p=this.j.af(this.j.xa(s));!(this.j.af(s)&a)&&!(p&a)&&(this.J[c]=1)}},l.prototype.DS=function(s,a){if(this.J[0]!=1){var c=this.j.af(this.j.xa(s));this.j.af(s)&a&&c&a&&(this.J[0]=1)}},l.prototype.zS=function(s,a,c,p){if(this.J[1]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1){var y=this.j.uf(s),v=this.j.xd(y);!(v&a)&&this.j.af(s)&a&&(s=this.j.ng(y,p),v&c&&s%2!=0&&(this.J[1]=0))}},l.prototype.AS=function(s,a){this.J[2]!=2&&this.j.dh(s)&a&&(this.J[2]=2)},l.prototype.FN=function(s,a,c,p){if(this.J[3]!=1){var y=this.j.dh(s);y&a&&y&c?this.J[3]=1:this.J[3]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1&&(y=this.j.uf(s),(s=this.j.xd(y))&a&&(a=this.j.ng(y,p),s&c&&a%2==0&&(this.J[3]=0)))}},l.prototype.CN=function(s,a,c,p){if(this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1){var y=this.j.uf(s);(s=this.j.xd(y))&a&&(a=this.j.ng(y,p),s&c&&a%2!=0&&(this.J[4]=0))}},l.prototype.DN=function(s,a,c){this.J[5]!=1&&(s=this.j.dh(s))&a&&!(s&c)&&(this.J[5]=1)},l.prototype.lQ=function(s,a){if(this.J[6]!=1){var c=this.j.af(this.j.xa(s));!(this.j.af(s)&a)&&!(c&a)&&(this.J[6]=1)}},l.prototype.kQ=function(s,a,c,p){if(this.J[7]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1){var y=this.j.uf(s),v=this.j.xd(y);!(v&a)&&!(this.j.af(s)&a)&&(s=this.j.ng(y,p),v&c&&s%2!=0&&(this.J[7]=0))}},l.prototype.GS=function(s,a,c,p,y){if(this.J[0]!=1){var v=this.j.dh(s);v&a&&v&c?this.J[0]=1:this.J[0]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1&&(s=this.j.uf(s),(v=this.j.xd(s))&a&&v&c&&(a=this.j.ng(s,p),y=this.j.ng(s,y),a%2==0&&y%2==0&&(this.J[0]=0)))}},l.prototype.uG=function(s,a,c,p,y,v){if(this.J[v]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1){s=this.j.uf(s);var _=this.j.xd(s);_&a&&_&c&&(a=this.j.ng(s,p),y=this.j.ng(s,y),a%2==0&&y%2!=0&&(this.J[v]=0))}},l.prototype.vG=function(s,a,c,p){this.J[p]!=1&&(s=this.j.dh(s))&a&&!(s&c)&&(this.J[p]=1)},l.prototype.HN=function(s,a,c,p,y){if(this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1){s=this.j.uf(s);var v=this.j.xd(s);v&a&&v&c&&(a=this.j.ng(s,p),y=this.j.ng(s,y),a%2!=0&&y%2!=0&&(this.J[4]=0))}},l.prototype.fE=function(s,a,c,p){this.J[p]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1&&(s=this.j.uf(s),!(this.j.xd(s)&a)&&this.j.ng(s,c)%2!=0&&(this.J[p]=0))},l.prototype.ES=function(s,a){this.J[0]!=0&&!(this.j.xd(s)&a)&&this.j.hk(this.j.cz(s))&a&&(this.J[0]=0)},l.prototype.BS=function(s,a){this.J[2]!=2&&this.j.xd(s)&a&&(this.J[2]=2)},l.prototype.GN=function(s,a,c){this.J[3]!=0&&(s=this.j.xd(s))&a&&s&c&&(this.J[3]=0)},l.prototype.EN=function(s,a){this.J[5]!=1&&this.j.xd(s)&a&&(this.J[5]=1)},l.prototype.mQ=function(s,a){this.J[6]!=0&&!(this.j.xd(s)&a)&&!(this.j.hk(this.j.cz(s))&a)&&(this.J[6]=0)},l.prototype.HS=function(s,a,c,p){if(this.J[0]!=0){var y=this.j.xd(s);y&a&&y&c&&this.j.ng(s,p)%2==0&&(this.J[0]=0)}},l.prototype.FS=function(s,a){this.J[2]!=1&&(this.j.Me(s)!=-1?this.J[2]=1:this.J[2]!=0&&!(this.j.xd(s)&a)&&(this.J[2]=0))},l.prototype.JN=function(s,a,c,p){if(this.J[3]!=0){var y=this.j.xd(s);y&a&&y&c&&this.j.ng(s,p)%2!=0&&(this.J[3]=0)}},l.prototype.IN=function(s,a,c,p){if(this.J[5]!=0){var y=this.j.xd(s);y&a&&!(y&c)&&this.j.ng(s,p)%2!=0&&(this.J[5]=0)}},l.prototype.nQ=function(s,a,c){this.J[6]!=0&&!((s=this.j.xd(s))&a)&&s&c&&(this.J[6]=0)},l.prototype.IS=function(s,a,c){this.J[0]!=0&&(s=this.j.xd(s))&a&&s&c&&(this.J[0]=0)},l.prototype.wG=function(s,a,c,p){this.J[p]!=0&&(s=this.j.xd(s))&a&&!(s&c)&&(this.J[p]=0)},l.prototype.Bp=function(s,a){var c=!1;s=this.j.La(s),a=this.j.La(a),this.Ui=this.j.$g();for(var p=this.j.Re;p!=-1;p=this.j.Rf(p)){var y=this.j.Me(p);if(y==-1){if(this.Sm!=-1)switch(this.Sm){case 3:c=this.aE(p,s,a);break;case 4:c=this.QG(p,s,a);break;default:throw d.i.fa("internal error")}}else{var v=y;do{var _=v;if(this.j.Ab(_,this.Ui)!=1)do{switch(this.vw){case 0:c=this.xN(_,s,a);break;case 1:c=this.yN(_,s,a);break;case 2:c=this.mT(_,s,a);break;default:throw d.i.fa("internal error")}if(c)break;this.j.Kb(_,this.Ui,1),_=this.j.jc(_)}while(_!=v&&!c);if(c)break;v=this.j.jc(this.j.xa(_))}while(v!=y);if(c)break}}c||this.UJ(),this.j.Jg(this.Ui)},l.prototype.Gy=function(s,a){var c=!1;s=this.j.La(s),a=this.j.La(a);for(var p=this.j.Re;p!=-1;p=this.j.Rf(p)){switch(this.Sm){case 3:c=this.aE(p,s,a);break;case 4:c=this.QG(p,s,a);break;case 5:c=this.ZU(p,s,a);break;default:throw d.i.Qa()}if(c)break}c||this.UJ()},l.prototype.er=function(s,a){this.j.dr(s,a)},l.prototype.Wo=function(s,a,c){this.YP(s,a,c),this.er(s,c)},l.prototype.YP=function(s,a,c){for(d.Tk.V(s,a,c,!1),s.Gp(0,!0,!0),a=s.ld;a!=-1;a=s.ue(a))s.ic(a)==1736&&d.rn.V(s,a,-1,!1,c)},l.WE=function(s,a){var c=s.getType();return d.aa.yd(c)?((a=new d.Ta(s.description)).oc(s,!0),a):c==197?(c=new d.l,s.A(c),c.ca()<=a&&c.R()<=a?(a=new d.Sa(s.description),s.sf(a),a):c.ca()<=a||c.R()<=a?(a=new d.Ta(s.description),c=new d.Sa,s.Hf(0,c),a.nf(c),s.Hf(2,c),a.lineTo(c),a):((a=new d.Da(s.description)).ad(s,!1),a)):s},l}(),d.am=O}(Y||(Y={})),function(d){var O=function(){function l(s){this.Em=new d.ia(0),this.dw=new d.ia(0),this.wt=new d.h,this.xt=new d.h,this.g=s,this.Hs=-1}return l.prototype.bc=function(s){return this.g.bc(this.zz(s))},l.prototype.Bv=function(s){var a=this.iz(s);if(s=this.HF(s),this.g.Ma(a)==s){var c=a;a=s,s=c}return this.g.Gc(a,this.wt),this.g.Gc(s,this.xt),this.wt.y<this.xt.y},l.prototype.zz=function(s){var a=this.iz(s);return s=this.HF(s),this.g.U(a)==s?a:s},l.prototype.iz=function(s){return this.Em.get(s)},l.prototype.HF=function(s){return this.dw.get(s)},l.prototype.rF=function(s){this.Em.set(s,this.Hs),this.Hs=s},l.prototype.nI=function(s){if(this.Hs!=-1){var a=this.Hs;return this.Hs=this.Em.get(a),this.Em.set(a,s),this.dw.set(a,this.g.U(s)),a}return this.Em==null&&(this.Em=new d.ia(0),this.dw=new d.ia(0)),a=this.Em.size,this.Em.add(s),this.dw.add(this.g.U(s)),a},l.prototype.rz=function(s){return this.g.bd(this.iz(s))},l}();d.yY=O;var S=function(){function l(s){this.Be=s,this.ie=new d.yb,this.Nm=new d.yb,this.CH=0,this.Ao=null,this.yA=-1}return l.prototype.compare=function(s,a,c){c=s.ja(c);var p=this.Be.hb;if(this.yA==a)var y=this.CH;else this.Ao=p.bc(a),this.Ao==null?((s=p.g).ed(p.zz(a),this.ie),this.Ao=this.ie,y=this.ie.Pe(this.Be.yh,0)):y=this.Ao.Pe(this.Be.yh,0),this.CH=y,this.yA=a;if((s=p.bc(c))==null){(s=p.g).ed(p.zz(c),this.Nm),s=this.Nm;var v=this.Nm.Pe(this.Be.yh,0)}else v=s.Pe(this.Be.yh,0);return y==v&&(a=p.Bv(a),c=p.Bv(c),(a=.5*((c=Math.min(a?this.Ao.la:this.Ao.na,c?s.la:s.na))+this.Be.yh))==this.Be.yh&&(a=c),y=this.Ao.Pe(a,0),v=s.Pe(a,0)),y<v?-1:y>v?1:0},l.prototype.reset=function(){this.yA=-1},l}(),h=function(){function l(){this.Wm=this.Gl=null,this.fb=new d.Yj,this.fb.RP(),this.$d=new S(this),this.fb.Vo(this.$d)}return l.prototype.HQ=function(){var s=!1;if(this.fw&&(s=this.IQ()),this.g.da(this.X)==1){var a=this.g.Ob(this.X);return s=this.g.wz(a),this.g.PB(a,!0),0>s&&(s=this.g.Xa(a),this.g.pJ(s),this.g.Wg(a,this.g.Ma(s)),!0)}for(this.El=this.g.Ky(),this.wo=this.g.Ky(),a=this.g.Ob(this.X);a!=-1;a=this.g.Rb(a))this.g.gr(a,this.El,0),this.g.gr(a,this.wo,-1);a=new d.ia(0),this.yh=NaN;var c=new d.h;this.et=this.g.da(this.X),this.ro=this.g.Gd(),this.Rs=this.g.Gd();for(var p=this.Gl.rc(this.Gl.je);p!=-1;p=this.Gl.lb(p)){var y=this.Gl.getData(p);if(this.g.Gc(y,c),c.y!=this.yh&&a.size!=0&&(s=this.ut(a)||s,this.$d.reset(),a.clear(!1)),a.add(y),this.yh=c.y,this.et==0)break}for(0<this.et&&(s=this.ut(a)||s,a.clear(!1)),this.g.Td(this.ro),this.g.Td(this.Rs),a=this.g.Ob(this.X);a!=-1;)if(this.g.sj(a,this.El)==3){for(this.g.PB(a,!0),c=a,a=this.g.sj(a,this.wo);a!=-1;)p=this.g.sj(a,this.wo),this.g.ZT(this.X,this.g.Rb(c),a),c=a,a=p;a=this.g.Rb(c)}else this.g.PB(a,!1),a=this.g.Rb(a);return this.g.CB(this.El),this.g.CB(this.wo),s},l.prototype.ut=function(s){return this.$V(s)},l.prototype.$V=function(s){var a=!1;this.hb==null&&(this.hb=new O(this.g)),this.Wm==null?(this.Wm=new d.ia(0),this.Wm.Jb(16)):this.Wm.clear(!1),this.ZV(s);for(var c=0,p=s.size;c<p;c++){var y=s.get(c);y!=-1&&this.oG(y,-1)}for(c=0;c<this.Wm.size&&0<this.et;c++)if(s=this.Wm.get(c),y=this.hb.rz(this.fb.ja(s)),p=-1,this.g.sj(y,this.El)==0){y=this.fb.we(s);for(var v,_=s;y!=-1;){var x=this.fb.ja(y),T=this.hb.rz(x),C=this.g.sj(T,this.El);if(C!=0){p=T;break}_=y,y=this.fb.we(y)}y==-1?(v=!0,y=_):(x=this.fb.ja(y),v=this.hb.Bv(x),y=this.fb.lb(y),v=!v);do{if(x=this.fb.ja(y),T=this.hb.rz(x),(C=this.g.sj(T,this.El))==0&&(v!=this.hb.Bv(x)&&(a=this.g.Xa(T),this.g.pJ(a),this.g.Wg(T,this.g.Ma(a)),a=!0),this.g.gr(T,this.El,v?3:2),v||(_=this.g.sj(p,this.wo),this.g.gr(p,this.wo,T),this.g.gr(T,this.wo,_)),this.et--,this.et==0))return a;p=T,_=y,y=this.fb.lb(y),v=!v}while(_!=s)}return a},l.prototype.ZV=function(s){for(var a=0,c=s.size;a<c;a++){var p=s.get(a),y=this.g.Pa(p,this.ro),v=this.g.Pa(p,this.Rs);if(y!=-1){var _=this.fb.ja(y);this.hb.rF(_),this.g.Ra(p,this.ro,-1)}v!=-1&&(_=this.fb.ja(v),this.hb.rF(_),this.g.Ra(p,this.Rs,-1)),_=-1,y!=-1&&v!=-1?(this.fb.vd(y,-1),this.fb.vd(v,-1),s.set(a,-1)):_=y!=-1?y:v,_!=-1&&(this.oG(p,_)||this.fb.vd(_,-1),s.set(a,-1))}},l.prototype.oG=function(s,a){var c=new d.h,p=new d.h;this.g.Gc(s,c);var y=this.g.U(s);this.g.Gc(y,p);var v=!1;if(c.y<p.y){v=!0;var _=this.hb.nI(s);if(a==-1)var x=this.fb.addElement(_,-1);else x=a,this.fb.Sj(x,_);(_=this.g.Pa(y,this.ro))==-1?this.g.Ra(y,this.ro,x):this.g.Ra(y,this.Rs,x),y=this.g.bd(s),this.g.sj(y,this.El)==0&&this.Wm.add(x)}return y=this.g.Ma(s),this.g.Gc(y,p),c.y<p.y&&(v=!0,_=this.hb.nI(y),a==-1?x=this.fb.addElement(_,-1):(x=a,this.fb.Sj(x,_)),(_=this.g.Pa(y,this.ro))==-1?this.g.Ra(y,this.ro,x):this.g.Ra(y,this.Rs,x),y=this.g.bd(s),this.g.sj(y,this.El)==0&&this.Wm.add(x)),v},l.V=function(s,a,c,p){var y=new l;return y.g=s,y.X=a,y.Gl=c,y.fw=p,y.HQ()},l.prototype.IQ=function(){var s=new d.ia(0),a=new d.ia(0),c=-1,p=-1,y=new d.h;y.Rc();for(var v=-1,_=-1,x=-1,T=new d.h,C=this.Gl.rc(this.Gl.je);C!=-1;C=this.Gl.lb(C)){var A=this.Gl.getData(C);this.g.Gc(A,T);var R=this.g.bd(A);y.qb(T)&&_==R?(p==-1&&(c=this.g.Ky(),p=this.g.Gd()),x==-1&&(x=a.size,this.g.Ra(v,p,x),a.add(1),this.g.sj(R,c)==-1&&(this.g.gr(R,c,v),s.add(R))),this.g.Ra(A,p,x),a.bX(a.Fc()+1)):(x=-1,y.L(T)),v=A,_=R}if(s.size==0)return!1;for(y=new d.ia(0),v=new d.ia(0),_=0,x=s.size;_<x;_++){R=s.get(_);var F=this.g.sj(R,c);for(A=this.g.Pa(F,p),y.clear(!1),v.clear(!1),y.add(F),v.add(A),A=this.g.U(F);A!=F;A=this.g.U(A)){var N=A;if((T=this.g.Pa(N,p))!=-1)if(v.size==0)v.add(T),y.add(N);else if(v.Fc()==T){C=y.Fc();var B=this.g.U(C);F=this.g.U(N),this.g.Bc(C,F),this.g.Cc(F,C),this.g.Bc(N,B),this.g.Cc(B,N),N=[!1],B=this.g.nG(this.X,B,this.g.Xa(R),N),this.g.Ra(A,p,-1),N[0]&&this.g.Jf(R,F),A=this.g.Ja(R),A-=F=this.g.Ja(B),this.g.Vj(R,A),a.set(T,a.get(T)-1),a.get(T)==1&&(a.set(T,0),v.If(),y.If()),A=F=C}else y.add(A),v.add(T)}}return this.g.CB(c),this.g.Td(p),!0},l}();d.WL=h}(Y||(Y={})),function(d){var O=function(){function S(){}return S.prototype.ig=function(){this.PA=this.sb=null},S.prototype.get=function(){return this.PA},S.prototype.set=function(h){if(this.PA=h,h!=null)throw h.getType()==322&&(this.sb=h),d.i.Qa()},S.prototype.create=function(h){if(h!=322)throw d.i.fa("Not Implemented");this.Or()},S.prototype.Or=function(){this.sb==null&&(this.sb=new d.yb),this.PA=this.sb},S}();d.ig=O}(Y||(Y={})),function(d){(d=d.XL||(d.XL={}))[d.enumLineSeg=1]="enumLineSeg",d[d.enumBezierSeg=2]="enumBezierSeg",d[d.enumArcSeg=4]="enumArcSeg",d[d.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",d[d.enumSegmentMask=7]="enumSegmentMask",d[d.enumDensified=8]="enumDensified"}(Y||(Y={})),function(d){var O=function(h){this.$i=h,this.qC=this.rC=1,this.sB=this.rB=this.tB=0},S=function(){function h(){this.Fq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Bk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Bf=new d.Sa,this.qa=this.Cw=0,this.mo=[],this.$s=[],this.yw=[],this.Iq=[],this.MA=[]}return h.prototype.wB=function(l){if(l!=null){for(var s=0,a=l.length;s<a;s++)this.rW(l[s]);l.length=0}},h.prototype.rW=function(l){l.$i=null,this.Iq.push(l)},h.prototype.Ow=function(l){if(this.Iq.length===0)var s=new O(l);else(s=this.Iq[this.Iq.length-1]).$i=l,--this.Iq.length;return s},h.prototype.SR=function(l,s){return l==0?this.$s[s]:this.yw[s]},h.prototype.aB=function(){this.Cw>=this.MA.length&&this.MA.push(new d.ig);var l=this.MA[this.Cw];return this.Cw++,l},h.prototype.clear=function(){this.wB(this.mo),this.wB(this.$s),this.wB(this.yw),this.Cw=0},h.prototype.Oo=function(l){this.mo.push(this.Ow(l))},h.prototype.ol=function(l){return l==0?this.$s.length:this.yw.length},h.prototype.Vp=function(l,s){return this.SR(l,s).$i},h.prototype.Ea=function(l,s){if(this.mo.length!=2)throw d.i.Qa();this.qa=l;var a=d.lc.ox(.01*l),c=!1,p=this.mo[0],y=this.mo[1];if(s||5&p.$i.zr(y.$i,l,!0)){if(p.$i.getType()==322){var v=p.$i;if(y.$i.getType()==322){s=y.$i;var _=d.yb.Zx(v,s,null,this.Fq,this.Bk,l);if(_==0)throw d.yb.Zx(v,s,null,this.Fq,this.Bk,l),d.i.Qa();l=Array(9),d.O.$u(l,null);for(var x=0;x<_;x++){var T=this.Fq[x],C=this.Bk[x],A=p.sB,R=1;T==0?(A=p.tB,R=p.rC):T==1&&(A=p.rB,R=p.qC);var F=y.sB,N=1;C==0?(F=y.tB,N=y.rC):C==1&&(F=y.rB,N=y.qC);var B=new d.h;A==F?(A=new d.h,v.hc(T,A),T=new d.h,s.hc(C,T),N/=C=R+N,d.lc.OG(A,T,N,B),d.h.yc(B,A)+d.h.yc(B,T)>a&&(c=!0)):A>F?(v.hc(T,B),T=new d.h,s.hc(C,T),d.h.yc(B,T)>a&&(c=!0)):(s.hc(C,B),A=new d.h,v.hc(T,A),d.h.yc(B,A)>a&&(c=!0)),l[x]=B}for(p=0,y=-1,x=0;x<=_;x++)(N=x<_?this.Fq[x]:1)!=p&&(a=this.aB(),v.ah(p,N,a),y!=-1&&a.get().Dc(l[y]),x!=_&&a.get().Qc(l[x]),p=N,this.$s.push(this.Ow(a.get()))),y=x;for(v=[0,0,0,0,0,0,0,0,0],x=0;x<_;x++)v[x]=x;for(1<_&&this.Bk[0]>this.Bk[1]&&(N=this.Bk[0],this.Bk[0]=this.Bk[1],this.Bk[1]=N,x=v[0],v[0]=v[1],v[1]=x),p=0,y=-1,x=0;x<=_;x++)(N=x<_?this.Bk[x]:1)!=p&&(a=this.aB(),s.ah(p,N,a),y!=-1&&(p=v[y],a.get().Dc(l[p])),x!=_&&(p=v[x],a.get().Qc(l[p])),p=N,this.yw.push(this.Ow(a.get()))),y=x;return c}}throw d.i.Qa()}return!1},h.prototype.Kz=function(l,s,a){if(s.copyTo(this.Bf),this.mo.length!=1)throw d.i.Qa();this.qa=l;var c=this.mo[0];if(a||c.$i.ru(s.D(),l,!0)){if(c.$i.getType()!=322)throw d.i.Qa();var p=(l=c.$i).fe(s.D(),!1);this.Fq[0]=p;var y=c.sB;for(a=1,p==0?(y=c.tB,a=c.rC):p==1&&(y=c.rB,a=c.qC),c=new d.h,y==0?(y=new d.h,l.hc(p,y),s=s.D(),d.lc.OG(y,s,1/(a+1),c)):0<y?(c=new d.h,l.hc(p,c)):c=s.D(),a=0,p=-1,y=0;1>=y;y++){if((s=1>y?this.Fq[y]:1)!=a){var v=this.aB();l.ah(a,s,v),p!=-1&&v.get().Dc(c),y!=1&&v.get().Qc(c),a=s,this.$s.push(this.Ow(v.get()))}p=y}this.Bf.Cb(c)}},h}();d.TC=S}(Y||(Y={})),function(d){var O=function(){function S(h){this.Ds=this.rk=this.sb=null,this.ag=0,this.zm=!1,this.zf=-1,this.Cl=this.Jd=0,this.gb=-1,this.ib=h,this.ag=this.Wx(this.Cl),this.zm=!1,this.rk=null,this.Ds=new d.h}return S.prototype.BW=function(h){if(this.ib!=h.ib)throw d.i.Hb();this.zf=h.zf,this.Jd=h.Jd,this.gb=h.gb,this.Cl=h.Cl,this.ag=h.ag,this.zm=h.zm,this.rk=null},S.prototype.ha=function(){if(this.zf!=this.Jd&&this.BD(),this.zm)this.Jd=(this.Jd+1)%this.ag;else{if(this.Jd==this.ag)throw d.i.ce();this.Jd++}return this.rk},S.prototype.li=function(){if(this.zm)this.Jd=(this.ag+this.Jd-1)%this.ag;else{if(this.Jd==0)throw d.i.ce();this.Jd--}return this.Jd!=this.zf&&this.BD(),this.rk},S.prototype.DW=function(){this.zf=-1,this.Jd=0},S.prototype.EW=function(){this.Jd=this.ag,this.zf=-1},S.prototype.Vb=function(h,l){if(l===void 0&&(l=-1),0<=this.gb&&this.gb<this.ib.da()){var s=this.IM();if(h>=s&&h<this.ib.Vc(this.gb))return this.zf=-1,void(this.Jd=h-s)}l=0<=l&&l<this.ib.da()&&h>=this.ib.Ba(l)&&h<this.ib.Vc(l)?l:this.ib.sz(h),this.Cl=l+1,this.gb=l,this.zf=-1,this.Jd=h-this.ib.Ba(l),this.ag=this.Wx(l),this.ib.Ba(this.gb),this.ib.dc(this.gb)},S.prototype.$a=function(){return this.gb=this.Cl,!(this.gb>=this.ib.da())&&(this.zf=-1,this.Jd=0,this.ag=this.Wx(this.gb),this.ib.Ba(this.gb),this.ib.dc(this.gb),this.Cl++,!0)},S.prototype.Zi=function(){this.ag=this.Jd=this.zf=-1,this.Cl=0,this.gb=-1},S.prototype.Wx=function(h){if(this.ib.Ac())return 0;var l=1;return this.ib.dc(h)&&(l=0),this.ib.Ja(h)-l},S.prototype.On=function(){return this.zf==this.ag-1&&this.ib.dc(this.gb)},S.prototype.JB=function(){this.zm=!0},S.prototype.wb=function(){return this.ib.nb.o[this.gb]+this.zf},S.prototype.IM=function(){return this.ib.Ba(this.gb)},S.prototype.ik=function(){return this.On()?this.ib.Ba(this.gb):this.wb()+1},S.prototype.vm=function(){return this.zf==0},S.prototype.Qn=function(){return this.zf==this.ag-1},S.prototype.Ha=function(){return this.Jd<this.ag},S.prototype.Ez=function(){return 0<this.Jd},S.prototype.Of=function(){var h=new S(this.ib);return h.zf=this.zf,h.Jd=this.Jd,h.ag=this.ag,h.gb=this.gb,h.Cl=this.Cl,h.ib=this.ib,h.zm=this.zm,h},S.prototype.BD=function(){if(0>this.Jd||this.Jd>=this.ag)throw d.i.ce();this.zf=this.Jd;var h=this.wb();this.ib.mc();var l=this.ib.Ve,s=1;switch(l!=null&&(s=7&l.read(h)),l=this.ib.description,s){case 1:this.sb==null&&(this.sb=new d.yb),this.rk=this.sb;break;case 2:throw d.i.fa("internal error");default:throw d.i.Qa()}this.rk.Nf(l),s=this.ik(),this.ib.Gc(h,this.Ds),this.rk.Dc(this.Ds),this.ib.Gc(s,this.Ds),this.rk.Qc(this.Ds);for(var a=1,c=l.Aa;a<c;a++)for(var p=l.kd(a),y=d.ra.Va(p),v=0;v<y;v++){var _=this.ib.Uc(p,h,v);this.rk.YB(p,v,_),_=this.ib.Uc(p,s,v),this.rk.OB(p,v,_)}},S.prototype.$S=function(){return this.gb==this.ib.da()-1},S.prototype.Pn=function(){var h=this.ib.VR();return h!=null&&(7&h.read(this.zf))!=1},S}();d.YL=O}(Y||(Y={})),function(d){var O=function(){function S(h){h instanceof d.aa?(this.xH=h,this.ya=-1,this.Ei=1):(this.vT=h.slice(0),this.ya=-1,this.Ei=h.length)}return S.prototype.La=function(){return this.ya},S.prototype.next=function(){return this.ya<this.Ei-1?(this.ya++,this.xH!=null?this.xH:this.vT[this.ya]):null},S.prototype.qe=function(){},S}();d.Zc=O}(Y||(Y={})),function(d){var O=function(){this.next=null},S=function(){function h(){this.Tq=this.Kw=this.Lw=0,this.kF=!1,this.gK=0,this.gn=this.Kf=this.Wl=this.Jh=null,this.Ol=0,this.vy=null,this.pl=this.oi=-1}return h.prototype.AX=function(l,s,a){this.oi=l,this.pl=s,this.Jh=this.Wl=null,this.Tq=0,this.vy=a,this.gn==null&&(this.gn=d.O.lg(384,0)),this.nK()},h.prototype.R=function(){return this.oi},h.prototype.ca=function(){return this.pl},h.prototype.flush=function(){0<this.Ol&&(this.vy.gF(this.gn,this.Ol),this.Ol=0)},h.prototype.nK=function(){if(0<this.Tq){for(var l=0;l<this.pl;l++){for(var s=this.Wl[l];s!=null;){var a=s;s=s.next,a.next=null}this.Wl[l]=null}this.Jh=null}this.Lw=this.pl,this.Kw=-1,this.Tq=0},h.prototype.iJ=function(l){for(this.kF=l==h.Cx,l=this.Lw;l<=this.Kw;l++)this.sN(),this.lN(l),this.ZP();this.nK()},h.prototype.jy=function(l,s,a,c){if(s!=c){var p=1;if(s>c&&(p=l,l=a,a=p,p=s,s=c,c=p,p=-1),!(0>c||s>=this.pl)){0>l&&0>a?a=l=-1:l>=this.oi&&a>=this.oi&&(a=l=this.oi);var y=(a-l)/(c-s);c>this.pl&&(a=y*((c=this.pl)-s)+l),0>s&&(l=y*(0-s)+l,s=0);var v=Math.max(this.oi+1,8388607);-8388607>l?(s=(0-l)/y+s,l=0):l>v&&(s=(this.oi-l)/y+s,l=this.oi),-8388607>a?c=(0-l)/y+s:a>v&&(c=(this.oi-l)/y+s),(s=d.O.truncate(s))!=(c=d.O.truncate(c))&&((a=new O).x=d.O.truncate(4294967296*l),a.y=s,a.H=c,a.WP=d.O.truncate(4294967296*y),a.dir=p,this.Wl==null&&(this.Wl=d.O.lg(this.pl,null)),a.next=this.Wl[a.y],this.Wl[a.y]=a,a.y<this.Lw&&(this.Lw=a.y),a.H>this.Kw&&(this.Kw=a.H),this.Tq++)}}},h.prototype.sN=function(){if(this.Jh!=null){for(var l=!1,s=null,a=this.Jh;a!=null;)if(a.y++,a.y==a.H){var c=a;a=a.next,s!=null?s.next=a:this.Jh=a,c.next=null}else a.x+=a.WP,s!=null&&s.x>a.x&&(l=!0),s=a,a=a.next;l&&(this.Jh=this.fK(this.Jh))}},h.prototype.lN=function(l){if(!(l>=this.pl)){var s=this.Wl[l];if(s!=null){this.Wl[l]=null,s=this.fK(s),this.Tq-=this.gK,l=this.Jh;for(var a=!0,c=s,p=null;l!=null&&c!=null;)l.x>c.x?(a&&(this.Jh=c),a=c.next,c.next=l,p!=null&&(p.next=c),p=c,c=a):(a=l.next,l.next=c,p!=null&&(p.next=l),p=l,l=a),a=!1;this.Jh==null&&(this.Jh=s)}}},h.eK=function(l,s){return 0>l?0:l>s?s:l},h.prototype.ZP=function(){if(this.Jh!=null){for(var l=0,s=this.Jh,a=d.O.truncate(d.O.XG(s.x)),c=s.next;c!=null;c=c.next)if(l=this.kF?1^l:l+c.dir,c.x>s.x){var p=d.O.truncate(d.O.XG(c.x));l!=0&&(s=h.eK(a,this.oi),(a=h.eK(p,this.oi))>s&&s<this.oi&&(this.gn[this.Ol++]=s,this.gn[this.Ol++]=a,this.gn[this.Ol++]=c.y,this.Ol==this.gn.length&&(this.vy.gF(this.gn,this.Ol),this.Ol=0))),s=c,a=p}}},h.prototype.fK=function(l){for(var s=0,a=l;a!=null;a=a.next)s++;if(this.gK=s,s==1)return l;this.Kf==null?this.Kf=d.O.lg(Math.max(s,16),null):this.Kf.length<s&&(this.Kf=d.O.lg(Math.max(s,2*this.Kf.length),null));var c=0;for(a=l;a!=null;a=a.next)this.Kf[c++]=a;for(s==2?this.Kf[0].x>this.Kf[1].x&&(l=this.Kf[0],this.Kf[0]=this.Kf[1],this.Kf[1]=l):h.AN(this.Kf,s,function(p,y){return p==y?0:p.x<y.x?-1:p.x>y.x?1:0}),l=this.Kf[0],this.Kf[0]=null,a=l,c=1;c<s;c++)a.next=this.Kf[c],a=this.Kf[c],this.Kf[c]=null;return a.next=null,l},h.AN=function(l,s,a){if(s==l.length)l.sort(a);else{var c=l.slice(0,0),p=l.slice(s);s=l.slice(0,s).sort(a),l.length=0,l.push.apply(l,c.concat(s).concat(p))}},h.Cx=0,h}();d.Px=S}(Y||(Y={})),function(d){var O=function(){function S(){}return S.prototype.ui=function(h,l){var s=this.g.Pa(h,this.Pq);if(this.Dl==s&&(this.Dl=this.oe.lb(this.Dl)),this.ho==s&&(this.ho=this.oe.lb(this.ho)),this.oe.jd(this.RA,s),this.bk(h),l&&(l=this.g.bd(h))!=-1&&this.g.Xa(l)==h){var a=this.g.U(h);if(a!=h){if((s=this.g.bd(a))==l)return void this.g.Jf(l,a);if((a=this.g.Ma(h))!=h&&(s=this.g.bd(a))==l)return void this.g.Jf(l,a)}this.g.Jf(l,-1),this.g.Wg(l,-1)}},S.prototype.pD=function(){for(var h=!1,l=new d.h;;){this.Wh==null?(this.Wh=new d.ia(0),this.zs=new d.ia(0),this.xe=new d.ia(0)):(this.Wh.clear(!1),this.zs.clear(!1),this.xe.clear(!1));for(var s=this.ho,a=0,c=!0;s!=this.Dl;){var p=this.oe.getData(s),y=new d.h;this.g.Gc(p,y),c&&(this.g.Gc(p,l),c=!1),y=this.g.Ma(p);var v=this.g.U(p);this.g.Pa(y,this.zg)!=-559038737&&(this.Wh.add(y),this.g.Ra(y,this.zg,-559038737),this.zs.add(p),this.xe.add(a++)),this.g.Pa(v,this.zg)!=-559038737&&(this.Wh.add(v),this.g.Ra(v,this.zg,-559038737),this.zs.add(p),this.xe.add(a++)),s=this.oe.lb(s)}if(2>this.Wh.size)break;var _=this;for(this.xe.Vd(0,this.xe.size,function(x,T){return _.pM(x,T)}),s=0,a=this.xe.size;s<a;s++)c=this.xe.get(s),c=this.Wh.get(c),this.g.Ra(c,this.zg,s),y=new d.h,this.g.Gc(c,y);for(y=this.TM(l),s=0,a=this.xe.size;s<a;s++)(c=this.xe.get(s))!=-1&&(c=this.Wh.get(c),this.g.Ra(c,this.zg,-1));if(!y)break;h=!0}return h},S.prototype.TM=function(h){for(var l=!1,s=!0;s;){s=!1;var a=0;this.xe.get(a)==-1&&(a=this.cm(a));for(var c=this.cm(a),p=0,y=this.xe.size;p<y&&a!=-1&&c!=-1&&a!=c;p++){var v=this.xe.get(a);c=this.xe.get(c),v=this.Wh.get(v),c=this.Wh.get(c);var _=this.g.U(v);this.g.Dv(_,h)||(_=this.g.Ma(v));var x=this.g.U(c);this.g.Dv(x,h)||(x=this.g.Ma(c));var T=this.pu(_,v),C=this.pu(x,c),A=T?this.g.Ma(_):this.g.U(_),R=C?this.g.Ma(x):this.g.U(x),F=!1;(this.sp(_)||this.sp(x)||this.sp(v)||this.sp(c)||this.sp(A)||this.sp(R))&&(F=!0),!F&&this.g.fq(v,c)&&(F=!0,this.tD(T,C,_,v,x,c)),!F&&this.g.fq(A,R)&&(F=!0,this.tD(!T,!C,_,A,x,R)),F&&(l=!0),s=s||F,a=this.cm(a),c=this.cm(a)}}if(!l)for(a=0,this.xe.get(a)==-1&&(a=this.cm(a)),c=this.cm(a),p=0,y=this.xe.size;p<y&&a!=-1&&c!=-1&&a!=c;p++)v=this.xe.get(a),c=this.xe.get(c),v=this.Wh.get(v),c=this.Wh.get(c),_=this.g.U(v),this.g.Dv(_,h)||(_=this.g.Ma(v)),x=this.g.U(c),this.g.Dv(x,h)||(x=this.g.Ma(c)),T=this.pu(_,v),C=this.pu(x,c),A=T?this.g.Ma(_):this.g.U(_),R=C?this.g.Ma(x):this.g.U(x),this.DM(T,C,v,_,A,c,x,R)&&(l=!0),a=this.cm(a),c=this.cm(a);return l},S.prototype.XM=function(){this.g.ic(this.X)==1736&&this.g.In(this.X)==1&&new d.Fg().MU(this.fw,this.g,this.X,this.nd);var h=!1,l=!0;this.zg=this.Pq=-1;var s=this.g.I(this.X),a=new d.ia(0);a.Jb(s);for(var c=this.g.Ob(this.X);c!=-1;c=this.g.Rb(c))for(var p=this.g.Xa(c),y=0,v=this.g.Ja(c);y<v;y++)a.add(p),p=this.g.U(p);var _=this.g.td.o,x=this.g.td.stride;this.g.vb.mc();var T=this.g.vb.za[0].o;for(a.Vd(0,s,function(A,R){var F=_[x*A],N=_[x*R],B=T[2*F];F=T[2*F+1];var q=T[2*N];return(B=F<(N=T[2*N+1])?-1:F>N?1:B<q?-1:B>q?1:0)==0&&(B=(A=_[x*A+3])<(R=_[x*R+3])?-1:A==R?0:1),B}),this.Pq=this.g.Gd(),this.oe=new d.jp,this.RA=this.oe.Ph(0),this.oe.fn(s),c=0;c<s;c++)p=a.get(c),y=this.oe.addElement(this.RA,p),this.g.Ra(p,this.Pq,y);for(this.zg=this.g.Gd(),this.Dl=-1,this.cD()&&(h=!0);l;){l=!1,s=0,a=!1;do{a=!1,this.ho=-1,v=0,c=new d.h,y=new d.h;for(var C=this.oe.rc(this.RA);C!=-1;)p=this.oe.getData(C),this.ho!=-1?(this.g.Gc(p,y),c.qb(y)?v++:(c.L(y),this.Dl=C,0<v&&(p=this.pD())&&(a=!0,this.Dl!=-1&&(p=this.oe.getData(this.Dl),this.g.Gc(p,c))),this.ho=C=this.Dl,v=0)):(this.ho=C,this.g.Gc(this.oe.getData(C),c),v=0),C!=-1&&(C=this.oe.lb(C));if(this.Dl=-1,0<v&&(p=this.pD())&&(a=!0),10<s++)throw d.i.Qa();a&&this.GM(),this.cD()&&(a=!0),l=l||a&&!1,h=h||a}while(a)}return this.g.Td(this.Pq),this.g.Td(this.zg),d.WL.V(this.g,this.X,this.oe,this.fw)||h},S.prototype.pu=function(h,l){return this.g.U(l)!=h},S.prototype.DM=function(h,l,s,a,c,p,y,v){if(a==y)return this.bk(s),this.bk(p),!1;var _=this.g.Pa(s,this.zg),x=this.g.Pa(c,this.zg),T=this.g.Pa(p,this.zg),C=this.g.Pa(v,this.zg),A=[0,0,0,0];for((s=[0,0,0,0,0,0,0,0])[0]=0,A[0]=_,s[1]=0,A[1]=x,s[2]=1,A[2]=T,s[3]=1,A[3]=C,_=1;4>_;_++){for(x=A[_],T=s[_],C=_-1;0<=C&&A[C]>x;)A[C+1]=A[C],s[C+1]=s[C],C--;A[C+1]=x,s[C+1]=T}return A=0,s[0]!=0&&(A|=1),s[1]!=0&&(A|=2),s[2]!=0&&(A|=4),s[3]!=0&&(A|=8),(A==5||A==10)&&(h==l?h?(this.g.Bc(v,a),this.g.Cc(a,v),this.g.Bc(c,y),this.g.Cc(y,c)):(this.g.Cc(v,a),this.g.Bc(a,v),this.g.Cc(c,y),this.g.Bc(y,c)):h?(this.g.Cc(a,p),this.g.Bc(p,a),this.g.Cc(y,c),this.g.Bc(c,y)):(this.g.Bc(a,p),this.g.Cc(p,a),this.g.Bc(y,c),this.g.Cc(c,y)),!0)},S.prototype.tD=function(h,l,s,a,c,p){this.MY?this.VM():this.UM(h,l,s,a,c,p)},S.prototype.VM=function(){throw d.i.fa("not implemented.")},S.prototype.UM=function(h,l,s,a,c,p){if(h!=l)h?(this.g.Bc(s,c),this.g.Cc(c,s),this.g.Bc(p,a),this.g.Cc(a,p),this.vn(c,s),this.ui(c,!0),this.g.mi(c,!0),this.bk(s),this.vn(p,a),this.ui(p,!0),this.g.mi(p,!1)):(this.g.Bc(c,s),this.g.Cc(s,c),this.g.Bc(a,p),this.g.Cc(p,a),this.vn(c,s),this.ui(c,!0),this.g.mi(c,!1),this.bk(s),this.vn(p,a),this.ui(p,!0),this.g.mi(p,!0)),this.bk(a);else{var y=h?s:a,v=l?c:p;for(h=h?a:s,l=l?p:c,c=!1,this.g.Bc(y,v),this.g.Bc(v,y),this.g.Cc(h,l),this.g.Cc(l,h),p=l;p!=v;)s=this.g.Ma(p),a=this.g.U(p),this.g.Cc(p,a),this.g.Bc(p,s),c=c||p==y,p=a;c||(s=this.g.Ma(v),a=this.g.U(v),this.g.Cc(v,a),this.g.Bc(v,s)),this.vn(v,y),this.ui(v,!0),this.g.mi(v,!1),this.bk(y),this.vn(l,h),this.ui(l,!0),this.g.mi(l,!1),this.bk(h)}},S.prototype.cD=function(){for(var h=!1,l=this.g.Ob(this.X);l!=-1;){for(var s=this.g.Xa(l),a=0,c=this.g.Ja(l);a<c&&1<c;){var p=this.g.Ma(s),y=this.g.U(s);this.g.fq(p,y)?(h=!0,this.ui(s,!1),this.g.pd(s,!0),this.ui(y,!1),this.g.pd(y,!0),s=p,a=0,c=this.g.Ja(l)):(s=y,a++)}if(2>this.g.Ja(l)){for(h=this.g.Xa(l),a=0,c=this.g.Ja(l);a<c;a++)this.ui(h,!1),h=this.g.U(h);l=this.g.Zq(l),h=!0}else l=this.g.Rb(l)}return h},S.prototype.sp=function(h){for(var l=!1;;){var s=this.g.U(h),a=this.g.Ma(h);if(s==h)return this.ui(h,!0),this.g.mi(h,!1),!0;if(!this.g.fq(s,a)||(l=!0,this.bk(a),this.bk(s),this.ui(h,!0),this.g.mi(h,!1),this.vn(s,a),this.ui(s,!0),this.g.mi(s,!0),s==a))break;h=a}return l},S.prototype.GM=function(){for(var h=0,l=this.oe.rc(this.oe.je);l!=-1;l=this.oe.lb(l)){var s=this.oe.getData(l);this.g.aj(s,-1)}for(var a=0,c=this.g.Ob(this.X);c!=-1;)if((l=this.g.Xa(c))==-1||this.g.bd(l)!=-1)s=c,c=this.g.Rb(c),this.g.$q(s);else{this.g.aj(l,c);var p=1;for(s=this.g.U(l);s!=l;s=this.g.U(s))this.g.aj(s,c),p++;this.g.cp(c,!1),this.g.Vj(c,p),this.g.Wg(c,this.g.Ma(l)),a+=p,h++,c=this.g.Rb(c)}for(l=this.oe.rc(this.oe.je);l!=-1;l=this.oe.lb(l))s=this.oe.getData(l),this.g.bd(s)==-1&&(c=this.g.nG(this.X,s,s,null),a+=this.g.Ja(c),h++);for(this.g.Rl(this.X,h),this.g.Tj(this.X,a),h=0,a=this.g.ld;a!=-1;a=this.g.ue(a))h+=this.g.I(a);this.g.bC(h)},S.prototype.cm=function(h){for(var l=0,s=this.xe.size-1;l<s;l++)if(h=(h+1)%this.xe.size,this.xe.get(h)!=-1)return h;return-1},S.prototype.vn=function(h,l){var s=this.g.Pa(l,this.Pq),a=this.g.Pa(l,this.zg);this.g.lC(h,l),this.g.Ra(l,this.Pq,s),this.g.Ra(l,this.zg,a)},S.prototype.bk=function(h){var l=this.g.Pa(h,this.zg);l!=-1&&(this.xe.set(l,-1),this.g.Ra(h,this.zg,-1))},S.V=function(h,l,s,a,c){var p=new S;return p.g=h,p.X=l,p.xA=s,p.fw=a,p.nd=c,p.XM()},S.prototype.pM=function(h,l){var s=this.Wh.get(h),a=new d.h;this.g.Gc(s,a),s=new d.h;var c=this.Wh.get(l);return this.g.Gc(c,s),a.qb(s)?0:(c=this.zs.get(h),h=new d.h,this.g.Gc(c,h),c=this.zs.get(l),l=new d.h,this.g.Gc(c,l),(c=new d.h).uc(a,h),(a=new d.h).uc(s,l),d.h.nu(c,a))},S}();d.rn=O}(Y||(Y={})),function(d){var O;(O=d.$L||(d.$L={}))[O.Local=0]="Local",O[O.Geographic=1]="Geographic",O[O.Projected=2]="Projected",O[O.Image=3]="Image",O[O.Unknown=4]="Unknown",function(h){h[h.Integer32=0]="Integer32",h[h.Integer64=1]="Integer64",h[h.FloatingPoint=2]="FloatingPoint"}(d.TL||(d.TL={}));var S=function(){function h(){this.mA=null,this.pp="",this.su=null,this.dg=0,this.ZH=this.Ho=-1,this.wh=null}return h.prototype.Ec=function(){return this.dg},h.prototype.VF=function(){return 1},h.prototype.VW=function(l){this.mA=l},h.prototype.Xd=function(){if(this.mA!==null)return this.mA;var l=.001;return this.dg!=0?l=d.wr.CQ(this.dg):this.wh!=null&&(l=d.XC.DQ(this.wh)),l},h.prototype.Bz=function(){return this.wh},h.prototype.Hd=function(){return this.dg!=0?d.Tc.Zg(d.wr.Sy(this.dg)):this.wh!=null?d.XC.EQ(this.wh):void 0},h.Sb=function(l){if(l.dg!=0){if(d.wr.ZS(l.dg)===!0)return 1;if(d.wr.aT(l.dg)===!0)return 2}return 4},h.prototype.$r=function(){var l=this.Ec();return this.Ho!=-1?this.Ho:(this.Ho=d.wr.FK(l),this.Ho!=-1?this.Ho:l)},h.create=function(l){if(0>=l)throw d.i.N("Invalid or unsupported wkid: "+l);var s=new h;return s.dg=l,s},h.qP=function(l){if(l==null||l.length==0)throw d.i.N("Cannot create SpatialReference from null or empty text.");var s=new h;return s.wh=l,s},h.prototype.Nb=function(l){return this==l||l!=null&&this.constructor==l.constructor&&this.dg==l.dg&&(this.dg!=0||this.wh===l.wh)},h.prototype.toString=function(){return"[ tol: "+this.Kn()+"; wkid: "+this.Ec()+"; wkt: "+this.Bz()+"]"},h.prototype.cc=function(){if(this.pp!=="")return this.pp;var l=this.toString();if(Array.prototype.reduce)return this.pp="S"+l.split("").reduce(function(c,p){return 0|(c=(c<<5)-c+p.charCodeAt(0))},0);var s=0;if(l.length===0)return"";for(var a=0;a<l.length;a++)s=(s<<5)-s+l.charCodeAt(a),s&=s;return this.pp="S"+s},h.prototype.Kn=function(){return this.Xd(0)},h.prototype.fh=function(){return this.su!==null?this.su:this.su=d.gu.yP(this)},h.ZN=2147483645,h.$N=9007199254740990,h}();d.Eg=S}(Y||(Y={})),function(d){var O=function(S){function h(){var l=S!==null&&S.apply(this,arguments)||this;return l.Ji=null,l.ST=null,l.Hq=new d.ZL,l.Eo=null,l.jw=null,l}return Wt(h,S),h.yP=function(l){var s=new h;if(s.dg=l.dg,s.Ho=l.Ho,s.ZH=l.ZH,s.wh=l.wh,s.wh!==""&&s.wh!==null){l=h.kM(s.wh);var a=h.iM(s.wh);s.Hq.Xx(l,a,d.hu.Integer64),s.by(l),s.gy(a),s.dg=l.$r()}else l=h.jM(s.dg),s.by(l),s.gy(null),s.Hq.Xx(l,null,d.hu.Integer64);return s},h.prototype.Xd=function(l){return this.Hq.Kn(l)},h.iM=function(l){if(0>=l.length)throw d.i.N();var s=null;try{s=d.NC.fromString(l)}catch{s=null}return s==null?null:h.bD(s,!0)},h.prototype.by=function(l){this.Kd=l,this.Eo=this.Kd.Hd()},h.prototype.gy=function(l){this.KH=l,this.ST=this.KH!=null?this.KH.Eo:null},h.prototype.Wc=function(){return this.Sb()!=0&&this.Sb()!=3&&this.Kd.Wc()},h.prototype.IG=function(){return this.Sb()!=0&&(this.Sb()==3?this.Ji.fk().Wc():this.Kd.Wc())},h.prototype.eh=function(){return this.Kd!=null?this.Kd.Ue:null},h.prototype.pm=function(){return this.Kd.pm()},h.prototype.bf=function(){return this.Kd.bf()},h.prototype.hh=function(){return this.Kd!=null?this.Kd.sw:NaN},h.prototype.Up=function(){return this.Kd.Up()},h.prototype.Wr=function(){return this.Kd.Wr()},h.prototype.kk=function(){return this.Kd.kk()},h.prototype.kS=function(l){return d.OC.Py(this.Kd,l.Kd)},h.prototype.ml=function(){return this.Kd.ml()},h.prototype.Vr=function(){return this.Kd.Vr()},h.prototype.zi=function(){return this.Sb()==3?this.Ji.fk().zi():this.Kd.zi()},h.prototype.gh=function(){if(!this.Wc())throw d.i.N("!isPannable()");var l=new d.l;return this.Kd.gh(l),l},h.prototype.Oe=function(){if(!this.Wc())throw d.i.N("!isPannable()");return this.Kd.so},h.prototype.HR=function(){if(!this.Wc())throw d.i.N("!isPannable()");var l=new d.l;return this.Kd.GR(l),l},h.prototype.pv=function(){if(!this.Wc())throw d.i.N("!isPannable()");return this.Kd.pv()},h.prototype.ov=function(){if(!this.Wc())throw d.i.N("!isPannable()");return this.Kd.ov()},h.prototype.Xr=function(){return this.Ji!=null?this.Ji.fk().Xr():this.Kd.Xr()},h.prototype.PQ=function(){return this.Kd.hv()},h.prototype.Qp=function(){return this.Eo.getUnitFactor()},h.prototype.vz=function(l){return this.Hq.vz(l)},h.prototype.sc=function(){var l=this.Sb();if(l==1)return this;if(l==3)return this.Ji.fk().sc();if(l==0||l===4)throw d.i.fa("invalid call");if(this.jw!==null)return this.jw;if((l=this.eh().getGeogcs())==null)throw d.i.Qa();return this.jw=h.bF(l,this.Hq.VF())},h.bF=function(l,s){if(l==null)throw d.i.N("null pointer.");var a=new h;return l=h.mu(l,!0),a.Hq.Xx(l,null,s),a.by(l),a.gy(null),a.dg=l.$r(),a},h.prototype.Sb=function(){var l=this.eh();if(l!=null)switch(l.getType()){case d.Sc.PE_TYPE_GEOGCS:return 1;case d.Sc.PE_TYPE_PROJCS:return 2}return 4},h.prototype.hv=function(){return this.Kd.hv()},h.mu=function(l,s){var a=l.getCode();if(0>=a&&0<(a=d.pf.getCode(l))){if((l=d.pf.coordsys(a))==null)throw d.i.N("Text to wkid mapping had failed: "+a);return h.mu(l,s)}if(s&&0<a&&(s=h.qx[a]))return s;s=d.zb.xv(l,a,!1);var c=h.lK[s];return c||(l=0>=a?l:d.pf.coordsys(a),l=new d.OC(l),h.lK[s]=l,0<a&&(h.qx[a]=l),l)},h.jM=function(l){if(0>=l)throw d.i.N("Invalid or unsupported wkid: "+l);var s=h.qx[l];if(s!=null)return s;if((s=d.pf.coordsys(l))==null)throw d.i.N("Invalid or unsupported wkid: "+l);return(s=h.mu(s,!1)).$r()!=l&&(h.qx[l]=s),s},h.kM=function(l){if(l==null||l===void 0||l.length==0)throw d.i.N("Cannot create SpatialReference from null or empty text.");var s=null;try{s=d.pf.fromString(d.Sc.PE_TYPE_COORDSYS,l)}catch(a){throw d.i.N("Cannot create SpatialReference from text. "+a.message)}if(s===null)throw d.i.N("Cannot create SpatialReference from text. ");return h.mu(s,!0)},h.bD=function(l,s){var a,c=l.getCode();if(0>=c&&0<(c=d.pf.getCode(l))){if((c=d.pf.vertcs(c))===null)throw d.i.N();return h.bD(c,s)}if(s&&0<c&&(s=h.kK[c])||(l=d.zb.xv(l,c,!1),s=h.mK[l]))return s;if(0>=c||(a=d.pf.vertcs(c)),a===null)throw d.i.N();return a=new d.PL(a),h.mK[l]=a,0<c&&(h.kK[c]=a),a},h.sI=function(l,s){if(s===null||s.B())return null;var a=new d.l;if(s!==null&&l.Sb()!=1){var c=l.sc(),p=c.eh();l=d.vr.Nr(l,c,null,null),(s=d.Hx.local().V(s,l,null)).A(a)}else p=l.eh(),s.A(a);return s=p.getPrimem().getLongitude(),p=p.getUnit().getUnitFactor(),new d.LC(a.v,a.G,a.C,a.H,s,p)},h.lD=function(l){var s={name:"",steps:[],_pt:null,_entry:null},a=0;for(l=l.getEntries();a<l.length;a++){var c=l[a],p={LY:!1,ZY:"",YY:-1,geogtran:null};c.getDirection()===0?p.isInverse=!1:p.isInverse=!0;var y=c.getGeogtran().getCode();-1<y?p.wkid=y:p.wkt=c.getGeogtran().toString(),s.steps.push(p)}return s},h.XR=function(l,s,a,c){return a===void 0&&(a=null),a=h.sI(c,a),l=d.lp.getGTlist(l.eh(),s.eh(),2,d.lp.PE_GTLIST_OPTS_COMMON,a,1),s=null,l&&0<l.length&&(s=this.lD(l[0]),d.Mx.destroy(l)),a!==null&&a.destroy(),s},h.YR=function(l,s,a,c){var p;if(a===void 0&&(a=null),c===void 0&&(c=null),p===void 0&&(p=30),a=h.sI(c,a),l=d.lp.getGTlist(l.eh(),s.eh(),2,d.lp.PE_GTLIST_OPTS_COMMON,a,p),s=[],l&&0<l.length){for(p=0;p<l.length;p++)s.push(this.lD(l[p]));d.Mx.destroy(l)}return a!==null&&a.destroy(),s},h.qx={},h.lK={},h.kK={},h.mK={},h}(d.Eg);d.gu=O}(Y||(Y={})),function(d){var O,S;(S=O=d.hu||(d.hu={}))[S.Integer32=0]="Integer32",S[S.Integer64=1]="Integer64",S[S.FloatingPoint=2]="FloatingPoint";var h=function(){function l(){this.qp()}return l.prototype.assign=function(s){this.Fm=s.Fm,this.Gm=s.Gm,this.Pj=s.Pj,this.sA=s.sA,this.Fo=s.Fo,this.rA=s.rA,this.Ik=s.Ik,this.Mq=s.Mq,this.Lq=s.Lq,this.Rm=s.Rm},l.prototype.VF=function(){return this.Rm},l.prototype.qp=function(){this.Gm=this.Fm=0,this.Pj=1,this.sA=0,this.Fo=1,this.rA=0,this.Lq=this.Mq=this.Ik=2220446049250313e-29,this.Rm=O.FloatingPoint},l.prototype.Xx=function(s,a,c){if(this.qp(),this.Rm=c,c!=O.FloatingPoint){var p=new d.l;s.hR(p),this.Fm=p.v,this.Gm=p.G}else this.Gm=this.Fm=-17976931348623157e292;(p=s.Ue.getType())==d.Sc.PE_TYPE_GEOGCS?(p=(c==O.Integer64?1e-9:1/18e5)*s.bf(),this.Pj=1/p):p==d.Sc.PE_TYPE_PROJCS&&(p=(c==O.Integer64?1e-4:.001)*s.pm(),this.Pj=1/p),a!=null?(p=(c==O.Integer32?.001:1e-4)*a.IH,this.Fo=1/p):this.Fo=1e4,this.YM(),this.Ik=s.sw,this.Mq=a!=null?.001*a.IH:.001,this.Lq=2220446049250313e-29},l.prototype.YM=function(){if(this.Rm!=O.FloatingPoint){var s=this.Rm==O.Integer64?d.Eg.$N:d.Eg.ZN,a=s/this.Pj,c=this.Fm+a,p=d.O.truncate((c-this.Fm)*this.Pj);p>s&&(this.Pj=s/(c-this.Fm)),a=this.Gm+a,(p=d.O.truncate((a-this.Gm)*this.Pj))>s&&(this.Pj=s/(a-this.Gm))}},l.prototype.aC=function(s){switch(s){case 0:this.Ik=void 0;case 1:this.Mq=void 0;case 2:this.Lq=void 0}},l.prototype.Kn=function(s){switch(s){case 0:return this.Ik;case 1:return this.Mq;case 2:return this.Lq}return 0},l.prototype.vz=function(s){if(this.Rm==O.FloatingPoint)return 0;switch(s){case 0:return 1/this.Pj;case 1:case 2:return 1/this.Fo;default:return 0}},l.prototype.toString=function(){var s="SRPD [m_toleranceXY: "+this.Ik.toString();return(s=(s=(s=(s=(s=(s=(s=(s=(s=s+";m_falseX: "+this.Fm.toString())+";m_falseY: "+this.Gm.toString())+";m_unitsXY: "+this.Pj.toString())+";m_falseZ: "+this.sA.toString())+";m_unitsZ: "+this.Fo.toString())+";m_falseM: "+this.rA.toString())+";m_toleranceZ: "+this.Mq.toString())+";m_toleranceM: "+this.Lq.toString())+";m_precision: "+this.Rm.toString())+"] "},l}();d.ZL=h}(Y||(Y={})),function(d){function O(c,p){return 89.99999<p?p=89.99999:-89.99999>p&&(p=-89.99999),p*=.017453292519943,[111319.49079327169*c,31890685e-1*Math.log((1+Math.sin(p))/(1-Math.sin(p)))]}function S(c,p,y){return c=c/6378137*57.29577951308232,y?[c,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*p/6378137)))]:[c-360*Math.floor((c+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*p/6378137)))]}function h(c,p,y){var v=c.Of();if(c.getType()===33)p=p(v.Lg(),v.ih()),v.Cb(p[0],p[1]);else if(c.getType()===197){var _=p(c.es(),c.gs(),y);p=p(c.ds(),c.fs(),y),v.K(_[0],_[1],p[0],p[1])}else for(_=new d.h,c=0;c<v.I();c++){v.D(c,_);var x=p(_.x,_.y,y);_.ma(x[0],x[1]),v.Cb(c,_)}return v}function l(c){return h(c,S,!0)}function s(c){return h(c,O,!0)}var a=Math.PI/180;d.UK=function(){function c(){}return c.vu=function(p){var y=Math.sqrt(.006694379990197414),v=Math.sin(p.y*a);return d.h.construct(6378137*p.x*a,3.1677196636462314e6*(v/(1-.006694379990197414*v*v)-1/(2*y)*Math.log((1-y*v)/(1+y*v))))},c.Vx=function(p,y,v,_){var x=.0033528106647474805,T=Math.sin(v);v=Math.cos(v);var C=(1-x)*Math.tan(p),A=C*(p=1/Math.sqrt(1+C*C)),R=Math.atan2(C,v),F=(C=p*T)*C,N=1-F,B=27233160610754688e-5*N/4040829998466145e-2,q=1+B/16384*(4096+B*(B*(320-175*B)-768)),U=B/1024*(256+B*(B*(74-47*B)-128));B=_/(635675231424518e-8*q);for(var K,X,te,ae=2*Math.PI;1e-12<Math.abs(B-ae);)te=Math.cos(2*R+B),ae=B,B=_/(635675231424518e-8*q)+U*(K=Math.sin(B))*(te+U/4*((X=Math.cos(B))*(2*te*te-1)-U/6*te*(4*K*K-3)*(4*te*te-3)));return _=A*K-p*X*v,N=x/16*N*(4+x*(4-3*N)),d.h.construct((y+(Math.atan2(K*T,p*X-A*K*v)-(1-N)*x*C*(B+N*K*(te+N*X*(2*te*te-1)))))/a,Math.atan2(A*X+p*K*v,(1-x)*Math.sqrt(F+_*_))/a)},c.MM=function(p,y,v,_){var x=.0033528106647474805,T=_-y,C=Math.atan((1-x)*Math.tan(p)),A=Math.atan((1-x)*Math.tan(v)),R=Math.sin(C);C=Math.cos(C);var F=Math.sin(A);A=Math.cos(A);var N=T,B=1e3;do{var q=Math.sin(N),U=Math.cos(N),K=Math.sqrt(A*q*A*q+(C*F-R*A*U)*(C*F-R*A*U));if(K===0)return 0;U=R*F+C*A*U;var X=Math.atan2(K,U),te=C*A*q/K,ae=1-te*te;q=U-2*R*F/ae,isNaN(q)&&(q=0);var ge=x/16*ae*(4+x*(4-3*ae)),Ee=N;N=T+(1-ge)*x*te*(X+ge*K*(q+ge*U*(2*q*q-1)))}while(1e-12<Math.abs(N-Ee)&&0<--B);return B===0?(R=_-y,{azimuth:Math.atan2(Math.sin(R)*Math.cos(v),Math.cos(p)*Math.sin(v)-Math.sin(p)*Math.cos(v)*Math.cos(R)),geodesicDistance:6371008771415059e-9*Math.acos(Math.sin(p)*Math.sin(v)+Math.cos(p)*Math.cos(v)*Math.cos(_-y))}):(y=(p=27233160610754688e-5*ae/4040829998466145e-2)/1024*(256+p*(p*(74-47*p)-128)),{azimuth:Math.atan2(A*Math.sin(N),C*F-R*A*Math.cos(N)),YQ:635675231424518e-8*(1+p/16384*(4096+p*(p*(320-175*p)-768)))*(X-y*K*(q+y/4*(U*(2*q*q-1)-y/6*q*(4*K*K-3)*(4*q*q-3)))),XY:Math.atan2(C*Math.sin(N),C*F*Math.cos(N)-R*A)})},c.jQ=function(p){var y=p.hasAttribute(1),v=p.hasAttribute(2),_=[],x=p.da(),T=null,C=null;y&&(T=p.ub(1)),v&&(C=p.ub(2));for(var A=new d.h,R=0;R<x;R++){for(var F=p.Ba(R),N=p.Ja(R),B=0,q=0,U=NaN,K=NaN,X=NaN,te=NaN,ae=p.dc(R),ge=[],Ee=F;Ee<F+N;Ee++){p.D(Ee,A),te=X=NaN;var Ae=[A.x,A.y];y&&(X=T.get(Ee),Ae.push(X)),v&&(x=C.get(Ee),Ae.push(te)),Ee==F&&ae&&(B=A.x,q=A.y,U=X,K=te),ge.push(Ae)}!ae||B==A.x&&q==A.y&&(!y||isNaN(U)&&isNaN(X)||U==X)&&(!v||isNaN(K)&&isNaN(te)||K==te)||ge.push(ge[0].slice(0)),_.push(ge)}return _},c.Wy=function(p,y){p=c.jQ(p),637.100877141506>y&&(y=637.100877141506);for(var v,_=[],x=0;x<p.length;x++){var T,C,A=p[x];_.push(v=[]),v.push([A[0][0],A[0][1]]);var R=A[0][0]*a,F=A[0][1]*a;for(T=0;T<A.length-1;T++){var N=A[T+1][0]*a,B=A[T+1][1]*a;if(R!==N||F!==B){N=(B=c.MM(F,R,B,N)).azimuth;var q=(B=B.YQ)/y;if(1<q){for(C=1;C<=q-1;C++){var U=c.Vx(F,R,N,C*y);v.push([U.x,U.y])}C=c.Vx(F,R,N,(B+Math.floor(q-1)*y)/2),v.push([C.x,C.y])}F=c.Vx(F,R,N,B),v.push([F.x,F.y]),R=F.x*a,F=F.y*a}}}return{qJ:_}},c.XQ=function(p){for(var y=[],v=0;v<p.length;v++){var _=p[v];_=c.Wy(_,1e4),y.push(_)}p=[];for(var x=0;x<y.length;x++){_=y[x];var T=0;for(v=0;v<_.qJ.length;v++){var C,A=_.qJ[v],R=c.vu(d.h.construct(A[0][0],A[0][1])),F=c.vu(d.h.construct(A[A.length-1][0],A[A.length-1][1])),N=F.x*R.y-R.x*F.y;for(C=0;C<A.length-1;C++)R=c.vu(d.h.construct(A[C+1][0],A[C+1][1])),N+=(F=c.vu(d.h.construct(A[C][0],A[C][1]))).x*R.y-R.x*F.y;T+=N}T/=1,p.push(T/-2)}return p},c}(),d.cb=function(){function c(){}return c.xB=function(p,y,v,_,x,T,C){c.gD[p.cc()]=y,isNaN(v)==0&&(c.mD[p.cc()]=v),isNaN(_)==0&&(c.zD[p.cc()]=_),isNaN(x)==0&&(c.aD[p.cc()]=x),c.nD[p.cc()]=T,C!==null&&(c.oD[p.cc()]=C)},c.Ww=function(p,y,v){c.sD[p.cc()+"-"+y.cc()]=v},c.sc=function(p){if((p=c.gD[p.cc()])==null)throw d.i.Ie();return p},c.bf=function(p){if((p=c.mD[p.cc()])==null)throw d.i.Ie();return p},c.vv=function(p){if((p=c.zD[p.cc()])==null)throw d.i.Ie();return p},c.ev=function(p){if((p=c.aD[p.cc()])==null)throw d.i.Ie();return p},c.gh=function(p){if((p=c.oD[p.cc()])==null)throw d.i.Ie();return d.l.construct(p[0],p[1],p[2],p[3])},c.Wc=function(p){if((p=c.nD[p.cc()])==null)throw d.i.Ie();return p},c.zh=function(p,y,v){if(y.Nb(v))return p;var _=c.sD[y.cc()+"-"+v.cc()];if(_!==void 0)return _(p,y,v);throw d.i.Ie()},c.vt=function(){throw d.i.Ie()},c.bR=function(){throw d.i.Ie()},c.dW=function(){throw d.i.Ie()},c.ml=function(){throw d.i.Ie()},c.sW=function(){var p=d.Eg.create(102100),y=d.Eg.create(3857),v=d.Eg.create(4326);d.cb.xB(p,v,NaN,NaN,NaN,!1,null),d.cb.xB(v,v,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),d.cb.xB(y,v,NaN,NaN,NaN,!1,null),d.cb.Ww(p,v,l),d.cb.Ww(v,p,s),d.cb.Ww(y,v,l),d.cb.Ww(v,y,s)},c.gD=[],c.mD=[],c.zD=[],c.aD=[],c.nD=[],c.oD=[],c.sD=[],c}()}(Y||(Y={})),Y.cb.sW(),function(d){var O=function(){function S(h){this.o=new Int32Array(0),this.io=-1,this.Hg=this.size=this.Bl=0,this.stride=h}return S.prototype.jd=function(h){h<this.Bl?(this.o[h*this.stride]=this.io,this.io=h):this.Bl--,this.size--},S.prototype.T=function(h,l){return this.o[h*this.stride+l]},S.prototype.S=function(h,l,s){this.o[h*this.stride+l]=s},S.prototype.Ce=function(){var h=this.io;if(h==-1){if(this.Bl==this.Hg){if(2147483647<(h=this.Hg!=0?d.O.truncate(3*(this.Hg+1)/2):1)&&(h=2147483647),h==this.Hg)throw d.i.ce();this.Dz(h)}h=this.Bl,this.Bl++}else this.io=this.o[h*this.stride];this.size++;for(var l=h*this.stride;l<h*this.stride+this.stride;l++)this.o[l]=-1;return h},S.prototype.Ll=function(h){var l=this.io;if(l==-1){if(this.Bl==this.Hg){if(2147483647<(l=this.Hg!=0?d.O.truncate(3*(this.Hg+1)/2):1)&&(l=2147483647),l==this.Hg)throw d.i.ce();this.Dz(l)}l=this.Bl,this.Bl++}else this.io=this.o[l*this.stride];this.size++;for(var s=l*this.stride,a=0;a<h.length;a++)this.o[s+a]=h[a];return l},S.prototype.mj=function(h){this.io=-1,this.size=this.Bl=0,h&&(this.o=null,this.Hg=0)},S.prototype.De=function(h){h>this.Hg&&this.Dz(h)},S.prototype.tx=function(h,l){h*=this.stride,l*=this.stride;for(var s=0;s<this.stride;s++){var a=this.o[l+s];this.o[l+s]=this.o[h+s],this.o[h+s]=a}},S.prototype.gC=function(h,l,s){var a=this.o[this.stride*l+s];this.o[this.stride*l+s]=this.o[this.stride*h+s],this.o[this.stride*h+s]=a},S.LG=function(h){return 0<=h},S.prototype.Dz=function(h){this.o==null&&(this.o=new Int32Array(0));var l=new Int32Array(this.stride*h);l.set(this.o,0),this.o=l,this.Hg=h},S}();d.$c=O}(Y||(Y={})),function(d){var O,S;(S=O||(O={}))[S.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",S[S.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",S[S.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",S[S.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var h=function(){function s(a){this.Be=a,this.yh=NaN,this.eH=new d.ig,this.fH=new d.ig,this.ms=new d.Nc,this.ns=new d.Nc}return s.prototype.compare=function(a,c,p){if(a=a.ja(p),this.Be.pB(c,this.eH),this.Be.pB(a,this.fH),c=this.eH.get(),a=this.fH.get(),this.ms.K(c.sa,c.pa),this.ns.K(a.sa,a.pa),this.ms.va<this.ns.oa)return-1;if(this.ms.oa>this.ns.va)return 1;p=c.na==c.la;var y=a.na==a.la;if(p||y){if(p&&y)return 0;if(c.na==a.na&&c.sa==a.sa)return p?1:-1;if(c.la==a.la&&c.pa==a.pa)return p?-1:1}return(p=c.Pe(this.yh,this.ms.oa))==(y=a.Pe(this.yh,this.ns.oa))&&((y=.5*((p=Math.min(c.la,a.la))+this.yh))==this.yh&&(y=p),p=c.Pe(y,this.ms.oa),y=a.Pe(y,this.ns.oa)),p<y?-1:p>y?1:0},s.prototype.aK=function(a){this.yh=a},s}(),l=function(){function s(a){this.ib=a,this.WH=new d.ig,this.Bf=new d.h,this.wA=new d.Nc}return s.prototype.kX=function(a){this.Bf.L(a)},s.prototype.compare=function(a,c){return this.ib.pB(a.ja(c),this.WH),a=this.WH.get(),this.wA.K(a.sa,a.pa),this.Bf.x<this.wA.oa?-1:this.Bf.x>this.wA.va?1:(a=a.Pe(this.Bf.y,this.Bf.x),this.Bf.x<a?-1:this.Bf.x>a?1:0)},s}();O=function(){function s(){this.hH=this.Di=this.Gi=this.kA=this.Yn=this.ye=this.Kc=this.jh=this.ge=null,this.Go=this.xg=-1,this.gH=!0,this.pA=!1,this.lA=NaN,this.Ni=new d.Md,this.bO=2147483647,this.aO=d.O.truncate(-2147483648),this.cg=this.ae=this.Hl=this.Cq=this.Cm=this.Bq=this.Os=this.Re=-1,this.wa=0}return s.prototype.yy=function(a){this.lA=a},s.prototype.Ym=function(){this.ge==null&&(this.ge=new d.$c(8));var a=this.ge.Ce();return this.ge.S(a,1,0),a},s.prototype.vU=function(){this.Kc==null&&(this.Kc=new d.$c(8));var a=this.Kc.Ce();this.Kc.S(a,2,0),this.Kc.S(a,3,0);var c=this.Kc.Ce();return this.Kc.S(c,2,0),this.Kc.S(c,3,0),this.JJ(a,c),this.JJ(c,a),a},s.prototype.mI=function(){this.ye==null&&(this.ye=new d.$c(8));var a=this.ye.Ce();return this.ye.S(a,2,0),a},s.prototype.TW=function(a,c){this.ge.S(a,7,c)},s.prototype.mn=function(a,c){this.ge.S(a,2,c)},s.prototype.SW=function(a,c){this.ge.S(a,1,c)},s.prototype.lX=function(a,c){this.ge.S(a,3,c)},s.prototype.iX=function(a,c){this.ge.S(a,4,c)},s.prototype.cr=function(a,c){this.ge.S(a,5,c)},s.prototype.eR=function(a){return this.ge.T(a,5)},s.prototype.RW=function(a,c){this.ge.S(a,6,c)},s.prototype.cN=function(a,c){this.RW(c,a)},s.prototype.IJ=function(a,c){this.Kc.S(a,1,c)},s.prototype.JJ=function(a,c){this.Kc.S(a,4,c)},s.prototype.Tl=function(a,c){this.Kc.S(a,5,c)},s.prototype.Sl=function(a,c){this.Kc.S(a,6,c)},s.prototype.$W=function(a,c){this.Kc.S(a,2,c)},s.prototype.$w=function(a,c){this.Kc.S(a,3,c)},s.prototype.LF=function(a){return this.Kc.T(a,3)},s.prototype.Gt=function(a,c){this.Kc.S(a,7,c)},s.prototype.EK=function(a,c){if(this.mm(a)!=-1)for(c=c?-1:a,a=this.mm(a);a!=-1;a=this.js(a))this.g.Ra(this.tj(a),this.Cq,c)},s.prototype.yx=function(a,c){a!=-1&&(this.EK(a,c),this.EK(this.xa(a),c))},s.prototype.Dt=function(a,c){this.ye.S(a,1,c)},s.prototype.Vg=function(a,c){this.ye.S(a,2,c)},s.prototype.jn=function(a,c){this.ye.S(a,3,c),this.NW(a,this.dR(c)),this.MW(c,a)},s.prototype.MW=function(a,c){this.ye.S(a,4,c)},s.prototype.NW=function(a,c){this.ye.S(a,5,c)},s.prototype.DJ=function(a,c){this.ye.S(a,6,c)},s.prototype.BJ=function(a,c){this.ye.S(a,7,c)},s.prototype.AJ=function(a,c){this.Yn.write(a,c)},s.prototype.CJ=function(a,c){this.kA.write(a,c)},s.prototype.kY=function(a){var c=0,p=0,y=this.AF(a),v=new d.h,_=new d.h,x=new d.h;this.Yr(y,v),_.L(v);var T=y;do this.lm(T,x),p+=d.h.tb(_,x),this.$e(this.xa(T))!=a&&(c+=(x.x-v.x-(_.x-v.x))*(x.y-v.y+(_.y-v.y))*.5),_.L(x),T=this.jc(T);while(T!=y);this.Yn.write(a,c),this.kA.write(a,p)},s.prototype.PU=function(a,c){var p=new h(this),y=new d.Yj;y.De(d.O.truncate(this.wa/2)),y.Vo(p);for(var v=new d.ia(0),_=this.$g(),x=null,T=0,C=new d.h,A=this.Re;A!=-1;A=this.Rf(A)){if(!(255&++T||c==null||c.progress(-1,-1)))throw d.i.WC();var R=this.Me(A);if(R!=-1){if(v.Bh(0),!this.gY(y,_,v,R)){this.D(A,C),p.aK(C.y);var F=R;do{var N=this.Ab(F,_);N!=-1&&(y.vd(N,-1),this.Kb(F,_,-2)),F=this.jc(this.xa(F))}while(R!=F);F=R;do(N=this.Ab(F,_))==-1&&(N=y.addElement(F,-1),v.add(N)),F=this.jc(this.xa(F));while(R!=F)}for(R=v.size-1;0<=R;R--)N=v.get(R),F=y.ja(N),this.Kb(this.xa(F),_,N),this.OU(y,N,a)}else this.cz(A)==-1&&(x==null&&(x=new l(this)),this.D(A,C),x.kX(C),F=y.IW(x),R=this.Hl,F!=-1&&(N=y.ja(F),this.$e(N)==this.$e(this.xa(N))&&(N=this.OF(y,F)),N!=-1&&(R=this.$e(N))),this.cN(R,A))}this.Jg(_)},s.prototype.OU=function(a,c,p){var y=a.ja(c),v=this.$e(y);if(this.Gn(v)==-1){var _=this.OF(a,c),x=this.xa(y),T=this.$e(x);this.Kp(v),this.Kp(T);var C=this.Gn(v),A=this.Gn(T);if(_==-1&&C==-1&&(T==v?(this.jn(T,this.Hl),C=A=this.Hl):(A==-1&&(this.jn(T,this.Hl),A=this.Hl),this.jn(v,T),C=T)),_!=-1){var R=this.$e(_);A==-1&&(0>=this.Kp(R)?(A=this.Gn(R),this.jn(T,A)):(this.jn(T,R),A=R),T==v&&(C=A))}C==-1&&this.hY(v,T),p==0?this.jW(a,c,y,_,v,T):p==5?this.kW(a,c,y,x,v,T):p==4&&this.iW(y,_,v,T)}},s.prototype.jW=function(a,c,p,y,v,_){var x=this.hk(v);if(y!=-1){var T=this.hk(_),C=this.hk(this.$e(y));y=x&T&C,C^=C&this.dh(p),(C|=y)!=0&&(this.Vg(_,T|C),this.Vg(v,C|x),x=x||C)}for(c=a.lb(c);c!=-1&&(y=a.ja(c),p=this.$e(this.xa(y)),v=this.hk(p),_=this.dh(y),T=this.$e(y),y=v&(C=this.hk(T))&x,x^=x&_,(x|=y)!=0);c=a.lb(c))this.Vg(p,v|x),this.Vg(T,C|x)},s.prototype.kW=function(a,c,p,y,v,_){if(v!=_){p=this.Ab(p,this.cg),p+=this.Ab(y,this.cg),y=0;var x=new d.ia(0),T=new d.ia(0);T.add(0);for(var C=a.rc(-1);C!=c;C=a.lb(C)){var A=a.ja(C),R=this.xa(A),F=this.$e(A),N=this.$e(R);if(F!=N){if(A=this.Ab(A,this.cg),y+=A+=this.Ab(R,this.cg),R=!1,x.size!=0&&x.Fc()==N&&(T.If(),x.If(),R=!0),this.Gn(N)==-1)throw d.i.Qa();R&&this.Gn(N)==F||(T.add(y),x.add(F))}}y+=p,x.size!=0&&x.Fc()==_&&(T.If(),x.If()),y!=0?T.Fc()==0&&(a=this.g.ld,a=this.La(a),this.Vg(v,a)):T.Fc()!=0&&(a=this.g.ld,a=this.La(a),this.Vg(v,a))}},s.prototype.iW=function(a,c,p,y){var v=this.La(this.g.ld);if(c==-1)this.Vg(y,this.Go),1&(a=this.Ab(a,this.xg))?this.Vg(p,v):this.Vg(p,this.Go);else{var _=this.hk(y);_==0?(_=this.hk(this.$e(c)),this.Vg(y,_),1&(a=this.Ab(a,this.xg))?this.Vg(p,_==v?this.Go:v):this.Vg(p,_)):1&(a=this.Ab(a,this.xg))?this.Vg(p,_==v?this.Go:v):this.Vg(p,_)}},s.prototype.gY=function(a,c,p,y){var v=y,_=-1,x=-1,T=0;do{if(T==2)return!1;var C=this.Ab(v,c);if(C!=-1){if(_!=-1)return!1;_=C}else{if(x!=-1)return!1;x=v}T++,v=this.jc(this.xa(v))}while(y!=v);return x!=-1&&_!=-1&&(this.Kb(a.ja(_),c,-2),a.Sj(_,x),p.add(_),!0)},s.prototype.hY=function(a,c){var p=this.Kp(a);if(p!=0){var y=this.Kp(c);0<p&&0>y||0>p&&0<y?this.jn(a,c):(c=this.Gn(c))!=-1&&this.jn(a,c)}},s.prototype.vP=function(a,c){this.Cq=this.g.Gd();for(var p=0,y=c.size;p<y;p++){var v=c.get(p),_=this.g.Pa(v,this.Cm),x=this.g.Qf(this.g.bd(v)),T=this.g.ic(x);if(d.aa.Hc(T)){var C=this.g.U(v);if(C!=-1){var A=this.g.Pa(C,this.Cm);if(_!=A){var R=this.vU(),F=this.xa(R),N=this.jh.Ce();this.jh.S(N,0,v),this.jh.S(N,1,-1),this.Gt(R,N),this.IJ(R,_),(N=this.Me(_))==-1?(this.mn(_,R),this.Tl(R,F),this.Sl(F,R)):(_=this.te(N),this.Tl(N,F),this.Sl(F,N),this.Sl(_,R),this.Tl(R,_)),this.IJ(F,A),(_=this.Me(A))==-1?(this.mn(A,F),this.Sl(R,F),this.Tl(F,R)):(A=this.te(_),this.Tl(_,R),this.Sl(R,_),this.Sl(A,F),this.Tl(F,A)),x=this.La(x),a==0?(this.Kb(F,this.ae,0),this.Kb(R,this.ae,T==1736?x:0)):a==5?(A=new d.h,this.g.D(v,A),v=new d.h,this.g.D(C,v),_=C=0,0>A.compare(v)?C=1:_=-1,this.Kb(F,this.ae,0),this.Kb(R,this.ae,0),this.Kb(R,this.cg,C),this.Kb(F,this.cg,_)):a==7?(this.Kb(F,this.ae,this.Go),this.Kb(R,this.ae,T==1736?x:0)):a==4&&(this.Kb(F,this.ae,0),this.Kb(R,this.ae,0),this.Kb(R,this.xg,1),this.Kb(F,this.xg,1)),T=T==1736?this.aO:0,this.$w(R,x|T),this.$w(F,x|T)}}}}},s.prototype.VT=function(a,c){var p=this.mm(c);if(p!=-1){var y=this.mm(a);this.jh.S(p,1,y),this.Gt(a,p),this.Gt(c,-1)}a=this.xa(a),c=this.xa(c),(p=this.mm(c))!=-1&&(y=this.mm(a),this.jh.S(p,1,y),this.Gt(a,p),this.Gt(c,-1))},s.prototype.IX=function(a){function c(X,te){return y.HO(X,te)}var p=new d.ia(0);p.Jb(10);for(var y=this,v=this.Re;v!=-1;v=this.Rf(v)){p.clear(!1);var _=this.Me(v);if(_!=-1){var x=_;do p.add(x),x=this.jc(this.xa(x));while(x!=_);if(1<p.size){if(x=!0,2<p.size)p.Vd(0,p.size,c),p.add(p.get(0));else if(0<this.GO(p.get(0),p.get(1))){var T=p.get(0);p.set(0,p.get(1)),p.set(1,T)}else x=!1;for(var C=T=p.get(0),A=this.uf(C),R=this.xa(C),F=-1,N=1,B=p.size;N<B;N++){var q=p.get(N),U=this.xa(q),K=this.jk(U);if(K==A&&q!=C){if(a==0)F=this.LF(C)|this.LF(q),this.$w(C,F),this.$w(R,F),this.Kb(C,this.ae,this.Ab(C,this.ae)|this.Ab(q,this.ae)),this.Kb(R,this.ae,this.Ab(R,this.ae)|this.Ab(U,this.ae));else if(this.cg!=-1)F=this.Ab(C,this.cg)+this.Ab(q,this.cg),U=this.Ab(R,this.cg)+this.Ab(U,this.cg),this.Kb(C,this.cg,F),this.Kb(R,this.cg,U);else{if(a==7)return void(this.Ni=new d.Md(5,v,-1));this.xg!=-1&&(F=this.Ab(C,this.xg)+this.Ab(q,this.xg),U=this.Ab(R,this.xg)+this.Ab(U,this.xg),this.Kb(C,this.xg,F),this.Kb(R,this.xg,U))}this.VT(C,q),this.Ly(q),F=C,p.set(N,-1),q==T&&(p.set(0,-1),T=-1)}else this.yx(F,!1),F=-1,C=q,A=K,R=U}if(this.yx(F,!1),F=-1,x){for(T=-1,N=0,B=p.size;N<B;N++)if((q=p.get(N))!=-1){if(T==-1)C=T=q,A=this.uf(C),R=this.xa(C);else if(q!=C&&(U=this.xa(q),K=this.jk(U),this.Sl(R,q),this.Tl(q,R),C=q,A=K,R=U,a==7&&(this.Ab(q,this.ae)|this.Ab(this.te(q),this.ae))==(1|this.Go)))return void(this.Ni=new d.Md(5,v,-1))}this.mn(v,T)}else{for(T=-1,N=0,B=p.size;N<B;N++)if((q=p.get(N))!=-1){T=q;break}_!=T&&this.mn(v,T)}}}}},s.prototype.WN=function(){for(var a=-1,c=this.$g(),p=this.Re;p!=-1;p=this.Rf(p)){var y=this.Me(p);if(y!=-1){var v=y;do{if(this.Ab(v,c)!=1){var _=this.mI();this.Dt(_,v),this.BJ(_,a),a!=-1&&this.DJ(a,_),a=_;var x=0,T=v;do x|=this.Ab(T,this.ae),this.$W(T,_),this.Kb(T,c,1),T=this.jc(T);while(T!=v);this.Vg(_,x)}v=this.jc(this.xa(v))}while(v!=y)}}_=this.mI(),this.Dt(_,-1),this.BJ(_,a),a!=-1&&this.DJ(a,_),this.Hl=_,this.Yn=d.be.qf(this.ye.size,NaN),this.kA=d.be.qf(this.ye.size,NaN),this.AJ(this.Hl,1/0),this.CJ(this.Hl,1/0),this.Jg(c)},s.prototype.sR=function(a,c,p){if((c=c!=-1?c:this.Me(a))==-1)return-1;for(a=c;;){if(this.Ab(c,p)!=1)return c;if((c=this.jc(this.xa(c)))==a)return-1}},s.prototype.yW=function(){for(var a=this.$g(),c=this.Re;c!=-1;c=this.Rf(c))for(var p=-1;;){var y=this.sR(c,p,a);if(y==-1)break;p=this.jc(this.xa(y));for(var v=y;;){var _=this.jc(v),x=this.te(v),T=this.xa(v);if(x==T){if(this.IP(v),p!=v&&p!=T||(p=-1),v==y||x==y){if(v==(y=_)||x==y)break;v=_;continue}}else this.Kb(v,a,1);if((v=_)==y)break}}this.Jg(a)},s.prototype.MB=function(a,c,p,y,v){this.Ug(),this.gH=v,this.g=a,this.Bq=this.g.aF(),(a=new d.ia(0)).Jb(p!=null?this.g.I(p.get(0)):this.g.fd);var _=0,x=1,T=p!=null?p.get(0):this.g.ld;for(v=1;T!=-1;){this.g.HJ(T,this.Bq,x),x<<=1;for(var C=this.g.Ob(T);C!=-1;C=this.g.Rb(C))for(var A=this.g.Xa(C),R=0,F=this.g.Ja(C);R<F;R++)a.add(A),A=this.g.U(A);d.aa.Rn(this.g.ic(T))||(_+=this.g.da(T)),p!=null?(T=v<p.size?p.get(v):-1,v++):T=this.g.ue(T)}for(this.Go=x,this.wa=a.size,this.g.nx(a,this.wa),this.jh==null&&(this.jh=new d.$c(2),this.ge=new d.$c(8),this.Kc=new d.$c(8),this.ye=new d.$c(8)),this.jh.De(this.wa),d.mp.zp(y),this.ge.De(this.wa+10),this.Kc.De(2*this.wa+32),this.ye.De(Math.max(32,_)),this.Cm=this.g.Gd(),p=new d.h,v=0,_=new d.h,p.Rc(),x=0;x<=this.wa;x++)if(x<this.wa?(A=a.get(x),this.g.D(A,_)):_.Rc(),!p.qb(_)){if(v<x){for(A=this.Ym(),F=R=-1;v<x;v++)F=a.get(v),this.g.Ra(F,this.Cm,A),T=this.jh.Ce(),this.jh.S(T,0,F),this.jh.S(T,1,R),R=T,C=this.g.bd(F),T=this.g.Qf(C),T=this.La(T),this.SW(A,this.xd(A)|T);this.TW(A,R),this.cr(A,this.g.Ua(F)),this.Os!=-1&&this.iX(this.Os,A),this.lX(A,this.Os),this.Os=A,this.Re==-1&&(this.Re=A)}v=x,p.L(_)}d.mp.zp(y),this.ae=this.$g(),c==5&&(this.cg=this.$g()),c==4&&(this.xg=this.$g()),this.vP(c,a),this.Ni.Jj==0&&(this.IX(c),this.Ni.Jj==0&&(isNaN(this.lA)||this.xO()?(this.WN(),this.Ni.Jj==0&&(this.Jg(this.ae),this.ae=-1,this.gH&&this.PU(c,y))):this.pA=!0))},s.prototype.Ly=function(a){var c=this.jc(a),p=this.te(a),y=this.xa(a),v=this.jc(y),_=this.te(y);c!=y&&(this.Sl(_,c),this.Tl(c,_)),p!=y&&(this.Sl(p,v),this.Tl(v,p)),p=this.jk(a),this.Me(p)==a&&(v!=a?this.mn(p,v):this.mn(p,-1)),v=this.jk(y),this.Me(v)==y&&(c!=y?this.mn(v,c):this.mn(v,-1)),this.Kc.jd(a),this.Kc.jd(y)},s.prototype.OF=function(a,c){for(;;){if((c=a.we(c))==-1)return-1;var p=a.ja(c);if(this.$e(p)!=this.$e(this.xa(p)))return p}},s.prototype.dr=function(a,c){var p;p===void 0&&(p=!0),this.MB(a,0,null,c,p)},s.prototype.vJ=function(a,c,p){var y=new d.ia(0);y.add(c),this.MB(a,4,y,p,a.ic(c)==1736)},s.prototype.wJ=function(a,c,p){var y=new d.ia(0);y.add(c),this.MB(a,5,y,p,!0)},s.prototype.Ug=function(){this.g!=null&&(this.Bq!=-1&&(this.g.xW(this.Bq),this.Bq=-1),this.Cm!=-1&&(this.g.Td(this.Cm),this.Cm=-1),this.Cq!=-1&&(this.g.Td(this.Cq),this.Cq=-1),this.ae!=-1&&(this.Jg(this.ae),this.ae=-1),this.cg!=-1&&(this.Jg(this.cg),this.cg=-1),this.xg!=-1&&(this.Jg(this.xg),this.xg=-1),this.g=null,this.ge.mj(!0),this.jh.mj(!0),this.Os=this.Re=-1,this.Kc!=null&&this.Kc.mj(!0),this.Gi!=null&&(this.Gi.length=0),this.Di!=null&&(this.Di.length=0),this.hH!=null&&(this.hH.length=0),this.ye!=null&&this.ye.mj(!0),this.Hl=-1,this.Yn=null)},s.prototype.Me=function(a){return this.ge.T(a,2)},s.prototype.D=function(a,c){this.g.dG(this.eR(a),c)},s.prototype.xd=function(a){return this.ge.T(a,1)},s.prototype.Rf=function(a){return this.ge.T(a,4)},s.prototype.cz=function(a){return this.ge.T(a,6)},s.prototype.km=function(a){return this.ge.T(a,7)},s.prototype.js=function(a){return this.jh.T(a,1)},s.prototype.tj=function(a){return this.jh.T(a,0)},s.prototype.ng=function(a,c){return(c=this.Di[c]).size<=a?-1:c.read(a)},s.prototype.nn=function(a,c,p){(c=this.Di[c]).size<=a&&c.resize(this.ge.size,-1),c.write(a,p)},s.prototype.Dp=function(){this.Di==null&&(this.Di=[]);for(var a=d.ia.qf(this.ge.Hg,-1),c=0,p=this.Di.length;c<p;c++)if(this.Di[c]==null)return this.Di[c]=a,c;return this.Di.push(a),this.Di.length-1},s.prototype.Ep=function(a){this.Di[a]=null},s.prototype.jk=function(a){return this.Kc.T(a,1)},s.prototype.uf=function(a){return this.jk(this.xa(a))},s.prototype.xa=function(a){return this.Kc.T(a,4)},s.prototype.te=function(a){return this.Kc.T(a,5)},s.prototype.jc=function(a){return this.Kc.T(a,6)},s.prototype.$e=function(a){return this.Kc.T(a,2)},s.prototype.af=function(a){return this.hk(this.Kc.T(a,2))},s.prototype.mm=function(a){return this.Kc.T(a,7)},s.prototype.Yr=function(a,c){this.D(this.jk(a),c)},s.prototype.lm=function(a,c){this.D(this.uf(a),c)},s.prototype.dh=function(a){return this.Kc.T(a,3)&this.bO},s.prototype.Ab=function(a,c){return(c=this.Gi[c]).size<=a?-1:c.read(a)},s.prototype.Kb=function(a,c,p){(c=this.Gi[c]).size<=a&&c.resize(this.Kc.size,-1),c.write(a,p)},s.prototype.$g=function(){this.Gi==null&&(this.Gi=[]);for(var a=d.ia.qf(this.Kc.Hg,-1),c=0,p=this.Gi.length;c<p;c++)if(this.Gi[c]==null)return this.Gi[c]=a,c;return this.Gi.push(a),this.Gi.length-1},s.prototype.Jg=function(a){this.Gi[a]=null},s.prototype.IP=function(a){var c=this.$e(a),p=this.xa(a),y=this.jc(a);y==p&&(y=this.jc(y))==a&&(y=-1);var v=this.AF(c);v!==a&&v!=p||this.Dt(c,y),p=this.Yn.read(c),isNaN(p)||(this.AJ(c,NaN),this.CJ(c,NaN)),this.yx(a,!0),this.Ly(a)},s.prototype.JP=function(a){for(var c=0,p=a.size;c<p;c++){var y=a.get(c),v=this.$e(this.xa(y));this.Dt(this.$e(y),-1),this.Dt(v,-1),this.yx(y,!0),this.Ly(y)}},s.prototype.AF=function(a){return this.ye.T(a,1)},s.prototype.hk=function(a){return this.ye.T(a,2)},s.prototype.Gn=function(a){return this.ye.T(a,3)},s.prototype.dR=function(a){return this.ye.T(a,4)},s.prototype.Kp=function(a){var c=this.Yn.read(a);return isNaN(c)&&(this.kY(a),c=this.Yn.read(a)),c},s.prototype.La=function(a){return this.g.KF(a,this.Bq)},s.prototype.Le=function(a){return this.g.Pa(a,this.Cm)},s.prototype.uR=function(a){return this.g.Pa(a,this.Cq)},s.prototype.tR=function(a,c){var p=this.Me(a);if(p==-1)return-1;var y=p,v=-1,_=-1;do{if(this.uf(y)==c)return y;if(v==-1){if((v=this.Me(c))==-1)break;_=v}if(this.uf(_)==a)return this.xa(_);y=this.jc(this.xa(y)),_=this.jc(this.xa(_))}while(y!=p&&_!=v);return-1},s.prototype.pB=function(a,c){c.Or(),c=c.get();var p=new d.h;this.Yr(a,p),c.Dc(p),this.lm(a,p),c.Qc(p)},s.prototype.HO=function(a,c){if(a==c)return 0;var p=new d.h;this.lm(a,p);var y=new d.h;return this.lm(c,y),p.qb(y)?0:(c=new d.h,this.Yr(a,c),(a=new d.h).uc(p,c),(p=new d.h).uc(y,c),d.h.nu(a,p))},s.prototype.GO=function(a,c){if(a==c)return 0;var p=new d.h;this.lm(a,p);var y=new d.h;return this.lm(c,y),p.qb(y)?0:(c=new d.h,this.Yr(a,c),(a=new d.h).uc(p,c),(p=new d.h).uc(y,c),0<=p.y&&0<a.y?d.h.nu(a,p):0)},s.prototype.xO=function(){for(var a=d.lc.ox(this.lA),c=new d.h,p=new d.h,y=new d.h,v=new d.h,_=new d.h,x=this.Re;x!=-1;x=this.Rf(x)){var T=this.Me(x);if(T!=-1){var C=T;this.Yr(C,c),this.lm(C,p),_.uc(p,c);var A=_.Sk();do{var R=C;if((C=this.jc(this.xa(C)))!=R){this.lm(C,y),v.uc(y,c),R=v.Sk();var F=v.wi(_);if(F*F/(R*A)*Math.min(R,A)<=a)return!1;_.L(v),A=R,p.L(y)}}while(C!=T)}}return!0},s}(),d.iu=O}(Y||(Y={})),function(d){var O=function(){function S(){this.j=null,this.oH=new d.h,this.pH=new d.h,this.Gj=null,this.Mv=!1,this.tl=-1}return S.prototype.cf=function(h){return h<this.Gj.length&&this.Gj[h]},S.prototype.dl=function(h,l,s,a){var c=d.aa.tf(this.j.g.ic(s));if(d.aa.tf(this.j.g.ic(l))!=2||c!=1)throw d.i.Qa();this.FP(h,l,s,a)},S.prototype.dr=function(h,l){this.j==null&&(this.j=new d.iu),this.j.dr(h,l)},S.prototype.Ft=function(h,l,s){for(d.Tk.V(h,l,s,!0),l=h.ld;l!=-1;l=h.ue(l))h.ic(l)==1736&&d.rn.V(h,l,-1,this.Mv,s);this.dr(h,s)},S.prototype.ME=function(h,l,s,a,c){var p=this.j.g;if(p.ic(h)==1736)for(h=p.Ob(h);h!=-1;h=p.Rb(h)){var y=p.Xa(h);this.j.Le(y),this.j.Le(p.U(y));var v=this.j.uR(y);if(v!=-1){var _=this.j.Ab(v,s);if(_!=1&&_!=2)if(this.cf(this.j.af(v))){this.j.Kb(v,s,1),_=p.vf(l,-1);var x=v,T=this.j.Le(y),C=1;do{var A=this.sm(y,c);p.ij(_,A),a!=-1&&this.j.nn(T,a,1),this.j.Kb(x,s,1),x=this.j.jc(x);do var R=(A=C==1?p.U(y):p.Ma(y))!=-1?this.j.Le(A):-1;while(R==T);var F=this.j.jk(x);if(F!=R){do R=(A=C==1?p.Ma(y):p.U(y))!=-1?this.j.Le(A):-1;while(R==T);F!=R?(R=F,A=this.j.tj(this.j.km(R))):C=-C}T=R,y=A}while(x!=v);p.kn(_,!0)}else this.j.Kb(v,s,2)}}},S.prototype.eF=function(){for(var h=this.j.$g(),l=new d.ia(0),s=this.j.Re;s!=-1;s=this.j.Rf(s)){var a=this.j.Me(s),c=a;if(a!=-1)do{if(this.j.Ab(c,h)!=1){var p=this.j.xa(c);this.j.Kb(p,h,1),this.j.Kb(c,h,1),this.cf(this.j.af(c))&&this.cf(this.j.af(p))&&l.add(c)}c=this.j.jc(this.j.xa(c))}while(c!=a)}this.j.Jg(h),this.j.JP(l)},S.prototype.sm=function(h,l){return l==-1?h:this.aS(h,l)},S.prototype.aS=function(h,l){var s=this.j.g,a=this.j.km(this.j.Le(h));do{var c=this.j.tj(a);if(s.Qf(s.bd(c))==l)return c;a=this.j.js(a)}while(a!=-1);return h},S.prototype.Ot=function(h,l,s){this.eF();var a=this.j.g,c=a.Ig(1736),p=this.j.$g();return this.uK(h,l,c,s,p,-1),this.j.Jg(p),d.rn.V(a,c,1,this.Mv,null),c},S.prototype.uK=function(h,l,s,a,c,p){for(this.ME(h,s,c,p,a),l!=-1&&this.ME(l,s,c,p,a),h=this.j.g,l=this.j.Re;l!=-1;l=this.j.Rf(l)){var y=this.j.Me(l);if(y!=-1){var v=y;do{var _=this.j.Ab(v,c);if(_!=1&&_!=2)if(this.cf(this.j.af(v))){_=h.vf(s,-1);var x=v;do{var T=this.j.mm(x);T!=-1?T=this.j.tj(T):(T=this.j.tj(this.j.mm(this.j.xa(x))),T=this.j.g.U(T)),T=this.sm(T,a),h.ij(_,T),this.j.Kb(x,c,1),p!=-1&&(T=this.j.Le(T),this.j.nn(T,p,1)),x=this.j.jc(x)}while(x!=v);h.kn(_,!0)}else this.j.Kb(v,c,2);v=this.j.jc(this.j.xa(v))}while(v!=y)}}},S.prototype.aY=function(h,l,s){var a=this.j.g,c=a.Ig(1736),p=a.Ig(1607),y=a.Ig(550);this.eF();var v=-1,_=this.j.$g(),x=this.j.Dp();for(this.uK(h,l,c,s,_,x),h=this.j.Re;h!=-1;h=this.j.Rf(h))if((l=this.j.Me(h))!=-1){var T=l;do{var C=this.j.Ab(T,_),A=this.j.Ab(this.j.xa(T),_);if((C|=A)==2)if(C=this.j.dh(T),this.cf(C)){var R=a.vf(p,-1),F=T;C=this.Yw(h,a),C=this.sm(C,s),a.ij(R,C),this.j.nn(h,x,1);do{if(C=this.j.uf(F),A=this.Yw(C,a),A=this.sm(A,s),a.ij(R,A),this.j.Kb(F,_,1),this.j.Kb(this.j.xa(F),_,1),this.j.nn(C,x,1),F=this.j.jc(F),C=this.j.Ab(F,_),(C|=A=this.j.Ab(this.j.xa(F),_))!=2)break;if(C=this.j.dh(F),!this.cf(C)){this.j.Kb(F,_,1),this.j.Kb(this.j.xa(F),_,1);break}}while(F!=T)}else this.j.Kb(T,_,1),this.j.Kb(this.j.xa(T),_,1);T=this.j.jc(this.j.xa(T))}while(T!=l)}for(h=this.j.Re;h!=-1;h=this.j.Rf(h))(C=this.j.ng(h,x))!=1&&(C=this.j.xd(h),this.cf(C)&&(v==-1&&(v=a.vf(y,-1)),(l=this.j.km(h))!=-1&&(l=this.j.tj(l),C=this.sm(l,s),a.ij(v,C))));return this.j.Ep(x),this.j.Jg(_),d.rn.V(a,c,1,this.Mv,null),(s=[])[0]=y,s[1]=p,s[2]=c,s},S.prototype.Yw=function(h,l){var s=-1;for(h=this.j.km(h);h!=-1;h=this.j.js(h)){var a=this.j.tj(h);s==-1&&(s=a);var c=this.j.La(l.Qf(l.bd(a)));if(this.cf(c)){s=a;break}}return s},S.prototype.lB=function(h,l){for(var s=this.jl(l),a=this.j.jk(l),c=this.j.uf(l),p=0,y=0,v=this.j.km(a);v!=-1;v=this.j.js(v)){var _=this.j.tj(v),x=h.bd(_),T=this.j.La(h.Qf(x));x=h.Xa(x),(T=!!(T&s))&&x==_&&(this.tl=l);var C=h.U(_);C!=-1&&this.j.Le(C)==c?(p++,T&&(this.tl===-1&&x==C&&(_=this.j.jc(l),this.cf(this.jl(_))&&(this.tl=_)),y++)):(_=h.Ma(_))!=-1&&this.j.Le(_)==c&&(p--,T&&(this.tl===-1&&x===_&&(_=this.j.jc(l),this.cf(this.jl(_))&&(this.tl=_)),y--))}return this.j.D(a,this.oH),this.j.D(c,this.pH),(y!=0?y:p)*(h=d.h.tb(this.oH,this.pH))},S.prototype.jl=function(h){return this.j.dh(h)|this.j.af(h)|this.j.af(this.j.xa(h))},S.prototype.xK=function(h){for(var l=this.j.xa(this.j.te(h)),s=-1;l!=h;){if(this.cf(this.jl(l))){if(s!=-1)return-1;s=l}l=this.j.xa(this.j.te(l))}return s!=-1?this.j.xa(s):-1},S.prototype.yK=function(h){for(var l=this.j.xa(this.j.jc(h)),s=-1;l!=h;){if(this.cf(this.jl(l))){if(s!=-1)return-1;s=l}l=this.j.xa(this.j.jc(l))}return s!=-1?this.j.xa(s):-1},S.prototype.mJ=function(h,l,s,a,c){var p=this.j.g,y=h,v=this.j.xa(y);this.j.Kb(y,s,1),this.j.Kb(v,s,1),this.tl=-1;for(var _=this.lB(p,y),x=y,T=-1,C=!1,A=1;;){var R=this.j.te(y);if(R==v)break;if(v=this.j.jc(v),this.j.xa(R)!=v){if((y=this.xK(y))==-1){C=!0;break}v=this.j.xa(y)}else y=R;if(y==h){T=h;break}if(R=this.jl(y),!this.cf(R))break;this.j.Kb(y,s,1),this.j.Kb(v,s,1),x=y,_+=this.lB(p,y),A++}if(T==-1)for(y=h,v=this.j.xa(y),T=y;(h=this.j.jc(y))!=v;){if(v=this.j.te(v),this.j.xa(h)!=v){if((y=this.yK(y))==-1){C=!0;break}v=this.j.xa(y)}else y=h;if(R=this.jl(y),!this.cf(R))break;this.j.Kb(y,s,1),this.j.Kb(v,s,1),T=y,_+=this.lB(p,y),A++}else if(this.tl!=-1&&(x=this.tl,T=this.j.te(this.tl),this.j.xa(T)!=this.j.jc(this.j.xa(x))&&(T=this.xK(x))==-1))throw d.i.Qa();for(0<=_||(y=T,T=this.j.xa(x),x=this.j.xa(y)),s=p.vf(l,-1),y=x,x=this.j.jk(x),C=this.j.uf(T)==x&&C,_=this.Yw(x,p),_=this.sm(_,c),p.ij(s,_),a!=-1&&this.j.nn(x,a,1),x=0,A=C?d.O.truncate((A+1)/2):-1;h=this.j.uf(y),_=this.Yw(h,p),_=this.sm(_,c),p.ij(s,_),x++,a!=-1&&this.j.nn(h,a,1),C&&x==A&&(s=p.vf(l,-1),p.ij(s,_)),y!=T;)if(h=this.j.jc(y),this.j.te(this.j.xa(y))!=this.j.xa(h)){if((y=this.yK(y))==-1)throw d.i.Qa()}else y=h},S.prototype.Pt=function(h){for(var l=this.j.g.Ig(1607),s=this.j.$g(),a=this.j.Re;a!=-1;a=this.j.Rf(a)){var c=this.j.Me(a),p=c;do this.j.Ab(p,s)!=1&&this.cf(this.jl(p))&&this.mJ(p,l,s,-1,h),p=this.j.jc(this.j.xa(p));while(p!=c)}return this.j.Jg(s),l},S.prototype.bY=function(h){for(var l=this.j.g,s=l.Ig(1607),a=l.Ig(550),c=this.j.$g(),p=this.j.Dp(),y=-1,v=this.j.Re;v!=-1;v=this.j.Rf(v)){var _=this.j.Me(v),x=_;do{var T=this.j.Ab(x,c);T!=1&&(T=this.jl(x),this.cf(T)&&this.mJ(x,s,c,p,h)),x=this.j.jc(this.j.xa(x))}while(x!=_)}for(v=this.j.Re;v!=-1;v=this.j.Rf(v))(T=this.j.ng(v,p))!=1&&(T=this.j.xd(v),this.cf(T)&&(y==-1&&(y=l.vf(a,-1)),(_=this.j.km(v))!=-1&&(_=this.j.tj(_),_=this.sm(_,h),l.ij(y,_))));return this.j.Jg(c),this.j.Ep(p),(h=[])[0]=a,h[1]=s,h},S.prototype.mr=function(){for(var h=this.j.g,l=h.Ig(550),s=h.vf(l,-1),a=this.j.Re;a!=-1;a=this.j.Rf(a))if(this.cf(this.j.xd(a))){for(var c=-1,p=this.j.km(a);p!=-1;p=this.j.js(p)){var y=this.j.tj(p);c==-1&&(c=y);var v=this.j.La(h.Qf(h.bd(y)));if(this.cf(v)){c=y;break}}h.ij(s,c)}return l},S.prototype.bq=function(h){this.Gj=[];for(var l=0;l<h;l++)this.Gj[l]=!1},S.aW=function(h,l,s){var a=h.Ia(),c=Array(1e3);d.O.$u(c,null);var p=d.O.lg(1e3,0),y=h.I(),v=!0,_=l.Db()==2;if(l.Db()!=1&&l.Db()!=2)throw d.i.Qa();for(var x=0;x<y;){var T=d.O.truncate(h.lW(c,x)-x);_?d.hd.sK(l,c,T,s,p):d.hd.tK(l,c,T,s,p);for(var C=0,A=0;A<T;A++)p[A]==0&&(v&&(v=!1,a.Fd(h,0,x)),C!=A&&a.Fd(h,x+C,x+A),C=A+1);v||C==T||a.Fd(h,x+C,x+T),x+=T}return v?h:a},S.zG=function(h,l,s){return h instanceof d.de?S.aW(h,l,s):l instanceof d.Sa?h.B()||l.B()?h.Ia():d.Tk.zU(s,h,l)?d.Tk.CO(h,l):h.Ia():S.bW(h,l,s)},S.Av=function(h,l,s,a){var c=new d.l;h.A(c);var p=new d.l;l.A(p);var y=new d.l;if(y.K(c),y.Zb(p),s=d.ta.Wd(s,y,!0),(y=new d.l).K(p),p=d.ta.Er(s),y.W(p,p),!c.isIntersecting(y)){if(h.Db()<=l.Db())return S.ki(S.Xe(h.Ia()),h,"&");if(h.Db()>l.Db())return S.ki(S.Xe(l.Ia()),h,"&")}return p=new S,y=(c=new d.gd).Ib(S.Xe(h)),l=c.Ib(S.Xe(l)),p.Ft(c,s,a),a=p.Av(y,l),h=S.ki(c.Ne(a),h,"&"),d.aa.Hc(h.getType())&&(h.Ch(2,s),h.getType()==1736&&h.fm()),h},S.bW=function(h,l,s){if(h.B()||l.B())return h.Ia();var a=[null],c=[0],p=l.Db()==2;if(l.Db()!=1&&l.Db()!=2)throw d.i.Qa();return a[0]=h.D(),p?d.hd.sK(l,a,1,s,c):d.hd.tK(l,a,1,s,c),c[0]==0?h.Ia():h},S.prototype.LU=function(h,l,s,a,c){if(h.B())return h;var p=new d.gd;return h=p.Ib(h),this.Mk(p,h,l,s,a,c)},S.prototype.NU=function(h,l,s,a,c,p){if(c&&h.ic(l)!=550){var y=new d.RC;y.TX(h,s),y.Ng?(d.Tk.V(h,s,p,!0),c=!1):this.j.yy(s)}else d.Tk.V(h,s,p,!0),c=!1;if(a&&h.ic(l)!=550?this.j.wJ(h,l,p):this.j.vJ(h,l,p),this.j.pA)return this.j.Ug(),this.j=null,this.Mk(h,l,s,a,!1,p);if(this.j.yy(NaN),p=this.j.La(l),this.bq(p+1),this.Gj[p]=!0,h.ic(l)==1736||a&&h.ic(l)!=550)return h.Yo(l,0),l=this.Ot(l,-1,-1),(h=h.Ne(l)).Yo(0),c?h.Ch(1,0):(h.Ch(2,s),h.fm()),h;if(h.ic(l)==1607)return l=this.Pt(-1),h=h.Ne(l),c||h.Ch(2,s),h;if(h.ic(l)==550)return l=this.mr(),h=h.Ne(l),c||h.Ch(2,s),h;throw d.i.Qa()},S.prototype.Mk=function(h,l,s,a,c,p){this.j=new d.iu;try{return this.NU(h,l,s,a,c,p)}finally{this.j.Ug()}},S.Mk=function(h,l,s,a,c){return new S().LU(h,l,s,a,c)},S.prototype.MU=function(h,l,s,a){this.Mv=h,this.j=new d.iu,h=l.In(s);var c=l.ic(s);if(h!=1||c==550?this.j.vJ(l,s,a):this.j.wJ(l,s,a),!this.j.pA)if(this.j.yy(NaN),a=this.j.La(s),this.bq(a+1),this.Gj[a]=!0,l.ic(s)==1736||h==1&&l.ic(s)!=550)l.Yo(s,0),a=this.Ot(s,-1,-1),l.hC(a,s),l.BB(a);else if(l.ic(s)==1607)a=this.Pt(-1),l.hC(a,s),l.BB(a);else{if(l.ic(s)!=550)throw d.i.fa("internal error");a=this.mr(),l.hC(a,s),l.BB(a)}},S.prototype.im=function(h,l){var s=d.aa.tf(this.j.g.ic(h)),a=d.aa.tf(this.j.g.ic(l));if(s>a)return h;var c=this.j.La(h),p=this.j.La(l);if(this.bq(1+(c|p)),this.Gj[this.j.La(h)]=!0,s==2&&a==2)return this.Ot(h,l,-1);if(s==1&&a==2||s==1&&a==1)return this.Pt(-1);if(s==0)return this.mr();throw d.i.Qa()},S.prototype.Av=function(h,l){var s=d.aa.tf(this.j.g.ic(h)),a=d.aa.tf(this.j.g.ic(l)),c=this.j.La(h),p=this.j.La(l);if(this.bq(1+(c|p)),this.Gj[this.j.La(h)|this.j.La(l)]=!0,c=-1,1<this.j.g.ht.Aa&&(c=h),s==2&&a==2)return this.Ot(h,l,c);if(s==1&&0<a||a==1&&0<s)return this.Pt(c);if(s==0||a==0)return this.mr();throw d.i.Qa()},S.prototype.Pz=function(h,l){var s=d.aa.tf(this.j.g.ic(h)),a=d.aa.tf(this.j.g.ic(l)),c=this.j.La(h),p=this.j.La(l);if(this.bq(1+(c|p)),this.Gj[this.j.La(h)|this.j.La(l)]=!0,c=-1,1<this.j.g.ht.Aa&&(c=h),s==2&&a==2)return this.aY(h,l,c);if(s==1&&0<a||a==1&&0<s)return this.bY(c);if(s==0||a==0)return(h=[])[0]=this.mr(),h;throw d.i.Qa()},S.prototype.ep=function(h,l){var s=d.aa.tf(this.j.g.ic(h)),a=d.aa.tf(this.j.g.ic(l)),c=this.j.La(h),p=this.j.La(l);if(this.bq(1+(c|p)),this.Gj[this.j.La(h)]=!0,this.Gj[this.j.La(l)]=!0,s==2&&a==2)return this.Ot(h,l,-1);if(s==1&&a==1)return this.Pt(-1);if(s==0&&a==0)return this.mr();throw d.i.Qa()},S.Xe=function(h){var l=h.getType();return l==197?(l=new d.Da(h.description),h.B()||l.ad(h,!1),l):l==33?(l=new d.de(h.description),h.B()||l.add(h),l):l==322?(l=new d.Ta(h.description),h.B()||l.oc(h,!0),l):h},S.ki=function(h,l,s){var a=h.getType();return a==197?(l=new d.Da(h.description),h.B()||l.ad(h,!1),l):a!=33||s!="|"&&s!="^"?a==322?(l=new d.Ta(h.description),h.B()||l.oc(h,!0),l):a==33&&s=="-"&&l.getType()==33||a==550&&s=="&"&&l.getType()==33?(l=new d.Sa(h.description),h.B()||h.ve(0,l),l):h:(l=new d.de(h.description),h.B()||l.add(h),l)},S.im=function(h,l,s,a){if(h.B()||l.B()||h.Db()>l.Db())return S.ki(S.Xe(h),h,"-");var c=new d.l;h.A(c);var p=new d.l;if(l.A(p),!c.isIntersecting(p))return S.ki(S.Xe(h),h,"-");var y=new d.l;return y.K(c),y.Zb(p),s=d.ta.Wd(s,y,!0),p=new S,y=(c=new d.gd).Ib(S.Xe(h)),l=c.Ib(S.Xe(l)),p.Ft(c,s,a),a=p.im(y,l),a=c.Ne(a),h=S.ki(a,h,"-"),d.aa.Hc(h.getType())&&(h.Ch(2,s),h.getType()==1736&&h.fm()),h},S.VP=function(h,l,s){if(2>h.length)throw d.i.N("not enough geometries to dissolve");for(var a=0,c=0,p=h.length;c<p;c++)a=Math.max(h[c].Db(),a);var y=new d.l;y.Oa();var v=new d.gd,_=-1,x=0,T=-1;for(c=0,p=h.length;c<p;c++)if(h[c].Db()==a)if(h[c].B())T==-1&&(T=c);else{T=c,_==-1?_=v.Ib(S.Xe(h[c])):v.uN(_,S.Xe(h[c]));var C=new d.l;h[c].xc(C),y.Zb(C),x++}return 2>x?S.Xe(h[T]):(h=a==2,l=d.ta.Wd(a==0?l:null,y,!0),new S().Mk(v,_,l,h,!0,s))},S.Pz=function(h,l,s,a){var c=[null,null,null],p=new d.l;h.A(p);var y=new d.l;l.A(y);var v=new d.l;if(v.K(p),v.Zb(y),s=d.ta.Wd(s,v,!0),(v=new d.l).K(y),y=d.ta.Er(s),v.W(y,y),!p.isIntersecting(v)){if(h.Db()<=l.Db())return c[(h=S.ki(S.Xe(h.Ia()),h,"&")).Db()]=h,c;if(h.Db()>l.Db())return c[(h=S.ki(S.Xe(l.Ia()),h,"&")).Db()]=h,c}for(y=new S,v=(p=new d.gd).Ib(S.Xe(h)),l=p.Ib(S.Xe(l)),y.Ft(p,s,a),a=y.Pz(v,l),l=0;l<a.length;l++)y=S.ki(p.Ne(a[l]),h,"&"),d.aa.Hc(y.getType())&&(y.Ch(2,s),y.getType()==1736&&y.fm()),c[y.Db()]=y;return c},S.ep=function(h,l,s,a){if(h.Db()>l.Db())return S.ki(S.Xe(h),h,"^");if(h.Db()<l.Db()||h.B())return S.ki(S.Xe(l),h,"^");if(l.B())return S.ki(S.Xe(h),h,"^");var c=new d.l;h.A(c);var p=new d.l;l.A(p);var y=new d.l;return y.K(c),y.Zb(p),s=d.ta.Wd(s,y,!0),p=new S,y=(c=new d.gd).Ib(S.Xe(h)),l=c.Ib(S.Xe(l)),p.Ft(c,s,a),a=p.ep(y,l),h=S.ki(c.Ne(a),h,"^"),d.aa.Hc(h.getType())&&(h.Ch(2,s),h.getType()==1736&&h.fm()),h},S.prototype.LQ=function(h,l){var s=this.j.g;h=s.vf(h,-1);for(var a=l.size,c=0;c<a;c++){var p=l.get(c);s.ij(h,p)}s.kn(h,!0)},S.prototype.aX=function(h,l){for(var s=this.j.g,a=s.ld;a!=-1;a=s.ue(a))if(a==l)for(var c=s.Ob(a);c!=-1;c=s.Rb(c)){var p=s.Xa(c);if(p!=-1)for(var y=s.U(p);y!=-1;){p=this.j.Le(p);var v=this.j.Le(y);(p=this.j.tR(p,v))!=-1&&(v=this.j.xa(p),this.j.Kb(p,h,1),this.j.Kb(v,h,2)),p=y,y=s.U(p)}}},S.prototype.cW=function(h,l,s,a){s=this.j.La(s),a=this.j.La(a);var c=new d.ia(0);c.Jb(256);for(var p=this.j.g,y=this.j.$g(),v=this.j.Re;v!=-1;v=this.j.Rf(v)){var _=this.j.Me(v);if(_!=-1){var x=_;do{if(this.j.Ab(x,y)!=1){var T=x,C=x,A=!1,R=0;do{if(this.j.Kb(T,y,1),!A){var F=this.j.dh(T);F&a&&this.j.af(T)&s&&(C=T,A=!0)}A&&(c.add(this.j.tj(this.j.km(this.j.jk(T)))),h!=-1&&(F=this.j.dh(T))&a&&(R|=F=this.j.Ab(T,h))),T=this.j.jc(T)}while(T!=C);A&&0<this.j.Kp(this.j.$e(C))&&(T=p.Ig(1736),this.LQ(T,c),l!=-1&&p.HJ(T,l,R)),c.clear(!1)}x=this.j.jc(this.j.xa(x))}while(x!=_)}}this.j.Jg(y)},S.prototype.FP=function(h,l,s,a){this.j.yW();var c=-1;h!=-1&&(c=this.j.$g(),this.aX(c,s)),this.cW(c,h,l,s),c!=-1&&(this.j.Jg(c),c=-1);var p=this.j.g;for(h=0,c=p.ld;c!=-1;c=p.ue(c))c!=l&&c!=s&&(a.add(c),h++);a.Vd(0,h,function(y,v){return(y=p.wz(p.Ob(y)))<(v=p.wz(p.Ob(v)))?-1:y==v?0:1})},S.prototype.Ug=function(){this.j!=null&&(this.j.Ug(),this.j=null)},S}();d.Fg=O}(Y||(Y={})),function(d){var O=function(){function S(h){h!==void 0?this.setScale(h):this.RB()}return S.prototype.lx=function(){this.Lb=this.Gb=this.jb=this.eb=this.ab=this.bb=0},S.prototype.Nb=function(h){return this==h||h instanceof S&&this.bb==h.bb&&this.eb==h.eb&&this.Gb==h.Gb&&this.jb==h.jb&&this.ab==h.ab&&this.Lb==h.Lb},S.prototype.cc=function(){return d.O.uj(),d.O.uj(),d.O.uj(),d.O.uj(),d.O.uj(),d.O.uj()},S.prototype.Eh=function(h,l){var s=this.jb*h.x+this.ab*h.y+this.Lb;l.x=this.bb*h.x+this.eb*h.y+this.Gb,l.y=s},S.prototype.eY=function(h,l,s){for(var a=0;a<l;a++){var c=h[a].x,p=h[a].y,y=this.bb*c+this.eb*p+this.Gb;c=this.jb*c+this.ab*p+this.Lb,s[a]!=null?s[a].ma(y,c):s[a]=d.h.construct(y,c)}},S.prototype.multiply=function(h){S.multiply(this,h,this)},S.multiply=function(h,l,s){var a=h.bb*l.bb+h.jb*l.eb,c=h.eb*l.bb+h.ab*l.eb,p=h.Gb*l.bb+h.Lb*l.eb+l.Gb,y=h.bb*l.jb+h.jb*l.ab,v=h.eb*l.jb+h.ab*l.ab;h=h.Gb*l.jb+h.Lb*l.ab+l.Lb,s.bb=a,s.eb=c,s.Gb=p,s.jb=y,s.ab=v,s.Lb=h},S.prototype.Of=function(){var h=new S;return h.bb=this.bb,h.eb=this.eb,h.Gb=this.Gb,h.jb=this.jb,h.ab=this.ab,h.Lb=this.Lb,h},S.prototype.mC=function(h){if(!h.B()){for(var l=[],s=0;4>s;s++)l[s]=new d.h;h.nB(l),this.fY(l,l),h.Zw(l,4)}},S.prototype.fY=function(h,l){for(var s=0;s<h.length;s++){var a=new d.h,c=h[s];a.x=this.bb*c.x+this.eb*c.y+this.Gb,a.y=this.jb*c.x+this.ab*c.y+this.Lb,l[s]=a}},S.prototype.pS=function(h,l){h.B()||l.B()||h.R()==0||h.ca()==0?this.lx():(this.eb=this.jb=0,this.bb=l.R()/h.R(),this.ab=l.ca()/h.ca(),this.Gb=l.v-h.v*this.bb,this.Lb=l.G-h.G*this.ab)},S.prototype.dY=function(h){var l=new d.h,s=new d.h;l.ma(this.bb,this.jb),s.ma(this.eb,this.ab),l.sub(l);var a=.5*l.Sk();return l.ma(this.bb,this.jb),s.ma(this.eb,this.ab),l.add(s),h*(a>(l=.5*l.Sk())?Math.sqrt(a):Math.sqrt(l))},S.prototype.RB=function(){this.bb=1,this.jb=this.Gb=this.eb=0,this.ab=1,this.Lb=0},S.prototype.isIdentity=function(h){if(h!==void 0){var l=d.h.construct(0,1);return this.Eh(l,l),l.sub(d.h.construct(0,1)),l.Sk()>h*h?!1:(l.ma(0,0),this.Eh(l,l),!(l.Sk()>h*h)&&(l.ma(1,0),this.Eh(l,l),l.sub(d.h.construct(1,0)),l.Sk()<=h*h))}return this.bb==1&&this.ab==1&&this.eb==0&&this.Gb==0&&this.jb==0&&this.Lb==0},S.prototype.Bi=function(h){return Math.abs(this.bb*this.ab-this.jb*this.eb)<=2*h*(Math.abs(this.bb*this.ab)+Math.abs(this.jb*this.eb))},S.prototype.gg=function(h,l){this.bb=1,this.eb=0,this.Gb=h,this.jb=0,this.ab=1,this.Lb=l},S.prototype.setScale=function(h,l){l!==void 0?(this.bb=h,this.jb=this.Gb=this.eb=0,this.ab=l,this.Lb=0):this.setScale(h,h)},S.prototype.$B=function(){this.bb=0,this.eb=1,this.Gb=0,this.jb=1,this.Lb=this.ab=0},S.prototype.setRotate=function(h){this.pX(Math.cos(h),Math.sin(h))},S.prototype.pX=function(h,l){this.bb=h,this.eb=-l,this.Gb=0,this.jb=l,this.ab=h,this.Lb=0},S.prototype.shift=function(h,l){this.Gb+=h,this.Lb+=l},S.prototype.scale=function(h,l){this.bb*=h,this.eb*=h,this.Gb*=h,this.jb*=l,this.ab*=l,this.Lb*=l},S.prototype.flipX=function(h,l){this.bb=-this.bb,this.eb=-this.eb,this.Gb=h+l-this.Gb},S.prototype.flipY=function(h,l){this.jb=-this.jb,this.ab=-this.ab,this.Lb=h+l-this.Lb},S.prototype.rotate=function(h){var l=new S;l.setRotate(h),this.multiply(l)},S.prototype.inverse=function(h){if(h!==void 0){var l=this.bb*this.ab-this.eb*this.jb;l==0?h.lx():(l=1/l,h.Gb=(this.eb*this.Lb-this.Gb*this.ab)*l,h.Lb=(this.Gb*this.jb-this.bb*this.Lb)*l,h.bb=this.ab*l,h.eb=-this.eb*l,h.jb=-this.jb*l,h.ab=this.bb*l)}else this.inverse(this)},S}();d.Dd=O}(Y||(Y={})),function(d){var O=function(){function S(){}return S.prototype.lx=function(){this.hg=this.Lb=this.Gb=this.He=this.Fe=this.Ee=this.Ge=this.ab=this.eb=this.Ze=this.jb=this.bb=0},S.prototype.setScale=function(h,l,s){this.bb=h,this.eb=this.Ze=this.jb=0,this.ab=l,this.Fe=this.Ee=this.Ge=0,this.He=s,this.hg=this.Lb=this.Gb=0},S.prototype.setTranslate=function(h,l,s){this.bb=1,this.eb=this.Ze=this.jb=0,this.ab=1,this.Fe=this.Ee=this.Ge=0,this.He=1,this.Gb=h,this.Lb=l,this.hg=s},S.prototype.translate=function(h,l,s){this.Gb+=h,this.Lb+=l,this.hg+=s},S.prototype.mC=function(h){if(!h.B()){for(var l=new d.Nd[8],s=0;8>s;s++)l[s]=new d.Nd;h.nB(l),this.transform(l,8,l),h.Zw(l)}},S.prototype.transform=function(h,l,s){for(var a=0;a<l;a++){var c=new d.Nd,p=h[a];c.x=this.bb*p.x+this.eb*p.y+this.Ee*p.z+this.Gb,c.y=this.jb*p.x+this.ab*p.y+this.Fe*p.z+this.Lb,c.z=this.Ze*p.x+this.Ge*p.y+this.He*p.z+this.hg,s[a]=c}},S.prototype.fp=function(h){var l=new d.Nd;return l.x=this.bb*h.x+this.eb*h.y+this.Ee*h.z+this.Gb,l.y=this.jb*h.x+this.ab*h.y+this.Fe*h.z+this.Lb,l.z=this.Ze*h.x+this.Ge*h.y+this.He*h.z+this.hg,l},S.prototype.Ag=function(h){S.multiply(this,h,this)},S.multiply=function(h,l,s){var a=h.bb*l.bb+h.jb*l.eb+h.Ze*l.Ee,c=h.bb*l.jb+h.jb*l.ab+h.Ze*l.Fe,p=h.bb*l.Ze+h.jb*l.Ge+h.Ze*l.He,y=h.eb*l.bb+h.ab*l.eb+h.Ge*l.Ee,v=h.eb*l.jb+h.ab*l.ab+h.Ge*l.Fe,_=h.eb*l.Ze+h.ab*l.Ge+h.Ge*l.He,x=h.Ee*l.bb+h.Fe*l.eb+h.He*l.Ee,T=h.Ee*l.jb+h.Fe*l.ab+h.He*l.Fe,C=h.Ee*l.Ze+h.Fe*l.Ge+h.He*l.He,A=h.Gb*l.bb+h.Lb*l.eb+h.hg*l.Ee+l.Gb,R=h.Gb*l.jb+h.Lb*l.ab+h.hg*l.Fe+l.Lb;h=h.Gb*l.Ze+h.Lb*l.Ge+h.hg*l.He+l.hg,s.bb=a,s.jb=c,s.Ze=p,s.eb=y,s.ab=v,s.Ge=_,s.Ee=x,s.Fe=T,s.He=C,s.Gb=A,s.Lb=R,s.hg=h},S.inverse=function(h,l){var s=h.bb*(h.ab*h.He-h.Ge*h.Fe)-h.jb*(h.eb*h.He-h.Ge*h.Ee)+h.Ze*(h.eb*h.Fe-h.ab*h.Ee);if(s==0)throw d.i.fa("math singularity");var a=1/s;s=(h.ab*h.He-h.Ge*h.Fe)*a;var c=-(h.eb*h.He-h.Ge*h.Ee)*a,p=(h.eb*h.Fe-h.ab*h.Ee)*a,y=-(h.jb*h.He-h.Fe*h.Ze)*a,v=(h.bb*h.He-h.Ze*h.Ee)*a,_=-(h.bb*h.Fe-h.jb*h.Ee)*a,x=(h.jb*h.Ge-h.Ze*h.ab)*a,T=-(h.bb*h.Ge-h.Ze*h.eb)*a;a*=h.bb*h.ab-h.jb*h.eb;var C=-(h.Gb*s+h.Lb*c+h.hg*p),A=-(h.Gb*y+h.Lb*v+h.hg*_);h=-(h.Gb*x+h.Lb*T+h.hg*a),l.bb=s,l.jb=y,l.Ze=x,l.eb=c,l.ab=v,l.Ge=T,l.Ee=p,l.Fe=_,l.He=a,l.Gb=C,l.Lb=A,l.hg=h},S.prototype.Of=function(){var h=new S;return h.bb=this.bb,h.jb=this.jb,h.Ze=this.Ze,h.eb=this.eb,h.ab=this.ab,h.Ge=this.Ge,h.Ee=this.Ee,h.Fe=this.Fe,h.He=this.He,h.Gb=this.Gb,h.Lb=this.Lb,h.hg=this.hg,h},S}();d.JY=O}(Y||(Y={})),function(d){var O=function(h){function l(s){if(s!==void 0)s=h.call(this,s.cc(),s)||this;else{(s=h.call(this)||this).bg=[],s.bg[0]=0,s.Aa=1,s.uh=[];for(var a=0;10>a;a++)s.uh[a]=-1;s.uh[s.bg[0]]=0}return s.jq=!0,s}return Wt(l,h),l.prototype.re=function(s){this.hasAttribute(s)||(this.uh[s]=0,this.jD())},l.prototype.removeAttribute=function(s){if(s==0)throw d.i.N("Position attribue cannot be removed");this.hasAttribute(s)&&(this.uh[s]=-1,this.jD())},l.prototype.reset=function(){this.bg[0]=0,this.Aa=1;for(var s=0;s<this.uh.length;s++)this.uh[s]=-1;this.uh[this.bg[0]]=0,this.jq=!0},l.prototype.EF=function(){return S.kz().add(this)},l.og=function(){return S.kz().$R()},l.prototype.tM=function(){var s=this.cc();return new d.ra(s,this)},l.prototype.jD=function(){for(var s=this.Aa=0,a=0;10>s;s++)0<=this.uh[s]&&(this.bg[a]=s,this.uh[s]=a,a++,this.Aa++);this.jq=!0},l.prototype.cc=function(){return this.jq&&(this.wl=this.An(),this.jq=!1),this.wl},l.prototype.Nb=function(s){if(s==null)return!1;if(s==this)return!0;if(!(s instanceof l)||s.Aa!=this.Aa)return!1;for(var a=0;a<this.Aa;a++)if(this.bg[a]!=s.bg[a])return!1;return this.jq==s.jq},l.prototype.GG=function(s){if(s.Aa!=this.Aa)return!1;for(var a=0;a<this.Aa;a++)if(this.bg[a]!=s.bg[a])return!1;return!0},l.Iw=function(s,a){for(var c=[],p=0;p<s.Aa;p++)c[p]=-1;p=0;for(var y=s.Aa;p<y;p++)c[p]=a.Pf(s.kd(p));return c},l.BR=function(s,a){return(s=new l(s)).re(a),s.EF()},l.CR=function(s,a){for(var c=null,p=0;10>p;p++)!s.hasAttribute(p)&&a.hasAttribute(p)&&(c==null&&(c=new l(s)),c.re(p));return c!=null?c.EF():s},l}(d.ra);d.ee=O;var S=function(){function h(){this.map=[];var l=new O;this.add(l),(l=new O).re(1),this.add(l)}return h.kz=function(){return h.bL},h.prototype.$R=function(){return h.ft},h.prototype.add=function(l){var s=l.cc();if(h.ft!=null&&h.ft.cc()==s&&l.GG(h.ft))return h.ft;if(h.Dw!=null&&h.Dw.cc()==s&&l.GG(h.Dw))return h.Dw;var a=null;return this.map[s]!==void 0&&(a=this.map[s]),a==null&&((a=l.tM()).Aa==1?h.ft=a:a.Aa==2&&a.kd(1)==1?h.Dw=a:this.map[s]=a),a},h.bL=new h,h}()}(Y||(Y={}));var KS={feet:9002,kilometers:9036,meters:9001,miles:9093,"nautical-miles":9030,yards:9096},YS={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109439,"square-yards":109442},Gc=new(function(){function d(){this.RM=50,this.np=new Map,this.gj=[]}return d.prototype.clear=function(){this.gj.length=0,this.np.clear()},d.prototype.delete=function(O){return!!this.np.delete(O)&&(this.gj.splice(this.gj.indexOf(O),1),!0)},d.prototype.get=function(O){var S=this.np.get(O);if(S!==void 0)return this.gj[0]!==O&&(this.gj.splice(this.gj.indexOf(O),1),this.gj.unshift(O)),S},d.prototype.has=function(O){return this.np.has(O)},d.prototype.set=function(O,S){return this.get(O)!==void 0&&this.delete(O),this.gj.unshift(O),this.np.set(O,S),this.oM(),this},d.prototype.oM=function(){for(;this.gj.length&&this.gj.length>this.RM;){var O=this.gj.pop();this.np.delete(O)}},d}()),Ve=((Gr={}).convertJSONToGeometry=function(d){return Y.$b.fP(d)},Gr.hasM=function(d){return d.hasAttribute(Y.Ih.M)},Gr.hasZ=function(d){return d.hasAttribute(Y.Ih.Z)},Gr.getPointX=function(d){return d.Lg()},Gr.getPointY=function(d){return d.ih()},Gr.getPointZ=function(d){return d.bS()},Gr.getPointM=function(d){return d.zR()},Gr.getXMin=function(d){return d.es()},Gr.getYMin=function(d){return d.gs()},Gr.getXMax=function(d){return d.ds()},Gr.getYMax=function(d){return d.fs()},Gr.getZExtent=function(d){return d.Tg(Y.Ih.Z,0)},Gr.getMExtent=function(d){return d.Tg(Y.Ih.M,0)},Gr.exportPaths=function(d){var O=[],S=d.da(),h=null,l=null,s=d.hasAttribute(Y.Ih.Z),a=d.hasAttribute(Y.Ih.M);s&&(h=d.ub(Y.Ih.Z)),a&&(l=d.ub(Y.Ih.M));for(var c=new Y.h,p=0;p<S;p++){for(var y=d.Ba(p),v=d.Ja(p),_=0,x=0,T=NaN,C=NaN,A=NaN,R=NaN,F=d.dc(p),N=[],B=y;B<y+v;B++){d.D(B,c),R=A=NaN;var q=[c.x,c.y];s&&(A=h.get(B),q.push(A)),a&&(R=l.get(B),q.push(R)),B==y&&F&&(_=c.x,x=c.y,T=A,C=R),N.push(q)}!F||_==c.x&&x==c.y&&(!s||isNaN(T)&&isNaN(A)||T==A)&&(!a||isNaN(C)&&isNaN(R)||C==R)||N.push(N[0].slice(0)),O.push(N)}return O},Gr.exportPathsFlat=function(){},Gr.exportPoints=function(d){var O=d.hasAttribute(Y.Ih.Z),S=d.hasAttribute(Y.Ih.M),h=null,l=null;O&&(h=d.ub(Y.Ih.Z)),S&&(l=d.ub(Y.Ih.M));for(var s=new Y.h,a=d.I(),c=[],p=0;p<a;p++){d.D(p,s);var y=[s.x,s.y];O&&y.push(h.get(p)),S&&y.push(l.get(p)),c.push(y)}return c},Gr.exportPointsFlat=function(){},Gr),wd=new Map;return function(){function d(){}return d.buffer=se,d.clip=I,d.contains=k,d.convexHull=oe,d.crosses=L,d.cut=M,d.densify=qe,d.difference=le,d.disjoint=W,d.distance=P,d.equals=D,d.extendedSpatialReferenceInfo=E,d.generalize=Re,d.geodesicArea=Rr,d.geodesicBuffer=ye,d.geodesicDensify=ht,d.geodesicLength=hs,d.intersect=$e,d.intersects=j,d.isSimple=ee,d.nearestCoordinate=pe,d.nearestVertex=_e,d.nearestVertices=Le,d.offset=de,d.overlaps=Q,d.planarArea=At,d.planarLength=Fi,d.relate=Z,d.simplify=ie,d.symmetricDifference=xe,d.touches=z,d.union=Te,d.within=V,d.rotate=Y.Ex.rotate,d.flipHorizontal=Y.Ex.JQ,d.flipVertical=Y.Ex.KQ,d.intersectLinesToPoints=_$,d.ExtendedParams=Y.yC,d.clearDefaultSpatialReferenceTolerance=b$,d.changeDefaultSpatialReferenceTolerance=w$,d._enableProjection=zc,d._project=vd,d._getTransformation=$m,d._getTransformationBySuitability=Vc,d}()}var i=t();i!==void 0&&(e.exports=i)}(oK)),oK.exports}var efe=zWe();const Rt=DWe(efe),VWe=jWe({__proto__:null,default:Rt},[efe]),UWe=Object.freeze(Object.defineProperty({__proto__:null,G:Rt,g:VWe},Symbol.toStringTag,{value:"Module"})),Qt={convertToGEGeometry:GWe,exportPoint:BWe,exportPolygon:qWe,exportPolyline:HWe,exportMultipoint:WWe,exportExtent:ZWe};function GWe(e,t){if(t==null)return null;let i="cache"in t?t.cache._geVersion:void 0;return i==null&&(i=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=i)),i}function BWe(e,t,i){const r=e.hasZ(t),n=e.hasM(t),o=new lt({x:e.getPointX(t),y:e.getPointY(t),spatialReference:i});return r&&(o.z=e.getPointZ(t)),n&&(o.m=e.getPointM(t)),o.cache._geVersion=t,o}function qWe(e,t,i){const r=new zs({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return r.cache._geVersion=t,r}function HWe(e,t,i){const r=new io({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return r.cache._geVersion=t,r}function WWe(e,t,i){const r=new w2({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:i});return r.cache._geVersion=t,r}function ZWe(e,t,i){const r=e.hasZ(t),n=e.hasM(t),o=new Ht({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:i});if(r){const u=e.getZExtent(t);o.zmin=u.vmin,o.zmax=u.vmax}if(n){const u=e.getMExtent(t);o.mmin=u.vmin,o.mmax=u.vmax}return o.cache._geVersion=t,o}const JWe=Object.freeze(Object.defineProperty({__proto__:null,hydratedAdapter:Qt},Symbol.toStringTag,{value:"Module"}));function si(e){const t=Array.isArray(e)?e[0].spatialReference:e.spatialReference;return t?h2(st,t):st.WGS84}function KWe(e){return Rt.extendedSpatialReferenceInfo(e)}function YWe(e,t){return Rt.clip(Qt,si(e),e,t)}function XWe(e,t){return Rt.cut(Qt,si(e),e,t)}function QWe(e,t){return Rt.contains(Qt,si(e),e,t)}function eZe(e,t){return Rt.crosses(Qt,si(e),e,t)}function tZe(e,t,i){return Rt.distance(Qt,si(e),e,t,i)}function iZe(e,t){return Rt.equals(Qt,si(e),e,t)}function rZe(e,t){return Rt.intersects(Qt,si(e),e,t)}function nZe(e,t){return Rt.touches(Qt,si(e),e,t)}function sZe(e,t){return Rt.within(Qt,si(e),e,t)}function oZe(e,t){return Rt.disjoint(Qt,si(e),e,t)}function aZe(e,t){return Rt.overlaps(Qt,si(e),e,t)}function lZe(e,t,i){return Rt.relate(Qt,si(e),e,t,i)}function uZe(e){return Rt.isSimple(Qt,si(e),e)}function cZe(e){return Rt.simplify(Qt,si(e),e)}function hZe(e,t=!1){return Rt.convexHull(Qt,si(e),e,t)}function dZe(e,t){return Rt.difference(Qt,si(e),e,t)}function pZe(e,t){return Rt.symmetricDifference(Qt,si(e),e,t)}function fZe(e,t){return Rt.intersect(Qt,si(e),e,t)}function tfe(e,t=null){return Rt.union(Qt,si(e),e,t)}function yZe(e,t,i,r,n,o){return Rt.offset(Qt,si(e),e,t,i,r,n,o)}function mZe(e,t,i,r=!1){return Rt.buffer(Qt,si(e),e,t,i,r)}function gZe(e,t,i,r,n,o){return Rt.geodesicBuffer(Qt,si(e),e,t,i,r,n,o)}function vZe(e,t,i=!0){return Rt.nearestCoordinate(Qt,si(e),e,t,i)}function wZe(e,t){return Rt.nearestVertex(Qt,si(e),e,t)}function bZe(e,t,i,r){return Rt.nearestVertices(Qt,si(e),e,t,i,r)}function yj(e){var t;return"xmin"in e?"center"in e?e.center:null:"x"in e?e:"extent"in e?((t=e.extent)==null?void 0:t.center)??null:null}function _Ze(e,t,i){if(e==null)throw new t2;const r=e.spatialReference;if((i=i??yj(e))==null)throw new t2;const n=e.constructor.fromJSON(Rt.rotate(e,t,i));return n.spatialReference=r,n}function SZe(e,t){if(e==null)throw new t2;const i=e.spatialReference;if((t=t??yj(e))==null)throw new t2;const r=e.constructor.fromJSON(Rt.flipHorizontal(e,t));return r.spatialReference=i,r}function xZe(e,t){if(e==null)throw new t2;const i=e.spatialReference;if((t=t??yj(e))==null)throw new t2;const r=e.constructor.fromJSON(Rt.flipVertical(e,t));return r.spatialReference=i,r}function EZe(e,t,i,r){return Rt.generalize(Qt,si(e),e,t,i,r)}function IZe(e,t,i){return Rt.densify(Qt,si(e),e,t,i)}function TZe(e,t,i,r=0){return Rt.geodesicDensify(Qt,si(e),e,t,i,r)}function $Ze(e,t){return Rt.planarArea(Qt,si(e),e,t)}function MZe(e,t){return Rt.planarLength(Qt,si(e),e,t)}function CZe(e,t,i){return Rt.geodesicArea(Qt,si(e),e,t,i)}function AZe(e,t,i){return Rt.geodesicLength(Qt,si(e),e,t,i)}function kZe(e,t){return Rt.intersectLinesToPoints(Qt,si(e),e,t)}function LZe(e,t){Rt.changeDefaultSpatialReferenceTolerance(e,t)}function OZe(e){Rt.clearDefaultSpatialReferenceTolerance(e)}let t2=class extends Error{constructor(){super("Illegal Argument Exception")}};const wpt=Object.freeze(Object.defineProperty({__proto__:null,buffer:mZe,changeDefaultSpatialReferenceTolerance:LZe,clearDefaultSpatialReferenceTolerance:OZe,clip:YWe,contains:QWe,convexHull:hZe,crosses:eZe,cut:XWe,densify:IZe,difference:dZe,disjoint:oZe,distance:tZe,equals:iZe,extendedSpatialReferenceInfo:KWe,flipHorizontal:SZe,flipVertical:xZe,generalize:EZe,geodesicArea:CZe,geodesicBuffer:gZe,geodesicDensify:TZe,geodesicLength:AZe,intersect:fZe,intersectLinesToPoints:kZe,intersects:rZe,isSimple:uZe,nearestCoordinate:vZe,nearestVertex:wZe,nearestVertices:bZe,offset:yZe,overlaps:aZe,planarArea:$Ze,planarLength:MZe,relate:lZe,rotate:_Ze,simplify:cZe,symmetricDifference:pZe,touches:nZe,union:tfe,within:sZe},Symbol.toStringTag,{value:"Module"}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const RZe={icon:"icon",flipRtl:"flip-rtl"},ife={},J7={},rfe={s:16,m:24,l:32};function nfe({icon:e,scale:t}){const i=rfe[t],r=FZe(e),n=r.charAt(r.length-1)==="F";return`${n?r.substring(0,r.length-1):r}${i}${n?"F":""}`}async function PZe(e){const t=nfe(e),i=sfe(t);if(i)return i;J7[t]||(J7[t]=fetch(WP(`./assets/icon/${t}.json`)).then(n=>n.json()).catch(()=>(console.error(`"${t}" is not a valid calcite-ui-icon name`),"")));const r=await J7[t];return ife[t]=r,r}function NZe(e){return sfe(nfe(e))}function sfe(e){return ife[e]}function FZe(e){const t=!isNaN(Number(e.charAt(0))),i=e.split("-");if(i.length>0){const n=/[a-z]/i;e=i.map((o,u)=>o.replace(n,function(g,b){return u===0&&b===0?g:g.toUpperCase()})).join("")}return t?`i${e}`:e}const DZe=":host{display:inline-flex;color:var(--calcite-icon-color, var(--calcite-ui-icon-color, currentColor))}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}",jZe=DZe,zZe=fm(class extends pm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.icon=null,this.flipRtl=!1,this.scale="m",this.textLabel=void 0,this.pathData=void 0,this.visible=!1}connectedCallback(){this.visible||this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}disconnectedCallback(){var t;(t=this.intersectionObserver)==null||t.disconnect(),this.intersectionObserver=null}render(){const{el:t,flipRtl:i,pathData:r,scale:n,textLabel:o}=this,u=QP(t),f=rfe[n],g=!!o,b=[].concat(r||"");return Be(Y_,{key:"724265acdc6fb528bf7b25d7ec445c73a63f4c8e","aria-hidden":CE(!g),"aria-label":g?o:null,role:g?"img":null},Be("svg",{key:"864ee2d80bebd282543ba5d94c57f84b48a6204d","aria-hidden":"true",class:{[RZe.flipRtl]:u==="rtl"&&i,svg:!0},fill:"currentColor",height:"100%",viewBox:`0 0 ${f} ${f}`,width:"100%",xmlns:"http://www.w3.org/2000/svg"},b.map(E=>typeof E=="string"?Be("path",{d:E}):Be("path",{d:E.d,opacity:"opacity"in E?E.opacity:1}))))}async loadIconPathData(){const{icon:t,scale:i,visible:r}=this;if(!X_()||!t||!r)return;const n={icon:t,scale:i},o=NZe(n)||await PZe(n);t===this.icon&&(this.pathData=o)}waitUntilVisible(t){if(this.intersectionObserver=Q_("intersection",i=>{i.forEach(r=>{r.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,t())})},{rootMargin:"50px"}),!this.intersectionObserver){t();return}this.intersectionObserver.observe(this.el)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{icon:["loadIconPathData"],scale:["loadIconPathData"]}}static get style(){return jZe}},[1,"calcite-icon",{icon:[513],flipRtl:[516,"flip-rtl"],scale:[513],textLabel:[1,"text-label"],pathData:[32],visible:[32]},void 0,{icon:["loadIconPathData"],scale:["loadIconPathData"]}]);function VS(){if(typeof customElements>"u")return;["calcite-icon"].forEach(t=>{switch(t){case"calcite-icon":customElements.get(t)||customElements.define(t,zZe);break}})}VS();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */var VZe=typeof global=="object"&&global&&global.Object===Object&&global;const ofe=VZe;var UZe=typeof self=="object"&&self&&self.Object===Object&&self,GZe=ofe||UZe||Function("return this")();const mj=GZe;var BZe=mj.Symbol;const i2=BZe;var afe=Object.prototype,qZe=afe.hasOwnProperty,HZe=afe.toString,Ow=i2?i2.toStringTag:void 0;function WZe(e){var t=qZe.call(e,Ow),i=e[Ow];try{e[Ow]=void 0;var r=!0}catch{}var n=HZe.call(e);return r&&(t?e[Ow]=i:delete e[Ow]),n}var ZZe=Object.prototype,JZe=ZZe.toString;function KZe(e){return JZe.call(e)}var YZe="[object Null]",XZe="[object Undefined]",aK=i2?i2.toStringTag:void 0;function r$(e){return e==null?e===void 0?XZe:YZe:aK&&aK in Object(e)?WZe(e):KZe(e)}function n$(e){return e!=null&&typeof e=="object"}var QZe="[object Symbol]";function lfe(e){return typeof e=="symbol"||n$(e)&&r$(e)==QZe}var eJe=/\s/;function tJe(e){for(var t=e.length;t--&&eJe.test(e.charAt(t)););return t}var iJe=/^\s+/;function rJe(e){return e&&e.slice(0,tJe(e)+1).replace(iJe,"")}function r2(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var lK=NaN,nJe=/^[-+]0x[0-9a-f]+$/i,sJe=/^0b[01]+$/i,oJe=/^0o[0-7]+$/i,aJe=parseInt;function uK(e){if(typeof e=="number")return e;if(lfe(e))return lK;if(r2(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=r2(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=rJe(e);var i=sJe.test(e);return i||oJe.test(e)?aJe(e.slice(2),i?2:8):nJe.test(e)?lK:+e}var lJe=function(){return mj.Date.now()};const K7=lJe;var uJe="Expected a function",cJe=Math.max,hJe=Math.min;function ufe(e,t,i){var r,n,o,u,f,g,b=0,E=!1,I=!1,M=!0;if(typeof e!="function")throw new TypeError(uJe);t=uK(t)||0,r2(i)&&(E=!!i.leading,I="maxWait"in i,o=I?cJe(uK(i.maxWait)||0,t):o,M="trailing"in i?!!i.trailing:M);function k(Z){var ee=r,ie=n;return r=n=void 0,b=Z,u=e.apply(ie,ee),u}function L(Z){return b=Z,f=setTimeout(j,t),E?k(Z):u}function P(Z){var ee=Z-g,ie=Z-b,oe=t-ee;return I?hJe(oe,o-ie):oe}function D(Z){var ee=Z-g,ie=Z-b;return g===void 0||ee>=t||ee<0||I&&ie>=o}function j(){var Z=K7();if(D(Z))return z(Z);f=setTimeout(j,P(Z))}function z(Z){return f=void 0,M&&r?k(Z):(r=n=void 0,u)}function V(){f!==void 0&&clearTimeout(f),b=0,r=g=n=f=void 0}function W(){return f===void 0?u:z(K7())}function Q(){var Z=K7(),ee=D(Z);if(r=arguments,n=this,g=Z,ee){if(f===void 0)return L(g);if(I)return clearTimeout(f),f=setTimeout(j,t),k(g)}return f===void 0&&(f=setTimeout(j,t)),u}return Q.cancel=V,Q.flush=W,Q}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function dJe(e,t){for(var i=-1,r=e==null?0:e.length,n=Array(r);++i<r;)n[i]=t(e[i],i,e);return n}var pJe=Array.isArray;const cfe=pJe;var fJe=1/0,cK=i2?i2.prototype:void 0,hK=cK?cK.toString:void 0;function hfe(e){if(typeof e=="string")return e;if(cfe(e))return dJe(e,hfe)+"";if(lfe(e))return hK?hK.call(e):"";var t=e+"";return t=="0"&&1/e==-fJe?"-0":t}function yJe(e){return e}var mJe="[object AsyncFunction]",gJe="[object Function]",vJe="[object GeneratorFunction]",wJe="[object Proxy]";function bJe(e){if(!r2(e))return!1;var t=r$(e);return t==gJe||t==vJe||t==mJe||t==wJe}var _Je=9007199254740991,SJe=/^(?:0|[1-9]\d*)$/;function xJe(e,t){var i=typeof e;return t=t??_Je,!!t&&(i=="number"||i!="symbol"&&SJe.test(e))&&e>-1&&e%1==0&&e<t}var EJe=9007199254740991;function dfe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=EJe}function IJe(e){return e!=null&&dfe(e.length)&&!bJe(e)}var TJe=Object.prototype;function $Je(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||TJe;return e===i}function MJe(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}var CJe="[object Arguments]";function dK(e){return n$(e)&&r$(e)==CJe}var pfe=Object.prototype,AJe=pfe.hasOwnProperty,kJe=pfe.propertyIsEnumerable,LJe=dK(function(){return arguments}())?dK:function(e){return n$(e)&&AJe.call(e,"callee")&&!kJe.call(e,"callee")};const OJe=LJe;function RJe(){return!1}var ffe=typeof exports=="object"&&exports&&!exports.nodeType&&exports,pK=ffe&&typeof module=="object"&&module&&!module.nodeType&&module,PJe=pK&&pK.exports===ffe,fK=PJe?mj.Buffer:void 0,NJe=fK?fK.isBuffer:void 0,FJe=NJe||RJe;const DJe=FJe;var jJe="[object Arguments]",zJe="[object Array]",VJe="[object Boolean]",UJe="[object Date]",GJe="[object Error]",BJe="[object Function]",qJe="[object Map]",HJe="[object Number]",WJe="[object Object]",ZJe="[object RegExp]",JJe="[object Set]",KJe="[object String]",YJe="[object WeakMap]",XJe="[object ArrayBuffer]",QJe="[object DataView]",eKe="[object Float32Array]",tKe="[object Float64Array]",iKe="[object Int8Array]",rKe="[object Int16Array]",nKe="[object Int32Array]",sKe="[object Uint8Array]",oKe="[object Uint8ClampedArray]",aKe="[object Uint16Array]",lKe="[object Uint32Array]",Xi={};Xi[eKe]=Xi[tKe]=Xi[iKe]=Xi[rKe]=Xi[nKe]=Xi[sKe]=Xi[oKe]=Xi[aKe]=Xi[lKe]=!0;Xi[jJe]=Xi[zJe]=Xi[XJe]=Xi[VJe]=Xi[QJe]=Xi[UJe]=Xi[GJe]=Xi[BJe]=Xi[qJe]=Xi[HJe]=Xi[WJe]=Xi[ZJe]=Xi[JJe]=Xi[KJe]=Xi[YJe]=!1;function uKe(e){return n$(e)&&dfe(e.length)&&!!Xi[r$(e)]}function cKe(e){return function(t){return e(t)}}var yfe=typeof exports=="object"&&exports&&!exports.nodeType&&exports,j3=yfe&&typeof module=="object"&&module&&!module.nodeType&&module,hKe=j3&&j3.exports===yfe,Y7=hKe&&ofe.process,dKe=function(){try{var e=j3&&j3.require&&j3.require("util").types;return e||Y7&&Y7.binding&&Y7.binding("util")}catch{}}();const yK=dKe;var mK=yK&&yK.isTypedArray,pKe=mK?cKe(mK):uKe;const fKe=pKe;function yKe(e,t){var i=cfe(e),r=!i&&OJe(e),n=!i&&!r&&DJe(e),o=!i&&!r&&!n&&fKe(e),u=i||r||n||o,f=u?MJe(e.length,String):[],g=f.length;for(var b in e)u&&(b=="length"||n&&(b=="offset"||b=="parent")||o&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||xJe(b,g))||f.push(b);return f}function mKe(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}var gKe=Object.prototype,vKe=gKe.hasOwnProperty;function wKe(e){if(!r2(e))return mKe(e);var t=$Je(e),i=[];for(var r in e)r=="constructor"&&(t||!vKe.call(e,r))||i.push(r);return i}function bKe(e){return IJe(e)?yKe(e):wKe(e)}function _Ke(e){return e==null?"":hfe(e)}function SKe(e){return function(t,i,r){for(var n=-1,o=Object(t),u=r(t),f=u.length;f--;){var g=u[++n];if(i(o[g],g,o)===!1)break}return t}}var xKe=SKe();const EKe=xKe;function IKe(e){return typeof e=="function"?e:yJe}var mfe=/[\\^$.*+?()[\]{}|]/g,TKe=RegExp(mfe.source);function $Ke(e){return e=_Ke(e),e&&TKe.test(e)?e.replace(mfe,"\\$&"):e}function MKe(e,t){return e==null?e:EKe(e,IKe(t),bKe)}const gK=(e,t,i)=>{const r=$Ke(t),n=new RegExp(r,"i");e.length===0&&console.warn(`No data was passed to the filter function.
    The data argument should be an array of objects`);const o=(u,f,g)=>{if(u!=null&&u.constant||u!=null&&u.filterDisabled)return!0;let b=!1;return MKe(u,(E,I)=>{typeof E=="function"||E==null||g&&!g.includes(I)||(Array.isArray(E)||typeof E=="object"&&E!==null?o(E,f)&&(b=!0):f.test(E)&&(b=!0))}),b};return e.filter(u=>o(u,n,i))};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function CKe(){const{disabled:e}=this;e||HTMLElement.prototype.click.call(this)}function gfe(e){e.target.disabled&&e.preventDefault()}const vfe=["mousedown","mouseup","click"];function wfe(e){e.target.disabled&&(e.stopImmediatePropagation(),e.preventDefault())}const e6={capture:!0};function gj(e){if(e.disabled){e.el.setAttribute("aria-disabled","true"),e.el.contains(document.activeElement)&&document.activeElement.blur(),AKe(e);return}LKe(e),e.el.removeAttribute("aria-disabled")}function AKe(e){e.el.click=CKe,kKe(e.el)}function kKe(e){e.addEventListener("pointerdown",gfe,e6),vfe.forEach(t=>e.addEventListener(t,wfe,e6))}function LKe(e){delete e.el.click,OKe(e.el)}function OKe(e){e.removeEventListener("pointerdown",gfe,e6),vfe.forEach(t=>e.removeEventListener(t,wfe,e6))}const RKe={container:"interaction-container"},vj=({disabled:e},t)=>Be("div",{class:RKe.container,inert:e},...t);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const bfe=new WeakMap,_fe=new WeakMap;function wj(e){_fe.set(e,new Promise(t=>bfe.set(e,t)))}function bj(e){bfe.get(e)()}function zR(e){return _fe.get(e)}async function _j(e){if(await zR(e),!!X_())return C6(e),new Promise(t=>requestAnimationFrame(()=>t()))}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function _pt(e){return e==="Enter"||e===" "}const Sj=["0","1","2","3","4","5","6","7","8","9"];/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const PKe=new RegExp("\\.(0+)?$"),NKe=new RegExp("0+$");class ci{constructor(t){if(t instanceof ci)return t;const[i,r]=BKe(t).split(".").concat("");this.value=BigInt(i+r.padEnd(ci.DECIMALS,"0").slice(0,ci.DECIMALS))+BigInt(ci.ROUNDED&&r[ci.DECIMALS]>="5"),this.isNegative=t.charAt(0)==="-"}getIntegersAndDecimals(){const t=this.value.toString().replace("-","").padStart(ci.DECIMALS+1,"0"),i=t.slice(0,-ci.DECIMALS),r=t.slice(-ci.DECIMALS).replace(NKe,"");return{integers:i,decimals:r}}toString(){const{integers:t,decimals:i}=this.getIntegersAndDecimals();return`${this.isNegative?"-":""}${t}${i.length?"."+i:""}`}formatToParts(t){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),n=t.numberFormatter.formatToParts(BigInt(i));return this.isNegative&&n.unshift({type:"minusSign",value:t.minusSign}),r.length&&(n.push({type:"decimal",value:t.decimal}),r.split("").forEach(o=>n.push({type:"fraction",value:o}))),n}format(t){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),n=`${this.isNegative?t.minusSign:""}${t.numberFormatter.format(BigInt(i))}`,o=r.length?`${t.decimal}${r.split("").map(u=>t.numberFormatter.format(Number(u))).join("")}`:"";return`${n}${o}`}add(t){return ci.fromBigInt(this.value+new ci(t).value)}subtract(t){return ci.fromBigInt(this.value-new ci(t).value)}multiply(t){return ci._divRound(this.value*new ci(t).value,ci.SHIFT)}divide(t){return ci._divRound(this.value*ci.SHIFT,new ci(t).value)}}ci.DECIMALS=100;ci.ROUNDED=!0;ci.SHIFT=BigInt("1"+"0".repeat(ci.DECIMALS));ci._divRound=(e,t)=>ci.fromBigInt(e/t+(ci.ROUNDED?e*BigInt(2)/t%BigInt(2):BigInt(0)));ci.fromBigInt=e=>Object.assign(Object.create(ci.prototype),{value:e,isNegative:e<BigInt(0)});function yc(e){return!(!e||isNaN(Number(e)))}function FKe(e){return!e||!qKe(e)?"":t6(e,t=>{let i=!1;const r=t.split("").filter((n,o)=>n.match(/\./g)&&!i?(i=!0,!0):n.match(/-/g)&&o===0?!0:Sj.includes(n)).join("");return yc(r)?new ci(r).toString():""})}const Sfe=/^([-0])0+(?=\d)/,DKe=/(?!^\.)\.$/,jKe=/(?!^-)-/g,zKe=/^-\b0\b\.?0*$/,VKe=/0*$/,UKe=e=>t6(e,t=>{const i=t.replace(jKe,"").replace(DKe,"").replace(Sfe,"$1");return yc(i)?zKe.test(i)?i:GKe(i):t});function GKe(e){const t=e.split(".")[1],i=new ci(e).toString(),[r,n]=i.split(".");return t&&n!==t?`${r}.${t}`:i}function t6(e,t){if(!e)return e;const i=e.toLowerCase().indexOf("e")+1;return i?e.replace(/[eE]*$/g,"").substring(0,i).concat(e.slice(i).replace(/[eE]/g,"")).split(/[eE]/).map((r,n)=>t(n===1?r.replace(/\./g,""):r)).join("e").replace(/^e/,"1e"):t(e)}function BKe(e){const t=e.split(/[eE]/);if(t.length===1)return e;const i=+e;if(Number.isSafeInteger(i))return`${i}`;const r=e.charAt(0)==="-",n=+t[1],o=t[0].split("."),u=(r?o[0].substring(1):o[0])||"",f=o[1]||"",g=(I,M)=>{const k=Math.abs(M)-I.length,L=k>0?`${"0".repeat(k)}${I}`:I;return`${L.slice(0,M)}.${L.slice(M)}`},b=(I,M)=>{const k=M>I.length?`${I}${"0".repeat(M-I.length)}`:I;return`${k.slice(0,M)}.${k.slice(M)}`},E=n>0?`${u}${b(f,n)}`:`${g(u,n)}${f}`;return`${r?"-":""}${E.charAt(0)==="."?"0":""}${E.replace(PKe,"").replace(Sfe,"")}`}function qKe(e){return Sj.some(t=>e.includes(t))}function HKe(e,t,i){const r=t.split(".")[1];if(r){const n=r.match(VKe)[0];if(n&&i.delocalize(e).length!==t.length&&r.indexOf("e")===-1){const o=i.decimal;return e=e.includes(o)?e:`${e}${o}`,e.padEnd(e.length+n.length,i.localize("0"))}}return e}const _f="en",WKe=["ar","bg","bs","ca","cs","da","de","el",_f,"es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","no","nl","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],ZKe=["ar","bg","bs","ca","cs","da","de","de-AT","de-CH","el",_f,"en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","no","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],JKe=["arab","arabext","latn"],xfe=e=>JKe.includes(e),X7=new Intl.NumberFormat().resolvedOptions().numberingSystem,Efe=X7==="arab"||!xfe(X7)?"latn":X7,KKe=e=>xfe(e)?e:Efe;function Ife(e,t="cldr"){const i=t==="cldr"?ZKe:WKe;return e?i.includes(e)?e:(e=e.toLowerCase(),e==="nb"?"no":t==="t9n"&&e==="pt"?"pt-BR":(e.includes("-")&&(e=e.replace(/(\w+)-(\w+)/,(r,n,o)=>`${n}-${o.toUpperCase()}`),i.includes(e)||(e=e.split("-")[0])),e==="zh"?"zh-CN":i.includes(e)?e:(console.warn(`Translations for the "${e}" locale are not available and will fall back to the default, English (en).`),_f))):_f}const U_=new Set;function xj(e){YKe(e),U_.size===0&&(q4==null||q4.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"],subtree:!0})),U_.add(e)}function YKe(e){e.effectiveLocale=XKe(e)}function Ej(e){U_.delete(e),U_.size===0&&q4.disconnect()}const q4=Q_("mutation",e=>{e.forEach(t=>{const i=t.target;U_.forEach(r=>{if(!Dge(i,r.el))return;const o=Tf(r.el,"[lang]");if(!o){r.effectiveLocale=_f;return}const u=o.lang;r.effectiveLocale=o.hasAttribute("lang")&&u===""?_f:u})})});function XKe(e){var t;return e.el.lang||((t=Tf(e.el,"[lang]"))==null?void 0:t.lang)||document.documentElement.lang||_f}class QKe{constructor(){this.delocalize=t=>this._numberFormatOptions?t6(t,i=>i.replace(new RegExp(`[${this._minusSign}]`,"g"),"-").replace(new RegExp(`[${this._group}]`,"g"),"").replace(new RegExp(`[${this._decimal}]`,"g"),".").replace(new RegExp(`[${this._digits.join("")}]`,"g"),this._getDigitIndex)):t,this.localize=t=>this._numberFormatOptions?t6(t,i=>yc(i.trim())?new ci(i.trim()).format(this).replace(new RegExp(`[${this._actualGroup}]`,"g"),this._group):i):t}get group(){return this._group}get decimal(){return this._decimal}get minusSign(){return this._minusSign}get digits(){return this._digits}get numberFormatter(){return this._numberFormatter}get numberFormatOptions(){return this._numberFormatOptions}set numberFormatOptions(t){if(t.locale=Ife(t==null?void 0:t.locale),t.numberingSystem=KKe(t==null?void 0:t.numberingSystem),!this._numberFormatOptions&&t.locale===_f&&t.numberingSystem===Efe&&Object.keys(t).length===2||JSON.stringify(this._numberFormatOptions)===JSON.stringify(t))return;this._numberFormatOptions=t,this._numberFormatter=new Intl.NumberFormat(this._numberFormatOptions.locale,this._numberFormatOptions),this._digits=[...new Intl.NumberFormat(this._numberFormatOptions.locale,{useGrouping:!1,numberingSystem:this._numberFormatOptions.numberingSystem}).format(9876543210)].reverse();const i=new Map(this._digits.map((n,o)=>[n,o])),r=new Intl.NumberFormat(this._numberFormatOptions.locale,{numberingSystem:this._numberFormatOptions.numberingSystem}).formatToParts(-123456789e-1);this._actualGroup=r.find(n=>n.type==="group").value,this._group=this._actualGroup.trim().length===0||this._actualGroup==" "?" ":this._actualGroup,this._decimal=r.find(n=>n.type==="decimal").value,this._minusSign=r.find(n=>n.type==="minusSign").value,this._getDigitIndex=n=>i.get(n)}}const oa=new QKe;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Lx={};async function eYe(e,t){const i=`${t}_${e}`;return Lx[i]||(Lx[i]=fetch(WP(`./assets/${t}/t9n/messages_${e}.json`)).then(r=>(r.ok||vK(),r.json())).catch(()=>vK())),Lx[i]}function vK(){throw new Error("could not fetch component message bundle")}function Ij(e){e.messages={...e.defaultMessages,...e.messageOverrides}}function tYe(){}async function Tj(e){e.defaultMessages=await Tfe(e,e.effectiveLocale),Ij(e)}async function Tfe(e,t){if(!X_())return{};const{el:i}=e,n=i.tagName.toLowerCase().replace("calcite-","");return eYe(Ife(t,"t9n"),n)}async function $j(e,t){e.defaultMessages=await Tfe(e,t),Ij(e)}function Mj(e){e.onMessagesChange=iYe}function Cj(e){e.onMessagesChange=tYe}function iYe(){Ij(this)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const rYe=["calcite-input","calcite-input-number","calcite-input-text","calcite-text-area"];function nYe(e){return`${e.split("-").map((r,n)=>n===0?r:`${r[0].toUpperCase()}${r.slice(1)}`).join("")}${rYe.includes(e)?"Input":"Change"}`}const VR="hidden-form-input";function Aj(e){return"checked"in e}const UR=new WeakMap,kj=new WeakSet;function sYe(e,t){if(Tf(t.parentElement,"[form]"))return!0;const r="calciteInternalFormComponentRegister";let n=!1;return e.addEventListener(r,o=>{n=o.composedPath().some(u=>kj.has(u)),o.stopPropagation()},{once:!0}),t.dispatchEvent(new CustomEvent(r,{bubbles:!0,composed:!0})),n}function oYe(e,{status:t,message:i,icon:r}){"status"in e&&(e.status=t),"validationIcon"in e&&typeof e.validationIcon!="string"&&(e.validationIcon=r),"validationMessage"in e&&!e.validationMessage&&(e.validationMessage=i)}function $fe(e){return e.nodeName==="CALCITE-RADIO-BUTTON"?Tf(e,"calcite-radio-button-group"):e}const aYe=new CustomEvent("calciteInvalid",{bubbles:!0,composed:!0});function wK(e){var f;const t=e==null?void 0:e.target,i=t==null?void 0:t.validationMessage,r=$fe(t==null?void 0:t.parentElement);if(!r)return;const n=(f=r==null?void 0:r.nodeName)==null?void 0:f.toLowerCase(),o=n==null?void 0:n.split("-");if(o.length<2||o[0]!=="calcite")return;e==null||e.preventDefault(),"validity"in r&&(r.validity=t==null?void 0:t.validity),r.dispatchEvent(aYe),oYe(r,{message:i,icon:!0,status:"invalid"});const u=nYe(n);r.addEventListener(u,()=>{"status"in r&&(r.status="idle"),"validationIcon"in r&&!r.validationIcon&&(r.validationIcon=!1),"validationMessage"in r&&r.validationMessage===i&&(r.validationMessage=""),"validity"in r&&(r.validity=t==null?void 0:t.validity)},{once:!0})}function lYe(e){const{formEl:t}=e;return t?(t.addEventListener("invalid",wK,!0),t.requestSubmit(),t.removeEventListener("invalid",wK,!0),requestAnimationFrame(()=>{const i=t.querySelectorAll("[status=invalid]");for(const r of i)if(r!=null&&r.validationMessage){r==null||r.setFocus();break}}),!0):!1}function Spt(e){var t;(t=e.formEl)==null||t.reset()}function Mfe(e){const{el:t,value:i}=e,r=uYe(e);if(!r||sYe(r,t))return;e.formEl=r,e.defaultValue=i,Aj(e)&&(e.defaultChecked=e.checked);const n=(e.onFormReset||cYe).bind(e);r.addEventListener("reset",n),UR.set(e.el,n),kj.add(t)}function uYe(e){const{el:t,form:i}=e;return i?tN(t,{id:i}):Tf(t,"form")}function cYe(){if("status"in this&&(this.status="idle"),"validationIcon"in this&&(this.validationIcon=!1),"validationMessage"in this&&(this.validationMessage=""),Aj(this)){this.checked=this.defaultChecked;return}this.value=this.defaultValue}function Cfe(e){const{el:t,formEl:i}=e;if(!i)return;const r=UR.get(t);i.removeEventListener("reset",r),UR.delete(t),e.formEl=null,kj.delete(t)}const GR="calciteInternalHiddenInputInput",Afe=e=>{e.target.dispatchEvent(new CustomEvent(GR,{bubbles:!0}))},bK=e=>e.removeEventListener("input",Afe);function hYe(e){const{el:t,formEl:i,name:r,value:n}=e,{ownerDocument:o}=t,u=t.querySelectorAll(`input[slot="${VR}"]`);if(!i||!r){u.forEach(I=>{bK(I),I.remove()});return}const f=Array.isArray(n)?n:[n],g=[],b=new Set;u.forEach(I=>{const M=f.find(k=>k==I.value);M!=null?(b.add(M),_K(e,I,M)):g.push(I)});let E;f.forEach(I=>{if(b.has(I))return;let M=g.pop();M||(M=o.createElement("input"),M.slot=VR),E||(E=o.createDocumentFragment()),E.append(M),M.addEventListener("input",Afe),_K(e,M,I)}),E&&t.append(E),g.forEach(I=>{bK(I),I.remove()})}function _K(e,t,i){var b;const{defaultValue:r,disabled:n,form:o,name:u,required:f}=e;t.defaultValue=r,t.disabled=n,t.name=u,t.required=f,t.tabIndex=-1,o?t.setAttribute("form",o):t.removeAttribute("form"),Aj(e)?(t.checked=e.checked,t.defaultChecked=e.defaultChecked,t.value=e.checked?i||"on":""):t.value=i||"",(b=e.syncHiddenFormInput)==null||b.call(e,t);const g=$fe(e.el);if(g&&"validity"in g)for(const E in{...t==null?void 0:t.validity})g.validity[E]=t.validity[E]}const kfe=({component:e})=>(hYe(e),Be("slot",{name:VR}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function Rw(e){return e==="l"?"m":"s"}async function dYe(e){await(pYe(e)?e.componentOnReady():new Promise(t=>requestAnimationFrame(()=>t())))}function pYe(e){return typeof e.componentOnReady=="function"}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Lfe="calciteInternalLabelClick",Lj="calciteInternalLabelConnected",BR="calciteInternalLabelDisconnected",SK="calcite-label",n2=new WeakMap,z3=new WeakMap,G_=new WeakMap,i6=new WeakMap,Oy=new Set,fYe=e=>{const{id:t}=e,i=t&&tN(e,{selector:`${SK}[for="${t}"]`});if(i)return i;const r=Tf(e,SK);return!r||yYe(r,e)?null:r};function yYe(e,t){let i;const r="custom-element-ancestor-check",n=u=>{u.stopImmediatePropagation();const f=u.composedPath();i=f.slice(f.indexOf(t),f.indexOf(e))};return e.addEventListener(r,n,{once:!0}),t.dispatchEvent(new CustomEvent(r,{composed:!0,bubbles:!0})),e.removeEventListener(r,n),i.filter(u=>u!==t&&u!==e).filter(u=>{var f;return(f=u.tagName)==null?void 0:f.includes("-")}).length>0}function s$(e){if(!e)return;const t=fYe(e.el);if(z3.has(t)&&t===e.labelEl||!t&&Oy.has(e))return;const i=gYe.bind(e);if(t){e.labelEl=t;const r=n2.get(t)||[];r.push(e),n2.set(t,r.sort(Rfe)),z3.has(e.labelEl)||(z3.set(e.labelEl,xK),e.labelEl.addEventListener(Lfe,xK)),Oy.delete(e),document.removeEventListener(Lj,G_.get(e)),i6.set(e,i),document.addEventListener(BR,i)}else Oy.has(e)||(i(),document.removeEventListener(BR,i6.get(e)))}function Ofe(e){if(!e||(Oy.delete(e),document.removeEventListener(Lj,G_.get(e)),document.removeEventListener(BR,i6.get(e)),G_.delete(e),i6.delete(e),!e.labelEl))return;const t=n2.get(e.labelEl);t.length===1&&(e.labelEl.removeEventListener(Lfe,z3.get(e.labelEl)),z3.delete(e.labelEl)),n2.set(e.labelEl,t.filter(i=>i!==e).sort(Rfe)),e.labelEl=null}function Rfe(e,t){return Yge(e.el,t.el)?-1:1}function qR(e){var t,i;return e.label||((i=(t=e.labelEl)==null?void 0:t.textContent)==null?void 0:i.trim())||""}function xK(e){const t=e.detail.sourceEvent.target,i=n2.get(this),r=i.find(u=>u.el===t);if(i.includes(r))return;const o=i[0];o.disabled||o.onLabelClick(e)}function mYe(){Oy.has(this)&&s$(this)}function gYe(){Oy.add(this);const e=G_.get(this)||mYe.bind(this);G_.set(this,e),document.addEventListener(Lj,e)}async function xpt(e){var r;if(await dYe(e),n2.has(e))return;const i=(r=e.ownerDocument)==null?void 0:r.getElementById(e.for);i&&requestAnimationFrame(()=>{for(const n of Oy)if(n.el===i){s$(n);break}})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const vYe={validationContainer:"validation-container"},Pfe=({scale:e,status:t,id:i,icon:r,message:n})=>Be("div",{class:vYe.validationContainer},Be("calcite-input-message",{"aria-live":"polite",icon:r,id:i,scale:e,status:t},n));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const wYe=["date","datetime-local","month","number","range","time","week"],bYe=["email","password","search","tel","text","url"],_Ye=["email","password","search","tel","text","textarea","url"];function n1(e,t,i,r){const n=i.toLowerCase(),o=e[i];r&&o!=null?t.setAttribute(n,`${o}`):t.removeAttribute(n)}function Nfe(e,t,i){i.type=e==="textarea"?"text":e;const r=wYe.includes(e),n=t;n1(n,i,"min",r),n1(n,i,"max",r),n1(n,i,"step",r);const o=_Ye.includes(e),u=t;n1(u,i,"minLength",o),n1(u,i,"maxLength",o);const f=bYe.includes(e);n1(u,i,"pattern",f)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const EK={valid:"check-circle",invalid:"exclamation-mark-triangle",idle:"information"},SYe=":host{box-sizing:border-box;display:flex;block-size:auto;inline-size:100%;align-items:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);opacity:1;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;--calcite-input-message-spacing-value:0.25rem;margin-block-start:var(--calcite-input-message-spacing-value)}.calcite-input-message-icon{pointer-events:none;display:inline-flex;flex-shrink:0;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;margin-inline-end:0.5rem}:host([status=invalid]) .calcite-input-message-icon{color:var(--calcite-color-status-danger)}:host([status=warning]) .calcite-input-message-icon{color:var(--calcite-color-status-warning)}:host([status=valid]) .calcite-input-message-icon{color:var(--calcite-color-status-success)}:host([status=idle]) .calcite-input-message-icon{color:var(--calcite-color-brand)}:host([scale=s]){font-size:var(--calcite-font-size--3);line-height:0.75rem}:host([scale=m]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=l]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([hidden]){display:none}[hidden]{display:none}",xYe=SYe,EYe=fm(class extends pm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.icon=void 0,this.iconFlipRtl=!1,this.scale="m",this.status="idle"}handleIconEl(){this.requestedIcon=ME(EK,this.icon,this.status)}connectedCallback(){this.requestedIcon=ME(EK,this.icon,this.status)}render(){const t=this.el.hidden;return Be(Y_,{key:"c7d1b37721cec28dee1020b81ff66dee7fc8bc44","calcite-hydrated-hidden":t},this.renderIcon(this.requestedIcon),Be("slot",{key:"7147d81e906765c154b4a61e31706a72c1ef3ae0"}))}renderIcon(t){if(t)return Be("calcite-icon",{class:"calcite-input-message-icon",flipRtl:this.iconFlipRtl,icon:t,scale:"s"})}get el(){return this}static get watchers(){return{status:["handleIconEl"],icon:["handleIconEl"]}}static get style(){return xYe}},[1,"calcite-input-message",{icon:[520],iconFlipRtl:[516,"icon-flip-rtl"],scale:[513],status:[513]},void 0,{status:["handleIconEl"],icon:["handleIconEl"]}]);function o$(){if(typeof customElements>"u")return;["calcite-input-message","calcite-icon"].forEach(t=>{switch(t){case"calcite-input-message":customElements.get(t)||customElements.define(t,EYe);break;case"calcite-icon":customElements.get(t)||VS();break}})}o$();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const IYe=":host{position:relative;display:block;inline-size:100%}.track,.bar{position:absolute;inset-block-start:0px;block-size:2px}.track{z-index:var(--calcite-z-index);inline-size:100%;overflow:hidden;background-color:var(--calcite-progress-background-color, var(--calcite-color-border-3))}.bar{z-index:var(--calcite-z-index);background-color:var(--calcite-progress-fill-color, var(--calcite-color-brand))}@media (forced-colors: active){.track{background-color:highlightText}.bar{background-color:linkText}}.indeterminate{inline-size:20%;animation:looping-progress-bar-ani calc(var(--calcite-internal-animation-timing-medium) / var(--calcite-internal-duration-factor) * 11 / var(--calcite-internal-duration-factor)) linear infinite}.indeterminate.calcite--rtl{animation-name:looping-progress-bar-ani-rtl}.reversed{animation-direction:reverse}.text{padding-inline:0px;padding-block:1rem 0px;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-progress-text-color, var(--calcite-color-text-2))}@keyframes looping-progress-bar-ani{0%{transform:translate3d(-100%, 0, 0)}50%{inline-size:40%}100%{transform:translate3d(600%, 0, 0)}}@keyframes looping-progress-bar-ani-rtl{0%{transform:translate3d(100%, 0, 0)}50%{inline-size:40%}100%{transform:translate3d(-600%, 0, 0)}}:host([hidden]){display:none}[hidden]{display:none}",TYe=IYe,$Ye=fm(class extends pm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="determinate",this.value=0,this.label=void 0,this.text=void 0,this.reversed=!1}render(){const i=this.type==="determinate"?{width:`${this.value*100}%`}:{},r=QP(this.el);return Be("div",{key:"92597fefec948e4494425db28cd87bfad3cc76f8","aria-label":this.label||this.text,"aria-valuemax":1,"aria-valuemin":0,"aria-valuenow":this.value,role:"progressbar"},Be("div",{key:"d2a8ec085909b4bd35f443d0e831d645fb159317",class:"track"},Be("div",{key:"2dd26e56a0f344d02f1b4068167f61d9da4d2cbd",class:{bar:!0,indeterminate:this.type==="indeterminate",[TQ.rtl]:r==="rtl",reversed:this.reversed},style:i})),this.text?Be("div",{class:"text"},this.text):null)}get el(){return this}static get style(){return TYe}},[1,"calcite-progress",{type:[513],value:[2],label:[1],text:[1],reversed:[516]}]);function Oj(){if(typeof customElements>"u")return;["calcite-progress"].forEach(t=>{switch(t){case"calcite-progress":customElements.get(t)||customElements.define(t,$Ye);break}})}Oj();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const _s={loader:"loader",clearButton:"clear-button",editingEnabled:"editing-enabled",inlineChild:"inline-child",inputIcon:"icon",prefix:"prefix",suffix:"suffix",numberButtonWrapper:"number-button-wrapper",buttonItemHorizontal:"number-button-item--horizontal",wrapper:"element-wrapper",inputWrapper:"wrapper",actionWrapper:"action-wrapper",resizeIconWrapper:"resize-icon-wrapper",numberButtonItem:"number-button-item"},Q7={validationMessage:"inputValidationMessage"},IK={tel:"phone",password:"lock",email:"email-address",date:"calendar",time:"clock",search:"search"},MYe={action:"action"},CYe=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([scale=s]) input,:host([scale=s]) .prefix,:host([scale=s]) .suffix{block-size:1.5rem;padding-inline:0.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) textarea{block-size:1.5rem;min-block-size:1.5rem}:host([scale=s]) .number-button-wrapper,:host([scale=s]) .action-wrapper calcite-button,:host([scale=s]) .action-wrapper calcite-button button{block-size:1.5rem}:host([scale=s]) input[type=file]{block-size:1.5rem}:host([scale=s]) .clear-button{min-block-size:1.5rem;min-inline-size:1.5rem}:host([scale=s]) textarea{block-size:auto;padding-block:0.25rem;padding-inline:0.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]) input,:host([scale=m]) .prefix,:host([scale=m]) .suffix{block-size:2rem;padding-inline:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) textarea{min-block-size:2rem}:host([scale=m]) .number-button-wrapper,:host([scale=m]) .action-wrapper calcite-button,:host([scale=m]) .action-wrapper calcite-button button{block-size:2rem}:host([scale=m]) input[type=file]{block-size:2rem}:host([scale=m]) .clear-button{min-block-size:2rem;min-inline-size:2rem}:host([scale=m]) textarea{block-size:auto;padding-block:0.5rem;padding-inline:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]) input,:host([scale=l]) .prefix,:host([scale=l]) .suffix{block-size:2.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) textarea{min-block-size:2.75rem}:host([scale=l]) .number-button-wrapper,:host([scale=l]) .action-wrapper calcite-button,:host([scale=l]) .action-wrapper calcite-button button{block-size:2.75rem}:host([scale=l]) input[type=file]{block-size:2.75rem}:host([scale=l]) .clear-button{min-block-size:2.75rem;min-inline-size:2.75rem}:host([scale=l]) textarea{block-size:auto;padding-block:0.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([disabled]) textarea{resize:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}textarea,input{transition:var(--calcite-animation-timing), block-size 0, outline-offset 0s;-webkit-appearance:none;position:relative;margin:0px;box-sizing:border-box;display:flex;max-block-size:100%;inline-size:100%;max-inline-size:100%;flex:1 1 0%;border-radius:0px;background-color:var(--calcite-color-foreground-1);font-family:inherit;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-1)}input[type=search]::-webkit-search-decoration{-webkit-appearance:none}input,textarea{text-overflow:ellipsis;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);color:var(--calcite-color-text-1)}input:placeholder-shown,textarea:placeholder-shown{text-overflow:ellipsis}input:focus,textarea:focus{border-color:var(--calcite-color-brand);color:var(--calcite-color-text-1)}input[readonly],textarea[readonly]{background-color:var(--calcite-color-background);font-weight:var(--calcite-font-weight-medium)}input[readonly]:focus,textarea[readonly]:focus{color:var(--calcite-color-text-1)}calcite-icon{color:var(--calcite-color-text-3)}textarea,input{outline-color:transparent}textarea:focus,input:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host([status=invalid]) input,:host([status=invalid]) textarea{border-color:var(--calcite-color-status-danger)}:host([status=invalid]) input:focus,:host([status=invalid]) textarea:focus{outline:2px solid var(--calcite-color-status-danger);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host([scale=s]) .icon{inset-inline-start:0.5rem}:host([scale=m]) .icon{inset-inline-start:0.75rem}:host([scale=l]) .icon{inset-inline-start:1rem}:host([icon][scale=s]) input{padding-inline-start:2rem}:host([icon][scale=m]) input{padding-inline-start:2.5rem}:host([icon][scale=l]) input{padding-inline-start:3.5rem}.element-wrapper{position:relative;order:3;display:inline-flex;flex:1 1 0%;align-items:center}.icon{pointer-events:none;position:absolute;display:block;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.icon,.resize-icon-wrapper{z-index:var(--calcite-z-index)}input[type=text]::-ms-clear,input[type=text]::-ms-reveal{display:none;block-size:0px;inline-size:0px}input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration,input[type=date]::-webkit-clear-button,input[type=time]::-webkit-clear-button{display:none}.clear-button{pointer-events:initial;order:4;margin:0px;box-sizing:border-box;display:flex;min-block-size:100%;cursor:pointer;align-items:center;justify-content:center;align-self:stretch;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-foreground-1);outline-color:transparent;border-inline-start-width:0px}.clear-button:hover{background-color:var(--calcite-color-foreground-2);transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.clear-button:hover calcite-icon{color:var(--calcite-color-text-1);transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.clear-button:active{background-color:var(--calcite-color-foreground-3)}.clear-button:active calcite-icon{color:var(--calcite-color-text-1)}.clear-button:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.clear-button:disabled{opacity:var(--calcite-opacity-disabled)}.loader{inset-block-start:1px;inset-inline:1px;pointer-events:none;position:absolute;display:block}.action-wrapper{order:7;display:flex}.prefix,.suffix{box-sizing:border-box;display:flex;block-size:auto;min-block-size:100%;-webkit-user-select:none;user-select:none;align-content:center;align-items:center;overflow-wrap:break-word;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-background);font-weight:var(--calcite-font-weight-medium);line-height:1;color:var(--calcite-color-text-2)}.prefix{order:2;border-inline-end-width:0px;inline-size:var(--calcite-input-prefix-size, auto)}.suffix{order:5;border-inline-start-width:0px;inline-size:var(--calcite-input-suffix-size, auto)}:host([alignment=start]) textarea,:host([alignment=start]) input{text-align:start}:host([alignment=end]) textarea,:host([alignment=end]) input{text-align:end}input[type=number]{-moz-appearance:textfield}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0px}.number-button-wrapper{pointer-events:none;order:6;box-sizing:border-box;display:flex;flex-direction:column;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}:host([number-button-type=vertical]) .wrapper{flex-direction:row;display:flex}:host([number-button-type=vertical]) input,:host([number-button-type=vertical]) textarea{order:2}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=down] calcite-icon{transform:rotate(-90deg)}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=up] calcite-icon{transform:rotate(-90deg)}.number-button-item.number-button-item--horizontal[data-adjustment=down],.number-button-item.number-button-item--horizontal[data-adjustment=up]{order:1;max-block-size:100%;min-block-size:100%;align-self:stretch}.number-button-item.number-button-item--horizontal[data-adjustment=down] calcite-icon,.number-button-item.number-button-item--horizontal[data-adjustment=up] calcite-icon{transform:rotate(90deg)}.number-button-item.number-button-item--horizontal[data-adjustment=down]{border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);border-inline-end-width:0px}.number-button-item.number-button-item--horizontal[data-adjustment=down]:hover{background-color:var(--calcite-color-foreground-2)}.number-button-item.number-button-item--horizontal[data-adjustment=down]:hover calcite-icon{color:var(--calcite-color-text-1)}.number-button-item.number-button-item--horizontal[data-adjustment=up]{order:5}.number-button-item.number-button-item--horizontal[data-adjustment=up]:hover{background-color:var(--calcite-color-foreground-2)}.number-button-item.number-button-item--horizontal[data-adjustment=up]:hover calcite-icon{color:var(--calcite-color-text-1)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]:hover{background-color:var(--calcite-color-foreground-2)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]:hover calcite-icon{color:var(--calcite-color-text-1)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=up]:hover{background-color:var(--calcite-color-foreground-2)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=up]:hover calcite-icon{color:var(--calcite-color-text-1)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]{border-block-start-width:0px}.number-button-item{max-block-size:50%;min-block-size:50%;pointer-events:initial;margin:0px;box-sizing:border-box;display:flex;cursor:pointer;align-items:center;align-self:center;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-foreground-1);padding-block:0px;padding-inline:0.5rem;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;border-inline-start-width:0px}.number-button-item calcite-icon{pointer-events:none;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.number-button-item:focus{background-color:var(--calcite-color-foreground-2)}.number-button-item:focus calcite-icon{color:var(--calcite-color-text-1)}.number-button-item:active{background-color:var(--calcite-color-foreground-3)}.number-button-item:disabled{pointer-events:none}.wrapper{position:relative;display:flex;flex-direction:row;align-items:center}:input::-webkit-calendar-picker-indicator{display:none}input[type=date]::-webkit-input-placeholder{visibility:hidden !important}textarea::-webkit-resizer{position:absolute;inset-block-end:0px;box-sizing:border-box;padding-block:0px;padding-inline:0.25rem;inset-inline-end:0}.resize-icon-wrapper{inset-block-end:2px;inset-inline-end:2px;pointer-events:none;position:absolute;block-size:0.75rem;inline-size:0.75rem;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-3)}.resize-icon-wrapper calcite-icon{inset-block-end:0.25rem;inset-inline-end:0.25rem;transform:rotate(-45deg)}.calcite--rtl .resize-icon-wrapper calcite-icon{transform:rotate(45deg)}:host([type=color]) input{padding:0.25rem}:host([type=file]) input{cursor:pointer;border-width:1px;border-style:dashed;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-foreground-1);text-align:center}:host([type=file][scale=s]) input{padding-block:1px;padding-inline:0.5rem}:host([type=file][scale=m]) input{padding-block:0.25rem;padding-inline:0.75rem}:host([type=file][scale=l]) input{padding-block:0.5rem;padding-inline:1rem}:host(.no-bottom-border) input{border-block-end-width:0px}:host(.border-top-color-one) input{border-block-start-color:var(--calcite-color-border-1)}input.inline-child{background-color:transparent;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}input.inline-child .editing-enabled{background-color:inherit}input.inline-child:not(.editing-enabled){display:flex;cursor:pointer;text-overflow:ellipsis;border-color:transparent;padding-inline-start:0}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:0.5rem}:host([scale=s]) .validation-container{padding-block-start:0.25rem}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}:host([hidden]){display:none}[hidden]{display:none}`,AYe=CYe,kYe=fm(class extends pm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalInputFocus=hy(this,"calciteInternalInputFocus",6),this.calciteInternalInputBlur=hy(this,"calciteInternalInputBlur",6),this.calciteInputInput=hy(this,"calciteInputInput",7),this.calciteInputChange=hy(this,"calciteInputChange",6),this.childElType="input",this.previousValueOrigin="initial",this.mutationObserver=Q_("mutation",()=>this.setDisabledAction()),this.userChangedValue=!1,this.keyDownHandler=t=>{this.readOnly||this.disabled||t.defaultPrevented||(this.isClearable&&t.key==="Escape"&&(this.clearInputValue(t),t.preventDefault()),t.key==="Enter"&&lYe(this)&&t.preventDefault())},this.clearInputValue=t=>{this.setValue({committing:!0,nativeEvent:t,origin:"user",value:""})},this.emitChangeIfUserModified=()=>{this.previousValueOrigin==="user"&&this.value!==this.previousEmittedValue&&(this.calciteInputChange.emit(),this.setPreviousEmittedValue(this.value))},this.inputBlurHandler=()=>{window.clearInterval(this.nudgeNumberValueIntervalId),this.calciteInternalInputBlur.emit(),this.emitChangeIfUserModified()},this.clickHandler=t=>{if(this.disabled)return;const i=t.composedPath();!i.includes(this.inputWrapperEl)||i.includes(this.actionWrapperEl)||this.setFocus()},this.inputFocusHandler=()=>{this.calciteInternalInputFocus.emit()},this.inputChangeHandler=()=>{this.type==="file"&&(this.files=this.childEl.files)},this.inputInputHandler=t=>{this.disabled||this.readOnly||this.setValue({nativeEvent:t,origin:"user",value:t.target.value})},this.inputKeyDownHandler=t=>{this.disabled||this.readOnly||t.key==="Enter"&&this.emitChangeIfUserModified()},this.inputNumberInputHandler=t=>{if(this.disabled||this.readOnly||this.value==="Infinity"||this.value==="-Infinity")return;const i=t.target.value;oa.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator};const r=oa.delocalize(i);t.inputType==="insertFromPaste"?(yc(r)||t.preventDefault(),this.setValue({nativeEvent:t,origin:"user",value:FKe(r)}),this.childNumberEl.value=this.displayedValue):this.setValue({nativeEvent:t,origin:"user",value:r})},this.inputNumberKeyDownHandler=t=>{if(this.type!=="number"||this.disabled||this.readOnly)return;if(this.value==="Infinity"||this.value==="-Infinity"){t.preventDefault(),(t.key==="Backspace"||t.key==="Delete")&&this.clearInputValue(t);return}if(t.key==="ArrowUp"){t.preventDefault(),this.nudgeNumberValue("up",t);return}if(t.key==="ArrowDown"){this.nudgeNumberValue("down",t);return}const i=[...Sj,"ArrowLeft","ArrowRight","Backspace","Delete","Enter","Escape","Tab"];if(t.altKey||t.ctrlKey||t.metaKey)return;const r=t.shiftKey&&t.key==="Tab";if(i.includes(t.key)||r){t.key==="Enter"&&this.emitChangeIfUserModified();return}oa.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},!(t.key===oa.decimal&&(!this.value&&!this.childNumberEl.value||this.value&&this.childNumberEl.value.indexOf(oa.decimal)===-1))&&(/[eE]/.test(t.key)&&(!this.value&&!this.childNumberEl.value||this.value&&!/[eE]/.test(this.childNumberEl.value))||t.key==="-"&&(!this.value&&!this.childNumberEl.value||this.value&&this.childNumberEl.value.split("-").length<=2)||t.preventDefault())},this.nudgeNumberValue=(t,i)=>{if(i instanceof KeyboardEvent&&i.repeat||this.type!=="number")return;const r=this.maxString?parseFloat(this.maxString):null,n=this.minString?parseFloat(this.minString):null,o=150;this.incrementOrDecrementNumberValue(t,r,n,i),this.nudgeNumberValueIntervalId&&window.clearInterval(this.nudgeNumberValueIntervalId);let u=!0;this.nudgeNumberValueIntervalId=window.setInterval(()=>{if(u){u=!1;return}this.incrementOrDecrementNumberValue(t,r,n,i)},o)},this.numberButtonPointerUpAndOutHandler=()=>{window.clearInterval(this.nudgeNumberValueIntervalId)},this.numberButtonPointerDownHandler=t=>{if(!Kge(t))return;t.preventDefault();const i=t.target.dataset.adjustment;this.disabled||this.nudgeNumberValue(i,t)},this.onHiddenFormInputInput=t=>{t.target.name===this.name&&this.setValue({value:t.target.value,origin:"direct"}),this.setFocus(),t.stopPropagation()},this.setChildElRef=t=>{this.childEl=t},this.setChildNumberElRef=t=>{this.childNumberEl=t},this.setInputValue=t=>{this.type==="text"&&!this.childEl||this.type==="number"&&!this.childNumberEl||(this[`child${this.type==="number"?"Number":""}El`].value=t)},this.setPreviousEmittedValue=t=>{this.previousEmittedValue=this.normalizeValue(t)},this.setPreviousValue=t=>{this.previousValue=this.normalizeValue(t)},this.setValue=({committing:t=!1,nativeEvent:i,origin:r,previousValue:n,value:o})=>{var u,f;if(this.setPreviousValue(n??this.value),this.previousValueOrigin=r,this.type==="number"){oa.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator,signDisplay:"never"};const g=((u=this.previousValue)==null?void 0:u.length)>o.length||((f=this.value)==null?void 0:f.length)>o.length,b=o.charAt(o.length-1)===".",E=b&&g?o:UKe(o),I=o&&!E?yc(this.previousValue)?this.previousValue:"":E;let M=oa.localize(I);r!=="connected"&&!b&&(M=HKe(M,I,oa)),this.displayedValue=b&&g?`${M}${oa.decimal}`:M,this.userChangedValue=r==="user"&&this.value!==I,this.value=["-","."].includes(I)?"":I}else this.userChangedValue=r==="user"&&this.value!==o,this.value=o;r==="direct"&&(this.setInputValue(o),this.previousEmittedValue=o),i&&(this.calciteInputInput.emit().defaultPrevented?(this.value=this.previousValue,this.displayedValue=this.type==="number"?oa.localize(this.previousValue):this.previousValue):t&&this.emitChangeIfUserModified())},this.inputKeyUpHandler=()=>{window.clearInterval(this.nudgeNumberValueIntervalId)},this.alignment="start",this.autofocus=void 0,this.clearable=!1,this.disabled=!1,this.enterKeyHint=void 0,this.form=void 0,this.groupSeparator=!1,this.icon=void 0,this.iconFlipRtl=!1,this.inputMode=void 0,this.label=void 0,this.loading=!1,this.numberingSystem=void 0,this.localeFormat=!1,this.max=void 0,this.min=void 0,this.maxLength=void 0,this.minLength=void 0,this.validationMessage=void 0,this.validationIcon=void 0,this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.name=void 0,this.numberButtonType="vertical",this.placeholder=void 0,this.prefixText=void 0,this.readOnly=!1,this.required=!1,this.scale="m",this.status="idle",this.step=void 0,this.autocomplete=void 0,this.pattern=void 0,this.accept=void 0,this.multiple=!1,this.suffixText=void 0,this.editingEnabled=!1,this.type="text",this.value="",this.files=void 0,this.messages=void 0,this.messageOverrides=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.displayedValue=void 0,this.slottedActionElDisabledInternally=!1}handleGlobalAttributesChanged(){C6(this)}disabledWatcher(){this.setDisabledAction()}maxWatcher(){var t;this.maxString=((t=this.max)==null?void 0:t.toString())||null}minWatcher(){var t;this.minString=((t=this.min)==null?void 0:t.toString())||null}onMessagesChange(){}valueWatcher(t,i){if(!this.userChangedValue){if(this.type==="number"&&(t==="Infinity"||t==="-Infinity")){this.displayedValue=t,this.previousEmittedValue=t;return}this.setValue({origin:"direct",previousValue:i,value:t==null||t==""?"":this.type==="number"?yc(t)?t:this.previousValue||"":t}),this.warnAboutInvalidNumberValue(t)}this.userChangedValue=!1}updateRequestedIcon(){this.requestedIcon=ME(IK,this.icon,this.type)}get isClearable(){var t;return!this.isTextarea&&(this.clearable||this.type==="search")&&((t=this.value)==null?void 0:t.length)>0}get isTextarea(){return this.childElType==="textarea"}effectiveLocaleChange(){$j(this,this.effectiveLocale)}connectedCallback(){var t;xj(this),Mj(this),this.inlineEditableEl=this.el.closest("calcite-inline-editable"),this.inlineEditableEl&&(this.editingEnabled=this.inlineEditableEl.editingEnabled||!1),s$(this),Mfe(this),(t=this.mutationObserver)==null||t.observe(this.el,{childList:!0}),this.setDisabledAction(),this.el.addEventListener(GR,this.onHiddenFormInputInput)}disconnectedCallback(){var t;Ofe(this),Cfe(this),Ej(this),Cj(this),(t=this.mutationObserver)==null||t.disconnect(),this.el.removeEventListener(GR,this.onHiddenFormInputInput)}async componentWillLoad(){var t,i;wj(this),this.childElType=this.type==="textarea"?"textarea":"input",this.maxString=(t=this.max)==null?void 0:t.toString(),this.minString=(i=this.min)==null?void 0:i.toString(),this.requestedIcon=ME(IK,this.icon,this.type),await Tj(this),this.setPreviousEmittedValue(this.value),this.setPreviousValue(this.value),this.type==="number"&&(this.value==="Infinity"||this.value==="-Infinity"?(this.displayedValue=this.value,this.previousEmittedValue=this.value):(this.warnAboutInvalidNumberValue(this.value),this.setValue({origin:"connected",value:yc(this.value)?this.value:""})))}componentDidLoad(){bj(this)}componentShouldUpdate(t,i,r){return this.type==="number"&&r==="value"&&t&&!yc(t)?(this.setValue({origin:"reset",value:i}),!1):!0}componentDidRender(){gj(this)}async setFocus(){var t,i;await _j(this),this.type==="number"?(t=this.childNumberEl)==null||t.focus():(i=this.childEl)==null||i.focus()}async selectText(){var t,i;this.type==="number"?(t=this.childNumberEl)==null||t.select():(i=this.childEl)==null||i.select()}onLabelClick(){this.setFocus()}incrementOrDecrementNumberValue(t,i,r,n){const{value:o}=this;if(o==="Infinity"||o==="-Infinity")return;const u=t==="up"?1:-1,f=this.step==="any"?1:Math.abs(this.step||1),b=new ci(o!==""?o:"0").add(`${f*u}`),E=()=>typeof r=="number"&&!isNaN(r)&&b.subtract(`${r}`).isNegative,I=()=>typeof i=="number"&&!isNaN(i)&&!b.subtract(`${i}`).isNegative,M=E()?`${r}`:I()?`${i}`:b.toString();this.setValue({committing:!0,nativeEvent:n,origin:"user",value:M})}syncHiddenFormInput(t){Nfe(this.type,this,t)}setDisabledAction(){const t=Uge(this.el,"action");t&&(this.disabled?(t.getAttribute("disabled")==null&&(this.slottedActionElDisabledInternally=!0),t.setAttribute("disabled","")):this.slottedActionElDisabledInternally&&(t.removeAttribute("disabled"),this.slottedActionElDisabledInternally=!1))}normalizeValue(t){return this.type==="number"?yc(t)?t:"":t}warnAboutInvalidNumberValue(t){this.type==="number"&&t&&!yc(t)&&console.warn(`The specified value "${t}" cannot be parsed, or is out of range.`)}render(){const t=QP(this.el),i=Be("div",{key:"ed9acea9dbc18f4cfc5e7095c1e2de0b1adfdf35",class:_s.loader},Be("calcite-progress",{key:"58321a27c25dd848a648d2e3d5ca6dfc3f5fd649",label:this.messages.loading,type:"indeterminate"})),r=Be("button",{key:"348d8dee0c032afe986b1e253c9d667256f3d9f0","aria-label":this.messages.clear,class:_s.clearButton,disabled:this.disabled||this.readOnly,onClick:this.clearInputValue,tabIndex:-1,type:"button"},Be("calcite-icon",{key:"334b68a283b767c0e9bea09ccfd83d09c8c17711",icon:"x",scale:Rw(this.scale)})),n=Be("calcite-icon",{key:"4ab83aa9268277a38449ebe4a6e3db4dc9badcae",class:_s.inputIcon,flipRtl:this.iconFlipRtl,icon:this.requestedIcon,scale:Rw(this.scale)}),o=this.numberButtonType==="horizontal",u=Be("button",{key:"2dd700034d38581aaea39c019e626ffa1a2c1c16","aria-hidden":"true",class:{[_s.numberButtonItem]:!0,[_s.buttonItemHorizontal]:o},"data-adjustment":"up",disabled:this.disabled||this.readOnly,onPointerDown:this.numberButtonPointerDownHandler,onPointerOut:this.numberButtonPointerUpAndOutHandler,onPointerUp:this.numberButtonPointerUpAndOutHandler,tabIndex:-1,type:"button"},Be("calcite-icon",{key:"6ca9a7c93aa14520292ad8c800c4e099bd46f30d",icon:"chevron-up",scale:Rw(this.scale)})),f=Be("button",{key:"cdbd88ddd308bd82b6d239a83f365a2c5e226cfc","aria-hidden":"true",class:{[_s.numberButtonItem]:!0,[_s.buttonItemHorizontal]:o},"data-adjustment":"down",disabled:this.disabled||this.readOnly,onPointerDown:this.numberButtonPointerDownHandler,onPointerOut:this.numberButtonPointerUpAndOutHandler,onPointerUp:this.numberButtonPointerUpAndOutHandler,tabIndex:-1,type:"button"},Be("calcite-icon",{key:"f1b9cf329da9add564d690c517ddcc414c4fbfa3",icon:"chevron-down",scale:Rw(this.scale)})),g=Be("div",{key:"247efdce33568f219b1bf3bf252b8b19a74d03ea",class:_s.numberButtonWrapper},u,f),b=Be("div",{key:"01819a850399fb20a29471861e011695bf80af97",class:_s.prefix},this.prefixText),E=Be("div",{key:"dcc073305f3824a0eb72ef230bd217dabdb72104",class:_s.suffix},this.suffixText),I=this.el.autofocus||this.el.hasAttribute("autofocus")?!0:null,M=this.el.enterKeyHint||this.el.getAttribute("enterkeyhint"),k=this.el.inputMode||this.el.getAttribute("inputmode"),L=this.type==="number"?Be("input",{accept:this.accept,"aria-errormessage":Q7.validationMessage,"aria-invalid":CE(this.status==="invalid"),"aria-label":qR(this),autocomplete:this.autocomplete,autofocus:I,defaultValue:this.defaultValue,disabled:this.disabled?!0:null,enterKeyHint:M,inputMode:k,key:"localized-input",maxLength:this.maxLength,minLength:this.minLength,multiple:this.multiple,name:void 0,onBlur:this.inputBlurHandler,onFocus:this.inputFocusHandler,onInput:this.inputNumberInputHandler,onKeyDown:this.inputNumberKeyDownHandler,onKeyUp:this.inputKeyUpHandler,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:this.readOnly,ref:this.setChildNumberElRef,type:"text",value:this.displayedValue}):null,P=this.type!=="number"?[Be(this.childElType,{accept:this.accept,"aria-errormessage":Q7.validationMessage,"aria-invalid":CE(this.status==="invalid"),"aria-label":qR(this),autocomplete:this.autocomplete,autofocus:I,class:{[_s.editingEnabled]:this.editingEnabled,[_s.inlineChild]:!!this.inlineEditableEl},defaultValue:this.defaultValue,disabled:this.disabled?!0:null,enterKeyHint:M,inputMode:k,max:this.maxString,maxLength:this.maxLength,min:this.minString,minLength:this.minLength,multiple:this.multiple,name:this.name,onBlur:this.inputBlurHandler,onChange:this.inputChangeHandler,onFocus:this.inputFocusHandler,onInput:this.inputInputHandler,onKeyDown:this.inputKeyDownHandler,onKeyUp:this.inputKeyUpHandler,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:this.readOnly,ref:this.setChildElRef,required:this.required?!0:null,step:this.step,tabIndex:this.disabled||this.inlineEditableEl&&!this.editingEnabled?-1:null,type:this.type,value:this.value}),this.isTextarea?Be("div",{class:_s.resizeIconWrapper},Be("calcite-icon",{icon:"chevron-down",scale:Rw(this.scale)})):null]:null;return Be(Y_,{key:"23d6092960315f172a56105b9af75ddc6497874c",onClick:this.clickHandler,onKeyDown:this.keyDownHandler},Be(vj,{key:"1bb063f39c14a829a376465fa8c2bbc288046ac7",disabled:this.disabled},Be("div",{key:"7f3644f002b7cb75d93d9c0218508b502ddcfd0b",class:{[_s.inputWrapper]:!0,[TQ.rtl]:t==="rtl"},ref:D=>this.inputWrapperEl=D},this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?f:null,this.prefixText?b:null,Be("div",{key:"0d01898e4949a60e0853c1a72669f5c9d6c91ba5",class:_s.wrapper},L,P,this.isClearable?r:null,this.requestedIcon?n:null,this.loading?i:null),Be("div",{key:"42e7adec440e417128feb9845c36d0444e6c1ae4",class:_s.actionWrapper,ref:D=>this.actionWrapperEl=D},Be("slot",{key:"f391b035ad9fc108d1f99c4cedf539425c20a36d",name:MYe.action})),this.type==="number"&&this.numberButtonType==="vertical"&&!this.readOnly?g:null,this.suffixText?E:null,this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?u:null,Be(kfe,{key:"df415df551b4a9a16565c8f554454d01aa89327e",component:this})),this.validationMessage&&this.status==="invalid"?Be(Pfe,{icon:this.validationIcon,id:Q7.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{autofocus:["handleGlobalAttributesChanged"],enterkeyhint:["handleGlobalAttributesChanged"],inputmode:["handleGlobalAttributesChanged"],disabled:["disabledWatcher"],max:["maxWatcher"],min:["minWatcher"],messageOverrides:["onMessagesChange"],value:["valueWatcher"],icon:["updateRequestedIcon"],type:["updateRequestedIcon"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return AYe}},[1,"calcite-input",{alignment:[513],autofocus:[4],clearable:[516],disabled:[516],enterKeyHint:[1,"enter-key-hint"],form:[513],groupSeparator:[516,"group-separator"],icon:[520],iconFlipRtl:[516,"icon-flip-rtl"],inputMode:[1,"input-mode"],label:[1],loading:[516],numberingSystem:[513,"numbering-system"],localeFormat:[4,"locale-format"],max:[514],min:[514],maxLength:[514,"max-length"],minLength:[514,"min-length"],validationMessage:[1,"validation-message"],validationIcon:[520,"validation-icon"],validity:[1040],name:[513],numberButtonType:[513,"number-button-type"],placeholder:[1],prefixText:[1,"prefix-text"],readOnly:[516,"read-only"],required:[516],scale:[513],status:[513],step:[520],autocomplete:[1],pattern:[1],accept:[1],multiple:[4],suffixText:[1,"suffix-text"],editingEnabled:[1540,"editing-enabled"],type:[513],value:[1025],files:[16],messages:[1040],messageOverrides:[1040],defaultMessages:[32],effectiveLocale:[32],displayedValue:[32],slottedActionElDisabledInternally:[32],setFocus:[64],selectText:[64]},void 0,{autofocus:["handleGlobalAttributesChanged"],enterkeyhint:["handleGlobalAttributesChanged"],inputmode:["handleGlobalAttributesChanged"],disabled:["disabledWatcher"],max:["maxWatcher"],min:["minWatcher"],messageOverrides:["onMessagesChange"],value:["valueWatcher"],icon:["updateRequestedIcon"],type:["updateRequestedIcon"],effectiveLocale:["effectiveLocaleChange"]}]);function Ffe(){if(typeof customElements>"u")return;["calcite-input","calcite-icon","calcite-input-message","calcite-progress"].forEach(t=>{switch(t){case"calcite-input":customElements.get(t)||customElements.define(t,kYe);break;case"calcite-icon":customElements.get(t)||VS();break;case"calcite-input-message":customElements.get(t)||o$();break;case"calcite-progress":customElements.get(t)||Oj();break}})}Ffe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const LYe={container:"container",searchIcon:"search-icon"},OYe={search:"search",close:"x"},RYe=":host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;inline-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{display:flex;inline-size:100%;padding:0.5rem}label{position:relative;margin-inline:0.25rem;margin-block:0px;display:flex;inline-size:100%;align-items:center;overflow:hidden}input[type=text]{margin-block-end:0.25rem;inline-size:100%;border-style:none;background-color:transparent;padding-block:0.25rem;font-family:inherit;font-size:var(--calcite-font-size--2);line-height:1rem;color:var(--calcite-color-text-1);padding-inline-end:0.25rem;padding-inline-start:1.5rem;transition:padding var(--calcite-animation-timing), box-shadow var(--calcite-animation-timing)}input[type=text]::-ms-clear{display:none}calcite-input{inline-size:100%}.search-icon{position:absolute;display:flex;color:var(--calcite-color-text-2);inset-inline-start:0;transition:inset-inline-start var(--calcite-animation-timing), inset-inline-end var(--calcite-animation-timing), opacity var(--calcite-animation-timing)}input[type=text]:focus{border-color:var(--calcite-color-brand);outline:2px solid transparent;outline-offset:2px;padding-inline:0.25rem}input[type=text]:focus~.search-icon{inset-inline-start:calc(1rem * -1);opacity:0}.clear-button{display:flex;cursor:pointer;align-items:center;border-width:0px;background-color:transparent;color:var(--calcite-color-text-2)}.clear-button:hover,.clear-button:focus{color:var(--calcite-color-text-1)}:host([hidden]){display:none}[hidden]{display:none}",PYe=RYe,NYe=fm(class extends pm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteFilterChange=hy(this,"calciteFilterChange",6),this.filterDebounced=ufe((t,i=!1,r)=>this.updateFiltered(gK(this.items??[],t,this.filterProps),i,r),h1e.filter),this.inputHandler=t=>{const i=t.target;this.value=i.value,this.filterDebounced(i.value,!0)},this.keyDownHandler=t=>{t.defaultPrevented||(t.key==="Escape"&&(this.clear(),t.preventDefault()),t.key==="Enter"&&t.preventDefault())},this.clear=()=>{this.value="",this.filterDebounced("",!0),this.setFocus()},this.items=[],this.disabled=!1,this.filteredItems=[],this.filterProps=void 0,this.placeholder=void 0,this.scale="m",this.value="",this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale=void 0,this.defaultMessages=void 0}watchItemsHandler(){this.filterDebounced(this.value)}filterPropsHandler(){this.filterDebounced(this.value)}onMessagesChange(){}valueHandler(t){this.filterDebounced(t)}effectiveLocaleChange(){$j(this,this.effectiveLocale)}async componentWillLoad(){wj(this),this.updateFiltered(gK(this.items??[],this.value,this.filterProps)),await Tj(this)}connectedCallback(){xj(this),Mj(this)}componentDidRender(){gj(this)}disconnectedCallback(){Ej(this),Cj(this),this.filterDebounced.cancel()}componentDidLoad(){bj(this)}async filter(t=this.value){return new Promise(i=>{this.value=t,this.filterDebounced(t,!1,i)})}async setFocus(){var t;return await _j(this),(t=this.textInput)==null?void 0:t.setFocus()}updateFiltered(t,i=!1,r){this.filteredItems=t,i&&this.calciteFilterChange.emit(),r==null||r()}render(){const{disabled:t,scale:i}=this;return Be(vj,{key:"c4a624e52409ed90839b506f5d99ab623767260e",disabled:t},Be("div",{key:"1f2ef99156489719dd2f938bc5ce8a05185866bf",class:LYe.container},Be("label",{key:"6fe8c6cf73f554908be38299263d23380a4ed089"},Be("calcite-input",{key:"6765e00d208d6898221540769865d84aa1c64974",clearable:!0,disabled:t,icon:OYe.search,label:this.messages.label,messageOverrides:{clear:this.messages.clear},onCalciteInputInput:this.inputHandler,onKeyDown:this.keyDownHandler,placeholder:this.placeholder,ref:r=>{this.textInput=r},scale:i,type:"text",value:this.value}))))}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{items:["watchItemsHandler"],filterProps:["filterPropsHandler"],messageOverrides:["onMessagesChange"],value:["valueHandler"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return PYe}},[17,"calcite-filter",{items:[16],disabled:[516],filteredItems:[1040],filterProps:[16],placeholder:[1],scale:[513],value:[1025],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],defaultMessages:[32],filter:[64],setFocus:[64]},void 0,{items:["watchItemsHandler"],filterProps:["filterPropsHandler"],messageOverrides:["onMessagesChange"],value:["valueHandler"],effectiveLocale:["effectiveLocaleChange"]}]);function FYe(){if(typeof customElements>"u")return;["calcite-filter","calcite-icon","calcite-input","calcite-input-message","calcite-progress"].forEach(t=>{switch(t){case"calcite-filter":customElements.get(t)||customElements.define(t,NYe);break;case"calcite-icon":customElements.get(t)||VS();break;case"calcite-input":customElements.get(t)||Ffe();break;case"calcite-input-message":customElements.get(t)||o$();break;case"calcite-progress":customElements.get(t)||Oj();break}})}FYe();function TK(e){switch(e){case Ai.SUPPORTED:break;case Ai.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case Ai.GEOMETRY_MISSING:return"no geometry";case Ai.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case Ai.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case Ai.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""}var Ai;(function(e){e[e.SUPPORTED=0]="SUPPORTED",e[e.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING",e[e.GEOMETRY_MISSING=2]="GEOMETRY_MISSING",e[e.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED",e[e.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED",e[e.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"})(Ai||(Ai={}));function Dfe(e){return e?lm:ZYe}function DYe(e,t){return t!=null&&t.mode?t.mode:Dfe(e).mode}function jYe(e,t){return t??Dfe(e)}function jfe(e,t){return DYe(e==null||(e.hasZ??!1),t)}function Mpt(e,t){return jYe(e==null||(e.hasZ??!1),t)}function zYe(e){const t=zfe(e);return jfe(e.geometry,t)}function VYe(e){const t=zfe(e),i=jfe(e.geometry,t),r=t!=null&&i!=="on-the-ground"?WYe(t):0,n=t==null?void 0:t.featureExpressionInfo;return{mode:i,offset:r,featureExpressionInfo:n}}function UYe(e){return a$(VYe(e))}function Cpt(e){return a$(e)||GYe(e)}function GYe(e){var t;return((t=e==null?void 0:e.featureExpressionInfo)==null?void 0:t.expression)==="0"}function a$(e){if(!e||e.mode==="on-the-ground")return!1;const t=e!=null&&e.featureExpressionInfo?e.featureExpressionInfo.expression:null;return!(!t||t==="0")}function zfe(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function Rj(e,t){if(!(e!=null&&e.offset))return 0;const{offset:i,unit:r}=e;if(r==="decimal-degrees")return 0;const n=r!=="unknown"&&r?r:"meters",o=Zbe(t);return o?Ut(i,n,o):0}function Apt(e,t,i){if(!(i!=null&&i.mode))return;const r=e.hasZ?e.z:0,n=Rj(i,e.spatialReference);switch(i.mode){case"absolute-height":return r-n;case"on-the-ground":return 0;case"relative-to-ground":return r-((t.elevationProvider.getElevation(e.x,e.y,r,e.spatialReference,"ground")??0)+n);case"relative-to-scene":return r-((t.elevationProvider.getElevation(e.x,e.y,r,e.spatialReference,"scene")??0)+n)}}function BYe(e,t,i,r=null){return Pj(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,i,r)}function Vfe(e,t,i,r,n=null){return Pj(e,t[0],t[1],t.length>2?t[2]:0,i,r,n)}function Pj(e,t,i,r,n,o,u=null){if(o==null)return;const f=u!=null?u.mode:"absolute-height";if(f==="on-the-ground")return 0;const{absoluteZ:g}=qYe(t,i,r,n,e,o);return HYe(g,t,i,r,n,e,u,f)}function qYe(e,t,i,r,n,o){const u=Rj(o,r);switch(o.mode){case"absolute-height":return{absoluteZ:i+u,elevation:0};case"on-the-ground":{const f=n.elevationProvider.getElevation(e,t,0,r,"ground")??0;return{absoluteZ:f,elevation:f}}case"relative-to-ground":{const f=n.elevationProvider.getElevation(e,t,i,r,"ground")??0;return{absoluteZ:i+f+u,elevation:f}}case"relative-to-scene":{const f=n.elevationProvider.getElevation(e,t,i,r,"scene")??0;return{absoluteZ:i+f+u,elevation:f}}}}function HYe(e,t,i,r,n,o,u,f){const g=Rj(u,n);switch(f){case"absolute-height":return e-g;case"relative-to-ground":return e-((o.elevationProvider.getElevation(t,i,r,n,"ground")??0)+g);case"relative-to-scene":return e-((o.elevationProvider.getElevation(t,i,r,n,"scene")??0)+g)}}function kpt(e,t){if(t==null)return!1;const{mode:i}=t;return i!=null&&(e==="scene"&&i==="relative-to-scene"||e==="ground"&&i!=="absolute-height")}function Lpt(e,t,i){return i&&i.mode!==t?`${e} only support ${t} elevation mode`:null}function Opt(e,t,i){return(i==null?void 0:i.mode)===t?`${e} do not support ${t} elevation mode`:null}function Rpt(e,t){return(t==null?void 0:t.featureExpressionInfo)!=null&&t.featureExpressionInfo.expression!=="0"?`${e} do not support featureExpressionInfo`:null}function Ppt(e,t){t&&e.warn(".elevationInfo=",t)}function WYe(e){return((e==null?void 0:e.offset)??0)*$je(e==null?void 0:e.unit)}const lm={mode:"absolute-height",offset:0},ZYe={mode:"on-the-ground",offset:null};function JYe(e){var r,n;if(e.graphic&&((r=e.graphic.layer)==null?void 0:r.type)!=="graphics")return Ai.GRAPHICS_LAYER_MISSING;const t=(n=e.operations)==null?void 0:n.data.type;if(!t)return Ai.GEOMETRY_TYPE_UNSUPPORTED;switch(t){case"polygon":case"point":case"polyline":case"mesh":break;default:return Ai.GEOMETRY_TYPE_UNSUPPORTED}const i=e.elevationInfo;return a$(i)?Ai.ELEVATION_MODE_UNSUPPORTED:Ai.SUPPORTED}function KYe(e){return YYe(e).result}function YYe(e){var r;if(e.graphic&&((r=e.graphic.layer)==null?void 0:r.type)!=="graphics")return{result:Ai.GRAPHICS_LAYER_MISSING};if(!e.operations)return{result:Ai.GEOMETRY_MISSING};if(a$(e.elevationInfo))return{result:Ai.ELEVATION_MODE_UNSUPPORTED};const t=e.operations.data.type,i=e.operations.data.geometry;return t==="point"||t==="mesh"||t==="polyline"||t==="polygon"?{result:Ai.SUPPORTED,geometry:i}:{result:Ai.GEOMETRY_TYPE_UNSUPPORTED}}function XYe(e){var i;if(((i=e.layer)==null?void 0:i.type)!=="graphics")return Ai.GRAPHICS_LAYER_MISSING;if(e.geometry==null)return Ai.GEOMETRY_MISSING;switch(e.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return Ai.SUPPORTED;default:return Ai.GEOMETRY_TYPE_UNSUPPORTED}const t=e.symbol!=null&&e.symbol.type==="point-3d"&&e.symbol.symbolLayers;return!t||!t.some(r=>r.type==="object")?Ai.SYMBOL_TYPE_UNSUPPORTED:zYe(e)!=="on-the-ground"&&UYe(e)?Ai.ELEVATION_MODE_UNSUPPORTED:Ai.SUPPORTED}function $K(e,t,i){if(!t||!(e!=null&&e.map))return;const{map:r}=e,n=r.layers.find(o=>o===t);n||r.add(t,i),n&&i!=null&&r.layers.reorder(n,i)}function Npt(e,t){const i=(t==null?void 0:t.type)==="subtype-sublayer"?t.parent:t;return e.allLayerViews.find(r=>{const n=r.layer;return n===i||"sublayers"in n&&n.sublayers!=null&&n.sublayers.includes(i)})}const Ufe="z",Gfe="r",Er={redo:Gfe,undo:Ufe,center:"Alt",constraint:"Shift",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "},MK={toggle:"Control"},Fpt={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},Dpt={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:tse,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0},undo:Ufe,redo:Gfe};let jpt=class{constructor(){this._bindings=new Map}add(t,i){return this.addToggle(t,r=>{r.type==="key-down"&&i(r)})}addToggle(t,i){const r=QYe.fromDefinition(t,i),n=c2(this._bindings,r.key,()=>[]);return n.push(r),Yt(()=>rN(n,r))}register(t,i=Ii.WIDGET){return p2([t.on("key-down",r=>this.dispatch(t.inputManager,r),i),t.on("key-up",r=>this.dispatch(t.inputManager,r),i)])}dispatch(t,i){const r=i.key,n=this._bindings.get(r);if(n)for(const o of n)o.process(t,i)}},QYe=class HR{constructor(t,i,r,n,o){this.key=t,this.modifiers=i,this.repeats=r,this.continuePropagation=n,this.callback=o}process(t,i){if(!(i.key!==this.key||"repeat"in i&&i.repeat&&!this.repeats)){for(const r of this.modifiers)if(!t.isModifierKeyDown(r))return;this.continuePropagation||i.stopPropagation(),this.callback(i)}}static fromDefinition(t,i){if(typeof t=="string")return new HR(t,[],!1,!1,i);const{key:r,modifier:n,repeats:o,continuePropagation:u}=t;return new HR(r,n?Array.isArray(n)?n:[n]:[],!!o,!!u,i)}},H4=class extends De{constructor(t){super(t),this.enabled=!1}};m([w({type:Boolean,nonNullable:!0})],H4.prototype,"enabled",void 0),H4=m([H("esri.views.interactive.sketch.SketchLabelOptions")],H4);const Nj=H4;let V3=class extends De{constructor(t){super(t),this.mode="absolute-height"}toJSON(){return{mode:this.mode}}};m([w({type:String,nonNullable:!0})],V3.prototype,"mode",void 0),V3=m([H("esri.views.interactive.sketch.SketchTooltipElevationOptions")],V3);let Ms=class extends De{constructor(t){super(t),this.area=!0,this.coordinates=!0,this.direction=!0,this.distance=!0,this.elevation=!0,this.header=!0,this.helpMessage=!1,this.orientation=!0,this.radius=!0,this.rotation=!0,this.scale=!0,this.size=!0,this.totalLength=!0}};m([w({type:Boolean,nonNullable:!0})],Ms.prototype,"area",void 0),m([w({type:Boolean,nonNullable:!0})],Ms.prototype,"coordinates",void 0),m([w({type:Boolean,nonNullable:!0})],Ms.prototype,"direction",void 0),m([w({type:Boolean,nonNullable:!0})],Ms.prototype,"distance",void 0),m([w({type:Boolean,nonNullable:!0})],Ms.prototype,"elevation",void 0),m([w({type:Boolean,nonNullable:!0})],Ms.prototype,"header",void 0),m([w({type:Boolean,nonNullable:!0})],Ms.prototype,"helpMessage",void 0),m([w({type:Boolean,nonNullable:!0})],Ms.prototype,"orientation",void 0),m([w({type:Boolean,nonNullable:!0})],Ms.prototype,"radius",void 0),m([w({type:Boolean,nonNullable:!0})],Ms.prototype,"rotation",void 0),m([w({type:Boolean,nonNullable:!0})],Ms.prototype,"scale",void 0),m([w({type:Boolean,nonNullable:!0})],Ms.prototype,"size",void 0),m([w({type:Boolean,nonNullable:!0})],Ms.prototype,"totalLength",void 0),Ms=m([H("esri.views.interactive.sketch.SketchTooltipVisibleElements")],Ms);const Bfe=Ms;let Js=class extends De{constructor(t){super(t),this.enabled=!1,this.forceEnabled=!1,this.helpMessage=null,this.helpMessageIcon=null,this.inputEnabled=!0,this.elevation=new V3,this.placement="auto",this.offset=null,this.visibleElements=new Bfe,this.visualVariables=null,this.xyMode="auto"}get effectiveEnabled(){return this.forceEnabled||this.enabled}};m([w({type:Boolean,nonNullable:!0})],Js.prototype,"enabled",void 0),m([w()],Js.prototype,"forceEnabled",void 0),m([w()],Js.prototype,"effectiveEnabled",null),m([w()],Js.prototype,"helpMessage",void 0),m([w()],Js.prototype,"helpMessageIcon",void 0),m([w({type:Boolean,nonNullable:!0})],Js.prototype,"inputEnabled",void 0),m([w({type:V3,nonNullable:!0})],Js.prototype,"elevation",void 0),m([w()],Js.prototype,"placement",void 0),m([w()],Js.prototype,"offset",void 0),m([w({type:Bfe,nonNullable:!0})],Js.prototype,"visibleElements",void 0),m([w()],Js.prototype,"visualVariables",void 0),m([w()],Js.prototype,"xyMode",void 0),Js=m([H("esri.views.interactive.sketch.SketchTooltipOptions")],Js);const Fj=Js;let yg=class extends De{constructor(t){super(t),this.length=null,this.verticalLength=null,this.area=null}};m([w()],yg.prototype,"length",void 0),m([w()],yg.prototype,"verticalLength",void 0),m([w()],yg.prototype,"area",void 0),yg=m([H("esri.views.interactive.sketch.Units")],yg);const r6=yg;function qfe(e,t,i,r){if(Sa(e.spatialReference,i)){Ox[0]=e.x,Ox[1]=e.y;const o=e.z;return Ox[2]=o??r??0,T2(Ox,e.spatialReference,0,t,i,0)}const n=Vv(e,i);return!!n&&(t[0]=n==null?void 0:n.x,t[1]=n==null?void 0:n.y,t[2]=(n==null?void 0:n.z)??r??0,!0)}async function Hpt(e,t,i,r,n){return await $2(e.spatialReference,i,null,n),qfe(e,t,i,r)}const Ox=nt();function B2(e,t,i,r){return{x:e,y:t,z:i,hasZ:i!=null,hasM:!1,spatialReference:r,type:"point"}}function Hfe(e,t,i,r,n){e.x=t,e.y=i,e.z=r,e.hasZ=r!=null,e.spatialReference=n}function n6(e,t,i,r,n){return!(t==null||r==null||e.length<2)&&(Pw.x=e[0],Pw.y=e[1],Pw.z=e[2],Pw.spatialReference=t,qfe(Pw,i,r,n))}const Pw=B2(0,0,0,st.WGS84);function Wfe(e){if(!e)return null;const t=e.wkid;if(t)return Cxe[t];const i=e.wkt2??e.wkt;return i?eXe(i):null}function eXe(e){const t=$xe.exec(e);if(!t||t.length!==2)return null;const i=t[1].split(",");if(!i||i.length<3)return null;const r=parseFloat(i[1]),n=parseFloat(i[2]);return isNaN(r)||isNaN(n)?null:{a:r,f:n===0?0:1/n}}function l$(e){const t=Wfe(e);if(tXe(t))return t;const i=t.a*(1-t.f);return Object.assign(t,{b:i,eSq:1-(i/t.a)**2,radius:(2*t.a+i)/3,densificationRatio:1e4/((2*t.a+i)/3)})}function tXe(e){return e!=null&&"b"in e&&"eSq"in e&&"radius"in e}function Rx(e,t,i){const{a:r,eSq:n}=l$(i),o=Math.sqrt(n),u=Math.sin(t[1]*Xs),f=r*t[0]*Xs;let g;return n>0?g=r*((1-n)*(u/(1-n*(u*u))-1/(2*o)*Math.log((1-o*u)/(1+o*u))))*.5:g=r*u,e[0]=f,e[1]=g,e}function u$(e){return cS(e)&&!!Wfe(e)}function Wpt(e,t="square-meters"){if(e.some(u=>!u$(u.spatialReference)))throw new ne("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let u=0;u<e.length;u++){const f=e[u],g=f.spatialReference,{radius:b,densificationRatio:E}=l$(g),I=b*E;i.push(iXe(f,I))}const r=[],n=[0,0],o=[0,0];for(let u=0;u<i.length;u++){const{rings:f,spatialReference:g}=i[u];let b=0;for(let E=0;E<f.length;E++){const I=f[E];Rx(n,I[0],g),Rx(o,I[I.length-1],g);let M=o[0]*n[1]-n[0]*o[1];for(let k=0;k<I.length-1;k++)Rx(n,I[k+1],g),Rx(o,I[k],g),M+=o[0]*n[1]-n[0]*o[1];b+=M}b=Ut(b,"square-meters",t),r.push(b/-2)}return r}function Zpt(e,t="meters"){if(!e)throw new ne("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(e.some(r=>!u$(r.spatialReference)))throw new ne("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let r=0;r<e.length;r++){const n=e[r],{spatialReference:o}=n,u=n.type==="polyline"?n.paths:n.rings;let f=0;for(let g=0;g<u.length;g++){const b=u[g];let E=0;for(let I=1;I<b.length;I++){const M=b[I-1][0],k=b[I][0],L=b[I-1][1],P=b[I][1];if(L!==P||M!==k){const D=new US;GS(D,[M,L],[k,P],o),E+=D.distance}}f+=E}f=Ut(f,"meters",t),i.push(f)}return i}function iXe(e,t){if(e.type!=="polyline"&&e.type!=="polygon")throw new ne("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:i}=e;if(!u$(i))throw new ne("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const r=e.type==="polyline"?e.paths:e.rings,n=[],o=[0,0],u=new US;for(const g of r){const b=[];n.push(b),b.push([g[0][0],g[0][1]]);let E,I,M=g[0][0],k=g[0][1];for(let L=0;L<g.length-1;L++){if(E=g[L+1][0],I=g[L+1][1],M===E&&k===I)continue;const P=[M,k];GS(u,[M,k],[E,I],i);const{azimuth:D,distance:j}=u,z=j/t;if(z>1){for(let V=1;V<=z-1;V++)Ry(o,P,D,V*t,i),b.push(o.slice());Ry(o,P,D,(j+Math.floor(z-1)*t)/2,i),b.push(o.slice())}Ry(o,P,D,j,i),b.push(o.slice()),M=o[0],k=o[1]}}const f=h2(st,i);return e.type==="polyline"?new io({paths:n,spatialReference:f}):new zs({rings:n,spatialReference:f})}let US=class{constructor(t=0,i=void 0,r=void 0){this.distance=t,this.azimuth=i,this.reverseAzimuth=r}};function Ry(e,t,i,r,n){const o=t[0],u=t[1],f=o*Xs,g=u*Xs,b=(i??0)*Xs,{a:E,b:I,f:M}=l$(n),k=Math.sin(b),L=Math.cos(b),P=(1-M)*Math.tan(g),D=1/Math.sqrt(1+P*P),j=P*D,z=Math.atan2(P,L),V=D*k,W=V*V,Q=1-W,Z=Q*(E*E-I*I)/(I*I),ee=1+Z/16384*(4096+Z*(Z*(320-175*Z)-768)),ie=Z/1024*(256+Z*(Z*(74-47*Z)-128));let oe,le,xe,$e,Te=r/(I*ee),de=2*Math.PI;for(;Math.abs(Te-de)>1e-12;)xe=Math.cos(2*z+Te),oe=Math.sin(Te),le=Math.cos(Te),$e=ie*oe*(xe+ie/4*(le*(2*xe*xe-1)-ie/6*xe*(4*oe*oe-3)*(4*xe*xe-3))),de=Te,Te=r/(I*ee)+$e;const se=j*oe-D*le*L,ye=Math.atan2(j*le+D*oe*L,(1-M)*Math.sqrt(W+se*se)),ue=Math.atan2(oe*k,D*le-j*oe*L),pe=M/16*Q*(4+M*(4-3*Q)),_e=ye/Xs,Le=(f+(ue-(1-pe)*M*V*(Te+pe*oe*(xe+pe*le*(2*xe*xe-1)))))/Xs;return e[0]=Le,e[1]=_e,e}function GS(e,t,i,r){const n=t[0]*Xs,o=t[1]*Xs,u=i[0]*Xs,f=i[1]*Xs,{a:g,b,f:E,radius:I}=l$(r),M=u-n,k=Math.atan((1-E)*Math.tan(o)),L=Math.atan((1-E)*Math.tan(f)),P=Math.sin(k),D=Math.cos(k),j=Math.sin(L),z=Math.cos(L);let V,W,Q,Z,ee,ie,oe,le,xe,$e,Te=1e3,de=M;do{if(oe=Math.sin(de),le=Math.cos(de),Q=Math.sqrt(z*oe*(z*oe)+(D*j-P*z*le)*(D*j-P*z*le)),Q===0)return e.distance=0,e.azimuth=void 0,e.reverseAzimuth=void 0,e;ee=P*j+D*z*le,ie=Math.atan2(Q,ee),xe=D*z*oe/Q,W=1-xe*xe,Z=ee-2*P*j/W,isNaN(Z)&&(Z=0),$e=E/16*W*(4+E*(4-3*W)),V=de,de=M+(1-$e)*E*xe*(ie+$e*Q*(Z+$e*ee*(2*Z*Z-1)))}while(Math.abs(de-V)>1e-12&&--Te>0);if(Te===0){const Le=I,Re=Math.acos(Math.sin(o)*Math.sin(f)+Math.cos(o)*Math.cos(f)*Math.cos(u-n))*Le,qe=u-n,ht=Math.sin(qe)*Math.cos(f),At=Math.cos(o)*Math.sin(f)-Math.sin(o)*Math.cos(f)*Math.cos(qe),Fi=Math.atan2(ht,At);return e.azimuth=Fi/Xs,e.distance=Re,e.reverseAzimuth=void 0,e}const se=W*(g*g-b*b)/(b*b),ye=se/1024*(256+se*(se*(74-47*se)-128)),ue=b*(1+se/16384*(4096+se*(se*(320-175*se)-768)))*(ie-ye*Q*(Z+ye/4*(ee*(2*Z*Z-1)-ye/6*Z*(4*Q*Q-3)*(4*Z*Z-3)))),pe=Math.atan2(z*Math.sin(de),D*j-P*z*Math.cos(de)),_e=Math.atan2(D*Math.sin(de),D*j*Math.cos(de)-P*z);return e.azimuth=pe/Xs,e.distance=ue,e.reverseAzimuth=_e/Xs,e}function WR(e){return u$(e)?e:bu(e)?st.WGS84:null}var Mo;function rXe(e,t){if(e==null||t==null)return;const i=ZR(e,t);return i!=null?ud(i,"radians","geographic"):void 0}(function(e){e.Absolute="absolute",e.Relative="relative",e.RelativeBilateral="relative-bilateral"})(Mo||(Mo={}));const ZR=(()=>{const e=nt(),t=nt();return(i,r)=>(bn(e,i.x,i.y,i.z??0),bn(t,r.x,r.y,r.z??0),nXe(e,t,i.spatialReference,r.spatialReference))})(),nXe=(()=>{const e=qt(),t=nt(),i=nt();return(r,n,o,u)=>{if(ki(r,n))return;const f=WR(o),g=WR(u);if(f&&g&&pr(f,g)&&n6(r,o,t,f)&&n6(n,u,i,g)){const{azimuth:E}=GS(oXe,t,i,f);return E!=null?Ut(E,"degrees","radians"):void 0}e[0]=n[0]-r[0],e[1]=n[1]-r[1];let b=Tae(bae,e);return e[0]<0&&(b=aXe-b),b}})();function Kpt(e,t,i,r=Mo.Absolute){if(t&&i)switch(r){case Mo.Absolute:return rXe(t,i);case Mo.Relative:return AK(CK(e,t,i),Mo.Relative);case Mo.RelativeBilateral:return AK(CK(e,t,i),Mo.RelativeBilateral)}}function CK(e,t,i){if(!e||!t||!i)return;const r=ZR(e,t),n=ZR(t,i);return r!=null&&n!=null?ud(n-r,"radians","geographic"):void 0}function AK(e,t){if(e!=null)switch(t){case Mo.Absolute:return sXe(e);case Mo.Relative:{const i=s6(e);let r=kK.normalize(i,0,!0);return r===-180&&(r=180),ud(r,"degrees","geographic")}case Mo.RelativeBilateral:{const i=s6(e),r=Math.abs(kK.normalize(i,0,!0));return ud(r,"degrees","geographic")}}}function sXe(e){const t=s6(e),i=lXe.normalize(t,0,!0);return ud(i,"degrees","geographic")}const Ypt=(()=>{const e=nt();return(t,i,r,n,o,u="geodesic")=>{wf(e,i);const f=s6(o);if(u==="geodesic"){const k=WR(r);if(k&&n6(e,r,e,k))return Ry(t,e,f,n,k),t[2]=i[2],!!n6(t,k,t,r)}const g=NT(f,"geographic","arithmetic"),b=Ut(g,"degrees","radians"),E=i[0]+n*Math.cos(b),I=i[1]+n*Math.sin(b),M=i[2];return bn(t,E,I,M),!0}})();function s6(e){if(e!=null)return NT(Zfe(e),e.rotationType,"geographic")}function Xpt(e){if(e!=null)return NT(Zfe(e),e.rotationType,"arithmetic")}function Zfe(e){return Ut(e.value,e.unit,"degrees")}const oXe=new US,aXe=2*Math.PI,lXe=zN,kK=new W6(-180,180);let yp=class extends De{constructor(t){super(t),this.directionMode="relative",this.relativeDirectionIsBilateral=!1}get effectiveDirectionMode(){switch(this.directionMode){case"relative":return this.relativeDirectionIsBilateral?Mo.RelativeBilateral:Mo.Relative;case"absolute":return Mo.Absolute}}get displayUnits(){return this._get("displayUnits")??new r6}set displayUnits(t){this._set("displayUnits",t)}get inputUnits(){return this._get("inputUnits")??new r6}set inputUnits(t){this._set("inputUnits",t)}};m([w({type:String,nonNullable:!0})],yp.prototype,"directionMode",void 0),m([w({type:Boolean,nonNullable:!0})],yp.prototype,"relativeDirectionIsBilateral",void 0),m([w()],yp.prototype,"effectiveDirectionMode",null),m([w({type:r6,nonNullable:!0})],yp.prototype,"displayUnits",null),m([w({type:r6,nonNullable:!0})],yp.prototype,"inputUnits",null),yp=m([H("esri.views.interactive.sketch.SketchValueOptions")],yp);const Dj=yp;let mg=class extends De{constructor(t){super(t),this.labels=new Nj,this.tooltips=new Fj,this.values=new Dj}};m([w({nonNullable:!0,type:Nj})],mg.prototype,"labels",void 0),m([w({nonNullable:!0,type:Fj})],mg.prototype,"tooltips",void 0),m([w({nonNullable:!0,type:Dj})],mg.prototype,"values",void 0),mg=m([H("esri.views.interactive.sketch.SketchOptions")],mg);const Jfe=mg;var um;function Kfe(e,t,i){return xa(e,t,i)}function xa(e=0,t=0,i=0){return Lc(e,t,i)}function tft(e){return e}function ift(e){return e}function Sf(e,t,i){return Lc(e,t,i)}function s2(e){const[t,i,r]=e;return e.length>3?[t,i,r,e[3]]:[t,i,r]}function eC(e){return e[3]=((e.length>3?e[3]:void 0)??um.NONE)|um.TARGET,e}function rft(e){return!!(((e.length>3?e[3]:void 0)??um.NONE)&um.TARGET)}function LK(e,t,{coordinateHelper:i,elevationInfo:r},n){return e?r3(i.vectorToDehydratedPoint(e,uXe),t,r,n):null}function r3(e,t,i,r=xa()){return r[0]=e.x,r[1]=e.y,r[2]=e.z??0,t==null||(t.type==="2d"?r[2]=0:r[2]=BYe(t,e,i,lm)??0),r}function nft(e,t,i){return i?(Hfe(i,e[0],e[1],e[2],t),i):B2(e[0],e[1],e[2],t)}function OK(e,t,{z:i,m:r},n,o){const{spatialReference:u,elevationInfo:f}=n;let g;i==null&&r==null?g=void 0:t==null||t.type==="2d"?g=i??void 0:g=Vfe(t,e,u,lm,f)??0;const[b,E]=e;return o?Hfe(o,b,E,g,u):o=B2(b,E,g,u),r!=null&&(o.m=r,o.hasM=!0),o}function sft(e,t,i,r,n=xa()){const[o,u]=e;return n[0]=o,n[1]=u,e.length>3&&(n[3]=e[3]??um.NONE),(i==null?void 0:i.type)!=="3d"?(n[2]=t.value,n):(n[2]=Pj(i,o,u,t.value,r,t.elevationInfo,lm)??0,n)}(function(e){e[e.NONE=0]="NONE",e[e.TARGET=1]="TARGET"})(um||(um={}));const uXe=B2(0,0,0,null);let cu=class extends be{constructor(){super(...arguments),this.enabled=!0}};m([w({type:Boolean})],cu.prototype,"enabled",void 0),cu=m([H("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],cu);let Vi=class extends be{constructor(t){super(t),this.lineSnapper=new cu,this.parallelLineSnapper=new cu,this.rightAngleSnapper=new cu,this.rightAngleTriangleSnapper=new cu,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThresholdMeters=.3,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new Ne([255,127,0]),this.orangeTransparent=new Ne([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};m([w({type:cu,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Vi.prototype,"lineSnapper",void 0),m([w({type:cu,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Vi.prototype,"parallelLineSnapper",void 0),m([w({type:cu,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Vi.prototype,"rightAngleSnapper",void 0),m([w({type:cu,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Vi.prototype,"rightAngleTriangleSnapper",void 0),m([w({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],Vi.prototype,"shortLineThreshold",void 0),m([w({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],Vi.prototype,"distance",void 0),m([w({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Vi.prototype,"pointThreshold",void 0),m([w({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Vi.prototype,"intersectionParallelLineThreshold",void 0),m([w({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Vi.prototype,"parallelLineThreshold",void 0),m([w({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],Vi.prototype,"verticalLineThresholdMeters",void 0),m([w({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Vi.prototype,"touchSensitivityMultiplier",void 0),m([w({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Vi.prototype,"pointOnLineThreshold",void 0),m([w({type:Ne,nonNullable:!0})],Vi.prototype,"orange",void 0),m([w({type:Ne,nonNullable:!0})],Vi.prototype,"orangeTransparent",void 0),m([w({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Vi.prototype,"lineHintWidthReference",void 0),m([w({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Vi.prototype,"lineHintWidthTarget",void 0),m([w({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],Vi.prototype,"lineHintFadedExtensions",void 0),m([w({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Vi.prototype,"parallelLineHintWidth",void 0),m([w({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],Vi.prototype,"parallelLineHintLength",void 0),m([w({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],Vi.prototype,"parallelLineHintOffset",void 0),m([w({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],Vi.prototype,"rightAngleHintSize",void 0),m([w({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],Vi.prototype,"rightAngleHintOutlineSize",void 0),m([w({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],Vi.prototype,"satisfiesConstraintScreenThreshold",void 0),Vi=m([H("esri.views.interactive.snapping.Settings.Defaults")],Vi);const o6=new Vi;var Fs;(function(e){e[e.FEATURE=1]="FEATURE",e[e.SELF=2]="SELF",e[e.ALL=3]="ALL"})(Fs||(Fs={}));let mp=class extends De{constructor(t){super(t),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1,this.sublayerSources=new Oe}};m([w({constructOnly:!0})],mp.prototype,"layer",void 0),m([w()],mp.prototype,"enabled",void 0),m([w()],mp.prototype,"updating",void 0),m([w()],mp.prototype,"availability",void 0),m([w()],mp.prototype,"sublayerSources",void 0),mp=m([H("esri.views.interactive.snapping.FeatureSnappingLayerSource")],mp);const Yfe=mp;let Cn=class extends De{constructor(t){super(t),this.enabled=!1,this.enabledToggled=!1,this.forceDisabled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.gridEnabled=!1,this.attributeRulesEnabled=!1,this.featureSources=new Oe,this.distance=o6.distance,this.touchSensitivityMultiplier=o6.touchSensitivityMultiplier}get effectiveEnabled(){return!this.forceDisabled&&(this.enabledToggled?!this.enabled:this.enabled)}get effectiveGridEnabled(){return this.effectiveEnabled&&this.gridEnabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}get _effectiveFeatureSources(){var g;const t=this.featureSources;t.some(RK)&&Se.getLogger(this).warnOnce("Do not configure SubtypeGroupLayer sources in SnappingOptions.featureSources directly. Create a FeatureSnappingLayerSource for each SubtypeSublayer.");const i=t.filter(hXe),r=((g=this._get("_effectiveFeatureSources"))==null?void 0:g.filter(RK))??new Oe;for(const b of i){const E=r.find(I=>I.layer===b.layer.parent);if(E)E.sublayerSources.includes(b)||E.sublayerSources.add(b);else if(b.layer.parent){const I=new Yfe({layer:b.layer.parent});I.sublayerSources.add(b),r.add(I)}}for(const b of r){const E=b.sublayerSources.filter(I=>!i.includes(I));b.sublayerSources.removeMany(E)}r.removeMany(r.filter(b=>b.sublayerSources.length===0));const n=t.filter(cXe),o=this._get("_effectiveFeatureSources")??new Oe,{added:u,removed:f}=pA(o.toArray(),[...n,...r]);return o.removeMany(f),o.addMany(u),o}};m([w()],Cn.prototype,"enabled",void 0),m([w()],Cn.prototype,"enabledToggled",void 0),m([w()],Cn.prototype,"forceDisabled",void 0),m([w()],Cn.prototype,"selfEnabled",void 0),m([w()],Cn.prototype,"featureEnabled",void 0),m([w()],Cn.prototype,"gridEnabled",void 0),m([w()],Cn.prototype,"attributeRulesEnabled",void 0),m([w({type:Oe.ofType(Yfe)})],Cn.prototype,"featureSources",void 0),m([w()],Cn.prototype,"distance",void 0),m([w()],Cn.prototype,"touchSensitivityMultiplier",void 0),m([w({readOnly:!0})],Cn.prototype,"effectiveEnabled",null),m([w({readOnly:!0})],Cn.prototype,"effectiveGridEnabled",null),m([w({readOnly:!0})],Cn.prototype,"effectiveSelfEnabled",null),m([w({readOnly:!0})],Cn.prototype,"effectiveFeatureEnabled",null),m([w({readOnly:!0})],Cn.prototype,"_effectiveFeatureSources",null),Cn=m([H("esri.views.interactive.snapping.SnappingOptions")],Cn);const jj=Cn;function RK(e){return e.layer.type==="subtype-group"}function cXe(e){return e.layer.type!=="subtype-group"}function hXe(e){return e.layer.type==="subtype-sublayer"}const cft=Symbol("grid-placement-graphic");function Xfe(e,t){const i=e.x-t.x,r=e.y-t.y;return i*i+r*r}function hft(e,t){return Math.sqrt(Xfe(e,t))}function dXe(e,t){t.sort((i,r)=>Kv(i.targetPoint,e)-Kv(r.targetPoint,e))}var ml;function dft({point:e,distance:t,returnEdge:i,vertexMode:r,coordinateHelper:{spatialReference:n},filter:o},u,f){return f=f!=null?f.clone():new ss({where:"1=1"}),o&&(f.geometry=o.geometry,f.distance=o.distance,f.spatialRelationship=o.spatialRelationship,f.where=bF(f.where,o.where),f.timeExtent=JIe(f.timeExtent,o.timeExtent),f.objectIds=pXe(f.objectIds,o.objectIds)),{point:B2(e[0],e[1],e[2],n.toJSON()),mode:u,distance:t,returnEdge:i,vertexMode:r,query:f.toJSON()}}function pXe(e,t){return e||t?t?e?Array.from(ote(new Set(e),new Set(t))):t:e:null}function pft(e,t,i){return{left:LK(e.leftVertex.pos,t,i),right:LK(e.rightVertex.pos,t,i)}}function fft(e){return e.createQuery()}(function(e){e[e.TARGET=0]="TARGET",e[e.REFERENCE=1]="REFERENCE",e[e.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(ml||(ml={}));const PK=Symbol("snapping-toggle");function fXe(e,t=()=>{}){const i=me(()=>({view:e.view,snappingOptions:e.snappingOptions}),({view:r,snappingOptions:n})=>{if(e.removeHandles(PK),!r||!n)return;const o=Ii.TOOL,u=[r.on("key-down",f=>{f.key!==MK.toggle||f.repeat||(n.enabledToggled=!0,t())},o),r.on("key-up",f=>{f.key===MK.toggle&&(n.enabledToggled=!1,t())},o),r.on("pointer-move",f=>{const g=f.native.ctrlKey;n.enabledToggled!==g&&(n.enabledToggled=g,t())},o)];e.addHandles(u,PK)},Ln);e.addHandles(i)}function yft(e){var t;return u4(e)&&"utilityNetworks"in e&&!!((t=e.utilityNetworks)!=null&&t.length)}function mft(e,t,i){const r=vi(e,t)/vi(e,e);return Iu(i,e,r)}function tC(e,t){return vi(e,t)/Su(e)}function yXe(e,t){const i=vi(e,t)/(Su(e)*Su(t));return-RN(i)}function gft(e,t,i){fl(Px,e),fl(iC,t);const r=vi(Px,iC),n=RN(r),o=yl(Px,Px,iC);return vi(o,i)<0?2*Math.PI-n:n}const Px=nt(),iC=nt();function zj(){return[1,0,0,0,1,0,0,0,1]}function mXe(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]}function gXe(e,t,i,r,n,o,u,f,g){return[e,t,i,r,n,o,u,f,g]}function vXe(e,t){return new Float64Array(e,t,9)}const wXe=zj();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:wXe,clone:mXe,create:zj,createView:vXe,fromValues:gXe},Symbol.toStringTag,{value:"Module"}));function Vj(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function bXe(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function _Xe(e,t,i,r,n,o,u,f,g,b,E,I,M,k,L,P){return[e,t,i,r,n,o,u,f,g,b,E,I,M,k,L,P]}function SXe(e,t){return new Float64Array(e,t,16)}const xXe=Vj();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:xXe,clone:bXe,create:Vj,createView:SXe,fromValues:_Xe},Symbol.toStringTag,{value:"Module"}));function Uj(){return[0,0,0,1]}function EXe(e){return[e[0],e[1],e[2],e[3]]}function IXe(e,t,i,r){return[e,t,i,r]}const TXe=Uj();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:TXe,clone:EXe,create:Uj,fromValues:IXe},Symbol.toStringTag,{value:"Module"}));let q2=class K0{constructor(t){this._create=t,this._items=new Array,this._itemsPtr=0}get(){return this._itemsPtr===0&&Cv(()=>this._reset()),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const t=2*this._itemsPtr;this._items.length>t&&(this._items.length=t),this._itemsPtr=0}static createVec2f64(){return new K0(qt)}static createVec3f64(){return new K0(nt)}static createVec4f64(){return new K0(Nf)}static createMat3f64(){return new K0(zj)}static createMat4f64(){return new K0(Vj)}static createQuatf64(){return new K0(Uj)}get test(){}};const vft=q2.createVec2f64(),zn=q2.createVec3f64(),$Xe=q2.createVec4f64();q2.createMat3f64();const MXe=q2.createMat4f64(),wft=q2.createQuatf64();function bft(e){const t=e[0]*e[0]+e[4]*e[4]+e[8]*e[8],i=e[1]*e[1]+e[5]*e[5]+e[9]*e[9],r=e[2]*e[2]+e[6]*e[6]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}function _ft(e,t){const i=Math.sqrt(t[0]*t[0]+t[4]*t[4]+t[8]*t[8]),r=Math.sqrt(t[1]*t[1]+t[5]*t[5]+t[9]*t[9]),n=Math.sqrt(t[2]*t[2]+t[6]*t[6]+t[10]*t[10]);return bn(e,i,r,n),e}function Gj(e,t,i){Math.abs(e[0])>Math.abs(e[1])?bn(t,0,1,0):bn(t,1,0,0),yl(i,e,t),yl(t,i,e),fl(i,i),fl(t,t)}function Go(e=n3){return[e[0],e[1],e[2],e[3]]}function Sft(e=n3[0],t=n3[1],i=n3[2],r=n3[3]){return Qfe(e,t,i,r,$Xe.get())}function CXe(e,t){return Qfe(t[0],t[1],t[2],t[3],e)}function xft(e){return e}function Qfe(e,t,i,r,n=Go()){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n}function BS(e,t,i){const r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=Math.abs(r-1)>1e-5&&r>1e-12?1/Math.sqrt(r):1;return i[0]=t[0]*n,i[1]=t[1]*n,i[2]=t[2]*n,i[3]=-(i[0]*e[0]+i[1]*e[1]+i[2]*e[2]),i}function e0e(e,t,i,r=Go()){const n=i[0]-t[0],o=i[1]-t[1],u=i[2]-t[2],f=e[0]-t[0],g=e[1]-t[1],b=e[2]-t[2],E=o*b-u*g,I=u*f-n*b,M=n*g-o*f,k=E*E+I*I+M*M,L=Math.abs(k-1)>1e-5&&k>1e-12?1/Math.sqrt(k):1;return r[0]=E*L,r[1]=I*L,r[2]=M*L,r[3]=-(r[0]*e[0]+r[1]*e[1]+r[2]*e[2]),r}function t0e(e,t,i,r=0,n=Math.floor(i*(1/3)),o=Math.floor(i*(2/3))){if(i<3)return!1;t(Nw,r);let u=n,f=!1;for(;u<i-1&&!f;)t(s1,u),u++,f=!ki(Nw,s1);if(!f)return!1;for(u=Math.max(u,o),f=!1;u<i&&!f;)t(ay,u),u++,sn(Nx,Nw,s1),fl(Nx,Nx),sn(Fx,s1,ay),fl(Fx,Fx),f=!ki(Nw,ay)&&!ki(s1,ay)&&Math.abs(vi(Nx,Fx))<AXe;return f?(e0e(Nw,s1,ay,e),!0):(r!==0||n!==1||o!==2)&&t0e(e,t,i,0,1,2)}function Eft(e,t,i=!0){const r=t.length/3;return t0e(e,(n,o)=>bn(n,t[3*o+0],t[3*o+1],t[3*o+2]),i?r-1:r)}const AXe=.99619469809,Nw=nt(),s1=nt(),ay=nt(),Nx=nt(),Fx=nt();function Ift(e,t,i){return t!==e&&CXe(e,t),e[3]=-vi(e,i),e}function Tft(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function $ft(e,t,i,r){return yl(ay,t,e),BS(i,ay,r)}function i0e(e,t,i,r){return c$(h$(e,t,sn(zn.get(),i,t),OXe,r))}function Mft(e,t,i){return t!=null&&c$(h$(e,t.origin,t.direction,RXe,i))}function Cft(e,t,i){return c$(h$(e,t.origin,t.vector,Cc.NONE,i))}function Aft(e,t,i){return c$(h$(e,t.origin,t.vector,Cc.CLAMP,i))}function kXe(e,t){return qS(e,t)>=0}function kft(e,t){const i=vi(e,t.ray.direction),r=-qS(e,t.ray.origin);if(i>-1e-6&&i<1e-6)return r>0;const n=r/i;return i>0?n<t.c1&&(t.c1=n):n>t.c0&&(t.c0=n),t.c0<=t.c1}function r0e(e,t,i){const r=Iu(zn.get(),e,-e[3]),n=LXe(e,sn(zn.get(),t,r),zn.get());return Pf(i,n,r),i}function Lft(e,t,i,r){const n=e,o=zn.get(),u=zn.get();Gj(n,o,u);const f=sn(zn.get(),i,t),g=tC(o,f),b=tC(u,f),E=tC(n,f);return bn(r,g,b,E)}function LXe(e,t,i){const r=Iu(zn.get(),e,vi(e,t));return sn(i,t,r),i}function JR(e,t){return Math.abs(qS(e,t))}function qS(e,t){return vi(e,t)+e[3]}var vc;function c$(e){return e===vc.INTERSECTS_INSIDE_OUT||e===vc.INTERSECTS_OUTSIDE_IN}function h$(e,t,i,r,n){const o=vi(e,i),u=qS(e,t);if(o===0)return u>=0?vc.INSIDE:vc.OUTSIDE;let f=-u/o;return r&Cc.CLAMP&&(f=oo(f,0,1)),!(r&Cc.INFINITE_MIN)&&f<0||!(r&Cc.INFINITE_MAX)&&f>1?u>=0?vc.INSIDE:vc.OUTSIDE:(Pf(n,t,Iu(n,i,f)),u>=0?vc.INTERSECTS_INSIDE_OUT:vc.INTERSECTS_OUTSIDE_IN)}(function(e){e[e.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",e[e.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",e[e.INSIDE=2]="INSIDE",e[e.OUTSIDE=3]="OUTSIDE"})(vc||(vc={}));const n3=[0,0,1,0];var Cc;(function(e){e[e.NONE=0]="NONE",e[e.CLAMP=1]="CLAMP",e[e.INFINITE_MIN=4]="INFINITE_MIN",e[e.INFINITE_MAX=8]="INFINITE_MAX"})(Cc||(Cc={}));const OXe=Cc.INFINITE_MIN|Cc.INFINITE_MAX,RXe=Cc.INFINITE_MAX;let PXe=class{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return this._itemsPtr===0&&Cv(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*NK);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,NK));t++)this._items.push(this._allocator())}};const NK=1024;function d$(e){return e?FK(_a(e.origin),_a(e.direction)):FK(nt(),nt())}function FK(e,t){return{origin:e,direction:t}}function Rft(e,t){const i=jXe.get();return i.origin=e,i.direction=t,i}function Pft(e,t=d$()){return FXe(e.origin,e.direction,t)}function NXe(e,t,i=d$()){return wf(i.origin,e),sn(i.direction,t,e),i}function FXe(e,t,i=d$()){return wf(i.origin,e),wf(i.direction,t),i}function Nft(e,t){const i=yl(zn.get(),fl(zn.get(),e.direction),sn(zn.get(),t,e.origin));return vi(i,i)}function DXe(e,t,i){const r=vi(e.direction,sn(i,t,e.origin));return Pf(i,e.origin,Iu(i,e.direction,r)),i}const jXe=new PXe(()=>d$());function DK(e,t){const i=Su(e),r=PN(e[2]/i),n=Math.atan2(e[1]/i,e[0]/i);return bn(t,i,r,n),t}const zXe=Bj();function Bj(){return Nf()}const n0e=xD,VXe=xD;function s0e(e,t){return BI(t,e)}function o0e(e,t){return md(e[0],e[1],e[2],t)}function UXe(e){return e}function GXe(e){e[0]=e[1]=e[2]=e[3]=0}function BXe(e,t){return e[0]=e[1]=e[2]=0,e[3]=t,e}function HS(e){return e[3]}function qXe(e){return e}function HXe(e,t,i,r){return md(e,t,i,r)}function WXe(e,t,i){return e!==i&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),i[3]=e[3]+t,i}function ZXe(e,t,i){return e!==i&&s0e(e,i),i}function JXe(e,t){return t}function p$(e,t,i){if(t==null||!l0e(e,t,a6))return!1;let{t0:r,t1:n}=a6;if((r<0||n<r&&n>0)&&(r=n),r<0)return!1;if(i){const{origin:o,direction:u}=t;i[0]=o[0]+u[0]*r,i[1]=o[1]+u[1]*r,i[2]=o[2]+u[2]*r}return!0}function a0e(e,t,i){const r=NXe(t,i);if(!l0e(e,r,a6))return[];const{origin:n,direction:o}=r,{t0:u,t1:f}=a6,g=b=>{const E=nt();return Pn(E,n,o,b),f$(e,E,E)};return Math.abs(u-f)<Vr()?[g(u)]:[g(u),g(f)]}const a6={t0:0,t1:0};function l0e(e,t,i){const{origin:r,direction:n}=t,o=KXe;o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2];const u=n[0]*n[0]+n[1]*n[1]+n[2]*n[2];if(u===0)return!1;const f=2*(n[0]*o[0]+n[1]*o[1]+n[2]*o[2]),g=f*f-4*u*(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]-e[3]*e[3]);if(g<0)return!1;const b=Math.sqrt(g);return i.t0=(-f-b)/(2*u),i.t1=(-f+b)/(2*u),!0}const KXe=nt();function YXe(e,t){return p$(e,t,null)}function XXe(e,t,i){if(p$(e,t,i))return i;const r=u0e(e,t,zn.get());return Pf(i,t.origin,Iu(zn.get(),t.direction,N2(t.origin,r)/Su(t.direction))),i}function u0e(e,t,i){const r=zn.get(),n=MXe.get();yl(r,t.origin,t.direction);const o=HS(e);yl(i,r,t.origin),Iu(i,i,1/Su(i)*o);const u=c0e(e,t.origin),f=yXe(t.origin,i);return yse(n,f+u,r),dle(i,i,n),i}function QXe(e,t,i,r){const n=HS(e),o=n*n,u=t+.5*Math.PI,f=i*i+o-2*Math.cos(u)*i*n,g=Math.sqrt(f),b=f-o;if(b<=0)return .5;const E=Math.sqrt(b),I=Math.acos(E/g)-Math.asin(n/(g/Math.sin(u)));return Math.min(1,(I+.5*r)/r)}function eQe(e,t,i){return p$(e,t,i)?i:(DXe(t,e,i),f$(e,i,i))}function f$(e,t,i){const r=sn(zn.get(),t,e),n=Iu(zn.get(),r,e[3]/Su(r));return Pf(i,n,e)}function tQe(e,t){const i=sn(zn.get(),t,e),r=OT(i),n=e[3]*e[3];return Math.sqrt(Math.abs(r-n))}function c0e(e,t){const i=sn(zn.get(),t,e),r=Su(i),n=HS(e),o=n+Math.abs(n-r);return RN(n/o)}const rC=nt();function h0e(e,t,i,r){const n=sn(rC,t,e);switch(i){case rf.X:{const o=DK(n,rC)[2];return bn(r,-Math.sin(o),Math.cos(o),0)}case rf.Y:{const o=DK(n,rC),u=o[1],f=o[2],g=Math.sin(u);return bn(r,-g*Math.cos(f),-g*Math.sin(f),Math.cos(u))}case rf.Z:return fl(r,n);default:return}}function d0e(e,t){const i=sn(KR,t,e);return Su(i)-e[3]}function iQe(e,t,i,r){const n=d0e(e,t),o=h0e(e,t,rf.Z,KR),u=Iu(KR,o,i-n);return Pf(r,t,u)}function rQe(e,t){const i=Kv(e,t),r=HS(e);return i<=r*r}function nQe(e,t,i=Nf()){const r=N2(e,t),n=e[3],o=t[3];return r+o<n?(BI(i,e),i):r+n<o?(BI(i,t),i):(YF(i,e,t,(r+o-n)/(2*r)),i[3]=(r+n+o)/2,i)}const KR=nt(),sQe=Bj(),Fft=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:zXe,altitudeAt:d0e,angleToSilhouette:c0e,axisAt:h0e,cameraFrustumCoverage:QXe,clear:GXe,closestPoint:eQe,closestPointOnSilhouette:u0e,containsPoint:rQe,copy:s0e,create:Bj,distanceToSilhouette:tQe,elevate:WXe,equals:VXe,exactEquals:n0e,fromCenterAndRadius:o0e,fromRadius:BXe,fromValues:HXe,getCenter:qXe,getExtent:JXe,getRadius:HS,intersectLine:a0e,intersectRay:p$,intersectRayClosestSilhouette:XXe,intersectsRay:YXe,projectPoint:f$,setAltitudeAt:iQe,setExtent:ZXe,tmpSphere:sQe,union:nQe,wrap:UXe},Symbol.toStringTag,{value:"Module"}));function nC(e,t){return e[0]*t[1]-e[1]*t[0]}function oQe(e,t,i){const r=Rf(i,t)/ld(i);return O2(e,i,r)}function Dft(e,t,i,r,n=i){return nn(Py,r,i),nn(l6,t,n),oQe(o2,l6,Py),zF(e,n,o2)}function jft(e,t,i,r){nn(Py,t,i);const n=r/Wv(Py);return gu(e,i,Py,n)}function zft(e,t){const i=e.start,r=e.end,n=t.start,o=t.end,u=nn(Py,r,i),f=nn(p0e,o,n),g=nC(u,f);if(Math.abs(g)<=lQe)return[];const b=nn(l6,i,n),E=nC(f,b)/g,I=nC(u,b)/g;if(E>=0){if(I>=0||t.type===dr.LINE)return[gu(o2,i,u,E)]}else if(e.type===dr.LINE&&(I>=0||t.type===dr.LINE))return[gu(o2,i,u,E)];return[]}function aQe(e,t,i){const r=[],n=nn(Py,e.end,e.start),o=nn(p0e,e.start,t),u=ld(n),f=2*Rf(n,o),g=f*f-4*u*(ld(o)-i*i);if(g===0){const b=-f/(2*u);(e.type===dr.LINE||b>=0)&&r.push(gu(o2,e.start,n,b))}else if(g>0){const b=Math.sqrt(g),E=(-f+b)/(2*u);(e.type===dr.LINE||E>=0)&&r.push(gu(o2,e.start,n,E));const I=(-f-b)/(2*u);(e.type===dr.LINE||I>=0)&&r.push(gu(l6,e.start,n,I))}return r}var dr;(function(e){e[e.RAY=0]="RAY",e[e.LINE=1]="LINE"})(dr||(dr={}));const lQe=1e-6,Py=qt(),p0e=qt(),l6=qt(),o2=qt();function qj({start:e,end:t,type:i},r,n){const o=[],u=nn(WS,t,e),f=nn(y$,e,r),g=ld(u),b=2*Rf(u,f),E=b*b-4*g*(ld(f)-n*n);if(E===0){const I=-b/(2*g);(i===ya.PLANE||I>=0)&&o.push(gu(qt(),e,u,I))}else if(E>0){const I=Math.sqrt(E),M=(-b+I)/(2*g);(i===ya.PLANE||M>=0)&&o.push(gu(qt(),e,u,M));const k=(-b-I)/(2*g);(i===ya.PLANE||k>=0)&&o.push(gu(qt(),e,u,k))}return o}function f0e(e,t){const i=e.start,r=e.end,n=nn(WS,r,i),o=bn(g$,-n[1],n[0],0),u=t.start,f=t.end,g=Ao(Wj,f,u),b=vi(g,o),E=bn(S0e,i[0],i[1],0),I=Ao(x0e,E,u),M=vi(I,o),k=Vr();if(Math.abs(b)<k)return[];const L=Pn(E0e,u,g,M/b);if(t.type===dr.RAY){const P=Ao(YR,L,u);if(vi(P,g)<-k)return[]}if(e.type===ya.HALF_PLANE){const P=IT(y$,L,i);if(Rf(P,n)<-k)return[]}return[_a(L)]}function uQe(e,t){return hQe(u6(Zj,t[2],e),t)}function y0e(e,t){return b0e(u6(Zj,0,e),u6(yQe,0,t)).map(([r,n])=>Xh(r,n))}function m0e(e,t,i){return v0e(e,u6(Zj,e[2],t),i)}function g0e(e,t,i,r=nt()){const n=nn(WS,e,t),o=Wv(n);return gu(r,t,n,o===0?1:i/o),r[2]=e[2],r}function v0e(e,{start:t,end:i,type:r},n=nt()){const o=Ao(m$,e,t),u=Ao(g$,i,t),f=vi(o,u)/vi(u,u);return Pn(n,t,u,r===dr.RAY?Math.max(f,0):f)}const cQe=(()=>{const e=nt(),t=nt(),i=nt();return({start:r,end:n},{center:o,radius:u,normal:f,slicePlane:g})=>{const b=BS(o,f,fQe);if(Ni(JR(b,r),0)&&Ni(JR(b,n),0)){Gj(f,e,t);const I=(L,P)=>(sn(i,P,o),Qr(L,vi(i,e),vi(i,t)),L),M=aQe({start:I(WS,r),end:I(y$,n),type:dr.LINE},wae,u),k=[];for(const[L,P]of M){const D=wf(nt(),o);Pn(D,D,e,L),Pn(D,D,t,P),g&&!lf(g,D)||k.push(D)}return k}const E=nt();return i0e(b,r,n,E)?!Ni(N2(E,o),u)||g&&!lf(g,E)?[]:[E]:[]}})();function w0e({start:e,end:t,type:i},r,n){const o=[],u=sn(m$,t,e),f=nn(y$,e,r),g=ld(u),b=2*Rf(u,f),E=b*b-4*g*(ld(f)-n*n);if(E===0){const I=-b/(2*g);(i===dr.LINE||I>=0)&&o.push(Pn(nt(),e,u,I))}else if(E>0){const I=Math.sqrt(E),M=(-b+I)/(2*g);(i===dr.LINE||M>=0)&&o.push(Pn(nt(),e,u,M));const k=(-b-I)/(2*g);(i===dr.LINE||k>=0)&&o.push(Pn(nt(),e,u,k))}return o}function b0e(e,t){const i=e.start,r=e.end,n=t.start,o=t.end,u=Ao(m$,r,i),f=Ao(g$,o,n),g=Ao(Wj,n,i),b=yl(S0e,u,f);if(!Ni(vi(g,b),0))return[];const E=II(b);if(Ni(E,0))return[];const I=yl(x0e,g,f),M=vi(I,b)/E,k=Pn(E0e,i,u,M);if(e.type===dr.RAY){const L=Ao(YR,k,i);if(vi(u,L)<-Vr())return[]}if(t.type===dr.RAY){const L=Ao(YR,k,n);if(vi(f,L)<-Vr())return[]}return[_a(k)]}function hQe({start:e,end:t,type:i},r){const n=Ao(m$,r,e),o=Ao(g$,t,e),u=yl(Wj,o,n),f=II(u)/II(o),g=Vr();if(f<g)switch(i){case dr.LINE:return[_a(r)];case dr.RAY:return vi(o,n)<-g?[]:[_a(r)]}return[]}function Hj(e,t,i,r){const[n,o]=e,[u,f]=i,g=u-n,b=f-o,E=g*g+b*b,I=Math.sqrt(E);if(I>t+r)return[];if(I<Math.abs(t-r))return[];if(Ni(I,0)&&Ni(t,r))return[];const M=(t*t-r*r+E)/(2*I),k=Math.sqrt(t*t-M*M),L=k*b/I,P=k*g/I,[D,j]=Iae(WS,e,i,M/I);return Ni(L,P)?[Xh(D,j)]:[Xh(D+L,j-P),Xh(D-L,j+P)]}function u6(e,t,{start:i,end:r,type:n}){return bn(e.start,i[0],i[1],t),bn(e.end,r[0],r[1],t),e.type=pQe[n],e}function _0e(e,t){return Ni(e[2],t[2])}function Ni(e,t){return ev(Math.abs(e-t),0,Vr())}function dQe(e,t){return t.filter(i=>lf(e,i))}function lf(e,t){return kXe(e,t)}var ya;(function(e){e[e.PLANE=0]="PLANE",e[e.HALF_PLANE=1]="HALF_PLANE"})(ya||(ya={}));const pQe={[ya.PLANE]:dr.LINE,[ya.HALF_PLANE]:dr.RAY},WS=qt(),y$=qt(),m$=nt(),g$=nt(),Wj=nt(),S0e=nt(),x0e=nt(),E0e=nt(),YR=nt(),fQe=Go(),Zj={start:nt(),end:nt(),type:dr.LINE},yQe={start:nt(),end:nt(),type:dr.LINE};class vl{intersect(t){return Th(this,t)}closestPoints(t){return[this.closestTo(t)]}}class H2 extends vl{constructor(t){super(),this.point=t}equals(t){return this===t||Yl(t)&&ki(this.point,t.point)}closestTo(){return s2(this.point)}}class Jj extends vl{constructor(t,i,r){super(),this.start=t,this.end=i,this.lineLike={start:t,end:i,type:r}}equals(t){return this===t||hc(t)&&this.lineLike.type===t.lineLike.type&&ki(this.start,t.start)&&ki(this.end,t.end)}closestTo(t){const i=xa();return v0e(t,this.lineLike,i),i}}class Kj extends Jj{constructor(t,i){super(t,i,dr.LINE)}}class mQe extends Jj{constructor(t,i){super(t,i,dr.RAY)}}class I0e extends vl{constructor(t){super(),this.constraints=t}equals(t){return this===t||XR(t)&&tS(this.constraints,t.constraints,(i,r)=>i.equals(r))}closestTo(t){let i,r=1/0;for(const n of this.constraints){const o=n.closestTo(t),u=Kv(t,o);u<r&&(r=u,i=o)}return s2(i??t)}closestPoints(t){return this.constraints.flatMap(i=>i===this?[]:i.closestPoints(t))}}class T0e extends vl{constructor(t,i){super(),this.center=t,this.radius=i}equals(t){return this===t||pc(t)&&this.center[0]===t.center[0]&&this.center[1]===t.center[1]&&this.radius===t.radius}closestTo(t){const i=xa();return g0e(t,this.center,this.radius,i),i}}class Yj extends vl{constructor(t,i){super(),this.center=t,this.radius=i}equals(t){return this===t||Mh(t)&&ki(this.center,t.center)&&this.radius===t.radius}closestTo(t){const i=xa();return g0e(t,this.center,this.radius,i),i[2]=this.center[2],i}asCircle(){return new Xj(s2(this.center),this.radius,Sf(0,0,1))}}class Xj extends vl{constructor(t,i,r,n=void 0){super(),this.center=t,this.radius=i,this.normal=r,this.slicePlane=n}equals(t){return this===t||gp(t)&&ki(this.center,t.center)&&ki(this.normal,t.normal)&&this.radius===t.radius}closestTo(t){const{center:i,radius:r}=this;r0e(this.getPlane(gQe),t,sC);const n=Ao(sC,sC,i),o=OT(n);if(Ni(o,0))return s2(t);const u=r/Math.sqrt(o),f=xa();Pn(f,i,n,u);const{slicePlane:g}=this;if(g&&!lf(g,f)){const b=ez(g,this);return(b==null?void 0:b.closestTo(t))??s2(t)}return f}getPlane(t=Go()){return BS(this.center,this.normal,t)}}const sC=nt(),gQe=Go();class vQe extends vl{constructor(t){super(),this.z=t}equals(t){return this===t||$h(t)&&this.z===t.z}closestTo(t){return Sf(t[0],t[1],this.z)}getPlane(t=Go()){return bn(jK,0,0,this.z),BS(jK,yne,t)}}const jK=nt();class Qj extends vl{constructor(t,i,r){super(),this.start=t,this.end=i,this.planeLike={start:t,end:i,type:r}}equals(t){return this===t||dc(t)&&this.planeLike.type===t.planeLike.type&&ki(this.start,t.start)&&ki(this.end,t.end)}closestTo(t){const i=xa();return m0e(t,this.planeLike,i),i}closestEndTo(t){const{start:i,end:r}=this.planeLike;return Math.sign(Rf(nn(wQe,r,i),nn(bQe,t,i)))>0?this.end:this.start}getPlane(t=Go()){const i=wf(zK,this.end);return i[2]+=1,e0e(this.start,this.end,i,t)}getSlicePlane(t=Go()){const{start:i,end:r,type:n}=this.planeLike;if(n===ya.PLANE)return;const o=bn(zK,i[0],i[1],0),u=bn(VK,r[0],r[1],0),f=sn(VK,u,o);return BS(o,f,t),t}}const wQe=qt(),bQe=qt(),zK=nt(),VK=nt();class Vft extends Qj{constructor(t,i){super(t,i,ya.HALF_PLANE)}}class $0e extends Qj{constructor(t,i){super(t,i,ya.PLANE)}}class _Qe extends vl{constructor(t,i){super(),this.sphere=o0e(t,i)}equals(t){return this===t||Ch(t)&&n0e(this.sphere,t.sphere)}closestTo(t){const i=xa();return f$(this.sphere,t,i),i}get center(){return this.sphere}get radius(){return this.sphere[3]}}class M0e extends vl{constructor(t,i,r){super(),this.start=t,this.end=i,this.getZ=r,this.planeLike={start:t,end:i,type:ya.PLANE}}equals(t){return this===t||c6(t)&&ki(this.start,t.start)&&ki(this.end,t.end)&&this.getZ===t.getZ}closestTo(t){return $Qe(this,t)}addIfOnTheGround(t,i){for(const r of i){const n=this.getZ(r[0],r[1])??0;Ni(r[2],n)&&(r[2]=n,t.push(r))}}}class SQe extends vl{constructor(t,i,r){super(),this._x=t,this._y=i,this._z=r}equals(t){return this===t||GQe(t)&&this._x===t._x&&this._y===t._y&&this._z===t._z}closestTo([t,i,r]){return Kfe(this._x??t,this._y??i,this._z??r)}}class xQe extends vl{constructor(t,i,r,n,o){super(),this._origin=t,this._spatialReference=i,this._distanceMeters=r,this._z=n,this._directionDegrees=o}equals(t){return this===t||UQe(t)&&aL(this._origin,t._origin)&&this._spatialReference===t._spatialReference&&this._distanceMeters===t._distanceMeters&&this._z===t._z&&this._directionDegrees===t._directionDegrees}closestTo([t,i,r]){return Qr(Fw,t,i),aL(Fw,this._origin)||this._applyDirectionAndDistance(Fw),Kfe(Fw[0],Fw[1],this._z??r)}_applyDirectionAndDistance(t){if(this._directionDegrees!=null&&this._distanceMeters!=null)Ry(t,this._origin,this._directionDegrees,this._distanceMeters,this._spatialReference);else if(this._directionDegrees!=null)IQe(t,this._origin,this._directionDegrees,t,this._spatialReference);else if(this._distanceMeters!=null){const{azimuth:i}=GS(EQe,this._origin,t,this._spatialReference);Ry(t,this._origin,i??0,this._distanceMeters,this._spatialReference)}}}const Fw=[0,0],EQe=new US;function IQe(e,t,i,r,n){let{azimuth:o,distance:u}=GS(TQe,t,r,n);o??(o=0);let f=u*Math.cos((o-i)*Xs);f=Math.max(0,f),Ry(e,t,i,f,n)}const TQe=new US;function $Qe(e,t){const i=xa();return m0e(t,e.planeLike,i),i[2]=e.getZ(i[0],i[1])??A0e,i}function Th(e,t){if(XR(e)){const i=[];for(const r of e.constraints){const n=r.intersect(t);n&&i.push(n)}return tz(i)}if(XR(t))return Th(t,e);if(c6(e))return UK(e,t);if(c6(t))return UK(t,e);if(Yl(e)){const{point:i}=e;if(Yl(t))return ki(i,t.point)?e:void 0;const r=t.closestTo(i);return ple(r,i)?e:void 0}if(hc(e)){if(Yl(t))return Th(t,e);if(hc(t))return hu(b0e(e.lineLike,t.lineLike));if($h(t))return MQe(e,t);if(dc(t))return hu(f0e(t.planeLike,e.lineLike));if(pc(t))return hu(w0e(e.lineLike,t.center,t.radius));if(gp(t))return hu(cQe(e.lineLike,t));if(Mh(t))return CQe(e,t);if(Ch(t))return AQe(e,t)}else if($h(e)){if(Yl(t)||hc(t))return Th(t,e);if($h(t))return kQe(e,t);if(dc(t))return LQe(e,t);if(pc(t))return OQe(e,t);if(gp(t))return PQe(e,t);if(Mh(t))return RQe(e,t);if(Ch(t))return NQe(e,t)}else if(dc(e)){if(Yl(t)||hc(t)||$h(t))return Th(t,e);if(dc(t))return oC(y0e(e.planeLike,t.planeLike));if(pc(t))return oC(qj(e.planeLike,t.center,t.radius));if(gp(t))return DQe(e,t);if(Mh(t))return FQe(e,t);if(Ch(t))return jQe(e,t)}else if(pc(e)){if(Yl(t)||hc(t)||$h(t)||dc(t))return Th(t,e);if(pc(t))return oC(Hj(e.center,e.radius,t.center,t.radius));if(gp(t))return void 0;if(Mh(t))return zQe(e,t);if(Ch(t))return void 0}else if(gp(e)){if(Yl(t)||hc(t)||$h(t)||dc(t)||pc(t))return Th(t,e);if(gp(t))return void 0;if(Mh(t))return t.asCircle(),void 0;if(Ch(t))return void 0}else if(Mh(e)){if(Yl(t)||hc(t)||$h(t)||dc(t)||pc(t)||gp(t))return Th(t,e);if(Mh(t))return VQe(t,e);if(Ch(t))return void 0}else if(Ch(e)){if(Yl(t)||hc(t)||$h(t)||dc(t)||pc(t)||Mh(t))return Th(t,e);if(Ch(t))return void 0}}const MQe=(()=>{const e=Go();return(t,i)=>{const{start:r,end:n}=t;if(_0e(r,n)&&Ni(r[2],i.z))return t;const o=xa();return i0e(i.getPlane(e),r,n,o)?new H2(o):void 0}})();function CQe({lineLike:e},{center:t,radius:i}){const r=t[2];return hu(w0e(e,t,i).filter(n=>Ni(n[2],r)))}function AQe({lineLike:e},{sphere:t}){return hu(a0e(t,e.start,e.end))}const ez=(()=>{const e=Nf(),t=nt(),i=nt();return(r,n,o)=>{const{normal:u,center:f,radius:g}=n;Gj(u,t,i);const b=r,E=g*vi(b,t),I=g*vi(b,i);Oce(e,f[0],f[1],f[2],1);const M=Vce(r,e),k=Math.hypot(E,I),L=Ni(k,0);if(Ni(JR(r,f),0)){if(L)return n;if(Ni(g,0))return!o||lf(o,f)?new H2(s2(f)):void 0;yl(t,b,u),fl(t,t);const Z=new Array,ee=_a(f);Pn(ee,ee,t,g),o&&!lf(o,ee)||Z.push(ee);const ie=_a(f);return Pn(ie,ie,t,-g),o&&!lf(o,ie)||Z.push(ie),hu(Z)}if(L)return;const P=-M/k;if(Math.abs(P)>1||Ni(P,1))return;const D=Math.atan(E/I),j=PN(P)-D,z=Math.PI-j,V=new Array,W=nt();Pn(W,f,t,g*Math.cos(j)),Pn(W,W,i,g*Math.sin(j)),V.push(W);const Q=nt();return Pn(Q,f,t,g*Math.cos(z)),Pn(Q,Q,i,g*Math.sin(z)),V.push(Q),hu(o?dQe(o,V):V)}})();function kQe(e,t){return Ni(e.z,t.z)?e:void 0}function LQe({z:e},{planeLike:t}){const[i,r]=t.start,[n,o]=t.end,u=Sf(i,r,e),f=Sf(n,o,e);return t.type===ya.PLANE?new Kj(u,f):new mQe(u,f)}function OQe(e,t){const[i,r]=t.center;return new Yj(Sf(i,r,e.z),t.radius)}function RQe(e,t){return Ni(t.center[2],e.z)?t:void 0}const PQe=(()=>{const e=Go();return(t,i)=>ez(t.getPlane(e),i,i.slicePlane)})();function NQe(e,{center:t,radius:i}){const r=Math.abs(t[2]-e.z);if(r>i&&!Ni(r,i))return;const n=Sf(t[0],t[1],e.z),o=Math.sqrt(i**2-r**2);return Ni(o,0)?void 0:new Yj(n,o)}const FQe=(()=>{const e=Go();return(t,{center:i,radius:r})=>{const n=qj(t.planeLike,i,r),o=i[2];t.getSlicePlane(e);const u=new Array;for(const[f,g]of n){const b=[f,g,o];lf(e,b)&&u.push(b)}return hu(u)}})(),DQe=(()=>{const e=Go(),t=Go();return(i,r)=>ez(i.getPlane(e),r,i.getSlicePlane(t))})(),jQe=(()=>{const e=Go();return(t,{center:i,radius:r})=>{const n=t.getPlane(e),o=qS(n,i),u=Math.abs(o);if(u>r&&!Ni(u,r))return;const f=Math.sqrt(r**2-o**2);if(Ni(f,0)){const E=xa();return r0e(n,i,E),new H2(E)}const g=xa(),b=_a(n);return Pn(g,i,b,o),new Xj(g,f,b,t.getSlicePlane())}})();function zQe(e,t){const i=Hv(e.center,t.center);return Ni(i,0)&&Ni(e.radius,t.radius)?t:C0e(Hj(e.center,e.radius,t.center,t.radius),t.center[2])}function VQe(e,t){if(!_0e(e.center,t.center))return;const i=Hv(e.center,t.center);return Ni(i,0)&&Ni(e.radius,t.radius)?e:C0e(Hj(e.center,e.radius,t.center,t.radius),e.center[2])}function UK(e,t){const{planeLike:i,getZ:r}=e,n=new Array;if(Yl(t))e.addIfOnTheGround(n,uQe(i,t.point));else if(hc(t))e.addIfOnTheGround(n,f0e(i,t.lineLike));else if(pc(t))for(const[o,u]of qj(i,t.center,t.radius)){const f=r(o,u);f!=null&&n.push(Lc(o,u,f))}else if(dc(t)||c6(t))for(const[o,u]of y0e(i,t.planeLike)){const f=r(o,u)??A0e;n.push(Lc(o,u,f))}return hu(n)}function oC(e){return tz(e.map(([t,i])=>{const r=Sf(t,i,0),n=Sf(t,i,1);return new Kj(r,n)}))}function hu(e){return tz(e.map(t=>t?new H2(t):void 0))}function C0e(e,t){return hu(e.map(([i,r])=>[i,r,t]))}function tz(e){if(e.length!==0)return e.length===1?e[0]??void 0:new I0e(e.filter(cr))}function XR(e){return e instanceof I0e}function Yl(e){return e instanceof H2}function hc(e){return e instanceof Jj}function $h(e){return e instanceof vQe}function dc(e){return e instanceof Qj}function pc(e){return e instanceof T0e}function Mh(e){return e instanceof Yj}function gp(e){return e instanceof Xj}function Ch(e){return e instanceof _Qe}function c6(e){return e instanceof M0e}function UQe(e){return e instanceof xQe}function GQe(e){return e instanceof SQe}const A0e=0;class W2{constructor(t,i,r,n){this.targetPoint=t,this.constraint=i,this.isDraped=r,this.domain=n}}let k0e=class extends W2{constructor({targetPoint:t,objectId:i,constraint:r,isDraped:n}){super(t,r,n,Fs.FEATURE),this.objectId=i}},v$=class{constructor(t,i){this.isDraped=t,this.domain=i}},Nc=class L0e extends v${constructor(t,i,r,n,o=Fs.ALL,u=!0,f=!0){super(n,o),this.type=t,this.lineStart=i,this.lineEnd=r,this.fadeLeft=u,this.fadeRight=f}equals(t){return t instanceof L0e&&this.type===t.type&&ki(this.lineStart,t.lineStart)&&ki(this.lineEnd,t.lineEnd)&&this.fadeLeft===t.fadeLeft&&this.fadeRight===t.fadeRight}get length(){return N2(this.lineStart,this.lineEnd)}},BQe=class extends k0e{constructor(t){super({...t,isDraped:!0,constraint:new M0e(t.edgeStart,t.edgeEnd,t.getGroundElevation)})}get hints(){return[new Nc(ml.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},qQe=class extends k0e{constructor(t){super({...t,constraint:new Kj(t.edgeStart,t.edgeEnd)})}get hints(){return[new Nc(ml.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},HQe=class O0e extends v${constructor(t,i,r=Fs.ALL){super(i,r),this.intersectionPoint=t}equals(t){return t instanceof O0e&&ki(this.intersectionPoint,t.intersectionPoint)}},W4=class extends W2{constructor(t,i,r,n){super(t,new H2(t),n,Fs.ALL),this.first=i,this.second=r}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new HQe(this.targetPoint,this.isDraped,this.domain)]}},WQe=class extends W2{constructor({lineStart:t,lineEnd:i,targetPoint:r,isDraped:n}){super(r,new $0e(t,i),n,Fs.SELF),this._referenceLineHint=new Nc(ml.REFERENCE_EXTENSION,t,i,n,this.domain)}get hints(){return[this._referenceLineHint,new Nc(ml.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.isDraped,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}},ZQe=class R0e extends v${constructor(t,i,r,n=Fs.ALL){super(r,n),this.lineStart=t,this.lineEnd=i}equals(t){return t instanceof R0e&&ki(this.lineStart,t.lineStart)&&ki(this.lineEnd,t.lineEnd)}},JQe=class extends W2{constructor({referenceLine:t,lineStart:i,targetPoint:r,isDraped:n}){const o=_a(i),{left:u,right:f}=t;sn(o,Pf(o,o,f),u),super(r,new $0e(i,o),n,Fs.SELF),this._referenceLines=[{edge:t,fadeLeft:!0,fadeRight:!0}]}get hints(){return[new Nc(ml.TARGET,this.constraint.start,this.targetPoint,this.isDraped,this.domain),new ZQe(this.constraint.start,this.targetPoint,this.isDraped,this.domain),...this._referenceLines.map(t=>new Nc(ml.REFERENCE,t.edge.left,t.edge.right,this.isDraped,this.domain,t.fadeLeft,t.fadeRight))]}addReferenceLine(t){const i={edge:t,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(r=>{ki(t.right,r.edge.left)&&(r.fadeLeft=!1,i.fadeRight=!1),ki(t.right,r.edge.right)&&(r.fadeRight=!1,i.fadeRight=!1),ki(t.left,r.edge.right)&&(r.fadeRight=!1,i.fadeLeft=!1),ki(t.left,r.edge.left)&&(r.fadeLeft=!1,i.fadeLeft=!1)}),this._referenceLines.push(i)}},P0e=class N0e extends v${constructor(t,i,r,n,o=Fs.ALL){super(n,o),this.previousVertex=t,this.centerVertex=i,this.nextVertex=r}equals(t){return t instanceof N0e&&ki(this.previousVertex,t.previousVertex)&&ki(this.centerVertex,t.centerVertex)&&ki(this.nextVertex,t.nextVertex)}},KQe=class extends W2{constructor({targetPoint:t,constraint:i,previousVertex:r,otherVertex:n,otherVertexType:o,isDraped:u,selfSnappingType:f,objectId:g,domain:b}){super(t,i,u,b??Fs.SELF),this.previousVertex=r,this.otherVertex=n,this.otherVertexType=o,this.selfSnappingType=f??d6.None,this.objectId=g??null}get hints(){const t=this.previousVertex,i=this.otherVertexType===h6.CENTER?this.otherVertex:this.targetPoint,r=this.otherVertexType===h6.CENTER?this.targetPoint:this.otherVertex;return[new Nc(ml.TARGET,i,r,this.isDraped,this.domain),new Nc(ml.REFERENCE,t,i,this.isDraped,this.domain),new P0e(this.previousVertex,i,r,this.isDraped,this.domain)]}};var h6,d6;(function(e){e[e.NEXT=0]="NEXT",e[e.CENTER=1]="CENTER"})(h6||(h6={})),function(e){e[e.None=0]="None",e[e.LastVertex=1]="LastVertex",e[e.FirstVertex=2]="FirstVertex",e[e.ExistingEdge=3]="ExistingEdge"}(d6||(d6={}));class YQe extends W2{constructor({targetPoint:t,point1:i,point2:r,isDraped:n}){super(t,new T0e(YF(nt(),i,r,.5),.5*MS(i,r)),n,Fs.SELF),this._p1=i,this._p2=r}get hints(){return[new Nc(ml.REFERENCE,this.targetPoint,this._p1,this.isDraped,this.domain),new Nc(ml.REFERENCE,this.targetPoint,this._p2,this.isDraped,this.domain),new P0e(this._p1,this.targetPoint,this._p2,this.isDraped,this.domain)]}}function XQe(e,t,i,r,n=nt()){const o=wf(QQe,e);return o[2]=Vfe(r,o,t,i)||0,r.renderCoordsHelper.toRenderCoords(o,t,n),n}const QQe=nt();function eet(e,t,i,r){return r.type==="2d"?(Dx.x=e[0],Dx.y=e[1],Dx.spatialReference=t,r.toScreen(Dx)):(XQe(e,t,i,r,GK),r.state.camera.projectToScreen(GK,aC),gn(aC[0],aC[1]))}const Dx=B2(0,0,0,null),GK=nt(),aC=AEe();let Xl=class extends Us.EventedMixin(De){constructor(e){super(e),this.options=new jj,this._engineCache=new Map,this._loadTask=null,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=Nh.MAIN}initialize(){this.addHandles([me(()=>{const{distance:e,touchSensitivityMultiplier:t,effectiveSelfEnabled:i,effectiveFeatureEnabled:r,effectiveGridEnabled:n}=this.options;return{selfEnabled:i,featureEnabled:r,gridEnabled:this.view.type==="2d"&&n,viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,distance:e,touchSensitivityMultiplier:t}},(e,t)=>{var i;t&&(this.doneSnapping(),this.emit("changed")),(i=this._loadTask)==null||i.abort(),this._loadTask=pS(r=>this._updateEngines(e,t,r))},Ln),me(()=>this.options,e=>{for(const t of this._engines)t.options=e},hl)])}destroy(){this._destroyEngines()}get updating(){var e;return this._engines.some(t=>t.updating)||!((e=this._loadTask)!=null&&e.finished)}_destroyEngines(){this._engineCache.forEach(e=>e.destroy()),this._engineCache.clear(),this._engines=[]}async _updateEngines(e,t,i){if(!e.viewReady)return void this._destroyEngines();(t==null?void 0:t.viewSpatialReference)!==e.viewSpatialReference&&this._destroyEngines();const{_engineCache:r}=this,n=[];e.featureEnabled&&!r.has("feature")&&n.push(this._setupFeatureSnappingEngine(i)),e.selfEnabled&&!r.has("self")&&n.push(this._setupSelfSnappingEngine(i)),e.gridEnabled&&!r.has("grid")&&this.view.type==="2d"&&n.push(this._setupGridSnappingEngine(i)),await Promise.allSettled(n),i.aborted||(this._engines=Array.from(r.values()))}async _setupSelfSnappingEngine(e){const{SelfSnappingEngine:t}=await ce(()=>import("./SelfSnappingEngine-CAqt-InQ.js"),__vite__mapDeps([265,266]),import.meta.url);Li(e);const i=new t({view:this.view,options:this.options});this._engineCache.set("self",i)}async _setupGridSnappingEngine(e){const{view:t}=this,{GridSnappingEngine:i}=await ce(async()=>{const{GridSnappingEngine:r}=await import("./GridSnappingEngine-CoGFPB52.js");return{GridSnappingEngine:r}},__vite__mapDeps([267,155]),import.meta.url);if(Li(e),t.type==="2d"){const r=new i({view:t,options:this.options});this._engineCache.set("grid",r)}}async _setupFeatureSnappingEngine(e){const{FeatureSnappingEngine:t}=await ce(()=>import("./FeatureSnappingEngine-Bxocw3gc.js"),[],import.meta.url);Li(e);const{view:i,options:r,_engineCache:n}=this,o=new t({view:i,options:r,spatialReference:i.spatialReference});n.set("feature",o)}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:t}=this.options,i=e*t;return i*i}snap(e){return ret(e)?this._snapMultiPoint(e):this._snapSinglePoint(e)}update(e){const{point:t,context:i}=e;this._removeVisualization();const r=this._currentMainCandidate;if(r==null)return t;const n=this._selectUpdateInput(e);if(n==null)return t;const{spatialReference:o}=i,u=dl(n,o);if(u==null)return t;const{view:f}=this,{elevationInfo:g,visualizer:b}=i,E=[],I=r3(u,f,g),M=r.constraint.closestTo(I);if(!this._arePointsWithinScreenThreshold(I,M,i)||!uC(r,i.drawConstraints))return this._resetSnappingState(),t;r.targetPoint=eC(M),E.push(...r.hints);for(const k of this._currentOtherActiveCandidates)uC(k,i.drawConstraints)&&(k.targetPoint=eC(M),E.push(...k.hints));return b!=null&&this.addHandles(b.draw(E,{spatialReference:o,elevationInfo:net(i),view:f,selfSnappingZ:i.selfSnappingZ}),lC),OK(M,f,t,i)}doneSnapping(){this._removeVisualization(),this._resetSnappingState()}_selectUpdateInput({point:e,scenePoint:t}){switch(this._currentSnappedType){case Nh.MAIN:return e;case Nh.SCENE:return t}}_resetSnappingState(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=Nh.MAIN}_removeVisualization(){this.removeHandles(lC)}async _snapSinglePoint({point:e,context:t,signal:i}){const{view:r}=this,{elevationInfo:n}=t,o=r3(e,r,n),u=await this._fetchCandidates(o,Fs.ALL,t,i);return this._createSnapResult(o,Nh.MAIN,u,r,e,t,i)}async _snapMultiPoint({point:e,scenePoint:t,context:i,signal:r}){const{view:n}=this,{coordinateHelper:o,elevationInfo:u,spatialReference:f}=i;await $2(t.spatialReference,f);const g=dl(t,f),b=r3(g,n,u),E=await this._fetchCandidates(b,Fs.FEATURE,i,r);if(E.length>0){const k=await this._fetchCandidates(b,Fs.SELF,i,r);return this._createSnapResult(b,Nh.SCENE,[...E,...k],n,g,i,r)}const I=r3(e,n,u),M=await this._fetchCandidates(I,Fs.SELF,i,r);return this._createSnapResult(I,Nh.MAIN,M,n,{z:o.hasZ()&&e.hasZ?e.z??0:void 0,m:o.hasM()&&e.hasM?e.m??0:void 0},i,r)}async _fetchCandidates(e,t,i,r){return(await Promise.all(this._engines.map(n=>n.fetchCandidates(e,t,i,r)))).flat()}_createSnapResult(e,t,i,r,n,o,u){return{get valid(){return!va(u)},apply:()=>{const{spatialReference:f}=o,{snappedPoint:g,hints:b}=this._processCandidates(e,t,i,o);return this._removeVisualization(),o.visualizer!=null&&this.addHandles(o.visualizer.draw(b,{spatialReference:f,elevationInfo:lm,view:r,selfSnappingZ:o.selfSnappingZ}),lC),OK(g,r,n,o)}}}_processCandidates(e,t,i,r){if(i.length<1)return this.doneSnapping(),{snappedPoint:e,hints:[]};this._currentSnappedType!==t&&this._resetSnappingState(),dXe(e,i);const n=this._currentMainCandidate;if(n!=null){const o=iet(n,i);if(o>=0){if(!(i[o]instanceof W4))return this._intersectWithOtherCandidates(o,i,e,t,r);if(this._arePointsWithinScreenThreshold(e,n.targetPoint,r))return this._updateSnappingCandidate(n,t,i,r)}}return this._intersectWithOtherCandidates(0,i,e,t,r)}_intersectWithOtherCandidates(e,t,i,r,n){const{coordinateHelper:o}=n,u=t[e],f=[];for(let g=0;g<t.length;++g){if(g===e)continue;const b=t[g],E=u.constraint.intersect(b.constraint);if(E)for(const I of E.closestPoints(u.targetPoint))f.push([new W4(eC(I),u,b,b.isDraped),this._squaredScreenDistance(i,I,o)])}return f.length>0&&(f.sort((g,b)=>g[1]-b[1]),f[0][1]<this._squaredPointProximityThreshold(n.pointer))?this._updateSnappingCandidate(f[0][0],r,t,n):uC(u,n.drawConstraints)?this._updateSnappingCandidate(u,r,t,n):{snappedPoint:i,hints:[]}}_updateSnappingCandidate(e,t,i,r){this.doneSnapping(),this._currentMainCandidate=e,this._currentSnappedType=t;const n=this._currentMainCandidate.targetPoint,o=[];o.push(...e.hints);for(const u of i){if(e instanceof W4){if(u.constraint.equals(e.first.constraint)||u.constraint.equals(e.second.constraint))continue}else if(u.constraint.equals(e.constraint))continue;const f=u.constraint.closestTo(n);this._squaredScreenDistance(f,n,r.coordinateHelper)<tet()&&(u.targetPoint=n,this._currentOtherActiveCandidates.push(u),o.push(...u.hints))}return{snappedPoint:n,hints:o}}_squaredPointProximityThreshold(e){return e==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}_arePointsWithinScreenThreshold(e,t,i){return this._squaredScreenDistance(e,t,i.coordinateHelper)<this._squaredPointProximityThreshold(i.pointer)}_squaredScreenDistance(e,t,i){return Xfe(this._toScreen(e,i),this._toScreen(t,i))}_toScreen(e,t){return eet(e,t.spatialReference,lm,this.view)}get test(){}};var Nh;m([w({constructOnly:!0})],Xl.prototype,"view",void 0),m([w()],Xl.prototype,"options",void 0),m([w({readOnly:!0})],Xl.prototype,"updating",null),m([w()],Xl.prototype,"_loadTask",void 0),m([w()],Xl.prototype,"_engines",void 0),m([w()],Xl.prototype,"_squaredMouseProximityThreshold",null),m([w()],Xl.prototype,"_squaredTouchProximityThreshold",null),Xl=m([H("esri.views.interactive.snapping.SnappingManager")],Xl),function(e){e[e.MAIN=0]="MAIN",e[e.SCENE=1]="SCENE"}(Nh||(Nh={}));const lC="visualization-handle";function tet(){return o6.satisfiesConstraintScreenThreshold*o6.satisfiesConstraintScreenThreshold}function uC(e,t){return!t||t.direction==null&&t.distance==null||!(e instanceof BQe||e instanceof qQe||e instanceof WQe||e instanceof JQe||e instanceof YQe)&&(!(e instanceof KQe)||t.direction==null&&e.selfSnappingType===d6.LastVertex)}function iet(e,t){return e instanceof W4?cC(t,e.first)>=0&&cC(t,e.second)>=0?0:-1:cC(t,e)}function cC(e,t){let i=-1;for(let r=0;r<e.length;++r)if(t.constraint.equals(e[r].constraint)){i=r;break}return i}function ret(e){return e.scenePoint!=null}function net({coordinateHelper:e,elevationInfo:t}){return e.hasZ()?lm:t}function set(e){return(e==null?void 0:e.type)==="graphic"}function oet(e){return e.find(set)??null}let Qn=class extends Us.EventedAccessor{constructor(e){super(e),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:this.activeComponent}return null}addToHistory(e){this.history.redo=[],this.history.undo.push(e)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this._reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}_reset(){var e;(e=this.activeComponent)==null||e.reset()}refreshComponent(){const e=this.activeComponent;e&&(e.type!=="box"&&e.type!=="reshape"&&e.type!=="graphic-mover"||e.refresh())}set undo(e){this._set("undo",()=>{this.canUndo()&&e()})}set redo(e){this._set("redo",()=>{this.canRedo()&&e()})}};m([w()],Qn.prototype,"activeComponent",void 0),m([w()],Qn.prototype,"cancelled",void 0),m([w()],Qn.prototype,"history",void 0),m([w()],Qn.prototype,"tool",null),m([w()],Qn.prototype,"type",void 0),m([w()],Qn.prototype,"canUndo",null),m([w()],Qn.prototype,"canRedo",null),m([w()],Qn.prototype,"onEnd",void 0),m([w()],Qn.prototype,"undo",null),m([w()],Qn.prototype,"redo",null),m([w()],Qn.prototype,"toggleTool",void 0),m([w()],Qn.prototype,"addToSelection",void 0),m([w()],Qn.prototype,"removeFromSelection",void 0),Qn=m([H("esri.widgets.Sketch.support.OperationHandle")],Qn);let Z4=class extends Qn{};m([w()],Z4.prototype,"activeComponent",void 0),Z4=m([H("esri.widgets.Sketch.support.OperationHandle.CreateOperationHandle")],Z4);let Gh=class extends Qn{};m([w()],Gh.prototype,"activeComponent",void 0),Gh=m([H("esri.widgets.Sketch.support.OperationHandle.UpdateOperationHandle")],Gh);const BK={defaultZ:0},Dw={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,highlightOptions:{enabled:!0},tool:"transform"};let pi=class extends Us.EventedAccessor{constructor(e){var t;super(e),this._numUpdating=0,this._defaultSnappingManager=null,this._internalGraphicsLayer=new Qpe({listMode:"hide",internal:!0,title:"SVM Internal"}),this._operationHandle=null,this._viewHandlesKey="viewHandles",this.activeFillSymbol=null,this.activeLineSymbol=null,this.activeVertexSymbol=null,this.allowDeleteKey=!0,this.layer=null,this.pointSymbol=new Dn({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new gl({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new us({color:[130,130,130,1],width:2}),this.meshSymbol=new k2({symbolLayers:new Oe([new Lf])}),this.updateGraphics=new Oe,this.updateOnGraphicClick=!0,this.vertexSymbol=new Dn({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.sketchOptions=new Jfe,this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._originalPopupEnabled=null,this.defaultCreateOptions=BK,this.defaultUpdateOptions=Dw,this.snappingOptions=((t=e==null?void 0:e.snappingManager)==null?void 0:t.options)??(e==null?void 0:e.snappingOptions)??new jj}initialize(){this.addHandles([Lr(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.layers},"change",e=>{e.removed.includes(this.layer)&&this.cancel()}),Lr(()=>{var e;return(e=this.layer)==null?void 0:e.graphics},"change",e=>{if(this._operationHandle!=null)for(const t of e.removed)this.updateGraphics.includes(t)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(t):this._operationHandle.cancel())}),me(()=>{var e;return((e=this.layer)==null?void 0:e.elevationInfo)??null},e=>{e!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=e)},Ln),me(()=>this.view,e=>{this._defaultSnappingManager=Jt(this._defaultSnappingManager),e&&(this.snappingManager||(this._defaultSnappingManager=new Xl({view:e,options:this.snappingOptions})),e.type==="2d"?ce(()=>import("./editingTools-CT1tL42F.js"),__vite__mapDeps([268,269,270,271,272,226,77,227,42,38,273,40,266,70,113,88,274,120,111,275,164,276]),import.meta.url):e.type==="3d"&&(ce(()=>import("./ImageMaterial.glsl-tzqoBoHj.js").then(t=>t.e),__vite__mapDeps([277,272,226,77,227,42,38,273,40,266,89,29,88,278,81,41,108,96,95,33,109,110,66,111,112,27,32,113,117,118,119,120,78,26,28,93,114,115,34,35,116,58,279,280,70,31,270,271,274,281,282,283,221,284,285,275,164]),import.meta.url),ce(()=>import("./LineCallout.glsl-yTAqaJw0.js").then(t=>t.G),__vite__mapDeps([286,278,81,77,40,41,108,96,95,33,109,110,66,111,88,29,112,27,32,113,117,118,119,42,38,120,78,89,26,28,93,53,122,92,94,121,15,16,10,12,166,165,134,135,21,287,161]),import.meta.url)))},Ln),me(()=>{var e;return(e=this.view)==null?void 0:e.spatialReference},(e,t)=>{e&&t&&!e.equals(t)&&this.cancel()})]),fXe(this)}destroy(){this.cancel(),this._removeDefaultLayer(),this._defaultSnappingManager=Jt(this._defaultSnappingManager),this._set("snappingManager",null),this._set("view",null),this.emit("destroy")}get updating(){return this._numUpdating>0||this.snappingManager!=null&&this.snappingManager.updating}get activeTool(){var e;return((e=this._operationHandle)==null?void 0:e.tool)??null}get activeTooltip(){const{activeComponent:e,destroyed:t}=this,i=!t&&e&&"tooltip"in e?e.tooltip:null;return i!=null&&i.visible?i:null}get activeComponent(){var e;return((e=this._operationHandle)==null?void 0:e.activeComponent)??null}get createGraphic(){return this.activeComponent==null||this.activeComponent.type!=="draw-3d"&&this.activeComponent.type!=="draw-2d"?this._get("createGraphic"):this.activeComponent.graphic}get defaultCreateOptions(){return this._get("defaultCreateOptions")}set defaultCreateOptions(e){this._set("defaultCreateOptions",{...BK,...e})}get defaultUpdateOptions(){return this._get("defaultUpdateOptions")}set defaultUpdateOptions(e){this._set("defaultUpdateOptions",{...Dw,...e,reshapeOptions:{...Dw.reshapeOptions,...e==null?void 0:e.reshapeOptions},highlightOptions:{...Dw.highlightOptions,...e==null?void 0:e.highlightOptions}})}get labelOptions(){return this.sketchOptions.labels}set labelOptions(e){this.sketchOptions.labels=e}get snappingOptions(){var e;return((e=this.snappingManager)==null?void 0:e.options)??this._get("snappingOptions")}set snappingOptions(e){this._defaultSnappingManager!=null&&(this._defaultSnappingManager.options=e),this._set("snappingOptions",e)}get snappingManager(){return this._isOverridden("snappingManager")&&this._get("snappingManager"),this._defaultSnappingManager}set snappingManager(e){if(e)this._isOverridden("snappingManager")||(this._defaultSnappingManager=Jt(this._defaultSnappingManager)),this._override("snappingManager",e);else{const{view:t}=this;!this._defaultSnappingManager&&t&&(this._defaultSnappingManager=new Xl({options:this.snappingOptions,view:t})),this._clearOverride("snappingManager")}}get state(){var i;const e=!(!((i=this.view)!=null&&i.ready)||!this.layer),t=this._operationHandle;return e&&t?"active":e?"ready":"disabled"}get tooltipOptions(){return this.sketchOptions.tooltips}set tooltipOptions(e){this.sketchOptions.tooltips=e}get valueOptions(){return this.sketchOptions.values}set valueOptions(e){this.sketchOptions.values=e}get view(){return this._get("view")}set view(e){const t=this._get("view");if(t){const{container:r,map:n}=t;r&&(t.cursor=null),n==null||n.remove(this._internalGraphicsLayer),this.removeHandles(this._viewHandlesKey),this.cancel()}const i="view-ready";this.removeHandles(i),e&&this.addHandles(rn(()=>e.ready,r=>{this.removeHandles(this._viewHandlesKey),r&&this.addHandles(this._generateViewHandles(e),this._viewHandlesKey)},Ln),i),this._set("view",e)}cancel(){this._moduleLoaderAbortController=Ec(this._moduleLoaderAbortController),this._viewReadyAbortController=Ec(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){const{state:e,updateGraphics:t}=this;if(e==="active"&&t.length){const{activeTool:i,layer:r}=this,n=t.toArray();r.removeMany(n),this.cancel(),this._emitDeleteEvent({graphics:n,tool:i})}}duplicate(){if(this.state==="active"&&this.updateGraphics.length){const e=this.updateGraphics.map(t=>t.clone()).toArray();return this.layer.addMany(e),this.emit("duplicate",{graphics:e,type:"duplicate"}),e}return[]}async create(e,t){this.cancel(),await this._waitViewReady();const{view:i,layer:r}=this;if(!i||this.state==="disabled")throw r||this._logMissingLayer(),wi();if(i.activeTool!=null&&(i.activeTool=null),!e)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");$K(i,this._internalGraphicsLayer);const n=await this._setupCreateOperation(e,t);if(n==null||this.destroyed)return void i.map.remove(this._internalGraphicsLayer);const o=()=>{var u;if(n===this._operationHandle){const f=this.createGraphic,g=this._operationHandle.cancelled;this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),(u=this.view)!=null&&u.map&&this.view.map.remove(this._internalGraphicsLayer),n.cancelled||f==null||r.add(f),this.emit("create",{graphic:f,state:g?"cancel":"complete",tool:e,toolEventInfo:null,type:"create"})}};n.on("complete",o),this._operationHandle=n,i.ready&&i.focus()}async place(e,t){return this.create("mesh",{mode:"click",hasZ:e.hasZ,geometryToPlace:e,...t})}async update(e,t){this.cancel(),await this._waitViewReady();const{layer:i,view:r,state:n}=this;if(!r||n==="disabled")throw i||this._logMissingLayer(),wi();r.activeTool!=null&&(r.activeTool=null);const o=Array.isArray(e)?e:[e];if(e==null||!(o!=null&&o.length))return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(o.some(f=>f.layer!==i?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):f.geometry==null&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0)))return;const u=await this._setupUpdateOperation(o,t);this.destroyed||u==null||qr(u)||($K(r,this._internalGraphicsLayer),this._setUpdateOperationHandle(u,t),this.emit("update",{graphics:o,state:"start",aborted:!1,tool:u.tool,toolEventInfo:null,type:"update"}))}async _updateSpatialReference(e){const t=this.view;if(t){this._beginAsyncOperation(),e=Array.isArray(e)?e:[e];for(const i of e)i.geometry==null||i.geometry.type==="mesh"||pr(i.geometry.spatialReference,t.spatialReference)||(Sa(i.geometry.spatialReference,t.spatialReference)||Dc()||await Oc(),i.geometry=dl(i.geometry,t.spatialReference));this._endAsyncOperation()}else this._logMissingView()}undo(){var e;this.canUndo()&&((e=this._operationHandle)==null||e.undo())}redo(){var e;this.canRedo()&&((e=this._operationHandle)==null||e.redo())}canUndo(){var e;return!!((e=this._operationHandle)!=null&&e.canUndo())}canRedo(){var e;return!!((e=this._operationHandle)!=null&&e.canRedo())}toggleUpdateTool(){var e;(e=this._operationHandle)==null||e.toggleTool()}async _getFirstHit(e){const t=this.view;if(!t)return this._logMissingView(),null;if(t.type==="2d"){const n=[];t.map.allLayers.forEach(u=>{u.type!=="vector-tile"&&u.type!=="imagery"||n.push(u)});const o=await t.hitTest(e,{exclude:n});return oet(o.results)}const i=[t.map.ground];t.map.allLayers.forEach(n=>{lEe(n.type)&&i.push(n)});const r=await t.hitTest(e,{exclude:i});if(r.results.length>0){const n=r.results[0];if(n!=null&&n.type==="graphic"&&n.graphic&&(!r.ground.mapPoint||t.map.ground.opacity<1||r.ground.distance-(n.distance??0)>-Math.min(3*r.ground.distance,t.viewingMode==="global"?Yte(t.renderCoordsHelper.spatialReference).radius/t.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return n}return null}_generateViewHandles(e){return[e.on("immediate-click",async t=>{var o;const i=this.state==="active"&&((o=this._operationHandle)==null?void 0:o.type)==="create";if(this.state==="disabled"||i||!this.updateOnGraphicClick)return;this._beginAsyncOperation();const r=await t.async(()=>this._getFirstHit(Ha(t)));let n=null;if(r!=null){const u=r.graphic;this.updateGraphics.includes(u)||u.layer===this.layer?(t.stopPropagation(),n=u):e.type!=="2d"||this._isComponentGraphic(u)||this.state!=="active"||this.cancel()}else this.state==="active"&&this.cancel();n==null||this.updateGraphics.includes(n)||await this.update([n],{...this.defaultUpdateOptions,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions}}),this._endAsyncOperation()},Ii.WIDGET)]}async _setupCreateOperation(e,t){const i=this.view;if(!i)return this._logMissingView(),null;const r={hasZ:i.type==="3d",...this.defaultCreateOptions,...t},n=await this._setupDrawGraphicTool(e,i,r);return n==null?null:(i.tools.add(n),i.activeTool=n,this._setupCreateOperationHandle(n))}async _setupDrawGraphicTool(e,t,i){if(e==="multipoint"&&t.type==="3d")return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;if(!t)return this._logMissingView(),null;const{cursor:r,defaultZ:n,hasZ:o,geometryToPlace:u,graphicProperties:f,mode:g,preserveAspectRatio:b}=i,E=e==="rectangle"||e==="circle"?"hybrid":"click",I=b??e!=="rectangle",M={centered:e!=="rectangle"&&!(e==="circle"&&!I),cursor:r,defaultZ:n,forceUniformSize:I,graphicProperties:f,geometryToPlace:u,geometryType:e,graphicSymbol:this._getGraphicSymbolFromTool(e),hasZ:o,mode:g??E,snappingManager:this.snappingManager,snapToScene:!1,view:t};return t.type==="2d"?this._makeDrawGraphicTool2D(M):this._makeDrawGraphicTool3D(M)}async _makeDrawGraphicTool2D(e){const t=await this._requireModule(ce(()=>import("./editingTools-CT1tL42F.js"),__vite__mapDeps([268,269,270,271,272,226,77,227,42,38,273,40,266,70,113,88,274,120,111,275,164,276]),import.meta.url));return qr(t)||this.destroyed?null:new t.module.DrawGraphicTool2D({...e,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:uet(e.geometryType)?this.activeFillSymbol:null,sketchOptions:this.sketchOptions})}async _makeDrawGraphicTool3D(e){const t=await this._requireModule(ce(()=>import("./ImageMaterial.glsl-tzqoBoHj.js").then(r=>r.e),__vite__mapDeps([277,272,226,77,227,42,38,273,40,266,89,29,88,278,81,41,108,96,95,33,109,110,66,111,112,27,32,113,117,118,119,120,78,26,28,93,114,115,34,35,116,58,279,280,70,31,270,271,274,281,282,283,221,284,285,275,164]),import.meta.url));if(qr(t)||this.destroyed)return null;const{elevationInfo:i}=this.layer;return new t.module.DrawGraphicTool3D({...e,elevationInfo:i,snapToScene:!0,sketchOptions:this.sketchOptions})}_setupCreateOperationHandle(e){const t=this.view;if(!t)return this._logMissingView(),null;let i=null;const r=e.forceUniformSize,n=e.centered,o=[t.on("key-down",f=>{if(f.key===Er.pan)f.stopPropagation(),f.repeat||(e.enabled=!1);else if(f.key===Er.complete)f.stopPropagation(),e.completeCreateOperation();else if(f.key!==Er.vertexAdd||f.repeat)f.key===Er.undo?(f.stopPropagation(),u.undo()):f.key===Er.redo?(f.stopPropagation(),u.redo()):f.key!==Er.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"||f.repeat?f.key===Er.center&&(f.repeat||(e.centered=!n,f.stopPropagation())):(e.forceUniformSize=!r,f.stopPropagation());else{const g=e.drawOperation.geometryType;g!=="polyline"&&g!=="polygon"&&g!=="multipoint"||(f.stopPropagation(),e.drawOperation.commitStagedVertex())}},Ii.WIDGET),t.on("key-up",f=>{f.key===Er.pan?e.enabled=!0:f.key!==Er.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"?f.key===Er.center&&(e.centered=n,f.stopPropagation()):(e.forceUniformSize=r,f.stopPropagation())},Ii.WIDGET),e.on("vertex-add",f=>{switch(i=i==null?"start":"active",f.operation){case"apply":this.emit("create",{graphic:e.graphic,state:i,tool:this.activeTool,toolEventInfo:f,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}}),e.on("cursor-update",f=>{e.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:{coordinates:f.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),e.on("vertex-remove",f=>{switch(f.operation){case"apply":this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:f,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}}),e.on("complete",f=>{this._set("createGraphic",f.graphic),i="complete",f.aborted?u&&u.cancel():u&&u.complete()}),me(()=>this._getGraphicSymbolFromTool(e.geometryType),f=>{e.graphicSymbol=f})],u=new Z4({activeComponent:e,tool:e.geometryType,type:"create",onEnd:()=>{var f;Cu(o),(f=t.tools)==null||f.remove(e)},undo:()=>{e.canUndo&&e.undo()},redo:()=>{e.canRedo&&e.redo()},canUndo:()=>e.canUndo,canRedo:()=>e.canRedo});return u}_getGraphicSymbolFromTool(e){switch(e){case"point":case"multipoint":return this.pointSymbol;case"polyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":return this.polygonSymbol;case"mesh":return this.meshSymbol}}async _setupUpdateOperation(e,t){var u;const{layer:i,view:r}=this;if(!r)return this._logMissingView(),null;const n={...this.defaultUpdateOptions,...t,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,...t==null?void 0:t.reshapeOptions},highlightOptions:{...this.defaultUpdateOptions.highlightOptions,...t==null?void 0:t.highlightOptions}};let o=n.tool??Dw.tool;for(const f of e)i.remove(f),i.add(f);if(r.type==="3d"){if(e.length===0)return null;switch(o){case"move":return this._setupMove3DOperation(e,n,r,o);case"reshape":return e.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupReshape3DOperation(e[0],n,r);case"transform":return this._setupGraphicTransform3DOperation(e,n,r)}}switch(o){case"move":return this._setupMove2DOperation(e,n,r);case"reshape":return e.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupTransformOrReshape2DOperation(e,o,n,r);case"transform":if(e.length===1){const f=(u=e[0].geometry)==null?void 0:u.type;f!=="point"&&f!=="multipoint"||(o="reshape")}return this._setupTransformOrReshape2DOperation(e,o,n,r)}}async _setupMove3DOperation(e,t,i,r,n=!1){const o=await this._requireModule(ce(()=>import("./ImageMaterial.glsl-tzqoBoHj.js").then(k=>k.e),__vite__mapDeps([277,272,226,77,227,42,38,273,40,266,89,29,88,278,81,41,108,96,95,33,109,110,66,111,112,27,32,113,117,118,119,120,78,26,28,93,114,115,34,35,116,58,279,280,70,31,270,271,274,281,282,283,221,284,285,275,164]),import.meta.url));if(qr(o))return o;const{ManipulatedObject3DGraphic:u,MoveTool3D:f}=o.module,g=new Map,b=()=>{g.forEach(k=>k.destroy()),g.clear()};for(const k of e){const L=new u({view:i,graphic:k}),P=JYe(L);if(P!==Ai.SUPPORTED)return b(),this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${TK(P)}).`),null;g.set(k,L)}const E=new f({view:i,enableZ:t.enableZ,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});i.tools.add(E),E.objects.addMany(Array.from(g.values())),n||this.updateGraphics.addMany(e);const I=[],M=new Gh({activeComponent:E,tool:r,type:"update",onEnd:()=>{Cu(I),Vx(i,E),b()},undo:()=>{HK(this.view,E),jx(M,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r})},redo:()=>{zx(M,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r})},addToSelection:k=>{this.updateGraphics.push(k);const L=new u({view:i,graphic:k});g.set(k,L),E.objects.push(L),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[k],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:k=>{const L=this.updateGraphics.indexOf(k);if(M.history.undo.forEach(D=>D.updates.splice(L,1)),M.history.redo.forEach(D=>D.updates.splice(L,1)),this.updateGraphics.remove(k),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[k],type:"selection-change"},type:"update"}),this.updateGraphics.length===0)return void M.complete();const P=g.get(k);P&&(E.objects.remove(P),P.destroy(),g.delete(k))},toggleTool:async()=>{if(this.updateGraphics.length!==1||t.toggleToolOnClick===!1||r!=="transform")return;const k=this.updateGraphics.at(0),L=await this._setupReshape3DOperation(k,t,i,!0);L&&!qr(L)&&(M.onEnd(),M.destroy(),this._setUpdateOperationHandle(L,t))}});return I.push(...this._getHandlesForComponent(M,t),i.on("immediate-click",k=>this._getCommonUpdateOperationClickHandlers(M,k,t),Ii.WIDGET),i.on("key-down",k=>{this._getCommonUpdateOperationKeyDownHandlers(M,k)},Ii.WIDGET)),M}_setupGraphicTransform3DOperation(e,t,i,r=!1){if(e.length===1&&XYe(e[0])===Ai.SUPPORTED){const n=e[0],o=n.geometry;if(o!=null&&(o.type==="point"||o.type==="mesh"))return this._setupPointTransform3DOperation(n,t,i);if(o!=null&&(o.type==="polygon"||o.type==="polyline"))return this._setupPolyTransform3DOperation(n,t,i,r)}return this._setupMove3DOperation(e,t,i,"transform",r)}async _setupPointTransform3DOperation(e,t,i){const r="transform",{enableRotation:n,enableScaling:o,enableZ:u}=t,f=await this._requireModule(ce(()=>import("./ImageMaterial.glsl-tzqoBoHj.js").then(L=>L.e),__vite__mapDeps([277,272,226,77,227,42,38,273,40,266,89,29,88,278,81,41,108,96,95,33,109,110,66,111,112,27,32,113,117,118,119,120,78,26,28,93,114,115,34,35,116,58,279,280,70,31,270,271,274,281,282,283,221,284,285,275,164]),import.meta.url));if(qr(f))return f;const{TransformTool3D:g,ManipulatedObject3DGraphic:b}=f.module,E=new b({graphic:e,view:i}),I=new g({object:E,view:i,enableRotation:n,enableScaling:o,enableZ:u,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});i.tools.add(I),this.updateGraphics.add(e);const M=[],k=new Gh({activeComponent:I,tool:r,type:"update",onEnd:()=>{Cu(M),Vx(i,I),E.destroy()},undo:()=>{HK(this.view,I),jx(k,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r})},redo:()=>{zx(k,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r})},addToSelection:async L=>{this.updateGraphics.add(L),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[L],removed:[],type:"selection-change"},type:"update"}),k.onEnd(),k.destroy();const P=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,i,"transform",!0);qr(P)||this._setUpdateOperationHandle(P,t)},removeFromSelection:L=>{this.updateGraphics.remove(L),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[L],type:"selection-change"},type:"update"}),k.complete()},toggleTool:()=>{}});return M.push(...this._getHandlesForComponent(k,t),i.on("immediate-click",L=>this._getCommonUpdateOperationClickHandlers(k,L,t),Ii.WIDGET),i.on("key-down",L=>{this._getCommonUpdateOperationKeyDownHandlers(k,L)},Ii.WIDGET)),k}async _setupPolyTransform3DOperation(e,t,i,r=!1){var j,z;const n="transform",{enableRotation:o,enableScaling:u,enableZ:f,preserveAspectRatio:g}=t,b=await this._requireModule(ce(()=>import("./ImageMaterial.glsl-tzqoBoHj.js").then(V=>V.e),__vite__mapDeps([277,272,226,77,227,42,38,273,40,266,89,29,88,278,81,41,108,96,95,33,109,110,66,111,112,27,32,113,117,118,119,120,78,26,28,93,114,115,34,35,116,58,279,280,70,31,270,271,274,281,282,283,221,284,285,275,164]),import.meta.url));if(qr(b))return b;const{ManipulatedObject3DGraphic:E,ExtentTransformTool:I}=b.module,M=(z=(j=this.view)==null?void 0:j.inputManager)==null?void 0:z.isModifierKeyDown(Er.constraint),k=new E({view:i,graphic:e}),L=new I({object:k,view:i,enableRotation:o,enableScaling:u,enableZ:f,preserveAspectRatio:!!g!=!!M,sketchOptions:this.sketchOptions});i.tools.add(L),r||this.updateGraphics.add(e);const P=[],D=new Gh({activeComponent:L,tool:n,type:"update",onEnd:()=>{Cu(P),Vx(i,L),k.destroy()},canUndo:()=>!L.destroyed&&L.canUndo,undo:()=>{L.destroyed||(L.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:n}))},canRedo:()=>!L.destroyed&&L.canRedo,redo:()=>{L.destroyed||(L.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:n}))},addToSelection:async V=>{this.updateGraphics.add(V),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[V],removed:[],type:"selection-change"},type:"update"}),D.onEnd(),D.destroy();const W=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,i,"transform",!0);qr(W)||this._setUpdateOperationHandle(W,t)},removeFromSelection:V=>{this.updateGraphics.remove(V),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[V],type:"selection-change"},type:"update"}),D.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||t.toggleToolOnClick===!1)return;const V=await this._setupReshape3DOperation(e,t,i,!0);V&&!qr(V)&&(D.onEnd(),D.destroy(),this._setUpdateOperationHandle(V,t))}});return P.push(...this._getHandlesForComponent(D,t),i.on("immediate-click",V=>this._getCommonUpdateOperationClickHandlers(D,V,t),Ii.WIDGET),i.on("key-down",V=>this._getCommonUpdateOperationKeyDownHandlers(D,V),Ii.WIDGET),i.on("key-down",V=>{V.key!==Er.constraint||V.repeat||(L.preserveAspectRatio=!L.preserveAspectRatio,V.stopPropagation())},Ii.WIDGET),i.on("key-up",V=>{V.key===Er.constraint&&(L.preserveAspectRatio=!L.preserveAspectRatio,V.stopPropagation())},Ii.WIDGET)),D}async _setupMove2DOperation(e,t,i){const r="move";this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const n=await this._getGraphicMover(e,t,i);if(qr(n))return n;const o=new Gh({activeComponent:n,tool:r,type:"update",onEnd:()=>{var b;this._displayDefaultCursor(),Cu(g),Cu(f),n.destroy(),(b=this._internalGraphicsLayer)==null||b.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const b=this.updateGraphics.toArray();jx(o,b),o.refreshComponent(),this._emitUndoEvent({graphics:b,tool:r})},redo:()=>{const b=this.updateGraphics.toArray();zx(o,b),o.refreshComponent(),this._emitRedoEvent({graphics:b,tool:r})},addToSelection:async b=>{await this._updateSpatialReference(b),this.updateGraphics.push(b),n.graphics=this.updateGraphics.toArray(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[b],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:b=>{const E=this.updateGraphics.indexOf(b);o.history.undo.forEach(M=>M.updates.splice(E,1)),o.history.redo.forEach(M=>M.updates.splice(E,1)),this.updateGraphics.remove(b);const I=this.updateGraphics.toArray();this.emit("update",{graphics:I,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[b],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?n.graphics=I:o.complete()}});let u=!1;const f=[i.on("immediate-click",b=>this._getCommonUpdateOperationClickHandlers(o,b,t),Ii.WIDGET),i.on("key-down",b=>{this._getCommonUpdateOperationKeyDownHandlers(o,b),b.key!==Er.constraint||b.repeat||(u=!0,n.enableMoveAllGraphics=!n.enableMoveAllGraphics)},Ii.WIDGET),i.on("key-up",b=>{b.key===Er.constraint&&u&&(u=!1,n.enableMoveAllGraphics=!n.enableMoveAllGraphics)},Ii.WIDGET)],g=this._getHandlesForComponent(o,t);return o}async _setupReshape3DOperation(e,t,i,r=!1){const n="reshape",o=await this._requireModule(ce(()=>import("./ImageMaterial.glsl-tzqoBoHj.js").then(L=>L.e),__vite__mapDeps([277,272,226,77,227,42,38,273,40,266,89,29,88,278,81,41,108,96,95,33,109,110,66,111,112,27,32,113,117,118,119,120,78,26,28,93,114,115,34,35,116,58,279,280,70,31,270,271,274,281,282,283,221,284,285,275,164]),import.meta.url));if(qr(o))return o;const{ManipulatedObject3DGraphic:u,ReshapeTool3D:f}=o.module,g=new u({view:i,graphic:e}),b=KYe(g);if(b!==Ai.SUPPORTED)return g.destroy(),this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${TK(b)}).`),null;const E=t.reshapeOptions,I=new f({view:i,object:g,enableZVertex:t.enableZ&&(E==null?void 0:E.vertexOperation)==="move",enableZShape:t.enableZ&&(E==null?void 0:E.shapeOperation)==="move",enableMoveObject:(E==null?void 0:E.shapeOperation)==="move"||(E==null?void 0:E.shapeOperation)==="move-xy",enableMidpoints:(E==null?void 0:E.edgeOperation)==="split",enableEdgeOffset:(E==null?void 0:E.edgeOperation)==="offset",snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});i.tools.add(I),r||this.updateGraphics.add(g.graphic);const M=[],k=new Gh({activeComponent:I,tool:n,type:"update",onEnd:()=>{Cu(M),Vx(i,I),g.destroy()},canUndo:()=>!I.destroyed&&I.canUndo,undo:()=>{I.destroyed||(I.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:n}))},canRedo:()=>!I.destroyed&&I.canRedo,redo:()=>{I.destroyed||(I.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:n}))},addToSelection:async L=>{this.updateGraphics.add(L),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[L],removed:[],type:"selection-change"},type:"update"}),k.onEnd(),k.destroy();const P=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,i,"transform",!0);qr(P)||this._setUpdateOperationHandle(P,t)},removeFromSelection:L=>{this.updateGraphics.remove(L),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[L],type:"selection-change"},type:"update"}),k.complete()},toggleTool:async()=>{if(t.toggleToolOnClick===!1)return;k.onEnd(),k.destroy();const L=await this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),t,i,!0);qr(L)||this._setUpdateOperationHandle(L,t)}});return M.push(...this._getHandlesForComponent(k,t),i.on("immediate-click",L=>this._getCommonUpdateOperationClickHandlers(k,L,t),Ii.WIDGET),i.on("key-down",L=>{this._getCommonUpdateOperationKeyDownHandlers(k,L)},Ii.WIDGET)),k}async _setupTransformOrReshape2DOperation(e,t,i,r){this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const n=t==="transform"?await this._getBox(e,i,r):await this._getReshape(e,i,r);if(qr(n))return n;const o=new Gh({activeComponent:n,type:"update",onEnd:()=>{Cu(f),Cu(u),o.activeComponent&&!o.activeComponent.destroyed&&o.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{jx(o,this.updateGraphics.toArray()),o.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:o.tool})},redo:()=>{zx(o,this.updateGraphics.toArray()),o.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:o.tool})},addToSelection:async g=>{let b=o.activeComponent;if((b==null?void 0:b.type)==="reshape"){const E=[...this.updateGraphics,g];this.updateGraphics.removeAll(),o.onEnd(),o.destroy();const I=await this._setupTransformOrReshape2DOperation(E,"transform",i,r);if(qr(I))return;this._setUpdateOperationHandle(I,i)}else this.updateGraphics.add(g),b.graphics=this.updateGraphics.toArray(),b.refresh(),o.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[g],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:async g=>{const b=this.updateGraphics.indexOf(g);o.history.undo.forEach(I=>I.updates.splice(b,1)),o.history.redo.forEach(I=>I.updates.splice(b,1)),this.updateGraphics.remove(g);const E=this.updateGraphics.toArray();if(E.length===0)o.complete();else{const I=E[0].geometry;E.length!==1||I==null||I.type!=="point"&&I.type!=="multipoint"?o.activeComponent.graphics=E:o.toggleTool()}this.emit("update",{graphics:E,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[g],type:"selection-change"},type:"update"})},toggleTool:async()=>{var I;if(this.updateGraphics.length>1)return;const g=this.updateGraphics.at(0),b=g.geometry;if(b!=null&&(o.tool==="reshape"&&(b.type==="point"||b.type==="multipoint")||o.tool==="transform"&&b.type==="extent"))return;let E=null;o.tool==="transform"?E=await this._getReshape([g],i,r):o.tool==="reshape"&&(E=await this._getBox([g],i,r)),qr(E)||((I=o.activeComponent)==null||I.destroy(),o.activeComponent=E,o.activeComponent&&(Cu(f),f=this._getHandlesForComponent(o,i)))}}),u=[r.on("immediate-click",g=>this._getCommonUpdateOperationClickHandlers(o,g,i),Ii.WIDGET),r.on("key-down",g=>{if(this._getCommonUpdateOperationKeyDownHandlers(o,g),g.key===Er.constraint&&!g.repeat&&o){const b=o.activeComponent;b&&b.type==="box"&&(b.preserveAspectRatio=!b.preserveAspectRatio)}},Ii.WIDGET),r.on("key-up",g=>{if(g.key===Er.constraint&&o){const b=o.activeComponent;b&&b.type==="box"&&(b.preserveAspectRatio=!b.preserveAspectRatio)}},Ii.WIDGET)];let f=this._getHandlesForComponent(o,i);return o}async _getGraphicMover(e,t,i){const{enableMoveAllGraphics:r,highlightOptions:n}=t,o=await this._requireModule(ce(()=>import("./GraphicMover-T_eSXt7I.js").then(u=>u.G),__vite__mapDeps([288,276,275,164]),import.meta.url));return qr(o)?o:new o.module.default({enableMoveAllGraphics:r,highlightsEnabled:!!(n!=null&&n.enabled),indicatorsEnabled:!1,graphics:e,view:i,callbacks:{onGraphicMoveStart:({dx:u,dy:f,graphic:g})=>{this._displayGrabbingCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:u,dy:f,mover:g,type:"move-start"},type:"update"})},onGraphicMove:({dx:u,dy:f,graphic:g})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:u,dy:f,mover:g,type:"move"},type:"update"}),onGraphicMoveStop:({dx:u,dy:f,graphic:g})=>{this._displayPointerCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:u,dy:f,mover:g,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})}async _getBox(e,t,i){var b,E;const{enableRotation:r,enableScaling:n,highlightOptions:o,preserveAspectRatio:u}=t,f=await this._requireModule(ce(()=>import("./Box-CkNHzMZE.js"),__vite__mapDeps([289,276,288,275,164,290,272,226,77,227,42,38,273,40,266,285,282]),import.meta.url));if(qr(f))return f;const g=(E=(b=this.view)==null?void 0:b.inputManager)==null?void 0:E.isModifierKeyDown(Er.constraint);return new f.module.default({graphics:e,enableRotation:r,enableScaling:n,highlightsEnabled:!!(o!=null&&o.enabled),preserveAspectRatio:!!u!=!!g,layer:this._internalGraphicsLayer,view:i,sketchOptions:this.sketchOptions,callbacks:{onMoveStart:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"}),onMove:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"}),onMoveStop:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"}),onScaleStart:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"}),onScale:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"}),onScaleStop:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"}),onRotateStart:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"}),onRotate:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"}),onRotateStop:I=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...I},type:"update"})}})}async _getReshape(e,t,i){var f,g,b;const r=((f=t.reshapeOptions)==null?void 0:f.edgeOperation)==="split",n=((g=t.reshapeOptions)==null?void 0:g.shapeOperation)==="move",o=!!((b=t.highlightOptions)!=null&&b.enabled),u=await this._requireModule(ce(()=>import("./Reshape-m2XiJIHc.js"),__vite__mapDeps([291,269,270,271,272,226,77,227,42,38,273,40,266,70,113,88,276,288,275,164,281,282,290]),import.meta.url));return qr(u)?u:new u.module.default({enableMidpoints:r,enableMovement:n,graphic:e[0],highlightsEnabled:o,layer:this._internalGraphicsLayer,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions,view:i,callbacks:{onReshapeStart:E=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...E},type:"update"}),onReshape:E=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...E},type:"update"}),onReshapeStop:({mover:E,type:I})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:E,type:I},type:"update"}),onMoveStart:({dx:E,dy:I,mover:M,type:k})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:E,dy:I,mover:M,type:k},type:"update"}),onMove:({dx:E,dy:I,mover:M,type:k})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:E,dy:I,mover:M,type:k},type:"update"}),onMoveStop:({dx:E,dy:I,mover:M,type:k})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:E,dy:I,mover:M,type:k},type:"update"}),onVertexAdd:({added:E,type:I,vertices:M})=>{const k=E.map(L=>SU(L.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:k,vertices:M,type:I},type:"update"})},onVertexRemove:({removed:E,type:I,vertices:M})=>{const k=E.map(L=>SU(L.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:k,vertices:M,type:I},type:"update"})}}})}_getHandlesForComponent(e,t){const i=e.activeComponent;if(!i)return[];switch(i.type){case"graphic-mover":return[i.on("graphic-click",({graphic:r,viewEvent:n})=>{var o;(o=n.native)!=null&&o.shiftKey&&(n.stopPropagation(),e.removeFromSelection(r))}),i.on("graphic-move-start",r=>e.addToHistory(Pd(r.allGraphics)))];case"box":return[i.on("graphic-click",r=>this._onTransformOrReshape2DGraphicClick(e,t,r)),i.on("move-start",r=>e.addToHistory(Pd(r.graphics))),i.on("rotate-start",r=>e.addToHistory(Pd(r.graphics))),i.on("scale-start",r=>e.addToHistory(Pd(r.graphics)))];case"reshape":return[i.on("graphic-click",r=>this._onTransformOrReshape2DGraphicClick(e,t,r)),i.on("move-start",r=>e.addToHistory(Pd([r.mover]))),i.on("reshape-start",r=>e.addToHistory(Pd([r.graphic]))),i.on("vertex-add",r=>e.addToHistory(Pd([r.oldGraphic]))),i.on("vertex-remove",r=>e.addToHistory(Pd([r.oldGraphic])))];case"move-3d":return[i.events.on("record-undo",({updates:r})=>{e.addToHistory({updates:r})}),i.events.on("move-start",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:r.objects.length>0?r.objects[0].graphic:null,type:"move-start"},type:"update"})}),i.events.on("move",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:r.dx,dy:r.dy,mover:r.objects.length>0?r.objects[0].graphic:null,type:"move"},type:"update"})}),i.events.on("move-stop",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:r.objects.length>0?r.objects[0].graphic:null,type:"move-stop"},type:"update"})}),i.events.on("immediate-click",r=>{r.shiftKey?this._toggleSelection([r.object.graphic],e,t):e.toggleTool()})];case"transform-3d":return[i.events.on("record-undo",({updates:r})=>{e.addToHistory({updates:r})}),i.events.on("translate-start",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.object.graphic,dx:r.dxScreen,dy:r.dyScreen,type:"move-start"},type:"update"})}),i.events.on("translate-stop",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.object.graphic,dx:r.dxScreen,dy:r.dyScreen,type:"move-stop"},type:"update"})}),i.events.on("rotate-start",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.object.graphic,angle:r.angle,type:"rotate-start"},type:"update"})}),i.events.on("rotate-stop",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.object.graphic,angle:r.angle,type:"rotate-stop"},type:"update"})}),i.events.on("scale-start",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.object.graphic,xScale:r.xScale,yScale:r.yScale,type:"scale-start"},type:"update"})}),i.events.on("scale-stop",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.object.graphic,xScale:r.xScale,yScale:r.yScale,type:"scale-stop"},type:"update"})}),i.events.on("translate",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.object.graphic,dx:r.dxScreen,dy:r.dyScreen,type:"move"},type:"update"})}),i.events.on("rotate",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.object.graphic,angle:r.angle,type:"rotate"},type:"update"})}),i.events.on("scale",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.object.graphic,xScale:r.xScale,yScale:r.yScale,type:"scale"},type:"update"})}),i.events.on("immediate-click",r=>{r.shiftKey?this._toggleSelection([r.object.graphic],e,t):e.toggleTool()})];case"reshape-3d":return[i.events.on("reshape",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...r,mover:r.object.graphic},type:"update"})}),i.events.on("move",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...r,mover:r.object.graphic},type:"update"})}),i.events.on("vertex-add",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:r,type:"update"})}),i.events.on("vertex-remove",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:r,type:"update"})}),i.events.on("immediate-click",r=>{r.shiftKey?this._toggleSelection([r.object.graphic],e,t):e.toggleTool()})]}}_onTransformOrReshape2DGraphicClick(e,t,i){var o;const{graphic:r,viewEvent:n}=i;return(o=n.native)!=null&&o.shiftKey&&r.layer===this.layer?(n.stopPropagation(),e.removeFromSelection(r)):t.toggleToolOnClick?(n.stopPropagation(),e.toggleTool()):void 0}_setUpdateOperationHandle(e,t){var n;this._operationHandle=e;const i=(n=this.view)==null?void 0:n.map;this._disablePopup(t);const r=()=>{if(e===this._operationHandle){const o=this.updateGraphics.toArray(),u=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),i&&i.remove(this._internalGraphicsLayer),this._restorePopup(t),this.emit("update",{graphics:o,state:"complete",aborted:e.cancelled,tool:u,toolEventInfo:null,type:"update"})}};e.on("complete",r)}async _getCommonUpdateOperationClickHandlers(e,t,i){const r=Ha(t),n=await t.async(()=>this._getFirstHit(r));if(n==null)return void e.complete();if(t.native.shiftKey&&this._toggleSelection([n.graphic],e,i))return void t.stopPropagation();this.updateGraphics.includes(n.graphic)?t.stopPropagation():e.complete()}_toggleSelection(e,t,i){const r=!!i.multipleSelectionEnabled;return e.some(n=>n!=null&&!(!r||n.layer!==this.layer)&&(this.updateGraphics.includes(n)?t.removeFromSelection(n):t.addToSelection(n),!0))}_getCommonUpdateOperationKeyDownHandlers(e,t){if(!e)return;const i=t.key;i===Er.undo&&e.canUndo()?(t.stopPropagation(),e.undo()):i===Er.redo&&e.canRedo()?(t.stopPropagation(),e.redo()):i===Er.cancel?(t.stopPropagation(),e.cancel()):this.allowDeleteKey&&Er.delete.includes(i)&&this._onDeleteKey(t)}_onDeleteKey(e){var r;if(!this._operationHandle||this._operationHandle.type!=="update")return;const t=this.activeComponent,i=this.updateGraphics.toArray();t!=null&&(t.type!=="reshape"||i.length===1&&((r=i[0].geometry)==null?void 0:r.type)==="point")&&(e.stopPropagation(),this.delete())}_removeDefaultLayer(){var e,t;this._internalGraphicsLayer&&((t=(e=this.view)==null?void 0:e.map)==null||t.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=Jt(this._internalGraphicsLayer))}_isComponentGraphic(e){var i;const{activeComponent:t}=this;return!(!e||t==null)&&(((i=e.attributes)==null?void 0:i.esriSketchTool)||t.type==="draw-2d"&&t.graphic===e||(t.type==="box"||t.type==="reshape")&&t.isUIGraphic(e))}_displayPointerCursor(){var e;(e=this.view)!=null&&e.container&&this.view.cursor!=="pointer"&&(this.view.cursor="pointer")}_displayGrabbingCursor(){var e;(e=this.view)!=null&&e.container&&this.view.cursor!=="grabbing"&&(this.view.cursor="grabbing")}_displayDefaultCursor(){var e;(e=this.view)!=null&&e.container&&this.view.cursor!==null&&(this.view.cursor=null)}_logError(e,t,i){Se.getLogger(this).error(new ne(e,t,i))}async _requireModule(e){const t=new AbortController;this._moduleLoaderAbortController=t;const i=await e;return this._moduleLoaderAbortController!==t||t.signal.aborted?{requireError:"aborted"}:{module:i}}_emitUndoEvent(e){this.emit("undo",{...e,type:"undo"})}_emitRedoEvent(e){this.emit("redo",{...e,type:"redo"})}_emitDeleteEvent(e){this.emit("delete",{...e,type:"delete"})}get test(){}wait(){return cl(()=>!this.updating)}_beginAsyncOperation(){this._numUpdating+=1,this.notifyChange("updating")}_endAsyncOperation(){this._numUpdating-=1,this.notifyChange("updating")}_disablePopupEnabled(e){var t;return((t=this.view)==null?void 0:t.type)!=="3d"||this.updateOnGraphicClick||((e==null?void 0:e.toggleToolOnClick)??!1)}_disablePopup(e){this._disablePopupEnabled(e)&&this.view&&this._originalPopupEnabled==null&&(this._originalPopupEnabled=this.view.popupEnabled,this.view.popupEnabled=!1)}_restorePopup(e){this._disablePopupEnabled(e)&&this.view&&this._originalPopupEnabled!=null&&(this.view.popupEnabled=this._originalPopupEnabled,this._originalPopupEnabled=null)}async _waitViewReady(){const e=this.view;e?(Ec(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,await N6(cl(()=>e==null?void 0:e.ready),this._viewReadyAbortController.signal)):this._logMissingView()}_logMissingView(){this._logError("sketch:missing-property",qK("view"))}_logMissingLayer(){this._logError(aet,qK("layer"))}};m([w()],pi.prototype,"_defaultSnappingManager",void 0),m([w()],pi.prototype,"updating",null),m([w()],pi.prototype,"_operationHandle",void 0),m([w({readOnly:!0})],pi.prototype,"activeTool",null),m([w()],pi.prototype,"activeTooltip",null),m([w()],pi.prototype,"activeFillSymbol",void 0),m([w()],pi.prototype,"activeLineSymbol",void 0),m([w()],pi.prototype,"activeVertexSymbol",void 0),m([w()],pi.prototype,"allowDeleteKey",void 0),m([w({readOnly:!0})],pi.prototype,"createGraphic",null),m([w()],pi.prototype,"defaultCreateOptions",null),m([w()],pi.prototype,"defaultUpdateOptions",null),m([w({type:Nj,nonNullable:!0})],pi.prototype,"labelOptions",null),m([w()],pi.prototype,"layer",void 0),m([w({types:il})],pi.prototype,"pointSymbol",void 0),m([w({types:il})],pi.prototype,"polygonSymbol",void 0),m([w({types:il})],pi.prototype,"polylineSymbol",void 0),m([w()],pi.prototype,"meshSymbol",void 0),m([w({type:jj,nonNullable:!0})],pi.prototype,"snappingOptions",null),m([w()],pi.prototype,"snappingManager",null),m([w({readOnly:!0})],pi.prototype,"state",null),m([w({type:Fj,nonNullable:!0})],pi.prototype,"tooltipOptions",null),m([w({readOnly:!0})],pi.prototype,"updateGraphics",void 0),m([w()],pi.prototype,"updateOnGraphicClick",void 0),m([w({type:Dj,nonNullable:!0})],pi.prototype,"valueOptions",null),m([w({types:il})],pi.prototype,"vertexSymbol",void 0),m([w({value:null})],pi.prototype,"view",null),m([w({constructOnly:!0,type:Jfe})],pi.prototype,"sketchOptions",void 0),pi=m([H("esri.widgets.Sketch.SketchViewModel")],pi);const aet="sketch:missing-property",qK=e=>`Property '${e}' is missing on SketchViewModel.`;function uet(e){return e==="polygon"||e==="rectangle"||e==="circle"}function jx(e,t){F0e("undo",e.history.undo,e.history.redo,t)}function zx(e,t){F0e("redo",e.history.redo,e.history.undo,t)}function F0e(e,t,i,r){const n=t.pop();if(!n)return;const o=n.updates,u=[];r.forEach((f,g)=>{const b=o[g];b!=null&&("geometry"in b&&b.geometry!=null&&(u.push({geometry:f.geometry}),f.geometry=b.geometry),"symbol"in b&&b.symbol!=null&&(u.push({symbol:f.symbol}),f.symbol=b.symbol),"undo"in b&&(u.push(b),b[e](f)))}),i.push({updates:u})}function HK(e,t){e!=null&&t.hasGrabbedManipulators&&(e.activeTool=null)}function Pd(e){return{updates:e.map(({geometry:t})=>(t==null?void 0:t.type)==="mesh"?{geometry:t.cloneShallow()}:{geometry:t})}}function Vx(e,t){var i;(i=e.tools)==null||i.remove(t),t.destroyed||t.destroy()}function qr(e){return"requireError"in e&&e.requireError==="aborted"}const cet=pi;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */var het="Expected a function";function det(e,t,i){var r=!0,n=!0;if(typeof e!="function")throw new TypeError(het);return r2(i)&&(r="leading"in i?!!i.leading:r,n="trailing"in i?!!i.trailing:n),ufe(e,t,{leading:r,maxWait:t,trailing:n})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const ho={assistiveText:"assistive-text",characterLimit:"character-limit",content:"content",container:"container",footer:"footer",resizeDisabled:"resize--disabled",resizeDisabledX:"resize--disabled-x",resizeDisabledY:"resize--disabled-y",characterOverLimit:"character--over-limit",readOnly:"readonly",textAreaInvalid:"text-area--invalid",footerSlotted:"footer--slotted",hide:"hide",footerEndSlotOnly:"footer--end-only",textArea:"text-area",textAreaOnly:"text-area--only"},WK={validationMessage:"textAreaValidationMessage"},ZK={footerStart:"footer-start",footerEnd:"footer-end"},pet=100,fet=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:inline-block;block-size:100%;inline-size:100%;--calcite-internal-text-area-border-color:var(--calcite-text-area-border-color, var(--calcite-color-border-input));--calcite-internal-text-area-footer-border-color:var(
    --calcite-text-area-footer-border-color,
    var(--calcite-internal-text-area-border-color)
  )}.text-area,.footer{font-size:var(--calcite-text-area-font-size, var(--calcite-font-size--1));background-color:var(--calcite-text-area-background-color, var(--calcite-color-foreground-1));padding-block:var(--calcite-spacing-sm);padding-inline:var(--calcite-spacing-md)}.text-area{position:relative;margin:0px;box-sizing:border-box;display:block;inline-size:100%;font-family:var(--calcite-font-family);--calcite-internal-text-area-border-block-end-color:var(--calcite-internal-text-area-border-color);border:var(--calcite-border-width-sm) solid var(--calcite-internal-text-area-border-color);border-block-end-color:var(--calcite-internal-text-area-border-block-end-color);color:var(--calcite-text-area-text-color, var(--calcite-color-text-1));font-family:var(--calcite-sans-family);max-block-size:var(--calcite-text-area-max-height);min-block-size:var(--calcite-text-area-min-height);max-inline-size:var(--calcite-text-area-max-width);min-inline-size:var(--calcite-text-area-min-width, 12rem)}.text-area::placeholder{font-weight:var(--calcite-font-weight-normal)}@media screen and (max-width: 480px){.text-area{resize:none}}.text-area:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.text-area.text-area--invalid{--calcite-internal-text-area-border-color:var(--calcite-color-status-danger)}.text-area.text-area--invalid:focus{outline:2px solid var(--calcite-color-status-danger);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.text-area.footer--slotted{min-inline-size:18rem}.text-area:not(.text-area--only,.text-area--invalid){--calcite-internal-text-area-border-block-end-color:var(
    --calcite-text-area-divider-color,
    var(--calcite-color-border-3)
  )}.footer{box-sizing:border-box;display:flex;align-items:center;border:var(--calcite-border-width-sm) solid var(--calcite-internal-text-area-footer-border-color);border-block-start:var(--calcite-border-width-none);min-block-size:2.25rem}.character-limit{display:flex;align-items:center;justify-content:flex-end;white-space:nowrap;font-size:var(--calcite-text-area-font-size, var(--calcite-font-size--1));font-weight:var(--calcite-font-weight-regular);color:var(--calcite-text-area-character-limit-text-color, var(--calcite-color-text-2));padding-inline-start:var(--calcite-spacing-md)}.character--over-limit{font-weight:var(--calcite-font-weight-bold);color:var(--calcite-color-status-danger)}.readonly{background-color:var(--calcite-color-background);font-weight:var(--calcite-font-weight-medium)}.content,.hide{display:none}.container{display:flex;inline-size:100%;justify-content:space-between}.footer--end-only{justify-content:flex-end}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.text-area.text-area--only{block-size:100%}:host([resize=none]) .text-area{resize:none}:host([resize=horizontal]) .text-area{resize:horizontal}:host([resize=vertical]) .text-area{resize:vertical}:host([scale=s]) .text-area,:host([scale=s]) .footer,:host([scale=s]) .character-limit{padding-inline-start:0.5rem;font-size:var(--calcite-text-area-font-size, var(--calcite-font-size--2))}:host([scale=s]) .footer{min-block-size:1.75rem}:host([scale=s]) .text-area{padding-block:0.25rem;padding-inline:0.5rem}:host([scale=m]) .text-area{padding-block:0.5rem;padding-inline:0.75rem}:host([scale=m]) .footer{padding-block:0.5rem;padding-inline:0.75rem;min-block-size:2.25rem}:host([scale=l]) .text-area,:host([scale=l]) .footer{font-size:var(--calcite-text-area-font-size, var(--calcite-font-size-0));padding-block:var(--calcite-spacing-md);padding-inline:var(--calcite-spacing-xl)}:host([scale=l]) .footer{min-block-size:2.75rem}:host([scale=l]) .text-area,:host([scale=l]) .footer,:host([scale=l]) .character-limit{font-size:var(--calcite-text-area-font-size, var(--calcite-font-size-0));padding-inline-start:var(--calcite-spacing-xl)}:host([status=invalid]){--calcite-internal-text-area-border-color:var(--calcite-color-status-danger)}:host([status=invalid]) .text-area:focus{outline:2px solid var(--calcite-color-status-danger);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host([disabled]) .text-area,:host([disabled]) .footer{opacity:var(--calcite-opacity-half)}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:0.5rem}:host([scale=s]) .validation-container{padding-block-start:0.25rem}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,yet=fet,met=fm(class extends pm{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTextAreaInput=hy(this,"calciteTextAreaInput",7),this.calciteTextAreaChange=hy(this,"calciteTextAreaChange",7),this.guid=GQ(),this.handleInput=t=>{this.value=t.target.value,this.calciteTextAreaInput.emit()},this.handleChange=()=>{this.calciteTextAreaChange.emit()},this.contentSlotChangeHandler=()=>{this.value||this.el.childNodes.forEach(i=>{i.nodeName==="#text"&&(this.value=i.nodeValue.trim())})},this.renderCharacterLimit=()=>this.maxLength?(this.localizedCharacterLengthObj=this.getLocalizedCharacterLength(),Be("span",{class:ho.characterLimit},Be("span",{class:{[ho.characterOverLimit]:this.isCharacterLimitExceeded()}},this.localizedCharacterLengthObj.currentLength),"/",this.localizedCharacterLengthObj.maxLength)):null,this.resizeObserver=Q_("resize",async()=>{await zR(this);const{textAreaHeight:t,textAreaWidth:i,elHeight:r,elWidth:n,footerHeight:o,footerWidth:u}=this.getHeightAndWidthOfElements();u>0&&u!==i&&(this.footerEl.style.width=`${i}px`),(n!==i||r!==t+(o||0))&&this.setHeightAndWidthToAuto()}),this.setTextAreaEl=t=>{this.textAreaEl=t,this.resizeObserver.observe(t)},this.setHeightAndWidthToAuto=det(()=>{(this.resize==="vertical"||this.resize==="both")&&(this.el.style.height="auto"),(this.resize==="horizontal"||this.resize==="both")&&(this.el.style.width="auto")},pet,{leading:!1}),this.columns=void 0,this.disabled=!1,this.form=void 0,this.groupSeparator=!1,this.label=void 0,this.minLength=void 0,this.maxLength=void 0,this.messages=void 0,this.validationMessage=void 0,this.validationIcon=void 0,this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.name=void 0,this.numberingSystem=void 0,this.placeholder=void 0,this.readOnly=!1,this.required=!1,this.resize="both",this.rows=void 0,this.scale="m",this.status="idle",this.value="",this.wrap="soft",this.messageOverrides=void 0,this.defaultMessages=void 0,this.endSlotHasElements=void 0,this.startSlotHasElements=void 0,this.effectiveLocale=""}handleGlobalAttributesChanged(){C6(this)}onMessagesChange(){}connectedCallback(){s$(this),Mfe(this),xj(this),Mj(this)}async componentWillLoad(){wj(this),await Tj(this)}componentDidLoad(){bj(this)}componentDidRender(){gj(this),this.setTextAreaHeight()}disconnectedCallback(){var t;Ofe(this),Cfe(this),Ej(this),Cj(this),(t=this.resizeObserver)==null||t.disconnect()}render(){const t=this.startSlotHasElements||this.endSlotHasElements||!!this.maxLength;return Be(Y_,{key:"87f925e13e3a1bef5b85af59a4e61433c3262929"},Be(vj,{key:"3431b47034859c62b0d0116b5ff47189cd46ea0b",disabled:this.disabled},Be("textarea",{key:"78e60318dc05f03f0ec0f0738384b33a7e4ed546","aria-describedby":this.guid,"aria-errormessage":WK.validationMessage,"aria-invalid":CE(this.status==="invalid"||this.isCharacterLimitExceeded()),"aria-label":qR(this),autofocus:this.el.autofocus,class:{[ho.textArea]:!0,[ho.readOnly]:this.readOnly,[ho.textAreaInvalid]:this.isCharacterLimitExceeded(),[ho.footerSlotted]:this.endSlotHasElements&&this.startSlotHasElements,[ho.textAreaOnly]:!t},cols:this.columns,disabled:this.disabled,name:this.name,onChange:this.handleChange,onInput:this.handleInput,placeholder:this.placeholder,readOnly:this.readOnly,ref:this.setTextAreaEl,required:this.required,rows:this.rows,value:this.value,wrap:this.wrap}),Be("span",{key:"54d603509f65611918b788280124499ecf2161cf",class:{[ho.content]:!0}},Be("slot",{key:"e1ffe00ed1eeb26899f372ea9d011da20bcddfeb",onSlotchange:this.contentSlotChangeHandler})),Be("footer",{key:"bb52300f3ba3568e0e325c7e620cb6f5c53cba37",class:{[ho.footer]:!0,[ho.readOnly]:this.readOnly,[ho.hide]:!t},ref:i=>this.footerEl=i},Be("div",{key:"a5c5c250493dab203789dd27ce187c817006c5be",class:{[ho.container]:!0,[ho.footerEndSlotOnly]:!this.startSlotHasElements&&this.endSlotHasElements}},Be("slot",{key:"a54c7b6ca529475fa59cf1849213cd0ec7bf8f9c",name:ZK.footerStart,onSlotchange:i=>this.startSlotHasElements=eu(i)}),Be("slot",{key:"e14af1362fd85e7461c42dd10dfd188d10f59ab0",name:ZK.footerEnd,onSlotchange:i=>this.endSlotHasElements=eu(i)})),this.renderCharacterLimit()),Be(kfe,{key:"b64b6dc288df7eadcf3eef9e17aa931732f4ad09",component:this}),this.isCharacterLimitExceeded()&&Be("span",{key:"fb2017a6f21f4590934d9a1118e5dc5ee29e1dd5","aria-live":"polite",class:ho.assistiveText,id:this.guid},this.replacePlaceHoldersInMessages()),this.validationMessage&&this.status==="invalid"?Be(Pfe,{icon:this.validationIcon,id:WK.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null))}async setFocus(){await _j(this),this.textAreaEl.focus()}async selectText(){await zR(this),this.textAreaEl.select()}effectiveLocaleChange(){$j(this,this.effectiveLocale)}onLabelClick(){this.setFocus()}getLocalizedCharacterLength(){const t=this.value?this.value.length.toString():"0",i=this.maxLength.toString();return this.numberingSystem==="latn"?{currentLength:t,maxLength:i}:(oa.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,signDisplay:"never",useGrouping:this.groupSeparator},{currentLength:oa.localize(t),maxLength:oa.localize(i)})}syncHiddenFormInput(t){t.setCustomValidity(""),this.isCharacterLimitExceeded()&&t.setCustomValidity(this.replacePlaceHoldersInMessages()),Nfe("textarea",this,t)}setTextAreaHeight(){const{textAreaHeight:t,elHeight:i,footerHeight:r}=this.getHeightAndWidthOfElements();r>0&&t+r!=i&&(this.textAreaEl.style.height=`${i-r}px`)}getHeightAndWidthOfElements(){const{height:t,width:i}=this.textAreaEl.getBoundingClientRect(),{height:r,width:n}=this.el.getBoundingClientRect(),{height:o,width:u}=this.footerEl.getBoundingClientRect();return{textAreaHeight:t,textAreaWidth:i,elHeight:r,elWidth:n,footerHeight:o,footerWidth:u}}replacePlaceHoldersInMessages(){return this.messages.tooLong.replace("{maxLength}",this.localizedCharacterLengthObj.maxLength).replace("{currentLength}",this.localizedCharacterLengthObj.currentLength)}isCharacterLimitExceeded(){var t;return((t=this.value)==null?void 0:t.length)>this.maxLength}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{autofocus:["handleGlobalAttributesChanged"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return yet}},[1,"calcite-text-area",{columns:[514],disabled:[516],form:[513],groupSeparator:[516,"group-separator"],label:[1],minLength:[514,"min-length"],maxLength:[514,"max-length"],messages:[1040],validationMessage:[1,"validation-message"],validationIcon:[520,"validation-icon"],validity:[1040],name:[513],numberingSystem:[1,"numbering-system"],placeholder:[1],readOnly:[516,"read-only"],required:[516],resize:[513],rows:[514],scale:[513],status:[513],value:[1025],wrap:[513],messageOverrides:[1040],defaultMessages:[32],endSlotHasElements:[32],startSlotHasElements:[32],effectiveLocale:[32],setFocus:[64],selectText:[64]},void 0,{autofocus:["handleGlobalAttributesChanged"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function get(){if(typeof customElements>"u")return;["calcite-text-area","calcite-icon","calcite-input-message"].forEach(t=>{switch(t){case"calcite-text-area":customElements.get(t)||customElements.define(t,met);break;case"calcite-icon":customElements.get(t)||VS();break;case"calcite-input-message":customElements.get(t)||o$();break}})}get();const vet="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12.728%206.65679L11.314%205.24279L2%2014.5568V15.9708H3.414L12.728%206.65679ZM14.142%205.24279L15.556%203.82879L14.142%202.41479L12.728%203.82879L14.142%205.24279ZM4.242%2017.9708H0V13.7278L13.435%200.292786C13.6225%200.105315%2013.8768%200%2014.142%200C14.4072%200%2014.6615%200.105315%2014.849%200.292786L17.678%203.12179C17.8655%203.30931%2017.9708%203.56362%2017.9708%203.82879C17.9708%204.09395%2017.8655%204.34826%2017.678%204.53579L4.242%2017.9708Z'%20fill='%23666667'/%3e%3c/svg%3e",wet="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12.728%206.65679L11.314%205.24279L2%2014.5568V15.9708H3.414L12.728%206.65679ZM14.142%205.24279L15.556%203.82879L14.142%202.41479L12.728%203.82879L14.142%205.24279ZM4.242%2017.9708H0V13.7278L13.435%200.292786C13.6225%200.105315%2013.8768%200%2014.142%200C14.4072%200%2014.6615%200.105315%2014.849%200.292786L17.678%203.12179C17.8655%203.30931%2017.9708%203.56362%2017.9708%203.82879C17.9708%204.09395%2017.8655%204.34826%2017.678%204.53579L4.242%2017.9708Z'%20fill='%2377993D'/%3e%3c/svg%3e",bet="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M14.75%207H13.4513C13.2841%205.74558%2012.7086%204.58107%2011.8138%203.68622C10.9189%202.79137%209.75442%202.21594%208.5%202.04875V0.75C8.5%200.551088%208.42098%200.360322%208.28033%200.21967C8.13968%200.0790176%207.94891%200%207.75%200C7.55109%200%207.36032%200.0790176%207.21967%200.21967C7.07902%200.360322%207%200.551088%207%200.75V2.04875C5.74558%202.21594%204.58107%202.79137%203.68622%203.68622C2.79137%204.58107%202.21594%205.74558%202.04875%207H0.75C0.551088%207%200.360322%207.07902%200.21967%207.21967C0.0790176%207.36032%200%207.55109%200%207.75C0%207.94891%200.0790176%208.13968%200.21967%208.28033C0.360322%208.42098%200.551088%208.5%200.75%208.5H2.04875C2.21594%209.75442%202.79137%2010.9189%203.68622%2011.8138C4.58107%2012.7086%205.74558%2013.2841%207%2013.4513V14.75C7%2014.9489%207.07902%2015.1397%207.21967%2015.2803C7.36032%2015.421%207.55109%2015.5%207.75%2015.5C7.94891%2015.5%208.13968%2015.421%208.28033%2015.2803C8.42098%2015.1397%208.5%2014.9489%208.5%2014.75V13.4513C9.75442%2013.2841%2010.9189%2012.7086%2011.8138%2011.8138C12.7086%2010.9189%2013.2841%209.75442%2013.4513%208.5H14.75C14.9489%208.5%2015.1397%208.42098%2015.2803%208.28033C15.421%208.13968%2015.5%207.94891%2015.5%207.75C15.5%207.55109%2015.421%207.36032%2015.2803%207.21967C15.1397%207.07902%2014.9489%207%2014.75%207ZM7.75%2012C6.90943%2012%206.08774%2011.7507%205.38883%2011.2837C4.68992%2010.8167%204.14518%2010.153%203.82351%209.3764C3.50184%208.59982%203.41768%207.74529%203.58166%206.92087C3.74565%206.09645%204.15042%205.33917%204.7448%204.7448C5.33917%204.15042%206.09645%203.74565%206.92087%203.58166C7.74529%203.41768%208.59982%203.50184%209.3764%203.82351C10.153%204.14518%2010.8167%204.68992%2011.2837%205.38883C11.7507%206.08774%2012%206.90943%2012%207.75C11.9988%208.87681%2011.5507%209.95715%2010.7539%2010.7539C9.95715%2011.5507%208.87681%2011.9988%207.75%2012Z'%20fill='%23666667'/%3e%3c/svg%3e",_et="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M14.75%207H13.4513C13.2841%205.74558%2012.7086%204.58107%2011.8138%203.68622C10.9189%202.79137%209.75442%202.21594%208.5%202.04875V0.75C8.5%200.551088%208.42098%200.360322%208.28033%200.21967C8.13968%200.0790176%207.94891%200%207.75%200C7.55109%200%207.36032%200.0790176%207.21967%200.21967C7.07902%200.360322%207%200.551088%207%200.75V2.04875C5.74558%202.21594%204.58107%202.79137%203.68622%203.68622C2.79137%204.58107%202.21594%205.74558%202.04875%207H0.75C0.551088%207%200.360322%207.07902%200.21967%207.21967C0.0790176%207.36032%200%207.55109%200%207.75C0%207.94891%200.0790176%208.13968%200.21967%208.28033C0.360322%208.42098%200.551088%208.5%200.75%208.5H2.04875C2.21594%209.75442%202.79137%2010.9189%203.68622%2011.8138C4.58107%2012.7086%205.74558%2013.2841%207%2013.4513V14.75C7%2014.9489%207.07902%2015.1397%207.21967%2015.2803C7.36032%2015.421%207.55109%2015.5%207.75%2015.5C7.94891%2015.5%208.13968%2015.421%208.28033%2015.2803C8.42098%2015.1397%208.5%2014.9489%208.5%2014.75V13.4513C9.75442%2013.2841%2010.9189%2012.7086%2011.8138%2011.8138C12.7086%2010.9189%2013.2841%209.75442%2013.4513%208.5H14.75C14.9489%208.5%2015.1397%208.42098%2015.2803%208.28033C15.421%208.13968%2015.5%207.94891%2015.5%207.75C15.5%207.55109%2015.421%207.36032%2015.2803%207.21967C15.1397%207.07902%2014.9489%207%2014.75%207ZM7.75%2012C6.90943%2012%206.08774%2011.7507%205.38883%2011.2837C4.68992%2010.8167%204.14518%2010.153%203.82351%209.3764C3.50184%208.59982%203.41768%207.74529%203.58166%206.92087C3.74565%206.09645%204.15042%205.33917%204.7448%204.7448C5.33917%204.15042%206.09645%203.74565%206.92087%203.58166C7.74529%203.41768%208.59982%203.50184%209.3764%203.82351C10.153%204.14518%2010.8167%204.68992%2011.2837%205.38883C11.7507%206.08774%2012%206.90943%2012%207.75C11.9988%208.87681%2011.5507%209.95715%2010.7539%2010.7539C9.95715%2011.5507%208.87681%2011.9988%207.75%2012Z'%20fill='%2377993D'/%3e%3c/svg%3e",xet="data:image/svg+xml,%3csvg%20width='19'%20height='19'%20viewBox='0%200%2019%2019'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M14.7778%203V2C14.7778%201.46957%2014.5554%200.960859%2014.1594%200.585786C13.7635%200.210714%2013.2266%200%2012.6667%200H6.33333C5.77343%200%205.23646%200.210714%204.84055%200.585786C4.44464%200.960859%204.22222%201.46957%204.22222%202V3H1.05556C0.775605%203%200.50712%203.10536%200.309165%203.29289C0.11121%203.48043%200%203.73478%200%204C0%204.26522%200.11121%204.51957%200.309165%204.70711C0.50712%204.89464%200.775605%205%201.05556%205H2.11111V16C2.11111%2016.7956%202.44474%2017.5587%203.03861%2018.1213C3.63247%2018.6839%204.43793%2019%205.27778%2019H13.7222C14.5621%2019%2015.3675%2018.6839%2015.9614%2018.1213C16.5553%2017.5587%2016.8889%2016.7956%2016.8889%2016V5H17.9444C18.2244%205%2018.4929%204.89464%2018.6908%204.70711C18.8888%204.51957%2019%204.26522%2019%204C19%203.73478%2018.8888%203.48043%2018.6908%203.29289C18.4929%203.10536%2018.2244%203%2017.9444%203H14.7778ZM12.6667%202H6.33333V3H12.6667V2ZM14.7778%205H4.22222V16C4.22222%2016.2652%204.33343%2016.5196%204.53139%2016.7071C4.72934%2016.8946%204.99783%2017%205.27778%2017H13.7222C14.0022%2017%2014.2707%2016.8946%2014.4686%2016.7071C14.6666%2016.5196%2014.7778%2016.2652%2014.7778%2016V5Z'%20fill='%23666667'/%3e%3cpath%20d='M6.33333%207H8.44444V15H6.33333V7ZM10.5556%207H12.6667V15H10.5556V7Z'%20fill='%23666667'/%3e%3c/svg%3e",Eet="data:image/svg+xml,%3csvg%20width='19'%20height='19'%20viewBox='0%200%2019%2019'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M14.7778%203V2C14.7778%201.46957%2014.5554%200.960859%2014.1594%200.585786C13.7635%200.210714%2013.2266%200%2012.6667%200H6.33333C5.77343%200%205.23646%200.210714%204.84055%200.585786C4.44464%200.960859%204.22222%201.46957%204.22222%202V3H1.05556C0.775605%203%200.50712%203.10536%200.309165%203.29289C0.11121%203.48043%200%203.73478%200%204C0%204.26522%200.11121%204.51957%200.309165%204.70711C0.50712%204.89464%200.775605%205%201.05556%205H2.11111V16C2.11111%2016.7956%202.44474%2017.5587%203.03861%2018.1213C3.63247%2018.6839%204.43793%2019%205.27778%2019H13.7222C14.5621%2019%2015.3675%2018.6839%2015.9614%2018.1213C16.5553%2017.5587%2016.8889%2016.7956%2016.8889%2016V5H17.9444C18.2244%205%2018.4929%204.89464%2018.6908%204.70711C18.8888%204.51957%2019%204.26522%2019%204C19%203.73478%2018.8888%203.48043%2018.6908%203.29289C18.4929%203.10536%2018.2244%203%2017.9444%203H14.7778ZM12.6667%202H6.33333V3H12.6667V2ZM14.7778%205H4.22222V16C4.22222%2016.2652%204.33343%2016.5196%204.53139%2016.7071C4.72934%2016.8946%204.99783%2017%205.27778%2017H13.7222C14.0022%2017%2014.2707%2016.8946%2014.4686%2016.7071C14.6666%2016.5196%2014.7778%2016.2652%2014.7778%2016V5Z'%20fill='%23CA1517'/%3e%3cpath%20d='M6.33333%207H8.44444V15H6.33333V7ZM10.5556%207H12.6667V15H10.5556V7Z'%20fill='%23CA1517'/%3e%3c/svg%3e",Iet="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M23.4727%203.52371C23.8103%203.85875%2024%204.31312%2024%204.78687C24%205.26063%2023.8103%205.71499%2023.4727%206.05004L9.97375%2019.4417C9.79536%2019.6187%209.58356%2019.7591%209.35046%2019.8549C9.11736%2019.9507%208.86752%2020%208.61521%2020C8.3629%2020%208.11306%2019.9507%207.87995%2019.8549C7.64685%2019.7591%207.43506%2019.6187%207.25667%2019.4417L0.549818%2012.7893C0.377806%2012.6245%200.240604%2012.4274%200.146216%2012.2094C0.0518283%2011.9914%200.002146%2011.757%206.79989e-05%2011.5197C-0.00201%2011.2825%200.0435581%2011.0472%200.134113%2010.8277C0.224668%2010.6081%200.358396%2010.4086%200.527495%2010.2408C0.696594%2010.0731%200.897677%209.94042%201.11901%209.85059C1.34034%209.76075%201.5775%209.71555%201.81663%209.71761C2.05576%209.71967%202.29209%209.76896%202.51181%209.8626C2.73154%209.95623%202.93027%2010.0923%203.0964%2010.263L8.61461%2015.7373L20.9249%203.52371C21.0922%203.35768%2021.2908%203.22597%2021.5093%203.13611C21.7279%203.04625%2021.9622%203%2022.1988%203C22.4354%203%2022.6697%203.04625%2022.8883%203.13611C23.1069%203.22597%2023.3054%203.35768%2023.4727%203.52371Z'%20fill='%23666667'/%3e%3c/svg%3e",Ux="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M23.4727%203.52371C23.8103%203.85875%2024%204.31312%2024%204.78687C24%205.26063%2023.8103%205.71499%2023.4727%206.05004L9.97375%2019.4417C9.79536%2019.6187%209.58356%2019.7591%209.35046%2019.8549C9.11736%2019.9507%208.86752%2020%208.61521%2020C8.3629%2020%208.11306%2019.9507%207.87995%2019.8549C7.64685%2019.7591%207.43506%2019.6187%207.25667%2019.4417L0.549818%2012.7893C0.377806%2012.6245%200.240604%2012.4274%200.146216%2012.2094C0.0518283%2011.9914%200.002146%2011.757%206.79989e-05%2011.5197C-0.00201%2011.2825%200.0435581%2011.0472%200.134113%2010.8277C0.224668%2010.6081%200.358396%2010.4086%200.527495%2010.2408C0.696594%2010.0731%200.897677%209.94042%201.11901%209.85059C1.34034%209.76075%201.5775%209.71555%201.81663%209.71761C2.05576%209.71967%202.29209%209.76896%202.51181%209.8626C2.73154%209.95623%202.93027%2010.0923%203.0964%2010.263L8.61461%2015.7373L20.9249%203.52371C21.0922%203.35768%2021.2908%203.22597%2021.5093%203.13611C21.7279%203.04625%2021.9622%203%2022.1988%203C22.4354%203%2022.6697%203.04625%2022.8883%203.13611C23.1069%203.22597%2023.3054%203.35768%2023.4727%203.52371Z'%20fill='%2377993D'/%3e%3c/svg%3e",Tet="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M23.4727%203.52371C23.8103%203.85875%2024%204.31312%2024%204.78687C24%205.26063%2023.8103%205.71499%2023.4727%206.05004L9.97375%2019.4417C9.79536%2019.6187%209.58356%2019.7591%209.35046%2019.8549C9.11736%2019.9507%208.86752%2020%208.61521%2020C8.3629%2020%208.11306%2019.9507%207.87995%2019.8549C7.64685%2019.7591%207.43506%2019.6187%207.25667%2019.4417L0.549818%2012.7893C0.377806%2012.6245%200.240604%2012.4274%200.146216%2012.2094C0.0518283%2011.9914%200.002146%2011.757%206.79989e-05%2011.5197C-0.00201%2011.2825%200.0435581%2011.0472%200.134113%2010.8277C0.224668%2010.6081%200.358396%2010.4086%200.527495%2010.2408C0.696594%2010.0731%200.897677%209.94042%201.11901%209.85059C1.34034%209.76075%201.5775%209.71555%201.81663%209.71761C2.05576%209.71967%202.29209%209.76896%202.51181%209.8626C2.73154%209.95623%202.93027%2010.0923%203.0964%2010.263L8.61461%2015.7373L20.9249%203.52371C21.0922%203.35768%2021.2908%203.22597%2021.5093%203.13611C21.7279%203.04625%2021.9622%203%2022.1988%203C22.4354%203%2022.6697%203.04625%2022.8883%203.13611C23.1069%203.22597%2023.3054%203.35768%2023.4727%203.52371Z'%20fill='white'/%3e%3c/svg%3e",hC="data:image/svg+xml,%3csvg%20width='14'%20height='14'%20viewBox='0%200%2014%2014'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7.66668%205H6.33334V3.66667H7.66668V5ZM7.66668%206.33333H6.33334V10.3333H7.66668V6.33333ZM7.00001%201.66667C4.05934%201.66667%201.66668%204.05933%201.66668%207C1.66668%209.94066%204.05934%2012.3333%207.00001%2012.3333C9.94068%2012.3333%2012.3333%209.94066%2012.3333%207C12.3333%204.05933%209.94068%201.66667%207.00001%201.66667ZM7.00001%200.333332C10.682%200.333332%2013.6667%203.318%2013.6667%207C13.6667%2010.682%2010.682%2013.6667%207.00001%2013.6667C3.31801%2013.6667%200.333344%2010.682%200.333344%207C0.333344%203.318%203.31801%200.333332%207.00001%200.333332Z'%20fill='%23CA1517'/%3e%3c/svg%3e",Gx="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M15.8485%2012.171L9.06763%200.563751C8.94754%200.389681%208.78776%200.247538%208.60186%200.149393C8.41595%200.0512483%208.20941%200%207.99977%200C7.79014%200%207.5836%200.0512483%207.39769%200.149393C7.21179%200.247538%207.05201%200.389681%206.93192%200.563751L0.15105%2012.171C0.0488926%2012.3589%20-0.00312101%2012.5705%200.00014484%2012.785C0.00341069%2012.9995%200.0618431%2013.2094%200.169672%2013.394C0.277501%2013.5786%200.430997%2013.7315%200.615003%2013.8376C0.799009%2013.9438%201.00716%2013.9994%201.2189%2013.9992H14.7379C14.9533%2014.0072%2015.1668%2013.9572%2015.3569%2013.8542C15.5469%2013.7512%2015.7065%2013.599%2015.8194%2013.4131C15.9323%2013.2272%2015.9945%2013.0143%2015.9997%2012.796C16.0048%2012.5778%2015.9526%2012.3621%2015.8485%2012.171ZM1.26162%2012.766L7.99977%201.16953L14.7379%2012.766H1.26162Z'%20fill='%23CA1517'/%3e%3cpath%20d='M7.27363%204.20927H8.60845V9.13126H7.27363V4.20927Z'%20fill='%23CA1517'/%3e%3cpath%20d='M7.94638%2011.9438C8.34152%2011.9438%208.66184%2011.6048%208.66184%2011.1866C8.66184%2010.7684%208.34152%2010.4294%207.94638%2010.4294C7.55124%2010.4294%207.23092%2010.7684%207.23092%2011.1866C7.23092%2011.6048%207.55124%2011.9438%207.94638%2011.9438Z'%20fill='%23CA1517'/%3e%3c/svg%3e",$et="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='2%202%2020%2020'%3e%3cpath%20fill='currentColor'%20d='M12%202A10%2010%200%201%200%2022%2012A10%2010%200%200%200%2012%202Zm0%2018a8%208%200%201%201%208-8A8%208%200%200%201%2012%2020Z'%20opacity='0.5'/%3e%3cpath%20fill='currentColor'%20d='M20%2012h2A10%2010%200%200%200%2012%202V4A8%208%200%200%201%2020%2012Z'%3e%3canimateTransform%20attributeName='transform'%20dur='1s'%20from='0%2012%2012'%20repeatCount='indefinite'%20to='360%2012%2012'%20type='rotate'/%3e%3c/path%3e%3c/svg%3e",Bx="Místo nevybráno.",Met="Místo úspěšně vybráno.",dC="Popis nevložen.",Cet="Překročen povolený počet znaků.",Aet="Popis vložen.",JK="Email nevložen.",ket="Chybný email.",Let="Email vložen.",qx="parking_feedback_form_email",Oet=250,KK=500;function Ret(e){const[t,i]=ot.useState(!1),[r,n]=ot.useState("disabled"),[o,u]=ot.useState("disabled"),[f,g]=ot.useState("disabled"),[b,E]=ot.useState(!1),[I,M]=ot.useState(!1),[k,L]=ot.useState(!1),[P,D]=ot.useState(!1),[j,z]=ot.useState(!1),[V,W]=ot.useState({place:{value:null,message:Bx,state:"NONE"},description:{value:"",message:dC,state:"NONE"},email:{value:localStorage.getItem(qx)?localStorage.getItem(qx):"",message:JK,state:"NONE"}}),Q=ot.useRef(),Z=ot.useRef(),ee={type:"simple-marker",style:"circle",size:e.config.appWidget.feedbackMapSymbol.size,color:e.config.appWidget.feedbackMapSymbol.color,outline:{color:e.config.appWidget.feedbackMapSymbol.outline.color,width:e.config.appWidget.feedbackMapSymbol.outline.width}},ie=()=>V.place.state==="OK"&&V.description.state==="OK"&&V.email.state==="OK",oe=async()=>{if(ie()){L(!0),n("disabled"),u("disabled"),g("disabled"),Q.current.disabled=!0,Z.current.disabled=!0,localStorage.setItem(qx,V.email.value);const Re=await le();xe(),L(!1),Re!=="ERROR"?D(!0):z(!0),n("ready"),u("ready"),g("disabled"),Q.current.disabled=!1,Z.current.disabled=!1,setTimeout(()=>{z(!1),D(!1)},5e3)}},le=async()=>{const Re=new G2({url:e.config.appWidget.feedbackServiceUrl}),qe={[e.config.appWidget.feedbackAttributes.typeAttr]:e.config.appWidget.feedbackAttributes.typeAttrValue,[e.config.appWidget.feedbackAttributes.emailAttr]:V.email.value,[e.config.appWidget.feedbackAttributes.zadalAttr]:e.config.appWidget.feedbackAttributes.zadalAttrValue,[e.config.appWidget.feedbackAttributes.descriptionAttr]:V.description.value,[e.config.appWidget.feedbackAttributes.dateAttr]:Date.now()},At={geometry:V.place.value.geometry,attributes:qe};try{return await Re.applyEdits({addFeatures:[At]})}catch{return"ERROR"}},xe=()=>{Le(),g("disabled"),W(Re=>({...Re,place:{value:null,message:Bx,state:"NONE"},description:{value:"",message:dC,state:"NONE"}}))},$e=Re=>Re?String(Re).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)?{message:Let,state:"OK"}:{message:ket,state:"CAUTION"}:{message:JK,state:"NONE"},Te=Re=>Re?Re.length>KK?{message:Cet,state:"CAUTION"}:{message:Aet,state:"OK"}:{message:dC,state:"NONE"},de=Re=>{const qe=Re.target.value,ht=Te(qe);W(At=>({...At,description:{value:qe,message:ht.message,state:ht.state}}))},se=Re=>{const qe=Re.target.value,ht=$e(qe);W(At=>({...At,email:{value:qe,message:ht.message,state:ht.state}}))},ye=()=>{Le(),W(Re=>({...Re,place:{value:null,message:Bx,state:"NONE"}})),t.create("point"),n("active"),g("disabled")},ue=Re=>{W(qe=>({...qe,place:{value:Re,message:Met,state:"OK"}})),n("ready"),u("ready"),g("ready")},pe=()=>{Le(),W(Re=>({...Re,place:{value:null,message:Bx,state:"NONE"}})),n("ready"),u("ready"),g("disabled")},_e=async()=>{Le(),n("disabled"),u("disabled"),M(!0);const Re=await b.locate();M(!1),n("ready"),u("ready"),ue(new qi({geometry:{type:"point",longitude:Re.coords.longitude,latitude:Re.coords.latitude}}))},Le=()=>{e.view.graphics.remove(V.place.value),e.view.graphics.remove(b.graphic)};return ot.useEffect(()=>{if(!e.view)return;n("ready"),u("ready");const Re=new cet({view:e.view,layer:e.view.graphics,pointSymbol:ee,defaultUpdateOptions:{highlightOptions:{enabled:!1}}});i(Re),Re.on("create",ht=>{ue(ht.graphic)});const qe=new rj({view:e.view,scale:500,popupEnabled:!1,graphic:new qi({symbol:ee})});E(qe)},[e.view]),ot.useEffect(()=>{const Re=localStorage.getItem(qx);if(Re||typeof Re=="string"){const qe=$e(Re);W(ht=>({...ht,email:{value:ht.email.value,message:qe.message,state:qe.state}}))}},[]),Fe.jsxs("div",{className:"feedback",children:[Fe.jsxs("div",{className:"feedback-part",children:[Fe.jsx("div",{className:"feedback-part-header",children:e.config.appLabels.appWidgetFeedbackPlaceTitle}),Fe.jsx("div",{className:"feedback-part-body",children:Fe.jsxs("div",{className:"feedback-buttons",children:[Fe.jsxs("div",{className:`feedback-btn ${r}`,onClick:ye,children:[Fe.jsx("img",{src:r==="active"||r==="ready"?wet:vet,alt:"zakreslit"}),r==="ready"||r==="disabled"?e.config.appLabels.appWidgetFeedbackDrawPlace:e.config.appLabels.appWidgetFeedbackDrawingPlace]}),Fe.jsxs("div",{className:`feedback-btn ${o}`,onClick:_e,children:[Fe.jsx("img",{src:o==="active"||o==="ready"?_et:bet,alt:"lokalizovat"}),I?e.config.appLabels.appWidgetFeedbackLocatingPlace:e.config.appLabels.appWidgetFeedbackLocatePlace]}),Fe.jsxs("div",{className:`feedback-btn ${f} remove`,onClick:pe,children:[Fe.jsx("img",{src:f==="ready"?Eet:xet,alt:"smazat zákres"}),e.config.appLabels.appWidgetFeedbackRemovePlace]})]})}),Fe.jsx("div",{className:"feedback-part-footer",children:Fe.jsxs(J$,{scale:"m",className:`state-${V.place.state}`,children:[Fe.jsx("img",{src:V.place.state==="OK"?Ux:V.place.state==="NONE"?hC:Gx,alt:"status"}),V.place.message]})})]}),Fe.jsxs("div",{className:"feedback-part",children:[Fe.jsx("div",{className:"feedback-part-header",children:e.config.appLabels.appWidgetFeedbackDescribeTitle}),Fe.jsx("div",{className:"feedback-part-body",children:Fe.jsx(yve,{ref:Q,className:"feedback-textarea",maxLength:KK,placeholder:"Popište...",resize:"vertical",rows:e.isMobile?"3":"4",scale:e.isMobile?"m":"s",value:V.description.value,onCalciteTextAreaInput:de})}),Fe.jsx("div",{className:"feedback-part-footer",children:Fe.jsxs(J$,{scale:"m",className:`state-${V.description.state}`,children:[Fe.jsx("img",{src:V.description.state==="OK"?Ux:V.description.state==="NONE"?hC:Gx,alt:"status"}),V.description.message]})})]}),Fe.jsxs("div",{className:"feedback-part",children:[Fe.jsx("div",{className:"feedback-part-header",children:e.config.appLabels.appWidgetFeedbackEmailTitle}),Fe.jsx("div",{className:"feedback-part-body",children:Fe.jsx(pve,{ref:Z,className:"feedback-input",maxLength:Oet,"input-mode":"email",scale:e.isMobile?"m":"s",type:"email",icon:"envelope",value:V.email.value,onCalciteInputInput:se})}),Fe.jsx("div",{className:"feedback-part-footer",children:Fe.jsxs(J$,{scale:"m",className:`state-${V.email.state}`,children:[Fe.jsx("img",{src:V.email.state==="OK"?Ux:V.email.state==="NONE"?hC:Gx,alt:"status"}),V.email.message]})})]}),Fe.jsxs("div",{className:"feedback-part",children:[Fe.jsx("div",{className:"feedback-part-body feedback-buttons",children:Fe.jsxs("div",{className:`feedback-btn send-btn ${ie()&&!k?"active":""}`,onClick:oe,children:[Fe.jsx("img",{src:ie()&&!k?Tet:ie()&&k?$et:Iet,alt:"odeslat"}),k?e.config.appLabels.appWidgetFeedbackSendingBtn:e.config.appLabels.appWidgetFeedbackSendBtn]})}),P&&Fe.jsx("div",{className:"feedback-buttons",children:Fe.jsxs("div",{className:"feedback-btn send-btn feedback-message success",children:[Fe.jsx("img",{src:Ux,alt:"zpětná vazba odeslána"}),e.config.appLabels.appWidgetFeedbackSuccess]})}),j&&Fe.jsx("div",{className:"feedback-buttons",children:Fe.jsxs("div",{className:"feedback-btn send-btn feedback-message error",children:[Fe.jsx("img",{src:Gx,alt:"zpětná vazba nebyla odeslána"}),e.config.appLabels.appWidgetFeedbackError]})})]})]})}const Pet="data:image/svg+xml,%3csvg%20width='30'%20height='30'%20viewBox='0%200%2030%2030'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M23.0912%2024.9866C23.4954%2024.9864%2023.883%2024.8202%2024.1687%2024.5245L29.5544%2018.9479C29.84%2018.652%2030.0003%2018.251%2030%2017.833L29.9961%2011.1451C29.9959%2010.727%2029.8352%2010.3262%2029.5493%2010.0307L24.1571%204.4608C23.8702%204.16448%2023.4832%203.99864%2023.079%204.00001L1.52309%204.0134C1.3228%204.01293%201.12439%204.05342%200.939276%204.13253C0.754162%204.21164%200.585998%204.32782%200.444452%204.47438C0.302906%204.62094%200.190773%204.795%200.114499%204.98654C0.0382246%205.17807%20-0.000684416%205.38332%209.11036e-06%205.59046L0.0103705%2023.4248C0.0106744%2023.8428%200.171492%2024.2436%200.457456%2024.539C0.74342%2024.8344%201.13112%2025.0002%201.53529%2025L23.0912%2024.9866ZM3.04893%207.16468L22.4492%207.15263L26.9485%2011.8001L26.9516%2017.1817L22.4578%2021.8348L3.05746%2021.8468L3.04893%207.16468Z'%20fill='%23666666'/%3e%3cpath%20d='M18.3924%2012.6604C17.4126%2013.6749%2017.4136%2015.3188%2018.3945%2016.332C19.3755%2017.3453%2020.965%2017.3443%2021.9448%2016.3298C22.9246%2015.3153%2022.9236%2013.6715%2021.9426%2012.6582C20.9617%2011.6449%2019.3722%2011.6459%2018.3924%2012.6604Z'%20fill='%23666666'/%3e%3c/svg%3e";function Net(e){const t=ot.useRef(null),i=ot.useRef(null),r=ot.useRef(!1),[n,o]=ot.useState(""),u=f=>{e.setActualTheme(f),e.checkVisibleLayers(e.view,f),e.setSelectedZoneOid(null),e.removeZoneFromMap(),e.view.popup.close(),window.history.replaceState(null,null,`?theme=${f}`),ou.event({category:"click",action:`prepnuti_tematu--${f}`,label:`Přepnutí tématu - ${f}`})};return ot.useEffect(()=>{var f;(f=e.layerList)!=null&&f.id&&(e.layerList.container=i.current)},[e.layerListCreated]),ot.useEffect(()=>{!r.current&&o(""),e.zonesLayers&&!r.current&&(o(e.zonesLayers.some(f=>f.visible)?"zones":"themes"),r.current=!0)},[e.zonesLayers]),Fe.jsxs("div",{className:`app-widget ${e.opened?"opened":"closed"}`,style:e.isMobile===!0?{height:`${e.config.appWidget.heightOnMobile}px`}:{},children:[Fe.jsxs("div",{className:"widget-header",children:[Fe.jsx("h1",{children:e.config.appLabels.appWidgetTitle}),Fe.jsx(Bc,{icon:"x",scale:"s","text-label":"Zavřít",onClick:e.toggleAppWidget})]}),Fe.jsxs("div",{className:"widget-content",children:[Fe.jsxs("div",{className:`themes section ${n==="themes"?"":"closed"}`,children:[Fe.jsxs("div",{className:"section-title",onClick:()=>{o(n==="themes"?null:"themes"),ou.event({category:"click",action:"sekce--temata",label:"Rozbalení/Sbalení sekce - Témata"})},children:[Fe.jsx("h2",{children:e.config.appLabels.appWidgetThemesTitle}),Fe.jsx("span",{children:n==="themes"?Fe.jsx(Bc,{icon:"chevron-up",scale:"s","text-label":"Sbalit"}):Fe.jsx(Bc,{icon:"chevron-down",scale:"s","text-label":"Rozbalit"})})]}),Fe.jsx("div",{className:"section-content flex-list-column",children:e.config&&e.config.appThemes.map(f=>{var g,b;return Fe.jsxs("div",{className:`flex-item theme-item ${f.name===((g=e.actualThemeInfo)==null?void 0:g.name)?"active-theme":""}`,onClick:()=>{u(f.name)},children:[Fe.jsx("img",{src:f.name===((b=e.actualThemeInfo)==null?void 0:b.name)?iee:Pet,alt:"téma"}),f.label]},f.name)})})]}),e.zonesLayers&&e.zonesLayers.some(f=>f.visible)&&Fe.jsxs("div",{className:`zones section ${n==="zones"?"":"closed"}`,children:[Fe.jsxs("div",{className:"section-title",onClick:()=>{o(n==="zones"?null:"zones"),ou.event({category:"click",action:"sekce--oblasti",label:"Rozbalení/Sbalení sekce - Oblasti parkování"})},children:[Fe.jsx("h2",{children:e.config.appLabels.appWidgetZonesTitle}),Fe.jsx("span",{children:n==="zones"?Fe.jsx(Bc,{icon:"chevron-up",scale:"s","text-label":"Sbalit"}):Fe.jsx(Bc,{icon:"chevron-down",scale:"s","text-label":"Rozbalit"})})]}),Fe.jsx("div",{className:"section-content flex-list-grid",ref:t,children:e.zoneFeatures&&e.zonesLayerViews?e.zoneFeatures.sort((f,g)=>f.attributes[e.config.appZones.zoneCodeAttr]-g.attributes[e.config.appZones.zoneCodeAttr]).map(f=>e.zonesLayers.filter(g=>g.id===f.layer.id)[0].visible&&Fe.jsx("div",{"data-oid":f.attributes[e.config.appZones.oidAttr],"data-layer":f.layer.id,className:`flex-item zones-item ${f.attributes[e.config.appZones.zoneDraftAttr]===e.config.appZones.zoneDraftValue?"zones-draft":""}`,title:f.attributes[e.config.appZones.zoneNameAttr],onClick:g=>{e.showZone(g),ou.event({category:"click",action:`vyber_oblati_widget--${f.attributes[e.config.appZones.zoneCodeAttr]}`,label:`Výběr oblasti z widgetu - ${f.attributes[e.config.appZones.zoneCodeAttr]}`})},style:e.selectedZone===f.attributes[e.config.appZones.oidAttr]+"--"+f.layer.id?{color:e.config.appZones.activeZoneColor,backgroundColor:`rgb(from ${e.config.appZones.activeZoneColor} r g b / 10%)`,border:`1px solid ${e.config.appZones.activeZoneColor}`}:{},children:f.attributes[e.config.appZones.zoneCodeAttr]},f.attributes[e.config.appZones.oidAttr]+"-"+f.layer.id)):Fe.jsx("div",{children:"Načítám oblasti..."})})]}),Fe.jsxs("div",{className:`layers section ${n==="layers"?"":"closed"}`,style:!e.actualThemeInfo||e.actualThemeInfo&&e.actualThemeInfo.showLayerList?{}:{display:"none"},children:[Fe.jsxs("div",{className:"section-title",onClick:()=>{o(n==="layers"?null:"layers"),ou.event({category:"click",action:"sekce--vrstvy",label:"Rozbalení/Sbalení sekce - Vrstvy"})},children:[Fe.jsx("h2",{children:e.config.appLabels.appWidgetLayersTitle}),Fe.jsx("span",{children:n==="layers"?Fe.jsx(Bc,{icon:"chevron-up",scale:"s","text-label":"Sbalit"}):Fe.jsx(Bc,{icon:"chevron-down",scale:"s","text-label":"Rozbalit"})})]}),Fe.jsx("div",{className:"section-content",children:Fe.jsx("div",{ref:i})})]}),Fe.jsxs("div",{className:`feedback section ${n==="feedback"?"":"closed"}`,children:[Fe.jsxs("div",{className:"section-title",onClick:()=>{o(n==="feedback"?null:"feedback"),ou.event({category:"click",action:"sekce--zpetna_vazba",label:"Rozbalení/Sbalení sekce - Zpětná vazba"})},children:[Fe.jsx("h2",{children:e.config.appLabels.appWidgetFeedbackTitle}),Fe.jsx("span",{children:n==="feedback"?Fe.jsx(Bc,{icon:"chevron-up",scale:"s","text-label":"Sbalit"}):Fe.jsx(Bc,{icon:"chevron-down",scale:"s","text-label":"Rozbalit"})})]}),Fe.jsx("div",{className:"section-content",children:Fe.jsx(Ret,{config:e.config,view:e.view,isMobile:e.isMobile})})]})]})]})}function Fet(e){const[t,i]=ot.useState(null),[r,n]=ot.useState(null),[o,u]=ot.useState(!1),[f,g]=ot.useState(null),[b,E]=ot.useState(null),[I,M]=ot.useState(!(e.isMobile&&e.config.appWidget.openOnStartIfDesktop)),[k,L]=ot.useState(null),[P,D]=ot.useState(null),[j,z]=ot.useState(null);ot.useState(null);const[V,W]=ot.useState(new Qpe({listMode:"hide",id:"selected-zone-system-layer"})),Q=ot.useRef(null),Z=ot.useRef(null),ee=ot.useRef(null),ie=ot.useRef(null),oe=ot.useRef(null);function le(se){const ye=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;se=se.replace(ye,function(pe,_e,Le,Re){return _e+_e+Le+Le+Re+Re});const ue=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(se);return ue?{r:parseInt(ue[1],16),g:parseInt(ue[2],16),b:parseInt(ue[3],16)}:null}const xe=()=>{M(!I)},$e=()=>{V.removeAll()},Te=se=>{const ye=se.target.getAttribute("data-oid"),ue=se.target.getAttribute("data-layer"),pe=ye+"--"+ue;if(t.popup.close(),pe==k){L(()=>null);return}L(()=>pe),de(ye,ue)},de=(se,ye,ue=!0)=>{const pe=e.zoneFeatures.filter(qe=>qe.attributes[e.config.appZones.oidAttr]==se&&qe.layer.id==ye)[0],_e=pe.attributes[e.config.appZones.correspondingZonesAttr];let Le=[];if(_e){const ht=_e.split(",").map(Fi=>Fi.trim());Le=e.zoneFeatures.filter(Fi=>ht.includes(Fi.attributes[e.config.appZones.zoneCodeAttr])).map(Fi=>new qi({geometry:Fi.geometry,symbol:{type:"simple-fill",color:{r:le(e.config.appZones.correspondingZonesColor).r,g:le(e.config.appZones.correspondingZonesColor).g,b:le(e.config.appZones.correspondingZonesColor).b,a:e.config.appZones.correspondingZonesMapOpacity},outline:{color:{r:le(e.config.appZones.correspondingZonesColor).r,g:le(e.config.appZones.correspondingZonesColor).g,b:le(e.config.appZones.correspondingZonesColor).b,a:1},width:3}}}))}const Re=new qi({attributes:pe.attributes,geometry:pe.geometry,symbol:{type:"simple-fill",color:{r:le(e.config.appZones.activeZoneColor).r,g:le(e.config.appZones.activeZoneColor).g,b:le(e.config.appZones.activeZoneColor).b,a:e.config.appZones.correspondingZonesMapOpacity},outline:{color:{r:le(e.config.appZones.activeZoneColor).r,g:le(e.config.appZones.activeZoneColor).g,b:le(e.config.appZones.activeZoneColor).b,a:1},width:3}},popupTemplate:{title:e.config.appLabels.zonesPopupTitle,content:e.setZonesPopup}});if($e(),V.addMany([...Le,Re.clone()]),ue){const qe=tfe([Re.clone().geometry.extent.expand(2),...Le.map(ht=>ht.clone().geometry.extent.expand(2))]);t.popup.open({features:[Re.clone()]}),t.goTo(qe)}};return ot.useEffect(()=>{if(!Q.current&&!e.config)return;const se=new DBe({portalItem:{id:e.config.webMapId,portal:{url:e.config.portal}}}),ye=new bLe({container:Q.current,map:se,popup:new Ode({viewModel:{includeDefaultActions:!1},dockEnabled:!0,dockOptions:{breakpoint:!1,position:e.isMobile?"bottom-center":"bottom-left"}})});document.documentElement.style.setProperty("--popup-max-height",`${e.config.popup.maxHeight}px`);const ue=new Bqe({view:ye});oe.current=ue;const pe=new Gpe({view:ye}),_e=new WJ({label:"Legenda",collapseIcon:"legend",collapseTooltip:"Zavřít legendu",expandIcon:"legend",expandTooltip:"Legenda",group:"top-left",view:ye,content:pe});g(_e);const Le=document.createElement("div");Le.style.padding="10px",Le.classList.add("esri-widget--panel","esri-widget"),Le.innerHTML="<div class='map-component-about-widget'>"+e.config.appLabels.aboutWidget+"</div>";const Re=new WJ({label:"O aplikaci",collapseIcon:"question",collapseTooltip:"Sbalit informace o aplikaci",expandIcon:"question",expandTooltip:"O aplikaci",group:"top-left",view:ye,content:Le});E(Re);const qe=new FWe({view:ye});n(qe);const ht=document.createElement("div");ht.classList.add("toggle-basemap-container");const At=new qqe({view:ye,container:ht,nextBasemap:new hv({portalItem:{id:e.config.nextBasemap.portalItemId}})});ie.current=At;const Fi=new Dqe({view:ye,includeDefaultSources:!1,sources:[{layer:new G2({url:e.config.search.layerUrl,outFields:["*"],definitionExpression:e.config.search.layerUrl.definitionExpression}),searchFields:e.config.search.searchFields,displayField:e.config.search.layerUrl.displayField,exactMatch:!1,outFields:["*"],name:"Adresní místa",placeholder:"Hledat adresu",maxResults:6,maxSuggestions:6,suggestionsEnabled:!0,minSuggestCharacters:3,popupEnabled:!1,resultSymbol:{type:"simple-marker",size:"12px",color:[0,0,0,0],outline:{color:[217,0,18],width:2}}}]});ee.current=Fi,ye.ui.add(Fi,"top-left"),ye.ui.move(["zoom"],"top-left"),ye.ui.add(ue,"top-left"),ye.ui.add(_e,"top-left"),ye.ui.add(Re,"top-left"),ye.ui.add(ht,"manual"),ye.ui.add(Z.current,"manual"),ye.when(()=>{e.loaded(!0),e.checkVisibleLayers(ye,null),e.getZonesLayer(ye),ye.map.add(V),i(ye),u(!0)})},[Q]),ot.useEffect(()=>{var se,ye;t&&((se=oe.current.domNode)==null||se.addEventListener("click",()=>{ou.event({category:"click",action:"Widget--Najdi_moji_polohu",label:"Esri widget - Najdi moji polohu"})}),(ye=ie.current.domNode)==null||ye.addEventListener("click",()=>{ou.event({category:"click",action:"Widget--Prepnout_podkladovou_mapu",label:"Esri widget - Přepnout podkladovou mapu"})}))},[t]),ot.useEffect(()=>{var ue,pe,_e;if(!t)return;const se=document.body.querySelector("search-close-btn");se&&se.remove();const ye=document.createElement("div");ye.innerHTML='<span class="esri-icon-left"></span>',ye.classList.add("search-close-btn"),(pe=(ue=ee.current.domNode)==null?void 0:ue.firstChild)==null||pe.firstChild.prepend(ye),(_e=ee.current.domNode.querySelector(".esri-search__submit-button"))==null||_e.addEventListener("click",()=>{ee.current.domNode.classList.contains("search-expanded")||(ee.current.domNode.classList.add("search-expanded"),ee.current.focus(),ou.event({category:"click",action:"Widget--Hledat",label:"Esri widget - Hledat"}))}),ye.addEventListener("click",()=>{ee.current.domNode.classList.contains("search-expanded")&&(ee.current.domNode.classList.remove("search-expanded"),ee.current.clear())})},[t]),ot.useEffect(()=>{!t||!e.zonesLayers||!e.zoneFeatures||(t.on("click",()=>{V.removeAll()}),e.zonesLayers.forEach(se=>{se.when(ye=>{me(()=>[t==null?void 0:t.popup.selectedFeature,t==null?void 0:t.popup.visible,t.navigating,ye.updating],([ue,pe,_e,Le])=>{var Re;ue&&((Re=ue.layer)==null?void 0:Re.id)===se.id&&pe&&(L(ue.attributes[e.config.appZones.oidAttr]+"--"+ue.layer.id),de(ue.attributes[e.config.appZones.oidAttr],ue.layer.id,!1),ou.event({category:"click",action:`Vyber_oblati_mapa--${ue.attributes[e.config.appZones.zoneCodeAttr]}`,label:`Výběr oblasti z mapy - ${ue.attributes[e.config.appZones.zoneCodeAttr]}`})),!pe&&!_e&&!Le&&(L(null),$e())})})}))},[t,e.zonesLayers,e.zoneFeatures]),ot.useEffect(()=>{t&&me(()=>t.width,()=>{t.popup.dockOptions.position=e.isMobile?"bottom-center":"bottom-left"})},[t,e.isMobile]),ot.useEffect(()=>{P&&P.remove(),j&&j.remove();const se=me(()=>[f==null?void 0:f.expanded,b==null?void 0:b.expanded],ue=>{ue.includes(!0)&&e.isMobile&&I&&M(!1)});D(se);const ye=me(()=>t==null?void 0:t.popup.selectedFeature,ue=>{ue&&I&&e.isMobile&&M(!1)});return z(ye),()=>{se&&se.remove(),ye&&ye.remove()}},[I,e.isMobile]),Fe.jsxs("div",{className:"map-div",ref:Q,children:[Fe.jsxs("div",{ref:Z,title:e.config.appLabels.appWidgetTitle,className:"app-button",onClick:xe,children:[Fe.jsx("div",{className:"icon"}),Fe.jsx("div",{className:"label",children:e.config.appLabels.appWidgetTitle})]}),Fe.jsx(Net,{opened:I,toggleAppWidget:xe,view:t,config:e.config,setActualTheme:e.setActualTheme,actualThemeInfo:e.actualThemeInfo,checkVisibleLayers:e.checkVisibleLayers,zonesLayers:e.zonesLayers,zonesLayerViews:e.zonesLayerViews,zoneFeatures:e.zoneFeatures,isMobile:e.isMobile,layerList:r,layerListCreated:o,setSelectedZoneOid:L,selectedZone:k,showZone:Te,removeZoneFromMap:$e})]})}AQ("https://js.arcgis.com/calcite-components/2.13.2/assets");const YK=544;function Det(){const[e,t]=ot.useState(new URLSearchParams(window.location.search).get("theme")),[i,r]=ot.useState(),[n,o]=ot.useState(null),[u,f]=ot.useState(!1),[g,b]=ot.useState(null),[E,I]=ot.useState(null),[M,k]=ot.useState([]),[L,P]=ot.useState(window.innerWidth),[D,j]=ot.useState(window.innerWidth<=YK),z=ot.useRef(M),V=Te=>{let de,se;Te.graphic.attributes[n==null?void 0:n.appZones.correspondingZonesAttr]&&(de=Te.graphic.attributes[n==null?void 0:n.appZones.correspondingZonesAttr].split(","),se=de.map(ue=>`<span style="color: ${n==null?void 0:n.appZones.correspondingZonesColor}; background-color: rgba(from ${n==null?void 0:n.appZones.correspondingZonesColor} r g b / 10%); padding: 0px 5px; border: 1px solid ${n==null?void 0:n.appZones.correspondingZonesColor}; display: flex; justify-content: center; align-items: center; width: 30px; height: 30px;">
          ${ue.trim()}
        </span>`));const ye=document.createElement("div");return ye.innerHTML=`
    <div>
      <div style="color: ${n==null?void 0:n.appZones.activeZoneColor}; height: 30px; display: inline-flex; justify-content: center; align-items: center; background-color: rgba(from ${n==null?void 0:n.appZones.activeZoneColor} r g b / 10%); padding: 0px 8px; border: 1px solid ${n==null?void 0:n.appZones.activeZoneColor}">
        ${Te.graphic.attributes[n==null?void 0:n.appZones.zoneCodeAttr]} ${Te.graphic.attributes[n==null?void 0:n.appZones.zoneNameAttr]} 
      </div> 
      
      ${Te.graphic.attributes[n==null?void 0:n.appZones.zoneDraftAttr]===(n==null?void 0:n.appZones.zoneDraftValue)&&(n!=null&&n.appLabels.zonesPopupDraftZone)?'<span style="margin-left: 5px; padding: 0px 2px 0px 1px; border-bottom: 1px dashed '+(n==null?void 0:n.appZones.activeZoneColor)+"; color: "+(n==null?void 0:n.appZones.activeZoneColor)+'">'+(n==null?void 0:n.appLabels.zonesPopupDraftZone)+"</span>":""}
    </div> 
    
    <div style="margin-top: 12px; ${se?"":"display: none"}">
      ${se?(n==null?void 0:n.appLabels.zonesPopupCorrespondingZones)+":":""}

      ${se?'<div style="margin-top: 3px; display: flex; flex-wrap: wrap; justify-content: start; gap: 3px;">':""}
        ${se?se.join(""):""}
      ${se?"</div>":""}
    </div> 
    `,ye},W={title:n==null?void 0:n.appLabels.zonesPopupTitle,content:V},Q=Te=>{f(Te)},Z=async()=>(await fetch("./config.json")).json(),ee=Te=>{if(Te!=="[no-theme]"){const de=n==null?void 0:n.appThemes.filter(se=>{if(se.name===Te)return se});return(de==null?void 0:de.length)>0?de[0]:n==null?void 0:n.appThemes[0]}else return null},ie=Te=>{t(Te)},oe=(Te,de)=>{let se=ee(de||e);i&&i.forEach(ue=>{ue.remove()}),Te.map.layers.forEach(ue=>{ue.id!=="selected-zone-system-layer"&&(ue.visible=!1,se!=null&&se.visibleLayers.includes(ue.title)&&(ue.visible=!0),ue.allSublayers&&ue.when(()=>{ue.allSublayers.forEach(_e=>{_e.visible=!1,se!=null&&se.visibleLayers.includes(_e.title)&&(_e.visible=!0)})}),ue.allLayers&&ue.allLayers.forEach(_e=>{_e.visible=!1,se!=null&&se.visibleLayers.includes(_e.title)&&(_e.visible=!0)}))});let ye=[];Te.map.layers.forEach(ue=>{const pe=ue.watch("visible",()=>{t("[no-theme]"),le(Te)});(ue.allSublayers||ue.allLayers)&&ue.when(()=>{(ue.allSublayers||ue.allLayers).forEach(Le=>{const Re=Le.watch("visible",()=>{t("[no-theme]"),le(Te)});ye.push(Re)})}),ye.push(pe)}),r(ye)},le=async Te=>{const de=[],se=[],ye=[];for(const ue of Te.map.layers)if(n.appZones.fromLayers.length>0){if(n.appZones.fromLayers.includes(ue.title)){ue.popupEnabled=!0,ue.popupTemplate=W,ue.outFields=["*"],se.push(ue);const pe=await xe(ue);de.push(...pe),Te.whenLayerView(ue).then(_e=>{_e.highlightOptions={color:[0,0,0,0],haloOpacity:1,fillOpacity:1},ye.push(_e)})}(ue.allSublayers||ue.allLayers)&&await ue.when(async()=>{var pe,_e;for(const Le of((pe=ue.allSublayers)==null?void 0:pe.items)||((_e=ue.allLayers)==null?void 0:_e.items))if(n.appZones.fromLayers.includes(Le.title))if(ue.type==="group")await Le.when(async()=>{Le.popupEnabled=!0,Le.popupTemplate=W,Le.outFields=["*"],se.push(Le);const Re=await xe(Le);de.push(...Re),Te.whenLayerView(Le).then(qe=>{qe.highlightOptions={color:[0,0,0,0],haloOpacity:1,fillOpacity:1},ye.push(qe)})});else{Le.popupEnabled=!0,Le.popupTemplate=W,Le.outFields=["*"],se.push(Le);const Re=await xe(Le);de.push(...Re),Te.whenLayerView(Le).then(qe=>{qe.highlightOptions={color:[0,0,0,0],haloOpacity:1,fillOpacity:1},ye.push(qe)})}})}b(se),I(ye),z.current.length===0&&(k(de),z.current=de)},xe=async Te=>(await Te.queryFeatures({outFields:["*"],returnGeometry:!0,where:Te.definitionExpression})).features,$e=()=>{P(window.innerWidth),j(window.innerWidth<=YK)};return ot.useEffect(()=>(window.addEventListener("resize",$e),()=>{window.removeEventListener("resize",$e)}),[]),ot.useEffect(()=>{(async()=>{const Te=await Z();o(Te),Te!=null&&Te.ga4Id&&ou.initialize(Te==null?void 0:Te.ga4Id)})()},[]),Fe.jsxs(Fe.Fragment,{children:[!u&&Fe.jsx("calcite-loader",{}),Fe.jsxs(fve,{"content-behind":!0,children:[Fe.jsx("div",{slot:"header",children:Fe.jsx(gve,{appTitle:n?n.appLabels.appTitle:"",appLogoLink:n?n.appLogoLink:"",actualThemeInfo:ee(e)})}),n&&Fe.jsx(Fet,{config:n,loaded:Q,checkVisibleLayers:oe,setActualTheme:ie,actualThemeInfo:ee(e),isMobile:D,getZonesLayer:le,zonesLayers:g,zonesLayerViews:E,zoneFeatures:M,setZonesPopup:V})]})]})}fC.createRoot(document.getElementById("root")).render(Fe.jsx(Det,{}));export{st as $,Mj as A,Tj as B,TQ as C,gj as D,Ej as E,cr as F,Cj as G,pm as H,zZe as I,$j as J,vj as K,ent as L,eu as M,mge as N,gge as O,X_ as P,cl as Q,sdt as R,DIe as S,pr as T,Mc as U,Ur as V,Yhe as W,unt as X,Ag as Y,XD as Z,ce as _,mVe as a,yl as a$,Pde as a0,Wwe as a1,_O as a2,_r as a3,FIe as a4,Jst as a5,lT as a6,m as a7,w as a8,am as a9,oht as aA,RZ as aB,wa as aC,hEe as aD,lse as aE,qy as aF,mlt as aG,Oae as aH,Oe as aI,qi as aJ,Int as aK,cS as aL,Wy as aM,bu as aN,Vr as aO,BI as aP,Oce as aQ,tFe as aR,aFe as aS,Vce as aT,Uce as aU,jce as aV,zce as aW,hFe as aX,mFe as aY,xD as aZ,vi as a_,wx as aa,H as ab,be as ac,h2 as ad,Ht as ae,Pe as af,lt as ag,u_ as ah,Se as ai,ki as aj,Li as ak,Ct as al,ONe as am,RNe as an,PNe as ao,we as ap,he as aq,nt as ar,Sxe as as,Lc as at,_a as au,sIe as av,pse as aw,Vj as ax,wIe as ay,Uj as az,hy as b,wq as b$,RAe as b0,fl as b1,zj as b2,hT as b3,wf as b4,Ixe as b5,Txe as b6,yne as b7,H6 as b8,nIe as b9,Get as bA,Rge as bB,Vet as bC,Uet as bD,JQ as bE,gL as bF,Sq as bG,CI as bH,jm as bI,ac as bJ,hee as bK,pee as bL,fee as bM,itt as bN,Eve as bO,Itt as bP,Kat as bQ,Dq as bR,AI as bS,alt as bT,Kt as bU,zie as bV,Eat as bW,x8e as bX,vq as bY,bq as bZ,_q as b_,_ie as ba,$Ae as bb,Uie as bc,Ey as bd,jN as be,Vie as bf,N_ as bg,wB as bh,dst as bi,zit as bj,rPe as bk,oS as bl,sPe as bm,ufe as bn,h1e as bo,Ket as bp,jet as bq,Wet as br,mc as bs,Et as bt,C6 as bu,Rw as bv,Gw as bw,zge as bx,Nge as by,zet as bz,tS as c,U2 as c$,oo as c0,ult as c1,xee as c2,Jv as c3,Jae as c4,no as c5,qE as c6,q5 as c7,ert as c8,Aae as c9,tU as cA,Or as cB,bxe as cC,rN as cD,My as cE,eAe as cF,Iot as cG,Tt as cH,$ot as cI,vf as cJ,Eu as cK,wS as cL,Us as cM,De as cN,Ty as cO,Jt as cP,Zht as cQ,Lr as cR,Snt as cS,pT as cT,Ds as cU,Ave as cV,me as cW,Je as cX,pD as cY,Af as cZ,zDe as c_,M3e as ca,to as cb,my as cc,gH as cd,vH as ce,Oit as cf,Yt as cg,LL as ch,Ftt as ci,qt as cj,QF as ck,Ntt as cl,Lo as cm,By as cn,oit as co,R2 as cp,MT as cq,CT as cr,wBe as cs,V$e as ct,nit as cu,Qrt as cv,zGe as cw,RVe as cx,ke as cy,u9e as cz,gf as d,Mft as d$,Dc as d0,Oc as d1,dl as d2,xu as d3,zs as d4,Sa as d5,jA as d6,Qi as d7,DA as d8,VA as d9,od as dA,aBe as dB,Oht as dC,Hue as dD,tst as dE,mst as dF,io as dG,nn as dH,ift as dI,Eae as dJ,fd as dK,Uo as dL,o6 as dM,YH as dN,tW as dO,Dn as dP,us as dQ,Go as dR,PXe as dS,Sft as dT,CXe as dU,$ft as dV,Iu as dW,zn as dX,Pf as dY,bn as dZ,Qfe as d_,QE as da,Ine as db,xle as dc,Xe as dd,M_ as de,fn as df,MI as dg,Ile as dh,$q as di,Gi as dj,wae as dk,d9 as dl,xS as dm,mk as dn,irt as dp,Znt as dq,fst as dr,yf as ds,ise as dt,y_ as du,_y as dv,fA as dw,p8e as dx,ree as dy,It as dz,Be as e,Hht as e$,N2 as e0,Su as e1,Cft as e2,CAe as e3,RN as e4,Aft as e5,Nft as e6,kXe as e7,r0e as e8,sn as e9,dF as eA,bS as eB,b_ as eC,Fp as eD,pa as eE,Q4e as eF,z6 as eG,eEe as eH,Jhe as eI,iit as eJ,Yrt as eK,Lit as eL,ust as eM,Ynt as eN,Xit as eO,qit as eP,iN as eQ,Ne as eR,DWe as eS,Qet as eT,BRe as eU,hr as eV,on as eW,ERe as eX,O_ as eY,D3 as eZ,Kue as e_,tC as ea,Cf as eb,dle as ec,xft as ed,Ift as ee,yse as ef,rf as eg,OT as eh,A6 as ei,k6 as ej,B2 as ek,Kv as el,SU as em,Fv as en,v$ as eo,Lbe as ep,AN as eq,kN as er,Obe as es,V6 as et,U6 as eu,Dlt as ev,yee as ew,mee as ex,Nee as ey,O6 as ez,Xhe as f,G2 as f$,zS as f0,WFe as f1,IRe as f2,gst as f3,Tut as f4,nhe as f5,Sne as f6,GF as f7,Kfe as f8,Ut as f9,SF as fA,G6e as fB,$nt as fC,Qse as fD,eoe as fE,Tnt as fF,ca as fG,Fit as fH,Co as fI,G6 as fJ,oN as fK,aN as fL,ga as fM,xtt as fN,Cte as fO,kv as fP,IN as fQ,$2e as fR,$2 as fS,ET as fT,n_e as fU,Wst as fV,kYe as fW,Ffe as fX,QPe as fY,XPe as fZ,ZL as f_,_Le as fa,cft as fb,WQe as fc,W4 as fd,xa as fe,TAe as ff,k8 as fg,Abe as fh,Oct as fi,Fct as fj,xF as fk,bue as fl,ad as fm,Dct as fn,gt as fo,Ke as fp,hst as fq,Jte as fr,kce as fs,NF as ft,C6e as fu,Ent as fv,kc as fw,pS as fx,b2 as fy,p6e as fz,GQ as g,wtt as g$,g2 as g0,She as g1,IVe as g2,uVe as g3,gVe as g4,ede as g5,KT as g6,Fje as g7,Rje as g8,Oje as g9,wn as gA,oT as gB,OVe as gC,lI as gD,Ot as gE,xm as gF,Bit as gG,xne as gH,Qit as gI,Uit as gJ,vn as gK,Qpe as gL,IU as gM,xp as gN,St as gO,d_ as gP,lae as gQ,uS as gR,eit as gS,obe as gT,DLe as gU,oce as gV,BL as gW,dYe as gX,yu as gY,Wve as gZ,Ii as g_,ls as ga,L2 as gb,gl as gc,S_ as gd,vje as ge,_je as gf,gje as gg,T2 as gh,dAe as gi,pAe as gj,Ao as gk,Ppt as gl,Lpt as gm,Rpt as gn,Pje as go,hl as gp,yt as gq,jE as gr,mf as gs,c2 as gt,d$ as gu,MVe as gv,Ga as gw,ept as gx,Olt as gy,Ov as gz,pA as h,Vt as h$,dd as h0,Fc as h1,Jut as h2,Hut as h3,lct as h4,$c as h5,eC as h6,BQe as h7,qQe as h8,Sf as h9,pl as hA,uze as hB,pje as hC,OZ as hD,L4 as hE,sht as hF,jO as hG,ym as hH,ss as hI,f7 as hJ,Dut as hK,Fut as hL,ir as hM,mm as hN,Cg as hO,B6 as hP,p9 as hQ,p8 as hR,rrt as hS,hS as hT,_pt as hU,sge as hV,Zet as hW,u$ as hX,ZMe as hY,Zpt as hZ,xit as h_,k0e as ha,H2 as hb,kpt as hc,fft as hd,dft as he,N6 as hf,q2e as hg,dXe as hh,Out as hi,wve as hj,gpt as hk,lYe as hl,Spt as hm,s$ as hn,uYe as ho,Ofe as hp,qR as hq,ME as hr,Uge as hs,Vge as ht,oUe as hu,bc as hv,i9e as hw,C9 as hx,fit as hy,ait as hz,yVe as i,aEe as i$,mat as i0,pBe as i1,vx as i2,yN as i3,Hae as i4,uL as i5,Wae as i6,I7e as i7,ZF as i8,TA as i9,gct as iA,ant as iB,Hv as iC,qfe as iD,AEe as iE,CLe as iF,GS as iG,AZe as iH,US as iI,IG as iJ,Ert as iK,Irt as iL,ve as iM,JEe as iN,Axe as iO,dT as iP,tnt as iQ,Rv as iR,t0e as iS,Bnt as iT,Gnt as iU,STe as iV,vie as iW,w2 as iX,Jfe as iY,$K as iZ,Ln as i_,i4 as ia,MM as ib,p2 as ic,Do as id,bF as ie,gtt as ig,Iq as ih,Ec as ii,Nte as ij,bN as ik,Vit as il,SAe as im,b7e as io,Qr as ip,S7e as iq,qae as ir,xje as is,y2 as it,rn as iu,aS as iv,gn as iw,fBe as ix,zYe as iy,Mhe as iz,Y_ as j,$U as j$,yGe as j0,Qdt as j1,yft as j2,oEe as j3,Fs as j4,frt as j5,LK as j6,KQe as j7,h6 as j8,Vft as j9,rQe as jA,l9e as jB,em as jC,pVe as jD,aVe as jE,Tje as jF,dB as jG,qse as jH,PVe as jI,zje as jJ,LD as jK,XT as jL,N7 as jM,JO as jN,kD as jO,JT as jP,PDe as jQ,Lje as jR,zD as jS,CVe as jT,QIe as jU,XIe as jV,HIe as jW,$8 as jX,_c as jY,zo as jZ,kve as j_,eet as ja,hft as jb,lm as jc,L7e as jd,Dit as je,v7e as jf,bit as jg,fU as jh,Wte as ji,Zte as jj,br as jk,xXe as jl,dse as jm,mAe as jn,fse as jo,BEe as jp,Nit as jq,Mbe as jr,bne as js,u9 as jt,SPe as ju,att as jv,xAe as jw,Pn as jx,Bj as jy,qXe as jz,qet as k,OAe as k$,ide as k0,tf as k1,tbe as k2,Ac as k3,sl as k4,wu as k5,z_ as k6,RD as k7,jje as k8,Dje as k9,va as kA,nl as kB,wi as kC,Xet as kD,vL as kE,A3 as kF,zae as kG,gF as kH,Pft as kI,MXe as kJ,pFe as kK,$Xe as kL,e0e as kM,kft as kN,md as kO,$f as kP,s0e as kQ,Rft as kR,HS as kS,YXe as kT,YF as kU,Nlt as kV,TXe as kW,gXe as kX,Exe as kY,wft as kZ,cAe as k_,Nje as ka,Yv as kb,xpt as kc,Lj as kd,BR as ke,Zut as kf,qut as kg,Wut as kh,Jet as ki,Oj as kj,o$ as kk,FYe as kl,oa as km,_2 as kn,et as ko,Zl as kp,gq as kq,eot as kr,E7e as ks,Gq as kt,mq as ku,Ttt as kv,_S as kw,ltt as kx,PI as ky,ewe as kz,_ht as l,cze as l$,II as l0,A7e as l1,Cbe as l2,mne as l3,Nf as l4,SI as l5,hAe as l6,cle as l7,Yte as l8,_xe as l9,o9e as lA,aue as lB,wht as lC,Vhe as lD,cN as lE,Pc as lF,b1 as lG,$L as lH,$ht as lI,gze as lJ,vze as lK,ru as lL,tpt as lM,f2 as lN,yd as lO,MD as lP,Ace as lQ,Um as lR,kct as lS,que as lT,d7 as lU,rze as lV,oze as lW,kje as lX,Tce as lY,Ice as lZ,Ece as l_,Npt as la,dR as lb,Qlt as lc,Ha as ld,v_e as le,Tit as lf,gie as lg,Er as lh,$je as li,cI as lj,U$e as lk,jF as ll,B$e as lm,q$e as ln,sf as lo,Khe as lp,Rve as lq,w_ as lr,dje as ls,Oze as lt,Sje as lu,Hje as lv,pze as lw,ize as lx,_te as ly,$te as lz,VS as m,HXe as m$,Bje as m0,qje as m1,Zje as m2,Jje as m3,sze as m4,Kje as m5,Yje as m6,Xje as m7,Qje as m8,eze as m9,MPe as mA,yq as mB,nat as mC,sat as mD,cat as mE,hat as mF,oat as mG,aat as mH,lat as mI,uat as mJ,ON as mK,v3e as mL,U3e as mM,Z6 as mN,G3e as mO,CF as mP,Knt as mQ,Wnt as mR,jfe as mS,W2e as mT,Dtt as mU,J7e as mV,K7e as mW,_ve as mX,EJ as mY,nMe as mZ,hle as m_,tze as ma,tde as mb,M2e as mc,zN as md,Qs as me,e8 as mf,Ene as mg,Ze as mh,tn as mi,Zst as mj,Cwe as mk,fj as ml,QI as mm,fWe as mn,ic as mo,cs as mp,G as mq,Ge as mr,cv as ms,PWe as mt,AWe as mu,Xt as mv,LS as mw,bi as mx,jut as my,Nut as mz,Q_ as n,lit as n$,tft as n0,tr as n1,y3e as n2,S3e as n3,dS as n4,_it as n5,Dg as n6,nm as n7,eke as n8,ike as n9,iS as nA,F8e as nB,wL as nC,Zat as nD,Eq as nE,Xa as nF,Sle as nG,Lh as nH,xq as nI,Jat as nJ,fq as nK,O3e as nL,L3e as nM,$I as nN,gat as nO,vat as nP,wat as nQ,S8e as nR,wct as nS,bct as nT,vct as nU,Rn as nV,kke as nW,Ive as nX,tit as nY,Rwe as nZ,j6 as n_,rke as na,nK as nb,Wht as nc,Jqe as nd,YJ as ne,tm as nf,YI as ng,s9 as nh,TFe as ni,m_e as nj,Kit as nk,ste as nl,Btt as nm,Gtt as nn,jke as no,Rut as np,IPe as nq,nwe as nr,ote as ns,ott as nt,xve as nu,Wit as nv,Gt as nw,llt as nx,J as ny,hit as nz,Bet as o,GEe as o$,fc as o0,Kut as o1,act as o2,Xfe as o3,MS as o4,pft as o5,nXe as o6,lrt as o7,art as o8,Ypt as o9,V6e as oA,U6e as oB,Lct as oC,Die as oD,Cit as oE,lS as oF,_oe as oG,nle as oH,P8e as oI,coe as oJ,e2 as oK,mnt as oL,dze as oM,Opt as oN,of as oO,JZ as oP,__ as oQ,$Ve as oR,Wh as oS,RF as oT,Aoe as oU,BTe as oV,A2 as oW,qw as oX,jCe as oY,YEe as oZ,bXe as o_,kLe as oa,ud as ob,v0e as oc,dr as od,Dft as oe,JQe as of,d6 as og,Rf as oh,ld as oi,gu as oj,Iae as ok,jft as ol,YQe as om,ctt as on,htt as oo,utt as op,hd as oq,Jwe as or,ky as os,M2 as ot,bm as ou,gT as ov,kWe as ow,Ps as ox,yWe as oy,rK as oz,fm as p,xN as p$,qEe as p0,_n as p1,U5e as p2,Koe as p3,Joe as p4,h$e as p5,Mat as p6,$ae as p7,xI as p8,Zv as p9,Qut as pA,ect as pB,oct as pC,WW as pD,ict as pE,nct as pF,rct as pG,vm as pH,au as pI,But as pJ,JPe as pK,jit as pL,tse as pM,Ect as pN,oet as pO,Dpt as pP,sMe as pQ,jpt as pR,_7e as pS,mMe as pT,Xh as pU,Rit as pV,vF as pW,rit as pX,tte as pY,Hnt as pZ,qnt as p_,IT as pa,oL as pb,zF as pc,O2 as pd,ftt as pe,wF as pf,pf as pg,wje as ph,bje as pi,Ije as pj,Jze as pk,dVe as pl,dee as pm,Ate as pn,TN as po,Qtt as pp,Kte as pq,oU as pr,nse as ps,xke as pt,uit as pu,yht as pv,HW as pw,Yut as px,Xut as py,tct as pz,tN as q,$_ as q$,oIe as q0,fne as q1,rIe as q2,gAe as q3,iIe as q4,TTe as q5,Kee as q6,il as q7,SD as q8,LOe as q9,xct as qA,Tm as qB,qFe as qC,ty as qD,eo as qE,GL as qF,pv as qG,ttt as qH,vve as qI,ett as qJ,_ft as qK,UXe as qL,bft as qM,est as qN,Qnt as qO,Yat as qP,n6 as qQ,uht as qR,B4e as qS,poe as qT,cht as qU,iAe as qV,G$e as qW,opt as qX,rpt as qY,O_e as qZ,cit as q_,Hm as qa,sct as qb,cct as qc,uct as qd,eNe as qe,tNe as qf,EXe as qg,Tq as qh,Wat as qi,N8e as qj,kq as qk,Aq as ql,NXe as qm,Iit as qn,Eit as qo,r9e as qp,EFe as qq,CFe as qr,ZEe as qs,HEe as qt,WEe as qu,ES as qv,IS as qw,TS as qx,BS as qy,T7e as qz,wj as r,CS as r$,B7e as r0,TDe as r1,IDe as r2,Ist as r3,Tst as r4,$st as r5,ij as r6,V2 as r7,mD as r8,sNe as r9,Qy as rA,u6e as rB,o6e as rC,Oo as rD,X0 as rE,as as rF,Dze as rG,Fat as rH,ble as rI,hPe as rJ,PS as rK,mPe as rL,TPe as rM,Zit as rN,yst as rO,Fft as rP,Mf as rQ,gft as rR,Sit as rS,$ut as rT,jat as rU,Dat as rV,Xot as rW,Qot as rX,wH as rY,gc as rZ,TT as r_,oNe as ra,z2 as rb,fce as rc,URe as rd,INe as re,GRe as rf,_ce as rg,GI as rh,hce as ri,R3 as rj,yat as rk,jq as rl,eat as rm,cLe as rn,Fn as ro,kT as rp,Dae as rq,Vae as rr,e7e as rs,tot as rt,u7e as ru,iot as rv,ZT as rw,DEe as rx,hnt as ry,ba as rz,ne as s,fXe as s$,JA as s0,HQe as s1,Nc as s2,ZQe as s3,P0e as s4,Plt as s5,sXe as s6,zlt as s7,AK as s8,Mo as s9,cZe as sA,A3e as sB,tZe as sC,VYe as sD,qYe as sE,r3 as sF,OK as sG,WR as sH,SQe as sI,Zbe as sJ,Pj as sK,yit as sL,T0e as sM,s6 as sN,tz as sO,vQe as sP,rXe as sQ,xQe as sR,Kpt as sS,Vlt as sT,I_ as sU,ute as sV,Apt as sW,YB as sX,fUe as sY,Nj as sZ,jYe as s_,jlt as sa,Rlt as sb,ALe as sc,die as sd,mit as se,Lft as sf,Wpt as sg,CZe as sh,iMe as si,vMe as sj,ple as sk,yXe as sl,qS as sm,zft as sn,i0e as so,wMe as sp,Mit as sq,ev as sr,cie as ss,Wbe as st,Hbe as su,Ry as sv,Qh as sw,DMe as sx,VF as sy,$it as sz,CE as t,twe as t$,Yl as t0,BYe as t1,vft as t2,lMe as t3,uMe as t4,rat as t5,$Me as t6,ey as t7,Bq as t8,Cle as t9,MN as tA,BA as tB,brt as tC,git as tD,Xlt as tE,F2 as tF,Ult as tG,Hlt as tH,FT as tI,Glt as tJ,Blt as tK,qlt as tL,Klt as tM,Wlt as tN,Zlt as tO,Jlt as tP,Ylt as tQ,W6 as tR,Fpt as tS,tue as tT,Lg as tU,DF as tV,F6 as tW,wue as tX,Gbe as tY,dit as tZ,pit as t_,Oat as ta,Rat as tb,Pat as tc,Nat as td,_at as te,xat as tf,Sat as tg,tke as th,yn as ti,GT as tj,ZJ as tk,Yot as tl,Nct as tm,_H as tn,Eje as to,xnt as tp,vnt as tq,bnt as tr,wnt as ts,_nt as tt,so as tu,K6e as tv,slt as tw,kV as tx,gnt as ty,Vte as tz,bht as u,yut as u$,int as u0,ha as u1,Lke as u2,Xpt as u3,eI as u4,olt as u5,zH as u6,PH as u7,I3e as u8,NH as u9,wut as uA,but as uB,bat as uC,vW as uD,kH as uE,xH as uF,EH as uG,IH as uH,BH as uI,gW as uJ,bW as uK,LH as uL,vT as uM,Git as uN,gut as uO,vut as uP,Cat as uQ,Cut as uR,OL as uS,fut as uT,Jce as uU,cut as uV,Due as uW,zT as uX,mut as uY,fRe as uZ,cRe as u_,pRe as ua,XH as ub,FH as uc,trt as ud,GH as ue,oW as uf,aW as ug,lW as uh,q3e as ui,Ait as uj,$3e as uk,uW as ul,kit as um,g7e as un,put as uo,RL as up,dut as uq,Mut as ur,Iut as us,Sut as ut,_ut as uu,xut as uv,Eut as uw,EW as ux,IW as uy,TW as uz,bj as v,npt as v$,uRe as v0,VT as v1,$T as v2,dRe as v3,$at as v4,Tat as v5,hut as v6,j8e as v7,Iat as v8,Vq as v9,fat as vA,J8e as vB,nlt as vC,Kot as vD,Yit as vE,Eie as vF,Bat as vG,qat as vH,MFe as vI,dIe as vJ,xae as vK,cne as vL,nte as vM,hIe as vN,zXe as vO,BVe as vP,Oxe as vQ,xMe as vR,grt as vS,Xte as vT,nPe as vU,A_e as vV,Uct as vW,Vct as vX,Cv as vY,pq as vZ,spt as v_,tat as va,iat as vb,kat as vc,Aat as vd,zat as ve,Vat as vf,dat as vg,Uat as vh,Gat as vi,_8e as vj,I8e as vk,Gle as vl,Av as vm,Lat as vn,sit as vo,$7e as vp,t3e as vq,e3e as vr,vit as vs,Dve as vt,tlt as vu,ilt as vv,rlt as vw,X8e as vx,Mle as vy,pat as vz,QP as w,uDe as w$,eHe as w0,EU as w1,k7e as w2,une as w3,es as w4,ube as w5,ast as w6,lst as w7,SIe as w8,_Ie as w9,Hit as wA,cst as wB,Xv as wC,L4e as wD,DCe as wE,rle as wF,ptt as wG,cx as wH,LG as wI,lnt as wJ,wT as wK,_ct as wL,Em as wM,gpe as wN,apt as wO,DL as wP,Tft as wQ,C8e as wR,wXe as wS,fAe as wT,rst as wU,zEe as wV,Jnt as wW,ARe as wX,uut as wY,Gue as wZ,Pg as w_,LAe as wa,Rt as wb,rnt as wc,aht as wd,VE as we,ntt as wf,lIe as wg,bIe as wh,aL as wi,Dce as wj,IFe as wk,Z$e as wl,Kst as wm,Mpt as wn,Hpt as wo,ENe as wp,VTe as wq,pst as wr,nst as ws,ist as wt,dtt as wu,xst as wv,Sst as ww,stt as wx,d_e as wy,Xnt as wz,_j as x,FTe as x0,ETe as x1,che as x2,xde as x3,Ede as x4,ADe as x5,Wv as x6,tMe as x7,Pit as x8,pMe as x9,nF as xA,Cee as xB,vtt as xC,GYe as xD,ost as xE,mft as xF,QEe as xG,KEe as xH,Cct as xI,Ict as xJ,JYe as xK,Ai as xL,Flt as xM,_Xe as xN,UT as xO,CB as xP,Act as xQ,aIe as xR,Trt as xS,Mrt as xT,clt as xU,zut as xV,Im as xW,Cht as xX,wpt as xY,xTe as xa,Eft as xb,jtt as xc,fS as xd,Tct as xe,hO as xf,vS as xg,Vfe as xh,XQe as xi,ont as xj,nft as xk,ZYe as xl,rft as xm,sft as xn,ml as xo,$ct as xp,Mct as xq,sst as xr,DYe as xs,Cpt as xt,snt as xu,kB as xv,nnt as xw,Jit as xx,Rj as xy,AB as xz,Het as y,xj as z};
