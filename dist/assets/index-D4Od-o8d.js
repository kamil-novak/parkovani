const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./statsWorker-B6ejef_2.js","./utils-C1c8Nnqb.js","./utils-BZb9qK1I.js","./ClassBreaksDefinition-jwdYWd8a.js","./geometryEngineWorker-BYrbZnN9.js","./geometryEngineJSON--yhNuyeh.js","./json-Wa8cmqdu.js","./CSVSourceWorker-sNVfJXq7.js","./date-DLgTylpo.js","./FeatureStore-zeiNqg7Y.js","./featureConversionUtils-CFCp-8n_.js","./BoundsStore-Dn5m8syx.js","./PooledRBush-DEe28VGY.js","./timeSupport-B8JlY6gQ.js","./queryUtils-CVhBbVe_.js","./optimizedFeatureQueryEngineAdapter-CEDr-Hw3.js","./QueryEngine-CoxH-xI3.js","./WhereClause-Da2PkydK.js","./QueryEngineCapabilities-DjYb9CEb.js","./number-CiWGGKdJ.js","./clientSideDefaults-BvyWwuHP.js","./capabilities-Y9lFlGVh.js","./EdgeProcessingWorker-PCl3bwbr.js","./InterleavedLayout-BDhpYmhj.js","./BufferView-Cjy1PqTP.js","./types-D0PSWh4d.js","./Util-D-7ETPcb.js","./edgeProcessing-CcA6SPdp.js","./deduplicate-DgCNhysj.js","./Indices-CmE44ZyP.js","./VertexAttribute-BdZWZuT1.js","./glUtil-DWxsV2ia.js","./VertexElementDescriptor-BOD-G50G.js","./ElevationSamplerWorker-BEVr7cu_.js","./MeshLocalVertexSpace-BSlvHPtj.js","./vertexSpaceConversion-BLtZbReN.js","./mat3f64-q3fE-ZOt.js","./mat4f64-CSKppSlJ.js","./spatialReferenceEllipsoidUtils-Co9TBNA4.js","./computeTranslationToOriginAndRotation-BWwRiflS.js","./projectPointToVector-CIoPsCrV.js","./meshVertexSpaceUtils-CQ_gbrll.js","./vec3-Bcmjz94M.js","./vec4-5VNdSG3f.js","./FeatureServiceSnappingSourceWorker-BbFooa33.js","./GeoJSONSourceWorker-lwrgy8ld.js","./geojson-D00wrLMJ.js","./sourceUtils-138_PNAp.js","./MemorySourceWorker-DyoTHc3Q.js","./objectIdUtils-4dd1rf9p.js","./PBFDecoderWorker-Bhldl2sC.js","./FeaturePipelineWorker-CDy2MbZD.js","./AttributeStore-Byn1xt7U.js","./LabelMetric-DeB1W6SG.js","./Program-1I7AF8k5.js","./BufferObject-C4tA8CKk.js","./BoundingBox-BJ9vWhBa.js","./CIMSymbolHelper-B3shCYla.js","./BidiEngine-DNnuvc1i.js","./fontUtils-JhZtaZ7H.js","./GeometryUtils-C_NP4zgs.js","./Rect-CUzevAry.js","./UpdateTracking2D-7ZvJnNdH.js","./BindType-BmZEZMMh.js","./MeshWriterRegistry-HZ40TTTz.js","./PieChartMeshWriter-BgzYb9VW.js","./TurboLine-CMUbUWeF.js","./earcut-Lltz9D9k.js","./constants-F8oTIn7N.js","./grouping-Bk8Baxwk.js","./ogcFeatureUtils-BXQuiNu0.js","./CircularArray-CujHzHWW.js","./createConnection-eEjA9IcA.js","./PointCloudWorker-DVsurT8t.js","./quat-pe48JRX5.js","./quatf64-aQ5IuZRd.js","./vec3f32-nZdmKIgz.js","./PointCloudUniqueValueRenderer-COjkL_UN.js","./I3SBinaryReader-D24bQ2k7.js","./orientedBoundingBox-CAdz8kDj.js","./plane-BtAvP8ju.js","./RasterWorker-D44Hqxej.js","./dataUtils-DNJ-sadI.js","./RasterSymbolizer-shDj5Wni.js","./PolynomialTransform-BiCf5b5d.js","./rasterProjectionHelper-Bx0j0B0T.js","./SceneLayerSnappingSourceWorker-Qw_MaMZT.js","./lineSegment-CdJjOG0x.js","./sphere-DdkVOk59.js","./Octree-XzX3bx_M.js","./SceneLayerWorker-BC85UkvT.js","./I3SUtil-Ba78iKkw.js","./projectVectorToVector-C3Wbtp7O.js","./floatRGBA-CZxirB5Q.js","./NormalAttribute.glsl-C5roiXA7.js","./interfaces-DDtDqZYj.js","./WFSSourceWorker-BpjgJROC.js","./wfsUtils-BclPKhDH.js","./xmlUtils-CtUoQO7q.js","./WorkerTileHandler-CUE4nuRZ.js","./enums-BRzLM11V.js","./config-MDUrh2eL.js","./StyleDefinition-BN496ay0.js","./SourceLayerData-DvW6hUqj.js","./StyleRepository-1E5MOjBR.js","./Feature3DPipelineWorker-C3_z453b.js","./RealisticTree.glsl-BxvsEgYV.js","./requestImageUtils-DzhwI2wv.js","./basicInterfaces-CZwQPxTp.js","./renderState-BLYWurbN.js","./boundedPlane-B7xVLj09.js","./doublePrecisionUtils-B0owpBza.js","./NestedMap-GuqgquCN.js","./IntersectorInterfaces-dI_rFEZm.js","./VertexArrayObject-BPULK6Xw.js","./triangle-Nf6GZtb7.js","./ElevationLayer-BSEDl5LO.js","./ArcGISCachedService-DjOcjOio.js","./TileInfoTilemapCache-DLM53GtI.js","./TilemapCache-CAzNcjLA.js","./layersCreator-Bk3Vrhvd.js","./portalLayers-oPluhZvJ.js","./associatedFeatureServiceUtils-CiLkbKME.js","./fetchService-qZTGOpud.js","./arcgisLayers-DYwWSvSq.js","./arcadeUtils-Dgeq8uIM.js","./languageUtils-DjPXD1GG.js","./ImmutableArray-BPVd6ESQ.js","./webglDeps-B2ljvO3v.js","./ProgramTemplate-BCbaWXRe.js","./mapViewDeps-D6IMO78u.js","./FeatureCommandQueue-DZkKYHbg.js","./WGLContainer-CRDpR5Cd.js","./Container-KnilnIWh.js","./SDFHelper-jTzRY_uq.js","./GridShader-8O9KEepa.js","./testSVGPremultipliedAlpha-CRFAlMoZ.js","./RenderingContext-CZZ-BMSO.js","./CIMResourceManager-BijS7BKn.js","./rasterizingUtils-D1j_GutB.js","./utils-BKU9iH85.js","./GraphicsView2D-Ck-GpaYq.js","./normalizeUtilsSync-B1xDH6eI.js","./GraphicContainer-VrdItW8C.js","./AGraphicContainer-Clq2u-7o.js","./TechniqueInstance-Bbihk7H5.js","./TileContainer-CN2KvzMA.js","./geodesicUtils-BQiz6wH-.js","./TileLayerView2D-BzmlRU9F.js","./imageUtils-DntT96Ky.js","./Bitmap-B4I-LGaj.js","./LayerView-B7rVHDv1.js","./HighlightGraphicContainer-BXmSIk4-.js","./RefreshableLayerView-CRVgUCQs.js","./MapServiceLayerViewHelper-3sIyrKqV.js","./drapedUtils-CFj64zrb.js","./popupUtils-DWBmbsRN.js","./FeatureLayerView2D-0eP8lVAo.js","./timeSupport-CNl1C36Z.js","./HighlightCounter-Czi-fdpx.js","./BaseDynamicLayerView2D-BMDmjYLW.js","./BitmapContainer-D8mf0yhx.js","./ExportStrategy-D2z8JSbY.js","./CatalogLayerView2D-6b2xZqae.js","./CatalogDynamicGroupLayerView2D-BJoF5dkI.js","./CatalogFootprintLayerView2D-BP4mgZwN.js","./GeoRSSLayerView2D-WdqgMNNa.js","./GraphicsLayerView2D-CWdiz3I_.js","./GroupLayerView2D-BfuTbps7.js","./ImageryLayerView2D-SfxvjMoe.js","./RasterVFDisplayObject-BkL2AL-7.js","./ImageryTileLayerView2D-CYymVql0.js","./multidimensionalUtils-BvKbEeTs.js","./rasterUtils-BH6YF5h7.js","./RawBlockCache-BlAKzwGM.js","./KMLLayerView2D-g04b8j_1.js","./kmlUtils-D9N7B0Dp.js","./KnowledgeGraphLayerView2D-kDFgN2J9.js","./MapImageLayerView2D-CFttwCh3.js","./MapNotesLayerView2D-ZNwAmJBg.js","./MediaLayerView2D-BIFHTjNI.js","./perspectiveUtils-pr_eF9Lp.js","./OverlayContainer-9jT7CkNU.js","./OGCFeatureLayerView2D-CNulkeY7.js","./RouteLayerView2D-OExzSSZv.js","./Stop-BU3XygGl.js","./StreamLayerView2D-D0MVIs1H.js","./SubtypeGroupLayerView2D-BIO-RIKy.js","./VectorTileLayerView2D-4UlRjrkp.js","./VideoLayerView2D-CFqeIXgI.js","./TelemetryDisplay-CvMo_CJ4.js","./WMSLayerView2D-DxfDxPjm.js","./ExportWMSImageParameters-CrQXKYqQ.js","./WMTSLayerView2D-XfBYjm3d.js","./calcite-button-D1yBd9JN.js","./loader-BqxEyYXa.js","./chartUtilsAm5-DYrSsftN.js","./Theme-ClbMBjcu.js","./Tooltip-uKg3IkJP.js","./DefaultTheme-B80_zRFB.js","./chartCommon-Bfi5Ci5r.js","./Button-DdUvYd4i.js","./ColorSet-8mlrK4Rf.js","./pieChart-BCZUHcQX.js","./Tick-DC9KcVrr.js","./xyChart-SRfqvlcO.js","./editingSupport-CBVSksVV.js","./infoFor3D-CxdEiWhp.js","./layersLoader-C5T_RXGy.js","./featureLayerUtils-C6r47wVG.js","./originUtils-D69mHv66.js","./multiOriginJSONSupportUtils-C0wm8_Yw.js","./utils-BwReJyd-.js","./saveUtils-CYHklZk9.js","./FeatureLayerSource-D_cNvJcR.js","./External-CYrhUH4O.js","./MeshTransform-DiWSXi_0.js","./QueryTask-Cn7XtZWL.js","./executeForIds-Cha3BPbe.js","./BinsQuery-CE_WsoNH.js","./arcade-lLZ1f-FO.js","./calcite-loader-CkzKaCO4.js","./calcite-list-BeSrBmBe.js","./resources4-DXHY1U7R.js","./utils3-BknDitnj.js","./scrim-SlKmN09S.js","./calcite-list-item-bKE4O7k7.js","./action-7Jz2h7BF.js","./calcite-notice-ikeUYD1p.js","./openCloseComponent-ZIFYUdgG.js","./calcite-tooltip-BuTh6UsD.js","./floating-ui-DmCfJAMY.js","./FloatingArrow-JPoMcU8B.js","./calcite-action-e4eforA9.js","./calcite-action-bar-676MELkr.js","./action-group-iHEX5bBH.js","./action-menu-Csb3y_Zn.js","./popover-DFuIQ12f.js","./focusTrapComponent-uUD_fWB3.js","./calcite-action-group-L5zDZYe4.js","./calcite-flow-item-B-gbMQQs.js","./panel-CN3aZb4E.js","./previewSymbol2D-DlJOl5cI.js","./previewCIMSymbol-B8Q4vCkH.js","./calcite-list-item-group-CvuYwOeK.js","./webdocSaveUtils-830gRlN7.js","./resourceUtils-B_KWfJnC.js","./resourceUtils-D9hMAh-w.js","./calcite-scrim-DFbXMhDp.js","./calcite-panel-CX4-qvlW.js","./calcite-popover-CLa6Jcn3.js","./calcite-sheet-BZc7DgG6.js","./calcite-action-menu-DBcMFMLk.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();function KH(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var YH={exports:{}},F4={},XH={exports:{}},Vt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K2=Symbol.for("react.element"),Tce=Symbol.for("react.portal"),$ce=Symbol.for("react.fragment"),Ece=Symbol.for("react.strict_mode"),Mce=Symbol.for("react.profiler"),Ace=Symbol.for("react.provider"),Cce=Symbol.for("react.context"),kce=Symbol.for("react.forward_ref"),Lce=Symbol.for("react.suspense"),Oce=Symbol.for("react.memo"),Rce=Symbol.for("react.lazy"),yN=Symbol.iterator;function Pce(e){return e===null||typeof e!="object"?null:(e=yN&&e[yN]||e["@@iterator"],typeof e=="function"?e:null)}var QH={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},eW=Object.assign,tW={};function Ig(e,t,i){this.props=e,this.context=t,this.refs=tW,this.updater=i||QH}Ig.prototype.isReactComponent={};Ig.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ig.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function iW(){}iW.prototype=Ig.prototype;function Vk(e,t,i){this.props=e,this.context=t,this.refs=tW,this.updater=i||QH}var Uk=Vk.prototype=new iW;Uk.constructor=Vk;eW(Uk,Ig.prototype);Uk.isPureReactComponent=!0;var mN=Array.isArray,rW=Object.prototype.hasOwnProperty,Bk={current:null},nW={key:!0,ref:!0,__self:!0,__source:!0};function sW(e,t,i){var r,n={},o=null,c=null;if(t!=null)for(r in t.ref!==void 0&&(c=t.ref),t.key!==void 0&&(o=""+t.key),t)rW.call(t,r)&&!nW.hasOwnProperty(r)&&(n[r]=t[r]);var y=arguments.length-2;if(y===1)n.children=i;else if(1<y){for(var v=Array(y),_=0;_<y;_++)v[_]=arguments[_+2];n.children=v}if(e&&e.defaultProps)for(r in y=e.defaultProps,y)n[r]===void 0&&(n[r]=y[r]);return{$$typeof:K2,type:e,key:o,ref:c,props:n,_owner:Bk.current}}function Nce(e,t){return{$$typeof:K2,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Gk(e){return typeof e=="object"&&e!==null&&e.$$typeof===K2}function Fce(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var gN=/\/+/g;function LT(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Fce(""+e.key):t.toString(36)}function AS(e,t,i,r,n){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var c=!1;if(e===null)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case K2:case Tce:c=!0}}if(c)return c=e,n=n(c),e=r===""?"."+LT(c,0):r,mN(n)?(i="",e!=null&&(i=e.replace(gN,"$&/")+"/"),AS(n,t,i,"",function(_){return _})):n!=null&&(Gk(n)&&(n=Nce(n,i+(!n.key||c&&c.key===n.key?"":(""+n.key).replace(gN,"$&/")+"/")+e)),t.push(n)),1;if(c=0,r=r===""?".":r+":",mN(e))for(var y=0;y<e.length;y++){o=e[y];var v=r+LT(o,y);c+=AS(o,t,i,v,n)}else if(v=Pce(e),typeof v=="function")for(e=v.call(e),y=0;!(o=e.next()).done;)o=o.value,v=r+LT(o,y++),c+=AS(o,t,i,v,n);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function Z3(e,t,i){if(e==null)return e;var r=[],n=0;return AS(e,r,"","",function(o){return t.call(i,o,n++)}),r}function Dce(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Rs={current:null},CS={transition:null},jce={ReactCurrentDispatcher:Rs,ReactCurrentBatchConfig:CS,ReactCurrentOwner:Bk};function oW(){throw Error("act(...) is not supported in production builds of React.")}Vt.Children={map:Z3,forEach:function(e,t,i){Z3(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return Z3(e,function(){t++}),t},toArray:function(e){return Z3(e,function(t){return t})||[]},only:function(e){if(!Gk(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Vt.Component=Ig;Vt.Fragment=$ce;Vt.Profiler=Mce;Vt.PureComponent=Vk;Vt.StrictMode=Ece;Vt.Suspense=Lce;Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jce;Vt.act=oW;Vt.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=eW({},e.props),n=e.key,o=e.ref,c=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,c=Bk.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var y=e.type.defaultProps;for(v in t)rW.call(t,v)&&!nW.hasOwnProperty(v)&&(r[v]=t[v]===void 0&&y!==void 0?y[v]:t[v])}var v=arguments.length-2;if(v===1)r.children=i;else if(1<v){y=Array(v);for(var _=0;_<v;_++)y[_]=arguments[_+2];r.children=y}return{$$typeof:K2,type:e.type,key:n,ref:o,props:r,_owner:c}};Vt.createContext=function(e){return e={$$typeof:Cce,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ace,_context:e},e.Consumer=e};Vt.createElement=sW;Vt.createFactory=function(e){var t=sW.bind(null,e);return t.type=e,t};Vt.createRef=function(){return{current:null}};Vt.forwardRef=function(e){return{$$typeof:kce,render:e}};Vt.isValidElement=Gk;Vt.lazy=function(e){return{$$typeof:Rce,_payload:{_status:-1,_result:e},_init:Dce}};Vt.memo=function(e,t){return{$$typeof:Oce,type:e,compare:t===void 0?null:t}};Vt.startTransition=function(e){var t=CS.transition;CS.transition={};try{e()}finally{CS.transition=t}};Vt.unstable_act=oW;Vt.useCallback=function(e,t){return Rs.current.useCallback(e,t)};Vt.useContext=function(e){return Rs.current.useContext(e)};Vt.useDebugValue=function(){};Vt.useDeferredValue=function(e){return Rs.current.useDeferredValue(e)};Vt.useEffect=function(e,t){return Rs.current.useEffect(e,t)};Vt.useId=function(){return Rs.current.useId()};Vt.useImperativeHandle=function(e,t,i){return Rs.current.useImperativeHandle(e,t,i)};Vt.useInsertionEffect=function(e,t){return Rs.current.useInsertionEffect(e,t)};Vt.useLayoutEffect=function(e,t){return Rs.current.useLayoutEffect(e,t)};Vt.useMemo=function(e,t){return Rs.current.useMemo(e,t)};Vt.useReducer=function(e,t,i){return Rs.current.useReducer(e,t,i)};Vt.useRef=function(e){return Rs.current.useRef(e)};Vt.useState=function(e){return Rs.current.useState(e)};Vt.useSyncExternalStore=function(e,t,i){return Rs.current.useSyncExternalStore(e,t,i)};Vt.useTransition=function(){return Rs.current.useTransition()};Vt.version="18.3.1";XH.exports=Vt;var It=XH.exports;const c6=KH(It);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zce=It,Vce=Symbol.for("react.element"),Uce=Symbol.for("react.fragment"),Bce=Object.prototype.hasOwnProperty,Gce=zce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qce={key:!0,ref:!0,__self:!0,__source:!0};function aW(e,t,i){var r,n={},o=null,c=null;i!==void 0&&(o=""+i),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(c=t.ref);for(r in t)Bce.call(t,r)&&!qce.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:Vce,type:e,key:o,ref:c,props:n,_owner:Gce.current}}F4.Fragment=Uce;F4.jsx=aW;F4.jsxs=aW;YH.exports=F4;var it=YH.exports,h6={},lW={exports:{}},Bo={},uW={exports:{}},cW={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ce,xe){var Ne=ce.length;ce.push(xe);e:for(;0<Ne;){var Ze=Ne-1>>>1,lt=ce[Ze];if(0<n(lt,xe))ce[Ze]=xe,ce[Ne]=lt,Ne=Ze;else break e}}function i(ce){return ce.length===0?null:ce[0]}function r(ce){if(ce.length===0)return null;var xe=ce[0],Ne=ce.pop();if(Ne!==xe){ce[0]=Ne;e:for(var Ze=0,lt=ce.length,Ot=lt>>>1;Ze<Ot;){var Wt=2*(Ze+1)-1,tr=ce[Wt],Sr=Wt+1,Un=ce[Sr];if(0>n(tr,Ne))Sr<lt&&0>n(Un,tr)?(ce[Ze]=Un,ce[Sr]=Ne,Ze=Sr):(ce[Ze]=tr,ce[Wt]=Ne,Ze=Wt);else if(Sr<lt&&0>n(Un,Ne))ce[Ze]=Un,ce[Sr]=Ne,Ze=Sr;else break e}}return xe}function n(ce,xe){var Ne=ce.sortIndex-xe.sortIndex;return Ne!==0?Ne:ce.id-xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var c=Date,y=c.now();e.unstable_now=function(){return c.now()-y}}var v=[],_=[],I=1,$=null,A=3,k=!1,R=!1,N=!1,D=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(ce){for(var xe=i(_);xe!==null;){if(xe.callback===null)r(_);else if(xe.startTime<=ce)r(_),xe.sortIndex=xe.expirationTime,t(v,xe);else break;xe=i(_)}}function W(ce){if(N=!1,U(ce),!R)if(i(v)!==null)R=!0,ye(Q);else{var xe=i(_);xe!==null&&he(W,xe.startTime-ce)}}function Q(ce,xe){R=!1,N&&(N=!1,j(ie),ie=-1),k=!0;var Ne=A;try{for(U(xe),$=i(v);$!==null&&(!($.expirationTime>xe)||ce&&!Ie());){var Ze=$.callback;if(typeof Ze=="function"){$.callback=null,A=$.priorityLevel;var lt=Ze($.expirationTime<=xe);xe=e.unstable_now(),typeof lt=="function"?$.callback=lt:$===i(v)&&r(v),U(xe)}else r(v);$=i(v)}if($!==null)var Ot=!0;else{var Wt=i(_);Wt!==null&&he(W,Wt.startTime-xe),Ot=!1}return Ot}finally{$=null,A=Ne,k=!1}}var K=!1,ee=null,ie=-1,ae=5,ue=-1;function Ie(){return!(e.unstable_now()-ue<ae)}function Ae(){if(ee!==null){var ce=e.unstable_now();ue=ce;var xe=!0;try{xe=ee(!0,ce)}finally{xe?Me():(K=!1,ee=null)}}else K=!1}var Me;if(typeof z=="function")Me=function(){z(Ae)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,se=fe.port2;fe.port1.onmessage=Ae,Me=function(){se.postMessage(null)}}else Me=function(){D(Ae,0)};function ye(ce){ee=ce,K||(K=!0,Me())}function he(ce,xe){ie=D(function(){ce(e.unstable_now())},xe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ce){ce.callback=null},e.unstable_continueExecution=function(){R||k||(R=!0,ye(Q))},e.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<ce?Math.floor(1e3/ce):5},e.unstable_getCurrentPriorityLevel=function(){return A},e.unstable_getFirstCallbackNode=function(){return i(v)},e.unstable_next=function(ce){switch(A){case 1:case 2:case 3:var xe=3;break;default:xe=A}var Ne=A;A=xe;try{return ce()}finally{A=Ne}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ce,xe){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var Ne=A;A=ce;try{return xe()}finally{A=Ne}},e.unstable_scheduleCallback=function(ce,xe,Ne){var Ze=e.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?Ze+Ne:Ze):Ne=Ze,ce){case 1:var lt=-1;break;case 2:lt=250;break;case 5:lt=1073741823;break;case 4:lt=1e4;break;default:lt=5e3}return lt=Ne+lt,ce={id:I++,callback:xe,priorityLevel:ce,startTime:Ne,expirationTime:lt,sortIndex:-1},Ne>Ze?(ce.sortIndex=Ne,t(_,ce),i(v)===null&&ce===i(_)&&(N?(j(ie),ie=-1):N=!0,he(W,Ne-Ze))):(ce.sortIndex=lt,t(v,ce),R||k||(R=!0,ye(Q))),ce},e.unstable_shouldYield=Ie,e.unstable_wrapCallback=function(ce){var xe=A;return function(){var Ne=A;A=xe;try{return ce.apply(this,arguments)}finally{A=Ne}}}})(cW);uW.exports=cW;var Hce=uW.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wce=It,jo=Hce;function De(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hW=new Set,qb={};function V0(e,t){W1(e,t),W1(e+"Capture",t)}function W1(e,t){for(qb[e]=t,e=0;e<t.length;e++)hW.add(t[e])}var Wc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d6=Object.prototype.hasOwnProperty,Jce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vN={},wN={};function Zce(e){return d6.call(wN,e)?!0:d6.call(vN,e)?!1:Jce.test(e)?wN[e]=!0:(vN[e]=!0,!1)}function Kce(e,t,i,r){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Yce(e,t,i,r){if(t===null||typeof t>"u"||Kce(e,t,i,r))return!0;if(r)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ps(e,t,i,r,n,o,c){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=c}var Dn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Dn[e]=new Ps(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Dn[t]=new Ps(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Dn[e]=new Ps(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Dn[e]=new Ps(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Dn[e]=new Ps(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Dn[e]=new Ps(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Dn[e]=new Ps(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Dn[e]=new Ps(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Dn[e]=new Ps(e,5,!1,e.toLowerCase(),null,!1,!1)});var qk=/[\-:]([a-z])/g;function Hk(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(qk,Hk);Dn[t]=new Ps(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(qk,Hk);Dn[t]=new Ps(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(qk,Hk);Dn[t]=new Ps(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Dn[e]=new Ps(e,1,!1,e.toLowerCase(),null,!1,!1)});Dn.xlinkHref=new Ps("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Dn[e]=new Ps(e,1,!1,e.toLowerCase(),null,!0,!0)});function Wk(e,t,i,r){var n=Dn.hasOwnProperty(t)?Dn[t]:null;(n!==null?n.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Yce(t,i,n,r)&&(i=null),r||n===null?Zce(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):n.mustUseProperty?e[n.propertyName]=i===null?n.type===3?!1:"":i:(t=n.attributeName,r=n.attributeNamespace,i===null?e.removeAttribute(t):(n=n.type,i=n===3||n===4&&i===!0?"":""+i,r?e.setAttributeNS(r,t,i):e.setAttribute(t,i))))}var th=Wce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K3=Symbol.for("react.element"),Gm=Symbol.for("react.portal"),qm=Symbol.for("react.fragment"),Jk=Symbol.for("react.strict_mode"),p6=Symbol.for("react.profiler"),dW=Symbol.for("react.provider"),pW=Symbol.for("react.context"),Zk=Symbol.for("react.forward_ref"),f6=Symbol.for("react.suspense"),y6=Symbol.for("react.suspense_list"),Kk=Symbol.for("react.memo"),od=Symbol.for("react.lazy"),fW=Symbol.for("react.offscreen"),bN=Symbol.iterator;function iv(e){return e===null||typeof e!="object"?null:(e=bN&&e[bN]||e["@@iterator"],typeof e=="function"?e:null)}var lr=Object.assign,OT;function Bv(e){if(OT===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);OT=t&&t[1]||""}return`
`+OT+e}var RT=!1;function PT(e,t){if(!e||RT)return"";RT=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(_){var r=_}Reflect.construct(e,[],t)}else{try{t.call()}catch(_){r=_}e.call(t.prototype)}else{try{throw Error()}catch(_){r=_}e()}}catch(_){if(_&&r&&typeof _.stack=="string"){for(var n=_.stack.split(`
`),o=r.stack.split(`
`),c=n.length-1,y=o.length-1;1<=c&&0<=y&&n[c]!==o[y];)y--;for(;1<=c&&0<=y;c--,y--)if(n[c]!==o[y]){if(c!==1||y!==1)do if(c--,y--,0>y||n[c]!==o[y]){var v=`
`+n[c].replace(" at new "," at ");return e.displayName&&v.includes("<anonymous>")&&(v=v.replace("<anonymous>",e.displayName)),v}while(1<=c&&0<=y);break}}}finally{RT=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Bv(e):""}function Xce(e){switch(e.tag){case 5:return Bv(e.type);case 16:return Bv("Lazy");case 13:return Bv("Suspense");case 19:return Bv("SuspenseList");case 0:case 2:case 15:return e=PT(e.type,!1),e;case 11:return e=PT(e.type.render,!1),e;case 1:return e=PT(e.type,!0),e;default:return""}}function m6(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qm:return"Fragment";case Gm:return"Portal";case p6:return"Profiler";case Jk:return"StrictMode";case f6:return"Suspense";case y6:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case pW:return(e.displayName||"Context")+".Consumer";case dW:return(e._context.displayName||"Context")+".Provider";case Zk:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Kk:return t=e.displayName||null,t!==null?t:m6(e.type)||"Memo";case od:t=e._payload,e=e._init;try{return m6(e(t))}catch{}}return null}function Qce(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return m6(t);case 8:return t===Jk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Kd(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function yW(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ehe(e){var t=yW(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var n=i.get,o=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(c){r=""+c,o.call(this,c)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(c){r=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Y3(e){e._valueTracker||(e._valueTracker=ehe(e))}function mW(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),r="";return e&&(r=yW(e)?e.checked?"true":"false":e.value),e=r,e!==i?(t.setValue(e),!0):!1}function Mx(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function g6(e,t){var i=t.checked;return lr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function _N(e,t){var i=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;i=Kd(t.value!=null?t.value:i),e._wrapperState={initialChecked:r,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function gW(e,t){t=t.checked,t!=null&&Wk(e,"checked",t,!1)}function v6(e,t){gW(e,t);var i=Kd(t.value),r=t.type;if(i!=null)r==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?w6(e,t.type,i):t.hasOwnProperty("defaultValue")&&w6(e,t.type,Kd(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function SN(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function w6(e,t,i){(t!=="number"||Mx(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Gv=Array.isArray;function v1(e,t,i,r){if(e=e.options,t){t={};for(var n=0;n<i.length;n++)t["$"+i[n]]=!0;for(i=0;i<e.length;i++)n=t.hasOwnProperty("$"+e[i].value),e[i].selected!==n&&(e[i].selected=n),n&&r&&(e[i].defaultSelected=!0)}else{for(i=""+Kd(i),t=null,n=0;n<e.length;n++){if(e[n].value===i){e[n].selected=!0,r&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function b6(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(De(91));return lr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xN(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(De(92));if(Gv(i)){if(1<i.length)throw Error(De(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Kd(i)}}function vW(e,t){var i=Kd(t.value),r=Kd(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),r!=null&&(e.defaultValue=""+r)}function IN(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function wW(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _6(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?wW(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var X3,bW=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,r,n){MSApp.execUnsafeLocalFunction(function(){return e(t,i,r,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(X3=X3||document.createElement("div"),X3.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=X3.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Hb(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var lb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},the=["Webkit","ms","Moz","O"];Object.keys(lb).forEach(function(e){the.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),lb[t]=lb[e]})});function _W(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||lb.hasOwnProperty(e)&&lb[e]?(""+t).trim():t+"px"}function SW(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var r=i.indexOf("--")===0,n=_W(i,t[i],r);i==="float"&&(i="cssFloat"),r?e.setProperty(i,n):e[i]=n}}var ihe=lr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function S6(e,t){if(t){if(ihe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(De(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(De(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(De(61))}if(t.style!=null&&typeof t.style!="object")throw Error(De(62))}}function x6(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var I6=null;function Yk(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var T6=null,w1=null,b1=null;function TN(e){if(e=Q2(e)){if(typeof T6!="function")throw Error(De(280));var t=e.stateNode;t&&(t=U4(t),T6(e.stateNode,e.type,t))}}function xW(e){w1?b1?b1.push(e):b1=[e]:w1=e}function IW(){if(w1){var e=w1,t=b1;if(b1=w1=null,TN(e),t)for(e=0;e<t.length;e++)TN(t[e])}}function TW(e,t){return e(t)}function $W(){}var NT=!1;function EW(e,t,i){if(NT)return e(t,i);NT=!0;try{return TW(e,t,i)}finally{NT=!1,(w1!==null||b1!==null)&&($W(),IW())}}function Wb(e,t){var i=e.stateNode;if(i===null)return null;var r=U4(i);if(r===null)return null;i=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(De(231,t,typeof i));return i}var $6=!1;if(Wc)try{var rv={};Object.defineProperty(rv,"passive",{get:function(){$6=!0}}),window.addEventListener("test",rv,rv),window.removeEventListener("test",rv,rv)}catch{$6=!1}function rhe(e,t,i,r,n,o,c,y,v){var _=Array.prototype.slice.call(arguments,3);try{t.apply(i,_)}catch(I){this.onError(I)}}var ub=!1,Ax=null,Cx=!1,E6=null,nhe={onError:function(e){ub=!0,Ax=e}};function she(e,t,i,r,n,o,c,y,v){ub=!1,Ax=null,rhe.apply(nhe,arguments)}function ohe(e,t,i,r,n,o,c,y,v){if(she.apply(this,arguments),ub){if(ub){var _=Ax;ub=!1,Ax=null}else throw Error(De(198));Cx||(Cx=!0,E6=_)}}function U0(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function MW(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $N(e){if(U0(e)!==e)throw Error(De(188))}function ahe(e){var t=e.alternate;if(!t){if(t=U0(e),t===null)throw Error(De(188));return t!==e?null:e}for(var i=e,r=t;;){var n=i.return;if(n===null)break;var o=n.alternate;if(o===null){if(r=n.return,r!==null){i=r;continue}break}if(n.child===o.child){for(o=n.child;o;){if(o===i)return $N(n),e;if(o===r)return $N(n),t;o=o.sibling}throw Error(De(188))}if(i.return!==r.return)i=n,r=o;else{for(var c=!1,y=n.child;y;){if(y===i){c=!0,i=n,r=o;break}if(y===r){c=!0,r=n,i=o;break}y=y.sibling}if(!c){for(y=o.child;y;){if(y===i){c=!0,i=o,r=n;break}if(y===r){c=!0,r=o,i=n;break}y=y.sibling}if(!c)throw Error(De(189))}}if(i.alternate!==r)throw Error(De(190))}if(i.tag!==3)throw Error(De(188));return i.stateNode.current===i?e:t}function AW(e){return e=ahe(e),e!==null?CW(e):null}function CW(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=CW(e);if(t!==null)return t;e=e.sibling}return null}var kW=jo.unstable_scheduleCallback,EN=jo.unstable_cancelCallback,lhe=jo.unstable_shouldYield,uhe=jo.unstable_requestPaint,Mr=jo.unstable_now,che=jo.unstable_getCurrentPriorityLevel,Xk=jo.unstable_ImmediatePriority,LW=jo.unstable_UserBlockingPriority,kx=jo.unstable_NormalPriority,hhe=jo.unstable_LowPriority,OW=jo.unstable_IdlePriority,D4=null,Tu=null;function dhe(e){if(Tu&&typeof Tu.onCommitFiberRoot=="function")try{Tu.onCommitFiberRoot(D4,e,void 0,(e.current.flags&128)===128)}catch{}}var vl=Math.clz32?Math.clz32:yhe,phe=Math.log,fhe=Math.LN2;function yhe(e){return e>>>=0,e===0?32:31-(phe(e)/fhe|0)|0}var Q3=64,e_=4194304;function qv(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Lx(e,t){var i=e.pendingLanes;if(i===0)return 0;var r=0,n=e.suspendedLanes,o=e.pingedLanes,c=i&268435455;if(c!==0){var y=c&~n;y!==0?r=qv(y):(o&=c,o!==0&&(r=qv(o)))}else c=i&~n,c!==0?r=qv(c):o!==0&&(r=qv(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&n)&&(n=r&-r,o=t&-t,n>=o||n===16&&(o&4194240)!==0))return t;if(r&4&&(r|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)i=31-vl(t),n=1<<i,r|=e[i],t&=~n;return r}function mhe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ghe(e,t){for(var i=e.suspendedLanes,r=e.pingedLanes,n=e.expirationTimes,o=e.pendingLanes;0<o;){var c=31-vl(o),y=1<<c,v=n[c];v===-1?(!(y&i)||y&r)&&(n[c]=mhe(y,t)):v<=t&&(e.expiredLanes|=y),o&=~y}}function M6(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function RW(){var e=Q3;return Q3<<=1,!(Q3&4194240)&&(Q3=64),e}function FT(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Y2(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vl(t),e[t]=i}function vhe(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<i;){var n=31-vl(i),o=1<<n;t[n]=0,r[n]=-1,e[n]=-1,i&=~o}}function Qk(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var r=31-vl(i),n=1<<r;n&t|e[r]&t&&(e[r]|=t),i&=~n}}var bi=0;function PW(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var NW,eL,FW,DW,jW,A6=!1,t_=[],Pd=null,Nd=null,Fd=null,Jb=new Map,Zb=new Map,gd=[],whe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function MN(e,t){switch(e){case"focusin":case"focusout":Pd=null;break;case"dragenter":case"dragleave":Nd=null;break;case"mouseover":case"mouseout":Fd=null;break;case"pointerover":case"pointerout":Jb.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zb.delete(t.pointerId)}}function nv(e,t,i,r,n,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:i,eventSystemFlags:r,nativeEvent:o,targetContainers:[n]},t!==null&&(t=Q2(t),t!==null&&eL(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function bhe(e,t,i,r,n){switch(t){case"focusin":return Pd=nv(Pd,e,t,i,r,n),!0;case"dragenter":return Nd=nv(Nd,e,t,i,r,n),!0;case"mouseover":return Fd=nv(Fd,e,t,i,r,n),!0;case"pointerover":var o=n.pointerId;return Jb.set(o,nv(Jb.get(o)||null,e,t,i,r,n)),!0;case"gotpointercapture":return o=n.pointerId,Zb.set(o,nv(Zb.get(o)||null,e,t,i,r,n)),!0}return!1}function zW(e){var t=Bf(e.target);if(t!==null){var i=U0(t);if(i!==null){if(t=i.tag,t===13){if(t=MW(i),t!==null){e.blockedOn=t,jW(e.priority,function(){FW(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function kS(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=C6(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var r=new i.constructor(i.type,i);I6=r,i.target.dispatchEvent(r),I6=null}else return t=Q2(i),t!==null&&eL(t),e.blockedOn=i,!1;t.shift()}return!0}function AN(e,t,i){kS(e)&&i.delete(t)}function _he(){A6=!1,Pd!==null&&kS(Pd)&&(Pd=null),Nd!==null&&kS(Nd)&&(Nd=null),Fd!==null&&kS(Fd)&&(Fd=null),Jb.forEach(AN),Zb.forEach(AN)}function sv(e,t){e.blockedOn===t&&(e.blockedOn=null,A6||(A6=!0,jo.unstable_scheduleCallback(jo.unstable_NormalPriority,_he)))}function Kb(e){function t(n){return sv(n,e)}if(0<t_.length){sv(t_[0],e);for(var i=1;i<t_.length;i++){var r=t_[i];r.blockedOn===e&&(r.blockedOn=null)}}for(Pd!==null&&sv(Pd,e),Nd!==null&&sv(Nd,e),Fd!==null&&sv(Fd,e),Jb.forEach(t),Zb.forEach(t),i=0;i<gd.length;i++)r=gd[i],r.blockedOn===e&&(r.blockedOn=null);for(;0<gd.length&&(i=gd[0],i.blockedOn===null);)zW(i),i.blockedOn===null&&gd.shift()}var _1=th.ReactCurrentBatchConfig,Ox=!0;function She(e,t,i,r){var n=bi,o=_1.transition;_1.transition=null;try{bi=1,tL(e,t,i,r)}finally{bi=n,_1.transition=o}}function xhe(e,t,i,r){var n=bi,o=_1.transition;_1.transition=null;try{bi=4,tL(e,t,i,r)}finally{bi=n,_1.transition=o}}function tL(e,t,i,r){if(Ox){var n=C6(e,t,i,r);if(n===null)WT(e,t,r,Rx,i),MN(e,r);else if(bhe(n,e,t,i,r))r.stopPropagation();else if(MN(e,r),t&4&&-1<whe.indexOf(e)){for(;n!==null;){var o=Q2(n);if(o!==null&&NW(o),o=C6(e,t,i,r),o===null&&WT(e,t,r,Rx,i),o===n)break;n=o}n!==null&&r.stopPropagation()}else WT(e,t,r,null,i)}}var Rx=null;function C6(e,t,i,r){if(Rx=null,e=Yk(r),e=Bf(e),e!==null)if(t=U0(e),t===null)e=null;else if(i=t.tag,i===13){if(e=MW(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Rx=e,null}function VW(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(che()){case Xk:return 1;case LW:return 4;case kx:case hhe:return 16;case OW:return 536870912;default:return 16}default:return 16}}var Sd=null,iL=null,LS=null;function UW(){if(LS)return LS;var e,t=iL,i=t.length,r,n="value"in Sd?Sd.value:Sd.textContent,o=n.length;for(e=0;e<i&&t[e]===n[e];e++);var c=i-e;for(r=1;r<=c&&t[i-r]===n[o-r];r++);return LS=n.slice(e,1<r?1-r:void 0)}function OS(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function i_(){return!0}function CN(){return!1}function Go(e){function t(i,r,n,o,c){this._reactName=i,this._targetInst=n,this.type=r,this.nativeEvent=o,this.target=c,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(i=e[y],this[y]=i?i(o):o[y]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?i_:CN,this.isPropagationStopped=CN,this}return lr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=i_)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=i_)},persist:function(){},isPersistent:i_}),t}var Tg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rL=Go(Tg),X2=lr({},Tg,{view:0,detail:0}),Ihe=Go(X2),DT,jT,ov,j4=lr({},X2,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nL,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ov&&(ov&&e.type==="mousemove"?(DT=e.screenX-ov.screenX,jT=e.screenY-ov.screenY):jT=DT=0,ov=e),DT)},movementY:function(e){return"movementY"in e?e.movementY:jT}}),kN=Go(j4),The=lr({},j4,{dataTransfer:0}),$he=Go(The),Ehe=lr({},X2,{relatedTarget:0}),zT=Go(Ehe),Mhe=lr({},Tg,{animationName:0,elapsedTime:0,pseudoElement:0}),Ahe=Go(Mhe),Che=lr({},Tg,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),khe=Go(Che),Lhe=lr({},Tg,{data:0}),LN=Go(Lhe),Ohe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rhe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Phe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nhe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Phe[e])?!!t[e]:!1}function nL(){return Nhe}var Fhe=lr({},X2,{key:function(e){if(e.key){var t=Ohe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=OS(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Rhe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nL,charCode:function(e){return e.type==="keypress"?OS(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?OS(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Dhe=Go(Fhe),jhe=lr({},j4,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ON=Go(jhe),zhe=lr({},X2,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nL}),Vhe=Go(zhe),Uhe=lr({},Tg,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bhe=Go(Uhe),Ghe=lr({},j4,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qhe=Go(Ghe),Hhe=[9,13,27,32],sL=Wc&&"CompositionEvent"in window,cb=null;Wc&&"documentMode"in document&&(cb=document.documentMode);var Whe=Wc&&"TextEvent"in window&&!cb,BW=Wc&&(!sL||cb&&8<cb&&11>=cb),RN=" ",PN=!1;function GW(e,t){switch(e){case"keyup":return Hhe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qW(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hm=!1;function Jhe(e,t){switch(e){case"compositionend":return qW(t);case"keypress":return t.which!==32?null:(PN=!0,RN);case"textInput":return e=t.data,e===RN&&PN?null:e;default:return null}}function Zhe(e,t){if(Hm)return e==="compositionend"||!sL&&GW(e,t)?(e=UW(),LS=iL=Sd=null,Hm=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return BW&&t.locale!=="ko"?null:t.data;default:return null}}var Khe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function NN(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Khe[e.type]:t==="textarea"}function HW(e,t,i,r){xW(r),t=Px(t,"onChange"),0<t.length&&(i=new rL("onChange","change",null,i,r),e.push({event:i,listeners:t}))}var hb=null,Yb=null;function Yhe(e){rJ(e,0)}function z4(e){var t=Zm(e);if(mW(t))return e}function Xhe(e,t){if(e==="change")return t}var WW=!1;if(Wc){var VT;if(Wc){var UT="oninput"in document;if(!UT){var FN=document.createElement("div");FN.setAttribute("oninput","return;"),UT=typeof FN.oninput=="function"}VT=UT}else VT=!1;WW=VT&&(!document.documentMode||9<document.documentMode)}function DN(){hb&&(hb.detachEvent("onpropertychange",JW),Yb=hb=null)}function JW(e){if(e.propertyName==="value"&&z4(Yb)){var t=[];HW(t,Yb,e,Yk(e)),EW(Yhe,t)}}function Qhe(e,t,i){e==="focusin"?(DN(),hb=t,Yb=i,hb.attachEvent("onpropertychange",JW)):e==="focusout"&&DN()}function ede(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return z4(Yb)}function tde(e,t){if(e==="click")return z4(t)}function ide(e,t){if(e==="input"||e==="change")return z4(t)}function rde(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xl=typeof Object.is=="function"?Object.is:rde;function Xb(e,t){if(xl(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var n=i[r];if(!d6.call(t,n)||!xl(e[n],t[n]))return!1}return!0}function jN(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zN(e,t){var i=jN(e);e=0;for(var r;i;){if(i.nodeType===3){if(r=e+i.textContent.length,e<=t&&r>=t)return{node:i,offset:t-e};e=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=jN(i)}}function ZW(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ZW(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function KW(){for(var e=window,t=Mx();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Mx(e.document)}return t}function oL(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function nde(e){var t=KW(),i=e.focusedElem,r=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&ZW(i.ownerDocument.documentElement,i)){if(r!==null&&oL(i)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=i.textContent.length,o=Math.min(r.start,n);r=r.end===void 0?o:Math.min(r.end,n),!e.extend&&o>r&&(n=r,r=o,o=n),n=zN(i,o);var c=zN(i,r);n&&c&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==c.node||e.focusOffset!==c.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(c.node,c.offset)):(t.setEnd(c.node,c.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sde=Wc&&"documentMode"in document&&11>=document.documentMode,Wm=null,k6=null,db=null,L6=!1;function VN(e,t,i){var r=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;L6||Wm==null||Wm!==Mx(r)||(r=Wm,"selectionStart"in r&&oL(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),db&&Xb(db,r)||(db=r,r=Px(k6,"onSelect"),0<r.length&&(t=new rL("onSelect","select",null,t,i),e.push({event:t,listeners:r}),t.target=Wm)))}function r_(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Jm={animationend:r_("Animation","AnimationEnd"),animationiteration:r_("Animation","AnimationIteration"),animationstart:r_("Animation","AnimationStart"),transitionend:r_("Transition","TransitionEnd")},BT={},YW={};Wc&&(YW=document.createElement("div").style,"AnimationEvent"in window||(delete Jm.animationend.animation,delete Jm.animationiteration.animation,delete Jm.animationstart.animation),"TransitionEvent"in window||delete Jm.transitionend.transition);function V4(e){if(BT[e])return BT[e];if(!Jm[e])return e;var t=Jm[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in YW)return BT[e]=t[i];return e}var XW=V4("animationend"),QW=V4("animationiteration"),eJ=V4("animationstart"),tJ=V4("transitionend"),iJ=new Map,UN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lp(e,t){iJ.set(e,t),V0(t,[e])}for(var GT=0;GT<UN.length;GT++){var qT=UN[GT],ode=qT.toLowerCase(),ade=qT[0].toUpperCase()+qT.slice(1);lp(ode,"on"+ade)}lp(XW,"onAnimationEnd");lp(QW,"onAnimationIteration");lp(eJ,"onAnimationStart");lp("dblclick","onDoubleClick");lp("focusin","onFocus");lp("focusout","onBlur");lp(tJ,"onTransitionEnd");W1("onMouseEnter",["mouseout","mouseover"]);W1("onMouseLeave",["mouseout","mouseover"]);W1("onPointerEnter",["pointerout","pointerover"]);W1("onPointerLeave",["pointerout","pointerover"]);V0("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));V0("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));V0("onBeforeInput",["compositionend","keypress","textInput","paste"]);V0("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));V0("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));V0("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lde=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hv));function BN(e,t,i){var r=e.type||"unknown-event";e.currentTarget=i,ohe(r,t,void 0,e),e.currentTarget=null}function rJ(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var r=e[i],n=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var c=r.length-1;0<=c;c--){var y=r[c],v=y.instance,_=y.currentTarget;if(y=y.listener,v!==o&&n.isPropagationStopped())break e;BN(n,y,_),o=v}else for(c=0;c<r.length;c++){if(y=r[c],v=y.instance,_=y.currentTarget,y=y.listener,v!==o&&n.isPropagationStopped())break e;BN(n,y,_),o=v}}}if(Cx)throw e=E6,Cx=!1,E6=null,e}function Pi(e,t){var i=t[F6];i===void 0&&(i=t[F6]=new Set);var r=e+"__bubble";i.has(r)||(nJ(t,e,2,!1),i.add(r))}function HT(e,t,i){var r=0;t&&(r|=4),nJ(i,e,r,t)}var n_="_reactListening"+Math.random().toString(36).slice(2);function Qb(e){if(!e[n_]){e[n_]=!0,hW.forEach(function(i){i!=="selectionchange"&&(lde.has(i)||HT(i,!1,e),HT(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[n_]||(t[n_]=!0,HT("selectionchange",!1,t))}}function nJ(e,t,i,r){switch(VW(t)){case 1:var n=She;break;case 4:n=xhe;break;default:n=tL}i=n.bind(null,t,i,e),n=void 0,!$6||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),r?n!==void 0?e.addEventListener(t,i,{capture:!0,passive:n}):e.addEventListener(t,i,!0):n!==void 0?e.addEventListener(t,i,{passive:n}):e.addEventListener(t,i,!1)}function WT(e,t,i,r,n){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var c=r.tag;if(c===3||c===4){var y=r.stateNode.containerInfo;if(y===n||y.nodeType===8&&y.parentNode===n)break;if(c===4)for(c=r.return;c!==null;){var v=c.tag;if((v===3||v===4)&&(v=c.stateNode.containerInfo,v===n||v.nodeType===8&&v.parentNode===n))return;c=c.return}for(;y!==null;){if(c=Bf(y),c===null)return;if(v=c.tag,v===5||v===6){r=o=c;continue e}y=y.parentNode}}r=r.return}EW(function(){var _=o,I=Yk(i),$=[];e:{var A=iJ.get(e);if(A!==void 0){var k=rL,R=e;switch(e){case"keypress":if(OS(i)===0)break e;case"keydown":case"keyup":k=Dhe;break;case"focusin":R="focus",k=zT;break;case"focusout":R="blur",k=zT;break;case"beforeblur":case"afterblur":k=zT;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=kN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=$he;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=Vhe;break;case XW:case QW:case eJ:k=Ahe;break;case tJ:k=Bhe;break;case"scroll":k=Ihe;break;case"wheel":k=qhe;break;case"copy":case"cut":case"paste":k=khe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=ON}var N=(t&4)!==0,D=!N&&e==="scroll",j=N?A!==null?A+"Capture":null:A;N=[];for(var z=_,U;z!==null;){U=z;var W=U.stateNode;if(U.tag===5&&W!==null&&(U=W,j!==null&&(W=Wb(z,j),W!=null&&N.push(e2(z,W,U)))),D)break;z=z.return}0<N.length&&(A=new k(A,R,null,i,I),$.push({event:A,listeners:N}))}}if(!(t&7)){e:{if(A=e==="mouseover"||e==="pointerover",k=e==="mouseout"||e==="pointerout",A&&i!==I6&&(R=i.relatedTarget||i.fromElement)&&(Bf(R)||R[Jc]))break e;if((k||A)&&(A=I.window===I?I:(A=I.ownerDocument)?A.defaultView||A.parentWindow:window,k?(R=i.relatedTarget||i.toElement,k=_,R=R?Bf(R):null,R!==null&&(D=U0(R),R!==D||R.tag!==5&&R.tag!==6)&&(R=null)):(k=null,R=_),k!==R)){if(N=kN,W="onMouseLeave",j="onMouseEnter",z="mouse",(e==="pointerout"||e==="pointerover")&&(N=ON,W="onPointerLeave",j="onPointerEnter",z="pointer"),D=k==null?A:Zm(k),U=R==null?A:Zm(R),A=new N(W,z+"leave",k,i,I),A.target=D,A.relatedTarget=U,W=null,Bf(I)===_&&(N=new N(j,z+"enter",R,i,I),N.target=U,N.relatedTarget=D,W=N),D=W,k&&R)t:{for(N=k,j=R,z=0,U=N;U;U=sy(U))z++;for(U=0,W=j;W;W=sy(W))U++;for(;0<z-U;)N=sy(N),z--;for(;0<U-z;)j=sy(j),U--;for(;z--;){if(N===j||j!==null&&N===j.alternate)break t;N=sy(N),j=sy(j)}N=null}else N=null;k!==null&&GN($,A,k,N,!1),R!==null&&D!==null&&GN($,D,R,N,!0)}}e:{if(A=_?Zm(_):window,k=A.nodeName&&A.nodeName.toLowerCase(),k==="select"||k==="input"&&A.type==="file")var Q=Xhe;else if(NN(A))if(WW)Q=ide;else{Q=ede;var K=Qhe}else(k=A.nodeName)&&k.toLowerCase()==="input"&&(A.type==="checkbox"||A.type==="radio")&&(Q=tde);if(Q&&(Q=Q(e,_))){HW($,Q,i,I);break e}K&&K(e,A,_),e==="focusout"&&(K=A._wrapperState)&&K.controlled&&A.type==="number"&&w6(A,"number",A.value)}switch(K=_?Zm(_):window,e){case"focusin":(NN(K)||K.contentEditable==="true")&&(Wm=K,k6=_,db=null);break;case"focusout":db=k6=Wm=null;break;case"mousedown":L6=!0;break;case"contextmenu":case"mouseup":case"dragend":L6=!1,VN($,i,I);break;case"selectionchange":if(sde)break;case"keydown":case"keyup":VN($,i,I)}var ee;if(sL)e:{switch(e){case"compositionstart":var ie="onCompositionStart";break e;case"compositionend":ie="onCompositionEnd";break e;case"compositionupdate":ie="onCompositionUpdate";break e}ie=void 0}else Hm?GW(e,i)&&(ie="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(ie="onCompositionStart");ie&&(BW&&i.locale!=="ko"&&(Hm||ie!=="onCompositionStart"?ie==="onCompositionEnd"&&Hm&&(ee=UW()):(Sd=I,iL="value"in Sd?Sd.value:Sd.textContent,Hm=!0)),K=Px(_,ie),0<K.length&&(ie=new LN(ie,e,null,i,I),$.push({event:ie,listeners:K}),ee?ie.data=ee:(ee=qW(i),ee!==null&&(ie.data=ee)))),(ee=Whe?Jhe(e,i):Zhe(e,i))&&(_=Px(_,"onBeforeInput"),0<_.length&&(I=new LN("onBeforeInput","beforeinput",null,i,I),$.push({event:I,listeners:_}),I.data=ee))}rJ($,t)})}function e2(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Px(e,t){for(var i=t+"Capture",r=[];e!==null;){var n=e,o=n.stateNode;n.tag===5&&o!==null&&(n=o,o=Wb(e,i),o!=null&&r.unshift(e2(e,o,n)),o=Wb(e,t),o!=null&&r.push(e2(e,o,n))),e=e.return}return r}function sy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function GN(e,t,i,r,n){for(var o=t._reactName,c=[];i!==null&&i!==r;){var y=i,v=y.alternate,_=y.stateNode;if(v!==null&&v===r)break;y.tag===5&&_!==null&&(y=_,n?(v=Wb(i,o),v!=null&&c.unshift(e2(i,v,y))):n||(v=Wb(i,o),v!=null&&c.push(e2(i,v,y)))),i=i.return}c.length!==0&&e.push({event:t,listeners:c})}var ude=/\r\n?/g,cde=/\u0000|\uFFFD/g;function qN(e){return(typeof e=="string"?e:""+e).replace(ude,`
`).replace(cde,"")}function s_(e,t,i){if(t=qN(t),qN(e)!==t&&i)throw Error(De(425))}function Nx(){}var O6=null,R6=null;function P6(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var N6=typeof setTimeout=="function"?setTimeout:void 0,hde=typeof clearTimeout=="function"?clearTimeout:void 0,HN=typeof Promise=="function"?Promise:void 0,dde=typeof queueMicrotask=="function"?queueMicrotask:typeof HN<"u"?function(e){return HN.resolve(null).then(e).catch(pde)}:N6;function pde(e){setTimeout(function(){throw e})}function JT(e,t){var i=t,r=0;do{var n=i.nextSibling;if(e.removeChild(i),n&&n.nodeType===8)if(i=n.data,i==="/$"){if(r===0){e.removeChild(n),Kb(t);return}r--}else i!=="$"&&i!=="$?"&&i!=="$!"||r++;i=n}while(i);Kb(t)}function Dd(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function WN(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var $g=Math.random().toString(36).slice(2),Su="__reactFiber$"+$g,t2="__reactProps$"+$g,Jc="__reactContainer$"+$g,F6="__reactEvents$"+$g,fde="__reactListeners$"+$g,yde="__reactHandles$"+$g;function Bf(e){var t=e[Su];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Jc]||i[Su]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=WN(e);e!==null;){if(i=e[Su])return i;e=WN(e)}return t}e=i,i=e.parentNode}return null}function Q2(e){return e=e[Su]||e[Jc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zm(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(De(33))}function U4(e){return e[t2]||null}var D6=[],Km=-1;function up(e){return{current:e}}function Ui(e){0>Km||(e.current=D6[Km],D6[Km]=null,Km--)}function Oi(e,t){Km++,D6[Km]=e.current,e.current=t}var Yd={},ms=up(Yd),so=up(!1),f0=Yd;function J1(e,t){var i=e.type.contextTypes;if(!i)return Yd;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var n={},o;for(o in i)n[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function oo(e){return e=e.childContextTypes,e!=null}function Fx(){Ui(so),Ui(ms)}function JN(e,t,i){if(ms.current!==Yd)throw Error(De(168));Oi(ms,t),Oi(so,i)}function sJ(e,t,i){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return i;r=r.getChildContext();for(var n in r)if(!(n in t))throw Error(De(108,Qce(e)||"Unknown",n));return lr({},i,r)}function Dx(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Yd,f0=ms.current,Oi(ms,e),Oi(so,so.current),!0}function ZN(e,t,i){var r=e.stateNode;if(!r)throw Error(De(169));i?(e=sJ(e,t,f0),r.__reactInternalMemoizedMergedChildContext=e,Ui(so),Ui(ms),Oi(ms,e)):Ui(so),Oi(so,i)}var Lc=null,B4=!1,ZT=!1;function oJ(e){Lc===null?Lc=[e]:Lc.push(e)}function mde(e){B4=!0,oJ(e)}function cp(){if(!ZT&&Lc!==null){ZT=!0;var e=0,t=bi;try{var i=Lc;for(bi=1;e<i.length;e++){var r=i[e];do r=r(!0);while(r!==null)}Lc=null,B4=!1}catch(n){throw Lc!==null&&(Lc=Lc.slice(e+1)),kW(Xk,cp),n}finally{bi=t,ZT=!1}}return null}var Ym=[],Xm=0,jx=null,zx=0,fa=[],ya=0,y0=null,Dc=1,jc="";function Rp(e,t){Ym[Xm++]=zx,Ym[Xm++]=jx,jx=e,zx=t}function aJ(e,t,i){fa[ya++]=Dc,fa[ya++]=jc,fa[ya++]=y0,y0=e;var r=Dc;e=jc;var n=32-vl(r)-1;r&=~(1<<n),i+=1;var o=32-vl(t)+n;if(30<o){var c=n-n%5;o=(r&(1<<c)-1).toString(32),r>>=c,n-=c,Dc=1<<32-vl(t)+n|i<<n|r,jc=o+e}else Dc=1<<o|i<<n|r,jc=e}function aL(e){e.return!==null&&(Rp(e,1),aJ(e,1,0))}function lL(e){for(;e===jx;)jx=Ym[--Xm],Ym[Xm]=null,zx=Ym[--Xm],Ym[Xm]=null;for(;e===y0;)y0=fa[--ya],fa[ya]=null,jc=fa[--ya],fa[ya]=null,Dc=fa[--ya],fa[ya]=null}var No=null,Oo=null,Xi=!1,pl=null;function lJ(e,t){var i=va(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function KN(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,No=e,Oo=Dd(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,No=e,Oo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=y0!==null?{id:Dc,overflow:jc}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=va(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,No=e,Oo=null,!0):!1;default:return!1}}function j6(e){return(e.mode&1)!==0&&(e.flags&128)===0}function z6(e){if(Xi){var t=Oo;if(t){var i=t;if(!KN(e,t)){if(j6(e))throw Error(De(418));t=Dd(i.nextSibling);var r=No;t&&KN(e,t)?lJ(r,i):(e.flags=e.flags&-4097|2,Xi=!1,No=e)}}else{if(j6(e))throw Error(De(418));e.flags=e.flags&-4097|2,Xi=!1,No=e}}}function YN(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;No=e}function o_(e){if(e!==No)return!1;if(!Xi)return YN(e),Xi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!P6(e.type,e.memoizedProps)),t&&(t=Oo)){if(j6(e))throw uJ(),Error(De(418));for(;t;)lJ(e,t),t=Dd(t.nextSibling)}if(YN(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(De(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){Oo=Dd(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}Oo=null}}else Oo=No?Dd(e.stateNode.nextSibling):null;return!0}function uJ(){for(var e=Oo;e;)e=Dd(e.nextSibling)}function Z1(){Oo=No=null,Xi=!1}function uL(e){pl===null?pl=[e]:pl.push(e)}var gde=th.ReactCurrentBatchConfig;function av(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(De(309));var r=i.stateNode}if(!r)throw Error(De(147,e));var n=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(c){var y=n.refs;c===null?delete y[o]:y[o]=c},t._stringRef=o,t)}if(typeof e!="string")throw Error(De(284));if(!i._owner)throw Error(De(290,e))}return e}function a_(e,t){throw e=Object.prototype.toString.call(t),Error(De(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function XN(e){var t=e._init;return t(e._payload)}function cJ(e){function t(j,z){if(e){var U=j.deletions;U===null?(j.deletions=[z],j.flags|=16):U.push(z)}}function i(j,z){if(!e)return null;for(;z!==null;)t(j,z),z=z.sibling;return null}function r(j,z){for(j=new Map;z!==null;)z.key!==null?j.set(z.key,z):j.set(z.index,z),z=z.sibling;return j}function n(j,z){return j=Ud(j,z),j.index=0,j.sibling=null,j}function o(j,z,U){return j.index=U,e?(U=j.alternate,U!==null?(U=U.index,U<z?(j.flags|=2,z):U):(j.flags|=2,z)):(j.flags|=1048576,z)}function c(j){return e&&j.alternate===null&&(j.flags|=2),j}function y(j,z,U,W){return z===null||z.tag!==6?(z=i$(U,j.mode,W),z.return=j,z):(z=n(z,U),z.return=j,z)}function v(j,z,U,W){var Q=U.type;return Q===qm?I(j,z,U.props.children,W,U.key):z!==null&&(z.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===od&&XN(Q)===z.type)?(W=n(z,U.props),W.ref=av(j,z,U),W.return=j,W):(W=zS(U.type,U.key,U.props,null,j.mode,W),W.ref=av(j,z,U),W.return=j,W)}function _(j,z,U,W){return z===null||z.tag!==4||z.stateNode.containerInfo!==U.containerInfo||z.stateNode.implementation!==U.implementation?(z=r$(U,j.mode,W),z.return=j,z):(z=n(z,U.children||[]),z.return=j,z)}function I(j,z,U,W,Q){return z===null||z.tag!==7?(z=e0(U,j.mode,W,Q),z.return=j,z):(z=n(z,U),z.return=j,z)}function $(j,z,U){if(typeof z=="string"&&z!==""||typeof z=="number")return z=i$(""+z,j.mode,U),z.return=j,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case K3:return U=zS(z.type,z.key,z.props,null,j.mode,U),U.ref=av(j,null,z),U.return=j,U;case Gm:return z=r$(z,j.mode,U),z.return=j,z;case od:var W=z._init;return $(j,W(z._payload),U)}if(Gv(z)||iv(z))return z=e0(z,j.mode,U,null),z.return=j,z;a_(j,z)}return null}function A(j,z,U,W){var Q=z!==null?z.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return Q!==null?null:y(j,z,""+U,W);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case K3:return U.key===Q?v(j,z,U,W):null;case Gm:return U.key===Q?_(j,z,U,W):null;case od:return Q=U._init,A(j,z,Q(U._payload),W)}if(Gv(U)||iv(U))return Q!==null?null:I(j,z,U,W,null);a_(j,U)}return null}function k(j,z,U,W,Q){if(typeof W=="string"&&W!==""||typeof W=="number")return j=j.get(U)||null,y(z,j,""+W,Q);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case K3:return j=j.get(W.key===null?U:W.key)||null,v(z,j,W,Q);case Gm:return j=j.get(W.key===null?U:W.key)||null,_(z,j,W,Q);case od:var K=W._init;return k(j,z,U,K(W._payload),Q)}if(Gv(W)||iv(W))return j=j.get(U)||null,I(z,j,W,Q,null);a_(z,W)}return null}function R(j,z,U,W){for(var Q=null,K=null,ee=z,ie=z=0,ae=null;ee!==null&&ie<U.length;ie++){ee.index>ie?(ae=ee,ee=null):ae=ee.sibling;var ue=A(j,ee,U[ie],W);if(ue===null){ee===null&&(ee=ae);break}e&&ee&&ue.alternate===null&&t(j,ee),z=o(ue,z,ie),K===null?Q=ue:K.sibling=ue,K=ue,ee=ae}if(ie===U.length)return i(j,ee),Xi&&Rp(j,ie),Q;if(ee===null){for(;ie<U.length;ie++)ee=$(j,U[ie],W),ee!==null&&(z=o(ee,z,ie),K===null?Q=ee:K.sibling=ee,K=ee);return Xi&&Rp(j,ie),Q}for(ee=r(j,ee);ie<U.length;ie++)ae=k(ee,j,ie,U[ie],W),ae!==null&&(e&&ae.alternate!==null&&ee.delete(ae.key===null?ie:ae.key),z=o(ae,z,ie),K===null?Q=ae:K.sibling=ae,K=ae);return e&&ee.forEach(function(Ie){return t(j,Ie)}),Xi&&Rp(j,ie),Q}function N(j,z,U,W){var Q=iv(U);if(typeof Q!="function")throw Error(De(150));if(U=Q.call(U),U==null)throw Error(De(151));for(var K=Q=null,ee=z,ie=z=0,ae=null,ue=U.next();ee!==null&&!ue.done;ie++,ue=U.next()){ee.index>ie?(ae=ee,ee=null):ae=ee.sibling;var Ie=A(j,ee,ue.value,W);if(Ie===null){ee===null&&(ee=ae);break}e&&ee&&Ie.alternate===null&&t(j,ee),z=o(Ie,z,ie),K===null?Q=Ie:K.sibling=Ie,K=Ie,ee=ae}if(ue.done)return i(j,ee),Xi&&Rp(j,ie),Q;if(ee===null){for(;!ue.done;ie++,ue=U.next())ue=$(j,ue.value,W),ue!==null&&(z=o(ue,z,ie),K===null?Q=ue:K.sibling=ue,K=ue);return Xi&&Rp(j,ie),Q}for(ee=r(j,ee);!ue.done;ie++,ue=U.next())ue=k(ee,j,ie,ue.value,W),ue!==null&&(e&&ue.alternate!==null&&ee.delete(ue.key===null?ie:ue.key),z=o(ue,z,ie),K===null?Q=ue:K.sibling=ue,K=ue);return e&&ee.forEach(function(Ae){return t(j,Ae)}),Xi&&Rp(j,ie),Q}function D(j,z,U,W){if(typeof U=="object"&&U!==null&&U.type===qm&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case K3:e:{for(var Q=U.key,K=z;K!==null;){if(K.key===Q){if(Q=U.type,Q===qm){if(K.tag===7){i(j,K.sibling),z=n(K,U.props.children),z.return=j,j=z;break e}}else if(K.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===od&&XN(Q)===K.type){i(j,K.sibling),z=n(K,U.props),z.ref=av(j,K,U),z.return=j,j=z;break e}i(j,K);break}else t(j,K);K=K.sibling}U.type===qm?(z=e0(U.props.children,j.mode,W,U.key),z.return=j,j=z):(W=zS(U.type,U.key,U.props,null,j.mode,W),W.ref=av(j,z,U),W.return=j,j=W)}return c(j);case Gm:e:{for(K=U.key;z!==null;){if(z.key===K)if(z.tag===4&&z.stateNode.containerInfo===U.containerInfo&&z.stateNode.implementation===U.implementation){i(j,z.sibling),z=n(z,U.children||[]),z.return=j,j=z;break e}else{i(j,z);break}else t(j,z);z=z.sibling}z=r$(U,j.mode,W),z.return=j,j=z}return c(j);case od:return K=U._init,D(j,z,K(U._payload),W)}if(Gv(U))return R(j,z,U,W);if(iv(U))return N(j,z,U,W);a_(j,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,z!==null&&z.tag===6?(i(j,z.sibling),z=n(z,U),z.return=j,j=z):(i(j,z),z=i$(U,j.mode,W),z.return=j,j=z),c(j)):i(j,z)}return D}var K1=cJ(!0),hJ=cJ(!1),Vx=up(null),Ux=null,Qm=null,cL=null;function hL(){cL=Qm=Ux=null}function dL(e){var t=Vx.current;Ui(Vx),e._currentValue=t}function V6(e,t,i){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===i)break;e=e.return}}function S1(e,t){Ux=e,cL=Qm=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Qs=!0),e.firstContext=null)}function $a(e){var t=e._currentValue;if(cL!==e)if(e={context:e,memoizedValue:t,next:null},Qm===null){if(Ux===null)throw Error(De(308));Qm=e,Ux.dependencies={lanes:0,firstContext:e}}else Qm=Qm.next=e;return t}var Gf=null;function pL(e){Gf===null?Gf=[e]:Gf.push(e)}function dJ(e,t,i,r){var n=t.interleaved;return n===null?(i.next=i,pL(t)):(i.next=n.next,n.next=i),t.interleaved=i,Zc(e,r)}function Zc(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var ad=!1;function fL(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pJ(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Uc(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function jd(e,t,i){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Qt&2){var n=r.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),r.pending=t,Zc(e,i)}return n=r.interleaved,n===null?(t.next=t,pL(r)):(t.next=n.next,n.next=t),r.interleaved=t,Zc(e,i)}function RS(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,Qk(e,i)}}function QN(e,t){var i=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var n=null,o=null;if(i=i.firstBaseUpdate,i!==null){do{var c={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};o===null?n=o=c:o=o.next=c,i=i.next}while(i!==null);o===null?n=o=t:o=o.next=t}else n=o=t;i={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Bx(e,t,i,r){var n=e.updateQueue;ad=!1;var o=n.firstBaseUpdate,c=n.lastBaseUpdate,y=n.shared.pending;if(y!==null){n.shared.pending=null;var v=y,_=v.next;v.next=null,c===null?o=_:c.next=_,c=v;var I=e.alternate;I!==null&&(I=I.updateQueue,y=I.lastBaseUpdate,y!==c&&(y===null?I.firstBaseUpdate=_:y.next=_,I.lastBaseUpdate=v))}if(o!==null){var $=n.baseState;c=0,I=_=v=null,y=o;do{var A=y.lane,k=y.eventTime;if((r&A)===A){I!==null&&(I=I.next={eventTime:k,lane:0,tag:y.tag,payload:y.payload,callback:y.callback,next:null});e:{var R=e,N=y;switch(A=t,k=i,N.tag){case 1:if(R=N.payload,typeof R=="function"){$=R.call(k,$,A);break e}$=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=N.payload,A=typeof R=="function"?R.call(k,$,A):R,A==null)break e;$=lr({},$,A);break e;case 2:ad=!0}}y.callback!==null&&y.lane!==0&&(e.flags|=64,A=n.effects,A===null?n.effects=[y]:A.push(y))}else k={eventTime:k,lane:A,tag:y.tag,payload:y.payload,callback:y.callback,next:null},I===null?(_=I=k,v=$):I=I.next=k,c|=A;if(y=y.next,y===null){if(y=n.shared.pending,y===null)break;A=y,y=A.next,A.next=null,n.lastBaseUpdate=A,n.shared.pending=null}}while(!0);if(I===null&&(v=$),n.baseState=v,n.firstBaseUpdate=_,n.lastBaseUpdate=I,t=n.shared.interleaved,t!==null){n=t;do c|=n.lane,n=n.next;while(n!==t)}else o===null&&(n.shared.lanes=0);g0|=c,e.lanes=c,e.memoizedState=$}}function eF(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],n=r.callback;if(n!==null){if(r.callback=null,r=i,typeof n!="function")throw Error(De(191,n));n.call(r)}}}var e3={},$u=up(e3),i2=up(e3),r2=up(e3);function qf(e){if(e===e3)throw Error(De(174));return e}function yL(e,t){switch(Oi(r2,t),Oi(i2,e),Oi($u,e3),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:_6(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=_6(t,e)}Ui($u),Oi($u,t)}function Y1(){Ui($u),Ui(i2),Ui(r2)}function fJ(e){qf(r2.current);var t=qf($u.current),i=_6(t,e.type);t!==i&&(Oi(i2,e),Oi($u,i))}function mL(e){i2.current===e&&(Ui($u),Ui(i2))}var sr=up(0);function Gx(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var KT=[];function gL(){for(var e=0;e<KT.length;e++)KT[e]._workInProgressVersionPrimary=null;KT.length=0}var PS=th.ReactCurrentDispatcher,YT=th.ReactCurrentBatchConfig,m0=0,or=null,Zr=null,fn=null,qx=!1,pb=!1,n2=0,vde=0;function Gn(){throw Error(De(321))}function vL(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!xl(e[i],t[i]))return!1;return!0}function wL(e,t,i,r,n,o){if(m0=o,or=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,PS.current=e===null||e.memoizedState===null?Sde:xde,e=i(r,n),pb){o=0;do{if(pb=!1,n2=0,25<=o)throw Error(De(301));o+=1,fn=Zr=null,t.updateQueue=null,PS.current=Ide,e=i(r,n)}while(pb)}if(PS.current=Hx,t=Zr!==null&&Zr.next!==null,m0=0,fn=Zr=or=null,qx=!1,t)throw Error(De(300));return e}function bL(){var e=n2!==0;return n2=0,e}function hu(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?or.memoizedState=fn=e:fn=fn.next=e,fn}function Ea(){if(Zr===null){var e=or.alternate;e=e!==null?e.memoizedState:null}else e=Zr.next;var t=fn===null?or.memoizedState:fn.next;if(t!==null)fn=t,Zr=e;else{if(e===null)throw Error(De(310));Zr=e,e={memoizedState:Zr.memoizedState,baseState:Zr.baseState,baseQueue:Zr.baseQueue,queue:Zr.queue,next:null},fn===null?or.memoizedState=fn=e:fn=fn.next=e}return fn}function s2(e,t){return typeof t=="function"?t(e):t}function XT(e){var t=Ea(),i=t.queue;if(i===null)throw Error(De(311));i.lastRenderedReducer=e;var r=Zr,n=r.baseQueue,o=i.pending;if(o!==null){if(n!==null){var c=n.next;n.next=o.next,o.next=c}r.baseQueue=n=o,i.pending=null}if(n!==null){o=n.next,r=r.baseState;var y=c=null,v=null,_=o;do{var I=_.lane;if((m0&I)===I)v!==null&&(v=v.next={lane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),r=_.hasEagerState?_.eagerState:e(r,_.action);else{var $={lane:I,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null};v===null?(y=v=$,c=r):v=v.next=$,or.lanes|=I,g0|=I}_=_.next}while(_!==null&&_!==o);v===null?c=r:v.next=y,xl(r,t.memoizedState)||(Qs=!0),t.memoizedState=r,t.baseState=c,t.baseQueue=v,i.lastRenderedState=r}if(e=i.interleaved,e!==null){n=e;do o=n.lane,or.lanes|=o,g0|=o,n=n.next;while(n!==e)}else n===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function QT(e){var t=Ea(),i=t.queue;if(i===null)throw Error(De(311));i.lastRenderedReducer=e;var r=i.dispatch,n=i.pending,o=t.memoizedState;if(n!==null){i.pending=null;var c=n=n.next;do o=e(o,c.action),c=c.next;while(c!==n);xl(o,t.memoizedState)||(Qs=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),i.lastRenderedState=o}return[o,r]}function yJ(){}function mJ(e,t){var i=or,r=Ea(),n=t(),o=!xl(r.memoizedState,n);if(o&&(r.memoizedState=n,Qs=!0),r=r.queue,_L(wJ.bind(null,i,r,e),[e]),r.getSnapshot!==t||o||fn!==null&&fn.memoizedState.tag&1){if(i.flags|=2048,o2(9,vJ.bind(null,i,r,n,t),void 0,null),vn===null)throw Error(De(349));m0&30||gJ(i,t,n)}return n}function gJ(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=or.updateQueue,t===null?(t={lastEffect:null,stores:null},or.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function vJ(e,t,i,r){t.value=i,t.getSnapshot=r,bJ(t)&&_J(e)}function wJ(e,t,i){return i(function(){bJ(t)&&_J(e)})}function bJ(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!xl(e,i)}catch{return!0}}function _J(e){var t=Zc(e,1);t!==null&&wl(t,e,1,-1)}function tF(e){var t=hu();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s2,lastRenderedState:e},t.queue=e,e=e.dispatch=_de.bind(null,or,e),[t.memoizedState,e]}function o2(e,t,i,r){return e={tag:e,create:t,destroy:i,deps:r,next:null},t=or.updateQueue,t===null?(t={lastEffect:null,stores:null},or.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,t.lastEffect=e)),e}function SJ(){return Ea().memoizedState}function NS(e,t,i,r){var n=hu();or.flags|=e,n.memoizedState=o2(1|t,i,void 0,r===void 0?null:r)}function G4(e,t,i,r){var n=Ea();r=r===void 0?null:r;var o=void 0;if(Zr!==null){var c=Zr.memoizedState;if(o=c.destroy,r!==null&&vL(r,c.deps)){n.memoizedState=o2(t,i,o,r);return}}or.flags|=e,n.memoizedState=o2(1|t,i,o,r)}function iF(e,t){return NS(8390656,8,e,t)}function _L(e,t){return G4(2048,8,e,t)}function xJ(e,t){return G4(4,2,e,t)}function IJ(e,t){return G4(4,4,e,t)}function TJ(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $J(e,t,i){return i=i!=null?i.concat([e]):null,G4(4,4,TJ.bind(null,t,e),i)}function SL(){}function EJ(e,t){var i=Ea();t=t===void 0?null:t;var r=i.memoizedState;return r!==null&&t!==null&&vL(t,r[1])?r[0]:(i.memoizedState=[e,t],e)}function MJ(e,t){var i=Ea();t=t===void 0?null:t;var r=i.memoizedState;return r!==null&&t!==null&&vL(t,r[1])?r[0]:(e=e(),i.memoizedState=[e,t],e)}function AJ(e,t,i){return m0&21?(xl(i,t)||(i=RW(),or.lanes|=i,g0|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Qs=!0),e.memoizedState=i)}function wde(e,t){var i=bi;bi=i!==0&&4>i?i:4,e(!0);var r=YT.transition;YT.transition={};try{e(!1),t()}finally{bi=i,YT.transition=r}}function CJ(){return Ea().memoizedState}function bde(e,t,i){var r=Vd(e);if(i={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null},kJ(e))LJ(t,i);else if(i=dJ(e,t,i,r),i!==null){var n=As();wl(i,e,r,n),OJ(i,t,r)}}function _de(e,t,i){var r=Vd(e),n={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null};if(kJ(e))LJ(t,n);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var c=t.lastRenderedState,y=o(c,i);if(n.hasEagerState=!0,n.eagerState=y,xl(y,c)){var v=t.interleaved;v===null?(n.next=n,pL(t)):(n.next=v.next,v.next=n),t.interleaved=n;return}}catch{}finally{}i=dJ(e,t,n,r),i!==null&&(n=As(),wl(i,e,r,n),OJ(i,t,r))}}function kJ(e){var t=e.alternate;return e===or||t!==null&&t===or}function LJ(e,t){pb=qx=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function OJ(e,t,i){if(i&4194240){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,Qk(e,i)}}var Hx={readContext:$a,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useInsertionEffect:Gn,useLayoutEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useMutableSource:Gn,useSyncExternalStore:Gn,useId:Gn,unstable_isNewReconciler:!1},Sde={readContext:$a,useCallback:function(e,t){return hu().memoizedState=[e,t===void 0?null:t],e},useContext:$a,useEffect:iF,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,NS(4194308,4,TJ.bind(null,t,e),i)},useLayoutEffect:function(e,t){return NS(4194308,4,e,t)},useInsertionEffect:function(e,t){return NS(4,2,e,t)},useMemo:function(e,t){var i=hu();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var r=hu();return t=i!==void 0?i(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=bde.bind(null,or,e),[r.memoizedState,e]},useRef:function(e){var t=hu();return e={current:e},t.memoizedState=e},useState:tF,useDebugValue:SL,useDeferredValue:function(e){return hu().memoizedState=e},useTransition:function(){var e=tF(!1),t=e[0];return e=wde.bind(null,e[1]),hu().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var r=or,n=hu();if(Xi){if(i===void 0)throw Error(De(407));i=i()}else{if(i=t(),vn===null)throw Error(De(349));m0&30||gJ(r,t,i)}n.memoizedState=i;var o={value:i,getSnapshot:t};return n.queue=o,iF(wJ.bind(null,r,o,e),[e]),r.flags|=2048,o2(9,vJ.bind(null,r,o,i,t),void 0,null),i},useId:function(){var e=hu(),t=vn.identifierPrefix;if(Xi){var i=jc,r=Dc;i=(r&~(1<<32-vl(r)-1)).toString(32)+i,t=":"+t+"R"+i,i=n2++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=vde++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},xde={readContext:$a,useCallback:EJ,useContext:$a,useEffect:_L,useImperativeHandle:$J,useInsertionEffect:xJ,useLayoutEffect:IJ,useMemo:MJ,useReducer:XT,useRef:SJ,useState:function(){return XT(s2)},useDebugValue:SL,useDeferredValue:function(e){var t=Ea();return AJ(t,Zr.memoizedState,e)},useTransition:function(){var e=XT(s2)[0],t=Ea().memoizedState;return[e,t]},useMutableSource:yJ,useSyncExternalStore:mJ,useId:CJ,unstable_isNewReconciler:!1},Ide={readContext:$a,useCallback:EJ,useContext:$a,useEffect:_L,useImperativeHandle:$J,useInsertionEffect:xJ,useLayoutEffect:IJ,useMemo:MJ,useReducer:QT,useRef:SJ,useState:function(){return QT(s2)},useDebugValue:SL,useDeferredValue:function(e){var t=Ea();return Zr===null?t.memoizedState=e:AJ(t,Zr.memoizedState,e)},useTransition:function(){var e=QT(s2)[0],t=Ea().memoizedState;return[e,t]},useMutableSource:yJ,useSyncExternalStore:mJ,useId:CJ,unstable_isNewReconciler:!1};function ll(e,t){if(e&&e.defaultProps){t=lr({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function U6(e,t,i,r){t=e.memoizedState,i=i(r,t),i=i==null?t:lr({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var q4={isMounted:function(e){return(e=e._reactInternals)?U0(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var r=As(),n=Vd(e),o=Uc(r,n);o.payload=t,i!=null&&(o.callback=i),t=jd(e,o,n),t!==null&&(wl(t,e,n,r),RS(t,e,n))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var r=As(),n=Vd(e),o=Uc(r,n);o.tag=1,o.payload=t,i!=null&&(o.callback=i),t=jd(e,o,n),t!==null&&(wl(t,e,n,r),RS(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=As(),r=Vd(e),n=Uc(i,r);n.tag=2,t!=null&&(n.callback=t),t=jd(e,n,r),t!==null&&(wl(t,e,r,i),RS(t,e,r))}};function rF(e,t,i,r,n,o,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,c):t.prototype&&t.prototype.isPureReactComponent?!Xb(i,r)||!Xb(n,o):!0}function RJ(e,t,i){var r=!1,n=Yd,o=t.contextType;return typeof o=="object"&&o!==null?o=$a(o):(n=oo(t)?f0:ms.current,r=t.contextTypes,o=(r=r!=null)?J1(e,n):Yd),t=new t(i,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=q4,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=o),t}function nF(e,t,i,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,r),t.state!==e&&q4.enqueueReplaceState(t,t.state,null)}function B6(e,t,i,r){var n=e.stateNode;n.props=i,n.state=e.memoizedState,n.refs={},fL(e);var o=t.contextType;typeof o=="object"&&o!==null?n.context=$a(o):(o=oo(t)?f0:ms.current,n.context=J1(e,o)),n.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(U6(e,t,o,i),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&q4.enqueueReplaceState(n,n.state,null),Bx(e,i,n,r),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function X1(e,t){try{var i="",r=t;do i+=Xce(r),r=r.return;while(r);var n=i}catch(o){n=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:n,digest:null}}function e$(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function G6(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var Tde=typeof WeakMap=="function"?WeakMap:Map;function PJ(e,t,i){i=Uc(-1,i),i.tag=3,i.payload={element:null};var r=t.value;return i.callback=function(){Jx||(Jx=!0,eM=r),G6(e,t)},i}function NJ(e,t,i){i=Uc(-1,i),i.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var n=t.value;i.payload=function(){return r(n)},i.callback=function(){G6(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(i.callback=function(){G6(e,t),typeof r!="function"&&(zd===null?zd=new Set([this]):zd.add(this));var c=t.stack;this.componentDidCatch(t.value,{componentStack:c!==null?c:""})}),i}function sF(e,t,i){var r=e.pingCache;if(r===null){r=e.pingCache=new Tde;var n=new Set;r.set(t,n)}else n=r.get(t),n===void 0&&(n=new Set,r.set(t,n));n.has(i)||(n.add(i),e=jde.bind(null,e,t,i),t.then(e,e))}function oF(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function aF(e,t,i,r,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Uc(-1,1),t.tag=2,jd(i,t,1))),i.lanes|=1),e)}var $de=th.ReactCurrentOwner,Qs=!1;function $s(e,t,i,r){t.child=e===null?hJ(t,null,i,r):K1(t,e.child,i,r)}function lF(e,t,i,r,n){i=i.render;var o=t.ref;return S1(t,n),r=wL(e,t,i,r,o,n),i=bL(),e!==null&&!Qs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Kc(e,t,n)):(Xi&&i&&aL(t),t.flags|=1,$s(e,t,r,n),t.child)}function uF(e,t,i,r,n){if(e===null){var o=i.type;return typeof o=="function"&&!CL(o)&&o.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=o,FJ(e,t,o,r,n)):(e=zS(i.type,null,r,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&n)){var c=o.memoizedProps;if(i=i.compare,i=i!==null?i:Xb,i(c,r)&&e.ref===t.ref)return Kc(e,t,n)}return t.flags|=1,e=Ud(o,r),e.ref=t.ref,e.return=t,t.child=e}function FJ(e,t,i,r,n){if(e!==null){var o=e.memoizedProps;if(Xb(o,r)&&e.ref===t.ref)if(Qs=!1,t.pendingProps=r=o,(e.lanes&n)!==0)e.flags&131072&&(Qs=!0);else return t.lanes=e.lanes,Kc(e,t,n)}return q6(e,t,i,r,n)}function DJ(e,t,i){var r=t.pendingProps,n=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oi(t1,Co),Co|=i;else{if(!(i&1073741824))return e=o!==null?o.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Oi(t1,Co),Co|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:i,Oi(t1,Co),Co|=r}else o!==null?(r=o.baseLanes|i,t.memoizedState=null):r=i,Oi(t1,Co),Co|=r;return $s(e,t,n,i),t.child}function jJ(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function q6(e,t,i,r,n){var o=oo(i)?f0:ms.current;return o=J1(t,o),S1(t,n),i=wL(e,t,i,r,o,n),r=bL(),e!==null&&!Qs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Kc(e,t,n)):(Xi&&r&&aL(t),t.flags|=1,$s(e,t,i,n),t.child)}function cF(e,t,i,r,n){if(oo(i)){var o=!0;Dx(t)}else o=!1;if(S1(t,n),t.stateNode===null)FS(e,t),RJ(t,i,r),B6(t,i,r,n),r=!0;else if(e===null){var c=t.stateNode,y=t.memoizedProps;c.props=y;var v=c.context,_=i.contextType;typeof _=="object"&&_!==null?_=$a(_):(_=oo(i)?f0:ms.current,_=J1(t,_));var I=i.getDerivedStateFromProps,$=typeof I=="function"||typeof c.getSnapshotBeforeUpdate=="function";$||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(y!==r||v!==_)&&nF(t,c,r,_),ad=!1;var A=t.memoizedState;c.state=A,Bx(t,r,c,n),v=t.memoizedState,y!==r||A!==v||so.current||ad?(typeof I=="function"&&(U6(t,i,I,r),v=t.memoizedState),(y=ad||rF(t,i,y,r,A,v,_))?($||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=v),c.props=r,c.state=v,c.context=_,r=y):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{c=t.stateNode,pJ(e,t),y=t.memoizedProps,_=t.type===t.elementType?y:ll(t.type,y),c.props=_,$=t.pendingProps,A=c.context,v=i.contextType,typeof v=="object"&&v!==null?v=$a(v):(v=oo(i)?f0:ms.current,v=J1(t,v));var k=i.getDerivedStateFromProps;(I=typeof k=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(y!==$||A!==v)&&nF(t,c,r,v),ad=!1,A=t.memoizedState,c.state=A,Bx(t,r,c,n);var R=t.memoizedState;y!==$||A!==R||so.current||ad?(typeof k=="function"&&(U6(t,i,k,r),R=t.memoizedState),(_=ad||rF(t,i,_,r,A,R,v)||!1)?(I||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(r,R,v),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(r,R,v)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||y===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=R),c.props=r,c.state=R,c.context=v,r=_):(typeof c.componentDidUpdate!="function"||y===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),r=!1)}return H6(e,t,i,r,o,n)}function H6(e,t,i,r,n,o){jJ(e,t);var c=(t.flags&128)!==0;if(!r&&!c)return n&&ZN(t,i,!1),Kc(e,t,o);r=t.stateNode,$de.current=t;var y=c&&typeof i.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&c?(t.child=K1(t,e.child,null,o),t.child=K1(t,null,y,o)):$s(e,t,y,o),t.memoizedState=r.state,n&&ZN(t,i,!0),t.child}function zJ(e){var t=e.stateNode;t.pendingContext?JN(e,t.pendingContext,t.pendingContext!==t.context):t.context&&JN(e,t.context,!1),yL(e,t.containerInfo)}function hF(e,t,i,r,n){return Z1(),uL(n),t.flags|=256,$s(e,t,i,r),t.child}var W6={dehydrated:null,treeContext:null,retryLane:0};function J6(e){return{baseLanes:e,cachePool:null,transitions:null}}function VJ(e,t,i){var r=t.pendingProps,n=sr.current,o=!1,c=(t.flags&128)!==0,y;if((y=c)||(y=e!==null&&e.memoizedState===null?!1:(n&2)!==0),y?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),Oi(sr,n&1),e===null)return z6(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(c=r.children,e=r.fallback,o?(r=t.mode,o=t.child,c={mode:"hidden",children:c},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=c):o=J4(c,r,0,null),e=e0(e,r,i,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=J6(i),t.memoizedState=W6,e):xL(t,c));if(n=e.memoizedState,n!==null&&(y=n.dehydrated,y!==null))return Ede(e,t,c,r,y,n,i);if(o){o=r.fallback,c=t.mode,n=e.child,y=n.sibling;var v={mode:"hidden",children:r.children};return!(c&1)&&t.child!==n?(r=t.child,r.childLanes=0,r.pendingProps=v,t.deletions=null):(r=Ud(n,v),r.subtreeFlags=n.subtreeFlags&14680064),y!==null?o=Ud(y,o):(o=e0(o,c,i,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,c=e.child.memoizedState,c=c===null?J6(i):{baseLanes:c.baseLanes|i,cachePool:null,transitions:c.transitions},o.memoizedState=c,o.childLanes=e.childLanes&~i,t.memoizedState=W6,r}return o=e.child,e=o.sibling,r=Ud(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=i),r.return=t,r.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=r,t.memoizedState=null,r}function xL(e,t){return t=J4({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function l_(e,t,i,r){return r!==null&&uL(r),K1(t,e.child,null,i),e=xL(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ede(e,t,i,r,n,o,c){if(i)return t.flags&256?(t.flags&=-257,r=e$(Error(De(422))),l_(e,t,c,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,n=t.mode,r=J4({mode:"visible",children:r.children},n,0,null),o=e0(o,n,c,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&K1(t,e.child,null,c),t.child.memoizedState=J6(c),t.memoizedState=W6,o);if(!(t.mode&1))return l_(e,t,c,null);if(n.data==="$!"){if(r=n.nextSibling&&n.nextSibling.dataset,r)var y=r.dgst;return r=y,o=Error(De(419)),r=e$(o,r,void 0),l_(e,t,c,r)}if(y=(c&e.childLanes)!==0,Qs||y){if(r=vn,r!==null){switch(c&-c){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(r.suspendedLanes|c)?0:n,n!==0&&n!==o.retryLane&&(o.retryLane=n,Zc(e,n),wl(r,e,n,-1))}return AL(),r=e$(Error(De(421))),l_(e,t,c,r)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=zde.bind(null,e),n._reactRetry=t,null):(e=o.treeContext,Oo=Dd(n.nextSibling),No=t,Xi=!0,pl=null,e!==null&&(fa[ya++]=Dc,fa[ya++]=jc,fa[ya++]=y0,Dc=e.id,jc=e.overflow,y0=t),t=xL(t,r.children),t.flags|=4096,t)}function dF(e,t,i){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),V6(e.return,t,i)}function t$(e,t,i,r,n){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:n}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=i,o.tailMode=n)}function UJ(e,t,i){var r=t.pendingProps,n=r.revealOrder,o=r.tail;if($s(e,t,r.children,i),r=sr.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dF(e,i,t);else if(e.tag===19)dF(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Oi(sr,r),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(i=t.child,n=null;i!==null;)e=i.alternate,e!==null&&Gx(e)===null&&(n=i),i=i.sibling;i=n,i===null?(n=t.child,t.child=null):(n=i.sibling,i.sibling=null),t$(t,!1,n,i,o);break;case"backwards":for(i=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Gx(e)===null){t.child=n;break}e=n.sibling,n.sibling=i,i=n,n=e}t$(t,!0,i,null,o);break;case"together":t$(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function FS(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Kc(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),g0|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(De(153));if(t.child!==null){for(e=t.child,i=Ud(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Ud(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Mde(e,t,i){switch(t.tag){case 3:zJ(t),Z1();break;case 5:fJ(t);break;case 1:oo(t.type)&&Dx(t);break;case 4:yL(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,n=t.memoizedProps.value;Oi(Vx,r._currentValue),r._currentValue=n;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Oi(sr,sr.current&1),t.flags|=128,null):i&t.child.childLanes?VJ(e,t,i):(Oi(sr,sr.current&1),e=Kc(e,t,i),e!==null?e.sibling:null);Oi(sr,sr.current&1);break;case 19:if(r=(i&t.childLanes)!==0,e.flags&128){if(r)return UJ(e,t,i);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Oi(sr,sr.current),r)break;return null;case 22:case 23:return t.lanes=0,DJ(e,t,i)}return Kc(e,t,i)}var BJ,Z6,GJ,qJ;BJ=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Z6=function(){};GJ=function(e,t,i,r){var n=e.memoizedProps;if(n!==r){e=t.stateNode,qf($u.current);var o=null;switch(i){case"input":n=g6(e,n),r=g6(e,r),o=[];break;case"select":n=lr({},n,{value:void 0}),r=lr({},r,{value:void 0}),o=[];break;case"textarea":n=b6(e,n),r=b6(e,r),o=[];break;default:typeof n.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Nx)}S6(i,r);var c;i=null;for(_ in n)if(!r.hasOwnProperty(_)&&n.hasOwnProperty(_)&&n[_]!=null)if(_==="style"){var y=n[_];for(c in y)y.hasOwnProperty(c)&&(i||(i={}),i[c]="")}else _!=="dangerouslySetInnerHTML"&&_!=="children"&&_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(qb.hasOwnProperty(_)?o||(o=[]):(o=o||[]).push(_,null));for(_ in r){var v=r[_];if(y=n!=null?n[_]:void 0,r.hasOwnProperty(_)&&v!==y&&(v!=null||y!=null))if(_==="style")if(y){for(c in y)!y.hasOwnProperty(c)||v&&v.hasOwnProperty(c)||(i||(i={}),i[c]="");for(c in v)v.hasOwnProperty(c)&&y[c]!==v[c]&&(i||(i={}),i[c]=v[c])}else i||(o||(o=[]),o.push(_,i)),i=v;else _==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,y=y?y.__html:void 0,v!=null&&y!==v&&(o=o||[]).push(_,v)):_==="children"?typeof v!="string"&&typeof v!="number"||(o=o||[]).push(_,""+v):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&(qb.hasOwnProperty(_)?(v!=null&&_==="onScroll"&&Pi("scroll",e),o||y===v||(o=[])):(o=o||[]).push(_,v))}i&&(o=o||[]).push("style",i);var _=o;(t.updateQueue=_)&&(t.flags|=4)}};qJ=function(e,t,i,r){i!==r&&(t.flags|=4)};function lv(e,t){if(!Xi)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qn(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,r=0;if(t)for(var n=e.child;n!==null;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags&14680064,r|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=r,e.childLanes=i,t}function Ade(e,t,i){var r=t.pendingProps;switch(lL(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qn(t),null;case 1:return oo(t.type)&&Fx(),qn(t),null;case 3:return r=t.stateNode,Y1(),Ui(so),Ui(ms),gL(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(o_(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,pl!==null&&(rM(pl),pl=null))),Z6(e,t),qn(t),null;case 5:mL(t);var n=qf(r2.current);if(i=t.type,e!==null&&t.stateNode!=null)GJ(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(De(166));return qn(t),null}if(e=qf($u.current),o_(t)){r=t.stateNode,i=t.type;var o=t.memoizedProps;switch(r[Su]=t,r[t2]=o,e=(t.mode&1)!==0,i){case"dialog":Pi("cancel",r),Pi("close",r);break;case"iframe":case"object":case"embed":Pi("load",r);break;case"video":case"audio":for(n=0;n<Hv.length;n++)Pi(Hv[n],r);break;case"source":Pi("error",r);break;case"img":case"image":case"link":Pi("error",r),Pi("load",r);break;case"details":Pi("toggle",r);break;case"input":_N(r,o),Pi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Pi("invalid",r);break;case"textarea":xN(r,o),Pi("invalid",r)}S6(i,o),n=null;for(var c in o)if(o.hasOwnProperty(c)){var y=o[c];c==="children"?typeof y=="string"?r.textContent!==y&&(o.suppressHydrationWarning!==!0&&s_(r.textContent,y,e),n=["children",y]):typeof y=="number"&&r.textContent!==""+y&&(o.suppressHydrationWarning!==!0&&s_(r.textContent,y,e),n=["children",""+y]):qb.hasOwnProperty(c)&&y!=null&&c==="onScroll"&&Pi("scroll",r)}switch(i){case"input":Y3(r),SN(r,o,!0);break;case"textarea":Y3(r),IN(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Nx)}r=n,t.updateQueue=r,r!==null&&(t.flags|=4)}else{c=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=wW(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=c.createElement(i,{is:r.is}):(e=c.createElement(i),i==="select"&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,i),e[Su]=t,e[t2]=r,BJ(e,t,!1,!1),t.stateNode=e;e:{switch(c=x6(i,r),i){case"dialog":Pi("cancel",e),Pi("close",e),n=r;break;case"iframe":case"object":case"embed":Pi("load",e),n=r;break;case"video":case"audio":for(n=0;n<Hv.length;n++)Pi(Hv[n],e);n=r;break;case"source":Pi("error",e),n=r;break;case"img":case"image":case"link":Pi("error",e),Pi("load",e),n=r;break;case"details":Pi("toggle",e),n=r;break;case"input":_N(e,r),n=g6(e,r),Pi("invalid",e);break;case"option":n=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},n=lr({},r,{value:void 0}),Pi("invalid",e);break;case"textarea":xN(e,r),n=b6(e,r),Pi("invalid",e);break;default:n=r}S6(i,n),y=n;for(o in y)if(y.hasOwnProperty(o)){var v=y[o];o==="style"?SW(e,v):o==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,v!=null&&bW(e,v)):o==="children"?typeof v=="string"?(i!=="textarea"||v!=="")&&Hb(e,v):typeof v=="number"&&Hb(e,""+v):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(qb.hasOwnProperty(o)?v!=null&&o==="onScroll"&&Pi("scroll",e):v!=null&&Wk(e,o,v,c))}switch(i){case"input":Y3(e),SN(e,r,!1);break;case"textarea":Y3(e),IN(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Kd(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?v1(e,!!r.multiple,o,!1):r.defaultValue!=null&&v1(e,!!r.multiple,r.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=Nx)}switch(i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return qn(t),null;case 6:if(e&&t.stateNode!=null)qJ(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(De(166));if(i=qf(r2.current),qf($u.current),o_(t)){if(r=t.stateNode,i=t.memoizedProps,r[Su]=t,(o=r.nodeValue!==i)&&(e=No,e!==null))switch(e.tag){case 3:s_(r.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&s_(r.nodeValue,i,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(i.nodeType===9?i:i.ownerDocument).createTextNode(r),r[Su]=t,t.stateNode=r}return qn(t),null;case 13:if(Ui(sr),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Xi&&Oo!==null&&t.mode&1&&!(t.flags&128))uJ(),Z1(),t.flags|=98560,o=!1;else if(o=o_(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(De(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(De(317));o[Su]=t}else Z1(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;qn(t),o=!1}else pl!==null&&(rM(pl),pl=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||sr.current&1?Xr===0&&(Xr=3):AL())),t.updateQueue!==null&&(t.flags|=4),qn(t),null);case 4:return Y1(),Z6(e,t),e===null&&Qb(t.stateNode.containerInfo),qn(t),null;case 10:return dL(t.type._context),qn(t),null;case 17:return oo(t.type)&&Fx(),qn(t),null;case 19:if(Ui(sr),o=t.memoizedState,o===null)return qn(t),null;if(r=(t.flags&128)!==0,c=o.rendering,c===null)if(r)lv(o,!1);else{if(Xr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(c=Gx(e),c!==null){for(t.flags|=128,lv(o,!1),r=c.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=i,i=t.child;i!==null;)o=i,e=r,o.flags&=14680066,c=o.alternate,c===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Oi(sr,sr.current&1|2),t.child}e=e.sibling}o.tail!==null&&Mr()>Q1&&(t.flags|=128,r=!0,lv(o,!1),t.lanes=4194304)}else{if(!r)if(e=Gx(c),e!==null){if(t.flags|=128,r=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),lv(o,!0),o.tail===null&&o.tailMode==="hidden"&&!c.alternate&&!Xi)return qn(t),null}else 2*Mr()-o.renderingStartTime>Q1&&i!==1073741824&&(t.flags|=128,r=!0,lv(o,!1),t.lanes=4194304);o.isBackwards?(c.sibling=t.child,t.child=c):(i=o.last,i!==null?i.sibling=c:t.child=c,o.last=c)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Mr(),t.sibling=null,i=sr.current,Oi(sr,r?i&1|2:i&1),t):(qn(t),null);case 22:case 23:return ML(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Co&1073741824&&(qn(t),t.subtreeFlags&6&&(t.flags|=8192)):qn(t),null;case 24:return null;case 25:return null}throw Error(De(156,t.tag))}function Cde(e,t){switch(lL(t),t.tag){case 1:return oo(t.type)&&Fx(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Y1(),Ui(so),Ui(ms),gL(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return mL(t),null;case 13:if(Ui(sr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(De(340));Z1()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ui(sr),null;case 4:return Y1(),null;case 10:return dL(t.type._context),null;case 22:case 23:return ML(),null;case 24:return null;default:return null}}var u_=!1,ls=!1,kde=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function e1(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(r){wr(e,t,r)}else i.current=null}function K6(e,t,i){try{i()}catch(r){wr(e,t,r)}}var pF=!1;function Lde(e,t){if(O6=Ox,e=KW(),oL(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var r=i.getSelection&&i.getSelection();if(r&&r.rangeCount!==0){i=r.anchorNode;var n=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{i.nodeType,o.nodeType}catch{i=null;break e}var c=0,y=-1,v=-1,_=0,I=0,$=e,A=null;t:for(;;){for(var k;$!==i||n!==0&&$.nodeType!==3||(y=c+n),$!==o||r!==0&&$.nodeType!==3||(v=c+r),$.nodeType===3&&(c+=$.nodeValue.length),(k=$.firstChild)!==null;)A=$,$=k;for(;;){if($===e)break t;if(A===i&&++_===n&&(y=c),A===o&&++I===r&&(v=c),(k=$.nextSibling)!==null)break;$=A,A=$.parentNode}$=k}i=y===-1||v===-1?null:{start:y,end:v}}else i=null}i=i||{start:0,end:0}}else i=null;for(R6={focusedElem:e,selectionRange:i},Ox=!1,Ye=t;Ye!==null;)if(t=Ye,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ye=e;else for(;Ye!==null;){t=Ye;try{var R=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var N=R.memoizedProps,D=R.memoizedState,j=t.stateNode,z=j.getSnapshotBeforeUpdate(t.elementType===t.type?N:ll(t.type,N),D);j.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var U=t.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(De(163))}}catch(W){wr(t,t.return,W)}if(e=t.sibling,e!==null){e.return=t.return,Ye=e;break}Ye=t.return}return R=pF,pF=!1,R}function fb(e,t,i){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do{if((n.tag&e)===e){var o=n.destroy;n.destroy=void 0,o!==void 0&&K6(t,i,o)}n=n.next}while(n!==r)}}function H4(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var r=i.create;i.destroy=r()}i=i.next}while(i!==t)}}function Y6(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function HJ(e){var t=e.alternate;t!==null&&(e.alternate=null,HJ(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Su],delete t[t2],delete t[F6],delete t[fde],delete t[yde])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function WJ(e){return e.tag===5||e.tag===3||e.tag===4}function fF(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||WJ(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function X6(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Nx));else if(r!==4&&(e=e.child,e!==null))for(X6(e,t,i),e=e.sibling;e!==null;)X6(e,t,i),e=e.sibling}function Q6(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Q6(e,t,i),e=e.sibling;e!==null;)Q6(e,t,i),e=e.sibling}var Rn=null,cl=!1;function dh(e,t,i){for(i=i.child;i!==null;)JJ(e,t,i),i=i.sibling}function JJ(e,t,i){if(Tu&&typeof Tu.onCommitFiberUnmount=="function")try{Tu.onCommitFiberUnmount(D4,i)}catch{}switch(i.tag){case 5:ls||e1(i,t);case 6:var r=Rn,n=cl;Rn=null,dh(e,t,i),Rn=r,cl=n,Rn!==null&&(cl?(e=Rn,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Rn.removeChild(i.stateNode));break;case 18:Rn!==null&&(cl?(e=Rn,i=i.stateNode,e.nodeType===8?JT(e.parentNode,i):e.nodeType===1&&JT(e,i),Kb(e)):JT(Rn,i.stateNode));break;case 4:r=Rn,n=cl,Rn=i.stateNode.containerInfo,cl=!0,dh(e,t,i),Rn=r,cl=n;break;case 0:case 11:case 14:case 15:if(!ls&&(r=i.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){n=r=r.next;do{var o=n,c=o.destroy;o=o.tag,c!==void 0&&(o&2||o&4)&&K6(i,t,c),n=n.next}while(n!==r)}dh(e,t,i);break;case 1:if(!ls&&(e1(i,t),r=i.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=i.memoizedProps,r.state=i.memoizedState,r.componentWillUnmount()}catch(y){wr(i,t,y)}dh(e,t,i);break;case 21:dh(e,t,i);break;case 22:i.mode&1?(ls=(r=ls)||i.memoizedState!==null,dh(e,t,i),ls=r):dh(e,t,i);break;default:dh(e,t,i)}}function yF(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new kde),t.forEach(function(r){var n=Vde.bind(null,e,r);i.has(r)||(i.add(r),r.then(n,n))})}}function Ca(e,t){var i=t.deletions;if(i!==null)for(var r=0;r<i.length;r++){var n=i[r];try{var o=e,c=t,y=c;e:for(;y!==null;){switch(y.tag){case 5:Rn=y.stateNode,cl=!1;break e;case 3:Rn=y.stateNode.containerInfo,cl=!0;break e;case 4:Rn=y.stateNode.containerInfo,cl=!0;break e}y=y.return}if(Rn===null)throw Error(De(160));JJ(o,c,n),Rn=null,cl=!1;var v=n.alternate;v!==null&&(v.return=null),n.return=null}catch(_){wr(n,t,_)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ZJ(t,e),t=t.sibling}function ZJ(e,t){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ca(t,e),Ol(e),r&4){try{fb(3,e,e.return),H4(3,e)}catch(N){wr(e,e.return,N)}try{fb(5,e,e.return)}catch(N){wr(e,e.return,N)}}break;case 1:Ca(t,e),Ol(e),r&512&&i!==null&&e1(i,i.return);break;case 5:if(Ca(t,e),Ol(e),r&512&&i!==null&&e1(i,i.return),e.flags&32){var n=e.stateNode;try{Hb(n,"")}catch(N){wr(e,e.return,N)}}if(r&4&&(n=e.stateNode,n!=null)){var o=e.memoizedProps,c=i!==null?i.memoizedProps:o,y=e.type,v=e.updateQueue;if(e.updateQueue=null,v!==null)try{y==="input"&&o.type==="radio"&&o.name!=null&&gW(n,o),x6(y,c);var _=x6(y,o);for(c=0;c<v.length;c+=2){var I=v[c],$=v[c+1];I==="style"?SW(n,$):I==="dangerouslySetInnerHTML"?bW(n,$):I==="children"?Hb(n,$):Wk(n,I,$,_)}switch(y){case"input":v6(n,o);break;case"textarea":vW(n,o);break;case"select":var A=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!o.multiple;var k=o.value;k!=null?v1(n,!!o.multiple,k,!1):A!==!!o.multiple&&(o.defaultValue!=null?v1(n,!!o.multiple,o.defaultValue,!0):v1(n,!!o.multiple,o.multiple?[]:"",!1))}n[t2]=o}catch(N){wr(e,e.return,N)}}break;case 6:if(Ca(t,e),Ol(e),r&4){if(e.stateNode===null)throw Error(De(162));n=e.stateNode,o=e.memoizedProps;try{n.nodeValue=o}catch(N){wr(e,e.return,N)}}break;case 3:if(Ca(t,e),Ol(e),r&4&&i!==null&&i.memoizedState.isDehydrated)try{Kb(t.containerInfo)}catch(N){wr(e,e.return,N)}break;case 4:Ca(t,e),Ol(e);break;case 13:Ca(t,e),Ol(e),n=e.child,n.flags&8192&&(o=n.memoizedState!==null,n.stateNode.isHidden=o,!o||n.alternate!==null&&n.alternate.memoizedState!==null||($L=Mr())),r&4&&yF(e);break;case 22:if(I=i!==null&&i.memoizedState!==null,e.mode&1?(ls=(_=ls)||I,Ca(t,e),ls=_):Ca(t,e),Ol(e),r&8192){if(_=e.memoizedState!==null,(e.stateNode.isHidden=_)&&!I&&e.mode&1)for(Ye=e,I=e.child;I!==null;){for($=Ye=I;Ye!==null;){switch(A=Ye,k=A.child,A.tag){case 0:case 11:case 14:case 15:fb(4,A,A.return);break;case 1:e1(A,A.return);var R=A.stateNode;if(typeof R.componentWillUnmount=="function"){r=A,i=A.return;try{t=r,R.props=t.memoizedProps,R.state=t.memoizedState,R.componentWillUnmount()}catch(N){wr(r,i,N)}}break;case 5:e1(A,A.return);break;case 22:if(A.memoizedState!==null){gF($);continue}}k!==null?(k.return=A,Ye=k):gF($)}I=I.sibling}e:for(I=null,$=e;;){if($.tag===5){if(I===null){I=$;try{n=$.stateNode,_?(o=n.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(y=$.stateNode,v=$.memoizedProps.style,c=v!=null&&v.hasOwnProperty("display")?v.display:null,y.style.display=_W("display",c))}catch(N){wr(e,e.return,N)}}}else if($.tag===6){if(I===null)try{$.stateNode.nodeValue=_?"":$.memoizedProps}catch(N){wr(e,e.return,N)}}else if(($.tag!==22&&$.tag!==23||$.memoizedState===null||$===e)&&$.child!==null){$.child.return=$,$=$.child;continue}if($===e)break e;for(;$.sibling===null;){if($.return===null||$.return===e)break e;I===$&&(I=null),$=$.return}I===$&&(I=null),$.sibling.return=$.return,$=$.sibling}}break;case 19:Ca(t,e),Ol(e),r&4&&yF(e);break;case 21:break;default:Ca(t,e),Ol(e)}}function Ol(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(WJ(i)){var r=i;break e}i=i.return}throw Error(De(160))}switch(r.tag){case 5:var n=r.stateNode;r.flags&32&&(Hb(n,""),r.flags&=-33);var o=fF(e);Q6(e,o,n);break;case 3:case 4:var c=r.stateNode.containerInfo,y=fF(e);X6(e,y,c);break;default:throw Error(De(161))}}catch(v){wr(e,e.return,v)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ode(e,t,i){Ye=e,KJ(e)}function KJ(e,t,i){for(var r=(e.mode&1)!==0;Ye!==null;){var n=Ye,o=n.child;if(n.tag===22&&r){var c=n.memoizedState!==null||u_;if(!c){var y=n.alternate,v=y!==null&&y.memoizedState!==null||ls;y=u_;var _=ls;if(u_=c,(ls=v)&&!_)for(Ye=n;Ye!==null;)c=Ye,v=c.child,c.tag===22&&c.memoizedState!==null?vF(n):v!==null?(v.return=c,Ye=v):vF(n);for(;o!==null;)Ye=o,KJ(o),o=o.sibling;Ye=n,u_=y,ls=_}mF(e)}else n.subtreeFlags&8772&&o!==null?(o.return=n,Ye=o):mF(e)}}function mF(e){for(;Ye!==null;){var t=Ye;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ls||H4(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ls)if(i===null)r.componentDidMount();else{var n=t.elementType===t.type?i.memoizedProps:ll(t.type,i.memoizedProps);r.componentDidUpdate(n,i.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&eF(t,o,r);break;case 3:var c=t.updateQueue;if(c!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}eF(t,c,i)}break;case 5:var y=t.stateNode;if(i===null&&t.flags&4){i=y;var v=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":v.autoFocus&&i.focus();break;case"img":v.src&&(i.src=v.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var _=t.alternate;if(_!==null){var I=_.memoizedState;if(I!==null){var $=I.dehydrated;$!==null&&Kb($)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(De(163))}ls||t.flags&512&&Y6(t)}catch(A){wr(t,t.return,A)}}if(t===e){Ye=null;break}if(i=t.sibling,i!==null){i.return=t.return,Ye=i;break}Ye=t.return}}function gF(e){for(;Ye!==null;){var t=Ye;if(t===e){Ye=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Ye=i;break}Ye=t.return}}function vF(e){for(;Ye!==null;){var t=Ye;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{H4(4,t)}catch(v){wr(t,i,v)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var n=t.return;try{r.componentDidMount()}catch(v){wr(t,n,v)}}var o=t.return;try{Y6(t)}catch(v){wr(t,o,v)}break;case 5:var c=t.return;try{Y6(t)}catch(v){wr(t,c,v)}}}catch(v){wr(t,t.return,v)}if(t===e){Ye=null;break}var y=t.sibling;if(y!==null){y.return=t.return,Ye=y;break}Ye=t.return}}var Rde=Math.ceil,Wx=th.ReactCurrentDispatcher,IL=th.ReactCurrentOwner,_a=th.ReactCurrentBatchConfig,Qt=0,vn=null,zr=null,Fn=0,Co=0,t1=up(0),Xr=0,a2=null,g0=0,W4=0,TL=0,yb=null,Ks=null,$L=0,Q1=1/0,$c=null,Jx=!1,eM=null,zd=null,c_=!1,xd=null,Zx=0,mb=0,tM=null,DS=-1,jS=0;function As(){return Qt&6?Mr():DS!==-1?DS:DS=Mr()}function Vd(e){return e.mode&1?Qt&2&&Fn!==0?Fn&-Fn:gde.transition!==null?(jS===0&&(jS=RW()),jS):(e=bi,e!==0||(e=window.event,e=e===void 0?16:VW(e.type)),e):1}function wl(e,t,i,r){if(50<mb)throw mb=0,tM=null,Error(De(185));Y2(e,i,r),(!(Qt&2)||e!==vn)&&(e===vn&&(!(Qt&2)&&(W4|=i),Xr===4&&vd(e,Fn)),ao(e,r),i===1&&Qt===0&&!(t.mode&1)&&(Q1=Mr()+500,B4&&cp()))}function ao(e,t){var i=e.callbackNode;ghe(e,t);var r=Lx(e,e===vn?Fn:0);if(r===0)i!==null&&EN(i),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(i!=null&&EN(i),t===1)e.tag===0?mde(wF.bind(null,e)):oJ(wF.bind(null,e)),dde(function(){!(Qt&6)&&cp()}),i=null;else{switch(PW(r)){case 1:i=Xk;break;case 4:i=LW;break;case 16:i=kx;break;case 536870912:i=OW;break;default:i=kx}i=nZ(i,YJ.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function YJ(e,t){if(DS=-1,jS=0,Qt&6)throw Error(De(327));var i=e.callbackNode;if(x1()&&e.callbackNode!==i)return null;var r=Lx(e,e===vn?Fn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Kx(e,r);else{t=r;var n=Qt;Qt|=2;var o=QJ();(vn!==e||Fn!==t)&&($c=null,Q1=Mr()+500,Qf(e,t));do try{Fde();break}catch(y){XJ(e,y)}while(!0);hL(),Wx.current=o,Qt=n,zr!==null?t=0:(vn=null,Fn=0,t=Xr)}if(t!==0){if(t===2&&(n=M6(e),n!==0&&(r=n,t=iM(e,n))),t===1)throw i=a2,Qf(e,0),vd(e,r),ao(e,Mr()),i;if(t===6)vd(e,r);else{if(n=e.current.alternate,!(r&30)&&!Pde(n)&&(t=Kx(e,r),t===2&&(o=M6(e),o!==0&&(r=o,t=iM(e,o))),t===1))throw i=a2,Qf(e,0),vd(e,r),ao(e,Mr()),i;switch(e.finishedWork=n,e.finishedLanes=r,t){case 0:case 1:throw Error(De(345));case 2:Pp(e,Ks,$c);break;case 3:if(vd(e,r),(r&130023424)===r&&(t=$L+500-Mr(),10<t)){if(Lx(e,0)!==0)break;if(n=e.suspendedLanes,(n&r)!==r){As(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=N6(Pp.bind(null,e,Ks,$c),t);break}Pp(e,Ks,$c);break;case 4:if(vd(e,r),(r&4194240)===r)break;for(t=e.eventTimes,n=-1;0<r;){var c=31-vl(r);o=1<<c,c=t[c],c>n&&(n=c),r&=~o}if(r=n,r=Mr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Rde(r/1960))-r,10<r){e.timeoutHandle=N6(Pp.bind(null,e,Ks,$c),r);break}Pp(e,Ks,$c);break;case 5:Pp(e,Ks,$c);break;default:throw Error(De(329))}}}return ao(e,Mr()),e.callbackNode===i?YJ.bind(null,e):null}function iM(e,t){var i=yb;return e.current.memoizedState.isDehydrated&&(Qf(e,t).flags|=256),e=Kx(e,t),e!==2&&(t=Ks,Ks=i,t!==null&&rM(t)),e}function rM(e){Ks===null?Ks=e:Ks.push.apply(Ks,e)}function Pde(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var r=0;r<i.length;r++){var n=i[r],o=n.getSnapshot;n=n.value;try{if(!xl(o(),n))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vd(e,t){for(t&=~TL,t&=~W4,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-vl(t),r=1<<i;e[i]=-1,t&=~r}}function wF(e){if(Qt&6)throw Error(De(327));x1();var t=Lx(e,0);if(!(t&1))return ao(e,Mr()),null;var i=Kx(e,t);if(e.tag!==0&&i===2){var r=M6(e);r!==0&&(t=r,i=iM(e,r))}if(i===1)throw i=a2,Qf(e,0),vd(e,t),ao(e,Mr()),i;if(i===6)throw Error(De(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pp(e,Ks,$c),ao(e,Mr()),null}function EL(e,t){var i=Qt;Qt|=1;try{return e(t)}finally{Qt=i,Qt===0&&(Q1=Mr()+500,B4&&cp())}}function v0(e){xd!==null&&xd.tag===0&&!(Qt&6)&&x1();var t=Qt;Qt|=1;var i=_a.transition,r=bi;try{if(_a.transition=null,bi=1,e)return e()}finally{bi=r,_a.transition=i,Qt=t,!(Qt&6)&&cp()}}function ML(){Co=t1.current,Ui(t1)}function Qf(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,hde(i)),zr!==null)for(i=zr.return;i!==null;){var r=i;switch(lL(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Fx();break;case 3:Y1(),Ui(so),Ui(ms),gL();break;case 5:mL(r);break;case 4:Y1();break;case 13:Ui(sr);break;case 19:Ui(sr);break;case 10:dL(r.type._context);break;case 22:case 23:ML()}i=i.return}if(vn=e,zr=e=Ud(e.current,null),Fn=Co=t,Xr=0,a2=null,TL=W4=g0=0,Ks=yb=null,Gf!==null){for(t=0;t<Gf.length;t++)if(i=Gf[t],r=i.interleaved,r!==null){i.interleaved=null;var n=r.next,o=i.pending;if(o!==null){var c=o.next;o.next=n,r.next=c}i.pending=r}Gf=null}return e}function XJ(e,t){do{var i=zr;try{if(hL(),PS.current=Hx,qx){for(var r=or.memoizedState;r!==null;){var n=r.queue;n!==null&&(n.pending=null),r=r.next}qx=!1}if(m0=0,fn=Zr=or=null,pb=!1,n2=0,IL.current=null,i===null||i.return===null){Xr=1,a2=t,zr=null;break}e:{var o=e,c=i.return,y=i,v=t;if(t=Fn,y.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){var _=v,I=y,$=I.tag;if(!(I.mode&1)&&($===0||$===11||$===15)){var A=I.alternate;A?(I.updateQueue=A.updateQueue,I.memoizedState=A.memoizedState,I.lanes=A.lanes):(I.updateQueue=null,I.memoizedState=null)}var k=oF(c);if(k!==null){k.flags&=-257,aF(k,c,y,o,t),k.mode&1&&sF(o,_,t),t=k,v=_;var R=t.updateQueue;if(R===null){var N=new Set;N.add(v),t.updateQueue=N}else R.add(v);break e}else{if(!(t&1)){sF(o,_,t),AL();break e}v=Error(De(426))}}else if(Xi&&y.mode&1){var D=oF(c);if(D!==null){!(D.flags&65536)&&(D.flags|=256),aF(D,c,y,o,t),uL(X1(v,y));break e}}o=v=X1(v,y),Xr!==4&&(Xr=2),yb===null?yb=[o]:yb.push(o),o=c;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var j=PJ(o,v,t);QN(o,j);break e;case 1:y=v;var z=o.type,U=o.stateNode;if(!(o.flags&128)&&(typeof z.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(zd===null||!zd.has(U)))){o.flags|=65536,t&=-t,o.lanes|=t;var W=NJ(o,y,t);QN(o,W);break e}}o=o.return}while(o!==null)}tZ(i)}catch(Q){t=Q,zr===i&&i!==null&&(zr=i=i.return);continue}break}while(!0)}function QJ(){var e=Wx.current;return Wx.current=Hx,e===null?Hx:e}function AL(){(Xr===0||Xr===3||Xr===2)&&(Xr=4),vn===null||!(g0&268435455)&&!(W4&268435455)||vd(vn,Fn)}function Kx(e,t){var i=Qt;Qt|=2;var r=QJ();(vn!==e||Fn!==t)&&($c=null,Qf(e,t));do try{Nde();break}catch(n){XJ(e,n)}while(!0);if(hL(),Qt=i,Wx.current=r,zr!==null)throw Error(De(261));return vn=null,Fn=0,Xr}function Nde(){for(;zr!==null;)eZ(zr)}function Fde(){for(;zr!==null&&!lhe();)eZ(zr)}function eZ(e){var t=rZ(e.alternate,e,Co);e.memoizedProps=e.pendingProps,t===null?tZ(e):zr=t,IL.current=null}function tZ(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=Cde(i,t),i!==null){i.flags&=32767,zr=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Xr=6,zr=null;return}}else if(i=Ade(i,t,Co),i!==null){zr=i;return}if(t=t.sibling,t!==null){zr=t;return}zr=t=e}while(t!==null);Xr===0&&(Xr=5)}function Pp(e,t,i){var r=bi,n=_a.transition;try{_a.transition=null,bi=1,Dde(e,t,i,r)}finally{_a.transition=n,bi=r}return null}function Dde(e,t,i,r){do x1();while(xd!==null);if(Qt&6)throw Error(De(327));i=e.finishedWork;var n=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(De(177));e.callbackNode=null,e.callbackPriority=0;var o=i.lanes|i.childLanes;if(vhe(e,o),e===vn&&(zr=vn=null,Fn=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||c_||(c_=!0,nZ(kx,function(){return x1(),null})),o=(i.flags&15990)!==0,i.subtreeFlags&15990||o){o=_a.transition,_a.transition=null;var c=bi;bi=1;var y=Qt;Qt|=4,IL.current=null,Lde(e,i),ZJ(i,e),nde(R6),Ox=!!O6,R6=O6=null,e.current=i,Ode(i),uhe(),Qt=y,bi=c,_a.transition=o}else e.current=i;if(c_&&(c_=!1,xd=e,Zx=n),o=e.pendingLanes,o===0&&(zd=null),dhe(i.stateNode),ao(e,Mr()),t!==null)for(r=e.onRecoverableError,i=0;i<t.length;i++)n=t[i],r(n.value,{componentStack:n.stack,digest:n.digest});if(Jx)throw Jx=!1,e=eM,eM=null,e;return Zx&1&&e.tag!==0&&x1(),o=e.pendingLanes,o&1?e===tM?mb++:(mb=0,tM=e):mb=0,cp(),null}function x1(){if(xd!==null){var e=PW(Zx),t=_a.transition,i=bi;try{if(_a.transition=null,bi=16>e?16:e,xd===null)var r=!1;else{if(e=xd,xd=null,Zx=0,Qt&6)throw Error(De(331));var n=Qt;for(Qt|=4,Ye=e.current;Ye!==null;){var o=Ye,c=o.child;if(Ye.flags&16){var y=o.deletions;if(y!==null){for(var v=0;v<y.length;v++){var _=y[v];for(Ye=_;Ye!==null;){var I=Ye;switch(I.tag){case 0:case 11:case 15:fb(8,I,o)}var $=I.child;if($!==null)$.return=I,Ye=$;else for(;Ye!==null;){I=Ye;var A=I.sibling,k=I.return;if(HJ(I),I===_){Ye=null;break}if(A!==null){A.return=k,Ye=A;break}Ye=k}}}var R=o.alternate;if(R!==null){var N=R.child;if(N!==null){R.child=null;do{var D=N.sibling;N.sibling=null,N=D}while(N!==null)}}Ye=o}}if(o.subtreeFlags&2064&&c!==null)c.return=o,Ye=c;else e:for(;Ye!==null;){if(o=Ye,o.flags&2048)switch(o.tag){case 0:case 11:case 15:fb(9,o,o.return)}var j=o.sibling;if(j!==null){j.return=o.return,Ye=j;break e}Ye=o.return}}var z=e.current;for(Ye=z;Ye!==null;){c=Ye;var U=c.child;if(c.subtreeFlags&2064&&U!==null)U.return=c,Ye=U;else e:for(c=z;Ye!==null;){if(y=Ye,y.flags&2048)try{switch(y.tag){case 0:case 11:case 15:H4(9,y)}}catch(Q){wr(y,y.return,Q)}if(y===c){Ye=null;break e}var W=y.sibling;if(W!==null){W.return=y.return,Ye=W;break e}Ye=y.return}}if(Qt=n,cp(),Tu&&typeof Tu.onPostCommitFiberRoot=="function")try{Tu.onPostCommitFiberRoot(D4,e)}catch{}r=!0}return r}finally{bi=i,_a.transition=t}}return!1}function bF(e,t,i){t=X1(i,t),t=PJ(e,t,1),e=jd(e,t,1),t=As(),e!==null&&(Y2(e,1,t),ao(e,t))}function wr(e,t,i){if(e.tag===3)bF(e,e,i);else for(;t!==null;){if(t.tag===3){bF(t,e,i);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zd===null||!zd.has(r))){e=X1(i,e),e=NJ(t,e,1),t=jd(t,e,1),e=As(),t!==null&&(Y2(t,1,e),ao(t,e));break}}t=t.return}}function jde(e,t,i){var r=e.pingCache;r!==null&&r.delete(t),t=As(),e.pingedLanes|=e.suspendedLanes&i,vn===e&&(Fn&i)===i&&(Xr===4||Xr===3&&(Fn&130023424)===Fn&&500>Mr()-$L?Qf(e,0):TL|=i),ao(e,t)}function iZ(e,t){t===0&&(e.mode&1?(t=e_,e_<<=1,!(e_&130023424)&&(e_=4194304)):t=1);var i=As();e=Zc(e,t),e!==null&&(Y2(e,t,i),ao(e,i))}function zde(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),iZ(e,i)}function Vde(e,t){var i=0;switch(e.tag){case 13:var r=e.stateNode,n=e.memoizedState;n!==null&&(i=n.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(De(314))}r!==null&&r.delete(t),iZ(e,i)}var rZ;rZ=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||so.current)Qs=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return Qs=!1,Mde(e,t,i);Qs=!!(e.flags&131072)}else Qs=!1,Xi&&t.flags&1048576&&aJ(t,zx,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;FS(e,t),e=t.pendingProps;var n=J1(t,ms.current);S1(t,i),n=wL(null,t,r,e,n,i);var o=bL();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,oo(r)?(o=!0,Dx(t)):o=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,fL(t),n.updater=q4,t.stateNode=n,n._reactInternals=t,B6(t,r,e,i),t=H6(null,t,r,!0,o,i)):(t.tag=0,Xi&&o&&aL(t),$s(null,t,n,i),t=t.child),t;case 16:r=t.elementType;e:{switch(FS(e,t),e=t.pendingProps,n=r._init,r=n(r._payload),t.type=r,n=t.tag=Bde(r),e=ll(r,e),n){case 0:t=q6(null,t,r,e,i);break e;case 1:t=cF(null,t,r,e,i);break e;case 11:t=lF(null,t,r,e,i);break e;case 14:t=uF(null,t,r,ll(r.type,e),i);break e}throw Error(De(306,r,""))}return t;case 0:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:ll(r,n),q6(e,t,r,n,i);case 1:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:ll(r,n),cF(e,t,r,n,i);case 3:e:{if(zJ(t),e===null)throw Error(De(387));r=t.pendingProps,o=t.memoizedState,n=o.element,pJ(e,t),Bx(t,r,null,i);var c=t.memoizedState;if(r=c.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){n=X1(Error(De(423)),t),t=hF(e,t,r,i,n);break e}else if(r!==n){n=X1(Error(De(424)),t),t=hF(e,t,r,i,n);break e}else for(Oo=Dd(t.stateNode.containerInfo.firstChild),No=t,Xi=!0,pl=null,i=hJ(t,null,r,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Z1(),r===n){t=Kc(e,t,i);break e}$s(e,t,r,i)}t=t.child}return t;case 5:return fJ(t),e===null&&z6(t),r=t.type,n=t.pendingProps,o=e!==null?e.memoizedProps:null,c=n.children,P6(r,n)?c=null:o!==null&&P6(r,o)&&(t.flags|=32),jJ(e,t),$s(e,t,c,i),t.child;case 6:return e===null&&z6(t),null;case 13:return VJ(e,t,i);case 4:return yL(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=K1(t,null,r,i):$s(e,t,r,i),t.child;case 11:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:ll(r,n),lF(e,t,r,n,i);case 7:return $s(e,t,t.pendingProps,i),t.child;case 8:return $s(e,t,t.pendingProps.children,i),t.child;case 12:return $s(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(r=t.type._context,n=t.pendingProps,o=t.memoizedProps,c=n.value,Oi(Vx,r._currentValue),r._currentValue=c,o!==null)if(xl(o.value,c)){if(o.children===n.children&&!so.current){t=Kc(e,t,i);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var y=o.dependencies;if(y!==null){c=o.child;for(var v=y.firstContext;v!==null;){if(v.context===r){if(o.tag===1){v=Uc(-1,i&-i),v.tag=2;var _=o.updateQueue;if(_!==null){_=_.shared;var I=_.pending;I===null?v.next=v:(v.next=I.next,I.next=v),_.pending=v}}o.lanes|=i,v=o.alternate,v!==null&&(v.lanes|=i),V6(o.return,i,t),y.lanes|=i;break}v=v.next}}else if(o.tag===10)c=o.type===t.type?null:o.child;else if(o.tag===18){if(c=o.return,c===null)throw Error(De(341));c.lanes|=i,y=c.alternate,y!==null&&(y.lanes|=i),V6(c,i,t),c=o.sibling}else c=o.child;if(c!==null)c.return=o;else for(c=o;c!==null;){if(c===t){c=null;break}if(o=c.sibling,o!==null){o.return=c.return,c=o;break}c=c.return}o=c}$s(e,t,n.children,i),t=t.child}return t;case 9:return n=t.type,r=t.pendingProps.children,S1(t,i),n=$a(n),r=r(n),t.flags|=1,$s(e,t,r,i),t.child;case 14:return r=t.type,n=ll(r,t.pendingProps),n=ll(r.type,n),uF(e,t,r,n,i);case 15:return FJ(e,t,t.type,t.pendingProps,i);case 17:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:ll(r,n),FS(e,t),t.tag=1,oo(r)?(e=!0,Dx(t)):e=!1,S1(t,i),RJ(t,r,n),B6(t,r,n,i),H6(null,t,r,!0,e,i);case 19:return UJ(e,t,i);case 22:return DJ(e,t,i)}throw Error(De(156,t.tag))};function nZ(e,t){return kW(e,t)}function Ude(e,t,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function va(e,t,i,r){return new Ude(e,t,i,r)}function CL(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Bde(e){if(typeof e=="function")return CL(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Zk)return 11;if(e===Kk)return 14}return 2}function Ud(e,t){var i=e.alternate;return i===null?(i=va(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function zS(e,t,i,r,n,o){var c=2;if(r=e,typeof e=="function")CL(e)&&(c=1);else if(typeof e=="string")c=5;else e:switch(e){case qm:return e0(i.children,n,o,t);case Jk:c=8,n|=8;break;case p6:return e=va(12,i,t,n|2),e.elementType=p6,e.lanes=o,e;case f6:return e=va(13,i,t,n),e.elementType=f6,e.lanes=o,e;case y6:return e=va(19,i,t,n),e.elementType=y6,e.lanes=o,e;case fW:return J4(i,n,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case dW:c=10;break e;case pW:c=9;break e;case Zk:c=11;break e;case Kk:c=14;break e;case od:c=16,r=null;break e}throw Error(De(130,e==null?e:typeof e,""))}return t=va(c,i,t,n),t.elementType=e,t.type=r,t.lanes=o,t}function e0(e,t,i,r){return e=va(7,e,r,t),e.lanes=i,e}function J4(e,t,i,r){return e=va(22,e,r,t),e.elementType=fW,e.lanes=i,e.stateNode={isHidden:!1},e}function i$(e,t,i){return e=va(6,e,null,t),e.lanes=i,e}function r$(e,t,i){return t=va(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Gde(e,t,i,r,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=FT(0),this.expirationTimes=FT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=FT(0),this.identifierPrefix=r,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function kL(e,t,i,r,n,o,c,y,v){return e=new Gde(e,t,i,y,v),t===1?(t=1,o===!0&&(t|=8)):t=0,o=va(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},fL(o),e}function qde(e,t,i){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gm,key:r==null?null:""+r,children:e,containerInfo:t,implementation:i}}function sZ(e){if(!e)return Yd;e=e._reactInternals;e:{if(U0(e)!==e||e.tag!==1)throw Error(De(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(oo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(De(171))}if(e.tag===1){var i=e.type;if(oo(i))return sJ(e,i,t)}return t}function oZ(e,t,i,r,n,o,c,y,v){return e=kL(i,r,!0,e,n,o,c,y,v),e.context=sZ(null),i=e.current,r=As(),n=Vd(i),o=Uc(r,n),o.callback=t??null,jd(i,o,n),e.current.lanes=n,Y2(e,n,r),ao(e,r),e}function Z4(e,t,i,r){var n=t.current,o=As(),c=Vd(n);return i=sZ(i),t.context===null?t.context=i:t.pendingContext=i,t=Uc(o,c),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=jd(n,t,c),e!==null&&(wl(e,n,c,o),RS(e,n,c)),c}function Yx(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function _F(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function LL(e,t){_F(e,t),(e=e.alternate)&&_F(e,t)}function Hde(){return null}var aZ=typeof reportError=="function"?reportError:function(e){console.error(e)};function OL(e){this._internalRoot=e}K4.prototype.render=OL.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(De(409));Z4(e,t,null,null)};K4.prototype.unmount=OL.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;v0(function(){Z4(null,e,null,null)}),t[Jc]=null}};function K4(e){this._internalRoot=e}K4.prototype.unstable_scheduleHydration=function(e){if(e){var t=DW();e={blockedOn:null,target:e,priority:t};for(var i=0;i<gd.length&&t!==0&&t<gd[i].priority;i++);gd.splice(i,0,e),i===0&&zW(e)}};function RL(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Y4(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function SF(){}function Wde(e,t,i,r,n){if(n){if(typeof r=="function"){var o=r;r=function(){var _=Yx(c);o.call(_)}}var c=oZ(t,r,e,0,null,!1,!1,"",SF);return e._reactRootContainer=c,e[Jc]=c.current,Qb(e.nodeType===8?e.parentNode:e),v0(),c}for(;n=e.lastChild;)e.removeChild(n);if(typeof r=="function"){var y=r;r=function(){var _=Yx(v);y.call(_)}}var v=kL(e,0,!1,null,null,!1,!1,"",SF);return e._reactRootContainer=v,e[Jc]=v.current,Qb(e.nodeType===8?e.parentNode:e),v0(function(){Z4(t,v,i,r)}),v}function X4(e,t,i,r,n){var o=i._reactRootContainer;if(o){var c=o;if(typeof n=="function"){var y=n;n=function(){var v=Yx(c);y.call(v)}}Z4(t,c,e,n)}else c=Wde(i,t,e,n,r);return Yx(c)}NW=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=qv(t.pendingLanes);i!==0&&(Qk(t,i|1),ao(t,Mr()),!(Qt&6)&&(Q1=Mr()+500,cp()))}break;case 13:v0(function(){var r=Zc(e,1);if(r!==null){var n=As();wl(r,e,1,n)}}),LL(e,1)}};eL=function(e){if(e.tag===13){var t=Zc(e,134217728);if(t!==null){var i=As();wl(t,e,134217728,i)}LL(e,134217728)}};FW=function(e){if(e.tag===13){var t=Vd(e),i=Zc(e,t);if(i!==null){var r=As();wl(i,e,t,r)}LL(e,t)}};DW=function(){return bi};jW=function(e,t){var i=bi;try{return bi=e,t()}finally{bi=i}};T6=function(e,t,i){switch(t){case"input":if(v6(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var r=i[t];if(r!==e&&r.form===e.form){var n=U4(r);if(!n)throw Error(De(90));mW(r),v6(r,n)}}}break;case"textarea":vW(e,i);break;case"select":t=i.value,t!=null&&v1(e,!!i.multiple,t,!1)}};TW=EL;$W=v0;var Jde={usingClientEntryPoint:!1,Events:[Q2,Zm,U4,xW,IW,EL]},uv={findFiberByHostInstance:Bf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Zde={bundleType:uv.bundleType,version:uv.version,rendererPackageName:uv.rendererPackageName,rendererConfig:uv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:th.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=AW(e),e===null?null:e.stateNode},findFiberByHostInstance:uv.findFiberByHostInstance||Hde,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var h_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!h_.isDisabled&&h_.supportsFiber)try{D4=h_.inject(Zde),Tu=h_}catch{}}Bo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jde;Bo.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!RL(t))throw Error(De(200));return qde(e,t,null,i)};Bo.createRoot=function(e,t){if(!RL(e))throw Error(De(299));var i=!1,r="",n=aZ;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=kL(e,1,!1,null,null,i,!1,r,n),e[Jc]=t.current,Qb(e.nodeType===8?e.parentNode:e),new OL(t)};Bo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(De(188)):(e=Object.keys(e).join(","),Error(De(268,e)));return e=AW(t),e=e===null?null:e.stateNode,e};Bo.flushSync=function(e){return v0(e)};Bo.hydrate=function(e,t,i){if(!Y4(t))throw Error(De(200));return X4(null,e,t,!0,i)};Bo.hydrateRoot=function(e,t,i){if(!RL(e))throw Error(De(405));var r=i!=null&&i.hydratedSources||null,n=!1,o="",c=aZ;if(i!=null&&(i.unstable_strictMode===!0&&(n=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onRecoverableError!==void 0&&(c=i.onRecoverableError)),t=oZ(t,null,e,1,i??null,n,!1,o,c),e[Jc]=t.current,Qb(e),r)for(e=0;e<r.length;e++)i=r[e],n=i._getVersion,n=n(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,n]:t.mutableSourceEagerHydrationData.push(i,n);return new K4(t)};Bo.render=function(e,t,i){if(!Y4(t))throw Error(De(200));return X4(null,e,t,!1,i)};Bo.unmountComponentAtNode=function(e){if(!Y4(e))throw Error(De(40));return e._reactRootContainer?(v0(function(){X4(null,null,e,!1,function(){e._reactRootContainer=null,e[Jc]=null})}),!0):!1};Bo.unstable_batchedUpdates=EL;Bo.unstable_renderSubtreeIntoContainer=function(e,t,i,r){if(!Y4(i))throw Error(De(200));if(e==null||e._reactInternals===void 0)throw Error(De(38));return X4(e,t,i,!1,r)};Bo.version="18.3.1-next-f1338f8080-20240426";function lZ(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lZ)}catch(e){console.error(e)}}lZ(),lW.exports=Bo;var Kde=lW.exports,xF=Kde;h6.createRoot=xF.createRoot,h6.hydrateRoot=xF.hydrateRoot;var uZ={},cZ={},hZ={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(){for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];if(typeof window<"u"){var y;typeof window.gtag>"u"&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(y=window).gtag.apply(y,o)}},i=t;e.default=i})(hZ);var dZ={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var t=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;function i(y){return y.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(v,_,I){return _>0&&_+v.length!==I.length&&v.search(t)>-1&&I.charAt(_-2)!==":"&&(I.charAt(_+v.length)!=="-"||I.charAt(_-1)==="-")&&I.charAt(_-1).search(/[^\s-]/)<0?v.toLowerCase():v.substr(1).search(/[A-Z]|\../)>-1?v:v.charAt(0).toUpperCase()+v.substr(1)})}function r(y){return typeof y=="string"&&y.indexOf("@")!==-1}var n="REDACTED (Potential Email Address)";function o(y){return r(y)?(console.warn("This arg looks like an email address, redacting."),n):y}function c(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,I=y||"";return v&&(I=i(y)),_&&(I=o(I)),I}})(dZ);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.GA4=void 0;var t=c(hZ),i=c(dZ),r=["eventCategory","eventAction","eventLabel","eventValue","hitType"],n=["title","location"],o=["page","hitType"];function c(fe){return fe&&fe.__esModule?fe:{default:fe}}function y(fe,se){if(fe==null)return{};var ye=v(fe,se),he,ce;if(Object.getOwnPropertySymbols){var xe=Object.getOwnPropertySymbols(fe);for(ce=0;ce<xe.length;ce++)he=xe[ce],!(se.indexOf(he)>=0)&&Object.prototype.propertyIsEnumerable.call(fe,he)&&(ye[he]=fe[he])}return ye}function v(fe,se){if(fe==null)return{};var ye={},he=Object.keys(fe),ce,xe;for(xe=0;xe<he.length;xe++)ce=he[xe],!(se.indexOf(ce)>=0)&&(ye[ce]=fe[ce]);return ye}function _(fe){"@babel/helpers - typeof";return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(se){return typeof se}:function(se){return se&&typeof Symbol=="function"&&se.constructor===Symbol&&se!==Symbol.prototype?"symbol":typeof se},_(fe)}function I(fe){return k(fe)||A(fe)||z(fe)||$()}function $(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A(fe){if(typeof Symbol<"u"&&fe[Symbol.iterator]!=null||fe["@@iterator"]!=null)return Array.from(fe)}function k(fe){if(Array.isArray(fe))return U(fe)}function R(fe,se){var ye=Object.keys(fe);if(Object.getOwnPropertySymbols){var he=Object.getOwnPropertySymbols(fe);se&&(he=he.filter(function(ce){return Object.getOwnPropertyDescriptor(fe,ce).enumerable})),ye.push.apply(ye,he)}return ye}function N(fe){for(var se=1;se<arguments.length;se++){var ye=arguments[se]!=null?arguments[se]:{};se%2?R(Object(ye),!0).forEach(function(he){ae(fe,he,ye[he])}):Object.getOwnPropertyDescriptors?Object.defineProperties(fe,Object.getOwnPropertyDescriptors(ye)):R(Object(ye)).forEach(function(he){Object.defineProperty(fe,he,Object.getOwnPropertyDescriptor(ye,he))})}return fe}function D(fe,se){return Q(fe)||W(fe,se)||z(fe,se)||j()}function j(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z(fe,se){if(fe){if(typeof fe=="string")return U(fe,se);var ye=Object.prototype.toString.call(fe).slice(8,-1);if(ye==="Object"&&fe.constructor&&(ye=fe.constructor.name),ye==="Map"||ye==="Set")return Array.from(fe);if(ye==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ye))return U(fe,se)}}function U(fe,se){(se==null||se>fe.length)&&(se=fe.length);for(var ye=0,he=new Array(se);ye<se;ye++)he[ye]=fe[ye];return he}function W(fe,se){var ye=fe==null?null:typeof Symbol<"u"&&fe[Symbol.iterator]||fe["@@iterator"];if(ye!=null){var he,ce,xe,Ne,Ze=[],lt=!0,Ot=!1;try{if(xe=(ye=ye.call(fe)).next,se!==0)for(;!(lt=(he=xe.call(ye)).done)&&(Ze.push(he.value),Ze.length!==se);lt=!0);}catch(Wt){Ot=!0,ce=Wt}finally{try{if(!lt&&ye.return!=null&&(Ne=ye.return(),Object(Ne)!==Ne))return}finally{if(Ot)throw ce}}return Ze}}function Q(fe){if(Array.isArray(fe))return fe}function K(fe,se){if(!(fe instanceof se))throw new TypeError("Cannot call a class as a function")}function ee(fe,se){for(var ye=0;ye<se.length;ye++){var he=se[ye];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(fe,ue(he.key),he)}}function ie(fe,se,ye){return se&&ee(fe.prototype,se),Object.defineProperty(fe,"prototype",{writable:!1}),fe}function ae(fe,se,ye){return se=ue(se),se in fe?Object.defineProperty(fe,se,{value:ye,enumerable:!0,configurable:!0,writable:!0}):fe[se]=ye,fe}function ue(fe){var se=Ie(fe,"string");return _(se)==="symbol"?se:String(se)}function Ie(fe,se){if(_(fe)!=="object"||fe===null)return fe;var ye=fe[Symbol.toPrimitive];if(ye!==void 0){var he=ye.call(fe,se||"default");if(_(he)!=="object")return he;throw new TypeError("@@toPrimitive must return a primitive value.")}return(se==="string"?String:Number)(fe)}var Ae=function(){function fe(){var se=this;K(this,fe),ae(this,"reset",function(){se.isInitialized=!1,se._testMode=!1,se._currentMeasurementId,se._hasLoadedGA=!1,se._isQueuing=!1,se._queueGtag=[]}),ae(this,"_gtag",function(){for(var ye=arguments.length,he=new Array(ye),ce=0;ce<ye;ce++)he[ce]=arguments[ce];se._testMode||se._isQueuing?se._queueGtag.push(he):t.default.apply(void 0,he)}),ae(this,"_loadGA",function(ye,he){var ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"https://www.googletagmanager.com/gtag/js";if(!(typeof window>"u"||typeof document>"u")&&!se._hasLoadedGA){var xe=document.createElement("script");xe.async=!0,xe.src="".concat(ce,"?id=").concat(ye),he&&xe.setAttribute("nonce",he),document.body.appendChild(xe),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},se._hasLoadedGA=!0}}),ae(this,"_toGtagOptions",function(ye){if(ye){var he={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"},ce=Object.entries(ye).reduce(function(xe,Ne){var Ze=D(Ne,2),lt=Ze[0],Ot=Ze[1];return he[lt]?xe[he[lt]]=Ot:xe[lt]=Ot,xe},{});return ce}}),ae(this,"initialize",function(ye){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ye)throw new Error("Require GA_MEASUREMENT_ID");var ce=typeof ye=="string"?[{trackingId:ye}]:ye;se._currentMeasurementId=ce[0].trackingId;var xe=he.gaOptions,Ne=he.gtagOptions,Ze=he.nonce,lt=he.testMode,Ot=lt===void 0?!1:lt,Wt=he.gtagUrl;if(se._testMode=Ot,Ot||se._loadGA(se._currentMeasurementId,Ze,Wt),se.isInitialized||(se._gtag("js",new Date),ce.forEach(function(Un){var ju=N(N(N({},se._toGtagOptions(N(N({},xe),Un.gaOptions))),Ne),Un.gtagOptions);Object.keys(ju).length?se._gtag("config",Un.trackingId,ju):se._gtag("config",Un.trackingId)})),se.isInitialized=!0,!Ot){var tr=I(se._queueGtag);for(se._queueGtag=[],se._isQueuing=!1;tr.length;){var Sr=tr.shift();se._gtag.apply(se,I(Sr)),Sr[0]==="get"&&(se._isQueuing=!0)}}}),ae(this,"set",function(ye){if(!ye){console.warn("`fieldsObject` is required in .set()");return}if(_(ye)!=="object"){console.warn("Expected `fieldsObject` arg to be an Object");return}Object.keys(ye).length===0&&console.warn("empty `fieldsObject` given to .set()"),se._gaCommand("set",ye)}),ae(this,"_gaCommandSendEvent",function(ye,he,ce,xe,Ne){se._gtag("event",he,N(N({event_category:ye,event_label:ce,value:xe},Ne&&{non_interaction:Ne.nonInteraction}),se._toGtagOptions(Ne)))}),ae(this,"_gaCommandSendEventParameters",function(){for(var ye=arguments.length,he=new Array(ye),ce=0;ce<ye;ce++)he[ce]=arguments[ce];if(typeof he[0]=="string")se._gaCommandSendEvent.apply(se,I(he.slice(1)));else{var xe=he[0],Ne=xe.eventCategory,Ze=xe.eventAction,lt=xe.eventLabel,Ot=xe.eventValue;xe.hitType;var Wt=y(xe,r);se._gaCommandSendEvent(Ne,Ze,lt,Ot,Wt)}}),ae(this,"_gaCommandSendTiming",function(ye,he,ce,xe){se._gtag("event","timing_complete",{name:he,value:ce,event_category:ye,event_label:xe})}),ae(this,"_gaCommandSendPageview",function(ye,he){if(he&&Object.keys(he).length){var ce=se._toGtagOptions(he),xe=ce.title,Ne=ce.location,Ze=y(ce,n);se._gtag("event","page_view",N(N(N(N({},ye&&{page_path:ye}),xe&&{page_title:xe}),Ne&&{page_location:Ne}),Ze))}else ye?se._gtag("event","page_view",{page_path:ye}):se._gtag("event","page_view")}),ae(this,"_gaCommandSendPageviewParameters",function(){for(var ye=arguments.length,he=new Array(ye),ce=0;ce<ye;ce++)he[ce]=arguments[ce];if(typeof he[0]=="string")se._gaCommandSendPageview.apply(se,I(he.slice(1)));else{var xe=he[0],Ne=xe.page;xe.hitType;var Ze=y(xe,o);se._gaCommandSendPageview(Ne,Ze)}}),ae(this,"_gaCommandSend",function(){for(var ye=arguments.length,he=new Array(ye),ce=0;ce<ye;ce++)he[ce]=arguments[ce];var xe=typeof he[0]=="string"?he[0]:he[0].hitType;switch(xe){case"event":se._gaCommandSendEventParameters.apply(se,he);break;case"pageview":se._gaCommandSendPageviewParameters.apply(se,he);break;case"timing":se._gaCommandSendTiming.apply(se,I(he.slice(1)));break;case"screenview":case"transaction":case"item":case"social":case"exception":console.warn("Unsupported send command: ".concat(xe));break;default:console.warn("Send command doesn't exist: ".concat(xe))}}),ae(this,"_gaCommandSet",function(){for(var ye=arguments.length,he=new Array(ye),ce=0;ce<ye;ce++)he[ce]=arguments[ce];typeof he[0]=="string"&&(he[0]=ae({},he[0],he[1])),se._gtag("set",se._toGtagOptions(he[0]))}),ae(this,"_gaCommand",function(ye){for(var he=arguments.length,ce=new Array(he>1?he-1:0),xe=1;xe<he;xe++)ce[xe-1]=arguments[xe];switch(ye){case"send":se._gaCommandSend.apply(se,ce);break;case"set":se._gaCommandSet.apply(se,ce);break;default:console.warn("Command doesn't exist: ".concat(ye))}}),ae(this,"ga",function(){for(var ye=arguments.length,he=new Array(ye),ce=0;ce<ye;ce++)he[ce]=arguments[ce];if(typeof he[0]=="string")se._gaCommand.apply(se,he);else{var xe=he[0];se._gtag("get",se._currentMeasurementId,"client_id",function(Ne){se._isQueuing=!1;var Ze=se._queueGtag;for(xe({get:function(Wt){return Wt==="clientId"?Ne:Wt==="trackingId"?se._currentMeasurementId:Wt==="apiVersion"?"1":void 0}});Ze.length;){var lt=Ze.shift();se._gtag.apply(se,I(lt))}}),se._isQueuing=!0}return se.ga}),ae(this,"event",function(ye,he){if(typeof ye=="string")se._gtag("event",ye,se._toGtagOptions(he));else{var ce=ye.action,xe=ye.category,Ne=ye.label,Ze=ye.value,lt=ye.nonInteraction,Ot=ye.transport;if(!xe||!ce){console.warn("args.category AND args.action are required in event()");return}var Wt={hitType:"event",eventCategory:(0,i.default)(xe),eventAction:(0,i.default)(ce)};Ne&&(Wt.eventLabel=(0,i.default)(Ne)),typeof Ze<"u"&&(typeof Ze!="number"?console.warn("Expected `args.value` arg to be a Number."):Wt.eventValue=Ze),typeof lt<"u"&&(typeof lt!="boolean"?console.warn("`args.nonInteraction` must be a boolean."):Wt.nonInteraction=lt),typeof Ot<"u"&&(typeof Ot!="string"?console.warn("`args.transport` must be a string."):(["beacon","xhr","image"].indexOf(Ot)===-1&&console.warn("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),Wt.transport=Ot)),se._gaCommand("send",Wt)}}),ae(this,"send",function(ye){se._gaCommand("send",ye)}),this.reset()}return ie(fe,[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}]),fe}();e.GA4=Ae;var Me=new Ae;e.default=Me})(cZ);(function(e){function t(y){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},t(y)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ReactGAImplementation=void 0;var i=n(cZ);function r(y){if(typeof WeakMap!="function")return null;var v=new WeakMap,_=new WeakMap;return(r=function($){return $?_:v})(y)}function n(y,v){if(y&&y.__esModule)return y;if(y===null||t(y)!=="object"&&typeof y!="function")return{default:y};var _=r(v);if(_&&_.has(y))return _.get(y);var I={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in y)if(A!=="default"&&Object.prototype.hasOwnProperty.call(y,A)){var k=$?Object.getOwnPropertyDescriptor(y,A):null;k&&(k.get||k.set)?Object.defineProperty(I,A,k):I[A]=y[A]}return I.default=y,_&&_.set(y,I),I}var o=i.GA4;e.ReactGAImplementation=o;var c=i.default;e.default=c})(uZ);const fl=KH(uZ);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const pZ="calcite-mode-auto",fZ="calcite-mode-dark",Yde="calcite-mode-light",yZ={autoMode:pZ,darkMode:fZ,lightMode:Yde,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"},Xde={filter:250,nextTick:0,resize:150,reposition:100},Qde="modulepreload",epe=function(e,t){return new URL(e,t).href},IF={},de=function(t,i,r){let n=Promise.resolve();if(i&&i.length>0){const c=document.getElementsByTagName("link"),y=document.querySelector("meta[property=csp-nonce]"),v=(y==null?void 0:y.nonce)||(y==null?void 0:y.getAttribute("nonce"));n=Promise.allSettled(i.map(_=>{if(_=epe(_,r),_ in IF)return;IF[_]=!0;const I=_.endsWith(".css"),$=I?'[rel="stylesheet"]':"";if(!!r)for(let R=c.length-1;R>=0;R--){const N=c[R];if(N.href===_&&(!I||N.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${_}"]${$}`))return;const k=document.createElement("link");if(k.rel=I?"stylesheet":Qde,I||(k.as="script"),k.crossOrigin="",k.href=_,v&&k.setAttribute("nonce",v),document.head.appendChild(k),I)return new Promise((R,N)=>{k.addEventListener("load",R),k.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${_}`)))})}))}function o(c){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=c,window.dispatchEvent(y),!y.defaultPrevented)throw c}return n.then(c=>{for(const y of c||[])y.status==="rejected"&&o(y.reason);return t().catch(o)})};var ma={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},tpe=Object.defineProperty,ipe=(e,t)=>{for(var i in t)tpe(e,i,{get:t[i],enumerable:!0})},mZ=new WeakMap,B0=e=>mZ.get(e),rpe=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return mZ.set(e,i)},TF=(e,t)=>t in e,t3=(e,t)=>(0,console.error)(e,t),Xx=new Map,npe=[],spe="slot-fb{display:contents}slot-fb[hidden]{display:none}",$F="http://www.w3.org/1999/xlink",i3=typeof window<"u"?window:{},bl=i3.document||{head:{}},Eg=i3.HTMLElement||class{},_n={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,r)=>e.addEventListener(t,i,r),rel:(e,t,i,r)=>e.removeEventListener(t,i,r),ce:(e,t)=>new CustomEvent(e,t)},ope=(()=>{let e=!1;try{bl.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),ape=e=>Promise.resolve(e),lpe=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),nM=!1,sM=[],gZ=[],vZ=(e,t)=>i=>{e.push(i),nM||(nM=!0,t&&_n.$flags$&4?upe(oM):_n.raf(oM))},EF=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(i){t3(i)}e.length=0},oM=()=>{EF(sM),EF(gZ),(nM=sM.length>0)&&_n.raf(oM)},upe=e=>ape().then(e),WHe=vZ(sM,!1),cpe=vZ(gZ,!0),PL=e=>{const t=new URL(e,_n.$resourcesUrl$);return t.origin!==i3.location.origin?t.href:t.pathname},wZ=e=>_n.$resourcesUrl$=e,MF={},hpe="http://www.w3.org/2000/svg",dpe="http://www.w3.org/1999/xhtml",ppe=e=>e!=null,NL=e=>(e=typeof e,e==="object"||e==="function");function fpe(e){var t,i,r;return(r=(i=(t=e.head)==null?void 0:t.querySelector('meta[name="csp-nonce"]'))==null?void 0:i.getAttribute("content"))!=null?r:void 0}var ype={};ipe(ype,{err:()=>bZ,map:()=>mpe,ok:()=>aM,unwrap:()=>gpe,unwrapErr:()=>vpe});var aM=e=>({isOk:!0,isErr:!1,value:e}),bZ=e=>({isOk:!1,isErr:!0,value:e});function mpe(e,t){if(e.isOk){const i=t(e.value);return i instanceof Promise?i.then(r=>aM(r)):aM(i)}if(e.isErr){const i=e.value;return bZ(i)}throw"should never get here"}var gpe=e=>{if(e.isOk)return e.value;throw e.value},vpe=e=>{if(e.isErr)return e.value;throw e.value},w0=(e,t="")=>()=>{},We=(e,t,...i)=>{let r=null,n=null,o=null,c=!1,y=!1;const v=[],_=$=>{for(let A=0;A<$.length;A++)r=$[A],Array.isArray(r)?_(r):r!=null&&typeof r!="boolean"&&((c=typeof e!="function"&&!NL(r))&&(r=String(r)),c&&y?v[v.length-1].$text$+=r:v.push(c?Qx(null,r):r),y=c)};if(_(i),t){t.key&&(n=t.key),t.name&&(o=t.name);{const $=t.className||t.class;$&&(t.class=typeof $!="object"?$:Object.keys($).filter(A=>$[A]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,v,bpe);const I=Qx(e,null);return I.$attrs$=t,v.length>0&&(I.$children$=v),I.$key$=n,I.$name$=o,I},Qx=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},Q4={},wpe=e=>e&&e.$tag$===Q4,bpe={forEach:(e,t)=>e.map(AF).forEach(t),map:(e,t)=>e.map(AF).map(t).map(_pe)},AF=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),_pe=e=>{if(typeof e.vtag=="function"){const i={...e.vattrs};return e.vkey&&(i.key=e.vkey),e.vname&&(i.name=e.vname),We(e.vtag,i,...e.vchildren||[])}const t=Qx(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},Spe=e=>npe.map(t=>t(e)).find(t=>!!t),xpe=(e,t)=>e!=null&&!NL(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,Ipe=e=>e,Wv=(e,t,i)=>{const r=Ipe(e);return{emit:n=>Tpe(r,t,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:n})}},Tpe=(e,t,i)=>{const r=_n.ce(t,i);return e.dispatchEvent(r),r},CF=new WeakMap,$pe=(e,t,i)=>{let r=Xx.get(e);lpe&&i?(r=r||new CSSStyleSheet,typeof r=="string"?r=t:r.replaceSync(t)):r=t,Xx.set(e,r)},Epe=(e,t,i)=>{var r;const n=_Z(t,i),o=Xx.get(n);if(e=e.nodeType===11?e:bl,o)if(typeof o=="string"){e=e.head||e;let c=CF.get(e),y;if(c||CF.set(e,c=new Set),!c.has(n)){{y=bl.createElement("style"),y.innerHTML=o;const v=(r=_n.$nonce$)!=null?r:fpe(bl);v!=null&&y.setAttribute("nonce",v),(!(t.$flags$&1)||t.$flags$&1&&e.nodeName!=="HEAD")&&e.insertBefore(y,e.querySelector("link"))}t.$flags$&4&&(y.innerHTML+=spe),c&&c.add(n)}}else e.adoptedStyleSheets.includes(o)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,o]);return n},Mpe=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,r=t.$flags$,n=w0("attachStyles",t.$tagName$),o=Epe(i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);r&10&&r&2&&(i["s-sc"]=o,i.classList.add(o+"-h"),r&2&&i.classList.add(o+"-s")),n()},_Z=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),kF=(e,t,i,r,n,o)=>{if(i!==r){let c=TF(e,t),y=t.toLowerCase();if(t==="class"){const v=e.classList,_=LF(i),I=LF(r);v.remove(..._.filter($=>$&&!I.includes($))),v.add(...I.filter($=>$&&!_.includes($)))}else if(t==="style"){for(const v in i)(!r||r[v]==null)&&(v.includes("-")?e.style.removeProperty(v):e.style[v]="");for(const v in r)(!i||r[v]!==i[v])&&(v.includes("-")?e.style.setProperty(v,r[v]):e.style[v]=r[v])}else if(t!=="key")if(t==="ref")r&&r(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n"){if(t[2]==="-"?t=t.slice(3):TF(i3,y)?t=y.slice(2):t=y[2]+t.slice(3),i||r){const v=t.endsWith(SZ);t=t.replace(Cpe,""),i&&_n.rel(e,t,i,v),r&&_n.ael(e,t,r,v)}}else{const v=NL(r);if((c||v&&r!==null)&&!n)try{if(e.tagName.includes("-"))e[t]=r;else{const I=r??"";t==="list"?c=!1:(i==null||e[t]!=I)&&(e[t]=I)}}catch{}let _=!1;y!==(y=y.replace(/^xlink\:?/,""))&&(t=y,_=!0),r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&(_?e.removeAttributeNS($F,t):e.removeAttribute(t)):(!c||o&4||n)&&!v&&(r=r===!0?"":r,_?e.setAttributeNS($F,t,r):e.setAttribute(t,r))}}},Ape=/\s/,LF=e=>e?e.split(Ape):[],SZ="Capture",Cpe=new RegExp(SZ+"$"),xZ=(e,t,i)=>{const r=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,n=e&&e.$attrs$||MF,o=t.$attrs$||MF;for(const c of OF(Object.keys(n)))c in o||kF(r,c,n[c],void 0,i,t.$flags$);for(const c of OF(Object.keys(o)))kF(r,c,n[c],o[c],i,t.$flags$)};function OF(e){return e.includes("ref")?[...e.filter(t=>t!=="ref"),"ref"]:e}var Py,lM,eg,e9=!1,t9=!1,FL=!1,ko=!1,i9=(e,t,i,r)=>{var n;const o=t.$children$[i];let c=0,y,v,_;if(e9||(FL=!0,o.$tag$==="slot"&&(Py&&r.classList.add(Py+"-s"),o.$flags$|=o.$children$?2:1)),o.$text$!==null)y=o.$elm$=bl.createTextNode(o.$text$);else if(o.$flags$&1)y=o.$elm$=bl.createTextNode("");else{if(ko||(ko=o.$tag$==="svg"),y=o.$elm$=bl.createElementNS(ko?hpe:dpe,!e9&&ma.slotRelocation&&o.$flags$&2?"slot-fb":o.$tag$),ko&&o.$tag$==="foreignObject"&&(ko=!1),xZ(null,o,ko),!!y.getRootNode().querySelector("body")&&ma.scoped&&ppe(Py)&&y["s-si"]!==Py&&y.classList.add(y["s-si"]=Py),jL(y,r),o.$children$)for(c=0;c<o.$children$.length;++c)v=i9(e,o,c,y),v&&y.appendChild(v);o.$tag$==="svg"?ko=!1:y.tagName==="foreignObject"&&(ko=!0)}return y["s-hn"]=eg,o.$flags$&3&&(y["s-sr"]=!0,y["s-cr"]=lM,y["s-sn"]=o.$name$||"",y["s-rf"]=(n=o.$attrs$)==null?void 0:n.ref,_=e&&e.$children$&&e.$children$[i],_&&_.$tag$===o.$tag$&&e.$elm$&&l2(e.$elm$,!1)),y},l2=(e,t)=>{_n.$flags$|=1;const i=Array.from(e.childNodes);if(e["s-sr"]&&ma.experimentalSlotFixes){let r=e;for(;r=r.nextSibling;)r&&r["s-sn"]===e["s-sn"]&&r["s-sh"]===eg&&i.push(r)}for(let r=i.length-1;r>=0;r--){const n=i[r];n["s-hn"]!==eg&&n["s-ol"]&&(Bd($Z(n),n,DL(n)),n["s-ol"].remove(),n["s-ol"]=void 0,n["s-sh"]=void 0,FL=!0),t&&l2(n,t)}_n.$flags$&=-2},IZ=(e,t,i,r,n,o)=>{let c=e["s-cr"]&&e["s-cr"].parentNode||e,y;for(c.shadowRoot&&c.tagName===eg&&(c=c.shadowRoot);n<=o;++n)r[n]&&(y=i9(null,i,n,e),y&&(r[n].$elm$=y,Bd(c,y,DL(t))))},TZ=(e,t,i)=>{for(let r=t;r<=i;++r){const n=e[r];if(n){const o=n.$elm$;AZ(n),o&&(t9=!0,o["s-ol"]?o["s-ol"].remove():l2(o,!0),o.remove())}}},kpe=(e,t,i,r,n=!1)=>{let o=0,c=0,y=0,v=0,_=t.length-1,I=t[0],$=t[_],A=r.length-1,k=r[0],R=r[A],N,D;for(;o<=_&&c<=A;)if(I==null)I=t[++o];else if($==null)$=t[--_];else if(k==null)k=r[++c];else if(R==null)R=r[--A];else if(d_(I,k,n))Ny(I,k,n),I=t[++o],k=r[++c];else if(d_($,R,n))Ny($,R,n),$=t[--_],R=r[--A];else if(d_(I,R,n))(I.$tag$==="slot"||R.$tag$==="slot")&&l2(I.$elm$.parentNode,!1),Ny(I,R,n),Bd(e,I.$elm$,$.$elm$.nextSibling),I=t[++o],R=r[--A];else if(d_($,k,n))(I.$tag$==="slot"||R.$tag$==="slot")&&l2($.$elm$.parentNode,!1),Ny($,k,n),Bd(e,$.$elm$,I.$elm$),$=t[--_],k=r[++c];else{for(y=-1,v=o;v<=_;++v)if(t[v]&&t[v].$key$!==null&&t[v].$key$===k.$key$){y=v;break}y>=0?(D=t[y],D.$tag$!==k.$tag$?N=i9(t&&t[c],i,y,e):(Ny(D,k,n),t[y]=void 0,N=D.$elm$),k=r[++c]):(N=i9(t&&t[c],i,c,e),k=r[++c]),N&&Bd($Z(I.$elm$),N,DL(I.$elm$))}o>_?IZ(e,r[A+1]==null?null:r[A+1].$elm$,i,r,c,A):c>A&&TZ(t,o,_)},d_=(e,t,i=!1)=>e.$tag$===t.$tag$?e.$tag$==="slot"?"$nodeId$"in e&&i&&e.$elm$.nodeType!==8?!1:e.$name$===t.$name$:i?!0:e.$key$===t.$key$:!1,DL=e=>e&&e["s-ol"]||e,$Z=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,Ny=(e,t,i=!1)=>{const r=t.$elm$=e.$elm$,n=e.$children$,o=t.$children$,c=t.$tag$,y=t.$text$;let v;y===null?(ko=c==="svg"?!0:c==="foreignObject"?!1:ko,c==="slot"&&!e9||xZ(e,t,ko),n!==null&&o!==null?kpe(r,n,t,o,i):o!==null?(e.$text$!==null&&(r.textContent=""),IZ(r,null,t,o,0,o.length-1)):!i&&ma.updatable&&n!==null&&TZ(n,0,n.length-1),ko&&c==="svg"&&(ko=!1)):(v=r["s-cr"])?v.parentNode.textContent=y:e.$text$!==y&&(r.data=y)},EZ=e=>{const t=e.childNodes;for(const i of t)if(i.nodeType===1){if(i["s-sr"]){const r=i["s-sn"];i.hidden=!1;for(const n of t)if(n!==i){if(n["s-hn"]!==i["s-hn"]||r!==""){if(n.nodeType===1&&(r===n.getAttribute("slot")||r===n["s-sn"])||n.nodeType===3&&r===n["s-sn"]){i.hidden=!0;break}}else if(n.nodeType===1||n.nodeType===3&&n.textContent.trim()!==""){i.hidden=!0;break}}}EZ(i)}},Oc=[],MZ=e=>{let t,i,r;for(const n of e.childNodes){if(n["s-sr"]&&(t=n["s-cr"])&&t.parentNode){i=t.parentNode.childNodes;const o=n["s-sn"];for(r=i.length-1;r>=0;r--)if(t=i[r],!t["s-cn"]&&!t["s-nr"]&&t["s-hn"]!==n["s-hn"]&&!ma.experimentalSlotFixes)if(RF(t,o)){let c=Oc.find(y=>y.$nodeToRelocate$===t);t9=!0,t["s-sn"]=t["s-sn"]||o,c?(c.$nodeToRelocate$["s-sh"]=n["s-hn"],c.$slotRefNode$=n):(t["s-sh"]=n["s-hn"],Oc.push({$slotRefNode$:n,$nodeToRelocate$:t})),t["s-sr"]&&Oc.map(y=>{RF(y.$nodeToRelocate$,t["s-sn"])&&(c=Oc.find(v=>v.$nodeToRelocate$===t),c&&!y.$slotRefNode$&&(y.$slotRefNode$=c.$slotRefNode$))})}else Oc.some(c=>c.$nodeToRelocate$===t)||Oc.push({$nodeToRelocate$:t})}n.nodeType===1&&MZ(n)}},RF=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",AZ=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(AZ)},Bd=(e,t,i)=>{const r=e==null?void 0:e.insertBefore(t,i);return jL(t,e),r},CZ=e=>{const t=[];return e&&t.push(...e["s-scs"]||[],e["s-si"],e["s-sc"],...CZ(e.parentElement)),t},jL=(e,t,i=!1)=>{var r;if(e&&t&&e.nodeType===1){const n=new Set(CZ(t).filter(Boolean));if(n.size&&((r=e.classList)==null||r.add(...e["s-scs"]=[...n]),e["s-ol"]||i))for(const o of Array.from(e.childNodes))jL(o,e,!0)}},Lpe=(e,t,i=!1)=>{var r,n,o,c,y;const v=e.$hostElement$,_=e.$cmpMeta$,I=e.$vnode$||Qx(null,null),$=wpe(t)?t:We(null,null,t);if(eg=v.tagName,_.$attrsToReflect$&&($.$attrs$=$.$attrs$||{},_.$attrsToReflect$.map(([A,k])=>$.$attrs$[k]=v[A])),i&&$.$attrs$)for(const A of Object.keys($.$attrs$))v.hasAttribute(A)&&!["key","ref","style","class"].includes(A)&&($.$attrs$[A]=v[A]);$.$tag$=null,$.$flags$|=4,e.$vnode$=$,$.$elm$=I.$elm$=v.shadowRoot||v,Py=v["s-sc"],e9=(_.$flags$&1)!==0,lM=v["s-cr"],t9=!1,Ny(I,$,i);{if(_n.$flags$|=1,FL){MZ($.$elm$);for(const A of Oc){const k=A.$nodeToRelocate$;if(!k["s-ol"]){const R=bl.createTextNode("");R["s-nr"]=k,Bd(k.parentNode,k["s-ol"]=R,k)}}for(const A of Oc){const k=A.$nodeToRelocate$,R=A.$slotRefNode$;if(R){const N=R.parentNode;let D=R.nextSibling;{let j=(r=k["s-ol"])==null?void 0:r.previousSibling;for(;j;){let z=(n=j["s-nr"])!=null?n:null;if(z&&z["s-sn"]===k["s-sn"]&&N===z.parentNode){for(z=z.nextSibling;z===k||z!=null&&z["s-sr"];)z=z==null?void 0:z.nextSibling;if(!z||!z["s-nr"]){D=z;break}}j=j.previousSibling}}(!D&&N!==k.parentNode||k.nextSibling!==D)&&k!==D&&(!k["s-hn"]&&k["s-ol"]&&(k["s-hn"]=k["s-ol"].parentNode.nodeName),Bd(N,k,D),k.nodeType===1&&(k.hidden=(o=k["s-ih"])!=null?o:!1)),k&&typeof R["s-rf"]=="function"&&R["s-rf"](k)}else k.nodeType===1&&(i&&(k["s-ih"]=(c=k.hidden)!=null?c:!1),k.hidden=!0)}}t9&&EZ($.$elm$),_n.$flags$&=-2,Oc.length=0}if(ma.experimentalScopedSlotChanges&&_.$flags$&2)for(const A of $.$elm$.childNodes)A["s-hn"]!==eg&&!A["s-sh"]&&(i&&A["s-ih"]==null&&(A["s-ih"]=(y=A.hidden)!=null?y:!1),A.hidden=!0);lM=void 0},Ope=(e,t)=>{},zL=(e,t)=>(e.$flags$|=16,Ope(e,e.$ancestorComponent$),cpe(()=>Rpe(e,t))),Rpe=(e,t)=>{const i=e.$hostElement$,r=w0("scheduleUpdate",e.$cmpMeta$.$tagName$),n=i;if(!n)throw new Error(`Can't render component <${i.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let o;return t?o=I1(n,"componentWillLoad"):o=I1(n,"componentWillUpdate"),o=PF(o,()=>I1(n,"componentWillRender")),r(),PF(o,()=>Npe(e,n,t))},PF=(e,t)=>Ppe(e)?e.then(t).catch(i=>{console.error(i),t()}):t(),Ppe=e=>e instanceof Promise||e&&e.then&&typeof e.then=="function",Npe=async(e,t,i)=>{const r=e.$hostElement$,n=w0("update",e.$cmpMeta$.$tagName$);r["s-rc"],i&&Mpe(e);const o=w0("render",e.$cmpMeta$.$tagName$);Fpe(e,t,r,i),o(),n(),Dpe(e)},NF=null,Fpe=(e,t,i,r)=>{try{NF=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(ma.hasRenderFn||ma.reflect)&&(ma.vdomRender||ma.reflect)&&(ma.hydrateServerSide||Lpe(e,t,r))}catch(v){t3(v,e.$hostElement$)}return NF=null,null},Dpe=e=>{const t=e.$cmpMeta$.$tagName$,i=e.$hostElement$,r=w0("postUpdate",t),n=i;e.$ancestorComponent$,I1(n,"componentDidRender"),e.$flags$&64?(I1(n,"componentDidUpdate"),r()):(e.$flags$|=64,I1(n,"componentDidLoad"),r())},VL=e=>{{const t=B0(e),i=t.$hostElement$.isConnected;return i&&(t.$flags$&18)===2&&zL(t,!1),i}},I1=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(r){t3(r)}},jpe=(e,t)=>B0(e).$instanceValues$.get(t),zpe=(e,t,i,r)=>{const n=B0(e),o=e,c=n.$instanceValues$.get(t),y=n.$flags$,v=o;i=xpe(i,r.$members$[t][0]);const _=Number.isNaN(c)&&Number.isNaN(i);if(i!==c&&!_){n.$instanceValues$.set(t,i);{if(r.$watchers$&&y&128){const $=r.$watchers$[t];$&&$.map(A=>{try{v[A](i,c,t)}catch(k){t3(k,o)}})}if((y&18)===2){if(v.componentShouldUpdate&&v.componentShouldUpdate(i,c,t)===!1)return;zL(n,!1)}}}},Vpe=(e,t,i)=>{var r,n;const o=e.prototype;if(t.$members$||t.$watchers$||e.watchers){e.watchers&&!t.$watchers$&&(t.$watchers$=e.watchers);const c=Object.entries((r=t.$members$)!=null?r:{});c.map(([y,[v]])=>{(v&31||v&32)&&Object.defineProperty(o,y,{get(){return jpe(this,y)},set(_){zpe(this,y,_,t)},configurable:!0,enumerable:!0})});{const y=new Map;o.attributeChangedCallback=function(v,_,I){_n.jmp(()=>{var $;const A=y.get(v);if(this.hasOwnProperty(A))I=this[A],delete this[A];else{if(o.hasOwnProperty(A)&&typeof this[A]=="number"&&this[A]==I)return;if(A==null){const k=B0(this),R=k==null?void 0:k.$flags$;if(R&&!(R&8)&&R&128&&I!==_){const D=this,j=($=t.$watchers$)==null?void 0:$[v];j==null||j.forEach(z=>{D[z]!=null&&D[z].call(D,I,_,v)})}return}}this[A]=I===null&&typeof this[A]=="boolean"?!1:I})},e.observedAttributes=Array.from(new Set([...Object.keys((n=t.$watchers$)!=null?n:{}),...c.filter(([v,_])=>_[0]&15).map(([v,_])=>{var I;const $=_[1]||v;return y.set($,v),_[0]&512&&((I=t.$attrsToReflect$)==null||I.push([v,$])),$})]))}}return e},Upe=async(e,t,i,r)=>{let n;if(!(t.$flags$&32)){t.$flags$|=32,i.$lazyBundleId$;{n=e.constructor;const c=e.localName;customElements.whenDefined(c).then(()=>t.$flags$|=128)}if(n&&n.style){let c;typeof n.style=="string"?c=n.style:typeof n.style!="string"&&(t.$modeName$=Spe(e),t.$modeName$&&(c=n.style[t.$modeName$]));const y=_Z(i,t.$modeName$);if(!Xx.has(y)){const v=w0("registerStyles",i.$tagName$);$pe(y,c,!!(i.$flags$&1)),v()}}}t.$ancestorComponent$,zL(t,!0)},FF=e=>{},Bpe=e=>{if(!(_n.$flags$&1)){const t=B0(e),i=t.$cmpMeta$,r=w0("connectedCallback",i.$tagName$);t.$flags$&1?(kZ(e,t,i.$listeners$),t!=null&&t.$lazyInstance$?FF(t.$lazyInstance$):t!=null&&t.$onReadyPromise$&&t.$onReadyPromise$.then(()=>FF(t.$lazyInstance$))):(t.$flags$|=1,i.$flags$&12&&Gpe(e),i.$members$&&Object.entries(i.$members$).map(([n,[o]])=>{if(o&31&&e.hasOwnProperty(n)){const c=e[n];delete e[n],e[n]=c}}),Upe(e,t,i)),r()}},Gpe=e=>{const t=e["s-cr"]=bl.createComment("");t["s-cn"]=!0,Bd(e,t,e.firstChild)},qpe=async e=>{if(!(_n.$flags$&1)){const t=B0(e);t.$rmListeners$&&(t.$rmListeners$.map(i=>i()),t.$rmListeners$=void 0)}},Mg=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};i.$members$=t[2],i.$listeners$=t[3],i.$watchers$=e.$watchers$,i.$attrsToReflect$=[];const r=e.prototype.connectedCallback,n=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){rpe(this,i)},connectedCallback(){const o=B0(this);kZ(this,o,i.$listeners$),Bpe(this),r&&r.call(this)},disconnectedCallback(){qpe(this),n&&n.call(this)},__attachShadow(){if(!this.shadowRoot)this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)});else if(this.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${i.$tagName$}! Mode is set to ${this.shadowRoot.mode} but Stencil only supports open shadow roots.`)}}),e.is=i.$tagName$,Vpe(e,i)},Hpe=(e,t)=>t,kZ=(e,t,i,r)=>{i&&i.map(([n,o,c])=>{const y=Jpe(e,n),v=Wpe(t,c),_=Zpe(n);_n.ael(y,o,v,_),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>_n.rel(y,o,v,_))})},Wpe=(e,t)=>i=>{var r;try{ma.lazyLoad||e.$hostElement$[t](i)}catch(n){t3(n)}},Jpe=(e,t)=>t&4?bl:t&8?i3:t&16?bl.body:e,Zpe=e=>ope?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Bc=globalThis.calciteConfig,JHe=(Bc==null?void 0:Bc.focusTrapStack)||[];Bc!=null&&Bc.logLevel;const DF="2.13.2",Kpe="2024-10-24",Ype="e38e2977d";function Xpe(){if(Bc&&Bc.version)return;console.info(`Using Calcite Components ${DF} [Date: ${Kpe}, Revision: ${Ype}]`);const e=Bc||globalThis.calciteConfig||{};Object.defineProperty(e,"version",{value:DF,writable:!1}),globalThis.calciteConfig=e}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const r3=()=>typeof navigator<"u"&&typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function jF(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>e.contains(fZ)||e.contains(pZ)&&t?"dark":"light",r=c=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:c}})),n=c=>{o!==c&&r(c),o=c};let o=i();r(o),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",c=>n(c.matches?"dark":"light")),new MutationObserver(()=>n(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function Qpe(){r3()&&(document.readyState==="interactive"?jF():document.addEventListener("DOMContentLoaded",()=>jF(),{once:!0})),Xpe()}const efe=Qpe;efe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function eI(e,t,i){if(!r3())return;const r=tfe(e);return new r(t,i)}function tfe(e){class t extends window.MutationObserver{constructor(r){super(r),this.observedEntry=[],this.callback=r}observe(r,n){return this.observedEntry.push({target:r,options:n}),super.observe(r,n)}unobserve(r){const n=this.observedEntry.filter(o=>o.target!==r);this.observedEntry=[],this.callback(super.takeRecords(),this),this.disconnect(),n.forEach(o=>this.observe(o.target,o.options))}}return function(){return e==="intersection"?window.IntersectionObserver:e==="mutation"?t:window.ResizeObserver}()}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */let VS;const ife={childList:!0};function rfe(e){VS||(VS=eI("mutation",sfe)),VS.observe(e.el,ife)}function nfe(e){VS.unobserve(e.el)}function sfe(e){e.forEach(({target:t})=>{VL(t)})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function ofe(e){return e.map(t=>{let i="";for(let r=0;r<t;r++)i+=((1+Math.random())*65536|0).toString(16).substring(1);return i}).join("-")}const afe=()=>ofe([2,1,1,1,3]);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 *//*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var LZ=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],r9=LZ.join(","),OZ=typeof Element>"u",b0=OZ?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,n9=!OZ&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},s9=function e(t,i){var r;i===void 0&&(i=!0);var n=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),o=n===""||n==="true",c=o||i&&t&&e(t.parentNode);return c},lfe=function(t){var i,r=t==null||(i=t.getAttribute)===null||i===void 0?void 0:i.call(t,"contenteditable");return r===""||r==="true"},RZ=function(t,i,r){if(s9(t))return[];var n=Array.prototype.slice.apply(t.querySelectorAll(r9));return i&&b0.call(t,r9)&&n.unshift(t),n=n.filter(r),n},PZ=function e(t,i,r){for(var n=[],o=Array.from(t);o.length;){var c=o.shift();if(!s9(c,!1))if(c.tagName==="SLOT"){var y=c.assignedElements(),v=y.length?y:c.children,_=e(v,!0,r);r.flatten?n.push.apply(n,_):n.push({scopeParent:c,candidates:_})}else{var I=b0.call(c,r9);I&&r.filter(c)&&(i||!t.includes(c))&&n.push(c);var $=c.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(c),A=!s9($,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(c));if($&&A){var k=e($===!0?c.children:$.children,!0,r);r.flatten?n.push.apply(n,k):n.push({scopeParent:c,candidates:k})}else o.unshift.apply(o,c.children)}}return n},NZ=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},FZ=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||lfe(t))&&!NZ(t)?0:t.tabIndex},ufe=function(t,i){var r=FZ(t);return r<0&&i&&!NZ(t)?0:r},cfe=function(t,i){return t.tabIndex===i.tabIndex?t.documentOrder-i.documentOrder:t.tabIndex-i.tabIndex},DZ=function(t){return t.tagName==="INPUT"},hfe=function(t){return DZ(t)&&t.type==="hidden"},dfe=function(t){var i=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return i},pfe=function(t,i){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===i)return t[r]},ffe=function(t){if(!t.name)return!0;var i=t.form||n9(t),r=function(y){return i.querySelectorAll('input[type="radio"][name="'+y+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=r(window.CSS.escape(t.name));else try{n=r(t.name)}catch(c){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",c.message),!1}var o=pfe(n,t.form);return!o||o===t},yfe=function(t){return DZ(t)&&t.type==="radio"},mfe=function(t){return yfe(t)&&!ffe(t)},gfe=function(t){var i,r=t&&n9(t),n=(i=r)===null||i===void 0?void 0:i.host,o=!1;if(r&&r!==t){var c,y,v;for(o=!!((c=n)!==null&&c!==void 0&&(y=c.ownerDocument)!==null&&y!==void 0&&y.contains(n)||t!=null&&(v=t.ownerDocument)!==null&&v!==void 0&&v.contains(t));!o&&n;){var _,I,$;r=n9(n),n=(_=r)===null||_===void 0?void 0:_.host,o=!!((I=n)!==null&&I!==void 0&&($=I.ownerDocument)!==null&&$!==void 0&&$.contains(n))}}return o},zF=function(t){var i=t.getBoundingClientRect(),r=i.width,n=i.height;return r===0&&n===0},vfe=function(t,i){var r=i.displayCheck,n=i.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var o=b0.call(t,"details>summary:first-of-type"),c=o?t.parentElement:t;if(b0.call(c,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof n=="function"){for(var y=t;t;){var v=t.parentElement,_=n9(t);if(v&&!v.shadowRoot&&n(v)===!0)return zF(t);t.assignedSlot?t=t.assignedSlot:!v&&_!==t.ownerDocument?t=_.host:t=v}t=y}if(gfe(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return zF(t);return!1},wfe=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var i=t.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var n=i.children.item(r);if(n.tagName==="LEGEND")return b0.call(i,"fieldset[disabled] *")?!0:!n.contains(t)}return!0}i=i.parentElement}return!1},o9=function(t,i){return!(i.disabled||s9(i)||hfe(i)||vfe(i,t)||dfe(i)||wfe(i))},uM=function(t,i){return!(mfe(i)||FZ(i)<0||!o9(t,i))},bfe=function(t){var i=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},_fe=function e(t){var i=[],r=[];return t.forEach(function(n,o){var c=!!n.scopeParent,y=c?n.scopeParent:n,v=ufe(y,c),_=c?e(n.candidates):y;v===0?c?i.push.apply(i,_):i.push(y):r.push({documentOrder:o,tabIndex:v,item:n,isScope:c,content:_})}),r.sort(cfe).reduce(function(n,o){return o.isScope?n.push.apply(n,o.content):n.push(o.content),n},[]).concat(i)},Sfe=function(t,i){i=i||{};var r;return i.getShadowRoot?r=PZ([t],i.includeContainer,{filter:uM.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:bfe}):r=RZ(t,i.includeContainer,uM.bind(null,i)),_fe(r)},ZHe=function(t,i){i=i||{};var r;return i.getShadowRoot?r=PZ([t],i.includeContainer,{filter:o9.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=RZ(t,i.includeContainer,o9.bind(null,i)),r},KHe=function(t,i){if(i=i||{},!t)throw new Error("No node provided");return b0.call(t,r9)===!1?!1:uM(i,t)},xfe=LZ.concat("iframe").join(","),YHe=function(t,i){if(i=i||{},!t)throw new Error("No node provided");return b0.call(t,xfe)===!1?!1:o9(i,t)};const Ife={getShadowRoot:!0};function XHe(e){return e?e.id=e.id||`${e.tagName.toLowerCase()}-${afe()}`:""}function UL(e){const t="dir",i=`[${t}]`,r=hp(e,i);return r?r.getAttribute(t):"ltr"}function BL(e){return e.getRootNode()}function QHe(e){const t=BL(e);return"host"in t?t:null}function jZ(e){return e.host||null}function GL(e,{selector:t,id:i}){if(!e)return null;e.assignedSlot&&(e=e.assignedSlot);const r=BL(e);return(i?"getElementById"in r?r.getElementById(i):null:t?r.querySelector(t):null)||GL(jZ(r),{selector:t,id:i})}function hp(e,t){return e?e.closest(t)||hp(jZ(BL(e)),t):null}function Tfe(e,t){return zZ(e,t)}function zZ(e,t){if(!e)return;const i=t(e);if(i!==void 0)return i;const{parentNode:r}=e;return zZ(r instanceof ShadowRoot?r.host:r,t)}function $fe(e,t){return!!Tfe(t,i=>i===e?!0:void 0)}function Efe(e){return typeof(e==null?void 0:e.setFocus)=="function"}async function Mfe(e){if(e)return Efe(e)?e.setFocus():e.focus()}function Afe(e){if(e)return Sfe(e,Ife)[0]??e}function eWe(e){var t;(t=Afe(e))==null||t.focus()}const u2=":not([slot])";function Cfe(e,t,i){t&&!Array.isArray(t)&&typeof t!="string"&&(i=t,t=null);const r=t?Array.isArray(t)?t.map(n=>`[slot="${n}"]`).join(","):`[slot="${t}"]`:u2;return i!=null&&i.all?kfe(e,r,i):Lfe(e,r,i)}function VZ(e,t){return e?Array.from(e.children||[]).filter(i=>i==null?void 0:i.matches(t)):[]}function kfe(e,t,i){let r=t===u2?VZ(e,u2):Array.from(e.querySelectorAll(t));r=i&&i.direct===!1?r:r.filter(o=>o.parentElement===e),r=i!=null&&i.matches?r.filter(o=>o==null?void 0:o.matches(i.matches)):r;const n=i==null?void 0:i.selector;return n?r.map(o=>Array.from(o.querySelectorAll(n))).reduce((o,c)=>[...o,...c],[]).filter(o=>!!o):r}function Lfe(e,t,i){let r=t===u2?VZ(e,u2)[0]||null:e.querySelector(t);r=i&&i.direct===!1||(r==null?void 0:r.parentElement)===e?r:null,r=i!=null&&i.matches?r!=null&&r.matches(i.matches)?r:null:r;const n=i==null?void 0:i.selector;return n?r==null?void 0:r.querySelector(n):r}function Ofe(e,t){return e.filter(i=>i.matches(t))}function a9(e,t,i){if(typeof t=="string"&&t!=="")return t;if(t==="")return e[i]}function cM(e){return(!!e).toString()}function tWe(e){return Ku(e)||Pfe(e)}function Rfe(e){return Nfe(e).filter(t=>t.nodeType===Node.TEXT_NODE).map(t=>t.textContent).join("").trim()}function Pfe(e){return!!Rfe(e)}function Nfe(e){return e.currentTarget.assignedNodes({flatten:!0})}function Ku(e){return!!Jv(e).length}function Jv(e,t){return Ffe(e.target,t)}function Ffe(e,t){const i=e.assignedElements({flatten:!0});return t?Ofe(i,t):i}function Dfe(e){return!!(e.isPrimary&&e.button===0)}function iWe(e){return e.detail===0}const rWe=(e,t,i,r=!0)=>{const n=e.indexOf(t),o=n===0,c=n===e.length-1;r&&(i=i==="previous"&&o?"last":i==="next"&&c?"first":i);let y;return i==="previous"?y=e[n-1]||e[r?e.length-1:n]:i==="next"?y=e[n+1]||e[r?0:n]:i==="last"?y=e[e.length-1]:y=e[0],Mfe(y),y};function jfe(e,t){if(e.parentNode!==t.parentNode)return!1;const i=Array.from(e.parentNode.children);return i.indexOf(e)<i.indexOf(t)}async function nWe(e,t,i,r){return zfe(e,t,"transition",i,r)}async function zfe(e,t,i,r,n){const o=window.getComputedStyle(e),c=o.transitionDuration,y=o.transitionProperty,v=c.split(","),I=y.split(",").map(D=>D.trim()).indexOf(t),$=v[I]??v[0];function A(){requestAnimationFrame(()=>{r==null||r(),requestAnimationFrame(()=>n==null?void 0:n())})}if($==="0s"){A();return}const k="transitionstart",R="transitionend",N="transitioncancel";return new Promise(D=>{const j=window.setTimeout(()=>{e.removeEventListener(k,z),e.removeEventListener(R,U),e.removeEventListener(N,U),A(),D()},parseFloat($)*1e3);e.addEventListener(k,z),e.addEventListener(R,U),e.addEventListener(N,U);function z(W){W.target===e&&VF(W)===t&&(window.clearTimeout(j),e.removeEventListener(k,z),r==null||r())}function U(W){W.target===e&&VF(W)===t&&(e.removeEventListener(R,U),e.removeEventListener(N,U),n==null||n(),D())}})}function Vfe(e){return"propertyName"in e}function VF(e){return Vfe(e)?e.propertyName:e.animationName}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Rl={main:"main",content:"content",contentBehind:"content--behind",contentBottom:"content-bottom",contentNonInteractive:"content--non-interactive",footer:"footer",positionedSlotWrapper:"positioned-slot-wrapper",container:"container",contentBehindCenterContent:"center-content"},ka={centerRow:"center-row",panelStart:"panel-start",panelEnd:"panel-end",panelTop:"panel-top",panelBottom:"panel-bottom",header:"header",footer:"footer",alerts:"alerts",sheets:"sheets",modals:"modals",dialogs:"dialogs"},Ufe=":host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{position:absolute;inset:0px;display:flex;block-size:100%;inline-size:100%;flex-direction:column;overflow:hidden;--calcite-shell-tip-spacing:26vw}.main{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;flex-direction:row;justify-content:space-between;overflow:hidden}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;overflow:auto;justify-content:space-between}.content ::slotted(calcite-shell-center-row),.content ::slotted(calcite-panel),.content ::slotted(calcite-flow){flex:1 1 auto;align-self:stretch;max-block-size:unset}.content--behind{position:absolute;inset:0px;border-width:0px;z-index:calc(var(--calcite-z-index) - 1);display:initial}.content--non-interactive{pointer-events:none;display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap}::slotted(calcite-shell-center-row){inline-size:unset}::slotted(.header .heading){font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-normal)}slot[name=panel-start]::slotted(calcite-shell-panel),slot[name=panel-end]::slotted(calcite-shell-panel){position:relative;z-index:calc(var(--calcite-z-index) + 1)}slot[name=panel-end]::slotted(calcite-shell-panel){margin-inline-start:auto}::slotted(calcite-panel),::slotted(calcite-flow){border-width:1px;border-inline-start-width:0px;border-inline-end-width:0px;border-style:solid;border-color:var(--calcite-color-border-3)}slot[name=center-row]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-top]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-bottom]::slotted(calcite-shell-center-row:not([detached])){border-inline-start-width:1px;border-inline-end-width:1px;border-color:var(--calcite-color-border-3)}.center-content{display:flex;flex-direction:column;justify-content:space-between;block-size:100%;inline-size:100%;min-inline-size:0}.content-bottom{justify-content:flex-end}::slotted(calcite-shell-center-row){flex:none;align-self:stretch}::slotted(calcite-tip-manager){position:absolute;z-index:var(--calcite-z-index-toast);box-sizing:border-box}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}::slotted(calcite-tip-manager){animation:in-up var(--calcite-internal-animation-timing-slow) ease-in-out;border-radius:0.25rem;--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);inset-block-end:0.5rem;inset-inline:var(--calcite-shell-tip-spacing)}slot[name=center-row]::slotted(calcite-shell-center-row),slot[name=panel-bottom]::slotted(calcite-shell-center-row){margin-block-start:auto}slot[name=panel-top]::slotted(calcite-shell-center-row){margin-block-end:auto}.position-wrapper{position:absolute;pointer-events:none;inset:0}:host([hidden]){display:none}[hidden]{display:none}",Bfe=Ufe,Gfe=Mg(class extends Eg{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.handleHeaderSlotChange=t=>{this.hasHeader=!!Ku(t)},this.handleFooterSlotChange=t=>{this.hasFooter=!!Ku(t)},this.handleAlertsSlotChange=t=>{var i;this.hasAlerts=!!Ku(t),(i=Jv(t))==null||i.map(r=>{r.tagName==="CALCITE-ALERT"&&(r.embedded=!0)})},this.handleSheetsSlotChange=t=>{var i;this.hasSheets=!!Ku(t),(i=Jv(t))==null||i.map(r=>{r.tagName==="CALCITE-SHEET"&&(r.embedded=!0)})},this.handleModalsSlotChange=t=>{var i;this.hasModals=!!Ku(t),(i=Jv(t))==null||i.map(r=>{r.tagName==="CALCITE-MODAL"&&(r.embedded=!0)})},this.handlePanelTopChange=t=>{this.hasPanelTop=Ku(t)},this.handlePanelBottomChange=t=>{this.hasPanelBottom=Ku(t)},this.handleDialogsSlotChange=t=>{var i;this.hasDialogs=!!Ku(t),(i=Jv(t))==null||i.map(r=>{r.tagName==="CALCITE-DIALOG"&&(r.embedded=!0)})},this.contentBehind=!1,this.hasHeader=!1,this.hasFooter=!1,this.hasAlerts=!1,this.hasModals=!1,this.hasDialogs=!1,this.hasSheets=!1,this.hasPanelTop=!1,this.hasPanelBottom=!1,this.hasOnlyPanelBottom=!1,this.panelIsResizing=!1}handleCalciteInternalShellPanelResizeStart(t){this.panelIsResizing=!0,t.stopPropagation()}handleCalciteInternalShellPanelResizeEnd(t){this.panelIsResizing=!1,t.stopPropagation()}updateHasOnlyPanelBottom(){this.hasOnlyPanelBottom=!this.hasPanelTop&&this.hasPanelBottom}connectedCallback(){rfe(this)}disconnectedCallback(){nfe(this)}renderHeader(){return We("div",{hidden:!this.hasHeader},We("slot",{key:"header",name:ka.header,onSlotchange:this.handleHeaderSlotChange}))}renderFooter(){return We("div",{class:Rl.footer,hidden:!this.hasFooter,key:"footer"},We("slot",{name:ka.footer,onSlotchange:this.handleFooterSlotChange}))}renderAlerts(){return We("div",{hidden:!this.hasAlerts},We("slot",{key:"alerts",name:ka.alerts,onSlotchange:this.handleAlertsSlotChange}))}renderSheets(){return We("div",{hidden:!this.hasSheets},We("slot",{key:"sheets",name:ka.sheets,onSlotchange:this.handleSheetsSlotChange}))}renderModals(){return We("div",{hidden:!this.hasModals},We("slot",{key:"modals",name:ka.modals,onSlotchange:this.handleModalsSlotChange}))}renderDialogs(){return We("div",{hidden:!this.hasDialogs},We("slot",{key:"dialogs",name:ka.dialogs,onSlotchange:this.handleDialogsSlotChange}))}renderContent(){const{panelIsResizing:t}=this,i=We("slot",{key:"default-slot"}),r=t?We("div",{class:Rl.contentNonInteractive},i):i,n=We("slot",{key:"center-row-slot",name:ka.centerRow}),o=We("slot",{key:"panel-bottom-slot",name:ka.panelBottom,onSlotchange:this.handlePanelBottomChange}),c=We("slot",{key:"panel-top-slot",name:ka.panelTop,onSlotchange:this.handlePanelTopChange}),y="content-container";return this.contentBehind?[We("div",{class:{[Rl.content]:!0,[Rl.contentBehind]:!0},key:y},r),We("div",{class:{[Rl.contentBehindCenterContent]:!0,[Rl.contentBottom]:this.hasOnlyPanelBottom}},c,o,n)]:[We("div",{class:{[Rl.content]:!0,[Rl.contentBottom]:this.hasOnlyPanelBottom},key:y},c,r,o,n)]}renderMain(){return We("div",{class:Rl.main},We("slot",{name:ka.panelStart}),this.renderContent(),We("slot",{name:ka.panelEnd}))}renderPositionedSlots(){return We("div",{class:Rl.positionedSlotWrapper},this.renderAlerts(),this.renderModals(),this.renderDialogs(),this.renderSheets())}render(){return We(Hpe,{key:"6864b8b95b6edd871ad622b0d49a3f4a42a0a8a8"},this.renderHeader(),this.renderMain(),this.renderFooter(),this.renderPositionedSlots())}get el(){return this}static get watchers(){return{hasPanelTop:["updateHasOnlyPanelBottom"],hasPanelBottom:["updateHasOnlyPanelBottom"]}}static get style(){return Bfe}},[1,"calcite-shell",{contentBehind:[516,"content-behind"],hasHeader:[32],hasFooter:[32],hasAlerts:[32],hasModals:[32],hasDialogs:[32],hasSheets:[32],hasPanelTop:[32],hasPanelBottom:[32],hasOnlyPanelBottom:[32],panelIsResizing:[32]},[[0,"calciteInternalShellPanelResizeStart","handleCalciteInternalShellPanelResizeStart"],[0,"calciteInternalShellPanelResizeEnd","handleCalciteInternalShellPanelResizeEnd"]],{hasPanelTop:["updateHasOnlyPanelBottom"],hasPanelBottom:["updateHasOnlyPanelBottom"]}]);function qfe(){if(typeof customElements>"u")return;["calcite-shell"].forEach(t=>{switch(t){case"calcite-shell":customElements.get(t)||customElements.define(t,Gfe);break}})}qfe();const Hfe=e=>e.toLowerCase().split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(""),UZ=e=>e.replace(/([A-Z])/g,t=>`-${t[0].toLowerCase()}`),Wfe=(e,t,i={})=>{if(e instanceof Element){const r=Jfe(e.classList,t,i);r!==""&&(e.className=r),Object.keys(t).forEach(n=>{if(!(n==="children"||n==="style"||n==="ref"||n==="class"||n==="className"||n==="forwardedRef"))if(n.indexOf("on")===0&&n[2]===n[2].toUpperCase()){const o=n.substring(2),c=o[0].toLowerCase()+o.substring(1);BZ(c)||Kfe(e,c,t[n])}else e[n]=t[n],typeof t[n]==="string"&&e.setAttribute(UZ(n),t[n])})}},Jfe=(e,t,i)=>{const r=t.className||t.class,n=i.className||i.class,o=n$(e),c=n$(r?r.split(" "):[]),y=n$(n?n.split(" "):[]),v=[];return o.forEach(_=>{c.has(_)?(v.push(_),c.delete(_)):y.has(_)||v.push(_)}),c.forEach(_=>v.push(_)),v.join(" ")},Zfe=e=>{switch(e){case"doubleclick":return"dblclick"}return e};/**
 * Checks if an event is supported in the current execution environment.
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */const BZ=e=>{if(typeof document>"u")return!0;{const t="on"+Zfe(e);let i=t in document;if(!i){const r=document.createElement("div");r.setAttribute(t,"return;"),i=typeof r[t]=="function"}return i}},Kfe=(e,t,i)=>{const r=e.__events||(e.__events={}),n=r[t];n&&e.removeEventListener(t,n),e.addEventListener(t,r[t]=function(c){i&&i.call(this,c)})},n$=e=>{const t=new Map;return e.forEach(i=>t.set(i,i)),t},Yfe=(e,t)=>{typeof e=="function"?e(t):e!=null&&(e.current=t)},Xfe=(...e)=>t=>{e.forEach(i=>{Yfe(i,t)})},Qfe=(e,t)=>{const i=(r,n)=>c6.createElement(e,Object.assign({},r,{forwardedRef:n}));return i.displayName=t,c6.forwardRef(i)};var e0e=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]]);return i};const GZ=(e,t,i,r)=>{const n=Hfe(e),o=class extends c6.Component{constructor(c){super(c),this.setComponentElRef=y=>{this.componentEl=y}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(c){Wfe(this.componentEl,this.props,c)}render(){const c=this.props,{children:y,forwardedRef:v,style:_,className:I,ref:$}=c,A=e0e(c,["children","forwardedRef","style","className","ref"]);let k=Object.keys(A).reduce((N,D)=>{const j=A[D];if(D.indexOf("on")===0&&D[2]===D[2].toUpperCase()){const z=D.substring(2).toLowerCase();typeof document<"u"&&BZ(z)&&(N[D]=j)}else{const z=typeof j;(z==="string"||z==="boolean"||z==="number")&&(N[UZ(D)]=j)}return N},{});const R=Object.assign(Object.assign({},k),{ref:Xfe(v,this.setComponentElRef),style:_});return It.createElement(e,R,y)}static get displayName(){return n}};return Qfe(o,n)},Bu=GZ("calcite-icon"),t0e=GZ("calcite-shell"),i0e="data:image/svg+xml,%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:a='http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/'%20x='0px'%20y='0px'%20width='138'%20height='60'%20viewBox='0%200%20138%2060'%20enable-background='new%200%200%20138%2060'%20xml:space='preserve'%3e%3cdefs%3e%3c/defs%3e%3crect%20fill='%23CA1517'%20width='138'%20height='60'/%3e%3cpath%20fill='%23FFFFFF'%20d='M110.604,33.848h1.432V36.1h-1.468c-0.466,0-0.575-0.25-0.575-0.752v-0.787%20C109.992,34.096,110.102,33.848,110.604,33.848%20M117.871,28.226c0-2.974-1.252-5.048-4.906-5.048h-7.948v5.44%20c0.429-0.323,1.217-0.43,1.899-0.43h4.582c0.465,0,0.537,0.146,0.537,0.646v0.825h-3.008c-3.615,0-4.869,2.073-4.869,5.009v1.29%20c0,3.041,1.287,5.12,4.869,5.12h8.844V28.226z%20M98.383,41.078l4.621-17.9H96.67l-1.576,11.526l-1.649-11.526h-6.62l4.581,17.9%20H98.383z%20M77.75,33.848h1.432V36.1h-1.467c-0.467,0-0.572-0.25-0.572-0.752v-0.787C77.143,34.096,77.248,33.848,77.75,33.848%20M85.017,28.226c0-2.974-1.253-5.048-4.901-5.048h-7.949v5.44c0.426-0.323,1.217-0.43,1.895-0.43h4.585%20c0.464,0,0.536,0.146,0.536,0.646v0.825h-3.008c-3.615,0-4.867,2.073-4.867,5.009v1.29c0,3.041,1.285,5.12,4.867,5.12h8.843V28.226z%20M62.01,41.078h5.836V16.018H62.01V41.078z%20M50.095,23.178v-7.16H44.26v25.061h5.835V28.295h1.54c0.429,0,0.498,0.182,0.498,0.682%20v12.102h5.839V28.295c0-3.005-1.183-5.117-4.906-5.117H50.095z%20M33.879,21.89h5.834v-5.872h-5.834V21.89z%20M33.879,41.078h5.834%20V23.179h-5.834V41.078z%20M23.07,35.457h-2.257c-0.321,0-0.678-0.036-1.037-0.18v5.801h5.12c3.616,0,4.833-2.079,4.833-5.085V16.018%20h-6.122v18.76C23.607,35.277,23.461,35.457,23.07,35.457'/%3e%3cscript%20xmlns=''%20id='bw-fido2-page-script'/%3e%3c/svg%3e",qZ="data:image/svg+xml,%3csvg%20width='30'%20height='30'%20viewBox='0%200%2030%2030'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M23.0912%2024.9866C23.4954%2024.9864%2023.883%2024.8202%2024.1687%2024.5245L29.5544%2018.9479C29.84%2018.652%2030.0003%2018.251%2030%2017.833L29.9961%2011.1451C29.9959%2010.727%2029.8352%2010.3262%2029.5493%2010.0307L24.1571%204.4608C23.8702%204.16448%2023.4832%203.99864%2023.079%204.00001L1.52309%204.0134C1.3228%204.01293%201.12439%204.05342%200.939276%204.13253C0.754162%204.21164%200.585998%204.32782%200.444452%204.47438C0.302906%204.62094%200.190773%204.795%200.114499%204.98654C0.0382246%205.17807%20-0.000684416%205.38332%209.11036e-06%205.59046L0.0103705%2023.4248C0.0106744%2023.8428%200.171492%2024.2436%200.457456%2024.539C0.74342%2024.8344%201.13112%2025.0002%201.53529%2025L23.0912%2024.9866ZM3.04893%207.16468L22.4492%207.15263L26.9485%2011.8001L26.9516%2017.1817L22.4578%2021.8348L3.05746%2021.8468L3.04893%207.16468Z'%20fill='%236C9B2E'/%3e%3cpath%20d='M18.3924%2012.6604C17.4126%2013.6749%2017.4136%2015.3188%2018.3945%2016.332C19.3755%2017.3453%2020.965%2017.3443%2021.9448%2016.3298C22.9246%2015.3153%2022.9236%2013.6715%2021.9426%2012.6582C20.9617%2011.6449%2019.3722%2011.6459%2018.3924%2012.6604Z'%20fill='%236C9B2E'/%3e%3c/svg%3e";function r0e(e){var t;return it.jsxs("div",{className:"app-header",children:[it.jsx("div",{className:"logo",children:it.jsx("a",{href:e.appLogoLink,target:"_blank",children:it.jsx("img",{className:"logo-image",src:i0e,alt:"logo"})})}),it.jsxs("div",{className:"title",children:[it.jsx("div",{className:`main-title title-item ${e.actualThemeInfo?"":"no-sub-title"}`,children:e.appTitle}),e.actualThemeInfo&&it.jsxs("div",{className:"sub-title title-item",children:[it.jsx("img",{src:qZ,alt:"tma"}),(t=e.actualThemeInfo)==null?void 0:t.label]})]})]})}function m(e,t,i,r){var n,o=arguments.length,c=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(e,t,i,r);else for(var y=e.length-1;y>=0;y--)(n=e[y])&&(c=(o<3?n(c):o>3?n(t,i,c):n(t,i))||c);return o>3&&c&&Object.defineProperty(t,i,c),c}function oWe(e,t){return function(i,r){t(i,r,e)}}function aWe(e,t,i,r){function n(o){return o instanceof i?o:new i(function(c){c(o)})}return new(i||(i=Promise))(function(o,c){function y(I){try{_(r.next(I))}catch($){c($)}}function v(I){try{_(r.throw(I))}catch($){c($)}}function _(I){I.done?o(I.value):n(I.value).then(y,v)}_((r=r.apply(e,[])).next())})}let Id;function we(e){return typeof Id[e]=="function"?Id[e]=Id[e](globalThis):Id[e]}var VH,UH,BH,GH;Id=(VH=globalThis.dojoConfig)!=null&&VH.has||(UH=globalThis.esriConfig)!=null&&UH.has?{...(BH=globalThis.dojoConfig)==null?void 0:BH.has,...(GH=globalThis.esriConfig)==null?void 0:GH.has}:{},we.add=(e,t,i,r)=>{(r||Id[e]===void 0)&&(Id[e]=t),i&&we(e)},we.cache=Id,we.add("big-integer-warning-enabled",!0),we.add("esri-deprecation-warnings",!0),we.add("esri-tests-disable-screenshots",!1),we.add("esri-tests-use-full-window",!1),we.add("esri-tests-post-to-influx",!0),we.add("esri-cim-animations-enable-status","enabled"),we.add("esri-cim-animations-spotlight",!1),we.add("esri-cim-animations-freeze-time",!1),we.add("enable-feature:multiple-highlights",!1),(()=>{var t;we.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(we.add("host-browser",e),we.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),we.add("dom",e),we("host-browser")){const i=navigator,r=i.userAgent,n=i.appVersion,o=parseFloat(n);if(we.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),we.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),we.add("khtml",n.includes("Konqueror")?o:void 0),we.add("edge",parseFloat(r.split("Edge/")[1])||void 0),we.add("opr",parseFloat(r.split("OPR/")[1])||void 0),we.add("webkit",!we("wp")&&!we("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),we.add("chrome",!we("edge")&&!we("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),we.add("android",!we("wp")&&parseFloat(r.split("Android ")[1])||void 0),we.add("safari",!n.includes("Safari")||we("wp")||we("chrome")||we("android")||we("edge")||we("opr")?void 0:parseFloat(n.split("Version/")[1])),we.add("mac",n.includes("Macintosh")),!we("wp")&&/(iPhone|iPod|iPad)/.test(r)){const c=RegExp.$1.replace(/P/,"p"),y=/OS ([\d_]+)/.test(r)?RegExp.$1:"1",v=parseFloat(y.replace(/_/,".").replaceAll("_",""));we.add(c,v),we.add("ios",v)}we("webkit")||(!r.includes("Gecko")||we("wp")||we("khtml")||we("edge")||we.add("mozilla",o),we("mozilla")&&we.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),i=/iPhone/i.test(e);t&&we.add("esri-mobile",t),i&&we.add("esri-iPhone",i),we.add("esri-geolocation",!!navigator.geolocation)}we.add("esri-wasm","WebAssembly"in globalThis),we.add("esri-performance-mode-frames-between-render",20),we.add("esri-force-performance-mode",!1),we.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),we.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),we.add("esri-atomics","Atomics"in globalThis),we.add("esri-workers","Worker"in globalThis),we.add("web-feat:cache","caches"in globalThis),we.add("esri-workers-arraybuffer-transfer",!we("safari")||Number(we("safari"))>=12),we.add("workers-pool-size",8),we.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),we.add("featurelayer-simplify-payload-size-factors",[1,1,4]),we.add("featurelayer-fast-triangulation-enabled",!0),we.add("featurelayer-animation-enabled",!0),we.add("featurelayer-snapshot-enabled",!0),we.add("featurelayer-snapshot-point-min-threshold",8e4),we.add("featurelayer-snapshot-point-max-threshold",4e5),we.add("featurelayer-snapshot-point-coverage",.1),we.add("featurelayer-query-max-depth",4),we.add("featurelayer-query-pausing-enabled",!1),we.add("featurelayer-advanced-symbols",!1),we.add("featurelayer-pbf",!0),we.add("featurelayer-pbf-statistics",!1),we.add("feature-layers-workers",!0),we.add("feature-polyline-generalization-factor",1),we.add("mapview-transitions-duration",200),we.add("mapview-essential-goto-duration",200),we.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),we.add("mapserver-pbf-version-support",10.81),we.add("mapservice-popup-identify-max-tolerance",20),we("host-webworker")||we("host-browser")&&(we.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),we.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{we.add("esri-image-decode",!0,!0,!0)}).catch(()=>{we.add("esri-image-decode",!1,!0,!0)})}return!1}),we.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();let US=class Np{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*Np._m}getInt(){return this._seed=(Np._a*this._seed+Np._c)%Np._m,this._seed}getFloat(){return this.getInt()/(Np._m-1)}getIntRange(t,i){return Math.round(this.getFloatRange(t,i))}getFloatRange(t,i){const r=i-t;return t+this.getInt()/Np._m*r}};US._m=2147483647,US._a=48271,US._c=0;const n0e=1.5,lWe=1/n0e,uWe=.5;function qL(e,t){return t?e.filter((i,r,n)=>n.findIndex(t.bind(null,i))===r):Array.from(new Set(e))}function tI(e,t,i){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function UF(e,t,i){let r,n;return i?(r=t.filter(o=>!e.some(c=>i(c,o))),n=e.filter(o=>!t.some(c=>i(c,o)))):(r=t.filter(o=>!e.includes(o)),n=e.filter(o=>!t.includes(o))),{added:r,removed:n}}function cWe(e){return e&&typeof e.length=="number"}let HZ=class{constructor(){this.last=0}};const WZ=new HZ;function hM(e,t,i,r){r=r||WZ;const n=Math.max(0,r.last-10);for(let c=n;c<i;++c)if(e[c]===t)return r.last=c,c;const o=Math.min(n,i);for(let c=0;c<o;++c)if(e[c]===t)return r.last=c,c;return-1}function s0e(e,t,i,r){const n=e.length,o=hM(e,t,n,r);if(o!==-1)return e[o]=e[n-1],e.pop(),t}const La=new Set;function o0e(e,t,i=e.length,r=t.length,n,o){if(r===0||i===0)return i;La.clear();for(let y=0;y<r;++y)La.add(t[y]);n=n||WZ;const c=Math.max(0,n.last-10);for(let y=c;y<i;++y)if(La.has(e[y])&&(o==null||o.push(e[y]),La.delete(e[y]),e[y]=e[i-1],--i,--y,La.size===0||i===0))return La.clear(),i;for(let y=0;y<c;++y)if(La.has(e[y])&&(o==null||o.push(e[y]),La.delete(e[y]),e[y]=e[i-1],--i,--y,La.size===0||i===0))return La.clear(),i;return La.clear(),i}function dWe(e,t){let i=0;for(let r=0;r<e.length;++r){const n=e[r];t(n,r)&&(e[i]=n,i++)}e.length=i}function JZ(e){return e?(BF.seed=e,()=>BF.getFloat()):Math.random}function ZZ(e,t){const i=JZ(t);for(let r=e.length-1;r>0;r--){const n=Math.floor(i()*(r+1)),o=e[r];e[r]=e[n],e[n]=o}return e}const BF=new US;function KZ(e,t){const i=e.indexOf(t);return i!==-1?(e.splice(i,1),t):null}function Ar(e,t){return e!=null}function YZ(e){return 32+e.length}function HL(){return 16}function pWe(e){if(!e)return 0;let t=QZ;for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];switch(typeof r){case"string":t+=YZ(r);break;case"number":t+=HL();break;case"boolean":t+=4}}return t}function a0e(e){if(!e)return 0;if(Array.isArray(e))return l0e(e);let t=QZ;for(const i in e)e.hasOwnProperty(i)&&(t+=XZ(e[i]));return t}function l0e(e){const t=e.length;if(t===0||typeof e[0]=="number")return 32+8*t;let i=eK;for(let r=0;r<t;r++)i+=XZ(e[r]);return i}function XZ(e){switch(typeof e){case"object":return a0e(e);case"string":return YZ(e);case"number":return HL();case"boolean":return 4;default:return 8}}function u0e(e,t){return eK+e.length*t}const QZ=32,eK=16;function fWe(e){return e instanceof ArrayBuffer}function WL(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int8Array"}function tK(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8Array"}function iK(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8ClampedArray"}function JL(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int16Array"}function rK(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint16Array"}function ZL(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int32Array"}function nK(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint32Array"}function iI(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float32Array"}function rI(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float64Array"}function sK(e){return!("buffer"in e)}function yWe(...e){return e.reduce((t,i)=>t+(i?sK(i)?u0e(i,HL()):i.byteLength+c0e:0),0)}const c0e=145,oK=1024;function mWe(e){return rI(e)||iI(e)||ZL(e)||JL(e)||WL(e)}function gWe(e){return rI(e)||iI(e)}function vWe(e){return rI(e)?179769e303:iI(e)?3402823e32:nK(e)?4294967295:rK(e)?65535:tK(e)||iK(e)?255:ZL(e)?2147483647:JL(e)?32767:WL(e)?127:256}function h0e(e,t){let i;for(i in e)e.hasOwnProperty(i)&&e[i]===void 0&&delete e[i];return e}function le(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=uK(e);if(t!=null)return t;if(l9(e))return e.clone();if(aK(e))return e.map(le);if(lK(e))return e.clone();const i={};for(const r of Object.getOwnPropertyNames(e))i[r]=le(e[r]);return i}function dM(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=uK(e);if(t!=null)return t;if(aK(e)){let i=!0;const r=e.map(n=>{const o=dM(n);return n!=null&&o==null&&(i=!1),o});return i?r:null}if(l9(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(!lK(e)){const i=new(Object.getPrototypeOf(e)).constructor;for(const r of Object.getOwnPropertyNames(e)){const n=e[r],o=dM(n);if(n!=null&&o==null)return null;i[r]=o}return i}return null}function l9(e){return typeof e.clone=="function"}function aK(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function lK(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function GF(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function uK(e){if(WL(e)||tK(e)||iK(e)||JL(e)||rK(e)||ZL(e)||nK(e)||iI(e)||rI(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[i,r]of e)t.set(i,le(r));return t}if(e instanceof Set){const t=new Set;for(const i of e)t.add(le(i));return t}return null}function KL(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e==null?void 0:e.getTime)=="function"&&typeof(t==null?void 0:t.getTime)=="function"&&e.getTime()===t.getTime()||!1}function cK(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&tI(e,t):e instanceof Set?t instanceof Set&&p0e(e,t):e instanceof Map?t instanceof Map&&f0e(e,t):!!GF(e)&&GF(t)&&d0e(e,t))}function d0e(e,t){if(e===null||t===null)return!1;const i=Object.keys(e);if(t===null||Object.keys(t).length!==i.length)return!1;for(const r of i)if(e[r]!==t[r]||!Object.prototype.hasOwnProperty.call(t,r))return!1;return!0}function p0e(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function f0e(e,t){if(e.size!==t.size)return!1;for(const[i,r]of e){const n=t.get(i);if(n!==r||n===void 0&&!t.has(i))return!1}return!0}function YL(e,t,i=!1){return dK(e,t,i)}function n3(e,t){if(t!=null)return t[e]||hK(e.split("."),!1,t)}function Qr(e,t,i){const r=e.split("."),n=r.pop(),o=hK(r,!0,i);o&&n&&(o[n]=t)}function qF(e,t){if(e==null&&t==null)return!1;if(e==null||t==null)return!0;if(typeof e=="object"){if(Array.isArray(e)){const i=t;if(e.length!==i.length)return!0;for(let r=0;r<e.length;r++)if(qF(e[r],i[r]))return!0;return!1}if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const i in e)if(qF(e[i],t[i]))return!0;return!1}return e!==t}function hK(e,t,i){let r=i;for(const n of e){if(r==null)return;if(!(n in r)){if(!t)return;r[n]={}}r=r[n]}return r}function dK(e,t,i){return t?Object.keys(t).reduce((r,n)=>{let o=r[n],c=t[n];return o===c?r:o===void 0?(r[n]=le(c),r):(Array.isArray(c)||Array.isArray(r)?(o=o?Array.isArray(o)?r[n]=o.slice():r[n]=[o]:r[n]=[],c&&(Array.isArray(c)||(c=[c]),i?c.forEach(y=>{o.includes(y)||o.push(y)}):r[n]=c.slice())):c&&typeof c=="object"?r[n]=dK(o,c,i):r.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(r[n]=c),r)},e||{}):e}var qH;const qt={apiKey:void 0,applicationName:"",applicationUrl:(qH=globalThis.location)==null?void 0:qH.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(YL(qt,globalThis.esriConfig,!0),delete qt.has),!qt.assetsPath){{const e="4.31";qt.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}qt.defaultAssetsPath=qt.assetsPath}const y0e=/\{([^}]+)\}/g;function HF(e){return e??""}function Il(e,t){return t?e.replaceAll(y0e,typeof t=="object"?(i,r)=>HF(n3(r,t)):(i,r)=>HF(t(r))):e}function m0e(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,i=>t!=null&&t.includes(i)?i:`\\${i}`)}function pK(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}let WF;function g0e(e){return WF??(WF=new DOMParser),WF.parseFromString(e||"","text/html").body.innerText||""}function JF(e,t){return new RegExp(`{${t}}`,"ig").test(e)}const ZF={info:0,warn:1,error:2,none:3};let _e=class vo{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,vo._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=vo.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){}static get test(){}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,vo._loggers.get(t)||new vo({module:t})}_log(t,i,...r){if(this._matchLevel(t)){if(i!=="always"&&!vo._throttlingDisabled){const n=w0e(r),o=this._loggedMessages[t].get(n);if(i==="once"&&o!=null||i==="oncePerTick"&&o&&o>=vo._tickCounter)return;this._loggedMessages[t].set(n,vo._tickCounter),vo._scheduleTickCounterIncrement()}for(const n of qt.log.interceptors)if(n(t,this.module,...r))return;this._inheritedWriter()(t,this.module,...r)}}_parentWithMember(t,i){let r=this;for(;r!=null;){const n=r[t];if(n!=null)return n;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",v0e)}_matchLevel(t){const i=qt.log.level||"warn";return ZF[this._parentWithMember("level",i)]<=ZF[t]}static _scheduleTickCounterIncrement(){vo._tickCounterScheduled||(vo._tickCounterScheduled=!0,Promise.resolve().then(()=>{vo._tickCounter++,vo._tickCounterScheduled=!1}))}};function v0e(e,t,...i){console[e](`[${t}]`,...i)}function w0e(...e){return pK(JSON.stringify(e,(i,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}_e._loggers=new Map,_e._tickCounter=0,_e._tickCounterScheduled=!1,_e._throttlingDisabled=!1;function b0e(e,t){for(const i of e.values())if(t(i))return!0;return!1}function s3(e,t,i){const r=e.get(t);if(r!==void 0)return r;const n=i();return e.set(t,n),n}function wWe(e){const t=new Map;return i=>(t.has(i)||t.set(i,e(i)),t.get(i))}const T1=()=>_e.getLogger("esri.core.accessorSupport.ensureTypes");function _0e(e){return e==null?e:new Date(e)}function S0e(e){return e==null?e:!!e}function o3(e){return e==null?e:e.toString()}function Es(e,t=0){return e==null?e:(e=parseFloat(e),isNaN(e)?t:e)}function XL(e){return e==null?e:Math.round(parseFloat(e))}function x0e(e){return null}function I0e(e,t){return i=>{let r=e(i);return t.step!=null&&(r=Math.round(r/t.step)*t.step),t.min!=null&&(r=Math.max(t.min,r)),t.max!=null&&(r=Math.min(t.max,r)),r}}function fK(e){return(e==null?void 0:e.constructor)&&e.constructor.__accessorMetadata__!==void 0}function u9(e,t){return t!=null&&e&&!(t instanceof e)}function yK(e){return e&&"isCollection"in e}function KF(e){return e!=null&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function T0e(e,t){if(!(t!=null&&t.constructor)||!yK(t.constructor))return pM(e,t)?t:new e(t);const i=KF(e.prototype.itemType),r=KF(t.constructor.prototype.itemType);return i?r?i===r?t:i.prototype.isPrototypeOf(r.prototype)?new e(t):(pM(e,t),t):new e(t):t}function pM(e,t){return!!fK(t)&&(T1().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+nI(e)+"'"),!0)}function a3(e,t){return t==null?t:yK(e)?T0e(e,t):u9(e,t)?pM(e,t)?t:new e(t):t}function nI(e){var t;return((t=e==null?void 0:e.prototype)==null?void 0:t.declaredClass)||"unknown"}const $0e=new WeakMap;function E0e(e){switch(e){case Number:return t=>Es(t);case Ct:return XL;case Boolean:return S0e;case String:return o3;case Date:return _0e;case Ag:return x0e;default:return s3($0e,e,()=>a3.bind(null,e))}}function qi(e,t){const i=E0e(e);return arguments.length===1?i:i(t)}function c2(e,t,i){return arguments.length===1?c2.bind(null,e):t&&(Array.isArray(t)?t.map(r=>e(r,i)):[e(t,i)])}function M0e(e,t){return arguments.length===1?c2(i=>qi(e,i)):c2(i=>qi(e,i),t)}function mK(e,t,i){return t!==0&&Array.isArray(i)?i.map(r=>mK(e,t-1,r)):e(i)}function c9(e,t,i){if(arguments.length===2)return o=>c9(e,t,o);if(!i)return i;i=mK(e,t,i);let r=t,n=i;for(;r>0&&Array.isArray(n);)r--,n=n[0];if(n!==void 0)for(let o=0;o<r;o++)i=[i];return i}function A0e(e,t,i){return arguments.length===2?c9(r=>qi(e,r),t):c9(r=>qi(e,r),t,i)}function gK(e){return!!Array.isArray(e)&&!e.some(t=>{const i=typeof t;return!(i==="string"||i==="number"||i==="function"&&e.length>1)})}function fM(e,t){if(arguments.length===2)return fM(e).call(null,t);const i=new Set,r=e.filter(y=>typeof y!="function"),n=e.filter(y=>typeof y=="function");for(const y of e)typeof y!="string"&&typeof y!="number"||i.add(y);let o=null,c=null;return(y,v)=>{if(y==null)return y;const _=typeof y,I=_==="string"||_==="number";return I&&(i.has(y)||n.some($=>_==="string"&&$===String||_==="number"&&$===Number))||_==="object"&&n.some($=>!u9(y,$))?y:(I&&r.length?(o||(o=r.map($=>typeof $=="string"?`'${$}'`:`${$}`).join(", ")),T1().error("Accessor#set",`'${y}' is not a valid value for this property, only the following values are valid: ${o}`)):typeof y=="object"&&n.length?(c||(c=n.map($=>nI($)).join(", ")),T1().error("Accessor#set",`'${y}' is not a valid value for this property, value must be one of ${c}`)):T1().error("Accessor#set",`'${y}' is not a valid value for this property`),v&&(v.valid=!1),null)}}function Ma(e,t){if(arguments.length===2)return Ma(e).call(null,t);const i={},r=[],n=[];for(const v in e.typeMap){const _=e.typeMap[v];i[v]=qi(_),r.push(nI(_)),n.push(v)}const o=()=>`'${r.join("', '")}'`,c=()=>`'${n.join("', '")}'`,y=typeof e.key=="string"?v=>v[e.key]:e.key;return v=>{if(e.base&&!u9(e.base,v)||v==null)return v;const _=y(v)||e.defaultKeyValue,I=i[_];if(!I)return T1().error("Accessor#set",`Invalid property value, value needs to be one of ${o()}, or a plain object that can autocast (having .type = ${c()})`),null;if(!u9(e.typeMap[_],v))return v;if(typeof e.key=="string"&&!fK(v)){const $={};for(const A in v)A!==e.key&&($[A]=v[A]);return I($)}return I(v)}}let Ct=class{},Ag=class{};const SWe={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function C0e(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function vK(e){switch(e.type){case"native":return qi(e.value);case"array":return c2(vK(e.value));case"one-of":return k0e(e);default:return null}}function k0e(e){let t=null;return(i,r)=>mM(i,e)?i:(t==null&&(t=yM(e)),T1().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),r&&(r.valid=!1),null)}function yM(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Ct:return"integer";case Date:return"date";case Ag:return"null";default:return nI(e.value)}case"array":return`array of ${yM(e.value)}`;case"one-of":{const t=e.values.map(i=>yM(i));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function mM(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case Ct:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case Ag:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(i=>!mM(i,t.value));case"one-of":return t.values.some(i=>mM(e,i))}}const L0e={remove:()=>{}};function ei(e){return e?{remove(){e&&(e(),e=void 0)}}:L0e}function O0e(e){e.forEach(t=>t==null?void 0:t.remove())}function l3(e){return ei(()=>O0e(e))}function xWe(e){return ei(()=>e==null?void 0:e.abort())}function IWe(e){return ei(e!=null?()=>e.destroy():void 0)}function uo(e){return e.__accessor__??null}function R0e(e,t){var i;return((i=e==null?void 0:e.metadata)==null?void 0:i[t])!=null}function BS(e,t,i){return i?h9(e,t,{policy:i,path:""}):h9(e,t,null)}function h9(e,t,i){return t?Object.keys(t).reduce((r,n)=>{const o=n;let c=null,y="merge";if(i&&(c=i.path?`${i.path}.${n}`:n,y=i.policy(c)),y==="replace"||y==="replace-arrays"&&Array.isArray(r[o]))return r[o]=t[o],r;if(r[o]===void 0)return r[o]=le(t[o]),r;let v=r[o],_=t[o];if(v===_)return r;if(Array.isArray(_)||Array.isArray(r))v=v?Array.isArray(v)?r[o]=v.slice():r[o]=[v]:r[o]=[],_&&(Array.isArray(_)||(_=[_]),_.forEach(I=>{v.includes(I)||v.push(I)}));else if(_&&typeof _=="object")if(i){const I=i.path;i.path=c,r[o]=h9(v,_,i),i.path=I}else r[o]=h9(v,_,null);else r.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(r[o]=_);return r},e||{}):e}function wK(e){return Array.isArray(e)?e:e.split(".")}function YF(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function P0e(e){if(Array.isArray(e)){const t=[];for(const i of e)t.push(...YF(i));return t}return YF(e)}function bK(e,t,i,r){const n=P0e(t);if(n.length!==1){const o=n.map(c=>r(e,c,i));return l3(o)}return r(e,n[0],i)}function _K(e,t){const i=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.at(n)}const r=uo(t);return R0e(r,i)?r.get(i):t[i]}function SK(e,t,i){if(e==null)return e;const r=_K(t[i],e);return!r&&i<t.length-1?void 0:i===t.length-1?r:SK(r,t,i+1)}function u3(e,t,i=0){return typeof t!="string"||t.includes(".")?SK(e,wK(t),i):_K(t,e)}function hs(e,t){return u3(e,t)}function XF(e,t){return u3(t,e)!==void 0}function c3(e){let t=e.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!i){t=Object.create(t);for(const r in t)t[r]=le(t[r]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function sI(e,t){const i=c3(e);let r=i[t];return r||(r=i[t]={}),r}function N0e(e,t){return BS(e,t,D0e)}const F0e=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function D0e(e){return F0e.test(e)?"replace":"merge"}function j0e(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(i,r)=>r===""?"$":(n3(r,t)??"").toString())}let xK=class{constructor(t,i,r=void 0){this.name=t,this.details=r,this.message=(i&&j0e(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},ne=class IK extends xK{constructor(t,i,r){super(t,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return le(i)}catch{return"[object]"}}))}}catch(t){throw _e.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new IK(t.name,t.message,t.details)}};ne.prototype.type="error";function d9(e,t,i){if(e&&t)if(typeof t=="object")for(const r of Object.getOwnPropertyNames(t))d9(e,r,t[r]);else{if(t.includes(".")){const n=t.split("."),o=n.splice(-1,1)[0];return void d9(hs(e,n),o,i)}const r=e.__accessor__;r!=null&&z0e(t,r),e[t]=i}}function z0e(e,t){if(we("esri-unknown-property-errors")&&!V0e(e,t))throw new ne("set:unknown-property",U0e(e,t))}function V0e(e,t){return t.metadata[e]!=null}function U0e(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}function w(e={}){return(t,i)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(t,i),n=sI(t,i);r&&(r.get||r.set?(n.get=r.get||n.get,n.set=r.set||n.set):"value"in r&&("value"in e&&_e.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${t.constructor.name}" already defined in the metadata`,e),n.value=e.value=r.value)),e.readOnly!=null&&(n.readOnly=e.readOnly);const o=e.aliasOf;if(o){const v=typeof o=="string"?o:o.source,_=typeof o=="string"?null:o.overridable===!0;let I;n.dependsOn=[v],n.get=function(){let $=hs(this,v);if(typeof $=="function"){I||(I=v.split(".").slice(0,-1).join("."));const A=hs(this,I);A&&($=$.bind(A))}return $},n.readOnly||(n.set=_?function($){this._override(i,$)}:function($){d9(this,v,$)})}const c=e.type,y=e.types;if(!n.cast){let v;c?v=B0e(c):y&&(v=Array.isArray(y)?c2(Ma(y[0])):Ma(y)),e.cast=G0e(e.cast,v)}N0e(n,e),e.range&&(n.cast=I0e(n.cast,e.range))}}function TK(e,t,i){const r=sI(e,i);r.json||(r.json={});let n=r.json;return t!==void 0&&(n.origins||(n.origins={}),n.origins[t]||(n.origins[t]={}),n=n.origins[t]),n}function B0e(e){let t=0,i=e;if(C0e(e))return vK(e);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],t++;const r=i;if(gK(r))return t===0?fM(r):c9(fM(r),t);if(t===1)return M0e(r);if(t>1)return A0e(r,t);const n=e;return n.from?n.from:qi(n)}function G0e(e,t){if(e||t)return e?t?(i,r)=>t(e(i,r),r):e:t}const $K=Symbol("Accessor-beforeDestroy");var Ys;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED",e[e.DESTROYED=3]="DESTROYED"})(Ys||(Ys={}));var ui;(function(e){e[e.Dirty=1]="Dirty",e[e.Overridden=2]="Overridden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(ui||(ui={}));let oI=class{constructor(t){this.accessed=void 0,this._handles=void 0,this._observer=t}destroy(){var t;(t=this.accessed)==null||t.clear(),this.clear()}onAccessed(t){this._observer!=null&&t!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(t))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(t=>{this._handles.push(t.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let t=0;t<this._handles.length;++t)this._handles[t].remove();this._handles.length=0}}};const p9=new oI,Zv=[];let gb=p9;function Xe(e){gb.onAccessed(e)}let GS=!1,qS=!1;function Yc(e,t,i){if(GS)return QL(e,t,i);let r=null;return EK(e),r=t.call(i),MK(),r}function q0e(e,t){return Yc(p9,e,t)}function QL(e,t,i){const r=GS;GS=!0,EK(e);let n=null;try{n=t.call(i)}catch(o){qS&&_e.getLogger("esri.core.accessorSupport.tracking").error(o)}return MK(),GS=r,n}function EK(e){gb=e,Zv.push(e)}function MK(){const e=Zv.length;if(e>1){const t=Zv.pop();gb=Zv[e-2],t.onTrackingEnd()}else if(e===1){const t=Zv.pop();gb=p9,t.onTrackingEnd()}else gb=p9}function AK(e,t){if(t.flags&ui.DepTrackingInitialized)return;t.flags|=ui.DepTrackingInitialized;const i=qS;qS=!1,t.flags&ui.AutoTracked?QL(t.trackingTarget,t.metadata.get,e):CK(e,t),qS=i}const H0e=[];function CK(e,t){t.flags&ui.ExplicitlyTracking||(t.flags|=ui.ExplicitlyTracking,QL(t.trackingTarget,()=>{const i=t.metadata.dependsOn||H0e;for(const r of i)if(typeof r!="string"||r.includes(".")){const n=wK(r);for(let o=0,c=e;o<n.length&&c!=null&&typeof c=="object";++o)c=QF(c,n[o],o!==n.length-1)}else QF(e,r,!1)}),t.flags&=~ui.ExplicitlyTracking)}function QF(e,t,i){const r=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const o=parseInt(r,10);if(!isNaN(o))return Array.isArray(e)?e[o]:e.at(o)}const n=uo(e);if(n){const o=n.propertiesByName.get(r);o&&(Xe(o),AK(e,o))}return i?e[r]:void 0}function W0e(e){if(e.json&&e.json.origins){const t=e.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(t[r]){const n=t[r];i[r].forEach(o=>{t[o]=n}),delete t[r]}}}let zo=class extends xK{constructor(t,i,r){super(t,i,r)}};zo.prototype.type="warning";function kK(e){var t;return!!e&&((t=e.prototype)==null?void 0:t.declaredClass)&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const gM=()=>_e.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function eD(e,t,i){var r,n;e&&(!i&&!t.read||(r=t.read)!=null&&r.reader||((n=t.read)==null?void 0:n.enabled)===!1||K0e(e)&&Qr("read.reader",Cg(e),t))}function Cg(e){var i,r;const t=e.ndimArray??0;if(t>1)return Z0e(e);if(t===1)return tD(e);if("type"in e&&OK(e.type)){const n=(r=(i=e.type.prototype)==null?void 0:i.itemType)==null?void 0:r.Type,o=tD(typeof n=="function"?{type:n}:{types:n});return(c,y,v)=>{const _=o(c,y,v);return _&&new e.type(_)}}return eO(e)}function eO(e){return"type"in e?J0e(e.type):Y0e(e.types)}function J0e(e){return e.prototype.read?(t,i,r)=>{if(t==null)return t;const n=typeof t;if(n!=="object")return void gM().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${n}'`);const o=new e;return o.read(t,r),o}:e.fromJSON}function LK(e,t,i,r){return r!==0&&Array.isArray(t)?t.map(n=>LK(e,n,i,r-1)):e(t,void 0,i)}function Z0e(e){const t=eO(e),i=LK.bind(null,t),r=e.ndimArray??0;return(n,o,c)=>{if(n==null)return n;n=i(n,c,r);let y=r,v=n;for(;y>0&&Array.isArray(v);)y--,v=v[0];if(v!==void 0)for(let _=0;_<y;_++)n=[n];return n}}function tD(e){const t=eO(e);return(i,r,n)=>{if(i==null)return i;if(Array.isArray(i)){const c=[];for(const y of i){const v=t(y,void 0,n);v!==void 0&&c.push(v)}return c}const o=t(i,void 0,n);return o!==void 0?[o]:void 0}}function OK(e){if(!kK(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?tO(t.Type):RK(t.Type))}function K0e(e){return"types"in e?RK(e.types):tO(e.type)}function tO(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||OK(e))}function RK(e){for(const t in e.typeMap)if(!tO(e.typeMap[t]))return!1;return!0}function Y0e(e){let t=null;const i=e.errorContext??"type",r=e.validate;return(n,o,c)=>{if(n==null)return n;const y=typeof n;if(y!=="object")return void gM().error(`Expected JSON value of type 'object' to deserialize, but got '${y}'`);t||(t=X0e(e));const v=e.key;if(typeof v!="string")return;const _=n[v],I=_?t[_]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!I){const A=`Type '${_||"unknown"}' is not supported`;return c!=null&&c.messages&&n&&c.messages.push(new zo(`${i}:unsupported`,A,{definition:n,context:c})),void gM().error(A)}const $=new I;return $.read(n,c),r?r($):$}}function X0e(e){var i,r;const t={};for(const n in e.typeMap){const o=e.typeMap[n],c=c3(o.prototype);if(typeof e.key=="function")continue;const y=c[e.key];if(!y)continue;if((i=y.json)!=null&&i.type&&Array.isArray(y.json.type)&&y.json.type.length===1&&typeof y.json.type[0]=="string"){t[y.json.type[0]]=o;continue}const v=(r=y.json)==null?void 0:r.write;if(!(v!=null&&v.writer)){t[n]=o;continue}const _=v.target,I=typeof _=="string"?_:e.key,$={};v.writer(n,$,I),$[I]&&(t[$[I]]=o)}return t}function Q0e(e){if(e.json||(e.json={}),rD(e.json),nD(e.json),iD(e.json),e.json.origins)for(const t in e.json.origins)rD(e.json.origins[t]),nD(e.json.origins[t]),iD(e.json.origins[t]);return!0}function iD(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function rD(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function nD(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function sD(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const i=(e==null?void 0:e.ndimArray)??0;e&&(i===1||"type"in e&&kK(e.type))?t.write.writer=iye:i>1?t.write.writer=rye(i):t.types?Array.isArray(t.types)?t.write.writer=tye(t.types[0]):t.write.writer=eye(t.types):t.write.writer=h2}function eye(e){return(t,i,r,n)=>t?PK(t,e,n)?h2(t,i,r,n):void 0:h2(t,i,r,n)}function PK(e,t,i){for(const r in t.typeMap)if(e instanceof t.typeMap[r])return!0;if(i!=null&&i.messages){const r=t.errorContext??"type",n=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&e&&i.messages.push(new ne(`${r}:unsupported`,n,{definition:e,context:i})),_e.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function tye(e){return(t,i,r,n)=>!t||!Array.isArray(t)?h2(t,i,r,n):h2(t.filter(o=>PK(o,e,n)),i,r,n)}function h2(e,t,i,r){Qr(i,f9(e,r),t)}function f9(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?y9(e):e}function y9(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function iye(e,t,i,r){let n;e===null?n=null:e&&typeof e.map=="function"?(n=e.map(o=>f9(o,r)),typeof n.toArray=="function"&&(n=n.toArray())):n=[f9(e,r)],Qr(i,n,t)}function NK(e,t,i){return i!==0&&Array.isArray(e)?e.map(r=>NK(r,t,i-1)):f9(e,t)}function rye(e){return(t,i,r,n)=>{let o;if(t===null)o=null;else{o=NK(t,n,e);let c=e,y=o;for(;c>0&&Array.isArray(y);)c--,y=y[0];if(y!==void 0)for(let v=0;v<c;v++)o=[o]}Qr(r,o,i)}}function nye(e,t){return iO(e,"any",t==null?void 0:t.origin)}function vM(e,t){return iO(e,"read",t==null?void 0:t.origin)}function FK(e,t){return iO(e,"write",t==null?void 0:t.origin)}function iO(e,t,i){let r=e==null?void 0:e.json;if(r!=null&&r.origins&&i){let n;n=i==="link-chart"?r.origins[i]&&(t==="any"||t in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],n&&(t==="any"||t in n)&&(r=n)}return r}function sye(e){var i;const t=oye(e);if(e.json.origins)for(const r in e.json.origins){const n=e.json.origins[r],o=n.types?aye(n):t;eD(o,n,!1),n.types&&!n.write&&((i=e.json.write)!=null&&i.enabled)&&(n.write={...e.json.write}),sD(o,n)}eD(t,e.json,!0),sD(t,e.json)}function oye(e){return e.json.types?wM(e.json):e.type?DK(e):wM(e)}function aye(e){return e.type?DK(e):wM(e)}function DK(e){if(!e.type)return;let t=0,i=e.type;for(;Array.isArray(i)&&!gK(i);)i=i[0],t++;return{type:i,ndimArray:t}}function wM(e){if(!e.types)return;let t=0,i=e.types;for(;Array.isArray(i);)i=i[0],t++;return{types:i,ndimArray:t}}function lye(e){Q0e(e)&&(W0e(e),sye(e))}const s$=new Set,o$=new Set;function H(e){return t=>{e??(e="esri.core.Accessor"),t.prototype.declaredClass=e,cye(t);const i=[],r=[];let n=t.prototype;for(;n;)n.hasOwnProperty("initialize")&&!s$.has(n.initialize)&&(s$.add(n.initialize),i.push(n.initialize)),n.hasOwnProperty("destroy")&&!o$.has(n.destroy)&&(o$.add(n.destroy),r.push(n.destroy)),n=Object.getPrototypeOf(n);s$.clear(),o$.clear();const o=class extends t{constructor(...y){if(super(...y),this.constructor===o&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let v=i.length-1;v>=0;v--)i[v].call(this)}}),r.length){let v=!1;const _=this[$K];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!v){v=!0,_.call(this);for(let I=0;I<r.length;I++)r[I].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};o.__accessorMetadata__=c3(t.prototype),o.prototype.declaredClass=e;const c=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(o,"name",{value:c,configurable:!0}),o}}function uye(e,t){return t.get==null?function(){const i=this.__accessor__,r=i.propertiesByName.get(e);if(r===void 0)return;i.mutable&&Xe(r);const n=i.store;return n.has(e)?n.get(e):r.metadata.value}:function(){const i=this.__accessor__,r=i.propertiesByName.get(e);if(r!==void 0)return r.getComputed(i)}}function cye(e){const t=e.prototype,i=c3(t),r={};for(const n of Object.getOwnPropertyNames(i)){const o=i[n];lye(o),r[n]={enumerable:!0,configurable:!0,get:uye(n,o),set(c){const y=this.__accessor__;if(y!==void 0){if(y.mutable)return y.initialized&&o.readOnly?oD("read-only",n):y.lifecycle===Ys.CONSTRUCTED&&o.constructOnly?oD("construct-only",n):void y.set(n,c)}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:c})}}}Object.defineProperties(e.prototype,r)}const oD=(e,t)=>{_e.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)},aD=new WeakMap;function hye(e,t,i=!1){const r=` DEPRECATED - ${t}`;if(!i)return void e.warn(r);let n=aD.get(e);n||(n=new Set,aD.set(e,n)),n.has(t)||(n.add(t),e.warn(r))}function jK(e,t,i={}){if(we("esri-deprecation-warnings")){const{moduleName:r}=i;d2(e,`Function: ${(r?r+"::":"")+t+"()"}`,i)}}function xu(e,t,i={}){if(we("esri-deprecation-warnings")){const{moduleName:r}=i;d2(e,`Property: ${(r?r+"::":"")+t}`,i)}}function dye(e,t,i={}){we("esri-deprecation-warnings")&&d2(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...i})}function d2(e,t,i={}){if(we("esri-deprecation-warnings")){const{replacement:r,version:n,see:o,warnOnce:c}=i;let y=t;r&&(y+=`
	 Replacement: ${r}`),n&&(y+=`
	 Version: ${n}`),o&&(y+=`
	 See ${o} for more details.`),hye(e,y,c)}}function MWe(e){const t=[];return function*(){yield*t;for(const i of e)t.push(i),yield i}}function pye(e,t){for(const i of e)if(i!=null&&t(i))return i}function m9(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let kg=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(i=>{t+=i.length}),t}add(t,i){if(m9(t)){const r=this._getOrCreateGroup(i);for(const n of t)uD(n)&&r.push(n)}else uD(t)&&this._getOrCreateGroup(i).push(t);return this}forEach(t,i){if(typeof t=="function")this._groups.forEach(r=>r.forEach(t));else{const r=this._getGroup(t);r&&i&&r.forEach(i)}}has(t){return this._groups.has(p_(t))}remove(t){if(typeof t!="string"&&m9(t)){for(const i of t)this.remove(i);return this}return this.has(t)?(lD(this._getGroup(t)),this._groups.delete(p_(t)),this):this}removeAll(){return this._groups.forEach(lD),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const i=[];return this._groups.set(p_(t),i),i}_getGroup(t){return this._groups.get(p_(t))}};function p_(e){return e||"_default_"}function lD(e){for(const t of e)t instanceof kg?t.removeAll():t.remove()}function uD(e){return e!=null&&(!!e.remove||e instanceof kg)}function h3(e,t){if(e==null)throw new Error(t??"value is None")}function ci(e){return e==null||e.destroy(),null}function CWe(e){return e==null||e.dispose(),null}function Bi(e){return e==null||e.remove(),null}function _0(e){return e==null||e.abort(),null}function kWe(e){return e==null||e.release(),null}function fye(e,t,i){return e!=null&&t!=null?i!=null?i(e,t):e.equals(t):e===t}function p2(e,t){let i;return e.some((r,n)=>(i=t(r,n),i!=null)),i??void 0}function yye(e){return(e==null?void 0:e.release)&&typeof e.release=="function"}function mye(e){return(e==null?void 0:e.acquire)&&typeof e.acquire=="function"}let dp=class bM{constructor(t,i,r,n=1,o=0){this._ctor=t,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=n,this._pool=new Array(o),this._initialSize=o;for(let c=0;c<o;c++)this._pool[c]=new this._ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...t){let i;if(bM.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let n=0;n<r;n++)this._pool[n]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...t):mye(i)&&i.acquire(...t),i}release(t){t&&!bM.test.disabled&&(this._releaseFunction?this._releaseFunction(t):yye(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};dp.test={disabled:!1};let gye=class{constructor(t,i){this._observers=t,this._observer=i}remove(){KZ(this._observers,this._observer)}},zK=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return vye;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,n=!1;const o=i.length;for(let c=0;c<o;++c){const y=i[c];if(y.destroyed)n=!0;else if(y===t){r=!0;break}}return r||(i.push(t),n&&this._removeDestroyedObservers()),new gye(i,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const i=t.length;let r=0;for(let n=0;n<i;++n){for(;n+r<i&&t[n+r].destroyed;)++r;if(r>0){if(!(n+r<i))break;t[n]=t[n+r]}}t.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const i of t)i.onCommitted();this._observers=null}}};const vye=ei();var dt;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(dt||(dt={}));const _M=dt.USER+1;function Td(e){switch(e){case"defaults":return dt.DEFAULTS;case"service":return dt.SERVICE;case"portal-item":return dt.PORTAL_ITEM;case"web-scene":return dt.WEB_SCENE;case"web-map":return dt.WEB_MAP;case"link-chart":return dt.LINK_CHART;case"user":return dt.USER;default:return null}}function g9(e){switch(e){case dt.DEFAULTS:return"defaults";case dt.SERVICE:return"service";case dt.PORTAL_ITEM:return"portal-item";case dt.WEB_SCENE:return"web-scene";case dt.WEB_MAP:return"web-map";case dt.LINK_CHART:return"link-chart";case dt.USER:return"user"}}function wye(e){return g9(e)}let cD=class extends zK{constructor(t,i){super(),this.propertyName=t,this.metadata=i,this.trackingTarget=new oI(this),this.flags=0,this.flags=ui.Dirty|(i.nonNullable?ui.NonNullable:0)|(i.hasOwnProperty("value")?ui.HasDefaultValue:0)|(i.get===void 0?ui.DepTrackingInitialized:0)|(i.dependsOn===void 0?ui.AutoTracked:0)}destroy(){this.flags&ui.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(t){t.mutable&&Xe(this);const i=t.store,r=this.propertyName,n=this.flags,o=i.get(r);if(n&ui.Computing||~n&ui.Dirty&&i.has(r))return o;this.flags|=ui.Computing;const c=t.host;let y;n&ui.AutoTracked?y=Yc(this.trackingTarget,this.metadata.get,c):(CK(c,this),y=this.metadata.get.call(c)),this.flags|=ui.DepTrackingInitialized,i.set(r,y,dt.COMPUTED);const v=i.get(r);return v===o?this.flags&=~ui.Dirty:q0e(this.commit,this),this.flags&=~ui.Computing,v}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~ui.Dirty,this.onCommitted()}onInvalidated(){~this.flags&ui.Overridden&&(this.flags|=ui.Dirty);const t=this._observers;if(t&&t.length>0)for(const i of t)i.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const i=t.slice();for(const r of i)r.onCommitted()}}},bye=class VK{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new VK;return this._values.forEach((r,n)=>{t&&t.has(n)||i.set(n,le(r))}),i}get(t){return this._values.get(t)}originOf(){return dt.USER}keys(){return[...this._values.keys()]}set(t,i){this._values.set(t,i)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function f_(e,t,i){return e!==void 0}function hD(e,t,i,r){return e!==void 0&&(!(i==null&&e.flags&ui.NonNullable)||(r.lifecycle,Ys.INITIALIZING,!1))}let _ye=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=Ys.INITIALIZING,this.store=new bye,this.mutable=!0,this._origin=dt.USER;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const n=new cD(r,i[r]);this.propertiesByName.set(r,n)}this.metadata=i}initialize(){this.lifecycle=Ys.CONSTRUCTING}constructed(){this.lifecycle=Ys.CONSTRUCTED}destroy(){this.lifecycle=Ys.DESTROYED,this.propertiesByName.forEach(t=>t.destroy())}get initialized(){return this.lifecycle!==Ys.INITIALIZING}get(t){const i=this.propertiesByName.get(t);if(i.metadata.get)return i.getComputed(this);this.mutable&&Xe(i);const r=this.store;return r.has(t)?r.get(t):i.metadata.value}originOf(t){const i=this.store.originOf(t);if(i===void 0){const r=this.propertiesByName.get(t);if(r!==void 0&&r.flags&ui.HasDefaultValue)return"defaults"}return g9(i)}has(t){return this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const i=this.propertiesByName.get(t);if(f_(i))return this.store.has(t)?this.store.get(t):i.metadata.value}internalSet(t,i){const r=this.propertiesByName.get(t);f_(r)&&this._internalSet(r,i)}getDependsInfo(t,i,r){const n=this.propertiesByName.get(i);if(!f_(n))return"";const o=new oI,c=Yc(o,()=>{var _;return(_=n.metadata.get)==null?void 0:_.call(t)});let y=`${r}${t.declaredClass.split(".").pop()}.${i}: ${c}
`;const v=o.accessed??new Set;if(v.size===0)return y;r+="  ";for(const _ of v)_ instanceof cD&&(y+=`${r}${_.propertyName}: undefined
`);return y}setAtOrigin(t,i,r){const n=this.propertiesByName.get(t);if(f_(n))return this._setAtOrigin(n,i,r)}isOverridden(t){const i=this.propertiesByName.get(t);return i!==void 0&&!!(i.flags&ui.Overridden)}clearOverride(t){const i=this.propertiesByName.get(t);i&&i.flags&ui.Overridden&&(i.flags&=~ui.Overridden,i.notifyChange())}override(t,i){const r=this.propertiesByName.get(t);if(!hD(r,t,i,this))return;const n=r.metadata.cast;if(n){const o=this._cast(n,i),{valid:c,value:y}=o;if(a$.release(o),!c)return;i=y}r.flags|=ui.Overridden,this._internalSet(r,i)}set(t,i){const r=this.propertiesByName.get(t);if(!hD(r,t,i,this))return;const n=r.metadata.cast;if(n){const c=this._cast(n,i),{valid:y,value:v}=c;if(a$.release(c),!y)return;i=v}const o=r.metadata.set;o?o.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(t){this._origin=Td(t)}getDefaultOrigin(){return g9(this._origin)}notifyChange(t){const i=this.propertiesByName.get(t);i!==void 0&&i.notifyChange()}invalidate(t){const i=this.propertiesByName.get(t);i!==void 0&&i.invalidate()}commit(t){const i=this.propertiesByName.get(t);i!==void 0&&i.commit()}_internalSet(t,i){const r=this.lifecycle!==Ys.INITIALIZING?this._origin:dt.DEFAULTS;this._setAtOrigin(t,i,r)}_setAtOrigin(t,i,r){const n=this.store,o=t.propertyName;n.has(o,r)&&KL(i,n.get(o))&&~t.flags&ui.Overridden&&r===n.originOf(o)||(t.invalidate(),n.set(o,i,r),t.commit(),AK(this.host,t))}_cast(t,i){const r=a$.acquire();return r.valid=!0,r.value=i,t&&(r.value=t.call(this.host,i,r)),r}},Sye=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const a$=new dp(Sye);let xye;function Iye(){return xye}var dD;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(dD||(dD={}));function Tye(e){e.length=0}let Ms=class{constructor(t=50,i=50){this._pool=new dp(Array,void 0,Tye,i,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return l$.acquire()}static release(t){return l$.release(t)}static prune(){l$.prune()}};const l$=new Ms(100);let UK=class extends dp{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const i=super.acquire(...t);return this._set.delete(i),i}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const y_=[];function v9(e){y_.push(e),y_.length===1&&queueMicrotask(()=>{const t=y_.slice();y_.length=0;for(const i of t)i()})}let vb=class{constructor(t,i=30){this.name=t,this._counter=0,this._samples=new Array(i)}push(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}set(t){t!=null&&(this._samples[this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,i)=>t-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,i)=>t+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var SM;(function(e){const t=(o,c,y,v)=>{let _=c,I=c;const $=y>>>1,A=o[_-1];for(;I<=$;){I=_<<1,I<y&&v(o[I-1],o[I])<0&&++I;const k=o[I-1];if(v(k,A)<=0)break;o[_-1]=k,_=I}o[_-1]=A},i=(o,c)=>o<c?-1:o>c?1:0;function r(o,c,y,v){c===void 0&&(c=0),y===void 0&&(y=o.length),v===void 0&&(v=i);for(let I=y>>>1;I>c;I--)t(o,I,y,v);const _=c+1;for(let I=y-1;I>c;I--){const $=o[c];o[c]=o[I],o[I]=$,t(o,_,I,v)}}function*n(o,c,y,v){c===void 0&&(c=0),y===void 0&&(y=o.length),v===void 0&&(v=i);for(let I=y>>>1;I>c;I--)t(o,I,y,v),yield;const _=c+1;for(let I=y-1;I>c;I--){const $=o[c];o[c]=o[I],o[I]=$,t(o,_,I,v),yield}}e.sort=r,e.iterableSort=n})(SM||(SM={}));const pD=SM,$ye=1.5,Eye=1.1;let t0=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new HZ,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>fD(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const i=new Array;for(let r=0;r<this._length;r++){const n=this.data[r];t(n)&&i.push(n)}return i}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,i){const r=this.data.indexOf(t,i);return r!==-1&&r<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let i=t;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,i=t.length){for(let r=0;r<i;r++)this.data[this._length++]=t[r]}fill(t,i){for(let r=0;r<i;r++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,fD(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const i=hM(this.data,t,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(hM(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,i=t.length,r){this.length=o0e(this.data,t,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,i){if(t>=this.length||i>=this.length||t===i)return;const r=this.data[t];this.data[t]=this.data[i],this.data[i]=r}sort(t){pD.sort(this.data,0,this.length,t)}iterableSort(t){return pD.iterableSort(this.data,0,this.length,t)}some(t,i){for(let r=0;r<this.length;++r)if(t.call(i,this.data[r],r,this.data))return!0;return!1}find(t,i){const{data:r,length:n}=this;for(let o=0;o<n;++o)if(t.call(i,r[o]))return r[o]}filterInPlace(t,i){let r=0;for(let n=0;n<this._length;++n){const o=this.data[n];t.call(i,o,n,this.data)&&(this.data[n]=this.data[r],this.data[r]=o,r++)}if(this._deallocator)for(let n=r;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=r,this._shrink(),this}forAll(t,i){const{data:r,length:n}=this;for(let o=0;o<n;++o)t.call(i,r[o],o,r)}forEach(t,i){this.data.slice(0,this.length).forEach(t,i)}map(t,i){const r=new Array(this.length);for(let n=0;n<this.length;++n)r[n]=t.call(i,this.data[n],n,this.data);return r}reduce(t,i){let r=i;for(let n=0;n<this.length;++n)r=t(r,this.data[n],n,this.data);return r}has(t){const i=this.length,r=this.data;for(let n=0;n<i;++n)if(r[n]===t)return!0;return!1}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.data[t]}};function fD(e){e.data.length>$ye*e.length&&(e.data.length=Math.floor(e.length*Eye))}function Mye(e){return{setTimeout:(t,i)=>{const r=e.setTimeout(t,i);return ei(()=>e.clearTimeout(r))}}}const Lg=Mye(globalThis);function aI(e){return Aye(e)||BK(e)}function Aye(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function BK(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function d3(e,t,i){if(!aI(e))throw new TypeError("target is not a Evented or EventTarget object");return BK(e)?Cye(e,t,i):e.on(t,i)}function Cye(e,t,i,r){if(Array.isArray(t)){const n=t.slice();for(const o of n)e.addEventListener(o,i,r);return ei(()=>{for(const o of n)e.removeEventListener(o,i,r)})}return e.addEventListener(t,i,r),ei(()=>e.removeEventListener(t,i,r))}function GK(e,t,i){if(!aI(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,i);const r=d3(e,t,n=>{r.remove(),i.call(e,n)});return r}function Ei(e="Aborted"){return new ne("AbortError",e)}function Gi(e,t="Aborted"){if(Tl(e))throw Ei(t)}function p3(e){return e instanceof AbortSignal?e:(e==null?void 0:e.signal)??void 0}function Tl(e){const t=p3(e);return t!=null&&t.aborted}function bu(e){if(br(e))throw e}function xM(e){if(!br(e))throw e}function Sa(e,t){const i=p3(e);if(i!=null){if(!i.aborted)return GK(i,"abort",()=>t());t()}}function rO(e,t){const i=p3(e);if(i!=null)return Gi(i),GK(i,"abort",()=>t(Ei()))}function nO(e,t){return p3(t)==null?e:new Promise((i,r)=>{let n=Sa(t,()=>r(Ei()));const o=()=>{n=Bi(n)};e.then(o,o),e.then(i,r)})}function br(e){return(e==null?void 0:e.name)==="AbortError"}async function xa(e){try{return await e}catch(t){if(!br(t))throw t;return}}async function eo(e){if(!e)return;if(typeof e.forEach!="function"){const i=Object.keys(e),r=i.map(c=>e[c]),n=await eo(r),o={};return i.map((c,y)=>o[c]=n[y]),o}const t=e;return Promise.allSettled(t).then(i=>Array.from(t,(r,n)=>{const o=i[n];return o.status==="fulfilled"?{promise:r,value:o.value}:{promise:r,error:o.reason}}))}async function kye(e){return(await Promise.allSettled(e)).filter(t=>t.status==="fulfilled").map(t=>t.value)}async function VWe(e){return(await Promise.allSettled(e)).filter(t=>t.status==="rejected").map(t=>t.reason)}function G0(e,t=void 0,i){const r=new AbortController;return Sa(i,()=>r.abort()),new Promise((n,o)=>{let c=setTimeout(()=>{c=0,n(t)},e);Sa(r,()=>{c&&(clearTimeout(c),o(Ei()))})})}function Lye(e,t){const i=new AbortController,r=setTimeout(()=>i.abort(),t);return Sa(e,()=>{i.abort(),clearTimeout(r)}),{...e,signal:i.signal}}function Fu(e){return e&&typeof e.then=="function"}function IM(e){return Fu(e)?e:Promise.resolve(e)}function _l(e,t=-1){let i,r,n,o,c=null;const y=(...v)=>{if(i){r=v,o&&o.reject(Ei()),o=Vo();const A=o.promise;if(c){const k=c;c=null,k.abort()}return A}if(n=o||Vo(),o=null,t>0){const A=new AbortController;i=IM(e(...v,A.signal));const k=i;G0(t).then(()=>{i===k&&(o?A.abort():c=A)})}else i=1,i=IM(e(...v));const _=()=>{const A=r;r=n=i=c=null,A!=null&&y(...A)},I=i,$=n;return I.then(_,_),I.then($.resolve,$.reject),$.promise};return y}function Vo(){let e,t;const i=new Promise((n,o)=>{e=n,t=o}),r=n=>{e(n)};return r.resolve=n=>e(n),r.reject=n=>t(n),r.timeout=(n,o)=>Lg.setTimeout(()=>r.reject(o),n),r.promise=i,r}async function yD(e){await Promise.resolve(),Gi(e)}function UWe(e){return e}function Oye(e){return 1e3*e}function BWe(e){return e}let Rye=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},Pye=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},TM=0;const cv={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},$M=["prepare","preRender","render","postRender","update","finish"],EM=[],S0=new t0;let Nye=class{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};function Fye(){i0!=null&&(cancelAnimationFrame(i0),i0=requestAnimationFrame(sO))}const w9={frameTasks:S0,willDispatch:!1,clearFrameTasks:Dye,dispatch:HK,executeFrameTasks:jye,reschedule:Fye};function f3(e){const t=new Pye(e);return EM.push(t),w9.willDispatch||(w9.willDispatch=!0,v9(HK)),t}function tg(e){const t=new Rye(e);return S0.push(t),i0==null&&(TM=performance.now(),i0=requestAnimationFrame(sO)),new Nye(t)}let i0=null;function Dye(e=!1){S0.forAll(t=>{t.removed=!0}),e&&qK()}function sO(){const e=performance.now();i0=null,i0=S0.length>0?requestAnimationFrame(sO):null,w9.executeFrameTasks(e)}function jye(e){const t=e-TM;TM=e;const i=1e3/60,r=Math.max(0,t-i);cv.time=e,cv.frameDuration=i-r;for(let n=0;n<$M.length;n++){const o=performance.now(),c=$M[n];S0.forAll(y=>{var v;y.paused||y.removed||(n===0&&y.ticks++,y.phases[c]&&(cv.elapsedFrameTime=performance.now()-e,cv.deltaTime=y.ticks===0?0:t,(v=y.phases[c])==null||v.call(y,cv)))}),Uye[n].push(performance.now()-o)}qK(),Bye.push(performance.now()-e)}const m_=new t0;function qK(){S0.forAll(e=>{e.removed&&m_.push(e)}),S0.removeUnorderedMany(m_.data,m_.length),m_.clear()}function HK(){for(;EM.length;){const e=EM.shift();e.isActive&&e.callback()}w9.willDispatch=!1}function zye(e=1,t){const i=Vo(),r=()=>{Tl(t)?i.reject(Ei()):e===0?i():(--e,v9(()=>r()))};return r(),i.promise}function Vye(e){return zye(1,e)}async function lI(e){await Vye(e),await new Promise(t=>requestAnimationFrame(()=>{e!=null&&e.aborted||t()}))}const Uye=$M.map(e=>new vb(e)),Bye=new vb("total");function WK(e,t){for(const i of e.values())if(t(i))return!0;return!1}function b9(e,t){if(!t)return e;for(const i of t)i!=null&&e.add(i);return e}function mD(e,t){return t!=null&&e.add(t),e}function JK(e,t){const i=new Set;return b9(i,e),b9(i,t),i}function Gye(e,t){const i=new Set;for(const r of t)e.has(r)&&i.add(r);return i}function WWe(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const i of e)if(!t.has(i))return!1;return!0}function JWe(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function qye(e,t){const i=new Set(e);for(const r of t)i.delete(r);return i}function Hye(e,t){return qye(JK(e,t),Gye(e,t))}let Wye=0;function HS(){return++Wye}let uI=class extends oI{constructor(t){super(new Jye(t)),this._observer&&gD.register(this,new WeakRef(this._observer),this)}destroy(){var t,i;this._observer&&gD.unregister(this._observer),(t=this.accessed)==null||t.clear(),this.clear(),(i=this._observer)==null||i.destroy()}},Jye=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=Zye}};const gD=new FinalizationRegistry(e=>{var t;(t=e.deref())==null||t.destroy()});function Zye(){}let $1=!1;const _9=[];function ZK(e,t){let i=new uI(o),r=null,n=!1;function o(){if(!i||n)return;if($1)return void XK(o);const y=r;i.clear(),$1=!0,n=!0,r=Yc(i,e),n=!1,$1=!1,t(r,y),QK()}function c(){i&&(i.destroy(),i=null,r=null)}return n=!0,r=Yc(i,e),n=!1,ei(c)}function KK(e,t){let i=new uI(n),r=null;function n(){t(r,c)}function o(){i&&(i.destroy(),i=null),r=null}function c(){return i?(i.clear(),r=Yc(i,e),r):null}return c(),ei(o)}function YK(e,t){let i=!1,r=!1;const n=!!(t!=null&&t.sync);let o=new uI(()=>{i||r||(r=!0,n?c():queueMicrotask(c))});function c(){r=!1,o&&!i&&($1?XK(c):(o.clear(),$1=!0,i=!0,Yc(o,e),i=!1,$1=!1,QK()))}function y(){o&&(o.destroy(),o=null)}return i=!0,Yc(o,e),i=!1,ei(y)}function XK(e){_9.includes(e)||_9.unshift(e)}function QK(){for(;_9.length;)_9.pop()()}var wb;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(wb||(wb={}));let f2=class{constructor(){this.uid=HS(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,i,r,n,o){return this.pool.acquire(wb.Untracked,t,i,r,n,o,KL)}static acquireTracked(t,i,r,n){return this.pool.acquire(wb.Tracked,t,i,r,null,null,n)}notify(t,i){this.type===wb.Untracked?this.callback.call(this.target,t,i,this.path,this.target):this.callback.call(null,t,i,void 0,void 0)}acquire(t,i,r,n,o,c,y){this.uid=HS(),this.removed=!1,this.type=t,this.oldValue=i,this.callback=r,this.getValue=n,this.target=o,this.path=c,this.equals=y}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=HS(),this.removed=!0}};f2.pool=new UK(f2);const WS=new Ms,Gc=new Set;let S9;function x9(e){Gc.delete(e),Gc.add(e),S9||(S9=f3(Xye))}function Kye(e){if(e.removed)return;const t=e.oldValue,i=e.getValue();e.equals(t,i)||(e.oldValue=i,e.notify(i,t))}function Yye(e){for(const t of Gc.values())t.target===e&&(t.removed=!0)}function Xye(){let e=10;for(;S9&&e--;){S9=null;const t=Qye(),i=WS.acquire();for(const r of t){const n=r.uid;Kye(r),n===r.uid&&r.removed&&i.push(r)}for(const r of Gc)r.removed&&(i.push(r),Gc.delete(r));for(const r of i)f2.pool.release(r);WS.release(i),WS.release(t),MM.forEach(r=>r())}}function Qye(){const e=WS.acquire();e.length=Gc.size;let t=0;for(const i of Gc)e[t]=i,++t;return Gc.clear(),e}const MM=new Set;function eme(e){return MM.add(e),ei(()=>MM.delete(e))}function tme(e,t,i){let r=bK(e,t,i,(n,o,c)=>{let y,v,_=KK(()=>u3(n,o),(I,$)=>{var A;((A=n.__accessor__)==null?void 0:A.lifecycle)===Ys.DESTROYED||y&&y.uid!==v?r.remove():(y||(y=f2.acquireUntracked(I,c,$,n,o),v=y.uid),x9(y))});return ei(()=>{_.remove(),y&&(y.uid!==v||y.removed||(y.removed=!0,x9(y)),y=null),r=_=null})});return r}function ime(e,t,i){const r=bK(e,t,i,(n,o,c)=>{let y=!1;return ZK(()=>u3(n,o),(v,_)=>{n.__accessor__.lifecycle!==Ys.DESTROYED?y||(y=!0,KL(_,v)||c.call(n,v,_,o,n),y=!1):r.remove()})});return r}function rme(e,t,i,r=!1){return e.__accessor__&&e.__accessor__.lifecycle!==Ys.DESTROYED?r?ime(e,t,i):tme(e,t,i):ei()}function nme(e,t,i){let r,n,o=KK(e,(c,y)=>{r&&r.uid!==n?o.remove():(r||(r=f2.acquireTracked(c,t,y,i),n=r.uid),x9(r))});return ei(()=>{o.remove(),r&&(r.uid!==n||r.removed||(r.removed=!0,x9(r)),r=null),o=null})}function sme(e,t,i){let r=!1;return ZK(e,(n,o)=>{r||(r=!0,i(o,n)||t(n,o),r=!1)})}function ome(e,t,i=!1,r=cK){return i?sme(e,t,r):nme(e,t,r)}function vD(e){return WK(Gc,t=>t.oldValue===e)}var eY,tY;function ame(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return(t=e.constructor)!=null&&t.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const jl=Symbol("Accessor-Handles"),AM=Symbol("Accessor-Initialized");let Ve=class JS{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:n}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const o=this;class c extends o{constructor(...v){super(...v),this.inherited=null,n&&n.apply(this,v)}}c3(c.prototype);for(const y in t){const v=t[y];c.prototype[y]=typeof v=="function"?function(..._){const I=this.inherited;let $;this.inherited=function(...A){if(o.prototype[y])return o.prototype[y].apply(this,A)};try{$=v.apply(this,_)}catch(A){throw this.inherited=I,A}return this.inherited=I,$}:t[y]}for(const y in i){const v=ame(i[y]);w(v)(c.prototype,y)}return H(r)(c)}static freeze(t){return t instanceof JS?t.__accessor__.mutable=!1:Object.freeze(t),t}static isFrozen(t){return t instanceof JS?!t.__accessor__.mutable:Object.isFrozen(t)}constructor(...t){var r;if(this[eY]=null,this[tY]=!1,this.constructor===JS)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new _ye(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),t.length>0&&(i.ctorArgs=((r=this.normalizeCtorArgs)==null?void 0:r.apply(this,t))??t[0])}postscript(){const t=this.__accessor__,i=t.ctorArgs;t.initialize(),i&&(this.set(i),t.ctorArgs=null),t.constructed(),this.initialize(),this[AM]=!0}initialize(){}[$K](){this[jl]=ci(this[jl])}destroy(){var t;this.destroyed||(Yye(this),this.__accessor__.destroy(),(t=Iye())==null||t.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[AM]}get destroyed(){var t;return((t=this.__accessor__)==null?void 0:t.lifecycle)===Ys.DESTROYED||!1}commitProperty(t){hs(this,t)}get(t){return jK(_e.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),hs(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,i){return d9(this,t,i),this}watch(t,i,r){return rme(this,t,i,r)}addHandles(t,i){if(this.destroyed){const r=Array.isArray(t)?t:[t];for(const n of r)n.remove();return}(this[jl]??(this[jl]=new kg)).add(t,i)}removeHandles(t){var i;(i=this[jl])==null||i.remove(t)}removeAllHandles(){var t;(t=this[jl])==null||t.removeAll()}removeHandlesReference(t){var i;(i=this[jl])==null||i.removeReference(t)}hasHandles(t){var i;return((i=this[jl])==null?void 0:i.has(t))===!0}_override(t,i){i===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,i){i==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,i){return this.__accessor__.internalSet(t,i),this}};eY=jl,tY=AM;let lme=class iY{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new iY;return this._values.forEach((r,n)=>{t&&t.has(n)||i.set(n,le(r.value),r.origin)}),i}get(t,i){i=this._normalizeOrigin(i);const r=this._values.get(t);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(t){var i;return((i=this._values.get(t))==null?void 0:i.origin)??dt.USER}keys(t){t=this._normalizeOrigin(t);const i=[...this._values.keys()];return t==null?i:i.filter(r=>{var n;return((n=this._values.get(r))==null?void 0:n.origin)===t})}set(t,i,r){if((r=this._normalizeOrigin(r))===dt.DEFAULTS){const n=this._values.get(t);if((n==null?void 0:n.origin)!=null&&n.origin>r)return}this._values.set(t,new ume(i,r))}delete(t,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(t))==null?void 0:r.origin)!==i||this._values.delete(t)}has(t,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(t))==null?void 0:r.origin)===i:this._values.has(t)}forEach(t){this._values.forEach(({value:i},r)=>t(i,r))}_normalizeOrigin(t){if(t!=null)return t===dt.DEFAULTS?t:dt.USER}},ume=class{constructor(t,i){this.value=t,this.origin=i}};function rY(e,t,i){t.keys().forEach(n=>{i.set(n,t.get(n),dt.DEFAULTS)});const r=e.metadata;Object.keys(r).forEach(n=>{e.internalGet(n)&&i.set(n,e.internalGet(n),dt.DEFAULTS)})}function cme(e,t,i){if(!(e!=null&&e.read)||e.read.enabled===!1||!e.read.source)return!1;const r=e.read.source;if(typeof r=="string"){if(r===t||r.includes(".")&&r.indexOf(t)===0&&XF(r,i))return!0}else for(const n of r)if(n===t||n.includes(".")&&n.indexOf(t)===0&&XF(n,i))return!0;return!1}function hme(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function dme(e,t,i,r,n){let o=vM(t[i],n);hme(o)&&(e[i]=!0);for(const c of Object.getOwnPropertyNames(t))o=vM(t[c],n),cme(o,i,r)&&(e[c]=!0)}function pme(e,t,i,r){const n=i.metadata,o=nye(n[t],r),c=o==null?void 0:o.default;if(c===void 0)return;const y=typeof c=="function"?c.call(e,t,r):c;y!==void 0&&i.set(t,y)}const nY={origin:"service"};function sY(e,t,i=nY){if(!t||typeof t!="object")return;const r=uo(e),n=r.metadata,o={};for(const c of Object.getOwnPropertyNames(t))dme(o,n,c,t,i);r.setDefaultOrigin(i.origin);for(const c of Object.getOwnPropertyNames(o)){const y=vM(n[c],i).read,v=y==null?void 0:y.source;let _;_=v&&typeof v=="string"?u3(t,v):t[c],y!=null&&y.reader&&(_=y.reader.call(e,_,t,i)),_!==void 0&&r.set(c,_)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const c of Object.getOwnPropertyNames(n))o[c]||pme(e,c,r,i)}r.setDefaultOrigin("user")}function oY(e,t,i,r=nY){var o;const n={...r,messages:[]};i(n),(o=n.messages)==null||o.forEach(c=>{c.type!=="warning"||e.loaded?r!=null&&r.messages&&r.messages.push(c):e.loadWarnings.push(c)})}function fme(e,t,i,r,n){var c,y;const o={};return(y=(c=t.write)==null?void 0:c.writer)==null||y.call(e,r,o,i,n),o}function aY(e,t,i,r,n,o){if(!(r!=null&&r.write))return!1;const c=hs(e,i);if(!n&&r.write.overridePolicy){const y=r.write.overridePolicy.call(e,c,i,o??void 0);y!==void 0&&(n=y)}if(n||(n=r.write),!n||n.enabled===!1||n.layerContainerTypes&&(o!=null&&o.layerContainerType)&&!n.layerContainerTypes.includes(o.layerContainerType))return!1;if((c===null&&!n.allowNull&&!n.writerEnsuresNonNull||c===void 0)&&n.isRequired){const y=new ne("web-document-write:property-required",`Missing value for required property '${i}' on '${e.declaredClass}'`,{propertyName:i,target:e});return y&&(o!=null&&o.messages)?o.messages.push(y):y&&!o&&_e.getLogger("esri.core.accessorSupport.write").error(y.name,y.message),!1}return!(c===void 0||c===null&&!n.allowNull&&!n.writerEnsuresNonNull||!n.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(i)===dt.DEFAULTS)&&yme(e,i,o,r,c)||!n.ignoreOrigin&&(o!=null&&o.origin)&&t.store.multipleOriginsSupported&&t.store.originOf(i)<Td(o.origin))}function yme(e,t,i,r,n){const o=r.default;if(o===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(n);if(typeof o=="function"){if(Array.isArray(n)){const c=o.call(e,t,i??void 0);return tI(c,n)}return!1}return o===n}function mme(e,t,i,r){const n=uo(e),o=n.metadata,c=FK(o[t],r);return!!c&&aY(e,n,t,c,i,r)}function lY(e,t,i){var o,c;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return BS(t,e.toJSON(i));const r=uo(e),n=r.metadata;for(const y in n){const v=FK(n[y],i);if(!aY(e,r,y,v,void 0,i))continue;const _=hs(e,y),I=fme(e,v,v.write&&typeof v.write.target=="string"?v.write.target:y,_,i);Object.keys(I).length>0&&(t=BS(t,I),(c=(o=i==null?void 0:i.resources)==null?void 0:o.pendingOperations)!=null&&c.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>BS(t,I,()=>"replace-arrays"))),i!=null&&i.writtenProperties&&i.writtenProperties.push({target:e,propName:y,oldOrigin:wye(r.store.originOf(y)),newOrigin:i.origin}))}return t}const Og=e=>{let t=class extends e{constructor(...i){super(...i);const r=uo(this),n=r.store,o=new lme;r.store=o,rY(r,n,o)}read(i,r){sY(this,i,r)}write(i,r){return lY(this,i??{},r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return gme.call(this,i,r)}};return t=m([H("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function gme(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(e,t),i}function I9(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}let be=class extends Og(Ve){};be=m([H("esri.core.JSONSupport")],be);function ke(e,t,i){let r,n;return t===void 0||Array.isArray(t)?(n=e,i=t,r=[void 0]):(n=t,r=Array.isArray(e)?e:[e]),(o,c)=>{const y=o.constructor.prototype;r.forEach(v=>{const _=TK(o,v,n);_.read&&typeof _.read=="object"||(_.read={}),_.read.reader=y[c],i&&(_.read.source=(_.read.source||[]).concat(i))})}}let ft=class{constructor(t,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=vme(t),this.apiValues=wD(this._apiToJSON),this.jsonValues=wD(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,n,o)=>{const c=this.toJSON(r);c!==void 0&&Qr(o,c,n)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const i=this._apiToJSON[t];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}};function vme(e){const t={};for(const i in e)t[e[i]]=i;return t}function wD(e){const t=[];for(const i in e)t.push(i);return t.sort(),t}function nn(){return function(e,t){return new ft(e,{ignoreUnknown:!0,...t})}}let oO=class{constructor(t,i,r,n,o,c){this.semiMajorAxis=t,this.flattening=i,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=n,this.scaleHeight=o;const y=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*y,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=c||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const ur=new oO(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),Eu=new oO(3396190,1/169.8944472236118,23e4,6e4,.111),Xd=new oO(1737400,0,0,0,0),wme=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,bme={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function bD(e){const t=e==null?void 0:e.match(wme);if(!t)return null;const[,i,r,n]=t;if(!i)return null;let o=null,c=null,y=null;const{devext:v,qaext:_,www:I}=bme;if(r)if(o=i,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:c,portalHostname:y}=v);break;case"qa":({customBaseUrl:c,portalHostname:y}=_);break;default:return null}else({customBaseUrl:c,portalHostname:y}=I);else switch(i.toLowerCase()){case"devext":({customBaseUrl:c,portalHostname:y}=v);break;case"qaext":({customBaseUrl:c,portalHostname:y}=_);break;case"www":({customBaseUrl:c,portalHostname:y}=I);break;default:return null}return{customBaseUrl:c,isPortal:!1,portalHostname:y,urlKey:o}}function _me(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function uY(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):i.test(e)?e=e.replace(i,"https://devext.arcgis.com"):r.test(e)&&(e=e.replace(r,"https://qaext.arcgis.com")),e}function cY(e){const t=atob(e),i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i.buffer}function Sme(e){const t=new Uint8Array(e);let i="";for(let r=0;r<t.length;r++)i+=String.fromCharCode(t[r]);return btoa(i)}const xme=()=>_e.getLogger("esri.core.urlUtils"),Rg=qt.request,_D="esri/config: esriConfig.request.proxyUrl is not set.",hY=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,dY=/^\s*http:/i,Ime=/^\s*https:/i,Tme=/^\s*file:/i,$me=/:\d+$/,Eme=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,Mme=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),Ame=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let Gd=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(Mme);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(Ame),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const g_={},Cme=new Gd(qt.applicationUrl);let us=Cme;const kme=Lme();let aO=kme;const lO=()=>us,rJe=()=>aO;function Lme(){const e=us.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${`${us.scheme}://${us.host}${us.port!=null?`:${us.port}`:""}`}${t}`}function cr(e){if(!e)return null;const t={path:null,query:null},i=new Gd(e),r=e.indexOf("?");return i.query===null?t.path=e:(t.path=e.slice(0,r),t.query=uO(i.query)),i.fragment&&(t.hash=i.fragment,i.query===null&&(t.path=t.path.slice(0,t.path.length-(i.fragment.length+1)))),t}function uO(e){const t=e.split("&"),i={};for(const r of t){if(!r)continue;const n=r.indexOf("=");let o,c;n<0?(o=decodeURIComponent(r),c=""):(o=decodeURIComponent(r.slice(0,n)),c=decodeURIComponent(r.slice(n+1)));let y=i[o];typeof y=="string"&&(y=i[o]=[y]),Array.isArray(y)?y.push(c):i[o]=c}return i}function y2(e,t){return e?Object.keys(e).map(i=>{const r=e[i];if(r==null)return"";const n=encodeURIComponent(i)+"=",o=t==null?void 0:t[i];return o?n+encodeURIComponent(o(r)):Array.isArray(r)?r.map(c=>I9(c)?n+encodeURIComponent(JSON.stringify(c)):n+encodeURIComponent(c)).join("&"):I9(r)?n+encodeURIComponent(JSON.stringify(r)):n+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function pY(e=!1){let t,i=Rg.proxyUrl;if(typeof e=="string"){t=gY(e);const r=cI(e);r&&(i=r.proxyUrl)}else t=!!e;if(!i)throw xme().warn(_D),new ne("urlUtils:proxy-not-set",_D);return t&&kM()&&(i=fO(i)),cr(i)}function nJe(e,t=!1){const i=cI(e);let r,n;if(i){const o=cO(i.proxyUrl);r=o.path,n=o.query?uO(o.query):null}else if(t){const o=pY(e);r=o.path,n=o.query}if(r){const o=cr(e);e=r+"?"+o.path;const c=y2({...n,...o.query});c&&(e=`${e}?${c}`)}return e}const hv={path:"",query:""};function cO(e){const t=e.indexOf("?");return t!==-1?(hv.path=e.slice(0,t),hv.query=e.slice(t+1)):(hv.path=e,hv.query=null),hv}function fY(e){return e=(e=$9(e=Ume(e=cO(e).path),!0)).toLowerCase()}function Ome(e){const t={proxyUrl:e.proxyUrl,urlPrefix:fY(e.urlPrefix)},i=Rg.proxyRules,r=t.urlPrefix;let n=i.length;for(let o=0;o<i.length;o++){const c=i[o].urlPrefix;if(r.indexOf(c)===0){if(r.length===c.length)return-1;n=o;break}c.indexOf(r)===0&&(n=o+1)}return i.splice(n,0,t),n}function cI(e){const t=Rg.proxyRules,i=fY(e);for(let r=0;r<t.length;r++)if(i.indexOf(t[r].urlPrefix)===0)return t[r]}function Rme(e,t){if(!e||!t)return!1;e=T9(e),t=T9(t);const i=bD(e),r=bD(t);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&ig(e,t,!0)}function yY(e,t){return e=T9(e),t=T9(t),$9(e)===$9(t)}function T9(e){const t=(e=Ia(e)).indexOf("/sharing");return t>0?e.slice(0,t):e.replace(/\/+$/,"")}function CM(e,t=Rg.interceptors){const i=r=>r==null||r instanceof RegExp&&r.test(e)||typeof r=="string"&&e.startsWith(r);if(t){for(const r of t)if(Array.isArray(r.urls)){if(r.urls.some(i))return r}else if(i(r.urls))return r}return null}function ig(e,t,i=!1){if(!e||!t)return!1;const r=OM(e),n=OM(t);return!(!i&&r.scheme!==n.scheme)&&r.host!=null&&n.host!=null&&r.host.toLowerCase()===n.host.toLowerCase()&&r.port===n.port}function hO(e){if(typeof e=="string"){if(!Fo(e))return!0;e=OM(e)}if(ig(e,us))return!0;const t=Rg.trustedServers||[];for(let i=0;i<t.length;i++){const r=Pme(t[i]);for(let n=0;n<r.length;n++)if(ig(e,r[n]))return!0}return!1}function Pme(e){return g_[e]||(pO(e)||ku(e)?g_[e]=[new Gd(Xs(e))]:g_[e]=[new Gd(`http://${e}`),new Gd(`https://${e}`)]),g_[e]}function Xs(e,t=aO,i){return ku(e)?i!=null&&i.preserveProtocolRelative?e:us.scheme==="http"&&us.authority===Ta(e).slice(2)?`http:${e}`:`https:${e}`:pO(e)?e:x0(e[0]==="/"?Vme(t):t,e)}function dO(e,t=aO,i){if(e==null||!Fo(e))return e;const r=Ia(e),n=r.toLowerCase(),o=Ia(t).toLowerCase().replace(/\/+$/,""),c=i?Ia(i).toLowerCase().replace(/\/+$/,""):null;if(c&&o.indexOf(c)!==0)return e;const y=($,A,k)=>(k=$.indexOf(A,k))===-1?$.length:k;let v=y(n,"/",n.indexOf("//")+2),_=-1;for(;n.slice(0,v+1)===o.slice(0,v)+"/"&&(_=v+1,v!==n.length);)v=y(n,"/",v+1);if(_===-1||c&&_<c.length)return e;e=r.slice(_);const I=o.slice(_-1).replaceAll(/[^/]+/g,"").length;if(I>0)for(let $=0;$<I;$++)e=`../${e}`;else e=`./${e}`;return e}function Ia(e){return e=qme(e=Gme(e=Bme(e=Xs(e=e.trim()))))}function x0(...e){const t=e.filter(Ar);if(!(t!=null&&t.length))return;const i=[];if(Fo(t[0])){const n=t[0],o=n.indexOf("//");o!==-1&&(i.push(n.slice(0,o+1)),jme(t[0])&&(i[0]+="/"),t[0]=n.slice(o+2))}else t[0][0]==="/"&&i.push("");const r=t.reduce((n,o)=>o?n.concat(o.split("/")):n,[]);for(let n=0;n<r.length;n++){const o=r[n];o===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!o&&n===r.length-1||o&&(o!=="."||i.length===0))&&i.push(o)}return i.join("/")}function Ta(e,t=!1){if(e==null||hI(e)||ih(e))return null;let i=e.indexOf("://");if(i===-1&&ku(e))i=2;else{if(i===-1)return null;i+=3}const r=e.indexOf("/",i);return r!==-1&&(e=e.slice(0,r)),t&&(e=$9(e,!0)),e}function Fo(e){return ku(e)||pO(e)}function hI(e){return e!=null&&e.slice(0,5)==="blob:"}function ih(e){return e!=null&&e.slice(0,5)==="data:"}function Nme(e){const t=I0(e);return t!=null&&t.isBase64?cY(t.data):null}function sJe(e){return Sme(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const Fme=/^data:(.*?)(;base64)?,(.*)$/;function I0(e){const t=e.match(Fme);if(!t)return null;const[,i,r,n]=t;return{mediaType:i,isBase64:!!r,data:n}}function mY(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function oJe(e){return(await fetch(e)).blob()}function aJe(e){const t=Nme(e);if(!t)return null;const i=I0(e);return new Blob([t],{type:i.mediaType})}function ku(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function pO(e){return e!=null&&hY.test(e)}function gY(e){return e!=null&&Ime.test(e)||us.scheme==="https"&&ku(e)}function Dme(e){return e!=null&&dY.test(e)||us.scheme==="http"&&ku(e)}function jme(e){return e!=null&&Tme.test(e)}function fO(e){return ku(e)?`https:${e}`:e.replace(dY,"https:")}function zme(){return us.scheme==="http"}function kM(){return us.scheme==="https"}function $9(e,t=!1){return ku(e)?e.slice(2):(e=e.replace(hY,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function Vme(e){const t=e.indexOf("//"),i=e.indexOf("/",t+2);return i===-1?e:e.slice(0,i)}function yO(e){let t=0;if(Fo(e)){const r=e.indexOf("//");r!==-1&&(t=r+2)}const i=e.lastIndexOf("/");return i<t?e:e.slice(0,i+1)}function lJe(e,t){if(!e)return"";const i=cr(e).path.replace(/\/+$/,""),r=i.slice(i.lastIndexOf("/")+1);if(!(t!=null&&t.length))return r;const n=new RegExp(`\\.(${t.join("|")})$`,"i");return r.replace(n,"")}function Ume(e){return e.endsWith("/")?e:`${e}/`}function vY(e){return e.replace(/\/+$/,"")}function Bme(e){if(/^https?:\/\//i.test(e)){const t=cO(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function Gme(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function qme(e){const t=Rg.httpsDomains;if(!Dme(e))return e;const i=e.indexOf("/",7);let r;if(r=i===-1?e:e.slice(0,i),r=r.toLowerCase().slice(7),$me.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return zme()&&r===us.authority&&!Eme.test(e)||(kM()&&r===us.authority||t&&t.some(n=>r===n||r.endsWith(`.${n}`))||kM()&&!cI(e))&&(e=fO(e)),e}function LM(e,t,i){if(!(t&&i&&e&&Fo(e)))return e;const r=e.indexOf("//"),n=e.indexOf("/",r+2),o=e.indexOf(":",r+2),c=Math.min(n<0?e.length:n,o<0?e.length:o);return e.slice(r+2,c).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,r+2)}${i}${e.slice(c)}`}function OM(e){return typeof e=="string"?new Gd(Xs(e)):(e.scheme||(e.scheme=us.scheme),e)}function uJe(e){return Hme.test(e)}function wY(e,t){const i=cr(e),r=Object.keys(i.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function bY(e,t,i){const r=cr(e),n=r.query||{};return n[t]=String(i),`${r.path}?${y2(n)}`}function ZS(e,t){if(!t)return e;const i=cr(e),r=i.query||{};for(const[o,c]of Object.entries(t))c!=null&&(r[o]=c);const n=y2(r);return n?`${i.path}?${n}`:i.path}function cJe(e){if(e==null)return null;const t=e.match(_Y);return t?t[2]:null}function SD(e){if(e==null)return null;const t=e.match(_Y);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function hJe(e){return typeof e=="string"?I0(e)??{data:e}:new Promise((t,i)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(I0(r.result)),r.onerror=n=>i(n)})}const _Y=/([^.]*)\.([^/]*)$/,Hme=/(^data:image\/svg|\.svg$)/i,SY="20241122",xY="f6f7099a0e79cf518abdcf87c5aa8b6f24ecdcd8";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const IY="4.31";let _t,mO=IY;mO="4.31.6";function dJe(e){_t=e}function Wme(e){const t=_t==null?void 0:_t.findCredential(e);return t!=null&&t.token?bY(e,"token",t.token):e}we("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),we("host-webworker");const Jme=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function Zme(e){const t=Ta(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!Jme.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function TY(e,t){return!(!qt.apiKey||!Zme(e))}function Kme(e,t,i=!1,r){return new Promise((n,o)=>{if(Tl(r))return void o(xD());let c=()=>{_(),o(new Error(`Unable to load ${t}`))},y=()=>{const I=e;_(),n(I)},v=()=>{if(!e)return;const I=e;_(),I.src="",o(xD())};const _=()=>{we("esri-image-decode")||(e.removeEventListener("error",c),e.removeEventListener("load",y)),c=null,y=null,e=null,r!=null&&r.removeEventListener("abort",v),v=null,i&&URL.revokeObjectURL(t)};r!=null&&r.addEventListener("abort",v),we("esri-image-decode")?e.decode().then(y,c):(e.addEventListener("error",c),e.addEventListener("load",y))})}function xD(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const $Y="Timeout exceeded";function Yme(){return new Error($Y)}function pJe(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===$Y}function Xme(e){qt.request.crossOriginNoCorsDomains||(qt.request.crossOriginNoCorsDomains={});const t=qt.request.crossOriginNoCorsDomains;for(let i of e)i=i.toLowerCase(),/^https?:\/\//.test(i)?t[Ta(i)??""]=0:(t[Ta("http://"+i)??""]=0,t[Ta("https://"+i)??""]=0)}function Qme(e){const t=qt.request.crossOriginNoCorsDomains;if(t){let i=Ta(e);if(i)return i=i.toLowerCase(),!ig(i,lO())&&t[i]<Date.now()-36e5}return!1}async function e1e(e){var n;const t=cr(e);e=t.path,((n=t.query)==null?void 0:n.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}const i=qt.request.crossOriginNoCorsDomains,r=Ta(e);i&&r&&(i[r.toLowerCase()]=Date.now())}async function Et(e,t){var A;e instanceof URL&&(e=e.toString()),(t==null?void 0:t.query)instanceof URLSearchParams&&(t.query=uO(t.query.toString().replaceAll("+"," ")));const i=ih(e),r=hI(e);r||i||(e=Ia(e));const n={url:e,requestOptions:{...t}},o=k=>({data:k,getAllHeaders:rg,getHeader:rg,httpStatus:200,requestOptions:n.requestOptions,url:n.url}),c=CM(e,pa.internalInterceptors);if(c){const k=await TD(c,n);if(k!=null)return o(k)}let y=CM(e);if(y){const k=await TD(y,n);if(k!=null)return o(k);y.after||y.error||(y=null)}if(e=n.url,(t=n.requestOptions).responseType==="image"&&(we("host-webworker")||we("host-node")))throw Mu("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n);if(t.method==="head"){if(t.body)throw Mu("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(i||r)throw Mu("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await s1e(),E9)return E9.execute(e,t);const v=new AbortController,_=Sa(t,()=>v.abort()),I={controller:v,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:y,params:n,redoRequest:!1,useIdentity:pa.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},$=await u1e(I).finally(()=>_==null?void 0:_.remove());return(A=y==null?void 0:y.after)==null||A.call(y,$),$}let E9;const pa=qt.request,EY="FormData"in globalThis,t1e=new Set([499,498,403,401]),i1e=new Set(["COM_0056","COM_0057","SB_0008"]),r1e=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],rg=()=>null,M9=Symbol();function n1e(e){const t=Ta(e);t&&!Et._corsServers.includes(t)&&Et._corsServers.push(t)}function ID(e){const t=Ta(e);return!t||t.endsWith(".arcgis.com")||Et._corsServers.includes(t)||hO(t)}function Mu(e,t,i,r){let n="Error";const o={url:i.url,requestOptions:i.requestOptions,getAllHeaders:rg,getHeader:rg,ssl:!1};if(t instanceof ne)return t.details?(t.details=le(t.details),t.details.url=i.url,t.details.requestOptions=i.requestOptions):t.details=o,t;if(t){const c=r&&(()=>Array.from(r.headers)),y=r&&(I=>r.headers.get(I)),v=r==null?void 0:r.status,_=t.message;_&&(n=_),c&&y&&(o.getAllHeaders=c,o.getHeader=y),o.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||v||0,o.subCode=t.subcode,o.messageCode=t.messageCode,typeof t.details=="string"?o.messages=[t.details]:o.messages=t.details,o.raw=M9 in t?t[M9]:t}return br(t)?Ei():new ne(e,n,o)}async function s1e(){we("host-webworker")&&!E9&&(E9=await de(()=>import("./request-B656wflP.js"),[],import.meta.url))}async function RM(){_t||await de(()=>import("./IdentityManager-B3Y3HgL5.js"),[],import.meta.url)}async function o1e(e){var y;const t=e.params.url,i=e.params.requestOptions,r=e.controller.signal,n=i.body;let o=null,c=null;if(EY&&"HTMLFormElement"in globalThis&&(n instanceof FormData?o=n:n instanceof HTMLFormElement&&(o=new FormData(n))),typeof n=="string"&&(c=n),e.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:pa.priority,redirect:"follow",signal:r},(o||c)&&(e.fetchOptions.body=o||c),i.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||(y=i.query)!=null&&y.token||o!=null&&o.get("token")),!e.hasToken&&TY(t)&&(i.query||(i.query={}),i.query.token=qt.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!MY(t)&&!Tl(r)){let v;i.authMode==="immediate"?(await RM(),v=await _t.getCredential(t,{signal:r}),e.credential=v):i.authMode==="no-prompt"?(await RM(),v=await _t.getCredential(t,{prompt:!1,signal:r}).catch(()=>{}),e.credential=v):_t&&(v=_t.findCredential(t)),v&&(e.credentialToken=v.token,e.useSSL=!!v.ssl)}}function MY(e){return r1e.some(t=>t.test(e))}async function a1e(e){let t=e.params.url;const i=e.params.requestOptions,r=e.fetchOptions??{},n=hI(t)||ih(t),o=i.responseType||"json",c=n?0:i.timeout!=null?i.timeout:pa.timeout;let y=!1;if(!n){e.useSSL&&(t=fO(t));let A={...i.query};e.credentialToken&&(A.token=e.credentialToken);let k=y2(A);we("esri-url-encodes-apostrophe")&&(k=k.replaceAll("'","%27"));const R=t.length+1+k.length;let N;y=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||R>pa.maxUrlLength;const D=i.useProxy||!!cI(t);if(D){const j=pY(t);N=j.path,!y&&N.length+1+R>pa.maxUrlLength&&(y=!0),j.query&&(A={...j.query,...A})}if(r.method==="HEAD"&&(y||D)){if(y)throw R>pa.maxUrlLength?Mu("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):Mu("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(D)throw Mu("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(y?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?t=ZS(t,A):(r.body=y2(A),r.headers||(r.headers={}),r.headers["Content-Type"]="application/x-www-form-urlencoded")):t=ZS(t,A),D&&(e.useProxy=!0,t=`${N}?${t}`),A.token&&EY&&r.body instanceof FormData&&!_me(t)&&r.body.set("token",A.token),i.hasOwnProperty("withCredentials"))e.withCredentials=i.withCredentials;else if(!ig(t,lO())){if(hO(t))e.withCredentials=!0;else if(_t){const j=_t.findServerInfo(t);j!=null&&j.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(r.credentials="include",Qme(t)&&await e1e(y?ZS(t,A):t))}let v,_,I=0,$=!1;c>0&&(I=setTimeout(()=>{$=!0,e.controller.abort()},c));try{if(i.responseType==="native-request-init")_=r,_.url=t,i.signal?_.signal=i.signal:delete _.signal;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||y||l1e(i.headers)||!n&&!e.useProxy&&pa.proxyUrl&&!ID(t)){if(Et._beforeFetch&&await Et._beforeFetch(t,r),v=await fetch(t,r),Et._afterFetch&&await Et._afterFetch(v),e.useProxy||n1e(t),i.responseType==="native")_=v;else if(r.method!=="HEAD")if(v.ok){switch(o){case"array-buffer":_=await v.arrayBuffer();break;case"blob":case"image":_=await v.blob();break;default:_=await v.text()}if(I&&(clearTimeout(I),I=0),o==="json"||o==="xml"||o==="document")if(_)switch(o){case"json":_=JSON.parse(_);break;case"xml":_=$D(_,"application/xml");break;case"document":_=$D(_,"text/html")}else _=null;if(_){if(o==="array-buffer"||o==="blob"){const A=v.headers.get("Content-Type");if(A&&/application\/json|text\/plain/i.test(A)&&_[o==="blob"?"size":"byteLength"]<=750)try{const k=await new Response(_).json();k.error&&(_=k)}catch{}}o==="image"&&_ instanceof Blob&&(_=await ED(URL.createObjectURL(_),e,!0))}}else{_=await v.text();try{_=JSON.parse(_)}catch{}}}else _=await ED(t,e)}catch(A){if(A.name==="AbortError")throw $?Yme():Ei("Request canceled");if(!(!v&&A instanceof TypeError&&pa.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||e.useProxy||ID(t))throw A;e.redoRequest=!0,Ome({proxyUrl:pa.proxyUrl,urlPrefix:Ta(t)??""})}finally{I&&clearTimeout(I)}return[v,_]}async function TD(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let i,r;try{r=await e.before(t)}catch(n){i=Mu("request:interceptor",n,t)}if((r instanceof Error||r instanceof ne)&&(i=Mu("request:interceptor",r,t)),i)throw e.error&&e.error(i),i;return r}}function l1e(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function $D(e,t){let i;try{i=new DOMParser().parseFromString(e,t)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function u1e(e){var o,c;let t,i;await o1e(e);try{do[t,i]=await a1e(e);while(!await c1e(e,t,i))}catch(y){const v=Mu("request:server",y,e.params,t);throw v.details.ssl=e.useSSL,(o=e.interceptor)!=null&&o.error&&e.interceptor.error(v),v}const r=e.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!e.hasToken&&!e.credentialToken&&((c=i.user)!=null&&c.username)&&!hO(r)){const y=Ta(r,!0);y&&pa.trustedServers.push(y)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&Xme(i.authorizedCrossOriginNoCorsDomains)}const n=e.credential;if(n&&_t){const y=_t.findServerInfo(n.server);let v=y==null?void 0:y.owningSystemUrl;if(v){v=v.replace(/\/?$/,"/sharing");const _=_t.findCredential(v,n.userId);_&&_t._getIdenticalSvcIdx(v,_)===-1&&_.resources.unshift(v)}}return{data:i,getAllHeaders:t?()=>Array.from(t.headers):rg,getHeader:t?y=>t.headers.get(y):rg,httpStatus:(t==null?void 0:t.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function c1e(e,t,i){var _;if(e.redoRequest)return e.redoRequest=!1,!1;const r=e.params.requestOptions;if(!t||r.responseType==="native"||r.responseType==="native-request-init")return!0;let n,o;if(i&&(i.error&&typeof i.error=="object"?n=i.error:i.status==="error"&&Array.isArray(i.messages)&&(n={...i},n[M9]=i,n.details=i.messages)),!n&&!t.ok)throw n=new Error(`Unable to load ${t.url} status: ${t.status}`),n[M9]=i,n;let c,y=null;n&&(o=Number(n.code),y=n.hasOwnProperty("subcode")?Number(n.subcode):null,c=n.messageCode,c=c==null?void 0:c.toUpperCase());const v=r.authMode;if(o===403&&(y===4||(_=n.message)!=null&&_.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(v!=="no-prompt"||o===498)&&o!==void 0&&t1e.has(o)&&!MY(e.params.url)&&(o!==403||(!c||!i1e.has(c))&&(y==null||y===2&&e.credentialToken))){await RM();try{const I=await _t.getCredential(e.params.url,{error:Mu("request:server",n,e.params),prompt:v!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=I,e.credentialToken=I.token,e.useSSL=e.useSSL||I.ssl,!1}catch(I){if(v==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;n=I}}if(n)throw n;return!0}function ED(e,t,i=!1){const r=t.controller.signal,n=new Image;return t.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=pa.priority,n.src=e,Kme(n,e,i,r)}Et._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],Et._beforeFetch=void 0,Et._afterFetch=void 0;function jt(e){if(!qt.assetsPath)throw _e.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new ne("assets:path-not-set","config.assetsPath is not set");return x0(qt.assetsPath,e)}let u$,pe=null;function gO(){return!!pe}function h1e(){return!!we("esri-wasm")}function AY(){return u$||(u$=de(()=>import("./pe-wasm-BLiqFWpd.js"),[],import.meta.url).then(e=>e.p).then(({default:e})=>e({locateFile:t=>jt(`esri/geometry/support/${t}`)})).then(e=>{LY(e)}),u$)}var PM,Vi;(function(e){function t(o,c,y){pe.ensureCache.prepare();const v=Of(y),_=y===v,I=pe.ensureFloat64(v),$=pe._pe_geog_to_proj(pe.getPointer(o),c,I);return $&&wd(y,c,I,_),$}function i(o,c,y,v){switch(v){case Vi.PE_TRANSFORM_P_TO_G:return r(o,c,y);case Vi.PE_TRANSFORM_G_TO_P:return t(o,c,y)}return 0}function r(o,c,y){return n(o,c,y,0)}function n(o,c,y,v){pe.ensureCache.prepare();const _=Of(y),I=y===_,$=pe.ensureFloat64(_),A=pe._pe_proj_to_geog_center(pe.getPointer(o),c,$,v);return A&&wd(y,c,$,I),A}e.geogToProj=t,e.projGeog=i,e.projToGeog=r,e.projToGeogCenter=n})(PM||(PM={})),function(e){function t(){e.PE_BUFFER_MAX=pe.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=pe.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=pe.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=pe.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=pe.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=pe.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=pe.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=pe.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=pe.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=pe.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=pe.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=pe.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=pe.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=pe.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=pe.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=pe.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=pe.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=pe.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=pe.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=pe.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=pe.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=pe.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=pe.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=pe.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=pe.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=pe.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=pe.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=pe.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(Vi||(Vi={}));let CY=null;var NM;(function(e){const t={},i={},r=k=>{const R=k.getType();switch(R){case Vi.PE_TYPE_GEOGCS:k=pe.castObject(k,pe.PeGeogcs);break;case Vi.PE_TYPE_PROJCS:k=pe.castObject(k,pe.PeProjcs);break;case Vi.PE_TYPE_GEOGTRAN:k=pe.castObject(k,pe.PeGeogtran);break;default:R&Vi.PE_TYPE_UNIT&&(k=pe.castObject(k,pe.PeUnit))}return k};function n(){pe.PeFactory.prototype.initialize(null)}function o(k){return c(Vi.PE_TYPE_COORDSYS,k)}function c(k,R){let N=null,D=t[k];if(D||(D={},t[k]=D),D.hasOwnProperty(String(R))&&(N=D[R],pe.compare(N,pe.NULL)&&(N=null)),!N){const j=pe.PeFactory.prototype.factoryByType(k,R);pe.compare(j,pe.NULL)||(N=r(j),D[R]=N)}return N}function y(k,R){let N=null,D=i[k];if(D||(D={},i[k]=D),D.hasOwnProperty(R)&&(N=D[R],pe.compare(N,pe.NULL)&&(N=null)),!N){const j=pe.PeFactory.prototype.fromString(k,R);pe.compare(j,pe.NULL)||(N=r(j),D[R]=N)}return N}function v(k){return c(Vi.PE_TYPE_GEOGCS,k)}function _(k){return c(Vi.PE_TYPE_GEOGTRAN,k)}function I(k){return pe.PeFactory.prototype.getCode(k)}function $(k){return c(Vi.PE_TYPE_PROJCS,k)}function A(k){return c(Vi.PE_TYPE_UNIT,k)}e.initialize=n,e.coordsys=o,e.factoryByType=c,e.fromString=y,e.geogcs=v,e.geogtran=_,e.getCode=I,e.projcs=$,e.unit=A})(NM||(NM={}));let kY=null;var A9,FM,DM,jM,zM,VM,C9,UM,k9,L9,BM;function LY(e){function t(o,c,y){o[c]=y(o[c])}pe=e,Vi.init(),A9.init(),C9.init(),k9.init(),L9.init(),CY=class extends pe.PeDouble{constructor(o=NaN){super(o)}destroy(){pe.destroy(this)}[Symbol.dispose](){this.destroy()}},kY=class extends pe.PeGCSExtent{destroy(){pe.destroy(this)}[Symbol.dispose](){this.destroy()}};const i=[pe.PeAngunit,pe.PeDatum,pe.PeGeogcs,pe.PeGeogtran,pe.PeObject,pe.PeParameter,pe.PePrimem,pe.PeProjcs,pe.PeSpheroid,pe.PeUnit];for(const o of i)t(o.prototype,"getName",c=>function(){return c.call(this,new Array(Vi.PE_NAME_MAX))});for(const o of[pe.PeGeogtran,pe.PeProjcs])t(o.prototype,"getParameters",c=>function(){const y=new Array(Vi.PE_PARM_MAX);let v=c.call(this);for(let _=0;_<y.length;_++){const I=pe.getValue(v,"*");y[_]=I?pe.wrapPointer(I,pe.PeParameter):null,v+=Int32Array.BYTES_PER_ELEMENT}return y});t(pe.PeHorizon.prototype,"getCoord",o=>function(c=!1){const y=this.getSize();if(!y)return null;const v=[];return wd(v,y,o.call(this),c),v}),t(pe.PeGTlistExtendedEntry.prototype,"getEntries",o=>{const c=pe._pe_getPeGTlistExtendedGTsSize();return function(){let y=null;const v=o.call(this);if(!pe.compare(v,pe.NULL)){y=[v];const _=this.getSteps();if(_>1){const I=pe.getPointer(v);for(let $=1;$<_;$++)y.push(pe.wrapPointer(I+c*$,pe.PeGTlistExtendedGTs))}}return y}});const r=pe._pe_getPeHorizonSize(),n=o=>function(){let c=this._cache;if(c||(c=new Map,this._cache=c),c.has(o))return c.get(o);let y=null;const v=o.call(this);if(!pe.compare(v,pe.NULL)){y=[v];const _=v.getNump();if(_>1){const I=pe.getPointer(v);for(let $=1;$<_;$++)y.push(pe.wrapPointer(I+r*$,pe.PeHorizon))}}return c.set(o,y),y};t(pe.PeProjcs.prototype,"horizonGcsGenerate",n),t(pe.PeProjcs.prototype,"horizonPcsGenerate",n),pe.PeObject.prototype.toString=function(o=Vi.PE_STR_OPTS_NONE){pe.ensureCache.prepare();const c=pe.getPointer(this),y=pe.ensureInt8(new Array(Vi.PE_BUFFER_MAX));return pe.UTF8ToString(pe._pe_object_to_string_ext(c,o,y))},pe.PeGeogcs.prototype.destroy=function(){this.Delete(),al(this),this.ptr=0},pe.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},pe.PeProjcs.prototype.destroy=function(){this.Delete(),al(this),this.ptr=0},pe.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function al(e){if(!e)return;const t=pe.getClass(e);if(!t)return;const i=pe.getCache(t);if(!i)return;const r=pe.getPointer(e);r&&delete i[r]}function v_(e,t){const i=[],r=new Array(t);for(let n=0;n<e;n++)i.push(pe.ensureInt8(r));return i}function Of(e){return ArrayBuffer.isView(e)?e:Array.isArray(e[0])?e.flat():e}function wd(e,t,i,r=!1){if(r)for(let n=0;n<2*t;n++)e[n]=pe.getValue(i+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=e.length===0;for(let o=0;o<t;o++)n&&(e[o]=new Array(2)),e[o][0]=pe.getValue(i,"double"),e[o][1]=pe.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function i(){e.PE_GTLIST_OPTS_COMMON=pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=pe._pe_getPeGTlistExtendedEntrySize()}function r(n,o,c,y,v,_){let I=null;const $=new pe.PeInteger(_);try{const A=pe.PeGTlistExtended.prototype.getGTlist(n,o,c,y,v,$);if((_=$.val)&&(I=[A],_>1)){const k=pe.getPointer(A);for(let R=1;R<_;R++)I.push(pe.wrapPointer(k+t*R,pe.PeGTlistExtendedEntry))}}finally{pe.destroy($)}return I}e.init=i,e.getGTlist=r})(A9||(A9={})),function(e){function t(i){if(i!=null&&i.length){for(const r of i)al(r),r.getEntries().forEach(n=>{al(n);const o=n.getGeogtran();al(o),o.getParameters().forEach(al),[o.getGeogcs1(),o.getGeogcs2()].forEach(c=>{al(c);const y=c.getDatum();al(y),al(y.getSpheroid()),al(c.getPrimem()),al(c.getUnit())})});pe.PeGTlistExtendedEntry.prototype.Delete(i[0])}}e.destroy=t}(FM||(FM={})),function(e){function t(i,r,n,o,c){pe.ensureCache.prepare();const y=Of(n),v=n===y,_=pe.ensureFloat64(y);let I=0;o&&(I=pe.ensureFloat64(o));const $=pe._pe_geog_to_geog(pe.getPointer(i),r,_,I,c);return $&&wd(n,r,_,v),$}e.geogToGeog=t}(DM||(DM={})),function(e){function t(o,c,y,v,_,I,$,A){pe.PeLineType.prototype.geodesic_coordinate(o,c,y,v,_,I,$,A)}function i(o,c,y,v,_,I,$,A,k){pe.PeLineType.prototype.geodetic_coordinate(o,c,y,v,_,I,$,A,k)}function r(o,c,y,v,_,I,$,A,k,R){pe.PeLineType.prototype.geodetic_distance(o,c,y,v,_,I,$,A,k,R)}function n(o,c,y,v,_,I,$,A,k){pe.PeLineType.prototype.great_elliptic_distance(o,c,y,v,_,I,$,A,k)}e.geodesicCoordinate=t,e.geodeticCoordinate=i,e.geodeticDistance=r,e.greatEllipticDistance=n}(jM||(jM={})),function(e){function t(c,y){return pe.PeMath.prototype.phi_to_eta(c,y)}function i(c,y){return pe.PeMath.prototype.eta_to_phi(c,y)}function r(c,y){return pe.PeMath.prototype.phi_to_phig(c,y)}function n(c,y,v){return pe.PeMath.prototype.q(c,y,v)}function o(c,y){return pe.PeMath.prototype.q90(c,y)}e.phiToEta=t,e.etaToPhi=i,e.phiToPhig=r,e.q=n,e.q90=o}(zM||(zM={})),function(e){const t=(_,I,$,A,k,R)=>{let N,D;switch(pe.ensureCache.prepare(),_){case"dd":N=pe._pe_geog_to_dd,D=Vi.PE_DD_MAX;break;case"ddm":N=pe._pe_geog_to_ddm,D=Vi.PE_DDM_MAX;break;case"dms":N=pe._pe_geog_to_dms,D=Vi.PE_DMS_MAX}let j=0;I&&(j=pe.getPointer(I));const z=Of(A),U=pe.ensureFloat64(z),W=v_($,D),Q=N(j,$,U,k,pe.ensureInt32(W));if(Q)for(let K=0;K<$;K++)R[K]=pe.UTF8ToString(W[K]);return Q},i=(_,I,$,A,k)=>{let R;switch(pe.ensureCache.prepare(),_){case"dd":R=pe._pe_dd_to_geog;break;case"ddm":R=pe._pe_ddm_to_geog;break;case"dms":R=pe._pe_dms_to_geog}let N=0;I&&(N=pe.getPointer(I));const D=A.map(W=>pe.ensureString(W)),j=pe.ensureInt32(D),z=pe.ensureFloat64(new Array(2*$)),U=R(N,$,j,z);return U&&wd(k,$,z),U};function r(_,I,$,A,k){return t("dms",_,I,$,A,k)}function n(_,I,$,A){return i("dms",_,I,$,A)}function o(_,I,$,A,k){return t("ddm",_,I,$,A,k)}function c(_,I,$,A){return i("ddm",_,I,$,A)}function y(_,I,$,A,k){return t("dd",_,I,$,A,k)}function v(_,I,$,A){return i("dd",_,I,$,A)}e.geogToDms=r,e.dmsToGeog=n,e.geogToDdm=o,e.ddmToGeog=c,e.geogToDd=y,e.ddToGeog=v}(VM||(VM={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(n,o,c,y,v,_,I){pe.ensureCache.prepare();let $=0;n&&($=pe.getPointer(n));const A=Of(c),k=pe.ensureFloat64(A),R=v_(o,Vi.PE_MGRS_MAX),N=pe.ensureInt32(R),D=pe._pe_geog_to_mgrs_extended($,o,k,y,v,_,N);if(D)for(let j=0;j<o;j++)I[j]=pe.UTF8ToString(R[j]);return D}function r(n,o,c,y,v){pe.ensureCache.prepare();let _=0;n&&(_=pe.getPointer(n));const I=c.map(R=>pe.ensureString(R)),$=pe.ensureInt32(I),A=pe.ensureFloat64(new Array(2*o)),k=pe._pe_mgrs_to_geog_extended(_,o,$,y,A);return k&&wd(v,o,A),k}e.init=t,e.geogToMgrsExtended=i,e.mgrsToGeogExtended=r}(C9||(C9={})),function(e){function t(r,n,o,c,y,v,_){pe.ensureCache.prepare();let I=0;r&&(I=pe.getPointer(r));const $=Of(o),A=pe.ensureFloat64($),k=v_(n,Vi.PE_MGRS_MAX),R=pe.ensureInt32(k),N=pe._pe_geog_to_usng(I,n,A,c,y,v,R);if(N)for(let D=0;D<n;D++)_[D]=pe.UTF8ToString(k[D]);return N}function i(r,n,o,c){pe.ensureCache.prepare();let y=0;r&&(y=pe.getPointer(r));const v=o.map(A=>pe.ensureString(A)),_=pe.ensureInt32(v),I=pe.ensureFloat64(new Array(2*n)),$=pe._pe_usng_to_geog(y,n,_,I);return $&&wd(c,n,I),$}e.geogToUsng=t,e.usngToGeog=i}(UM||(UM={})),function(e){function t(){e.PE_UTM_OPTS_NONE=pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(n,o,c,y,v){pe.ensureCache.prepare();let _=0;n&&(_=pe.getPointer(n));const I=Of(c),$=pe.ensureFloat64(I),A=v_(o,Vi.PE_UTM_MAX),k=pe.ensureInt32(A),R=pe._pe_geog_to_utm(_,o,$,y,k);if(R)for(let N=0;N<o;N++)v[N]=pe.UTF8ToString(A[N]);return R}function r(n,o,c,y,v){pe.ensureCache.prepare();let _=0;n&&(_=pe.getPointer(n));const I=c.map(R=>pe.ensureString(R)),$=pe.ensureInt32(I),A=pe.ensureFloat64(new Array(2*o)),k=pe._pe_utm_to_geog(_,o,$,y,A);return k&&wd(v,o,A),k}e.init=t,e.geogToUtm=i,e.utmToGeog=r}(k9||(k9={})),function(e){const t=new Map;function i(){e.PE_PCSINFO_OPTION_NONE=pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=pe.PePCSInfo.prototype.PE_POLE_POINT}function r(n,o=e.PE_PCSINFO_OPTION_DOMAIN){let c=null,y=null;return t.has(n)&&(y=t.get(n),y[o]&&(c=y[o])),c||(c=pe.PePCSInfo.prototype.generate(n,o),y||(y=[],t.set(n,y)),y[o]=c),c}e.init=i,e.generate=r}(L9||(L9={})),function(e){function t(){return pe.PeVersion.prototype.version_string()}e.versionString=t}(BM||(BM={}));const d1e=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return PM},get PeDefs(){return Vi},get PeDouble(){return CY},get PeFactory(){return NM},get PeGCSExtent(){return kY},get PeGTTransformations(){return DM},get PeGTlistExtended(){return A9},get PeGTlistExtendedEntry(){return FM},get PeLineType(){return jM},get PeMath(){return zM},get PeNotationDms(){return VM},get PeNotationMgrs(){return C9},get PeNotationUsng(){return UM},get PeNotationUtm(){return k9},get PePCSInfo(){return L9},get PeVersion(){return BM},_init:LY,get _pe(){return pe},isLoaded:gO,isSupported:h1e,load:AY},Symbol.toStringTag,{value:"Module"}));var T0;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(T0||(T0={}));let E;const J={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for(E=2e3;E<=2045;E++)J[E]=0;for(E=2056;E<=2065;E++)J[E]=0;for(E=2067;E<=2135;E++)J[E]=0;for(E=2137;E<=2154;E++)J[E]=0;for(E=2161;E<=2170;E++)J[E]=0;for(E=2172;E<=2193;E++)J[E]=0;for(E=2195;E<=2198;E++)J[E]=0;for(E=2200;E<=2203;E++)J[E]=0;for(E=2205;E<=2217;E++)J[E]=0;for(E=2222;E<=2224;E++)J[E]=1;for(E=2225;E<=2250;E++)J[E]=2;for(E=2251;E<=2253;E++)J[E]=1;for(E=2257;E<=2264;E++)J[E]=2;for(E=2274;E<=2279;E++)J[E]=2;for(E=2280;E<=2282;E++)J[E]=1;for(E=2283;E<=2289;E++)J[E]=2;for(E=2290;E<=2292;E++)J[E]=0;for(E=2308;E<=2313;E++)J[E]=0;for(E=2315;E<=2491;E++)J[E]=0;for(E=2494;E<=2866;E++)J[E]=0;for(E=2867;E<=2869;E++)J[E]=1;for(E=2870;E<=2888;E++)J[E]=2;for(E=2891;E<=2895;E++)J[E]=2;for(E=2896;E<=2898;E++)J[E]=1;for(E=2902;E<=2908;E++)J[E]=2;for(E=2915;E<=2920;E++)J[E]=2;for(E=2921;E<=2923;E++)J[E]=1;for(E=2924;E<=2930;E++)J[E]=2;for(E=2931;E<=2962;E++)J[E]=0;for(E=2964;E<=2968;E++)J[E]=2;for(E=2969;E<=2973;E++)J[E]=0;for(E=2975;E<=2991;E++)J[E]=0;for(E=2995;E<=3051;E++)J[E]=0;for(E=3054;E<=3079;E++)J[E]=0;for(E=3081;E<=3088;E++)J[E]=0;for(E=3092;E<=3101;E++)J[E]=0;for(E=3106;E<=3138;E++)J[E]=0;for(E=3146;E<=3151;E++)J[E]=0;for(E=3153;E<=3166;E++)J[E]=0;for(E=3168;E<=3172;E++)J[E]=0;for(E=3174;E<=3203;E++)J[E]=0;for(E=3294;E<=3358;E++)J[E]=0;for(E=3367;E<=3403;E++)J[E]=0;for(E=3408;E<=3416;E++)J[E]=0;for(E=3417;E<=3438;E++)J[E]=2;for(E=3441;E<=3446;E++)J[E]=2;for(E=3447;E<=3450;E++)J[E]=0;for(E=3451;E<=3459;E++)J[E]=2;for(E=3460;E<=3478;E++)J[E]=0;for(E=3554;E<=3559;E++)J[E]=0;for(E=3560;E<=3570;E++)J[E]=2;for(E=3571;E<=3581;E++)J[E]=0;for(E=3594;E<=3597;E++)J[E]=0;for(E=3601;E<=3604;E++)J[E]=0;for(E=3637;E<=3639;E++)J[E]=0;for(E=3665;E<=3667;E++)J[E]=0;for(E=3693;E<=3695;E++)J[E]=0;for(E=3701;E<=3727;E++)J[E]=0;for(E=3728;E<=3739;E++)J[E]=2;for(E=3740;E<=3751;E++)J[E]=0;for(E=3753;E<=3760;E++)J[E]=2;for(E=3761;E<=3773;E++)J[E]=0;for(E=3775;E<=3777;E++)J[E]=0;for(E=3779;E<=3781;E++)J[E]=0;for(E=3783;E<=3785;E++)J[E]=0;for(E=3788;E<=3791;E++)J[E]=0;for(E=3797;E<=3802;E++)J[E]=0;for(E=3814;E<=3816;E++)J[E]=0;for(E=3825;E<=3829;E++)J[E]=0;for(E=3832;E<=3841;E++)J[E]=0;for(E=3844;E<=3852;E++)J[E]=0;for(E=3873;E<=3885;E++)J[E]=0;for(E=3890;E<=3893;E++)J[E]=0;for(E=3907;E<=3912;E++)J[E]=0;for(E=3942;E<=3950;E++)J[E]=0;for(E=3968;E<=3970;E++)J[E]=0;for(E=3973;E<=3976;E++)J[E]=0;for(E=3986;E<=3989;E++)J[E]=0;for(E=3994;E<=3997;E++)J[E]=0;for(E=4048;E<=4051;E++)J[E]=0;for(E=4056;E<=4063;E++)J[E]=0;for(E=4093;E<=4096;E++)J[E]=0;for(E=4390;E<=4398;E++)J[E]=0;for(E=4399;E<=4413;E++)J[E]=2;for(E=4418;E<=4433;E++)J[E]=2;for(E=4455;E<=4457;E++)J[E]=2;for(E=4484;E<=4489;E++)J[E]=0;for(E=4491;E<=4554;E++)J[E]=0;for(E=4568;E<=4589;E++)J[E]=0;for(E=4652;E<=4656;E++)J[E]=0;for(E=4766;E<=4800;E++)J[E]=0;for(E=5014;E<=5016;E++)J[E]=0;for(E=5069;E<=5072;E++)J[E]=0;for(E=5105;E<=5130;E++)J[E]=0;for(E=5167;E<=5188;E++)J[E]=0;for(E=5253;E<=5259;E++)J[E]=0;for(E=5269;E<=5275;E++)J[E]=0;for(E=5292;E<=5311;E++)J[E]=0;for(E=5329;E<=5331;E++)J[E]=0;for(E=5343;E<=5349;E++)J[E]=0;for(E=5355;E<=5357;E++)J[E]=0;for(E=5387;E<=5389;E++)J[E]=0;for(E=5459;E<=5463;E++)J[E]=0;for(E=5479;E<=5482;E++)J[E]=0;for(E=5518;E<=5520;E++)J[E]=0;for(E=5530;E<=5539;E++)J[E]=0;for(E=5550;E<=5552;E++)J[E]=0;for(E=5562;E<=5583;E++)J[E]=0;for(E=5623;E<=5625;E++)J[E]=2;for(E=5631;E<=5639;E++)J[E]=0;for(E=5649;E<=5653;E++)J[E]=0;for(E=5663;E<=5680;E++)J[E]=0;for(E=5682;E<=5685;E++)J[E]=0;for(E=5875;E<=5877;E++)J[E]=0;for(E=5896;E<=5899;E++)J[E]=0;for(E=5921;E<=5940;E++)J[E]=0;for(E=6050;E<=6125;E++)J[E]=0;for(E=6244;E<=6275;E++)J[E]=0;for(E=6328;E<=6348;E++)J[E]=0;for(E=6350;E<=6356;E++)J[E]=0;for(E=6366;E<=6372;E++)J[E]=0;for(E=6381;E<=6387;E++)J[E]=0;for(E=6393;E<=6404;E++)J[E]=0;for(E=6480;E<=6483;E++)J[E]=0;for(E=6511;E<=6514;E++)J[E]=0;for(E=6579;E<=6581;E++)J[E]=0;for(E=6619;E<=6624;E++)J[E]=0;for(E=6625;E<=6627;E++)J[E]=2;for(E=6628;E<=6632;E++)J[E]=0;for(E=6634;E<=6637;E++)J[E]=0;for(E=6669;E<=6692;E++)J[E]=0;for(E=6707;E<=6709;E++)J[E]=0;for(E=6720;E<=6723;E++)J[E]=0;for(E=6732;E<=6738;E++)J[E]=0;for(E=6931;E<=6933;E++)J[E]=0;for(E=6956;E<=6959;E++)J[E]=0;for(E=7005;E<=7007;E++)J[E]=0;for(E=7057;E<=7070;E++)J[E]=2;for(E=7074;E<=7082;E++)J[E]=0;for(E=7109;E<=7118;E++)J[E]=0;for(E=7119;E<=7127;E++)J[E]=1;for(E=7374;E<=7376;E++)J[E]=0;for(E=7528;E<=7586;E++)J[E]=0;for(E=7587;E<=7645;E++)J[E]=2;for(E=7692;E<=7696;E++)J[E]=0;for(E=7755;E<=7787;E++)J[E]=0;for(E=7791;E<=7795;E++)J[E]=0;for(E=7799;E<=7801;E++)J[E]=0;for(E=7803;E<=7805;E++)J[E]=0;for(E=7825;E<=7831;E++)J[E]=0;for(E=7845;E<=7859;E++)J[E]=0;for(E=8013;E<=8032;E++)J[E]=0;for(E=8065;E<=8068;E++)J[E]=1;for(E=8518;E<=8529;E++)J[E]=2;for(E=8533;E<=8536;E++)J[E]=2;for(E=8538;E<=8540;E++)J[E]=2;for(E=8677;E<=8679;E++)J[E]=0;for(E=8836;E<=8840;E++)J[E]=0;for(E=8857;E<=8859;E++)J[E]=0;for(E=8908;E<=8910;E++)J[E]=0;for(E=9154;E<=9159;E++)J[E]=0;for(E=9205;E<=9218;E++)J[E]=0;for(E=9271;E<=9273;E++)J[E]=0;for(E=9295;E<=9297;E++)J[E]=0;for(E=9356;E<=9360;E++)J[E]=0;for(E=9404;E<=9407;E++)J[E]=0;for(E=9476;E<=9482;E++)J[E]=0;for(E=9487;E<=9494;E++)J[E]=0;for(E=9697;E<=9699;E++)J[E]=0;for(E=9821;E<=9865;E++)J[E]=0;for(E=10285;E<=10291;E++)J[E]=0;for(E=10314;E<=10317;E++)J[E]=0;for(E=10448;E<=10465;E++)J[E]=0;for(E=10731;E<=10733;E++)J[E]=0;for(E=11114;E<=11118;E++)J[E]=0;for(E=20004;E<=20032;E++)J[E]=0;for(E=20047;E<=20049;E++)J[E]=0;for(E=20062;E<=20092;E++)J[E]=0;for(E=20135;E<=20138;E++)J[E]=0;for(E=20248;E<=20258;E++)J[E]=0;for(E=20348;E<=20358;E++)J[E]=0;for(E=20436;E<=20440;E++)J[E]=0;for(E=20822;E<=20824;E++)J[E]=0;for(E=20904;E<=20932;E++)J[E]=0;for(E=20934;E<=20936;E++)J[E]=0;for(E=21004;E<=21032;E++)J[E]=0;for(E=21035;E<=21037;E++)J[E]=0;for(E=21095;E<=21097;E++)J[E]=0;for(E=21148;E<=21150;E++)J[E]=0;for(E=21207;E<=21264;E++)J[E]=0;for(E=21307;E<=21364;E++)J[E]=0;for(E=21413;E<=21423;E++)J[E]=0;for(E=21453;E<=21463;E++)J[E]=0;for(E=21473;E<=21483;E++)J[E]=0;for(E=21780;E<=21782;E++)J[E]=0;for(E=21891;E<=21894;E++)J[E]=0;for(E=21896;E<=21899;E++)J[E]=0;for(E=22171;E<=22177;E++)J[E]=0;for(E=22181;E<=22187;E++)J[E]=0;for(E=22191;E<=22197;E++)J[E]=0;for(E=22207;E<=22222;E++)J[E]=0;for(E=22229;E<=22232;E++)J[E]=0;for(E=22234;E<=22236;E++)J[E]=0;for(E=22243;E<=22250;E++)J[E]=0;for(E=22262;E<=22265;E++)J[E]=0;for(E=22307;E<=22322;E++)J[E]=0;for(E=22348;E<=22357;E++)J[E]=0;for(E=22407;E<=22422;E++)J[E]=0;for(E=22462;E<=22465;E++)J[E]=0;for(E=22521;E<=22525;E++)J[E]=0;for(E=22607;E<=22622;E++)J[E]=0;for(E=22641;E<=22646;E++)J[E]=0;for(E=22648;E<=22657;E++)J[E]=0;for(E=22707;E<=22722;E++)J[E]=0;for(E=22762;E<=22765;E++)J[E]=0;for(E=22807;E<=22822;E++)J[E]=0;for(E=22991;E<=22994;E++)J[E]=0;for(E=23028;E<=23038;E++)J[E]=0;for(E=23301;E<=23333;E++)J[E]=2;for(E=23830;E<=23853;E++)J[E]=0;for(E=23866;E<=23872;E++)J[E]=0;for(E=23877;E<=23884;E++)J[E]=0;for(E=23886;E<=23894;E++)J[E]=0;for(E=23946;E<=23948;E++)J[E]=0;for(E=24311;E<=24313;E++)J[E]=0;for(E=24342;E<=24347;E++)J[E]=0;for(E=24370;E<=24374;E++)J[E]=10;for(E=24375;E<=24381;E++)J[E]=0;for(E=24718;E<=24721;E++)J[E]=0;for(E=24817;E<=24821;E++)J[E]=0;for(E=24877;E<=24882;E++)J[E]=0;for(E=24891;E<=24893;E++)J[E]=0;for(E=25391;E<=25395;E++)J[E]=0;for(E=25828;E<=25838;E++)J[E]=0;for(E=26191;E<=26195;E++)J[E]=0;for(E=26391;E<=26393;E++)J[E]=0;for(E=26701;E<=26722;E++)J[E]=0;for(E=26729;E<=26799;E++)J[E]=2;for(E=26801;E<=26803;E++)J[E]=2;for(E=26811;E<=26813;E++)J[E]=2;for(E=26847;E<=26870;E++)J[E]=2;for(E=26891;E<=26899;E++)J[E]=0;for(E=26901;E<=26923;E++)J[E]=0;for(E=26929;E<=26946;E++)J[E]=0;for(E=26948;E<=26998;E++)J[E]=0;for(E=27037;E<=27040;E++)J[E]=0;for(E=27205;E<=27232;E++)J[E]=0;for(E=27258;E<=27260;E++)J[E]=0;for(E=27391;E<=27398;E++)J[E]=0;for(E=27561;E<=27564;E++)J[E]=0;for(E=27571;E<=27574;E++)J[E]=0;for(E=27581;E<=27584;E++)J[E]=0;for(E=27591;E<=27594;E++)J[E]=0;for(E=27700;E<=27707;E++)J[E]=0;for(E=28191;E<=28193;E++)J[E]=0;for(E=28348;E<=28358;E++)J[E]=0;for(E=28402;E<=28432;E++)J[E]=0;for(E=28462;E<=28492;E++)J[E]=0;for(E=29118;E<=29122;E++)J[E]=0;for(E=29168;E<=29172;E++)J[E]=0;for(E=29177;E<=29185;E++)J[E]=0;for(E=29187;E<=29195;E++)J[E]=0;for(E=29900;E<=29903;E++)J[E]=0;for(E=30161;E<=30179;E++)J[E]=0;for(E=30491;E<=30494;E++)J[E]=0;for(E=30729;E<=30732;E++)J[E]=0;for(E=31251;E<=31259;E++)J[E]=0;for(E=31265;E<=31268;E++)J[E]=0;for(E=31275;E<=31279;E++)J[E]=0;for(E=31281;E<=31297;E++)J[E]=0;for(E=31461;E<=31469;E++)J[E]=0;for(E=31491;E<=31495;E++)J[E]=0;for(E=31917;E<=31922;E++)J[E]=0;for(E=31965;E<=32e3;E++)J[E]=0;for(E=32001;E<=32003;E++)J[E]=2;for(E=32005;E<=32031;E++)J[E]=2;for(E=32033;E<=32060;E++)J[E]=2;for(E=32064;E<=32067;E++)J[E]=2;for(E=32074;E<=32077;E++)J[E]=2;for(E=32081;E<=32086;E++)J[E]=0;for(E=32107;E<=32130;E++)J[E]=0;for(E=32133;E<=32159;E++)J[E]=0;for(E=32164;E<=32167;E++)J[E]=2;for(E=32180;E<=32199;E++)J[E]=0;for(E=32201;E<=32260;E++)J[E]=0;for(E=32301;E<=32360;E++)J[E]=0;for(E=32401;E<=32460;E++)J[E]=0;for(E=32501;E<=32560;E++)J[E]=0;for(E=32601;E<=32662;E++)J[E]=0;for(E=32664;E<=32667;E++)J[E]=2;for(E=32701;E<=32761;E++)J[E]=0;for(E=53001;E<=53004;E++)J[E]=0;for(E=53008;E<=53019;E++)J[E]=0;for(E=53021;E<=53032;E++)J[E]=0;for(E=53034;E<=53037;E++)J[E]=0;for(E=53042;E<=53046;E++)J[E]=0;for(E=53074;E<=53080;E++)J[E]=0;for(E=54001;E<=54004;E++)J[E]=0;for(E=54008;E<=54019;E++)J[E]=0;for(E=54021;E<=54032;E++)J[E]=0;for(E=54034;E<=54037;E++)J[E]=0;for(E=54042;E<=54046;E++)J[E]=0;for(E=54048;E<=54053;E++)J[E]=0;for(E=54074;E<=54080;E++)J[E]=0;for(E=54098;E<=54101;E++)J[E]=0;for(E=102001;E<=102040;E++)J[E]=0;for(E=102042;E<=102063;E++)J[E]=0;for(E=102065;E<=102067;E++)J[E]=0;for(E=102070;E<=102117;E++)J[E]=0;for(E=102122;E<=102216;E++)J[E]=0;for(E=102221;E<=102377;E++)J[E]=0;for(E=102382;E<=102388;E++)J[E]=0;for(E=102389;E<=102398;E++)J[E]=2;for(E=102399;E<=102444;E++)J[E]=0;for(E=102445;E<=102447;E++)J[E]=2;for(E=102448;E<=102458;E++)J[E]=0;for(E=102459;E<=102468;E++)J[E]=2;for(E=102469;E<=102499;E++)J[E]=0;for(E=102500;E<=102519;E++)J[E]=1;for(E=102520;E<=102524;E++)J[E]=0;for(E=102525;E<=102529;E++)J[E]=2;for(E=102530;E<=102588;E++)J[E]=0;for(E=102590;E<=102598;E++)J[E]=0;for(E=102601;E<=102603;E++)J[E]=0;for(E=102605;E<=102628;E++)J[E]=0;for(E=102629;E<=102646;E++)J[E]=2;for(E=102648;E<=102700;E++)J[E]=2;for(E=102701;E<=102703;E++)J[E]=0;for(E=102707;E<=102730;E++)J[E]=2;for(E=102733;E<=102758;E++)J[E]=2;for(E=102767;E<=102900;E++)J[E]=0;for(E=102901;E<=102933;E++)J[E]=2;for(E=102934;E<=102950;E++)J[E]=13;for(E=102951;E<=102963;E++)J[E]=0;for(E=102965;E<=102969;E++)J[E]=0;for(E=102971;E<=102973;E++)J[E]=0;for(E=102975;E<=102989;E++)J[E]=0;for(E=102990;E<=102992;E++)J[E]=1;for(E=102997;E<=103002;E++)J[E]=0;for(E=103003;E<=103008;E++)J[E]=2;for(E=103009;E<=103011;E++)J[E]=0;for(E=103012;E<=103014;E++)J[E]=2;for(E=103019;E<=103021;E++)J[E]=0;for(E=103022;E<=103024;E++)J[E]=2;for(E=103029;E<=103031;E++)J[E]=0;for(E=103032;E<=103034;E++)J[E]=2;for(E=103065;E<=103068;E++)J[E]=0;for(E=103074;E<=103076;E++)J[E]=0;for(E=103077;E<=103079;E++)J[E]=1;for(E=103080;E<=103082;E++)J[E]=0;for(E=103083;E<=103085;E++)J[E]=2;for(E=103090;E<=103093;E++)J[E]=0;for(E=103097;E<=103099;E++)J[E]=0;for(E=103100;E<=103102;E++)J[E]=2;for(E=103107;E<=103109;E++)J[E]=0;for(E=103110;E<=103112;E++)J[E]=2;for(E=103113;E<=103116;E++)J[E]=0;for(E=103117;E<=103120;E++)J[E]=2;for(E=103153;E<=103157;E++)J[E]=0;for(E=103158;E<=103162;E++)J[E]=2;for(E=103163;E<=103165;E++)J[E]=0;for(E=103166;E<=103168;E++)J[E]=1;for(E=103169;E<=103171;E++)J[E]=2;for(E=103186;E<=103188;E++)J[E]=0;for(E=103189;E<=103191;E++)J[E]=2;for(E=103192;E<=103195;E++)J[E]=0;for(E=103196;E<=103199;E++)J[E]=2;for(E=103200;E<=103224;E++)J[E]=0;for(E=103225;E<=103227;E++)J[E]=1;for(E=103232;E<=103237;E++)J[E]=0;for(E=103238;E<=103243;E++)J[E]=2;for(E=103244;E<=103246;E++)J[E]=0;for(E=103247;E<=103249;E++)J[E]=2;for(E=103254;E<=103256;E++)J[E]=0;for(E=103257;E<=103259;E++)J[E]=2;for(E=103264;E<=103266;E++)J[E]=0;for(E=103267;E<=103269;E++)J[E]=2;for(E=103300;E<=103375;E++)J[E]=0;for(E=103381;E<=103383;E++)J[E]=0;for(E=103384;E<=103386;E++)J[E]=1;for(E=103387;E<=103389;E++)J[E]=0;for(E=103390;E<=103392;E++)J[E]=2;for(E=103397;E<=103399;E++)J[E]=0;for(E=103400;E<=103471;E++)J[E]=2;for(E=103476;E<=103478;E++)J[E]=0;for(E=103479;E<=103481;E++)J[E]=2;for(E=103486;E<=103488;E++)J[E]=0;for(E=103489;E<=103491;E++)J[E]=2;for(E=103492;E<=103495;E++)J[E]=0;for(E=103496;E<=103499;E++)J[E]=2;for(E=103528;E<=103543;E++)J[E]=0;for(E=103544;E<=103548;E++)J[E]=2;for(E=103549;E<=103551;E++)J[E]=0;for(E=103552;E<=103554;E++)J[E]=1;for(E=103555;E<=103557;E++)J[E]=2;for(E=103558;E<=103560;E++)J[E]=0;for(E=103571;E<=103573;E++)J[E]=0;for(E=103574;E<=103576;E++)J[E]=2;for(E=103577;E<=103580;E++)J[E]=0;for(E=103581;E<=103583;E++)J[E]=2;for(E=103595;E<=103694;E++)J[E]=0;for(E=103696;E<=103699;E++)J[E]=0;for(E=103700;E<=103793;E++)J[E]=2;for(E=103794;E<=103890;E++)J[E]=0;for(E=103891;E<=103896;E++)J[E]=2;for(E=103900;E<=103971;E++)J[E]=2;for(E=103972;E<=103977;E++)J[E]=0;for(E=112e3;E<=112101;E++)J[E]=0;const OY=[102100,102113,3857,3785,900913],p1e=[104905,104971],f1e=[4326,...OY,...p1e],m2=[-20037508342788905e-9,20037508342788905e-9],GM=[-20037508342787e-6,20037508342787e-6],c$={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:m2,origin:GM,dx:1e-5},RY={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:m2,origin:GM,dx:1e-5},102100:c$,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:m2,origin:GM,dx:1e-5},3857:c$,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:c$};function _r(e,t){if(e===t)return!0;if(e==null||t==null)return!1;const i=e.wkid,r=t.wkid;if(i!=null||r!=null){if(i===r||Lu(e)&&Lu(t))return!0;const c=e.latestWkid;if(c!=null&&r===c)return!0;const y=t.latestWkid;return y!=null&&i===y}let n,o;return e.wkt2&&t.wkt2?(n=e.wkt2,o=t.wkt2):e.wkt&&t.wkt&&(n=e.wkt,o=t.wkt),!(!n||!o)&&n.toUpperCase()===o.toUpperCase()}function Cs(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&RY[t]||null}function ng(e){if(!e)return;const{wkid:t,vcsWkid:i}=e;if(t)return i?JSON.stringify({wkid:t,vcsWkid:i}):String(t);const r=e.wkt||e.wkt2;return JSON.stringify(r?i?{wkt:r,vcsWkid:i}:{wkt:r}:{})}function dI(e){if(!Ro(e))return!1;const{wkid:t}=e;if(t)return J[t]==null;const i=e.wkt2||e.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function y1e(e){return!(PY(e)||NY(e))}function $0(e){return(e==null?void 0:e.wkid)===4326}function fJe(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function MD(e){return(e==null?void 0:e.wkid)===T0.CGCS2000}function Lu(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&OY.includes(t)}function m1e(e){return(e==null?void 0:e.wkid)===32662}function pI(e){return e===T0.GCSMARS2000||e===T0.GCSMARS2000_SPHERE}function PY(e){return pI(e==null?void 0:e.wkid)}function fI(e){return e===T0.GCSMOON2000}function NY(e){return fI(e==null?void 0:e.wkid)}function g1e(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&f1e.includes(t)}function Ro(e){if(e==null)return!1;const t=e.wkid;return t!=null&&t>=2e3||e.wkt2!=null||e.wkt!=null}const FY={wkid:4326,wkt:Il(RY[4326].wkTemplate,{Central_Meridian:"0.0"})},DY={wkid:102100,latestWkid:3857},v1e={wkid:32662};function vO(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const w1e=vO(ur),wO=vO(Eu),bO=vO(Xd),b1e={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${ur.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},_1e=wO.wkt.toUpperCase(),S1e=bO.wkt.toUpperCase();function x1e(e){if(e!=null&&Ro(e)){const t=e.wkid,i=e.wkt2??e.wkt;if(pI(t))return Eu;const r=i==null?void 0:i.toUpperCase();if(i&&r===_1e)return Eu;if(fI(t)||r&&r===S1e)return Xd}return ur}function yJe(e){return pI(e)?Eu:fI(e)?Xd:ur}function O9(e){return _r(e,w1e)}function Qd(e){return O9(e)||_r(e,wO)||_r(e,bO)}const jY=39.37,I1e=ur.radius*Math.PI/200,zY=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,r0=J,VY=/UNIT\[([^\]]+)]/i,T1e=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),$1e=nn()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain:"chains",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),Pl=e=>e*e,ph=e=>e*e*e,g2={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937},"clarke-feet":{inBaseUnits:.3047972654},"clarke-yards":{inBaseUnits:.9143917962},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"gold-coast-feet":{inBaseUnits:.3047997101815088},chains:{inBaseUnits:20.1168},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Pl(.001)},"square-centimeters":{inBaseUnits:Pl(.01)},"square-decimeters":{inBaseUnits:Pl(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Pl(1e3)},"square-inches":{inBaseUnits:Pl(.0254)},"square-feet":{inBaseUnits:Pl(.3048)},"square-yards":{inBaseUnits:Pl(.9144)},"square-miles":{inBaseUnits:Pl(1609.344)},"square-us-feet":{inBaseUnits:Pl(1200/3937)},acres:{inBaseUnits:.0015625*Pl(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*ph(.001)},"cubic-centimeters":{inBaseUnits:1e3*ph(.01)},"cubic-decimeters":{inBaseUnits:1e3*ph(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*ph(1e3)},"cubic-inches":{inBaseUnits:1e3*ph(.0254)},"cubic-feet":{inBaseUnits:1e3*ph(.3048)},"cubic-yards":{inBaseUnits:1e3*ph(.9144)},"cubic-miles":{inBaseUnits:1e3*ph(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},E1e=(()=>{const e={};for(const t in g2)for(const i in g2[t].units)e[i]=t;return e})();function M1e(e,t,i){return e*g2[i].units[t].inBaseUnits}function A1e(e,t,i){return e/g2[i].units[t].inBaseUnits}const UY=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],C1e=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function E0(e){const t=E1e[e];if(!t)throw new Error("unknown type");return t}function AD(e,t=null){return t=t||E0(e),g2[t].baseUnit===e}function pi(e,t,i){if(t===i)return e;const r=E0(t);if(r!==E0(i))throw new Error("incompatible units");const n=AD(t,r)?e:M1e(e,t,r);return AD(i,r)?n:A1e(n,i,r)}function k1e(e){switch(e){case"metric":return"meters";case"imperial":return"feet";default:return e}}function mJe(e){return k1e(e)}function gJe(e){switch(e){case"metric":return"square-meters";case"imperial":return"square-feet";default:return e}}function BY(e,t){const i=pi(e,t,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function GY(e,t){const i=pi(e,t,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function qY(e,t){const i=pi(e,t,"feet");return Math.abs(i)<1e3?"feet":"miles"}function HY(e,t){const i=pi(e,t,"feet");return Math.abs(i)<1e5?"feet":"miles"}function L1e(e,t){const i=pi(e,t,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function O1e(e,t){const i=pi(e,t,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function R1e(e,t,i){return pi(e,t,"meters")/(i*Math.PI/180)}function WY(e){return $1e.fromJSON(e.toLowerCase())||null}function sg(e){if(e!=null&&!y1e(e))return 1;const t=Al(e);return t>1e5?1:t}function JY(e){return Al(e)>=x1e(e).metersPerDegree?"meters":y3(e)}function Al(e,t=ur.metersPerDegree){return P1e(e,!0)??t}function P1e(e,t=!1){const i=(e==null?void 0:e.wkid)??null,r=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let n=null;if(i){if(pI(i))return Eu.metersPerDegree;if(fI(i))return Xd.metersPerDegree;n=r0.values[r0[i]],!n&&t&&T1e.has(i)&&(n=I1e)}else r&&(YY(r)?n=CD(zY.exec(r),n):KY(r)&&(n=CD(VY.exec(r),n)));return n}function vJe(e){return dI(e)?1:Al(e)}function CD(e,t){return e!=null&&e[1]?ZY(e[1]):t}function ZY(e){return parseFloat(e.split(",")[1])}function y3(e){const t=(e==null?void 0:e.wkid)??null,i=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let r=null;if(t)r=r0.units[r0[t]];else if(i){const n=YY(i)?zY:KY(i)?VY:null;if(n){const o=n.exec(i);o!=null&&o[1]&&(r=F1e(o[1]))}}return r!=null?WY(r):null}function wJe(e){const t=y3(e);return t!=null&&UY.includes(t)?t:null}function bJe(e){const t=JY(e);return t!=null&&UY.includes(t)?t:null}function _Je(e){const t=y3(e);return t==null?null:C1e.get(t)}function KY(e){return/^GEOCCS/i.test(e)}function YY(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const N1e=1e-7;function F1e(e){const t=/[\\"']{1}([^\\"']+)/.exec(e);let i=t==null?void 0:t[1];if(!i||!r0.units.includes(i)){const r=ZY(e);i=null;const n=r0.values;for(let o=0;o<n.length;++o)if(Math.abs(r-n[o])<N1e){i=r0.units[o];break}}return i}function SJe(e){const t=y3(e);if(t==null)return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"chains":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}const D1e={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},j1e={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},z1e={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},V1e=nn()(D1e),U1e=nn()(j1e),xJe=nn()(z1e);function Le(e,t,i){let r,n;return t===void 0?(n=e,r=[void 0]):typeof t!="string"?(n=e,r=[void 0],i=t):(n=t,r=Array.isArray(e)?e:[e]),(o,c)=>{const y=o.constructor.prototype;for(const v of r){const _=TK(o,v,n);_.write&&typeof _.write=="object"||(_.write={}),i&&(_.write.target=i),_.write.writer=y[c]}}}var zl;let di=zl=class extends be{static fromJSON(e){if(!e)return null;if((e==null?void 0:e.wkid)===102100)return zl.WebMercator;if((e==null?void 0:e.wkid)===4326)return zl.WGS84;const t=new zl;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return $0(this)}get isWebMercator(){return Lu(this)}get isGeographic(){return dI(this)}get isWrappable(){return g1e(this)}get metersPerUnit(){return Al(this)}get unit(){return y3(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===zl.WGS84)return new zl(FY);if(this===zl.WebMercator)return new zl(DY);const e=new zl;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=le(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:r}=e.imageCoordinateSystem,n=this.imageCoordinateSystem;return t==null||r?JSON.stringify(n)===JSON.stringify(e.imageCoordinateSystem):i?n.id===t&&n.referenceServiceName===i:n.id===t}return _r(this,e)}toJSON(e){return this.write(void 0,e)}};di.GCS_NAD_1927=null,di.WGS84=null,di.WebMercator=null,di.PlateCarree=null,m([w({readOnly:!0})],di.prototype,"isWGS84",null),m([w({readOnly:!0})],di.prototype,"isWebMercator",null),m([w({readOnly:!0})],di.prototype,"isGeographic",null),m([w({readOnly:!0})],di.prototype,"isWrappable",null),m([w({type:Ct,json:{write:!0}})],di.prototype,"latestWkid",void 0),m([w({readOnly:!0})],di.prototype,"metersPerUnit",null),m([w({readOnly:!0})],di.prototype,"unit",null),m([w({type:Ct,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],di.prototype,"wkid",void 0),m([w({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],di.prototype,"wkt",void 0),m([Le("wkt"),Le("web-scene","wkt")],di.prototype,"writeWkt",null),m([w({type:String,json:{write:!1}})],di.prototype,"wkt2",void 0),m([w({type:Ct,json:{write:!0}})],di.prototype,"vcsWkid",void 0),m([w({type:Ct,json:{write:!0}})],di.prototype,"latestVcsWkid",void 0),m([w()],di.prototype,"imageCoordinateSystem",void 0),di=zl=m([H("esri.geometry.SpatialReference")],di),di.prototype.toJSON.isDefaultToJSON=!0,di.GCS_NAD_1927=Ve.freeze(new di({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),di.WGS84=Ve.freeze(new di(FY)),di.WebMercator=Ve.freeze(new di(DY)),di.PlateCarree=Ve.freeze(new di(v1e));const rt=di;let Vl=class extends be{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=rt.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,i){if(t instanceof rt)return t;if(t!=null){const r=new rt;return r.read(t,i),r}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,i){this.cache[t]=i}};m([w()],Vl.prototype,"type",void 0),m([w({readOnly:!0})],Vl.prototype,"cache",null),m([w({readOnly:!0})],Vl.prototype,"extent",null),m([w({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Vl.prototype,"hasM",void 0),m([w({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Vl.prototype,"hasZ",void 0),m([w({type:rt,json:{write:!0},value:rt.WGS84})],Vl.prototype,"spatialReference",void 0),m([ke("spatialReference")],Vl.prototype,"readSpatialReference",null),Vl=m([H("esri.geometry.Geometry")],Vl);const rh=Vl,B1e=Object.prototype.toString;function G1e(e){const t="__accessorMetadata__"in e?qi(e):e;return function(...i){if(i.push(t),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return q1e.apply(this,i)}}function q1e(e,t,i,r){sI(e,t).cast=r}function H1e(e){return(t,i)=>{sI(t,e).cast=t[i]}}function wt(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&B1e.call(e[0])==="[object Function]"?G1e(e[0]):e.length===1&&typeof e[0]=="string"?H1e(e[0]):void 0}const W1e=57.29577951308232,J1e=.017453292519943;function kD(e){return e*W1e}function LD(e){return e*J1e}function TJe(e){return Math.PI/2-2*Math.atan(Math.exp(-e/ur.radius))}function qM(e){return e.wkid!=null||e.wkt!=null}const h$=[0,0];function R9(e,t,i,r,n){const o=e,c=n;if(c.spatialReference=i,"x"in o&&"x"in c)[c.x,c.y]=t(o.x,o.y,h$,r);else if("xmin"in o&&"xmin"in c)[c.xmin,c.ymin]=t(o.xmin,o.ymin,h$,r),[c.xmax,c.ymax]=t(o.xmax,o.ymax,h$,r);else if("paths"in o&&"paths"in c||"rings"in o&&"rings"in c){const y="paths"in o?o.paths:o.rings,v=[];let _;for(let I=0;I<y.length;I++){const $=y[I];_=[],v.push(_);for(let A=0;A<$.length;A++)_.push(t($[A][0],$[A][1],[0,0],r)),$[A].length>2&&_[A].push($[A][2]),$[A].length>3&&_[A].push($[A][3])}"paths"in c?c.paths=v:c.rings=v}else if("points"in o&&"points"in c){const y=o.points,v=[];for(let _=0;_<y.length;_++)v[_]=t(y[_][0],y[_][1],[0,0],r),y[_].length>2&&v[_].push(y[_][2]),y[_].length>3&&v[_].push(y[_][3]);c.points=v}return n}function KS(e,t){const i=e&&(qM(e)?e:e.spatialReference),r=t&&(qM(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!i||!r)&&(!!_r(r,i)||Lu(r)&&$0(i)||Lu(i)&&$0(r))}function yI(e,t){if(e==null)return null;const i=e.spatialReference,r=t&&(qM(t)?t:t.spatialReference);return KS(i,r)?_r(i,r)?le(e):Lu(r)?R9(e,i1,rt.WebMercator,!1,le(e)):$0(r)?R9(e,mI,rt.WGS84,!1,le(e)):null:null}function i1(e,t,i=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const r=LD(t);return i[0]=LD(e)*ur.radius,i[1]=ur.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function mI(e,t,i=[0,0],r=!1){if(e===m2[0])i[0]=-180;else if(e===m2[1])i[0]=180;else{const n=kD(e/ur.radius);i[0]=r?n:n-360*Math.floor((n+180)/360)}return i[1]=kD(Math.PI/2-2*Math.atan(Math.exp(-t/ur.radius))),i}function Au(e,t=!1,i=le(e)){return R9(e,i1,rt.WebMercator,t,i)}function r1(e,t=!1,i=le(e)){return R9(e,mI,rt.WGS84,t,i)}function XY(e,t){const i=e.x-t.x,r=e.y-t.y,n=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(i*i+r*r+n*n)}function Z1e(e){var t;return((t=QY(e,eX))==null?void 0:t[0])??null}function K1e(e){var t;return((t=QY(e,eX))==null?void 0:t[1])??null}function QY({x:e,y:t,spatialReference:i},r=[0,0]){if(i){if(Lu(i))return mI(e,t,r);if(dI(i))return r[0]=e,r[1]=t,r}return null}const eX=[0,0];var YS;const d$=[0,0];function OD(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let _s=YS=class extends rh{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const i=e._get("spatialReference");t._set("spatialReference",Ve.isFrozen(i)?i:i.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,i,r,n){let o;if(Array.isArray(e))o=e,n=t,e=o[0],t=o[1],i=o[2],r=o[3];else if(e&&typeof e=="object"){if(o=e,e=o.x!=null?o.x:o.longitude,t=o.y!=null?o.y:o.latitude,i=o.z,r=o.m,(n=o.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new rt(n)),o.longitude!=null||o.latitude!=null){if(o.longitude==null)_e.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(o.latitude==null)_e.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!o.declaredClass&&(n!=null&&n.isWebMercator)){const y=i1(o.longitude,o.latitude,d$);e=y[0],t=y[1]}}}else OD(i)?(n=i,i=null):OD(r)&&(n=r,r=null);const c={x:e,y:t};return c.x==null&&c.y!=null?_e.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):c.y==null&&c.x!=null&&_e.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(c.spatialReference=n),i!=null&&(c.z=i),r!=null&&(c.m=r),c}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return K1e(this)}set latitude(e){const{spatialReference:t,x:i}=this;e!=null&&t&&(t.isWebMercator?this._set("y",i1(i,e,d$)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return Z1e(this)}set longitude(e){const{y:t,spatialReference:i}=this;e!=null&&i&&(i.isWebMercator?this._set("x",i1(e,t,d$)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,i){t[i]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new YS;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return YS.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:i,z:r,m:n,spatialReference:o}=this,{z:c,m:y}=e;let{x:v,y:_,spatialReference:I}=e;if(!o.equals(I))if(o.isWebMercator&&I.isWGS84)[v,_]=i1(v,_),I=o;else{if(!o.isWGS84||!I.isWebMercator)return!1;[v,_]=mI(v,_),I=o}return t===v&&i===_&&r===c&&n===y&&o.wkid===I.wkid}offset(e,t,i){return this.x+=e,this.y+=t,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const e=Cs(this.spatialReference);if(!e)return this;let t=this.x;const[i,r]=e.valid,n=2*r;let o;return t>r?(o=Math.ceil(Math.abs(t-r)/n),t-=o*n):t<i&&(o=Math.ceil(Math.abs(t-i)/n),t+=o*n),this._set("x",t),this}distance(e){return XY(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};m([w({readOnly:!0})],_s.prototype,"cache",null),m([w({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],_s.prototype,"hasM",null),m([w({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],_s.prototype,"hasZ",null),m([w({type:Number})],_s.prototype,"latitude",null),m([w({type:Number})],_s.prototype,"longitude",null),m([w({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),wt(e=>isNaN(e)?e:Es(e))],_s.prototype,"x",void 0),m([Le("x")],_s.prototype,"writeX",null),m([ke("x")],_s.prototype,"readX",null),m([w({type:Number,json:{write:!0}})],_s.prototype,"y",void 0),m([w({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],_s.prototype,"z",void 0),m([w({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],_s.prototype,"m",void 0),_s=YS=m([H("esri.geometry.Point")],_s),_s.prototype.toJSON.isDefaultToJSON=!0;const st=_s,p$=[0,0];function m3(e,t){return t!=null&&Ts(e,t.x,t.y,t.z)}function $Je(e,t){if(!t.points||t.points.length)return!1;for(const i of t.points)if(!og(e,i))return!1;return!0}function Y1e(e,t){const{xmin:i,ymin:r,zmin:n,xmax:o,ymax:c,zmax:y}=t;return e.hasZ&&t.hasZ?Ts(e,i,r,n)&&Ts(e,i,c,n)&&Ts(e,o,c,n)&&Ts(e,o,r,n)&&Ts(e,i,r,y)&&Ts(e,i,c,y)&&Ts(e,o,c,y)&&Ts(e,o,r,y):Ts(e,i,r)&&Ts(e,i,c)&&Ts(e,o,c)&&Ts(e,o,r)}function og(e,t){return Ts(e,t[0],t[1])}function X1e(e,t){return Ts(e,t[0],t[1],t[2])}function Ts(e,t,i,r){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax&&(r==null||!e.hasZ||r>=e.zmin&&r<=e.zmax)}function _O(e,t){return p$[1]=t.y,p$[0]=t.x,Q1e(e,p$)}function Q1e(e,t){return SO(e.rings,t)}function SO(e,t){if(!e)return!1;if(ege(e))return RD(!1,e,t);let i=!1;for(let r=0,n=e.length;r<n;r++)i=RD(i,e[r],t);return i}function ege(e){return!Array.isArray(e[0][0])}function RD(e,t,i){const[r,n]=i;let o=e,c=0;for(let y=0,v=t.length;y<v;y++){c++,c===v&&(c=0);const[_,I]=t[y],[$,A]=t[c];(I<n&&A>=n||A<n&&I>=n)&&_+(n-I)/(A-I)*($-_)<r&&(o=!o)}return o}function tge(e,t){return m3(e,t)}function ige(e,t){const i=e.hasZ&&t.hasZ;let r,n,o;if(e.xmin<=t.xmin){if(r=t.xmin,e.xmax<r)return!1}else if(r=e.xmin,t.xmax<r)return!1;if(e.ymin<=t.ymin){if(n=t.ymin,e.ymax<n)return!1}else if(n=e.ymin,t.ymax<n)return!1;if(i&&t.hasZ){if(e.zmin<=t.zmin){if(o=t.zmin,e.zmax<o)return!1}else if(o=e.zmin,t.zmax<o)return!1}return!0}function rge(e,t){const{points:i,hasZ:r}=t,n=r?X1e:og;for(const o of i)if(n(e,o))return!0;return!1}const M0=[0,0],A0=[0,0],C0=[0,0],k0=[0,0],nge=[M0,A0,C0,k0],tX=[[C0,M0],[M0,A0],[A0,k0],[k0,C0]];function sge(e,t){return oge(e,t.rings)}function oge(e,t){M0[0]=e.xmin,M0[1]=e.ymax,A0[0]=e.xmax,A0[1]=e.ymax,C0[0]=e.xmin,C0[1]=e.ymin,k0[0]=e.xmax,k0[1]=e.ymin;for(const i of nge)if(SO(t,i))return!0;for(const i of t){if(!i.length)continue;let r=i[0];if(og(e,r))return!0;for(let n=1;n<i.length;n++){const o=i[n];if(og(e,o)||iX(r,o,tX))return!0;r=o}}return!1}function age(e,t){M0[0]=e.xmin,M0[1]=e.ymax,A0[0]=e.xmax,A0[1]=e.ymax,C0[0]=e.xmin,C0[1]=e.ymin,k0[0]=e.xmax,k0[1]=e.ymin;const i=t.paths;for(const r of i){if(!i.length)continue;let n=r[0];if(og(e,n))return!0;for(let o=1;o<r.length;o++){const c=r[o];if(og(e,c)||iX(n,c,tX))return!0;n=c}}return!1}const on=[0,0];function lge(e){for(let t=0;t<e.length;t++){const i=e[t];for(let n=0;n<i.length-1;n++){const o=i[n],c=i[n+1];for(let y=t+1;y<e.length;y++)for(let v=0;v<e[y].length-1;v++){const _=e[y][v],I=e[y][v+1];if(HM(o,c,_,I,on)&&!(on[0]===o[0]&&on[1]===o[1]||on[0]===_[0]&&on[1]===_[1]||on[0]===c[0]&&on[1]===c[1]||on[0]===I[0]&&on[1]===I[1]))return!0}}const r=i.length;if(!(r<=4))for(let n=0;n<r-3;n++){let o=r-1;n===0&&(o=r-2);const c=i[n],y=i[n+1];for(let v=n+2;v<o;v++){const _=i[v],I=i[v+1];if(HM(c,y,_,I,on)&&!(on[0]===c[0]&&on[1]===c[1]||on[0]===_[0]&&on[1]===_[1]||on[0]===y[0]&&on[1]===y[1]||on[0]===I[0]&&on[1]===I[1]))return!0}}}return!1}function iX(e,t,i){for(let r=0;r<i.length;r++)if(HM(e,t,i[r][0],i[r][1]))return!0;return!1}function HM(e,t,i,r,n){const[o,c]=e,[y,v]=t,[_,I]=i,[$,A]=r,k=$-_,R=o-_,N=y-o,D=A-I,j=c-I,z=v-c,U=D*N-k*z;if(U===0)return!1;const W=(k*j-D*R)/U,Q=(N*j-z*R)/U;return W>=0&&W<=1&&Q>=0&&Q<=1&&(n&&(n[0]=o+W*(y-o),n[1]=c+W*(v-c)),!0)}function uge(e){switch(e){case"esriGeometryEnvelope":case"extent":return ige;case"esriGeometryMultipoint":case"multipoint":return rge;case"esriGeometryPoint":case"point":return tge;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return sge;case"esriGeometryPolyline":case"polyline":return age}}var Ko;function cge(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function fh(e,t,i){return t==null?i:i==null?t:e(t,i)}let Gr=Ko=class extends rh{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,i,r,n){return cge(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?rt.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:i,ymax:r,spatialReference:n??rt.WGS84}}static fromBounds(e,t){return new Ko({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new Ko({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new st({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new Ko;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&KS(t,i)&&(e=t.isWebMercator?Au(e):r1(e,!0)),e.type==="point"?m3(this,e):e.type==="extent"&&Y1e(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&KS(t,i)&&(e=t.isWebMercator?Au(e):r1(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),i=this.width*t,r=this.height*t;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const n=(this.zmax-this.zmin)*t;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*t;this.mmin+=n,this.mmax-=n}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,i=e.spatialReference;return t&&i&&!_r(t,i)&&KS(t,i)&&(e=t.isWebMercator?Au(e):r1(e,!0)),uge(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,i){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=fh(Math.min,this.zmin,e.zmin),this.zmax=fh(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=fh(Math.min,this.mmin,e.mmin),this.mmax=fh(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=fh(Math.max,this.zmin,e.zmin),this.zmax=fh(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=fh(Math.max,this.mmin,e.mmin),this.mmax=fh(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=Cs(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,i=this._getCM(e);if(i){const r=t.isWebMercator?r1(i):i;this.xmin-=i.x,this.xmax-=i.x,t.isWebMercator||(r.x=f$(r.x,e).x),this.spatialReference=new rt(Il((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(e){let t=null;const[i,r]=e.valid,n=this.xmin,o=this.xmax;return n>=i&&n<=r&&o>=i&&o<=r||(t=this.center),t}_normalize(e,t,i){const r=this.spatialReference;if(!r)return this;const n=i??Cs(r);if(n==null)return this;const o=this._getParts(n).map(v=>v.extent);if(o.length<2)return o[0]||this;if(o.length>2)return e?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(e)return this._shiftCM(n);if(t)return o;let c=!0,y=!0;return o.forEach(v=>{v.hasZ||(c=!1),v.hasM||(y=!1)}),{rings:o.map(v=>{const _=[[v.xmin,v.ymin],[v.xmin,v.ymax],[v.xmax,v.ymax],[v.xmax,v.ymin],[v.xmin,v.ymin]];if(c){const I=(v.zmax-v.zmin)/2;for(let $=0;$<_.length;$++)_[$].push(I)}if(y){const I=(v.mmax-v.mmin)/2;for(let $=0;$<_.length;$++)_[$].push(I)}return _}),hasZ:c,hasM:y,spatialReference:r}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:n,ymax:o,spatialReference:c}=this,y=this.width,v=this.xmin,_=this.xmax;let I;e=e||Cs(c);const[$,A]=e.valid;I=f$(this.xmin,e);const k=I.x,R=I.frameId;I=f$(this.xmax,e);const N=I.x,D=I.frameId,j=k===N&&y>0;if(y>2*A){const z=new Ko(v<_?k:N,n,A,o,c),U=new Ko($,n,v<_?N:k,o,c),W=new Ko(0,n,A,o,c),Q=new Ko($,n,0,o,c),K=[],ee=[];z.contains(W)&&K.push(R),z.contains(Q)&&ee.push(R),U.contains(W)&&K.push(D),U.contains(Q)&&ee.push(D);for(let ie=R+1;ie<D;ie++)K.push(ie),ee.push(ie);t.push({extent:z,frameIds:[R]},{extent:U,frameIds:[D]},{extent:W,frameIds:K},{extent:Q,frameIds:ee})}else k>N||j?t.push({extent:new Ko(k,n,A,o,c),frameIds:[R]},{extent:new Ko($,n,N,o,c),frameIds:[D]}):t.push({extent:new Ko(k,n,N,o,c),frameIds:[R]});this.cache._parts=t}const i=this.hasZ,r=this.hasM;if(i||r){const n={};i&&(n.zmin=this.zmin,n.zmax=this.zmax),r&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let o=0;o<t.length;o++)t[o].extent.set(n)}return t}};function f$(e,t){const[i,r]=t.valid,n=2*r;let o,c=0;return e>r?(o=Math.ceil(Math.abs(e-r)/n),e-=o*n,c=o):e<i&&(o=Math.ceil(Math.abs(e-i)/n),e+=o*n,c=-o),{x:e,frameId:c}}m([w({readOnly:!0})],Gr.prototype,"cache",null),m([w({readOnly:!0})],Gr.prototype,"center",null),m([w({readOnly:!0})],Gr.prototype,"extent",null),m([w({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Gr.prototype,"hasM",null),m([w({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Gr.prototype,"hasZ",null),m([w({readOnly:!0})],Gr.prototype,"height",null),m([w({readOnly:!0})],Gr.prototype,"width",null),m([w({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Gr.prototype,"xmin",void 0),m([w({type:Number,json:{write:!0}})],Gr.prototype,"ymin",void 0),m([w({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Gr.prototype,"mmin",void 0),m([w({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Gr.prototype,"zmin",void 0),m([w({type:Number,json:{write:!0}})],Gr.prototype,"xmax",void 0),m([w({type:Number,json:{write:!0}})],Gr.prototype,"ymax",void 0),m([w({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Gr.prototype,"mmax",void 0),m([w({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Gr.prototype,"zmax",void 0),Gr=Ko=m([H("esri.geometry.Extent")],Gr),Gr.prototype.toJSON.isDefaultToJSON=!0;const Ut=Gr;function ag(e,t,i=!1){let{hasM:r,hasZ:n}=e;Array.isArray(t)?t.length!==4||r||n?t.length===3&&i&&!r?(n=!0,r=!1):t.length===3&&r&&n&&(r=!1,n=!1):(r=!0,n=!0):(n=!n&&t.hasZ&&(!r||t.hasM),r=!r&&t.hasM&&(!n||t.hasZ)),e.hasZ=n,e.hasM=r}var WM;function PD(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}function hge(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Eh=WM=class extends rh{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){var n;if(!e&&!t)return{};const i={};Array.isArray(e)?(i.points=e,i.spatialReference=t):hge(e)?i.spatialReference=e:(e.points&&(i.points=e.points),e.spatialReference&&(i.spatialReference=e.spatialReference),e.hasZ&&(i.hasZ=e.hasZ),e.hasM&&(i.hasM=e.hasM));const r=(n=i.points)==null?void 0:n[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new Ut,i=this.hasZ,r=this.hasM,n=i?3:2,o=e[0],c=PD(Math.min),y=PD(Math.max);let v,_,I,$,[A,k]=o,[R,N]=o;for(let D=0,j=e.length;D<j;D++){const z=e[D],[U,W]=z;if(A=c(A,U),k=c(k,W),R=y(R,U),N=y(N,W),i&&z.length>2){const Q=z[2];v=c(v,Q),I=y(I,Q)}if(r&&z.length>n){const Q=z[n];_=c(_,Q),$=y($,Q)}}return t.xmin=A,t.ymin=k,t.xmax=R,t.ymax=N,t.spatialReference=this.spatialReference,i?(t.zmin=v,t.zmax=I):(t.zmin=void 0,t.zmax=void 0),r?(t.mmin=_,t.mmax=$):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=le(this.points)}addPoint(e){return ag(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:le(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new WM(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],i={x:t[0],y:t[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=t[2],r=3),this.hasM&&(i.m=t[r]),new st(i)}removePoint(e){if(!this._validateInputs(e))return null;const t=new st(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(ag(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};m([w({readOnly:!0})],Eh.prototype,"cache",null),m([w()],Eh.prototype,"extent",null),m([w({type:[[Number]],json:{write:{isRequired:!0}}})],Eh.prototype,"points",void 0),m([Le("points")],Eh.prototype,"writePoints",null),Eh=WM=m([H("esri.geometry.Multipoint")],Eh),Eh.prototype.toJSON.isDefaultToJSON=!0;const Pg=Eh;function EJe(e){const t=[];for(e.reset();e.nextPath();){const i=[];for(;e.nextPoint();)i.push([e.x,e.y]);t.push(i)}return e.reset(),t}function dge(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}var P9;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(P9||(P9={}));function xO(e,t){const i=t[0]-e[0],r=t[1]-e[1];if(e.length>2&&t.length>2){const n=e[2]-t[2];return Math.sqrt(i*i+r*r+n*n)}return Math.sqrt(i*i+r*r)}function pge(e,t,i){const r=e[0]+i*(t[0]-e[0]),n=e[1]+i*(t[1]-e[1]);return e.length>2&&t.length>2?[r,n,e[2]+i*(t[2]-e[2])]:[r,n]}function fge(e,t,i,r){return yge(e,t,i[r],i[r+1])}function yge(e,t,i,r){const[n,o]=t,[c,y]=i,[v,_]=r,I=v-c,$=_-y,A=I*I+$*$,k=(n-c)*I+(o-y)*$,R=Math.min(1,Math.max(0,k/A));return e[0]=c+I*R,e[1]=y+$*R,e}function MJe(e,t,i,r,n,o){let c=i,y=r,v=n-c,_=o-y;if(v!==0||_!==0){const I=((e-c)*v+(t-y)*_)/(v*v+_*_);I>1?(c=n,y=o):I>0&&(c+=v*I,y+=_*I)}return v=e-c,_=t-y,v*v+_*_}function rX(e,t){return pge(e,t,.5)}function AJe(e){const t=e.length;let i=0;for(let r=0;r<t-1;++r)i+=xO(e[r],e[r+1]);return i}function nX(e,t=P9.X,i=P9.Y){let r=0;const n=e.length;let o=e[0];for(let c=1;c<n;c++){const y=e[c];r+=(y[t]-o[t])*(y[i]+o[i]),o=y}if(!sX(e)){const c=e[0];r+=(c[t]-o[t])*(c[i]+o[i])}return r>=0}function sX(e){const t=e.length;return t<3||tI(e[0],e[t-1])}function CJe(e){"rings"in e&&(mge(e),gge(e))}function mge(e){if(!("rings"in e))return!1;let t=!1;for(const i of e.rings)sX(i)||(i.push(i[0].slice()),t=!0);return t}function gge(e){if(!("rings"in e)||e.rings.length===0||nX(e.rings[0]))return!1;for(const t of e.rings)t.reverse();return!0}function kJe(e){return e.type!=="polygon"&&e.type!=="polyline"||vge(e.type==="polygon"?e.rings:e.paths,e.spatialReference),e}function vge(e,t){const i=Cs(t);if(!i)return;const r=i.valid[0],n=i.valid[1],o=n-r;for(const c of e){let y=1/0,v=-1/0;for(const I of c){const $=wge(I[0],r,n);y=Math.min(y,$),v=Math.max(v,$),I[0]=$}const _=v-y;o-_<_&&c.forEach(I=>{I[0]<0&&(I[0]+=o)})}}function wge(e,t,i){const r=i-t;return e<t?i-(t-e)%r:e>i?t+(e-t)%r:e}function LJe(e,t){if(e===t)return!0;if(e.type!==t.type)return!1;if(e.type==="point"||e.type==="mesh"||e.type==="extent")return!0;if(e.type==="multipoint")return e.points.length===t.points.length;const[i,r]=e.type==="polyline"?[e.paths,t.paths]:[e.rings,t.rings];return i.length===r.length&&i.every((n,o)=>n.length===r[o].length)}function OJe(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function bge(e){return e?_ge(e.rings,e.hasZ??!1):null}function _ge(e,t){if(!(e!=null&&e.length))return null;const i=[],r=[],n=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let o=0,c=e.length;o<c;o++){const y=oX(e[o],t,n);y&&r.push(y)}if(r.sort((o,c)=>{let y=o[2]-c[2];return y===0&&t&&(y=o[4]-c[4]),y}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],t&&(i[2]=r[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||t&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){const o=e[0]&&e[0].length?Sge(e[0],t):null;if(!o)return null;i[0]=o[0],i[1]=o[1],t&&o.length>2&&(i[2]=o[2])}return i}function oX(e,t,i){let r=0,n=0,o=0,c=0,y=0;const v=e.length?e[0][0]:0,_=e.length?e[0][1]:0,I=e.length&&t?e[0][2]:0;for(let A=0;A<e.length;A++){const k=e[A],R=e[(A+1)%e.length],[N,D,j]=k,z=N-v,U=D-_,[W,Q,K]=R,ee=W-v,ie=Q-_,ae=z*ie-ee*U;if(c+=ae,r+=(z+ee)*ae,n+=(U+ie)*ae,t&&k.length>2&&R.length>2){const ue=j-I,Ie=K-I,Ae=z*Ie-ee*ue;o+=(ue+Ie)*Ae,y+=Ae}N<i[0]&&(i[0]=N),N>i[1]&&(i[1]=N),D<i[2]&&(i[2]=D),D>i[3]&&(i[3]=D),t&&(j<i[4]&&(i[4]=j),j>i[5]&&(i[5]=j))}if(c>0&&(c*=-1),y>0&&(y*=-1),!c)return null;c*=.5,y*=.5;const $=[r/(6*c)+v,n/(6*c)+_,c];return t&&(i[4]===i[5]||y===0?($[3]=(i[4]+i[5])/2,$[4]=0):($[3]=o/(6*y)+I,$[4]=y)),$}function RJe(e,t){let i=0,r=0,n=0;e.nextPoint();const o=e.pathSize?e.x:0,c=e.pathSize?e.y:0;for(let y=0;y<e.pathSize;y++){e.seekInPath(y);const v=[e.x,e.y];e.seekInPath((y+1)%e.pathSize);const _=[e.x,e.y],[I,$]=v,A=I-o,k=$-c,[R,N]=_,D=R-o,j=N-c,z=A*j-D*k;n+=z,i+=(A+D)*z,r+=(k+j)*z,I<t[0]&&(t[0]=I),I>t[1]&&(t[1]=I),$<t[2]&&(t[2]=$),$>t[3]&&(t[3]=$)}return n>0&&(n*=-1),n?(n*=.5,[i/(6*n)+o,r/(6*n)+c,n]):null}function Sge(e,t){const i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let n=0,o=0,c=0,y=0;for(let v=0,_=e.length;v<_-1;v++){const I=e[v],$=e[v+1];if(I&&$){i[0]=I[0],i[1]=I[1],r[0]=$[0],r[1]=$[1],t&&I.length>2&&$.length>2&&(i[2]=I[2],r[2]=$[2]);const A=xO(i,r);if(A){n+=A;const k=rX(I,$);o+=A*k[0],c+=A*k[1],t&&k.length>2&&(y+=A*k[2])}}}return n>0?t?[o/n,c/n,y/n]:[o/n,c/n]:e.length?e[0]:null}function xge(e){const{hasZ:t,totalSize:i}=e;if(i===0)return null;const r=[],n=[],o=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const c=oX(dge(e),e.hasZ,o);c&&n.push(c)}if(n.sort((c,y)=>{let v=c[2]-y[2];return v===0&&t&&(v=c[4]-y[4]),v}),n.length&&(r[0]=n[0][0],r[1]=n[0][1],t&&(r[2]=n[0][3]),(r[0]<o[0]||r[0]>o[1]||r[1]<o[2]||r[1]>o[3]||t&&(r[2]<o[4]||r[2]>o[5]))&&(r.length=0)),!r.length){e.reset(),e.nextPath();const c=e.pathSize?Ige(e):null;if(!c)return null;r[0]=c[0],r[1]=c[1],t&&c.length>2&&(r[2]=c[2])}return r}function Ige(e){const{hasZ:t}=e,i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let n=0,o=0,c=0,y=0;if(e.nextPoint()){let v=e.x,_=e.y,I=e.z;for(;e.nextPoint();){const $=e.x,A=e.y,k=e.z;i[0]=v,i[1]=_,r[0]=$,r[1]=A,t&&(i[2]=I,r[2]=k);const R=xO(i,r);if(R){n+=R;const N=rX(i,r);o+=R*N[0],c+=R*N[1],t&&N.length>2&&(y+=R*N[2])}v=$,_=A,I=k}}return n>0?t?[o/n,c/n,y/n]:[o/n,c/n]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const Tge=1e-6;function PJe(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<Tge){const n=xge(e);return n?[n[0],n[1]]:null}const i=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const r=[e.x,e.y];for(e.reset();e.nextPath();)Ege(i,r,e);return i[0]*=1/t,i[1]*=1/t,i[0]+=r[0],i[1]+=r[1],i}const $ge=1/3;function Ege(e,t,i){if(!e||!i||i.pathSize<3)return null;i.nextPoint();const r=i.x,n=i.y;i.nextPoint();let o,c=i.x-r,y=i.y-n,v=0,_=0;for(;i.nextPoint();)v=i.x-r,_=i.y-n,o=.5*$ge*(v*y-_*c),e[0]+=o*(c+v),e[1]+=o*(y+_),c=v,y=_;const I=i.getCurrentRingArea(),$=[r,n];return $[0]-=t[0],$[1]-=t[1],$[0]*=I,$[1]*=I,e[0]+=$[0],e[1]+=$[1],e}const ND=new Float32Array(1);function NJe(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function co(e,t,i){return Math.min(Math.max(e,t),i)}function FJe(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function Kv(e,t,i){return e+(t-e)*i}function DJe(e,t,i,r,n){return Kv(r,n,(e-t)/(i-t))}function gI(e){return e*Math.PI/180}function aX(e){return 180*e/Math.PI}function jJe(e){return Math.acos(co(e,-1,1))}function Mge(e){return Math.asin(co(e,-1,1))}function bb(e,t,i=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=i}const N9=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function JM(e){return N9.setFloat64(0,e),N9.getBigInt64(0)}function Age(e){return N9.setBigInt64(0,e),N9.getFloat64(0)}const XS=BigInt("1000000"),Cge=lX(1);function lX(e){const t=JM(e=Math.abs(e)),i=Age(t<=XS?XS:t-XS);return Math.abs(e-i)}function zJe(e,t,i=Cge){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(i!=null&&lX(Math.min(Math.abs(e),Math.abs(t)))<i)return Math.abs(e-t)<=i;const r=JM(e),n=JM(t);return r<0!=n<0?!1:!((r<n?n-r:r-n)>XS)}function VJe(e){return uX(Math.max(-FD,Math.min(e,FD)))}function uX(e){return ND[0]=e,ND[0]}function UJe(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],r=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(bb(t,1)&&bb(i,1)&&bb(r,1))}const FD=uX(34028234663852886e22);function BJe(e,t,i){if(i===void 0||+i==0)return Math[e](t);if(t=+t,i=+i,isNaN(t)||typeof i!="number"||i%1!=0)return NaN;let r=t.toString().split("e");return r=(t=Math[e](+(r[0]+"e"+(r[1]?+r[1]-i:-i)))).toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+i:i))}function to(e=Lge){return[e[0],e[1],e[2],e[3]]}function cX(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function GJe(e,t,i,r,n=to()){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n}function qJe(e,t=to()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function HJe(e,t){return new Ut({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function WJe(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function JJe(e,t,i){if(t!=null)if("length"in t)ZM(t)?(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[2]),i[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[0]),i[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":i[0]=Math.min(e[0],t.xmin),i[1]=Math.min(e[1],t.ymin),i[2]=Math.max(e[2],t.xmax),i[3]=Math.max(e[3],t.ymax);break;case"point":i[0]=Math.min(e[0],t.x),i[1]=Math.min(e[1],t.y),i[2]=Math.max(e[2],t.x),i[3]=Math.max(e[3],t.y)}else cX(i,e)}function hX(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function dX(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function ZJe(e){return hX(e)*dX(e)}function KJe(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function YJe(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function XJe(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function kge(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function QJe(e){return e?cX(e,DD):to(DD)}function ZM(e){return e!=null&&e.length===4}function eZe(e,t){return ZM(e)&&ZM(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const DD=[1/0,1/0,-1/0,-1/0],Lge=[0,0,0,0];function pX(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function fX(e){return e.points!==void 0}function yX(e){return e.x!==void 0&&e.y!==void 0}function mX(e){return e.paths!==void 0}function gX(e){return e.rings!==void 0}function vX(e){function t(i,r){return i==null?r:r==null?i:e(i,r)}return t}const $d=vX(Math.min),Ed=vX(Math.max);function tZe(e,t){return mX(t)?lg(e,t.paths,!1,!1):gX(t)?lg(e,t.rings,!1,!1):fX(t)?IO(e,t.points,!1,!1,!1,!1):pX(t)?wX(e,t):(yX(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function iZe(e){let t,i,r,n;for(e.reset(),t=r=1/0,i=n=-1/0;e.nextPath();){const o=Oge(e);t=Math.min(o[0],t),r=Math.min(o[1],r),i=Math.max(o[2],i),n=Math.max(o[3],n)}return to([t,r,i,n])}function Oge(e){let t,i,r,n;for(t=r=1/0,i=n=-1/0;e.nextPoint();)t=Math.min(e.x,t),r=Math.min(e.y,r),i=Math.max(e.x,i),n=Math.max(e.y,n);return to([t,r,i,n])}function rZe(e,t){return mX(t)?lg(e,t.paths,!0,!1):gX(t)?lg(e,t.rings,!0,!1):fX(t)?IO(e,t.points,!0,!1,!0,!1):pX(t)?wX(e,t,!0,!1,!0,!1):(yX(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function lg(e,t,i,r){const n=i?3:2;if(!t.length||!t[0].length)return null;let o,c,y,v,[_,I]=t[0][0],[$,A]=t[0][0];for(let k=0;k<t.length;k++){const R=t[k];for(let N=0;N<R.length;N++){const D=R[N],[j,z]=D;if(_=$d(_,j),I=$d(I,z),$=Ed($,j),A=Ed(A,z),i&&D.length>2){const U=D[2];o=$d(o,U),c=Ed(c,U)}if(r&&D.length>n){const U=D[n];y=$d(o,U),v=Ed(c,U)}}}return i?r?(e[0]=_,e[1]=I,e[2]=o,e[3]=y,e[4]=$,e[5]=A,e[6]=c,e[7]=v,e.length=8,e):(e[0]=_,e[1]=I,e[2]=o,e[3]=$,e[4]=A,e[5]=c,e.length=6,e):r?(e[0]=_,e[1]=I,e[2]=y,e[3]=$,e[4]=A,e[5]=v,e.length=6,e):(e[0]=_,e[1]=I,e[2]=$,e[3]=A,e.length=4,e)}function wX(e,t,i,r,n,o){const c=t.xmin,y=t.xmax,v=t.ymin,_=t.ymax;let I=t.zmin,$=t.zmax,A=t.mmin,k=t.mmax;return n?(I=I||0,$=$||0,o?(A=A||0,k=k||0,e[0]=c,e[1]=v,e[2]=I,e[3]=A,e[4]=y,e[5]=_,e[6]=$,e[7]=k,e):(e[0]=c,e[1]=v,e[2]=I,e[3]=y,e[4]=_,e[5]=$,e)):o?(A=A||0,k=k||0,e[0]=c,e[1]=v,e[2]=A,e[3]=y,e[4]=_,e[5]=k,e):(e[0]=c,e[1]=v,e[2]=y,e[3]=_,e)}function IO(e,t,i,r,n,o){const c=i?3:2,y=r&&o,v=i&&n;if(!t.length||!t[0].length)return null;let _,I,$,A,[k,R]=t[0],[N,D]=t[0];for(let j=0;j<t.length;j++){const z=t[j],[U,W]=z;if(k=$d(k,U),R=$d(R,W),N=Ed(N,U),D=Ed(D,W),v&&z.length>2){const Q=z[2];_=$d(_,Q),I=Ed(I,Q)}if(y&&z.length>c){const Q=z[c];$=$d(_,Q),A=Ed(I,Q)}}return n?(_=_||0,I=I||0,o?($=$||0,A=A||0,e[0]=k,e[1]=R,e[2]=_,e[3]=$,e[4]=N,e[5]=D,e[6]=I,e[7]=A,e):(e[0]=k,e[1]=R,e[2]=_,e[3]=N,e[4]=D,e[5]=I,e)):o?($=$||0,A=A||0,e[0]=k,e[1]=R,e[2]=$,e[3]=N,e[4]=D,e[5]=A,e):(e[0]=k,e[1]=R,e[2]=N,e[3]=D,e)}function Rge(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function Pge(e){return e.points!==void 0}function Nge(e){return e.x!==void 0&&e.y!==void 0}function Fge(e){return e.paths!==void 0}function Dge(e){return e.rings!==void 0}const TO=[];function bX(e,t,i,r){return{xmin:e,ymin:t,xmax:i,ymax:r}}function _X(e,t,i,r,n,o){return{xmin:e,ymin:t,zmin:i,xmax:r,ymax:n,zmax:o}}function SX(e,t,i,r,n,o){return{xmin:e,ymin:t,mmin:i,xmax:r,ymax:n,mmax:o}}function xX(e,t,i,r,n,o,c,y){return{xmin:e,ymin:t,zmin:i,mmin:r,xmax:n,ymax:o,zmax:c,mmax:y}}function $O(e,t=!1,i=!1){return t?i?xX(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):_X(e[0],e[1],e[2],e[3],e[4],e[5]):i?SX(e[0],e[1],e[2],e[3],e[4],e[5]):bX(e[0],e[1],e[2],e[3])}function nZe(e){return e?Rge(e)?e:Nge(e)?zge(e):Dge(e)?IX(e):Fge(e)?TX(e):Pge(e)?jge(e):null:null}function jge(e){const{hasZ:t,hasM:i,points:r}=e;return $O(IO(TO,r,t??!1,i??!1),t,i)}function zge(e){const{x:t,y:i,z:r,m:n}=e,o=n!=null;return r!=null?o?xX(t,i,r,n,t,i,r,n):_X(t,i,r,t,i,r):o?SX(t,i,n,t,i,n):bX(t,i,t,i)}function IX(e){const{hasZ:t,hasM:i,rings:r}=e,n=lg(TO,r,t??!1,i??!1);return n?$O(n,t,i):null}function TX(e){const{hasZ:t,hasM:i,paths:r}=e,n=lg(TO,r,t??!1,i??!1);return n?$O(n,t,i):null}var QS;function jD(e){return!Array.isArray(e[0])}function Vge(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function Uge(e){var o,c;if(!e)return;let{rings:t,hasM:i,hasZ:r,spatialReference:n}=e;switch(t??(t=[]),Vge(t)&&(t=[t]),(c=(o=t[0])==null?void 0:o[0])==null?void 0:c.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return n??(n=rt.WGS84),{...e,hasM:i,hasZ:r,rings:t,spatialReference:n}}let du=QS=class extends rh{static fromExtent(e){const t=e.clone().normalize(),{spatialReference:i}=e;let r=!1,n=!1;for(const c of t)c.hasZ&&(r=!0),c.hasM&&(n=!0);const o={rings:t.map(c=>{const y=[[c.xmin,c.ymin],[c.xmin,c.ymax],[c.xmax,c.ymax],[c.xmax,c.ymin],[c.xmin,c.ymin]];if(r&&c.hasZ){const v=c.zmin+.5*(c.zmax-c.zmin);for(let _=0;_<y.length;_++)y[_].push(v)}if(n&&c.hasM){const v=c.mmin+.5*(c.mmax-c.mmin);for(let _=0;_<y.length;_++)y[_].push(v)}return y}),spatialReference:i};return r&&(o.hasZ=!0),n&&(o.hasM=!0),new QS(o)}constructor(e){super(Uge(e)),this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=bge(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new st;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=IX(this);if(!t)return null;const i=new Ut(t);return i.spatialReference=e,i}get isSelfIntersecting(){return lge(this.rings)}writeRings(e,t){t.rings=le(this.rings)}addRing(e){if(!e)return;const t=this.rings,i=t.length;if(jD(e)){const r=[];for(let n=0,o=e.length;n<o;n++)r[n]=e[n].toArray();t[i]=r}else t[i]=e.slice();return this.notifyChange("rings"),this}clone(){const e=new QS;return e.spatialReference=this.spatialReference,e.rings=le(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,i=e.spatialReference;if(t!=null!=(i!=null)||t!=null&&i!=null&&!t.equals(i)||this.rings.length!==e.rings.length)return!1;const r=([n,o,c,y],[v,_,I,$])=>n===v&&o===_&&(c==null&&I==null||c===I)&&(y==null&&$==null||y===$);for(let n=0;n<this.rings.length;n++){const o=this.rings[n],c=e.rings[n];if(!tI(o,c,r))return!1}return!0}contains(e){if(!e)return!1;const t=yI(e,this.spatialReference);return _O(this,t??e)}isClockwise(e){const t=jD(e)?e.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):e;return nX(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.rings[e][t],r=this.hasZ,n=this.hasM;return r&&!n?new st(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new st(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new st(i[0],i[1],i[2],i[3],this.spatialReference):new st(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(ag(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e].splice(t,0,i),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new st(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],i=this.spatialReference,r=t.map(n=>new st(n,i));return this.notifyChange("rings"),r}setPoint(e,t,i){return this._validateInputs(e,t)?(ag(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e][t]=i,this.notifyChange("rings"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const r=this.rings[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};m([w({readOnly:!0})],du.prototype,"cache",null),m([w({readOnly:!0})],du.prototype,"centroid",null),m([w({readOnly:!0})],du.prototype,"extent",null),m([w({readOnly:!0})],du.prototype,"isSelfIntersecting",null),m([w({type:[[[Number]]],json:{write:{isRequired:!0}}})],du.prototype,"rings",void 0),m([Le("rings")],du.prototype,"writeRings",null),du=QS=m([H("esri.geometry.Polygon")],du);const Os=du;du.prototype.toJSON.isDefaultToJSON=!0;var KM;function Bge(e){return!Array.isArray(e[0])}function Gge(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function qge(e){var o,c;if(!e)return;let{paths:t,hasM:i,hasZ:r,spatialReference:n}=e;switch(t??(t=[]),Gge(t)&&(t=[t]),(c=(o=t[0])==null?void 0:o[0])==null?void 0:c.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return n??(n=rt.WGS84),{...e,hasM:i,hasZ:r,paths:t,spatialReference:n}}let ld=KM=class extends rh{constructor(e){super(qge(e)),this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=TX(this);if(!t)return null;const i=new Ut(t);return i.spatialReference=e,i}writePaths(e,t){t.paths=le(this.paths)}addPath(e){if(!e)return;const t=this.paths,i=t.length;if(Bge(e)){const r=[];for(let n=0,o=e.length;n<o;n++)r[n]=e[n].toArray();t[i]=r}else t[i]=e.slice();return this.notifyChange("paths"),this}clone(){const e=new KM;return e.spatialReference=this.spatialReference,e.paths=le(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.paths[e][t],r=this.hasZ,n=this.hasM;return r&&!n?new st(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new st(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new st(i[0],i[1],i[2],i[3],this.spatialReference):new st(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(ag(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e].splice(t,0,i),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],i=this.spatialReference,r=t.map(n=>new st(n,i));return this.notifyChange("paths"),r}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new st(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(e,t,i){return this._validateInputs(e,t)?(ag(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e][t]=i,this.notifyChange("paths"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const r=this.paths[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};m([w({readOnly:!0})],ld.prototype,"cache",null),m([w({readOnly:!0})],ld.prototype,"extent",null),m([w({type:[[[Number]]],json:{write:{isRequired:!0}}})],ld.prototype,"paths",void 0),m([Le("paths")],ld.prototype,"writePaths",null),ld=KM=m([H("esri.geometry.Polyline")],ld);const io=ld;ld.prototype.toJSON.isDefaultToJSON=!0;const Hge=nn()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),zD=nn()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function $X(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function EX(e){return e.points!==void 0}function MX(e){return e.x!==void 0&&e.y!==void 0}function EO(e){return e.paths!==void 0}function n0(e){return e.rings!==void 0}function Xc(e){return e==null?null:e instanceof rh?e:MX(e)?st.fromJSON(e):EO(e)?io.fromJSON(e):n0(e)?Os.fromJSON(e):EX(e)?Pg.fromJSON(e):$X(e)?Ut.fromJSON(e):null}function Ng(e){return e?MX(e)?"esriGeometryPoint":EO(e)?"esriGeometryPolyline":n0(e)?"esriGeometryPolygon":$X(e)?"esriGeometryEnvelope":EX(e)?"esriGeometryMultipoint":null:null}const Wge={esriGeometryPoint:st,esriGeometryPolyline:io,esriGeometryPolygon:Os,esriGeometryEnvelope:Ut,esriGeometryMultipoint:Pg,esriGeometryMultiPatch:Os};function Jge(e){return e&&Wge[e]||null}const q0={base:rh,key:"type",typeMap:{extent:Ut,multipoint:Pg,point:st,polyline:io,polygon:Os}};Ma(q0);const St=e=>{let t=class extends e{clone(){var v;const i=uo(this);h3(i,"unable to clone instance of non-accessor class");const r=i.metadata,n=i.store,o={},c=new Map;for(const _ in r){const I=r[_],$=n==null?void 0:n.originOf(_),A=I.clonable;if(I.readOnly||A===!1||$!==dt.USER&&$!==dt.DEFAULTS&&$!==dt.WEB_MAP&&$!==dt.WEB_SCENE)continue;const k=this[_];let R=null;R=typeof A=="function"?A(k):A==="reference"?k:dM(k),k!=null&&R==null||($===dt.DEFAULTS?c.set(_,R):o[_]=R)}const y=new(Object.getPrototypeOf(this)).constructor(o);if(c.size){const _=(v=uo(y))==null?void 0:v.store;if(_)for(const[I,$]of c)_.set(I,$,dt.DEFAULTS)}return y}};return t=m([H("esri.core.Clonable")],t),t};let YM=class extends St(Ve){};YM=m([H("esri.core.Clonable")],YM);let Fp=class extends YM{constructor(t){super(t),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(t){return t!=null&&this.row===t.row&&this.rows===t.rows&&this.column===t.column&&this.columns===t.columns}};m([w({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Fp.prototype,"row",void 0),m([w({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Fp.prototype,"column",void 0),m([w({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Fp.prototype,"rows",void 0),m([w({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Fp.prototype,"columns",void 0),Fp=m([H("esri.CameraLayout")],Fp);const AX=Fp;let Zge=class{constructor(t,i){this.min=t,this.max=i,this.range=i-t}normalize(t,i=0,r=!1){return VD(this.range,this.min,this.max,t,i,r)}clamp(t,i=0){return co(t-i,this.min,this.max)+i}monotonic(t,i,r){return t<i?i:i+XM(this.range,t-i,r)}minimalMonotonic(t,i,r){return VD(this.range,t,t+this.range,i,r)}center(t,i,r){return i=this.monotonic(t,i,r),this.normalize((t+i)/2,r)}diff(t,i,r){return this.monotonic(t,i,r)-t}shortestSignedDiff(t,i){t=this.normalize(t);const r=(i=this.normalize(i))-t,n=i<t?this.minimalMonotonic(t,i)-t:i-this.minimalMonotonic(i,t);return Math.abs(r)<Math.abs(n)?r:n}contains(t,i,r){return i=this.minimalMonotonic(t,i),(r=this.minimalMonotonic(t,r))>t&&r<i}};function VD(e,t,i,r,n=0,o=!1){return(r-=n)<t?r+=XM(e,t-r):r>i&&(r-=XM(e,r-i)),o&&r===i&&(r=t),r+n}function XM(e,t,i=0){return Math.ceil((t-i)/e)*e+i}const CX=new Zge(0,360);let Ul=class extends St(be){constructor(...t){super(...t),this.position=new st([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new AX}normalizeCtorArgs(t,i,r,n){if(t&&typeof t=="object"&&("x"in t||Array.isArray(t))){const o={position:t};return i!=null&&(o.heading=i),r!=null&&(o.tilt=r),n!=null&&(o.fov=n),o}return t}writePosition(t,i,r,n){const o=t.clone();o.x=Es(t.x||0),o.y=Es(t.y||0),o.z=t.hasZ?Es(t.z||0):t.z,i[r]=o.write({},n)}readPosition(t,i){const r=new st;return r.read(t,i),r.x=Es(r.x||0),r.y=Es(r.y||0),r.z=r.hasZ?Es(r.z||0):r.z,r}equals(t){return t!=null&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)&&this.layout.equals(t.layout)}};m([w({type:st,json:{write:{isRequired:!0}}})],Ul.prototype,"position",void 0),m([Le("position")],Ul.prototype,"writePosition",null),m([ke("position")],Ul.prototype,"readPosition",null),m([w({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),wt(e=>CX.normalize(Es(e)))],Ul.prototype,"heading",void 0),m([w({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),wt(e=>co(Es(e),-180,180))],Ul.prototype,"tilt",void 0),m([w({type:Number,nonNullable:!0,json:{default:55,write:!0}}),wt(e=>co(Es(e,55),1,170))],Ul.prototype,"fov",void 0),m([w({type:AX,nonNullable:!0,json:{read:!1,write:!1}})],Ul.prototype,"layout",void 0),Ul=m([H("esri.Camera")],Ul);const Kge=Ul;var QM;let Mh=QM=class extends be{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new QM({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};m([w({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:y$}}}}})],Mh.prototype,"rotation",void 0),m([wt("rotation")],Mh.prototype,"castRotation",null),m([w({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:y$}}}}})],Mh.prototype,"scale",void 0),m([w({types:q0,json:{read:Xc,write:!0,origins:{"web-scene":{read:Xc,write:{overridePolicy:y$}}}}})],Mh.prototype,"targetGeometry",void 0),m([w({type:Kge,json:{write:!0}})],Mh.prototype,"camera",void 0),Mh=QM=m([H("esri.Viewpoint")],Mh);const wn=Mh;function y$(){return{enabled:!this.camera}}let e5=class kX{constructor(){this._emitter=new kX.EventEmitter(this)}emit(t,i){return this._emitter.emit(t,i)}on(t,i){return this._emitter.on(t,i)}once(t,i){return this._emitter.once(t,i)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(n=null){this._target=n,this._listenersMap=null}clear(){var n;(n=this._listenersMap)==null||n.clear(),this._listenersMap=null}destroy(){this.clear()}emit(n,o){var _;let c=(_=this._listenersMap)==null?void 0:_.get(n);if(!c)return!1;const y=this._target||this;let v=!1;for(const I of c.slice()){const $="deref"in I?I.deref():I;$?$==null||$.call(y,o):v=!0}return v&&(c=c.filter(I=>!("deref"in I)||I.deref()!=null),this._listenersMap.set(n,c)),c.length>0}on(n,o){if(Array.isArray(n)){const y=n.map(v=>this.on(v,o));return l3(y)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const c=this._listenersMap.get(n)||[];return c.push(o),this._listenersMap.set(n,c),ei(()=>{var _;const y=(_=this._listenersMap)==null?void 0:_.get(n),v=(y==null?void 0:y.indexOf(o))??-1;v>=0&&y.splice(v,1)})}once(n,o){const c=this.on(n,y=>{c.remove();const v="deref"in o?o.deref():o;v==null||v.call(null,y)});return c}hasEventListener(n){var c;const o=(c=this._listenersMap)==null?void 0:c.get(n);return o!=null&&o.length>0}}e.EventEmitter=t,e.EventedMixin=r=>{let n=class extends r{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(o,c){return this._emitter.emit(o,c)}on(o,c){return this._emitter.on(o,c)}once(o,c){return this._emitter.once(o,c)}hasEventListener(o){return this._emitter.hasEventListener(o)}};return n=m([H("esri.core.Evented")],n),n};let i=class extends Ve{constructor(){super(...arguments),this._emitter=new e5.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,n){return this._emitter.emit(r,n)}on(r,n){return this._emitter.on(r,n)}once(r,n){return this._emitter.once(r,n)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=m([H("esri.core.Evented.EventedAccessor")],i),e.EventedAccessor=i})(e5||(e5={}));const qo=e5;var ni;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(ni||(ni={}));function MO(e){return(t,i)=>{t[i]=e}}let Fg=class extends zK{notify(){const t=this._observers;if(t&&t.length>0){const i=t.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}};var Rc;let Yge=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}},Xge=class{constructor(t,i,r,n,o){this.target=t,this.added=i,this.removed=r,this.start=n,this.deleteCount=o}};const Wo=new dp(Yge,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1});function UD(e){e&&typeof e=="object"&&"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}function m$(e){return e?e instanceof Ec?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function g$(e){if(e!=null&&e.length)return e[0]}function Qge(e,t,i,r){const n=Math.min(e.length-i,t.length-r);let o=0;for(;o<n&&e[i+o]===t[r+o];)o++;return o}function LX(e,t,i,r){t&&t.forEach((n,o,c)=>{e.push(n),LX(e,i.call(r,n,o,c),i,r)})}const yh=new Set,mh=new Set,gh=new Set,v$=new Map;let eve=0,Ec=Rc=class extends qo.EventedAccessor{static isCollection(e){return e!=null&&e instanceof Rc}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new Fg,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:eve++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof Rc?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return Xe(this._observable),this._items}set items(e){this._emitBeforeChanges(ni.ADD)||(this._splice(0,this.length,m$(e)),this._emitAfterChanges(ni.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,t){if(this.destroyed)return ei();if(e==="change"){const i=this._chgListeners,r={removed:!1,callback:t};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),ei(()=>{r.removed=!0,i.splice(i.indexOf(r),1)})}return this._emitter.on(e,t)}once(e,t){const i="deref"in t?()=>t.deref():()=>t,r=this.on(e,n=>{var o;(o=i())==null||o.call(null,n),r.remove()});return r}add(e,t){if(Xe(this._observable),this._emitBeforeChanges(ni.ADD))return this;const i=this.getNextIndex(t??null);return this._splice(i,0,[e]),this._emitAfterChanges(ni.ADD),this}addMany(e,t=this._items.length){if(Xe(this._observable),!(e!=null&&e.length))return this;if(this._emitBeforeChanges(ni.ADD))return this;const i=this.getNextIndex(t);return this._splice(i,0,m$(e)),this._emitAfterChanges(ni.ADD),this}at(e){if(Xe(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(Xe(this._observable),!this.length||this._emitBeforeChanges(ni.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(ni.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Xe(this._observable),this._createNewInstance({items:this._items.map(le)})}concat(...e){Xe(this._observable);const t=e.map(m$);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(Xe(this._observable),!this.length||this._emitBeforeChanges(ni.REMOVE))return;const i=this._splice(0,this.length),r=i.length;for(let n=0;n<r;n++)e.call(t,i[n],n,i);this._emitAfterChanges(ni.REMOVE)}destroyAll(){this.drain(UD)}destroyMany(e){const t=this.removeMany(e);return t.forEach(UD),t}every(e,t){return Xe(this._observable),this._items.every(e,t)}filter(e,t){let i;return Xe(this._observable),i=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:i})}find(e,t){return Xe(this._observable),this._items.find(e,t)}findIndex(e,t){return Xe(this._observable),this._items.findIndex(e,t)}flatten(e,t){Xe(this._observable);const i=[];return LX(i,this,e,t),new Rc(i)}forEach(e,t){return Xe(this._observable),this._items.forEach(e,t)}getItemAt(e){return Xe(this._observable),this._items[e]}getNextIndex(e){Xe(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return Xe(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return Xe(this._observable),this._items.indexOf(e,t)}join(e=","){return Xe(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return Xe(this._observable),this._items.lastIndexOf(e,t)}map(e,t){Xe(this._observable);const i=this._items.map(e,t);return new Rc({items:i})}reorder(e,t=this.length-1){Xe(this._observable);const i=this.indexOf(e);if(i!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(ni.MOVE))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(ni.MOVE)}return e}}pop(){if(Xe(this._observable),!this.length||this._emitBeforeChanges(ni.REMOVE))return;const e=g$(this._splice(this.length-1,1));return this._emitAfterChanges(ni.REMOVE),e}push(...e){return Xe(this._observable),this._emitBeforeChanges(ni.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(ni.ADD)),this.length}reduce(e,t){Xe(this._observable);const i=this._items;return arguments.length===2?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){Xe(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return Xe(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(Xe(this._observable),e<0||e>=this.length||this._emitBeforeChanges(ni.REMOVE))return;const t=g$(this._splice(e,1));return this._emitAfterChanges(ni.REMOVE),t}removeMany(e){if(Xe(this._observable),!(e!=null&&e.length)||this._emitBeforeChanges(ni.REMOVE))return[];const t=e instanceof Rc?e.toArray():e,i=this._items,r=[],n=t.length;for(let o=0;o<n;o++){const c=t[o],y=i.indexOf(c);if(y>-1){const v=1+Qge(t,i,o+1,y+1),_=this._splice(y,v);_&&_.length>0&&r.push.apply(r,_),o+=v-1}}return this._emitAfterChanges(ni.REMOVE),r}reverse(){if(Xe(this._observable),this._emitBeforeChanges(ni.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(ni.MOVE),this}shift(){if(Xe(this._observable),!this.length||this._emitBeforeChanges(ni.REMOVE))return;const e=g$(this._splice(0,1));return this._emitAfterChanges(ni.REMOVE),e}slice(e=0,t=this.length){return Xe(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return Xe(this._observable),this._items.some(e,t)}sort(e){if(Xe(this._observable),!this.length||this._emitBeforeChanges(ni.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(ni.MOVE),this}splice(e,t,...i){Xe(this._observable);const r=(t?ni.REMOVE:0)|(i.length?ni.ADD:0);if(this._emitBeforeChanges(r))return[];const n=this._splice(e,t,i)||[];return this._emitAfterChanges(r),n}toArray(){return Xe(this._observable),this._items.slice()}toJSON(){return Xe(this._observable),this.toArray()}toLocaleString(){return Xe(this._observable),this._items.toLocaleString()}toString(){return Xe(this._observable),this._items.toString()}unshift(...e){return Xe(this._observable),!e.length||this._emitBeforeChanges(ni.ADD)||(this._splice(0,0,e),this._emitAfterChanges(ni.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const r=this._items,n=this.itemType;let o,c;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=f3(()=>this._dispatchChange())),e<0&&(e+=this.length),t){if(c=r.splice(e,t),this.hasEventListener("before-remove")){const y=Wo.acquire();y.target=this,y.cancellable=!0;for(let v=0,_=c.length;v<_;v++)o=c[v],y.reset(o),this.emit("before-remove",y),y.defaultPrevented&&(c.splice(v,1),r.splice(e,0,o),e+=1,v-=1,_-=1);Wo.release(y)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const y=Wo.acquire();y.target=this,y.cancellable=!1;const v=c.length;for(let _=0;_<v;_++)y.reset(c[_]),this.emit("after-remove",y);Wo.release(y)}}if(i!=null&&i.length){if(n){const I=[];for(const $ of i){const A=n.ensureType($);A==null&&$!=null||I.push(A)}i=I}const y=this.hasEventListener("before-add"),v=this.hasEventListener("after-add"),_=e===this.length;if(y||v){const I=Wo.acquire();I.target=this,I.cancellable=!0;const $=Wo.acquire();$.target=this,$.cancellable=!1;for(const A of i)y?(I.reset(A),this.emit("before-add",I),I.defaultPrevented||(_?r.push(A):r.splice(e++,0,A),this._set("length",r.length),v&&($.reset(A),this.emit("after-add",$)))):(_?r.push(A):r.splice(e++,0,A),this._set("length",r.length),$.reset(A),this.emit("after-add",$));Wo.release($),Wo.release(I)}else{if(_)for(const I of i)r.push(I);else r.splice(e,0,...i);this._set("length",r.length)}}if((i!=null&&i.length||c!=null&&c.length)&&this._notifyChangeEvent(i,c),this.hasEventListener("after-splice")){const y=new Xge(this,i,c,e,t);this.emit("after-splice",y)}return c}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=Wo.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,Wo.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=Wo.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),Wo.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const i=t.changes;yh.clear(),mh.clear(),gh.clear();for(const{added:v,removed:_}of i){if(v)if(gh.size===0&&mh.size===0)for(const I of v)yh.add(I);else for(const I of v)mh.has(I)?(gh.add(I),mh.delete(I)):gh.has(I)||yh.add(I);if(_)if(gh.size===0&&yh.size===0)for(const I of _)mh.add(I);else for(const I of _)yh.has(I)?yh.delete(I):(gh.delete(I),mh.add(I))}const r=Ms.acquire();yh.forEach(v=>{r.push(v)});const n=Ms.acquire();mh.forEach(v=>{n.push(v)});const o=this._items,c=t.items,y=Ms.acquire();if(gh.forEach(v=>{c.indexOf(v)!==o.indexOf(v)&&y.push(v)}),t.listeners&&(r.length||n.length||y.length)){const v={target:this,added:r,removed:n,moved:y},_=t.listeners.length;for(let I=0;I<_;I++){const $=t.listeners[I];$.removed||$.callback.call(this,v)}}Ms.release(r),Ms.release(n),Ms.release(y)}yh.clear(),mh.clear(),gh.clear()}};Ec.ofType=e=>{if(!e)return Rc;if(v$.has(e))return v$.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const r in e.typeMap){const n=e.typeMap[r].prototype.declaredClass;t?t+=` | ${n}`:t=n}let i=class extends Rc{};return m([MO({Type:e,ensureType:typeof e=="function"?qi(e):Ma(e)})],i.prototype,"itemType",void 0),i=m([H(`esri.core.Collection<${t}>`)],i),v$.set(e,i),i},m([w()],Ec.prototype,"_updating",void 0),m([w()],Ec.prototype,"length",void 0),m([w()],Ec.prototype,"items",null),m([w({readOnly:!0})],Ec.prototype,"updating",null),Ec=Rc=m([H("esri.core.Collection")],Ec);const Oe=Ec;function tve(e,t,i){return eo(e.map((r,n)=>t.apply(i,[r,n])))}async function ive(e,t,i){return(await eo(e.map((r,n)=>t.apply(i,[r,n])))).map(r=>r.value)}function AO(e){return{ok:!0,value:e}}function CO(e){return{ok:!1,error:e}}function rve(e){return e!=null&&e.ok===!0?e.value:null}function nve(e){return e!=null&&e.ok===!1?e.error:null}async function vI(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return AO(await e)}catch(t){return CO(t)}}async function sve(e){try{return AO(await e)}catch(t){return bu(t),CO(t)}}function kO(e,t){return new Ah(e,t)}let Ah=class extends Ve{get value(){return rve(this._result)}get error(){return nve(this._result)}get finished(){return this._result!=null}constructor(t,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=_0(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=t(r),this.promise.then(n=>{this._result=AO(n),this._cleanup()},n=>{this._result=CO(n),this._cleanup()}),this._abortHandle=Sa(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Bi(this._abortHandle),this._abortController=null}};m([w()],Ah.prototype,"value",null),m([w()],Ah.prototype,"error",null),m([w()],Ah.prototype,"finished",null),m([w()],Ah.prototype,"promise",void 0),m([w()],Ah.prototype,"_result",void 0),Ah=m([H("esri.core.asyncUtils.ReactiveTask")],Ah);function ge(e,t,i={}){return LO(e,t,i,OX)}function en(e,t,i={}){return LO(e,t,i,RX)}function LO(e,t,i={},r){let n=null;const o=i.once?(c,y)=>{r(c)&&(Bi(n),t(c,y))}:(c,y)=>{r(c)&&t(c,y)};if(n=ome(e,o,i.sync,i.equals),i.initial){const c=e();o(c,c)}return n}function tn(e,t,i,r={}){let n=null,o=null,c=null;function y(){var I;n&&o&&(o.remove(),(I=r.onListenerRemove)==null||I.call(r,n),n=null,o=null)}function v(I){r.once&&r.once&&Bi(c),i(I)}const _=ge(e,(I,$)=>{var A;y(),aI(I)&&(n=I,o=d3(I,t,v),(A=r.onListenerAdd)==null||A.call(r,I))},{sync:r.sync,initial:!0});return c=ei(()=>{_.remove(),y()}),c}function Ou(e,t){return ove(e,RX,t)}function ove(e,t,i){if(Tl(i))return Promise.reject(Ei());const r=e();if(t!=null&&t(r))return Promise.resolve(r);let n=null;function o(){n=Bi(n)}return new Promise((c,y)=>{n=l3([Sa(i,()=>{o(),y(Ei())}),LO(e,v=>{o(),c(v)},{sync:!1,once:!0},t??OX)])})}function OX(e){return!0}function RX(e){return!!e}function ave(e,t,i={}){let r=!1;const n=ge(e,(o,c)=>{r||t(o,c)},i);return{remove(){n.remove()},pause(){r=!0},resume(){r=!1}}}const $l={sync:!0},qe={initial:!0},Lo={sync:!0,initial:!0};let Fy=class extends Oe{constructor(t){super(t),this.getCollections=null}initialize(){this.addHandles(YK(()=>this._refresh(),$l))}destroy(){this.getCollections=null}_refresh(){const t=this.getCollections!=null?this.getCollections():null;if(t==null)return void this.removeAll();let i=0;for(const r of t)r!=null&&(i=this._processCollection(i,r));this.splice(i,this.length)}_createNewInstance(t){return new Oe(t)}_processCollection(t,i){if(!i)return t;const r=this.itemFilterFunction??(n=>!!n);for(const n of i)if(n){if(r(n)){const o=this.indexOf(n,t);o>=0?o!==t&&this.reorder(n,t):this.add(n,t),++t}if(this.getChildrenFunction){const o=this.getChildrenFunction(n);if(Array.isArray(o))for(const c of o)t=this._processCollection(t,c);else t=this._processCollection(t,o)}}return t}};m([w()],Fy.prototype,"getCollections",void 0),m([w()],Fy.prototype,"getChildrenFunction",void 0),m([w()],Fy.prototype,"itemFilterFunction",void 0),Fy=m([H("esri.core.CollectionFlattener")],Fy);const v2=Fy;let F9=class{constructor(t=i=>i.values().next().value){this._peeker=t,this._observable=new Fg,this._items=new Set}get length(){return Xe(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return Xe(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const i=this.length;return this._items.forEach(r=>{t(r)||this._items.delete(r)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Xe(this._observable),yield*this._items}};const PX=new FinalizationRegistry(e=>{e.close()});function lve(e,t){PX.register(e,t,t)}function uve(e){PX.unregister(e)}function NX(e,t){return new Proxy({},{get:(i,r,n)=>(...o)=>{let c,y;const v=o[o.length-1];return cve(v)&&(c=v.signal,y=v.transferList,o.pop()),e.apply(t?`${t}.${r.toString()}`:r.toString(),o,{transferList:y,signal:c})}})}function cve(e){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&("signal"in e||"transferList"in e||Object.keys(e).length===0)}const hve={statsWorker:()=>de(()=>import("./statsWorker-B6ejef_2.js"),__vite__mapDeps([0,1,2,3]),import.meta.url),geometryEngineWorker:()=>de(()=>import("./geometryEngineWorker-BYrbZnN9.js"),__vite__mapDeps([4,5,6]),import.meta.url),CSVSourceWorker:()=>de(()=>import("./CSVSourceWorker-sNVfJXq7.js"),__vite__mapDeps([7,8,6,9,10,11,12,13,14,15,16,17,18,1,2,3,19,20,21]),import.meta.url),EdgeProcessingWorker:()=>de(()=>import("./EdgeProcessingWorker-PCl3bwbr.js"),__vite__mapDeps([22,23,24,25,26,27,28,29,30,31,32]),import.meta.url),ElevationSamplerWorker:()=>de(()=>import("./ElevationSamplerWorker-BEVr7cu_.js"),__vite__mapDeps([33,12,34,35,36,37,38,39,40,41,42,24,43]),import.meta.url),FeatureServiceSnappingSourceWorker:()=>de(()=>import("./FeatureServiceSnappingSourceWorker-BbFooa33.js"),__vite__mapDeps([44,9,10,11,12,13,14,6,15,16,17,18,1,2,3]),import.meta.url),GeoJSONSourceWorker:()=>de(()=>import("./GeoJSONSourceWorker-lwrgy8ld.js"),__vite__mapDeps([45,10,9,11,12,13,14,6,15,16,17,18,1,2,3,46,8,20,21,47]),import.meta.url),LercWorker:()=>de(()=>import("./LercWorker-BDOt0bQ_.js"),[],import.meta.url),MemorySourceWorker:()=>de(()=>import("./MemorySourceWorker-DyoTHc3Q.js"),__vite__mapDeps([48,10,49,9,11,12,13,14,6,15,16,17,18,1,2,3,20,21,47,8]),import.meta.url),PBFDecoderWorker:()=>de(()=>import("./PBFDecoderWorker-Bhldl2sC.js"),__vite__mapDeps([50,10]),import.meta.url),FeaturePipelineWorker:()=>de(()=>import("./FeaturePipelineWorker-CDy2MbZD.js"),__vite__mapDeps([51,52,53,54,55,32,56,57,58,59,60,61,13,10,14,6,62,63,26,64,65,66,67,68,69,15,16,17,18,1,2,3,70,46,8,20,21,47,71,72]),import.meta.url),PointCloudWorker:()=>de(()=>import("./PointCloudWorker-DVsurT8t.js"),__vite__mapDeps([73,74,36,75,76,77,78,30,79,37,38,39,80]),import.meta.url),RasterWorker:()=>de(()=>import("./RasterWorker-D44Hqxej.js"),__vite__mapDeps([81,82,83,84,85]),import.meta.url),SceneLayerSnappingSourceWorker:()=>de(()=>import("./SceneLayerSnappingSourceWorker-Qw_MaMZT.js"),__vite__mapDeps([86,87,88,36,80,37,75,89,26,27,28,29,23,24,25,30,31,32]),import.meta.url),SceneLayerWorker:()=>de(()=>import("./SceneLayerWorker-BC85UkvT.js"),__vite__mapDeps([90,34,42,88,36,80,37,75,91,92,40,78,30,93,94,95,63,79,74,38,39]),import.meta.url),WFSSourceWorker:()=>de(()=>import("./WFSSourceWorker-BpjgJROC.js"),__vite__mapDeps([96,10,9,11,12,13,14,6,15,16,17,18,1,2,3,46,8,47,97,98]),import.meta.url),WorkerTileHandler:()=>de(()=>import("./WorkerTileHandler-CUE4nuRZ.js"),__vite__mapDeps([99,100,60,61,101,102,66,103,104,32,67,58]),import.meta.url),Lyr3DWorker:()=>de(()=>import("./Lyr3DWorker-O86do1z2.js"),[],import.meta.url),Feature3DPipelineWorker:()=>de(()=>import("./Feature3DPipelineWorker-C3_z453b.js"),__vite__mapDeps([105,16,10,17,13,14,6,18,1,2,3,12,29,106,107,108,26,23,24,25,94,95,30,109,36,37,88,80,75,79,74,38,39,63,110,87,111,31,32,112,89,113,55,114,93,92,40,34,76,115]),import.meta.url)},FX="worker:port-closed";var yn;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(yn||(yn={}));let dve=0;function DX(){return dve++}function pve(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function w2(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function OO(e,t,i,r){if(t.type===yn.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==yn.INVOKE&&t.type!==yn.RESPONSE)return void e.postMessage(t);let n;if(pve(i)?(n=BD(i.transferList),t.data=i.result):(n=BD(r),t.data=i),n){if(we("ff")){for(const o of n)if("byteLength"in o&&o.byteLength>267386880){const c="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case yn.INVOKE:throw c;case yn.RESPONSE:return void OO(e,{type:yn.RESPONSE,jobId:t.jobId,error:w2(c)})}}}e.postMessage(t,n)}else e.postMessage(t)}function b2(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function BD(e){if(!(e!=null&&e.length))return null;if(we("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(i=>!fve(i));return t.length?t:null}function fve(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="ArrayBuffer"}async function yZe(e){try{return await e}catch(t){const i=(t==null?void 0:t.name)===FX;if(!(br(t)||i))throw t;return}}const{CLOSE:GD,ABORT:qD,INVOKE:HD,RESPONSE:dv,OPEN_PORT:WD,ON:yve}=yn,mve=2;let gve=class{constructor(t){this._invoke=t,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(t){t.type===yn.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},ep=class Dy{static connect(t,i){const r=new MessageChannel;let n;n=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const o=new Dy(r.port1,{channel:r,client:n,schedule:i});return typeof n=="object"&&"remoteClient"in n&&(n.remoteClient=o),Dy.clients.set(o,n),r.port2}static loadWorker(t){const i=hve[t];return i?i():Promise.resolve(null)}constructor(t,i,r){this._port=t,this._jobQueue=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new gve(n=>this._onInvokeMessage(n)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:GD}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,i,r){return this.apply(t,[i],r)}apply(t,i,r){const n=r==null?void 0:r.signal,o=r==null?void 0:r.transferList;if(!this._port)return Promise.reject(new ne(FX,`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:i}));const c=DX();return new Promise((y,v)=>{if(Tl(n))return this._processWork(),void v(Ei());const _=Sa(n,()=>{const $=this._outJobs.get(c);$&&(this._outJobs.delete(c),this._processWork(),Bi($.abortHandle),this._post({type:qD,jobId:c}),v(Ei()))}),I={resolve:y,reject:v,abortHandle:_,debugInfo:t};this._outJobs.set(c,I),this._post({type:HD,jobId:c,methodName:t,abortable:n!=null},i,o)})}createInvokeProxy(t){return NX(this,t)}on(t,i){const r=new MessageChannel;function n(o){i(o.data)}return this._port.postMessage({type:yn.ON,eventType:t,port:r.port2},[r.port2]),r.port1.addEventListener("message",n),r.port1.start(),ei(()=>{r.port1.postMessage({type:yn.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",n)})}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:WD,port:t.port2}),t.port1}_processWork(){var c;if(this._outJobs.size>=mve)return;const t=(c=this._jobQueue)==null?void 0:c.pop();if(!t)return;const{methodName:i,data:r,invokeOptions:n,resolver:o}=t;this.apply(i,r,n).then(y=>o.resolve(y)).catch(y=>o.reject(y))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{Bi(t.abortHandle),t.reject(Ei(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule(()=>this._processMessage(t,!0)):this._processMessage(t,!1)}_processMessage(t,i){const r=b2(t);if(r)switch(r.type){case dv:this._onResponseMessage(r);break;case HD:i?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case qD:this._onAbortMessage(r);break;case GD:this._onCloseMessage();break;case WD:this._onOpenPortMessage(r);break;case yve:this._onOnMessage(r)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,n=i.get(r);this._invokeQueue.push(t),n&&(n.controller&&n.controller.abort(),i.delete(r))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&Dy.clients.get(this)===t&&t.destroy(),Dy.clients.delete(this),t!=null&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:i,jobId:r,data:n=[],abortable:o}=t,c=o?new AbortController:null,y=this._inJobs;let v,_=this._client,I=_[i];try{if(!I&&i&&i.includes(".")){const $=i.split(".");for(let A=0;A<$.length-1;A++)_=_[$[A]],I=_[$[A+1]]}if(typeof I!="function")throw new TypeError(`${i} is not a function`);n.push({client:this,signal:c?c.signal:null}),v=I.apply(_,n)}catch($){return void this._post({type:dv,jobId:r,error:w2($)})}Fu(v)?(y.set(r,{controller:c,promise:v}),v.then($=>{y.has(r)&&(y.delete(r),this._post({type:dv,jobId:r},$))},$=>{y.has(r)&&(y.delete(r),br($)||this._post({type:dv,jobId:r,error:w2($||{message:`Error encountered at method ${i}`})}))})):this._post({type:dv,jobId:r},v)}_onOpenPortMessage(t){new Dy(t.port,{client:this._client})}_onOnMessage(t){const{port:i}=t,r=this._client.on(t.eventType,o=>{i.postMessage(o)}),n=d3(t.port,"message",o=>{const c=b2(o);(c==null?void 0:c.type)===yn.CLOSE&&(n.remove(),r.remove(),i.close())})}_onResponseMessage(t){const{jobId:i,error:r,data:n}=t,o=this._outJobs;if(!o.has(i))return;const c=o.get(i);o.delete(i),this._processWork(),Bi(c.abortHandle),r?c.reject(ne.fromJSON(JSON.parse(r))):c.resolve(n)}_post(t,i,r){return OO(this._port,t,i,r)}};ep.kernelInfo={buildDate:SY,fullVersion:mO,revision:xY},ep.clients=new Map;let vve=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new F9}destroy(){this.close()}get closed(){var t;return!((t=this._clients)!=null&&t.length)}open(t,i){return new Promise((r,n)=>{let o=!0;const c=y=>{Gi(i.signal),o&&(o=!1,y())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let y=0;y<t.length;++y){const v=t[y];Fu(v)?this._clientPromises[y]=v.then(_=>(this._clients[y]=new ep(_,i,this._ongoingJobsQueue),c(r),this._clients[y]),()=>(c(n),null)):(this._clients[y]=new ep(v,i,this._ongoingJobsQueue),this._clientPromises[y]=Promise.resolve(this._clients[y]),c(r))}})}broadcast(t,i,r){const n=new Array(this._clientPromises.length);for(let o=0;o<this._clientPromises.length;++o){const c=this._clientPromises[o];n[o]=c.then(y=>y==null?void 0:y.invoke(t,i,r))}return n}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject(Ei(`Worker closing, aborting job calling '${t.methodName}'`));for(const i of this._clientPromises)i.then(r=>r==null?void 0:r.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,uve(this)}invoke(t,i,r){return this.apply(t,[i],r)}apply(t,i,r){const n=Vo();this._ongoingJobsQueue.push({methodName:t,data:i,invokeOptions:r,resolver:n});for(let o=0;o<this._clientPromises.length;o++){const c=this._clients[o];c?c.jobAdded():this._clientPromises[o].then(y=>y==null?void 0:y.jobAdded())}return n.promise}createInvokeProxy(t){return NX(this,t)}on(t,i){return Promise.all(this._clientPromises).then(()=>l3(this._clients.map(r=>r.on(t,i))))}openPorts(){return new Promise(t=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(o=>{o&&(i[n]=o.openPort()),--r==0&&t(i)})})}get test(){}};const wve={async request(e,t){var c,y;const i=e.options,r=i.responseType;i.signal=t==null?void 0:t.signal,i.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&((c=CM(e.url))!=null&&c.after)?r:"array-buffer";const n=await Et(e.url,i),o={data:n.data,httpStatus:n.httpStatus,ssl:n.ssl};switch((y=n.requestOptions)==null?void 0:y.responseType){case"native-request-init":return delete o.data.signal,o;case"blob":o.data=await o.data.arrayBuffer();break;case"json":o.data=new TextEncoder().encode(JSON.stringify(o.data)).buffer;break;case"text":o.data=new TextEncoder().encode(o.data).buffer}return{result:o,transferList:[o.data]}}};let _b;var HH,WH;const bve=((HH=globalThis.esriConfig)==null?void 0:HH.locale)??((WH=globalThis.dojoConfig)==null?void 0:WH.locale);var JH;const Sb=(JH=globalThis.document)==null?void 0:JH.documentElement;function jX(){var i;const e=Sb==null?void 0:Sb.getAttribute("lang"),t=(i=globalThis.navigator)==null?void 0:i.language;return bve??e??t??"en"}function ps(){return _b===void 0&&(_b=jX()),_b}function _ve(e=ps()){const t=/^([a-zA-Z]{2,3})(?:[_-][a-zA-Z0-9]+)*$/.exec(e);return t==null?void 0:t[1].toLowerCase()}const t5=[];function g3(e){return t5.push(e),ei(()=>t5.splice(t5.indexOf(e),1))}const i5=[];function RO(e){return i5.push(e),ei(()=>i5.splice(i5.indexOf(e),1))}function JD(){const e=jX();_b!==e&&([...i5].forEach(t=>t(e)),_b=e,[...t5].forEach(t=>t(e)))}var ZH;(ZH=globalThis.addEventListener)==null||ZH.call(globalThis,"languagechange",JD),Sb&&new MutationObserver(()=>{JD()}).observe(Sb,{attributeFilter:["lang"]});const ZD=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class H0 extends Error{}class Sve extends H0{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class xve extends H0{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class Ive extends H0{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class n1 extends H0{}class zX extends H0{constructor(t){super(`Invalid unit ${t}`)}}class os extends H0{}class vh extends H0{constructor(){super("Zone is an abstract class")}}const Be="numeric",El="short",Do="long",D9={year:Be,month:Be,day:Be},VX={year:Be,month:El,day:Be},Tve={year:Be,month:El,day:Be,weekday:El},UX={year:Be,month:Do,day:Be},BX={year:Be,month:Do,day:Be,weekday:Do},GX={hour:Be,minute:Be},qX={hour:Be,minute:Be,second:Be},HX={hour:Be,minute:Be,second:Be,timeZoneName:El},WX={hour:Be,minute:Be,second:Be,timeZoneName:Do},JX={hour:Be,minute:Be,hourCycle:"h23"},ZX={hour:Be,minute:Be,second:Be,hourCycle:"h23"},KX={hour:Be,minute:Be,second:Be,hourCycle:"h23",timeZoneName:El},YX={hour:Be,minute:Be,second:Be,hourCycle:"h23",timeZoneName:Do},XX={year:Be,month:Be,day:Be,hour:Be,minute:Be},QX={year:Be,month:Be,day:Be,hour:Be,minute:Be,second:Be},eQ={year:Be,month:El,day:Be,hour:Be,minute:Be},tQ={year:Be,month:El,day:Be,hour:Be,minute:Be,second:Be},$ve={year:Be,month:El,day:Be,weekday:El,hour:Be,minute:Be},iQ={year:Be,month:Do,day:Be,hour:Be,minute:Be,timeZoneName:El},rQ={year:Be,month:Do,day:Be,hour:Be,minute:Be,second:Be,timeZoneName:El},nQ={year:Be,month:Do,day:Be,weekday:Do,hour:Be,minute:Be,timeZoneName:Do},sQ={year:Be,month:Do,day:Be,weekday:Do,hour:Be,minute:Be,second:Be,timeZoneName:Do};class W0{get type(){throw new vh}get name(){throw new vh}get ianaName(){return this.name}get isUniversal(){throw new vh}offsetName(t,i){throw new vh}formatOffset(t,i){throw new vh}offset(t){throw new vh}equals(t){throw new vh}get isValid(){throw new vh}}let w$=null;class wI extends W0{static get instance(){return w$===null&&(w$=new wI),w$}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:i,locale:r}){return fQ(t,i,r)}formatOffset(t,i){return xb(this.offset(t),i)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let r5={};function Eve(e){return r5[e]||(r5[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),r5[e]}const Mve={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Ave(e,t){const i=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,n,o,c,y,v,_,I]=r;return[c,n,o,y,v,_,I]}function Cve(e,t){const i=e.formatToParts(t),r=[];for(let n=0;n<i.length;n++){const{type:o,value:c}=i[n],y=Mve[o];o==="era"?r[y]=c:vt(y)||(r[y]=parseInt(c,10))}return r}let w_={};class ho extends W0{static create(t){return w_[t]||(w_[t]=new ho(t)),w_[t]}static resetCache(){w_={},r5={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=ho.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:i,locale:r}){return fQ(t,i,r,this.name)}formatOffset(t,i){return xb(this.offset(t),i)}offset(t){const i=new Date(t);if(isNaN(i))return NaN;const r=Eve(this.name);let[n,o,c,y,v,_,I]=r.formatToParts?Cve(r,i):Ave(r,i);y==="BC"&&(n=-Math.abs(n)+1);const A=_I({year:n,month:o,day:c,hour:v===24?0:v,minute:_,second:I,millisecond:0});let k=+i;const R=k%1e3;return k-=R>=0?R:1e3+R,(A-k)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let KD={};function kve(e,t={}){const i=JSON.stringify([e,t]);let r=KD[i];return r||(r=new Intl.ListFormat(e,t),KD[i]=r),r}let eA={};function tA(e,t={}){const i=JSON.stringify([e,t]);let r=eA[i];return r||(r=new Intl.DateTimeFormat(e,t),eA[i]=r),r}let iA={};function Lve(e,t={}){const i=JSON.stringify([e,t]);let r=iA[i];return r||(r=new Intl.NumberFormat(e,t),iA[i]=r),r}let rA={};function Ove(e,t={}){const{base:i,...r}=t,n=JSON.stringify([e,r]);let o=rA[n];return o||(o=new Intl.RelativeTimeFormat(e,t),rA[n]=o),o}let Yv=null;function Rve(){return Yv||(Yv=new Intl.DateTimeFormat().resolvedOptions().locale,Yv)}let YD={};function Pve(e){let t=YD[e];if(!t){const i=new Intl.Locale(e);t="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,YD[e]=t}return t}function Nve(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const i=e.indexOf("-u-");if(i===-1)return[e];{let r,n;try{r=tA(e).resolvedOptions(),n=e}catch{const v=e.substring(0,i);r=tA(v).resolvedOptions(),n=v}const{numberingSystem:o,calendar:c}=r;return[n,o,c]}}function Fve(e,t,i){return(i||t)&&(e.includes("-u-")||(e+="-u"),i&&(e+=`-ca-${i}`),t&&(e+=`-nu-${t}`)),e}function Dve(e){const t=[];for(let i=1;i<=12;i++){const r=Ge.utc(2009,i,1);t.push(e(r))}return t}function jve(e){const t=[];for(let i=1;i<=7;i++){const r=Ge.utc(2016,11,13+i);t.push(e(r))}return t}function b_(e,t,i,r){const n=e.listingMode();return n==="error"?null:n==="en"?i(t):r(t)}function zve(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class Vve{constructor(t,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:n,floor:o,...c}=r;if(!i||Object.keys(c).length>0){const y={useGrouping:!1,...r};r.padTo>0&&(y.minimumIntegerDigits=r.padTo),this.inf=Lve(t,y)}}format(t){if(this.inf){const i=this.floor?Math.floor(t):t;return this.inf.format(i)}else{const i=this.floor?Math.floor(t):jO(t,3);return jr(i,this.padTo)}}}class Uve{constructor(t,i,r){this.opts=r,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const c=-1*(t.offset/60),y=c>=0?`Etc/GMT+${c}`:`Etc/GMT${c}`;t.offset!==0&&ho.create(y).valid?(n=y,this.dt=t):(n="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,n=t.zone.name):(n="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const o={...this.opts};o.timeZone=o.timeZone||n,this.dtf=tA(i,o)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class Bve{constructor(t,i,r){this.opts={style:"long",...r},!i&&dQ()&&(this.rtf=Ove(t,r))}format(t,i){return this.rtf?this.rtf.format(t,i):dwe(i,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,i){return this.rtf?this.rtf.formatToParts(t,i):[]}}const Gve={firstDay:1,minimalDays:4,weekend:[6,7]};class fi{static fromOpts(t){return fi.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,i,r,n,o=!1){const c=t||vr.defaultLocale,y=c||(o?"en-US":Rve()),v=i||vr.defaultNumberingSystem,_=r||vr.defaultOutputCalendar,I=nA(n)||vr.defaultWeekSettings;return new fi(y,v,_,I,c)}static resetCache(){Yv=null,eA={},iA={},rA={}}static fromObject({locale:t,numberingSystem:i,outputCalendar:r,weekSettings:n}={}){return fi.create(t,i,r,n)}constructor(t,i,r,n,o){const[c,y,v]=Nve(t);this.locale=c,this.numberingSystem=i||y||null,this.outputCalendar=r||v||null,this.weekSettings=n,this.intl=Fve(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=o,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=zve(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&i?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:fi.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,nA(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,i=!1){return b_(this,t,gQ,()=>{const r=i?{month:t,day:"numeric"}:{month:t},n=i?"format":"standalone";return this.monthsCache[n][t]||(this.monthsCache[n][t]=Dve(o=>this.extract(o,r,"month"))),this.monthsCache[n][t]})}weekdays(t,i=!1){return b_(this,t,bQ,()=>{const r=i?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},n=i?"format":"standalone";return this.weekdaysCache[n][t]||(this.weekdaysCache[n][t]=jve(o=>this.extract(o,r,"weekday"))),this.weekdaysCache[n][t]})}meridiems(){return b_(this,void 0,()=>_Q,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ge.utc(2016,11,13,9),Ge.utc(2016,11,13,19)].map(i=>this.extract(i,t,"dayperiod"))}return this.meridiemCache})}eras(t){return b_(this,t,SQ,()=>{const i={era:t};return this.eraCache[t]||(this.eraCache[t]=[Ge.utc(-40,1,1),Ge.utc(2017,1,1)].map(r=>this.extract(r,i,"era"))),this.eraCache[t]})}extract(t,i,r){const n=this.dtFormatter(t,i),o=n.formatToParts(),c=o.find(y=>y.type.toLowerCase()===r);return c?c.value:null}numberFormatter(t={}){return new Vve(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,i={}){return new Uve(t,this.intl,i)}relFormatter(t={}){return new Bve(this.intl,this.isEnglish(),t)}listFormatter(t={}){return kve(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:pQ()?Pve(this.locale):Gve}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let b$=null;class Vr extends W0{static get utcInstance(){return b$===null&&(b$=new Vr(0)),b$}static instance(t){return t===0?Vr.utcInstance:new Vr(t)}static parseSpecifier(t){if(t){const i=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new Vr(SI(i[1],i[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${xb(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${xb(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,i){return xb(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class qve extends W0{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function bd(e,t){if(vt(e)||e===null)return t;if(e instanceof W0)return e;if(Yve(e)){const i=e.toLowerCase();return i==="default"?t:i==="local"||i==="system"?wI.instance:i==="utc"||i==="gmt"?Vr.utcInstance:Vr.parseSpecifier(i)||ho.create(e)}else return qd(e)?Vr.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new qve(e)}const PO={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},XD={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Hve=PO.hanidec.replace(/[\[|\]]/g,"").split("");function Wve(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);if(e[i].search(PO.hanidec)!==-1)t+=Hve.indexOf(e[i]);else for(const n in XD){const[o,c]=XD[n];r>=o&&r<=c&&(t+=r-o)}}return parseInt(t,10)}else return t}let jy={};function Jve(){jy={}}function Oa({numberingSystem:e},t=""){const i=e||"latn";return jy[i]||(jy[i]={}),jy[i][t]||(jy[i][t]=new RegExp(`${PO[i]}${t}`)),jy[i][t]}let QD=()=>Date.now(),ej="system",tj=null,ij=null,rj=null,nj=60,sj,oj=null;class vr{static get now(){return QD}static set now(t){QD=t}static set defaultZone(t){ej=t}static get defaultZone(){return bd(ej,wI.instance)}static get defaultLocale(){return tj}static set defaultLocale(t){tj=t}static get defaultNumberingSystem(){return ij}static set defaultNumberingSystem(t){ij=t}static get defaultOutputCalendar(){return rj}static set defaultOutputCalendar(t){rj=t}static get defaultWeekSettings(){return oj}static set defaultWeekSettings(t){oj=nA(t)}static get twoDigitCutoffYear(){return nj}static set twoDigitCutoffYear(t){nj=t%100}static get throwOnInvalid(){return sj}static set throwOnInvalid(t){sj=t}static resetCaches(){fi.resetCache(),ho.resetCache(),Ge.resetCache(),Jve()}}class gl{constructor(t,i){this.reason=t,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const oQ=[0,31,59,90,120,151,181,212,243,273,304,334],aQ=[0,31,60,91,121,152,182,213,244,274,305,335];function wa(e,t){return new gl("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function NO(e,t,i){const r=new Date(Date.UTC(e,t-1,i));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const n=r.getUTCDay();return n===0?7:n}function lQ(e,t,i){return i+(v3(e)?aQ:oQ)[t-1]}function uQ(e,t){const i=v3(e)?aQ:oQ,r=i.findIndex(o=>o<t),n=t-i[r];return{month:r+1,day:n}}function FO(e,t){return(e-t+7)%7+1}function j9(e,t=4,i=1){const{year:r,month:n,day:o}=e,c=lQ(r,n,o),y=FO(NO(r,n,o),i);let v=Math.floor((c-y+14-t)/7),_;return v<1?(_=r-1,v=_2(_,t,i)):v>_2(r,t,i)?(_=r+1,v=1):_=r,{weekYear:_,weekNumber:v,weekday:y,...xI(e)}}function aj(e,t=4,i=1){const{weekYear:r,weekNumber:n,weekday:o}=e,c=FO(NO(r,1,t),i),y=E1(r);let v=n*7+o-c-7+t,_;v<1?(_=r-1,v+=E1(_)):v>y?(_=r+1,v-=E1(r)):_=r;const{month:I,day:$}=uQ(_,v);return{year:_,month:I,day:$,...xI(e)}}function _$(e){const{year:t,month:i,day:r}=e,n=lQ(t,i,r);return{year:t,ordinal:n,...xI(e)}}function lj(e){const{year:t,ordinal:i}=e,{month:r,day:n}=uQ(t,i);return{year:t,month:r,day:n,...xI(e)}}function uj(e,t){if(!vt(e.localWeekday)||!vt(e.localWeekNumber)||!vt(e.localWeekYear)){if(!vt(e.weekday)||!vt(e.weekNumber)||!vt(e.weekYear))throw new n1("Cannot mix locale-based week fields with ISO-based week fields");return vt(e.localWeekday)||(e.weekday=e.localWeekday),vt(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),vt(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Zve(e,t=4,i=1){const r=bI(e.weekYear),n=ba(e.weekNumber,1,_2(e.weekYear,t,i)),o=ba(e.weekday,1,7);return r?n?o?!1:wa("weekday",e.weekday):wa("week",e.weekNumber):wa("weekYear",e.weekYear)}function Kve(e){const t=bI(e.year),i=ba(e.ordinal,1,E1(e.year));return t?i?!1:wa("ordinal",e.ordinal):wa("year",e.year)}function cQ(e){const t=bI(e.year),i=ba(e.month,1,12),r=ba(e.day,1,z9(e.year,e.month));return t?i?r?!1:wa("day",e.day):wa("month",e.month):wa("year",e.year)}function hQ(e){const{hour:t,minute:i,second:r,millisecond:n}=e,o=ba(t,0,23)||t===24&&i===0&&r===0&&n===0,c=ba(i,0,59),y=ba(r,0,59),v=ba(n,0,999);return o?c?y?v?!1:wa("millisecond",n):wa("second",r):wa("minute",i):wa("hour",t)}function vt(e){return typeof e>"u"}function qd(e){return typeof e=="number"}function bI(e){return typeof e=="number"&&e%1===0}function Yve(e){return typeof e=="string"}function Xve(e){return Object.prototype.toString.call(e)==="[object Date]"}function dQ(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function pQ(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Qve(e){return Array.isArray(e)?e:[e]}function cj(e,t,i){if(e.length!==0)return e.reduce((r,n)=>{const o=[t(n),n];return r&&i(r[0],o[0])===r[0]?r:o},null)[1]}function ewe(e,t){return t.reduce((i,r)=>(i[r]=e[r],i),{})}function ug(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function nA(e){if(e==null)return null;if(typeof e!="object")throw new os("Week settings must be an object");if(!ba(e.firstDay,1,7)||!ba(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!ba(t,1,7)))throw new os("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function ba(e,t,i){return bI(e)&&e>=t&&e<=i}function twe(e,t){return e-t*Math.floor(e/t)}function jr(e,t=2){const i=e<0;let r;return i?r="-"+(""+-e).padStart(t,"0"):r=(""+e).padStart(t,"0"),r}function ud(e){if(!(vt(e)||e===null||e===""))return parseInt(e,10)}function bp(e){if(!(vt(e)||e===null||e===""))return parseFloat(e)}function DO(e){if(!(vt(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function jO(e,t,i=!1){const r=10**t;return(i?Math.trunc:Math.round)(e*r)/r}function v3(e){return e%4===0&&(e%100!==0||e%400===0)}function E1(e){return v3(e)?366:365}function z9(e,t){const i=twe(t-1,12)+1,r=e+(t-i)/12;return i===2?v3(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function _I(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function hj(e,t,i){return-FO(NO(e,1,t),i)+t-1}function _2(e,t=4,i=1){const r=hj(e,t,i),n=hj(e+1,t,i);return(E1(e)-r+n)/7}function sA(e){return e>99?e:e>vr.twoDigitCutoffYear?1900+e:2e3+e}function fQ(e,t,i,r=null){const n=new Date(e),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(o.timeZone=r);const c={timeZoneName:t,...o},y=new Intl.DateTimeFormat(i,c).formatToParts(n).find(v=>v.type.toLowerCase()==="timezonename");return y?y.value:null}function SI(e,t){let i=parseInt(e,10);Number.isNaN(i)&&(i=0);const r=parseInt(t,10)||0,n=i<0||Object.is(i,-0)?-r:r;return i*60+n}function yQ(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new os(`Invalid unit value ${e}`);return t}function V9(e,t){const i={};for(const r in e)if(ug(e,r)){const n=e[r];if(n==null)continue;i[t(r)]=yQ(n)}return i}function xb(e,t){const i=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),n=e>=0?"+":"-";switch(t){case"short":return`${n}${jr(i,2)}:${jr(r,2)}`;case"narrow":return`${n}${i}${r>0?`:${r}`:""}`;case"techie":return`${n}${jr(i,2)}${jr(r,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function xI(e){return ewe(e,["hour","minute","second","millisecond"])}const iwe=["January","February","March","April","May","June","July","August","September","October","November","December"],mQ=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],rwe=["J","F","M","A","M","J","J","A","S","O","N","D"];function gQ(e){switch(e){case"narrow":return[...rwe];case"short":return[...mQ];case"long":return[...iwe];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const vQ=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],wQ=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],nwe=["M","T","W","T","F","S","S"];function bQ(e){switch(e){case"narrow":return[...nwe];case"short":return[...wQ];case"long":return[...vQ];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const _Q=["AM","PM"],swe=["Before Christ","Anno Domini"],owe=["BC","AD"],awe=["B","A"];function SQ(e){switch(e){case"narrow":return[...awe];case"short":return[...owe];case"long":return[...swe];default:return null}}function lwe(e){return _Q[e.hour<12?0:1]}function uwe(e,t){return bQ(t)[e.weekday-1]}function cwe(e,t){return gQ(t)[e.month-1]}function hwe(e,t){return SQ(t)[e.year<0?0:1]}function dwe(e,t,i="always",r=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=["hours","minutes","seconds"].indexOf(e)===-1;if(i==="auto"&&o){const $=e==="days";switch(t){case 1:return $?"tomorrow":`next ${n[e][0]}`;case-1:return $?"yesterday":`last ${n[e][0]}`;case 0:return $?"today":`this ${n[e][0]}`}}const c=Object.is(t,-0)||t<0,y=Math.abs(t),v=y===1,_=n[e],I=r?v?_[1]:_[2]||_[1]:v?n[e][0]:e;return c?`${y} ${I} ago`:`in ${y} ${I}`}function dj(e,t){let i="";for(const r of e)r.literal?i+=r.val:i+=t(r.val);return i}const pwe={D:D9,DD:VX,DDD:UX,DDDD:BX,t:GX,tt:qX,ttt:HX,tttt:WX,T:JX,TT:ZX,TTT:KX,TTTT:YX,f:XX,ff:eQ,fff:iQ,ffff:nQ,F:QX,FF:tQ,FFF:rQ,FFFF:sQ};class cs{static create(t,i={}){return new cs(t,i)}static parseFormat(t){let i=null,r="",n=!1;const o=[];for(let c=0;c<t.length;c++){const y=t.charAt(c);y==="'"?(r.length>0&&o.push({literal:n||/^\s+$/.test(r),val:r}),i=null,r="",n=!n):n||y===i?r+=y:(r.length>0&&o.push({literal:/^\s+$/.test(r),val:r}),r=y,i=y)}return r.length>0&&o.push({literal:n||/^\s+$/.test(r),val:r}),o}static macroTokenToFormatOpts(t){return pwe[t]}constructor(t,i){this.opts=i,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...i}).format()}dtFormatter(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i})}formatDateTime(t,i){return this.dtFormatter(t,i).format()}formatDateTimeParts(t,i){return this.dtFormatter(t,i).formatToParts()}formatInterval(t,i){return this.dtFormatter(t.start,i).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,i){return this.dtFormatter(t,i).resolvedOptions()}num(t,i=0){if(this.opts.forceSimple)return jr(t,i);const r={...this.opts};return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(t)}formatDateTimeFromString(t,i){const r=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",o=(k,R)=>this.loc.extract(t,k,R),c=k=>t.isOffsetFixed&&t.offset===0&&k.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,k.format):"",y=()=>r?lwe(t):o({hour:"numeric",hourCycle:"h12"},"dayperiod"),v=(k,R)=>r?cwe(t,k):o(R?{month:k}:{month:k,day:"numeric"},"month"),_=(k,R)=>r?uwe(t,k):o(R?{weekday:k}:{weekday:k,month:"long",day:"numeric"},"weekday"),I=k=>{const R=cs.macroTokenToFormatOpts(k);return R?this.formatWithSystemDefault(t,R):k},$=k=>r?hwe(t,k):o({era:k},"era"),A=k=>{switch(k){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return c({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return c({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return c({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return y();case"d":return n?o({day:"numeric"},"day"):this.num(t.day);case"dd":return n?o({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return _("short",!0);case"cccc":return _("long",!0);case"ccccc":return _("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return _("short",!1);case"EEEE":return _("long",!1);case"EEEEE":return _("narrow",!1);case"L":return n?o({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return n?o({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return v("short",!0);case"LLLL":return v("long",!0);case"LLLLL":return v("narrow",!0);case"M":return n?o({month:"numeric"},"month"):this.num(t.month);case"MM":return n?o({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return v("short",!1);case"MMMM":return v("long",!1);case"MMMMM":return v("narrow",!1);case"y":return n?o({year:"numeric"},"year"):this.num(t.year);case"yy":return n?o({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return n?o({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return n?o({year:"numeric"},"year"):this.num(t.year,6);case"G":return $("short");case"GG":return $("long");case"GGGGG":return $("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return I(k)}};return dj(cs.parseFormat(i),A)}formatDurationFromString(t,i){const r=v=>{switch(v[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=v=>_=>{const I=r(_);return I?this.num(v.get(I),_.length):_},o=cs.parseFormat(i),c=o.reduce((v,{literal:_,val:I})=>_?v:v.concat(I),[]),y=t.shiftTo(...c.map(r).filter(v=>v));return dj(o,n(y))}}const xQ=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Dg(...e){const t=e.reduce((i,r)=>i+r.source,"");return RegExp(`^${t}$`)}function jg(...e){return t=>e.reduce(([i,r,n],o)=>{const[c,y,v]=o(t,n);return[{...i,...c},y||r,v]},[{},null,1]).slice(0,2)}function zg(e,...t){if(e==null)return[null,null];for(const[i,r]of t){const n=i.exec(e);if(n)return r(n)}return[null,null]}function IQ(...e){return(t,i)=>{const r={};let n;for(n=0;n<e.length;n++)r[e[n]]=ud(t[i+n]);return[r,null,i+n]}}const TQ=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,fwe=`(?:${TQ.source}?(?:\\[(${xQ.source})\\])?)?`,zO=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,$Q=RegExp(`${zO.source}${fwe}`),VO=RegExp(`(?:T${$Q.source})?`),ywe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,mwe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,gwe=/(\d{4})-?(\d{3})/,vwe=IQ("weekYear","weekNumber","weekDay"),wwe=IQ("year","ordinal"),bwe=/(\d{4})-(\d\d)-(\d\d)/,EQ=RegExp(`${zO.source} ?(?:${TQ.source}|(${xQ.source}))?`),_we=RegExp(`(?: ${EQ.source})?`);function M1(e,t,i){const r=e[t];return vt(r)?i:ud(r)}function Swe(e,t){return[{year:M1(e,t),month:M1(e,t+1,1),day:M1(e,t+2,1)},null,t+3]}function Vg(e,t){return[{hours:M1(e,t,0),minutes:M1(e,t+1,0),seconds:M1(e,t+2,0),milliseconds:DO(e[t+3])},null,t+4]}function w3(e,t){const i=!e[t]&&!e[t+1],r=SI(e[t+1],e[t+2]),n=i?null:Vr.instance(r);return[{},n,t+3]}function b3(e,t){const i=e[t]?ho.create(e[t]):null;return[{},i,t+1]}const xwe=RegExp(`^T?${zO.source}$`),Iwe=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Twe(e){const[t,i,r,n,o,c,y,v,_]=e,I=t[0]==="-",$=v&&v[0]==="-",A=(k,R=!1)=>k!==void 0&&(R||k&&I)?-k:k;return[{years:A(bp(i)),months:A(bp(r)),weeks:A(bp(n)),days:A(bp(o)),hours:A(bp(c)),minutes:A(bp(y)),seconds:A(bp(v),v==="-0"),milliseconds:A(DO(_),$)}]}const $we={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function UO(e,t,i,r,n,o,c){const y={year:t.length===2?sA(ud(t)):ud(t),month:mQ.indexOf(i)+1,day:ud(r),hour:ud(n),minute:ud(o)};return c&&(y.second=ud(c)),e&&(y.weekday=e.length>3?vQ.indexOf(e)+1:wQ.indexOf(e)+1),y}const Ewe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Mwe(e){const[,t,i,r,n,o,c,y,v,_,I,$]=e,A=UO(t,n,r,i,o,c,y);let k;return v?k=$we[v]:_?k=0:k=SI(I,$),[A,new Vr(k)]}function Awe(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Cwe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,kwe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Lwe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function pj(e){const[,t,i,r,n,o,c,y]=e;return[UO(t,n,r,i,o,c,y),Vr.utcInstance]}function Owe(e){const[,t,i,r,n,o,c,y]=e;return[UO(t,y,i,r,n,o,c),Vr.utcInstance]}const Rwe=Dg(ywe,VO),Pwe=Dg(mwe,VO),Nwe=Dg(gwe,VO),Fwe=Dg($Q),MQ=jg(Swe,Vg,w3,b3),Dwe=jg(vwe,Vg,w3,b3),jwe=jg(wwe,Vg,w3,b3),zwe=jg(Vg,w3,b3);function Vwe(e){return zg(e,[Rwe,MQ],[Pwe,Dwe],[Nwe,jwe],[Fwe,zwe])}function Uwe(e){return zg(Awe(e),[Ewe,Mwe])}function Bwe(e){return zg(e,[Cwe,pj],[kwe,pj],[Lwe,Owe])}function Gwe(e){return zg(e,[Iwe,Twe])}const qwe=jg(Vg);function Hwe(e){return zg(e,[xwe,qwe])}const Wwe=Dg(bwe,_we),Jwe=Dg(EQ),Zwe=jg(Vg,w3,b3);function Kwe(e){return zg(e,[Wwe,MQ],[Jwe,Zwe])}const fj="Invalid Duration",AQ={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Ywe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...AQ},Jo=146097/400,oy=146097/4800,Xwe={years:{quarters:4,months:12,weeks:Jo/7,days:Jo,hours:Jo*24,minutes:Jo*24*60,seconds:Jo*24*60*60,milliseconds:Jo*24*60*60*1e3},quarters:{months:3,weeks:Jo/28,days:Jo/4,hours:Jo*24/4,minutes:Jo*24*60/4,seconds:Jo*24*60*60/4,milliseconds:Jo*24*60*60*1e3/4},months:{weeks:oy/7,days:oy,hours:oy*24,minutes:oy*24*60,seconds:oy*24*60*60,milliseconds:oy*24*60*60*1e3},...AQ},Hf=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Qwe=Hf.slice(0).reverse();function wh(e,t,i=!1){const r={values:i?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new Xt(r)}function CQ(e,t){let i=t.milliseconds??0;for(const r of Qwe.slice(1))t[r]&&(i+=t[r]*e[r].milliseconds);return i}function yj(e,t){const i=CQ(e,t)<0?-1:1;Hf.reduceRight((r,n)=>{if(vt(t[n]))return r;if(r){const o=t[r]*i,c=e[n][r],y=Math.floor(o/c);t[n]+=y*i,t[r]-=y*c*i}return n},null),Hf.reduce((r,n)=>{if(vt(t[n]))return r;if(r){const o=t[r]%1;t[r]-=o,t[n]+=o*e[r][n]}return n},null)}function ebe(e){const t={};for(const[i,r]of Object.entries(e))r!==0&&(t[i]=r);return t}class Xt{constructor(t){const i=t.conversionAccuracy==="longterm"||!1;let r=i?Xwe:Ywe;t.matrix&&(r=t.matrix),this.values=t.values,this.loc=t.loc||fi.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(t,i){return Xt.fromObject({milliseconds:t},i)}static fromObject(t,i={}){if(t==null||typeof t!="object")throw new os(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new Xt({values:V9(t,Xt.normalizeUnit),loc:fi.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(t){if(qd(t))return Xt.fromMillis(t);if(Xt.isDuration(t))return t;if(typeof t=="object")return Xt.fromObject(t);throw new os(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,i){const[r]=Gwe(t);return r?Xt.fromObject(r,i):Xt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,i){const[r]=Hwe(t);return r?Xt.fromObject(r,i):Xt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,i=null){if(!t)throw new os("need to specify a reason the Duration is invalid");const r=t instanceof gl?t:new gl(t,i);if(vr.throwOnInvalid)throw new Ive(r);return new Xt({invalid:r})}static normalizeUnit(t){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!i)throw new zX(t);return i}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?cs.create(this.loc,r).formatDurationFromString(this,t):fj}toHuman(t={}){if(!this.isValid)return fj;const i=Hf.map(r=>{const n=this.values[r];return vt(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:r.slice(0,-1)}).format(n)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=jO(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},Ge.fromMillis(i,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?CQ(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const i=Xt.fromDurationLike(t),r={};for(const n of Hf)(ug(i.values,n)||ug(this.values,n))&&(r[n]=i.get(n)+this.get(n));return wh(this,{values:r},!0)}minus(t){if(!this.isValid)return this;const i=Xt.fromDurationLike(t);return this.plus(i.negate())}mapUnits(t){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=yQ(t(this.values[r],r));return wh(this,{values:i},!0)}get(t){return this[Xt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const i={...this.values,...V9(t,Xt.normalizeUnit)};return wh(this,{values:i})}reconfigure({locale:t,numberingSystem:i,conversionAccuracy:r,matrix:n}={}){const c={loc:this.loc.clone({locale:t,numberingSystem:i}),matrix:n,conversionAccuracy:r};return wh(this,c)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return yj(this.matrix,t),wh(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=ebe(this.normalize().shiftToAll().toObject());return wh(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(c=>Xt.normalizeUnit(c));const i={},r={},n=this.toObject();let o;for(const c of Hf)if(t.indexOf(c)>=0){o=c;let y=0;for(const _ in r)y+=this.matrix[_][c]*r[_],r[_]=0;qd(n[c])&&(y+=n[c]);const v=Math.trunc(y);i[c]=v,r[c]=(y*1e3-v*1e3)/1e3}else qd(n[c])&&(r[c]=n[c]);for(const c in r)r[c]!==0&&(i[o]+=c===o?r[c]:r[c]/this.matrix[o][c]);return yj(this.matrix,i),wh(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=this.values[i]===0?0:-this.values[i];return wh(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function i(r,n){return r===void 0||r===0?n===void 0||n===0:r===n}for(const r of Hf)if(!i(this.values[r],t.values[r]))return!1;return!0}}const ay="Invalid Interval";function tbe(e,t){return!e||!e.isValid?gr.invalid("missing or invalid start"):!t||!t.isValid?gr.invalid("missing or invalid end"):t<e?gr.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class gr{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,i=null){if(!t)throw new os("need to specify a reason the Interval is invalid");const r=t instanceof gl?t:new gl(t,i);if(vr.throwOnInvalid)throw new xve(r);return new gr({invalid:r})}static fromDateTimes(t,i){const r=pv(t),n=pv(i),o=tbe(r,n);return o??new gr({start:r,end:n})}static after(t,i){const r=Xt.fromDurationLike(i),n=pv(t);return gr.fromDateTimes(n,n.plus(r))}static before(t,i){const r=Xt.fromDurationLike(i),n=pv(t);return gr.fromDateTimes(n.minus(r),n)}static fromISO(t,i){const[r,n]=(t||"").split("/",2);if(r&&n){let o,c;try{o=Ge.fromISO(r,i),c=o.isValid}catch{c=!1}let y,v;try{y=Ge.fromISO(n,i),v=y.isValid}catch{v=!1}if(c&&v)return gr.fromDateTimes(o,y);if(c){const _=Xt.fromISO(n,i);if(_.isValid)return gr.after(o,_)}else if(v){const _=Xt.fromISO(r,i);if(_.isValid)return gr.before(y,_)}}return gr.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",i){if(!this.isValid)return NaN;const r=this.start.startOf(t,i);let n;return i!=null&&i.useLocaleWeeks?n=this.end.reconfigure({locale:r.locale}):n=this.end,n=n.startOf(t,i),Math.floor(n.diff(r,t).get(t))+(n.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:i}={}){return this.isValid?gr.fromDateTimes(t||this.s,i||this.e):this}splitAt(...t){if(!this.isValid)return[];const i=t.map(pv).filter(c=>this.contains(c)).sort((c,y)=>c.toMillis()-y.toMillis()),r=[];let{s:n}=this,o=0;for(;n<this.e;){const c=i[o]||this.e,y=+c>+this.e?this.e:c;r.push(gr.fromDateTimes(n,y)),n=y,o+=1}return r}splitBy(t){const i=Xt.fromDurationLike(t);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,n=1,o;const c=[];for(;r<this.e;){const y=this.start.plus(i.mapUnits(v=>v*n));o=+y>+this.e?this.e:y,c.push(gr.fromDateTimes(r,o)),r=o,n+=1}return c}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const i=this.s>t.s?this.s:t.s,r=this.e<t.e?this.e:t.e;return i>=r?null:gr.fromDateTimes(i,r)}union(t){if(!this.isValid)return this;const i=this.s<t.s?this.s:t.s,r=this.e>t.e?this.e:t.e;return gr.fromDateTimes(i,r)}static merge(t){const[i,r]=t.sort((n,o)=>n.s-o.s).reduce(([n,o],c)=>o?o.overlaps(c)||o.abutsStart(c)?[n,o.union(c)]:[n.concat([o]),c]:[n,c],[[],null]);return r&&i.push(r),i}static xor(t){let i=null,r=0;const n=[],o=t.map(v=>[{time:v.s,type:"s"},{time:v.e,type:"e"}]),c=Array.prototype.concat(...o),y=c.sort((v,_)=>v.time-_.time);for(const v of y)r+=v.type==="s"?1:-1,r===1?i=v.time:(i&&+i!=+v.time&&n.push(gr.fromDateTimes(i,v.time)),i=null);return gr.merge(n)}difference(...t){return gr.xor([this].concat(t)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:ay}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=D9,i={}){return this.isValid?cs.create(this.s.loc.clone(i),t).formatInterval(this):ay}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:ay}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:ay}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:ay}toFormat(t,{separator:i="  "}={}){return this.isValid?`${this.s.toFormat(t)}${i}${this.e.toFormat(t)}`:ay}toDuration(t,i){return this.isValid?this.e.diff(this.s,t,i):Xt.invalid(this.invalidReason)}mapEndpoints(t){return gr.fromDateTimes(t(this.s),t(this.e))}}class __{static hasDST(t=vr.defaultZone){const i=Ge.now().setZone(t).set({month:12});return!t.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(t){return ho.isValidZone(t)}static normalizeZone(t){return bd(t,vr.defaultZone)}static getStartOfWeek({locale:t=null,locObj:i=null}={}){return(i||fi.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:i=null}={}){return(i||fi.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:i=null}={}){return(i||fi.create(t)).getWeekendDays().slice()}static months(t="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:o="gregory"}={}){return(n||fi.create(i,r,o)).months(t)}static monthsFormat(t="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:o="gregory"}={}){return(n||fi.create(i,r,o)).months(t,!0)}static weekdays(t="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||fi.create(i,r,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||fi.create(i,r,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return fi.create(t).meridiems()}static eras(t="short",{locale:i=null}={}){return fi.create(i,null,"gregory").eras(t)}static features(){return{relative:dQ(),localeWeek:pQ()}}}function mj(e,t){const i=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(t)-i(e);return Math.floor(Xt.fromMillis(r).as("days"))}function ibe(e,t,i){const r=[["years",(v,_)=>_.year-v.year],["quarters",(v,_)=>_.quarter-v.quarter+(_.year-v.year)*4],["months",(v,_)=>_.month-v.month+(_.year-v.year)*12],["weeks",(v,_)=>{const I=mj(v,_);return(I-I%7)/7}],["days",mj]],n={},o=e;let c,y;for(const[v,_]of r)i.indexOf(v)>=0&&(c=v,n[v]=_(e,t),y=o.plus(n),y>t?(n[v]--,e=o.plus(n),e>t&&(y=e,n[v]--,e=o.plus(n))):e=y);return[e,n,y,c]}function rbe(e,t,i,r){let[n,o,c,y]=ibe(e,t,i);const v=t-n,_=i.filter($=>["hours","minutes","seconds","milliseconds"].indexOf($)>=0);_.length===0&&(c<t&&(c=n.plus({[y]:1})),c!==n&&(o[y]=(o[y]||0)+v/(c-n)));const I=Xt.fromObject(o,r);return _.length>0?Xt.fromMillis(v,r).shiftTo(..._).plus(I):I}const nbe="missing Intl.DateTimeFormat.formatToParts support";function ai(e,t=i=>i){return{regex:e,deser:([i])=>t(Wve(i))}}const sbe="",kQ=`[ ${sbe}]`,LQ=new RegExp(kQ,"g");function obe(e){return e.replace(/\./g,"\\.?").replace(LQ,kQ)}function gj(e){return e.replace(/\./g,"").replace(LQ," ").toLowerCase()}function Ra(e,t){return e===null?null:{regex:RegExp(e.map(obe).join("|")),deser:([i])=>e.findIndex(r=>gj(i)===gj(r))+t}}function vj(e,t){return{regex:e,deser:([,i,r])=>SI(i,r),groups:t}}function S_(e){return{regex:e,deser:([t])=>t}}function abe(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function lbe(e,t){const i=Oa(t),r=Oa(t,"{2}"),n=Oa(t,"{3}"),o=Oa(t,"{4}"),c=Oa(t,"{6}"),y=Oa(t,"{1,2}"),v=Oa(t,"{1,3}"),_=Oa(t,"{1,6}"),I=Oa(t,"{1,9}"),$=Oa(t,"{2,4}"),A=Oa(t,"{4,6}"),k=D=>({regex:RegExp(abe(D.val)),deser:([j])=>j,literal:!0}),N=(D=>{if(e.literal)return k(D);switch(D.val){case"G":return Ra(t.eras("short"),0);case"GG":return Ra(t.eras("long"),0);case"y":return ai(_);case"yy":return ai($,sA);case"yyyy":return ai(o);case"yyyyy":return ai(A);case"yyyyyy":return ai(c);case"M":return ai(y);case"MM":return ai(r);case"MMM":return Ra(t.months("short",!0),1);case"MMMM":return Ra(t.months("long",!0),1);case"L":return ai(y);case"LL":return ai(r);case"LLL":return Ra(t.months("short",!1),1);case"LLLL":return Ra(t.months("long",!1),1);case"d":return ai(y);case"dd":return ai(r);case"o":return ai(v);case"ooo":return ai(n);case"HH":return ai(r);case"H":return ai(y);case"hh":return ai(r);case"h":return ai(y);case"mm":return ai(r);case"m":return ai(y);case"q":return ai(y);case"qq":return ai(r);case"s":return ai(y);case"ss":return ai(r);case"S":return ai(v);case"SSS":return ai(n);case"u":return S_(I);case"uu":return S_(y);case"uuu":return ai(i);case"a":return Ra(t.meridiems(),0);case"kkkk":return ai(o);case"kk":return ai($,sA);case"W":return ai(y);case"WW":return ai(r);case"E":case"c":return ai(i);case"EEE":return Ra(t.weekdays("short",!1),1);case"EEEE":return Ra(t.weekdays("long",!1),1);case"ccc":return Ra(t.weekdays("short",!0),1);case"cccc":return Ra(t.weekdays("long",!0),1);case"Z":case"ZZ":return vj(new RegExp(`([+-]${y.source})(?::(${r.source}))?`),2);case"ZZZ":return vj(new RegExp(`([+-]${y.source})(${r.source})?`),2);case"z":return S_(/[a-z_+-/]{1,256}?/i);case" ":return S_(/[^\S\n\r]/);default:return k(D)}})(e)||{invalidReason:nbe};return N.token=e,N}const ube={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function cbe(e,t,i){const{type:r,value:n}=e;if(r==="literal"){const v=/^\s+$/.test(n);return{literal:!v,val:v?" ":n}}const o=t[r];let c=r;r==="hour"&&(t.hour12!=null?c=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?c="hour12":c="hour24":c=i.hour12?"hour12":"hour24");let y=ube[c];if(typeof y=="object"&&(y=y[o]),y)return{literal:!1,val:y}}function hbe(e){return[`^${e.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,e]}function dbe(e,t,i){const r=e.match(t);if(r){const n={};let o=1;for(const c in i)if(ug(i,c)){const y=i[c],v=y.groups?y.groups+1:1;!y.literal&&y.token&&(n[y.token.val[0]]=y.deser(r.slice(o,o+v))),o+=v}return[r,n]}else return[r,{}]}function pbe(e){const t=o=>{switch(o){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return vt(e.z)||(i=ho.create(e.z)),vt(e.Z)||(i||(i=new Vr(e.Z)),r=e.Z),vt(e.q)||(e.M=(e.q-1)*3+1),vt(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),vt(e.u)||(e.S=DO(e.u)),[Object.keys(e).reduce((o,c)=>{const y=t(c);return y&&(o[y]=e[c]),o},{}),i,r]}let S$=null;function fbe(){return S$||(S$=Ge.fromMillis(1555555555555)),S$}function ybe(e,t){if(e.literal)return e;const i=cs.macroTokenToFormatOpts(e.val),r=NQ(i,t);return r==null||r.includes(void 0)?e:r}function OQ(e,t){return Array.prototype.concat(...e.map(i=>ybe(i,t)))}class RQ{constructor(t,i){if(this.locale=t,this.format=i,this.tokens=OQ(cs.parseFormat(i),t),this.units=this.tokens.map(r=>lbe(r,t)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,n]=hbe(this.units);this.regex=RegExp(r,"i"),this.handlers=n}}explainFromTokens(t){if(this.isValid){const[i,r]=dbe(t,this.regex,this.handlers),[n,o,c]=r?pbe(r):[null,null,void 0];if(ug(r,"a")&&ug(r,"H"))throw new n1("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:r,result:n,zone:o,specificOffset:c}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function PQ(e,t,i){return new RQ(e,i).explainFromTokens(t)}function mbe(e,t,i){const{result:r,zone:n,specificOffset:o,invalidReason:c}=PQ(e,t,i);return[r,n,o,c]}function NQ(e,t){if(!e)return null;const r=cs.create(t,e).dtFormatter(fbe()),n=r.formatToParts(),o=r.resolvedOptions();return n.map(c=>cbe(c,e,o))}const x$="Invalid DateTime",wj=864e13;function Xv(e){return new gl("unsupported zone",`the zone "${e.name}" is not supported`)}function I$(e){return e.weekData===null&&(e.weekData=j9(e.c)),e.weekData}function T$(e){return e.localWeekData===null&&(e.localWeekData=j9(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function _p(e,t){const i={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Ge({...i,...t,old:i})}function FQ(e,t,i){let r=e-t*60*1e3;const n=i.offset(r);if(t===n)return[r,t];r-=(n-t)*60*1e3;const o=i.offset(r);return n===o?[r,n]:[e-Math.min(n,o)*60*1e3,Math.max(n,o)]}function x_(e,t){e+=t*60*1e3;const i=new Date(e);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function n5(e,t,i){return FQ(_I(e),t,i)}function bj(e,t){const i=e.o,r=e.c.year+Math.trunc(t.years),n=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,o={...e.c,year:r,month:n,day:Math.min(e.c.day,z9(r,n))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},c=Xt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),y=_I(o);let[v,_]=FQ(y,i,e.zone);return c!==0&&(v+=c,_=e.zone.offset(v)),{ts:v,o:_}}function ly(e,t,i,r,n,o){const{setZone:c,zone:y}=i;if(e&&Object.keys(e).length!==0||t){const v=t||y,_=Ge.fromObject(e,{...i,zone:v,specificOffset:o});return c?_:_.setZone(y)}else return Ge.invalid(new gl("unparsable",`the input "${n}" can't be parsed as ${r}`))}function I_(e,t,i=!0){return e.isValid?cs.create(fi.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(e,t):null}function $$(e,t){const i=e.c.year>9999||e.c.year<0;let r="";return i&&e.c.year>=0&&(r+="+"),r+=jr(e.c.year,i?6:4),t?(r+="-",r+=jr(e.c.month),r+="-",r+=jr(e.c.day)):(r+=jr(e.c.month),r+=jr(e.c.day)),r}function _j(e,t,i,r,n,o){let c=jr(e.c.hour);return t?(c+=":",c+=jr(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!i)&&(c+=":")):c+=jr(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!i)&&(c+=jr(e.c.second),(e.c.millisecond!==0||!r)&&(c+=".",c+=jr(e.c.millisecond,3))),n&&(e.isOffsetFixed&&e.offset===0&&!o?c+="Z":e.o<0?(c+="-",c+=jr(Math.trunc(-e.o/60)),c+=":",c+=jr(Math.trunc(-e.o%60))):(c+="+",c+=jr(Math.trunc(e.o/60)),c+=":",c+=jr(Math.trunc(e.o%60)))),o&&(c+="["+e.zone.ianaName+"]"),c}const DQ={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},gbe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},vbe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},jQ=["year","month","day","hour","minute","second","millisecond"],wbe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],bbe=["year","ordinal","hour","minute","second","millisecond"];function _be(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new zX(e);return t}function Sj(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return _be(e)}}function Sbe(e){return o5[e]||(s5===void 0&&(s5=vr.now()),o5[e]=e.offset(s5)),o5[e]}function xj(e,t){const i=bd(t.zone,vr.defaultZone);if(!i.isValid)return Ge.invalid(Xv(i));const r=fi.fromObject(t);let n,o;if(vt(e.year))n=vr.now();else{for(const v of jQ)vt(e[v])&&(e[v]=DQ[v]);const c=cQ(e)||hQ(e);if(c)return Ge.invalid(c);const y=Sbe(i);[n,o]=n5(e,y,i)}return new Ge({ts:n,zone:i,loc:r,o})}function Ij(e,t,i){const r=vt(i.round)?!0:i.round,n=(c,y)=>(c=jO(c,r||i.calendary?0:2,!0),t.loc.clone(i).relFormatter(i).format(c,y)),o=c=>i.calendary?t.hasSame(e,c)?0:t.startOf(c).diff(e.startOf(c),c).get(c):t.diff(e,c).get(c);if(i.unit)return n(o(i.unit),i.unit);for(const c of i.units){const y=o(c);if(Math.abs(y)>=1)return n(y,c)}return n(e>t?-0:0,i.units[i.units.length-1])}function Tj(e){let t={},i;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],i=Array.from(e).slice(0,e.length-1)):i=Array.from(e),[t,i]}let s5,o5={};class Ge{constructor(t){const i=t.zone||vr.defaultZone;let r=t.invalid||(Number.isNaN(t.ts)?new gl("invalid input"):null)||(i.isValid?null:Xv(i));this.ts=vt(t.ts)?vr.now():t.ts;let n=null,o=null;if(!r)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(i))[n,o]=[t.old.c,t.old.o];else{const y=qd(t.o)&&!t.old?t.o:i.offset(this.ts);n=x_(this.ts,y),r=Number.isNaN(n.year)?new gl("invalid input"):null,n=r?null:n,o=r?null:y}this._zone=i,this.loc=t.loc||fi.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=n,this.o=o,this.isLuxonDateTime=!0}static now(){return new Ge({})}static local(){const[t,i]=Tj(arguments),[r,n,o,c,y,v,_]=i;return xj({year:r,month:n,day:o,hour:c,minute:y,second:v,millisecond:_},t)}static utc(){const[t,i]=Tj(arguments),[r,n,o,c,y,v,_]=i;return t.zone=Vr.utcInstance,xj({year:r,month:n,day:o,hour:c,minute:y,second:v,millisecond:_},t)}static fromJSDate(t,i={}){const r=Xve(t)?t.valueOf():NaN;if(Number.isNaN(r))return Ge.invalid("invalid input");const n=bd(i.zone,vr.defaultZone);return n.isValid?new Ge({ts:r,zone:n,loc:fi.fromObject(i)}):Ge.invalid(Xv(n))}static fromMillis(t,i={}){if(qd(t))return t<-wj||t>wj?Ge.invalid("Timestamp out of range"):new Ge({ts:t,zone:bd(i.zone,vr.defaultZone),loc:fi.fromObject(i)});throw new os(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,i={}){if(qd(t))return new Ge({ts:t*1e3,zone:bd(i.zone,vr.defaultZone),loc:fi.fromObject(i)});throw new os("fromSeconds requires a numerical input")}static fromObject(t,i={}){t=t||{};const r=bd(i.zone,vr.defaultZone);if(!r.isValid)return Ge.invalid(Xv(r));const n=fi.fromObject(i),o=V9(t,Sj),{minDaysInFirstWeek:c,startOfWeek:y}=uj(o,n),v=vr.now(),_=vt(i.specificOffset)?r.offset(v):i.specificOffset,I=!vt(o.ordinal),$=!vt(o.year),A=!vt(o.month)||!vt(o.day),k=$||A,R=o.weekYear||o.weekNumber;if((k||I)&&R)throw new n1("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(A&&I)throw new n1("Can't mix ordinal dates with month/day");const N=R||o.weekday&&!k;let D,j,z=x_(v,_);N?(D=wbe,j=gbe,z=j9(z,c,y)):I?(D=bbe,j=vbe,z=_$(z)):(D=jQ,j=DQ);let U=!1;for(const ue of D){const Ie=o[ue];vt(Ie)?U?o[ue]=j[ue]:o[ue]=z[ue]:U=!0}const W=N?Zve(o,c,y):I?Kve(o):cQ(o),Q=W||hQ(o);if(Q)return Ge.invalid(Q);const K=N?aj(o,c,y):I?lj(o):o,[ee,ie]=n5(K,_,r),ae=new Ge({ts:ee,zone:r,o:ie,loc:n});return o.weekday&&k&&t.weekday!==ae.weekday?Ge.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${ae.toISO()}`):ae.isValid?ae:Ge.invalid(ae.invalid)}static fromISO(t,i={}){const[r,n]=Vwe(t);return ly(r,n,i,"ISO 8601",t)}static fromRFC2822(t,i={}){const[r,n]=Uwe(t);return ly(r,n,i,"RFC 2822",t)}static fromHTTP(t,i={}){const[r,n]=Bwe(t);return ly(r,n,i,"HTTP",i)}static fromFormat(t,i,r={}){if(vt(t)||vt(i))throw new os("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:o=null}=r,c=fi.fromOpts({locale:n,numberingSystem:o,defaultToEN:!0}),[y,v,_,I]=mbe(c,t,i);return I?Ge.invalid(I):ly(y,v,r,`format ${i}`,t,_)}static fromString(t,i,r={}){return Ge.fromFormat(t,i,r)}static fromSQL(t,i={}){const[r,n]=Kwe(t);return ly(r,n,i,"SQL",t)}static invalid(t,i=null){if(!t)throw new os("need to specify a reason the DateTime is invalid");const r=t instanceof gl?t:new gl(t,i);if(vr.throwOnInvalid)throw new Sve(r);return new Ge({invalid:r})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,i={}){const r=NQ(t,fi.fromObject(i));return r?r.map(n=>n?n.val:null).join(""):null}static expandFormat(t,i={}){return OQ(cs.parseFormat(t),fi.fromObject(i)).map(n=>n.val).join("")}static resetCache(){s5=void 0,o5={}}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?I$(this).weekYear:NaN}get weekNumber(){return this.isValid?I$(this).weekNumber:NaN}get weekday(){return this.isValid?I$(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?T$(this).weekday:NaN}get localWeekNumber(){return this.isValid?T$(this).weekNumber:NaN}get localWeekYear(){return this.isValid?T$(this).weekYear:NaN}get ordinal(){return this.isValid?_$(this.c).ordinal:NaN}get monthShort(){return this.isValid?__.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?__.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?__.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?__.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,i=6e4,r=_I(this.c),n=this.zone.offset(r-t),o=this.zone.offset(r+t),c=this.zone.offset(r-n*i),y=this.zone.offset(r-o*i);if(c===y)return[this];const v=r-c*i,_=r-y*i,I=x_(v,c),$=x_(_,y);return I.hour===$.hour&&I.minute===$.minute&&I.second===$.second&&I.millisecond===$.millisecond?[_p(this,{ts:v}),_p(this,{ts:_})]:[this]}get isInLeapYear(){return v3(this.year)}get daysInMonth(){return z9(this.year,this.month)}get daysInYear(){return this.isValid?E1(this.year):NaN}get weeksInWeekYear(){return this.isValid?_2(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?_2(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:i,numberingSystem:r,calendar:n}=cs.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:n}}toUTC(t=0,i={}){return this.setZone(Vr.instance(t),i)}toLocal(){return this.setZone(vr.defaultZone)}setZone(t,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(t=bd(t,vr.defaultZone),t.equals(this.zone))return this;if(t.isValid){let n=this.ts;if(i||r){const o=t.offset(this.ts),c=this.toObject();[n]=n5(c,o,t)}return _p(this,{ts:n,zone:t})}else return Ge.invalid(Xv(t))}reconfigure({locale:t,numberingSystem:i,outputCalendar:r}={}){const n=this.loc.clone({locale:t,numberingSystem:i,outputCalendar:r});return _p(this,{loc:n})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const i=V9(t,Sj),{minDaysInFirstWeek:r,startOfWeek:n}=uj(i,this.loc),o=!vt(i.weekYear)||!vt(i.weekNumber)||!vt(i.weekday),c=!vt(i.ordinal),y=!vt(i.year),v=!vt(i.month)||!vt(i.day),_=y||v,I=i.weekYear||i.weekNumber;if((_||c)&&I)throw new n1("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(v&&c)throw new n1("Can't mix ordinal dates with month/day");let $;o?$=aj({...j9(this.c,r,n),...i},r,n):vt(i.ordinal)?($={...this.toObject(),...i},vt(i.day)&&($.day=Math.min(z9($.year,$.month),$.day))):$=lj({..._$(this.c),...i});const[A,k]=n5($,this.o,this.zone);return _p(this,{ts:A,o:k})}plus(t){if(!this.isValid)return this;const i=Xt.fromDurationLike(t);return _p(this,bj(this,i))}minus(t){if(!this.isValid)return this;const i=Xt.fromDurationLike(t).negate();return _p(this,bj(this,i))}startOf(t,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const r={},n=Xt.normalizeUnit(t);switch(n){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(n==="weeks")if(i){const o=this.loc.getStartOfWeek(),{weekday:c}=this;c<o&&(r.weekNumber=this.weekNumber-1),r.weekday=o}else r.weekday=1;if(n==="quarters"){const o=Math.ceil(this.month/3);r.month=(o-1)*3+1}return this.set(r)}endOf(t,i){return this.isValid?this.plus({[t]:1}).startOf(t,i).minus(1):this}toFormat(t,i={}){return this.isValid?cs.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,t):x$}toLocaleString(t=D9,i={}){return this.isValid?cs.create(this.loc.clone(i),t).formatDateTime(this):x$}toLocaleParts(t={}){return this.isValid?cs.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:n=!0,extendedZone:o=!1}={}){if(!this.isValid)return null;const c=t==="extended";let y=$$(this,c);return y+="T",y+=_j(this,c,i,r,n,o),y}toISODate({format:t="extended"}={}){return this.isValid?$$(this,t==="extended"):null}toISOWeekDate(){return I_(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:n=!1,extendedZone:o=!1,format:c="extended"}={}){return this.isValid?(n?"T":"")+_j(this,c==="extended",i,t,r,o):null}toRFC2822(){return I_(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return I_(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?$$(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let n="HH:mm:ss.SSS";return(i||t)&&(r&&(n+=" "),i?n+="z":t&&(n+="ZZ")),I_(this,n,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():x$}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const i={...this.c};return t.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,i="milliseconds",r={}){if(!this.isValid||!t.isValid)return Xt.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...r},o=Qve(i).map(Xt.normalizeUnit),c=t.valueOf()>this.valueOf(),y=c?this:t,v=c?t:this,_=rbe(y,v,o,n);return c?_.negate():_}diffNow(t="milliseconds",i={}){return this.diff(Ge.now(),t,i)}until(t){return this.isValid?gr.fromDateTimes(this,t):this}hasSame(t,i,r){if(!this.isValid)return!1;const n=t.valueOf(),o=this.setZone(t.zone,{keepLocalTime:!0});return o.startOf(i,r)<=n&&n<=o.endOf(i,r)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const i=t.base||Ge.fromObject({},{zone:this.zone}),r=t.padding?this<i?-t.padding:t.padding:0;let n=["years","months","days","hours","minutes","seconds"],o=t.unit;return Array.isArray(t.unit)&&(n=t.unit,o=void 0),Ij(i,this.plus(r),{...t,numeric:"always",units:n,unit:o})}toRelativeCalendar(t={}){return this.isValid?Ij(t.base||Ge.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Ge.isDateTime))throw new os("min requires all arguments be DateTimes");return cj(t,i=>i.valueOf(),Math.min)}static max(...t){if(!t.every(Ge.isDateTime))throw new os("max requires all arguments be DateTimes");return cj(t,i=>i.valueOf(),Math.max)}static fromFormatExplain(t,i,r={}){const{locale:n=null,numberingSystem:o=null}=r,c=fi.fromOpts({locale:n,numberingSystem:o,defaultToEN:!0});return PQ(c,t,i)}static fromStringExplain(t,i,r={}){return Ge.fromFormatExplain(t,i,r)}static buildFormatParser(t,i={}){const{locale:r=null,numberingSystem:n=null}=i,o=fi.fromOpts({locale:r,numberingSystem:n,defaultToEN:!0});return new RQ(o,t)}static fromFormatParser(t,i,r={}){if(vt(t)||vt(i))throw new os("fromFormatParser requires an input string and a format parser");const{locale:n=null,numberingSystem:o=null}=r,c=fi.fromOpts({locale:n,numberingSystem:o,defaultToEN:!0});if(!c.equals(i.locale))throw new os(`fromFormatParser called with a locale of ${c}, but the format parser was created for ${i.locale}`);const{result:y,zone:v,specificOffset:_,invalidReason:I}=i.explainFromTokens(t);return I?Ge.invalid(I):ly(y,v,r,`format ${i.format}`,t,_)}static get DATE_SHORT(){return D9}static get DATE_MED(){return VX}static get DATE_MED_WITH_WEEKDAY(){return Tve}static get DATE_FULL(){return UX}static get DATE_HUGE(){return BX}static get TIME_SIMPLE(){return GX}static get TIME_WITH_SECONDS(){return qX}static get TIME_WITH_SHORT_OFFSET(){return HX}static get TIME_WITH_LONG_OFFSET(){return WX}static get TIME_24_SIMPLE(){return JX}static get TIME_24_WITH_SECONDS(){return ZX}static get TIME_24_WITH_SHORT_OFFSET(){return KX}static get TIME_24_WITH_LONG_OFFSET(){return YX}static get DATETIME_SHORT(){return XX}static get DATETIME_SHORT_WITH_SECONDS(){return QX}static get DATETIME_MED(){return eQ}static get DATETIME_MED_WITH_SECONDS(){return tQ}static get DATETIME_MED_WITH_WEEKDAY(){return $ve}static get DATETIME_FULL(){return iQ}static get DATETIME_FULL_WITH_SECONDS(){return rQ}static get DATETIME_HUGE(){return nQ}static get DATETIME_HUGE_WITH_SECONDS(){return sQ}}function pv(e){if(Ge.isDateTime(e))return e;if(e&&e.valueOf&&qd(e.valueOf()))return Ge.fromJSDate(e);if(e&&typeof e=="object")return Ge.fromObject(e);throw new os(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const Uo="system",L0="unknown",Ru="UTC",xbe=Intl.DateTimeFormat().resolvedOptions().timeZone,Ibe="shortOffset";function Tbe(e){return"timeZoneIANA"in e}function $be(e){return e.startsWith("UTC")}function U9(e,t=!1){return{json:{read:{source:e,reader:(i,r)=>r[e]?a5(r[e]):null},write:!!t&&{allowNull:!0,writer(i,r){r[e]=i?Ebe(i):null}}}}}function a5(e,t=Uo){return e?Tbe(e)?e.timeZoneIANA:Mbe(e,t):t}function Ebe(e){return{timeZoneIANA:e}}function Mbe(e,t=Uo){if(!e||!ZD.has(e.timeZone))return t;const i=ZD.get(e.timeZone);return $be(e.timeZone)||e.respectsDaylightSaving?i:Abe(i)}function Abe(e){const t=Ge.local().setZone(e),i=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${Vr.instance(-i).formatOffset(0,"narrow")}`}function zQ(e,t,i,r,n){if(t&&n==="date")return{timeZone:Ru,timeZoneName:void 0};const o=r.timeStyle||r.hour,c=i===L0;return{timeZone:c?n==="timestamp-offset"?void 0:e??Ru:i,timeZoneName:c&&o?Ibe:void 0}}function Cbe(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map(r=>r.toLowerCase()));return e===Uo||e===L0||t.has(e.toLowerCase())||i.has(e.toLowerCase())}const kbe={year:void 0,month:void 0,day:void 0,weekday:void 0},Lbe={hour:void 0,minute:void 0,second:void 0},VQ={timeZone:Ru},Nl={year:"numeric",month:"numeric",day:"numeric"},fv={year:"numeric",month:"long",day:"numeric"},yv={year:"numeric",month:"short",day:"numeric"},mv={year:"numeric",month:"long",weekday:"long",day:"numeric"},cd={hour:"numeric",minute:"numeric"},Dp={...cd,second:"numeric"},UQ={hourCycle:"h23"},gv={...cd,...UQ},vv={...Dp,...UQ},BQ={"short-date":Nl,"short-date-short-time":{...Nl,...cd},"short-date-short-time-24":{...Nl,...gv},"short-date-long-time":{...Nl,...Dp},"short-date-long-time-24":{...Nl,...vv},"short-date-le":Nl,"short-date-le-short-time":{...Nl,...cd},"short-date-le-short-time-24":{...Nl,...gv},"short-date-le-long-time":{...Nl,...Dp},"short-date-le-long-time-24":{...Nl,...vv},"long-month-day-year":fv,"long-month-day-year-short-time":{...fv,...cd},"long-month-day-year-short-time-24":{...fv,...gv},"long-month-day-year-long-time":{...fv,...Dp},"long-month-day-year-long-time-24":{...fv,...vv},"day-short-month-year":yv,"day-short-month-year-short-time":{...yv,...cd},"day-short-month-year-short-time-24":{...yv,...gv},"day-short-month-year-long-time":{...yv,...Dp},"day-short-month-year-long-time-24":{...yv,...vv},"long-date":mv,"long-date-short-time":{...mv,...cd},"long-date-short-time-24":{...mv,...gv},"long-date-long-time":{...mv,...Dp},"long-date-long-time-24":{...mv,...vv},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":cd,"long-time":Dp},Obe=nn()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),GQ={ar:"ar-u-nu-latn-ca-gregory"};let oA=new WeakMap;const II=BQ["short-date-short-time"];function Rbe(e){let t=oA.get(e);if(!t){const i=ps(),r=GQ[i]||i,n=BO(e.timeZone??Uo),o={...e,timeZone:n};t=new Intl.DateTimeFormat(r,o),oA.set(e,t)}return t}function Rf(e){return BQ[e]}function ro(e,t=II){return Rbe(t).format(e)}function Pbe(e,t=II){return ro(new Date(e),{...t,...VQ,...Lbe})}function Nbe(e,t=II){return ro(new Date(`1970-01-01T${e}Z`),{...t,...VQ,...kbe})}function Fbe(e,t=II){if(t.timeZone)return ro(new Date(e),t);const i=Ge.fromISO(e,{setZone:!0}),r=ps(),n=GQ[r]??r,o=i.offset===0?Ru:t.timeZone,c={...t,timeZone:o};return i.toLocaleString(c,{locale:n})}function BO(e){switch(e){case Uo:return xbe;case L0:return Ru;default:return e}}RO(()=>{oA=new WeakMap});const Dbe={ar:"ar-u-nu-latn"};let l5=new WeakMap,qQ={};function aA(e){const t=e||qQ;if(!l5.has(t)){const i=ps(),r=Dbe[ps()]||i;l5.set(t,new Intl.NumberFormat(r,e))}return l5.get(t)}function B9(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function jn(e,t){return Object.is(e,-0)&&(e=0),aA(t).format(e)}function vZe(e,t=ps()){var r,n;if(!e)return null;let i=$j.get(t);if(!i){const o=aA().formatToParts(12345.6),c=[...aA({useGrouping:!1}).format(9876543210)].reverse(),y=new Map(c.map((k,R)=>[k,R])),v=new RegExp(`[${(r=o.find(k=>k.type==="group"))==null?void 0:r.value}]`,"g"),_=new RegExp(`[${(n=o.find(k=>k.type==="decimal"))==null?void 0:n.value}]`),I=new RegExp(`[${c.join("")}]`,"g"),$=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,A=/[-\u2212\u2013\u2014\u2015]/g;i=k=>{if((k=k.trim().replaceAll(v,"").replace(_,".").replace(I,N=>String(y.get(N))).replaceAll($,"").replaceAll(A,"-"))==="")return null;const R=Number(k);return isNaN(R)?null:R},$j.set(t,i)}return i(e)}RO(()=>{l5=new WeakMap,qQ={}});const $j=new Map,HQ=()=>_e.getLogger("esri.intl.substitute");function mn(e,t,i={}){const{format:r={}}=i;return Il(e,n=>jbe(n,t,r))}function jbe(e,t,i){let r,n;const o=e.indexOf(":");if(o===-1?r=e.trim():(r=e.slice(0,o).trim(),n=e.slice(o+1).trim()),!r)return"";const c=n3(r,t);if(c==null)return"";const y=(n?i==null?void 0:i[n]:null)??(i==null?void 0:i[r]);return y?zbe(c,y):n?Vbe(c,n):GO(c)}function zbe(e,t){switch(t.type){case"date":return ro(e,t.intlOptions);case"number":return jn(e,t.intlOptions);default:return HQ().warn("missing format descriptor for key {key}"),GO(e)}}function Vbe(e,t){switch(t.toLowerCase()){case"dateformat":return ro(e);case"numberformat":return jn(e);default:return HQ().warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?ro(e):/^numberformat/i.test(t)?jn(e):GO(e)}}function GO(e){switch(typeof e){case"string":return e;case"number":return jn(e);case"boolean":return""+e;default:return e instanceof Date?ro(e):""}}const Ej=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,Ube={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function Mj(e){return e in Ube}const Qv=[],A1=new Map;function Aj(e){for(const t of A1.keys())WQ(e.pattern,t)&&A1.delete(t)}function Bbe(e){return Qv.includes(e)||(Aj(e),Qv.unshift(e)),ei(()=>{const t=Qv.indexOf(e);t>-1&&(Qv.splice(t,1),Aj(e))})}async function _3(e){const t=ps();A1.has(e)||A1.set(e,qbe(e,t));const i=A1.get(e);return i&&await Hbe.add(i),i}function Gbe(e){if(!Ej.test(e))return null;const t=Ej.exec(e);if(t===null)return null;const[,i,r]=t,n=i+(r?"-"+r.toUpperCase():"");return Mj(n)?n:Mj(i)?i:null}async function qbe(e,t){const i=[];for(const r of Qv)if(WQ(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(n){i.push(n)}throw i.length?new ne("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:i}):new ne("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function WQ(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}RO(()=>{A1.clear()});const Hbe=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Vo())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function Wbe(e,t,i,r){const n=t.exec(i);if(!n)throw new ne("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const o=n[1]?`${n[1]}/`:"",c=n[2],y=Gbe(r),v=`${o}${c}.json`,_=y?`${o}${c}_${y}.json`:v;let I;try{I=await Cj(e(_))}catch($){if(_===v)throw new ne("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:$});try{I=await Cj(e(v))}catch(A){throw new ne("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:A})}}return I}async function Cj(e){if(kj.fetchBundleAsset!=null)return kj.fetchBundleAsset(e);const t=await Et(e,{responseType:"text"});return JSON.parse(t.data)}let Jbe=class{constructor({base:t="",pattern:i,location:r=new URL(window.location.href)}){let n;n=typeof r=="string"?o=>new URL(o,new URL(r,window.location.href)).href:r instanceof URL?o=>new URL(o,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=n,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,i){return Wbe(this.getAssetUrl,this.matcher,t,i)}};function Zbe(e){return new Jbe(e)}const kj={};Bbe(Zbe({pattern:"esri/",location:jt}));const Lj={};function Kbe(e){var i;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:((i=e.packages)==null?void 0:i.slice())||[],paths:{...Lj.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=Lj.baseUrl),t}let Ybe=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>t[i](...r)})}},u5=class{constructor(){this._dispatcher=new Ybe,this._workerPostMessage({type:yn.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){v9(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,i,r){this._dispatcher.addEventListener(t,i,r)}removeEventListener(t,i,r){this._dispatcher.removeEventListener(t,i,r)}_workerPostMessage(t){v9(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const i=b2(t);if(i&&i.type===yn.OPEN){const{modulePath:r,jobId:n}=i;let o=await ep.loadWorker(r);o||(o=await import(r));const c=ep.connect(o);this._workerPostMessage({type:yn.OPENED,jobId:n,data:c})}}};const lA=()=>_e.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:Xbe}=yn,Qbe='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let T_,$_;const Oj="Failed to create Worker. Fallback to execute module in main thread";async function e2e(){if(!we("esri-workers"))return Rj(new u5);if(!T_&&!$_)try{const t=Qbe.split("{CONFIGURATION}").join(t2e());T_=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){$_=t||{}}let e;if(T_)try{e=new Worker(T_,{name:"esri-worker-"+i2e++})}catch{lA().warn(Oj,$_),e=new u5}else lA().warn(Oj,$_),e=new u5;return Rj(e)}async function Rj(e){return new Promise(t=>{function i(n){const o=b2(n);o&&o.type===Xbe&&(e.removeEventListener("message",i),e.removeEventListener("error",r),t(e))}function r(n){n.preventDefault(),e.removeEventListener("message",i),e.removeEventListener("error",r),lA().warn("Failed to create Worker. Fallback to execute module in main thread",n),(e=new u5).addEventListener("message",i),e.addEventListener("error",r)}e.addEventListener("message",i),e.addEventListener("error",r)})}function t2e(){let e;if(qt.default!=null){const n={...qt};delete n.default,e=JSON.parse(JSON.stringify(n))}else e=JSON.parse(JSON.stringify(qt));e.assetsPath=Xs(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?Xs(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=ps(),e.has={"esri-csp-restrictions":we("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":we("esri-2d-update-debug"),"esri-2d-log-updating":we("esri-2d-log-updating"),"featurelayer-pbf":we("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":we("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":we("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":we("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":we("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":we("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":we("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":we("featurelayer-snapshot-enabled"),"esri-atomics":we("esri-atomics"),"esri-shared-array-buffer":we("esri-shared-array-buffer"),"esri-tiles-debug":we("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":we("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":we("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=Xs(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=Xs(e.workers.workerPath):e.workers.workerPath=Xs(jt("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=qt.workers.loaderConfig,i=Kbe({baseUrl:t==null?void 0:t.baseUrl,locale:ps(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]});return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:{buildDate:SY,fullVersion:mO,revision:xY}})}let i2e=0;const{ABORT:Pj,INVOKE:r2e,OPEN:n2e,OPENED:s2e,RESPONSE:wv}=yn;let o2e=class JQ{static async create(t){const i=await e2e();return new JQ(i,t)}constructor(t,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=i,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",r=>{r.preventDefault(),_e.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(t,i={}){const{signal:r}=i,n=DX();return new Promise((o,c)=>{const y={resolve:o,reject:c,abortHandle:rO(r,()=>{this._outJobs.delete(n),this._post({type:Pj,jobId:n})})};this._outJobs.set(n,y),this._post({type:n2e,jobId:n,modulePath:t})})}_onMessage(t){const i=b2(t);if(i)switch(i.type){case s2e:this._onOpenedMessage(i);break;case wv:this._onResponseMessage(i);break;case Pj:this._onAbortMessage(i);break;case r2e:this._onInvokeMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,n=i.get(r);n&&(n.controller&&n.controller.abort(),i.delete(r))}_onInvokeMessage(t){const{methodName:i,jobId:r,data:n,abortable:o}=t,c=o?new AbortController:null,y=this._inJobs,v=wve[i];let _;try{if(typeof v!="function")throw new TypeError(`${i} is not a function`);_=v.call(null,n,{signal:c?c.signal:null})}catch(I){return void this._post({type:wv,jobId:r,error:w2(I)})}Fu(_)?(y.set(r,{controller:c,promise:_}),_.then(I=>{y.has(r)&&(y.delete(r),this._post({type:wv,jobId:r},I))},I=>{y.has(r)&&(y.delete(r),I||(I={message:"Error encountered at method"+i}),br(I)||this._post({type:wv,jobId:r,error:w2(I||{message:`Error encountered at method ${i}`})}))})):this._post({type:wv,jobId:r},_)}_onOpenedMessage(t){const{jobId:i,data:r}=t,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),Bi(n.abortHandle),n.resolve(r))}_onResponseMessage(t){const{jobId:i,error:r,data:n}=t,o=this._outJobs.get(i);o&&(this._outJobs.delete(i),Bi(o.abortHandle),r?o.reject(ne.fromJSON(JSON.parse(r))):o.resolve(n))}_post(t,i,r){return OO(this.worker,t,i,r)}};const Nj=we("host-browser")?Math.min(navigator.hardwareConcurrency-1,we("workers-pool-size")??8):0;let Wf=we("esri-mobile")?Math.min(Nj,3):Nj;Wf||(Wf=we("safari")&&we("mac")?7:2);let Fj=0;const c5=[];function a2e(){ZQ()}async function E_(e,t){const i=new vve,{registryTarget:r,...n}=t;return await i.open(e,n),r&&lve(r,i),i}async function l2e(e,t={}){if(typeof e!="string")throw new ne("workers:undefined-module","modulePath is missing");let i=t.strategy||"distributed";if(we("host-webworker")&&!we("esri-workers")&&(i="local"),i==="local"){let r=await ep.loadWorker(e);r||(r=await import(e)),Gi(t.signal);const n=t.client||r;return E_([ep.connect(r,t.schedule)],{...t,client:n})}if(await ZQ(),Gi(t.signal),i==="dedicated"){const r=Fj++%Wf;return E_([await c5[r].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const r=Math.min(t.maxNumWorkers,Wf);if(r<Wf){const n=new Array(r);for(let o=0;o<r;++o){const c=Fj++%Wf;n[o]=c5[c].open(e,t)}return E_(n,t)}}return E_(c5.map(r=>r.open(e,t)),t)}let M_=null;async function ZQ(){if(M_)return M_;new AbortController;const e=[];for(let t=0;t<Wf;t++){const i=o2e.create(t).then(r=>(c5[t]=r,r));e.push(i)}return M_=Promise.all(e),M_}function pp(){return[0,0,0]}function qO(e){return[e[0],e[1],e[2]]}function Ug(e,t,i){return[e,t,i]}function u2e(e,t,i){return[e,t,i]}function c2e(e,t=pp()){const i=Math.min(3,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function h2e(e,t){return new Float64Array(e,t,3)}function KQ(){return pp()}function YQ(){return Ug(1,1,1)}function XQ(){return Ug(1,0,0)}function QQ(){return Ug(0,1,0)}function eee(){return Ug(0,0,1)}const d2e=KQ(),tee=YQ(),p2e=XQ(),f2e=QQ(),y2e=eee();Object.freeze(Object.defineProperty({__proto__:null,ONES:tee,UNIT_X:p2e,UNIT_Y:f2e,UNIT_Z:y2e,ZEROS:d2e,clone:qO,create:pp,createView:h2e,freeze:u2e,fromArray:c2e,fromValues:Ug,ones:YQ,unitX:XQ,unitY:QQ,unitZ:eee,zeros:KQ},Symbol.toStringTag,{value:"Module"}));const SZe=Math.PI/180,xZe=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,bh=ur.radius,Pa=ur.eccentricitySquared,m2e={a1:bh*Pa,a2:bh*Pa*bh*Pa,a3:bh*Pa*Pa/2,a4:bh*Pa*bh*Pa*2.5,a5:bh*Pa+bh*Pa*Pa/2,a6:1-Pa},IZe={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:ur.radius,f:ur.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Xd.radius,f:Xd.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Eu.radius,f:Eu.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Eu.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var ve;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=7]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=9]="GCSMOON2000",e[e.LON_LAT=10]="LON_LAT",e[e.PLATE_CARREE=11]="PLATE_CARREE"})(ve||(ve={}));const g2e={[ve.WGS84]:{[ve.CGCS2000]:ji,[ve.GCSMARS2000]:null,[ve.GCSMOON2000]:null,[ve.LON_LAT]:ji,[ve.SPHERICAL_ECEF]:Tb,[ve.SPHERICAL_MARS_PCPF]:null,[ve.SPHERICAL_MOON_PCPF]:null,[ve.UNKNOWN]:null,[ve.WEB_MERCATOR]:C1,[ve.PLATE_CARREE]:k1,[ve.WGS84]:ji,[ve.WGS84_ECEF]:R1},[ve.CGCS2000]:{[ve.CGCS2000]:ji,[ve.GCSMARS2000]:null,[ve.GCSMOON2000]:null,[ve.LON_LAT]:ji,[ve.SPHERICAL_ECEF]:Tb,[ve.SPHERICAL_MARS_PCPF]:null,[ve.SPHERICAL_MOON_PCPF]:null,[ve.UNKNOWN]:null,[ve.WEB_MERCATOR]:C1,[ve.PLATE_CARREE]:k1,[ve.WGS84]:ji,[ve.WGS84_ECEF]:R1},[ve.GCSMARS2000]:{[ve.CGCS2000]:null,[ve.GCSMARS2000]:ji,[ve.GCSMOON2000]:null,[ve.LON_LAT]:ji,[ve.SPHERICAL_ECEF]:null,[ve.SPHERICAL_MARS_PCPF]:zj,[ve.SPHERICAL_MOON_PCPF]:null,[ve.UNKNOWN]:null,[ve.WEB_MERCATOR]:null,[ve.PLATE_CARREE]:null,[ve.WGS84]:null,[ve.WGS84_ECEF]:null},[ve.GCSMOON2000]:{[ve.CGCS2000]:null,[ve.GCSMARS2000]:null,[ve.GCSMOON2000]:ji,[ve.LON_LAT]:ji,[ve.SPHERICAL_ECEF]:null,[ve.SPHERICAL_MARS_PCPF]:null,[ve.SPHERICAL_MOON_PCPF]:jj,[ve.UNKNOWN]:null,[ve.WEB_MERCATOR]:null,[ve.PLATE_CARREE]:null,[ve.WGS84]:null,[ve.WGS84_ECEF]:null},[ve.WEB_MERCATOR]:{[ve.CGCS2000]:Ib,[ve.GCSMARS2000]:null,[ve.GCSMOON2000]:null,[ve.LON_LAT]:Ib,[ve.SPHERICAL_ECEF]:v2e,[ve.SPHERICAL_MARS_PCPF]:null,[ve.SPHERICAL_MOON_PCPF]:null,[ve.UNKNOWN]:null,[ve.WEB_MERCATOR]:ji,[ve.PLATE_CARREE]:_2e,[ve.WGS84]:Ib,[ve.WGS84_ECEF]:w2e},[ve.WGS84_ECEF]:{[ve.CGCS2000]:P1,[ve.GCSMARS2000]:null,[ve.GCSMOON2000]:null,[ve.LON_LAT]:P1,[ve.SPHERICAL_ECEF]:C2e,[ve.SPHERICAL_MARS_PCPF]:null,[ve.SPHERICAL_MOON_PCPF]:null,[ve.UNKNOWN]:null,[ve.WEB_MERCATOR]:k2e,[ve.PLATE_CARREE]:S2e,[ve.WGS84]:P1,[ve.WGS84_ECEF]:ji},[ve.SPHERICAL_ECEF]:{[ve.CGCS2000]:O1,[ve.GCSMARS2000]:null,[ve.GCSMOON2000]:null,[ve.LON_LAT]:O1,[ve.SPHERICAL_ECEF]:ji,[ve.SPHERICAL_MARS_PCPF]:null,[ve.SPHERICAL_MOON_PCPF]:null,[ve.UNKNOWN]:null,[ve.WEB_MERCATOR]:E2e,[ve.PLATE_CARREE]:x2e,[ve.WGS84]:O1,[ve.WGS84_ECEF]:M2e},[ve.SPHERICAL_MARS_PCPF]:{[ve.CGCS2000]:null,[ve.GCSMARS2000]:Uj,[ve.GCSMOON2000]:null,[ve.LON_LAT]:Uj,[ve.SPHERICAL_ECEF]:null,[ve.SPHERICAL_MARS_PCPF]:ji,[ve.SPHERICAL_MOON_PCPF]:null,[ve.UNKNOWN]:null,[ve.WEB_MERCATOR]:null,[ve.PLATE_CARREE]:null,[ve.WGS84]:null,[ve.WGS84_ECEF]:null},[ve.SPHERICAL_MOON_PCPF]:{[ve.CGCS2000]:null,[ve.GCSMARS2000]:null,[ve.GCSMOON2000]:Vj,[ve.LON_LAT]:Vj,[ve.SPHERICAL_ECEF]:null,[ve.SPHERICAL_MARS_PCPF]:null,[ve.SPHERICAL_MOON_PCPF]:ji,[ve.UNKNOWN]:null,[ve.WEB_MERCATOR]:null,[ve.PLATE_CARREE]:null,[ve.WGS84]:null,[ve.WGS84_ECEF]:null},[ve.UNKNOWN]:{[ve.CGCS2000]:null,[ve.GCSMARS2000]:null,[ve.GCSMOON2000]:null,[ve.LON_LAT]:null,[ve.SPHERICAL_ECEF]:null,[ve.SPHERICAL_MARS_PCPF]:null,[ve.SPHERICAL_MOON_PCPF]:null,[ve.UNKNOWN]:ji,[ve.WEB_MERCATOR]:null,[ve.PLATE_CARREE]:null,[ve.WGS84]:null,[ve.WGS84_ECEF]:null},[ve.LON_LAT]:{[ve.CGCS2000]:ji,[ve.GCSMARS2000]:ji,[ve.GCSMOON2000]:ji,[ve.LON_LAT]:ji,[ve.SPHERICAL_ECEF]:Tb,[ve.SPHERICAL_MARS_PCPF]:zj,[ve.SPHERICAL_MOON_PCPF]:jj,[ve.UNKNOWN]:null,[ve.WEB_MERCATOR]:C1,[ve.PLATE_CARREE]:k1,[ve.WGS84]:ji,[ve.WGS84_ECEF]:R1},[ve.PLATE_CARREE]:{[ve.CGCS2000]:L1,[ve.GCSMARS2000]:null,[ve.GCSMOON2000]:null,[ve.LON_LAT]:L1,[ve.SPHERICAL_ECEF]:I2e,[ve.SPHERICAL_MARS_PCPF]:null,[ve.SPHERICAL_MOON_PCPF]:null,[ve.UNKNOWN]:null,[ve.WEB_MERCATOR]:T2e,[ve.PLATE_CARREE]:ji,[ve.WGS84]:L1,[ve.WGS84_ECEF]:$2e}};function iee(e,t,i=ree()){return e==null||t==null?null:L2e(e,t,i).projector}function Dj(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=Al(e,1)),O9(e)?t.spatialReferenceId=ve.SPHERICAL_ECEF:$0(e)?t.spatialReferenceId=ve.WGS84:Lu(e)?t.spatialReferenceId=ve.WEB_MERCATOR:m1e(e)?t.spatialReferenceId=ve.PLATE_CARREE:e.wkt===b1e.wkt?t.spatialReferenceId=ve.WGS84_ECEF:e.wkid===T0.CGCS2000?t.spatialReferenceId=ve.CGCS2000:e.wkt===wO.wkt?t.spatialReferenceId=ve.SPHERICAL_MARS_PCPF:e.wkt===bO.wkt?t.spatialReferenceId=ve.SPHERICAL_MOON_PCPF:PY(e)?t.spatialReferenceId=ve.GCSMARS2000:NY(e)?t.spatialReferenceId=ve.GCSMOON2000:t.spatialReferenceId=ve.UNKNOWN):ve.UNKNOWN}function ji(e,t,i,r){e!==i&&(i[r++]=e[t++],i[r++]=e[t++],i[r]=e[t])}function Ib(e,t,i,r){i[r]=hg*(e[t]/s0),i[r+1]=hg*(see-2*Math.atan(Math.exp(-e[t+1]/s0))),i[r+2]=e[t+2]}function v2e(e,t,i,r){const n=e[t]/s0,o=see-2*Math.atan(Math.exp(-e[t+1]/s0)),c=s0+e[t+2],y=Math.cos(o)*c;i[r]=Math.cos(n)*y,i[r+1]=Math.sin(n)*y,i[r+2]=Math.sin(o)*c}function w2e(e,t,i,r){Ib(e,t,i,r),R1(i,r,i,r)}function b2e(e,t,i,r,n){const o=.4999999*TI,c=co(cg*e[t+1],-o,o),y=Math.sin(c);i[r++]=cg*e[t]*n.radius,i[r++]=n.halfSemiMajorAxis*Math.log((1+y)/(1-y)),i[r]=e[t+2]}function C1(e,t,i,r){b2e(e,t,i,r,ur)}function k1(e,t,i,r){i[r]=e[t]*Bj,i[r+1]=e[t+1]*Bj,i[r+2]=e[t+2]}function L1(e,t,i,r){i[r]=e[t]*Gj,i[r+1]=e[t+1]*Gj,i[r+2]=e[t+2]}function _2e(e,t,i,r){Ib(e,t,i,r),k1(i,r,i,r)}function S2e(e,t,i,r){P1(e,t,i,r),k1(i,r,i,r)}function x2e(e,t,i,r){O1(e,t,i,r),k1(i,r,i,r)}function I2e(e,t,i,r){L1(e,t,i,r),Tb(i,r,i,r)}function T2e(e,t,i,r){L1(e,t,i,r),C1(i,r,i,r)}function $2e(e,t,i,r){L1(e,t,i,r),R1(i,r,i,r)}function HO(e,t,i,r,n){const o=n+e[t+2],c=cg*e[t+1],y=cg*e[t],v=Math.cos(c)*o;i[r]=Math.cos(y)*v,i[r+1]=Math.sin(y)*v,i[r+2]=Math.sin(c)*o}function jj(e,t,i,r){HO(e,t,i,r,Xd.radius)}function zj(e,t,i,r){HO(e,t,i,r,Eu.radius)}function Tb(e,t,i,r){HO(e,t,i,r,ur.radius)}function WO(e,t,i,r,n){const o=e[t],c=e[t+1],y=e[t+2],v=Math.sqrt(o*o+c*c+y*y),_=Mge(y/(v===0?1:v)),I=Math.atan2(c,o);i[r++]=hg*I,i[r++]=hg*_,i[r]=v-n}function Vj(e,t,i,r){WO(e,t,i,r,Xd.radius)}function Uj(e,t,i,r){WO(e,t,i,r,Eu.radius)}function O1(e,t,i,r){WO(e,t,i,r,ur.radius)}function E2e(e,t,i,r){O1(e,t,i,r),C1(i,r,i,r)}function M2e(e,t,i,r){O1(e,t,i,r),R1(i,r,i,r)}function A2e(e,t,i,r,n){const o=cg*e[t],c=cg*e[t+1],y=e[t+2],v=Math.sin(c),_=Math.cos(c),I=n.radius/Math.sqrt(1-n.eccentricitySquared*v*v);i[r++]=(I+y)*_*Math.cos(o),i[r++]=(I+y)*_*Math.sin(o),i[r++]=(I*(1-n.eccentricitySquared)+y)*v}function R1(e,t,i,r){A2e(e,t,i,r,ur)}function P1(e,t,i,r){const n=m2e,o=e[t],c=e[t+1],y=e[t+2];let v,_,I,$,A,k,R,N,D,j,z,U,W,Q,K,ee,ie,ae,ue,Ie,Ae;v=Math.abs(y),_=o*o+c*c,I=Math.sqrt(_),$=_+y*y,A=Math.sqrt($),Ie=Math.atan2(c,o),k=y*y/$,R=_/$,Q=n.a2/A,K=n.a3-n.a4/A,R>.3?(N=v/A*(1+R*(n.a1+Q+k*K)/A),ue=Math.asin(N),j=N*N,D=Math.sqrt(1-j)):(D=I/A*(1-k*(n.a5-Q-R*K)/A),ue=Math.acos(D),j=1-D*D,N=Math.sqrt(j)),z=1-ur.eccentricitySquared*j,U=ur.radius/Math.sqrt(z),W=n.a6*U,Q=I-U*D,K=v-W*N,ie=D*Q+N*K,ee=D*K-N*Q,ae=ee/(W/z+ie),ue+=ae,Ae=ie+ee*ae/2,y<0&&(ue=-ue),i[r++]=hg*Ie,i[r++]=hg*ue,i[r]=Ae}function C2e(e,t,i,r){P1(e,t,i,r),Tb(i,r,i,r)}function k2e(e,t,i,r){P1(e,t,i,r),C1(i,r,i,r)}function L2e(e,t,i){if(e==null||t==null||i.source.spatialReference===e&&i.dest.spatialReference===t)return i;const r=Dj(e,i.source),n=Dj(t,i.dest);return r===ve.UNKNOWN&&n===ve.UNKNOWN?_r(e,t)?i.projector=ji:i.projector=null:i.projector=g2e[r][n],i}function ree(){return{source:{spatialReference:null,spatialReferenceId:ve.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:ve.UNKNOWN,metersPerUnit:1},projector:ji}}const TZe={spatialReference:null,spatialReferenceId:ve.UNKNOWN},$Ze={spatialReference:null,spatialReferenceId:ve.UNKNOWN},nee=ree(),cg=gI(1),hg=aX(1),TI=Math.PI,see=.5*TI,s0=ur.radius,Bj=s0*TI/180,Gj=180/(s0*TI);function S3(e,t,i,r,n,o,c=Math.floor(e.length/3)){const y=iee(t,n,nee);if(y==null)return!1;if(y===ji){if(e===r&&i===o)return!0;const _=i+3*c;for(let I=i,$=o;I<_;I++,$++)r[$]=e[I];return!0}const v=i+3*c;for(let _=i,I=o;_<v;_+=3,I+=3)y(e,_,r,I);return!0}const EZe=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:S3},Symbol.toStringTag,{value:"Module"}));function qj(e,t,i,r,n,o){return A_[0]=e,A_[1]=t,A_[2]=i,S3(A_,r,0,n,o,0)}const A_=pp();let C_=0,E$=class uA{static fromGE(t){const i=new uA;return i._wkt=t.wkt,i._wkid=t.wkid,i._isInverse=t.isInverse,i}constructor(t){this.uid=C_++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=C_++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=C_++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=C_++}getInverse(){const t=new uA;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},G9=class ew{static cacheKey(t,i){var r,n,o,c,y,v;return[((r=t.wkid)==null?void 0:r.toString())??"-1",((n=t.wkt)==null?void 0:n.toString())??"",((o=t.wkt2)==null?void 0:o.toString())??"",((c=i.wkid)==null?void 0:c.toString())??"-1",((y=i.wkt)==null?void 0:y.toString())??"",((v=i.wkt2)==null?void 0:v.toString())??""].join()}static fromGE(t){const i=new ew;let r="";for(const n of t.steps){const o=E$.fromGE(n);i.steps.push(o),r+=o.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=r,i}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t==null?void 0:t.steps)for(const i of t.steps)i instanceof E$?this.steps.push(i):this.steps.push(new E$({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const t=new ew;t.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];t.steps.push(r.getInverse())}return t}getGTListEntry(){let t="";for(const i of this.steps)t+=i.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,i,r){this._cachedProjection[ew.cacheKey(t,i)]=r}getCachedGeTransformation(t,i){let r="";for(const o of this.steps)r+=o.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const n=this._cachedProjection[ew.cacheKey(t,i)];return n===void 0?null:n}};function oee(e,t,i){if(t==null||i==null||i.vcsWkid||_r(t,i)||Qd(t)||Qd(i))return null;const r=sg(t)/sg(i);if(r===1)return null;switch(e){case"point":case"esriGeometryPoint":return n=>O2e(n,r);case"polyline":case"esriGeometryPolyline":return n=>P2e(n,r);case"polygon":case"esriGeometryPolygon":return n=>R2e(n,r);case"multipoint":case"esriGeometryMultipoint":return n=>N2e(n,r);case"extent":case"esriGeometryEnvelope":return n=>F2e(n,r);default:return null}}function O2e(e,t){(e==null?void 0:e.z)!=null&&(e.z*=t)}function R2e(e,t){if(e)for(const i of e.rings)for(const r of i)r.length>2&&(r[2]*=t)}function P2e(e,t){if(e)for(const i of e.paths)for(const r of i)r.length>2&&(r[2]*=t)}function N2e(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}function F2e(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let Sl=null,tp=null,$b=null,h5={};const JO=new Fg;function nh(){return!!Sl&&gO()}function aee(){return!!nh()||(Xe(JO),Qc(),!1)}function lee(e,t){return!e||!t||Ml(e,t)||aee()}function D2e(e,t){return!Ml(e,t)&&!nh()}function Qc(e){return $b==null&&($b=Promise.all([AY(),de(()=>Promise.resolve().then(()=>jUe),[],import.meta.url).then(t=>t.g),de(()=>Promise.resolve().then(()=>HUe),void 0,import.meta.url)])),$b.then(([,t,{hydratedAdapter:i}])=>{Gi(e),tp=i,Sl=t.default,Sl._enableProjection(d1e),JO.notify()})}function sh(e,t,i=null,r=null){return Array.isArray(e)?e.length===0?[]:cA(tp,e,e[0].spatialReference,t,i,r):cA(tp,[e],e.spatialReference,t,i,r)[0]}function cA(e,t,i,r,n=null,o=null){if(i==null||r==null)return t;if(Ml(i,r,n))return t.map(c=>d5(c,i,r));if(n==null&&O9(i))return t.map(c=>d5(c,i,rt.WGS84)).map(c=>S2(c,r));if(n==null&&O9(r))return t.map(c=>S2(c,rt.WGS84)).map(c=>d5(c,rt.WGS84,r));if(n==null){const c=G9.cacheKey(i,r);h5[c]!==void 0?n=h5[c]:((n=hee(i,r,void 0))==null&&(n=new G9),h5[c]=n)}if(Sl==null||e==null)throw new $I;return o!=null?Sl._project(e,t,i,r,n,o):Sl._project(e,t,i,r,n)}function uee(e,t){const i=cee([e],t);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function cee(e,t){if(!nh()){for(const i of e)if(i!=null&&!_r(i.spatialReference,t)&&Ro(i.spatialReference)&&Ro(t)&&!Ml(i.spatialReference,t))return Xe(JO),{pending:Qc(),geometries:null}}return{pending:null,geometries:e.map(i=>i==null?null:_r(i.spatialReference,t)?i:Ro(i.spatialReference)&&Ro(t)?S2(i,t):null)}}function hee(e,t,i=null){if(e==null||t==null)return null;if(Sl==null||tp==null)throw new $I;const r=Sl._getTransformation(tp,e,t,i,i==null?void 0:i.spatialReference);return r!==null?G9.fromGE(r):null}function j2e(e,t,i=null){if(Sl==null||tp==null)throw new $I;const r=Sl._getTransformationBySuitability(tp,e,t,i,i==null?void 0:i.spatialReference);if(r!==null){const n=[];for(const o of r)n.push(G9.fromGE(o));return n}return[]}let $I=class extends ne{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function z2e(){Sl=null,tp=null,$b=null,h5={}}const V2e={get loadPromise(){return $b}};function S2(e,t){try{const i=sh(e,t);if(i==null)return null;"xmin"in e&&"xmin"in i&&(i.zmin=e.zmin,i.zmax=e.zmax);const r=oee(i.type,e.spatialReference,t);return r!=null&&r(i),i}catch(i){if(!(i instanceof $I))throw i;return null}}async function U2e(e,t,i){const r=e.spatialReference;return r!=null&&t!=null&&await EI(r,t,null,i),S2(e,t)}function Ml(e,t,i){return!i&&(!!_r(e,t)||Ro(e)&&Ro(t)&&!!iee(e,t,nee))}function B2e(e,t){if(_r(e,t))return!0;if(!Ro(e)||!Ro(t))return!1;const i=$0(e)||Lu(e)||MD(e),r=$0(t)||Lu(t)||MD(t);return i&&r}async function EI(e,t,i,r){if(nh())return yD(r);if(Array.isArray(e)){for(const{source:n,dest:o,geographicTransformation:c}of e)if(n&&o&&!Ml(n,o,c))return Qc(r)}else if(e&&t&&!Ml(e,t,i))return Qc(r);return yD(r)}function d5(e,t,i){return e?"x"in e?dee(e,t,new st,i,0):"xmin"in e?mee(e,t,new Ut,i,0):"rings"in e?yee(e,t,new Os,i,0):"paths"in e?fee(e,t,new io,i,0):"points"in e?pee(e,t,new Pg,i,0):null:null}function G2e(e,t,i=t.spatialReference,r=0){return i!=null&&e.spatialReference!=null&&dee(e,e.spatialReference,t,i,r)!=null}function dee(e,t,i,r,n){as[0]=e.x,as[1]=e.y;const o=e.z;return as[2]=o!==void 0?o:n,S3(as,t,0,as,r,0)?(i.x=as[0],i.y=as[1],i.spatialReference=r,o!==void 0||Qd(r)?(i.z=as[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),e.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=e.m,i.hasM=!0),i):null}function q2e(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&pee(e,e.spatialReference,t,i,r)!=null}function pee(e,t,i,r,n){const{points:o,hasZ:c,hasM:y}=e,v=[],_=o.length,I=[];for(const A of o)I.push(A[0],A[1],c?A[2]:n);if(!S3(I,t,0,I,r,0,_))return null;const $=c||Qd(r);for(let A=0;A<_;++A){const k=3*A,R=I[k],N=I[k+1];$&&y?v.push([R,N,I[k+2],o[A][3]]):$?v.push([R,N,I[k+2]]):y?v.push([R,N,o[A][2]]):v.push([R,N])}return i.points=v,i.spatialReference=r,i.hasZ=c,i.hasM=y,i}function H2e(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&fee(e,e.spatialReference,t,i,r)!=null}function fee(e,t,i,r,n){const{paths:o,hasZ:c,hasM:y}=e,v=[];if(!gee(o,c??!1,y??!1,t,v,r,n))return null;const _=c||Qd(r);return i.paths=v,i.spatialReference=r,i.hasZ=_,i.hasM=y,i}function W2e(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&yee(e,e.spatialReference,t,i,r)!=null}function yee(e,t,i,r,n){const{rings:o,hasZ:c,hasM:y}=e,v=[];if(!gee(o,c??!1,y??!1,t,v,r,n))return null;const _=c||Qd(r);return i.rings=v,i.spatialReference=r,i.hasZ=_,i.hasM=y,i}function J2e(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&mee(e,e.spatialReference,t,i,r)!=null}function mee(e,t,i,r,n){const{xmin:o,ymin:c,xmax:y,ymax:v,hasZ:_,hasM:I}=e,$=_?e.zmin:n;if(!qj(o,c,$,t,as,r))return null;const A=_||Qd(r);i.xmin=as[0],i.ymin=as[1],A&&(i.zmin=as[2]);const k=_?e.zmax:n;return qj(y,v,k,t,as,r)?(i.xmax=as[0],i.ymax=as[1],A&&(i.zmax=as[2]),I&&(i.mmin=e.mmin,i.mmax=e.mmax),i.spatialReference=r,i):null}function gee(e,t,i,r,n,o,c=0){const y=new Array;for(const I of e)for(const $ of I)y.push($[0],$[1],t?$[2]:c);if(!S3(y,r,0,y,o,0))return!1;let v=0;n.length=0;const _=t||Qd(o);for(const I of e){const $=new Array;for(const A of I)_&&i?$.push([y[v++],y[v++],y[v++],A[3]]):_?$.push([y[v++],y[v++],y[v++]]):i?($.push([y[v++],y[v++],A[2]]),v++):($.push([y[v++],y[v++]]),v++);n.push($)}return!0}const as=pp(),AZe=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:Ml,getTransformation:hee,getTransformations:j2e,initializeProjection:EI,isEqualBaseGCS:B2e,isLoaded:nh,isLoadedOrLoad:aee,isLoadedOrLoadFor:lee,load:Qc,project:sh,projectExtent:J2e,projectMany:cA,projectMultipoint:q2e,projectOrLoad:uee,projectOrLoadMany:cee,projectPoint:G2e,projectPolygon:W2e,projectPolyline:H2e,projectWithZConversion:U2e,projectWithoutEngine:d5,requiresLoad:D2e,test:V2e,tryProjectWithZConversion:S2,unload:z2e},Symbol.toStringTag,{value:"Module"}));var hA;let Bl=hA=class extends be{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new hA({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};m([w({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Bl.prototype,"cols",void 0),m([w({type:Ct,json:{write:!0}})],Bl.prototype,"level",void 0),m([w({type:String,json:{write:!0}})],Bl.prototype,"levelValue",void 0),m([w({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Bl.prototype,"origin",void 0),m([w({type:Number,json:{write:!0}})],Bl.prototype,"resolution",void 0),m([w({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Bl.prototype,"rows",void 0),m([w({type:Number,json:{write:!0}})],Bl.prototype,"scale",void 0),Bl=hA=m([H("esri.layers.support.LOD")],Bl);const hd=Bl;let Z2e=class{constructor(t,i,r,n,o=void 0){this.id=t,this.level=i,this.row=r,this.col=n,this.extent=o}};var Ch;const Hj=new ft({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let En=Ch=class extends be{static create(e={}){const{resolutionFactor:t=1,scales:i,size:r=256,spatialReference:n=rt.WebMercator,numLODs:o=24}=e;if(!Ro(n)){const $=[];if(i)for(let A=0;A<i.length;A++){const k=i[A];$.push(new hd({level:A,scale:k,resolution:k}))}else{let A=5e-4;for(let k=o-1;k>=0;k--)$.unshift(new hd({level:k,scale:A,resolution:A})),A*=2}return new Ch({dpi:96,lods:$,origin:new st(0,0,n),size:[r,r],spatialReference:n})}const c=Cs(n),y=e.origin?new st({x:e.origin.x,y:e.origin.y,spatialReference:n}):new st(c?{x:c.origin[0],y:c.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),v=96,_=1/(Al(n)*39.37*v),I=[];if(i)for(let $=0;$<i.length;$++){const A=i[$],k=A*_;I.push(new hd({level:$,scale:A,resolution:k}))}else{let $=dI(n)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const A=Math.ceil(o/t);I.push(new hd({level:0,scale:$,resolution:$*_}));for(let k=1;k<A;k++){const R=$/2**t,N=R*_;I.push(new hd({level:k,scale:R,resolution:N})),$=R}}return new Ch({dpi:v,lods:I,origin:y,size:[r,r],spatialReference:n})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=Cs(e);return e.isWrappable&&!!i&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return st.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const r=[],n=this._levelToLOD={};e&&(t=-1/0,i=1/0,e.forEach(o=>{r.push(o.scale),t=o.scale>t?o.scale:t,i=o.scale<i?o.scale:i,n[o.level]=o})),this._set("scales",r),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const i=Math.floor(e),r=i+1;return t[i]/(t[i]/t[r])**(e-i)}scaleToZoom(e){const t=this.scales,i=t.length-1;let r=0;for(;r<i;r++){const n=t[r],o=t[r+1];if(n<=e)return r;if(o===e)return r+1;if(n>e&&o<e)return r+Math.log(n/e)/Math.log(n/o)}return r}tileAt(e,t,i,r){const n=this.lodAt(e);if(!n)return null;let o,c;if(typeof t=="number")o=t,c=i;else if(_r(t.spatialReference,this.spatialReference))o=t.x,c=t.y,r=i;else{const _=yI(t,this.spatialReference);if(_==null)return null;o=_.x,c=_.y,r=i}const y=n.resolution*this.size[0],v=n.resolution*this.size[1];return r||(r=new Z2e(null,0,0,0,to())),r.level=e,r.row=Math.floor((this.origin.y-c)/v+.001),r.col=Math.floor((o-this.origin.x)/y+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=Ch.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&t===Ch.ExtrapolateOptions.POWER_OF_TWO){const c=this.lods[this.lods.length-1];c.level<e.level&&(i=c)}if(!i)return;const r=e.level-i.level,n=i.resolution*this.size[0]/2**r,o=i.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=to()),e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+o}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const i=this.lodAt(t.level);if(i==null)return null;const{resolution:r}=i,n=r*this.size[0],o=r*this.size[1];return e[0]=this.origin.x+t.col*n,e[1]=this.origin.y-(t.row+1)*o,e[2]=e[0]+n,e[3]=e[1]+o,e}lodAt(e){var t;return((t=this._levelToLOD)==null?void 0:t[e])??null}clone(){return Ch.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const t=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&t===0)return this;const i=[],r=this.lods.length-t;for(let n=0;n<r;n++){const o=n+t,{scale:c,resolution:y}=o>=0?this.lods[o]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};i.push(new hd({level:n,scale:c,resolution:y}))}return new Ch({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const r=e[i];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};m([w({type:Number,json:{write:!0}})],En.prototype,"compressionQuality",void 0),m([w({type:Number,json:{write:!0}})],En.prototype,"dpi",void 0),m([w({type:String,json:{read:Hj.read,write:Hj.write,origins:{"web-scene":{read:!1,write:!1}}}})],En.prototype,"format",void 0),m([w({readOnly:!0})],En.prototype,"isWrappable",null),m([w({type:st,json:{write:!0}})],En.prototype,"origin",void 0),m([ke("origin")],En.prototype,"readOrigin",null),m([w({type:[hd],value:null,json:{write:!0}})],En.prototype,"lods",null),m([w({readOnly:!0})],En.prototype,"scales",void 0),m([w({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],En.prototype,"size",void 0),m([ke("size",["rows","cols"])],En.prototype,"readSize",null),m([Le("size",{cols:{type:Ct},rows:{type:Ct}})],En.prototype,"writeSize",null),m([w({type:rt,json:{write:!0}})],En.prototype,"spatialReference",void 0),En=Ch=m([H("esri.layers.support.TileInfo")],En),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(En||(En={}));const K2e=En,p5={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],r=t[1],n=this.values;return r>=i?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},M$={xsmall:544,small:768,medium:992,large:1200};function Y2e(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function A$(e,t){return t?p5[e].valueToClassName[t].split(" "):[]}const X2e=e=>{let t=class extends e{constructor(...i){super(...i),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=M$}initialize(){this.addHandles(ge(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),qe))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(i){if(i!==this._get("breakpoints")){if(!Y2e(i)){const r=JSON.stringify(M$,null,2);console.warn("provided breakpoints are not valid, using defaults:"+r),i=M$}this._set("breakpoints",{...i})}}_updateClassNames(){if(!this.container)return;const i=Ms.acquire(),r=Ms.acquire();let n,o=!1;for(n in p5){const c=this[n],y=p5[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});c!==y&&(o=!0,this[n]=y,A$(n,c).forEach(v=>r.push(v)),A$(n,y).forEach(v=>i.push(v)))}o&&(this._applyClassNameChanges(i,r),Ms.release(i),Ms.release(r))}_applyClassNameChanges(i,r){const n=this.container;n&&(r.forEach(o=>n.classList.remove(o)),i.forEach(o=>n.classList.add(o)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in p5)A$(r,this[r]).forEach(n=>i.classList.remove(n))}};return m([w()],t.prototype,"breakpoints",null),m([w()],t.prototype,"orientation",void 0),m([w()],t.prototype,"widthBreakpoint",void 0),m([w()],t.prototype,"heightBreakpoint",void 0),t=m([H("esri.views.BreakpointsOwner")],t),t};function ZO(e){return typeof e=="string"?document.getElementById(e):e??null}function Wj(e,t){for(;;){const i=e.firstChild;if(!i)break;t.appendChild(i)}}let o0=class extends Ve{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(t,i,r={}){return this._installWatch(t,i,r,ge)}addWhen(t,i,r={}){return this._installWatch(t,i,r,en)}addOnCollectionChange(t,i,{initial:r=!1,final:n=!1}={}){const o=++this._handleId;return this.addHandles([tn(t,"after-changes",this._createSyncUpdatingCallback(),$l),tn(t,"change",i,{onListenerAdd:r?c=>i({added:c.toArray(),removed:[]}):void 0,onListenerRemove:n?c=>i({added:[],removed:c.toArray()}):void 0})],o),ei(()=>this.removeHandles(o))}addPromise(t){if(t==null)return t;const i=++this._handleId;this.addHandles(ei(()=>{this._pendingPromises.delete(t)&&(this._pendingPromises.size!==0||this.hasHandles(k_)||this._set("updating",!1))}),i),this._pendingPromises.add(t),this._set("updating",!0);const r=()=>this.removeHandles(i);return t.then(r,r),t}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(t,i,r={},n){const o=++this._handleId;r.sync||this._installSyncUpdatingWatch(t,o);const c=n(t,i,r);return this.addHandles(c,o),ei(()=>this.removeHandles(o))}_installSyncUpdatingWatch(t,i){const r=this._createSyncUpdatingCallback(),n=ge(t,r,{sync:!0,equals:()=>!1});return this.addHandles(n,i),n}_createSyncUpdatingCallback(){return()=>{this.removeHandles(k_),++this._scheduleHandleId;const t=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(f3(()=>{t===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(k_))}),k_)}}};m([w({readOnly:!0})],o0.prototype,"updating",void 0),o0=m([H("esri.core.support.UpdatingHandles")],o0);const k_=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0-next.3 - Wed Sep 25 2024 10:04:57 GMT-0400 (Eastern Daylight Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var q9=function(){return q9=Object.assign||function(t){for(var i,r=1,n=arguments.length;r<n;r++){i=arguments[r];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t},q9.apply(this,arguments)},dA={exports:{}},hr={},pA={exports:{}},J0={};function vee(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function Q2e(e,t,i){}function e3e(e,t,i){}var t3e=/javascript\s*\:/img;function i3e(e,t){return t3e.test(t)?"":t}J0.whiteList=vee();J0.getDefaultWhiteList=vee;J0.onAttr=Q2e;J0.onIgnoreAttr=e3e;J0.safeAttrValue=i3e;var r3e={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,n;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,n=e.length;r<n;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},bv=r3e;function n3e(e,t){e=bv.trimRight(e),e[e.length-1]!==";"&&(e+=";");var i=e.length,r=!1,n=0,o=0,c="";function y(){if(!r){var I=bv.trim(e.slice(n,o)),$=I.indexOf(":");if($!==-1){var A=bv.trim(I.slice(0,$)),k=bv.trim(I.slice($+1));if(A){var R=t(n,c.length,A,k,I);R&&(c+=R+"; ")}}}n=o+1}for(;o<i;o++){var v=e[o];if(v==="/"&&e[o+1]==="*"){var _=e.indexOf("*/",o+2);if(_===-1)break;o=_+1,n=o+1,r=!1}else v==="("?r=!0:v===")"?r=!1:v===";"?r||y():v===`
`&&y()}return bv.trim(c)}var s3e=n3e,L_=J0,o3e=s3e;function Jj(e){return e==null}function a3e(e){var t={};for(var i in e)t[i]=e[i];return t}function wee(e){e=a3e(e||{}),e.whiteList=e.whiteList||L_.whiteList,e.onAttr=e.onAttr||L_.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||L_.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||L_.safeAttrValue,this.options=e}wee.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,n=i.onAttr,o=i.onIgnoreAttr,c=i.safeAttrValue,y=o3e(e,function(v,_,I,$,A){var k=r[I],R=!1;if(k===!0?R=k:typeof k=="function"?R=k($):k instanceof RegExp&&(R=k.test($)),R!==!0&&(R=!1),$=c(I,$),!!$){var N={position:_,sourcePosition:v,source:A,isWhite:R};if(R){var D=n(I,$,N);return Jj(D)?I+":"+$:D}else{var D=o(I,$,N);if(!Jj(D))return D}}});return y};var l3e=wee;(function(e,t){var i=J0,r=l3e;function n(c,y){var v=new r(y);return v.process(c)}t=e.exports=n,t.FilterCSS=r;for(var o in i)t[o]=i[o]})(pA,pA.exports);var KO=pA.exports,YO={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,n;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,n=e.length;r<n;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,i=t.exec(e);return i?i.index:-1}},u3e=KO.FilterCSS,c3e=KO.getDefaultWhiteList,H9=YO;function bee(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var _ee=new u3e;function h3e(e,t,i){}function d3e(e,t,i){}function p3e(e,t,i){}function f3e(e,t,i){}function See(e){return e.replace(m3e,"&lt;").replace(g3e,"&gt;")}function y3e(e,t,i,r){if(i=Mee(i),t==="href"||t==="src"){if(i=H9.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(t==="background"){if(O_.lastIndex=0,O_.test(i))return""}else if(t==="style"){if(Zj.lastIndex=0,Zj.test(i)||(Kj.lastIndex=0,Kj.test(i)&&(O_.lastIndex=0,O_.test(i))))return"";r!==!1&&(r=r||_ee,i=r.process(i))}return i=Aee(i),i}var m3e=/</g,g3e=/>/g,v3e=/"/g,w3e=/&quot;/g,b3e=/&#([a-zA-Z0-9]*);?/gim,_3e=/&colon;?/gim,S3e=/&newline;?/gim,O_=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Zj=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Kj=/u\s*r\s*l\s*\(.*/gi;function xee(e){return e.replace(v3e,"&quot;")}function Iee(e){return e.replace(w3e,'"')}function Tee(e){return e.replace(b3e,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function $ee(e){return e.replace(_3e,":").replace(S3e," ")}function Eee(e){for(var t="",i=0,r=e.length;i<r;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return H9.trim(t)}function Mee(e){return e=Iee(e),e=Tee(e),e=$ee(e),e=Eee(e),e}function Aee(e){return e=xee(e),e=See(e),e}function x3e(){return""}function I3e(e,t){typeof t!="function"&&(t=function(){});var i=!Array.isArray(e);function r(c){return i?!0:H9.indexOf(e,c)!==-1}var n=[],o=!1;return{onIgnoreTag:function(c,y,v){if(r(c))if(v.isClosing){var _="[/removed]",I=v.position+_.length;return n.push([o!==!1?o:v.position,I]),o=!1,_}else return o||(o=v.position),"[removed]";else return t(c,y,v)},remove:function(c){var y="",v=0;return H9.forEach(n,function(_){y+=c.slice(v,_[0]),v=_[1]}),y+=c.slice(v),y}}}function T3e(e){for(var t="",i=0;i<e.length;){var r=e.indexOf("<!--",i);if(r===-1){t+=e.slice(i);break}t+=e.slice(i,r);var n=e.indexOf("-->",r);if(n===-1)break;i=n+3}return t}function $3e(e){var t=e.split("");return t=t.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}hr.whiteList=bee();hr.getDefaultWhiteList=bee;hr.onTag=h3e;hr.onIgnoreTag=d3e;hr.onTagAttr=p3e;hr.onIgnoreTagAttr=f3e;hr.safeAttrValue=y3e;hr.escapeHtml=See;hr.escapeQuote=xee;hr.unescapeQuote=Iee;hr.escapeHtmlEntities=Tee;hr.escapeDangerHtml5Entities=$ee;hr.clearNonPrintableCharacter=Eee;hr.friendlyAttrValue=Mee;hr.escapeAttrValue=Aee;hr.onIgnoreTagStripAll=x3e;hr.StripTagBody=I3e;hr.stripCommentTag=T3e;hr.stripBlankChar=$3e;hr.cssFilter=_ee;hr.getDefaultCSSWhiteList=c3e;var MI={},dd=YO;function E3e(e){var t=dd.spaceIndex(e),i;return t===-1?i=e.slice(1,-1):i=e.slice(1,t+1),i=dd.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function M3e(e){return e.slice(0,2)==="</"}function A3e(e,t,i){var r="",n=0,o=!1,c=!1,y=0,v=e.length,_="",I="";e:for(y=0;y<v;y++){var $=e.charAt(y);if(o===!1){if($==="<"){o=y;continue}}else if(c===!1){if($==="<"){r+=i(e.slice(n,y)),o=y,n=y;continue}if($===">"){r+=i(e.slice(n,o)),I=e.slice(o,y+1),_=E3e(I),r+=t(o,r.length,_,I,M3e(I)),n=y+1,o=!1;continue}if($==='"'||$==="'")for(var A=1,k=e.charAt(y-A);k.trim()===""||k==="=";){if(k==="="){c=$;continue e}k=e.charAt(y-++A)}}else if($===c){c=!1;continue}}return n<e.length&&(r+=i(e.substr(n))),r}var C3e=/[^a-zA-Z0-9\\_:.-]/gim;function k3e(e,t){var i=0,r=0,n=[],o=!1,c=e.length;function y(A,k){if(A=dd.trim(A),A=A.replace(C3e,"").toLowerCase(),!(A.length<1)){var R=t(A,k||"");R&&n.push(R)}}for(var v=0;v<c;v++){var _=e.charAt(v),I,$;if(o===!1&&_==="="){o=e.slice(i,v),i=v+1,r=e.charAt(i)==='"'||e.charAt(i)==="'"?i:O3e(e,v+1);continue}if(o!==!1&&v===r){if($=e.indexOf(_,v+1),$===-1)break;I=dd.trim(e.slice(r+1,$)),y(o,I),o=!1,v=$,i=v+1;continue}if(/\s|\n|\t/.test(_))if(e=e.replace(/\s|\n|\t/g," "),o===!1)if($=L3e(e,v),$===-1){I=dd.trim(e.slice(i,v)),y(I),o=!1,i=v+1;continue}else{v=$-1;continue}else if($=R3e(e,v-1),$===-1){I=dd.trim(e.slice(i,v)),I=Yj(I),y(o,I),o=!1,i=v+1;continue}else continue}return i<e.length&&(o===!1?y(e.slice(i)):y(o,Yj(dd.trim(e.slice(i))))),dd.trim(n.join(" "))}function L3e(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="="?t:-1}}function O3e(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="'"||i==='"'?t:-1}}function R3e(e,t){for(;t>0;t--){var i=e[t];if(i!==" ")return i==="="?t:-1}}function P3e(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function Yj(e){return P3e(e)?e.substr(1,e.length-2):e}MI.parseTag=A3e;MI.parseAttr=k3e;var N3e=KO.FilterCSS,ul=hr,Cee=MI,F3e=Cee.parseTag,D3e=Cee.parseAttr,f5=YO;function R_(e){return e==null}function j3e(e){var t=f5.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=f5.trim(e.slice(t+1,-1));var i=e[e.length-1]==="/";return i&&(e=f5.trim(e.slice(0,-1))),{html:e,closing:i}}function z3e(e){var t={};for(var i in e)t[i]=e[i];return t}function V3e(e){var t={};for(var i in e)Array.isArray(e[i])?t[i.toLowerCase()]=e[i].map(function(r){return r.toLowerCase()}):t[i.toLowerCase()]=e[i];return t}function kee(e){e=z3e(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=ul.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=V3e(e.whiteList||e.allowList):e.whiteList=ul.whiteList,e.onTag=e.onTag||ul.onTag,e.onTagAttr=e.onTagAttr||ul.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||ul.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||ul.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||ul.safeAttrValue,e.escapeHtml=e.escapeHtml||ul.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new N3e(e.css))}kee.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,n=i.onTag,o=i.onIgnoreTag,c=i.onTagAttr,y=i.onIgnoreTagAttr,v=i.safeAttrValue,_=i.escapeHtml,I=t.cssFilter;i.stripBlankChar&&(e=ul.stripBlankChar(e)),i.allowCommentTag||(e=ul.stripCommentTag(e));var $=!1;i.stripIgnoreTagBody&&($=ul.StripTagBody(i.stripIgnoreTagBody,o),o=$.onIgnoreTag);var A=F3e(e,function(k,R,N,D,j){var z={sourcePosition:k,position:R,isClosing:j,isWhite:Object.prototype.hasOwnProperty.call(r,N)},U=n(N,D,z);if(!R_(U))return U;if(z.isWhite){if(z.isClosing)return"</"+N+">";var W=j3e(D),Q=r[N],K=D3e(W.html,function(ee,ie){var ae=f5.indexOf(Q,ee)!==-1,ue=c(N,ee,ie,ae);return R_(ue)?ae?(ie=v(N,ee,ie,I),ie?ee+'="'+ie+'"':ee):(ue=y(N,ee,ie,ae),R_(ue)?void 0:ue):ue});return D="<"+N,K&&(D+=" "+K),W.closing&&(D+=" /"),D+=">",D}else return U=o(N,D,z),R_(U)?_(D):U},_);return $&&(A=$.remove(A)),A};var U3e=kee;(function(e,t){var i=hr,r=MI,n=U3e;function o(y,v){var _=new n(v);return _.process(y)}t=e.exports=o,t.filterXSS=o,t.FilterXSS=n,function(){for(var y in i)t[y]=i[y];for(var v in r)t[v]=r[v]}();function c(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}c()&&(self.filterXSS=e.exports)})(dA,dA.exports);var uy=dA.exports,B3e=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},G3e=function(){function e(t,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=q9(q9({},uy.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(o,c,y,v){return o==="a"&&c==="href"||(o==="img"||o==="source")&&c==="src"?r.sanitizeUrl(y):uy.safeAttrValue(o,c,y,v)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;t&&!i?n=t:t&&i?(n=Object.create(this.arcgisFilterOptions),n.css={whiteList:this.arcgisCSSWhiteList},Object.keys(t).forEach(function(o){if(o==="whiteList")n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,t.whiteList||{}]);else if(o==="css"){var c=t.css.whiteList;c!=null&&t.css instanceof Object&&Object.keys(c).forEach(function(y){return n.css.whiteList[y]=c[y]})}else n[o]=t[o]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList,n.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=n,this._xssFilter=new uy.FilterXSS(n)}return e.prototype.sanitize=function(t,i){switch(i===void 0&&(i={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,i);default:return i.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,i){var r=(i??{}).isProtocolRequired,n=r===void 0?!0:r,o=this._trim(t.substring(0,t.indexOf(":"))),c=t==="/",y=/^#/.test(t),v=o&&this.allowedProtocols.indexOf(o.toLowerCase())>-1;return c||y||v?uy.escapeAttrValue(t):!o&&!n?uy.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,i,r,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,i,r,n):uy.safeAttrValue(t,i,r,n)},e.prototype.validate=function(t,i){i===void 0&&(i={});var r=this.sanitize(t,i);return{isValid:t===r,sanitized:r}},e.prototype.encodeHTML=function(t){var i=this;return String(t).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},e.prototype.encodeAttrValue=function(t){var i=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(r,n){return i.test(r)?r:"&#x".concat(Number(t.charCodeAt(n)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var i={};return t.forEach(function(r){Object.keys(r).forEach(function(n){Array.isArray(r[n])&&Array.isArray(i[n])?i[n]=i[n].concat(r[n]):i[n]=r[n]})}),i},e.prototype._iterateOverObject=function(t,i){var r=this;i===void 0&&(i={});try{var n=!1,o=void 0;if(Array.isArray(t))o=t.reduce(function(y,v){var _=r.validate(v,i);return _.isValid?y.concat([v]):(n=!0,y.concat([_.sanitized]))},[]);else if(B3e(t)){var c=Object.keys(t);o=c.reduce(function(y,v){var _=t[v],I=r.validate(_,i);return I.isValid?y[v]=_:(n=!0,y[v]=I.sanitized),y},{})}else return i.allowUndefined&&typeof t>"u"?void 0:null;return n?o:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const AI=new Map;function Lee(){AI.clear()}function q3e(e){return AI.get(e)}function H3e(e,t){AI.set(e,t)}function C$(e){AI.delete(e)}function s1(...e){const t=Ms.acquire();for(let r=0;r<e.length;r++){const n=e[r],o=typeof n;if(o==="string")t.push(n);else if(Array.isArray(n))t.push.apply(t,n);else if(o==="object")for(const c in n)n[c]&&t.push(c)}const i=t.join(" ");return Ms.release(t),i}(()=>{const e=new Map,t=new ResizeObserver(r=>{var n;Lee();for(const o of r)(n=e.get(o.target))==null||n(o)}),i=(r,n,o)=>(e.set(r,n),t.observe(r,o),ei(()=>{t.unobserve(r),e.delete(r)}));return(r,n,o)=>{let c=null;return l3([ge(()=>typeof r=="function"?r():r,y=>{c==null||c.remove(),y&&(c=i(y,n,o))},Lo),ei(()=>c==null?void 0:c.remove())])}})();function Po(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function Xj(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function o1(e){const t="data-node-ref";this[e.getAttribute(t)]=e}const W3e=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],J3e=W3e.reduce((e,t)=>(e[t]=[],e),{}),Z3e=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],Oee=new G3e({whiteList:J3e,onTagAttr:(e,t,i)=>{const r=`${t}="${i}"`;if(Z3e.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function Ree(e){return e==="Enter"||e===" "}async function N1(e,t){await lI(p3(t));const i=typeof e=="function"?e():e;i&&("setFocus"in i&&typeof i.setFocus=="function"?await i.setFocus():i instanceof HTMLElement&&i.focus())}const Pee="http://www.w3.org/",CI=`${Pee}2000/svg`,Nee=`${Pee}1999/xlink`;let Qj=[],XO=(e,t)=>{let i={};return Object.keys(e).forEach(r=>{i[r]=e[r]}),t&&Object.keys(t).forEach(r=>{i[r]=t[r]}),i},QO=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),Fee=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},K3e=(e,t,i)=>{if(t.vnodeSelector!==""){for(let r=i;r<e.length;r++)if(QO(e[r],t))return r}return-1},k$=(e,t,i,r)=>{let n=e[t];if(n.vnodeSelector==="")return;let o=n.properties;if(!(o&&(o.key===void 0?o.bind:o.key))){for(let c=0;c<e.length;c++)if(c!==t){let y=e[c];if(QO(y,n))throw new Error(`${i.vnodeSelector} had a ${n.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},Y3e=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},fA=[],yA=!1,Dee=e=>{(e.children||[]).forEach(Dee),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},ez=()=>{yA=!1,fA.forEach(Dee),fA.length=0},tz=e=>{fA.push(e),yA||(yA=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(ez,{timeout:16}):setTimeout(ez,16))},iz=e=>{let t=e.domNode;if(e.properties){let i=e.properties.exitAnimation;if(i)return t.style.pointerEvents="none",void i(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),tz(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),tz(e))},X3e=(e,t,i)=>{if(!t)return;let r=i.eventHandlerInterceptor,n=Object.keys(t),o=n.length;for(let c=0;c<o;c++){let y=n[c],v=t[y];if(y==="className")throw new Error('Property "className" is not supported, use "class".');if(y==="class")gA(e,v,!0);else if(y==="classes"){let _=Object.keys(v),I=_.length;for(let $=0;$<I;$++){let A=_[$];v[A]&&e.classList.add(A)}}else if(y==="styles"){let _=Object.keys(v),I=_.length;for(let $=0;$<I;$++){let A=_[$],k=v[A];k&&(Fee(k),i.styleApplyer(e,A,k))}}else if(y!=="key"&&v!=null){let _=typeof v;_==="function"?(y.lastIndexOf("on",0)===0&&(r&&(v=r(y,v,e,t)),y==="oninput"&&function(){let I=v;v=function($){I.apply(this,[$]),$.target["oninput-value"]=$.target.value}}()),e[y]=v):i.namespace===CI?y==="href"?e.setAttributeNS(Nee,y,v):e.setAttribute(y,v):_==="string"&&y!=="value"?y==="innerHTML"?e[y]=Oee.sanitize(v):mA(e)&&y in e?e[y]=v:e.setAttribute(y,v):e[y]=v}}};function mA(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let W9,Q3e=(e,t,i)=>{if(t)for(let r of t)a1(r,e,void 0,i)},jee=(e,t,i)=>{Q3e(e,t.children,i),t.text&&(e.textContent=t.text),X3e(e,t.properties,i),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,i,t.vnodeSelector,t.properties,t.children])},a1=(e,t,i,r)=>{let n,o=0,c=e.vnodeSelector,y=t.ownerDocument;if(c==="")n=e.domNode=y.createTextNode(e.text),i!==void 0?t.insertBefore(n,i):t.appendChild(n);else{for(let v=0;v<=c.length;++v){let _=c.charAt(v);if(v===c.length||_==="."||_==="#"){let I=c.charAt(o-1),$=c.slice(o,v);I==="."?n.classList.add($):I==="#"?n.id=$:($==="svg"&&(r=XO(r,{namespace:CI})),r.namespace!==void 0?n=e.domNode=y.createElementNS(r.namespace,$):(n=e.domNode=e.domNode||y.createElement($),$==="input"&&e.properties&&e.properties.type!==void 0&&n.setAttribute("type",e.properties.type)),i!==void 0?t.insertBefore(n,i):n.parentNode!==t&&t.appendChild(n)),o=v+1}}jee(n,e,r)}},gA=(e,t,i)=>{t&&t.split(" ").forEach(r=>{r&&e.classList.toggle(r,i)})},e_e=(e,t,i,r)=>{if(!i)return;let n=!1,o=Object.keys(i),c=o.length;for(let y=0;y<c;y++){let v=o[y],_=i[v],I=t[v];if(v==="class")I!==_&&(gA(e,I,!1),gA(e,_,!0));else if(v==="classes"){let $=e.classList,A=Object.keys(_),k=A.length;for(let R=0;R<k;R++){let N=A[R],D=!!_[N];D!==!!I[N]&&(n=!0,D?$.add(N):$.remove(N))}}else if(v==="styles"){let $=Object.keys(_),A=$.length;for(let k=0;k<A;k++){let R=$[k],N=_[R];N!==I[R]&&(n=!0,N?(Fee(N),r.styleApplyer(e,R,N)):r.styleApplyer(e,R,""))}}else if(_||typeof I!="string"||(_=""),v!=="value"||mA(e)){if(_!==I){let $=typeof _;$==="function"&&r.eventHandlerInterceptor||(r.namespace===CI?v==="href"?e.setAttributeNS(Nee,v,_):e.setAttribute(v,_):$==="string"?v==="innerHTML"?e[v]=Oee.sanitize(_):v==="role"&&_===""?e.removeAttribute(v):mA(e)&&v in e?e[v]=_:e.setAttribute(v,_):e[v]!==_&&(e[v]=_),n=!0)}}else{let $=e[v];$!==_&&(e["oninput-value"]?$===e["oninput-value"]:_!==I)&&(e[v]=_,e["oninput-value"]=void 0),_!==I&&(n=!0)}}return n},t_e=(e,t,i,r,n)=>{if(i===r)return!1;r=r||Qj;let o,c=(i=i||Qj).length,y=r.length,v=0,_=0,I=!1;for(;_<y;){let $=v<c?i[v]:void 0,A=r[_];if($!==void 0&&QO($,A))I=W9($,A,n)||I,v++;else{let k=K3e(i,A,v+1);if(k>=0){for(o=v;o<k;o++)iz(i[o]),k$(i,o,e,"removed");I=W9(i[k],A,n)||I,v=k+1}else a1(A,t,v<c?i[v].domNode:void 0,n),Y3e(A),k$(r,_,e,"added")}_++}if(c>v)for(o=v;o<c;o++)iz(i[o]),k$(i,o,e,"removed");return I};W9=(e,t,i)=>{let r=e.domNode,n=!1;if(e===t)return!1;let o=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let c=r.ownerDocument.createTextNode(t.text);return r.parentNode.replaceChild(c,r),t.domNode=c,n=!0,n}t.domNode=r}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(i=XO(i,{namespace:CI})),e.text!==t.text&&(o=!0,t.text===void 0?r.removeChild(r.firstChild):r.textContent=t.text),t.domNode=r,o=t_e(t,r,e.children,t.children,i)||o,o=e_e(r,e.properties,t.properties,i)||o,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[r,i,t.vnodeSelector,t.properties,t.children]);return o&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(r,t.properties,e.properties),n};let _v=(e,t)=>({getLastRender:()=>e,update:i=>{if(e.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=e;e=i,W9(r,i,t)},domNode:e.domNode});const i_e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}};let zy=e=>XO(i_e,e),Md={create:(e,t)=>(t=zy(t),a1(e,document.createElement("div"),void 0,t),_v(e,t)),append:(e,t,i)=>(i=zy(i),a1(t,e,void 0,i),_v(t,i)),insertBefore:(e,t,i)=>(i=zy(i),a1(t,e.parentNode,e,i),_v(t,i)),merge:(e,t,i)=>(i=zy(i),t.domNode=e,jee(e,t,i),_v(t,i)),replace:(e,t,i)=>(i=zy(i),a1(t,e.parentNode,e,i),e.parentNode.removeChild(e),_v(t,i))},zee,r_e=(e,t)=>{let i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i};zee=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let n_e=(e,t)=>{let i=e;return t.forEach(r=>{i=i&&i.children?zee(i.children,n=>n.domNode===r):void 0}),i},s_e=(e,t,i)=>{let r=function(n){i("domEvent",n);let o=t(),c=r_e(n.currentTarget,o.domNode);c.reverse();let y,v=n_e(o.getLastRender(),c);return e.scheduleRender(),v&&(y=v.properties[`on${n.type}`].apply(v.properties.bind||this,arguments)),i("domEventProcessed",n),y};return(n,o,c,y)=>r},J9=e=>{let t,i,r=zy(e),n=r.performanceLogger,o=!0,c=!1,y=[],v=[],_=($,A,k)=>{let R,N=()=>R;r.eventHandlerInterceptor=s_e(t,N,n),R=$(A,k(),r),y.push(R),v.push(k)},I=()=>{if(i=void 0,o){o=!1,n("renderStart",void 0);for(let $=0;$<y.length;$++){let A=v[$]();n("rendered",void 0),y[$].update(A),n("patched",void 0)}n("renderDone",void 0),o=!0}};return t={renderNow:I,scheduleRender:()=>{i||c||(i=requestAnimationFrame(I))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),c=!0},resume:()=>{c=!1,o=!0,t.scheduleRender()},append:($,A)=>{_(Md.append,$,A)},insertBefore:($,A)=>{_(Md.insertBefore,$,A)},merge:($,A)=>{_(Md.merge,$,A)},replace:($,A)=>{_(Md.replace,$,A)},detach:$=>{for(let A=0;A<v.length;A++)if(v[A]===$)return v.splice(A,1),y.splice(A,1)[0];throw new Error("renderFunction was not found")}},t},kh=class extends Ve{constructor(){super(...arguments),this.items=new Oe,this._watchUpdatingTracking=new o0,this._callbacks=new Map,this._projector=J9(),this._hiddenProjector=J9()}get needsRender(){return this.items.length>0}get updating(){var t;return((t=this._watchUpdatingTracking)==null?void 0:t.updating)??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const r of i.added){const n=()=>r.render();this._callbacks.set(r,n),this._projector.append(this.surface,n)}for(const r of i.removed){const n=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(n.domNode),this._callbacks.delete(r)}})}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach(t=>this._projector.detach(t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const i=this._hiddenSurface,r=this._hiddenProjector;let n;const o=()=>(n=t.render(),n);r.append(i,o),r.renderNow();const c={left:0,top:0,right:0,bottom:0};if(n!=null&&n.domNode){const y=n.domNode.getBoundingClientRect();c.left=y.left,c.top=y.top,c.right=y.right,c.bottom=y.bottom}for(r.detach(o);i.firstChild;)i.removeChild(i.firstChild);return c}overlaps(t,i){const r=this.computeBoundingRect(t),n=this.computeBoundingRect(i);return Math.max(r.left,n.left)<=Math.min(r.right,n.right)&&Math.max(r.top,n.top)<=Math.min(r.bottom,n.bottom)}get hasVisibleItems(){return this.items.some(t=>t.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(t,i){const r=!!(i!=null&&i.disableDecorations);if(!this.items.some(o=>o.visible&&!(r&&o.isDecoration)))return;const n=t.getContext("2d");n.save(),n.font=this._fontString(),this.items.forEach(o=>{r&&o.isDecoration||(n.save(),o.renderCanvas(n),n.restore())}),n.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};m([w({readOnly:!0})],kh.prototype,"surface",void 0),m([w({readOnly:!0})],kh.prototype,"items",void 0),m([w({readOnly:!0})],kh.prototype,"needsRender",null),m([w({readOnly:!0})],kh.prototype,"_watchUpdatingTracking",void 0),m([w({readOnly:!0})],kh.prototype,"updating",null),kh=m([H("esri.views.overlay.ViewOverlay")],kh);const rz=kh,L$=[0,0];function o_e(e){const t=(e.ownerDocument||window.document).defaultView,i=e.getBoundingClientRect();return L$[0]=i.left+((t==null?void 0:t.pageXOffset)??0),L$[1]=i.top+((t==null?void 0:t.pageYOffset)??0),L$}function nz(e){e&&(e.textContent="",e.parentNode&&e.parentNode.removeChild(e))}function a_e(e){const t=document.createElement("div");return e.appendChild(t),t}const Sv=16,P_=750,l_e=512,u_e=2,c_e=e=>{let t=class extends e{constructor(...i){super(...i),this._freqInfo={freq:Sv,time:P_},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([ge(()=>this.cursor,r=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",r)}),ge(()=>this.navigating,r=>{const{surface:n}=this;n&&n.setAttribute("data-navigating",r.toString())})])}initialize(){this.addHandles([ge(()=>this.ui,(i,r)=>this._handleUIChange(i,r),qe),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=ci(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(i){const r=this._get("container"),n=ZO(i);if(n||typeof i!="string"||_e.getLogger(this).error("#container",`element with id '${i}' not found`),r===n)return;if(this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(nz(this.root),this._set("root",null)),this.userContent&&(Wj(this.userContent,r),nz(this.userContent),this._set("userContent",null))),!n)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);n.classList.add("esri-view");const o=document.createElement("div");o.className="esri-view-user-storage",Wj(n,o),n.appendChild(o),this._set("userContent",o);const c=document.createElement("div");c.className="esri-view-root",n.insertBefore(c,n.firstChild),this._set("root",c);const y=document.createElement("div");y.className="esri-view-surface",y.setAttribute("role","application"),y.tabIndex=0,c.appendChild(y),this._set("surface",y);const v=new rz;c.appendChild(v.surface),this._set("overlay",v),this.addHandles(ge(()=>v.needsRender,_=>{_&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=tg({render:()=>{var I;return(I=this.overlay)==null?void 0:I.render()}}):this._overlayRenderTaskHandle=Bi(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",n),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}blur(){var i;(i=this.surface)==null||i.blur()}focus(){var i;(i=this.surface)==null||i.focus()}pageToContainer(i,r,n){const o=this.position;return i-=o?o[0]:0,r-=o?o[1]:0,n?(n[0]=i,n[1]=r):n=[i,r],n}containerToPage(i,r,n){const o=this.position;return i+=o?o[0]:0,r+=o?o[1]:0,n?(n[0]=i,n[1]=r):n=[i,r],n}_handleUIChange(i,r){this.removeHandles("ui"),r&&r!==i&&r.destroy(),i&&(i.view=this,this.addHandles(ge(()=>this.root,n=>{i.container=n?a_e(n):null},qe),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=Sv,i.time=P_,this.addHandles([d3(window,"resize",()=>{i.freq=Sv,i.time=P_}),tg({prepare:r=>{const n=this._measure(),o=this._freqInfo;if(o.time+=r.deltaTime,n&&(o.freq=Sv,this._get("resizing")||this._set("resizing",!0)),o.time<o.freq)return;o.time=0;const c=this._position();o.freq=c||n?Sv:Math.min(P_,o.freq*u_e),!n&&o.freq>=l_e&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,n=i?i.clientHeight:0;if(r===0||n===0)return this.suspended||this._set("suspended",!0),!1;const o=this.width,c=this.height;return r===o&&n===c?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:o,oldHeight:c,width:r,height:n}),!0)}_position(){const i=this.container,r=this.position,n=i&&o_e(i);return!!n&&(!r||n[0]!==r[0]||n[1]!==r[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return m([w()],t.prototype,"container",null),m([w({readOnly:!0})],t.prototype,"focused",null),m([w({readOnly:!0})],t.prototype,"height",void 0),m([w()],t.prototype,"messagesCommon",void 0),m([w({type:rz})],t.prototype,"overlay",void 0),m([w({readOnly:!0})],t.prototype,"position",void 0),m([w({readOnly:!0})],t.prototype,"resizing",void 0),m([w({readOnly:!0})],t.prototype,"root",void 0),m([w({value:null,readOnly:!0})],t.prototype,"size",null),m([w({readOnly:!0})],t.prototype,"surface",void 0),m([w({readOnly:!0})],t.prototype,"suspended",void 0),m([w()],t.prototype,"ui",void 0),m([w({readOnly:!0})],t.prototype,"userContent",void 0),m([w({readOnly:!0})],t.prototype,"width",void 0),m([w()],t.prototype,"widthBreakpoint",void 0),t=m([H("esri.views.DOMContainer")],t),t},h_e=we("mac")?"Meta":"Control",d_e=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),p_e=e=>d_e.has(e);let f_e=class{constructor(t,i=[]){this.eventType=t,this.keyModifiers=i}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=t.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}},sn=class{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const i=this._incoming[t];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager||(t.setEventCallback(i=>this._handleEvent(i)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,i,r){let n;typeof i=="function"?(r=i,n=[]):n=i||[];const o=typeof t=="string"?new f_e(t,n):t,c=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},y=I=>{const $=this._incoming[I.match.eventType];if($){const A=$.indexOf(I);$.splice(A,1),c(),this._manager&&this._manager.updateDependencies()}},v=new y_e(o,r,{onPause:y,onRemove:y,onResume:I=>{const $=this._incoming[I.match.eventType];$&&!$.includes(I)&&($.push(I),c(),this._manager&&this._manager.updateDependencies())}});let _=this._incoming[o.eventType];return _||(_=[],this._incoming[o.eventType]=_),_.push(v),c(),this._manager&&this._manager.updateDependencies(),v}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const i=new m_e(t,{onEmit:(r,n,o,c)=>{var y;(y=this._manager)==null||y.emit(r.eventType,n,o,c)},onRemove:r=>{var n;delete this._outgoing[r.eventType],(n=this._manager)==null||n.updateDependencies()}});return this._outgoing[t]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(t){var i;(i=this._manager)==null||i.setPointerCapture(t,!0)}stopCapturingPointer(t){var i;(i=this._manager)==null||i.setPointerCapture(t,!1)}refreshHasPendingInputs(){var t;(t=this._manager)==null||t.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(t){var r;const i=this._incoming[t.type];if(i){for(const n of i)if(n.match.matches(t)&&((r=n.callback)==null||r.call(n,t),t.shouldStopPropagation()))break}}},y_e=class{constructor(t,i,r){this.match=t,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},m_e=class{constructor(t,i){this.eventType=t,this._removed=!1,this._handler=i}emit(t,i,r){this._removed||this._handler.onEmit(this,t,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},g_e=class extends sn{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>this._update(i.data))}_update(t){const i=t.native.pointerType==="touch"?"touch":"mouse",{x:r,y:n}=t;i===this._value&&this._x===r&&this._y===n||(this._value=i,this._x=r,this._y=n,this._onChange(i,r,n))}},v_e=class{constructor(t,i){this._observable=new Fg,this._value=t,this._equalityFunction=i}get value(){return Xe(this._observable),this._value}set value(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}mutate(t){t(this._value),this._observable.notify()}};function x2(e,t=cK){return new v_e(e,t)}let w_e=class extends sn{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=x2(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},b_e=class{constructor(t,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in t){const n=t[r],o=new UK(n,void 0,void 0,2,2);this._properties[r]={pool:o,acquired:[]}}this._afterDispatchHandle=eme(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const i=this._properties[t];for(const r of i.acquired)vD(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(t){const i=this._owner._get(t),r=this._properties[t];let n=r.pool.acquire();for(r.acquired.push(n);n===i;)r.acquired.push(n),n=r.pool.acquire();return n}_release(){for(const t in this._properties){const i=this._properties[t];let r=0;for(const n of i.acquired)vD(n)?i.acquired[r++]=n:i.pool.release(n);i.acquired.length=r}}},Yo=class extends Ve{constructor(t){super(t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=h_e,this._latestPointerType="mouse",this._propertiesPool=new b_e({latestPointerLocation:x_e},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const t=Object.keys(this._nameToGroup);for(const i of t)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(t=>t.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(t,i,r=Hd.INTERNAL){if(this._nameToGroup[t]||i.length===0)return;const n={name:t,handlers:i.map(o=>({handler:o,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[t]=n;for(let o=n.handlers.length-1;o>=0;o--){const c=n.handlers[o];this._handlers.push(c),c.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(y,v,_,I,$)=>{this._emitInputEvent(c.priorityIndex+1,y,v,_,$,I)},setPointerCapture:(y,v)=>{this._setPointerCapture(n,c,y,v)},setEventCallback:y=>{c.eventCallback=y},setUninstallCallback:y=>{c.uninstallCallback=y},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(t){const i=this._nameToGroup[t];i?(i.handlers.forEach(r=>{var n;r.removed=!0,(n=r.uninstallCallback)==null||n.call(r)}),delete this._nameToGroup[t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):_e.getLogger(this).error("There is no InputHandler group registered under the name `"+t+"`")}hasHandlers(t){return this._nameToGroup[t]!==void 0}isModifierKeyDown(t){return this._activeKeyModifiers.has(t)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const t=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const n=this._handlers[r];n.priorityIndex=r,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const n=this._handlersPriority[r];n.priorityIndex=r;let o=n.handler.hasSideEffects;if(!o){for(const c of n.handler.outgoingEventTypes)if(t.has(c)){o=!0;break}}if(o)for(const c of n.handler.incomingEventMatches){t.add(c.eventType);for(const y of c.keyModifiers)p_e(y)||i.add(y)}n.active=o}this._sourceEvents=t,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(t,i,r){this._latestPointerType=t;const n=this._get("latestPointerLocation");if(n==null||n.x!==i||n.y!==r){const o=this._propertiesPool.get("latestPointerLocation");o.x=i,o.y=r,this._set("latestPointerLocation",o)}}_onEventReceived(t,i){if(t==="pointer-capture-lost"){const o=i;this._pointerCaptures.delete(o.native.pointerId)}this._updateKeyModifiers(t,i);const r=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,n=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(t,i,r,n)}_updateKeyModifiers(t,i){if(!i)return;let r=!1;const n=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},o=(y,v)=>{v&&!this._activeKeyModifiers.has(y)?(n(),this._activeKeyModifiers.add(y)):!v&&this._activeKeyModifiers.has(y)&&(n(),this._activeKeyModifiers.delete(y))};if(t==="key-down"||t==="key-up"){const y=i.key;this._keyModifiers.has(y)&&o(y,t==="key-down")}const c=i.native;o("Alt",!!(c!=null&&c.altKey)),o("Control",!!(c!=null&&c.ctrlKey)),o("Ctrl",!!(c!=null&&c.ctrlKey)),o("Shift",!!(c!=null&&c.shiftKey)),o("Meta",!!(c!=null&&c.metaKey)),o("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new g_e((t,i,r)=>this._setLatestPointer(t,i,r)),this._multiTouchHandler=new w_e,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Hd.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Hd.INTERNAL)}_setPointerCapture(t,i,r,n){const o=t.name+"-"+i.priorityIndex,c=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,c),n?(c.add(o),c.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):c.has(o)&&(c.delete(o),c.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(t=>!t.removed),this.updateDependencies()}_emitInputEventFromSource(t,i,r,n){this._emitInputEvent(0,t,i,r,n)}_emitInputEvent(t,i,r,n,o,c){const y=n!==void 0?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),v=o!==void 0&&o,_={event:new __e(i,r,y,c||this._activeKeyModifiers,v),priorityIndex:t};this._currentPropagation?this._currentPropagation.events.push(_):this._doNewPropagation(_)}_doNewPropagation(t){this._currentPropagation={events:new F9,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:t.event.timestamp},this._currentPropagation.events.push(t),this._continuePropagation()}_continuePropagation(){var i,r,n;this._paused=!1;const t=this._currentPropagation;if(t){for(;t.events.length>0;){const{event:o,priorityIndex:c}=t.events.pop(),y=(i=o.data)==null?void 0:i.eventId;if(!(y!=null&&this._stoppedPropagationEventIds.has(y)))for(t.currentHandler=this._handlersPriority[c];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!o.shouldStopPropagation()&&((n=(r=t.currentHandler).eventCallback)==null||n.call(r,o)),o.shouldStopPropagation()){y!=null&&this._stoppedPropagationEventIds.add(y);break}if(o.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:o,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(t){const i=new F9;i.push(t);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(t,i){if(t.handler.hasSideEffects!==i.handler.hasSideEffects)return t.handler.hasSideEffects?1:-1;if(t.groupPriority!==i.groupPriority)return t.groupPriority>i.groupPriority?-1:1;for(const r of t.handler.incomingEventMatches)for(const n of i.handler.incomingEventMatches){if(r.eventType!==n.eventType)continue;const o=r.keyModifiers.filter(c=>n.keyModifiers.includes(c));if(o.length===r.keyModifiers.length!=(o.length===n.keyModifiers.length))return r.keyModifiers.length>n.keyModifiers.length?-1:1}return t.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(t){const i=[];for(const r of t){let n=0;for(;n<i.length&&this._compareHandlerPriority(r,i[n])>=0;)n++;i.splice(n,0,r)}return i}get debug(){const t=i=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=r};return{injectEvent:(i,r)=>{t(()=>this._onEventReceived(i,r))},disablePointerCapture:t}}};m([w({readOnly:!0})],Yo.prototype,"hasPendingInputs",null),m([w({constructOnly:!0})],Yo.prototype,"eventSource",void 0),m([w({constructOnly:!0})],Yo.prototype,"recognizers",void 0),m([w()],Yo.prototype,"_latestPointerType",void 0),m([w()],Yo.prototype,"latestPointerType",null),m([w()],Yo.prototype,"multiTouchActive",null),m([w({readOnly:!0})],Yo.prototype,"latestPointerLocation",void 0),m([w()],Yo.prototype,"_paused",void 0),m([w({readOnly:!0})],Yo.prototype,"updating",null),Yo=m([H("esri.views.input.InputManager")],Yo);let __e=class{constructor(t,i,r,n,o){this.type=t,this.data=i,this.timestamp=r,this.modifiers=n,this.cancelable=o,this._propagationState=pd.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=pd.STOPPED}shouldStopPropagation(){return!!(this._propagationState&pd.STOPPED)}async(t){this._propagationState|=pd.PAUSED;const i=(r,n)=>{this._propagationState&=~pd.PAUSED;const o=this._resumeCallback;if(this._resumeCallback=null,o&&o(),n)throw r;return r};return(typeof t=="function"?t():t).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(t){return!!(this._propagationState&pd.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}};var pd;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(pd||(pd={}));const Hd={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let S_e=class{};const x_e=S_e;function _h(e){return e!=null&&"open"in e&&"declaredClass"in e}function sz(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}const I_e=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([ge(()=>[this.ui,this.popup],([i,r],n)=>{const o="popup",c="manual";if(n){const[y,v]=n;y&&_h(v)&&(v.view=null,sz(v)&&y.remove(v,o))}i&&_h(r)&&(r.view=this,sz(r)&&i.add(r,{key:o,position:c,internal:!0}))},qe),this.on("click",i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&(_h(this.popup)?this.popup.viewModel.handleViewClick(i):i.async(async()=>{await this.setupPopup(),_h(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)}))},Hd.WIDGET)]),Ou(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{de(()=>Promise.resolve().then(()=>Jq),void 0,import.meta.url)})}destroy(){this.destroyed||this.closePopup()}async openPopup(i){if(_h(this.popup))return this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void _e.getLogger(this).error(new ne("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){var i;(i=this._popupSetupTask)==null||i.abort(),_h(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,r){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(i,r),r)}async setupPopup(){var i;if((i=this._popupSetupTask)==null||i.abort(),this.popup&&!_h(this.popup))return this._popupSetupTask=kO(async r=>{const{default:n}=await de(()=>Promise.resolve().then(()=>Jq),void 0,import.meta.url);if(Gi(r),!this.popup||_h(this.popup))return;const o=this.popup;delete o.open,delete o.close,this.popup=new n(o)}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:i,hits:r},n){const o=[],c=[];let y=!1;const v=Lye(n,we("popup-view-fetch-timeout")??$_e),_=A=>{const k=new T_e(A);return c.push(k),o.push(k.promise),k},I=A=>{const k=c.at(-1);return k&&k.layerView===A&&!y?k:_(A)};for(const A of r)"graphic"in A?(I(A.layerView).graphics.push(A.graphic),y=!1):(o.push(A.layerView.fetchPopupFeaturesAtLocation(A.mapPoint,v)),y=!0);c.map(A=>A.resolve(v));const $=kye(o).then(A=>A.filter(k=>!!k).flat());return{pendingFeatures:o,allGraphicsPromise:$,location:i}}async _getPopupHits(i,r){const{hits:n,location:o}=await this.popupHitTest(i);Gi(r);const c=[];for(const y of n)if("graphic"in y){if(this._isValidPopupGraphic(y.graphic,r)){const v=this._isValidPopupGraphicsLayerView(y.layerView)?y.layerView:void 0;c.push({graphic:y.graphic,layerView:v})}}else this._isValidPopupLocationLayerView(y.layerView)&&c.push({mapPoint:y.mapPoint,layerView:y.layerView});return{hits:c,location:o}}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(r==null?void 0:r.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(i){return!i||(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesFromGraphics"in i}_isValidPopupLocationLayerView(i){return(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesAtLocation"in i}};return m([w()],t.prototype,"popup",void 0),m([w()],t.prototype,"popupEnabled",void 0),t=m([H("esri.views.PopupView")],t),t};let T_e=class{constructor(t){this.layerView=t,this._resolver=Vo(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(t){const{layerView:i,graphics:r,_resolver:n}=this;if(!i)return n.resolve(r),n.promise;let o;return i.fetchPopupFeaturesFromGraphics(r,t).catch(c=>(o=c,null)).then(c=>{c?n.resolve(c):n.reject(o)}),n.promise}};const $_e=5e3;function ip(e,t,i=Oe){return t||(t=new i),t===e||(t.removeAll(),E_e(e)?t.addMany(e):e&&t.add(e)),t}function Vee(e){return e}function E_e(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}var fd;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(fd||(fd={}));let M_e=class{constructor(){this._resolver=Vo(),this._status=fd.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=fd.RESOLVED,this._cleanUp()},()=>{this._status=fd.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===fd.RESOLVED}isRejected(){return this._status===fd.REJECTED}isFulfilled(){return this._status!==fd.PENDING}abort(){this._resolver.reject(Ei())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=Vo(),i=[...this._resolvingPromises,t.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},n=>{this.isFulfilled()||this._allPromise!==r||br(n)||this._resolver.reject(n)}),t.resolve()}};const x3=e=>{let t=class extends e{constructor(...i){super(...i),this._promiseProps=new M_e,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return this._promiseProps.promise.then(()=>this).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return t=m([H("esri.core.Promise")],t),t};let Z9=class extends x3(Ve){};Z9=m([H("esri.core.Promise")],Z9);const A_e="not-loaded",C_e="loading",k_e="failed",oz="loaded",Uee=e=>{let t=class extends e{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const n=this.load.bind(this);this.load=o=>{const c=new Promise((y,v)=>{const _=rO(o,v);this.destroyed&&v(new ne("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(y,v).finally(()=>{_&&_.remove()})});if(this.loadStatus===A_e){this._set("loadStatus",C_e);const y=this._loadController=new AbortController;n({signal:y.signal})}return r(),c}})),this.when(()=>{this._set("loadStatus",oz),this._loadController=null},r=>{this._set("loadStatus",k_e),this._set("loadError",r),this._loadController=null})}destroy(){this._loadController&&(this._loadController=_0(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===oz}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new ne("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort(),this._promiseProps.abort()),this}};return m([w({readOnly:!0})],t.prototype,"loaded",null),m([w({readOnly:!0})],t.prototype,"loadError",void 0),m([w({clonable:!1})],t.prototype,"loadStatus",void 0),m([w({type:[zo],readOnly:!0})],t.prototype,"loadWarnings",null),t=m([H("esri.core.Loadable")],t),t};let tw=class extends Uee(Z9){};tw=m([H("esri.core.Loadable")],tw),function(e){function t(i){return!(!i||!i.load)}e.LoadableMixin=Uee,e.isLoadable=t}(tw||(tw={}));const Aa=tw;async function kI(e,t){return await e.load(),L_e(e,t)}async function L_e(e,t){const i=[],r=(...o)=>{for(const c of o)c!=null&&(Array.isArray(c)?r(...c):Oe.isCollection(c)?c.forEach(y=>r(y)):Aa.isLoadable(c)&&i.push(c))};t(r);let n=null;if(await ive(i,async o=>{const c=await vI(O_e(o)?o.loadAll():o.load());c.ok!==!1||n||(n=c)}),n)throw n.error;return e}function O_e(e){return"loadAll"in e&&typeof e.loadAll=="function"}let N_;function R_e(e){return N_&&!N_.destroyed||(N_=e()),N_}var vA;const P_e=new ft({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Xo=vA=class extends Ve{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new vA({categories:this.categories?le(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let i=[];this.categories&&(i=this.categories.map(c=>Array.isArray(c)?JSON.stringify(c):c));let r="";if(this.extent){const c=yI(this.extent,rt.WGS84);c!=null&&(r=`${c.xmin},${c.ymin},${c.xmax},${c.ymax}`)}let n=this.query;!this.disableExtraQuery&&e.extraQuery&&(n="("+n+")"+e.extraQuery);const o={categories:i,bbox:r,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(o.sortField=this.sortField.split(",").map(c=>P_e.toJSON(c.trim())).join(","),o.sortOrder=this.sortOrder),{query:{...t,...o}}}};m([w()],Xo.prototype,"categories",void 0),m([w()],Xo.prototype,"disableExtraQuery",void 0),m([w({type:Ut})],Xo.prototype,"extent",void 0),m([w()],Xo.prototype,"filter",void 0),m([w()],Xo.prototype,"num",void 0),m([w()],Xo.prototype,"query",void 0),m([w()],Xo.prototype,"sortField",void 0),m([w()],Xo.prototype,"sortOrder",null),m([w()],Xo.prototype,"start",void 0),Xo=vA=m([H("esri.portal.PortalQueryParams")],Xo);const ml=Xo;var wA;let Or=wA=class extends be{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var i;const e=this.url,t=this.thumbnail;return e&&t&&this.portal?(i=this.portal)==null?void 0:i.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then(t=>{const i=t.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):i})}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new ne("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new wA({sourceJSON:e});return t.read(e),t}queryItems(e,t){let i=qi(ml,e);const r=this.portal;return parseFloat(r.currentVersion)>5?(i=i||new ml,r.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",t)):(i=i?i.clone():new ml,i.query="group:"+this.id+(i.query?" "+i.query:""),r.queryItems(i,t))}_fetchCategorySchemaSet(e,t){const i=this.portal;return i.fetchSelf(i.authMode,!0,t).then(r=>{const n=r.contentCategorySetsGroupQuery;if(n){const o=new ml({disableExtraQuery:!0,num:1,query:n});return i.queryGroups(o,t)}throw new ne("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const n=r.results[0],o=new ml({num:1,query:`typekeywords:"${e}"`});return n.queryItems(o,t)}throw new ne("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",t).then(n=>{const o=n==null?void 0:n.categorySchema;return o!=null&&o.length?o:[]}):[])}};m([w()],Or.prototype,"access",void 0),m([w({type:Date})],Or.prototype,"created",void 0),m([w()],Or.prototype,"description",void 0),m([w()],Or.prototype,"id",void 0),m([w()],Or.prototype,"isInvitationOnly",void 0),m([w({type:Date})],Or.prototype,"modified",void 0),m([w()],Or.prototype,"owner",void 0),m([w()],Or.prototype,"portal",void 0),m([w()],Or.prototype,"snippet",void 0),m([w()],Or.prototype,"sortField",void 0),m([w()],Or.prototype,"sortOrder",void 0),m([w()],Or.prototype,"sourceJSON",void 0),m([w()],Or.prototype,"tags",void 0),m([w()],Or.prototype,"thumbnail",void 0),m([w({readOnly:!0})],Or.prototype,"thumbnailUrl",null),m([w()],Or.prototype,"title",void 0),m([w({readOnly:!0})],Or.prototype,"url",null),Or=wA=m([H("esri.portal.PortalGroup")],Or);const bA=Or;let jp=class extends Ve{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};m([w()],jp.prototype,"nextQueryParams",void 0),m([w()],jp.prototype,"queryParams",void 0),m([w()],jp.prototype,"results",void 0),m([w()],jp.prototype,"total",void 0),jp=m([H("esri.portal.PortalQueryResult")],jp);const N_e=jp;let Yu=class extends be{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var i;const t=(i=this.portal)==null?void 0:i.restUrl;return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new ne("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};m([w({type:Date})],Yu.prototype,"created",void 0),m([w()],Yu.prototype,"id",void 0),m([w()],Yu.prototype,"portal",void 0),m([w()],Yu.prototype,"title",void 0),m([w({readOnly:!0})],Yu.prototype,"url",null),m([w()],Yu.prototype,"username",void 0),Yu=m([H("esri.portal.PortalFolder")],Yu);const F_e=Yu;var _A;let $i=_A=class extends be{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/content/users/${this.username}`:null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,i=e==null?void 0:e.data,r=e==null?void 0:e.folder,n={method:"post"};t&&(n.query=t.createPostQuery(),i!=null&&(typeof i=="string"?n.query.text=i:typeof i=="object"&&(n.query.text=JSON.stringify(i))));let o=this.userContentUrl;return r&&(o+="/"+(typeof r=="string"?r:r.id)),this.portal.request(o+"/addItem",n).then(c=>(t.id=c.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}async deleteItem(e,t=!1){let i=this.userContentUrl;e.ownerFolder&&(i+="/"+e.ownerFolder);const r=t?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${e.id}/delete`,{method:"post",query:r}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.slice();const i=this.userContentUrl+"/deleteItems",r=[],n=e.map(o=>o.id);if(n.length){const o={method:"post",query:{items:n.join(","),permanentDelete:t}},c=await this.portal.request(i,o);for(const y of c.results){const v=e.find($=>y.itemId===$.id),_=y.success;let I=null;_?(v.id=null,v.portal=null):y.error&&(I=new ne("portal:delete-item-failed",y.error.message,y.error)),r.push({item:v,success:_,error:I})}}return r}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(t=>{let i;return i=t&&t.folders?t.folders.map(r=>{const n=F_e.fromJSON(r);return n.portal=this.portal,n}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(i=>{const r=bA.fromJSON(i);return r.portal=this.portal,r}):[],t})}async fetchItems(e){e??(e={});let t=this.userContentUrl??"";e.folder&&(t+="/"+e.folder.id);const{default:i}=await de(()=>Promise.resolve().then(()=>qee),void 0,import.meta.url),r={folders:!1,inRecycleBin:!!e.inRecycleBin||null,foldersContent:!(e.folder||!e.includeSubfolderItems)||null,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"},n=await this.portal.request(t,{query:r});let o;return n!=null&&n.items?(o=n.items.map(c=>{const y=i.fromJSON(c);return y.portal=this.portal,y}),await Promise.all(o.map(c=>c.load())),{items:o,nextStart:n.nextStart,total:n.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new bA({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new ne("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(e,t){const i=this.userContentUrl,r=t?{folderID:typeof t=="string"?t:t.id}:null;await this.portal.request(i+`/items/${e.id}/restore`,{method:"post",query:r})}toJSON(){throw new ne("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new _A({sourceJSON:e});return t.read(e),t}};m([w()],$i.prototype,"access",void 0),m([w({type:Date})],$i.prototype,"created",void 0),m([w()],$i.prototype,"culture",void 0),m([w()],$i.prototype,"description",void 0),m([w()],$i.prototype,"email",void 0),m([w()],$i.prototype,"favGroupId",void 0),m([w()],$i.prototype,"fullName",void 0),m([w({type:Date})],$i.prototype,"modified",void 0),m([w()],$i.prototype,"orgId",void 0),m([w()],$i.prototype,"portal",void 0),m([w()],$i.prototype,"preferredView",void 0),m([w()],$i.prototype,"privileges",void 0),m([w()],$i.prototype,"region",void 0),m([w()],$i.prototype,"role",void 0),m([w()],$i.prototype,"roleId",void 0),m([w()],$i.prototype,"sourceJSON",void 0),m([w()],$i.prototype,"thumbnail",void 0),m([w({readOnly:!0})],$i.prototype,"thumbnailUrl",null),m([w()],$i.prototype,"units",void 0),m([w({readOnly:!0})],$i.prototype,"userContentUrl",null),m([w({readOnly:!0})],$i.prototype,"url",null),m([w()],$i.prototype,"username",void 0),m([w()],$i.prototype,"userLicenseTypeId",void 0),m([w()],$i.prototype,"userType",void 0),$i=_A=m([H("esri.portal.PortalUser")],$i);const eR=$i;var wo;let xv;const az={PortalGroup:()=>Promise.resolve({default:bA}),PortalItem:()=>de(()=>Promise.resolve().then(()=>qee),void 0,import.meta.url),PortalUser:()=>Promise.resolve({default:eR})};let Re=wo=class extends Og(Aa){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=qt.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){lz.unregister(this),this.defaultBasemap=ci(this.defaultBasemap),this.defaultDevBasemap=ci(this.defaultDevBasemap),this.defaultVectorBasemap=ci(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Bi(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)qt.request.trustedServers.includes(t)||qt.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){var i;const e=(i=this.user)==null?void 0:i.orgId,t=!e||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get hasAPIKey(){return TY(this.url)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.slice(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=eR.fromJSON(e),t.portal=this),t}load(e){const t=de(()=>Promise.resolve().then(()=>lSe),void 0,import.meta.url).then(({default:i})=>{Gi(e),xv=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(i=>{var r;if(!this.hasAPIKey&&_t){const n=_t;this.credential=n.findCredential(this.restUrl),this.credential||this.authMode!==wo.AUTH_MODE_AUTO&&this.authMode!==wo.AUTH_MODE_NO_PROMPT||((r=this._esriIdCredentialCreateHandle)==null||r.remove(),this._esriIdCredentialCreateHandle=n.on("credential-create",D_e(new WeakRef(this))),lz.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await de(async()=>{const{default:i}=await import("./ElevationLayer-BSEDl5LO.js");return{default:i}},__vite__mapDeps([116,117,118,119]),import.meta.url)).default;return e?e.map(i=>new t({id:i.id,url:i.url})):[]}async fetchBasemaps(e,t){const i=await this._fetchBasemaps(e,t);if((t==null?void 0:t.include3d)===!0&&this.use3dBasemaps!==!1){const r=await this._fetchBasemaps3D(e,t);i.unshift(...r)}return i}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const t=new ml;t.query=this.default3DBasemapQuery,t.disableExtraQuery=!0;const i=(await this.queryItems(t,e)).results.find(r=>r.type==="Web Scene");return i?new xv({portalItem:i}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):Tl(e)?Promise.reject(Ei()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,i=new ml({num:100,sortField:"title"});if(t!=null&&t.length){const r=[];for(const n of t)r.push(`(title:"${n.title}" AND owner:${n.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,e).then(n=>n.results)}return Tl(e)?Promise.reject(Ei()):Promise.resolve([])}fetchRegions(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||ps();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||ps();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return R_e(()=>new wo)}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,i){const r=this.restUrl+"/portals/self",n={authMode:e,query:{culture:ps().toLowerCase()},withCredentials:!0,...i};return n.authMode==="auto"&&(n.authMode="no-prompt"),t&&(n.query.default=!0),this.request(r,n)}queryPortal(e,t,i,r){const n=qi(ml,t),o=c=>this.request(this.restUrl+e,{...n.toRequestOptions(this),...r}).then(y=>{const v=n.clone();return v.start=y.nextStart,new N_e({nextQueryParams:v,queryParams:n,total:y.total,results:wo._resultsToTypedArray(c,{portal:this},y,r)})}).then(y=>Promise.all(y.results.map(v=>typeof v.when=="function"?v.when():y)).then(()=>y,v=>(bu(v),y)));return i&&az[i]?az[i]().then(({default:c})=>(Gi(r),o(c))):o()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new ne("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===wo.AUTH_MODE_ANONYMOUS||this.authMode===wo.AUTH_MODE_NO_PROMPT&&!_t)return Promise.reject(new ne("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return _t?_t.getCredential(this.restUrl,{prompt:this.authMode!==wo.AUTH_MODE_NO_PROMPT}).then(t=>e(t)):e(this.credential)}normalizeUrl(e){var i;const t=(i=this.credential)==null?void 0:i.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,i){return this.request(e,t).then(r=>{const n=wo._resultsToTypedArray(i,{portal:this},r);return Promise.all(n.map(o=>typeof o.when=="function"?o.when():r)).then(()=>n,()=>n)})}request(e,t={}){const i={f:"json",...t.query},{authMode:r=this.authMode===wo.AUTH_MODE_ANONYMOUS||this.authMode===wo.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:n=null,cacheBust:o=!1,method:c="auto",responseType:y="json",signal:v}=t,_={authMode:r,body:n,cacheBust:o,method:c,query:i,responseType:y,timeout:0,signal:v};return t.withCredentials&&(_.withCredentials=!0),Et(this._normalizeSSL(e),_).then(I=>I.data)}toJSON(){throw new ne("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new wo({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new ne("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const i=new ml;i.query=e||(this.hasAPIKey?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const r=await this.queryGroups(i,t);if(!r.total)return[];const n=r.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=n.sortField||"name",i.sortOrder=n.sortOrder||"desc";const o=await n.queryItems(i,t);return o.total?o.results.filter(c=>c.type==="Web Map").map(c=>new xv({portalItem:c})):[]}async _fetchBasemaps3D(e,t){const i=e||this.basemapGalleryGroupQuery3D;if(!i)return[];const r=new ml({query:i,disableExtraQuery:!0}),n=await this.queryGroups(r,t);if(!n.total)return[];const o=n.results[0];r.num=100,r.query='type:"Web Scene"',r.sortField=o.sortField||"name",r.sortOrder=o.sortOrder||"desc";const c=await o.queryItems(r,t);return c.total?c.results.filter(y=>y.type==="Web Scene").map(y=>new xv({portalItem:y})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=xv.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,i,r){let n;if(i){const o=r!=null?r.signal:null;n=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||t)&&(n=n.map(c=>{const y=Object.assign(e?e.fromJSON(c):c,t);return typeof y.load=="function"&&y.load(o),y}))}else n=[];return n}};Re.AUTH_MODE_ANONYMOUS="anonymous",Re.AUTH_MODE_AUTO="auto",Re.AUTH_MODE_IMMEDIATE="immediate",Re.AUTH_MODE_NO_PROMPT="no-prompt",m([w()],Re.prototype,"access",void 0),m([w()],Re.prototype,"allSSL",void 0),m([w()],Re.prototype,"authMode",void 0),m([w()],Re.prototype,"authorizedCrossOriginDomains",void 0),m([ke("authorizedCrossOriginDomains")],Re.prototype,"readAuthorizedCrossOriginDomains",null),m([w()],Re.prototype,"basemapGalleryGroupQuery",void 0),m([w({json:{name:"3DBasemapGalleryGroupQuery"}})],Re.prototype,"basemapGalleryGroupQuery3D",void 0),m([w()],Re.prototype,"bingKey",void 0),m([w()],Re.prototype,"canListApps",void 0),m([w()],Re.prototype,"canListData",void 0),m([w()],Re.prototype,"canListPreProvisionedItems",void 0),m([w()],Re.prototype,"canProvisionDirectPurchase",void 0),m([w()],Re.prototype,"canSearchPublic",void 0),m([w()],Re.prototype,"canShareBingPublic",void 0),m([w()],Re.prototype,"canSharePublic",void 0),m([w()],Re.prototype,"canSignInArcGIS",void 0),m([w()],Re.prototype,"canSignInIDP",void 0),m([w()],Re.prototype,"colorSetsGroupQuery",void 0),m([w()],Re.prototype,"commentsEnabled",void 0),m([w({type:Date})],Re.prototype,"created",void 0),m([w()],Re.prototype,"credential",void 0),m([w()],Re.prototype,"culture",void 0),m([w()],Re.prototype,"currentVersion",void 0),m([w()],Re.prototype,"customBaseUrl",void 0),m([w()],Re.prototype,"default3DBasemapQuery",void 0),m([w()],Re.prototype,"defaultBasemap",void 0),m([ke("defaultBasemap")],Re.prototype,"readDefaultBasemap",null),m([w()],Re.prototype,"defaultDevBasemap",void 0),m([ke("defaultDevBasemap")],Re.prototype,"readDefaultDevBasemap",null),m([w({type:Ut})],Re.prototype,"defaultExtent",void 0),m([w()],Re.prototype,"defaultVectorBasemap",void 0),m([ke("defaultVectorBasemap")],Re.prototype,"readDefaultVectorBasemap",null),m([w()],Re.prototype,"description",void 0),m([w()],Re.prototype,"devBasemapGalleryGroupQuery",void 0),m([w()],Re.prototype,"eueiEnabled",void 0),m([w({readOnly:!0})],Re.prototype,"extraQuery",null),m([w()],Re.prototype,"featuredGroups",void 0),m([w()],Re.prototype,"featuredItemsGroupQuery",void 0),m([w()],Re.prototype,"galleryTemplatesGroupQuery",void 0),m([w()],Re.prototype,"layoutGroupQuery",void 0),m([w()],Re.prototype,"livingAtlasGroupQuery",void 0),m([w({readOnly:!0})],Re.prototype,"hasAPIKey",null),m([w()],Re.prototype,"hasCategorySchema",void 0),m([w()],Re.prototype,"hasClassificationSchema",void 0),m([w()],Re.prototype,"helpBase",void 0),m([w()],Re.prototype,"helperServices",void 0),m([w()],Re.prototype,"helpMap",void 0),m([w()],Re.prototype,"homePageFeaturedContent",void 0),m([w()],Re.prototype,"homePageFeaturedContentCount",void 0),m([w()],Re.prototype,"httpPort",void 0),m([w()],Re.prototype,"httpsPort",void 0),m([w()],Re.prototype,"id",void 0),m([w()],Re.prototype,"ipCntryCode",void 0),m([w({readOnly:!0})],Re.prototype,"isOrganization",null),m([w()],Re.prototype,"isPortal",void 0),m([w()],Re.prototype,"isReadOnly",void 0),m([w({readOnly:!0})],Re.prototype,"itemPageUrl",null),m([w()],Re.prototype,"layerTemplatesGroupQuery",void 0),m([w()],Re.prototype,"maxTokenExpirationMinutes",void 0),m([w({type:Date})],Re.prototype,"modified",void 0),m([w()],Re.prototype,"name",void 0),m([w()],Re.prototype,"portalHostname",void 0),m([w()],Re.prototype,"portalMode",void 0),m([w()],Re.prototype,"portalProperties",void 0),m([w()],Re.prototype,"region",void 0),m([w()],Re.prototype,"recycleBinEnabled",void 0),m([w({readOnly:!0})],Re.prototype,"restUrl",null),m([w()],Re.prototype,"rotatorPanels",void 0),m([w()],Re.prototype,"showHomePageDescription",void 0),m([w()],Re.prototype,"sourceJSON",void 0),m([w()],Re.prototype,"staticImagesUrl",void 0),m([w({json:{name:"2DStylesGroupQuery"}})],Re.prototype,"stylesGroupQuery2d",void 0),m([w({json:{name:"stylesGroupQuery"}})],Re.prototype,"stylesGroupQuery3d",void 0),m([w()],Re.prototype,"supportsHostedServices",void 0),m([w()],Re.prototype,"symbolSetsGroupQuery",void 0),m([w()],Re.prototype,"templatesGroupQuery",void 0),m([w()],Re.prototype,"thumbnail",void 0),m([w({readOnly:!0})],Re.prototype,"thumbnailUrl",null),m([w()],Re.prototype,"units",void 0),m([w()],Re.prototype,"url",void 0),m([w()],Re.prototype,"urlKey",void 0),m([ke("urlKey")],Re.prototype,"readUrlKey",null),m([w()],Re.prototype,"user",void 0),m([ke("user")],Re.prototype,"readUser",null),m([w()],Re.prototype,"use3dBasemaps",void 0),m([w()],Re.prototype,"useDefault3dBasemap",void 0),m([w()],Re.prototype,"useStandardizedQuery",void 0),m([w()],Re.prototype,"useVectorBasemaps",void 0),m([w()],Re.prototype,"vectorBasemapGalleryGroupQuery",void 0),Re=wo=m([H("esri.portal.Portal")],Re);const Cr=Re,lz=new FinalizationRegistry(e=>{e.remove()});function D_e(e){const t=_t;return()=>{const i=e.deref();i&&t.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}let Xu=class extends Ve{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t!=null&&t.portalItem&&t.path?{...t,path:uz(t.path,t.portalItem)}:t}set path(t){t!=null&&Fo(t)?_e.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return uz(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",i){const r=this.cdnUrl;if(r==null)throw new ne("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:t,query:{token:this.portalItem.apiKey,_ts:i!=null&&i.cacheBust?Date.now():null},signal:i==null?void 0:i.signal})}async update(t,i){const{addOrUpdateResources:r}=await de(()=>import("./resourceUtils-D9hMAh-w.js"),[],import.meta.url);return await r(this.portalItem,[{resource:this,content:t,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"update",i),this}hasPath(){return this.path!=null}};function uz(e,t){return e==null?e:(e=e.replace(/^\/+/,""),t!=null&&Fo(e)&&(e=dO(e,t.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}m([w()],Xu.prototype,"portalItem",void 0),m([w({type:String,value:null})],Xu.prototype,"path",null),m([wt("path")],Xu.prototype,"_castPath",null),m([w({type:String,readOnly:!0})],Xu.prototype,"url",null),m([w({type:String,readOnly:!0})],Xu.prototype,"cdnUrl",null),m([w({type:String,readOnly:!0})],Xu.prototype,"itemRelativeUrl",null),Xu=m([H("esri.portal.PortalItemResource")],Xu);const j_e=Xu;let iw=class extends Ve{constructor(t){super(t),this.created=null,this.rating=null}};m([w()],iw.prototype,"created",void 0),m([w()],iw.prototype,"rating",void 0),iw=m([H("esri.portal.PortalRating")],iw);const O$=iw;function rp(e,t){var r;const i=(r=t==null?void 0:t.url)==null?void 0:r.path;if(e&&i&&(e=Xs(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const n=dO(e,t.portalItem.itemUrl);n!=null&&z_e.test(n)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(n).path)}return(e=SA(e,t==null?void 0:t.portal))&&LI.test(e)?iR(e):e}function I3(e,t,i=I2.YES){var n,o;if((e=e&&LI.test(e)?Gee(e):e)==null)return e;!Fo(e)&&(t!=null&&t.blockedRelativeUrls)&&t.blockedRelativeUrls.push(e);let r=Xs(e);if(t){const c=((n=t.verifyItemRelativeUrls)==null?void 0:n.rootPath)||((o=t.url)==null?void 0:o.path);if(c){const y=SA(c,t.portal),v=SA(r,t.portal);r=dO(v,y,y),r!=null&&r!==v&&r!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=Bee(r,t==null?void 0:t.portal),Fo(r)&&(r=Ia(r)),t!=null&&t.resources&&(t!=null&&t.portalItem)&&!Fo(r)&&!ih(r)&&i===I2.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r),compress:!1}),r}function tR(e,t,i){return rp(e,i)}function O0(e,t,i,r){const n=I3(e,r);n!==void 0&&(t[i]=n)}const LI=/\/items\/([^/]+)\/resources\/(.*)/,z_e=/^\.\/resources\//;function V_e(e){const t=(e==null?void 0:e.match(LI))??null;return(t==null?void 0:t[1])??null}function U_e(e){const t=(e==null?void 0:e.match(LI))??null;if(t==null)return null;const i=t[2],r=i.lastIndexOf("/");if(r===-1){const{path:c,extension:y}=SD(i);return{prefix:null,filename:c,extension:y}}const{path:n,extension:o}=SD(i.slice(r+1));return{prefix:i.slice(0,r),filename:n,extension:o}}function Bee(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?LM(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function SA(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`,r=lO();return ig(r,`${r.scheme}://${i}`)?LM(e,t.portalHostname,i):LM(e,i,t.portalHostname)}function iR(e){if(!e)return e||null;let t=e;return t&&_t&&!_t.findCredential(t)&&(t=uY(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function Gee(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&_t&&!_t.findCredential(t)&&(t=uY(t)),t}var I2;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(I2||(I2={}));const XZe=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return I2},ensureMainOnlineDomain:Bee,fromCDNUrl:Gee,fromJSON:rp,itemIdFromResourceUrl:V_e,prefixAndFilenameFromResourceUrl:U_e,read:tR,toCDNUrl:iR,toJSON:I3,write:O0},Symbol.toStringTag,{value:"Module"}));var zp;const B_e=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),G_e=new Set(["KML","GeoJson","CSV"]);let mt=zp=class extends Og(Aa){static from(e){return a3(zp,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return e==="Feature Service"||e==="Feature Collection"?i=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?i=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?i="Scene Layer":e==="Video Service"?i="Video Layer":e==="Scene Package"?i="Scene Layer Package":e==="Stream Service"?i="Feature Layer":e==="Geoprocessing Service"?i=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geoenrichment Service"?i="GeoEnrichment Service":e==="Geocoding Service"?i="Locator":e==="Microsoft Powerpoint"?i="Microsoft PowerPoint":e==="GeoJson"?i="GeoJSON":e==="Globe Service"?i="Globe Layer":e==="Vector Tile Service"?i="Tile Layer":e==="netCDF"?i="NetCDF":e==="Map Service"?i=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e!=null&&e.toLowerCase().includes("add in")?i=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?i="Big Data File Share":e==="Compact Tile Package"?i="Tile Package (tpkx)":e==="Raster function template"?i="Raster Function Template":e==="OGCFeatureServer"?i="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?i="Instant App":e==="Insights Page"?i="Insights Report":e==="Excalibur Imagery Project"?i="Excalibur Project":e==="3DTiles Service"?i="3D tiles layer":e==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(e){return e&&e.length?new Ut(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){var k;const e=((k=this.type)==null?void 0:k.toLowerCase())||"",t=this.typeKeywords||[],i="esri/images/portal/",r="16";let n,o=!1,c=!1,y=!1,v=!1,_=!1,I=!1,$=!1,A=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(o=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(c=t.includes("Table"),y=t.includes("Route Layer"),v=t.includes("Markup"),_=t.includes("Spatiotemporal"),I=t.includes("UtilityNetwork"),n=_&&c?"spatiotemporaltable":c?"table":y?"routelayer":v?"markup":_?"spatiotemporal":I?"utilitynetwork":o?"featureshosted":"features"):e==="map service"||e==="wms"||e==="wmts"?(_=t.includes("Spatiotemporal"),$=t.includes("Relational"),n=_||$?"mapimages":o||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages"):n=e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?n="maps":e==="web scene"?n=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?n="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?n="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?n="mapsgray":e==="service definition"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?n="datafiles":e==="360 vr experience"?n="360vr":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?n="appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?n="addindesktop":e==="pdf"?n="pdf":e==="microsoft word"?n="word":e==="microsoft excel"?n="excel":e==="microsoft powerpoint"?n="ppt":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?n="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?n="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?n="layersgray":e==="analysis model"?n="analysismodel":e==="scene package"?n="scenepackage":e==="3dtiles package"?n="3dtileslayerpackage":e==="3dtiles service"?n="3dtileslayer":e==="mobile scene package"?n="mobilescenepackage":e==="tile package"||e==="compact tile package"?n="tilepackage":e==="task file"?n="taskfile":e==="report template"?n="report-template":e==="statistical data collection"?n="statisticaldatacollection":e==="insights workbook"?n="workbook":e==="insights model"?n="insightsmodel":e==="insights page"?n="insightspage":e==="insights theme"?n="insightstheme":e==="hub initiative"?n="hubinitiative":e==="hub page"?n="hubpage":e==="hub site application"?n="hubsite":e==="hub event"?n="hubevent":e==="hub project"?n="hubproject":e==="relational database connection"?n="relationaldatabaseconnection":e==="big data file share"?n="datastorecollection":e==="image collection"?n="imagecollection":e==="desktop style"?n="desktopstyle":e==="style"?n=t.includes("Dictionary")?"dictionarystyle":"style":e==="dashboard"?n="dashboard":e==="raster function template"?n="rasterprocessingtemplate":e==="vector tile package"?n="vectortilepackage":e==="ortho mapping project"?n="orthomappingproject":e==="ortho mapping template"?n="orthomappingtemplate":e==="solution"?n="solutions":e==="geopackage"?n="geopackage":e==="deep learning package"?n="deeplearningpackage":e==="real time analytic"?n="realtimeanalytics":e==="reality mapping project"?n="realitymappingproject":e==="big data analytic"?n="bigdataanalytics":e==="feed"?n="feed":e==="excalibur imagery project"?n="excaliburimageryproject":e==="notebook"?n="notebook":e==="storymap"?n="storymap":e==="survey123 add in"?n="survey123addin":e==="mission"?n="mission":e==="mission report"?n="missionreport":e==="mission template"?n="missiontemplate":e==="quickcapture project"?n="quickcaptureproject":e==="pro report"?n="proreport":e==="pro report template"?n="proreporttemplate":e==="urban model"?n="urbanmodel":e==="urban project"?n="urbanproject":e==="web experience"?n="experiencebuilder":e==="web experience template"?n="webexperiencetemplate":e==="experience builder widget"?n="experiencebuilderwidget":e==="experience builder widget package"?n="experiencebuilderwidgetpackage":e==="workflow"?n="workflow":e==="kernel gateway connection"?n="kernelgatewayconnection":e==="insights script"?n="insightsscript":e==="hub initiative template"?n="hubinitiativetemplate":e==="storymap theme"?n="storymaptheme":e==="knowledge graph"?n="knowledgegraph":e==="knowledge graph layer"?n="knowledgegraphlayer":e==="knowledge studio project"?n="knowledgestudio":e==="native application"?n="nativeapp":e==="native application installer"?n="nativeappinstaller":e==="web link chart"?n="linkchart":e==="knowledge graph web investigation"?n="investigation":e==="ogcfeatureserver"?n="features":e==="pro presentation"?n="propresentation":e==="pro project"?n="proproject":e==="insights workbook package"?n="insightsworkbookpackage":e==="apache parquet"?n="apacheparquet":e==="notebook code snippet library"?n="notebookcodesnippets":e==="suitability model"?n="suitabilitymodel":e==="esri classifier definition"?n="classifierdefinition":e==="esri classification schema"?n="classificationschema":e==="insights data engineering workbook"?n="dataengineeringworkbook":e==="insights data engineering model"?n="dataengineeringmodel":e==="deep learning studio project"?n="deeplearningproject":e==="discussion"?n="discussion":e==="allsource project"?n="allsourceproject":e==="api key"?n="apikey":e==="data pipeline"?n="datapipelines":e==="group layer"?(A=t.includes("Map"),n=A?"layergroup2d":"layergroup"):n=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":e==="csv"?"csv":e==="image"?"image":"maps",n?jt(i+n+r+".png"):null}get isLayer(){return this.type!=null&&B_e.has(this.type)}get itemCdnUrl(){return iR(this.itemUrl)}get itemPageUrl(){var t;const e=(t=this.portal)==null?void 0:t.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const e=this.itemUrl,t=this.thumbnail;return e&&t?((i=this.portal)==null?void 0:i.normalizeUrl(`${e}/info/${t}?f=json`))??null:null}get userItemUrl(){var i,r,n;const e=(i=this.portal)==null?void 0:i.restUrl;if(!e)return null;const t=this.owner||((n=(r=this.portal)==null?void 0:r.user)==null?void 0:n.username);return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=Cr.getDefault()),i=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}};return e instanceof O$&&(e=e.rating),e==null||isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new O$({rating:e,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:le(this.applicationProxies),avgRating:this.avgRating,categories:le(this.categories),classification:le(this.classification),created:le(this.created),culture:this.culture,description:this.description,extent:le(this.extent),groupCategories:le(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:le(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:le(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:le(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:le(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new zp({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){var t;const e=this.toJSON();for(const i of["tags","typeKeywords","categories"])e[i]=(t=e[i])==null?void 0:t.join(", ");for(const i of["extent","classification"]){const r=e[i];r&&(e[i]=JSON.stringify(r))}return e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new O$(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},zp)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.applicationProxies&&!Object.hasOwn(e,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e==null?void 0:e.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?i.query.text=t:typeof t=="object"&&(i.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new ne("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new ne("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:i}=this;await t.signIn();const{copyResources:r,folder:n,tags:o,title:c}=e||{},y={method:"post",query:{copyPrivateResources:r==="all",folder:typeof n=="string"?n:n==null?void 0:n.id,includeResources:!!r,tags:o==null?void 0:o.join(","),title:c}},{itemId:v}=await t.request(`${i}/copy`,y);return new zp({id:v,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,i=e.filename,r={method:"post"};if(typeof t=="string")ih(t)?r.query={data:t}:r.query={url:Xs(t)},i!=null&&(r.query.filename=i);else{const n=new FormData;i!=null?n.append("file",t,i):n.append("file",t),r.body=n}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new ne("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:i}=await de(()=>import("./resourceUtils-D9hMAh-w.js"),[],import.meta.url);return i(this,e,t)}async addResource(e,t,i){const{addOrUpdateResources:r}=await de(()=>import("./resourceUtils-D9hMAh-w.js"),[],import.meta.url);return e.portalItem=this,await r(this,[{resource:e,content:t,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"add",i),e}async removeResource(e,t){const{removeResource:i}=await de(()=>import("./resourceUtils-D9hMAh-w.js"),[],import.meta.url);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new ne("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await de(()=>import("./resourceUtils-D9hMAh-w.js"),[],import.meta.url);return t(this,e)}resourceFromPath(e){return new j_e({portalItem:this,path:e})}toJSON(){var i,r;const e=this.extent,t={accessInformation:this.accessInformation,categories:le(this.categories),classification:le(this.classification),created:(i=this.created)==null?void 0:i.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(r=this.modified)==null?void 0:r.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:le(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:le(this.typeKeywords),url:this.url};return h0e(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new zp({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};m([w({type:["private","shared","org","public"]})],mt.prototype,"access",void 0),m([w()],mt.prototype,"accessInformation",void 0),m([w({type:String})],mt.prototype,"apiKey",void 0),m([w({json:{read:{source:"appProxies"}}})],mt.prototype,"applicationProxies",void 0),m([w()],mt.prototype,"avgRating",void 0),m([w()],mt.prototype,"categories",void 0),m([w()],mt.prototype,"classification",void 0),m([w({type:Date})],mt.prototype,"created",void 0),m([w()],mt.prototype,"culture",void 0),m([w()],mt.prototype,"description",void 0),m([w({readOnly:!0})],mt.prototype,"displayName",null),m([w({type:Ut})],mt.prototype,"extent",void 0),m([ke("extent")],mt.prototype,"readExtent",null),m([w()],mt.prototype,"groupCategories",void 0),m([w({readOnly:!0})],mt.prototype,"iconUrl",null),m([w()],mt.prototype,"id",void 0),m([w({readOnly:!0})],mt.prototype,"isLayer",null),m([w({type:Boolean,readOnly:!0})],mt.prototype,"isOrgItem",void 0),m([w()],mt.prototype,"itemControl",void 0),m([w({readOnly:!0})],mt.prototype,"itemPageUrl",null),m([w({readOnly:!0})],mt.prototype,"itemUrl",null),m([w()],mt.prototype,"licenseInfo",void 0),m([w({type:Date})],mt.prototype,"modified",void 0),m([w()],mt.prototype,"name",void 0),m([w()],mt.prototype,"numComments",void 0),m([w()],mt.prototype,"numRatings",void 0),m([w()],mt.prototype,"numViews",void 0),m([w()],mt.prototype,"owner",void 0),m([w()],mt.prototype,"ownerFolder",void 0),m([w({type:Cr})],mt.prototype,"portal",void 0),m([w()],mt.prototype,"screenshots",void 0),m([w()],mt.prototype,"size",void 0),m([w()],mt.prototype,"snippet",void 0),m([w()],mt.prototype,"sourceJSON",void 0),m([w({type:String})],mt.prototype,"sourceUrl",void 0),m([w({type:String})],mt.prototype,"spatialReference",void 0),m([w()],mt.prototype,"tags",void 0),m([w()],mt.prototype,"thumbnail",void 0),m([w({readOnly:!0})],mt.prototype,"thumbnailUrl",null),m([w()],mt.prototype,"title",void 0),m([w()],mt.prototype,"type",void 0),m([w()],mt.prototype,"typeKeywords",void 0),m([w({type:String,json:{read(e,t){var i;if(G_e.has(t.type)){const r=(i=this.portal)==null?void 0:i.restUrl;e||(e=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return e}}})],mt.prototype,"url",void 0),m([w({readOnly:!0})],mt.prototype,"userItemUrl",null),mt=zp=m([H("esri.portal.PortalItem")],mt);const Cu=mt,qee=Object.freeze(Object.defineProperty({__proto__:null,default:Cu},Symbol.toStringTag,{value:"Module"}));async function q_e(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,i=await _3("esri/t9n/basemaps");return i[e]||i[t]}const dg={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return jt("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return jt("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return jt("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return jt("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return jt("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return jt("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return jt("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return jt("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return jt("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return jt("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return jt("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return jt("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return jt("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return jt("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return jt("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return jt("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return jt("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return jt("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return jt("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return jt("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return jt("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return jt("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return jt("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return jt("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return jt("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return jt("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return jt("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}},H_e=new Set(["ar","bs","ca","hr","cs","da","nl","en","et","fi","fr","de","el","he","hu","id","it","ja","ko","lv","lt","nb","pl","ro","ru","sr","es","sv","th","tr","uk","vi"]);let Qu=class extends Ve{constructor(t){super(t),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps",this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;const t=ps().toLowerCase();switch(t){case"pt-br":return"pt-BR";case"pt-pt":return"pt-PT";case"zh-cn":return"zh-CN";case"zh-hk":return"zh-HK";case"zh-tw":return"zh-TW"}const i=_ve(t);return i==="pt"?"pt-BR":i&&H_e.has(i)?i:"global"}};m([w()],Qu.prototype,"apiKey",void 0),m([w()],Qu.prototype,"id",void 0),m([w()],Qu.prototype,"language",void 0),m([w()],Qu.prototype,"places",void 0),m([w()],Qu.prototype,"serviceUrl",void 0),m([w()],Qu.prototype,"worldview",void 0),Qu=m([H("esri.support.BasemapStyle")],Qu);const W_e=Qu;function J_e(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="feature"}function Z_e(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="subtype-group"&&"sublayers"in e}function Vp(e){return(e==null?void 0:e.type)==="subtype-sublayer"}const eKe={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function xA(e){const t=e==null?void 0:e.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function OI(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function tKe(e){var i;const t=e==null?void 0:e.type;return(t==="feature"||t==="subtype-group"||t==="oriented-imagery")&&((i=e.source)==null?void 0:i.type)==="feature-layer"}async function Hee(e,t){const i=_t==null?void 0:_t.findServerInfo(e);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const r=e.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const n=`${e.slice(0,r)}/rest/info`,o=t!=null?t.signal:null,{data:c}=await Et(n,{query:{f:"json"},responseType:"json",signal:o});return(c==null?void 0:c.owningSystemUrl)||null}function K_e(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function Wee(e){return K_e(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function Y_e(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function X_e(e){return!!Y_e(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const Q_e=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),eSe=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function tSe(e){return e.layerContainerType==="basemap"?Q_e:e.layerContainerType==="operational-layers"?eSe:null}function iSe(e,t){if(t.restrictedWebMapWriting){const i=tSe(t);return i==null||i.has(e.type)&&!OI(e)}return!0}function rSe(e,t){var i;if(t)if(OI(e)){const r=n3("featureCollection.layers",t),n=(i=r==null?void 0:r[0])==null?void 0:i.layerDefinition;n&&cz(e,n)}else e.type!=="group"&&cz(e,t)}function cz(e,t){"maxScale"in e&&(t.maxScale=y9(e.maxScale)??void 0),"minScale"in e&&(t.minScale=y9(e.minScale)??void 0)}function nSe(e,t){if(rSe(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=y9(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(OI(e)){const i=t.featureCollection;i&&(i.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function IA(e,t,i){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return i!=null&&i.messages&&i.messages.push(new ne("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(OI(e)&&!e.isTable)t=e.resourceInfo;else if(iSe(e,i)){const r={};return e.write(r,i)?r:null}return t!=null&&nSe(e,t=le(t)),t}var rw;let sSe=0,bo=rw=class extends Og(Aa){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+sSe++,this.baseLayers=new Oe,this.referenceLayers=new Oe;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&_e.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.addHandles([this.baseLayers.on("after-add",r=>t(r.item)),this.referenceLayers.on("after-add",r=>t(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(e=>{_e.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const i of e)i.destroy();const t=this.referenceLayers.toArray();for(const i of t)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=ci(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",ip(e,this._get("baseLayers")))}_writeBaseLayers(e,t,i){const r=[];e&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(n=>{const o=IA(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);o!=null&&r.push(o)}),this.referenceLayers.forEach(n=>{const o=IA(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);o!=null&&(n.type!=="scene"&&(o.isReference=!0),r.push(o))})),t.baseMapLayers=r}set referenceLayers(e){this._set("referenceLayers",ip(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return kI(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(t=>l9(t)?t.clone():t),referenceLayers:this.referenceLayers.map(t=>l9(t)?t.clone():t)};return this.loaded&&(e.loadStatus="loaded"),new rw({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){var i;return e=e||{},t!=null&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&((i=this.resourceInfo)!=null&&i.data.baseMapLayers)&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(r=>{const n=le(r);return n.url&&ku(n.url)&&(n.url=`https:${n.url}`),n.templateUrl&&ku(n.templateUrl)&&(n.templateUrl=`https:${n.templateUrl}`),n})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:i,style:r}=this;Gi(e);const n=[];if(t){const o=t.context?t.context.url:null;if(n.push(this._loadLayersFromJSON(t.data,o,e)),t.data.id&&!t.data.title){const c=t.data.id;n.push(q_e(c).then(y=>{y&&this.read({title:y},t.context)}))}}else i?n.push(this._loadFromItem(i,e)):r&&n.push(this._loadFromStylesService(r,e));await Promise.all(n)}async _loadLayersFromJSON(e,t,i){var v,_;const r=(v=this.resourceInfo)==null?void 0:v.context,n=((_=this.portalItem)==null?void 0:_.portal)||(r==null?void 0:r.portal)||null,o=aSe[(r==null?void 0:r.origin)||""]??"web-map",{populateOperationalLayers:c}=await de(async()=>{const{populateOperationalLayers:I}=await import("./layersCreator-Bk3Vrhvd.js");return{populateOperationalLayers:I}},__vite__mapDeps([120,121,122,123]),import.meta.url),y=[];if(Gi(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const I={context:{...r,origin:o,url:t,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},$=R=>o==="web-scene"&&R.layerType==="ArcGISSceneServiceLayer"||R.isReference,A=c(this.baseLayers,e.baseMapLayers.filter(R=>!$(R)),I);y.push(A);const k=c(this.referenceLayers,e.baseMapLayers.filter($),I);y.push(k)}await Promise.allSettled(y)}async _loadFromItem(e,t){const i=await e.load(t),r=await i.fetchData("json",t),n=cr(e.itemUrl??"");return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:oSe[e.type||""]??"web-map",portal:e.portal||Cr.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||Cr.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,t)}async _loadFromStylesService(e,t){const i=`${e.serviceUrl}/${e.id}`,r=(await Et(i,{query:{language:e.getLanguageParamValue(),places:e.places,worldview:e.worldview,token:e.apiKey},signal:t==null?void 0:t.signal})).data,n=cr(i);if(this._set("resourceInfo",{data:r.baseMap??{},context:{origin:"web-map",url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,n,t),e.apiKey)for(const o of[...this.baseLayers,...this.referenceLayers])"apiKey"in o&&(o.apiKey=e.apiKey)}static fromId(e){const t=dg[e];return t?t.itemId?new rw({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):rw.fromJSON(t,{origin:t.is3d?"web-scene":"web-map"}):null}};m([w({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,i,r){this._writeBaseLayers(e,t,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Oe}},writer(e,t,i,r){this._writeBaseLayers(e,t,r)}}}}}})],bo.prototype,"baseLayers",null),m([w({type:String,json:{origins:{"web-scene":{write:!0}}}})],bo.prototype,"id",void 0),m([w({type:Cu})],bo.prototype,"portalItem",void 0),m([w()],bo.prototype,"referenceLayers",null),m([w({readOnly:!0})],bo.prototype,"resourceInfo",void 0),m([w({type:rt})],bo.prototype,"spatialReference",void 0),m([w({type:W_e})],bo.prototype,"style",void 0),m([w()],bo.prototype,"thumbnailUrl",void 0),m([w({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],bo.prototype,"title",void 0),m([Le("title")],bo.prototype,"writeTitle",null),bo=rw=m([H("esri.Basemap")],bo);const oSe={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},aSe={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},F1=bo,lSe=Object.freeze(Object.defineProperty({__proto__:null,default:F1},Symbol.toStringTag,{value:"Module"})),K9={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function Jee(e){return!!K9[e]||!!K9[e.toLowerCase()]}function rR(e){return K9[e]??K9[e.toLowerCase()]}function uSe(e){return[...rR(e)]}function R$(e,t,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?e+(t-e)*r:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function Zee(e,t,i,r=1){const n=(e%360+360)%360/360,o=i<=.5?i*(t+1):i+t-i*t,c=2*i-o;return[Math.round(255*R$(c,o,n+1/3)),Math.round(255*R$(c,o,n)),Math.round(255*R$(c,o,n-1/3)),r]}function cSe(e){const t=e.length>5,i=t?8:4,r=(1<<i)-1,n=t?1:17,o=t?e.length===9:e.length===5;let c=+("0x"+e.slice(1));if(isNaN(c))return null;const y=[0,0,0,1];let v;return o&&(v=c&r,c>>=i,y[3]=n*v/255),v=c&r,c>>=i,y[2]=n*v,v=c&r,c>>=i,y[1]=n*v,v=c&r,c>>=i,y[0]=n*v,y}function F_(e){return co(XL(e),0,255)}function D_(e,t,i){return e=Number(e),isNaN(e)?i:e<t?t:e>i?i:e}function j_(e,t){const i=e.toString(16).padStart(2,"0");return t?i.slice(0,1):i}let y5=class qr{static blendColors(t,i,r,n=new qr){return n.r=Math.round(t.r+(i.r-t.r)*r),n.g=Math.round(t.g+(i.g-t.g)*r),n.b=Math.round(t.b+(i.b-t.b)*r),n.a=t.a+(i.a-t.a)*r,n._sanitize()}static fromRgb(t,i){const r=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(r){const n=r[2].split(/\s*,\s*/),o=r[1];if(o==="rgb"&&n.length===3||o==="rgba"&&n.length===4){const c=n[0];if(c.charAt(c.length-1)==="%"){const y=n.map(v=>2.56*parseFloat(v));return n.length===4&&(y[3]=parseFloat(n[3])),qr.fromArray(y,i)}return qr.fromArray(n.map(y=>parseFloat(y)),i)}if(o==="hsl"&&n.length===3||o==="hsla"&&n.length===4)return qr.fromArray(Zee(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])),i)}return null}static fromHex(t,i=new qr){if(t[0]!=="#"||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const r=parseInt(t.slice(1,2),16),n=parseInt(t.slice(2,3),16),o=parseInt(t.slice(3,4),16),c=t.length===5?15:parseInt(t.slice(4),16);return qr.fromArray([r+16*r,n+16*n,o+16*o,(c+16*c)/255],i)}case 7:case 9:{const r=parseInt(t.slice(1,3),16),n=parseInt(t.slice(3,5),16),o=parseInt(t.slice(5,7),16),c=t.length===7?255:parseInt(t.slice(7),16);return qr.fromArray([r,n,o,c/255],i)}default:return null}}static fromArray(t,i=new qr){return i._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(t,i){const r=Jee(t)?rR(t):null;return r&&qr.fromArray(r,i)||qr.fromRgb(t,i)||qr.fromHex(t,i)}static fromJSON(t){return t!=null?new qr([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?qr.fromString(t,this):Array.isArray(t)?qr.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof qr||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const i=(t==null?void 0:t.capitalize)??!1,r=(t==null?void 0:t.digits)??6,n=r===3||r===4,o=r===4||r===8,c=`#${j_(this.r,n)}${j_(this.g,n)}${j_(this.b,n)}${o?j_(Math.round(255*this.a),n):""}`;return i?c.toUpperCase():c}toCss(t=!1){const i=this.r+", "+this.g+", "+this.b;return t?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=qr.AlphaMode.ALWAYS){const i=F_(this.r),r=F_(this.g),n=F_(this.b);return t===qr.AlphaMode.ALWAYS||this.a!==1?[i,r,n,F_(255*this.a)]:[i,r,n]}clone(){return new qr(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(D_(this.r,0,255)),this.g=Math.round(D_(this.g,0,255)),this.b=Math.round(D_(this.b,0,255)),this.a=D_(this.a,0,1),this}_set(t,i,r,n){this.r=t,this.g=i,this.b=r,this.a=n}};y5.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(y5||(y5={}));const je=y5;function iKe(e){}function hSe(e){return()=>e}function He(e,t={}){const i=e instanceof ft?e:new ft(e,t),{alwaysWriteDefaults:r,default:n,ignoreUnknown:o=!0,name:c,nonNullable:y,readOnly:v=!1}=t;return w({type:o?i.apiValues:String,json:{type:i.jsonValues,default:n,name:c,read:!v&&{reader:i.read},write:{writer:i.write,alwaysWriteDefaults:r}},nonNullable:y,readOnly:v})}var TA;let m5=TA=class extends be{constructor(e){super(e),this.type="none"}clone(){return new TA({type:this.type})}};m([He({none:"none",stayAbove:"stay-above"})],m5.prototype,"type",void 0),m5=TA=m([H("esri.ground.NavigationConstraint")],m5);function RI(e){const t=XL(100*(1-e));return Math.max(0,Math.min(t,100))}function T2(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var $A;let ec=$A=class extends Og(Aa){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Oe;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&_e.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>t(r.item)),this.layers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(e=>{br(e)||_e.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)ci(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",ip(e,this._get("layers")))}writeLayers(e,t,i,r){const n=[];e&&(r={...r,layerContainerType:"ground"},e.forEach(o=>{if("write"in o){const c={};hSe(o)().write(c,r)&&n.push(c)}else r!=null&&r.messages&&r.messages.push(new ne("layer:unsupported",`Layers (${o.title}, ${o.id}) of type '${o.declaredClass}' cannot be persisted in the ground`,{layer:o}))})),t.layers=n}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return kI(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await de(()=>import("./ElevationQuery-CKmS-Odm.js"),[],import.meta.url);Gi(t);const r=new i,n=this.layers.filter(hz).toArray();return r.queryAll(n,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await de(()=>import("./ElevationQuery-CKmS-Odm.js"),[],import.meta.url);Gi(t);const r=new i,n=this.layers.filter(hz).toArray();return r.createSamplerAll(n,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:le(this.surfaceColor),navigationConstraint:le(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new $A({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}async _loadLayersFromJSON(e,t,i){const r=(t==null?void 0:t.origin)||"web-scene",n=(t==null?void 0:t.portal)||null,o=(t==null?void 0:t.url)||null,{populateOperationalLayers:c}=await de(async()=>{const{populateOperationalLayers:v}=await import("./layersCreator-Bk3Vrhvd.js");return{populateOperationalLayers:v}},__vite__mapDeps([120,121,122,123]),import.meta.url);Gi(i);const y=[];if(e.layers&&Array.isArray(e.layers)){const v={context:{origin:r,url:o,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};y.push(c(this.layers,e.layers,v))}await Promise.allSettled(y)}};function dSe(e){return e&&"createElevationSampler"in e}function hz(e){return e.type==="elevation"||dSe(e)}m([w({json:{read:!1}})],ec.prototype,"layers",null),m([Le("layers")],ec.prototype,"writeLayers",null),m([w({readOnly:!0})],ec.prototype,"resourceInfo",void 0),m([w({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Ct,read:{reader:T2,source:"transparency"},write:{writer:(e,t)=>{t.transparency=RI(e)},target:"transparency"}}})],ec.prototype,"opacity",void 0),m([w({type:je,json:{type:[Ct],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],ec.prototype,"surfaceColor",void 0),m([w({type:m5,json:{write:!0}})],ec.prototype,"navigationConstraint",void 0),ec=$A=m([H("esri.Ground")],ec);const Y9=ec,z_=new WeakMap;function nR(e){return!e.destroyed&&(z_.has(e)||e.addHandles([ge(()=>{const t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||nR(t))},t=>z_.set(e,t),Lo),ei(()=>z_.delete(e))]),z_.get(e))}function pSe(e){return typeof e=="object"&&e!=null&&"loaded"in e&&e.loaded===!0&&"type"in e}function fSe(e){var t,i;return!(!pSe(e)||!((i=(t=Wee(e))==null?void 0:t.operations)!=null&&i.supportsEditing)||"editingEnabled"in e&&!X_e(e)||nR(e))}const ySe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,mSe="screenUtils.toPt: input not recognized!",Kee=96;function Qi(e){return e?e/72*Kee:0}function po(e){return e?72*e/Kee:0}function zt(e){if(typeof e=="string"){const t=e.match(ySe);if(t){const i=Number(t[1]),r=t[3]&&t[3].toLowerCase(),n=e.charAt(0)==="-",o=r==="px"?po(i):i;return n?-o:o}return console.warn(mSe),null}return e}function gn(e=0,t=0){return{x:e,y:t}}function rKe(e){return e?gn(e.x,e.y):null}function nKe(e=0,t=0){return[e,t]}function sKe(e=0,t=0,i=0){return[e,t,i]}function oKe(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}function PI(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function gSe(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function vSe(e,t,i,r,n,o,c,y,v,_,I,$,A,k,R,N){const D=new Float32Array(16);return D[0]=e,D[1]=t,D[2]=i,D[3]=r,D[4]=n,D[5]=o,D[6]=c,D[7]=y,D[8]=v,D[9]=_,D[10]=I,D[11]=$,D[12]=A,D[13]=k,D[14]=R,D[15]=N,D}function wSe(e,t){return new Float32Array(e,t,16)}const bSe=PI();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:bSe,clone:gSe,create:PI,createView:wSe,fromValues:vSe},Symbol.toStringTag,{value:"Module"}));let sR=1e-6;function ks(){return sR}function _Se(e){sR=e}const NI=Math.random,SSe=Math.PI/180,xSe=180/Math.PI;function oR(e){return e*SSe}function ISe(e){return e*xSe}function TSe(e,t){return Math.abs(e-t)<=sR*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:NI,equals:TSe,getEpsilon:ks,setEpsilon:_Se,toDegree:ISe,toRadian:oR},Symbol.toStringTag,{value:"Module"}));function Yee(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function fp(e,t,i,r,n,o,c,y,v,_,I,$,A,k,R,N,D){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=o,e[5]=c,e[6]=y,e[7]=v,e[8]=_,e[9]=I,e[10]=$,e[11]=A,e[12]=k,e[13]=R,e[14]=N,e[15]=D,e}function FI(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function yp(e,t){if(e===t){const i=t[1],r=t[2],n=t[3],o=t[6],c=t[7],y=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=n,e[13]=c,e[14]=y}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function $Se(e,t){return Xee(e,t)||FI(e),e}function Xee(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],c=t[4],y=t[5],v=t[6],_=t[7],I=t[8],$=t[9],A=t[10],k=t[11],R=t[12],N=t[13],D=t[14],j=t[15],z=i*y-r*c,U=i*v-n*c,W=i*_-o*c,Q=r*v-n*y,K=r*_-o*y,ee=n*_-o*v,ie=I*N-$*R,ae=I*D-A*R,ue=I*j-k*R,Ie=$*D-A*N,Ae=$*j-k*N,Me=A*j-k*D;let fe=z*Me-U*Ae+W*Ie+Q*ue-K*ae+ee*ie;return fe?(fe=1/fe,e[0]=(y*Me-v*Ae+_*Ie)*fe,e[1]=(n*Ae-r*Me-o*Ie)*fe,e[2]=(N*ee-D*K+j*Q)*fe,e[3]=(A*K-$*ee-k*Q)*fe,e[4]=(v*ue-c*Me-_*ae)*fe,e[5]=(i*Me-n*ue+o*ae)*fe,e[6]=(D*W-R*ee-j*U)*fe,e[7]=(I*ee-A*W+k*U)*fe,e[8]=(c*Ae-y*ue+_*ie)*fe,e[9]=(r*ue-i*Ae-o*ie)*fe,e[10]=(R*K-N*W+j*z)*fe,e[11]=($*W-I*K-k*z)*fe,e[12]=(y*ae-c*Ie-v*ie)*fe,e[13]=(i*Ie-r*ae+n*ie)*fe,e[14]=(N*U-R*Q-D*z)*fe,e[15]=(I*Q-$*U+A*z)*fe,e):null}function ESe(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],c=t[4],y=t[5],v=t[6],_=t[7],I=t[8],$=t[9],A=t[10],k=t[11],R=t[12],N=t[13],D=t[14],j=t[15];return e[0]=y*(A*j-k*D)-$*(v*j-_*D)+N*(v*k-_*A),e[1]=-(r*(A*j-k*D)-$*(n*j-o*D)+N*(n*k-o*A)),e[2]=r*(v*j-_*D)-y*(n*j-o*D)+N*(n*_-o*v),e[3]=-(r*(v*k-_*A)-y*(n*k-o*A)+$*(n*_-o*v)),e[4]=-(c*(A*j-k*D)-I*(v*j-_*D)+R*(v*k-_*A)),e[5]=i*(A*j-k*D)-I*(n*j-o*D)+R*(n*k-o*A),e[6]=-(i*(v*j-_*D)-c*(n*j-o*D)+R*(n*_-o*v)),e[7]=i*(v*k-_*A)-c*(n*k-o*A)+I*(n*_-o*v),e[8]=c*($*j-k*N)-I*(y*j-_*N)+R*(y*k-_*$),e[9]=-(i*($*j-k*N)-I*(r*j-o*N)+R*(r*k-o*$)),e[10]=i*(y*j-_*N)-c*(r*j-o*N)+R*(r*_-o*y),e[11]=-(i*(y*k-_*$)-c*(r*k-o*$)+I*(r*_-o*y)),e[12]=-(c*($*D-A*N)-I*(y*D-v*N)+R*(y*A-v*$)),e[13]=i*($*D-A*N)-I*(r*D-n*N)+R*(r*A-n*$),e[14]=-(i*(y*D-v*N)-c*(r*D-n*N)+R*(r*v-n*y)),e[15]=i*(y*A-v*$)-c*(r*A-n*$)+I*(r*v-n*y),e}function MSe(e){const t=e[0],i=e[1],r=e[2],n=e[3],o=e[4],c=e[5],y=e[6],v=e[7],_=e[8],I=e[9],$=e[10],A=e[11],k=e[12],R=e[13],N=e[14],D=e[15];return(t*c-i*o)*($*D-A*N)-(t*y-r*o)*(I*D-A*R)+(t*v-n*o)*(I*N-$*R)+(i*y-r*c)*(_*D-A*k)-(i*v-n*c)*(_*N-$*k)+(r*v-n*y)*(_*R-I*k)}function Qee(e,t,i){const r=t[0],n=t[1],o=t[2],c=t[3],y=t[4],v=t[5],_=t[6],I=t[7],$=t[8],A=t[9],k=t[10],R=t[11],N=t[12],D=t[13],j=t[14],z=t[15];let U=i[0],W=i[1],Q=i[2],K=i[3];return e[0]=U*r+W*y+Q*$+K*N,e[1]=U*n+W*v+Q*A+K*D,e[2]=U*o+W*_+Q*k+K*j,e[3]=U*c+W*I+Q*R+K*z,U=i[4],W=i[5],Q=i[6],K=i[7],e[4]=U*r+W*y+Q*$+K*N,e[5]=U*n+W*v+Q*A+K*D,e[6]=U*o+W*_+Q*k+K*j,e[7]=U*c+W*I+Q*R+K*z,U=i[8],W=i[9],Q=i[10],K=i[11],e[8]=U*r+W*y+Q*$+K*N,e[9]=U*n+W*v+Q*A+K*D,e[10]=U*o+W*_+Q*k+K*j,e[11]=U*c+W*I+Q*R+K*z,U=i[12],W=i[13],Q=i[14],K=i[15],e[12]=U*r+W*y+Q*$+K*N,e[13]=U*n+W*v+Q*A+K*D,e[14]=U*o+W*_+Q*k+K*j,e[15]=U*c+W*I+Q*R+K*z,e}function ASe(e,t,i){const r=i[0],n=i[1],o=i[2];if(t===e)e[12]=t[0]*r+t[4]*n+t[8]*o+t[12],e[13]=t[1]*r+t[5]*n+t[9]*o+t[13],e[14]=t[2]*r+t[6]*n+t[10]*o+t[14],e[15]=t[3]*r+t[7]*n+t[11]*o+t[15];else{const c=t[0],y=t[1],v=t[2],_=t[3],I=t[4],$=t[5],A=t[6],k=t[7],R=t[8],N=t[9],D=t[10],j=t[11];e[0]=c,e[1]=y,e[2]=v,e[3]=_,e[4]=I,e[5]=$,e[6]=A,e[7]=k,e[8]=R,e[9]=N,e[10]=D,e[11]=j,e[12]=c*r+I*n+R*o+t[12],e[13]=y*r+$*n+N*o+t[13],e[14]=v*r+A*n+D*o+t[14],e[15]=_*r+k*n+j*o+t[15]}return e}function CSe(e,t,i){const r=i[0],n=i[1],o=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function kSe(e,t,i,r){let n=r[0],o=r[1],c=r[2],y=Math.sqrt(n*n+o*o+c*c);if(y<=ks())return void Yee(e,t);y=1/y,n*=y,o*=y,c*=y;const v=Math.sin(i),_=Math.cos(i),I=1-_,$=t[0],A=t[1],k=t[2],R=t[3],N=t[4],D=t[5],j=t[6],z=t[7],U=t[8],W=t[9],Q=t[10],K=t[11],ee=n*n*I+_,ie=o*n*I+c*v,ae=c*n*I-o*v,ue=n*o*I-c*v,Ie=o*o*I+_,Ae=c*o*I+n*v,Me=n*c*I+o*v,fe=o*c*I-n*v,se=c*c*I+_;e[0]=$*ee+N*ie+U*ae,e[1]=A*ee+D*ie+W*ae,e[2]=k*ee+j*ie+Q*ae,e[3]=R*ee+z*ie+K*ae,e[4]=$*ue+N*Ie+U*Ae,e[5]=A*ue+D*Ie+W*Ae,e[6]=k*ue+j*Ie+Q*Ae,e[7]=R*ue+z*Ie+K*Ae,e[8]=$*Me+N*fe+U*se,e[9]=A*Me+D*fe+W*se,e[10]=k*Me+j*fe+Q*se,e[11]=R*Me+z*fe+K*se,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15])}function LSe(e,t,i){const r=Math.sin(i),n=Math.cos(i),o=t[4],c=t[5],y=t[6],v=t[7],_=t[8],I=t[9],$=t[10],A=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*n+_*r,e[5]=c*n+I*r,e[6]=y*n+$*r,e[7]=v*n+A*r,e[8]=_*n-o*r,e[9]=I*n-c*r,e[10]=$*n-y*r,e[11]=A*n-v*r,e}function OSe(e,t,i){const r=Math.sin(i),n=Math.cos(i),o=t[0],c=t[1],y=t[2],v=t[3],_=t[8],I=t[9],$=t[10],A=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n-_*r,e[1]=c*n-I*r,e[2]=y*n-$*r,e[3]=v*n-A*r,e[8]=o*r+_*n,e[9]=c*r+I*n,e[10]=y*r+$*n,e[11]=v*r+A*n,e}function RSe(e,t,i){const r=Math.sin(i),n=Math.cos(i),o=t[0],c=t[1],y=t[2],v=t[3],_=t[4],I=t[5],$=t[6],A=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n+_*r,e[1]=c*n+I*r,e[2]=y*n+$*r,e[3]=v*n+A*r,e[4]=_*n-o*r,e[5]=I*n-c*r,e[6]=$*n-y*r,e[7]=A*n-v*r,e}function PSe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function NSe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function FSe(e,t,i){if(t===0)return FI(e);let r=i[0],n=i[1],o=i[2],c=Math.sqrt(r*r+n*n+o*o);if(c<=ks())return null;c=1/c,r*=c,n*=c,o*=c;const y=Math.sin(t),v=Math.cos(t),_=1-v;return e[0]=r*r*_+v,e[1]=n*r*_+o*y,e[2]=o*r*_-n*y,e[3]=0,e[4]=r*n*_-o*y,e[5]=n*n*_+v,e[6]=o*n*_+r*y,e[7]=0,e[8]=r*o*_+n*y,e[9]=n*o*_-r*y,e[10]=o*o*_+v,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function DSe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function jSe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function zSe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ete(e,t,i){const r=t[0],n=t[1],o=t[2],c=t[3],y=r+r,v=n+n,_=o+o,I=r*y,$=r*v,A=r*_,k=n*v,R=n*_,N=o*_,D=c*y,j=c*v,z=c*_;return e[0]=1-(k+N),e[1]=$+z,e[2]=A-j,e[3]=0,e[4]=$-z,e[5]=1-(I+N),e[6]=R+D,e[7]=0,e[8]=A+j,e[9]=R-D,e[10]=1-(I+k),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function VSe(e,t){const i=USe,r=-t[0],n=-t[1],o=-t[2],c=t[3],y=t[4],v=t[5],_=t[6],I=t[7],$=r*r+n*n+o*o+c*c;return $>0?(i[0]=2*(y*c+I*r+v*o-_*n)/$,i[1]=2*(v*c+I*n+_*r-y*o)/$,i[2]=2*(_*c+I*o+y*n-v*r)/$):(i[0]=2*(y*c+I*r+v*o-_*n),i[1]=2*(v*c+I*n+_*r-y*o),i[2]=2*(_*c+I*o+y*n-v*r)),ete(e,t,i),e}const USe=pp();function BSe(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function GSe(e,t){const i=t[0],r=t[1],n=t[2],o=t[4],c=t[5],y=t[6],v=t[8],_=t[9],I=t[10];return e[0]=Math.sqrt(i*i+r*r+n*n),e[1]=Math.sqrt(o*o+c*c+y*y),e[2]=Math.sqrt(v*v+_*_+I*I),e}function qSe(e,t){const i=t[0]+t[5]+t[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function HSe(e,t,i,r){const n=t[0],o=t[1],c=t[2],y=t[3],v=n+n,_=o+o,I=c+c,$=n*v,A=n*_,k=n*I,R=o*_,N=o*I,D=c*I,j=y*v,z=y*_,U=y*I,W=r[0],Q=r[1],K=r[2];return e[0]=(1-(R+D))*W,e[1]=(A+U)*W,e[2]=(k-z)*W,e[3]=0,e[4]=(A-U)*Q,e[5]=(1-($+D))*Q,e[6]=(N+j)*Q,e[7]=0,e[8]=(k+z)*K,e[9]=(N-j)*K,e[10]=(1-($+R))*K,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function WSe(e,t,i,r,n){const o=t[0],c=t[1],y=t[2],v=t[3],_=o+o,I=c+c,$=y+y,A=o*_,k=o*I,R=o*$,N=c*I,D=c*$,j=y*$,z=v*_,U=v*I,W=v*$,Q=r[0],K=r[1],ee=r[2],ie=n[0],ae=n[1],ue=n[2],Ie=(1-(N+j))*Q,Ae=(k+W)*Q,Me=(R-U)*Q,fe=(k-W)*K,se=(1-(A+j))*K,ye=(D+z)*K,he=(R+U)*ee,ce=(D-z)*ee,xe=(1-(A+N))*ee;return e[0]=Ie,e[1]=Ae,e[2]=Me,e[3]=0,e[4]=fe,e[5]=se,e[6]=ye,e[7]=0,e[8]=he,e[9]=ce,e[10]=xe,e[11]=0,e[12]=i[0]+ie-(Ie*ie+fe*ae+he*ue),e[13]=i[1]+ae-(Ae*ie+se*ae+ce*ue),e[14]=i[2]+ue-(Me*ie+ye*ae+xe*ue),e[15]=1,e}function JSe(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],c=i+i,y=r+r,v=n+n,_=i*c,I=r*c,$=r*y,A=n*c,k=n*y,R=n*v,N=o*c,D=o*y,j=o*v;return e[0]=1-$-R,e[1]=I+j,e[2]=A-D,e[3]=0,e[4]=I-j,e[5]=1-_-R,e[6]=k+N,e[7]=0,e[8]=A+D,e[9]=k-N,e[10]=1-_-$,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ZSe(e,t,i,r,n,o,c){const y=1/(i-t),v=1/(n-r),_=1/(o-c);return e[0]=2*o*y,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*v,e[6]=0,e[7]=0,e[8]=(i+t)*y,e[9]=(n+r)*v,e[10]=(c+o)*_,e[11]=-1,e[12]=0,e[13]=0,e[14]=c*o*2*_,e[15]=0,e}function KSe(e,t,i,r,n){const o=1/Math.tan(t/2);let c;return e[0]=o/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(c=1/(r-n),e[10]=(n+r)*c,e[14]=2*n*r*c):(e[10]=-1,e[14]=-2*r),e}function YSe(e,t,i,r){const n=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),c=Math.tan(t.leftDegrees*Math.PI/180),y=Math.tan(t.rightDegrees*Math.PI/180),v=2/(c+y),_=2/(n+o);return e[0]=v,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=_,e[6]=0,e[7]=0,e[8]=-(c-y)*v*.5,e[9]=(n-o)*_*.5,e[10]=r/(i-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*i/(i-r),e[15]=0,e}function XSe(e,t,i,r,n,o,c){const y=1/(t-i),v=1/(r-n),_=1/(o-c);return e[0]=-2*y,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*v,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*_,e[11]=0,e[12]=(t+i)*y,e[13]=(n+r)*v,e[14]=(c+o)*_,e[15]=1,e}function QSe(e,t,i,r){const n=t[0],o=t[1],c=t[2];let y=n-i[0],v=o-i[1],_=c-i[2];const I=ks();if(Math.abs(y)<I&&Math.abs(v)<I&&Math.abs(_)<I)return void FI(e);let $=1/Math.sqrt(y*y+v*v+_*_);y*=$,v*=$,_*=$;const A=r[0],k=r[1],R=r[2];let N=k*_-R*v,D=R*y-A*_,j=A*v-k*y;$=Math.sqrt(N*N+D*D+j*j),$?($=1/$,N*=$,D*=$,j*=$):(N=0,D=0,j=0);let z=v*j-_*D,U=_*N-y*j,W=y*D-v*N;$=Math.sqrt(z*z+U*U+W*W),$?($=1/$,z*=$,U*=$,W*=$):(z=0,U=0,W=0),e[0]=N,e[1]=z,e[2]=y,e[3]=0,e[4]=D,e[5]=U,e[6]=v,e[7]=0,e[8]=j,e[9]=W,e[10]=_,e[11]=0,e[12]=-(N*n+D*o+j*c),e[13]=-(z*n+U*o+W*c),e[14]=-(y*n+v*o+_*c),e[15]=1}function e5e(e,t,i,r){const n=t[0],o=t[1],c=t[2],y=r[0],v=r[1],_=r[2];let I=n-i[0],$=o-i[1],A=c-i[2],k=I*I+$*$+A*A;k>0&&(k=1/Math.sqrt(k),I*=k,$*=k,A*=k);let R=v*A-_*$,N=_*I-y*A,D=y*$-v*I;return k=R*R+N*N+D*D,k>0&&(k=1/Math.sqrt(k),R*=k,N*=k,D*=k),e[0]=R,e[1]=N,e[2]=D,e[3]=0,e[4]=$*D-A*N,e[5]=A*R-I*D,e[6]=I*N-$*R,e[7]=0,e[8]=I,e[9]=$,e[10]=A,e[11]=0,e[12]=n,e[13]=o,e[14]=c,e[15]=1,e}function t5e(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function i5e(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function r5e(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function tte(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function n5e(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function s5e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e[9]=t[9]+i[9]*r,e[10]=t[10]+i[10]*r,e[11]=t[11]+i[11]*r,e[12]=t[12]+i[12]*r,e[13]=t[13]+i[13]*r,e[14]=t[14]+i[14]*r,e[15]=t[15]+i[15]*r,e}function o5e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function a5e(e,t){if(e===t)return!0;const i=e[0],r=e[1],n=e[2],o=e[3],c=e[4],y=e[5],v=e[6],_=e[7],I=e[8],$=e[9],A=e[10],k=e[11],R=e[12],N=e[13],D=e[14],j=e[15],z=t[0],U=t[1],W=t[2],Q=t[3],K=t[4],ee=t[5],ie=t[6],ae=t[7],ue=t[8],Ie=t[9],Ae=t[10],Me=t[11],fe=t[12],se=t[13],ye=t[14],he=t[15],ce=ks();return Math.abs(i-z)<=ce*Math.max(1,Math.abs(i),Math.abs(z))&&Math.abs(r-U)<=ce*Math.max(1,Math.abs(r),Math.abs(U))&&Math.abs(n-W)<=ce*Math.max(1,Math.abs(n),Math.abs(W))&&Math.abs(o-Q)<=ce*Math.max(1,Math.abs(o),Math.abs(Q))&&Math.abs(c-K)<=ce*Math.max(1,Math.abs(c),Math.abs(K))&&Math.abs(y-ee)<=ce*Math.max(1,Math.abs(y),Math.abs(ee))&&Math.abs(v-ie)<=ce*Math.max(1,Math.abs(v),Math.abs(ie))&&Math.abs(_-ae)<=ce*Math.max(1,Math.abs(_),Math.abs(ae))&&Math.abs(I-ue)<=ce*Math.max(1,Math.abs(I),Math.abs(ue))&&Math.abs($-Ie)<=ce*Math.max(1,Math.abs($),Math.abs(Ie))&&Math.abs(A-Ae)<=ce*Math.max(1,Math.abs(A),Math.abs(Ae))&&Math.abs(k-Me)<=ce*Math.max(1,Math.abs(k),Math.abs(Me))&&Math.abs(R-fe)<=ce*Math.max(1,Math.abs(R),Math.abs(fe))&&Math.abs(N-se)<=ce*Math.max(1,Math.abs(N),Math.abs(se))&&Math.abs(D-ye)<=ce*Math.max(1,Math.abs(D),Math.abs(ye))&&Math.abs(j-he)<=ce*Math.max(1,Math.abs(j),Math.abs(he))}function l5e(e){const t=ks(),i=e[0],r=e[1],n=e[2],o=e[4],c=e[5],y=e[6],v=e[8],_=e[9],I=e[10];return Math.abs(1-(i*i+o*o+v*v))<=t&&Math.abs(1-(r*r+c*c+_*_))<=t&&Math.abs(1-(n*n+y*y+I*I))<=t}function u5e(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const c5e=Qee,h5e=tte;Object.freeze(Object.defineProperty({__proto__:null,add:r5e,adjoint:ESe,copy:Yee,determinant:MSe,equals:a5e,exactEquals:o5e,frob:i5e,fromQuat:JSe,fromQuat2:VSe,fromRotation:FSe,fromRotationTranslation:ete,fromRotationTranslationScale:HSe,fromRotationTranslationScaleOrigin:WSe,fromScaling:NSe,fromTranslation:PSe,fromXRotation:DSe,fromYRotation:jSe,fromZRotation:zSe,frustum:ZSe,getRotation:qSe,getScaling:GSe,getTranslation:BSe,hasIdentityRotation:u5e,identity:FI,invert:Xee,invertOrIdentity:$Se,isOrthoNormal:l5e,lookAt:QSe,mul:c5e,multiply:Qee,multiplyScalar:n5e,multiplyScalarAndAdd:s5e,ortho:XSe,perspective:KSe,perspectiveFromFieldOfView:YSe,rotate:kSe,rotateX:LSe,rotateY:OSe,rotateZ:RSe,scale:CSe,set:fp,str:t5e,sub:h5e,subtract:tte,targetTo:e5e,translate:ASe,transpose:yp},Symbol.toStringTag,{value:"Module"}));const d5e=(e,t)=>{const i=fp(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return yp(i,i)},p5e=(e,t)=>{const i=fp(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return yp(i,i)},f5e=(e,t)=>{const i=1-t,r=fp(e,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return yp(r,r)},y5e=(e,t)=>{const i=Math.sin(t*Math.PI/180),r=Math.cos(t*Math.PI/180),n=fp(e,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return yp(n,n)},m5e=(e,t)=>{const i=1-2*t,r=fp(e,i,0,0,t,0,i,0,t,0,0,i,t,0,0,0,1);return yp(r,r)},g5e=(e,t)=>{const i=fp(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return yp(i,i)},v5e=(e,t)=>{const i=1-t,r=fp(e,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return yp(r,r)};let ite=class rte{constructor(t,i,r){this.strength=t,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(t,i,r){this.strength=Zs(t.strength,i.strength,r),this.radius=Zs(t.radius,i.radius,r),this.threshold=Zs(t.threshold,i.threshold,r)}clone(){return new rte(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:Eb(this.radius),strength:this.strength,threshold:this.threshold}}},nte=class ste{constructor(t){this.radius=t,this.type="blur"}interpolate(t,i,r){this.radius=Math.round(Zs(t.radius,i.radius,r))}clone(){return new ste(this.radius)}toJSON(){return{type:"blur",radius:Eb(this.radius)}}},EA=class ote{constructor(t,i){this.type=t,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.amount=Zs(t.amount,i.amount,r),this._updateMatrix()}clone(){return new ote(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||PI();switch(this.type){case"brightness":this._colorMatrix=d5e(t,this.amount);break;case"contrast":this._colorMatrix=p5e(t,this.amount);break;case"grayscale":this._colorMatrix=f5e(t,this.amount);break;case"invert":this._colorMatrix=m5e(t,this.amount);break;case"saturate":this._colorMatrix=g5e(t,this.amount);break;case"sepia":this._colorMatrix=v5e(t,this.amount)}}},ate=class lte{constructor(t,i,r,n){this.offsetX=t,this.offsetY=i,this.blurRadius=r,this.color=n,this.type="drop-shadow"}interpolate(t,i,r){this.offsetX=Zs(t.offsetX,i.offsetX,r),this.offsetY=Zs(t.offsetY,i.offsetY,r),this.blurRadius=Zs(t.blurRadius,i.blurRadius,r),this.color[0]=Math.round(Zs(t.color[0],i.color[0],r)),this.color[1]=Math.round(Zs(t.color[1],i.color[1],r)),this.color[2]=Math.round(Zs(t.color[2],i.color[2],r)),this.color[3]=Zs(t.color[3],i.color[3],r)}clone(){return new lte(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:Eb(this.offsetX),yoffset:Eb(this.offsetY),blurRadius:Eb(this.blurRadius),color:t}}},ute=class cte{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.angle=Zs(t.angle,i.angle,r),this._updateMatrix()}clone(){return new cte(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||PI();this._colorMatrix=y5e(t,this.angle)}},hte=class dte{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,i,r){this.amount=Zs(t.amount,i.amount,r)}clone(){return new dte(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Zs(e,t,i){return e+(t-e)*i}function Eb(e){return Math.round(1e3*po(e))/1e3}function w5e(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new EA(e.type,0);case"saturate":case"brightness":case"contrast":return new EA(e.type,1);case"opacity":return new hte(1);case"hue-rotate":return new ute(0);case"blur":return new nte(0);case"drop-shadow":return new ate(0,0,0,[...rR("transparent")]);case"bloom":return new ite(0,0,1)}}function pte(e,t){const i=e.length>t.length?e:t;return(e.length>t.length?t:e).every((r,n)=>r.type===i[n].type)}function fte(e,t){const i=e.length>t.length?e:t,r=e.length>t.length?t:e;for(let n=r.length;n<i.length;n++)r.push(w5e(i[n]))}function b5e(e){const t=e[0];return!!t&&"type"in t}function _5e(e,t){return JSON.stringify(e??null)===JSON.stringify(t??null)}const P$=()=>_e.getLogger("esri.support.basemapUtils");function S5e(){return{}}function yte(e){for(const t in e){const i=e[t];ci(i),delete e[t]}}function g5(e,t){let i;if(typeof e=="string"){const r=e in dg,n=!r&&e.includes("/");if(!r&&!n){if(qt.apiKey)P$().warn(`Unable to find basemap definition for: ${e}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const o=Object.entries(dg).filter(([c,y])=>y.classic||y.is3d).map(([c])=>`"${c}"`).sort().join(", ");P$().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${o}`)}return null}t&&(i=t[e]),i||(i=r?F1.fromId(e):new F1({style:{id:e}}),t&&(t[e]=i))}else i=qi(F1,e);return i!=null&&i.destroyed&&(P$().warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function x5e(e){let t=null;const i=E5e(e),r=!(i!=null&&i.baseLayers.length);for(const n in dg){const o=C5e(i,mte(dg[n]),{mustMatchReferences:r});if(o==="equal"){t=n;break}o==="base-layers-equal"&&(t=n)}return t}function aKe(e){return!!(e!=null&&e.baseLayers.concat(e.referenceLayers).some(I5e))}function I5e(e){if(dz(e.url))return!0;if(e.type==="vector-tile")for(const t in e.sourceNameToSource){const i=e.sourceNameToSource[t];if(dz(i==null?void 0:i.sourceUrl))return!0}return!1}function T5e(e,t){var o;if(t==null||e==null)return{spatialReference:null,updating:!1};if(t.loadStatus==="not-loaded")return t.load(),{spatialReference:null,updating:!0};if(t.spatialReference)return{spatialReference:t.spatialReference,updating:!1};if(t.baseLayers.length===0)return{spatialReference:null,updating:!1};const i=t.baseLayers.at(0);switch(i.loadStatus){case"not-loaded":i.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const r=(("supportedSpatialReferences"in i?i.supportedSpatialReferences:null)||["tileInfo"in i?(o=i.tileInfo)==null?void 0:o.spatialReference:i.spatialReference]).filter(Boolean),n=e.spatialReference;return n?{spatialReference:r.find(c=>n.equals(c))??r[0]??null,updating:!1}:{spatialReference:r[0],updating:!1}}const $5e=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function dz(e){if(!e)return!1;const t=new Gd(Xs(e));return!!t.authority&&$5e.test(t.authority)}function E5e(e){return e?!e.loaded&&e.resourceInfo?mte(e.resourceInfo.data):{baseLayers:pz(e.baseLayers),referenceLayers:pz(e.referenceLayers)}:null}function pz(e){return(Oe.isCollection(e)?e.toArray():e).map(M5e)}function M5e(e){var t,i;return{type:e.type,effect:"effect"in e?e.effect:void 0,url:gte("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl||""),minScale:"minScale"in e&&e.minScale!=null?e.minScale:0,maxScale:"maxScale"in e&&e.maxScale!=null?e.maxScale:0,opacity:e.opacity!=null?e.opacity:1,visible:e.visible==null||!!e.visible,sublayers:e.type!=="map-image"&&e.type!=="wms"||e.sublayers==null||(t=e.sublayers)==null?void 0:t.map(r=>({id:r.id,visible:r.visible})),activeLayerId:e.type==="wmts"?(i=e.activeLayer)==null?void 0:i.id:void 0}}function fz(e){return e.isReference||e.layerType==="ArcGISSceneServiceLayer"}function mte(e){return e?{baseLayers:yz((e.baseMapLayers??[]).filter(t=>!fz(t))),referenceLayers:yz((e.baseMapLayers??[]).filter(t=>fz(t)))}:null}function yz(e){return e.map(t=>A5e(t))}function A5e(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;case"ArcGISSceneServiceLayer":t="scene";break;default:t="unknown"}return{type:t,effect:e.effect,url:gte(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:e.minScale??0,maxScale:e.maxScale??0,opacity:e.opacity??1,visible:e.visibility==null||!!e.visibility,sublayers:void 0,activeLayerId:void 0}}function C5e(e,t,i){return e!=null!=(t!=null)?"not-equal":!e||!t?"equal":mz(e.baseLayers,t.baseLayers)?mz(e.referenceLayers,t.referenceLayers)?"equal":i.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal"}function mz(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!k5e(e[i],t[i]))return!1;return!0}function k5e(e,t){if(e.type!==t.type||e.url!==t.url||e.minScale!==t.minScale||e.maxScale!==t.maxScale||e.visible!==t.visible||e.opacity!==t.opacity||!_5e(e.effect,t.effect))return!1;if(e.activeLayerId!=null||t.activeLayerId!=null)return e.activeLayerId===t.activeLayerId;if(e.sublayers!=null||t.sublayers!=null){if(e.sublayers==null||t.sublayers==null||e.sublayers.length!==t.sublayers.length)return!1;for(let i=0;i<e.sublayers.length;i++){const r=e.sublayers.at(i),n=t.sublayers.at(i);if((r==null?void 0:r.id)!==(n==null?void 0:n.id)||(r==null?void 0:r.visible)!==(n==null?void 0:n.visible))return!1}}return!0}function gte(e){return e?Ia(e).replace(/^\s*https?:/i,"").toLowerCase():""}function vte(e){if(!e)return null;const{thumbnailUrl:t}=e;if(t)return t;const i=x5e(e);return i?dg[i].thumbnailUrl:p2(e.baseLayers,L5e)}function L5e(e){var t;return"portalItem"in e?(t=e.portalItem)==null?void 0:t.thumbnailUrl:void 0}function O5e(e){return new v2({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const i=[];return"tables"in t&&i.push(t.tables),"layers"in t&&i.push(t.layers),i},itemFilterFunction:t=>{const i=t.parent;return!!i&&"tables"in i&&i.tables.includes(t)}})}function N$(e){for(const t of e.values())t==null||t.destroy();e.clear()}const gz={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function R5e(e){let t=null;if(typeof e=="string")if(e in gz){const i=gz[e];t=new Y9({resourceInfo:{data:{layers:[i]}}})}else _e.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=qi(Y9,e);return t}let wte=0;const Cl=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+wte++})}};return t=m([H("esri.core.Identifiable")],t),t},aR=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:wte++})}};return t=m([H("esri.core.Identifiable.NumericIdentifiable")],t),t};let vz=class extends Cl(class{}){};vz=m([H("esri.core.Identifiable")],vz);async function P5e(e){var r;const t="portalItem"in e?e:{portalItem:e},{fromItem:i}=await de(async()=>{const{fromItem:n}=await import("./portalLayers-oPluhZvJ.js").then(o=>o.p);return{fromItem:n}},__vite__mapDeps([121,122,123]),import.meta.url);try{return await i(t)}catch(n){const o=t==null?void 0:t.portalItem,c=(o==null?void 0:o.id)||"unset",y=((r=o==null?void 0:o.portal)==null?void 0:r.url)||qt.portalUrl;throw _e.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+y+"', id: '"+c+"')",n),n}}const MA={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function F$(e,t,i,r=Uo){const n=new ho(BO(r)),o=Ge.fromJSDate(e,{zone:n}),c=i==="decades"||i==="centuries"?"year":_te(i);return i==="decades"&&(t*=10),i==="centuries"&&(t*=100),o.plus({[c]:t}).toJSDate()}function uKe(e,t,i="milliseconds"){const r=e.getTime(),n=bte(t,i,"milliseconds");return new Date(r+n)}function wz(e,t,i=Uo){const r=new ho(BO(i)),n=Ge.fromJSDate(e,{zone:r});if(t==="decades"||t==="centuries"){const c=n.startOf("year"),{year:y}=c,v=y-y%(t==="decades"?10:100);return c.set({year:v}).toJSDate()}const o=_te(t);return n.startOf(o).toJSDate()}function bte(e,t,i){return e===0?0:e*MA[t]/MA[i]}function _te(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Qo;let Ao=Qo=class extends be{static get allTime(){return bz}static get empty(){return N5e}static fromArray(e){return new Qo({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(Qo.allTime)}get isEmpty(){return this.equals(Qo.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=(e==null?void 0:e.getTime())??null}clone(){return new Qo({end:this.end,start:this.start})}equals(e){var o,c,y,v;if(!e)return!1;const t=((o=this.start)==null?void 0:o.getTime())??this.start,i=((c=this.end)==null?void 0:c.getTime())??this.end,r=((y=e.start)==null?void 0:y.getTime())??e.start,n=((v=e.end)==null?void 0:v.getTime())??e.end;return t===r&&i===n}expandTo(e,t=Uo){if(this.isEmpty||this.isAllTime)return this.clone();let i=this.start;i&&(i=wz(i,e,t));let r=this.end;if(r){const n=wz(r,e,t);r=r.getTime()===n.getTime()?n:F$(n,1,e,t)}return new Qo({start:i,end:r})}intersection(e){var y,v,_,I;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Qo.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=((y=this.start)==null?void 0:y.getTime())??-1/0,i=((v=this.end)==null?void 0:v.getTime())??1/0,r=((_=e.start)==null?void 0:_.getTime())??-1/0,n=((I=e.end)==null?void 0:I.getTime())??1/0;let o,c;return r>=t&&r<=i?o=r:t>=r&&t<=n&&(o=t),i>=r&&i<=n?c=i:n>=t&&n<=i&&(c=n),o==null||c==null||isNaN(o)||isNaN(c)?Qo.empty:new Qo({start:o===-1/0?null:new Date(o),end:c===1/0?null:new Date(c)})}offset(e,t,i=Uo){if(this.isEmpty||this.isAllTime)return this.clone();const r=new Qo,{start:n,end:o}=this;return n!=null&&(r.start=F$(n,e,t,i)),o!=null&&(r.end=F$(o,e,t,i)),r}toArray(){var e,t;return this.isEmpty?[void 0,void 0]:[((e=this.start)==null?void 0:e.getTime())??null,((t=this.end)==null?void 0:t.getTime())??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return bz.clone();const t=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Qo({start:t,end:i})}};m([w({type:Date,json:{write:{allowNull:!0}}})],Ao.prototype,"end",void 0),m([ke("end")],Ao.prototype,"readEnd",null),m([Le("end")],Ao.prototype,"writeEnd",null),m([w({readOnly:!0,json:{read:!1}})],Ao.prototype,"isAllTime",null),m([w({readOnly:!0,json:{read:!1}})],Ao.prototype,"isEmpty",null),m([w({type:Date,json:{write:{allowNull:!0}}})],Ao.prototype,"start",void 0),m([ke("start")],Ao.prototype,"readStart",null),m([Le("start")],Ao.prototype,"writeStart",null),Ao=Qo=m([H("esri.time.TimeExtent")],Ao);const rn=Ao,bz=new Ao,N5e=new Ao({start:void 0,end:void 0});let F5e=0,pr=class extends qo.EventedMixin(Cl(Aa)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Ut(-180,-90,180,90,rt.WGS84),this.id=Date.now().toString(16)+"-layer-"+F5e++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=rt.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(t){const i=typeof t=="string"?{url:t}:t;return(await de(async()=>{const{fromUrl:r}=await import("./arcgisLayers-DYwWSvSq.js");return{fromUrl:r}},__vite__mapDeps([124,122,123]),import.meta.url)).fromUrl(i)}static fromPortalItem(t){return P5e(t)}initialize(){this.when().catch(t=>{br(t)||_e.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){const t=this.parent;if(t){const i=this;"layers"in t&&t.layers.includes(i)?t.layers.remove(i):"tables"in t&&t.tables.includes(i)?t.tables.remove(i):"baseLayers"in t&&t.baseLayers.includes(i)?t.baseLayers.remove(i):"referenceLayers"in t&&t.referenceLayers.includes(i)&&t.referenceLayers.remove(i),this._set("parent",null)}}get effectiveVisible(){let t=this.visible;const i=this.parent;return t&&i&&"effectiveVisible"in i&&t&&(t=i.effectiveVisible),t}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return cr(this.url)}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await Et(t,{query:{f:"json"},responseType:"json"})).data;throw new ne("layer:no-attribution-data","Layer does not have attribution data")}};m([w({type:String})],pr.prototype,"attributionDataUrl",void 0),m([w({readOnly:!0})],pr.prototype,"effectiveVisible",null),m([w({type:Ut})],pr.prototype,"fullExtent",void 0),m([w({readOnly:!0})],pr.prototype,"hasAttributionData",null),m([w({type:String,clonable:!1})],pr.prototype,"id",void 0),m([w({type:Boolean,nonNullable:!0})],pr.prototype,"legendEnabled",void 0),m([w({type:["show","hide","hide-children"]})],pr.prototype,"listMode",void 0),m([w({type:Number,range:{min:0,max:1},nonNullable:!0})],pr.prototype,"opacity",void 0),m([w({clonable:!1})],pr.prototype,"parent",void 0),m([w({readOnly:!0})],pr.prototype,"parsedUrl",null),m([w({type:Boolean,readOnly:!0})],pr.prototype,"persistenceEnabled",void 0),m([w({type:Boolean})],pr.prototype,"popupEnabled",void 0),m([w({type:Boolean})],pr.prototype,"attributionVisible",void 0),m([w({type:rt})],pr.prototype,"spatialReference",void 0),m([w({type:String})],pr.prototype,"title",void 0),m([w({readOnly:!0,json:{read:!1}})],pr.prototype,"type",void 0),m([w()],pr.prototype,"url",void 0),m([w({type:rn})],pr.prototype,"visibilityTimeExtent",void 0),m([w({type:Boolean,nonNullable:!0})],pr.prototype,"visible",void 0),pr=m([H("esri.layers.Layer")],pr);const $2=pr;function AA(e,t,i){let r,n;if(e)for(let o=0,c=e.length;o<c;o++){if(r=e.at(o),(r==null?void 0:r[t])===i)return r;if((r==null?void 0:r.type)==="group"&&(n=AA(r.layers,t,i),n))return n}}const D5e=e=>{let t=class extends e{constructor(...i){super(...i),this.layers=new Oe;const r=c=>{c.parent&&"remove"in c.parent&&c.parent.remove(c)},n=c=>{c.parent=this,this.layerAdded(c),c.type!=="elevation"&&c.type!=="base-elevation"||_e.getLogger(this).error(`Layer 'title:${c.title}, id:${c.id}' of type '${c.type}' is not supported as an operational layer and will therefore be ignored.`)},o=c=>{c.parent=null,this.layerRemoved(c)};this.addHandles([this.layers.on("before-add",c=>{if(c.item===this)return c.preventDefault(),void _e.getLogger(this).error("#add()","Cannot add layer to itself.");r(c.item)}),this.layers.on("after-add",c=>n(c.item)),this.layers.on("after-remove",c=>o(c.item))])}destroy(){const i=this.layers.toArray();for(const r of i)r.destroy();this.layers.destroy()}set layers(i){this._set("layers",ip(i,this._get("layers")))}add(i,r){const n=this.layers;if(r=n.getNextIndex(r),i instanceof $2){const o=i;o.parent===this?this.reorder(o,r):n.add(o,r)}else Fu(i)?i.then(o=>{this.destroyed||this.add(o,r)}):_e.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const n=this.layers;let o=n.getNextIndex(r);i.slice().forEach(c=>{c.parent!==this?(n.add(c,o),o+=1):this.reorder(c,o)})}findLayerById(i){return AA(this.layers,"id",i)}findLayerByUid(i){return AA(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return m([w()],t.prototype,"layers",null),t=m([H("esri.support.LayersMixin")],t),t};function CA(e,t,i){if(e)for(let r=0,n=e.length;r<n;r++){const o=e.at(r);if(o[t]===i)return o;if((o==null?void 0:o.type)==="group"){const c=CA(o.tables,t,i);if(c)return c}}}const j5e=e=>{let t=class extends e{constructor(...i){super(...i),this.tables=new Oe,this.addHandles([this.tables.on("after-add",r=>{const n=r.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,n.type!=="feature"&&_e.getLogger(this).error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})])}destroy(){const i=this.tables.toArray();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",ip(i,this._get("tables")))}findTableById(i){return CA(this.tables,"id",i)}findTableByUid(i){return CA(this.tables,"uid",i)}};return m([w()],t.prototype,"tables",null),t=m([H("esri.support.TablesMixin")],t),t};let za=class extends j5e(D5e(qo.EventedMixin(Ve))){constructor(t){super(t),this.allLayers=new v2({getCollections:()=>{var i,r,n;return[(i=this.basemap)==null?void 0:i.baseLayers,(r=this.ground)==null?void 0:r.layers,this.layers,(n=this.basemap)==null?void 0:n.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=O5e(this),this.basemap=null,this.editableLayers=new v2({getCollections:()=>[this.allLayers],itemFilterFunction:fSe}),this.ground=new Y9,this._basemapCache=S5e()}destroy(){yte(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=ci(this.basemap),ci(this.ground),this._set("ground",null)}castBasemap(t){return g5(t,this._basemapCache)}castGround(t){return R5e(t)??this._get("ground")}findLayerById(t){return this.allLayers.find(i=>i.id===t)}findTableById(t){return this.allTables.find(i=>i.id===t)}};m([w({readOnly:!0,dependsOn:[]})],za.prototype,"allLayers",void 0),m([w({readOnly:!0})],za.prototype,"allTables",void 0),m([w({type:F1,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],za.prototype,"basemap",void 0),m([wt("basemap")],za.prototype,"castBasemap",null),m([w({readOnly:!0})],za.prototype,"editableLayers",void 0),m([w({type:Y9,nonNullable:!0})],za.prototype,"ground",void 0),m([wt("ground")],za.prototype,"castGround",null),m([w()],za.prototype,"undoRedo",void 0),za=m([H("esri.Map")],za);const Ste=za;let Mb=class extends Oe{constructor(t){super(t),this.addHandles([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}_ownAll(){for(const t of this.items)this._own(t)}_releaseAll(){for(const t of this.items)this._release(t)}_createNewInstance(t){return this.itemType?new(Oe.ofType(this.itemType.Type))(t):new Oe(t)}};function kA(e,t){return{type:e,cast:Vee,set(i){const r=ip(i,this._get(t),e);r.owner=this,this._set(t,r)}}}m([w()],Mb.prototype,"owner",null),Mb=m([H("esri.core.support.OwningCollection")],Mb);var nw;const X9=nn()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),xte=X9.jsonValues.slice();s0e(xte,"orthometric");const Ab=nn()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Va=nw=class extends be{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,i){return X9.write(e,t,i)}readHeightModel(e,t,i){return X9.read(e)||(i!=null&&i.messages&&i.messages.push(z5e(e,{context:i})),null)}readHeightUnit(e,t,i){return Ab.read(e)||(i!=null&&i.messages&&i.messages.push(_z(e,{context:i})),null)}readHeightUnitService(e,t,i){return WY(e)||Ab.read(e)||(i!=null&&i.messages&&i.messages.push(_z(e,{context:i})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new nw({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const i=JY(t);return new nw({heightModel:e.heightModel,heightUnit:i??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new nw;return t.read(e,{origin:"web-scene"}),t}};function _z(e,t){return new zo("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function z5e(e,t){return new zo("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}m([w({type:X9.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:xte,default:"ellipsoidal"}}}})],Va.prototype,"heightModel",void 0),m([Le("web-scene","heightModel")],Va.prototype,"writeHeightModel",null),m([ke(["web-scene","service"],"heightModel")],Va.prototype,"readHeightModel",null),m([w({type:Ab.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Ab.jsonValues,write:Ab.write}}}})],Va.prototype,"heightUnit",void 0),m([ke("web-scene","heightUnit")],Va.prototype,"readHeightUnit",null),m([ke("service","heightUnit")],Va.prototype,"readHeightUnitService",null),m([w({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Va.prototype,"vertCRS",void 0),m([ke("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Va.prototype,"readVertCRS",null),Va=nw=m([H("esri.geometry.HeightModelInfo")],Va);const DI=Va;let Q9=class extends Mb{constructor(t){super(t),this.addHandles(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(_e.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};Q9=m([H("esri.support.AnalysesCollection")],Q9);async function lR(e,t){const{WhereClause:i}=await de(()=>import("./WhereClause-Da2PkydK.js").then(r=>r.W),[],import.meta.url);return i.create(e,{fieldsIndex:t})}function Ite(e,t){return e==="1=1"?t??e:t==="1=1"?e??t:e!=null&&e!==""?t!=null&&t!==""?`(${e}) AND (${t})`:e:t}function uR(e){return typeof e=="string"||e instanceof String}var D1;(function(e){e.HM="HH:mm",e.HMS="HH:mm:ss",e.HMS_MS="HH:mm:ss.SSS"})(D1||(D1={}));const V5e=[D1.HMS_MS,D1.HMS,D1.HM,"TT"],U5e="yyyy-MM-dd";D1.HMS;function Sz(e){if(!e||!uR(e))return null;const t=Ge.fromFormat(e,U5e);return t.isValid?t:null}function xz(e){return e&&uR(e)?p2(V5e,t=>{const i=Ge.fromFormat(e,t);return i.isValid?i:null})??null:null}function Iz(e){if(!e||!uR(e))return null;const t=Ge.fromISO(e);return t.isValid?t:null}var pg;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(pg||(pg={}));const B5e=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function G5e(e){return e!=null&&B5e.has(e.type)}function Tte(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function $te(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function Ete(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function q5e(e,t,i){const r=e==null?void 0:e.domain;if(!r)return null;switch(r.type){case"range":{const{min:n,max:o}=H5e(e);if(n!=null&&+t<n||o!=null&&+t>o)return pg.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(r.codedValues==null||r.codedValues.every(n=>n==null||n.code!==t))return pg.INVALID_CODED_VALUE}return null}function H5e(e,t){const i=e==null?void 0:e.domain;if(!i||i.type!=="range")return;const r="range"in i?i.range[0]:i.minValue,n="range"in i?i.range[1]:i.maxValue,o=G5e(e);return Tte(e)||Ete(e)||$te(e)?{...W5e(e,n,r),isInteger:o}:{min:r!=null&&typeof r=="number"?r:null,max:n!=null&&typeof n=="number"?n:null,rawMin:r,rawMax:n,isInteger:o}}function W5e(e,t,i){var r,n,o,c,y,v;return Tte(e)?{min:(r=Sz(i))==null?void 0:r.toMillis(),max:(n=Sz(t))==null?void 0:n.toMillis(),rawMin:i,rawMax:t}:Ete(e)?{min:(o=xz(i))==null?void 0:o.toMillis(),max:(c=xz(t))==null?void 0:c.toMillis(),rawMin:i,rawMax:t}:$te(e)?{min:(y=Iz(i))==null?void 0:y.toMillis(),max:(v=Iz(t))==null?void 0:v.toMillis(),rawMin:i,rawMax:t}:{max:null,min:null}}const J5e=()=>_e.getLogger("esri.support.arcadeOnDemand");let D$;function eh(){return D$||(D$=(async()=>{const e=await de(()=>import("./arcadeUtils-Dgeq8uIM.js").then(t=>t.i),__vite__mapDeps([125,126,127,19,10]),import.meta.url);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),D$}const Z5e=(e,t,i)=>Mte.create(e,t,i,null,["$feature","$view"],[]),K5e=(e,t,i,r)=>Mte.create(e,t,i,r,["$feature","$view"],[]);let Mte=class Ate{constructor(t,i,r,n,o,c,y){this.services=null,this.script=t,this.evaluate=n;const v=Array.isArray(c)?c:c==null?void 0:c.fields;this.fields=v??[],this._syntaxTree=r,this._arcade=i,this._arcadeFeature=o,this._spatialReference=y,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,i,r,n,o,c){const{arcade:y,Feature:v,Dictionary:_}=await eh(),I=i instanceof rt?i:rt.fromJSON(i);let $;try{$=y.parseScript(t,c)}catch(ie){return J5e().error(new ne("arcade-bad-expression","Failed to parse arcade script",{script:t,error:ie})),null}const A=o.reduce((ie,ae)=>({...ie,[ae]:null}),{});let k=null;n!=null&&(k=new _(n),k.immutable=!0,A.$config=null);const R=y.scriptUsesGeometryEngine($),N=R&&y.enableGeometrySupport(),D=y.scriptUsesFeatureSet($)&&y.enableFeatureSetSupport(),j=y.scriptIsAsync($),z=j&&y.enableAsyncSupport(),U={vars:A,spatialReference:I,useAsync:!!z};await Promise.all([N,D,z]);const W=new Set;await y.loadDependentModules(W,$,null,j,R);const Q=new _;Q.immutable=!1,Q.setField("scale",0);const K=y.compileScript($,U),ee=(ie,ae)=>{var Ie;const ue=(Ie=ie.$view)==null?void 0:Ie.timeZone;return"$view"in ie&&ie.$view&&(Q.setField("scale",typeof ie.$view=="object"&&"scale"in ie.$view?ie.$view.scale:void 0),ie.$view=Q),k&&(ie.$config=k),K({vars:ie,spatialReference:I,services:ae,timeZone:ue})};return new Ate(t,y,$,ee,new v,r,I)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const Y5e=/^([0-9_])/,X5e=/[^a-z0-9_\u0080-\uffff]+/gi;function Q5e(e){return e==null?null:e.trim().replaceAll(X5e,"_").replace(Y5e,"F$1")||null}const exe=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],txe=["field","normalizationField"];function Tz(e,t){if(e!=null&&t!=null){for(const i of Array.isArray(e)?e:[e])if($z(exe,i,t),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)$z(txe,r,t)}}function $z(e,t,i){if(e)for(const r of e){const n=n3(r,t),o=n&&typeof n!="function"&&i.get(n);o&&Qr(r,o.name,t)}}function Cte(e,t){var i;if(e!=null&&((i=t==null?void 0:t.fields)!=null&&i.length))if("startField"in e){const r=t.get(e.startField),n=t.get(e.endField);e.startField=(r==null?void 0:r.name)??null,e.endField=(n==null?void 0:n.name)??null}else{const r=t.get(e.startTimeField),n=t.get(e.endTimeField);e.startTimeField=(r==null?void 0:r.name)??null,e.endTimeField=(n==null?void 0:n.name)??null}}const j$=new Set;function jI(e,t){return e&&t?(j$.clear(),R0(j$,e,t),Array.from(j$).sort()):[]}function R0(e,t,i){var r;if(i)if((r=t==null?void 0:t.fields)!=null&&r.length)if(i.includes("*"))for(const{name:n}of t.fields)e.add(n);else for(const n of i)Ls(e,t,n);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const n of i)n!=null&&e.add(n)}}function Ls(e,t,i){if(typeof i=="string")if(t){const r=t.get(i);r&&e.add(r.name)}else e.add(i)}function fKe(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map(i=>i.name):t}function yKe(e,t,i=1){if(!t||!e)return[];if(t.includes("*"))return["*"];const r=jI(e,t);return r.length/e.fields.length>=i?["*"]:r}async function gs(e,t,i){var o;if(!i)return;const{arcadeUtils:r}=await eh(),n=r.extractFieldNames(i,(o=t==null?void 0:t.fields)==null?void 0:o.map(c=>c.name));for(const c of n)Ls(e,t,c)}async function kte(e,t,i){if(i&&i!=="1=1"){const r=await lR(i,t);if(!r.isStandardized)throw new ne("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});R0(e,t,r.fieldNames)}}function ixe({displayField:e,fields:t}){return e||(t!=null&&t.length?z$(t,"name-or-title")||z$(t,"unique-identifier")||z$(t,"type-or-category")||rxe(t):null)}function rxe(e){for(const t of e){if(!(t!=null&&t.name))continue;const i=t.name.toLowerCase();if(i.includes("name")||i.includes("title"))return t.name}return null}function z$(e,t){for(const i of e)if(i!=null&&i.valueType&&i.valueType===t)return i.name;return null}async function mKe(e,t){var r;if(!t)return;const i=(r=t.elevationInfo)==null?void 0:r.featureExpressionInfo;return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}function nxe(e,t,i){i.onStatisticExpression?gs(e,t,i.onStatisticExpression.expression):e.add(i.onStatisticField)}async function gKe(e,t,i){if(!t||!i||!("fields"in i))return;const r=[],n=i.popupTemplate;r.push(sxe(e,t,n)),i.fields&&r.push(...i.fields.map(async o=>nxe(e,t.fieldsIndex,o))),await Promise.all(r)}async function sxe(e,t,i){const r=[];i!=null&&i.expressionInfos&&r.push(...i.expressionInfos.map(o=>gs(e,t.fieldsIndex,o.expression)));const n=i==null?void 0:i.content;if(Array.isArray(n))for(const o of n)o.type==="expression"&&o.expressionInfo&&r.push(gs(e,t.fieldsIndex,o.expressionInfo.expression));await Promise.all(r)}async function vKe(e,t,i){t&&(t.timeInfo&&(i!=null&&i.timeExtent)&&R0(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&R0(e,t.fieldsIndex,[t.floorInfo.floorField]),(i==null?void 0:i.where)!=null&&await kte(e,t.fieldsIndex,i.where))}async function wKe(e,t,i){t&&i&&await Promise.all(i.map(r=>oxe(e,t,r)))}async function oxe(e,t,i){t&&i&&(i.valueExpression?await gs(e,t.fieldsIndex,i.valueExpression):i.field&&Ls(e,t.fieldsIndex,i.field))}function bKe(e){return e?jI(e.fieldsIndex,Lte(e)):[]}function axe(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?jI(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}const lxe=new Set(["oid","global-id","guid"]),uxe=new Set(["oid","global-id"]),cxe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function hxe(e){const t=new Set;Ote(e).forEach(r=>t.add(r)),axe(e).forEach(r=>t.add(r.toLowerCase()));const i=e&&"infoFor3D"in e?e.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(r=>t.add(r.toLowerCase())),Object.values(i.transformFieldRoles).forEach(r=>t.add(r.toLowerCase()))),Array.from(t)}function Lte(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:i,creatorField:r,editDateField:n,editorField:o}=t;return[i,r,n,o].filter(Boolean)}function Ote(e){return Lte(e).map(t=>t.toLowerCase())}function dxe(e,t){var i;return e.editable&&!lxe.has(e.type)&&!Ote(t).includes(((i=e.name)==null?void 0:i.toLowerCase())??"")}function pxe(e,t){var r;const i=((r=e.name)==null?void 0:r.toLowerCase())??"";return!((t==null?void 0:t.objectIdField)!=null&&i===t.objectIdField.toLowerCase()||(t==null?void 0:t.globalIdField)!=null&&i===t.globalIdField.toLowerCase()||hxe(t).includes(i)||uxe.has(e.type)||cxe.some(n=>n.test(i)))}async function _Ke(e,t){const{labelingInfo:i,fieldsIndex:r}=t;i!=null&&i.length&&await Promise.all(i.map(n=>fxe(e,r,n)))}async function fxe(e,t,i){if(!i)return;const r=i.getLabelExpression(),n=i.where;if(r.type==="arcade")await gs(e,t,r.expression);else{const o=r.expression.match(/{[^}]*}/g);o&&o.forEach(c=>{Ls(e,t,c.slice(1,-1))})}await kte(e,t,n)}function yxe(e){const t=e.defaultValue;return t!==void 0&&Nte(e,t)?t:e.nullable?null:void 0}function SKe(e){const t=typeof e=="string"?{type:e}:e;return Dte(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function Rte(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function mxe(e){return e===null||Rte(e)}function gxe(e){return e===null||Number.isInteger(e)}function Pte(e){return e!=null&&typeof e=="string"}function vxe(e){return e===null||Pte(e)}function wxe(){return!0}function Nte(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=e.nullable?gxe:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?mxe:Rte;break;case"string":case"esriFieldTypeString":i=e.nullable?vxe:Pte;break;default:i=wxe}return arguments.length===1?i:i(t)}const bxe=["integer","small-integer","big-integer"],_xe=["single","double"],Sxe=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],xxe=["esriFieldTypeSingle","esriFieldTypeDouble"],Fte=new Set([...bxe,...Sxe]),Ixe=new Set([..._xe,...xxe]),Txe=JK(Fte,Ixe);function $xe(e){return e!=null&&Fte.has(e.type)}function cR(e){return e!=null&&Txe.has(e.type)}function Dte(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function jte(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function Exe(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function Mxe(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function hR(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function Ez(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function Mz(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function xKe(e,t){return Axe(e,t)===null}var e4,t4;function IKe(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function Axe(e,t){return e==null||e.nullable&&t===null?null:cR(e)&&!Cxe(e.type,Number(t))?e4.OUT_OF_RANGE:Nte(e,t)?e.domain?q5e(e,t):null:t4.INVALID_TYPE}function Cxe(e,t){const i=typeof e=="string"?zte(e):e;if(!i)return!1;const r=i.min,n=i.max;return i.isInteger?Number.isInteger(t)&&t>=r&&t<=n:t>=r&&t<=n}function zte(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return kxe;case"esriFieldTypeInteger":case"integer":return Lxe;case"esriFieldTypeBigInteger":case"big-integer":return Oxe;case"esriFieldTypeSingle":case"single":return Rxe;case"esriFieldTypeDouble":case"double":return Pxe}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(e4||(e4={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(t4||(t4={}));const kxe={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},Lxe={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},Oxe={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},Rxe={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},Pxe={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function TKe(e,t,i){switch(e){case pg.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case pg.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case t4.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case e4.OUT_OF_RANGE:{const{min:r,max:n}=zte(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${r} to ${n}`}}}function Nxe(e,t){return!Fxe(e,t,null)}function Fxe(e,t,i){if(!(t!=null&&t.attributes)||!e)return!0;const r=new Set(Object.keys(t.attributes));let n=!1;for(const o of e)if(!r.has(o)&&(n=!0,i==null))break;return n}function LA(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}async function Dxe(e,t){const i=new Set;return e!=null&&e.collectRequiredFields&&await e.collectRequiredFields(i,t),Array.from(i).sort()}function Vte(e){const t=e==null?void 0:e.match(/{[^}]+}/g);return t?t.map(i=>i.slice(1,-1).split(":")[0].trim()):[]}let v5=class extends be{constructor(t){super(t),this.type=null}};m([w({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],v5.prototype,"type",void 0),v5=m([H("esri.popup.content.Content")],v5);const oh=v5;var OA;let Up=OA=class extends oh{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new OA({description:this.description,displayType:this.displayType,title:this.title})}};m([w({type:String,json:{write:!0}})],Up.prototype,"description",void 0),m([w({type:["auto","preview","list"],json:{write:!0}})],Up.prototype,"displayType",void 0),m([w({type:String,json:{write:!0}})],Up.prototype,"title",void 0),m([w({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Up.prototype,"type",void 0),Up=OA=m([H("esri.popup.content.AttachmentsContent")],Up);const fg=Up;var RA;let Bp=RA=class extends oh{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new RA({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?le(this.outFields):null})}};m([w()],Bp.prototype,"creator",void 0),m([w()],Bp.prototype,"destroyer",void 0),m([w()],Bp.prototype,"outFields",void 0),m([w({type:["custom"],readOnly:!0})],Bp.prototype,"type",void 0),Bp=RA=m([H("esri.popup.content.CustomContent")],Bp);const jxe=Bp;var PA;let Vy=PA=class extends be{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new PA({title:this.title,expression:this.expression})}};m([w({type:String,json:{write:!0}})],Vy.prototype,"title",void 0),m([w({type:String,json:{write:!0}})],Vy.prototype,"expression",void 0),m([w({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Vy.prototype,"returnType",void 0),Vy=PA=m([H("esri.popup.ElementExpressionInfo")],Vy);const Ute=Vy;var NA;let sw=NA=class extends oh{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new NA({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};m([w({type:Ute,json:{write:!0}})],sw.prototype,"expressionInfo",void 0),m([w({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],sw.prototype,"type",void 0),sw=NA=m([H("esri.popup.content.ExpressionContent")],sw);const zI=sw;let Uy=class extends St(be){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};m([He(Obe)],Uy.prototype,"dateFormat",void 0),m([w({type:Boolean,json:{write:!0}})],Uy.prototype,"digitSeparator",void 0),m([w({type:Ct,json:{write:!0}})],Uy.prototype,"places",void 0),Uy=m([H("esri.popup.support.FieldInfoFormat")],Uy);const w5=Uy;var FA;let Ua=FA=class extends be{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var e;return new FA({fieldName:this.fieldName,format:(e=this.format)==null?void 0:e.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};m([w({type:String,json:{write:!0}})],Ua.prototype,"fieldName",void 0),m([w({type:w5,json:{write:!0}})],Ua.prototype,"format",void 0),m([w({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Ua.prototype,"isEditable",void 0),m([w({type:String,json:{write:!0}})],Ua.prototype,"label",void 0),m([He(new ft({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Ua.prototype,"stringFieldOption",void 0),m([w({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Ua.prototype,"statisticType",void 0),m([w({type:String,json:{write:!0}})],Ua.prototype,"tooltip",void 0),m([w({type:Boolean,json:{write:!0}})],Ua.prototype,"visible",void 0),Ua=FA=m([H("esri.popup.FieldInfo")],Ua);const T3=Ua;var DA;let tc=DA=class extends oh{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(i=>i.toJSON())}clone(){return new DA(le({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};m([w({type:Object,json:{write:!0}})],tc.prototype,"attributes",void 0),m([w({type:String,json:{write:!0}})],tc.prototype,"description",void 0),m([w({type:[T3]})],tc.prototype,"fieldInfos",void 0),m([Le("fieldInfos")],tc.prototype,"writeFieldInfos",null),m([w({type:String,json:{write:!0}})],tc.prototype,"title",void 0),m([w({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],tc.prototype,"type",void 0),tc=DA=m([H("esri.popup.content.FieldsContent")],tc);const P0=tc;let Gp=class extends be{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};m([w({type:String,json:{write:!0}})],Gp.prototype,"altText",void 0),m([w({type:String,json:{write:!0}})],Gp.prototype,"caption",void 0),m([w({type:String,json:{write:!0}})],Gp.prototype,"title",void 0),m([w({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Gp.prototype,"type",void 0),Gp=m([H("esri.popup.content.mixins.MediaInfo")],Gp);const dR=Gp;var jA;let qp=jA=class extends Ve{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var e;return new jA({color:(e=this.color)==null?void 0:e.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};m([w()],qp.prototype,"color",void 0),m([w()],qp.prototype,"fieldName",void 0),m([w()],qp.prototype,"tooltip",void 0),m([w()],qp.prototype,"value",void 0),qp=jA=m([H("esri.popup.content.support.ChartMediaInfoValueSeries")],qp);const Bte=qp;var zA;let Lh=zA=class extends be{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new zA({colors:le(this.colors),fields:le(this.fields),normalizeField:this.normalizeField,series:le(this.series),tooltipField:this.tooltipField})}};m([w({type:[je],json:{type:[[Ct]],write:!0}})],Lh.prototype,"colors",void 0),m([w({type:[String],json:{write:!0}})],Lh.prototype,"fields",void 0),m([w({type:String,json:{write:!0}})],Lh.prototype,"normalizeField",void 0),m([w({type:[Bte],json:{read:!1}})],Lh.prototype,"series",void 0),m([w({type:String,json:{write:!0}})],Lh.prototype,"tooltipField",void 0),Lh=zA=m([H("esri.popup.content.support.ChartMediaInfoValue")],Lh);const zxe=Lh;let ow=class extends dR{constructor(t){super(t),this.type=null,this.value=void 0}};m([w({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],ow.prototype,"type",void 0),m([w({type:zxe,json:{write:!0}})],ow.prototype,"value",void 0),ow=m([H("esri.popup.content.mixins.ChartMediaInfo")],ow);const VI=ow,UI=nn()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var VA;let b5=VA=class extends VI{constructor(e){super(e),this.type="bar-chart"}clone(){var e;return new VA({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};m([w({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:UI.write}})],b5.prototype,"type",void 0),b5=VA=m([H("esri.popup.content.BarChartMediaInfo")],b5);const Gte=b5;var UA;let _5=UA=class extends VI{constructor(e){super(e),this.type="column-chart"}clone(){var e;return new UA({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};m([w({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:UI.write}})],_5.prototype,"type",void 0),_5=UA=m([H("esri.popup.content.ColumnChartMediaInfo")],_5);const qte=_5;var BA;let aw=BA=class extends be{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new BA({linkURL:this.linkURL,sourceURL:this.sourceURL})}};m([w({type:String,json:{write:!0}})],aw.prototype,"linkURL",void 0),m([w({type:String,json:{write:!0}})],aw.prototype,"sourceURL",void 0),aw=BA=m([H("esri.popup.content.support.ImageMediaInfoValue")],aw);const Vxe=aw;var GA;let By=GA=class extends dR{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var e;return new GA({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(e=this.value)==null?void 0:e.clone()})}};m([w({type:Number,json:{write:!0}})],By.prototype,"refreshInterval",void 0),m([w({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],By.prototype,"type",void 0),m([w({type:Vxe,json:{write:!0}})],By.prototype,"value",void 0),By=GA=m([H("esri.popup.content.ImageMediaInfo")],By);const Hte=By;var qA;let S5=qA=class extends VI{constructor(e){super(e),this.type="line-chart"}clone(){var e;return new qA({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};m([w({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:UI.write}})],S5.prototype,"type",void 0),S5=qA=m([H("esri.popup.content.LineChartMediaInfo")],S5);const Wte=S5;var HA;let x5=HA=class extends VI{constructor(e){super(e),this.type="pie-chart"}clone(){var e;return new HA({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};m([w({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:UI.write}})],x5.prototype,"type",void 0),x5=HA=m([H("esri.popup.content.PieChartMediaInfo")],x5);const Jte=x5,WA={base:dR,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":Gte,"column-chart":qte,"line-chart":Wte,"pie-chart":Jte,image:Hte}};var JA;let Ba=JA=class extends oh{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?Hte.fromJSON(t):t.type==="barchart"?Gte.fromJSON(t):t.type==="columnchart"?qte.fromJSON(t):t.type==="linechart"?Wte.fromJSON(t):t.type==="piechart"?Jte.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(i=>i.toJSON())}clone(){return new JA(le({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};m([w()],Ba.prototype,"activeMediaInfoIndex",void 0),m([w({type:Object,json:{write:!0}})],Ba.prototype,"attributes",void 0),m([w({type:String,json:{write:!0}})],Ba.prototype,"description",void 0),m([w({types:[WA]})],Ba.prototype,"mediaInfos",void 0),m([ke("mediaInfos")],Ba.prototype,"readMediaInfos",null),m([Le("mediaInfos")],Ba.prototype,"writeMediaInfos",null),m([w({type:String,json:{write:!0}})],Ba.prototype,"title",void 0),m([w({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],Ba.prototype,"type",void 0),Ba=JA=m([H("esri.popup.content.MediaContent")],Ba);const yg=Ba;var ZA;let lw=ZA=class extends be{constructor(e){super(e),this.field=null,this.order=null}clone(){return new ZA({field:this.field,order:this.order})}};m([w({type:String,json:{write:!0}})],lw.prototype,"field",void 0),m([w({type:["asc","desc"],json:{write:!0}})],lw.prototype,"order",void 0),lw=ZA=m([H("esri.popup.support.RelatedRecordsInfoFieldOrder")],lw);const pR=lw;let Gl=class extends St(oh){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};m([w({type:String,json:{write:!0}})],Gl.prototype,"description",void 0),m([w({type:Number,json:{type:Ct,write:!0}})],Gl.prototype,"displayCount",void 0),m([w({type:["list"],json:{write:!0}})],Gl.prototype,"displayType",void 0),m([w({type:[pR],json:{write:!0}})],Gl.prototype,"orderByFields",void 0),m([w({type:Number,json:{type:Ct,write:!0}})],Gl.prototype,"relationshipId",void 0),m([w({type:String,json:{write:!0}})],Gl.prototype,"title",void 0),m([w({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],Gl.prototype,"type",void 0),Gl=m([H("esri.popup.content.RelationshipContent")],Gl);const E2=Gl;var KA;let uw=KA=class extends oh{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new KA({text:this.text})}};m([w({type:String,json:{write:!0}})],uw.prototype,"text",void 0),m([w({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],uw.prototype,"type",void 0),uw=KA=m([H("esri.popup.content.TextContent")],uw);const N0=uw;let ql=class extends St(be){constructor(t){super(t),this.title=null,this.description=null,this.type=null,this.open=!1,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};m([w({type:String,json:{write:!0}})],ql.prototype,"title",void 0),m([w({type:String,json:{write:!0}})],ql.prototype,"description",void 0),m([w({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],ql.prototype,"type",void 0),m([w({type:Boolean,json:{read:!1}})],ql.prototype,"open",void 0),m([w({type:Number,json:{type:Ct,write:!0}})],ql.prototype,"associatedNetworkSourceId",void 0),m([w({type:Number,json:{type:Ct,write:!0}})],ql.prototype,"associatedAssetGroup",void 0),m([w({type:Number,json:{type:Ct,write:!0}})],ql.prototype,"associatedAssetType",void 0),ql=m([H("esri.popup.support.UtilityNetworkAssociationType")],ql);const Uxe=ql;let Hp=class extends St(oh){constructor(t){super(t),this.description=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};m([w({type:String,json:{write:!0}})],Hp.prototype,"description",void 0),m([w({type:String,json:{write:!0}})],Hp.prototype,"title",void 0),m([w({type:[Uxe],json:{write:!0}})],Hp.prototype,"associationTypes",void 0),m([He({utilityNetworkAssociations:"utility-network-associations"})],Hp.prototype,"type",void 0),Hp=m([H("esri.popup.content.UtilityNetworkAssociationsContent")],Hp);const fR=Hp,Bxe={base:null,key:"type",typeMap:{attachment:fg,media:yg,text:N0,expression:zI,field:P0,relationship:E2,utilityNetworkAssociations:fR}},Gxe={base:null,key:"type",typeMap:{attachment:fg,media:yg,text:N0,expression:zI,field:P0,relationship:E2}};var YA;let Wp=YA=class extends be{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new YA({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};m([w({type:String,json:{write:!0}})],Wp.prototype,"name",void 0),m([w({type:String,json:{write:!0}})],Wp.prototype,"title",void 0),m([w({type:String,json:{write:!0}})],Wp.prototype,"expression",void 0),m([w({type:["string","number"],json:{write:!0}})],Wp.prototype,"returnType",void 0),Wp=YA=m([H("esri.popup.ExpressionInfo")],Wp);const Zte=Wp;var XA;let cw=XA=class extends be{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new XA({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};m([w({type:Boolean,json:{write:!0}})],cw.prototype,"returnTopmostRaster",void 0),m([w({type:Boolean,json:{write:!0}})],cw.prototype,"showNoDataRecords",void 0),cw=XA=m([H("esri.popup.LayerOptions")],cw);const qxe=cw;var QA;let hw=QA=class extends be{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new QA({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?le(this.orderByFields):null})}};m([w({type:Boolean,json:{write:!0}})],hw.prototype,"showRelatedRecords",void 0),m([w({type:[pR],json:{write:!0}})],hw.prototype,"orderByFields",void 0),hw=QA=m([H("esri.popup.RelatedRecordsInfo")],hw);const Az=hw;var eC;let ea=eC=class extends Cl(Ve){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new eC({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};m([w()],ea.prototype,"active",void 0),m([w()],ea.prototype,"className",void 0),m([w()],ea.prototype,"disabled",void 0),m([w()],ea.prototype,"icon",void 0),m([w()],ea.prototype,"id",void 0),m([w()],ea.prototype,"indicator",void 0),m([w()],ea.prototype,"title",void 0),m([w()],ea.prototype,"type",void 0),m([w()],ea.prototype,"visible",void 0),ea=eC=m([H("esri.support.actions.ActionBase")],ea);const Bg=ea;var tC;let I5=tC=class extends Bg{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new tC({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};m([w()],I5.prototype,"image",void 0),I5=tC=m([H("esri.support.actions.ActionButton")],I5);const Z0=I5;var iC;let dw=iC=class extends Bg{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new iC({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};m([w()],dw.prototype,"image",void 0),m([w()],dw.prototype,"value",void 0),dw=iC=m([H("esri.support.actions.ActionToggle")],dw);const BI=dw,Iv="relationships/",Cz="expression/",Hxe=Oe.ofType({key:"type",defaultKeyValue:"button",base:Bg,typeMap:{button:Z0,toggle:BI}}),Wxe={base:oh,key:"type",typeMap:{media:yg,custom:jxe,text:N0,attachments:fg,fields:P0,expression:zI,relationship:E2,utilityNetworkAssociations:fR}},Kte=new Set(["attachments","fields","media","text","expression","relationship"]),Jxe=new Set([...Kte,"utility-network-associations"]);let Rr=class extends St(be){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map(i=>Ma(Wxe,i)):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||Fu(t)?t:(_e.getLogger(this).error("content error","unsupported content value",{value:t}),null)}readContent(t,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeWebSceneContent(t,i,r,n){this._writePopupTemplateContent(t,i,n)}writeWebMapContent(t,i,r,n){this._writePopupTemplateContent(t,i,n)}writeFieldInfos(t,i,r,n){const{content:o}=this,c=Array.isArray(o)?o:null;if(t){const y=c?c.filter(_=>_.type==="fields"):[],v=y.length&&y.every(_=>{var I;return(I=_.fieldInfos)==null?void 0:I.length});i.fieldInfos=t.filter(Boolean).map(_=>{const I=_.toJSON(n);return v&&(I.visible=!1),I})}if(c)for(const y of c)y.type==="fields"&&this._writeFieldsContent(y,i)}writeLayerOptions(t,i,r,n){i[r]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(n)}writeTitle(t,i){i.title=t||""}async collectRequiredFields(t,i){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(t,i,[...r,...this._getContentExpressionInfos(this.content,r)]),R0(t,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const i=new Set;return await this.collectRequiredFields(i,t),[...i].sort()}_writePopupTemplateContent(t,i,r){typeof t!="string"?Array.isArray(t)&&(i.popupElements=t.filter(n=>(r==null?void 0:r.origin)==="web-scene"?Kte.has(n.type):Jxe.has(n.type)).map(n=>n==null?void 0:n.toJSON(r)),i.popupElements.forEach(n=>{n.type==="attachments"?this._writeAttachmentContent(i):n.type==="media"?this._writeMediaContent(n,i):n.type==="text"?this._writeTextContent(n,i):n.type==="relationship"&&this._writeRelationshipContent(n,i)})):i.description=t}_writeFieldsContent(t,i){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const r=le(t.fieldInfos);Array.isArray(i.fieldInfos)?r.forEach(n=>{const o=i.fieldInfos.find(c=>{var y,v;return((y=c.fieldName)==null?void 0:y.toLowerCase())===((v=n.fieldName)==null?void 0:v.toLowerCase())});o?o.visible=!0:i.fieldInfos.push(n)}):i.fieldInfos=r}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,i){var o,c;const r=((o=t.orderByFields)==null?void 0:o.map(y=>this._toFieldOrderJSON(y,t.relationshipId)))||[],n=[...((c=i.relatedRecordsInfo)==null?void 0:c.orderByFields)||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...(n==null?void 0:n.length)&&{orderByFields:n}}}_writeTextContent(t,i){!i.description&&t.text&&(i.description=t.text)}_writeMediaContent(t,i){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const r=le(t.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(t,i,r){const n={description:!1,mediaInfos:!1};return r.map(o=>o.type==="media"?(o.mediaInfos||!i||n.mediaInfos||(o.mediaInfos=i,n.mediaInfos=!0),yg.fromJSON(o)):o.type==="text"?(o.text||!t||n.description||(o.text=t,n.description=!0),N0.fromJSON(o)):o.type==="attachments"?fg.fromJSON(o):o.type==="fields"?P0.fromJSON(o):o.type==="expression"?zI.fromJSON(o):o.type==="relationship"?E2.fromJSON(o):o.type==="utilityNetworkAssociations"?fR.fromJSON(o):void 0).filter(Boolean)}_toRelationshipContent(t){const{field:i,order:r}=t;if(!(i!=null&&i.startsWith(Iv)))return null;const n=i.replace(Iv,"").split("/");if(n.length!==2)return null;const o=parseInt(n[0],10),c=n[1];return typeof o=="number"&&c?E2.fromJSON({relationshipId:o,orderByFields:[{field:c,order:r}]}):null}_toFieldOrderJSON(t,i){const{order:r,field:n}=t;return{field:`${Iv}${i}/${n}`,order:r}}_readPopupInfo({description:t,mediaInfos:i,showAttachments:r,relatedRecordsInfo:n={showRelatedRecords:!1}}){const o=[];t?o.push(new N0({text:t})):o.push(new P0),Array.isArray(i)&&i.length&&o.push(yg.fromJSON({mediaInfos:i})),r&&o.push(fg.fromJSON({displayType:"auto"}));const{showRelatedRecords:c,orderByFields:y}=n;return c&&(y!=null&&y.length)&&y.forEach(v=>{const _=this._toRelationshipContent(v);_&&o.push(_)}),o.length?o:t}_getContentElementFields(t){const i=t==null?void 0:t.type;if(i==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(i==="custom")return t.outFields||[];if(i==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(i==="media"){const r=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...r.reduce((n,o)=>[...n,...this._getMediaInfoFields(o)],[])]}return i==="text"?this._extractFieldNames(t.text):i==="relationship"||i==="utility-network-associations"?[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)]:[]}_getMediaInfoFields(t){const{caption:i,title:r,value:n}=t,o=n||{},{fields:c,normalizeField:y,tooltipField:v,sourceURL:_,linkURL:I}=o,$=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(_),...this._extractFieldNames(I),...c??[]];return y&&$.push(y),v&&$.push(v),$}_getContentExpressionInfos(t,i){return Array.isArray(t)?t.reduce((r,n)=>[...r,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]],i):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce((i,r)=>[...i,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(t,i,r){r&&await Promise.all(r.map(n=>gs(t,i,n.expression)))}_getFieldInfoFields(t){return t?t.filter(({fieldName:i,visible:r})=>!(r!==void 0&&!r||!i||i.startsWith(Iv)||i.startsWith(Cz))).map(i=>i.fieldName):[]}_getActionsFields(t){return t?t.toArray().reduce((i,r)=>[...i,...this._getActionFields(r)],[]):[]}_getActionFields(t){const{className:i,title:r,type:n}=t,o=n==="button"||n==="toggle"?t.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(o)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){return Vte(t).filter(i=>!(i.indexOf(Iv)===0||i.indexOf(Cz)===0))}};m([w({type:Hxe})],Rr.prototype,"actions",void 0),m([w()],Rr.prototype,"content",void 0),m([wt("content")],Rr.prototype,"castContent",null),m([ke("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Rr.prototype,"readContent",null),m([Le("web-scene","content",{popupElements:{type:Oe.ofType(Gxe)},showAttachments:{type:Boolean},mediaInfos:{type:Oe.ofType(WA)},description:{type:String},relatedRecordsInfo:{type:Az}})],Rr.prototype,"writeWebSceneContent",null),m([Le("content",{popupElements:{type:Oe.ofType(Bxe)},showAttachments:{type:Boolean},mediaInfos:{type:Oe.ofType(WA)},description:{type:String},relatedRecordsInfo:{type:Az}})],Rr.prototype,"writeWebMapContent",null),m([w({type:[Zte],json:{write:!0}})],Rr.prototype,"expressionInfos",void 0),m([w({type:[T3]})],Rr.prototype,"fieldInfos",void 0),m([Le("fieldInfos")],Rr.prototype,"writeFieldInfos",null),m([w({type:qxe})],Rr.prototype,"layerOptions",void 0),m([Le("layerOptions")],Rr.prototype,"writeLayerOptions",null),m([w({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Rr.prototype,"lastEditInfoEnabled",void 0),m([w()],Rr.prototype,"outFields",void 0),m([w()],Rr.prototype,"overwriteActions",void 0),m([w()],Rr.prototype,"returnGeometry",void 0),m([w({json:{type:String}})],Rr.prototype,"title",void 0),m([Le("title")],Rr.prototype,"writeTitle",null),Rr=m([H("esri.PopupTemplate")],Rr);const mp=Rr,kz=new ft({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let Zxe=0,Gy=class extends be{constructor(t){super(t),this.id="sym"+Zxe++,this.type=null,this.color=new je([0,0,0,1])}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};m([w({type:kz.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:kz.write}}})],Gy.prototype,"type",void 0),m([w({type:je,json:{write:{allowNull:!0}}})],Gy.prototype,"color",void 0),m([ke("color")],Gy.prototype,"readColor",null),Gy=m([H("esri.symbols.Symbol")],Gy);const zn=Gy;var rC;let Oh=rC=class extends zn{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const n=r.map(o=>{const c=o.valueExpressionInfo;return c?gs(e,t,c.expression):null});await Promise.all(n)}}}clone(){return new rC({data:le(this.data)})}hash(){return pK(JSON.stringify(this.data)).toString()}};m([w({json:{write:!1}})],Oh.prototype,"color",void 0),m([w({json:{write:!0}})],Oh.prototype,"data",void 0),m([ke("data",["symbol"])],Oh.prototype,"readData",null),m([Le("data",{})],Oh.prototype,"writeData",null),m([He({CIMSymbolReference:"cim"},{readOnly:!0})],Oh.prototype,"type",void 0),Oh=rC=m([H("esri.symbols.CIMSymbol")],Oh);const ah=Oh;let qy=class extends be{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,i,r){t||(i[r]=t)}};m([w({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],qy.prototype,"enabled",void 0),m([Le("enabled")],qy.prototype,"writeEnabled",null),m([w({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],qy.prototype,"type",void 0),qy=m([H("esri.symbols.Symbol3DLayer")],qy);const Du=qy;function Kxe(e,t){const i=t.transparency!=null?T2(t.transparency):1,r=t.color;return r&&Array.isArray(r)?new je([r[0]||0,r[1]||0,r[2]||0,i]):null}function Yxe(e,t){t.color=e.toJSON().slice(0,3);const i=RI(e.a);i!==0&&(t.transparency=i)}const gp={type:je,json:{type:[Ct],default:null,read:{source:["color","transparency"],reader:Kxe},write:{target:{color:{type:[Ct]},transparency:{type:Ct}},writer:Yxe}}},Pu={type:Number,cast:zt,json:{write:!0}};let Jp=class extends be{constructor(t){super(t),this.color=new je([0,0,0,1]),this.extensionLength=0,this.size=po(1)}clone(){}cloneProperties(){return{color:le(this.color),size:this.size,extensionLength:this.extensionLength}}};m([w({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Jp.prototype,"type",void 0),m([w(gp)],Jp.prototype,"color",void 0),m([w({...Pu,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],Jp.prototype,"extensionLength",void 0),m([w(Pu)],Jp.prototype,"size",void 0),Jp=m([H("esri.symbols.edges.Edges3D")],Jp);const yR=Jp;var nC;let T5=nC=class extends yR{constructor(e){super(e),this.type="sketch"}clone(){return new nC(this.cloneProperties())}};m([He({sketch:"sketch"},{readOnly:!0})],T5.prototype,"type",void 0),T5=nC=m([H("esri.symbols.edges.SketchEdges3D")],T5);const Xxe=T5;var sC;let $5=sC=class extends yR{constructor(e){super(e),this.type="solid"}clone(){return new sC(this.cloneProperties())}};m([He({solid:"solid"},{readOnly:!0})],$5.prototype,"type",void 0),$5=sC=m([H("esri.symbols.edges.SolidEdges3D")],$5);const Yte=$5,Xte={types:{key:"type",base:yR,typeMap:{solid:Yte,sketch:Xxe}},json:{write:!0}};var oC;let no=oC=class extends be{constructor(e){super(e),this.color=null,this.emissiveFactor=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?qO(this.emissiveFactor):null};return new oC(e)}};m([w(gp)],no.prototype,"color",void 0),m([w({type:[Number],json:{write:!1}})],no.prototype,"emissiveFactor",void 0),no=oC=m([H("esri.symbols.support.Symbol3DMaterial")],no);var aC;let Rh=aC=class extends Du{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var e,t;return new aC({edges:(e=this.edges)==null?void 0:e.clone(),enabled:this.enabled,material:(t=this.material)==null?void 0:t.clone(),castShadows:this.castShadows,size:this.size})}};m([He({Extrude:"extrude"},{readOnly:!0})],Rh.prototype,"type",void 0),m([w({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Rh.prototype,"size",void 0),m([w({type:no,json:{write:!0}})],Rh.prototype,"material",void 0),m([w({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Rh.prototype,"castShadows",void 0),m([w(Xte)],Rh.prototype,"edges",void 0),Rh=aC=m([H("esri.symbols.ExtrudeSymbol3DLayer")],Rh);const Qte=Rh;let pw=class extends zn{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};m([He({esriSLS:"simple-line"},{readOnly:!0})],pw.prototype,"type",void 0),m([w({type:Number,cast:zt,json:{write:!0}})],pw.prototype,"width",void 0),pw=m([H("esri.symbols.LineSymbol")],pw);const Qxe=pw,e9e=["begin","end","begin-end"],eie=["arrow","circle","square","diamond","cross","x"];var lC;let Hl=lC=class extends be{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,i,r){t[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,i,r){(r==null?void 0:r.origin)==="web-map"||(t[i]=e)}clone(){return new lC({color:le(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};m([w({type:["begin","end","begin-end"],json:{write:!0}})],Hl.prototype,"placement",void 0),m([He({"line-marker":"line-marker"},{readOnly:!0}),w({json:{origins:{"web-map":{write:!1}}}})],Hl.prototype,"type",void 0),m([w({type:eie})],Hl.prototype,"style",void 0),m([Le("style")],Hl.prototype,"writeStyle",null),m([w({type:je,value:null,json:{write:{allowNull:!0}}})],Hl.prototype,"color",null),m([ke("color")],Hl.prototype,"readColor",null),m([Le("color")],Hl.prototype,"writeColor",null),Hl=lC=m([H("esri.symbols.LineSymbolMarker")],Hl);const t9e=Hl;var uC;const V$=new ft({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let ic=uC=class extends Qxe{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,i,r,n,o){if(e&&typeof e!="string")return e;const c={};return e!=null&&(c.style=e),t!=null&&(c.color=t),i!=null&&(c.width=zt(i)),r!=null&&(c.cap=r),n!=null&&(c.join=n),o!=null&&(c.miterLimit=zt(o)),c}clone(){var e;return new uC({color:le(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};m([He({esriSLS:"simple-line"},{readOnly:!0})],ic.prototype,"type",void 0),m([w({type:V$.apiValues,json:{read:V$.read,write:V$.write}})],ic.prototype,"style",void 0),m([w({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null?void 0:i.origin)==null})}}})],ic.prototype,"cap",void 0),m([w({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null?void 0:i.origin)==null})}}})],ic.prototype,"join",void 0),m([w({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":t9e}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],ic.prototype,"marker",void 0),m([w({type:Number,json:{read:!1,write:!1}})],ic.prototype,"miterLimit",void 0),ic=uC=m([H("esri.symbols.SimpleLineSymbol")],ic);const vs=ic;let fw=class extends zn{constructor(t){super(t),this.outline=null,this.type=null}hash(){var t;return`${this.type}.${(t=this.outline)==null?void 0:t.hash()}`}};m([w({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":vs}},json:{default:null,write:!0}})],fw.prototype,"outline",void 0),m([w({type:["simple-fill","picture-fill"],readOnly:!0})],fw.prototype,"type",void 0),fw=m([H("esri.symbols.FillSymbol")],fw);const tie=fw;let E5=class extends be{constructor(t){super(t)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};m([w({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],E5.prototype,"type",void 0),E5=m([H("esri.symbols.patterns.LinePattern3D")],E5);const iie=E5,i9e=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var cC;const r9e=nn()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let yw=cC=class extends iie{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new cC(e)}};m([w({type:["style"]})],yw.prototype,"type",void 0),m([He(r9e),w({type:i9e})],yw.prototype,"style",void 0),yw=cC=m([H("esri.symbols.patterns.LineStylePattern3D")],yw);const mR=yw;let M5=class extends be{constructor(t){super(t),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};m([w({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],M5.prototype,"type",void 0),M5=m([H("esri.symbols.patterns.Pattern3D")],M5);const rie=M5,n9e=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var hC;let mw=hC=class extends rie{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new hC({style:this.style})}};m([w({type:["style"]})],mw.prototype,"type",void 0),m([w({type:n9e,json:{read:!0,write:!0}})],mw.prototype,"style",void 0),mw=hC=m([H("esri.symbols.patterns.StylePattern3D")],mw);const nie=mw,s9e={types:{key:"type",base:rie,typeMap:{style:nie}},json:{write:!0}},sie={types:{key:"type",base:iie,typeMap:{style:mR}},json:{write:!0}},Cb=new je("white");new je("black");const o9e=new je([255,255,255,0]);function a9e(e){return e.r===0&&e.g===0&&e.b===0}var dC;let kb=dC=class extends no{constructor(e){super(e),this.colorMixMode=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?qO(this.emissiveFactor):null,colorMixMode:this.colorMixMode};return new dC(e)}};m([He({multiply:"multiply",replace:"replace",tint:"tint"})],kb.prototype,"colorMixMode",void 0),kb=dC=m([H("esri.symbols.support.Symbol3DFillMaterial")],kb);function l9e(e,t=!1){return e<=oK?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function VKe(e){return(sK(e)?e.length:e.byteLength/8)<=oK?Array.from(e):new Float64Array(e)}function UKe(e,t,i){return Array.isArray(e)?e.slice(t,t+i):e.subarray(t,t+i)}function $3(e=h9e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function gR(e,t,i,r,n,o,c=$3()){return c[0]=e,c[1]=t,c[2]=i,c[3]=r,c[4]=n,c[5]=o,c}function BKe(e,t=$3()){return u9e(e,0,e.length/3,t)}function u9e(e,t,i,r=$3()){return oie(r,pC),c9e(r,e,t,i),r}function GKe(e,t=l9e(24)){const[i,r,n,o,c,y]=e;return t[0]=i,t[1]=r,t[2]=n,t[3]=i,t[4]=r,t[5]=y,t[6]=i,t[7]=c,t[8]=n,t[9]=i,t[10]=c,t[11]=y,t[12]=o,t[13]=r,t[14]=n,t[15]=o,t[16]=r,t[17]=y,t[18]=o,t[19]=c,t[20]=n,t[21]=o,t[22]=c,t[23]=y,t}function qKe(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new Ut(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function HKe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function WKe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function c9e(e,t,i=0,r=t.length/3){let n=e[0],o=e[1],c=e[2],y=e[3],v=e[4],_=e[5];for(let I=0;I<r;I++)n=Math.min(n,t[i+3*I]),o=Math.min(o,t[i+3*I+1]),c=Math.min(c,t[i+3*I+2]),y=Math.max(y,t[i+3*I]),v=Math.max(v,t[i+3*I+1]),_=Math.max(_,t[i+3*I+2]);e[0]=n,e[1]=o,e[2]=c,e[3]=y,e[4]=v,e[5]=_}function vR(e){return e[0]>=e[3]?0:e[3]-e[0]}function wR(e){return e[1]>=e[4]?0:e[4]-e[1]}function bR(e){return e[2]>=e[5]?0:e[5]-e[2]}function JKe(e){const t=vR(e),i=bR(e),r=wR(e);return Math.sqrt(t*t+i*i+r*r)}function ZKe(e,t=[0,0,0]){return t[0]=e[0]+vR(e)/2,t[1]=e[1]+wR(e)/2,t[2]=e[2]+bR(e)/2,t}function KKe(e,t=[0,0,0]){return t[0]=vR(e),t[1]=wR(e),t[2]=bR(e),t}function YKe(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function XKe(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function oie(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function QKe(e){return e?oie(e,pC):$3(pC)}function eYe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function tYe(e,t,i,r,n){return e[0]=t,e[1]=i,e[2]=Number.NEGATIVE_INFINITY,e[3]=r,e[4]=n,e[5]=Number.POSITIVE_INFINITY,e}function Lz(e){return e.length===6}function iYe(e,t,i){if(e==null||t==null)return e===t;if(!Lz(e)||!Lz(t))return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}const pC=[1/0,1/0,1/0,-1/0,-1/0,-1/0],h9e=[0,0,0,0,0,0];$3();function rYe(e,{isPrimitive:t,width:i,depth:r,height:n}){const o=t?10:1;if(i==null&&n==null&&r==null)return[o*e[0],o*e[1],o*e[2]];const c=Ug(i,r,n);let y;for(let v=0;v<3;v++){const _=c[v];if(_!=null){y=_/e[v];break}}for(let v=0;v<3;v++)c[v]==null&&(c[v]=e[v]*y);return c}const d9e=gR(-.5,-.5,-.5,.5,.5,.5),p9e=gR(-.5,-.5,0,.5,.5,1),f9e=gR(-.5,-.5,0,.5,.5,.5);function nYe(e){switch(e){case"sphere":case"cube":case"diamond":return d9e;case"cylinder":case"cone":case"inverted-cone":return p9e;case"tetrahedron":return f9e;default:return}}const _R=["butt","square","round"],y9e=[..._R,"none"],aie=["miter","bevel","round"];var fC;let Zp=fC=class extends be{constructor(e){super(e),this.color=new je([0,0,0,1]),this.size=po(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new fC(e)}};m([w(gp)],Zp.prototype,"color",void 0),m([w(Pu)],Zp.prototype,"size",void 0),m([w(sie)],Zp.prototype,"pattern",void 0),m([w({type:_R,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Zp.prototype,"patternCap",void 0),Zp=fC=m([H("esri.symbols.support.Symbol3DOutline")],Zp);var A5;let rc=A5=class extends Du{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new A5(e)}static fromSimpleFillSymbol(e){var r,n,o;const t=e.outline&&e.outline.style&&e.outline.style!=="solid"?new mR({style:e.outline.style}):null,i={size:((r=e.outline)==null?void 0:r.width)??0,color:(((n=e.outline)==null?void 0:n.color)??Cb).clone(),pattern:t};return t&&((o=e.outline)!=null&&o.cap)&&(i.patternCap=e.outline.cap),new A5({material:new kb({color:(e.color??o9e).clone()}),pattern:e.style&&e.style!=="solid"?new nie({style:e.style}):null,outline:i})}};m([He({Fill:"fill"},{readOnly:!0})],rc.prototype,"type",void 0),m([w({type:kb,json:{write:!0}})],rc.prototype,"material",void 0),m([w(s9e)],rc.prototype,"pattern",void 0),m([w({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],rc.prototype,"castShadows",void 0),m([w({type:Zp,json:{write:!0}})],rc.prototype,"outline",void 0),m([w(Xte)],rc.prototype,"edges",void 0),rc=A5=m([H("esri.symbols.FillSymbol3DLayer")],rc);const K0=rc,m9e=["none","underline","line-through"],g9e=["normal","italic","oblique"],v9e=["normal","lighter","bold","bolder"],lie={type:Number,cast:e=>{const t=Es(e);return t===0?1:co(t,.1,4)},nonNullable:!0},w9e=["left","right","center"],b9e=["baseline","top","middle","bottom"],uie={type:w9e,nonNullable:!0},cie={type:b9e,nonNullable:!0},sYe=8;var yC;let nc=yC=class extends be{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return zt(e)}clone(){return new yC({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};m([w({type:m9e,json:{default:"none",write:!0}})],nc.prototype,"decoration",void 0),m([w({type:String,json:{write:!0}})],nc.prototype,"family",void 0),m([w({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:!i||!i.textSymbol3D})}}})],nc.prototype,"size",void 0),m([wt("size")],nc.prototype,"castSize",null),m([w({type:g9e,json:{default:"normal",write:!0}})],nc.prototype,"style",void 0),m([w({type:v9e,json:{default:"normal",write:!0}})],nc.prototype,"weight",void 0),nc=yC=m([H("esri.symbols.Font")],nc);const GI=nc;var mC;const _9e=nn()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Kp=mC=class extends be{constructor(e){super(e)}readHref(e,t,i){return e?rp(e,i):t.dataURI}writeHref(e,t,i,r){e&&(ih(e)?t.dataURI=e:(t.href=I3(e,r),Fo(t.href)&&(t.href=Ia(t.href))))}clone(){return new mC({href:this.href,primitive:this.primitive})}};m([w({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Kp.prototype,"href",void 0),m([ke("href")],Kp.prototype,"readHref",null),m([Le("href",{href:{type:String},dataURI:{type:String}})],Kp.prototype,"writeHref",null),m([He(_9e)],Kp.prototype,"primitive",void 0),Kp=mC=m([H("esri.symbols.support.IconSymbol3DLayerResource")],Kp);const S9e="circle";var gC;let l1=gC=class extends Ve{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new gC({x:this.x,y:this.y})}};m([w({type:Number})],l1.prototype,"x",void 0),m([w({type:Number})],l1.prototype,"y",void 0),l1=gC=m([H("esri.symbols.support.Symbol3DAnchorPosition2D")],l1);var vC;let gw=vC=class extends be{constructor(e){super(e),this.color=new je([0,0,0,1]),this.size=po(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new vC(e)}};m([w(gp)],gw.prototype,"color",void 0),m([w(Pu)],gw.prototype,"size",void 0),gw=vC=m([H("esri.symbols.support.Symbol3DIconOutline")],gw);var Hy;const hie="esri.symbols.IconSymbol3DLayer";let Ga=Hy=class extends Du{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new Hy({anchor:this.anchor,anchorPosition:le(this.anchorPosition),enabled:this.enabled,material:le(this.material),outline:le(this.outline),resource:le(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||Cb,i=Oz(e),r=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||Cb).clone()}:null;return new Hy({size:e.size,angle:e.angle,resource:{primitive:I9e(e.style)},material:{color:t},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const t=!e.color||a9e(e.color)?Cb:e.color,i=Oz(e);return new Hy({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:t.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new Hy({resource:{href:mY({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};m([w({type:no,json:{write:!0}})],Ga.prototype,"material",void 0),m([w({type:Kp,json:{write:!0}})],Ga.prototype,"resource",void 0),m([He({Icon:"icon"},{readOnly:!0})],Ga.prototype,"type",void 0),m([w(Pu)],Ga.prototype,"size",void 0),m([He({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],Ga.prototype,"anchor",void 0),m([w({type:l1,json:{type:[Number],read:{reader:e=>new l1({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Ga.prototype,"anchorPosition",void 0),m([w({type:gw,json:{write:!0}})],Ga.prototype,"outline",void 0),m([w({type:Number,json:{write:!0,default:0}})],Ga.prototype,"angle",void 0),Ga=Hy=m([H(hie)],Ga);const Jf=Ga;function Oz(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,r=Rz(e.xoffset),n=Rz(e.yoffset);return(r||n)&&t&&i?{x:-r/t,y:n/i}:null}function Rz(e){return isFinite(e)?e:0}const x9e={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function I9e(e){return x9e[e]||(_e.getLogger(hie).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}let Yp=class extends St(be){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};m([w({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Yp.prototype,"type",void 0),m([w({type:e9e,json:{default:"begin-end",write:!0}})],Yp.prototype,"placement",void 0),m([w({type:eie,json:{default:"arrow",write:!0}})],Yp.prototype,"style",void 0),m([w({type:je,json:{type:[Ct],default:null,write:!0}})],Yp.prototype,"color",void 0),Yp=m([H("esri.symbols.LineStyleMarker3D")],Yp);const wC=Yp;var C5;let Wl=C5=class extends Du{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=po(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new C5(e)}static fromSimpleLineSymbol(e){var i;const t={enabled:!0,size:e.width??po(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new mR({style:e.style}):null,material:new no({color:(e.color||Cb).clone()}),marker:e.marker?new wC({placement:e.marker.placement,style:e.marker.style,color:((i=e.marker.color)==null?void 0:i.clone())??null}):null};return new C5(t)}};m([w({type:no,json:{write:!0}})],Wl.prototype,"material",void 0),m([He({Line:"line"},{readOnly:!0})],Wl.prototype,"type",void 0),m([w({type:aie,json:{write:!0,default:"miter"}})],Wl.prototype,"join",void 0),m([w({type:_R,json:{write:!0,default:"butt"}})],Wl.prototype,"cap",void 0),m([w(Pu)],Wl.prototype,"size",void 0),m([w(sie)],Wl.prototype,"pattern",void 0),m([w({types:{key:"type",base:wC,typeMap:{style:wC}},json:{write:!0}})],Wl.prototype,"marker",void 0),Wl=C5=m([H("esri.symbols.LineSymbol3DLayer")],Wl);const Gg=Wl;var bC;const T9e=nn()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let vw=bC=class extends be{clone(){return new bC({href:this.href,primitive:this.primitive})}};m([w({type:String,json:{read:tR,write:O0}})],vw.prototype,"href",void 0),m([He(T9e)],vw.prototype,"primitive",void 0),vw=bC=m([H("esri.symbols.support.ObjectSymbol3DLayerResource")],vw);const $9e="sphere";var _C;let Pf=_C=class extends Ve{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new _C({x:this.x,y:this.y,z:this.z})}};m([w({type:Number})],Pf.prototype,"x",void 0),m([w({type:Number})],Pf.prototype,"y",void 0),m([w({type:Number})],Pf.prototype,"z",void 0),Pf=_C=m([H("esri.symbols.support.Symbol3DAnchorPosition3D")],Pf);var SC;let Qn=SC=class extends Du{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,t,i;return new SC({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((t=this.material)==null?void 0:t.clone())??null,castShadows:this.castShadows,resource:(i=this.resource)==null?void 0:i.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};m([w({type:no,json:{write:!0}})],Qn.prototype,"material",void 0),m([w({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Qn.prototype,"castShadows",void 0),m([w({type:vw,json:{write:!0}})],Qn.prototype,"resource",void 0),m([He({Object:"object"},{readOnly:!0})],Qn.prototype,"type",void 0),m([w({type:Number,json:{write:!0}})],Qn.prototype,"width",void 0),m([w({type:Number,json:{write:!0}})],Qn.prototype,"height",void 0),m([w({type:Number,json:{write:!0}})],Qn.prototype,"depth",void 0),m([He({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],Qn.prototype,"anchor",void 0),m([w({type:Pf,json:{type:[Number],read:{reader:e=>new Pf({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Qn.prototype,"anchorPosition",void 0),m([w({type:Number,json:{write:!0}})],Qn.prototype,"heading",void 0),m([w({type:Number,json:{write:!0}})],Qn.prototype,"tilt",void 0),m([w({type:Number,json:{write:!0}})],Qn.prototype,"roll",void 0),m([w({readOnly:!0})],Qn.prototype,"isPrimitive",null),Qn=SC=m([H("esri.symbols.ObjectSymbol3DLayer")],Qn);const SR=Qn;var xC;let Ss=xC=class extends Du{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new xC({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};m([w({type:no,json:{write:!0}})],Ss.prototype,"material",void 0),m([w({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ss.prototype,"castShadows",void 0),m([He({Path:"path"},{readOnly:!0})],Ss.prototype,"type",void 0),m([w({type:["circle","quad"],json:{write:!0,default:"circle"}})],Ss.prototype,"profile",void 0),m([w({type:aie,json:{write:!0,default:"miter"}})],Ss.prototype,"join",void 0),m([w({type:y9e,json:{write:!0,default:"butt"}})],Ss.prototype,"cap",void 0),m([w({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Ss.prototype,"width",void 0),m([ke("width",["width","size","height"])],Ss.prototype,"readWidth",null),m([w({type:Number,json:{write:!0}})],Ss.prototype,"height",void 0),m([ke("height",["height","size","width"])],Ss.prototype,"readHeight",null),m([w({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Ss.prototype,"anchor",void 0),m([w({type:["heading","all"],json:{write:!0,default:"all"}})],Ss.prototype,"profileRotation",void 0),Ss=xC=m([H("esri.symbols.PathSymbol3DLayer")],Ss);const xR=Ss;var IC;let u1=IC=class extends be{constructor(){super(...arguments),this.color=new je([0,0,0,1]),this.size=0}clone(){const e={color:le(this.color),size:this.size};return new IC(e)}};m([w(gp)],u1.prototype,"color",void 0),m([w(Pu)],u1.prototype,"size",void 0),u1=IC=m([H("esri.symbols.support.Symbol3DHalo")],u1);let Lb=class extends St(be){constructor(t){super(t),this.color=null}};m([w(gp)],Lb.prototype,"color",void 0),Lb=m([H("esri.symbols.support.Symbol3DTextBackground")],Lb);var k5;let Ds=k5=class extends Du{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,i,r){const n={...r,textSymbol3D:!0};t.font=e.write({},n),delete t.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new k5({enabled:this.enabled,font:this.font&&le(this.font),halo:this.halo&&le(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:le(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new k5({font:e.font!=null?e.font.clone():new GI,halo:E9e(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new no({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new Lb({color:e.backgroundColor.clone()}):null})}};function E9e(e,t){return e&&t!=null&&t>0?new u1({color:le(e),size:t}):null}m([w({type:GI,json:{write:!0}})],Ds.prototype,"font",null),m([Le("font")],Ds.prototype,"writeFont",null),m([w({type:u1,json:{write:!0}})],Ds.prototype,"halo",void 0),m([w({...uie,json:{default:"center",write:!0}})],Ds.prototype,"horizontalAlignment",void 0),m([w({...lie,json:{default:1,write:!0}})],Ds.prototype,"lineHeight",void 0),m([w({type:no,json:{write:!0}})],Ds.prototype,"material",void 0),m([w({type:Lb,json:{write:!0}})],Ds.prototype,"background",void 0),m([w(Pu)],Ds.prototype,"size",null),m([w({type:String,json:{write:!0}})],Ds.prototype,"text",void 0),m([He({Text:"text"},{readOnly:!0})],Ds.prototype,"type",void 0),m([w({...cie,json:{default:"baseline",write:!0}})],Ds.prototype,"verticalAlignment",void 0),Ds=k5=m([H("esri.symbols.TextSymbol3DLayer")],Ds);const qg=Ds;var TC;let Ph=TC=class extends Du{constructor(e){super(e),this.color=$C.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new TC({color:le(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};m([w({type:je,nonNullable:!0,json:{type:[Ct],write:(e,t,i)=>t[i]=e.toArray(je.AlphaMode.UNLESS_OPAQUE),default:()=>$C.clone(),defaultEquals:e=>e.toCss(!0)===$C.toCss(!0)}})],Ph.prototype,"color",void 0),m([He({Water:"water"},{readOnly:!0})],Ph.prototype,"type",void 0),m([w({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Ph.prototype,"waterbodySize",void 0),m([w({type:Number,json:{write:!0,default:null}})],Ph.prototype,"waveDirection",void 0),m([w({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Ph.prototype,"waveStrength",void 0),Ph=TC=m([H("esri.symbols.WaterSymbol3DLayer")],Ph);const die=Ph,$C=new je([0,119,190]);var EC;let Xp=EC=class extends Ve{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new EC({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};m([w({type:String})],Xp.prototype,"name",void 0),m([w({type:String})],Xp.prototype,"styleUrl",void 0),m([w({type:String})],Xp.prototype,"styleName",void 0),m([w({type:Cr})],Xp.prototype,"portal",void 0),Xp=EC=m([H("esri.symbols.support.StyleOrigin")],Xp);const M2=Xp;var MC;let a0=MC=class extends Ve{constructor(){super(...arguments),this.url=""}clone(){return new MC({url:this.url})}};m([w({type:String})],a0.prototype,"url",void 0),a0=MC=m([H("esri.symbols.support.Thumbnail")],a0);const pie={icon:Jf,object:SR,line:Gg,path:xR,fill:K0,extrude:Qte,text:qg,water:die},M9e=Oe.ofType({base:Du,key:"type",typeMap:pie,errorContext:"symbol-layer"});let Jl=class extends zn{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=i==null?void 0:i.type,n=r||Oe;this._set("symbolLayers",new n)}get color(){return null}set color(t){this.constructed&&_e.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){ip(t,this._get("symbolLayers"))}readStyleOrigin(t,i,r){if(t.styleUrl&&t.name){const n=rp(t.styleUrl,r);return new M2({styleUrl:n,name:t.name})}if(t.styleName&&t.name)return new M2({portal:(r==null?void 0:r.portal)||Cr.getDefault(),styleName:t.styleName,name:t.name});r!=null&&r.messages&&r.messages.push(new zo("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:t}))}writeStyleOrigin(t,i,r,n){if(t.styleUrl&&t.name){let o=I3(t.styleUrl,n);Fo(o)&&(o=Ia(o)),i.styleOrigin={styleUrl:o,name:t.name}}else t.styleName&&t.name&&(t.portal&&(n!=null&&n.portal)&&!yY(t.portal.restUrl,n.portal.restUrl)?n!=null&&n.messages&&n.messages.push(new zo("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof Du||t&&pie[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};m([w({json:{read:!1,write:!1}})],Jl.prototype,"color",null),m([w({type:M9e,nonNullable:!0,json:{write:!0}}),wt(Vee)],Jl.prototype,"symbolLayers",null),m([w({type:M2})],Jl.prototype,"styleOrigin",void 0),m([ke("styleOrigin")],Jl.prototype,"readStyleOrigin",null),m([Le("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Jl.prototype,"writeStyleOrigin",null),m([w({type:a0,json:{read:!1}})],Jl.prototype,"thumbnail",void 0),m([w({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Jl.prototype,"type",void 0),Jl=m([H("esri.symbols.Symbol3D")],Jl);const Y0=Jl;let ww=class extends be{constructor(t){super(t),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};m([w({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],ww.prototype,"type",void 0),m([w({readOnly:!0})],ww.prototype,"visible",void 0),ww=m([H("esri.symbols.callouts.Callout3D")],ww);const fie=ww;var AC;let L5=AC=class extends be{constructor(e){super(e),this.color=new je("white")}clone(){return new AC({color:le(this.color)})}};m([w(gp)],L5.prototype,"color",void 0),L5=AC=m([H("esri.symbols.callouts.LineCallout3DBorder")],L5);const A9e=L5;var CC;let Nh=CC=class extends fie{constructor(e){super(e),this.type="line",this.color=new je([0,0,0,1]),this.size=po(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new CC({color:le(this.color),size:this.size,border:le(this.border)})}};m([He({line:"line"})],Nh.prototype,"type",void 0),m([w(gp)],Nh.prototype,"color",void 0),m([w(Pu)],Nh.prototype,"size",void 0),m([w({type:A9e,json:{write:!0}})],Nh.prototype,"border",void 0),m([w({readOnly:!0})],Nh.prototype,"visible",null),Nh=CC=m([H("esri.symbols.callouts.LineCallout3D")],Nh);const yie=Nh;function IR(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function mie(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!IR(e)}const gie={types:{key:"type",base:fie,typeMap:{line:yie}},json:{write:!0}};var kC;let Wy=kC=class extends be{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new kC({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};m([w(Pu)],Wy.prototype,"screenLength",void 0),m([w({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Wy.prototype,"minWorldLength",void 0),m([w({type:Number,json:{write:!0}})],Wy.prototype,"maxWorldLength",void 0),Wy=kC=m([H("esri.symbols.support.Symbol3DVerticalOffset")],Wy);const TR=Wy;var O5;const vie=Oe.ofType({base:null,key:"type",typeMap:{text:qg}});let Fh=O5=class extends Y0{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new vie,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return mie(this)}hasVisibleVerticalOffset(){return IR(this)}clone(){return new O5({styleOrigin:le(this.styleOrigin),symbolLayers:le(this.symbolLayers),thumbnail:le(this.thumbnail),callout:le(this.callout),verticalOffset:le(this.verticalOffset)})}static fromTextSymbol(e){return new O5({symbolLayers:new Oe([qg.fromTextSymbol(e)])})}};m([w({type:TR,json:{write:!0}})],Fh.prototype,"verticalOffset",void 0),m([w(gie)],Fh.prototype,"callout",void 0),m([w({json:{read:!1,write:!1}})],Fh.prototype,"styleOrigin",void 0),m([w({type:vie})],Fh.prototype,"symbolLayers",void 0),m([He({LabelSymbol3D:"label-3d"},{readOnly:!0})],Fh.prototype,"type",void 0),Fh=O5=m([H("esri.symbols.LabelSymbol3D")],Fh);const qI=Fh;var R5;const wie=Oe.ofType({base:null,key:"type",typeMap:{line:Gg,path:xR}}),C9e=Oe.ofType({base:null,key:"type",typeMap:{line:Gg,path:xR}});let bw=R5=class extends Y0{constructor(e){super(e),this.symbolLayers=new wie,this.type="line-3d"}clone(){return new R5({styleOrigin:le(this.styleOrigin),symbolLayers:le(this.symbolLayers),thumbnail:le(this.thumbnail)})}static fromSimpleLineSymbol(e){return new R5({symbolLayers:new Oe([Gg.fromSimpleLineSymbol(e)])})}};m([w({type:wie,json:{type:C9e}})],bw.prototype,"symbolLayers",void 0),m([He({LineSymbol3D:"line-3d"},{readOnly:!0})],bw.prototype,"type",void 0),bw=R5=m([H("esri.symbols.LineSymbol3D")],bw);const X0=bw;let Dh=class extends zn{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};m([w({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Dh.prototype,"angle",void 0),m([w({type:["simple-marker","picture-marker"],readOnly:!0})],Dh.prototype,"type",void 0),m([w({type:Number,cast:zt,json:{write:!0}})],Dh.prototype,"xoffset",void 0),m([w({type:Number,cast:zt,json:{write:!0}})],Dh.prototype,"yoffset",void 0),m([w({cast:e=>e==="auto"?e:Es(zt(e)),json:{write:!0}})],Dh.prototype,"size",void 0),Dh=m([H("esri.symbols.MarkerSymbol")],Dh);const bie=Dh;var P5;const _ie=Oe.ofType({base:null,key:"type",typeMap:{fill:K0}});let _w=P5=class extends Y0{constructor(e){super(e),this.symbolLayers=new _ie,this.type="mesh-3d"}clone(){return new P5({styleOrigin:le(this.styleOrigin),symbolLayers:le(this.symbolLayers),thumbnail:le(this.thumbnail)})}static fromSimpleFillSymbol(e){return new P5({symbolLayers:new Oe([K0.fromSimpleFillSymbol(e)])})}};m([w({type:_ie})],_w.prototype,"symbolLayers",void 0),m([He({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],_w.prototype,"type",void 0),_w=P5=m([H("esri.symbols.MeshSymbol3D")],_w);const E3=_w;function k9e(e,t,i){return t.imageData?mY({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):Sie(t.url,i)}function Sie(e,t){if(!Fo(e)){const i=O9e(t);if(i)return x0(i,"images",e)}return rp(e,t)}function L9e(e,t,i,r){if(ih(e)){const n=I0(e);if(!n)return;t.contentType=n.mediaType,t.imageData=n.data,i&&i.imageData===t.imageData&&i.url&&O0(i.url,t,"url",r)}else O0(e,t,"url",r)}const xie={json:{read:{source:["imageData","url"],reader:k9e},write:{writer(e,t,i,r){L9e(e,t,this.source,r)}}}},Iie={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=Sie(t.url,i)),r}}}};function O9e(e){var n,o;if(!e)return null;const{origin:t,layer:i}=e;if(t!=="service"&&t!=="portal-item")return null;const r=i==null?void 0:i.type;return r==="feature"||r==="stream"?(n=i.parsedUrl)==null?void 0:n.path:r==="map-image"||r==="tile"?(o=e.url)==null?void 0:o.path:null}var LC;let ta=LC=class extends tie{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const n={};return e&&(n.url=e),t&&(n.outline=t),i!=null&&(n.width=zt(i)),r!=null&&(n.height=zt(r)),n}clone(){const e=new LC({color:le(this.color),height:this.height,outline:le(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",le(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};m([He({esriPFS:"picture-fill"},{readOnly:!0})],ta.prototype,"type",void 0),m([w(xie)],ta.prototype,"url",void 0),m([w({type:Number,json:{write:!0}})],ta.prototype,"xscale",void 0),m([w({type:Number,json:{write:!0}})],ta.prototype,"yscale",void 0),m([w({type:Number,cast:zt,json:{write:!0}})],ta.prototype,"width",void 0),m([w({type:Number,cast:zt,json:{write:!0}})],ta.prototype,"height",void 0),m([w({type:Number,cast:zt,json:{write:!0}})],ta.prototype,"xoffset",void 0),m([w({type:Number,cast:zt,json:{write:!0}})],ta.prototype,"yoffset",void 0),m([w(Iie)],ta.prototype,"source",void 0),ta=LC=m([H("esri.symbols.PictureFillSymbol")],ta);const $R=ta;var OC;let qa=OC=class extends bie{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const r={};return e&&(r.url=e),t!=null&&(r.width=zt(t)),i!=null&&(r.height=zt(i)),r}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new OC({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",le(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};m([w({json:{write:!1}})],qa.prototype,"color",void 0),m([He({esriPMS:"picture-marker"},{readOnly:!0})],qa.prototype,"type",void 0),m([w(xie)],qa.prototype,"url",void 0),m([w(Iie)],qa.prototype,"source",void 0),m([w({type:Number,cast:zt,json:{write:!0}})],qa.prototype,"height",void 0),m([ke("height",["height","size"])],qa.prototype,"readHeight",null),m([w({type:Number,cast:zt,json:{write:!0}})],qa.prototype,"width",void 0),m([w({json:{write:!1}})],qa.prototype,"size",void 0),qa=OC=m([H("esri.symbols.PictureMarkerSymbol")],qa);const Hg=qa;var Qp;const Tie=Oe.ofType({base:null,key:"type",typeMap:{icon:Jf,object:SR,text:qg}});let ef=Qp=class extends Y0{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new Tie,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return mie(this)}hasVisibleVerticalOffset(){return IR(this)}clone(){return new Qp({verticalOffset:le(this.verticalOffset),callout:le(this.callout),styleOrigin:le(this.styleOrigin),symbolLayers:le(this.symbolLayers),thumbnail:le(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Qp({symbolLayers:new Oe([Jf.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new Qp({symbolLayers:new Oe([Jf.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){var r,n;if(((n=(r=e.data)==null?void 0:r.symbol)==null?void 0:n.type)!=="CIMPointSymbol")return null;const i=e.data.symbol;return new Qp(i!=null&&i.callout?{symbolLayers:new Oe([Jf.fromCIMSymbol(e)]),callout:new yie({size:.5,color:new je([0,0,0])}),verticalOffset:new TR({screenLength:40})}:{symbolLayers:new Oe([Jf.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new Qp({symbolLayers:new Oe([qg.fromTextSymbol(e)])})}};m([w({type:TR,json:{write:!0}})],ef.prototype,"verticalOffset",void 0),m([w(gie)],ef.prototype,"callout",void 0),m([w({type:Tie,json:{origins:{"web-scene":{write:!0}}}})],ef.prototype,"symbolLayers",void 0),m([He({PointSymbol3D:"point-3d"},{readOnly:!0})],ef.prototype,"type",void 0),ef=Qp=m([H("esri.symbols.PointSymbol3D")],ef);const zc=ef;var Sw;const $ie=Oe.ofType({base:null,key:"type",typeMap:{extrude:Qte,fill:K0,icon:Jf,line:Gg,object:SR,text:qg,water:die}});let xw=Sw=class extends Y0{constructor(e){super(e),this.symbolLayers=new $ie,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&d2(_e.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&d2(_e.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(tn(()=>this.symbolLayers,"after-add",({item:t})=>e(t),$l))}clone(){return new Sw({styleOrigin:le(this.styleOrigin),symbolLayers:le(this.symbolLayers),thumbnail:le(this.thumbnail)})}static fromJSON(e){var i;const t=new Sw;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const r=t.symbolLayers.at(0),n=t.symbolLayers.at(1);!n.enabled||(i=e.symbolLayers)!=null&&i[1]&&e.symbolLayers[1].enable===!1||(r.outline={size:n.size,color:n.material!=null?n.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new Sw({symbolLayers:new Oe([K0.fromSimpleFillSymbol(e)])})}};m([w({type:$ie,json:{write:!0}})],xw.prototype,"symbolLayers",void 0),m([He({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],xw.prototype,"type",void 0),xw=Sw=m([H("esri.symbols.PolygonSymbol3D")],xw);const vp=xw;var RC;const U$=new ft({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let tf=RC=class extends tie{constructor(...e){super(...e),this.color=new je([0,0,0,.25]),this.outline=new vs,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.style=e),t&&(r.outline=t),i&&(r.color=i),r}clone(){return new RC({color:le(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};m([w()],tf.prototype,"color",void 0),m([w()],tf.prototype,"outline",void 0),m([He({esriSFS:"simple-fill"},{readOnly:!0})],tf.prototype,"type",void 0),m([w({type:U$.apiValues,json:{read:U$.read,write:U$.write}})],tf.prototype,"style",void 0),tf=RC=m([H("esri.symbols.SimpleFillSymbol")],tf);const kl=tf;var PC;const B$=new ft({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Zl=PC=class extends bie{constructor(...e){super(...e),this.color=new je([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new vs}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string")return e;const n={};return e&&(n.style=e),t!=null&&(n.size=zt(t)),i&&(n.outline=i),r&&(n.color=r),n}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new PC({angle:this.angle,color:le(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};m([w()],Zl.prototype,"color",void 0),m([Le("color")],Zl.prototype,"writeColor",null),m([He({esriSMS:"simple-marker"},{readOnly:!0})],Zl.prototype,"type",void 0),m([w()],Zl.prototype,"size",void 0),m([w({type:B$.apiValues,json:{read:B$.read,write:B$.write}})],Zl.prototype,"style",void 0),m([w({type:String,json:{write:!0}})],Zl.prototype,"path",null),m([w({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":vs}},json:{default:null,write:!0}})],Zl.prototype,"outline",void 0),Zl=PC=m([H("esri.symbols.SimpleMarkerSymbol")],Zl);const fs=Zl;var NC;let Ni=NC=class extends zn{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new GI,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.text=e),t&&(r.font=t),i&&(r.color=i),r}writeLineWidth(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}castLineWidth(e){return zt(e)}writeLineHeight(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}clone(){return new NC({angle:this.angle,backgroundColor:le(this.backgroundColor),borderLineColor:le(this.borderLineColor),borderLineSize:this.borderLineSize,color:le(this.color),font:this.font&&this.font.clone(),haloColor:le(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e,t,i;return`${(e=this.backgroundColor)==null?void 0:e.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${(i=this.haloColor)==null?void 0:i.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};m([w({type:je,json:{write:!0}})],Ni.prototype,"backgroundColor",void 0),m([w({type:je,json:{write:!0}})],Ni.prototype,"borderLineColor",void 0),m([w({type:Number,json:{write:!0},cast:zt})],Ni.prototype,"borderLineSize",void 0),m([w({type:GI,json:{write:!0}})],Ni.prototype,"font",void 0),m([w({...uie,json:{write:!0}})],Ni.prototype,"horizontalAlignment",void 0),m([w({type:Boolean,json:{write:!0}})],Ni.prototype,"kerning",void 0),m([w({type:je,json:{write:!0}})],Ni.prototype,"haloColor",void 0),m([w({type:Number,cast:zt,json:{write:!0}})],Ni.prototype,"haloSize",void 0),m([w({type:Boolean,json:{write:!0}})],Ni.prototype,"rightToLeft",void 0),m([w({type:Boolean,json:{write:!0}})],Ni.prototype,"rotated",void 0),m([w({type:String,json:{write:!0}})],Ni.prototype,"text",void 0),m([He({esriTS:"text"},{readOnly:!0})],Ni.prototype,"type",void 0),m([w({...cie,json:{write:!0}})],Ni.prototype,"verticalAlignment",void 0),m([w({type:Number,cast:zt,json:{write:!0}})],Ni.prototype,"xoffset",void 0),m([w({type:Number,cast:zt,json:{write:!0}})],Ni.prototype,"yoffset",void 0),m([w({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Ni.prototype,"angle",void 0),m([w({type:Number,json:{write:!0}})],Ni.prototype,"width",void 0),m([w({type:Number})],Ni.prototype,"lineWidth",void 0),m([Le("lineWidth")],Ni.prototype,"writeLineWidth",null),m([wt("lineWidth")],Ni.prototype,"castLineWidth",null),m([w(lie)],Ni.prototype,"lineHeight",void 0),m([Le("lineHeight")],Ni.prototype,"writeLineHeight",null),Ni=NC=m([H("esri.symbols.TextSymbol")],Ni);const Q0=Ni;var FC;let Ha=FC=class extends zn{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:Cr.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t==null?void 0:t.portal,super.read(e,t)}clone(){return new FC({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const i=t!=null?t.cache:null,r=i?this._fetchCacheKey:null;if(i!=null){const y=r&&i.get(r);if(y)return y.clone()}const{resolveWebStyleSymbol:n}=await de(()=>Promise.resolve().then(()=>ZFe),void 0,import.meta.url);Gi(t);const o=n(this,{portal:this.portal},e,t);o.catch(y=>{_e.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",y)});const c=await o;return e==="webRef"&&c.type==="point-3d"||e==="cimRef"&&c.type==="cim"?(i!=null&&i.set(r,c.clone()),c):null}};m([w({json:{write:!1}})],Ha.prototype,"color",void 0),m([w({type:String,json:{write:!0}})],Ha.prototype,"styleName",void 0),m([w({type:Cr,json:{write:!1}})],Ha.prototype,"portal",void 0),m([w({type:String,json:{read:tR,write:O0}})],Ha.prototype,"styleUrl",void 0),m([w({type:a0,json:{read:!1}})],Ha.prototype,"thumbnail",void 0),m([w({type:String,json:{write:!0}})],Ha.prototype,"name",void 0),m([He({styleSymbolReference:"web-style"},{readOnly:!0})],Ha.prototype,"type",void 0),m([w()],Ha.prototype,"_fetchCacheKey",null),Ha=FC=m([H("esri.symbols.WebStyleSymbol")],Ha);const ey=Ha;function HI(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Nu(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Ad={base:zn,key:"type",typeMap:{"simple-fill":kl,"picture-fill":$R,"picture-marker":Hg,"simple-line":vs,"simple-marker":fs,text:Q0,"label-3d":qI,"line-3d":X0,"mesh-3d":E3,"point-3d":zc,"polygon-3d":vp,"web-style":ey,cim:ah},errorContext:"symbol"},hYe={base:zn,key:"type",typeMap:{"picture-marker":Hg,"simple-marker":fs,"point-3d":zc,cim:ah},errorContext:"symbol"},dYe={base:zn,key:"type",typeMap:{"simple-line":vs,"line-3d":X0,cim:ah},errorContext:"symbol"},pYe={base:zn,key:"type",typeMap:{"simple-fill":kl,"picture-fill":$R,"polygon-3d":vp,cim:ah},errorContext:"symbol"},R9e={base:zn,key:"type",typeMap:{"picture-marker":Hg,"simple-marker":fs,text:Q0,"web-style":ey,cim:ah},errorContext:"symbol"},P9e=Cg({types:Ad}),Eie={base:zn,key:"type",typeMap:{"simple-fill":kl,"picture-fill":$R,"picture-marker":Hg,"simple-line":vs,"simple-marker":fs,text:Q0,"line-3d":X0,"mesh-3d":E3,"point-3d":zc,"polygon-3d":vp,"web-style":ey,cim:ah},errorContext:"symbol"},N9e={base:zn,key:"type",typeMap:{text:Q0,"label-3d":qI},errorContext:"symbol"},Pz={base:zn,key:"type",typeMap:{"line-3d":X0,"mesh-3d":E3,"point-3d":zc,"polygon-3d":vp,"web-style":ey,cim:ah},errorContext:"symbol"},F9e={base:zn,key:"type",typeMap:{"label-3d":qI},errorContext:"symbol"},Mie=Ma(Ad);var DC;function D9e(e){if(!e)return null;const t={};for(const i in e){const r=Xc(e[i]);r&&(t[i]=r)}return Object.keys(t).length!==0?t:null}function j9e(e){if(e==null)return null;const t={};for(const i in e){const r=e[i];r&&(t[i]=r.toJSON())}return Object.keys(t).length!==0?t:null}let js=DC=class extends St(be){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:HS(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&dye(_e.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),(e==null?void 0:e.type)!=="mesh"&&this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}get version(){return this._version}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new DC({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const i of[t,this.sourceLayer,this.layer])if(i){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(e&&"defaultPopupTemplate"in i&&i.defaultPopupTemplate!=null)return i.defaultPopupTemplate}return null}getAttribute(e){var t;return(t=this.attributes)==null?void 0:t[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var e;return{aggregateGeometries:j9e(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:I9(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if((t==null?void 0:t.type)==="mesh"){const i={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",i,i,e.action)}}_notifyLayer(e,t,i,r){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:t,newValue:i};e==="origin-transform"&&(n.action=r),e==="attributes"&&(n.attributeName=r),this.layer.graphicChanged(n)}_watchMeshGeometryChanges(){this.addHandles([en(()=>{var e,t;return((e=this.geometry)==null?void 0:e.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(t=this.geometry.transform)==null?void 0:t.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())}),en(()=>{var e;return((e=this.geometry)==null?void 0:e.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var t;const e=this.geometry;(e==null?void 0:e.type)==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(t=e.transform)==null?void 0:t.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,t)=>e===t,sync:!0})])}};m([w({value:null,json:{read:D9e}})],js.prototype,"aggregateGeometries",null),m([w({value:null})],js.prototype,"attributes",null),m([w({value:null,types:q0,json:{read:Xc}})],js.prototype,"geometry",null),m([w({type:Boolean})],js.prototype,"isAggregate",void 0),m([w({clonable:"reference"})],js.prototype,"layer",void 0),m([w({clonable:"reference"})],js.prototype,"origin",void 0),m([w({type:mp})],js.prototype,"popupTemplate",void 0),m([w({clonable:"reference"})],js.prototype,"sourceLayer",void 0),m([w({value:null,types:Ad})],js.prototype,"symbol",null),m([w({clonable:!1,json:{read:!1,write:!1}})],js.prototype,"_version",void 0),m([w({type:Boolean,value:!0})],js.prototype,"visible",null),js=DC=m([H("esri.Graphic")],js);const er=js;let l0=class extends Mb{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};m([MO({Type:er,ensureType:qi(er)})],l0.prototype,"itemType",void 0),l0=m([H("esri.support.GraphicsCollection")],l0);let jh=class extends Ve{constructor(t){super(t),this.view=null,this.baseLayerViews=new Oe,this.referenceLayerViews=new Oe,this._loadingHandle=ge(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap},i=>{i&&i.load().catch(()=>{})},qe)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const t of this.baseLayerViews)t.destroy();this.baseLayerViews.length=0;for(const t of this.referenceLayerViews)t.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){var i,r,n;if((i=this.view)!=null&&i.suspended)return!1;const t=(n=(r=this.view)==null?void 0:r.map)==null?void 0:n.basemap;return!!t&&!!t.loaded&&(this.baseLayerViews.some(o=>o.updating)||this.referenceLayerViews.some(o=>o.updating))}};m([w({constructOnly:!0})],jh.prototype,"view",void 0),m([w({readOnly:!0})],jh.prototype,"baseLayerViews",void 0),m([w({readOnly:!0})],jh.prototype,"referenceLayerViews",void 0),m([w({readOnly:!0})],jh.prototype,"suspended",null),m([w({type:Boolean,readOnly:!0})],jh.prototype,"updating",null),jh=m([H("esri.views.BasemapView")],jh);const z9e=jh;function V9e(e){return"tryRecycleWith"in e}function U9e(e){return e!=null&&typeof e=="object"&&"layerViews"in e}let B9e=class{constructor(t,i,r){this.layer=t,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=Vo(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Sa(this._controller.signal,()=>{const n=new ne("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(n)})}tryRecycle(t){if(!this.done||!this.layerView||!V9e(this.layerView))return null;const i=this.layer.type,r=this._controller.signal;for(let n=0;n<t.length;n++){const o=t[n];if(o.type!==i)continue;const c=this.layerView.tryRecycleWith(o,{signal:r});if(c){t.splice(n,1),this.layer=o;const y=this.layerView,v=y.view;return this.promise=Promise.race([c.then(()=>(Gi(this._controller.signal),o.emit("layerview-destroy",{view:v,layerView:y}),v.emit("layerview-destroy",{view:v,layerView:y}),o.emit("layerview-create",{view:v,layerView:y}),v.emit("layerview-create",{view:v,layerView:y}),y)),new Promise((_,I)=>Sa(this._controller.signal,()=>I(Ei())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(t){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:t}),r.emit("layerview-destroy",{layer:i,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var n,o;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:i,view:r}=this;this._map=r.map;try{let c,y;if(await i.load({signal:t}),i.prefetchResources&&await i.prefetchResources({signal:t}),q9e(i))c=await i.createLayerView(r,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new ne("layer:view-not-supported","No layerview implementation was found");const I=await this.layerViewImporter.importLayerView(i);Gi(t),c="default"in I?new I.default({layer:i,view:r}):new I({layer:i,view:r})}const v=()=>{y=Bi(y),c.destroyed||c.destroy(),c.layer=null,c.parent=null,c.view=null,this.done=!0};y=Sa(t,v),Gi(t);try{await c.when()}catch(I){throw v(),I}if(!((o=(n=this._map)==null?void 0:n.allLayers)==null?void 0:o.includes(i)))return v(),void this._deferred.reject(new ne("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=c,i.emit("layerview-create",{view:r,layerView:c}),r.emit("layerview-create",{layer:i,layerView:c}),this.done=!0,this._deferred.resolve(c)}catch(c){i.emit("layerview-create-error",{view:r,error:c}),r.emit("layerview-create-error",{layer:i,error:c}),this.done=!0,this._deferred.reject(new ne("layerview:create-error","layerview creation failed",{layer:i,error:c}))}}},ia=class extends Ve{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new o0,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var r;const i=(r=this.view.map)==null?void 0:r.allLayers;if(i)for(const n of i)this.layerViewImporter.hasLayerViewModule(n)&&this.layerViewImporter.importLayerView(n)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Vo(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(f3(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var v,_,I;if(this.destroyed)return;const i=this.view.map;if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,n=[],o=this.view.ready,c=$=>{if($!=null){for(const A of $)if(A){r.add(A);const k=this._layerLayerViewInfoMap.get(A);k&&o?k.start():k||this._recyclingInfoMap.has(A)||n.push(A),"layers"in A&&A.layers&&c(A.layers)}}};for(const $ of this._rootCollectionNames)c(hs(this,$));for(const[$,A]of this._layerLayerViewInfoMap)if(!r.has($)){this._layerLayerViewInfoMap.delete(A.layer);const k=A.tryRecycle(n);k?(this.notifyChange("updating"),this._recyclingInfoMap.set(A.layer,A),k.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(A.layer),this._layerLayerViewInfoMap.set(A.layer,A),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(A.layer),A.destroy(),this._reschedule()})):A.destroy()}for(const[$,A]of this._recyclingInfoMap)r.has($)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(A.layer),A.destroy());for(const $ of n)this._createLayerView($);this._refreshCollections();const y=[(v=i==null?void 0:i.ground)==null?void 0:v.layers,(_=i==null?void 0:i.basemap)==null?void 0:_.baseLayers,(I=i==null?void 0:i.basemap)==null?void 0:I.referenceLayers,i==null?void 0:i.layers].filter($=>!!$);r.forEach($=>"layers"in $&&y.push($.layers)),this.addHandles(y.map($=>this._watchUpdatingTracking.addOnCollectionChange(()=>$,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([tn(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),ge(()=>{const t=this.view,i=t==null?void 0:t.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,t==null?void 0:t.ready]},()=>this._reschedule(),Lo)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),N$(this._recyclingInfoMap),N$(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Ei()),this._workPromise=null)}get _layersToLayerViews(){const t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||b0e(this._layerLayerViewInfoMap,t=>!t.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let t=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++t;return t}clear(){this.destroyed||(N$(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(t)){if(this._recyclingInfoMap.has(t))return this._recyclingInfoMap.get(t).promise;throw new ne("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t})}return this._layerLayerViewInfoMap.get(t).promise}isCreatingLayerViewsForLayer(t,i){var o;this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(t);if(!(r!=null&&r.done))return!0;const n=r.layerView;return!(!n||!i||n.parent===i)||!!(r.done&&n&&"layers"in t&&((o=t.layers)!=null&&o.length))&&t.layers.some(c=>this.isCreatingLayerViewsForLayer(c,n))}_refreshCollections(){for(const[t,i]of this._layersToLayerViews)this._populateLayerViewsOwners(hs(this,t),hs(this,i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(t,i,r){if(!t||!i)return void(i&&i.removeAll());let n=0;for(const o of t){const c=this._layerLayerViewInfoMap.get(o);if(!(c!=null&&c.layerView))continue;const y=c.layerView;y.layer=o,y.parent=r,i.at(n)!==y&&i.splice(n,0,y),"layers"in o&&U9e(y)&&this._populateLayerViewsOwners(o.layers,y.layerViews,y),n+=1}n<i.length&&i.splice(n,i.length)}_createLayerView(t){t.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);const i=new B9e(t,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),r=>{r&&(br(r)||r.name==="cancelled:layerview-create")||_e.getLogger(this).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:r}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(t,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};m([w()],ia.prototype,"_workPromise",void 0),m([w({readOnly:!0})],ia.prototype,"_watchUpdatingTracking",void 0),m([w({readOnly:!0})],ia.prototype,"_layersToLayerViews",null),m([w({readOnly:!0})],ia.prototype,"_rootCollectionNames",null),m([w()],ia.prototype,"layerViewImporter",void 0),m([w()],ia.prototype,"supportsGround",void 0),m([w({readOnly:!0})],ia.prototype,"updating",null),m([w({readOnly:!0})],ia.prototype,"updatingRemaining",null),m([w({constructOnly:!0})],ia.prototype,"view",void 0),ia=m([H("esri.views.LayerViewManager")],ia);const G9e=ia;function q9e(e){return"createLayerView"in e&&e.createLayerView!=null}let _o=class extends Ve{constructor(t){super(t),this.factor=1.5,this.offset=gn(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};m([w({type:Number})],_o.prototype,"factor",void 0),m([w({nonNullable:!0})],_o.prototype,"offset",void 0),m([w()],_o.prototype,"position",void 0),m([w({type:Number,range:{min:0}})],_o.prototype,"size",void 0),m([w()],_o.prototype,"maskUrl",void 0),m([w()],_o.prototype,"maskEnabled",void 0),m([w()],_o.prototype,"overlayUrl",void 0),m([w()],_o.prototype,"overlayEnabled",void 0),m([w({readOnly:!0})],_o.prototype,"version",null),m([w({type:Boolean})],_o.prototype,"visible",void 0),_o=m([H("esri.views.Magnifier")],_o);const Aie=_o;let Wd=class{constructor(t){this._observable=new Fg,this._map=new Map(t)}get size(){return Xe(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(t){const i=this._map.delete(t);return i&&this._observable.notify(),i}entries(){return Xe(this._observable),this._map.entries()}forEach(t,i){Xe(this._observable),this._map.forEach((r,n)=>t.call(i,r,n,this),i)}get(t){return Xe(this._observable),this._map.get(t)}has(t){return Xe(this._observable),this._map.has(t)}keys(){return Xe(this._observable),this._map.keys()}set(t,i){return this._map.set(t,i),this._observable.notify(),this}values(){return Xe(this._observable),this._map.values()}[Symbol.iterator](){return Xe(this._observable),this._map[Symbol.iterator]()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var jC;let Zf=jC=class extends be{constructor(e){super(e),this.name=null,this.code=null}clone(){return new jC({name:this.name,code:this.code})}};m([w({type:String,json:{write:!0}})],Zf.prototype,"name",void 0),m([w({type:[String,Number],json:{write:!0}})],Zf.prototype,"code",void 0),Zf=jC=m([H("esri.layers.support.CodedValue")],Zf);const H9e=new ft({inherited:"inherited",codedValue:"coded-value",range:"range"});let Iw=class extends be{constructor(t){super(t),this.name=null,this.type=null}};m([w({type:String,json:{write:!0}})],Iw.prototype,"name",void 0),m([He(H9e)],Iw.prototype,"type",void 0),Iw=m([H("esri.layers.support.Domain")],Iw);const WI=Iw;var zC;let Tw=zC=class extends WI{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some(r=>(String(r.code)===i&&(t=r.name),!!t))}return t}clone(){return new zC({codedValues:le(this.codedValues),name:this.name})}};m([w({type:[Zf],json:{write:!0}})],Tw.prototype,"codedValues",void 0),m([He({codedValue:"coded-value"})],Tw.prototype,"type",void 0),Tw=zC=m([H("esri.layers.support.CodedValueDomain")],Tw);const JI=Tw;var VC;let N5=VC=class extends WI{constructor(e){super(e),this.type="inherited"}clone(){return new VC}};m([He({inherited:"inherited"})],N5.prototype,"type",void 0),N5=VC=m([H("esri.layers.support.InheritedDomain")],N5);const Cie=N5;var UC;let Jy=UC=class extends WI{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new UC({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};m([w({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var i;return(i=t.range)==null?void 0:i[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]}}}})],Jy.prototype,"maxValue",void 0),m([w({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var i;return(i=t.range)==null?void 0:i[0]}},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]}}}})],Jy.prototype,"minValue",void 0),m([He({range:"range"})],Jy.prototype,"type",void 0),Jy=UC=m([H("esri.layers.support.RangeDomain")],Jy);const kie=Jy,Lie={key:"type",base:WI,typeMap:{range:kie,"coded-value":JI,inherited:Cie}};function ZI(e){if(!(e!=null&&e.type))return null;switch(e.type){case"range":return kie.fromJSON(e);case"codedValue":return JI.fromJSON(e);case"inherited":return Cie.fromJSON(e)}return null}const ER=new ft({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var BC;const W9e=new ft({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let es=BC=class extends be{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch{}return(i==null?void 0:i.value)??null}readValueType(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch{}return i?W9e.fromJSON(i.fieldValueType):null}clone(){var e;return new BC({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((e=this.domain)==null?void 0:e.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};m([w({type:String,json:{write:!0}})],es.prototype,"alias",void 0),m([w({type:[String,Number],json:{write:{allowNull:!0}}})],es.prototype,"defaultValue",void 0),m([w()],es.prototype,"description",void 0),m([ke("description")],es.prototype,"readDescription",null),m([w({types:Lie,json:{read:{reader:ZI},write:!0}})],es.prototype,"domain",void 0),m([w({type:Boolean,json:{write:!0}})],es.prototype,"editable",void 0),m([w({type:Ct,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],es.prototype,"length",void 0),m([w({type:String,json:{write:!0}})],es.prototype,"name",void 0),m([w({type:Boolean,json:{write:!0}})],es.prototype,"nullable",void 0),m([He(ER)],es.prototype,"type",void 0),m([w()],es.prototype,"valueType",void 0),m([ke("valueType",["description"])],es.prototype,"readValueType",null),m([w({type:Boolean,json:{read:!1}})],es.prototype,"visible",void 0),es=BC=m([H("esri.layers.support.Field")],es);const KI=es;var GC;let Zy=GC=class extends be{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new GC({mapLayerId:e,gdbVersion:t})}};m([He({mapLayer:"map-layer"})],Zy.prototype,"type",void 0),m([w({type:Ct,json:{write:!0}})],Zy.prototype,"mapLayerId",void 0),m([w({type:String,json:{write:!0}})],Zy.prototype,"gdbVersion",void 0),Zy=GC=m([H("esri.layers.support.source.MapLayerSource")],Zy);var qC;let sc=qC=class extends be{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:i,spatialReference:r,geometryType:n}=this,o={workspaceId:e,query:t,oidFields:i,spatialReference:(r==null?void 0:r.clone())??void 0,geometryType:n};return new qC(o)}};m([He({queryTable:"query-table"})],sc.prototype,"type",void 0),m([w({type:String,json:{write:!0}})],sc.prototype,"workspaceId",void 0),m([w({type:String,json:{write:!0}})],sc.prototype,"query",void 0),m([w({type:String,json:{write:!0}})],sc.prototype,"oidFields",void 0),m([w({type:rt,json:{write:!0}})],sc.prototype,"spatialReference",void 0),m([He(Hge)],sc.prototype,"geometryType",void 0),sc=qC=m([H("esri.layers.support.source.QueryTableDataSource")],sc);var HC;let Ky=HC=class extends be{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new HC({workspaceId:e,dataSourceName:t})}};m([He({raster:"raster"})],Ky.prototype,"type",void 0),m([w({type:String,json:{write:!0}})],Ky.prototype,"dataSourceName",void 0),m([w({type:String,json:{write:!0}})],Ky.prototype,"workspaceId",void 0),Ky=HC=m([H("esri.layers.support.source.RasterDataSource")],Ky);var WC;let rf=WC=class extends be{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:i}=this;return new WC({workspaceId:e,gdbVersion:t,dataSourceName:i})}};m([He({table:"table"})],rf.prototype,"type",void 0),m([w({type:String,json:{write:!0}})],rf.prototype,"workspaceId",void 0),m([w({type:String,json:{write:!0}})],rf.prototype,"gdbVersion",void 0),m([w({type:String,json:{write:!0}})],rf.prototype,"dataSourceName",void 0),rf=WC=m([H("esri.layers.support.source.TableDataSource")],rf);var JC,ZC;const J9e=nn()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let So=JC=class extends be{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,i){return Nz()(e,t,i)}castLeftTableSource(e){return Ma(KC(),e)}readRightTableSource(e,t,i){return Nz()(e,t,i)}castRightTableSource(e){return Ma(KC(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:i,rightTableSource:r,joinType:n}=this,o={leftTableKey:e,rightTableKey:t,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(r==null?void 0:r.clone())??void 0,joinType:n};return new JC(o)}};m([He({joinTable:"join-table"})],So.prototype,"type",void 0),m([w({type:String,json:{write:!0}})],So.prototype,"leftTableKey",void 0),m([w({type:String,json:{write:!0}})],So.prototype,"rightTableKey",void 0),m([w({json:{write:!0}})],So.prototype,"leftTableSource",void 0),m([ke("leftTableSource")],So.prototype,"readLeftTableSource",null),m([wt("leftTableSource")],So.prototype,"castLeftTableSource",null),m([w({json:{write:!0}})],So.prototype,"rightTableSource",void 0),m([ke("rightTableSource")],So.prototype,"readRightTableSource",null),m([wt("rightTableSource")],So.prototype,"castRightTableSource",null),m([He(J9e)],So.prototype,"joinType",void 0),So=JC=m([H("esri.layers.support.source.JoinTableDataSource")],So);let G$=null;function Nz(){return G$||(G$=Cg({types:KC()})),G$}let q$=null;function KC(){return q$||(q$={key:"type",base:null,typeMap:{"data-layer":hl,"map-layer":Zy}}),q$}const Z9e={key:"type",base:null,typeMap:{"join-table":So,"query-table":sc,raster:Ky,table:rf}};let hl=ZC=class extends be{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new ZC({fields:e,dataSource:t})}};m([He({dataLayer:"data-layer"})],hl.prototype,"type",void 0),m([w({type:[KI],json:{write:!0}})],hl.prototype,"fields",void 0),m([w({types:Z9e,json:{write:!0}})],hl.prototype,"dataSource",void 0),hl=ZC=m([H("esri.layers.support.source.DataLayerSource")],hl),hl.from=qi(hl);let nf=class extends St(be){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};m([w({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],nf.prototype,"onFields",void 0),m([w({type:String,json:{write:!0}})],nf.prototype,"operator",void 0),m([w({type:String,json:{write:!0}})],nf.prototype,"searchTerm",void 0),m([w({type:String,json:{write:!0}})],nf.prototype,"searchType",void 0),nf=m([H("esri.rest.support.FullTextSearch")],nf);const Oie=nf;var YC;const Fz=new ft({upperLeft:"upper-left",lowerLeft:"lower-left"});let sf=YC=class extends be{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new YC(le({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};m([w({type:Ut,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],sf.prototype,"extent",void 0),m([w({type:["view","edit"],json:{write:!0}})],sf.prototype,"mode",void 0),m([w({type:String,json:{read:Fz.read,write:Fz.write}})],sf.prototype,"originPosition",void 0),m([w({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],sf.prototype,"tolerance",void 0),sf=YC=m([H("esri.rest.support.QuantizationParameters")],sf);const Rie=sf,K9e=new ft({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var XC;const Dz=new ft({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Wa=XC=class extends be{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=le(e))}clone(){return new XC({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:le(this.statisticParameters)})}};m([w({type:Number,json:{write:!0}})],Wa.prototype,"maxPointCount",void 0),m([w({type:Number,json:{write:!0}})],Wa.prototype,"maxRecordCount",void 0),m([w({type:Number,json:{write:!0}})],Wa.prototype,"maxVertexCount",void 0),m([w({type:String,json:{write:!0}})],Wa.prototype,"onStatisticField",void 0),m([w({type:String,json:{write:!0}})],Wa.prototype,"outStatisticFieldName",void 0),m([w({type:String,json:{read:{source:"statisticType",reader:Dz.read},write:{target:"statisticType",writer:Dz.write}}})],Wa.prototype,"statisticType",void 0),m([w({type:Object})],Wa.prototype,"statisticParameters",void 0),m([Le("statisticParameters")],Wa.prototype,"writeStatisticParameters",null),Wa=XC=m([H("esri.rest.support.StatisticDefinition")],Wa);const Pie=Wa;var F5;const Y9e=new ft({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let nt=F5=class extends be{static from(e){return a3(F5,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const i={};for(const r in e){const n=e[r];Array.isArray(n)?i[r]=n.map(o=>o instanceof Date?o.getTime():o):n instanceof Date?i[r]=n.getTime():i[r]=n}t.parameterValues=i}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new F5(le({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};nt.MAX_MAX_RECORD_COUNT_FACTOR=5,m([w({json:{write:!0}})],nt.prototype,"aggregateIds",void 0),m([w({type:Boolean,json:{write:!0}})],nt.prototype,"cacheHint",void 0),m([w({type:Boolean,json:{default:!1,write:!0}})],nt.prototype,"compactGeometryEnabled",void 0),m([w({json:{write:!0}})],nt.prototype,"datumTransformation",void 0),m([wt("datumTransformation")],nt.prototype,"castDatumTransformation",null),m([w({type:Boolean,json:{default:!1,write:!0}})],nt.prototype,"defaultSpatialReferenceEnabled",void 0),m([w({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],nt.prototype,"distance",void 0),m([w({type:hl,json:{write:!0}})],nt.prototype,"dynamicDataSource",void 0),m([w({type:String,json:{write:!0}})],nt.prototype,"formatOf3DObjects",void 0),m([w({type:[Oie],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],nt.prototype,"fullText",void 0),m([w({type:String,json:{write:!0}})],nt.prototype,"gdbVersion",void 0),m([w({types:q0,json:{read:Xc,write:!0}})],nt.prototype,"geometry",void 0),m([w({type:Number,json:{write:!0}})],nt.prototype,"geometryPrecision",void 0),m([w({type:[String],json:{write:!0}})],nt.prototype,"groupByFieldsForStatistics",void 0),m([w({type:String,json:{write:!0}})],nt.prototype,"having",void 0),m([w({type:Date})],nt.prototype,"historicMoment",void 0),m([Le("historicMoment")],nt.prototype,"writeHistoricMoment",null),m([w({type:Number,json:{write:!0}})],nt.prototype,"maxAllowableOffset",void 0),m([w({type:Number,cast:e=>e<1?1:e>nt.MAX_MAX_RECORD_COUNT_FACTOR?nt.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],nt.prototype,"maxRecordCountFactor",void 0),m([w({type:["xyFootprint"],json:{write:!0}})],nt.prototype,"multipatchOption",void 0),m([w({type:Number,json:{read:{source:"resultRecordCount"}}})],nt.prototype,"num",void 0),m([w({json:{write:!0}})],nt.prototype,"objectIds",void 0),m([w({type:[String],json:{write:!0}})],nt.prototype,"orderByFields",void 0),m([w({type:[String],json:{write:!0}})],nt.prototype,"outFields",void 0),m([w({type:rt,json:{name:"outSR",write:!0}})],nt.prototype,"outSpatialReference",void 0),m([w({type:[Pie],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],nt.prototype,"outStatistics",void 0),m([w({json:{write:!0}})],nt.prototype,"parameterValues",void 0),m([Le("parameterValues")],nt.prototype,"writeParameterValues",null),m([w({type:st,json:{write:!0}})],nt.prototype,"pixelSize",void 0),m([w({type:Rie,json:{write:!0}})],nt.prototype,"quantizationParameters",void 0),m([w({type:[Object],json:{write:!0}})],nt.prototype,"rangeValues",void 0),m([w({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],nt.prototype,"relationParameter",void 0),m([w({type:String,json:{write:!0}})],nt.prototype,"resultType",void 0),m([w({type:Boolean,json:{default:!1,write:!0}})],nt.prototype,"returnCentroid",void 0),m([w({type:Boolean,json:{default:!1,write:!0}})],nt.prototype,"returnDistinctValues",void 0),m([w({type:Boolean,json:{default:!0,write:!0}})],nt.prototype,"returnExceededLimitFeatures",void 0),m([w({type:Boolean,json:{write:!0}})],nt.prototype,"returnGeometry",void 0),m([w({type:Boolean,json:{default:!1,write:!0}})],nt.prototype,"returnQueryGeometry",void 0),m([w({type:Boolean,json:{default:!1,write:!0}})],nt.prototype,"returnM",void 0),m([w({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],nt.prototype,"returnZ",void 0),m([w({type:rt,json:{write:!0}})],nt.prototype,"sourceSpatialReference",void 0),m([He(K9e,{ignoreUnknown:!1,name:"spatialRel"})],nt.prototype,"spatialRelationship",void 0),m([w({type:Number,json:{read:{source:"resultOffset"}}})],nt.prototype,"start",void 0),m([Le("start"),Le("num")],nt.prototype,"writeStart",null),m([w({type:String,json:{write:!0}})],nt.prototype,"sqlFormat",void 0),m([w({type:String,json:{write:!0}})],nt.prototype,"text",void 0),m([w({type:rn,json:{write:!0}})],nt.prototype,"timeExtent",void 0),m([w({type:Boolean,json:{default:!1,write:!0}})],nt.prototype,"timeReferenceUnknownClient",void 0),m([He(Y9e,{ignoreUnknown:!1}),w({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null&&this.distance>0}}}}})],nt.prototype,"units",void 0),m([w({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],nt.prototype,"where",void 0),m([Le("where")],nt.prototype,"writeWhere",null),nt=F5=m([H("esri.rest.support.Query")],nt);const ys=nt;function V_(e){return!!(e!=null&&typeof e=="object"&&"createQuery"in e&&e.createQuery&&"on"in e&&e.on)}let oc=class extends qo.EventedAccessor{constructor(t){super(t),this._selectionMap=new Wd,this._sources=new Oe,this._trashCan=[],this._layerEditHandles=new Oe,this._vizTaskId=0,this.showHighlight=!0}initialize(){this.addHandles([ge(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),tn(()=>this.sources,"change",i=>{const r=this._selectionMap;for(const n of i.removed)r.delete(n);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);const t=new Oe;this.view.when().then(()=>{this.view.map&&(this.view.map.allLayers.flatten(i=>"sublayers"in i&&i.sublayers?i.sublayers:null).forEach(i=>{(V_(i)&&!Z_e(i)||Vp(i))&&t.add(i)}),this.sources=t)})}destroy(){this._layerEditHandles.drain(Bi)}get selections(){return Array.from(this._selectionMap.entries()).map(t=>{const[i,r]=t;return{layer:i,selection:[...r.selection]}})}get count(){let t=0;for(const i of this._selectionMap.values())t+=i.selection.length;return t}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(t){ip(t,this._sources)}async getSelectedFeatures(t,i={},r="layerView"){const{view:n,selections:o}=this,c=(t!==void 0?o.filter(y=>t.includes(y.layer)):o).filter(y=>y.selection.length>0).map(async y=>{const{layer:v,selection:_}=y,I=Vp(v)?v.parent:v;if(I==null||!zz(I))return null;if(r==="layer")return Vz(I,_,i);if(jz(I))return null;const $=await n.whenLayerView(I).catch(()=>null);return $?Vz($,_,i):null});return(await Promise.all(c)).filter(y=>y!=null)}updateSelection(t){const i=new Map;for(const[o,c]of this._selectionMap)i.set(o,[...c.selection]);let r=!1;const n=t.current.concat(t.added);for(const o of n){const c=o.sourceLayer,y=o.getObjectId();if(this.sources.includes(c)&&(V_(c)||Vp(c))&&y!==null){const v=s3(i,c,()=>[]);v.includes(y)||(v.push(y),r=!0)}}for(const o of t.removed){const c=o.sourceLayer,y=o.getObjectId();if(this.sources.includes(c)&&(V_(c)||Vp(c))&&y!==null){const v=i.get(c),_=v==null?void 0:v.indexOf(y);_!==void 0&&_>=0&&(v==null||v.splice(_,1),r=!0)}}if(r){const{_selectionMap:o,_trashCan:c}=this,y=[];for(const[v,_]of i){const I=o.get(v);I!==void 0&&c.push(I),o.set(v,{selection:_}),y.push({layer:v,selection:_,...UF(I!==void 0?I.selection:[],_)})}this._onSelectionChange(y)}}setSelection(t,i){this._setSelection(t,i)}getSelection(t){const i=this._selectionMap.get(t);return i==null?void 0:i.selection}appendToSelection(t,i){const r=this._selectionMap.get(t),n=r!==void 0?[...r.selection]:[];for(const o of i)n.includes(o)||n.push(o);this._setSelection(t,n)}removeFromSelection(t,i){const r=this._selectionMap.get(t);if(!r)return;const n=[];for(const o of r.selection)i.includes(o)||n.push(o);this._setSelection(t,n)}toggleInSelection(t,i){const r=this._selectionMap.get(t);if(!r||r.selection.length===0)return void this._setSelection(t,i);const n=new Set(r.selection),o=new Set(i),c=Hye(n,o);this._setSelection(t,Array.from(c))}clear(){const t=this._selectionMap.values();this._trashCan.push(...t);const i=[];for(const[r,n]of this._selectionMap.entries())i.push({layer:r,added:[],removed:[...n.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(i)}_onSelectionChange(t){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:t})}_refreshVisualization(){var c;if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;){const y=this._trashCan.pop();(c=y==null?void 0:y.highlightHandle)==null||c.remove()}const{sources:t,view:i,_selectionMap:r,showHighlight:n}=this,o=this._vizTaskId;for(const y of t){const v=r.get(y),_=Vp(y)?y.parent:y;if(_!=null&&zz(_)){if(jz(_))continue;i.whenLayerView(_).then(I=>{var $;($=v==null?void 0:v.highlightHandle)==null||$.remove(),v!=null&&n&&o===this._vizTaskId&&"highlight"in I&&typeof I.highlight=="function"&&v.selection.length>0&&(v.highlightHandle=I.highlight(v.selection,"selection"))}).catch(()=>{var I;(I=v==null?void 0:v.highlightHandle)==null||I.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(Bi);for(const t of this.sources){const i=Vp(t)?t.parent:t;if(i!=null&&V_(i)){const r=i.on("edits",n=>{this._handleEditChanges(n,t)});this._layerEditHandles.push(r)}}}_handleEditChanges(t,i){if(t.deletedFeatures!==void 0&&t.deletedFeatures.length>0&&this._selectionMap.has(i)){const r=t.deletedFeatures.filter(n=>n.error==null).map(n=>n.objectId).filter(Ar);this.removeFromSelection(i,r)}}_setSelection(t,i){if(!this.sources.includes(t))throw new Error(`Cannot set selection on layer ${t.title} because it is not in 'sources'`);const r=this._selectionMap.get(t);if(r===void 0||!Q9e(r,{selection:i})){r!==void 0&&this._trashCan.push(r),this._selectionMap.set(t,{selection:[...i]});const n={layer:t,selection:[...i],...UF(r!==void 0?r.selection:[],i)};this._onSelectionChange([n])}}};m([w({readOnly:!0,nonNullable:!0})],oc.prototype,"selections",null),m([w({readOnly:!0,nonNullable:!0})],oc.prototype,"count",null),m([w({constructOnly:!0,nonNullable:!0})],oc.prototype,"view",void 0),m([w({readOnly:!0,nonNullable:!0})],oc.prototype,"hasSelection",null),m([w()],oc.prototype,"showHighlight",void 0),m([w()],oc.prototype,"sources",null),oc=m([H("esri.views.SelectionManager")],oc);const jz=e=>{var t;return Vp(e)?((t=e.parent)==null?void 0:t.isTable)===!0:e.isTable},X9e=e=>e.layer!==void 0,zz=e=>(e==null?void 0:e.when)!==void 0,Q9e=(e,t)=>{if(e==null&&t==null)return!0;if(e!=null&&t==null||e==null&&t!=null)return!1;if(e!=null&&t!=null&&e.selection!=null&&t.selection!=null){const i=[...e.selection],r=[...t.selection];if(i.length!==r.length)return!1;i.sort(),r.sort();for(let n=0;n<i.length;n++)if(i[n]!==r[n])return!1}return!0},Vz=async(e,t,i={})=>{let r;if(X9e(e)){const n=e;r=n===void 0?null:await n.queryFeatures(new ys({...i,objectIds:t})).then(o=>({data:o,layer:e.layer}))}else{const n=e;r=n===void 0?null:await n.queryFeatures(new ys({...i,objectIds:t})).then(o=>({data:o,layer:n}))}return r},e4e=oc;let $w=class extends St(Ve){constructor(t){super(t),this.accentColor=new je([255,127,0]),this.textColor=new je([255,255,255])}};m([w({type:je,nonNullable:!0})],$w.prototype,"accentColor",void 0),m([w({type:je,nonNullable:!0})],$w.prototype,"textColor",void 0),$w=m([H("esri.views.Theme")],$w);const QC=$w;var Uz;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(Uz||(Uz={}));const Nie=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],Fie={};function Die(e){return!!Fie[e]}function t4e(e){for(const t of e)if(!Die(t))return!1;return!0}Nie.forEach(e=>{Fie[e]=!0});let i4e=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:i,priority:r},n)=>{var o;return(o=this.inputManager)==null?void 0:o.installHandlers(n,[i],r)})}disconnect(){this.inputManager&&this._handlers.forEach((t,i)=>{var r;return(r=this.inputManager)==null?void 0:r.uninstallHandlers(i)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,i,r,n){const o=Array.isArray(t)?t:t.split(",");if(!t4e(o))return o.some(Die)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let c,y;Array.isArray(i)?y=i:(c=i,y=[]),typeof r=="function"?c=r:n=r,n=n??Hd.DEFAULT;const v=this._createUniqueGroupName(),_=new r4e(this.view,o,y,c);this._handlers.set(v,{handler:_,priority:n});for(const I of o){const $=this._handlerCounts.get(I)||0;this._handlerCounts.set(I,$+1)}return this.inputManager&&this.inputManager.installHandlers(v,[_],n),ei(()=>this._removeHandler(v,o))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,i){if(this._handlers.has(t)){this._handlers.delete(t);for(const r of i){const n=this._handlerCounts.get(r);n===void 0||(n===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,n-1))}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},r4e=class extends sn{constructor(t,i,r,n){super(!0),this._latestDragStart=void 0,this.view=t;for(const o of i)switch(o){case"click":this.registerIncoming("click",r,c=>n(o4e(t,c)));break;case"double-click":this.registerIncoming("double-click",r,c=>n(a4e(t,c)));break;case"immediate-click":this.registerIncoming("immediate-click",r,c=>n(l4e(t,c)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,c=>n(u4e(t,c)));break;case"hold":this.registerIncoming("hold",r,c=>n(c4e(t,c)));break;case"drag":this.registerIncoming("drag",r,c=>{const y=this._wrapDrag(c);y&&n(y)});break;case"key-down":this.registerIncoming("key-down",r,c=>n(h4e(c)));break;case"key-up":this.registerIncoming("key-up",r,c=>n(d4e(c)));break;case"pointer-down":this.registerIncoming("pointer-down",r,c=>n(Tv(c,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,c=>n(Tv(c,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,c=>n(Tv(c,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,c=>n(p4e(c)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,c=>n(f4e(c)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,c=>n(Tv(c,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,c=>n(Tv(c,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,c=>{n(y4e(c))});break;case"focus":this.registerIncoming("focus",r,c=>{n(n4e(c))});break;case"blur":this.registerIncoming("blur",r,c=>{n(s4e(c))})}}_wrapDrag(t){const i=t.data,{x:r,y:n}=i.center,{action:o,pointerType:c,button:y}=i;if(o==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const v=i.pointer.native,_=i.buttons,{cancelable:I,timestamp:$}=t,A={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return o==="end"&&(this._latestDragStart=void 0),{type:"drag",action:o,x:r,y:n,origin:A,pointerType:c,button:y,buttons:_,radius:i.radius,angle:aX(i.angle),native:v,timestamp:$,cancelable:I,stopPropagation:()=>t.stopPropagation(),async:k=>t.async(k),preventDefault:()=>t.preventDefault()}}};function n4e(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function s4e(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function o4e(e,t){const{pointerType:i,button:r,buttons:n,x:o,y:c,native:y,eventId:v}=t.data,{cancelable:_,timestamp:I}=t;return{type:"click",pointerType:i,button:r,buttons:n,x:o,y:c,native:y,timestamp:I,screenPoint:gn(o,c),mapPoint:M3(e,o,c),eventId:v,cancelable:_,stopPropagation:()=>t.stopPropagation(),async:$=>t.async($),preventDefault:()=>t.preventDefault()}}function a4e(e,t){const{pointerType:i,button:r,buttons:n,x:o,y:c,native:y,eventId:v}=t.data,{cancelable:_,timestamp:I}=t;return{type:"double-click",pointerType:i,button:r,buttons:n,x:o,y:c,native:y,timestamp:I,mapPoint:M3(e,o,c),eventId:v,cancelable:_,stopPropagation:()=>t.stopPropagation(),async:$=>t.async($),preventDefault:()=>t.preventDefault()}}function l4e(e,t){const{pointerType:i,button:r,buttons:n,x:o,y:c,native:y,eventId:v}=t.data,_=y.pointerId,{cancelable:I,timestamp:$}=t;return{type:"immediate-click",pointerId:_,pointerType:i,button:r,buttons:n,x:o,y:c,native:y,timestamp:$,mapPoint:M3(e,o,c),eventId:v,cancelable:I,stopPropagation:()=>t.stopPropagation(),async:A=>t.async(A),preventDefault:()=>t.preventDefault()}}function u4e(e,t){const{pointerType:i,button:r,buttons:n,x:o,y:c,native:y,eventId:v}=t.data,_=y.pointerId,{cancelable:I,timestamp:$}=t;return{type:"immediate-double-click",pointerId:_,pointerType:i,button:r,buttons:n,x:o,y:c,native:y,timestamp:$,mapPoint:M3(e,o,c),eventId:v,cancelable:I,stopPropagation:()=>t.stopPropagation(),async:A=>t.async(A),preventDefault:()=>t.preventDefault()}}function c4e(e,t){const{pointerType:i,button:r,buttons:n,x:o,y:c,native:y}=t.data,{cancelable:v,timestamp:_}=t;return{type:"hold",pointerType:i,button:r,buttons:n,x:o,y:c,native:y,timestamp:_,mapPoint:M3(e,o,c),cancelable:v,stopPropagation:()=>t.stopPropagation(),async:I=>t.async(I),preventDefault:()=>t.preventDefault()}}function M3(e,t,i){return e.toMap(gn(t,i),{exclude:[]})}function h4e(e){const{key:t,repeat:i,native:r}=e.data,{cancelable:n,timestamp:o}=e;return{type:"key-down",key:t,repeat:i,native:r,timestamp:o,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:c=>e.async(c),preventDefault:()=>e.preventDefault()}}function d4e(e){const{key:t,native:i}=e.data,{cancelable:r,timestamp:n}=e;return{type:"key-up",key:t,native:i,timestamp:n,cancelable:r,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}function Tv(e,t){const{x:i,y:r,button:n,buttons:o,native:c,eventId:y}=e.data,v=c.pointerId,_=c.pointerType,{cancelable:I,timestamp:$}=e;return{type:t,x:i,y:r,pointerId:v,pointerType:_,button:n,buttons:o,native:c,timestamp:$,eventId:y,cancelable:I,stopPropagation:()=>e.stopPropagation(),async:A=>e.async(A),preventDefault:()=>e.preventDefault()}}function p4e(e){const{x:t,y:i,buttons:r,native:n,eventId:o}=e.data.currentEvent,{button:c}=e.data.startEvent,y=e.data.startEvent.native.pointerId,v=e.data.startEvent.native.pointerType,_=e.data.action,I={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:$,timestamp:A}=e;return{type:"pointer-drag",x:t,y:i,pointerId:y,pointerType:v,button:c,buttons:r,action:_,origin:I,native:n,timestamp:A,eventId:o,cancelable:$,stopPropagation:()=>e.stopPropagation(),async:k=>e.async(k),preventDefault:()=>e.preventDefault()}}function f4e(e){const{cancelable:t,data:i,timestamp:r}=e,{x:n,y:o,deltaY:c,native:y}=i;return{type:"mouse-wheel",x:n,y:o,deltaY:c,native:y,timestamp:r,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:v=>e.async(v),preventDefault:()=>e.preventDefault()}}function y4e(e){const{action:t,state:i,device:r}=e.data,{cancelable:n,timestamp:o}=e,{buttons:c,axes:y}=i;return{type:"gamepad",device:r,timestamp:o,action:t,buttons:c,axes:y,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:v=>e.async(v),preventDefault:()=>e.preventDefault()}}var A2,Bz,Gz;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(A2||(A2={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(Bz||(Bz={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(Gz||(Gz={}));function m4e(e){return[e.on("before-add",t=>{const i=t.item;if(i==null||e.includes(i))return _e.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();i.onAdd()}),e.on("after-remove",t=>{const i=t.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function e7(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(A2.USER)&&e.getEditableFlag(A2.MANAGER)}function Kl(e){return gn(e.x,e.y)}function jie(e,t){var r;const i=(r=e instanceof HTMLElement?e:e.surface)==null?void 0:r.getBoundingClientRect();return i?gn(t.clientX-i.left,t.clientY-i.top):gn(0,0)}function zie(e,t){return t instanceof Event?jie(e,t):Kl(t)}function Vie(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let g4e=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,i){const r=()=>t.stopPropagation();switch(t.type){case"pointer-move":Hz(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:t.action==="start"?this._externallyDragging=!0:t.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(r(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!Wz(t))break;const n=Kl(t),o=cy(n,t.pointerType,i.forEachTool);if(o==null)break;const c=o.manipulator,y=o.tool;c==null||y==null||!c.interactive||c.grabbable&&c.grabbableForEvent(t)||!c.grabbing||c.dragging||this._releaseManipulatorBeforeDragging(c,t,i),c!=null&&y!=null&&c.interactive&&c.grabbable&&c.grabbableForEvent(t)&&!c.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:c,tool:y,start:n,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(o.tool)),c.grabbing=!0,c.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:n}),r());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,i);break;case"pointer-drag":{if(!Wz(t))break;const n=this._grabbedManipulators.get(t.pointerId),o=n==null?void 0:n.manipulator,c=n==null?void 0:n.tool;if(o==null||c==null)break;const y=Kl(t);y.x=co(y.x,0,i.view.width),y.y=co(y.y,0,i.view.height);const v=n.start,_=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(o.dragging=!0,_?o.events.emit("drag",{action:"update",start:v,screenPoint:y}):o.events.emit("drag",{action:"start",start:v,screenPoint:y,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:c,manipulator:o,start:v}));break;case"end":o.dragging=!1,_&&o.events.emit("drag",{action:"end",start:v,screenPoint:y}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,i)}r();break}case"immediate-click":{const n=Kl(t),o=cy(n,t.pointerType,i.forEachTool);if(v4e(t)||i.forEachTool(_=>{if((o==null||o.tool!==_||_.automaticManipulatorSelection)&&_.manipulators){let I=!1;_.manipulators.forEach(({manipulator:$})=>{$.selected&&($.selected=!1,I=!0)}),I&&_.onManipulatorSelectionChanged&&_.onManipulatorSelectionChanged()}}),o==null)break;const{manipulator:c,tool:y}=o;if(!c.interactive)break;c.selectable&&y.automaticManipulatorSelection&&(c.selected=!c.selected,y.onManipulatorSelectionChanged&&y.onManipulatorSelectionChanged());const v=t.native.shiftKey;c.events.emit("immediate-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:v,stopPropagation:r}),H$(c,r);break}case"click":{const n=Kl(t),o=cy(n,t.pointerType,i.forEachTool),c=o==null?void 0:o.manipulator;if(c==null||!c.interactive)break;const y=t.native.shiftKey;c.events.emit(t.type,{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:y}),r();break}case"double-click":{const n=Kl(t),o=cy(n,t.pointerType,i.forEachTool),c=o!=null?o.manipulator:null;if(c==null||!c.interactive)break;const y=t.native.shiftKey;c.events.emit("double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:y,stopPropagation:r}),H$(c,r);break}case"immediate-double-click":{const n=Kl(t),o=cy(n,t.pointerType,i.forEachTool),c=o!=null?o.manipulator:null;if(c==null||!c.interactive)break;const y=t.native.shiftKey;c.events.emit("immediate-double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:y,stopPropagation:r}),t.pointerType==="mouse"&&H$(c,r);break}}this._onFocusChange(i.forEachTool)}_releaseManipulatorBeforeDragging(t,i,r){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:Kl(i)}),this._grabbedManipulators.forEach(({manipulator:n},o)=>{n===t&&this._grabbedManipulators.delete(o)}),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(t,i){var n;const r=(n=this._grabbedManipulators.get(t.pointerId))==null?void 0:n.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:Kl(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorRelease(i.setActiveTool))}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=qz(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=qz(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:n})=>{i.add(n)}),this._hoveredManipulators.forEach(({tool:n})=>{r.add(n)}),t(n=>{n.hasGrabbedManipulators=i.has(n),n.hasHoveredManipulators=r.has(n);const o=this._grabbedManipulators.values(),c=pye(o,({tool:y})=>y===n);n.firstGrabbedManipulator=c!=null?c.manipulator:null})}clearPointers(t,{forEachTool:i,setActiveTool:r},n=!0,o){const c=(y,v)=>y===t&&(o==null||o===v);this._grabbedManipulators.forEach(({tool:y,manipulator:v,pointerType:_},I)=>{c(y,v)&&(this._grabbedManipulators.delete(I),v.grabbing=!1,v.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:_}))}),this._draggedManipulators.forEach(({tool:y,manipulator:v},_)=>{c(y,v)&&(this._draggedManipulators.delete(_),v.dragging=!1,v.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:y,manipulator:v},_)=>{c(y,v)&&(this._hoveredManipulators.delete(_),v.hovering=!1)}),this._afterManipulatorRelease(r),this._onFocusChange(i)}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(gn(i.x,i.y),r,i.pointerType,t)})}handleHoverEvent(t,i){const r=t.type;r!=="pointer-up"&&r!=="immediate-click"&&r!=="pointer-move"||!Hz(t.pointerType)||(r!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(t.pointerId):this._updateHoveredStateForPointerAtScreenPosition(Kl(t),t.pointerId,t.pointerType,i))}_updateHoveredStateForPointerAtScreenPosition(t,i,r,n){var y;let o=cy(t,r,n);const c=(y=this._hoveredManipulators.get(i))==null?void 0:y.manipulator;o==null||o.manipulator.interactive||(o=null),o!=null&&c===o.manipulator||(c!=null&&(c.hovering=!1),o!=null?(o.manipulator.hovering=!0,this._hoveredManipulators.set(i,o)):this._hoveredManipulators.delete(i),this._onFocusChange(n))}_afterManipulatorRelease(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(t){this._hoveredManipulators.forEach(({manipulator:i},r)=>{t===r&&(this._hoveredManipulators.delete(t),i.hovering=!1)})}};function qz(e){for(const{manipulator:t}of e.values())if(t!=null&&t.interactive){if(t.grabbing&&t.grabCursor)return t.grabCursor;if(t.cursor)return t.cursor}return null}function cy(e,t,i){let r=null;return i(n=>{if(n.manipulators==null||!e7(n))return!1;const o=n.manipulators.intersect(e,t);return o!=null&&(r={tool:n,manipulator:o},!0)}),r}function Hz(e){return e==="mouse"}function Wz(e){return e.pointerType!=="mouse"||e.button===0}function v4e(e){return!!e.native.shiftKey}function H$(e,t){e!=null&&e.consumesClicks&&t()}const Jz="attached",W$="tools",w4e=1e3;let Yl=class extends Ve{constructor(t){super(t),this._updatingHandles=new o0,this._clock=Lg,this._manipulatorState=new g4e,this.tools=new Oe,this.cursor=null,this._interacting=!1,this._interactingTimeout=w4e,this._interactingTimeoutHandle=null,this._forEachTool=i=>{for(const r of this.tools.items)if(i(r))return}}initialize(){this.addHandles([this.view.on(Nie,t=>{this._handleInputEvent(t)},Hd.TOOL),...m4e(this.tools),this.tools.on("before-add",({item:t})=>{this._updateToolEditableFlag(t)}),this.tools.on("before-remove",({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(t=>t.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(t!=null&&!this.view.ready)return void _e.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const i=this.activeTool;this._set("activeTool",t),i!=null&&i.deactivate(),t!=null&&t.activate(),this._removeIncompleteTools(t);for(const r of this.tools){this._updateToolEditableFlag(r);const n=e7(r);this.activeTool!=null&&n||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!n)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(t=>t.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Bi(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){var t;this.view.type==="3d"?this.addHandles([ge(()=>{const{state:i}=this.view;return"camera"in i&&i.camera},()=>this._forEachManipulator(i=>i.onViewChange())),(t=this.view.elevationProvider)==null?void 0:t.on("elevation-change",i=>this._forEachManipulator(r=>r.onElevationChange(i)))],Jz):this.addHandles(ge(()=>this.view.extent,()=>this._forEachManipulator(i=>i.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(Jz),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:r})=>t(r,i))})}_handleInputEvent(t){let i=!1;const r={...t,stopPropagation:()=>{i=!0,t.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool(n=>{!i&&n.visible&&n.handleInputEvent(r)}),!i&&t.type==="key-down"&&t.key==="Escape"&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor(),t.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(W$),this._forEachTool(t=>{if(t instanceof Ve){const i=ge(()=>[t.cursor,t.visible,t.editable],()=>{e7(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(i,W$)}t.manipulators&&this.addHandles([t.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),t.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],W$)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){var i;(i=t.setEditableFlag)==null||i.call(t,A2.MANAGER,this.activeTool==null||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;t==null&&this._forEachTool(i=>!(i.cursor==null||!i.visible)&&(t=i.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter(i=>(t==null||i!==t)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){}};m([w({constructOnly:!0,nonNullable:!0})],Yl.prototype,"view",void 0),m([w({value:null})],Yl.prototype,"activeTool",null),m([w({readOnly:!0,type:Oe})],Yl.prototype,"tools",void 0),m([w({readOnly:!0})],Yl.prototype,"cursor",void 0),m([w({readOnly:!0})],Yl.prototype,"updating",null),m([w()],Yl.prototype,"_interacting",void 0),m([w({readOnly:!0})],Yl.prototype,"interacting",null),Yl=m([H("esri.views.ToolViewManager")],Yl);let Yy=class extends Ve{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",t.mapping==="standard"?this._detectedDeviceType="standard":b4e.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){const t=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return _4e[this.deviceType]}};m([w({nonNullable:!0,readOnly:!0})],Yy.prototype,"nativeIndex",void 0),m([w({type:String,readOnly:!0})],Yy.prototype,"deviceType",null),m([w({type:Number,readOnly:!0})],Yy.prototype,"axisThreshold",null),Yy=m([H("esri.views.input.gamepad.GamepadInputDevice")],Yy);const MR=Yy,b4e=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),_4e={standard:.15,spacemouse:.025,unknown:0};let Ew=class extends Ve{constructor(...t){super(...t),this.devices=new Oe,this.enabledFocusMode="document"}};m([w({type:Oe.ofType(MR),readOnly:!0})],Ew.prototype,"devices",void 0),m([w({type:["document","view","none"]})],Ew.prototype,"enabledFocusMode",void 0),Ew=m([H("esri.views.input.gamepad.GamepadSettings")],Ew);const S4e=Ew;let D5=class extends Ve{constructor(){super(...arguments),this.gamepad=new S4e}};m([w({readOnly:!0})],D5.prototype,"gamepad",void 0),D5=m([H("esri.views.input.Input")],D5);const x4e=D5,AR=()=>qt.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;let zh=class extends Ve{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};m([w({type:Boolean,nonNullable:!0})],zh.prototype,"enabled",void 0),m([w({type:MR})],zh.prototype,"device",void 0),m([w({type:["pan","zoom"],nonNullable:!0})],zh.prototype,"mode",void 0),m([w({type:["forward-down","forward-up"],nonNullable:!0})],zh.prototype,"tiltDirection",void 0),m([w({type:Number,nonNullable:!0})],zh.prototype,"velocityFactor",void 0),zh=m([H("esri.views.navigation.gamepad.GamepadSettings")],zh);const Uie=zh;let of=class extends Ve{constructor(t){super(t),this.browserTouchPanEnabled=!0,this.gamepad=new Uie,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!AR()}};m([w({type:Boolean})],of.prototype,"browserTouchPanEnabled",void 0),m([w({type:Uie,nonNullable:!0})],of.prototype,"gamepad",void 0),m([w({type:Boolean})],of.prototype,"momentumEnabled",void 0),m([w({type:Boolean})],of.prototype,"mouseWheelZoomEnabled",void 0),of=m([H("esri.views.navigation.Navigation")],of);const Bie=of,Gie={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},qie=Object.values(Gie),Hie=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${qie.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),I4e=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${qie.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),T4e=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function OYe(e){return Hie.test(e)}function np(e){if(e==null)return null;const t=cr(e),i=(t==null?void 0:t.path.match(Hie))||(t==null?void 0:t.path.match(I4e));if(!i)return null;const[,r,n,o,c]=i,y=n.indexOf("/");return{title:CR(y!==-1?n.slice(y+1):n),serverType:Gie[o.toLowerCase()],sublayer:c!=null&&c!==""?parseInt(c,10):null,url:{path:r}}}function $4e(e){const t=cr(e).path.match(T4e);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function CR(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function E4e(e,t){const i=[];if(e){const r=np(e);r!=null&&r.title&&i.push(r.title)}if(t){const r=CR(t);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function Wie(e){let t=Ta(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")))}function M4e(e,t){return e&&vY(wY(e,t))}function A4e(e){let{url:t}=e;if(!t)return{url:t};t=wY(t,e.logger);const i=cr(t),r=np(i.path);let n;if(r!=null)r.sublayer!=null&&e.layer.layerId==null&&(n=r.sublayer),t=r.url.path;else if(e.nonStandardUrlAllowed){const o=$4e(i.path);o!=null&&(t=o.serviceUrl,n=o.sublayerId)}return{url:vY(t),layerId:n}}function C4e(e,t,i,r,n){O0(t,r,"url",n),r.url&&e.layerId!=null&&(r.url=x0(r.url,i,e.layerId.toString()))}function RYe(e){if(!e)return!1;const t=e.toLowerCase(),i=t.includes("/services/"),r=t.includes("/mapserver/wmsserver"),n=t.includes("/imageserver/wmsserver"),o=t.includes("/wmsserver");return i&&(r||n||o)}function PYe(e){var r;if(!e)return!1;const t=new Gd(Xs(e)),i=(r=t.authority)==null?void 0:r.toLowerCase();return i==="server.arcgisonline.com"||i==="services.arcgisonline.com"}var Zz;function k4e(e){var r;if(e.type==="integrated-mesh-3dtiles")return null;const t=e.url?np(e.url):void 0;return!(((r=e.spatialReference)==null?void 0:r.vcsWkid)==null&&t!=null&&t.serverType==="ImageServer")&&Jie(e)&&e.heightModelInfo?e.heightModelInfo:L4e(e)?DI.deriveUnitFromSR(R4e,e.spatialReference):null}function Jie(e){return"heightModelInfo"in e}function Zie(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function L4e(e){return Zie(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):Kie(e)}function O4e(e){return e.layers!=null||Kie(e)||Zie(e)||Jie(e)}function Kie(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"focusArea":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(Zz||(Zz={}));const R4e=new DI({heightModel:"gravity-related-height"});var i4;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(i4||(i4={}));let t7,J$=null;async function P4e(e){J$||(J$=de(()=>import("./geometryServiceUtils-Bdudlwyl.js"),[],import.meta.url).then(t=>t7=t)),await J$,Gi(e)}async function Yie(e,t,i,r){if(!e)return null;const n=e.spatialReference;return nh()||Ml(n,t)?sh(e,t):t7?t7.projectGeometry(e,t,i,r):(await Promise.race([P4e(r),Qc(r)]),Yie(e,t,i,r))}let Si=class extends Ve{constructor(t){super(t),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=_0(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var r,n,o,c;const t=(r=this.map)==null?void 0:r.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:t==null?void 0:t.basemap,layers:(n=t==null?void 0:t.basemap)==null?void 0:n.baseLayers},{layers:t==null?void 0:t.layers},{parent:t==null?void 0:t.ground,layers:(o=t==null?void 0:t.ground)==null?void 0:o.layers},{parent:t==null?void 0:t.basemap,layers:(c=t==null?void 0:t.basemap)==null?void 0:c.referenceLayers}),i}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let t;if(this._collectLayers(this.mapCollections,r=>{const n=this._getSupportedSpatialReferences(r);if(n.length>0){const o=this._narrowDownSpatialReferenceCandidates(t,n);o!=null&&(t=o)}return(t==null?void 0:t.length)===1})&&(t==null?void 0:t.length)!==1)return{updating:!0};const i=this._pickSpatialReferenceCandidate(t);return{spatialReference:(i==null?void 0:i.spatialReference)??null,viewingMode:(i==null?void 0:i.viewingMode)??null,updating:!1}}get _tileInfoTask(){var o,c;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const t=(o=this.map)==null?void 0:o.call(this),i=this.spatialReference;if(!i)return{updating:this._spatialReferenceTask.updating};let r;const n=this._collectLayers([{parent:t==null?void 0:t.basemap,layers:(c=t==null?void 0:t.basemap)==null?void 0:c.baseLayers},{layers:t==null?void 0:t.layers}],y=>{var v;return!(!("tileInfo"in y)||!((v=y.tileInfo)!=null&&v.spatialReference.equals(i)))&&(r=y,!0)},y=>"tileInfo"in y);return r?{tileInfo:r.tileInfo,updating:!1}:{updating:n}}get _heightModelInfoTask(){var r;if(!this.required.heightModelInfo||this.suspended&&((r=this._get("_heightModelInfoTask"))!=null&&r.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};let t={};const i=this._collectLayers(this.mapCollections,n=>{var c,y;const o=k4e(n);return!!o&&(t={heightModelInfo:o,vcsWkid:(c=n.spatialReference)==null?void 0:c.vcsWkid,latestVcsWkid:(y=n.spatialReference)==null?void 0:y.latestVcsWkid},!0)},n=>O4e(n));return{...t,updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=[],i=this._collectLayers(this.mapCollections,r=>{const n="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),o=this.requiresExtentInSpatialReference?null:n[0],c=n.find(y=>y.spatialReference.equals(this.spatialReference))??o;if(c)return t.push({extent:c,layer:r}),!0;if(this._getSupportedSpatialReferences(r).length>0)for(const y of n)t.push({extent:y,layer:r});return!1});return{candidates:t,updating:i}}get _extentTask(){const{candidates:t,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(t==null||t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(t),n=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=_0(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:n.clone(),task:kO(async o=>{try{const c=await Yie(r.extent,n,"portalItem"in r.layer?r.layer.portalItem:void 0,o);this._projectExtentTask={...this._projectExtentTask,task:null,output:c}}catch{if(Tl(o))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,i){if(t==null)return i;const r=new Array;for(const n of t)for(const o of i){if(!n.spatialReference.equals(o.spatialReference))continue;const c=F4e(n.viewingMode,o.viewingMode);if(c!==!1){r.push({spatialReference:n.spatialReference,viewingMode:c});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(t){const i=this.defaultSpatialReference;return t==null||t.length<1?i?{spatialReference:i,viewingMode:null}:null:(i!=null&&t.length>1&&t.some(({spatialReference:r})=>r.equals(i))&&(t=t.filter(({spatialReference:r})=>r.equals(i))),t.length>1&&t.some(({viewingMode:r})=>r!==i4.Local)&&(t=t.filter(({viewingMode:r})=>r!==i4.Local)),t[0])}_getSupportedSpatialReferences(t){const i="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const n of i){const o=this.getSpatialReferenceSupport(n,t);if(o!=null){const c=o.constraints??[{spatialReference:n,viewingMode:null}];for(const{spatialReference:y,viewingMode:v}of c)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!y.equals(this.userSpatialReference)||r.push({spatialReference:y,viewingMode:v})}}return r}_pickExtentCandidate(t){const i=this.spatialReference;return t.find(({extent:r})=>i.equals(r.spatialReference))||t[0]}_collectLayers(t,i,r=()=>!0){var o;if(this._loadMaybe((o=this.map)==null?void 0:o.call(this))!=="loaded")return!0;const n=new N4e(r,i);for(const c of t)if(this._collectCollection(c,n),n.done||n.preloading===this.sourcePreloadCount)break;return n.updating}_collectCollection(t,i){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of t.layers)if(i.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":if(i.updating||(i.done=i.pushLayer(r)),i.done||i.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.done||i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&t.loadStatus!=null?t.loadStatus==="not-loaded"?(t.load().catch(i=>{br(i)}),"loading"):t.loadStatus:"loaded"}};m([w()],Si.prototype,"required",void 0),m([w({constructOnly:!0})],Si.prototype,"map",void 0),m([w({constructOnly:!0})],Si.prototype,"getSpatialReferenceSupport",void 0),m([w()],Si.prototype,"defaultSpatialReference",void 0),m([w()],Si.prototype,"userSpatialReference",void 0),m([w()],Si.prototype,"sourcePreloadCount",void 0),m([w()],Si.prototype,"priorityCollection",void 0),m([w()],Si.prototype,"requiresExtentInSpatialReference",void 0),m([w()],Si.prototype,"suspended",void 0),m([w({readOnly:!0})],Si.prototype,"ready",null),m([w({readOnly:!0})],Si.prototype,"heightModelInfoReady",null),m([w({readOnly:!0})],Si.prototype,"spatialReference",null),m([w({readOnly:!0})],Si.prototype,"extent",null),m([w({readOnly:!0})],Si.prototype,"heightModelInfo",null),m([w({readOnly:!0})],Si.prototype,"vcsWkid",null),m([w({readOnly:!0})],Si.prototype,"latestVcsWkid",null),m([w({readOnly:!0})],Si.prototype,"viewingMode",null),m([w({readOnly:!0})],Si.prototype,"tileInfo",null),m([w({readOnly:!0})],Si.prototype,"mapCollections",null),m([w({readOnly:!0})],Si.prototype,"_spatialReferenceTask",null),m([w({readOnly:!0})],Si.prototype,"_tileInfoTask",null),m([w({readOnly:!0})],Si.prototype,"_heightModelInfoTask",null),m([w({readOnly:!0})],Si.prototype,"_extentCandidatesTask",null),m([w()],Si.prototype,"_extentTask",null),m([w()],Si.prototype,"_projectExtentTask",void 0),Si=m([H("esri.views.support.DefaultsFromMap")],Si);let N4e=class{constructor(t,i){this.layerFilter=t,this.pushLayer=i,this.preloading=-1,this.updating=!1,this.done=!1}};function F4e(e,t){return e!=null?t!=null?e===t&&e:e:t}var Mw;let et=Mw=class extends qo.EventedMixin(x3(Ve)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new kg,this.updatingHandles=new o0,this.allLayerViews=new v2({getCollections:()=>{var t,i,r;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:j4e}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new l0,this.analyses=new Q9,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Oe,this.magnifier=new Aie,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new x4e,this.navigation=new Bie,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new i4e(this),this.persistableViewModels=new Oe,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(ge(()=>this.preconditionsReady,t=>{var r,n;const i=this.ready;if(t?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,Mw.views.add(this)):(this._lockedSpatialReference=null,Mw.views.remove(this)),this.notifyChange("spatialReference"),!t&&i)(r=this.toolViewManager)==null||r.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(n=this.layerViewManager)==null||n.clear(),this._teardown();else if(t&&!i){try{this._startup()}catch(o){return void queueMicrotask(()=>{this.fatalError=new ne("startup-error",null,o)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},$l))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,Ou(()=>this.ready)))),this.basemapView=new z9e({view:this}),this.layerViewManager=new G9e({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new Yl({view:this}),this._setupSpatialReferenceLogger(),this.selectionManager=new e4e({view:this}),this.addHandles([ge(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},Lo),ge(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},$l),ge(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},Lo)])}_setupSpatialReferenceLogger(){let e=null;this.addHandles([ge(()=>{var t;return(t=this.defaultsFromMap)==null?void 0:t.ready},t=>{var r;const i=((r=this.map)==null?void 0:r.allLayers.length)>0;if(t&&!this.spatialReference&&i){if(e!=null)return;const n=ei(()=>e=_0(e));e=kO(async o=>{try{await G0(this.spatialReferenceWarningDelay,null,o)}catch{return}finally{e=null}_e.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.addHandles(n,"spatial-reference-logger-task")}else this.removeHandles("spatial-reference-logger-task")},{sync:!0})])}destroy(){var e,t;this.destroyed||(Mw.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=ci(this.graphics),this.analyses=ci(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),ci(this.analysisViewManager),this.toolViewManager=ci(this.toolViewManager),this.layerViewManager=ci(this.layerViewManager),this.selectionManager=ci(this.selectionManager),this.basemapView=ci(this.basemapView),(e=this.groundView)==null||e.destroy(),(t=this.layerViews)==null||t.forEach(i=>i.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=ci(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return _e.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Si({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,t)=>this.getSpatialReferenceSupport(e,t),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Aa.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(_e.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),Aa.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get spatialReference(){var t,i;const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&((i=(t=this.defaultsFromMap)==null?void 0:t.required)!=null&&i.heightModelInfo)){const r=e.clone();return r.vcsWkid=this.defaultsFromMap.vcsWkid,r.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,r}return e}set spatialReference(e){const t=!_r(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??Uo}set timeZone(e){this._userTimeZone=e,Cbe(e)||_e.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){var e;return((e=this.toolViewManager)==null?void 0:e.cursor)??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new QC}whenLayerView(e){var t;return((t=this.layerViewManager)==null?void 0:t.whenLayerView(e))??Promise.reject()}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(e){throw new ne("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,t){return this.isResolved()&&!this.ready&&_e.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(en(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};et.views=new Oe,m([w()],et.prototype,"_userSpatialReference",void 0),m([w()],et.prototype,"activeTool",null),m([w({readOnly:!0})],et.prototype,"allLayerViews",void 0),m([w()],et.prototype,"groundView",void 0),m([w()],et.prototype,"animation",null),m([w()],et.prototype,"basemapView",void 0),m([w()],et.prototype,"center",null),m([w()],et.prototype,"defaultsFromMapSettings",null),m([w()],et.prototype,"defaultsFromMap",null),m([w()],et.prototype,"fatalError",void 0),m([w({type:Ut})],et.prototype,"extent",null),m([w(kA(l0,"graphics"))],et.prototype,"graphics",void 0),m([w(kA(Q9,"analyses"))],et.prototype,"analyses",void 0),m([w({readOnly:!0,type:DI})],et.prototype,"heightModelInfo",null),m([w({readOnly:!0})],et.prototype,"interacting",null),m([w({readOnly:!0})],et.prototype,"navigating",null),m([w({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],et.prototype,"preconditionsReady",null),m([w({readOnly:!0})],et.prototype,"typeSpecificPreconditionsReady",void 0),m([w({type:Oe,readOnly:!0})],et.prototype,"layerViews",void 0),m([w()],et.prototype,"resolution",null),m([w({type:Aie})],et.prototype,"magnifier",void 0),m([w({value:null,type:Ste})],et.prototype,"map",null),m([w()],et.prototype,"padding",void 0),m([w({readOnly:!0})],et.prototype,"ready",void 0),m([w({type:rt})],et.prototype,"spatialReference",null),m([w()],et.prototype,"spatialReferenceWarningDelay",void 0),m([w()],et.prototype,"stationary",null),m([w({readOnly:!0})],et.prototype,"supportsGround",void 0),m([w({type:rn})],et.prototype,"timeExtent",null),m([w({type:String,nonNullable:!0})],et.prototype,"timeZone",null),m([w()],et.prototype,"tools",null),m([w()],et.prototype,"toolViewManager",void 0),m([w({readOnly:!0})],et.prototype,"type",void 0),m([w({type:Number})],et.prototype,"scale",void 0),m([w({readOnly:!0})],et.prototype,"updating",void 0),m([w({readOnly:!0})],et.prototype,"initialExtentRequired",void 0),m([w({readOnly:!0})],et.prototype,"initialExtent",null),m([w()],et.prototype,"cursor",null),m([w({readOnly:!0})],et.prototype,"input",void 0),m([w({type:Bie,nonNullable:!0})],et.prototype,"navigation",void 0),m([w()],et.prototype,"layerViewManager",void 0),m([w()],et.prototype,"analysisViewManager",void 0),m([w()],et.prototype,"selectionManager",void 0),m([w()],et.prototype,"width",void 0),m([w()],et.prototype,"height",void 0),m([w({readOnly:!0})],et.prototype,"resizing",void 0),m([w({value:null,readOnly:!0})],et.prototype,"size",null),m([w({readOnly:!0})],et.prototype,"suspended",void 0),m([w({readOnly:!0})],et.prototype,"viewEvents",void 0),m([w({readOnly:!0})],et.prototype,"persistableViewModels",void 0),m([w()],et.prototype,"_isValid",void 0),m([w()],et.prototype,"_readyCycleForced",void 0),m([w()],et.prototype,"_lockedSpatialReference",void 0),m([w()],et.prototype,"_userTimeZone",void 0),m([w()],et.prototype,"_lockedTimeZone",void 0),m([w()],et.prototype,"_userTimeExtent",void 0),m([w()],et.prototype,"_lockedTimeExtent",void 0),m([w({type:QC})],et.prototype,"theme",void 0),m([w({readOnly:!0,type:QC})],et.prototype,"effectiveTheme",null),et=Mw=m([H("esri.views.View")],et);const Z$=globalThis.$arcgis;Z$&&!Z$.views&&Object.defineProperty(Z$,"views",{configurable:!1,enumerable:!0,writable:!1,value:et.views});const D4e=et;function j4e(e){return e.layerViews}function ar(){return[0,0]}function z4e(e){return[e[0],e[1]]}function A3(e,t){return[e,t]}function V4e(e,t=ar()){const i=Math.min(2,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function U4e(e,t){return new Float64Array(e,t,2)}function Xie(){return ar()}function Qie(){return A3(1,1)}function ere(){return A3(1,0)}function tre(){return A3(0,1)}const B4e=Xie(),G4e=Qie(),q4e=ere(),H4e=tre();Object.freeze(Object.defineProperty({__proto__:null,ONES:G4e,UNIT_X:q4e,UNIT_Y:H4e,ZEROS:B4e,clone:z4e,create:ar,createView:U4e,fromArray:V4e,fromValues:A3,ones:Qie,unitX:ere,unitY:tre,zeros:Xie},Symbol.toStringTag,{value:"Module"}));let Vh=class extends Z9{constructor(t){super(t),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Vo(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(t=this._resolver)==null||t.reject(new ne("ViewAnimation stopped")))}finish(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(t=this._resolver)==null||t.resolve())}update(t,i){i||(i=Fu(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",i)}};m([w({readOnly:!0})],Vh.prototype,"done",null),m([w({readOnly:!0,type:String})],Vh.prototype,"state",void 0),m([w()],Vh.prototype,"target",void 0),Vh=m([H("esri.views.ViewAnimation")],Vh),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Vh||(Vh={}));const i7=Vh;function j1(e,t){return e[0]=t[0],e[1]=t[1],e}function pn(e,t,i){return e[0]=t,e[1]=i,e}function ire(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function C2(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function rre(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function nre(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function W4e(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function J4e(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function Z4e(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function K4e(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function Y4e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function C3(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function X4e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e}function YI(e,t){const i=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(i*i+r*r)}function r4(e,t){const i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function n4(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function sre(e){const t=e[0],i=e[1];return t*t+i*i}function ore(e,t){return e[0]=-t[0],e[1]=-t[1],e}function Q4e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function r7(e,t){const i=t[0],r=t[1];let n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e}function are(e,t){return e[0]*t[0]+e[1]*t[1]}function lre(e,t,i){const r=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=r,e}function eIe(e,t,i,r){const n=t[0],o=t[1];return e[0]=n+r*(i[0]-n),e[1]=o+r*(i[1]-o),e}function tIe(e,t=1){const i=2*NI()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function iIe(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[2]*n,e[1]=i[1]*r+i[3]*n,e}function _u(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[2]*n+i[4],e[1]=i[1]*r+i[3]*n+i[5],e}function rIe(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[3]*n+i[6],e[1]=i[1]*r+i[4]*n+i[7],e}function nIe(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[4]*n+i[12],e[1]=i[1]*r+i[5]*n+i[13],e}function sIe(e,t,i,r){const n=t[0]-i[0],o=t[1]-i[1],c=Math.sin(r),y=Math.cos(r);return e[0]=n*y-o*c+i[0],e[1]=n*c+o*y+i[1],e}function oIe(e,t){const i=e[0],r=e[1],n=t[0],o=t[1];let c=i*i+r*r;c>0&&(c=1/Math.sqrt(c));let y=n*n+o*o;y>0&&(y=1/Math.sqrt(y));const v=(i*n+r*o)*c*y;return v>1?0:v<-1?Math.PI:Math.acos(v)}function aIe(e){return"vec2("+e[0]+", "+e[1]+")"}function lIe(e,t){return e[0]===t[0]&&e[1]===t[1]}function uIe(e,t){const i=e[0],r=e[1],n=t[0],o=t[1],c=ks();return Math.abs(i-n)<=c*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-o)<=c*Math.max(1,Math.abs(r),Math.abs(o))}function cIe(e,t,i,r,n){let o=t[0]-i[0],c=t[1]-i[1];const y=(r[0]*o+r[1]*c)*(n-1);return o=r[0]*y,c=r[1]*y,e[0]=t[0]+o,e[1]=t[1]+c,e}const hIe=n4,kR=C2,dIe=rre,pIe=nre,fIe=YI,yIe=r4,mIe=sre;Object.freeze(Object.defineProperty({__proto__:null,add:ire,angle:oIe,ceil:W4e,copy:j1,cross:lre,dist:fIe,distance:YI,div:pIe,divide:nre,dot:are,equals:uIe,exactEquals:lIe,floor:J4e,inverse:Q4e,len:hIe,length:n4,lerp:eIe,max:K4e,min:Z4e,mul:dIe,multiply:rre,negate:ore,normalize:r7,projectAndScale:cIe,random:tIe,rotate:sIe,round:Y4e,scale:C3,scaleAndAdd:X4e,set:pn,sqrDist:yIe,sqrLen:mIe,squaredDistance:r4,squaredLength:sre,str:aIe,sub:kR,subtract:C2,transformMat2:iIe,transformMat2d:_u,transformMat3:rIe,transformMat4:nIe},Symbol.toStringTag,{value:"Module"}));function gIe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function XI(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function vIe(e,t,i,r,n,o,c){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=o,e[5]=c,e}function LR(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],c=t[4],y=t[5];let v=i*o-r*n;return v?(v=1/v,e[0]=o*v,e[1]=-r*v,e[2]=-n*v,e[3]=i*v,e[4]=(n*y-o*c)*v,e[5]=(r*c-i*y)*v,e):null}function wIe(e){return e[0]*e[3]-e[1]*e[2]}function Nf(e,t,i){const r=t[0],n=t[1],o=t[2],c=t[3],y=t[4],v=t[5],_=i[0],I=i[1],$=i[2],A=i[3],k=i[4],R=i[5];return e[0]=r*_+o*I,e[1]=n*_+c*I,e[2]=r*$+o*A,e[3]=n*$+c*A,e[4]=r*k+o*R+y,e[5]=n*k+c*R+v,e}function k3(e,t,i){const r=t[0],n=t[1],o=t[2],c=t[3],y=t[4],v=t[5],_=Math.sin(i),I=Math.cos(i);return e[0]=r*I+o*_,e[1]=n*I+c*_,e[2]=r*-_+o*I,e[3]=n*-_+c*I,e[4]=y,e[5]=v,e}function QI(e,t,i){const r=t[0],n=t[1],o=t[2],c=t[3],y=t[4],v=t[5],_=i[0],I=i[1];return e[0]=r*_,e[1]=n*_,e[2]=o*I,e[3]=c*I,e[4]=y,e[5]=v,e}function mg(e,t,i){const r=t[0],n=t[1],o=t[2],c=t[3],y=t[4],v=t[5],_=i[0],I=i[1];return e[0]=r,e[1]=n,e[2]=o,e[3]=c,e[4]=r*_+o*I+y,e[5]=n*_+c*I+v,e}function ure(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=-i,e[3]=r,e[4]=0,e[5]=0,e}function cre(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function OR(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function bIe(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function _Ie(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function SIe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e}function hre(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}function xIe(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e}function IIe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e}function TIe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function $Ie(e,t){const i=e[0],r=e[1],n=e[2],o=e[3],c=e[4],y=e[5],v=t[0],_=t[1],I=t[2],$=t[3],A=t[4],k=t[5],R=ks();return Math.abs(i-v)<=R*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(r-_)<=R*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(n-I)<=R*Math.max(1,Math.abs(n),Math.abs(I))&&Math.abs(o-$)<=R*Math.max(1,Math.abs(o),Math.abs($))&&Math.abs(c-A)<=R*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(y-k)<=R*Math.max(1,Math.abs(y),Math.abs(k))}const EIe=Nf,MIe=hre;Object.freeze(Object.defineProperty({__proto__:null,add:SIe,copy:gIe,determinant:wIe,equals:$Ie,exactEquals:TIe,frob:_Ie,fromRotation:ure,fromScaling:cre,fromTranslation:OR,identity:XI,invert:LR,mul:EIe,multiply:Nf,multiplyScalar:xIe,multiplyScalarAndAdd:IIe,rotate:k3,scale:QI,set:vIe,str:bIe,sub:MIe,subtract:hre,translate:mg},Symbol.toStringTag,{value:"Module"}));function qc(){return[1,0,0,1,0,0]}function AIe(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function CIe(e,t,i,r,n,o){return[e,t,i,r,n,o]}function kIe(e,t){return new Float64Array(e,t,6)}const LIe=qc();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:LIe,clone:AIe,create:qc,createView:kIe,fromValues:CIe},Symbol.toStringTag,{value:"Module"}));const U_={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new io({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:rt.WebMercator}),minus180Line:new io({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:rt.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new io({paths:[[[180,-180],[180,180]]],spatialReference:rt.WGS84}),minus180Line:new io({paths:[[[-180,-180],[-180,180]]],spatialReference:rt.WGS84})}};function Kf(e,t){return Math.ceil((e-t)/(2*t))}function dre(e,t){const i=Ob(e);for(const r of i)for(const n of r)n[0]+=t;return e}function Ob(e){return n0(e)?e.rings:e.paths}function eT(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function Wg(e){return typeof e=="string"?cr(e):le(e)}function tT(e,t,i){const r={};for(const n in e){if(n==="declaredClass")continue;const o=e[n];if(o!=null&&typeof o!="function")if(Array.isArray(o))r[n]=o.map(c=>tT(c));else if(typeof o=="object")if(o.toJSON){const c=o.toJSON(i==null?void 0:i[n]);r[n]=JSON.stringify(c)}else r[n]=JSON.stringify(o);else r[n]=o}return r}async function OIe(e,t,i,r){const n=Wg(e),o=t[0].spatialReference,c={...r,responseType:"json",query:{...n.query,f:"json",sr:ng(o),target:JSON.stringify({geometryType:Ng(t[0]),geometries:t}),cutter:JSON.stringify(i)}},y=await Et(n.path+"/cut",c),{cutIndexes:v,geometries:_=[]}=y.data;return{cutIndexes:v,geometries:_.map(I=>{const $=Xc(I);return $.spatialReference=o,$})}}function RIe(e){return{geometryType:Ng(e[0]),geometries:e.map(t=>t.toJSON())}}function pre(e,t,i){const r=Jge(t);return e.map(n=>{const o=r.fromJSON(n);return o.spatialReference=i,o})}async function PIe(e,t,i){const r=typeof e=="string"?cr(e):e,n=t[0].spatialReference,o=Ng(t[0]),c={...i,query:{...r.query,f:"json",sr:ng(n),geometries:JSON.stringify(RIe(t))}},{data:y}=await Et(r.path+"/simplify",c);return pre(y.geometries,o,n)}const fre=()=>_e.getLogger("esri.geometry.support.normalizeUtils");function NIe(e){return e.type==="polygon"}function FIe(e){return e[0].type==="polygon"}function DIe(e){return e[0].type==="polyline"}function Kz(e){const t=[];let i=0,r=0;for(let n=0;n<e.length;n++){const o=e[n];let c=null;for(let y=0;y<o.length;y++)c=o[y],t.push(c),y===0?(i=c[0],r=i):(i=Math.min(i,c[0]),r=Math.max(r,c[0]));c&&t.push([(i+r)/2,0])}return t}function jIe(e,t){if(!(e instanceof io||e instanceof Os)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw fre().error(n),new ne(n)}const i=Ob(e),r=[];for(const n of i){const o=[];r.push(o),o.push([n[0][0],n[0][1]]);for(let c=0;c<n.length-1;c++){const y=n[c][0],v=n[c][1],_=n[c+1][0],I=n[c+1][1],$=Math.sqrt((_-y)*(_-y)+(I-v)*(I-v)),A=(I-v)/$,k=(_-y)/$,R=$/t;if(R>1){for(let z=1;z<=R-1;z++){const U=z*t,W=k*U+y,Q=A*U+v;o.push([W,Q])}const N=($+Math.floor(R-1)*t)/2,D=k*N+y,j=A*N+v;o.push([D,j])}o.push([_,I])}}return NIe(e)?new Os({rings:r,spatialReference:e.spatialReference}):new io({paths:r,spatialReference:e.spatialReference})}function Yz(e,t,i){if(t){const r=jIe(e,1e6);e=r1(r,!0)}return i&&(e=dre(e,i)),e}function Xz(e,t,i){if(Array.isArray(e)){const r=e[0];if(r>t){const n=Kf(r,t);e[0]=r+n*(-2*t)}else if(r<i){const n=Kf(r,i);e[0]=r+n*(-2*i)}}else{const r=e.x;if(r>t){const n=Kf(r,t);e=e.clone().offset(n*(-2*t),0)}else if(r<i){const n=Kf(r,i);e=e.clone().offset(n*(-2*i),0)}}return e}function zIe(e,t){let i=-1;for(let r=0;r<t.cutIndexes.length;r++){const n=t.cutIndexes[r],o=t.geometries[r],c=Ob(o);for(let y=0;y<c.length;y++){const v=c[y];v.some(_=>{if(_[0]<180)return!0;{let I=0;for(let A=0;A<v.length;A++){const k=v[A][0];I=k>I?k:I}I=Number(I.toFixed(9));const $=-360*Kf(I,180);for(let A=0;A<v.length;A++){const k=o.getPoint(y,A);o.setPoint(y,A,k.clone().offset($,0))}return!0}})}if(n===i){if(FIe(e))for(const y of Ob(o))e[n]=e[n].addRing(y);else if(DIe(e))for(const y of Ob(o))e[n]=e[n].addPath(y)}else i=n,e[n]=o}return e}async function yre(e,t,i){if(!Array.isArray(e))return yre([e],t);t&&typeof t!="string"&&fre().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof t=="string"?t:(t==null?void 0:t.url)??qt.geometryServiceUrl;let n,o,c,y,v,_,I,$,A=0;const k=[],R=[];for(const W of e)if(W!=null)if(n||(n=W.spatialReference,o=Cs(n),c=n.isWebMercator,_=c?102100:4326,y=U_[_].maxX,v=U_[_].minX,I=U_[_].plus180Line,$=U_[_].minus180Line),o)if(W.type==="mesh")R.push(W);else if(W.type==="point")R.push(Xz(W.clone(),y,v));else if(W.type==="multipoint"){const Q=W.clone();Q.points=Q.points.map(K=>Xz(K,y,v)),R.push(Q)}else if(W.type==="extent"){const Q=W.clone()._normalize(!1,!1,o);R.push(Q.rings?new Os(Q):Q)}else if(W.extent){const Q=W.extent,K=Kf(Q.xmin,v)*(2*y);let ee=K===0?W.clone():dre(W.clone(),K);Q.offset(K,0);let{xmin:ie,xmax:ae}=Q;ie=Number(ie.toFixed(9)),ae=Number(ae.toFixed(9)),Q.intersects(I)&&ae!==y?(A=ae>A?ae:A,ee=Yz(ee,c),k.push(ee),R.push("cut")):Q.intersects($)&&ie!==v?(A=ae*(2*y)>A?ae*(2*y):A,ee=Yz(ee,c,360),k.push(ee),R.push("cut")):R.push(ee)}else R.push(W.clone());else R.push(W);else R.push(W);let N=Kf(A,y),D=-90;const j=N,z=new io;for(;N>0;){const W=360*N-180;z.addPath([[W,D],[W,-1*D]]),D*=-1,N--}if(k.length>0&&j>0){const W=zIe(k,await OIe(r,k,z,i)),Q=[],K=[];for(let ae=0;ae<R.length;ae++){const ue=R[ae];if(ue!=="cut")K.push(ue);else{const Ie=W.shift(),Ae=e[ae];Ae!=null&&Ae.type==="polygon"&&Ae.rings&&Ae.rings.length>1&&Ie.rings.length>=Ae.rings.length?(Q.push(Ie),K.push("simplify")):K.push(c?Au(Ie):Ie)}}if(!Q.length)return K;const ee=await PIe(r,Q,i),ie=[];for(let ae=0;ae<K.length;ae++){const ue=K[ae];ue!=="simplify"?ie.push(ue):ie.push(c?Au(ee.shift()):ee.shift())}return ie}const U=[];for(let W=0;W<R.length;W++){const Q=R[W];if(Q!=="cut")U.push(Q);else{const K=k.shift();U.push(c===!0?Au(K):K)}}return U}function VIe(e){if(!e)return null;const t=e.extent;if(!t)return null;const i=e.spatialReference&&Cs(e.spatialReference);if(!i)return t;const[r,n]=i.valid,o=2*n,{width:c}=t;let y,{xmin:v,xmax:_}=t;if([v,_]=[_,v],e.type==="extent"||c===0||c<=n||c>o||v<r||_>n)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;y=Kz(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;y=Kz(e.paths);break;case"multipoint":y=e.points}const I=t.clone();for(let $=0;$<y.length;$++){let A=y[$][0];A<0?(A+=n,_=Math.max(A,_)):(A-=n,v=Math.min(A,v))}return I.xmin=v,I.xmax=_,I.width<c?(I.xmin-=n,I.xmax-=n,I):t}function RR(e,t,i){const r=Cs(i);if(r==null)return e;const[n,o]=r.valid,c=2*o;let y=0,v=0;t>o?y=Math.ceil(Math.abs(t-o)/c):t<n&&(y=-Math.ceil(Math.abs(t-n)/c)),e>o?v=Math.ceil(Math.abs(e-o)/c):e<n&&(v=-Math.ceil(Math.abs(e-n)/c));let _=e+(y-v)*c;const I=_-t;return I>o?_-=c:I<n&&(_+=c),_}function jYe(e,t){const i=Cs(t);if(i){const[r,n]=i.valid,o=n-r;if(e<r)for(;e<r;)e+=o;if(e>n)for(;e>n;)e-=o}return e}const mre=96,gre=39.37,UIe=180/Math.PI;function vre(e){return e.wkid?e:e.spatialReference||rt.WGS84}function PR(e,t){return t.type?pn(e,t.x,t.y):j1(e,t)}function wre(e){return Al(e)}function iT(e,t,i=0){let r=e.width,n=e.height;if(i!==0){const y=gI(i),v=Math.abs(Math.cos(y)),_=Math.abs(Math.sin(y));r=e.width*v+e.height*_,n=e.width*_+e.height*v}const o=Math.max(1,t[0]),c=Math.max(1,t[1]);return Math.max(r/o,n/c)*KIe(e.spatialReference)}async function Aw(e,t,i,r){var y,v;let n,o;if(!e||Array.isArray(e)&&!e.length)return null;if(Oe.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const _=e.every(A=>"attributes"in A),I=e.some(A=>!A.geometry);let $=e;if(_&&I&&t&&t.allLayerViews){const A=new Map;for(const D of e){const j=D.layer,z=A.get(j)||[],U=D.attributes[j.objectIdField];U!=null&&z.push(U),A.set(j,z)}const k=[];A.forEach((D,j)=>{const z=t.allLayerViews.find(U=>U.layer.id===j.id);if(z&&"queryFeatures"in z){const U=j.createQuery();U.objectIds=D,U.returnGeometry=!0,k.push(z.queryFeatures(U))}});const R=await Promise.all(k),N=[];for(const D of R)if(D&&D.features&&D.features.length)for(const j of D.features)j.geometry!=null&&N.push(j.geometry);$=N}for(const A of $)r=await Aw(A,t,i,r);return r}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=new st(e);else if(e instanceof rh)n=e;else if("geometry"in e){if(e.geometry)n=e.geometry;else if(e.layer){const _=e.layer,I=t.allLayerViews.find($=>$.layer.id===_.id);if(I&&"queryFeatures"in I){const $=_.createQuery();$.objectIds=[e.attributes[_.objectIdField]],$.returnGeometry=!0;const A=await I.queryFeatures($);n=(v=(y=A==null?void 0:A.features)==null?void 0:y[0])==null?void 0:v.geometry}}}if(n==null)return null;switch(n.type){case"point":o=new Ut({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":o=VIe(n);break;default:o=n.extent}if(!o)return null;nh()||Ml(o.spatialReference,i)||await Qc();const c=sh(o,i);if(!c)return null;if(r){const _=c.center,I=_.clone();I.x=RR(_.x,r.center.x,i),I.x!==_.x&&c.centerAt(I),r=r.union(c)}else r=c;return r}function BIe(e){var t;if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&((t=e.layer)==null?void 0:t.minScale)!=null&&e.layer.maxScale!=null){const i=e.layer;return{min:i.minScale,max:i.maxScale}}if(Array.isArray(e)&&e.length&&e.every(i=>"layer"in i)){let i=0,r=0;for(const n of e){const o=n.layer;o!=null&&o.minScale&&o.maxScale&&(i=o.minScale<i?o.minScale:i,r=o.maxScale>r?o.maxScale:r)}return i&&r?{min:i,max:r}:null}}}function Qz(e,t){const i=vre(e);return _r(i,t)||i.imageCoordinateSystem||t.imageCoordinateSystem?e:sh(e,t)}async function GIe(e,t){var D;if(!e||!t)return new wn({targetGeometry:new st,scale:0,rotation:0});let i=t.spatialReference;const{constraints:r,padding:n,viewpoint:o,size:c}=t,y=[n?c[0]-n.left-n.right:c[0],n?c[1]-n.top-n.bottom:c[1]];let v=null;e instanceof wn?v=e:e.viewpoint?v=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(v=e.target);let _=null;v!=null&&v.targetGeometry?_=v.targetGeometry:e instanceof Ut?_=e:e instanceof rh?_=await Aw(e,t,i):e&&(_=await Aw(e.center,t,i)||await Aw(e.target,t,i)||await Aw(e,t,i)),!_&&(o!=null&&o.targetGeometry)?_=o.targetGeometry:!_&&t.extent&&(_=t.extent),i||(i=vre(t.spatialReference||t.extent||_)),nh()||_r(_.spatialReference,i)||Ml(_.spatialReference,i)||await Qc();const I=Qz(_,i),$="center"in I?I.center:I;t.pickClosestTarget!==!1&&$.type==="point"&&((D=o.targetGeometry)==null?void 0:D.type)==="point"&&($.x=RR($.x,o.targetGeometry.x,$.spatialReference));let A=0;v?A=v.rotation:e.hasOwnProperty("rotation")?A=e.rotation:o&&(A=o.rotation);let k=0;k=(v==null?void 0:v.targetGeometry)!=null&&v.targetGeometry.type==="point"?v.scale:"scale"in e&&e.scale?e.scale:"zoom"in e&&e.zoom!==-1&&r&&r.effectiveLODs?r.zoomToScale(e.zoom):Array.isArray(_)||_.type==="point"||_.type==="extent"&&_.width===0&&_.height===0?o.scale:iT(Qz(_.extent,i),y,A);const R=BIe(e.target??e);R&&(R.min&&R.min<k?k=R.min:R.max&&R.max>k&&(k=R.max));let N=new wn({targetGeometry:$,scale:k,rotation:A});return r&&(N=r.fit(N),r.constrainByGeometry(N),r.rotationEnabled||(N.rotation=o.rotation)),N}function ds(e,t){const i=e.targetGeometry,r=t.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function qIe(e,t,i){return i?pn(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):C3(e,t,.5)}const HIe=function(){const e=ar();return function(t,i,r){const n=i.targetGeometry;PR(e,n);const o=.5*Jg(i);return t.xmin=e[0]-o*r[0],t.ymin=e[1]-o*r[1],t.xmax=e[0]+o*r[0],t.ymax=e[1]+o*r[1],t.spatialReference=n.spatialReference,t}}();function WIe(e,t,i,r,n){var o;return n7(e,t,i.center),e.scale=iT(i,r),(o=n==null?void 0:n.constraints)==null||o.constrain(e),e}function JIe(e,t,i,r){return DR(e,t,i,r),LR(e,e)}const bre=function(){const e=ar();return function(t,i,r){return kR(t,YIe(t,i),qIe(e,i,r))}}(),ZIe=function(){const e=qc(),t=ar();return function(i,r,n,o){const c=Jg(r),y=NR(r);return pn(t,c,c),cre(e,t),k3(e,e,y),mg(e,e,bre(t,n,o)),mg(e,e,[0,o.top-o.bottom]),pn(i,e[4],e[5])}}();function Jg(e){var t;return e.scale*_re((t=e.targetGeometry)==null?void 0:t.spatialReference)}function _re(e){return e!=null&&Ro(e)?1/(wre(e)*gre*mre):1}function NR(e){return oR(e.rotation)||0}function KIe(e){return Ro(e)?wre(e)*gre*mre:1}function YIe(e,t){return C3(e,t,.5)}const FR=function(){const e=ar(),t=ar(),i=ar();return function(r,n,o,c,y,v){return ore(e,n),C3(t,o,.5*v),pn(i,1/c*v,-1/c*v),OR(r,t),y&&k3(r,r,y),QI(r,r,i),mg(r,r,e),r}}(),DR=function(){const e=ar();return function(t,i,r,n){const o=Jg(i),c=NR(i);return PR(e,i.targetGeometry),FR(t,e,r,o,c,n)}}(),XIe=function(){const e=ar();return function(t,i,r,n){const o=Jg(i);return PR(e,i.targetGeometry),FR(t,e,r,o,0,n)}}();function Sre(e){const t=Cs(e);return t?t.valid[1]-t.valid[0]:0}function QIe(e,t){return Math.round(Sre(e)/t)}const eTe=function(){const e=ar(),t=ar(),i=[0,0,0];return function(r,n,o){C2(e,r,n),r7(e,e),C2(t,r,o),r7(t,t),lre(i,e,t);let c=Math.acos(are(e,t)/(n4(e)*n4(t)))*UIe;return i[2]<0&&(c=-c),isNaN(c)&&(c=0),c}}(),tTe=function(){const e=ar();return function(t,i,r,n){const o=t.targetGeometry;return ds(t,i),ZIe(e,i,r,n),o.x+=e[0],o.y+=e[1],t}}(),n7=function(e,t,i){ds(e,t);const r=e.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e},iTe=function(){const e=ar();return function(t,i,r,n,o){o||(o="center"),kR(e,r,n),C3(e,e,.5);const c=e[0],y=e[1];switch(o){case"center":pn(e,0,0);break;case"left":pn(e,-c,0);break;case"top":pn(e,0,y);break;case"right":pn(e,c,0);break;case"bottom":pn(e,0,-y);break;case"top-left":pn(e,-c,y);break;case"bottom-left":pn(e,-c,-y);break;case"top-right":pn(e,c,y);break;case"bottom-right":pn(e,c,-y)}return rT(t,i,e),t}}();function zYe(e,t,i){return ds(e,t),e.rotation+=i,e}function rTe(e,t,i){return ds(e,t),e.rotation=i,e}const nTe=function(){const e=ar();return function(t,i,r,n,o){return ds(t,i),isNaN(r)||r===0||(Ire(e,n,i,o),t.scale=i.scale*r,Tre(e,e,t,o),rT(t,t,pn(e,e[0]-n[0],n[1]-e[1]))),t}}();function eV(e,t,i){return ds(e,t),e.scale=i,e}const xre=function(){const e=ar();return function(t,i,r,n,o,c){return ds(t,i),isNaN(r)||r===0||(Ire(e,o,i,c),t.scale=i.scale*r,t.rotation+=n,Tre(e,e,t,c),rT(t,t,pn(e,e[0]-o[0],o[1]-e[1]))),t}}(),VYe=function(){const e=ar(),t=ar();return function(i,r,n,o,c,y,v){return bre(t,y,v),ire(e,c,t),o?xre(i,r,n,o,e,y):nTe(i,r,n,e,y)}}(),Ire=function(){const e=qc();return function(t,i,r,n){return _u(t,i,JIe(e,r,n,1))}}(),Tre=function(){const e=qc();return function(t,i,r,n){return _u(t,i,DR(e,r,n,1))}}(),rT=function(){const e=ar(),t=qc();return function(i,r,n){ds(i,r);const o=Jg(r),c=i.targetGeometry;return ure(t,NR(r)),QI(t,t,A3(o,o)),_u(e,n,t),c.x+=e[0],c.y+=e[1],i}}();function s4(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function sTe(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function oTe(e,t,i,r,n,o){const c=new Float32Array(6);return c[0]=e,c[1]=t,c[2]=i,c[3]=r,c[4]=n,c[5]=o,c}function aTe(e,t){return new Float32Array(e,t,6)}function $re(e,t,i,r){const n=t[r],o=t[r+1];e[r]=i[0]*n+i[2]*o+i[4],e[r+1]=i[1]*n+i[3]*o+i[5]}function lTe(e,t,i,r=0,n=0,o=2){const c=n||t.length/o;for(let y=r;y<c;y++)$re(e,t,i,y*o)}Object.freeze(Object.defineProperty({__proto__:null,clone:sTe,create:s4,createView:aTe,fromValues:oTe,transform:$re,transformMany:lTe},Symbol.toStringTag,{value:"Module"}));function uTe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function cTe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Ere(e,t,i,r,n,o,c,y,v,_){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=o,e[5]=c,e[6]=y,e[7]=v,e[8]=_,e}function Mre(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function hTe(e,t){if(e===t){const i=t[1],r=t[2],n=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=r,e[7]=n}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function dTe(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],c=t[4],y=t[5],v=t[6],_=t[7],I=t[8],$=I*c-y*_,A=-I*o+y*v,k=_*o-c*v;let R=i*$+r*A+n*k;return R?(R=1/R,e[0]=$*R,e[1]=(-I*r+n*_)*R,e[2]=(y*r-n*c)*R,e[3]=A*R,e[4]=(I*i-n*v)*R,e[5]=(-y*i+n*o)*R,e[6]=k*R,e[7]=(-_*i+r*v)*R,e[8]=(c*i-r*o)*R,e):null}function pTe(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],c=t[4],y=t[5],v=t[6],_=t[7],I=t[8];return e[0]=c*I-y*_,e[1]=n*_-r*I,e[2]=r*y-n*c,e[3]=y*v-o*I,e[4]=i*I-n*v,e[5]=n*o-i*y,e[6]=o*_-c*v,e[7]=r*v-i*_,e[8]=i*c-r*o,e}function fTe(e){const t=e[0],i=e[1],r=e[2],n=e[3],o=e[4],c=e[5],y=e[6],v=e[7],_=e[8];return t*(_*o-c*v)+i*(-_*n+c*y)+r*(v*n-o*y)}function jR(e,t,i){const r=t[0],n=t[1],o=t[2],c=t[3],y=t[4],v=t[5],_=t[6],I=t[7],$=t[8],A=i[0],k=i[1],R=i[2],N=i[3],D=i[4],j=i[5],z=i[6],U=i[7],W=i[8];return e[0]=A*r+k*c+R*_,e[1]=A*n+k*y+R*I,e[2]=A*o+k*v+R*$,e[3]=N*r+D*c+j*_,e[4]=N*n+D*y+j*I,e[5]=N*o+D*v+j*$,e[6]=z*r+U*c+W*_,e[7]=z*n+U*y+W*I,e[8]=z*o+U*v+W*$,e}function s7(e,t,i){const r=t[0],n=t[1],o=t[2],c=t[3],y=t[4],v=t[5],_=t[6],I=t[7],$=t[8],A=i[0],k=i[1];return e[0]=r,e[1]=n,e[2]=o,e[3]=c,e[4]=y,e[5]=v,e[6]=A*r+k*c+_,e[7]=A*n+k*y+I,e[8]=A*o+k*v+$,e}function Are(e,t,i){const r=t[0],n=t[1],o=t[2],c=t[3],y=t[4],v=t[5],_=t[6],I=t[7],$=t[8],A=Math.sin(i),k=Math.cos(i);return e[0]=k*r+A*c,e[1]=k*n+A*y,e[2]=k*o+A*v,e[3]=k*c-A*r,e[4]=k*y-A*n,e[5]=k*v-A*o,e[6]=_,e[7]=I,e[8]=$,e}function yTe(e,t,i){const r=i[0],n=i[1],o=i[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=o*t[6],e[7]=o*t[7],e[8]=o*t[8],e}function mTe(e,t,i){const r=i[0],n=i[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e}function gTe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function vTe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=-i,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function wTe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function bTe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function _Te(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],c=i+i,y=r+r,v=n+n,_=i*c,I=r*c,$=r*y,A=n*c,k=n*y,R=n*v,N=o*c,D=o*y,j=o*v;return e[0]=1-$-R,e[3]=I-j,e[6]=A+D,e[1]=I+j,e[4]=1-_-R,e[7]=k-N,e[2]=A-D,e[5]=k+N,e[8]=1-_-$,e}function STe(e,t){const i=t[0],r=t[1],n=t[2],o=t[4],c=t[5],y=t[6],v=t[8],_=t[9],I=t[10],$=I*c-y*_,A=-I*o+y*v,k=_*o-c*v,R=i*$+r*A+n*k;if(!R)return null;const N=1/R;return e[0]=$*N,e[1]=(-I*r+n*_)*N,e[2]=(y*r-n*c)*N,e[3]=A*N,e[4]=(I*i-n*v)*N,e[5]=(-y*i+n*o)*N,e[6]=k*N,e[7]=(-_*i+r*v)*N,e[8]=(c*i-r*o)*N,e}function xTe(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],c=t[4],y=t[5],v=t[6],_=t[7],I=t[8],$=t[9],A=t[10],k=t[11],R=t[12],N=t[13],D=t[14],j=t[15],z=i*y-r*c,U=i*v-n*c,W=i*_-o*c,Q=r*v-n*y,K=r*_-o*y,ee=n*_-o*v,ie=I*N-$*R,ae=I*D-A*R,ue=I*j-k*R,Ie=$*D-A*N,Ae=$*j-k*N,Me=A*j-k*D;let fe=z*Me-U*Ae+W*Ie+Q*ue-K*ae+ee*ie;return fe?(fe=1/fe,e[0]=(y*Me-v*Ae+_*Ie)*fe,e[1]=(v*ue-c*Me-_*ae)*fe,e[2]=(c*Ae-y*ue+_*ie)*fe,e[3]=(n*Ae-r*Me-o*Ie)*fe,e[4]=(i*Me-n*ue+o*ae)*fe,e[5]=(r*ue-i*Ae-o*ie)*fe,e[6]=(N*ee-D*K+j*Q)*fe,e[7]=(D*W-R*ee-j*U)*fe,e[8]=(R*K-N*W+j*z)*fe,e):null}function ITe(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function TTe(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function $Te(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function ETe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function Cre(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function MTe(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function ATe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e}function CTe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function kTe(e,t){const i=e[0],r=e[1],n=e[2],o=e[3],c=e[4],y=e[5],v=e[6],_=e[7],I=e[8],$=t[0],A=t[1],k=t[2],R=t[3],N=t[4],D=t[5],j=t[6],z=t[7],U=t[8],W=ks();return Math.abs(i-$)<=W*Math.max(1,Math.abs(i),Math.abs($))&&Math.abs(r-A)<=W*Math.max(1,Math.abs(r),Math.abs(A))&&Math.abs(n-k)<=W*Math.max(1,Math.abs(n),Math.abs(k))&&Math.abs(o-R)<=W*Math.max(1,Math.abs(o),Math.abs(R))&&Math.abs(c-N)<=W*Math.max(1,Math.abs(c),Math.abs(N))&&Math.abs(y-D)<=W*Math.max(1,Math.abs(y),Math.abs(D))&&Math.abs(v-j)<=W*Math.max(1,Math.abs(v),Math.abs(j))&&Math.abs(_-z)<=W*Math.max(1,Math.abs(_),Math.abs(z))&&Math.abs(I-U)<=W*Math.max(1,Math.abs(I),Math.abs(U))}function LTe(e){const t=ks(),i=e[0],r=e[1],n=e[2],o=e[3],c=e[4],y=e[5],v=e[6],_=e[7],I=e[8];return Math.abs(1-(i*i+o*o+v*v))<=t&&Math.abs(1-(r*r+c*c+_*_))<=t&&Math.abs(1-(n*n+y*y+I*I))<=t}const OTe=jR,RTe=Cre;Object.freeze(Object.defineProperty({__proto__:null,add:ETe,adjoint:pTe,copy:cTe,determinant:fTe,equals:kTe,exactEquals:CTe,frob:$Te,fromMat2d:bTe,fromMat4:uTe,fromQuat:_Te,fromRotation:vTe,fromScaling:wTe,fromTranslation:gTe,identity:Mre,invert:dTe,isOrthoNormal:LTe,mul:OTe,multiply:jR,multiplyScalar:MTe,multiplyScalarAndAdd:ATe,normalFromMat4:xTe,normalFromMat4Legacy:STe,projection:ITe,rotate:Are,scale:yTe,scaleByVec2:mTe,set:Ere,str:TTe,sub:RTe,subtract:Cre,translate:s7,transpose:hTe},Symbol.toStringTag,{value:"Module"}));function j5(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function PTe(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function NTe(e,t,i,r,n,o,c,y,v){const _=new Float32Array(9);return _[0]=e,_[1]=t,_[2]=i,_[3]=r,_[4]=n,_[5]=o,_[6]=c,_[7]=y,_[8]=v,_}function FTe(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:PTe,create:j5,createView:FTe,fromValues:NTe},Symbol.toStringTag,{value:"Module"}));function kre(){return new Float32Array(2)}function DTe(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function gg(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function jTe(e,t){return new Float32Array(e,t,2)}function Lre(){return kre()}function Ore(){return gg(1,1)}function Rre(){return gg(1,0)}function Pre(){return gg(0,1)}const zTe=Lre(),VTe=Ore(),UTe=Rre(),BTe=Pre();Object.freeze(Object.defineProperty({__proto__:null,ONES:VTe,UNIT_X:UTe,UNIT_Y:BTe,ZEROS:zTe,clone:DTe,create:kre,createView:jTe,fromValues:gg,ones:Ore,unitX:Rre,unitY:Pre,zeros:Lre},Symbol.toStringTag,{value:"Module"}));function GTe(e){return e instanceof Float32Array&&e.length>=2}function qTe(e){return Array.isArray(e)&&e.length>=2}function K$(e){return GTe(e)||qTe(e)}var o7;const Gu=[0,0];let ac=o7=class extends be{constructor(e){super(e),this._viewpoint2D={center:ar(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Ut,this.id=0,this.inverseTransform=qc(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=qc(),this.transformNoRotation=qc(),this.displayMat3=j5(),this.displayViewMat3=j5(),this.viewMat3=j5(),this.viewMat2d=s4(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}get visibleArea(){const[e,t]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,t),this.toMap([0,0],e,t),this.toMap([0,0],e,0)]}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=ds(i,e.viewpoint),this._set("size",j1(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new o7({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return K$(t)?_u(e,t,this.inverseTransform):(Gu[0]=t,Gu[1]=i,_u(e,Gu,this.inverseTransform))}toScreen(e,t,i){return K$(t)?_u(e,t,this.transform):(Gu[0]=t,Gu[1]=i,_u(e,Gu,this.transform))}toScreenNoRotation(e,t,i){return K$(t)?_u(e,t,this.transformNoRotation):(Gu[0]=t,Gu[1]=i,_u(e,Gu,this.transformNoRotation))}wrapMapCoordinate(e,t){j1(e,t);const[i]=t,[r]=this.center,{extent:n,spatialReference:o}=this;let{xmin:c,xmax:y}=n;if(o.isWrappable){const v=Sre(o)/2;c=Math.max(c,r-v),y=Math.min(y,r+v)}return(i<c||i>y)&&(e[0]=RR(i,r,o)),e}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,n=this._get("size");return FR(e,i,n,t,0,r),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:r}=this._viewpoint2D,n=this._get("pixelRatio")||1,o=this._get("size"),c=new wn({targetGeometry:new st(e[0],e[1],t),scale:i,rotation:r});if(this._set("viewpoint",c),!o||!t||!i)return;this.resolution=Jg(c),this.rotation=r,this.scale=i,this.spatialReference=t,j1(this.center,e);const y=o[0]!==0?2/o[0]:0,v=o[1]!==0?-2/o[1]:0;Ere(this.displayMat3,y,0,0,0,v,0,-1,1,1);const _=Mre(this.viewMat3),I=gg(o[0]/2,o[1]/2),$=gg(-o[0]/2,-o[1]/2),A=oR(r);s7(_,_,I),Are(_,_,A),s7(_,_,$),jR(this.displayViewMat3,this.displayMat3,_);const k=OR(this.viewMat2d,I);return k3(k,k,A),mg(k,k,$),HIe(this.extent,c,o),DR(this.transform,c,o,n),LR(this.inverseTransform,this.transform),XIe(this.transformNoRotation,c,o,n),this.worldScreenWidth=QIe(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};m([w({readOnly:!0})],ac.prototype,"id",void 0),m([w({value:1,json:{write:!0}})],ac.prototype,"pixelRatio",null),m([w({json:{write:!0}})],ac.prototype,"size",null),m([w()],ac.prototype,"spatialReference",void 0),m([w({type:wn,json:{write:!0}})],ac.prototype,"viewpoint",null),m([w({readOnly:!0})],ac.prototype,"visibleArea",null),ac=o7=m([H("esri.views.2d.ViewState")],ac);const tV=ac;var a7,l7;let Pc=a7=class extends Ve{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new a7({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};m([w()],Pc.prototype,"left",void 0),m([w()],Pc.prototype,"top",void 0),m([w()],Pc.prototype,"right",void 0),m([w()],Pc.prototype,"bottom",void 0),Pc=a7=m([H("esri.views.2d.PaddedViewState.Padding")],Pc);let Xy=l7=class extends tV{constructor(...e){super(...e),this.paddedViewState=new tV,this._updateContent=(()=>{const t=ar();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const n=this.paddedViewState;pn(t,r.left+r.right,r.top+r.bottom),C2(t,i,t),j1(n.size,t);const o=n.viewpoint;o&&(this.viewpoint=o)}})(),this.addHandles(ge(()=>[this.size,this.padding],()=>this._updateContent(),$l)),this.padding=new Pc,this.size=[0,0]}set padding(e){this._set("padding",e||new Pc)}set viewpoint(e){if(e){this.paddedViewState.viewpoint=e;let t=e;const i=this._get("padding");i&&(t=tTe(e.clone(),e,this._get("size"),i));const{targetGeometry:r,rotation:n,scale:o}=t,{x:c,y,spatialReference:v}=r,_=this._viewpoint2D;_.center[0]=c,_.center[1]=y,_.rotation=n,_.scale=o,_.spatialReference=v,this._update()}}clone(){return new l7({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};m([w()],Xy.prototype,"paddedViewState",void 0),m([w({type:Pc})],Xy.prototype,"padding",null),m([w()],Xy.prototype,"viewpoint",null),Xy=l7=m([H("esri.views.2d.PaddedViewState")],Xy);const zR=Xy;function Ff(e,t,i,r){const n=3*e,o=3*(i-e)-n,c=1-n-o,y=3*t,v=3*(r-t)-y,_=1-y-v;function I(R){return((c*R+o)*R+n)*R}function $(R){return((_*R+v)*R+y)*R}function A(R){return(3*c*R+2*o)*R+n}function k(R,N){let D,j,z,U,W,Q;for(z=R,Q=0;Q<8;Q++){if(U=I(z)-R,Math.abs(U)<N)return z;if(W=A(z),Math.abs(W)<1e-6)break;z-=U/W}if(D=0,j=1,z=R,z<D)return D;if(z>j)return j;for(;D<j;){if(U=I(z),Math.abs(U-R)<N)return z;R>U?D=z:j=z,z=.5*(j-D)+D}return z}return function(R,N=1e-6){return $(k(R,N))}}const HTe=/^cubic-bezier\((.*)\)/,pu={};function WTe(e){let t=pu[e]||null;if(!t){const i=HTe.exec(e);if(i){const r=i[1].split(",").map(n=>parseFloat(n.trim()));r.length!==4||r.some(n=>isNaN(n))||(t=Ff.apply(Ff,r))}}return t}pu.ease=Ff(.25,.1,.25,1),pu.linear=Ff(0,0,1,1),pu.easeIn=pu["ease-in"]=Ff(.42,0,1,1),pu.easeOut=pu["ease-out"]=Ff(0,0,.58,1),pu.easeInOut=pu["ease-in-out"]=Ff(.42,0,.58,1);let iV=class{constructor(t){this._view=t,this.viewpoint=new wn({targetGeometry:new st,scale:0,rotation:0})}get view(){return this._view}get size(){const[t,i]=this._view.size;return Math.sqrt(t*t+i*i)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return _re(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(t,i){i.pan=XY(this.center,t.center);let r=Math.abs(t.rotation-this.rotation);r=r>=180?360-r:r,i.rotate=gI(r),i.sourceZoom=this.scale,i.targetZoom=t.scale}interpolate(t,i,r){const{pan:n,rotate:o,zoom:c,zoomOffset:y}=r,{center:v}=this;v.spatialReference=t.center.spatialReference,v.x=Kv(t.center.x,i.center.x,n),v.y=Kv(t.center.y,i.center.y,n),this.viewpoint.scale=Kv(t.scale,i.scale+y,c);let _=t.rotation;const I=i.rotation;Math.abs(I-_)>=180&&(_+=360*(_<I?1:-1)),this.viewpoint.rotation=Kv(_,I,o)}copyFrom(t){ds(this.viewpoint,t.viewpoint),this._view=t.view}};const Nre=e=>e*e,JTe=e=>1-Nre(1-e),ZTe=e=>2**(10*(e-1)),KTe=e=>1-ZTe(1-e);function YTe(e){const t=2*(e-Math.sqrt((e-1)*e)),i=t/2/e;return r=>r<i?e*r*r:t*r-t+1}function XTe(e,t){return(i,r)=>i<t?t*e(i/t,r):1-e((1-i)/(1-t),r)*(1-t)}const rV=XTe(YTe(1),.5);let QTe=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const k2={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},Fre={...k2,maxDuration:4e3};let e$e=class Dre{constructor(t){this._createCamera=t,this.compared=new QTe,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:k2.desiredScreenFlow},this.source=t(),this.target=t()}clone(){const t=new Dre(this._createCamera);return t.copyFrom(this),t}copyFrom(t){this.update(t.source,t.target,t.settings)}update(t,i,r){this.source!==t&&this.source.copyFrom(t),this.target!==i&&this.target.copyFrom(i),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow??k2.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(t){const i=this.target.pixelsPerPanAtZoom(t);return this.halfWindowSize/i}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>ks()}get hasFov(){return Math.abs(this.compared.fov)>ks()}get hasRotate(){return this.compared.rotate>ks()}},t$e=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},i$e=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((t,i)=>t+i.time,0)}interpolateComponentsAt(t,i){t=Math.min(Math.max(t,0),1),t*=this.time;let r=0,n=0;const o=this.definition,c=this.segments.reduce((y,v)=>y||v.definition.hasZoom,!1);for(let y=0;y<this.segments.length;y++){const v=this.segments[y],_=v.definition;if(t<=v.time||y===this.segments.length-1){if(this.segmentInterpolateComponentsAt(v,v.time===0?0:t/v.time,i),o.hasPan&&!isNaN(i.pan)&&isFinite(o.compared.pan)?i.pan=(r+_.compared.pan*i.pan)/o.compared.pan:i.pan=1,o.hasRotate&&!isNaN(i.rotate)&&isFinite(o.compared.rotate)?i.rotate=(n+_.compared.rotate*i.rotate)/o.compared.rotate:i.rotate=1,c&&!isNaN(i.zoom)&&isFinite(_.compared.targetZoom)){const{sourceZoom:I,targetZoom:$}=_.compared,A=i.zoom*($-I)+I,k=this.segments[0].definition.compared.sourceZoom,R=this.segments[this.segments.length-1].definition.compared.targetZoom,N=Math.abs($-k)>Math.abs(I-k)?$:I;i.zoomOffset=N-R,i.zoom=(A-k)/(N-k)}else i.zoom=1;return i}t-=v.time,r+=_.compared.pan,n+=_.compared.rotate}}segmentInterpolateComponentsAt(t,i,r){t.interpolateComponentsAt(i,r)}},Y$=class{get time(){return this._time}constructor(t){t&&this.update(t)}update(t){t&&(this.definition?this.definition.copyFrom(t):this.definition=t.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const t=this.definition,i=t.compared,r=i.sourceZoom,n=i.targetZoom;this._zoomSign=r>n?1:-1,this._panPixelsAtSource=i.pan*t.source.pixelsPerPanAtZoom(r);const o=(t.source.pixelsPerRotate()+t.target.pixelsPerRotate())/2;this._rotatePixels=i.rotate*o}_updatePixelFlow(){const t=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom,{hasZoom:r,hasPan:n,hasRotate:o}=this.definition;let c=0,y=0;r&&(n&&(c=(i/t-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),o&&(y=this._zoomSign*(Math.log(t/i)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const v=this.definition.desiredPixelFlow;if(r&&n&&o){const _=c+y+c*y;this._zoomPixelFlow=c*y/_*v,this._panPixelFlow=y/_*v,this._rotatePixelFlow=c/_*v}else if(r&&n){const _=1+c;this._zoomPixelFlow=c/_*v,this._panPixelFlow=1/_*v}else if(r&&o){const _=1+y;this._zoomPixelFlow=y/_*v,this._rotatePixelFlow=1/_*v}else if(n&&o){const _=this._panPixelsAtSource/this._rotatePixels,I=1+_;this._panPixelFlow=_/I*v,this._rotatePixelFlow=1/I*v}else n?this._panPixelFlow=v:r?this._zoomPixelFlow=v:o&&(this._rotatePixelFlow=v);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const _=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=_,this._panPixelFlow/=_,this._rotatePixelFlow/=_}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/r$e:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const t=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,i=t*this._panPixelsAtSource;return Math.log(i*(this._zoomPixelFlow/this._panPixelFlow)+1)/(t*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(t){if(t===0||t===1)return t;if(this.definition.hasZoom){const i=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(i*(i/r)**-t-i)/(r-i)}return t}_interpolateComponentsFov(t){if(t===0)return this.definition.segmentStart;if(t===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:i,segmentEnd:r}=this.definition;return i+t*(r-i)}return this.definition.segmentStart}_interpolateComponentsPan(t){if(t===0||t===1)return t;if(this.definition.hasPan&&this.definition.hasZoom){const i=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(i*t*this._time)-1))/(i*Math.LN2)}return t}_interpolateComponentsRotate(t){return t}interpolateComponentsAt(t,i){t=Math.min(Math.max(t,0),1),i.zoom=this._interpolateComponentsZoom(t),i.pan=this._interpolateComponentsPan(t),i.rotate=this._interpolateComponentsRotate(t),i.zoomOffset=0,i.fov=this._interpolateComponentsFov(t)}};const r$e=gI(45);function n$e(e,t,i){const r=t-e.compared.sourceZoom,n=e.halfWindowPanAtZoom(r);return-e.halfWindowSize*(i.ascensionFactor*Math.LN2*e.compared.pan+n)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*n)}function s$e(e,t,i){const r=1/t,n=Math.log(e.compared.sourceZoom*r),o=1/e.desiredPixelFlow,c=1/Math.LN2,y=t-e.compared.sourceZoom,v=1/y,_=(i.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(y))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*r*o*c*v*_-e.halfWindowSize*n*o*c*v+e.halfWindowSize*n*o*c*_/(y*y)}function o$e(e,t,i){const r=t-e.compared.sourceZoom,n=1/r,o=1/t,c=Math.log(e.compared.sourceZoom*o),y=(i.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(r))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*n*(-2*n*o*y+2*n*c+2*o-2*c*y/(r*r)-y/(t*t))/(e.desiredPixelFlow*Math.LN2)}function a$e(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function l$e(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function u$e(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function c$e(e,t,i){return-e.compared.pan*e.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}function h$e(e,t,i){return e.compared.pan*e.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}function d$e(e,t,i){return-2*e.compared.pan*e.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}function p$e(e,t,i){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-i.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function f$e(e,t,i){const r=Math.log(t/e.compared.targetZoom),n=1/e.desiredPixelFlow,o=1/Math.LN2,c=-t+e.compared.targetZoom,y=1/c,v=(-e.halfWindowPanAtZoom(t)-i.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*r*n*o*y+e.halfWindowSize*r*n*o*v/(c*c)+e.halfWindowSize*n*o*y*v/t}function y$e(e,t,i){const r=t-e.compared.targetZoom,n=1/r,o=1/t,c=Math.log(t/e.compared.targetZoom),y=(e.halfWindowPanAtZoom(t)+i.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*n*(-2*n*o*y-2*n*c+2*o+2*c*y/(r*r)-y/(t*t))/(e.desiredPixelFlow*Math.LN2)}function m$e(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function g$e(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function v$e(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function w$e(e){const t=e.compared.sourceZoom-e.compared.targetZoom;if(t===0)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));const i=Math.LN2*e.compared.pan,r=t,n=e.halfWindowPanAtZoom(r),o=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*n);return e.compared.sourceZoom<=e.compared.targetZoom?o*(i-n):o*(i+n)}function b$e(e,t){let i=_$e(e,t);const r={ascensionFactor:t.ascensionFactor!=null?t.ascensionFactor:.5,descensionFactor:t.descensionFactor!=null?t.descensionFactor:.5},n=r.ascensionFactor===0,o=r.descensionFactor===0,c=n?a$e:n$e,y=n?l$e:s$e,v=n?u$e:o$e,_=o?m$e:p$e,I=o?g$e:f$e,$=o?v$e:y$e,A=W=>c(e,W,r)+c$e(e,W,r)+_(e,W,r),k=W=>y(e,W,r)+h$e(e,W,r)+I(e,W,r),R=W=>v(e,W,r)+d$e(e,W,r)+$(e,W,r);let N=A(i);const D=w$e(e);let j;const z=t.maximumIterations||20,U=t.maximumDistance!=null?t.maximumDistance:1/0;for(j=0;j<z;j++){const W=t.desiredSlope??1e-6;let Q=k(i);Math.abs(Q)>W&&(Q+=W);const K=Q/R(i);if(isNaN(K)||i>=U&&K<0){if(!isFinite(U))return null;i=U,N=A(i);break}if(i-=K,i<e.compared.sourceZoom||i<e.compared.targetZoom)return null;const ee=A(i);if(Math.abs(ee-N)/N<=.005)break;N=ee}return N>D*(1-.3)||i<e.compared.sourceZoom||i<e.compared.targetZoom?null:i}function _$e(e,t){const i=Math.max(e.compared.sourceZoom,e.compared.targetZoom),r=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return r<i?t.maximumDistance!=null?i+(t.maximumDistance-i)/2:1.5*i:t.maximumDistance?Math.min(t.maximumDistance,r):r}let S$e=class extends i$e{constructor(t,i){super(),this._preallocSegments=[new Y$,new Y$,new Y$],this._ascensionSegment=null,this._descensionSegment=null,this.update(t,i)}update(t,i){if(!t)return;this.definition?this.definition.copyFrom(t):this.definition=t.clone();const r=i!=null&&i.apex?b$e(t,i.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,i==null?void 0:i.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(t,i,r){t.interpolateComponentsAt(i,r),t===this._ascensionSegment?r.zoom=JTe(r.zoom):t===this._descensionSegment&&(r.zoom=Nre(r.zoom))}_updateWithApex(t,i){const[r,n,o]=this._preallocSegments,c=(i==null?void 0:i.ascensionFactor)??.5,y=Math.min(1-c,(i==null?void 0:i.ascensionFactor)!=null&&i.descensionFactor!=null?i.descensionFactor:.5),v=1-c-y;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=t,r.definition.compared.pan=this.definition.compared.pan*c,r.definition.compared.rotate=this.definition.compared.rotate*c,r.definition.segmentEnd=c,r.update(),this._ascensionSegment=r,this.segments.push(r),v>0&&(n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.copyFrom(this.definition),n.definition.compared.sourceZoom=t,n.definition.compared.targetZoom=t,n.definition.compared.pan=this.definition.compared.pan*v,n.definition.compared.rotate=this.definition.compared.rotate*v,n.definition.segmentStart=r.definition.segmentEnd,n.definition.segmentEnd=r.definition.segmentEnd+v,n.update(),this.segments.push(n)),o.definition?o.definition.copyFrom(this.definition):o.definition=this.definition.clone(),o.definition.compared.sourceZoom=t,o.definition.compared.pan=this.definition.compared.pan*y,o.definition.compared.rotate=this.definition.compared.rotate*y,o.definition.segmentStart=c+v,o.update(),this._descensionSegment=o,this.segments.push(o)}_updateWithoutApex(){const[t]=this._preallocSegments;t.update(this.definition),this.segments.push(t)}};const x$e=new t$e;let I$e=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(t){this._time=0,this._easing=rV,this.definition=new e$e(t),this.path=new S$e}update(t,i,r){this.definition.update(t,i,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(Oye(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?rV:KTe)}cameraAt(t,i){t=Math.min(Math.max(0,t),1),t=this._normalizedEasing(t);const r=this.path.interpolateComponentsAt(t,x$e);i.interpolate(this.definition.source,this.definition.target,r)}_normalizedEasing(t){const i=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(t,this._time)-i)/(r-i)}_applyTimeSettings(t,i){const r=i.speedFactor!=null?i.speedFactor:1,n=i.minDuration??k2.minDuration/r,o=i.maxDuration??k2.maxDuration/r;return t=i.duration!=null?i.duration:Math.min(Math.max(t/r,n),o)}};const nV=2e3,T$e=64;let $$e=class{constructor(t){this._view=t,this._animation=new I$e(()=>new iV(this._view)),this._current=new iV(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,i,r={}){ds(this._current.viewpoint,t),ds(this._source.viewpoint,t),ds(this._target.viewpoint,i),this._animation.update(this._source,this._target,r)}applyRatio(t,i){this._animation.cameraAt(i,this._current),ds(t,this._current.viewpoint)}},Qy=class extends Ve{constructor(t){super(t),this._animation=null,this._destinationViewState=new zR,this.updateFunction=null,this.easing=pu.ease,this.viewpoint=new wn({targetGeometry:new st,scale:0,rotation:0}),this._updateTask=tg({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new $$e(t.view)}destroy(){this._updateTask=Bi(this._updateTask)}get animation(){return this._animation}set animation(t){this._animation=t,this.view.animation=t}animate(t,i,r){this.stop();const n=this.viewpoint;ds(n,i);const o=(typeof(r==null?void 0:r.easing)=="string"?WTe(r.easing):r==null?void 0:r.easing)||this.easing,c=t.target;this._transition.update(this.viewpoint,c,{apex:{maximumDistance:Math.min(Math.min(i.scale,c.scale)*T$e,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:r==null?void 0:r.duration,maxDuration:(r==null?void 0:r.animationMode)==="auto"?1/0:(r==null?void 0:r.maxDuration)??Fre.maxDuration,speedFactor:r==null?void 0:r.speedFactor,easing:typeof o=="function"?v=>o(v):void 0}),(r==null?void 0:r.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=c,E$e(this._transition.animation,r,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,c,{duration:0}));const y=()=>{this.animation===t&&this._updateTask&&(t.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(y,y),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinuous(t,i){this.stop(),this.updateFunction=i,this.viewpoint=t;const r=new i7({target:t.clone()}),n=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){var r,n;const i=this.animation;if(i&&i.state!==i7.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime),(r=this.animation)==null||r.update(this.viewpoint);else{const o=performance.now()-this._startTime,c=this._transition.duration,y=c>0?o/c:1,v=y>=1;this._transition.applyRatio(this.viewpoint,y),v&&((n=this.animation)==null||n.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function E$e(e,t,i,r){if((t==null?void 0:t.duration)!=null)return!0;const{time:n,isLinear:o}=e,c=(t==null?void 0:t.speedFactor)||1,y=(t==null?void 0:t.maxDuration)??Fre.maxDuration/c;if(we("esri-goto-debug")&&(console.log("speed factor:",c),console.log("adjusted duration:		",n),console.log("adjusted max duration:	",y),console.log("is linear:",o)),n>y)return we("esri-goto-debug")&&console.warn(`failed "auto" heuristic: animations must be shorter than ${y/1e3}s`),!1;if(o){const _=ar(),I=gn(...r.toScreen(_,...i.center)),$=gn(...i.toScreen(_,...r.center)),A=$!=null&&$.x>-(1.5-.5)*i.size[0]&&$.x<(1.5+.5)*i.size[0]&&$.y>-(1.5-.5)*i.size[1]&&$.y<(1.5+.5)*i.size[1],k=I!=null&&I.x>-(1.5-.5)*r.size[0]&&I.x<(1.5+.5)*r.size[0]&&I.y>-(1.5-.5)*r.size[1]&&I.y<(1.5+.5)*r.size[1];if(we("esri-goto-debug")&&(console.log(`dest is within ${1.5} screens at start view:`,A),console.log(`start is within ${1.5} screens at dest view:`,k)),n>nV/c&&!A&&!k)return we("esri-goto-debug")&&console.warn(`failed "auto" heuristic: linear animations must be...
  - shorter than ${nV/1e3/c}s, or
  - shorter than ${y/1e3}s and the destination is close enough to the starting screen, or
  - shorter than ${y/1e3}s and the start point is close enough to the destination screen`),!1}return!0}m([w()],Qy.prototype,"easing",void 0),m([w()],Qy.prototype,"view",void 0),m([w()],Qy.prototype,"viewpoint",void 0),Qy=m([H("esri.views.2d.AnimationManager")],Qy);const M$e=Qy;var ss;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(ss||(ss={}));const jre=Symbol("Yield");let A$e=class{constructor(){this._tasks=new Array,this._runningTasks=x2(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(t){if(this.length===0)return jre;for(;!t.done&&this._process(t);)t.madeProgress()}push(t,i,r){return++this._runningTasks.value,new Promise((n,o)=>this._tasks.push(new sV(n,o,t,i,r))).finally(()=>--this._runningTasks.value)}unshift(t,i,r){return++this._runningTasks.value,new Promise((n,o)=>this._tasks.unshift(new sV(n,o,t,i,r))).finally(()=>--this._runningTasks.value)}_process(t){var r;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const n=Tl(i.signal);if(n&&!i.abortCallback)i.reject(Ei());else{const o=n?(r=i.abortCallback)==null?void 0:r.call(i,Ei()):i.callback(t);Fu(o)?o.then(i.resolve,i.reject):i.resolve(o)}}catch(n){i.reject(n)}return!0}cancelAll(){const t=Ei();for(const i of this._tasks)if(i.abortCallback){const r=i.abortCallback(t);i.resolve(r)}else i.reject(t);this._tasks.length=0}},sV=class{constructor(t,i,r,n=void 0,o=void 0){this.resolve=t,this.reject=i,this.callback=r,this.signal=n,this.abortCallback=o}},Cw=class extends Ve{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};m([w()],Cw.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),m([w()],Cw.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),Cw=m([H("esri.views.support.debugFlags")],Cw);const C$e=new Cw;function k$e(){return new o4.Scheduler}var xt;(function(e){e.RESOURCE_CONTROLLER_IMMEDIATE="immediate",e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.LOD_RENDERER="LoD renderer",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="clouds generator",e.MAPVIEW_FETCH_QUEUE="mapview fetch queue",e.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",e.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",e[e.NONE=0]="NONE",e[e.TEST_PRIO=1]="TEST_PRIO"})(xt||(xt={}));const da=0,oV=new Map([[xt.RESOURCE_CONTROLLER_IMMEDIATE,da],[xt.RESOURCE_CONTROLLER,4],[xt.SLIDE,da],[xt.STREAM_DATA_LOADER,da],[xt.ELEVATION_QUERY,da],[xt.TERRAIN_SURFACE,1],[xt.SURFACE_GEOMETRY_UPDATES,1],[xt.LOD_RENDERER,2],[xt.GRAPHICS_CORE,2],[xt.I3S_CONTROLLER,2],[xt.POINT_CLOUD_LAYER,2],[xt.FEATURE_TILE_FETCHER,2],[xt.CLOUDS_GENERATOR,2],[xt.OVERLAY,4],[xt.STAGE,4],[xt.GRAPHICS_DECONFLICTOR,4],[xt.FILTER_VISIBILITY,4],[xt.SCALE_VISIBILITY,4],[xt.FRUSTUM_VISIBILITY,4],[xt.POINT_OF_INTEREST_FREQUENT,6],[xt.POINT_OF_INTEREST_INFREQUENT,30],[xt.LABELER,8],[xt.FEATURE_QUERY_ENGINE,8],[xt.FEATURE_TILE_TREE,16],[xt.FEATURE_TILE_TREE_ACTIVE,da],[xt.ELEVATION_ALIGNMENT,12],[xt.ELEVATION_ALIGNMENT_SCENE,14],[xt.TEXT_TEXTURE_ATLAS,12],[xt.TEXTURE_UNLOAD,12],[xt.LINE_OF_SIGHT_TOOL,16],[xt.LINE_OF_SIGHT_TOOL_INTERACTIVE,da],[xt.SNAPPING,da],[xt.SHADOW_ACCUMULATOR,30],[xt.MAPVIEW_FETCH_QUEUE,da],[xt.MAPVIEW_LAYERVIEW_UPDATE,2],[xt.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,da]]);function aV(e){return oV.has(e)?oV.get(e):typeof e=="number"?e:1}const L$e=6.5,lV=1,O$e=30,R$e=1e3/30,P$e=100,uV=.9;var o4,Sp;(function(e){class t{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(o=>o.needsUpdate)}constructor(){this._updating=x2(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new vb("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=ss.INTERACTING,this._tasks=new t0,this._runQueue=new t0,this._load=0,this._idleStateCallbacks=new t0,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=ge(()=>C$e.SCHEDULER_LOG_SLOW_TASKS,o=>this._debug=o,qe);for(const o of Object.keys(xt))this.performanceInfo.tasks.set(xt[o],new vb(xt[o]))}destroy(){this._tasks.toArray().forEach(o=>o.remove()),this._tasks.clear(),Bi(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(o){this._updatingChanged(),o&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(o,c){const y=new i(this,o,c);return this._tasks.push(y),this._updatingChanged(),this.performanceInfo.tasks.has(o)||this.performanceInfo.tasks.set(o,new vb(o)),y}registerIdleStateCallbacks(o,c){const y={idleBegin:o,idleEnd:c};this._idleStateCallbacks.push(y),this.state===ss.IDLE&&this._idleUpdatesStartFired&&y.idleBegin();const v=this;return{remove:()=>this._removeIdleStateCallbacks(y),set idleBegin(_){v._idleUpdatesStartFired&&(y.idleEnd(),v._state===ss.IDLE&&_()),y.idleBegin=_},set idleEnd(_){y.idleEnd=_}}}get load(){return this._load}set state(o){this._state!==o&&(this._state=o,this.state!==ss.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(c=>c.idleEnd())))}get state(){return this._state}updateBudget(o){this._test&&(this._test.usedBudget=0),++this._frameNumber;let c=L$e,y=o.frameDuration,v=lV;switch(this.state){case ss.IDLE:c=0,y=Math.max(P$e,o.frameDuration),v=O$e;break;case ss.INTERACTING:y=Math.max(R$e,o.frameDuration);case ss.ANIMATING:}return y=y-o.elapsedFrameTime-c,this.state!==ss.IDLE&&y<lV&&!this._forceTask?(this._forceTask=!0,!1):(y=Math.max(y,v),this._budget.reset(y,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case ss.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(o=>o.idleBegin())),this._runIdle();break;case ss.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(o){this._idleUpdatesStartFired&&o.idleEnd(),this._idleStateCallbacks.removeUnordered(o)}removeTask(o){this._tasks.removeUnordered(o),this._runQueue.removeUnordered(o),this._updatingChanged()}_updateTask(o){this._tasks.forAll(c=>{c.name===o&&c.setPriority(o)})}_getState(o){if(this._runQueue.some(y=>y.name===o))return Sp.SCHEDULED;let c=Sp.IDLE;return this._tasks.forAll(y=>{y.name===o&&y.needsUpdate&&(y.schedulePriority<=1?c=Sp.READY:c!==Sp.READY&&(c=Sp.WAITING))}),c}_getRuntime(o){let c=0;return this._tasks.forAll(y=>{y.name===o&&(c+=y.runtime)}),c}_resetRuntimes(){this._tasks.forAll(o=>o.runtime=0)}_getRunning(){const o=new Map;if(this._tasks.forAll(y=>{y.needsUpdate&&o.set(y.name,(o.get(y.name)||0)+1)}),o.size===0)return null;let c="";return o.forEach((y,v)=>{c+=y>1?` ${y}x ${v}`:` ${v}`}),c}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const o=this._tasks.reduce((c,y)=>y.needsUpdate?++c:c,0);this._load=this._load*uV+o*(1-uV)}_schedule(){for(this._runQueue.filterInPlace(o=>!!o.needsUpdate||(o.schedulePriority=o.basePriority,!1)),this._tasks.forAll(o=>{o.basePriority===da&&o.needsUpdate&&!this._runQueue.includes(o)&&o.blockFrame!==this._frameNumber&&this._runQueue.unshift(o)});this._runQueue.length===0;){let o=!1,c=0;if(this._tasks.forAll(y=>{y.needsUpdate&&y.schedulePriority!==0&&y.basePriority!==da&&y.blockFrame!==this._frameNumber&&(o=!0,c=Math.max(c,y.basePriority),y.schedulePriority===1?(y.schedulePriority=0,this._runQueue.push(y)):--y.schedulePriority)}),!o)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const o=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const c=this._budget.now(),y=this._runQueue.pop();this._budget.resetProgress();try{y.task.runTask(this._budget)===jre&&(y.blockFrame=this._frameNumber)}catch(_){_e.getLogger("esri.views.support.Scheduler").error(`Exception in task "${y.name}"`,_),y.blockFrame=this._frameNumber}!this._budget.hasProgressed&&y.blockFrame!==this._frameNumber&&y.needsUpdate&&(y.name,xt.I3S_CONTROLLER,y.blockFrame=this._frameNumber),y.schedulePriority=y.basePriority;const v=this._budget.now()-c;if(y.runtime+=v,this._frameTaskTimes.set(y.priority,this._frameTaskTimes.get(y.priority)+v),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-o)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-o)}_startFrameTaskTimes(){for(const o of Object.keys(xt))this._frameTaskTimes.set(xt[o],0)}_recordFrameTaskTimes(o){this._frameTaskTimes.forEach((c,y)=>this.performanceInfo.tasks.get(y).push(c)),this.performanceInfo.total.push(o)}get test(){return this._test}}e.Scheduler=t;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(o,c,y){this._scheduler=o,this.name=c,this.blockFrame=0,this.runtime=0,this._queue=new A$e,this._handles=new kg,this._basePriority=aV(c),this.schedulePriority=this._basePriority,this._task=x2(y??this._queue),this._handles.add(en(()=>this.task.running,v=>o.taskRunningChanged(v)))}remove(){this.processQueue(zre),this._scheduler.removeTask(this),this.schedule=cV.schedule,this.reschedule=cV.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(o){if(this.name===o)return;this.name=o;const c=aV(o);this._basePriority!==da&&this.schedulePriority===0||(this.schedulePriority=c),this._basePriority=c}get priority(){return this.name}set priority(o){this.setPriority(o)}get needsUpdate(){return this.updating||this.task.running}schedule(o,c,y){return this._queue.push(o,c,y)}reschedule(o,c,y){return this._queue.unshift(o,c,y)}processQueue(o){return this._queue.runTask(o)}}class r{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=ss.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(o){return!this.done&&(o()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(o){this._enabled=o}reset(o,c){this._begin=this.now(),this._budget=o,this._state=c,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=r})(o4||(o4={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(Sp||(Sp={}));const zre=(()=>{const e=new o4.Budget;return e.enabled=!1,e})();let N$e=class{remove(){}processQueue(){}schedule(t,i,r){try{if(Tl(i)){const n=Ei();return r?Promise.resolve(r(n)):Promise.reject(n)}return IM(t(zre))}catch(n){return Promise.reject(n)}}reschedule(t,i,r){return this.schedule(t,i,r)}};const cV=new N$e;let F$e=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=k$e(),this.stationary=!0,this.prepare=()=>{var i;this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),((i=this.view.animation)==null?void 0:i.target)==null||Fu(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=i=>{var y;if(this._updateRequested=!1,(y=this.view)==null?void 0:y.destroyed)return;const{allLayerViews:r,graphicsView:n,labelManager:o,state:{id:c}}=this.view;r.forEach(this._updateLayerView,this),o!=null&&(o.lastUpdateId!==c&&(o.viewChange(),o.lastUpdateId=c),o.updateRequested&&o.processUpdate(this._updateParameters)),n!=null&&(n.lastUpdateId!==c&&(n.viewChange(),n.lastUpdateId=c),n.updateRequested&&n.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=ss.ANIMATING:this.view.interacting?this._scheduler.state=ss.INTERACTING:this._scheduler.state=ss.IDLE,this._scheduler.updateBudget(i)&&this._scheduler.frame()}}destroy(){this.stop(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,targetState:new zR,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=ge(()=>t.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=tg(this),this.requestUpdate()}stop(){var t;this._frameTaskHandle&&(this._updateRequested=!1,(t=this._stationaryHandle)==null||t.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){var n;if(!t.attached)return void this.requestUpdate();const i=this.view.state,r=t.lastUpdateId;r!=null&&(this.stationary||t.moving)||(t.moving=!0),r!==i.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=i.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&((n=t.layerViews)==null||n.forEach(this._updateLayerView,this))}},z5=class extends Ve{constructor(t){super(t),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(t,i){if(!t)return void _e.getLogger(this).error("#goTo()","target cannot be null or undefined");const r=new i7;this.view.animation=r,await Ou(()=>this.view.ready,i);const n={...i,animate:(i==null?void 0:i.animate)??!AR(),animationMode:(i==null?void 0:i.animationMode)??"auto"},{extent:o,spatialReference:c,size:y,viewpoint:v,constraints:_,padding:I,allLayerViews:$}=this.view,A=GIe(t,{extent:o,spatialReference:c,size:y,viewpoint:v,constraints:_,padding:I,allLayerViews:$,pickClosestTarget:(i==null?void 0:i.pickClosestTarget)??!0});return r==null||r.update(A),this._gotoTask={},n.animate?this._gotoAnimated(A,n):this._gotoImmediate(A,n)}_gotoImmediate(t,i){const r=this._gotoTask,n=this.view.animation,o=t.then(c=>{if(Gi(i),r!==this._gotoTask)throw new ne("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=n.target=c,n.finish()});return this._cancellableGoTo(r,n,o,i)}_gotoAnimated(t,i){const r=this._gotoTask,n=this.view.animation;if(!n)return Promise.resolve();const o=t.then(c=>{if(Gi(i),r!==this._gotoTask)throw new ne("view:goto-interrupted","Goto was interrupted");return n.update(c),this.view.animationManager.animate(n,this.view.viewpoint,i),n.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,n,o,i)}_cancellableGoTo(t,i,r,n){const o=()=>t===this._gotoTask;return nO(r,n).finally(()=>{o()&&(i.done||i.stop())})}};m([w({constructOnly:!0})],z5.prototype,"view",void 0),z5=m([H("esri.views.2d.GoToManager")],z5);function ki(){return Promise.all([de(()=>import("./webglDeps-B2ljvO3v.js"),__vite__mapDeps([128,55,54,112,129,114]),import.meta.url),de(()=>import("./mapViewDeps-D6IMO78u.js"),__vite__mapDeps([130,59,131,57,58,60,61,56,62,63,26,54,55,53,32,114,68,132,129,76,133,102,101,67,10,134,93,65,66,100,128,112,135,71,136,52,13,14,6,137,109,108,95,111,138,139,140,69,64,141,142,143,144,145,146,107,147]),import.meta.url)])}const $v=()=>ki().then(()=>de(()=>import("./TileLayerView2D-BzmlRU9F.js"),__vite__mapDeps([148,93,62,63,26,54,55,53,32,56,60,57,58,59,61,133,132,114,129,76,102,101,67,10,100,135,71,136,52,13,14,6,131,68,65,66,109,108,95,141,142,149,150,146,151,152,144,145,153,154,126,127,19,155,156]),import.meta.url)),xp=()=>ki().then(()=>de(()=>import("./FeatureLayerView2D-0eP8lVAo.js").then(e=>e.F),__vite__mapDeps([157,10,158,151,133,145,62,63,26,54,55,53,32,56,146,132,114,129,76,102,101,67,131,57,58,59,60,61,68,71,134,93,159,156,153]),import.meta.url)),hV={"base-dynamic":()=>ki().then(()=>de(()=>import("./BaseDynamicLayerView2D-BMDmjYLW.js"),__vite__mapDeps([160,161,132,53,54,55,32,56,114,129,76,133,102,101,67,10,151,162,150,153]),import.meta.url)),"base-tile":$v,"bing-maps":$v,catalog:()=>ki().then(()=>de(()=>import("./CatalogLayerView2D-6b2xZqae.js"),__vite__mapDeps([163,151,133]),import.meta.url)),"catalog-dynamic-group":()=>ki().then(()=>de(()=>import("./CatalogDynamicGroupLayerView2D-BJoF5dkI.js"),__vite__mapDeps([164,151,133]),import.meta.url)),"catalog-footprint":()=>ki().then(()=>de(()=>import("./CatalogFootprintLayerView2D-BP4mgZwN.js"),__vite__mapDeps([165,157,10,158,151,133,145,62,63,26,54,55,53,32,56,146,132,114,129,76,102,101,67,131,57,58,59,60,61,68,71,134,93,159,156,153]),import.meta.url)),csv:xp,"geo-rss":()=>ki().then(()=>de(()=>import("./GeoRSSLayerView2D-WdqgMNNa.js"),__vite__mapDeps([166,151,133,143,144,145,62,63,26,54,55,53,32,56,146,132,114,129,76,102,101,67,10,131,57,58,59,60,61,68,141,52,13,14,6,142]),import.meta.url)),feature:xp,geojson:xp,parquet:xp,graphics:()=>ki().then(()=>de(()=>import("./GraphicsLayerView2D-CWdiz3I_.js"),__vite__mapDeps([167,151,133,143,144,145,62,63,26,54,55,53,32,56,146,132,114,129,76,102,101,67,10,131,57,58,59,60,61,68,141,52,13,14,6,142,159]),import.meta.url)),group:()=>ki().then(()=>de(()=>import("./GroupLayerView2D-BfuTbps7.js"),__vite__mapDeps([168,151,133]),import.meta.url)),imagery:()=>ki().then(()=>de(()=>import("./ImageryLayerView2D-SfxvjMoe.js"),__vite__mapDeps([169,170,55,114,32,82,132,53,54,56,129,76,133,102,101,67,10,151,141,57,58,59,60,61,52,13,14,6,62,63,26,131,68,142,152,144,145,146,161,150,162,85,158,156,153]),import.meta.url)),"imagery-tile":()=>ki().then(()=>de(()=>import("./ImageryTileLayerView2D-CYymVql0.js"),__vite__mapDeps([171,172,170,55,114,32,82,132,53,54,56,129,76,133,102,101,67,10,151,173,146,174,85,158,156,153]),import.meta.url)),kml:()=>ki().then(()=>de(()=>import("./KMLLayerView2D-g04b8j_1.js"),__vite__mapDeps([175,176,150,133,161,132,53,54,55,32,56,114,129,76,102,101,67,10,151,143,144,145,62,63,26,146,131,57,58,59,60,61,68,141,52,13,14,6,142,85,137,128,112,109,108,95,136,93,111,173]),import.meta.url)),"knowledge-graph":()=>ki().then(()=>de(()=>import("./KnowledgeGraphLayerView2D-kDFgN2J9.js"),__vite__mapDeps([177,151,133]),import.meta.url)),"link-chart":()=>ki().then(()=>de(()=>import("./KnowledgeGraphLayerView2D-kDFgN2J9.js"),__vite__mapDeps([177,151,133]),import.meta.url)),"knowledge-graph-sublayer":xp,"map-image":()=>ki().then(()=>de(()=>import("./MapImageLayerView2D-CFttwCh3.js"),__vite__mapDeps([178,161,132,53,54,55,32,56,114,129,76,133,102,101,67,10,151,141,57,58,59,60,61,52,13,14,6,62,63,26,131,68,142,152,144,145,146,162,150,158,153,154,126,127,19,155,156]),import.meta.url)),"map-notes":()=>ki().then(()=>de(()=>import("./MapNotesLayerView2D-ZNwAmJBg.js"),__vite__mapDeps([179,151,133,143,144,145,62,63,26,54,55,53,32,56,146,132,114,129,76,102,101,67,10,131,57,58,59,60,61,68,141,52,13,14,6,142]),import.meta.url)),media:()=>ki().then(()=>de(()=>import("./MediaLayerView2D-BIFHTjNI.js"),__vite__mapDeps([180,181,142,36,93,62,63,26,54,55,53,32,56,60,57,58,59,61,133,132,114,129,76,102,101,67,10,100,135,71,136,52,13,14,6,131,68,65,66,109,108,95,141,140,69,182,151]),import.meta.url)),"ogc-feature":()=>ki().then(()=>de(()=>import("./OGCFeatureLayerView2D-CNulkeY7.js"),__vite__mapDeps([183,157,10,158,151,133,145,62,63,26,54,55,53,32,56,146,132,114,129,76,102,101,67,131,57,58,59,60,61,68,71,134,93,159,156,153]),import.meta.url)),"open-street-map":$v,"oriented-imagery":xp,route:()=>ki().then(()=>de(()=>import("./RouteLayerView2D-OExzSSZv.js"),__vite__mapDeps([184,185,151,133,143,144,145,62,63,26,54,55,53,32,56,146,132,114,129,76,102,101,67,10,131,57,58,59,60,61,68,141,52,13,14,6,142]),import.meta.url)),stream:()=>ki().then(()=>de(()=>import("./StreamLayerView2D-D0MVIs1H.js"),__vite__mapDeps([186,157,10,158,151,133,145,62,63,26,54,55,53,32,56,146,132,114,129,76,102,101,67,131,57,58,59,60,61,68,71,134,93,159,156,153]),import.meta.url)),"subtype-group":()=>ki().then(()=>de(()=>import("./SubtypeGroupLayerView2D-BIO-RIKy.js"),__vite__mapDeps([187,157,10,158,151,133,145,62,63,26,54,55,53,32,56,146,132,114,129,76,102,101,67,131,57,58,59,60,61,68,71,134,93,159,156,153]),import.meta.url)),tile:$v,"vector-tile":()=>ki().then(()=>de(()=>import("./VectorTileLayerView2D-4UlRjrkp.js"),__vite__mapDeps([188,100,61,139,93,68,60,55,114,101,132,53,54,32,56,129,76,133,102,67,10,146,12,103,104,151,153]),import.meta.url)),video:()=>ki().then(()=>de(()=>import("./VideoLayerView2D-CFqeIXgI.js"),__vite__mapDeps([189,190,182,76,132,53,54,55,32,56,114,129,133,102,101,67,10,131,57,58,59,60,61,62,63,26,68,151,143,144,145,146,141,52,13,14,6,142]),import.meta.url)),wcs:()=>ki().then(()=>de(()=>import("./ImageryTileLayerView2D-CYymVql0.js"),__vite__mapDeps([171,172,170,55,114,32,82,132,53,54,56,129,76,133,102,101,67,10,151,173,146,174,85,158,156,153]),import.meta.url)),"web-tile":$v,wfs:xp,wms:()=>ki().then(()=>de(()=>import("./WMSLayerView2D-DxfDxPjm.js"),__vite__mapDeps([191,161,132,53,54,55,32,56,114,129,76,133,102,101,67,10,151,162,150,153,192,158]),import.meta.url)),wmts:()=>ki().then(()=>de(()=>import("./WMTSLayerView2D-XfBYjm3d.js"),__vite__mapDeps([193,149,150,133,132,53,54,55,32,56,114,129,76,102,101,67,10,146,151,153]),import.meta.url)),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,focusArea:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};function D$e(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new ne(`${i}:view-not-supported`,`${t} is not supported in 2D`)}const dV={hasLayerViewModule:e=>hV[e.type]!=null,importLayerView:e=>{const t=hV[e.type];if(t==null)throw D$e(e);return t(e)}};function j$e(e,t){const{spatialReference:i}=t,r=[t.x,t.y];let n=Number.POSITIVE_INFINITY,o=0,c=0;const y=[0,0],v=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const _ of v)for(let I=0;I<_.length-1;I++){fge(y,r,_,I);const $=YI(r,y);$<n&&(n=$,o=y[0],c=y[1])}return{coordinate:new st({x:o,y:c,spatialReference:i}),distance:n}}var u7;let Df=u7=class extends aR(Ve){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return sh(this.geometry,this.spatialReference)}catch(e){return _e.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;const i=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?m3(this.normalizedGeometry,i):_O(this.normalizedGeometry,i))return e;const{coordinate:r}=j$e(this.normalizedGeometry,i);return r&&(e.targetGeometry=r),e}clone(){var e,t;return new u7({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};m([w({constructOnly:!0})],Df.prototype,"geometry",void 0),m([w({readOnly:!0})],Df.prototype,"normalizedGeometry",null),m([w({constructOnly:!0})],Df.prototype,"spatialReference",void 0),Df=u7=m([H("esri.views.2d.constraints.GeometryConstraint")],Df);var c7;let kw=c7=class extends aR(Ve){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new c7({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};m([w()],kw.prototype,"enabled",void 0),m([w()],kw.prototype,"rotationEnabled",void 0),kw=c7=m([H("esri.views.2d.constraints.RotationConstraint")],kw);const Vre=kw;var h7;let zs=h7=class extends aR(Ve){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:r,minZoom:n,maxZoom:o}=this,c=-1,y=-1,v=!1,_=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!(t!=null&&t.length))return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);t=t.map(I=>I.clone()),t.sort((I,$)=>$.scale-I.scale),t.forEach((I,$)=>I.level=$);for(const I of t)!v&&i>0&&i>=I.scale&&(c=I.level,v=!0),!_&&r>0&&r>=I.scale&&(y=e?e.level:-1,_=!0),e=I;n===-1&&(n=i===0?0:c),o===-1&&(o=r===0?t.length-1:y),n=Math.max(n,0),n=Math.min(n,t.length-1),o=Math.max(o,0),o=Math.min(o,t.length-1),n>o&&([n,o]=[o,n]),i=t[n].scale,r=t[o].scale,t.splice(0,n),t.splice(o-n+1,t.length),t.forEach((I,$)=>{this._lodByScale[I.scale]=I,this._scales[$]=I.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",o),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,r=this.effectiveMaxScale,n=e.targetGeometry,o=t&&t.targetGeometry,c=r!==0&&e.scale<r,y=i!==0&&e.scale>i;if(c||y){const v=y?i:r;if(t&&o){const _=(v-t.scale)/(e.scale-t.scale);n.x=o.x+(n.x-o.x)*_,n.y=o.y+(n.y-o.y)*_}e.scale=v}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.floor(e),r=Math.ceil(e);return t[i]+(e-i)*(t[r]-t[i])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,r;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let n=0;n<t.length-1;n++){if(i=t[n],r=t[n+1],r===e)return n+this.effectiveMinZoom+1;if(i>e&&r<e)return n+this.effectiveMinZoom+1-(e-r)/(i-r)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new h7({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t,this._scales[0])),this._lodByScale[e].scale}};m([w({readOnly:!0})],zs.prototype,"effectiveLODs",void 0),m([w({readOnly:!0})],zs.prototype,"effectiveMinZoom",void 0),m([w({readOnly:!0})],zs.prototype,"effectiveMaxZoom",void 0),m([w({readOnly:!0})],zs.prototype,"effectiveMinScale",void 0),m([w({readOnly:!0})],zs.prototype,"effectiveMaxScale",void 0),m([w()],zs.prototype,"lods",void 0),m([w()],zs.prototype,"minZoom",void 0),m([w()],zs.prototype,"maxZoom",void 0),m([w()],zs.prototype,"minScale",void 0),m([w()],zs.prototype,"maxScale",void 0),m([w()],zs.prototype,"snapToZoom",void 0),zs=h7=m([H("esri.views.2d.constraints.ZoomConstraint")],zs);const Ure=zs,z$e={base:null,key:"type",typeMap:{extent:Ut,polygon:Os}};let fr=class extends Ve{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Oe}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){var t,i,r;return`${(t=this._zoom)==null?void 0:t.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(r=this._geometry)==null?void 0:r.uid}`}get _geometry(){var i,r;const t=this._get("_geometry");return t&&this.geometry===t.geometry&&((i=this.view)==null?void 0:i.constraintsInfo.spatialReference)===t.spatialReference?t:new Df({geometry:this.geometry,spatialReference:(r=this.view)==null?void 0:r.constraintsInfo.spatialReference})}get _rotation(){return new Vre({rotationEnabled:this.rotationEnabled})}get _zoom(){var v;const t=this._get("_zoom"),i=this.lods||((v=this.view)==null?void 0:v.constraintsInfo.lods),r=this.minZoom,n=this.maxZoom,o=this.minScale,c=this.maxScale,y=this.snapToZoom;return t&&t.lods===i&&t.minZoom===r&&t.maxZoom===n&&t.minScale===o&&t.maxScale===c&&t.snapToZoom===y?t:new Ure({lods:i,minZoom:r,maxZoom:n,minScale:o,maxScale:c,snapToZoom:y})}canZoomInTo(t){const i=this.effectiveMaxScale;return i===0||t>=i}canZoomOutTo(t){const i=this.effectiveMinScale;return i===0||t<=i}constrain(t,i){return this._zoom.constrain(t,i),this._rotation.constrain(t,i),this._geometry.constrain(t,i),this.customConstraints.forEach(r=>r.constrain(t,i)),t}constrainByGeometry(t){return this._geometry.constrain(t),this.customConstraints.forEach(i=>{var r;return(r=i.applyPanConstraint)==null?void 0:r.call(i,t)}),t}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};m([w({readOnly:!0})],fr.prototype,"effectiveLODs",null),m([w({readOnly:!0})],fr.prototype,"effectiveMinScale",null),m([w({readOnly:!0})],fr.prototype,"effectiveMaxScale",null),m([w({readOnly:!0})],fr.prototype,"effectiveMinZoom",null),m([w({readOnly:!0})],fr.prototype,"effectiveMaxZoom",null),m([w({types:z$e,value:null})],fr.prototype,"geometry",null),m([w({type:[hd]})],fr.prototype,"lods",void 0),m([w()],fr.prototype,"minScale",void 0),m([w()],fr.prototype,"maxScale",void 0),m([w()],fr.prototype,"minZoom",void 0),m([w()],fr.prototype,"maxZoom",void 0),m([w()],fr.prototype,"rotationEnabled",void 0),m([w()],fr.prototype,"snapToZoom",void 0),m([w({type:Oe})],fr.prototype,"customConstraints",void 0),m([w()],fr.prototype,"view",void 0),m([w({readOnly:!0})],fr.prototype,"version",null),m([w({type:Df,readOnly:!0})],fr.prototype,"_geometry",null),m([w({type:Vre})],fr.prototype,"_rotation",null),m([w({readOnly:!0,type:Ure})],fr.prototype,"_zoom",null),fr=m([H("esri.views.2d.MapViewConstraints")],fr);const Bre=fr;let sp=class af{static getId(t,i,r,n){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${i}/${r}/${n}`}constructor(t,i,r,n){this.set(t,i,r,n)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(t){this.set(t)}get hash(){const t=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|t<<8|r}acquire(t,i,r,n){this.set(t,i,r,n)}contains(t){const i=t.level-this.level;return i>=0&&this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}containsChild(t){const i=t.level-this.level;return i>0&&this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new af(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,i,r,n){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[o,c,y,v]=t.split("/");this.level=parseFloat(o),this.row=parseFloat(c),this.col=parseFloat(y),this.world=parseFloat(v)}else this.level=+t,this.row=+i,this.col=+r,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new af(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(t,i,r){const n=this.clone();return n.col+=t,n.row+=i,r.normalizeKey(n),n}getChildKeys(){const t=this.level+1,i=this.row<<1,r=this.col<<1,n=this.world;return[new af(t,i,r,n),new af(t,i,r+1,n),new af(t,i+1,r,n),new af(t,i+1,r+1,n)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}};sp.pool=new dp(sp,null,null,25,50);function hy(e,t){return[e,t]}function Ip(e,t,i){return e[0]=t,e[1]=i,e}function V$e(e,t,i,r,n){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e}const Na=new sp("0/0/0/0");let U$e=class Gre{static create(t,i,r=null){const n=Cs(t.spatialReference),o=i.origin||hy(t.origin.x,t.origin.y),c=hy(t.size[0]*i.resolution,t.size[1]*i.resolution),y=hy(-1/0,-1/0),v=hy(1/0,1/0),_=hy(1/0,1/0);r!=null&&(Ip(y,Math.max(0,Math.floor((r.xmin-o[0])/c[0])),Math.max(0,Math.floor((o[1]-r.ymax)/c[1]))),Ip(v,Math.max(0,Math.floor((r.xmax-o[0])/c[0])),Math.max(0,Math.floor((o[1]-r.ymin)/c[1]))),Ip(_,v[0]-y[0]+1,v[1]-y[1]+1));const{cols:I,rows:$}=i;let A,k,R,N;return!r&&I&&$&&(Ip(y,I[0],$[0]),Ip(v,I[1],$[1]),Ip(_,I[1]-I[0]+1,$[1]-$[0]+1)),t.isWrappable?(A=hy(Math.ceil(Math.round((n.valid[1]-n.valid[0])/i.resolution)/t.size[0]),_[1]),k=!0,R=n.origin,N=n.valid):(A=_,k=!1),new Gre(i.level,i.resolution,i.scale,o,y,v,_,c,A,k,R,N)}constructor(t,i,r,n,o,c,y,v,_,I,$,A){this.level=t,this.resolution=i,this.scale=r,this.origin=n,this.first=o,this.last=c,this.size=y,this.norm=v,this.worldSize=_,this.wrap=I,this._spatialReferenceOrigin=$,this._spatialReferenceValid=A}normalizeCol(t){if(!this.wrap)return t;const i=this.worldSize[0];return t<0?i-1-Math.abs((t+1)%i):t%i}normalizeKey(t){if(!this.wrap)return;const i=this.worldSize[0],r=t.col;r<0?(t.col=r+i,t.world-=1):r>=i&&(t.col=r-i,t.world+=1)}denormalizeCol(t,i){return this.wrap?this.worldSize[0]*i+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){const i=this.origin[0]+t*this.norm[0],r=this._spatialReferenceOrigin,n=this._spatialReferenceValid;return this.wrap&&r&&n?i===r[0]?n[0]:this.origin[0]===r[0]&&t===this.worldSize[0]?n[1]:i:i}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,i,r=!1){Na.set(i);const n=r?Na.col:this.denormalizeCol(Na.col,Na.world),o=Na.row;return V$e(t,this.getXForColumn(n),this.getYForRow(o+1),this.getXForColumn(n+1),this.getYForRow(o)),t}getTileCoords(t,i,r=!1){Na.set(i);const n=r?Na.col:this.denormalizeCol(Na.col,Na.world);return Array.isArray(t)?Ip(t,this.getXForColumn(n),this.getYForRow(Na.row)):(t.x=this.getXForColumn(n),t.y=this.getYForRow(Na.row)),t}},L2=class{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}*keys(){const t=this.lodInfo;for(const{row:i,colFrom:r,colTo:n}of this.spans)for(let o=r;o<=n;o++){const c=t.getWorldForColumn(o);yield new sp(t.level,i,t.normalizeCol(o),c)}}forEach(t,i){const{spans:r,lodInfo:n}=this,{level:o}=n;if(r.length!==0)for(const{row:c,colFrom:y,colTo:v}of r)for(let _=y;_<=v;_++)t.call(i,o,c,n.normalizeCol(_),n.getWorldForColumn(_))}};L2.pool=new dp(L2);let X$=class{constructor(t,i,r){this.row=t,this.colFrom=i,this.colTo=r}};const Ri=new sp("0/0/0/0");let B$e=class qre{static create(t,i){t[1]>i[1]&&([t,i]=[i,t]);const[r,n]=t,[o,c]=i,y=o-r,v=c-n,_=v!==0?y/v:0,I=(Math.ceil(n)-n)*_,$=(Math.floor(n)-n)*_;return new qre(r,Math.floor(n),Math.ceil(c),_,y<0?I:$,y<0?$:I,y<0?o:r,y<0?r:o)}constructor(t,i,r,n,o,c,y,v){this.x=t,this.ymin=i,this.ymax=r,this.invM=n,this.leftAdjust=o,this.rightAdjust=c,this.leftBound=y,this.rightBound=v}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const yo=[[0,0],[0,0],[0,0],[0,0]],G$e=1e-6;let q$e=class{constructor(t,i=null,r=t.lods[0].level,n=t.lods[t.lods.length-1].level){this.tileInfo=t,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const o=t.lods.filter(y=>y.level>=r&&y.level<=n);this.minScale=o[0].scale,this.maxScale=o[o.length-1].scale;const c=this._lodInfos=o.map(y=>U$e.create(t,y,i));o.forEach((y,v)=>{this._infoByLevel[y.level]=c[v],this._infoByScale[y.scale]=c[v],this.scales[v]=y.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,i,r=!1){Ri.set(i);const n=this._infoByLevel[Ri.level];return n?n.getTileBounds(t,Ri,r):t}getTileCoords(t,i,r=!1){Ri.set(i);const n=this._infoByLevel[Ri.level];return n?n.getTileCoords(t,Ri,r):t}getTileCoverage(t,i=192,r=!0,n="closest"){if(!r&&(t.scale>this.minScale||t.scale<this.maxScale))return null;const o=n==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),c=L2.pool.acquire(o),y=this._wrap;let v,_,I,$=1/0,A=-1/0;const k=c.spans;yo[0][0]=yo[0][1]=yo[1][1]=yo[3][0]=-i,yo[1][0]=yo[2][0]=t.size[0]+i,yo[2][1]=yo[3][1]=t.size[1]+i;for(const j of yo)t.toMap(j,j),j[0]=o.getColumnForX(j[0]),j[1]=o.getRowForY(j[1]);const R=[];let N=3;for(let j=0;j<4;j++){if(yo[j][1]===yo[N][1]){N=j;continue}const z=B$e.create(yo[j],yo[N]);$=Math.min(z.ymin,$),A=Math.max(z.ymax,A),R[z.ymin]===void 0&&(R[z.ymin]=[]),R[z.ymin].push(z),N=j}if($==null||A==null||A-$>100)return null;let D=[];for(v=$;v<A;){R[v]!=null&&(D=D.concat(R[v])),_=1/0,I=-1/0;for(let j=D.length-1;j>=0;j--){const z=D[j];_=Math.min(_,z.getLeftCol()),I=Math.max(I,z.getRightCol())}if(_=Math.floor(_),I=Math.floor(I),v>=o.first[1]&&v<=o.last[1])if(y)if(o.size[0]<o.worldSize[0]){const j=Math.floor(I/o.worldSize[0]);for(let z=Math.floor(_/o.worldSize[0]);z<=j;z++)k.push(new X$(v,Math.max(o.getFirstColumnForWorld(z),_),Math.min(o.getLastColumnForWorld(z),I)))}else k.push(new X$(v,_,I));else _>o.last[0]||I<o.first[0]||(_=Math.max(_,o.first[0]),I=Math.min(I,o.last[0]),k.push(new X$(v,_,I)));v+=1;for(let j=D.length-1;j>=0;j--){const z=D[j];z.ymax>=v?z.incrRow():D.splice(j,1)}}return c}getTileParentId(t){Ri.set(t);const i=this._infoByLevel[Ri.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(Ri,this._lodInfos[r],Ri),Ri.id)}getTileResolution(t){const i=this._infoByLevel[typeof t=="object"?t.level:t];return i?i.resolution:-1}getTileScale(t){const i=this._infoByLevel[t.level];return i?i.scale:-1}intersects(t,i){Ri.set(i);const r=this._infoByLevel[Ri.level],n=t.lodInfo;if(n.resolution>r.resolution){this._getTileIdAtLOD(Ri,n,Ri);const c=n.denormalizeCol(Ri.col,Ri.world);for(const y of t.spans)if(y.row===Ri.row&&y.colFrom<=c&&y.colTo>=c)return!0}if(n.resolution<r.resolution){const[c,y,v,_]=t.spans.reduce((N,D)=>(N[0]=Math.min(N[0],D.row),N[1]=Math.max(N[1],D.row),N[2]=Math.min(N[2],D.colFrom),N[3]=Math.max(N[3],D.colTo),N),[1/0,-1/0,1/0,-1/0]),I=r.denormalizeCol(Ri.col,Ri.world),$=n.getColumnForX(r.getXForColumn(I)),A=n.getRowForY(r.getYForRow(Ri.row)),k=n.getColumnForX(r.getXForColumn(I+1))-1,R=n.getRowForY(r.getYForRow(Ri.row+1))-1;return!($>_||k<v||A>y||R<c)}const o=n.denormalizeCol(Ri.col,Ri.world);return t.spans.some(c=>c.row===Ri.row&&c.colFrom<=o&&c.colTo>=o)}normalizeBounds(t,i,r){if(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],this._wrap){const n=Cs(this.tileInfo.spatialReference),o=-r*(n.valid[1]-n.valid[0]);t[0]+=o,t[2]+=o}return t}getSmallestInfoForScale(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(t>i[r]+G$e)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(t){const i=this.scales;return this._infoByScale[t]||(t=i.reduce((r,n)=>Math.abs(n-t)<Math.abs(r-t)?n:r,i[0])),this._infoByScale[t]}scaleToLevel(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let r=i.length-1;r>=0;r--)if(t<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-t)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}zoomToScale(t){return this.tileInfo.zoomToScale(t)}_getTileIdAtLOD(t,i,r){const n=this._infoByLevel[r.level];return t.set(r),i.resolution<n.resolution?null:(i.resolution===n.resolution||(t.level=i.level,t.col=Math.floor(r.col*n.resolution/i.resolution+.01),t.row=Math.floor(r.row*n.resolution/i.resolution+.01)),t)}},H$e=class{constructor(t,i){this.item=t,this.controller=i,this.promise=null}},W$e=class{constructor(t){this._schedule=null,this._task=null,this._deferreds=new Wd,this._controllers=new Wd,this._processingItems=new Wd,this._pausedSignal=x2(!1),this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new F9(t.peeker),this.process=t.process;const i=t.scheduler;t.priority&&i&&(this._task=i.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule=Bi(this._schedule),this._task=Bi(this._task)}get updating(){var t;return!!((t=this._task)!=null&&t.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(t){const i=this._controllers.get(t);i&&i.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(i=>t.push(i)),this._controllers.clear(),t.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((i,r)=>t(r))}get(t){const i=this._deferreds.get(t);return i?i.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(t,i){const r=this.get(t);if(r)return r;const n=new AbortController;let o=null;i&&(o=Sa(i,()=>n.abort()));const c=()=>{const I=this._processingItems.get(t);I&&I.controller.abort(),y(),_.reject(Ei())},y=()=>{v.remove(),o!=null&&o.remove(),this._removeItem(t),this._queue.remove(t),this._scheduleNext()},v=rO(n.signal,c),_=Vo();return this._deferreds.set(t,_),this._controllers.set(t,n),_.promise.then(y,y),this._queue.push(t),this._scheduleNext(),_.promise}last(){return this._queue.last()}lastPromise(){const t=this.last();return t?this.get(t):null}peek(){return this._queue.peek()}popLast(){var i;const t=this._queue.popLast();return t&&((i=this._deferreds.get(t))==null||i.reject(Ei()),this._removeItem(t)),t}reset(){const t=Array.from(this._processingItems.values());this._processingItems.clear();for(const i of t)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_removeItem(t){this._deferreds.delete(t),this._controllers.delete(t),this._processingItems.delete(t)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=f3(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(i))}_processError(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(i))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(t==null)return;let i;const r=new AbortController,n=new H$e(t,r);this._processingItems.set(t,n);try{i=this.process(t,r.signal)}catch(o){this._processError(n,o)}Fu(i)?(n.promise=i,i.then(o=>this._processResult(n,o),o=>this._processError(n,o))):this._processResult(n,i)}get test(){}};const pV=[0,0];let lc=class extends Ve{constructor(t){super(t),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:t,process:i,scheduler:r,priority:n}=this;this._queue=new W$e({concurrency:t,scheduler:r,priority:n,process:(o,c)=>{const y=this._keyToItem.get(o);return i(y,{signal:c})},peeker:o=>this._peek(o)})}destroy(){this.clear(),this._queue=ci(this._queue)}get length(){return this._queue?this._queue.length:0}abort(t){const i=typeof t=="string"?t:t.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}pause(){this._queue.pause()}push(t){const i=t.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),n=this.tileInfoView.getTileScale(t.key),o=s3(this._tilesByScale,n,()=>new Set),c=()=>{o.delete(t.key),o.size===0&&this._tilesByScale.delete(n),this._keyToItem.delete(i)};return o.add(t.key),this._keyToItem.set(i,t),r.then(c,c),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(t){if(!this.state)return t.values().next().value;const i=new Set;for(const c of t)i.add(this._keyToItem.get(c).key);const r=this.state.scale;let n,o=Number.POSITIVE_INFINITY;for(const[c,y]of this._tilesByScale)if(WK(y,v=>i.has(v))){const v=Math.abs(c-r);v<o&&(n=y,o=v)}return this._getClosestTileKey(n,t).id}_getClosestTileKey(t,i){const r=this.tileInfoView,n=this.state.center;let o,c=Number.POSITIVE_INFINITY;for(const y of t)if(i.has(y.id)){r.getTileCoords(pV,y);const v=YI(pV,n);v<c&&(c=v,o=y)}return o}};m([w({constructOnly:!0})],lc.prototype,"concurrency",void 0),m([w({constructOnly:!0})],lc.prototype,"priority",void 0),m([w({constructOnly:!0})],lc.prototype,"process",void 0),m([w({constructOnly:!0})],lc.prototype,"scheduler",void 0),m([w()],lc.prototype,"state",void 0),m([w({constructOnly:!0})],lc.prototype,"tileInfoView",void 0),lc=m([H("esri.views.2d.tiling.TileQueue")],lc);const cXe=lc;let J$e=class{constructor(t,i,r){this.maxSize=t,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const i=this._tilePerId.get(t);if(!i)return;const r=i.key.level,n=this._tileKeysPerLevel[r];fV(this._tilePerId,t);for(let o=0;o<n.length;o++)if(n[o].id===t){n.splice(o,1);break}return i.visible=!0,i}add(t){t.visible=!1;const i=t.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,t);const n=i.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(i)}prune(t,i,r){let n=this._tilePerId.size;if(n<=this.maxSize)return;let o=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&o>=0;)o!==t&&(n=this._pruneAroundCenterTile(n,i,r,o)),o--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,i,r,t))}_pruneAroundCenterTile(t,i,r,n){const o=this._tileKeysPerLevel[n];if(!o||o.length===0)return t;const{size:c,origin:y}=this._tileInfoView.tileInfo,v=r*c[0],_=r*c[1],I=[0,0],$=[0,0];for(o.sort((A,k)=>(I[0]=y.x+v*(A.col+.5),I[1]=y.y-_*(A.row+.5),$[0]=y.x+v*(k.col+.5),$[1]=y.y-_*(k.row+.5),r4(I,i)-r4($,i)));o.length>0;){const A=o.pop();if(this._removeTile(A.id),--t===this.maxSize)break}return t}_removeTile(t){const i=this._tilePerId.get(t);this._removedFunc&&i&&this._removedFunc(i),fV(this._tilePerId,t)}};function fV(e,t){e.delete(t)}const Tp=new sp(0,0,0,0),qu=new Map,Ev=[],Q$=[];let dXe=class{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,t.resampling!=null&&(this.resampling=t.resampling),t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new J$e(t.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(t){var j,z;const{resampling:i,tileIndex:r}=this,{scale:n,center:o,resolution:c}=t.state,{minScale:y,maxScale:v}=this.tileInfoView,_=!t.stationary&&n>this._previousScale;if(this._previousScale=n,!i&&(n>y||n<v))return this.tiles.length=0,void this.clear();const I=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.resampling,this.coveragePolicy);if(!I)return this.tiles.length=0,void this.clear();const{spans:$,lodInfo:A}=I,{level:k}=A;this.tiles.length=0,r.forEach(U=>U.visible=!0);let R=0,N=0;if($.length>0)for(const{row:U,colFrom:W,colTo:Q}of $)for(let K=W;K<=Q;K++){R++;const ee=Tp.set(k,U,A.normalizeCol(K),A.getWorldForColumn(K)).id;let ie=r.get(ee);if(ie)ie.isReady?(qu.set(ee,ie),N++):_||this._addParentTile(ee,qu);else{if((j=this._tileCache)!=null&&j.has(ee)){if(ie=this._tileCache.pop(ee),this.tileIndex.set(ee,ie),ie.isReady){qu.set(ee,ie),N++;continue}}else ie=this.acquireTile(Tp),this.tileIndex.set(ee,ie);_||this._addParentTile(ee,qu)}}const D=N===R;for(const[U,W]of r){if(qu.has(U))continue;Tp.set(U);const Q=this.tileInfoView.intersects(I,Tp),K=this.cachePolicy==="purge"?Tp.level!==k:Tp.level>k;!Q||!_&&D?!K&&Q||Ev.push(W):W.isReady?K&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Tp,k)?Ev.push(W):Q$.push(W):K&&Ev.push(W)}for(const U of Q$)U.isReady&&qu.set(U.key.id,U);for(const U of Ev)this._tileCache?this._tileCache.add(U):this.releaseTile(U),r.delete(U.key.id);for(const U of qu.values())this.tiles.push(U);for(const U of r.values())qu.has(U.key.id)||(U.visible=!1);(z=this._tileCache)==null||z.prune(k,o,c),L2.pool.release(I),Q$.length=0,Ev.length=0,qu.clear()}clear(){const{tileIndex:t}=this;for(const i of t.values())this.releaseTile(i);t.clear()}refresh(t){var i;for(const r of this.tileIndex.values())t(r);(i=this._tileCache)==null||i.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,i){var o;let r=t,n=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(n=this.tileIndex.get(r),n==null?void 0:n.isReady){i.has(n.key.id)||i.set(n.key.id,n);break}}else if((o=this._tileCache)!=null&&o.has(r)&&(n=this._tileCache.pop(r),this.tileIndex.set(r,n),n==null?void 0:n.isReady)){i.has(n.key.id)||i.set(n.key.id,n);break}}_hasReadyAncestor(t,i){const r=to();this.tileInfoView.getTileBounds(r,t,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=i&&n.key.level<t.level){const o=to();if(this.tileInfoView.getTileBounds(o,n.key,!0),kge(o,r))return!0}return!1}},ts=class extends Ve{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([ge(()=>{var i;return(i=this.constraints)==null?void 0:i.version},i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},$l)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new st({x:t[0],y:t[1],spatialReference:i})}set center(t){if(t==null)return;if(!this.ready)return void this._set("center",t);let i;try{i=this._project(t,this.state.spatialReference)}catch(n){return void _e.getLogger(this).error(new ne("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:n}))}const r=this.viewpoint;n7(r,r,i),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void _e.getLogger(this).error(new ne("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(t,this.state.spatialReference)}catch(n){return void _e.getLogger(this).error(new ne("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}const r=this.viewpoint;WIe(r,r,i,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const i=this.viewpoint;rTe(i,i,t),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const i=this.viewpoint;eV(i,i,t),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){var o;if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,r;try{i=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?r=new ne("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(r=new ne("mapview:invalid-viewpoint","geometry not defined"))}catch(c){r=new ne("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:c})}if(r)return void _e.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const n=new wn({targetGeometry:new st,scale:0,rotation:0});ds(n,i),(o=this.constraints)==null||o.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this._set("viewpoint",n)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){var t;return this.ready?((t=this.constraints)==null?void 0:t.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(t){var n,o;if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const c=this._get("extent");return void(c&&(this._set("extent",void 0),this._set("center",c.center)))}const i=((n=this.constraints)==null?void 0:n.zoomToScale(t))??0;if(!i)return void this._set("zoom",-1);const r=this.viewpoint;eV(r,r,i),this.viewpoint=r,this._set("zoom",((o=this.constraints)==null?void 0:o.scaleToZoom(this.scale))??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:r}=this,n=this._get("center"),o=this._get("extent"),c=this._get("scale"),y=this._get("rotation"),v=this._get("viewpoint"),_=this._get("zoom"),I=_!=null&&r!=null&&r.zoomToScale(_)||void 0;let $,A,k;const R=v==null?void 0:v.rotation,N=v==null?void 0:v.targetGeometry;(N==null?void 0:N.type)==="extent"?$=N:(N==null?void 0:N.type)==="point"&&(A=N,k=v==null?void 0:v.scale);const D=o??$;return{center:n??A??(D==null?void 0:D.center),rotation:y??R,scale:(c??I??k??(D&&iT(D,[t[0]-i.left-i.right,t[1]-i.top-i.bottom])))||void 0}}startup(t,i,r,n){var c;const o=t.targetGeometry;try{this._project(t,r)}catch(y){_e.getLogger(this).warn(new zo("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:o.toJSON(),spatialReference:r,error:y})),t.targetGeometry=n||new st({x:0,y:0,spatialReference:r})}(c=this.constraints)==null||c.fit(t),this._set("state",new zR({padding:this.padding,size:i,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,i],spatialReference:r,rotation:n,scale:o}=this.state.paddedViewState,c=new st({x:t,y:i,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",c),this._set("zoom",-1),this._set("rotation",n),this._set("scale",o),this._set("state",null)}changeSpatialReference(t){var v;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const _=i.viewpoint.clone();_.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=_}const r=i.clone(),[n,o]=i.center;let c=null;try{c=this._project(new st({x:n,y:o,spatialReference:i.spatialReference}),t)}catch(_){gO()||_e.getLogger(this).warn(new zo("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:c==null?void 0:c.toJSON(),spatialReference:t,error:_}))}c||(c=new st({x:0,y:0,spatialReference:t}));const y=n7(new wn({targetGeometry:new st,scale:0,rotation:0}),i.viewpoint,c);r.viewpoint=y;try{const I=[i.size[0]/2,i.size[1]/2],$=[I[0]+20,I[1]],A=i.toMap([0,0],$),{x:k,y:R}=this._project(new st({x:A[0],y:A[1],spatialReference:i.spatialReference}),t);A[0]=k,A[1]=R,r.toScreen(A,A);const N=eTe(I,A,$),D=Math.hypot(A[0]-I[0],A[1]-I[1])/20;!Number.isFinite(D)||Math.abs(D)>4?(y.rotation=0,y.targetGeometry=new st({x:0,y:0,spatialReference:t})):(y.scale*=D,y.scale>we("mapview-srswitch-adjust-rotation-scale-threshold")?y.rotation=0:y.rotation+=Number.isFinite(N)?N:0)}catch{}(v=this._get("constraints"))==null||v.constrain(y,void 0),this._get("state").viewpoint=y}resize(t,i){var c;if(!this.ready)return;const r=this.state;let n=this.state.paddedViewState.viewpoint;const o=this.state.paddedViewState.size.slice();r.size=[t,i],iTe(n,n,o,this.state.paddedViewState.size,this.resizeAlign),n=((c=this.constraints)==null?void 0:c.constrain(n,void 0))??n,this.state.viewpoint=n}toMap(t){if(!this.ready)return null;const i=[0,0],[r,n]=this.state.toMap(i,[t.x,t.y]),o=this.state.spatialReference;return new st({x:r,y:n,spatialReference:o})}toScreen(t,i){if(!this.ready)return null;const r=this._project(t,this.state.spatialReference),n=[r.x,r.y];return(i==null?void 0:i.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(n,n),this.state.toScreen(n,n),gn(n[0],n[1])}_project(t,i){var o;const r=(t==null?void 0:t.targetGeometry)||t;if(!i)return t;if(!r)return null;if(i.imageCoordinateSystem||(o=r.spatialReference)!=null&&o.imageCoordinateSystem||_r(i,r.spatialReference))return t;const n=sh(r,i);if(!n)throw new ne("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:i});return Z$e(t)?(t.targetGeometry=n,t):n}};function Z$e(e){return(e==null?void 0:e.declaredClass)==="esri.Viewpoint"}m([w({type:st})],ts.prototype,"center",null),m([w()],ts.prototype,"constraints",void 0),m([w({type:Ut})],ts.prototype,"extent",null),m([w({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],ts.prototype,"padding",null),m([w()],ts.prototype,"ready",void 0),m([w()],ts.prototype,"resizeAlign",void 0),m([w({readOnly:!0})],ts.prototype,"resolution",null),m([w({type:Number})],ts.prototype,"rotation",null),m([w({type:Number})],ts.prototype,"scale",null),m([w({readOnly:!0})],ts.prototype,"state",void 0),m([w({type:wn})],ts.prototype,"viewpoint",null),m([w({readOnly:!0})],ts.prototype,"visibleArea",null),m([w()],ts.prototype,"zoom",null),ts=m([H("esri.views.2d.ViewStateManager")],ts);function VR(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}let yV=class extends sn{constructor(t,i){super(!0),this._view=t,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(t,i){VR(t.data,"primary")&&(t.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},K$e=class extends sn{constructor(t,i,r){super(!0),this.view=t,this.pointerType=i,this.registerIncoming("double-tap-drag",r,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(t){const{data:i}=t,{pointerType:r}=i;if(r!==this.pointerType)return;t.stopPropagation();const{action:n,delta:o}=i,{view:c}=this,{mapViewNavigation:y}=c;switch(n){case"begin":{const{scale:v}=c;this._startScale=v,this._currentScale=v,this._previousDelta=o,y.begin();break}case"update":{if(this._previousDelta.y===o.y)return;this._previousDelta=o;const v=1.015**o.y,_=this._startScale*v,I=_/this._currentScale;y.setViewpointImmediate(I),this._currentScale=_;break}case"end":{const{constraints:v}=c,{effectiveLODs:_,snapToZoom:I}=v;if(!I||!_)return void y.end();const $=v.snapScale(this._currentScale),A=(o.y>0?Math.max($,v.snapToPreviousScale(this._startScale)):Math.min($,v.snapToNextScale(this._startScale)))/this._currentScale;y.zoom(A).then(()=>{y.end()});break}}}},nT=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const i=t.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){var i,r;this._startEvent=t,(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}},Y$e=class extends sn{constructor(t,i,r){super(!0),this.view=t,this.pointerAction=i,this.registerIncoming("drag",r,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new nT({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&VR(r.data,this.pointerAction)})}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},X$e=class extends sn{constructor(t,i,r){super(!0),this._view=t,this.pointerAction=i;const n=this._view.mapViewNavigation;this._dragEventSeparator=new nT({start:(o,c)=>{n.rotate.begin(this._view,c.data),c.stopPropagation()},update:(o,c)=>{n.rotate.update(this._view,c.data),c.stopPropagation()},end:(o,c)=>{n.rotate.end(),c.stopPropagation()},condition:(o,c)=>o===1&&VR(c.data,this.pointerAction)}),this.registerIncoming("drag",r,o=>this._dragEventSeparator.handle(o))}};function Hre(e){const t=e[0],i=e[1],r=e[2];return Math.sqrt(t*t+i*i+r*r)}function Q$e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function eEe(e,t,i,r){return e[0]=t,e[1]=i,e[2]=r,e}function tEe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function Wre(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function Jre(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function Zre(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function iEe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function rEe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function nEe(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function sEe(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function oEe(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function aEe(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function lEe(e,t=0,i=1){return e[0]=Math.min(Math.max(e[0],t),i),e[1]=Math.min(Math.max(e[1],t),i),e[2]=Math.min(Math.max(e[2],t),i),e}function uEe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function Kre(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function cEe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e}function Yre(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(i*i+r*r+n*n)}function Xre(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2];return i*i+r*r+n*n}function Qre(e){const t=e[0],i=e[1],r=e[2];return t*t+i*i+r*r}function hEe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function dEe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function d7(e,t){const i=t[0],r=t[1],n=t[2];let o=i*i+r*r+n*n;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}function ene(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function pEe(e,t,i){const r=t[0],n=t[1],o=t[2],c=i[0],y=i[1],v=i[2];return e[0]=n*v-o*y,e[1]=o*c-r*v,e[2]=r*y-n*c,e}function fEe(e,t,i){const r=t[0],n=t[1],o=t[2],c=i[0],y=i[1],v=i[2],_=n*v-o*y,I=o*c-r*v,$=r*y-n*c,A=Math.sqrt(_*_+I*I+$*$);return e[0]=_/A,e[1]=I/A,e[2]=$/A,e}function yEe(e,t,i,r){const n=t[0],o=t[1],c=t[2];return e[0]=n+r*(i[0]-n),e[1]=o+r*(i[1]-o),e[2]=c+r*(i[2]-c),e}function mEe(e,t,i,r,n,o){const c=o*o,y=c*(2*o-3)+1,v=c*(o-2)+o,_=c*(o-1),I=c*(3-2*o);return e[0]=t[0]*y+i[0]*v+r[0]*_+n[0]*I,e[1]=t[1]*y+i[1]*v+r[1]*_+n[1]*I,e[2]=t[2]*y+i[2]*v+r[2]*_+n[2]*I,e}function gEe(e,t,i,r,n,o){const c=1-o,y=c*c,v=o*o,_=y*c,I=3*o*y,$=3*v*c,A=v*o;return e[0]=t[0]*_+i[0]*I+r[0]*$+n[0]*A,e[1]=t[1]*_+i[1]*I+r[1]*$+n[1]*A,e[2]=t[2]*_+i[2]*I+r[2]*$+n[2]*A,e}function vEe(e,t=1){const i=NI,r=2*i()*Math.PI,n=2*i()-1,o=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(r)*o,e[1]=Math.sin(r)*o,e[2]=n*t,e}function wEe(e,t,i){const r=t[0],n=t[1],o=t[2];return e[0]=i[0]*r+i[4]*n+i[8]*o+i[12],e[1]=i[1]*r+i[5]*n+i[9]*o+i[13],e[2]=i[2]*r+i[6]*n+i[10]*o+i[14],e}function bEe(e,t,i){const r=t[0],n=t[1],o=t[2];return e[0]=r*i[0]+n*i[3]+o*i[6],e[1]=r*i[1]+n*i[4]+o*i[7],e[2]=r*i[2]+n*i[5]+o*i[8],e}function _Ee(e,t,i){const r=i[0],n=i[1],o=i[2],c=i[3],y=t[0],v=t[1],_=t[2],I=n*_-o*v,$=o*y-r*_,A=r*v-n*y,k=n*A-o*$,R=o*I-r*A,N=r*$-n*I,D=2*c;return e[0]=y+I*D+2*k,e[1]=v+$*D+2*R,e[2]=_+A*D+2*N,e}function SEe(e,t,i,r){const n=[],o=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],o[0]=n[0],o[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),o[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),e[0]=o[0]+i[0],e[1]=o[1]+i[1],e[2]=o[2]+i[2],e}function xEe(e,t,i,r){const n=[],o=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],o[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),o[1]=n[1],o[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),e[0]=o[0]+i[0],e[1]=o[1]+i[1],e[2]=o[2]+i[2],e}function IEe(e,t,i,r){const n=[],o=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],o[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),o[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),o[2]=n[2],e[0]=o[0]+i[0],e[1]=o[1]+i[1],e[2]=o[2]+i[2],e}function TEe(e,t){d7(mV,e),d7(gV,t);const i=ene(mV,gV);return i>1?0:i<-1?Math.PI:Math.acos(i)}const mV=pp(),gV=pp();function $Ee(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function EEe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function MEe(e,t){if(e===t)return!0;const i=e[0],r=e[1],n=e[2],o=t[0],c=t[1],y=t[2],v=ks();return Math.abs(i-o)<=v*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-c)<=v*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-y)<=v*Math.max(1,Math.abs(n),Math.abs(y))}function AEe(e,t,i){const r=i[0]-t[0],n=i[1]-t[1],o=i[2]-t[2];let c=r*r+n*n+o*o;return c>0?(c=1/Math.sqrt(c),e[0]=r*c,e[1]=n*c,e[2]=o*c,e):(e[0]=0,e[1]=0,e[2]=0,e)}const CEe=Wre,kEe=Jre,LEe=Zre,OEe=Yre,REe=Xre,PEe=Hre,NEe=Qre;Object.freeze(Object.defineProperty({__proto__:null,abs:nEe,add:tEe,angle:TEe,bezier:gEe,ceil:iEe,clamp:lEe,copy:Q$e,cross:pEe,crossAndNormalize:fEe,direction:AEe,dist:OEe,distance:Yre,div:LEe,divide:Zre,dot:ene,equals:MEe,exactEquals:EEe,floor:rEe,hermite:mEe,inverse:dEe,len:PEe,length:Hre,lerp:yEe,max:aEe,min:oEe,mul:kEe,multiply:Jre,negate:hEe,normalize:d7,random:vEe,rotateX:SEe,rotateY:xEe,rotateZ:IEe,round:uEe,scale:Kre,scaleAndAdd:cEe,set:eEe,sign:sEe,sqrDist:REe,sqrLen:NEe,squaredDistance:Xre,squaredLength:Qre,str:$Ee,sub:CEe,subtract:Wre,transformMat3:bEe,transformMat4:wEe,transformQuat:_Ee},Symbol.toStringTag,{value:"Module"}));function Fa(e){let t=e*e;return e<0&&(t*=-1),t}function FEe(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function DEe(e,t,i){const r=i,n=e.state,o=e.device,c=t.tiltDirection==="forward-down"?1:-1,y=1;return o.deviceType==="standard"?(r.translation[0]=Fa(n.axes[0]),r.translation[1]=Fa(n.axes[1]),r.translation[2]=Fa(n.buttons[7])-Fa(n.buttons[6]),r.heading=Fa(n.axes[2]),r.tilt=Fa(n.axes[3])):o.deviceType==="spacemouse"&&(r.translation[0]=1.2*Fa(n.axes[0]),r.translation[1]=1.2*Fa(n.axes[1]),r.translation[2]=2*-Fa(n.axes[2]),r.heading=1.2*Fa(n.axes[5]),r.tilt=1.2*Fa(n.axes[3])),r.tilt*=c,Kre(r.translation,r.translation,y),r}function jEe(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}let zEe=class extends sn{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new kg,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([ge(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=tg({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},qe)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const i=this._view.navigation.gamepad.device;i&&t.data.device!==i||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,FEe(this._transformation)):(this._currentDevice=t.data.device,DEe(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){const i=this._transformation;if(jEe(i))return;const r=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,o=UEe*n*t;rT(r,r,[i.translation[0]*o,-i.translation[1]*o]);const c=1+i.translation[2]*BEe*t,y=this._view.constraints.rotationEnabled?-i.heading*VEe*t:0,v=this._view.size,_=[v[0]/2,v[1]];xre(r,r,c,y,_,v);const I=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=I}};const VEe=.06,UEe=.7,BEe=6e-4;function tne(e){const t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),ei(()=>document.removeEventListener("visibilitychange",t))}let GEe=class extends sn{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=n=>{const o=this._keyMap[n.data.key];if(n.modifiers.has("Meta")||n.modifiers.has("Control"))return void this._stopMovement();if(o==null)return;n.stopPropagation(),n.preventDefault();const c=n.type==="key-down";if(this._pressedKeys[c?"add":"delete"](o),c){if(this._direction===o)return;this._direction=o,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const y=this._timeout===void 0,v=this._pressedKeys.size>0;y||v?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=tne(n=>n?null:this._stopMovement())}onUninstall(){var t;this._stopMovement(),(t=this._visibilityHandle)==null||t.remove()}get _direction(){return this._currentDirection}set _direction(t){const i=this._currentDirection!=null;if(t!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}},qEe=class extends sn{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",r,n=>this._handleKeyUp(n)),this.registerIncoming("blur",r,()=>this._handleStop()),this._visibilityHandle=tne(n=>n?null:this._handleStop())}onUninstall(){var t;(t=this._visibilityHandle)==null||t.remove(),this._handleStop()}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=t.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection[t.data.key];if(this._pressed=n!=null,this._pressed){if(t.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var c1;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(c1||(c1={}));let HEe=class extends sn{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),i.zoomIn.forEach(n=>this._keysToZoomAction[n]=c1.IN),i.zoomOut.forEach(n=>this._keysToZoomAction[n]=c1.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const i=t.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=t.data;if(!(r in this._keysToZoomAction))return;const n=this._keysToZoomAction[r],{mapViewNavigation:o}=this.view;let c=null;switch(n){case c1.IN:c=o.zoomIn();break;case c1.OUT:c=o.zoomOut();break;default:return}o.begin(),c.then(()=>o.end()),t.stopPropagation()}};const WEe=.6;let JEe=class extends sn{constructor(t,i){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:n,deltaY:o}=t.data,c=1/WEe**(1/60*o),y=i.zoom(c,[r,n]);y&&(this._canZoom=!1,y.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},ZEe=class extends sn{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new nT({start:(r,n)=>{i.pinch.begin(this.view,n.data),n.stopPropagation()},update:(r,n)=>{i.pinch.update(this.view,n.data),n.stopPropagation()},end:(r,n)=>{i.pinch.end(this.view),n.stopPropagation()},condition:r=>r>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function vV(e){const t=e.native;return t?{buttons:t.buttons.map(i=>i.pressed?i.value||1:0),axes:t.axes.map(i=>XEe(i,e.axisThreshold))}:{buttons:[],axes:[]}}function KEe(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}function YEe(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function XEe(e,t){const i=Math.abs(e);return i<t?0:Math.sign(e)*(i-t)/(1-t)}let QEe=class{constructor(t,i){this._element=t,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=o=>{this._connectGamepad(o.gamepad)},this._onDisconnectGamepad=o=>{const c=o.gamepad,y=c.index,v=this._inputDevices[y];v&&(this._emitGamepadEvent(c,vV(v),!1),this._inputDevices.splice(y,1),this._latestUpdate.splice(y,1),this._input.gamepad.devices.remove(v),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=r&&n,this.supported&&(wV(o=>this._connectGamepad(o)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const i=new MR(t);i.deviceType!=="unknown"&&(this._inputDevices[t.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=tg({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!i;wV(n=>{const o=this._inputDevices[n.index];if(!o)return;const c=this._latestUpdate[n.index],y=vV(o),v=r||YEe(y);c&&(c.timestamp===n.timestamp||!c.active&&v||KEe(c.state,y))||this._emitGamepadEvent(n,y,!v)})}_emitGamepadEvent(t,i,r){const n=this._latestUpdate[t.index],o=n&&n.active;if(!o&&!r)return;const c=!o&&r?"start":o&&r?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[t.index],state:i,action:c})}};function e6e(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function wV(e){for(const t of navigator.getGamepads())e6e(t)&&e(t)}const bV=we("edge"),t6e=we("chrome"),i6e=we("ff"),r6e=we("safari"),_V="esri-view-surface",dy={touchNone:`${_V}--touch-none`,touchPan:`${_V}--touch-pan`};let ine=class rne{constructor(t,i){this._input=i,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new QEe(t,this._input),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource=ci(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const i in this._active)if(!t||!t.has(i)){const r=this._active[i];this._element.removeEventListener(eE[i],r),delete this._active[i]}t&&t.forEach(i=>{if(!this._active[i]&&eE[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(eE[i],r),this._active[i]=r}}),this._gamepadSource.hasEventListeners=(t==null?void 0:t.has("gamepad"))??!1}setPointerCapture(t,i){i?this._setPointerCatpureSafe(t.pointerId):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?dy.touchNone:dy.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?dy.touchPan:dy.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(dy.touchNone),this._element.classList.remove(dy.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(t){try{this._element.setPointerCapture(t),this._activePointerCaptures.add(t)}catch{}}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,i){const r=jie(this._element,t);return rne.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(t,i){const{key:r}=i;r&&t==="key-up"&&this._keyDownState.delete(r);const n={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&t==="key-down"&&this._keyDownState.add(n.key),this._callback(t,n)}_handlePointer(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(t,r)}_handlePointerPreventDefault(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(t,r)}_getDeltaFromTrackpadOrMouseWheel(t){return t.shiftKey&&we("mac")&&t.deltaY===0?t.deltaX:t.deltaY}_handleMouseWheel(t,i){let r=this._getDeltaFromTrackpadOrMouseWheel(i);switch(i.deltaMode){case 0:bV&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}bV?r*=.7:t6e||r6e?r*=.6:i6e&&(r*=1.375);const n=100,o=Math.abs(r);o>n&&(r=r/o*200/(1+Math.exp(-.02*(o-n))));const c=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(t,c)}_handlePointerCaptureLost(t,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(t,i)}_handleDefault(t,i){const r={native:i};i.preventDefault(),this._callback(t,r)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}};ine.test={disableSubpixelCoordinates:!1};const eE={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let n6e=class extends sn{constructor(){super(!0),this.registerIncoming("context-menu",t=>t.data.native.preventDefault())}};const Nn={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function a4(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function s6e(e,t){const i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)}function o6e(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:gn()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[U,W]=e,[Q,K]=[W.x-U.x,W.y-U.y];return t.radius=Math.sqrt(Q*Q+K*K)/2,t.center.x=(U.x+W.x)/2,t.center.y=(U.y+W.y)/2,t}let i=0,r=0;for(let U=0;U<e.length;U++)i+=e[U].x,r+=e[U].y;i/=e.length,r/=e.length;const n=e.map(U=>U.x-i),o=e.map(U=>U.y-r);let c=0,y=0,v=0,_=0,I=0,$=0,A=0;for(let U=0;U<n.length;U++){const W=n[U],Q=o[U],K=W*W,ee=Q*Q;c+=K,y+=ee,v+=W*Q,_+=K*W,I+=ee*Q,$+=W*ee,A+=Q*K}const k=.5*(_+$),R=.5*(I+A),N=c*y-v*v,D=(k*y-R*v)/N,j=(c*R-v*k)/N,z=gn(D+i,j+r);return{radius:Math.sqrt(D*D+j*j+(c+y)/e.length),center:z}}function u0(e){const{native:t}=e,{pointerId:i,button:r,pointerType:n}=t;return n==="mouse"?`${i}:${r}`:`${n}`}let a6e=class extends sn{constructor(t=Nn.maximumDoubleClickDelay,i=Nn.maximumDoubleClickDistance,r=Nn.maximumDoubleTouchDelay,n=Nn.maximumDoubleTouchDistance,o=Lg){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=o,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=gn(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new nT({start:(c,y)=>this._dragStart(c,y),update:(c,y)=>this._dragUpdate(y),end:(c,y)=>this._dragEnd(y)}),this.registerIncoming("drag",c=>this._dragEventSeparator.handle(c)),this.registerIncoming("pointer-down",c=>this._handlePointerDown(c)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=Bi(t.doubleTapTimeout)})}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(t){const i=this._pointerState.get(t);i&&(i.doubleTapTimeout=Bi(i.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,i){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:n}=i,{center:o}=r;this._dragStartCenter=o;const c=tE("begin",gn(0,0),r);this._doubleTapDrag.emit(c,void 0,n),i.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:n}=i,o=tE("update",gn(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(o,void 0,r),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:n}=i,o=tE("end",gn(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(o,void 0,r),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:i}=t,r=u0(i),n=this._pointerState.get(r),{pointerType:o}=i.native;if(n){const c=o==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(r),a4(n.event.data,i)>c?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:i}=t,{pointerType:r}=i.native,n=u0(i),o=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,c=this._clock.setTimeout(()=>this._clearPointerDown(n),o);this._pointerState.set(n,{event:t,doubleTapTimeout:c}),this.refreshHasPendingInputs()}};function tE(e,t,i){const{button:r,buttons:n,pointer:o,pointers:c,pointerType:y,timestamp:v}=i;return{action:e,delta:t,button:r,buttons:n,pointer:o,pointers:c,pointerType:y,timestamp:v}}let l6e=class extends sn{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,i,r,n){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:n,pointers:u6e(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(t){const i=t.native.pointerId,r=B_(this._activePointerMap).angle,n={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,n);const o=V5(n,nne(this._activePointerMap));n.initialAngle=o,n.lastAngle=o,this._updatePointerAngles(r)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const i=t.native.pointerId,r=this._activePointerMap.get(i);r?r.event=t:this._addPointer(t)}_removePointer(t){const i=B_(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(i)}_updatePointerAngles(t){const i=B_(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=V5(r,i)-t,r.lastAngle=V5(r,i)-t})}_emitEvent(t,i,r){const n=B_(this._activePointerMap);this._drag.emit(this._createPayload(t,i,n,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,r=t.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const i=t.data,r=i.currentEvent,n=t.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,n)):(this._addPointer(r),this._emitEvent("added",r,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function nne(e){const t=[];return e.forEach(i=>{t.push(gn(i.event.x,i.event.y))}),o6e(t)}function B_(e){const t=nne(e);let i=0;return e.forEach(r=>{let n=V5(r,t),o=n-r.lastAngle;for(;o>Math.PI;)o-=2*Math.PI;for(;o<-Math.PI;)o+=2*Math.PI;n=r.lastAngle+o,r.lastAngle=n;const c=n-r.initialAngle;i+=c}),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function u6e(e){const t=new Map;return e.forEach((i,r)=>t.set(r,i.event)),t}function V5(e,t){const i=e.event,r=i.x-t.center.x,n=i.y-t.center.y;return Math.atan2(n,r)}var SV;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(SV||(SV={}));let c6e=class extends sn{constructor(t=Nn.maximumDoubleClickDelay,i=Nn.maximumDoubleClickDistance,r=Nn.maximumDoubleTouchDelay,n=Nn.maximumDoubleTouchDistance,o=Lg){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=o,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=u0(i);if(!this._pointerState.has(r)){const n={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(r,n),this.startCapturingPointer(i.native)}}_handlePointerUp(t){const i=t.data,r=u0(i),n=this._pointerState.get(r);if(n&&n.downButton===i.native.button){const o=n.immediateDoubleClick,c=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;o?(o.timeoutHandle.remove(),a4(o,t.data)>c?this._startImmediateDoubleClick(t,n):(this._immediateDoubleClick.emit(t.data,void 0,o.modifiers),this._removeState(i))):a4(n,t.data)>c?this._removeState(i):this._startImmediateDoubleClick(t,n)}}_startImmediateDoubleClick(t,i){const r=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),r)}}_removeState(t){const i=u0(t);this._pointerState.delete(i),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}},h6e=class extends sn{constructor(t=Nn.maximumClickDelay,i=Nn.movementUntilMouseDrag,r=Nn.movementUntilPenDrag,n=Nn.movementUntilTouchDrag,o=Nn.holdDelay,c=Lg){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=r,this._movementUntilTouchDrag=n,this._holdDelay=o,this._clock=c,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",y=>this._handlePointerDown(y)),this.registerIncoming("pointer-up",y=>this._handlePointerLoss(y,"pointer-up")),this.registerIncoming("pointer-capture-lost",y=>this._handlePointerLoss(y,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",y=>this._handlePointerLoss(y,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",y=>this._handlePointerMove(y)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=Bi(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=i.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const c=this._pointerState.get(r);if(c){if(!c.isDragging){const y=c.previousEvent;this._pointerHold.emit(y,void 0,t.modifiers),c.holdEmitted=!0}c.holdTimeout=null}},this._holdDelay));const o={startEvent:i,previousEvent:i,startTimestamp:t.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(r,o),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){const i=t.data,r=i.native.pointerId,n=this._pointerState.get(r);n&&(n.isDragging?this._pointerDrag.emit(G_("update",n,i),void 0,n.modifiers):s6e(i,n.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(t),n.previousEvent=i)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const i=t.data,r=i.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=t.modifiers,n.isDragging=!0,r===n.startEvent.native.pointerId?this._pointerDrag.emit(G_("start",n,i)):this._pointerDrag.emit(G_("start",n,n.previousEvent),t.timestamp))})}_handlePointerLoss(t,i){const r=t.data,n=r.native.pointerId,o=this._pointerState.get(n);o&&(o.holdTimeout!=null&&(o.holdTimeout.remove(),o.holdTimeout=null),o.isDragging?this._pointerDrag.emit(G_("end",o,i==="pointer-up"?r:o.previousEvent),void 0,o.modifiers):i==="pointer-up"&&o.downButton===r.native.button&&t.timestamp-o.startTimestamp<=this._maximumClickDelay&&!o.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(n),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function G_(e,t,i){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:i}}let d6e=class extends sn{constructor(t=Nn.maximumDoubleClickDelay,i=Nn.maximumDoubleClickDistance,r=Nn.maximumDoubleTouchDelay,n=Nn.maximumDoubleTouchDistance,o=Lg){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=o,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",c=>this._handleImmediateClick(c)),this.registerIncoming("pointer-down",c=>this._handlePointerDown(c))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=Bi(t.doubleClickTimer))}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(t,i){const r=this._pointerState.get(t);r&&(r.doubleClickTimer=Bi(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const i=this._pointerState.get(t);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_handleImmediateClick(t){const i=t.data,{pointerType:r}=i.native,n=p6e(i);if(!this._pointerState.has(n))return void this._startClick(t);const o=this._pointerState.get(n),{data:c,modifiers:y}=o.event,v=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;a4(c,i)>v?(this._clearDoubleClickTimer(n,!0),this._startClick(t)):(this._clearDoubleClickTimer(n,!1),o.pointerDownCount===2&&this._doubleClick.emit(c,void 0,y))}_handlePointerDown(t){const i=u0(t.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(t){const{data:i}=t,{native:{pointerType:r}}=i,n=u0(i),o=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,c=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),o);this._pointerState.set(n,{event:t,doubleClickTimer:c,pointerDownCount:1}),this.refreshHasPendingInputs()}};function p6e(e){const{pointerId:t,pointerType:i,button:r}=e.native;return i==="mouse"?`${t}:${r}`:`${i}`}const q_={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let lf=class extends Ve{initialize(){const t=()=>{var i;return(i=this.view)==null?void 0:i.ready};this.addHandles([en(()=>!t(),()=>this._disconnect()),en(t,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerType}get latestPointerLocation(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerLocation}get multiTouchActive(){var t;return((t=this._inputManager)==null?void 0:t.multiTouchActive)??!1}isModifierKeyDown(t){var i;return((i=this._inputManager)==null?void 0:i.isModifierKeyDown(t))??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=ci(this._inputManager)}_connect(){const t=this.view.surface,i=new ine(t,this.view.input),r=[new c6e,new h6e,new d6e,new l6e(this.view.navigation),new a6e],n=new Yo({eventSource:i,recognizers:r});n.installHandlers("prevent-context-menu",[new n6e],Hd.INTERNAL),n.installHandlers("navigation",[new ZEe(this.view),new zEe(this.view),new JEe(this.view),new yV(this.view),new yV(this.view,[q_.counter]),new Y$e(this.view,"primary"),new GEe(this.view,q_.pan),new HEe(this.view,q_.zoom),new qEe(this.view,q_.rotate),new X$e(this.view,"secondary"),new K$e(this.view,"touch")],Hd.INTERNAL),this.view.viewEvents.connect(n),this._source=i,this._inputManager=n,ge(()=>{var o,c;return(c=(o=this.view)==null?void 0:o.navigation)==null?void 0:c.browserTouchPanEnabled},o=>{this._source&&(this._source.browserTouchPanningEnabled=!o)},qe)}get test(){}};m([w()],lf.prototype,"view",void 0),m([w()],lf.prototype,"latestPointerType",null),m([w()],lf.prototype,"latestPointerLocation",null),m([w()],lf.prototype,"multiTouchActive",null),lf=m([H("esri.views.2d.input.MapViewInputManager")],lf);const f6e=lf;function y6e(e,t,i,r,n){sne(e,t,i||0,r||e.length-1,n||m6e)}function sne(e,t,i,r,n){for(;r>i;){if(r-i>600){var o=r-i+1,c=t-i+1,y=Math.log(o),v=.5*Math.exp(2*y/3),_=.5*Math.sqrt(y*v*(o-v)/o)*(c-o/2<0?-1:1);sne(e,t,Math.max(i,Math.floor(t-c*v/o+_)),Math.min(r,Math.floor(t+(o-c)*v/o+_)),n)}var I=e[t],$=i,A=r;for(Mv(e,i,t),n(e[r],I)>0&&Mv(e,i,r);$<A;){for(Mv(e,$,A),$++,A--;n(e[$],I)<0;)$++;for(;n(e[A],I)>0;)A--}n(e[i],I)===0?Mv(e,i,A):Mv(e,++A,r),A<=t&&(i=A+1),t<=A&&(r=A-1)}}function Mv(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function m6e(e,t){return e<t?-1:e>t?1:0}function l4(e,t){if(!(this instanceof l4))return new l4(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function g6e(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return-1}function py(e,t){Lw(e,0,e.children.length,t,e)}function Lw(e,t,i,r,n){n||(n=em(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var o,c=t;c<i;c++)o=e.children[c],Ow(n,e.leaf?r(o):o);return n}function Ow(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function xV(e,t){return e.minX-t.minX}function IV(e,t){return e.minY-t.minY}function iE(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function H_(e){return e.maxX-e.minX+(e.maxY-e.minY)}function v6e(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function w6e(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),n=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,n-i)*Math.max(0,o-r)}function rE(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function W_(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function em(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function TV(e,t,i,r,n){for(var o,c=[t,i];c.length;)(i=c.pop())-(t=c.pop())<=r||(o=t+Math.ceil((i-t)/r/2)*r,y6e(e,o,t,i,n),c.push(t,o,o,i))}l4.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!W_(e,t))return i;for(var n,o,c,y,v=[];t;){for(n=0,o=t.children.length;n<o;n++)c=t.children[n],W_(e,y=t.leaf?r(c):c)&&(t.leaf?i.push(c):rE(e,y)?this._all(c,i):v.push(c));t=v.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!W_(e,t))return!1;for(var r,n,o,c,y=[];t;){for(r=0,n=t.children.length;r<n;r++)if(o=t.children[r],W_(e,c=t.leaf?i(o):o)){if(t.leaf||rE(e,c))return!0;y.push(o)}t=y.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e!=null&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=em([]),this},remove:function(e,t){if(e==null)return this;for(var i,r,n,o,c=this.data,y=this.toBBox(e),v=[],_=[];c||v.length;){if(c||(c=v.pop(),r=v[v.length-1],i=_.pop(),o=!0),c.leaf&&(n=g6e(e,c.children,t))!==-1)return c.children.splice(n,1),v.push(c),this._condense(v),this;o||c.leaf||!rE(c,y)?r?(i++,c=r.children[i],o=!1):c=null:(v.push(c),_.push(i),i=0,r=c,c=c.children[0])}return this},toBBox:function(e){return e},compareMinX:xV,compareMinY:IV,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,r){var n,o=i-t+1,c=this._maxEntries;if(o<=c)return py(n=em(e.slice(t,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(o)/Math.log(c)),c=Math.ceil(o/Math.pow(c,r-1))),(n=em([])).leaf=!1,n.height=r;var y,v,_,I,$=Math.ceil(o/c),A=$*Math.ceil(Math.sqrt(c));for(TV(e,t,i,A,this.compareMinX),y=t;y<=i;y+=A)for(TV(e,y,_=Math.min(y+A-1,i),$,this.compareMinY),v=y;v<=_;v+=$)I=Math.min(v+$-1,_),n.children.push(this._build(e,v,I,r-1));return py(n,this.toBBox),n},_chooseSubtree:function(e,t,i,r){for(var n,o,c,y,v,_,I,$;r.push(t),!t.leaf&&r.length-1!==i;){for(I=$=1/0,n=0,o=t.children.length;n<o;n++)v=iE(c=t.children[n]),(_=v6e(e,c)-v)<$?($=_,I=v<I?v:I,y=c):_===$&&v<I&&(I=v,y=c);t=y||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,n=i?e:r(e),o=[],c=this._chooseSubtree(n,this.data,t,o);for(c.children.push(e),Ow(c,n);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(n,o,t)},_split:function(e,t){var i=e[t],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var o=this._chooseSplitIndex(i,n,r),c=em(i.children.splice(o,i.children.length-o));c.height=i.height,c.leaf=i.leaf,py(i,this.toBBox),py(c,this.toBBox),t?e[t-1].children.push(c):this._splitRoot(i,c)},_splitRoot:function(e,t){this.data=em([e,t]),this.data.height=e.height+1,this.data.leaf=!1,py(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,n,o,c,y,v,_,I;for(v=_=1/0,r=t;r<=i-t;r++)c=w6e(n=Lw(e,0,r,this.toBBox),o=Lw(e,r,i,this.toBBox)),y=iE(n)+iE(o),c<v?(v=c,I=r,_=y<_?y:_):c===v&&y<_&&(_=y,I=r);return I},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:xV,n=e.leaf?this.compareMinY:IV;this._allDistMargin(e,t,i,r)<this._allDistMargin(e,t,i,n)&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var n,o,c=this.toBBox,y=Lw(e,0,t,c),v=Lw(e,i-t,i,c),_=H_(y)+H_(v);for(n=t;n<i-t;n++)o=e.children[n],Ow(y,e.leaf?c(o):o),_+=H_(y);for(n=i-t-1;n>=t;n--)o=e.children[n],Ow(v,e.leaf?c(o):o),_+=H_(v);return _},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)Ow(t[r],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)e[i].children.length===0?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():py(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};let $V=class one{constructor(t,i){this.key=new sp(0,0,0,0),this.bounds=to(),this.objectIds=new Set,this.key.set(i);const r=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.level=r.level,this.scale=r.scale,this.minScale=t.zoomToScale(r.level-1),this.maxScale=t.zoomToScale(r.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return Ut.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(t){return{$view:{scale:this.scale,timeZone:t}}}createChildTiles(){const t=this.key.getChildKeys(),i=Ms.acquire();for(let r=0;r<t.length;r++)i[r]=new one(this.tileInfoView,t[r]);return i}getQuantizationParameters(){return Rie.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const $p={added:[],removed:[]},nE=new Set,b6e=new sp(0,0,0,0);function _6e(e,t){const i=Cs(t);if(!i)return null;const[r,n]=i.valid;return e[2]>n?[to([e[0],e[1],n,e[3]]),to([r,e[1],r+e[2]-n,e[3]])]:e[0]<r?[to([r,e[1],e[2],e[3]]),to([n-(r-e[0]),e[1],n,e[3]])]:null}let S6e=class extends qo{constructor(t){super(),this._tiles=new Map,this._index=l4(9,we("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||hX(t)===0||dX(t)===0)return[];const i=_6e(t,this.tileScheme.spatialReference);return i!=null?[...new Set([...this.boundsIntersections(i[0]),...this.boundsIntersections(i[1])])]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const i={added:[],removed:[]};for(const r of t.added)if(!this.has(r)){const n=new $V(this.tileScheme,r);this._tiles.set(r,n),this._index.insert(n),i.added.push(n)}for(const r of t.removed)if(this.has(r)){const n=this.get(r);this._tiles.delete(r),this._index.remove(n),i.removed.push(n)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(t){const i=this.tileScheme.getTileCoverage(t,0);if(!i)return;const{spans:r,lodInfo:n}=i,{level:o}=n;if(r.length>0)for(const{row:c,colFrom:y,colTo:v}of r)for(let _=y;_<=v;_++){const I=b6e.set(o,c,n.normalizeCol(_),n.getWorldForColumn(_)).id;if(nE.add(I),!this.has(I)){const $=new $V(this.tileScheme,I);this._tiles.set(I,$),this._index.insert($),this.tiles.push($),$p.added.push($)}}for(let c=this.tiles.length-1;c>=0;c--){const y=this.tiles[c];nE.has(y.id)||(this._tiles.delete(y.id),this.tiles.splice(c,1),this._index.remove(y),$p.removed.push(y))}($p.added.length||$p.removed.length)&&this.emit("update",$p),L2.pool.release(i),nE.clear(),$p.added.length=0,$p.removed.length=0}};const PXe=1e-30,EV=512,J_=16777216,NXe=8,FXe=29,DXe=24,jXe=4,zXe=0,VXe=0,UXe=0,BXe=1,GXe=2,qXe=3,HXe=4,WXe=5,JXe=6,ZXe=12,KXe=13,YXe=5,x6e=6,XXe=5,QXe=6;var MV;(function(e){e[e.FilterFlags=0]="FilterFlags",e[e.Animation=1]="Animation",e[e.GPGPU=2]="GPGPU",e[e.VV=3]="VV",e[e.DD0=4]="DD0",e[e.DD1=5]="DD1",e[e.DD2=6]="DD2",e[e.LocalTimeOrigin=7]="LocalTimeOrigin"})(MV||(MV={}));const ane=6,I6e=1<<ane,eQe=I6e<<1,tQe=1.05,iQe=3,rQe=1,nQe=3,sQe=3,oQe=5,aQe=6,lQe=1.15,T6e=2,uQe=128,$6e=256,cQe=$6e-2*T6e,hQe=2,dQe=128,pQe=10,fQe=1024,yQe=128,mQe=4,gQe=1,vQe=1<<20,wQe=.75,bQe=10,_Qe=.75,SQe=256,xQe=32,IQe=512,TQe=0,$Qe=1,E6e=1,EQe=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],MQe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Av=256,M6e=new je("cyan"),A6e=1,C6e=.25;new je("black");const k6e="default",L6e="temporary",O6e=new je("yellow");let uf=class extends Ve{constructor(t){super(t),this.color=M6e.clone(),this.haloOpacity=A6e,this.fillOpacity=C6e}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity}};m([w({type:je})],uf.prototype,"color",void 0),m([w({type:je})],uf.prototype,"haloColor",void 0),m([w()],uf.prototype,"haloOpacity",void 0),m([w()],uf.prototype,"fillOpacity",void 0),uf=m([H("esri.views.support.HighlightOptions")],uf);const R6e=uf;var p7;let Rw=p7=class extends R6e{constructor(e){super(e),this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(e){return super.equals(e)&&this.haloWidth===e.haloWidth&&this.haloBlur===e.haloBlur}get optionsKey(){return`${this.color};${this.haloColor};${this.haloOpacity};${this.fillOpacity};${this.haloWidth};${this.haloBlur}`}clone(){var e;return new p7({color:this.color.clone(),haloColor:(e=this.haloColor)==null?void 0:e.clone(),haloOpacity:this.haloOpacity,fillOpacity:this.fillOpacity,haloWidth:this.haloWidth,haloBlur:this.haloBlur})}};m([w()],Rw.prototype,"haloWidth",void 0),m([w()],Rw.prototype,"haloBlur",void 0),Rw=p7=m([H("esri.views.2d.support.HighlightOptions")],Rw);const F0=Rw;var AV,CV,kV,LV,f7,OV,RV,fu,y7,Rb,Kr,u4,ga,Li,Ke,O2,Mc,PV,NV,FV;(function(e){e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e[e.COLOR=16384]="COLOR"})(AV||(AV={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(CV||(CV={})),function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(kV||(kV={})),function(e){e[e.ADD=32774]="ADD",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.SUBTRACT=32778]="SUBTRACT",e[e.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(LV||(LV={})),function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"}(f7||(f7={})),function(e){e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(OV||(OV={})),function(e){e[e.CW=2304]="CW",e[e.CCW=2305]="CCW"}(RV||(RV={})),function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=5131]="HALF_FLOAT"}(fu||(fu={})),function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"}(y7||(y7={})),function(e){e[e.ZERO=0]="ZERO",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP"}(Rb||(Rb={})),function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(Kr||(Kr={})),function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(u4||(u4={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(ga||(ga={})),function(e){e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.RG=33319]="RG",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER"}(Li||(Li={})),function(e){e[e.RGBA4=32854]="RGBA4",e[e.R16F=33325]="R16F",e[e.RG16F=33327]="RG16F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.R32F=33326]="R32F",e[e.RG32F=33328]="RG32F",e[e.RGBA32F=34836]="RGBA32F",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB5_A1=32855]="RGB5_A1",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.RGB16F=34843]="RGB16F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.RGB565=36194]="RGB565",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2=32857]="RGB10_A2",e[e.RGB10_A2UI=36975]="RGB10_A2UI"}(Ke||(Ke={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.INT=5124]="INT",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(O2||(O2={})),function(e){e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(Mc||(Mc={})),function(e){e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_READ=35045]="STATIC_READ",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.STREAM_COPY=35042]="STREAM_COPY"}(PV||(PV={})),function(e){e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER"}(NV||(NV={})),function(e){e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(FV||(FV={}));const CQe=33984;var c4,DV,jV;(function(e){e[e.Texture=0]="Texture",e[e.BufferObject=1]="BufferObject",e[e.VertexArrayObject=2]="VertexArrayObject",e[e.Shader=3]="Shader",e[e.Program=4]="Program",e[e.FramebufferObject=5]="FramebufferObject",e[e.Renderbuffer=6]="Renderbuffer",e[e.TransformFeedback=7]="TransformFeedback",e[e.Sync=8]="Sync",e[e.UNCOUNTED=9]="UNCOUNTED",e[e.LinesOfCode=9]="LinesOfCode",e[e.Uniform=10]="Uniform",e[e.COUNT=11]="COUNT"})(c4||(c4={})),function(e){e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(DV||(DV={})),function(e){e[e.NONE=0]="NONE",e[e.BACK=1029]="BACK"}(jV||(jV={}));const kQe=33306;var On,zV,VV,UV,BV,GV,qV;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(On||(On={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT=5124]="INT",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(zV||(zV={})),function(e){e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS"}(VV||(VV={})),function(e){e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED"}(UV||(UV={})),function(e){e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED"}(BV||(BV={})),function(e){e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(GV||(GV={})),function(e){e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(qV||(qV={}));const P6e=()=>_e.getLogger("esri.views.webgl.checkWebGLError");function N6e(e,t){switch(t){case e.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case e.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case e.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case e.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case e.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case e.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const lne=!!we("enable-feature:webgl-debug");function une(){return lne}function LQe(){return lne}function fy(e){if(une()){const t=e.getError();if(t){const i=N6e(e,t),r=new Error().stack;P6e().error(new ne("webgl-error","WebGL error occurred",{message:i,stack:r}))}}}var m7;(function(e){e[e.Texture=0]="Texture",e[e.RenderBuffer=1]="RenderBuffer"})(m7||(m7={}));function F6e(e){switch(e){case fu.BYTE:case fu.UNSIGNED_BYTE:return 1;case fu.SHORT:case fu.UNSIGNED_SHORT:case fu.HALF_FLOAT:return 2;case fu.FLOAT:case fu.INT:case fu.UNSIGNED_INT:return 4}}function D6e(e){const t=e.gl;switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case t.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case t.INVALID_OPERATION:return"The specified command is not allowed for the current state";case t.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case t.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case t.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function OQe(e,t,i,r,n=0){var c;const o=e.gl;e.bindBuffer(i);for(const y of r){const v=t.get(y.name);if(v==null){console.warn(`There is no location for vertex attribute '${y.name}' defined.`);continue}const _=n*y.stride;if(y.count<=4)o.vertexAttribPointer(v,y.count,y.type,y.normalized,y.stride,y.offset+_),o.enableVertexAttribArray(v),y.divisor>0&&e.gl.vertexAttribDivisor(v,y.divisor);else if(y.count===9)for(let I=0;I<3;I++)o.vertexAttribPointer(v+I,3,y.type,y.normalized,y.stride,y.offset+12*I+_),o.enableVertexAttribArray(v+I),y.divisor>0&&e.gl.vertexAttribDivisor(v+I,y.divisor);else if(y.count===16)for(let I=0;I<4;I++)o.vertexAttribPointer(v+I,4,y.type,y.normalized,y.stride,y.offset+16*I+_),o.enableVertexAttribArray(v+I),y.divisor>0&&((c=e.gl)==null||c.vertexAttribDivisor(v+I,y.divisor));else console.error("Unsupported vertex attribute element count: "+y.count);if(une()){const I=D6e(e),$=F6e(y.type),A=y.offset,k=Math.round($/A)!==$/A?`. Offset not a multiple of stride. DataType requires ${$} bytes, but descriptor has an offset of ${A}`:"";I&&console.error(`Unable to bind vertex attribute "${y.name}" with baseInstanceOffset ${_}${k}:`,I,y)}}}function RQe(e,t,i,r){var o,c,y;const n=e.gl;e.bindBuffer(i);for(const v of r){const _=t.get(v.name);if(v.count<=4)n.disableVertexAttribArray(_),v.divisor&&v.divisor>0&&((o=e.gl)==null||o.vertexAttribDivisor(_,0));else if(v.count===9)for(let I=0;I<3;I++)n.disableVertexAttribArray(_+I),v.divisor&&v.divisor>0&&((c=e.gl)==null||c.vertexAttribDivisor(_+I,0));else if(v.count===16)for(let I=0;I<4;I++)n.disableVertexAttribArray(_+I),v.divisor&&v.divisor>0&&((y=e.gl)==null||y.vertexAttribDivisor(_+I,0));else console.error("Unsupported vertex attribute element count: "+v.count)}e.unbindBuffer(f7.ARRAY_BUFFER)}function j6e(e){switch(e){case Li.ALPHA:case Li.LUMINANCE:case Li.RED:case Li.RED_INTEGER:case Ke.R8:case Ke.R8I:case Ke.R8UI:case Ke.R8_SNORM:case Mc.STENCIL_INDEX8:return 1;case Li.LUMINANCE_ALPHA:case Li.RG:case Li.RG_INTEGER:case Ke.RGBA4:case Ke.R16F:case Ke.R16I:case Ke.R16UI:case Ke.RG8:case Ke.RG8I:case Ke.RG8UI:case Ke.RG8_SNORM:case Ke.RGB565:case Ke.RGB5_A1:case Mc.DEPTH_COMPONENT16:return 2;case Li.DEPTH_COMPONENT:case Li.RGB:case Li.RGB_INTEGER:case Ke.RGB8:case Ke.RGB8I:case Ke.RGB8UI:case Ke.RGB8_SNORM:case Ke.SRGB8:case Mc.DEPTH_COMPONENT24:return 3;case Li.DEPTH_STENCIL:case Li.DEPTH24_STENCIL8:case Li.RGBA:case Li.RGBA_INTEGER:case Ke.RGBA8:case Ke.R32F:case Ke.R11F_G11F_B10F:case Ke.RG16F:case Ke.R32I:case Ke.R32UI:case Ke.RG16I:case Ke.RG16UI:case Ke.RGBA8I:case Ke.RGBA8UI:case Ke.RGBA8_SNORM:case Ke.SRGB8_ALPHA8:case Ke.RGB9_E5:case Ke.RGB10_A2UI:case Ke.RGB10_A2:case Mc.DEPTH_STENCIL:case Mc.DEPTH_COMPONENT32F:case Mc.DEPTH24_STENCIL8:return 4;case Mc.DEPTH32F_STENCIL8:return 5;case Ke.RGB16F:case Ke.RGB16I:case Ke.RGB16UI:return 6;case Ke.RG32F:case Ke.RG32I:case Ke.RG32UI:case Ke.RGBA16F:case Ke.RGBA16I:case Ke.RGBA16UI:return 8;case Ke.RGB32F:case Ke.RGB32I:case Ke.RGB32UI:return 12;case Ke.RGBA32F:case Ke.RGBA32I:case Ke.RGBA32UI:return 16;case On.COMPRESSED_RGB_S3TC_DXT1_EXT:case On.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case On.COMPRESSED_RGBA_S3TC_DXT3_EXT:case On.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case On.COMPRESSED_R11_EAC:case On.COMPRESSED_SIGNED_R11_EAC:case On.COMPRESSED_RGB8_ETC2:case On.COMPRESSED_SRGB8_ETC2:case On.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case On.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case On.COMPRESSED_RG11_EAC:case On.COMPRESSED_SIGNED_RG11_EAC:case On.COMPRESSED_RGBA8_ETC2_EAC:case On.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let cne=class{constructor(t=0,i=t){this.width=t,this.height=i,this.target=ga.TEXTURE_2D,this.pixelFormat=Li.RGBA,this.dataType=O2.UNSIGNED_BYTE,this.samplingMode=Kr.LINEAR,this.wrapMode=u4.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.depth=1,this.isImmutable=!1}};function z6e(e){return e.width<=0||e.height<=0?0:Math.round(e.width*e.height*(e.hasMipmap?4/3:1)*(e.internalFormat==null?4:j6e(e.internalFormat))*(e.target===ga.TEXTURE_CUBE_MAP?6:1))}let V6e=class hne extends cne{constructor(t,i){switch(super(),this.context=t,Object.assign(this,i),this.internalFormat){case Ke.R16F:case Ke.R16I:case Ke.R16UI:case Ke.R32F:case Ke.R32I:case Ke.R32UI:case Ke.R8_SNORM:case Ke.R8:case Ke.R8I:case Ke.R8UI:this.pixelFormat=Li.RED}}static validate(t,i){return new hne(t,i)}},dne=class ra{constructor(t,i=null,r=null){if(this.type=m7.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._wasImmutablyAllocated=!1,"context"in t)this._descriptor=t,r=i;else{const n=V6e.validate(t,i);if(!n)throw new ne("Texture descriptor invalid");this._descriptor=n}this._descriptor.target===ga.TEXTURE_CUBE_MAP?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return z6e(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}dispose(){this._glName&&this._descriptor.context.instanceCounter.decrement(c4.Texture,this),this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(t,i){const r=this._descriptor;if(r.width!==t||r.height!==i){if(this._wasImmutablyAllocated)throw new ne("Immutable textures can't be resized!");r.width=t,r.height=i,this._descriptor.target===ga.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}_setDataCubeMap(t=null){for(let i=ga.TEXTURE_CUBE_MAP_POSITIVE_X;i<=ga.TEXTURE_CUBE_MAP_NEGATIVE_Z;i++)this._setData(t,i)}setData(t){this._setData(t)}_setData(t,i){var _;const r=(_=this._descriptor.context)==null?void 0:_.gl;if(!r)return;fy(r),this._glName||(this._glName=r.createTexture(),this._glName&&this._descriptor.context.instanceCounter.increment(c4.Texture,this));const n=this._descriptor,o=i??n.target,c=Cv(o),y=this._descriptor.context.bindTexture(this,ra.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(ra.TEXTURE_UNIT_FOR_UPDATES),Z_(n),this._configurePixelStorage(),fy(r);const v=this._deriveInternalFormat();if(JV(t)){let I="width"in t?t.width:t.codedWidth,$="height"in t?t.height:t.codedHeight;const A=1;t instanceof HTMLVideoElement&&(I=t.videoWidth,$=t.videoHeight),n.width&&n.height,c&&n.depth,n.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,v,n.hasMipmap,I,$,A),this._texImage(o,0,v,I,$,A,t),fy(r),n.hasMipmap&&(this.generateMipmap(),fy(r)),n.width||(n.width=I),n.height||(n.height=$),c&&!n.depth&&(n.depth=A)}else{const{width:I,height:$,depth:A}=n;if(I==null||$==null)throw new ne("Width and height must be specified!");if(c&&A==null)throw new ne("Depth must be specified!");if(n.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,v,n.hasMipmap,I,$,A),U5(t)){const k=t.levels,R=ZV(o,I,$,A),N=Math.min(R-1,k.length-1);r.texParameteri(n.target,this._descriptor.context.gl.TEXTURE_MAX_LEVEL,N);const D=v;if(!G6e(D))throw new ne("Attempting to use compressed data with an uncompressed format!");this._forEachMipmapLevel((j,z,U,W)=>{const Q=k[Math.min(j,k.length-1)];this._compressedTexImage(o,j,D,z,U,W,Q)},N)}else this._texImage(o,0,v,I,$,A,t),fy(r),n.hasMipmap&&this.generateMipmap()}HV(r,this._descriptor),WV(r,this._descriptor),U6e(this._descriptor.context,this._descriptor),fy(r),this._descriptor.context.bindTexture(y,ra.TEXTURE_UNIT_FOR_UPDATES)}updateData(t,i,r,n,o,c,y=0){c||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const v=this._descriptor,_=this._deriveInternalFormat(),{context:I,pixelFormat:$,dataType:A,target:k,isImmutable:R}=v;if(R&&!this._wasImmutablyAllocated)throw new ne("Cannot update immutable texture before allocation!");const N=I.bindTexture(this,ra.TEXTURE_UNIT_FOR_UPDATES,!0);(i<0||r<0||i+n>v.width||r+o>v.height)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:D}=I;y&&D.pixelStorei(D.UNPACK_SKIP_ROWS,y),JV(c)?D.texSubImage2D(k,t,i,r,n,o,$,A,c):U5(c)?D.compressedTexSubImage2D(k,t,i,r,n,o,_,c.levels[t]):D.texSubImage2D(k,t,i,r,n,o,$,A,c),y&&D.pixelStorei(D.UNPACK_SKIP_ROWS,0),I.bindTexture(N,ra.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(t,i,r,n,o,c,y,v){v||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const _=this._descriptor,I=this._deriveInternalFormat(),{context:$,pixelFormat:A,dataType:k,isImmutable:R,target:N}=_;if(R&&!this._wasImmutablyAllocated)throw new ne("Cannot update immutable texture before allocation!");Cv(N)||console.warn("Attempting to set 3D texture data on a non-3D texture");const D=$.bindTexture(this,ra.TEXTURE_UNIT_FOR_UPDATES);$.setActiveTexture(ra.TEXTURE_UNIT_FOR_UPDATES),(i<0||r<0||n<0||i+o>_.width||r+c>_.height||n+y>_.depth)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:j}=$;if(U5(v))v=v.levels[t],j.compressedTexSubImage3D(N,t,i,r,n,o,c,y,I,v);else{const z=v;j.texSubImage3D(N,t,i,r,n,o,c,y,A,k,z)}$.bindTexture(D,ra.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const t=this._descriptor;if(!t.hasMipmap){if(this._wasImmutablyAllocated)throw new ne("Cannot add mipmaps to immutable texture after allocation");t.hasMipmap=!0,this._samplingModeDirty=!0,Z_(t)}t.samplingMode===Kr.LINEAR?(this._samplingModeDirty=!0,t.samplingMode=Kr.LINEAR_MIPMAP_NEAREST):t.samplingMode===Kr.NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=Kr.NEAREST_MIPMAP_NEAREST);const i=this._descriptor.context.bindTexture(this,ra.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(ra.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(t.target),this._descriptor.context.bindTexture(i,ra.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const t=this._descriptor;if(t.hasMipmap){if(this._wasImmutablyAllocated)throw new ne("Cannot delete mipmaps to immutable texture after allocation");t.hasMipmap=!1,this._samplingModeDirty=!0,Z_(t)}t.samplingMode===Kr.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,t.samplingMode=Kr.LINEAR):t.samplingMode===Kr.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=Kr.NEAREST)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,Z_(this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const t=this._descriptor,i=t.context.gl;this._samplingModeDirty&&(HV(i,t),this._samplingModeDirty=!1),this._wrapModeDirty&&(WV(i,t),this._wrapModeDirty=!1)}_deriveInternalFormat(){if(this._descriptor.internalFormat!=null)return this._descriptor.internalFormat===Li.DEPTH_STENCIL&&(this._descriptor.internalFormat=Li.DEPTH24_STENCIL8),this._descriptor.internalFormat;switch(this._descriptor.dataType){case O2.FLOAT:switch(this._descriptor.pixelFormat){case Li.RGBA:return this._descriptor.internalFormat=Ke.RGBA32F;case Li.RGB:return this._descriptor.internalFormat=Ke.RGB32F;default:throw new ne("Unable to derive format")}case O2.UNSIGNED_BYTE:switch(this._descriptor.pixelFormat){case Li.RGBA:return this._descriptor.internalFormat=Ke.RGBA8;case Li.RGB:return this._descriptor.internalFormat=Ke.RGB8}}return this._descriptor.internalFormat=this._descriptor.pixelFormat===Li.DEPTH_STENCIL?Li.DEPTH24_STENCIL8:this._descriptor.pixelFormat}_configurePixelStorage(){const t=this._descriptor.context.gl,{unpackAlignment:i,flipped:r,preMultiplyAlpha:n}=this._descriptor;t.pixelStorei(t.UNPACK_ALIGNMENT,i),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,r?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n?1:0)}_texStorage(t,i,r,n,o,c){const{gl:y}=this._descriptor.context;if(!B6e(i))throw new ne("Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const v=r?ZV(t,n,o,c):1;if(Cv(t)){if(c==null)throw new ne("Missing depth dimension for 3D texture upload");y.texStorage3D(t,v,i,n,o,c)}else y.texStorage2D(t,v,i,n,o);this._wasImmutablyAllocated=!0}_texImage(t,i,r,n,o,c,y){const v=this._descriptor.context.gl,_=Cv(t),{isImmutable:I,pixelFormat:$,dataType:A}=this._descriptor;if(I){if(y!=null){const k=y;if(_){if(c==null)throw new ne("Missing depth dimension for 3D texture upload");v.texSubImage3D(t,i,0,0,0,n,o,c,$,A,k)}else v.texSubImage2D(t,i,0,0,n,o,$,A,k)}}else{const k=y;if(_){if(c==null)throw new ne("Missing depth dimension for 3D texture upload");v.texImage3D(t,i,r,n,o,c,0,$,A,k)}else v.texImage2D(t,i,r,n,o,0,$,A,k)}}_compressedTexImage(t,i,r,n,o,c,y){const v=this._descriptor.context.gl,_=Cv(t);if(this._descriptor.isImmutable){if(y!=null)if(_){if(c==null)throw new ne("Missing depth dimension for 3D texture upload");v.compressedTexSubImage3D(t,i,0,0,0,n,o,c,r,y)}else v.compressedTexSubImage2D(t,i,0,0,n,o,r,y)}else if(_){if(c==null)throw new ne("Missing depth dimension for 3D texture upload");v.compressedTexImage3D(t,i,r,n,o,c,0,y)}else v.compressedTexImage2D(t,i,r,n,o,0,y)}_forEachMipmapLevel(t,i=1/0){let{width:r,height:n,depth:o,hasMipmap:c,target:y}=this._descriptor;const v=y===ga.TEXTURE_3D;if(r==null||n==null||v&&o==null)throw new ne("Missing texture dimensions for mipmap calculation");for(let _=0;t(_,r,n,o),c&&(r!==1||n!==1||v&&o!==1)&&!(_>=i);++_)r=Math.max(1,r>>1),n=Math.max(1,n>>1),v&&(o=Math.max(1,o>>1))}};function Z_(e){(e.width!=null&&e.width<0||e.height!=null&&e.height<0||e.depth!=null&&e.depth<0)&&console.error("Negative dimension parameters are not allowed!")}function HV(e,t){let i=t.samplingMode,r=t.samplingMode;i===Kr.LINEAR_MIPMAP_NEAREST||i===Kr.LINEAR_MIPMAP_LINEAR?(i=Kr.LINEAR,t.hasMipmap||(r=Kr.LINEAR)):i!==Kr.NEAREST_MIPMAP_NEAREST&&i!==Kr.NEAREST_MIPMAP_LINEAR||(i=Kr.NEAREST,t.hasMipmap||(r=Kr.NEAREST)),e.texParameteri(t.target,e.TEXTURE_MAG_FILTER,i),e.texParameteri(t.target,e.TEXTURE_MIN_FILTER,r)}function WV(e,t){typeof t.wrapMode=="number"?(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode)):(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode.s),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode.t))}function U6e(e,t){const i=e.capabilities.textureFilterAnisotropic;i&&e.gl.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy??1)}function B6e(e){return e in Ke}function G6e(e){return e in On}function U5(e){return e!=null&&"type"in e&&e.type==="compressed"}function q6e(e){return e!=null&&"byteLength"in e}function JV(e){return e!=null&&!U5(e)&&!q6e(e)}function Cv(e){return e===ga.TEXTURE_3D||e===ga.TEXTURE_2D_ARRAY}function ZV(e,t,i,r=1){let n=Math.max(t,i);return e===ga.TEXTURE_3D&&(n=Math.max(n,r)),Math.round(Math.log(n)/Math.LN2)+1}dne.TEXTURE_UNIT_FOR_UPDATES=0;const sE=()=>_e.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function H6e(e,t){t.fillColor[0]=e.color.r/255,t.fillColor[1]=e.color.g/255,t.fillColor[2]=e.color.b/255,t.fillColor[3]=e.color.a,e.haloColor?(t.outlineColor[0]=e.haloColor.r/255,t.outlineColor[1]=e.haloColor.g/255,t.outlineColor[2]=e.haloColor.b/255,t.outlineColor[3]=e.haloColor.a):(t.outlineColor[0]=t.fillColor[0],t.outlineColor[1]=t.fillColor[1],t.outlineColor[2]=t.fillColor[2],t.outlineColor[3]=t.fillColor[3]),t.fillColor[3]*=e.fillOpacity,t.outlineColor[3]*=e.haloOpacity,t.fillColor[0]*=t.fillColor[3],t.fillColor[1]*=t.fillColor[3],t.fillColor[2]*=t.fillColor[3],t.outlineColor[0]*=t.outlineColor[3],t.outlineColor[1]*=t.outlineColor[3],t.outlineColor[2]*=t.outlineColor[3],t.outlineWidth=(1-e.haloBlur)*e.haloWidth,t.outerHaloWidth=e.haloBlur*e.haloWidth/2,t.innerHaloWidth=e.haloBlur*e.haloWidth/2,t.outlinePosition=0}const W6e=[0,0,0,0];let pne=class{constructor(){this.type="single",this._highlightOptions=new F0,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*Av),this._minMaxDistance=[0,0]}setHighlightOptions(t){this._highlightOptions=t}applyHighlightOptions(t,i){this._updateGradientTexture(t),t.bindTexture(this._shadeTex,x6e),i.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){var t;(t=this._shadeTex)==null||t.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<ane)-1,activeGradient:this}]}_updateGradientTexture(t){const{optionsKey:i}=this._highlightOptions;if(i===this._optionsShadeTexKey)return;this._optionsShadeTexKey=i,H6e(this._highlightOptions,this._convertedHighlightOptions);const r=this._convertedHighlightOptions,n=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,o=r.outlinePosition-r.outlineWidth/2,c=r.outlinePosition+r.outlineWidth/2,y=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,v=Math.sqrt(Math.PI/2)*E6e,_=Math.abs(n)>v?Math.round(10*(Math.abs(n)-v))/10:0,I=Math.abs(y)>v?Math.round(10*(Math.abs(y)-v))/10:0;let $;_&&!I?sE().error("The outer rim of the highlight is "+_+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!_&&I?sE().error("The inner rim of the highlight is "+I+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):_&&I&&sE().error("The highlight is "+Math.max(_,I)+"px away from the edge of the feature; consider reducing some width values.");const A=[void 0,void 0,void 0,void 0];function k(N,D,j){A[0]=(1-j)*N[0]+j*D[0],A[1]=(1-j)*N[1]+j*D[1],A[2]=(1-j)*N[2]+j*D[2],A[3]=(1-j)*N[3]+j*D[3]}const{_texelData:R}=this;for(let N=0;N<Av;++N)$=n+N/(Av-1)*(y-n),$<n?(A[0]=0,A[1]=0,A[2]=0,A[3]=0):$<o?k(W6e,r.outlineColor,($-n)/(o-n)):$<c?[A[0],A[1],A[2],A[3]]=r.outlineColor:$<y?k(r.outlineColor,r.fillColor,($-c)/(y-c)):[A[0],A[1],A[2],A[3]]=r.fillColor,R[4*N]=255*A[0],R[4*N+1]=255*A[1],R[4*N+2]=255*A[2],R[4*N+3]=255*A[3];if(this._minMaxDistance[0]=n,this._minMaxDistance[1]=y,!this._shadeTex){const N=new cne;N.wrapMode=u4.CLAMP_TO_EDGE,N.width=Av,N.height=1,this._shadeTex=new dne(t,N)}this._shadeTex.updateData(0,0,0,Av,1,this._texelData)}},J6e=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(t){for(let i=0;i<t.length;i++)this.gradients[i]||(this.gradients[i]=new pne),this.gradients[i].setHighlightOptions(t[i].options);for(let i=t.length+1;i<this.gradients.length;i++)this.gradients[i].destroy();this.gradients.length=t.length}destroy(){for(const t of this.gradients)t.destroy()}getReasonsWithGradients(){let t=1;const i=[];for(let r=0;r<this.gradients.length;r++){const n=this.gradients[r];i.push({activeReasons:t,activeGradient:n}),t<<=1}return i}};var KV,YV,XV,QV,eU,tU,h4,iU,rU;(function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT",e[e.LABEL=4]="LABEL"})(KV||(KV={})),function(e){e[e.NONE=0]="NONE",e[e.MAP=1]="MAP",e[e.LABEL=2]="LABEL",e[e.LABEL_ALPHA=4]="LABEL_ALPHA",e[e.HITTEST=8]="HITTEST",e[e.HIGHLIGHT=16]="HIGHLIGHT",e[e.CLIP=32]="CLIP",e[e.DEBUG=64]="DEBUG",e[e.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(YV||(YV={})),function(e){e[e.SIZE=0]="SIZE",e[e.COLOR=1]="COLOR",e[e.OPACITY=2]="OPACITY",e[e.ROTATION=3]="ROTATION"}(XV||(XV={})),function(e){e[e.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",e[e.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",e[e.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",e[e.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(QV||(QV={})),function(e){e[e.SPRITE=0]="SPRITE",e[e.GLYPH=1]="GLYPH"}(eU||(eU={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SIMPLE=1]="SIMPLE",e[e.DOT_DENSITY=2]="DOT_DENSITY",e[e.OUTLINE_FILL=3]="OUTLINE_FILL",e[e.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",e[e.HEATMAP=5]="HEATMAP",e[e.PIE_CHART=6]="PIE_CHART"}(tU||(tU={})),function(e){e[e.All=0]="All",e[e.Highlight=1]="Highlight",e[e.InsideEffect=2]="InsideEffect",e[e.OutsideEffect=3]="OutsideEffect"}(h4||(h4={})),function(e){e[e.BATCHING=0]="BATCHING",e[e.STRICT_ORDER=1]="STRICT_ORDER",e[e.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"}(iU||(iU={})),function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT"}(rU||(rU={}));const fne={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:y7.EQUAL,mask:255,op:{fail:Rb.KEEP,zFail:Rb.KEEP,zPass:Rb.REPLACE}}}},Z6e={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},K6e={...fne,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function Y6e({pixelRatio:e,state:t,displayLevel:i,requiredLevel:r},n){const o=1/2**(i-n.key.level),c=1/2**(r-n.key.level);return{displayMat3:t.displayMat3,displayViewMat3:t.displayViewMat3,displayViewScreenMat3:n.transforms.displayViewScreenMat3,viewMat3:t.viewMat3,tileMat3:n.transforms.tileMat3,displayZoomFactor:o,requiredZoomFactor:c,tileOffset:[n.x,n.y],currentScale:t.scale,currentZoom:i,metersPerSRUnit:Al(t.spatialReference),rotation:t.rotation,pixelRatio:e}}function yne(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="highlight"}function mne(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="hittest"}function X6e(e){if(!mne(e))return null;const{position:t,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:n}=e.passOptions;return{position:t,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:n}}function Q6e(e){if(!yne(e))return null;const{activeReasons:t,highlightAll:i}=e.passOptions;return{activeReasons:t,highlightAll:i?1:0}}function DQe(e,t,i){const r={};for(const n in i)i[n]instanceof Function?r[n]=i[n](e,t):r[n]=i[n];return r}function jQe(e,t){const{attributeView:i,context:r}=e;return{storage:i.getUniforms(r),view:Y6e(e,t),hittestRequest:X6e(e),highlight:Q6e(e)}}function zQe(e){return{inside:e.selection===h4.InsideEffect,outside:e.selection===h4.OutsideEffect}}function eMe(e){return mne(e)?Z6e:yne(e)&&e.passOptions.stepType==="clear"?K6e:fne}function VQe(e){const{row:t,col:i}=e.key,r=i*EV,n=t*EV;return{tileOffsetFromLocalOrigin:[r%J_,n%J_],maxIntsToLocalOrigin:[Math.floor(r/J_),Math.floor(n/J_)]}}const tMe=new ft({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function UQe(e){return tMe.toJSON(e)}function BQe(e){const{bandCount:t,attributeTable:i,colormap:r,pixelType:n}=e.raster.rasterInfo;return t===1&&(i!=null||r!=null||n==="u8"||n==="s8")}function iMe(e,t){return t==null?(e==null||e.destroy(),null):((e==null?void 0:e.type)==="single"&&Array.isArray(t)&&(e.destroy(),e=null),(e==null?void 0:e.type)!=="multi"||Array.isArray(t)||(e.destroy(),e=null),e||(e=Array.isArray(t)?new J6e:new pne),Array.isArray(t)?e.type==="multi"&&e.setHighlightOptions(t):e.type==="single"&&e.setHighlightOptions(t),e)}function GQe(e,t,i,r){const{painter:n,highlightGradient:o}=e,{highlight:c}=n.effects;if(!o)return;const y=e.passOptions,v=o.getReasonsWithGradients();for(let _=0;_<v.length;_++){const I={...e,passOptions:{type:"highlight",activeGradient:r!=null?v[r].activeGradient:v[_].activeGradient,activeReasons:v[_].activeReasons,stepType:"burn",highlightAll:t}};if(c.bind(I),i(I),_<v.length-1){let A=0;for(let k=_+1;k<v.length;k++)A|=v[k].activeReasons;i({...e,passOptions:{type:"highlight",activeGradient:r!=null?v[r].activeGradient:v[_].activeGradient,activeReasons:A,stepType:"clear",highlightAll:t}})}const $={...e,passOptions:{type:"highlight",activeGradient:r!=null?v[r].activeGradient:v[_].activeGradient,activeReasons:v[_].activeReasons,stepType:"draw",highlightAll:t}};n.setPipelineState(eMe(e)),n.updatePipelineState(e.context),c.draw($),c.unbind()}e.passOptions=y}const K_=e=>parseFloat(e)/100;function rMe(e,t,i){const r=typeof e.left=="string"?K_(e.left)*t:e.left,n=typeof e.right=="string"?K_(e.right)*t:e.right,o=typeof e.top=="string"?K_(e.top)*i:e.top,c=typeof e.bottom=="string"?K_(e.bottom)*i:e.bottom,y=o;return{xmin:r,xmax:Math.max(t-n,r),ymin:y,ymax:Math.max(i-c,o)}}function gne(e,t,i,r){switch(t.type){case"rect":{const{width:n,height:o}=e,{xmin:c,xmax:y,ymin:v,ymax:_}=rMe(t,n,o),{x:I,y:$}=i;return I>c&&I<y&&$>v&&$<_}case"path":return t.path.length===0||!Array.isArray(t.path[0][0])||SO(t.path,[i.x,i.y]);case"geometry":return t.geometry==null||(t.geometry.type==="polygon"?_O(t.geometry,r):m3(t.geometry,r))}}var g7;let h1=g7=class extends Ve{constructor(...e){super(...e),this.name="default",this.options=new F0}clone(){return new g7({name:this.name,options:this.options.clone()})}};m([w({type:String})],h1.prototype,"name",void 0),m([w({type:F0})],h1.prototype,"options",void 0),h1=g7=m([H("esri.views.2d.support.HighlightGroup")],h1);const vne=Oe.ofType(h1);function wne(){return new vne([{name:k6e,options:new F0},{name:L6e,options:new F0({color:O6e})}])}wne().items.map(e=>e.name);function nMe(e){if(!e.highlights)return null;const t=e.highlights.findIndex(i=>i.name==="default");return t===-1?null:e.highlights.items[t].options}function sMe(e,t){if(!e.highlights){if(!t)return;e.highlights=new vne([{name:"default",options:new F0}])}const i=e.highlights.findIndex(r=>r.name==="default");t?e.highlights.items[i].options=t:e.highlights.removeAt(i)}async function oMe(e,t,i){const r=Vie(t)?zie(e,t):t;if(!e.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let n=new Set;const o=new Set;let c=!1,y=null,v=null;i!=null&&i.include?sU(i.include,nU(e,A=>{n.add(A),oE(A,k=>o.add(k))},(A,k)=>{o.add(A),n.add(k)},A=>{y||(y=new Set),y.add(A)},A=>n.add(A),()=>c=!0)):(c=!0,n=new Set(e.allLayerViews),n.forEach(A=>{oE(A,k=>o.add(k))})),i!=null&&i.exclude&&sU(i.exclude,nU(e,A=>{n.delete(A),oE(A,k=>o.delete(k))},A=>o.delete(A),A=>{v||(v=new Set),v.add(A)}));const _=e.toMap(r),I=e.allLayerViews.filter(A=>!A.suspended&&n.has(A)&&A.clips.every(k=>gne(e,k,r,_))).reverse();let $=[...c?e.graphicsView.hitTest(_).map(A=>({type:"graphic",graphic:A,layer:null,mapPoint:_})):[],...await Promise.all(I.map(A=>A.hitTest(_,r)).toArray())].filter(Ar).flat().filter(Ar);return $=$.filter(A=>{var k;return A.type!=="graphic"||((k=A.layer)==null?void 0:k.type)!=="subtype-group"||o.has(A.graphic.layer)}),y&&($=$.filter(A=>!("graphic"in A)||!A.graphic||(y==null?void 0:y.has(v7(A.graphic))))),v&&($=$.filter(A=>!("graphic"in A)||!A.graphic||!(v!=null&&v.has(v7(A.graphic))))),{screenPoint:r,results:$}}function nU(e,t,i,r,n,o){return c=>{if(c instanceof er){if(c.layer===e)o==null||o();else{const y=e.allLayerViews.find(v=>v.layer===c.layer);y&&(n==null||n(y))}r(v7(c))}else if(!("layer"in c&&"element"in c))if(c.type==="subtype-sublayer"){const y=e.allLayerViews.find(v=>v.layer===c.parent);y&&i(c,y)}else{const y=e.allLayerViews.find(v=>v.layer===c);y&&t(y)}}}function sU(e,t){if(e)if(m9(e))for(const i of e)if(m9(i))for(const r of i)t(r);else t(i);else t(e)}function v7(e){var i,r;const t=e.getObjectId();return t?`${((i=e.layer)==null?void 0:i.uid)??((r=e.sourceLayer)==null?void 0:r.uid)??"MapView"}/${t}`:`"MapView/${e.uid}`}function oE({layer:e},t){(e==null?void 0:e.type)==="subtype-group"&&e.sublayers.forEach(i=>{t(i)})}let kv=null,d4=!0;function aMe(e,t,i){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(d4)try{return new ImageData(e,t)}catch{d4=!1}return bne(e,t,i)}function qQe(e,t,i,r){if(!t||!i)throw new Error("Cannot construct image data without dimensions");if(d4)try{return new ImageData(e,t,i)}catch{d4=!1}const n=bne(t,i,r);return n.data.set(e,0),n}function lMe(){return kv||(kv=document.createElement("canvas"),kv.width=1,kv.height=1),kv}function bne(e,t,i){return i||(i=lMe()),i.getContext("2d").createImageData(e,t)}async function uMe(e,t){const i=window.URL.createObjectURL(e);try{const{data:r}=await Et(i,{...t,responseType:"image"});return r}catch(r){throw br(r)?r:new ne("invalid-image",`Could not fetch requested image at ${i}`)}finally{window.URL.revokeObjectURL(i)}}async function HQe(e,t){const{arrayBuffer:i,mediaType:r}=await cMe(e,t),n=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:o,parseGif:c}=await de(()=>import("./gif-CGM9Pw-B.js"),[],import.meta.url);if(o(i))return c(i,t)}if(n){const{isAnimatedPNG:o,parseApng:c}=await de(()=>import("./apng-tvjipO4p.js"),[],import.meta.url);if(o(i))return c(i,t)}return uMe(new Blob([i],{type:r}),t)}async function cMe(e,t){var n;const i=I0(e);if(i!=null&&i.isBase64)return{arrayBuffer:cY(i.data),mediaType:i.mediaType};const r=await Et(e,{responseType:"array-buffer",...t});return{arrayBuffer:r.data,mediaType:((n=r.getHeader)==null?void 0:n.call(r,"Content-Type"))??""}}function _ne(e,t,i){const{ctx:r,canvas:n}=xne(e,i),o=r.getImageData(0,0,e.width,e.height),c=Tne(n,t);return Ine(n),{dataUrl:c,data:o}}function Sne(e,t){const{ctx:i,canvas:r}=xne(e,t),n=i.getImageData(0,0,e.width,e.height);return Ine(r),n}function xne(e,t){const i=hMe();t.premultipliedAlpha&&yMe(e),i.width=e.width,i.height=e.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(e,0,0),t.flipY&&fMe(r),{ctx:r,canvas:i}}function Ine(e){e.width=0,e.height=0}function hMe(){return aE==null&&(aE=document.createElement("canvas")),aE}let aE=null;function Tne(e,t){const i=mMe[t.format],r=t.quality/100;return e.toDataURL(i,r)}function $ne(e,t){const i=pMe(e),r=vMe[i];return{format:i,quality:co(t??r,0,100)}}function Ene(e,t){return t/Math.max(e[0],e[1])}function dMe(e,t,i,r=0,n=0,o=e.width-r,c=e.height-n,y=!1){const{data:v}=e,{width:_,height:I,data:$}=t,A=o/_,k=c/I,R=Math.ceil(A/2),N=Math.ceil(k/2),D=e.width;for(let j=0;j<I;j++)for(let z=0;z<_;z++){const U=4*(z+(y?I-j-1:j)*_);let W=0,Q=0,K=0,ee=0,ie=0,ae=0;const ue=(j+.5)*k;for(let Ie=Math.floor(j*k);Ie<(j+1)*k;Ie++){const Ae=Math.abs(ue-(Ie+.5))/N,Me=(z+.5)*A,fe=Ae*Ae;for(let se=Math.floor(z*A);se<(z+1)*A;se++){const ye=Math.abs(Me-(se+.5))/R,he=Math.sqrt(fe+ye*ye);if(he>=1)continue;let ce=2*he*he*he-3*he*he+1;const xe=4*(r+se+(n+Ie)*D);ae+=ce*v[xe+3],Q+=ce,!i&&v[xe+3]<255&&(ce=ce*v[xe+3]/255),K+=ce*v[xe],ee+=ce*v[xe+1],ie+=ce*v[xe+2],W+=ce}}$[U]=K/W,$[U+1]=ee/W,$[U+2]=ie/W,$[U+3]=ae/Q}return t}function pMe(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return gMe}}function fMe(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function yMe(e){const t=e.data,i=t.length;for(let r=0;r<i;r+=4){const n=t[r+3];if(n!==255&&n>0){const o=255/n;t[r]=t[r]*o,t[r+1]=t[r+1]*o,t[r+2]=t[r+2]*o}}}const mMe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},oU=98,gMe="png",vMe={png:100,jpg:oU,jpeg:oU},WQe=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:aMe,encode:_ne,encodeData:Sne,getFormatAndQuality:$ne,getMaximumResolutionScale:Ene,resampleHermite:dMe,toDataUrl:Tne},Symbol.toStringTag,{value:"Module"})),Mne={flipY:!0,premultipliedAlpha:!0};async function wMe(e,t){const i=await Ane(e,t),{format:r,quality:n}=$ne(t==null?void 0:t.format,t==null?void 0:t.quality);return _ne(i,{format:r,quality:n},Mne)}async function bMe(e,t){const i=await Ane(e,t);return Sne(i,Mne)}function Ane(e,t){const i=xMe(t||{},SMe(e.stage,e.size),e.size,e.padding),r=_Me(t,e.allLayerViews);return e.stage.takeScreenshot(i,r,e.backgroundColor,t==null?void 0:t.rotation)}function _Me(e={},t){if(!e.layers)return;const i=[];return e.layers.forEach(r=>{const n=t.find(o=>o.layer.id===r.id);n!=null&&n.container&&i.push(n.container)}),i}function SMe(e,t){return Math.min(4,Ene(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function xMe(e,t,i,r){e.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let n=null;e.width!=null&&e.height!=null?n=[e.width,e.height]:e.width==null&&e.height!=null?n=[e.height,e.height]:e.width!=null&&e.height==null?n=[e.width,e.width]:e.width==null&&e.height==null&&(n=null);const o=i[0]-(r.left+r.right),c=i[1]-(r.top+r.bottom);let y,v,_=e.area||{x:0,y:0,width:o,height:c};if(n){const I=o/c,$=n[0]/n[1];if($>I){const A=_.width/$;_={x:_.x,y:Math.round(_.y+(_.height-A)/2),width:_.width,height:Math.round(A)}}else{const A=_.height*$;_={x:Math.round(_.x+(_.width-A)/2),y:_.y,width:Math.round(A),height:_.height}}}else n=[_.width,_.height];return n[0]>_.width?(y=Math.min(n[0]/_.width,t),v=n[0]/_.width/y):(y=1,v=n[0]/_.width),{cropArea:{x:Math.round((_.x+r.left)*y),y:Math.round((_.y+r.top)*y),width:Math.round(_.width*y),height:Math.round(_.height*y)},outputScale:v,resolutionScale:y}}const aU=160;let Pw=class extends Ve{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=aU&&this.clear()},aU))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};m([w()],Pw.prototype,"_timer",void 0),m([w()],Pw.prototype,"stationary",null),Pw=m([H("esri.views.2d.support.StationaryManager")],Pw);const IMe=e=>e.includes("Brush");let Cne=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),IMe(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}},lE;function TMe(){return lE||(lE=MMe()),lE}let $Me=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}};function EMe(e){if(typeof WebGL2RenderingContext>"u")return null;const t=document.createElement("canvas");if(!t)return null;let i=t.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(i==null&&(i=t.getContext("webgl2"),i!=null&&(e.majorPerformanceCaveat=!0)),i==null)return i;e.available=!0,e.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return r&&(e.supportsHighPrecisionFragment=r.precision>0),i}function MMe(){const e=new $Me,t=EMe(e);return t==null||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function AMe(e){const t=TMe();return t.available?e==="3d"&&t.majorPerformanceCaveat?new ne("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new ne("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new ne("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new ne("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function CMe(e){return e&&"nodeType"in e}function kMe(e){return e&&typeof e.render=="function"}const lU={component:"esri-component"};let cf=class extends Ve{constructor(){super(...arguments),this.widget=null}destroy(){var t;this.node=null,(t=this.widget)==null||t.destroy()}get id(){var t,i;return this._get("id")??((t=this.widget)==null?void 0:t.id)??((i=this.node)==null?void 0:i.id)}set id(t){this._set("id",t)}set node(t){const i=this._get("node");t!==i&&(t&&t.classList.add(lU.component),i&&i.classList.remove(lU.component),this._set("node",t))}castNode(t){var i;return(i=this.widget)==null||i.destroy(),t?typeof t=="string"||CMe(t)?(this._set("widget",null),ZO(t)):(kMe(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};m([w()],cf.prototype,"id",null),m([w()],cf.prototype,"node",null),m([wt("node")],cf.prototype,"castNode",null),m([w({readOnly:!0})],cf.prototype,"widget",void 0),cf=m([H("esri.views.ui.Component")],cf);const B5=cf,kne="calcite-mode-";function LMe(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function UR(){return LMe().startsWith("dark")}function OMe(){return`${kne}${UR()?"dark":"light"}`}function RMe(e){PMe(e),e.classList.add(OMe())}function PMe(e){Array.from(e.classList).forEach(t=>{t.startsWith(kne)&&e.classList.remove(t)})}const NMe={left:0,top:0,bottom:0,right:0},Lne={bottom:30,top:15,right:15,left:15},Hu="esri-ui",Fs={ui:Hu,corner:`${Hu}-corner`,innerContainer:`${Hu}-inner-container`,manualContainer:`${Hu}-manual-container`,cornerContainer:`${Hu}-corner-container`,topLeft:`${Hu}-top-left`,topRight:`${Hu}-top-right`,bottomLeft:`${Hu}-bottom-left`,bottomRight:`${Hu}-bottom-right`};function FMe(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function Y_(e){return e===0?"0":`${e}px`}function uE(e){const t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function cE(e,{top:t,bottom:i,left:r,right:n}){e.style.top=t,e.style.bottom=i,e.style.left=r,e.style.right=n}let Xl=class extends qo.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=ps(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&cE(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&cE(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([ge(()=>{var t;return[(t=this.view)==null?void 0:t.padding,this.container]},this._applyViewPadding,qe),ge(()=>this.padding,this._applyUIPadding,qe),ge(()=>[this.container,this._locale],([t,i])=>{t&&t.setAttribute("lang",i)},qe),g3(t=>{this._locale=t})])}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._componentMap.clear()}set container(t){const i=this._get("container");t!==i&&(t&&(t.classList.add(Fs.ui),RMe(t),this._attachContainers(t)),i&&(i.classList.remove(Fs.ui),cE(i,{top:"",bottom:"",left:"",right:""}),i.textContent=""),this._set("container",t))}get height(){var o;const t=((o=this.view)==null?void 0:o.height)??0;if(t===0)return t;const i=this._getViewPadding(),{top:r,bottom:n}=i;return Math.max(t-r-n,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return typeof t=="number"?{bottom:t,top:t,right:t,left:t}:{...Lne,...t}}get width(){var o;const t=((o=this.view)==null?void 0:o.width)??0;if(t===0)return t;const i=this._getViewPadding(),{left:r,right:n}=i;return Math.max(t-r-n,0)}add(t,i){let r,n,o;if(Array.isArray(t))return void t.forEach(y=>this.add(y,i));const c=uE(t);c&&({index:r,position:i,component:t,key:n}=c),i&&typeof i=="object"&&({index:r,key:n,position:i,internal:o}=i),!t||i&&!this._isValidPosition(i)||this._add(t,i,r,n,o)}remove(t,i){var n,o;if(!t)return;if(Array.isArray(t))return t.map(c=>this.remove(c,i));const r=this._find(t);if(r){if(this._componentMap.has(r)&&((n=this._componentMap.get(r))==null?void 0:n.key)!==i)return;const c=this._components.indexOf(r),y=r.node.parentNode;return y==null||y.removeChild(r.node),this._componentMap.delete(r),(o=r.widget)==null||o.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(c,1)[0]}}empty(t,i={removeInternal:!1}){if(Array.isArray(t)){for(const o of t)this.empty(o,i);return}const r=this._positionNameToContainerLookup[t??"manual"],n=Array.prototype.slice.call(r.children).map(o=>this._findByNode(o)).filter(o=>{var c;return o==null?!1:!(((c=this._componentMap.get(o))==null?void 0:c.internal)??!1)||i.removeInternal});for(const o of n)this.remove(o)}move(t,i){if(Array.isArray(t)&&t.forEach(c=>this.move(c,i)),!t)return;let r;const n=uE(t)||uE(i);if(n&&(r=n.index,i=n.position,t=n.component||t),i&&!this._isValidPosition(i))return;const o=this.remove(t);o&&this.add(o,{position:i,index:r})}find(t){if(!t)return null;const i=this._findById(t);return i&&(i.widget||i.node)}getComponents(t,i={includeInternal:!1}){return t?Array.isArray(t)?t.flatMap(r=>this._getComponentsAtPosition(r,i)):this._getComponentsAtPosition(t,i):this._components.filter(r=>{var n;return i.includeInternal||!((n=this._componentMap.get(r))!=null&&n.internal)}).map(({widget:r,node:n})=>r??n)}getPosition(t){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(t))return i;return null}_add(t,i,r,n,o){t instanceof B5||(t=new B5({node:t}));const{widget:c}=t;c!=null&&c instanceof Ve&&c.addHandles(ei(()=>{queueMicrotask(()=>this.remove(t))}),this._removeWidgetHandleKey),this._place({component:t,position:i,index:r}),this._components.push(t),this._componentMap.set(t,{key:n,internal:o})}_find(t){return t?t instanceof B5?this._findByComponent(t):typeof t=="string"?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){var t;return((t=this.view)==null?void 0:t.padding)??NMe}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){const t=document.createElement("div");t.classList.add(Fs.innerContainer,Fs.cornerContainer);const i=document.createElement("div");i.classList.add(Fs.innerContainer,Fs.manualContainer);const r=document.createElement("div");r.classList.add(Fs.topLeft,Fs.corner),t.appendChild(r);const n=document.createElement("div");n.classList.add(Fs.topRight,Fs.corner),t.appendChild(n);const o=document.createElement("div");o.classList.add(Fs.bottomLeft,Fs.corner),t.appendChild(o);const c=document.createElement("div");c.classList.add(Fs.bottomRight,Fs.corner),t.appendChild(c),this._innerContainer=t,this._manualContainer=i;const y=Po();this._cornerNameToContainerLookup={"top-left":r,"top-right":n,"bottom-left":o,"bottom-right":c,"top-leading":y?n:r,"top-trailing":y?r:n,"bottom-leading":y?c:o,"bottom-trailing":y?o:c},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){var _,I;const i=t.position??"manual",{component:r,index:n}=t,o=this._positionNameToContainerLookup[i],c=n!=null&&n>-1;if(FMe(r.widget)&&r.widget.startup(),!c)return void o.appendChild(r.node);const y=Array.from(o.children);if(n===0){const{firstChild:$}=o;return void($?(_=$.parentNode)==null?void 0:_.insertBefore(r.node,$):o.appendChild(r.node))}if(n>=y.length)return void o.appendChild(r.node);const v=y[n];(I=v.parentNode)==null||I.insertBefore(r.node,v)}_toPixelPosition(t){return{top:Y_(t.top),left:Y_(t.left),right:Y_(t.right),bottom:Y_(t.bottom)}}_findByComponent(t){return this._components.find(i=>i===t)??null}_findById(t){return this._components.find(({id:i})=>i===t)??null}_findByNode(t){return this._components.find(({node:i})=>i===t)??null}_getComponentsAtPosition(t,i){const r=this._positionNameToContainerLookup[t];return Array.prototype.slice.call(r.children).map(n=>this._findByNode(n)).filter(Ar).filter(n=>{var o;return i.includeInternal||!((o=this._componentMap.get(n))!=null&&o.internal)}).map(({widget:n,node:o})=>n??o)}};m([w()],Xl.prototype,"_locale",void 0),m([w()],Xl.prototype,"container",null),m([w()],Xl.prototype,"height",null),m([w({value:Lne})],Xl.prototype,"padding",null),m([wt("padding")],Xl.prototype,"castPadding",null),m([w()],Xl.prototype,"view",void 0),m([w()],Xl.prototype,"width",null),Xl=m([H("esri.views.ui.UI")],Xl);const DMe=Xl,jMe="randomUUID"in crypto;function BR(){if(jMe)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=i=>e[i].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function QQe(){return`{${BR().toUpperCase()}}`}function zMe(){return`{${BR()}}`}function VMe(e){const t=e.toUpperCase();return e[0]!=="{"?`{${t}}`:t}const UMe={handleInterceptedEvent:(e,t,i,r)=>(e.scheduleRender(),t.properties[`on${r.type}`].apply(t.properties.bind||i,[r]))},BMe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}},GMe=e=>({...BMe,...e}),qMe=(e,t)=>{const i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i},HMe=(e,t)=>e.find(t),uU=(e,t,i=!1)=>{let r=e;return t.forEach((n,o)=>{const c=r!=null&&r.children?HMe(r.children,y=>y.domNode===n):void 0;i&&!c&&o!==t.length-1||(r=c)}),r},WMe=e=>{let t;const i={...UMe,...e},r=GMe(i),n=r.performanceLogger;let o,c=!0,y=!1;const v=[],_=[],I=(A,k,R)=>{var j;let N;r.eventHandlerInterceptor=(z,U,W,Q)=>function(K){let ee;n("domEvent",K);const ie=qMe(K.currentTarget,N.domNode),ae=ie.some(Ie=>{var Ae;return customElements.get((Ae=Ie==null?void 0:Ie.tagName)==null?void 0:Ae.toLowerCase())});if(K.eventPhase===Event.CAPTURING_PHASE||!ae)ie.reverse(),ee=uU(N.getLastRender(),ie);else{const Ie=K.composedPath(),Ae=Ie.slice(Ie.indexOf(K.currentTarget),Ie.indexOf(N.domNode)).reverse();ee=uU(N.getLastRender(),Ae,!0)}let ue;return ee&&(ue=i.handleInterceptedEvent(t,ee,this,K)),n("domEventProcessed",K),ue},(j=i.postProcessProjectionOptions)==null||j.call(i,r);const D=R();N=A(k,D,r),r.eventHandlerInterceptor=void 0,v.push(N),_.push(R),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(N,D)};let $=()=>{if(o=void 0,c){c=!1,n("renderStart",void 0);for(let A=0;A<v.length;A++){const k=_[A]();n("rendered",void 0);try{v[A].update(k)}catch(R){console.error(R)}n("patched",void 0)}n("renderDone",void 0),c=!0}};return i.modifyDoRenderImplementation&&($=i.modifyDoRenderImplementation($,v,_)),t={renderNow:$,scheduleRender:()=>{o||y||(o=requestAnimationFrame($))},stop:()=>{o&&(cancelAnimationFrame(o),o=void 0),y=!0},resume:()=>{y=!1,c=!0,t.scheduleRender()},append:(A,k)=>{I(Md.append,A,k)},insertBefore:(A,k)=>{I(Md.insertBefore,A,k)},merge:(A,k)=>{I(Md.merge,A,k)},replace:(A,k)=>{I(Md.replace,A,k)},detach:A=>{for(let k=0;k<_.length;k++)if(_[k]===A)return _.splice(k,1),v.splice(k,1)[0];throw new Error("renderFunction was not found")}},t};let One;function JMe(){try{PL(".")}catch{wZ(Xs(jt(One)))}}function Vn(e){var i;const t=[];for(const r of Object.keys(e))customElements.get(`calcite-${r}`)||t.push((i=e[r])==null?void 0:i.call(e));return t.length>0?Promise.all(t):null}One="components/assets";const Rne=Symbol("widget"),Pne=Symbol("widget-test-data"),ZMe=[],KMe={},p4=new WeakMap;function Nne(e,t){let i=t.children;if(i!=null&&i.length)for(let n=0;n<i.length;++n)i[n]=Nne(e,i[n]);else i=ZMe;const r=t.vnodeSelector;if(f4(r)){const n=t.properties||KMe,o=n.key||r,c={key:o,afterCreate:YMe,afterUpdate:XMe,afterRemoved:Fne,parentWidget:e,widgetConstructor:r,widgetProperties:{...n,key:o,children:i}};return{vnodeSelector:r.vnodeSelector,properties:c,children:void 0,text:void 0,domNode:null}}return t}function YMe(e,t,i,{parentWidget:r,widgetConstructor:n,widgetProperties:o}){var y;const c=new n(o);c.container=e,p4.set(e,c),(y=c.afterCreate)==null||y.call(c,c,e),r.addHandles(ei(()=>Fne(e))),queueMicrotask(()=>{c[Pne].projector.renderNow()})}function XMe(e,t,i,{widgetProperties:r}){var o;const n=p4.get(e);n&&(n.set(r),(o=n.afterUpdate)==null||o.call(n,n,e))}function Fne(e){var i;const t=p4.get(e);t&&((i=t.afterRemoved)==null||i.call(t,t,e),t.destroy(),p4.delete(e))}function f4(e){return typeof e=="function"&&e[Rne]}const cU=new Set;function QMe(e){cU.add(e),e.finally(()=>cU.delete(e))}var Dne;const eAe="esri.widgets.Widget";let tAe=0;function jne(e,t){const i=Object.prototype.hasOwnProperty;for(const r in t)i.call(t,r)&&i.call(e,r)&&(e[r]!=null&&t[r]!=null&&typeof e[r]=="object"&&typeof t[r]=="object"?jne(e[r],t[r]):e[r]=t[r]);return e}const iAe=WMe({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,i=/capture$/i;e.eventHandlerInterceptor=(r,n,o,c)=>{const y=t==null?void 0:t(r,n,o,c),v=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in o)||v){const _=r[2].toLowerCase()+r.slice(3),I=k=>y==null?void 0:y.call(o,k);o.addEventListener(_,I,v);const $=()=>o.removeEventListener(_,I,v),A=c.afterRemoved;c.afterRemoved=k=>{A==null||A(k),$()}}return y}},handleInterceptedEvent(e,t,i,r){const{eventPhase:n,type:o}=r,c=n===Event.CAPTURING_PHASE;let y=`on${o}${c?"capture":""}`;const v=t.properties;(v&&y in v||(y=`on${o[0].toUpperCase()}${o.slice(1)}${c?"Capture":""}`,v&&y in v))&&(Lee(),e.scheduleRender(),v[y].call(v.bind||i,r))}});let hE=!1,Pr=class extends x3(qo.EventedAccessor){constructor(t,i){super(t,i),this._attached=!1,this._projector=iAe,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=_l(async()=>{var v;if((v=this._messageBundleProps)!=null&&v.length){const _=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:I,propertyName:$})=>{if(this.destroyed)return;let A=await _3(I);this.uiStrings&&Object.keys(this.uiStrings)&&(A=jne(le(A),this.uiStrings)),this[$]=A}));if(this.destroyed)return;for(const I of _)I.status==="rejected"&&_e.getLogger(this).error("widget-intl:locale-error",this.declaredClass,I.reason)}await this.loadLocale()}),JMe();const r="esri-widget-uid-"+BR(),n=this.render.bind(this);this._trackingTarget=new uI(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const o=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),c=()=>{var $,A;if(!this._readyForTrueRender||this.destroyed)return null;const v=n()??o(),_=v.properties??(v.properties={});if(_.key??(_.key=r),f4(v.vnodeSelector)){if(!this.visible)return o()}else this.visible?_.styles||(_.styles={}):(_.class="",_.styles={display:"none"}),($=_.styles).display??($.display="");let I=0;return(A=v.children)==null||A.forEach(k=>{var R;f4(k.vnodeSelector)||(k.properties??(k.properties={}),(R=k.properties).key??(R.key=`${this.id}--${I++}`))}),Nne(this,v)};this.render=()=>{if(hE)return c();let v=q3e(this)??null;if(v)return v;this._trackingTarget.clear(),hE=!0;try{v=Yc(this._trackingTarget,c)}catch(_){throw _e.getLogger(this).error(_),_}finally{hE=!1}return v&&H3e(this,v),v};const y=this.beforeFirstRender();y?this._resourcesFetch=y.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),QMe(this._resourcesFetch)}normalizeCtorArgs(t,i){const r={...t};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){var i;const t=this.loadDependencies();return(i=this._messageBundleProps)!=null&&i.length||t?Promise.all([t,this._loadLocale()]).then(()=>{}).catch(xM):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(ci(this._trackingTarget),ci(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,C$(this))}set container(t){this._get("container")||this._set("container",t)}castContainer(t){return ZO(t)}get domNode(){return this.container}set domNode(t){this.container=t}get icon(){return null}set icon(t){this._overrideIfSome("icon",t)}get id(){var t;return this._get("id")||((t=this.container)==null?void 0:t.id)||Date.now().toString(16)+"-widget-"+tAe++}set id(t){t&&this._set("id",t)}get label(){return this.declaredClass.split(".").pop()}set label(t){this._overrideIfSome("label",t)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(t){this._set("visible",t)}get[(Dne=Rne,Pne)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(C$(this),this._projector.scheduleRender())}own(t){jK(_e.getLogger(this),"`Widget.own()` is deprecated in favor of 'Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(t)}classes(...t){return s1.apply(this,t)}renderNow(){C$(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this.addHandles(ge(()=>this.viewModel,(r,n)=>{n&&this.removeHandles("delegated-events"),r&&aI(r)&&this.addHandles(this._delegatedEventNames.map(o=>d3(r,o,c=>{this.emit(o,c)})),"delegated-events")},Lo)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(xM),this.scheduleRender()};this.addHandles([g3(t),ge(()=>this.uiStrings,t),en(()=>this.container,r=>{this.destroyed||this._attach(r)},{initial:!0,once:!0})])}_attach(t){t&&(this._projector.merge(t,this.render),this._attached=!0)}_detach(t){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=t==null?void 0:t.parentNode)==null||i.removeChild(t)}};Pr[Dne]=!0,Pr.vnodeSelector="div",m([w()],Pr.prototype,"_readyForTrueRender",void 0),m([w({value:null})],Pr.prototype,"container",null),m([wt("container")],Pr.prototype,"castContainer",null),m([w()],Pr.prototype,"icon",null),m([w()],Pr.prototype,"id",null),m([w()],Pr.prototype,"label",null),m([w()],Pr.prototype,"renderable",null),m([w()],Pr.prototype,"uiStrings",void 0),m([w()],Pr.prototype,"viewModel",void 0),m([w({value:!0})],Pr.prototype,"visible",null),m([w()],Pr.prototype,"key",void 0),m([w()],Pr.prototype,"children",void 0),m([w()],Pr.prototype,"afterCreate",void 0),m([w()],Pr.prototype,"afterUpdate",void 0),m([w()],Pr.prototype,"afterRemoved",void 0),Pr=m([H(eAe)],Pr);const yi=Pr,rAe=new Map;function nAe(e){return rAe.get(e)}function hU(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function sAe(e,t){return e.length!==t.length||e.some((i,r)=>i.text!==t[r].text)}function Lv(e,t,i){!i||!t||e.find(r=>r.layerView===t&&r.text===i)||e.push({text:i,layerView:t})}function oAe(e){return e.type==="bing-maps"}const Wu=[];let tm=class extends Ve{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Oe,this.view=null,this._allLayerViewsChange=i=>{var n;this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const r=(n=this.view)==null?void 0:n.allLayerViews;r&&(this.addHandles(r.map(o=>ge(()=>{var c;return[o.suspended,(c=o.layer)==null?void 0:c.attributionVisible]},()=>this._updateAttributionItems())).toArray(),"suspension"),r.forEach(o=>{o.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(o.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),i!=null&&i.removed&&i.removed.forEach(o=>{this._pendingAttributions.delete(o),this._fetchedAttributionData.delete(o)}),this._updateAttributionItems()},this.addHandles([tn(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),en(()=>{var i;return((i=this.view)==null?void 0:i.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var t;return(t=this.view)!=null&&t.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const t=this.view,i=t==null?void 0:t.allLayerViews;if(Wu.length=0,!t||!i)return void this._clear();i.forEach(n=>{var y,v;if(n.suspended||!((y=n.layer)!=null&&y.attributionVisible))return;const o=n.layer;if(hU(o,"user"))return void Lv(Wu,n,o.copyright);if(o.hasAttributionData){if(this._fetchedAttributionData.has(n)){const _=this._fetchedAttributionData.get(n);return void(_?Lv(Wu,n,this._getDynamicAttribution(_,t,o)):hU(o)&&Lv(Wu,n,o.copyright))}return void this._fetchAttributionData(n)}const c="portalItem"in o?(v=o.portalItem)==null?void 0:v.accessInformation:void 0;Lv(Wu,n,c||o.copyright)});const r=i.find(n=>{var o;return((o=n.layer)==null?void 0:o.type)==="integrated-mesh-3dtiles"});if(this.view&&r){const n=nAe(this.view);if(n){const o=n.getAttributionText();for(let c=0;c<o.length;++c)Lv(Wu,r,o[c])}}sAe(this.items,Wu)&&(this.items.removeAll(),this.items.addMany(Wu)),Wu.length=0,this.notifyChange("state")}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const i=await vI(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const r=i.ok?this._createContributionIndex(i.value,oAe(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,r)}this._updateAttributionItems()}_createContributionIndex(t,i){const r=t.contributors,n={};if(!r)return n;for(let o=0;o<r.length;o++){const c=r[o],y=c.coverageAreas;if(!y)return;for(const v of y){const _=v.bbox,I=v.zoomMin-(i&&v.zoomMin?1:0),$=v.zoomMax-(i&&v.zoomMax?1:0),A=new Ut({xmin:_[1],ymin:_[0],xmax:_[3],ymax:_[2],spatialReference:rt.WGS84}),k={extent:Au(A),attribution:c.attribution||"",score:v.score!=null?v.score:100,id:o};for(let R=I;R<=$;R++)n[R]??(n[R]=[]),n[R].push(k)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(t,i,r){var I;const{extent:n,scale:o}=i;let c=((I=r.tileInfo)==null?void 0:I.scaleToZoom(o))??0;if(c=Math.min(t.maxKey??0,Math.round(c)),!n||c==null||c<=-1)return"";const y=t[c],v=yI(n.center.clone().normalize(),rt.WebMercator),_=new Set;return y?y.filter($=>{const A=$.id,k=!_.has(A)&&v&&$.extent&&m3($.extent,v);return k&&_.add(A),k}).sort(($,A)=>A.score-$.score||$.objectId-A.objectId).map($=>$.attribution).join(", "):""}};m([w({readOnly:!0,type:Oe})],tm.prototype,"items",void 0),m([w({readOnly:!0})],tm.prototype,"state",null),m([w()],tm.prototype,"view",void 0),tm=m([H("esri.widgets.Attribution.AttributionViewModel")],tm);const zne=tm,ze={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"};function y4(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:lAe(e[t])}}}function aAe(e){const t=e==null?void 0:e.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function lAe(e){return function(t,...i){aAe(t)?Ree(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...i)}}function Ht(e){return(t,i)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:i})}}var uAe=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},Vne=function(e,t){for(var i=0,r=e.length;i<r;i++){var n=e[i];Array.isArray(n)?Vne(n,t):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=uAe(n)),t.push(n))}},cAe=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:i[0],domNode:null};var n=[];return Vne(i,n),{vnodeSelector:e,properties:t||void 0,children:n,text:void 0,domNode:null}};function B(e,t,...i){return typeof e!="function"||f4(e)?cAe(e,t,...i):e(t,...i)}function Une(...e){return e}const yy="esri-attribution",my={base:yy,poweredBy:`${yy}__powered-by`,sources:`${yy}__sources`,open:`${yy}--open`,sourcesOpen:`${yy}__sources--open`,link:`${yy}__link`};let xs=class extends yi{constructor(t,i){super(t,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(r=>r.forEach(({target:n})=>this._checkSourceTextOverflow(n))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new zne}initialize(){this.addHandles(tn(()=>{var t;return(t=this.viewModel)==null?void 0:t.items},"change",()=>this.scheduleRender()))}destroy(){var t;(t=this._resizeObserver)==null||t.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((t,i)=>(t.includes(i.text)||t.push(i.text),t),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t={[my.open]:this._isOpen};return B("div",{bind:this,class:this.classes(my.base,ze.widget,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return B("div",{class:my.poweredBy},"Powered by"," ",B("a",{class:my.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const t=this._isOpen,i=this._isInteractive,r=i?0:void 0,{attributionText:n}=this,o={[my.sourcesOpen]:t,[ze.interactive]:i};return B("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(my.sources,o),innerHTML:n,tabIndex:r})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let i=!1;const{clientHeight:r,clientWidth:n,scrollWidth:o}=t,c=o>n,y=this._attributionTextOverflowed!==c;if(this._attributionTextOverflowed=c,y&&(i=!0),this._isOpen){const v=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,v&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};m([w()],xs.prototype,"_isOpen",void 0),m([w()],xs.prototype,"_isInteractive",null),m([w()],xs.prototype,"_attributionTextOverflowed",void 0),m([w()],xs.prototype,"_prevSourceNodeHeight",void 0),m([w({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],xs.prototype,"attributionText",null),m([w()],xs.prototype,"icon",null),m([w()],xs.prototype,"itemDelimiter",void 0),m([w()],xs.prototype,"label",null),m([w(),Ht("esri/widgets/Attribution/t9n/Attribution")],xs.prototype,"messages",void 0),m([w()],xs.prototype,"view",null),m([w({type:zne})],xs.prototype,"viewModel",void 0),m([y4()],xs.prototype,"_toggleState",null),xs=m([H("esri.widgets.Attribution")],xs);const hAe=xs;function dAe(){const e=we("mapview-essential-goto-duration");return e==null?e:e}function pAe(e){var t,i;return((t=e==null?void 0:e.spatialReference)==null?void 0:t.isWebMercator)||((i=e==null?void 0:e.spatialReference)==null?void 0:i.isGeographic)||!1}const sT=e=>{let t=class extends e{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return h3(r),this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return m([w()],t.prototype,"goToOverride",void 0),m([w()],t.prototype,"view",void 0),t=m([H("esri.widgets.support.GoTo")],t),t};let hf=class extends sT(Ve){constructor(t){super(t),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(ge(()=>this.view,this._updateRotationWatcher,qe))}destroy(){this.view=null}get canShowNorth(){return pAe(this.view)}get state(){var t;return!((t=this.view)!=null&&t.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var t,i;(t=this.view)!=null&&t.ready&&(((i=this.view)==null?void 0:i.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:dAe()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(t){t!=null&&this._set("orientation",{z:t})}_updateForCamera(t){if(!t)return;const i=-t.heading;this._set("orientation",{x:0,y:0,z:i})}_updateRotationWatcher(t){this.removeAllHandles(),t&&this.addHandles(t.type==="2d"?ge(()=>t==null?void 0:t.rotation,this._updateForRotation,qe):ge(()=>t==null?void 0:t.camera,this._updateForCamera,qe))}};m([w({readOnly:!0})],hf.prototype,"canShowNorth",null),m([w({readOnly:!0})],hf.prototype,"orientation",void 0),m([w({readOnly:!0})],hf.prototype,"state",null),m([w()],hf.prototype,"view",void 0),hf=m([H("esri.widgets.Compass.CompassViewModel")],hf);const Bne=hf,dU="esri-compass",pU={base:dU,iconContainer:`${dU}__icon-container`};let uc=class extends yi{constructor(t,i){super(t,i),this.messages=null,this.viewModel=new Bne,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return Vn({button:()=>de(()=>import("./calcite-button-D1yBd9JN.js"),__vite__mapDeps([194,195]),import.meta.url),icon:()=>de(()=>import("./calcite-icon-D67BMpQP.js"),[],import.meta.url)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:i}=this.viewModel,{messages:r}=this;return B("div",{class:this.classes(pU.base,ze.widget)},B("calcite-button",{class:ze.widgetButton,disabled:i==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},B("div",{"aria-hidden":"true",class:pU.iconContainer,title:r.reset},B("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(t)}))))}};m([w()],uc.prototype,"goToOverride",null),m([w()],uc.prototype,"icon",null),m([w()],uc.prototype,"label",null),m([w(),Ht("esri/widgets/Compass/t9n/Compass")],uc.prototype,"messages",void 0),m([w()],uc.prototype,"view",null),m([w({type:Bne})],uc.prototype,"viewModel",void 0),uc=m([H("esri.widgets.Compass")],uc);const fAe=uc,fU="esri-navigation-toggle",yU={base:fU,isLayoutHorizontal:`${fU}--horizontal`};let im=class extends Ve{constructor(t){super(t),this._navigationMode="pan",this.view=null}initialize(){this.addHandles(en(()=>{var t;return(t=this.view)==null?void 0:t.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var t,i;return(t=this.view)!=null&&t.ready&&((i=this.view)==null?void 0:i.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(t){this._navigationMode=t,this._setNavigationMode()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_setNavigationMode(){var i;const t=(i=this.view)==null?void 0:i.inputManager;t&&(t.primaryDragAction=this._navigationMode==="pan"?"pan":"rotate")}};m([w({readOnly:!0})],im.prototype,"state",null),m([w()],im.prototype,"_navigationMode",void 0),m([w()],im.prototype,"view",void 0),im=m([H("esri.widgets.NavigationToggle.NavigationToggleViewModel")],im);const Gne=im;let cc=class extends yi{constructor(t,i){super(t,i),this.messages=null,this.viewModel=new Gne,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var n;const r=((n=this.viewModel)==null?void 0:n.navigationMode)==="pan"?this._rotateButton:this._panButton;N1(r),this.toggle()}}loadDependencies(){return Vn({button:()=>de(()=>import("./calcite-button-D1yBd9JN.js"),__vite__mapDeps([194,195]),import.meta.url)})}get icon(){return"move"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){var n,o;const t=((n=this.viewModel)==null?void 0:n.state)==="disabled",i=((o=this.viewModel)==null?void 0:o.navigationMode)==="pan",r=this.messages.toggle;return B("div",{class:this.classes(yU.base,ze.widget,{[yU.isLayoutHorizontal]:this.layout==="horizontal"})},B("calcite-button",{afterCreate:c=>{this._panButton=c},appearance:i?"outline-fill":"solid",class:ze.widgetButton,disabled:t,iconStart:"move",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?void 0:-1,title:r}),B("calcite-button",{afterCreate:c=>{this._rotateButton=c},appearance:i?"solid":"outline-fill",class:ze.widgetButton,disabled:t,iconStart:"rotate",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?-1:void 0,title:r}))}};m([w()],cc.prototype,"icon",null),m([w()],cc.prototype,"label",null),m([w({value:"vertical"})],cc.prototype,"layout",null),m([w(),Ht("esri/widgets/NavigationToggle/t9n/NavigationToggle")],cc.prototype,"messages",void 0),m([w()],cc.prototype,"view",null),m([w({type:Gne})],cc.prototype,"viewModel",void 0),cc=m([H("esri.widgets.NavigationToggle")],cc);const yAe=cc;let df=class extends Ve{get canZoomIn(){var r,n,o;if(!((r=this.view)==null?void 0:r.ready))return!1;const i=(o=(n=this.view)==null?void 0:n.constraints)==null?void 0:o.effectiveMaxScale;return i===0||this._scale>i}get canZoomOut(){var n;const{view:t}=this;if(!(t==null?void 0:t.ready))return!1;const r=(n=t.constraints)==null?void 0:n.effectiveMinScale;return r===0||this._scale<r}get _scale(){var i,r,n;const t=(r=(i=this.view)==null?void 0:i.animation)==null?void 0:r.target;return(t&&"then"in t||t==null?void 0:t.scale)??((n=this.view)==null?void 0:n.scale)??0}};m([w({readOnly:!0})],df.prototype,"canZoomIn",null),m([w({readOnly:!0})],df.prototype,"canZoomOut",null),m([w()],df.prototype,"view",void 0),m([w()],df.prototype,"_scale",null),df=m([H("esri.widgets.Zoom.ZoomConditions2D")],df);const mAe=df;let rm=class extends Ve{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};m([w({readOnly:!0})],rm.prototype,"canZoomIn",null),m([w({readOnly:!0})],rm.prototype,"canZoomOut",null),m([w()],rm.prototype,"view",void 0),rm=m([H("esri.widgets.Zoom.ZoomConditions3D")],rm);const gAe=rm;let Uh=class extends Ve{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var t;return this._zoomConditions!=null&&((t=this._zoomConditions)==null?void 0:t.canZoomOut)}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}set view(t){t?t.type==="2d"?this._zoomConditions=new mAe({view:t}):t.type==="3d"&&(this._zoomConditions=new gAe({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){if(!this.canZoomIn)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomIn():xa(t.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomOut():xa(t.goTo({zoomFactor:.5}))}};m([w()],Uh.prototype,"_zoomConditions",void 0),m([w()],Uh.prototype,"canZoomIn",null),m([w()],Uh.prototype,"canZoomOut",null),m([w({readOnly:!0})],Uh.prototype,"state",null),m([w()],Uh.prototype,"view",null),Uh=m([H("esri.widgets.Zoom.ZoomViewModel")],Uh);const qne=Uh,mU={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let hc=class extends yi{constructor(t,i){super(t,i),this.messages=null,this.viewModel=new qne,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return Vn({button:()=>de(()=>import("./calcite-button-D1yBd9JN.js"),__vite__mapDeps([194,195]),import.meta.url)})}get icon(){return"magnifying-glass-plus"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){const t={[mU.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=this.viewModel,{zoomIn:n,zoomOut:o}=this.messages;return B("div",{class:this.classes(mU.base,ze.widget,t)},B("calcite-button",{class:ze.widgetButton,disabled:!i,iconStart:"plus",kind:"neutral",label:n,onclick:this.zoomIn,title:n}),B("calcite-button",{class:ze.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:o,onclick:this.zoomOut,title:o}))}};m([w()],hc.prototype,"icon",null),m([w()],hc.prototype,"label",null),m([w({value:"vertical"})],hc.prototype,"layout",null),m([w(),Ht("esri/widgets/Zoom/t9n/Zoom")],hc.prototype,"messages",void 0),m([w()],hc.prototype,"view",null),m([w({type:qne})],hc.prototype,"viewModel",void 0),hc=m([H("esri.widgets.Zoom")],hc);const vAe=hc;function wAe(e){return(e==null?void 0:e.view)!==void 0}let G5=class extends DMe{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(r=>{const n=this._find(r),o=n==null?void 0:n.widget;wAe(o)&&(o.view=i)})},this._componentsWatcher=(i,r)=>{this._removeComponents(r),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([ge(()=>this.components,this._componentsWatcher,qe),ge(()=>this.view,this._updateViewAwareWidgets,qe)])}_add(t,i,r,n,o){let c=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;c=this._createComponent(t)}super._add(c,i,r,n,o)}_removeComponents(t){t.forEach(i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())})}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(t){this.constructed&&t.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(t){const i=this._createWidget(t);return new B5({id:t,node:i})}_createWidget(t){const i=this.view;switch(t){case"attribution":return new hAe({view:i});case"compass":return new fAe({view:i});case"navigation-toggle":return new yAe({view:i});case"zoom":return new vAe({view:i})}}};m([w()],G5.prototype,"components",void 0),G5=m([H("esri.views.ui.DefaultUI")],G5);const Hne=G5;let q5=class extends Hne{constructor(t){super(t),this.components=["attribution","zoom"]}};m([w()],q5.prototype,"components",void 0),q5=m([H("esri.views.ui.2d.DefaultUI2D")],q5);const Wne=q5;let Jne=class w7{constructor(t,i,r=""){this.major=t,this.minor=i,this._context=r}lessThan(t,i){return this.major<t||t===this.major&&this.minor<i}greaterEqual(t,i){return!this.lessThan(t,i)}validate(t){if(this.major!==t.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new ne(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new w7(this.major,this.minor,this._context)}static parse(t,i=""){const[r,n]=t.split("."),o=/^\s*\d+\s*$/;if(!(r!=null&&r.match)||!o.test(r))throw new ne((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!(n!=null&&n.match)||!o.test(n))throw new ne((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const c=parseInt(r,10),y=parseInt(n,10);return new w7(c,y,i)}},z1=class extends Jne{constructor(t,i){super(t,i,"webmap")}};function dE(e){return e!=null&&typeof e=="object"&&"declaredClass"in e&&e.declaredClass==="esri.WebMap"}const Zne=new z1(2,32);var b7;let H5=b7=class extends be{constructor(e){super(e),this.color=new je([0,0,0,1])}clone(){return new b7(le({color:this.color}))}};m([w({type:je,json:{write:!0}})],H5.prototype,"color",void 0),H5=b7=m([H("esri.webmap.background.ColorBackground")],H5);const oT=H5;let Kne,Yne,Xne,Qne,ese,tse,ise;async function bAe(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:r,MagnifierView2D:n,GridView2D:o,Stage:c}]=await Promise.all([de(()=>import("./webglDeps-B2ljvO3v.js"),__vite__mapDeps([128,55,54,112,129,114]),import.meta.url),de(()=>import("./mapViewDeps-D6IMO78u.js"),__vite__mapDeps([130,59,131,57,58,60,61,56,62,63,26,54,55,53,32,114,68,132,129,76,133,102,101,67,10,134,93,65,66,100,128,112,135,71,136,52,13,14,6,137,109,108,95,111,138,139,140,69,64,141,142,143,144,145,146,107,147]),import.meta.url)]);Yne=e,Xne=t,Qne=i,ese=r,tse=n,ise=o,Kne=c}let at=class extends X2e(I_e(c_e(D4e))){constructor(t){super(t),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new v2({getCollections:()=>{var i,r;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.goToManager=new z5({view:this}),this.graphicsView=null,this.stateManager=new ts({constraints:new Bre({view:this})}),this.stationaryManager=new Pw,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.frameTask=new F$e(this),this.floors=new Oe,this.grid=null,this.highlights=wne(),this.inputManager=new f6e({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new Cne,this.type="2d",this.view2dType=null,this.ui=new Wne,this.test={takeScreenshot:async i=>bMe(this._getScreenshotView(i),i)},this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([ge(()=>this.viewpoint,()=>this.stationaryManager.flip(),$l),this.on("resize",i=>this.stateManager.resize(i.width,i.height))]),a2e()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=ci(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new S6e(this.featuresTilingScheme)}get constraintsInfo(){var r,n;const t=(r=this.defaultsFromMap)==null?void 0:r.tileInfo,i=this.spatialReference;return{lods:(n=t==null?void 0:t.spatialReference)!=null&&n.equals(i)?t.lods:null,spatialReference:i}}get state(){return this.stateManager.state}get initialExtentRequired(){var y;if(!this.stateManager)return!1;const{scale:t,constraints:i,center:r,viewpoint:n,extent:o}=this;let c=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((y=this.map.initialViewProperties)!=null&&y.viewpoint))&&!o&&(i!=null&&i.effectiveLODs||(c=-1),(!r||t===0&&c===-1)&&((n==null?void 0:n.targetGeometry)==null||n.targetGeometry.type!=="extent"&&!n.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const t=this._getDefaultViewpoint();if(!t)return!1;const i=t.targetGeometry,r=this.spatialReference;return lee(i.spatialReference,r)}set animation(t){const i=this._get("animation");if(t===i)return;if(i&&i.stop(),t!==this.animationManager.animation&&this.animationManager.stop(),!t||t.isFulfilled())return void this._set("animation",null);this._set("animation",t);const r=()=>{var n;this.destroyed||t===this._get("animation")&&(this._set("animation",null),(n=this.frameTask)==null||n.requestFrame())};t.when(r,r)}get background(){return dE(this.map)?this.map.initialViewProperties.background:null}set background(t){this._override("background",t)}get center(){var t;return((t=this.stateManager)==null?void 0:t.center)??null}set center(t){this.stateManager.center=t}get constraints(){var t;return(t=this.stateManager)==null?void 0:t.constraints}set constraints(t){t.view=this;const i=this.stateManager.constraints;this.stateManager.constraints=t,i==null||i.destroy()}get extent(){var t;return((t=this.stateManager)==null?void 0:t.extent)??null}set extent(t){this.stateManager.extent=t}get highlightOptions(){return nMe(this)}set highlightOptions(t){sMe(this,t)}get padding(){var t;return(t=this.stateManager)==null?void 0:t.padding}set padding(t){this.stateManager&&(this.stateManager.padding=t)}get rendering(){var t;return((t=this.stage)==null?void 0:t.renderRequested)??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(t){this.stateManager.resizeAlign=t}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(t){const{rotationEnabled:i}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=t,this.constraints.rotationEnabled=i}get scale(){var t;return((t=this.stateManager)==null?void 0:t.scale)??0}set scale(t){this.stateManager&&(this.stateManager.scale=t)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get tileInfo(){var t;return(t=this.featuresTilingScheme)==null?void 0:t.tileInfo}get updating(){var r,n,o,c;const t=!(!this.magnifier.visible||this.magnifier.position===null||!((r=this._magnifierView)!=null&&r.updatingHandles.updating)),i=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(y=>!y.destroyed&&!("layerViews"in y)&&y.updating===!0)||t);if(we("esri-2d-log-updating")){const y=this.allLayerViews.reduce((v,_)=>({...v,[`${_.layer.id}(${_.layer.type})`]:!_.destroyed&&!("layerViews"in _)&&_.updating}),{});console.log(`Updating MapView: ${i}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(n=this.layerViewManager)==null?void 0:n.updating}
-> labelManager.updating: ${(o=this.labelManager)==null?void 0:o.updating}
-> graphicsView.updating: ${(c=this.graphicsView)==null?void 0:c.updating}
-> allLayerViews: ${JSON.stringify(y)}
-> updatingMagnifier: ${t}
`)}return i}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(t){this.stateManager.viewpoint=t,this.frameTask.requestFrame()}get visibleArea(){const t=this.stateManager.visibleArea;return t&&new Os({rings:[t.map(i=>[i[0],i[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(t){this.stateManager.zoom=t}get navigating(){var t;return((t=this.mapViewNavigation)==null?void 0:t.interacting)??!1}goTo(t,i){return this.goToManager.goTo(t,i)}async hitTest(t,i){return oMe(this,t,i)}async takeScreenshot(t){return wMe(this._getScreenshotView(t),t)}toMap(t){if(!this.ready)return null;const i=Vie(t)?zie(this,t):t;return this.stateManager.toMap(i)}toScreen(t,i){return this.stateManager.toScreen(t,i)}on(t,i,r,n){return this.inputManager&&this.viewEvents.on(t,i,r,n)||super.on(t,i)}hasEventListener(t){return super.hasEventListener(t)||this.viewEvents.hasHandler(t)}whenLayerView(t){return super.whenLayerView(t)}graphicChanged(t){this.graphicsView&&this.graphicsView.graphicUpdateHandler(t)}whenReady(){return new Promise(t=>{this.ready?t(this):this._resolveWhenReady.push(t)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var t;return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||((t=this.defaultsFromMap)==null?void 0:t.spatialReference)||null}getDefaultTimeZone(){return dE(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return dE(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(t){return dV.hasLayerViewModule(t)}importLayerView(t){return dV.importLayerView(t)}pixelSizeAt(){return this.ready?this.resolution:(_e.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(t){var _;const i=this.toMap(t),r=await this.hitTest(t),n=this.allLayerViews.toArray().filter(I=>I.clips.every($=>gne(this,$,t,i))).reverse(),o=new globalThis.Map(n.map(I=>[I.layer.uid,I])),c=[];let y=0,v=0;for(;y<r.results.length||v<n.length;){const I=r.results.at(y);if(I&&I.type!=="graphic"){++y;continue}const $=o.get((_=(I==null?void 0:I.layer)??(I==null?void 0:I.graphic.layer))==null?void 0:_.uid);if((!I||$)&&v<n.length&&n.at(v)!==$){const A=n.at(v);"fetchPopupFeaturesAtLocation"in A&&c.push({mapPoint:i,layerView:A}),++v}else I&&(c.push({graphic:I.graphic,layerView:$}),++y)}return{hits:c,location:i}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let t=AMe(this.type);if(we("safari")&&we("safari")<9&&(t=new ne("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:we("safari")})),t!=null)throw _e.getLogger(this).warn("#validate()",t.message),t}loadAsyncDependencies(){return bAe()}_getDefaultViewpoint(){var D;const{constraints:t,initialExtent:i,map:r,padding:n,size:o}=this;if(!t)return null;const c=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,y=this.stateManager.getUserStartupOptions(this.size),v=c==null?void 0:c.viewpoint,_=((D=v==null?void 0:v.targetGeometry)==null?void 0:D.extent)??i,I=_==null?void 0:_.center,$=(v==null?void 0:v.rotation)??0,A=(v==null?void 0:v.scale)||_&&iT(_,[o[0]-n.left-n.right,o[1]-n.top-n.bottom]),k=y.center??I,R=y.rotation??$,N=y.scale??A;return k&&N?new wn({targetGeometry:k,scale:N,rotation:R}):null}_startup(){var y;this.timeline.begin("MapView Startup");const t=this._getDefaultViewpoint();this.stateManager.startup(t,this.size,this.spatialReference,(y=this.defaultsFromMap.extent)==null?void 0:y.center),this.graphics.owner=this;const i=new Kne(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=i,this._magnifierView=new tse,this._magnifierView.magnifier=this.magnifier,this._gridView=new ise;const r=new Qne({view:this});this._set("labelManager",r);const n=new M$e({view:this});this._set("animationManager",n);const o=new ese({view:this,animationManager:n});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("webgl-error",v=>this.fatalError=v.error),ge(()=>this.stationary,v=>i.stationary=v,Lo),ge(()=>this.background,v=>{i.backgroundColor=v==null?void 0:v.color,this._magnifierView.backgroundColor=v==null?void 0:v.color},Lo),ge(()=>this.magnifier,v=>this._magnifierView.magnifier=v,Lo),ge(()=>this.grid,v=>this._gridView.grid=v,Lo),ge(()=>this.renderingOptions,v=>i.renderingOptions=v,Lo),ge(()=>this.highlights.items.map(v=>({name:v.name,options:{fillColor:v.options.color,haloColor:v.options.haloColor,fillOpacity:v.options.fillOpacity,haloOpacity:v.options.haloOpacity,haloWidth:v.options.haloWidth,haloBlur:v.options.haloBlur}})),()=>{i.highlightGradient=iMe(i.highlightGradient,this.highlights.items)},Lo),ge(()=>this.state.id,()=>i.state=this.state,Lo)],"map-view"),this._updateStageChildren();const c=this._resolveWhenReady;this._resolveWhenReady=[],c.forEach(v=>v(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this.stage.addChild(i.container)});const t=this.graphicsView;this.stage.addChild(t.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const t=new q$e(K2e.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",t);const i=new Yne({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Xne(t)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const t=this.graphicsView;this._set("graphicsView",null),t.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(t){var c;const{allLayerViews:i,padding:r,size:n,stage:o}=this;return{allLayerViews:i,backgroundColor:t!=null&&t.ignoreBackground?null:(c=this.background)==null?void 0:c.color,padding:r,size:n,stage:o}}_spatialReferenceChanged(t){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(t),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};at.type="2d",m([w({readOnly:!0})],at.prototype,"animationManager",void 0),m([w({constructOnly:!0})],at.prototype,"deactivatedWebGLExtensions",void 0),m([w({constructOnly:!0})],at.prototype,"debugWebGLExtensions",void 0),m([w({readOnly:!0})],at.prototype,"featuresTilingScheme",void 0),m([w({readOnly:!0})],at.prototype,"fullOpacity",void 0),m([w()],at.prototype,"goToManager",void 0),m([w({readOnly:!0})],at.prototype,"graphicsTileStore",null),m([w()],at.prototype,"graphicsView",void 0),m([w()],at.prototype,"stateManager",void 0),m([w()],at.prototype,"constraintsInfo",null),m([w({readOnly:!0})],at.prototype,"state",null),m([w()],at.prototype,"initialExtentRequired",null),m([w()],at.prototype,"labelManager",void 0),m([w({readOnly:!0})],at.prototype,"mapViewNavigation",void 0),m([w({constructOnly:!0})],at.prototype,"renderCanvas",void 0),m([w()],at.prototype,"renderingOptions",void 0),m([w({constructOnly:!0})],at.prototype,"supersampleScreenshotsEnabled",void 0),m([w({readOnly:!0})],at.prototype,"supportsGround",void 0),m([w()],at.prototype,"defaultsFromMapSettings",null),m([w({readOnly:!0})],at.prototype,"typeSpecificPreconditionsReady",null),m([w()],at.prototype,"animation",null),m([w({type:oT})],at.prototype,"background",null),m([w()],at.prototype,"center",null),m([w({type:Bre})],at.prototype,"constraints",null),m([w()],at.prototype,"extent",null),m([w()],at.prototype,"floors",void 0),m([w()],at.prototype,"grid",void 0),m([w({type:F0})],at.prototype,"highlightOptions",null),m([w({type:Oe.ofType(h1)})],at.prototype,"highlights",void 0),m([w({readOnly:!0})],at.prototype,"inputManager",void 0),m([w()],at.prototype,"map",void 0),m([w()],at.prototype,"padding",null),m([w({readOnly:!0})],at.prototype,"rendering",null),m([w()],at.prototype,"resizeAlign",null),m([w({readOnly:!0})],at.prototype,"resolution",null),m([w()],at.prototype,"rotation",null),m([w()],at.prototype,"scale",null),m([w({constructOnly:!0})],at.prototype,"spatialReferenceLocked",void 0),m([w()],at.prototype,"stationary",null),m([w({readOnly:!0})],at.prototype,"tileInfo",null),m([w({type:Cne,readOnly:!0})],at.prototype,"timeline",void 0),m([w({readOnly:!0})],at.prototype,"type",void 0),m([w({readOnly:!0})],at.prototype,"updating",null),m([w({readOnly:!0})],at.prototype,"view2dType",void 0),m([w()],at.prototype,"viewpoint",null),m([w({readOnly:!0})],at.prototype,"visibleArea",null),m([w()],at.prototype,"zoom",null),m([w({readOnly:!0})],at.prototype,"navigating",null),m([w(),wt(e=>e instanceof Hne?e:a3(Wne,e))],at.prototype,"ui",void 0),at=m([H("esri.views.View2D")],at);const _Ae=at;let W5=class extends _Ae{constructor(t){super(t),this.view2dType="map"}};m([w({readOnly:!0})],W5.prototype,"view2dType",void 0),W5=m([H("esri.views.MapView")],W5);const SAe=W5;function GR(e,t,i,r){let n=null,o=1e3;typeof t=="number"?(o=t,r=i):(n=t??null,o=i);let c,y=0;const v=()=>{y=0,e.apply(r,c)},_=(...I)=>{n&&n.apply(r,I),c=I,o?y||(y=setTimeout(v,o)):v()};return _.remove=()=>{y&&(clearTimeout(y),y=0)},_.forceUpdate=()=>{y&&(clearTimeout(y),v())},_.hasPendingUpdates=()=>!!y,_}const rse=96;function get(e,t){const i=e.extent,r=e.width,n=Al(i==null?void 0:i.spatialReference);return i&&r?i.width/r*n*jY*rse:0}function xAe(e,t){return e/(Al(t)*jY*rse)}function IAe(e,t){const i=e.extent,r=e.width-(e.padding?e.padding.left+e.padding.right:0),n=xAe(t,i.spatialReference);return i.clone().expand(n*r/i.width)}function TAe(e,t,i){return $Ae(e,t)&&EAe(e,i)}function $Ae(e,t){return t===0||bb(e,t)||e<t}function EAe(e,t){return t===0||bb(e,t)||e>t}function R2(e){var t;switch(e==null?void 0:e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":case"polyline":return(t=e.extent)==null?void 0:t.center;default:return null}}async function MAe(e,t){var n,o;if(e.hasZ||t.type==="2d")return e;const i=(n=t.map)==null?void 0:n.ground;if(!(i!=null&&i.layers.length))return e;const{geometry:r}=await i.queryElevation(e,{cache:(o=t.basemapTerrain)==null?void 0:o.elevationQueryCache});return r}function _7(e,t,i){return nse(e.center,t,i)}function qR(e,t,i){switch(e==null?void 0:e.type){case"extent":return e;case"multipoint":case"polygon":case"polyline":return e.extent;case"point":return nse(e,t,i);default:return null}}function nse(e,t,i){const r=e.hasZ?e.z:void 0;if(t!=null&&t.map)return(i!=null?IAe(t,i):t.extent).clone().centerAt(e).set({zmax:r,zmin:r});const{x:n,y:o,spatialReference:c}=e;return new Ut({xmin:n-.25,ymin:o-.25,xmax:n+.25,ymax:o+.25,spatialReference:c,zmin:r,zmax:r})}function gU(e){return e.icon?e.icon:"image"in e&&e.image||e.className?void 0:"question"}function sse(e){return e?{backgroundImage:`url(${e})`}:{}}function AAe({action:e,feature:t}){const i=t==null?void 0:t.attributes,r="image"in e?e.image:void 0;return r&&i?mn(r,i):r??""}var m4;(function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"})(m4||(m4={}));function CAe(e,t){return{type:E0(t),value:e,unit:t}}function vet(e){return{value:e}}function kAe(e,t){return{type:E0(t),value:e,unit:t}}function LAe(e,t){return{type:E0(t),value:e,unit:t}}function aT(e,t,i="arithmetic"){return{type:E0(t),value:e,unit:t,rotationType:i}}function wet(e,t){const i=OAe(e,t);return e.type==="angle"?aT(i,t,e.rotationType):CAe(i,t)}function OAe(e,t){return pi(e.value,e.unit,t)}function RAe(e,t,i){if(t===i)return e;switch(i){case"arithmetic":case"geographic":return 90-e}}const bet=kAe(0,"meters"),_et=LAe(0,"square-meters");aT(0,"radians");const xet=aT(0,"degrees"),Iet=aT(0,"degrees","geographic");function ose(e,t,i){return e.units[t][i]}function Zg(e,t,i,r=2,n="abbr"){return`${jn(t,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:t>0?"never":"exceptZero"})} ${ose(e,i,n)}`}function lT(e,t,i,r=2,n="abbr"){return`${jn(t,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:"exceptZero"})} ${ose(e,i,n)}`}function Tet(e,t,i,r=2,n="abbr"){const o=BY(t,i);return Zg(e,pi(t,i,o),o,r,n)}function $et(e,t,i,r=2,n="abbr"){const o=BY(t,i);return lT(e,pi(t,i,o),o,r,n)}function Eet(e,t,i,r=2,n="abbr"){const o=GY(t,i);return Zg(e,pi(t,i,o),o,r,n)}function Met(e,t,i,r=2,n="abbr"){const o=GY(t,i);return lT(e,pi(t,i,o),o,r,n)}function Aet(e,t,i,r=2,n="abbr"){const o=qY(t,i);return Zg(e,pi(t,i,o),o,r,n)}function Cet(e,t,i,r=2,n="abbr"){const o=qY(t,i);return lT(e,pi(t,i,o),o,r,n)}function ket(e,t,i,r=2,n="abbr"){const o=HY(t,i);return Zg(e,pi(t,i,o),o,r,n)}function Let(e,t,i,r=2,n="abbr"){const o=HY(t,i);return lT(e,pi(t,i,o),o,r,n)}function Oet(e,t,i,r=2,n="abbr"){const o=L1e(t,i);return Zg(e,pi(t,i,o),o,r,n)}function Ret(e,t,i,r=2,n="abbr"){const o=O1e(t,i);return Zg(e,pi(t,i,o),o,r,n)}const PAe=(e,t)=>({style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:t,minimumFractionDigits:t,signDisplay:e>0?"never":"exceptZero"});function Pet(e,t,i,r,n,o=CX,c=!0){let y=o.normalize(RAe(pi(e,t,"degrees"),i,r),0,c);const v=PAe(y,n??2);return y=NAe(y,v),jn(y,v)}const vU=new Map;function NAe(e,t){const i=JSON.stringify(t);let r=vU.get(i);return r||(r=new Intl.NumberFormat("en-US",t),vU.set(i,r)),/^[-+]?360\.?0*?$/.test(r.format(e))?0:e}const wU=["B","kB","MB","GB","TB"];function FAe(e,t){let i=(t=Math.round(t))===0?0:Math.floor(Math.log(t)/Math.log(m4.KILOBYTES));i=co(i,0,wU.length-1);const r=jn(t/m4.KILOBYTES**i,{maximumFractionDigits:2});return Il(e.units.bytes[wU[i]],{fileSize:r})}function DAe(e){const{exifInfo:t,exifName:i,tagName:r}=e;if(!t||!i||!r)return null;const n=t.find(o=>o.name===i);return n?jAe({tagName:r,tags:n.tags}):null}function jAe(e){const{tagName:t,tags:i}=e;if(!i||!t)return null;const r=i.find(n=>n.name===t);return(r==null?void 0:r.value)||null}var S7;const zAe={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let Vs=S7=class extends be{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=DAe({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return zAe[t]||null}clone(){return new S7({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};m([w({type:String})],Vs.prototype,"contentType",void 0),m([w()],Vs.prototype,"exifInfo",void 0),m([w({readOnly:!0})],Vs.prototype,"orientationInfo",null),m([w({type:Ct})],Vs.prototype,"id",void 0),m([w({type:String})],Vs.prototype,"globalId",void 0),m([w({type:String})],Vs.prototype,"keywords",void 0),m([w({type:String})],Vs.prototype,"name",void 0),m([w({json:{read:!1}})],Vs.prototype,"parentGlobalId",void 0),m([w({json:{read:!1}})],Vs.prototype,"parentObjectId",void 0),m([w({type:Ct})],Vs.prototype,"size",void 0),m([w({json:{read:!1}})],Vs.prototype,"url",void 0),Vs=S7=m([H("esri.rest.query.support.AttachmentInfo")],Vs);const VAe=Vs;var x7;let an=x7=class extends be{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new x7(le({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};m([w({type:[String],json:{write:!0}})],an.prototype,"attachmentTypes",void 0),m([w({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],an.prototype,"attachmentsWhere",void 0),m([w({type:Boolean,json:{write:!0}})],an.prototype,"cacheHint",void 0),m([w({type:[String],json:{write:!0}})],an.prototype,"keywords",void 0),m([w({type:[String],json:{write:!0}})],an.prototype,"globalIds",void 0),m([w({json:{write:!0}})],an.prototype,"name",void 0),m([w({type:Number,json:{read:{source:"resultRecordCount"}}})],an.prototype,"num",void 0),m([w({type:[Number],json:{write:!0}})],an.prototype,"objectIds",void 0),m([w({type:Boolean,json:{default:!1,write:!0}})],an.prototype,"returnMetadata",void 0),m([w({type:[Number],json:{write:!0}})],an.prototype,"size",void 0),m([w({type:Number,json:{read:{source:"resultOffset"}}})],an.prototype,"start",void 0),m([Le("start"),Le("num")],an.prototype,"writeStart",null),m([w({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],an.prototype,"where",void 0),an=x7=m([H("esri.rest.support.AttachmentQuery")],an),an.from=qi(an);const I7=an;function ase(e){return jte(e)||Exe(e)||Mxe(e)}function HR(e,t){const{format:i,timeZoneOptions:r,fieldType:n}=t??{};let o,c;if(r&&({timeZone:o,timeZoneName:c}=zQ(r.layerTimeZone,r.datesInUnknownTimezone,r.viewTimeZone,Rf(i||"short-date-short-time"),n)),typeof e=="string"&&isNaN(Date.parse(n==="time-only"?`1970-01-01T${e}Z`:e)))return e;switch(n){case"date-only":{const y=Rf(i||"short-date");return typeof e=="string"?Pbe(e,{...y}):ro(e,{...y,timeZone:Ru})}case"time-only":{const y=Rf(i||"short-time");return typeof e=="string"?Nbe(e,y):ro(e,{...y,timeZone:Ru})}case"timestamp-offset":{if(!o&&typeof e=="string"&&new Date(e).toISOString()!==e)return e;const y=i||r?Rf(i||"short-date-short-time"):void 0,v=y?{...y,timeZone:o,timeZoneName:c}:void 0;return typeof e=="string"?Fbe(e,v):ro(e,v)}default:{const y=i||r?Rf(i||"short-date-short-time"):void 0;return ro(typeof e=="string"?new Date(e):e,y?{...y,timeZone:o,timeZoneName:c}:void 0)}}}const UAe="esri.widgets.Feature.support.featureUtils",T7=()=>_e.getLogger(UAe),BAe=/href=(""|'')/gi,GAe=/(\{([^{\r\n]+)\})/g,qAe=/'/g,lse=/^\s*expression\//i,HAe=/(\n)/gi,WAe=/[\u00A0-\u9999<>&]/gim,JAe=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,ZAe=/^(?:mailto:|tel:)/,use="relationships/",bU=Rf("short-date-short-time");function cse(e){if(e!=null)return(e.sourceLayer||e.layer)??void 0}async function g4({type:e,value:t,event:i}){try{return typeof t=="function"?t(i):await t}catch(r){return void T7().error("error",`An error occurred when calling the "${e}" function`,{error:r,graphic:i.graphic,value:t})}}function hse(e=""){if(e)return!ZAe.test(e.trim().toLowerCase())}function WR(e){return!!e&&lse.test(e)}function KAe(e,t){if(!t||!WR(t)||!e)return;const i=t.replace(lse,"").toLowerCase();return e.find(({name:r})=>r.toLowerCase()===i)}function dse(e,t){const i=KAe(t,e==null?void 0:e.fieldName);return i?i.title||null:e?e.label||e.fieldName:null}function YAe(e,t){const i=t.get(e.toLowerCase());return`{${(i==null?void 0:i.fieldName)||e}}`}function XAe(e){return e.replaceAll(BAe,"")}function P2(e,t){const i=JR(t,e);return i?i.name:e}function QAe(e,t){return e&&e.map(i=>P2(i,t))}function JR(e,t){return e&&typeof e.getField=="function"&&t?e.getField(t)??null:null}function pse(e){return`${e}`.trim()}function Yf({attributes:e,globalAttributes:t,layer:i,text:r,expressionAttributes:n,fieldInfoMap:o}){return r?$7({formattedAttributes:t,template:rCe(r,{...t,...n,...e},i),fieldInfoMap:o}):""}function $7({formattedAttributes:e,template:t,fieldInfoMap:i}){return pse(XAe(Il(Il(t,r=>YAe(r,i)),e)))}function eCe(e,t,i=!1){const r=t[e];if(typeof r=="string"){const n="%27",o=(i?encodeURIComponent(r):r).replaceAll(qAe,n);t[e]=o}}function tCe(e,t=!1){const i={...e};return Object.keys(i).forEach(r=>eCe(r,i,t)),i}function iCe(e,t,i){const r=(t=pse(t))&&t[0]!=="{";return Il(e,tCe(i,r||!1))}function E7(e,t){return e.replaceAll(GAe,(i,r,n)=>{const o=JR(t,n);return o?`{${o.name}}`:r})}function rCe(e,t,i){const r=E7(e,i);return r&&r.replaceAll(JAe,(n,o,c)=>iCe(n,o||c,t))}function nCe(e,t){if(typeof e=="string"&&t&&t.dateFormat==null&&(t.places!=null||t.digitSeparator!=null)){const i=Number(e);if(!isNaN(i))return i}return e}function fse(e){return e!=null&&typeof e=="object"&&"fieldsIndex"in e&&"geometryType"in e&&"getField"in e&&"load"in e&&"loaded"in e&&"objectIdField"in e&&"spatialReference"in e&&"type"in e&&(e.type==="feature"||e.type==="scene"||e.type==="subtype-sublayer"||e.type==="sublayer")&&"when"in e}function sCe(e){return e!=null&&typeof e=="object"&&"createQuery"in e&&"queryFeatureCount"in e&&"queryObjectIds"in e&&"queryRelatedFeatures"in e&&"queryRelatedFeaturesCount"in e&&"relationships"in e}function oCe(e){return!!(e&&typeof e=="object"&&"createQuery"in e&&"queryFeatureCount"in e&&"type"in e)&&(e.type==="subtype-sublayer"&&"parent"in e&&e.parent&&typeof e.parent=="object"?"globalIdField"in e.parent:"globalIdField"in e)}function yse(e){return fse(e)&&sCe(e)}function aCe(e){return fse(e)&&oCe(e)}function lCe(e,t){var I;const{fieldInfos:i,fieldName:r,preventPlacesFormatting:n,layer:o,timeZone:c}=t,y=mse(i,r),v=JR(o,r);if(y&&!LA(r)){const $=v==null?void 0:v.type,A=(I=y.format)==null?void 0:I.dateFormat;if($==="date"||$==="date-only"||$==="time-only"||$==="timestamp-offset"||A)return HR(e,{format:A,fieldType:$,timeZoneOptions:{layerTimeZone:o&&"preferredTimeZone"in o?o.preferredTimeZone:null,viewTimeZone:c,datesInUnknownTimezone:!(!o||!("datesInUnknownTimezone"in o))&&!!o.datesInUnknownTimezone}})}const _=y==null?void 0:y.format;return typeof e=="string"&&LA(r)&&_?uCe(e,_):typeof(e=nCe(e,_))=="string"||e==null||_==null?L3(e):jn(e,n?{...B9(_),minimumFractionDigits:0,maximumFractionDigits:20}:B9(_))}function uCe(e,t){return e=e.trim(),/\d{2}-\d{2}/.test(e)?e:e.includes(",")?pE(e,",",", ",t):e.includes(";")?pE(e,";","; ",t):e.includes(" ")?pE(e," "," ",t):jn(Number(e),B9(t))}function pE(e,t,i,r){return e.trim().split(t).map(n=>jn(Number(n),B9(r))).join(i)}function mse(e,t){if(e!=null&&e.length&&t)return e.find(i=>{var r;return((r=i.fieldName)==null?void 0:r.toLowerCase())===t.toLowerCase()})}function cCe({fieldName:e,graphic:t,layer:i}){if(Vc(e)||!i||typeof i.getFeatureType!="function")return null;const{typeIdField:r}=i;if(!r||e!==r)return null;const n=i.getFeatureType(t);return n?n.name:null}function hCe({fieldName:e,value:t,graphic:i,layer:r}){if(Vc(e)||!r||typeof r.getFieldDomain!="function")return null;const n=i&&r.getFieldDomain(e,{feature:i,excludeImpliedDomains:we("esri-widget-legacy-field-domain-calculation")});return n&&n.type==="coded-value"?n.getName(t):null}function dCe(e,t,i,r){const{creatorField:n,creationDateField:o,editorField:c,editDateField:y}=e;if(!t)return;const v=zQ(r&&"preferredTimeZone"in r?r.preferredTimeZone:null,!(!r||!("datesInUnknownTimezone"in r))&&!!r.datesInUnknownTimezone,i,bU,"date"),_={...bU,...v},I=t[y];if(typeof I=="number"){const A=t[c];return{type:"edit",date:ro(I,_),user:A}}const $=t[o];if(typeof $=="number"){const A=t[n];return{type:"create",date:ro($,_),user:A}}return null}function pCe(e,t){const i=new Map;if(!e)return i;for(const r of e){if(!r.fieldName)continue;const n=P2(r.fieldName,t);r.fieldName=n,i.set(n.toLowerCase(),r)}return i}function _U(e){const t=[];if(!e)return t;const{fieldInfos:i,content:r}=e;return i&&t.push(...i),r&&Array.isArray(r)&&r.forEach(n=>{if(n.type==="fields"){const o=n==null?void 0:n.fieldInfos;o&&t.push(...o)}}),t}function ZR(e){return e.replaceAll(WAe,t=>`&#${t.charCodeAt(0)};`)}function L3(e){return typeof e=="string"?e.replaceAll(HAe,'<br class="esri-text-new-line" />'):e}function gse(e){var $;const{value:t,fieldName:i,fieldInfos:r,fieldInfoMap:n,layer:o,graphic:c,timeZone:y}=e;if(t==null)return"";const v=hCe({fieldName:i,value:t,graphic:c,layer:o});if(v)return v;const _=cCe({fieldName:i,graphic:c,layer:o});if(_)return _;if(n.get(i.toLowerCase()))return lCe(t,{fieldInfos:r||Array.from(n.values()),fieldName:i,layer:o,timeZone:y});const I=($=o==null?void 0:o.fieldsIndex)==null?void 0:$.get(i);return I&&(ase(I)||hR(I))?HR(t,{fieldType:I.type,timeZoneOptions:{layerTimeZone:o&&"preferredTimeZone"in o?o.preferredTimeZone:null,viewTimeZone:y,datesInUnknownTimezone:!(!o||!("datesInUnknownTimezone"in o))&&!!o.datesInUnknownTimezone}}):L3(t)}function fE({fieldInfos:e,attributes:t,layer:i,graphic:r,fieldInfoMap:n,relatedInfos:o,timeZone:c}){const y={};return o==null||o.forEach(v=>gCe({attributes:y,relatedInfo:v,fieldInfoMap:n,fieldInfos:e,layer:i,timeZone:c})),t&&Object.keys(t).forEach(v=>{const _=t[v];y[v]=gse({fieldName:v,fieldInfos:e,fieldInfoMap:n,layer:i,value:_,graphic:r,timeZone:c})}),y}async function vse(e,t){var I,$;const{layer:i,graphic:r,outFields:n,objectIds:o,returnGeometry:c,spatialReference:y}=e,v=o[0];if(typeof v!="number"&&typeof v!="string"){const A="Could not query required fields for the specified feature. The feature's ID is invalid.",k={layer:i,graphic:r,objectId:v,requiredFields:n};return T7().warn(A,k),null}if(!(($=(I=Wee(i))==null?void 0:I.operations)!=null&&$.supportsQuery)){const A="The specified layer cannot be queried. The following fields will not be available.",k={layer:i,graphic:r,requiredFields:n,returnGeometry:c};return T7().warn(A,k),null}const _=i.createQuery();return _.objectIds=o,_.outFields=n!=null&&n.length?n:[i.objectIdField],_.returnGeometry=!!c,_.returnZ=!!c,_.returnM=!!c,_.outSpatialReference=y,(await i.queryFeatures(_,t)).features[0]}async function fCe(e){var r;if(!((r=e.expressionInfos)!=null&&r.length))return!1;const t=await eh(),{arcadeUtils:{hasGeometryFunctions:i}}=t;return i(e)}async function yCe({graphic:e,popupTemplate:t,layer:i,spatialReference:r},n){if(!i||!t||(typeof i.load=="function"&&await i.load(n),!e.attributes))return;const o=i.objectIdField,c=e.attributes[o];if(c==null)return;const y=[c],v=await t.getRequiredFields(i.fieldsIndex),_=Nxe(v,e),I=_?[]:v.includes(o)?v:[...v,o],$=t.returnGeometry||await fCe(t);if(_&&!$)return;const A=await vse({layer:i,graphic:e,outFields:I,objectIds:y,returnGeometry:$,spatialReference:r},n);A&&(A.geometry&&(e.geometry=A.geometry),A.attributes&&(e.attributes={...e.attributes,...A.attributes}))}function Vc(e=""){return!!e&&e.includes(use)}function mCe(e){return e?`${use}${e.layerId}/${e.fieldName}`:""}function SU({attributes:e,graphic:t,relatedInfo:i,fieldInfos:r,fieldInfoMap:n,layer:o,timeZone:c}){e&&t&&i&&Object.keys(t.attributes).forEach(y=>{const v=mCe({layerId:i.relation.id.toString(),fieldName:y}),_=t.attributes[y];e[v]=gse({fieldName:v,fieldInfos:r,fieldInfoMap:n,layer:o,value:_,graphic:t,timeZone:c})})}function gCe({attributes:e,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:n,timeZone:o}){var c,y;e&&t&&((c=t.relatedFeatures)==null||c.forEach(v=>SU({attributes:e,graphic:v,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:n,timeZone:o})),(y=t.relatedStatsFeatures)==null||y.forEach(v=>SU({attributes:e,graphic:v,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:n,timeZone:o})))}const xU=e=>{if(!e)return!1;const t=e.toUpperCase();return t.includes("CURRENT_TIMESTAMP")||t.includes("CURRENT_DATE")||t.includes("CURRENT_TIME")},wse=({layer:e,method:t,query:i,definitionExpression:r})=>{var c,y;if(!((y=(c=e.capabilities)==null?void 0:c.query)!=null&&y.supportsCacheHint)||t==="attachments")return;const n=i.where!=null?i.where:null,o=i.geometry!=null?i.geometry:null;xU(r)||xU(n)||(o==null?void 0:o.type)==="extent"||i.resultType==="tile"||(i.cacheHint=!0)},vCe=({query:e,layer:t,method:i})=>{wse({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression??""}`})},wCe=({queryPayload:e,layer:t,method:i})=>{wse({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression??""}`})};function bCe(e,t,i){var r,n;return e&&t&&i?t.type==="sublayer"?d1({layers:(r=t.layer)==null?void 0:r.sublayers,map:e,relatedLayer:t,relationship:i})||d1({layers:(n=t.layer)==null?void 0:n.subtables,map:e,relatedLayer:t,relationship:i}):d1({layers:e.allLayers,map:e,relatedLayer:t,relationship:i})||d1({layers:e.allTables,map:e,relatedLayer:t,relationship:i}):null}function IU(e,t){var i;return e&&"utilityNetworks"in e&&t?(i=e.utilityNetworks)==null?void 0:i.find(r=>r.isUtilityLayer(t)):null}function TU(e,t){return e==null?void 0:e.allTables.find(i=>{var r;return i.type==="feature"&&i.layerId===t.id&&i.url===((r=t.layer)==null?void 0:r.url)})}function d1({map:e,relationship:t,relationship:{relatedTableId:i},relatedLayer:r,layers:n}){var o;if(!n)return null;for(const c of n){if(c.type==="map-image"){const v=d1({layers:c.sublayers,map:e,relatedLayer:r,relationship:t})||d1({layers:c.subtables,map:e,relatedLayer:r,relationship:t});if(v)return v;continue}if(!yse(c))continue;if(r.type==="sublayer"){if(c!==r&&c.id===i)return c.isTable?TU(e,c):c;continue}const y=r.type==="scene"&&r.associatedLayer?r.associatedLayer.url:r.url;if(!y)return null;if(c.type!=="sublayer"){if(c!==r&&c.url===y&&c.layerId===i)return c}else if(c!==r&&((o=c.layer)==null?void 0:o.url)===y&&c.id===i)return c.isTable?TU(e,c):c}return null}const $U={editing:!1,operations:{add:!0,update:!0,delete:!0}},bse=Oe.ofType(VAe);let Us=class extends Ve{constructor(t){super(t),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.capabilities={...$U},this.activeAttachmentInfo=null,this.activeFileInfo=null,this.attachmentInfos=new bse,this.fileInfos=new Oe,this.graphic=null,this.mode="view",this.filesEnabled=!1,this.addHandles(ge(()=>this.graphic,()=>this._graphicChanged(),qe))}destroy(){this._attachmentLayer=null,this.graphic=null}castCapabilities(t){return{...$U,...t}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){const{graphic:t}=this;if(!t)return!1;const i=t.layer||t.sourceLayer;return(i==null?void 0:i.loaded)&&"capabilities"in i&&i.capabilities&&"operations"in i.capabilities&&"supportsResizeAttachments"in i.capabilities.operations&&i.capabilities.operations.supportsResizeAttachments||!1}async getAttachments(){const{_attachmentLayer:t,attachmentInfos:i}=this;if(!t||typeof t.queryAttachments!="function")throw new ne("invalid-layer","getAttachments(): A valid layer is required.");const r=this._getObjectId();if(typeof r!="number")throw new ne("invalid-object-id","getAttachments(): Numeric object id is required");const n=new I7({objectIds:[r],returnMetadata:!0}),o=[],c=t.queryAttachments(n).then(v=>v[r]||o).catch(()=>o);this._getAttachmentsPromise=c,this.notifyChange("state");const y=await c;return i.destroyAll(),y.length&&i.addMany(y),this._getAttachmentsPromise=null,this.notifyChange("state"),y}async addAttachment(t,i=this.graphic){var v;const{_attachmentLayer:r,attachmentInfos:n,capabilities:o}=this;if(!i)throw new ne("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:i});if(!t)throw new ne("invalid-attachment","addAttachment(): An attachment is required.",{attachment:t});if(!((v=o.operations)!=null&&v.add))throw new ne("invalid-capabilities","addAttachment(): add capabilities are required.");if(!r||typeof r.addAttachment!="function")throw new ne("invalid-layer","addAttachment(): A valid layer is required.");const c=r.addAttachment(i,t).then(_=>this._queryAttachment(_.objectId,i)),y=await c;return n.add(y),y}async deleteAttachment(t){var v;const{_attachmentLayer:i,attachmentInfos:r,graphic:n,capabilities:o}=this;if(!t)throw new ne("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!((v=o.operations)!=null&&v.delete))throw new ne("invalid-capabilities","deleteAttachment(): delete capabilities are required.");if(!i||typeof i.deleteAttachments!="function")throw new ne("invalid-layer","deleteAttachment(): A valid layer is required.");if(!n)throw new ne("invalid-graphic","deleteAttachment(): A graphic is required.");const c=i.deleteAttachments(n,[t.id]).then(()=>t),y=await c;return r.remove(y),y.destroy(),y}async updateAttachment(t,i=this.activeAttachmentInfo){var I;const{_attachmentLayer:r,attachmentInfos:n,graphic:o,capabilities:c}=this;if(!t)throw new ne("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:t});if(!i)throw new ne("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:i});if(!((I=c.operations)!=null&&I.update))throw new ne("invalid-capabilities","updateAttachment(): Update capabilities are required.");const y=n.indexOf(i);if(!r||typeof r.updateAttachment!="function")throw new ne("invalid-layer","updateAttachment(): A valid layer is required.");if(!o)throw new ne("invalid-graphic","updateAttachment(): A graphic is required.");const v=r.updateAttachment(o,i.id,t).then($=>this._queryAttachment($.objectId)),_=await v;return n.splice(y,1,_),_}async commitFiles(){return await Promise.all(this.fileInfos.items.map(t=>this.addAttachment(t.form))),this.fileInfos.removeAll(),this.getAttachments()}addFile(t,i){if(!t||!i)return null;const r={file:t,form:i};return this.fileInfos.add(r),r}updateFile(t,i,r=this.activeFileInfo){if(!t||!i||!r)return null;const n=this.fileInfos.indexOf(r);return n>-1&&this.fileInfos.splice(n,1,{file:t,form:i}),this.fileInfos.items[n]}deleteFile(t){const i=this.fileInfos.find(r=>r.file===t);return i?(this.fileInfos.remove(i),i):null}async _queryAttachment(t,i){const{_attachmentLayer:r}=this;if(!t||!(r!=null&&r.queryAttachments))throw new ne("invalid-attachment-id","Could not query attachment.");const n=this._getObjectId(i);if(typeof n!="number")throw new ne("invalid-object-id","getAttachments(): Numeric object id is required");const o=new I7({objectIds:[n],attachmentsWhere:`AttachmentId=${t}`,returnMetadata:!0});return r.queryAttachments(o).then(c=>c[n][0])}_getObjectId(t=this.graphic){return(t==null?void 0:t.getObjectId())??null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>this.attachmentInfos.destroyAll()))}_setAttachmentLayer(){const{graphic:t}=this,i=cse(t);this._attachmentLayer=i?i.type==="scene"&&i.associatedLayer!=null?i.associatedLayer:i:null}};m([w()],Us.prototype,"capabilities",void 0),m([wt("capabilities")],Us.prototype,"castCapabilities",null),m([w()],Us.prototype,"activeAttachmentInfo",void 0),m([w()],Us.prototype,"activeFileInfo",void 0),m([w({readOnly:!0,type:bse})],Us.prototype,"attachmentInfos",void 0),m([w()],Us.prototype,"fileInfos",void 0),m([w({type:er})],Us.prototype,"graphic",void 0),m([w()],Us.prototype,"mode",void 0),m([w({readOnly:!0})],Us.prototype,"state",null),m([w()],Us.prototype,"filesEnabled",void 0),m([w({readOnly:!0})],Us.prototype,"supportsResizeAttachments",null),Us=m([H("esri.widgets.Attachments.AttachmentsViewModel")],Us);const KR=Us;function EU(e){const t=e.toLowerCase();return t==="image/bmp"||t==="image/emf"||t==="image/exif"||t==="image/gif"||t==="image/x-icon"||t==="image/jpeg"||t==="image/png"||t==="image/tiff"||t==="image/x-wmf"}function _Ce(e){const t=jt("esri/themes/base/images/files/");return e?e==="text/plain"?`${t}text-32.svg`:e==="application/pdf"?`${t}pdf-32.svg`:e==="text/csv"?`${t}csv-32.svg`:e==="application/gpx+xml"?`${t}gpx-32.svg`:e==="application/x-dwf"?`${t}cad-32.svg`:e==="application/postscript"||e==="application/json"||e==="text/xml"||e==="model/vrml"?`${t}code-32.svg`:e==="application/x-zip-compressed"||e==="application/x-7z-compressed"||e==="application/x-gzip"||e==="application/x-tar"||e==="application/x-gtar"||e==="application/x-bzip2"||e==="application/gzip"||e==="application/x-compress"||e==="application/x-apple-diskimage"||e==="application/x-rar-compressed"||e==="application/zip"?`${t}zip-32.svg`:e.includes("image/")?`${t}image-32.svg`:e.includes("audio/")?`${t}sound-32.svg`:e.includes("video/")?`${t}video-32.svg`:e.includes("msexcel")||e.includes("ms-excel")||e.includes("spreadsheetml")?`${t}excel-32.svg`:e.includes("msword")||e.includes("ms-word")||e.includes("wordprocessingml")?`${t}word-32.svg`:e.includes("powerpoint")||e.includes("presentationml")?`${t}report-32.svg`:`${t}generic-32.svg`:`${t}generic-32.svg`}const Pn={close:"esri-icon-close",collapse:"esri-icon-collapse",down:"esri-icon-down",downArrow:"esri-icon-down-arrow",dragHorizontal:"esri-icon-drag-horizontal",dragVertical:"esri-icon-drag-vertical",duplicate:"esri-icon-duplicate",expand:"esri-icon-expand",fontFallbackText:"esri-icon-font-fallback-text",forward:"esri-icon-forward",handleVertical:"esri-icon-handle-vertical",icon:"esri-icon",left:"esri-icon-left",locateCircled:"esri-icon-locate-circled",noticeTriangle:"esri-icon-notice-triangle",pause:"esri-icon-pause",play:"esri-icon-play",plus:"esri-icon-plus",radioChecked:"esri-icon-radio-checked",radioUnchecked:"esri-icon-radio-unchecked",refresh:"esri-icon-refresh",reverse:"esri-icon-reverse",right:"esri-icon-right",search:"esri-icon-search",swap:"esri-icon-swap",table:"esri-icon-table",trash:"esri-icon-trash",up:"esri-icon-up",upArrow:"esri-icon-up-arrow",upDownArrows:"esri-icon-up-down-arrows",urbanModel:"esri-icon-urban-model",zoomInMagnifyingGlass:"esri-icon-zoom-in-magnifying-glass",zoomToObject:"esri-icon-zoom-to-object"},MU={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},Gt="esri-attachments",yt={base:Gt,loaderContainer:`${Gt}__loader-container`,loader:`${Gt}__loader`,fadeIn:`${Gt}--fade-in`,container:`${Gt}__container`,containerList:`${Gt}__container--list`,containerPreview:`${Gt}__container--preview`,actions:`${Gt}__actions`,deleteButton:`${Gt}__delete-button`,addAttachmentButton:`${Gt}__add-attachment-button`,errorMessage:`${Gt}__error-message`,items:`${Gt}__items`,item:`${Gt}__item`,itemButton:`${Gt}__item-button`,itemMask:`${Gt}__item-mask`,itemMaskIcon:`${Gt}__item-mask--icon`,itemImage:`${Gt}__image`,itemImageResizable:`${Gt}__image--resizable`,itemLabel:`${Gt}__label`,itemFilename:`${Gt}__filename`,itemChevronIcon:`${Gt}__item-chevron-icon`,itemLink:`${Gt}__item-link`,itemLinkOverlay:`${Gt}__item-link-overlay`,itemLinkOverlayIcon:`${Gt}__item-link-overlay-icon`,itemEditIcon:`${Gt}__item-edit-icon`,itemAddIcon:`${Gt}__item-add-icon`,itemAddButton:`${Gt}__item-add-button`,formNode:`${Gt}__form-node`,fileFieldset:`${Gt}__file-fieldset`,fileLabel:`${Gt}__file-label`,fileName:`${Gt}__file-name`,fileInput:`${Gt}__file-input`,metadata:`${Gt}__metadata`,metadataFieldset:`${Gt}__metadata-fieldset`,progressBar:`${Gt}__progress-bar`},yE=window.CSS;let Mn=class extends yi{constructor(t,i){super(t,i),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=null,this.visibleElements={...MU},this._supportsImageOrientation=yE&&yE.supports&&yE.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}normalizeCtorArgs(t){return t!=null&&t.viewModel||(t={viewModel:new KR,...t}),t}initialize(){this.addHandles([tn(()=>{var t;return(t=this.viewModel)==null?void 0:t.attachmentInfos},"change",()=>this.scheduleRender()),tn(()=>{var t;return(t=this.viewModel)==null?void 0:t.fileInfos},"change",()=>this.scheduleRender()),ge(()=>{var t;return(t=this.viewModel)==null?void 0:t.mode},()=>this._modeChanged(),qe)])}loadDependencies(){return Vn({icon:()=>de(()=>import("./calcite-icon-D67BMpQP.js"),[],import.meta.url)})}get capabilities(){return this.viewModel.capabilities}set capabilities(t){this.viewModel.capabilities=t}get effectiveDisplayType(){const{displayType:t}=this;return t&&t!=="auto"?t:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get icon(){return"attachment"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}castVisibleElements(t){return{...MU,...t}}addAttachment(){const{_addAttachmentForm:t,viewModel:i}=this;return this._set("submitting",!0),this._set("error",null),i.addAttachment(t).then(r=>(this._set("submitting",!1),this._set("error",null),i.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new ne("attachments:add-attachment",this.messages.addErrorMessage,r)),r})}deleteAttachment(t){const{viewModel:i}=this;return this._set("submitting",!0),this._set("error",null),i.deleteAttachment(t).then(r=>(this._set("submitting",!1),this._set("error",null),i.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new ne("attachments:delete-attachment",this.messages.deleteErrorMessage,r)),r})}updateAttachment(){const{viewModel:t}=this,{_updateAttachmentForm:i}=this;return this._set("submitting",!0),this._set("error",null),t.updateAttachment(i).then(r=>(this._set("submitting",!1),this._set("error",null),t.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new ne("attachments:update-attachment",this.messages.updateErrorMessage,r)),r})}addFile(){const t=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",t}updateFile(){const{viewModel:t}=this,i=t.updateFile(this.selectedFile,this._updateAttachmentForm,t.activeFileInfo);return t.mode="view",i}deleteFile(t){var r;const i=this.viewModel.deleteFile(t||((r=this.viewModel.activeFileInfo)==null?void 0:r.file));return this.viewModel.mode="view",i}render(){const{submitting:t,viewModel:i}=this,{state:r}=i;return B("div",{class:this.classes(yt.base,ze.widget)},t?this._renderProgressBar():null,r==="loading"?this._renderLoading():this._renderAttachments(),this._renderErrorMessage())}_renderErrorMessage(){const{error:t,visibleElements:i}=this;return t&&i.errorMessage?B("div",{class:yt.errorMessage,key:"error-message"},t.message):null}_renderAttachments(){const{activeFileInfo:t,mode:i,activeAttachmentInfo:r}=this.viewModel;return i==="add"?this._renderAddForm():i==="edit"?this._renderDetailsForm(r||t):this._renderAttachmentContainer()}_renderLoading(){return B("div",{class:yt.loaderContainer,key:"loader"},B("div",{class:yt.loader}))}_renderProgressBar(){return this.visibleElements.progressBar?B("div",{class:yt.progressBar,key:"progress-bar"}):null}_renderAddForm(){const{submitting:t,selectedFile:i}=this,r=t||!i,n=this.visibleElements.cancelAddButton?B("button",{bind:this,class:this.classes(ze.button,ze.buttonTertiary,ze.buttonSmall,ze.buttonHalf,t&&ze.buttonDisabled),disabled:t,onclick:this._cancelForm,type:"button"},this.messages.cancel):null,o=this.visibleElements.addSubmitButton?B("button",{class:this.classes(ze.button,ze.buttonSecondary,ze.buttonSmall,ze.buttonHalf,{[ze.buttonDisabled]:r}),disabled:r,type:"submit"},this.messages.add):null,c=i?B("span",{class:yt.fileName,key:"file-name"},i.name):null,y=B("form",{afterCreate:o1,afterRemoved:Xj,bind:this,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},B("fieldset",{class:yt.fileFieldset},c,B("label",{class:this.classes(yt.fileLabel,ze.button,ze.buttonSecondary)},i?this.messages.changeFile:this.messages.selectFile,B("input",{bind:this,class:yt.fileInput,name:"attachment",onchange:this._handleFileInputChange,type:"file"}))),o,n);return B("div",{class:yt.formNode,key:"add-form-container"},y)}_renderDetailsForm(t){var W,Q,K;const{visibleElements:i,viewModel:r,selectedFile:n,submitting:o}=this,{capabilities:c}=r,y=o||!n;let v,_,I,$;n?(v=n.type,_=n.name,I=n.size):t&&"file"in t?(v=t.file.type,_=t.file.name,I=t.file.size):t&&"contentType"in t&&(v=t.contentType,_=t.name,I=t.size,$=t.url);const A=c.editing&&((W=c.operations)!=null&&W.delete)&&i.deleteButton?B("button",{bind:this,class:this.classes(ze.button,ze.buttonSmall,ze.buttonTertiary,yt.deleteButton,{[ze.buttonDisabled]:o}),disabled:o,key:"delete-button",onclick:ee=>this._submitDeleteAttachment(ee,t),type:"button"},this.messages.delete):void 0,k=c.editing&&((Q=c.operations)!=null&&Q.update)&&i.updateButton?B("button",{class:this.classes(ze.button,ze.buttonSmall,ze.buttonThird,{[ze.buttonDisabled]:y}),disabled:y,key:"update-button",type:"submit"},this.messages.update):void 0,R=this.visibleElements.cancelUpdateButton?B("button",{bind:this,class:this.classes(ze.button,ze.buttonSmall,ze.buttonTertiary,ze.buttonThird,{[ze.buttonDisabled]:o}),disabled:o,key:"cancel-button",onclick:this._cancelForm,type:"button"},this.messages.cancel):void 0,N=c.editing&&((K=c.operations)!=null&&K.update)?B("fieldset",{class:yt.fileFieldset,key:"file"},B("span",{class:yt.fileName,key:"file-name"},_),B("label",{class:this.classes(yt.fileLabel,ze.button,ze.buttonSecondary)},this.messages.changeFile,B("input",{bind:this,class:yt.fileInput,name:"attachment",onchange:this._handleFileInputChange,type:"file"}))):void 0,D=B("fieldset",{class:yt.metadataFieldset,key:"size"},B("label",null,FAe(this.messagesUnits,I??0))),j=B("fieldset",{class:yt.metadataFieldset,key:"content-type"},B("label",null,v)),z=$!=null?B("a",{class:yt.itemLink,href:$,rel:"noreferrer",target:"_blank"},this._renderImageMask(t,400),B("div",{class:yt.itemLinkOverlay},B("span",{class:yt.itemLinkOverlayIcon},B("calcite-icon",{icon:"launch"})))):this._renderImageMask(t,400),U=B("form",{afterCreate:o1,afterRemoved:Xj,bind:this,"data-node-ref":"_updateAttachmentForm",onsubmit:ee=>this._submitUpdateAttachment(ee,t)},B("div",{class:yt.metadata},D,j),N,B("div",{class:yt.actions},A,R,k));return B("div",{class:yt.formNode,key:"edit-form-container"},z,U)}_renderImageMask(t,i){return t?"file"in t?this._renderGenericImageMask(t.file.name,t.file.type):this._renderImageMaskForAttachment(t,i):null}_renderGenericImageMask(t,i){const{supportsResizeAttachments:r}=this.viewModel,n=_Ce(i),o={[yt.itemImageResizable]:r};return B("div",{class:this.classes(yt.itemMaskIcon,yt.itemMask),key:n},B("img",{alt:t,class:this.classes(o,yt.itemImage),src:n,title:t}))}_renderImageMaskForAttachment(t,i){const{supportsResizeAttachments:r}=this.viewModel;if(!t)return null;const{contentType:n,name:o,url:c}=t;if(!r||!EU(n))return this._renderGenericImageMask(o,n);const y=this._getCSSTransform(t),v=y?{transform:y,"image-orientation":"none"}:{},_=`${c}${c!=null&&c.includes("?")?"&":"?"}w=${i}`,I={[yt.itemImageResizable]:r};return B("div",{class:this.classes(yt.itemMask),key:_},B("img",{alt:o,class:this.classes(I,yt.itemImage),src:_,styles:v,title:o}))}_renderFile(t){const{file:i}=t;return B("li",{class:yt.item,key:i},B("button",{"aria-label":this.messages.attachmentDetails,bind:this,class:yt.itemButton,key:"details-button",onclick:()=>this._startEditFile(t),title:this.messages.attachmentDetails,type:"button"},this._renderImageMask(t),B("label",{class:yt.itemLabel},B("span",{class:yt.itemFilename},i.name||this.messages.noTitle),B("span",{"aria-hidden":"true",class:this.classes(yt.itemChevronIcon,Po(this.container)?Pn.left:Pn.right)}))))}_renderAttachmentInfo({attachmentInfo:t,displayType:i}){const{viewModel:r,effectiveDisplayType:n}=this,{capabilities:o,supportsResizeAttachments:c}=r,{contentType:y,name:v,url:_}=t,I=this._renderImageMask(t,i==="list"?48:400),$=o.editing?B("span",{"aria-hidden":"true",class:this.classes(yt.itemChevronIcon,Po(this.container)?Pn.left:Pn.right)}):null,A=[I,n==="preview"&&c&&EU(y)?null:B("label",{class:yt.itemLabel},B("span",{class:yt.itemFilename},v||this.messages.noTitle),$)],k=o.editing?B("button",{"aria-label":this.messages.attachmentDetails,bind:this,class:yt.itemButton,"data-attachment-info-id":t.id,key:"details-button",onclick:()=>this._startEditAttachment(t),title:this.messages.attachmentDetails,type:"button"},A):B("a",{class:yt.itemButton,href:_??void 0,key:"details-link",rel:"noreferrer",target:"_blank"},A);return B("li",{class:yt.item,key:t},k)}_renderAttachmentContainer(){var R;const{effectiveDisplayType:t,viewModel:i,visibleElements:r}=this,{attachmentInfos:n,capabilities:o,fileInfos:c}=i,y=!!(n!=null&&n.length),v=!!(c!=null&&c.length),_={[yt.containerList]:t!=="preview",[yt.containerPreview]:t==="preview"},I=o.editing&&((R=o.operations)!=null&&R.add)&&r.addButton?B("button",{bind:this,class:this.classes(ze.button,ze.buttonTertiary,yt.addAttachmentButton),onclick:()=>this._startAddAttachment(),type:"button"},B("span",{"aria-hidden":"true",class:this.classes(yt.itemAddIcon,Pn.plus)}),this.messages.add):void 0,$=y?B("ul",{class:yt.items,key:"attachments-list"},n.toArray().map(N=>this._renderAttachmentInfo({attachmentInfo:N,displayType:t}))):void 0,A=v?B("ul",{class:yt.items,key:"file-list"},c.toArray().map(N=>this._renderFile(N))):void 0,k=v||y?void 0:B("div",{class:ze.empty},this.messages.noAttachments);return B("div",{class:this.classes(yt.container,_),key:"attachments-container"},$,A,k,I)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(t){var n;const i=t.target,r=(n=i.files)==null?void 0:n.item(0);this._set("selectedFile",r)}_submitDeleteAttachment(t,i){t.preventDefault(),i&&("file"in i?this.deleteFile(i.file):i&&this.deleteAttachment(i))}_submitAddAttachment(t){t.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(t,i){t.preventDefault(),i&&"file"in i?this.updateFile():this.updateAttachment()}_startEditAttachment(t){const{viewModel:i}=this;i.activeFileInfo=null,i.activeAttachmentInfo=t,i.mode="edit"}_startEditFile(t){const{viewModel:i}=this;i.activeAttachmentInfo=null,i.activeFileInfo=t,i.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(t){t.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(t){const{orientationInfo:i}=t;return!this._supportsImageOrientation&&i?[i.rotation?`rotate(${i.rotation}deg)`:"",i.mirrored?"scaleX(-1)":""].join(" "):""}};m([w()],Mn.prototype,"capabilities",null),m([w()],Mn.prototype,"displayType",void 0),m([w({readOnly:!0})],Mn.prototype,"effectiveDisplayType",null),m([w()],Mn.prototype,"graphic",null),m([w()],Mn.prototype,"icon",null),m([w()],Mn.prototype,"label",null),m([w(),Ht("esri/widgets/Attachments/t9n/Attachments")],Mn.prototype,"messages",void 0),m([w(),Ht("esri/core/t9n/Units")],Mn.prototype,"messagesUnits",void 0),m([w({readOnly:!0})],Mn.prototype,"selectedFile",void 0),m([w({readOnly:!0})],Mn.prototype,"submitting",void 0),m([w({readOnly:!0})],Mn.prototype,"error",void 0),m([w({type:KR})],Mn.prototype,"viewModel",void 0),m([w()],Mn.prototype,"visibleElements",void 0),m([wt("visibleElements")],Mn.prototype,"castVisibleElements",null),Mn=m([H("esri.widgets.Attachments")],Mn);const SCe=Mn;let Nw=class extends KR{constructor(t){super(t),this.description=null,this.title=null}};m([w()],Nw.prototype,"description",void 0),m([w()],Nw.prototype,"title",void 0),Nw=m([H("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],Nw);const YR=Nw;function c0({level:e,class:t,...i},r){const n=_se(e);return B(`h${n}`,{...i,"aria-level":String(n),class:s1(ze.heading,t),role:"heading"},r)}function _se(e){return co(Math.ceil(e),1,6)}function xCe(e,t=1){return _se(e+t)}const mE="esri-feature-element-info",gE={base:mE,title:`${mE}__title`,description:`${mE}__description`};let nm=class extends yi{constructor(t,i){super(t,i),this.description=null,this.headingLevel=2,this.title=null}render(){return B("div",{class:gE.base},this._renderTitle(),this._renderDescription())}_renderTitle(){const{title:t}=this;return t?B(c0,{class:gE.title,innerHTML:t,level:this.headingLevel}):null}_renderDescription(){const{description:t}=this;return t?B("div",{class:gE.description,innerHTML:t,key:"description"}):null}};m([w()],nm.prototype,"description",void 0),m([w()],nm.prototype,"headingLevel",void 0),m([w()],nm.prototype,"title",void 0),nm=m([H("esri.widgets.Feature.support.FeatureElementInfo")],nm);const O3=nm,ICe={base:"esri-feature-attachments"};let Ql=class extends yi{constructor(t,i){super(t,i),this._featureElementInfo=null,this.attachmentsWidget=new SCe,this.headingLevel=2,this.viewModel=new YR}initialize(){this._featureElementInfo=new O3,this.addHandles([ge(()=>{var t,i;return[(t=this.viewModel)==null?void 0:t.description,(i=this.viewModel)==null?void 0:i.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),qe),ge(()=>this.viewModel,t=>this.attachmentsWidget.viewModel=t,qe)])}destroy(){var t;this.attachmentsWidget.viewModel=null,this.attachmentsWidget.destroy(),(t=this._featureElementInfo)==null||t.destroy()}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get displayType(){return this.attachmentsWidget.displayType}set displayType(t){this.attachmentsWidget.displayType=t}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}render(){var i;const{attachmentsWidget:t}=this;return B("div",{class:ICe.base},(i=this._featureElementInfo)==null?void 0:i.render(),t==null?void 0:t.render())}_setupFeatureElementInfo(){var n;const{description:t,title:i,headingLevel:r}=this;(n=this._featureElementInfo)==null||n.set({description:t,title:i,headingLevel:r})}};m([w({readOnly:!0})],Ql.prototype,"attachmentsWidget",void 0),m([w()],Ql.prototype,"description",null),m([w()],Ql.prototype,"displayType",null),m([w()],Ql.prototype,"graphic",null),m([w()],Ql.prototype,"headingLevel",void 0),m([w()],Ql.prototype,"title",null),m([w({type:YR})],Ql.prototype,"viewModel",void 0),Ql=m([H("esri.widgets.Feature.FeatureAttachments")],Ql);const TCe=Ql;let Bh=class extends Ve{constructor(t){super(t),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.addHandles(ge(()=>this.creator,i=>{this._destroyContent(),this._createContent(i)},qe))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:t,graphic:i,destroyer:r}=this;t&&i&&(g4({type:"content",value:r,event:{graphic:i}}),this._set("created",null))}async _createContent(t){const i=this.graphic;if(!i||!t)return;const r=g4({type:"content",value:t,event:{graphic:i}});this._loadingPromise=r,this.notifyChange("state");const n=await r;r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",n))}};m([w({readOnly:!0})],Bh.prototype,"created",void 0),m([w()],Bh.prototype,"creator",void 0),m([w()],Bh.prototype,"destroyer",void 0),m([w({type:er})],Bh.prototype,"graphic",void 0),m([w({readOnly:!0})],Bh.prototype,"state",null),Bh=m([H("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],Bh);const v4=Bh;function R3(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const i=t._delegatedEventNames,r=Array.isArray(e)?e:$Ce(e);i.push(...r)}}function $Ce(e){return e.split(",").map(t=>t.trim())}function h0(e){return e&&typeof e.render=="function"}function Sse(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}const vE="esri-feature-content",wE={base:vE,loaderContainer:`${vE}__loader-container`,loader:`${vE}__loader`};let sm=class extends yi{constructor(t,i){super(t,i),this.viewModel=null,this._addTargetToAnchors=r=>{Array.from(r.querySelectorAll("a")).forEach(n=>{hse(n.href)&&!n.hasAttribute("target")&&n.setAttribute("target","_blank")})}}get creator(){var t;return(t=this.viewModel)==null?void 0:t.creator}set creator(t){this.viewModel&&(this.viewModel.creator=t)}get graphic(){var t;return(t=this.viewModel)==null?void 0:t.graphic}set graphic(t){this.viewModel&&(this.viewModel.graphic=t)}render(){var i;const t=(i=this.viewModel)==null?void 0:i.state;return B("div",{class:wE.base},t==="loading"?this._renderLoading():this._renderCreated())}_renderLoading(){return B("div",{class:wE.loaderContainer,key:"loader"},B("div",{class:wE.loader}))}_renderCreated(){var i;const t=(i=this.viewModel)==null?void 0:i.created;return t?t instanceof HTMLElement?B("div",{afterCreate:this._attachToNode,bind:t,key:t}):h0(t)?B("div",{key:t},!t.destroyed&&t.render()):B("div",{afterCreate:this._addTargetToAnchors,innerHTML:t,key:t}):null}_attachToNode(t){const i=this;t.appendChild(i)}};m([w()],sm.prototype,"creator",null),m([w()],sm.prototype,"graphic",null),m([w({type:v4})],sm.prototype,"viewModel",void 0),sm=m([H("esri.widgets.Feature.FeatureContent")],sm);const J5=sm;let dc=class extends Ve{constructor(t){super(t),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:t,fieldInfos:i}=this,r=[];return i==null||i.forEach(n=>{if(!(!n.hasOwnProperty("visible")||n.visible))return;const o=n.clone();o.label=dse(o,t),r.push(o)}),r}};m([w()],dc.prototype,"attributes",void 0),m([w({type:[Zte]})],dc.prototype,"expressionInfos",void 0),m([w()],dc.prototype,"description",void 0),m([w({type:[T3]})],dc.prototype,"fieldInfos",void 0),m([w({readOnly:!0})],dc.prototype,"formattedFieldInfos",null),m([w()],dc.prototype,"title",void 0),dc=m([H("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],dc);const uT=dc,ECe=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function MCe(e,t){if(typeof t!="string"||!t)return t;const i=ECe.find(v=>v.pattern.test(t));if(!i)return t;const r=t.match(i.pattern),n=r==null?void 0:r[2],o=Il(Il(i.label,{messages:e,hierPart:n}),{appName:i.appName}),c=i.target?` target="${i.target}"`:"",y=i.target==="_blank"?' rel="noreferrer"':"";return t.replace(i.pattern,`<a${c} href="$1"${y}>${o}</a>`)}const X_="esri-feature-fields",Q_={base:X_,fieldHeader:`${X_}__field-header`,fieldData:`${X_}__field-data`,fieldDataDate:`${X_}__field-data--date`};let Ja=class extends yi{constructor(t,i){super(t,i),this._featureElementInfo=null,this.viewModel=new uT,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new O3,this.addHandles(ge(()=>{var t,i;return[(t=this.viewModel)==null?void 0:t.description,(i=this.viewModel)==null?void 0:i.title]},()=>this._setupFeatureElementInfo(),qe))}destroy(){var t;(t=this._featureElementInfo)==null||t.destroy()}get attributes(){return this.viewModel.attributes}set attributes(t){this.viewModel.attributes=t}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(t){this.viewModel.expressionInfos=t}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(t){this.viewModel.fieldInfos=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}render(){var t;return B("div",{class:Q_.base},(t=this._featureElementInfo)==null?void 0:t.render(),this._renderFields())}_renderFieldInfo(t,i){var I;const{attributes:r}=this.viewModel,n=t.fieldName||"",o=t.label||n,c=r?r[n]==null?"":r[n]:"",y=!!((I=t.format)!=null&&I.dateFormat),v=typeof c=="number"&&!y?this._forceLTR(c):MCe(this.messagesURIUtils,c),_={[Q_.fieldDataDate]:y};return B("tr",{key:`fields-element-info-row-${n}-${i}`},B("th",{class:Q_.fieldHeader,innerHTML:o,key:`fields-element-info-row-header-${n}-${i}`}),B("td",{class:this.classes(Q_.fieldData,_),innerHTML:v,key:`fields-element-info-row-data-${n}-${i}`}))}_renderFields(){const{formattedFieldInfos:t}=this.viewModel;return t!=null&&t.length?B("table",{class:ze.table,summary:this.messages.fieldsSummary},B("tbody",null,t.map((i,r)=>this._renderFieldInfo(i,r)))):null}_setupFeatureElementInfo(){var r;const{description:t,title:i}=this;(r=this._featureElementInfo)==null||r.set({description:t,title:i})}_forceLTR(t){return`&lrm;${t}`}};m([w()],Ja.prototype,"attributes",null),m([w()],Ja.prototype,"description",null),m([w()],Ja.prototype,"expressionInfos",null),m([w()],Ja.prototype,"fieldInfos",null),m([w()],Ja.prototype,"title",null),m([w({type:uT,nonNullable:!0})],Ja.prototype,"viewModel",void 0),m([w(),Ht("esri/widgets/Feature/t9n/Feature")],Ja.prototype,"messages",void 0),m([w(),Ht("esri/widgets/support/t9n/uriUtils")],Ja.prototype,"messagesURIUtils",void 0),Ja=m([H("esri.widgets.Feature.FeatureFields")],Ja);const xse=Ja,ACe=/^-?(\d+)(\.(\d+))?$/i;function CCe(e,t){return e-t}function kCe(e,t){let i,r;return i=Number(e.toFixed(t)),i<e?r=i+1/10**t:(r=i,i-=1/10**t),i=Number(i.toFixed(t)),r=Number(r.toFixed(t)),[i,r]}function LCe(e,t,i,r,n){const o=Z5(e,t,i,r),c=o.previous==null||o.previous<=n,y=o.next==null||o.next<=n;return c&&y||o.previous+o.next<=2*n}function w4(e){const t=String(e),i=t.match(ACe);if(i!=null&&i[1])return{integer:i[1].split("").length,fractional:i[3]?i[3].split("").length:0};if(t.toLowerCase().includes("e")){const r=t.split("e"),n=r[0],o=r[1];if(n&&o){const c=Number(n);let y=Number(o);const v=y>0;v||(y=Math.abs(y));const _=w4(c);return v?(_.integer+=y,y>_.fractional?_.fractional=0:_.fractional-=y):(_.fractional+=y,y>_.integer?_.integer=1:_.integer-=y),_}}return{integer:0,fractional:0}}function Z5(e,t,i,r){const n={previous:null,next:null};if(i!=null){const o=e-i,c=t-i-o;n.previous=Math.floor(Math.abs(100*c/o))}if(r!=null){const o=r-e,c=r-t-o;n.next=Math.floor(Math.abs(100*c/o))}return n}function b4(e,t={}){const i=e.slice(),{tolerance:r=2,strictBounds:n=!1,indexes:o=i.map((c,y)=>y)}=t;o.sort(CCe);for(let c=0;c<o.length;c++){const y=o[c],v=i[y],_=y===0?null:i[y-1],I=y===i.length-1?null:i[y+1],$=w4(v).fractional;if($){let A,k=0,R=!1;for(;k<=$&&!R;){const N=kCe(v,k);A=n&&c===0?N[1]:N[0],R=LCe(v,A,_,I,r),k++}R&&(i[y]=A)}}return i}const OCe={maximumFractionDigits:20};function RCe(e){return jn(e,OCe)}var M7;let pf=M7=class extends be{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,i){t[i]=e??0}clone(){return new M7({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};m([w({type:je,json:{type:[Ct],write:!0}})],pf.prototype,"color",void 0),m([w({type:String,json:{write:!0}})],pf.prototype,"label",void 0),m([w({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],pf.prototype,"value",void 0),m([Le("value")],pf.prototype,"writeValue",null),pf=M7=m([H("esri.renderers.visualVariables.support.ColorStop")],pf);const PCe=pf;function NCe(e,t){function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i}function V1(e,t,i,r){var n=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(n,V1.prototype),n.expected=t,n.found=i,n.location=r,n.name="SyntaxError",n}function bE(e,t,i){return i=i||" ",e.length>t?e:(t-=e.length,e+(i+=i.repeat(t)).slice(0,t))}function FCe(e,t){var i,r={},n=(t=t!==void 0?t:{}).grammarSource,o={start:ot},c=ot,y="none",v=")",_=",",I="(",$="%",A="px",k="cm",R="mm",N="in",D="pt",j="pc",z="deg",U="rad",W="grad",Q="turn",K="#",ee=".",ie="e",ae=/^[ \t\n\r]/,ue=/^[a-z\-]/,Ie=/^[0-9a-fA-F]/,Ae=/^[+\-]/,Me=/^[0-9]/,fe=Ce("none"),se=oe("none",!1),ye=oe(")",!1),he=oe(",",!1),ce=Ce("whitespace"),xe=me([" ","	",`
`,"\r"],!1,!1),Ne=Ce("function"),Ze=oe("(",!1),lt=Ce("identifier"),Ot=me([["a","z"],"-"],!1,!1),Wt=Ce("percentage"),tr=oe("%",!1),Sr=Ce("length"),Un=oe("px",!1),ju=oe("cm",!1),iy=oe("mm",!1),zu=oe("in",!1),ch=oe("pt",!1),q3=oe("pc",!1),AT=Ce("angle"),CT=oe("deg",!1),kT=oe("rad",!1),kr=oe("grad",!1),Y=oe("turn",!1),Bn=Ce("number"),H3=Ce("color"),Bt=oe("#",!1),Hi=me([["0","9"],["a","f"],["A","F"]],!1,!1),Ho=me(["+","-"],!1,!1),Sn=me([["0","9"]],!1,!1),Ll=oe(".",!1),Vu=oe("e",!1),W3=function(){return[]},J3=function(re,Ee){return{type:"function",name:re,parameters:Ee||[]}},Uu=function(re,Ee){return Ee.length>0?ny(re,Ee,3):[re]},Fe=function(re){return{type:"quantity",value:re.value,unit:re.unit}},hh=function(re){return{type:"color",colorType:re.type,value:re.value}},d=function(re){return re},L=function(){return te()},S=function(re){return{value:re,unit:"%"}},h=function(re){return{value:re,unit:"px"}},l=function(re){return{value:re,unit:"cm"}},s=function(re){return{value:re,unit:"mm"}},a=function(re){return{value:re,unit:"in"}},u=function(re){return{value:re,unit:"pt"}},p=function(re){return{value:re,unit:"pc"}},f=function(re){return{value:re,unit:"deg"}},g=function(re){return{value:re,unit:"rad"}},b=function(re){return{value:re,unit:"grad"}},x=function(re){return{value:re,unit:"turn"}},T=function(re){return{value:re,unit:null}},M=function(){return{type:"hex",value:te()}},C=function(re){return{type:"function",value:re}},O=function(){return{type:"named",value:te()}},F=function(){return parseFloat(te())},P=0|t.peg$currPos,G=P,q=[{line:1,column:1}],V=P,Z=t.peg$maxFailExpected||[],X=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in o))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');c=o[t.startRule]}function te(){return e.substring(G,P)}function oe(re,Ee){return{type:"literal",text:re,ignoreCase:Ee}}function me(re,Ee,Pe){return{type:"class",parts:re,inverted:Ee,ignoreCase:Pe}}function Se(){return{type:"end"}}function Ce(re){return{type:"other",description:re}}function $e(re){var Ee,Pe=q[re];if(Pe)return Pe;if(re>=q.length)Ee=q.length-1;else for(Ee=re;!q[--Ee];);for(Pe={line:(Pe=q[Ee]).line,column:Pe.column};Ee<re;)e.charCodeAt(Ee)===10?(Pe.line++,Pe.column=1):Pe.column++,Ee++;return q[re]=Pe,Pe}function Ue(re,Ee,Pe){var pt=$e(re),Ii=$e(Ee);return{source:n,start:{offset:re,line:pt.line,column:pt.column},end:{offset:Ee,line:Ii.line,column:Ii.column}}}function Te(re){P<V||(P>V&&(V=P,Z=[]),Z.push(re))}function ut(re,Ee,Pe){return new V1(V1.buildMessage(re,Ee),re,Ee,Pe)}function ot(){var re;return(re=Rt())===r&&(re=hi()),re}function Rt(){var re,Ee;return X++,re=P,ct(),e.substr(P,4)===y?(Ee=y,P+=4):(Ee=r,X===0&&Te(se)),Ee!==r?(ct(),G=re,re=W3()):(P=re,re=r),X--,re===r&&X===0&&Te(fe),re}function hi(){var re,Ee;if(re=[],(Ee=ir())!==r)for(;Ee!==r;)re.push(Ee),Ee=ir();else re=r;return re}function ir(){var re,Ee,Pe,pt;return re=P,ct(),(Ee=Tt())!==r?(ct(),(Pe=mi())===r&&(Pe=null),ct(),e.charCodeAt(P)===41?(pt=v,P++):(pt=r,X===0&&Te(ye)),pt!==r?(ct(),G=re,re=J3(Ee,Pe)):(P=re,re=r)):(P=re,re=r),re}function mi(){var re,Ee,Pe,pt,Ii,dr,Br,Ns;if(re=P,(Ee=Pt())!==r){for(Pe=[],pt=P,Ii=ct(),e.charCodeAt(P)===44?(dr=_,P++):(dr=r,X===0&&Te(he)),dr===r&&(dr=null),Br=ct(),(Ns=Pt())!==r?pt=Ii=[Ii,dr,Br,Ns]:(P=pt,pt=r);pt!==r;)Pe.push(pt),pt=P,Ii=ct(),e.charCodeAt(P)===44?(dr=_,P++):(dr=r,X===0&&Te(he)),dr===r&&(dr=null),Br=ct(),(Ns=Pt())!==r?pt=Ii=[Ii,dr,Br,Ns]:(P=pt,pt=r);G=re,re=Uu(Ee,Pe)}else P=re,re=r;return re}function Pt(){var re,Ee;return re=P,(Ee=_i())===r&&(Ee=fo())===r&&(Ee=Lt())===r&&(Ee=xn()),Ee!==r&&(G=re,Ee=Fe(Ee)),(re=Ee)===r&&(re=P,(Ee=Zt())!==r&&(G=re,Ee=hh(Ee)),re=Ee),re}function ct(){var re,Ee;for(X++,re=[],Ee=e.charAt(P),ae.test(Ee)?P++:(Ee=r,X===0&&Te(xe));Ee!==r;)re.push(Ee),Ee=e.charAt(P),ae.test(Ee)?P++:(Ee=r,X===0&&Te(xe));return X--,Ee=r,X===0&&Te(ce),re}function Tt(){var re,Ee,Pe;return X++,re=P,(Ee=Mi())!==r?(e.charCodeAt(P)===40?(Pe=I,P++):(Pe=r,X===0&&Te(Ze)),Pe!==r?(G=re,re=d(Ee)):(P=re,re=r)):(P=re,re=r),X--,re===r&&(Ee=r,X===0&&Te(Ne)),re}function Mi(){var re,Ee,Pe;if(X++,re=P,Ee=[],Pe=e.charAt(P),ue.test(Pe)?P++:(Pe=r,X===0&&Te(Ot)),Pe!==r)for(;Pe!==r;)Ee.push(Pe),Pe=e.charAt(P),ue.test(Pe)?P++:(Pe=r,X===0&&Te(Ot));else Ee=r;return Ee!==r&&(G=re,Ee=L()),X--,(re=Ee)===r&&(Ee=r,X===0&&Te(lt)),re}function _i(){var re,Ee,Pe;return X++,re=P,ct(),(Ee=In())!==r?(e.charCodeAt(P)===37?(Pe=$,P++):(Pe=r,X===0&&Te(tr)),Pe!==r?(G=re,re=S(Ee)):(P=re,re=r)):(P=re,re=r),X--,re===r&&X===0&&Te(Wt),re}function fo(){var re,Ee,Pe;return X++,re=P,ct(),(Ee=In())!==r?(e.substr(P,2)===A?(Pe=A,P+=2):(Pe=r,X===0&&Te(Un)),Pe!==r?(G=re,re=h(Ee)):(P=re,re=r)):(P=re,re=r),re===r&&(re=P,ct(),(Ee=In())!==r?(e.substr(P,2)===k?(Pe=k,P+=2):(Pe=r,X===0&&Te(ju)),Pe!==r?(G=re,re=l(Ee)):(P=re,re=r)):(P=re,re=r),re===r&&(re=P,ct(),(Ee=In())!==r?(e.substr(P,2)===R?(Pe=R,P+=2):(Pe=r,X===0&&Te(iy)),Pe!==r?(G=re,re=s(Ee)):(P=re,re=r)):(P=re,re=r),re===r&&(re=P,ct(),(Ee=In())!==r?(e.substr(P,2)===N?(Pe=N,P+=2):(Pe=r,X===0&&Te(zu)),Pe!==r?(G=re,re=a(Ee)):(P=re,re=r)):(P=re,re=r),re===r&&(re=P,ct(),(Ee=In())!==r?(e.substr(P,2)===D?(Pe=D,P+=2):(Pe=r,X===0&&Te(ch)),Pe!==r?(G=re,re=u(Ee)):(P=re,re=r)):(P=re,re=r),re===r&&(re=P,ct(),(Ee=In())!==r?(e.substr(P,2)===j?(Pe=j,P+=2):(Pe=r,X===0&&Te(q3)),Pe!==r?(G=re,re=p(Ee)):(P=re,re=r)):(P=re,re=r)))))),X--,re===r&&X===0&&Te(Sr),re}function Lt(){var re,Ee,Pe;return X++,re=P,(Ee=In())!==r?(e.substr(P,3)===z?(Pe=z,P+=3):(Pe=r,X===0&&Te(CT)),Pe!==r?(G=re,re=f(Ee)):(P=re,re=r)):(P=re,re=r),re===r&&(re=P,(Ee=In())!==r?(e.substr(P,3)===U?(Pe=U,P+=3):(Pe=r,X===0&&Te(kT)),Pe!==r?(G=re,re=g(Ee)):(P=re,re=r)):(P=re,re=r),re===r&&(re=P,(Ee=In())!==r?(e.substr(P,4)===W?(Pe=W,P+=4):(Pe=r,X===0&&Te(kr)),Pe!==r?(G=re,re=b(Ee)):(P=re,re=r)):(P=re,re=r),re===r&&(re=P,(Ee=In())!==r?(e.substr(P,4)===Q?(Pe=Q,P+=4):(Pe=r,X===0&&Te(Y)),Pe!==r?(G=re,re=x(Ee)):(P=re,re=r)):(P=re,re=r)))),X--,re===r&&(Ee=r,X===0&&Te(AT)),re}function xn(){var re,Ee;return X++,re=P,ct(),(Ee=In())!==r?(G=re,re=T(Ee)):(P=re,re=r),X--,re===r&&X===0&&Te(Bn),re}function Zt(){var re,Ee,Pe,pt;if(X++,re=P,e.charCodeAt(P)===35?(Ee=K,P++):(Ee=r,X===0&&Te(Bt)),Ee!==r){if(Pe=[],pt=e.charAt(P),Ie.test(pt)?P++:(pt=r,X===0&&Te(Hi)),pt!==r)for(;pt!==r;)Pe.push(pt),pt=e.charAt(P),Ie.test(pt)?P++:(pt=r,X===0&&Te(Hi));else Pe=r;Pe!==r?(G=re,re=M()):(P=re,re=r)}else P=re,re=r;return re===r&&(re=P,(Ee=ir())!==r&&(G=re,Ee=C(Ee)),(re=Ee)===r&&(re=P,(Ee=Mi())!==r&&(G=re,Ee=O()),re=Ee)),X--,re===r&&(Ee=r,X===0&&Te(H3)),re}function In(){var re,Ee,Pe,pt,Ii,dr,Br,Ns;for(re=P,Ee=e.charAt(P),Ae.test(Ee)?P++:(Ee=r,X===0&&Te(Ho)),Ee===r&&(Ee=null),Pe=P,pt=[],Ii=e.charAt(P),Me.test(Ii)?P++:(Ii=r,X===0&&Te(Sn));Ii!==r;)pt.push(Ii),Ii=e.charAt(P),Me.test(Ii)?P++:(Ii=r,X===0&&Te(Sn));if(e.charCodeAt(P)===46?(Ii=ee,P++):(Ii=r,X===0&&Te(Ll)),Ii!==r){if(dr=[],Br=e.charAt(P),Me.test(Br)?P++:(Br=r,X===0&&Te(Sn)),Br!==r)for(;Br!==r;)dr.push(Br),Br=e.charAt(P),Me.test(Br)?P++:(Br=r,X===0&&Te(Sn));else dr=r;dr!==r?Pe=pt=[pt,Ii,dr]:(P=Pe,Pe=r)}else P=Pe,Pe=r;if(Pe===r)if(Pe=[],pt=e.charAt(P),Me.test(pt)?P++:(pt=r,X===0&&Te(Sn)),pt!==r)for(;pt!==r;)Pe.push(pt),pt=e.charAt(P),Me.test(pt)?P++:(pt=r,X===0&&Te(Sn));else Pe=r;if(Pe!==r){if(pt=P,e.charCodeAt(P)===101?(Ii=ie,P++):(Ii=r,X===0&&Te(Vu)),Ii!==r){if(dr=e.charAt(P),Ae.test(dr)?P++:(dr=r,X===0&&Te(Ho)),dr===r&&(dr=null),Br=[],Ns=e.charAt(P),Me.test(Ns)?P++:(Ns=r,X===0&&Te(Sn)),Ns!==r)for(;Ns!==r;)Br.push(Ns),Ns=e.charAt(P),Me.test(Ns)?P++:(Ns=r,X===0&&Te(Sn));else Br=r;Br!==r?pt=Ii=[Ii,dr,Br]:(P=pt,pt=r)}else P=pt,pt=r;pt===r&&(pt=null),G=re,re=F()}else P=re,re=r;return re}function ry(re,Ee){return re.map(function(Pe){return Pe[Ee]})}function ny(re,Ee,Pe){return[re].concat(ry(Ee,Pe))}if(i=c(),t.peg$library)return{peg$result:i,peg$currPos:P,peg$FAILED:r,peg$maxFailExpected:Z,peg$maxFailPos:V};if(i!==r&&P===e.length)return i;throw i!==r&&P<e.length&&Te(Se()),ut(Z,V<e.length?e.charAt(V):null,V<e.length?Ue(V,V+1):Ue(V,V))}function XR(e){if(!e||e.length===0)return null;if(typeof e=="string"){const i=AU(e);return i&&i.length!==0?i:null}const t=e.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new ne("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:AU(i.value)}});t.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<t.length-1;i++){if(!pte(t[i].effects,t[i+1].effects))throw new ne("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[i].effects,b:t[i+1].effects});fte(t[i].effects,t[i+1].effects)}return t.sort((i,r)=>r.scale-i.scale),t}function AU(e){let t;if(!e)return[];try{t=FCe(e)}catch(i){throw new ne("effect:invalid-syntax","Invalid effect syntax",{value:e,error:i})}return t.map(i=>DCe(i))}function DCe(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return jCe(e);case"opacity":return zCe(e);case"hue-rotate":return VCe(e);case"blur":return UCe(e);case"drop-shadow":return BCe(e);case"bloom":return GCe(e)}}catch(t){throw t.details.filter=e,t}throw new ne("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function jCe(e){let t=1;return Kg(e.parameters,1),e.parameters.length===1&&(t=dl(e.parameters[0])),new EA(e.name,t)}function zCe(e){let t=1;return Kg(e.parameters,1),e.parameters.length===1&&(t=dl(e.parameters[0])),new hte(t)}function VCe(e){let t=0;return Kg(e.parameters,1),e.parameters.length===1&&(t=KCe(e.parameters[0])),new ute(t)}function UCe(e){let t=0;return Kg(e.parameters,1),e.parameters.length===1&&(t=tP(e.parameters[0]),P3(t,e.parameters[0])),new nte(t)}function BCe(e){const t=[];let i=null;for(const r of e.parameters)if(r.type==="color"){if(t.length&&Object.freeze(t),i)throw new ne("effect:type-error","Accepts only one color",{});i=YCe(r)}else{const n=tP(r);if(Object.isFrozen(t))throw new ne("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(n),t.length===3&&P3(n,r)}if(t.length<2||t.length>3)throw new ne("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new ate(t[0],t[1],t[2]||0,i||Ise("black"))}function GCe(e){let t=1,i=0,r=0;return Kg(e.parameters,3),e.parameters[0]&&(t=dl(e.parameters[0])),e.parameters[1]&&(i=tP(e.parameters[1]),P3(i,e.parameters[1])),e.parameters[2]&&(r=dl(e.parameters[2])),new ite(t,i,r)}function Kg(e,t){if(e.length>t)throw new ne("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function cT(e){if(e.type==="color")return"<color>";if(e.unit){if(e.unit in eP)return"<length>";if(e.unit in QR)return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function P3(e,t){if(e<0)throw new ne("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function qCe(e){if(e.type!=="quantity"||e.unit!==null)throw new ne("effect:type-error",`Expected <double>, Actual: ${cT(e)}`,{term:e})}function HCe(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new ne("effect:type-error",`Expected <double> or <percentage>, Actual: ${cT(e)}`,{term:e})}NCe(V1,Error),V1.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var i,r=null;for(i=0;i<e.length;i++)if(e[i].source===this.location.source){r=e[i].text.split(/\r\n|\n|\r/g);break}var n=this.location.start,o=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(n):n,c=this.location.source+":"+o.line+":"+o.column;if(r){var y=this.location.end,v=bE("",o.line.toString().length," "),_=r[n.line-1],I=(n.line===y.line?y.column:_.length+1)-n.column||1;t+=`
 --> `+c+`
`+v+` |
`+o.line+" | "+_+`
`+v+" | "+bE("",n.column-1," ")+bE("",I,"^")}else t+=`
 at `+c}return t},V1.buildMessage=function(e,t){var i={literal:function(_){return'"'+n(_.text)+'"'},class:function(_){var I=_.parts.map(function($){return Array.isArray($)?o($[0])+"-"+o($[1]):o($)});return"["+(_.inverted?"^":"")+I.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(_){return _.description}};function r(_){return _.charCodeAt(0).toString(16).toUpperCase()}function n(_){return _.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(I){return"\\x0"+r(I)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(I){return"\\x"+r(I)})}function o(_){return _.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(I){return"\\x0"+r(I)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(I){return"\\x"+r(I)})}function c(_){return i[_.type](_)}function y(_){var I,$,A=_.map(c);if(A.sort(),A.length>0){for(I=1,$=1;I<A.length;I++)A[I-1]!==A[I]&&(A[$]=A[I],$++);A.length=$}switch(A.length){case 1:return A[0];case 2:return A[0]+" or "+A[1];default:return A.slice(0,-1).join(", ")+", or "+A[A.length-1]}}function v(_){return _?'"'+n(_)+'"':"end of input"}return"Expected "+y(e)+" but "+v(t)+" found."};const QR={deg:1,grad:.9,rad:180/Math.PI,turn:360};function WCe(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&QR[e.unit]!=null))throw new ne("effect:type-error",`Expected <angle>, Actual: ${cT(e)}`,{term:e})}const eP={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function JCe(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&eP[e.unit]!=null))throw new ne("effect:type-error",`Expected <length>, Actual: ${cT(e)}`,{term:e})}function dl(e){HCe(e);const t=e.value;return P3(t,e),e.unit==="%"?.01*t:t}function ZCe(e){return qCe(e),P3(e.value,e),e.value}function KCe(e){return WCe(e),e.value*QR[e.unit]||0}function tP(e){return JCe(e),e.value*eP[e.unit]||0}function YCe(e){switch(e.colorType){case"hex":return cSe(e.value);case"named":return Ise(e.value);case"function":return e7e(e.value)}}function Ise(e){if(!Jee(e))throw new ne("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return uSe(e)}const XCe=/^rgba?/i,QCe=/^hsla?/i;function e7e(e){if(Kg(e.parameters,4),XCe.test(e.name))return[dl(e.parameters[0]),dl(e.parameters[1]),dl(e.parameters[2]),e.parameters[3]?dl(e.parameters[3]):1];if(QCe.test(e.name))return Zee(ZCe(e.parameters[0]),dl(e.parameters[1]),dl(e.parameters[2]),e.parameters[3]?dl(e.parameters[3]):1);throw new ne("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function N2(e,t,i){var r;try{return i7e(e)}catch(n){(r=i==null?void 0:i.messages)==null||r.push(n)}return null}function F2(e,t,i,r){try{const n=t7e(e);Qr(i,n,t)}catch(n){r.messages&&r.messages.push(n)}}function t7e(e){const t=XR(e);return t?b5e(t)?t.map(i=>i.toJSON()):t.map(({scale:i,effects:r})=>({scale:i,value:r.map(n=>n.toJSON())})):null}function i7e(e){if(!e||e.length===0)return null;if(r7e(e)){const t=[];for(const i of e)t.push({scale:i.scale,value:_4(i.value)});return t}return _4(e)}function r7e(e){const t=e[0];return!!t&&"scale"in t}function _4(e){if(!(e!=null&&e.length))return"";const t=[];for(const i of e){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[Ju(i,"amount")];break;case"blur":r=[Ju(i,"radius","pt")];break;case"hue-rotate":r=[Ju(i,"angle","deg")];break;case"drop-shadow":r=[Ju(i,"xoffset","pt"),Ju(i,"yoffset","pt"),Ju(i,"blurRadius","pt"),n7e(i,"color")];break;case"bloom":r=[Ju(i,"strength"),Ju(i,"radius","pt"),Ju(i,"threshold")]}const n=`${i.type}(${r.filter(Boolean).join(" ")})`;XR(n),t.push(n)}return t.join(" ")}function Ju(e,t,i){if(e[t]==null)throw new ne("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return i?e[t]+i:""+e[t]}function n7e(e,t){if(e[t]==null)throw new ne("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const i=e[t];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}var CU,kU,LU,OU,RU,PU,NU,FU,DU,jU,A7,C7,zU,VU,UU,BU,GU,qU,HU,WU,JU,ZU,KU,YU,XU,QU,eB,tB,iB,rB,nB,sB,oB,aB,lB,uB,cB,hB,dB,pB,fB,yB,mB,gB,vB,wB,bB,_B,SB,xB,IB,TB,$B,EB,MB,AB,CB,kB,LB,OB,RB,PB;(function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"})(CU||(CU={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(kU||(kU={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(LU||(LU={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(OU||(OU={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(RU||(RU={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(PU||(PU={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(NU||(NU={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(FU||(FU={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(DU||(DU={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(jU||(jU={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(A7||(A7={})),function(e){e.Linear="Linear",e.EaseIn="EaseIn",e.EaseOut="EaseOut",e.EaseInOut="EaseInOut"}(C7||(C7={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(zU||(zU={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(VU||(VU={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(UU||(UU={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(BU||(BU={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(GU||(GU={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(qU||(qU={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(HU||(HU={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(WU||(WU={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(JU||(JU={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees",e.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",e.ConcentricCircles="ConcentricCircles",e.DoubleJogArrow="DoubleJogArrow",e.LinkedChevrons="LinkedChevrons",e.SegmentThenHalfCircle="SegmentThenHalfCircle",e.LineWithStraightTicks="LineWithStraightTicks",e.DoubleCurve="DoubleCurve",e.ParallelWithTicksByWidth="ParallelWithTicksByWidth",e.EnclosingRoundedRectangle="EnclosingRoundedRectangle"}(ZU||(ZU={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(KU||(KU={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(YU||(YU={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(XU||(XU={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(QU||(QU={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(eB||(eB={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(tB||(tB={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(iB||(iB={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(rB||(rB={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(nB||(nB={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(sB||(sB={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(oB||(oB={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(aB||(aB={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(lB||(lB={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(uB||(uB={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(cB||(cB={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(hB||(hB={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(dB||(dB={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(pB||(pB={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(fB||(fB={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(yB||(yB={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(mB||(mB={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(gB||(gB={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(vB||(vB={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(wB||(wB={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(bB||(bB={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(_B||(_B={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(SB||(SB={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(xB||(xB={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(IB||(IB={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(TB||(TB={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}($B||($B={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(EB||(EB={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(MB||(MB={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(AB||(AB={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(CB||(CB={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(kB||(kB={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(LB||(LB={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(OB||(OB={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(RB||(RB={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(PB||(PB={}));const s7e={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},k7={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:A7.Loop,repeatdelay:0,easing:C7.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0},CIMSymbolAnimationOffset:{offsetx:0,offsety:0}};function qet(e){return[e.r,e.g,e.b,e.a]}const o7e=` /-,
`;function NB(e){let t=e.length;for(;t--;)if(!o7e.includes(e.charAt(t)))return!1;return!0}function a7e(e,t){const i=[];let r=0,n=-1;do if(n=e.indexOf("[",r),n>=r){if(n>r){const o=e.slice(r,n);i.push([o,null,NB(o)])}if(r=n+1,n=e.indexOf("]",r),n>=r){if(n>r){const o=t[e.slice(r,n)];o&&i.push([null,o,!1])}r=n+1}}while(n!==-1);if(r<e.length){const o=e.slice(r);i.push([o,null,NB(o)])}return i}function l7e(e,t,i,r){let n="",o=null;for(const c of t){const[y,v,_]=c;if(y)_?o=y:(o&&(n+=o,o=null),n+=y);else{let I=v;i!=null&&(I=Ase(v,i));const $=e.attributes[I];$&&(o&&(n+=o,o=null),n+=$)}}return u7e(n,r)}function u7e(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function Het(e,t,i,r,n,o,c=!0){const y=t/n,v=i/o,_=Math.ceil(y/2),I=Math.ceil(v/2);for(let $=0;$<o;$++)for(let A=0;A<n;A++){const k=4*(A+(c?o-$-1:$)*n);let R=0,N=0,D=0,j=0,z=0,U=0,W=0;const Q=($+.5)*v;for(let K=Math.floor($*v);K<($+1)*v;K++){const ee=Math.abs(Q-(K+.5))/I,ie=(A+.5)*y,ae=ee*ee;for(let ue=Math.floor(A*y);ue<(A+1)*y;ue++){let Ie=Math.abs(ie-(ue+.5))/_;const Ae=Math.sqrt(ae+Ie*Ie);Ae>=-1&&Ae<=1&&(R=2*Ae*Ae*Ae-3*Ae*Ae+1,R>0&&(Ie=4*(ue+K*t),W+=R*e[Ie+3],D+=R,e[Ie+3]<255&&(R=R*e[Ie+3]/250),j+=R*e[Ie],z+=R*e[Ie+1],U+=R*e[Ie+2],N+=R))}}r[k]=j/N,r[k+1]=z/N,r[k+2]=U/N,r[k+3]=W/D}}function Tse(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function $se(e){var t;return((t=e.data)==null?void 0:t.symbol)??null}function Ese(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function Mse(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function Wet(e){return e!=null&&(e.type==="CIMGradientFill"||e.type==="CIMHatchFill"||e.type==="CIMPictureFill"||e.type==="CIMSolidFill"||e.type==="CIMWaterFill")}function iP(e){return e!=null&&(e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices")}const Jet=(e,t=0)=>e==null||isNaN(e)?t:e,Zet=(e,t)=>e??t,Ket=(e,t)=>e??t,Yet=e=>e.tintColor?Tse(e.tintColor):[255,255,255,1],Xet=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function Qet(){return de(()=>import("./geometryEngineJSON--yhNuyeh.js").then(e=>e.g),__vite__mapDeps([5,6]),import.meta.url)}function ett(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function ttt(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function itt(e){let t="normal",i="normal";if(e){const r=e.toLowerCase();r.includes("italic")?t="italic":r.includes("oblique")&&(t="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:t,weight:i}}function rtt(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function FB(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const i=FB(t);if(i!=null)return i}break;case"CIMTextSymbol":return FB(e.symbol);case"CIMSolidFill":return e.color}return null}function DB(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const i of t){const r=DB(i);if(r!=null)return r}break}case"CIMTextSymbol":return DB(e.symbol);case"CIMSolidStroke":return e.color}}function jB(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const i=jB(t);if(i!==void 0)return i}break;case"CIMTextSymbol":return jB(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function ntt(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function stt(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function c7e(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:typeof e[t]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const ott=e=>e.includes("data:image/svg+xml");function att(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function hT(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function ltt(e,t,i,r,n,o,c=!0){const{infos:y}=o;let v=1,_=0,I=0,$=0,A=1;for(const{absoluteAnchorPoint:N,offsetX:D,offsetY:j,rotation:z,size:U,frameHeight:W,rotateClockWise:Q,scaleSymbolsProportionally:K}of y)A=N?1:v,I=UB(D,j,_,A,I),$=VB(D,j,_,A,$),W&&(K||c)&&(v*=U/W),_=BB(z,Q,_);const k=UB(r,n,_,A,I),R=VB(r,n,_,A,$);return{size:e*v,rotation:BB(t,i,_),offsetX:k,offsetY:R}}function h7e(e){if(e==null)return!1;if(Array.isArray(e))return e.every(t=>h7e(t));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function d7e(e,t){if(t==="color"||t==="outlinecolor"||t==="backgroundcolor"||t==="borderlinecolor"||t==="tintcolor")return[...s7e[t]];const i=k7[e];if(!i)throw new Error(`InternalError: default value for type ${e}.`);return i[t]}function p7e(e){return e.split(" ").map(t=>Number(t))}function f7e(e){return typeof e=="string"?p7e(e):e}function y7e(e){return e!=null&&e.dashTemplate&&(e.dashTemplate=f7e(e.dashTemplate)),e}function L7(e){if(e==null)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const i of t)if(i.type==="CIMVectorMarker")return L7(i)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const i of t)if(i.symbol)return L7(i.symbol)}}return"Normal"}function utt(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers){for(const i of e.symbolLayers)if(i)switch(i.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const r=i.size??k7.CIMVectorMarker.size;r>t&&(t=r);break}}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers){for(const i of e.symbolLayers)if(i)switch(i.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const r=i.width;r!=null&&r>t&&(t=r);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(i.markerPlacement&&iP(i.markerPlacement)){const r=i.size??k7.CIMVectorMarker.size;r>t&&(t=r)}break;case"CIMPictureFill":{const r=i.height;r!=null&&r>t&&(t=r)}}}return t}}}function Ase(e,t){if(t!==null){const i=t.get(e);return i?i.name:e}return e}function m7e(e){return e.map(t=>({...t,propertyName:hT(t.propertyName)}))}function zB(e){const t={};for(const i in e){const r=e[i];t[hT(i)]=r}return t}function VB(e,t,i,r,n){const o=i*Math.PI/180;if(o){const c=Math.cos(o);return(Math.sin(o)*e+c*t)*r+n}return t*r+n}function UB(e,t,i,r,n){const o=i*Math.PI/180;return o?(Math.cos(o)*e-Math.sin(o)*t)*r+n:e*r+n}function BB(e,t,i){return t?i-e:i+e}function ctt(e,t,i){const r=i==="Color"||i==="TintColor"||i==="ToColor",n=i==="Rotation"||i==="Angle"||i==="ToRotation";let o=t[hT(i)];if(o!=null&&(r?o=[o[0]/255,o[1]/255,o[2]/255,o[3]/255]:n&&(o*=Math.PI/180)),o==null&&(o=d7e(t.type,i.toLowerCase()),o!=null&&(r?o=[o[0]/255,o[1]/255,o[2]/255,o[3]]:n&&(o*=Math.PI/180))),t.primitiveName!=null){const c=e[t.primitiveName];if(c!=null){const y=c[i];y==null||(typeof y=="string"||typeof y=="number"||Array.isArray(y)?(o=y,o!=null&&(r?o=[o[0]/255,o[1]/255,o[2]/255,o[3]/255]:n&&(o*=Math.PI/180))):(o={valueExpressionInfo:y,defaultValue:o},o!=null&&(r?o={type:"Process",op:"ArcadeColor",value:o}:n&&(o={type:"Process",op:"Divide",left:o,right:180/Math.PI}))))}}if(o==null)throw new Error(`Failed to derive a value or an expression for "${i}".`);return o}function Cse(e){const t=[];return O7($se(e),t),t.length?new je(Tse(t[0])):null}function O7(e,t){var n;if(!e)return;let i;i=e.type==="CIMTextSymbol"?e.symbol:e;const r=e.type==="CIMPolygonSymbol";if(i!=null&&i.symbolLayers){for(const o of i.symbolLayers)if(!(o.colorLocked||r&&(Mse(o)||Ese(o)&&o.markerPlacement&&iP(o.markerPlacement))))switch(o.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":o.tintColor&&GB(t,o.tintColor);break;case"CIMVectorMarker":(n=o.markerGraphics)==null||n.forEach(c=>{O7(c.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":GB(t,o.color);break;case"CIMHatchFill":O7(o.lineSymbol,t)}}}function GB(e,t){for(const i of e)if(i.join(".")===t.join("."))return;e.push(t)}function kse(e,t,i){t instanceof je||(t=new je(t));const r=$se(e);r&&R7(r,t)}function R7(e,t,i){var o;if(!e)return;let r;r=e.type==="CIMTextSymbol"?e.symbol:e;const n=(r==null?void 0:r.type)==="CIMPolygonSymbol";if(r!=null&&r.symbolLayers)for(const c of r.symbolLayers){if(c.colorLocked||n&&(Mse(c)||Ese(c)&&c.markerPlacement&&iP(c.markerPlacement)))continue;const y=t.toArray();switch(c.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":c.tintColor=y;break;case"CIMVectorMarker":(o=c.markerGraphics)==null||o.forEach(v=>{R7(v.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":c.color=y;break;case"CIMHatchFill":R7(c.lineSymbol,t)}}}const P7=-3,g7e=P7-1;var Ac;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(Ac||(Ac={}));let v7e=class{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new t0,this._users=new t0}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,i){this._removeFuncs.push([t,i])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(i=>i[0]!==t)}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,-1),this._checkSize()}getSize(t,i){const r=this._db.get(t.id+i);return(r==null?void 0:r.size)??0}put(t,i,r,n,o){i=t.id+i;const c=this._db.get(i);if(c&&(this._size-=c.size,t.size-=c.size,this._db.delete(i),c.entry!==r&&this._notifyRemove(i,c.entry,c.size,Ac.ALL)),n>this._maxSize)return void this._notifyRemove(i,r,n,Ac.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return console.warn(`Refusing to cache entry with size ${n} for key ${i}`),void this._notifyRemove(i,r,0,Ac.ALL);const y=1+Math.max(o,g7e)-P7;this._db.set(i,new w7e(r,n,y)),this._size+=n,t.size+=n,this._checkSize()}updateSize(t,i,r,n){i=t.id+i;const o=this._db.get(i);if(o&&o.entry===r){for(this._size-=o.size,t.size-=o.size;n>this._maxSize;){const c=this._notifyRemove(i,r,n,Ac.SOME);if(!(c!=null&&c>0))return void this._db.delete(i);n=c}o.size=n,this._size+=n,t.size+=n,this._checkSize()}}pop(t,i){i=t.id+i;const r=this._db.get(i);if(r)return this._size-=r.size,t.size-=r.size,this._db.delete(i),++this._hit,r.entry;++this._miss}get(t,i){i=t.id+i;const r=this._db.get(i);if(r!==void 0)return this._db.delete(i),r.lives=r.lifetime,this._db.set(i,r),++this._hit,r.entry;++this._miss}peek(t,i){const r=this._db.get(t.id+i);return r?++this._hit:++this._miss,r==null?void 0:r.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((c,y)=>{const v=c.lifetime;r[v]=(r[v]||0)+c.size,this._users.forAll(_=>{const{id:I,name:$}=_;if(y.startsWith(I)){const A=i[$]||0;i[$]=A+c.size}})});const n={};this._users.forAll(c=>{const y=c.name;if("hitRate"in c&&typeof c.hitRate=="number"&&!isNaN(c.hitRate)&&c.hitRate>0){const v=i[y]||0;i[y]=v,n[y]=Math.round(100*c.hitRate)+"%"}else n[y]="0%"});const o=Object.keys(i);o.sort((c,y)=>i[y]-i[c]),o.forEach(c=>t[c]=Math.round(i[c]/2**20)+"MB / "+n[c]);for(let c=r.length-1;c>=0;--c){const y=r[c];y&&(t["Priority "+(c+P7-1)]=Math.round(y/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){const i=t.id;this._db.forEach((r,n)=>{n.startsWith(i)&&(this._size-=r.size,this._db.delete(n),this._notifyRemove(n,r.entry,r.size,Ac.ALL))}),t.size=0}clearAll(){this._db.forEach((t,i)=>this._notifyRemove(i,t.entry,t.size,Ac.ALL)),this._users.forAll(t=>t.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,i,r,n){let o;return this._removeFuncs.some(c=>{if(t.startsWith(c[0])){const y=c[1](i,n,r);return typeof y=="number"&&(o=y),!0}return!1}),o}_checkSize(){this._users.forAll(t=>this._checkSizeLimits(t)),this._checkSizeLimits()}_checkSizeLimits(t){const i=t??this;if(i.maxSize<0||i.size<=i.maxSize)return;const r=t==null?void 0:t.id;let n=!0;for(;n;){n=!1;for(const[o,c]of this._db)if(c.lifetime===0&&(!r||o.startsWith(r))){if(this._purgeItem(o,c,t),i.size<=.9*i.maxSize)return;n||(n=this._db.has(o))}}for(const[o,c]of this._db)if((!r||o.startsWith(r))&&(this._purgeItem(o,c,t),i.size<=.9*i.maxSize))return}_purgeItem(t,i,r=this._users.find(n=>t.startsWith(n.id))){if(this._db.delete(t),i.lives<=1){this._size-=i.size,r&&(r.size-=i.size);const n=this._notifyRemove(t,i.entry,i.size,Ac.SOME);n!=null&&n>0&&(this._size+=n,r&&(r.size+=n),i.lives=i.lifetime,i.size=n,this._db.set(t,i))}else--i.lives,this._db.set(t,i)}},w7e=class{constructor(t,i,r){this.entry=t,this.size=i,this.lifetime=r,this.lives=r}},Lse=class{constructor(t,i){this._storage=new v7e,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),i&&this._storage.registerRemoveFunc("",i)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,i,r=1){this._storage.put(this,t,i,r,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}};const Ose="picture-fill",Rse="simple-fill",b7e="simple-line",Pse="simple-marker",_7e="text",S7e="cim",qB=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),_E=new Lse(1e3);function x7e(e){const t=e.style;let i=null;if(e)switch(e.type){case Pse:t!=="cross"&&t!=="x"&&(i=e.color);break;case Rse:t&&t!=="solid"?t!=="none"&&(i={type:"pattern",x:0,y:0,src:jt(`esri/symbols/patterns/${t}.png`),width:5,height:5}):i=e.color;break;case Ose:i={type:"pattern",src:e.url,width:Qi(e.width)*e.xscale,height:Qi(e.height)*e.yscale,x:Qi(e.xoffset),y:Qi(e.yoffset)};break;case _7e:i=e.color;break;case S7e:i=Cse(e)}return i}function I7e(e,t){const i=e+"-"+t;return _E.get(i)!==void 0?Promise.resolve(_E.get(i)):Et(e,{responseType:"image"}).then(r=>{const n=r.data,o=n.naturalWidth,c=n.naturalHeight,y=document.createElement("canvas");y.width=o,y.height=c;const v=y.getContext("2d");v.fillStyle=t,v.fillRect(0,0,o,c),v.globalCompositeOperation="destination-in",v.drawImage(n,0,0);const _=y.toDataURL();return _E.put(i,_),_})}function D2(e){if(!e)return null;let t=null;switch(e.type){case Rse:case Ose:case Pse:t=D2(e.outline);break;case b7e:{const i=Qi(e.width);e.style!=null&&e.style!=="none"&&i!==0&&(t={color:e.color,style:rP(e.style),width:i,cap:e.cap,join:e.join==="miter"?Qi(e.miterLimit):e.join},t.dashArray=Nse(t).join(",")||"none");break}default:t=null}return t}function Nse(e){if(!(e!=null&&e.style))return[];const{dashArray:t,style:i,width:r}=e;if(typeof t=="string"&&t!=="none")return t.split(",").map(c=>Number(c));const n=r??0,o=qB.has(i)?qB.get(i).map(c=>c*n):[];if(e.cap!=="butt")for(const[c,y]of o.entries())o[c]=c%2==1?y+n:Math.max(y-n,1);return o}const rP=(()=>{const e={};return t=>{if(e[t])return e[t];const i=t.replaceAll("-","");return e[t]=i,i}})(),T7e=new je([128,128,128]),$7e=new je("white");function E7e(e){var i,r;const t=(i=e.symbolLayers)==null?void 0:i.at(-1);if(t&&"outline"in t)return(r=t==null?void 0:t.outline)==null?void 0:r.size}function M7e(e){var t;if(!e)return 0;if(Nu(e)){const i=E7e(e);return i??0}return po((t=D2(e))==null?void 0:t.width)}function dT(e){if(e==null||!("symbolLayers"in e)||e.symbolLayers==null)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some(t=>t.type==="object");case"line-3d":return e.symbolLayers.some(t=>t.type==="path");case"polygon-3d":return e.symbolLayers.some(t=>t.type==="object"||t.type==="extrude");default:return!1}}function A7e(e){var t;return((t=e.resource)==null?void 0:t.href)??""}function gy(e,t){if(!e)return null;let i=null;return Nu(e)?i=C7e(e):HI(e)&&(i=e.type==="cim"?Cse(e):e.color?new je(e.color):null),i?j2(i,t):null}function C7e(e){const t=e.symbolLayers;if(!t)return null;let i=null;return t.forEach(r=>{var n;r.type==="object"&&((n=r.resource)!=null&&n.href)||(i=r.type==="water"?r.color:r.material?r.material.color:null)}),i?new je(i):null}function j2(e,t){if(t==null||e==null)return e;const i=e.toRgba();return i[3]=i[3]*t,new je(i)}function k7e(e,t,i){const r=e.symbolLayers;if(!r)return;const n=o=>j2(t=t??o??(i!=null?$7e:null),i);r.forEach(o=>{var c,y;if(o.type!=="object"||!((c=o.resource)!=null&&c.href)||t)if(o.type==="water")o.color=n(o.color);else{const v=o.material!=null?o.material.color:null,_=n(v);o.material==null?o.material=new no({color:_}):o.material.color=_,i!=null&&"outline"in o&&((y=o.outline)==null?void 0:y.color)!=null&&(o.outline.color=j2(o.outline.color,i))}})}function L7e(e,t,i){var r;(t=t??e.color)&&(e.color=j2(t,i)),i!=null&&"outline"in e&&((r=e.outline)!=null&&r.color)&&(e.outline.color=j2(e.outline.color,i))}function SE(e,t,i){e&&(t||i!=null)&&(t&&(t=new je(t)),Nu(e)?k7e(e,t,i):HI(e)&&L7e(e,t,i))}async function O7e(e,t){const i=e.symbolLayers;i&&await tve(i,async r=>R7e(r,t))}async function R7e(e,t){switch(e.type){case"extrude":N7e(e,t);break;case"icon":case"line":case"text":P7e(e,t);break;case"path":D7e(e,t);break;case"object":await F7e(e,t)}}function P7e(e,t){const i=Fse(t);i!=null&&(e.size=i)}function Fse(e){for(const t of e)if(typeof t=="number")return t;return null}function N7e(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function F7e(e,t){const{resourceSize:i,symbolSize:r}=await j7e(e),n=Dse(t,i,r);e.width=Pb(t[0],r[0],i[0],n),e.depth=Pb(t[1],r[1],i[1],n),e.height=Pb(t[2],r[2],i[2],n)}function D7e(e,t){const i=Dse(t,tee,[e.width,void 0,e.height]);e.width=Pb(t[0],e.width,1,i),e.height=Pb(t[2],e.height,1,i)}function Dse(e,t,i){for(let r=0;r<3;r++){const n=e[r];switch(n){case"symbol-value":{const o=i[r];return o!=null?o/t[r]:1}case"proportional":break;default:if(n&&t[r])return n/t[r]}}return 1}async function j7e(e){const{computeObjectLayerResourceSize:t}=await de(()=>import("./symbolLayerUtils-TRnmCqLx.js"),[],import.meta.url),i=await t(e,10),{width:r,height:n,depth:o}=e,c=[r,o,n];let y=1;for(let v=0;v<3;v++){const _=c[v];if(_!=null){y=_/i[v];break}}for(let v=0;v<3;v++)c[v]==null&&(c[v]=i[v]*y);return{resourceSize:i,symbolSize:c}}function Pb(e,t,i,r){switch(e){case"proportional":return i*r;case"symbol-value":return t??i;default:return e}}function z7e(e,t){const i=Fse(t);if(i!=null)switch(e.type){case"simple-marker":e.size=i;break;case"picture-marker":{const r=e.width/e.height;r>1?(e.width=i,e.height=i*r):(e.width=i*r,e.height=i);break}case"simple-line":e.width=i;break;case"text":e.font.size=i}}async function V7e(e,t){if(e&&t)return Nu(e)?O7e(e,t):void(HI(e)&&z7e(e,t))}function U7e(e,t,i){if(e&&t!=null)if(Nu(e)){const r=e.symbolLayers;r&&r.forEach(n=>{if(n.type==="object")switch(i){case"tilt":n.tilt=(n.tilt??0)+t;break;case"roll":n.roll=(n.roll??0)+t;break;default:n.heading=(n.heading??0)+t}n.type==="icon"&&(n.angle+=t)})}else HI(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle+=t))}function z2(e){if(!e)return null;const t=e.effects.filter(i=>i.type!=="bloom").map(i=>i.toJSON());return _4(t)}async function B7e(e,t){return await e.fetchSymbol(t)||e.fetchCIMSymbol(t)}const jse="<",zse=">";function Vse(e,t,i,r){let n="";return t===0?n=`${jse} `:t===i&&(n=`${zse} `),n+(r?HR(e,r):RCe(e))}const G7e=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function N7(e){if(!("visualVariables"in e)||!e.visualVariables)return null;const t=e.visualVariables.find(c=>c.type==="color");if(!t)return null;let i=null,r=null;if(t.stops){if(t.stops.length===1)return t.stops[0].color;i=t.stops[0].value,r=t.stops[t.stops.length-1].value}const n=i!=null&&r!=null?i+(r-i)/2:0,{getColor:o}=await de(async()=>{const{getColor:c}=await Promise.resolve().then(()=>ty);return{getColor:c}},void 0,import.meta.url);return o(t,n)??null}async function Use(e,t){const i=e.trailCap,r=e.trailWidth||1,n=t||await N7(e)||e.color;return new vs({cap:i,color:n,width:r})}function q7e(e,t){var i,r;if(!t.field)return null;if("featureReduction"in e)switch((i=e.featureReduction)==null?void 0:i.type){case"cluster":case"binning":{const n=e.featureReduction.fields.find(({name:o})=>o.toLowerCase()===t.field.toLowerCase());return n&&"getField"in e?e.getField(n.onStatisticField):null}}return"getField"in e?(r=e.getField)==null?void 0:r.call(e,t.field):null}function H7e(e,t){var r,n,o;const i="popupTemplate"in e?(r=e.popupTemplate)==null?void 0:r.fieldInfos:null;if(i!=null&&i.length&&t)return(o=(n=i.find(c=>{var y;return((y=c.fieldName)==null?void 0:y.toLowerCase())===t.toLowerCase()}))==null?void 0:n.format)==null?void 0:o.dateFormat}function W7e(e,t,i){var o,c,y,v;const r=q7e(e,t);if(!r||!ase(r)&&!hR(r))return null;let n=H7e(e,r.name);if(!n&&r.type==="date"){let _=0,I=0;t.stops?(_=((c=(o=t.stops)==null?void 0:o.at(0))==null?void 0:c.value)??_,I=((v=(y=t.stops)==null?void 0:y.at(-1))==null?void 0:v.value)??I):"minDataValue"in t&&"maxDataValue"in t&&(_=t.minDataValue??_,I=t.maxDataValue??I),n=I-_>2*MA.days?"short-date":"short-date-short-time"}return{fieldType:r.type,format:n,timeZoneOptions:{layerTimeZone:"preferredTimeZone"in e?e.preferredTimeZone:null,viewTimeZone:i,datesInUnknownTimezone:"datesInUnknownTimezone"in e&&e.datesInUnknownTimezone}}}function F7(e){var t,i;if("authoringInfo"in e)return(i=(t=e.authoringInfo)==null?void 0:t.visualVariables)==null?void 0:i.find(({theme:r})=>r==="reference-size")}const J7e=new je([64,64,64]);function Bse(e,t){const i=[],r=e.length-1;return e.length===5?i.push(0,2,4):i.push(0,r),e.map((n,o)=>i.includes(o)?Vse(n,o,r,t):null)}async function D7(e,t,i){let r=!1,n=[],o=[];if(e.stops){const _=e.stops;n=_.map(I=>I.value),r=_.some(I=>!!I.label),r&&(o=_.map(I=>I.label))}const c=n[0],y=n[n.length-1];if(c==null&&y==null)return null;const v=r?null:Bse(n,i);return(await Promise.all(n.map(async(_,I)=>({value:_,color:e.type==="opacity"?await Z7e(_,e,t):(await de(async()=>{const{getColor:$}=await Promise.resolve().then(()=>ty);return{getColor:$}},void 0,import.meta.url)).getColor(e,_),label:r?o[I]:(v==null?void 0:v[I])??""})))).reverse()}async function Z7e(e,t,i){const r=new je(i??J7e),n=(await de(async()=>{const{getOpacity:o}=await Promise.resolve().then(()=>ty);return{getOpacity:o}},void 0,import.meta.url)).getOpacity(t,e);return n!=null&&(r.a=n),r}function K7e(e){let t=!1,i=[],r=[];i=e.map(y=>y.value),t=e.some(y=>!!y.label),t&&(r=e.map(y=>y.label??""));const n=i[0],o=i[i.length-1];if(n==null&&o==null)return null;const c=t?null:Bse(i);return i.map((y,v)=>({value:y,color:Gse(y,e),label:t?r[v]:(c==null?void 0:c[v])??""})).reverse()}function Gse(e,t){const{startIndex:i,endIndex:r,weight:n}=Y7e(e,t);if(i===r)return t[i].color;const o=je.blendColors(t[i].color,t[r].color,n);return new je(o)}function Y7e(e,t){let i=0,r=t.length-1;return t.some((n,o)=>e<n.value?(r=o,!0):(i=o,!1)),{startIndex:i,endIndex:r,weight:(e-t[i].value)/(t[r].value-t[i].value)}}function X7e(e,t){let i=[];if(e&&e.type==="multipart")e.colorRamps.reverse().forEach((r,n)=>{n===0?i.push({value:t.max,color:new je(r.toColor),label:"high"}):i.push({value:null,color:new je(r.toColor),label:""}),n===e.colorRamps.length-1?i.push({value:t.min,color:new je(r.fromColor),label:"low"}):i.push({value:null,color:new je(r.fromColor),label:""})});else{let r,n;e&&e.type==="algorithmic"?(r=e.fromColor,n=e.toColor):(r=[0,0,0,1],n=[255,255,255,1]),i=[{value:t.max,color:new je(n),label:"high"},{value:t.min,color:new je(r),label:"low"}]}return i}var j7;let Fw=j7=class extends be{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new j7({color:this.color&&this.color.clone(),ratio:this.ratio})}};m([w({type:je,json:{type:[Ct],default:null,write:!0}})],Fw.prototype,"color",void 0),m([w({type:Number,json:{write:!0}})],Fw.prototype,"ratio",void 0),Fw=j7=m([H("esri.renderers.support.HeatmapColorStop")],Fw);const Nb=Fw;function qse(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter(r=>{var n;return((n=r.color)==null?void 0:n.a)>0});let i=t.length-1;if(t&&t[0]){const r=t[i];r&&r.ratio!==1&&(t.push(new Nb({ratio:1,color:r.color})),i++)}return t.map((r,n)=>{var c,y;let o="";return n===0?o=((c=e.legendOptions)==null?void 0:c.minLabel)||"low":n===i&&(o=((y=e.legendOptions)==null?void 0:y.maxLabel)||"high"),{color:r.color,label:o,ratio:r.ratio}}).reverse()}Rf("short-date");async function mo(e,t,i){s3(e,t,()=>[]).push(...i)}async function Q7e(e){var i,r;const t=new Map;if(!e)return t;if("visualVariables"in e&&e.visualVariables){const n=e.visualVariables.filter(o=>o.type==="color");for(const o of n){const c=(await D7(o)??[]).map(y=>y.color);await mo(t,o.field||o.valueExpression,c)}}if(e.type==="heatmap"){const n=qse(e).map(o=>o.color);await mo(t,e.field||e.valueExpression,n)}else if(e.type==="pie-chart"){for(const n of e.attributes)await mo(t,n.field||n.valueExpression,[n.color]);await mo(t,"default",[(i=e==null?void 0:e.othersCategory)==null?void 0:i.color,gy(e.backgroundFillSymbol,null)])}else if(e.type==="dot-density"){for(const n of e.attributes)await mo(t,n.field||n.valueExpression,[n.color]);await mo(t,"default",[e.backgroundColor])}else if(e.type==="unique-value")if(((r=e.authoringInfo)==null?void 0:r.type)==="predominance")for(const n of e.uniqueValueInfos??[])await mo(t,n.value.toString(),[gy(n.symbol,null)]);else{const n=(e.uniqueValueInfos??[]).map(_=>gy(_.symbol,null)),{field:o,field2:c,field3:y,valueExpression:v}=e;(o||v)&&await mo(t,o||v,n),c&&await mo(t,c,n),y&&await mo(t,y,n)}else if(e.type==="class-breaks"){const n=e.classBreakInfos.map(y=>gy(y.symbol,null)),{field:o,valueExpression:c}=e;await mo(t,o??c,n)}else e.type==="simple"&&await mo(t,"default",[gy(e.symbol,null)]);return"defaultSymbol"in e&&e.defaultSymbol&&await mo(t,"default",[gy(e.defaultSymbol,null)]),t.forEach((n,o)=>{const c=qL(n.filter(Boolean),(y,v)=>JSON.stringify(y)===JSON.stringify(v));t.set(o,c)}),t}function Hse(e){const t={};for(const i in e){if(i==="declaredClass")continue;const r=e[i];if(r!=null&&typeof r!="function")if(Array.isArray(r)){t[i]=[];for(let n=0;n<r.length;n++)t[i][n]=Hse(r[n])}else typeof r=="object"?r.toJSON&&(t[i]=JSON.stringify(r)):t[i]=r}return t}var yd;(function(e){e[e.varint=0]="varint",e[e.fixed64=1]="fixed64",e[e.delimited=2]="delimited",e[e.fixed32=5]="fixed32",e[e.unknown=99]="unknown"})(yd||(yd={}));const HB=4294967296,e8e=new TextDecoder("utf-8"),t8e=we("safari")||we("ios")?6:we("ff")?12:32;let z7=class K5{constructor(t,i,r=0,n=t?t.byteLength:0){this._tag=0,this._dataType=yd.unknown,this._init(t,i,r,n)}_init(t,i,r,n){this._data=t,this._dataView=i,this._pos=r,this._end=n}asUnsafe(){return this}clone(){return new K5(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;if(t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128||(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)||(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)||(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)||(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128))return t;throw new Error("Varint overflow")}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)}getSInt64(){return this._decodeSVarint()}getBool(){const t=this._data[this._pos]!==0;return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getUint32(i+4,!0)*HB;return this._skip(8),r}getSFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getInt32(i+4,!0)*HB;return this._skip(8),r}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),i=this._pos,r=this._toString(this._data,i,i+t);return this._skip(t),r}getBytes(){const t=this._getLength(),i=this._pos,r=this._toBytes(this._data,i,i+t);return this._skip(t),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,i,r,n){const o=this.getMessage(),c=t(o,i,r,n);return o.release(),c}processMessage(t){const i=this.getMessage(),r=t(i);return i.release(),r}getMessage(){const t=this._getLength(),i=K5.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),i}release(){K5.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case yd.varint:this._decodeVarint();break;case yd.fixed64:this._skip(8);break;case yd.delimited:this._skip(this._getLength());break;case yd.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let i=this._pos,r=0,n=0;if(this._end-i>=10)do{if(n=t[i++],r|=127&n,!(128&n)||(n=t[i++],r|=(127&n)<<7,!(128&n))||(n=t[i++],r|=(127&n)<<14,!(128&n))||(n=t[i++],r|=(127&n)<<21,!(128&n))||(n=t[i++],r+=268435456*(127&n),!(128&n))||(n=t[i++],r+=34359738368*(127&n),!(128&n))||(n=t[i++],r+=4398046511104*(127&n),!(128&n))||(n=t[i++],r+=562949953421312*(127&n),!(128&n))||(n=t[i++],r+=72057594037927940*(127&n),!(128&n))||(n=t[i++],r+=9223372036854776e3*(127&n),!(128&n)))break;throw new Error("Varint too long!")}while(!1);else{let o=1;for(;i!==this._end&&(n=t[i],128&n);)++i,r+=(127&n)*o,o*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=n*o}return this._pos=i,r}_decodeSVarint(){const t=this._data;let i,r=0,n=0;const o=1&t[this._pos];if(n=t[this._pos++],r|=127&n,!(128&n)||(n=t[this._pos++],r|=(127&n)<<7,!(128&n))||(n=t[this._pos++],r|=(127&n)<<14,!(128&n))||(n=t[this._pos++],r|=(127&n)<<21,!(128&n))||(n=t[this._pos++],r+=268435456*(127&n),!(128&n))||(n=t[this._pos++],r+=34359738368*(127&n),!(128&n))||(n=t[this._pos++],r+=4398046511104*(127&n),!(128&n)))return o?-(r+1)/2:r/2;if(i=BigInt(r),n=t[this._pos++],i+=0x2000000000000n*BigInt(127&n),!(128&n)||(n=t[this._pos++],i+=0x100000000000000n*BigInt(127&n),!(128&n))||(n=t[this._pos++],i+=0x8000000000000000n*BigInt(127&n),!(128&n)))return Number(o?-(i+1n)/2n:i/2n);throw new Error("Varint too long!")}_getLength(){if(this._dataType!==yd.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,i,r){if((r=Math.min(this._end,r))-i>t8e){const c=t.subarray(i,r);return e8e.decode(c)}let n="",o="";for(let c=i;c<r;++c){const y=t[c];128&y?o+="%"+y.toString(16):(n+=decodeURIComponent(o)+String.fromCharCode(y),o="")}return o.length&&(n+=decodeURIComponent(o)),n}_toBytes(t,i,r){return r=Math.min(this._end,r),new Uint8Array(t.buffer,i,r-i)}};z7.pool=new dp(z7,void 0,e=>{e._data=null,e._dataView=null});const xE=2;let V2=class om{constructor(t=[],i=[]){this.lengths=t??[],this.coords=i??[]}static fromJSON(t){return new om(t.lengths,t.coords)}static fromRect(t){const[i,r,n,o]=t,c=n-i,y=o-r;return new om([5],[i,r,c,0,0,y,-c,0,0,-y])}get isPoint(){return this.lengths.length===0&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,i)=>t+i)}forEachVertex(t){let i=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];for(let o=0;o<n;o++)t(this.coords[xE*(o+i)],this.coords[xE*(o+i)+1]);i+=n}}deltaDecode(){const t=this.clone(),{coords:i,lengths:r}=t;let n=0;for(const o of r){for(let c=1;c<o;c++)i[2*(n+c)]+=i[2*(n+c)-2],i[2*(n+c)+1]+=i[2*(n+c)-1];n+=o}return t}clone(t){if(this.lengths.length===0)return new om([],[this.coords[0],this.coords[1]]);const i=(this.lengths.length===0?1:this.lengths.reduce((n,o)=>n+o))*xE,r=this.coords.slice(0,i);return t?(t.set(r),new om(this.lengths,t)):new om(Array.from(this.lengths),Array.from(r))}},i8e=class Y5{constructor(t=null,i={},r,n){this.geometry=t,this.attributes=i,this.centroid=r,this.objectId=n,this.displayId=0,this.geohashX=0,this.geohashY=0}static fromJSON(t,i){const r=t.geometry?V2.fromJSON(t.geometry):null,n=t.centroid?V2.fromJSON(t.centroid):null,o=t.attributes[i];return new Y5(r,t.attributes,n,o)}weakClone(){const t=new Y5(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}clone(){var r,n;const t=(r=this.geometry)==null?void 0:r.clone(),i=new Y5(t,{...this.attributes},(n=this.centroid)==null?void 0:n.clone(),this.objectId);return i.displayId=this.displayId,i.geohashX=this.geohashX,i.geohashY=this.geohashY,i}};function r8e(e){var t,i;return!!((i=(t=e.geometry)==null?void 0:t.coords)!=null&&i.length)}let n8e=class Wse{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new Wse;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}};const Jse=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let ftt=class{constructor(t){this._options=t,this.geometryTypes=Jse,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new n8e}prepareFeatures(t){this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++}finishFeatureResult(t){if(!(t!=null&&t.features)||!t.hasZ||!this._options.sourceSpatialReference||!t.spatialReference||_r(t.spatialReference,this._options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const i=sg(this._options.sourceSpatialReference)/sg(t.spatialReference);if(i!==1)for(const r of t.features){if(!r8e(r))continue;const n=r.geometry.coords;for(let o=2;o<n.length;o+=3)n[o]*=i}}addFeature(t,i){t.features.push(i)}createFeature(){return new i8e}createSpatialReference(){return{wkid:0}}createGeometry(){return new V2}addField(t,i){t.fields.push(i)}allocateCoordinates(t){t.coords.length=t.lengths.reduce((i,r)=>i+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(t,i){t.coords[this._coordinatePtr++]=i}addCoordinatePoint(t,i){t.coords.push(i)}addLength(t,i){t.lengths.push(i)}addQueryGeometry(t,i){t.queryGeometry=i.queryGeometry,t.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new V2}};const WB=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],JB=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],ZB=["upperLeft","lowerLeft"];function KB(e){return e>=WB.length?null:WB[e]}function s8e(e){return e>=JB.length?null:JB[e]}function YB(e){return e>=ZB.length?null:ZB[e]}function XB(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function o8e(e,t,i){const n=e.asUnsafe(),o=t.createPointGeometry(i);for(;n.next();)switch(n.tag()){case 3:{const c=n.getUInt32(),y=n.pos()+c;let v=0;for(;n.pos()<y;)t.addCoordinatePoint(o,n.getSInt64(),v++);break}default:n.skip()}return o}function a8e(e,t,i){const o=e.asUnsafe(),c=t.createGeometry(i),y=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;o.next();)switch(o.tag()){case 2:{const v=o.getUInt32(),_=o.pos()+v;let I=0;for(;o.pos()<_;)t.addLength(c,o.getUInt32(),I++);break}case 3:{const v=o.getUInt32(),_=o.pos()+v;let I=0;for(t.allocateCoordinates(c);o.pos()<_;)t.addCoordinate(c,o.getSInt64(),I),I++,I===y&&(I=0);break}default:o.skip()}return c}function l8e(e){const n=e.asUnsafe(),o=new V2;let c="esriGeometryPoint";for(;n.next();)switch(n.tag()){case 2:{const y=n.getUInt32(),v=n.pos()+y;for(;n.pos()<v;)o.lengths.push(n.getUInt32());break}case 3:{const y=n.getUInt32(),v=n.pos()+y;for(;n.pos()<v;)o.coords.push(n.getSInt64());break}case 1:c=Jse[n.getEnum()];break;default:n.skip()}return{queryGeometry:o,queryGeometryType:c}}function u8e(e){const I=e.asUnsafe();for(;I.next();)switch(I.tag()){case 1:return I.getString();case 2:return I.getFloat();case 3:return I.getDouble();case 4:return I.getSInt32();case 5:return I.getUInt32();case 6:return I.getInt64();case 7:return I.getUInt64();case 8:return I.getSInt64();case 9:return I.getBool();default:return I.skip(),null}return null}function c8e(e){const y=e.asUnsafe(),v={type:KB(0)};for(;y.next();)switch(y.tag()){case 1:v.name=y.getString();break;case 2:v.type=KB(y.getEnum());break;case 3:v.alias=y.getString();break;case 4:v.sqlType=s8e(y.getEnum());break;case 5:y.skip();break;case 6:v.defaultValue=y.getString();break;default:y.skip()}return v}function h8e(e){const r={},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:r.name=n.getString();break;case 2:r.isSystemMaintained=n.getBool();break;default:n.skip()}return r}function d8e(e,t,i,r){const y=t.createFeature(i);let v=0;for(;e.next();)switch(e.tag()){case 1:{const _=r[v++].name;y.attributes[_]=e.processMessage(u8e);break}case 2:y.geometry=e.processMessageWithArgs(a8e,t,i);break;case 4:y.centroid=e.processMessageWithArgs(o8e,t,i);break;default:e.skip()}return y}function p8e(e){const o=[1,1,1,1],c=e.asUnsafe();for(;c.next();)switch(c.tag()){case 1:o[0]=c.getDouble();break;case 2:o[1]=c.getDouble();break;case 4:o[2]=c.getDouble();break;case 3:o[3]=c.getDouble();break;default:c.skip()}return o}function f8e(e){const o=[0,0,0,0],c=e.asUnsafe();for(;c.next();)switch(c.tag()){case 1:o[0]=c.getDouble();break;case 2:o[1]=c.getDouble();break;case 4:o[2]=c.getDouble();break;case 3:o[3]=c.getDouble();break;default:c.skip()}return o}function y8e(e){const n={originPosition:YB(0)},o=e.asUnsafe();for(;o.next();)switch(o.tag()){case 1:n.originPosition=YB(o.getEnum());break;case 2:n.scale=o.processMessage(p8e);break;case 3:n.translate=o.processMessage(f8e);break;default:o.skip()}return n}function m8e(e){const n={},o=e.asUnsafe();for(;o.next();)switch(o.tag()){case 1:n.shapeAreaFieldName=o.getString();break;case 2:n.shapeLengthFieldName=o.getString();break;case 3:n.units=o.getString();break;default:o.skip()}return n}function g8e(e,t){const y=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:y.wkid=e.getUInt32();break;case 5:y.wkt=e.getString();break;case 2:y.latestWkid=e.getUInt32();break;case 3:y.vcsWkid=e.getUInt32();break;case 4:y.latestVcsWkid=e.getUInt32();break;default:e.skip()}return y}function v8e(e,t){const N=t.createFeatureResult(),D=e.asUnsafe();N.geometryType=XB(t,0);let j=!1;for(;D.next();)switch(D.tag()){case 1:N.objectIdFieldName=D.getString();break;case 3:N.globalIdFieldName=D.getString();break;case 4:N.geohashFieldName=D.getString();break;case 5:N.geometryProperties=D.processMessage(m8e);break;case 7:N.geometryType=XB(t,D.getEnum());break;case 8:N.spatialReference=D.processMessageWithArgs(g8e,t);break;case 10:N.hasZ=D.getBool();break;case 11:N.hasM=D.getBool();break;case 12:N.transform=D.processMessage(y8e);break;case 9:N.exceededTransferLimit=D.getBool();break;case 13:t.addField(N,D.processMessage(c8e));break;case 15:j||(t.prepareFeatures(N),j=!0),t.addFeature(N,D.processMessageWithArgs(d8e,t,N,N.fields));break;case 2:N.uniqueIdField=D.processMessage(h8e);break;default:D.skip()}return t.finishFeatureResult(N),N}function w8e(e,t){const n={};let o=null;for(;e.next();)switch(e.tag()){case 4:o=e.processMessageWithArgs(l8e);break;case 1:n.featureResult=e.processMessageWithArgs(v8e,t);break;default:e.skip()}return o!=null&&n.featureResult&&t.addQueryGeometry(n,o),n}function b8e(e,t){try{const r=new z7(new Uint8Array(e),new DataView(e)),n={};for(;r.next();)r.tag()===2?n.queryResult=r.processMessageWithArgs(w8e,t):r.skip();return n}catch(i){throw new ne("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function _8e(e,t){const i=b8e(e,t),r=i.queryResult.featureResult,n=i.queryResult.queryGeometry,o=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const c=r.objectIdFieldName;for(const y of r.features)y.attributes&&(y.objectId=y.attributes[c])}return r&&(r.queryGeometry=n,r.queryGeometryType=o),r}function V7(e,t,i){if(!(i!=null&&i.features)||!i.hasZ)return;const r=oee(i.geometryType,t,e.outSpatialReference);if(r!=null)for(const n of i.features)r(n.geometry)}const QB="Layer does not support extent calculation.";function S8e(e,t){if(t&&e.type==="extent")return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&e.type==="point")return`${e.x},${e.y}`;const i=e.toJSON();return delete i.spatialReference,JSON.stringify(i)}function x8e(e,t){var v;const i=e.geometry,r=e.toJSON();delete r.compactGeometryEnabled,delete r.defaultSpatialReferenceEnabled;const n=r;let o,c,y;if(i!=null&&(c=i.spatialReference,y=ng(c),n.geometryType=Ng(i),n.geometry=S8e(i,e.compactGeometryEnabled),n.inSR=y),r.groupByFieldsForStatistics&&(n.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(n.objectIds=r.objectIds.join(",")),r.orderByFields&&(n.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&(t!=null&&t.returnCountOnly||t!=null&&t.returnExtentOnly||t!=null&&t.returnIdsOnly)?delete n.outFields:r.outFields.includes("*")?n.outFields="*":n.outFields=r.outFields.join(","),r.outSR?(n.outSR=ng(r.outSR),o=e.outSpatialReference):i&&(r.returnGeometry||r.returnCentroid)&&(n.outSR=n.inSR,o=c),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(n.outStatistics=JSON.stringify(r.outStatistics)),r.fullText&&(n.fullText=JSON.stringify(r.fullText)),r.pixelSize&&(n.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&c!=null&&((v=e.quantizationParameters)==null?void 0:v.extent)!=null&&c.equals(e.quantizationParameters.extent.spatialReference)&&delete r.quantizationParameters.extent.spatialReference,n.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(n.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(n.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(n.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){const _=r.timeExtent,{start:I,end:$}=_;I==null&&$==null||(n.time=I===$?I:`${I??"null"},${$??"null"}`),delete r.timeExtent}return e.defaultSpatialReferenceEnabled&&c!=null&&o!=null&&c.equals(o)&&(n.defaultSR=n.inSR,delete n.inSR,delete n.outSR),n}async function I8e(e,t,i,r){const n=t.timeExtent!=null&&t.timeExtent.isEmpty?{data:{features:[]}}:await N3(e,t,"json",r);return V7(t,i,n.data),n}async function mtt(e,t,i,r){if(t.timeExtent!=null&&t.timeExtent.isEmpty)return{data:i.createFeatureResult()};const n=await T8e(e,t,r),o=n;return o.data=_8e(n.data,i),o}function T8e(e,t,i){return N3(e,t,"pbf",i)}function gtt(e,t,i){return t.timeExtent!=null&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):N3(e,t,"json",i,{returnIdsOnly:!0})}function vtt(e,t,i){return t.timeExtent!=null&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):N3(e,t,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}async function wtt(e,t,i){if(t.timeExtent!=null&&t.timeExtent.isEmpty)return{data:{count:0,extent:null}};const r=await N3(e,t,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}),n=r.data;if(n.hasOwnProperty("extent"))return r;if(n.features)throw new Error(QB);if(n.hasOwnProperty("count"))throw new Error(QB);return r}async function N3(e,t,i,r={},n={}){const o=typeof e=="string"?cr(e):e,c=t.geometry?[t.geometry]:[],y=await yre(c,null,{signal:r.signal}),v=y==null?void 0:y[0];v!=null&&((t=t.clone()).geometry=v);const _=Hse({...o.query,f:i,...n,...x8e(t,n)});return Et(x0(o.path,$8e(t,n)?"query3d":"query"),{...r,responseType:i==="pbf"?"array-buffer":"json",query:{..._,...r.query}})}function $8e(e,t){return e.formatOf3DObjects!=null&&!(t.returnCountOnly||t.returnExtentOnly||t.returnIdsOnly)}var U7;const B7=new ft({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let ln=U7=class extends be{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){var n;const i=rt.fromJSON(t.spatialReference),r=[];for(let o=0;o<e.length;o++){const c=e[o],y=er.fromJSON(c),v=(n=c.geometry)==null?void 0:n.spatialReference;y.geometry==null||v||(y.geometry.spatialReference=i);const _=c.aggregateGeometries,I=y.aggregateGeometries;if(_&&I!=null)for(const $ in I){const A=I[$],k=_[$],R=k==null?void 0:k.spatialReference;A==null||R||(A.spatialReference=i)}r.push(y)}return r}writeGeometryType(e,t,i,r){if(e)return void B7.write(e,t,i,r);const{features:n}=this;if(n){for(const o of n)if((o==null?void 0:o.geometry)!=null)return void B7.write(o.geometry.type,t,i,r)}}readQueryGeometry(e,t){if(!e)return null;const i=!!e.spatialReference,r=Xc(e);return r&&!i&&t.spatialReference&&(r.spatialReference=rt.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(t.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new U7(this.cloneProperties())}cloneProperties(){return le({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let i=0;i<t.features.length;i++){const r=t.features[i];if(r.geometry){const n=e==null?void 0:e[i];r.geometry=(n==null?void 0:n.toJSON())||r.geometry}}return t}quantize(e){const{scale:[t,i],translate:[r,n]}=e,o=_=>Math.round((_-r)/t),c=_=>Math.round((n-_)/i),y=this.features,v=this._getQuantizationFunction(this.geometryType,o,c);for(let _=0,I=y.length;_<I;_++)v!=null&&v(y[_].geometry)||(y.splice(_,1),_--,I--);return this.transform=e,this}unquantize(){var A,k;const{geometryType:e,features:t,transform:i}=this;if(!i)return this;const{translate:[r,n],scale:[o,c]}=i,y=R=>R*o+r,v=R=>n-R*c;let _=null,I=null;if(this.hasZ&&((A=i==null?void 0:i.scale)==null?void 0:A[2])!=null){const{translate:[,,R],scale:[,,N]}=i;_=D=>D*N+R}if(this.hasM&&((k=i==null?void 0:i.scale)==null?void 0:k[3])!=null){const{translate:[,,,R],scale:[,,,N]}=i;I=D=>D==null?D:D*N+R}const $=this._getHydrationFunction(e,y,v,_,I);for(const{geometry:R}of t)R!=null&&$&&$(R);return this.transform=null,this}_quantizePoints(e,t,i){let r,n;const o=[];for(let c=0,y=e.length;c<y;c++){const v=e[c];if(c>0){const _=t(v[0]),I=i(v[1]);_===r&&I===n||(o.push([_-r,I-n]),r=_,n=I)}else r=t(v[0]),n=i(v[1]),o.push([r,n])}return o.length>0?o:null}_getQuantizationFunction(e,t,i){return e==="point"?r=>(r.x=t(r.x),r.y=i(r.y),r):e==="polyline"||e==="polygon"?r=>{const n=n0(r)?r.rings:r.paths,o=[];for(let c=0,y=n.length;c<y;c++){const v=n[c],_=this._quantizePoints(v,t,i);_&&o.push(_)}return o.length>0?(n0(r)?r.rings=o:r.paths=o,r):null}:e==="multipoint"?r=>{const n=this._quantizePoints(r.points,t,i);return n&&n.length>0?(r.points=n,r):null}:e==="extent"?r=>r:null}_getHydrationFunction(e,t,i,r,n){return e==="point"?o=>{o.x=t(o.x),o.y=i(o.y),r&&(o.z=r(o.z))}:e==="polyline"||e==="polygon"?o=>{const c=n0(o)?o.rings:o.paths;let y,v;for(let _=0,I=c.length;_<I;_++){const $=c[_];for(let A=0,k=$.length;A<k;A++){const R=$[A];A>0?(y+=R[0],v+=R[1]):(y=R[0],v=R[1]),R[0]=t(y),R[1]=i(v)}}if(r&&n)for(let _=0,I=c.length;_<I;_++){const $=c[_];for(let A=0,k=$.length;A<k;A++){const R=$[A];R[2]=r(R[2]),R[3]=n(R[3])}}else if(r)for(let _=0,I=c.length;_<I;_++){const $=c[_];for(let A=0,k=$.length;A<k;A++){const R=$[A];R[2]=r(R[2])}}else if(n)for(let _=0,I=c.length;_<I;_++){const $=c[_];for(let A=0,k=$.length;A<k;A++){const R=$[A];R[2]=n(R[2])}}}:e==="extent"?o=>{o.xmin=t(o.xmin),o.ymin=i(o.ymin),o.xmax=t(o.xmax),o.ymax=i(o.ymax),r&&o.zmax!=null&&o.zmin!=null&&(o.zmax=r(o.zmax),o.zmin=r(o.zmin)),n&&o.mmax!=null&&o.mmin!=null&&(o.mmax=n(o.mmax),o.mmin=n(o.mmin))}:e==="multipoint"?o=>{const c=o.points;let y,v;for(let _=0,I=c.length;_<I;_++){const $=c[_];_>0?(y+=$[0],v+=$[1]):(y=$[0],v=$[1]),$[0]=t(y),$[1]=i(v)}if(r&&n)for(let _=0,I=c.length;_<I;_++){const $=c[_];$[2]=r($[2]),$[3]=n($[3])}else if(r)for(let _=0,I=c.length;_<I;_++){const $=c[_];$[2]=r($[2])}else if(n)for(let _=0,I=c.length;_<I;_++){const $=c[_];$[2]=n($[2])}}:null}};m([w({type:String,json:{write:!0}})],ln.prototype,"displayFieldName",void 0),m([w({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ln.prototype,"exceededTransferLimit",void 0),m([w({type:[er],json:{write:!0}})],ln.prototype,"features",void 0),m([ke("features")],ln.prototype,"readFeatures",null),m([w({type:[KI],json:{write:!0}})],ln.prototype,"fields",void 0),m([w({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:B7.read}}})],ln.prototype,"geometryType",void 0),m([Le("geometryType")],ln.prototype,"writeGeometryType",null),m([w({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ln.prototype,"hasM",void 0),m([w({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ln.prototype,"hasZ",void 0),m([w({types:q0,json:{write:!0}})],ln.prototype,"queryGeometry",void 0),m([ke("queryGeometry")],ln.prototype,"readQueryGeometry",null),m([w({type:rt,json:{write:!0}})],ln.prototype,"spatialReference",void 0),m([Le("spatialReference")],ln.prototype,"writeSpatialReference",null),m([w({json:{write:!0}})],ln.prototype,"transform",void 0),ln=U7=m([H("esri.rest.support.FeatureSet")],ln),ln.prototype.toJSON.isDefaultToJSON=!0;const nP=ln;async function IE(e,t,i){const r=await E8e(e,t,i);return nP.fromJSON(r)}async function E8e(e,t,i){const r=Wg(e),n={...i},o=ys.from(t),{data:c}=await I8e(r,o,o.sourceSpatialReference,n);return c}var G7;let Wi=G7=class extends be{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new G7(le({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};m([w({type:Boolean,json:{write:!0}})],Wi.prototype,"cacheHint",void 0),m([w({type:hl,json:{write:!0}})],Wi.prototype,"dynamicDataSource",void 0),m([w({type:String,json:{write:!0}})],Wi.prototype,"gdbVersion",void 0),m([w({type:Number,json:{write:!0}})],Wi.prototype,"geometryPrecision",void 0),m([w({type:Date})],Wi.prototype,"historicMoment",void 0),m([Le("historicMoment")],Wi.prototype,"_writeHistoricMoment",null),m([w({type:Number,json:{write:!0}})],Wi.prototype,"maxAllowableOffset",void 0),m([w({json:{write:!0}})],Wi.prototype,"objectIds",void 0),m([w({type:[String],json:{write:!0}})],Wi.prototype,"orderByFields",void 0),m([w({type:[String],json:{write:!0}})],Wi.prototype,"outFields",void 0),m([w({type:rt,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Wi.prototype,"outSpatialReference",void 0),m([w({json:{write:!0}})],Wi.prototype,"relationshipId",void 0),m([w({type:Number,json:{read:{source:"resultOffset"}}})],Wi.prototype,"start",void 0),m([Le("start"),Le("num")],Wi.prototype,"writeStart",null),m([w({type:Number,json:{read:{source:"resultRecordCount"}}})],Wi.prototype,"num",void 0),m([w({json:{write:!0}})],Wi.prototype,"returnGeometry",void 0),m([w({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Wi.prototype,"returnM",void 0),m([w({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Wi.prototype,"returnZ",void 0),m([w({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Wi.prototype,"where",void 0),Wi=G7=m([H("esri.rest.support.RelationshipQuery")],Wi),Wi.from=qi(Wi);const vg=Wi,btt=Object.freeze(Object.defineProperty({__proto__:null,default:vg},Symbol.toStringTag,{value:"Module"})),M8e="esri.widgets.Feature.support.relatedFeatureUtils",eG=()=>_e.getLogger(M8e),tG=new Map;function X5(e){if(!Vc(e))return null;const[t,i]=e.split("/").slice(1);return{layerId:t,fieldName:i}}function A8e(e,t){if(!t.relationships)return null;let i=null;const{relationships:r}=t;return r.some(n=>n.id===parseInt(e,10)&&(i=n,!0)),i}function C8e({originRelationship:e,relationships:t,layerId:i}){return t.find(({relatedTableId:r,id:n})=>`${r}`===i&&n===(e==null?void 0:e.id))??null}function k8e(e,t){const i=t.toLowerCase();for(const r in e)if(r.toLowerCase()===i)return e[r];return null}function L8e(e,t){const i=A8e(e,t);if(i)return{url:`${t.url}/${i.relatedTableId}`,sourceSpatialReference:t.spatialReference,relation:i,relatedFields:[],outStatistics:[]}}function O8e(e,t){if(!t||!e)return;const{features:i,statsFeatures:r}=e,n=i==null?void 0:i.value;t.relatedFeatures=n?n.features:[];const o=r==null?void 0:r.value;t.relatedStatsFeatures=o?o.features:[]}function R8e(e,t,i,r){var o;const n=new vg;return n.outFields=["*"],n.relationshipId=typeof t.id=="number"?t.id:parseInt(t.id,10),n.objectIds=[e.attributes[i.objectIdField]],n.gdbVersion=i.gdbVersion??null,n.historicMoment=i.historicMoment??null,((o=i.queryRelatedFeatures)==null?void 0:o.call(i,n,r))??Promise.resolve({})}function P8e(e,t,i){let r=0;const n=[];for(;r<t.length;)n.push(`${e} IN (${t.slice(r,i+r)})`),r+=i;return n.join(" OR ")}function N8e(e){return e?qL(e):void 0}function F8e(e){return e?qL(e,(t,i)=>JSON.stringify(t.toJSON())===JSON.stringify(i.toJSON())):void 0}async function D8e(e,t,i,r){const n=i.layerId.toString(),{layerInfo:o,relation:c,relatedFields:y,outStatistics:v,url:_,sourceSpatialReference:I}=t,$=N8e(y),A=F8e(v);if(!o||!c)return null;const k=C8e({originRelationship:c,relationships:o.relationships,layerId:n});if(k!=null&&k.relationshipTableId&&k.keyFieldInRelationshipTable){const N=(await R8e(e,k,i,r))[e.attributes[i.objectIdField]];if(!N)return null;const D=N.features.map(j=>j.attributes[o.objectIdField]);if(A!=null&&A.length&&o.supportsStatistics){const j=new ys;j.where=P8e(o.objectIdField,D,1e3),j.outFields=$,j.outStatistics=A,j.sourceSpatialReference=I;const z={features:Promise.resolve(N),statsFeatures:IE(_,j)};return eo(z)}}const R=k==null?void 0:k.keyField;if(R){const N=cR(B8e(o.fields,R)),D=k8e(e.attributes,c.keyField),j=N?`${R}=${D}`:`${R}='${D}'`,z=i.historicMoment,U=i.gdbVersion,W=IE(_,new ys({where:j,outFields:$,sourceSpatialReference:I,historicMoment:z,gdbVersion:U}),r),Q=A!=null&&A.length&&o.supportsStatistics?IE(_,new ys({where:j,outFields:$,outStatistics:A,sourceSpatialReference:I}),r):null,K={features:W};return Q&&(K.statsFeatures=Q),eo(K)}return null}function j8e(e,t){return Et(e,{query:{f:"json"},signal:t==null?void 0:t.signal})}function z8e({relatedInfos:e,layer:t},i){const r={};return e.forEach((n,o)=>{const{relation:c}=n;if(!c){const $=new ne("relation-required","A relation is required on a layer to retrieve related records.");throw eG().error($),$}const{relatedTableId:y}=c;if(typeof y!="number"){const $=new ne("A related table ID is required on a layer to retrieve related records.");throw eG().error($),$}const v=`${t.url}/${y}`,_=tG.get(v),I=_??j8e(v);_||tG.set(v,I),r[o]=I}),nO(eo(r),i)}function V8e({graphic:e,relatedInfos:t,layer:i},r){const n={};return t.forEach((o,c)=>{o.layerInfo&&(n[c]=D8e(e,o,i,r))}),eo(n)}function U8e({relatedInfo:e,fieldName:t,fieldInfo:i}){var r,n;if((r=e.relatedFields)==null||r.push(t),i.statisticType){const o=new Pie({statisticType:i.statisticType,onStatisticField:t,outStatisticFieldName:t});(n=e.outStatistics)==null||n.push(o)}}function B8e(e,t){if(e!=null){t=t.toLowerCase();for(const i of e)if(i&&i.name.toLowerCase()===t)return i}return null}const iG={chartAnimation:!0};let Nr=class extends Ve{constructor(t){super(t),this.abilities={...iG},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.isAggregate=!1,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(t){return{...iG,...t}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(t){this._setContentElementMedia(t)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(t){const{formattedMediaInfoCount:i}=this,r=(t+i)%i;this.activeMediaInfoIndex=r}_pageContentElementMedia(t){const{activeMediaInfoIndex:i}=this,r=i+t;this._setContentElementMedia(r)}_formatMediaInfos(){const{mediaInfos:t,layer:i}=this,r=this.attributes??{},n=this.formattedAttributes??{},o=this.expressionAttributes??{},c=this.fieldInfoMap??new Map;return(t==null?void 0:t.map(y=>{const v=y==null?void 0:y.clone();return v?(v.title=Yf({attributes:r,fieldInfoMap:c,globalAttributes:n,expressionAttributes:o,layer:i,text:v.title}),v.caption=Yf({attributes:r,fieldInfoMap:c,globalAttributes:n,expressionAttributes:o,layer:i,text:v.caption}),v.altText=Yf({attributes:r,fieldInfoMap:c,globalAttributes:n,expressionAttributes:o,layer:i,text:v.altText}),v.type==="image"?v.value?(this._setImageValue({value:v.value,formattedAttributes:n,layer:i}),v.value.sourceURL?v:void 0):void 0:v.type==="pie-chart"||v.type==="line-chart"||v.type==="column-chart"||v.type==="bar-chart"?v.value?(this._setChartValue({value:v.value,chartType:v.type,attributes:r,formattedAttributes:n,layer:i,expressionAttributes:o}),v):void 0:null):null}).filter(Ar))??[]}_setImageValue(t){const i=this.fieldInfoMap??new Map,{value:r,formattedAttributes:n,layer:o}=t,{linkURL:c,sourceURL:y}=r;if(y){const v=E7(y,o);r.sourceURL=$7({formattedAttributes:n,template:v,fieldInfoMap:i})}if(c){const v=E7(c,o);r.linkURL=$7({formattedAttributes:n,template:v,fieldInfoMap:i})}}_setChartValue(t){const{value:i,attributes:r,formattedAttributes:n,chartType:o,layer:c,expressionAttributes:y}=t,{popupTemplate:v,relatedInfos:_}=this,{fields:I,normalizeField:$}=i,A=c;if(i.fields=QAe(I,A),$&&(i.normalizeField=P2($,A)),!I.some(R=>!!(n[R]!=null||Vc(R)&&(_!=null&&_.size))))return;const k=(v==null?void 0:v.fieldInfos)??[];I.forEach((R,N)=>{var z;const D=(z=i.colors)==null?void 0:z[N];if(Vc(R))return void(i.series=[...i.series,...this._getRelatedChartInfos({fieldInfos:k,fieldName:R,formattedAttributes:n,chartType:o,value:i,color:D})]);const j=this._getChartOption({value:i,attributes:r,chartType:o,formattedAttributes:n,expressionAttributes:y,fieldName:R,fieldInfos:k,color:D});i.series.push(j)})}_getRelatedChartInfos(t){var R;const{fieldInfos:i,fieldName:r,formattedAttributes:n,chartType:o,value:c,color:y}=t,v=[],_=X5(r),I=_&&((R=this.relatedInfos)==null?void 0:R.get(_.layerId.toString()));if(!I)return v;const{relatedFeatures:$,relation:A}=I;if(!A||!$)return v;const{cardinality:k}=A;return $.forEach(N=>{const{attributes:D}=N;D&&Object.keys(D).forEach(j=>{j===_.fieldName&&v.push(this._getChartOption({value:c,attributes:D,formattedAttributes:n,fieldName:r,chartType:o,relatedFieldName:j,hasMultipleRelatedFeatures:($==null?void 0:$.length)>1,fieldInfos:i,color:y}))})}),k==="one-to-many"||k==="many-to-many"?v:[v[0]]}_getTooltip({label:t,value:i,chartType:r}){return r==="pie-chart"?`${t}`:`${t}: ${i}`}_getChartOption(t){var ee;const{value:i,attributes:r,formattedAttributes:n,expressionAttributes:o,fieldName:c,relatedFieldName:y,fieldInfos:v,chartType:_,hasMultipleRelatedFeatures:I,color:$}=t,A=this.layer,k=this.fieldInfoMap??new Map,{normalizeField:R,tooltipField:N}=i,D=R?Vc(R)?r[X5(R).fieldName]:r[R]:null,j=WR(c)&&o&&o[c]!==void 0?o[c]:y&&r[y]!==void 0?r[y]:r[c]!==void 0?r[c]:n[c],z=new Bte({fieldName:c,color:$,value:j===void 0?null:j&&D?j/D:j});if(Vc(c)){const ie=k.get(c.toLowerCase()),ae=N&&k.get(N.toLowerCase()),ue=(ie==null?void 0:ie.fieldName)??c,Ie=I&&N?X5(N).fieldName:(ae==null?void 0:ae.fieldName)??N,Ae=I&&Ie?r[Ie]:n[Ie]??(ie==null?void 0:ie.label)??(ie==null?void 0:ie.fieldName)??y,Me=I&&y?r[y]:n[ue];return z.tooltip=this._getTooltip({label:Ae,value:Me,chartType:_}),z}const U=mse(v,c),W=P2(c,A),Q=N&&n[N]!==void 0?n[N]:dse(U||new T3({fieldName:W}),(ee=this.popupTemplate)==null?void 0:ee.expressionInfos),K=n[W];return z.tooltip=this._getTooltip({label:Q,value:K,chartType:_}),z}};m([w()],Nr.prototype,"abilities",void 0),m([wt("abilities")],Nr.prototype,"castAbilities",null),m([w()],Nr.prototype,"activeMediaInfoIndex",void 0),m([w({readOnly:!0})],Nr.prototype,"activeMediaInfo",null),m([w()],Nr.prototype,"attributes",void 0),m([w()],Nr.prototype,"description",void 0),m([w()],Nr.prototype,"fieldInfoMap",void 0),m([w()],Nr.prototype,"formattedAttributes",void 0),m([w()],Nr.prototype,"expressionAttributes",void 0),m([w({readOnly:!0})],Nr.prototype,"formattedMediaInfos",null),m([w()],Nr.prototype,"isAggregate",void 0),m([w()],Nr.prototype,"layer",void 0),m([w({readOnly:!0})],Nr.prototype,"formattedMediaInfoCount",null),m([w()],Nr.prototype,"mediaInfos",void 0),m([w()],Nr.prototype,"popupTemplate",void 0),m([w()],Nr.prototype,"relatedInfos",void 0),m([w()],Nr.prototype,"title",void 0),Nr=m([H("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],Nr);const Xf=Nr,Lr="esri-feature-media",ws={base:Lr,mediaContainer:`${Lr}__container`,mediaItemContainer:`${Lr}__item-container`,mediaItem:`${Lr}__item`,mediaItemText:`${Lr}__item-text`,mediaItemTitle:`${Lr}__item-title`,mediaItemCaption:`${Lr}__item-caption`,mediaNavigation:`${Lr}__item-navigation`,mediaPagination:`${Lr}__pagination`,mediaPaginationText:`${Lr}__pagination-text`,mediaPrevious:`${Lr}__previous`,mediaPreviousIconLTR:`${Lr}__previous-icon`,mediaPreviousIconRTL:`${Lr}__previous-icon--rtl`,mediaNext:`${Lr}__next`,mediaNextIconLTR:`${Lr}__next-icon`,mediaNextIconRTL:`${Lr}__next-icon--rtl`,mediaChart:`${Lr}__chart`,mediaPaginationButton:`${Lr}__pagination-button`,mediaPaginationIcon:`${Lr}__pagination-icon`,mediaChartRendered:`${Lr}__chart--rendered`},TE=15,Sh="category",Ov="value",G8e="rgba(50, 50, 50, 1)",q8e=250,H8e=500,W8e=200;let Is=class extends yi{constructor(t,i){super(t,i),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this._chartRootMap=new WeakMap,this.viewModel=new Xf,this.messages=null,this._disposeChart=r=>{var n;(n=this._chartRootMap.get(r))==null||n.dispose(),this._chartRootMap.delete(r)},this._createChart=async r=>{const{destroyed:n,viewModel:o}=this;if(n||!o||!r)return;const{createRoot:c}=await de(()=>import("./chartUtilsAm5-DYrSsftN.js"),__vite__mapDeps([196,197,198,199]),import.meta.url),y=await c(r);this._chartRootMap.set(r,y),this._renderChart({mediaInfo:o.activeMediaInfo,root:y})}}initialize(){this._featureElementInfo=new O3,this.addHandles([ge(()=>{var t,i;return[(t=this.viewModel)==null?void 0:t.activeMediaInfo,(i=this.viewModel)==null?void 0:i.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),qe),ge(()=>{var t,i;return[(t=this.viewModel)==null?void 0:t.description,(i=this.viewModel)==null?void 0:i.title]},()=>this._setupFeatureElementInfo(),qe)])}loadDependencies(){return Vn({icon:()=>de(()=>import("./calcite-icon-D67BMpQP.js"),[],import.meta.url)})}destroy(){var t;this._clearMediaRefreshTimer(),(t=this._featureElementInfo)==null||t.destroy()}get attributes(){return this.viewModel.attributes}set attributes(t){this.viewModel.attributes=t}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(t){this.viewModel.activeMediaInfoIndex=t}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(t){this.viewModel.fieldInfoMap=t}get layer(){return this.viewModel.layer}set layer(t){this.viewModel.layer=t}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(t){this.viewModel.mediaInfos=t}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(t){this.viewModel.popupTemplate=t}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(t){this.viewModel.relatedInfos=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}render(){var t;return B("div",{bind:this,class:ws.base,onkeyup:this._handleMediaKeyup},(t=this._featureElementInfo)==null?void 0:t.render(),this._renderMedia())}_renderMedia(){const{formattedMediaInfoCount:t,activeMediaInfoIndex:i}=this.viewModel,r=this._renderMediaText();return t?B("div",{class:ws.mediaContainer,key:"media-element-container"},this._renderMediaInfo(),B("div",{class:ws.mediaNavigation},r,t>1?B("div",{class:ws.mediaPagination},this._renderMediaPageButton("previous"),B("span",{class:ws.mediaPaginationText},mn(this.messages.pageText,{index:i+1,total:t})),this._renderMediaPageButton("next")):null)):null}_renderMediaText(){const{activeMediaInfo:t}=this.viewModel;if(!t)return null;const i=t&&t.title?B("div",{class:ws.mediaItemTitle,innerHTML:t.title,key:"media-title"}):null,r=t&&t.caption?B("div",{class:ws.mediaItemCaption,innerHTML:t.caption,key:"media-caption"}):null;return i||r?B("div",{class:ws.mediaItemText,key:"media-text"},i,r):null}_renderImageMediaInfo(t){if(!t.value)return null;const{_refreshIntervalInfo:i}=this,{activeMediaInfoIndex:r,formattedMediaInfoCount:n}=this.viewModel,{value:o,refreshInterval:c,altText:y,title:v,type:_}=t,{sourceURL:I,linkURL:$}=o,A=hse($??void 0)?"_blank":"_self",k=A==="_blank"?"noreferrer":"",R=c?i:null,N=R?R.timestamp:0,D=R?R.sourceURL:I,j=B("img",{alt:y||v,key:`media-${_}-${r}-${n}-${N}`,src:D??void 0});return($?B("a",{href:$,rel:k,target:A,title:v},j):null)??j}_renderChartMediaInfo(t){const{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel;return B("div",{afterCreate:this._createChart,afterRemoved:this._disposeChart,bind:this,class:ws.mediaChart,key:`media-${t.type}-${i}-${r}`})}_renderMediaInfoType(){const{activeMediaInfo:t}=this.viewModel;return t?t.type==="image"?this._renderImageMediaInfo(t):t.type.includes("chart")?this._renderChartMediaInfo(t):null:null}_renderMediaInfo(){const{activeMediaInfo:t}=this.viewModel;return t?B("div",{class:ws.mediaItemContainer,key:"media-container"},B("div",{class:ws.mediaItem,key:"media-item-container"},this._renderMediaInfoType())):null}_renderMediaPageButton(t){if(this.viewModel.formattedMediaInfoCount<2)return null;const i=t==="previous",r=i?this.messages.previous:this.messages.next,n=i?"chevron-left":"chevron-right",o=i?"media-previous":"media-next",c=i?this._previous:this._next;return B("button",{"aria-label":r,bind:this,class:ws.mediaPaginationButton,key:o,onclick:c,tabIndex:0,title:r,type:"button"},B("calcite-icon",{class:ws.mediaPaginationIcon,icon:n,scale:"s"}))}_setupFeatureElementInfo(){var r;const{description:t,title:i}=this;(r=this._featureElementInfo)==null||r.set({description:t,title:i})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getRenderer(){if(!this.viewModel)return;const{isAggregate:t,layer:i}=this.viewModel;return t&&(i!=null&&i.featureReduction)&&"renderer"in i.featureReduction?i.featureReduction.renderer:i==null?void 0:i.renderer}async _getSeriesColors(t){const{colorAm5:i}=await de(()=>import("./chartCommon-Bfi5Ci5r.js"),__vite__mapDeps([200,197,201,198,202]),import.meta.url),r=new Map;return t.forEach(n=>{n.color&&r.set(n,i(n.color.toCss(!0)))}),r}async _getRendererColors(){const{colorAm5:t}=await de(()=>import("./chartCommon-Bfi5Ci5r.js"),__vite__mapDeps([200,197,201,198,202]),import.meta.url),i=new Map,r=this._getRenderer(),n="default";if(!r)return i;const o=await Q7e(r);return o.delete(n),Array.from(o.values()).every(c=>(c==null?void 0:c.length)===1)&&Array.from(o.keys()).forEach(c=>{var v,_;const y=(_=(v=o.get(c))==null?void 0:v[0])==null?void 0:_.toCss(!0);y&&i.set(c,t(y))}),i}_handleMediaKeyup(t){const{key:i}=t;i==="ArrowLeft"&&(t.stopPropagation(),this.viewModel.previous()),i==="ArrowRight"&&(t.stopPropagation(),this.viewModel.next())}_canAnimateChart(){return!!this.viewModel&&!!this.viewModel.abilities.chartAnimation&&!AR()}_getChartAnimationMS(){return this._canAnimateChart()?q8e:0}_getChartSeriesAnimationMS(){return this._canAnimateChart()?H8e:0}async _renderChart(t){const{root:i,mediaInfo:r}=t,{value:n,type:o}=r,{ResponsiveThemeAm5:c,DarkThemeAm5:y,AnimatedThemeAm5:v,ColorSetAm5:_,ThemeAm5:I,esriChartColorSet:$}=await de(async()=>{const{ResponsiveThemeAm5:W,DarkThemeAm5:Q,AnimatedThemeAm5:K,ColorSetAm5:ee,ThemeAm5:ie,esriChartColorSet:ae}=await import("./chartCommon-Bfi5Ci5r.js");return{ResponsiveThemeAm5:W,DarkThemeAm5:Q,AnimatedThemeAm5:K,ColorSetAm5:ee,ThemeAm5:ie,esriChartColorSet:ae}},__vite__mapDeps([200,197,201,198,202]),import.meta.url),A=I.new(i);A.rule("ColorSet").set("colors",$),A.rule("ColorSet").set("reuse",!0);const k=[c.new(i),A];UR()&&k.push(y.new(i)),this._canAnimateChart()&&k.push(v.new(i)),i.setThemes(k);const R=await this._getRendererColors(),N=await this._getSeriesColors(n.series),D=_.new(i,{}),j=N.get(n.series[0]),z=j?{lineSettings:{stroke:j}}:void 0,U=n.series.map((W,Q)=>{const K=N.get(W)||R.get(W.fieldName)||D.getIndex(Q);return{[Sh]:W.tooltip,[Ov]:W.value,columnSettings:{fill:K,stroke:K},...z}}).filter(W=>o!=="pie-chart"||W.value!=null&&W.value>0);o==="pie-chart"?this._createPieChart(t,U):this._createXYChart(t,U)}_getDirection(){return Po(this.container)?"rtl":"ltr"}async _customizeChartTooltip(t,i="horizontal"){var n;const{colorAm5:r}=await de(()=>import("./chartCommon-Bfi5Ci5r.js"),__vite__mapDeps([200,197,201,198,202]),import.meta.url);t.setAll({pointerOrientation:i}),(n=t.get("background"))==null||n.setAll({stroke:r(G8e)}),t.label.setAll({direction:this._getDirection(),oversizedBehavior:"wrap",maxWidth:W8e})}async _createPieChart(t,i){const{TooltipAm5:r}=await de(()=>import("./chartCommon-Bfi5Ci5r.js"),__vite__mapDeps([200,197,201,198,202]),import.meta.url),{PieChartAm5:n,PieSeriesAm5:o}=await de(async()=>{const{PieChartAm5:N,PieSeriesAm5:D}=await import("./pieChart-BCZUHcQX.js");return{PieChartAm5:N,PieSeriesAm5:D}},__vite__mapDeps([203,204,197,202,199]),import.meta.url),{mediaInfo:c,root:y}=t,{title:v}=c,_=5,I=(c==null?void 0:c.altText)||(c==null?void 0:c.title)||"",$=y.container.children.push(n.new(y,{ariaLabel:I,focusable:!0,paddingBottom:_,paddingTop:_,paddingLeft:_,paddingRight:_})),A=`{category}: {valuePercentTotal.formatNumber('0.00')}%
 ({value})`,k=r.new(y,{labelText:A}),R=$.series.push(o.new(y,{name:v,valueField:Ov,categoryField:Sh,tooltip:k}));R.ticks.template.set("forceHidden",!0),R.labels.template.set("forceHidden",!0),R.slices.template.states.create("active",{shiftRadius:_}),this._customizeChartTooltip(k),R.slices.template.setAll({ariaLabel:A,focusable:!0,templateField:"columnSettings"}),R.data.setAll(i),R.appear(this._getChartSeriesAnimationMS()),$.appear(this._getChartAnimationMS()),$.root.dom.classList.toggle(ws.mediaChartRendered,!0)}_getMinSeriesValue(t){let i=0;return t.forEach(r=>i=Math.min(r.value,i)),i}async _createColumnChart(t,i,r){const{TooltipAm5:n,ScrollbarAm5:o}=await de(()=>import("./chartCommon-Bfi5Ci5r.js"),__vite__mapDeps([200,197,201,198,202]),import.meta.url),{CategoryAxisAm5:c,AxisRendererXAm5:y,ValueAxisAm5:v,AxisRendererYAm5:_,ColumnSeriesAm5:I}=await de(async()=>{const{CategoryAxisAm5:W,AxisRendererXAm5:Q,ValueAxisAm5:K,AxisRendererYAm5:ee,ColumnSeriesAm5:ie}=await import("./xyChart-SRfqvlcO.js");return{CategoryAxisAm5:W,AxisRendererXAm5:Q,ValueAxisAm5:K,AxisRendererYAm5:ee,ColumnSeriesAm5:ie}},__vite__mapDeps([205,197,202,199,204,201]),import.meta.url),{mediaInfo:$,root:A}=i,{value:k,title:R}=$;t.setAll({wheelX:"panX",wheelY:"zoomX"});const N=t.xAxes.push(c.new(A,{renderer:y.new(A,{inversed:Po(this.container)}),categoryField:Sh}));N.get("renderer").labels.template.setAll({forceHidden:!0});const D=t.yAxes.push(v.new(A,{renderer:_.new(A,{inside:!1}),min:this._getMinSeriesValue(k.series)}));D.get("renderer").labels.template.setAll({direction:this._getDirection()});const j="{categoryX}",z=n.new(A,{labelText:j}),U=t.series.push(I.new(A,{name:R,xAxis:N,yAxis:D,valueYField:Ov,categoryXField:Sh,tooltip:z}));this._customizeChartTooltip(z),U.columns.template.setAll({ariaLabel:j,focusable:!0,templateField:"columnSettings"}),k.series.length>TE&&t.set("scrollbarX",o.new(A,{orientation:"horizontal"})),N.data.setAll(r),U.data.setAll(r),U.appear(this._getChartSeriesAnimationMS()),t.appear(this._getChartAnimationMS())}async _createBarChart(t,i,r){const{TooltipAm5:n,ScrollbarAm5:o}=await de(()=>import("./chartCommon-Bfi5Ci5r.js"),__vite__mapDeps([200,197,201,198,202]),import.meta.url),{CategoryAxisAm5:c,AxisRendererXAm5:y,ValueAxisAm5:v,AxisRendererYAm5:_,ColumnSeriesAm5:I}=await de(async()=>{const{CategoryAxisAm5:W,AxisRendererXAm5:Q,ValueAxisAm5:K,AxisRendererYAm5:ee,ColumnSeriesAm5:ie}=await import("./xyChart-SRfqvlcO.js");return{CategoryAxisAm5:W,AxisRendererXAm5:Q,ValueAxisAm5:K,AxisRendererYAm5:ee,ColumnSeriesAm5:ie}},__vite__mapDeps([205,197,202,199,204,201]),import.meta.url),{mediaInfo:$,root:A}=i,{value:k,title:R}=$;t.setAll({wheelX:"panY",wheelY:"zoomY"});const N=t.yAxes.push(c.new(A,{renderer:_.new(A,{inversed:!0}),categoryField:Sh}));N.get("renderer").labels.template.setAll({forceHidden:!0});const D=t.xAxes.push(v.new(A,{renderer:y.new(A,{inside:!1,inversed:Po(this.container)}),min:this._getMinSeriesValue(k.series)}));D.get("renderer").labels.template.setAll({direction:this._getDirection()});const j="{categoryY}",z=n.new(A,{labelText:j}),U=t.series.push(I.new(A,{name:R,xAxis:D,yAxis:N,valueXField:Ov,categoryYField:Sh,tooltip:z}));this._customizeChartTooltip(z,"vertical"),U.columns.template.setAll({ariaLabel:j,focusable:!0,templateField:"columnSettings"}),k.series.length>TE&&t.set("scrollbarY",o.new(A,{orientation:"vertical"})),N.data.setAll(r),U.data.setAll(r),U.appear(this._getChartSeriesAnimationMS()),t.appear(this._getChartAnimationMS())}async _createLineChart(t,i,r){var Q,K,ee;const{TooltipAm5:n,ScrollbarAm5:o}=await de(()=>import("./chartCommon-Bfi5Ci5r.js"),__vite__mapDeps([200,197,201,198,202]),import.meta.url),{CategoryAxisAm5:c,AxisRendererXAm5:y,ValueAxisAm5:v,AxisRendererYAm5:_,LineSeriesAm5:I}=await de(async()=>{const{CategoryAxisAm5:ie,AxisRendererXAm5:ae,ValueAxisAm5:ue,AxisRendererYAm5:Ie,LineSeriesAm5:Ae}=await import("./xyChart-SRfqvlcO.js");return{CategoryAxisAm5:ie,AxisRendererXAm5:ae,ValueAxisAm5:ue,AxisRendererYAm5:Ie,LineSeriesAm5:Ae}},__vite__mapDeps([205,197,202,199,204,201]),import.meta.url),{root:$,mediaInfo:A}=i,{value:k,title:R}=A;t.setAll({wheelX:"panX",wheelY:"zoomX"});const N=t.xAxes.push(c.new($,{renderer:y.new($,{inversed:Po(this.container)}),categoryField:Sh}));N.get("renderer").labels.template.setAll({forceHidden:!0});const D=t.yAxes.push(v.new($,{renderer:_.new($,{inside:!1}),min:this._getMinSeriesValue(k.series)}));D.get("renderer").labels.template.setAll({direction:this._getDirection()});const j="{categoryX}",z=(K=(Q=r[0])==null?void 0:Q.lineSettings)==null?void 0:K.stroke,U=n.new($,{getFillFromSprite:!z,labelText:j});z&&((ee=U.get("background"))==null||ee.setAll({fill:z}));const W=t.series.push(I.new($,{name:R,xAxis:N,yAxis:D,valueYField:Ov,categoryXField:Sh,tooltip:U}));W.strokes.template.setAll({templateField:"lineSettings"}),this._customizeChartTooltip(U,"vertical"),k.series.length>TE&&t.set("scrollbarX",o.new($,{orientation:"horizontal"})),N.data.setAll(r),W.data.setAll(r),W.appear(this._getChartSeriesAnimationMS()),t.appear(this._getChartAnimationMS())}async _createXYChart(t,i){const{XYChartAm5:r,XYCursorAm5:n}=await de(()=>import("./xyChart-SRfqvlcO.js"),__vite__mapDeps([205,197,202,199,204,201]),import.meta.url),{root:o,mediaInfo:c}=t,{type:y}=c,v=(c==null?void 0:c.altText)||(c==null?void 0:c.title)||"",_=o.container.children.push(r.new(o,{ariaLabel:v,focusable:!0,panX:!0,panY:!0}));_.set("cursor",n.new(o,{})),y==="column-chart"&&await this._createColumnChart(_,t,i),y==="bar-chart"&&await this._createBarChart(_,t,i),y==="line-chart"&&await this._createLineChart(_,t,i),_.root.dom.classList.toggle(ws.mediaChartRendered,!0)}_clearMediaRefreshTimer(){const{_refreshTimer:t}=this;t&&(clearTimeout(t),this._refreshTimer=null)}_updateMediaInfoTimestamp(t){const i=Date.now();this._refreshIntervalInfo={timestamp:i,sourceURL:t&&this._getImageSource(t,i)}}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:t}=this.viewModel;(t==null?void 0:t.type)==="image"&&(t==null?void 0:t.refreshInterval)>0&&this._setRefreshTimeout(t)}_setRefreshTimeout(t){const{refreshInterval:i,value:r}=t,n=6e4*i;this._updateMediaInfoTimestamp(r.sourceURL);const o=setInterval(()=>{this._updateMediaInfoTimestamp(r.sourceURL)},n);this._refreshTimer=o}_getImageSource(t,i){const r=t.includes("?")?"&":"?",[n,o=""]=t.split("#");return`${n}${r}timestamp=${i}${o?"#":""}${o}`}};m([w()],Is.prototype,"_refreshIntervalInfo",void 0),m([w()],Is.prototype,"attributes",null),m([w()],Is.prototype,"activeMediaInfoIndex",null),m([w()],Is.prototype,"description",null),m([w()],Is.prototype,"fieldInfoMap",null),m([w()],Is.prototype,"layer",null),m([w()],Is.prototype,"mediaInfos",null),m([w()],Is.prototype,"popupTemplate",null),m([w()],Is.prototype,"relatedInfos",null),m([w()],Is.prototype,"title",null),m([w({type:Xf})],Is.prototype,"viewModel",void 0),m([w(),Ht("esri/widgets/Feature/t9n/Feature")],Is.prototype,"messages",void 0),Is=m([H("esri.widgets.Feature.FeatureMedia")],Is);const Zse=Is;let yl=class{};function J8e(e){return e instanceof W0?e===yl.instance:(e==null?void 0:e.toString().toLowerCase())==="unknown"}function Itt(e){return J8e(e)?yl.instance:e}yl.instance=new ho("Etc/UTC");var S4;(function(e){e.TimeZoneNotRecognized="TimeZoneNotRecognized"})(S4||(S4={}));const Z8e={[S4.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};let K8e=class Kse extends Error{constructor(t,i){super(Il(Z8e[t],i)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,Kse)}};function vy(e,t,i){return e<t?e-t:e>i?e-i:0}function wy(e,t,i){return e<t?t:e>i?i:e}let q7=class Ir{constructor(t){this._date=t,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(t=0,i=1,r=1,n=0,o=0,c=0,y=0,v){if(isNaN(t)||isNaN(i)||isNaN(r)||isNaN(n)||isNaN(o)||isNaN(c)||isNaN(y))return null;const _=Ge.local(t,i).daysInMonth;let I=Ge.fromObject({day:wy(r,1,_),year:t,month:wy(i,1,12),hour:wy(n,0,23),minute:wy(o,0,59),second:wy(c,0,59),millisecond:wy(y,0,999)},{zone:vu(v)});return I=I.plus({months:vy(i,1,12),days:vy(r,1,_),hours:vy(n,0,23),minutes:vy(o,0,59),seconds:vy(c,0,59),milliseconds:vy(y,0,999)}),new Ir(I)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(t,i){const r=vu(i);return t.isUnknownTimeZone||r===yl.instance?Ir.fromParts(t.year,t.monthJS+1,t.day,t.hour,t.minute,t.second,t.millisecond,r):new Ir(t._date.setZone(r))}static dateJSToArcadeDate(t){return new Ir(Ge.fromJSDate(t,{zone:"system"}))}static dateJSAndZoneToArcadeDate(t,i="system"){const r=vu(i);return new Ir(Ge.fromJSDate(t,{zone:r}))}static unknownEpochToArcadeDate(t){return new Ir(Ge.fromMillis(t,{zone:yl.instance}))}static unknownDateJSToArcadeDate(t){return new Ir(Ge.fromMillis(t.getTime(),{zone:yl.instance}))}static epochToArcadeDate(t,i="system"){const r=vu(i);return new Ir(Ge.fromMillis(t,{zone:r}))}static dateTimeToArcadeDate(t){return new Ir(t)}clone(){return new Ir(this._date)}changeTimeZone(t){const i=vu(t);return Ir.dateTimeToArcadeDate(this._date.setZone(i))}static dateTimeAndZoneToArcadeDate(t,i){const r=vu(i);return t.zone===yl.instance||r===yl.instance?Ir.fromParts(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond,r):new Ir(t.setZone(r))}static nowToArcadeDate(t){const i=vu(t);return new Ir(Ge.fromJSDate(new Date,{zone:i}))}static nowUTCToArcadeDate(){return new Ir(Ge.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===Ir.systemTimeZoneCanonicalName}equals(t){return this.isSystem&&t.isSystem?this.toNumber()===t.toNumber():this.isUnknownTimeZone===t.isUnknownTimeZone&&this._date.equals(t._date)}get isUnknownTimeZone(){return this._date.zone===yl.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let t=this._date.weekday;return t>6&&(t=0),t}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const t=this.zone;return t.type==="fixed"?t.fixed===0?"UTC":t.formatOffset(0,"short"):t.name}stringify(){return JSON.stringify(this.toJSDate())}plus(t){return new Ir(this._date.plus(t))}diff(t,i="milliseconds"){return this._date.diff(t._date,i)[i]}toISODate(){return this._date.toISODate()}toISOString(t){return t?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(t,i){return this._date.toISOTime({suppressMilliseconds:t,includeOffset:i&&!this.isUnknownTimeZone})}toFormat(t,i){return this.isUnknownTimeZone&&(t=t.replaceAll("Z","")),this._date.toFormat(t,i)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new Ir(this._date.toUTC())}toLocal(){return new Ir(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(t){if(!t)return null;const i=Ge.fromISO(t,{setZone:!0});return new Ir(i)}};function vu(e,t=!0){if(e instanceof W0)return e;if(e.toLowerCase()==="system")return"system";if(e.toLowerCase()==="utc")return"UTC";if(e.toLowerCase()==="unknown")return yl.instance;if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(e)){const r=Vr.parseSpecifier("UTC"+(e.startsWith("+")||e.startsWith("-")?"":"+")+e);if(r)return r}const i=ho.create(e);if(!i.isValid){if(t)throw new K8e(S4.TimeZoneNotRecognized);return null}return i}function rG(e){e=e.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let t="";const i=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of e.match(i)||[])switch(r){case"D":t+="d";break;case"DD":t+="dd";break;case"DDD":t+="o";break;case"d":t+="c";break;case"ddd":t+="ccc";break;case"dddd":t+="cccc";break;case"M":t+="L";break;case"MM":t+="LL";break;case"MMM":t+="LLL";break;case"MMMM":t+="LLLL";break;case"YY":t+="yy";break;case"Y":case"YYYY":t+="yyyy";break;case"Q":t+="q";break;case"X":case"x":t+=r;break;default:r.length>=2&&r.slice(0,1)==="["&&r.slice(-1)==="]"?t+=`'${r.slice(1,-1)}'`:t+=`'${r}'`}return t}let Y8e=class xo{constructor(t,i,r){this._year=t,this._month=i,this._day=r,this.declaredRootClass="esri.core.sql.dateonly"}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(t){return t instanceof xo&&t.day===this.day&&t.month===this.month&&t.year===this.year}clone(){return new xo(this._year,this._month,this._day)}toDateTime(t){return Ge.fromObject({day:this.day,month:this.month,year:this.year},{zone:vu(t)})}toDateTimeLuxon(t){return Ge.fromObject({day:this.day,month:this.month,year:this.year},{zone:vu(t)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(t=null,i=!0){if(t===null||t==="")return this.toString();if(i&&(t=rG(t)),!t)return"";const r=this.toDateTime("unknown");return q7.dateTimeToArcadeDate(r).toFormat(t,{locale:ps(),numberingSystem:"latn"})}toArcadeDate(){const t=this.toDateTime("unknown");return q7.dateTimeToArcadeDate(t)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(t,i){return xo.fromDateTime(this.toUTCDateTime().plus({[t]:i}))}toUTCDateTime(){return Ge.utc(this.year,this.month,this.day,0,0,0,0)}difference(t,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(t.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(t.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(t.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(t.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(t.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(t.toUTCDateTime(),"years").years}}static fromMilliseconds(t){const i=Ge.fromMillis(t,{zone:Vr.utcInstance});return i.isValid?xo.fromParts(i.year,i.month,i.day):null}static fromSeconds(t){const i=Ge.fromSeconds(t,{zone:Vr.utcInstance});return i.isValid?xo.fromParts(i.year,i.month,i.day):null}static fromReader(t){if(!t)return null;const i=t.split("-");return i.length!==3?null:new xo(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10))}static fromParts(t,i,r){const n=new xo(t,i,r);return n.isValid===!1?null:n}static fromDateJS(t){return xo.fromParts(t.getFullYear(),t.getMonth()+1,t.getDay())}static fromDateTime(t){return xo.fromParts(t.year,t.month,t.day)}static fromSqlTimeStampOffset(t){return this.fromDateTime(t.toDateTime())}static fromString(t,i=null){if(t===""||t===null)return null;const r=[];if(i)(i=rG(i))&&r.push(i);else if(i===null||i===""){const n=Ge.fromISO(t,{setZone:!0});return n.isValid?xo.fromParts(n.year,n.month,n.day):null}for(const n of r){const o=Ge.fromFormat(t,i??n);if(o.isValid)return new xo(o.year,o.month,o.day)}return null}static fromNow(t="system"){const i=Ge.fromJSDate(new Date).setZone(vu(t));return new xo(i.year,i.month,i.day)}};function Ttt(e){if(e==null)return null;if(typeof e=="number")return e;let t=e.toLowerCase();switch(t=t.replaceAll(/\s/g,""),t=t.replaceAll("-",""),t){case"meters":case"meter":case"m":case"squaremeters":case"squaremeter":return 109404;case"miles":case"mile":case"squaremile":case"squaremiles":return 109439;case"kilometers":case"kilometer":case"squarekilometers":case"squarekilometer":case"km":return 109414;case"acres":case"acre":case"ac":return 109402;case"hectares":case"hectare":case"ha":return 109401;case"yard":case"yd":case"yards":case"squareyards":case"squareyard":return 109442;case"feet":case"ft":case"foot":case"squarefeet":case"squarefoot":return 109405;case"nmi":case"nauticalmile":case"nauticalmiles":case"squarenauticalmile":case"squarenauticalmiles":return 109409}return null}function $tt(e){if(e==null)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new Ut({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function Ett(e){if(e==null)return null;if(typeof e=="number")return e;let t=e.toLowerCase();switch(t=t.replaceAll(/\s/g,""),t=t.replaceAll("-",""),t){case"meters":case"meter":case"m":case"squaremeters":case"squaremeter":return 9001;case"miles":case"mile":case"squaremile":case"squaremiles":return 9093;case"kilometers":case"kilometer":case"squarekilometers":case"squarekilometer":case"km":return 9036;case"yard":case"yd":case"yards":case"squareyards":case"squareyard":return 9096;case"feet":case"ft":case"foot":case"squarefeet":case"squarefoot":return 9002;case"nmi":case"nauticalmile":case"nauticalmiles":case"squarenauticalmile":case"squarenauticalmiles":return 9030}return null}function Mtt(e){if(e==null)return null;const t=e.clone();return e.cache._geVersion!==void 0&&(t.cache._geVersion=e.cache._geVersion),t}function eS(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function nG(e){if(!e)return"";const t=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let i="";for(const r of e.match(t)||[])switch(r){case"SSS":case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":i+=r;break;case"A":case"a":i+="a";break;default:i+=`'${r}'`}return i}let X8e=class eu{constructor(t,i,r,n){this._hour=t,this._minute=i,this._second=r,this._millisecond=n,this.declaredRootClass="esri.core.sql.timeonly"}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(t){return t instanceof eu&&t.hour===this.hour&&t.minute===this.minute&&t.second===this.second&&t.millisecond===this.millisecond}clone(){return new eu(this.hour,this.minute,this.second,this.millisecond)}isValid(){return eS(this.hour)&&eS(this.minute)&&eS(this.second)&&eS(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`+(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`}toFormat(t=null){return t===null||t===""?this.toString():(t=nG(t))?Ge.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(t,{locale:ps(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(t,i,r,n){const o=new eu(t,i,r,n);return o.isValid()?o:null}static fromReader(t){if(!t)return null;const i=t.split(":");return i.length!==3?null:new eu(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10),0)}static fromMilliseconds(t){if(t>864e5||t<0)return null;const i=Math.floor(t/1e3%60),r=Math.floor(t/6e4%60),n=Math.floor(t/36e5%24),o=Math.floor(t%1e3);return new eu(n,r,i,o)}static fromDateJS(t){return new eu(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}static fromDateTime(t){return new eu(t.hour,t.minute,t.second,t.millisecond)}static fromSqlTimeStampOffset(t){return this.fromDateTime(t.toDateTime())}static fromString(t,i=null){if(t===""||t===null)return null;const r=[];i?(i=nG(i))&&r.push(i):i!==null&&i!==""||(r.push("HH:mm:ss"),r.push("HH:mm:ss.SSS"),r.push("hh:mm:ss a"),r.push("hh:mm:ss.SSS a"),r.push("HH:mm"),r.push("hh:mm a"),r.push("H:mm"),r.push("h:mm a"),r.push("H:mm:ss"),r.push("h:mm:ss a"),r.push("H:mm:ss.SSS"),r.push("h:mm:ss.SSS a"));for(const n of r){const o=Ge.fromFormat(t,n);if(o.isValid)return new eu(o.hour,o.minute,o.second,o.millisecond)}return null}plus(t,i){switch(t){case"days":case"years":case"months":return this.clone();case"hours":case"minutes":case"seconds":case"milliseconds":return eu.fromDateTime(this.toUTCDateTime().plus({[t]:i}))}return null}toUTCDateTime(){return Ge.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(t,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(t.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(t.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(t.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(t.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(t.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(t.toUTCDateTime(),"years").years}}};var sG,oG;function Att(e){return KI.fromJSON(e.toJSON())}function Ctt(e){return e.toJSON?e.toJSON():e}function ktt(e){return e instanceof Date}function Ltt(e){return e instanceof Ge}function Ott(e){return e instanceof q7}function Rtt(e){return e instanceof Y8e}function Ptt(e){return e instanceof X8e}function Ntt(e){if(e==null)return null;if(typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109439;case"kilometers":case"kilometer":case"km":return 109414}return null}function Ftt(e){if(e==null)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new Ut({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function Dtt(e){if(e==null)return null;if(typeof e=="number"||typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9093;case"kilometers":case"kilometer":case"km":return 9036}return null}(function(e){e[e.Standardised=0]="Standardised",e[e.StandardisedNoInterval=1]="StandardisedNoInterval",e[e.SqlServer=2]="SqlServer",e[e.Oracle=3]="Oracle",e[e.Postgres=4]="Postgres",e[e.PGDB=5]="PGDB",e[e.FILEGDB=6]="FILEGDB",e[e.NotEvaluated=7]="NotEvaluated"})(sG||(sG={})),function(e){e[e.InFeatureSet=0]="InFeatureSet",e[e.NotInFeatureSet=1]="NotInFeatureSet",e[e.Unknown=2]="Unknown"}(oG||(oG={}));const jtt=1e3,ztt={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},Vtt={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},Utt={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate","date-only":"esriFieldTypeDateOnly","time-only":"esriFieldTypeTimeOnly","timestamp-offset":"esriFieldTypeTimestampOffset",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"esriFieldTypeXML","big-integer":"esriFieldTypeBigInteger",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeDateOnly:"esriFieldTypeDateOnly",esriFieldTypeTimeOnly:"esriFieldTypeTimeOnly",esriFieldTypeTimestampOffset:"esriFieldTypeTimestampOffset",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"esriFieldTypeXML",esriFieldTypeBigInteger:"esriFieldTypeBigInteger"};function Btt(e){return e===void 0?"":e=(e=(e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function Gtt(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const i=typeof t.cycles=="boolean"&&t.cycles,r=t.cmp&&(n=t.cmp,function(c){return function(y,v){const _={key:y,value:c[y]},I={key:v,value:c[v]};return n(_,I)}});var n;const o=[];return function c(y){if(y!=null&&y.toJSON&&typeof y.toJSON=="function"&&(y=y.toJSON()),y===void 0)return;if(typeof y=="number")return isFinite(y)?""+y:"null";if(typeof y!="object")return JSON.stringify(y);let v,_;if(Array.isArray(y)){for(_="[",v=0;v<y.length;v++)v&&(_+=","),_+=c(y[v])||"null";return _+"]"}if(y===null)return"null";if(o.includes(y)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const I=o.push(y)-1,$=Object.keys(y).sort(r==null?void 0:r(y));for(_="",v=0;v<$.length;v++){const A=$[v],k=c(y[A]);k&&(_&&(_+=","),_+=JSON.stringify(A)+":"+k)}return o.splice(I,1),"{"+_+"}"}(e)}function Q8e(e){switch(e.type){case"catalog":case"csv":case"feature":case"geojson":case"oriented-imagery":case"subtype-group":case"wfs":return!0;default:return!1}}function eke(e){switch(e.type){case"catalog-footprint":case"subtype-sublayer":return!0;default:return Q8e(e)}}var H7;let Dw=H7=class extends be{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new H7({minValue:this.minValue,maxValue:this.maxValue})}};m([w({type:Number,json:{write:!0}})],Dw.prototype,"minValue",void 0),m([w({type:Number,json:{write:!0}})],Dw.prototype,"maxValue",void 0),Dw=H7=m([H("esri.renderers.support.AuthoringInfoClassBreakInfo")],Dw);var W7;let md=W7=class extends be{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new W7({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:le(this.classBreakInfos)})}};m([w({type:String,json:{write:!0}})],md.prototype,"field",void 0),m([w({type:String,json:{write:!0}})],md.prototype,"normalizationField",void 0),m([w({type:String,json:{write:!0}})],md.prototype,"label",void 0),m([w({type:[Dw],json:{write:!0}})],md.prototype,"classBreakInfos",void 0),md=W7=m([H("esri.renderers.support.AuthoringInfoFieldInfo")],md);var J7;let am=J7=class extends be{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new J7({label:this.label,value:this.value,size:this.size})}};m([w({type:String,json:{write:!0}})],am.prototype,"label",void 0),m([w({type:Number,json:{write:!0}})],am.prototype,"size",void 0),m([w({type:Number,json:{write:!0}})],am.prototype,"value",void 0),am=J7=m([H("esri.renderers.support.AuthoringInfoSizeStop")],am);const tke=am;var Z7;const tS=new ft({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),iS=new ft({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),aG={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},lG=["high-to-low","above-and-below","centered-on","extremes"],uG=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size"])],cG=["seconds","minutes","hours","days","months","years"],ike=["circle","diamond","hexagon-flat","hexagon-pointy","square"];let un=Z7=class extends be{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}get normalizationField(){return this.theme==="reference-size"?this._get("normalizationField"):null}set normalizationField(e){this._set("normalizationField",e)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(e){this._set("referenceSizeScale",e)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(e){this._set("referenceSizeSymbolStyle",e)}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get sizeStops(){return this.theme==="reference-size"?this._get("sizeStops"):null}set sizeStops(e){this._set("sizeStops",e)}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new Z7({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,sizeStops:le(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};m([w({types:aG,json:{write:!0}})],un.prototype,"endTime",void 0),m([wt("endTime")],un.prototype,"castEndTime",null),m([w({type:String,json:{write:!0}})],un.prototype,"field",void 0),m([w({type:Number,json:{write:!0}})],un.prototype,"maxSliderValue",void 0),m([w({type:Number,json:{write:!0}})],un.prototype,"minSliderValue",void 0),m([w({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],un.prototype,"normalizationField",null),m([w({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],un.prototype,"referenceSizeScale",null),m([w({type:ike,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],un.prototype,"referenceSizeSymbolStyle",null),m([w({types:aG,json:{write:!0}})],un.prototype,"startTime",void 0),m([wt("startTime")],un.prototype,"castStartTime",null),m([w({type:[tke],json:{origins:{"web-scene":{write:!1}},write:!0}})],un.prototype,"sizeStops",null),m([w({type:tS.apiValues,value:null,json:{type:tS.jsonValues,read:tS.read,write:tS.write}})],un.prototype,"style",null),m([w({type:uG,value:null,json:{type:uG,origins:{"web-scene":{type:lG,write:{writer:(e,t)=>{lG.includes(e)&&(t.theme=e)}}}},write:!0}})],un.prototype,"theme",null),m([w({type:iS.apiValues,json:{type:iS.jsonValues,read:iS.read,write:iS.write}})],un.prototype,"type",void 0),m([w({type:cG,json:{type:cG,write:!0}})],un.prototype,"units",void 0),un=Z7=m([H("esri.renderers.support.AuthoringInfoVisualVariable")],un);const rke=un;let Q5=class extends be{constructor(t){super(t),this.type=null}};m([w({readOnly:!0,json:{read:!1,write:!0}})],Q5.prototype,"type",void 0),Q5=m([H("esri.rest.support.ColorRamp")],Q5);const sP=Q5;var K7;let ff=K7=class extends sP{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new K7({fromColor:le(this.fromColor),toColor:le(this.toColor),algorithm:this.algorithm})}};m([He({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],ff.prototype,"algorithm",void 0),m([w({type:je,json:{type:[Ct],write:!0}})],ff.prototype,"fromColor",void 0),m([w({type:je,json:{type:[Ct],write:!0}})],ff.prototype,"toColor",void 0),m([w({type:["algorithmic"]})],ff.prototype,"type",void 0),ff=K7=m([H("esri.rest.support.AlgorithmicColorRamp")],ff);const oP=ff;var Y7;let jw=Y7=class extends sP{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new Y7({colorRamps:le(this.colorRamps)})}};m([w({type:[oP],json:{write:!0}})],jw.prototype,"colorRamps",void 0),m([w({type:["multipart"]})],jw.prototype,"type",void 0),jw=Y7=m([H("esri.rest.support.MultipartColorRamp")],jw);const Yse=jw,nke={key:"type",base:sP,typeMap:{algorithmic:oP,multipart:Yse}};function ske(e){return e!=null&&e.type?e.type==="algorithmic"?oP.fromJSON(e):e.type==="multipart"?Yse.fromJSON(e):null:null}var X7;const Ep=new ft({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),rS=new ft({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),hG=new ft({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),dG=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],oke=["high-to-low","above-and-below","above","below"],ake=["flow-line","wave-front"],lke=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let rr=X7=class extends be{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?ske(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){var e;return new X7({classificationMethod:this.classificationMethod,colorRamp:le(this.colorRamp),fadeRatio:le(this.fadeRatio),fields:(e=this.fields)==null?void 0:e.slice(),field1:le(this.field1),field2:le(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};m([w({type:Ep.apiValues,value:null,json:{type:Ep.jsonValues,read:Ep.read,write:Ep.write,origins:{"web-document":{default:"manual",type:Ep.jsonValues,read:Ep.read,write:Ep.write}}}})],rr.prototype,"classificationMethod",null),m([w({types:nke,json:{write:!0}})],rr.prototype,"colorRamp",void 0),m([ke("colorRamp")],rr.prototype,"readColorRamp",null),m([w({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],rr.prototype,"fadeRatio",void 0),m([w({type:[String],value:null,json:{write:!0}})],rr.prototype,"fields",null),m([w({type:md,value:null,json:{write:!0}})],rr.prototype,"field1",null),m([w({type:md,value:null,json:{write:!0}})],rr.prototype,"field2",null),m([w({type:ake,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],rr.prototype,"flowTheme",null),m([w({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],rr.prototype,"focus",null),m([w({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],rr.prototype,"isAutoGenerated",void 0),m([w({type:Number,value:null,json:{type:Ct,write:!0}})],rr.prototype,"numClasses",null),m([w({type:dG,json:{type:dG,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],rr.prototype,"lengthUnit",void 0),m([w({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],rr.prototype,"maxSliderValue",void 0),m([w({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],rr.prototype,"minSliderValue",void 0),m([w({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],rr.prototype,"statistics",null),m([w({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],rr.prototype,"standardDeviationInterval",null),m([w({type:rS.apiValues,value:null,json:{type:rS.jsonValues,read:rS.read,write:rS.write,origins:{"web-scene":{type:hG.jsonValues,write:{writer:hG.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],rr.prototype,"type",null),m([w({type:[rke],json:{write:!0}})],rr.prototype,"visualVariables",void 0),m([w({type:lke,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],rr.prototype,"univariateSymbolStyle",null),m([w({type:oke,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],rr.prototype,"univariateTheme",null),rr=X7=m([H("esri.renderers.support.AuthoringInfo")],rr);const aP=rr,$E=new ft({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let zw=class extends be{constructor(t){super(t),this.authoringInfo=null,this.type=null}async getRequiredFields(t){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,t),Array.from(i).sort()}getSymbol(t,i){}async getSymbolAsync(t,i){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};m([w({type:aP,json:{write:!0}})],zw.prototype,"authoringInfo",void 0),m([w({type:$E.apiValues,readOnly:!0,json:{type:$E.jsonValues,read:!1,write:{writer:$E.write,ignoreOrigin:!0}}})],zw.prototype,"type",void 0),zw=m([H("esri.renderers.Renderer")],zw);const lh=zw;function uke(e){var t,i;return((i=(t=e.match(cke))==null?void 0:t[1])==null?void 0:i.replace(/\\'/g,"'"))??null}const cke=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let Vw=class extends St(be){constructor(){super(...arguments),this.showLegend=null,this.title=null}};m([w({type:Boolean,json:{write:!0}})],Vw.prototype,"showLegend",void 0),m([w({type:String,json:{write:!0}})],Vw.prototype,"title",void 0),Vw=m([H("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],Vw);const Xse=Vw,EE=new ft({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Za=class extends be{constructor(t){super(t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(t){return t==null?t:typeof t=="function"?(_e.getLogger(this).error(".field: field must be a string value"),null):o3(t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};m([w()],Za.prototype,"index",void 0),m([w({type:EE.apiValues,readOnly:!0,json:{read:EE.read,write:EE.write}})],Za.prototype,"type",void 0),m([w({type:String,json:{write:!0}})],Za.prototype,"field",void 0),m([wt("field")],Za.prototype,"castField",null),m([w({type:String,json:{write:!0}})],Za.prototype,"valueExpression",void 0),m([w({type:String,json:{write:!0}})],Za.prototype,"valueExpressionTitle",void 0),m([w({readOnly:!0})],Za.prototype,"arcadeRequired",null),m([w({type:Xse,json:{write:!0}})],Za.prototype,"legendOptions",void 0),Za=m([H("esri.renderers.visualVariables.VisualVariable")],Za);const Yg=Za;var Q7;let yf=Q7=class extends Yg{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){var e;return new Q7({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};m([w({readOnly:!0})],yf.prototype,"cache",null),m([w({type:["color"],json:{type:["colorInfo"]}})],yf.prototype,"type",void 0),m([w({type:String,json:{write:!0}})],yf.prototype,"normalizationField",void 0),m([w({type:[PCe],json:{write:!0}})],yf.prototype,"stops",null),yf=Q7=m([H("esri.renderers.visualVariables.ColorVariable")],yf);const Qse=yf;var e8;let Gh=e8=class extends be{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return T2(t.transparency)}writeOpacity(e,t,i){t[i]=RI(e)}clone(){return new e8({label:this.label,opacity:this.opacity,value:this.value})}};m([w({type:String,json:{write:!0}})],Gh.prototype,"label",void 0),m([w({type:Number,json:{type:Ct,write:{target:"transparency"}}})],Gh.prototype,"opacity",void 0),m([ke("opacity",["transparency"])],Gh.prototype,"readOpacity",null),m([Le("opacity")],Gh.prototype,"writeOpacity",null),m([w({type:Number,json:{write:!0}})],Gh.prototype,"value",void 0),Gh=e8=m([H("esri.renderers.visualVariables.support.OpacityStop")],Gh);const hke=Gh;var t8;let mf=t8=class extends Yg{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){var e;return new t8({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};m([w({readOnly:!0})],mf.prototype,"cache",null),m([w({type:["opacity"],json:{type:["transparencyInfo"]}})],mf.prototype,"type",void 0),m([w({type:String,json:{write:!0}})],mf.prototype,"normalizationField",void 0),m([w({type:[hke],json:{write:!0}})],mf.prototype,"stops",null),mf=t8=m([H("esri.renderers.visualVariables.OpacityVariable")],mf);const lP=mf;var i8;let gf=i8=class extends Yg{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){var e;return new i8({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}};m([w({readOnly:!0})],gf.prototype,"cache",null),m([w({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],gf.prototype,"axis",void 0),m([w({type:["rotation"],json:{type:["rotationInfo"]}})],gf.prototype,"type",void 0),m([w({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],gf.prototype,"rotationType",void 0),gf=i8=m([H("esri.renderers.visualVariables.RotationVariable")],gf);const eoe=gf;function dke(e){return zt(e)}var r8;let qh=r8=class extends be{constructor(e){super(e),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new r8({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};m([w({type:String,json:{write:!0}})],qh.prototype,"label",void 0),m([w({type:Number,cast:zt,json:{write:!0}})],qh.prototype,"size",void 0),m([w({type:Number,json:{write:!0}})],qh.prototype,"value",void 0),m([w({type:Boolean,json:{write:!1}})],qh.prototype,"useMinValue",void 0),m([w({type:Boolean,json:{write:!1}})],qh.prototype,"useMaxValue",void 0),qh=r8=m([H("esri.renderers.visualVariables.support.SizeStop")],qh);const ex=qh;let tx=class extends Xse{constructor(){super(...arguments),this.customValues=null}};m([w({type:[Number],json:{write:!0}})],tx.prototype,"customValues",void 0),tx=m([H("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],tx);const toe=tx;var Hc,Yr;function p1(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function U2(e){return e!=null&&!isNaN(e)&&isFinite(e)}function ioe(e){return e.valueExpression?Hc.Expression:e.field&&typeof e.field=="string"?Hc.Field:Hc.Unknown}function pke(e,t){const i=t||ioe(e),r=e.valueUnit||"unknown";return i===Hc.Unknown?Yr.Constant:e.stops?Yr.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?Yr.ClampedLinear:r==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?Yr.Proportional:Yr.Additive:Yr.Identity:Yr.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(Hc||(Hc={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(Yr||(Yr={}));const uP={unknown:1,inches:pi(1,"meters","inches"),feet:pi(1,"meters","feet"),"us-feet":pi(1,"meters","us-feet"),yards:pi(1,"meters","yards"),miles:pi(1,"meters","miles"),"nautical-miles":pi(1,"meters","nautical-miles"),millimeters:pi(1,"meters","millimeters"),centimeters:pi(1,"meters","centimeters"),decimeters:pi(1,"meters","decimeters"),meters:pi(1,"meters","meters"),kilometers:pi(1,"meters","kilometers"),"decimal-degrees":1/R1e(1,"meters",ur.radius)},roe=()=>_e.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),pT=e=>roe().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${e}`),fT=()=>roe().error("Use of arcade expressions requires an arcade context"),pG=new er,ix=Math.PI,noe=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function soe(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(R=>R.type==="color"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void pT("ColorVariable");const n=typeof t=="number",o=n?null:t,c=o==null?void 0:o.attributes;let y=n?t:null;const v=r.field,{ipData:_,hasExpression:I}=r.cache;let $=r.cache.compiledFunc;if(!v&&!I){const R=r.stops;return R&&R[0]&&R[0].color}if(typeof y!="number")if(I){if((i==null?void 0:i.arcade)==null)return void fT();const R={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},N=i.arcade.arcadeUtils,D=N.getViewInfo(R),j=N.createExecContext(o,D,i.timeZone);if(!$){const z=N.createSyntaxTree(r.valueExpression);$=N.createFunction(z),r.cache.compiledFunc=$}y=N.executeFunction($,j)}else c&&(y=c[v]);const A=r.normalizationField,k=c!=null&&A!=null?parseFloat(c[A]):void 0;if(y!=null&&(!A||n||!isNaN(k)&&k!==0)){isNaN(k)||n||(y/=k);const R=cP(y,_);if(R){const N=R[0],D=R[1],j=N===D?r.stops[N].color:je.blendColors(r.stops[N].color,r.stops[D].color,R[2],i!=null?i.color:void 0);return new je(j)}}}function ooe(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(R=>R.type==="opacity"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void pT("OpacityVariable");const n=typeof t=="number",o=n?null:t,c=o==null?void 0:o.attributes;let y=n?t:null;const v=r.field,{ipData:_,hasExpression:I}=r.cache;let $=r.cache.compiledFunc;if(!v&&!I){const R=r.stops;return R&&R[0]&&R[0].opacity}if(typeof y!="number")if(I){if((i==null?void 0:i.arcade)==null)return void fT();const R={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},N=i.arcade.arcadeUtils,D=N.getViewInfo(R),j=N.createExecContext(o,D,i.timeZone);if(!$){const z=N.createSyntaxTree(r.valueExpression);$=N.createFunction(z),r.cache.compiledFunc=$}y=N.executeFunction($,j)}else c&&(y=c[v]);const A=r.normalizationField,k=c!=null&&A!=null?parseFloat(c[A]):void 0;if(y!=null&&(!A||n||!isNaN(k)&&k!==0)){isNaN(k)||n||(y/=k);const R=cP(y,_);if(R){const N=R[0],D=R[1];if(N===D)return r.stops[N].opacity;{const j=r.stops[N].opacity;return j+(r.stops[D].opacity-j)*R[2]}}}}function aoe(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(k=>k.type==="rotation"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void pT("RotationVariable");const n=r.axis||"heading",o=n==="heading"&&r.rotationType==="arithmetic"?90:0,c=n==="heading"&&r.rotationType==="arithmetic"?-1:1,y=typeof t=="number"?null:t,v=y==null?void 0:y.attributes,_=r.field,{hasExpression:I}=r.cache;let $=r.cache.compiledFunc,A=0;if(!_&&!I)return A;if(I){if((i==null?void 0:i.arcade)==null)return void fT();const k={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},R=i.arcade.arcadeUtils,N=R.getViewInfo(k),D=R.createExecContext(y,N,i.timeZone);if(!$){const j=R.createSyntaxTree(r.valueExpression);$=R.createFunction(j),r.cache.compiledFunc=$}A=R.executeFunction($,D)}else v&&(A=v[_]||0);return A=typeof A!="number"||isNaN(A)?null:o+c*A,A}function fke(e,t,i){const r=typeof t=="number",n=r?null:t,o=n==null?void 0:n.attributes;let c=r?t:null;const{isScaleDriven:y}=e.cache;let v=e.cache.compiledFunc;if(y){const I=i!=null?i.scale:void 0,$=i!=null?i.view:void 0;c=I==null||$==="3d"?yke(e):I}else if(!r)switch(e.inputValueType){case Hc.Expression:{if((i==null?void 0:i.arcade)==null)return void fT();const I={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},$=i.arcade.arcadeUtils,A=$.getViewInfo(I),k=$.createExecContext(n,A,i.timeZone);if(!v){const R=$.createSyntaxTree(e.valueExpression);v=$.createFunction(R),e.cache.compiledFunc=v}c=$.executeFunction(v,k);break}case Hc.Field:o&&(c=o[e.field]);break;case Hc.Unknown:c=null}if(!U2(c))return null;if(r||!e.normalizationField)return c;const _=o?parseFloat(o[e.normalizationField]):null;return U2(_)&&_!==0?c/_:null}function yke(e){let t=null,i=null;const r=e.stops;return r?(t=r[0].value,i=r[r.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}function yT(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(o=>o.type==="size"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void pT("SizeVariable");const n=uoe(fke(r,t,i),r,t,i,r.cache.ipData);return n==null||isNaN(n)?0:n}function lo(e,t,i){return e==null?null:p1(e)?yT(e,t,i):U2(e)?e:null}function loe(e,t,i){return U2(i)&&e>i?i:U2(t)&&e<t?t:e}function mke(e,t,i,r){return e+((lo(t.minSize,i,r)||t.minDataValue)??0)}function gke(e,t,i){const r=e.stops;let n=(r==null?void 0:r.length)&&r[0].size;return n==null&&(n=e.minSize),lo(n,t,i)}function vke(e,t,i,r){const n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),o=lo(t.minSize,i,r),c=lo(t.maxSize,i,r),y=r!=null?r.shape:void 0;if(e<=t.minDataValue)return o;if(e>=t.maxDataValue)return c;if(o==null||c==null)return null;if(t.scaleBy==="area"&&y){const v=y==="circle",_=v?ix*(o/2)**2:o*o,I=_+n*((v?ix*(c/2)**2:c*c)-_);return v?2*Math.sqrt(I/ix):Math.sqrt(I)}return o+n*(c-o)}function wke(e,t,i,r){const n=r!=null?r.shape:void 0,o=e/t.minDataValue,c=lo(t.minSize,i,r),y=lo(t.maxSize,i,r);let v=null;return v=n==="circle"?2*Math.sqrt(o*(c/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(o*c**2):o*c,loe(v,c,y)}function bke(e,t,i,r,n){var v,_,I;const[o,c,y]=cP(e,n);if(o===c)return lo((v=t.stops)==null?void 0:v[o].size,i,r);{const $=lo((_=t.stops)==null?void 0:_[o].size,i,r);return $+(lo((I=t.stops)==null?void 0:I[c].size,i,r)-$)*y}}function _ke(e,t,i,r){const n=((r==null?void 0:r.resolution)??1)*uP[t.valueUnit],o=lo(t.minSize,i,r),c=lo(t.maxSize,i,r),{valueRepresentation:y}=t;let v=null;return v=y==="area"?2*Math.sqrt(e/ix)/n:y==="radius"||y==="distance"?2*e/n:e/n,loe(v,o,c)}function uoe(e,t,i,r,n){switch(t.transformationType){case Yr.Additive:return mke(e,t,i,r);case Yr.Constant:return gke(t,i,r);case Yr.ClampedLinear:return vke(e,t,i,r);case Yr.Proportional:return wke(e,t,i,r);case Yr.Stops:return bke(e,t,i,r,n);case Yr.RealWorldSize:return _ke(e,t,i,r);case Yr.Identity:return e;case Yr.Unknown:return null}}function Ske(e,t,i){const{isScaleDriven:r}=e.cache;if(!(r&&i==="3d"||t))return null;const n={scale:t,view:i};let o=lo(e.minSize,pG,n),c=lo(e.maxSize,pG,n);if(o!=null||c!=null){if(o>c){const y=c;c=o,o=y}return{minSize:o,maxSize:c}}}function xke(e,t,i){if(!e.visualVariables)return;const r=[],n=[],o=[],c=[],y=[];for(const v of e.visualVariables)switch(v.type){case"color":n.push(v);break;case"opacity":o.push(v);break;case"rotation":y.push(v);break;case"size":c.push(v)}return n.forEach(v=>{const _=soe(v,t,i);r.push({variable:v,value:_})}),o.forEach(v=>{const _=ooe(v,t,i);r.push({variable:v,value:_})}),y.forEach(v=>{const _=aoe(v,t,i);r.push({variable:v,value:_})}),c.forEach(v=>{const _=yT(v,t,i);r.push({variable:v,value:_})}),r.filter(v=>v.value!=null)}function cP(e,t){if(!t)return;let i=0,r=t.length-1;return t.some((n,o)=>e<n?(r=o,!0):(i=o,!1)),[i,r,(e-t[i])/(t[r]-t[i])]}function Ike(e,t,i){const r=["proportional","proportional","proportional"];for(const n of e){const o=n.useSymbolValue?"symbol-value":yT(n,t,i);switch(n.axis){case"width":r[0]=o;break;case"depth":r[1]=o;break;case"height":r[2]=o;break;case"width-and-depth":r[0]=o,r[1]=o;break;case"all":case void 0:case null:r[0]=o,r[1]=o,r[2]=o;break;default:n.axis}}return r}const ty=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:Ike,getColor:soe,getOpacity:ooe,getRotationAngle:aoe,getSize:yT,getSizeForValue:uoe,getSizeFromNumberOrVariable:lo,getSizeRangeAtScale:Ske,getVisualVariableValues:xke,viewScaleRE:noe},Symbol.toStringTag,{value:"Module"}));var n8;const nS=new ft({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),s8=new ft({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function fG(e){if(e!=null)return typeof e=="string"||typeof e=="number"?dke(e):e.type==="size"?p1(e)?e:(delete(e={...e}).type,new si(e)):void 0}function yG(e,t,i){if(typeof e!="object")return e;const r=new si;return r.read(e,i),r}let si=n8=class extends Yg{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&noe.test(this.valueExpression)}}set index(e){p1(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),p1(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return ioe(this)}set maxDataValue(e){e&&this.stops&&(_e.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(_e.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return fG(e)}readMaxSize(e,t,i){return yG(e,t,i)}set minDataValue(e){e&&this.stops&&(_e.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(_e.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return fG(e)}readMinSize(e,t,i){return yG(e,t,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value):e&&(_e.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return pke(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,i,r){if(e==="$view.scale"){if(r!=null&&r.messages){const n=this.index,o=typeof n=="string"?n:`visualVariables[${n}]`;r.messages.push(new ne("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:o+".valueExpression",context:r}))}}else t[i]=e}readValueUnit(e){return e?s8.read(e):null}clone(){var e,t;return new n8({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:p1(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:p1(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(e=this.stops)==null?void 0:e.map(i=>i.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}flipSizes(){if(this.transformationType===Yr.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===Yr.Stops){const e=this.stops;if(!e)return this;const t=e.map(r=>r.size).reverse(),i=e.length;for(let r=0;r<i;r++)e[r].size=t[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var e;return(e=this.stops)==null?void 0:e.map(t=>t.value||0)}};m([w({readOnly:!0})],si.prototype,"cache",null),m([w({type:nS.apiValues,json:{type:nS.jsonValues,origins:{"web-map":{read:!1}},read:nS.read,write:nS.write}})],si.prototype,"axis",void 0),m([w()],si.prototype,"index",null),m([w({type:String,readOnly:!0})],si.prototype,"inputValueType",null),m([w({type:toe,json:{write:!0}})],si.prototype,"legendOptions",void 0),m([w({type:Number,value:null,json:{write:!0}})],si.prototype,"maxDataValue",null),m([w({type:Number,value:null,json:{write:!0}})],si.prototype,"maxSize",null),m([wt("maxSize")],si.prototype,"castMaxSize",null),m([ke("maxSize")],si.prototype,"readMaxSize",null),m([w({type:Number,value:null,json:{write:!0}})],si.prototype,"minDataValue",null),m([w({type:Number,value:null,json:{write:!0}})],si.prototype,"minSize",null),m([wt("minSize")],si.prototype,"castMinSize",null),m([ke("minSize")],si.prototype,"readMinSize",null),m([w({type:String,json:{write:!0}})],si.prototype,"normalizationField",void 0),m([w({readOnly:!0})],si.prototype,"arcadeRequired",null),m([w({type:String})],si.prototype,"scaleBy",void 0),m([w({type:[ex],value:null,json:{write:!0}})],si.prototype,"stops",null),m([w({type:["outline"],json:{write:!0}})],si.prototype,"target",void 0),m([w({type:String,readOnly:!0})],si.prototype,"transformationType",null),m([w({type:["size"],json:{type:["sizeInfo"]}})],si.prototype,"type",void 0),m([w({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],si.prototype,"useSymbolValue",void 0),m([w({type:String,json:{write:!0}})],si.prototype,"valueExpression",void 0),m([ke("valueExpression",["valueExpression","expression"])],si.prototype,"readValueExpression",null),m([Le("web-scene","valueExpression")],si.prototype,"writeValueExpressionWebScene",null),m([w({type:["radius","diameter","area","width","distance"],json:{write:!0}})],si.prototype,"valueRepresentation",void 0),m([w({type:s8.apiValues,json:{write:s8.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],si.prototype,"valueUnit",void 0),m([ke("valueUnit")],si.prototype,"readValueUnit",null),si=n8=m([H("esri.renderers.visualVariables.SizeVariable")],si);const Xg=si,Tke={color:Qse,size:Xg,opacity:lP,rotation:eoe},$ke=new ft({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),Eke=/^\[([^\]]+)\]$/i;let rx=class extends Ve{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(t){if(this._resetVariables(),t=t==null?void 0:t.filter(i=>!!i),t==null?void 0:t.length){for(const i of t)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&t.sort((i,r)=>{let n=null;return n=i.target===r.target?0:i.target?1:-1,n});for(let i=0;i<t.length;i++)t[i].index=i;this._set("visualVariables",t)}else this._set("visualVariables",t)}readVariables(t,i,r){const{rotationExpression:n,rotationType:o}=i,c=n==null?void 0:n.match(Eke),y=c==null?void 0:c[1];if(y&&(t||(t=[]),t.push({type:"rotationInfo",rotationType:o,field:y})),t)return t.map(v=>{const _=$ke.read(v.type),I=Tke[_];I||(_e.getLogger(this).warn(`Unknown variable type: ${_}`),r!=null&&r.messages&&r.messages.push(new zo("visual-variable:unsupported",`visualVariable of type '${_}' is not supported`,{definition:v,context:r})));const $=new I;return $.read(v,r),$})}writeVariables(t,i){const r=[];for(const n of t){const o=n.toJSON(i);o&&r.push(o)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};m([w()],rx.prototype,"visualVariables",null),rx=m([H("esri.renderers.visualVariables.VisualVariableFactory")],rx);const Mke=rx,Ake={base:Yg,key:"type",typeMap:{opacity:lP,color:Qse,rotation:eoe,size:Xg}},Qg=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new Mke}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,n){return this._vvFactory.readVariables(i,r,n)}writeVisualVariables(i,r,n,o){r[n]=this._vvFactory.writeVariables(i,o)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){const n=this.visualVariables;return n?n.filter(o=>o.type===i&&(typeof r=="string"?o.target===r:r!==!1||!o.target)):[]}async collectVVRequiredFields(i,r){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const o of n)o&&(o.field&&Ls(i,r,o.field),o.normalizationField&&Ls(i,r,o.normalizationField),o.valueExpression&&(Cke(o.valueExpression,i,r)||await gs(i,r,o.valueExpression)))}};return m([w({types:[Ake],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),m([ke("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),m([Le("visualVariables")],t.prototype,"writeVisualVariables",null),t=m([H("esri.renderers.mixins.VisualVariablesMixin")],t),t};function Cke(e,t,i){const r=uke(e);return r!=null&&(Ls(t,i,r),!0)}const hP=[252,146,31,255],kke=[153,153,153,255],Lke={type:"esriSMS",style:"esriSMSCircle",size:6,color:hP,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},Oke={type:"esriSLS",style:"esriSLSSolid",width:.75,color:hP},Rke={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},Pke={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},Nke={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},Fke={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},Dke={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},coe=fs.fromJSON(Lke),hoe=vs.fromJSON(Oke),doe=kl.fromJSON(Rke),jke=Q0.fromJSON(Pke);function Ytt(e){if(e==null)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return coe;case"polyline":return hoe;case"polygon":case"extent":return doe}return null}const Xtt=fs.fromJSON(Nke),Qtt=vs.fromJSON(Fke),eit=kl.fromJSON(Dke);zc.fromSimpleMarkerSymbol(coe);X0.fromSimpleLineSymbol(hoe);vp.fromSimpleFillSymbol(doe);new E3({symbolLayers:new Oe([new K0({material:{color:hP},edges:new Yte({size:po(1),color:new je(kke)})})])});const zke=new X0({symbolLayers:new Oe([new Gg({material:{color:new je([0,0,0])},size:po(1)})])}),Vke=new vp({symbolLayers:new Oe([new K0({outline:{color:new je([0,0,0]),size:po(1)}})])}),mG="#useCIMFallbackSymbology()",by={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function Uke(e,t=by){var v,_,I,$;if(!e)return{symbol:null};const{retainId:i=by.retainId,ignoreDrivers:r=by.ignoreDrivers,hasLabelingContext:n=by.hasLabelingContext,retainCIM:o=by.retainCIM,cimFallbackEnabled:c=by.cimFallbackEnabled}=t;let y=null;if(Nu(e)||e instanceof ey)y=e.clone();else if(e.type==="cim"){const A=(_=(v=e.data)==null?void 0:v.symbol)==null?void 0:_.type;switch(A){case"CIMPointSymbol":y=o?e.clone():zc.fromCIMSymbol(e);break;case"CIMLineSymbol":c&&(y=zke.clone(),(I=t==null?void 0:t.logWarning)==null||I.call(t,mG,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":c&&(y=Vke.clone(),($=t==null?void 0:t.logWarning)==null||$.call(t,mG,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!y)return{error:new ne("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${A||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof vs)y=X0.fromSimpleLineSymbol(e);else if(e instanceof fs)y=zc.fromSimpleMarkerSymbol(e);else if(e instanceof Hg)y=zc.fromPictureMarkerSymbol(e);else if(e instanceof kl)y=t.geometryType&&t.geometryType==="mesh"?E3.fromSimpleFillSymbol(e):vp.fromSimpleFillSymbol(e);else{if(!(e instanceof Q0))return{error:new ne("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};y=n?qI.fromTextSymbol(e):zc.fromTextSymbol(e)}return i&&y&&y.type!=="cim"&&(y.id=e.id),r&&Nu(y)&&y.symbolLayers.forEach(A=>A.ignoreDrivers=!0),{symbol:y}}function x4(e,t,i,r){const n=poe(e,{},{context:r,isLabelSymbol:!1});n!=null&&(t[i]=n)}function gG(e,t,i,r){const n=poe(e,{},{context:r,isLabelSymbol:!0});n!=null&&(t[i]=n)}function vG(e){return e instanceof Y0||e instanceof ey}function Bke(e){return e instanceof Y0&&(e.type==="polygon-3d"||e.type==="line-3d")}function poe(e,t,i){var y;if(e==null)return null;const{context:r,isLabelSymbol:n}=i,o=r==null?void 0:r.origin,c=r==null?void 0:r.messages;if(o==="web-scene"&&!vG(e)){const v=Uke(e,{retainCIM:!0,hasLabelingContext:n});return v.symbol!=null?v.symbol.write(t,r):(c==null||c.push(new ne("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:v.error})),null)}return xA(r==null?void 0:r.layer)&&Bke(e)?(c==null||c.push(new ne("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported on layers of type '${(y=r==null?void 0:r.layer)==null?void 0:y.declaredClass}'.`,{symbol:e,context:r})),null):(o==="web-map"||o==="portal-item"&&!xA(r==null?void 0:r.layer))&&vG(e)?(c==null||c.push(new ne("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:r})),null):e.write(t,r)}function foe(e,t){return P9e(e,null,t)}const mT={types:Eie,json:{write:{writer:x4},origins:{"web-scene":{types:Pz,write:{writer:x4},read:{reader:Cg({types:Pz})}}}}},dP=YL({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},mT),pP={types:{base:zn,key:"type",typeMap:{"simple-fill":Ad.typeMap["simple-fill"],"picture-fill":Ad.typeMap["picture-fill"],"polygon-3d":Ad.typeMap["polygon-3d"],cim:Ad.typeMap.cim}},json:{write:{writer:x4},origins:{"web-scene":{type:vp,write:{writer:x4}}}}},nx={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}};var o8;let Hh=o8=class extends be{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var e;return new o8({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:((e=this.symbol)==null?void 0:e.clone())??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};m([w({type:String,json:{write:!0}})],Hh.prototype,"description",void 0),m([w({type:String,json:{write:!0}})],Hh.prototype,"label",void 0),m([w({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Hh.prototype,"minValue",void 0),m([w({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Hh.prototype,"maxValue",void 0),m([w(dP)],Hh.prototype,"symbol",void 0),Hh=o8=m([H("esri.renderers.support.ClassBreakInfo")],Hh);const I4=Hh,Gke=nn()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let Uw=class extends St(be){constructor(t){super(t),this.title=null,this.order=null}};m([w({type:String,json:{write:!0}})],Uw.prototype,"title",void 0),m([He(Gke)],Uw.prototype,"order",void 0),Uw=m([H("esri.renderers.support.RendererLegendOptions")],Uw);const fP=Uw;var a8;const yoe="log",sx="percent-of-total",ox="field",sS=new ft({esriNormalizeByLog:yoe,esriNormalizeByPercentOfTotal:sx,esriNormalizeByField:ox}),qke=qi(I4);let Fr=a8=class extends Qg(lh){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,i){if(!Array.isArray(e))return;let r=t.minValue;return e.map(n=>{const o=new I4;return o.read(n,i),o.minValue==null&&(o.minValue=r),o.maxValue==null&&(o.maxValue=o.minValue),r=o.maxValue,o})}writeClassBreakInfos(e,t,i,r){const n=e.map(o=>o.write({},r));this._areClassBreaksConsecutive()&&n.forEach(o=>delete o.classMinValue),t[i]=n}castField(e){return e==null?e:typeof e=="function"?(_e.getLogger(this).error(".field: field must be a string value"),null):o3(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=this.normalizationTotal!=null;return t||i?(e=t&&ox||i&&sx||null,t&&i&&_e.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==ox&&e!==sx||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,i){let r=null;r=typeof e=="number"?new I4({minValue:e,maxValue:t,symbol:Mie(i)}):qke(le(e)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]===e&&n[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(t==null?void 0:t.arcade)==null&&_e.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let i=t;this.valueExpression&&(t==null?void 0:t.arcade)==null&&(i={...i,arcade:await eh()});const r=this.getBreakIndex(e,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void _e.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(t==null?void 0:t.arcade)==null){const n=await eh(),{arcadeUtils:o}=n;o.hasGeometryOperations(this.valueExpression)&&await o.enableGeometryOperations(),i={...i,arcade:n}}const r=this.getBreakIndex(e,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((r,n)=>r+n.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var e,t;return new a8({field:this.field,backgroundFillSymbol:(e=this.backgroundFillSymbol)==null?void 0:e.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(t=this.defaultSymbol)==null?void 0:t.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:le(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:le(this.visualVariables),legendOptions:le(this.legendOptions),authoringInfo:le(this.authoringInfo)})}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),gs(e,t,this.valueExpression)];Ls(e,t,this.field),Ls(e,t,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:n,arcade:o,timeZone:c}=t??{},{valueExpression:y}=this;let v=this._compiledValueExpression.valueExpression===y?this._compiledValueExpression.compiledFunction:null;const _=o.arcadeUtils;if(!v){const $=_.createSyntaxTree(y);v=_.createFunction($),this._compiledValueExpression.compiledFunction=v}this._compiledValueExpression.valueExpression=y;const I=_.executeFunction(v,_.createExecContext(e,_.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),c));return this._getBreakIndexfromInfos(I)}_getBreakIndexForField(e){const t=this.field,i=e.attributes,r=this.normalizationType;let n=parseFloat(i[t]);if(r){const o=this.normalizationTotal,c=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===yoe)n=Math.log(n)*Math.LOG10E;else if(r!==sx||o==null||isNaN(o)){if(r===ox&&!isNaN(c)){if(isNaN(n)||isNaN(c))return-1;n/=c}}else n=n/o*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return i}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}};m([w(pP)],Fr.prototype,"backgroundFillSymbol",void 0),m([w({type:[I4]})],Fr.prototype,"classBreakInfos",void 0),m([ke("classBreakInfos")],Fr.prototype,"readClassBreakInfos",null),m([Le("classBreakInfos")],Fr.prototype,"writeClassBreakInfos",null),m([w({type:String,json:{write:!0}})],Fr.prototype,"defaultLabel",void 0),m([w(mT)],Fr.prototype,"defaultSymbol",void 0),m([w({type:String,json:{write:!0}})],Fr.prototype,"field",void 0),m([wt("field")],Fr.prototype,"castField",null),m([w({type:Boolean})],Fr.prototype,"isMaxInclusive",void 0),m([w({type:fP,json:{write:!0}})],Fr.prototype,"legendOptions",void 0),m([w({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Fr.prototype,"minValue",null),m([w({type:String,json:{write:!0}})],Fr.prototype,"normalizationField",void 0),m([w({type:Number,json:{write:!0}})],Fr.prototype,"normalizationTotal",void 0),m([w({type:sS.apiValues,value:null,json:{type:sS.jsonValues,read:sS.read,write:sS.write}})],Fr.prototype,"normalizationType",null),m([He({classBreaks:"class-breaks"})],Fr.prototype,"type",void 0),m([w({type:String,json:{write:!0}})],Fr.prototype,"valueExpression",void 0),m([w({type:String,json:{write:!0}})],Fr.prototype,"valueExpressionTitle",void 0),Fr=a8=m([H("esri.renderers.ClassBreaksRenderer")],Fr);const moe=Fr;function Hke(e){return"timeZone"in e}function Wke(e){return"timeZone"in e}function Jke(e){return"dateFieldsTimeZone"in e}const Zke=new Map;let goe=class ax{static fromJSON(t){return new ax(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new ax(t.fields??[],bG(t))}static fromLayerJSON(t){return new ax(t.fields??[],bG(t))}constructor(t=[],i){var n;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=t||[],this._timeZoneByFieldName=i?new Map(i):null;const r=[];for(const o of this.fields){const c=o==null?void 0:o.name,y=wG(c);if(c&&y){const v=jf(c);this._fieldsMap.set(c,o),this._fieldsMap.set(v,o),this._normalizedFieldsMap.set(y,o),r.push(`${v}:${o.type}:${(n=this._timeZoneByFieldName)==null?void 0:n.get(c)}`),jte(o)?(this.dateFields.push(o),this._dateFieldsSet.add(o)):cR(o)&&(this._numericFieldsSet.add(o),this.numericFields.push(o)),Ez(o)||Mz(o)||(o.editable=o.editable==null||!!o.editable,o.nullable=o.nullable==null||!!o.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)Ez(t)||Mz(t)||t.nullable||yxe(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===(t==null?void 0:t.uid)}has(t){return this.get(t)!=null}get(t){if(!t)return;let i=this._fieldsMap.get(t);return i||(i=this._fieldsMap.get(jf(t))??this._normalizedFieldsMap.get(wG(t)),i&&this._fieldsMap.set(t,i),i)}getTimeZone(t){const i=this.get(t&&typeof t!="string"?t.name:t);return i?this._timeZoneByFieldName?this._timeZoneByFieldName.get(i.name):i.type==="date"||i.type==="esriFieldTypeDate"?(_e.getLogger("esri.layers.support.FieldsIndex").error(new ne("getTimeZone:no-timezone-information",`no time zone information for field '${i.name}'`)),Ru):voe.has(i.type)?L0:null:null}getLuxonTimeZone(t){const i=this.getTimeZone(t);return i?i===L0?yl.instance:i===Ru?Vr.utcInstance:s3(Zke,i,()=>ho.create(i)):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return hR(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){var i;return((i=this.get(t))==null?void 0:i.name)??void 0}toJSON(){return{fields:this.fields.map(t=>I9(t)?t.toJSON():t),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function jf(e){return e.trim().toLowerCase()}function wG(e){var t;return((t=Q5e(e))==null?void 0:t.toLowerCase())??""}const voe=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function bG(e){const t=new Map;if(!e.fields)return t;const i=e.datesInUnknownTimezone===!0,{timeInfo:r,editFieldsInfo:n}=e,o=(r?"startField"in r?r.startField:r.startTimeField:"")??"",c=(r?"endField"in r?r.endField:r.endTimeField:"")??"",y=Jke(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?a5(e.dateFieldsTimeReference):null,v=n?Hke(n)?n.timeZone??y:n.dateFieldsTimeReference?a5(n.dateFieldsTimeReference):y??Ru:null,_=r?Wke(r)?r.timeZone??y:r.timeReference?a5(r.timeReference):y:null,I=new Map([[jf((n==null?void 0:n.creationDateField)??""),v],[jf((n==null?void 0:n.editDateField)??""),v],[jf(o),_],[jf(c),_]]);for(const{name:$,type:A}of e.fields)if(voe.has(A))t.set($,L0);else if(A!=="date"&&A!=="esriFieldTypeDate")t.set($,null);else if(i)t.set($,L0);else{const k=I.get(jf($??""))??y;t.set($,k)}return t}function Kke(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Yke(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Xke(e,t,i,r,n){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e}function Qke(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function woe(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function boe(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function _oe(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function eLe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function tLe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function iLe(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e}function rLe(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e}function nLe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function sLe(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function oLe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e}function Soe(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(i*i+r*r+n*n+o*o)}function xoe(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2],o=t[3]-e[3];return i*i+r*r+n*n+o*o}function Ioe(e){const t=e[0],i=e[1],r=e[2],n=e[3];return Math.sqrt(t*t+i*i+r*r+n*n)}function Toe(e){const t=e[0],i=e[1],r=e[2],n=e[3];return t*t+i*i+r*r+n*n}function aLe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function lLe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function uLe(e,t){const i=t[0],r=t[1],n=t[2],o=t[3];let c=i*i+r*r+n*n+o*o;return c>0&&(c=1/Math.sqrt(c),e[0]=i*c,e[1]=r*c,e[2]=n*c,e[3]=o*c),e}function cLe(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function $oe(e,t,i,r){const n=t[0],o=t[1],c=t[2],y=t[3];return e[0]=n+r*(i[0]-n),e[1]=o+r*(i[1]-o),e[2]=c+r*(i[2]-c),e[3]=y+r*(i[3]-y),e}function hLe(e,t=1){const i=NI;let r,n,o,c,y,v;do r=2*i()-1,n=2*i()-1,y=r*r+n*n;while(y>=1);do o=2*i()-1,c=2*i()-1,v=o*o+c*c;while(v>=1);const _=Math.sqrt((1-y)/v);return e[0]=t*r,e[1]=t*n,e[2]=t*o*_,e[3]=t*c*_,e}function dLe(e,t,i){const r=t[0],n=t[1],o=t[2],c=t[3];return e[0]=i[0]*r+i[4]*n+i[8]*o+i[12]*c,e[1]=i[1]*r+i[5]*n+i[9]*o+i[13]*c,e[2]=i[2]*r+i[6]*n+i[10]*o+i[14]*c,e[3]=i[3]*r+i[7]*n+i[11]*o+i[15]*c,e}function pLe(e,t,i){const r=t[0],n=t[1],o=t[2],c=i[0],y=i[1],v=i[2],_=i[3],I=_*r+y*o-v*n,$=_*n+v*r-c*o,A=_*o+c*n-y*r,k=-c*r-y*n-v*o;return e[0]=I*_+k*-c+$*-v-A*-y,e[1]=$*_+k*-y+A*-c-I*-v,e[2]=A*_+k*-v+I*-y-$*-c,e[3]=t[3],e}function fLe(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function yLe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function mLe(e,t){const i=e[0],r=e[1],n=e[2],o=e[3],c=t[0],y=t[1],v=t[2],_=t[3],I=ks();return Math.abs(i-c)<=I*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(r-y)<=I*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(n-v)<=I*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(o-_)<=I*Math.max(1,Math.abs(o),Math.abs(_))}const gLe=woe,vLe=boe,wLe=_oe,bLe=Soe,_Le=xoe,SLe=Ioe,xLe=Toe;Object.freeze(Object.defineProperty({__proto__:null,add:Qke,ceil:eLe,copy:Kke,copyVec3:Yke,dist:bLe,distance:Soe,div:wLe,divide:_oe,dot:cLe,equals:mLe,exactEquals:yLe,floor:tLe,inverse:lLe,len:SLe,length:Ioe,lerp:$oe,max:rLe,min:iLe,mul:vLe,multiply:boe,negate:aLe,normalize:uLe,random:hLe,round:nLe,scale:sLe,scaleAndAdd:oLe,set:Xke,sqrDist:_Le,sqrLen:xLe,squaredDistance:xoe,squaredLength:Toe,str:fLe,sub:gLe,subtract:woe,transformMat4:dLe,transformQuat:pLe},Symbol.toStringTag,{value:"Module"}));function gT(){return[0,0,0,0]}function ILe(e){return[e[0],e[1],e[2],e[3]]}function ev(e,t,i,r){return[e,t,i,r]}function TLe(e,t,i,r){return[e,t,i,r]}function $Le(e,t=gT()){const i=Math.min(4,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function ELe(e,t){return new Float64Array(e,t,4)}function Eoe(){return gT()}function Moe(){return ev(1,1,1,1)}function Aoe(){return ev(1,0,0,0)}function Coe(){return ev(0,1,0,0)}function koe(){return ev(0,0,1,0)}function Loe(){return ev(0,0,0,1)}const MLe=Eoe(),ALe=Moe(),CLe=Aoe(),kLe=Coe(),LLe=koe(),OLe=Loe();Object.freeze(Object.defineProperty({__proto__:null,ONES:ALe,UNIT_W:OLe,UNIT_X:CLe,UNIT_Y:kLe,UNIT_Z:LLe,ZEROS:MLe,clone:ILe,create:gT,createView:ELe,freeze:TLe,fromArray:$Le,fromValues:ev,ones:Moe,unitW:Loe,unitX:Aoe,unitY:Coe,unitZ:koe,zeros:Eoe},Symbol.toStringTag,{value:"Module"}));function Ooe(e){return"r"in e&&"g"in e&&"b"in e}function Roe(e){return"h"in e&&"s"in e&&"v"in e}function Poe(e){return"l"in e&&"a"in e&&"b"in e}function Noe(e){return"l"in e&&"c"in e&&"h"in e}function RLe(e){return"x"in e&&"y"in e&&"z"in e}const PLe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],NLe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function Foe(e,t){const i=[];let r,n;if(e[0].length!==t.length)throw new Error("dimensions do not match");const o=e.length,c=e[0].length;let y=0;for(r=0;r<o;r++){for(y=0,n=0;n<c;n++)y+=e[r][n]*t[n];i.push(y)}return i}function Doe(e){const t=[e.r/255,e.g/255,e.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=Foe(PLe,t);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function yP(e){const t=Foe(NLe,[e.x/100,e.y/100,e.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function joe(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function zoe(e){const t=e.l,i=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function FLe(e){const t=e.l,i=e.a,r=e.b,n=Math.sqrt(i*i+r*r);let o=Math.atan2(r,i);return o=o>0?o:o+2*Math.PI,{l:t,c:n,h:o}}function DLe(e){const t=e.l,i=e.c,r=e.h;return{l:t,a:i*Math.cos(r),b:i*Math.sin(r)}}function jLe(e){return joe(Doe(e))}function zLe(e){return yP(zoe(e))}function VLe(e){return FLe(joe(Doe(e)))}function ULe(e){return yP(zoe(DLe(e)))}function BLe(e){const t=e.r,i=e.g,r=e.b,n=Math.max(t,i,r),o=n-Math.min(t,i,r);let c=n,y=o===0?0:n===t?(i-r)/o%6:n===i?(r-t)/o+2:(t-i)/o+4,v=o===0?0:o/c;return y<0&&(y+=6),y*=60,v*=100,c*=100/255,{h:y,s:v,v:c}}function GLe(e){const t=(e.h+360)%360/60,i=e.s/100,r=e.v/100*255,n=r*i,o=n*(1-Math.abs(t%2-1));let c;switch(Math.floor(t)){case 0:c={r:n,g:o,b:0};break;case 1:c={r:o,g:n,b:0};break;case 2:c={r:0,g:n,b:o};break;case 3:c={r:0,g:o,b:n};break;case 4:c={r:o,g:0,b:n};break;case 5:case 6:c={r:n,g:0,b:o};break;default:c={r:0,g:0,b:0}}return c.r=Math.round(c.r+r-n),c.g=Math.round(c.g+r-n),c.b=Math.round(c.b+r-n),c}function F3(e){return Ooe(e)?e:Noe(e)?ULe(e):Poe(e)?zLe(e):RLe(e)?yP(e):Roe(e)?GLe(e):e}function mP(e){return Roe(e)?e:BLe(F3(e))}function iit(e){return Poe(e)?e:jLe(F3(e))}function rit(e){return Noe(e)?e:VLe(F3(e))}function qLe(e){let{r:t,g:i,b:r,a:n}=e;return n<1&&(t=Math.round(n*t+255*(1-n)),i=Math.round(n*i+255*(1-n)),r=Math.round(n*r+255*(1-n))),new je({r:t,g:i,b:r})}function HLe(e,t){const{r:i,g:r,b:n}=t!=null&&t.ignoreAlpha?e:qLe(e);return .2126*i+.7152*r+.0722*n}var l8;function nit(e,t=l8.High){return HLe(e,{ignoreAlpha:!0})>t?new je([0,0,0,e.a]):new je([255,255,255,e.a])}function sit(e,t,i={}){if(e.length===0||t<=0)return[];if((e=e.map(r=>typeof r=="string"?new je(r):r)).length===1||t===1){const r=[],n=e[0];for(let o=0;o<t;o++)r.push(n.clone());return r}if(i.shuffle&&(e=ZZ(le(e),i.seed)),e.length>=t){const r=[],n=(e.length-1)/(t-1);for(let o=0;o<t;o++){const c=Math.round(o*n);r.push(e[c].clone())}return r}return WLe(e,t,i)}function WLe(e,t,i={}){const r=[],n=e.length-1,o=Math.ceil((t-e.length)/n);e:for(let c=0;c<n;c++){const y=e[c],v=e[c+1];for(let _=1;_<=o;_++){const I=_/(o+1);if(r.push(JLe(y,v,I,i)),r.length+e.length===t)break e}}return[...e.map(c=>c.clone()),...ZZ(r,i.seed??1)]}(function(e){e[e.Low=160]="Low",e[e.High=225]="High"})(l8||(l8={}));const ME=(e,t)=>{const i=Math.floor(10*t())-5;return Math.min(255,Math.max(0,e+i))};function JLe(e,t,i,r={}){const n=e.r,o=e.g,c=e.b,y=t.r,v=t.g,_=t.b,I=Math.round(n+(y-n)*i),$=Math.round(o+(v-o)*i),A=Math.round(c+(_-c)*i);if(!r.offset)return new je([I,$,A]);const k=JZ(r.seed);return new je([ME(I,k),ME($,k),ME(A,k)])}function oit(e){return e?{originPosition:e.originPosition==="upper-left"?"upperLeft":e.originPosition==="lower-left"?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:e.extent!=null?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null}function ZLe(e){return e.originPosition==="lowerLeft"&&e.scale.length===4&&e.translate.length===4}function D3(e){if(ZLe(e))return e;const{originPosition:t,scale:i,translate:r}=e,n=i[0]??1,o=i[1]??1;return{originPosition:"lowerLeft",scale:[n,t==="lowerLeft"?o:-o,i[2]??1,i[3]??1],translate:[r[0]??0,r[1]??0,r[2]??0,r[3]??0]}}function KLe({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function YLe({scale:e,translate:t},i){return Math.round((i-t[1])/e[1])}function XLe({scale:e,translate:t},i){return Math.round(((i??0)-t[2])/e[2])}function QLe({scale:e,translate:t},i){return i?Math.round((i-t[3])/e[3]):0}function j3({scale:e,translate:t},i){return i*e[0]+t[0]}function z3({scale:e,translate:t},i){return i*e[1]+t[1]}function B2({scale:e,translate:t},i){return(i??0)*e[2]+t[2]}function G2({scale:e,translate:t},i){return i?i*e[3]+t[3]:0}function gP(e,t){return e&&t?rOe:e&&!t?tOe:!e&&t?iOe:eOe}const eOe=(e,t)=>{const i=new Array(t.length);if(!t.length)return i;const r=t[0];let n=j3(e,r[0]),o=z3(e,r[1]);i[0]=[n,o];const{scale:c,originPosition:y}=e,v=c[0],_=y==="lowerLeft"?c[1]:-c[1];for(let I=1;I<t.length;I++){const[$,A]=t[I];n+=v*$,o+=_*A,i[I]=[n,o]}return i},tOe=(e,t)=>{const i=new Array(t.length);if(!t.length)return i;const r=t[0];let n=j3(e,r[0]),o=z3(e,r[1]);i[0]=[n,o,B2(e,r[2])];const{scale:c,originPosition:y}=e,v=c[0],_=y==="lowerLeft"?c[1]:-c[1];for(let I=1;I<t.length;I++){const[$,A,k]=t[I];n+=v*$,o+=_*A,i[I]=[n,o,B2(e,k)]}return i},iOe=(e,t)=>{const i=new Array(t.length);if(!t.length)return i;const r=t[0];let n=j3(e,r[0]),o=z3(e,r[1]);i[0]=[n,o,G2(e,r[2])];const{scale:c,originPosition:y}=e,v=c[0],_=y==="lowerLeft"?c[1]:-c[1];for(let I=1;I<t.length;I++){const[$,A,k]=t[I];n+=v*$,o+=_*A,i[I]=[n,o,G2(e,k)]}return i},rOe=(e,t)=>{const i=new Array(t.length);if(!t.length)return i;const r=t[0];let n=j3(e,r[0]),o=z3(e,r[1]);i[0]=[n,o,B2(e,r[2]),G2(e,r[3])];const{scale:c,originPosition:y}=e,v=c[0],_=y==="lowerLeft"?c[1]:-c[1];for(let I=1;I<t.length;I++){const[$,A,k,R]=t[I];n+=v*$,o+=_*A,i[I]=[n,o,B2(e,k),G2(e,R)]}return i};function Voe(e,t,i){const r=new Array(i.length);for(let n=0;n<i.length;n++)r[n]=t(e,i[n]);return r}function ait(e,t,i){const r=D3(e);return t.x=KLe(r,i.x),t.y=YLe(r,i.y),i.z!=null&&(t.z=XLe(r,i.z)),i.m!=null&&(t.m=QLe(r,i.m)),t}function nOe(e,t,i,r=(i==null?void 0:i.hasZ)??!1,n=(i==null?void 0:i.hasM)??!1){if(i!=null){const o=D3(e);t.points=gP(r,n)(o,i.points),t.hasZ=r,t.hasM=n}return t}function sOe(e,t,i,r=(i==null?void 0:i.z)!=null,n=(i==null?void 0:i.m)!=null){if(i==null)return t;const o=D3(e);return t.x=j3(o,i.x),t.y=z3(o,i.y),r&&(t.z=B2(o,i.z)),n&&(t.m=G2(o,i.m)),t}function oOe(e,t,i,r=(i==null?void 0:i.hasZ)??!1,n=(i==null?void 0:i.hasM)??!1){if(i!=null){const o=D3(e);t.rings=Voe(o,gP(r,n),i.rings),t.hasZ=r,t.hasM=n}return t}function aOe(e,t,i,r=(i==null?void 0:i.hasZ)??!1,n=(i==null?void 0:i.hasM)??!1){if(i!=null){const o=D3(e);t.paths=Voe(o,gP(r,n),i.paths),t.hasZ=r,t.hasM=n}return t}function lOe(e,t,i,r,n){if(e==null)return null;const o=e.referencesGeometry()&&n?uOe(t,r,n):t,c=e.repurposeFeature(o);try{return e.evaluate({...i,$feature:c},e.services)}catch(y){return _e.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",y),null}}const AE=new Map;function uOe(e,t,i){const{transform:r,hasZ:n,hasM:o}=i;AE.has(t)||AE.set(t,cOe(t));const c=AE.get(t)(e.geometry,r,n,o);return{...e,geometry:c}}function cOe(e){const t={};switch(e){case"esriGeometryPoint":return(i,r,n,o)=>sOe(r,t,i,n,o);case"esriGeometryPolygon":return(i,r,n,o)=>oOe(r,t,i,n,o);case"esriGeometryPolyline":return(i,r,n,o)=>aOe(r,t,i,n,o);case"esriGeometryMultipoint":return(i,r,n,o)=>nOe(r,t,i,n,o);default:return _e.getLogger("esri.views.2d.support.arcadeOnDemand").error(new ne("mapview-arcade",`Unable to handle geometryType: ${e}`)),i=>i}}const hOe=e=>{if(!e)return[0,0,0,0];const{r:t,g:i,b:r,a:n}=e;return[t,i,r,255*n]};let Uoe=class Ji{static findApplicableOverrides(t,i,r){if(t&&i){if(t.primitiveName){let n=!1;for(const o of r)if(o.primitiveName===t.primitiveName){n=!0;break}if(!n)for(const o of i)o.primitiveName===t.primitiveName&&r.push(o)}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects)for(const n of t.effects)Ji.findApplicableOverrides(n,i,r);if(t.symbolLayers)for(const n of t.symbolLayers)Ji.findApplicableOverrides(n,i,r);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(t.effects)for(const n of t.effects)Ji.findApplicableOverrides(n,i,r);if(t.markerPlacement&&Ji.findApplicableOverrides(t.markerPlacement,i,r),t.type==="CIMVectorMarker"){if(t.markerGraphics)for(const n of t.markerGraphics)Ji.findApplicableOverrides(n,i,r),Ji.findApplicableOverrides(n.symbol,i,r)}else t.type==="CIMCharacterMarker"?Ji.findApplicableOverrides(t.symbol,i,r):t.type==="CIMHatchFill"?Ji.findApplicableOverrides(t.lineSymbol,i,r):t.type==="CIMPictureMarker"&&Ji.findApplicableOverrides(t.animatedSymbolProperties,i,r)}}}static findEffectOverrides(t,i){if(!t)return null;if(t.type==="CIMGeometricEffectDashes"&&y7e(t),!i||!t.primitiveName)return{type:"cim-effect-param",effect:t,overrides:[]};const r=zB(t),n=t.primitiveName,o=[];for(const c of i)c.primitiveName===n&&o.push(zB(c));return{type:"cim-effect-param",effect:r,overrides:m7e(o)}}static async resolveSymbolOverrides(t,i,r,n,o,c,y){if(!(t!=null&&t.symbol))return null;let{symbol:v,primitiveOverrides:_}=t;const I=!!_;if(!I&&!n)return v;v=le(v),_=le(_);let $=!0;if(i||(i={attributes:{}},$=!1),I){if($||(_=_.filter(A=>{var k;return!((k=A.valueExpressionInfo)!=null&&k.expression.includes("$feature"))})),y||(_=_.filter(A=>{var k;return!((k=A.valueExpressionInfo)!=null&&k.expression.includes("$view"))})),_.length>0){const A={spatialReference:r,fields:c7e(i.attributes),geometryType:o};await Ji.createRenderExpressions(_,A),Ji.evaluateOverrides(_,i,o??"esriGeometryPoint",c,y)}Ji.applyOverrides(v,_)}return n&&Ji.applyDictionaryTextOverrides(v,i,n,null),v}static async createRenderExpressions(t,i){const r=[];for(const n of t){const o=n.valueExpressionInfo;if(!o||Ji._expressionToRenderExpression.has(o.expression))continue;const c=Z5e(o.expression,i.spatialReference,i.fields);r.push(c),c.then(y=>Ji._expressionToRenderExpression.set(o.expression,y))}r.length>0&&await Promise.all(r)}static evaluateOverrides(t,i,r,n,o){const c={$view:{scale:o==null?void 0:o.scale}};for(const y of t){y.value&&typeof y.value=="object"&&Ooe(y.value)&&(y.propertyName==="Color"||y.propertyName==="StrokeColor")&&(y.value=hOe(y.value));const v=y.valueExpressionInfo;if(!v)continue;const _=Ji._expressionToRenderExpression.get(v.expression);_&&(y.value=lOe(_,i,c,r,n))}}static applyDictionaryTextOverrides(t,i,r,n,o="Normal"){if(t!=null&&t.type)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const c=t.symbolLayers;if(!c)return;for(const y of c)y&&y.type==="CIMVectorMarker"&&Ji.applyDictionaryTextOverrides(y,i,r,n,t.type==="CIMTextSymbol"?t.textCase:o)}break;case"CIMVectorMarker":{const c=t.markerGraphics;if(!c)return;for(const y of c)y&&Ji.applyDictionaryTextOverrides(y,i,r,n)}break;case"CIMMarkerGraphic":{const c=t.textString;if(c&&c.includes("[")){const y=a7e(c,r);t.textString=l7e(i,y,n,o)}}}}static applyOverrides(t,i,r,n){if(t.primitiveName){for(const o of i)if(o.primitiveName===t.primitiveName){const c=hT(o.propertyName);if(n&&n.push({cim:t,nocapPropertyName:c,value:t[c]}),r){let y=!1;for(const v of r)v.primitiveName===t.primitiveName&&(y=!0);y||r.push(o)}o.value!=null&&(t[c]=o.value)}}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects)for(const o of t.effects)Ji.applyOverrides(o,i,r,n);if(t.symbolLayers)for(const o of t.symbolLayers)Ji.applyOverrides(o,i,r,n);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(t.effects)for(const o of t.effects)Ji.applyOverrides(o,i,r,n);if(t.type==="CIMVectorMarker"&&t.markerGraphics)for(const o of t.markerGraphics)Ji.applyOverrides(o,i,r,n),Ji.applyOverrides(o.symbol,i,r,n)}}static restoreOverrides(t){for(const i of t)i.cim[i.nocapPropertyName]=i.value}static buildOverrideKey(t){let i="";for(const r of t)r.value!==void 0&&(i+=`${r.primitiveName}${r.propertyName}${JSON.stringify(r.value)}`);return i}static toValue(t,i){if(t==="DashTemplate")return i.split(" ").map(r=>Number(r));if(t==="Color"){const r=new je(i).toRgba();return r[3]*=255,r}return i}};Uoe._expressionToRenderExpression=new Map;const _G="esri.renderers.support.DictionaryLoader",dOe={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let Boe=class{constructor(t,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new Lse(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=t,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,i){var $;let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(A){if(br(A))return this._dictionaryPromise=null,null}const n=($=this._dictionaryVersion)==null?void 0:$.greaterEqual(4,0),o={};if(this.fieldMap)for(const A of this._symbolFields){const k=Ase(this.fieldMap[A],this._fieldIndex);if(k){const R=t.attributes[k];o[A]=n?R:R!=null?""+t.attributes[k]:""}else o[A]=""}let c=null;try{c=r==null?void 0:r(o,i)}catch{return null}if(!c||typeof c!="string"||c==="invalid")return null;const y=c.split(";"),v=[],_=[];for(let A=0;A<y.length;A++){const k=y[A];if(k){if(k.includes("po:")){const R=k.slice(3).split("|");if(R.length===3){const N=R[0],D=R[1];let j=R[2];const z="countrylabel";if(N===z&&D==="TextString"){if(this.fieldMap!=null){let U=this.fieldMap[z];U==null&&(U=z,this.fieldMap[U]=U),t.attributes[U]=j}continue}if(D==="DashTemplate")j=j.split(" ").map(U=>Number(U));else if(D==="Color"){const U=new je(j).toRgba();j=[U[0],U[1],U[2],255*U[3]]}else j=Number(j);_.push({primitiveName:N,propertyName:D,value:j,defaultValue:null})}}else if(k.includes("|")){for(const R of k.split("|"))if(this._itemNames.has(R)){v.push(R);break}}else if(this._itemNames.has(k))v.push(k);else if(A===0){v.length=0;let R="Invalid_P";t.geometry!=null&&(n0(t.geometry)?R="Invalid_A":EO(t.geometry)&&(R="Invalid_L")),v.push(R);break}}}const I=t.geometry==null||!t.geometry.hasZ&&t.geometry.type==="point";return this._cimPartsToCIMSymbol(t,v,_,I,i)}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void _e.getLogger(_G).error("no valid URL!");const i=Et(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:t!=null?t.signal:null}),[{data:r}]=await Promise.all([i,eh()]);if(!r)throw this._dictionaryPromise=null,new ne("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:n,dictionary_version:o,expression:c,itemsNames:y}=r,v=c;let _=!1;o&&(this._dictionaryVersion=Jne.parse(o),_=this._dictionaryVersion.greaterEqual(4,0)),this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(y),this._symbolFields=n.symbol;const I={};if(this.config){const k=this.config;for(const R in k)I[R]=k[R]}if(n.configuration)for(const k of n.configuration)I.hasOwnProperty(k.name)||(I[k.name]=k.value);const $=[];if(t!=null&&t.fields&&this.fieldMap)for(const k in this.fieldMap){const R=this.fieldMap[k],N=t.fields.filter(D=>D.name.toLowerCase()===(R==null?void 0:R.toLowerCase()));N.length>0&&$.push({...N[0],type:_?N[0].type:"esriFieldTypeString"})}$.length>0&&(this._fieldIndex=new goe($));const A=K5e(v,t!=null?t.spatialReference:null,$,I).then(k=>{const R={scale:0};return(N,D)=>{if(k==null)return null;const j=k.repurposeFeature({geometry:null,attributes:N});return R.scale=D!=null?D.scale??void 0:void 0,k.evaluate({$feature:j,$view:R},k.services)}}).catch(k=>(_e.getLogger(_G).error("Creating dictionary expression failed:",k),null));return this._dictionaryPromise=A,A}async _cimPartsToCIMSymbol(t,i,r,n,o){const c=new Array(i.length);for(let _=0;_<i.length;_++)c[_]=this._getSymbolPart(i[_],o);let y=await Promise.all(c);const v=this.fieldMap;if(v){y=le(y);for(const _ of y)Uoe.applyDictionaryTextOverrides(_,t,v,this._fieldIndex,L7(_))}return new ah({data:pOe(y,r,n)})}async _getSymbolPart(t,i){const r=this._symbolCache.get(t);if(r)return r;if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(c=>c.data);const n=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,t),o=Et(n,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(t,o),o.finally(()=>this._ongoingRequests.delete(t));try{const c=await o;return this._symbolCache.put(t,c.data),c.data}catch(c){throw c}}};function pOe(e,t,i){if(!e||e.length===0)return null;const r={...e[0]};if(e.length>1){r.effects=null,r.symbolLayers=[];for(const n of e){const o=n;if(o.effects!=null)for(const c of o.symbolLayers)c.effects==null?c.effects=o.effects:c.effects.unshift(...o.effects);r.symbolLayers.unshift(...o.symbolLayers)}}return i&&(r.callout=dOe),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:t}}var u8;let Ka=u8=class extends Qg(lh){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new Boe(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,r){r!=null&&r.origin||super.writeVisualVariables(e,t,i,r)}clone(){return new u8({config:le(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:le(this.fieldMap),url:le(this.url),visualVariables:le(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await gs(e,t,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];t.has(r)&&e.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};m([w({type:Boe})],Ka.prototype,"_loader",null),m([w({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Ka.prototype,"config",void 0),m([w({type:Object,json:{write:!0}})],Ka.prototype,"fieldMap",void 0),m([w({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Ka.prototype,"scaleExpression",void 0),m([Le("scaleExpression")],Ka.prototype,"writeData",null),m([w({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],Ka.prototype,"scaleExpressionTitle",void 0),m([w({type:String,json:{write:!0}})],Ka.prototype,"url",void 0),m([Le("visualVariables")],Ka.prototype,"writeVisualVariables",null),Ka=u8=m([H("esri.renderers.DictionaryRenderer")],Ka);const fOe=Ka;var c8;let pc=c8=class extends be{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(_e.getLogger(this).error(".field: field must be a string value"),null):o3(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var e;return new c8({color:(e=this.color)==null?void 0:e.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};m([w({type:je,json:{type:[Number],write:!0}})],pc.prototype,"color",void 0),m([w({type:String,json:{write:!0}})],pc.prototype,"field",void 0),m([wt("field")],pc.prototype,"castField",null),m([w({type:String,json:{write:!0}})],pc.prototype,"label",void 0),m([w({type:String,json:{write:!0}})],pc.prototype,"valueExpression",void 0),m([w({type:String,json:{write:!0}})],pc.prototype,"valueExpressionTitle",void 0),pc=c8=m([H("esri.renderers.support.AttributeColorInfo")],pc);const Goe=pc;var h8;let lx=h8=class extends be{constructor(){super(...arguments),this.unit=null}clone(){return new h8({unit:this.unit})}};m([w({type:String,json:{write:!0}})],lx.prototype,"unit",void 0),lx=h8=m([H("esri.renderers.support.DotDensityLegendOptions")],lx);const yOe=lx;var d8;let Bs=d8=class extends Qg(lh){constructor(e){super(e),this.attributes=null,this.backgroundColor=new je([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new vs,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new kl({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var e;return((e=this.attributes)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new d8({attributes:le(this.attributes),backgroundColor:le(this.backgroundColor),dotBlendingEnabled:le(this.dotBlendingEnabled),dotShape:le(this.dotShape),dotSize:le(this.dotSize),dotValue:le(this.dotValue),legendOptions:le(this.legendOptions),outline:le(this.outline),referenceScale:le(this.referenceScale),seed:le(this.seed),visualVariables:le(this.visualVariables),authoringInfo:le(this.authoringInfo)})}getControllerHash(){var t;return`${(t=this.attributes)==null?void 0:t.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes??[])i.valueExpression&&await gs(e,t,i.valueExpression),i.field&&e.add(i.field)}};m([w({type:[Goe],json:{write:!0}})],Bs.prototype,"attributes",void 0),m([w({type:je,json:{write:!0}})],Bs.prototype,"backgroundColor",void 0),m([w({type:Boolean,json:{write:!0}})],Bs.prototype,"dotBlendingEnabled",void 0),m([w({type:String,json:{write:!1}})],Bs.prototype,"dotShape",void 0),m([w({type:Number,json:{write:!0}})],Bs.prototype,"dotSize",void 0),m([w({type:yOe,json:{write:!0}})],Bs.prototype,"legendOptions",void 0),m([w({type:vs,json:{default:null,write:!0}})],Bs.prototype,"outline",void 0),m([w({type:Number,json:{write:!0}})],Bs.prototype,"dotValue",void 0),m([w({type:Number,json:{write:!0}})],Bs.prototype,"referenceScale",void 0),m([w({type:Number,json:{write:!0}})],Bs.prototype,"seed",void 0),m([He({dotDensity:"dot-density"})],Bs.prototype,"type",void 0),Bs=d8=m([H("esri.renderers.DotDensityRenderer")],Bs);const mOe=Bs;let lm=class extends St(be){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};m([w({type:String,json:{write:!0}})],lm.prototype,"minLabel",void 0),m([w({type:String,json:{write:!0}})],lm.prototype,"maxLabel",void 0),m([w({type:String,json:{write:!0}})],lm.prototype,"title",void 0),lm=m([H("esri.renderers.support.HeatmapLegendOptions")],lm);const vP=2.4;function gOe(e){return po(e*vP)}function vOe(e){return Qi(e)/vP}function wOe(e,t,i,r){let{color:n,ratio:o}=t,{color:c,ratio:y}=i;y===o&&(y===1?o-=1e-6:y+=1e-6);const v=co((r-o)/(y-o),0,1);$oe(e,n.toArray(),c.toArray(),v)}function cit(e){const i=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:y})=>y>=0&&y<=1).sort((y,v)=>y.ratio-v.ratio).map(({color:y,ratio:v})=>({color:y,ratio:Math.max(v,.001)})),e.length<1)return i;let r=e[0],n=e[0],o=1;const c=gT();for(let y=0;y<512;y++){const v=(y+.5)/512;for(;v>n.ratio&&o<e.length;)r=n,n=e[o++];wOe(c,r,n,v),i.set(c,4*y)}return i}function hit(e,t,i){const r=Math.sqrt(e**2+t**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function dit(e){return typeof e=="function"?e:e?t=>+t[e]:()=>1}var p8;function SG(e){if(e!=null){const{maxDensity:t,minDensity:i,radius:r}=e;if(t!=null||i!=null||r!=null){const{blurRadius:n,maxPixelIntensity:o,minPixelIntensity:c,...y}=e;return y}}return e}let cn=p8=class extends lh{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new Nb({ratio:0,color:new je("rgba(255, 140, 0, 0)")}),new Nb({ratio:.75,color:new je("rgba(255, 140, 0, 1)")}),new Nb({ratio:.9,color:new je("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(e){return SG(e)}get blurRadius(){return vOe(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",gOe(e)),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(vP**2*this.blurRadius**4)}read(e,t){e=SG(e),super.read(e,t)}getSymbol(){return new fs}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&Ls(e,t,i),r&&typeof r=="string"&&await gs(e,t,r)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new p8({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:le(this.colorStops),field:this.field,legendOptions:le(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};m([w({type:aP,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],cn.prototype,"authoringInfo",void 0),m([w({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],cn.prototype,"blurRadius",null),m([w({type:[Nb],json:{write:!0}})],cn.prototype,"colorStops",void 0),m([w({type:String,json:{write:!0}})],cn.prototype,"field",void 0),m([w({type:lm,json:{write:!0}})],cn.prototype,"legendOptions",void 0),m([w({type:Number,json:{write:!0}})],cn.prototype,"maxDensity",void 0),m([w({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],cn.prototype,"maxPixelIntensity",null),m([w({type:Number,json:{write:!0}})],cn.prototype,"minDensity",void 0),m([w({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],cn.prototype,"minPixelIntensity",null),m([w({type:Number,cast:zt,json:{write:!0}})],cn.prototype,"radius",void 0),m([w({type:Number,range:{min:0},json:{default:0,write:!0}})],cn.prototype,"referenceScale",void 0),m([He({heatmap:"heatmap"})],cn.prototype,"type",void 0),m([w({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],cn.prototype,"valueExpression",void 0),m([w({type:String})],cn.prototype,"valueExpressionTitle",void 0),m([w({readOnly:!0})],cn.prototype,"_pixelIntensityToDensity",null),cn=p8=m([H("esri.renderers.HeatmapRenderer")],cn);const qoe=cn;let zf=class extends St(be){constructor(){super(...arguments),this.color=new je([0,0,0,0]),this.label=null,this.threshold=0}};m([w({type:je,json:{write:!0}})],zf.prototype,"color",void 0),m([w({type:String,json:{write:!0}})],zf.prototype,"label",void 0),m([w({type:Number,range:{min:0,max:1},json:{write:!0}})],zf.prototype,"threshold",void 0),zf=m([H("esri.renderers.support.OthersCategory")],zf);const bOe={base:Yg,key:"type",typeMap:{size:Xg,opacity:lP}};let Gs=class extends Qg(St(lh)){constructor(t){super(t),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new je([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new zf,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){var t;return new fs({size:this.size?this.size/2+(((t=this.outline)==null?void 0:t.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Ar)}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((i,r)=>i+r.getAttributeHash(),""))??""}getMeshHash(){return this.getSymbols().reduce((t,i)=>t+JSON.stringify(i),"")}async collectRequiredFields(t,i){await this.collectVVRequiredFields(t,i);for(const r of this.attributes)r.valueExpression&&await gs(t,i,r.valueExpression),r.field&&t.add(r.field)}};m([w({type:[Goe],json:{write:!0}})],Gs.prototype,"attributes",void 0),m([w(pP)],Gs.prototype,"backgroundFillSymbol",void 0),m([w({type:je,json:{write:!0}})],Gs.prototype,"defaultColor",void 0),m([w({type:String,json:{write:!0}})],Gs.prototype,"defaultLabel",void 0),m([w({type:Number,range:{min:0,max:1},json:{write:!0}})],Gs.prototype,"holePercentage",void 0),m([w({type:zf,json:{write:!0}})],Gs.prototype,"othersCategory",void 0),m([w({type:fP,json:{write:!0}})],Gs.prototype,"legendOptions",void 0),m([w({type:vs,json:{default:null,write:!0}})],Gs.prototype,"outline",void 0),m([w({type:Number,cast:zt,json:{write:!0}})],Gs.prototype,"size",void 0),m([He({pieChart:"pie-chart"})],Gs.prototype,"type",void 0),m([w({types:[bOe]})],Gs.prototype,"visualVariables",void 0),Gs=m([H("esri.renderers.PieChartRenderer")],Gs);const _Oe=Gs;var f8;let vf=f8=class extends Qg(lh){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new f8({description:this.description,label:this.label,symbol:le(this.symbol),visualVariables:le(this.visualVariables),authoringInfo:le(this.authoringInfo)})}};m([w({type:String,json:{write:!0}})],vf.prototype,"description",void 0),m([w({type:String,json:{write:!0}})],vf.prototype,"label",void 0),m([w(dP)],vf.prototype,"symbol",void 0),m([He({simple:"simple"})],vf.prototype,"type",void 0),vf=f8=m([H("esri.renderers.SimpleRenderer")],vf);const tv=vf,SOe=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function y8(e){return e instanceof Ve}function xG(e){return e instanceof Oe?Object.keys(e.items):y8(e)?uo(e).keys():e?Object.keys(e):[]}function oS(e,t){return e instanceof Oe?e.items[t]:e[t]}function xOe(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function Fb(e){return e?e.declaredClass:null}function Hoe(e,t){var $;const i=e.diff;if(i&&typeof i=="function")return i(e,t);const r=xG(e),n=xG(t);if(r.length===0&&n.length===0)return;if(!r.length||!n.length||xOe(e,t))return{type:"complete",oldValue:e,newValue:t};const o=n.filter(A=>!r.includes(A)),c=r.filter(A=>!n.includes(A)),y=r.filter(A=>n.includes(A)&&oS(e,A)!==oS(t,A)).concat(o,c).sort(),v=Fb(e);if(v&&SOe.has(v)&&y.length)return{type:"complete",oldValue:e,newValue:t};let _;const I=y8(e)&&y8(t);for(const A of y){const k=oS(e,A),R=oS(t,A);let N;if((I||typeof k!="function"&&typeof R!="function")&&k!==R&&(k!=null||R!=null)){if(i&&i[A]&&typeof i[A]=="function")N=($=i[A])==null?void 0:$.call(i,k,R);else if(k instanceof Date&&R instanceof Date){if(k.getTime()===R.getTime())continue;N={type:"complete",oldValue:k,newValue:R}}else N=typeof k=="object"&&typeof R=="object"&&Fb(k)===Fb(R)?Hoe(k,R):{type:"complete",oldValue:k,newValue:R};N!=null&&(_!=null?_.diff[A]=N:_={type:"partial",diff:{[A]:N}})}}return _}function yit(e,t){return IOe(e,t)}function IOe(e,t){if(e==null)return!1;const i=t.split(".");let r=e;for(const n of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const o=r.diff[n];if(!o)return!1;r=o}}return!0}function mit(e,t){if(!e)return!1;if(e.type==="partial"){const i=Object.keys(e.diff);return i.length===1&&i[0]===t}return!1}function TOe(e,t){if(typeof e!="function"&&typeof t!="function"&&(e!=null||t!=null))return e==null||t==null||typeof e=="object"&&typeof t=="object"&&Fb(e)!==Fb(t)?{type:"complete",oldValue:e,newValue:t}:Hoe(e,t)}let um=class extends St(be){constructor(t){super(t),this.value=null,this.value2=null,this.value3=null}};m([w(nx)],um.prototype,"value",void 0),m([w(nx)],um.prototype,"value2",void 0),m([w(nx)],um.prototype,"value3",void 0),um=m([H("esri.renderers.support.UniqueValue")],um);const U1=um;let Wh=class extends St(be){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(t){if(t==null)return null;const i=typeof(t=Array.isArray(t)?t:[t])[0];return i==="string"||i==="number"?t.map(r=>new U1({value:r})):i==="object"?t[0]instanceof U1?t:t.map(r=>new U1(r)):null}};m([w({type:String,json:{write:!0}})],Wh.prototype,"description",void 0),m([w({type:String,json:{write:!0}})],Wh.prototype,"label",void 0),m([w(mT)],Wh.prototype,"symbol",void 0),m([w({type:[U1],json:{type:[[String]],read:{reader:e=>e?e.map(t=>new U1({value:t[0],value2:t[1],value3:t[2]})):null},write:{writer:(e,t)=>{const i=[];for(const r of e){const n=[r.value,r.value2,r.value3].filter(Ar).map(o=>o.toString());i.push(n)}t.values=i}}}})],Wh.prototype,"values",void 0),m([wt("values")],Wh.prototype,"castValues",null),Wh=m([H("esri.renderers.support.UniqueValueClass")],Wh);const Woe=Wh;let Bw=class extends St(be){constructor(t){super(t),this.heading=null,this.classes=null}};m([w({type:String,json:{write:!0}})],Bw.prototype,"heading",void 0),m([w({type:[Woe],json:{write:!0}})],Bw.prototype,"classes",void 0),Bw=m([H("esri.renderers.support.UniqueValueGroup")],Bw);const m8=Bw;var g8;let wf=g8=class extends be{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new g8({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var t;const e=JSON.stringify((t=this.symbol)==null?void 0:t.toJSON());return`${this.value}.${e}`}};m([w({type:String,json:{write:!0}})],wf.prototype,"description",void 0),m([w({type:String,json:{write:!0}})],wf.prototype,"label",void 0),m([w(dP)],wf.prototype,"symbol",void 0),m([w(nx)],wf.prototype,"value",void 0),wf=g8=m([H("esri.renderers.support.UniqueValueInfo")],wf);const Db=wf,IG=new Map;async function $Oe(e,t){try{return{data:(await wP(e,t)).data,baseUrl:yO(e),styleUrl:e}}catch(i){return bu(i),null}}function EOe(e,t,i){var v;const r=t.portal!=null?t.portal:Cr.getDefault();let n;const o=`${r.url} - ${(v=r.user)==null?void 0:v.username} - ${e}`,c=IG.get(o);if(c)return c;const y=MOe(e,r,i).then(_=>(n=_,_.fetchData())).then(_=>({data:_,baseUrl:n.itemUrl??"",styleName:e}));return IG.set(o,y),y}function MOe(e,t,i){return t.load(i).then(()=>{const r=new ml({disableExtraQuery:!0,query:`owner:${TG} AND type:${$G} AND typekeywords:"${e}"`});return t.queryItems(r,i)}).then(({results:r})=>{var c;let n=null;const o=e.toLowerCase();if(r&&Array.isArray(r)){for(const y of r)if(((c=y.typeKeywords)==null?void 0:c.some(_=>_.toLowerCase()===o))&&y.type===$G&&y.owner===TG){n=y;break}}if(!n)throw new ne("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return n.load(i)})}function Joe(e,t,i){return(e==null?void 0:e.styleUrl)!=null?$Oe(e.styleUrl,i):(e==null?void 0:e.styleName)!=null?EOe(e.styleName,t,i):Promise.reject(new ne("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function Zoe(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function AOe(e,t,i=["gltf"]){if(t==="cimRef")return encodeURI(e.cimRef);if(e.formatInfos&&!we("enable-feature:force-wosr"))for(const r of i){const n=e.formatInfos.find(o=>o.type===r);if(n)return n.href}return encodeURI(e.webRef)}function wP(e,t){const i={responseType:"json",query:{f:"json"},...t};return Et(Ia(e),i)}const TG="esri_en",$G="Style",COe="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var Gw;const Koe="esri.renderers.UniqueValueRenderer",xh=()=>_e.getLogger(Koe),EG="uvInfos-watcher",MG="uvGroups-watcher",kOe=",",LOe=qi(Db);function OOe(e){const{field1:t,field2:i,field3:r,fieldDelimiter:n,uniqueValueInfos:o,valueExpression:c}=e,y=!(!t||!i);return[{classes:(o??[]).map(v=>{var j;const{symbol:_,label:I,value:$,description:A}=v,[k,R,N]=y?((j=$==null?void 0:$.toString())==null?void 0:j.split(n||""))||[]:[$],D=[];return(t||c)&&D.push(k),i&&D.push(R),r&&D.push(N),{symbol:_,label:I,values:[D],description:A}})}]}function _y(e){return e!=null&&e!==""&&(typeof e!="string"||e.trim()!==""&&e.toLowerCase()!=="<null>")||(e=null),e+""}let Fi=Gw=class extends Qg(lh){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,i){if(!t&&!i)return;if(!t||!i)return{type:"complete",oldValue:t,newValue:i};let r=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let o=0;o<i.length;o++){const c=t.find(y=>y.value===i[o].value);c?TOe(c,i[o])?(n.changed.push({type:"complete",oldValue:c,newValue:i[o]}),r=!0):n.unchanged.push({oldValue:c,newValue:i[o]}):(n.added.push(i[o]),r=!0)}for(let o=0;o<t.length;o++)i.find(c=>c.value===t[o].value)||(n.removed.push(t[o]),r=!0);return r?n:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:o3(e)}writeField(e,t,i,r){typeof e=="string"?t[i]=e:r!=null&&r.messages?r.messages.push(new ne("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):xh().error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,i){return i.portal||Cr.getDefault()}readStyleOrigin(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const r=rp(t.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(e,t,i,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=I3(e.styleUrl,r))}set uniqueValueGroups(e){this.styleOrigin?xh().error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?xh().error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){var r;if(this.styleOrigin)return void xh().error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof e=="object"?LOe(e):new Db({value:e,symbol:Mie(t)}),(r=this.uniqueValueInfos)==null||r.push(i),this._valueInfoMap[_y(i.value)]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void xh().error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let i=0;i<t.length;i++){const r=t[i];if(String(r.value)===String(e)){delete this._valueInfoMap[_y(e)],t.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let i=t;return this.valueExpression&&(t==null?void 0:t.arcade)==null&&(i={...i,arcade:await eh()}),this._getUniqueValueInfo(e,i)}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void xh().error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(e,t);return(i==null?void 0:i.symbol)||this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(i==null?void 0:i.arcade)==null){const n=await eh(),{arcadeUtils:o}=n;o.hasGeometryOperations(this.valueExpression)&&await o.enableGeometryOperations(),i={...i,arcade:n}}const r=this._getUniqueValueInfo(e,i);return(r==null?void 0:r.symbol)||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){var r;const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=(r=this.uniqueValueInfos)==null?void 0:r.reduce((n,o)=>n+o.getMeshHash(),"");return`${e}.${t}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new Gw({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:le(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:le(this.visualVariables),legendOptions:le(this.legendOptions),authoringInfo:le(this.authoringInfo),backgroundFillSymbol:le(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=le(this.uniqueValueInfos),i=le(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(le(this.styleOrigin))),Object.freeze(t),Object.freeze(i)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",i),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),gs(e,t,this.valueExpression)];Ls(e,t,this.field),Ls(e,t,this.field2),Ls(e,t,this.field3),await Promise.all(i)}populateFromStyle(){return Joe(this.styleOrigin,{portal:this.portal}).then(e=>{var i;const t=[];return this._valueInfoMap={},e!=null&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(r=>{const n=new ey({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=n,this._isDefaultSymbolDerived=!0);const o=new Db({value:r.name,symbol:n});t.push(o),this._valueInfoMap[_y(r.name)]=o}),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",kOe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[_y(t.value)]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(EG);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const i of e)t.push(ge(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,n)=>{r!==n&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,EG)}}_watchUniqueValueGroups(){this.removeHandles(MG);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const i of e){t.push(ge(()=>({classes:i.classes}),(r,n)=>{r!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes??[])t.push(ge(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(n,o)=>{n!==o&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(t,MG)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:i,field3:r,fieldDelimiter:n,uniqueValueGroups:o,valueExpression:c}=this;if(!t&&!c)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const y=!(!t||!i);for(const v of o)for(const _ of v.classes??[]){const{symbol:I,label:$,values:A,description:k}=_;for(const R of A??[]){const{value:N,value2:D,value3:j}=R,z=[N];i&&z.push(D),r&&z.push(j);const U=y?z.join(n||""):z[0]??void 0;e.push(new Db({symbol:I,label:$,value:U,description:k}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:i,valueExpression:r,fieldDelimiter:n,uniqueValueInfos:o}=this;if(!t&&!r||!o.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const c=!(!t||!i),y=o.map(_=>{var j;const{symbol:I,label:$,value:A,description:k}=_,[R,N,D]=c?((j=A==null?void 0:A.toString())==null?void 0:j.split(n||""))||[]:[A];return new Woe({symbol:I,label:$,description:k,values:[new U1({value:R,value2:N,value3:D})]})}),v=[new m8({classes:y})];e&&Object.freeze(v),this._set("uniqueValueGroups",v),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:n,arcade:o,timeZone:c}=t??{};let y=this._cache.compiledFunc;const v=o.arcadeUtils;if(!y){const I=v.createSyntaxTree(this.valueExpression);y=v.createFunction(I),this._cache.compiledFunc=y}const _=v.executeFunction(y,v.createExecContext(e,v.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),c));return this._valueInfoMap[_y(_)]}_getUnqiueValueInfoForFields(e){const t=this.field,i=e.attributes;let r;if(this.field2){const n=this.field2,o=this.field3,c=[];t&&c.push(i[t]),n&&c.push(i[n]),o&&c.push(i[o]),r=c.join(this.fieldDelimiter||"")}else t&&(r=i[t]);return this._valueInfoMap[_y(r)]}static fromPortalStyle(e,t){const i=new Gw(t==null?void 0:t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",(t==null?void 0:t.portal)||Cr.getDefault());const r=i.populateFromStyle();return r.catch(n=>{xh().error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",n)}),r}static fromStyleUrl(e,t){const i=new Gw(t==null?void 0:t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));const r=i.populateFromStyle();return r.catch(n=>{xh().error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),r}};m([w({readOnly:!0})],Fi.prototype,"_cache",null),m([He({uniqueValue:"unique-value"})],Fi.prototype,"type",void 0),m([w(pP)],Fi.prototype,"backgroundFillSymbol",void 0),m([w({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Fi.prototype,"field",null),m([wt("field")],Fi.prototype,"castField",null),m([Le("field")],Fi.prototype,"writeField",null),m([w({type:String,value:null,json:{write:!0}})],Fi.prototype,"field2",null),m([w({type:String,value:null,json:{write:!0}})],Fi.prototype,"field3",null),m([w({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Fi.prototype,"orderByClassesEnabled",void 0),m([w({type:String,value:null,json:{write:!0}})],Fi.prototype,"valueExpression",null),m([w({type:String,json:{write:!0}})],Fi.prototype,"valueExpressionTitle",void 0),m([w({type:fP,json:{write:!0}})],Fi.prototype,"legendOptions",void 0),m([w({type:String,json:{write:!0}})],Fi.prototype,"defaultLabel",void 0),m([w(YL({...mT},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Fi.prototype,"defaultSymbol",null),m([w({type:String,value:null,json:{write:!0}})],Fi.prototype,"fieldDelimiter",null),m([w({type:Cr,readOnly:!0})],Fi.prototype,"portal",void 0),m([ke("portal",["styleName"])],Fi.prototype,"readPortal",null),m([w({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Fi.prototype,"styleOrigin",void 0),m([ke("styleOrigin",["styleName","styleUrl"])],Fi.prototype,"readStyleOrigin",null),m([Le("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Fi.prototype,"writeStyleOrigin",null),m([w({type:[m8],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,i)=>(t.uniqueValueGroups||OOe(t)).map(r=>m8.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Fi.prototype,"uniqueValueGroups",null),m([w({type:[Db],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Fi.prototype,"uniqueValueInfos",null),Fi=Gw=m([H(Koe)],Fi);const bP=Fi,vT={key:"type",base:lh,typeMap:{heatmap:qoe,simple:tv,"unique-value":bP,"class-breaks":moe,"dot-density":mOe,dictionary:fOe,"pie-chart":_Oe},errorContext:"renderer"},ROe={key:"type",base:lh,typeMap:{simple:tv,"unique-value":bP,"class-breaks":moe,heatmap:qoe},errorContext:"renderer",validate:POe};function POe(e){switch(e.type){case"simple":return NOe(e);case"unique-value":return FOe(e);case"class-breaks":return DOe(e);case"heatmap":return e}}function NOe(e){if(e.symbol)return e;_e.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function FOe(e){const t=e.uniqueValueInfos,i=t==null?void 0:t.filter(({symbol:r,label:n},o)=>(r||_e.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${o}] ${n}) without a symbol from web scene.`),!!r));return(i==null?void 0:i.length)!==(t==null?void 0:t.length)&&(e.uniqueValueInfos=i),e}function DOe(e){const t=e.classBreakInfos,i=t==null?void 0:t.filter(({symbol:r,label:n},o)=>(r||_e.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${o}] ${n}) without a symbol from web scene.`),!!r));return(i==null?void 0:i.length)!==(t==null?void 0:t.length)&&(e.classBreakInfos=i),e}function jOe(e,t){return q2(e,null,t)}const zOe=Cg({types:vT});function q2(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(i!=null&&i.messages&&i.messages.push(new zo("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):zOe(e,t,i):null}let VOe=class Yoe{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(_M),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const i=new Yoe,r=this._originStores[dt.DEFAULTS];r&&r.forEach((n,o)=>{i.set(o,le(n),dt.DEFAULTS)});for(let n=dt.SERVICE;n<_M;n++){const o=this._originStores[n];o&&o.forEach((c,y)=>{t&&t.has(y)||i.set(y,le(c),n)})}return i}get(t,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(t):void 0}keys(t){const i=t==null?this._values:this._originStores[t];return i?[...i.keys()]:[]}set(t,i,r=dt.USER){let n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(t,i),!this._values.has(t)||this._propertyOriginMap.get(t)<=r){const o=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,r),o!==i}return!1}delete(t,i=dt.USER){const r=this._originStores[i];if(!r)return;const n=r.get(t);if(r.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===i){this._values.delete(t);for(let o=i-1;o>=0;o--){const c=this._originStores[o];if(c&&c.has(t)){this._values.set(t,c.get(t)),this._propertyOriginMap.set(t,o);break}}}return n}has(t,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(t)}revert(t,i){for(;i>0&&!this.has(t,i);)--i;const r=this._originStores[i],n=r==null?void 0:r.get(t),o=this._values.get(t);return this._values.set(t,n),this._propertyOriginMap.set(t,i),o!==n}originOf(t){return this._propertyOriginMap.get(t)||dt.DEFAULTS}forEach(t){this._values.forEach(t)}};const Xoe=e=>{let t=class extends e{constructor(...i){super(...i);const r=uo(this),n=r.store,o=new VOe;r.store=o,rY(r,n,o)}read(i,r){sY(this,i,r)}getAtOrigin(i,r){const n=CE(this),o=Td(r);if(typeof i=="string")return n.get(i,o);const c={};return i.forEach(y=>{c[y]=n.get(y,o)}),c}originOf(i){return g9(this.originIdOf(i))}originIdOf(i){return CE(this).originOf(i)}revert(i,r){const n=CE(this),o=Td(r),c=uo(this);let y;y=typeof i=="string"?i==="*"?n.keys(o):[i]:i,y.forEach(v=>{c.invalidate(v),n.revert(v,o),c.commit(v)})}};return t=m([H("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function CE(e){return uo(e).store}let AG=class extends Xoe(Ve){};AG=m([H("esri.core.ReadOnlyMultiOriginJSONSupport")],AG);const UOe=e=>{let t=class extends e{constructor(...i){super(...i)}clear(i,r="user"){return kE(this).delete(i,Td(r))}write(i,r){return lY(this,i=i||{},r),i}setAtOrigin(i,r,n){uo(this).setAtOrigin(i,r,Td(n))}removeOrigin(i){const r=kE(this),n=Td(i),o=r.keys(n);for(const c of o)r.originOf(c)===n&&r.set(c,r.get(c,n),dt.USER)}updateOrigin(i,r){const n=kE(this),o=Td(r),c=hs(this,i);for(let y=o+1;y<_M;++y)n.delete(i,y);n.set(i,c,o)}toJSON(i){return this.write({},i)}};return t=m([H("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function kE(e){return uo(e).store}const wT=e=>{let t=class extends UOe(Xoe(e)){constructor(...i){super(...i)}};return t=m([H("esri.core.MultiOriginJSONSupport")],t),t};let v8=class extends wT(Ve){};v8=m([H("esri.core.MultiOriginJSONSupport")],v8);const bn=(e=>e)(["operational-layers","basemap","ground"]);var w8;let bf=w8=class extends be{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new w8({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};m([w({type:String,json:{write:!0}})],bf.prototype,"expression",void 0),m([w({type:String,json:{write:!0}})],bf.prototype,"name",void 0),m([w({type:["boolean","date","number","string"],json:{write:!0}})],bf.prototype,"returnType",void 0),m([w({type:String,json:{write:!0}})],bf.prototype,"title",void 0),bf=w8=m([H("esri.form.ExpressionInfo")],bf);const BOe=bf;let _f=class extends be{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};m([w({type:String,json:{write:!0}})],_f.prototype,"description",void 0),m([w({type:String,json:{write:!0}})],_f.prototype,"label",void 0),m([w()],_f.prototype,"type",void 0),m([w({type:String,json:{write:!0}})],_f.prototype,"visibilityExpression",void 0),_f=m([H("esri.form.elements.Element")],_f);const D0=_f;let ux=class extends St(be){constructor(t){super(t),this.type=null}};m([w()],ux.prototype,"type",void 0),ux=m([H("esri.form.elements.inputs.attachments.Input")],ux);const op=ux,bT=["any","capture","upload"];let cm=class extends op{constructor(t){super(t),this.type="audio",this.inputMethod="any",this.maxDuration=null}};m([w({type:["audio"],readOnly:!0,json:{write:!0}})],cm.prototype,"type",void 0),m([w({type:bT,json:{write:!0}})],cm.prototype,"inputMethod",void 0),m([w({type:Number,json:{write:!0}})],cm.prototype,"maxDuration",void 0),cm=m([H("esri.form.elements.inputs.attachments.AudioInput")],cm);const CG=cm;let qw=class extends op{constructor(t){super(t),this.type="document",this.maxFileSize=null}};m([w({type:["document"],readOnly:!0,json:{write:!0}})],qw.prototype,"type",void 0),m([w({type:Number,json:{write:!0}})],qw.prototype,"maxFileSize",void 0),qw=m([H("esri.form.elements.inputs.attachments.DocumentInput")],qw);const kG=qw;let hm=class extends op{constructor(t){super(t),this.type="image",this.inputMethod="any",this.maxImageSize=null}};m([w({type:["image"],readOnly:!0,json:{write:!0}})],hm.prototype,"type",void 0),m([w({type:bT,json:{write:!0}})],hm.prototype,"inputMethod",void 0),m([w({type:Number,json:{write:!0}})],hm.prototype,"maxImageSize",void 0),hm=m([H("esri.form.elements.inputs.attachments.ImageInput")],hm);const LG=hm;let Hw=class extends op{constructor(t){super(t),this.type="signature",this.inputMethod="any"}};m([w({type:["signature"],readOnly:!0,json:{write:!0}})],Hw.prototype,"type",void 0),m([w({type:bT,json:{write:!0}})],Hw.prototype,"inputMethod",void 0),Hw=m([H("esri.form.elements.inputs.attachments.SignatureInput")],Hw);const OG=Hw;let dm=class extends op{constructor(t){super(t),this.type="video",this.inputMethod="any",this.maxDuration=null}};m([w({type:["video"],readOnly:!0,json:{write:!0}})],dm.prototype,"type",void 0),m([w({type:bT,json:{write:!0}})],dm.prototype,"inputMethod",void 0),m([w({type:Number,json:{write:!0}})],dm.prototype,"maxDuration",void 0),dm=m([H("esri.form.elements.inputs.attachments.VideoInput")],dm);const RG=dm;function Qoe(e){return{nestableTypes:{base:op,key:"type",typeMap:{audio:CG,document:kG,image:LG,signature:OG,video:RG}},allTypes:{base:op,key:"type",typeMap:{attachment:e,audio:CG,document:kG,image:LG,signature:OG,video:RG}}}}function GOe(e,t,i){return e?e.map(r=>Ma(t.nestableTypes,r)):null}function qOe(e,t,i){if(!e)return null;const r=t.nestableTypes.typeMap;return e.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function HOe(e,t,i){if(!e)return null;const r=t.nestableTypes.typeMap;return e.filter(n=>r[n.type]).map(n=>n.toJSON())}let yu=class extends op{constructor(t){super(t),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(t){return GOe(t,LE)}readInputs(t,i){return qOe(i.inputTypes,LE)}writeInputs(t,i){i.inputTypes=HOe(t,LE)}};m([w({type:["attachment"],readOnly:!0,json:{write:!0}})],yu.prototype,"type",void 0),m([w({type:["any","exact","exactOrNone"],json:{write:!0}})],yu.prototype,"attachmentAssociationType",void 0),m([w({json:{write:{isRequired:!0}}})],yu.prototype,"inputTypes",void 0),m([wt("inputTypes")],yu.prototype,"castInputs",null),m([ke("inputTypes")],yu.prototype,"readInputs",null),m([Le("inputTypes")],yu.prototype,"writeInputs",null),yu=m([H("esri.form.elements.inputs.attachments.AttachmentInput")],yu);const LE=Qoe(yu),WOe=yu;var b8;const JOe=Qoe(WOe);let Io=b8=class extends D0{constructor(e){super(e),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){var e;return new b8({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:(e=this.input)==null?void 0:e.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};m([w({type:Boolean,json:{write:!0}})],Io.prototype,"allowUserRename",void 0),m([w({type:String,json:{write:{isRequired:!0}}})],Io.prototype,"attachmentKeyword",void 0),m([w({type:Boolean,json:{write:!0}})],Io.prototype,"displayFilename",void 0),m([w({type:String,json:{write:!0}})],Io.prototype,"editableExpression",void 0),m([w({type:String,json:{write:!0}})],Io.prototype,"filenameExpression",void 0),m([w({types:JOe.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],Io.prototype,"input",void 0),m([w({type:Number,json:{write:!0}})],Io.prototype,"maxAttachmentCount",void 0),m([w({type:Number,json:{write:!0}})],Io.prototype,"minAttachmentCount",void 0),m([w({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],Io.prototype,"type",void 0),m([w({type:Boolean,json:{write:!0}})],Io.prototype,"useOriginalFilename",void 0),Io=b8=m([H("esri.form.elements.AttachmentElement")],Io);const PG=Io;let cx=class extends be{constructor(t){super(t),this.type=null}};m([w()],cx.prototype,"type",void 0),cx=m([H("esri.form.elements.inputs.Input")],cx);const uh=cx;let Ww=class extends uh{constructor(t){super(t),this.maxLength=null,this.minLength=0}};m([w({type:Number,json:{write:!0}})],Ww.prototype,"maxLength",void 0),m([w({type:Number,json:{write:!0}})],Ww.prototype,"minLength",void 0),Ww=m([H("esri.form.elements.inputs.TextInput")],Ww);const _P=Ww;var _8;let hx=_8=class extends _P{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new _8({maxLength:this.maxLength,minLength:this.minLength})}};m([w({type:["barcode-scanner"],json:{read:!1,write:!0}})],hx.prototype,"type",void 0),hx=_8=m([H("esri.form.elements.inputs.BarcodeScannerInput")],hx);const ZOe=hx;var S8;let pm=S8=class extends uh{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new S8({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};m([w({type:String,json:{write:!0}})],pm.prototype,"noValueOptionLabel",void 0),m([w({type:Boolean,json:{write:!0}})],pm.prototype,"showNoValueOption",void 0),m([w({type:["combo-box"],json:{read:!1,write:!0}})],pm.prototype,"type",void 0),pm=S8=m([H("esri.form.elements.inputs.ComboBoxInput")],pm);const KOe=pm;var x8;function NG(e){return e??null}function FG(e){return e??null}let tu=x8=class extends uh{constructor(e){super(e),this.max=null,this.min=null,this.type="date-picker"}readMax(e,t){return NG(t.max)}writeMax(e,t){t.max=FG(e)}readMin(e,t){return NG(t.min)}writeMin(e,t){t.min=FG(e)}clone(){return new x8({max:this.max,min:this.min})}};m([w({type:String,json:{type:String,write:!0}})],tu.prototype,"max",void 0),m([ke("max")],tu.prototype,"readMax",null),m([Le("max")],tu.prototype,"writeMax",null),m([w({type:String,json:{type:String,write:!0}})],tu.prototype,"min",void 0),m([ke("min")],tu.prototype,"readMin",null),m([Le("min")],tu.prototype,"writeMin",null),m([w({type:["date-picker"],json:{read:!1,write:!0}})],tu.prototype,"type",void 0),tu=x8=m([H("esri.form.elements.inputs.DatePickerInput")],tu);const YOe=tu;var I8;function OE(e){return e??null}function RE(e){return e??null}let qs=I8=class extends uh{constructor(e){super(e),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(e,t){return OE(t.max)}writeMax(e,t){t.max=RE(e)}readMin(e,t){return OE(t.min)}writeMin(e,t){t.min=RE(e)}readTimeResolution(e,t){return OE(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=RE(e)}clone(){return new I8({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};m([w({type:Boolean,json:{write:!0}})],qs.prototype,"includeTimeOffset",void 0),m([w({type:String,json:{type:String,write:!0}})],qs.prototype,"max",void 0),m([ke("max")],qs.prototype,"readMax",null),m([Le("max")],qs.prototype,"writeMax",null),m([w({type:String,json:{type:String,write:!0}})],qs.prototype,"min",void 0),m([ke("min")],qs.prototype,"readMin",null),m([Le("min")],qs.prototype,"writeMin",null),m([w({type:String,json:{type:String,write:!0}})],qs.prototype,"timeResolution",void 0),m([ke("timeResolution")],qs.prototype,"readTimeResolution",null),m([Le("timeResolution")],qs.prototype,"writeTimeResolution",null),m([w({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],qs.prototype,"type",void 0),qs=I8=m([H("esri.form.elements.inputs.DateTimeOffsetPickerInput")],qs);const XOe=qs;var T8;function DG(e){return e!=null?new Date(e):null}function jG(e){return e?e.getTime():null}let Ya=T8=class extends uh{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return DG(t.max)}writeMax(e,t){t.max=jG(e)}readMin(e,t){return DG(t.min)}writeMin(e,t){t.min=jG(e)}clone(){return new T8({includeTime:this.includeTime,max:this.max,min:this.min})}};m([w({type:Boolean,json:{write:!0}})],Ya.prototype,"includeTime",void 0),m([w({type:Date,json:{type:Number,write:!0}})],Ya.prototype,"max",void 0),m([ke("max")],Ya.prototype,"readMax",null),m([Le("max")],Ya.prototype,"writeMax",null),m([w({type:Date,json:{type:Number,write:!0}})],Ya.prototype,"min",void 0),m([ke("min")],Ya.prototype,"readMin",null),m([Le("min")],Ya.prototype,"writeMin",null),m([w({type:["datetime-picker"],json:{read:!1,write:!0}})],Ya.prototype,"type",void 0),Ya=T8=m([H("esri.form.elements.inputs.DateTimePickerInput")],Ya);const QOe=Ya;var $8;let fm=$8=class extends uh{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new $8({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};m([w({type:String,json:{write:!0}})],fm.prototype,"noValueOptionLabel",void 0),m([w({type:Boolean,json:{write:!0}})],fm.prototype,"showNoValueOption",void 0),m([w({type:["radio-buttons"],json:{read:!1,write:!0}})],fm.prototype,"type",void 0),fm=$8=m([H("esri.form.elements.inputs.RadioButtonsInput")],fm);const eRe=fm;var E8;let ym=E8=class extends uh{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new E8({offValue:this.offValue,onValue:this.onValue})}};m([w({type:[String,Number],json:{write:!0}})],ym.prototype,"offValue",void 0),m([w({type:[String,Number],json:{write:!0}})],ym.prototype,"onValue",void 0),m([w({type:["switch"],json:{read:!1,write:!0}})],ym.prototype,"type",void 0),ym=E8=m([H("esri.form.elements.inputs.SwitchInput")],ym);const tRe=ym;var M8;let dx=M8=class extends _P{constructor(e){super(e),this.type="text-area"}clone(){return new M8({maxLength:this.maxLength,minLength:this.minLength})}};m([w({type:["text-area"],json:{read:!1,write:!0}})],dx.prototype,"type",void 0),dx=M8=m([H("esri.form.elements.inputs.TextAreaInput")],dx);const iRe=dx;var A8;let px=A8=class extends _P{constructor(e){super(e),this.type="text-box"}clone(){return new A8({maxLength:this.maxLength,minLength:this.minLength})}};m([w({type:["text-box"],json:{read:!1,write:!0}})],px.prototype,"type",void 0),px=A8=m([H("esri.form.elements.inputs.TextBoxInput")],px);const rRe=px;var C8;function PE(e){return e??null}function NE(e){return e??null}let To=C8=class extends uh{constructor(e){super(e),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(e,t){return PE(t.max)}writeMax(e,t){t.max=NE(e)}readMin(e,t){return PE(t.min)}writeMin(e,t){t.min=NE(e)}readTimeResolution(e,t){return PE(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=NE(e)}clone(){return new C8({max:this.max,min:this.min,timeResolution:this.timeResolution})}};m([w({type:String,json:{type:String,write:!0}})],To.prototype,"max",void 0),m([ke("max")],To.prototype,"readMax",null),m([Le("max")],To.prototype,"writeMax",null),m([w({type:String,json:{type:String,write:!0}})],To.prototype,"min",void 0),m([ke("min")],To.prototype,"readMin",null),m([Le("min")],To.prototype,"writeMin",null),m([w({type:String,json:{type:String,write:!0}})],To.prototype,"timeResolution",void 0),m([ke("timeResolution")],To.prototype,"readTimeResolution",null),m([Le("timeResolution")],To.prototype,"writeTimeResolution",null),m([w({type:["time-picker"],json:{read:!1,write:!0}})],To.prototype,"type",void 0),To=C8=m([H("esri.form.elements.inputs.TimePickerInput")],To);const nRe=To,sRe={base:uh,key:"type",typeMap:{"barcode-scanner":ZOe,"combo-box":KOe,"date-picker":YOe,"datetime-picker":QOe,"datetimeoffset-picker":XOe,"radio-buttons":eRe,switch:tRe,"text-area":iRe,"text-box":rRe,"time-picker":nRe}};var k8;let na=k8=class extends D0{constructor(e){super(e),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new k8({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};m([w({types:Lie,json:{read:{reader:ZI},write:!0}})],na.prototype,"domain",void 0),m([w({type:Boolean,json:{write:!0}})],na.prototype,"editable",void 0),m([w({type:String,json:{write:!0}})],na.prototype,"editableExpression",void 0),m([w({type:String,json:{write:!0}})],na.prototype,"fieldName",void 0),m([w({type:String,json:{write:!0}})],na.prototype,"hint",void 0),m([w({types:sRe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],na.prototype,"input",void 0),m([w({type:String,json:{write:!0}})],na.prototype,"requiredExpression",void 0),m([w({type:String,json:{read:!1,write:!0}})],na.prototype,"type",void 0),m([w({type:String,json:{write:!0}})],na.prototype,"valueExpression",void 0),na=k8=m([H("esri.form.elements.FieldElement")],na);const zG=na;var L8;let fc=L8=class extends D0{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new L8({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:le(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};m([w({type:Number,json:{write:!0}})],fc.prototype,"displayCount",void 0),m([w({type:["list"],json:{write:!0}})],fc.prototype,"displayType",void 0),m([w({type:String,json:{write:!0}})],fc.prototype,"editableExpression",void 0),m([w({type:[pR],json:{write:!0}})],fc.prototype,"orderByFields",void 0),m([w({type:Number,json:{write:!0}})],fc.prototype,"relationshipId",void 0),m([w({type:["relationship"],json:{read:!1,write:!0}})],fc.prototype,"type",void 0),fc=L8=m([H("esri.form.elements.RelationshipElement")],fc);const VG=fc;var O8;let mm=O8=class extends D0{constructor(e){super(e),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new O8({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};m([w({type:String,json:{write:!0}})],mm.prototype,"text",void 0),m([w({type:String,json:{write:!0}})],mm.prototype,"textFormat",void 0),m([w({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],mm.prototype,"type",void 0),mm=O8=m([H("esri.form.elements.TextElement")],mm);const UG=mm;function eae(e){return{typesWithGroup:{base:D0,key:"type",typeMap:{attachment:PG,field:zG,group:e,relationship:VG,text:UG}},typesWithoutGroup:{base:D0,key:"type",typeMap:{attachment:PG,field:zG,relationship:VG,text:UG}}}}function tae(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function iae(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>r[n.type]).map(n=>n.toJSON())}function rae(e,t,i=!0){return e?e.map(r=>Ma(i?t.typesWithGroup:t.typesWithoutGroup,r)):null}var R8;let mu=R8=class extends D0{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return rae(e,FE,!1)}readElements(e,t){return tae(t.formElements,FE,!1)}writeElements(e,t){t.formElements=iae(e,FE,!1)}clone(){return new R8({description:this.description,elements:le(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};m([w({json:{write:!0}})],mu.prototype,"elements",void 0),m([wt("elements")],mu.prototype,"castElements",null),m([ke("elements",["formElements"])],mu.prototype,"readElements",null),m([Le("elements")],mu.prototype,"writeElements",null),m([w({type:["collapsed","expanded"],json:{write:!0}})],mu.prototype,"initialState",void 0),m([w({type:String,json:{read:!1,write:!0}})],mu.prototype,"type",void 0),mu=R8=m([H("esri.form.elements.GroupElement")],mu);const FE=eae(mu),oRe=mu,aRe=e=>e.type==="field",lRe=e=>e.type==="group",uRe=e=>e.type==="text";var P8;const DE=eae(oRe);let Xa=P8=class extends be{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return rae(e,DE)}readElements(e,t){return tae(t.formElements,DE)}writeElements(e,t){t.formElements=iae(e,DE)}clone(){return new P8({description:this.description,expressionInfos:le(this.expressionInfos),elements:le(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(e,t){const i=new Set,{description:r,elements:n,expressionInfos:o,title:c}=this;if(jb(i,e,r),jb(i,e,c),!n)return[];const y=cRe(n,o).map(v=>gs(i,e,v));await Promise.all(y);for(const v of n)nae(i,{fieldsIndex:e,relationships:t},v);return Array.from(i).sort()}};function nae(e,t,i){var n;const{fieldsIndex:r}=t;if(!r||r.fields.length!==e.size)switch(jb(e,r,i.label),jb(e,r,i.description),i.type){case"field":Ls(e,r,i.fieldName);break;case"group":i.elements.forEach(o=>nae(e,t,o));break;case"relationship":if(t.relationships){const o=t.relationships.find(c=>c.id===i.relationshipId);o&&Ls(e,r,o.keyField)}R0(e,r,(n=i.orderByFields)==null?void 0:n.map(o=>o.field));break;case"text":jb(e,r,i.text)}}function cRe(e,t){if(!t||t.length===0)return[];const i=sae(e),r=[];for(const n of t)i.has(n.name)&&r.push(n.expression);return r}function sae(e){const t=new Set;for(const i of e)if(mD(t,i.visibilityExpression),!uRe(i)){if(lRe(i))b9(t,sae(i.elements));else if(mD(t,i.editableExpression),aRe(i)){const{requiredExpression:r,valueExpression:n}=i;b9(t,[r,n])}}return t}function jb(e,t,i){R0(e,t,Vte(i))}m([w({type:String,json:{write:!0}})],Xa.prototype,"description",void 0),m([w({json:{write:!0}})],Xa.prototype,"elements",void 0),m([wt("elements")],Xa.prototype,"castElements",null),m([ke("elements",["formElements"])],Xa.prototype,"readElements",null),m([Le("elements")],Xa.prototype,"writeElements",null),m([w({type:[BOe],json:{write:!0}})],Xa.prototype,"expressionInfos",void 0),m([w({type:Boolean,json:{default:!1,write:!0}})],Xa.prototype,"preserveFieldValuesWhenHidden",void 0),m([w({type:String,json:{write:!0}})],Xa.prototype,"title",void 0),Xa=P8=m([H("esri.form.FormTemplate")],Xa);const hRe=Xa;function BG(e,t,i){if(e.hasM==null||e.hasZ)for(const r of t)for(const n of r)n.length>2&&(n[2]*=i)}function dRe(e,t,i){if(!e&&!t||!i)return;const r=sg(i);GG(e,i,r),GG(t,i,r)}function GG(e,t,i){if(e)for(const r of e)pRe(r.geometry,t,i)}function pRe(e,t,i){if(!(e!=null&&e.spatialReference)||_r(e.spatialReference,t))return;const r=sg(e.spatialReference)/i;if(r!==1){if("x"in e)e.z!=null&&(e.z*=r);else if("rings"in e)BG(e,e.rings,r);else if("paths"in e)BG(e,e.paths,r);else if("points"in e&&(e.hasM==null||e.hasZ))for(const n of e.points)n.length>2&&(n[2]*=r)}}let fRe=0,Cc=class extends Aa.LoadableMixin(x3(Oe)){constructor(t){super(t),this._idToClientGraphic=null,this.type="memory"}load(t){const i=t!=null?t.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var t;(t=this._connection)==null||t.close(),this._connection=null}get _workerGeometryType(){var i;const t=(i=this.layer)==null?void 0:i.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(t){return this.load().then(()=>this._applyEdits(t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(t,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",t?t.toJSON():null,i);V7(t,this.layer.spatialReference,r);const n=nP.fromJSON(r);if(!this._requiresClientGraphicMapping())return n;const o=this.layer.objectIdField;for(const c of n.features){const y=c.attributes[o],v=this._idToClientGraphic.get(y);v&&(c.geometry=v.geometry)}return n.geometryType=this.layer.geometryType,n}async queryFeaturesJSON(t,i={}){if(this._requiresClientGraphicMapping())throw new ne("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",t?t.toJSON():null,i);return V7(t,this.layer.spatialReference,r),r}queryFeatureCount(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,i))}queryObjectIds(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,i))}queryExtent(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",t?t.toJSON():null,i)).then(r=>({count:r.count,extent:Ut.fromJSON(r.extent)}))}querySnapping(t,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",t,i))}async _applyEdits(t){if(!this._connection)throw new ne("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const n=[],o=[];await Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);const c=I=>"objectId"in I&&I.objectId!=null?I.objectId:"attributes"in I&&I.attributes[i]!=null?I.attributes[i]:null;if(t.addFeatures&&(r=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures)for(const I of t.deleteFeatures){const $=c(I);$!=null&&n.push($)}const y=t.updateFeatures&&this._idToClientGraphic?new Map:null;if(t.updateFeatures){for(const I of t.updateFeatures)if(o.push(this._serializeFeature(I)),y){const $=c(I);$!=null&&y.set($,I)}}dRe(r?r.features:null,o,this.layer.spatialReference);const{fullExtent:v,featureEditResults:_}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:o,deletes:n});return this.fullExtent=v,r&&r.finish(_.uidToObjectId),this._updateClientGraphicIds(y,_),this._createEditsResult(_)}async _prepareClientMapping(t,i){if(this._layerOrSourceGeometryType!=="mesh"||t==null)return;const r=[];for(const{geometry:n}of t)n==null||n.type!=="mesh"||n.hasExtent||n.loaded||r.push(n.load({signal:i}));r.length&&await Promise.all(r)}_updateClientGraphicIds(t,i){if(this._idToClientGraphic){if(t)for(const r of i.updateResults){if(!r.success)continue;const n=t.get(r.objectId);n!=null&&this._addIdToClientGraphic(n)}for(const r of i.deleteResults)r.success&&this._idToClientGraphic.delete(r.objectId)}}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const i=t.success===!0?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:i?new ne("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(t){const i=new Map,r=new Array(t.length);let n=null;for(let c=0;c<t.length;c++){const y=t[c],v=this._serializeFeature(y);n||y.geometry==null||(n=y.geometry.type),r[c]=v,i.set(`${v.uid}`,y)}const o=this;return{features:r,inferredGeometryType:n,finish(c){const y=o.sourceJSON.objectIdField;for(const v in c){const _=c[v],I=i.get(v);I&&(I.attributes||(I.attributes={}),_===-1?delete I.attributes[y]:I.attributes[y]=_,o._addIdToClientGraphic(I))}}}}_addIdToClientGraphic(t){var n;if(!this._idToClientGraphic)return;const i=this.sourceJSON.objectIdField,r=(n=t.attributes)==null?void 0:n[i];r!=null&&this._idToClientGraphic.set(r,t)}get _layerOrSourceGeometryType(){var t,i;return((t=this.layer)==null?void 0:t.geometryType)??((i=this.sourceJSON)==null?void 0:i.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(t){return this._geometryTypeRequiresClientGraphicMapping(t.type)}_geometryTypeRequiresClientGraphicMapping(t){return t==="mesh"||t==="multipatch"||t==="extent"}_serializeFeature(t){const{attributes:i}=t,r=this._geometryForSerialization(t),n=(fRe++).toString();return r?{uid:n,geometry:r.toJSON(),attributes:i}:{uid:n,attributes:i}}_geometryForSerialization(t){const{geometry:i}=t;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?Os.fromExtent(i.extent):null:i}async _startWorker(t){this._connection=await l2e("MemorySourceWorker",{strategy:we("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:this});const{fields:i,spatialReference:r,objectIdField:n,hasM:o,hasZ:c,timeInfo:y,dateFieldsTimeZone:v}=this.layer,_=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,t);const I=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",R=>{_e.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),R.preventDefault()}));const $={features:I.features,fields:i==null?void 0:i.map(R=>R.toJSON()),geometryType:zD.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&o,hasZ:this._layerOrSourceGeometryType==="mesh"||c,objectIdField:n,spatialReference:_?null:r&&r.toJSON(),timeInfo:(y==null?void 0:y.toJSON())??null,dateFieldsTimeZone:v},A=await this._connection.invoke("load",$,{signal:t});for(const R of A.warnings)_e.getLogger(this.layer).warn("#load()",`${R.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:R});A.featureErrors.length&&_e.getLogger(this.layer).warn("#load()",`Encountered ${A.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:A.featureErrors});const k=A.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(I.inferredGeometryType)&&(k.geometryType=zD.toJSON(I.inferredGeometryType)),this.sourceJSON=k,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),I.finish(A.assignedObjectIds)}};m([MO({Type:er,ensureType:qi(er)})],Cc.prototype,"itemType",void 0),m([w()],Cc.prototype,"type",void 0),m([w({constructOnly:!0})],Cc.prototype,"layer",void 0),m([w({readOnly:!0})],Cc.prototype,"_workerGeometryType",null),m([w()],Cc.prototype,"sourceJSON",void 0),Cc=m([H("esri.layers.graphics.sources.MemorySource")],Cc);function yRe(e){return"portalItem"in e}const mRe=e=>{let t=class extends e{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):yRe(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return m([w({type:String})],t.prototype,"apiKey",null),t=m([H("esri.layers.mixins.APIKeyMixin")],t),t},gRe=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=np(this.url);if(i!=null&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",M4e(i,_e.getLogger(this)))}};return m([w()],t.prototype,"title",null),m([w({type:String})],t.prototype,"url",null),t=m([H("esri.layers.mixins.ArcGISService")],t),t},vRe={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}},qG={read:{reader:N2},write:{allowNull:!0,writer:F2}},wRe={json:{read:!1,write:!1,origins:{"web-map":qG,"portal-item":qG}}},oae=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return m([w(vRe)],t.prototype,"blendMode",void 0),m([w(wRe)],t.prototype,"effect",void 0),t=m([H("esri.layers.mixins.BlendLayer")],t),t},bRe=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return m([w({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],t.prototype,"customParameters",void 0),t=m([H("esri.layers.mixins.CustomParametersMixin")],t),t},N8=zMe(),aae=new Map,lae=new Map;async function Oit(e,t,i){if(!e||!i)return!1;if(!t)return!0;const r=new URL(e).host;let n=aae.get(r);if(!n){const o=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");n=(await Et(o,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return n===t}async function HG(e,t,i=!1){var o,c,y;if(!e||!t)return!0;const r=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),n=(o=lae.get(r))==null?void 0:o.entries();if(n){for(const[v,_]of n)if(_.name===t){const I=!((c=_.stack)!=null&&c.hasForwardEdits());if(!I&&i){const[{deleteForwardEdits:$},{default:A}]=await Promise.all([de(()=>import("./deleteForwardEdits-BtlEFyX6.js"),[],import.meta.url),de(()=>import("./DeleteForwardEditsParameters-5HODWB43.js"),[],import.meta.url)]),k=await $(r,v,new A({sessionId:N8,moment:_.moment}));return k.success&&((y=_.stack)==null||y.clearForwardEdits()),k.success}return I}}return!0}function fx(e,t){var n;if(!e)return!1;const i=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),r=(n=lae.get(i))==null?void 0:n.entries();if(r){for(const[o,c]of r)if(c.name===t)return c.lockType==="edit"}return!1}const SP=new qo.EventEmitter;function uae(e){return SP.on("apply-edits",new WeakRef(e))}function cae(e){return SP.on("update-moment",new WeakRef(e))}function WG(e,t,i=null,r=!1){const n=Vo();return r=t==null||r,SP.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:i,mayReceiveServiceEdits:r,result:n.promise}),n}const hae=Symbol();function Rit(e){return e!=null&&typeof e=="object"&&hae in e}function Rv(e){return e!=null&&typeof e=="object"&&"gdbVersion"in e}function zb(e,t,i){const r=new URL(e).host,n=aae.get(r),o=c=>!c||c===n;return o(t)&&o(i)||t===i}const _Re=e=>{var t;let i=class extends e{constructor(...r){super(...r),this[t]=!0,this._applyEditsHandler=n=>{const{serviceUrl:o,layerId:c,gdbVersion:y,mayReceiveServiceEdits:v,result:_}=n,I=o===this.url,$=c!=null&&this.layerId!=null&&c===this.layerId,A=Rv(this),k=Rv(this)&&zb(o,y,this.gdbVersion);if(!I||A&&!k||!$&&!v)return;const R=_.then(N=>{var z;if(this.lastEditsEventDate=new Date,$&&(N.addedFeatures.length||N.updatedFeatures.length||N.deletedFeatures.length||N.addedAttachments.length||N.updatedAttachments.length||N.deletedAttachments.length))return this.emit("edits",le(N)),N;const D=(z=N.editedFeatures)==null?void 0:z.find(({layerId:U})=>U===this.layerId);if(D){const{adds:U,updates:W,deletes:Q}=D.editedFeatures,K={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:U?U.map(({attributes:ee})=>({objectId:this.objectIdField&&ee[this.objectIdField],globalId:this.globalIdField&&ee[this.globalIdField]})):[],deletedFeatures:Q?Q.map(({attributes:ee})=>({objectId:this.objectIdField&&ee[this.objectIdField],globalId:this.globalIdField&&ee[this.globalIdField]})):[],updatedFeatures:W?W.map(({current:{attributes:ee}})=>({objectId:this.objectIdField&&ee[this.objectIdField],globalId:this.globalIdField&&ee[this.globalIdField]})):[],editedFeatures:le(N.editedFeatures),exceededTransferLimit:!1,historicMoment:le(N.historicMoment)};return this.emit("edits",K),K}const j={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:le(N.editedFeatures),exceededTransferLimit:!1,historicMoment:le(N.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(o,y,j.historicMoment)&&this.emit("edits",j),j}).then(N=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(o,y,N.historicMoment)&&(this.historicMoment=N.historicMoment),N));this.emit("apply-edits",{result:R})},this._updateMomentHandler=n=>{const{serviceUrl:o,gdbVersion:c,moment:y}=n,v=o===this.url,_=Rv(this),I=Rv(this)&&zb(o,c,this.gdbVersion),$=Rv(this)&&!zb(o,this.gdbVersion,null);v&&_&&I&&$&&"historicMoment"in this&&this.historicMoment!==y&&(this.historicMoment=y)},this.when().then(()=>{this.addHandles(uae(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(cae(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(r,n,o){return"historicMoment"in this&&this.historicMoment!==o&&fx(r,n)}};return t=hae,m([w()],i.prototype,"lastEditsEventDate",void 0),i=m([H("esri.layers.mixins.EditBusLayer")],i),i};var F8;const jE=new ft({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),zE=new ft({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let iu=F8=class extends be{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:r,timeExtent:n,objectIds:o,units:c,distance:y}=this;return new ys({geometry:le(i),objectIds:le(o),spatialRelationship:r,timeExtent:le(n),where:t,units:c,distance:y,...e})}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:r,objectIds:n,units:o,distance:c}=this;return new F8({geometry:le(t),objectIds:le(n),spatialRelationship:i,timeExtent:le(r),where:e,units:o,distance:c})}};m([w({type:String,json:{write:!0}})],iu.prototype,"where",void 0),m([w({types:q0,json:{write:!0}})],iu.prototype,"geometry",void 0),m([w({type:jE.apiValues,json:{name:"spatialRel",read:{reader:jE.read},write:{allowNull:!1,writer:jE.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],iu.prototype,"spatialRelationship",void 0),m([w({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],iu.prototype,"distance",void 0),m([w({type:[Number],json:{write:!0}})],iu.prototype,"objectIds",void 0),m([w({type:zE.apiValues,json:{read:zE.read,write:{writer:zE.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],iu.prototype,"units",void 0),m([w({type:rn,json:{write:!0}})],iu.prototype,"timeExtent",void 0),iu=F8=m([H("esri.layers.support.FeatureFilter")],iu);const SRe=iu;var D8;const JG={read:{reader:N2},write:{writer:F2,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},ZG={read:{reader:N2},write:{writer:F2,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},KG={name:"showExcludedLabels",default:!0};let Sf=D8=class extends be{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var r,n;const i=super.write(e,t);if(t!=null&&t.origin){if(i.filter){const o=Object.keys(i.filter);if(o.length>1||o[0]!=="where")return(r=t.messages)==null||r.push(new ne("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in i)return(n=t.messages)==null||n.push(new ne("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return i}clone(){return new D8({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};m([w({type:SRe,json:{write:{allowNull:!0,writer(e,t,i,r){const n=e==null?void 0:e.write({},r);n&&Object.keys(n).length!==0?Qr(i,n,t):Qr(i,null,t)}}}})],Sf.prototype,"filter",void 0),m([w({json:{read:N2,write:{writer:F2,allowNull:!0},origins:{"web-map":JG,"portal-item":JG}}})],Sf.prototype,"includedEffect",void 0),m([w({json:{read:N2,write:{writer:F2,allowNull:!0},origins:{"web-map":ZG,"portal-item":ZG}}})],Sf.prototype,"excludedEffect",void 0),m([w({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":KG,"portal-item":KG}}})],Sf.prototype,"excludedLabelsVisible",void 0),Sf=D8=m([H("esri.layers.support.FeatureEffect")],Sf);const xRe=Sf,YG={write:{allowNull:!0}},IRe={type:xRe,json:{origins:{"web-map":YG,"portal-item":YG}}},TRe=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return m([w(IRe)],t.prototype,"featureEffect",void 0),t=m([H("esri.layers.mixins.FeatureEffectLayer")],t),t};var j8;let Jw=j8=class extends be{constructor(e){super(e)}async collectRequiredFields(e,t){return gs(e,t,this.expression)}clone(){return new j8({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};m([w({type:String,json:{write:!0}})],Jw.prototype,"expression",void 0),m([w({type:String,json:{write:!0}})],Jw.prototype,"title",void 0),Jw=j8=m([H("esri.symbols.support.FeatureExpressionInfo")],Jw);const XG=Jw;function Pit(e){return 1/(uP[e]||1)}function $Re(){const e=Object.keys(uP);return KZ(e,"decimal-degrees"),e.sort(),e}const ERe=$Re();var z8;const aS=nn()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),QG=new ft({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let yc=z8=class extends be{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,i,r){t[i]=e.write({},r),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new z8({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&fye(this.featureExpressionInfo,e.featureExpressionInfo)}};m([w({type:XG,json:{write:!0}})],yc.prototype,"featureExpressionInfo",void 0),m([ke("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],yc.prototype,"readFeatureExpressionInfo",null),m([Le("featureExpressionInfo",{featureExpressionInfo:{type:XG},"featureExpression.value":{type:[0]}})],yc.prototype,"writeFeatureExpressionInfo",null),m([w({type:aS.apiValues,nonNullable:!0,json:{type:aS.jsonValues,read:aS.read,write:{writer:aS.write,isRequired:!0}}})],yc.prototype,"mode",null),m([w({type:Number,json:{write:!0}})],yc.prototype,"offset",void 0),m([w({type:ERe,json:{type:String,read:QG.read,write:QG.write}})],yc.prototype,"unit",null),yc=z8=m([H("esri.symbols.support.ElevationInfo")],yc);const dae=yc;let gm=class extends be{constructor(t){super(t),this.description=null,this.label=null,this.type=null}};m([w({type:String,json:{write:!0}})],gm.prototype,"description",void 0),m([w({type:String,json:{write:!0}})],gm.prototype,"label",void 0),m([w()],gm.prototype,"type",void 0),gm=m([H("esri.tables.elements.AttributeTableElement")],gm);const wg=gm;var V8;let Zw=V8=class extends wg{constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return new V8({description:this.description,displayType:this.displayType,label:this.label})}};m([w({type:["auto"],json:{write:!0}})],Zw.prototype,"displayType",void 0),m([w({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],Zw.prototype,"type",void 0),Zw=V8=m([H("esri.tables.elements.AttributeTableAttachmentElement")],Zw);const eq=Zw;var U8;let Kw=U8=class extends wg{constructor(e){super(e),this.fieldName=null,this.type="field"}clone(){return new U8({description:this.description,fieldName:this.fieldName,label:this.label})}};m([w({type:String,json:{write:!0}})],Kw.prototype,"fieldName",void 0),m([w({type:String,json:{read:!1,write:!0}})],Kw.prototype,"type",void 0),Kw=U8=m([H("esri.tables.elements.AttributeTableFieldElement")],Kw);const tq=Kw;var B8;let Yw=B8=class extends wg{constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return new B8({description:this.description,label:this.label,relationshipId:this.relationshipId})}};m([w({type:Number,json:{write:!0}})],Yw.prototype,"relationshipId",void 0),m([w({type:["relationship"],json:{read:!1,write:!0}})],Yw.prototype,"type",void 0),Yw=B8=m([H("esri.tables.elements.AttributeTableRelationshipElement")],Yw);const iq=Yw;function pae(e){return{typesWithGroup:{base:wg,key:"type",typeMap:{attachment:eq,field:tq,group:e,relationship:iq}},typesWithoutGroup:{base:wg,key:"type",typeMap:{attachment:eq,field:tq,relationship:iq}}}}function fae(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function yae(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>r[n.type]).map(n=>n.toJSON())}function mae(e,t,i=!0){return e?e.map(r=>Ma(i?t.typesWithGroup:t.typesWithoutGroup,r)):null}var G8;let kc=G8=class extends wg{constructor(e){super(e),this.elements=null,this.type="group"}castElements(e){return mae(e,VE,!1)}readElements(e,t){return fae(t.attributeTableElements,VE,!1)}writeElements(e,t){t.attributeTableElements=yae(e,VE,!1)}clone(){return new G8({description:this.description,elements:le(this.elements),label:this.label})}};m([w({json:{write:!0}})],kc.prototype,"elements",void 0),m([wt("elements")],kc.prototype,"castElements",null),m([ke("elements",["attributeTableElements"])],kc.prototype,"readElements",null),m([Le("elements")],kc.prototype,"writeElements",null),m([w({type:String,json:{read:!1,write:!0}})],kc.prototype,"type",void 0),kc=G8=m([H("esri.tables.elements.AttributeTableGroupElement")],kc);const VE=pae(kc),MRe=kc;var q8;const UE=pae(MRe);let Jh=q8=class extends be{constructor(e){super(e),this.elements=null,this.orderByFields=null}castElements(e){return mae(e,UE)}readElements(e,t){return fae(t.attributeTableElements,UE)}writeElements(e,t){t.attributeTableElements=yae(e,UE)}clone(){return new q8({elements:le(this.elements),orderByFields:this.orderByFields})}};m([w({json:{write:!0}})],Jh.prototype,"elements",void 0),m([wt("elements")],Jh.prototype,"castElements",null),m([ke("elements",["attributeTableElements"])],Jh.prototype,"readElements",null),m([Le("elements")],Jh.prototype,"writeElements",null),m([w({type:[Object],json:{write:!0}})],Jh.prototype,"orderByFields",void 0),Jh=q8=m([H("esri.tables.AttributeTableTemplate")],Jh);const ARe=Jh,CRe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:bn}}},xP={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},IP={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:bn}}},kRe={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:O0}}},LRe={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:bn}}},ORe={value:null,type:dae,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:bn}}};function Fit(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const gae={write:{enabled:!0,layerContainerTypes:bn},read:!0},H8={type:Number,json:{origins:{"web-document":gae,"portal-item":{write:!0}}}},RRe={...H8,json:{...H8.json,origins:{"web-document":{...gae,write:{enabled:!0,layerContainerTypes:bn,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>{var r;return i&&i.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?(r=t.layerDefinition)!=null&&r.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?T2(t.layerDefinition.drawingInfo.transparency):void 0:T2(t.drawingInfo.transparency)}}}},Dit={type:Ut,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const i=Ut.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(i.spatialReference=rt.fromJSON(t.spatialReference)),i}}}},read:!1}},PRe={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},NRe={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:bn}}},name:"layerDefinition.minScale",write:!0}},FRe={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:bn}}},name:"layerDefinition.maxScale",write:!0}},vae={json:{write:{ignoreOrigin:!0,layerContainerTypes:bn},origins:{"web-map":{read:!1,write:!1}}}},DRe={type:ARe,json:{name:"attributeTableInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}};let mc=class extends St(be){constructor(t){super(t),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};m([w()],mc.prototype,"creatorField",void 0),m([w()],mc.prototype,"creationDateField",void 0),m([w()],mc.prototype,"editorField",void 0),m([w()],mc.prototype,"editDateField",void 0),m([w()],mc.prototype,"realm",void 0),m([w(U9("dateFieldsTimeReference",!0))],mc.prototype,"timeZone",void 0),mc=m([H("esri.layers.support.EditFieldsInfo")],mc);const jRe=mc;let gu=class extends St(be){constructor(t){super(t)}};m([w({constructOnly:!0,json:{write:!0}})],gu.prototype,"name",void 0),m([w({constructOnly:!0,json:{write:!0}})],gu.prototype,"fields",void 0),m([w({constructOnly:!0,json:{write:!0}})],gu.prototype,"isAscending",void 0),m([w({constructOnly:!0,json:{write:!0}})],gu.prototype,"indexType",void 0),m([w({constructOnly:!0,json:{write:!0}})],gu.prototype,"isUnique",void 0),m([w({constructOnly:!0,json:{write:!0}})],gu.prototype,"description",void 0),gu=m([H("esri.layers.support.FeatureIndex")],gu);async function wae(e,t,i){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=bae(e));const r=zRe(e),n=e.capabilities.query.supportsPagination;t.start=0,t.num=r;let o=null;for(;;){const c=await e.source.queryFeaturesJSON(t,i);if(o==null?o=c:o.features=o.features.concat(c.features),o.exceededTransferLimit=c.exceededTransferLimit,!n||!c.exceededTransferLimit)break;t.start+=r}return o}function zRe(e){return bae(e)*VRe(e)}function VRe(e){return e.capabilities.query.maxRecordCount||2e3}function bae(e){return e.capabilities.query.supportsMaxRecordCountFactor?ys.MAX_MAX_RECORD_COUNT_FACTOR:1}const W8=new ft({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function URe(e,t,i,r){const n=await wp(e);if(await TP(e,t,r),!n.addAttachment)throw new ne(r,"Layer source does not support addAttachment capability");return n.addAttachment(t,i)}function TP(e,t,i){var o,c;const{attributes:r}=t,{objectIdField:n}=e;return(c=(o=e.capabilities)==null?void 0:o.data)!=null&&c.supportsAttachment?t?r?n&&r[n]?Promise.resolve():Promise.reject(new ne(i,`feature is missing the identifying attribute ${n}`)):Promise.reject(new ne(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new ne(i,"A feature is required to add/delete/update attachments")):Promise.reject(new ne(i,"this layer doesn't support attachments"))}async function BRe(e,t,i,r,n){const o=await wp(e);if(await TP(e,t,n),!o.updateAttachment)throw new ne(n,"Layer source does not support updateAttachment capability");return o.updateAttachment(t,i,r)}async function GRe(e,t,i){const{applyEdits:r}=await de(()=>import("./editingSupport-CBVSksVV.js"),__vite__mapDeps([206,207]),import.meta.url),n=await e.load();let o=i;return n.type==="feature"&&n.infoFor3D&&t.deleteFeatures!=null&&n.globalIdField!=null&&(o={...o,globalIdToObjectId:await cPe(n,t.deleteFeatures,n.globalIdField)}),r(n,n.source,t,i)}async function qRe(e,t,i){const{uploadAssets:r}=await de(()=>import("./editingSupport-CBVSksVV.js"),__vite__mapDeps([206,207]),import.meta.url),n=await e.load();return r(n,n.source,t,i)}async function HRe(e,t,i,r){const n=await wp(e);if(await TP(e,t,r),!n.deleteAttachments)throw new ne(r,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(t,i)}async function WRe(e,t,i){const r=(await e.load({signal:t==null?void 0:t.signal})).source;if(!r.fetchRecomputedExtents)throw new ne(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(t)}async function JRe(e,t,i,r){var k,R;t=I7.from(t),await e.load();const n=e.source,o=e.capabilities;if(!((k=o==null?void 0:o.data)!=null&&k.supportsAttachment))throw new ne(r,"this layer doesn't support attachments");const{attachmentTypes:c,objectIds:y,globalIds:v,num:_,size:I,start:$,where:A}=t;if(!((R=o==null?void 0:o.operations)!=null&&R.supportsQueryAttachments)&&((c==null?void 0:c.length)>0||(v==null?void 0:v.length)>0||(I==null?void 0:I.length)>0||_||$||A))throw new ne(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(y!=null&&y.length||v!=null&&v.length||A))throw new ne(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!n.queryAttachments)throw new ne(r,"Layer source does not support queryAttachments capability",t);return n.queryAttachments(t)}async function ZRe(e,t,i,r){const n=await wp(e);if(!n.queryObjectIds)throw new ne(r,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(ys.from(t)??e.createQuery(),i)}async function KRe(e,t,i,r){const n=await wp(e);if(!n.queryFeatureCount)throw new ne(r,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(ys.from(t)??e.createQuery(),i)}async function YRe(e,t,i,r){const n=await wp(e);if(!n.queryExtent)throw new ne(r,"Layer source does not support queryExtent capability");return n.queryExtent(ys.from(t)??e.createQuery(),i)}async function XRe(e,t,i,r){const n=await wp(e);if(!n.queryRelatedFeatures)throw new ne(r,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(vg.from(t),i)}async function QRe(e,t,i,r){const n=await wp(e);if(!n.queryRelatedFeaturesCount)throw new ne(r,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(vg.from(t),i)}async function ePe(e){const t=e.source;if(t!=null&&t.refresh)try{const{dataChanged:i,updates:r}=await t.refresh();if(r!=null&&(e.sourceJSON={...e.sourceJSON,...r},e.read(r,{origin:"service",url:e.parsedUrl})),i)return!0}catch{}if(e.definitionExpression)try{return(await lR(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function tPe(e){var c,y;const t=new ys,i=(c=e.capabilities)==null?void 0:c.data,r=(y=e.capabilities)==null?void 0:y.query;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,r&&(t.compactGeometryEnabled=r.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),i&&(i.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),i.supportsM&&e.returnM!=null&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:n,timeExtent:o}=e;return t.timeExtent=n!=null&&o!=null?o.offset(-n.value,n.unit):o||null,t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null,t}function _ae(e){const{globalIdField:t,fields:i}=e;if(t)return t;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function Sae(e){const{objectIdField:t,fields:i}=e;if(t)return t;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function iPe(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}function rPe(e,t){const{subtypes:i,subtypeField:r}=e;if(!(t!=null&&t.attributes)||!(i!=null&&i.length)||!r)return null;const n=t.attributes[r];return n==null?null:i.find(o=>o.code===n)}function nPe(e,t){var c,y;const{fieldsIndex:i,subtypeField:r}=e,{name:n,type:o}=i.get(t)??{};if(!n)return null;if((r&&((c=i.get(r))==null?void 0:c.name))===n&&((y=e.subtypes)!=null&&y.length)){const v=e.subtypes.map(_=>new Zf({code:xae(_.code,o),name:_.name}));if(v!=null&&v.length)return new JI({codedValues:v})}return null}function sPe(e,t){var o,c;const{fieldsIndex:i}=e,{name:r,type:n}=i.get(t)??{};if(!r)return null;if(("typeIdField"in e?(o=i.get(e.typeIdField))==null?void 0:o.name:null)===r&&"types"in e&&((c=e.types)!=null&&c.length)){const y=e.types.map(v=>new Zf({code:xae(v.id,n),name:v.name}));return new JI({codedValues:y})}return null}function xae(e,t){return t?Dte({type:t})&&typeof e=="number"?`${e}`:$xe({type:t})&&typeof e=="string"?Number.parseInt(e,10):e:e}async function wp(e){return(await e.load()).source}async function oPe(e,t){if(!_t||_t.findCredential(e))return;let i;try{const r=await Hee(e,t);r&&(i=await _t.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=t!=null?t.signal:null;await _t.getCredential(e,{signal:r})}catch{}}async function aPe(e,t,i){var n;const r=(n=e.parsedUrl)==null?void 0:n.path;r&&e.authenticationTriggerEvent===t&&await oPe(r,i)}function lPe(e){return!yx(e)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const BE=Cg({types:Eie});function $P(e,t){var i;if(e.defaultSymbol)return(i=e.types)!=null&&i.length?new bP({defaultSymbol:BE(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map(r=>({id:r.id,symbol:BE(r.symbol,r,t)}))}):new tv({symbol:BE(e.defaultSymbol,e,t)})}function uPe(e){var r,n,o;let t=(r=e.sourceJSON)==null?void 0:r.cacheMaxAge;if(!t)return!1;const i=(o=(n=e.editingInfo)==null?void 0:n.lastEditDate)==null?void 0:o.getTime();return i==null||(t*=1e3,Date.now()-i<t)}async function cPe(e,t,i){if(t==null)return null;const r=[],{objectIdField:n}=e;if(t.forEach(_=>{let I=null;if("attributes"in _){const{attributes:$}=_;I={globalId:$[i],objectId:$[n]!=null&&$[n]!==-1?$[n]:null}}else I={globalId:_.globalId,objectId:_.objectId!=null&&_.objectId!==-1?_.objectId:null};I.globalId!=null&&(I.objectId!=null&&I.objectId!==-1||r.push(I.globalId))}),r.length===0)return null;const o=e.createQuery();o.where=r.map(_=>`${i}='${_}'`).join(" OR "),o.returnGeometry=!1,o.outFields=[n,i],o.cacheHint=!1;const c=await sve(wae(e,o));if(!c.ok)return null;const y=new Map,v=c.value.features;for(const _ of v){const I=_.attributes[i],$=_.attributes[n];I!=null&&$!=null&&$!==-1&&y.set(VMe(I),$)}return y}function hPe(e,t,i){if(!t||!i||!e)return null;const r=i.getAttribute(t);return r==null?null:e.find(n=>{const{id:o}=n;return o!=null&&o.toString()===r.toString()})??null}function yx(e){var t;return((t=e.sourceJSON)==null?void 0:t.isMultiServicesView)||dPe(e)}function dPe(e){var t,i;return!!((i=(t=e.sourceJSON)==null?void 0:t.capabilities)!=null&&i.toLowerCase().split(",").map(r=>r.trim()).includes("map"))}function pPe(e,t,i){const r=t==null?void 0:t.queryBins;if(!r)throw new ne(i,"Layer source does not support binning");switch(e.binParameters.type){case"auto-interval":if(!r.supportsAutoInterval)throw new ne(i,"Layer source does not support auto-interval binning");break;case"date":if(!r.supportsDate)throw new ne(i,"Layer source does not support date binning");break;case"fixed-boundaries":if(!r.supportsFixedBoundaries)throw new ne(i,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!r.supportsFixedInterval)throw new ne(i,"Layer source does not support fixed-interval binning")}const n=r==null?void 0:r.supportedStatistics;if(e.outStatistics&&n){const o=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:c}of e.outStatistics){const y=o.get(c);if(y&&!n[y])throw new ne(i,`Layer source does not support ${c} statistic type`)}}}let vm=class extends St(be){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};m([w({type:String,json:{read:{source:"shapeAreaFieldName"}}})],vm.prototype,"shapeAreaField",void 0),m([w({type:String,json:{read:{source:"shapeLengthFieldName"}}})],vm.prototype,"shapeLengthField",void 0),m([w({type:String,json:{read:e=>V1e.read(e)||U1e.read(e)}})],vm.prototype,"units",void 0),vm=m([H("esri.layers.support.GeometryFieldsInfo")],vm);const fPe=vm;var J8;let wm=J8=class extends be{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new Oe}clone(){return new J8({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};m([w({type:String,json:{write:!0}})],wm.prototype,"floorField",void 0),m([w({json:{read:!1,write:!1}})],wm.prototype,"viewAllMode",void 0),m([w({json:{read:!1,write:!1}})],wm.prototype,"viewAllLevelIds",void 0),wm=J8=m([H("esri.layers.support.LayerFloorInfo")],wm);const yPe=wm,rq=new ft({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),nq=new ft({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let sa=class extends St(be){constructor(t){super(t),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};m([w({json:{read:rq.read,write:rq.write}})],sa.prototype,"cardinality",void 0),m([w({json:{read:!0,write:!0}})],sa.prototype,"composite",void 0),m([w({json:{read:!0,write:!0}})],sa.prototype,"id",void 0),m([w({json:{read:!0,write:!0}})],sa.prototype,"keyField",void 0),m([w({json:{read:!0,write:!0}})],sa.prototype,"keyFieldInRelationshipTable",void 0),m([w({json:{read:!0,write:!0}})],sa.prototype,"name",void 0),m([w({json:{read:!0,write:!0}})],sa.prototype,"relatedTableId",void 0),m([w({json:{read:!0,write:!0}})],sa.prototype,"relationshipTableId",void 0),m([w({json:{read:nq.read,write:nq.write}})],sa.prototype,"role",void 0),sa=m([H("esri.layers.support.Relationship")],sa);const mPe=sa;function Qe(e,t,i){return!!Iae(e,t,i)}function Xw(e,t,i){return Iae(e,t,i)}function Iae(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i}const gPe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function vPe(e){var i;const t=(i=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:i.map(r=>r.toLowerCase());return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function V3(e,t){var r;const i=(r=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:r.map(n=>n.toLowerCase());return!!(i!=null&&i.includes(t.toLowerCase()))}function wPe(e){var i;const t=(i=e==null?void 0:e.supportedStatisticTypes)==null?void 0:i.map(r=>r.toLowerCase());return{count:!!(t!=null&&t.includes("count")),sum:!!(t!=null&&t.includes("sum")),min:!!(t!=null&&t.includes("min")),max:!!(t!=null&&t.includes("max")),avg:!!(t!=null&&t.includes("avg")),var:!!(t!=null&&t.includes("var")),stddev:!!(t!=null&&t.includes("stddev")),percentileContinuous:!!(t!=null&&t.includes("percentile_continuous")),percentileDiscrete:!!(t!=null&&t.includes("percentile_discrete")),envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function Tae(e,t){return{analytics:bPe(e),attachment:_Pe(e),data:SPe(e),metadata:xPe(e),operations:IPe(e.capabilities,e,t),query:TPe(e,t),queryBins:MPe(e),queryRelated:$Pe(e),queryTopFeatures:EPe(e),editing:APe(e)}}function bPe(e){return{supportsCacheHint:V3(e.advancedQueryCapabilities,"queryAnalytics")}}function _Pe(e){const t=e.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:V3(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:Qe(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(r=>{const n=gPe[r.name];n&&(i[n]=!!r.isEnabled)}),i}function SPe(e){return{isVersioned:Qe(e,"isDataVersioned",!1),isBranchVersioned:Qe(e,"isDataBranchVersioned",!1),supportsAttachment:Qe(e,"hasAttachments",!1),supportsM:Qe(e,"hasM",!1),supportsZ:Qe(e,"hasZ",!1)}}function xPe(e){return{supportsAdvancedFieldProperties:Qe(e,"supportsFieldDescriptionProperty",!1)}}function IPe(e,t,i){const r=e?e.toLowerCase().split(",").map(A=>A.trim()):[],n=i?np(i):null,o=r.includes(n!=null&&n.serverType==="MapServer"?"data":"query"),c=r.includes("editing")&&!t.datesInUnknownTimezone;let y=c&&r.includes("create"),v=c&&r.includes("delete"),_=c&&r.includes("update");const I=r.includes("changetracking"),$=t.advancedQueryCapabilities;return c&&!(y||v||_)&&(y=v=_=!0),{supportsCalculate:Qe(t,"supportsCalculate",!1),supportsTruncate:Qe(t,"supportsTruncate",!1),supportsValidateSql:Qe(t,"supportsValidateSql",!1),supportsAdd:y,supportsDelete:v,supportsEditing:c,supportsChangeTracking:I,supportsQuery:o,supportsQueryAnalytics:Qe($,"supportsQueryAnalytic",!1),supportsQueryAttachments:Qe($,"supportsQueryAttachments",!1),supportsQueryBins:Qe($,"supportsQueryBins",!1),supportsQueryTopFeatures:Qe($,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Qe(t,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:_,supportsExceedsLimitStatistics:Qe(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:Qe(t,"supportsAsyncConvert3D",!1)}}function TPe(e,t){const i=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,n=e.archivingInfo,o=e.currentVersion,c=t==null?void 0:t.includes("MapServer"),y=!c||o>=we("mapserver-pbf-version-support"),v=Wie(t),_=new Set((e.supportedQueryFormats??"").split(",").map(I=>I.toLowerCase().trim()));return{maxRecordCount:Xw(e,"maxRecordCount",void 0),maxRecordCountFactor:Xw(e,"maxRecordCountFactor",void 0),standardMaxRecordCount:Xw(e,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:vPe(i),supportsCacheHint:Qe(i,"supportsQueryWithCacheHint",!1)||V3(i,"query"),supportsCentroid:Qe(i,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:v,supportsDefaultSpatialReference:Qe(i,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:Qe(i,"supportsDisjointSpatialRel",!1),supportsDistance:Qe(i,"supportsQueryWithDistance",!1),supportsDistinct:Qe(i,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:Qe(i,"supportsReturningQueryExtent",!1),supportsFormatPBF:y&&_.has("pbf"),supportsFullTextSearch:Qe(i,"supportsFullTextSearch",!1),supportsGeometryProperties:Qe(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:Qe(i,"supportsHavingClause",!1),supportsHistoricMoment:Qe(n,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:Qe(i,"supportsMaxRecordCountFactor",!1),supportsOrderBy:Qe(i,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:Qe(i,"supportsPagination",!1),supportsPercentileStatistics:Qe(i,"supportsPercentileStatistics",!1),supportsQuantization:Qe(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Qe(e,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:Qe(r,"allowAnonymousToQuery",!0),supportsQueryByOthers:Qe(r,"allowOthersToQuery",!0),supportsQueryGeometry:Qe(e,"supportsReturningQueryGeometry",!1),supportsResultType:Qe(i,"supportsQueryWithResultType",!1),supportsSpatialAggregationStatistics:Qe(i,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:Qe(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Qe(e,"useStandardizedQueries",!1),supportsStatistics:Qe(i,"supportsStatistics",e.supportsStatistics),supportsTopFeaturesQuery:Qe(i,"supportsTopFeaturesQuery",!1),tileMaxRecordCount:Xw(e,"tileMaxRecordCount",void 0)}}function $Pe(e){const t=e.advancedQueryCapabilities,i=Qe(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Qe(t,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:V3(t,"queryRelated")}}function EPe(e){return{supportsCacheHint:V3(e.advancedQueryCapabilities,"queryTopFilter")}}function MPe(e){const t=e?e.queryBinsCapabilities:void 0;return{supportsDate:Qe(t,"supportsDateBin",!1),supportsFixedInterval:Qe(t,"supportsFixedIntervalBin",!1),supportsAutoInterval:Qe(t,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:Qe(t,"supportsFixedBoundariesBin",!1),supportedStatistics:wPe(t)}}function APe(e){const t=e.ownershipBasedAccessControlForFeatures,i=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:Qe(e,"allowGeometryUpdates",!0),supportsGlobalId:Qe(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Qe(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Qe(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Qe(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Qe(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Qe(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Qe(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Qe(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Qe(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:Qe(i,"supportsAsyncApplyEdits",!1),zDefault:Xw(e,"zDefault",void 0)}}function Bit(e){var t;return{operations:{supportsAppend:Qe(e,"supportsAppend",!1),supportsCoverageQuery:((t=e==null?void 0:e.playbackInfo)==null?void 0:t.klv["0601"])??!1,supportsExportClip:Qe(e,"supportsExportClip",!1),supportsExportFrameset:Qe(e,"supportsExportFrameset",!1),supportsMensuration:Qe(e,"supportsMensuration",!1),supportsUpdate:Qe(e,"supportsUpdate",!1)}}}let gc=class extends St(be){constructor(t){super(t),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(t){if(!t)return null;const i={};for(const r of Object.keys(t))i[r]=ZI(t[r]);return i}writeDomains(t,i){var n;if(!t)return;const r={};for(const o of Object.keys(t))t[o]&&(r[o]=(n=t[o])==null?void 0:n.toJSON());i.domains=r}};m([w({type:Number,json:{write:!0}})],gc.prototype,"code",void 0),m([w({type:Object,json:{write:!0}})],gc.prototype,"defaultValues",void 0),m([w({json:{write:!0}})],gc.prototype,"domains",void 0),m([ke("domains")],gc.prototype,"readDomains",null),m([Le("domains")],gc.prototype,"writeDomains",null),m([w({type:String,json:{write:!0}})],gc.prototype,"name",void 0),gc=m([H("esri.layers.support.Subtype")],gc);const CPe=gc,kPe=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(Oe.ofType(gu)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=rt.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}get authenticationTriggerEvent(){var n;if(!this.url)return null;const{capabilities:i}=this;if(i){const{query:o,operations:c,editing:y}=i;if(!o.supportsQueryByOthers||!o.supportsQueryByAnonymous||c.supportsEditing&&!(y.supportsUpdateByOthers&&y.supportsUpdateByAnonymous&&y.supportsDeleteByOthers&&y.supportsDeleteByAnonymous))return"load"}if((n=this.serviceDefinitionExpression)!=null&&n.toLowerCase().includes("current_user"))return"load";if(this.userHasUpdateItemPrivileges){if(uPe(this))return"load";if(this.hasUpdateItemRestrictions)return i.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const r=this.editFieldsInfo;return(r!=null&&r.creatorField||r!=null&&r.editorField)&&(i!=null&&i.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(i,r){return Tae(r,this.url)}readEditingInfo(i,r){const{editingInfo:n}=r;return n?{lastEditDate:n.lastEditDate!=null?new Date(n.lastEditDate):null}:null}get effectiveCapabilities(){const i=this.capabilities;if(!i)return null;const r=le(i),{operations:n,editing:o}=r;return yx(this)?(this.userHasUpdateItemPrivileges&&(n.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(n.supportsAdd=n.supportsDelete=n.supportsEditing=n.supportsQuery=n.supportsUpdate=o.supportsDeleteByOthers=o.supportsGeometryUpdate=o.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&n.supportsEditing&&(n.supportsAdd=n.supportsDelete=n.supportsUpdate=o.supportsGeometryUpdate=!0),r)}readGlobalIdFieldFromService(i,r){return _ae(r)}get hasFullEditingRestrictions(){const i=this.capabilities;if(!i||yx(this))return!1;const{operations:r,editing:n}=i;return r.supportsEditing&&!(r.supportsAdd&&r.supportsDelete&&r.supportsUpdate&&n.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const i=this.capabilities;if(!i)return!1;const{operations:r,editing:n}=i;return yx(this)?!r.supportsQuery:!(r.supportsAdd&&r.supportsDelete&&r.supportsEditing&&r.supportsQuery&&r.supportsUpdate&&n.supportsDeleteByOthers&&n.supportsGeometryUpdate&&n.supportsUpdateByOthers)}readIsTableFromService(i,r){return r.type==="Table"}readMaxScale(i,r){return r.effectiveMaxScale||i||0}readMinScale(i,r){return r.effectiveMinScale||i||0}readObjectIdFieldFromService(i,r){return Sae(r)}readServiceDefinitionExpression(i,r){return r.definitionQuery||r.definitionExpression}set url(i){if(i==null)return void this._set("url",i);const r=A4e({layer:this,url:i,nonStandardUrlAllowed:!0,logger:_e.getLogger(this)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(i,r,n,o){C4e(this,i,null,r,o)}readVersion(i,r){return iPe(r)}};return m([w({readOnly:!0})],t.prototype,"authenticationTriggerEvent",null),m([w({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),m([w({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),m([ke("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),m([w(U9("dateFieldsTimeReference"))],t.prototype,"dateFieldsTimeZone",void 0),m([w({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),m([w({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),m([w({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),m([w({readOnly:!0,type:jRe})],t.prototype,"editFieldsInfo",void 0),m([w({readOnly:!0})],t.prototype,"editingInfo",void 0),m([ke("editingInfo")],t.prototype,"readEditingInfo",null),m([w({readOnly:!0})],t.prototype,"effectiveCapabilities",null),m([w((()=>{const i=le(ORe),r=i.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},i})())],t.prototype,"elevationInfo",void 0),m([w({type:yPe,json:{name:"layerDefinition.floorInfo",write:!0,origins:{"web-scene":{name:"layerDefinition.floorInfo",write:{enabled:!0,layerContainerTypes:bn}}}}})],t.prototype,"floorInfo",void 0),m([w({type:Ut,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),m([w()],t.prototype,"gdbVersion",void 0),m([w({readOnly:!0,type:fPe,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),m([w({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:W8.read}}}})],t.prototype,"geometryType",void 0),m([w({type:String})],t.prototype,"globalIdField",void 0),m([ke("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),m([w({readOnly:!0})],t.prototype,"hasFullEditingRestrictions",null),m([w({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),m([w({readOnly:!0})],t.prototype,"hasUpdateItemRestrictions",null),m([w({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),m([w({readOnly:!0,type:DI})],t.prototype,"heightModelInfo",void 0),m([w({type:Date})],t.prototype,"historicMoment",void 0),m([w({type:Oe.ofType(gu),readOnly:!0})],t.prototype,"indexes",void 0),m([w({readOnly:!0})],t.prototype,"isTable",void 0),m([ke("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),m([w({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),m([w(FRe)],t.prototype,"maxScale",void 0),m([ke("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),m([w(NRe)],t.prototype,"minScale",void 0),m([ke("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),m([w({type:String})],t.prototype,"objectIdField",void 0),m([ke("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),m([w(U9("preferredTimeReference"))],t.prototype,"preferredTimeZone",void 0),m([w({type:[mPe],readOnly:!0})],t.prototype,"relationships",void 0),m([w({type:Boolean})],t.prototype,"returnM",void 0),m([w({type:Boolean})],t.prototype,"returnZ",void 0),m([w({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),m([w({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),m([ke("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),m([w({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"serviceItemId",void 0),m([w()],t.prototype,"sourceJSON",void 0),m([w({type:rt,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),m([w({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),m([w({type:[CPe],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"subtypes",void 0),m([w({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),m([w(kRe)],t.prototype,"url",null),m([Le("url")],t.prototype,"writeUrl",null),m([w({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),m([ke("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),t=m([H("esri.layers.mixins.FeatureLayerBase")],t),t};let bm=class extends St(be){constructor(t){super(t),this.expression=null,this.title=null,this.returnType=null}};m([w({type:String,json:{write:!0}})],bm.prototype,"expression",void 0),m([w({type:String,json:{write:!0}})],bm.prototype,"title",void 0),m([w({type:String,json:{write:!0}})],bm.prototype,"returnType",void 0),bm=m([H("esri.layers.support.ExpressionInfo")],bm);const EP=bm;var Z8;let vc=Z8=class extends be{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new Z8({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:le(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};m([w({type:Boolean,json:{write:!0}})],vc.prototype,"isAutoGenerated",void 0),m([w({type:String,json:{write:!0}})],vc.prototype,"name",void 0),m([w({type:String,json:{write:!0}})],vc.prototype,"alias",void 0),m([w({type:String,json:{write:!0}})],vc.prototype,"onStatisticField",void 0),m([w({type:EP,json:{write:!0}})],vc.prototype,"onStatisticExpression",void 0),m([w({type:String,json:{write:!0}})],vc.prototype,"statisticType",void 0),vc=Z8=m([H("esri.layers.support.AggregateField")],vc);const j0=vc;let Jd=class extends be{constructor(){super(...arguments),this.type=null}};m([w({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Jd.prototype,"type",void 0),Jd=m([H("esri.layers.support.FeatureReduction")],Jd);const MP="__begin__",AP="__end__",LPe=new RegExp(MP,"ig"),OPe=new RegExp(AP,"ig"),sq=new RegExp("^"+MP,"i"),oq=new RegExp(AP+"$","i"),T4='"',RPe=T4+" + ",PPe=" + "+T4;function NPe(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function FPe(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function CP(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=NPe(e.labelExpression),t.type="conventional"),t}function DPe(e){const t=CP(e);if(!t)return null;switch(t.type){case"conventional":return K8(t.expression);case"arcade":return t.expression}return null}function jPe(e){const t=CP(e);if(!t)return null;switch(t.type){case"conventional":return VPe(t.expression);case"arcade":return $ae(t.expression)}return null}function K8(e){let t;return e?(t=Il(e,i=>MP+'$feature["'+i+'"]'+AP),t=sq.test(t)?t.replace(sq,""):T4+t,t=oq.test(t)?t.replace(oq,""):t+T4,t=t.replaceAll(LPe,RPe).replaceAll(OPe,PPe)):t='""',t}const zPe=/^\s*\{([^}]+)\}\s*$/i;function VPe(e){const t=e==null?void 0:e.match(zPe);return(t==null?void 0:t[1].trim())||null}const UPe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,BPe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,GPe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function $ae(e){if(!e)return null;let t=UPe.exec(e)||BPe.exec(e);return t?t[1]||t[3]:(t=GPe.exec(e),t?t[2]:null)}var Y8;let Zh=Y8=class extends be{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?K8(t.value):e}writeExpression(e,t,i){this.value!=null&&(e=K8(this.value)),e!=null&&(t[i]=e)}clone(){return new Y8({expression:this.expression,title:this.title,value:this.value})}};m([w({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Zh.prototype,"expression",void 0),m([ke("expression",["expression","value"])],Zh.prototype,"readExpression",null),m([Le("expression")],Zh.prototype,"writeExpression",null),m([w({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Zh.prototype,"title",void 0),m([w({json:{read:!1,write:!1}})],Zh.prototype,"value",void 0),Zh=Y8=m([H("esri.layers.support.LabelExpressionInfo")],Zh);const Eae=Zh;var X8;const lS=new ft({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function uS(e,t,i){return{enabled:!xA(i==null?void 0:i.layer)}}function Mae(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function qPe(e){return(e==null?void 0:e.type)==="map-image"}function Aae(e){var t,i;return!!qPe(e)&&!!((i=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function HPe(e){return Mae(e)||Aae(e==null?void 0:e.layer)}let yr=X8=class extends be{static evaluateWhere(e,t){const i=(r,n,o)=>{switch(n){case"=":return r==o;case"<>":return r!=o;case">":return r>o;case">=":return r>=o;case"<":return r<o;case"<=":return r<=o}return!1};try{if(e==null)return!0;const r=e.split(" ");if(r.length===3)return i(t[r[0]],r[1],r[2]);if(r.length===7){const n=i(t[r[0]],r[1],r[2]),o=r[3],c=i(t[r[4]],r[5],r[6]);switch(o){case"AND":return n&&c;case"OR":return n||c}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=jke,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){const i=t.labelExpressionInfo;if(!i||!i.value&&!i.expression)return e}writeLabelExpression(e,t,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=FPe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=$ae(this.labelExpressionInfo.expression);r&&(e="["+r+"]")}}e!=null&&(t[i]=e)}writeLabelExpressionInfo(e,t,i,r){if(e==null&&this.labelExpression!=null&&Mae(r))e=new Eae({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(r);n.expression&&(t[i]=n)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return CP(this)}getLabelExpressionArcade(){return DPe(this)}getLabelExpressionSingleField(){return jPe(this)}hash(){return JSON.stringify(this)}clone(){return new X8({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:le(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:le(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};m([w({type:String,json:{write:!0}})],yr.prototype,"name",void 0),m([w({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:uS}}}}})],yr.prototype,"allowOverrun",void 0),m([w({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:uS}}}}})],yr.prototype,"deconflictionStrategy",void 0),m([w({type:String,json:{write:{overridePolicy(e,t,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&Aae(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],yr.prototype,"labelExpression",void 0),m([ke("labelExpression")],yr.prototype,"readLabelExpression",null),m([Le("labelExpression")],yr.prototype,"writeLabelExpression",null),m([w({type:Eae,json:{write:{overridePolicy:(e,t,i)=>HPe(i)?{allowNull:!0}:{enabled:!1}}}})],yr.prototype,"labelExpressionInfo",void 0),m([Le("labelExpressionInfo")],yr.prototype,"writeLabelExpressionInfo",null),m([w({type:lS.apiValues,json:{type:lS.jsonValues,read:lS.read,write:lS.write}})],yr.prototype,"labelPlacement",void 0),m([w({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],yr.prototype,"labelPosition",void 0),m([w({type:Number})],yr.prototype,"maxScale",void 0),m([Le("maxScale")],yr.prototype,"writeMaxScale",null),m([w({type:Number})],yr.prototype,"minScale",void 0),m([Le("minScale")],yr.prototype,"writeMinScale",null),m([w({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:uS}}}}})],yr.prototype,"repeatLabel",void 0),m([w({type:Number,cast:zt,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:uS}}}}})],yr.prototype,"repeatLabelDistance",void 0),m([w({types:N9e,json:{origins:{"web-scene":{types:F9e,write:gG,default:null}},write:gG,default:null}})],yr.prototype,"symbol",void 0),m([w({type:Boolean,json:{write:!0}})],yr.prototype,"useCodedValues",void 0),m([w({type:String,json:{write:!0}})],yr.prototype,"where",void 0),yr=X8=m([H("esri.layers.support.LabelClass")],yr);const _T=yr;var Q8;let is=Q8=class extends Jd{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=zt("12px"),this.fields=[],this.renderer=null}writeFields(e,t,i){const r=e.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Qr(i,r,t)}readRenderer(e,t,i){var n;const r=(n=t.drawingInfo)==null?void 0:n.renderer;return r?q2(r,t,i)??void 0:$P(t,i)}clone(){return new Q8({fields:le(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:le(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:le(this.popupTemplate),renderer:le(this.renderer),binType:le(this.binType),size:this.size})}};m([He({binning:"binning"})],is.prototype,"type",void 0),m([He({geohash:"geohash",square:"square"}),w({type:["geohash","square"]})],is.prototype,"binType",void 0),m([w({type:Number,json:{write:!0}})],is.prototype,"fixedBinLevel",void 0),m([w({type:[_T],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],is.prototype,"labelingInfo",void 0),m([w(IP)],is.prototype,"labelsVisible",void 0),m([w({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],is.prototype,"maxScale",void 0),m([w(xP)],is.prototype,"popupEnabled",void 0),m([w({type:mp,json:{name:"popupInfo",write:!0}})],is.prototype,"popupTemplate",void 0),m([w({cast:e=>e==="auto"?e:Es(zt(e))})],is.prototype,"size",void 0),m([w({type:[j0],json:{write:!0}})],is.prototype,"fields",void 0),m([Le("fields")],is.prototype,"writeFields",null),m([w({types:vT,json:{write:{target:"drawingInfo.renderer"}}})],is.prototype,"renderer",void 0),m([ke("renderer",["drawingInfo.renderer"])],is.prototype,"readRenderer",null),is=Q8=m([H("esri.layers.support.FeatureReductionBinning")],is);const Cae=is;var ek;function aq(e){var t;return e.type==="simple"&&!((t=e.visualVariables)!=null&&t.length)}let Dr=ek=class extends be{constructor(e){super(e),this.type="cluster",this.clusterRadius=zt("80px"),this.clusterMinSize=zt("12px"),this.clusterMaxSize=zt("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(e,t,i){var n,o;const r=(n=t.drawingInfo)==null?void 0:n.renderer;return(o=r==null?void 0:r.authoringInfo)!=null&&o.isAutoGenerated?null:r?aq(r)?null:q2(r,t,i)??void 0:$P(t,i)}readSymbol(e,t,i){var n,o;const r=(n=t.drawingInfo)==null?void 0:n.renderer;if((o=r==null?void 0:r.authoringInfo)!=null&&o.isAutoGenerated)return null;if(r&&aq(r)){const c=q2(r,t,i);return c==null?void 0:c.symbol}return null}writeSymbol(e,t,i,r){var o,c;const n=(c=(o=this.renderer)==null?void 0:o.authoringInfo)==null?void 0:c.isAutoGenerated;if(!this.renderer||n){const y=new tv({symbol:e});t.drawingInfo={renderer:y.write({},r)}}}writeFields(e,t,i){const r=e.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Qr(i,r,t)}readFields(e,t,i){return e.filter(r=>!r.isAutoGenerated).map(r=>j0.fromJSON(r))}clone(){return new ek({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:le(this.labelingInfo),labelsVisible:this.labelsVisible,fields:le(this.fields),maxScale:this.maxScale,renderer:le(this.renderer),symbol:le(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:le(this.popupTemplate)})}};m([w({type:["cluster"],readOnly:!0,json:{write:!0}})],Dr.prototype,"type",void 0),m([w({cast:e=>e==="auto"?e:Es(zt(e)),json:{write:!0}})],Dr.prototype,"clusterRadius",void 0),m([w({type:Number,cast:zt,json:{write:!0}})],Dr.prototype,"clusterMinSize",void 0),m([w({type:Number,cast:zt,json:{write:!0}})],Dr.prototype,"clusterMaxSize",void 0),m([w({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Dr.prototype,"maxScale",void 0),m([w(xP)],Dr.prototype,"popupEnabled",void 0),m([w({type:mp,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Dr.prototype,"popupTemplate",void 0),m([w({types:vT,json:{write:{target:"drawingInfo.renderer"}}})],Dr.prototype,"renderer",void 0),m([ke("renderer",["drawingInfo.renderer"])],Dr.prototype,"readRenderer",null),m([w({types:R9e})],Dr.prototype,"symbol",void 0),m([ke("symbol",["drawingInfo.renderer"])],Dr.prototype,"readSymbol",null),m([Le("symbol")],Dr.prototype,"writeSymbol",null),m([w({type:[_T],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Dr.prototype,"labelingInfo",void 0),m([w(IP)],Dr.prototype,"labelsVisible",void 0),m([w({type:[j0],json:{write:!0}})],Dr.prototype,"fields",void 0),m([Le("fields")],Dr.prototype,"writeFields",null),m([ke("fields")],Dr.prototype,"readFields",null),Dr=ek=m([H("esri.layers.support.FeatureReductionCluster")],Dr);const kae=Dr;var tk;let mx=tk=class extends Jd{constructor(e){super(e),this.type="selection"}clone(){return new tk}};m([w({type:["selection"]})],mx.prototype,"type",void 0),mx=tk=m([H("esri.layers.support.FeatureReductionSelection")],mx);const lq=mx,uq={key:"type",base:Jd,typeMap:{cluster:kae,binning:Cae}},WPe={types:{key:"type",base:Jd,typeMap:{selection:lq,cluster:kae,binning:Cae}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:uq},"portal-item":{types:uq},"web-scene":{types:{key:"type",base:Jd,typeMap:{selection:lq}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:bn}}}}},Sy={Base64:0,Hex:1,String:2,Raw:3},B1=8,Lae=(1<<B1)-1;function Cd(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function JPe(e){const t=[];for(let i=0,r=e.length*B1;i<r;i+=B1)t[i>>5]|=(e.charCodeAt(i/B1)&Lae)<<i%32;return t}function ZPe(e){const t=[];for(let i=0,r=32*e.length;i<r;i+=B1)t.push(String.fromCharCode(e[i>>5]>>>i%32&Lae));return t.join("")}function KPe(e){const t="0123456789abcdef",i=[];for(let r=0,n=4*e.length;r<n;r++)i.push(t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15));return i.join("")}function YPe(e){const t="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let n=0,o=4*e.length;n<o;n+=3){const c=(e[n>>2]>>n%4*8&255)<<16|(e[n+1>>2]>>(n+1)%4*8&255)<<8|e[n+2>>2]>>(n+2)%4*8&255;for(let y=0;y<4;y++)8*n+6*y>32*e.length?r.push(t):r.push(i.charAt(c>>6*(3-y)&63))}return r.join("")}function XPe(e,t){return e<<t|e>>>32-t}function ST(e,t,i,r,n,o){return Cd(XPe(Cd(Cd(t,e),Cd(r,o)),n),i)}function Hn(e,t,i,r,n,o,c){return ST(t&i|~t&r,e,t,n,o,c)}function Wn(e,t,i,r,n,o,c){return ST(t&r|i&~r,e,t,n,o,c)}function Jn(e,t,i,r,n,o,c){return ST(t^i^r,e,t,n,o,c)}function Zn(e,t,i,r,n,o,c){return ST(i^(t|~r),e,t,n,o,c)}function QPe(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let i=1732584193,r=-271733879,n=-1732584194,o=271733878;for(let c=0;c<e.length;c+=16){const y=i,v=r,_=n,I=o;i=Hn(i,r,n,o,e[c],7,-680876936),o=Hn(o,i,r,n,e[c+1],12,-389564586),n=Hn(n,o,i,r,e[c+2],17,606105819),r=Hn(r,n,o,i,e[c+3],22,-1044525330),i=Hn(i,r,n,o,e[c+4],7,-176418897),o=Hn(o,i,r,n,e[c+5],12,1200080426),n=Hn(n,o,i,r,e[c+6],17,-1473231341),r=Hn(r,n,o,i,e[c+7],22,-45705983),i=Hn(i,r,n,o,e[c+8],7,1770035416),o=Hn(o,i,r,n,e[c+9],12,-1958414417),n=Hn(n,o,i,r,e[c+10],17,-42063),r=Hn(r,n,o,i,e[c+11],22,-1990404162),i=Hn(i,r,n,o,e[c+12],7,1804603682),o=Hn(o,i,r,n,e[c+13],12,-40341101),n=Hn(n,o,i,r,e[c+14],17,-1502002290),r=Hn(r,n,o,i,e[c+15],22,1236535329),i=Wn(i,r,n,o,e[c+1],5,-165796510),o=Wn(o,i,r,n,e[c+6],9,-1069501632),n=Wn(n,o,i,r,e[c+11],14,643717713),r=Wn(r,n,o,i,e[c],20,-373897302),i=Wn(i,r,n,o,e[c+5],5,-701558691),o=Wn(o,i,r,n,e[c+10],9,38016083),n=Wn(n,o,i,r,e[c+15],14,-660478335),r=Wn(r,n,o,i,e[c+4],20,-405537848),i=Wn(i,r,n,o,e[c+9],5,568446438),o=Wn(o,i,r,n,e[c+14],9,-1019803690),n=Wn(n,o,i,r,e[c+3],14,-187363961),r=Wn(r,n,o,i,e[c+8],20,1163531501),i=Wn(i,r,n,o,e[c+13],5,-1444681467),o=Wn(o,i,r,n,e[c+2],9,-51403784),n=Wn(n,o,i,r,e[c+7],14,1735328473),r=Wn(r,n,o,i,e[c+12],20,-1926607734),i=Jn(i,r,n,o,e[c+5],4,-378558),o=Jn(o,i,r,n,e[c+8],11,-2022574463),n=Jn(n,o,i,r,e[c+11],16,1839030562),r=Jn(r,n,o,i,e[c+14],23,-35309556),i=Jn(i,r,n,o,e[c+1],4,-1530992060),o=Jn(o,i,r,n,e[c+4],11,1272893353),n=Jn(n,o,i,r,e[c+7],16,-155497632),r=Jn(r,n,o,i,e[c+10],23,-1094730640),i=Jn(i,r,n,o,e[c+13],4,681279174),o=Jn(o,i,r,n,e[c],11,-358537222),n=Jn(n,o,i,r,e[c+3],16,-722521979),r=Jn(r,n,o,i,e[c+6],23,76029189),i=Jn(i,r,n,o,e[c+9],4,-640364487),o=Jn(o,i,r,n,e[c+12],11,-421815835),n=Jn(n,o,i,r,e[c+15],16,530742520),r=Jn(r,n,o,i,e[c+2],23,-995338651),i=Zn(i,r,n,o,e[c],6,-198630844),o=Zn(o,i,r,n,e[c+7],10,1126891415),n=Zn(n,o,i,r,e[c+14],15,-1416354905),r=Zn(r,n,o,i,e[c+5],21,-57434055),i=Zn(i,r,n,o,e[c+12],6,1700485571),o=Zn(o,i,r,n,e[c+3],10,-1894986606),n=Zn(n,o,i,r,e[c+10],15,-1051523),r=Zn(r,n,o,i,e[c+1],21,-2054922799),i=Zn(i,r,n,o,e[c+8],6,1873313359),o=Zn(o,i,r,n,e[c+15],10,-30611744),n=Zn(n,o,i,r,e[c+6],15,-1560198380),r=Zn(r,n,o,i,e[c+13],21,1309151649),i=Zn(i,r,n,o,e[c+4],6,-145523070),o=Zn(o,i,r,n,e[c+11],10,-1120210379),n=Zn(n,o,i,r,e[c+2],15,718787259),r=Zn(r,n,o,i,e[c+9],21,-343485551),i=Cd(i,y),r=Cd(r,v),n=Cd(n,_),o=Cd(o,I)}return[i,r,n,o]}function Oae(e,t=Sy.Hex){const i=t||Sy.Base64,r=QPe(JPe(e),e.length*B1);switch(i){case Sy.Raw:return r;case Sy.Hex:return KPe(r);case Sy.String:return ZPe(r);case Sy.Base64:return YPe(r)}}const eNe=()=>_e.getLogger("esri.views.2d.layers.support.clusterUtils");we.add("esri-cluster-arcade-enabled",!0);const tNe=we("esri-cluster-arcade-enabled"),iNe=new Set(["simple-line","simple-fill","picture-fill"]);function cq(e,t){let i=t.clone();if(!rNe(i))return i;if(t.getSymbols().some(r=>iNe.has(r.type))&&(i=new tv({symbol:new fs})),i.authoringInfo||(i.authoringInfo=new aP),i.authoringInfo.isAutoGenerated=!0,"visualVariables"in i){const r=(i.visualVariables||[]).filter(n=>n.valueExpression!=="$view.scale");r.forEach(n=>{n.type==="rotation"?n.field?n.field=Mp(e,n.field,"avg_angle","number"):n.valueExpression&&(n.field=Pv(e,n.valueExpression,"avg_angle","number"),n.valueExpression=null):n.normalizationField?(n.field=Mp(e,n.field,"avg_norm","number",n.normalizationField),n.normalizationField=null):n.field?n.field=Mp(e,n.field,"avg","number"):n.valueExpression&&(n.field=Pv(e,n.valueExpression,"avg","number"),n.valueExpression=null)}),i.visualVariables=r}switch(i.type){case"simple":break;case"pie-chart":for(const r of i.attributes)r.field?r.field=Mp(e,r.field,"sum","number"):r.valueExpression&&(r.field=Pv(e,r.valueExpression,"sum","number"),r.valueExpression=null);break;case"unique-value":i.field?i.field=Mp(e,i.field,"mode","string"):i.valueExpression&&(i.field=Pv(e,i.valueExpression,"mode","string"),i.valueExpression=null);break;case"class-breaks":i.normalizationField?(i.field=Mp(e,i.field,"avg_norm","number",i.normalizationField),i.normalizationField=null):i.field?i.field=Mp(e,i.field,"avg","number"):i.valueExpression&&(i.field=Pv(e,i.valueExpression,"avg","number"),i.valueExpression=null)}return i}const rNe=e=>{const t=i=>eNe().error(new ne("Unsupported-renderer",i,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const i=e.normalizationType;if(i!=="field")return t(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!tNe){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function nNe(e,t,i){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const r=i,n="field",o=t.toLowerCase()+",norm:"+n+","+r.toLowerCase();return"cluster_avg_"+Oae(o)}}}function Pv(e,t,i,r){const n=Oae(t),o=i==="mode"?`cluster_type_${n}`:i==="sum"?`cluster_sum_${n}`:`cluster_avg_${n}`;return e.some(c=>c.name===o)||e.push(new j0({name:o,isAutoGenerated:!0,onStatisticExpression:new EP({expression:t,returnType:r}),statisticType:i})),o}function Mp(e,t,i,r,n){if(t==="cluster_count"||e.some(c=>c.name===t))return t;const o=nNe(i,t,n);return e.some(c=>c.name===o)||(i==="avg_norm"?e.push(new j0({name:o,isAutoGenerated:!0,onStatisticExpression:new EP({expression:`$feature.${t} / $feature.${n}`,returnType:r}),statisticType:"avg"})):e.push(new j0({name:o,isAutoGenerated:!0,onStatisticField:t,statisticType:i}))),o}const sNe=e=>{let t=class extends e{constructor(...i){super(...i),this.addHandles(ge(()=>this.renderer,()=>{if(this.featureReduction){const r=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",r)}},$l))}set featureReduction(i){const r=this._normalizeFeatureReduction(i);this._set("featureReduction",r)}set renderer(i){}_withClusterVariable(i,r,n){const o=i.clone();return"visualVariables"in o&&(o.visualVariables||(o.visualVariables=[]),o.visualVariables.some(c=>c.type==="size")||o.visualVariables.push(new Xg({field:"cluster_count",stops:[new ex({value:1}),new ex({useMinValue:!0,size:r}),new ex({useMaxValue:!0,size:n})]}))),o}_normalizeFeatureReduction(i){var $;if((i==null?void 0:i.type)!=="cluster")return i;const r=i.clone(),n=[new j0({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],o=(r.fields??[]).filter(A=>!A.isAutoGenerated),c=i.renderer&&!(($=i.renderer.authoringInfo)!=null&&$.isAutoGenerated),{clusterMinSize:y,clusterMaxSize:v}=r;if(c){r.fields=[...n,...o];const A=this._withClusterVariable(r.renderer,y,v);return r.effectiveFeatureRenderer=A,r.effectiveClusterRenderer=A,r}if(i.symbol){if(r.fields=[...n,...o],r.renderer=null,!this.renderer)return r.effectiveFeatureRenderer=null,r.effectiveClusterRenderer=null,r;const A=cq(n,this.renderer),k=this._withClusterVariable(A,y,v),R="visualVariables"in k&&k.visualVariables?k.visualVariables:[],N=new tv({symbol:i.symbol,visualVariables:R});return r.fields=[...n,...o],r.effectiveFeatureRenderer=k,r.effectiveClusterRenderer=N,r}if(!this.renderer)return i;const _=cq(n,this.renderer);r.fields=[...n,...o],r.renderer=_;const I=this._withClusterVariable(_,y,v);return r.effectiveFeatureRenderer=I,r.effectiveClusterRenderer=I,r}};return m([w(WPe)],t.prototype,"featureReduction",null),t=m([H("esri.layers.mixins.FeatureReductionLayer")],t),t},hq={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},dq={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},pq={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},oNe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":hq,"web-map/basemap":dq,"web-map/tables":pq,"link-chart/operational-layers":{...hq,LinkChartLayer:!0},"link-chart/basemap":dq,"link-chart/tables":pq,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0}},aNe=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(i,r,n){var o;return((o=n==null?void 0:n.portalItem)==null?void 0:o.type)==="Group Layer"?void 0:i}writeListMode(i,r,n,o){(o&&o.layerContainerType==="ground"||i&&mme(this,n,{},o))&&(r[n]=i)}writeOperationalLayerType(i,r,n,o){i&&(o==null?void 0:o.layerContainerType)!=="tables"&&(r.layerType=i)}writeTitle(i,r){r.title=i??"Layer"}readTimeExtent(i){return i?rn.fromArray(i):null}writeTimeExtent(i,r,n,o){i&&o.layerContainerType!=="tables"&&(i.isEmpty?o!=null&&o.messages&&o.messages.push(new ne("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):r[n]=i.toArray())}read(i,r){r&&(r.layer=this),oY(this,i,n=>super.read(i,n),r)}write(i,r){var c,y;if(!this.persistenceEnabled&&!(r!=null&&r.ignorePersistenceEnabled))return null;if(r!=null&&r.origin){const v=`${r.origin}/${r.layerContainerType||"operational-layers"}`,_=oNe[v];let I=!!(_!=null&&_[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&v==="web-scene/operational-layers"&&(I=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&v==="web-map/operational-layers"&&(I=!1),!I)return(c=r.messages)==null||c.push(new ne("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${v}'`,{layer:this})),null}const n=super.write(i,{...r,layer:this}),o=!!r&&!!r.messages&&!!r.messages.filter(v=>v instanceof ne&&v.name==="web-document-write:property-required").length;return hI(n==null?void 0:n.url)?((y=r==null?void 0:r.messages)==null||y.push(new ne("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&o?null:n}beforeSave(){}};return m([w({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),m([ke("id",["id"])],t.prototype,"readId",null),m([w(vae)],t.prototype,"listMode",void 0),m([Le("listMode")],t.prototype,"writeListMode",null),m([w({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:bn}}}}})],t.prototype,"operationalLayerType",void 0),m([Le("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),m([w(H8)],t.prototype,"opacity",void 0),m([w({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),m([w({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),m([Le("title"),Le(["web-scene"],"title")],t.prototype,"writeTitle",null),m([w({type:rn,json:{origins:{"web-scene":{write:{layerContainerTypes:bn}}}}})],t.prototype,"visibilityTimeExtent",void 0),m([ke("visibilityTimeExtent")],t.prototype,"readTimeExtent",null),m([Le(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[Ct,Ag]]}})],t.prototype,"writeTimeExtent",null),m([w({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:bn}}},name:"visibility",write:!0}})],t.prototype,"visible",void 0),t=m([H("esri.layers.mixins.OperationalLayer")],t),t};var ik;const cS=new ft({asc:"ascending",desc:"descending"});let _m=ik=class extends be{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new ik({field:this.field,valueExpression:this.valueExpression,order:this.order})}};m([w({type:String,json:{write:!0}})],_m.prototype,"field",void 0),m([w({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],_m.prototype,"valueExpression",void 0),m([w({type:cS.apiValues,json:{type:cS.jsonValues,read:cS.read,write:cS.write}})],_m.prototype,"order",void 0),_m=ik=m([H("esri.layers.support.OrderByInfo")],_m);const Rae=_m;function lNe(e,t,i){if(!e)return null;const r=e.find(o=>!!o.field);if(!r)return null;const n=new Rae;return n.read(r,i),[n]}function uNe(e,t,i,r){const n=e.find(o=>!!o.field);n&&Qr(i,[n.toJSON()],t)}const cNe={type:[Rae],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:lNe},write:{writer:uNe}}},hNe=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return m([w(cNe)],t.prototype,"orderBy",void 0),t=m([H("esri.layers.mixins.OrderedLayer")],t),t};async function dNe(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return r1(e);const i=rt.WGS84;return await EI(t,i),sh(e,i)}function pNe(e,t){if(!Pae(e,t)){const i=e.typeKeywords;i?i.push(t):e.typeKeywords=[t]}}function Pae(e,t){var i;return!!((i=e.typeKeywords)!=null&&i.includes(t))}function Wit(e){return Pae(e,Nae.HOSTED_SERVICE)}function fNe(e,t){const i=e.typeKeywords;if(i){const r=i.indexOf(t);r>-1&&i.splice(r,1)}}function Jit(e,t,i){i?pNe(e,t):fNe(e,t)}async function Zit(e){const t=e.clone().normalize();let i;if(t.length>1)for(const r of t)i?r.width>i.width&&(i=r):i=r;else i=t[0];return dNe(i)}const Nae={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer"};function fq(e){var v;const{portal:t,isOrgItem:i,itemControl:r}=e,n=(v=t.user)==null?void 0:v.privileges;let o=!n||n.includes("features:user:edit"),c=!!i&&!!(n!=null&&n.includes("features:user:fullEdit"));const y=r==="update"||r==="admin";return y?c=o=!0:c&&(o=!0),{features:{edit:o,fullEdit:c},content:{updateItem:y}}}const yNe=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=ci(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,n){if(r.itemId)return new Cu({id:r.itemId,portal:n==null?void 0:n.portal})}writePortalItem(i,r){i!=null&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){var n;if((n=this.portalItem)!=null&&n.id)try{const{load:o}=await de(()=>import("./layersLoader-C5T_RXGy.js"),__vite__mapDeps([208,123,121,122,120]),import.meta.url);return Gi(r),await o({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap},r)}catch(o){throw br(o)||_e.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${o}`),o}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(bu(r),!0)))}async setUserPrivileges(i,r){if(!qt.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:n,fullEdit:o},content:{updateItem:c}}=await this._fetchUserPrivileges(i,r);this._set("userHasEditingPrivileges",n),this._set("userHasFullEditingPrivileges",o),this._set("userHasUpdateItemPrivileges",c)}catch(n){bu(n)}}async _fetchUserPrivileges(i,r){let n=this.portalItem;if(!i||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(r);const o=i===n.id;if(o&&n.portal.user)return fq(n);let c,y;if(o)c=n.portal.url;else try{c=await Hee(this.url,r)}catch($){bu($)}if(!c||!Rme(c,n.portal.url))return this._fetchFallbackUserPrivileges(r);try{const $=r!=null?r.signal:null;y=await(_t==null?void 0:_t.getCredential(`${c}/sharing`,{prompt:!1,signal:$}))}catch($){bu($)}const v=!0,_=!1,I=!1;if(!y)return{features:{edit:v,fullEdit:_},content:{updateItem:I}};try{if(o?await n.reload():(n=new Cu({id:i,portal:{url:c}}),await n.load(r)),n.portal.user)return fq(n)}catch($){bu($)}return{features:{edit:v,fullEdit:_},content:{updateItem:I}}}async _fetchFallbackUserPrivileges(i){let r=!0;try{r=await this._fetchUserHasEditingPrivileges(i)}catch(n){bu(n)}return{features:{edit:r,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const r=this.url?_t==null?void 0:_t.findCredential(this.url):null;if(!r)return!0;const n=hS.credential===r?hS.user:await this._fetchEditingUser(i);return hS.credential=r,hS.user=n,(n==null?void 0:n.privileges)==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var I,$;const r=($=(I=this.portalItem)==null?void 0:I.portal)==null?void 0:$.user;if(r)return r;const n=_t==null?void 0:_t.findServerInfo(this.url??"");if(!(n!=null&&n.owningSystemUrl))return null;const o=`${n.owningSystemUrl}/sharing/rest`,c=Cr.getDefault();if(c&&c.loaded&&Ia(c.restUrl)===Ia(o))return c.user;const y=`${o}/community/self`,v=i!=null?i.signal:null,_=await vI(Et(y,{authMode:"no-prompt",query:{f:"json"},signal:v}));return _.ok?eR.fromJSON(_.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){var c;const n=r==null?void 0:r.portal,o=((c=this.portalItem)==null?void 0:c.id)&&(this.portalItem.portal||Cr.getDefault());return n&&o&&!yY(o.restUrl,n.restUrl)?(r.messages&&r.messages.push(new ne("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return m([w({type:Cu})],t.prototype,"portalItem",null),m([ke("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),m([Le("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),m([w({clonable:!1})],t.prototype,"resourceReferences",void 0),m([w({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),m([w({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),m([w({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=m([H("esri.layers.mixins.PortalLayer")],t),t},hS={credential:null,user:null};let Qw=class extends Ve{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};m([w()],Qw.prototype,"updating",void 0),m([w()],Qw.prototype,"status",void 0),Qw=m([H("esri.layers.support.PublishingInfo")],Qw);const mNe=Qw,gNe=Symbol(),vNe=e=>{var t;let i=class extends e{constructor(){super(...arguments),this[t]=!0}get publishingInfo(){if(this.destroyed)return null;const r=this._get("publishingInfo");if(r)return r;const n=new mNe;return this._checkPublishingStatus(n),n}_checkPublishingStatus(r){let c=0;const y=async _=>{let I;r.updating=!0;try{I=await this.fetchPublishingStatus()}catch{I="unavailable"}I!=="published"&&I!=="unavailable"||(r.status==="publishing"&&this.refresh(),v.remove()),r.status=I,r.updating=!1,v.removed||(c=setTimeout(y,_,_+125))},v={removed:!1,remove(){this.removed=!0,clearTimeout(c)}};this.when().catch(()=>v.remove()),y(250),this.addHandles(v)}};return t=gNe,m([w({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=m([H("esri.layers.mixins.PublishableLayer")],i),i},kd=new Oe,Vb=new WeakMap;function wNe(e){_Ne(e)&&kd.push(new WeakRef(e))}function bNe(e){const t=kd.find(i=>i.deref()===e);t&&kd.remove(t)}function _Ne(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function Fae(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:Fae(t,e%t):0}let GE=0,dS=0;function SNe(){const e=Date.now();let t=!1;for(const i of kd){const r=i.deref();r?r.refreshInterval&&e-(Vb.get(r)??0)+5>=6e4*r.refreshInterval&&(Vb.set(r,e),r.refresh(e)):t=!0}if(t)for(let i=kd.length-1;i>=0;i--)kd.at(i).deref()||kd.removeAt(i)}YK(()=>{const e=Date.now();let t=0;for(const i of kd){const r=i.deref();r&&(t=Fae(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?Vb.get(r)||Vb.set(r,e):Vb.delete(r))}if(t!==dS){if(dS=t,clearInterval(GE),dS===0)return void(GE=0);GE=setInterval(SNe,dS)}},$l);const yq=.1,xNe=e=>{let t=class extends e{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=_l(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||wNe(this)},()=>{})}destroy(){bNe(this)}castRefreshInterval(i){return i>=yq?i:i<=0?0:yq}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){xa(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{_e.getLogger(this).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}get test(){}};return m([w({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:bn}}}}})],t.prototype,"refreshInterval",void 0),m([wt("refreshInterval")],t.prototype,"castRefreshInterval",null),m([w({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),m([w({readOnly:!0})],t.prototype,"refreshParameters",null),t=m([H("esri.layers.mixins.RefreshableLayer")],t),t},Dae=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&INe(i,r.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===i.minScale&&n.maxScale===i.maxScale?n:i}};return m([w({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),m([w({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),m([w({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=m([H("esri.layers.mixins.ScaleRangeLayer")],t),t};function INe(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const kP=nn()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let eb=class extends St(be){constructor(t){super(t),this.unit="milliseconds",this.value=0}toMilliseconds(){return bte(this.value,this.unit,"milliseconds")}};m([He(kP,{nonNullable:!0})],eb.prototype,"unit",void 0),m([w({type:Number,json:{write:!0},nonNullable:!0})],eb.prototype,"value",void 0),eb=m([H("esri.time.TimeInterval")],eb);const bg=eb;function mq(e,t){return bg.fromJSON({value:e,unit:t})}let An=class extends St(be){constructor(t){super(t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(t,i){return i.timeExtent&&Array.isArray(i.timeExtent)&&i.timeExtent.length===2?rn.fromArray(i.timeExtent):null}writeFullTimeExtent(t,i){(t==null?void 0:t.start)!=null&&t.end!=null?i.timeExtent=t.toArray():i.timeExtent=null}readInterval(t,i){return i.timeInterval&&i.timeIntervalUnits?mq(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?mq(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(t,i){i.timeInterval=(t==null?void 0:t.toJSON().value)??null,i.timeIntervalUnits=(t==null?void 0:t.toJSON().unit)??null}};m([w({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],An.prototype,"cumulative",void 0),m([w({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],An.prototype,"endField",void 0),m([w({type:rn,json:{write:{enabled:!0,allowNull:!0}}})],An.prototype,"fullTimeExtent",void 0),m([ke("fullTimeExtent",["timeExtent"])],An.prototype,"readFullTimeExtent",null),m([Le("fullTimeExtent")],An.prototype,"writeFullTimeExtent",null),m([w({type:Boolean,json:{write:!0}})],An.prototype,"hasLiveData",void 0),m([w({type:bg,json:{write:{enabled:!0,allowNull:!0}}})],An.prototype,"interval",void 0),m([ke("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],An.prototype,"readInterval",null),m([Le("interval")],An.prototype,"writeInterval",null),m([w({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],An.prototype,"startField",void 0),m([w(U9("timeReference",!0))],An.prototype,"timeZone",void 0),m([w({type:String,json:{write:{enabled:!0,allowNull:!0}}})],An.prototype,"trackIdField",void 0),m([w({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],An.prototype,"useTime",void 0),m([w({type:[Date],json:{read:!1}})],An.prototype,"stops",void 0),An=m([H("esri.layers.support.TimeInfo")],An);const jae=An,TNe={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:bn}}},$Ne=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const n=r.timeInfo.exportOptions;if(!n)return null;const o=n.timeOffset,c=kP.fromJSON(n.timeOffsetUnits);return o&&c?new bg({value:o,unit:c}):null}set timeInfo(i){Cte(i,this.fieldsIndex),this._set("timeInfo",i)}};return m([w({type:rn,json:{write:!1}})],t.prototype,"timeExtent",void 0),m([w({type:bg})],t.prototype,"timeOffset",void 0),m([ke("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),m([w({value:null,type:jae,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),m([w(TNe)],t.prototype,"useViewTime",void 0),t=m([H("esri.layers.mixins.TemporalLayer")],t),t},gq=new ft({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Kh=class extends St(be){constructor(t){super(t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};m([w({json:{write:!0}})],Kh.prototype,"name",void 0),m([w({json:{write:!0}})],Kh.prototype,"description",void 0),m([w({json:{read:gq.read,write:gq.write}})],Kh.prototype,"drawingTool",void 0),m([w({json:{write:!0}})],Kh.prototype,"prototype",void 0),m([w({json:{write:!0}})],Kh.prototype,"thumbnail",void 0),Kh=m([H("esri.layers.support.FeatureTemplate")],Kh);const LP=Kh;let wc=class extends St(be){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){const i={};for(const r of Object.keys(t))i[r]=ZI(t[r]);return i}writeDomains(t,i){var n;const r={};for(const o of Object.keys(t))t[o]&&(r[o]=(n=t[o])==null?void 0:n.toJSON());i.domains=r}};m([w({json:{write:!0}})],wc.prototype,"id",void 0),m([w({json:{write:!0}})],wc.prototype,"name",void 0),m([w({json:{write:!0}})],wc.prototype,"domains",void 0),m([ke("domains")],wc.prototype,"readDomains",null),m([Le("domains")],wc.prototype,"writeDomains",null),m([w({type:[LP],json:{write:!0}})],wc.prototype,"templates",void 0),wc=m([H("esri.layers.support.FeatureType")],wc);const zae=wc;function ENe(){return{fields:{type:[KI],value:null,set:function(e){if(e&&we("big-integer-warning-enabled")){const t=e.filter(i=>i.type==="big-integer"||i.type==="oid"&&(i.length||0)>=8);if(t.length){const i=t.map(r=>`'${r.name}'`).join(", ");_e.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${i}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return goe.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var t;const e=this._userOutFields;if(!(e!=null&&e.length))return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const i of e)((t=this.fieldsIndex)==null?void 0:t.has(i))||_e.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:e});return jI(this.fieldsIndex,e)}}}}const qE=()=>_e.getLogger("esri.layers.support.labelingInfo"),MNe=/\[([^[\]]+)\]/gi;function HE(e,t,i){return e?e.map(r=>{var o;const n=new _T;if(n.read(r,i),n.labelExpression){const c=t.fields||((o=t.layerDefinition)==null?void 0:o.fields)||this.fields;n.labelExpression=n.labelExpression.replaceAll(MNe,(y,v)=>`[${ANe(v,c)}]`)}return n}):null}function ANe(e,t){if(!t)return e;const i=e.toLowerCase();for(let r=0;r<t.length;r++){const n=t[r].name;if(n.toLowerCase()===i)return n}return e}const CNe={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function trt(e,t){const i=[];for(const r of e){const n=r.labelPlacement,o=CNe[t];if(!r.symbol)return qE().warn("No ILabelClass symbol specified."),[];if(!o)return qE().error(new ne("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),[];if(o.includes(n))i.push(r);else{const c=o[0];n&&qE().warn(`Found invalid label placement type ${n} for ${t}. Defaulting to ${c}`);const y=r.clone();y.labelPlacement=c,i.push(y)}}return i}const Sm=[];function kNe(e,t){if(Wie(e.url??""))return!0;const{wkid:i}=t;for(const r of Sm){if((e.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}Sm.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),Sm.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),Sm.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),Sm.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),Sm.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]);async function LNe(e,t,i){const r=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const n=await vI(r.populateFromStyle());if(Gi(i),n.ok===!1){const o=n.error;t!=null&&t.messages&&t.messages.push(new zo("renderer:style-reference",`Failed to create unique value renderer from style reference: ${o.message}`,{error:o,context:t})),e.clear("renderer",t==null?void 0:t.origin)}}}function ONe({displayField:e,editFieldsInfo:t,fields:i,objectIdField:r,title:n},o){if(!i)return null;const c=FNe({editFieldsInfo:t,fields:i,objectIdField:r},o);if(!c.length)return null;const y=zNe({titleBase:n,fields:i,displayField:e}),v=jNe();return new mp({title:y,content:v,fieldInfos:c})}function $4(e){var v;const{title:t,graphic:i}=e??{},{attributes:r,sourceLayer:n}=i??{},o=n&&"displayField"in n?n.displayField:null,c=o?r==null?void 0:r[o]:null,y=(v=i==null?void 0:i.getObjectId())==null?void 0:v.toString();return t||c||y||""}const RNe=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):pxe(e,t);function PNe({fields:e,ignoreFieldTypes:t,sortDisabled:i}){const r=e;return t&&(e=e.filter(n=>!t.includes(n.type))),e===r&&(e=e.slice()),i!==!0&&e.sort(NNe),e}function NNe(e,t){return e.type==="oid"?-1:t.type==="oid"?1:vq(e)?-1:vq(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function FNe(e,t){const i=t==null?void 0:t.visibleFieldNames;return PNe({fields:e.fields??[],ignoreFieldTypes:(t==null?void 0:t.ignoreFieldTypes)||VNe,sortDisabled:t==null?void 0:t.sortDisabled}).map(r=>new T3({fieldName:r.name,isEditable:dxe(r,e),label:r.alias,format:DNe(r),visible:RNe(r,{...e,visibleFieldNames:i})}))}function DNe(e){switch(e.type){case"small-integer":case"integer":case"single":return new w5({digitSeparator:!0,places:0});case"double":return new w5({digitSeparator:!0,places:2});case"string":return LA(e.name)?new w5({digitSeparator:!0,places:0}):void 0;default:return}}function jNe(){return[new P0,new fg]}function zNe(e){const t=ixe(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i??""}function vq(e){var i;return(e.name&&e.name.toLowerCase())==="name"?!0:((i=e.alias)==null?void 0:i.toLowerCase())==="name"}const VNe=["geometry","blob","raster","guid","xml"],UNe=1/255.5;var Iu;(function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"})(Iu||(Iu={}));const Tn="FeatureLayer";function pS(e,t){return new ne("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function wq(e){return e&&e instanceof Oe}const WE=ENe();function JE(e,t,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let Je=class extends kPe(sNe(TRe(vNe(_Re(oae(hNe($Ne(Dae(xNe(gRe(aNe(yNe(wT(bRe(mRe(St($2))))))))))))))))){constructor(...t){super(...t),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=rt.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=_l(async(i,r,n)=>{const{save:o,saveAs:c}=await de(()=>import("./featureLayerUtils-C6r47wVG.js"),__vite__mapDeps([209,210,211,212,213,123]),import.meta.url);switch(i){case Iu.SAVE:return o(this,r);case Iu.SAVE_AS:return c(this,n,r)}})}destroy(){var t;(t=this.source)==null||t.destroy()}normalizeCtorArgs(t,i){return typeof t=="string"?{url:t,...i}:t}load(t){var n;const i=t!=null?t.signal:null;if((n=this.portalItem)!=null&&n.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(i).then(o=>this.initLayerProperties(o))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},t).catch(bu).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const o=await this._fetchFirstValidLayerId(i);o!=null&&(this.layerId=o)}if(!this.url&&!this._hasMemorySource())throw new ne("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(i))}).then(()=>aPe(this,"load",t));return this.addResolvingPromise(r),Promise.resolve(this)}warnInvisibleDrapedSymbols(){var t,i,r;((t=this.elevationInfo)==null?void 0:t.mode)==="on-the-ground"&&((i=this.renderer)==null?void 0:i.type)==="simple"&&((r=this.renderer.symbol)==null?void 0:r.type)==="polygon-3d"&&this.renderer.symbol.symbolLayers.some(n=>n.type==="fill"&&n.material!=null&&(!n.material.color||n.material.color.a*this.opacity<UNe)&&(this.loadWarnings.push(new zo("feature-layer:invisible-draped-symbols","FeatureLayer has fully transparent symbols which will no longer render or highlight",{layer:this})),!0))}readCapabilities(t,i){return i=i.layerDefinition||i,Tae(i,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var t;return!(this.loaded&&!((t=this.capabilities)!=null&&t.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(t){this._overrideIfSome("editingEnabled",t)}readEditingEnabled(t,i){return this._readEditingEnabled(i,!1)}readEditingEnabledFromWebMap(t,i,r){return this._readEditingEnabled(i,!0,r)}writeEditingEnabled(t,i){this._writeEditingEnabled(t,i,!1)}writeEditingEnabledToWebMap(t,i,r,n){this._writeEditingEnabled(t,i,!0,n)}get effectiveEditingEnabled(){return lPe(this)}readIsTable(t,i){return(i=(i==null?void 0:i.layerDefinition)??i).type==="Table"||!i.geometryType}writeIsTable(t,i,r,n){n!=null&&n.writeLayerSchema&&Qr(r,t?"Table":"Feature Layer",i)}readGlobalIdField(t,i){return _ae(i.layerDefinition||i)}readObjectIdField(t,i){return Sae(i.layerDefinition||i)}get parsedUrl(){const t=cr(this.url);return t!=null&&(this.dynamicDataSource!=null?t.path=x0(t.path,"dynamicLayer"):this.layerId!=null&&(t.path=x0(t.path,this.layerId.toString()))),t}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(t){Tz(t,this.fieldsIndex),this._set("renderer",t)}readRenderer(t,i,r){var o;i=i.layerDefinition||i;const n=(o=i.drawingInfo)==null?void 0:o.renderer;if(n){const c=q2(n,i,r)??void 0;return c||_e.getLogger(this).error("Failed to create renderer",{rendererDefinition:i.drawingInfo.renderer,layer:this,context:r}),c}return $P(i,r)}set source(t){const i=this._get("source");i!==t&&(wq(i)&&this._resetMemorySource(i),wq(t)&&this._initMemorySource(t),this._set("source",t))}castSource(t){return t?Array.isArray(t)||t instanceof Oe?new Cc({layer:this,items:t}):t:null}readSource(t,i){const r=nP.fromJSON(i.featureSet);return new Cc({layer:this,items:(r==null?void 0:r.features)??[]})}readTemplates(t,i){const r=i.editFieldsInfo,n=r==null?void 0:r.creatorField,o=r==null?void 0:r.editorField;return t=t==null?void 0:t.map(c=>LP.fromJSON(c)),this._fixTemplates(t,n),this._fixTemplates(t,o),t}readTitle(t,i){var o,c,y;const r=((o=i.layerDefinition)==null?void 0:o.name)??i.name,n=i.title||((c=i.layerDefinition)==null?void 0:c.title);if(r){const v=(y=this.portalItem)==null?void 0:y.title;if(this.sublayerTitleMode==="item-title")return this.url?E4e(this.url,r):r;let _=r;if(!_&&this.url){const I=np(this.url);I!=null&&(_=I.title)}return _?(this.sublayerTitleMode==="item-title-and-service-name"&&v&&v!==_&&(_=v+" - "+_),CR(_)):void 0}if(this.sublayerTitleMode==="item-title"&&n)return n}readTitleFromWebMap(t,i){var r;return i.title||((r=i.layerDefinition)==null?void 0:r.name)}readTypeIdField(t,i){let r=(i=i.layerDefinition||i).typeIdField;if(r&&i.fields){r=r.toLowerCase();const n=i.fields.find(o=>o.name.toLowerCase()===r);n&&(r=n.name)}return r}readTypes(t,i){t=(i=i.layerDefinition||i).types;const r=i.editFieldsInfo,n=r==null?void 0:r.creatorField,o=r==null?void 0:r.editorField;return t==null?void 0:t.map(c=>(c=zae.fromJSON(c),this._fixTemplates(c.templates,n),this._fixTemplates(c.templates,o),c))}readVisible(t,i){var r;return((r=i.layerDefinition)==null?void 0:r.defaultVisibility)!=null?!!i.layerDefinition.defaultVisibility:i.visibility!=null?!!i.visibility:void 0}async addAttachment(t,i){const r=await URe(this,t,i,Tn);return this.lastEditsEventDate=new Date,r}async updateAttachment(t,i,r){const n=await BRe(this,t,i,r,Tn);return this.lastEditsEventDate=new Date,n}async applyEdits(t,i){return GRe(this,t,i)}async uploadAssets(t,i){return qRe(this,t,i)}on(t,i){return super.on(t,i)}createPopupTemplate(t){return ONe(this,t)}async createGraphicsSource(t){if(this._hasMemorySource()&&this.source)return this.source.load({signal:t});const{default:i}=await nO(de(()=>import("./FeatureLayerSource-D_cNvJcR.js"),__vite__mapDeps([214,34,41,215,207,216,37,74,36,75,206,20,18,21,217,218,10]),import.meta.url),t);return new i({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:t})}createQuery(){const t=tPe(this);t.dynamicDataSource=this.dynamicDataSource;const i=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=Ite(this.definitionExpression,i);return t.where=r||"1=1",t}async deleteAttachments(t,i){const r=await HRe(this,t,i,Tn);return this.lastEditsEventDate=new Date,r}async fetchRecomputedExtents(t){return WRe(this,t,Tn)}getFeatureType(t){return hPe(this.types,this.typeIdField,t)}getFieldDomain(t,i){var v,_;const r=i==null?void 0:i.feature,n=!!((v=this.subtypes)!=null&&v.length);if(n&&!(i!=null&&i.excludeImpliedDomains)){const I=nPe(this,t);if(I)return I}const o=n&&rPe(this,r);if(o){const I=(_=o==null?void 0:o.domains)==null?void 0:_[t];return(I==null?void 0:I.type)==="inherited"?this._getLayerDomain(t):I}const c=this.getFeatureType(r),y=this._getLayerDomain(t);if(c){const I=c.domains&&c.domains[t];if(I&&(I==null?void 0:I.type)!=="inherited")return I}if(y)return y;if(!(i!=null&&i.excludeImpliedDomains)){const I=sPe(this,t);if(I)return I}return null}getField(t){return this.fieldsIndex.get(t)}async queryAttachments(t,i){return JRe(this,t,i,Tn)}async queryFeatures(t,i){const r=await this.load(),n=await r.source.queryFeatures(ys.from(t)??r.createQuery(),i);if(n!=null&&n.features)for(const o of n.features)o.layer=o.sourceLayer=r;return n}async queryObjectIds(t,i){return ZRe(this,t,i,Tn)}async queryFeatureCount(t,i){return KRe(this,t,i,Tn)}async queryExtent(t,i){return YRe(this,t,i,Tn)}async queryRelatedFeatures(t,i){return XRe(this,t,i,Tn)}async queryRelatedFeaturesCount(t,i){return QRe(this,t,i,Tn)}async queryTopFeatures(t,i){var y;const{source:r,capabilities:n}=await this.load();if(!r.queryTopFeatures||!((y=n==null?void 0:n.query)!=null&&y.supportsTopFeaturesQuery))throw new ne(Tn,"Layer source does not support queryTopFeatures capability");const o=await de(()=>import("./TopFeaturesQuery-9vIhkHNz.js"),[],import.meta.url),c=await r.queryTopFeatures(o.default.from(t),i);if(c!=null&&c.features)for(const v of c.features)v.layer=v.sourceLayer=this;return c}async queryBins(t,i){var y;const{source:r,capabilities:n}=await this.load();if(!r.queryBins||!((y=n==null?void 0:n.operations)!=null&&y.supportsQueryBins))throw new ne(Tn,"Layer source does not support queryBins capability");pPe(t,n,Tn);const o=await de(()=>import("./BinsQuery-CE_WsoNH.js"),__vite__mapDeps([219,14,6]),import.meta.url),c=await r.queryBins(o.default.from(t),i);if(c.features)for(const v of c.features)v.layer=v.sourceLayer=this;return c}async queryTopObjectIds(t,i){const{source:r,capabilities:n}=await this.load();if(!r.queryTopObjectIds||!(n!=null&&n.query.supportsTopFeaturesQuery))throw new ne(Tn,"Layer source does not support queryTopObjectIds capability");const o=await de(()=>import("./TopFeaturesQuery-9vIhkHNz.js"),[],import.meta.url);return r.queryTopObjectIds(o.default.from(t),i)}async queryTopFeaturesExtent(t,i){var c;const{source:r,capabilities:n}=await this.load();if(!r.queryTopExtents||!((c=n==null?void 0:n.query)!=null&&c.supportsTopFeaturesQuery))throw new ne(Tn,"Layer source does not support queryTopExtents capability");const o=await de(()=>import("./TopFeaturesQuery-9vIhkHNz.js"),[],import.meta.url);return r.queryTopExtents(o.default.from(t),i)}async queryTopFeatureCount(t,i){var c;const{source:r,capabilities:n}=await this.load();if(!r.queryTopCount||!((c=n==null?void 0:n.query)!=null&&c.supportsTopFeaturesQuery))throw new ne(Tn,"Layer source does not support queryFeatureCount capability");const o=await de(()=>import("./TopFeaturesQuery-9vIhkHNz.js"),[],import.meta.url);return r.queryTopCount(o.default.from(t),i)}read(t,i){const r=t.featureCollection;if((r||t.type==="Feature Collection")&&(this.resourceInfo=t),r){const n=r.layers;n&&n.length===1&&(super.read(n[0],i),r.showLegend!=null&&super.read({showLegend:r.showLegend},i))}super.read(t,i),i&&i.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(t,i){i={...i,origin:(i==null?void 0:i.origin)??void 0,writeLayerSchema:(i==null?void 0:i.writeLayerSchema)??this._hasMemorySource()};const{origin:r,layerContainerType:n,messages:o}=i;if(this.dynamicDataSource)return o==null||o.push(pS(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((r==="web-map"||r==="web-scene")&&n!=="tables")return o==null||o.push(pS(this,`a table source can only be written to tables, not ${n}`)),null;if(this._hasMemorySource())return o==null||o.push(pS(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(r==="web-map"||r==="web-scene")&&n==="tables")return o==null||o.push(pS(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(t,i)}clone(){if(this._hasMemorySource())throw new ne(Tn,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(t){var i;return!!this.loaded&&(((i=this.source)==null?void 0:i.type)==="memory"||kNe(this,t))}async save(t){return this._debouncedSaveOperations(Iu.SAVE,t)}async saveAs(t,i){return this._debouncedSaveOperations(Iu.SAVE_AS,i,t)}_readEditingEnabled(t,i,r){var o;let n=(o=t.layerDefinition)==null?void 0:o.capabilities;return n?this._hasEditingCapability(n):(n=t.capabilities,i&&(r==null?void 0:r.origin)==="web-map"&&!this._hasMemorySource()&&n?this._hasEditingCapability(n):void 0)}_hasEditingCapability(t){return t.toLowerCase().split(",").map(i=>i.trim()).includes("editing")}_writeEditingEnabled(t,i,r,n){var o,c;if(!t){const y=(c=(o=this.capabilities)==null?void 0:o.operations)!=null&&c.supportsSync?"Query,Sync":"Query";Qr("layerDefinition.capabilities",y,i),r&&!(n!=null&&n.writeLayerSchema)&&(i.capabilities=y)}}_getLayerDomain(t){const i=this.fieldsIndex.get(t);return i?i.domain:null}_fetchFirstValidLayerId(t){return Et(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(i=>{const r=i.data;if(r)return this.findFirstValidLayerId(r)})}async initLayerProperties(t){var i;return this._set("source",t),t.sourceJSON&&(this.sourceJSON=t.sourceJSON,this.read(t.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(i=this.portalItem)==null?void 0:i.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),Tz(this.renderer,this.fieldsIndex),Cte(this.timeInfo,this.fieldsIndex),LNe(this,{origin:"service"})}async hasDataChanged(){return ePe(this)}async fetchPublishingStatus(){const t=this.source;return t!=null&&t.fetchPublishingStatus?t.fetchPublishingStatus():"unavailable"}_verifyFields(){var i,r;const t=((i=this.parsedUrl)==null?void 0:i.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+t+")"),this.isTable||this._hasMemorySource()||t.search(/\/FeatureServer\//i)!==-1||(r=this.fields)!=null&&r.some(n=>n.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+t+")")}_fixTemplates(t,i){t&&t.forEach(r=>{var o;const n=(o=r.prototype)==null?void 0:o.attributes;n&&i&&delete n[i]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new ne("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new ne("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(t){t.forEach(i=>{i.layer=this,i.sourceLayer=this}),this.addHandles([t.on("after-add",i=>{i.item.layer=this,i.item.sourceLayer=this}),t.on("after-remove",i=>{i.item.layer=null,i.item.sourceLayer=null})],"fl-source")}_resetMemorySource(t){t.forEach(i=>{i.layer=null,i.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(t){return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}};m([w(DRe)],Je.prototype,"attributeTableTemplate",void 0),m([ke("service","capabilities")],Je.prototype,"readCapabilities",null),m([w({json:{origins:{"web-scene":{write:!1}},write:!0}})],Je.prototype,"charts",void 0),m([w({readOnly:!0})],Je.prototype,"createQueryVersion",null),m([w({json:{read:{source:"layerDefinition.copyrightText"}}})],Je.prototype,"copyright",void 0),m([w({json:{read:{source:"layerDefinition.displayField"}}})],Je.prototype,"displayField",void 0),m([w({types:Ad,readOnly:!0})],Je.prototype,"defaultSymbol",void 0),m([w({type:hl})],Je.prototype,"dynamicDataSource",void 0),m([w({type:Boolean})],Je.prototype,"editingEnabled",null),m([ke(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Je.prototype,"readEditingEnabled",null),m([ke("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Je.prototype,"readEditingEnabledFromWebMap",null),m([Le(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Je.prototype,"writeEditingEnabled",null),m([Le("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Je.prototype,"writeEditingEnabledToWebMap",null),m([w({readOnly:!0})],Je.prototype,"effectiveEditingEnabled",null),m([w({...WE.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:JE}}}}})],Je.prototype,"fields",void 0),m([w(WE.fieldsIndex)],Je.prototype,"fieldsIndex",void 0),m([w({type:hRe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Je.prototype,"formTemplate",void 0),m([w({json:{read:{source:"layerDefinition.extent"}}})],Je.prototype,"fullExtent",void 0),m([w({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:JE,writer(e,t,i){const r=e?W8.toJSON(e):null;r&&Qr(i,r,t)}}}},read:{source:"layerDefinition.geometryType",reader:W8.read}}})],Je.prototype,"geometryType",void 0),m([w({json:{read:{source:"layerDefinition.hasM"}}})],Je.prototype,"hasM",void 0),m([w({json:{read:{source:"layerDefinition.hasZ"}}})],Je.prototype,"hasZ",void 0),m([w(PRe)],Je.prototype,"id",void 0),m([w({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Je.prototype,"infoFor3D",void 0),m([w({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Je.prototype,"isTable",void 0),m([ke("service","isTable",["type","geometryType"]),ke("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Je.prototype,"readIsTable",null),m([Le("web-map","isTable")],Je.prototype,"writeIsTable",null),m([w(IP)],Je.prototype,"labelsVisible",void 0),m([w({type:[_T],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:HE,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:HE,write:{enabled:!0,layerContainerTypes:bn}}},name:"layerDefinition.drawingInfo.labelingInfo",read:HE,write:!0}})],Je.prototype,"labelingInfo",void 0),m([w((()=>{const e=le(RRe);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,i,r){Qr(r,RI(t),i)}}},e})())],Je.prototype,"opacity",void 0),m([w(LRe)],Je.prototype,"legendEnabled",void 0),m([w({type:["show","hide"],json:(()=>{const e=le(vae.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],Je.prototype,"listMode",void 0),m([ke("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Je.prototype,"readGlobalIdField",null),m([w({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:JE}}}}})],Je.prototype,"objectIdField",void 0),m([ke("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Je.prototype,"readObjectIdField",null),m([w({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Je.prototype,"operationalLayerType",void 0),m([w(WE.outFields)],Je.prototype,"outFields",void 0),m([w({readOnly:!0})],Je.prototype,"parsedUrl",null),m([w({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Je.prototype,"path",void 0),m([w(xP)],Je.prototype,"popupEnabled",void 0),m([w({type:mp,json:{name:"popupInfo",write:!0}})],Je.prototype,"popupTemplate",void 0),m([w({readOnly:!0})],Je.prototype,"defaultPopupTemplate",null),m([w({types:vT,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:ROe,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:bn,overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],Je.prototype,"renderer",null),m([ke("service","renderer",["drawingInfo.renderer","defaultSymbol"]),ke("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Je.prototype,"readRenderer",null),m([w()],Je.prototype,"resourceInfo",void 0),m([w((()=>{const e=le(CRe);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],Je.prototype,"screenSizePerspectiveEnabled",void 0),m([w({clonable:!1})],Je.prototype,"source",null),m([wt("source")],Je.prototype,"castSource",null),m([ke("portal-item","source",["featureSet"]),ke("web-map","source",["featureSet"])],Je.prototype,"readSource",null),m([w({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Je.prototype,"spatialReference",void 0),m([w({type:Number})],Je.prototype,"subtypeCode",void 0),m([w({type:[LP]})],Je.prototype,"templates",void 0),m([ke("templates",["editFieldsInfo","creatorField","editorField","templates"])],Je.prototype,"readTemplates",null),m([w({type:jae})],Je.prototype,"timeInfo",void 0),m([w()],Je.prototype,"title",void 0),m([ke("service","title",["name"]),ke("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Je.prototype,"readTitle",null),m([ke("web-map","title",["layerDefinition.name","title"])],Je.prototype,"readTitleFromWebMap",null),m([w({type:String})],Je.prototype,"sublayerTitleMode",void 0),m([w({json:{read:!1}})],Je.prototype,"type",void 0),m([w({type:String})],Je.prototype,"typeIdField",void 0),m([ke("service","typeIdField"),ke("typeIdField",["layerDefinition.typeIdField"])],Je.prototype,"readTypeIdField",null),m([w({type:[zae]})],Je.prototype,"types",void 0),m([ke("service","types",["types"]),ke("types",["layerDefinition.types"])],Je.prototype,"readTypes",null),m([w({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Je.prototype,"visible",void 0),m([ke("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Je.prototype,"readVisible",null),Je=m([H("esri.layers.FeatureLayer")],Je);const U3=Je,rrt=Object.freeze(Object.defineProperty({__proto__:null,default:U3},Symbol.toStringTag,{value:"Module"})),BNe="esri.widgets.Feature.support.arcadeFeatureUtils",bq=()=>_e.getLogger(BNe);function GNe(e){return typeof e=="string"?L3(ZR(e)):Array.isArray(e)?qNe(e):(e==null?void 0:e.declaredClass)==="esri.arcade.Dictionary"?HNe(e):e}function qNe(e){return`<ul class="esri-widget__list">${e.map(t=>`<li>${typeof t=="string"?L3(ZR(t)):t}</li>`).join("")}</ul>`}function HNe(e){const t=e.keys().map(i=>{const r=e.field(i);return`<tr><th>${i}</th><td>${typeof r=="string"?L3(ZR(r)):r}</td></tr>`}).join("");return`<table class="${ze.table}">${t}</table>`}function Vae(){return de(()=>import("./arcade-lLZ1f-FO.js"),__vite__mapDeps([220,127]),import.meta.url)}function WNe(e){return"createQuery"in e&&"queryFeatures"in e}async function JNe({graphic:e,view:t,options:i}){const{isAggregate:r,layer:n}=e;if(!r||!n||(t==null?void 0:t.type)!=="2d")return[];const o=await t.whenLayerView(n);if(!WNe(o))return[];const c=o.createQuery(),y=e.getObjectId();c.aggregateIds=y!=null?[y]:[];const{features:v}=await o.queryFeatures(c,i);return v}function ZNe({layer:e,aggregatedFeatures:t,interceptor:i}){const{fields:r,objectIdField:n,geometryType:o,spatialReference:c,displayField:y}=e;return new U3({fields:r,objectIdField:n,geometryType:o,spatialReference:c,displayField:y,interceptor:i,...e.type==="feature"?{templates:e.templates,typeIdField:e.typeIdField,types:e.types}:null,source:t})}async function Uae({expressionInfo:e,arcade:t,interceptor:i,spatialReference:r,map:n,graphic:o,location:c,view:y,options:v}){var U;if(!(e!=null&&e.expression))return null;const{isAggregate:_}=o,I=(o.sourceLayer||o.layer)??void 0,$=_?"feature-reduction-popup":"popup",A=t.createArcadeProfile($),k=t.createArcadeExecutor(e.expression,A).catch(W=>bq().error("arcade-executor-error",{error:W,expressionInfo:e})),[R,N]=await Promise.all([JNe({graphic:o,view:y,options:v}),k]);if(!N)return null;const D=$==="feature-reduction-popup"?ZNe({layer:I,aggregatedFeatures:R,interceptor:i}):void 0,j={...$==="feature-reduction-popup"?{$aggregatedFeatures:D}:{$datastore:I==null?void 0:I.url,$layer:I!=null&&eke(I)?I:(I==null?void 0:I.type)==="scene"&&I.associatedLayer!=null?I.associatedLayer:void 0,$map:n,$userInput:c,$graph:(I==null?void 0:I.type)==="knowledge-graph-sublayer"?(U=I==null?void 0:I.parentCompositeLayer)==null?void 0:U.knowledgeGraph:void 0},$feature:o},z={abortSignal:(v==null?void 0:v.signal)??void 0,interceptor:i??void 0,rawOutput:!0,spatialReference:r??void 0,timeZone:y==null?void 0:y.timeZone};return await N.executeAsync(j,z).catch(W=>bq().error("arcade-execution-error",{error:W,graphic:o,expressionInfo:e})).finally(()=>D==null?void 0:D.destroy())}async function KNe({expressionInfos:e,spatialReference:t,graphic:i,interceptor:r,map:n,view:o,location:c,options:y}){if(!(e!=null&&e.length))return{};const v=await Vae(),_={};for(const A of e)_[`expression/${A.name}`]=Uae({expressionInfo:A,arcade:v,interceptor:r,spatialReference:t,map:n,graphic:i,location:c,view:o,options:y});const I=await eo(_),$={};for(const A in I)$[A]=GNe(I[A].value);return $}const YNe=1;let Hs=class extends Ve{constructor(t){super(t),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.location=null,this.view=null,this._cancelQuery=()=>{const{_abortController:i}=this;i&&i.abort(),this._abortController=null},this._createVM=()=>{var n,o;const i=(n=this.contentElement)==null?void 0:n.type;(o=this.contentElementViewModel)==null||o.destroy();const r=i==="fields"?new uT:i==="media"?new Xf:i==="text"?new v4:null;this._set("contentElementViewModel",r)},this._compile=async()=>{this._cancelQuery();const i=new AbortController;this._abortController=i,await this._compileExpression(),this._abortController===i&&(this._abortController=null)},this._compileThrottled=GR(this._compile,YNe,this),this._compileExpression=async()=>{const{expressionInfo:i,graphic:r,interceptor:n,spatialReference:o,map:c,location:y,view:v,_abortController:_}=this;if(!i||!r)return void this._set("contentElement",null);const I=await Vae();if(_!==this._abortController)return;const $=await Uae({arcade:I,expressionInfo:i,graphic:r,location:y,interceptor:n,map:c,spatialReference:o,view:v});if(!$||$.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const A=await $.castAsJsonAsync(_==null?void 0:_.signal),k=A==null?void 0:A.type,R=k==="media"?yg.fromJSON(A):k==="text"?N0.fromJSON(A):k==="fields"?P0.fromJSON(A):null;R.type==="media"&&!R.mediaInfos||R.type==="fields"&&!R.fieldInfos||R.type==="text"&&!R.text?this._set("contentElement",null):this._set("contentElement",R)},this.addHandles([ge(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),qe),ge(()=>[this.contentElement],()=>this._createVM(),qe)])}initialize(){this.addHandles(this._compileThrottled)}destroy(){var t;this._cancelQuery(),(t=this.contentElementViewModel)==null||t.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var t;return((t=this.view)==null?void 0:t.spatialReference)??null}set spatialReference(t){this._override("spatialReference",t)}get state(){const{_abortController:t,contentElement:i,contentElementViewModel:r}=this;return t?"loading":i||r?"ready":"disabled"}get map(){var t;return((t=this.view)==null?void 0:t.map)??null}set map(t){this._override("map",t)}};m([w()],Hs.prototype,"_abortController",void 0),m([w({type:Ute})],Hs.prototype,"expressionInfo",void 0),m([w({type:er})],Hs.prototype,"graphic",void 0),m([w({readOnly:!0})],Hs.prototype,"contentElement",void 0),m([w({readOnly:!0})],Hs.prototype,"contentElementViewModel",void 0),m([w()],Hs.prototype,"interceptor",void 0),m([w({type:st})],Hs.prototype,"location",void 0),m([w()],Hs.prototype,"spatialReference",null),m([w({readOnly:!0})],Hs.prototype,"state",null),m([w()],Hs.prototype,"map",null),m([w()],Hs.prototype,"view",void 0),Hs=m([H("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],Hs);const OP=Hs,_q="esri-feature",Sq={base:`${_q}-expression`,loadingSpinnerContainer:`${_q}__loading-container`};let gx=class extends yi{constructor(t,i){super(t,i),this._contentWidget=null,this.viewModel=new OP}initialize(){this.addHandles(ge(()=>{var t;return(t=this.viewModel)==null?void 0:t.contentElementViewModel},()=>this._setupExpressionWidget(),qe))}loadDependencies(){return Vn({loader:()=>de(()=>import("./calcite-loader-CkzKaCO4.js"),__vite__mapDeps([221,195]),import.meta.url)})}destroy(){this._destroyContentWidget()}render(){var i;const{state:t}=this.viewModel;return B("div",{class:Sq.base},t==="loading"?this._renderLoading():t==="disabled"?null:(i=this._contentWidget)==null?void 0:i.render())}_renderLoading(){return B("div",{class:Sq.loadingSpinnerContainer,key:"loading-container"},B("calcite-loader",{inline:!0,label:""}))}_destroyContentWidget(){const{_contentWidget:t}=this;t&&(t.viewModel=null,t.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:t,contentElement:i}=this.viewModel,r=i==null?void 0:i.type;this._destroyContentWidget();const n=t?r==="fields"?new xse({viewModel:t}):r==="media"?new Zse({viewModel:t}):r==="text"?new J5({viewModel:t}):null:null;this._contentWidget=n,this.scheduleRender()}};m([w({type:OP})],gx.prototype,"viewModel",void 0),gx=m([H("esri.widgets.Feature.FeatureExpression")],gx);const XNe=gx;var xq;(function(e){e.TOO_SHORT="length-validation-error::too-short",e.TOO_LONG="length-validation-error::too-long"})(xq||(xq={}));const QNe=e=>{var i;const t=[];if(e.formTemplate){const{description:r,title:n}=e.formTemplate;(i=e.fields)==null||i.forEach(o=>{const c=n&&JF(n,o.name),y=r&&JF(r,o.name);(c||y)&&t.push(o.name)})}return t},ZE=100;let li=class extends St(Cl(Ve)){constructor(t){super(t),this._loaded=!1,this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featuresPerPage=10,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.orderByFields=null,this.featureCount=0,this.relationshipId=null,this.showAllEnabled=!1,this.title=null,this._cancelQuery=()=>{const{_queryAbortController:i}=this;i&&i.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:i}=this;i&&i.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{const{_queryPageAbortController:i}=this;i&&i.abort(),this._queryPageAbortController=null},this._queryController=async()=>{this._cancelQuery();const i=new AbortController;this._queryAbortController=i,await xa(this._query()),this._queryAbortController===i&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._loaded=!1,this._cancelQueryFeatureCount();const i=new AbortController;this._queryFeatureCountAbortController=i,await xa(this._queryFeatureCount()),this._queryFeatureCountAbortController===i&&(this._queryFeatureCountAbortController=null),this._loaded=!0},this._queryPageController=async()=>{const i=new AbortController;this._queryPageAbortController=i,await xa(this._queryPage()),this._queryPageAbortController===i&&(this._queryPageAbortController=null)},this._queryDebounced=_l(this._queryController,ZE),this._queryFeatureCountDebounced=_l(this._queryFeatureCountController,ZE),this._queryPageDebounced=_l(this._queryPageController,ZE),this._query=async()=>{const{_queryAbortController:i,relatedFeatures:r}=this;this.featureCount&&(this._destroyRelatedFeatureViewModels(),this.featurePage=1,r.destroyAll(),this.destroyed||r.addMany(this._sliceFeatures(await this._queryRelatedFeatures({signal:i==null?void 0:i.signal}))))},this.addHandles([ge(()=>{var i;return[this.displayCount,this.graphic,this.layer,(i=this.layer)==null?void 0:i.loaded,this.map,this.orderByFields,this.relationshipId,this.featuresPerPage,this.showAllEnabled,this.canQuery,this.featureCount]},()=>this._queryDebounced(),qe),ge(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageDebounced()),ge(()=>[this.layer,this.relationshipId,this.objectId,this.canQuery],()=>this._queryFeatureCountDebounced())])}destroy(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.destroyAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}set featurePage(t){const{featuresPerPage:i,featureCount:r}=this,n=1,o=Math.ceil(r/i)||1;this._set("featurePage",Math.min(Math.max(t,n),o))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){const{orderByFields:t,relatedLayer:i}=this;return t&&(i!=null&&i.loaded)?t.map(r=>{const n=r.clone();return n.field=P2(r.field,i),n}):t??[]}get supportsCacheHint(){var t,i,r;return!!((r=(i=(t=this.layer)==null?void 0:t.capabilities)==null?void 0:i.queryRelated)!=null&&r.supportsCacheHint)}get canLoad(){return!!this.map&&this.relationshipId!=null&&typeof this.objectId=="number"}get canQuery(){var i,r;const t=(r=(i=this.layer)==null?void 0:i.capabilities)==null?void 0:r.queryRelated;return!!(this.relatedLayer&&this.relationship&&this.relationshipId!=null&&this.objectId!=null&&(t!=null&&t.supportsCount)&&(t!=null&&t.supportsPagination))}get itemDescriptionFieldName(){var t;return((t=this.orderByFieldsFixedCasing[0])==null?void 0:t.field)||null}set displayCount(t){this._set("displayCount",Math.min(Math.max(t,0),10))}get displayCount(){return this._get("displayCount")}get objectId(){var t,i;return(this.objectIdField&&((i=(t=this.graphic)==null?void 0:t.attributes)==null?void 0:i[this.objectIdField]))??null}get objectIdField(){var t;return((t=this.layer)==null?void 0:t.objectIdField)||null}get relatedFeatures(){return this._get("relatedFeatures")||new Oe}get relatedLayer(){const{layer:t,map:i,relationship:r}=this;return t!=null&&t.loaded&&i&&r?bCe(i,t,r)??null:null}get relationship(){var r;const{relationshipId:t,layer:i}=this;return t!=null?((r=i==null?void 0:i.relationships)==null?void 0:r.find(({id:n})=>n===t))??null:null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||new Oe}get state(){const{_queryAbortController:t,_queryFeatureCountAbortController:i,_queryPageAbortController:r,canQuery:n,_loaded:o,canLoad:c}=this;return i||c&&!o?"loading":t||r?"querying":n?"ready":"disabled"}getRelatedFeatureByObjectId(t){return this.relatedFeatures.find(i=>i.getObjectId()===t)}refresh(){this._queryFeatureCountDebounced()}_destroyRelatedFeatureViewModels(){var t;(t=this.relatedFeatureViewModels)==null||t.destroyAll()}async _queryFeatureCount(){const{layer:t,relatedLayer:i,relationshipId:r,objectId:n,_queryFeatureCountAbortController:o,canQuery:c,supportsCacheHint:y}=this;if(await(t==null?void 0:t.load()),await(i==null?void 0:i.load()),!c||!t||!i||n==null)return void this._set("featureCount",0);const v=i.createQuery(),{historicMoment:_,gdbVersion:I}=t,$=new vg({cacheHint:y,gdbVersion:I,historicMoment:_,relationshipId:r,returnGeometry:!1,objectIds:[n],where:v.where??void 0}),A=await t.queryRelatedFeaturesCount($,{signal:o==null?void 0:o.signal});this._set("featureCount",A[n]||0)}_sliceFeatures(t){const{showAllEnabled:i,displayCount:r}=this;return i?t:r?t.slice(0,r):[]}async _queryPage(){const{relatedFeatures:t,featurePage:i,showAllEnabled:r,_queryPageAbortController:n,featureCount:o}=this;!r||i<2||!o||t.addMany(await this._queryRelatedFeatures({signal:n==null?void 0:n.signal}))}async _queryRelatedFeatures(t){var ae;const{orderByFieldsFixedCasing:i,showAllEnabled:r,featuresPerPage:n,displayCount:o,layer:c,relationshipId:y,featurePage:v,featureCount:_,relatedLayer:I,supportsCacheHint:$}=this,{canQuery:A,objectId:k}=this;if(!A||!c||!I||k==null)return[];const R=r?((v-1)*n+_)%_:0,N=r?n:o,D=I.objectIdField,j=[...i.map(ue=>ue.field),...QNe(I),D].filter(Ar),z=i.map(ue=>`${ue.field} ${ue.order}`),U=I.createQuery(),{historicMoment:W,gdbVersion:Q}=c,K=new vg({orderByFields:z,start:R,num:N,outFields:j,cacheHint:$,historicMoment:W,gdbVersion:Q,relationshipId:y,returnGeometry:!1,objectIds:[k],where:U.where??void 0}),ee=await c.queryRelatedFeatures(K,{signal:t==null?void 0:t.signal}),ie=((ae=ee[k])==null?void 0:ae.features)||[];return ie.forEach(ue=>{ue.sourceLayer=I,ue.layer=I}),ie}};m([w()],li.prototype,"_loaded",void 0),m([w()],li.prototype,"_queryAbortController",void 0),m([w()],li.prototype,"_queryPageAbortController",void 0),m([w()],li.prototype,"_queryFeatureCountAbortController",void 0),m([w({value:1})],li.prototype,"featurePage",null),m([w()],li.prototype,"featuresPerPage",void 0),m([w({readOnly:!0})],li.prototype,"orderByFieldsFixedCasing",null),m([w({readOnly:!0})],li.prototype,"supportsCacheHint",null),m([w({readOnly:!0})],li.prototype,"canLoad",null),m([w({readOnly:!0})],li.prototype,"canQuery",null),m([w()],li.prototype,"description",void 0),m([w({readOnly:!0})],li.prototype,"itemDescriptionFieldName",null),m([w({value:3})],li.prototype,"displayCount",null),m([w({type:er})],li.prototype,"graphic",void 0),m([w()],li.prototype,"layer",void 0),m([w()],li.prototype,"map",void 0),m([w({readOnly:!0})],li.prototype,"objectId",null),m([w({readOnly:!0})],li.prototype,"objectIdField",null),m([w()],li.prototype,"orderByFields",void 0),m([w({readOnly:!0})],li.prototype,"relatedFeatures",null),m([w({readOnly:!0})],li.prototype,"relatedLayer",null),m([w({readOnly:!0})],li.prototype,"relationship",null),m([w()],li.prototype,"featureCount",void 0),m([w({readOnly:!0})],li.prototype,"relatedFeatureViewModels",null),m([w()],li.prototype,"relationshipId",void 0),m([w()],li.prototype,"showAllEnabled",void 0),m([w()],li.prototype,"state",null),m([w()],li.prototype,"title",void 0),li=m([H("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],li);const RP=li;var rk;const vx="esri-feature",Nv=`${vx}-relationship`,Ih={base:Nv,listContainer:`${Nv}__list`,listItem:`${Nv}__list-item`,listItemHidden:`${Nv}__list-item--hidden`,listContainerQuerying:`${Nv}__list--querying`,featureObserver:`${vx}__feature-observer`,stickySpinnerContainer:`${vx}__sticky-loading-container`,loadingSpinnerContainer:`${vx}__loading-container`},Iq={title:!0,description:!0};let hn=rk=class extends yi{constructor(e,t){super(e,t),this._featureElementInfo=null,this._relatedFeatureIntersectionObserverNode=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver(([i])=>{i!=null&&i.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this.flowItems=null,this.flowType="feature-relationship",this.headingLevel=2,this.viewModel=new RP,this.messages=null,this.messagesCommon=null,this.visibleElements={...Iq},this._increaseFeaturePage=()=>{const{state:i,showAllEnabled:r,relatedFeatures:n,featuresPerPage:o,featurePage:c}=this.viewModel;i==="ready"&&r&&n.length>=o*c&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new O3,this.addHandles([ge(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),qe),ge(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),tn(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])}loadDependencies(){return Vn({icon:()=>de(()=>import("./calcite-icon-D67BMpQP.js"),[],import.meta.url),list:()=>de(()=>import("./calcite-list-BeSrBmBe.js"),__vite__mapDeps([222,223,224,195,225]),import.meta.url),"list-item":()=>de(()=>import("./calcite-list-item-bKE4O7k7.js"),__vite__mapDeps([226,224,223,227,195]),import.meta.url),loader:()=>de(()=>import("./calcite-loader-CkzKaCO4.js"),__vite__mapDeps([221,195]),import.meta.url),notice:()=>de(()=>import("./calcite-notice-ikeUYD1p.js"),__vite__mapDeps([228,229]),import.meta.url)})}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=ci(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:e,featureCount:t,displayCount:i,state:r}=this.viewModel;return!e&&!!t&&r==="ready"&&(t>i||i===0)}get displayListItems(){return this.displayShowAllButton||this.viewModel.relatedFeatureViewModels.length>0}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get featureCountDescription(){const{messages:e}=this,{featureCount:t}=this.viewModel;return mn(e==null?void 0:e.numberRecords,{number:t})}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}castVisibleElements(e){return{...Iq,...e}}render(){var t;const{state:e}=this.viewModel;return B("div",{class:this.classes(Ih.base,ze.widget)},(t=this._featureElementInfo)==null?void 0:t.render(),e==="loading"?this._renderLoading():e==="disabled"?this._renderRelationshipNotFound():this._renderRelatedFeatures())}async _selectRecord(e){const{flowItems:t,featureVisibleElements:i}=this;if(!t)return;e.abilities={relationshipContent:!0};const{default:r}=await de(()=>Promise.resolve().then(()=>qae),void 0,import.meta.url);t.push(new r({flowItems:t,flowType:this.flowType,viewModel:e,visibleElements:i}))}_showAllRecords(){const{flowItems:e}=this;if(!e)return;const{viewModel:t,featureVisibleElements:i}=this;t.showAllEnabled=!0;const r=new rk({flowItems:e,featureVisibleElements:i,visibleElements:{title:!1,description:!1},viewModel:t});e.push(r)}_renderStickyLoading(){return this.viewModel.state==="querying"?B("div",{class:Ih.stickySpinnerContainer,key:"sticky-loader"},this._renderLoadingIcon()):null}_renderLoadingIcon(){return B("calcite-loader",{inline:!0,label:""})}_renderLoading(){return B("div",{class:Ih.loadingSpinnerContainer,key:"loading-container"},this._renderLoadingIcon())}_renderShowAllIconNode(){return B("calcite-icon",{icon:"list",scale:"s",slot:"content-end"})}_renderChevronIconNode(){const e=Po(this.container)?"chevron-left":"chevron-right";return B("calcite-icon",{icon:e,scale:"s",slot:"content-end"})}_renderRelatedFeature(e){var n;const{itemDescriptionFieldName:t}=this.viewModel,i=e.title;e.description=t&&((n=e.formattedAttributes)==null?void 0:n.global[t]);const r=e.state==="loading";return B("calcite-list-item",{class:this.classes(Ih.listItem,{[Ih.listItemHidden]:r}),description:e.description??"",key:e.uid,label:i,onCalciteListItemSelect:()=>this._selectRecord(e)},this._renderChevronIconNode())}_renderShowAllListItem(){var e;return this.displayShowAllButton?B("calcite-list-item",{description:this.featureCountDescription,key:"show-all-item",label:(e=this.messages)==null?void 0:e.showAll,onCalciteListItemSelect:()=>this._showAllRecords()},this._renderShowAllIconNode()):null}_renderNoRelatedFeaturesMessage(){var e;return B("calcite-notice",{icon:"information",key:"no-related-features-message",kind:"brand",open:!0,scale:"s",width:"full"},B("div",{slot:"message"},(e=this.messages)==null?void 0:e.noRelatedFeatures))}_renderFeatureObserver(){return B("div",{afterCreate:this._relatedFeatureIntersectionObserverCreated,bind:this,class:Ih.featureObserver,key:"feature-observer"})}_renderList(){const{relatedFeatureViewModels:e}=this.viewModel;return B("calcite-list",null,e.toArray().map(t=>this._renderRelatedFeature(t)),this._renderShowAllListItem())}_renderRelatedFeatures(){const{displayListItems:e}=this,{state:t}=this.viewModel;return B("div",{class:this.classes(Ih.listContainer,{[Ih.listContainerQuerying]:t==="querying"}),key:"list-container"},e?this._renderList():t==="ready"?this._renderNoRelatedFeaturesMessage():null,this._renderStickyLoading(),this._renderFeatureObserver())}_renderRelationshipNotFound(){var e;return B("calcite-notice",{icon:"exclamation-mark-triangle",key:"relationship-not-found",kind:"danger",open:!0,scale:"s",width:"full"},B("div",{slot:"message"},(e=this.messages)==null?void 0:e.relationshipNotFound))}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:e}=this.viewModel,t="related-feature-viewmodels";this.removeHandles(t),e==null||e.forEach(i=>{this.addHandles(ge(()=>[i.title,i.state],()=>this.scheduleRender(),qe),t)}),this.scheduleRender()}_setupFeatureElementInfo(){var n;const{headingLevel:e,visibleElements:t}=this,i=t.description&&this.description,r=t.title&&this.title;(n=this._featureElementInfo)==null||n.set({description:i,title:r,headingLevel:e})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:e,showAllEnabled:t}=this.viewModel;await G0(0),this._relatedFeatureIntersectionObserverNode&&e==="ready"&&t&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(e){this._relatedFeatureIntersectionObserverNode=e}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};m([w()],hn.prototype,"_relatedFeatureIntersectionObserverNode",void 0),m([w({readOnly:!0})],hn.prototype,"displayShowAllButton",null),m([w({readOnly:!0})],hn.prototype,"displayListItems",null),m([w()],hn.prototype,"description",null),m([w({readOnly:!0})],hn.prototype,"featureCountDescription",null),m([w()],hn.prototype,"featureVisibleElements",void 0),m([w()],hn.prototype,"flowItems",void 0),m([w()],hn.prototype,"flowType",void 0),m([w()],hn.prototype,"headingLevel",void 0),m([w()],hn.prototype,"title",null),m([w({type:RP})],hn.prototype,"viewModel",void 0),m([w(),Ht("esri/widgets/Feature/t9n/Feature")],hn.prototype,"messages",void 0),m([w(),Ht("esri/t9n/common")],hn.prototype,"messagesCommon",void 0),m([w()],hn.prototype,"visibleElements",void 0),m([wt("visibleElements")],hn.prototype,"castVisibleElements",null),hn=rk=m([H("esri.widgets.Feature.FeatureRelationship")],hn);const eFe=hn;var Nc;(function(e){e[e.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity",e[e.RTAttachment=2]="RTAttachment",e[e.RTContainment=3]="RTContainment",e[e.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity",e[e.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity"})(Nc||(Nc={}));const fS=new ft({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation"}),yS=new ft({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionMidspanConnectivity:"junction-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"}),tFe={connectivity:1,"junction-junction-connectivity":1,attachment:2,containment:3,"junction-edge-from-connectivity":4,"junction-midspan-connectivity":5,"junction-edge-to-connectivity":6},iFe=Array.from({length:33},(e,t)=>2*t),rFe=new Map([[1,"connectivity"],[2,"containment"],[3,"attachment"],[4,"junction-edge-from-connectivity"],[5,"junction-midspan-connectivity"],[6,"junction-edge-to-connectivity"]]),art=new ft({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});let Qa=class extends be{constructor(t){super(t),this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};m([w({type:Number,json:{write:!0}})],Qa.prototype,"assetGroupCode",void 0),m([w({type:Number,json:{write:!0}})],Qa.prototype,"assetTypeCode",void 0),m([w({type:String,json:{write:!0}})],Qa.prototype,"globalId",void 0),m([w({type:Number,json:{write:!0}})],Qa.prototype,"networkSourceId",void 0),m([w({type:Number,json:{write:!0}})],Qa.prototype,"objectId",void 0),m([w({type:Number,json:{write:!0}})],Qa.prototype,"positionFrom",void 0),m([w({type:Number,json:{write:!0}})],Qa.prototype,"positionTo",void 0),m([w({type:Number,json:{write:!0}})],Qa.prototype,"terminalId",void 0),Qa=m([H("esri.rest.networks.support.NetworkElement")],Qa);const z0=Qa;let Cn=class extends be{constructor(t){super(t),this.globalId=null,this.associationType=null,this.fromNetworkElement=null,this.toNetworkElement=null,this.geometry=null,this.errorMessage=null,this.percentAlong=null,this.errorCode=null,this.isContentVisible=null,this.status=null}readFromNetworkElement(t,i){return new z0({globalId:i.fromGlobalId,networkSourceId:i.fromNetworkSourceId,terminalId:i.fromTerminalId})}writeFromNetworkElement(t,i){t&&(i.fromGlobalId=t.globalId,i.fromNetworkSourceId=t.networkSourceId,i.fromTerminalId=t.terminalId)}readToNetworkElement(t,i){return new z0({globalId:i.toGlobalId,networkSourceId:i.toNetworkSourceId,terminalId:i.toTerminalId})}writeToNetworkElement(t,i){t&&(i.toGlobalId=t.globalId,i.toNetworkSourceId=t.networkSourceId,i.toTerminalId=t.terminalId)}};m([w({type:String,json:{write:!0}})],Cn.prototype,"globalId",void 0),m([w({type:yS.apiValues,json:{type:yS.jsonValues,read:yS.read,write:yS.write}})],Cn.prototype,"associationType",void 0),m([w({type:z0,json:{write:{target:{fromGlobalId:{type:String},fromNetworkSourceId:{type:Number},fromTerminalId:{type:Number}}},read:{source:["fromGlobalId","fromNetworkSourceId","fromTerminalId"]}}})],Cn.prototype,"fromNetworkElement",void 0),m([ke("fromNetworkElement")],Cn.prototype,"readFromNetworkElement",null),m([Le("fromNetworkElement")],Cn.prototype,"writeFromNetworkElement",null),m([w({type:z0,json:{write:{target:{toGlobalId:{type:String},toNetworkSourceId:{type:Number},toTerminalId:{type:Number}}},read:{source:["toGlobalId","toNetworkSourceId","toTerminalId"]}}})],Cn.prototype,"toNetworkElement",void 0),m([ke("toNetworkElement")],Cn.prototype,"readToNetworkElement",null),m([Le("toNetworkElement")],Cn.prototype,"writeToNetworkElement",null),m([w({type:io,json:{write:!0}})],Cn.prototype,"geometry",void 0),m([w({type:String,json:{write:!0}})],Cn.prototype,"errorMessage",void 0),m([w({type:Number,json:{write:!0}})],Cn.prototype,"percentAlong",void 0),m([w({type:Number,json:{write:!0}})],Cn.prototype,"errorCode",void 0),m([w({type:Boolean,json:{write:!0}})],Cn.prototype,"isContentVisible",void 0),m([w({type:Number,json:{write:!0}})],Cn.prototype,"status",void 0),Cn=m([H("esri.rest.networks.support.Association")],Cn);const nFe=Cn,Ai={fromGlobalId:"fromglobalid",fromNetworkSourceId:"fromnetworksourceid",fromTerminalId:"fromterminalid",toGlobalId:"toglobalid",toNetworkSourceId:"tonetworksourceid",toTerminalId:"toterminalid",associationType:"associationtype",globalId:"globalid",status:"status",isContentVisible:"iscontentvisible",percentAlong:"percentalong",assetGroup:"assetgroup",assetType:"assettype"},Tq=100;let Nt=class extends St(Cl(Ve)){constructor(t){super(t),this._loaded=!1,this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.networkSourceIdsInUse=new Set,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.featureCount=0,this.associationTypes=null,this.showAllEnabled=!1,this.title=null,this.attachmentsFeatureCount=0,this.structureFeatureCount=0,this.contentFeatureCount=0,this.containerFeatureCount=0,this.connectivityFeatureCount=0,this._cancelQuery=()=>{const{_queryAbortController:i}=this;i&&i.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:i}=this;i&&i.abort(),this._queryFeatureCountAbortController=null},this._queryController=async i=>{this._cancelQuery();const r=new AbortController;this._queryAbortController=r,await xa(this._query(i)),this._queryAbortController===r&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._loaded=!1,this._cancelQueryFeatureCount();const i=new AbortController;this._queryFeatureCountAbortController=i,await xa(this._queryFeatureCount()),this._queryFeatureCountAbortController===i&&(this._queryFeatureCountAbortController=null),this._loaded=!0},this._queryDebounced=_l(this._queryController,Tq),this._queryFeatureCountDebounced=_l(this._queryFeatureCountController,Tq)}initialize(){var t,i;(t=this.associationTypes)==null||t.forEach(r=>{r.open=!1}),this.addHandles([...((i=this.associationTypes)==null?void 0:i.map(r=>ge(()=>r.open,()=>{r.open&&this._queryDebounced(r)})))??[],ge(()=>[this.graphic,this.layer,this.map,this.associationTypes,this.objectId,this.globalId,this.canQuery],()=>this._queryFeatureCountDebounced(),qe)])}destroy(){this._cancelQuery(),this._cancelQueryFeatureCount(),this._destroyAssociatedFeatureViewModels()}get supportsCacheHint(){var t,i,r;return!!((r=(i=(t=this.layer)==null?void 0:t.capabilities)==null?void 0:i.query)!=null&&r.supportsCacheHint)}get canLoad(){return!!this.map&&!!this.associationTypes&&typeof this.globalId=="string"}get canQuery(){var i,r;const t=(r=(i=this.layer)==null?void 0:i.capabilities)==null?void 0:r.query;return!!this.associationTypes&&typeof this.globalId=="string"&&!!(t!=null&&t.supportsPagination)}get objectId(){var t,i;return(this.objectIdField&&((i=(t=this.graphic)==null?void 0:t.attributes)==null?void 0:i[this.objectIdField]))??null}get objectIdField(){var t;return((t=this.layer)==null?void 0:t.objectIdField)||null}get globalId(){var t,i;return(this.globalIdField&&((i=(t=this.graphic)==null?void 0:t.attributes)==null?void 0:i[this.globalIdField]))??null}get globalIdField(){const{layer:t}=this;return(t==null?void 0:t.type)==="subtype-sublayer"&&(t!=null&&t.parent)?t.parent.globalIdField??null:(t==null?void 0:t.globalIdField)??null}get state(){const{_queryAbortController:t,_queryFeatureCountAbortController:i,_queryPageAbortController:r,canQuery:n,_loaded:o,canLoad:c}=this;return i||c&&!o?"loading":t||r?"querying":n&&this.featureCount!==0?"ready":"disabled"}get utilityNetwork(){const{layer:t,map:i}=this;return t!=null&&t.loaded&&i?(t==null?void 0:t.type)==="subtype-sublayer"&&(t!=null&&t.parent)?IU(i,t.parent)??null:IU(i,t)??null:null}get associationsLayer(){const{utilityNetwork:t}=this;return t!=null&&t.loaded?new U3({url:t.networkSystemLayers.associationsTableUrl,gdbVersion:t.gdbVersion}):null}get attachmentsAssociations(){return this._get("attachmentsAssociations")||new Oe}get structureAssociations(){return this._get("structureAssociations")||new Oe}get contentAssociations(){return this._get("contentAssociations")||new Oe}get containerAssociations(){return this._get("containerAssociations")||new Oe}get connectivityAssociations(){return this._get("connectivityAssociations")||new Oe}get associationFeatures(){return this._get("associationFeatures")||new Wd}get associationViewModels(){return this._get("associationViewModels")||new Map}refresh(){this._queryFeatureCountDebounced()}_destroyAssociatedFeatureViewModels(){this.associationViewModels.forEach(t=>t.destroyAll())}_generateGlobalIdWhereClause(t,i){const{globalId:r,networkSourceIdsInUse:n}=this,{associatedNetworkSourceId:o}=t,c=i.fieldsIndex.get(Ai.fromGlobalId),y=i.fieldsIndex.get(Ai.toGlobalId),v=i.fieldsIndex.get(Ai.fromNetworkSourceId),_=i.fieldsIndex.get(Ai.toNetworkSourceId),I=o!=null,$=`(${Array.from(n.values())})`,A=I?` AND ${_.name} = ${o} AND ${_.name} IN ${$}`:"",k=I?` AND ${v.name} = ${o} AND ${v.name} IN ${$}`:"";switch(t.type){case"connectivity":return`((${c.name} = '${r}'${A}) OR (${y.name} = '${r}'${k}))`;case"attachment":case"content":return`${c.name} = '${r}'${A}`;case"container":case"structure":return`${y.name} = '${r}'${k}`;default:return""}}_generateNetworkSourceIdWhereClause(t){const{networkSourceIdsInUse:i}=this,r=`(${Array.from(i.values())})`,n=t.fieldsIndex.get(Ai.fromNetworkSourceId),o=t.fieldsIndex.get(Ai.toNetworkSourceId);return`(${n.name} IN ${r} AND ${o.name} IN ${r})`}_generateAssociationTypeWhereClause(t,i){const r=i.fieldsIndex.get(Ai.associationType);switch(t.type){case"attachment":case"structure":return`${r.name} = 3`;case"connectivity":return`${r.name} IN  (1, 4, 5, 6)`;case"container":case"content":return`${r.name} = 2`;default:return""}}_generateWhereClause(t,i){const r=i.fieldsIndex.get(Ai.status),n=`(${iFe.join(",")})`,o=`${r.name} IN ${n}`;return`(${this._generateGlobalIdWhereClause(t,i)} AND ${o} AND ${this._generateAssociationTypeWhereClause(t,i)})`}async _loadUtiltyNetworks(){var n;const t=this.map;if(!t)return;await Promise.allSettled(((n=t.utilityNetworks)==null?void 0:n.map(async o=>{await o.load()}))??[]);const i=o=>{if("layerId"in o&&r.isUtilityLayer(o)){const c=r.getSourceIdByLayerId(o.layerId);c!==null&&this.networkSourceIdsInUse.add(c)}},r=this.utilityNetwork;this._set("networkSourceIdsInUse",new Set),t.allLayers.forEach(i),t.allTables.forEach(i)}async _findLayersBySourceId(t){const{utilityNetwork:i,map:r}=this,n=_=>{const I=_;return _.url&&I.layerId===o?_.url.replace(/\/\d+$/,"")===(i==null?void 0:i.featureServiceUrl):!1};await(i==null?void 0:i.load());const o=i.getLayerIdBySourceId(t),c=r.allLayers.filter(n),y=r.allTables.filter(n),v=c.concat(y).toArray();return await Promise.allSettled(v.map(_=>_.load())),v}_clearAssociations(){this.attachmentsAssociations.removeAll(),this.structureAssociations.removeAll(),this.contentAssociations.removeAll(),this.containerAssociations.removeAll(),this.connectivityAssociations.removeAll()}_clearFeatures(){this.associationFeatures.forEach(t=>t.removeAll()),this.associationFeatures.clear()}_getAssociationsByType(t){switch(t){case"attachment":return this.attachmentsAssociations;case"structure":return this.structureAssociations;case"connectivity":return this.connectivityAssociations;case"container":return this.containerAssociations;case"content":return this.contentAssociations}}_createAssociationFromFeature(t,i){if(!t)return null;const r=rFe.get(i.attributes[t.fieldsIndex.get(Ai.associationType).name]);return new nFe({globalId:i.attributes[t.fieldsIndex.get(Ai.globalId).name],fromNetworkElement:new z0({globalId:i.attributes[t.fieldsIndex.get(Ai.fromGlobalId).name],networkSourceId:i.attributes[t.fieldsIndex.get(Ai.fromNetworkSourceId).name],terminalId:i.attributes[t.fieldsIndex.get(Ai.fromTerminalId).name]}),toNetworkElement:new z0({globalId:i.attributes[t.fieldsIndex.get(Ai.toGlobalId).name],networkSourceId:i.attributes[t.fieldsIndex.get(Ai.toNetworkSourceId).name],terminalId:i.attributes[t.fieldsIndex.get(Ai.toTerminalId).name]}),associationType:r,status:i.attributes[t.fieldsIndex.get(Ai.status).name],isContentVisible:i.attributes[t.fieldsIndex.get(Ai.isContentVisible).name],percentAlong:i.attributes[t.fieldsIndex.get(Ai.percentAlong).name]})}async _queryLayer(t,i,r,n,o){const c=t.fieldsIndex.get(Ai.assetGroup),y=t.fieldsIndex.get(Ai.assetType),v=r!=null,_=n!=null,I="("+i.map(N=>`'${N}'`).join(", ")+")",$=v?` AND ${c==null?void 0:c.name} = ${r}`:"",A=v&&_?` AND ${y==null?void 0:y.name} = ${n}`:"",k=`${t.globalIdField} IN ${I}`+$+A,R=new ys({outFields:["*"],cacheHint:this.supportsCacheHint,where:k});return await this._queryAll(R,t,{signal:o==null?void 0:o.signal})}async _createAssociationFeatureObjects(t,i,r,n,o,c){if(t.length===0)return[];const y=new Map;for(const[_,I]of i){const $=await this._findLayersBySourceId(_);for(const A of $)(await this._queryLayer(A,I,n,o,c)).forEach(k=>{if(k.getEffectivePopupTemplate()&&k.layer){const R=y.get(k.attributes[A.globalIdField])??[];R.push(k),y.set(k.attributes[A.globalIdField],R)}})}const v=[];return t.toArray().forEach(_=>{const I=_.fromNetworkElement.globalId===r?_.toNetworkElement:_.fromNetworkElement;(y.get(I.globalId)??[]).forEach($=>{var k,R;const A=(R=(k=this.utilityNetwork)==null?void 0:k.getTerminalById(I==null?void 0:I.terminalId))==null?void 0:R.name;v.push({association:_,feature:$,terminalName:A})})}),v}_parseFeatureObjects(t,i){t.forEach(r=>{const n=r==null?void 0:r.feature,o=n.layer,c=i.get(o)??new Oe;c.add(r),i.set(o,c)})}async _queryAll(t,i,r){var y;const n=[];let o=0,c=!1;t.num=((y=i.sourceJSON)==null?void 0:y.maxRecordCount)??2e3;do{t.start=o;const v=await i.queryFeatures(t,r);n.push(...v.features),c=v.exceededTransferLimit,c&&(o+=v.features.length)}while(c);return n}async _queryAssociatedFeatureCount(t){const{layer:i,globalId:r,supportsCacheHint:n,associationTypes:o,associationsLayer:c,utilityNetwork:y,canQuery:v}=this;if(await Promise.allSettled([i==null?void 0:i.load(),y==null?void 0:y.load(),c==null?void 0:c.load()]),this._clearAssociations(),!(v&&i&&o&&c))return;const _=c.fieldsIndex.get(Ai.toGlobalId).name,I=c.fieldsIndex.get(Ai.fromGlobalId).name,$=o.map(z=>this._generateWhereClause(z,c)),A=this._generateNetworkSourceIdWhereClause(c),k=$.join(" OR "),R=new ys({outFields:["*"],cacheHint:n,returnGeometry:!1,where:`(${k}) AND (${A})`}),N=await this._queryAll(R,c,{signal:t==null?void 0:t.signal}),D=new Map;o.forEach(z=>{D.set(z.type,[])}),N.forEach(z=>{const U=c.fieldsIndex.get(Ai.associationType);switch(z.attributes[U.name]){case 1:case 4:case 5:case 6:z.attributes[I]===r?D.get("connectivity").push(z.attributes[_]):D.get("connectivity").push(z.attributes[I]),this.connectivityAssociations.add(this._createAssociationFromFeature(c,z));break;case 2:z.attributes[I]===r?(D.get("content").push(z.attributes[_]),this.contentAssociations.add(this._createAssociationFromFeature(c,z))):(D.get("container").push(z.attributes[I]),this.containerAssociations.add(this._createAssociationFromFeature(c,z)));break;case 3:z.attributes[I]===r?(D.get("attachment").push(z.attributes[_]),this.attachmentsAssociations.add(this._createAssociationFromFeature(c,z))):(D.get("structure").push(z.attributes[I]),this.structureAssociations.add(this._createAssociationFromFeature(c,z)))}});const j=o.map(async z=>{const{associatedNetworkSourceId:U,associatedAssetGroup:W,associatedAssetType:Q}=z,K=D.get(z.type),ee=W!=null?await this._countAssociatedFeatures(U,K,W,Q,t):K.length;switch(z.type){case"attachment":this._set("attachmentsFeatureCount",ee);break;case"structure":this._set("structureFeatureCount",ee);break;case"content":this._set("contentFeatureCount",ee);break;case"container":this._set("containerFeatureCount",ee);break;case"connectivity":this._set("connectivityFeatureCount",ee)}});await Promise.allSettled(j)}async _countAssociatedFeatureCount(t,i,r,n,o){const c=t.fieldsIndex.get(Ai.assetGroup),y=t.fieldsIndex.get(Ai.assetType),v=n!=null,_="("+i.map(k=>`'${k}'`).join(", ")+")",I=` AND ${c==null?void 0:c.name} = ${r}`,$=v?` AND ${y==null?void 0:y.name} = ${n}`:"",A=`${t.globalIdField} IN ${_}`+I+$;return t.queryFeatureCount({where:A,outFields:["*"],returnGeometry:!1},{signal:o==null?void 0:o.signal})}async _countAssociatedFeatures(t,i,r,n,o){if(i.length===0)return 0;const c=(await this._findLayersBySourceId(t)).map(async y=>this._countAssociatedFeatureCount(y,i,r,n,o));return(await Promise.all(c)).reduce((y,v)=>y+v,0)}async _queryAssociatedFeatures(t,i){const{layer:r,globalId:n,associationTypes:o,associationsLayer:c,utilityNetwork:y,canQuery:v,associationFeatures:_}=this;if(await Promise.allSettled([r==null?void 0:r.load(),y==null?void 0:y.load(),c==null?void 0:c.load()]),!(v&&r&&o&&c))return;const I=this._getAssociationsByType(t.type),{associatedAssetGroup:$,associatedAssetType:A}=t,k=new Map;I.forEach(N=>{const{networkSourceId:D,elementGlobalId:j}=N.fromNetworkElement.globalId===n?{networkSourceId:N.toNetworkElement.networkSourceId,elementGlobalId:N.toNetworkElement.globalId}:{networkSourceId:N.fromNetworkElement.networkSourceId,elementGlobalId:N.fromNetworkElement.globalId},z=k.get(D)||[];z.push(j),k.set(D,z)});const R=await this._createAssociationFeatureObjects(I,k,n,$,A,i);this._parseFeatureObjects(R,_)}async _queryFeatureCount(){await this._loadUtiltyNetworks();const{_queryFeatureCountAbortController:t,canQuery:i}=this;i?(await this._queryAssociatedFeatureCount(t),this._set("featureCount",this.attachmentsFeatureCount+this.structureFeatureCount+this.contentFeatureCount+this.containerFeatureCount+this.connectivityFeatureCount)):this._set("featureCount",0)}async _query(t){await this._loadUtiltyNetworks();const{_queryAbortController:i}=this;this.featureCount&&(this._destroyAssociatedFeatureViewModels(),this._clearFeatures(),this.destroyed||await this._queryAssociatedFeatures(t,{signal:i==null?void 0:i.signal}))}};m([w()],Nt.prototype,"_loaded",void 0),m([w()],Nt.prototype,"_queryAbortController",void 0),m([w()],Nt.prototype,"_queryPageAbortController",void 0),m([w()],Nt.prototype,"_queryFeatureCountAbortController",void 0),m([w({readOnly:!0})],Nt.prototype,"supportsCacheHint",null),m([w({readOnly:!0})],Nt.prototype,"canLoad",null),m([w({readOnly:!0})],Nt.prototype,"canQuery",null),m([w()],Nt.prototype,"networkSourceIdsInUse",void 0),m([w()],Nt.prototype,"description",void 0),m([w({type:er})],Nt.prototype,"graphic",void 0),m([w()],Nt.prototype,"layer",void 0),m([w()],Nt.prototype,"map",void 0),m([w({readOnly:!0})],Nt.prototype,"objectId",null),m([w({readOnly:!0})],Nt.prototype,"objectIdField",null),m([w({readOnly:!0})],Nt.prototype,"globalId",null),m([w({readOnly:!0})],Nt.prototype,"globalIdField",null),m([w()],Nt.prototype,"featureCount",void 0),m([w()],Nt.prototype,"associationTypes",void 0),m([w()],Nt.prototype,"showAllEnabled",void 0),m([w()],Nt.prototype,"state",null),m([w()],Nt.prototype,"title",void 0),m([w({readOnly:!0})],Nt.prototype,"utilityNetwork",null),m([w({readOnly:!0})],Nt.prototype,"associationsLayer",null),m([w({readOnly:!0})],Nt.prototype,"attachmentsFeatureCount",void 0),m([w({readOnly:!0})],Nt.prototype,"structureFeatureCount",void 0),m([w({readOnly:!0})],Nt.prototype,"attachmentsAssociations",null),m([w({readOnly:!0})],Nt.prototype,"structureAssociations",null),m([w({readOnly:!0})],Nt.prototype,"contentFeatureCount",void 0),m([w({readOnly:!0})],Nt.prototype,"containerFeatureCount",void 0),m([w({readOnly:!0})],Nt.prototype,"contentAssociations",null),m([w({readOnly:!0})],Nt.prototype,"containerAssociations",null),m([w({readOnly:!0})],Nt.prototype,"connectivityFeatureCount",void 0),m([w({readOnly:!0})],Nt.prototype,"connectivityAssociations",null),m([w({readOnly:!0})],Nt.prototype,"associationFeatures",null),m([w({readOnly:!0})],Nt.prototype,"associationViewModels",null),Nt=m([H("esri.widgets.Feature.FeatureUtilityNetworkAssociations.FeatureUtilityNetworkAssociationsViewModel")],Nt);const B3=Nt;let tb=class extends Ve{constructor(t){super(t),this.title=!0,this.description=!0}};m([w({type:Boolean,nonNullable:!0})],tb.prototype,"title",void 0),m([w({type:Boolean,nonNullable:!0})],tb.prototype,"description",void 0),tb=m([H("esri.widgets.Feature.FeatureUtilityNetworkAssociations.VisibleElements")],tb);const xT=tb;var nk;const ib="esri-feature",xy=`${ib}-relationship`,Iy={base:xy,listContainer:`${xy}__list`,listItem:`${xy}__list-item`,listItemHidden:`${xy}__list-item--hidden`,listContainerQuerying:`${xy}__list--querying`,featureObserver:`${ib}__feature-observer`,stickySpinnerContainer:`${ib}__sticky-loading-container`,loadingSpinnerContainer:`${ib}__loading-container`,expander:`${xy}__expander`,filterContainer:`${ib}__filter-container`};let Di=nk=class extends yi{constructor(e,t){super(e,t),this.flowType="feature-utility-network-association-type",this.description=null,this.headingLevel=2,this.title=null,this.viewModel=new B3,this.parentFeatureViewModel=null,this.listType=null,this.selectedLayer=null,this.flowItems=null,this.messages=null,this.messagesCommon=null,this.visibleElements=new xT,this._featuresPerPage=50,this._maxNumFeatures=1e3,this._currentFeaturePage=1,this._previewDisplayCount=3,this._associatedFeatureIntersectionObserverNode=null,this._associatedFeatureIntersectionObserver=new IntersectionObserver(([i])=>{i!=null&&i.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this._tooltipReferenceMap=new Wd,this._filterText=""}initialize(){this.addHandles([ge(()=>[this._associatedFeatureIntersectionObserverNode],()=>this._handleAssociatedFeatureObserverChange())])}loadDependencies(){return Vn({chip:()=>de(()=>import("./calcite-chip-CKQgYpqO.js"),[],import.meta.url),icon:()=>de(()=>import("./calcite-icon-D67BMpQP.js"),[],import.meta.url),input:()=>de(()=>import("./calcite-input-UowSw7tJ.js"),[],import.meta.url),loader:()=>de(()=>import("./calcite-loader-CkzKaCO4.js"),__vite__mapDeps([221,195]),import.meta.url),list:()=>de(()=>import("./calcite-list-BeSrBmBe.js"),__vite__mapDeps([222,223,224,195,225]),import.meta.url),"list-item":()=>de(()=>import("./calcite-list-item-bKE4O7k7.js"),__vite__mapDeps([226,224,223,227,195]),import.meta.url),tooltip:()=>de(()=>import("./calcite-tooltip-BuTh6UsD.js"),__vite__mapDeps([230,231,229,232]),import.meta.url)})}destroy(){this._tooltipReferenceMap.clear()}get _numAssociatedFeatures(){const e=this.viewModel.associationViewModels;return this.selectedLayer?e.get(this.selectedLayer).length:0}set currentFeaturePage(e){const{_featuresPerPage:t,_numAssociatedFeatures:i}=this,r=1,n=Math.ceil(i/t)||1;this._currentFeaturePage=Math.max(Math.min(e,n),r)}get currentFeaturePage(){return this._currentFeaturePage}render(){const e=this.viewModel.associationViewModels,{state:t,showAllEnabled:i}=this.viewModel,{state:r}=this.parentFeatureViewModel??{};return B("div",{class:this.classes(Iy.base,ze.widget)},t==="loading"||t==="querying"||r==="loading"?this._renderLoading():B("calcite-list",null,i&&this.selectedLayer?B(Une,null,this._renderFilter(),this._renderAssociatedFeatureListPage(),this._renderFeatureObserver()):Array.from(e.keys(),n=>this._renderTypeList(n,e.get(n)))))}_renderFilter(){return B("div",{class:Iy.filterContainer,key:"filter"},B("calcite-input",{icon:"search",placeholder:this.messages.associationFilterPlaceholder,type:"search",onCalciteInputInput:e=>{this._filterText=e.target.value.trim().toLowerCase(),this._currentFeaturePage=1}}))}_showAllAssociations(e){const{flowItems:t,viewModel:i,description:r}=this;if(!t||!e)return;i.showAllEnabled=!0;const n=new nk({selectedLayer:e,title:e==null?void 0:e.title,flowItems:t,parentFeatureViewModel:this.parentFeatureViewModel,featureVisibleElements:this.featureVisibleElements,description:r,visibleElements:{title:!1,description:!1},viewModel:i});t.push(n)}_renderAssociatedFeatureListPage(){const{currentFeaturePage:e,_featuresPerPage:t,_maxNumFeatures:i,_filterText:r}=this,n=Math.min(e*t,i),o=this.viewModel.associationViewModels.get(this.selectedLayer).filter(c=>$4(c.featureViewModel).toLowerCase().includes(r)).slice(0,n);return[...this._renderTooltips(o),...this._renderAssociatedFeatureList(o)]}async _handleAssociatedFeatureObserverChange(){this._associatedFeatureIntersectionObserverNode&&this._associatedFeatureIntersectionObserver.unobserve(this._associatedFeatureIntersectionObserverNode);const{state:e,showAllEnabled:t}=this.viewModel;await G0(0),this._associatedFeatureIntersectionObserverNode&&e==="ready"&&t&&this._associatedFeatureIntersectionObserver.observe(this._associatedFeatureIntersectionObserverNode)}_associatedFeatureIntersectionObserverCreated(e){this._associatedFeatureIntersectionObserverNode=e}_renderFeatureObserver(){return B("div",{afterCreate:this._associatedFeatureIntersectionObserverCreated,bind:this,class:Iy.featureObserver,key:"feature-observer"})}_increaseFeaturePage(){this.currentFeaturePage++}_renderLoading(){return B("div",{class:Iy.loadingSpinnerContainer,key:"loading-container"},this._renderLoadingIcon())}_renderLoadingIcon(){return B("calcite-loader",{inline:!0,label:""})}isConnectivity(e){return["connectivity","junction-junction-connectivity","junction-edge-from-connectivity","junction-midspan-connectivity","junction-edge-to-connectivity"].includes(e.association.associationType)}_getConnectivityTooltip(e){switch(e){case"connectivity":case"junction-junction-connectivity":return this.messages.associationsJunctionJunction;case"junction-edge-from-connectivity":return this.messages.associationsJunctionEdgeFrom;case"junction-midspan-connectivity":return this.messages.associationsJunctionEdgeMidspan;case"junction-edge-to-connectivity":return this.messages.associationsJunctionEdgeTo;default:return""}}_renderItemTooltip(e){const{_tooltipReferenceMap:t}=this;return this.isConnectivity(e)?B("calcite-tooltip",{key:`tooltip-${e.featureViewModel.uid}`,referenceElement:t.get(e.featureViewModel.uid)},this._getConnectivityTooltip(e.association.associationType)):null}_renderConnectivityIcon(e,t){let i;switch(e){case"junction-edge-from-connectivity":i="connection-end-left";break;case"junction-edge-to-connectivity":i="connection-end-right";break;case"junction-midspan-connectivity":i="connection-middle";break;default:i="connection-to-connection"}return B("calcite-icon",{afterCreate:r=>this._tooltipReferenceMap.set(t,r),afterRemoved:()=>this._tooltipReferenceMap.delete(t),icon:i,scale:"s",slot:"content-start"})}_formatPercentAlong(e){return`${jn(e.association.percentAlong,{style:"percent",maximumFractionDigits:2})}`}_renderAssociatedFeature(e){const{featureViewModel:t}=e,i=$4(t),r=t.state==="loading",n=this._findFlowItem(t),o=n<0&&this._isParentFeature(t),c=o||n>=0,y=this.isConnectivity(e),v=y&&e.association.associationType==="junction-midspan-connectivity";return B("calcite-list-item",{class:this.classes(Iy.listItem,{[Iy.listItemHidden]:r}),description:e.terminalName??"",key:`associated-feature-type-${t.uid}`,label:i,onCalciteListItemSelect:()=>this._handleFeatureClick(o,n,t)},y?this._renderConnectivityIcon(e.association.associationType,e.featureViewModel.uid):null,v?B("calcite-chip",{scale:"s",slot:"content-end",value:e.association.percentAlong},this._formatPercentAlong(e)):null,this._renderChevronIconNode(c))}async _selectAssociation(e){const{flowItems:t,featureVisibleElements:i}=this;if(!t)return;e.abilities={utilityNetworkAssociationsContent:!0};const{default:r}=await de(()=>Promise.resolve().then(()=>qae),void 0,import.meta.url);t.push(new r({flowItems:t,flowType:"feature-association",viewModel:e,visibleElements:i}))}_handleFeatureClick(e,t,i){if(e)this.flowItems.drain(r=>{"showAllEnabled"in r.viewModel&&(r.viewModel.showAllEnabled=!1),r.viewModel=null,r.destroy()});else if(t<0||!this.flowItems)this._selectAssociation(i);else for(;this.flowItems.length>t+1;){const r=this.flowItems.pop();r&&("showAllEnabled"in r.viewModel&&(r.viewModel.showAllEnabled=!1),r.viewModel=null,r.destroy())}}_featureViewModelMatch(e,t){const i=e.graphic,r=i==null?void 0:i.layer;let n=null;(r==null?void 0:r.type)==="subtype-sublayer"&&r.parent?n=r.parent.globalIdField??null:r&&"globalIdField"in r&&(n=r.globalIdField);const o=n?i==null?void 0:i.attributes[n]:null,c=t.graphic,y=c==null?void 0:c.layer;let v=null;(y==null?void 0:y.type)==="subtype-sublayer"&&y.parent?v=y.parent.globalIdField??null:y&&"globalIdField"in y&&(v=y.globalIdField);const _=v?c==null?void 0:c.attributes[v]:null;return o&&_&&o===_}_isParentFeature(e){var r;const t=(r=this.flowItems)==null?void 0:r.getItemAt(0);if(!t)return!1;const i=t.parentFeatureViewModel;return this._featureViewModelMatch(i,e)}_findFlowItem(e){var t;return((t=this.flowItems)==null?void 0:t.findIndex(i=>{if(i.flowType!=="feature")return!1;const r=i.viewModel;return this._featureViewModelMatch(r,e)}))??-1}_renderTooltips(e){return e.toArray().map(t=>this._renderItemTooltip(t))}_renderAssociatedFeatureList(e){return e.toArray().map(t=>this._renderAssociatedFeature(t))}_renderChevronIconNode(e){return B("calcite-icon",{flipRtl:!0,icon:e?"move-up":"chevron-right",scale:"s",slot:"content-end"})}_renderTypeList(e,t){const{messages:i}=this,r=t.slice(0,this._previewDisplayCount),n=r.length<t.length;return B("calcite-list-item",{key:"show-all",label:e.title,open:!0,value:e.id},B("calcite-chip",{scale:"s",slot:"actions-end",value:e.id},t.length),B("calcite-list",{group:e.id},[this._renderTooltips(r),this._renderAssociatedFeatureList(r)],n?B("calcite-list-item",{description:mn(i==null?void 0:i.numberRecords,{number:t.length.toString()}),key:"show-all-item",label:i.showAll,onCalciteListItemSelect:()=>this._showAllAssociations(e)},B("calcite-icon",{icon:"list",scale:"s",slot:"content-end"})):null))}};m([w()],Di.prototype,"flowType",void 0),m([w()],Di.prototype,"description",void 0),m([w()],Di.prototype,"headingLevel",void 0),m([w()],Di.prototype,"title",void 0),m([w({type:B3})],Di.prototype,"viewModel",void 0),m([w()],Di.prototype,"parentFeatureViewModel",void 0),m([w()],Di.prototype,"listType",void 0),m([w()],Di.prototype,"selectedLayer",void 0),m([w()],Di.prototype,"featureVisibleElements",void 0),m([w()],Di.prototype,"flowItems",void 0),m([w(),Ht("esri/widgets/Feature/t9n/Feature")],Di.prototype,"messages",void 0),m([w(),Ht("esri/t9n/common")],Di.prototype,"messagesCommon",void 0),m([w({type:xT,nonNullable:!0})],Di.prototype,"visibleElements",void 0),m([w()],Di.prototype,"_featuresPerPage",void 0),m([w()],Di.prototype,"_maxNumFeatures",void 0),m([w()],Di.prototype,"_numAssociatedFeatures",null),m([w()],Di.prototype,"_currentFeaturePage",void 0),m([w()],Di.prototype,"currentFeaturePage",null),m([w()],Di.prototype,"_previewDisplayCount",void 0),m([w()],Di.prototype,"_associatedFeatureIntersectionObserverNode",void 0),m([w()],Di.prototype,"_tooltipReferenceMap",void 0),m([w()],Di.prototype,"_filterText",void 0),Di=nk=m([H("esri.widgets.Feature.FeatureUtilityNetworkAssociationType")],Di);const sFe=Di,wx="esri-feature",Ty=`${wx}-relationship`,Fv={base:Ty,listContainer:`${Ty}__list`,listItem:`${Ty}__list-item`,listItemHidden:`${Ty}__list-item--hidden`,listContainerQuerying:`${Ty}__list--querying`,featureObserver:`${wx}__feature-observer`,stickySpinnerContainer:`${wx}__sticky-loading-container`,loadingSpinnerContainer:`${wx}__loading-container`,expander:`${Ty}__expander`};let Ws=class extends yi{constructor(t,i){super(t,i),this._featureElementInfo=null,this.flowType="feature-utility-network-associations",this.flowItems=null,this.parentFeatureViewModel=null,this.headingLevel=2,this.viewModel=new B3,this.messages=null,this.messagesCommon=null,this.visibleElements=new xT}initialize(){this._featureElementInfo=new O3,this.addHandles([ge(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),qe)])}loadDependencies(){return Vn({chip:()=>de(()=>import("./calcite-chip-CKQgYpqO.js"),[],import.meta.url),icon:()=>de(()=>import("./calcite-icon-D67BMpQP.js"),[],import.meta.url),loader:()=>de(()=>import("./calcite-loader-CkzKaCO4.js"),__vite__mapDeps([221,195]),import.meta.url),notice:()=>de(()=>import("./calcite-notice-ikeUYD1p.js"),__vite__mapDeps([228,229]),import.meta.url),list:()=>de(()=>import("./calcite-list-BeSrBmBe.js"),__vite__mapDeps([222,223,224,195,225]),import.meta.url),"list-item":()=>de(()=>import("./calcite-list-item-bKE4O7k7.js"),__vite__mapDeps([226,224,223,227,195]),import.meta.url)})}destroy(){this._featureElementInfo=ci(this._featureElementInfo)}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}render(){var i;const{state:t}=this.viewModel;return B("div",{class:this.classes(Fv.base,ze.widget)},(i=this._featureElementInfo)==null?void 0:i.render(),t==="loading"?this._renderLoading():t==="disabled"?this._renderAssociationNotFound():this._renderContent())}_renderStickyLoading(){return this.viewModel.state==="querying"?B("div",{class:Fv.stickySpinnerContainer,key:"sticky-loader"},this._renderLoadingIcon()):null}_renderLoadingIcon(){return B("calcite-loader",{inline:!0,label:""})}_renderLoading(){return B("div",{class:Fv.loadingSpinnerContainer,key:"loading-container"},this._renderLoadingIcon())}_renderAssociationNotFound(){var t;return B("calcite-notice",{icon:"exclamation-mark-triangle",key:"association-not-found",kind:"danger",open:!0,scale:"s",width:"full"},B("div",{slot:"message"},(t=this.messages)==null?void 0:t.noAssociations))}_setupFeatureElementInfo(){var o;const{headingLevel:t,visibleElements:i}=this,r=i.description&&this.description,n=i.title&&this.title;(o=this._featureElementInfo)==null||o.set({description:r,title:n,headingLevel:t})}_getAssociationTypeTitle(t){const{messages:i}=this;if(t.title)return t.title;switch(t.type){case"attachment":return i.associationsAttachments;case"connectivity":return i.associationsConnectivity;case"structure":return i.associationsStructure;case"content":return i.associationsContents;case"container":return i.associationsContainer}}_selectAssociationType(t){var y;const{viewModel:i,flowItems:r,parentFeatureViewModel:n}=this;if(!r)return;const{associationTypes:o}=i;o.forEach(v=>{v.type===t.type?v.open=!0:v.open=!1});const c=new sFe({viewModel:i,parentFeatureViewModel:n,listType:t,title:this._getAssociationTypeTitle(t),featureVisibleElements:this.featureVisibleElements,description:(y=this.parentFeatureViewModel)==null?void 0:y.title,flowItems:r});r.push(c)}_renderAssociationType(t){const i=this._getAssociationTypeTitle(t);return B("calcite-list-item",{description:t.description,key:`association-type-${t.type}`,label:i,value:t.type,onCalciteListItemSelect:()=>this._selectAssociationType(t)},B("calcite-chip",{scale:"s",slot:"content-end",value:t.type},this._getFeatureCount(t.type)),B("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"}))}_getFeatureCount(t){switch(t){case"attachment":return this.viewModel.attachmentsFeatureCount;case"structure":return this.viewModel.structureFeatureCount;case"content":return this.viewModel.contentFeatureCount;case"container":return this.viewModel.containerFeatureCount;case"connectivity":return this.viewModel.connectivityFeatureCount}}_renderAssociations(t){return B("div",null,this._getFeatureCount(t.type)>0?this._renderAssociationType(t):null)}_renderContent(){const{state:t,associationTypes:i}=this.viewModel;return B("div",{class:this.classes(Fv.listContainer,{[Fv.listContainerQuerying]:t==="querying"}),key:"list-container"},t==="ready"?B("calcite-list",null,i.map(r=>this._renderAssociations(r))):null,this._renderStickyLoading())}};m([w()],Ws.prototype,"flowType",void 0),m([w()],Ws.prototype,"flowItems",void 0),m([w()],Ws.prototype,"parentFeatureViewModel",void 0),m([w()],Ws.prototype,"featureVisibleElements",void 0),m([w()],Ws.prototype,"description",null),m([w()],Ws.prototype,"headingLevel",void 0),m([w()],Ws.prototype,"title",null),m([w({type:B3})],Ws.prototype,"viewModel",void 0),m([w(),Ht("esri/widgets/Feature/t9n/Feature")],Ws.prototype,"messages",void 0),m([w(),Ht("esri/t9n/common")],Ws.prototype,"messagesCommon",void 0),m([w({type:xT,nonNullable:!0})],Ws.prototype,"visibleElements",void 0),Ws=m([H("esri.widgets.Feature.FeatureUtilityNetworkAssociations")],Ws);const oFe=Ws;let aFe=class{constructor(t,i){this.preLayerQueryCallback=t,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=r=>{}),this.preRequestCallback||(this.preLayerQueryCallback=r=>{})}};var xm;const lFe=1,$q="content-view-models",Eq="relationship-view-models",uFe="association-view-models",Mq={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0,utilityNetworkAssociationsContent:!0};let vi=xm=class extends Cl(Ve){constructor(e){super(e),this._error=null,this._featureAbortController=null,this._associationVMAbortController=null,this._graphicChangedThrottled=GR(this._graphicChanged,lFe,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...Mq},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.location=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=t=>{const{abilities:i}=this;return t.type==="attachments"&&!!i.attachmentsContent||t.type==="custom"&&!!i.customContent||t.type==="fields"&&!!i.fieldsContent||t.type==="media"&&!!i.mediaContent||t.type==="text"&&!!i.textContent||t.type==="expression"&&!!i.expressionContent||t.type==="relationship"&&!!i.relationshipContent||t.type==="utility-network-associations"&&!!i.utilityNetworkAssociationsContent},this.addHandles(ge(()=>[this.graphic,this._effectivePopupTemplate,this.abilities,this.timeZone],()=>this._graphicChangedThrottled(),qe))}initialize(){this.addHandles(this._graphicChangedThrottled)}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return this.graphic!=null?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return pCe(_U(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return cse(this.graphic)}castAbilities(e){return{...Mq,...e}}get isTable(){var e;return((e=this._sourceLayer)==null?void 0:e.isTable)||!1}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(e){this._featureAbortController=new AbortController,this._set("graphic",(e==null?void 0:e.clone())??null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)??null}set spatialReference(e){this._override("spatialReference",e)}get timeZone(){var e;return((e=this.view)==null?void 0:e.timeZone)??Uo}set timeZone(e){this._overrideIfSome("timeZone",e)}get map(){var e;return((e=this.view)==null?void 0:e.map)||null}set map(e){this._override("map",e)}get waitingForContent(){return!(!this._featureAbortController&&!this._associationVMAbortController)}setActiveMedia(e,t){const i=this.contentViewModels[e];i instanceof Xf&&i.setActiveMedia(t)}nextMedia(e){const t=this.contentViewModels[e];t instanceof Xf&&t.next()}previousMedia(e){const t=this.contentViewModels[e];t instanceof Xf&&t.previous()}async updateGeometry(){var c;const{graphic:e,spatialReference:t,_sourceLayer:i}=this;await(i==null?void 0:i.load());const r=i==null?void 0:i.objectIdField;if(!r||!e||!i)return;const n=(c=e==null?void 0:e.attributes)==null?void 0:c[r];if(n==null)return;const o=[n];if(!e.geometry){const y=await vse({layer:i,graphic:e,outFields:[],objectIds:o,returnGeometry:!0,spatialReference:t}),v=y==null?void 0:y.geometry;v&&(e.geometry=v)}}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:e}=this;if(!e)return;const t=new AbortController;this._featureAbortController=t;try{await this._queryFeature({signal:t.signal})}catch(i){br(i)||(this._error=i,_e.getLogger(this).error("error","The popupTemplate could not be displayed for this feature.",{error:i,graphic:e,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===t&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:e}=this;e&&e.abort(),this._featureAbortController=null}_compileContentElement(e,t){return e.type==="attachments"?this._compileAttachments(e,t):e.type==="custom"?this._compileCustom(e,t):e.type==="fields"?this._compileFields(e,t):e.type==="media"?this._compileMedia(e,t):e.type==="text"?this._compileText(e,t):e.type==="expression"?this._compileExpression(e,t):e.type==="relationship"?this._compileRelationship(e,t):e.type==="utility-network-associations"?this._compileUtilityNetworkAssociation(e,t):void 0}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map((t,i)=>this._compileContentElement(t,i)).filter(Ar):typeof e=="string"?this._compileText(new N0({text:e}),0).text:e}_destroyContentViewModels(){this.removeHandles(Eq),this.removeHandles($q),this.contentViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("contentViewModels",[])}_matchesFeature(e,t){var n;const i=(n=e==null?void 0:e.graphic)==null?void 0:n.getObjectId(),r=t==null?void 0:t.getObjectId();return i!=null&&r!=null&&i===r}_setRelatedFeaturesViewModels({relatedFeatureViewModels:e,relatedFeatures:t,map:i}){const{view:r,spatialReference:n,timeZone:o}=this;t==null||t.filter(Boolean).forEach(c=>{e.some(y=>this._matchesFeature(y,c))||e.add(new xm({abilities:{relationshipContent:!1},map:i,view:r,spatialReference:n,timeZone:o,graphic:c}))}),e.forEach(c=>{(t==null?void 0:t.find(v=>this._matchesFeature(c,v)))||e.remove(c)})}_setExpressionContentVM(e,t){const i=this.formattedAttributes,{contentElement:r,contentElementViewModel:n}=e,o=r==null?void 0:r.type;n&&o&&(o==="fields"&&(this._createFieldsFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),n.set(this._createFieldsVMParams(r,t))),o==="media"&&(this._createMediaFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),n.set(this._createMediaVMParams(r,t))),o==="text"&&n.set(this._createTextVMParams(r)))}_compileRelationship(e,t){const{displayCount:i,orderByFields:r,relationshipId:n,title:o,description:c}=e,{_sourceLayer:y,graphic:v,map:_}=this;if(!yse(y))return;const I=new RP({displayCount:i,graphic:v,orderByFields:r,relationshipId:n,layer:y,map:_,...this._compileTitleAndDesc({title:o,description:c})});return this.contentViewModels[t]=I,this.addHandles(tn(()=>I.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(I)),Eq),e}_matchesGlobalFeature(e,t){const i=e==null?void 0:e.association.globalId,r=t==null?void 0:t.association.globalId;return i!=null&&r!=null&&i===r}async _setUpUtilityNetworkAssociationsViewModels(e,t,i){const{view:r,spatialReference:n,timeZone:o}=this;e.forEach((y,v)=>{const _=t.get(v);_?y.forEach(I=>{_.find($=>this._matchesGlobalFeature(I,$))||(y.remove(I),y.length===0&&e.delete(v))}):(y.removeAll(),e.delete(v))}),t.forEach((y,v)=>{const _=e.get(v)||new Oe;y==null||y.filter(Boolean).forEach(I=>{_.some($=>this._matchesGlobalFeature($,I))||_.add({association:I.association,featureViewModel:new xm({abilities:{utilityNetworkAssociationsContent:!1},map:i,view:r,spatialReference:n,timeZone:o,graphic:I.feature}),terminalName:I.terminalName})}),e.set(v,_)});const c=new AbortController;this._associationVMAbortController=c,await this._sortListObjectsByTitle(e,{signal:c.signal}),this._associationVMAbortController===c&&(this._associationVMAbortController=null)}async _sortListObjectsByTitle(e,t){for(const i of e.values()){const r=i.map(n=>Ou(()=>n.featureViewModel.state==="ready",t==null?void 0:t.signal));await Promise.all(r),i.sort(this._compareByFeatureTitle)}}_compareByFeatureTitle(e,t){const i=$4(e.featureViewModel),r=$4(t.featureViewModel);return i.localeCompare(r,void 0,{numeric:!0})}_compileUtilityNetworkAssociation(e,t){const{title:i,description:r,associationTypes:n}=e,{_sourceLayer:o,graphic:c,map:y}=this;if(!aCe(o))return;const v=new B3({graphic:c,associationTypes:n,layer:o,map:y,...this._compileTitleAndDesc({title:i,description:r})});return this.contentViewModels[t]=v,this.addHandles([ge(()=>v.associationFeatures.values(),()=>this._setUpUtilityNetworkAssociationsViewModels(v.associationViewModels,v.associationFeatures,v.map))],uFe),e}_compileExpression(e,t){const{expressionInfo:i}=e,{graphic:r,map:n,spatialReference:o,view:c,location:y}=this,v=new OP({expressionInfo:i,graphic:r,interceptor:xm.interceptor,map:n,spatialReference:o,view:c,location:y});return this.contentViewModels[t]=v,this.addHandles(ge(()=>v.contentElementViewModel,()=>this._setExpressionContentVM(v,t),qe),$q),e}_compileAttachments(e,t){const{graphic:i}=this,{description:r,title:n}=e;return this.contentViewModels[t]=new YR({graphic:i,...this._compileTitleAndDesc({title:n,description:r})}),e}_compileCustom(e,t){const{graphic:i}=this,{creator:r,destroyer:n}=e;return this.contentViewModels[t]=new v4({graphic:i,creator:r,destroyer:n}),e}_compileTitleAndDesc({title:e,description:t}){const{_fieldInfoMap:i,_sourceLayer:r,graphic:n,formattedAttributes:o}=this,c=n==null?void 0:n.attributes,y=this._expressionAttributes,v=o.global;return{title:Yf({attributes:c,fieldInfoMap:i,globalAttributes:v,expressionAttributes:y,layer:r,text:e}),description:Yf({attributes:c,fieldInfoMap:i,globalAttributes:v,expressionAttributes:y,layer:r,text:t})}}_createFieldsVMParams(e,t){const i=this._effectivePopupTemplate,r=this.formattedAttributes,n={...r==null?void 0:r.global,...r==null?void 0:r.content[t]},o=(e==null?void 0:e.fieldInfos)||(i==null?void 0:i.fieldInfos),c=o==null?void 0:o.filter(({fieldName:I})=>!!I&&(WR(I)||Vc(I)||n.hasOwnProperty(I))),y=i==null?void 0:i.expressionInfos,{description:v,title:_}=e;return{attributes:n,expressionInfos:y,fieldInfos:c,...this._compileTitleAndDesc({title:_,description:v})}}_compileFields(e,t){const i=e.clone(),r=new uT(this._createFieldsVMParams(e,t));return this.contentViewModels[t]=r,i.fieldInfos=r.formattedFieldInfos.slice(),i}_createMediaVMParams(e,t){const{abilities:i,graphic:r,_fieldInfoMap:n,_effectivePopupTemplate:o,relatedInfos:c,_sourceLayer:y,_expressionAttributes:v}=this,_=this.formattedAttributes,I=(r==null?void 0:r.attributes)??{},{description:$,mediaInfos:A,title:k}=e;return{abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:I,isAggregate:r==null?void 0:r.isAggregate,layer:y,fieldInfoMap:n,formattedAttributes:{..._==null?void 0:_.global,..._==null?void 0:_.content[t]},expressionAttributes:v,mediaInfos:A,popupTemplate:o,relatedInfos:c,...this._compileTitleAndDesc({title:k,description:$})}}_compileMedia(e,t){const i=e.clone(),r=new Xf(this._createMediaVMParams(e,t));return i.mediaInfos=r.formattedMediaInfos.slice(),this.contentViewModels[t]=r,i}_createTextVMParams(e){var o;const{graphic:t,_fieldInfoMap:i,_sourceLayer:r,_expressionAttributes:n}=this;if(e&&e.text){const c=(t==null?void 0:t.attributes)??{},y=((o=this.formattedAttributes)==null?void 0:o.global)??{};e.text=Yf({attributes:c,fieldInfoMap:i,globalAttributes:y,expressionAttributes:n,layer:r,text:e.text})}return{graphic:t,creator:e.text}}_compileText(e,t){const i=e.clone();return this.contentViewModels[t]=new v4(this._createTextVMParams(i)),i}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:t,graphic:i,timeZone:r}=this;if(!e)return;const{lastEditInfoEnabled:n}=e,o=t==null?void 0:t.editFieldsInfo;return n&&o?dCe(o,i==null?void 0:i.attributes,r,t):void 0}_compileTitle(e){var y;const{_fieldInfoMap:t,_sourceLayer:i,graphic:r,_expressionAttributes:n}=this,o=(r==null?void 0:r.attributes)??{},c=((y=this.formattedAttributes)==null?void 0:y.global)??{};return Yf({attributes:o,fieldInfoMap:t,globalAttributes:c,expressionAttributes:n,layer:i,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:t}=this;return t?g4({type:"title",value:e==null?void 0:e.title,event:{graphic:t}}):null}async _getContent(){const{_effectivePopupTemplate:e,graphic:t}=this;return t?g4({type:"content",value:e==null?void 0:e.content,event:{graphic:t}}):null}async _queryFeature(e){const{_featureAbortController:t,_sourceLayer:i,graphic:r,_effectivePopupTemplate:n}=this,o=this.map,c=this.view,y=this.spatialReference,v=this.location;if(t!==this._featureAbortController||!r)return;await yCe({graphic:r,popupTemplate:n,layer:i,spatialReference:y},e);const{content:{value:_},title:{value:I}}=await eo({content:this._getContent(),title:this._getTitle()}),{expressionAttributes:{value:$}}=await eo({checkForRelatedFeatures:this._checkForRelatedFeatures(e),expressionAttributes:KNe({expressionInfos:n==null?void 0:n.expressionInfos,spatialReference:y,graphic:r,map:o,interceptor:xm.interceptor,view:c,options:e,location:v})});t===this._featureAbortController&&r&&(this._expressionAttributes=$,this._graphicExpressionAttributes={...r.attributes,...$},this._set("formattedAttributes",this._createFormattedAttributes(_)),this._set("title",this._compileTitle(I)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(_)||null))}_createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){const{_effectivePopupTemplate:r,graphic:n,relatedInfos:o,_sourceLayer:c,_fieldInfoMap:y,_graphicExpressionAttributes:v,timeZone:_}=this;i.content[t]=fE({fieldInfos:r==null?void 0:r.fieldInfos,graphic:n,attributes:{...v,...e.attributes},layer:c,fieldInfoMap:y,relatedInfos:o,timeZone:_})}_createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){if(e.fieldInfos){const{graphic:r,relatedInfos:n,_sourceLayer:o,_fieldInfoMap:c,_graphicExpressionAttributes:y,timeZone:v}=this;i.content[t]=fE({fieldInfos:e.fieldInfos,graphic:r,attributes:{...y,...e.attributes},layer:o,fieldInfoMap:c,relatedInfos:n,timeZone:v})}}_createFormattedAttributes(e){const{_effectivePopupTemplate:t,graphic:i,relatedInfos:r,_sourceLayer:n,_fieldInfoMap:o,_graphicExpressionAttributes:c,timeZone:y}=this,v=t==null?void 0:t.fieldInfos,_={global:fE({fieldInfos:v,graphic:i,attributes:c,layer:n,fieldInfoMap:o,relatedInfos:r,timeZone:y}),content:[]};return Array.isArray(e)&&e.forEach((I,$)=>{I.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:I,contentElementIndex:$,formattedAttributes:_}),I.type==="media"&&this._createMediaFormattedAttributes({contentElement:I,contentElementIndex:$,formattedAttributes:_})}),_}_checkForRelatedFeatures(e){const{graphic:t,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(t,_U(i),e)}async _queryRelatedInfos(e,t,i){const{relatedInfos:r,_sourceLayer:n}=this;r.clear();const o=(n==null?void 0:n.associatedLayer)!=null?await(n==null?void 0:n.associatedLayer.load(i)):n;if(!o||!e)return;const c=t.filter(_=>!!_.fieldName&&Vc(_.fieldName));if(!(c!=null&&c.length))return;t.forEach(_=>this._configureRelatedInfo(_,o));const y=await z8e({relatedInfos:r,layer:o},i);Object.keys(y).forEach(_=>{var A;const I=r.get(_.toString()),$=(A=y[_])==null?void 0:A.value;I&&$&&(I.layerInfo=$.data)});const v=await V8e({graphic:e,relatedInfos:r,layer:o},i);Object.keys(v).forEach(_=>{var I;O8e((I=v[_])==null?void 0:I.value,r.get(_.toString()))})}_configureRelatedInfo(e,t){const{relatedInfos:i}=this,r=X5(e.fieldName||"");if(!r)return;const{layerId:n,fieldName:o}=r;if(!n)return;const c=i.get(n.toString())||L8e(n,t);c&&(U8e({relatedInfo:c,fieldName:o,fieldInfo:e}),this.relatedInfos.set(n,c))}};vi.interceptor=new aFe(vCe,wCe),m([w()],vi.prototype,"_error",void 0),m([w()],vi.prototype,"_featureAbortController",void 0),m([w()],vi.prototype,"_associationVMAbortController",void 0),m([w({readOnly:!0})],vi.prototype,"_effectivePopupTemplate",null),m([w({readOnly:!0})],vi.prototype,"_fieldInfoMap",null),m([w({readOnly:!0})],vi.prototype,"_sourceLayer",null),m([w()],vi.prototype,"abilities",void 0),m([wt("abilities")],vi.prototype,"castAbilities",null),m([w({readOnly:!0})],vi.prototype,"content",void 0),m([w({readOnly:!0})],vi.prototype,"contentViewModels",void 0),m([w()],vi.prototype,"description",void 0),m([w({type:Boolean})],vi.prototype,"defaultPopupTemplateEnabled",void 0),m([w({readOnly:!0})],vi.prototype,"isTable",null),m([w({readOnly:!0})],vi.prototype,"state",null),m([w({readOnly:!0})],vi.prototype,"formattedAttributes",void 0),m([w({type:er,value:null})],vi.prototype,"graphic",null),m([w({readOnly:!0})],vi.prototype,"lastEditInfo",void 0),m([w({type:st})],vi.prototype,"location",void 0),m([w({readOnly:!0})],vi.prototype,"relatedInfos",void 0),m([w()],vi.prototype,"spatialReference",null),m([w()],vi.prototype,"timeZone",null),m([w({readOnly:!0})],vi.prototype,"title",void 0),m([w()],vi.prototype,"map",null),m([w({readOnly:!0})],vi.prototype,"waitingForContent",null),m([w()],vi.prototype,"view",void 0),vi=xm=m([H("esri.widgets.Feature.FeatureViewModel")],vi);const PP=vi,$n="esri-feature",nr={base:$n,container:`${$n}__size-container`,title:`${$n}__title`,main:`${$n}__main-container`,btn:`${$n}__button`,icon:`${$n}__icon`,content:`${$n}__content`,contentNode:`${$n}__content-node`,contentNodeText:`${$n}__content-node--text`,contentElement:`${$n}__content-element`,text:`${$n}__text`,lastEditedInfo:`${$n}__last-edited-info`,fields:`${$n}__fields`,fieldHeader:`${$n}__field-header`,fieldData:`${$n}__field-data`,fieldDataDate:`${$n}__field-data--date`,loadingSpinnerContainer:`${$n}__loading-container`},Bae=e=>{let t=class extends e{constructor(){super(...arguments),this.renderNodeContent=i=>h0(i)&&!i.destroyed?B("div",{class:nr.contentNode,key:i},i.render()):i instanceof HTMLElement?B("div",{afterCreate:this._attachToNode,bind:i,class:nr.contentNode,key:i}):Sse(i)?B("div",{afterCreate:this._attachToNode,bind:i.domNode,class:nr.contentNode,key:i}):null}_attachToNode(i){const r=this;i.appendChild(r)}};return t=m([H("esri.widgets.Feature.support.FeatureContentMixin")],t),t},Aq={title:!0,content:!0,lastEditedInfo:!0};let mr=class extends Bae(yi){constructor(t,i){super(t,i),this._contentWidgets=[],this.flowType="feature",this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.visibleElements={...Aq},this.viewModel=new PP}initialize(){this.addHandles(ge(()=>{var t;return(t=this.viewModel)==null?void 0:t.contentViewModels},()=>this._setupContentWidgets(),qe))}loadDependencies(){return Vn({notice:()=>de(()=>import("./calcite-notice-ikeUYD1p.js"),__vite__mapDeps([228,229]),import.meta.url),loader:()=>de(()=>import("./calcite-loader-CkzKaCO4.js"),__vite__mapDeps([221,195]),import.meta.url)})}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(t){this.viewModel.defaultPopupTemplateEnabled=t}get isTable(){return this.viewModel.isTable}get icon(){return"polygon"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get location(){return this.viewModel.location}set location(t){this.viewModel.location=t}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(t){this.viewModel.spatialReference=t}get timeZone(){return this.viewModel.timeZone}set timeZone(t){this.viewModel.timeZone=t}get title(){return this.viewModel.title}castVisibleElements(t){return{...Aq,...t}}get map(){return this.viewModel.map}set map(t){this.viewModel.map=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}setActiveMedia(t,i){return this.viewModel.setActiveMedia(t,i)}nextMedia(t){return this.viewModel.nextMedia(t)}previousMedia(t){return this.viewModel.previousMedia(t)}render(){const{state:t}=this.viewModel,i=B("div",{class:nr.container,key:"container"},this._renderTitle(),t==="error"?this._renderError():t==="loading"?this._renderLoading():this._renderContentContainer());return B("div",{class:this.classes(nr.base,ze.widget)},i)}_renderError(){const{messagesCommon:t,messages:i,visibleElements:r}=this;return B("calcite-notice",{icon:"exclamation-mark-circle",kind:"danger",open:!0,scale:"s"},r.title?B("div",{key:"error-title",slot:"title"},t.errorMessage):null,B("div",{key:"error-message",slot:"message"},i.loadingError))}_renderLoading(){return B("div",{class:nr.loadingSpinnerContainer,key:"loading-container"},B("calcite-loader",{inline:!0,label:""}))}_renderContentContainer(){const{visibleElements:t}=this;return t.content?B("div",{class:nr.main},[this._renderContent(),this._renderLastEditInfo()]):null}_renderTitle(){const{visibleElements:t,title:i}=this;return t.title?B(c0,{class:nr.title,innerHTML:i,level:this.headingLevel}):null}_renderContent(){const t=this.viewModel.content,i="content";if(!t)return null;if(Array.isArray(t))return t.length?B("div",{class:nr.contentNode,key:`${i}-content-elements`},t.map(this._renderContentElement,this)):null;if(typeof t=="string"){const r=this._contentWidgets[0];return!r||r.destroyed?null:B("div",{class:this.classes(nr.contentNode,nr.contentNodeText),key:`${i}-content`},r.render())}return this.renderNodeContent(t)}_renderContentElement(t,i){var n;const{visibleElements:r}=this;if(typeof r.content!="boolean"&&!((n=r.content)!=null&&n[t.type]))return null;switch(t.type){case"attachments":return this._renderAttachments(i);case"custom":return this._renderCustom(t,i);case"fields":return this._renderFields(i);case"media":return this._renderMedia(i);case"text":return this._renderText(t,i);case"expression":return this._renderExpression(i);case"relationship":return this._renderRelationship(i);case"utility-network-associations":return this._renderAssociation(i);default:return null}}_renderAttachments(t){const i=this._contentWidgets[t];if(!i||i.destroyed)return null;const{state:r,attachmentInfos:n}=i.viewModel;return r==="loading"||n.length>0?B("div",{class:this.classes(nr.contentElement),key:this._buildKey("attachments-element",t)},i.render()):null}_renderRelationship(t){const i=this._contentWidgets[t];return i&&!i.destroyed&&this.flowItems?B("div",{class:nr.contentElement,key:this._buildKey("relationship-element",t)},i.render()):null}_renderAssociation(t){const i=this._contentWidgets[t];return i&&!i.destroyed&&this.flowItems?B("div",{class:nr.contentElement,key:this._buildKey("utility-network-association-element",t)},i.render()):null}_renderExpression(t){const i=this._contentWidgets[t];return i&&!i.destroyed&&i.viewModel.contentElement?B("div",{class:nr.contentElement,key:this._buildKey("expression-element",t)},i.render()):null}_renderCustom(t,i){const{creator:r}=t,n=this._contentWidgets[i];return!n||n.destroyed?null:r?B("div",{class:nr.contentElement,key:this._buildKey("custom-element",i)},n.render()):null}_renderFields(t){const i=this._contentWidgets[t];return!i||i.destroyed?null:B("div",{class:nr.contentElement,key:this._buildKey("fields-element",t)},i.render())}_renderMedia(t){const i=this._contentWidgets[t];return!i||i.destroyed?null:B("div",{class:nr.contentElement,key:this._buildKey("media-element",t)},i.render())}_renderLastEditInfo(){const{visibleElements:t,messages:i}=this,{lastEditInfo:r}=this.viewModel;if(!r||!t.lastEditedInfo)return null;const{date:n,user:o}=r,c=r.type==="edit"?o?i.lastEditedByUser:i.lastEdited:o?i.lastCreatedByUser:i.lastCreated,y=mn(c,{date:n,user:o});return B("div",{class:this.classes(nr.lastEditedInfo,nr.contentElement),key:"edit-info-element"},y)}_renderText(t,i){const r=t.text,n=this._contentWidgets[i];return!n||n.destroyed?null:r?B("div",{class:this.classes(nr.contentElement,nr.text),key:this._buildKey("text-element",i)},n.render()):null}_buildKey(t,...i){var r,n;return`${t}__${((n=(r=this.viewModel)==null?void 0:r.graphic)==null?void 0:n.uid)||"0"}-${i.join("-")}`}_destroyContentWidget(t){t&&(t.viewModel=null,!t.destroyed&&t.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach(t=>this._destroyContentWidget(t)),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:t,visibleElements:i,flowItems:r,viewModel:n}=this,o=n==null?void 0:n.content,{contentViewModels:c}=n;if(Array.isArray(o))o.forEach((y,v)=>{if(y.type==="attachments"&&(this._contentWidgets[v]=new TCe({displayType:y.displayType,headingLevel:i.title&&t<6?t+1:t,viewModel:c[v]})),y.type==="fields"&&(this._contentWidgets[v]=new xse({viewModel:c[v]})),y.type==="media"&&(this._contentWidgets[v]=new Zse({viewModel:c[v]})),y.type==="text"&&(this._contentWidgets[v]=new J5({viewModel:c[v]})),y.type==="custom"&&(this._contentWidgets[v]=new J5({viewModel:c[v]})),y.type==="expression"&&(this._contentWidgets[v]=new XNe({viewModel:c[v]})),y.type==="relationship"){const _=new eFe({flowItems:r,featureVisibleElements:i,viewModel:c[v]});this._contentWidgets[v]=_}if(y.type==="utility-network-associations"){const _=new oFe({flowItems:r,parentFeatureViewModel:n,featureVisibleElements:i,viewModel:c[v]});this._contentWidgets[v]=_}},this);else{const y=c[0];y&&!y.destroyed&&(this._contentWidgets[0]=new J5({viewModel:y}))}this.scheduleRender()}};m([w()],mr.prototype,"flowType",void 0),m([w()],mr.prototype,"graphic",null),m([w()],mr.prototype,"defaultPopupTemplateEnabled",null),m([w()],mr.prototype,"flowItems",void 0),m([w()],mr.prototype,"headingLevel",void 0),m([w({readOnly:!0})],mr.prototype,"isTable",null),m([w()],mr.prototype,"icon",null),m([w()],mr.prototype,"label",null),m([w()],mr.prototype,"location",null),m([w(),Ht("esri/widgets/Feature/t9n/Feature")],mr.prototype,"messages",void 0),m([w(),Ht("esri/t9n/common")],mr.prototype,"messagesCommon",void 0),m([w()],mr.prototype,"spatialReference",null),m([w()],mr.prototype,"timeZone",null),m([w({readOnly:!0})],mr.prototype,"title",null),m([w()],mr.prototype,"visibleElements",void 0),m([wt("visibleElements")],mr.prototype,"castVisibleElements",null),m([w()],mr.prototype,"map",null),m([w()],mr.prototype,"view",null),m([w({type:PP})],mr.prototype,"viewModel",void 0),mr=m([H("esri.widgets.Feature")],mr);const Gae=mr,qae=Object.freeze(Object.defineProperty({__proto__:null,default:Gae},Symbol.toStringTag,{value:"Module"}));let xf=class extends qo.EventedAccessor{constructor(t){super(t),this.location=null,this.screenLocationEnabled=!1,this.view=null,this.addHandles([en(()=>{const i=this.screenLocationEnabled?this.view:null;return i?[i.size,i.type==="3d"?i.camera:i.viewpoint]:null},()=>this.notifyChange("screenLocation")),ge(()=>this.screenLocation,(i,r)=>{i!=null&&r!=null&&this.emit("view-change")})])}destroy(){this.view=null}get screenLocation(){const{location:t,view:i,screenLocationEnabled:r}=this,n=i==null?void 0:i.spatialReference,o=n?uee(t,n).geometry:null;return r&&o&&(i!=null&&i.ready)?i.toScreen(o):null}};m([w()],xf.prototype,"location",void 0),m([w()],xf.prototype,"screenLocation",null),m([w()],xf.prototype,"screenLocationEnabled",void 0),m([w()],xf.prototype,"view",void 0),xf=m([H("esri.widgets.support.AnchorElementViewModel")],xf);const Hae=xf;let bx=class extends Hae{constructor(t){super(t),this.visible=!1}};m([w()],bx.prototype,"visible",void 0),bx=m([H("esri.widgets.Spinner.SpinnerViewModel")],bx);const Wae=bx,KE="esri-spinner",YE={base:KE,spinnerStart:`${KE}--start`,spinnerFinish:`${KE}--finish`};let If=class extends yi{constructor(t,i){super(t,i),this._animationDelay=500,this._animationPromise=null,this.viewModel=new Wae}initialize(){this.addHandles(ge(()=>this.visible,t=>this._visibleChange(t)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(t){this.viewModel.location=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get visible(){return this.viewModel.visible}set visible(t){this.viewModel.visible=t}show(t){const{location:i,promise:r}=t??{};i&&(this.viewModel.location=i),this.visible=!0;const n=()=>this.hide();r&&r.catch(()=>{}).then(n)}hide(){this.visible=!1}render(){const{visible:t}=this,{screenLocation:i}=this.viewModel,r=!!i,n=t&&r,o=!t&&r,c={[YE.spinnerStart]:n,[YE.spinnerFinish]:o},y=this._getPositionStyles();return B("div",{class:this.classes(YE.base,c),styles:y})}_visibleChange(t){if(t)return void(this.viewModel.screenLocationEnabled=!0);const i=G0(this._animationDelay);this._animationPromise=i,i.catch(()=>{}).then(()=>{this._animationPromise===i&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:t,view:i}=this.viewModel;if(i==null||t==null)return{};const{padding:r}=i;return{left:t.x-r.left+"px",top:t.y-r.top+"px"}}};m([w()],If.prototype,"location",null),m([w()],If.prototype,"view",null),m([w({type:Wae})],If.prototype,"viewModel",void 0),m([w()],If.prototype,"visible",null),If=m([H("esri.widgets.Spinner")],If);const cFe=If,Kn="esri-features",dn={icon:`${Kn}__icon`,actionImage:`${Kn}__action-image`,base:Kn,container:`${Kn}__container`,contentContainer:`${Kn}__content-container`,contentFeature:`${Kn}__content-feature`,flowItemCollapsed:`${Kn}__flow-item--collapsed`,header:`${Kn}__header`,footer:`${Kn}__footer`,featureMenuObserver:`${Kn}__feature-menu-observer`,actionExit:`${Kn}__action--exit`,loader:`${Kn}__loader`,featuresHeading:`${Kn}__heading`,paginationActionBar:`${Kn}__pagination-action-bar`,paginationPrevious:`${Kn}__pagination-previous`,paginationNext:`${Kn}__pagination-next`},d0=Oe.ofType({key:"type",defaultKeyValue:"button",base:Bg,typeMap:{button:Z0,toggle:BI}}),Ld=new Z0({icon:"magnifying-glass-plus",id:"zoom-to-feature",title:"{messages.zoom}",className:Pn.zoomInMagnifyingGlass}),sk=new Z0({icon:"trash",id:"remove-selected-feature",title:"{messages.remove}",className:Pn.trash}),f1=new Z0({icon:"magnifying-glass-plus",id:"zoom-to-clustered-features",title:"{messages.zoom}",className:Pn.zoomInMagnifyingGlass}),_d=new BI({icon:"table",id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:Pn.table,value:!1}),Th=Ld.clone();let Tf=class extends yi{constructor(t,i){super(t,i),this.messages=null,this.closed=!1,this.closable=!0,this._handleOpenFeature=r=>{this.emit("open-feature",{feature:r})},this._handleZoomToFeature=r=>{this.emit("zoom-to-feature",{featureWidget:r})}}loadDependencies(){return Vn({action:()=>de(()=>import("./calcite-action-e4eforA9.js"),__vite__mapDeps([233,227,195]),import.meta.url),"action-bar":()=>de(()=>import("./calcite-action-bar-676MELkr.js"),__vite__mapDeps([234,235,236,227,195,237,231,238,229,232]),import.meta.url),"action-group":()=>de(()=>import("./calcite-action-group-L5zDZYe4.js"),__vite__mapDeps([239,235,236,227,195,237,231,238,229,232]),import.meta.url),"flow-item":()=>de(()=>import("./calcite-flow-item-B-gbMQQs.js"),__vite__mapDeps([240,241,236,227,195,237,231,238,229,232,225]),import.meta.url)})}render(){const{flowItems:t}=this,i=t==null?void 0:t.toArray();return B(Une,null,i==null?void 0:i.map(r=>this._renderFlowItem(r)))}_handleCloseClick(){this.emit("close")}_handleExitClick(){this.emit("exit")}_handleDrillInBackClick(){var i;const t=(i=this.flowItems)==null?void 0:i.pop();t&&("showAllEnabled"in t.viewModel&&(t.viewModel.showAllEnabled=!1),t&&(t.viewModel=null,t.destroy()))}_getExitMessage(t){switch(t.flowType){case"feature":case"feature-association":return"";case"feature-relationship":return this.messages.exitRelatedRecords;case"feature-utility-network-associations":case"feature-utility-network-association-type":return this.messages.exitAssociations}}_renderFlowItem(t){const{messages:i,closable:r,closed:n}=this,o="graphic"in t&&!t.isTable,c=t.flowType==="feature-association",y=this._getExitMessage(t),v=i.selectFeature;return B("calcite-flow-item",{bind:this,closable:r,closed:n,description:this._getDrillInFlowItemDescription(t),heading:t.title??"",key:`flow-item-${t.viewModel.uid}`,onCalciteFlowItemBack:_=>{_.preventDefault(),this._handleDrillInBackClick()},onCalciteFlowItemClose:this._handleCloseClick},B("calcite-action",{appearance:"transparent",bind:this,class:dn.actionExit,icon:"move-up",key:"exit-action",onclick:this._handleExitClick,slot:"header-actions-start",text:y,title:y}),o?B("calcite-action",{appearance:"transparent",bind:this,icon:"zoom-to-object",key:"open-feature-action",onclick:()=>this._handleOpenFeature(t),slot:"header-actions-end",text:v,title:v}):null,c?B("calcite-action-bar",{expandDisabled:!0,expanded:!0,key:"header-action-bar",scale:"s",slot:"action-bar"},B("calcite-action-group",{overlayPositioning:"fixed",scale:"s"},this._renderDefaultActions(t))):null,B("div",{class:dn.container},t.render()))}_renderDefaultActions(t){const i=this._getActionTitle(Th);return B("calcite-action",{active:Th.active,appearance:"solid",bind:this,"data-action-uid":Th.uid,disabled:Th.disabled,icon:Th.icon??"question",indicator:Th.indicator,key:`action-${Th.uid}`,loading:Th.active,onclick:()=>this._handleZoomToFeature(t),scale:"s",text:i,textEnabled:!0,title:i})}_getActionTitle(t){const{messages:i}=this,{id:r}=t,n=t.title??"";return r==="zoom-to-feature"?mn(n,{messages:i}):n}_getDrillInFlowItemDescription(t){switch(t.flowType){case"feature":case"feature-association":case"feature-utility-network-associations":return t.viewModel.description??"";case"feature-relationship":return t.featureCountDescription;case"feature-utility-network-association-type":return t.description??""}}};m([w()],Tf.prototype,"flowItems",void 0),m([w(),Ht("esri/widgets/Features/t9n/Features")],Tf.prototype,"messages",void 0),m([w()],Tf.prototype,"closed",void 0),m([w()],Tf.prototype,"closable",void 0),Tf=m([H("esri.widgets.Features.FeaturesDrillIn")],Tf);const hFe=Tf;let dFe=class{constructor(t){this._observable=new Fg,this._set=new Set(t)}get size(){return Xe(this._observable),this._set.size}add(t){const i=this._set.size;return this._set.add(t),this._set.size!==i&&this._observable.notify(),this}clear(){this._set.size>0&&(this._set.clear(),this._observable.notify())}delete(t){const i=this._set.delete(t);return i&&this._observable.notify(),i}entries(){return Xe(this._observable),this._set.entries()}forEach(t,i){Xe(this._observable),this._set.forEach((r,n)=>t.call(i,r,n,this),i)}has(t){return Xe(this._observable),this._set.has(t)}keys(){return Xe(this._observable),this._set.keys()}values(){return Xe(this._observable),this._set.values()}[Symbol.iterator](){return Xe(this._observable),this._set[Symbol.iterator]()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}};const pFe="OBJECTID";var Ur;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(Ur||(Ur={}));const Ub={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],meshSymbol3DFill:[{type:"path",path:"M -10,-8 L 6,0 L 6,6 L -10,6 L -10,-8 Z"},{type:"path",path:"M -10,-8 L -7,-10 L 9,-2 L 6,0 L -10,-8 Z"},{type:"path",path:"M 6,0 L 9,-2 L 9,4 L 6,6 L 6,0 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function fFe(e,t,i){const r=Ur.size;let n=r,o=r;e<1?n*=.75:e>1&&(o*=1.25);const c=0,y=0;let v=r,_=r;return t&&i&&(n=o=v=_=0),[{type:"path",path:[{command:"M",values:[v,c]},{command:"L",values:[i?v:.875*v,c]},{command:"L",values:[i?n-.5*v:y,o-.5*_]},{command:"L",values:[n-.5*v,o-.5*_]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[v,c]},{command:"L",values:[v,t?c:.125*_]},{command:"L",values:[n-.5*v,t?o-.5*_:_]},{command:"L",values:[n-.5*v,o-.5*_]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n-.5*v,o-.5*_]},{command:"L",values:[i?n-.5*v:y,o-.5*_]},{command:"L",values:[i?n-.5*v:y,t?o-.5*_:_]},{command:"L",values:[n-.5*v,t?o-.5*_:_]},{command:"Z",values:[]}]}]}function yFe(e){const t=Ur.size,i=.5*e,r=0,n=0;return[{type:"path",path:[{command:"M",values:[n,.7*t*.5]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+i]},{command:"L",values:[n,.7*t+i-.7*t*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+i]},{command:"L",values:[t,i]},{command:"L",values:[t,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,r]},{command:"L",values:[t,r]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[n,.7*t*.5]},{command:"Z",values:[]}]}]}function mFe(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function gFe(e,t){let i=t?Ur.tallSymbolWidth:e;const r=e,n=t?4:6;i<=Ur.size?i-=.5*n:i-=n;const o=0,c=0,y=t?.35*i:.5*i;return[{type:"path",path:[{command:"M",values:[.5*i,o]},{command:"L",values:[i,.5*y]},{command:"L",values:[.5*i,y]},{command:"L",values:[c,.5*y]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,.5*y]},{command:"L",values:[.5*i,y]},{command:"L",values:[.5*i,r]},{command:"L",values:[c,r-.5*y]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*i,y]},{command:"L",values:[.5*i,r]},{command:"L",values:[i,r-.5*y]},{command:"L",values:[i,.5*y]},{command:"Z",values:[]}]}]}function vFe(e,t){let i=t?Ur.tallSymbolWidth:e;const r=e,n=t?4:6;i<=Ur.size?i-=.5*n:i-=n;const o=.5*i,c=.15*i,y=0,v=r-c;return[{type:"ellipse",cx:.5*i,cy:v,rx:o,ry:c},{type:"path",path:[{command:"M",values:[y,c]},{command:"L",values:[y,v]},{command:"L",values:[i,v]},{command:"L",values:[i,c]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*i,cy:c,rx:o,ry:c}]}function wFe(e,t){let i=t?Ur.tallSymbolWidth:e;const r=e,n=t?4:6;i<=Ur.size?i-=.5*n:i-=n;const o=.15*i,c=r-o;return[{type:"ellipse",cx:.5*i,cy:c,rx:.5*i,ry:o},{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,c]},{command:"L",values:[0,c]},{command:"Z",values:[]}]}]}function bFe(e){let t=e;const i=e,r=6;t<Ur.size?t-=.5*r:t-=r;const n=.15*t,o=0;return[{type:"path",path:[{command:"M",values:[0,o]},{command:"L",values:[t,o]},{command:"L",values:[.5*t,i-n]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:o,rx:.5*t,ry:n}]}function _Fe(e){let t=e;const i=e,r=4;t<Ur.size?t-=.5*r:t-=r;const n=0,o=0,c=t,y=i,v=Math.floor(e/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*c,n]},{command:"L",values:[c,.5*y-v]},{command:"L",values:[.45*c-v,.5*y+v]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*c,n]},{command:"L",values:[.45*c-v,.5*y+v]},{command:"L",values:[o,.5*y-v]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,.5*y-v]},{command:"L",values:[.45*c-v,.5*y+v]},{command:"L",values:[.45*c,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*c,i]},{command:"L",values:[c,.5*y-v]},{command:"L",values:[.45*c-v,.5*y+v]},{command:"Z",values:[]}]}]}function SFe(e){const t=e,i=2;let r=e;r<Ur.size?r-=.5*i:r-=i;const n=0,o=0;return[{type:"path",path:[{command:"M",values:[.45*t,n]},{command:"L",values:[t,r]},{command:"L",values:[.45*t,.6*r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*t,n]},{command:"L",values:[.45*t,.6*r]},{command:"L",values:[o,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,r]},{command:"L",values:[.45*t,.6*r]},{command:"L",values:[t,r]},{command:"Z",values:[]}]}]}function Zd(e,t){return Math.round(Math.min(Math.max(e+255*t*.75,0),255))}function brt(e,t){if(e==null)return new je;if("type"in e&&(e.type==="linear"||e.type==="pattern"))return e;const i=new je(e);return new je([Zd(i.r,t),Zd(i.g,t),Zd(i.b,t),i.a])}let xFe=0;function IFe(){return xFe++}let TFe=0;function $Fe(){return TFe++}let EFe=0;function MFe(){return EFe++}const AFe="http://www.w3.org/2000/svg",Cq=we("android"),CFe=we("chrome")||Cq&&Cq>=4?"auto":"optimizeLegibility",kFe={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},LFe=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let Yi={},ii={};const OFe=Math.PI;function Od(e,t){const i=e*(OFe/180);return Math.abs(t*Math.sin(i))+Math.abs(t*Math.cos(i))}function Jae(e){return e.map(t=>`${t.command} ${t.values.join(" ")}`).join(" ").trim()}function NP(e,t,i,r,n){if(e){if(e.type==="circle")return B("circle",{cx:e.cx,cy:e.cy,fill:t,"fill-rule":"evenodd",r:e.r,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(e.type==="ellipse")return B("ellipse",{cx:e.cx,cy:e.cy,fill:t,"fill-rule":"evenodd",rx:e.rx,ry:e.ry,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(e.type==="rect")return B("rect",{fill:t,"fill-rule":"evenodd",height:e.height,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,width:e.width,x:e.x,y:e.y});if(e.type==="image")return B("image",{alt:n||"image",height:e.height,href:e.src,preserveAspectRatio:"none",width:e.width,x:e.x,y:e.y});if(e.type==="path"){const o=typeof e.path!="string"?Jae(e.path):e.path;return B("path",{d:o,fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width})}if(e.type==="text")return h3(r),B("text",{"dominant-baseline":r.dominantBaseline,fill:t,"fill-rule":"evenodd","font-family":r.font.family,"font-size":r.font.size,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,kerning:r.kerning,rotate:r.rotate,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,"text-anchor":r.align,"text-decoration":r.decoration,"text-rendering":CFe,x:e.x,y:e.y},e.text)}return null}function FP(e){if(!e)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in e))return{fill:new je(e).toString(),pattern:null,linearGradient:null};if(e.type==="pattern"){const i=`patternId-${IFe()}`;return{fill:`url(#${i})`,pattern:{id:i,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}},linearGradient:null}}const t=`linearGradientId-${$Fe()}`;return{fill:`url(#${t})`,pattern:null,linearGradient:{id:t,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map(i=>({offset:i.offset,color:i.color&&new je(i.color).toString()}))}}}function DP(e){const t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return e&&(e.width!=null&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=new je(e.color).toString()),e.dashArray&&(t.dashArray=e.dashArray),e.dashoffset&&(t.dashOffset=e.dashoffset),e.style&&!e.dashArray&&(t.dashArray=Nse(e).join(",")||"none")),t}function Zae(e,t){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(e){const r=e.alignBaseline,n=r==="baseline"?"auto":r==="top"?"text-top":r==="bottom"?"hanging":r;i.align=e.align,i.dominantBaseline=n,i.decoration=e.decoration,i.kerning=e.kerning?"auto":"0",i.rotate=e.rotated?"90":"0",h3(t),i.font.style=t.style||"normal",i.font.variant=t.variant||"normal",i.font.weight=t.weight||"normal",i.font.size=t.size&&t.size.toString()||"10pt",i.font.family=t.family||"serif"}return i}function Kae(e){const{pattern:t,linearGradient:i}=e;if(t)return B("pattern",{height:t.height,id:t.id,patternUnits:"userSpaceOnUse",width:t.width,x:t.x,y:t.y},B("image",{height:t.image.height,href:t.image.href,width:t.image.width,x:t.image.x,y:t.image.y}));if(i){const r=i.stops.map((n,o)=>B("stop",{key:`${o}-stop`,offset:n.offset,"stop-color":n.color}));return B("linearGradient",{gradientUnits:"userSpaceOnUse",id:i.id,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2},r)}return null}function RFe(e,t){if(!e||e.length===0)return null;const i=[];for(const r of e){const{shape:n,fill:o,stroke:c,font:y}=r,v=FP(o),_=DP(c),I=n.type==="text"?Zae(n,y):null,$=NP(n,v.fill,_,I);$&&i.push($)}return B("mask",{id:t,maskUnits:"userSpaceOnUse"},B("g",null,i))}function kq(e,t,i){return mg(e,XI(e),[t,i])}function Lq(e,t,i,r,n){return QI(e,XI(e),[t,i]),e[4]=e[4]*t-r*t+r,e[5]=e[5]*i-n*i+n,e}function PFe(e,t,i,r){const n=t%360*Math.PI/180;k3(e,XI(e),n);const o=Math.cos(n),c=Math.sin(n),y=e[4],v=e[5];return e[4]=y*o-v*c+r*c-i*o+i,e[5]=v*o+y*c-i*c-r*o+r,e}function bs(e,t){Yi&&"left"in Yi?(Yi.left!=null&&Yi.left>e&&(Yi.left=e),(Yi.right==null||Yi.right<e)&&(Yi.right=e),(Yi.top==null||Yi.top>t)&&(Yi.top=t),(Yi.bottom==null||Yi.bottom<t)&&(Yi.bottom=t)):Yi={left:e,bottom:t,right:e,top:t}}function Oq(e){const t=e.args,i=t.length;let r;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<i;r+=2)bs(t[r],t[r+1]);ii.x=t[i-2],ii.y=t[i-1];break;case"H":for(r=0;r<i;++r)bs(t[r],ii.y);ii.x=t[i-1];break;case"V":for(r=0;r<i;++r)bs(ii.x,t[r]);ii.y=t[i-1];break;case"m":{let n=0;for(("x"in ii)||(bs(ii.x=t[0],ii.y=t[1]),n=2),r=n;r<i;r+=2)bs(ii.x+=t[r],ii.y+=t[r+1]);break}case"l":case"t":for(r=0;r<i;r+=2)bs(ii.x+=t[r],ii.y+=t[r+1]);break;case"h":for(r=0;r<i;++r)bs(ii.x+=t[r],ii.y);break;case"v":for(r=0;r<i;++r)bs(ii.x,ii.y+=t[r]);break;case"c":for(r=0;r<i;r+=6)bs(ii.x+t[r],ii.y+t[r+1]),bs(ii.x+t[r+2],ii.y+t[r+3]),bs(ii.x+=t[r+4],ii.y+=t[r+5]);break;case"s":case"q":for(r=0;r<i;r+=4)bs(ii.x+t[r],ii.y+t[r+1]),bs(ii.x+=t[r+2],ii.y+=t[r+3]);break;case"A":for(r=0;r<i;r+=7)bs(t[r+5],t[r+6]);ii.x=t[i-2],ii.y=t[i-1];break;case"a":for(r=0;r<i;r+=7)bs(ii.x+=t[r+5],ii.y+=t[r+6])}}function Rq(e,t,i){const r=kFe[e.toLowerCase()];let n;typeof r=="number"&&(r?t.length>=r&&(n={action:e,args:t.slice(0,t.length-t.length%r)},i.push(n),Oq(n)):(n={action:e,args:[]},i.push(n),Oq(n)))}function NFe(e){const t=(typeof e.path!="string"?Jae(e.path):e.path).match(LFe),i=[];if(Yi={},ii={},!t)return null;let r="",n=[];const o=t.length;for(let y=0;y<o;++y){const v=t[y],_=parseFloat(v);isNaN(_)?(r&&Rq(r,n,i),n=[],r=v):n.push(_)}Rq(r,n,i);const c={x:0,y:0,width:0,height:0};return Yi&&"left"in Yi&&(c.x=Yi.left,c.y=Yi.top,c.width=Yi.right-Yi.left,c.height=Yi.bottom-Yi.top),c}function Yae(e){const t={x:0,y:0,width:0,height:0};if(e.type==="circle")t.x=e.cx-e.r,t.y=e.cy-e.r,t.width=2*e.r,t.height=2*e.r;else if(e.type==="ellipse")t.x=e.cx-e.rx,t.y=e.cy-e.ry,t.width=2*e.rx,t.height=2*e.ry;else if(e.type==="image"||e.type==="rect")t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height;else if(e.type==="path"){const i=NFe(e);t.x=i.x,t.y=i.y,t.width=i.width,t.height=i.height}return t}function Xae(e){const t={x:0,y:0,width:0,height:0};let i=null,r=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(const o of e)i?(i.x=Math.min(i.x,o.x),i.y=Math.min(i.y,o.y),r=Math.max(r,o.x+o.width),n=Math.max(n,o.y+o.height)):(i=t,i.x=o.x,i.y=o.y,r=o.x+o.width,n=o.y+o.height);return i&&(i.width=r-i.x,i.height=n-i.y),i}function ok(e,t,i,r,n,o,c,y,v){let _=(c&&o?Od(o,t):t)/2,I=(c&&o?Od(o,i):i)/2;if(v){const z=v[0],U=v[1];_=(c&&o?Od(o,z):z)/2,I=(c&&o?Od(o,U):U)/2}const $=e.width+r,A=e.height+r,k=s4(),R=s4();let N=!1;if(n&&$!==0&&A!==0){const z=t!==i?t/i:$/A,U=t>i?t:i;let W=1,Q=1;isNaN(U)||(z>1?(W=U/$,Q=U/z/A):(Q=U/A,W=U*z/$)),Nf(R,R,Lq(k,W,Q,_,I)),N=!0}const D=e.x+($-r)/2,j=e.y+(A-r)/2;if(Nf(R,R,kq(k,_-D,I-j)),!N&&($>t||A>i)){const z=$/t>A/i,U=(z?t:i)/(z?$:A);Nf(R,R,Lq(k,U,U,D,j))}return y&&Nf(R,R,kq(k,y[0],y[1])),o&&Nf(R,R,PFe(k,o,D,j)),`matrix(${R[0]},${R[1]},${R[2]},${R[3]},${R[4]},${R[5]})`}function FFe(e,t,i){const r=e==null?void 0:e.effects.find(_=>_.type==="bloom");if(!r)return null;const{strength:n,radius:o}=r,c=n>0?o:0,y=(n+c)*t,v=4*n+1;return B("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${i}`,width:"300%",x:"-100%",y:"-100%"},B("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(n+.5*c)*(5**(t/100)*(.4+t/100)),result:"dilate"}),B("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:y/25}),B("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:y/50}),B("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},B("feFuncR",{slope:v,type:"linear"}),B("feFuncG",{slope:v,type:"linear"}),B("feFuncB",{slope:v,type:"linear"})),B("feMerge",null,B("feMergeNode",{in:"intensityBlur"}),B("feMergeNode",{in:"intensityBrightness"}),B("feGaussianBlur",{stdDeviation:n/10})))}function Qae(e,t,i,r={}){var A,k,R;const n=[],o=[],c=MFe(),y=FFe(r.effectView,t,c);let v=null;if(y){const N=(A=r.effectView)==null?void 0:A.effects.find(U=>U.type==="bloom"),D=(N.strength?N.strength+N.radius/2:0)/3,j=t+t*D,z=i+i*D;v=[Math.max(j,10),Math.max(z,10)]}let _=t,I=i;if(r.useRotationSize)for(let N=0;N<e.length;N++){const D=((k=r.rotations)==null?void 0:k[N])??0;_=Math.max(Od(D,t),_),I=Math.max(Od(D,i),I)}for(let N=0;N<e.length;N++){const D=e[N],j=[],z=[];let U=0,W=0,Q=0;for(const ae of D){const{shape:ue,fill:Ie,stroke:Ae,font:Me,offset:fe}=ae;r.ignoreStrokeWidth||ue.type==="text"||(U+=(Ae==null?void 0:Ae.width)||0);const se=FP(Ie),ye=DP(Ae),he=ue.type==="text"?Zae(ue,Me):null;n.push(Kae(se)),j.push(NP(ue,se.fill,ye,he,r.ariaLabel)),z.push(Yae(ue)),fe&&(W+=fe[0],Q+=fe[1])}const K=((R=r.rotations)==null?void 0:R[N])??0;r.useRotationSize&&(W+=(_-Od(K,t))/2,Q+=(I-Od(K,i))/2);const ee=ok(Xae(z),t,i,U,r.scale??!1,K,r.useRotationSize??!1,[W,Q],v);let ie=null;if(r.masking){const ae=`mask-${N}`,ue=r.masking[N];n.push(RFe(ue,ae)),ie=`url(#${ae})`}o.push(ie?B("g",{mask:ie},B("g",{transform:ee},j)):B("g",{transform:ee},j))}return y&&(h3(v),_=v[0],I=v[1]),B("svg",{"aria-label":r.ariaLabel,focusable:!1,height:I,role:"img",style:"display: block;",width:_,xmlns:AFe},y,B("defs",null,n),y?B("g",{filter:`url(#bloom${c})`},o):o)}const Pq=J9();function DFe(e,t){Pq.append(e,t),Pq.detach(t)}function G3(e,t,i){const r=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!e.some(c=>!!c.length))return null;const o=(i==null?void 0:i.node)||document.createElement("div");return i.opacity!=null&&(o.style.opacity=i.opacity.toString()),i.effectView!=null&&(o.style.filter=z2(i.effectView)),DFe(o,()=>Qae(e,r,n,i)),o}function jFe(e,t){e=Math.ceil(e),t=Math.ceil(t);const i=document.createElement("canvas");i.width=e,i.height=t,i.style.width=e+"px",i.style.height=t+"px";const r=i.getContext("2d");return r.clearRect(0,0,e,t),r}function zFe(e,t,i){return e?Et(e,{responseType:"image"}).then(r=>{const n=r.data,o=n.width,c=n.height,y=o/c;let v=t;if(i){const _=Math.max(o,c);v=Math.min(v,_)}return{image:n,width:y<=1?Math.ceil(v*y):v,height:y<=1?v:Math.ceil(v/y)}}):Promise.reject(new ne("renderUtils: imageDataSize","href not provided."))}function VFe(e,t){return!(!e||t==="ignore")&&(t!=="multiply"||e.r!==255||e.g!==255||e.b!==255||e.a!==1)}function UFe(e,t,i,r,n){switch(n){case"multiply":e[t]*=i[0],e[t+1]*=i[1],e[t+2]*=i[2],e[t+3]*=i[3];break;default:{const o=mP({r:e[t],g:e[t+1],b:e[t+2]});o.h=r.h,o.s=r.s,o.v=o.v/100*r.v;const c=F3(o);e[t]=c.r,e[t+1]=c.g,e[t+2]=c.b,e[t+3]*=i[3];break}}}function BFe(e,t,i,r,n){return zFe(e,t,n).then(o=>{const c=o.width??t,y=o.height??t;if(o.image&&VFe(i,r)){let v=o.image.width,_=o.image.height;we("edge")&&/\.svg$/i.test(e)&&(v-=1,_-=1);const I=jFe(c,y);I.drawImage(o.image,0,0,v,_,0,0,c,y);const $=I.getImageData(0,0,c,y),A=[i.r/255,i.g/255,i.b/255,i.a],k=mP(i);for(let R=0;R<$.data.length;R+=4)UFe($.data,R,A,k,r);I.putImageData($,0,0),e=I.canvas.toDataURL("image/png")}else{const v=_t==null?void 0:_t.findCredential(e);if(v!=null&&v.token){const _=e.includes("?")?"&":"?";e=`${e}${_}token=${v.token}`}}return{url:e,width:c,height:y}}).catch(()=>({url:e,width:t,height:t}))}const ele="esri-relationship-ramp",$y=`${ele}--diamond`,$h=`${ele}--square`,GFe="http://www.w3.org/2000/svg",xi={diamondContainer:`${$y}__container`,diamondLeftCol:`${$y}__left-column`,diamondRightCol:`${$y}__right-column`,diamondMidCol:`${$y}__middle-column`,diamondMidColLabel:`${$y}__middle-column--label`,diamondMidColRamp:`${$y}__middle-column--ramp`,squareTable:`${$h}__table`,squareTableRow:`${$h}__table-row`,squareTableCell:`${$h}__table-cell`,squareTableLabel:`${$h}__table-label`,squareTableLabelLeftBottom:`${$h}__table-label--left-bottom`,squareTableLabelRightBottom:`${$h}__table-label--right-bottom`,squareTableLabelLeftTop:`${$h}__table-label--left-top`,squareTableLabelRightTop:`${$h}__table-label--right-top`};function tle(e,t,i={}){const{focus:r,labels:n}=e,o=!!r,c=qFe(e,t,i),y={justifyContent:"center"},v=Po(),_=i.key??t;return o?B("div",{class:xi.diamondContainer,key:`${_}-container`,styles:y},B("div",{class:xi.diamondLeftCol},v?n.right:n.left),B("div",{class:xi.diamondMidCol},B("div",{class:xi.diamondMidColLabel},n.top),c,B("div",{class:xi.diamondMidColLabel},n.bottom)),B("div",{class:xi.diamondRightCol},v?n.left:n.right)):B("div",{class:xi.squareTable,key:`${_}-container`},B("div",{class:xi.squareTableRow},B("div",{class:s1(xi.squareTableCell,xi.squareTableLabel,xi.squareTableLabelRightBottom)},v?n.top:n.left),B("div",{class:xi.squareTableCell}),B("div",{class:s1(xi.squareTableCell,xi.squareTableLabel,xi.squareTableLabelLeftBottom)},v?n.left:n.top)),B("div",{class:xi.squareTableRow},B("div",{class:xi.squareTableCell}),c,B("div",{class:xi.squareTableCell})),B("div",{class:xi.squareTableRow},B("div",{class:s1(xi.squareTableCell,xi.squareTableLabel,xi.squareTableLabelRightTop)},v?n.right:n.bottom),B("div",{class:xi.squareTableCell}),B("div",{class:s1(xi.squareTableCell,xi.squareTableLabel,xi.squareTableLabelLeftTop)},v?n.bottom:n.right)))}function Nq(e,t,i){const r=`${i}_arrowStart`,n=`${i}_arrowEnd`,o=e==="left",c={markerStart:null,markerEnd:null};switch(t){case"HL":o?c.markerStart=`url(#${n})`:c.markerEnd=`url(#${r})`;break;case"LL":c.markerStart=`url(#${n})`;break;case"LH":o?c.markerEnd=`url(#${r})`:c.markerStart=`url(#${n})`;break;default:c.markerEnd=`url(#${r})`}return c}function qFe(e,t,i={}){const{focus:r,numClasses:n,colors:o,rotation:c}=e,{opacity:y,effectList:v,ariaLabel:_}=i,I=i.size??60,$=!!r,A=Math.sqrt(I**2+I**2)+($?0:5),k=[],R=[],N=[],D=(I||75)/n;for(let Ae=0;Ae<n;Ae++){const Me=Ae*D;for(let fe=0;fe<n;fe++){const se=fe*D,ye=FP(o[Ae][fe]),he=DP(null),ce={type:"rect",x:se,y:Me,width:D,height:D},xe=Kae(ye);xe&&k.push(xe);const Ne=NP(ce,ye.fill,he,null);Ne&&R.push(Ne),N.push(Yae(ce))}}const j=10,z=15,U=15,W=10;let Q=null;$||(Q="margin: -15px -15px -18px -15px");const K=Nq("left",r,t),ee=Nq("right",r,t),ie=Xae(N),ae=ok(ie,A,A,0,!1,c,!1),ue=ok(ie,A,A,0,!1,$?-45:null,!1),Ie={filter:z2(v)??void 0,opacity:y==null?"":`${y}`};return B("div",{class:$?xi.diamondMidColRamp:xi.squareTableCell,styles:Ie},B("svg",{"aria-label":_,focusable:!1,height:A,role:"image",style:Q,width:A,xmlns:GFe},B("defs",null,B("marker",{id:`${t}_arrowStart`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"5",refY:"5"},B("polyline",{fill:"none",points:"0,0 5,5 0,10",stroke:"#555555","stroke-width":"1"})),B("marker",{id:`${t}_arrowEnd`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"0",refY:"5"},B("polyline",{fill:"none",points:"5,0 0,5 5,10",stroke:"#555555","stroke-width":"1"})),k),B("g",{transform:ae},R),B("g",{transform:ue},B("line",{fill:"none","marker-end":K.markerEnd,"marker-start":K.markerStart,stroke:"#555555","stroke-width":"1",x1:-j,x2:-j,y1:I-z,y2:z}),B("line",{fill:"none","marker-end":ee.markerEnd,"marker-start":ee.markerStart,stroke:"#555555","stroke-width":"1",x1:U,x2:I-U,y1:I+W,y2:I+W}))))}function HFe(e){return e=e||globalThis.location.hostname,WFe.some(t=>(e==null?void 0:e.match(t))!=null)}function Fq(e,t){return e?(t=t||globalThis.location.hostname)?t.match(ile)!=null||t.match(nle)!=null?e.replace("static.arcgis.com","staticdev.arcgis.com"):t.match(rle)!=null||t.match(sle)!=null?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e:null}const ile=/^devext\.arcgis\.com$/,rle=/^qaext\.arcgis\.com$/,nle=/^[\w-]*\.mapsdevext\.arcgis\.com$/,sle=/^[\w-]*\.mapsqa\.arcgis\.com$/,WFe=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local\.esri\.com$/,ile,rle,/^jsapps\.esri\.com$/,nle,sle];function ole(e,t,i,r){const n=e.name;return n==null?Promise.reject(new ne("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):e.styleName==="Esri2DPointSymbolsStyle"?JFe(n,t,r):Joe(e,t,r).then(o=>lle(o,n,t,i,AOe,r))}function ale(e,t){return t.items.find(i=>i.name===e)}function lle(e,t,i,r,n,o){var k,R;const c=(i==null?void 0:i.portal)!=null?i.portal:Cr.getDefault(),y={portal:c,url:cr(e.baseUrl),origin:"portal-item"},v=ale(t,e.data);if(!v){const N=`The symbol name '${t}' could not be found`;return Promise.reject(new ne("symbolstyleutils:symbol-name-not-found",N,{symbolName:t}))}let _=rp(n(v,r),y),I=((k=v.thumbnail)==null?void 0:k.href)??null;const $=(R=v.thumbnail)==null?void 0:R.imageData;HFe()&&(_=Fq(_)??"",I=Fq(I));const A={portal:c,url:cr(yO(_)),origin:"portal-item"};return wP(_,o).then(N=>{const D=r==="cimRef"?Zoe(N.data):N.data,j=foe(D,A);if(j&&Nu(j)){if(I){const z=rp(I,y);j.thumbnail=new a0({url:z})}else $&&(j.thumbnail=new a0({url:`data:image/png;base64,${$}`}));e.styleUrl?j.styleOrigin=new M2({portal:i.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(j.styleOrigin=new M2({portal:i.portal,styleName:e.styleName,name:t}))}return j})}function JFe(e,t,i){const r=COe.replaceAll(/\{SymbolName\}/gi,e),n=t.portal!=null?t.portal:Cr.getDefault();return wP(r,i).then(o=>{const c=Zoe(o.data);return foe(c,{portal:n,url:cr(yO(r)),origin:"portal-item"})})}const ZFe=Object.freeze(Object.defineProperty({__proto__:null,fetchSymbolFromStyle:lle,getStyleItemFromStyle:ale,resolveWebStyleSymbol:ole},Symbol.toStringTag,{value:"Module"})),Vf=Ur.size,_x=Ur.maxSize,jP=Ur.maxOutlineSize,Dq=Ur.lineWidth,ak=Ur.tallSymbolWidth;function y1(e){const t=e.outline,i=e.material!=null?e.material.color:null,r=i!=null?i.toHex():null;if(t==null||"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"&&t.pattern.style==="none")return e.type==="fill"&&r==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const n=Qi(t.size)||0;return{color:"rgba("+(t.color!=null?t.color.toRgba():"255,255,255,1")+")",width:Math.min(n,jP),style:"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"?rP(t.pattern.style):null,join:"butt",cap:"patternCap"in t?t.patternCap:"butt"}}async function KFe(e,t){var r,n,o;if((r=e.thumbnail)!=null&&r.url)return e.thumbnail.url;if(t.type==="icon"&&((n=t==null?void 0:t.resource)==null?void 0:n.href))return A7e(t);const i=jt("esri/images/Legend/legend3dsymboldefault.png");if(e.styleOrigin&&(e.styleOrigin.styleName||e.styleOrigin.styleUrl)){const c=await ole(e.styleOrigin,{portal:e.styleOrigin.portal},"webRef").catch(()=>null);if(c&&"thumbnail"in c&&((o=c.thumbnail)!=null&&o.url))return c.thumbnail.url}return i}function XE(e,t=1){const i=e.a,r=mP(e),n=r.h,o=r.s/t,c=100-(100-r.v)/t,{r:y,g:v,b:_}=F3({h:n,s:o,v:c});return[y,v,_,i]}function E4(e){var t;return e.type==="water"?e.color==null?null:e.color:((t=e.material)==null?void 0:t.color)==null?null:e.material.color}function Yt(e,t=0){const i=E4(e);if(!i){if(e.type==="fill")return null;const n=T7e.r,o=Zd(n,t);return[o,o,o,100]}const r=i.toRgba();for(let n=0;n<3;n++)r[n]=Zd(r[n],t);return r}async function ule(e,t){const i=e.style;return i==="none"?null:{type:"pattern",x:0,y:0,src:await I7e(jt(`esri/symbols/patterns/${i}.png`),t.toCss(!0)),width:5,height:5}}function jq(e){return e.outline?y1(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function zP(e,t){const i=E4(e);if(!i)return null;let r="rgba(";return r+=Zd(i.r,t)+",",r+=Zd(i.g,t)+",",r+=Zd(i.b,t)+",",r+i.a+");"}function lk(e,t){const i=zP(e,t);return i?"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"&&e.pattern.style==="none"?null:{color:i,width:Math.min(e.size?Qi(e.size):.75,jP),style:"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"?rP(e.pattern.style):null,cap:"cap"in e?e.cap:null,join:"join"in e?e.join==="miter"?Qi(2):e.join:null}:{}}function mS(e,t,i){const r=i!=null?.75*i:0;return{type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function YFe(e){const t=e.depth,i=e.height,r=e.width;return r!==0&&t!==0&&i!==0&&r===t&&r!=null&&i!=null&&r<i}function XFe(e,t,i){var n,o;const r=[];if(!e)return r;switch(e.type){case"icon":{const v=t,_=t;switch(((n=e.resource)==null?void 0:n.primitive)??S9e){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:Yt(e,0),stroke:y1(e)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[0,_]},{command:"L",values:[0,0]},{command:"L",values:[v,0]},{command:"L",values:[v,_]},{command:"Z",values:[]}]},fill:Yt(e,0),stroke:y1(e)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[0,_]},{command:"L",values:[.5*v,0]},{command:"L",values:[v,_]},{command:"Z",values:[]}]},fill:Yt(e,0),stroke:y1(e)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*v,0]},{command:"L",values:[.5*v,_]},{command:"M",values:[0,.5*_]},{command:"L",values:[v,.5*_]}]},stroke:jq(e)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[v,_]},{command:"M",values:[v,0]},{command:"L",values:[0,_]}]},stroke:jq(e)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*_]},{command:"L",values:[.5*v,0]},{command:"L",values:[v,.5*_]},{command:"L",values:[.5*v,_]},{command:"Z",values:[]}]},fill:Yt(e,0),stroke:y1(e)})}break}case"object":switch(((o=e.resource)==null?void 0:o.primitive)??$9e){case"cone":{const c=mS(Yt(e,0),Yt(e,-.6),i?ak:t),y=wFe(t,i);r.push({shape:y[0],fill:c},{shape:y[1],fill:c});break}case"inverted-cone":{const c=Yt(e,0),y=mS(c,Yt(e,-.6),t),v=bFe(t);r.push({shape:v[0],fill:y},{shape:v[1],fill:c});break}case"cube":{const c=gFe(t,i);r.push({shape:c[0],fill:Yt(e,0)},{shape:c[1],fill:Yt(e,-.3)},{shape:c[2],fill:Yt(e,-.5)});break}case"cylinder":{const c=mS(Yt(e,0),Yt(e,-.6),i?ak:t),y=vFe(t,i);r.push({shape:y[0],fill:c},{shape:y[1],fill:c},{shape:y[2],fill:Yt(e,0)});break}case"diamond":{const c=_Fe(t);r.push({shape:c[0],fill:Yt(e,-.3)},{shape:c[1],fill:Yt(e,0)},{shape:c[2],fill:Yt(e,-.3)},{shape:c[3],fill:Yt(e,-.7)});break}case"sphere":{const c=mS(Yt(e,0),Yt(e,-.6));c.x1=0,c.y1=0,c.x2=.25*t,c.y2=.25*t,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:c});break}case"tetrahedron":{const c=SFe(t);r.push({shape:c[0],fill:Yt(e,-.3)},{shape:c[1],fill:Yt(e,0)},{shape:c[2],fill:Yt(e,-.6)});break}}break}return r}function IT(e){const t=typeof(e==null?void 0:e.size)=="number"?e==null?void 0:e.size:null;return t?Qi(t):null}function QFe(e){return e.type==="icon"?"multiply":"tint"}async function eDe(e,t){const i=IT(t),r=t!=null&&t.maxSize?Qi(t.maxSize):null,n=(t==null?void 0:t.disableUpsampling)??!1,o=e.symbolLayers,c=[],y=[];let v=!1,_=0,I=0,$=0;o.forEach(R=>{var z,U,W,Q;if(R.type!=="icon"&&R.type!=="object")return;R&&R.type==="icon"&&($=Math.max(R.size&&Qi(R.size),$));const N=R.type==="icon"?R.size&&Qi(R.size):0,D=i||N?Math.ceil(Math.min(i||N,r||_x)):Vf;let j=R.type==="icon"?R.angle:null;if((t==null?void 0:t.rotation)!=null&&(j=(j??0)+t.rotation),y.push(j),(z=R==null?void 0:R.resource)==null?void 0:z.href){const K=KFe(e,R).then(ee=>{var ue;const ie=(ue=R==null?void 0:R.material)==null?void 0:ue.color,ae=QFe(R);return BFe(ee,D,ie,ae,n)}).then(ee=>{const ie=ee.width,ae=ee.height;return _=Math.max(_,ie),I=Math.max(I,ae),j&&(v=!0),[{shape:{type:"image",x:0,y:0,width:ie,height:ae,src:ee.url},fill:null,stroke:null}]});c.push(K)}else{let K=D;R.type==="icon"&&i&&(K=D*(N/$));const ee=(t==null?void 0:t.symbolConfig)==="tall"||((U=t==null?void 0:t.symbolConfig)==null?void 0:U.isTall)||R.type==="object"&&YFe(R);_=Math.max(_,ee?ak:K),I=Math.max(I,K),j&&((W=R.resource)!=null&&W.primitive)&&["square","triangle","x"].includes((Q=R.resource)==null?void 0:Q.primitive)&&(v=!0),c.push(Promise.resolve(XFe(R,K,ee)))}});const A=await Promise.allSettled(c),k=[];return A.forEach(R=>{R.status==="fulfilled"?k.push(R.value):R.reason&&_e.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",R.reason)}),G3(k,[_,I],{node:t==null?void 0:t.node,scale:!1,opacity:t==null?void 0:t.opacity,ariaLabel:t==null?void 0:t.ariaLabel,rotations:y,useRotationSize:v})}function tDe(e,t){const i=e.symbolLayers,r=[],n=dT(e),o=IT(t),c=(t!=null&&t.maxSize?Qi(t.maxSize):null)||jP;let y,v=0,_=0;return i.forEach((I,$)=>{if(!I||I.type!=="line"&&I.type!=="path")return;const A=[];switch(I.type){case"line":{const k=lk(I,0);if(k==null)break;const R=(k==null?void 0:k.width)||0;$===0&&(y=R);const N=Math.min(o||R,c),D=$===0?N:o?N*(R/y):N,j=D>Dq/2?2*D:Dq;_=Math.max(_,D),v=Math.max(v,j),k.width=D,A.push({shape:{type:"path",path:[{command:"M",values:[0,.5*_]},{command:"L",values:[v,.5*_]}]},stroke:k});break}case"path":{const k=Math.min(o||Vf,c),R=Yt(I,0),N=Yt(I,-.2),D=zP(I,-.4),j=D?{color:D,width:1}:{};if(I.profile==="quad"){const z=I.width,U=I.height,W=fFe(z&&U?z/U:1,U===0,z===0),Q={...j,join:"bevel"};A.push({shape:W[0],fill:N,stroke:Q},{shape:W[1],fill:N,stroke:Q},{shape:W[2],fill:R,stroke:Q})}else A.push({shape:Ub.pathSymbol3DLayer[0],fill:N,stroke:j},{shape:Ub.pathSymbol3DLayer[1],fill:R,stroke:j});_=Math.max(_,k),v=_}}r.push(A)}),Promise.resolve(G3(r,[v,_],{node:t==null?void 0:t.node,scale:n,opacity:t==null?void 0:t.opacity,ariaLabel:t==null?void 0:t.ariaLabel}))}async function iDe(e,t){const i=e.type==="mesh-3d",r=e.symbolLayers,n=IT(t),o=t!=null&&t.maxSize?Qi(t.maxSize):null,c=n||Vf,y=[];let v=0,_=0,I=!1;for(let $=0;$<r.length;$++){const A=r.at($),k=[];if(!i||A.type==="fill"){switch(A.type){case"fill":{const R=Math.min(c,o||_x);if(v=Math.max(v,R),_=Math.max(_,R),I=!0,i){const N=Ub.meshSymbol3DFill,D=zP(A,-.4),j=D?{color:D,width:1,join:"round"}:{};k.push({shape:N[0],fill:Yt(A,0),stroke:j},{shape:N[1],fill:Yt(A,-.2),stroke:j},{shape:N[2],fill:Yt(A,-.6),stroke:j})}else{let N=Yt(A,0);const D="pattern"in A?A.pattern:null,j=y1(A),z=E4(A);D!=null&&D.type==="style"&&D.style!=="solid"&&z&&(N=await ule(D,z)),k.push({shape:Ub.fill[0],fill:N,stroke:j})}break}case"line":{const R=lk(A,0);if(R==null)break;const N={stroke:R,shape:Ub.fill[0]};v=Math.max(v,Vf),_=Math.max(_,Vf),k.push(N);break}case"extrude":{const R={join:"round",width:1,...lk(A,-.4)},N=Yt(A,0),D=Yt(A,-.2),j=Math.min(c,o||_x),z=yFe(j);R.width=1,k.push({shape:z[0],fill:D,stroke:R},{shape:z[1],fill:D,stroke:R},{shape:z[2],fill:N,stroke:R});const U=Vf,W=.7*Vf+.5*j;v=Math.max(v,U),_=Math.max(_,W);break}case"water":{const R=E4(A),N=XE(R),D=XE(R,2),j=XE(R,3),z=mFe();I=!0,k.push({shape:z[0],fill:N},{shape:z[1],fill:D},{shape:z[2],fill:j});const U=Math.min(c,o||_x);v=Math.max(v,U),_=Math.max(_,U);break}}y.push(k)}}return G3(y,[v,_],{node:t==null?void 0:t.node,scale:I,opacity:t==null?void 0:t.opacity,ariaLabel:t==null?void 0:t.ariaLabel})}function rDe(e,t){if(e.symbolLayers.length===0)return Promise.reject(new ne("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(e.type){case"point-3d":return eDe(e,t);case"line-3d":return tDe(e,t);case"polygon-3d":case"mesh-3d":return iDe(e,t)}return Promise.reject(new ne("symbolPreview: swatchInfo3D","symbol not supported."))}const nDe=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:ule,getSizeFromOptions:IT,getSymbolLayerFill:Yt,previewSymbol3D:rDe},Symbol.toStringTag,{value:"Module"})),zq={HH:315,HL:45,LL:135,LH:225},sDe={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function oDe(e){if(!e)return;const{type:t}=e;if(t.includes("3d"))return Yt(e.symbolLayers.at(0));if(t==="simple-line"){const i=D2(e);return i&&i.color}if(e.type==="simple-marker"&&(e.style==="x"||e.style==="cross")){const i=D2(e);return i&&i.color}return x7e(e)}function aDe(e,t){const i=t.HH.label,r=t.LL.label,n=t.HL.label,o=t.LH.label;switch(e){case"HH":default:return{top:i,bottom:r,left:n,right:o};case"HL":return{top:n,bottom:o,left:r,right:i};case"LL":return{top:r,bottom:i,left:o,right:n};case"LH":return{top:o,bottom:n,left:i,right:r}}}function lDe(e){const{focus:t,infos:i,numClasses:r}=e,n=sDe[r],o={};i.forEach(y=>{o[y.value]={label:y.label,fill:oDe(y.symbol)}});const c=[];for(let y=0;y<r;y++){const v=[];for(let _=0;_<r;_++){const I=o[n[y][_]];v.push(I.fill)}c.push(v)}return{type:"relationship-ramp",numClasses:r,focus:t,colors:c,labels:aDe(t,o),rotation:cle(t)}}function cle(e){let t=zq[e];return e&&t==null&&(t=zq.HH),t||0}let Ey=null;const Vq=[255,255,255];function Uq(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function uDe(e,t,i){const{backgroundColor:r,outline:n,dotSize:o}=e,c=(i==null?void 0:i.swatchSize)||Ur.size,y=.8,v=Math.round(c*c/Math.max(o,.5)**2*y),_=window.devicePixelRatio,I=document.createElement("canvas"),$=c*_;I.width=$,I.height=$,I.style.width=I.width/_+"px",I.style.height=I.height/_+"px";const A=I.getContext("2d");if(r&&(A.fillStyle=r.toCss(!0),A.fillRect(0,0,$,$),A.fill()),A.fillStyle=(t==null?void 0:t.toCss(!0))??"",Ey&&Ey.length/2===v)for(let R=0;R<2*v;R+=2){const N=Ey[R],D=Ey[R+1];A.fillRect(N,D,o*_,o*_),A.fill()}else{Ey=[];for(let R=0;R<2*v;R+=2){const N=Uq(0,$),D=Uq(0,$);Ey.push(N,D),A.fillRect(N,D,o*_,o*_),A.fill()}}n&&(n.color&&(A.strokeStyle=n.color.toCss(!0)),A.lineWidth=n.width,A.strokeRect(0,0,$,$));const k=new Image(c,c);return k.src=I.toDataURL(),k.ariaLabel=(i==null?void 0:i.ariaLabel)??null,k.alt=(i==null?void 0:i.ariaLabel)??"",k}function cDe(e,t={}){const i=t.radius||40,r=2*Math.PI*i,n=e.length,o=r/n,c=[],y=D2(t.outline);(y==null?void 0:y.width)!=null&&(y.width*=2),(y||t.backgroundColor)&&c.push({shape:{type:"circle",cx:i,cy:i,r:i},fill:t.backgroundColor,stroke:y,offset:[0,0]});const v=t.values,_=v&&v.length===n&&v.reduce((R,N)=>R+N,0)===100,I=[0];for(let R=0;R<n;R++){let N=null;_&&(N=v[R]*r/100,I.push(N+I[R])),c.push({shape:{type:"circle",cx:i,cy:i,r:i/2},fill:[0,0,0,0],stroke:{width:i,dashArray:`${(N??o)/2} ${r}`,dashoffset:"-"+(_?I[R]/2:R*(o/2)),color:e[R]},offset:[0,0]})}let $=null;const A=2*i+((y==null?void 0:y.width)||0),k=t.holePercentage;if(k){y&&c.push({shape:{type:"circle",cx:i,cy:i,r:i*k},fill:null,stroke:y,offset:[0,0]});const R=A/2;$=[[{shape:{type:"circle",cx:R,cy:R,r:R},fill:Vq,stroke:y?{...y,color:Vq}:null,offset:[0,0]},{shape:{type:"circle",cx:R,cy:R,r:i*k},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return G3([c],[A,A],{effectView:t.effectList,ignoreStrokeWidth:!0,masking:$,rotations:[-90],ariaLabel:t.ariaLabel})}function $f(e,t={}){const n=t.align==="horizontal",o=n?75:24,c=n?24:75,y=t.width??o,v=t.height??c,_=t.gradient??!0,I=window.devicePixelRatio,$=y*I,A=v*I,k=document.createElement("canvas");k.width=$,k.height=A,k.ariaLabel=t.ariaLabel??null,k.style.width=`${y}px`,k.style.height=`${v}px`;const R=k.getContext("2d"),N=n?$:0,D=n?0:A;if(_){const z=R.createLinearGradient(0,0,N,D),U=e.length,W=U===1?0:1/(U-1);e.forEach((Q,K)=>z.addColorStop(K*W,Q.toString())),R.fillStyle=z,R.fillRect(0,0,$,A)}else{const z=n?$/e.length:$,U=n?A:A/e.length;let W=0,Q=0;for(const K of e)R.fillStyle=K.toString(),R.fillRect(W,Q,z,U),W=n?W+z:0,Q=n?0:Q+U}const j=document.createElement("div");return j.style.width=`${y}px`,j.style.height=`${v}px`,hDe(j,t==null?void 0:t.effectList),j.appendChild(k),j}function hDe(e,t){if(!t)return;e.style.filter=z2(t);const i=t.effects;if(i){for(const r of i)if((r==null?void 0:r.type)==="drop-shadow"){r.offsetX<0?e.style.marginLeft=`${Math.abs(r.offsetX)}px`:e.style.marginRight=`${r.offsetX}px`;break}}}async function hle(e,t){switch(e.type){case"web-style":{const{previewWebStyleSymbol:i}=await de(()=>import("./previewWebStyleSymbol-Fht7dM7d.js"),[],import.meta.url);return i(e,hle,t)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:i}=await de(()=>Promise.resolve().then(()=>nDe),void 0,import.meta.url);return i(e,t)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:i}=await de(()=>import("./previewSymbol2D-DlJOl5cI.js"),__vite__mapDeps([242,59]),import.meta.url);return i(e,t)}case"cim":{const{previewCIMSymbol:i}=await de(()=>import("./previewCIMSymbol-B8Q4vCkH.js"),__vite__mapDeps([243,57,58,59,60,61,56,138]),import.meta.url);return i(e,t)}default:return}}function dle(e){return e&&"opacity"in e?e.opacity*dle(e.parent):1}async function Bq(e,t){var U;if(!e)return;const i=e.sourceLayer,r=(t!=null&&t.useSourceLayer?i:e.layer)??i,n=dle(r);if(e.symbol!=null&&(t==null||t.ignoreGraphicSymbol!==!0)){const W=e.symbol.type==="web-style"?await B7e(e.symbol,{...t,cache:t!=null?t.webStyleCache:null}):e.symbol.clone();return SE(W,null,n),W}const o=(t==null?void 0:t.renderer)??dDe(r);let c=o&&"getSymbolAsync"in o?await o.getSymbolAsync(e,t):null;if(!c)return;if(c=c.type==="web-style"?await c.fetchSymbol({...t,cache:t!=null?t.webStyleCache:null}):c.clone(),!o||!("visualVariables"in o)||!((U=o.visualVariables)!=null&&U.length))return SE(c,null,n),c;if("arcadeRequiredForVisualVariables"in o&&o.arcadeRequiredForVisualVariables&&(t==null?void 0:t.arcade)==null){const W={...t};W.arcade=await eh(),t=W}const{getColor:y,getOpacity:v,getAllSizes:_,getRotationAngle:I}=await de(()=>Promise.resolve().then(()=>ty),void 0,import.meta.url),$=[],A=[],k=[],R=[];for(const W of o.visualVariables)switch(W.type){case"color":$.push(W);break;case"opacity":A.push(W);break;case"rotation":R.push(W);break;case"size":W.target||k.push(W)}const N=!!$.length&&$[$.length-1],D=N?y(N,e,t):null,j=!!A.length&&A[A.length-1];let z=j?v(j,e,t):null;if(n!=null&&(z=z!=null?z*n:n),SE(c,D,z),k.length){const W=_(k,e,t);await V7e(c,W)}for(const W of R)U7e(c,I(W,e,t),W.axis);return c}function dDe(e){if(e)return"renderer"in e?e.renderer:void 0}function uk(e){return e&&typeof e.highlight=="function"}function pDe(e,t,i){return e==null||e>=i&&(t===0||e<=t)}function _rt(e,t){if(t&&e){const{minScale:i,maxScale:r}=e;if(fDe(i,r))return pDe(t,i,r)}return!0}function fDe(e,t){return e!=null&&e>0||t!=null&&t>0}function Srt(e){return!(e!=null&&e.minScale)||!e.maxScale||e.minScale>=e.maxScale}const yDe="esri.widgets.Popup.PopupViewModel",M4=()=>_e.getLogger(yDe),mDe=e=>{const{event:t,view:i,viewModel:r}=e,{action:n}=t;if(!n)return Promise.reject(new ne("trigger-action:missing-arguments","Event has no action"));const{disabled:o,id:c}=n;if(!c)return Promise.reject(new ne("trigger-action:invalid-action","action.id is missing"));if(o)return Promise.reject(new ne("trigger-action:invalid-action","Action is disabled"));if(c===Ld.id)return fle(r).catch(xM);if(c===f1.id)return vDe(r);if(c===_d.id)return r.browseClusterEnabled=!r.browseClusterEnabled,r.featureMenuOpen=r.browseClusterEnabled,Promise.resolve();if(c===sk.id){r.visible=!1;const{selectedFeature:y}=r;if(!y)return Promise.reject(new ne(`trigger-action:${sk.id}`,"selectedFeature is required",{selectedFeature:y}));const{sourceLayer:v}=y;return v?v.remove(y):i==null||i.graphics.remove(y),Promise.resolve()}return Promise.resolve()};function ple(e){const{selectedFeature:t,location:i,view:r}=e;return r?t??i??null:null}function Uf(e){var t,i;return!!e&&e.isAggregate&&((i=(t=e.sourceLayer)==null?void 0:t.featureReduction)==null?void 0:i.type)==="cluster"}async function gDe(e,t){if((t==null?void 0:t.type)!=="3d"||!e||e.declaredClass!=="esri.Graphic")return!0;const i=t.getViewForGraphic(e);if(i&&"whenGraphicBounds"in i){let r=null;try{r=await i.whenGraphicBounds(e,{useViewElevation:!0})}catch{}return!r||!r.boundingBox||r.boundingBox[0]===r.boundingBox[3]&&r.boundingBox[1]===r.boundingBox[4]&&r.boundingBox[2]===r.boundingBox[5]}return!0}async function fle(e,t){var $,A;const{location:i,selectedFeature:r,view:n,zoomFactor:o}=e;await(($=t==null?void 0:t.viewModel)==null?void 0:$.updateGeometry());const c=t==null?void 0:t.graphic,y=c!=null&&c.geometry?c:ple(e);if(!n||!y){const k=new ne("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:y,view:n});throw M4().error(k),k}const v=n.scale/o,_=(c==null?void 0:c.geometry)??((A=e.selectedFeature)==null?void 0:A.geometry)??i,I=_!=null&&_.type==="point"&&await gDe(c??r,n);Ld.active=!0,Ld.disabled=!0;try{await e.zoomTo({target:{target:y,scale:I?v:void 0}})}catch(k){if(br(k))return;const R=new ne("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:c??r});M4().error(R)}finally{Ld.active=!1,Ld.disabled=!1,e.zoomToLocation=null,I&&(e.location=_)}}async function vDe(e){const{selectedFeature:t,view:i}=e;if((i==null?void 0:i.type)!=="2d"){const c=new ne("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw M4().error(c),c}if(!t||!Uf(t)){const c=new ne("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw M4().error(c),c}const[r,n]=await VP(i,t);f1.active=!0,f1.disabled=!0;const{extent:o}=await r.queryExtent(n);o&&await e.zoomTo({target:o}),f1.active=!1,f1.disabled=!1}async function wDe(e){const{view:t,selectedFeature:i}=e;if(!t||!i)return;const[r,n]=await VP(t,i),{extent:o}=await r.queryExtent(n);e.selectedClusterBoundaryFeature.geometry=o,t.graphics.add(e.selectedClusterBoundaryFeature)}async function bDe(e){const{selectedFeature:t,view:i}=e;if(!i||!t)return;const[r,n]=await VP(i,t);_d.active=!0,_d.disabled=!0;const{features:o}=await r.queryFeatures(n);_d.active=!1,_d.disabled=!1,_d.value=!0,e==null||e.open({features:[t].concat(o),featureMenuOpen:!0})}async function VP(e,t){const i=await e.whenLayerView(t.sourceLayer),r=i.createQuery(),n=t.getObjectId();return r.aggregateIds=n!=null?[n]:[],[i,r]}function _De(e){_d.value=!1;const t=e.features.filter(i=>Uf(i));t.length&&(e.features=t)}const QE="location-scale-handle",SDe=()=>[Ld.clone()],xDe=()=>[f1.clone(),_d.clone()];let gS=null;function IDe(e,t){return e==="building-scene"||t==="2d"&&(e==="map-image"||e==="tile"||e==="imagery"||e==="imagery-tile")}let Mt=class extends sT(Hae){constructor(t){super(t),this._pendingPromises=new dFe,this._fetchFeaturesController=null,this._highlightSelectedFeaturePromise=null,this._highlightActiveFeaturePromise=null,this._selectedClusterFeature=null,this.actions=new d0,this.activeFeature=null,this.autoCloseEnabled=!1,this.browseClusterEnabled=!1,this.content=null,this.defaultPopupTemplateEnabled=!1,this.featurePage=null,this.featuresPerPage=20,this.featureMenuOpen=!1,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new er({symbol:new kl({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null,this._debouncedLocationUpdate=_l(async i=>{var c,y,v,_;const{spatialReference:r}=this,n=(y=(c=this.selectedFeature)==null?void 0:c.geometry)==null?void 0:y.type,o=this.location??i;if(n&&n!=="mesh"&&r&&o&&this.selectedFeature)if(n!=="point")try{const I=this.selectedFeature;let $=I.geometry;const A=this._getHighlightLayer(I),k=I.getObjectId();if(!A||!this.view)return;if(k){const R=(v=this.view)==null?void 0:v.allLayerViews.find(j=>j.layer.uid===A.uid);if(!R||!("queryFeatures"in R))return;const N=R.createQuery();N.outSpatialReference=r,N.objectIds=[k],N.returnGeometry=!0;const{features:D}=await R.queryFeatures(N);$=(_=D[0])==null?void 0:_.geometry}if(!$||$.type==="mesh")return;if($=sh($,r),gS||(gS=await de(()=>import("./geometryEngineAsync-DQ-qkPv3.js"),[],import.meta.url)),!await gS.intersects($,o)){const R=(await gS.nearestCoordinate($,o)).coordinate??o;this.selectedFeature===I&&(this.location=R)}}catch(I){br(I)||_e.getLogger(this).error(I)}else this.location=R2(this.selectedFeature.geometry)??o})}initialize(){this.addHandles([this.on("view-change",()=>this._autoClose()),ge(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),ge(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),ge(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.animation)==null?void 0:i.state},t=>this._animationStateChange(t)),ge(()=>this.location,t=>this._locationChange(t)),ge(()=>this.selectedFeature,t=>this._selectedFeatureChange(t)),ge(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),ge(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),ge(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",t=>mDe({event:t,viewModel:this,view:this.view})),en(()=>!this.waitingForResult,()=>this._waitingForResultChange(),$l),ge(()=>[this.features,this.map,this.spatialReference,this.timeZone],()=>this._updateFeatureVMs()),ge(()=>{var t;return(t=this.view)==null?void 0:t.scale},()=>this._viewScaleChange()),en(()=>!this.visible,()=>this.browseClusterEnabled=!1),ge(()=>this.browseClusterEnabled,t=>t?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null,this.map=null,this.spatialReference=null,this.timeZone=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const t=this._get("allActions")||new d0;t.removeAll();const{actions:i,defaultActions:r,defaultPopupTemplateEnabled:n,includeDefaultActions:o,selectedFeature:c}=this,y=o?r.concat(i):i,v=c&&(typeof c.getEffectivePopupTemplate=="function"&&c.getEffectivePopupTemplate(n)||c.popupTemplate),_=v==null?void 0:v.actions,I=v!=null&&v.overwriteActions?_:(_==null?void 0:_.concat(y))??y;return I==null||I.filter(Boolean).forEach($=>t.add($)),t}get defaultActions(){const t=this._get("defaultActions")||new d0;return t.removeAll(),t.addMany(Uf(this.selectedFeature)?xDe():SDe()),t}get featureCount(){return this.features.length}set features(t){const i=t||[];this._set("features",i);const{pendingPromisesCount:r,promiseCount:n,selectedFeatureIndex:o}=this,c=n&&i.length;c&&r&&o===-1?this.selectedFeatureIndex=0:c&&o!==-1||(this.selectedFeatureIndex=i.length?0:-1)}set location(t){var o,c;let i=t;const r=(o=this.spatialReference)==null?void 0:o.isWebMercator;((c=t==null?void 0:t.spatialReference)==null?void 0:c.isWGS84)&&r&&(i=Au(t)),this._set("location",i)}get map(){var t;return((t=this.view)==null?void 0:t.map)??null}set map(t){this._override("map",t)}get pendingPromisesCount(){return this._pendingPromises.size}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(t){this._pendingPromises.clear(),this.features=[],Array.isArray(t)&&t.length?(this._set("promises",t),(t=t.slice()).forEach(i=>this._pendingPromises.add(i)),t.reduce((i,r)=>i.finally(()=>r.then(n=>{this._pendingPromises.has(r)&&this._updateFeatures(n)}).finally(()=>this._pendingPromises.delete(r)).catch(()=>{})),Promise.resolve())):this._set("promises",[])}get selectedFeature(){const{features:t,selectedFeatureIndex:i}=this;return i===-1?null:t[i]||null}get selectedFeatureIndex(){const t=this._get("selectedFeatureIndex");return typeof t=="number"?t:-1}set selectedFeatureIndex(t){const{featureCount:i}=this;t=isNaN(t)||t<-1||!i?-1:(t+i)%i,this.activeFeature=null,this._set("selectedFeatureIndex",t)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get spatialReference(){var t;return((t=this.view)==null?void 0:t.spatialReference)??null}set spatialReference(t){this._override("spatialReference",t)}get state(){const{view:t,map:i}=this;return t?t.ready?"ready":"disabled":i?"ready":"disabled"}get timeZone(){var t;return((t=this.view)==null?void 0:t.timeZone)??Uo}set timeZone(t){this._overrideIfSome("timeZone",t)}get waitingForContents(){return this.featureViewModels.some(t=>t.waitingForContent)}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}centerAtLocation(){const{view:t}=this,i=ple(this);return i&&t?this.callGoTo({target:{target:i,scale:t.scale}}):Promise.reject(new ne("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:i,view:t}))}zoomTo(t){return this.callGoTo(t)}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(t,i){var n;const{view:r}=this;if(!r||!t)throw new ne("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:t,view:r});return r.fetchPopupFeatures(t,{pointerType:(n=i==null?void 0:i.event)==null?void 0:n.pointerType,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:i==null?void 0:i.signal})}open(t){const i={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...t,visible:!0},{fetchFeatures:r}=i;delete i.fetchFeatures,r&&this._setFetchFeaturesPromises(i.location);const n=["actionsMenuOpen","collapsed"];for(const o of n)delete i[o];this.set(i)}triggerAction(t){const i=this.allActions.at(t);i&&!i.disabled&&this.emit("trigger-action",{action:i})}next(){return this.selectedFeatureIndex++,this}previous(){return this.selectedFeatureIndex--,this}disableClusterBrowsing(){_De(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:t,selectedFeature:i}=this;(t==null?void 0:t.type)==="2d"?Uf(i)?(await wDe(this),await bDe(this)):_e.getLogger(this).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",i):_e.getLogger(this).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",i)}handleViewClick(t){this._fetchFeaturesAndOpen(t)}_animationStateChange(t){this.zoomToLocation||(Ld.disabled=t==="waiting-for-target")}_clearBrowsedClusterGraphics(){var i,r;const t=[this.selectedClusterBoundaryFeature,this._selectedClusterFeature].filter(Ar);(r=(i=this.view)==null?void 0:i.graphics)==null||r.removeMany(t),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(Uf(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=this.selectedFeature?[this.selectedFeature]:[])}_locationChange(t){const{selectedFeature:i,updateLocationEnabled:r,view:n}=this;n&&r&&t&&(!i||i.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:t,featureCount:i,featurePage:r,featuresPerPage:n,featureViewModels:o}=this;if(r===null)return;const c=((r-1)*n+i)%i,y=c+n;o.slice(c,y).forEach((v,_)=>{v&&(v.graphic??(v.graphic=t[c+_]))})}async _selectedFeatureChange(t){var c,y;const{location:i,updateLocationEnabled:r,view:n}=this;if(!t||!n)return;if(this.browseClusterEnabled)return this._selectedClusterFeature&&(n.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),Uf(t)?void 0:(t.symbol=await Bq(t),this._selectedClusterFeature=t,void n.graphics.add(this._selectedClusterFeature));const o=(c=t.sourceLayer)==null?void 0:c.type;if(o!=="map-image"&&o!=="imagery"&&o!=="imagery-tile"||(t.symbol=await Bq(t)),!r&&i||!t.geometry){if(r&&!t.geometry){await this.centerAtLocation();const v=(y=n.center)==null?void 0:y.clone();v&&(this.location=v)}}else this.location=R2(t.geometry)}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}async _setFetchFeaturesPromises(t){const{pendingFeatures:i}=await this._fetchFeaturesWithController({mapPoint:t});this.promises=i}_destroyFeatureVMs(){this.featureViewModels.forEach(t=>t&&!t.destroyed&&t.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:t,features:i,featureViewModels:r,view:n,spatialReference:o,map:c,timeZone:y,location:v}=this;if(Uf(t)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!(i!=null&&i.length))return;const _=r.slice(),I=[];i.forEach(($,A)=>{if(!$)return;let k=null;if(_.some((R,N)=>(R&&R.graphic===$&&(k=R,_.splice(N,1)),!!k)),k)I[A]=k;else{const R=new PP({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:o,graphic:$===t?$:null,location:v,map:c,view:n,timeZone:y});I[A]=R}}),_.forEach($=>$&&!$.destroyed&&$.destroy()),this._set("featureViewModels",I)}async _getScreenPoint(t,i){const{spatialReference:r,view:n}=this;if(!n)return null;await(n==null?void 0:n.when());const o=t==null?void 0:t.spatialReference;return o&&r?(await EI(o,r,null,i),n.toScreen(t)):null}_cancelFetchingFeatures(){const t=this._fetchFeaturesController;t&&t.abort(),this._fetchFeaturesController=null}async _projectScreenPointAndFetchFeatures({mapPoint:t,screenPoint:i,event:r,signal:n}){return this.fetchFeatures(i??await this._getScreenPoint(t??this.location,{signal:n}),{signal:n,event:r})}_fetchFeaturesWithController({mapPoint:t,screenPoint:i,event:r}){this._cancelFetchingFeatures();const n=new AbortController,{signal:o}=n;this._fetchFeaturesController=n;const c=this._projectScreenPointAndFetchFeatures({mapPoint:t,screenPoint:i,signal:o,event:r});return c.catch(()=>{}).then(()=>{this._fetchFeaturesController=null}),c}async _fetchFeaturesAndOpen(t){const{mapPoint:i,screenPoint:r}=t,{view:n}=this;this.removeHandles(QE),this.addHandles([ge(()=>{var c;return(c=this.view)==null?void 0:c.scale},()=>this._debouncedLocationUpdate(i).catch(c=>{br(c)||_e.getLogger(this).error(c)})),en(()=>!this.visible,()=>{this.removeHandles(QE)},{once:!0})],QE);const{pendingFeatures:o}=await this._fetchFeaturesWithController({mapPoint:i,screenPoint:r,event:t});n!=null&&n.popup&&"open"in n.popup&&n.popup.open({location:i??void 0,promises:o})}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}async _getLayerView(t,i){return await t.when(),t.whenLayerView(i)}_getHighlightLayer(t){const{layer:i,sourceLayer:r}=t;return r&&"layer"in r&&r.layer?r.layer:(r==null?void 0:r.type)==="map-notes"||(r==null?void 0:r.type)==="subtype-group"?r:i}_getHighlightTarget(t,i,r){if(IDe(i.type,r))return t;const n=t.getObjectId();if(n!=null)return n;const o=i.type==="imagery"?void 0:"objectIdField"in i?i.objectIdField||pFe:null,c=t.attributes;return c&&o&&c[o]||t}_mapIncludesLayer(t){var i,r;return!!((r=(i=this.map)==null?void 0:i.allLayers)!=null&&r.includes(t))}async _highlightActiveFeature(){const t="highlight-active-feature";this.removeHandles(t);const{highlightEnabled:i,view:r,activeFeature:n,visible:o}=this;if(!(n&&r&&i&&o))return;const c=this._getHighlightLayer(n);if(!(c&&c instanceof $2&&this._mapIncludesLayer(c)))return;const y=this._getLayerView(r,c);this._highlightActiveFeaturePromise=y;const v=await y;if(!(v&&uk(v)&&this._highlightActiveFeaturePromise===y&&this.activeFeature&&this.highlightEnabled))return;const _=v.highlight(this._getHighlightTarget(n,c,r.type));this.addHandles(_,t)}async _highlightSelectedFeature(){const t="highlight-selected-feature";this.removeHandles(t);const{selectedFeature:i,highlightEnabled:r,view:n,visible:o}=this;if(!(i&&n&&r&&o))return;const c=this._getHighlightLayer(i);if(!(c&&c instanceof $2&&this._mapIncludesLayer(c)))return;const y=this._getLayerView(n,c);this._highlightSelectedFeaturePromise=y;const v=await y;if(!(v&&uk(v)&&this._highlightSelectedFeaturePromise===y&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const _=v.highlight(this._getHighlightTarget(i,c,n.type));this.addHandles(_,t)}_updateFeatures(t){const{features:i}=this,r=t.filter(n=>!i.includes(n));r!=null&&r.length&&(this.features=i.concat(r))}};m([w()],Mt.prototype,"_fetchFeaturesController",void 0),m([w({type:d0})],Mt.prototype,"actions",void 0),m([w({readOnly:!0})],Mt.prototype,"active",null),m([w()],Mt.prototype,"activeFeature",void 0),m([w({readOnly:!0})],Mt.prototype,"allActions",null),m([w()],Mt.prototype,"autoCloseEnabled",void 0),m([w()],Mt.prototype,"browseClusterEnabled",void 0),m([w()],Mt.prototype,"content",void 0),m([w({type:d0,readOnly:!0})],Mt.prototype,"defaultActions",null),m([w({type:Boolean})],Mt.prototype,"defaultPopupTemplateEnabled",void 0),m([w({readOnly:!0})],Mt.prototype,"featureCount",null),m([w()],Mt.prototype,"featurePage",void 0),m([w({value:[]})],Mt.prototype,"features",null),m([w()],Mt.prototype,"featuresPerPage",void 0),m([w()],Mt.prototype,"featureMenuOpen",void 0),m([w()],Mt.prototype,"featureViewModelAbilities",void 0),m([w({readOnly:!0})],Mt.prototype,"featureViewModels",void 0),m([w()],Mt.prototype,"highlightEnabled",void 0),m([w()],Mt.prototype,"includeDefaultActions",void 0),m([w({type:st})],Mt.prototype,"location",null),m([w()],Mt.prototype,"map",null),m([w({readOnly:!0})],Mt.prototype,"pendingPromisesCount",null),m([w({readOnly:!0})],Mt.prototype,"promiseCount",null),m([w()],Mt.prototype,"promises",null),m([w({readOnly:!0})],Mt.prototype,"selectedClusterBoundaryFeature",void 0),m([w({value:null,readOnly:!0})],Mt.prototype,"selectedFeature",null),m([w({value:-1})],Mt.prototype,"selectedFeatureIndex",null),m([w({readOnly:!0})],Mt.prototype,"selectedFeatureViewModel",null),m([w({readOnly:!0})],Mt.prototype,"state",null),m([w()],Mt.prototype,"timeZone",null),m([w()],Mt.prototype,"title",void 0),m([w()],Mt.prototype,"updateLocationEnabled",void 0),m([w()],Mt.prototype,"view",void 0),m([w()],Mt.prototype,"visible",void 0),m([w({readOnly:!0})],Mt.prototype,"waitingForContents",null),m([w({readOnly:!0})],Mt.prototype,"waitingForResult",null),m([w()],Mt.prototype,"zoomFactor",void 0),m([w()],Mt.prototype,"zoomToLocation",void 0),m([w()],Mt.prototype,"centerAtLocation",null),Mt=m([H("esri.widgets.Features.FeaturesViewModel")],Mt);const UP=Mt;let el=class extends Ve{constructor(){super(...arguments),this.actionBar=!0,this.closeButton=!0,this.collapseButton=!1,this.featureNavigation=!0,this.featureListLayerTitle=!0,this.flow=!0,this.heading=!0,this.spinner=!0}};m([w({type:Boolean,nonNullable:!0})],el.prototype,"actionBar",void 0),m([w({type:Boolean,nonNullable:!0})],el.prototype,"closeButton",void 0),m([w({type:Boolean,nonNullable:!0})],el.prototype,"collapseButton",void 0),m([w({type:Boolean,nonNullable:!0})],el.prototype,"featureNavigation",void 0),m([w({type:Boolean,nonNullable:!0})],el.prototype,"featureListLayerTitle",void 0),m([w({type:Boolean,nonNullable:!0})],el.prototype,"flow",void 0),m([w({type:Boolean,nonNullable:!0})],el.prototype,"heading",void 0),m([w({type:Boolean,nonNullable:!0})],el.prototype,"spinner",void 0),el=m([H("esri.widgets.Features.FeaturesVisibleElements")],el);const yle=el,Gq="selected-index",TDe=0,qq="features-spinner";function Hq(e){return(e==null?void 0:e.declaredClass.startsWith("esri.layers."))??!1}let Ft=class extends Bae(yi){constructor(t,i){super(t,i),this._featureMenuIntersectionObserverCallback=([r])=>{r!=null&&r.isIntersecting&&this.viewModel.featurePage!=null&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._featureMenuIntersectionObserverNode=null,this._spinner=null,this._feature=null,this._focusAbortController=null,this._drillInFlowItems=new Oe,this._drillInWidget=new hFe({flowItems:this._drillInFlowItems}),this._rootFlowItemNode=null,this._featureMenuViewportNode=null,this._actionBarMenuNode=null,this.collapsed=!1,this.featureNavigationTop=!1,this.headerActions=new d0,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.responsiveActionsEnabled=!1,this.viewModel=new UP,this.visibleElements=new yle,this._renderAction=(r,n)=>{const o=this._getActionTitle(r),{type:c,active:y,uid:v,disabled:_,indicator:I}=r;return r.visible?B("calcite-action",{active:c==="toggle"&&r.value,appearance:"solid",bind:this,"data-action-uid":v,disabled:_,icon:this._getActionIcon(r),indicator:I,key:`action-${n}`,loading:y,onclick:this._triggerAction,scale:"s",text:o,title:this._hideActionText?o:void 0},this._getFallbackIcon(r)):null},this._openFeatureMenu=()=>{this.featureMenuOpen=!0,this._focusFlowItemNode("menu-flow-item")},this._previousFeature=()=>{this.viewModel.selectedFeatureIndex--},this._nextFeature=()=>{this.viewModel.selectedFeatureIndex++},this._handleFeatureMenuBack=()=>{this.featureMenuOpen&&(this._focusFlowItemNode("root-flow-item"),this.featureMenuOpen=!1)},this._displaySpinnerThrottled=GR(()=>this._displaySpinner(),TDe),this._addSelectedFeatureIndexHandle(),this.addHandles([this._displaySpinnerThrottled,ge(()=>{var r;return(r=this.viewModel)==null?void 0:r.active},()=>this._toggleScreenLocationEnabled()),ge(()=>{var r;return(r=this.viewModel)==null?void 0:r.active},r=>this._drillInWidget.closed=!r),ge(()=>{var r;return(r=this.visibleElements)==null?void 0:r.closeButton},r=>this._drillInWidget.closable=r),ge(()=>{var r;return(r=this.visibleElements)==null?void 0:r.spinner},r=>this._spinnerEnabledChange(r)),ge(()=>{var r;return(r=this.viewModel)==null?void 0:r.view},(r,n)=>this._viewChange(r,n)),ge(()=>{var r,n;return(n=(r=this.viewModel)==null?void 0:r.view)==null?void 0:n.ready},(r,n)=>this._viewReadyChange(r??!1,n??!1)),ge(()=>{var r,n;return[(r=this.viewModel)==null?void 0:r.waitingForResult,(n=this.viewModel)==null?void 0:n.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),ge(()=>{var r;return(r=this.viewModel)==null?void 0:r.screenLocation},()=>this._closeOpenActionMenu()),ge(()=>this.selectedFeatureWidget,()=>this._destroyDrillInFlowItemWidgets()),ge(()=>{var n;const r=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel;return[r==null?void 0:r.title,r==null?void 0:r.state]},()=>this._setTitleFromFeatureWidget()),ge(()=>{var n;const r=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel;return[r==null?void 0:r.content,r==null?void 0:r.state]},()=>this._setContentFromFeatureWidget()),ge(()=>{var r;return(r=this.viewModel)==null?void 0:r.featureViewModels},()=>this._featureMenuViewportScrollTop()),this._drillInWidget.on("close",()=>this.close()),this._drillInWidget.on("exit",()=>this._destroyDrillInFlowItemWidgets()),this._drillInWidget.on("open-feature",({feature:r})=>this._openRelatedFeature(r)),this._drillInWidget.on("zoom-to-feature",({featureWidget:r})=>fle(this.viewModel,r))])}loadDependencies(){return Vn({action:()=>de(()=>import("./calcite-action-e4eforA9.js"),__vite__mapDeps([233,227,195]),import.meta.url),"action-bar":()=>de(()=>import("./calcite-action-bar-676MELkr.js"),__vite__mapDeps([234,235,236,227,195,237,231,238,229,232]),import.meta.url),"action-group":()=>de(()=>import("./calcite-action-group-L5zDZYe4.js"),__vite__mapDeps([239,235,236,227,195,237,231,238,229,232]),import.meta.url),button:()=>de(()=>import("./calcite-button-D1yBd9JN.js"),__vite__mapDeps([194,195]),import.meta.url),flow:()=>de(()=>import("./calcite-flow-4q6HHjyt.js"),[],import.meta.url),"flow-item":()=>de(()=>import("./calcite-flow-item-B-gbMQQs.js"),__vite__mapDeps([240,241,236,227,195,237,231,238,229,232,225]),import.meta.url),list:()=>de(()=>import("./calcite-list-BeSrBmBe.js"),__vite__mapDeps([222,223,224,195,225]),import.meta.url),"list-item":()=>de(()=>import("./calcite-list-item-bKE4O7k7.js"),__vite__mapDeps([226,224,223,227,195]),import.meta.url),"list-item-group":()=>de(()=>import("./calcite-list-item-group-CvuYwOeK.js"),__vite__mapDeps([244,223]),import.meta.url),loader:()=>de(()=>import("./calcite-loader-CkzKaCO4.js"),__vite__mapDeps([221,195]),import.meta.url)})}destroy(){var t,i,r;this._destroyDrillInFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),this._unobserveFeatureMenuObserver(),(t=this._featureMenuIntersectionObserver)==null||t.disconnect(),(i=this._drillInWidget)==null||i.destroy(),(r=this._focusAbortController)==null||r.abort()}get _hideActionText(){var i;if(!this.responsiveActionsEnabled)return!1;const t=(i=this.view)==null?void 0:i.widthBreakpoint;return t==="xsmall"||t==="small"||t==="medium"}get _featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get _isCollapsed(){return this._collapseEnabled&&this.collapsed}get _collapseEnabled(){return this.visibleElements.collapseButton&&!!this.title&&!!this.content}get active(){return this.viewModel.active}get content(){return this.viewModel.content}set content(t){this.viewModel.content=t}get icon(){return null}get featureMenuOpen(){return this.viewModel.featureMenuOpen}set featureMenuOpen(t){this.viewModel.featureMenuOpen=t}get features(){return this.viewModel.features}set features(t){this.viewModel.features=t}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get location(){return this.viewModel.location}set location(t){this.viewModel.location=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get map(){return this.viewModel.map}set map(t){this.viewModel.map=t}get promises(){return this.viewModel.promises}set promises(t){this.viewModel.promises=t}get selectedFeature(){return this.viewModel.selectedFeature}get selectedDrillInFeature(){const t=Array.from(this._drillInFlowItems).at(-1);if(!t)return null;const{flowType:i}=t;return i==="feature-association"||i==="feature-relationship"?t.graphic??null:null}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(t){this.viewModel.selectedFeatureIndex=t}get selectedFeatureWidget(){const{_feature:t,headingLevel:i,_drillInFlowItems:r,timeZone:n,spatialReference:o,map:c}=this,{selectedFeatureViewModel:y}=this.viewModel,v={title:!1};return y?(t?(t.viewModel=y,t.visibleElements=v):this._feature=new Gae({flowItems:r,headingLevel:i+1,timeZone:n,spatialReference:o,map:c,viewModel:y,visibleElements:v}),this._feature):null}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(t){this.viewModel.spatialReference=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}get timeZone(){return this.viewModel.timeZone}set timeZone(t){this.viewModel.timeZone=t}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(t){this.viewModel.updateLocationEnabled=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get visible(){return this.viewModel.visible}set visible(t){this.viewModel.visible=t}blur(){var i;const{active:t}=this.viewModel;t?(i=this._rootFlowItemNode)==null||i.blur():_e.getLogger(this).warn("Features can only be blurred when currently active.")}clear(){return this.viewModel.clear()}close(){this.viewModel.visible=!1}fetchFeatures(t,i){return this.viewModel.fetchFeatures(t,i)}focus(){const{active:t}=this.viewModel;t?this._focusFlowItemNode(this.featureMenuOpen?"menu-flow-item":"root-flow-item"):_e.getLogger(this).warn("Features can only be focused when currently active.")}next(){return this.viewModel.next()}open(t){this.removeHandles(Gq);const i={collapsed:(t==null?void 0:t.collapsed)??!1};this.set(i),this.viewModel.open(t),this.addHandles(en(()=>!this.viewModel.waitingForResult,()=>this._addSelectedFeatureIndexHandle(),{once:!0}))}previous(){return this.viewModel.previous()}triggerAction(t){return this.viewModel.triggerAction(t)}render(){return B("div",{bind:this,class:this.classes(dn.base,ze.widget,ze.panel),onkeydown:this._onMainKeydown},this._renderHeader(),this._renderContentContainer())}_renderFeatureNavigation(){return[this._renderPagination(),this._renderFeatureMenuButton()]}_renderHeader(){return!this.featureMenuOpen&&this.featureNavigationTop&&this._featureNavigationVisible?B("div",{class:dn.header,key:"header-actions"},this._renderFeatureNavigation()):null}_renderFooter(){return this.featureMenuOpen||this.featureNavigationTop||!this._featureNavigationVisible?null:B("div",{class:dn.footer,key:"footer-actions",slot:"footer"},this._renderFeatureNavigation())}_renderFeatureMenuButton(){const{messages:t,viewModel:i}=this,{featureCount:r,selectedFeatureIndex:n,pendingPromisesCount:o}=i;return B("calcite-action",{appearance:"solid",bind:this,icon:"list",key:"feature-menu-button",label:t.selectFeature,loading:o>0,onclick:this._openFeatureMenu,scale:"s",text:mn(t.pageText,{index:jn(n+1),total:jn(r)}),textEnabled:!0,title:t.selectFeature})}_renderPagination(){const{previous:t,next:i}=this.messagesCommon.pagination;return B("calcite-action-bar",{class:dn.paginationActionBar,expandDisabled:!0,key:"pagination-action-bar",layout:"horizontal",overflowActionsDisabled:!0,scale:"s"},B("calcite-action-group",{scale:"s"},B("calcite-action",{appearance:"solid",class:dn.paginationPrevious,icon:"chevron-left",iconFlipRtl:!0,label:t,onclick:this._previousFeature,scale:"s",text:t,title:t}),B("calcite-action",{appearance:"solid",icon:"chevron-right",iconFlipRtl:!0,label:i,onclick:this._nextFeature,scale:"s",text:i,title:i})))}_renderFeatureMenuItem(t){const{selectedFeatureViewModel:i,featureViewModels:r}=this.viewModel,n=t===i,o=r.indexOf(t);return B("calcite-list-item",{bind:this,"data-feature-index":o,key:`feature-menu-item-${t.uid}`,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onmouseleave:this._removeActiveFeature,onmouseover:this._setActiveFeature,selected:n,onCalciteListItemSelect:this._selectFeature},B("span",{innerHTML:t.title||this.messagesCommon.untitled,slot:"content"}))}_groupResultsByLayer(){const{featureViewModels:t}=this.viewModel,i=new Map;return t.forEach(r=>{const n=r==null?void 0:r.graphic;if(!n)return;const{layer:o,sourceLayer:c}=n,y=(Hq(o)?o:null)||(Hq(c)?c:null),v=i.get(y)??[];i.set(y,[...v,r])}),i}_renderFeatureMenu(){const{featureViewModels:t}=this.viewModel,i=this._groupResultsByLayer();return t.length?B("calcite-list",{selectionAppearance:"icon",selectionMode:"single"},Array.from(i.keys(),r=>{var c;const n=(c=i.get(r))==null?void 0:c.map(y=>this._renderFeatureMenuItem(y)),o=r?r.title??this.messagesCommon.untitled:null;return this.visibleElements.featureListLayerTitle&&o!==null?B("calcite-list-item-group",{heading:o,key:(r==null?void 0:r.uid)||"map-graphics"},n):n})):null}_renderHeaderAction(t,i){const r=t.title||"";return t.visible?B("calcite-action",{active:t.type==="toggle"&&t.value,appearance:"solid",bind:this,"data-action-uid":t.uid,disabled:t.disabled,icon:t.icon??void 0,indicator:t.indicator,key:`header-action-${i}`,loading:t.active,onclick:this._triggerHeaderAction,slot:"header-actions-end",text:r,title:r}):null}_renderHeaderActions(){return this.headerActions.map((t,i)=>this._renderHeaderAction(t,i)).toArray()}_renderContentFeature(){const{headingLevel:t,visibleElements:i,_isCollapsed:r,_collapseEnabled:n,featureNavigationTop:o}=this,{title:c,active:y}=this.viewModel,v=i.heading&&c?c:"";return B("calcite-flow-item",{afterCreate:this._storeRootFlowItemNode,bind:this,class:this.classes({[dn.contentFeature]:!0,[dn.flowItemCollapsed]:r}),closable:i.closeButton,closed:!y,collapsed:r,collapseDirection:o?"down":"up",collapsible:n,headingLevel:t,key:"root-flow-item",onCalciteFlowItemClose:this.close,onCalciteFlowItemToggle:this._handleCollapseToggle},v?B(c0,{class:this.classes(dn.featuresHeading,ze.heading),innerHTML:v,key:"header-content",level:this.headingLevel,slot:"header-content"}):null,this._renderHeaderActions(),this._renderActionBar(),r?null:B("div",{class:this.classes(dn.container,dn.contentContainer)},this._renderContent()),this._renderFooter())}_renderFeatureMenuContainer(){const{viewModel:t,featureMenuOpen:i,messages:r,messagesCommon:n}=this,{active:o,featureViewModels:c,pendingPromisesCount:y}=t;return i?B("calcite-flow-item",{afterCreate:this._storeFeatureMenuFlowItemNode,bind:this,closable:!1,closed:!o,description:mn(r.total,{total:c.length}),heading:r.selectFeature,key:"feature-menu",loading:t.waitingForContents,onCalciteFlowItemBack:v=>{v.preventDefault(),this._handleFeatureMenuBack()}},y>0?B("calcite-loader",{class:dn.loader,inline:!0,key:"feature-menu-loader",label:n.loading,slot:"header-actions-end"}):null,B("div",{class:dn.container},this._renderFeatureMenu()),B("div",{afterCreate:this._featureMenuIntersectionObserverCreated,bind:this,class:dn.featureMenuObserver}),B("calcite-button",{appearance:"transparent",onclick:this._handleFeatureMenuBack,slot:"footer-actions",width:"full"},n.back)):null}_renderContentContainer(){const t=[this._renderContentFeature(),this._renderFeatureMenuContainer(),this._drillInWidget.render()];return this.visibleElements.flow?B("calcite-flow",{key:"content-container"},t):t}_getFallbackIcon(t){const{className:i,icon:r}=t;if(r)return null;const n=AAe({action:t,feature:this.selectedFeature}),o={[dn.icon]:!!i,[dn.actionImage]:!!n};return i&&(o[i]=!0),n||i?B("span",{"aria-hidden":"true",class:this.classes(dn.icon,o),key:"icon",styles:sse(n)}):null}_renderActionBar(){var t;return!this._isCollapsed&&this.visibleElements.actionBar&&((t=this.viewModel.allActions)!=null&&t.length)?B("calcite-action-bar",{expandDisabled:!0,expanded:!this._hideActionText,key:"header-action-bar",scale:"s",slot:"action-bar"},B("calcite-action-group",{afterCreate:i=>this._actionBarMenuNode=i,overlayPositioning:"fixed",scale:"s"},this._renderActions())):null}_renderActions(){return this.viewModel.allActions.toArray().map(this._renderAction)}_renderContent(){var i;const t=(i=this.viewModel)==null?void 0:i.content;return t?typeof t=="string"?B("div",{class:nr.contentNode,innerHTML:t,key:t}):this.renderNodeContent(t):null}_handleCollapseToggle(){this.collapsed=!this.collapsed}async _openRelatedFeature(t){await t.viewModel.updateGeometry();const i=t.graphic,r=i==null?void 0:i.geometry;if(r==null||i==null)return;this._destroyDrillInFlowItemWidgets(),await this.viewModel.zoomTo({target:r});const n=R2(r);this.open({features:[i],location:n??void 0})}async _focusFlowItemNode(t){var n;(n=this._focusAbortController)==null||n.abort(),this._focusAbortController=new AbortController;const i=this._focusAbortController.signal;await xa(lI(i));const r=t==="menu-flow-item"?this._featureMenuViewportNode:this._rootFlowItemNode;N1(r)}_storeRootFlowItemNode(t){this._rootFlowItemNode=t}_storeFeatureMenuFlowItemNode(t){this._featureMenuViewportNode=t}_setActiveFeature(t){var n;const{viewModel:i}=this,r=t.currentTarget["data-feature-index"];i.activeFeature=((n=i.features)==null?void 0:n[r])||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_selectFeature(t){const i=t.currentTarget["data-feature-index"];isNaN(i)||(this.viewModel.selectedFeatureIndex=i),this._handleFeatureMenuBack()}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(t){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(t),this._featureMenuIntersectionObserverNode=t}_getActionIcon(t){return t.icon?t.icon:t.image||t.className?void 0:"question"}_getActionTitle(t){const{messages:i,selectedFeature:r,messagesCommon:n}=this,{id:o}=t,c=r==null?void 0:r.attributes,y=t.title??"",v=o==="zoom-to-feature"?mn(y,{messages:i}):o==="remove-selected-feature"?mn(y,{messages:n}):o==="zoom-to-clustered-features"||o==="browse-clustered-features"?mn(y,{messages:i}):t.title;return v&&c?mn(v,c):v??""}_onMainKeydown(t){const{key:i}=t;i==="ArrowLeft"&&(t.stopPropagation(),this._handleFeatureMenuBack(),this.previous()),i==="ArrowRight"&&(t.stopPropagation(),this._handleFeatureMenuBack(),this.next())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&this._featureMenuViewportNode.scrollContentTo({top:0})}_setContentFromFeatureWidget(){const{selectedFeatureWidget:t}=this;t&&(this.viewModel.content=t)}_setTitleFromFeatureWidget(){const{selectedFeatureWidget:t,messagesCommon:i}=this,r=t==null?void 0:t.viewModel;t&&(this.viewModel.title=(r==null?void 0:r.state)==="error"?i==null?void 0:i.errorMessage:(r==null?void 0:r.title)||"")}_addSelectedFeatureIndexHandle(){const t=ge(()=>{var i;return(i=this.viewModel)==null?void 0:i.selectedFeatureIndex},(i,r)=>this._selectedFeatureIndexUpdated(i,r));this.addHandles(t,Gq)}_selectedFeatureIndexUpdated(t,i){const{featureCount:r}=this.viewModel;r&&t!==i&&t!==-1&&(this._destroyDrillInFlowItemWidgets(),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))}_triggerHeaderAction(t){const i=t.currentTarget;if(i.disabled)return;const r=i.dataset.actionUid,n=this.headerActions.find(({uid:o})=>o===r);n&&!n.disabled&&((n==null?void 0:n.type)==="toggle"&&(n.value=!n.value),this.emit("trigger-header-action",{action:n}))}_triggerAction(t){const i=t.currentTarget;if(i.disabled)return;const r=i.dataset.actionUid,{allActions:n}=this.viewModel,o=n.findIndex(y=>y.uid===r),c=n.at(o);c&&c.type==="toggle"&&(c.value=!c.value),this.viewModel.triggerAction(o)}_createSpinner(t){t&&(this._spinner=new cFe({view:t}),t.ui.add(this._spinner,{key:qq,position:"manual",internal:!0}))}_wireUpView(t){var i;this._destroySpinner(),t&&((i=this.visibleElements)!=null&&i.spinner)&&this._createSpinner(t)}_hideSpinner(){const{_spinner:t}=this;t&&(t.location=null,t.hide())}_viewReadyChange(t,i){var r;t?this._wireUpView((r=this.viewModel)==null?void 0:r.view):i&&this.viewModel.clear()}_viewChange(t,i){t&&i&&this.viewModel.clear()}_destroySelectedFeatureWidget(){const{_feature:t}=this;t&&(t.viewModel=null,!t.destroyed&&t.destroy()),this._feature=null}_closeOpenActionMenu(){const{_actionBarMenuNode:t}=this;t&&(t.menuOpen=!1)}_destroyDrillInFlowItemWidgets(){this._drillInFlowItems.drain(t=>{"showAllEnabled"in t.viewModel&&(t.viewModel.showAllEnabled=!1),t.viewModel=null,t.destroy()})}_toggleScreenLocationEnabled(){const{viewModel:t}=this;t&&(t.screenLocationEnabled=t.active)}_displaySpinner(){const{_spinner:t}=this;if(!t)return;const{location:i,waitingForResult:r}=this.viewModel;r&&i?t.show({location:i}):t.hide()}_destroySpinner(){var r;const{_spinner:t,view:i}=this;t&&((r=i==null?void 0:i.ui)==null||r.remove(t,qq),t.destroy(),this._spinner=null)}_spinnerEnabledChange(t){var i;this._destroySpinner(),t&&this._createSpinner((i=this.viewModel)==null?void 0:i.view)}};m([w()],Ft.prototype,"_drillInFlowItems",void 0),m([w()],Ft.prototype,"_hideActionText",null),m([w()],Ft.prototype,"_featureNavigationVisible",null),m([w()],Ft.prototype,"_isCollapsed",null),m([w()],Ft.prototype,"_collapseEnabled",null),m([w({readOnly:!0})],Ft.prototype,"active",null),m([w()],Ft.prototype,"collapsed",void 0),m([w()],Ft.prototype,"content",null),m([w()],Ft.prototype,"icon",null),m([w()],Ft.prototype,"featureMenuOpen",null),m([w()],Ft.prototype,"featureNavigationTop",void 0),m([w()],Ft.prototype,"features",null),m([w()],Ft.prototype,"goToOverride",null),m([w({type:d0})],Ft.prototype,"headerActions",void 0),m([w()],Ft.prototype,"headingLevel",void 0),m([w()],Ft.prototype,"location",null),m([w()],Ft.prototype,"label",null),m([w()],Ft.prototype,"map",null),m([w(),Ht("esri/widgets/Features/t9n/Features")],Ft.prototype,"messages",void 0),m([w(),Ht("esri/t9n/common")],Ft.prototype,"messagesCommon",void 0),m([w()],Ft.prototype,"promises",null),m([w()],Ft.prototype,"responsiveActionsEnabled",void 0),m([w({readOnly:!0})],Ft.prototype,"selectedFeature",null),m([w({readOnly:!0})],Ft.prototype,"selectedDrillInFeature",null),m([w()],Ft.prototype,"selectedFeatureIndex",null),m([w({readOnly:!0})],Ft.prototype,"selectedFeatureWidget",null),m([w()],Ft.prototype,"spatialReference",null),m([w()],Ft.prototype,"title",null),m([w()],Ft.prototype,"timeZone",null),m([w()],Ft.prototype,"updateLocationEnabled",null),m([w()],Ft.prototype,"view",null),m([w({type:UP}),R3(["triggerAction","trigger-action"])],Ft.prototype,"viewModel",void 0),m([w({type:yle,nonNullable:!0})],Ft.prototype,"visibleElements",void 0),m([w()],Ft.prototype,"visible",null),Ft=m([H("esri.widgets.Features")],Ft);const $De=Ft,$o="esri-popup",Ap=`${$o}--is-docked`,xr={base:$o,baseHidden:`${$o}--hidden`,main:`${$o}__main-container`,shadow:`${$o}--shadow`,isDocked:Ap,isDockedTopLeft:`${Ap}-top-left`,isDockedTopCenter:`${Ap}-top-center`,isDockedTopRight:`${Ap}-top-right`,isDockedBottomLeft:`${Ap}-bottom-left`,isDockedBottomCenter:`${Ap}-bottom-center`,isDockedBottomRight:`${Ap}-bottom-right`,alignTopCenter:`${$o}--aligned-top-center`,alignBottomCenter:`${$o}--aligned-bottom-center`,alignTopLeft:`${$o}--aligned-top-left`,alignBottomLeft:`${$o}--aligned-bottom-left`,alignTopRight:`${$o}--aligned-top-right`,alignBottomRight:`${$o}--aligned-bottom-right`,pointer:`${$o}__pointer`,pointerDirection:`${$o}__pointer-direction`};let ck=class extends UP{constructor(t){super(t)}};ck=m([H("esri.widgets.Popup.PopupViewModel")],ck);const mle=ck;let ru=class extends Ve{constructor(){super(...arguments),this.actionBar=!0,this.closeButton=!0,this.collapseButton=!0,this.featureNavigation=!0,this.featureListLayerTitle=!0,this.heading=!0,this.spinner=!0}};m([w({type:Boolean,nonNullable:!0})],ru.prototype,"actionBar",void 0),m([w({type:Boolean,nonNullable:!0})],ru.prototype,"closeButton",void 0),m([w({type:Boolean,nonNullable:!0})],ru.prototype,"collapseButton",void 0),m([w({type:Boolean,nonNullable:!0})],ru.prototype,"featureNavigation",void 0),m([w({type:Boolean,nonNullable:!0})],ru.prototype,"featureListLayerTitle",void 0),m([w({type:Boolean,nonNullable:!0})],ru.prototype,"heading",void 0),m([w({type:Boolean,nonNullable:!0})],ru.prototype,"spinner",void 0),ru=m([H("esri.widgets.Popup.PopupVisibleElements")],ru);const hk=ru,EDe=200,Wq={buttonEnabled:!0,position:"auto",breakpoint:{width:544}};let Dt=class extends yi{constructor(t,i){super(t,i),this._dockAction=new Z0({id:"popup-dock-action"}),this._featuresWidget=new $De({responsiveActionsEnabled:!0}),this._containerNode=null,this._mainContainerNode=null,this._pointerOffsetInPx=16,this._focusAbortController=null,this.alignment="auto",this.dockEnabled=!1,this.headingLevel=2,this.messages=null,this.viewModel=new mle,this.visibleElements=new hk}initialize(){this.addHandles([ge(()=>{var t,i;return[(i=(t=this.viewModel)==null?void 0:t.view)==null?void 0:i.widthBreakpoint,this.dockEnabled]},()=>this._handleDockIcon(),qe),ge(()=>{var t,i;return[this.dockEnabled,(t=this.messages)==null?void 0:t.undock,(i=this.messages)==null?void 0:i.dock]},()=>this._handleDockEnabled(),qe),ge(()=>this.dockOptions,t=>{const{_dockAction:i}=this,r=this._featuresWidget.headerActions;r.remove(i),t.buttonEnabled&&r.add(i)},qe),ge(()=>{var t;return(t=this.viewModel)==null?void 0:t.screenLocation},()=>this._positionContainer()),ge(()=>{var t;return[(t=this.viewModel)==null?void 0:t.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),ge(()=>{var t,i,r,n,o,c,y;return[(t=this.viewModel)==null?void 0:t.screenLocation,(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.padding,(o=(n=this.viewModel)==null?void 0:n.view)==null?void 0:o.size,(c=this.viewModel)==null?void 0:c.active,(y=this.viewModel)==null?void 0:y.location,this.alignment]},()=>this.reposition()),ge(()=>{var t,i;return(i=(t=this.viewModel)==null?void 0:t.view)==null?void 0:i.size},(t,i)=>this._updateDockEnabledForViewSize(t,i)),ge(()=>{var t;return(t=this.viewModel)==null?void 0:t.view},(t,i)=>this._viewChange(t,i)),ge(()=>{var t,i;return(i=(t=this.viewModel)==null?void 0:t.view)==null?void 0:i.ready},(t,i)=>this._viewReadyChange(t??!1,i??!1)),ge(()=>this.viewModel,()=>this._featuresWidget.viewModel=this.viewModel,qe),ge(()=>this._featureNavigationTop,t=>this._featuresWidget.featureNavigationTop=t,qe),ge(()=>this.headingLevel,t=>this._featuresWidget.headingLevel=t,qe),ge(()=>this.visibleElements.actionBar,t=>this._featuresWidget.visibleElements.actionBar=!!t,qe),ge(()=>this.visibleElements.closeButton,t=>this._featuresWidget.visibleElements.closeButton=!!t,qe),ge(()=>this.visibleElements.collapseButton,t=>this._featuresWidget.visibleElements.collapseButton=!!t,qe),ge(()=>this.visibleElements.heading,t=>this._featuresWidget.visibleElements.heading=!!t,qe),ge(()=>this.visibleElements.spinner,t=>this._featuresWidget.visibleElements.spinner=!!t,qe),ge(()=>this.visibleElements.featureNavigation,t=>this._featuresWidget.visibleElements.featureNavigation=!!t,qe),ge(()=>this.visibleElements.featureListLayerTitle,t=>this._featuresWidget.visibleElements.featureListLayerTitle=!!t,qe),tn(()=>this._featuresWidget,"trigger-header-action",t=>{t.action===this._dockAction&&(this.dockEnabled=!this.dockEnabled)})])}normalizeCtorArgs(t){const i={...t};return(t==null?void 0:t.visibleElements)!=null&&(i.visibleElements=new hk(t.visibleElements),t.collapseEnabled!=null&&(i.visibleElements.collapseButton=t.collapseEnabled),t.spinnerEnabled!=null&&(i.visibleElements.spinner=t.spinnerEnabled)),i}destroy(){var t,i;this._dockAction.destroy(),(t=this._featuresWidget)==null||t.destroy(),(i=this._focusAbortController)==null||i.abort()}get _featureNavigationTop(){const{currentAlignment:t,currentDockPosition:i}=this;return t==="bottom-left"||t==="bottom-center"||t==="bottom-right"||i==="top-left"||i==="top-center"||i==="top-right"}get actions(){return this.viewModel.actions}set actions(t){this.viewModel.actions=t}get active(){return this.viewModel.active}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(t){this.viewModel.autoCloseEnabled=t}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(t){this.viewModel.defaultPopupTemplateEnabled=t}get content(){return this.viewModel.content}set content(t){this.viewModel.content=t}get collapsed(){return this._featuresWidget.collapsed}set collapsed(t){this._featuresWidget.collapsed=t}get collapseEnabled(){return xu(_e.getLogger(this),"collapseEnabled",{replacement:"PopupVisibleElements.collapseButton",version:"4.29"}),this.visibleElements.collapseButton}set collapseEnabled(t){xu(_e.getLogger(this),"collapseEnabled",{replacement:"PopupVisibleElements.collapseButton",version:"4.29"}),this.visibleElements.collapseButton=t}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||Wq}set dockOptions(t){var v,_;const i={...Wq},r=(_=(v=this.viewModel)==null?void 0:v.view)==null?void 0:_.breakpoints,n={};r&&(n.width=r.xsmall,n.height=r.xsmall);const o={...i,...t},c={...i.breakpoint,...n},{breakpoint:y}=o;typeof y=="object"?o.breakpoint={...c,...y}:y&&(o.breakpoint=c),this._set("dockOptions",o),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get featureMenuOpen(){return this.viewModel.featureMenuOpen}set featureMenuOpen(t){this.viewModel.featureMenuOpen=t}get features(){return this.viewModel.features}set features(t){this.viewModel.features=t}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(t){this.viewModel.highlightEnabled=t}get icon(){return"popup"}set icon(t){this._overrideIfSome("icon",t)}get location(){return this.viewModel.location}set location(t){this.viewModel.location=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get promises(){return this.viewModel.promises}set promises(t){this.viewModel.promises=t}get selectedFeature(){return this.viewModel.selectedFeature}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(t){this.viewModel.selectedFeatureIndex=t}get selectedFeatureWidget(){return this._featuresWidget.selectedFeatureWidget}get spinnerEnabled(){return xu(_e.getLogger(this),"spinnerEnabled",{replacement:"PopupVisibleElements.spinner",version:"4.29"}),this.visibleElements.spinner}set spinnerEnabled(t){xu(_e.getLogger(this),"spinnerEnabled",{replacement:"PopupVisibleElements.spinner",version:"4.29"}),this.visibleElements.spinner=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(t){this.viewModel.updateLocationEnabled=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get visible(){return this.viewModel.visible}set visible(t){this.viewModel.visible=t}blur(){const{active:t}=this.viewModel;t||_e.getLogger(this).warn("Popup can only be blurred when currently active."),this._featuresWidget.blur()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(t,i){return this.viewModel.fetchFeatures(t,i)}focus(){const{active:t}=this.viewModel;t||_e.getLogger(this).warn("Popup can only be focused when currently active."),this._handleFocus()}next(){return this.viewModel.next()}open(t){const i=!!t&&!!t.featureMenuOpen,r={collapsed:!!t&&!!t.collapsed,featureMenuOpen:i};this.set(r),this.viewModel.open(t),t!=null&&t.shouldFocus&&this._handleFocus(!0)}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(t){return this.viewModel.triggerAction(t)}render(){var $,A,k,R;const{dockEnabled:t,currentAlignment:i,currentDockPosition:r}=this,{active:n,screenLocation:o}=this.viewModel,c=n&&t,y=n&&!t,v=(A=($=this.selectedFeature)==null?void 0:$.layer)==null?void 0:A.title,_=(R=(k=this.selectedFeature)==null?void 0:k.layer)==null?void 0:R.id,I={[xr.alignTopCenter]:i==="top-center",[xr.alignBottomCenter]:i==="bottom-center",[xr.alignTopLeft]:i==="top-left",[xr.alignBottomLeft]:i==="bottom-left",[xr.alignTopRight]:i==="top-right",[xr.alignBottomRight]:i==="bottom-right",[xr.isDocked]:c,[xr.shadow]:y,[xr.isDockedTopLeft]:r==="top-left",[xr.isDockedTopCenter]:r==="top-center",[xr.isDockedTopRight]:r==="top-right",[xr.isDockedBottomLeft]:r==="bottom-left",[xr.isDockedBottomCenter]:r==="bottom-center",[xr.isDockedBottomRight]:r==="bottom-right"};return B("div",{afterCreate:this._positionContainer,afterUpdate:this._positionContainer,bind:this,class:this.classes(xr.base,I,{[xr.baseHidden]:!o&&!t}),"data-layer-id":_,"data-layer-title":v,role:"presentation"},n?[this._renderMainContainer(),this._renderPointer()]:null)}_renderPointer(){return this.dockEnabled?null:B("div",{class:xr.pointer,key:"popup-pointer",role:"presentation"},B("div",{class:this.classes(xr.pointerDirection,xr.shadow)}))}_renderMainContainer(){const{dockEnabled:t}=this,i={[xr.shadow]:t};return B("div",{afterCreate:this._setMainContainerNode,afterUpdate:this._setMainContainerNode,bind:this,class:this.classes(xr.main,ze.widget,i)},this._featuresWidget.render())}_getAnimationDurationMS(){const{_containerNode:t}=this;return t?1e3*parseFloat(window.getComputedStyle(t).animationDuration):EDe}async _handleFocus(t=!1){var r;(r=this._focusAbortController)==null||r.abort(),this._focusAbortController=new AbortController;const i=this._focusAbortController.signal;t&&await Ou(()=>{var n;return((n=this.viewModel)==null?void 0:n.active)===!0},{signal:i}),await xa(lI(i)),await xa(G0(this._getAnimationDurationMS(),i)),this._featuresWidget.focus()}_isOutsideView(t){const{popupHeight:i,popupWidth:r,screenLocation:n,side:o,view:c}=t;if(isNaN(r)||isNaN(i)||!c||!n)return!1;const y=c.padding;return o==="right"&&n.x+r/2>c.width-y.right||o==="left"&&n.x-r/2<y.left||o==="top"&&n.y-i<y.top||o==="bottom"&&n.y+i>c.height-y.bottom}_calculateAutoAlignment(t){if(t!=="auto")return t;const{_pointerOffsetInPx:i,_containerNode:r,_mainContainerNode:n,viewModel:o}=this,{screenLocation:c,view:y}=o;if(c==null||!y||!r)return"top-center";function v(W){return parseInt(W.replaceAll(/[^-\d.]/g,""),10)}const _=n?window.getComputedStyle(n,null):null,I=_?v(_.getPropertyValue("max-height")):0,$=_?v(_.getPropertyValue("height")):0,{height:A,width:k}=r.getBoundingClientRect(),R=k+i,N=Math.max(A,I,$)+i,D=this._isOutsideView({popupHeight:N,popupWidth:R,screenLocation:c,side:"right",view:y}),j=this._isOutsideView({popupHeight:N,popupWidth:R,screenLocation:c,side:"left",view:y}),z=this._isOutsideView({popupHeight:N,popupWidth:R,screenLocation:c,side:"top",view:y}),U=this._isOutsideView({popupHeight:N,popupWidth:R,screenLocation:c,side:"bottom",view:y});return j?z?"bottom-right":"top-right":D?z?"bottom-left":"top-left":z?U?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(t){return typeof t=="function"?t.call(this):t}_getCurrentAlignment(){const{alignment:t,dockEnabled:i}=this;return i||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(t)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(t){const i=["left","right"];return Po(this.container)&&i.reverse(),t==null?void 0:t.replace(/leading/gi,i[0]).replaceAll(/trailing/gi,i[1])}_callDockPosition(t){return typeof t=="function"?t.call(this):t}_getDockPosition(){var t;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((t=this.dockOptions)==null?void 0:t.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_calculateAutoDockPosition(t){var y;if(t!=="auto")return t;const i=(y=this.viewModel)==null?void 0:y.view,r=Po(this.container)?"top-left":"top-right";if(!i)return r;const n=i.padding||{left:0,right:0,top:0,bottom:0},o=i.width-n.left-n.right,{breakpoints:c}=i;return c&&o<=c.xsmall?"bottom-center":r}_getDockIcon(){const t=this._getDockPosition();if(this.dockEnabled)return"minimize";switch(t){case"top-left":case"bottom-left":return"dock-left";case"top-center":return"maximize";case"bottom-center":return"dock-bottom";default:return"dock-right"}}_handleDockIcon(){this._dockAction.icon=this._getDockIcon()}_handleDockEnabled(){var t,i;this._dockAction.title=this.dockEnabled?(t=this.messages)==null?void 0:t.undock:(i=this.messages)==null?void 0:i.dock}_setMainContainerNode(t){this._mainContainerNode=t}_positionContainer(t=this._containerNode){if(t&&(this._containerNode=t),!this._containerNode)return;const{screenLocation:i}=this.viewModel,{width:r}=this._containerNode.getBoundingClientRect(),n=this._calculatePositionStyle(i,r);n&&Object.assign(this._containerNode.style,n)}_calculateFullWidth(t){const{currentAlignment:i,_pointerOffsetInPx:r}=this;return i==="top-left"||i==="bottom-left"||i==="top-right"||i==="bottom-right"?t+r:t}_calculateAlignmentPosition(t,i,r,n){const{currentAlignment:o,_pointerOffsetInPx:c}=this;if(!r)return;const{padding:y}=r,v=n/2,_=r.height-i,I=r.width-t;return o==="bottom-center"?{top:i+c-y.top,left:t-v-y.left}:o==="top-left"?{bottom:_+c-y.bottom,right:I+c-y.right}:o==="bottom-left"?{top:i+c-y.top,right:I+c-y.right}:o==="top-right"?{bottom:_+c-y.bottom,left:t+c-y.left}:o==="bottom-right"?{top:i+c-y.top,left:t+c-y.left}:o==="top-center"?{bottom:_+c-y.bottom,left:t-v-y.left}:void 0}_calculatePositionStyle(t,i){const{dockEnabled:r,view:n}=this;if(!n)return;if(r)return{left:"",top:"",right:"",bottom:""};if(t==null||!i)return;const o=this._calculateFullWidth(i),c=this._calculateAlignmentPosition(t.x,t.y,n,o);return c?{top:c.top!==void 0?`${c.top}px`:"auto",left:c.left!==void 0?`${c.left}px`:"auto",bottom:c.bottom!==void 0?`${c.bottom}px`:"auto",right:c.right!==void 0?`${c.right}px`:"auto"}:void 0}_viewChange(t,i){t&&i&&(this.close(),this.clear())}_viewReadyChange(t,i){t?this._wireUpView():i&&(this.close(),this.clear())}_wireUpView(){this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(t,i,r){const[n,o]=t,[c,y]=i,{width:v=0,height:_=0}=r??{};return n<=v&&c>v||n>v&&c<=v||o<=_&&y>_||o>_&&y<=_}_updateDockEnabledForViewSize(t,i){var I,$;if(!t||!i)return;const r=(($=(I=this.viewModel)==null?void 0:I.view)==null?void 0:$.padding)||{left:0,right:0,top:0,bottom:0},n=r.left+r.right,o=r.top+r.bottom,c=[],y=[];c[0]=t[0]-n,c[1]=t[1]-o,y[0]=i[0]-n,y[1]=i[1]-o;const{dockOptions:v}=this,_=v.breakpoint;this._dockingThresholdCrossed(c,y,_)&&this._setDockEnabledForViewSize(v),this._setCurrentDockPosition()}_toggleScreenLocationEnabled(){const{dockEnabled:t,viewModel:i}=this;if(!i)return;const r=i.active&&!t;i.screenLocationEnabled=r}_shouldDockAtCurrentViewSize(t){var v,_;const i=t.breakpoint,r=(_=(v=this.viewModel)==null?void 0:v.view)==null?void 0:_.ui;if(!r)return!1;const{width:n,height:o}=r;if(isNaN(n)||isNaN(o)||!i)return!1;const c=i.hasOwnProperty("width")&&n<=(i.width??0),y=i.hasOwnProperty("height")&&o<=(i.height??0);return c||y}_setDockEnabledForViewSize(t){t.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(t))}};m([w({readOnly:!0})],Dt.prototype,"_featureNavigationTop",null),m([w()],Dt.prototype,"actions",null),m([w({readOnly:!0})],Dt.prototype,"active",null),m([w()],Dt.prototype,"alignment",void 0),m([w()],Dt.prototype,"autoCloseEnabled",null),m([w()],Dt.prototype,"defaultPopupTemplateEnabled",null),m([w()],Dt.prototype,"content",null),m([w()],Dt.prototype,"collapsed",null),m([w()],Dt.prototype,"collapseEnabled",null),m([w({readOnly:!0})],Dt.prototype,"currentAlignment",null),m([w({readOnly:!0})],Dt.prototype,"currentDockPosition",null),m([w()],Dt.prototype,"dockOptions",null),m([w()],Dt.prototype,"dockEnabled",void 0),m([w({readOnly:!0})],Dt.prototype,"featureCount",null),m([w()],Dt.prototype,"featureMenuOpen",null),m([w()],Dt.prototype,"features",null),m([w()],Dt.prototype,"goToOverride",null),m([w()],Dt.prototype,"headingLevel",void 0),m([w()],Dt.prototype,"highlightEnabled",null),m([w()],Dt.prototype,"icon",null),m([w()],Dt.prototype,"location",null),m([w()],Dt.prototype,"label",null),m([w(),Ht("esri/widgets/Popup/t9n/Popup")],Dt.prototype,"messages",void 0),m([w()],Dt.prototype,"promises",null),m([w({readOnly:!0})],Dt.prototype,"selectedFeature",null),m([w()],Dt.prototype,"selectedFeatureIndex",null),m([w({readOnly:!0})],Dt.prototype,"selectedFeatureWidget",null),m([w()],Dt.prototype,"spinnerEnabled",null),m([w()],Dt.prototype,"title",null),m([w()],Dt.prototype,"updateLocationEnabled",null),m([w()],Dt.prototype,"view",null),m([w({type:mle}),R3(["triggerAction","trigger-action"])],Dt.prototype,"viewModel",void 0),m([w()],Dt.prototype,"visible",null),m([w({type:hk,nonNullable:!0})],Dt.prototype,"visibleElements",void 0),Dt=m([H("esri.widgets.Popup")],Dt);const gle=Dt,Jq=Object.freeze(Object.defineProperty({__proto__:null,default:gle},Symbol.toStringTag,{value:"Module"}));let Yh=class extends be{constructor(t){super(t),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};m([w({type:String,json:{write:!0}})],Yh.prototype,"facilityIdField",void 0),m([w({type:String,json:{write:!0}})],Yh.prototype,"layerId",void 0),m([w({type:String,json:{write:!0}})],Yh.prototype,"nameField",void 0),m([w({type:String,json:{write:!0}})],Yh.prototype,"siteIdField",void 0),m([w({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Yh.prototype,"sublayerId",void 0),Yh=m([H("esri.layers.support.FacilityLayerInfo")],Yh);const MDe=Yh;let tl=class extends be{constructor(t){super(t),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};m([w({type:String,json:{write:!0}})],tl.prototype,"facilityIdField",void 0),m([w({type:String,json:{write:!0}})],tl.prototype,"layerId",void 0),m([w({type:String,json:{write:!0}})],tl.prototype,"levelIdField",void 0),m([w({type:String,json:{write:!0}})],tl.prototype,"levelNumberField",void 0),m([w({type:String,json:{write:!0}})],tl.prototype,"longNameField",void 0),m([w({type:String,json:{write:!0}})],tl.prototype,"shortNameField",void 0),m([w({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],tl.prototype,"sublayerId",void 0),m([w({type:String,json:{write:!0}})],tl.prototype,"verticalOrderField",void 0),tl=m([H("esri.layers.support.LevelLayerInfo")],tl);const ADe=tl;let Ef=class extends be{constructor(t){super(t),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};m([w({type:String,json:{write:!0}})],Ef.prototype,"layerId",void 0),m([w({type:String,json:{write:!0}})],Ef.prototype,"nameField",void 0),m([w({type:String,json:{write:!0}})],Ef.prototype,"siteIdField",void 0),m([w({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Ef.prototype,"sublayerId",void 0),Ef=m([H("esri.layers.support.SiteLayerInfo")],Ef);const CDe=Ef;let Im=class extends be{constructor(t){super(t),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};m([w({type:ADe,json:{write:!0}})],Im.prototype,"levelLayer",void 0),m([w({type:MDe,json:{write:!0}})],Im.prototype,"facilityLayer",void 0),m([w({type:CDe,json:{write:!0}})],Im.prototype,"siteLayer",void 0),Im=m([H("esri.support.MapFloorInfo")],Im);const kDe=Im;var dk;let Tm=dk=class extends be{constructor(e){super(e),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new dk(le({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};m([w({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],Tm.prototype,"activeRange",void 0),m([w({type:[Number],json:{write:!0}})],Tm.prototype,"currentRangeExtent",void 0),m([w({type:[Number],json:{write:!0}})],Tm.prototype,"fullRangeExtent",void 0),Tm=dk=m([H("esri.webdoc.RangeInfo")],Tm);const BP=Tm;var pk;let nu=pk=class extends be{constructor(e){super(e),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new pk(le({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};m([w({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],nu.prototype,"enabled",void 0),m([w({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],nu.prototype,"longNames",void 0),m([w({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],nu.prototype,"minimized",void 0),m([w({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],nu.prototype,"pinnedLevels",void 0),m([w({type:String,json:{read:{source:"site"},write:{target:"site"}}})],nu.prototype,"site",void 0),m([w({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],nu.prototype,"facility",void 0),m([w({type:String,json:{read:{source:"level"},write:{target:"level"}}})],nu.prototype,"level",void 0),nu=pk=m([H("esri.webdoc.widgets.FloorFilter")],nu);const LDe=nu;var fk;const vS=new ft({slider:"slider",picker:"picker"});let $m=fk=class extends be{constructor(e){super(e),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new fk({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};m([w({type:vS.apiValues,nonNullable:!0,json:{type:vS.jsonValues,default:null,read:{reader:vS.read},write:{isRequired:!0,writer:vS.write}}})],$m.prototype,"interactionMode",void 0),m([w({type:Ct,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const e=this.stopInterval!=null;return{enabled:!e,isRequired:!e}}}}})],$m.prototype,"numStops",void 0),m([w({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],$m.prototype,"stopInterval",void 0),$m=fk=m([H("esri.webdoc.widgets.Range")],$m);const ODe=$m;var yk;let Hr=yk=class extends be{constructor(e){super(e),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(e){return e?rn.fromArray(e):void 0}writeCurrentTimeExtent(e,t,i){e&&Qr(i,e.toArray(),t)}readFullTimeExtent(e,t){const i=t.properties;if(!i)return;const r=i.endTime!=null?new Date(i.endTime):null,n=i.startTime!=null?new Date(i.startTime):null;return new rn({start:n,end:r})}writeFullTimeExtent(e,t){if(!e)return;const i=t.properties=t.properties||{},r=e.end,n=e.start;r&&(i.endTime=r!=null?r.getTime():null),n&&(i.startTime=n!=null?n.getTime():null)}readStopInterval(e,t,i){return e?bg.fromJSON({value:e.interval,unit:e.units},i):null}writeStopInterval(e,t,i,r){if(!e)return;const n=e.toJSON(r);Qr("properties.timeStopInterval",{interval:n.value,units:n.unit},t)}readStops(e){return e!=null&&e.length?e.map(t=>new Date(t)):null}writeStops(e,t,i){e!=null&&e.length&&Qr(i,e.map(r=>r.getTime()),t)}clone(){return new yk(le({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};m([w({type:rn,json:{type:[[Ct,Ag]],read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],Hr.prototype,"currentTimeExtent",void 0),m([ke("currentTimeExtent")],Hr.prototype,"readCurrentTimeExtent",null),m([Le("currentTimeExtent")],Hr.prototype,"writeCurrentTimeExtent",null),m([w({type:rn,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],Hr.prototype,"fullTimeExtent",void 0),m([ke("fullTimeExtent")],Hr.prototype,"readFullTimeExtent",null),m([Le("fullTimeExtent")],Hr.prototype,"writeFullTimeExtent",null),m([w({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],Hr.prototype,"loop",void 0),m([w({type:Ct,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var r;const e=!!this.stopInterval,t=!!((r=this.stops)!=null&&r.length),i=!(e||t);return{enabled:i,isRequired:i}}}}})],Hr.prototype,"numStops",void 0),m([w({type:[1,2],nonNullable:!0,json:{type:Ct,read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],Hr.prototype,"numThumbs",void 0),m([w({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],Hr.prototype,"stopDelay",void 0),m([w({type:bg,json:{read:{source:"properties.timeStopInterval"},write:{target:{"properties.timeStopInterval.interval":{type:Number},"properties.timeStopInterval.units":{type:kP.jsonValues.filter(e=>e!=="esriTimeUnitsUnknown")}},overridePolicy(){var i;const e=this.numStops!=null,t=!!((i=this.stops)!=null&&i.length);return{enabled:!t,isRequired:!(e||t)}}}}})],Hr.prototype,"stopInterval",void 0),m([ke("stopInterval")],Hr.prototype,"readStopInterval",null),m([Le("stopInterval")],Hr.prototype,"writeStopInterval",null),m([w({type:[Date],json:{type:[Ct],read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],Hr.prototype,"stops",void 0),m([ke("stops")],Hr.prototype,"readStops",null),m([Le("stops")],Hr.prototype,"writeStops",null),Hr=yk=m([H("esri.webdoc.widgets.TimeSlider")],Hr);const RDe=Hr;var mk;let Em=mk=class extends be{constructor(e){super(e),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new mk(le({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};m([w({type:ODe,json:{write:!0}})],Em.prototype,"range",void 0),m([w({type:RDe,json:{write:!0}})],Em.prototype,"timeSlider",void 0),m([w({type:LDe,json:{write:!0}})],Em.prototype,"floorFilter",void 0),Em=mk=m([H("esri.webdoc.Widgets")],Em);const PDe=Em,NDe={width:600,height:400},wS=1.5;function FDe(e,t){t=t||NDe;let{width:i,height:r}=t;const n=i/r;return n<wS?r=i/wS:n>wS&&(i=r*wS),i>e.width&&(r*=e.width/i,i=e.width),r>e.height&&(i*=e.height/r,r=e.height),{width:Math.round(i),height:Math.round(r)}}function DDe(e,t){return{...vle(e,t),readResourcePaths:[]}}function Ort(e,t,i){const r=cr(e.itemUrl);return{...vle(e,t),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:r?{rootPath:r.path,writtenUrls:[]}:null,resources:i?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function vle(e,t){return{origin:t,url:cr(e.itemUrl),portal:e.portal||Cr.getDefault(),portalItem:e}}let Mf=class extends be{constructor(t){super(t),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const t=this.geometries.map(n=>n.toJSON()),i=this.geometries[0],r={};return r.outSR=ng(this.outSpatialReference),r.inSR=ng(i.spatialReference),r.geometries=JSON.stringify({geometryType:Ng(i),geometries:t}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(r.transformForward=this.transformForward),r}};m([w()],Mf.prototype,"geometries",void 0),m([w({json:{read:{source:"outSR"}}})],Mf.prototype,"outSpatialReference",void 0),m([w()],Mf.prototype,"transformation",void 0),m([w()],Mf.prototype,"transformForward",void 0),Mf=m([H("esri.rest.support.ProjectParameters")],Mf);const GP=Mf,jDe=qi(GP);async function wle(e,t,i){t=jDe(t);const r=Wg(e),n={...r.query,f:"json",...t.toJSON()},o=t.outSpatialReference,c=Ng(t.geometries[0]),y=eT(n,i);return Et(r.path+"/project",y).then(({data:{geometries:v}})=>pre(v,c,o))}function zDe(e,t){var i;return t.resourceInfo?ble(t,t.resourceInfo,{origin:e.origin}):(i=t.portalItem)!=null&&i.id?VDe(e,t,t.portalItem):Promise.resolve()}function ble(e,t,i){const r={context:{...i,layerContainerType:"operational-layers"}};return e.portalItem&&(r.context.portal=e.portalItem.portal||Cr.getDefault()),de(()=>import("./layersCreator-Bk3Vrhvd.js"),__vite__mapDeps([120,121,122,123]),import.meta.url).then(({populateOperationalLayers:n})=>{const o=[],c=t.operationalLayers;c!=null&&c.length&&o.push(n(e.layers,c,r));const y={...r,context:{...r.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},v=t.tables;return v!=null&&v.length&&o.push(n(e.tables,v,y)),Promise.allSettled(o).then(()=>{})})}async function VDe(e,t,i){var c;if(await i.load().catch(y=>{throw new ne(`${e.name}:load-portal-item`,"Failed to load portal item",{error:y})}),i.type!==e.itemType)throw new ne(`${e.name}:invalid-portal-item`,`Invalid portal item type '${i.type}', expected '${e.itemType}'`,{type:i.type});const r=await i.fetchData();t.resourceInfo=r;const n=DDe(i,e.origin);await UDe(e,t,r,n),t.resourceReferences={portalItem:i,paths:n.readResourcePaths};const o=await GDe(t.initialViewProperties,i,_e.getLogger(t));if(o){const y=((c=t.initialViewProperties)==null?void 0:c.clone())??e.createInitialViewProperties();y.viewpoint=o,t.initialViewProperties=y}}function UDe(e,t,i,r){const n=BDe(e,i);return t.read(n,r),ble(t,n,r)}function BDe(e,t){const i=e.parseVersion(t.version||"",e.name);return e.currentVersion.validate(i),t.version=`${i.major}.${i.minor}`,t}async function GDe(e,t,i){var o;if((o=e==null?void 0:e.viewpoint)==null?void 0:o.targetGeometry)return null;const n=await qDe(e,t,i);return n?new wn({targetGeometry:n}):null}async function qDe(e,t,i){const r=e==null?void 0:e.spatialReference,n=t==null?void 0:t.extent;if(!r||!n)return null;if(r.isWGS84)return n.clone();if(r.isWebMercator)return Au(n);const{getGeometryServiceURL:o}=await de(()=>import("./geometryServiceUtils-Bdudlwyl.js"),[],import.meta.url);try{const c=await o(t),y=new GP({geometries:[n],outSpatialReference:r});return(await wle(c,y))[0]}catch(c){i.error("Error projecting item's extent:",c)}return null}function Zq(e){return{enabled:!!(e!=null&&e.length)}}var gk;let Mm=gk=class extends be{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new gk({exactMatch:this.exactMatch,type:this.type,name:this.name})}};m([w({type:Boolean,json:{write:!0}})],Mm.prototype,"exactMatch",void 0),m([w({type:String,json:{write:!0}})],Mm.prototype,"name",void 0),m([He(ER)],Mm.prototype,"type",void 0),Mm=gk=m([H("esri.webdoc.applicationProperties.SearchLayerField")],Mm);const HDe=Mm;var vk;let Am=vk=class extends be{constructor(e){super(e),this.field=null,this.id=null,this.subLayer=null}clone(){return new vk(le({field:this.field,id:this.id,subLayer:this.subLayer}))}};m([w({type:HDe,json:{write:{isRequired:!0}}})],Am.prototype,"field",void 0),m([w({type:String,json:{write:{isRequired:!0}}})],Am.prototype,"id",void 0),m([w({type:Ct,json:{write:!0}})],Am.prototype,"subLayer",void 0),Am=vk=m([H("esri.webdoc.applicationProperties.SearchLayer")],Am);const WDe=Am;var wk;let Cm=wk=class extends be{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new wk({exactMatch:this.exactMatch,type:this.type,name:this.name})}};m([w({type:Boolean,json:{write:!0}})],Cm.prototype,"exactMatch",void 0),m([w({type:String,json:{write:!0}})],Cm.prototype,"name",void 0),m([He(ER)],Cm.prototype,"type",void 0),Cm=wk=m([H("esri.webdoc.applicationProperties.SearchTableField")],Cm);const JDe=Cm;var bk;let rb=bk=class extends be{constructor(e){super(e),this.field=null,this.id=null}clone(){return new bk(le({field:this.field,id:this.id}))}};m([w({type:JDe,json:{write:{isRequired:!0}}})],rb.prototype,"field",void 0),m([w({type:String,json:{write:{isRequired:!0}}})],rb.prototype,"id",void 0),rb=bk=m([H("esri.webdoc.applicationProperties.SearchTable")],rb);const ZDe=rb;var _k;const _le=Oe.ofType(WDe),Sle=Oe.ofType(ZDe);let su=_k=class extends be{constructor(e){super(e),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new _le,this.tables=new Sle}readAddressSearchEnabled(e){return!e}writeAddressSearchEnabled(e,t,i){t[i]=!e}clone(){return new _k(le({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};m([w({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],su.prototype,"addressSearchEnabled",void 0),m([ke("addressSearchEnabled")],su.prototype,"readAddressSearchEnabled",null),m([Le("addressSearchEnabled")],su.prototype,"writeAddressSearchEnabled",null),m([w({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],su.prototype,"enabled",void 0),m([w({type:String,json:{write:!0}})],su.prototype,"hintText",void 0),m([w({type:_le,json:{write:{overridePolicy:Zq},origins:{"web-scene":{write:{isRequired:!0}}}}})],su.prototype,"layers",void 0),m([w({type:Sle,json:{read:!0,write:{overridePolicy:Zq}}})],su.prototype,"tables",void 0),su=_k=m([H("esri.webdoc.applicationProperties.Search")],su);const KDe=su;var Sk;let Sx=Sk=class extends be{constructor(e){super(e),this.search=null}clone(){return new Sk(le({search:this.search}))}};m([w({type:KDe,json:{write:!0}})],Sx.prototype,"search",void 0),Sx=Sk=m([H("esri.webdoc.applicationProperties.Viewing")],Sx);const YDe=Sx;var xk;let km=xk=class extends be{constructor(e){super(e),this.editing=null,this.offline=null,this.viewing=null}clone(){return new xk(le({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};m([w({json:{write:!0}})],km.prototype,"editing",void 0),m([w({json:{write:!0}})],km.prototype,"offline",void 0),m([w({type:YDe,json:{write:!0}})],km.prototype,"viewing",void 0),km=xk=m([H("esri.webmap.ApplicationProperties")],km);const XDe=km;var Ik;let Fc=Ik=class extends be{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}get isSecureUrl(){return gY(this.url)}get isDataURI(){return ih(this.url)}clone(){return new Ik({url:this.url})}};m([w({type:String,json:{write:{isRequired:!0}}})],Fc.prototype,"url",void 0),m([w()],Fc.prototype,"isSecureUrl",null),m([w()],Fc.prototype,"isDataURI",null),Fc=Ik=m([H("esri.webdoc.support.SlideThumbnail")],Fc);const QDe={type:rn,json:{read:{source:"timeExtent",reader:e=>e?Array.isArray(e)?rn.fromArray(e):rn.fromJSON(e):null},write:{writer:(e,t,i,r)=>{e&&(e.isEmpty?r!=null&&r.messages&&r.messages.push(new ne("invalid-timeExtent","TimeExtent cannot be empty")):t[i]=e.toArray())},target:{timeExtent:{type:[[Ct,Ag]]}}}}};var Tk;let ou=Tk=class extends Cl(be){constructor(e){super(e),this.name=null,this.thumbnail=new Fc,this.timeExtent=null}castThumbnail(e){return typeof e=="string"?new Fc({url:e}):qi(Fc,e)}set viewpoint(e){const{targetGeometry:t,scale:i}=e;t!=null&&t.type==="point"&&i==null&&_e.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",e),this._set("viewpoint",e)}readViewpoint(e,t){const{extent:i,viewpoint:r}=t;return wn.fromJSON(r||{targetGeometry:i})}writeViewpoint(e,t,i,r){if(!e)return;const{targetGeometry:n}=e;if(n==null||n.type==="extent")n!=null&&(t.extent=n.toJSON()),t[i]=e.toJSON();else{const o="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";r!=null&&r.messages?r.messages.push(new ne("property:unsupported",o)):_e.getLogger(this).error(o)}}clone(){return new Tk(le({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};m([w({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],ou.prototype,"name",void 0),m([w({type:Fc,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],ou.prototype,"thumbnail",void 0),m([wt("thumbnail")],ou.prototype,"castThumbnail",null),m([w(QDe)],ou.prototype,"timeExtent",void 0),m([w({type:wn,nonNullable:!0,json:{write:!0}})],ou.prototype,"viewpoint",null),m([ke("viewpoint",["extent","viewpoint"])],ou.prototype,"readViewpoint",null),m([Le("viewpoint")],ou.prototype,"writeViewpoint",null),ou=Tk=m([H("esri.webmap.Bookmark")],ou);const eje=ou;let bc=class extends St(Ve){constructor(t){super(t),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.timeExtent=null,this.timeZone=Uo,this.viewpoint=null}};m([w({type:oT})],bc.prototype,"background",void 0),m([w({type:BP})],bc.prototype,"rangeInfo",void 0),m([w({type:rt})],bc.prototype,"spatialReference",void 0),m([w({type:rn})],bc.prototype,"timeExtent",void 0),m([w({nonNullable:!0})],bc.prototype,"timeZone",void 0),m([w({type:wn})],bc.prototype,"viewpoint",void 0),bc=m([H("esri.webmap.InitialViewProperties")],bc);const A4=bc,xle=Oe.ofType(eje),tje=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),ije="ArcGIS Pro",rje=Nae.JSAPI;let Ci=class extends wT(Aa.LoadableMixin(x3(Ste))){constructor(t){super(t),this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1,this._thumbnailFilename=null,this._updateFromPromise=null,this.resourceReferences={portalItem:null,paths:[]},this.applicationProperties=null,this.bookmarks=new xle,this.floorInfo=null,this.initialViewProperties=new A4,this.portalItem=null,this.sourceVersion=null,this.widgets=null,this._debouncedSaveOperations=_l(async(i,r,n)=>{const{save:o,saveAs:c}=await de(()=>import("./webdocSaveUtils-830gRlN7.js"),__vite__mapDeps([245,210,211,246,247,213]),import.meta.url);switch(i){case Iu.SAVE:return o(this.context,this,r);case Iu.SAVE_AS:return c(this.context,this,n,r)}}),this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){this.portalItem=ci(this.portalItem)}initialize(){if(this.when().catch(t=>{_e.getLogger(this).error("#load()","Failed to load web map",t)}),this.resourceInfo){let t;try{t=this._validateJSON(this.resourceInfo)}catch(i){return void this.addResolvingPromise(Promise.reject(i))}this.read(t)}}set authoringApp(t){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",t)}writeAuthoringApp(t,i){t&&this._isAuthoringAppSetByUser?i.authoringApp=t:i.authoringApp=rje}set authoringAppVersion(t){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",t)}writeAuthoringAppVersion(t,i){t&&this._isAuthoringAppVersionSetByUser?i.authoringAppVersion=t:i.authoringAppVersion=IY}readInitialViewProperties(t,i){var c,y;const r=new A4;i.background&&(r.background=oT.fromJSON(i.background));const n=(c=i.initialState)==null?void 0:c.timeExtent;n&&(r.timeExtent=rn.fromArray(n));const o=(y=i.initialState)==null?void 0:y.viewpoint;return o&&(o.rotation&&z1.parse(i.version||"","webmap").lessThan(2,20)&&i.authoringApp===ije&&(o.rotation*=-1),r.viewpoint=wn.fromJSON(o)),i.mapRangeInfo&&(r.rangeInfo=BP.fromJSON(i.mapRangeInfo)),i.spatialReference&&(r.spatialReference=rt.fromJSON(i.spatialReference)),i.timeZone&&(r.timeZone=i.timeZone),r}writeInitialViewProperties(t,i,r,n){var y;if(!t)return;(y=t.background)!=null&&y.color&&(i.background=t.background.write({},n));const{timeExtent:o,viewpoint:c}=t;if(c||o){const v={};c&&(v.viewpoint=c.write({},n)),o&&(v.timeExtent=o.toArray()),i.initialState=v}t.rangeInfo&&(i.mapRangeInfo=t.rangeInfo.toJSON(n)),t.spatialReference&&(i.spatialReference=t.spatialReference.write({},n)),i.timeZone=t.timeZone}writeLayers(t,i,r,n){i[r]=this._writeLayers(t,n,"operational-layers")}readSourceVersion(t,i){const[r,n]=i.version.split(".");return new z1(parseInt(r,10),parseInt(n,10))}writeSourceVersion(t,i,r){i[r]=`${this.context.currentVersion.major}.${this.context.currentVersion.minor}`}writeTables(t,i,r,n){const o=this._writeLayers(t,n,"tables");o.length&&(i[r]=o)}get thumbnailUrl(){var t;return((t=this.portalItem)==null?void 0:t.thumbnailUrl)||null}set thumbnailUrl(t){t?(this._override("thumbnailUrl",t),this._thumbnailFilename=this._generateCustomThumbnailFilename(t)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(t){return this.addResolvingPromise(zDe(this.context,this)),Promise.resolve(this)}loadAll(){return kI(this,t=>{t(this.ground,this.basemap,this.layers,this.tables)})}read(t,i){i={...i,origin:this.context.origin};const r=this._getAuthoringPropsState();oY(this,t,n=>super.read(t,n),i),this._restoreAuthoringPropsFromState(r)}write(t,i){if(this.loadStatus!=="loaded"){const r=new ne("webmap:not-loaded","Web map must be loaded before it can be serialized");throw _e.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),r}return this._removeDanglingLayerRefs(),i={...i,origin:this.context.origin,restrictedWebMapWriting:!0,webmap:this},super.write(t,i)}async save(t){return this._debouncedSaveOperations(Iu.SAVE,t)}async saveAs(t,i){return this._debouncedSaveOperations(Iu.SAVE_AS,i,t)}async updateFrom(t,i){const r=this._updateFromInternal(t,i);this._updateFromPromise=r,await r,r===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(t){var r,n,o,c;const i=this.resourceInfo;return this._collectAllLayersJSON([...((r=i==null?void 0:i.baseMap)==null?void 0:r.baseMapLayers)||[],...(i==null?void 0:i.operationalLayers)||[],...((c=(o=(n=this.basemap)==null?void 0:n.resourceInfo)==null?void 0:o.data)==null?void 0:c.baseMapLayers)||[]]).find(y=>y.id===t.id)}async updateItemThumbnail(){var t;this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await((t=this.portalItem)==null?void 0:t.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename})),this._clearThumbnailOverride())}getThumbnailState(){let t=this.thumbnailUrl;return t&&(t=this._isOverridden("thumbnailUrl")?t:bY(t,"w","8192")),{thumbnailUrl:t,filename:this._thumbnailFilename}}restoreThumbnailFromState(t){this.thumbnailUrl=t.thumbnailUrl,this._thumbnailFilename=t.filename}_collectAllLayersJSON(t){return t.reduce((i,r)=>(i.push(r),r.layerType==="GroupLayer"&&(i=i.concat(this._collectAllLayersJSON(r.layers||[]))),i),[])}_writeLayers(t,i,r){return i={...i,layerContainerType:r},t.map(n=>IA(n,r==="tables"?null:this.getLayerJSONFromResourceInfo(n),i)).filter(Ar).toArray()}_validateJSON(t){const i=z1.parse(t.version||"","webmap");return this.context.currentVersion.validate(i),t.version=`${i.major}.${i.minor}`,t}_removeDanglingLayerRefs(){var c,y;const t=this.applicationProperties,i=(c=t==null?void 0:t.viewing)==null?void 0:c.search,r=v=>this.allLayers.some(_=>_.id===v);if(i!=null&&i.layers&&(i.layers=i.layers.filter(v=>r(v.id))),i!=null&&i.tables&&(i.tables=i.tables.filter(v=>this.tables.some(_=>_.id===v.id))),t){const v=(y=t.editing)==null?void 0:y.locationTracking;v!=null&&v.info&&!r(v.info.layerId)&&(t.editing=null)}const n="presentation"in this?this.presentation:null,o=n==null?void 0:n.slides;o&&o.forEach(v=>{v.visibleLayers&&(v.visibleLayers=v.visibleLayers.filter(_=>r(_.id)))})}async _updateFromInternal(t,i){if(i??(i={}),await Ou(()=>t.ready),this._updateInitialViewProperties(t,i),t.map===this)for(const r of t.allLayerViews)"visible"in r&&"visible"in r.layer&&r._isOverridden("visible")&&(r.layer.visible=r.visible),"featureEffect"in r&&"featureEffect"in r.layer&&r._isOverridden("featureEffect")&&(r.layer.featureEffect=r.featureEffect);await this._updateThumbnailUrl(t,i)}_updateInitialViewProperties(t,i){var r,n;if(i.backgroundExcluded||(this.initialViewProperties.background=(r=t.background)==null?void 0:r.clone()),this.initialViewProperties.spatialReference=(n=t.spatialReference)==null?void 0:n.clone(),this.initialViewProperties.timeZone=t.timeZone,i.viewpointExcluded||(this.initialViewProperties.viewpoint=new wn({rotation:t.rotation,scale:i.scalePreserved?t.scale:null,targetGeometry:this._getViewExtent(t)})),!i.widgetsExcluded)for(const o of t.persistableViewModels)o.updateWebDocument(this)}_getViewExtent(t){const i=t.center.clone().normalize(),r=t.extent.clone(),n=r.width/2;return r.xmin=i.x-n,r.xmax=i.x+n,r}async _updateThumbnailUrl(t,i){if(i.thumbnailExcluded)return;const r=FDe(t,i.thumbnailSize),n=await t.takeScreenshot({format:"png",width:r.width,height:r.height});this._setAutoGeneratedThumbnail(n.dataUrl)}_setAutoGeneratedThumbnail(t){this.thumbnailUrl=t,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(t){if(ih(t)){const i=I0(t),r=i==null?void 0:i.mediaType,n=r&&tje.get(r.toLowerCase())||null,o=`thumbnail${Date.now()}`;return n?`${o}.${n}`:o}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(t){t.isAuthoringAppSetByUser?this.authoringApp=t.authoringApp:this._isAuthoringAppSetByUser=!1,t.isAuthoringAppVersionSetByUser?this.authoringAppVersion=t.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}};m([w()],Ci.prototype,"_updateFromPromise",void 0),m([w({type:XDe,json:{write:!0}})],Ci.prototype,"applicationProperties",void 0),m([w({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Ci.prototype,"authoringApp",null),m([Le("authoringApp")],Ci.prototype,"writeAuthoringApp",null),m([w({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Ci.prototype,"authoringAppVersion",null),m([Le("authoringAppVersion")],Ci.prototype,"writeAuthoringAppVersion",null),m([w({type:xle,json:{write:{overridePolicy:e=>({enabled:!!(e&&e.length>0),ignoreOrigin:!0})}}})],Ci.prototype,"bookmarks",void 0),m([w({type:kDe,json:{name:"mapFloorInfo",write:!0}})],Ci.prototype,"floorInfo",void 0),m([w({type:A4,nonNullable:!0,json:{read:{source:["background","initialState.timeExtent","initialState.viewpoint","mapRangeInfo","spatialReference","timeZone"]},write:{ignoreOrigin:!0,target:{background:{type:oT},"initialState.timeExtent":{type:rn},"initialState.viewpoint":{type:wn},mapRangeInfo:{type:BP},spatialReference:{type:rt},"timeZone:":{type:String}}}}})],Ci.prototype,"initialViewProperties",void 0),m([ke("initialViewProperties")],Ci.prototype,"readInitialViewProperties",null),m([Le("initialViewProperties")],Ci.prototype,"writeInitialViewProperties",null),m([w({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],Ci.prototype,"layers",void 0),m([Le("layers")],Ci.prototype,"writeLayers",null),m([w({type:Cu})],Ci.prototype,"portalItem",void 0),m([w()],Ci.prototype,"resourceInfo",void 0),m([w({readOnly:!0,type:z1,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],Ci.prototype,"sourceVersion",void 0),m([ke("sourceVersion")],Ci.prototype,"readSourceVersion",null),m([Le("sourceVersion")],Ci.prototype,"writeSourceVersion",null),m([w({json:{read:!1,write:{ignoreOrigin:!0}}})],Ci.prototype,"tables",void 0),m([Le("tables")],Ci.prototype,"writeTables",null),m([w()],Ci.prototype,"thumbnailUrl",null),m([w()],Ci.prototype,"updatingFromView",null),m([w({type:PDe,json:{write:!0}})],Ci.prototype,"widgets",void 0),Ci=m([H("esri.WebDocument2D")],Ci);const nje=Ci;let au=class extends be{constructor(t){super(t),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.dirtyAreaCount=null,this.exceededTransferLimit=null,this.serviceEdits=null,this.discoveredSubnetworks=null}};m([w({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.moment=e?e.getTime():null}}}})],au.prototype,"moment",void 0),m([w({type:Boolean,json:{write:!0}})],au.prototype,"fullUpdate",void 0),m([w({type:Boolean,json:{write:!0}})],au.prototype,"validateErrorsCreated",void 0),m([w({type:Number,json:{write:!0}})],au.prototype,"dirtyAreaCount",void 0),m([w({type:Boolean,json:{write:!0}})],au.prototype,"exceededTransferLimit",void 0),m([w({type:[Object],json:{write:!0}})],au.prototype,"serviceEdits",void 0),m([w({type:[Object],json:{write:!0}})],au.prototype,"discoveredSubnetworks",void 0),au=m([H("esri.rest.networks.support.ValidateNetworkTopologyResult")],au);const sje=au,oje=nn()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let Xh=class extends sje{constructor(t){super(t),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(t){const i={...t,query:{f:"json"}},{data:r}=await Et(this.statusUrl,i);return this.read(r),this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null}),this}async waitForJobCompletion(t={}){const{interval:i=1e3,statusCallback:r}=t;return new Promise((n,o)=>{this._clearTimer();const c=setInterval(()=>{this._timer||o(Ei()),this.checkJobStatus().then(y=>{const{status:v}=y;switch(this.status=v,v){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":r&&r(this)}},y=>{this._clearTimer(),o(y)})},i);this._timer=c})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};m([w()],Xh.prototype,"editsResolver",void 0),m([w({type:String,json:{write:!0}})],Xh.prototype,"statusUrl",void 0),m([He(oje)],Xh.prototype,"status",void 0),m([w({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.submissionTime=e?e.getTime():null}}}})],Xh.prototype,"submissionTime",void 0),m([w({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.lastUpdatedTime=e?e.getTime():null}}}})],Xh.prototype,"lastUpdatedTime",void 0),Xh=m([H("esri.networks.support.TopologyValidationJobInfo")],Xh);const aje=Xh;async function Kq(e,t){if(e==="Utility Network Layer"){const{default:i}=await de(()=>Promise.resolve().then(()=>_je),void 0,import.meta.url);return new i({layerUrl:t})}return null}async function lje(e){var c;let t="portalItem"in e?e:{portalItem:e};!t.portalItem||t.portalItem instanceof Cu||(t={...t,portalItem:new Cu(t.portalItem)});const i=t.portalItem;if(await i.load(),i.type!=="Feature Service")throw new ne("portal:unknown-item-type","Unknown item type '${type}'",{type:i.type});const r=i.url,n=await Et(r,{responseType:"json",query:{f:"json"}}),o="Network Layer";if((c=n.data.type)!=null&&c.includes(o))return Kq(n.data.type,r);if(n.data.layers){const y=n.data.layers.find(v=>v.type.includes(o));if(y){const v=`${r}/${y.id}`;return Kq(y.type,v)}}return null}let Tr=class extends wT(Aa){static fromPortalItem(t){return lje(t)}constructor(t){super(t),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null,this.gdbVersion=null,this.historicMoment=null,this._sourceIdByLayerId=new Map,this._layerIdBySourceId=new Map,this._applyEditsHandler=i=>{const{serviceUrl:r,gdbVersion:n,result:o}=i,c=r===this.featureServiceUrl,y=zb(r,n,this.gdbVersion);c&&y&&o.then(v=>{fx(r,n)&&(this.historicMoment=v.historicMoment)})},this._updateMomentHandler=i=>{const{serviceUrl:r,gdbVersion:n,moment:o}=i,c=r===this.featureServiceUrl,y=zb(r,n,this.gdbVersion);c&&y&&(this.historicMoment=o)},this.when().then(()=>{this.addHandles([uae(this._applyEditsHandler),cae(this._updateMomentHandler)])},()=>{})}initialize(){this.when().catch(t=>{br(t)||_e.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}get datasetName(){var t;return((t=this.dataElement)==null?void 0:t.name)??null}get owner(){var t;return((t=this.dataElement)==null?void 0:t.userIdentity)??null}get schemaGeneration(){var t;return((t=this.dataElement)==null?void 0:t.schemaGeneration)??null}get parsedUrl(){return cr(this.layerUrl)}get featureServiceUrl(){return np(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer")}get layerId(){return np(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}async load(t){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),t)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,t)),this}getLayerIdBySourceId(t){if(!this.dataElement)return null;const i=this._layerIdBySourceId.get(t);if(i!=null)return i;const r=this.dataElement.domainNetworks,n=this._traverseNetworkSources(r,this._layerIdBySourceId,"sourceId","layerId",t);return n>=0?n:null}getSourceIdByLayerId(t){if(!this.dataElement)return null;const i=this._sourceIdByLayerId.get(t);if(i!=null)return i;const r=this.dataElement.domainNetworks,n=this._traverseNetworkSources(r,this._sourceIdByLayerId,"layerId","sourceId",t);return n>=0?n:null}getObjectIdsFromElements(t){const i=[],r=new Map;for(const o of t){const c=this.getLayerIdBySourceId(o.networkSourceId);if(c==null)continue;let y=r.get(c);y===void 0&&(y=[]),y.push(o.objectId),r.set(c,y)}const n=this.featureServiceUrl;return r.forEach((o,c)=>i.push({layerUrl:`${n}/${c}`,objectIds:o})),i}async queryNamedTraceConfigurations(t,i){var y;const[{queryNamedTraceConfigurations:r},{default:n}]=await Promise.all([de(()=>import("./queryNamedTraceConfigurations-BtPMZ-uP.js"),[],import.meta.url),de(()=>import("./QueryNamedTraceConfigurationsParameters-DqjmDzB4.js"),[],import.meta.url)]),o=this.networkServiceUrl,c=n.from(t);return(y=await r(o,c,{...i}))==null?void 0:y.namedTraceConfigurations}async validateTopology(t,i){var I,$,A;if(!t.validateArea)throw new ne("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const[{validateNetworkTopology:r},{default:n}]=await Promise.all([de(()=>import("./validateNetworkTopology-D7l8EDOZ.js"),[],import.meta.url),de(()=>import("./ValidateNetworkTopologyParameters-Cu1fmi9Z.js"),[],import.meta.url)]),o=n.from(t);fx(this.featureServiceUrl,this.gdbVersion||null)?(o.sessionID=N8,await HG(this.featureServiceUrl,this.gdbVersion,!0)):o.sessionID=null,o.gdbVersion=this.gdbVersion;const c=this.networkServiceUrl,y=this.featureServiceUrl,v=WG(y,null,this.gdbVersion,!0),_=await r(c,o,{...i});if(_!=null&&_.serviceEdits){const k=[];for(const R of _.serviceEdits){const{editedFeatures:N}=R,D=N!=null&&N.spatialReference?new rt(N.spatialReference):null;k.push({layerId:R.layerId,editedFeatures:{adds:((I=N==null?void 0:N.adds)==null?void 0:I.map(j=>bS(j,D)))||[],updates:(($=N==null?void 0:N.updates)==null?void 0:$.map(j=>({original:bS(j[0],D),current:bS(j[1],D)})))||[],deletes:((A=N==null?void 0:N.deletes)==null?void 0:A.map(j=>bS(j,D)))||[],spatialReference:D}})}v.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:k,exceededTransferLimit:!1,historicMoment:_.moment})}return _}async submitTopologyValidationJob(t,i){let r=null;if(!t.validateArea)throw new ne("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!this.gdbVersion){const I=this.layerUrl.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");r=(await Et(I,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}const[{submitValidateNetworkTopologyJob:n},{default:o}]=await Promise.all([de(()=>import("./validateNetworkTopology-D7l8EDOZ.js"),[],import.meta.url),de(()=>import("./ValidateNetworkTopologyParameters-Cu1fmi9Z.js"),[],import.meta.url)]),c=o.from(t);fx(this.featureServiceUrl,this.gdbVersion||null)?(c.sessionID=N8,await HG(this.featureServiceUrl,this.gdbVersion,!0)):c.sessionID=null,c.gdbVersion=this.gdbVersion||r;const y=this.networkServiceUrl,v=this.featureServiceUrl?WG(this.featureServiceUrl,null,this.gdbVersion,!0):void 0,_=await n(y,c,{...i});return new aje({statusUrl:_,editsResolver:v})}_traverseNetworkSources(t,i,r,n,o){for(const c of t)for(const y of[c.edgeSources??[],c.junctionSources??[]])for(const v of y)if(v[r]===o)return i.set(o,v[n]),v[n];return-1}async _fetchLayerMetaData(t,i){const r=await Et(t,{responseType:"json",query:{f:"json"},...i});this.sourceJSON=r.data,this.read(r.data,{origin:"service"})}async _fetchDataElement(t,i,r){if(this.dataElement)return;const n=await Et(`${t}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([i]),f:"json"},...r}).then(o=>{var c;return(c=o.data.layerDataElements)==null?void 0:c[0]});n&&this.read(n,{origin:"service"})}};function bS(e,t){return new er({attributes:e.attributes,geometry:Xc({...e.geometry,spatialReference:t})})}m([w({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],Tr.prototype,"id",void 0),m([w({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],Tr.prototype,"title",void 0),m([w({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],Tr.prototype,"layerUrl",void 0),m([w({type:Object,json:{origins:{service:{read:!0}},read:!1}})],Tr.prototype,"dataElement",void 0),m([w({type:Ut,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],Tr.prototype,"fullExtent",void 0),m([w({type:rt,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],Tr.prototype,"spatialReference",void 0),m([w({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],Tr.prototype,"type",void 0),m([w({readOnly:!0})],Tr.prototype,"datasetName",null),m([w({readOnly:!0})],Tr.prototype,"owner",null),m([w({readOnly:!0})],Tr.prototype,"schemaGeneration",null),m([w({readOnly:!0})],Tr.prototype,"parsedUrl",null),m([w({readOnly:!0})],Tr.prototype,"featureServiceUrl",null),m([w({readOnly:!0})],Tr.prototype,"networkServiceUrl",null),m([w({readOnly:!0})],Tr.prototype,"layerId",null),m([w()],Tr.prototype,"sourceJSON",void 0),m([w({readOnly:!0})],Tr.prototype,"networkSystemLayers",null),m([w()],Tr.prototype,"gdbVersion",void 0),m([w({type:Date})],Tr.prototype,"historicMoment",void 0),Tr=m([H("esri.networks.Network")],Tr);const uje=Tr;let Qh=class extends Og(Aa){constructor(t){super(t),this.rulesCategorized={attachment:[],containment:[],connectivity:[]},this.request=Et}initialize(){}async load(t){const i=this.layer.load(t).then(()=>this._initializeRulesTable());return this.addResolvingPromise(i),this}getFeatureSQL(t,i){var _,I;const r=t.layerId.toString(),n=(_=t.fieldsIndex)==null?void 0:_.normalizeFieldName("assetGroup"),o=(I=t.fieldsIndex)==null?void 0:I.normalizeFieldName("assetType"),c=n?i.attributes[n]:null,y=o?i.attributes[o]:null,v=this.rulesHash[r];if(v){const $=v.assetGroupHash[c];if($)return $.assetTypeHash[y]||null}return null}async _initializeRulesTable(){var n,o,c,y,v,_,I,$,A,k,R;const t={};let i;(function(N){N[N.from=0]="from",N[N.to=1]="to",N[N.via=2]="via"})(i||(i={}));const r=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];this.rulesCategorized={attachment:[],containment:[],connectivity:[]};for(const N of this.rules){if(N.ruleType===Nc.RTAttachment){this.rulesCategorized.attachment.push(N);continue}if(N.ruleType===Nc.RTContainment){this.rulesCategorized.containment.push(N);continue}if(N.ruleType===Nc.RTJunctionJunctionConnectivity){this.rulesCategorized.connectivity.push(N);continue}this.rulesCategorized.connectivity.push(N);let D=[[i.from,i.to],[i.to,i.from]];N.ruleType===Nc.RTEdgeJunctionEdgeConnectivity&&(D=[[i.from,i.via],[i.via,i.from],[i.to,i.via],[i.via,i.to]]);for(const j of D){const z=j.shift(),U=j.shift();let W=!1;switch(N.ruleType){case Nc.RTEdgeJunctionEdgeConnectivity:W=z===i.from||z===i.to;break;case Nc.RTJunctionEdgeConnectivity:W=z===i.to}const Q=r[z],K=((n=N[Q.networkSourceId])==null?void 0:n.layerId.toString())??"",ee=(c=(o=N[Q.assetGroupId])==null?void 0:o.assetGroupCode)==null?void 0:c.toString(),ie=N[Q.assetTypeId],ae=(y=ie==null?void 0:ie.assetTypeCode)==null?void 0:y.toString(),ue=r[U],Ie=((v=N[ue.networkSourceId])==null?void 0:v.layerId.toString())??"",Ae=(I=(_=N[ue.assetGroupId])==null?void 0:_.assetGroupCode)==null?void 0:I.toString(),Me=N[ue.assetTypeId],fe=($=Me==null?void 0:Me.assetTypeCode)==null?void 0:$.toString(),se=t[K]??{assetGroupHash:{}};if(!(ee&&ae&&Ae&&fe))continue;const ye=se.assetGroupHash[ee]??{assetTypeHash:{}},he=ye.assetTypeHash[ae]??{};if(he[Ie]=he[Ie]??{},W){he[K]=he[K]??{};const xe=`(assetgroup = ${ee} AND assettype = ${ae})`;(Me==null?void 0:Me.connectivityPolicy)==="esriNECPEndVertex"?he[K].endVertex=(A=he[K])!=null&&A.endVertex?`${he[K].endVertex}`:`${xe}`:he[K].anyVertex=he[K].anyVertex?`${he[K].anyVertex}`:`${xe}`}const ce=`(assetgroup = ${Ae} AND assettype = ${fe})`;(Me==null?void 0:Me.connectivityPolicy)==="esriNECPEndVertex"?he[Ie].endVertex=(k=he[Ie])!=null&&k.endVertex?`${he[Ie].endVertex} OR ${ce}`:`${ce}`:he[Ie].anyVertex=(R=he[Ie])!=null&&R.anyVertex?`${he[Ie].anyVertex} OR ${ce}`:`${ce}`,ye.assetTypeHash[ae]=he,se.assetGroupHash[ee]=ye,t[K]=se}}this.rulesHash=t}};m([w({constructOnly:!0})],Qh.prototype,"layer",void 0),m([w({constructOnly:!0})],Qh.prototype,"rules",void 0),m([w()],Qh.prototype,"rulesHash",void 0),m([w()],Qh.prototype,"rulesCategorized",void 0),m([w({constructOnly:!0})],Qh.prototype,"request",void 0),Qh=m([H("esri.networks.RulesTable")],Qh);const cje=Qh;let oa=class extends be{constructor(t){super(t),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};m([w({type:[Object],json:{write:!0}})],oa.prototype,"conditionBarriers",void 0),m([w({type:[Object],json:{write:!0}})],oa.prototype,"outputConditions",void 0),m([w({type:[Object],json:{write:!0}})],oa.prototype,"functions",void 0),m([w({type:[Object],json:{write:!0}})],oa.prototype,"functionBarriers",void 0),m([w({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],oa.prototype,"traversabilityScope",void 0),m([w({type:String,json:{write:!0}})],oa.prototype,"shortestPathNetworkAttributeName",void 0),m([w({type:Boolean,json:{write:!0}})],oa.prototype,"includeBarriers",void 0),m([w({type:Boolean,json:{write:!0}})],oa.prototype,"validateConsistency",void 0),m([w({type:Boolean,json:{write:!0}})],oa.prototype,"ignoreBarriersAtStartingPoints",void 0),oa=m([H("esri.networks.support.TraceConfiguration")],oa);const qP=oa;let Zi=class extends qP{constructor(t){super(t),this.filterBarriers=[],this.arcadeExpressionBarrier=null,this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.allowIndeterminateFlow=null,this.includeUpToFirstSpatialContainer=null,this.nearestNeighbor=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.diagramTemplateName=null,this.tierName=null,this.validateLocatability=null}};m([w({type:[Object],json:{write:!0}})],Zi.prototype,"filterBarriers",void 0),m([w({type:String,json:{write:!0}})],Zi.prototype,"arcadeExpressionBarrier",void 0),m([w({type:String,json:{write:!0}})],Zi.prototype,"domainNetworkName",void 0),m([w({type:String,json:{write:!0}})],Zi.prototype,"filterBitsetNetworkAttributeName",void 0),m([w({type:[Object],json:{write:!0}})],Zi.prototype,"filterFunctionBarriers",void 0),m([w({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Zi.prototype,"filterScope",void 0),m([w({type:Boolean,json:{write:!0}})],Zi.prototype,"includeContainers",void 0),m([w({type:Boolean,json:{write:!0}})],Zi.prototype,"includeContent",void 0),m([w({type:Boolean,json:{write:!0}})],Zi.prototype,"includeIsolated",void 0),m([w({type:Boolean,json:{write:!0}})],Zi.prototype,"includeStructures",void 0),m([w({type:Boolean,json:{write:!0}})],Zi.prototype,"allowIndeterminateFlow",void 0),m([w({type:Boolean,json:{write:!0}})],Zi.prototype,"includeUpToFirstSpatialContainer",void 0),m([w({type:Object,json:{write:!0}})],Zi.prototype,"nearestNeighbor",void 0),m([w({type:[Object],json:{write:!0}})],Zi.prototype,"outputFilterCategories",void 0),m([w({type:[Object],json:{write:!0}})],Zi.prototype,"outputFilters",void 0),m([w({type:[Object],json:{write:!0}})],Zi.prototype,"propagators",void 0),m([w({type:String,json:{write:!0}})],Zi.prototype,"subnetworkName",void 0),m([w({type:String,json:{write:!0}})],Zi.prototype,"targetTierName",void 0),m([w({type:String,json:{write:!0}})],Zi.prototype,"diagramTemplateName",void 0),m([w({type:String,json:{write:!0}})],Zi.prototype,"tierName",void 0),m([w({type:Boolean,json:{write:!0}})],Zi.prototype,"validateLocatability",void 0),Zi=m([H("esri.networks.support.UNTraceConfiguration")],Zi);const hje=Zi;let Js=class extends v8{constructor(t){super(t),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(t,i){return t.tierName!==void 0?hje.fromJSON(t):qP.fromJSON(t)}};m([w({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],Js.prototype,"globalId",void 0),m([w({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],Js.prototype,"title",void 0),m([w({type:qP,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Js.prototype,"traceConfiguration",void 0),m([ke("service","traceConfiguration")],Js.prototype,"readTraceConfiguration",null),m([w({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Js.prototype,"creationDate",void 0),m([w({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Js.prototype,"creator",void 0),m([w({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Js.prototype,"description",void 0),m([w({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],Js.prototype,"minStartingPoints",void 0),m([w({json:{origins:{service:{read:!0,write:!0}},read:!1}})],Js.prototype,"resultTypes",void 0),m([w({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],Js.prototype,"tags",void 0),m([w({type:fS.apiValues,json:{type:fS.jsonValues,origins:{service:{read:fS.read,write:fS.write}},read:!1}})],Js.prototype,"traceType",void 0),Js=m([H("esri.networks.support.NamedTraceConfiguration")],Js);const dje=Js;let il=class extends Ve{constructor(t){super(t),this.rulesTableId=null,this.rulesTableUrl=null,this.subnetworksTableId=null,this.subnetworksTableUrl=null,this.dirtyAreasLayerId=null,this.dirtyAreasLayerUrl=null,this.associationsTableId=null,this.associationsTableUrl=null}};m([w({constructOnly:!0})],il.prototype,"rulesTableId",void 0),m([w({constructOnly:!0})],il.prototype,"rulesTableUrl",void 0),m([w({constructOnly:!0})],il.prototype,"subnetworksTableId",void 0),m([w({constructOnly:!0})],il.prototype,"subnetworksTableUrl",void 0),m([w({constructOnly:!0})],il.prototype,"dirtyAreasLayerId",void 0),m([w({constructOnly:!0})],il.prototype,"dirtyAreasLayerUrl",void 0),m([w({constructOnly:!0})],il.prototype,"associationsTableId",void 0),m([w({constructOnly:!0})],il.prototype,"associationsTableUrl",void 0),il=m([H("esri.networks.support.NetworkSystemLayers")],il);const pje=il;let Lm=class extends be{constructor(t){super(t),this.id=null,this.name=null}};m([w({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],Lm.prototype,"id",void 0),m([w({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],Lm.prototype,"name",void 0),m([w({type:Boolean,json:{write:!0}})],Lm.prototype,"isUpstreamTerminal",void 0),Lm=m([H("esri.networks.support.Terminal")],Lm);const fje=Lm,_S=new ft({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let ed=class extends be{constructor(t){super(t),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};m([w({type:String,json:{write:!0}})],ed.prototype,"defaultConfiguration",void 0),m([w({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],ed.prototype,"id",void 0),m([w({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],ed.prototype,"name",void 0),m([w({type:[fje],json:{write:!0}})],ed.prototype,"terminals",void 0),m([w({type:_S.apiValues,json:{type:_S.jsonValues,read:_S.read,write:_S.write}})],ed.prototype,"traversabilityModel",void 0),ed=m([H("esri.networks.support.TerminalConfiguration")],ed);const Yq=ed;let Om=class extends be{constructor(t){super(t),this.line=null,this.multipoint=null,this.polygon=null}};m([w({type:io,json:{write:!0},readOnly:!0})],Om.prototype,"line",void 0),m([w({type:Pg,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],Om.prototype,"multipoint",void 0),m([w({type:Os,json:{write:!0},readOnly:!0})],Om.prototype,"polygon",void 0),Om=m([H("esri.rest.networks.support.AggregatedGeometry")],Om);const yje=Om;let Rm=class extends be{constructor(t){super(t),this.functionType=null,this.networkAttributeName=null,this.result=null}};m([w({type:["add","subtract","average","count","min","max"],json:{write:!0},readOnly:!0})],Rm.prototype,"functionType",void 0),m([w({type:String,json:{write:!0},readOnly:!0})],Rm.prototype,"networkAttributeName",void 0),m([w({type:Number,json:{write:!0},readOnly:!0})],Rm.prototype,"result",void 0),Rm=m([H("esri.rest.networks.support.FunctionResult")],Rm);const mje=Rm;let _c=class extends be{constructor(t){super(t),this.aggregatedGeometry=null,this.elements=null,this.globalFunctionResults=null,this.kFeaturesForKNNFound=!1,this.startingPointsIgnored=!1,this.warnings=null}};m([w({type:yje,json:{write:!0},readOnly:!0})],_c.prototype,"aggregatedGeometry",void 0),m([w({type:[z0],json:{write:!0},readOnly:!0})],_c.prototype,"elements",void 0),m([w({type:[mje],json:{write:!0},readOnly:!0})],_c.prototype,"globalFunctionResults",void 0),m([w({type:Boolean,json:{write:!0},readOnly:!0})],_c.prototype,"kFeaturesForKNNFound",void 0),m([w({type:Boolean,json:{write:!0},readOnly:!0})],_c.prototype,"startingPointsIgnored",void 0),m([w({type:[String],json:{write:!0},readOnly:!0})],_c.prototype,"warnings",void 0),_c=m([H("esri.rest.networks.support.TraceResult")],_c);const gje=_c,vje=nn()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let Af=class extends gje{constructor(t){super(t),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(t){const i={...t,query:{f:"json"}},{data:r}=await Et(this.statusUrl,i),n=r.traceResults?{...r.traceResults,...r}:r;return this.read(n),this}async waitForJobCompletion(t={}){const{interval:i=1e3,statusCallback:r}=t;return new Promise((n,o)=>{this._clearTimer();const c=setInterval(()=>{this._timer||o(Ei()),this.checkJobStatus().then(y=>{const{status:v}=y;switch(this.status=v,v){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":r&&r(this)}},y=>{this._clearTimer(),o(y)})},i);this._timer=c})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};m([w({type:String,json:{write:!0}})],Af.prototype,"statusUrl",void 0),m([He(vje)],Af.prototype,"status",void 0),m([w({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.submissionTime=e?e.getTime():null}}}})],Af.prototype,"submissionTime",void 0),m([w({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.lastUpdatedTime=e?e.getTime():null}}}})],Af.prototype,"lastUpdatedTime",void 0),Af=m([H("esri.networks.support.TraceJobInfo")],Af);const wje=Af;let Sc=class extends uje{constructor(t){super(t),this.sharedNamedTraceConfigurations=[],this.type="utility",this._terminalById=new Map}get serviceTerritoryFeatureLayerId(){var t;return((t=this.dataElement)==null?void 0:t.serviceTerritoryFeatureLayerId)??null}get networkSystemLayers(){var t,i,r,n,o,c,y,v;return new pje({rulesTableId:(t=this.sourceJSON)==null?void 0:t.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(i=this.sourceJSON)==null?void 0:i.systemLayers.rulesTableId}`:null,subnetworksTableId:(r=this.sourceJSON)==null?void 0:r.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(n=this.sourceJSON)==null?void 0:n.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:(o=this.sourceJSON)==null?void 0:o.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${(c=this.sourceJSON)==null?void 0:c.systemLayers.dirtyAreasLayerId}`:null,associationsTableId:(y=this.sourceJSON)==null?void 0:y.systemLayers.associationsTableId,associationsTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(v=this.sourceJSON)==null?void 0:v.systemLayers.associationsTableId}`:null})}get terminalConfigurations(){var t;return((t=this.dataElement)==null?void 0:t.terminalConfigurations.map(i=>Yq.fromJSON(i)))||[]}get domainNetworkNames(){var t;return((t=this.dataElement)==null?void 0:t.domainNetworks.map(i=>i.domainNetworkName))||[]}get _utilityLayerList(){var i,r;const t=new Set;return(r=(i=this.dataElement)==null?void 0:i.domainNetworks)==null||r.map(n=>{n.edgeSources.map(o=>{t.add(o.layerId)}),n.junctionSources.map(o=>{t.add(o.layerId)})}),t}async load(t){return this.addResolvingPromise(super.load(t)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(t)),this}getTerminalConfiguration(t){var _,I,$,A;let i=null,r=null;const n=t.layer;let o=null;if((n==null?void 0:n.type)==="feature"){if(o=n.layerId,o===null)return null}else if((n==null?void 0:n.type)!=="subtype-sublayer"||(o=((_=n==null?void 0:n.parent)==null?void 0:_.layerId)??null,o===null))return null;const c=t.attributes;if(c==null)return null;for(const k of Object.keys(c))k.toUpperCase()==="ASSETGROUP"&&(i=t.getAttribute(k)),k.toUpperCase()==="ASSETTYPE"&&(r=t.getAttribute(k));if(!this.dataElement)return null;let y=null;const v=this.dataElement.domainNetworks;for(const k of v){const R=(I=k.junctionSources)==null?void 0:I.find(N=>N.layerId===o);if(R){const N=($=R.assetGroups)==null?void 0:$.find(D=>D.assetGroupCode===i);if(N){const D=(A=N.assetTypes)==null?void 0:A.find(j=>j.assetTypeCode===r);if(D){y=D.terminalConfigurationId;break}}}}if(y!=null){const k=this.dataElement.terminalConfigurations,R=k==null?void 0:k.find(N=>N.terminalConfigurationId===y);return R?Yq.fromJSON(R):null}return null}getTierNames(t){var r;const i=(r=this.dataElement)==null?void 0:r.domainNetworks.find(n=>n.domainNetworkName===t);return(i==null?void 0:i.tiers.map(n=>n.name))||[]}async getRulesTable(){return this._sharedRulesTable||(this._sharedRulesTable=this._createRulesTable()),await this._sharedRulesTable}getTerminalById(t){if(!this.dataElement||t==null)return null;const i=this._terminalById.get(t);return i??(this.terminalConfigurations.forEach(r=>{r.terminals.forEach(n=>{this._terminalById.set(n.id,n)})}),this._terminalById.get(t))}isUtilityLayer(t){var i;return"layerId"in t&&this._utilityLayerList.has(t.layerId)&&(((i=t.url)==null?void 0:i.startsWith(this.featureServiceUrl))??!1)}async queryAssociations(t){const[{queryAssociations:i},{default:r}]=await Promise.all([de(()=>import("./queryAssociations-CifwBsWq.js"),[],import.meta.url),de(()=>import("./QueryAssociationsParameters-CK_TcZPJ.js"),[],import.meta.url)]),n=r.from(t);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,(await i(this.networkServiceUrl,n)).associations}async synthesizeAssociationGeometries(t){const[{synthesizeAssociationGeometries:i},{default:r}]=await Promise.all([de(()=>import("./synthesizeAssociationGeometries-CvDaR05z.js"),[],import.meta.url),de(()=>import("./SynthesizeAssociationGeometriesParameters-y7OeaVgH.js"),[],import.meta.url)]),n=r.from(t);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,i(this.networkServiceUrl,n)}async trace(t){const[{trace:i},{default:r}]=await Promise.all([de(()=>import("./trace-D5CuL2b2.js"),[],import.meta.url),de(()=>import("./TraceParameters-De7BeTzL.js"),[],import.meta.url)]),n=r.from(t);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,i(this.networkServiceUrl,n)}async submitTraceJob(t){const[{submitTraceJob:i},{default:r}]=await Promise.all([de(()=>import("./trace-D5CuL2b2.js"),[],import.meta.url),de(()=>import("./TraceParameters-De7BeTzL.js"),[],import.meta.url)]),n=r.from(t);n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment;const o=await i(this.networkServiceUrl,n);return new wje({statusUrl:o})}async canAddAssociation(t){const i=await this.getRulesTable();if(!i)return!1;await i.load();const r=(o,c)=>o?o.terminalId===1?!(c!=null&&c.terminalId)||(c==null?void 0:c.terminalId)===o.terminalId:o.terminalId===(c==null?void 0:c.terminalId):!(c!=null&&c.terminalId),n=(o,c)=>{var y,v,_,I,$,A,k,R,N,D,j,z;return((y=o.fromNetworkSource)==null?void 0:y.sourceId)===((v=c.fromNetworkElement)==null?void 0:v.networkSourceId)&&((_=o.toNetworkSource)==null?void 0:_.sourceId)===((I=c.toNetworkElement)==null?void 0:I.networkSourceId)&&(($=o.fromAssetGroup)==null?void 0:$.assetGroupCode)===((A=c.fromNetworkElement)==null?void 0:A.assetGroupCode)&&((k=o.fromAssetType)==null?void 0:k.assetTypeCode)===((R=c.fromNetworkElement)==null?void 0:R.assetTypeCode)&&((N=o.toAssetGroup)==null?void 0:N.assetGroupCode)===((D=c.toNetworkElement)==null?void 0:D.assetGroupCode)&&((j=o.toAssetType)==null?void 0:j.assetTypeCode)===((z=c.toNetworkElement)==null?void 0:z.assetTypeCode)&&r(o.fromTerminal,c.fromNetworkElement)&&r(o.toTerminal,c.toNetworkElement)};return t.associationType==="containment"?i.rulesCategorized.containment.some(o=>n(o,t)):t.associationType==="attachment"?i.rulesCategorized.attachment.some(o=>n(o,t)):i.rulesCategorized.connectivity.some(o=>{var c,y,v,_,I,$,A,k,R,N,D,j,z,U,W,Q,K,ee,ie,ae,ue,Ie,Ae,Me;return o.viaNetworkSource?((c=o.fromNetworkSource)==null?void 0:c.sourceId)===((y=t.fromNetworkElement)==null?void 0:y.networkSourceId)&&((v=o.viaNetworkSource)==null?void 0:v.sourceId)===((_=t.toNetworkElement)==null?void 0:_.networkSourceId)&&((I=o.fromAssetGroup)==null?void 0:I.assetGroupCode)===(($=t.fromNetworkElement)==null?void 0:$.assetGroupCode)&&((A=o.fromAssetType)==null?void 0:A.assetTypeCode)===((k=t.fromNetworkElement)==null?void 0:k.assetTypeCode)&&((R=o.viaAssetGroup)==null?void 0:R.assetGroupCode)===((N=t.toNetworkElement)==null?void 0:N.assetGroupCode)&&((D=o.viaAssetType)==null?void 0:D.assetTypeCode)===((j=t.toNetworkElement)==null?void 0:j.assetTypeCode)&&r(o.fromTerminal,t.fromNetworkElement)&&r(o.viaTerminal,t.toNetworkElement)||((z=o.viaNetworkSource)==null?void 0:z.sourceId)===((U=t.fromNetworkElement)==null?void 0:U.networkSourceId)&&((W=o.toNetworkSource)==null?void 0:W.sourceId)===((Q=t.toNetworkElement)==null?void 0:Q.networkSourceId)&&((K=o.viaAssetGroup)==null?void 0:K.assetGroupCode)===((ee=t.fromNetworkElement)==null?void 0:ee.assetGroupCode)&&((ie=o.viaAssetType)==null?void 0:ie.assetTypeCode)===((ae=t.fromNetworkElement)==null?void 0:ae.assetTypeCode)&&((ue=o.toAssetGroup)==null?void 0:ue.assetGroupCode)===((Ie=t.toNetworkElement)==null?void 0:Ie.assetGroupCode)&&((Ae=o.toAssetType)==null?void 0:Ae.assetTypeCode)===((Me=t.toNetworkElement)==null?void 0:Me.assetTypeCode)&&r(o.viaTerminal,t.fromNetworkElement)&&r(o.toTerminal,t.toNetworkElement):n(o,t)})}generateAddAssociations(t){return{addFeatures:t.map(i=>{var r,n,o,c,y,v;return new er({attributes:{fromnetworksourceid:(r=i.fromNetworkElement)==null?void 0:r.networkSourceId,fromglobalid:(n=i.fromNetworkElement)==null?void 0:n.globalId,fromterminalid:(o=i.fromNetworkElement)==null?void 0:o.terminalId,tonetworksourceid:(c=i.toNetworkElement)==null?void 0:c.networkSourceId,toglobalid:(y=i.toNetworkElement)==null?void 0:y.globalId,toterminalid:(v=i.toNetworkElement)==null?void 0:v.terminalId,associationtype:tFe[i.associationType],iscontentvisible:i.isContentVisible?1:0,percentalong:i.percentAlong,globalid:i.globalId}})}),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:"globalid",objectIdField:"objectid"}}}generateDeleteAssociations(t){return{deleteFeatures:t.map(i=>({globalId:i.globalId})),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:"globalid",objectIdField:"objectid"}}}async _loadNamedTraceConfigurationsFromNetwork(t){var n;if(((n=this.sharedNamedTraceConfigurations)==null?void 0:n.length)===0)return;const i=this.sharedNamedTraceConfigurations.map(o=>o.globalId),r=await this.queryNamedTraceConfigurations({globalIds:i},t);for(const o of this.sharedNamedTraceConfigurations){const c=r==null?void 0:r.find(y=>y.globalId===o.globalId);if(c){const y=c.write({},{origin:"service"});o.read(y,{origin:"service"})}}}async _createRulesTable(){var c;const t=this.networkSystemLayers.rulesTableUrl,i=new U3({url:t});await i.load();const r=(c=this.dataElement)==null?void 0:c.domainNetworks;if(!r)return null;const n=r.flatMap(y=>[...y.edgeSources||[],...y.junctionSources||[]]),o=(await bje(i)).map(y=>this._hydrateRuleInfo(i,n,y));return new cje({layer:i,rules:o})}_hydrateRuleInfo(t,i,r){const n=t.fieldsIndex,o=n.get("RULETYPE"),c=n.get("CREATIONDATE"),y=n.get("FROMNETWORKSOURCEID"),v=n.get("FROMASSETGROUP"),_=n.get("FROMASSETTYPE"),I=n.get("FROMTERMINALID"),$=n.get("TONETWORKSOURCEID"),A=n.get("TOASSETGROUP"),k=n.get("TOASSETTYPE"),R=n.get("TOTERMINALID"),N=n.get("VIANETWORKSOURCEID"),D=n.get("VIAASSETGROUP"),j=n.get("VIAASSETTYPE"),z=n.get("VIATERMINALID"),U=r.attributes[o.name],W=new Date(r.attributes[c.name]),Q=[{networkSourceId:r.attributes[y.name],assetGroupId:r.attributes[v.name],assetTypeId:r.attributes[_.name],terminalId:r.attributes[I.name]},{networkSourceId:r.attributes[$.name],assetGroupId:r.attributes[A.name],assetTypeId:r.attributes[k.name],terminalId:r.attributes[R.name]},{networkSourceId:r.attributes[N.name],assetGroupId:r.attributes[D.name],assetTypeId:r.attributes[j.name],terminalId:r.attributes[z.name]}];let K;(function(ie){ie[ie.from=0]="from",ie[ie.to=1]="to",ie[ie.via=2]="via"})(K||(K={}));const ee={ruleType:U,creationDate:W};for(const ie of[K.from,K.to,K.via]){if(U!==Nc.RTEdgeJunctionEdgeConnectivity&&ie===K.via)continue;const ae=Q[ie],ue=i.find(se=>se.sourceId===ae.networkSourceId),Ie=ue==null?void 0:ue.assetGroups.find(se=>se.assetGroupCode===ae.assetGroupId),Ae=Ie==null?void 0:Ie.assetTypes.find(se=>se.assetTypeCode===ae.assetTypeId),Me=this._getTerminal(Ae,ae);let fe="";switch(ie){case K.from:fe="from";break;case K.to:fe="to";break;case K.via:fe="via"}ee[`${fe}NetworkSource`]=ue,ee[`${fe}AssetGroup`]=Ie,ee[`${fe}AssetType`]=Ae,ee[`${fe}Terminal`]=Me==null?void 0:Me.toJSON()}return ee}_getTerminal(t,i){var o,c;const r=t==null?void 0:t.terminalConfigurationId,n=(o=this.terminalConfigurations)==null?void 0:o.find(y=>y.id===r);return((c=n==null?void 0:n.terminals)==null?void 0:c.find(y=>y.id===i.terminalId))??null}};async function bje(e){const t=new ys({where:"1=1",outFields:["*"]});return(await wae(e,t)).features}m([w({type:[dje],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],Sc.prototype,"sharedNamedTraceConfigurations",void 0),m([w({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],Sc.prototype,"type",void 0),m([w({readOnly:!0})],Sc.prototype,"serviceTerritoryFeatureLayerId",null),m([w({readOnly:!0})],Sc.prototype,"networkSystemLayers",null),m([w({readOnly:!0})],Sc.prototype,"terminalConfigurations",null),m([w({readOnly:!0})],Sc.prototype,"domainNetworkNames",null),Sc=m([H("esri.networks.UtilityNetwork")],Sc);const Ile=Sc,_je=Object.freeze(Object.defineProperty({__proto__:null,default:Ile},Symbol.toStringTag,{value:"Module"}));let Pm=class extends St(be){constructor(t){super(t),this.expression=null,this.returnType="string",this.title=null}};m([w({type:String,json:{write:{isRequired:!0}}})],Pm.prototype,"expression",void 0),m([w({type:["number","string"],json:{write:!0}})],Pm.prototype,"returnType",void 0),m([w({type:String,json:{write:!0}})],Pm.prototype,"title",void 0),Pm=m([H("esri.webdoc.geotriggersInfo.ExpressionInfo")],Pm);const Tle=Pm,SS=new ft({deviceLocation:"device-location"});let nb=class extends St(be){constructor(t){super(t),this.filterExpression=null,this.type="device-location"}};m([w({type:Tle,json:{write:!0}})],nb.prototype,"filterExpression",void 0),m([w({type:SS.apiValues,readOnly:!0,json:{type:SS.jsonValues,read:SS.read,write:SS.write}})],nb.prototype,"type",void 0),nb=m([H("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],nb);const Sje=nb;let sb=class extends St(be){constructor(t){super(t),this.geometry=null,this.where=null}};m([w({types:q0,json:{read:Xc,write:!0}})],sb.prototype,"geometry",void 0),m([w({type:String,json:{write:!0}})],sb.prototype,"where",void 0),sb=m([H("esri.webdoc.geotriggersInfo.FeatureFilter")],sb);const xje=sb;let Nm=class extends St(be){constructor(t){super(t),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};m([w({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],Nm.prototype,"layerId",void 0),m([w({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],Nm.prototype,"layerUrl",void 0),m([He({featureLayer:"feature-layer"},{readOnly:!0})],Nm.prototype,"type",void 0),Nm=m([H("esri.webdoc.geotriggersInfo.FeatureLayerSource")],Nm);const Ije=Nm;let Cf=class extends St(be){constructor(t){super(t),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};m([w({type:Ije,json:{write:{isRequired:!0}}})],Cf.prototype,"fenceSource",void 0),m([w({type:xje,json:{write:!0}})],Cf.prototype,"filter",void 0),m([w({type:Number,json:{write:!0}})],Cf.prototype,"bufferDistance",void 0),m([He({features:"features"},{readOnly:!0})],Cf.prototype,"type",void 0),Cf=m([H("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],Cf);const Tje=Cf;let xx=class extends St(be){constructor(t){super(t),this.type="fence"}};m([He({fence:"fence"},{readOnly:!0})],xx.prototype,"type",void 0),xx=m([H("esri.webdoc.geotriggersInfo.Geotrigger")],xx);const $le=xx;let ob=class extends St(be){constructor(t){super(t),this.expressionInfo=null,this.requestedActions=null}};m([w({type:Tle,json:{write:!0}})],ob.prototype,"expressionInfo",void 0),m([w({type:[String],json:{write:!0}})],ob.prototype,"requestedActions",void 0),ob=m([H("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],ob);const $je=ob,Eje=new ft({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),Mje=new ft({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),xS=new ft({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});let rl=class extends $le{constructor(t){super(t),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};m([He(Eje)],rl.prototype,"enterExitRule",void 0),m([w({type:Sje,json:{write:{isRequired:!0}}})],rl.prototype,"feed",void 0),m([He(Mje)],rl.prototype,"feedAccuracyMode",void 0),m([w({type:xS.apiValues,json:{type:xS.jsonValues,read:xS.read,write:{writer:xS.write,isRequired:!0}}})],rl.prototype,"fenceNotificationRule",void 0),m([w({type:Tje,json:{write:{isRequired:!0}}})],rl.prototype,"fenceParameters",void 0),m([w({type:String,json:{write:!0}})],rl.prototype,"name",void 0),m([w({type:$je,json:{write:!0}})],rl.prototype,"notificationOptions",void 0),m([He({fence:"fence"},{readOnly:!0})],rl.prototype,"type",void 0),rl=m([H("esri.webdoc.geotriggersInfo.FenceGeotrigger")],rl);const Aje=rl,Cje={base:$le,key:"type",typeMap:{fence:Aje}};let Ix=class extends St(be){constructor(t){super(t),this.geotriggers=null}};m([w({types:[Cje],json:{write:{isRequired:!0}}})],Ix.prototype,"geotriggers",void 0),Ix=m([H("esri.webdoc.GeotriggersInfo")],Ix);const kje=Ix;let Fm=class extends St(be){constructor(t){super(t),this.portalItem=null}readPortalItem(t,i,r){const{itemId:n}=i;if(n)return new Cu({id:n,portal:r==null?void 0:r.portal})}writePortalItem(t,i){t!=null&&t.id&&(i.itemId=t.id)}};m([w({type:Cu,json:{write:{isRequired:!0}}})],Fm.prototype,"portalItem",void 0),m([ke("portalItem",["itemId"])],Fm.prototype,"readPortalItem",null),m([Le("portalItem",{itemId:{type:String}})],Fm.prototype,"writePortalItem",null),Fm=m([H("esri.webdoc.ips.PositioningService")],Fm);const Lje=Fm;let Tx=class extends St(be){constructor(t){super(t),this.positioningService=null}};m([w({type:Lje,json:{write:{isRequired:!0}}})],Tx.prototype,"positioningService",void 0),Tx=m([H("esri.webdoc.IPSInfo")],Tx);const Oje=Tx,Rje={currentVersion:Zne,createInitialViewProperties:()=>new A4,parseVersion:z1.parse,itemType:"Web Map",name:"webmap",origin:"web-map"},Pje=Oe.ofType(Ile);let td=class extends nje{constructor(t){super(t),this.geotriggersInfo=null,this.ipsInfo=null,this.presentation=null,this.utilityNetworks=null}destroy(){if(this.utilityNetworks){const t=this.utilityNetworks.removeAll();for(const i of t)i.destroy();this.utilityNetworks.destroy()}}get context(){return Rje}loadAll(){return kI(this,t=>{var i,r;t(this.ground,this.basemap,this.layers,this.tables,(r=(i=this.ipsInfo)==null?void 0:i.positioningService)==null?void 0:r.portalItem)})}static fromJSON(t){if(t)return new this({resourceInfo:t});throw new ne("webmap:empty-resource","Expected a JSON resource but got nothing")}};td.VERSION=Zne,m([w({type:kje,json:{write:!0}})],td.prototype,"geotriggersInfo",void 0),m([w({type:Oje,json:{write:!0,name:"mapIPSInfo"}})],td.prototype,"ipsInfo",void 0),m([w({json:{write:!0}})],td.prototype,"presentation",void 0),m([w({type:Pje,json:{read:!0,write:!0}})],td.prototype,"utilityNetworks",void 0),td=m([H("esri.WebMap")],td);const Nje=td,Ti="esri-search",gi={base:Ti,hasMultipleSources:`${Ti}--multiple-sources`,isLoading:`${Ti}--loading`,isSearching:`${Ti}--searching`,showSuggestions:`${Ti}--show-suggestions`,showSources:`${Ti}--sources`,showWarning:`${Ti}--warning`,container:`${Ti}__container`,input:`${Ti}__input`,inputContainer:`${Ti}__input-container`,form:`${Ti}__form`,submitButton:`${Ti}__submit-button`,sourcesButton:`${Ti}__sources-button`,sourcesButtonDown:`${Ti}__sources-button--down`,sourcesButtonUp:`${Ti}__sources-button--up`,clearButton:`${Ti}__clear-button`,sourceName:`${Ti}__source-name`,suggestionsMenu:`${Ti}__suggestions-menu`,suggestionList:`${Ti}__suggestions-list`,suggestionListCurrentLocation:`${Ti}__suggestions-list--current-location`,sourcesMenu:`${Ti}__sources-menu`,source:`${Ti}__source`,warningMenu:`${Ti}__warning-menu`,warningMenuBody:`${Ti}__warning-body`,warningMenuHeader:`${Ti}__warning-header`,warningMenuText:`${Ti}__warning-text`,noValueText:`${Ti}__no-value-text`},Cp="esri-search-result-renderer",kp={base:Cp,showMoreResults:`${Cp}__more-results--show-more-results`,moreResults:`${Cp}__more-results`,moreResultsList:`${Cp}__more-results-list`,moreResultsHeader:`${Cp}__more-results-header`,moreResultsItem:`${Cp}__more-results-item`,moreResultsListHeader:`${Cp}__more-results-list-header`};let $r=class extends Cl(be){constructor(t){super(t),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};m([w()],$r.prototype,"autoNavigate",void 0),m([w()],$r.prototype,"filter",void 0),m([w()],$r.prototype,"getResults",void 0),m([w()],$r.prototype,"getSuggestions",void 0),m([w()],$r.prototype,"maxResults",void 0),m([w()],$r.prototype,"maxSuggestions",void 0),m([w()],$r.prototype,"minSuggestCharacters",void 0),m([w()],$r.prototype,"outFields",void 0),m([w()],$r.prototype,"placeholder",void 0),m([w()],$r.prototype,"popupEnabled",void 0),m([w()],$r.prototype,"popupTemplate",void 0),m([w()],$r.prototype,"prefix",void 0),m([w()],$r.prototype,"resultGraphicEnabled",void 0),m([w()],$r.prototype,"resultSymbol",void 0),m([w()],$r.prototype,"suggestionsEnabled",void 0),m([w()],$r.prototype,"suffix",void 0),m([w()],$r.prototype,"withinViewEnabled",void 0),m([w()],$r.prototype,"zoomScale",void 0),$r=m([H("esri.widgets.Search.SearchSource")],$r);const HP=$r,Fje=/https?:\/\/services.*\.arcgis\.com/i,Dje=/(?:\{([^}]+)\})/g,G1=()=>_e.getLogger("esri.widgets.Search.support.layerSearchUtils");function jje(e,t){const{exactMatch:i=!1,location:r,maxResults:n,spatialReference:o,source:c,sourceIndex:y,suggestResult:v,view:_}=e,{layer:I,filter:$,zoomScale:A}=c,k=_==null?void 0:_.scale,R=Ele(c,_),N=t==null?void 0:t.signal;return Ale(I).then(()=>{const D=I.popupTemplate;return D?D.getRequiredFields(I.fieldsIndex):null}).then(D=>{var Ie,Ae,Me,fe;const{objectIdField:j,returnZ:z}=I,U=Ple(c);if(!WP(I,U))throw G1().error("invalid-field: displayField is invalid."),new ne("getResults():invalid-field","displayField is invalid.");const W=D!=null&&D.length?D:[U],Q=c.outFields||W,K=Mle(Q);if(Q.includes(j)||K||Q.push(j),(Ie=I.floorInfo)!=null&&Ie.floorField&&Q.push(I.floorInfo.floorField),!(K||C4(I,Q)))throw G1().error("invalid-field: outField is invalid."),new ne("getResults():invalid-field","outField is invalid.");const ee=I.createQuery(),{orderByFields:ie}=c;if(ie&&(ee.orderByFields=ie),o){ee.outSpatialReference=o;const se=1/Al(o);se&&(ee.maxAllowableOffset=se)}const ae=I.geometryType==="mesh"||I.geometryType==="multipatch",ue=((Me=(Ae=I.capabilities)==null?void 0:Ae.data)==null?void 0:Me.supportsZ)&&!ae;if(ee.returnZ=ue&&z!==!1,ee.returnGeometry=!0,ee.multipatchOption=ae?"xyFootprint":null,Q&&(ee.outFields=Q),r)ee.geometry=r;else if(v.key)ee.objectIds=[v.key];else{const se=c.searchFields||[U];if(!C4(I,se))throw G1().error("invalid-field: search field is invalid."),new ne("getResults():invalid-field","search field is invalid.");if(Rle(I)&&(ee.num=n),R&&(ee.geometry=R),!((fe=v.text)==null?void 0:fe.trim()))return[];const he=v.text,{prefix:ce="",suffix:xe=""}=c,Ne=Nle(`${ce}${he}${xe}`);Ole(I)&&kle(I,se)&&!i&&he&&(ee.fullText=Lle({text:he,searchFields:se}));const Ze=Fle({searchTerm:Ne,layer:I,searchFields:se,filter:$,exactMatch:i,query:ee,type:"search"});if(ee.where=Ze,!Cle(ee))return[]}return I.queryFeatures(ee,{signal:N}).then(se=>Xje(se,_,c,y,U,k,A))})}function zje(e,t){const{source:i,spatialReference:r,view:n,suggestTerm:o,maxSuggestions:c,sourceIndex:y,exactMatch:v}=e,{layer:_,filter:I}=i,$=t==null?void 0:t.signal,A=Ele(i,n);return Ale(_).then(()=>{if(!Rle(_))return[];const k=Ple(i),R=i.searchFields||[k],N=[];i.suggestionTemplate?i.suggestionTemplate.replaceAll(Dje,(ue,Ie)=>(N.push(Ie),ue)):N.push(k);const D=Mle(N);N.includes(_.objectIdField)||D||N.push(_.objectIdField);const j=WP(_,k),z=D||C4(_,N),U=C4(_,R);if(!j)throw G1().error("invalid-field: displayField is invalid."),new ne("getSuggestions():invalid-field","displayField is invalid.");if(!z)throw G1().error("invalid-field: outField is invalid."),new ne("getSuggestions():invalid-field","outField is invalid.");if(!U)throw G1().error("invalid-field: search field is invalid."),new ne("getSuggestions():invalid-field","search field is invalid.");const W=_.createQuery(),{orderByFields:Q}=i;if(Q&&(W.orderByFields=Q),W.outSpatialReference=r,W.returnGeometry=!1,W.num=c,W.outFields=N,A&&(W.geometry=A),!o.trim())return[];const{prefix:K="",suffix:ee=""}=i,ie=Nle(`${K}${o}${ee}`);Ole(_)&&kle(_,R)&&!v&&o&&(W.fullText=Lle({text:o,searchFields:R}));const ae=Fle({searchTerm:ie,layer:_,searchFields:R,filter:I,exactMatch:v,query:W,type:"suggest"});return W.where=ae,Cle(W)?_.queryFeatures(W,{signal:$}).then(ue=>Zje(ue,i,y,k)):[]})}function Ele(e,t){const{filter:i,withinViewEnabled:r}=e,n=t==null?void 0:t.extent;return(i==null?void 0:i.geometry)??(r&&n?n:void 0)}function Mle(e){return e&&e.includes("*")}async function Ale(e){e&&await e.load()}function Cle(e){return!(!e.fullText&&!e.where)}function kle(e,t){const i=e==null?void 0:e.indexes;return!i||!(t!=null&&t.length)?!1:i.filter(r=>r.indexType==="FullText").some(r=>{var o;const n=((o=r.fields)==null?void 0:o.split(",").map(c=>c.trim().toLowerCase()))||[];return t.every(c=>n.includes(c.toLowerCase()))})}function Lle({text:e,searchFields:t}){return e.trim().split(" ").filter(i=>!!i.trim()).map(i=>new Oie({onFields:t,searchTerm:i,searchType:"prefix"}))}function Ole(e){var t,i;return((i=(t=e==null?void 0:e.capabilities)==null?void 0:t.query)==null?void 0:i.supportsFullTextSearch)??!1}function Rle(e){var t,i;return((i=(t=e==null?void 0:e.capabilities)==null?void 0:t.query)==null?void 0:i.supportsPagination)??!1}function Vje(e){var t,i,r;return((r=(i=(t=e==null?void 0:e.fieldsIndex)==null?void 0:t.fields)==null?void 0:i.find(n=>n.type==="string"))==null?void 0:r.name)??""}function Ple(e){return e.displayField||e.layer.displayField||Vje(e.layer)}function C4(e,t){return!(!e||!(t!=null&&t.length))&&t.every(i=>WP(e,i))}function WP(e,t){return!!e.getField(t)}function Uje(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}function Bje({codedValues:e},t,i){return p2(e??[],r=>{const n=r.name,o=i?n:n.toLowerCase();return(i?t:t.toLowerCase())===o?r.code.toString():null})??null}function Nle(e){return e.replaceAll("'","''")}function Dv(e,t){const i=t==null?void 0:t.where;return i?`(${e}) AND (${i})`:e}function Gje({currentTerm:e,field:t,filter:i,exactMatch:r,url:n,type:o}){const c=t==null?void 0:t.type,y=t==null?void 0:t.name;if(c==="string"||c==="date"||c==="global-id"){const v=Fje.test(n??""),_=v&&Uje(e)?"N":"";return Dv(r&&o==="search"?`${y} = ${_}'${e}'`:v?`${y} LIKE ${_}${`'${e}%'`}`:`${`LOWER(${y})`} LIKE ${_}${`'${e.toLowerCase()}%'`}`,i)}if(c==="oid"||c==="small-integer"||c==="integer"||c==="single"||c==="double"){const v=Number(e);return isNaN(v)?null:Dv(`${y} = ${v}`,i)}return Dv(`${y} = ${e}`,i)}function qje(e,t){return e?` OR (${t})`:`(${t})`}function Fle({searchTerm:e,layer:t,searchFields:i,filter:r,exactMatch:n,query:o,type:c}){const{definitionExpression:y,url:v}=t;let _="";return!o.fullText&&e&&i&&i.forEach(I=>{var R;const $=t.getField(I),A=(R=t.getFieldDomain)==null?void 0:R.call(t,I,{excludeImpliedDomains:we("esri-widget-legacy-field-domain-calculation")}),k=(A&&A.type==="coded-value"?Bje(A,e,n):null)||e||null;if(k!==null){const N=Gje({currentTerm:k,field:$,filter:r,exactMatch:n,url:v,type:c});N&&(_+=qje(_,N))}}),y&&_?`(${y}) AND (${_})`:y||_}function Hje(e,t){let i=null;const{codedValues:r}=e;return r&&r.length&&r.some(n=>n.code===t&&(i=n.name,!0)),i}function Wje(e,t){return e[t]??e[Object.keys(e).find(i=>i.toLowerCase()===t.toLowerCase())]}function Dle(e,t,i){var c;const r=e.sourceLayer,{attributes:n}=e,o=(c=r.getFieldDomain)==null?void 0:c.call(r,i,{feature:e,excludeImpliedDomains:we("esri-widget-legacy-field-domain-calculation")});if(t)return mn(t,n);if(i&&n){const y=r.getField(i),v=Wje(n,i);return v==null?"":o&&o.type==="coded-value"?Hje(o,v)??"":(y==null?void 0:y.type)==="date"?ro(new Date(v)):typeof v=="number"?v.toString():typeof v!="string"?"":v.trim()}return""}function Jje(e,t,i,r){const n=e.sourceLayer,{attributes:o}=e,{objectIdField:c}=n,y=c?o[c]:null;return{text:Dle(e,t.suggestionTemplate,r),key:y,sourceIndex:i}}function Zje(e,t,i,r){return e.features.map(n=>Jje(n,t,i,r))}function Kje(e){return e!=null&&e.minScale!=null&&e.maxScale!=null}function Yje(e,t,i,r,n,o,c){const y=e.clone(),v=e.sourceLayer,_=v==null?void 0:v.objectIdField,I=_?e.attributes[_]:null,$=Dle(e,i.searchTemplate,n);o!=null&&Kje(v)&&(v.minScale&&v.minScale<o?o=v.minScale:v.maxScale&&v.maxScale>o&&(o=v.maxScale));const A=y.geometry?qR(y.geometry,t??void 0,o??void 0):void 0,k=typeof c=="number"&&A?_7(le(A),t??void 0,c):A,R=e.clone();return k!=null&&(R.geometry=Os.fromExtent(k)),{extent:k,target:R,feature:y,key:I,name:$,sourceIndex:r}}function Xje(e,t,i,r,n,o,c){return e.features.map(y=>Yje(y,t,i,r,n,o,c))}var $k;let nl=$k=class extends HP{constructor(e){super(e),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(t,i)=>jje({source:this,...t},i),this.getSuggestions=(t,i)=>zje({source:this,...t},i)}set layer(e){this._set("layer",e),e&&e.load().catch(()=>{})}get name(){return this._getLayerTitle()??""}set name(e){this._overrideIfSome("name",e)}clone(){return new $k({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?le(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?le(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var e,t;return((t=(e=this.layer.fieldsIndex)==null?void 0:e.fields.find(i=>i.type==="string"))==null?void 0:t.name)??""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:e,searchFields:t}=this;return e.loaded?`: ${(t||[this._getDisplayField()]).map(i=>{const r=e.getField(i);return(r==null?void 0:r.alias)||i}).join(", ")}`:""}_getLayerTitle(){const{layer:e}=this;if(!e)return;const{title:t}=e;return t?`${t}${this._getSearchFieldsString()}`:void 0}};m([w({json:{read:{source:"field.name"},write:{target:"field.name"}}})],nl.prototype,"displayField",void 0),m([w({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],nl.prototype,"exactMatch",void 0),m([w({value:null})],nl.prototype,"layer",null),m([w()],nl.prototype,"name",null),m([w({type:[String],json:{write:!0}})],nl.prototype,"orderByFields",void 0),m([w()],nl.prototype,"searchFields",void 0),m([w()],nl.prototype,"searchTemplate",void 0),m([w()],nl.prototype,"suggestionTemplate",void 0),nl=$k=m([H("esri.widgets.Search.LayerSearchSource")],nl);const Dm=nl;function Qje(e){return!!e&&typeof e.x=="number"&&typeof e.y=="number"}function eze(e){return e&&typeof e.xmin=="number"&&typeof e.ymin=="number"&&typeof e.xmax=="number"&&typeof e.ymax=="number"}let id=class extends be{constructor(t){super(t),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};m([w({type:String,json:{write:!0}})],id.prototype,"address",void 0),m([w({type:Object,json:{write:!0}})],id.prototype,"attributes",void 0),m([w({type:Ut,json:{write:!0}})],id.prototype,"extent",void 0),m([w({type:st,json:{write:!0}})],id.prototype,"location",void 0),m([w({type:Number,json:{write:!0}})],id.prototype,"score",void 0),id=m([H("esri.rest.support.AddressCandidate")],id);const jle=id,JP={type:String,json:{read:{source:"token"},write:{target:"token"}}};let kn=class extends be{constructor(t){super(t),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};m([w({type:Object,json:{write:!0}})],kn.prototype,"address",void 0),m([w(JP)],kn.prototype,"apiKey",void 0),m([w({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],kn.prototype,"categories",void 0),m([w({type:String,json:{write:!0}})],kn.prototype,"countryCode",void 0),m([w({type:Boolean,json:{write:!0}})],kn.prototype,"forStorage",void 0),m([w({type:st,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],kn.prototype,"location",void 0),m([w({type:String,json:{write:!0}})],kn.prototype,"locationType",void 0),m([w({type:String,json:{write:!0}})],kn.prototype,"magicKey",void 0),m([w({type:Number,json:{write:!0}})],kn.prototype,"maxLocations",void 0),m([w({type:[String],json:{write:{writer:(e,t)=>{t.outFields=e?e.join(","):null}}}})],kn.prototype,"outFields",void 0),m([w({type:rt,json:{read:{source:"outSR"},write:{target:"outSR"}}})],kn.prototype,"outSpatialReference",void 0),m([w({type:Ut,json:{write:{writer:(e,t)=>{const i=e?e.shiftCentralMeridian():null;t.searchExtent=i}}}})],kn.prototype,"searchExtent",void 0),kn=m([H("esri.rest.support.AddressToLocationsParameters")],kn),kn.from=qi(kn);const zle=kn;async function tze(e,t,i){t=zle.from(t);const r=Wg(e),{address:n,...o}=t.toJSON(),c={...n,...o,f:"json"},y=tT({...r.query,...c}),v=eT(y,i),_=`${r.path}/findAddressCandidates`;return Et(_,v).then(ize)}function ize({data:e}){if(!e)return[];const{candidates:t,spatialReference:i}=e;return t?t.map(r=>{if(!r)return;const{extent:n,location:o}=r,c=!n||eze(n);return Qje(o)&&c?(n&&(n.spatialReference=i),o&&(o.spatialReference=i),jle.fromJSON(r)):void 0}):[]}let xc=class extends be{constructor(t){super(t),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};m([w(JP)],xc.prototype,"apiKey",void 0),m([w({type:st,json:{write:{writer:(e,t)=>{const i=e?e.clone().normalize():null,r=i!==void 0;t.location=r?i:null}}}})],xc.prototype,"location",void 0),m([w({type:String,json:{write:!0}})],xc.prototype,"locationType",void 0),m([w({type:rt,json:{read:{source:"outSR"},write:{target:"outSR"}}})],xc.prototype,"outSpatialReference",void 0),xc=m([H("esri.rest.support.LocationToAddressParameters")],xc),xc.from=qi(xc);const Vle=xc;async function rze(e,t,i){t=Vle.from(t);const r=Wg(e),n={...t.toJSON(),f:"json"},o=tT({...r.query,...n}),c=eT(o,i),y=`${r.path}/reverseGeocode`;return Et(y,c).then(nze)}function nze({data:e}){if(!e)return;const{address:t,location:i}=e,r=(t==null?void 0:t.Match_addr)||"";return jle.fromJSON({address:r,attributes:t||{},location:i,score:100})}let jm=class extends be{constructor(t){super(t),this.isCollection=null,this.magicKey=null,this.text=null}};m([w({type:Boolean,json:{write:!0}})],jm.prototype,"isCollection",void 0),m([w({type:String,json:{write:!0}})],jm.prototype,"magicKey",void 0),m([w({type:String,json:{write:!0}})],jm.prototype,"text",void 0),jm=m([H("esri.rest.support.SuggestionCandidate")],jm);const sze=jm;let Eo=class extends be{constructor(t){super(t),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};m([w(JP)],Eo.prototype,"apiKey",void 0),m([w({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],Eo.prototype,"categories",void 0),m([w({type:String,json:{write:!0}})],Eo.prototype,"countryCode",void 0),m([w({type:st,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],Eo.prototype,"location",void 0),m([w({type:Number,json:{write:!0}})],Eo.prototype,"maxSuggestions",void 0),m([w({type:rt,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Eo.prototype,"outSpatialReference",void 0),m([w({type:Ut,json:{write:{writer:(e,t)=>{const i=e?e.shiftCentralMeridian():null;t.searchExtent=JSON.stringify(i)}}}})],Eo.prototype,"searchExtent",void 0),m([w({type:String,json:{write:!0}})],Eo.prototype,"text",void 0),Eo=m([H("esri.rest.support.SuggestLocationsParameters")],Eo),Eo.from=qi(Eo);const Ule=Eo;async function oze(e,t,i){const r=Wg(e),n={...(t=Ule.from(t)).toJSON(),f:"json"},o=tT({...r.query,...n}),c=eT(o,i),y=`${r.path}/suggest`;return Et(y,c).then(aze)}function aze(e){const{data:t}=e;if(!t)return[];const{suggestions:i}=t;return i?i.map(r=>new sze(r)):[]}const lze="Single Line Input",uze=3e5;function cze(e,t){return e.location?yze(e,t):mze(e,t)}function Ble(e,t){var r;if(t.localSearchDisabled)return null;const i=e==null?void 0:e.scale;return typeof i=="number"&&i<=uze?(r=e==null?void 0:e.extent)==null?void 0:r.center:null}async function hze(e,t){const{source:i,spatialReference:r,view:n,suggestTerm:o,maxSuggestions:c,sourceIndex:y}=e,v=new Ule,{apiKey:_,url:I}=i,$=Gle(i,n),A=t==null?void 0:t.signal;if(!I)return null;_&&(v.apiKey=_),i.categories&&(v.categories=i.categories),r&&(v.outSpatialReference=r);const k=Ble(n,i);if(k&&(v.location=k),!o.trim())return null;const{prefix:R="",suffix:N=""}=i,D=`${R}${o}${N}`;return v.text=D,$&&(v.searchExtent=$),v.maxSuggestions=c,i.countryCode&&(v.countryCode=i.countryCode),oze(I,v,{signal:A}).then(j=>vze(j,y))}function dze(e){return!!e&&/(?:geocode-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e)}function pze(e){return!!e&&/(?:\/servers\/[\da-z.-]+\/rest\/services\/world\/geocodeserver).*/i.test(e)}function Xq(e){return!!e&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e)}const fze="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";async function yze(e,t){const{source:i,spatialReference:r,location:n,sourceIndex:o,view:c}=e,{apiKey:y,url:v,zoomScale:_,defaultZoomScale:I}=i;if(v==null)return[];const $=c==null?void 0:c.scale,A=t==null?void 0:t.signal,k=new Vle({location:n});y&&(k.apiKey=y),r&&(k.outSpatialReference=r);try{return qle([await rze(v,k,{signal:A})],{sourceIndex:o,scale:$,view:c,zoomScale:_,defaultZoomScale:I})}catch{return[]}}function Gle(e,t){const{filter:i,withinViewEnabled:r}=e,n=t==null?void 0:t.scale,o=t==null?void 0:t.extent,c=i==null?void 0:i.geometry;return(c?qR(c,t??void 0,n):void 0)||(r&&o?o:void 0)}async function mze(e,t){var ee;const{source:i,suggestResult:r,spatialReference:n,view:o,maxResults:c,sourceIndex:y}=e,v=i==null?void 0:i.zoomScale,_=i==null?void 0:i.defaultZoomScale;if(!((ee=r.text)==null?void 0:ee.trim()))return null;const $=!r.key&&i.prefix?i.prefix:"",A=!r.key&&i.suffix?i.suffix:"",k=`${$}${r.text}${A}`,R=new zle,{apiKey:N,url:D}=i,j=o==null?void 0:o.scale,z=Gle(i,o),U=t==null?void 0:t.signal;if(N&&(R.apiKey=N),!D)return null;i.categories&&(R.categories=i.categories),i.locationType&&(R.locationType=i.locationType),n&&(R.outSpatialReference=n);const W=Ble(o,i);W&&(R.location=W),R.maxLocations=c,z&&(R.searchExtent=z),i.countryCode&&(R.countryCode=i.countryCode);const{key:Q}=r,K=`${Q}`;return Q&&(R.magicKey=K),R.address={},R.address[i.singleLineFieldName||lze]=k,i.outFields&&(R.outFields=i.outFields),tze(D,R,{signal:U}).then(ie=>qle(ie,{key:K,scale:j,sourceIndex:y,view:o,zoomScale:v,defaultZoomScale:_}))}function gze(e,t){return{text:e.text,key:e.magicKey,sourceIndex:t}}function vze(e,t){return e.map(i=>gze(i,t))}function wze(e,t){const{key:i,scale:r,sourceIndex:n,view:o,zoomScale:c,defaultZoomScale:y}=t,{attributes:v,extent:_,location:I,address:$}=e,A=new er({geometry:I,attributes:v}),k=_||I,R=k?qR(k,o??void 0,r??void 0):void 0,N=R?typeof c=="number"?_7(R,o??void 0,c):typeof y=="number"&&(k==null?void 0:k.type)==="point"?_7(R,o??void 0,y):R:null,D=I?`${I.x},${I.y}`:"",j=$||D,z=A.clone();return N!=null&&(z.geometry=Os.fromExtent(N)),{extent:N,feature:A,target:z,key:i,name:j,sourceIndex:n}}function qle(e,t){return e.filter(Boolean).map(i=>wze(i,t))}var Ek;let rs=Ek=class extends HP{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(t,i)=>cze({source:this,...t},i),this.getSuggestions=(t,i)=>hze({source:this,...t},i)}clone(){return new Ek({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?le(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?le(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};m([w()],rs.prototype,"apiKey",void 0),m([w()],rs.prototype,"categories",void 0),m([w()],rs.prototype,"countryCode",void 0),m([w({json:{write:!0}})],rs.prototype,"defaultZoomScale",void 0),m([w()],rs.prototype,"localSearchDisabled",void 0),m([w()],rs.prototype,"locationType",void 0),m([w({json:{write:!0}})],rs.prototype,"name",void 0),m([w({json:{write:!0}})],rs.prototype,"placeholder",void 0),m([w()],rs.prototype,"searchTemplate",void 0),m([w({json:{write:!0}})],rs.prototype,"singleLineFieldName",void 0),m([w({json:{read:{source:"suggest"},write:{target:"suggest"}}})],rs.prototype,"suggestionsEnabled",void 0),m([w({json:{write:!0}})],rs.prototype,"url",void 0),m([w({json:{write:!0}})],rs.prototype,"zoomScale",void 0),rs=Ek=m([H("esri.widgets.Search.LocatorSearchSource")],rs);const Hle=rs,Wle=()=>_e.getLogger("esri.widgets.support.geolocationUtils"),bze={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function _ze(){const e=!!we("esri-geolocation");return e||Wle().warn("geolocation-unsupported","Geolocation unsupported."),e}function Sze(){const e=window.isSecureContext;return e||Wle().warn("insecure-context","Geolocation requires a secure origin."),e}function Mk(){return _ze()&&Sze()}function Jle(e){return e??(e=bze),new Promise((i,r)=>{setTimeout(()=>r(new ne("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(i,r,e??void 0)})}function Zle(e,t){const{position:i,view:r}=e,n=xze(i),o=n==null?void 0:n.coords;if(!o)throw new ne("geometry-service:no-coords","Geolocation has no coordinates");return Tze(Ize(o),r,t)}function xze(e){const t=e&&e.coords||{},i={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed};return e&&{coords:i,timestamp:e.timestamp}}function Ize({longitude:e,latitude:t,altitude:i}){return new st({longitude:e,latitude:t,z:i||void 0,spatialReference:{wkid:4326}})}function Tze(e,t,i){if(!t)return Promise.resolve(e);const r=t.spatialReference;return r.isWGS84?Promise.resolve(e):r.isWebMercator?Promise.resolve(Au(e)):$ze(i).then(n=>{if(!n)throw new ne("geometry-service:missing-url","Geometry service URL is missing");const o=new GP({geometries:[e],outSpatialReference:r});return wle(n,o,i).then(c=>c[0])})}function $ze(e){if(qt.geometryServiceUrl)return Promise.resolve(qt.geometryServiceUrl);const t=Cr.getDefault();return t.load(e).catch(()=>{}).then(()=>{var i,r;return(r=(i=t.helperServices)==null?void 0:i.geometry)==null?void 0:r.url})}function Yn(e,t){return e.hasOwnProperty(t)&&e[t]!=null&&e[t]!==""}const Eze=()=>_3("esri/widgets/Search/t9n/Search"),Qq="highlight",$x=Oe.ofType({key:e=>e.layer?"layer":"locator",base:HP,typeMap:{layer:Dm,locator:Hle}}),eH=rt.WGS84,Mze="esri/images/search/search-symbol-32.png",Aze=/<[\s\S]*?>/g,zm=-1;let $t=class extends sT(qo.EventedMixin(Ve)){constructor(t){super(t),this._gotoController=null,this._searching=null,this._updatingPromise=null,this._createdFeatureLayers=[],this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new $x,this.defaultSymbols={point:new Hg({url:jt(Mze),size:24,width:24,height:24}),polyline:new vs({color:[130,130,130,1],width:2}),polygon:new kl({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=Cr.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new $x,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const t=async()=>{const i=await Eze();this.messages=i,this.defaultPopupTemplate=new mp({title:i.searchResult,content:"{Match_addr}"})};t(),this.addHandles([ge(()=>[this.includeDefaultSources,this.view,this.portal],()=>this._update(),qe),g3(t)])}destroy(){this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics()}get activeSource(){return this.allSources.at(this.activeSourceIndex)??null}get activeSourceIndex(){return this.allSources.length===1||!this.searchAllEnabled?0:zm}set activeSourceIndex(t){this._overrideIfSome("activeSourceIndex",t)}get allPlaceholder(){var t;return(t=this.messages)==null?void 0:t.allPlaceholder}set allPlaceholder(t){this._overrideIfSome("allPlaceholder",t)}get allSources(){const{sources:t,defaultSources:i,includeDefaultSources:r}=this,n=typeof r=="function"?r.call(null,{sources:t,defaultSources:i}):r?i.concat(t):t,o=this._get("allSources")||new $x;return o.removeAll(),o.addMany(n.filter(Boolean)),o}get locationEnabled(){return this._get("locationEnabled")||Mk()}set locationEnabled(t){if(t===void 0)return void this._clearOverride("locationEnabled");const i=Mk();if(t&&!i){const r=new ne("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});_e.getLogger(this).error(r)}this._override("locationEnabled",!!t&&i)}get placeholder(){const{allSources:t,activeSourceIndex:i,allPlaceholder:r}=this;if(i===zm)return r??"";const n=t.at(i);return(n==null?void 0:n.placeholder)??""}set searchTerm(t){this._set("searchTerm",t||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==t&&this._set("selectedSuggestion",null),t===""&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":this.allSources.length===0?"disabled":"ready"}get updating(){return this._updatingPromise!=null}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup();const{view:t,resultGraphic:i}=this;t&&i&&t.graphics.remove(i),this._set("resultGraphic",null)}search(t,i){this.emit("search-start"),this.clearGraphics();const r=this._createSuggestionForSearch(t),n=(async()=>{var o;try{await this.when();const c=await this._getResultsFromSources(r,i);if((o=i==null?void 0:i.signal)!=null&&o.aborted)return null;const y={activeSourceIndex:this.activeSourceIndex,searchTerm:r.text??"",numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(y,c,r);const v=this._getFirstResult(y.results),_=r.location&&v?v.name:r.text,I=_==null?void 0:_.replace(Aze,"");return this._set("searchTerm",I),(r.key&&typeof r.sourceIndex=="number"||r.location)&&this._set("selectedSuggestion",r),this._set("results",y.results),this._set("resultCount",y.results.reduce(($,A)=>{var k;return $+(((k=A.results)==null?void 0:k.length)??0)},0)),this.emit("search-complete",y),await this._selectFirstResult(v),y}finally{this._clearSearching()}})();return this._searching=n,n}async searchNearby(t){if(!this.locationEnabled){const r=new ne("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});throw _e.getLogger(this).error(r),r}const i=(async()=>{try{const r=await Jle(),n=await Zle({position:r,view:this.view},t);return await this.search(n,t)}finally{this._clearSearching()}})();return this._searching=i,i}async select(t){if(this.clearGraphics(),!t){const ue=new ne("select:missing-parameter","Cannot select without a searchResult.",{searchResult:t});throw _e.getLogger(this).error(ue),ue}const{view:i}=this,r=Yn(t,"sourceIndex")?t.sourceIndex:this._getSourceIndexOfResult(t),n=r!=null?this.allSources.at(r):null;if(!n){const ue=new ne("select:missing-source","Cannot select without a source.",{source:n});throw _e.getLogger(this).error(ue),ue}const o=n instanceof Dm?this._getLayerSourcePopupTemplate(n):n.popupTemplate,c=n.resultSymbol||this._getDefaultSymbol(t),y=Yn(n,"resultGraphicEnabled")?n.resultGraphicEnabled:this.resultGraphicEnabled,v=Yn(n,"autoNavigate")?n.autoNavigate:this.autoNavigate,_=Yn(n,"popupEnabled")?n.popupEnabled:this.popupEnabled,I=_?o||this.popupTemplate||this.defaultPopupTemplate:null,{feature:$}=t;if(!$){const ue=new ne("select:missing-feature","Cannot select without a feature.",{feature:$});throw _e.getLogger(this).error(ue),ue}const{attributes:A,geometry:k,layer:R,sourceLayer:N}=$,D=k?R2(k):null,j={layerViewQuery:this._getLayerView($),elevationQuery:i&&D!=null?MAe(D,i):Promise.resolve(D)},z=await eo(j),U=z.layerViewQuery.value,W=z.elevationQuery.value;c instanceof Q0&&(c.text=t.name);const Q=i&&v?t.target||t.extent:null;await(Q!=null?this._goToSearchResult(Q):Promise.resolve());const ee=U?$:new er({geometry:k,symbol:c,attributes:A,layer:R,sourceLayer:N,popupTemplate:I}),ie=i==null?void 0:i.popup,ae=ie&&_&&ee.getEffectivePopupTemplate(ie.defaultPopupTemplateEnabled);return ae&&await i.openPopup({features:[ee],location:W}),U&&uk(U)&&!ae&&this._highlightFeature({graphic:ee,layerView:U}),!U&&y&&i&&i.graphics.push(ee),this._setResultFloor(t),this._set("selectedResult",t),this._set("resultGraphic",ee),this.emit("select-result",{result:t,source:n,sourceIndex:r}),t}async suggest(t,i,r){const n=t||this.searchTerm;this.emit("suggest-start",{searchTerm:n}),await this._suggestTimer(i,r);const o=await this._suggestImmediate(n,r);return this._set("suggestions",o==null?void 0:o.results),this._set("suggestionCount",(o==null?void 0:o.results.reduce((c,y)=>{var v;return c+(((v=y.results)==null?void 0:v.length)??0)},0))??null),this.emit("suggest-complete",o),o}async when(){await Ou(()=>!this.updating)}async _update(){const{portal:t,view:i}=this;if(this.includeDefaultSources){const r=this._updatingPromise=eo([t==null?void 0:t.load(),i==null?void 0:i.when()]);if(this.destroyed||(await r,r!==this._updatingPromise))return}await Ou(()=>this.messages),this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){var i,r;const t=(r=(i=this.portal)==null?void 0:i.helperServices)==null?void 0:r.geocode;return t?t.map(n=>{var v;if(n.placefinding===!1)return;const o=qt.apiKey&&Xq(n.url)?{url:fze}:null,c=Hle.fromJSON({...n,...o}),y=c.url;if(Xq(y)||pze(y)||dze(y)){const _=c.outFields??["Addr_type","Match_addr","StAddr","City"],I=(c.placeholder||((v=this.messages)==null?void 0:v.placeholder))??"",$=typeof c.defaultZoomScale=="number"?c.defaultZoomScale:2500;c.singleLineFieldName="SingleLine",c.outFields=_,c.placeholder=I,c.defaultZoomScale=$}return c.singleLineFieldName?c:void 0}).filter(Ar):[]}_destroyFeatureLayers(){this._createdFeatureLayers.forEach(t=>t==null?void 0:t.destroy()),this._createdFeatureLayers=[]}_getLayerSources(t,i){var n;const r=(n=this.view)==null?void 0:n.map;return t.map(o=>{const c=r.findLayerById(o.id);if(!c)return;const y=this._getLayerJSON(o),v=Dm.fromJSON(y);return v.placeholder=i,this._getLayer(c,y).then(_=>{v.layer=_}),v}).filter(Ar).toArray()}_getTableSources(t,i){var n;const r=(n=this.view)==null?void 0:n.map;return t.map(o=>{if(!o.id)return;const c=r.findTableById(o.id);if(!c)return;const y=this._getLayerJSON(o),v=Dm.fromJSON(y);return v.placeholder=i,this._getLayer(c,y).then(_=>{v.layer=_}),v}).filter(Ar).toArray()}_convertApplicationProperties(){var y,v,_;const t=(y=this.view)==null?void 0:y.map,i=(_=(v=t==null?void 0:t.applicationProperties)==null?void 0:v.viewing)==null?void 0:_.search;if(!i)return[];const{enabled:r,hintText:n,layers:o,tables:c}=i;return r?[...this._getLayerSources(o,n),...this._getTableSources(c,n)]:[]}async _getSubLayer(t,i){var o;if(await t.load(),!t.allSublayers)throw new Error;const r=t.allSublayers.find(c=>c.id===i.subLayer);if(!r)throw new Error;const n=await((o=r.createFeatureLayer)==null?void 0:o.call(r));if(!n)throw new Error;return this._createdFeatureLayers.push(n),n}async _getBuildingSubLayer(t,i){await t.load();const r=t.allSublayers.find(n=>n.id===i.subLayer);if((r==null?void 0:r.type)!=="building-component")throw new Error;if(await r.load(),r.associatedLayer==null)throw new Error;return await r.associatedLayer.load(),r}async _getLayer(t,i){if(t.type==="feature"||t.type==="scene"||t.type==="csv"||t.type==="geojson"||t.type==="ogc-feature")return t;if(t.type==="map-image")try{return await this._getSubLayer(t,i)}catch{const n=new ne("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:t});return _e.getLogger(this).error(n),null}return t.type==="building-scene"?this._getBuildingSubLayer(t,i):null}_getLayerJSON(t){return typeof t.toJSON=="function"?t.toJSON():t}_updateDefaultSources(){const{defaultSources:t,includeDefaultSources:i}=this;this._destroyFeatureLayers(),t.removeAll(),i&&t.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var o;const t=(o=this.view)==null?void 0:o.popup,{resultGraphic:i}=this;if(!t||!i)return;const r="selectedFeature"in t,n=r?t.selectedFeature:null;r&&n&&n===i&&t.close()}_suggestTimer(t,i){const r=t??this.suggestionDelay;return G0(r,null,i==null?void 0:i.signal)}_createLocationForSearch(t){return t instanceof er&&t.geometry?R2(t.geometry):t instanceof st?t:Array.isArray(t)&&t.length===2?new st({longitude:t[0],latitude:t[1]}):null}_createSuggestionForSearch(t){if(t&&Yn(t,"key")&&Yn(t,"text")&&Yn(t,"sourceIndex"))return t;const i=this._createLocationForSearch(t),r=typeof t=="string"?t:this.searchTerm,{selectedSuggestion:n,selectedResult:o}=this,c=!t&&n&&o,y=c&&n.key===o.key&&n.sourceIndex===o.sourceIndex,v=c&&n.location;return y||v?n:{location:i,text:i?"":r,sourceIndex:null,key:null}}_getFirstResult(t){return p2(t,({results:i})=>i==null?void 0:i[0])??null}async _selectFirstResult(t){return this.autoSelect&&t?this.select(t):null}async _suggestImmediate(t,i){var o;await this.when();const r=await this._getSuggestionsFromSources(t,i);if((o=i==null?void 0:i.signal)!=null&&o.aborted)return null;const n={activeSourceIndex:this.activeSourceIndex,searchTerm:t??"",numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(n,r),n}_formatSourceResponse(t,i,r){const n=(i==null?void 0:i.value)||[],o=i==null?void 0:i.error,c=this.allSources.at(r);if(o){const y={sourceIndex:r,source:c,error:o};t.errors.push(y),_e.getLogger(this).error(o),t.numErrors++}else{const y={sourceIndex:r,source:c,results:n};t.results.push(y),t.numResults+=n.length}}_formatResponse(t,i,r){if(i)if(t.activeSourceIndex===zm){const n=r&&Yn(r,"sourceIndex")&&r.sourceIndex!==-1?r.sourceIndex:void 0;i.forEach((o,c)=>{const y=n!==void 0?n:c;this._formatSourceResponse(t,o,y)})}else this._formatSourceResponse(t,i[0],t.activeSourceIndex)}async _getResultsFromSources(t,i){const{allSources:r}=this,n=!t.location&&Yn(t,"sourceIndex")?t.sourceIndex:this.activeSourceIndex,o=[];if(!r.length){const c=new ne("search:no-sources-defined","At least one source is required.",{allSources:r});throw _e.getLogger(this).error(c),c}return n===zm?r.forEach((c,y)=>{o.push(this._getResultsFromSource(t,y,i))}):o.push(this._getResultsFromSource(t,n,i)),eo(o)}async _getSuggestionsFromSources(t,i){const{allSources:r,activeSourceIndex:n}=this,o=[];if(!r.length){const c=new ne("suggest:no-sources-defined","At least one source is required.",{allSources:r});throw _e.getLogger(this).error(c),c}return n===zm?r.forEach((c,y)=>{o.push(this._getSuggestionsFromSource(t,y,i))}):o.push(this._getSuggestionsFromSource(t,n,i)),eo(o)}async _getResultsFromSource(t,i,r){var I,$;const n=i!=null?this.allSources.at(i):null;if(!n)return null;const{location:o=null}=t,c=((I=this.view)==null?void 0:I.spatialReference)||eH,y=Yn(n,"maxResults")?n.maxResults:this.maxResults,v=!!(n instanceof Dm&&Yn(n,"exactMatch"))&&n.exactMatch,{view:_}=this;return($=n.getResults)==null?void 0:$.call(n,{view:_,sourceIndex:i,location:o,suggestResult:t,spatialReference:c,exactMatch:v,maxResults:y},r)}async _getSuggestionsFromSource(t,i,r){var v,_;const n=this.allSources.at(i);if(!n)return null;t??(t="");const o=Yn(n,"suggestionsEnabled")?n.suggestionsEnabled:this.suggestionsEnabled,c=t==null?void 0:t.length,y=Yn(n,"minSuggestCharacters")?n.minSuggestCharacters:this.minSuggestCharacters;if(o&&t.trim()&&c>=y){const I=((v=this.view)==null?void 0:v.spatialReference)||eH,$=Yn(n,"maxSuggestions")?n.maxSuggestions:this.maxSuggestions,{view:A}=this,k=!!(n instanceof Dm&&Yn(n,"exactMatch"))&&n.exactMatch;return(_=n.getSuggestions)==null?void 0:_.call(n,{view:A,sourceIndex:i,suggestTerm:t,spatialReference:I,maxSuggestions:$,exactMatch:k},r)}return null}_getLayerSourcePopupTemplate(t){const{layer:i}=t;if(i)return Yn(t,"popupTemplate")?t.popupTemplate:i.popupTemplate}_getSourceIndexOfResult(t){return p2(this.results??[],({results:i,sourceIndex:r})=>(i==null?void 0:i.includes(t))?r:null)??null}async _goToSearchResult(t){this._abortGoTo();const i=new AbortController;this._gotoController=i;const r={target:{target:t},options:{signal:i.signal}};t||(r.options.animate=!1),await this.callGoTo(r),this._gotoController=null}_getDefaultSymbol(t){var n;const{defaultSymbols:i}=this,r=(n=t.feature)==null?void 0:n.geometry;if(r==null)return null;switch(r.type){case"point":case"multipoint":return i.point;case"polyline":return i.polyline;case"extent":case"polygon":return i.polygon;default:return null}}_removeHighlight(){this.removeHandles(Qq)}async _getLayerView(t){var n,o;const{view:i}=this;if(!t||!i||((n=t.layer)==null?void 0:n.type)==="building-component"||((o=t.layer)==null?void 0:o.type)==="subtype-sublayer")return null;const{layer:r}=t;return r?(await i.when(),i.whenLayerView(r)):null}_highlightFeature(t){const{graphic:i,layerView:r}=t,{attributes:n,layer:o}=i,{objectIdField:c}=o,y=(c&&(n==null?void 0:n[c]))??null,v=r.highlight(y??i);this.addHandles(v,Qq)}_setResultFloor(t){var o,c,y;const{view:i}=this,r=(o=t.feature)==null?void 0:o.attributes,n=(c=t.feature)==null?void 0:c.sourceLayer;if(n&&"floorInfo"in n&&((y=n==null?void 0:n.floorInfo)!=null&&y.floorField)&&r){const v=r[n.floorInfo.floorField];i==null||i.emit("select-result-floor",v)}}};$t.ALL_INDEX=zm,m([w()],$t.prototype,"_searching",void 0),m([w()],$t.prototype,"_updatingPromise",void 0),m([w({readOnly:!0,value:null})],$t.prototype,"activeSource",null),m([w()],$t.prototype,"activeSourceIndex",null),m([w()],$t.prototype,"allPlaceholder",null),m([w({readOnly:!0})],$t.prototype,"allSources",null),m([w()],$t.prototype,"autoNavigate",void 0),m([w()],$t.prototype,"autoSelect",void 0),m([w()],$t.prototype,"defaultPopupTemplate",void 0),m([w({readOnly:!0})],$t.prototype,"defaultSources",void 0),m([w()],$t.prototype,"defaultSymbols",void 0),m([w()],$t.prototype,"includeDefaultSources",void 0),m([w()],$t.prototype,"locationEnabled",null),m([w()],$t.prototype,"maxInputLength",void 0),m([w()],$t.prototype,"maxResults",void 0),m([w()],$t.prototype,"maxSuggestions",void 0),m([w()],$t.prototype,"messages",void 0),m([w()],$t.prototype,"minSuggestCharacters",void 0),m([w({readOnly:!0})],$t.prototype,"placeholder",null),m([w()],$t.prototype,"popupEnabled",void 0),m([w({type:mp})],$t.prototype,"popupTemplate",void 0),m([w({type:Cr})],$t.prototype,"portal",void 0),m([w()],$t.prototype,"resultCount",void 0),m([w()],$t.prototype,"resultGraphicEnabled",void 0),m([w({readOnly:!0})],$t.prototype,"resultGraphic",void 0),m([w({readOnly:!0})],$t.prototype,"results",void 0),m([w({readOnly:!0})],$t.prototype,"selectedSuggestion",void 0),m([w()],$t.prototype,"searchAllEnabled",void 0),m([w({readOnly:!0})],$t.prototype,"selectedResult",void 0),m([w()],$t.prototype,"searchTerm",null),m([w({type:$x})],$t.prototype,"sources",void 0),m([w({readOnly:!0})],$t.prototype,"state",null),m([w()],$t.prototype,"suggestionDelay",void 0),m([w()],$t.prototype,"suggestionCount",void 0),m([w({readOnly:!0})],$t.prototype,"suggestions",void 0),m([w()],$t.prototype,"suggestionsEnabled",void 0),m([w({readOnly:!0})],$t.prototype,"updating",null),m([w()],$t.prototype,"view",void 0),m([w()],$t.prototype,"clear",null),$t=m([H("esri.widgets.Search.SearchViewModel")],$t);const m1=$t;let rd=class extends yi{constructor(t,i){super(t,i),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}destroy(){this.viewModel=null}render(){const t={[kp.showMoreResults]:this.showMoreResultsOpen};return B("div",{class:this.classes(kp.base,ze.widget)},B("div",{class:this.classes(kp.moreResults,t),key:"esri-search-renderer__container"},this._renderSearchResultName(),this._renderMoreResults()))}_renderMoreResults(){return B("div",{key:"esri-search-renderer__more-results"},this._renderMoreResultsButton(),this._renderMoreResultsLists())}_renderSearchResultName(){var r;const t=(r=this.viewModel)==null?void 0:r.selectedResult,i=(t==null?void 0:t.name)||"";return B("div",{class:kp.moreResultsItem,key:"esri-search-renderer__result-name"},i)}_renderMoreResultsLists(){const{viewModel:t}=this;if(!t)return[];const i=t.results;if((t.resultCount??0)<2)return null;const r=i==null?void 0:i.map(n=>this._renderMoreResultsList(n));return B("div",{class:kp.moreResultsList,key:"esri-search-renderer__more-results-container"},r)}_renderMoreResultsButton(){const{messages:t,viewModel:i}=this;return i?(i.resultCount??0)<2?null:B("div",{class:kp.moreResultsItem,key:"esri-search-renderer__more-results-button"},B("a",{bind:this,class:ze.anchor,href:"#",onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?t.hideMoreResults:t.showMoreResults)):null}_renderMoreResultsHeader(t,i){return B("div",{class:kp.moreResultsListHeader,key:`esri-search-result-renderer__header-${i}`},t)}_renderMoreResultsList(t){var $,A,k;const{results:i}=t,r=(i==null?void 0:i.length)??0,n=r>0,o=($=this.viewModel)==null?void 0:$.selectedResult,c=r===1&&i[0]===o,y=this._getSourceName(t.source,t.sourceIndex),v=(((k=(A=this.viewModel)==null?void 0:A.results)==null?void 0:k.length)??0)>1&&!c?this._renderMoreResultsHeader(y,t.sourceIndex):null,_=n&&i.map((R,N)=>this._renderMoreResultsListItem(R,N)),I=n&&!c?B("ul",{key:`esri-search-result-renderer__list-${t.sourceIndex}`},_):null;return n?B("div",{key:`esri-search-result-renderer__results-${t.sourceIndex}`},v,I):null}_renderMoreResultsListItem(t,i){var n;const r=(n=this.viewModel)==null?void 0:n.selectedResult;return t!==r?B("li",{key:`esri-search-result-renderer__list-item-${i}`},B("a",{bind:this,class:ze.anchor,"data-result":t,href:"#",onclick:this._selectResultClick,onkeydown:this._selectResultClick,tabIndex:0},t.name)):null}_showMoreResultsClick(t){var r,n;t.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const i=(n=(r=this.viewModel)==null?void 0:r.view)==null?void 0:n.popup;i&&"reposition"in i&&i.reposition()}_selectResultClick(t){var r;t.preventDefault();const i=t.currentTarget["data-result"];(r=this.viewModel)==null||r.select(i)}_getSourceName(t,i){return i===m1.ALL_INDEX?this.messages.all:t.name}};m([w(),Ht("esri/widgets/Search/t9n/Search")],rd.prototype,"messages",void 0),m([w()],rd.prototype,"showMoreResultsOpen",void 0),m([w()],rd.prototype,"viewModel",void 0),m([y4()],rd.prototype,"_showMoreResultsClick",null),m([y4()],rd.prototype,"_selectResultClick",null),rd=m([H("esri.widgets.Search.SearchResultRenderer")],rd);const Cze=rd,kze=/<[a-z/][\s\S]*>/i,Lze=(e,t)=>{const i=m0e(t).split(/\s/),r=new RegExp(`(${i.join("|")})`,"gi");return e.replace(r,n=>`<strong>${n}</strong>`)};let At=class extends yi{constructor(t,i){super(t,i),this._activeMenuItemIndex=-1,this._inputNode=null,this._focusAbortController=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new Cze,this._suggestController=null,this._searchController=null,this._locateFailed=!1,this._container=null,this.activeMenu="none",this.disabled=!1,this.messages=null,this.messagesCommon=null,this.viewModel=new m1,this._clearActiveMenu=()=>{this.activeMenu="none"},this._removeActiveMenu=r=>{var o;const n=r.relatedTarget;n&&((o=this._container)!=null&&o.contains(n))||this._clearActiveMenu()},this._renderSearchResultsContent=()=>this._searchResultRenderer,this.addHandles([ge(()=>this.searchTerm,r=>{var n,o;(r&&this.activeMenu==="warning"||!r&&!((o=(n=this.viewModel)==null?void 0:n.selectedSuggestion)!=null&&o.location))&&this._clearActiveMenu()}),tn(()=>{var r;return(r=this.viewModel)==null?void 0:r.allSources},"change",()=>this._watchSourceChanges()),ge(()=>this.activeMenu,()=>this._resetActiveMenuItemIndex(),qe),ge(()=>this.viewModel,r=>this._searchResultRenderer.viewModel=r,qe),ge(()=>this.viewModel.results,()=>this._searchResultRenderer.showMoreResultsOpen=!1),ge(()=>{var r;return(r=this.viewModel)==null?void 0:r.defaultPopupTemplate},r=>{r&&(r.content=this._renderSearchResultsContent)},qe)])}destroy(){var t;this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer=ci(this._searchResultRenderer),(t=this._focusAbortController)==null||t.abort()}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}get activeSource(){var t;return(t=this.viewModel)==null?void 0:t.activeSource}get activeSourceIndex(){return this.viewModel.activeSourceIndex}set activeSourceIndex(t){this.viewModel.activeSourceIndex=t}get allPlaceholder(){return this.viewModel.allPlaceholder}set allPlaceholder(t){this.viewModel.allPlaceholder=t}get allSources(){return this.viewModel.allSources}get autoNavigate(){return this.viewModel.autoNavigate}set autoNavigate(t){this.viewModel.autoNavigate=t}get autoSelect(){return this.viewModel.autoSelect}set autoSelect(t){this.viewModel.autoSelect=t}get defaultSources(){return this.viewModel.defaultSources}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get icon(){return"search"}set icon(t){this._overrideIfSome("icon",t)}get includeDefaultSources(){return this.viewModel.includeDefaultSources}set includeDefaultSources(t){this.viewModel.includeDefaultSources=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get locationEnabled(){return this.viewModel.locationEnabled}set locationEnabled(t){this.viewModel.locationEnabled=t}get maxResults(){return this.viewModel.maxResults}set maxResults(t){this.viewModel.maxResults=t}get maxSuggestions(){return this.viewModel.maxSuggestions}set maxSuggestions(t){this.viewModel.maxSuggestions=t}get minSuggestCharacters(){return this.viewModel.minSuggestCharacters}set minSuggestCharacters(t){this.viewModel.minSuggestCharacters=t}get popupEnabled(){return this.viewModel.popupEnabled}set popupEnabled(t){this.viewModel.popupEnabled=t}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(t){this.viewModel.popupTemplate=t}get portal(){var t;return(t=this.viewModel)==null?void 0:t.portal}set portal(t){this.viewModel&&(this.viewModel.portal=t)}get resultGraphic(){return this.viewModel.resultGraphic}set resultGraphic(t){this.viewModel.resultGraphic=t}get resultGraphicEnabled(){return this.viewModel.resultGraphicEnabled}set resultGraphicEnabled(t){this.viewModel.resultGraphicEnabled=t}get results(){return this.viewModel.results}get searchAllEnabled(){return this.viewModel.searchAllEnabled}set searchAllEnabled(t){this.viewModel.searchAllEnabled=t}get searchTerm(){return this.viewModel.searchTerm}set searchTerm(t){this.viewModel.searchTerm=t}get selectedResult(){return this.viewModel.selectedResult}get sources(){return this.viewModel.sources}set sources(t){this.viewModel.sources=t}get suggestions(){return this.viewModel.suggestions}get suggestionsEnabled(){return this.viewModel.suggestionsEnabled}set suggestionsEnabled(t){this.viewModel.suggestionsEnabled=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}clear(){this.viewModel.clear()}focus(){this._handleFocus(),this.emit("search-focus")}async _handleFocus(){var i,r;(i=this._focusAbortController)==null||i.abort(),this._focusAbortController=new AbortController;const t=this._focusAbortController.signal;await xa(lI(t)),(r=this._inputNode)==null||r.focus()}blur(){var t;(t=this._inputNode)==null||t.blur(),this.emit("search-blur")}async search(t){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const i=new AbortController,{signal:r}=i;this._searchController=i;try{const n=await this.viewModel.search(t,{signal:r});return this._searchController!==i?void 0:(this.activeMenu=n!=null&&n.numResults?"none":"warning",this._searchController=null,n)}catch{return this._searchController!==i?void 0:(this._clearActiveMenu(),void(this._searchController=null))}}async suggest(t){this._cancelSuggest();const i=new AbortController,{signal:r}=i;this._suggestController=i;try{const n=await this.viewModel.suggest(t,null,{signal:r});return this._suggestController!==i?void 0:(this._suggestController=null,n!=null&&n.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),n)}catch{return this._suggestController!==i||(this._suggestController=null),null}}render(){const{state:t}=this.viewModel,i={[ze.disabled]:t==="disabled",[ze.widgetDisabled]:this.disabled};return B("div",{class:this.classes(gi.base,ze.widget,i)},t==="loading"?this._renderLoader():this._renderContainer())}_renderSubmitButton(){const{messages:t,disabled:i}=this;return B("button",{"aria-label":t.searchButtonTitle,bind:this,class:this.classes(gi.submitButton,ze.widgetButton),disabled:i,key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:t.searchButtonTitle,type:"button"},B("span",{"aria-hidden":"true",class:Pn.search}))}_renderWarningMenu(){return B("div",{class:this.classes(ze.menu,gi.warningMenu),key:"esri-search__error-menu"},B("div",{class:gi.warningMenuBody},this._renderWarning()))}_renderSourceMenuButton(){const{messages:t,activeMenu:i,sourceMenuId:r,sourceMenuButtonId:n,disabled:o}=this,{activeSourceIndex:c,allSources:y}=this.viewModel;return y.length>1?B("button",{afterCreate:o1,"aria-controls":r,"aria-expanded":(i==="source").toString(),"aria-haspopup":"true","aria-label":t.searchIn,bind:this,class:this.classes(gi.sourcesButton,ze.widgetButton),"data-node-ref":"_sourceMenuButtonNode",disabled:o,id:n,key:"esri-search__source-menu-button",onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,title:t.searchIn,type:"button"},B("span",{"aria-hidden":"true",class:this.classes(Pn.downArrow,gi.sourcesButtonDown)}),B("span",{"aria-hidden":"true",class:this.classes(Pn.upArrow,gi.sourcesButtonUp)}),B("span",{class:gi.sourceName},this._getSourceName(c))):null}_renderSourcesList(){const{allSources:t,searchAllEnabled:i}=this.viewModel,{_activeMenuItemIndex:r,activeMenu:n,sourceMenuId:o,sourceMenuButtonId:c}=this,y=n==="source"&&r>-1?this._buildId("source-item",r):null;return t.length>1?B("ul",{afterCreate:o1,"aria-activedescendant":y,"aria-labelledby":c,bind:this,class:ze.menuList,"data-node-ref":"_sourceListNode",id:o,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,role:"menu",tabIndex:-1},i?this._renderSource(m1.ALL_INDEX):null,t.map((v,_)=>this._renderSource(_)).toArray()):null}_renderSourcesMenu(){const{allSources:t}=this.viewModel;return t.length>1?B("div",{class:this.classes(ze.menu,gi.sourcesMenu),key:"esri-search__source-menu"},this._renderSourcesList()):null}_renderLoader(){const{messages:t,messagesCommon:i,disabled:r}=this;return B("div",{class:ze.loader,key:"base-loader",tabIndex:r?-1:void 0},B("span",{"aria-hidden":"true",class:ze.loaderAnimation}),B("span",{class:Pn.fontFallbackText},t.searchButtonTitle),B("span",{class:ze.loaderText},i.loading))}_renderContainer(){const{allSources:t,state:i}=this.viewModel,{activeMenu:r}=this,n={[gi.hasMultipleSources]:t.length>1,[gi.isLoading]:i==="loading",[gi.isSearching]:i==="searching",[gi.showWarning]:r==="warning",[gi.showSources]:r==="source",[gi.showSuggestions]:r==="suggestion"};return B("div",{afterCreate:o=>{this._container=o,o.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:o=>{o.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes(n,gi.container),key:"base-container",tabIndex:-1},this._renderSourceMenuButton(),this._renderSourcesMenu(),this._renderInputContainer(),this._renderSubmitButton(),this._renderWarningMenu())}_renderClearButton(){return this.searchTerm?B("button",{bind:this,class:this.classes(gi.clearButton,ze.widgetButton),disabled:this.disabled,key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},B("span",{"aria-hidden":"true",class:Pn.close})):null}_renderLocationGroup(){const{messages:t,locationEnabled:i,displayedSearchTerm:r}=this,n=i&&!r,o=this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0;return n?B("ul",{class:this.classes(ze.menuList,gi.suggestionList,gi.suggestionListCurrentLocation),key:"esri-search__suggestion-list-current-location",role:"group"},B("li",{"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0).toString(),bind:this,class:this.classes(ze.menuItem,o?ze.menuItemFocus:null),"data-current-location-item":!0,id:this._buildId("suggestion-item",0),onclick:this._handleUseCurrentLocationClick,role:"option"},B("span",{"aria-hidden":"true",class:Pn.locateCircled})," ",t.useCurrentLocation)):null}_renderInput(){const{activeMenu:t,locationEnabled:i,displayedSearchTerm:r,messages:n,suggestionsMenuId:o,inputId:c,_activeMenuItemIndex:y,disabled:v}=this,{maxInputLength:_,placeholder:I,searchTerm:$,suggestionCount:A}=this.viewModel,k=!(!(i&&!r)&&!A),R=t==="suggestion"&&y>-1?this._buildId("suggestion-item",y):null;return B("input",{afterCreate:o1,"aria-activedescendant":R,"aria-autocomplete":"list","aria-controls":k?o:null,"aria-expanded":(k&&t==="suggestion").toString(),"aria-haspopup":"listbox","aria-label":n.searchButtonTitle,autocomplete:"off",bind:this,class:this.classes(ze.input,gi.input),"data-node-ref":"_inputNode",disabled:v,id:c,maxlength:_,onblur:this.blur,onclick:this._openSuggestionMenu,onfocus:this.focus,oninput:this._handleInputPaste,onkeyup:this._handleInputKeyup,onpaste:this._handleInputPaste,placeholder:I,role:"combobox",title:$?"":I,type:"text",value:$})}_renderForm(){return B("form",{bind:this,class:gi.form,disabled:this.disabled,key:"esri-search__form",onsubmit:this._formSubmit,role:"search"},this._renderInput())}_renderSuggestList(t){const{sourceIndex:i}=t,{results:r}=t;return(r==null?void 0:r.length)?B("ul",{class:this.classes(ze.menuList,gi.suggestionList),key:`esri-search__suggestion-list-${i}`,role:"group"},r==null?void 0:r.map(o=>this._renderSuggestion(o,this._menuItemCount++))):null}_renderSuggestionsGroup(){const{suggestions:t}=this.viewModel;return t?t.map(i=>[this._renderSuggestionHeader(i),this._renderSuggestList(i)]):[]}_renderSuggestionsMenu(){const{displayedSearchTerm:t,locationEnabled:i,suggestionsMenuId:r,inputId:n}=this,{suggestionCount:o}=this.viewModel,c=i&&!t||o;return this._menuItemCount=0,c?B("div",{afterCreate:o1,"aria-labelledby":n,bind:this,class:this.classes(ze.menu,gi.suggestionsMenu),"data-node-ref":"_suggestionListNode",id:r,key:"esri-search__suggestions-menu",role:"listbox"},this._renderLocationGroup(),this._renderSuggestionsGroup()):null}_renderInputContainer(){return B("div",{class:gi.inputContainer,key:"esri-search__input-container"},this._renderForm(),this._renderSuggestionsMenu(),this._renderClearButton())}_renderSuggestionHeader(t){var y;const{allSources:i,activeSourceIndex:r}=this.viewModel,{sourceIndex:n}=t,o=(y=t.results)==null?void 0:y.length,c=i.length>1&&r===m1.ALL_INDEX;return o&&c?B("div",{class:ze.menuHeader,key:`esri-search__suggestion-header-${n}`},this._getSourceName(n)):null}_renderSuggestion(t,i){const{_activeMenuItemIndex:r,viewModel:{searchTerm:n}}=this;if(!n)return;const o=this.activeMenu==="suggestion"&&r===i;return B("li",{"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===i).toString(),bind:this,class:this.classes(ze.menuItem,o?ze.menuItemFocus:null),"data-suggestion":t,id:this._buildId("suggestion-item",i),innerHTML:this._getSuggestResultHTML(t.text,n),key:`esri-search__suggestion_${i}`,onclick:this._handleSuggestionClick,role:"option"})}_renderSource(t){const{activeSourceIndex:i,searchAllEnabled:r}=this.viewModel,n={[ze.menuItemActive]:t===i,[ze.menuItemFocus]:this.activeMenu==="source"&&t===(r?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},o=r?t+1:t;return B("li",{"aria-checked":(t===i).toString(),bind:this,class:this.classes(gi.source,ze.menuItem,n),"data-source-index":t,id:this._buildId("source-item",o),key:`esri-search__source-${t}`,onclick:this._handleSourceClick,role:"menuitemradio"},this._getSourceName(t))}_renderNoResultsWarning(t){const{messages:i}=this,r=t?mn(i.noResultsFoundForValue,{value:`"${t}"`}):i.noResultsFound;return B("div",{key:"esri-search__no_results"},B("div",{class:gi.warningMenuHeader},i.noResults),B("div",{class:gi.warningMenuText},r))}_renderEmptySearchWarning(){const{messages:t}=this;return B("div",{key:"esri-search__empty-search"},B("span",{"aria-hidden":"true",class:Pn.noticeTriangle}),B("span",{class:gi.noValueText},t.emptyValue))}_renderLocateWarning(){const{messages:t}=this;return B("div",{key:"esri-search__locate-error"},B("span",{"aria-hidden":"true",class:Pn.noticeTriangle}),B("span",{class:gi.noValueText},t.locateError))}_renderWarning(){var n;const{displayedSearchTerm:t,_locateFailed:i}=this,{viewModel:r}=this;return i?this._renderLocateWarning():(n=r.selectedSuggestion)!=null&&n.location||t?this._renderNoResultsWarning(t):this._renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(t,i){return`${this.id}-${t}${i===void 0?"":`-${i}`}`}_watchSourceChanges(){const{viewModel:{allSources:t}}=this,i="sources";this.removeHandles(i),t.forEach(r=>this.addHandles(ge(()=>r.name,()=>this.scheduleRender()),i))}_handleSourcesMenuToggleFocus(){this.activeMenu!=="source"&&this._clearActiveMenu()}_handleSourcesMenuToggleClick(){var i;const t=this.activeMenu==="source";this.activeMenu=t?"none":"source",this.renderNow(),this.activeMenu==="source"&&((i=this._sourceListNode)==null||i.focus())}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(t){const i=tH(t.currentTarget);i&&(this._focus(),this.search(i))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const t=new AbortController,{signal:i}=t;this._searchController=t,(async()=>{try{const r=await this.viewModel.searchNearby({signal:i});this.activeMenu=r!=null&&r.numResults?"none":"warning"}catch{this._locateFailed=!0,this.activeMenu="warning"}finally{this._searchController=null}})()}_handleSourceClick(t){this._setSourceFromMenuItem(t.currentTarget)}_setSourceFromMenuItem(t){var r;if(!t)return;const i=Oze(t);i!=null&&(this.viewModel.activeSourceIndex=i,this._clearActiveMenu(),(r=this._sourceMenuButtonNode)==null||r.focus())}_cancelSuggest(){this._suggestController=_0(this._suggestController)}_cancelSearch(){this._searchController=_0(this._searchController),this._locateFailed=!1}_handleInputKeyup(t){var o;const{key:i}=t;if(t.ctrlKey||t.metaKey||i==="Copy"||i==="ArrowLeft"||i==="ArrowRight"||i==="Shift")return;if(i==="Tab"||i==="Escape"||t.shiftKey&&i==="Tab")return this._cancelSuggest(),void(i==="Escape"&&this._clearActiveMenu());const r=i==="Home"||i==="End"||i==="ArrowUp"||i==="ArrowDown";if(i==="Enter"&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const n=(o=this._suggestionListNode)==null?void 0:o.getElementsByTagName("li");if(n!=null&&n.length){if(this.activeMenu!=="suggestion"&&this._openSuggestionMenu(),r)return t.preventDefault(),this._cancelSuggest(),void this._handleItemNavigation(i,n,this._suggestionListNode);const c=n[this._activeMenuItemIndex];if(i==="Enter"&&c){const y=tH(c);return void(y?(this._focus(),this.search(y)):Rze(c)&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}_handleItemNavigation(t,i,r){const n=this._activeMenuItemIndex;t==="Home"&&(this._activeMenuItemIndex=0),t==="End"&&(this._activeMenuItemIndex=i.length-1),t==="ArrowUp"&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?i.length-1:this._activeMenuItemIndex-1),t==="ArrowDown"&&(this._activeMenuItemIndex=this._activeMenuItemIndex===i.length-1?0:this._activeMenuItemIndex+1),n!==this._activeMenuItemIndex&&r&&Pze(i[this._activeMenuItemIndex],r)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_openSuggestionMenu(){this.activeMenu="suggestion"}_handleInputPaste(t){const i=t.target;this.viewModel.searchTerm!==i.value&&(this.viewModel.searchTerm=i.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(t){var r;const{key:i}=t;if(Ree(i)){t.preventDefault();const n=(r=this._sourceListNode)==null?void 0:r.getElementsByTagName("li"),o=n==null?void 0:n[this._activeMenuItemIndex];this._setSourceFromMenuItem(o)}else i!=="ArrowUp"&&i!=="ArrowDown"&&i!=="End"&&i!=="Home"||t.preventDefault()}_handleSourceMenuKeyup(t){var o,c,y;const{key:i}=t,r=i==="ArrowUp"||i==="ArrowDown"||i==="End"||i==="Home";if(r&&t.preventDefault(),i==="Escape")return this._clearActiveMenu(),void((o=this._sourceMenuButtonNode)==null?void 0:o.focus());const n=(c=this._sourceListNode)==null?void 0:c.getElementsByTagName("li");return n&&n.length!==0&&r?(this.activeMenu!=="source"&&(this.activeMenu="source"),void this._handleItemNavigation(i,n,(y=this._sourceListNode)==null?void 0:y.parentElement)):void 0}_focus(t){this.focus(),t&&(this.activeMenu=t)}_formSubmit(t){t.preventDefault(),this._activeMenuItemIndex===-1&&this.search()}_getSourceName(t){const{messages:i}=this,r=this.viewModel,{allSources:n}=r,o=n.at(t);return t===m1.ALL_INDEX?i.all:o&&o.name||i.untitledSource}_getSuggestResultHTML(t,i){return t?kze.test(t)?t:Lze(t,i):this.messages.untitledResult}};function tH(e){return e==null?void 0:e["data-suggestion"]}function Oze(e){return e==null?void 0:e["data-source-index"]}function Rze(e){return!!(e!=null&&e["data-current-location-item"])}function Pze(e,t){const i=e.getBoundingClientRect(),r=t.getBoundingClientRect(),n=i.top+i.height,o=r.top+r.height,c=i.top,y=r.top;(n>o||c<y)&&e.scrollIntoView({block:"end"})}m([w()],At.prototype,"_activeMenuItemIndex",void 0),m([w()],At.prototype,"displayedSearchTerm",null),m([w({readOnly:!0})],At.prototype,"inputId",null),m([w({readOnly:!0})],At.prototype,"suggestionsMenuId",null),m([w({readOnly:!0})],At.prototype,"sourceMenuId",null),m([w({readOnly:!0})],At.prototype,"sourceMenuButtonId",null),m([w()],At.prototype,"activeMenu",void 0),m([w({readOnly:!0})],At.prototype,"activeSource",null),m([w()],At.prototype,"activeSourceIndex",null),m([w()],At.prototype,"allPlaceholder",null),m([w({readOnly:!0})],At.prototype,"allSources",null),m([w()],At.prototype,"autoNavigate",null),m([w()],At.prototype,"autoSelect",null),m([w({readOnly:!0})],At.prototype,"defaultSources",null),m([w()],At.prototype,"disabled",void 0),m([w()],At.prototype,"goToOverride",null),m([w()],At.prototype,"icon",null),m([w()],At.prototype,"includeDefaultSources",null),m([w()],At.prototype,"label",null),m([w()],At.prototype,"locationEnabled",null),m([w()],At.prototype,"maxResults",null),m([w()],At.prototype,"maxSuggestions",null),m([w(),Ht("esri/widgets/Search/t9n/Search")],At.prototype,"messages",void 0),m([w(),Ht("esri/t9n/common")],At.prototype,"messagesCommon",void 0),m([w()],At.prototype,"minSuggestCharacters",null),m([w()],At.prototype,"popupEnabled",null),m([w()],At.prototype,"popupTemplate",null),m([w()],At.prototype,"portal",null),m([w()],At.prototype,"resultGraphic",null),m([w()],At.prototype,"resultGraphicEnabled",null),m([w({readOnly:!0})],At.prototype,"results",null),m([w()],At.prototype,"searchAllEnabled",null),m([w()],At.prototype,"searchTerm",null),m([w({readOnly:!0})],At.prototype,"selectedResult",null),m([w()],At.prototype,"sources",null),m([w({readOnly:!0})],At.prototype,"suggestions",null),m([w()],At.prototype,"suggestionsEnabled",null),m([w()],At.prototype,"view",null),m([R3(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),w({type:m1})],At.prototype,"viewModel",void 0),At=m([H("esri.widgets.Search")],At);const Nze=At,Fze=2500,Kle={type:"CIMPictureMarker",primitiveName:"headingOverride",enable:!0,anchorPoint:{x:0,y:-.5},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:36,billboardMode3D:"FaceNearPlane",invertBackfaceTexture:!0,scaleX:1,textureFilter:"Picture",url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAkCAYAAACe0YppAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAYaSURBVHgBvVfNb1VFFD/nzP16xRYJKYREEiJoDLLShQkrSNzoHv8I2QgxwY8FJWHhxoVxISEu2AordWNiQjAxEBeEsKAmhCCwkPDRAn1t33v33jnH37n3Fam0pa8kTjOde+/MnN/5+J0z85jW08yYTpxgfzx0bS+fO0R0YHqyeb9w7YEtLTv+9rSdOH7ciNleJJJX/Do1JQ3AltdlT35fiN6gG8kD8akdmzO+6w/zM7wdw725rUY78DBXtmATA6PZntFgm9Kjm6o/HFJpdi5Xhp+16sDBC+H+gUmZfjIXHKC+35U42ZHZfpe30BZS7okNFnhu8wTRk2ek5LEV2q+N8nEj6yuNVRjHddftrt4ahyJbOxF+Uppi/Rf47NlA05Pp9vkyRNkkD8sqUJHwOGfSpYFQFXhTJryQBaZSeAxbFus+U1K0gJm2oy3QKwuZzqeuSK5kpW6BEsE6+nCsAHDXQWuaOljzU8uP/ToxUW4KcwKg8QzOSdFL6Swm0hurAC7N2qIW7ncwNgYKF4la3/w7RnzrUK29KseXWqmTKXGl45Zrd9CLrsSjr96fcw4kS46mTsJznSTrVBR6VQJQdDbpZTWexxgCYCFz30cquD8oYVQgtUAUzfo8wGtqGoNRFmFZ1KKulJMQu3Vpm/I8Pup3ekvES57GaabXo4lsszEA6zrkhcmAAkBNshi59O9wVsokBLZUCQAxllXVBkyCDRQuTlLLiLSEqw3gfUqU0kVdsKymsnzyPLm8fXZxDxVZgvUhg9QyaKDI7AhpSlRVEaA83JM+/V8pGO0PMTHyZwra9FQVk4i1e0D6dPK9v5agkmXAhc0Bw5MjlAQQE0lSDbUmbBX4kGfsiiQWuSZtdle1S4F73cUKJgviyw4mmmqlVSoR/FAK2d1noWQZ8N79MySw0tgNzhN00jRFaPM6y3IyLWBxXuOdvMfhaIy1MQctmvnEMGrMq2Y/ekC3dHF14I84gmZP2s0pgiJFHVwYhIIrMC1zgT4fQgsS0CG48LWtslAsgeKZK5U1c5Slj+nEvvJZqOWubr5ks8iE3bVqCMQCz4p5aiUqpMrOdHz2qLFTxAMSPLwY8WpmntNwrXIMCWvESGH+7n9hVi6ZJ6/sR5gnycFFQgsCQEEB8T9TbsCGy4PrZrEBjGyIt4EApoGRXWKP6Mt3fnvOvhWBjR4gdjtJEDmGQQkBSCS6Teys5qECABTPWOBwcPWgAPIU+E2+Rq3J8lsrQawMHNPbqAXvRqasWcMB/mK42N3twM6/FsbJTZK2Fru15K7niPVIp6RHn++9vRKErAg8ta+MFq4LBxAJKY1EajpxLj5KUzFzOMTni4btxoUzXPzIIOwLnEPxGVqlyWoTdO/WNRUXJhDmAgNAJVd0eABj8FTCvLbpEnxdOycJlFNXVq6MDvzthwOQ654LaMGGVofQWIWtXhM9xaCQp85QIZFMPXcpuUPH3uquJj6htVonvySD+KY6c2AulPAzHdVaZElvPCGBgvkIRUECr1J4qmV6LdGyJvAnu+94HZMla1Eg1AuGVyQWnNCwzqsUXK5+AIsUyPRc1Rbpi93X1xK9tsXtkj9U7INWSWvU0DaZ6OlVAmUDiqgbrwY2Z3ThRVKFXrgi/R0x9GMplxAyER6ynAtZin1DQoLVznLMU+/mywMf3dlDpbyMlbjLQDhLw/Sh24sm5dhTrlHKgS/T0X2zLw/sLeGr5OlEbg2uHwAFw5reKuKsJj8kcIj0zq9H5PqAj+z6E8y+YRIaUhnAEOrcWgv9m3shQ1H7mz5duVJtDLhZqZcNlrEDwXKwCzncdFg+PJeVf1m3uPUupLR7Hq6tHNyLhw1TCmdGbm0BmaUjr63LzaMBH943D9f+yO5uZ7HfcLktqdwqMU0jtPUDN6vDOfzgKFrXtta6q83vfHU4M5KoURbT4W3zsPIqrgQFO8GozV8ocZGOTN4dRdRowN6CnOLmKkk5t7H1i+HPNGJj2kj7buYajoRXh2+36eOt+2nENrrF3ozODEmFC0D4hjbQNgYc+DSYjd9qqGSJXqL/tZ16/DWdfvw9bbCt41hcpYn9RAEX9Q22fwC74ny5v9iplQAAAABJRU5ErkJggg=="},Dze=new ah({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:14,billboardMode3D:"FaceNearPlane",frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[8.5,0],[7.02,.13],[5.59,.51],[4.25,1.14],[3.04,1.99],[1.99,3.04],[1.14,4.25],[.51,5.59],[.13,7.02],[0,8.5],[.13,9.98],[.51,11.41],[1.14,12.75],[1.99,13.96],[3.04,15.01],[4.25,15.86],[5.59,16.49],[7.02,16.87],[8.5,17],[9.98,16.87],[11.41,16.49],[12.75,15.86],[13.96,15.01],[15.01,13.96],[15.86,12.75],[16.49,11.41],[16.87,9.98],[17,8.5],[16.87,7.02],[16.49,5.59],[15.86,4.25],[15.01,3.04],[13.96,1.99],[12.75,1.14],[11.41,.51],[9.98,.13],[8.5,0]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Round",joinStyle:"Round",lineStyle3D:"Strip",miterLimit:10,width:2,color:[255,255,255,255]},{type:"CIMSolidFill",enable:!0,color:[0,122,194,255]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:16,billboardMode3D:"FaceNearPlane",frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[8.5,0],[7.02,.13],[5.59,.51],[4.25,1.14],[3.04,1.99],[1.99,3.04],[1.14,4.25],[.51,5.59],[.13,7.02],[0,8.5],[.13,9.98],[.51,11.41],[1.14,12.75],[1.99,13.96],[3.04,15.01],[4.25,15.86],[5.59,16.49],[7.02,16.87],[8.5,17],[9.98,16.87],[11.41,16.49],[12.75,15.86],[13.96,15.01],[15.01,13.96],[15.86,12.75],[16.49,11.41],[16.87,9.98],[17,8.5],[16.87,7.02],[16.49,5.59],[15.86,4.25],[15.01,3.04],[13.96,1.99],[12.75,1.14],[11.41,.51],[9.98,.13],[8.5,0]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Round",joinStyle:"Round",lineStyle3D:"Strip",miterLimit:10,width:0,color:[255,255,255,255]},{type:"CIMSolidFill",enable:!0,color:[0,0,0,66]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0,offsetX:0,offsetY:-1},Kle],angleAlignment:"Map"},primitiveOverrides:[{type:"CIMPrimitiveOverride",primitiveName:"headingOverride",propertyName:"Rotation",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Rotation override",expression:"360 - $feature.heading",returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"headingOverride",propertyName:"TintColor",valueExpressionInfo:{type:"CIMExpressionInfo",title:"TintColor override",expression:"IIF(IsEmpty($feature.heading), [255, 255, 255, 0], [255, 255, 255, 1])",returnType:"Default"}}]}});let lu=class extends sT(qo.EventedMixin(Ve)){constructor(){super(...arguments),this._geolocationUsable=!0,this.geolocationOptions=null,this.goToLocationEnabled=!0,this.graphic=new er({symbol:Dze}),this.scale=null,this.rotationEnabled=!0,this.view=null}initialize(){Mk()||(this._geolocationUsable=!1),this.addHandles([ge(()=>{var t;return(t=this.view)==null?void 0:t.type},()=>this._handleViewTypeChange(),qe)])}destroy(){this._clearGraphic(),this.view=null}_clearGraphic(){const{view:t,graphic:i}=this;t&&i&&t.graphics.remove(i)}_addGraphic(){const{view:t,graphic:i}=this;t!=null&&t.graphics&&i&&!t.graphics.includes(i)&&t.graphics.push(i)}_handleViewTypeChange(){var t;Kle.enable=((t=this.view)==null?void 0:t.type)==="2d"}_getScaleWithinConstraints(t,i){if(!i)return t;if(i.type==="2d"){const{effectiveMaxScale:r,effectiveMinScale:n}=i.constraints;return Math.min(n,Math.max(r,t))}return t}_getScale(t){const{scale:i}=this,r=typeof i=="number"?i:Fze;return this._getScaleWithinConstraints(r,t)}_getHeading(t,i){var c;const r=i==null?void 0:i.spatialReference,n=(r==null?void 0:r.isWebMercator)||(r==null?void 0:r.isGeographic),o=(c=t.coords)==null?void 0:c.heading;return!n||typeof o!="number"||isNaN(o)||o<0||o>360?null:o}_addHeading(t){const{heading:i,target:r,view:n}=t;n&&i!==null&&(n.type!=="3d"?n.type==="2d"&&(r.rotation=360-i):r.heading=i)}async _animatePoint(t,i,r,n){const{view:o}=this;if(!this.goToLocationEnabled||!o)return;const c={target:t,scale:i};this.rotationEnabled&&this._addHeading({heading:r,target:c,view:o});const y={signal:n.signal};Gi(y),await this.callGoTo({target:c,options:y})}async updatePosition(t,i){try{const r=this.view,n=await Zle({position:t,view:r},{signal:i.signal}),{graphic:o}=this,{timestamp:c,coords:y}=t,{accuracy:v,altitude:_,altitudeAccuracy:I,latitude:$,longitude:A,speed:k}=y,R=this._getHeading(t,r),N={timestamp:c,accuracy:v,altitude:_,altitudeAccuracy:I,heading:R,latitude:$,longitude:A,speed:k};o&&(o.geometry=n,o.attributes=N);const D=this._getScale(r);await this._animatePoint(n,D,R,i)}catch(r){if(!br(r))throw new ne("geolocation-positioning:invalid-point","Cannot position invalid point",{error:r})}return t}};m([w()],lu.prototype,"_geolocationUsable",void 0),m([w()],lu.prototype,"geolocationOptions",void 0),m([w()],lu.prototype,"goToLocationEnabled",void 0),m([w({type:er,nonNullable:!0})],lu.prototype,"graphic",void 0),m([w()],lu.prototype,"scale",void 0),m([w()],lu.prototype,"rotationEnabled",void 0),m([w()],lu.prototype,"view",void 0),lu=m([H("esri.widgets.support.GeolocationPositioning")],lu);const jze=lu;async function zze(){const e=await _3("esri/widgets/Locate/t9n/Locate");return new mp({title:e.currentLocation,fieldInfos:[{fieldName:"timestamp",label:e.timestamp,format:{dateFormat:"short-date-short-time"}},{fieldName:"latitude",label:e.latitude,format:{places:4,digitSeparator:!0}},{fieldName:"longitude",label:e.longitude,format:{places:4,digitSeparator:!0}},{fieldName:"accuracy",label:e.accuracy,format:{places:0,digitSeparator:!0}},{fieldName:"altitude",label:e.altitude,format:{places:0,digitSeparator:!0}},{fieldName:"altitudeAccuracy",label:e.altitudeAccuracy,format:{places:0,digitSeparator:!0}},{fieldName:"heading",label:e.heading,format:{places:0,digitSeparator:!0}},{fieldName:"speed",label:e.speed,format:{places:0,digitSeparator:!0}}],actions:[sk.clone()],content:[{type:"fields"}]})}let Ic=class extends jze{constructor(t){super(t),this._locateController=null,this.error=void 0,this.popupEnabled=!0,this.locate=this.locate.bind(this)}initialize(){this.addHandles([g3(()=>{var n;const{graphic:t,view:i}=this;if(!t)return;((n=i==null?void 0:i.graphics)==null?void 0:n.includes(t))&&this._updatePopupTemplate(t)})])}destroy(){this.cancelLocate()}get state(){var t;return this._geolocationUsable?(t=this.view)!=null&&t.ready?this._locateController?"locating":this.error!=null?"error":"ready":"disabled":"feature-unsupported"}async locate(){if(this.cancelLocate(),this.state==="disabled")throw new ne("locate:disabled-state","Cannot locate when disabled.");if(this.state==="feature-unsupported")throw new ne("locate:feature-unsupported-state","Cannot locate in unsecure domain.");const t=new AbortController;this._locateController=t,this.error=void 0;try{const i=await Jle(this.geolocationOptions);if(await this.updatePosition(i,t),this._locateController!==t)return null;const{graphic:r}=this;return r&&await this._updatePopupTemplate(r),this._addGraphic(),this.emit("locate",{position:i}),this._locateController=null,i}catch(i){if(br(i))return null;throw t===this._locateController&&(this._locateController=null),this.error=i,this.emit("locate-error",{error:i}),i}}cancelLocate(){this._clearGraphic(),this._locateController&&this._locateController.abort(),this._locateController=null}async _updatePopupTemplate(t){if(!this.popupEnabled)return;const i=await zze(),r=t!==this.graphic;this.destroyed||r||(t.popupTemplate=i)}};m([w()],Ic.prototype,"_locateController",void 0),m([w()],Ic.prototype,"error",void 0),m([w()],Ic.prototype,"popupEnabled",void 0),m([w({readOnly:!0})],Ic.prototype,"state",null),m([w()],Ic.prototype,"locate",null),m([w()],Ic.prototype,"cancelLocate",null),Ic=m([H("esri.widgets.Locate.LocateViewModel")],Ic);const Yle=Ic,Vze={base:"esri-locate"};let ns=class extends yi{constructor(t,i){super(t,i),this.messages=null,this.messagesCommon=null,this.viewModel=new Yle,this._locate=()=>{const{viewModel:r}=this;r.state==="locating"?r.cancelLocate():r.locate().catch(()=>{})}}loadDependencies(){return Vn({button:()=>de(()=>import("./calcite-button-D1yBd9JN.js"),__vite__mapDeps([194,195]),import.meta.url),loader:()=>de(()=>import("./calcite-loader-CkzKaCO4.js"),__vite__mapDeps([221,195]),import.meta.url),tooltip:()=>de(()=>import("./calcite-tooltip-BuTh6UsD.js"),__vite__mapDeps([230,231,229,232]),import.meta.url)})}get geolocationOptions(){return this.viewModel.geolocationOptions}set geolocationOptions(t){this.viewModel.geolocationOptions=t}get goToLocationEnabled(){return this.viewModel.goToLocationEnabled}set goToLocationEnabled(t){this.viewModel.goToLocationEnabled=t}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get icon(){return"gps-off"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get popupEnabled(){return this.viewModel.popupEnabled}set popupEnabled(t){this.viewModel.popupEnabled=t}get rotationEnabled(){return xu(_e.getLogger(this),"rotationEnabled",{replacement:"use Track widget",version:"4.29",warnOnce:!0}),this.viewModel.rotationEnabled}set rotationEnabled(t){xu(_e.getLogger(this),"rotationEnabled",{replacement:"use Track widget",version:"4.29",warnOnce:!0}),this.viewModel.rotationEnabled=t}get scale(){return this.viewModel.scale}set scale(t){this.viewModel.scale=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}cancelLocate(){this.viewModel.cancelLocate()}locate(){return this.viewModel.locate()}render(){var v;const{viewModel:t,icon:i}=this,{state:r}=t,n=r==="locating",o=n?this.messagesCommon.cancel:this.messages.title,c=r==="feature-unsupported",y=this._localizeError((v=this.viewModel)==null?void 0:v.error);return B("div",{class:this.classes(Vze.base,ze.widget)},!c&&B("calcite-button",{class:ze.widgetButton,disabled:r==="disabled",iconStart:n?void 0:i,kind:"neutral",label:o,onclick:this._locate,title:o},n?B("calcite-loader",{inline:!0,label:""}):null),y?B("calcite-tooltip",{open:!0,overlayPositioning:"fixed",referenceElement:this.container},y):null)}_localizeError(t){var i,r,n;return t instanceof GeolocationPositionError?t.code===GeolocationPositionError.PERMISSION_DENIED?(i=this.messages)==null?void 0:i.permissionError:t.code===GeolocationPositionError.TIMEOUT?(r=this.messages)==null?void 0:r.timeoutError:(n=this.messages)==null?void 0:n.positionUnavailable:t instanceof Error?t.message:void 0}};m([w()],ns.prototype,"geolocationOptions",null),m([w()],ns.prototype,"goToLocationEnabled",null),m([w()],ns.prototype,"goToOverride",null),m([w()],ns.prototype,"graphic",null),m([w()],ns.prototype,"icon",null),m([w()],ns.prototype,"label",null),m([w(),Ht("esri/widgets/Locate/t9n/Locate")],ns.prototype,"messages",void 0),m([w(),Ht("esri/t9n/common")],ns.prototype,"messagesCommon",void 0),m([w()],ns.prototype,"popupEnabled",null),m([w()],ns.prototype,"rotationEnabled",null),m([w()],ns.prototype,"scale",null),m([w()],ns.prototype,"view",null),m([w({type:Yle}),R3(["locate","locate-error"])],ns.prototype,"viewModel",void 0),ns=m([H("esri.widgets.Locate")],ns);const Uze=ns;let aa=class extends Ve{constructor(t){super(t),this._basemapCache={},this._loadingProjectionEngine=!1,this.nextBasemap=g5("hybrid",this._basemapCache),this.view=null}initialize(){ge(()=>this.nextBasemap,t=>{t&&!t.loaded&&t.load().catch(()=>{})},qe)}destroy(){this.view=null,yte(this._basemapCache),this._basemapCache=null}get _nextBasemapSpatialReferenceTask(){return T5e(this.view,this.nextBasemap)}get _viewSpatialReferenceLocked(){const{view:t}=this;return!t||!("spatialReferenceLocked"in t)||t.spatialReferenceLocked}get activeBasemap(){var t,i;return g5(((i=(t=this.view)==null?void 0:t.map)==null?void 0:i.basemap)??"topo-vector",this._basemapCache)}castNextBasemap(t){return g5(t,this._basemapCache)}get state(){const{view:t}=this;if(!(t!=null&&t.ready)||this._nextBasemapSpatialReferenceTask.updating)return"disabled";const{spatialReference:i}=this._nextBasemapSpatialReferenceTask;return this._viewSpatialReferenceLocked&&i!=null&&!t.spatialReference.equals(i)?"incompatible-next-basemap":this._loadingProjectionEngine?"loading":"ready"}async toggle(){const{activeBasemap:t,nextBasemap:i,state:r,view:n}=this;if(!n||r==="disabled"||r==="incompatible-next-basemap")return;const o=this._viewSpatialReferenceLocked;if(!o){if(await Ou(()=>!this._nextBasemapSpatialReferenceTask.updating),i!==this.nextBasemap||t!==this.activeBasemap)return;const{spatialReference:c}=this._nextBasemapSpatialReferenceTask;if(c==null||_r(n.spatialReference,c)||nh()||Ml(n.spatialReference,c)||(this._loadingProjectionEngine=!0,await Qc(),this._loadingProjectionEngine=!1),i!==this.nextBasemap||t!==this.activeBasemap)return}n.map.basemap=i,o||this._nextBasemapSpatialReferenceTask.spatialReference==null||_r(n.spatialReference,this._nextBasemapSpatialReferenceTask.spatialReference)||(n.spatialReference=this._nextBasemapSpatialReferenceTask.spatialReference),this.nextBasemap=t}static getThumbnailUrl(t){return vte(t)}};m([w()],aa.prototype,"_loadingProjectionEngine",void 0),m([w({readOnly:!0})],aa.prototype,"_nextBasemapSpatialReferenceTask",null),m([w({readOnly:!0})],aa.prototype,"_viewSpatialReferenceLocked",null),m([w({readOnly:!0})],aa.prototype,"activeBasemap",null),m([w()],aa.prototype,"nextBasemap",void 0),m([wt("nextBasemap")],aa.prototype,"castNextBasemap",null),m([w({readOnly:!0})],aa.prototype,"state",null),m([w()],aa.prototype,"view",void 0),m([w()],aa.prototype,"toggle",null),aa=m([H("esri.widgets.BasemapToggle.BasemapToggleViewModel")],aa);const Xle=aa,Lp="esri-basemap-toggle",jv="esri-basemap-thumbnail",Fl={base:Lp,secondaryBasemapImage:`${Lp}__image--secondary`,container:`${jv} ${Lp}__container`,image:`${jv}__image ${Lp}__image`,imageLoading:`${Lp}__image--loading`,overlay:`${jv}__overlay ${Lp}__image-overlay`,title:`${jv}__title ${Lp}__title`,overlayScrim:`${jv}__overlay-scrim`};function iH(e){const t=vte(e);return t?{backgroundImage:"url("+t+")"}:{backgroundImage:""}}const rH={title:!1};let la=class extends yi{constructor(t,i){super(t,i),this.messages=null,this.viewModel=new Xle,this.visibleElements={...rH},this.toggle=()=>this.viewModel.toggle()}loadDependencies(){return Vn({button:()=>de(()=>import("./calcite-button-D1yBd9JN.js"),__vite__mapDeps([194,195]),import.meta.url),icon:()=>de(()=>import("./calcite-icon-D67BMpQP.js"),[],import.meta.url),scrim:()=>de(()=>import("./calcite-scrim-DFbXMhDp.js"),__vite__mapDeps([248,225,195]),import.meta.url)})}get activeBasemap(){return this.viewModel.activeBasemap}get icon(){return"layer-basemap"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get nextBasemap(){return this.viewModel.nextBasemap}set nextBasemap(t){this.viewModel.nextBasemap=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}castVisibleElements(t){return{...rH,...t}}render(){const t=this.viewModel,i=t.state==="disabled"?null:t.activeBasemap,r=t.state==="disabled"?null:t.nextBasemap,n=t.state==="loading",o=t.state==="incompatible-next-basemap",c=(r==null?void 0:r.title)??"",y=r&&r.loadStatus!=="loaded";let v;const _=this.visibleElements.title&&c,I=o;return(_||I)&&(v=B("div",{class:Fl.overlay,key:"overlay"},_?B("span",{class:Fl.title,title:c},c):null,I?B("calcite-scrim",{class:Fl.overlayScrim,title:this.messages.incompatibleSpatialReference},B("calcite-icon",{icon:"exclamation-mark-triangle"})):null)),B("div",{class:this.classes(Fl.base,ze.widget)},B("calcite-button",{appearance:"transparent","data-basemap-id":r?r.id:"",disabled:o,kind:"neutral",label:this.label,onclick:()=>{this.toggle()},title:this.label},B("div",{class:this.classes(Fl.container,Fl.secondaryBasemapImage)},B("div",{class:Fl.image,styles:iH(i)})),B("div",{class:Fl.container},B("div",{class:this.classes(Fl.image,y?Fl.imageLoading:null),styles:iH(r)},y||n?B("calcite-scrim",null,B("span",{"aria-hidden":"true",class:ze.loaderAnimation,role:"presentation"})):null),v)))}};m([w({readOnly:!0})],la.prototype,"activeBasemap",null),m([w()],la.prototype,"icon",null),m([w()],la.prototype,"label",null),m([w(),Ht("esri/widgets/BasemapToggle/t9n/BasemapToggle")],la.prototype,"messages",void 0),m([w()],la.prototype,"nextBasemap",null),m([w()],la.prototype,"view",null),m([w({type:Xle})],la.prototype,"viewModel",void 0),m([w()],la.prototype,"visibleElements",void 0),m([wt("visibleElements")],la.prototype,"castVisibleElements",null),la=m([H("esri.widgets.BasemapToggle")],la);const Bze=la;let nd=class extends Ve{constructor(t){super(t),this._viewpointHandle=null,this.group=null}initialize(){this.addHandles(tn(()=>{var t;return(t=this.view)==null?void 0:t.ui},"expand",t=>{const{target:i}=t;i&&i!==this&&i.expanded&&i.group&&i.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null}set autoCollapse(t){this._set("autoCollapse",t),this._watchViewpoint()}set expanded(t){var n;const i=!!t;this._set("expanded",i);const r=(n=this.view)==null?void 0:n.ui;r&&r.emit("expand",{target:this}),this._viewpointHandleChange(i)}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}set view(t){this._get("view")!==t&&(this._set("view",t),t&&en(()=>t.ready,()=>{this.view===t&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(t){this._viewpointHandle&&(t?en(()=>{var i;return(i=this.view)==null?void 0:i.stationary},()=>{var i;return(i=this._viewpointHandle)==null?void 0:i.resume()},{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const t="viewpoint";this.removeHandles(t),this._viewpointHandle=null;const{autoCollapse:i,view:r}=this;if(!r||!i)return;const n=ave(()=>r.type==="3d"?r.camera:r.viewpoint,()=>this._collapse());this.addHandles(n,t),this._viewpointHandle=n}_collapse(){this.expanded=!1}};m([w({value:!1})],nd.prototype,"autoCollapse",null),m([w({value:!1})],nd.prototype,"expanded",null),m([w()],nd.prototype,"group",void 0),m([w({readOnly:!0})],nd.prototype,"state",null),m([w({value:null})],nd.prototype,"view",null),nd=m([H("esri.widgets.Expand.ExpandViewModel")],nd);const Qle=nd,Zo="esri-expand",go={base:Zo,toggle:`${Zo}__toggle`,popoverContent:`${Zo}__popover-content`,panel:`${Zo}__panel`,panelContent:`${Zo}__panel-content`,sheet:`${Zo}__sheet`,panelIconNumber:`${Zo}__panel-icon-number`,contentContainer:`${Zo}__content-container`,icon:"esri-collapse__icon",iconFlip:"esri-collapse__icon-flip",iconExpanded:`${Zo}__icon--expanded`,iconNumber:`${Zo}__icon-number`,content:`${Zo}__content`,contentExpanded:`${Zo}__content--expanded`},nH="chevrons-left",sH="chevrons-right";let Ki=class extends yi{constructor(t,i){super(t,i),this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expandTooltip="",this.iconNumber=0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.placement=null,this.viewModel=new Qle,this.toggle=()=>{this.viewModel.expanded=!this.viewModel.expanded},this._handlePopoverClose=r=>{r.target===this._popoverEl&&(this.viewModel.expanded=r.target.open)},this._handleSheetClose=r=>{this.viewModel.expanded=r.target.open},this._handlePanelClose=r=>{this.viewModel.expanded=!r.target.closed},this._handleKeyDown=r=>{this.viewModel.expanded&&r.key==="Escape"&&!this._willCloseOnEsc(r)&&r.preventDefault()},this._storeToggleActionEl=r=>{this._toggleActionEl=r},this._storePopoverEl=r=>{this._popoverEl=r}}loadDependencies(){return Vn({action:()=>de(()=>import("./calcite-action-e4eforA9.js"),__vite__mapDeps([233,227,195]),import.meta.url),icon:()=>de(()=>import("./calcite-icon-D67BMpQP.js"),[],import.meta.url),panel:()=>de(()=>import("./calcite-panel-CX4-qvlW.js"),__vite__mapDeps([249,241,236,227,195,237,231,238,229,232,225]),import.meta.url),popover:()=>de(()=>import("./calcite-popover-CLa6Jcn3.js"),__vite__mapDeps([250,237,231,238,229,232,227,195]),import.meta.url),sheet:()=>de(()=>import("./calcite-sheet-BZc7DgG6.js"),__vite__mapDeps([251,238,229,195,225]),import.meta.url)})}get expandTitle(){const{expanded:t,messagesCommon:i,collapseTooltip:r,expandTooltip:n}=this;return(t?r||(i==null?void 0:i.collapse):n||(i==null?void 0:i.expand))??""}get _displaySheet(){var t;switch(this.mode){case"drawer":return!0;case"auto":return((t=this.viewModel.view)==null?void 0:t.widthBreakpoint)==="xsmall";default:return!1}}get autoCollapse(){return this.viewModel.autoCollapse}set autoCollapse(t){this.viewModel.autoCollapse=t}get collapseIcon(){return sH}set collapseIcon(t){this._overrideIfSome("collapseIcon",t)}get expanded(){return this.viewModel.expanded}set expanded(t){this.viewModel.expanded=t}get expandIcon(){return h0(this.content)?this.content.icon:nH}set expandIcon(t){this._overrideIfSome("expandIcon",t)}get group(){return this.viewModel.group}set group(t){this.viewModel.group=t}get icon(){return null}get label(){var t;return(h0(this.content)?this.content.label:null)??((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}render(){const{_displaySheet:t,_toggleActionEl:i,viewModel:{expanded:r},label:n,placement:o}=this;return B("div",{class:this.classes(go.base,ze.widget)},this._renderToggle(),t?B("calcite-sheet",{class:go.sheet,heightScale:"l",label:n,onkeydown:this._handleKeyDown,open:r,position:"block-end",onCalciteSheetClose:this._handleSheetClose},B("calcite-panel",{class:go.panel,closable:!0,closed:!r,heading:n,onkeydown:this._handleKeyDown,onCalcitePanelClose:this._handlePanelClose},B("div",{class:go.panelContent},this._renderContent()))):i?B("calcite-popover",{afterCreate:this._storePopoverEl,afterUpdate:this._storePopoverEl,label:n,onkeydown:this._handleKeyDown,open:r,overlayPositioning:"fixed",placement:o??this._getPlacement(),referenceElement:i,onCalcitePopoverClose:this._handlePopoverClose},B("div",{class:go.popoverContent},this._renderContent())):null)}_getPlacement(){const{container:t,view:i}=this,r=t&&i?i.ui.getPosition(t):null;if(!r||r==="manual")return"auto";const[n,o]=r.split("-");return`${o==="right"?"left":"right"}-${n==="bottom"?"end":"start"}`}_willCloseOnEsc(t){const{closeOnEsc:i}=this;return typeof i=="function"?i(t):i}_renderBadgeNumber(){const{expanded:t,iconNumber:i}=this;return i&&!t?B("span",{class:go.iconNumber,key:"expand__icon-number"},i):null}_renderToggleButton(){const{expanded:t,expandTitle:i,expandIcon:r,collapseIcon:n}=this,o=t?n:r,c=o===nH||o===sH;return B("calcite-action",{afterCreate:this._storeToggleActionEl,afterUpdate:this._storeToggleActionEl,class:ze.widgetButton,onclick:this.toggle,scale:"s",text:i,title:i},o?B("calcite-icon",{class:this.classes(go.icon,c&&go.iconFlip),icon:o,scale:"s"}):null)}_renderToggle(){return B("div",{class:go.toggle},this._renderToggleButton(),this._renderBadgeNumber())}_renderContent(){const{content:t}=this;return typeof t=="string"?B("div",{class:go.contentContainer,innerHTML:t,key:"content__string"}):h0(t)?B("div",{class:go.contentContainer,key:"content__widget"},t.render()):t instanceof HTMLElement?B("div",{afterCreate:this._attachToNode,bind:t,class:go.contentContainer,key:"content__html-element"}):Sse(t)?B("div",{afterCreate:this._attachToNode,bind:t.domNode,class:go.contentContainer,key:"content__node"}):null}_attachToNode(t){const i=this;t.appendChild(i)}};m([w({readOnly:!0})],Ki.prototype,"expandTitle",null),m([w()],Ki.prototype,"_toggleActionEl",void 0),m([w()],Ki.prototype,"_displaySheet",null),m([w()],Ki.prototype,"autoCollapse",null),m([w()],Ki.prototype,"closeOnEsc",void 0),m([w()],Ki.prototype,"collapseIcon",null),m([w()],Ki.prototype,"collapseTooltip",void 0),m([w()],Ki.prototype,"content",void 0),m([w()],Ki.prototype,"expanded",null),m([w()],Ki.prototype,"expandIcon",null),m([w()],Ki.prototype,"expandTooltip",void 0),m([w()],Ki.prototype,"group",null),m([w()],Ki.prototype,"icon",null),m([w()],Ki.prototype,"iconNumber",void 0),m([w()],Ki.prototype,"label",null),m([w(),Ht("esri/widgets/Expand/t9n/Expand")],Ki.prototype,"messages",void 0),m([w(),Ht("esri/t9n/common")],Ki.prototype,"messagesCommon",void 0),m([w()],Ki.prototype,"mode",void 0),m([w()],Ki.prototype,"placement",void 0),m([w()],Ki.prototype,"view",null),m([w({type:Qle})],Ki.prototype,"viewModel",void 0),Ki=m([H("esri.widgets.Expand")],Ki);const oH=Ki;function aH(e,t){const i=e.featureReduction;return i&&i.type!=="selection"&&(!("maxScale"in i)||!i.maxScale||i.maxScale<t.scale)?i:null}const H2=-1;let sl=class extends Ve{constructor(t){super(t),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=we("mapview-transitions-duration"),this.effects=[]}set effect(t){if(this._get("effect")!==(t=t||"")){this._set("effect",t);try{this._transitionTo(lH(t))}catch(i){this._transitionTo([]),_e.getLogger(this).warn("Invalid Effect",{effect:t,error:i})}}}get final(){return this._final}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(t){this._updateForScale(t)}get transitioning(){return this._to!==null}canTransitionTo(t){try{return this.scale>0&&uH(this._current,lH(t),this.scale)}catch{return!1}}transitionStep(t,i){this._applyTimeTransition(t),this._updateForScale(i)}endTransition(){this._applyTimeTransition(this.duration)}_transitionTo(t){this.scale>0&&uH(this._current,t,this.scale)?(this._final=t,this._to=le(t),Gze(this._current,this._to,this.scale),this._from=le(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=t),this._set("effects",this._current[0]?le(this._current[0].effects):[])}_applyTimeTransition(t){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=t;const i=Math.min(1,this._time/this.duration);for(let r=0;r<this._current.length;r++){const n=this._current[r],o=this._from[r],c=this._to[r];n.scale=qze(o.scale,c.scale,i);for(let y=0;y<n.effects.length;y++){const v=n.effects[y],_=o.effects[y],I=c.effects[y];v.interpolate(_,I,i)}}i===1&&(this._current=this._final,this._set("effects",this._current[0]?le(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(t){if(this._set("scale",t),this._current.length===0)return;const i=this._current,r=this._current.length-1;let n,o,c=1;if(i.length===1||t>=i[0].scale)o=n=i[0].effects;else if(t<=i[r].scale)o=n=i[r].effects;else for(let y=0;y<r;y++){const v=i[y],_=i[y+1];if(v.scale>=t&&_.scale<=t){c=(t-v.scale)/(_.scale-v.scale),n=v.effects,o=_.effects;break}}for(let y=0;y<this.effects.length;y++)this.effects[y].interpolate(n[y],o[y],c)}};function lH(e){const t=XR(e)||[];return Hze(t)?[{scale:H2,effects:t}]:t}function uH(e,t,i){var r,n,o,c;return!((r=e[0])!=null&&r.effects)||!((n=t[0])!=null&&n.effects)?!0:!((((o=e[0])==null?void 0:o.scale)===H2||((c=t[0])==null?void 0:c.scale)===H2)&&(e.length>1||t.length>1)&&i<=0)&&pte(e[0].effects,t[0].effects)}function Gze(e,t,i){const r=e.length>t.length?e:t,n=e.length>t.length?t:e,o=n[n.length-1],c=(o==null?void 0:o.scale)??i,y=(o==null?void 0:o.effects)??[];for(let v=n.length;v<r.length;v++)n.push({scale:c,effects:[...y]});for(let v=0;v<r.length;v++)n[v].scale=n[v].scale===H2?i:n[v].scale,r[v].scale=r[v].scale===H2?i:r[v].scale,fte(n[v].effects,r[v].effects)}function qze(e,t,i){return e+(t-e)*i}function Hze(e){const t=e[0];return!!t&&"type"in t}m([w()],sl.prototype,"_to",void 0),m([w()],sl.prototype,"duration",void 0),m([w({value:""})],sl.prototype,"effect",null),m([w({readOnly:!0})],sl.prototype,"effects",void 0),m([w({readOnly:!0})],sl.prototype,"final",null),m([w({readOnly:!0})],sl.prototype,"hasEffects",null),m([w({value:0})],sl.prototype,"scale",null),m([w({readOnly:!0})],sl.prototype,"transitioning",null),sl=m([H("esri.layers.effects.EffectView")],sl);function Ent(e){var i;const t=e.layer;return"floorInfo"in t&&((i=t.floorInfo)!=null&&i.floorField)&&"floors"in e.view?eue(e.view.floors,t.floorInfo.floorField):null}function cH(e,t){var i;return"floorInfo"in t&&((i=t.floorInfo)!=null&&i.floorField)?eue(e,t.floorInfo.floorField):null}function eue(e,t){if(!(e!=null&&e.length))return null;const i=e.filter(r=>r!=="").map(r=>`'${r}'`);return i.push("''"),`${t} IN (${i.join(",")}) OR ${t} IS NULL`}function Mnt(e,t,i){return t.flatten(({sublayers:n})=>n).length!==e.length?!0:!!e.some(n=>n.originIdOf("minScale")>i||n.originIdOf("maxScale")>i||n.originIdOf("renderer")>i||n.originIdOf("labelingInfo")>i||n.originIdOf("opacity")>i||n.originIdOf("labelsVisible")>i||n.originIdOf("source")>i)||!tue(e,t)}function Wze(e,t,i){return!!e.some(r=>{const n=r.source,o=!n||n.type==="map-layer"&&n.mapLayerId===r.id&&(n.gdbVersion==null||n.gdbVersion===i);return r.commitProperty("renderer"),r.commitProperty("labelingInfo"),r.commitProperty("opacity"),r.commitProperty("labelsVisible"),!o||r.originIdOf("renderer")>dt.SERVICE||r.originIdOf("labelingInfo")>dt.SERVICE||r.originIdOf("opacity")>dt.SERVICE||r.originIdOf("labelsVisible")>dt.SERVICE})||!tue(e,t)}function tue(e,t){if(!(e!=null&&e.length)||t==null)return!0;const i=t.slice().reverse().flatten(({sublayers:o})=>o&&o.toArray().reverse()).map(o=>o.id).toArray();if(e.length>i.length)return!1;let r=0;const n=i.length;for(const{id:o}of e){for(;r<n&&i[r]!==o;)r++;if(r>=n)return!1}return!0}function Ant(e){return!!e&&e.some(t=>{var i;return t.minScale!=null||((i=t.layerDefinition)==null?void 0:i.minScale)!=null})}const Jze={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let ua=class extends Ve{constructor(t){super(t),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const t=this.visibleSublayers.map(i=>{const r=cH(this.floors,i);return i.toExportImageJSON(r)});return t.length?JSON.stringify(t):null}get hasDynamicLayers(){return this.layer&&Wze(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(t){this._get("layer")!==t&&(this._set("layer",t),this.removeHandles("layer"),t&&this.addHandles([t.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),t.on("sublayer-update",i=>this.notifyChange(Jze[i.propertyName]))],"layer"))}get layers(){const t=this.visibleSublayers;return t?t.length?"show:"+t.map(i=>i.id).join(","):"show:-1":null}get layerDefs(){var r;const t=!!((r=this.floors)!=null&&r.length),i=this.visibleSublayers.filter(n=>n.definitionExpression!=null||t&&n.floorInfo!=null);return i.length?JSON.stringify(i.reduce((n,o)=>{const c=cH(this.floors,o),y=Ite(c,o.definitionExpression);return y!=null&&(n[o.id]=y),n},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers");const t=this.layer;return t&&(t.commitProperty("dpi"),t.commitProperty("imageFormat"),t.commitProperty("imageTransparency"),t.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const t=[];if(!this.layer)return t;const i=this.layer.sublayers,r=this.scale,n=c=>{c.visible&&(r===0||TAe(r,c.minScale,c.maxScale))&&(c.sublayers?c.sublayers.forEach(n):t.unshift(c))};i&&i.forEach(n);const o=this._get("visibleSublayers");return!o||o.length!==t.length||o.some((c,y)=>t[y]!==c)?t:o}toJSON(){const t=this.layer;let i={dpi:t.dpi,format:t.imageFormat,transparent:t.imageTransparency,gdbVersion:t.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?i.dynamicLayers=this.dynamicLayers:i={...i,layers:this.layers,layerDefs:this.layerDefs},i}};m([w({readOnly:!0})],ua.prototype,"dynamicLayers",null),m([w()],ua.prototype,"floors",void 0),m([w({readOnly:!0})],ua.prototype,"hasDynamicLayers",null),m([w()],ua.prototype,"layer",null),m([w({readOnly:!0})],ua.prototype,"layers",null),m([w({readOnly:!0})],ua.prototype,"layerDefs",null),m([w({type:Number})],ua.prototype,"scale",void 0),m([w({readOnly:!0})],ua.prototype,"version",null),m([w({readOnly:!0})],ua.prototype,"visibleSublayers",null),ua=m([H("esri.layers.support.ExportImageParameters")],ua);const Zze=9999999e31,Kze=2e-7,Yze={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function k4(e){return Yze[e]??[-34028234663852886e22,34028234663852886e22]}function knt(e,t){return e==null||t==null?"s32":e<0?e>=-128&&t<128?"s8":e>=-32768&&t<32768?"s16":"s32":t<256?"u8":t<65536?"u16":"u32"}function Xze(e){return((e==null?void 0:e.startsWith("s"))||(e==null?void 0:e.startsWith("u")))??!1}function Lnt(e,t,i,r){let[n,o]=k4(i);const c=Xze(i);return c&&(n-=1e-5,o+=1e-5),c?i.startsWith("u")?Qze(e,t,r,[n,o]):eVe(e,t,r,[n,o]):tVe(e,t,r,[n,o])}function Ont(e,t){for(let i=0;i<t.length;i++)t[i]&&isNaN(e[i])&&(t[i]=0,e[i]=0)}function Qze(e,t,i,r){const[n,o]=r;for(let c=0;c<t.length;c++)if(t[c]){const y=e[c];y<n||y>o?t[c]=0:i[c]=y+.5|0}}function eVe(e,t,i,r){const[n,o]=r;for(let c=0;c<t.length;c++)if(t[c]){const y=e[c];y<n||y>o?t[c]=0:i[c]=y+(y>0?.5:-.5)|0}}function tVe(e,t,i,r){const[n,o]=r;for(let c=0;c<t.length;c++)if(t[c]){const y=e[c];y<n||y>o?t[c]=0:i[c]=y}}function Rnt(e,t,i){var A,k;if(e.depthCount&&e.depthCount>1)return;const{pixels:r,statistics:n,pixelType:o}=e,c=r[0].length,y=e.bandMasks??[],v=e.mask??new Uint8Array(c).fill(255),_=o==="f32"||o==="f64",I=k4(o);let $=!1;for(let R=0;R<r.length;R++){const N=typeof t=="number"?t:t[R];if(N==null)continue;const D=((A=n==null?void 0:n[R])==null?void 0:A.minValue)??I[0],j=((k=n==null?void 0:n[R])==null?void 0:k.maxValue)??I[1];if(D>N+Number.EPSILON||j<N-Number.EPSILON)continue;const z=y[R]||v.slice(),U=r[R],W=i==null?void 0:i.customFloatTolerance;if(_&&W!==0){let Q=W;Q||(Q=Math.abs(N)>=Zze?Kze*Math.abs(N):o==="f32"?2**-23:Number.EPSILON);for(let K=0;K<U.length;K++)z[K]&&Math.abs(U[K]-N)<Q&&(U[K]=0,z[K]=0,v[K]=0,$=!0)}else for(let Q=0;Q<U.length;Q++)z[Q]&&U[Q]===N&&(U[Q]=0,z[Q]=0,v[Q]=0,$=!0);y[R]=z}$&&(e.bandMasks=e.bandMasks||e.pixels.length>1?y:null,e.mask=v),$&&"updateStatistics"in e&&e.updateStatistics()}function iVe(e){return e==null||e.type==="simple"||e.type==="unique-value"||e.type==="class-breaks"||e.type==="dictionary"||e.type==="heatmap"}var Ak;function rVe(e){switch(e){case"circle":return{rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};case"square":return{rings:[[[.5,.5],[.5,16.5],[16.5,16.5],[16.5,.5],[.5,.5]]]};case"diamond":return{rings:[[[8.5,.5],[.2,8.5],[8.5,16.5],[16.5,8.5],[8.5,.5]]]};case"hexagon-pointy":return{rings:[[[15.86,12.75],[15.86,4.25],[8.5,0],[1.14,4.25],[1.14,12.75],[8.5,17],[15.86,12.75]]]};case"hexagon-flat":return{rings:[[[12.75,15.86],[17,8.5],[12.75,1.14],[4.25,1.14],[0,8.5],[4.25,15.86],[12.75,15.86]]]}}}function ZP(e){var t;return(e==null?void 0:e.type)==="CIMVectorMarker"?(t=e.markerGraphics)==null?void 0:t[0]:void 0}function iue(e){var t,i;return((t=e==null?void 0:e.symbol)==null?void 0:t.type)==="CIMPolygonSymbol"?(i=e.symbol.symbolLayers)==null?void 0:i[0]:void 0}function nVe(e,t){(e==null?void 0:e.type)==="CIMVectorMarker"&&t!=null&&(e.size=t)}function sVe(e,t){const i=ZP(e);i&&t!=null&&(i.geometry=rVe(t))}function oVe(e,t){const i=iue(ZP(e));i&&t!=null&&(i.color=t.toArray())}function aVe(e,t,i){const r=iue(ZP(e));r&&t!=null&&i&&(r.colorLocked=t)}function rue(e,t){var _;const{outerRingSize:i,innerDotSize:r,type:n,color:o,colorLocked:c,primitiveOverrides:y}=t,v=((_=e.data.symbol)==null?void 0:_.type)==="CIMPolygonSymbol"?e.data.symbol.symbolLayers:null;if((v==null?void 0:v.length)===2)for(const I of v){const $=I.primitiveName===Ak.OuterRing;nVe(I,$?i:r),sVe(I,n),oVe(I,o),aVe(I,c,$)}return i!=null&&r!=null&&(e.data.primitiveOverrides=null),y!==void 0&&(e.data.primitiveOverrides=le(y)),e}(function(e){e.OuterRing="reference-size-outer-ring",e.InnerDot="reference-size-inner-dot"})(Ak||(Ak={}));function lVe(e,t,i){const r=e.effectiveClusterRenderer;if(!r||!("visualVariables"in r)||!r.visualVariables)return null;const n=r.visualVariables.find(I=>I.type==="size");if(!("stops"in n)||!n.stops)return null;const o=n.stops.find(I=>I.useMinValue),c=n.stops.find(I=>I.useMaxValue);if(o==null||c==null)return null;const y=i.featuresTilingScheme.getClosestInfoForScale(i.scale).level,v=n.field,_=t.getDisplayStatistics(y,v);return _?new Xg({field:n.field,minSize:e.clusterMinSize,minDataValue:_.minValue,maxSize:e.clusterMaxSize,maxDataValue:_.maxValue}):null}const Ck=30,kk=12,Lk=24,nue=[255,255,255],KP=[200,200,200],g1=[128,128,128],uVe=20,cVe=5;function hVe(e){return e.declaredClass==="esri.symbols.SimpleMarkerSymbol"}function dVe(e){return e.declaredClass==="esri.symbols.PictureMarkerSymbol"}function pVe(e){return e.declaredClass==="esri.symbols.SimpleLineSymbol"}function fVe(e){return e.declaredClass==="esri.symbols.TextSymbol"}function yVe(e,t){const i=e.length-1;return e.map((r,n)=>Vse(r,n,i,t))}async function mVe(e,t,i,r,n,o,c){const y=t.legendOptions,v=y==null?void 0:y.customValues,_=c||await bVe(e,i),I=t.stops,$=!!_,A=!!v,k=t.minSize!=null&&t.maxSize!=null,R=I&&I.length>1,N=!!t.target;if(!$||!A&&!(k||R&&!N))return;const D=dT(_);let j=!1,z=null,U=null;z=D&&!R?b4([t.minDataValue,t.maxDataValue]):v??await SVe(t,_,r,n==null?void 0:n.type);const W=e==null?void 0:e.authoringInfo,Q=(W==null?void 0:W.type)==="univariate-color-size",K=Q&&(W==null?void 0:W.univariateTheme)==="above-and-below",ee=!!F7(e);if(!z&&R&&(z=I.map(Ie=>Ie.value),j=I.some(Ie=>!!Ie.label),e.type==="flow"&&(z=b4(z)),j&&(U=I.map(Ie=>Ie.label))),D&&z!=null&&(z==null?void 0:z.length)>2&&!K&&(z=[z[0],z[z.length-1]]),!z)return null;Q&&(z==null?void 0:z.length)!==5&&(z=aue({minSize:z[0],maxSize:z[z.length-1]}));const ie=D?gVe(e,z):null,ae=M7e(_),ue=j?null:yVe(z,o);return(await Promise.all(z.map(async(Ie,Ae)=>{const Me=D?ie[Ae]:await Vm(t,_,Ie,r,n==null?void 0:n.type);return{value:Ie,symbol:!ee||e.type!=="class-breaks"&&e.type!=="unique-value"?TVe(K&&e.type==="class-breaks"?wVe(e,Ae):_,Me):vVe(e,Me,t.maxSize,i)??_,label:j?U[Ae]:ue[Ae],size:ee?Lk:Me,outlineSize:ae}}))).reverse()}function gVe(e,t){const i=e==null?void 0:e.authoringInfo,r=(i==null?void 0:i.type)==="univariate-color-size";let n=[kk,Ck];if(r){const o=t[0],c=t[t.length-1],y=kk,v=Ck;n=t.map(_=>y+(_-o)/(c-o)*(v-y))}return r&&(i==null?void 0:i.univariateTheme)==="below"&&n.reverse(),n}function vVe(e,t,i,r){var c,y,v,_,I,$;const n=e.type==="class-breaks",o=n?(v=(y=(c=e.classBreakInfos)==null?void 0:c[0])==null?void 0:y.symbol)==null?void 0:v.clone():($=(I=(_=e.uniqueValueInfos)==null?void 0:_[0])==null?void 0:I.symbol)==null?void 0:$.clone();return o&&"type"in o&&o.type==="cim"?(rue(o,{color:r??(n?null:new je(KP)),innerDotSize:t*(Lk/i)||1,outerRingSize:Lk}),o):null}function wVe(e,t){var c;const i=e.classBreakInfos,r=i.length,n=r<2||!(t>=2)?i[0].symbol.clone():i[r-1].symbol.clone();return((c=e.visualVariables)==null?void 0:c.some(y=>y.type==="color"))&&(n.type.includes("3d")?sue(n):oue(n)),n}async function bVe(e,t){var n,o;if(e.type==="flow")return Use(e,t);if(e.type==="pie-chart")return new fs({color:null,outline:(n=e.outline)!=null&&n.width?e.outline:new vs});let i=null,r=null;if(e.type==="simple")i=e.symbol;else if(e.type==="class-breaks"){const c=e.classBreakInfos;i=c&&c[0]&&c[0].symbol,r=c.length>1}else if(e.type==="unique-value"){const c=e.uniqueValueInfos;i=(o=c==null?void 0:c[0])==null?void 0:o.symbol,r=c!=null&&c.length>1}return!i||_Ve(i)?null:(i=i.clone(),(t||r)&&(i.type.includes("3d")?sue(i):oue(i)),i)}function _Ve(e){return e?Nu(e)?!!e.symbolLayers&&e.symbolLayers.some(t=>t&&t.type==="fill"):e.type.includes("fill"):!1}function sue(e){e.type==="line-3d"?e.symbolLayers.forEach(t=>{t.material={color:g1}}):e.symbolLayers.forEach(t=>{var i;t.type!=="icon"||(i=t.resource)!=null&&i.href?t.material={color:KP}:(t.material={color:nue},t.outline={color:g1,size:1.5})})}function oue(e){var i,r;const t=UR();e.type==="cim"?kse(e,new je(KP)):e.type.includes("line")?e.color=g1:(e.color=t?g1:nue,e.type==="simple-marker"&&(e.outline?((r=(i=e.outline)==null?void 0:i.color)==null?void 0:r.toHex())==="#ffffff"&&(e.outline.color=g1):e.outline={color:g1,width:1.5}))}async function SVe(e,t,i,r){const n=(await de(async()=>{const{getSizeRangeAtScale:y}=await Promise.resolve().then(()=>ty);return{getSizeRangeAtScale:y}},void 0,import.meta.url)).getSizeRangeAtScale(e,i,r),o=n&&aue(n);if(!n||!o)return;let c=o.map(y=>xVe(y,e,n));c=b4(c);for(let y=1;y<c.length-1;y++){const v=await IVe(e,t,c[y],c[y-1],i,r);v&&(c[y]=v[0],o[y]=v[1])}return c}function aue(e){const t=e.minSize,i=e.maxSize,r=cVe,n=(i-t)/(r-1),o=[];for(let c=0;c<r;c++)o.push(t+n*c);return o}function xVe(e,t,i){const r=i.minSize,n=i.maxSize,o=t.minDataValue,c=t.maxDataValue;let y;return e<=r?y=o:e>=n?y=c:y=(e-r)/(n-r)*(c-o)+o,y}async function IVe(e,t,i,r,n,o){const c=await Vm(e,t,i,n,o),y=await Vm(e,t,r,n,o),v=w4(i),_=v.fractional,I=uVe;let $=v.integer,A=null,k=null;i>0&&i<1&&(A=10**_,$=w4(i*=A).integer);for(let R=$-1;R>=0;R--){const N=10**R;let D=Math.floor(i/N)*N,j=Math.ceil(i/N)*N;A!=null&&(D/=A,j/=A);let z=(D+j)/2;[,z]=b4([D,z,j],{indexes:[1]});const U=await Vm(e,t,D,n,o),W=await Vm(e,t,j,n,o),Q=await Vm(e,t,z,n,o),K=Z5(c,U,y,null),ee=Z5(c,W,y,null),ie=Z5(c,Q,y,null);let ae=K.previous<=I,ue=ee.previous<=I;if(ae&&ue&&(K.previous<=ee.previous?(ae=!0,ue=!1):(ue=!0,ae=!1)),ae?k=[D,U]:ue?k=[j,W]:ie.previous<=I&&(k=[z,Q]),k)break}return k}async function Vm(e,t,i,r,n){const{getSize:o}=await de(()=>Promise.resolve().then(()=>ty),void 0,import.meta.url);return o(e,i,{scale:r,view:n,shape:t.type==="simple-marker"?t.style:null})}function TVe(e,t){const i=e.clone();if(Nu(i))dT(i)||i.symbolLayers.forEach(r=>{r.type!=="fill"&&(r.size=t)});else if(hVe(i))i.size=t;else if(dVe(i)){const r=i.width,n=i.height;i.height=t,i.width=t*(r/n)}else pVe(i)?i.width=t:fVe(i)&&i.font&&(i.font.size=t);return i}function $Ve(e){const i=Math.floor(Math.log10(Math.abs(e)))+1,r=i<4||i>6?4:i,n=1e6,o=Math.abs(e)>=n?"compact":"standard";return jn(e,{notation:o,minimumSignificantDigits:2,maximumSignificantDigits:r})}const hH=16,EVe="https://utility.arcgis.com/sharing/tools/legend",MVe="esri.layers.ImageryLayer",AVe="esri.layers.ImageryTileLayer",CVe="esri.layers.WCSLayer",IS=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,kVe=new ft({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),TS=new fs({size:6,outline:{color:[128,128,128,.5],width:.5}}),LVe=new kl({style:"solid"});function Ok(e){return e.type==="flow"}function lue(e){return e.type==="vector-field"}function uue(e){return e.type==="raster-colormap"}function cue(e){return e.type==="raster-stretch"}function hue(e){return e.type==="raster-shaded-relief"}function Um(e){return e.declaredClass==="esri.renderers.SimpleRenderer"}function kf(e){return e.declaredClass==="esri.renderers.ClassBreaksRenderer"}function Bm(e){return e.declaredClass==="esri.renderers.UniqueValueRenderer"}function due(e){return e.declaredClass==="esri.renderers.HeatmapRenderer"}function OVe(e){return YP(e)||XP(e)||QP(e)||RVe(e)}function RVe(e){return e.declaredClass==="esri.renderers.PointCloudRGBRenderer"}function YP(e){return e.declaredClass==="esri.renderers.PointCloudClassBreaksRenderer"}function XP(e){return e.declaredClass==="esri.renderers.PointCloudStretchRenderer"}function QP(e){return e.declaredClass==="esri.renderers.PointCloudUniqueValueRenderer"}function pue(e){return e.declaredClass==="esri.renderers.DotDensityRenderer"}function fue(e){return e.declaredClass==="esri.renderers.PieChartRenderer"}function PVe(e,t){return Um(e)||kf(e)||Bm(e)||due(e)||pue(e)||fue(e)?t.type==="2d"||iVe(e):cue(e)||uue(e)||hue(e)||YP(e)||XP(e)||QP(e)||lue(e)||Ok(e)}function NVe(e){return e.declaredClass==="esri.layers.BuildingSceneLayer"}function e6(e){return e.declaredClass==="esri.layers.SubtypeGroupLayer"}function FVe(e){return e.declaredClass==="esri.layers.VoxelLayer"}function DVe(e){return e.declaredClass==="esri.layers.WMSLayer"}function jVe(e){return e.declaredClass==="esri.layers.WMTSLayer"}function t6(e){return e.declaredClass==="esri.layers.MapImageLayer"}function dH(e){return e.declaredClass==="esri.layers.TileLayer"}function My(e){return e.declaredClass===MVe}function $S(e){return e.declaredClass===AVe}function zVe(e){return e.declaredClass===CVe}function VVe(e){return e.type==="stretch-ramp"}function UVe(e){const t="authoringInfo"in e?e==null?void 0:e.authoringInfo:null;return(t==null?void 0:t.type)==="univariate-color-size"}function BVe(e){const t="authoringInfo"in e?e==null?void 0:e.authoringInfo:null;return(t==null?void 0:t.type)==="univariate-color-size"&&(t==null?void 0:t.univariateTheme)==="above-and-below"}function pH(e){return"sublayers"in e}async function Zu(e,t){const i=await _3("esri/widgets/Legend/t9n/Legend");return e!=="previewTemplateAriaLabel"||t||(e="previewAriaLabel"),mn(i[e],{label:t})}function GVe(e,t){const{field:i,field2:r,field3:n,fieldDelimiter:o,valueExpression:c}=e;if(!i)return null;const y=!i&&!c||!r&&!n?[t]:t==null?void 0:t.toString().split(o||""),v=i?{[i]:y==null?void 0:y[0]}:null;return v&&(r&&(v[r]=y==null?void 0:y[1]),n&&(v[n]=y==null?void 0:y[2])),v}const qVe=new fs({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let Ay={},Er=class extends Ve{constructor(e){super(e),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this._layerDefinitionExpression=null,this._layerDefinitionExpressionClause=null,this.children=new Oe,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const e=()=>this.notifyChange("ready");this.addHandles([tn(()=>this.children,"change",t=>{const{added:i,removed:r}=t;i.forEach(n=>{const o=`activeLayerInfo-ready-watcher-${n.layer.uid}`;this.addHandles(ge(()=>n.ready,e,qe),o)}),r.forEach(n=>this.removeHandles(n.layer.uid)),e()})]),this.keepCacheOnDestroy||(Ay={})}destroy(){this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(Ay=null),this._layerDefinitionExpressionClause=null}get effectList(){const e=this.layer;let t=null;return"effect"in e&&e.effect&&(t=new sl,t.effect=e.effect,t.endTransition(),t.scale=this.scale),t}get opacity(){var n;const e=this.layer.opacity,t=(n=this.parent)==null?void 0:n.opacity,i=this.layer.parent,r=i&&"uid"in i?this._getParentLayerOpacity(i):null;return t!=null?t*e:r!=null?r*e:e}get ready(){return this.layer===null||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){var e;return((e=this.view)==null?void 0:e.scale)??0}get isScaleDriven(){const e=this.layer;if(e===null)return!1;if("effect"in e&&e.effect&&Array.isArray(e.effect))return!0;if("featureReduction"in e&&e.featureReduction){if(e.featureReduction.type==="cluster")return!0;if(e.featureReduction.type==="binning"&&"renderer"in e.featureReduction&&e.featureReduction.renderer)return this._isRendererScaleDriven(e.featureReduction.renderer)}return"renderer"in e&&e.renderer?this._isRendererScaleDriven(e.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(e){if(!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],void this.notifyChange("ready");const t=Array.from(e,i=>{var r;if(J_e(i))return this._getRendererLegendElements(i.renderer,{title:i.title});if((r=i.featureSet)!=null&&r.features.length){const n=i.layerDefinition,o=n==null?void 0:n.drawingInfo,c=o&&jOe(o.renderer),y=kVe.read(n.geometryType);return c?this._getRendererLegendElements(c,{title:i.name,geometryType:y}):(_e.getLogger(this).warn("drawingInfo not available!"),null)}return null});try{const i=[],r=await Promise.allSettled(t);for(const n of r)if(n.status==="fulfilled")for(const o of n.value??[])i.push(o);this.legendElements=i,this.notifyChange("ready")}catch(i){_e.getLogger(this).warn("error while building legend for layer!",i)}}async buildLegendElementsForRenderer(e){try{const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getRendererLegendElements(e):[],this.notifyChange("ready")}catch(t){_e.getLogger(this).warn("error while building legend for layer!",t)}}async buildLegendElementsForFeatureReduction(e){try{const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getLegendElementsForFeatureReduction(e):[],this.notifyChange("ready")}catch(t){_e.getLogger(this).warn("error while building legend for layer!",t)}}async buildLegendElementsForTools(){var t,i;const e=this.layer;if(FVe(e))this._constructLegendElementsForVoxelLayer();else if(jVe(e))this._constructLegendElementsForWMTSlayer();else if(DVe(e))await this._constructLegendElementsForWMSSublayers();else if(NVe(e))await this._constructLegendElementsForBuildingSceneLayer();else if(t6(e)||dH(e)||e6(e))await this._constructLegendElementsForSublayers();else{this.removeHandles("imageryLayers-watcher");let r="default";if(My(e)){const n=e;r=(((t=n==null?void 0:n.rasterFunction)==null?void 0:t.functionName)||"default")+"_"+((i=e.bandIds)!=null&&i.length?e.bandIds.join(""):"###")}if($S(e)||e.type==="link-chart")return;await this._getLegendLayers(`${e.uid}-${r}`).then(async n=>{this.legendElements=[],this.notifyChange("ready");const o=n.map(async c=>{if(My(e)){const v=ge(()=>[e.rasterFunction,e.bandIds],()=>_l(async()=>{Ay.default=null,e.renderer?await this.buildLegendElementsForRenderer(e.renderer):await this.buildLegendElementsForTools()})());this.addHandles(v,"imageryLayers-watcher")}const y=this._generateSymbolTableElementForLegendLayer(c);y!=null&&y.infos.length&&(My(e)&&(y.title=e.title),this.legendElements.push(y)),this.notifyChange("ready")});await Promise.allSettled(o)}).catch(n=>{_e.getLogger(this).warn("Request to server for legend has failed!",n)})}}async _isLayerInCurrentView(){const e=this.layer,t=this.layerView,i=t&&"createQuery"in t&&"queryFeatureCount"in t;if(!i&&!(t&&"createQuery"in e&&"queryFeatureCount"in e))return!0;await Ou(()=>!t.updating);const r=i?"createQuery"in t&&t.createQuery():"createQuery"in e&&e.createQuery();return r?(r.geometry=this.view.extent,(i?"queryFeatureCount"in t&&await t.queryFeatureCount(r):"queryFeatureCount"in e&&await e.queryFeatureCount(r))!==0):!0}_getParentLayerOpacity(e){let t=1;const i=e.parent;return i&&"uid"in i&&(t=this._getParentLayerOpacity(i)),e.opacity*t}_isGroupActive(){return this.children.some(e=>e.ready)}_isRendererScaleDriven(e){if(e.type==="dot-density")return!0;const t="valueExpression"in e?e.valueExpression:null;if(IS.test(t))return!0;const i="visualVariables"in e?e.visualVariables:null;return!!(i!=null&&i.some(r=>this._isScaleDrivenSizeVariable(r)))||this._hasScaleDrivenSymbols(e)}_hasScaleDrivenSymbols(e){var t;switch(e.type){case"simple":return this._isScaleDrivenSymbol(e.symbol);case"class-breaks":return this._isScaleDrivenSymbol(e.defaultSymbol)||e.classBreakInfos.some(i=>this._isScaleDrivenSymbol(i.symbol));case"unique-value":return this._isScaleDrivenSymbol(e.defaultSymbol)||!!((t=e.uniqueValueInfos)!=null&&t.some(i=>this._isScaleDrivenSymbol(i.symbol)))}return!1}_isScaleDrivenSymbol(e){if((e==null?void 0:e.type)==="cim"){const{primitiveOverrides:t,minScale:i,maxScale:r}=e.data,n=(t==null?void 0:t.some(o=>{var c;return/\$view\.scale/.test(((c=o.valueExpressionInfo)==null?void 0:c.expression)||"")}))??!1;return i!=null||r!=null||n}return!1}_isScaleDrivenSizeVariable(e){if(e&&e.type!=="size")return!1;const t=e,i=t.minSize,r=t.maxSize;return!(typeof i!="object"||!i||!this._isScaleDrivenSizeVariable(i))||!(typeof r!="object"||!r||!this._isScaleDrivenSizeVariable(r))||IS.test(t.valueExpression)}_isLayerScaleDriven(e){if("minScale"in e&&e.minScale>0||"maxScale"in e&&e.maxScale>0)return!0;if("sublayers"in e&&e.sublayers)return e.sublayers.some(i=>this._isLayerScaleDriven(i));const t=e.parent;if(e.loaded===!1&&t&&t6(t)&&"source"in e&&e.source&&e.source.type==="map-layer"){for(const i of t.sourceJSON.layers??[])if(i.id===e.source.mapLayerId&&(i.minScale>0||i.maxScale>0))return!0}return!1}async _constructLegendElementsForVoxelLayer(){var o;this.legendElements=[],this.removeHandles("voxel-style-watcher"),this.removeHandles("voxel-current-variable");const e=this.layer;this.addHandles(ge(()=>e.currentVariableId,()=>this._constructLegendElementsForVoxelLayer()),"voxel-current-variable"),this.addHandles(ge(()=>e.getVariableStyles(),()=>this._constructLegendElementsForVoxelLayer()),"voxel-style-watcher");const t=e.getVariableStyle(null),i=[];if(t){if((o=t.uniqueValues)!=null&&o.length){const c=[];t.uniqueValues.forEach(y=>{y.enabled&&c.push({label:y.label||`${y.value}`,value:y.value,symbol:new kl({color:y.color,outline:null})})}),c.length&&i.push({type:"symbol-table",title:t.label,infos:c})}else if(t.transferFunction){const{colorStops:c,stretchRange:y}=t.transferFunction,v=c.toArray().reverse(),_=y.map(($,A)=>`${A===0?jse:zse} ${$Ve($)}`).reverse(),I=v.map($=>({color:$.color,value:null,label:null}));I[0].label=_[0],I[I.length-1].label=_[1],i.push({type:"color-ramp",title:t.label,infos:I,preview:$f(v.map($=>$.color),{ariaLabel:await Zu("previewColorRampAriaLabel")})})}}const r=e.opacity,n=i.reduce((c,y)=>[...c,...this._getAllInfos(y)],[]).filter(c=>!!(c!=null&&c.symbol)).map(c=>this._getSymbolPreview(c,r));await Promise.allSettled(n),this.legendElements=i,this.notifyChange("ready")}_constructLegendElementsForWMTSlayer(){var i,r;this.legendElements=[],this.removeHandles("wmts-activeLayer-watcher");const e=this.layer.activeLayer;this.addHandles(ge(()=>{const{layer:n}=this;return n&&"activeLayer"in n&&n.activeLayer},()=>this._constructLegendElementsForWMTSlayer()),"wmts-activeLayer-watcher");const t=e.styleId?(r=(i=e.styles)==null?void 0:i.find(({id:n})=>n===e.styleId))==null?void 0:r.legendUrl:void 0;t&&(this.legendElements=[{type:"symbol-table",title:e.title,infos:[{src:t,opacity:this.opacity}]}]),this.notifyChange("ready")}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this.removeHandles("wms-sublayers-watcher");const e=this.layer;let t=null;(e.customParameters||e.customLayerParameters)&&(t={...e.customParameters,...e.customLayerParameters}),this.addHandles(ge(()=>{const{layer:i}=this;return i&&"sublayers"in i&&i.sublayers},()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher"),this.legendElements=await this._generateLegendElementsForWMSSublayers(e.sublayers,t),this.notifyChange("ready")}async _generateLegendElementsForWMSSublayers(e,t){var c,y;const i=this.layer,r=[];this.addHandles(e.on("change",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");const n=((y=(c=this.sublayerIds)==null?void 0:c.map(v=>i.findSublayerById(v)))==null?void 0:y.filter(Ar))??[],o=n.length?n:e.toArray();for(const v of o){const _=ge(()=>[v.title,v.visible,v.legendEnabled],()=>this._constructLegendElementsForWMSSublayers());if(this.addHandles(_,"wms-sublayers-watcher"),!this.respectLayerVisibility||v.visible&&v.legendEnabled){const I=await this._generateSymbolTableElementForWMSSublayer(v,t);I!=null&&I.infos.length&&r.unshift(I)}}return r}async _generateSymbolTableElementForWMSSublayer(e,t){if(!e.legendUrl&&e.sublayers){const i=(await this._generateLegendElementsForWMSSublayers(e.sublayers,t)).filter(r=>r);return{type:"symbol-table",title:e.title,infos:i}}return this._generateSymbolTableElementForLegendUrl(e,t)}async _generateSymbolTableElementForLegendUrl(e,t){var c;let i=e.legendUrl;if(!i)return;const r={type:"symbol-table",title:e.title||e.name||String(e.id??""),infos:[]};t&&(i=ZS(i,t));let n=null;const o=(c=e.layer)==null?void 0:c.opacity;try{n=(await Et(i,{responseType:"image"})).data,n&&(n.style.opacity=o)}catch{}return r.infos.push({src:i,preview:n,opacity:o}),r}_getLegendLayers(e,t){const i=Ay&&Ay[e];return i?Promise.resolve(i):this._legendRequest(t).then(r=>{const n=r.layers;return Ay[e]=n,n})}_legendRequest(e){var n;const t=this.layer;let i={f:"json",dynamicLayers:e};if(My(t)){const o=t.exportImageServiceParameters.rasterFunction;if(o&&(i.renderingRule=JSON.stringify(((n=o.functionDefinition)==null?void 0:n.toJSON())||o.toJSON())),t.bandIds&&(i.bandIds=t.bandIds.join()),t.raster||t.viewId||t.customParameters){const{raster:c,viewId:y,customParameters:v}=t;i={raster:c,viewId:y,...i,...v}}}let r=t.url.replace(/(\/)+$/,"");if("version"in t&&+t.version>=10.01){const o=r.indexOf("?");o>-1?r=r.slice(0,o)+"/legend"+r.slice(o):r+="/legend"}else{const o=r.toLowerCase().indexOf("/rest/"),c=o===-1?r:r.slice(0,o)+r.slice(o+5);r=EVe+"?soapUrl="+encodeURI(c)+"&returnbytes=true"}return Et(r,{query:i}).then(o=>o.data)}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this.removeHandles("sublayers-watcher");const e=this.layer;this.addHandles(ge(()=>e.sublayers,()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(e.sublayers,this.opacity),this.notifyChange("ready")}catch(t){_e.getLogger(this).warn("Request to server for legend has failed!",t)}}async _generateLegendElementsForBuildingSublayers(e,t){let i=[];this.addHandles(e.on("change",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");const r=e.toArray();for(const n of r){const o=ge(()=>["renderer"in n&&n.renderer,n.opacity,n.title,n.visible],()=>this._constructLegendElementsForBuildingSceneLayer());if(this.addHandles(o,"sublayers-watcher"),!this.respectLayerVisibility||n.visible){const c=(n==null?void 0:n.opacity)!=null?n.opacity:null,y=c!=null?c*t:t;if(n.type==="building-group"){const v={type:"symbol-table",title:n.title,infos:[]},_=await this._generateLegendElementsForBuildingSublayers(n.sublayers,y);v.infos.push(..._),i=[v,...i]}else n.renderer&&(i=[...await this._getRendererLegendElements(n.renderer,{title:n.title,opacity:y,sublayer:n}),...i])}}return i.filter(n=>!!n&&(!("infos"in n)||!n.infos||n.infos.length>0))}async _constructLegendElementsForSublayers(){this.legendElements=[],this.removeHandles("sublayers-watcher");const e=this.layer;if(t6(e)||dH(e)||e6(e)){this.addHandles(ge(()=>e.sublayers,()=>this._constructLegendElementsForSublayers),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(e.sublayers,this.opacity),this.notifyChange("ready")}catch(t){_e.getLogger(this).warn("Request to server for legend has failed!",t)}}}async _generateLegendElementsForSublayers(e,t,i){const r=this.layer;let n=[];this.addHandles(e.on("change",()=>this._constructLegendElementsForSublayers()),"sublayers-watcher");let o=e.toArray();!i&&this.sublayerIds&&this.sublayerIds.length&&(o=e6(r)?this.sublayerIds.map(c=>r.findSublayerForSubtypeCode(c)).filter(Ar):this.sublayerIds.map(c=>r.findSublayerById(c)).filter(Ar));for(const c of o){const y=ge(()=>[c.renderer,c.opacity,c.title,c.visible,c.legendEnabled],()=>this._constructLegendElementsForSublayers());if(this.addHandles(y,"sublayers-watcher"),!this.respectLayerVisibility||c.visible&&c.legendEnabled&&this._isSublayerInScale(c)){const v=(c==null?void 0:c.opacity)!=null?c.opacity:null,_=v!=null?v*t:t,I=!pH(c)||c.originIdOf("renderer")>dt.SERVICE&&!c.sublayers;if(c.renderer&&I)await c.load(),n=[...await this._getRendererLegendElements(c.renderer,{title:c.title,opacity:_,sublayer:c}),...n];else if(pH(c)){const $=await this._generateSymbolTableElementForSublayer(c,_,i);$&&n.unshift($)}}}return n.filter(c=>!!c&&(!("infos"in c)||!c.infos||c.infos.length>0))}async _generateSymbolTableElementForSublayer(e,t,i){if(!i){i=new Map;const n=this.layer,o=e.source;let c=null;if(!(!o||o.type==="map-layer"&&o.mapLayerId===e.id&&(!o.gdbVersion||o.gdbVersion===("gdbVersion"in n&&n.gdbVersion)))||e.originIdOf("renderer")>dt.SERVICE||e.originIdOf("labelingInfo")>dt.SERVICE||e.originIdOf("labelsVisible")>dt.SERVICE){const v=new ua({layer:this.layer});c=v.hasDynamicLayers?v.dynamicLayers:null,v.destroy()}const y=c||`${n.uid}-default`;(await this._getLegendLayers(y,c)).forEach(v=>i.set(v.layerId,v))}const r=i.get(e.id);if((!r||r!=null&&r.subLayerIds&&r.defaultVisibility)&&e.sublayers){const n=await this._generateLegendElementsForSublayers(e.sublayers,t,i);return{type:"symbol-table",title:e.title,infos:n}}return this._generateSymbolTableElementForLegendLayer(r,e,t)}_generateSymbolTableElementForLegendLayer(e,t,i){if(!(e!=null&&e.legend)||this.respectLayerVisibility&&!this._isLegendLayerInScale(e,t))return null;const r=t==null?void 0:t.renderer;let n=(t==null?void 0:t.title)||e.layerName;if(r&&(!t||(t==null?void 0:t.originIdOf("renderer"))>dt.SERVICE)){const y=(t==null?void 0:t.title)||this._getRendererTitle(r,t);y&&(n&&typeof y!="string"&&"title"in y&&(y.title=n),n=y)}const o={type:"symbol-table",title:n,legendType:e.legendType||null,infos:[]},c=t?this._sanitizeLegendForSublayer(e.legend.slice(),t):e.legend;return e.legendGroups&&e.legendGroups.length>0?e.legendGroups.forEach(y=>{var _;const v={type:"symbol-table",title:y.heading,legendType:e.legendType||null,infos:this._generateSymbolTableElementInfosForLegendLayer(c.filter(I=>I.groupId===y.id),e.layerId,i)};((_=v.infos)==null?void 0:_.length)>0&&o.infos.push(v)}):o.infos=this._generateSymbolTableElementInfosForLegendLayer(c,e.layerId,i),o.infos.length>0?o:null}_generateSymbolTableElementInfosForLegendLayer(e,t,i){return e.map(r=>{let n=r.url;if(r.imageData&&r.imageData.length>0)n=`data:image/png;base64,${r.imageData}`;else{if(n.indexOf("http")===0)return null;n=Wme(`${this.layer.url}/${t}/images/${n}`)}return{label:r.label,src:n,opacity:i??this.opacity,width:r.width,height:r.height}}).filter(Ar)}_isSublayerInScale(e){const t=e.minScale||0,i=e.maxScale||0;return!(t>0&&t<this.scale||i>this.scale)}_isLegendLayerInScale(e,t){const i=t||this.layer;let r=null,n=null,o=!0;return!i.minScale&&i.minScale!==0||!i.maxScale&&i.maxScale!==0?(e.minScale===0&&i.tileInfo&&(r=i.tileInfo.lods[0].scale),e.maxScale===0&&i.tileInfo&&(n=i.tileInfo.lods[i.tileInfo.lods.length-1].scale)):(r=Math.min(i.minScale,e.minScale)||i.minScale||e.minScale,n=Math.max(i.maxScale,e.maxScale)),(r>0&&r<this.scale||n>this.scale)&&(o=!1),o}_sanitizeLegendForSublayer(e,t){if("version"in this.layer&&+this.layer.version<10.1||e.length===0)return e;const i=t.renderer,r=e.some(c=>c.values);let n=0,o=null;return r&&e.some((c,y)=>(c.values||(n=y,o=c,o.label||(o.label="others")),o!=null)),i?i.type==="unique-value"?o&&(e.splice(n,1),e.push(o)):i.type==="class-breaks"&&(o&&e.splice(n,1),e.reverse(),o&&e.push(o)):o&&(e.splice(n,1),e.push(o)),e}async _getRendererLegendElements(e,t={}){if(!PVe(e,this.view))return _e.getLogger(this).warn(`Renderer of type '${e.type}' not supported!`),[];if(OVe(e))return this._constructPointCloudRendererLegendElements(e,t);if(pue(e))return this._constructDotDensityRendererLegendElements(e);const i=await this._loadRenderer(e);return fue(i)?this._constructPieChartRendererLegendElements(i):this._constructRendererLegendElements(i,t)}async _getLegendElementsForFeatureReduction(e){let t=null;return e.type==="binning"?t=e.renderer:e.type==="cluster"&&(t=this._getClusterRenderer(e)),t?this._getRendererLegendElements(t):[]}_getPointCloudRendererTitle(e){var t;return(((t=e.legendOptions)==null?void 0:t.title)||e.field)??""}async _constructPointCloudRendererLegendElements(e,t={}){var y;const i=t.title,r=[];let n=null,o=null;if(YP(e))n={type:"symbol-table",title:i||this._getPointCloudRendererTitle(e),infos:[]},e.colorClassBreakInfos.forEach(v=>{n.infos.unshift({label:v.label||v.minValue+" - "+v.maxValue,value:[v.minValue,v.maxValue],symbol:this._getAppliedCloneSymbol(TS,v.color)})});else if(XP(e)){const v=e.stops;let _=null;if(v!=null&&v.length&&(v.length===1&&(_=v[0].color),!_)){const $=v[0].value,A=v[v.length-1].value;$!=null&&A!=null&&(_=Gse($+(A-$)/2,v))}n={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(TS,_||TS.color)}]};const I=K7e(e.stops??[])??[];o={type:"color-ramp",title:i||this._getPointCloudRendererTitle(e),infos:I,preview:$f(I.map($=>$.color),{ariaLabel:await Zu("previewColorRampAriaLabel")})}}else QP(e)&&(n={type:"symbol-table",title:i||this._getPointCloudRendererTitle(e),infos:[]},(y=e.colorUniqueValueInfos)==null||y.forEach(v=>{n.infos.push({label:v.label||v.values.join(", "),value:v.values.join(", "),symbol:this._getAppliedCloneSymbol(TS,v.color)})}));n!=null&&n.infos.length&&r.push(n),o!=null&&o.infos.length&&r.push(o);const c=r.reduce((v,_)=>[...v,..._.infos??[]],[]).filter(v=>!!v.symbol).map(v=>this._getSymbolPreview(v,this.opacity,{symbolConfig:{applyColorModulation:!!e.colorModulation}}));return await Promise.allSettled(c),r}async _getElementInfoForDotDensity(e,t){const{color:i,label:r,valueExpressionTitle:n}=t,{backgroundColor:o,outline:c,dotSize:y}=e,v=this.effectList,_=v==null?void 0:v.effects.map(j=>j.toJSON()),I=_4(_),$=await Zu("previewTemplateAriaLabel",r||n),A=y+"-"+i+"-"+o+"-"+(c&&JSON.stringify(c.toJSON()))+"-"+I,k=this._dotDensityUrlCache,R=k.has(A)?k.get(A):uDe(e,i,{ariaLabel:$});k.set(A,R);const N={shape:{type:"image",x:0,y:0,width:R.width,height:R.height,src:R.src},fill:null,stroke:null,offset:[0,0]},D=G3([[N]],[R.width,R.height],{effectView:this.effectList,ariaLabel:$});return{opacity:1,src:R.src,preview:D,width:R.width,height:R.height}}async _constructDotDensityRendererLegendElements(e){var n;const t=e.calculateDotValue(this.view.scale),i=(n=e.legendOptions)==null?void 0:n.unit,r={type:"symbol-table",title:{value:t&&Math.round(t),unit:i||""},infos:[]};for(const o of e.attributes){const c=await this._getElementInfoForDotDensity(e,o);c.label=o.label||o.valueExpressionTitle||o.field,r.infos.push(c)}return[r]}async _constructPieChartRendererLegendElements(e){var v,_,I,$;const t=this.layer.opacity,i=[];let r=null;const n=e.outline;e.attributes.forEach(A=>{const k=new fs({color:A.color,outline:n}),R=A.label||A.valueExpressionTitle||A.field;i.push({label:R,symbol:k})});const o=i.length?[...i]:[];if((v=e.othersCategory)!=null&&v.color&&((_=e.othersCategory)==null?void 0:_.threshold)!==0){const A=new fs({color:e.othersCategory.color,outline:n});r=e.othersCategory.label||"Other",i.push({label:r,symbol:A})}if((I=e.defaultColor)!=null&&I.a){const A=new fs({color:e.defaultColor,outline:n});i.push({label:e.defaultLabel,symbol:A})}const c=await this._getVisualVariableLegendElements(e,this.layer)||[];if(i.length){c.unshift({type:"symbol-table",title:null,infos:i});const A=o.filter(R=>R.label!==r).map(R=>R.symbol.color).filter(Boolean),k=cDe(A,{holePercentage:e.holePercentage,backgroundColor:($=e.backgroundFillSymbol)==null?void 0:$.color,effectList:this.effectList,outline:n,ariaLabel:await Zu("previewPieChartAriaLabel")});c.unshift({type:"pie-chart-ramp",title:this._getRendererTitle(e,this.layer),infos:i,preview:k})}const y=c.reduce((A,k)=>[...A,...this._getAllInfos(k)],[]).filter(A=>!!(A!=null&&A.symbol)&&!(A!=null&&A.preview)).map(A=>this._getSymbolPreview(A,t,{effectList:this.effectList}));return await Promise.allSettled(y),c}async _constructRendererLegendElements(e,t={}){var D,j,z,U,W,Q;const{title:i,sublayer:r}=t,n=r||this.layer,o=F7(e);if("definitionExpression"in n){const K=n.definitionExpression;if(K&&this.respectLayerDefinitionExpression&&Bm(e)){if(this._layerDefinitionExpression!==K){this._layerDefinitionExpressionClause=await lR(K,n.fieldsIndex);const ee=new Set((await Dxe(e,n.fieldsIndex)).map(ae=>ae.toLowerCase())),ie=(D=this._layerDefinitionExpressionClause)==null?void 0:D.fieldNames.map(ae=>ae.toLowerCase());ie!=null&&ie.every(ae=>ee.has(ae))||(this._layerDefinitionExpressionClause=null,ie!=null&&ie.length&&_e.getLogger(this).warn("Definition expression will be ignored in the Legend, as fields in the expression do not match with renderer fields"))}}else this._layerDefinitionExpressionClause=null;this._layerDefinitionExpression=K}this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const c=await this._getVisualVariableLegendElements(e,n)||[],y={type:"symbol-table",title:i||this._getRendererTitle(e,n),infos:[]};let v=null,_=!1;const I=new Set;if(Ok(e)&&!this._hasSizeRamp){const K=await Use(e);y.infos.push({label:null,symbol:K})}else if(UVe(e)){let K=i;const ee=BVe(e)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",ie=c.findIndex(Me=>Me.type==="color-ramp"),ae=ie!==-1?c.splice(ie,1)[0]:null,ue=c.findIndex(Me=>Me.type==="size-ramp"),Ie=ue!==-1?c.splice(ue,1)[0]:null,Ae=[];ae&&(K=ae.title,Ae.push(ae)),Ie&&(K=Ie.title,Ae.push(Ie)),Ae.length>0&&c.push({type:ee,title:K,infos:Ae})}else if(due(e)){const K=qse(e);c.push({type:"heatmap-ramp",title:i||this._getRendererTitle(e,n),infos:K,preview:$f(K.map(ee=>ee.color),{effectList:this.effectList,ariaLabel:await Zu("previewColorRampAriaLabel")})})}else if(Bm(e)){const K=e.authoringInfo;if(K&&K.type==="relationship"){const{numClasses:ee,field1:ie,field2:ae}=K,ue=K.focus;if(ee&&ie&&ae){const Ie=[ie,ae];let Ae=cle(ue)||0;for(const fe of Ie){const{field:se,normalizationField:ye,label:he}=fe,ce=he||{field:this._getFieldAlias(se,n),normField:ye&&this._getFieldAlias(ye,n)},xe=qVe.clone();xe.angle=Ae,y.infos.push({label:ce,symbol:xe}),I.add(xe),Ae+=90}const Me=lDe({focus:ue,numClasses:ee,infos:e.uniqueValueInfos??[]});c.unshift(Me)}}else if(My(this.layer)||$S(this.layer))(j=e.uniqueValueInfos)==null||j.forEach(ee=>{ee.symbol&&this._checkDefinitionExpressionForUVR(e,ee.value)&&y.infos.push({label:ee.label||ee.value,value:ee.value,symbol:ee.symbol})});else{const{field:ee,field2:ie,field3:ae,fieldDelimiter:ue,valueExpression:Ie,defaultSymbol:Ae}=e,Me=!(!ee&&!Ie||!ie&&!ae),fe=[];if((z=e.uniqueValueGroups)==null||z.forEach(se=>{var he;const ye={type:"symbol-table",title:se.heading,infos:[]};(he=se.classes)==null||he.forEach(ce=>{const{symbol:xe,values:Ne}=ce;if(xe){const Ze=[],lt=[];for(const Sr of Ne??[]){const{value:Un,value2:ju,value3:iy}=Sr,zu=[],ch=[];(ee||Ie)&&(zu.push(Un),ch.push(this._getDomainName(ee,Un,n))),ie&&(zu.push(ju),ch.push(this._getDomainName(ie,ju,n))),ae&&(zu.push(iy),ch.push(this._getDomainName(ae,iy,n))),Ze.push(Me?zu.join(ue||""):zu[0]),lt.push(ch.join(" - "))}const Ot=Ze.join(", ");let Wt=ce.label;if(!Wt){const Sr=lt.filter(Boolean);Wt=Sr.length?Sr.join(", "):Ot}const tr=xe.clone();tr.type==="cim"&&o&&rue(tr,{innerDotSize:.5*hH,outerRingSize:hH}),Ze.some(Sr=>this._checkDefinitionExpressionForUVR(e,Sr))&&ye.infos.push({label:Wt,value:Ot,symbol:tr})}}),ye.infos.length&&fe.push(ye)}),fe.length){const se=fe[0];fe.length===1&&"title"in se&&!se.title?y.infos.push(...se.infos??[]):(Ae&&(fe.push({type:"symbol-table",infos:[{label:e.defaultLabel||"others",symbol:Ae}]}),_=!0),y.infos.push(...fe)),i||(U=e.legendOptions)!=null&&U.title||e.valueExpressionTitle||(y.title=null)}}e.defaultSymbol&&!_&&(y.infos.push({label:e.defaultLabel||"others",symbol:e.defaultSymbol}),_=!0)}else if(kf(e)){if(!o){if(v=this._isUnclassedRenderer(e),!v||!this._hasSizeRamp){const K=e.classBreakInfos.filter(({symbol:ee})=>ee);for(const{label:ee,minValue:ie,maxValue:ae,symbol:ue}of K)y.infos.unshift({label:ee||(v?null:`${ie} - ${ae}`),value:[ie,ae],symbol:ue});v&&(y.title=null),this._updateInfosForClassedSizeRenderer(e,y.infos)}e.defaultSymbol&&!v&&(y.infos.push({label:e.defaultLabel||"others",symbol:e.defaultSymbol}),_=!0)}}else if(cue(e))if($S(this.layer)||zVe(this.layer)){const K=await this._constructTileImageryStretchRendererElements(e);VVe(K)?c.push(K):y.infos=K}else{const K=this.layer;let ee,ie;(W=e.customStatistics)!=null&&W.length&&({min:ee,max:ie}=e.customStatistics[0]);let ae=[],ue=K.serviceRasterInfo;if(K.rasterFunction)try{ue=await K.generateRasterInfo(K.rasterFunction)}catch{}const Ie=k4(ue.pixelType);if(ue.bandCount===1){const Ae=((Q=K.bandIds)==null?void 0:Q[0])||0;ee=ee??(ue.statistics?ue.statistics[Ae].min:Ie[0]),ie=ie??(ue.statistics?ue.statistics[Ae].max:Ie[1]),ee||ie?c.push(await this._getStretchLegendElements(e,{min:ee,max:ie})):this._getServerSideLegend()}else if(K.bandIds&&K.bandIds.length===1)ee=ee??(ue.statistics?ue.statistics[K.bandIds[0]].min:Ie[0]),ie=ie??(ue.statistics?ue.statistics[K.bandIds[0]].max:Ie[1]),ee||ie?c.push(await this._getStretchLegendElements(e,{min:ee,max:ie})):this._getServerSideLegend();else if(ue.bandCount>=3){const{bandInfos:Ae}=ue,{bandIds:Me}=K;Ae.length>=ue.bandCount?(Me==null?void 0:Me.length)===3?(ae=Me.map(fe=>Ae[fe].name),y.infos=this._createSymbolTableElementMultiBand(ae)):K.format==="lerc"?(ae=[0,1,2].map(fe=>Ae[fe].name),y.infos=this._createSymbolTableElementMultiBand(ae)):this._getServerSideLegend():K.format==="lerc"?(ae=["band1","band2","band3"],y.infos=this._createSymbolTableElementMultiBand(ae)):this._getServerSideLegend()}else this._getServerSideLegend()}else if(uue(e))e.colormapInfos.forEach(K=>{y.infos.push({label:K.label,value:K.value,symbol:this._getAppliedCloneSymbol(LVe,K.color)})});else if(Um(e)){let K=e.symbol;switch(t.geometryType){case"point":K="pointSymbol"in n?n.pointSymbol:null;break;case"polyline":K="lineSymbol"in n?n.lineSymbol:null;break;case"polygon":K="polygonSymbol"in n?n.polygonSymbol:null}const ee=this._hasClusterSizeVariable&&this._getClusterSymbol()||!this._hasSizeRamp;e.symbol&&ee&&y.infos.push({label:e.label,symbol:K})}else if(lue(e)){e.outputUnit&&(this.title="("+e.toJSON().outputUnit+")"),y.title=e.attributeField;const K=e.getClassBreakInfos();K!=null&&K.length?K.forEach(ee=>{y.infos.push({label:ee.minValue+" - "+ee.maxValue,symbol:ee.symbol})}):y.infos.push({label:e.attributeField,symbol:e.getDefaultSymbol()})}else hue(e)&&c.push(await this._getStretchLegendElements(e,{min:0,max:255}));const $=e.defaultSymbol;!$||_||Um(e)||v&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||c.push({type:"symbol-table",infos:[{label:e.defaultLabel||"others",symbol:$}]}),y.infos.length&&c.unshift(y);const A=t.opacity==null?this.opacity:t.opacity,k=this._isTallSymbol("visualVariables"in e?e.visualVariables:null),R=My(this.layer)||$S(this.layer),N=c.reduce((K,ee)=>[...K,...this._getAllInfos(ee)],[]).filter(K=>!!(K!=null&&K.symbol)).filter(K=>{if(K.symbol.type==="cim"){const{minScale:ee,maxScale:ie}=K.symbol.data;if(ee&&ee<this.scale||ie&&ie>this.scale)return!1}return!0}).map(K=>this._getSymbolPreview(K,A,{isDefault:K.symbol===$,applyScaleDrivenSize:!I.has(K.symbol),symbolConfig:{isTall:k,isSquareFill:R},effectList:I.has(K.symbol)?null:this.effectList}));return e=null,await Promise.allSettled(N),c}_checkDefinitionExpressionForUVR(e,t){if(!this._layerDefinitionExpressionClause)return!0;const i=GVe(e,t);return(i&&this._layerDefinitionExpressionClause.testFeature(i))??!0}_getServerSideLegend(){setTimeout(()=>this.buildLegendElementsForTools(),0)}_getAllInfos(e){const t=e==null?void 0:e.infos;return t?t.reduce((i,r)=>i.concat(this._getAllInfos(r)),[]):[e]}async _constructTileImageryStretchRendererElements(e){var y,v,_;const t=this.layer,i=t.symbolizer.rasterInfo??t.raster.rasterInfo;let r,n;const o=(y=e==null?void 0:e.customStatistics)!=null&&y.length?e.customStatistics:i==null?void 0:i.statistics;if(o)({min:r,max:n}=o[0]);else{const I=k4(i.pixelType);r=I[0],n=I[1]}if(t.hasStandardTime()&&(r=t.getStandardTimeValue(r),n=t.getStandardTimeValue(n)),i.bandCount===1||((v=t.bandIds)==null?void 0:v.length)===1)return this._getStretchLegendElements(e,{min:r,max:n});const c=((_=t==null?void 0:t.bandIds)!=null&&_.length?t.bandIds:Array.from(Array(Math.min(i.bandCount,3)).keys())).map(I=>i.bandInfos[I].name);return c.length<3?c.push(c[1]):c.length>3&&c.splice(3),this._createSymbolTableElementMultiBand(c)}async _getStretchLegendElements(e,t){const i=e.colorRamp,r=X7e(i,t);return{type:"stretch-ramp",title:"",infos:r,preview:$f(r.map(n=>n.color),{ariaLabel:await Zu("previewColorRampAriaLabel")})}}_getClusterSymbol(){var r;const e=this.layer,t="featureReduction"in e&&e.featureReduction,i=t&&"symbol"in t&&t.renderer;return i&&((r=i==null?void 0:i.authoringInfo)==null?void 0:r.isAutoGenerated)!==!0?null:t&&"symbol"in t?t.symbol:null}async _getSizeLegendElement(e,t,i,r){return{type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(t):e,infos:await mVe(i,t,await N7(i),this.scale,this.view,r,this._hasClusterSizeVariable?this._getClusterSymbol():null)}}_createSymbolTableElementMultiBand(e){const t=[],i=["red","green","blue"];return e.forEach((r,n)=>{t.push({label:{colorName:i[n],bandName:r},src:G7e[n],opacity:this.opacity??1})}),t}_updateInfosForClassedSizeRenderer(e,t){const i=e.authoringInfo&&e.authoringInfo.type==="class-breaks-size",r=e.classBreakInfos.some(n=>dT(n.symbol));if(i&&r){const n=Ck,o=kk,c=e.classBreakInfos.length,y=(n-o)/(c>1?c-1:c);t.forEach((v,_)=>{v.size=n-y*_})}}_isTallSymbol(e){let t=!1,i=!1;if(e)for(let r=0;r<e.length&&(!t||!i);r++){const n=e[r];n.type==="size"&&(n.axis==="height"&&(t=!0),n.axis==="width-and-depth"&&(i=!0))}return t&&i}async _getSymbolPreview(e,t,i){var o,c,y;let r=!(i!=null&&i.isDefault)&&e.size==null&&this._hasSizeRamp?po(Ur.size):e.size;if(this._scaleDrivenSizeVariable&&(i!=null&&i.applyScaleDrivenSize)){const{getSize:v}=await de(()=>Promise.resolve().then(()=>ty),void 0,import.meta.url);r=v(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:e.symbol.type==="simple-marker"?e.symbol.style:null})}const n=!(i!=null&&i.isDefault)&&this._hasSizeRamp||!(!this._scaleDrivenSizeVariable||!(i!=null&&i.applyScaleDrivenSize));return hle(e.symbol,{size:r,opacity:t,scale:!1,symbolConfig:i==null?void 0:i.symbolConfig,effectView:i==null?void 0:i.effectList,style:"legend",cimOptions:{allowScalingUp:n,viewParams:this.isScaleDriven?{viewingMode:((o=this.view)==null?void 0:o.type)==="2d"?"map":(c=this.view)==null?void 0:c.viewingMode,scale:(y=this.view)==null?void 0:y.scale}:null},ariaLabel:e.label&&typeof e.label!="string"?null:await Zu("previewTemplateAriaLabel",e.label)}).then(v=>(e.preview=v,e)).catch(()=>(e.preview=null,e))}_getClusterRenderer(e){var n,o;this._hasClusterSizeVariable=!1;const t="renderer"in this.layer?this.layer.renderer:null,i=((n=e.renderer)==null?void 0:n.clone())||(t==null?void 0:t.clone()),r=lVe(e,this.layerView,this.view);if(r&&i!=null&&"visualVariables"in i&&!((o=i.visualVariables)==null?void 0:o.some(y=>y.type==="size"&&y.target!=="outline"&&!IS.test(y.valueExpression)))){if("clusterMinSize"in e&&"clusterMaxSize"in e){const{clusterMinSize:v,clusterMaxSize:_}=e;r.legendOptions=new toe({showLegend:v!==_})}const y=i.visualVariables||[];i.visualVariables=y.concat([r]),this._hasClusterSizeVariable=!0}return i}async _loadRenderer(e){const t=[],i=e.clone(),r=await N7(i);if(kf(i)||Bm(i)){const n=(i.classBreakInfos||i.uniqueValueInfos).map(o=>this._fetchSymbol(o.symbol,r).then(c=>{o.symbol=c}).catch(()=>{o.symbol=null}));Array.prototype.push.apply(t,n)}return t.push(this._fetchSymbol(i.symbol||i.defaultSymbol,i.defaultSymbol?null:r).then(n=>{this._applySymbolToRenderer(i,n,Um(i))}).catch(()=>{this._applySymbolToRenderer(i,null,Um(i))})),await Promise.allSettled(t),i}_applySymbolToRenderer(e,t,i){i?e.symbol=t:e.defaultSymbol=t}async _fetchSymbol(e,t){if(!e)throw new Error;if(e.type==="web-style"){const i=this._webStyleSymbolCache;try{const r=await(this.view.type==="2d"?e.fetchCIMSymbol({cache:i}):e.fetchSymbol({cache:i}));return this._getAppliedCloneSymbol(r,t)}catch{throw _e.getLogger(this).warn("Fetching web-style failed!"),new Error}}return this._getAppliedCloneSymbol(e,t)}_getAppliedCloneSymbol(e,t){if(!e||!t)return e;const i=e.clone(),r=t&&t.toRgba();return i.type.includes("3d")?this._applyColorTo3dSymbol(i,r):i.type==="cim"?kse(i,t):i.color&&(i.color=new je(r||i.color)),i}_applyColorTo3dSymbol(e,t){t&&e.symbolLayers.forEach(i=>{i&&(i.material||(i.material={}),i.material.color=new je(t))})}async _getVisualVariableLegendElements(e,t){var $,A;if(!("visualVariables"in e)||e.type==="vector-field")return null;const i=e.visualVariables??[],r=[],n=[],o=[],c=F7(e);if((($=c==null?void 0:c.sizeStops)==null?void 0:$.length)===2&&(kf(e)||Bm(e))){const[k,R]=c.sizeStops;n.push(new Xg({field:c.field??void 0,normalizationField:c.normalizationField,minSize:k.size,maxSize:R.size,minDataValue:k.value,maxDataValue:R.value}))}for(const k of i)k.type==="color"?r.push(k):k.type==="size"?n.push(k):k.type==="opacity"&&o.push(k);const y=[...r,...n,...o];let v,_;if(r.length===0&&kf(e)&&e.classBreakInfos&&e.classBreakInfos.length===1){const k=e.classBreakInfos[0];v=k&&k.symbol}if(r.length===0&&Um(e)&&(v=e.symbol),v)if(v.type.includes("3d")){const k=v.symbolLayers.at(0);k.type==="water"?k.color!=null&&(_=k.color):((A=k.material)==null?void 0:A.color)!=null&&(_=k.material.color)}else v.url||(_=v.color);const I=this.effectList;return(await Promise.all(y.map(async k=>{if(!k.legendOptions||k.legendOptions.showLegend!==!1){const R=Ok(e)?k.field:this._getRampTitle(k,t);let N=null;const D=W7e(t,k,this.view.timeZone);if(k.type==="color"){const j=await D7(k,null,D)??[];N={type:"color-ramp",title:R,infos:j,preview:$f(j.map(z=>z.color),{effectList:I,ariaLabel:await Zu("previewColorRampAriaLabel")})},this._hasColorRamp||(this._hasColorRamp=j.length>0)}else if(k.type==="size"&&k.target!=="outline")IS.test(k.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=k):(N=await this._getSizeLegendElement(R,k,e,D),this._hasSizeRamp||(this._hasSizeRamp=!(N.infos==null||!N.infos.length)));else if(k.type==="opacity"){const j=await D7(k,_,D)??[];N={type:"opacity-ramp",title:R,infos:j,preview:$f(j.map(z=>z.color),{effectList:I,ariaLabel:await Zu("previewColorRampAriaLabel")})},this._hasOpacityRamp||(this._hasOpacityRamp=j.length>0)}return N!=null&&N.infos?N:null}}))).filter(Ar)}_getDomainName(e,t,i){var r;if(e&&typeof e!="function"){const n="getField"in i&&((r=i.getField)==null?void 0:r.call(i,e)),o=n&&"getFieldDomain"in i&&i.getFieldDomain?i.getFieldDomain(n.name,{excludeImpliedDomains:we("esri-widget-legacy-field-domain-calculation")}):null;return(o==null?void 0:o.type)==="coded-value"?o.getName(t):null}return null}_getClusterTitle(e){const t=this.layer,i=e.field;if("featureReduction"in t&&t.featureReduction&&t.featureReduction.type==="cluster"){const r=t.featureReduction,n="popupTemplate"in r&&r.popupTemplate,o=n&&n.fieldInfos;if(o){for(const c of o)if(c.fieldName===i)return i==="cluster_count"?c.label||{showCount:!0}:c.label}}return{showCount:!0}}_getRampTitle(e,t){var _,I;let i=e.field,r=e.normalizationField,n=!1,o=!1,c=!1,y=null;i=typeof i=="function"?null:i,r=typeof r=="function"?null:r;const v=(_=e.legendOptions)==null?void 0:_.title;if(v!=null)y=v;else if(e.valueExpressionTitle)y=e.valueExpressionTitle;else{if("renderer"in t&&t.renderer&&"authoringInfo"in t.renderer&&((I=t.renderer.authoringInfo)!=null&&I.visualVariables)){const $=t.renderer.authoringInfo.visualVariables;for(let A=0;A<$.length;A++){const k=$[A];if(k.type==="color"){if(k.style==="ratio"){n=!0;break}if(k.style==="percent"){o=!0;break}if(k.style==="percent-of-total"){c=!0;break}}}}y={field:i&&this._getFieldAlias(i,t),normField:r&&this._getFieldAlias(r,t),ratio:n,ratioPercent:o,ratioPercentTotal:c}}return y}_getRendererTitle(e,t){var y;const i=e;if((y=i.legendOptions)!=null&&y.title)return i.legendOptions.title;if(i.valueExpressionTitle)return i.valueExpressionTitle;let r=i.field,n=null,o=null;if(kf(i)&&(n=i.normalizationField,o=i.normalizationType==="percent-of-total"),r=typeof r=="function"?null:r,n=typeof n=="function"?null:n,Bm(i)){const{field2:v,field3:_,fieldDelimiter:I}=i;let $=r&&this._getFieldAlias(r,t);return v&&($=`<${$}>${I}<${this._getFieldAlias(v,t)}>`,_&&($=`${$}${I}<${this._getFieldAlias(_,t)}>`)),$}let c=null;return(r||n)&&(c={field:r&&this._getFieldAlias(r,t),normField:n&&this._getFieldAlias(n,t),normByPct:o}),c}_getFieldAlias(e,t){var I,$;const i="popupTemplate"in t?t.popupTemplate:null,r=i==null?void 0:i.fieldInfos;let n=r==null?void 0:r.find(A=>e===A.fieldName),o=null;"getField"in t&&t.getField?o=t.getField(e):"fieldsIndex"in t&&t.fieldsIndex&&(o=t.fieldsIndex.get(e));let c=null;const y="featureReduction"in t&&t.featureReduction;y&&(n??(n="popupTemplate"in y?($=(I=y.popupTemplate)==null?void 0:I.fieldInfos)==null?void 0:$.find(A=>{var k;return(e==null?void 0:e.toLowerCase())===((k=A.fieldName)==null?void 0:k.toLowerCase())}):void 0),"fields"in y&&y.fields&&(c=y.fields.find(A=>{var k;return((k=A.name)==null?void 0:k.toLowerCase())===(e==null?void 0:e.toLowerCase())})));const v=n||o||c;let _=null;return v&&(_=(n==null?void 0:n.label)||(o==null?void 0:o.alias)||(c==null?void 0:c.alias)||"name"in v&&v.name||"fieldName"in v&&v.fieldName||null),_}_isUnclassedRenderer(e){const t=e.visualVariables;let i=!1;return kf(e)&&e.classBreakInfos&&e.classBreakInfos.length===1&&t&&(i=e.field?t.some(r=>!(!r||e.field!==r.field||(e.normalizationField||r.normalizationField)&&e.normalizationField!==r.normalizationField)):!!t.length),i}};m([w()],Er.prototype,"children",void 0),m([w({readOnly:!0})],Er.prototype,"effectList",null),m([w()],Er.prototype,"layerView",void 0),m([w()],Er.prototype,"layer",void 0),m([w()],Er.prototype,"legendElements",void 0),m([w({readOnly:!0})],Er.prototype,"opacity",null),m([w()],Er.prototype,"parent",void 0),m([w({readOnly:!0,dependsOn:[]})],Er.prototype,"ready",null),m([w()],Er.prototype,"hideLayersNotInCurrentView",void 0),m([w()],Er.prototype,"keepCacheOnDestroy",void 0),m([w()],Er.prototype,"respectLayerDefinitionExpression",void 0),m([w()],Er.prototype,"respectLayerVisibility",void 0),m([w({readOnly:!0})],Er.prototype,"scale",null),m([w()],Er.prototype,"sublayerIds",void 0),m([w({readOnly:!0})],Er.prototype,"isScaleDriven",null),m([w()],Er.prototype,"title",void 0),m([w({readOnly:!0,dependsOn:["ready"],value:0})],Er.prototype,"version",null),m([w()],Er.prototype,"view",void 0),Er=m([H("esri.widgets.Legend.support.ActiveLayerInfo")],Er);const yue=Er,Op={state:"state",view:"view",allLayerViews:"all-layer-views",legendProperties:"legend-properties"},mue=Oe.ofType(yue),HVe=new Set(["esri.layers.BuildingSceneLayer","esri.layers.CatalogLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.OrientedImageryLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.SubtypeGroupLayer","esri.layers.TileLayer","esri.layers.VoxelLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer","esri.layers.LinkChartLayer","esri.layers.catalog.CatalogFootprintLayer","esri.layers.catalog.CatalogDynamicGroupLayer","esri.layers.knowledgeGraph.KnowledgeGraphSublayer","esri.layers.KnowledgeGraphLayer"]),gue="view.basemapView.baseLayerViews",vue="view.groundView.layerViews",wue="view.basemapView.referenceLayerViews",WVe=[gue,vue,"view.layerViews",wue];let Mo=class extends Ve{constructor(t){super(t),this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new Oe,this.activeLayerInfos=new mue,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this.addHandles(ge(()=>this.view,()=>this._viewHandles(),qe),Op.view),this.addHandles(g3(()=>this._refresh()))}destroy(){this._destroyViewActiveLayerInfos(),this.view=null}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}_viewHandles(){this.removeHandles(Op.state),this.view&&this.addHandles(ge(()=>this.state,()=>this._stateHandles(),qe),Op.state)}_stateHandles(){this._resetAll(),this.state==="ready"&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this.removeHandles([Op.allLayerViews,Op.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(t){this.removeHandles(t);const i=this._activeLayerInfosByLayerViewId[t];delete this._activeLayerInfosByLayerViewId[t],i!=null&&i.parent&&i.parent.children.remove(i)}_watchPropertiesAndAllLayerViews(){const{view:t}=this;if(!t)return;const{allLayerViews:i}=t;i.length&&this._refresh(),this.addHandles(i.on("change",r=>this._allLayerViewsChangeHandle(r)),Op.allLayerViews),this.addHandles(ge(()=>[this.layerInfos,this.basemapLegendVisible,this.groundLegendVisible],()=>this._propertiesChangeHandle()),Op.legendProperties)}_allLayerViewsChangeHandle(t){t.moved.length?this._propertiesChangeHandle():(t.removed.forEach(i=>this._destroyViewActiveLayerInfo(i.uid)),this._refresh())}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(t){const i=this.view;if(t.length<2||!i)return;const r=[];t.forEach(o=>{if(!o.parent){const c=o.layer.parent,y=c&&"uid"in c&&this._layerViewByLayerId[c.uid],v=y&&this._activeLayerInfosByLayerViewId[y.uid];v&&t.includes(v)&&(r.push(o),o.parent=v,v.children.add(o),this._sortActiveLayerInfos(v.children))}}),t.removeMany(r);const n={};i.allLayerViews.forEach((o,c)=>n[o.layer.uid]=c),t.sort((o,c)=>{const y=n[o.layer.uid]||0;return(n[c.layer.uid]||0)-y})}_generateLayerViews(){const t=[];return WVe.filter(this._filterLayerViews,this).map(i=>hs(this,i)).filter(i=>i!=null).forEach(this._collectLayerViews("layerViews",t)),t}_filterLayerViews(t){const i=!this.basemapLegendVisible&&(t===gue||t===wue),r=!this.groundLegendVisible&&t===vue;return!i&&!r}_collectLayerViews(t,i){const r=n=>(n&&n.forEach(o=>{i.push(o),r(o[t])}),i);return r}_filterLayerViewsByLayerInfos(t){const i=this.layerInfos;return!i||!i.length||i.some(r=>this._hasLayerInfo(r,t))}_hasLayerInfo(t,i){const r=this._isLayerUIDMatching(t.layer,i.layer.uid);return r&&(this._layerInfosByLayerViewId[i.uid]=t),r}_isLayerUIDMatching(t,i){return t&&(t.uid===i||this._hasLayerUID(t.layers,i))}_hasLayerUID(t,i){return t&&t.some(r=>this._isLayerUIDMatching(r,i))}_isLayerViewSupported(t){return!!HVe.has(t.layer.declaredClass)&&(this._layerViewByLayerId[t.layer.uid]=t,!0)}_generateActiveLayerInfo(t){this._isLayerActive(t)?this._buildActiveLayerInfo(t):(this.removeHandles(t.uid),this.addHandles(ge(()=>{var i;return[t.legendEnabled,(i=t.layer)==null?void 0:i.legendEnabled]},()=>this._layerActiveHandle(t)),t.uid))}_layerActiveHandle(t){this._isLayerActive(t)&&(this.removeHandles(t.uid),this._buildActiveLayerInfo(t))}_isLayerActive(t){var i;return!this.respectLayerVisibility||t.legendEnabled&&((i=t.layer)==null?void 0:i.legendEnabled)}_buildActiveLayerInfo(t){var y;const i=t.layer,r=t.uid,n=this._layerInfosByLayerViewId[r];let o=this._activeLayerInfosByLayerViewId[r];if(!o){const v=(n==null?void 0:n.title)!==void 0&&n.layer.uid===i.uid;o=new yue({layer:i,layerView:t,title:v?n.title:i.title,view:this.view??void 0,respectLayerDefinitionExpression:this.respectLayerDefinitionExpression,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:(n==null?void 0:n.sublayerIds)||[]}),this._activeLayerInfosByLayerViewId[r]=o}const c=i.parent&&"uid"in i.parent?this._layerViewByLayerId[(y=i.parent)==null?void 0:y.uid]:null;if(o.parent=this._activeLayerInfosByLayerViewId[c==null?void 0:c.uid],!this.hasHandles(r)){const v=[ge(()=>i.title,_=>this._titleHandle(_,o)),ge(()=>[i.opacity,"renderer"in i&&i.renderer,"pointSymbol"in i&&i.pointSymbol,"lineSymbol"in i&&i.lineSymbol,"polygonSymbol"in i&&i.polygonSymbol],()=>this._constructLegendElements(o)),en(()=>{var _;return((_=this.view)==null?void 0:_.stationary)===!0},()=>this._scaleHandle(o),qe),ge(()=>t.layer?aH(t.layer,t.view):null,()=>this._constructLegendElements(o)),ge(()=>t.updating,()=>{t.layer!=null&&aH(t.layer,t.view)!=null&&this._constructLegendElements(o)}),ge(()=>"effect"in i&&i.effect,()=>this._constructLegendElements(o)),en(()=>{var _;return(_=this.view)==null?void 0:_.timeZone},()=>this._constructLegendElements(o),qe)];if(this.respectLayerVisibility){const _=ge(()=>t.legendEnabled,$=>this._legendEnabledHandle($,o)),I=ge(()=>i.legendEnabled,$=>this._legendEnabledHandle($,o));v.push(_,I)}if(this.respectLayerDefinitionExpression&&"definitionExpression"in i){const _=ge(()=>[i.definitionExpression,this.respectLayerDefinitionExpression],()=>{o.respectLayerDefinitionExpression=this.respectLayerDefinitionExpression,this._constructLegendElements(o)});v.push(_)}this.addHandles(v,r)}o.isScaleDriven||this._constructLegendElements(o),this._addActiveLayerInfo(o)}_titleHandle(t,i){i.title=t,this._constructLegendElements(i)}_legendEnabledHandle(t,i){t?this._addActiveLayerInfo(i):this._removeActiveLayerInfo(i)}_scaleHandle(t){(t.isScaleDriven||t.hideLayersNotInCurrentView)&&this._constructLegendElements(t)}_addActiveLayerInfo(t){var n;const{layerView:i,layer:r}=t;if(this._isLayerActive(i)&&!this.activeLayerInfos.includes(t)){const o=t.parent;if(o)o.children.includes(t)||o.children.push(t),this._sortActiveLayerInfos(o.children);else{const c=(n=this.layerInfos)==null?void 0:n.some(v=>v.layer.uid===r.uid),y=r.parent;y&&"uid"in y&&this._layerViewByLayerId[y.uid]&&!c?this._activeLayerInfosWithNoParent.add(t):(this.activeLayerInfos.add(t),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const c=[];this._activeLayerInfosWithNoParent.forEach(y=>{const v=y.layer.parent,_=v&&"uid"in v?this._layerViewByLayerId[v==null?void 0:v.uid]:null,I=this._activeLayerInfosByLayerViewId[_==null?void 0:_.uid];I&&(c.push(y),y.parent=I)}),c.length&&(this._activeLayerInfosWithNoParent.removeMany(c),c.forEach(y=>this._addActiveLayerInfo(y)))}}}_removeActiveLayerInfo(t){const i=t.parent;i?i.children.remove(t):this.activeLayerInfos.remove(t)}_constructLegendElements(t){const i=t.layer;"featureCollections"in i&&i.featureCollections?t.buildLegendElementsForFeatureCollections(i.featureCollections):"featureReduction"in i&&i.featureReduction&&"renderer"in i.featureReduction&&(i.featureReduction.type==="binning"||i.featureReduction.type==="cluster")&&(!this.view||i.featureReduction.maxScale<=this.view.scale)?t.buildLegendElementsForFeatureReduction(i.featureReduction):"renderer"in i&&i.renderer&&!("sublayers"in i)?t.buildLegendElementsForRenderer(i.renderer):"url"in i&&i.url&&i.type!=="catalog"&&i.type!=="knowledge-graph"?t.buildLegendElementsForTools():t.children.forEach(r=>this._constructLegendElements(r))}};m([w({type:mue})],Mo.prototype,"activeLayerInfos",void 0),m([w()],Mo.prototype,"basemapLegendVisible",void 0),m([w()],Mo.prototype,"groundLegendVisible",void 0),m([w()],Mo.prototype,"hideLayersNotInCurrentView",void 0),m([w()],Mo.prototype,"keepCacheOnDestroy",void 0),m([w()],Mo.prototype,"respectLayerDefinitionExpression",void 0),m([w()],Mo.prototype,"respectLayerVisibility",void 0),m([w()],Mo.prototype,"layerInfos",void 0),m([w({readOnly:!0})],Mo.prototype,"state",null),m([w()],Mo.prototype,"view",void 0),Mo=m([H("esri.widgets.Legend.LegendViewModel")],Mo);const JVe=Mo,Kt="esri-legend--card",Cy="esri-legend",tt={activated:`${Kt}__carousel-indicator--activated`,base:Kt,stacked:`${Cy}--stacked`,carouselTitle:`${Kt}__carousel-title`,indicator:`${Kt}__carousel-indicator`,intervalSeparator:`${Kt}__interval-separator`,imageryLayerStretchedImage:`${Kt}__imagery-layer-image--stretched`,imageLabel:`${Kt}__image-label`,layerCaption:`${Kt}__layer-caption`,labelElement:`${Kt}__label-element`,layerRow:`${Kt}__layer-row`,labelCell:`${Kt}__label-cell`,message:`${Kt}__message`,rampLabel:`${Kt}__ramp-label`,section:`${Kt}__section`,relationshipSection:`${Kt}__relationship-section`,serviceCaptionText:`${Kt}__service-caption-text`,serviceContent:`${Kt}__service-content`,service:`${Kt}__service`,groupLayer:`${Kt}__group-layer`,groupLayerChild:`${Kt}__group-layer-child`,symbol:`${Kt}__symbol`,sizeRampRow:`${Kt}__size-ramp-row`,symbolRow:`${Kt}__symbol-row`,symbolCell:`${Kt}__symbol-cell`,indicatorContainer:`${Kt}__carousel-indicator-container`,intervalSeparatorsContainer:`${Kt}__interval-separators-container`,relationshipLabelContainer:`${Kt}__relationship-label-container`,labelContainer:`${Kt}__label-container`,serviceCaptionContainer:`${Kt}__service-caption-container`,symbolContainer:`${Kt}__symbol-container`,sizeRampContainer:`${Kt}__size-ramp-container`,sizeRampPreview:`${Kt}__size-ramp-preview`,pieChartRampPreview:`${Kt}__pie-chart-ramp-preview`,rampContainer:`${Cy}__ramps`,sizeRampHorizontal:`${Cy}__size-ramp--horizontal`,rampLabelsContainer:`${Cy}__ramp-labels`,layerInfo:`${Cy}__layer-cell ${Cy}__layer-cell--info`,univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card"},ZVe=J9(),bue=10,eN=20,TT=10,tN=20,iN={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};function KVe(e="vertical"){const t="stroke:rgb(200, 200, 200);stroke-width:1";return e==="vertical"?B("svg",{height:"4",width:"10"},B("line",{style:t,x1:"0",x2:"10",y1:"2",y2:"2"})):B("svg",{height:"10",width:"10"},B("line",{style:t,x1:"5",x2:"5",y1:"0",y2:"10"}))}function YVe(e,t="vertical"){const i=document.createElement("div");return i.style.height=`${eN}px`,i.className=iN.univariateAboveAndBelowSymbol,e!=null&&(i.style.opacity=e.toString()),ZVe.append(i,KVe.bind(null,t)),i}function _ue(e,t,i="vertical",r){e.infos.forEach((n,o)=>{if(r&&o===2)n.preview=YVe(t,i);else{const c=Qi(n.size)+(i==="horizontal"?tN:TT),y=n.preview,v=(y==null?void 0:y.tagName.toLowerCase())==="div",_=v?y:document.createElement("div");_.className=iN.univariateAboveAndBelowSymbol,i==="horizontal"?_.style.width=`${c}px`:_.style.height=`${c}px`,!v&&y&&_.appendChild(y),n.preview=_}})}function L4(e,t="classic"){const i=e.infos;return t==="classic"?(Qi(i[0].size)+TT)/2:(Qi(i[0].size)-Qi(i[i.length-1].size))/2}function q1(e,t){if(!e)return null;const i=e.infos.map(n=>n.color),r=$f(t.type==="full"?i:t.type==="above"?i.slice(0,3):i.slice(2,5),{width:t.width,height:t.height,align:t.rampAlignment,effectList:t.effectList,ariaLabel:t.ariaLabel});return r.className=iN.colorRamp,t.opacity!=null&&(r.style.opacity=t.opacity.toString()),r}function Rk(e,t,i,r="vertical"){let n=0;const o=e.infos,c=Math.floor(o.length/2),y=t==="full"||t==="above"?0:c,v=t==="full"||t==="below"?o.length-1:c;for(let _=y;_<=v;_++)i&&_===c?n+=r==="horizontal"?bue:eN:n+=Qi(o[_].size)+(r==="horizontal"?tN:TT);return Math.round(n)}function H1(e,t,i,r="vertical"){const n=Rk(e,t,i,r),o=e.infos,c=Math.floor(o.length/2),y=t==="full"||t==="above"?0:c,v=t==="full"||t==="below"?o.length-1:c,_=t==="full"?o[y].size+o[v].size:t==="above"?o[y].size:o[v].size,I=i?r==="vertical"?eN:bue:0,$=r==="vertical"?TT*(t==="full"?2:1):tN*(t==="full"?2:1);return Math.round(n-(Qi(_)/2+I/2+$/2))}function Sue(e,t,i="vertical"){const r=e.infos;let n=r.find(({type:c})=>c==="size-ramp"),o=r.find(({type:c})=>c==="color-ramp");return n&&(n={...n},n.infos=[...n.infos],_ue(n,t,i,!0)),o&&(o={...o},o.infos=[...o.infos]),i==="horizontal"&&(n==null||n.infos.reverse(),o==null||o.infos.reverse()),{sizeRampElement:n,colorRampElement:o}}function xue(e,t="vertical"){const i=e.infos;let r=i.find(({type:o})=>o==="size-ramp"),n=i.find(({type:o})=>o==="color-ramp");return r&&(r={...r},r.infos=[...r.infos],_ue(r,null,t,!1)),n&&(n={...n},n.infos=[...n.infos]),t==="horizontal"&&(r==null||r.infos.reverse(),n==null||n.infos.reverse()),{sizeRampElement:r,colorRampElement:n}}function XVe(e,t){return t}function Jr(e){const t=this;e.appendChild(t)}function Rd(e,t,i){if(!t)return;if(typeof t=="number")return t;if(typeof t=="string")return g0e(t);if("value"in t||"unit"in t)return mn(e.dotValue,t);if("colorName"in t&&"bandName"in t)return e[t.colorName]+": "+(e[t.bandName]||t.bandName);if("showCount"in t)return t.showCount?e.clusterCountTitle:void 0;let r=null;return XVe(t,i)?r=t.ratioPercentTotal?"showRatioPercentTotal":t.ratioPercent?"showRatioPercent":t.ratio?"showRatio":t.normField?"showNormField":t.field?"showField":null:Iue(t,i)&&(r=t.normField?"showNormField":t.normByPct?"showNormPct":t.field?"showField":null),r?mn(r==="showField"?"{field}":e[r],{field:t.field,normField:t.normField}):void 0}function Iue(e,t){return!t}function Tue(e,t){return!!(t&&t==="Stretched"&&e.version>=10.3&&e.declaredClass==="esri.layers.ImageryLayer")}function $ue(e,t){var i;return e.label?t[e.label]+": "+(typeof e.value=="string"?e.value:jn(e.value??0,{style:"decimal",notation:(i=e.value)!=null&&i.toString().toLowerCase().includes("e")?"scientific":"standard"})):""}const QVe=25,eUe=25,tUe=768,iUe=100,rUe="#ddd",ky=window.devicePixelRatio;function nUe(e){var t,i;if(e){if(e.type.includes("3d")){const r=(t=e.symbolLayers)==null?void 0:t.length;if(!r)return;const n=e.symbolLayers.at(r-1),o=(i=n.resource)==null?void 0:i.primitive;return o==="circle"||o==="cross"||o==="kite"||o==="sphere"||o==="cube"||o==="diamond"}{const r=e.style;return r==="circle"||r==="diamond"||r==="cross"}}}function sUe(e){var t;if(e){if(e.type.includes("3d")){const i=(t=e.symbolLayers)==null?void 0:t.length;if(!i)return;const r=e.symbolLayers.at(i-1).get("resource.primitive");return r==="triangle"||r==="cone"||r==="tetrahedron"}return e.style==="triangle"}}let ol=class extends yi{constructor(t,i){super(t,i),this._hasIndicators=!1,this._selectedSectionName=null,this._sectionNames=[],this._sectionMap=new Map,this.activeLayerInfos=null,this.headingLevel=3,this.layout="stack",this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}initialize(){this.addHandles(ge(()=>this.activeLayerInfos,t=>{this.removeAllHandles(),this._watchForSectionChanges(t)}))}render(){const{view:t}=this;this._hasIndicators=this.layout==="auto"&&t&&t.container.clientWidth<=tUe||this.layout==="stack";const i=this.activeLayerInfos,r=i==null?void 0:i.toArray().map(_=>this._renderLegendForLayer(_)).filter(_=>!!_);this._hasIndicators?this._selectedSectionName&&this._sectionNames.includes(this._selectedSectionName)||(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;const n=this._sectionNames.length,o=this._sectionNames.map((_,I)=>{const $=mn(this.messagesCommon.pagination.pageText,{index:I+1,total:n});return B("div",{"aria-controls":`${_}-panel`,"aria-label":$,"aria-selected":(this._selectedSectionName===_).toString(),bind:this,class:this.classes(tt.indicator,{[tt.activated]:this._selectedSectionName===_}),"data-section-name":_,id:_,key:_,onclick:this._selectSection,onkeydown:this._focusSection,role:"tab",tabIndex:this._selectedSectionName===_?0:-1,title:$})}),c=this._hasIndicators&&n>1?B("div",{class:tt.indicatorContainer,key:"carousel-navigation",role:"tablist"},o):null,y=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):r!=null&&r.length?r:null,v={[tt.stacked]:this._hasIndicators};return B("div",{class:this.classes(tt.base,v)},y||B("div",{class:tt.message},this.messages.noLegend),c)}_selectSection(t){const i=t.target.getAttribute("data-section-name");i&&(this._selectedSectionName=i)}_focusSection(t){switch(t.key){case"ArrowLeft":case"ArrowRight":this._switchSectionOnArrowPress(t);break;case"Enter":case" ":this._selectSection(t)}}_switchSectionOnArrowPress(t){const i=t.key,r=i==="ArrowLeft"?-1:1,n=t.target.getAttribute("data-section-name"),o=this._sectionNames.indexOf(n),c=this._sectionNames;let y=null;o!==-1&&(c[o+r]?y=document.getElementById(c[o+r]):i==="ArrowLeft"?y=document.getElementById(c[c.length-1]):i==="ArrowRight"&&(y=document.getElementById(c[0])),y==null||y.focus())}_watchForSectionChanges(t){if(this._generateSectionNames(),t){t.forEach(r=>{const n=`activeLayerInfo-${r.layer.uid}-version-change`;this.removeHandles(n),this._watchForSectionChanges(r.children),this.addHandles(ge(()=>r.version,()=>this._generateSectionNames()),n)});const i="activeLayerInfos-collection-change";this.removeHandles(i),this.addHandles(t.on("change",()=>this._watchForSectionChanges(t)),i)}}_generateSectionNames(){this._sectionNames.length=0,this._selectedSectionName=null,this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this)}_getSectionName(t,i,r){return`${this.id}${t.uid}-type-${i.type}-${r}`}_generateSectionNamesForActiveLayerInfo(t){t.children.forEach(this._generateSectionNamesForActiveLayerInfo,this),t.legendElements&&t.legendElements.forEach((i,r)=>{this._sectionNames.push(this._getSectionName(t.layer,i,r))})}_renderLegendForLayer(t){if(!t.ready)return null;if(t.children.length){const i=t.children.map(r=>this._renderLegendForLayer(r)).toArray();return B("div",{class:this.classes(tt.service,tt.groupLayer),key:t.layer.uid},B("div",{class:tt.serviceCaptionContainer},t.title),i)}{const i=t.legendElements;if(i&&!i.length)return null;const r=i.some(c=>c.type==="relationship-ramp"),n=i.map((c,y)=>this._renderLegendForElement(c,t,y,r)).filter(c=>!!c);if(!n.length)return null;const o={[tt.groupLayerChild]:!!t.parent};return B("div",{class:this.classes(tt.service,o),key:t.layer.uid},B("div",{class:tt.serviceCaptionContainer},B("div",{class:tt.serviceCaptionText},t.title)),B("div",{class:tt.serviceContent},n))}}_renderLegendForElement(t,i,r,n=!1,o=!1){var N;const c=t.type==="color-ramp",y=t.type==="opacity-ramp",v=i.layer;let _=null;if(typeof t.title=="string")_=t.title;else if(t.title){const D=t.title,j=Rd(this.messages,D,c||y);_=D.title?`${D.title} (${j})`:j}const I=this._getSectionName(v,t,r),$=this._hasIndicators&&!o?B("div",null,B(c0,{class:tt.carouselTitle,level:this.headingLevel},i.title),B(c0,{class:tt.layerCaption,level:xCe(this.headingLevel)},_)):_?B(c0,{class:tt.layerCaption,level:this.headingLevel},_):null,A=i.effectList;let k=null;switch(t.type){case"symbol-table":{const D=t.infos.map((j,z)=>this._renderLegendForElementInfo(j,i,t.legendType,z)).filter(j=>!!j);if(D.length){const j=(N=D[0].properties.classes)==null?void 0:N[tt.symbolRow],z={[tt.labelContainer]:!j&&!n,[tt.relationshipLabelContainer]:n};k=B("div",{class:this.classes(z)},D)}break}case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":k=this._renderLegendForRamp(t,v.opacity,A);break;case"size-ramp":k=this._renderSizeRamp(t,v.opacity);break;case"pie-chart-ramp":k=this._renderPieChartRamp(t);break;case"relationship-ramp":k=tle(t,this.id,{opacity:v.opacity,effectList:A,ariaLabel:this.messages.previewRelationshipRampAriaLabel});break;case"univariate-above-and-below-ramp":k=this._renderUnivariateAboveAndBelowRamp(t,v.opacity,A);break;case"univariate-color-size-ramp":k=this._renderUnivariateColorSizeRamp(t,v.opacity,A)}if(!k)return null;const R=B("div",{"aria-labelledby":I,class:tt.section,id:`${I}-panel`,key:I,role:"tabpanel",tabIndex:0},[$,k]);return o||this._sectionMap.set(I,R),R}_renderPieChartRamp(t){return B("div",{afterCreate:Jr,bind:t.preview,class:tt.pieChartRampPreview})}_renderUnivariateAboveAndBelowRamp(t,i,r){var Q;const{sizeRampElement:n,colorRampElement:o}=Sue(t,i,"horizontal");if(!n)return null;const c=Rk(n,"full",!0,"horizontal"),y=H1(n,"above",!0,"horizontal"),v=H1(n,"below",!0,"horizontal"),_=12,I=(Q=this.messages)==null?void 0:Q.previewColorRampAriaLabel,$=q1(o,{width:y,height:_,rampAlignment:"horizontal",opacity:i,type:"above",effectList:r,ariaLabel:I}),A=q1(o,{width:v,height:_,rampAlignment:"horizontal",opacity:i,type:"below",effectList:r,ariaLabel:I}),k=L4(n,"card"),R=n.infos.map(K=>K.label),N=R.length-1,D=R.map((K,ee)=>ee===0||ee===N?B("div",{key:ee},K):null),j={display:"flex",flexDirection:"column"},z={display:"flex",flexDirection:"row"},U={marginTop:"3px",display:"flex"};Po(this.container)?U.marginRight=`${k}px`:U.marginLeft=`${k}px`;const W={width:`${c}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return B("div",{class:tt.layerRow,key:"size-ramp-preview",styles:j},B("div",{class:this.classes(tt.symbolContainer,tt.sizeRampHorizontal),styles:z},n.infos.map((K,ee)=>B("div",{afterCreate:Jr,bind:K.preview,class:tt.symbol,key:ee}))),$?B("div",{class:tt.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:U},B("div",{afterCreate:Jr,bind:$}),B("div",{afterCreate:Jr,bind:A})):null,B("div",{class:tt.layerInfo},B("div",{class:tt.rampLabelsContainer,styles:W},D)))}_renderUnivariateColorSizeRamp(t,i,r){var D;const{sizeRampElement:n,colorRampElement:o}=xue(t,"horizontal");if(!n)return null;const c=Rk(n,"full",!1,"horizontal"),y=H1(n,"full",!1,"horizontal"),v=q1(o,{width:y,height:12,rampAlignment:"horizontal",opacity:i,type:"full",effectList:r,ariaLabel:(D=this.messages)==null?void 0:D.previewColorRampAriaLabel}),_=L4(n,"card"),I=n.infos.length-1,$=n.infos.map((j,z)=>z===0||z===I?B("div",{key:z},j.label):null),A={display:"flex",flexDirection:"column"},k={display:"flex",flexDirection:"row"},R={marginTop:"3px",display:"flex"};Po(this.container)?R.marginRight=`${_}px`:R.marginLeft=`${_}px`;const N={width:`${c}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return B("div",{class:tt.layerRow,key:"size-ramp-preview",styles:A},B("div",{class:this.classes(tt.symbolContainer,tt.sizeRampHorizontal),styles:k},n.infos.map((j,z)=>B("div",{afterCreate:Jr,bind:j.preview,class:tt.symbol,key:z}))),B("div",{class:tt.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:R},B("div",{afterCreate:Jr,bind:v})),B("div",{class:tt.layerInfo},B("div",{class:tt.rampLabelsContainer,styles:N},$)))}_renderLegendForElementInfo(t,i,r,n){var v,_,I,$,A;const o=i.layer;if(t.type)return this._renderLegendForElement(t,i,n,!1,!0);const c=Tue(o,r),y=Rd(this.messages,t.label,!1)??"";if(t.preview){if(!((v=t.symbol)!=null&&v.type.includes("simple-fill"))){if(!t.label)return B("div",{afterCreate:Jr,bind:t.preview,key:n});const ue={[tt.symbolCell]:this._hasIndicators};return B("div",{class:this.classes(tt.layerRow,{[tt.symbolRow]:this._hasIndicators}),key:n},B("div",{afterCreate:Jr,bind:t.preview,class:this.classes(ue)}),B("div",{class:this.classes(tt.imageLabel,{[tt.labelCell]:this._hasIndicators})},y))}let k=255,R=255,N=255,D=0,j=255,z=255,U=255,W=0;const Q=(_=t.symbol.color)==null?void 0:_.a,K=($=(I=t.symbol.outline)==null?void 0:I.color)==null?void 0:$.a;Q&&(k=t.symbol.color.r,R=t.symbol.color.g,N=t.symbol.color.b,D=t.symbol.color.a*o.opacity),K&&(j=t.symbol.outline.color.r,z=t.symbol.outline.color.g,U=t.symbol.outline.color.b,W=t.symbol.outline.color.a*o.opacity);const ee=((A=t.symbol.color)==null?void 0:A.isBright)??!0,ie=ee?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)",ae={background:Q?`rgba(${k}, ${R}, ${N}, ${D})`:"none",color:ee?"black":"white",textShadow:`-1px -1px 0 ${ie},
                                              1px -1px 0 ${ie},
                                              -1px 1px 0 ${ie},
                                              1px 1px 0 ${ie}`,border:K?`1px solid rgba(${j}, ${z}, ${U}, ${W})`:"none",filter:z2(i.effectList)??void 0};return B("div",{class:tt.layerRow,key:n},B("div",{class:tt.labelElement,styles:ae},y))}if(t.src){const k=this._renderImage(t,o,c);return B("div",{class:tt.layerRow,key:n},k,B("div",{class:tt.imageLabel},y))}}_renderImage(t,i,r){const{label:n,src:o,opacity:c}=t,y={[tt.imageryLayerStretchedImage]:r,[tt.symbol]:!r},v={opacity:`${c??i.opacity}`};return B("img",{alt:Rd(this.messages,n,!1),"aria-label":Rd(this.messages,n,!1),border:0,class:this.classes(y),height:t.height,src:o,styles:v,width:t.width})}_renderSizeRampLines(t){const i=t.infos,r=i[0],n=i[i.length-1],o=r.symbol,c=this._hasIndicators,y=Qi(r.size+r.outlineSize)*ky,v=Qi(n.size+n.outlineSize)*ky,_=c?y:y+50*ky,I=c?y/2+50*ky:y,$=sUe(o),A=nUe(o),k=document.createElement("canvas");k.width=_,k.height=I,k.style.width=k.width/ky+"px",k.style.height=k.height/ky+"px";const R=k.getContext("2d");if(c){R.beginPath();const N=0,D=0,j=_/2-v/2,z=I;R.moveTo(N,D),R.lineTo(j,z);const U=_,W=0,Q=_/2+v/2,K=I;R.moveTo(U,W),R.lineTo(Q,K)}else{R.beginPath();const N=0,D=I/2-v/2,j=_;R.moveTo(N,D),R.lineTo(j,0);const U=0,W=I/2+v/2,Q=_,K=I;R.moveTo(U,W),R.lineTo(Q,K)}return R.strokeStyle=rUe,R.stroke(),B("div",{afterCreate:Jr,bind:k,styles:c?{display:"flex",marginTop:`-${$?0:A?y/2:0}px`,marginBottom:`-${$?v:A?v/2:0}px`}:{display:"flex",marginRight:`-${$?0:A?y/2:0}px`,marginLeft:`-${$?0:A?v/2:0}px`}})}_renderSizeRamp(t,i){const r=t.infos,n=r[0].label,o=r[r.length-1].label;let c=r[0].preview,y=r[r.length-1].preview;const v=this._hasIndicators,_={"flex-direction":v?"column":"row-reverse"};c&&(c=c.cloneNode(!0),c.style.display="flex"),y&&(y=y.cloneNode(!0),y.style.display="flex");const I={opacity:i!=null?`${i}`:""};return B("div",{class:this.classes(tt.layerRow,{[tt.sizeRampRow]:v})},B("div",{class:tt.rampLabel},v?n:o),B("div",{class:tt.sizeRampContainer,styles:_},B("div",{afterCreate:Jr,bind:c,class:tt.sizeRampPreview,styles:I}),this._renderSizeRampLines(t),B("div",{afterCreate:Jr,bind:y,class:tt.sizeRampContainer,styles:I})),B("div",{class:tt.rampLabel},v?o:n))}_getRampStopLabel(t,i){switch(i){case"heatmap-ramp":return this.messages[t.label];case"stretch-ramp":return $ue(t,this.messages);default:return t.label}}_renderLegendForRamp(t,i,r){const n=t.infos,o=t.type,c=o==="heatmap-ramp",y=n.length-1,v=eUe,_=y>2&&!c?QVe*y:iUe,I=_+20,$=10,A=n.slice().reverse(),k=A.length-1,R=A.length%2!=0?A[A.length/2|0]:null,N=R&&B("div",{class:tt.intervalSeparatorsContainer},B("div",{class:tt.intervalSeparator},"|"),B("div",{class:tt.rampLabel},this._getRampStopLabel(R,o))),D=[[{shape:{type:"path",path:`M0 ${v/2} L${$} 0 L${$} ${v} Z`},fill:A[0].color,stroke:{width:0}},{shape:{type:"rect",x:$,y:0,width:_,height:v},fill:{type:"linear",x1:$,y1:0,x2:_+$,y2:0,colors:A.map((W,Q)=>({color:W.color,offset:c&&"ratio"in W?W.ratio:Q/y}))},stroke:{width:0}},{shape:{type:"path",path:`M${_+$} 0 L${I} ${v/2} L${_+$} ${v} Z`},fill:A[k].color,stroke:{width:0}}]],j=Qae(D,I,v),z={filter:z2(r)??void 0,opacity:i==null?void 0:`${i}`},U={justifyContent:"center"};return B("div",{class:tt.layerRow,styles:U},B("div",{class:tt.rampLabel},this._getRampStopLabel(A[0],o)),B("div",{class:tt.symbolContainer},B("div",{styles:z},j),N),B("div",{class:tt.rampLabel},this._getRampStopLabel(A[k],o)))}};m([w()],ol.prototype,"activeLayerInfos",void 0),m([w()],ol.prototype,"headingLevel",void 0),m([w()],ol.prototype,"layout",void 0),m([w(),Ht("esri/widgets/Legend/t9n/Legend")],ol.prototype,"messages",void 0),m([w(),Ht("esri/t9n/common")],ol.prototype,"messagesCommon",void 0),m([w({readOnly:!0})],ol.prototype,"type",void 0),m([w()],ol.prototype,"view",void 0),m([y4()],ol.prototype,"_selectSection",null),ol=m([H("esri.widgets.Legend.styles.Card")],ol);const i6=ol,ri="esri-legend",ht={service:`${ri}__service`,label:`${ri}__service-label`,layer:`${ri}__layer`,groupLayer:`${ri}__group-layer`,groupLayerChild:`${ri}__group-layer-child`,layerTable:`${ri}__layer-table`,layerTableSizeRamp:`${ri}__layer-table--size-ramp`,layerChildTable:`${ri}__layer-child-table`,layerCaption:`${ri}__layer-caption`,layerBody:`${ri}__layer-body`,layerRow:`${ri}__layer-row`,layerCell:`${ri}__layer-cell`,layerInfo:`${ri}__layer-cell ${ri}__layer-cell--info`,imageryLayerStretchedImage:`${ri}__imagery-layer-image--stretched`,imageryLayerCellStretched:`${ri}__imagery-layer-cell--stretched`,imageryLayerInfoStretched:`${ri}__imagery-layer-info--stretched`,symbolContainer:`${ri}__layer-cell ${ri}__layer-cell--symbols`,symbol:`${ri}__symbol`,rampContainer:`${ri}__ramps`,sizeRamp:`${ri}__size-ramp`,colorRamp:`${ri}__color-ramp`,opacityRamp:`${ri}__opacity-ramp`,borderlessRamp:`${ri}__borderless-ramp`,rampTick:`${ri}__ramp-tick`,rampFirstTick:`${ri}__ramp-tick-first`,rampLastTick:`${ri}__ramp-tick-last`,rampLabelsContainer:`${ri}__ramp-labels`,rampLabel:`${ri}__ramp-label`,message:`${ri}__message`,univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label"},oUe=`${ri}__`,aUe=24,fH={display:"flex",alignItems:"flex-start"},r6={marginLeft:"3px"},Ly={display:"table-cell",verticalAlign:"middle"};let Lf=class extends yi{constructor(t,i){super(t,i),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){const t=this.activeLayerInfos,i=t==null?void 0:t.toArray().map(r=>this._renderLegendForLayer(r)).filter(r=>!!r);return B("div",null,i!=null&&i.length?i:B("div",{class:ht.message},this.messages.noLegend))}_renderLegendForLayer(t,i){if(!t.ready)return null;const r=!!t.children.length,n=`${t.layer.uid}-version-${t.version}`,o=`${oUe}${i?`${i}-`:""}${n}`,c=t.title?c0({level:this.headingLevel,class:this.classes(ze.heading,ht.label)},t.title):null;if(r){const y=t.children.map(v=>this._renderLegendForLayer(v,n)).toArray();return B("div",{class:this.classes(ht.service,ht.groupLayer),key:o},c,y)}{const y=t.legendElements;if(y&&!y.length)return null;const v=y.map(I=>this._renderLegendForElement(I,t.layer,t.effectList,o)).filter(I=>!!I);if(!v.length)return null;const _={[ht.groupLayerChild]:!!t.parent};return B("div",{class:this.classes(ht.service,_),key:o},c,B("div",{class:ht.layer},v))}}_renderLegendForElement(t,i,r,n,o){const c=t.type==="color-ramp",y=t.type==="opacity-ramp",v=t.type==="size-ramp";let _=null;const I=`${n}-${t.type}`;if(t.type==="symbol-table"||v){const D=t.infos.map(j=>this._renderLegendForElementInfo(j,i,r,v,t.legendType,I)).filter(j=>!!j);D.length&&(_=B("div",{class:ht.layerBody},D))}else t.type==="color-ramp"||t.type==="opacity-ramp"||t.type==="heatmap-ramp"||t.type==="stretch-ramp"?_=this._renderLegendForRamp(t,i.opacity,I):t.type==="relationship-ramp"?_=tle(t,this.id,{opacity:i.opacity,effectList:r,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:I}):t.type==="pie-chart-ramp"?_=this._renderPieChartRamp(t,I):t.type==="univariate-above-and-below-ramp"?_=this._renderUnivariateAboveAndBelowRamp(t,i.opacity,r,I):t.type==="univariate-color-size-ramp"&&(_=this._renderUnivariateColorSizeRamp(t,i.opacity,r,I));if(!_)return null;const $=t.title;let A=null;if(typeof $=="string")A=$;else if($){const D=Rd(this.messages,$,c||y);A=Iue($,c||y)&&$.title?`${$.title} (${D})`:D}const k=o?ht.layerChildTable:ht.layerTable,R=A?B("div",{class:ht.layerCaption},A):null,N={[ht.layerTableSizeRamp]:v||!o};return B("div",{class:this.classes(k,N),key:`${n}-table`},R,_)}_renderPieChartRamp(t,i){return B("div",{afterCreate:Jr,bind:t.preview,key:`${i}-preview`})}_renderUnivariateAboveAndBelowRamp(t,i,r,n){var ee;const{sizeRampElement:o,colorRampElement:c}=Sue(t,i);if(!o)return null;const y=(ee=this.messages)==null?void 0:ee.previewColorRampAriaLabel,v=H1(o,"above",!0),_=H1(o,"below",!0),I=12,$=q1(c,{width:I,height:v,rampAlignment:"vertical",opacity:i,type:"above",effectList:r,ariaLabel:y}),A=q1(c,{width:I,height:_,rampAlignment:"vertical",opacity:i,type:"below",effectList:r,ariaLabel:y}),k=L4(o),R=o.infos.map(ie=>ie.label),N=R.map((ie,ae)=>ae===0?B("div",{class:ie?$?ht.univariateAboveAndBelowLabel:ht.rampLabel:void 0,key:`${n}-color-ramp-above-label-${ie??ae}`},ie):ae===2?B("div",null):null),D=R.length-1,j=Math.floor(R.length/2),z=R.map((ie,ae)=>ae===j||ae===D?B("div",{class:ie?$?ht.univariateAboveAndBelowLabel:ht.rampLabel:void 0,key:`${n}-color-ramp-below-label-${ie??ae}`},ie):null),U={display:"table-cell",verticalAlign:"middle"},W={marginTop:`${k}px`},Q={height:`${v}px`},K={height:`${_}px`};return B("div",{key:`${n}-container`,styles:fH},B("div",{class:ht.layerBody},o.infos.map((ie,ae)=>B("div",{class:this.classes(ht.layerRow,ht.sizeRamp),key:`${n}-row-${ae}`},B("div",{afterCreate:Jr,bind:ie.preview,class:ht.symbol,styles:U}),$||ae%2!=0?null:B("div",{class:ht.layerInfo},R[ae])))),$?B("div",{styles:W},B("div",{styles:r6},B("div",{styles:Ly},B("div",{afterCreate:Jr,bind:$,class:ht.rampContainer})),B("div",{styles:Ly},B("div",{class:ht.rampLabelsContainer,styles:Q},N))),B("div",{styles:r6},B("div",{styles:Ly},B("div",{afterCreate:Jr,bind:A,class:ht.rampContainer})),B("div",{styles:Ly},B("div",{class:ht.rampLabelsContainer,styles:K},z)))):null)}_renderUnivariateColorSizeRamp(t,i,r,n){var D;const{sizeRampElement:o,colorRampElement:c}=xue(t);if(!o)return null;const y=L4(o),v=12,_=H1(o,"full",!1),I=q1(c,{width:v,height:_,rampAlignment:"vertical",opacity:i,type:"full",effectList:r,ariaLabel:(D=this.messages)==null?void 0:D.previewColorRampAriaLabel}),$=o.infos.length-1,A=o.infos.map((j,z)=>z===0||z===$?B("div",{class:j.label?c?ht.univariateAboveAndBelowLabel:ht.rampLabel:void 0,key:`${n}-color-ramp-label-${j.label??z}`},j.label):null),k={display:"table-cell",verticalAlign:"middle"},R={marginTop:`${y}px`},N={height:`${_}px`};return B("div",{key:`${n}-container`,styles:fH},B("div",{class:ht.layerBody},o.infos.map((j,z)=>B("div",{class:this.classes(ht.layerRow,ht.sizeRamp),key:`${n}-row-${z}`},B("div",{afterCreate:Jr,bind:j.preview,class:ht.symbol,styles:k})))),B("div",{styles:R},B("div",{styles:r6},B("div",{styles:Ly},B("div",{afterCreate:Jr,bind:I,class:ht.rampContainer})),B("div",{styles:Ly},B("div",{class:ht.rampLabelsContainer,styles:N},A)))))}_renderLegendForRamp(t,i,r){const n=t.infos,o=t.type==="opacity-ramp",c=t.type==="heatmap-ramp",y=t.type==="stretch-ramp",v=t.preview,_=o?ht.opacityRamp:"";v.className=`${ht.colorRamp} ${_}`,i!=null&&(v.style.opacity=i.toString());const I=n.map((k,R)=>B("div",{class:k.label?ht.rampLabel:void 0,key:`${r}-stop-${k.label??R}-label`},c?this.messages[k.label]||k.label:y?$ue(k,this.messages):k.label)),$={width:`${aUe}px`},A={height:v.style.height};return B("div",{class:ht.layerRow,key:`${r}-row`},B("div",{class:ht.symbolContainer,styles:$},B("div",{afterCreate:Jr,bind:v,class:ht.rampContainer})),B("div",{class:ht.layerInfo},B("div",{class:ht.rampLabelsContainer,styles:A},I)))}_renderLegendForElementInfo(t,i,r,n,o,c){const y=`${c}-${t.label}`;if(t.type)return this._renderLegendForElement(t,i,r,y,!0);let v=null;const _=Tue(i,o);if(t.preview?v=B("div",{afterCreate:Jr,bind:t.preview,class:ht.symbol}):t.src&&(v=this._renderImage(t,i,_)),!v)return null;const I={[ht.imageryLayerInfoStretched]:_},$={[ht.imageryLayerInfoStretched]:_,[ht.sizeRamp]:!_&&n};return B("div",{class:ht.layerRow,key:`${y}-row`},B("div",{class:this.classes(ht.symbolContainer,$)},v),B("div",{class:this.classes(ht.layerInfo,I)},Rd(this.messages,t.label,!1)||""))}_renderImage(t,i,r){const{label:n,src:o,opacity:c}=t,y={[ht.imageryLayerStretchedImage]:r,[ht.symbol]:!r},v={opacity:`${c??i.opacity}`};return B("img",{alt:Rd(this.messages,n,!1),"aria-label":Rd(this.messages,n,!1),border:0,class:this.classes(y),height:t.height,src:o,styles:v,width:t.width})}};m([w()],Lf.prototype,"activeLayerInfos",void 0),m([w()],Lf.prototype,"headingLevel",void 0),m([w(),Ht("esri/widgets/Legend/t9n/Legend")],Lf.prototype,"messages",void 0),m([w({readOnly:!0})],Lf.prototype,"type",void 0),Lf=m([H("esri.widgets.Legend.styles.Classic")],Lf);const Oy=Lf,lUe={base:"esri-legend"};let Wr=class extends yi{constructor(t,i){super(t,i),this.headingLevel=3,this.messages=null,this.style=new Oy,this.viewModel=new JVe}initialize(){this.addHandles([tn(()=>this.view,"resize",()=>this.scheduleRender()),tn(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),ge(()=>this.headingLevel,t=>{const{style:i}=this;i&&(i.headingLevel=t)}),ge(()=>this.style,(t,i)=>{i&&t!==i&&i.destroy(),t&&(t.activeLayerInfos=this.activeLayerInfos,t.type==="card"&&(t.view=this.view),t.headingLevel=this.headingLevel)},qe)])}get activeLayerInfos(){return this.viewModel.activeLayerInfos}set activeLayerInfos(t){this.viewModel.activeLayerInfos=t}get basemapLegendVisible(){return this.viewModel.basemapLegendVisible}set basemapLegendVisible(t){this.viewModel.basemapLegendVisible=t}get groundLegendVisible(){return this.viewModel.groundLegendVisible}set groundLegendVisible(t){this.viewModel.groundLegendVisible=t}get hideLayersNotInCurrentView(){return this.viewModel.hideLayersNotInCurrentView}set hideLayersNotInCurrentView(t){this.viewModel.hideLayersNotInCurrentView=t}get keepCacheOnDestroy(){return this.viewModel.keepCacheOnDestroy}set keepCacheOnDestroy(t){this.viewModel.keepCacheOnDestroy=t}get respectLayerDefinitionExpression(){return this.viewModel.respectLayerDefinitionExpression}set respectLayerDefinitionExpression(t){this.viewModel.respectLayerDefinitionExpression=t}get respectLayerVisibility(){return this.viewModel.respectLayerVisibility}set respectLayerVisibility(t){this.viewModel.respectLayerVisibility=t}get icon(){return"legend"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(t){this.viewModel.layerInfos=t}castStyle(t){if(t instanceof i6||t instanceof Oy)return t;if(typeof t=="string")return t==="card"?new i6:new Oy;if(t&&typeof t.type=="string"){const i={...t};return delete i.type,new(t.type==="card"?i6:Oy)(i)}return new Oy}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){return B("div",{class:this.classes(lUe.base,ze.widget,this.style instanceof Oy?ze.panel:null)},this.style.render())}_refreshActiveLayerInfos(t){t.forEach(i=>{this.removeHandles(`version_${i.layer.uid}`),this._renderOnActiveLayerInfoChange(i)}),this.scheduleRender()}_renderOnActiveLayerInfoChange(t){const i=ge(()=>t.version,()=>this.scheduleRender());this.addHandles(i,`version_${t.layer.uid}`);const r=tn(()=>t.children,"change",()=>t.children.forEach(n=>this._renderOnActiveLayerInfoChange(n)),qe);this.addHandles(r,`version_${t.layer.uid}`),t.children.forEach(n=>this._renderOnActiveLayerInfoChange(n))}};m([w()],Wr.prototype,"activeLayerInfos",null),m([w()],Wr.prototype,"basemapLegendVisible",null),m([w()],Wr.prototype,"groundLegendVisible",null),m([w()],Wr.prototype,"headingLevel",void 0),m([w()],Wr.prototype,"hideLayersNotInCurrentView",null),m([w()],Wr.prototype,"keepCacheOnDestroy",null),m([w()],Wr.prototype,"respectLayerDefinitionExpression",null),m([w()],Wr.prototype,"respectLayerVisibility",null),m([w()],Wr.prototype,"icon",null),m([w()],Wr.prototype,"label",null),m([w()],Wr.prototype,"layerInfos",null),m([w(),Ht("esri/widgets/Legend/t9n/Legend")],Wr.prototype,"messages",void 0),m([w()],Wr.prototype,"style",void 0),m([wt("style")],Wr.prototype,"castStyle",null),m([w()],Wr.prototype,"view",null),m([w()],Wr.prototype,"viewModel",void 0),Wr=m([H("esri.widgets.Legend")],Wr);const Eue=Wr,uUe=Object.freeze(Object.defineProperty({__proto__:null,default:Eue},Symbol.toStringTag,{value:"Module"})),ca="esri-layer-list",Da=`${ca}__item`,zv={base:ca,actionMenu:`${ca}__action-menu`,actionGroup:`${ca}__action-group`,filterNoResults:`${ca}__filter-no-results`,item:Da,itemActive:`${Da}--active`,itemContent:`${Da}-content`,itemContentBottom:`${Da}-content-bottom`,itemMessage:`${Da}-message`,itemInvisible:`${Da}--invisible`,itemActionIcon:`${Da}-action-icon`,itemActionImage:`${Da}-action-image`,itemTemporaryIcon:`${Da}-temporary-icon`,itemTableIcon:`${Da}-table-icon`,itemCatalogIcon:`${Da}-catalog-icon`,statusIndicator:`${ca}__status-indicator`,publishing:`${ca}__publishing`,updating:`${ca}__updating`,connectionStatus:`${ca}__connection-status`,connectionStatusConnected:`${ca}__connection-status--connected`,visibleToggle:`${ca}__visible-toggle`,visibleIcon:`${ca}__visible-icon`},Mue={hide:"hide",hideChildren:"hide-children"},cUe=10,hUe=2;function dUe({exclusive:e,visible:t,visibilityAppearance:i}){const r=i==="checkbox";return t?e?"circle-f":r?"check-square-f":"view-visible":e?"circle":r?"square":"view-hide"}function pUe({connectionStatus:e,publishing:t}){return e?e==="connected"?"beacon":"offline":t?"square":"bullet-point"}function fUe(e){return(e==null?void 0:e.listMode)===Mue.hideChildren}function O4(e){return(e==null?void 0:e.listMode)??void 0}function yUe(e){return e!=null&&"minScale"in e&&e.minScale!=null?e.minScale:void 0}function mUe(e){return e!=null&&"maxScale"in e&&e.maxScale!=null?e.maxScale:void 0}function gUe(e){if(!e)return"inherited";const t=SUe(rN(e)?e.layer:e);return t!=null?t?"independent":"inherited":"visibilityMode"in e&&e.visibilityMode!=null?e.visibilityMode:"independent"}function Aue(e){if(e&&(!("type"in e)||e.type!=="wmts"))return"sublayers"in e?"sublayers":"layers"in e?"layers":void 0}function vUe(e){const t=(e!=null&&e.layer&&rN(e.layer)?e.layer.layer:void 0)??(e==null?void 0:e.layer);return!!t&&t.type!=="catalog"&&(xUe(t)??!0)}function wUe(e){return O4(e)!==Mue.hide}function bUe(e,t){if(!e||t==null||isNaN(t))return!1;const i=yUe(e),r=mUe(e),n=i!=null&&!isNaN(i)&&i>0&&t>i,o=r!=null&&!isNaN(r)&&r>0&&t<r;return n||o}function Cue(e,t){e==null||e.sort((i,r)=>{const n="uid"in i?t.indexOf(i.uid):-1,o="uid"in r?t.indexOf(r.uid):-1;return n>o?-1:n<o?1:0})}function _Ue(e,t){const i=e==null?void 0:e.layer;if(!i)return;const r=Aue(i);if(!r)return;let n;r==="layers"&&"layers"in i?n=i.layers:r==="sublayers"&&"sublayers"in i&&(n=i.sublayers),Cue(n,t)}function yH(e){const t=e==null?void 0:e.layer;return t&&"layers"in t?t.layers:null}function rN(e){return e!=null&&"layer"in e&&e.layer!=null}function SUe(e){const t=kue(e);return t!=null&&"supportsSublayerVisibility"in t?t.supportsSublayerVisibility:void 0}function xUe(e){const t=kue(e);return t!=null&&"supportsDynamicLayers"in t?t.supportsDynamicLayers:void 0}function kue(e){return e&&"capabilities"in e&&e.capabilities!=null&&"exportMap"in e.capabilities?e.capabilities.exportMap:void 0}function uu(e){return e==null?void 0:e["data-item"]}function mH(e){return e==null?void 0:e.getAttribute("data-layer-type")}function IUe({children:e,error:t,incompatible:i}){return!!(e!=null&&e.filter(r=>!r.hidden).length)&&!t&&!i}function TUe(e){for(const t of e)for(const i of t)if(i.type==="button"||i.type==="toggle")return i}var Pk;let gt=Pk=class extends yi{constructor(e){super(e),this.dragEnabled=!1,this.listModeDisabled=!1,this.parent=null,this.parentTitles=null,this.viewModel=null,this._onActionMenuOpen=t=>{this.item.actionsOpen=t.target.open},this._setTooltipReference=t=>{var i;(i=this.onTooltipReferenceChange)==null||i.call(this,this.item.layer.uid,t)},this._removeTooltipReference=()=>{var t;(t=this.onTooltipReferenceChange)==null||t.call(this,this.item.layer.uid,null)}}loadDependencies(){return Vn({"action-group":()=>de(()=>import("./calcite-action-group-L5zDZYe4.js"),__vite__mapDeps([239,235,236,227,195,237,231,238,229,232]),import.meta.url),"action-menu":()=>de(()=>import("./calcite-action-menu-DBcMFMLk.js"),__vite__mapDeps([252,236,227,195,237,231,238,229,232]),import.meta.url),action:()=>de(()=>import("./calcite-action-e4eforA9.js"),__vite__mapDeps([233,227,195]),import.meta.url),icon:()=>de(()=>import("./calcite-icon-D67BMpQP.js"),[],import.meta.url),"list-item":()=>de(()=>import("./calcite-list-item-bKE4O7k7.js"),__vite__mapDeps([226,224,223,227,195]),import.meta.url),list:()=>de(()=>import("./calcite-list-BeSrBmBe.js"),__vite__mapDeps([222,223,224,195,225]),import.meta.url),notice:()=>de(()=>import("./calcite-notice-ikeUYD1p.js"),__vite__mapDeps([228,229]),import.meta.url)})}render(){var R,N;const e=this.parentTitles??[],{_title:t,item:i,activeItem:r,selectedDragItemLayerUid:n,selectionMode:o,selectedItems:c,messages:y,parent:v,css:_}=this,I="visibleAtCurrentTimeExtent"in i&&"layerInvisibleAtTime"in y&&!i.visibleAtCurrentTimeExtent?`${t} (${y.layerInvisibleAtTime})`:"visibleAtCurrentScale"in i&&"layerInvisibleAtScale"in y&&!i.visibleAtCurrentScale?`${t} (${y.layerInvisibleAtScale})`:t,$="parent"in i&&((N=(R=i.parent)==null?void 0:R.layer)==null?void 0:N.type)==="catalog",{layer:A}=i,k="visibleAtCurrentScale"in i&&!i.visibleAtCurrentScale||"visibleAtCurrentTimeExtent"in i&&!i.visibleAtCurrentTimeExtent;return B("calcite-list-item",{afterCreate:D=>this._focusSelectedDragEl(D,i),afterUpdate:D=>this._focusSelectedDragEl(D,i),class:this.classes(_.item,"itemActive"in _&&{[_.itemActive]:r===i}),"data-item":i,"data-layer-id":A.id,dragDisabled:!i.sortable||$,dragSelected:A.uid===n,id:A.uid,key:`list-item-${A.uid}`,label:t,metadata:{parentTitles:e,_title:t},open:"open"in i&&i.open,selected:o!=="none"&&c.includes(i),title:I,unavailable:k,value:A.uid,onCalciteListItemDragHandleChange:D=>this._handleCalciteListItemDragHandleChange(D,i),onCalciteListItemSelect:D=>"visible"in i&&this._handleCalciteListItemSelect(D,i,v),onCalciteListItemToggle:D=>"open"in i&&this._handleCalciteListItemToggle(D,i)},this._renderedCatalogFootprintIcon,this._renderedCatalogDynamicIcon,B("div",{class:this.classes(_.itemContent,"itemInvisible"in _&&{[_.itemInvisible]:k}),slot:"content"},t),this._renderedItemStatus,this._renderedItemToggle,this._renderedCatalogSelectNode,this._renderedItemTemporaryIcon,this._renderedChildList,this._renderedItemMessage,this._renderedPanel,this._renderedPanelAction,this._renderedActions)}get _title(){const{messages:e}=this;return this.item.title||("untitledTable"in e?e.untitledTable:e.untitledLayer)}get _renderedItemStatus(){const{item:e,parent:t,visibleElements:i,css:r}=this;if(!i.statusIndicators)return null;const{publishing:n}=e,o="updating"in e&&e.updating&&!t,c="connectionStatus"in e?e.connectionStatus:void 0,y=!!c;return B("calcite-icon",{class:this.classes(r.statusIndicator,{[r.publishing]:n},"updating"in r&&{[r.updating]:o},"connectionStatus"in r&&{[r.connectionStatus]:y},"connectionStatusConnected"in r&&{[r.connectionStatusConnected]:y&&c==="connected"}),icon:pUe({connectionStatus:c,publishing:n}),key:"layer-item-status",scale:"s",slot:"content-end"})}get _renderedItemTemporaryIcon(){const{item:e,visibleElements:t,css:i}=this,{layer:r}=e,n="temporaryLayerIndicators"in t&&t.temporaryLayerIndicators,o="temporaryTableIndicators"in t&&t.temporaryTableIndicators,c="persistenceEnabled"in r&&(nR(r)||!r.persistenceEnabled);return(n||o)&&c?B("calcite-icon",{class:i.itemTemporaryIcon,icon:"temporary",key:"temporary-icon",scale:"s",slot:"actions-start",title:this.messages.temporary}):null}get _renderedItemToggle(){const{item:e,parent:t,messages:i,visibilityAppearance:r,css:n}=this;if(!("visible"in e&&"layerVisibility"in i&&"visibleToggle"in n&&r))return null;const{visible:o}=e,c=t==null?void 0:t.visibilityMode;if(c==="inherited")return null;const y=dUe({visible:o,exclusive:c==="exclusive",visibilityAppearance:r}),v=r==="checkbox",_=i.layerVisibility;return B("calcite-action",{appearance:"transparent",class:n.visibleToggle,icon:v?y:void 0,key:"visibility-toggle",onclick:()=>this._toggleVisibility(e,t),scale:"s",slot:v?"actions-start":"actions-end",text:_,title:_},v?null:B("calcite-icon",{class:this.classes({[n.visibleIcon]:c!=="exclusive"&&o}),icon:y,scale:"s"}))}get _renderedPanel(){const{panel:e}=this.item;return!(e!=null&&e.open)||e.disabled||e.flowEnabled?null:B("div",{class:this.css.itemContentBottom,key:`content-panel-${e.uid}`,slot:"content-bottom"},e.render())}get _renderedPanelAction(){const{panel:e}=this.item;if(!(e!=null&&e.visible))return null;const{open:t,title:i,disabled:r}=e;return B("calcite-action",{active:t,appearance:"transparent",disabled:r,icon:gU(e),key:`action-${e.uid}`,onclick:()=>this._togglePanel(e),scale:"s",slot:"actions-end",text:i??"",title:i??void 0},this._renderFallbackIcon(e))}get _renderedActions(){switch(this._actionsCount){case 0:return null;case 1:return this._singleAction;default:return this._renderedActionMenu}}get _renderedActionMenu(){const{item:e,messagesCommon:t}=this,i=t.options;return B("calcite-action-menu",{appearance:"transparent",key:"item-action-menu",label:t.menu,open:e.actionsOpen,overlayPositioning:"fixed",placement:"bottom-end",scale:"s",slot:"actions-end",onCalciteActionMenuOpen:this._onActionMenuOpen},B("calcite-action",{appearance:"transparent",icon:"ellipsis",scale:"s",slot:"trigger",text:i,title:i}),this._renderedActionMenuContent)}get _renderedActionMenuContent(){return this._filteredSections.toArray().map(e=>B("calcite-action-group",{key:`action-section-${e.uid}`},e.toArray().map(t=>this._renderAction({action:t,textEnabled:!0}))))}get _renderedCatalogFootprintIcon(){var i;const{css:e}=this,t=((i=this.item.layer)==null?void 0:i.type)==="catalog-footprint";return"itemCatalogIcon"in e&&t?B("calcite-icon",{class:e.itemCatalogIcon,icon:"footprint",key:"footprint",scale:"s",slot:"content-start"}):null}get _renderedCatalogDynamicIcon(){var i;const{css:e}=this,t=((i=this.item.layer)==null?void 0:i.type)==="catalog-dynamic-group";return"itemCatalogIcon"in e&&t?B("calcite-icon",{class:e.itemCatalogIcon,icon:"catalog-dataset",key:"catalog-dataset",scale:"s",slot:"content-start"}):null}get _renderedCatalogSelectNode(){const{_title:e,item:t,visibleElements:i}=this;if(!("visible"in t))return;const{layer:r}=t,n=(r==null?void 0:r.type)==="catalog-dynamic-group";return"catalogLayerList"in i&&i.catalogLayerList&&n?B("calcite-action",{appearance:"transparent",disabled:!r.visible,icon:"chevron-right",iconFlipRtl:!0,onclick:()=>this._triggerOnCatalogOpen(t),scale:"s",slot:"actions-end",text:e}):null}get _renderedChildList(){const{dragEnabled:e,item:t,rootGroupUid:i,listModeDisabled:r,selectionMode:n}=this;if(!("visible"in t))return;const o=[...this.parentTitles??[],t.title],{children:c,layer:y}=t,v=(y==null?void 0:y.type)!=="catalog-dynamic-group"&&IUe(t),_=!r&&fUe(y);return v||!_&&!v&&e&&(y==null?void 0:y.type)==="group"?B("calcite-list",{canPull:I=>!!this.canMove&&this.canMove(I,"pull"),canPut:I=>!!this.canMove&&this.canMove(I,"put"),"data-item":t,"data-layer-type":i,dragEnabled:!!e&&t.childrenSortable&&vUe(t),group:`${i}-${y.uid}`,key:`child-list-${y.uid}`,selectionAppearance:"border",selectionMode:n},c==null?void 0:c.filter(I=>!I.hidden).toArray().map(I=>this._renderItem(I,t,o)),this._renderedTablesItem):null}get _hasTables(){var i,r;const{layerTablesEnabled:e}=this,t=this.item.layer;if(!e||!t)return!1;switch(t.type){case"knowledge-graph":return e.includes(t.type)&&!!((i=t.tables)!=null&&i.length);case"map-image":case"tile":return e.includes(t.type)&&!!((r=t.subtables)!=null&&r.length);default:return!1}}get _renderedTablesItem(){const{item:e,messages:t,css:i}=this,{layer:r}=e;return"itemTableIcon"in i&&"visible"in e&&"tables"in t&&this._hasTables?B("calcite-list-item",{class:i.item,"data-layer-id":r.id,dragDisabled:!0,key:`list-item-table-list-tables-${r.uid}`,title:t.tables,onCalciteListItemSelect:()=>this._triggerOnTablesOpen(e)},B("div",{class:i.itemContent,slot:"content"},t.tables),B("calcite-icon",{class:i.itemTableIcon,icon:"table",scale:"s",slot:"content-start"}),B("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"})):null}get _renderedItemMessage(){const{item:e,messages:t,css:i}=this;return e.error?B("div",{class:i.itemMessage,key:"esri-layer-list__error",slot:"content-bottom"},B("calcite-notice",{icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",width:"full"},B("div",{slot:"message"},"tableError"in t?t.tableError:t.layerError))):"incompatible"in e&&e.incompatible&&"layerIncompatible"in t?B("div",{class:i.itemMessage,key:"esri-layer-list__incompatible",slot:"content-bottom"},B("calcite-notice",{afterCreate:this._setTooltipReference,afterRemoved:this._removeTooltipReference,bind:this,icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",tabIndex:0,width:"full"},B("div",{slot:"message"},t.layerIncompatible))):null}get _singleAction(){return this._renderAction({action:TUe(this._filteredSections),textEnabled:!1})}get _filteredSections(){return this.item.actionsSections.map(e=>e.filter(t=>t.visible))}get _actionsCount(){return this.item.actionsSections.reduce((e,t)=>e+t.length,0)}_renderAction(e){const{item:t}=this,{action:i,textEnabled:r}=e;if(!i)return null;const{active:n,disabled:o,title:c,type:y,indicator:v}=i;return B("calcite-action",{active:y==="toggle"&&i.value,appearance:"transparent",disabled:o,icon:gU(i),indicator:v,key:`action-${i.uid}`,loading:n,onclick:()=>this._triggerAction(t,i),scale:"s",slot:r?void 0:"actions-end",text:c??"",textEnabled:r,title:c??void 0},this._renderFallbackIcon(i))}_renderFallbackIcon(e){const{css:t}=this,{className:i,icon:r}=e;if(r)return null;const n="image"in e?e.image:void 0,o={[t.itemActionIcon]:!!i,[t.itemActionImage]:!!n};return i&&(o[i]=!0),n||i?B("span",{"aria-hidden":"true",class:this.classes(t.itemActionIcon,o),key:"icon",styles:sse(n)}):null}_renderItem(e,t,i=[]){return B(Pk,{activeItem:this.activeItem,canMove:this.canMove,css:this.css,dragEnabled:this.dragEnabled,item:e,key:`layerListItem-${e.layer.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:t,parentTitles:i,rootGroupUid:this.rootGroupUid,selectedDragItemLayerUid:this.selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this.onAction,onCatalogOpen:this.onCatalogOpen,onPanelOpen:this.onPanelOpen,onSelectedDragItemLayerUidChange:this.onSelectedDragItemLayerUidChange,onTablesOpen:this.onTablesOpen,onTooltipReferenceChange:this.onTooltipReferenceChange})}_triggerAction(e,t){t&&e&&(t.type==="toggle"&&(t.value=!t.value),this.onAction(t,e))}_triggerOnTablesOpen(e){e&&this.onTablesOpen&&this.onTablesOpen(e)}_triggerOnCatalogOpen(e){var t;e&&((t=this.onCatalogOpen)==null||t.call(this,e))}_focusSelectedDragEl(e,t){this.selectedDragItemLayerUid===t.layer.uid&&N1(e)}_handleCalciteListItemToggle(e,t){e.stopPropagation(),t.open=e.target.open}_handleCalciteListItemDragHandleChange(e,t){var r;e.stopPropagation();const i=e.target.dragSelected;(r=this.onSelectedDragItemLayerUidChange)==null||r.call(this,i?t.layer.uid:null)}_handleCalciteListItemSelect(e,t,i){uu(e.target)===t&&this.selectionMode==="none"&&(i==null?void 0:i.visibilityMode)!=="inherited"&&this._toggleVisibility(t,i)}_togglePanel(e){e.open=!e.open,e.open&&this.onPanelOpen()}_toggleVisibility(e,t){if(!e)return;(t==null?void 0:t.visibilityMode)==="exclusive"&&e.visible||(e.visible=!e.visible)}};gt.vnodeSelector="calcite-list-item",m([w()],gt.prototype,"activeItem",void 0),m([w()],gt.prototype,"canMove",void 0),m([w()],gt.prototype,"css",void 0),m([w()],gt.prototype,"dragEnabled",void 0),m([w()],gt.prototype,"item",void 0),m([w()],gt.prototype,"layerTablesEnabled",void 0),m([w()],gt.prototype,"listModeDisabled",void 0),m([w()],gt.prototype,"messages",void 0),m([w()],gt.prototype,"messagesCommon",void 0),m([w()],gt.prototype,"onAction",void 0),m([w()],gt.prototype,"onPanelOpen",void 0),m([w()],gt.prototype,"onCatalogOpen",void 0),m([w()],gt.prototype,"onTablesOpen",void 0),m([w()],gt.prototype,"onSelectedDragItemLayerUidChange",void 0),m([w()],gt.prototype,"onTooltipReferenceChange",void 0),m([w()],gt.prototype,"parent",void 0),m([w()],gt.prototype,"parentTitles",void 0),m([w()],gt.prototype,"rootGroupUid",void 0),m([w()],gt.prototype,"selectionMode",void 0),m([w()],gt.prototype,"selectedItems",void 0),m([w()],gt.prototype,"selectedDragItemLayerUid",void 0),m([w()],gt.prototype,"visibleElements",void 0),m([w()],gt.prototype,"visibilityAppearance",void 0),m([w()],gt.prototype,"_title",null),m([w()],gt.prototype,"_renderedItemStatus",null),m([w()],gt.prototype,"_renderedItemTemporaryIcon",null),m([w()],gt.prototype,"_renderedItemToggle",null),m([w()],gt.prototype,"_renderedPanel",null),m([w()],gt.prototype,"_renderedPanelAction",null),m([w()],gt.prototype,"_renderedActions",null),m([w()],gt.prototype,"_renderedActionMenu",null),m([w()],gt.prototype,"_renderedActionMenuContent",null),m([w()],gt.prototype,"_renderedCatalogFootprintIcon",null),m([w()],gt.prototype,"_renderedCatalogDynamicIcon",null),m([w()],gt.prototype,"_renderedCatalogSelectNode",null),m([w()],gt.prototype,"_renderedChildList",null),m([w()],gt.prototype,"_hasTables",null),m([w()],gt.prototype,"_renderedTablesItem",null),m([w()],gt.prototype,"_renderedItemMessage",null),m([w()],gt.prototype,"_singleAction",null),m([w()],gt.prototype,"_filteredSections",null),m([w()],gt.prototype,"_actionsCount",null),gt=Pk=m([H("esri.widgets.LayerList.LayerListItem")],gt);const $Ue=gt;function gH(e){return e!=null&&typeof e=="object"&&e.type==="2d"&&e.view2dType==="linkchart"}var Nk;let sd=Nk=class extends Bg{constructor(e){super(e),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new Nk({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};m([w()],sd.prototype,"displayValueEnabled",void 0),m([w()],sd.prototype,"max",void 0),m([w()],sd.prototype,"min",void 0),m([w()],sd.prototype,"step",void 0),m([w()],sd.prototype,"value",void 0),sd=Nk=m([H("esri.support.actions.ActionSlider")],sd);const EUe=sd;let Ln=class extends Cl(yi){constructor(t,i){super(t,i),this._legend=null,this.className=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([ge(()=>this._canCreateLegend,()=>this._createLegend(),qe),ge(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),qe)])}destroy(){this._legend=ci(this._legend)}get _canCreateLegend(){const{content:t,listItem:i}=this;if(!i)return!1;const r="legend";return t===r||t!=null&&!!Array.isArray(t)&&t.includes(r)}get _legendOptions(){const{listItem:t,_legendLayerInfo:i}=this,r=t==null?void 0:t.view;return i&&r?{view:r,layerInfos:[i]}:{}}get _legendLayerInfo(){var c;const t=(c=this.listItem)==null?void 0:c.layer;if(!t||t.type==="subtype-sublayer")return null;const i=rN(t)?t:null,r=t==null?void 0:t.parent,n=r!=null&&"type"in r&&r.type==="map-image"?i==null?void 0:i.source:null,o="";return n&&r?{layer:r,title:o,sublayerIds:[n.mapLayerId]}:{layer:t,title:o}}get disabled(){var n;const{listItem:t,_legend:i,content:r}=this;return!t||!(Array.isArray(r)&&r.length>1)&&!!i&&(!((n=i.activeLayerInfos)!=null&&n.length)||!t.visibleAtCurrentScale||!t.visible)}set disabled(t){this._overrideIfSome("disabled",t)}get icon(){const{image:t}=this,i=this._getFirstWidget();return this._get("icon")??(!t&&i?i.icon:null)}set icon(t){this._overrideIfSome("icon",t)}get title(){var t;return this._get("title")||(((t=this._getFirstWidget())==null?void 0:t.label)??"")}set title(t){this._override("title",t)}render(){return B("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(t){const{_legend:i,disabled:r,open:n}=this;return t&&!r&&n?t==="legend"&&i?B("div",{key:"legend-widget"},i.render()):typeof t=="string"?B("div",{innerHTML:t,key:t}):h0(t)?B("div",{key:"content-widget"},t.render()):t instanceof HTMLElement?B("div",{afterCreate:this._attachToNode,bind:t,key:"content-element"}):null:null}_renderContents(){const{content:t,open:i}=this;return i?Array.isArray(t)?t.map(r=>this._renderContent(r)):this._renderContent(t):null}async _createLegend(){if(ci(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:t}=await de(()=>Promise.resolve().then(()=>uUe),void 0,import.meta.url),i=new t(this._legendOptions);this._legend=i}_attachToNode(t){t.appendChild(this)}_updateLegend(){const t=this._legend;t&&t.set(this._legendOptions)}_getWidget(t){return t==="legend"?this._legend:h0(t)?t:null}_getFirstWidget(){const{content:t}=this;return Array.isArray(t)?t.map(i=>this._getWidget(i)).find(i=>i):this._getWidget(t)}};m([w()],Ln.prototype,"_legend",void 0),m([w()],Ln.prototype,"_canCreateLegend",null),m([w()],Ln.prototype,"_legendOptions",null),m([w()],Ln.prototype,"_legendLayerInfo",null),m([w()],Ln.prototype,"className",void 0),m([w()],Ln.prototype,"content",void 0),m([w()],Ln.prototype,"disabled",null),m([w()],Ln.prototype,"flowEnabled",void 0),m([w()],Ln.prototype,"icon",null),m([w()],Ln.prototype,"image",void 0),m([w()],Ln.prototype,"listItem",void 0),m([w()],Ln.prototype,"open",void 0),m([w()],Ln.prototype,"title",null),m([w()],Ln.prototype,"visible",void 0),Ln=m([H("esri.widgets.LayerList.ListItemPanel")],Ln);const Lue=Ln;var ab;const MUe=Oe.ofType({key:"type",defaultKeyValue:"button",base:Bg,typeMap:{button:Z0,toggle:BI,slider:EUe}}),Oue=Oe.ofType(MUe),n6="layer",ES="child-list-mode",AUe="hide";let wi=ab=class extends Cl(Ve){constructor(e){super(e),this.actionsSections=new Oue,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(Oe.ofType(ab)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.panel=null,this.parent=null,this.view=null}initialize(){if(this.addHandles([ge(()=>{var e;return[this.layer,(e=this.layer)==null?void 0:e.listMode,this.listModeDisabled]},()=>this._watchLayerProperties(this.layer),qe),ge(()=>this.checkPublishStatusEnabled,e=>this._updateChildrenPublishing(e),qe),ge(()=>this.view,e=>this._updateChildrenView(e),qe),ge(()=>this.panel,e=>this._setListItemOnPanel(e),qe)]),typeof this.listItemCreatedFunction=="function"){const e={item:this};this.listItemCreatedFunction.call(null,e)}}destroy(){var e;(e=this.panel)==null||e.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:e,publishing:t}=this;if(!t&&e&&"connectionStatus"in e)return e.connectionStatus}get error(){var e;return(e=this.layer)==null?void 0:e.loadError}get incompatible(){const{layerView:e}=this;return!(!e||!("spatialReferenceSupported"in e))&&!e.spatialReferenceSupported}get layerView(){const{layer:e,view:t}=this;if(!e||!t||e.type==="sublayer")return null;const i=e.type==="subtype-sublayer"?e.parent:e;return t.allLayerViews.find(r=>r.layer===i)??null}castPanel(e){var t;return(t=this.panel)!=null&&t.open&&!e.hasOwnProperty("open")&&(e.open=!0),e?new Lue(e):null}get sortable(){var e;return((e=this.layer)==null?void 0:e.type)!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(e){this._set("sortable",e)}get title(){const e=hs(this,"layer.layer");return(!e||e&&hs(this,"layer.layer.loaded"))&&hs(this,"layer.title")||hs(this,"layer.attributes.title")||""}set title(e){this._override("title",e)}get publishing(){var i;const{layer:e,checkPublishStatusEnabled:t}=this;return t&&e&&"publishingInfo"in e&&((i=e.publishingInfo)==null?void 0:i.status)==="publishing"}get updating(){const{layerView:e,connectionStatus:t,layer:i,publishing:r}=this;return!r&&!t&&(e?e.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var e;return(e=this.layer)==null?void 0:e.visible}set visible(e){const t=this.layer;t&&(t.visible=e)}get visibleAtCurrentScale(){var e,t;return((e=this.layerView)==null?void 0:e.visibleAtCurrentScale)??!bUe(this.layer,(t=this.view)==null?void 0:t.scale)}get visibleAtCurrentTimeExtent(){var e;return((e=this.layerView)==null?void 0:e.visibleAtCurrentTimeExtent)??!0}get visibilityMode(){return gUe(this.layer)}clone(){return new ab({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(e){e&&(e.listItem=this)}_updateChildrenPublishing(e){const t=this.children;t&&t.forEach(i=>i.checkPublishStatusEnabled=e)}_updateChildrenView(e){const t=this.children;t&&t.forEach(i=>i.view=e)}_createChildren(e){const{listModeDisabled:t,children:i}=this,r=e.filter(n=>!i.some(o=>o.layer===n));i.addMany(this._createChildItems(r,t))}_destroyChildren(e){const{children:t}=this,i=t.filter(r=>!e.includes(r.layer));t.destroyMany(i)}_sortChildren(e){this.children.sort((t,i)=>e.indexOf(i.layer)-e.indexOf(t.layer))}_destroyAllChildren(){this.removeHandles(ES),this.children.destroyAll()}_watchChildLayerListMode(e){this.removeHandles(ES),this.listModeDisabled||this.addHandles(e.toArray().map(t=>ge(()=>t.listMode,()=>this._compileChildren(e))),ES)}_compileChildren(e){const t=this.listModeDisabled?e:e==null?void 0:e.filter(i=>O4(i)!==AUe);t!=null&&t.length?(this._createChildren(t),this._destroyChildren(t),this._sortChildren(t),this._watchChildLayerListMode(e)):this._destroyAllChildren()}_watchSublayerChanges(e){e&&this.addHandles(e.on("change",()=>this._compileChildren(e)),n6)}_initializeChildLayers(e){this._compileChildren(e),this._watchSublayerChanges(e)}_createChildItems(e,t){return e.map(i=>t||wUe(i)?new ab({layer:i,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(Ar).reverse()}_watchLayerProperties(e){if(this.removeHandles(n6),this.removeHandles(ES),!e)return;if((!this.listModeDisabled&&O4(e))==="hide-children")return void this.children.destroyAll();const t=Aue(e);t&&this.addHandles(ge(()=>e[t],i=>{e.hasOwnProperty(t)&&this._initializeChildLayers(i)},qe),n6)}};m([w({type:Oue})],wi.prototype,"actionsSections",void 0),m([w()],wi.prototype,"actionsOpen",void 0),m([w()],wi.prototype,"checkPublishStatusEnabled",void 0),m([w({type:Oe})],wi.prototype,"children",void 0),m([w()],wi.prototype,"childrenSortable",void 0),m([w({readOnly:!0})],wi.prototype,"connectionStatus",null),m([w({readOnly:!0})],wi.prototype,"error",null),m([w()],wi.prototype,"hidden",void 0),m([w({readOnly:!0})],wi.prototype,"incompatible",null),m([w()],wi.prototype,"layer",void 0),m([w({readOnly:!0})],wi.prototype,"layerView",null),m([w()],wi.prototype,"listItemCreatedFunction",void 0),m([w({nonNullable:!0})],wi.prototype,"listModeDisabled",void 0),m([w()],wi.prototype,"open",void 0),m([w({type:Lue})],wi.prototype,"panel",void 0),m([wt("panel")],wi.prototype,"castPanel",null),m([w()],wi.prototype,"parent",void 0),m([w({value:!0})],wi.prototype,"sortable",null),m([w()],wi.prototype,"title",null),m([w({readOnly:!0})],wi.prototype,"publishing",null),m([w({readOnly:!0})],wi.prototype,"updating",null),m([w()],wi.prototype,"view",void 0),m([w()],wi.prototype,"visible",null),m([w({readOnly:!0})],wi.prototype,"visibleAtCurrentScale",null),m([w({readOnly:!0})],wi.prototype,"visibleAtCurrentTimeExtent",null),m([w({readOnly:!0})],wi.prototype,"visibilityMode",null),wi=ab=m([H("esri.widgets.LayerList.ListItem")],wi);const nN=wi,ja={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},CUe="hide",Rue=Oe.ofType(nN);let cu=class extends qo.EventedAccessor{constructor(t){super(t),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.operationalItems=new Rue,this.view=null}initialize(){this.addHandles([ge(()=>{var t;return((t=this.view)==null?void 0:t.ready)===!0},()=>this._viewHandles(),qe),ge(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled],()=>this._recompileList()),ge(()=>gH(this.view)?this.view.inGeographicLayout:null,()=>this._compileList())],ja.view)}destroy(){this._removeAllItems(),this.view=null}get state(){const{view:t}=this;return t!=null&&t.ready?"ready":t?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten(t=>t.children).length}triggerAction(t,i){t&&!t.disabled&&this.emit("trigger-action",{action:t,item:i})}moveListItem(t,i,r,n){var k,R;const o=t==null?void 0:t.layer;if(!o||o.type==="subtype-sublayer"||o.type==="sublayer")return;const c=(R=(k=this.view)==null?void 0:k.map)==null?void 0:R.layers,y=i?yH(i):c,v=r?yH(r):c;if(!y||!v)return;const{operationalItems:_}=this,I=(i==null?void 0:i.children)||_,$=(r==null?void 0:r.children)||_,A=v.length-n;t.parent=r||null,I.remove(t),y.remove(o),$.includes(t)||$.add(t,A),v.includes(o)||v.add(o,A),this._compileList()}_createLayerViewHandles(t){this.removeHandles(ja.layerViews),this._compileList(),t&&this.addHandles(t.on("change",()=>this._compileList()),ja.layerViews)}_createMapLayerHandles(t){this.removeHandles(ja.mapLayers),this._compileList(),t&&this.addHandles(t.on("change",()=>this._compileList()),ja.mapLayers)}_createListItem(t){const{view:i,listItemCreatedFunction:r,checkPublishStatusEnabled:n,listModeDisabled:o}=this;return new nN({checkPublishStatusEnabled:n,listModeDisabled:o,layer:t,listItemCreatedFunction:r,view:i})}_removeAllItems(){this.operationalItems.destroyAll()}_getViewableLayers(t){return t?this.listModeDisabled?t:t.filter(i=>O4(i)!==CUe):void 0}_watchLayersListMode(t){this.removeHandles(ja.layerListMode),t&&!this.listModeDisabled&&this.addHandles(ge(()=>t.filter(i=>"listMode"in i).map(i=>i.listMode).toArray(),()=>this._compileList()),ja.layerListMode)}_compileList(){var n,o;const t=(o=(n=this.view)==null?void 0:n.map)==null?void 0:o.layers,i=gH(this.view)&&!this.view.inGeographicLayout?t==null?void 0:t.filter(({type:c})=>c==="link-chart"):t;this._watchLayersListMode(i);const r=this._getViewableLayers(i);r!=null&&r.length?(this._createNewItems(r),this._removeItems(r),this._sortItems(r)):this._removeAllItems()}_createNewItems(t){const{operationalItems:i}=this;t.forEach(r=>{i.some(n=>n.layer===r)||i.add(this._createListItem(r))})}_removeItems(t){const{operationalItems:i}=this,r=[];i.forEach(n=>{n&&t&&t.includes(n.layer)||r.push(n)}),i.destroyMany(r)}_sortItems(t){const{operationalItems:i}=this;i.sort((r,n)=>{const o=t.indexOf(r.layer),c=t.indexOf(n.layer);return o>c?-1:o<c?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:t}=this;this.removeHandles([ja.mapLayers,ja.layerViews,ja.viewLayers]),t!=null&&t.ready?this.addHandles([ge(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.allLayers},i=>this._createMapLayerHandles(i),qe),ge(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},i=>this._createLayerViewHandles(i),qe)],ja.viewLayers):this._removeAllItems()}};m([w()],cu.prototype,"checkPublishStatusEnabled",void 0),m([w()],cu.prototype,"listItemCreatedFunction",void 0),m([w({nonNullable:!0})],cu.prototype,"listModeDisabled",void 0),m([w({type:Rue})],cu.prototype,"operationalItems",void 0),m([w({readOnly:!0})],cu.prototype,"state",null),m([w()],cu.prototype,"totalItems",null),m([w()],cu.prototype,"view",void 0),cu=m([H("esri.widgets.LayerList.LayerListViewModel")],cu);const Pue=cu;let ha=class extends Ve{constructor(){super(...arguments),this.catalogLayerList=!0,this.closeButton=!1,this.collapseButton=!1,this.errors=!1,this.filter=!1,this.flow=!0,this.heading=!1,this.statusIndicators=!0,this.temporaryLayerIndicators=!1}};m([w({type:Boolean,nonNullable:!0})],ha.prototype,"catalogLayerList",void 0),m([w({type:Boolean,nonNullable:!0})],ha.prototype,"closeButton",void 0),m([w({type:Boolean,nonNullable:!0})],ha.prototype,"collapseButton",void 0),m([w({type:Boolean,nonNullable:!0})],ha.prototype,"errors",void 0),m([w({type:Boolean,nonNullable:!0})],ha.prototype,"filter",void 0),m([w({type:Boolean,nonNullable:!0})],ha.prototype,"flow",void 0),m([w({type:Boolean,nonNullable:!0})],ha.prototype,"heading",void 0),m([w({type:Boolean,nonNullable:!0})],ha.prototype,"statusIndicators",void 0),m([w({type:Boolean,nonNullable:!0})],ha.prototype,"temporaryLayerIndicators",void 0),ha=m([H("esri.widgets.LayerList.LayerListVisibleElements")],ha);const Nue=ha,kUe=["label","description","metadata"],LUe=Oe.ofType(nN);let bt=class extends Cl(yi){constructor(t,i){super(t,i),this._activeItem=null,this._tooltipReferenceMap=new Wd,this._focusRootFlowItem=!1,this._focusPanelFlowItem=!1,this._focusLayerFlowItem=null,this._layerListMap=new Wd,this._lastDragDetail=null,this._selectedDragItemLayerUid=null,this._rootGroupUid=`operational-${this.uid}`,this._openedLayersController=null,this.catalogLayerList=null,this.catalogOptions=null,this.collapsed=!1,this.dragEnabled=!1,this.filterPlaceholder="",this.filterText="",this.headingLevel=2,this.knowledgeGraphOptions=null,this.layerTablesEnabled=new Oe(["knowledge-graph"]),this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.mapImageOptions=null,this.messages=null,this.messagesCommon=null,this.minDragEnabledItems=hUe,this.minFilterItems=cUe,this.openedLayers=new Oe,this.openedLayerLists=new Oe,this.selectedItems=new LUe,this.selectionMode="none",this.tableList=null,this.tileOptions=null,this.viewModel=new Pue,this.visibilityAppearance="default",this.visibleElements=new Nue,this._canMove=({dragEl:r,fromEl:n,toEl:o},c)=>{var Q,K,ee;const y=c==="pull"?this.listItemCanGiveFunction:this.listItemCanReceiveFunction,v=uu(r);if(!(v!=null&&v.sortable))return!1;const _=uu(n),I=mH(n),$=uu(o),A=mH(o),k=!!I&&!!A&&I===A,R={selected:v,from:_,to:$},N=n.group,D=o.group,j=((Q=_==null?void 0:_.layer)==null?void 0:Q.type)??"",z=((K=$==null?void 0:$.layer)==null?void 0:K.type)??"",U=new Set(["map-image","catalog","knowledge-graph"]);return N&&D&&typeof y=="function"?y.call(null,R):k&&!U.has(j)&&!U.has(z)&&((ee=v==null?void 0:v.layer)==null?void 0:ee.type)!=="sublayer"},this._onCatalogOpen=r=>{this.openedLayers.push(r.layer.parent),this._focusLayerFlowItem=r.layer.uid},this._onTablesOpen=r=>{this.openedLayers.push(r.layer),this._focusLayerFlowItem=r.layer.uid},this._onPanelOpen=()=>{this._focusPanelFlowItem=!0},this._onSelectedDragItemLayerUidChange=r=>{this._selectedDragItemLayerUid=r},this._onTooltipReferenceChange=(r,n)=>{n?this._tooltipReferenceMap.set(r,n):this._tooltipReferenceMap.delete(r)},this._onTriggerAction=(r,n)=>{this.triggerAction(r,n)},this._clearActiveItem=()=>{this._activeItem=null},this._setActiveItem=r=>{if(this.visibilityAppearance!=="default")return;const n=Array.from(r.composedPath()).find(o=>{var c;return(c=o.classList)==null?void 0:c.contains(zv.item)});this._activeItem=uu(n)},this._onCalciteListOrderChange=r=>{const{_lastDragDetail:n}=this,{toEl:o,fromEl:c,dragEl:y,newIndex:v}=r;if(c&&o&&!((n==null?void 0:n.newIndex)===v&&(n==null?void 0:n.dragEl)===y&&(n==null?void 0:n.toEl)===o&&(n==null?void 0:n.fromEl)===c))if(this._lastDragDetail=r,c!==o)this._moveLayerFromChildList({toEl:o,fromEl:c,dragEl:y,newIndex:v});else{const _=Array.from(c.children).filter(I=>I==null?void 0:I.matches("calcite-list-item")).map(I=>I.value);this._sortLayers(c,_)}}}initialize(){this.addHandles(tn(()=>this.openedLayers,"change",()=>this._handleOpenedLayersChange(),qe))}loadDependencies(){return Vn({button:()=>de(()=>import("./calcite-button-D1yBd9JN.js"),__vite__mapDeps([194,195]),import.meta.url),flow:()=>de(()=>import("./calcite-flow-4q6HHjyt.js"),[],import.meta.url),"flow-item":()=>de(()=>import("./calcite-flow-item-B-gbMQQs.js"),__vite__mapDeps([240,241,236,227,195,237,231,238,229,232,225]),import.meta.url),list:()=>de(()=>import("./calcite-list-BeSrBmBe.js"),__vite__mapDeps([222,223,224,195,225]),import.meta.url),notice:()=>de(()=>import("./calcite-notice-ikeUYD1p.js"),__vite__mapDeps([228,229]),import.meta.url),tooltip:()=>de(()=>import("./calcite-tooltip-BuTh6UsD.js"),__vite__mapDeps([230,231,229,232]),import.meta.url)})}destroy(){this._destroyOpenedLayerLists(),this._tooltipReferenceMap.clear()}get _totalItems(){return this.viewModel.operationalItems.flatten(t=>t.children.filter(i=>i.layer.type!=="catalog-dynamic-group")).length}get _dragEnabled(){return this._totalItems>=this.minDragEnabledItems&&this.dragEnabled}get _filterEnabled(){return this._totalItems>=this.minFilterItems&&this.visibleElements.filter}get _renderedOpenLayerFlowItems(){return this.openedLayers.toArray().map(t=>this._renderLayerFlowItem(t))}get icon(){return"layers"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(t){this.viewModel.listItemCreatedFunction=t}get multipleSelectionEnabled(){return xu(_e.getLogger(this),"multipleSelectionEnabled",{replacement:"selectionMode",version:"4.29",warnOnce:!0}),this.selectionMode==="multiple"}set multipleSelectionEnabled(t){xu(_e.getLogger(this),"multipleSelectionEnabled",{replacement:"selectionMode",version:"4.29",warnOnce:!0}),this.selectionMode=t?"multiple":this.selectionEnabled?"single":"none"}get operationalItems(){return this.viewModel.operationalItems}set operationalItems(t){this.viewModel.operationalItems=t}get selectionEnabled(){return xu(_e.getLogger(this),"selectionEnabled",{replacement:"selectionMode, dragEnabled",version:"4.29",warnOnce:!0}),this.selectionMode!=="none"&&this.dragEnabled}set selectionEnabled(t){xu(_e.getLogger(this),"selectionEnabled",{replacement:"selectionMode, dragEnabled",version:"4.29",warnOnce:!0}),this.dragEnabled=t,this.selectionMode=t?this.multipleSelectionEnabled?"multiple":"single":"none"}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}triggerAction(t,i){return this.viewModel.triggerAction(t,i)}render(){var n,o;const t=(n=this.viewModel)==null?void 0:n.state,i={[ze.hidden]:t==="loading",[ze.disabled]:t==="disabled"},r=(o=this.operationalItems)==null?void 0:o.filter(c=>!c.hidden&&(this.visibleElements.errors||!c.error));return B("div",{class:this.classes(zv.base,ze.widget,ze.panel,i)},r!=null&&r.length?[this._renderItemTooltips(r),this._renderItems(r)]:this._renderNoItems())}async _createFlowList(t,i){const{_layerListMap:r}=this,n=r.get(t);if(n)return n;const o=t.type==="catalog"?await this._createCatalogLayerList(t):await this._createTableList(t);return i.aborted||r.set(t,o),o}async _handleOpenedLayersChange(){var v;const{_layerListMap:t,openedLayers:i,openedLayerLists:r}=this;(v=this._openedLayersController)==null||v.abort();const n=new AbortController,{signal:o}=n;this._openedLayersController=n,t.forEach((_,I)=>{i.includes(I)||(_.destroy(),t.delete(I))});const c=await Promise.all(i.map(_=>this._createFlowList(_,o)));if(o.aborted)return;r.removeAll(),r.addMany(c);const y=r.at(-1);y?"catalogLayer"in y?(this._set("catalogLayerList",y),this._set("tableList",null)):(this._set("catalogLayerList",null),this._set("tableList",y)):(this._set("catalogLayerList",null),this._set("tableList",null))}_destroyOpenedLayerLists(){this.openedLayerLists.destroyAll(),this.openedLayers.removeAll(),this._layerListMap.clear()}_renderItemTooltip(t){const{_tooltipReferenceMap:i,messages:r}=this;return t?B("calcite-tooltip",{key:`tooltip-${t.layer.uid}`,referenceElement:i.get(t.layer.uid)},r.layerIncompatibleTooltip):null}_renderItemTooltipNodes(t){var i;return t.incompatible?this._renderItemTooltip(t):(i=t.children)==null?void 0:i.filter(r=>!r.hidden).toArray().map(r=>this._renderItemTooltipNodes(r))}_renderItemTooltips(t){return t==null?void 0:t.toArray().map(i=>this._renderItemTooltipNodes(i))}_renderNoItemsMessage(){return B("div",{slot:"message"},this.messages.noItemsToDisplay)}_renderNoItems(){return B("div",{class:zv.itemMessage,key:"esri-layer-list__no-items"},B("calcite-notice",{icon:"information",kind:"info",open:!0,width:"full"},this._renderNoItemsMessage()))}async _createCatalogLayerList(t){const{default:i}=await de(()=>import("./CatalogLayerList-C0UPYh5M.js"),[],import.meta.url),{headingLevel:r,catalogOptions:n,view:o,filterPlaceholder:c,listItemCreatedFunction:y,minFilterItems:v,selectionMode:_,visibilityAppearance:I,_onCatalogOpen:$,_onTablesOpen:A,layerTablesEnabled:k}=this;return new i({headingLevel:r,view:o,filterPlaceholder:c,listItemCreatedFunction:y,minFilterItems:v,selectionMode:_,visibilityAppearance:I,...n,catalogLayer:t,layerTablesEnabled:k,onCatalogOpen:$,onTablesOpen:A})}_getTableListParams(t){switch(t.type){case"knowledge-graph":return{...this.knowledgeGraphOptions,tables:t.tables};case"map-image":return{...this.mapImageOptions,tables:t.subtables};case"tile":return{...this.tileOptions,tables:t.subtables};default:return null}}async _createTableList(t){const{default:i}=await de(()=>import("./TableList-BbfqPjjq.js"),[],import.meta.url),{headingLevel:r,selectionMode:n,dragEnabled:o}=this;return new i({headingLevel:r,selectionMode:n,dragEnabled:o,...this._getTableListParams(t)})}_renderLayerFlowItem(t){var o;const{messages:i,openedLayers:r}=this,n=t.title||this.messages.untitledLayer;return B("calcite-flow-item",{afterCreate:this._focusLayerFlowItemNode,afterUpdate:this._focusLayerFlowItemNode,bind:this,"data-layer-uid":t.uid,description:n,heading:i[t.type==="catalog"?"catalogLayers":"tables"],headingLevel:this.headingLevel,key:`flow-layer-list-${t.uid}`,onCalciteFlowItemBack:c=>{c.preventDefault(),r.pop();const y=r.at(-1);y?this._focusLayerFlowItem=y.uid:this._focusRootFlowItem=!0}},(o=this._layerListMap.get(t))==null?void 0:o.render())}_renderPanelFlowItems(t){return t?t.flatten(i=>i.children).filter(({hidden:i,panel:r})=>!i&&(r==null?void 0:r.open)&&!r.disabled&&r.flowEnabled).toArray().map(({title:i,panel:r})=>{const n=()=>this._handlePanelFlowItemBack(r);return B("calcite-flow-item",{afterCreate:this._focusPanelFlowItemNode,afterUpdate:this._focusPanelFlowItemNode,bind:this,description:i,heading:r.title,headingLevel:this.headingLevel,key:`flow-panel-${r.uid}`,onCalciteFlowItemBack:o=>{o.preventDefault(),n()}},r.render(),B("calcite-button",{appearance:"transparent",onclick:n,slot:"footer-actions",width:"full"},this.messagesCommon.back))}):[]}_handlePanelFlowItemBack(t){t.open=!1,this._focusRootFlowItem=!0}_focusRootFlowItemNode(t){this._focusRootFlowItem&&(this._focusRootFlowItem=!1,N1(t))}_focusLayerFlowItemNode(t){this._focusLayerFlowItem===t.dataset.layerUid&&(this._focusLayerFlowItem=null,N1(t))}_focusPanelFlowItemNode(t){this._focusPanelFlowItem&&(this._focusPanelFlowItem=!1,N1(t))}_renderItems(t){const{visible:i,collapsed:r,_filterEnabled:n,_rootGroupUid:o,visibleElements:{closeButton:c,collapseButton:y,heading:v,flow:_},_dragEnabled:I,selectionMode:$,filterText:A,filterPlaceholder:k,messages:R}=this,N=[B("calcite-flow-item",{afterCreate:this._focusRootFlowItemNode,afterUpdate:this._focusRootFlowItemNode,bind:this,closable:c,closed:!i,collapsed:r,collapsible:y,heading:v?R.widgetLabel:void 0,headingLevel:this.headingLevel,key:"root-flow-item",onCalciteFlowItemClose:()=>this.visible=!1},B("calcite-list",{afterCreate:D=>{D.addEventListener("focusin",this._setActiveItem),D.addEventListener("focusout",this._clearActiveItem)},afterRemoved:D=>{D.removeEventListener("focusin",this._setActiveItem),D.removeEventListener("focusout",this._clearActiveItem)},canPull:D=>this._canMove(D,"pull"),canPut:D=>this._canMove(D,"put"),"data-layer-type":o,dragEnabled:I,filterEnabled:n,filterPlaceholder:k,filterProps:kUe,filterText:n?A:"",group:o,key:"root-list",label:R.widgetLabel,onmouseleave:this._clearActiveItem,onmouseover:this._setActiveItem,selectionAppearance:"border",selectionMode:$,onCalciteListChange:D=>this._handleCalciteListChange(D),onCalciteListDragEnd:D=>this._handleCalciteListDragEnd(D.detail),onCalciteListFilter:D=>{var j;return this.filterText=((j=D.target)==null?void 0:j.filterText)??""},onCalciteListOrderChange:D=>this._onCalciteListOrderChange(D.detail)},t==null?void 0:t.toArray().map(D=>this._renderItem(D)),t!=null&&t.length&&n?B("div",{class:zv.filterNoResults,slot:"filter-no-results"},B("calcite-notice",{kind:"info",open:!0,width:"full"},this._renderNoItemsMessage())):null)),this._renderPanelFlowItems(t),this._renderedOpenLayerFlowItems];return i?_?B("calcite-flow",{key:"root-flow"},N):N:null}_renderItem(t,i,r){return B($Ue,{activeItem:this._activeItem,canMove:this._canMove,css:zv,dragEnabled:this.dragEnabled,item:t,key:`layerListItem-${t.layer.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.viewModel.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:i,parentTitles:r,rootGroupUid:this._rootGroupUid,selectedDragItemLayerUid:this._selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this._onTriggerAction,onCatalogOpen:this._onCatalogOpen,onPanelOpen:this._onPanelOpen,onSelectedDragItemLayerUidChange:this._onSelectedDragItemLayerUidChange,onTablesOpen:this._onTablesOpen,onTooltipReferenceChange:this._onTooltipReferenceChange})}_moveLayerFromChildList({toEl:t,fromEl:i,dragEl:r,newIndex:n}){const o=uu(r),c=uu(t),y=uu(i);this.viewModel.moveListItem(o,y,c,n)}_handleCalciteListDragEnd(t){const{fromEl:i,dragEl:r,oldIndex:n}=t;i.insertBefore(r,i.children[n])}_sortLayers(t,i){var r,n;if(t)if(t.group===this._rootGroupUid)Cue((n=(r=this.view)==null?void 0:r.map)==null?void 0:n.layers,i);else{const o=uu(t);if(!o)return;_Ue(o,i)}}_handleCalciteListChange(t){const{selectionMode:i,selectedItems:r}=this;if(i==="none")return;const n=t.target.selectedItems.map(o=>uu(o)).filter(Boolean);r.removeAll(),r.addMany(n)}};m([w()],bt.prototype,"_activeItem",void 0),m([w()],bt.prototype,"_tooltipReferenceMap",void 0),m([w()],bt.prototype,"_focusRootFlowItem",void 0),m([w()],bt.prototype,"_focusPanelFlowItem",void 0),m([w()],bt.prototype,"_focusLayerFlowItem",void 0),m([w()],bt.prototype,"_layerListMap",void 0),m([w()],bt.prototype,"_totalItems",null),m([w()],bt.prototype,"_dragEnabled",null),m([w()],bt.prototype,"_filterEnabled",null),m([w()],bt.prototype,"_renderedOpenLayerFlowItems",null),m([w({readOnly:!0})],bt.prototype,"catalogLayerList",void 0),m([w()],bt.prototype,"catalogOptions",void 0),m([w()],bt.prototype,"collapsed",void 0),m([w()],bt.prototype,"dragEnabled",void 0),m([w()],bt.prototype,"filterPlaceholder",void 0),m([w()],bt.prototype,"filterText",void 0),m([w()],bt.prototype,"headingLevel",void 0),m([w()],bt.prototype,"icon",null),m([w()],bt.prototype,"knowledgeGraphOptions",void 0),m([w()],bt.prototype,"label",null),m([w()],bt.prototype,"layerTablesEnabled",void 0),m([w()],bt.prototype,"listItemCanGiveFunction",void 0),m([w()],bt.prototype,"listItemCanReceiveFunction",void 0),m([w()],bt.prototype,"listItemCreatedFunction",null),m([w()],bt.prototype,"mapImageOptions",void 0),m([w(),Ht("esri/widgets/LayerList/t9n/LayerList")],bt.prototype,"messages",void 0),m([w(),Ht("esri/t9n/common")],bt.prototype,"messagesCommon",void 0),m([w()],bt.prototype,"minDragEnabledItems",void 0),m([w()],bt.prototype,"minFilterItems",void 0),m([w()],bt.prototype,"multipleSelectionEnabled",null),m([w({readOnly:!0})],bt.prototype,"openedLayers",void 0),m([w({readOnly:!0})],bt.prototype,"openedLayerLists",void 0),m([w()],bt.prototype,"operationalItems",null),m([w()],bt.prototype,"selectionEnabled",null),m([w()],bt.prototype,"selectedItems",void 0),m([w()],bt.prototype,"selectionMode",void 0),m([w({readOnly:!0})],bt.prototype,"tableList",void 0),m([w()],bt.prototype,"tileOptions",void 0),m([w()],bt.prototype,"view",null),m([R3("trigger-action"),w({type:Pue})],bt.prototype,"viewModel",void 0),m([w()],bt.prototype,"visibilityAppearance",void 0),m([w({type:Nue,nonNullable:!0})],bt.prototype,"visibleElements",void 0),bt=m([H("esri.widgets.LayerList")],bt);const OUe=bt;let Tc=class extends oae(Dae($2)){constructor(t){super(t),this.elevationInfo=null,this.graphics=new l0,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(t){return this.graphics.add(t),this}addMany(t){return this.graphics.addMany(t),this}removeAll(){return this.graphics.removeAll(),this}remove(t){this.graphics.remove(t)}removeMany(t){this.graphics.removeMany(t)}on(t,i){return super.on(t,i)}graphicChanged(t){this.emit("graphic-update",t)}};m([w({type:dae})],Tc.prototype,"elevationInfo",void 0),m([w(kA(l0,"graphics"))],Tc.prototype,"graphics",void 0),m([w({type:["show","hide"]})],Tc.prototype,"listMode",void 0),m([w()],Tc.prototype,"screenSizePerspectiveEnabled",void 0),m([w({readOnly:!0})],Tc.prototype,"type",void 0),m([w({constructOnly:!0})],Tc.prototype,"internal",void 0),Tc=m([H("esri.layers.GraphicsLayer")],Tc);const RUe=Tc;var Gnt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function PUe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function NUe(e,t){for(var i=0;i<t.length;i++){const r=t[i];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in e)){const o=Object.getOwnPropertyDescriptor(r,n);o&&Object.defineProperty(e,n,o.get?o:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var vH,wH={exports:{}};function FUe(){return vH||(vH=1,function(e){function t(){function r(d){if(typeof d=="number")return Y.Tc.Zg(d);if(d==null)return null;if(W3[d]!=null)return Y.Tc.Zg(W3[d]);throw Error("Unrecognised Unit Type")}function n(d){if(typeof d=="number")return Y.Tc.Zg(d);if(d==null)return null;if(J3[d]!=null)return Y.Tc.Zg(J3[d]);throw Error("Unrecognised Unit Type")}function o(d){if(d)switch(d){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function c(d,L,S,h){if(S==null||S.B())return null;switch(S.getType()){case Y.qn.Point:return d.exportPoint(L,S,h);case Y.qn.Polygon:return d.exportPolygon(L,S,h);case Y.qn.Polyline:return d.exportPolyline(L,S,h);case Y.qn.MultiPoint:return d.exportMultipoint(L,S,h);case Y.qn.Envelope:return d.exportExtent(L,S,h)}return null}function y(d,L,S,h){if(S.getType()!==Y.qn.Point)throw Error("Geometry not Point");return d.exportPoint(L,S,h)}function v(d,L,S){return d.convertToGEGeometry(L,S)}function _(d){var L=d.wkid;d=d.wkt2||d.wkt;var S=Uu.get(L||d);return S==null&&(L!==-1&&L!=null?(S=Y.Eg.create(L),Uu.set(L,S)):d&&(S=Y.Eg.qP(d),Uu.set(d,S)),hh.has(L||d)&&S.VW(hh.get(L||d))),S}function I(d){var L,S,h;if(d==null)return null;var l=_(d);return d=l.Hd(),l=l.Kn(),(L={}).tolerance=l,L.unitType=d==null?-1:d.od,L.unitID=d==null?-1:d.Ec(),L.unitBaseFactor=d==null?0:d.ai,L.unitSquareDerivative=d==null?0:(h=(S=Y.Tc.aG(d))===null||S===void 0?void 0:S.Ec())!==null&&h!==void 0?h:0,L}function $(d,L,S,h){return S==null?null:(S=Y.$b.clip(v(d,Fe,S),v(d,Fe,h),_(L)),c(d,Fe,S,L))}function A(d,L,S,h){S=Y.$b.dl(v(d,Fe,S),v(d,Fe,h),_(L)),h=[];for(var l=0;l<S.length;l++)h.push(c(d,Fe,S[l],L));return h}function k(d,L,S,h){if(S==null||h==null)throw Error("Illegal Argument Exception");return Y.$b.contains(v(d,Fe,S),v(d,Fe,h),_(L))}function R(d,L,S,h){if(S==null||h==null)throw Error("Illegal Argument Exception");return Y.$b.BP(v(d,Fe,S),v(d,Fe,h),_(L))}function N(d,L,S,h,l){if(S==null||h==null)throw Error("Illegal Argument Exception");return Y.$b.tb(v(d,Fe,S),v(d,Fe,h),_(L),r(l))}function D(d,L,S,h){return!(S==null&&h!=null||h==null&&S!=null)&&Y.$b.Nb(v(d,Fe,S),v(d,Fe,h),_(L))}function j(d,L,S,h){if(S==null||h==null)throw Error("Illegal Argument Exception");return Y.$b.TS(v(d,Fe,S),v(d,Fe,h),_(L))}function z(d,L,S,h){if(S==null||h==null)throw Error("Illegal Argument Exception");return Y.$b.touches(v(d,Fe,S),v(d,Fe,h),_(L))}function U(d,L,S,h){if(S==null||h==null)throw Error("Illegal Argument Exception");return Y.$b.qY(v(d,Fe,S),v(d,Fe,h),_(L))}function W(d,L,S,h){if(S==null||h==null)throw Error("Illegal Argument Exception");return Y.$b.TP(v(d,Fe,S),v(d,Fe,h),_(L))}function Q(d,L,S,h){if(S==null||h==null)throw Error("Illegal Argument Exception");return Y.$b.DU(v(d,Fe,S),v(d,Fe,h),_(L))}function K(d,L,S,h,l){if(S==null||h==null)throw Error("Illegal Argument Exception");return Y.$b.yB(v(d,Fe,S),v(d,Fe,h),_(L),l)}function ee(d,L,S){if(S==null)throw Error("Illegal Argument Exception");return Y.$b.dT(v(d,Fe,S),_(L))}function ie(d,L,S){if(S==null)throw Error("Illegal Argument Exception");return S=Y.$b.eC(v(d,Fe,S),_(L)),c(d,Fe,S,L)}function ae(d,L,S,h){if(h===void 0&&(h=!1),S==null)throw Error("Illegal Argument Exception");if(Array.isArray(S)){var l=h,s=[];for(h=0;h<S.length;h++)s.push(v(d,Fe,S[h]));for(S=Y.$b.jP(s,l),l=Array(S.length),h=0;h<S.length;h++)l[h]=c(d,Fe,S[h],L);return l}return h=Y.$b.iP(v(d,Fe,S),_(L)),c(d,Fe,h,L)}function ue(d,L,S,h){if(S==null||h==null)throw Error("Illegal Argument Exception");if(Array.isArray(S)){for(var l=[],s=0;s<S.length;s++)l.push(v(d,Fe,S[s]));for(S=Y.$b.QP(l,v(d,Fe,h),_(L)),h=Array(S.length),s=0;s<S.length;s++)h[s]=c(d,Fe,S[s],L);return h}return s=Y.$b.im(v(d,Fe,S),v(d,Fe,h),_(L)),c(d,Fe,s,L)}function Ie(d,L,S,h){if(S==null||h==null)throw Error("Illegal Argument Exception");if(Array.isArray(S)){for(var l=[],s=0;s<S.length;s++)l.push(v(d,Fe,S[s]));for(S=Y.$b.VX(l,v(d,Fe,h),_(L)),h=Array(S.length),s=0;s<S.length;s++)h[s]=c(d,Fe,S[s],L);return h}return s=Y.$b.ep(v(d,Fe,S),v(d,Fe,h),_(L)),c(d,Fe,s,L)}function Ae(d,L,S,h){if(S==null||h==null)throw Error("Illegal Argument Exception");if(Array.isArray(S)){for(var l=[],s=0;s<S.length;s++)l.push(v(d,Fe,S[s]));for(S=Y.$b.RS(l,v(d,Fe,h),_(L)),h=Array(S.length),s=0;s<S.length;s++)h[s]=c(d,Fe,S[s],L);return h}return s=Y.$b.Ea(v(d,Fe,S),v(d,Fe,h),_(L)),c(d,Fe,s,L)}function Me(d,L,S,h){if(S==null)return null;var l=[];if(Array.isArray(S)){if(S.length===0)return null;for(h=0;h<S.length;h++)l.push(v(d,Fe,S[h]))}else l.push(v(d,Fe,S)),h!=null&&l.push(v(d,Fe,h));return c(d,Fe,Y.$b.jY(l,_(L)),L)}function fe(d,L,S,h,l,s,a,u){var p=0;if(s!=null)switch(s){case"round":p=0;break;case"bevel":p=1;break;case"miter":p=2;break;case"square":p=3}if(Array.isArray(S)){if(S==null)d=null;else if(S.length===0)d=[];else{var f=[];for(s=0;s<S.length;s++)f.push(v(d,Fe,S[s]));for(S=Y.$b.BU(f,_(L),h,p,a,u,r(l)),h=Array(S.length),s=0;s<S.length;s++)h[s]=c(d,Fe,S[s],L);d=h}return d}return S=Y.$b.offset(v(d,Fe,S),_(L),h,p,a,u,r(l)),c(d,Fe,S,L)}function se(d,L,S,h,l,s){if(s===void 0&&(s=!1),Array.isArray(S)){if(!Array.isArray(h)){for(var a=[],u=0;u<S.length;u++)a.push(h);h=a}if(h.length!=S.length){if(h.length==0)throw Error("Illegal Argument Exception");a=[];var p=0;for(u=0;u<S.length;u++)h[u]===void 0?a.push(p):(a.push(h[u]),p=h[u]);h=a}return he(d,L,S,h,l,!1,s,"geodesic",NaN)}return S=Y.$b.buffer(v(d,Fe,S),_(L),h,r(l),!1,0,NaN),c(d,Fe,S,L)}function ye(d,L,S,h,l,s,a,u){if(Array.isArray(S)){if(!Array.isArray(h)){for(var p=[],f=0;f<S.length;f++)p.push(h);h=p}if(h.length!==S.length){if(h.length===0)throw Error("Illegal Argument Exception");p=[];var g=0;for(f=0;f<S.length;f++)h[f]===void 0?p.push(g):(p.push(h[f]),g=h[f]);h=p}return he(d,L,S,h,l,!0,s,a,u)}return a===void 0&&(a=NaN),S=Y.$b.buffer(v(d,Fe,S),_(L),h,r(l),!0,o(s),a),c(d,Fe,S,L)}function he(d,L,S,h,l,s,a,u,p){if(p===void 0&&(p=NaN),S==null)return null;if(S.length===0)return[];for(var f=[],g=0;g<S.length;g++)f.push(v(d,Fe,S[g]));for(S=Y.$b.MN(f,_(L),h,r(l),s,a,o(u),p),h=Array(S.length),g=0;g<S.length;g++)h[g]=c(d,Fe,S[g],L);return h}function ce(d,L,S,h,l){var s;return l===void 0&&(l=!0),S=Y.$b.nz(v(d,Fe,S),v(d,Fe,h),l),(s={}).coordinate=y(d,Fe,S.fz(),L),s.distance=S.hz(),s.isRightSide=S.Sz(),s.vertexIndex=S.Ua(),s.isEmpty=S.B(),s}function xe(d,L,S,h){var l;return S=Y.$b.oz(v(d,Fe,S),v(d,Fe,h)),(l={}).coordinate=y(d,Fe,S.fz(),L),l.distance=S.hz(),l.isRightSide=S.Sz(),l.vertexIndex=S.Ua(),l.isEmpty=S.B(),l}function Ne(d,L,S,h,l,s){var a;for(S=Y.$b.pz(v(d,Fe,S),v(d,Fe,h),l,s),h=[],l=0;l<S.length;l++)S[l].B()===!1&&h.push(((a={}).coordinate=y(d,Fe,S[l].fz(),L),a.distance=S[l].hz(),a.isRightSide=S[l].Sz(),a.vertexIndex=S[l].Ua(),a.isEmpty=S[l].B(),a));return h}function Ze(d,L,S,h,l,s){return S=Y.$b.QQ(v(d,Fe,S),_(L),h,l,r(s)),c(d,Fe,S,L)}function lt(d,L,S,h,l){return S=Y.$b.Qr(v(d,Fe,S),_(L),h,r(l)),c(d,Fe,S,L)}function Ot(d,L,S,h,l,s){return s===void 0&&(s=0),S=Y.$b.Wy(v(d,Fe,S),_(L),h,r(l),s),c(d,Fe,S,L)}function Wt(d,L,S,h){if(S==null)throw Error("Illegal Argument Exception");return Y.$b.JU(v(d,Fe,S),_(L),n(h))}function tr(d,L,S,h){if(S==null)throw Error("Illegal Argument Exception");return Y.$b.KU(v(d,Fe,S),_(L),r(h))}function Sr(d,L,S,h,l){if(S==null)throw Error("Illegal Argument Exception");return Y.$b.WQ(v(d,Fe,S),_(L),n(h),o(l))}function Un(d,L,S,h,l){if(S==null)throw Error("Illegal Argument Exception");return Y.$b.ZQ(v(d,Fe,S),_(L),r(h),o(l))}function ju(d){Y.NL.bind(d)}function iy(d,L,S,h,l){var s=null,a=null;if(h){if(!l)throw Y.i.N("AOI missing Spatial Reference");s=v(d,Fe,h),a=_(l).fh()}return(d=Y.gu.XR(_(L).fh(),_(S).fh(),s,a))!==null?d:null}function zu(d,L,S,h,l){var s=null,a=null;if(h){if(!l)throw Y.i.N("AOI missing Spatial Reference");s=v(d,Fe,h),a=_(l).fh()}return Y.gu.YR(_(L).fh(),_(S).fh(),s,a)}function ch(d,L,S,h,l,s){if(l===void 0&&(l=null),s===void 0&&(s=null),s){var a=new Y.yC;a.Vu=s.densificationStep,a.Jr=s.centralMeridianOfOutputGCS,s.clipWithInputHorizon&&a.PW(s.clipWithInputHorizon),s.clipWithOutputHorizon&&a.QW(s.clipWithOutputHorizon)}if(this.KY===!1)throw Error("Projection Engine must be enabled using enableProjection");if(L.length===0)return[];if(l){if(!(s=l.getCachedGeTransformation(S,h)))e:{if(s=l,l=null,s){var u=s.getGTListEntry();if(u!==null){l=new Y.wC(null);for(var p=0,f=u.steps;p<f.length;p++){u=f[p];var g=new Y.Dx(u.geogtran);u.isInverse&&g.Qz(),l.add(g)}a=Y.vr.Nr(_(S).fh(),_(h).fh(),l,a),s.assignCachedGe(S,h,a),s=a;break e}}if(l===null&&s&&s.steps&&0<s.steps.length){for(l=new Y.wC(null),p=0,f=s.steps;p<f.length;p++)(u=f[p]).wkid!=-1&&u.wkid!=null?l.add(Y.Dx.create(u.wkid,u.isInverse)):l.add(Y.Dx.uP(u.wkt,u.isInverse));a=Y.vr.Nr(_(S).fh(),_(h).fh(),l,a),s.assignCachedGe(S,h,a),s=a}else s=Y.vr.Nr(_(S).fh(),_(h).fh(),l,a)}for(S=[],l=0;l<L.length;l++)a=L[l],S.push(q3(d,a,h,s))}else for(s=Y.vr.Nr(_(S).fh(),_(h).fh(),null),S=[],l=0;l<L.length;l++)a=L[l],S.push(q3(d,a,h,s));return S}function q3(d,L,S,h){return L=Y.$b.zh(v(d,Fe,L),h),c(d,Fe,L,S)}function AT(d,L){d!=null&&(d=d.wkid||d.wkt2||d.wkt,hh.has(d),hh.set(d,L),Uu.has(d)&&Uu.delete(d))}function CT(d){d!=null&&(d=d.wkid||d.wkt2||d.wkt,hh.has(d)&&(hh.delete(d),Uu.has(d)&&Uu.delete(d)))}function kT(d,L,S,h){if(S==null||h==null)return[];var l=[],s=0;for(S=Y.$b.QS(v(d,Fe,S),v(d,Fe,h),_(L))||[];s<S.length;s++)l.push(c(d,Fe,S[s],L));return l}var kr,Y,Bn,H3,Bt=this&&this.__extends||function(){function d(L,S){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,l){h.__proto__=l}||function(h,l){for(var s in l)l.hasOwnProperty(s)&&(h[s]=l[s])})(L,S)}return function(L,S){function h(){this.constructor=L}d(L,S),L.prototype=S===null?Object.create(S):(h.prototype=S.prototype,new h)}}();(function(d){var L;(L=d.qn||(d.qn={}))[L.Unknown=0]="Unknown",L[L.Point=33]="Point",L[L.Line=322]="Line",L[L.Envelope=197]="Envelope",L[L.MultiPoint=550]="MultiPoint",L[L.Polyline=1607]="Polyline",L[L.Polygon=1736]="Polygon",function(h){h[h.enumMild=0]="enumMild",h[h.enumMedium=1]="enumMedium",h[h.enumHot=2]="enumHot"}(d.YK||(d.YK={}));var S=function(){function h(){this.description=null,this.VA=0}return h.prototype.getType=function(){return 0},h.prototype.Db=function(){return-1},h.prototype.Nf=function(l){this.vc(),l!=this.description&&this.sn(l)},h.prototype.sn=function(){},h.prototype.Jl=function(l){this.vc(),l!=this.description&&(l=d.ee.CR(this.description,l))!=this.description&&this.sn(l)},h.prototype.hasAttribute=function(l){return this.description.hasAttribute(l)},h.prototype.re=function(l){this.vc(),this.description.hasAttribute(l)||(l=d.ee.BR(this.description,l),this.sn(l))},h.prototype.Tg=function(){return null},h.prototype.bn=function(){},h.prototype.A=function(){},h.prototype.Qo=function(){},h.prototype.xc=function(l){this.A(l)},h.prototype.B=function(){return!0},h.prototype.Oa=function(){},h.prototype.Oc=function(){},h.prototype.Ia=function(){return null},h.prototype.copyTo=function(){},h.prototype.Ke=function(){return 0},h.prototype.Qb=function(){return 0},h.prototype.iG=function(){return this.hasAttribute(1)},h.tf=function(l){return 1+((192&l)>>6)>>1},h.Rn=function(l){return!!(32&l)},h.US=function(l){return!!(128&l)},h.yd=function(l){return!!(256&l)},h.xj=function(l){return!!(512&l)},h.Hc=function(l){return!!(1024&l)},h.prototype.Of=function(){var l=this.Ia();return this.copyTo(l),l},h.prototype.mg=function(){return null},h.jg=function(l){var s=l.Ia();return l.copyTo(s),s},h.prototype.vc=function(){0<=this.VA&&(this.VA+=2147483649)},h.Ax=function(l){var s=l.getType();if(h.xj(s))return l.I();if(l.B())return 0;if(s==197)return 4;if(s==33)return 1;if(h.yd(s))return 2;throw d.i.fa("missing type")},h}();d.aa=S})(Y||(Y={})),Bn=Y||(Y={}),H3=function(){function d(){this.y=this.x=0}return d.construct=function(L,S){var h=new d;return h.x=L,h.y=S,h},d.al=function(L){var S=new d;return S.x=L.x,S.y=L.y,S},d.prototype.ma=function(L,S){this.x=L,this.y=S},d.prototype.L=function(L){this.x=L.x,this.y=L.y},d.prototype.fq=function(L,S){return this.x===L&&this.y===S},d.prototype.Rz=function(L){return 2220446049250313e-31>=Math.abs(this.x-L.x)&&2220446049250313e-31>=Math.abs(this.y-L.y)},d.prototype.qb=function(L){return this.x===L.x&&this.y===L.y},d.prototype.Nb=function(L){return L==this||L instanceof d&&this.x==L.x&&this.y==L.y},d.prototype.sub=function(L){this.x-=L.x,this.y-=L.y},d.prototype.uc=function(L,S){this.x=L.x-S.x,this.y=L.y-S.y},d.prototype.add=function(L,S){S!==void 0?(this.x=L.x+S.x,this.y=L.y+S.y):(this.x+=L.x,this.y+=L.y)},d.prototype.Sq=function(){this.x=-this.x,this.y=-this.y},d.prototype.mt=function(L){this.x=-L.x,this.y=-L.y},d.prototype.NS=function(L,S,h){this.x=L.x*(1-h)+S.x*h,this.y=L.y*(1-h)+S.y*h},d.prototype.Ct=function(L,S){this.x=this.x*L+S.x,this.y=this.y*L+S.y},d.prototype.HW=function(L,S,h){this.x=S.x*L+h.x,this.y=S.y*L+h.y},d.prototype.scale=function(L){this.x*=L,this.y*=L},d.prototype.compare=function(L){return this.y<L.y?-1:this.y>L.y?1:this.x<L.x?-1:this.x>L.x?1:0},d.prototype.normalize=function(){var L=this.length();L==0&&(this.x=1,this.y=0),this.x/=L,this.y/=L},d.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},d.prototype.Sk=function(){return this.x*this.x+this.y*this.y},d.tb=function(L,S){return Math.sqrt(this.yc(L,S))},d.Oy=function(L,S,h,l){return L-=h,S-=l,Math.sqrt(L*L+S*S)},d.prototype.Qh=function(L){return this.x*L.x+this.y*L.y},d.prototype.fD=function(L){return Math.abs(this.x*L.x)+Math.abs(this.y*L.y)},d.prototype.wi=function(L){return this.x*L.y-this.y*L.x},d.prototype.Bt=function(L,S){var h=-this.x*S+this.y*L;this.x=this.x*L+this.y*S,this.y=h},d.prototype.Hv=function(){var L=this.x;this.x=-this.y,this.y=L},d.prototype.MG=function(L){this.x=-L.y,this.y=L.x},d.prototype.ar=function(){var L=this.x;this.x=this.y,this.y=-L},d.prototype.qu=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:this.x==0?4:3},d.nu=function(L,S){var h=L.qu(),l=S.qu();return l==h?0>(L=L.wi(S))?1:0<L?-1:0:h<l?-1:1},d.yc=function(L,S){var h=L.x-S.x;return h*h+(L=L.y-S.y)*L},d.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},d.prototype.Rc=function(){this.y=this.x=NaN},d.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},d.prototype.offset=function(L,S){var h=d.tb(L,S),l=d.construct(this.x,this.y);if(h==0)return d.tb(l,L);var s=new d;return s.L(S),s.sub(L),l.sub(L),l.wi(s)/h},d.Uq=function(L,S,h){var l=new Bn.Wb;l.set(S.x),l.sub(L.x);var s=new Bn.Wb;s.set(h.y),s.sub(L.y);var a=new Bn.Wb;a.set(S.y),a.sub(L.y);var u=new Bn.Wb;return u.set(h.x),u.sub(L.x),l.Ag(s),a.Ag(u),l.sub(a),l.ps()?(l=new Bn.hp(S.x),s=new Bn.hp(L.x),a=new Bn.hp(L.y),l=l.jt(s),L=(L=new Bn.hp(h.y)).jt(a),S=(S=new Bn.hp(S.y)).jt(a),h=(h=new Bn.hp(h.x)).jt(s),l=l.lr(L),S=S.lr(h),(l=l.lr(S)).nT()?-1:l.fS()?1:0):0>(h=l.value())?-1:0<h?1:0},d.prototype.cc=function(){return Bn.O.uj(Bn.O.uj())},d}(),Bn.h=H3,function(d){var L=function(){function S(h){this.Fy=this.Mt=0,this.OX=h}return S.prototype.reset=function(){this.Fy=this.Mt=0},S.prototype.add=function(h){h-=this.Fy;var l=this.Mt+h;this.Fy=l-this.Mt-h,this.Mt=l},S.prototype.sub=function(h){this.add(-h)},S.prototype.rm=function(){return this.OX+this.Mt},S}();d.Fx=L,d.lc=function(){function S(){}return S.Cn=function(h,l){return 0<=l?Math.abs(h):-Math.abs(h)},S.sign=function(h){return 0>h?-1:0<h?1:0},S.RK=function(h){return h-360*Math.floor(h/360)},S.round=function(h){return Math.floor(h+.5)},S.ox=function(h){return h*h},S.hq=function(h,l,s){return .5>=s?h+(l-h)*s:l-(l-h)*(1-s)},S.OG=function(h,l,s,a){.5>=s?(a.x=h.x+(l.x-h.x)*s,a.y=h.y+(l.y-h.y)*s):(a.x=l.x-(l.x-h.x)*(1-s),a.y=l.y-(l.y-h.y)*(1-s))},S.lT=function(h,l,s,a,u,p){.5>=u?(p.x=h+(s-h)*u,p.y=l+(a-l)*u):(p.x=s-(s-h)*(1-u),p.y=a-(a-l)*(1-u))},S}()}(Y||(Y={})),function(d){var L=function(S){function h(){var l=S.call(this)||this;return l.sa=0,l.na=0,l.pa=0,l.la=0,l.ka=null,l}return Bt(h,S),h.prototype.ac=function(){return d.h.construct(this.sa,this.na)},h.prototype.Yp=function(l){l.x=this.sa,l.y=this.na},h.prototype.Dc=function(l){this.em(0,l)},h.prototype.ZB=function(l,s){this.em(0,d.h.construct(l,s))},h.prototype.To=function(l){this.hD(0,l)},h.prototype.setStart=function(l){this.uD(0,l)},h.prototype.wv=function(l,s){return this.Od(0,l,s)},h.prototype.YB=function(l,s,a){this.tn(0,l,s,a)},h.prototype.wc=function(){return d.h.construct(this.pa,this.la)},h.prototype.Tr=function(l){l.x=this.pa,l.y=this.la},h.prototype.Qc=function(l){this.em(1,l)},h.prototype.Ql=function(l,s){this.em(1,d.h.construct(l,s))},h.prototype.Po=function(l){this.hD(1,l)},h.prototype.setEnd=function(l){this.uD(1,l)},h.prototype.gv=function(l,s){return this.Od(1,l,s)},h.prototype.OB=function(l,s,a){this.tn(1,l,s,a)},h.prototype.Db=function(){return 1},h.prototype.B=function(){return this.Ac()},h.prototype.Oa=function(){},h.prototype.Ke=function(){return 0},h.prototype.Ea=function(l,s,a,u,p){return this.KM(l,s,a,u,p)},h.prototype.isIntersecting=function(l,s){return this.zr(l,s,!1)!=0},h.prototype.qs=function(l,s){return this.ru(l,s,!1)},h.prototype.ru=function(){return null},h.prototype.Ac=function(){return!1},h.prototype.ay=function(l){if(this.vc(),this.ka==null&&0<l)this.ka=d.O.lg(2*l);else if(this.ka!=null&&this.ka.length<2*l){for(var s=this.ka.slice(0),a=this.ka.length;a<2*l;a++)s[a]=0;this.ka=s}},h.gM=function(l,s,a){if(0<a)var u=0;for(var p=0;p<a;p++)s[0+u]=l[0],u++},h.prototype.em=function(l,s){l!=0?(this.pa=s.x,this.la=s.y):(this.sa=s.x,this.na=s.y)},h.prototype.sn=function(l){if(this.ka!=null){for(var s=d.ee.Iw(l,this.description),a=[],u=h.Gg(this.description,0),p=h.Gg(this.description,1),f=h.Gg(l,0),g=h.Gg(l,1),b=0,x=1,T=l.Aa;x<T;x++){var M=l.kd(x),C=d.ra.Va(M);if(s[x]==-1){var O=d.ra.se(M);for(M=0;M<C;M++)a[f+b]=O,a[g+b]=O,b++}else for(O=this.description.$j(s[x])-2,M=0;M<C;M++)a[f+b]=this.ka[u+O],a[g+b]=this.ka[p+O],b++,O++}this.ka=a}this.description=l},h.prototype.hD=function(l,s){if(this.Ac())throw d.i.fa("empty geometry");s.Nf(this.description),s.Ac()&&s.un();for(var a=0;a<this.description.Aa;a++)for(var u=this.description.Ed(a),p=0,f=d.ra.Va(u);p<f;p++){var g=this.Od(l,u,p);s.setAttribute(u,p,g)}},h.prototype.uD=function(l,s){if(this.vc(),s.Ac())throw d.i.fa("empty geometry");for(var a=s.description,u=0,p=a.Aa;u<p;u++)for(var f=a.Ed(u),g=d.ra.Va(f),b=0;b<g;b++){var x=s.Uc(f,b);this.tn(l,f,b,x)}},h.prototype.Od=function(l,s,a){if(this.Ac())throw d.i.fa("This operation was performed on an Empty Geometry.");if(s==0)return l!=0?a!=0?this.la:this.pa:a!=0?this.na:this.sa;if(a>=d.ra.Va(s))throw d.i.ce();var u=this.description.Pf(s);return 0<=u?(this.ka!=null&&this.ay(this.description.Ae.length-2),this.ka[h.Gg(this.description,l)+this.description.$j(u)-2+a]):d.ra.se(s)},h.prototype.tn=function(l,s,a,u){if(this.vc(),a>=d.ra.Va(s))throw d.i.ce();var p=this.description.Pf(s);0>p&&(this.re(s),p=this.description.Pf(s)),s==0?l!=0?a!=0?this.la=u:this.pa=u:a!=0?this.na=u:this.sa=u:(this.ka==null&&this.ay(this.description.Ae.length-2),this.ka[h.Gg(this.description,l)+this.description.$j(p)-2+a]=u)},h.prototype.copyTo=function(l){if(l.getType()!=this.getType())throw d.i.N();l.description=this.description,l.ay(this.description.Ae.length-2),h.gM(this.ka,l.ka,2*(this.description.Ae.length-2)),l.sa=this.sa,l.na=this.na,l.pa=this.pa,l.la=this.la,l.vc(),this.op(l)},h.prototype.Tg=function(l,s){var a=new d.Nc;return this.Ac()?(a.Oa(),a):(a.oa=this.Od(0,l,s),a.va=a.oa,a.Lk(this.Od(1,l,s)),a)},h.prototype.ZI=function(l){this.Ac()?l.Oa():(l.oa=this.Od(0,0,0),l.va=l.oa,l.Lk(this.Od(1,0,0)))},h.prototype.Tw=function(l,s){s.Nf(this.description),s.Cb(this.hc(l));for(var a=1,u=this.description.Aa;a<u;a++)for(var p=this.description.Ed(a),f=d.ra.Va(p),g=0;g<f;g++){var b=this.Uc(l,p,g);s.setAttribute(p,g,b)}},h.prototype.FM=function(l){if(this.description!=l.description||this.sa!=l.sa||this.pa!=l.pa||this.na!=l.na||this.la!=l.la)return!1;for(var s=0;s<2*(this.description.Ae.length-2);s++)if(this.ka[s]!=l.ka[s])return!1;return!0},h.prototype.BG=function(){return this.sa==this.pa&&this.na==this.la},h.prototype.reverse=function(){var l=this.sa;this.sa=this.pa,this.pa=l,l=this.na,this.na=this.la,this.la=l,l=1;for(var s=this.description.Aa;l<s;l++)for(var a=this.description.kd(l),u=0,p=d.ra.Va(a);u<p;u++){var f=this.Od(0,a,u),g=this.Od(1,a,u);this.tn(0,a,u,g),this.tn(1,a,u,f)}},h.prototype.zr=function(l,s,a){var u=this.getType(),p=l.getType();if(u===322){if(p==322)return d.yb.OM(this,l,s,a);throw d.i.Qa()}throw d.i.Qa()},h.prototype.KM=function(l,s,a,u,p){var f=this.getType(),g=l.getType();if(f===322){if(g==322)return d.yb.Zx(this,l,s,a,u,p);throw d.i.Qa()}throw d.i.Qa()},h.prototype.Tx=function(){return null},h.Gg=function(l,s){return s*(l.Ae.length-2)},h.prototype.hc=function(l,s){if(s===void 0)return s=new d.h,this.hc(l,s),s;d.lc.lT(this.sa,this.na,this.pa,this.la,l,s)},h.prototype.fe=function(){return null},h.prototype.eG=function(){return null},h.prototype.cq=function(){return null},h.prototype.Bi=function(){return null},h.prototype.Pn=function(){return null},h.prototype.kg=function(){return null},h.prototype.Ux=function(l,s){return s!==void 0?this.vx(s)-this.vx(l):this.vx(l)},h.prototype.op=function(){},h.prototype.dl=function(){return null},h.prototype.ah=function(){},h.prototype.Uc=function(){return null},h.prototype.Pe=function(){return null},h.prototype.vx=function(){return null},h.prototype.NG=function(){return null},h.prototype.tb=function(l,s){if(!s&&this.zr(l,0,!1)!=0)return 0;s=17976931348623157e292;var a=this.ac(),u=l.fe(a,!1);return a.sub(l.hc(u)),(a=a.length())<s&&(s=a),a=this.wc(),u=l.fe(a,!1),a.sub(l.hc(u)),(a=a.length())<s&&(s=a),a=l.ac(),u=this.fe(a,!1),a.sub(this.hc(u)),(a=a.length())<s&&(s=a),a=l.wc(),u=this.fe(a,!1),a.sub(this.hc(u)),(a=a.length())<s&&(s=a),s},h.prototype.mg=function(){return d.pi.gm(this,null)},h}(d.aa);d.SC=L}(Y||(Y={})),new Y.h,function(d){var L;(L=d.$K||(d.$K={}))[L.Unknown=-1]="Unknown",L[L.Not=0]="Not",L[L.Weak=1]="Weak",L[L.Strong=2]="Strong",function(h){h[h.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",h[h.IsWeakSimple=2]="IsWeakSimple",h[h.IsStrongSimple=4]="IsStrongSimple",h[h.DirtyOGCFlags=8]="DirtyOGCFlags",h[h.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",h[h.DirtyExactIntervals=64]="DirtyExactIntervals",h[h.DirtyLooseIntervals=128]="DirtyLooseIntervals",h[h.DirtyIntervals=192]="DirtyIntervals",h[h.DirtyIsEnvelope=256]="DirtyIsEnvelope",h[h.DirtyLength2D=512]="DirtyLength2D",h[h.DirtyRingAreas2D=1024]="DirtyRingAreas2D",h[h.DirtyCoordinates=1993]="DirtyCoordinates",h[h.DirtyAllInternal=65535]="DirtyAllInternal",h[h.DirtyAll=16777215]="DirtyAll"}(d.MK||(d.MK={}));var S=function(h){function l(){var s=h.call(this)||this;return s.Hm=65535,s.wa=0,s.Pg=-1,s.Bb=null,s}return Bt(l,h),l.prototype.op=function(){},l.prototype.$x=function(){},l.prototype.iy=function(){},l.prototype.I=function(){return this.wa},l.prototype.B=function(){return this.Ac()},l.prototype.Ac=function(){return this.wa==0},l.prototype.ak=function(s){return!!(this.Hm&s)},l.prototype.Lf=function(s,a){this.Hm=a?this.Hm|s:this.Hm&~s},l.prototype.mc=function(){this.ak(32)&&this.bN()},l.prototype.wx=function(){if(this.Ac())throw d.i.fa("This operation was performed on an Empty Geometry.")},l.prototype.ve=function(s,a){if(0>s||s>=this.wa)throw d.i.fa("index out of bounds");this.mc(),a.Nf(this.description),a.B()&&a.un();for(var u=0;u<this.description.Aa;u++)for(var p=this.description.Ed(u),f=0,g=d.ra.Va(p);f<g;f++){var b=this.za[u].eg(g*s+f);a.setAttribute(p,f,b)}},l.prototype.Ht=function(s,a){this.mc();for(var u=a.description,p=0;p<u.Aa;p++)for(var f=u.Ed(p),g=d.ra.Va(f),b=0;b<g;b++){var x=a.Uc(f,b);this.setAttribute(f,s,b,x)}},l.prototype.D=function(s,a){if(0>s||s>=this.I())throw d.i.ce();this.mc(),this.za[0].tc(2*s,a)},l.prototype.Na=function(s){var a=new d.h;return this.D(s,a),a},l.prototype.Gc=function(s,a){this.za[0].tc(2*s,a)},l.prototype.Cb=function(s,a,u){if(0>s||s>=this.wa)throw d.i.ce();this.mc();var p=this.za[0];u!==void 0?(p.write(2*s,a),p.write(2*s+1,u)):p.Tt(2*s,a),this.Pc(1993)},l.prototype.Cz=function(){if(void 0>=this.I())throw d.i.ce();this.mc();var s=this.za[0],a=new d.Nd;return a.x=s.read(NaN),a.y=s.read(NaN),a.z=this.hasAttribute(1)?this.za[1].eg():d.ra.se(1),a},l.prototype.dC=function(s){if(0>s||s>=this.I())throw d.i.ce();this.re(1),this.mc(),this.Pc(1993);var a=this.za[0];a.write(2*s,(void 0).x),a.write(2*s+1,(void 0).y),this.za[1].pr(s,(void 0).z)},l.prototype.Uc=function(s,a,u){if(0>a||a>=this.wa)throw d.i.ce();var p=d.ra.Va(s);if(u>=p)throw d.i.ce();this.mc();var f=this.description.Pf(s);return 0<=f?this.za[f].eg(a*p+u):d.ra.se(s)},l.prototype.yF=function(s,a){return this.Uc(s,a)},l.prototype.setAttribute=function(s,a,u,p){if(0>a||a>=this.wa)throw d.i.ce();var f=d.ra.Va(s);if(u>=f)throw d.i.ce();this.re(s),this.mc(),s=this.description.Pf(s),this.Pc(1993),this.za[s].pr(a*f+u,p)},l.prototype.ub=function(s){return this.wx(),this.re(s),this.mc(),this.za[this.description.Pf(s)]},l.prototype.hn=function(s,a){if(a!=null&&d.ra.Tp(s)!=a.Tp())throw d.i.N();this.re(s),s=this.description.Pf(s),this.za==null&&(this.za=d.Yc.qI(this.description.Aa)),this.za[s]=a,this.Pc(16777215)},l.prototype.sn=function(s){var a=null;if(this.za!=null){var u=d.ee.Iw(s,this.description);a=[];for(var p=0,f=s.Aa;p<f;p++)u[p]!=-1&&(a[p]=this.za[u[p]])}this.description=s,this.za=a,this.Pg=-1,this.Pc(16777215)},l.prototype.AD=function(s){this.wu(!0),s instanceof d.l?this.$.A(s):this.$.Qo(s)},l.prototype.aN=function(s){this.wu(!1),s instanceof d.l?this.$.A(s):this.$.Qo(s)},l.prototype.bn=function(s){this.wu(!0),this.$.copyTo(s)},l.prototype.A=function(s){this.AD(s)},l.prototype.Qo=function(s){this.AD(s)},l.prototype.xc=function(s){this.aN(s)},l.prototype.Tg=function(s,a){var u=new d.Nc;return this.Ac()?(u.Oa(),u):(this.wu(!0),this.$.Tg(s,a))},l.prototype.cc=function(){var s=this.description.cc();if(!this.Ac())for(var a=this.I(),u=0,p=this.description.Aa;u<p;u++)s=this.za[u].An(s,0,a*d.ra.Va(this.description.Ed(u)));return s},l.prototype.Nb=function(s){if(s==this)return!0;if(!(s instanceof l&&this.description.Nb(s.description))||this.Ac()!=s.Ac())return!1;if(this.Ac())return!0;var a=this.I();if(a!=s.I())return!1;for(var u=0;u<this.description.Aa;u++){var p=this.description.kd(u),f=this.ub(p),g=s.ub(p);if(!f.Nb(g,0,a*d.ra.Va(p)))return!1}return!0},l.prototype.copyTo=function(s){if(s.getType()!=this.getType())throw d.i.N();this.dD(s)},l.prototype.dD=function(s){this.mc(),s.description=this.description,s.za=null;var a=this.description.Aa,u=null;if(this.za!=null){u=[];for(var p=0;p<a;p++)this.za[p]!=null&&(u[p]=this.za[p].GB(this.I()*d.ra.Va(this.description.Ed(p))))}this.$!=null?(s.$=this.$.Ia(),this.$.copyTo(s.$)):s.$=null,s.wa=this.wa,s.Hm=this.Hm,s.za=u;try{this.op(s)}catch{throw s.Oa(),d.i.fu()}},l.prototype.wD=function(){this.wa=0,this.Pg=-1,this.za=null,this.Pc(16777215)},l.prototype.Pc=function(s){s==16777215&&(this.Pg=-1,this.$x()),this.Hm|=s,this.lM(),this.vc()},l.prototype.wu=function(s){if(this.mc(),this.ak(192))if(this.$==null?this.$=new d.Fh(this.description):this.$.Nf(this.description),this.B())this.$.Oa();else{this.hy(s);for(var a=1;a<this.description.Aa;a++)for(var u=this.description.Ed(a),p=d.ra.Va(u),f=this.za[a],g=0;g<p;g++){var b=new d.Nc;b.Oa();for(var x=0;x<this.wa;x++){var T=f.eg(x*p+g);b.Zb(T)}this.$.setInterval(u,g,b)}s&&this.Lf(192,!1)}},l.prototype.hy=function(){this.$.Oa();for(var s=this.za[0],a=new d.h,u=0;u<this.wa;u++)s.tc(2*u,a),this.$.Zb(a)},l.prototype.yp=function(s){s.Oa();for(var a=this.za[0],u=new d.h,p=0;p<this.wa;p++)a.tc(2*p,u),s.Zb(u)},l.prototype.bN=function(){if(this.Pg<this.wa){this.za==null&&(this.za=d.Yc.qI(this.description.Aa)),this.Pg=2147483647;for(var s=0;s<this.description.Aa;s++){var a=this.description.Ed(s);if(this.za[s]!=null){var u=d.ra.Va(a),p=d.O.truncate(this.za[s].size/u);p<this.wa&&(p=d.O.truncate(this.Pg>this.wa+5?(5*this.wa+3)/4:this.wa),this.za[s].resize(p*u,d.ra.se(a))),p<this.Pg&&(this.Pg=p)}else this.za[s]=d.Yc.YE(a,this.wa),this.Pg=this.wa}}this.iy(),this.Lf(32,!1)},l.prototype.dm=function(s){if(0>s)throw d.i.N();s!=this.wa&&(this.wa=s,this.Pc(65535))},l.prototype.om=function(s){if(!this.ak(1)){if(!this.ak(2))return 0;if(this.QT>=s)return this.ak(8)?1:2}return-1},l.prototype.Ch=function(s,a){if(this.QT=a,s==-1)this.Lf(1,!0),this.Lf(8,!0);else if(this.Lf(1,!1),this.Lf(8,!0),s==0)this.Lf(2,!1),this.Lf(4,!1);else if(s==1)this.Lf(2,!0),this.Lf(4,!1);else{if(s!=2)throw d.i.fa("internal error.");this.Lf(2,!0),this.Lf(4,!0)}},l.prototype.lM=function(){this.Bb!=null&&(this.Bb=null)},l.prototype.kD=function(s,a,u,p){if(0>s||s>=this.wa||0>a||a>=this.wa)throw d.i.fa("index out of bounds");this.mc(),p.Nf(this.description),p.B()&&p.un();for(var f=0;f<this.description.Aa;f++)for(var g=this.description.Ed(f),b=0,x=d.ra.Va(g);b<x;b++){var T=this.za[f].eg(x*s+b),M=this.za[f].eg(x*a+b);p.setAttribute(g,b,d.lc.hq(T,M,u))}},l.prototype.yr=function(s,a){var u=this.za[0].o,p=u[2*s]-u[2*a];return s=u[2*s+1]-u[2*a+1],Math.sqrt(p*p+s*s)},l.prototype.KR=function(s){if(0>s||s>=this.wa)throw d.i.ce();this.mc();var a=new d.Sa;a.Nf(this.description),a.B()&&a.un();for(var u=0;u<this.description.Aa;u++)for(var p=this.description.kd(u),f=0,g=d.ra.Va(p);f<g;f++){var b=this.za[u].eg(g*s+f);a.setAttribute(p,f,b)}return a},l.prototype.Dh=function(s,a){if(0>s||s>=this.wa)throw d.i.ce();if(a.B())throw d.i.N();this.mc();for(var u=a.description,p=0;p<u.Aa;p++)for(var f=u.kd(p),g=d.ra.Va(f),b=0;b<g;b++){var x=a.Uc(f,b);this.setAttribute(f,s,b,x)}},l.prototype.lu=function(){return null},l.prototype.fj=function(){return null},l}(d.aa);d.Gx=S}(Y||(Y={})),function(d){var L=function(){function S(){this.ob=this.Zn=null,this.Tm=124234251,this.Rv=!0,this.Qe=-1,this.ob=new d.$c(7),this.Zn=null}return S.prototype.Vo=function(h){this.Zn=h},S.prototype.RP=function(){this.Rv=!1},S.prototype.De=function(h){this.ob.De(h)},S.prototype.Pr=function(h){var l=this.ob.Ce();return this.rX(l),this.uX(h,l),l},S.prototype.MP=function(h){this.ob.jd(h)},S.prototype.addElement=function(h,l){return l==-1&&(this.Qe==-1&&(this.Qe=this.Pr(-1)),l=this.Qe),this.FD(h,0,l)},S.prototype.KD=function(h){return this.Qe==-1&&(this.Qe=this.Pr(-1)),this.FD(h,1,this.Qe)},S.prototype.xn=function(h){this.Qe==-1&&(this.Qe=this.Pr(-1));var l=this.Qe,s=this.ob.o;if(l==-1||s[7*l]==-1)return h=this.ob.Ll([-1,-1,-1,h,this.gl(),-1,-1]),(s=this.ob.o)[7*l]=h,this.vp(-1,h,l,s),h;var a=l==-1?-1:s[7*l+2];return h=this.ob.Ll([-1,-1,a,h,this.gl(),-1,-1]),(s=this.ob.o)[7*a+1]=h,this.oy(h,s),s[7*h+2]===-1&&(s[7*l]=h),this.vp(-1,h,l,s),h},S.prototype.zu=function(h,l,s,a){var u=-1;u==-1&&(this.Qe==-1&&(this.Qe=this.Pr(-1)),u=this.Qe);var p=this.ob.o;if(u==-1||p[7*u]==-1)return s=this.ob.Ll([-1,-1,-1,s,this.gl(),-1,-1]),(p=this.ob.o)[7*u]=s,this.vp(-1,s,u,p),s;if(a){a=l!=-1?this.Zn.compare(this,s,l):-1;var f=h!=-1?this.Zn.compare(this,s,h):1}else a=-1,f=1;if(a==0||f==0)return p[7*u+3]=a==0?l:h,-1;for((l!=-1&&h!=-1?this.Tm>d.O.bB(this.Tm)>>1:l!=-1)?h=l:a=f,l=!0;;){if(0>a){if((f=p[7*h])==-1){a=h,s=this.ob.Ll([-1,-1,h,s,this.gl(),-1,-1]),(p=this.ob.o)[7*h]=s;break}h=f}else{if((f=p[7*h+1])==-1){a=p[7*h+6],s=this.ob.Ll([-1,-1,h,s,this.gl(),-1,-1]),(p=this.ob.o)[7*h+1]=s;break}h=f}l&&(a*=-1,l=!1)}return this.oy(s,p),p[7*s+2]===-1&&(p[7*u]=s),this.vp(a,s,u,p),s},S.prototype.FF=function(){return this.iR(this.Qe)},S.prototype.vd=function(h,l){l=l==-1?this.Qe:l,this.Rv?this.LP(h,l):this.iY(h,l)},S.prototype.search=function(h,l){for(l=this.sv(l);l!=-1;){var s=this.Zn.compare(this,h,l);if(s==0)return l;l=0>s?this.ll(l):this.Xp(l)}return-1},S.prototype.IW=function(h){for(var l=this.sv(-1),s=-1;l!=-1;){var a=h.compare(this,l);if(a==0)return l;0>a?l=this.ll(l):(s=l,l=this.Xp(l))}return s},S.prototype.uJ=function(h){for(var l=this.sv(-1),s=-1;l!=-1;){var a=h.compare(this,l);if(a==0)return l;0>a?(s=l,l=this.ll(l)):l=this.Xp(l)}return s},S.prototype.ja=function(h){return this.ob.T(h,3)},S.prototype.ll=function(h){return this.ob.T(h,0)},S.prototype.Xp=function(h){return this.ob.T(h,1)},S.prototype.getParent=function(h){return this.ob.T(h,2)},S.prototype.lb=function(h){return this.ob.T(h,6)},S.prototype.we=function(h){return this.ob.T(h,5)},S.prototype.rc=function(h){return h==-1?this.kl(this.Qe):this.kl(h)},S.prototype.Fc=function(h){return h==-1?this.Zr(this.Qe):this.Zr(h)},S.prototype.ZR=function(h){return h==-1?this.bG(this.Qe):this.bG(h)},S.prototype.Sj=function(h,l){this.NB(h,l)},S.prototype.sv=function(h){return h==-1?this.YF(this.Qe):this.YF(h)},S.prototype.clear=function(){this.ob.mj(!1),this.Qe=-1},S.prototype.size=function(h){return h==-1?this.$F(this.Qe):this.$F(h)},S.prototype.KN=function(h,l){for(var s=l[7*h],a=l[7*h+1],u=l[7*h+4];s!=-1||a!=-1;){var p=s!=-1?l[7*s+4]:2147483647;if(a=a!=-1?l[7*a+4]:2147483647,u<=Math.min(p,a))break;p<=a?this.sJ(s,l):this.rJ(h,l),s=l[7*h],a=l[7*h+1]}},S.prototype.oy=function(h,l){if(this.Rv)for(var s=l[7*h+4],a=l[7*h+2];a!=-1&&l[7*a+4]>s;)l[7*a]==h?this.sJ(h,l):this.rJ(a,l),a=l[7*h+2]},S.prototype.rJ=function(h,l){var s=l[7*h+1];l[7*s+2]=l[7*h+2],l[7*h+2]=s;var a=l[7*s];l[7*h+1]=a,a!=-1&&(l[7*a+2]=h),l[7*s]=h,(a=l[7*s+2])!=-1&&(l[7*a]==h?l[7*a]=s:l[7*a+1]=s)},S.prototype.sJ=function(h,l){var s=l[7*h+2];l[7*h+2]=l[7*s+2],l[7*s+2]=h;var a=l[7*h+1];l[7*s]=a,a!=-1&&(l[7*a+2]=s),l[7*h+1]=s,(a=l[7*h+2])!=-1&&(l[7*a]===s?l[7*a]=h:l[7*a+1]=h)},S.prototype.Pk=function(h,l){this.ob.S(h,2,l)},S.prototype.TB=function(h,l){this.ob.S(h,0,l)},S.prototype.XB=function(h,l){this.ob.S(h,1,l)},S.prototype.WB=function(h,l){this.ob.S(h,5,l)},S.prototype.ex=function(h,l){this.ob.S(h,6,l)},S.prototype.XJ=function(h,l){this.ob.S(l,0,h)},S.prototype.rX=function(h){this.ob.S(h,4,0)},S.prototype.uX=function(h,l){this.ob.S(l,5,h)},S.prototype.YF=function(h){return h==-1?-1:this.ob.T(h,0)},S.prototype.kl=function(h){return h==-1?-1:this.ob.T(h,1)},S.prototype.Zr=function(h){return h==-1?-1:this.ob.T(h,2)},S.prototype.iR=function(h){return h==-1?-1:this.ob.T(h,3)},S.prototype.$F=function(h){return h==-1?0:this.ob.T(h,4)},S.prototype.bG=function(h){return this.ob.T(h,5)},S.prototype.Pw=function(){return this.ob.Ll([-1,-1,-1,void 0,this.gl(),-1,-1])},S.prototype.fl=function(h){h!=-1&&this.ob.jd(h)},S.prototype.gl=function(){return this.Tm=d.O.bB(this.Tm),1073741823&this.Tm},S.prototype.FD=function(h,l,s){var a=this.ob.o;if(s==-1||a[7*s]==-1)return h=this.ob.Ll([-1,-1,-1,h,this.gl(),-1,-1]),(a=this.ob.o)[7*s]=h,this.vp(-1,h,s,a),h;for(var u=s==-1?-1:a[7*s];;){var p=l==-1?1:this.Zn.compare(this,h,u);if(0>p){if((p=this.ll(u))==-1){l=u,h=this.ob.Ll([-1,-1,u,h,this.gl(),-1,-1]),(a=this.ob.o)[7*u]=h;break}u=p}else{if(l==1&&p==0)return a[7*s+3]=u,-1;if((p=a[7*u+1])==-1){l=a[7*u+6],h=this.ob.Ll([-1,-1,u,h,this.gl(),-1,-1]),(a=this.ob.o)[7*u+1]=h;break}u=p}}return this.oy(h,a),a[7*h+2]===-1&&(a[7*s]=h),this.vp(l,h,s,a),h},S.prototype.vp=function(h,l,s,a){if(h!=-1){var u=a[7*h+5];a[7*h+5]=l}else u=s==-1?-1:a[7*s+2];a[7*l+5]=u,u!=-1&&(a[7*u+6]=l),a[7*l+6]=h,h==(s==-1?-1:a[7*s+1])&&(a[7*s+1]=l),h==-1&&(a[7*s+2]=l),a[7*s+4]=(s==-1?0:a[7*s+4])+1},S.prototype.AB=function(h,l){var s=this.ob.o,a=s[7*h+5];h=s[7*h+6],a!=-1?s[7*a+6]=h:s[7*l+1]=h,h!=-1?s[7*h+5]=a:s[7*l+2]=a,s[7*l+4]=l===-1?-1:s[7*l+4]-1},S.prototype.iY=function(h,l){this.AB(h,l);var s=this.ll(h),a=this.Xp(h),u=this.getParent(h),p=h;if(s!=-1&&a!=-1){this.Tm=d.O.bB(this.Tm);var f=1073741823<this.Tm?this.lb(h):this.we(h),g=this.getParent(f)==h;this.ob.gC(h,f,0),this.ob.gC(h,f,1),this.ob.gC(h,f,2),u!=-1?this.ll(u)==h?this.TB(u,f):this.XB(u,f):this.XJ(f,l),g?(s==f?(this.TB(f,h),this.Pk(a,f)):a==f&&(this.XB(f,h),this.Pk(s,f)),this.Pk(h,f),u=f):(this.Pk(s,f),this.Pk(a,f),u=this.getParent(h),p=f),s=this.ll(h),a=this.Xp(h),s!=-1&&this.Pk(s,h),a!=-1&&this.Pk(a,h)}s=s!=-1?s:a,u==-1?this.XJ(s,l):this.ll(u)==p?this.TB(u,s):this.XB(u,s),s!=-1&&this.Pk(s,u),this.fl(h)},S.prototype.LP=function(h,l){var s=this.ob.o;s[7*h+4]=2147483647;var a=-1,u=-1,p=l===-1?-1:s[7*l],f=p==h;if(f&&(a=s[7*p],u=s[7*p+1],a==-1&&u==-1))return this.AB(p,l),this.fl(p),void(s[7*l]=-1);this.KN(h,s),(p=s[7*h+2])!=-1&&(s[7*p]==h?s[7*p]=-1:s[7*p+1]=-1),this.AB(h,l),this.fl(h),f&&(s[7*l]=a==-1||s[7*a+2]!=-1?u:a)},S.prototype.NB=function(h,l){this.ob.S(h,3,l)},S}();d.Yj=L}(Y||(Y={})),function(d){var L=function(){function S(h,l){h!==void 0&&this.K(h,l)}return S.prototype.K=function(h,l){this.oa=h,this.va=l,this.normalize()},S.prototype.isIntersecting=function(h){return this.oa<=h.oa?this.va>=h.oa:h.va>=this.oa},S.prototype.move=function(h){this.B()||(this.oa+=h,this.va+=h)},S.prototype.normalize=function(){if(!isNaN(this.oa)){if(this.oa>this.va){var h=this.oa;this.oa=this.va,this.va=h}isNaN(this.va)&&this.Oa()}},S.prototype.Oa=function(){this.va=this.oa=NaN},S.prototype.B=function(){return isNaN(this.oa)},S.prototype.Zb=function(h){typeof h=="number"?this.B()?this.va=this.oa=h:this.Lk(h):h.B()||(this.B()?(this.oa=h.oa,this.va=h.va):(this.oa>h.oa&&(this.oa=h.oa),this.va<h.va&&(this.va=h.va),this.oa>this.va&&this.Oa()))},S.prototype.Lk=function(h){h<this.oa?this.oa=h:h>this.va&&(this.va=h)},S.prototype.contains=function(h){return typeof h=="number"?h>=this.oa&&h<=this.va:h.oa>=this.oa&&h.va<=this.va},S.prototype.Ea=function(h){this.B()||h.B()?this.Oa():(this.oa<h.oa&&(this.oa=h.oa),this.va>h.va&&(this.va=h.va),this.oa>this.va&&this.Oa())},S.prototype.W=function(h){this.B()||(this.oa-=h,this.va+=h,this.va<this.oa&&this.Oa())},S.prototype.xr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.oa)+Math.abs(this.va)+1)},S.prototype.KB=function(h,l){h>l?(this.oa=l,this.va=h):(this.oa=h,this.va=l)},S.prototype.It=function(h){return d.O.Rk(h,this.oa,this.va)},S.prototype.R=function(){return this.va-this.oa},S.prototype.sf=function(){return .5*(this.oa+this.va)},S.prototype.Nb=function(h){return h==this||h instanceof S&&(!(!this.B()||!h.B())||this.oa==h.oa&&this.va==h.va)},S.prototype.cc=function(){return d.O.uj(d.O.uj())},S}();d.Nc=L}(Y||(Y={})),function(d){var L=new d.Nc,S=new d.Nc,h=function(){this.ne=null,this.pb=-1,this.sb=new d.yb,this.qA=55555555,this.Tv=this.Vv=!1,this.Uf=new d.Nc,this.Uf.KB(0,0)};d.IY=h;var l=function(){function s(a,u,p){this.g=a,this.Hk=NaN,this.NH=this.Kq=0,this.OH=NaN,this.qa=u,this.Nq=10*u,this.PH=this.QH=NaN,this.rg=!1,this.Dm=this.gt=this.Lo=this.Xs=this.Ws=-1,this.gA=p,this.TA=new h,this.YH=new h,d.O.truncate(3*a.fd/2)}return s.prototype.mG=function(a,u,p,f){a.ne=f===null?null:f[p[5*u]],a.Tv=a.ne!=null,a.Tv||((f=p[5*u+2])!==-1&&this.g.mW(p[5*u],p[5*f],a.sb),a.ne=a.sb,a.Uf.KB(a.sb.sa,a.sb.pa),a.Uf.va+=this.qa,a.sb.rI(),a.Vv=a.sb.la==a.sb.na,a.Vv||(a.qA=(a.sb.pa-a.sb.sa)/(a.sb.la-a.sb.na)))},s.prototype.OO=function(a,u){var p=a.zr(u,this.qa,!0);return p!=0?p==2?this.Qy():this.xi():(a.Yp(Ho),a.Tr(Sn),u.Yp(Ll),u.Tr(Vu),Hi.ma(this.Kq,this.Hk),Ho.qb(Ll)&&this.Hk==Ho.y?0>Sn.compare(Vu)?Hi.L(Sn):Hi.L(Vu):Ho.qb(Vu)&&this.Hk==Ho.y?0>Sn.compare(Ll)?Hi.L(Sn):Hi.L(Ll):Ll.qb(Sn)&&this.Hk==Ll.y?0>Ho.compare(Vu)?Hi.L(Ho):Hi.L(Vu):Sn.qb(Vu)&&this.Hk==Sn.y&&(0>Ho.compare(Ll)?Hi.L(Ho):Hi.L(Ll)),a.Pe(Hi.y,Hi.x)<u.Pe(Hi.y,Hi.x)?-1:1)},s.prototype.MO=function(a,u){if(a.sb.na==u.sb.na&&a.sb.sa==u.sb.sa)return a.sb.la==u.sb.la&&a.sb.pa==u.sb.pa?this.gA?this.Qy():0:this.PE(a,u);if(a.sb.la==u.sb.la&&a.sb.pa==u.sb.pa)return this.OE(a,u);var p=this.OE(a,u);return a=this.PE(a,u),0>p&&0>a?-1:0<p&&0<a?1:this.xi()},s.prototype.IO=function(a,u){if(a.pa>u.pa){if(u.pa>u.sa&&u.la-u.na<2*this.qa&&a.vi(u.pa,u.la,this.qa))return this.xi()}else if((u.la-u.na)/(u.pa-u.sa)*(a.pa-a.sa)<this.Nq&&u.vi(a.pa,a.la,this.qa))return this.xi();return 1},s.prototype.JO=function(a,u){if(a.sa<u.sa){if(u.pa>u.sa&&u.la-u.na<2*this.qa&&a.vi(u.pa,u.la,this.qa))return this.xi()}else if((u.la-u.na)/(u.pa-u.sa)*(a.sa-a.pa)<this.Nq&&u.vi(a.sa,a.na,this.qa))return this.xi();return-1},s.prototype.KO=function(a,u){var p=new d.h;p.uc(u.wc(),u.ac()),p.ar(),p.normalize();var f=new d.h;f.uc(a.ac(),u.ac());var g=new d.h;g.uc(a.wc(),u.ac()),f=f.Qh(p),p=g.Qh(p),g=Math.abs(f);var b=Math.abs(p);if(g<b){if(g<this.Nq&&u.vi(a.sa,a.na,this.qa))return this.xi()}else if(b<this.Nq&&u.vi(a.pa,a.la,this.qa))return this.xi();return 0>f&&0>p?-1:0<f&&0<p?1:this.xi()},s.prototype.NE=function(a,u){return a.na==u.na&&a.sa==u.sa?this.IO(a,u):a.la==u.la&&a.pa==u.pa?this.JO(a,u):this.KO(a,u)},s.prototype.LO=function(a,u){return a.la==u.la&&a.pa==u.pa&&a.na==u.na&&a.sa==u.sa?this.gA?this.Qy():0:this.xi()},s.prototype.OE=function(a,u){var p=1;if(a.sb.na<u.sb.na){p=-1;var f=a;a=u,u=f}a=a.sb,f=u.sb;var g=a.sa-f.sa;u=u.qA*(a.na-f.na);var b=this.Nq;return g<u-b?-p:g>u+b?p:f.vi(a.sa,a.na,this.qa)?this.xi():g<u?-p:p},s.prototype.PE=function(a,u){var p=1;if(u.sb.la<a.sb.la){p=-1;var f=a;a=u,u=f}a=a.sb,f=u.sb;var g=a.pa-f.sa;u=u.qA*(a.la-f.na);var b=this.Nq;return g<u-b?-p:g>u+b?p:f.vi(a.pa,a.la,this.qa)?this.xi():g<u?-p:p},s.prototype.Qy=function(){return this.rg=!0,this.Ni=new d.Md(5,this.Lo,this.gt),-1},s.prototype.xi=function(){return this.rg=!0,this.gA?this.Ni=new d.Md(4,this.Lo,this.gt):this.gt=this.Lo=this.Xs=this.Ws=-1,-1},s.prototype.NO=function(a,u,p,f){if(this.rg)return-1;var g=this.OH==this.Hk&&this.NH==this.Kq;if(g&&a==this.Ws)var b=this.PH;else b=NaN,this.Ws=-1;return g&&u==this.Xs?g=this.QH:(g=NaN,this.Xs=-1),p.ne.ZI(L),f.ne.ZI(S),L.va<S.oa?-1:S.va<L.oa?1:(this.OH=this.Hk,this.NH=this.Kq,isNaN(b)&&(this.Ws=a,this.PH=b=a=p.ne.Pe(this.Hk,this.Kq)),isNaN(g)&&(this.Xs=u,this.QH=g=a=f.ne.Pe(this.Hk,this.Kq)),Math.abs(b-g)<=this.qa?this.OO(p.ne,f.ne):b<g?-1:b>g?1:0)},s.prototype.Kr=function(){this.rg=!1},s.prototype.rm=function(){return this.Ni},s.prototype.$J=function(a,u){this.Hk=a,this.Kq=u,this.gt=this.Lo=this.Xs=this.Ws=-1},s.prototype.compare=function(a,u,p){return this.rg?-1:(a=a.ja(p),this.Dm=p,this.RE(u,u,a,a))},s.prototype.RE=function(a,u,p,f){if(this.Lo==u)var g=this.TA;else this.Lo=u,g=this.TA,this.TA.pb=a,this.mG(g,u,this.g.td.o,this.g.We);if(b==null){this.gt=f;var b=this.YH;this.YH.pb=p,this.mG(b,f,this.g.td.o,this.g.We)}return g.Tv||b.Tv?this.NO(u,f,g,b):g.Uf.va<b.Uf.oa?-1:b.Uf.va<g.Uf.oa?1:(a=g.Vv?1:0,(a|=b.Vv?2:0)==0?this.MO(g,b):a==1?this.NE(g.sb,b.sb):a==2?-1*this.NE(b.sb,g.sb):this.LO(g.sb,b.sb))},s}();d.UC=l}(Y||(Y={})),function(d){var L=function(){function S(h,l){this.g=h,this.qa=l,this.rg=!1,this.Lo=-1,this.Uf=new d.Nc,this.Gq=new d.h,this.Gq.Rc(),this.ie=new d.yb,this.Dm=-1,this.BA=17976931348623157e292}return S.prototype.Kr=function(){this.rg=!1,this.BA=17976931348623157e292},S.prototype.Dh=function(h){this.Gq.L(h)},S.prototype.compare=function(h,l){return this.SE(l,h.ja(l))},S.prototype.SE=function(h,l){var s=this.g.bc(l)!=null;if(s||(this.g.ed(l,this.ie),this.Uf.KB(this.ie.sa,this.ie.pa)),s)throw d.i.fa("not implemented");if(this.Gq.x+this.qa<this.Uf.oa)return-1;if(this.Gq.x-this.qa>this.Uf.va)return 1;if(this.ie.na==this.ie.la)return this.Dm=h,this.rg=!0,0;this.ie.rI(),s=this.ie.ac(),(l=new d.h).uc(this.ie.wc(),s),l.ar();var a=new d.h;return a.uc(this.Gq,s),s=l.Qh(a),(s/=l.length())<10*-this.qa?-1:s>10*this.qa?1:this.ie.qs(this.Gq,this.qa)&&((l=Math.abs(s))<this.BA&&(this.Dm=h,this.BA=l),this.rg=!0,l<.25*this.qa)?0:0>s?-1:1},S}();d.aM=L}(Y||(Y={})),function(d){function L(h,l,s,a){s=new Float64Array(h.subarray(s,a)),h.set(s,l)}var S=function(){function h(l){this.Pb=this.pk=!1,this.o=null;var s=l;2>s&&(s=2),this.o=new Float64Array(s),this.size=l}return h.prototype.rotate=function(l,s,a){if(this.Pb)throw d.i.fa("invalid_call");if(s<l||s>a||l>a)throw d.i.N();l!=s&&a!=s&&(this.ni(l,s-l,1),this.ni(s,a-s,1),this.ni(l,a-l,1))},h.qf=function(l,s){var a=new h(l),u=a.o;if(2>l&&(l=2),s!==0)for(var p=0;p<l;p++)u[p]=s;return a},h.Bn=function(l){var s=new h(0);return s.o=new Float64Array(l.o),s.size=l.size,s},h.Lr=function(l,s){var a=new h(0);return a.size=l.size,a.size>s&&(a.size=s),2>(s=a.size)&&(s=2),a.o=new Float64Array(s),a.o.set(l.o.length<=s?l.o:l.o.subarray(0,s),0),a},h.prototype.Jb=function(l){0>=l||(this.o==null?this.o=new Float64Array(l):l<=this.o.length||(0<this.o.length?((l=new Float64Array(l)).set(this.o),this.o=l):this.o=new Float64Array(l)))},h.prototype.read=function(l){return this.o[l]},h.prototype.tc=function(l,s){s.x=this.o[l],s.y=this.o[l+1]},h.prototype.get=function(l){return this.o[l]},h.prototype.write=function(l,s){if(this.Pb)throw d.i.Hb();this.o[l]=s},h.prototype.set=function(l,s){if(this.Pb)throw d.i.Hb();this.o[l]=s},h.prototype.Tt=function(l,s){if(this.Pb)throw d.i.Hb();this.o[l]=s.x,this.o[l+1]=s.y},h.prototype.add=function(l){this.resize(this.size+1),this.o[this.size-1]=l},h.prototype.GB=function(l){return h.Lr(this,l)},h.prototype.eg=function(l){return this.read(l)},h.prototype.resize=function(l,s){if(s===void 0&&(s=0),this.pk)throw d.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(l<=this.size){if(30<this.o.length&&5*l/4<this.o.length){var a=new Float64Array(this.o,0,l);this.o=a}}else{l>this.o.length&&(a=d.O.truncate(64>l?Math.max(2*l,4):5*l/4),(a=new Float64Array(a)).set(this.o),this.o=a),a=this.o;for(var u=this.size;u<l;u++)a[u]=s}this.size=l},h.prototype.Bh=function(l){if((this.o==null||l>this.o.length)&&this.resize(l),this.pk)throw d.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=l},h.prototype.pr=function(l,s){this.write(l,s)},h.prototype.An=function(l,s,a){for(var u=this.size;s<u&&s<a;s++)l=d.O.uj(this.read(s));return l},h.prototype.Nb=function(l,s,a){if(l==null||!(l instanceof h))return!1;var u=this.size,p=l.size;if(a>u||a>p&&u!=p)return!1;for(a>u&&(a=u);s<a;s++)if(this.read(s)!=l.read(s))return!1;return!0},h.prototype.addRange=function(l,s,a,u,p){if(this.Pb)throw d.i.Hb();if(!u&&(1>p||a%p!=0))throw d.i.N();var f=this.size;if(this.resize(f+a),u)this.o.set(l.o.subarray(s,s+a),f);else{u=a;for(var g=0;g<a;g+=p){u-=p;for(var b=0;b<p;b++)this.o[f+g+b]=l.o[s+u+b]}}},h.prototype.Mn=function(l,s,a,u,p,f,g){if(this.Pb)throw d.i.Hb();if(!p&&(1>f||u%f!=0))throw d.i.N();var b=this.size-g;if(b<u&&this.resize(this.size+u-b),L(this.o,l+u,l,l+(g-l)),this.o==s.o&&l<a&&(a+=u),p)this.o.set(s.o.subarray(a,a+u),l);else for(p=u,g=0;g<u;g+=f)for(p-=f,b=0;b<f;b++)this.o[l+g+b]=s.o[a+p+b]},h.prototype.Iz=function(l,s,a,u,p,f){if(this.Pb)throw d.i.Hb();if(0>f&&(f=this.size),this.size+2*u>this.o.length?this.resize(this.size+2*u):this.size+=2*u,L(this.o,l+2*u,l,l+(f-l)),p)for(p=0;p<u;p++)f=s[a++],this.o[l++]=f.x,this.o[l++]=f.y;else{p=0;for(var g=u-1;p<u;++p)f=s[a+g],this.o[l++]=f.x,this.o[l++]=f.y,g--}},h.prototype.Ln=function(l,s,a,u){if(this.Pb)throw d.i.Hb();for(u-=l,L(this.o,l+u,l,l+u),u=0;u<a;u++)this.o[l+u]=s},h.prototype.vj=function(l,s,a){if(this.Pb)throw d.i.Hb();L(this.o,l+2,l,l+(a-l)),this.o[l]=s.x,this.o[l+1]=s.y},h.prototype.Ut=function(l,s,a,u,p,f){if(0>l||0>s||0>u||!p&&(0>=f||s%f!=0)||a.size<u+s)throw d.i.N();if(s!=0)if(this.size<s+l&&this.resize(s+l),a==this)this.Ar(l,s,u,p,f);else if(p)for(p=0;p<s;p++)this.o[l]=a.o[u],l++,u++;else if(u=u+s-f,f==1)for(p=0;p<s;p++)this.o[l]=a.o[u],l++,u--;else for(p=0,s=d.O.truncate(s/f);p<s;p++){for(var g=0;g<f;g++)this.o[l+g]=a.o[u+g];l+=f,u-=f}},h.prototype.En=function(l,s,a){if(this.Pb||l+s>this.size)throw d.i.Hb();0<a-(l+s)&&L(this.o,l,l+s,l+(a-(l+s))+s),this.size-=s},h.prototype.ni=function(l,s,a){if(this.Pb||1>a||s%a!=0)throw d.i.Hb();for(var u=s>>1,p=0;p<u;p+=a){s-=a;for(var f=0;f<a;f++){var g=this.o[l+p+f];this.o[l+p+f]=this.o[l+s+f],this.o[l+s+f]=g}}},h.prototype.Wj=function(l,s,a){if(0>s||0>a||0>s||a+s>this.size)throw d.i.N();for(var u=s;u<s+a;u++)this.o[u]=l},h.prototype.Ar=function(l,s,a,u,p){if(!(u&&l==a||(this.o.set(this.o.subarray(a,a+s),l),u)))for(a=l,l=l+s-p,u=0,s=d.O.truncate(s/2);u<s;u++){for(var f=0;f<p;f++){var g=this.o[a+f];this.o[a+f]=this.o[l+f],this.o[l+f]=g}a+=p,l-=p}},h.prototype.vC=function(l,s,a,u,p){if(0>l||0>s||0>u)throw d.i.N();if(s!=0)for(this.size<(s<<1)+l&&this.resize((s<<1)+l),p||(l+=s-1<<1),p=p?2:-2,s+=u;u<s;u++)this.o[l]=a[u].x,this.o[l+1]=a[u].y,l+=p},h.prototype.uC=function(l,s,a){if(0>l||0>s)throw d.i.N();if(s!=0){this.size<(s<<1)+l&&this.resize((s<<1)+l),s+=0;for(var u=0;u<s;u++)this.o[l]=a[u][0],this.o[l+1]=a[u][1],l+=2}},h.prototype.Vw=function(l,s,a,u,p){if(0>l||0>s||0>u||this.size<s+l)throw d.i.N();if(p)for(p=0;p<s;p++)a[u+p]=this.o[l+p];else for(u=u+s-1;l<s;l++)a[u]=this.o[l],u--},h.prototype.uB=function(l,s,a){if(0>l||0>s||this.size<(s>>1)+l)throw d.i.N();if(s!=0){s=0+s;for(var u=0;u<s;u++)a[u][0]=this.o[l],a[u][1]=this.o[l+1],l+=2}},h.prototype.clear=function(l){l?this.resize(0):this.Bh(0)},h.prototype.ix=function(){this.pk=this.Pb=!0},h.prototype.Vd=function(l,s,a){Array.prototype.sort.call(this.o.subarray(l,s),a)},h.prototype.Tp=function(){return 1},h}();d.be=S}(Y||(Y={})),function(d){function L(h,l,s,a){s=new Int32Array(h.subarray(s,a)),h.set(s,l)}d.rY=function(){this.random=1973};var S=function(){function h(l){this.Pb=this.pk=!1,this.o=null;var s=l;2>s&&(s=2),this.o=new Int32Array(s),this.size=l}return h.prototype.rotate=function(l,s,a){if(this.Pb)throw d.i.fa("invalid_call");if(s<l||s>a||l>a)throw d.i.N();l!=s&&a!=s&&(this.ni(l,s-l,1),this.ni(s,a-s,1),this.ni(l,a-l,1))},h.qf=function(l,s){var a=new h(l),u=a.o;if(2>l&&(l=2),s!==0)for(var p=0;p<l;p++)u[p]=s;return a},h.Bn=function(l){var s=new h(0);return s.o=new Int32Array(l.o),s.size=l.size,s},h.Lr=function(l,s){var a=new h(0);return a.size=l.size,a.size>s&&(a.size=s),2>(s=a.size)&&(s=2),a.o=new Int32Array(s),a.o.set(l.o.length<=s?l.o:l.o.subarray(0,s),0),a},h.prototype.Jb=function(l){0>=l||(this.o==null?this.o=new Int32Array(l):l<=this.o.length||(0<this.o.length?((l=new Int32Array(l)).set(this.o),this.o=l):this.o=new Int32Array(l)))},h.prototype.read=function(l){return this.o[l]},h.prototype.tc=function(l,s){s.x=this.o[l],s.y=this.o[l+1]},h.prototype.get=function(l){return this.o[l]},h.prototype.write=function(l,s){if(this.Pb)throw d.i.Hb();this.o[l]=s},h.prototype.set=function(l,s){if(this.Pb)throw d.i.Hb();this.o[l]=s},h.prototype.Tt=function(l,s){if(this.Pb)throw d.i.Hb();this.o[l]=s.x,this.o[l+1]=s.y},h.prototype.add=function(l){this.resize(this.size+1),this.o[this.size-1]=l},h.prototype.GB=function(l){return h.Lr(this,l)},h.prototype.eg=function(l){return this.read(l)},h.prototype.resize=function(l,s){if(s===void 0&&(s=0),this.pk)throw d.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(l<=this.size){if(30<this.o.length&&5*l/4<this.o.length){var a=new Int32Array(this.o,0,l);this.o=a}}else{l>this.o.length&&(a=d.O.truncate(64>l?Math.max(2*l,4):5*l/4),(a=new Int32Array(a)).set(this.o),this.o=a),a=this.o;for(var u=this.size;u<l;u++)a[u]=s}this.size=l},h.prototype.Bh=function(l){if((this.o==null||l>this.o.length)&&this.resize(l),this.pk)throw d.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=l},h.prototype.pr=function(l,s){this.write(l,s)},h.prototype.An=function(l,s,a){for(var u=this.size;s<u&&s<a;s++)l=d.O.Th(this.read(s),l);return l},h.prototype.Nb=function(l,s,a){if(l==null||!(l instanceof h))return!1;var u=this.size,p=l.size;if(a>u||a>p&&u!=p)return!1;for(a>u&&(a=u);s<a;s++)if(this.read(s)!=l.read(s))return!1;return!0},h.prototype.addRange=function(l,s,a,u,p){if(this.Pb)throw d.i.Hb();if(!u&&(1>p||a%p!=0))throw d.i.N();var f=this.size;if(this.resize(f+a),u)this.o.set(l.o.subarray(s,s+a),f);else{u=a;for(var g=0;g<a;g+=p){u-=p;for(var b=0;b<p;b++)this.o[f+g+b]=l.o[s+u+b]}}},h.prototype.Mn=function(l,s,a,u,p,f,g){if(this.Pb)throw d.i.Hb();if(!p&&(1>f||u%f!=0))throw d.i.N();if(L(this.o,l+u,l,l+(g-l)),this.o==s.o&&l<a&&(a+=u),p)this.o.set(s.o.subarray(a,a+u),l);else for(p=u,g=0;g<u;g+=f){p-=f;for(var b=0;b<f;b++)this.o[l+g+b]=s.o[a+p+b]}},h.prototype.Iz=function(l,s,a,u,p,f){if(this.Pb)throw d.i.Hb();if(0>f&&(f=this.size),this.size+2*u>this.o.length?this.resize(this.size+2*u):this.size+=2*u,L(this.o,l+2*u,l,l+(f-l)),p)for(p=0;p<u;p++)f=s[a++],this.o[l++]=f.x,this.o[l++]=f.y;else{p=0;for(var g=u-1;p<u;++p)f=s[a+g],this.o[l++]=f.x,this.o[l++]=f.y,g--}},h.prototype.Ln=function(l,s,a,u){if(this.Pb)throw d.i.Hb();for(u-=l,L(this.o,l+u,l,l+u),u=0;u<a;u++)this.o[l+u]=s},h.prototype.vj=function(l,s,a){if(this.Pb)throw d.i.Hb();L(this.o,l+2,l,l+(a-l)),this.o[l]=s.x,this.o[l+1]=s.y},h.prototype.Ut=function(l,s,a,u,p,f){if(0>l||0>s||0>u||!p&&(0>=f||s%f!=0)||a.size<u+s)throw d.i.N();if(s!=0)if(this.size<s+l&&this.resize(s+l),a==this)this.Ar(l,s,u,p,f);else if(p)for(p=0;p<s;p++)this.o[l]=a.o[u],l++,u++;else if(u=u+s-f,f==1)for(p=0;p<s;p++)this.o[l]=a.o[u],l++,u--;else for(p=0,s=d.O.truncate(s/f);p<s;p++){for(var g=0;g<f;g++)this.o[l+g]=a.o[u+g];l+=f,u-=f}},h.prototype.En=function(l,s,a){if(this.Pb||l+s>this.size)throw d.i.Hb();0<a-(l+s)&&L(this.o,l,l+s,l+(a-(l+s))+s),this.size-=s},h.prototype.ni=function(l,s,a){if(this.Pb||1>a||s%a!=0)throw d.i.Hb();for(var u=s>>1,p=0;p<u;p+=a){s-=a;for(var f=0;f<a;f++){var g=this.o[l+p+f];this.o[l+p+f]=this.o[l+s+f],this.o[l+s+f]=g}}},h.prototype.Wj=function(l,s,a){if(0>s||0>a||0>s||a+s>this.size)throw d.i.N();for(var u=s;u<s+a;u++)this.o[u]=l},h.prototype.Ar=function(l,s,a,u,p){if(!(u&&l==a||(this.o.set(this.o.subarray(a,a+s),l),u)))for(a=l,l=l+s-p,u=0,s=d.O.truncate(s/2);u<s;u++){for(var f=0;f<p;f++){var g=this.o[a+f];this.o[a+f]=this.o[l+f],this.o[l+f]=g}a+=p,l-=p}},h.prototype.vC=function(l,s,a,u,p){if(0>l||0>s||0>u)throw d.i.N();if(s!=0)for(this.size<(s<<1)+l&&this.resize((s<<1)+l),p||(l+=s-1<<1),p=p?2:-2,s+=u;u<s;u++)this.o[l]=a[u].x,this.o[l+1]=a[u].y,l+=p},h.prototype.Vw=function(l,s,a,u,p){if(0>l||0>s||0>u||this.size<s+l)throw d.i.N();if(p)for(p=0;p<s;p++)a[u+p]=this.o[l+p];else for(u=u+s-1;l<s;l++)a[u]=this.o[l],u--},h.prototype.clear=function(l){l?this.resize(0):this.Bh(0)},h.prototype.ix=function(){this.pk=this.Pb=!0},h.prototype.Vd=function(l,s,a){10>s-l?h.rG(this.o,l,s,a):h.qB(this.o,l,s-1,a)},h.prototype.Tp=function(){return 2},h.prototype.Fc=function(){return this.o[this.size-1]},h.prototype.If=function(){this.resize(this.size-1)},h.prototype.bX=function(l){this.o[this.size-1]=l},h.prototype.SV=function(l){l<this.size-1&&(this.o[l]=this.o[this.size-1]),this.resize(this.size-1)},h.prototype.lF=function(l){for(var s=0,a=this.size;s<a;s++)if(this.o[s]==l)return s;return-1},h.prototype.hG=function(l){return 0<=this.lF(l)},h.rG=function(l,s,a,u){for(var p=s;p<a;p++){for(var f=l[p],g=p-1;g>=s&&0<u(l[g],f);)l[g+1]=l[g],g--;l[g+1]=f}},h.tx=function(l,s,a){var u=l[a];l[a]=l[s],l[s]=u},h.qB=function(l,s,a,u){if(!(s>=a))for(;;){if(9>a-s){h.rG(l,s,a+1,u);break}var p=l[s];h.tx(l,s,a);for(var f=s,g=s;g<a;g++)0>=u(l[g],p)&&(h.tx(l,f,g),f+=1);h.tx(l,f,a),f-s<a-f?(h.qB(l,s,f-1,u),s=f+1):(h.qB(l,f+1,a,u),a=f-1)}},h}();d.ia=S}(Y||(Y={})),function(d){function L(h,l,s,a){s=new Int8Array(h.subarray(s,a)),h.set(s,l)}var S=function(){function h(l){this.o=null;var s=l;2>s&&(s=2),this.o=new Int8Array(s),this.size=l}return h.prototype.rotate=function(l,s,a){if(this.Pb)throw d.i.fa("invalid_call");if(s<l||s>a||l>a)throw d.i.N();l!=s&&a!=s&&(this.ni(l,s-l,1),this.ni(s,a-s,1),this.ni(l,a-l,1))},h.qf=function(l,s){var a=new h(l),u=a.o;if(2>l&&(l=2),s!==0)for(var p=0;p<l;p++)u[p]=s;return a},h.Bn=function(l){var s=new h(0);return s.o=new Int8Array(l.o),s.size=l.size,s},h.Lr=function(l,s){var a=new h(0);return a.size=l.size,a.size>s&&(a.size=s),2>(s=a.size)&&(s=2),a.o=new Int8Array(s),a.o.set(l.o.length<=s?l.o:l.o.subarray(0,s),0),a},h.prototype.Jb=function(l){0>=l||(this.o==null?this.o=new Int8Array(l):l<=this.o.length||(0<this.o.length?((l=new Int8Array(l)).set(this.o),this.o=l):this.o=new Int8Array(l)))},h.prototype.read=function(l){return this.o[l]},h.prototype.tc=function(l,s){s.x=this.o[l],s.y=this.o[l+1]},h.prototype.get=function(l){return this.o[l]},h.prototype.write=function(l,s){if(this.Pb)throw d.i.Hb();this.o[l]=s},h.prototype.set=function(l,s){if(this.Pb)throw d.i.Hb();this.o[l]=s},h.prototype.Tt=function(l,s){if(this.Pb)throw d.i.Hb();this.o[l]=s.x,this.o[l+1]=s.y},h.prototype.add=function(l){this.resize(this.size+1),this.o[this.size-1]=l},h.prototype.GB=function(l){return h.Lr(this,l)},h.prototype.eg=function(l){return this.read(l)},h.prototype.resize=function(l,s){if(s===void 0&&(s=0),this.pk)throw d.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(l<=this.size){if(30<this.o.length&&5*l/4<this.o.length){var a=new Int8Array(this.o,0,l);this.o=a}}else{l>this.o.length&&(a=d.O.truncate(64>l?Math.max(2*l,4):5*l/4),(a=new Int8Array(a)).set(this.o),this.o=a),a=this.o;for(var u=this.size;u<l;u++)a[u]=s}this.size=l},h.prototype.Bh=function(l){if((this.o==null||l>this.o.length)&&this.resize(l),this.pk)throw d.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=l},h.prototype.pr=function(l,s){this.write(l,s)},h.prototype.An=function(l,s,a){for(var u=this.size;s<u&&s<a;s++)l=d.O.Th(this.read(s),l);return l},h.prototype.Nb=function(l,s,a){if(l==null||!(l instanceof h))return!1;var u=this.size,p=l.size;if(a>u||a>p&&u!=p)return!1;for(a>u&&(a=u);s<a;s++)if(this.read(s)!=l.read(s))return!1;return!0},h.prototype.addRange=function(l,s,a,u,p){if(this.Pb)throw d.i.Hb();if(!u&&(1>p||a%p!=0))throw d.i.N();var f=this.size;if(this.resize(f+a),u)this.o.set(l.o.subarray(s,s+a),f);else{u=a;for(var g=0;g<a;g+=p){u-=p;for(var b=0;b<p;b++)this.o[f+g+b]=l.o[s+u+b]}}},h.prototype.Mn=function(l,s,a,u,p,f,g){if(this.Pb)throw d.i.Hb();if(!p&&(1>f||u%f!=0))throw d.i.N();if(L(this.o,l+u,l,l+(g-l)),this.o==s.o&&l<a&&(a+=u),p)this.o.set(s.o.subarray(a,a+u),l);else for(p=u,g=0;g<u;g+=f){p-=f;for(var b=0;b<f;b++)this.o[l+g+b]=s.o[a+p+b]}},h.prototype.Ln=function(l,s,a,u){if(this.Pb)throw d.i.Hb();for(u-=l,L(this.o,l+u,l,l+u),u=0;u<a;u++)this.o[l+u]=s},h.prototype.Iz=function(l,s,a,u,p,f){if(this.Pb)throw d.i.Hb();if(0>f&&(f=this.size),this.size+2*u>this.o.length?this.resize(this.size+2*u):this.size+=2*u,L(this.o,l+2*u,l,l+(f-l)),p)for(p=0;p<u;p++)f=s[a++],this.o[l++]=f.x,this.o[l++]=f.y;else{p=0;for(var g=u-1;p<u;++p)f=s[a+g],this.o[l++]=f.x,this.o[l++]=f.y,g--}},h.prototype.vj=function(l,s,a){if(this.Pb)throw d.i.Hb();L(this.o,l+2,l,l+(a-l)),this.o[l]=s.x,this.o[l+1]=s.y},h.prototype.Ut=function(l,s,a,u,p,f){if(0>l||0>s||0>u||!p&&(0>=f||s%f!=0)||a.size<u+s)throw d.i.N();if(s!=0)if(this.size<s+l&&this.resize(s+l),a==this)this.Ar(l,s,u,p,f);else if(p)for(p=0;p<s;p++)this.o[l]=a.o[u],l++,u++;else if(u=u+s-f,f==1)for(p=0;p<s;p++)this.o[l]=a.o[u],l++,u--;else for(p=0,s=d.O.truncate(s/f);p<s;p++){for(var g=0;g<f;g++)this.o[l+g]=a.o[u+g];l+=f,u-=f}},h.prototype.En=function(l,s,a){if(this.Pb||l+s>this.size)throw d.i.Hb();0<a-(l+s)&&L(this.o,l,l+s,l+(a-(l+s))+s),this.size-=s},h.prototype.ni=function(l,s,a){if(this.Pb||1>a||s%a!=0)throw d.i.Hb();for(var u=s>>1,p=0;p<u;p+=a){s-=a;for(var f=0;f<a;f++){var g=this.o[l+p+f];this.o[l+p+f]=this.o[l+s+f],this.o[l+s+f]=g}}},h.prototype.Wj=function(l,s,a){if(0>s||0>a||0>s||a+s>this.size)throw d.i.N();for(var u=s;u<s+a;u++)this.o[u]=l},h.prototype.Ar=function(l,s,a,u,p){if(!(u&&l==a||(this.o.set(this.o.subarray(a,a+s),l),u)))for(a=l,l=l+s-p,u=0,s=d.O.truncate(s/2);u<s;u++){for(var f=0;f<p;f++){var g=this.o[a+f];this.o[a+f]=this.o[l+f],this.o[l+f]=g}a+=p,l-=p}},h.prototype.vC=function(l,s,a,u,p){if(0>l||0>s||0>u)throw d.i.N();if(s!=0)for(this.size<(s<<1)+l&&this.resize((s<<1)+l),p||(l+=s-1<<1),p=p?2:-2,s+=u;u<s;u++)this.o[l]=a[u].x,this.o[l+1]=a[u].y,l+=p},h.prototype.Vw=function(l,s,a,u,p){if(0>l||0>s||0>u||this.size<s+l)throw d.i.N();if(p)for(p=0;p<s;p++)a[u+p]=this.o[l+p];else for(u=u+s-1;l<s;l++)a[u]=this.o[l],u--},h.prototype.clear=function(l){l?this.resize(0):this.Bh(0)},h.prototype.ix=function(){this.pk=this.Pb=!0},h.prototype.Vd=function(l,s,a){s=this.o.subarray(l,s),Array.prototype.sort.call(s,a),this.o.set(s,l)},h.prototype.zJ=function(l,s){if(this.Pb)throw d.i.fa("invalid call. Attribute Stream is read only.");this.o[l]|=s},h.prototype.KE=function(l,s){if(this.Pb)throw d.i.fa("invalid call. Attribute Stream is read only.");this.o[l]&=~s},h.prototype.Tp=function(){return 1},h}();d.pn=S}(Y||(Y={})),function(d){d.Yc=function(){function L(){}return L.Mr=function(S,h){return d.pn.qf(S,h)},L.Dn=function(S,h){return d.be.qf(S,h)},L.pP=function(S,h,l){switch(S){case 1:S=d.be.qf(h,l);break;case 2:S=d.ia.qf(h,l);break;case 4:S=d.pn.qf(h,l);break;default:throw d.i.Qa()}return S},L.YE=function(S,h){return L.pP(d.ra.Tp(S),h*d.ra.Va(S),d.ra.se(S))},L.Oh=function(S,h){return d.ia.qf(S,h)},L.qI=function(S){var h,l=[];for(h=0;h<S;h++)l.push(null);return l},L}()}(Y||(Y={})),function(d){d.ga=function(L){L===void 0&&(L=0),this.u=L}}(Y||(Y={})),function(d){d.NL=function(){function L(){}return L.bind=function(S){d.Sc=S.PeDefs,d.pf=S.PeFactory,d.NC=S.PeVertcs,d.ej=S.PeCSTransformations,d.MC=S.PeGTTransformations,d.LL=S.PeGeogtran,d.KL=S.PeFactoryCodechange,d.LC=S.PeGCSExtent,d.Cg=S.PePCSInfo,d.ML=S.PeHorizon,d.JL=S.PeCoordsys,d.lp=S.PeGTlistExtended,d.lp.PE_GTLIST_OPTS_USE_DEFAULT=128,d.pf.initialize(null),d.Mx=S.PeGTlistExtendedEntry,d.pf.fromString(d.Sc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},L}(),d.pf=null,d.NC=null,d.JL=null,d.ML=null,d.Cg=null,d.lp=null,d.Mx=null,d.LC=null,d.KL=null,d.LL=null,d.Sc=null,d.MC=null,d.ej=null}(Y||(Y={})),function(d){var L=function(){function S(){}return S.Mb=function(h,l){return 0<=l?S.P(h):-S.P(h)},S.P=function(h){return 0>h?-h:h},S.ti=function(h){return 3552713678800501e-30>h},S.KC=function(h,l,s){return S.P(h-l)<=s*(1+(S.P(h)+S.P(l))/2)},S.Y=function(h,l){return S.KC(h,l,3552713678800501e-30)},S.FL=function(h){return 3552713678800501e-30>=S.P(h)},S.Cd=function(h){return S.FL(h)},S}();d.s=L,d.F=function(){function S(){}return S.gp=function(h,l){var s=0;return(h=L.P(h))+(l=L.P(l))!=0&&(h>l?(s=l/h,s=h*Math.sqrt(1+s*s)):(s=h/l,s=l*Math.sqrt(1+s*s))),s},S.Wq=function(h,l,s,a,u){for(var p=[0,0,0],f=[0,0,0],g=0;2>=g;g++)l[g]-=h[g],s[g]-=l[g];s=p[1]*f[2]-p[2]*f[1],l=p[2]*f[0]-p[0]*f[2],p=p[0]*f[1]-p[1]*f[0],h=-1*(s*h[0]+l*h[1]+p*h[2]),a[0]=s,a[1]=l,a[2]=p,a[3]=h,f=S.on(a),a[0]/=f,a[1]/=f,a[2]/=f,a[3]/=f,u!=0&&(f=L.Cd(p)?L.Cd(h)?L.Mb(1,l):-L.Mb(1,h):L.Mb(1,p),f*=L.Mb(1,u),a[0]*=f,a[1]*=f,a[2]*=f,a[3]*=f)},S.zx=function(h,l,s){s[0]=h[1]*l[2]-l[1]*h[2],s[1]=h[2]*l[0]-l[2]*h[0],s[2]=h[0]*l[1]-l[0]*h[1]},S.St=function(h,l){return h[0]*l[0]+h[1]*l[1]+h[2]*l[2]},S.on=function(h){return S.gp(S.gp(h[0],h[1]),h[2])},S.cl=function(h,l,s,a,u,p,f,g){h=S.n(h,l,s);var b=Math.cos(s);p.u=(h+u)*b*Math.cos(a),f.u=(h+u)*b*Math.sin(a),g.u=(h*(1-l)+u)*Math.sin(s)},S.jO=function(h,l,s,a,u,p,f){var g=S.gp(l,s),b=1*Math.sqrt(1-h),x=b/1;if(L.Y(g,0))p.u=0,u.u=L.Mb(1.570796326794897,a),f.u=L.P(a)-b;else{p.u=Math.atan2(s,l),s=Math.atan2(1*a,b*g),p=Math.cos(s);var T=Math.sin(s);l=b*h/(1-h),h*=1,s=Math.atan2(a+l*T*T*T,g-h*p*p*p),3.141592653589793<L.P(s)&&(s=L.Mb(3.141592653589793,s)-s),s=Math.atan(x*Math.tan(s)),T=Math.sin(s),p=Math.cos(s),u.u=Math.atan2(a+l*T*T*T,g-h*p*p*p),1.570796326794897<L.P(u.u)&&(u.u=L.Mb(3.141592653589793,u.u)-u.u),s=Math.atan(x*Math.tan(u.u)),T=Math.sin(s),p=Math.cos(s),f.u=(a-b*T)*Math.sin(u.u)+(g-1*p)*Math.cos(u.u)}},S.n=function(h,l,s){return s=Math.sin(s),h/Math.sqrt(1-l*s*s)},S.ot=function(h,l){return Math.atan2(Math.sin(l)*(1-h),Math.cos(l))},S.Qj=function(h,l){return Math.atan2(Math.sin(l),Math.cos(l)*(1-h))},S.Rq=function(h,l){if(L.ti(h)||l==0||L.Y(L.P(l),1.570796326794897))return l;if(.006884661117170036>h){var s=Math.sqrt(1-h),a=(1-s)/(1+s),u=a*a,p=a*u,f=a*p,g=a*f,b=a*g,x=a*b,T=1.572916666666667*p-3.2578125*g+4.295068359375*x;h=2.142578125*f-6.071484375*b,s=3.129296875*g-11.249837239583334*x;var M=4.775276692708333*b,C=7.958636765252976*x,O=Math.cos(2*l);return l+Math.sin(2*l)*(1.5*a-.84375*p+.525390625*g-.2688395182291667*x-T+s-C+O*(2*(1.3125*u-1.71875*f+1.650146484375*b)-4*h+6*M+O*(4*T-12*s+24*C+O*(8*h-32*M+O*(16*s-80*C+O*(32*M+64*O*C))))))}for(s=1-h,a=h/2,p=(u=L.P(l))*S.Zu(h)/(1.570796326794897*s),f=9999,b=u,u=0;1e-16<f&&50>u;u++)x=S.w(h,b),g=b-(T=(g=(S.kG(b,h)-a*Math.sin(2*b)/x)/s-p)/(x=1/(x*x*x))),f=L.P(T),b=g;return 0<=l?b:-b},S.qW=function(h,l){return L.ti(l)?h:h*S.Zu(l)/1.570796326794897},S.ba=function(h){return 0>(h=S.pF(h,6.283185307179586))?h+6.283185307179586:3.141592653589793>L.P(h)||L.Y(L.P(h),3.141592653589793)?h:h-6.283185307179586},S.pF=function(h,l){return h-Math.floor(h/l)*l},S.Ah=function(h,l){if(.006884661117170036>l){var s=(l=(1-(l=Math.sqrt(1-l)))/(1+l))*l,a=s*s;return h/(1+l)*(1+.25*s+.015625*a+.00390625*s*a)*1.570796326794897}return h*S.Zu(l)},S.Vq=function(h,l){var s=L.Mb(1,Math.sin(l));return l=1.570796326794897>=(l=L.P(S.pF(l,3.141592653589793)))?l:3.141592653589793-l,(L.Y(l,1.570796326794897)?l:Math.atan(Math.sqrt(1-h)*Math.tan(l)))*s},S.q=function(h,l,s){if(.006884661117170036>l){var a=(l=(1-(l=Math.sqrt(1-l)))/(1+l))*l,u=l*a,p=l*u,f=l*p,g=l*f,b=l*g,x=-.7291666666666666*u+.2278645833333333*f+.03987630208333334*b,T=.615234375*p-.21533203125*g,M=-.54140625*f+.20302734375*b,C=.48876953125*g,O=-.4488699776785715*b,F=Math.cos(2*s);return h/(1+l)*((1+.25*a+.015625*p+.00390625*g)*s+Math.sin(2*s)*(-1.5*l+.1875*u+.0234375*f+.00732421875*b-x+M-O+F*(2*(.9375*a-.234375*p-.03662109375*g)-4*T+6*C+F*(4*x-12*M+24*O+F*(8*T-32*C+F*(16*M-80*O+F*(32*C+64*F*O)))))))}return h*(S.kG(s,l)-.5*l*Math.sin(2*s)/S.w(l,s))},S.w=function(h,l){return l=Math.sin(l),Math.sqrt(1-h*l*l)},S.Zu=function(h){return L.KC(h,1,2220446049250313e-31)?1:1>h?S.Xw(0,1-h)-h/3*S.Uw(0,1-h):NaN},S.kG=function(h,l){var s=L.Mb(1,h);h=L.P(h);var a=Math.floor(h/1.570796326794897);if(1<l)l=h==0?0:NaN;else if(L.Cd(a))l=(h=S.sin(h))*S.Xw(1-h*h,1-l*h*h)-l/3*h*h*h*S.Uw(1-h*h,1-l*h*h);else{var u=d.O.truncate(a%2),p=S.Zu(l);0<u?(h=1.570796326794897*(a+1)-h,l=p*(a+1)-(l=(h=Math.sin(h))*S.Xw(1-h*h,1-l*h*h)-l/3*h*h*h*S.Uw(1-h*h,1-l*h*h))):(h-=1.570796326794897*a,l=p*a+(l=(h=Math.sin(h))*S.Xw(1-h*h,1-l*h*h)-l/3*h*h*h*S.Uw(1-h*h,1-l*h*h)))}return l*s},S.sin=function(h){h=S.ba(h);var l=L.Mb(1,h);return h=L.P(h),L.Y(h,3.141592653589793)?0:L.Y(h,1.570796326794897)?1*l:Math.sin(h)*l},S.Uw=function(h,l){var s,a,u,p,f=h,g=l,b=1;for(l=0,h=1;a=((s=.2*(f+g+3*b))-f)/s,u=(s-g)/s,p=(s-b)/s,!(1e-4>L.P(a)&&1e-4>L.P(u)&&1e-4>L.P(p));)p=Math.sqrt(g),l+=h/((s=Math.sqrt(b))*(b+(p=Math.sqrt(f)*(p+s)+p*s))),h*=.25,f=.25*(f+p),g=.25*(g+p),b=.25*(b+p);return g=(f=a*u)-(b=p*p),3*l+h*(1+(b=f-6*b)*(.10227272727272728*b-.2142857142857143-.1730769230769231*p*(a=b+g+g))+p*(.1666666666666667*a+p*(-.4090909090909091*g+.1153846153846154*p*f)))/(s*Math.sqrt(s))},S.Xw=function(h,l){for(var s,a,u,p,f=1;a=2-((s=(h+l+f)/3)+h)/s,u=2-(s+l)/s,p=2-(s+f)/s,!(1e-4>L.P(a)&&1e-4>L.P(u)&&1e-4>L.P(p));f=.25*(f+s))s=Math.sqrt(l),a=Math.sqrt(f),h=.25*(h+(s=Math.sqrt(h)*(s+a)+s*a)),l=.25*(l+s);return(1+(.04166666666666666*(h=a*u-p*p)-.1-.06818181818181818*(l=a*u*p))*h+.07142857142857142*l)/Math.sqrt(s)},S.Qw=function(h,l){if(L.ti(h)||l==0||L.Y(L.P(l),1.570796326794897))return l;if(.006884661117170036>h){var s=h*h,a=h*s,u=h*a,p=h*u,f=h*p,g=h*f,b=-(.02708333333333333*a+.03430059523809524*u+.03149181547619048*p+.02634359154541446*f+.02156896735835538*g),x=.007669890873015873*u+.01299603174603175*p+.0148051353064374*f+.01454454953803912*g,T=-(.002275545634920635*p+.004830845032667949*f+.006558395368616723*g),M=.0006957236677288761*f+.001775193002406544*g,C=-.000217324089394402*g,O=Math.cos(2*l);return l+Math.sin(2*l)*(-(.5*h+.2083333333333333*s+.09375*a+.04878472222222222*u+.02916666666666667*p+.01938905423280423*f+.01388255931712963*g)-b+T-C+O*(2*(.1041666666666667*s+.0875*a+.06050347222222222*u+.04151785714285714*p+.02958958540013228*f+.02203667534722222*g)-4*x+6*M+O*(4*b-12*T+24*C+O*(8*x-32*M+O*(16*T-80*C+O*(32*M+64*O*C))))))}return l==0||L.Y(L.P(l),1.570796326794897)?s=l:(u=(a=Math.sqrt(h))*Math.sin(l),s=Math.tan(.7853981633974483+l/2)*Math.pow((1-u)/(1+u),a/2),s=2*Math.atan(s)-1.570796326794897),s},S.yO=function(h,l){if(L.ti(h)||l==0||L.Y(L.P(l),1.570796326794897))return l;if(.006884661117170036>h){var s=h*(M=h*(T=h*(O=h*h))),a=h*(C=h*s),u=.05833333333333333*T+.07232142857142858*M+.05634300595238095*s+.0355325796406526*C+.020235546186067*a,p=.02653149801587302*M+.04379960317460317*s+.0429211791776896*C+.03255384637546096*a,f=.01294022817460318*s+.02668104344536636*C+.03155651254609588*a,g=.00659454790965208*C+.0163075268674227*a,b=.003463473736911237*a,x=Math.cos(2*l);return l+Math.sin(2*l)*(.5*h+.2083333333333333*O+.08333333333333333*T+.03611111111111111*M+.01875*s+.01195601851851852*C+.008863673941798942*a-u+f-b+x*(2*(.1458333333333333*O+.1208333333333333*T+.07039930555555556*M+.03616071428571429*s+.01839451058201058*C+.01017113095238095*a)-4*p+6*g+x*(4*u-12*f+24*b+x*(8*p-32*g+x*(16*f-80*b+x*(32*g+64*x*b))))))}var T=Math.sqrt(h),M=T/2,C=Math.tan(.7853981633974483+l/2);h=0,u=1;for(var O=l;u!=0;O=a)s=T*Math.sin(O),a=C*Math.pow((1+s)/(1-s),M),a=2*Math.atan(a)-1.570796326794897,h++,(L.Y(a,O)||3e4<h)&&(u=0);return O},S}()}(Y||(Y={})),function(d){var L=function(){function S(h){this.ul=this.Us=null,this.Iv=!1,this.GA=this.HA=0,this.HH=new d.h,this.XH=new d.h,this.KA=!1,this.vq=new d.l,this.wH=this.sw=0,this.tw=null,this.zl=!1,this.Eo=null,this.bA=0,this.Ue=h,this.As=d.zb.xv(this.Ue,0,!0),this.HH.Rc(),this.XH.Rc(),this.RH=NaN;var l=h.getCode();0<l?(this.Kk=l,d.pf.getCode(h)):this.Kk=d.pf.getCode(h),0>this.Kk&&(this.Kk=0);var s=this.Ue.getType();if(this.jH=s==d.Sc.PE_TYPE_PROJCS?2:1,s==d.Sc.PE_TYPE_PROJCS&&!h.loadConstants())throw d.i.N("PeProjcs.loadConstants failed");l=s==d.Sc.PE_TYPE_GEOGCS?this.Ue:this.Ue.getGeogcs(),s!=d.Sc.PE_TYPE_GEOGCS&&d.pf.getCode(l),this.Eo=h.getUnit(),this.RH=l.getPrimem().getLongitude(),this.wH=h=l.getUnit().getUnitFactor(),h=Math.PI/(180*h),1e-10>Math.abs(h-1)&&(h=1),this.GA=h,s&d.Sc.PE_TYPE_PROJCS?(l=this.Ue,this.HA=1/l.getUnit().getUnitFactor(),this.sw=.001/this.Ue.getUnit().getUnitFactor(),this.tw=d.Cg.generate(l,d.Cg.PE_PCSINFO_OPTION_NONE),this.zl=this.tw.isPannableRectangle(),this.bA=d.zb.qN(this.tw.getCentralMeridian(),this.GA)):(this.KA=this.zl=!0,this.HA=0,s=1/l.getUnit().getUnitFactor(),this.sw=.001/l.getDatum().getSpheroid().getAxis()*s,this.bA=0),this.zl&&(this.xx(),this.DK(),this.nY(),this.CK(),this.lY(),this.mY())}return S.prototype.$r=function(){return this.Kk},S.prototype.kk=function(){return this.tw},S.Py=function(h,l){return h==l||h!=null&&l!=null&&h.Kk==0&&l.Kk==0&&h.As===l.As},S.prototype.Wc=function(){return this.zl},S.prototype.gh=function(h){h.K(this.so)},S.prototype.pv=function(){return this.so.v},S.prototype.ov=function(){return this.so.C},S.prototype.GR=function(h){h.K(this.uw)},S.prototype.lY=function(){var h=this.Ue.getType();if(h==d.Sc.PE_TYPE_PROJCS){h=this.Ue;var l=this.kk().getCentralMeridian(),s=h.getGeogcs();if(s==null)throw d.i.fa("internal error");l=[[l+(s=1/s.getUnit().getUnitFactor()*Math.PI),0]],d.ej.geogToProj(h,1,l),l=l[0][0],s=h.getParameters()[d.Sc.PE_PARM_X0].getValue();var a=this.ml();h=new d.l,a.A(h),l=(a=Math.abs(l-s))+s,s=-1*a+s,a=h.H,h=h.G;var u=new d.l;u.K(s,h,l,a),this.so==null&&(this.so=u)}else{if(h!=d.Sc.PE_TYPE_GEOGCS)throw d.i.fa("internal error");s=1/this.Ue.getUnit().getUnitFactor()*Math.PI,(h=new d.l).K(-s,-s/2,s,s/2),this.so==null&&(this.so=h)}},S.prototype.mY=function(){var h=this.Ue.getType();if(h==d.Sc.PE_TYPE_PROJCS){var l=this.Ue;if(h=this.kk().getCentralMeridian(),(l=l.getGeogcs())==null)throw d.i.fa("internal error");l=1/l.getUnit().getUnitFactor()*Math.PI;var s=this.Vr(),a=new d.l;s.A(a),(s=new d.l).K(h-l,a.G,h+l,a.H),this.uw==null&&(this.uw=s)}else{if(h!=d.Sc.PE_TYPE_GEOGCS)throw d.i.fa("internal error");l=1/this.Ue.getUnit().getUnitFactor()*Math.PI,(h=new d.l).K(-l,-l/2,l,l/2),this.uw==null&&(this.uw=h)}},S.prototype.bf=function(){return this.GA},S.prototype.pm=function(){return this.HA},S.prototype.Vr=function(){if(this.zl)return this.ul;var h=this.ul;return h??(this.xx(),this.ul)},S.prototype.Wr=function(){return this.zl?null:(this.ul!=null||this.xx(),this.YG)},S.prototype.xx=function(){if(this.Ue.getType()==d.Sc.PE_TYPE_PROJCS){var h=this.Ue,l=h.getGeogcs(),s=h.horizonGcsGenerate();if(s!=null){var a=s[0].getNump(),u=s[0].getKind();h=0<s[0].getInclusive();var p=this.bf(),f=90*p,g=360*p,b=370*p,x=180*p*d.Sc.PE_HORIZON_DELTA/Math.PI,T=new d.l,M=null;if(1<a){for(var C=1;C<a;C++)if(s[C].getKind()==d.Sc.PE_HORIZON_LINE){M==null&&(M=new d.Ta);var O=s[C].getCoord();M.sx(O[0][0],O[0][1]),M.yj(O[1][0],O[1][1])}}if(u==d.Sc.PE_HORIZON_RECT)s=s[0].getCoord(),T.K(s[0][0],s[0][1]),T.Zb(s[1][0],s[1][1]),Math.abs(T.H-f)<1e-7*x&&(T.H=f),Math.abs(T.G+f)<1e-7*x&&(T.G=-f),T.R()>b&&(s=-400*p,T.K(s,T.G,s+5*g,T.H)),s=new d.Fh(T),this.ul==null&&(this.ul=s,this.Iv=h);else{if(b=new d.Da,g=this.kk().isGcsHorizonMultiOverlap(),T=d.gu.bF(l,d.hu.Integer64),g){for(b=new d.gL,x=d.Gh.local().V(b,T,null),C=0;C<a;C++)if(s[C].getKind()==d.Sc.PE_HORIZON_POLY){for(l=s[C].getSize(),p=s[C].getCoord(),u=[],f=0;f<l;f++)u[f]=d.h.construct(p[f][0],p[f][1]);s[C].getInclusive(),g&&((p=new d.Da).Yk(u,l-1),b.ZX(p),x.qe())}b=x.next()}else for(C=0;C<a;C++)if(s[C].getKind()==d.Sc.PE_HORIZON_POLY){for(l=s[C].getSize(),p=s[C].getCoord(),g=[],f=0;f<l;f++)g[f]=d.h.construct(p[f][0],p[f][1]);s[C].getInclusive(),b.Yk(g,l-1)}h?d.Xj.local().wn(b,T,1):d.kp.local().wn(b,T,1),d.dj.local().wn(b,T,1),this.ul==null&&(this.ul=b,this.Iv=h,this.YG=M)}}}},S.prototype.hv=function(){return this.zl||this.ul==null&&this.xx(),this.Iv},S.prototype.DK=function(){if(this.jH==2){var h=this.Ue.horizonPcsGenerate();if(h!=null){var l=h[0].getKind();h[0].getInclusive();var s=h[0].getNump(),a=!1;if(l==d.Sc.PE_HORIZON_RECT)h=h[0].getCoord(),(s=new d.l).K(h[0][0],h[0][1]),s.Zb(h[1][0],h[1][1]),h=new d.Fh(s);else{for(l=-1,a=0;a<s;a++)h[a].getKind()==d.Sc.PE_HORIZON_POLY&&(l=a);for(a=h[l].getSize()-1,h=h[l].getCoord(),s=[],l=0;l<a;l++)s[l]=d.h.construct(h[l][0],h[l][1]);h=l=new d.Da,l.Yk(s,a),a=!0}this.kk().isDensificationNeeded()&&(s=1e5*this.pm(),h=d.Xl.local().V(h,s,null)),a&&(a=new d.Fh,h.bn(a),h.Ke(),h.Qb(),h.qR(),d.Xj.local().wn(h,null,1)),this.Us==null&&(this.Us=h)}}},S.prototype.ml=function(){if(this.zl)return this.Us;var h=this.Us;return h??(this.DK(),this.Us)},S.prototype.nY=function(){if(this.Ue.getType()==d.Sc.PE_TYPE_PROJCS){var h=90*this.bf();h=[[0,h],[0,-h]],d.ej.geogToProj(this.Ue,2,h);var l=this.kk(),s=l.getNorthPoleLocation()!=d.Cg.PE_POLE_OUTSIDE_BOUNDARY;l=l.getSouthPoleLocation()!=d.Cg.PE_POLE_OUTSIDE_BOUNDARY,this.KA||(s&&this.HH.ma(h[0][0],h[0][1]),l&&this.XH.ma(h[1][0],h[1][1]))}this.KA=!0},S.prototype.CK=function(){if(this.jH==1){var h=400*this.bf();this.vq.K(-h,-h,h,h)}else h=d.Cg.generate(this.Ue,d.Cg.PE_PCSINFO_OPTION_DOMAIN),h=d.l.construct(h.getDomainMinx(),h.getDomainMiny(),h.getDomainMaxx(),h.getDomainMaxy()),this.vq.B()&&this.vq.K(h)},S.prototype.hR=function(h){this.zl&&h.K(this.vq),this.vq.B()&&this.CK(),h.K(this.vq)},S.prototype.Up=function(){return this.RH},S.prototype.zi=function(){return this.bA},S.prototype.Hd=function(){return this.Eo},S.prototype.Xr=function(){return this.wH},S}();d.OC=L}(Y||(Y={})),function(d){var L=function(){function S(h){this.KT=h,this.As=d.zb.xv(h,0,!0);var l=h.getCode();this.ss=0<l?l:d.pf.getCode(h),0>this.ss&&(this.ss=0),this.Eo=l=this.KT.getUnit(),this.IH=1/l.getUnitFactor(),d.pf.getCode(h)}return S.Py=function(h,l){return h==l||h!=null&&l!=null&&h.ss==0&&l.ss==0&&h.As===l.As},S.prototype.$r=function(){return this.ss},S}();d.PL=L}(Y||(Y={})),function(d){d.Yg=function(){function L(){}return L.tb=function(S,h,l,s,a,u,p,f){if(u!=null||p!=null||f!=null){s=d.F.ba(s),h=d.F.ba(h),l=d.F.ba(l),a=d.F.ba(a),1.570796326794897<d.s.P(l)&&(l=d.s.Mb(3.141592653589793,l)-l,h=d.F.ba(h+3.141592653589793)),1.570796326794897<d.s.P(a)&&(a=d.s.Mb(3.141592653589793,a)-a,s=d.F.ba(s+3.141592653589793));var g=d.F.ba(s-h);if(d.s.Y(l,a)&&(d.s.Y(h,s)||d.s.Y(d.s.P(l),1.570796326794897)))u!=null&&(u.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(d.s.Y(l,-a)){if(d.s.Y(d.s.P(l),1.570796326794897))return u!=null&&(u.u=3.141592653589793*S),p!=null&&(p.u=0<l?d.F.ba(3.141592653589793-d.F.ba(s)):d.F.ba(s)),void(f!=null&&(f.u=0<l?d.F.ba(s):d.F.ba(3.141592653589793-d.F.ba(s))));if(d.s.Y(d.s.P(g),3.141592653589793))return u!=null&&(u.u=3.141592653589793*S),p!=null&&(p.u=0),void(f!=null&&(f.u=0))}var b=d.s.P(l)==1.570796326794897?0:Math.cos(l),x=Math.sin(l),T=d.s.P(a)==1.570796326794897?0:Math.cos(a),M=Math.sin(a),C=d.s.P(g)==1.570796326794897?0:Math.cos(g),O=d.s.P(g)==3.141592653589793?0:Math.sin(g);if(u!=null){var F=Math.sin((a-l)/2);g=Math.sin(g/2),u.u=2*Math.asin(Math.sqrt(F*F+b*T*g*g))*S}p!=null&&(p.u=d.s.Y(d.s.P(l),1.570796326794897)?0>l?s:d.F.ba(3.141592653589793-s):Math.atan2(T*O,b*M-x*T*C)),f!=null&&(d.s.Y(d.s.P(a),1.570796326794897)?f.u=0>a?h:d.F.ba(3.141592653589793-h):(f.u=Math.atan2(b*O,M*b*C-T*x),f.u=d.F.ba(f.u+3.141592653589793)))}}},L.rf=function(S,h,l,s,a,u,p){if(u!=null||p!=null){h=d.F.ba(h),l=d.F.ba(l),1.570796326794897<d.s.P(l)&&(l=d.s.Mb(3.141592653589793,l)-l,h=d.F.ba(h+3.141592653589793)),d.s.Y(d.s.P(l),1.570796326794897)&&(h=0),a=d.F.ba(a);var f=d.s.Y(d.s.P(a),1.570796326794897)?0:Math.cos(a),g=d.s.Y(d.s.P(a),3.141592653589793)?0:Math.sin(a),b=d.s.Y(d.s.P(l),1.570796326794897)?0:Math.cos(l),x=Math.sin(l);S=s/S,s=d.s.Y(d.s.P(S),1.570796326794897)?0:Math.cos(S);var T=d.s.Y(d.s.P(S),3.141592653589793)?0:Math.sin(S),M=Math.asin(x*s+b*T*f);p!=null&&(p.u=M),u!=null&&(u.u=d.s.Y(d.s.P(M),1.570796326794897)?d.s.Y(l,-M)?0>M?a:d.F.ba(3.141592653589793-a):h:d.s.Y(d.s.P(l),1.570796326794897)&&d.s.Y(S,3.141592653589793)?0>l?a:d.F.ba(3.141592653589793-a):d.F.ba(h+Math.atan2(T*g,b*s-x*T*f)))}},L}()}(Y||(Y={})),function(d){d.Wk=function(){function L(){}return L.tb=function(S,h,l,s,a,u,p,f,g){var b=new d.ga(0),x=new d.ga(0),T=[0,0,0],M=[0,0,0],C=[0,0,0],O=new d.ga(0),F=new d.ga(0),P=new d.ga(0),G=new d.ga(0),q=new d.ga(0);if(p!=null||f!=null||g!=null)if(d.s.ti(h))d.Yg.tb(S,l,s,a,u,p,f,g);else{a=d.F.ba(a),l=d.F.ba(l);var V=d.F.ba(a-l);if(d.s.Y(s,u)&&(d.s.Y(l,a)||d.s.Y(d.s.P(s),1.570796326794897)))p!=null&&(p.u=0),f!=null&&(f.u=0),g!=null&&(g.u=0);else{if(d.s.Y(s,-u)){if(d.s.Y(d.s.P(s),1.570796326794897))return p!=null&&(p.u=2*d.F.Ah(S,h)),f!=null&&(f.u=0<s?d.F.ba(3.141592653589793-d.F.ba(a)):d.F.ba(a)),void(g!=null&&(g.u=0<s?d.F.ba(a):d.F.ba(3.141592653589793-d.F.ba(a))));d.s.Y(d.s.P(V),3.141592653589793)&&(p!=null&&(p.u=2*d.F.Ah(S,h)),f!=null&&(f.u=0),g!=null&&(g.u=0))}else(d.s.Y(d.s.P(s),1.570796326794897)||d.s.Y(d.s.P(u),1.570796326794897))&&(d.s.Y(d.s.P(s),1.570796326794897)?l=a:a=l);var Z=0;if(0>V){Z=1;var X=l;l=a,a=X,X=s,s=u,u=X}V=d.F.ot(h,s);var te=d.F.ot(h,u);f==null&&g==null||(d.Yg.tb(S,l,V,a,te,null,b,x),b=Math.atan2(Math.sin(b.u)*Math.cos(s-V),Math.cos(b.u)),x=Math.atan2(Math.sin(x.u)*Math.cos(u-te),Math.cos(x.u)),Z!=0&&(X=b,b=x,x=X),f!=null&&(f.u=b),g!=null&&(g.u=x)),p!=null&&(d.F.cl(1,h,s,l,0,P,G,q),T[0]=P.u,T[1]=G.u,T[2]=q.u,d.F.cl(1,h,u,a,0,P,G,q),M[0]=P.u,M[1]=G.u,M[2]=q.u,C[0]=T[1]*M[2]-M[1]*T[2],C[1]=-(T[0]*M[2]-M[0]*T[2]),C[2]=T[0]*M[1]-M[0]*T[1],h=1-d.F.w(h,d.F.Vq(h,d.F.Qj(h,Math.acos(C[2]/Math.sqrt(C[0]*C[0]+C[1]*C[1]+C[2]*C[2]))))),h*=2-h,f=Math.atan2(-C[1],-C[0]),C=d.F.ba(f-1.570796326794897),f=d.F.ba(f+1.570796326794897),C=d.s.P(d.F.ba(l-C))<=d.s.P(d.F.ba(l-f))?C:f,d.Yg.tb(1,C,0,l,V,O,null,null),d.Yg.tb(1,C,0,a,te,F,null,null),3.141592653589793<O.u+F.u&&(C=d.F.ba(C+3.141592653589793),d.Yg.tb(1,C,0,l,V,O,null,null),d.Yg.tb(1,C,0,a,te,F,null,null)),O.u*=d.s.Mb(1,s),F.u*=d.s.Mb(1,u),O.u=d.F.Qj(h,O.u),F.u=d.F.Qj(h,F.u),l=d.F.q(S,h,O.u),S=d.F.q(S,h,F.u),p.u=d.s.P(S-l))}}},L.rf=function(S,h,l,s,a,u,p,f){var g=0,b=new d.ga(0),x=new d.ga(0),T=[0,0,0],M=[0,0,0],C=new d.ga(0),O=new d.ga(0),F=new d.ga(0);if(p!=null||f!=null)if(d.s.ti(h))d.Yg.rf(S,l,s,a,u,p,f);else if(d.s.Cd(a))p!=null&&(p.u=l),f!=null&&(f.u=s);else if(u=d.F.ba(u),0>a&&(a=d.s.P(a),u=d.F.ba(u+3.141592653589793)),l=d.F.ba(l),s=d.F.ba(s),1.570796326794897<d.s.P(s)&&(l=d.F.ba(l+3.141592653589793),s=d.s.Mb(3.141592653589793,s)-s),d.s.Y(d.s.P(s),1.570796326794897)&&(l=0),d.s.Cd(s)){var P=d.s.P(1.570796326794897-d.s.P(u));P=d.F.Qj(h,P),P=1-d.F.w(h,d.F.Vq(h,P)),P*=2-P,S=a/d.F.Ah(S,P)*1.570796326794897,S=d.F.Rq(P,S),S=d.F.ot(P,S),d.Yg.rf(1,l,s,S,u,p,b),f!=null&&(g=b.u),f!=null&&(f.u=d.F.Qj(h,g))}else if(d.s.Y(d.s.P(s),1.570796326794897))b=2*(g=d.F.Ah(S,h)),u=0<(S=d.s.Mb(1.570796326794897,s))?d.F.ba(3.141592653589793-u):u,s=g-a,d.s.P(s)<=g?p!=null&&(p.u=u):(s=Math.floor(a/b),d.O.truncate(s%2)==0?(p!=null&&(p.u=u),a-=s*b):(p!=null&&(p.u=d.F.ba(u+3.141592653589793)),a=(s+1)*b-a),s=g-a),f!=null&&(f.u=d.F.Rq(h,s/g*S));else{P=d.F.ot(h,s),u=Math.atan2(Math.sin(u),Math.cos(u)*Math.cos(s-P));var G=d.O.truncate(d.s.Mb(1,P))*(1.570796326794897>=d.s.P(u)?1:-1);u=d.F.ba(l+Math.atan(Math.tan(u)*-Math.sin(P))),d.Yg.tb(S,u,0,l,P,null,x,null),P=d.s.P(1.570796326794897-d.s.P(x.u)),P=d.F.Qj(h,P),P=1-d.F.w(h,d.F.Vq(h,P)),P*=2-P,d.F.cl(1,h,0,u,0,C,O,F),T[0]=C.u,T[1]=O.u,T[2]=F.u,d.F.cl(1,h,s,l,0,C,O,F),M[0]=C.u,M[1]=O.u,M[2]=F.u,s=Math.acos((T[0]*M[0]+T[1]*M[1]+T[2]*M[2])/Math.sqrt(M[0]*M[0]+M[1]*M[1]+M[2]*M[2])),s=d.F.Qj(P,s),a=0<(s=d.F.q(S,P,s)+a*G)?x.u:d.F.ba(x.u+3.141592653589793),S=d.s.P(s)/d.F.Ah(S,P)*1.570796326794897,S=d.F.Rq(P,S),S=d.F.ot(P,S),d.Yg.rf(1,u,0,S,a,p,b),f!=null&&(g=b.u),f!=null&&(f.u=d.F.Qj(h,g))}},L}()}(Y||(Y={})),function(d){d.cu=function(){function L(){}return L.tb=function(S,h,l,s,a,u,p,f,g){var b=0,x=0,T=0;if(p!=null||f!=null||g!=null)if(d.s.ti(h))d.Yg.tb(S,l,s,a,u,p,f,g);else{var M=d.F.ba(a-l);if(d.s.Y(s,u)&&(d.s.Cd(M)||d.s.Y(d.s.P(s),1.570796326794897)))p!=null&&(p.u=0),f!=null&&(f.u=0),g!=null&&(g.u=0);else{if(d.s.Y(s,-u)){if(d.s.Y(d.s.P(s),1.570796326794897))return p!=null&&(p.u=2*d.F.Ah(S,h)),f!=null&&(f.u=0<s?d.F.ba(3.141592653589793-d.F.ba(a)):d.F.ba(a)),void(g!=null&&(g.u=0<s?d.F.ba(a):d.F.ba(3.141592653589793-d.F.ba(a))));d.s.Y(d.s.P(M),3.141592653589793)&&(p!=null&&(p.u=2*d.F.Ah(S,h)),f!=null&&(f.u=0),g!=null&&(g.u=0))}else if(d.s.Y(d.s.P(s),1.570796326794897)||d.s.Y(d.s.P(u),1.570796326794897)||d.s.Cd(M)||d.s.Y(d.s.P(M),3.141592653589793))return void d.Wk.tb(S,h,l,s,a,u,p,f,g);var C=1-Math.sqrt(1-h),O=h/(1-h),F=S*(1-C);S=d.F.Vq(h,s);var P=d.F.Vq(h,u);h=d.s.P(S)==1.570796326794897?0:Math.cos(S);var G=Math.sin(S),q=d.s.P(P)==1.570796326794897?0:Math.cos(P),V=Math.sin(P),Z=M,X=Math.cos(Z),te=Math.sin(Z),oe=1,me=0;do{var Se=Z,Ce=Math.sqrt(Math.pow(q*te,2)+Math.pow(h*V-G*q*X,2)),$e=G*V+h*q*X,Ue=Math.atan2(Ce,$e);if(Ce==0){oe=0;break}var Te=h*q*te/Ce;if(b=Math.cos(Math.asin(Te)),x=$e-2*G*V/(b*=b),1<d.s.P(x)&&(x=d.s.Mb(1,x)),Z=M+(1-(Z=C/16*b*(4+C*(4-3*b))))*C*Te*(Ue+Z*Ce*(x+Z*$e*(2*(T=x*x)-1))),X=Math.cos(Z),te=Math.sin(Z),me++,3.141592653589793<d.s.P(Z)&&30<me){oe=0;break}}while(5e3>=me&&!d.s.Y(Se,Z));if(oe!=0)C=(O*=b)*(256+O*(O*(74-47*O)-128))/1024,p!=null&&(p.u=F*(1+O*(4096+O*(O*(320-175*O)-768))/16384)*(Ue-C*Ce*(x+C/4*($e*(2*T-1)-C/6*x*(4*Ce*Ce-3)*(4*T-3))))),f!=null&&(f.u=d.s.Y(d.s.P(s),1.570796326794897)?0>s?a:d.F.ba(3.141592653589793-a):Math.atan2(q*te,h*V-G*q*X)),g!=null&&(d.s.Y(d.s.P(u),1.570796326794897)?g.u=0>u?l:d.F.ba(3.141592653589793-l):(g.u=Math.atan2(h*te,h*V*X-G*q),g.u=d.F.ba(g.u+3.141592653589793)));else{Z=d.s.Mb(3.141592653589793,M),$e=G*V-h*q,Ue=Math.acos($e),Ce=Math.sin(Ue),b=1,me=Te=0;do T=Te,X=1-.25*(Te=C*(b*=b)*(1+C+C*C))+.1875*(x=C*C*(X=b*b)*(1+2.25*C))-.1953125*(oe=C*C*C*X*b),Te=.25*Te-.25*x+.29296875*oe,te=.03125*x-.05859375*oe,oe*=.00651041666666667,x=$e-2*G*V/b,1<d.s.P(x)&&(x=d.s.Mb(1,x)),b=Math.acos(x),$e=Math.cos(2*b),Se=Math.cos(3*b),te=(Te=d.s.Y(s,-u)?d.F.ba(3.141592653589793-M)/(3.141592653589793*C*X):d.F.ba(Z-M)/(C*(X*Ue+Te*Ce*x+te*Math.sin(2*Ue)*$e+oe*Math.sin(3*Ue)*Se)))*Ce/(h*q),Z=1.570796326794897<d.s.P(M)?d.s.Mb(3.141592653589793,te)-Math.asin(te):Math.asin(te),X=Math.cos(Z),Ce=Math.sqrt(Math.pow(q*te,2)+Math.pow(h*V-G*q*X,2)),Ue=3.141592653589793-Math.asin(d.s.P(Ce)),$e=Math.cos(Ue),b=Math.cos(Math.asin(Te)),me++;while(70>=me&&!d.s.Y(T,Te));p!=null&&(X=1+(O*=b*=b)*(4096+O*(O*(320-175*O)-768))/16384,d.s.Y(s,-u)?p.u=3.141592653589793*F*X:(x=$e-2*G*V/b,b=Math.acos(x),$e=Math.cos(2*b),Se=Math.cos(3*b),p.u=F*(X*Ue+O*(O*(128+O*(35*O-60))-512)/2048*Ce*x+O*(5*O-4)/6144*O*O*Math.sin(2*Ue)*$e+oe*Math.sin(3*Ue)*Se+-762939453125e-16*O*O*O*O*Math.sin(4*Ue)*Math.cos(4*b)))),f!=null&&(d.s.Cd(s)&&d.s.Cd(u)?(b=Math.sqrt(1-Te*Te),f.u=Math.acos(b),0>M&&(f.u*=-1)):d.s.Y(d.s.P(s),1.570796326794897)?f.u=0>s?a:d.F.ba(3.141592653589793-a):(p=Te/h,F=Math.sqrt(1-p*p),0>h*V-G*q*Math.cos(Z)&&(F*=-1),f.u=Math.atan2(p,F),d.s.Y(s,-u)&&d.s.P(d.F.ba(l-a))>3.141592653589793*(1-C*Math.cos(s))&&(0<s&&1.570796326794897>d.s.P(f.u)||0>s&&1.570796326794897<d.s.P(f.u))&&(f.u=d.s.Mb(3.141592653589793,f.u)-f.u))),g!=null&&(d.s.Cd(s)&&d.s.Cd(u)?(b=Math.sqrt(1-Te*Te),g.u=Math.acos(b),0<=M&&(g.u*=-1)):d.s.Y(d.s.P(u),1.570796326794897)?g.u=0>u?l:d.F.ba(3.141592653589793-l):(M=Te/q,p=Math.sqrt(1-M*M),F=Math.sin(Z/2),0>Math.sin(P-S)-2*h*V*F*F&&(p*=-1),g.u=Math.atan2(M,p),g.u=d.F.ba(g.u+3.141592653589793),d.s.Y(s,-u)&&!d.s.Cd(s)&&!d.s.Y(d.s.P(s),1.570796326794897)&&d.s.P(d.F.ba(l-a))>3.141592653589793*(1-C*Math.cos(s))&&(f!=null?F=f.u:(p=Te/h,F=Math.sqrt(1-p*p),0>h*V-G*q*Math.cos(Z)&&(F*=-1),F=Math.atan2(p,F),d.s.Y(s,-u)&&d.s.P(d.F.ba(l-a))>3.141592653589793*(1-C*Math.cos(s))&&(0<s&&1.570796326794897>d.s.P(F)||0>s&&1.570796326794897<d.s.P(F))&&(F=d.s.Mb(3.141592653589793,F)-F)),1.570796326794897>=d.s.P(F)&&1.570796326794897<d.s.P(g.u)||1.570796326794897<=d.s.P(F)&&1.570796326794897>d.s.P(g.u))&&(g.u=-1*d.F.ba(g.u+3.141592653589793))))}}}},L.rf=function(S,h,l,s,a,u,p,f){if(p!=null||f!=null)if(d.s.ti(h))d.Yg.rf(S,l,s,a,u,p,f);else if(u=d.F.ba(u),d.s.Y(d.s.P(s),1.570796326794897)||d.s.Cd(u)||d.s.Y(d.s.P(u),3.141592653589793))d.Wk.rf(S,h,l,s,a,u,p,f);else{var g=d.s.P(u)==1.570796326794897?0:Math.cos(u),b=d.s.P(u)==3.141592653589793?0:Math.sin(u);d.s.Y(d.s.P(s),1.570796326794897)&&(l=0),u=1-Math.sqrt(1-h);var x=d.F.Vq(h,s);s=d.s.P(x)==1.570796326794897?0:Math.cos(x);var T=Math.sin(x);x=Math.atan2(Math.tan(x),g);var M=s*b,C=M*M,O=1-C,F=h/(1-h)*O,P=(h=F*(256+F*(F*(74-47*F)-128))/1024)/4,G=h/6,q=a/(S*(1-u)*(1+F*(4096+F*(F*(320-175*F)-768))/16384)),V=q;do{var Z=V;a=d.s.P(V)==1.570796326794897?0:Math.cos(V);var X=(F=d.s.P(V)==3.141592653589793?0:Math.sin(V))*F;V=h*F*((S=Math.cos(2*x+V))+P*(a*(2*(V=S*S)-1)-G*S*(4*X-3)*(4*V-3)))+q}while(!d.s.Y(Z,V));a=d.s.P(V)==1.570796326794897?0:Math.cos(V),F=d.s.P(V)==3.141592653589793?0:Math.sin(V),p!=null&&(b=Math.atan2(F*b,s*a-T*F*g),O=u/16*O*(4+u*(4-3*O)),S=Math.cos(2*x+V),p.u=d.F.ba(l+(b-(1-O)*u*M*(V+O*F*(S+O*a*(2*S*S-1)))))),f!=null&&(O=T*F-s*a*g,O=(1-u)*Math.sqrt(C+O*O),f.u=Math.atan2(T*a+s*F*g,O))}},L}()}(Y||(Y={})),function(d){d.PC=function(){function L(){}return L.tb=function(S,h,l,s,a,u,p,f,g){var b=d.F.ba(a-l),x=d.s.Y(d.s.P(s),1.570796326794897),T=d.s.Y(d.s.P(u),1.570796326794897);if(d.s.Y(s,u)&&(d.s.Cd(b)||x))p!=null&&(p.u=0),f!=null&&(f.u=0),g!=null&&(g.u=0);else{if(d.s.ti(h)){var M=Math.sin(s),C=Math.sin(u);M=Math.sqrt((1+M)/(1-M)),C=Math.sqrt((1+C)/(1-C)),M=Math.log(C)-Math.log(M),M=Math.atan2(b,M),p!=null&&(p.u=d.s.Y(s,u)?d.s.P(S*Math.cos(s)*b):d.s.P((S*u-S*s)/Math.cos(M)))}else C=d.F.Qw(h,u),M=Math.sin(d.F.Qw(h,s)),C=Math.sin(C),M=Math.sqrt((1+M)/(1-M)),C=Math.sqrt((1+C)/(1-C)),M=Math.log(C)-Math.log(M),M=Math.atan2(b,M),p!=null&&(d.s.Y(s,u)?p.u=d.s.P(S*b*Math.cos(s)/d.F.w(h,s)):(b=d.F.q(S,h,s),S=d.F.q(S,h,u),p.u=d.s.P((S-b)/Math.cos(M))));f==null&&g==null||(p=d.F.ba(M+3.141592653589793),x&&T||!x&&!T||(x?M=0>s?a:d.F.ba(3.141592653589793-a):T&&(p=0>u?l:d.F.ba(3.141592653589793-l))),f!=null&&(f.u=M),g!=null&&(g.u=p))}},L.rf=function(S,h,l,s,a,u,p,f){u=d.F.ba(u),0>a&&(a=d.s.P(a),u=d.F.ba(u+3.141592653589793)),d.s.ti(h)?d.s.Y(d.s.P(s),1.570796326794897)?(l=0>s?u:d.F.ba(3.141592653589793-u),3.141592653589793>=(u=a/S%6.283185307179586)?S=s-d.s.Mb(u,s):(l=d.F.ba(l+3.141592653589793),S=-s+d.s.Mb(u-3.141592653589793,s))):d.s.Y(d.s.P(u),1.570796326794897)?(l=d.F.ba(l+d.s.Mb(a,u)/(S*Math.cos(s))),S=s):(S=s+a*Math.cos(u)/S,1.570796326794897<d.s.P(S)&&(S=1.570796326794897),d.s.Y(d.s.P(S),1.570796326794897)&&(d.s.Cd(u)||d.s.Y(d.s.P(u),3.141592653589793))||(1.570796316258184<d.s.P(S)&&(S=d.s.Mb(1.570796316258184,S)),h=Math.sin(s),s=Math.sin(S),h=Math.sqrt((1+h)/(1-h)),s=Math.sqrt((1+s)/(1-s)),h=Math.log(s)-Math.log(h),l=d.F.ba(l+Math.tan(u)*h))):d.s.Y(d.s.P(s),1.570796326794897)?(l=0>s?u:d.F.ba(3.141592653589793-u),u=a/d.F.qW(S,h),3.141592653589793>=(u%=6.283185307179586)?S=s-d.s.Mb(u,s):(l=d.F.ba(l+3.141592653589793),S=-s+d.s.Mb(u-3.141592653589793,s)),S=d.F.Rq(h,S)):d.s.Y(d.s.P(u),1.570796326794897)?(l=d.F.ba(l+d.s.Mb(a,u)*d.F.w(h,s)/(S*Math.cos(s))),S=s):(S=1.570796326794897*(a*Math.cos(u)+d.F.q(S,h,s))/d.F.Ah(S,h),1.570796326794897<d.s.P(S)&&(S=d.s.Mb(1.570796326794897,S)),S=d.F.Rq(h,S),d.s.Y(d.s.P(S),1.570796326794897)&&(d.s.Cd(u)||d.s.Y(d.s.P(u),3.141592653589793))||(a=d.F.Qw(h,s),s=d.F.Qw(h,S),1.570796316258184<d.s.P(s)&&(s=d.s.Mb(1.570796316258184,S),S=d.F.yO(h,s)),h=Math.sin(a),s=Math.sin(s),h=Math.sqrt((1+h)/(1-h)),s=Math.sqrt((1+s)/(1-s)),h=Math.log(s)-Math.log(h),l=d.F.ba(l+Math.tan(u)*h))),p!=null&&(p.u=l),f!=null&&(f.u=S)},L}()}(Y||(Y={})),function(d){d.kb=function(){function L(){}return L.Xy=function(S,h,l,s,a,u,p){d.cu.tb(S,h,l,s,a,u,null,p,null)},L.yi=function(S,h,l,s,a,u,p,f){d.cu.rf(S,h,l,s,a,u,p,f)},L.wd=function(S,h,l,s,a,u,p,f,g,b){switch(b){case 2:d.Wk.tb(S,h,l,s,a,u,p,f,g);break;case 3:d.QC.tb(S,h,l,s,a,u,p,f,g);break;case 1:d.PC.tb(S,h,l,s,a,u,p,f,g);break;default:d.cu.tb(S,h,l,s,a,u,p,f,g)}},L.oj=function(S,h,l,s,a,u,p,f,g){switch(g){case 2:d.Wk.rf(S,h,l,s,a,u,p,f);break;case 3:d.QC.rf(S,h,l,s,a,u,p,f);break;case 1:d.PC.rf(S,h,l,s,a,u,p,f);break;default:d.cu.rf(S,h,l,s,a,u,p,f)}},L}()}(Y||(Y={})),function(d){var L=function(){function h(){this.y=this.x=null}return h.construct=function(l){var s=new h;return s.x=new d.Wb,s.x.set(l.x),s.y=new d.Wb,s.y.set(l.y),s},h.VE=function(l,s){var a=new h;return a.x=new d.Wb,a.x.set(l),a.y=new d.Wb,a.y.set(s),a},h.prototype.qg=function(){return this.x.qg()&&this.y.qg()},h.prototype.value=function(){return d.h.construct(this.x.value(),this.y.value())},h}();d.vY=L;var S=function(){function h(){this.z=this.y=this.x=null}return h.construct=function(l){var s=new h;return s.x=new d.Wb,s.x.set(l.x),s.y=new d.Wb,s.y.set(l.y),s.z=new d.Wb,s.z.set(l.z),s},h.VE=function(l,s,a){var u=new h;return u.x=new d.Wb,u.x.set(l),u.y=new d.Wb,u.y.set(s),u.z=new d.Wb,u.z.set(a),u},h.prototype.qg=function(){return this.x.qg()&&this.y.qg()&&this.z.qg()},h.prototype.value=function(){return new d.Nd(this.x.value(),this.y.value(),this.z.value())},h.prototype.Qh=function(l){var s=new d.Wb,a=new d.Wb,u=new d.Wb;return s.Kl(this.x,l.x),a.Kl(this.y,l.y),u.Kl(this.z,l.z),(l=new d.Wb).dN(s,a),l.add(u),l},h.prototype.cF=function(l){var s=new h;s.x.Kl(this.y,l.z),s.y.Kl(this.z,l.x),s.z.Kl(this.x,l.y);var a=new d.Wb,u=new d.Wb,p=new d.Wb;return a.Kl(this.z,l.y),u.Kl(this.x,l.z),p.Kl(this.y,l.x),s.x.sub(a),s.y.sub(u),s.z.sub(p),s},h}();d.wY=S,d.Ox=function(){function h(){}return h.EP=function(l,s,a){var u=s.x;s=s.y,h.cl(1,l,Math.cos(u),Math.sin(u),Math.cos(s),Math.sin(s),a)},h.DP=function(l,s){var a=new d.Nd;return h.EP(l,s,a),a},h.cl=function(l,s,a,u,p,f,g){l/=Math.sqrt(1-s*f*f),g.K(l*p*a,l*p*u,l*(1-s)*f)},h.Yu=function(l,s){var a=new d.Wb,u=new d.Wb,p=new d.Wb,f=new d.Wb;a.cos(s.x),u.sin(s.x),p.cos(s.y),f.sin(s.y);var g=new d.Wb;return g.set(f),g.Ag(f),g.No(l),g.No(-1),g.kN(),g.sqrt(),(s=new d.Wb).set(1),s.jm(g),(g=new d.Wb).set(s),g.Ag(p),g.Ag(a),(a=new d.Wb).set(s),a.Ag(p),a.Ag(u),(u=new d.Wb).set(s),u.No(1-l),u.Ag(f),S.VE(g,a,u)},h.SS=function(l,s,a,u){if(Math.abs(s.x-a.x)>Math.PI||Math.abs(s.y)>.5*Math.PI||Math.abs(a.y)>.5*Math.PI||(Math.abs(s.y)==.5*Math.PI||Math.abs(a.y)==.5*Math.PI)&&s.x!=a.x)return NaN;if(u=h.cB(u,Math.min(s.x,a.x),Math.max(s.x,a.x)),!new d.Nc(s.x,a.x).contains(u))return NaN;var p=L.construct(s);if(a=L.construct(a),p=h.Yu(l,p),a=h.Yu(l,a),(a=p.cF(a)).z.qg())return s.y;var f=new d.Wb;f.set(a.x),f.jm(a.z),f.No(-1);var g=new d.Wb;g.set(a.y),g.jm(a.z),g.No(-1);var b=new d.Wb;return b.set(g),b.Ag(g),(p=new d.Wb).set(f),p.Ag(f),p.add(b),p.sqrt(),p.qg()||f.qg()&&g.qg()?s.y:(s=Math.atan2(g.value(),f.value()),s=Math.atan2(p.value()*Math.cos(s-u),1-l),u=h.DP(l,d.h.construct(u,s)),l=new d.Nd(u.x,u.y,-u.z),u=a.value().Qh(u),l=a.value().Qh(l),Math.abs(l)<Math.abs(u)&&(s=-s),s)},h.Oz=function(l,s,a,u,p){if(p[0]=NaN,p[1]=NaN,Math.abs(s.x-a.x)>Math.PI||Math.abs(s.y)>.5*Math.PI||Math.abs(a.y)>.5*Math.PI||(Math.abs(s.y)==.5*Math.PI||Math.abs(a.y)==.5*Math.PI)&&s.x!=a.x||Math.abs(u)>=.5*Math.PI||0<s.y&&0<a.y&&s.y>u&&a.y>u||0>s.y&&0>a.y&&s.y<u&&a.y<u)return 0;var f=L.construct(s),g=L.construct(a);f=h.Yu(l,f),g=h.Yu(l,g);var b=f.cF(g);if(b.z.qg())return new d.Nc(s.y,a.y).contains(u)?(p[0]=s.x,1):0;(g=new d.Wb).set(b.x),g.jm(b.z),g.No(-1),(f=new d.Wb).set(b.y),f.jm(b.z),f.No(-1),(b=new d.Wb).set(f),b.Ag(f);var x=new d.Wb;return x.set(g),x.Ag(g),x.add(b),x.sqrt(),x.qg()||g.qg()&&f.qg()?u==0?(p[0]=s.x,p[1]=a.x,2):0:(l=(1-l)*Math.tan(u)/x.value(),1<Math.abs(l)?0:(l=Math.acos(l),b=Math.atan2(f.value(),g.value()),g=Math.min(s.x,a.x),f=Math.max(s.x,a.x),a=h.cB(b-l,g,f),l=u!=0?h.cB(b+l,g,f):a,u=0,g<=a&&a<=f&&(p[u]=a,u++),l!=a&&g<=l&&l<=f&&(p[u]=l,++u==2&&Math.abs(p[0]-s.x)>Math.abs(p[1]-s.x)&&(s=p[0],p[0]=p[1],p[1]=s)),u))},h.cB=function(l,s,a){return l>a?l-=2*(s=Math.ceil((l-a)/(2*Math.PI)))*Math.PI:l<s&&(l+=2*(s=Math.ceil((s-l)/(2*Math.PI)))*Math.PI),l},h}()}(Y||(Y={})),function(d){d.XK=function(){function L(){}return L.$X=function(S,h){var l=8,s=[0,0,0,0],a=new d.h;a.L(h),a.scale(d.cb.sc(S).Hd().Ec()==9102?1:d.cb.sc(S).Hd().ai/3.141592653589793*180),-180>a.x?(a.x-=a.x%360,-180>a.x&&(a.x+=360)):180<a.x&&(a.x-=a.x%360,180<a.x&&(a.x-=360)),90<a.y&&(a.y=90),-90>a.y&&(a.y=-90);for(var u=-180,p=180,f=(S=5*l)-1,g=(h=(S+31)/32)-1;0<=g;g--)for(var b=f-32*g,x=Math.min(32,S-32*g),T=1;T<x;T+=2){var M=.5*(p+u);a.x>=M?(s[g]|=1<<b,u=M):p=M,b-=2,f-=2}for(u=-90,p=90,f=S-2,g=h-1;0<=g;g--)for(b=f-32*g,x=Math.min(32,S-32*g),T=0;T<x;T+=2)M=.5*(p+u),a.y>=M?(s[g]|=1<<b,u=M):p=M,b-=2,f-=2;return L.$P(s,l,l)},L.$P=function(S,h,l){for(var s=[],a=0;a<h;a++)s[a]="";for(var u=a=0,p=0;p<h;p++){var f=S[a]>>u&31;if(31<(u+=5)){var g=37-u;f&=(1<<g)-1,u-=32,f|=(S[++a]&(1<<u)-1)<<g}s[h-1-p]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[f]}if(l>h)for(p=0;p<l-h;p++)s.push("0");else l<h&&(s.length=l);return s.join("")},L}()}(Y||(Y={})),function(d){var L={gcstol:[0,2e-9,1,2241706620489156e-24,2,2313672246530541e-24,3,898240164660333e-23,4,8982433838020134e-24,5,8982439417325895e-24,6,8982466029667677e-24,7,8982476760268133e-24,8,8982492642167149e-24,9,898251968292634e-23,10,898253685210448e-23,11,8982546725256576e-24,12,8982557456049832e-24,13,898257333682596e-23,14,8982575482995276e-24,15,8982578488197342e-24,16,8982579775336987e-24,17,89825840676828e-22,18,8982599090925448e-24,19,8982605529473397e-24,20,8982609220517402e-24,21,8982611968030573e-24,22,8982616260407152e-24,23,8982620552787834e-24,24,8982633429954492e-24,25,8982637722351582e-24,26,898264416095491e-23,27,8982646307158072e-24,28,8982654891980968e-24,29,8982667769246082e-24,30,8982674207892485e-24,31,8982680646548117e-24,32,8982682792768713e-24,33,8982685798042582e-24,34,8982689231436652e-24,35,898269137766135e-23,36,898269266624163e-23,37,8982705114087017e-24,38,8982706830791106e-24,39,8982711958374661e-24,40,8982712839964735e-24,41,8982717991496125e-24,42,8982721424914803e-24,43,8982723571154887e-24,44,8982727863638127e-24,45,8982730868942154e-24,46,8982734302370678e-24,47,8982745033612112e-24,48,8982751472369276e-24,49,8982755764879183e-24,50,8982762203651733e-24,51,8982764776628385e-24,52,8982766496171896e-24,53,898277722749025e-23,54,898278152002477e-23,55,898279933943848e-23,56,89829143024805e-22,57,8982922161948598e-24,58,898292327314211e-23,59,8982925667349601e-24,60,8982932222965576e-24,61,8982961298941316e-24,62,8982965524049989e-24,63,8982994818246099e-24,64,8982994895706967e-24,65,898299489597736e-23,66,8983000733443498e-24,67,8983055097289157e-24,68,8983064111047368e-24,69,8983111996941178e-24,70,8983120447446023e-24,71,898312748954554e-23,72,8983134531656096e-24,73,8983141573777694e-24,74,8983148615910332e-24,75,8983152841195215e-24,76,8983153545409748e-24,77,8983153827095593e-24,78,898315396793852e-23,79,8983154249624393e-24,80,8983155658054012e-24,81,8983960794340072e-24,82,8984061344391998e-24,83,8984072829255685e-24,84,8984194981201908e-24,85,8984275233099427e-24,86,8984326127007554e-24,87,8984330099816539e-24,88,898433275258421e-23,89,8984333047023206e-24,90,8984333885258723e-24,91,8984337959508212e-24,92,8984365176209457e-24,93,8984727360418079e-24,94,8984901041679577e-24,95,898542662091587e-23,96,898610024130669e-23,97,8992894229037531e-24,98,8993203677616635e-24,99,8993206178094346e-24,100,8993216059187305e-24,101,899322029394808e-23,102,8994627867045891e-24,103,9467559984315793e-24,104,946881168618118e-23,105,9980888154931644e-24,106,9981105353606775e-24,107,9983807356573187e-24,108,1687060485811522e-23,109,1688447560354875e-23,110,2176606011487185e-23,111,2225078816042032e-23,112,2348476432064694e-23,113,2348765250187846e-23,114,2378108974103778e-23,115,314559636297708e-22,116,3297788621680806e-23,117,3667892343788279e-23,118,4235973644320739e-23,119,4794625900676345e-23,120,7262742998235812e-23,121,7499447580246377e-23,122,7525056410964318e-23,123,7979913581209237e-23,124,9662020153976783e-23,125,9799175562353741e-23,126,9897353517547472e-23,127,102313891987647e-21,128,1081460541960784e-22,129,121905913857622e-21,130,2246893314238523e-22,131,2297344808062643e-22,132,242984645941825e-21,133,2754604784282804e-22,134,2884548130346993e-22,135,3370339971357784e-22,136,4307953346848296e-22,137,5208707228462029e-22,138,5509209568565608e-22,139,6452227422644406e-22,140,6740679942715567e-22,141,6861770001566745e-22,142,7252630318111686e-22,143,7441010326374328e-22,144,7742672907173287e-22,145,9629542775307953e-22,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6666666666666667e-24,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},S={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};d.wr=function(){function h(){}return h.Sy=function(l){h.xp===!1&&h.yt();var s=h.FQ(l);if(s==-1){var a=h.Bx(l);a!=l&&(s=h.Sy(a))}return s==-1&&(a=h.FK(l))!=l&&(s=h.Sy(a)),s},h.FQ=function(l){return h.Fw[l]!==void 0?h.Fw[l]:-1},h.CQ=function(l){h.xp===!1&&h.yt();var s=h.nF(l);if(s==1e38){var a=h.Bx(l);if(a!=l&&(s=h.nF(a)),s==1e38)return 1e-10}return s},h.ZS=function(l){if(h.Is[l]!==void 0)return!0;var s=h.Bx(l);return s!=l&&h.Is[s]!==void 0},h.aT=function(l){if(h.xo[l]!==void 0)return!0;var s=h.Bx(l);return s!=l&&h.xo[s]!==void 0},h.nF=function(l){return h.xp===!1&&h.yt(),h.Is[l]!==void 0?h.Is[l]:h.xo[l]!==void 0?h.xo[l]:1e38},h.FK=function(l){return h.xp===!1&&h.yt(),h.WA[l]!==void 0?h.WA[l]:l},h.Bx=function(l){return h.xp===!1&&h.yt(),h.XA[l]!==void 0?h.XA[l]:l},h.yt=function(){for(var l,s=L,a=0;a<s.pcsid.length;a+=2)h.xo[s.pcsid[a]]=s.pcstol[2*s.pcsid[a+1]+1];for(a=0;a<s.pcsidc.length;a+=1)for(var u=(l=s.pcsidc[a])[0];u<=l[1];u++)h.xo[u]=s.pcstol[2*l[2]+1];for(a=0;a<s.gcsid.length;a+=2)h.Is[s.gcsid[a]]=s.gcstol[2*s.gcsid[a+1]+1];for(a=0;a<s.gcsidc.length;a+=1)for(u=(l=s.gcsidc[a])[0];u<=l[1];u++)h.xo[u]=s.gcstol[2*l[2]+1];for(a=0;a<S.c.length;a+=1)for(u=(l=S.c[a])[0];u<=l[1];u++)h.Fw[u]=l[2];for(a=0;a<S.nc.length;a+=2)h.Fw[S.nc[a]]=S.nc[a+1];for(S=null,a=0;a<s.newtoold.length;a+=2)h.WA[s.newtoold[a+1]]=s.newtoold[a],h.XA[s.newtoold[a]]=s.newtoold[a+1];L=null,h.xp=!0},h.xp=!1,h.Is=[],h.xo=[],h.WA=[],h.XA=[],h.Fw=[],h}()}(Y||(Y={})),function(d){function L(h){return h.length===0?'""':h[0]=='"'||h[0]=="."||"0"<=h[0]&&"9">=h[0]?h:'"'+h.trim()+'"'}var S=[];d.XC=function(){function h(){}return h.EQ=function(l){try{for(var s=0;s<S.length;s++)if(S[s].wkttext===l)return S[s].unit;for(var a,u=s="",p=!1,f=0;f<l.length;f++){var g=l[f];p===!0?g=='"'?l[f+1]=='"'?s+=g:p=p=!1:s+=g:/[\s]/.test(g)||(g==","?(u=s!==""?u+(L(s)+","):u+",",s=""):g==")"||g=="]"?(u=s!==""?u+(L(s)+"]}"):u+"]}",s=""):g=="("||g=="["?(u+='{ "entity": "'+s.toUpperCase().trim()+'", "values":[',s=""):g=='"'?(p=!0,s=""):s+=g)}a=JSON.parse(u);var b=h.mF(a);if(b===null)return null;for(a=null,g=0;g<b.values.length;g++)if(typeof b.values[g]=="object"&&(b.values[g].entity==="UNIT"||b.values[g].entity==="ANGLEUNIT"||b.values[g].entity==="LENGTHUNIT")){a=b.values[g];break}if(a===null)return null;var x=d.Tc.ZO(b.entity==="GEOGCS"||b.entity==="GEOGCRS"?1:0,a.values[1],a.values[2]);return S.push({wkttext:l,unit:x}),10<S.length&&S.shift(),x}catch{return null}},h.mF=function(l){if(l===null)return null;switch(l.entity){case"GEOGCRS":case"GEOGCS":case"PROJCRS":case"PROJCS":return l}for(var s=[],a=0;a<l.values.length;a++)if(typeof l.values[a]=="object"&&l.values[a].entity!==void 0)switch(l.values[a].entity){case"GEOGCRS":case"GEOGCS":case"PROJCRS":case"PROJCS":return l.values[a];default:s.push(l.values[a])}for(l=0;l<s.length;l++)if((a=h.mF(s[l]))!==null)return a;return null},h.DQ=function(l){var s=-1;if(l!=null&&0<l.length){var a=l.search(/PROJCR?S/);if(0<=a){var u=0;if(0<=(a=l.lastIndexOf("UNIT"))&&0<(a=l.indexOf(",",a+4))){a++;var p=l.indexOf("]",a+1);if(0<p)try{u=parseFloat(l.substring(a,p))}catch{u=0}}0<u&&(s=.001/u)}else if(0<=(a=l.search(/GEOGCR?S/))){var f=0;if(u=0,(a=l.indexOf("SPHEROID",a+6))===-1&&(a=l.indexOf("ELLIPSOID",a+7)),0<a&&0<(a=l.indexOf(",",a+8))){if(a++,0<(p=l.indexOf(",",a+1)))try{f=parseFloat(l.substring(a,p))}catch{f=0}if(0<f&&((a=l.lastIndexOf("ANGLEUNIT",p+1))===-1&&(a=l.lastIndexOf("UNIT",p+1)),0<=a&&0<(a=l.indexOf(",",a+4))&&(a++,0<(p=l.indexOf("]",a+1)))))try{u=parseFloat(l.substring(a,p))}catch{u=0}}0<f&&0<u&&(s=.001/(f*u))}}return s},h}()}(Y||(Y={})),function(d){var L;(L=d.eL||(d.eL={}))[L.NONE=0]="NONE",L[L.LINEAR=1]="LINEAR",L[L.ANGULAR=2]="ANGULAR",function(h){h[h.enumFloat=0]="enumFloat",h[h.enumDouble=1]="enumDouble",h[h.enumInt32=2]="enumInt32",h[h.enumInt64=3]="enumInt64",h[h.enumInt8=4]="enumInt8",h[h.enumInt16=5]="enumInt16"}(d.QL||(d.QL={})),function(h){h[h.POSITION=0]="POSITION",h[h.Z=1]="Z",h[h.M=2]="M",h[h.ID=3]="ID",h[h.NORMAL=4]="NORMAL",h[h.TEXTURE1D=5]="TEXTURE1D",h[h.TEXTURE2D=6]="TEXTURE2D",h[h.TEXTURE3D=7]="TEXTURE3D",h[h.ID2=8]="ID2",h[h.MAXSEMANTICS=10]="MAXSEMANTICS"}(d.Ih||(d.Ih={}));var S=function(){function h(l,s){if(this.Vs=this.Ae=null,this.Oq=this.Aa=0,this.uh=this.bg=null,this.wl=0,s!==void 0){for(this.Aa=s.Aa,this.Oq=s.Oq,this.bg=s.bg.slice(0),this.uh=s.uh.slice(0),this.wl=s.wl,this.Vs=[],l=s=0;l<this.Aa;l++)this.Vs[l]=s,s+=h.Va(this.bg[l]);for(this.Oq=s,this.Ae=[],l=0;l<this.Aa;l++){s=h.Va(this.kd(l));for(var a=h.se(this.kd(l)),u=0;u<s;u++)this.Ae[this.Vs[l]+u]=a}}else this.Oq=this.Aa=0}return h.prototype.kd=function(l){if(0>l||l>this.Aa)throw d.i.N();return this.bg[l]},h.prototype.Pf=function(l){return this.uh[l]},h.lz=function(l){return h.JM[l]},h.Tp=function(l){return h.SM[l]},h.Va=function(l){return h.rM[l]},h.prototype.hasAttribute=function(l){return 0<=this.uh[l]},h.prototype.iG=function(){return this.hasAttribute(1)},h.se=function(l){return h.eD[l]},h.prototype.LR=function(l){return this.Vs[l]},h.DG=function(l,s){return h.eD[l]===s},h.prototype.Nb=function(l){return this===l},h.prototype.An=function(){for(var l=d.O.Th(this.bg[0]),s=1;s<this.Aa;s++)l=d.O.Th(this.bg[s],l);return l},h.prototype.$j=function(l){return this.Vs[l]},h.prototype.cc=function(){return this.wl},h.prototype.Ed=function(l){return this.bg[l]},h.eD=[0,0,NaN,0,0,0,0,0,0],h.JM=[1,1,1,0,2,1,1,1,0],h.SM=[1,1,1,2,0,0,0,0,2],h.rM=[2,1,1,1,3,1,2,3,2],h}();d.ra=S}(Y||(Y={})),function(d){function L(p,f,g){var b=f-(p=new u(p)).e,x=p.c;for(x.length>++f&&S(p,b,u.eu),x[0]?g?b=f:(x=p.c,b=p.e+b+1):++b;x.length<b;x.push(0));return b=p.e,g===1||g&&(f<=b||b<=l)?(0>p.Bd&&x[0]?"-":"")+(1<x.length?x[0]+"."+x.join("").slice(1):x[0])+(0>b?"e":"e+")+b:p.toString()}function S(p,f,g,b){var x=p.c,T=p.e+f+1;if(g===1?b=5<=x[T]:g===2?b=5<x[T]||x[T]==5&&(b||0>T||x[T+1]!==void 0||1&x[T-1]):g===3?b=b||x[T]!==void 0||0>T:(b=!1,g!==0&&h("!Big.RM!")),1>T||!x[0])b?(p.e=-f,p.c=[1]):p.c=[p.e=0];else{if(x.length=T--,b)for(;9<++x[T];)x[T]=0,T--||(++p.e,x.unshift(1));for(T=x.length;!x[--T];x.pop());}return p}function h(p){throw(p=Error(p)).name="BigError",p}var l=-7,s=21,a=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,u=function(){function p(f){if(f instanceof p)this.Bd=f.Bd,this.e=f.e,this.c=f.c.slice();else{var g,b,x;for(f===0&&0>1/f?f="-0":a.test(f+="")||h(NaN),this.Bd=f.charAt(0)=="-"?(f=f.slice(1),-1):1,-1<(g=f.indexOf("."))&&(f=f.replace(".","")),0<(b=f.search(/e/i))?(0>g&&(g=b),g+=+f.slice(b+1),f=f.substring(0,b)):0>g&&(g=f.length),b=0;f.charAt(b)=="0";b++);if(b==(x=f.length))this.c=[this.e=0];else{for(;f.charAt(--x)=="0";);for(this.e=g-b-1,this.c=[],g=0;b<=x;this.c[g++]=+f.charAt(b++));}}}return p.prototype.abs=function(){var f=new p(this);return f.Bd=1,f},p.prototype.cmp=function(f){var g=this.c,b=(f=new p(f)).c,x=this.Bd,T=f.Bd,M=this.e,C=f.e;if(!g[0]||!b[0])return g[0]?x:b[0]?-T:0;if(x!=T)return x;if(f=0>x,M!=C)return M>(C^f)?1:-1;for(x=-1,T=(M=g.length)<(C=b.length)?M:C;++x<T;)if(g[x]!=b[x])return g[x]>(b[x]^f)?1:-1;return M==C?0:M>(C^f)?1:-1},p.prototype.jm=function(f){var g=this.c,b=(f=new p(f)).c,x=this.Bd==f.Bd?1:-1,T=p.rr;if((T!==~~T||0>T||1e6<T)&&h("!Big.DP!"),!g[0]||!b[0])return g[0]==b[0]&&h(NaN),b[0]||h(x/0),new p(0*x);var M,C,O=b.slice(),F=M=b.length,P=g.length,G=g.slice(0,M),q=G.length,V=f,Z=V.c=[],X=0,te=T+(V.e=this.e-f.e)+1;for(V.Bd=x,x=0>te?0:te,O.unshift(0);q++<M;G.push(0));do{for(C=0;10>C;C++){if(M!=(q=G.length))var oe=M>q?1:-1;else{var me=-1;for(oe=0;++me<M;)if(b[me]!=G[me]){oe=b[me]>G[me]?1:-1;break}}if(!(0>oe))break;for(f=q==M?b:O;q;){if(G[--q]<f[q]){for(me=q;me&&!G[--me];G[me]=9);--G[me],G[q]+=10}G[q]-=f[q]}for(;!G[0];G.shift());}Z[X++]=oe?C:++C,G[0]&&oe?G[q]=g[F]||0:G=[g[F]]}while((F++<P||G[0]!==void 0)&&x--);return Z[0]||X==1||(Z.shift(),V.e--),X>te&&S(V,T,p.eu,G[0]!==void 0),V},p.prototype.fS=function(){return 0<this.cmp(0)},p.prototype.nT=function(){return 0>this.cmp(0)},p.prototype.jt=function(f){var g,b=this.Bd,x=(f=new p(f)).Bd;if(b!=x)return f.Bd=-x,this.tI(f);var T=this.c.slice(),M=this.e,C=f.c,O=f.e;if(!T[0]||!C[0])return C[0]?(f.Bd=-x,f):new p(T[0]?this:0);if(b=M-O){for((g=0>b)?(b=-b,M=T):(O=M,M=C),M.reverse(),x=b;x--;M.push(0));M.reverse()}else for(M=((g=T.length<C.length)?T:C).length,b=x=0;x<M;x++)if(T[x]!=C[x]){g=T[x]<C[x];break}if(g&&(M=T,T=C,C=M,f.Bd=-f.Bd),0<(x=(M=C.length)-(g=T.length)))for(;x--;T[g++]=0);for(x=g;M>b;){if(T[--M]<C[M]){for(g=M;g&&!T[--g];T[g]=9);--T[g],T[M]+=10}T[M]-=C[M]}for(;T[--x]==0;T.pop());for(;T[0]==0;)T.shift(),--O;return T[0]||(f.Bd=1,T=[O=0]),f.c=T,f.e=O,f},p.prototype.tI=function(f){var g=this.Bd,b=(f=new p(f)).Bd;if(g!=b)return f.Bd=-b,this.jt(f);b=this.e;var x=this.c,T=f.e,M=f.c;if(!x[0]||!M[0])return M[0]?f:new p(x[0]?this:0*g);if(x=x.slice(),g=b-T){for(0<g?(T=b,b=M):(g=-g,b=x),b.reverse();g--;b.push(0));b.reverse()}for(0>x.length-M.length&&(b=M,M=x,x=b),g=M.length,b=0;g;)b=(x[--g]=x[g]+M[g]+b)/10|0,x[g]%=10;for(b&&(x.unshift(b),++T),g=x.length;x[--g]==0;x.pop());return f.c=x,f.e=T,f},p.prototype.pow=function(f){var g=this,b=new p(1),x=b,T=0>f;for((f!==~~f||-1e6>f||1e6<f)&&h("!pow!"),f=T?-f:f;1&f&&(x=x.lr(g)),f>>=1;)g=g.lr(g);return T?b.jm(x):x},p.prototype.round=function(f,g){var b=this;return f==null?f=0:(f!==~~f||0>f||1e6<f)&&h("!round!"),S(b=new p(b),f,g??p.eu),b},p.prototype.sqrt=function(){var f=this.c,g=this.Bd,b=this.e,x=new p("0.5");if(!f[0])return new p(this);0>g&&h(NaN),(g=Math.sqrt(this.toString()))==0||g==1/0?((g=f.join("")).length+b&1||(g+="0"),(f=new p(Math.sqrt(g).toString())).e=((b+1)/2|0)-(0>b||1&b)):f=new p(g.toString()),g=f.e+(p.rr+=4);do b=f,f=x.lr(b.tI(this.jm(b)));while(b.c.slice(0,g).join("")!==f.c.slice(0,g).join(""));return S(f,p.rr-=4,p.eu),f},p.prototype.lr=function(f){var g=this.c,b=(f=new p(f)).c,x=g.length,T=b.length,M=this.e,C=f.e;if(f.Bd=this.Bd==f.Bd?1:-1,!g[0]||!b[0])return new p(0*f.Bd);if(f.e=M+C,x<T){var O=g;g=b,b=O,C=x,x=T,T=C}for(O=Array(C=x+T);C--;O[C]=0);for(M=T;M--;){for(T=0,C=x+M;C>M;)T=O[C]+b[M]*g[C-M-1]+T,O[C--]=T%10,T=T/10|0;O[C]=(O[C]+T)%10}for(T&&++f.e,O[0]||O.shift(),M=O.length;!O[--M];O.pop());return f.c=O,f},p.prototype.toString=function(){var f=this.e,g=this.c.join(""),b=g.length;if(f<=l||f>=s)g=g.charAt(0)+(1<b?"."+g.slice(1):"")+(0>f?"e":"e+")+f;else if(0>f){for(;++f;g="0"+g);g="0."+g}else if(0<f)if(++f>b)for(f-=b;f--;g+="0");else f<b&&(g=g.slice(0,f)+"."+g.slice(f));else 1<b&&(g=g.charAt(0)+"."+g.slice(1));return 0>this.Bd&&this.c[0]?"-"+g:g},p.prototype.toExponential=function(f){return f==null?f=this.c.length-1:(f!==~~f||0>f||1e6<f)&&h("!toExp!"),L(this,f,1)},p.prototype.toFixed=function(f){var g=l,b=s;if(l=-(s=1/0),f==null)var x=this.toString();else f===~~f&&0<=f&&1e6>=f&&(x=L(this,this.e+f),0>this.Bd&&this.c[0]&&0>x.indexOf("-")&&(x="-"+x));return l=g,s=b,x||h("!toFix!"),x},p.prototype.toPrecision=function(f){return f==null?this.toString():((f!==~~f||1>f||1e6<f)&&h("!toPre!"),L(this,f-1,2))},p.rr=20,p.eu=1,p}();d.hp=u}(Y||(Y={})),function(d){var L=function(){function S(h){this.lf=h}return S.prototype.nr=function(h,l,s){var a=new d.h,u=new d.h,p=this.lf;s.Vd(h,l,function(f,g){return p.tc(2*f,a),p.tc(2*g,u),a.compare(u)})},S.prototype.$p=function(h){return this.lf.read(2*h+1)},S}();d.pi=function(){function S(){}return S.aq=function(h){if(h.B())return!1;var l=h.getType();return l==1736?h.Ke()!=0:l==1607?(l=[!1],S.sE(h,!0,l),l[0]):!(l!=197&&(!d.aa.yd(l)||h.BG()))},S.gm=function(h){var l=h.getType();if(l==1736)return l=new d.Ta(h.description),h.B()||h.dD(l),l;if(l==1607)return S.sE(h,!1,null);if(l==197)return l=new d.Ta(h.description),h.B()||l.ad(h,!1),l;if(d.aa.yd(l)){if(l=new d.de(h.description),!h.B()&&!h.BG()){var s=new d.Sa;h.To(s),l.add(s),h.Po(s),l.add(s)}return l}if(d.aa.Rn(l))return null;throw d.i.N()},S.sE=function(h,l,s){s!=null&&(s[0]=!1);var a=null;if(l||(a=new d.de(h.description)),!h.B()){var u=new d.ia(0);u.Jb(2*h.da());for(var p=0,f=h.da();p<f;p++)if(0<h.Ja(p)&&!h.Nn(p)){var g=h.Ba(p);u.add(g),g=h.Vc(p)-1,u.add(g)}if(0<u.size){f=new d.Xt,p=h.ub(0),f.sort(u,0,u.size,new L(p)),f=new d.h,p.tc(2*u.get(0),f),g=0;for(var b=1,x=new d.Sa,T=new d.h,M=1,C=u.size;M<C;M++)if(p.tc(2*u.get(M),T),T.qb(f))u.get(g)>u.get(M)?(u.set(g,2147483647),g=M):u.set(M,2147483647),b++;else{if(1&b){if(l)return s!=null&&(s[0]=!0),null}else u.set(g,2147483647);f.L(T),g=M,b=1}if(1&b){if(l)return s!=null&&(s[0]=!0),null}else u.set(g,2147483647);if(!l)for(u.Vd(0,u.size,function(O,F){return O-F}),M=0,C=u.size;M<C&&u.get(M)!=2147483647;M++)h.ve(u.get(M),x),a.add(x)}}return l?null:a},S}()}(Y||(Y={})),function(d){var L=function(){function S(){this.yf=new d.ia(0),this.ys=new d.ia(0),this.EH=1,this.Es=NaN}return S.prototype.sort=function(h,l,s,a){if(32>s-l)a.nr(l,s,h);else{var u=!0;try{for(var p=1/0,f=-1/0,g=l;g<s;g++){var b=a.$p(h.get(g));b<p&&(p=b),b>f&&(f=b)}if(this.reset(s-l,p,f,s-l)){for(g=l;g<s;g++){var x=h.get(g);b=a.$p(x);var T=this.zF(b);this.yf.set(T,this.yf.get(T)+1),this.ys.write(g-l,x)}var M=this.yf.get(0);this.yf.set(0,0),g=1;for(var C=this.yf.size;g<C;g++){var O=this.yf.get(g);this.yf.set(g,M),M+=O}for(g=l;g<s;g++){x=this.ys.read(g-l),b=a.$p(x),T=this.zF(b);var F=this.yf.get(T);h.set(F+l,x),this.yf.set(T,F+1)}u=!1}}catch{this.yf.resize(0),this.ys.resize(0)}if(u)a.nr(l,s,h);else{for(g=s=0,C=this.yf.size;g<C;g++)u=s,(s=this.yf.get(g))>u&&a.nr(l+u,l+s,h);100<this.yf.size&&(this.yf.resize(0),this.ys.resize(0))}}},S.prototype.reset=function(h,l,s,a){return!(2>h||s==l)&&(h=Math.min(S.hL,h),this.yf.Jb(h),this.yf.resize(h),this.yf.Wj(0,0,this.yf.size),this.EH=l,this.ys.resize(a),this.Es=(s-l)/(h-1),!0)},S.prototype.zF=function(h){return d.O.truncate((h-this.EH)/this.Es)},S.hL=65536,S}();d.Xt=L}(Y||(Y={})),function(d){var L,S;(S=L||(L={}))[S.enum_line=1]="enum_line",S[S.enum_arc=2]="enum_arc",S[S.enum_dummy=4]="enum_dummy",S[S.enum_concave_dip=8]="enum_concave_dip",S[S.enum_connection=3]="enum_connection";var h=function(){function p(){}return p.Qu=function(f,g,b,x,T,M){var C=new p;return C.Im=new d.h,C.Vm=new d.h,C.aw=new d.h,C.Im.L(f),C.Vm.L(g),C.aw.L(b),C.Co=x,C.qh=T,C.sh=M,C},p.construct=function(f,g,b,x){var T=new p;return T.Im=new d.h,T.Vm=new d.h,T.aw=new d.h,T.Im.L(f),T.Vm.L(g),T.aw.Rc(),T.Co=4,T.qh=b,T.sh=x,T},p}(),l=function(){function p(f,g,b,x,T,M){this.Yv=null,this.ya=0,this.EA=f,this.bI=this.$H=0,this.Ka=g,this.Mj=b,this.vk=x,this.Dq=T,this.Ub=M}return p.prototype.next=function(){for(var f=new d.Sa;;){if(this.ya==this.EA.I())return null;if(this.EA.ve(this.ya,f),this.ya++,!f.B())break}var g=!1;if(this.Yv==null&&(this.$H=f.Lg(),this.bI=f.ih(),this.Yv=u.buffer(f,this.Ka,this.Mj,this.vk,this.Dq,this.Ub),g=!0),this.ya<this.EA.I()){var b=new d.Da;this.Yv.copyTo(b)}else b=this.Yv;if(!g){g=new d.Dd;var x=f.Lg()-this.$H;f=f.ih()-this.bI,g.gg(x,f),b.Oc(g)}return b},p.prototype.La=function(){return 0},p.prototype.qe=function(){},p}(),s=function(){function p(f,g){this.Wa=f,this.ya=0,this.oq=g}return p.prototype.next=function(){var f=this.Wa.X;if(this.ya<f.da()){var g=this.ya;if(this.ya++,!f.Nn(g))for(var b=f.Na(f.Vc(g)-1);this.ya<f.da();){var x=f.Na(f.Ba(this.ya));if(f.Nn(this.ya)||x!=b)break;b=f.Na(f.Vc(this.ya)-1),this.ya++}if(this.ya-g==1)return this.Wa.kE(this.Wa.X,g,this.oq);for((b=new d.Ta(this.Wa.X.description)).addPath(this.Wa.X,g,!0),g+=1;g<this.ya;g++)b.Dr(this.Wa.X,g,0,f.rv(g),!1);return this.Wa.kE(b,0,this.oq)}return null},p.prototype.La=function(){return 0},p.prototype.qe=function(){},p}(),a=function(){function p(f){this.Wa=f,this.ya=0}return p.prototype.next=function(){var f=this.Wa.X;if(this.ya<f.da()){var g=this.ya;for(f.Ir(this.ya),this.ya++;this.ya<f.da()&&!(0<f.Ir(this.ya));)this.ya++;return g==0&&this.ya==f.da()?this.Wa.py(f,0,f.da()):this.Wa.py(f,g,this.ya)}return null},p.prototype.La=function(){return 0},p.prototype.qe=function(){},p}(),u=function(){function p(f){this.Ks=this.lw=this.Ls=this.Id=null,this.Zd=[],this.Ub=f,this.rb=this.Kv=this.JT=this.Ka=this.tA=this.ct=this.qa=0,this.oA=this.vk=-1,this.oq=!0}return p.buffer=function(f,g,b,x,T,M){if(f==null||0>x)throw d.i.N();if(f.B())return new d.Da(f.description);var C=new d.l;return f.xc(C),0<g&&C.W(g,g),(M=new p(M)).Mj=b,M.X=f,M.qa=d.ta.Wd(b,C,!0),M.ct=d.ta.Wd(null,C,!0),M.Ka=g,M.JT=f.getType(),0>=T&&(T=96),M.rb=Math.abs(M.Ka),M.Kv=M.rb!=0?1/M.rb:0,isNaN(x)||x==0?x=1e-5*M.rb:x>.5*M.rb&&(x=.5*M.rb),12>T&&(T=12),(f=Math.abs(g)*(1-Math.cos(Math.PI/T)))>x?x=f:(f=Math.PI/Math.acos(1-x/Math.abs(g)))<T-1&&12>(T=d.O.truncate(f))&&(T=12,x=Math.abs(g)*(1-Math.cos(Math.PI/T))),M.vk=x,M.Dq=T,M.tA=Math.min(M.ct,.25*x),M.lE()},p.prototype.cv=function(){if(this.Id==null)this.Id=[];else if(this.Id.length!==0)return;var f=this.qE();f=d.O.truncate((f+3)/4);var g=.5*Math.PI/f;this.oA=g;for(var b=0;b<4*f;b++)this.Id.push(null);var x=Math.cos(g);g=Math.sin(g);var T=d.h.construct(0,1);for(b=0;b<f;b++)this.Id[b+0*f]=d.h.construct(T.y,-T.x),this.Id[b+1*f]=d.h.construct(-T.x,-T.y),this.Id[b+2*f]=d.h.construct(-T.y,T.x),this.Id[b+3*f]=T,(T=d.h.construct(T.x,T.y)).Bt(x,g)},p.prototype.lE=function(){var f=this.X.getType();if(d.aa.yd(f))return(f=new d.Ta(this.X.description)).oc(this.X,!0),this.X=f,this.lE();if(this.Ka<=this.qa){if(!d.aa.US(f))return new d.Da(this.X.description);if(0>=this.Ka&&(f=new d.l,this.X.A(f),f.R()<=2*-this.Ka||f.ca()<=2*this.Ka))return new d.Da(this.X.description)}switch(this.X.getType()){case 33:return this.PN();case 550:return this.ON();case 1607:return this.RN();case 1736:return this.QN();case 197:return this.LN();default:throw d.i.Qa()}},p.prototype.RN=function(){if(this.EG(this.X)){var f=new d.Sa;this.X.ve(0,f);var g=new d.l;return this.X.A(g),f.Cb(g.sf()),this.Gu(f)}return this.X=this.WV(this.X),f=new s(this,this.oq),d.Gh.local().V(f,this.Mj,this.Ub).next()},p.prototype.QN=function(){if(this.Ka==0)return this.X;var f=d.Yl.local();if(this.cv(),this.X=f.V(this.X,null,!1,this.Ub),0>this.Ka){var g=this.X;return g=this.py(g,0,g.da()),f.V(g,this.Mj,!1,this.Ub)}return this.EG(this.X)?(f=new d.Sa,this.X.ve(0,f),g=new d.l,this.X.A(g),f.Cb(g.sf()),this.Gu(f)):(f=new a(this),d.Gh.local().V(f,this.Mj,this.Ub).next())},p.prototype.py=function(f,g,b){for(var x=new d.Da(f.description);g<b;g++)if(!(1>f.Ja(g))){var T=f.Ir(g),M=new d.l;if(f.Rj(g,M),0<this.Ka){if(0<T)if(this.FG(f,g))T=new d.Sa,f.ve(f.Ba(g),T),T.Cb(M.sf()),this.yu(x,T);else{var C=T=new d.Ta(f.description);C=d.Zt.JG(this.X,g)||this.zn(this.X,g,C,!0,1)==2?this.jE(f,g):this.yn(T),x.add(C,!1)}else if(!(M.R()+this.qa<=2*this.rb||M.ca()+this.qa<=2*this.rb||(C=T=new d.Ta(f.description),this.zn(this.X,g,C,!0,1),T.B()))){var O=new d.l;for(O.K(M),O.W(this.rb,this.rb),C.tp(O),M=1,T=(C=this.yn(T)).da();M<T;M++)x.addPath(C,M,!0)}}else if(0<T){if(!(M.R()+this.qa<=2*this.rb||M.ca()+this.qa<=2*this.rb||(C=T=new d.Ta(f.description),this.zn(this.X,g,C,!0,-1),T.B())))for(O=new d.l,C.xc(O),O.W(this.rb,this.rb),C.tp(O),M=1,T=(C=this.yn(T)).da();M<T;M++)x.addPath(C,M,!0)}else for(C=T=new d.Ta(f.description),this.zn(this.X,g,C,!0,-1),M=0,T=(C=this.yn(T)).da();M<T;M++)x.addPath(C,M,!0)}if(0<this.Ka)return 1<x.da()?x=this.yn(x):p.kx(x);if(f=new d.l,x.xc(f),x.B())return p.kx(x);for(f.W(this.rb,this.rb),x.tp(f),x=this.yn(x),f=new d.Da(x.description),M=1,T=x.da();M<T;M++)f.addPath(x,M,!1);return p.kx(f)},p.prototype.PN=function(){return this.Gu(this.X)},p.prototype.Gu=function(f){var g=new d.Da(this.X.description);return this.yu(g,f),this.sX(g)},p.prototype.ON=function(){var f=new l(this.X,this.Ka,this.Mj,this.vk,this.Dq,this.Ub);return d.Gh.local().V(f,this.Mj,this.Ub).next()},p.prototype.LN=function(){var f=new d.Da(this.X.description);if(0>=this.Ka){if(this.Ka==0)f.ad(this.X,!1);else{var g=new d.Fh;this.X.bn(g),g.W(this.Ka,this.Ka),f.ad(g,!1)}return f}return f.ad(this.X,!1),this.X=f,this.jE(f,0)},p.prototype.jE=function(f,g){this.cv();var b=new d.Da(f.description),x=new d.h,T=new d.h,M=new d.h,C=new d.h,O=new d.h,F=new d.h,P=new d.h,G=new d.h,q=f.Ja(g),V=f.Ba(g),Z=0;for(g=f.Ja(g);Z<g;Z++){if(f.D(V+Z,T),f.D(V+(Z+1)%q,C),f.D(V+(Z+2)%q,F),P.uc(C,T),P.length()==0||(P.Hv(),P.normalize(),P.scale(this.rb),x.add(P,T),M.add(P,C),Z==0?b.Lt(x):b.Ci(x),b.Ci(M),G.uc(F,C),G.length()==0))throw d.i.Qa();G.Hv(),G.normalize(),G.scale(this.rb),O.add(G,C),this.GD(b,C,M,O,!1)}return p.kx(b)},p.prototype.kE=function(f,g,b){if(this.cv(),1>f.Ja(g))return null;if(this.FG(f,g)&&0<this.Ka){b=new d.Sa,f.ve(f.Ba(g),b);var x=new d.l;return f.Rj(g,x),b.Cb(x.sf()),this.Gu(b)}if(x=new d.Ta(f.description),f.Nn(g))this.zn(f,g,x,b,1),this.zn(f,g,x,b,-1);else{var T=new d.Ta(f.description);T.addPath(f,g,!1),T.Dr(f,g,0,f.rv(g),!1),this.zn(T,0,x,b,1)}return this.yn(x)},p.prototype.Xq=function(){if(this.Ys++,this.Ys%1024==0&&this.Ub!=null&&!this.Ub.progress(-1,-1))throw d.i.fu("user_canceled")},p.prototype.yn=function(f){return d.Fg.Mk(f,this.ct,!0,!0,this.Ub)},p.prototype.qE=function(){if(this.vk==0)return this.Dq;var f=1-this.vk*Math.abs(this.Kv);return 4>(f=-1>f?4:2*Math.PI/Math.acos(f)+.5)?f=4:f>this.Dq&&(f=this.Dq),d.O.truncate(f)},p.prototype.GD=function(f,g,b,x,T){this.cv();var M=new d.h;M.uc(b,g),M.scale(this.Kv);var C=new d.h;C.uc(x,g),C.scale(this.Kv),0>(M=Math.atan2(M.y,M.x)/this.oA)&&(M=this.Id.length+M),M=this.Id.length-M,0>(C=Math.atan2(C.y,C.x)/this.oA)&&(C=this.Id.length+C),(C=this.Id.length-C)<M&&(C+=this.Id.length);var O=d.O.truncate(C);C=d.O.truncate(Math.ceil(M)),(M=new d.h).L(this.Id[C%this.Id.length]),M.Ct(this.rb,g);var F=10*this.qa;for(M.sub(b),M.length()<F&&(C+=1),M.L(this.Id[O%this.Id.length]),M.Ct(this.rb,g),M.sub(x),M.length()<F&&--O,b=O-C,b++,O=0,C%=this.Id.length;O<b;O++,C=(C+1)%this.Id.length)M.L(this.Id[C]),M.Ct(this.rb,g),f.Ci(M),this.Xq();T&&f.Ci(x)},p.prototype.zn=function(f,g,b,x,T){var M=new d.gd,C=M.mN(f,g);if(M.Gp(this.tA,!1,!1),2>M.I(C))return 0>T||(T=f,M=new d.Sa,T.ve(T.Ba(g),M),this.yu(b,M)),1;var O=M.Na(M.Xa(M.Ob(C))),F=new d.Dd;if(F.gg(-O.x,-O.y),M.Oc(F),x&&(this.tQ(M,C,T),2>M.I(C)))return 0>T||(T=f,M=new d.Sa,T.ve(T.Ba(g),M),this.yu(b,M)),1;this.Zd.length=0;var P=M.Ob(C);g=M.Xa(P);var G=T==1?M.Ma(g):M.U(g);f=T==1?M.U(g):M.Ma(g);var q=!0;x=new d.h,C=new d.h;var V=new d.h,Z=new d.h,X=new d.h,te=new d.h,oe=new d.h,me=new d.h,Se=new d.h,Ce=new d.h,$e=this.rb;P=M.Ja(P);for(var Ue=0;Ue<P;Ue++)M.D(f,C),q&&(M.D(g,x),M.D(G,V),me.uc(x,V),me.normalize(),Ce.MG(me),Ce.scale($e),Z.add(Ce,x)),oe.uc(C,x),oe.normalize(),Se.MG(oe),Se.scale($e),X.add(x,Se),G=me.wi(oe),q=me.Qh(oe),0>G||0>q&&G==0?this.Zd.push(h.Qu(Z,X,x,2,this.Zd.length+1,this.Zd.length-1)):Z.qb(X)||(this.Zd.push(h.construct(Z,x,this.Zd.length+1,this.Zd.length-1,"dummy")),this.Zd.push(h.construct(x,X,this.Zd.length+1,this.Zd.length-1,"dummy"))),te.add(C,Se),this.Zd.push(h.Qu(X,te,x,1,this.Zd.length+1,this.Zd.length-1)),Z.L(te),Ce.L(Se),V.L(x),x.L(C),me.L(oe),G=g,g=f,q=!1,f=T==1?M.U(g):M.Ma(g);return this.Zd[this.Zd.length-1].qh=0,this.Zd[0].sh=this.Zd.length-1,this.YV(b),F.gg(O.x,O.y),b.YD(F,b.da()-1),1},p.prototype.YV=function(f){for(var g=this.zO(),b=!0,x=g+1,T=g;x!=g;T=x){var M=this.Zd[T];x=M.qh!=-1?M.qh:(T+1)%this.Zd.length,M.Co!=0&&(b&&f.Lt(M.Im),M.Co==2?this.GD(f,M.aw,M.Im,M.Vm,!0):f.Ci(M.Vm),b=!1)}},p.prototype.zO=function(){this.Ks==null&&(this.Ks=[null,null,null,null,null,null,null,null,null]);for(var f=0,g=0,b=this.Zd.length;g<b;){var x=this.Zd[g];if(3&x.Co){f=g;break}g=x.qh}for(b=f+1,g=f;b!=f;g=b){b=(x=this.Zd[g]).qh;for(var T=1,M=null;b!=g&&!(3&(M=this.Zd[b]).Co);)b=M.qh,T++;T!=1&&(x.Co&M.Co)==1&&(this.Ls==null&&(this.Ls=new d.yb,this.lw=new d.yb),this.Ls.Dc(x.Im),this.Ls.Qc(x.Vm),this.lw.Dc(M.Im),this.lw.Qc(M.Vm),this.Ls.Ea(this.lw,this.Ks,null,null,this.ct)==1&&(x.Vm.L(this.Ks[0]),M.Im.L(this.Ks[0]),x.qh=b,M.sh=g))}return f},p.prototype.Fv=function(f,g,b){var x=new d.h;if(x.uc(b,f),b=x.length(),0<(b=this.rb*this.rb-b*b*.25)){b=Math.sqrt(b),x.normalize(),x.ar();var T=new d.h;if(T.uc(g,f),T.Qh(x)+b>=this.rb)return!0}return!1},p.prototype.tQ=function(f,g,b){for(var x=0;1>x;x++){var T=!1,M=f.Ob(g),C=f.Ja(M);if(C==0)break;var O=C;if(3>C)break;!f.dc(M)&&(O=C-1),M=f.Xa(M),C=0<b?f.Ma(M):f.U(M);for(var F=0<b?f.U(M):f.Ma(M),P=C,G=!0,q=new d.h,V=new d.h,Z=new d.h,X=new d.h,te=new d.h,oe=d.h.construct(0,0),me=new d.h,Se=new d.h,Ce=new d.h,$e=new d.h,Ue=this.rb,Te=0,ut=0;ut<O&&(f.D(F,V),G&&(f.D(M,q),f.D(C,Z),P=C),Se.uc(q,Z),Se.normalize(),me.uc(V,q),me.normalize(),P!=F);){var ot=Se.wi(me),Rt=Se.Qh(me),hi=!0;if(0>ot||0>Rt&&ot==0||!this.Fv(Z,q,V)||(oe.L(V),hi=!1,++Te,T=!0),hi){if(0<Te)for(;(ot=0<b?f.Ma(P):f.U(P))!=M;){if(f.D(ot,X),!this.Fv(X,Z,oe)){ot!=F&&this.Fv(X,Z,V)&&this.Fv(X,q,V)&&(Z.L(X),P=ot,hi=!1,++Te);break}Z.L(X),P=ot,hi=!1,++Te}if(!hi)continue;if(0<Te){for(P=0<b?f.Ma(C):f.U(C),G=1;G<Te;G++)hi=0<b?f.Ma(P):f.U(P),f.pd(P,!0),P=hi;Ce.uc(q,Z),Te=Ue*Ue-(Te=Ce.length())*Te*.25,Ue-(Te=Math.sqrt(Te))>.5*this.vk?(te.add(Z,q),te.scale(.5),Ce.normalize(),Ce.ar(),$e.L(Ce),$e.scale(Ue-Te),te.add($e),f.mf(C,te)):f.pd(C,!0),Te=0}Z.L(q),P=M}q.L(V),C=M,M=F,F=0<b?f.U(M):f.Ma(M),ut++,G=!1}if(0<Te){for(P=0<b?f.Ma(C):f.U(C),G=1;G<Te;G++)hi=0<b?f.Ma(P):f.U(P),f.pd(P,!0),P=hi;te.add(Z,q),te.scale(.5),Ce.uc(q,Z),Te=Ue*Ue-(Te=Ce.length())*Te*.25,Te=Math.sqrt(Te),Ce.normalize(),Ce.ar(),$e.L(Ce),$e.scale(Ue-Te),te.add($e),f.mf(C,te)}if(f.Gp(this.tA,!1,!1),!T)break}},p.prototype.FG=function(f,g){if(f.Ja(g)==1)return!0;var b=new d.l;return f.Rj(g,b),Math.max(b.R(),b.ca())<.5*this.vk},p.prototype.EG=function(f){var g=new d.l;return f.A(g),Math.max(g.R(),g.ca())<.5*this.vk},p.prototype.WV=function(f){for(var g=0,b=0,x=(f=d.EC.local().V(f,.25*this.vk,!1,this.Ub)).da();b<x;b++)g=Math.max(f.Ja(b),g);return 32>g?(this.oq=!1,f):(this.oq=!0,d.Fg.Mk(f,this.ct,!1,!0,this.Ub))},p.prototype.yu=function(f,g){if(g=g.D(),this.Id!=null&&this.Id.length!==0){var b=new d.h;b.L(this.Id[0]),b.Ct(this.rb,g),f.Lt(b);for(var x=1,T=this.Id.length;x<T;x++)b.L(this.Id[x]),b.Ct(this.rb,g),f.Ci(b)}else{x=this.qE(),b=d.O.truncate((x+3)/4),x=.5*Math.PI/b,T=Math.cos(x);for(var M=Math.sin(x),C=new d.h,O=3;0<=O;O--){switch(C.ma(0,this.rb),O){case 0:for(x=0;x<b;x++)f.yj(C.x+g.x,C.y+g.y),C.Bt(T,M);break;case 1:for(x=0;x<b;x++)f.yj(-C.y+g.x,C.x+g.y),C.Bt(T,M);break;case 2:for(x=0;x<b;x++)f.yj(-C.x+g.x,-C.y+g.y),C.Bt(T,M);break;default:for(f.sx(C.y+g.x,-C.x+g.y),x=1;x<b;x++)C.Bt(T,M),f.yj(C.y+g.x,-C.x+g.y)}this.Xq()}}},p.kx=function(f){return f.Ch(1,0),f},p.prototype.sX=function(f){return f.Ch(2,this.qa),f.fm(),f},p}();d.HK=u}(Y||(Y={})),function(d){var L=function(){function S(h){this.Ca=h,this.g=new d.gd,this.dd=new d.ia(0)}return S.prototype.Lh=function(h,l,s){switch(l){case 0:if(h.v<s&&h.C<=s)break;return h.v>=s?1:-1;case 1:if(h.G<s&&h.H<=s)break;return h.G>=s?1:-1;case 2:if(h.v>=s&&h.C>s)break;return h.C<=s?1:-1;case 3:if(!(h.G>=s&&h.H>s))return h.H<=s?1:-1}return 0},S.prototype.Ay=function(h,l){return h.getType()==1736?this.Cy(h,l):this.Dy(h)},S.prototype.Cy=function(h,l){if(this.Ca.R()==0||this.Ca.ca()==0)return h.Ia();var s=new d.l;h.xc(s),this.X=this.g.Ib(h);var a=new d.l,u=new d.l,p=new d.h,f=new d.h,g=[0,0,0,0,0,0,0,0,0],b=[0,0,0,0,0,0,0,0,0];new d.ig;var x=new d.yb,T=new d.ia(0);T.Jb(Math.min(100,h.I()));for(var M=!1,C=0;!M&&4>C;C++){var O=!1,F=!!(1&C),P=0;switch(C){case 0:P=this.Ca.v,O=s.v<=P&&s.C>=P;break;case 1:P=this.Ca.G,O=s.G<=P&&s.H>=P;break;case 2:P=this.Ca.C,O=s.v<=P&&s.C>=P;break;case 3:P=this.Ca.H,O=s.G<=P&&s.H>=P}if(O)for(M=!0,O=this.g.Ob(this.X);O!=-1;){var G=-1,q=-1,V=this.g.Xa(O),Z=V;do{var X=this.g.bc(Z);X==null&&(X=x,this.g.D(Z,p),X.Dc(p),this.g.D(this.g.U(Z),f),X.Qc(f)),X.A(a);var te=this.Lh(a,C,P),oe=0,me=-1;if(te==-1){oe=0<(X=X.cq(F,P,g,b))?this.g.Ul(Z,b,X):0,oe+=1;var Se=Z,Ce=this.g.U(Se);for(X=0;X<oe;X++){if(this.g.D(Se,p),this.g.D(Ce,f),(me=this.g.bc(Se))==null&&((me=x).Dc(p),me.Qc(f)),me.A(u),(me=this.Lh(u,C,P))==-1){if(F)(me=Math.abs(p.y-P))<($e=Math.abs(f.y-P))?(p.y=P,this.g.mf(Se,p)):(f.y=P,this.g.mf(Ce,f));else{me=Math.abs(p.x-P);var $e=Math.abs(f.x-P);me<$e?(p.x=P,this.g.mf(Se,p)):(f.x=P,this.g.mf(Ce,f))}(me=this.g.bc(Se))==null&&((me=x).Dc(p),me.Qc(f)),me.A(u),me=this.Lh(u,C,P)}$e=G,G=me,q==-1&&(q=G),$e==0&&G==1||$e==1&&G==0||$e!=0||G!=0||T.add(Se),G==1&&(M=!1),me=Se=Ce,Ce=this.g.U(Ce)}}oe==0&&($e=G,G=te,q==-1&&(q=G),$e==0&&G==1||$e==1&&G==0||$e!=0||G!=0||T.add(Z),G==1&&(M=!1),me=this.g.U(Z)),Z=me}while(Z!=V);for(q==0&&G==0&&T.add(V),X=0,G=T.size;X<G;X++)q=T.get(X),this.g.pd(q,!1);T.clear(!1),O=3>this.g.Ja(O)?this.g.Zq(O):this.g.Rb(O)}}return M?h.Ia():(this.FB(),0<l&&this.My(l),this.g.Ne(this.X))},S.prototype.Dy=function(h){var l=new d.l,s=new d.l,a=[0,0,0,0,0,0,0,0,0],u=[0,0,0,0,0,0,0,0,0],p=new d.ig,f=h,g=new d.l;h.xc(g);for(var b=0;4>b;b++){var x=!1,T=!!(1&b),M=0;switch(b){case 0:M=this.Ca.v,x=g.v<=M&&g.C>=M;break;case 1:M=this.Ca.G,x=g.G<=M&&g.H>=M;break;case 2:M=this.Ca.C,x=g.v<=M&&g.C>=M;break;case 3:M=this.Ca.H,x=g.G<=M&&g.H>=M}if(x){x=f,f=h.Ia(),(x=x.Ga()).Zi();for(var C,O=new d.h;x.$a();)for(var F,P=!0;x.Ha();){var G=x.ha();G.A(l);var q=this.Lh(l,b,M);if(q==-1){if(0<(q=G.cq(T,M,a,u))){var V=0;C=G.ac();for(var Z=0;Z<=q;Z++)if(V!=(F=Z<q?u[Z]:1)){G.ah(V,F,p);var X=p.get();X.Dc(C),Z<q&&(T?(O.x=a[Z],O.y=M):(O.x=M,O.y=a[Z]),X.Qc(O)),X.A(s);var te=this.Lh(s,b,M);if(te==-1){if(C=X.ac(),V=X.wc(),T)(te=Math.abs(C.y-M))<(oe=Math.abs(V.y-M))?(C.y=M,X.Dc(C)):(V.y=M,X.Qc(V));else{te=Math.abs(C.x-M);var oe=Math.abs(V.x-M);te<oe?(C.x=M,X.Dc(C)):(V.x=M,X.Qc(V))}X.A(s),te=this.Lh(s,b,M)}C=X.wc(),V=F,(F=te)==1?(f.oc(X,P),P=!1):P=!0}}}else(F=q)==1?(f.oc(G,P),P=!1):P=!0}}}return f},S.prototype.FB=function(){this.ji=-1,this.Vl(!1,this.Ca.v),this.Vl(!1,this.Ca.C),this.Vl(!0,this.Ca.G),this.Vl(!0,this.Ca.H),this.dd.resize(0),this.dd.Jb(100),this.ji=this.g.Gd();for(var h=new d.h,l=this.g.Ob(this.X);l!=-1;l=this.g.Rb(l))for(var s=this.g.Xa(l),a=0,u=this.g.Ja(l);a<u;a++,s=this.g.U(s))this.g.D(s,h),(this.Ca.v==h.x||this.Ca.C==h.x||this.Ca.G==h.y||this.Ca.H==h.y)&&(this.g.Ra(s,this.ji,this.dd.size),this.dd.add(s));this.Nl(!1,this.Ca.v),this.Nl(!1,this.Ca.C),this.Nl(!0,this.Ca.G),this.Nl(!0,this.Ca.H),this.Ty()},S.prototype.My=function(h){for(var l=new d.h,s=new d.h,a=d.O.lg(2048,0),u=this.g.Ob(this.X);u!=-1;u=this.g.Rb(u)){var p=this.g.Xa(u),f=p;do{var g=this.g.U(f);this.g.D(f,l);var b=-1;if(l.x==this.Ca.v?(this.g.D(g,s),s.x==this.Ca.v&&(b=1)):l.x==this.Ca.C&&(this.g.D(g,s),s.x==this.Ca.C&&(b=1)),l.y==this.Ca.G?(this.g.D(g,s),s.y==this.Ca.G&&(b=0)):l.y==this.Ca.H&&(this.g.D(g,s),s.y==this.Ca.H&&(b=0)),b!=-1&&(b=d.h.tb(l,s),!(1>=(b=d.O.truncate(Math.min(Math.ceil(b/h),2048)))))){for(var x=1;x<b;x++)a[x-1]=1*x/b;this.g.Ul(f,a,b-1)}f=g}while(f!=p)}},S.prototype.Vl=function(h,l){var s=this.g.Gd(),a=new d.h,u=new d.ia(0);u.Jb(100);for(var p=this.g.Ob(this.X);p!=-1;p=this.g.Rb(p))for(var f=this.g.Xa(p),g=0,b=this.g.Ja(p);g<b;g++){var x=this.g.U(f);this.g.D(f,a),(h?a.y==l:a.x==l)&&(this.g.D(x,a),(h?a.y==l:a.x==l)&&(this.g.Pa(f,s)!=1&&(u.add(f),this.g.Ra(f,s,1)),this.g.Pa(x,s)!=1&&(u.add(x),this.g.Ra(x,s,1)))),f=x}if(this.g.Td(s),!(3>u.size)){var T=this;u.Vd(0,u.size,function(te,oe){return T.Mh(te,oe)}),s=new d.h,p=new d.h,f=new d.h,p.Rc();var M=-1;g=new d.ia(0),b=new d.ia(0),x=this.g.Gd();for(var C=this.g.Gd(),O=0,F=u.size;O<F;O++){var P=u.get(O);if(this.g.D(P,a),!a.qb(p)){if(M!=-1){for(var G=M;G<O;G++){M=u.get(G);var q=this.g.U(M);P=this.g.Ma(M);var V=!1;0>this.Mh(M,q)&&(this.g.D(q,s),h?s.y==l:s.x==l)&&(g.add(M),V=!0,this.g.Ra(M,C,1)),0>this.Mh(M,P)&&(this.g.D(P,s),h?s.y==l:s.x==l)&&(V||g.add(M),this.g.Ra(M,x,1))}for(G=0,V=g.size;G<V;G++){if(M=g.get(G),P=this.g.Pa(M,x),q=this.g.Pa(M,C),P==1){P=this.g.Ma(M),this.g.D(P,f);var Z=[0];if(Z[0]=0,!f.qb(a)){var X=d.h.tb(p,f);Z[0]=d.h.tb(f,a)/X,Z[0]==0?Z[0]=2220446049250313e-31:Z[0]==1&&(Z[0]=.9999999999999998),this.g.Ul(P,Z,1),P=this.g.Ma(M),this.g.mf(P,a),b.add(P),this.g.Ra(P,x,1),this.g.Ra(P,C,-1)}}q==1&&(q=this.g.U(M),this.g.D(q,f),(Z=[0])[0]=0,f.qb(a)||(X=d.h.tb(p,f),Z[0]=d.h.tb(p,a)/X,Z[0]==0?Z[0]=2220446049250313e-31:Z[0]==1&&(Z[0]=.9999999999999998),this.g.Ul(M,Z,1),P=this.g.U(M),this.g.mf(P,a),b.add(P),this.g.Ra(P,x,-1),this.g.Ra(P,C,1)))}M=g,g=b,(b=M).clear(!1)}M=O,p.L(a)}}this.g.Td(x),this.g.Td(C)}},S.prototype.Nl=function(h,l){var s=new d.h,a=new d.ia(0);a.Jb(100);for(var u=this.g.Gd(),p=0,f=this.dd.size;p<f;p++){var g=this.dd.get(p);if(g!=-1){var b=this.g.U(g);this.g.D(g,s),(h?s.y==l:s.x==l)&&(this.g.D(b,s),(h?s.y==l:s.x==l)&&(this.g.Pa(g,u)!=-2&&(a.add(g),this.g.Ra(g,u,-2)),this.g.Pa(b,u)!=-2&&(a.add(b),this.g.Ra(b,u,-2))))}}if(a.size!=0){var x=this;for(a.Vd(0,a.size,function(oe,me){return x.Mh(oe,me)}),p=0,f=a.size;p<f;p++){var T=a.get(p);this.g.Ra(T,u,p)}g=new d.h,(b=new d.h).Rc();var M=-1;for(p=0,f=a.size;p<f;p++)if((T=a.get(p))!=-1&&(this.g.D(T,s),!s.qb(b))){if(M!=-1)for(;;){T=!1;for(var C=1<p-M?p-1:p,O=M;O<C;O++){var F=a.get(O);if(F!=-1){var P=-1,G=this.g.U(F);0>this.Mh(F,G)&&(this.g.D(G,g),h?g.y==l:g.x==l)&&(P=G),G=-1;var q=this.g.Ma(F);if(0>this.Mh(F,q)&&(this.g.D(q,g),h?g.y==l:g.x==l)&&(G=q),P!=-1&&G!=-1)this.Kh(F,a,u),this.g.pd(F,!1),this.Kh(P,a,u),this.g.pd(P,!1),T=!0;else if(P!=-1||G!=-1){for(q=O+1;q<p;q++){var V=a.get(q);if(V!=-1){var Z=this.g.U(V),X=-1;0>this.Mh(V,Z)&&(this.g.D(Z,g),h?g.y==l:g.x==l)&&(X=Z),Z=this.g.Ma(V);var te=-1;if(0>this.Mh(V,Z)&&(this.g.D(Z,g),h?g.y==l:g.x==l)&&(te=Z),X!=-1&&te!=-1){this.Kh(V,a,u),this.g.pd(V,!1),this.Kh(X,a,u),this.g.pd(X,!1),T=!0;break}if(P!=-1&&te!=-1){this.zt(a,F,P,V,te,u),T=!0;break}if(G!=-1&&X!=-1){this.zt(a,V,X,F,G,u),T=!0;break}}}if(T)break}}}if(!T)break}M=p,b.L(s)}}this.g.Td(u)},S.prototype.Kh=function(h,l,s){s=this.g.Pa(h,s),l.set(s,-1),s=this.g.Pa(h,this.ji),this.dd.set(s,-1),(l=this.g.bd(h))!=-1&&this.g.Xa(l)==h&&(this.g.Jf(l,-1),this.g.Wg(l,-1))},S.prototype.zt=function(h,l,s,a,u,p){this.g.Bc(l,a),this.g.Cc(a,l),this.g.Cc(s,u),this.g.Bc(u,s),this.Kh(a,h,p),this.g.mi(a,!1),this.Kh(u,h,p),this.g.mi(u,!0)},S.prototype.Ty=function(){for(var h=0,l=this.dd.size;h<l;h++){var s=this.dd.get(h);s!=-1&&this.g.aj(s,-1)}for(var a=0,u=0,p=this.g.Ob(this.X);p!=-1;){var f=this.g.Xa(p);if(f==-1||p!=this.g.bd(f)){var g=p;p=this.g.Rb(p),this.g.Jf(g,-1),this.g.$q(g)}else{s=f,g=0;do this.g.aj(s,p),g++,s=this.g.U(s);while(s!=f);2>=g?(s=this.g.Pa(f,this.ji),this.dd.set(s,-1),f=this.g.pd(f,!1),g==2&&(s=this.g.Pa(f,this.ji),this.dd.set(s,-1),this.g.pd(f,!1)),g=p,p=this.g.Rb(p),this.g.Jf(g,-1),this.g.$q(g)):(this.g.cp(p,!1),this.g.Wg(p,this.g.Ma(f)),this.g.Vj(p,g),u+=g,a++,p=this.g.Rb(p))}}for(h=0,l=this.dd.size;h<l;h++)if((s=this.dd.get(h))!=-1&&(p=this.g.bd(s))==-1){p=this.g.vf(this.X,-1),g=0,f=s;do this.g.aj(s,p),g++,s=this.g.U(s);while(s!=f);2>=g?(s=this.g.Pa(f,this.ji),this.dd.set(s,-1),f=this.g.pd(f,!1),g==2&&(0<=(s=this.g.Pa(f,this.ji))&&this.dd.set(s,-1),this.g.pd(f,!1)),g=p,this.g.Jf(g,-1),this.g.$q(g)):(this.g.kn(p,!0),this.g.Vj(p,g),this.g.Jf(p,f),this.g.Wg(p,this.g.Ma(f)),this.g.cp(p,!1),u+=g,a++)}for(this.g.Rl(this.X,a),this.g.Tj(this.X,u),h=0,l=this.g.ld;l!=-1;l=this.g.ue(l))h+=this.g.I(l);this.g.bC(h)},S.By=function(h,l,s){return new S(l).Ay(h,s)},S.clip=function(h,l,s,a){if(h.B())return h;if(l.B())return h.Ia();if((s=h.getType())==33)return a=h.D(),l.contains(a)?h:h.Ia();if(s==197)return a=new d.l,h.A(a),a.Ea(l)?(l=new d.Fh,h.copyTo(l),l.Xo(a),l):h.Ia();var u=new d.l;if(h.xc(u),l.contains(u))return h;if(!l.isIntersecting(u))return h.Ia();if((u=h.Bb)!=null&&(u=u.Fk)!=null){if((u=u.Ro(l))==1){if(s!=1736)throw d.i.Qa();return(h=new d.Da(h.description)).tp(l),h}if(u==0)return h.Ia()}switch(s){case 550:s=null,u=h.I();for(var p=h.ub(0),f=0,g=0;g<u;g++)a=new d.h,p.tc(2*g,a),l.contains(a)||(f==0&&(s=h.Ia()),f<g&&s.Fd(h,f,g),f=g+1);return 0<f&&s.Fd(h,f,u),f==0?h:s;case 1736:case 1607:return S.By(h,l,a);default:throw d.i.Qa()}},S.prototype.Mh=function(h,l){var s=new d.h;return this.g.D(h,s),h=new d.h,this.g.D(l,h),s.compare(h)},S}();d.Ud=L}(Y||(Y={})),function(d){var L=function(){function S(h,l){this.Ca=h,this.g=new d.gd,this.dd=new d.ia(0),this.nd=l}return S.prototype.Lh=function(h,l,s){switch(l){case 0:if(h.v<s&&h.C<=s)break;return h.v>=s?1:-1;case 1:if(h.G<s&&h.H<=s)break;return h.G>=s?1:-1;case 2:if(h.v>=s&&h.C>s)break;return h.C<=s?1:-1;case 3:if(!(h.G>=s&&h.H>s))return h.H<=s?1:-1}return 0},S.prototype.Ay=function(h,l){return h.getType()==1736?this.Cy(h,l):this.Dy(h)},S.prototype.Cy=function(h,l){if(this.Ca.R()==0||this.Ca.ca()==0)return h.Ia();var s=new d.l;h.xc(s),this.X=this.g.Ib(h);var a=new d.l,u=new d.l,p=new d.h,f=new d.h,g=[0,0,0,0,0,0,0,0,0],b=[0,0,0,0,0,0,0,0,0],x=new d.yb,T=new d.ia(0);T.Jb(256);for(var M=!1,C=0;!M&&4>C;C++){var O=!1,F=!!(1&C),P=0;switch(C){case 0:P=this.Ca.v,O=s.v<=P&&s.C>=P;break;case 1:P=this.Ca.G,O=s.G<=P&&s.H>=P;break;case 2:P=this.Ca.C,O=s.v<=P&&s.C>=P;break;case 3:P=this.Ca.H,O=s.G<=P&&s.H>=P}if(O)for(M=!0,O=this.g.Ob(this.X);O!=-1;){var G=!0,q=-1,V=-1,Z=this.g.Xa(O),X=Z;do{var te=this.g.bc(X);te==null&&(te=x,this.g.D(X,p),te.Dc(p),this.g.D(this.g.U(X),f),te.Qc(f)),te.A(a);var oe=this.Lh(a,C,P),me=0,Se=-1;if(oe==-1){me=0<(te=te.cq(F,P,g,b))?this.g.LX(X,b,te):0,me+=1;var Ce=X,$e=this.g.U(Ce);for(te=0;te<me;te++){if(this.g.D(Ce,p),this.g.D($e,f),(Se=this.g.bc(Ce))==null&&((Se=x).Dc(p),Se.Qc(f)),Se.A(u),(Se=this.Lh(u,C,P))==-1){if(F)(Se=Math.abs(p.y-P))<(Ue=Math.abs(f.y-P))?(p.y=P,this.g.mf(Ce,p)):(f.y=P,this.g.mf($e,f));else{Se=Math.abs(p.x-P);var Ue=Math.abs(f.x-P);Se<Ue?(p.x=P,this.g.mf(Ce,p)):(f.x=P,this.g.mf($e,f))}(Se=this.g.bc(Ce))==null&&((Se=x).Dc(p),Se.Qc(f)),Se.A(u),Se=this.Lh(u,C,P)}Ue=q,q=Se,V==-1&&(V=q),Ue==0&&q==1||Ue==1&&q==0||Ue!=0||q!=0||T.add(Ce),q==1&&(G=M=!1),Se=Ce=$e,$e=this.g.U($e)}}if(me==0&&(Ue=q,q=oe,V==-1&&(V=q),Ue==0&&q==1||Ue==1&&q==0||Ue!=0||q!=0||T.add(X),q==1&&(G=M=!1),Se=this.g.U(X)),X=Se,256<=T.size){for(te=1,oe=T.size-1;te<oe;te++)me=T.get(te),this.g.pd(me,!1);T.set(1,T.Fc()),T.Bh(2)}}while(X!=Z);if(!G)for(V==0&&q==0&&T.add(Z),te=0,oe=T.size;te<oe;te++)me=T.get(te),this.g.pd(me,!1);T.clear(!1),O=G||this.g.Ja(O)==0?this.g.Zq(O):this.g.Rb(O)}}return M?h.Ia():(this.FB(),0<l&&this.My(l),this.g.Ne(this.X))},S.prototype.Dy=function(h){var l=new d.l,s=new d.l,a=[0,0,0,0,0,0,0,0,0],u=[0,0,0,0,0,0,0,0,0],p=new d.ig,f=h,g=new d.l;h.xc(g);for(var b=new d.h,x=new d.h,T=null,M=null,C=0;4>C;C++){var O=!1,F=!!(1&C),P=0;switch(C){case 0:P=this.Ca.v,O=g.v<=P&&g.C>=P;break;case 1:P=this.Ca.G,O=g.G<=P&&g.H>=P;break;case 2:P=this.Ca.C,O=g.v<=P&&g.C>=P;break;case 3:P=this.Ca.H,O=g.G<=P&&g.H>=P}if(O)for(O=f,f=h.Ia(),(O=O.Ga()).Zi();O.$a();)for(var G,q=!0;O.Ha();){var V=O.ha();V.A(l);var Z=this.Lh(l,C,P);if(Z==-1){if(0<(Z=V.cq(F,P,a,u))){var X=0;V.Yp(b);for(var te=0;te<=Z;te++)if(X!=(G=te<Z?u[te]:1)){V.ah(X,G,p);var oe=p.get();oe.Dc(b),te<Z&&(F?(x.x=a[te],x.y=P):(x.x=P,x.y=a[te]),oe.Qc(x)),oe.A(s);var me=this.Lh(s,C,P);me==-1&&(T==null&&(T=new d.h),M==null&&(M=new d.h),oe.Yp(T),oe.Tr(M),F?(X=Math.abs(T.y-P))<(me=Math.abs(M.y-P))?(T.y=P,oe.Dc(T)):(M.y=P,oe.Qc(M)):(X=Math.abs(T.x-P))<(me=Math.abs(M.x-P))?(T.x=P,oe.Dc(T)):(M.x=P,oe.Qc(M)),oe.A(s),me=this.Lh(s,C,P)),oe.Tr(b),X=G,(G=me)==1?(f.oc(oe,q),q=!1):q=!0}}}else(G=Z)==1?(f.oc(V,q),q=!1):q=!0}}return f},S.prototype.FB=function(){this.ji=-1,this.Vl(!1,this.Ca.v),this.Vl(!1,this.Ca.C),this.Vl(!0,this.Ca.G),this.Vl(!0,this.Ca.H),this.dd.resize(0),this.dd.Jb(100),this.ji=this.g.Gd();for(var h=new d.h,l=this.g.Ob(this.X);l!=-1;l=this.g.Rb(l))for(var s=this.g.Xa(l),a=0,u=this.g.Ja(l);a<u;a++,s=this.g.U(s))this.g.D(s,h),(this.Ca.v==h.x||this.Ca.C==h.x||this.Ca.G==h.y||this.Ca.H==h.y)&&(this.g.Ra(s,this.ji,this.dd.size),this.dd.add(s));this.Nl(!1,this.Ca.v),this.Nl(!1,this.Ca.C),this.Nl(!0,this.Ca.G),this.Nl(!0,this.Ca.H),this.Ty()},S.prototype.My=function(h){for(var l=new d.h,s=new d.h,a=null,u=null,p=d.O.lg(2048,0),f=this.g.Ob(this.X);f!=-1;f=this.g.Rb(f)){var g=this.g.Xa(f),b=g;do{var x=this.g.U(b);this.g.D(b,l);var T=-1;if(l.x==this.Ca.v?(this.g.D(x,s),s.x==this.Ca.v&&(T=1)):l.x==this.Ca.C&&(this.g.D(x,s),s.x==this.Ca.C&&(T=1)),l.y==this.Ca.G?(this.g.D(x,s),s.y==this.Ca.G&&(T=0)):l.y==this.Ca.H&&(this.g.D(x,s),s.y==this.Ca.H&&(T=0)),T!=-1){if(a==null&&(a=new d.h),u==null&&(u=new d.h),a.L(l),u.ma(0,0),T==0){var M=l.x-this.Ca.v;u.x=d.lc.sign(s.x-l.x),a.x=h*d.lc.Cn(Math.floor(Math.abs(M/h)),M)+this.Ca.v,0>a.x&&(a.x+=h)}else M=l.y-this.Ca.G,u.y=d.lc.sign(s.y-l.y),a.y=h*d.lc.Cn(Math.floor(Math.abs(M/h)),M)+this.Ca.G,0>a.y&&(a.y+=h);M=T!=0?s.y-l.y:s.x-l.x;var C=Math.abs(M);if(65536<C/h)throw d.i.fa("internal error");if(0<C){C=d.O.truncate(C/h)+2,p.length<C&&(p=d.O.lg(C));for(var O=C=0;;O++){var F=new d.h;if(F.x=a.x+u.x*O*h,F.y=a.y+u.y*O*h,1<=(F=(T!=0?F.y-l.y:F.x-l.x)/M))break;0>=F||(p[C]=F,C++)}C!=0&&this.g.Ul(b,p,C)}}b=x}while(b!=g)}},S.prototype.Vl=function(h,l){for(var s=-1,a=new d.h,u=null,p=this.g.Ob(this.X);p!=-1;p=this.g.Rb(p))for(var f=this.g.Xa(p),g=0,b=this.g.Ja(p);g<b;g++){var x=this.g.U(f);this.g.D(f,a),(h?a.y==l:a.x==l)&&(this.g.D(x,a),(h?a.y==l:a.x==l)&&(s==-1&&(s=this.g.Gd()),u==null&&(u=new d.ia(0)).Jb(100),this.g.Pa(f,s)!=1&&(u.add(f),this.g.Ra(f,s,1)),this.g.Pa(x,s)!=1&&(u.add(x),this.g.Ra(x,s,1)))),f=x}if(s!=-1&&this.g.Td(s),!(u==null||3>u.size)){var T=this;u.Vd(0,u.size,function(te,oe){return T.Mh(te,oe)}),s=new d.h,p=new d.h,f=new d.h,p.Rc();var M=-1;g=new d.ia(0),b=new d.ia(0),x=null;for(var C=this.g.Gd(),O=this.g.Gd(),F=0,P=u.size;F<P;F++){var G=u.get(F);if(this.g.D(G,a),!a.qb(p)){if(M!=-1){for(var q=M;q<F;q++){M=u.get(q);var V=this.g.U(M);G=this.g.Ma(M);var Z=!1;this.g.D(V,s),0>p.compare(s)&&(h?s.y==l:s.x==l)&&(g.add(M),Z=!0,this.g.Ra(M,O,1)),this.g.D(G,s),0>p.compare(s)&&(h?s.y==l:s.x==l)&&(Z||g.add(M),this.g.Ra(M,C,1))}for(q=0,Z=g.size;q<Z;q++){if(M=g.get(q),G=this.g.Pa(M,C),V=this.g.Pa(M,O),G==1&&(G=this.g.Ma(M),this.g.D(G,f),!f.qb(a))){x==null&&(x=[]);var X=d.h.tb(p,f);x[0]=d.h.tb(f,a)/X,x[0]==0?x[0]=2220446049250313e-31:x[0]==1&&(x[0]=.9999999999999998),this.g.Ul(G,x,1),G=this.g.Ma(M),this.g.mf(G,a),b.add(G),this.g.Ra(G,C,1),this.g.Ra(G,O,-1)}V==1&&(V=this.g.U(M),this.g.D(V,f),f.qb(a)||(x==null&&(x=[]),X=d.h.tb(p,f),x[0]=d.h.tb(p,a)/X,x[0]==0?x[0]=2220446049250313e-31:x[0]==1&&(x[0]=.9999999999999998),this.g.Ul(M,x,1),G=this.g.U(M),this.g.mf(G,a),b.add(G),this.g.Ra(G,C,-1),this.g.Ra(G,O,1)))}M=g,g=b,(b=M).clear(!1)}M=F,p.L(a)}}this.g.Td(C),this.g.Td(O)}},S.prototype.Nl=function(h,l){for(var s=new d.h,a=null,u=-1,p=0,f=this.dd.size;p<f;p++){var g=this.dd.get(p);if(g!=-1){var b=this.g.U(g);this.g.D(g,s),(h?s.y==l:s.x==l)&&(this.g.D(b,s),(h?s.y==l:s.x==l)&&(u==-1&&(u=this.g.Gd()),a==null&&(a=new d.ia(0)).Jb(100),this.g.Pa(g,u)!=-2&&(a.add(g),this.g.Ra(g,u,-2)),this.g.Pa(b,u)!=-2&&(a.add(b),this.g.Ra(b,u,-2))))}}if(a==null)u!=-1&&this.g.Td(u);else{var x=this;for(a.Vd(0,a.size,function(oe,me){return x.Mh(oe,me)}),p=0,f=a.size;p<f;p++){var T=a.get(p);this.g.Ra(T,u,p)}g=new d.h,(b=new d.h).Rc();var M=-1;for(p=0,f=a.size;p<f;p++)if((T=a.get(p))!=-1&&(this.g.D(T,s),!s.qb(b))){if(M!=-1)for(;;){T=!1;for(var C=1<p-M?p-1:p,O=M;O<C;O++){var F=a.get(O);if(F!=-1){var P=-1,G=this.g.U(F);this.g.D(G,g),0>b.compare(g)&&(h?g.y==l:g.x==l)&&(P=G),G=-1;var q=this.g.Ma(F);if(this.g.D(q,g),0>b.compare(g)&&(h?g.y==l:g.x==l)&&(G=q),P!=-1&&G!=-1)this.Kh(F,a,u),this.g.pd(F,!1),this.Kh(P,a,u),this.g.pd(P,!1),T=!0;else if(P!=-1||G!=-1){for(q=O+1;q<p;q++){var V=a.get(q);if(V!=-1){var Z=this.g.U(V),X=-1;this.g.D(Z,g),0>b.compare(g)&&(h?g.y==l:g.x==l)&&(X=Z),Z=this.g.Ma(V);var te=-1;if(this.g.D(Z,g),0>b.compare(g)&&(h?g.y==l:g.x==l)&&(te=Z),X!=-1&&te!=-1){this.Kh(V,a,u),this.g.pd(V,!1),this.Kh(X,a,u),this.g.pd(X,!1),T=!0;break}if(P!=-1&&te!=-1){this.zt(a,F,P,V,te,u),T=!0;break}if(G!=-1&&X!=-1){this.zt(a,V,X,F,G,u),T=!0;break}}}if(T)break}}}if(!T)break}M=p,b.L(s)}this.g.Td(u)}},S.prototype.Kh=function(h,l,s){s=this.g.Pa(h,s),l.set(s,-1),s=this.g.Pa(h,this.ji),this.dd.set(s,-1),(l=this.g.bd(h))!=-1&&this.g.Xa(l)==h&&(this.g.Jf(l,-1),this.g.Wg(l,-1))},S.prototype.zt=function(h,l,s,a,u,p){this.g.Bc(l,a),this.g.Cc(a,l),this.g.Cc(s,u),this.g.Bc(u,s),this.Kh(a,h,p),this.g.mi(a,!1),this.Kh(u,h,p),this.g.mi(u,!0)},S.prototype.Ty=function(){for(var h=0,l=this.dd.size;h<l;h++){var s=this.dd.get(h);s!=-1&&this.g.aj(s,-1)}for(var a=0,u=0,p=this.g.Ob(this.X);p!=-1;){var f=this.g.Xa(p);if(f==-1||p!=this.g.bd(f)){var g=p;p=this.g.Rb(p),this.g.Jf(g,-1),this.g.$q(g)}else{s=f,g=0;do this.g.aj(s,p),g++,s=this.g.U(s);while(s!=f);this.g.cp(p,!1),this.g.Wg(p,this.g.Ma(f)),this.g.Vj(p,g),u+=g,a++,p=this.g.Rb(p)}}for(h=0,l=this.dd.size;h<l;h++)if((s=this.dd.get(h))!=-1&&(p=this.g.bd(s))==-1){p=this.g.vf(this.X,-1),g=0,f=s;do this.g.aj(s,p),g++,s=this.g.U(s);while(s!=f);2>=g?(s=this.g.Pa(f,this.ji),this.dd.set(s,-1),f=this.g.pd(f,!1),g==2&&(0<=(s=this.g.Pa(f,this.ji))&&this.dd.set(s,-1),this.g.pd(f,!1)),g=p,this.g.Jf(g,-1),this.g.$q(g)):(this.g.kn(p,!0),this.g.Vj(p,g),this.g.Jf(p,f),this.g.Wg(p,this.g.Ma(f)),this.g.cp(p,!1),u+=g,a++)}for(this.g.Rl(this.X,a),this.g.Tj(this.X,u),h=0,l=this.g.ld;l!=-1;l=this.g.ue(l))h+=this.g.I(l);this.g.bC(h)},S.By=function(h,l,s,a){return new S(l,a).Ay(h,s)},S.clip=function(h,l,s,a,u){return S.Nu(h,l,null,s,a,u)},S.Nu=function(h,l,s,a,u,p){var f=h.getType();if(f==33)return u=h.D(),l.contains(u)?h:h.Ia();if(f==197)return u=new d.l,h.A(u),u.Ea(l)?(l=new d.Fh,h.copyTo(l),l.Xo(u),l):h.Ia();if(h.B())return h;if(l.B())return h.Ia();var g=new d.l;if(h.xc(g),l.contains(g))return h;if(!l.isIntersecting(g))return h.Ia();if((s!=null||isNaN(a))&&d.ta.ty(s,l,!1),!d.aa.xj(f))throw d.i.N();if((s=h.Bb)!=null&&(s=s.Fk)!=null){if((s=s.Ro(l))==1){if(f!=1736)throw d.i.fa("internal error");return(h=new d.Da(h.description)).tp(l),h}if(s==0)return h.Ia()}switch(f){case 550:for(p=null,f=h.I(),s=h.ub(0),a=0,u=new d.h,g=0;g<f;g++)s.tc(2*g,u),l.contains(u)||(a==0&&(p=h.Ia()),a<g&&p.Fd(h,a,g),a=g+1);return 0<a&&p.Fd(h,a,f),a==0?h:p;case 1736:case 1607:return S.By(h,l,u,p);default:throw d.i.fa("internal error")}},S.prototype.Mh=function(h,l){var s=new d.h;return this.g.D(h,s),h=new d.h,this.g.D(l,h),s.compare(h)},S}();d.ri=L}(Y||(Y={})),function(d){var L=new d.h,S=function(){function l(s,a,u,p,f){this.Pm=new d.h,this.Dk=new d.h,this.Pi=new d.h,this.g=s,this.Aw=u,this.no=p,this.Pm=a,this.yl=f,this.Dk.Rc(),this.Pi.Rc()}return l.prototype.xE=function(s){this.g.D(s,this.Dk),s=d.O.truncate((this.Dk.x-this.Pm.x)*this.no+.5);var a=d.O.truncate((this.Dk.y-this.Pm.y)*this.no+.5);return h.jG(s,a)},l.prototype.jz=function(s){return this.g.Pa(s,this.yl)},l.prototype.Py=function(s,a){return this.g.D(s,this.Dk),this.g.D(a,this.Pi),h.Cv(this.Dk.x,this.Dk.y,this.Pi.x,this.Pi.y,this.Aw)},l}();d.sY=function(){};var h=function(){function l(){this.Pm=new d.h,this.pq=[0,0,0,0],this.xs=[0,0,0,0],this.qo=this.yl=-1}return l.iQ=function(s,a){var u=new l;return u.g=s,u.qa=a,u.Aw=a*a,u.$v=2*a,u.no=1/u.$v,u.BO()},l.Cv=function(s,a,u,p,f){return(s-=u)*s+(a-=p)*a<=f},l.jG=function(s,a){return d.O.Th(a,d.O.Th(s))},l.prototype.DO=function(s,a){this.g.Gc(s,L);for(var u=(L.y-this.Pm.y)*this.no,p=d.O.truncate((L.x-this.Pm.x)*this.no),f=d.O.truncate(u),g=u=0;1>=g;g+=1)for(var b=0;1>=b;b+=1){var x=l.jG(p+g,f+b),T=this.xl.rR(x);T!=-1&&(this.pq[u]=T,this.xs[u]=x,u++)}for(p=u-1;1<=p;p--)for(T=this.pq[p],f=p-1;0<=f;f--)if(T==this.pq[f]){this.xs[f]=-1,p!=--u&&(this.xs[p]=this.xs[u],this.pq[p]=this.pq[u]);break}for(f=0;f<u;f++)this.EO(s,this.xs[f],L,this.pq[f],a)},l.prototype.EO=function(s,a,u,p,f){for(var g=new d.h;p!=-1;p=this.xl.ER(p)){var b=this.xl.ja(p);s==b||a!=-1&&this.g.Pa(b,this.yl)!=a||(this.g.Gc(b,g),l.Cv(u.x,u.y,g.x,g.y,this.Aw)&&f.add(p))}},l.prototype.Xm=function(s,a,u){var p=this.g.Pa(s,this.qo),f=this.g.Pa(a,this.qo);return p==-1&&(p=this.zd.Ph(),this.zd.addElement(p,s),this.g.Ra(s,this.qo,p)),f==-1?this.zd.addElement(p,a):this.zd.Hy(p,f),this.g.Ra(a,this.qo,-2),a=this.YT(s,a),u&&(u=this.kw.xE(s),this.g.Ra(s,this.yl,u)),a},l.WT=function(s,a,u){s.Nb(a),u=s;var p=new d.h;l.XT(s.D(),a.D(),p),u.Cb(p)},l.XT=function(s,a,u){var p=s.x;s.x!=a.x&&(p=(1*s.x+1*a.x)/2);var f=s.y;s.y!=a.y&&(f=(1*s.y+1*a.y)/2),u.ma(p,f)},l.prototype.YT=function(s,a){var u=new d.h;this.g.D(s,u);var p=new d.h;this.g.D(a,p);var f=this.g.cG(s),g=f+(a=this.g.cG(a)),b=0,x=u.x;u.x!=p.x&&(x=(u.x*f+p.x*a)/g,b++);var T=u.y;return u.y!=p.y&&(T=(u.y*f+p.y*a)/g,b++),0<b&&this.g.Cb(s,x,T),this.g.vX(s,g),b!=0},l.prototype.BO=function(){var s=this.g.fd,a=this.g.IF();for(this.Pm=a.mz(),a=Math.max(a.ca(),a.R())/2147483646,this.$v<a&&(this.$v=a,this.no=1/this.$v),this.zd=new d.au,this.zd.At(d.O.truncate(this.g.fd/3+1)),this.zd.fn(d.O.truncate(this.g.fd/3+1)),this.yl=this.g.Gd(),this.qo=this.g.Gd(),this.kw=new S(this.g,this.Pm,this.Aw,this.no,this.yl),this.xl=new d.dL(d.O.truncate(4*s/3),this.kw),this.xl.AW(this.g.fd),s=!1,a=this.g.ld;a!=-1;a=this.g.ue(a))for(var u=this.g.Ob(a);u!=-1;u=this.g.Rb(u))for(var p=this.g.Xa(u),f=0,g=this.g.Ja(u);f<g;f++){var b=this.kw.xE(p);this.g.Ra(p,this.yl,b),this.xl.addElement(p,b),p=this.g.U(p)}var x=new d.ia(0);for(x.Jb(10),a=this.g.ld;a!=-1;a=this.g.ue(a))for(u=this.g.Ob(a);u!=-1;u=this.g.Rb(u))for(p=this.g.Xa(u),f=0,g=this.g.Ja(u);f<g;f++){if(this.g.Pa(p,this.qo)!=-2)for(b=this.g.Pa(p,this.yl),this.xl.jd(p,b);this.DO(p,x),x.size!=0;){b=!1;for(var T=0,M=x.size;T<M;T++){var C=x.get(T),O=this.xl.ja(C);this.xl.vd(C),b=this.Xm(p,O,T+1==M)||b}if(s=s||b,x.clear(!1),!b)break}p=this.g.U(p)}return s&&this.vN(),this.kw=this.xl=null,this.g.Td(this.yl),this.g.Td(this.qo),s},l.prototype.vN=function(){for(var s=new d.h,a=this.zd.je;a!=-1;a=this.zd.qz(a)){var u=this.zd.rc(a);for(this.g.D(this.zd.ja(u),s),u=this.zd.lb(u);u!=-1;u=this.zd.lb(u))this.g.mf(this.zd.ja(u),s)}},l}();d.Yt=h}(Y||(Y={})),function(d){var L=function(){function S(h){h===void 0&&(h=null),this.yg=null,this.Pb=!1,this.yg=h===null?[]:h}return S.prototype.copyTo=function(h){if(h.Pb)throw d.i.fa("CompositeGeographicTransformation is read-only");for(var l=0;l<this.yg.length;l++)h.yg.push(this.yg[l].Of())},S.prototype.count=function(){return this.yg.length},S.prototype.add=function(h){if(this.Pb)throw d.i.fa("CompositeGeographicTransformation is read-only");this.yg.push(h.Of())},S.prototype.clear=function(){if(this.Pb)throw d.i.fa("CompositeGeographicTransformation is read-only");this.yg.length=0},S.prototype.remove=function(h){if(this.Pb)throw d.i.fa("CompositeGeographicTransformation is read-only");this.yg.splice(h,1)},S.prototype.jg=function(){var h=new S;return this.copyTo(h),h},S.prototype.Of=function(){return this.jg()},S.prototype.transform=function(h,l,s,a){if(h.length<l)throw d.i.fa("invalid Argument");var u=s;for(s=0;s<this.yg.length;s++){var p=this.yg[s];if(p.qm()!=null){var f=p.Un,g=f?1:0,b=f?p.qm().getGeogcs2():p.qm().getGeogcs1();if(b=u/(b=b.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(b-1))for(u=0;u<l;u++)h[u][0]*=b,h[u][1]*=b;d.MC.geogToGeog(p.qm(),l,h,null,g),u=(f?p.qm().getGeogcs1():p.qm().getGeogcs2()).getUnit().getUnitFactor()}}if(b=u/a,3552713678800501e-30<Math.abs(b-1))for(u=0;u<l;u++)h[u][0]*=b,h[u][1]*=b;return l},S.prototype.Nb=function(h){if(h==this)return!0;if(!(h instanceof S)||this.yg.length!=h.yg.length)return!1;for(var l=0;l<this.yg.length;l++)if(!this.yg[l].Nb(h.yg[l]))return!1;return!0},S.prototype.ix=function(){this.Pb=!0},S.prototype.toString=function(){for(var h="CGT ("+this.count()+") ",l=0,s=this.count();l<s;++l)h+=this.yg[l].toString()+", ";return 200<h.length?h.substring(0,197)+"... ("+h.length.toString()+" characters)":h},S.create=function(){return new S},S}();d.wC=L}(Y||(Y={})),function(d){var L,S=Math.PI,h=2*Math.PI,l=Math.PI/2,s=function(){function p(){}return p.TO=function(f,g){var b=new p;return b.x=f,b.y=g,b.type=0,b.Uh=0,b},p.al=function(f){var g=new p;return g.x=f.x,g.y=f.y,g.type=0,g.Uh=0,g},p.SO=function(f){var g=new p;return g.x=f.x,g.y=f.y,g.type=f.type,g.Uh=f.Uh,g},p.Pd=function(f,g,b){var x=new p;return x.x=f.x+g*Math.cos(b),x.y=f.y+g*Math.sin(b),x.type=f.type,x.Uh=f.Uh,x},p.Pu=function(f,g){var b=new p;return b.x=.5*(f.x+g.x),b.y=.5*(f.y+g.y),b.type=f.type,b.Uh=f.Uh,b},p.TE=function(f,g){var b=new p;return b.x=f.x+.001*(g.x-f.x),b.y=f.y+.001*(g.y-f.y),b.type=f.type,b.Uh=f.Uh,b},p}(),a=function(){};(L=d.fL||(d.fL={}))[L.Round=0]="Round",L[L.Bevel=1]="Bevel",L[L.Miter=2]="Miter",L[L.Square=3]="Square";var u=function(){function p(f){this.NA=this.Yb=this.wg=null,this.nd=f}return p.V=function(f,g,b,x,T,M){if(f==null||1>f.Db())throw d.i.N();return g==0||f.B()?f:((M=new p(M)).ko=f,M.Ka=g,M.qa=T,M.Ki=b,M.CA=x,M.Rx())},p.prototype.eM=function(){var f=this.ko,g=f.ac(),b=f.wc(),x=new d.h;return x.uc(b,g),x.normalize(),x.Hv(),x.scale(this.Ka),g.add(x),b.add(x),x=f.Ia(),f.Dc(g),f.Qc(b),x},p.prototype.dM=function(){var f=this.ko;if(0<this.Ka&&this.Ki!=2){var g=new d.Da;return g.ad(f,!1),this.ko=g,this.Rx()}return(f=new d.Fh(f.$)).W(this.Ka,this.Ka),f},p.prototype.tJ=function(f,g,b,x){return(g.x-f.x)*(x.x-b.x)+(g.y-f.y)*(x.y-b.y)},p.prototype.fc=function(f,g){if(g===void 0)this.Yb.push(f),this.gf++;else if(this.gf==0)this.fc(f);else{var b=this.Bw,x=this.wg[g==0?b-1:g-1],T=this.wg[g],M=this.tJ(x,T,this.Yb[this.gf-1],f);0<M?this.fc(f):0>M&&(0<this.tJ(x,T,T,this.Yb[this.gf-1])?(T=this.wg[g==0?b-2:g==1?b-1:g-2],b=s.Pd(x,this.Ka,Math.atan2(x.y-T.y,x.x-T.x)-l),this.Yb[this.gf-1]=b,this.Ki==1||this.Ki==2?(b=s.Pu(b,x),this.fc(b),b=s.Pd(x,this.Ka,this.Jv+l),(x=s.Pu(b,x)).type|=256,this.fc(x)):(b=s.Pd(x,this.Ka,this.Jv+l)).type|=256,this.fc(b),this.fc(f,g)):(b=s.Pd(T,this.Ka,this.Jv+l),this.fc(b),this.Ki==1||this.Ki==2?(b=s.Pu(b,T),this.fc(b),b=s.Pd(T,this.Ka,this.aA-l),(x=s.Pu(b,T)).type|=256,this.fc(x)):(b=s.Pd(T,this.Ka,this.aA-l)).type|=256,this.fc(b)))}},p.prototype.mE=function(){var f,g=this.Bw;this.gf=0;var b=.5*this.qa,x=0,T=0;for(f=0;f<g;f++){var M=this.wg[f],C=f==0?this.wg[g-1]:this.wg[f-1],O=f==g-1?this.wg[0]:this.wg[f+1],F=C.x-M.x,P=C.y-M.y,G=O.x-M.x,q=O.y-M.y,V=Math.atan2(P,F),Z=Math.atan2(q,G);if(this.Jv=V,this.aA=Z,f==0&&(x=V,T=Z),F=F*q-G*P,P=Z,Z<V&&(Z+=h),0<F*this.Ka)this.Ki==1||this.Ki==2?(V=s.Pd(M,this.Ka,V+l),this.fc(V),V=s.TE(M,V),this.fc(V),V=s.Pd(M,this.Ka,Z-l),(M=s.TE(M,V)).type|=256,this.fc(M),this.fc(V)):(F=.5*(Z-V),F=this.Ka/Math.abs(Math.sin(F)),V=s.Pd(M,F,.5*(V+Z)),this.fc(V,f));else if(512&M.type){for(F=1-b/Math.abs(this.Ka),C=1,O=0>this.Ka?-S:S,-1<F&&1>F&&(.017453292519943295>(P=2*Math.acos(F))&&(P=.017453292519943295),1<(C=d.O.truncate(S/P+1.5))&&(O/=C)),P=V+l,V=s.Pd(M,this.Ka,P),f==0&&(V.type|=1024),this.fc(V,f),F=this.Ka/Math.cos(O/2),P+=O/2,(V=s.Pd(M,F,P)).type|=1024,this.fc(V);0<--C;)P+=O,(V=s.Pd(M,F,P)).type|=1024,this.fc(V);(V=s.Pd(M,this.Ka,Z-l)).type|=1024,this.fc(V)}else if(this.Ki==1)V=s.Pd(M,this.Ka,V+l),this.fc(V,f),V=s.Pd(M,this.Ka,Z-l),this.fc(V);else if(this.Ki==0)for(F=1-b/Math.abs(this.Ka),C=1,O=Z-l-(V+l),-1<F&&1>F&&(.017453292519943295>(P=2*Math.acos(F))&&(P=.017453292519943295),1<(C=d.O.truncate(Math.abs(O)/P+1.5))&&(O/=C)),F=this.Ka/Math.cos(.5*O),P=V+l+.5*O,V=s.Pd(M,F,P),this.fc(V,f);0<--C;)P+=O,V=s.Pd(M,F,P),this.fc(V);else this.Ki==2?(F=C.x-M.x,P=C.y-M.y,.99999999<(C=(F*(G=O.x-M.x)+P*(q=O.y-M.y))/Math.sqrt(F*F+P*P)/Math.sqrt(G*G+q*q))?(V=s.Pd(M,1.4142135623730951*this.Ka,Z-.25*S),this.fc(V,f),V=s.Pd(M,1.4142135623730951*this.Ka,Z+.25*S),this.fc(V)):(C=Math.abs(this.Ka/Math.sin(.5*Math.acos(C))))>(O=Math.abs(this.CA*this.Ka))?(F=.5*(Z-V),F=this.Ka/Math.abs(Math.sin(F)),V=s.Pd(M,F,.5*(V+Z)),Z=d.h.construct(V.x,V.y),V=d.h.construct(M.x,M.y),(M=new d.h).uc(Z,V),(Z=new d.h).HW(O/M.length(),M,V),V=(C-O)*Math.abs(this.Ka)/Math.sqrt(C*C-this.Ka*this.Ka),0<this.Ka?M.Hv():M.ar(),M.scale(V/M.length()),(V=new d.h).add(Z,M),(C=new d.h).uc(Z,M),V=s.al(V),this.fc(V,f),V=s.al(C),this.fc(V)):(F=.5*(Z-V),F=this.Ka/Math.abs(Math.sin(F)),V=s.Pd(M,F,.5*(V+Z)),this.fc(V,f))):(Z=P,0<this.Ka?(Z>V&&(Z-=h),C=V-Z<l):(Z<V&&(Z+=h),C=Z-V<l),C?(P=0>(F=1.4142135623730951*this.Ka)?V+.25*S:V+.75*S,V=s.Pd(M,F,P),this.fc(V,f),P=0>F?Z-.25*S:Z-.75*S,V=s.Pd(M,F,P),this.fc(V)):(F=.5*(Z-V),F=this.Ka/Math.abs(Math.sin(F)),Z<V&&(Z+=h),V=s.Pd(M,F,(V+Z)/2),this.fc(V,f)))}return this.Jv=x,this.aA=T,this.fc(this.Yb[0],0),M=s.SO(this.Yb[this.gf-1]),this.Yb[0]=M,this.wW()},p.prototype.Au=function(f,g){if(!(2>g))for(var b=0;b<g;b++){var x=this.Yb[f+b];b!=0?this.NA.Ci(d.h.construct(x.x,x.y)):this.NA.Lt(d.h.construct(x.x,x.y))}},p.prototype.fM=function(f,g,b){var x=f.Ba(g),T=f.Vc(g);if(this.Yb=[],this.NA=b,f.dc(g)){for(g=f.Na(x);f.Na(T-1).qb(g);)T--;if(2<=T-x){for(this.Bw=T-x,this.wg=[],g=x;g<T;g++)this.wg.push(s.al(f.Na(g)));this.mE()&&this.Au(0,this.gf-1)}}else{for(g=f.Na(x);x<T&&f.Na(x+1).qb(g);)x++;for(g=f.Na(T-1);x<T&&f.Na(T-2).qb(g);)T--;if(2<=T-x){for(this.Bw=2*(T-x)-2,this.wg=[],(b=s.al(f.Na(x))).type|=1536,this.wg.push(b),g=x+1;g<T-1;g++)b=s.al(f.Na(g)),this.wg.push(b);for((b=s.al(f.Na(T-1))).type|=512,this.wg.push(b),g=T-2;g>=x+1;g--)(b=s.al(f.Na(g))).type|=1024,this.wg.push(b);if(this.mE())if(2<=this.Yb.length){for(f=-1,(T=!!(1024&this.Yb[this.gf-1].type))||(f=0),g=1;g<this.gf;g++)(x=!!(1024&this.Yb[g].type))?T||1<(T=g-1)-f+1&&this.Au(f,T-f+1):T&&(f=g-1),T=x;T||1<(T=this.gf-1)-f+1&&this.Au(f,T-f+1)}else f=0,T=this.gf-1,0<=f&&1<=T-f&&this.Au(f,T-f+1)}}this.wg=null,this.Bw=0,this.Yb=null,this.gf=0},p.prototype.wW=function(){for(var f=!1,g=0;g<this.gf;g++){var b=this.Yb[g];b.qh=g+1,b.sh=g-1,this.Yb[g]=b}for((b=this.Yb[0]).sh=this.gf-2,this.Yb[0]=b,(b=this.Yb[this.gf-2]).qh=0,this.Yb[this.gf-2]=b,g=b=0;g<this.gf;g++)if(256&this.Yb[b].type){var x=this.GP(b);if(x==-1){f=!0;break}b=x}else b=this.Yb[b].qh;return!f&&(this.QO(b),!0)},p.prototype.GP=function(f){for(var g,b,x=this.gf-1,T=f,M=1;M<=x-2;M++){g=T=this.Yb[T].qh,b=f;for(var C=1;C<=M;C++){if(b=this.Yb[b].sh,!(256&this.Yb[b].type||256&this.Yb[g].type)){var O=this.gS(b,g);if(O!=-1)return O}g=this.Yb[g].sh}}return-1},p.prototype.gS=function(f,g){var b=this.Yb[this.Yb[f].sh],x=this.Yb[f],T=this.Yb[this.Yb[g].sh],M=this.Yb[g];if(!this.JW(b,x,T,M))return-1;var C=new a;return this.xQ(b,x,T,M,C)&&!C.bE&&d.O.bK((x.x-b.x)*(M.y-T.y)-(x.y-b.y)*(M.x-T.x))!=d.O.bK(this.Ka)?(b=this.Yb[f].sh,C.an.type=x.type,C.an.qh=g,C.an.sh=b,this.Yb[f]=C.an,C.an=this.Yb[g],C.an.sh=f,this.Yb[g]=C.an,g):-1},p.prototype.JW=function(f,g,b,x){return Math.max(f.x,g.x)>=Math.min(b.x,x.x)&&Math.max(b.x,x.x)>=Math.min(f.x,g.x)&&Math.max(f.y,g.y)>=Math.min(b.y,x.y)&&Math.max(b.y,x.y)>=Math.min(f.y,g.y)},p.prototype.xQ=function(f,g,b,x,T){T.bE=!1;var M=(g.y-f.y)*(x.x-b.x)-(g.x-f.x)*(x.y-b.y),C=(b.y-f.y)*(g.x-f.x)-(b.x-f.x)*(g.y-f.y);if(0<=(M=M==0?2:C/M)&&1>=M){var O=M;if(M=(x.y-b.y)*(g.x-f.x)-(x.x-b.x)*(g.y-f.y),C=(f.y-b.y)*(x.x-b.x)-(f.x-b.x)*(x.y-b.y),0<=(M=M==0?2:C/M)&&1>=M)return T.an=s.TO(f.x+M*(g.x-f.x),f.y+M*(g.y-f.y)),T.an.Uh=b.Uh+O*(x.Uh-b.Uh),O!=0&&O!=1||M!=0&&M!=1||(T.bE=!0),T.VY=M,T.WY=O,!((O==0||O==1)&&0<M&&1>M||(M==0||M==1)&&0<O&&1>O)}return!1},p.prototype.QO=function(f){for(;this.Yb[f].sh<f;)f=this.Yb[f].sh;var g=0,b=f;do b=this.Yb[b],this.Yb[g]=b,b=b.qh,g++;while(b!=f);this.Yb[g]=this.Yb[0],this.gf=g+1},p.prototype.$C=function(f){var g=this.ko,b=g.Ga();if(b!=null){b.Zi();for(var x=-1;b.$a();)x++,this.fM(g,x,f)}},p.prototype.Rx=function(){var f=this.ko.getType();return f==322?this.eM():f==197?this.dM():d.aa.yd(f)?((f=new d.Ta).oc(this.ko,!0),this.ko=f,this.Rx()):f==1607?(f=new d.Ta,this.$C(f),f):f==1736?(f=new d.Da,this.$C(f),f):null},p}();d.IK=u}(Y||(Y={})),function(d){var L=function(){function s(a){this.qk=a}return s.prototype.D=function(a,u){this.qk.g.D(a,u)},s.prototype.vd=function(a){var u=this.qk.Fa.ja(a);this.qk.Fa.vd(a,-1),this.qk.g.pd(u,!1)},s}(),S=function(){function s(a){this.qk=a}return s.prototype.D=function(a,u){this.qk.IT.D(a,u)},s.prototype.vd=function(a){this.qk.Fa.vd(a,-1)},s}(),h=function(){function s(a){this.qk=a}return s.prototype.D=function(a,u){u.L(this.qk.LT[a])},s.prototype.vd=function(a){this.qk.Fa.vd(a,-1)},s}(),l=function(){function s(a){a===void 0?(this.Fa=new d.Yj,this.Fa.De(20),this.g=new d.gd,this.xT=this.g.Ig(550),this.Ss=this.g.vf(this.xT,-1),this.Xh=new L(this)):a instanceof Array?(this.Fa=new d.Yj,this.Fa.De(20),this.LT=a,this.Xh=new h(this)):(this.Fa=new d.Yj,this.Fa.De(20),this.IT=a,this.Xh=new S(this))}return s.prototype.Ib=function(a){var u=a.getType();if(d.Gx.xj(u))this.jN(a);else if(d.Vk.yd(u))this.oN(a);else if(u==197)this.gN(a);else{if(u!=33)throw d.i.N("invalid shape type");this.nN(a)}},s.prototype.cR=function(){var a=new d.Sa,u=this.Fa.rc(-1),p=new d.Da(this.g.ht);for(this.g.Vi(this.Fa.ja(u),a),p.nf(a),u=this.Fa.lb(u);u!=-1;u=this.Fa.lb(u))this.g.Vi(this.Fa.ja(u),a),p.lineTo(a);return p},s.RO=function(a){var u=new s(a),p=a.I(),f=1,g=new d.h,b=new d.h,x=new d.h;for(a.D(0,g);a.D(f,b),b.Rz(g)&&f<p-1;)f++;for(u.Fa.addElement(0,-1),u.Fa.xn(f),p=f+1;p<a.I();p++)a.D(p,x),(f=u.pC(x))!=-1&&u.Fa.Sj(f,p);for(x=new d.Sa,f=u.Fa.rc(-1),p=new d.Da(a.description),a.ve(u.Fa.ja(f),x),p.nf(x),f=u.Fa.lb(f);f!=-1;f=u.Fa.lb(f))a.ve(u.Fa.ja(f),x),p.lineTo(x);return p},s.construct=function(a,u,p){for(var f=new s(a),g=1,b=a[0];a[g].Rz(b)&&g<u-1;)g++;for(f.Fa.addElement(0,-1),f.Fa.xn(g),g+=1;g<u;g++)(b=f.pC(a[g]))!=-1&&f.Fa.Sj(b,g);for(a=0,u=f.Fa.rc(-1);u!=-1;u=f.Fa.lb(u))p[a++]=f.Fa.ja(u);return a},s.JG=function(a,u){var p=a.Ba(u),f=a.Vc(u);if(u=!a.dc(u)&&a.Nn(u),a=a.ub(0),f*=2,u&&(f-=2),6>f-(p*=2))return!0;u=new d.h;var g=new d.h,b=new d.h;a.tc(p,u),a.tc(p+2,g),a.tc(p+4,b);var x=s.Wu(g,b,u);if(x.ps()||!s.um(x.value()))return!1;var T=d.h.construct(g.x,g.y),M=new d.h;for(p+=6;p<f;p+=2)if(M.L(g),g.L(b),a.tc(p,b),(x=s.Wu(g,b,u)).ps()||!s.um(x.value())||(x=s.Wu(T,b,u)).ps()||!s.um(x.value())||(x=s.Wu(g,b,M)).ps()||!s.um(x.value()))return!1;return!0},s.prototype.jN=function(a){for(var u=new d.Sa,p=new d.h,f=0;f<a.I();f++){a.D(f,p);var g=this.Cr(p);if(g!=-1){a.ve(f,u);var b=this.g.fc(this.Ss,u);this.Fa.Sj(g,b)}}},s.prototype.gN=function(a){for(var u=new d.Sa,p=new d.h,f=0;4>f;f++){a.mB(f,p);var g=this.Cr(p);if(g!=-1){a.Hf(f,u);var b=this.g.fc(this.Ss,u);this.Fa.Sj(g,b)}}},s.prototype.oN=function(a){var u=new d.Sa,p=a.ac();if((p=this.Cr(p))!=-1){a.To(u);var f=this.g.fc(this.Ss,u);this.Fa.Sj(p,f)}p=a.wc(),(p=this.Cr(p))!=-1&&(a.Po(u),a=this.g.fc(this.Ss,u),this.Fa.Sj(p,a))},s.prototype.nN=function(a){var u=a.D();(u=this.Cr(u))!=-1&&(a=this.g.fc(this.Ss,a),this.Fa.Sj(u,a))},s.prototype.Cr=function(a){var u=-1;if(this.Fa.size(-1)==0)return this.Fa.addElement(-4,-1);if(this.Fa.size(-1)==1){var p=this.g.Na(this.Fa.ja(this.Fa.rc(-1)));return a.Rz(p)||(u=this.Fa.xn(-5)),u}return this.pC(a)},s.prototype.pC=function(a){var u=-1;do{var p=this.Fa.rc(-1),f=this.Fa.Fc(-1),g=this.Fa.ja(p),b=this.Fa.ja(f),x=new d.h,T=new d.h;if(this.Xh.D(g,x),this.Xh.D(b,T),g=d.h.Uq(T,a,x),s.um(g))u=this.Fa.xn(-1),(x=this.nC(a,f,p))!=p&&this.oC(a,p,this.Fa.we(x));else if(s.CG(g)){T=this.Fa.sv(-1);var M=this.Fa.rc(-1),C=this.Fa.Fc(-1);for(g=new d.h,b=new d.h;M!=this.Fa.we(C);){var O=this.Fa.ja(T);this.Xh.D(O,g),O=d.h.Uq(g,a,x),s.CG(O)?(C=T,T=this.Fa.ll(T)):(M=T,T=this.Fa.Xp(T))}if(T=C,x=M,O=this.Fa.ja(T),M=this.Fa.ja(x),this.Xh.D(O,g),this.Xh.D(M,b),x!=p&&(g=d.h.Uq(b,a,g),!s.um(g)))continue;u=this.Fa.zu(x,T,-2,!1),this.oC(a,T,f),this.nC(a,x,p)}else this.sb==null&&(this.sb=new d.yb),this.sb.Dc(T),this.sb.Qc(x),0>(x=this.sb.fe(a,!0))?(x=this.Fa.we(f),this.Fa.vd(f,-1),u=this.Fa.xn(-3),this.nC(a,x,p)):1<x&&(x=this.Fa.lb(p),this.Fa.vd(p,-1),u=this.Fa.zu(-1,x,-3,!1),this.oC(a,x,f))}while(!1);return u},s.prototype.oC=function(a,u,p){if(u!=p){var f=this.Fa.ja(u),g=this.Fa.lb(u),b=new d.h,x=new d.h;for(this.Xh.D(f,b);u!=p&&2<this.Fa.size(-1)&&(this.Xh.D(this.Fa.ja(g),x),f=d.h.Uq(x,a,b),!s.um(f));)f=u,u=g,b.L(x),g=this.Fa.lb(u),this.Xh.vd(f)}},s.prototype.nC=function(a,u,p){if(u==p)return p;var f=this.Fa.ja(u),g=this.Fa.we(u),b=new d.h,x=new d.h;for(this.Xh.D(f,b);u!=p&&2<this.Fa.size(-1)&&(this.Xh.D(this.Fa.ja(g),x),f=d.h.Uq(b,a,x),!s.um(f));)f=u,u=g,b.L(x),g=this.Fa.we(u),this.Xh.vd(f);return u},s.Wu=function(a,u,p){var f=new d.Wb;f.set(u.x),f.sub(a.x);var g=new d.Wb;g.set(p.y),g.sub(a.y);var b=new d.Wb;return b.set(u.y),b.sub(a.y),(u=new d.Wb).set(p.x),u.sub(a.x),f.Ag(g),b.Ag(u),f.sub(b),f},s.um=function(a){return 0>a},s.CG=function(a){return 0<a},s}();d.Zt=l}(Y||(Y={})),function(d){var L=function(){function S(h){this.g=null,this.tH=!0,this.nd=h}return S.zU=function(h,l,s){return h=d.ta.Er(h),d.Yt.Cv(l.Lg(),l.ih(),s.Lg(),s.ih(),d.lc.ox(h))},S.CO=function(h,l){var s=new d.Sa;return d.Yt.WT(h,l,s),s},S.V=function(h,l,s,a){return(s=new S(s)).g=h,s.qa=l,s.tH=a,s.EM()},S.prototype.nM=function(h){return d.Yt.iQ(this.g,h)},S.prototype.sM=function(h){return d.$t.V(this.g,h,this.nd)},S.prototype.EM=function(){var h=this.qa,l=d.ta.Er(h),s=1.00001*(h=d.ta.rN(h));h*=1.000001;for(var a=!1,u=30<this.g.fd+10?1e3:(this.g.fd+10)*(this.g.fd+10),p=0,f=this.g.jS();;p++){if(p>u)throw d.i.fa("Internal Error: max number of iterations exceeded");var g=this.nM(l);if(a=a||g,this.tH&&(g=this.g.Gp(l,!0,!1)!=0,a=a||g),g=!1,(p==0||f||d.$t.kI(!0,this.g,h,null,this.nd))&&(g=this.sM(s),a=a||g),!g)break;d.mp.zp(this.nd)}return a},S}();d.Tk=L}(Y||(Y={})),function(d){var L=function(){function h(l){this.$d=this.Mc=null,this.Ys=0,this.Ub=l,this.cA=!0}return h.prototype.uv=function(l,s){var a=this.g.bc(l);if(a==null){if(!this.g.ed(l,s))return null;a=s}return a},h.prototype.Xq=function(){var l;l===void 0&&(l=!1),this.Ys++,!l&&4095&this.Ys||(this.Ys=0,d.mp.zp(this.Ub))},h.prototype.nP=function(){var l=this.g.Yq(!1),s=!1,a=new d.yb,u=new d.yb,p=new d.l;p.Oa();var f=new d.l;f.Oa();for(var g=new d.Sa,b=new d.TC,x=l.next();x!=-1;x=l.next()){d.mp.zp(this.Ub);var T=null,M=!1;if(!d.aa.Rn(this.g.ic(l.ck))){if((T=this.uv(x,a))==null)continue;if(T.A(p),p.W(this.qa,this.qa),T.Bi(this.qa)){if(!T.Bi(0))continue;M=!0,T=null}}var C=this.g.Yq(l),O=C.next();for(O!=-1&&(O=C.next());O!=-1;O=C.next()){var F=null,P=!1;if(!d.aa.Rn(this.g.ic(C.ck))){if((F=this.uv(O,u))==null)continue;if(F.A(f),F.Bi(this.qa)){if(!F.Bi(0))continue;P=!0,F=null}}var G=0,q=0;if(T!=null&&F!=null)p.HG(f)&&(b.Oo(T),b.Oo(F),b.Ea(this.qa,!1),0<(G=b.ol(0))+(q=b.ol(1))&&(this.g.jr(x,b,0,!0),this.g.jr(O,b,1,!0)),b.clear());else if(T!=null){var V=new d.h;if(this.g.D(O,V),p.contains(V)){if(b.Oo(T),this.g.Vi(O,g),b.Kz(this.qa,g,!1),0<(G=b.ol(0)))if(this.g.jr(x,b,0,!0),P){for(P=-1,V=this.g.U(O);V!=-1&&V!=O&&(P=V,(F=this.uv(V,u))!=null&&F.Bi(0));V=this.g.U(V));for(V=O;V!=-1&&(this.g.Dh(V,b.Bf),V!=P);V=this.g.U(V));}else this.g.Dh(O,b.Bf);b.clear()}}else{if(F==null)continue;if(V=new d.h,this.g.D(x,V),f.W(this.qa,this.qa),f.contains(V)){if(b.Oo(F),this.g.Vi(x,g),b.Kz(this.qa,g,!1),0<(q=b.ol(0)))if(this.g.jr(O,b,0,!0),M){for(P=-1,V=this.g.U(x);V!=-1&&V!=x&&(P=V,(F=this.uv(V,u))!=null&&F.Bi(0));V=this.g.U(V));for(V=x;V!=-1&&(this.g.Dh(V,b.Bf),V!=P);V=this.g.U(V));}else this.g.Dh(x,b.Bf);b.clear()}}if(G+q!=0){if(G!=0){if((T=this.g.bc(x))==null){if(!this.g.ed(x,a))continue;T=a,a.A(p)}else T.A(p);if(T.Bi(this.qa))break}s=!0}}}return s},h.prototype.oP=function(){return this.QU()},h.prototype.QU=function(){return new d.RC().PX(this.g,this.qa)},h.prototype.lI=function(){var l=!1;this.Mc==null&&(this.Mc=new d.Yj);var s=new d.ia(0);s.Jb(this.g.fd+1);for(var a=this.g.Yq(),u=a.next();u!=-1;u=a.next())s.add(u);this.g.nx(s,s.size),s.add(-1),a=this.g.Gd(),u=this.g.Gd(),this.$d=new d.UC(this.g,this.qa,!this.cA),this.Mc.Vo(this.$d);var p=new d.ia(0),f=new d.ia(0),g=0;new d.h;var b=this.g.td;this.g.vb.mc();for(var x,T,M=this.g.vb.za[0].o,C=s.get(g++);C!=-1;){var O=x=M[2*(T=b.T(C,0))],F=T=M[2*T+1];do{var P=b.T(C,2),G=b.T(C,1);if(P!=-1){var q=b.T(P,0),V=M[2*q];0>(F<(q=M[2*q+1])?-1:F>q?1:O<V?-1:O>V?1:0)&&(f.add(C),f.add(P))}G!=-1&&(V=M[2*(q=b.T(G,0))],0>(F<(q=M[2*q+1])?-1:F>q?1:O<V?-1:O>V?1:0)&&(f.add(G),f.add(G))),(V=this.g.Pa(C,a))!=-1&&(p.add(V),this.g.Ra(C,a,-1)),(V=this.g.Pa(C,u))!=-1&&(p.add(V),this.g.Ra(C,u,-1)),(C=s.get(g++))!==-1&&(O=M[2*(F=b.T(C,0))],F=M[2*F+1])}while(C!=-1&&O===x&&F===T);for(O=p.size==1&&f.size==2,V=F=-1,P=0,G=p.size;P<G;P++){q=p.get(P);var Z=this.Mc.we(q);if(Z==-1||p.hG(Z)||(F=Z),(q=this.Mc.lb(q))==-1||p.hG(q)||(V=q),F!=-1&&V!=-1)break}for(this.$d.$J(T,x),P=0,G=p.size;P<G;P++)q=p.get(P),this.Mc.vd(q,-1);if(p.clear(!1),!O&&F!=-1&&V!=-1&&this.qO(F,V)){l=!0,this.Ni=this.$d.rm();break}for(P=0,G=f.size;P<G;P+=2){if(T=f.get(P),x=f.get(P+1),O?(T=this.Mc.zu(F,V,T,!0),O=!1):T=this.Mc.addElement(T,-1),this.$d.rg){this.Ni=this.$d.rm(),l=!0;break}this.g.Pa(x,a)==-1?this.g.Ra(x,a,T):this.g.Ra(x,u,T)}if(l)break;f.Bh(0)}return this.g.Td(a),this.g.Td(u),l},h.prototype.qO=function(l,s){return this.$d.compare(this.Mc,this.Mc.ja(l),s),l=this.$d.rg,this.$d.Kr(),l},h.yE=function(l){for(var s=l.ld;s!=-1;s=l.ue(s))if(d.aa.Hc(l.ic(s)))return!0;return!1},h.fQ=function(l,s,a,u){return!!h.yE(l)&&((s=new h(u)).g=l,s.qa=a,15>l.fd?l=s.nP():s.oP())},h.V=function(l,s,a){return h.fQ(l,l.IF(),s,a)},h.kI=function(l,s,a,u,p){if(!h.yE(s))return!1;var f=new h(p);if(f.g=s,f.qa=a,f.cA=l,f.lI())return u!=null&&u.Wt(f.Ni),!0;var g=new d.Dd;return g.$B(),s.Oc(g),(f=new h(p)).g=s,f.qa=a,f.cA=l,l=f.lI(),g.$B(),s.Oc(g),!!l&&(u!=null&&u.Wt(f.Ni),!0)},h.Ml=function(l,s){return!(16>(l=l.I()))&&2*l+Math.log(l)*Math.LOG10E/Math.log(2)*s<1*l*s},h.lP=function(l,s,a,u){var p=s.getType();if(d.aa.Hc(p))return new h(u).mP(l,s,a);throw d.i.fa("crack_A_with_B")},h.prototype.mP=function(l,s,a){var u=new d.l;l.xc(u);var p=new d.l;if(s.xc(p),p.W(a,a),!p.isIntersecting(u))return l;var f=l.Bb,g=null;f!=null&&(g=f.Fb),h.Ml(l,l.I())&&(g=d.ta.jj(l,p));var b=g!=null?g.getIterator():null,x=s.Ga();s=l.Ga();var T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(p=[];x.$a();)for(;x.Ha();){var M=x.ha();if(g!=null){for(b.Uo(M,a),f=b.next();f!=-1;f=b.next())if(this.Xq(),s.Vb(g.ja(f),-1),s.Ha()){var C=(f=s.ha()).Ea(M,null,T,null,a);for(f=0;f<C;++f){var O=T[f];if(O!=0&&O!=1){var F=s.wb(),P=new S;P.t=O,P.index=F,p.push(P)}}}}else{var G=new d.l;if(M.xc(G),G.W(a,a),u.isIntersecting(G)){for(s.Zi();s.$a();)for(;s.Ha();)if(this.Xq(),f=s.ha(),O=new d.l,f.xc(O),O.isIntersecting(G))for(C=f.Ea(M,null,T,null,a),f=0;f<C;++f)(O=T[f])!=0&&O!=1&&(F=s.wb(),(P=new S).t=O,P.index=F,p.push(P))}}}if(p.length==0)return l;for(p=p.sort(S.Ey),l=l.Ia(),s.Zi();s.$a()&&!s.Ha(););for(a=s.ha(),u=new d.ig,g=-1,f=0,b=p.length;f<b;){for(T=p[f].index,x=f+1;x<b&&p[x].index==T;)++x;for(;s.wb()<T;){if(this.Xq(),M=s.Ha(),O=s.gb,(G=M||!s.On()||s.Pn())&&l.oc(a,g!=O),g=O,!M)for(;s.$a()&&!s.Ha(););a=s.ha()}for(T=0;f<x;f++)(O=p[f].t)!=T&&(a.ah(T,O,u),T=O,O=s.gb,l.oc(u.get(),g!=O),g=O);if((G=(M=s.Ha())||!s.On()||s.Pn())&&(a.ah(T,1,u),l.oc(u.get(),!1)),M)a=s.ha();else{for(;s.$a()&&!s.Ha(););a=s.Ha()?s.ha():null}f=x}for(a!=null&&(O=s.gb,(G=(M=s.Ha())||!s.On()||s.Pn())&&l.oc(a,g!=O),g=O),M=s.Ha();;){if(!M){for(;s.$a()&&!(M=s.Ha()););if(!M)break}a=s.ha(),O=s.gb,(G=(M=s.Ha())||!s.On()||s.Pn())&&l.oc(a,g!=O),g=O}return l},h}();d.$t=L;var S=function(){function h(){}return h.Ey=function(l,s){return l.index==s.index?l.t>s.t?1:l.t<s.t?-1:0:l.index>s.index?1:-1},h}()}(Y||(Y={})),function(d){var L;(L=d.KK||(d.KK={}))[L.Left=0]="Left",L[L.Right=1]="Right",L[L.Coincident=2]="Coincident",L[L.Undefined=3]="Undefined",L[L.Uncut=4]="Uncut";var S=function(s,a,u,p,f,g,b,x,T,M,C){this.X=s,this.bt=a,this.Ns=u,this.tg=p,this.Lm=M,this.Al=C};d.uY=S;var h=function(){function s(a,u){this.JH=a,this.Hi=u}return s.prototype.qM=function(a,u){var p=new d.h;this.Hi.D(a,p);var f=new d.h;return this.Hi.D(u,f),(p=p.compare(f))!=0?p:(a=this.Hi.Pa(a,this.JH))<(u=this.Hi.Pa(u,this.JH))?-1:a==u?0:1},s}(),l=function(s,a,u,p,f,g,b,x,T){this.tg=s,this.Ns=a,this.OA=u,this.UH=p,this.Ei=f,this.Al=g,this.Lm=b,this.VH=x,this.OT=T};d.tY=l,d.LK=function(){function s(){}return s.JK=function(a,u,p,f,g,b){if(u.B())a=new S(u,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),g.push(a);else if(p.B())a=new S(u,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),g.push(a);else{var x=new d.gd;if(x.Ib(u),x.Ib(p),d.Tk.V(x,f,b,!0),x.fd==0)a=new S(u.Ia(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),g.push(a);else{for(u=0,p=x.Gd(),f=x.ld;f!=-1;f=x.ue(f))for(b=x.Ob(f);b!=-1;b=x.Rb(b))for(var T=x.Xa(b),M=0,C=x.Ja(b);M<C;T=x.U(T),M++)x.Ra(T,p,u++);u=s.HM(p,x),s.cM(a,u,x,g)}}},s.HM=function(a,u){for(var p=u.fd,f=new d.ia(0),g=u.ld;g!=-1;g=u.ue(g))for(var b=u.Ob(g);b!=-1;b=u.Rb(b))for(var x=u.Xa(b),T=0,M=u.Ja(b);T<M;x=u.U(x),T++)f.add(x);var C=new h(a,u);f.Vd(0,p,function(Ce,$e){return C.qM(Ce,$e)}),a=[];var O=[],F=u.Gd(),P=u.Gd();g=u.ld,b=u.ue(g),M=new d.h;var G=new d.h,q=f.get(0),V=u.bd(q),Z=u.Qf(V);u.D(q,M);var X=1;for(x=0;X<p-1;){var te=!1;for(T=X;T<p;T++)if(T!=x){var oe=f.get(T),me=u.bd(oe),Se=u.Qf(me);if(u.D(oe,G),!M.qb(G))break;Z==g&&Se==b&&(te=s.uM(F,P,u,a,O,V,q,me,oe))}if(te||x==X-1){if(te&&x==X-1&&X--,++x==p)break;q=f.get(x),V=u.bd(q),Z=u.Qf(V),u.D(q,M)}te||(X=x+1)}for(p=[],g=u.ld;g!=-1;g=u.ue(g))for(b=u.Ob(g);b!=-1;b=u.Rb(b))for(f=u.Xa(b),T=0,M=u.Ja(b);T<M;f=u.U(f),T++){if(0<=(x=u.Pa(f,P)))for(;x<O.length&&O[x].tg==f;)p.push(O[x++]);if(0<=(x=u.Pa(f,F)))for(;x<a.length&&a[x].tg==f;)p.push(a[x++])}return u.Td(F),u.Td(P),p},s.uM=function(a,u,p,f,g,b,x,T,M){var C=p.rj(b),O=p.rj(T),F=p.Xa(b),P=p.Xa(T),G=p.Ma(x),q=p.Ma(M),V=!1,Z=!1,X=!1,te=!1;return x!=F&&(M!=P&&(V=s.vM(a,p,f,b,G,T,q)),M!=O&&(Z=s.wM(a,p,f,b,G,T,M))),x!=C&&(M!=P&&(X=s.xM(u,p,g,b,x,T,q,F)),M!=O&&(te=s.yM(u,p,g,b,x,T,M,F))),V&&Z&&X?(a=f.length-1,g[te?g.length-2:g.length-1].Ei==2&&(f[a-1]=f[a],--f.length)):V&&Z&&te&&g[g.length-1].Ei==2&&(g=f[f.length-1],--f.length,p.Pa(g.tg,a)==f.length&&p.Ra(g.tg,a,-1)),V||Z||X||te},s.vM=function(a,u,p,f,g,b,x){var T=new d.yb,M=new d.yb,C=[0,0],O=[0,0],F=u.bc(g);return F==null&&(u.ed(g,T),F=T),(T=u.bc(x))==null&&(u.ed(x,M),T=M),2>(F=F.Ea(T,null,C,O,0))&&(f=new l(g,f,C[0],NaN,F,x,b,O[0],NaN),p.push(f),0>(f=u.Pa(g,a))&&u.Ra(g,a,p.length-1)),!0},s.wM=function(a,u,p,f,g,b,x){var T=new d.yb,M=new d.yb,C=[0,0],O=[0,0],F=u.bc(g);return F==null&&(u.ed(g,T),F=T),(T=u.bc(x))==null&&(u.ed(x,M),T=M),2>(F=F.Ea(T,null,C,O,0))&&(f=new l(g,f,C[0],NaN,F,x,b,O[0],NaN),p.push(f),0>(f=u.Pa(g,a))&&u.Ra(g,a,p.length-1),!0)},s.xM=function(a,u,p,f,g,b,x,T){var M=new d.yb,C=new d.yb,O=[0,0],F=[0,0],P=u.bc(g);return P==null&&(u.ed(g,M),P=M),(M=u.bc(x))==null&&(u.ed(x,C),M=C),(P=P.Ea(M,null,O,F,0))==2?(f=new l(g,f,O[0],O[1],P,x,b,F[0],F[1]),p.push(f),0>(f=u.Pa(g,a))&&u.Ra(g,a,p.length-1),!0):(C=!1,g==T&&(f=new l(g,f,O[0],NaN,P,x,b,F[0],NaN),p.push(f),0>(f=u.Pa(g,a))&&u.Ra(g,a,p.length-1),C=!0),C)},s.yM=function(a,u,p,f,g,b,x,T){var M=new d.yb,C=new d.yb,O=[0,0],F=[0,0],P=u.bc(g);return P==null&&(u.ed(g,M),P=M),(M=u.bc(x))==null&&(u.ed(x,C),M=C),(P=P.Ea(M,null,O,F,0))==2?(f=new l(g,f,O[0],O[1],P,x,b,F[0],F[1]),p.push(f),0>(f=u.Pa(g,a))&&u.Ra(g,a,p.length-1),!0):(C=!1,g==T&&(f=new l(g,f,O[0],NaN,P,x,b,F[0],NaN),p.push(f),0>(f=u.Pa(g,a))&&u.Ra(g,a,p.length-1),C=!0),C)},s.cM=function(a,u,p,f){var g=[];g[0]=new d.h,g[1]=new d.h,g[2]=new d.h,g[3]=new d.h;var b=new d.h,x=new d.h,T=new d.h,M=new d.h,C=null;f!=null&&(C=new d.ig).Or();var O=0,F=null,P=new d.yb;new d.yb;for(var G=p.Ob(p.ld);G!=-1;G=p.Rb(G)){for(var q=4,V=-1,Z=-1,X=-1,te=-1,oe=NaN,me=!0,Se=!1,Ce=!0,$e=!0,Ue=!0,Te=0,ut=G,ot=0,Rt=p.Xa(G),hi=p.Ja(G),ir=0;ir<hi;Rt=p.U(Rt),ir++){var mi=p.bc(Rt);if(mi==null){if(!p.ed(Rt,P))continue;mi=P}Z==-1&&(Z=Rt);for(var Pt=0;O<u.length&&Rt==u[O].tg;){V=u[O].Ns;var ct=u[O].tg,Tt=u[O].OA,Mi=u[O].Lm,_i=u[O].Al,fo=u[O].VH;if(u[O].Ei==2){if(Se||(ut=V,Z=ct,ot=Tt,X=Mi,te=_i,oe=fo,q=2,f!=null?F=new d.Ta:Te=0,Ue=!1,$e=!0),Tt=u[O].UH,fo=u[O].OT,f!=null?(mi.ah(Pt,u[O].UH,C),F.oc(C.get(),$e)):Te++,Pt=Tt,Se=!0,$e=me=!1,O+1==u.length||u[O+1].Ei!=2||u[O+1].tg==ct&&u[O+1].OA!=Pt){if(f!=null){var Lt=new S(F,2,V,ct,Tt,q,ut,Z,ot,Mi,_i);f.push(Lt)}else null.add(Te);ut=V,Z=ct,ot=Tt,X=Mi,te=_i,oe=fo,q=2,Se=me=!1,$e=Ue=!0}}else{var xn=p.U(ct);if(O<u.length-1&&u[O+1].tg==xn&&u[O+1].Al==_i&&u[O+1].Ei==2)Tt!=Pt&&(Ue&&(f!=null?F=new d.Ta:Te=0),me=0<O&&u[O-1].Ns==V?q==1?0:q==0?1:3:3,f!=null?(mi.ah(Pt,Tt,C),F.oc(C.get(),$e),Lt=new S(F,me,V,ct,Tt,q,ut,Z,ot,Mi,_i),f.push(Lt)):(Te++,null.add(Te)),Pt=Tt,ut=V,Z=ct,ot=Tt,X=Mi,te=_i,oe=fo,q=me,me=Ce=!1,$e=Ue=!0);else if(!s.CM(a,p,u,O,b,x)){s.zM(p,u,O,G,Rt,T,M);var Zt=!1;if(xn=!1,Lt=!0,!(b.qb(T)||x.qb(T)||b.qb(M)||x.qb(M))){g[0].L(b),g[1].L(x),g[2].L(T),g[3].L(M),g.sort(d.h.nu);var In=g[0],ry=g[1],ny=g[2],re=g[3];In.qb(b)?ry.qb(x)?a?(xn=Zt=!0,Lt=!1):Zt=!1:re.qb(x)?a?Lt=xn=Zt=!0:Zt=!1:(Zt=!0,Lt=ry.qb(T)):ry.qb(b)?ny.qb(x)?a?(xn=Zt=!0,Lt=!1):Zt=!1:In.qb(x)?a?Lt=xn=Zt=!0:Zt=!1:(Zt=!0,Lt=ny.qb(T)):ny.qb(b)?re.qb(x)?a?(xn=Zt=!0,Lt=!1):Zt=!1:ry.qb(x)?a?Lt=xn=Zt=!0:Zt=!1:(Zt=!0,Lt=re.qb(T)):In.qb(x)?a?(xn=Zt=!0,Lt=!1):Zt=!1:ny.qb(x)?a?Lt=xn=Zt=!0:Zt=!1:(Zt=!0,Lt=In.qb(T))}Zt&&(Zt=Rt==ct,(Tt!=Pt||Zt&&Pt==0)&&(Ue&&(f!=null?F=new d.Ta:Te=0),f!=null?(mi.ah(Pt,Tt,C),F.oc(C.get(),$e)):Te++),Lt?q!=1?((Tt!=Pt||Zt&&Pt==0)&&(f!=null?(Lt=new S(F,1,V,ct,Tt,q,ut,Z,ot,Mi,_i),f.push(Lt)):null.add(Te)),xn?(O>=u.length-2||u[O+2].Ns!=V)&&(q=0):q=1):((Tt!=Pt||Zt&&Pt==0)&&(f!=null?(Lt=new S(F,3,V,ct,Tt,q,ut,Z,ot,Mi,_i),f.push(Lt)):null.add(Te)),q=1):q!=0?((Tt!=Pt||Zt&&Pt==0)&&(f!=null?(Lt=new S(F,0,V,ct,Tt,q,ut,Z,ot,Mi,_i),f.push(Lt)):null.add(Te)),xn?(O>=u.length-2||u[O+2].Ns!=V)&&(q=1):q=0):((Tt!=Pt||Zt&&Pt==0)&&(f!=null?(Lt=new S(F,3,V,ct,Tt,q,ut,Z,ot,Mi,_i),f.push(Lt)):null.add(Te)),q=0),(Tt!=Pt||Zt&&Pt==0)&&(Pt=Tt,ut=V,Z=ct,ot=Tt,X=Mi,te=_i,oe=fo,me=Ce=!1,$e=Ue=!0))}}O++}Pt!=1&&(Ue&&(f!=null?F=new d.Ta:Te=0),f!=null?(mi.ah(Pt,1,C),F.oc(C.get(),$e)):Te++,$e=Ue=!1,Ce=!0)}Ce&&(Tt=1,ct=p.rj(G),ct=p.Ma(ct),_i=Mi=-1,fo=NaN,me?f!=null?(Lt=new S(F,4,V,ct,Tt,q,ut,Z,ot,Mi,_i),f.push(Lt)):null.add(Te):(me=q==1?0:q==0?1:3,f!=null?(Lt=new S(F,me,V,ct,Tt,q,ut,Z,ot,Mi,_i),f.push(Lt)):null.add(Te)))}},s.CM=function(a,u,p,f,g,b){var x=p[f].VH;if(x==1)return s.AM(a,u,p,f,g,b);if(x==0)return s.BM(a,u,p,f,g,b);throw d.i.Qa()},s.AM=function(a,u,p,f,g,b){var x=new d.yb,T=p[f].tg,M=p[f].Lm,C=p[f].Al,O=-1,F=-1,P=-1,G=-1;if(!a&&0<f){var q=p[f-1];O=q.tg,F=q.Lm,P=q.Al,G=q.Ei}var V=-1,Z=-1,X=-1,te=-1;f<p.length-1&&(V=(q=p[f+1]).tg,Z=q.Lm,X=q.Al,te=q.Ei);var oe=u.U(T);return q=u.U(C),a?f==p.length-1||V!=T||Z!=M||X!=q||te==2?((a=u.bc(C))==null&&(u.ed(C,x),a=x),b.L(a.kg()),g.mt(b),b.normalize(),g.normalize(),!1):((a=u.bc(C))==null&&(u.ed(C,x),a=x),g.L(a.kg()),(a=u.bc(q))==null&&(u.ed(q,x),a=x),b.L(a.kg()),g.Sq(),b.normalize(),g.normalize(),!1):0<f&&O==T&&F==M&&P==q&&G==2||f<p.length-1&&V==oe&&Z==M&&X==q&&te==2?((a=u.bc(C))==null&&(u.ed(C,x),a=x),b.L(a.kg()),g.mt(b),b.normalize(),g.normalize(),!1):!(f<p.length-1&&V==T&&Z==M&&X==q)||((a=u.bc(C))==null&&(u.ed(C,x),a=x),g.L(a.kg()),(a=u.bc(q))==null&&(u.ed(q,x),a=x),b.L(a.kg()),g.Sq(),b.normalize(),g.normalize(),!1)},s.BM=function(a,u,p,f,g,b){var x=new d.yb,T=p[f].tg,M=p[f].Lm,C=p[f].Al,O=-1,F=-1,P=-1,G=-1;if(!a&&f<p.length-1){var q=p[f+1];O=q.tg,F=q.Lm,P=q.Al,G=q.Ei}var V=-1,Z=-1,X=-1;q=-1,0<f&&(V=(q=p[f-1]).tg,Z=q.Lm,X=q.Al,q=q.Ei);var te=u.U(T),oe=u.Ma(C);return a?f!=0&&V==T&&Z==M&&X==oe&&q!=2||((a=u.bc(C))==null&&(u.ed(C,x),a=x),b.L(a.kg()),g.mt(b),b.normalize(),g.normalize(),!1):!(0<f&&V==T&&Z==M&&X==oe&&q==2||f<p.length-1&&O==te&&F==M&&P==oe&&G==2)||((a=u.bc(C))==null&&(u.ed(C,x),a=x),b.L(a.kg()),g.mt(b),b.normalize(),g.normalize(),!1)},s.zM=function(a,u,p,f,g,b,x){var T=new d.yb,M=a.bc(g);if(M==null&&(a.ed(g,T),M=T),u=(p=u[p]).tg,p=p.OA,g=a.U(u),p==1)b.L(M.kg()),g!=-1&&g!=a.rj(f)?((M=a.bc(g))==null&&(a.ed(g,T),M=T),x.L(M.kg()),(M=a.bc(u))==null&&a.ed(u,T)):x.L(b),b.Sq(),x.normalize(),b.normalize();else{if(p!=0)throw d.i.Qa();x.L(M.kg()),b.mt(x),x.normalize(),b.normalize()}},s}()}(Y||(Y={})),function(d){var L;(L=d.bM||(d.bM={}))[L.Linear=0]="Linear",L[L.Angular=1]="Angular",L[L.Area=2]="Area";var S=function(){function f(g,b,x){this.od=b,this.ai=x,this.vA=g}return f.prototype.Nb=function(g){return g instanceof f&&this.ai===g.ai},f.aG=function(g){return g.od!==0?null:g.vA===-1?new f(-1,2,g.ai*g.ai):f.Zg(u[g.vA])},f.Zg=function(g){return(g=a[g])===void 0?null:g},f.ZO=function(g,b,x){var T=null;if(x!=null)try{x.values[0]==="EPSG"&&(T=f.Zg(parseInt(x.values[1])))}catch{}return T===null&&(T=new f(-1,g,b)),T},f.prototype.Ec=function(){return this.vA},f.prototype.CF=function(g){if(g.od!=this.od)throw d.i.Hb();return this.ai/g.ai},f.Nh=function(g,b,x){return b.CF(x)*g},f.XE=function(g,b,x,T,M){for(x=x.CF(T),T=0;T<b;T++)M[T]=g[T]*x},f}();d.Tc=S;for(var h=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2.5899984703195216e6,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988110336e-6,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3.4345281495040003e6,109458,3434290937856e-6,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1244521604938272e-22,109465,1e-12,109466,1e-18],l=[1031,484813681109536e-23,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],s=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],a=[],u=[],p=0;p<h.length;p+=2)a[h[p]]=new S(h[p],2,h[p+1]);for(h=null,p=0;p<l.length;p+=2)a[l[p]]=new S(l[p],1,l[p+1]);for(l=null,p=0;p<s.length;p+=3)a[s[p]]=new S(s[p],0,s[p+1]),u[s[p]]=s[p+2];s=null}(Y||(Y={})),function(d){var L=function(){function S(){this.xb=this.pb=0}return S.prototype.set=function(h,l){l!==void 0?(this.pb=h,this.xb=l):typeof h=="number"?(this.pb=h,this.xb=0):(this.pb=h.pb,this.xb=h.xb)},S.prototype.value=function(){return this.pb},S.prototype.add=function(h){var l=this.pb+h.pb;h=this.xb+h.xb+2220446049250313e-31*Math.abs(l),this.pb=l,this.xb=h},S.prototype.kN=function(){var h=this.pb+1,l=this.xb+2220446049250313e-31*Math.abs(h);this.pb=h,this.xb=l},S.prototype.dN=function(h,l){this.pb=h.pb+l.pb,this.xb=h.xb+l.xb+2220446049250313e-31*Math.abs(this.pb)},S.prototype.sub=function(h){if(typeof h=="number"){var l=this.pb-h;h=this.xb+2220446049250313e-31*Math.abs(l)}else l=this.pb-h.pb,h=this.xb+h.xb+2220446049250313e-31*Math.abs(l);this.pb=l,this.xb=h},S.prototype.Ag=function(h){var l=this.pb*h.pb;this.xb=this.xb*Math.abs(h.pb)+h.xb*Math.abs(this.pb)+this.xb*h.xb+2220446049250313e-31*Math.abs(l),this.pb=l},S.prototype.No=function(h){var l=this.pb*h;this.xb=this.xb*Math.abs(h)+2220446049250313e-31*Math.abs(l),this.pb=l},S.prototype.Kl=function(h,l){var s=Math.abs(h.pb)*Math.abs(l.pb);this.xb=h.xb*Math.abs(l.pb)+l.xb*Math.abs(h.pb)+h.xb*l.xb+2220446049250313e-31*Math.abs(s),this.pb=s},S.prototype.jm=function(h){var l=Math.abs(h.pb),s=this.pb/h.pb,a=(this.xb+Math.abs(s)*h.xb)/l;h.xb>.01*l&&(a*=1+(1+(h=h.xb/l))*h),this.pb=s,this.xb=a+2220446049250313e-31*Math.abs(s)},S.prototype.sqrt=function(){if(0<=this.pb){var h=Math.sqrt(this.pb),l=this.pb>10*this.xb?.5*this.xb/h:this.pb>this.xb?h-Math.sqrt(this.pb-this.xb):Math.max(h,Math.sqrt(this.pb+this.xb)-h);l+=2220446049250313e-31*Math.abs(h)}else this.pb<-1*this.xb?l=h=NaN:(h=0,l=Math.sqrt(this.xb));this.pb=h,this.xb=l},S.prototype.sin=function(h){var l=Math.sin(h.pb),s=Math.cos(h.pb);this.pb=l,l=Math.abs(l),this.xb=(Math.abs(s)+.5*l*h.xb)*h.xb+2220446049250313e-31*l},S.prototype.cos=function(h){var l=Math.sin(h.pb),s=Math.cos(h.pb);this.pb=s,s=Math.abs(s),this.xb=(Math.abs(l)+.5*s*h.xb)*h.xb+2220446049250313e-31*s},S.prototype.qg=function(){return Math.abs(this.pb)<=this.xb},S.prototype.ps=function(){return this.qg()&&this.xb!=0},S}();d.Wb=L}(Y||(Y={}));var Hi=new Y.h,Ho=new Y.h,Sn=new Y.h,Ll=new Y.h,Vu=new Y.h;(function(d){var L,S;(S=L||(L={}))[S.closedPath=1]="closedPath",S[S.exteriorPath=2]="exteriorPath",S[S.ringAreaValid=4]="ringAreaValid";var h=function(){function l(s,a,u,p,f,g,b){a!==void 0?(this.ib=s,this.ck=a,this.bl=u,this.ii=p,this.ya=g,this.hA=b,this.ew=f):(this.ib=s.ib,this.ck=s.ck,this.bl=s.bl,this.ii=s.ii,this.ya=s.ya,this.hA=s.hA,this.ew=s.ew),this.bH=!0}return l.prototype.next=function(){return this.bH?(this.bH=!1,this.ii):this.ii!=-1?(this.ii=this.ib.U(this.ii),this.ya++,this.ii!=-1&&this.ii!=this.ew?this.ii:this.$T()):-1},l.prototype.$T=function(){for(this.bl=this.ib.Rb(this.bl),this.ya=0;this.ck!=-1;){for(;this.bl!=-1;this.bl=this.ib.Rb(this.bl))if(this.ew=this.ii=this.ib.Xa(this.bl),this.ii!=-1)return this.ii;if(this.ck=this.ib.ue(this.ck),this.ck==-1)break;this.hA&&!d.aa.Hc(this.ib.ic(this.ck))||(this.bl=this.ib.Ob(this.ck))}return-1},l.AP=function(s,a,u,p,f,g,b){return new l(s,a,u,p,f,g,b)},l}();d.zY=h,L=function(){function l(){this.jo=this.Am=this.wk=this.cd=this.Ck=this.vo=this.Oi=this.md=this.bi=this.Sg=this.We=this.Il=null,this.qw=this.ld=-1,this.fd=0,this.fA=!1,this.ht=this.it=this.vb=null}return l.prototype.Sh=function(s){return this.We!=null?this.We[s]:null},l.prototype.Xg=function(s,a){if(this.We==null){if(a==null)return;this.We=[];for(var u=0,p=this.vb.I();u<p;u++)this.We.push(null)}this.We[s]=a},l.prototype.bp=function(s,a){this.md.S(s,1,a)},l.prototype.ap=function(s,a){this.md.S(s,2,a)},l.prototype.VB=function(s,a){this.md.S(s,6,a)},l.prototype.Sp=function(s){return this.md.T(s,6)},l.prototype.gx=function(s,a){this.md.S(s,7,a)},l.prototype.qv=function(s){return this.md.T(s,0)},l.prototype.OJ=function(s,a){this.cd.S(s,1,a)},l.prototype.SJ=function(s,a){this.cd.S(s,0,a)},l.prototype.JF=function(s){return this.cd.T(s,7)},l.prototype.Zo=function(s,a){this.cd.S(s,3,a)},l.prototype.$o=function(s,a){this.cd.S(s,4,a)},l.prototype.uU=function(s){this.cd==null&&(this.cd=new d.$c(8));var a=this.cd.Ce();return this.cd.S(a,2,s),this.cd.S(a,5,0),this.cd.S(a,6,0),this.cd.S(a,7,a),a},l.prototype.OQ=function(s){this.cd.jd(s)},l.prototype.wU=function(s){this.md==null&&(this.md=new d.$c(8),this.td=new d.$c(5),this.Oi=new d.be(0),this.vo=new d.be(0));var a=this.md.Ce();return this.md.S(a,0,a),this.md.S(a,3,0),this.md.S(a,6,0),this.gx(a,s),a>=this.Oi.size&&(s=16>a?16:d.O.truncate(3*a/2),this.Oi.resize(s),this.vo.resize(s)),this.Oi.set(a,0),this.vo.set(a,0),a},l.prototype.sF=function(s){this.md.jd(s)},l.prototype.Vy=function(s){this.td.jd(s),this.fd--},l.prototype.oI=function(s){this.md==null&&(this.md=new d.$c(8),this.td=new d.$c(5),this.Oi=new d.be(0),this.vo=new d.be(0));var a=this.td.Ce(),u=0<=s?s:a;if(this.td.S(a,0,u),0>s){if(u>=this.vb.I()){if(s=16>u?16:d.O.truncate(3*u/2),this.vb.resize(s),this.We!=null)for(var p=0;p<s;p++)this.We.push(null);this.Sg!=null&&this.Sg.resize(s),this.it=this.vb.ub(0)}this.vb.Cb(u,-1e38,-1e38),this.We!=null&&(this.We[u]=null),this.Sg!=null&&this.Sg.write(u,1)}return this.td.S(a,4,2*u),this.fd++,a},l.prototype.wj=function(s,a,u){var p=a!=-1?this.Ma(a):this.rj(s),f=p!=-1?this.U(p):-1,g=this.oI(u==null?this.fd:-1),b=this.Ua(g);return u!=null&&this.vb.Ht(b,u),this.aj(g,s),this.Bc(g,f),this.Cc(g,p),f!=-1&&this.Cc(f,g),p!=-1&&this.Bc(p,g),u=this.dc(s),p=this.Xa(s),a==-1&&this.Wg(s,g),a==p&&this.Jf(s,g),u&&f==-1&&(this.Bc(g,g),this.Cc(g,g)),this.Vj(s,this.Ja(s)+1),s=this.Qf(s),this.Tj(s,this.I(s)+1),g},l.prototype.nm=function(){return this.jo==null&&(this.jo=new d.Sa(this.vb.description)),this.jo},l.prototype.Yo=function(s,a){this.cd.S(s,2,-134217729&this.cd.T(s,2)||(a==1?134217728:0))},l.prototype.In=function(s){return 134217728&this.cd.T(s,2)?1:0},l.prototype.hN=function(s){var a=this.Ig(s.getType(),s.description);return s.getType()==1736&&this.Yo(a,s.In()),this.UD(a,s),a},l.prototype.iN=function(s){var a=this.Ig(s.getType(),s.description);return this.VD(a,s),a},l.prototype.XV=function(s,a){this.md==null&&(this.md=new d.$c(8),this.td=new d.$c(5),this.Oi=new d.be(0),this.vo=new d.be(0)),this.md.De(this.md.Hg+s),this.td.De(this.td.Hg+a),this.Oi.Jb(this.Oi.size+s),this.vo.Jb(this.vo.size+s)},l.prototype.UD=function(s,a){this.XV(a.da(),a.I()),this.Il.Fd(a,0,a.I()),this.it=this.vb.ub(0);for(var u=this.We!=null&&a.Ve!=null,p=0,f=a.da();p<f;p++)if(!(2>a.Ja(p))){var g=this.vf(s,-1);this.kn(g,a.dc(p));for(var b=a.Ba(p),x=a.Vc(p);b<x;b++){var T=this.wj(g,-1,null);if(u)if(T=this.Ua(T),1&a.ZF(b))this.Xg(T,null);else{var M=new d.ig;a.bc(b,M,!0),this.Xg(T,M.get())}}}},l.prototype.VD=function(s,a){this.Il.Fd(a,0,a.I()),this.it=this.vb.ub(0),s=this.vf(s,-1);var u=0;for(a=a.I();u<a;u++)this.wj(s,-1,null)},l.prototype.NX=function(s,a,u){var p=this.U(s);if(p==-1)throw d.i.Qa();for(var f=this.nm(),g=this.bd(s),b=0,x=a.ol(u);b<x;b++){var T=this.Ua(s),M=this.U(s),C=a.Vp(u,b);b==0&&(C.To(f),this.Dh(s,f)),C.getType()==322?this.Xg(T,null):this.Xg(T,d.aa.jg(C)),C.Po(f),b<x-1?s=this.wj(g,M,f):this.Dh(p,f)}},l.prototype.MX=function(s,a,u){var p=this.U(s);if(p==-1)throw d.i.Qa();for(var f=this.nm(),g=this.bd(s),b=0,x=a.ol(u);b<x;b++){var T=this.Ua(s),M=this.U(s),C=a.Vp(u,x-b-1);b==0&&(C.Po(f),this.Dh(s,f)),C.getType()==322?this.Xg(T,null):this.Xg(T,d.aa.jg(C)),C.To(f),b<x-1?s=this.wj(g,M,f):this.Dh(p,f)}},l.prototype.IF=function(){var s=new d.l;s.Oa();for(var a=this.Yq(),u=new d.h,p=!0,f=a.next();f!=-1;f=a.next())this.D(f,u),p?s.Zb(u.x,u.y):s.Lk(u.x,u.y),p=!1;return s},l.prototype.Ib=function(s){var a=s.getType();if(d.aa.Hc(a))return this.hN(s);if(a==550)return this.iN(s);throw d.i.Qa()},l.prototype.uN=function(s,a){var u=a.getType();if(d.aa.Hc(u))this.UD(s,a);else{if(u!=550)throw d.i.Qa();this.VD(s,a)}},l.prototype.mN=function(s,a){var u=this.Ig(1736,s.description);if(2>s.Ja(a))return u;this.Il.Fd(s,s.Ba(a),s.Vc(a)),this.it=this.vb.ub(0);var p=this.vf(u,-1);this.kn(p,s.dc(a)||!0);var f=this.We!=null&&s.Ve!=null,g=s.Ba(a);for(a=s.Vc(a);g<a;g++){var b=this.wj(p,-1,null);if(f)if(b=this.Ua(b),1&s.ZF(g))this.Xg(b,null);else{var x=new d.ig;s.bc(g,x,!0),this.Xg(b,x.get())}}return u},l.prototype.Ne=function(s){var a=this.ic(s),u=d.ZK.Ig(a,this.Il.description),p=this.I(s);if(p==0)return u;if(d.aa.Hc(a)){a=this.da(s);for(var f=d.Yc.Oh(a+1),g=d.Yc.Mr(a+1,0),b=u.description,x=0,T=b.Aa;x<T;x++){for(var M=b.kd(x),C=d.ra.Va(M),O=d.Yc.YE(M,p),F=this.vb.ub(M),P=0,G=0,q=0,V=this.Ob(s);V!=-1;V=this.Rb(V)){var Z=0;this.dc(V)&&(Z|=1),this.YS(V)&&(Z|=4),Z!=0&&g.zJ(G,Z);var X=this.Ja(V);if(f.write(G++,q),q+=X,M==0){X=F;var te=O,oe=new d.h;for(Z=this.Xa(V);P<q;Z=this.U(Z),P++){var me=this.Ua(Z);X.tc(2*me,oe),te.Tt(2*P,oe)}}else for(Z=this.Xa(V);P<q;Z=this.U(Z),P++)for(me=this.Ua(Z),te=0;te<C;te++)oe=F.eg(me*C+te),O.pr(P*C+te,oe)}u.hn(M,O),f.write(a,p)}u.PJ(g),u.QJ(f),u.Pc(16777215)}else if(a==550){for(b=u.description,u.resize(p),x=0,T=b.Aa;x<T;x++){for(M=b.kd(x),C=d.ra.Va(M),O=u.ub(M),F=this.vb.ub(M),P=0,V=this.Ob(s),X=this.Ja(V),Z=this.Xa(V);P<X;Z=this.U(Z),P++)for(me=this.Ua(Z),te=0;te<C;te++)oe=F.eg(me*C+te),O.pr(P*C+te,oe);u.hn(M,O)}u.Pc(16777215)}return u},l.prototype.BB=function(s){for(var a=this.Ob(s);a!=-1;a=this.Zq(a));a=this.PR(s);var u=this.ue(s);a!=-1?this.OJ(a,u):this.ld=u,u!=-1?this.SJ(u,a):this.qw=a,this.OQ(s)},l.prototype.Ig=function(s,a){return a===void 0?this.$E(s,d.ee.og()):this.$E(s,a)},l.prototype.$E=function(s,a){return s=this.uU(s),this.vb==null?this.vb=this.Il=new d.de(a):this.Il.Jl(a),this.ht=this.Il.description,this.fA=1<this.ht.Aa,this.ld==-1?this.ld=s:(this.SJ(s,this.qw),this.OJ(this.qw,s)),this.qw=s},l.prototype.ue=function(s){return this.cd.T(s,1)},l.prototype.PR=function(s){return this.cd.T(s,0)},l.prototype.ic=function(s){return 2147483647&this.cd.T(s,2)},l.prototype.HJ=function(s,a,u){a=this.wk[a],(s=this.JF(s))>=a.size&&a.resize(Math.max(d.O.truncate(1.25*s),16),-1),a.write(s,u)},l.prototype.KF=function(s,a){return(s=this.JF(s))<(a=this.wk[a]).size?a.read(s):-1},l.prototype.aF=function(){this.wk==null&&(this.wk=[]);for(var s=0;s<this.wk.length;s++)if(this.wk[s]==null)return this.wk[s]=d.Yc.Oh(0),s;return this.wk.push(d.Yc.Oh(0)),this.wk.length-1},l.prototype.xW=function(s){this.wk[s]=null},l.prototype.Ob=function(s){return this.cd.T(s,3)},l.prototype.kv=function(s){return this.cd.T(s,4)},l.prototype.I=function(s){return this.cd.T(s,5)},l.prototype.da=function(s){return this.cd.T(s,6)},l.prototype.Gp=function(s,a,u){for(var p=0,f=this.ld;f!=-1;f=this.ue(f)){var g=this.ic(f);if(d.aa.Hc(g)&&(!u||g==1736)){g=this.ic(f)==1736;for(var b=this.Ob(f);b!=-1;){for(var x=0,T=this.Xa(b);x<d.O.truncate(this.Ja(b)/2);){var M=this.U(T);if(M==-1)break;var C=this.Ua(T),O=this.Sh(C);O!=null?C=O.Qb():(O=this.Ua(M),C=this.vb.yr(C,O)),C<=s?(C==0?p==0&&(p=-1):p=1,M!=this.rj(b)&&(this.lC(M,T),this.pd(M,!0))):T=this.U(T),x++}for(x=this.Xa(b),T=this.dc(b)?x:this.rj(b);0<this.Ja(b);){if((M=this.Ma(T))==-1){this.pd(T,!0),p==0&&(p=-1);break}var F=this.Ua(M);if((O=this.Sh(F))!=null?C=O.Qb():(C=this.Ua(T),C=this.vb.yr(C,F)),C<=s)C==0?p==0&&(p=-1):p=1,this.lC(M,T),this.pd(M,!1),x==M&&(x=this.Xa(b));else if((T=this.Ma(T))==x)break}T=this.Ja(b),a&&(g?3>T:2>T)?(b=this.Zq(b),p=0<T?1:p==0?-1:p):b=this.Rb(b)}}}return p},l.prototype.lC=function(s,a){var u=this.Ua(s),p=this.Ua(a);if(this.Sg!=null&&(u=this.Sg.read(u),this.Sg.write(p,u)),this.bi!=null){for(p=0,u=this.bi.length;p<u;p++)if(this.bi[p]!=null){var f=this.Pa(s,p);f!=-1&&this.Ra(a,p,f)}}},l.prototype.Ul=function(s,a,u){var p=0,f=this.U(s);if(f==-1)throw d.i.Qa();for(var g=this.Ua(s),b=this.Ua(f),x=this.Sh(g),T=x==null?this.vb.yr(g,b):x.Qb(),M=0;M<u;M++){var C=a[M];if(0<C&&1>C){var O=C;x!=null&&(O=0<T?x.Ux(C)/T:0),this.vb.kD(g,b,O,this.nm());var F=this.wj(this.bd(s),f,this.nm());if(p++,x!=null){var P=x.dl(0,C);O=this.Ua(this.Ma(F)),this.Xg(O,P),this.mf(F,P.wc()),M!=u-1&&a[M+1]!=1||(C=x.dl(C,1),this.Xg(O,C))}}}return p},l.prototype.LX=function(s,a,u){var p=0,f=this.U(s);if(f==-1)throw d.i.fa("internal error");var g=this.Ua(s),b=this.Ua(f),x=this.Sh(g),T=x==null?this.vb.yr(g,b):x.Qb(),M=0;s=this.bd(s);for(var C=0;C<u;C++){var O=a[C];if(M<O&&1>O){var F=O;if(x!=null&&(F=0<T?x.Ux(O)/T:0),this.vb.kD(g,b,F,this.nm()),F=this.yS(s,f,this.nm()),p++,x!=null){M=x.dl(M,O);var P=this.Ua(this.Ma(F));this.Xg(P,M),this.Cb(F,M.pa,M.la),C!=u-1&&a[C+1]!=1||(M=x.dl(O,1),F=this.Ua(F),this.Xg(F,M))}}M=O}return p},l.prototype.yS=function(s,a,u){var p=a!=-1?this.Ma(a):this.rj(s),f=p!=-1?this.U(p):-1,g=this.oI(u==null?this.fd:-1),b=this.Ua(g);return u!=null&&this.vb.Ht(b,u),this.aj(g,s),this.Bc(g,f),this.Cc(g,p),f!=-1&&this.Cc(f,g),p!=-1&&this.Bc(p,g),u=this.dc(s),p=this.Xa(s),a==-1&&this.Wg(s,g),a==p&&(u&&p!=-1||this.Jf(s,g)),u&&f==-1&&(this.Bc(g,g),this.Cc(g,g)),this.Vj(s,this.Ja(s)+1),s=this.Qf(s),this.Tj(s,this.I(s)+1),g},l.prototype.uE=function(s,a,u){var p=this.Ua(a),f=this.Ua(u);if(0>p||f>this.fd-1)throw d.i.N("invalid call");if(p>f&&!this.dc(s))throw d.i.N("cannot iterate across an open path");for(s=0;a!=u;a=this.U(a))p=this.Ua(a),(f=this.Sh(p))!=null?s+=f.Qb():(f=this.Ua(this.U(a)),s+=this.vb.yr(p,f));return s},l.prototype.Dh=function(s,a){var u=this.Ua(s);this.vb.Ht(u,a),(u=this.Sh(u))!=null&&u.setStart(a),(s=this.Ma(s))!=-1&&(s=this.Ua(s),this.Sh(s)!=null&&u.setEnd(a))},l.prototype.Vi=function(s,a){s=this.Ua(s),this.vb.ve(s,a)},l.prototype.mf=function(s,a){this.Cb(s,a.x,a.y)},l.prototype.Cb=function(s,a,u){var p=this.Ua(s);this.vb.Cb(p,a,u),(p=this.Sh(p))!=null&&p.ZB(a,u),(s=this.Ma(s))!=-1&&(s=this.Ua(s),this.Sh(s)!=null&&p.Ql(a,u))},l.prototype.D=function(s,a){this.vb.D(this.td.T(s,0),a)},l.prototype.Gc=function(s,a){this.vb.za[0].tc(2*this.td.T(s,0),a)},l.prototype.Na=function(s){var a=new d.h;return this.vb.D(this.td.T(s,0),a),a},l.prototype.dG=function(s,a){this.it.tc(2*s,a)},l.prototype.Uc=function(s,a,u){return this.vb.Uc(s,this.Ua(a),u)},l.prototype.setAttribute=function(s,a,u,p){this.vb.setAttribute(s,this.Ua(a),u,p)},l.prototype.Ua=function(s){return this.td.T(s,0)},l.prototype.ih=function(){var s=new d.h;return this.D(void 0,s),s.y},l.prototype.fq=function(s,a){s=this.Ua(s),a=this.Ua(a);var u=this.vb.za[0].o;return u[2*s]===u[2*a]&&u[2*s+1]===u[2*a+1]},l.prototype.Dv=function(s,a){s=this.Ua(s);var u=this.vb.za[0].o;return u[2*s]===a.x&&u[2*s+1]===a.y},l.prototype.vX=function(s,a){if(1>a&&(a=1),this.Sg==null){if(a==1)return;this.Sg=d.Yc.Dn(this.vb.I(),1)}(s=this.Ua(s))>=this.Sg.size&&this.Sg.resize(s+1,1),this.Sg.write(s,a)},l.prototype.cG=function(s){return s=this.Ua(s),this.Sg==null||s>=this.Sg.size?1:this.Sg.read(s)},l.prototype.Ra=function(s,a,u){a=this.bi[a],s=this.Ua(s),a.size<this.vb.I()&&a.resize(this.vb.I(),-1),a.write(s,u)},l.prototype.Pa=function(s,a){return(s=this.Ua(s))<(a=this.bi[a]).size?a.read(s):-1},l.prototype.Gd=function(){this.bi==null&&(this.bi=[]);for(var s=0;s<this.bi.length;s++)if(this.bi[s]==null)return this.bi[s]=d.Yc.Oh(0,-1),s;return this.bi.push(d.Yc.Oh(0,-1)),this.bi.length-1},l.prototype.Td=function(s){this.bi[s]=null},l.prototype.bc=function(s){return this.We!=null?(s=this.Ua(s),this.We[s]):null},l.prototype.ed=function(s,a){var u=this.td.T(s,2);if(u==-1)return!1;if(this.fA){var p=new d.Sa;this.Vi(s,p),a.setStart(p),this.Vi(u,p),a.setEnd(p)}else this.vb.Gc(this.td.T(s,0),Hi),a.em(0,Hi),this.vb.Gc(this.td.T(u,0),Hi),a.em(1,Hi);return!0},l.prototype.mW=function(s,a,u){if(this.fA){var p=new d.Sa;this.Vi(s,p),u.setStart(p),this.Vi(a,p),u.setEnd(p)}else this.vb.Gc(s,Hi),u.em(0,Hi),this.vb.Gc(a,Hi),u.em(1,Hi)},l.prototype.vf=function(s,a){if(a!=-1){if(s!=this.Qf(a))throw d.i.Qa();var u=this.cs(a)}else u=this.kv(s);var p=this.wU(s);return a!=-1&&this.bp(a,p),this.ap(p,a),this.bp(p,u),u!=-1?this.ap(u,p):this.Zo(s,p),a==-1&&this.$o(s,p),this.Rl(s,this.da(s)+1),p},l.prototype.nG=function(s,a,u,p){s=this.vf(s,-1);for(var f=0,g=a,b=!1;g==u&&(b=!0),this.aj(g,s),f++,(g=this.U(g))!=a;);return this.kn(s,!0),this.Vj(s,f),b&&(a=u),this.Jf(s,a),this.Wg(s,this.Ma(a)),this.cp(s,!1),p!=null&&(p[0]=b),s},l.prototype.Zq=function(s){var a=this.cs(s),u=this.Rb(s),p=this.Qf(s);return a!=-1?this.ap(a,u):this.Zo(p,u),u!=-1?this.bp(u,a):this.$o(p,a),this.AO(s),this.Rl(p,this.da(p)-1),this.sF(s),u},l.prototype.AO=function(s){var a=this.Xa(s);if(a!=-1){for(var u=0,p=this.Ja(s);u<p;u++){var f=a;a=this.U(a),this.Vy(f)}a=this.Qf(s),this.Tj(a,this.I(a)-this.Ja(s))}this.Vj(s,0)},l.prototype.Rb=function(s){return this.md.T(s,2)},l.prototype.cs=function(s){return this.md.T(s,1)},l.prototype.Ja=function(s){return this.md.T(s,3)},l.prototype.dc=function(s){return!!(1&this.Sp(s))},l.prototype.kn=function(s,a){if(this.dc(s)!=a){if(0<this.Ja(s)){var u=this.Xa(s),p=this.rj(s);a?(this.Bc(p,u),this.Cc(u,p),u=this.Ua(p)):(this.Bc(p,-1),this.Cc(u,-1),u=this.Ua(p)),this.Xg(u,null)}this.VB(s,(1|this.Sp(s))-1|(a?1:0))}},l.prototype.Qf=function(s){return this.md.T(s,7)},l.prototype.YS=function(s){return!!(2&this.Sp(s))},l.prototype.PB=function(s,a){this.VB(s,(2|this.Sp(s))-2|(a?2:0))},l.prototype.wz=function(s){if(this.cT(s))return this.Oi.get(this.qv(s));var a=new d.yb,u=this.Xa(s);if(u==-1)return 0;var p=new d.h;this.D(u,p);for(var f=0,g=0,b=this.Ja(s);g<b;g++,u=this.U(u)){var x=this.bc(u);if(x==null){if(!this.ed(u,a))continue;x=a}f+=x.Tx(p.x,p.y)}return this.cp(s,!0),this.Oi.set(this.qv(s),f),f},l.prototype.gr=function(s,a,u){a=this.Ck[a],s=this.qv(s),a.size<this.Oi.size&&a.resize(this.Oi.size,-1),a.write(s,u)},l.prototype.sj=function(s,a){return(s=this.qv(s))<(a=this.Ck[a]).size?a.read(s):-1},l.prototype.Ky=function(){this.Ck==null&&(this.Ck=[]);for(var s=0;s<this.Ck.length;s++)if(this.Ck[s]==null)return this.Ck[s]=d.Yc.Oh(0),s;return this.Ck.push(d.Yc.Oh(0)),this.Ck.length-1},l.prototype.CB=function(s){this.Ck[s]=null},l.prototype.ZT=function(s,a,u){if(u==-1)throw d.i.N();if(a!=u){var p=this.Rb(u),f=this.cs(u),g=this.Qf(u);f==-1?this.Zo(g,p):this.ap(f,p),p==-1?this.$o(g,f):this.bp(p,f),this.Tj(g,this.I(g)-this.Ja(u)),this.Rl(g,this.da(g)-1),f=a==-1?this.kv(s):this.cs(a),this.bp(u,f),this.ap(u,a),a==-1?this.$o(s,u):this.bp(a,u),f==-1?this.Zo(s,u):this.ap(f,u),this.Tj(s,this.I(s)+this.Ja(u)),this.Rl(s,this.da(s)+1),this.gx(u,s)}},l.prototype.ij=function(s,a){this.vb.ve(this.Ua(a),this.nm()),this.wj(s,-1,this.nm())},l.prototype.pd=function(s,a){var u=this.bd(s),p=this.Ma(s),f=this.U(s);p!=-1&&this.Bc(p,f);var g=this.Ja(u);if(s==this.Xa(u)&&this.Jf(u,1<g?f:-1),f!=-1&&this.Cc(f,p),s==this.rj(u)&&this.Wg(u,1<g?p:-1),p!=-1&&f!=-1){p=this.Ua(p);var b=this.Ua(f);a?(a=this.Sh(p))!=null&&(p=new d.h,this.vb.D(b,p),a.Qc(p)):(b=this.Ua(s),a=this.Sh(b),this.Xg(p,a),a!=null&&(p=this.vb.Na(p),a.Dc(p)))}return this.Vj(u,g-1),u=this.Qf(u),this.Tj(u,this.I(u)-1),this.Vy(s),f},l.prototype.Xa=function(s){return this.md.T(s,4)},l.prototype.rj=function(s){return this.md.T(s,5)},l.prototype.U=function(s){return this.td.T(s,2)},l.prototype.Ma=function(s){return this.td.T(s,1)},l.prototype.bd=function(s){return this.td.T(s,3)},l.prototype.fc=function(s,a){return this.wj(s,-1,a)},l.prototype.Yq=function(s){if(s===void 0)return this.Yq(!1);if(s instanceof h)return new h(s);var a,u=-1,p=-1,f=-1,g=0,b=!1;for(a=this.ld;a!=-1;a=this.ue(a))if(!s||d.aa.Hc(this.ic(a))){for(u=this.Ob(a);u!=-1;u=this.Rb(u))if(f=p=this.Xa(u),g=0,p!=-1){b=!0;break}if(b)break}return h.AP(this,a,u,p,f,g,s)},l.prototype.Oc=function(s){if(this.Il.Oc(s),this.We!=null)for(var a=0,u=this.We.length;a<u;a++)this.We[a]!=null&&this.We[a].Oc(s)},l.prototype.jr=function(s,a,u,p){p?this.NX(s,a,u):this.MX(s,a,u)},l.prototype.Cc=function(s,a){this.td.S(s,1,a)},l.prototype.Bc=function(s,a){this.td.S(s,2,a)},l.prototype.aj=function(s,a){this.td.S(s,3,a)},l.prototype.Vj=function(s,a){this.md.S(s,3,a)},l.prototype.Jf=function(s,a){this.md.S(s,4,a)},l.prototype.Wg=function(s,a){this.md.S(s,5,a)},l.prototype.Rl=function(s,a){this.cd.S(s,6,a)},l.prototype.Tj=function(s,a){this.cd.S(s,5,a)},l.prototype.pJ=function(s){var a=s;do{var u=this.U(a);this.Bc(a,this.Ma(a)),this.Cc(a,u),a=u}while(a!=s)},l.prototype.bC=function(s){this.fd=s},l.prototype.$q=function(s){var a=this.cs(s),u=this.Rb(s),p=this.Qf(s);a!=-1?this.ap(a,u):this.Zo(p,u),u!=-1?this.bp(u,a):this.$o(p,a),this.Jf(s,-1),this.Wg(s,-1),this.sF(s)},l.prototype.mi=function(s,a){var u=this.Ma(s),p=this.U(s);if(u!=-1&&this.Bc(u,p),p!=-1&&this.Cc(p,u),u!=-1&&p!=-1)if(u=this.Ua(u),p=this.Ua(p),a){if((a=this.Sh(u))!=null){var f=new d.h;this.vb.D(p,f),a.Qc(f)}}else a=this.Ua(s),a=this.Sh(a),this.Xg(u,a),a!=null&&(f=new d.h,this.vb.D(u,f),a.Dc(f));this.Vy(s)},l.prototype.cT=function(s){return!!(4&this.Sp(s))},l.prototype.cp=function(s,a){this.VB(s,(4|this.Sp(s))-4|(a?4:0))},l.prototype.nx=function(s,a){var u=this.td.o;this.vb.mc();var p=this.vb.za[0].o;s.Vd(0,a,function(f,g){var b=u[5*f];f=u[5*g],g=p[2*b],b=p[2*b+1];var x=p[2*f];return b<(f=p[2*f+1])?-1:b>f?1:g<x?-1:g>x?1:0})},l.prototype.jS=function(){for(var s=this.ld;s!=-1;s=this.ue(s))if(!d.aa.Hc(this.ic(s)))return!0;return!1},l.prototype.hC=function(s,a){for(var u=this.Ob(s),p=this.Ob(a),f=this.kv(s),g=this.kv(a),b=this.Ob(s);b!=-1;b=this.Rb(b))this.gx(b,a);for(b=this.Ob(a);b!=-1;b=this.Rb(b))this.gx(b,s);this.Zo(s,p),this.Zo(a,u),this.$o(s,g),this.$o(a,f),u=this.I(s),p=this.da(s),f=this.da(a),this.Tj(s,this.I(a)),this.Tj(a,u),this.Rl(s,f),this.Rl(a,p),u=this.cd.T(s,2),this.cd.S(s,2,this.cd.T(a,2)),this.cd.S(a,2,u)},l}(),d.gd=L})(Y||(Y={})),function(d){var L=function(S){function h(l,s,a,u){var p=S.call(this)||this;return p.$=new d.l,l===void 0?p.UE():typeof l=="number"?p.VO(l,s,a,u):l instanceof d.Sa?s!==void 0?p.Qu(l,s,a):p.WO(l):l instanceof d.ra?s!==void 0?p.YO(l,s):p.XO(l):l instanceof d.l?p.UO(l):p.UE(),p}return Bt(h,S),h.prototype.Qu=function(l,s,a){this.description=d.ee.og(),this.$.Oa(),l.B()||this.tu(l,s,a)},h.prototype.UO=function(l){this.description=d.ee.og(),this.$.K(l),this.$.normalize()},h.prototype.XO=function(l){if(l==null)throw d.i.N();this.description=l,this.$.Oa()},h.prototype.YO=function(l,s){if(l==null)throw d.i.N();this.description=l,this.$.K(s),this.$.normalize()},h.prototype.UE=function(){this.description=d.ee.og(),this.$.Oa()},h.prototype.WO=function(l){this.description=d.ee.og(),this.$.Oa(),l.B()||this.tu(l)},h.prototype.VO=function(l,s,a,u){this.description=d.ee.og(),this.K(l,s,a,u)},h.prototype.K=function(l,s,a,u){if(this.vc(),typeof l=="number")this.$.K(l,s,a,u);else for(this.Oa(),s=0,a=l.length;s<a;s++)this.Zb(l[s])},h.prototype.Xo=function(l){if(this.vc(),!l.fT())throw d.i.N();this.$.K(l)},h.prototype.Oa=function(){this.vc(),this.$.Oa()},h.prototype.B=function(){return this.$.B()},h.prototype.R=function(){return this.$.R()},h.prototype.ca=function(){return this.$.ca()},h.prototype.gk=function(){return this.$.gk()},h.prototype.Jp=function(){return this.$.Jp()},h.prototype.Ip=function(){return this.$.sf()},h.prototype.Zb=function(l){if(l instanceof d.h)this.vc(),this.$.Zb(l);else if(l instanceof d.l)this.vc(),this.$.Zb(l);else if(l instanceof d.Sa){if(this.vc(),!l.Ac()){var s=l.description;if(this.description!=s&&this.Jl(s),this.B())this.tu(l);else{this.$.Zb(l.D());for(var a=1,u=s.Aa;a<u;a++)for(var p=s.Ed(a),f=d.ra.Va(p),g=0;g<f;g++){var b=l.Uc(p,g),x=this.Tg(p,g);x.Zb(b),this.setInterval(p,g,x)}}}}else if(l instanceof h&&!l.B())for((s=l.description)!=this.description&&this.Jl(s),this.$.Zb(l.$),a=1,u=s.Aa;a<u;a++)for(p=s.kd(a),f=d.ra.Va(p),g=0;g<f;g++)b=l.Tg(p,g),(x=this.Tg(p,g)).Zb(b),this.setInterval(p,g,x)},h.prototype.tu=function(l,s,a){if(s!==void 0){this.$.K(l.D(),s,a),a=1;for(var u=(s=l.description).Aa;a<u;a++)for(var p=s.Ed(a),f=d.ra.Va(p),g=0;g<f;g++){var b=l.Uc(p,g);this.setInterval(p,g,b,b)}}else for(this.$.K(l.ka[0],l.ka[1]),a=1,u=(s=l.description).Aa;a<u;a++)for(p=s.Ed(a),f=d.ra.Va(p),g=0;g<f;g++)b=l.Uc(p,g),this.setInterval(p,g,b,b)},h.prototype.setInterval=function(l,s,a,u){if(a=typeof a=="number"?new d.Nc(a,u):a,this.vc(),l==0)if(s==0)this.$.v=a.oa,this.$.C=a.va;else{if(s!=1)throw d.i.ce();this.$.G=a.oa,this.$.H=a.va}else this.vD(0,l,s,a.oa),this.vD(1,l,s,a.va)},h.prototype.W=function(l,s){this.vc(),this.$.W(l,s)},h.prototype.Oc=function(l){if(l instanceof d.Dd)this.vc(),l.mC(this.$);else if(this.vc(),!this.$.B()){var s=new d.OK;this.Qo(s),s.XS()?s.Oa():l.mC(s)}},h.prototype.copyTo=function(l){if(l.getType()!=this.getType())throw d.i.N();if(l.vc(),l.description=this.description,l.$.K(this.$),l.ka=null,this.ka!=null){l.ou();for(var s=0;s<2*(this.description.Ae.length-2);s++)l.ka[s]=this.ka[s]}},h.prototype.Ia=function(){return new h(this.description)},h.prototype.Ke=function(){return this.$.wF()},h.prototype.Qb=function(){return this.$.yR()},h.prototype.getType=function(){return 197},h.prototype.Db=function(){return 2},h.prototype.bn=function(l){this.copyTo(l)},h.prototype.A=function(l){l.v=this.$.v,l.G=this.$.G,l.C=this.$.C,l.H=this.$.H},h.prototype.Qo=function(l){l.v=this.$.v,l.G=this.$.G,l.C=this.$.C,l.H=this.$.H,l.K(this.$.v,this.$.G,this.Od(0,1,0),this.$.C,this.$.H,this.Od(1,1,0))},h.prototype.Tg=function(l,s){var a=new d.Nc;return a.K(this.Od(0,l,s),this.Od(1,l,s)),a},h.prototype.Hf=function(l,s){s.Nf(this.description);var a=this.description.Aa-1;switch(l){case 0:for(l=0;l<a;l++)for(var u=this.description.kd(l),p=d.ra.Va(u),f=0;f<p;f++)s.setAttribute(u,f,this.Od(0,u,f));s.Cb(this.$.v,this.$.G);break;case 1:for(l=0;l<a;l++)for(u=this.description.kd(l),p=d.ra.Va(u),f=0;f<p;f++)s.setAttribute(u,f,this.Od(1,u,f));s.Cb(this.$.v,this.$.H);break;case 2:for(l=0;l<a;l++)for(u=this.description.kd(l),p=d.ra.Va(u),f=0;f<p;f++)s.setAttribute(u,f,this.Od(0,u,f));s.Cb(this.$.C,this.$.H);break;case 3:for(l=0;l<a;l++)for(u=this.description.kd(l),p=d.ra.Va(u),f=0;f<p;f++)s.setAttribute(u,f,this.Od(1,u,f));s.Cb(this.$.C,this.$.G);break;default:throw d.i.ce()}},h.prototype.mB=function(l,s){l=this.$.mB(l),s.ma(l.x,l.y)},h.prototype.kR=function(l,s){return s*(l.Oq-2)},h.prototype.xF=function(l,s,a){if(this.$.B())throw d.i.fa("empty geometry");if(s==0)return l!=0?a!=0?this.$.H:this.$.C:a!=0?this.$.G:this.$.v;if(a>=d.ra.Va(s))throw d.i.N();var u=this.description.Pf(s);return this.ou(),0<=u?this.ka[this.kR(this.description,l)+this.description.LR(u)-2+a]:d.ra.se(s)},h.prototype.ou=function(){if(this.vc(),this.ka==null&&2<this.description.Ae.length){this.ka=[];for(var l=h.Gg(this.description,0),s=h.Gg(this.description,1),a=0,u=1,p=this.description.Aa;u<p;u++){var f=this.description.kd(u),g=d.ra.Va(f);f=d.ra.se(f);for(var b=0;b<g;b++)this.ka[l+a]=f,this.ka[s+a]=f,a++}}},h.prototype.sn=function(l){if(this.ka!=null)if(2<l.Ae.length){for(var s=d.ee.Iw(l,this.description),a=[],u=h.Gg(this.description,0),p=h.Gg(this.description,1),f=h.Gg(l,0),g=h.Gg(l,1),b=0,x=1,T=l.Aa;x<T;x++){var M=l.kd(x),C=d.ra.Va(M);if(s[x]==-1){var O=d.ra.se(M);for(M=0;M<C;M++)a[f+b]=O,a[g+b]=O,b++}else for(O=this.description.$j(s[x])-2,M=0;M<C;M++)a[f+b]=this.ka[u+O],a[g+b]=this.ka[p+O],b++,O++}this.ka=a}else this.ka=null;this.description=l},h.prototype.Od=function(l,s,a){if(this.$.B())throw d.i.fa("This operation was performed on an Empty Geometry.");if(s==0)return l!=0?a!=0?this.$.H:this.$.C:a!=0?this.$.G:this.$.v;if(a>=d.ra.Va(s))throw d.i.ce();var u=this.description.Pf(s);return 0<=u?(this.ou(),this.ka[h.Gg(this.description,l)+this.description.$j(u)-2+a]):d.ra.se(s)},h.prototype.vD=function(l,s,a,u){if(this.vc(),s==0)l!=0?a!=0?this.$.H=u:this.$.C=u:a!=0?this.$.G=u:this.$.v=u;else{if(a>=d.ra.Va(s))throw d.i.ce();if(!this.hasAttribute(s)){if(d.ra.DG(s,u))return;this.re(s)}s=this.description.Pf(s),this.ou(),this.ka[h.Gg(this.description,l)+this.description.$j(s)-2+a]=u}},h.Gg=function(l,s){return s*(l.Ae.length-2)},h.prototype.Ea=function(l){this.vc();var s=new d.l;return l.A(s),this.$.Ea(s)},h.prototype.isIntersecting=function(l){return l instanceof d.l?this.$.isIntersecting(l):this.$.isIntersecting(l.$)},h.prototype.Ju=function(l,s){this.vc(),l.B()?this.Oa():s!==void 0?this.tu(l,s):this.$.Ju(l.Lg(),l.ih())},h.prototype.offset=function(l,s){this.vc(),this.$.offset(l,s)},h.prototype.normalize=function(){this.vc(),this.$.normalize()},h.prototype.sf=function(l){if(l===void 0){if(l=new d.Sa(this.description),this.B())return l;for(s=this.description.Aa,a=1;a<s;a++)for(u=this.description.Ed(a),p=d.ra.Va(u),f=0;f<p;f++)g=.5*(this.Od(0,u,f)+this.Od(1,u,f)),l.setAttribute(u,f,g);return l.Cb(this.$.gk(),this.$.Jp()),l}if(l.Nf(this.description),this.B())l.Oa();else{for(var s=this.description.Aa,a=1;a<s;a++)for(var u=this.description.kd(a),p=d.ra.Va(u),f=0;f<p;f++){var g=.5*(this.xF(0,u,f)+this.xF(1,u,f));l.setAttribute(u,f,g)}l.Cb(this.$.sf())}},h.prototype.mz=function(){return new d.Sa(this.$.mz())},h.prototype.contains=function(l){return l instanceof d.Sa?!l.B()&&this.$.contains(l.Lg(),l.ih()):this.$.contains(l.$)},h.prototype.dP=function(l){return this.$.contains(l)},h.prototype.Nb=function(l){if(l==this)return!0;if(!(l instanceof h)||this.description!=l.description)return!1;if(this.B())return!!l.B();if(!this.$.Nb(l.$))return!1;for(var s=0,a=2*(this.description.Ae.length-2);s<a;s++)if(this.ka[s]!=l.ka[s])return!1;return!0},h.prototype.cc=function(){var l=this.description.cc();if(l=d.O.Th(l,this.$.cc()),!this.B()&&this.ka!=null)for(var s=0,a=2*(this.description.Ae.length-2);s<a;s++)l=d.O.Th(l,this.ka[s]);return l},h.prototype.es=function(){return this.$.v},h.prototype.gs=function(){return this.$.G},h.prototype.ds=function(){return this.$.C},h.prototype.fs=function(){return this.$.H},h.prototype.mg=function(){return d.pi.gm(this,null)},h.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.$.v+", "+this.$.G+", "+this.$.C+", "+this.$.H+"]"},h}(d.aa);d.Fh=L}(Y||(Y={})),function(d){var L=function(){function S(h,l,s,a){h===void 0?this.Oa():(this.v=h,this.G=l,this.C=s,this.H=a)}return S.construct=function(h,l,s,a){var u=new S;return u.v=h,u.G=l,u.C=s,u.H=a,u},S.prototype.K=function(h,l,s,a){typeof h=="number"?s!==void 0?(this.v=h,this.G=l,this.C=s,this.H=a,this.normalize()):(this.v=h,this.G=l,this.C=h,this.H=l):h instanceof d.h?l!==void 0?(this.v=h.x-.5*l,this.C=this.v+l,this.G=h.y-.5*s,this.H=this.G+s,this.normalize()):(this.v=h.x,this.G=h.y,this.C=h.x,this.H=h.y):h instanceof S?this.K(h.v,h.G,h.C,h.H):h instanceof d.Nc&&(h.B()||l.B()?this.Oa():(this.v=h.oa,this.C=h.va,this.G=l.oa,this.H=l.va))},S.prototype.Zw=function(h,l){if(l!==void 0)if(l==0)this.Oa();else{this.v=h[0].x,this.G=h[0].y,this.C=this.v,this.H=this.G;for(var s=1;s<l;s++){var a=h[s];a.x<this.v?this.v=a.x:a.x>this.C&&(this.C=a.x),a.y<this.G?this.G=a.y:a.y>this.H&&(this.H=a.y)}}else if(h==null||h.length==0)this.Oa();else for(a=h[0],this.K(a.x,a.y),s=1;s<h.length;s++)l=h[s],this.Lk(l.x,l.y)},S.prototype.Oa=function(){this.H=this.C=this.G=this.v=NaN},S.prototype.B=function(){return isNaN(this.v)},S.prototype.Zb=function(h,l){typeof h=="number"?this.B()?(this.v=h,this.G=l,this.C=h,this.H=l):(this.v>h?this.v=h:this.C<h&&(this.C=h),this.G>l?this.G=l:this.H<l&&(this.H=l)):h instanceof d.h||h instanceof d.Nd?this.Zb(h.x,h.y):h instanceof S&&!h.B()&&(this.Zb(h.v,h.G),this.Zb(h.C,h.H))},S.prototype.Lk=function(h,l){this.v>h?this.v=h:this.C<h&&(this.C=h),this.G>l?this.G=l:this.H<l&&(this.H=l)},S.prototype.W=function(h,l){this.B()||(this.v-=h,this.C+=h,this.G-=l,this.H+=l,(this.v>this.C||this.G>this.H)&&this.Oa())},S.prototype.scale=function(h){0>h&&this.Oa(),this.B()||(this.v*=h,this.C*=h,this.G*=h,this.H*=h)},S.prototype.zoom=function(h,l){this.B()||this.K(this.sf(),h*this.R(),l*this.ca())},S.prototype.isIntersecting=function(h){return!this.B()&&!h.B()&&(this.v<=h.v?this.C>=h.v:h.C>=this.v)&&(this.G<=h.G?this.H>=h.G:h.H>=this.G)},S.prototype.HG=function(h){return(this.v<=h.v?this.C>=h.v:h.C>=this.v)&&(this.G<=h.G?this.H>=h.G:h.H>=this.G)},S.prototype.Ea=function(h){return!this.B()&&!h.B()&&(h.v>this.v&&(this.v=h.v),h.C<this.C&&(this.C=h.C),h.G>this.G&&(this.G=h.G),h.H<this.H&&(this.H=h.H),(h=this.v<=this.C&&this.G<=this.H)||this.Oa(),h)},S.prototype.mB=function(h){switch(h){case 0:return d.h.construct(this.v,this.G);case 1:return d.h.construct(this.v,this.H);case 2:return d.h.construct(this.C,this.H);case 3:return d.h.construct(this.C,this.G);default:throw d.i.ce()}},S.prototype.nB=function(h){if(h==null||4>h.length)throw d.i.N();h[0]!=null?h[0].ma(this.v,this.G):h[0]=d.h.construct(this.v,this.G),h[1]!=null?h[1].ma(this.v,this.H):h[1]=d.h.construct(this.v,this.H),h[2]!=null?h[2].ma(this.C,this.H):h[2]=d.h.construct(this.C,this.H),h[3]!=null?h[3].ma(this.C,this.G):h[3]=d.h.construct(this.C,this.G)},S.prototype.wF=function(){return this.B()?0:this.R()*this.ca()},S.prototype.yR=function(){return this.B()?0:2*(this.R()+this.ca())},S.prototype.gk=function(){return(this.C+this.v)/2},S.prototype.Jp=function(){return(this.H+this.G)/2},S.prototype.R=function(){return this.C-this.v},S.prototype.ca=function(){return this.H-this.G},S.prototype.move=function(h,l){this.B()||(this.v+=h,this.G+=l,this.C+=h,this.H+=l)},S.prototype.Ju=function(h,l){if(l!==void 0)this.move(h-this.gk(),l-this.Jp());else if(h instanceof d.h)this.Ju(h.x,h.y);else{if(!(h instanceof d.Sa))throw d.i.N();l=(this.C-this.v)/2;var s=(this.H-this.G)/2;this.v=h.Lg()-l,this.C=h.Lg()+l,this.G=h.ih()-s,this.H=h.ih()+s}},S.prototype.offset=function(h,l){this.v+=h,this.C+=h,this.G+=l,this.H+=l},S.prototype.normalize=function(){if(!this.B()){var h=Math.min(this.v,this.C),l=Math.max(this.v,this.C);this.v=h,this.C=l,h=Math.min(this.G,this.H),l=Math.max(this.G,this.H),this.G=h,this.H=l}},S.prototype.dn=function(h){h.ma(this.v,this.G)},S.prototype.$I=function(h){h.ma(this.C,this.G)},S.prototype.cJ=function(h){h.ma(this.v,this.H)},S.prototype.en=function(h){h.ma(this.C,this.H)},S.prototype.fT=function(){return this.B()||this.v<=this.C&&this.G<=this.H},S.prototype.sf=function(){return d.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},S.prototype.mz=function(){return d.h.construct(this.v,this.G)},S.prototype.contains=function(h,l){if(l!==void 0)return h>=this.v&&h<=this.C&&l>=this.G&&l<=this.H;if(h instanceof d.Sa)return this.contains(h.Lg(),h.ih());if(h instanceof d.h)return this.contains(h.x,h.y);if(h instanceof S)return h.v>=this.v&&h.C<=this.C&&h.G>=this.G&&h.H<=this.H;throw d.i.N()},S.prototype.hm=function(h,l){if(l!==void 0)return h>this.v&&h<this.C&&l>this.G&&l<this.H;if(h instanceof d.h)return this.hm(h.x,h.y);if(h instanceof S)return h.v>this.v&&h.C<this.C&&h.G>this.G&&h.H<this.H;throw d.i.N()},S.prototype.Nb=function(h){return h==this||h instanceof S&&(!(!this.B()||!h.B())||this.v==h.v&&this.G==h.G&&this.C==h.C&&this.H==h.H)},S.prototype.cc=function(){var h=this.v;h=d.O.truncate(h^h>>>32);var l=d.O.Th(h);return h=this.C,h=d.O.truncate(h^h>>>32),l=d.O.Th(h,l),h=this.G,h=d.O.truncate(h^h>>>32),l=d.O.Th(h,l),h=this.H,h=d.O.truncate(h^h>>>32),d.O.Th(h,l)},S.prototype.xr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},S.prototype.zy=function(h,l){var s=this.Zj(h),a=this.Zj(l);if(s&a)return 0;if(!(s|a))return 4;var u=(s!=0?1:0)|(a!=0?2:0);do{var p=l.x-h.x,f=l.y-h.y;if(p>f?s&S.YC?(s&S.ju?(h.y+=f*(this.v-h.x)/p,h.x=this.v):(h.y+=f*(this.C-h.x)/p,h.x=this.C),s=this.Zj(h)):a&S.YC?(a&S.ju?(l.y+=f*(this.v-l.x)/p,l.x=this.v):(l.y+=f*(this.C-l.x)/p,l.x=this.C),a=this.Zj(l)):s!=0?(s&S.ku?(h.x+=p*(this.G-h.y)/f,h.y=this.G):(h.x+=p*(this.H-h.y)/f,h.y=this.H),s=this.Zj(h)):(a&S.ku?(l.x+=p*(this.G-l.y)/f,l.y=this.G):(l.x+=p*(this.H-l.y)/f,l.y=this.H),a=this.Zj(l)):s&S.ZC?(s&S.ku?(h.x+=p*(this.G-h.y)/f,h.y=this.G):(h.x+=p*(this.H-h.y)/f,h.y=this.H),s=this.Zj(h)):a&S.ZC?(a&S.ku?(l.x+=p*(this.G-l.y)/f,l.y=this.G):(l.x+=p*(this.H-l.y)/f,l.y=this.H),a=this.Zj(l)):s!=0?(s&S.ju?(h.y+=f*(this.v-h.x)/p,h.x=this.v):(h.y+=f*(this.C-h.x)/p,h.x=this.C),s=this.Zj(h)):(a&S.ju?(l.y+=f*(this.v-l.x)/p,l.x=this.v):(l.y+=f*(this.C-l.x)/p,l.x=this.C),a=this.Zj(l)),s&a)return 0}while(s|a);return u},S.prototype.Zj=function(h){return(h.x<this.v?1:0)|(h.x>this.C?1:0)<<1|(h.y<this.G?1:0)<<2|(h.y>this.H?1:0)<<3},S.prototype.Bi=function(h){return!this.B()&&(this.R()<=h||this.ca()<=h)},S.prototype.tb=function(h){return h instanceof d.h?Math.sqrt(this.iK(h)):Math.sqrt(this.px(h))},S.prototype.px=function(h){var l=0,s=0,a=this.v-h.C;return a>l&&(l=a),(a=this.G-h.H)>s&&(s=a),(a=h.v-this.C)>l&&(l=a),(a=h.G-this.H)>s&&(s=a),l*l+s*s},S.prototype.iK=function(h){var l=0,s=0,a=this.v-h.x;return a>l&&(l=a),(a=this.G-h.y)>s&&(s=a),(a=h.x-this.C)>l&&(l=a),(a=h.y-this.H)>s&&(s=a),l*l+s*s},S.prototype.cn=function(h){this.B()?h.Oa():h.K(this.v,this.C)},S.ju=1,S.ku=4,S.YC=3,S.ZC=12,S}();d.l=L}(Y||(Y={})),function(d){var L,S;(S=L||(L={}))[S.initialize=0]="initialize",S[S.initializeRed=1]="initializeRed",S[S.initializeBlue=2]="initializeBlue",S[S.initializeRedBlue=3]="initializeRedBlue",S[S.sweep=4]="sweep",S[S.sweepBruteForce=5]="sweepBruteForce",S[S.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",S[S.sweepRedBlue=7]="sweepRedBlue",S[S.sweepRed=8]="sweepRed",S[S.sweepBlue=9]="sweepBlue",S[S.iterate=10]="iterate",S[S.iterateRed=11]="iterateRed",S[S.iterateBlue=12]="iterateBlue",S[S.iterateBruteForce=13]="iterateBruteForce",S[S.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",S[S.resetRed=15]="resetRed",S[S.resetBlue=16]="resetBlue";var h=function(){function l(s,a){this.ci=s,this.dH=a}return l.prototype.nr=function(s,a,u){this.ci.JX(u,s,a,this.dH)},l.prototype.$p=function(s){return this.ci.Rr(s,this.dH)},l}();L=function(){function l(){this.ow=this.oo=this.ff=this.rd=null,this.wq=new d.l,this.Am=this.Hj=this.Ij=this.Ad=this.Ef=this.Ld=this.cw=this.fo=this.qd=this.Eb=null,this.Xb=-1,this.qa=0,this.Nk()}return l.prototype.kr=function(){this.Nk(),this.Pv=!0,this.Eb==null?(this.fo=new d.ia(0),this.Eb=[]):(this.fo.Bh(0),this.Eb.length=0)},l.prototype.ad=function(s,a){if(!this.Pv)throw d.i.Hb();var u=new d.l;u.K(a),this.fo.add(s),this.Eb.push(u)},l.prototype.Fp=function(){if(!this.Pv)throw d.i.Hb();this.Pv=!1,this.Eb!=null&&0<this.Eb.length&&(this.Xb=0,this.Ic=!1)},l.prototype.pK=function(){this.Nk(),this.Ov=!0,this.Eb==null?(this.fo=new d.ia(0),this.Eb=[]):(this.fo.Bh(0),this.Eb.length=0)},l.prototype.JD=function(s,a){if(!this.Ov)throw d.i.Hb();var u=new d.l;u.K(a),this.fo.add(s),this.Eb.push(u)},l.prototype.iF=function(){if(!this.Ov)throw d.i.Hb();this.Ov=!1,this.Eb!=null&&0<this.Eb.length&&this.qd!=null&&0<this.qd.length&&(this.Xb==-1||this.Xb==2?this.Xb=3:this.Xb!=3&&(this.Xb=1),this.Ic=!1)},l.prototype.oK=function(){this.Nk(),this.Nv=!0,this.qd==null?(this.cw=new d.ia(0),this.qd=[]):(this.cw.Bh(0),this.qd.length=0)},l.prototype.ED=function(s,a){if(!this.Nv)throw d.i.Hb();var u=new d.l;u.K(a),this.cw.add(s),this.qd.push(u)},l.prototype.hF=function(){if(!this.Nv)throw d.i.Hb();this.Nv=!1,this.Eb!=null&&0<this.Eb.length&&this.qd!=null&&0<this.qd.length&&(this.Xb==-1||this.Xb==1?this.Xb=3:this.Xb!=3&&(this.Xb=2),this.Ic=!1)},l.prototype.next=function(){if(this.Ic)return!1;for(var s=!0;s;)switch(this.Xb){case 0:s=this.Gz();break;case 1:s=this.rS();break;case 2:s=this.oS();break;case 3:s=this.qS();break;case 4:s=this.UX();break;case 5:s=this.QX();break;case 6:s=this.RX();break;case 7:s=this.SX();break;case 8:s=this.ux();break;case 9:s=this.iC();break;case 10:s=this.Uz();break;case 11:s=this.jT();break;case 12:s=this.gT();break;case 13:s=this.hT();break;case 14:s=this.iT();break;case 15:s=this.kJ();break;case 16:s=this.jJ();break;default:throw d.i.Qa()}return!this.Ic},l.prototype.aC=function(s){this.qa=s},l.prototype.uz=function(s){return this.Eb[s]},l.prototype.az=function(s){return this.qd[s]},l.prototype.nl=function(s){return this.fo.read(s)},l.prototype.hl=function(s){return this.cw.read(s)},l.Tz=function(s){return!(1&~s)},l.eq=function(s){return!(1&s)},l.prototype.Nk=function(){this.Pv=this.Nv=this.Ov=!1,this.Cf=this.Df=this.Rg=this.pe=-1,this.Ic=!0},l.prototype.Gz=function(){if(this.Af=this.Vf=-1,10>this.Eb.length)return this.pe=this.Eb.length,this.Xb=5,!0;this.rd==null&&(this.rd=new d.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new d.ia(0)),this.rd.kr();for(var s=0;s<this.Eb.length;s++){var a=this.Eb[s];this.rd.Br(a.v,a.C)}for(this.rd.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ld.resize(0),s=0;s<2*this.Eb.length;s++)this.Ld.add(s);return this.Kt(this.Ld,2*this.Eb.length,!0),this.pe=2*this.Eb.length,this.Xb=4,!0},l.prototype.rS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.rd==null&&(this.rd=new d.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new d.ia(0)),this.rd.kr();for(var s=0;s<this.Eb.length;s++){var a=this.Eb[s];this.rd.Br(a.v,a.C)}for(this.rd.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ld.resize(0),s=0;s<2*this.Eb.length;s++)this.Ld.add(s);return this.Kt(this.Ld,this.Ld.size,!0),this.pe=this.Ld.size,this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Xb=7,this.jJ()},l.prototype.oS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.ff==null&&(this.ff=new d.sr(!0),this.ow=this.ff.getIterator(),this.Ef=new d.ia(0)),this.ff.kr();for(var s=0;s<this.qd.length;s++){var a=this.qd[s];this.ff.Br(a.v,a.C)}for(this.ff.Fp(),this.Ef.Jb(2*this.qd.length),this.Ef.resize(0),s=0;s<2*this.qd.length;s++)this.Ef.add(s);return this.Kt(this.Ef,this.Ef.size,!1),this.Rg=this.Ef.size,this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Xb=7,this.kJ()},l.prototype.qS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.rd==null&&(this.rd=new d.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new d.ia(0)),this.ff==null&&(this.ff=new d.sr(!0),this.ow=this.ff.getIterator(),this.Ef=new d.ia(0)),this.rd.kr();for(var s=0;s<this.Eb.length;s++){var a=this.Eb[s];this.rd.Br(a.v,a.C)}for(this.rd.Fp(),this.ff.kr(),s=0;s<this.qd.length;s++)a=this.qd[s],this.ff.Br(a.v,a.C);for(this.ff.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ef.Jb(2*this.qd.length),this.Ld.resize(0),this.Ef.resize(0),s=0;s<2*this.Eb.length;s++)this.Ld.add(s);for(s=0;s<2*this.qd.length;s++)this.Ef.add(s);return this.Kt(this.Ld,this.Ld.size,!0),this.Kt(this.Ef,this.Ef.size,!1),this.pe=this.Ld.size,this.Rg=this.Ef.size,this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Xb=7,!0},l.prototype.UX=function(){var s=this.Ld.get(--this.pe),a=s>>1;return l.eq(s)?(this.rd.remove(a),this.pe!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1)):(this.oo.EB(this.Eb[a].v,this.Eb[a].C,this.qa),this.Vf=a,this.Xb=10,!0)},l.prototype.QX=function(){return--this.pe==-1?(this.Af=this.Vf=-1,this.Ic=!0,!1):(this.Rg=this.Vf=this.pe,this.Xb=13,!0)},l.prototype.RX=function(){return--this.pe==-1?(this.Af=this.Vf=-1,this.Ic=!0,!1):(this.Vf=this.pe,this.Rg=this.qd.length,this.Xb=14,!0)},l.prototype.SX=function(){var s=this.Ld.get(this.pe-1),a=this.Ef.get(this.Rg-1),u=this.Rr(s,!0),p=this.Rr(a,!1);return u>p?this.ux():u<p?this.iC():l.Tz(s)?this.ux():l.Tz(a)?this.iC():this.ux()},l.prototype.ux=function(){var s=this.Ld.get(--this.pe),a=s>>1;if(l.eq(s))return this.Df!=-1&&this.Ij.get(a)!=-1?(this.Ad.jd(this.Df,this.Ij.get(a)),this.Ij.set(a,-1)):this.rd.remove(a),this.pe!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1);if(this.Cf!=-1&&0<this.Ad.bs(this.Cf))for(s=this.Ad.rc(this.Cf);s!=-1;){var u=this.Ad.getData(s);this.ff.vj(u),this.Hj.set(u,-1),u=this.Ad.lb(s),this.Ad.jd(this.Cf,s),s=u}return 0<this.ff.size()?(this.ow.EB(this.Eb[a].v,this.Eb[a].C,this.qa),this.Vf=a,this.Xb=12):(this.Df==-1&&(this.Ad==null&&(this.Ad=new d.jp),this.Ij=new d.ia(0),this.Ij.resize(this.Eb.length,-1),this.Ij.Wj(-1,0,this.Eb.length),this.Df=this.Ad.Ph(1)),this.Ij.set(a,this.Ad.addElement(this.Df,a)),this.Xb=7),!0},l.prototype.iC=function(){var s=this.Ef.get(--this.Rg),a=s>>1;if(l.eq(s))return this.Cf!=-1&&this.Hj.get(a)!=-1?(this.Ad.jd(this.Cf,this.Hj.get(a)),this.Hj.set(a,-1)):this.ff.remove(a),this.Rg!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1);if(this.Df!=-1&&0<this.Ad.bs(this.Df))for(s=this.Ad.rc(this.Df);s!=-1;){var u=this.Ad.getData(s);this.rd.vj(u),this.Ij.set(u,-1),u=this.Ad.lb(s),this.Ad.jd(this.Df,s),s=u}return 0<this.rd.size()?(this.oo.EB(this.qd[a].v,this.qd[a].C,this.qa),this.Af=a,this.Xb=11):(this.Cf==-1&&(this.Ad==null&&(this.Ad=new d.jp),this.Hj=new d.ia(0),this.Hj.resize(this.qd.length,-1),this.Hj.Wj(-1,0,this.qd.length),this.Cf=this.Ad.Ph(0)),this.Hj.set(a,this.Ad.addElement(this.Cf,a)),this.Xb=7),!0},l.prototype.Uz=function(){if(this.Af=this.oo.next(),this.Af!=-1)return!1;var s=this.Ld.get(this.pe)>>1;return this.rd.vj(s),this.Xb=4,!0},l.prototype.jT=function(){if(this.Vf=this.oo.next(),this.Vf!=-1)return!1;this.Af=this.Vf=-1;var s=this.Ef.get(this.Rg)>>1;return this.ff.vj(s),this.Xb=7,!0},l.prototype.gT=function(){if(this.Af=this.ow.next(),this.Af!=-1)return!1;var s=this.Ld.get(this.pe)>>1;return this.rd.vj(s),this.Xb=7,!0},l.prototype.hT=function(){if(--this.Rg==-1)return this.Xb=5,!0;this.wq.K(this.Eb[this.pe]);var s=this.Eb[this.Rg];return this.wq.W(this.qa,this.qa),!this.wq.isIntersecting(s)||(this.Af=this.Rg,!1)},l.prototype.iT=function(){if(--this.Rg==-1)return this.Xb=6,!0;this.wq.K(this.Eb[this.pe]);var s=this.qd[this.Rg];return this.wq.W(this.qa,this.qa),!this.wq.isIntersecting(s)||(this.Af=this.Rg,!1)},l.prototype.kJ=function(){return this.rd==null?(this.Ic=!0,!1):(this.pe=this.Ld.size,0<this.rd.size()&&this.rd.reset(),this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Ic=!1,!0)},l.prototype.jJ=function(){return this.ff==null?(this.Ic=!0,!1):(this.Rg=this.Ef.size,0<this.ff.size()&&this.ff.reset(),this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Ic=!1,!0)},l.prototype.Kt=function(s,a,u){this.Am==null&&(this.Am=new d.Xt),u=new h(this,u),this.Am.sort(s,0,a,u)},l.prototype.JX=function(s,a,u,p){var f=this;s.Vd(a,u,function(g,b){var x=f.Rr(g,p),T=f.Rr(b,p);return x<T||x==T&&l.eq(g)&&l.Tz(b)?-1:1})},l.prototype.Rr=function(s,a){var u=.5*this.qa;return a?(a=this.Eb[s>>1],l.eq(s)?a.G-u:a.H+u):(a=this.qd[s>>1],l.eq(s)?a.G-u:a.H+u)},l}(),d.xC=L}(Y||(Y={})),function(d){var L=function(){function S(){}return S.construct=function(h,l,s,a,u,p){var f=new S;return f.v=h,f.G=l,f.Ye=s,f.C=a,f.H=u,f.Bg=p,f},S.prototype.Oa=function(){this.Ye=this.v=NaN},S.prototype.B=function(){return isNaN(this.v)},S.prototype.XS=function(){return isNaN(this.Ye)},S.prototype.K=function(h,l,s,a,u,p){a!==void 0?typeof h=="number"?(this.v=h,this.G=l,this.Ye=s,this.C=a,this.H=u,this.Bg=p):(this.v=h.x-.5*l,this.C=this.v+l,this.G=h.y-.5*s,this.H=this.G+s,this.Ye=h.z-.5*a,this.Bg=this.Ye+a):(this.v=h,this.G=l,this.Ye=s,this.C=h,this.H=l,this.Bg=s)},S.prototype.move=function(h){this.v+=h.x,this.G+=h.y,this.Ye+=h.z,this.C+=h.x,this.H+=h.y,this.Bg+=h.z},S.prototype.copyTo=function(h){h.v=this.v,h.G=this.G,h.C=this.C,h.H=this.H},S.prototype.Lk=function(h,l,s){this.v>h?this.v=h:this.C<h&&(this.C=h),this.G>l?this.G=l:this.H<l&&(this.H=l),isNaN(this.Ye)==0?this.Ye>s?this.Ye=s:this.Bg<s&&(this.Bg=s):this.Bg=this.Ye=s},S.prototype.Zb=function(h,l,s){if(typeof h=="number")this.B()?(this.v=h,this.G=l,this.Ye=s,this.C=h,this.H=l,this.Bg=s):this.Lk(h,l,s);else if(h instanceof d.Nd)this.Zb(h.x,h.y,h.z);else{if(!(h instanceof S))throw d.i.N();h.B()||(this.Zb(h.v,h.G,h.Ye),this.Zb(h.C,h.H,h.Bg))}},S.prototype.construct=function(h,l,s){h.B()||l.B()?this.Oa():(this.v=h.oa,this.C=h.va,this.G=l.oa,this.H=l.va,this.Ye=s.oa,this.Bg=s.va)},S.prototype.nB=function(h){if(h==null||8>h.length)throw d.i.N();h[0]=new d.Nd(this.v,this.G,this.Ye),h[1]=new d.Nd(this.v,this.H,this.Ye),h[2]=new d.Nd(this.C,this.H,this.Ye),h[3]=new d.Nd(this.C,this.G,this.Ye),h[4]=new d.Nd(this.v,this.G,this.Bg),h[5]=new d.Nd(this.v,this.H,this.Bg),h[6]=new d.Nd(this.C,this.H,this.Bg),h[7]=new d.Nd(this.C,this.G,this.Bg)},S.prototype.Zw=function(h){if(h==null||h.length==0)this.Oa();else{var l=h[0];for(this.K(l.x,l.y,l.z),l=1;l<h.length;l++){var s=h[l];this.Lk(s.x,s.y,s.z)}}},S}();d.OK=L}(Y||(Y={})),function(d){(function(L){L.Qa=function(){var S=Error();return S.message="Internal Error",S},L.Ie=function(){var S=Error();return S.message="Not Implemented",S},L.Xk=function(){var S=Error();return S.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",S},L.Hb=function(){var S=Error();return S.message="Invalid Call",S},L.N=function(S){var h=Error();return h.message="Illegal Argument Exception",S!==void 0&&(h.message+=": "+S),h},L.fu=function(S){var h=Error();return h.message=S!==void 0?"Runtime Exception: "+S:"Runtime Exception.",h},L.fa=function(S){var h=Error();return h.message="Geometry Exception: "+S,h},L.GK=function(){var S=Error();return S.message="Assert Failed Exception",S},L.ce=function(){var S=Error();return S.message="IndexOutOfBoundsException",S},L.WC=function(){var S=Error();return S.message="UserCancelException",S}})(d.i||(d.i={}))}(Y||(Y={})),function(d){(d=d.bm||(d.bm={}))[d.forward=0]="forward",d[d.reverse=1]="reverse"}(Y||(Y={})),function(d){var L=function(){function l(s,a){this.Wa=s,this.FH=a,this.LH=-1,this.sl=!1}return l.prototype.qe=function(){},l.prototype.next=function(){if(++this.LH==this.FH.I())return null;var s=this.FH.Na(this.LH);s.scale(this.Wa.ec);var a=new d.Da;return this.Wa.sy(s,this.sl,a),a},l.prototype.La=function(){return 0},l}(),S=function(){function l(s,a,u){this.Wa=s,this.rw=a,this.Xn=!1,this.co=u,this.bw=[0],this.sk=[0],this.Nj=[0],this.Gs=[0],this.sl=!1,this.qq=new d.Da,this.uk=[]}return l.prototype.qe=function(){},l.prototype.next=function(){if(this.Xn){this.Xn=!1,this.sd.ha();var s=d.aa.jg(this.qq);return d.Fg.Mk(s,this.Wa.Aq,!0,!0,this.Wa.Ub)}if(this.sd==null&&(this.sd=this.rw.Ga(),this.sd.$a(),this.co!=null&&this.co.Yk(null,0)),!this.sd.Ha()){if(!this.sd.$a())return null;this.co!=null&&this.co.Yk(null,0)}s=null,this.sk[0]=0,this.FA=this.bw[0]=0,this.di=NaN,this.Xn=!1;for(var a=this.uk.length=0,u=new d.h,p=new d.h,f=[0];this.sd.Ha()&&8>this.FA;){var g=this.sd.ha();if(u.L(g.ac()),p.L(g.wc()),u.scale(this.Wa.ec),p.scale(this.Wa.ec),d.cj.Mu(u,p)?u.x=p.x:d.cj.Ku(u,p)&&(p.x=u.x),this.uk.length=0,d.cj.tF(this.Wa.Tb,this.Wa.kc,this.Wa.ze,u,p,this.Wa.QA,this.Wa.Zs,f,this.Nj,this.Gs,this.uk,this.bw),this.co!=null&&(g=this.uk.slice(0),this.co.qG(this.co.da()-1,g,g.length-1)),d.cj.Lu(u,p)?(this.qq.Oa(),this.Wa.sy(u,this.sl,this.qq),this.Xn=!0):(this.qq.Oa(),this.Xn=this.xy(f[0],this.qq)),this.Xn){if(this.sd.li(),this.sd.Ez()){this.sd.li(),this.sd.ha();break}this.sd.DW();break}s==null&&(s=new d.Da).Yk(null,0),this.OD(s),a++}if(this.bw[0]=0,0<a){for(f=this.sd.wb();0<a;)this.sd.li(),u.L(this.rw.Na(this.sd.wb())),p.L(this.rw.Na(this.sd.ik())),u.scale(this.Wa.ec),p.scale(this.Wa.ec),this.sl&&(d.cj.Mu(u,p)?u.x=p.x:d.cj.Ku(u,p)&&(p.x=u.x)),this.uk.length=0,d.cj.tF(this.Wa.Tb,this.Wa.kc,this.Wa.ze,p,u,this.Wa.QA,this.Wa.Zs,null,this.Nj,this.Gs,this.uk,this.bw),this.OD(s),a--;return u.L(this.rw.Na(this.sd.wb())),u.scale(this.Wa.ec),h.Hr(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,u,this.di+1.570796326794897,this.di+4.71238898038469,this.Wa.ao,this.sl,this.sk,s,NaN,NaN),this.sd.Vb(f),this.sd.ha(),a=d.ta.kj(null,s,!0),d.Fg.Mk(s,a,!0,!0,this.Wa.Ub)}return this.Xn=!1,this.sd.ha(),s=d.aa.jg(this.qq),d.Fg.Mk(s,this.Wa.Aq,!0,!0,this.Wa.Ub)},l.prototype.OD=function(s){var a=this.uk[0],u=this.Nj[0]-1.570796326794897,p=this.Gs[0]+1.570796326794897;if(!isNaN(this.di)){if(this.di>=this.Nj[0]){var f=this.di+1.570796326794897;u=f+3.141592653589793-(this.di-this.Nj[0])}else u=(f=this.di+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Nj[0]-this.di));var g=!(this.di>=this.Nj[0]&&3.141592653589793>=this.di-this.Nj[0])&&!(this.di<this.Nj[0]&&3.141592653589793<=this.Nj[0]-this.di),b=!1;if(Math.abs(u-f)<=.5*this.Wa.ao)if(g){var x=s.Na(s.I()-2);x.scale(this.Wa.ec);var T=new d.ga(0);for(d.kb.Xy(this.Wa.Tb,this.Wa.kc,a.x,a.y,x.x,x.y,T),x=T.u;x<=f;)x+=6.283185307179586;for(;x>f;)x-=6.283185307179586;x<u&&(b=!0)}else b=!0;b?(s.DB(0,s.I()-1),this.sl||((a=new d.h).L(s.Na(s.I()-1)),a.scale(this.Wa.ec),-3.141592653589793>a.x-this.sk[0]?this.sk[0]-=6.283185307179586:3.141592653589793<a.x-this.sk[0]&&(this.sk[0]+=6.283185307179586)),g||(u=.5*(u+f))):(g?((f=new d.h).L(a),f.scale(1/this.Wa.ec),s.wf(0,-1,f)):h.Hr(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,this.uk[0],f,u,this.Wa.ao,this.sl,this.sk,s,NaN,NaN),this.FA+=1)}h.qy(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,this.Wa.ze,this.uk,u,p,this.sl,this.sk,s),this.di=this.Gs[0]},l.prototype.xy=function(s,a){return this.Wa.xy(this.uk,s,this.Nj[0],this.Gs[0],this.sl,a)},l.prototype.La=function(){return 0},l}(),h=function(){function l(){}return l.buffer=function(s,a,u,p,f,g){if(s==null)throw d.i.N("Geometry::Geodesic_bufferer::buffer");if(s.B())return new d.Da(s.description);var b=new l;b.Qg=a,b.Jc=d.cb.sc(a);var x=d.cb.vv(b.Jc);if(b.Ub=g,b.Tb=d.cb.ev(b.Jc),b.kc=x*(2-x),b.ec=b.Jc.Hd().ai,b.qa=b.Qg.Kn(),b.Aq=b.Jc.Kn(),b.Zs=b.Aq*b.ec,b.zq=1.570796326794897/b.ec,b.OY=3.141592653589793/b.ec,b.Js=6.283185307179586/b.ec,b.PY=b.Js/6,b.LA=0,b.NY=1.5707963267948966*b.Tb/b.LA,u==4?(b.ze=2,b.Wv=!0):(b.ze=u,b.Wv=!1),b.Ka=p,b.rb=Math.abs(p),isNaN(f)||.001>f?b.xX():b.$n=f,u=s.getType(),d.aa.yd(u)?((u=new d.Ta(s.description)).oc(s,!0),s=u,u=1607):u==197&&(u=new d.l,s.A(u),u.R()<=b.qa||u.ca()<=b.qa?((u=new d.Ta(s.description)).ad(s,!1),s=u,u=1607):((u=new d.Da(s.description)).ad(s,!1),s=u,u=1736)),b.yX(),d.aa.Rn(u)||b.zX(),b.rb<=.5*b.$n)return u!=1736?new d.Da(s.description):b.Wv?s:d.cj.Qr(s,b.Qg,b.ze,b.QA,-1,g);if(0>b.Ka&&u!=1736)return new d.Da(s.description);if(b.Wv&&d.aa.Hc(u)?(a=d.cj.Qr(s,a,4,NaN,b.$n,g),s=d.cb.zh(a,b.Qg,b.Jc)):s=d.cb.zh(s,b.Qg,b.Jc),(s=d.Hh.lj(s,b.Jc)).B())return new d.Da(s.description);switch(!b.Wv&&d.aa.Hc(u)&&(s=d.cj.pI(b.ec,s)),s=l.KX(s,b.Jc),u){case 1736:a=b.UN(s);break;case 1607:a=b.VN(s);break;case 550:a=b.SN(s);break;case 33:a=b.TN(s);break;default:throw d.i.fa("corrupted_geometry")}return(b=d.cb.zh(a,b.Jc,b.Qg)).Jl(s.description),b},l.prototype.UN=function(s){var a=new d.Da;s=new S(this,s,a),s=d.Gh.local().V(s,this.Jc,this.Ub).next(),s=d.ip.nj(s,this.Jc,2);var u=new d.Dd;return u.scale(1/this.ec,1/this.ec),a.Oc(u),a=d.ip.nj(a,this.Jc,2),0<=this.Ka?d.Gh.local().V(a,s,this.Jc,this.Ub):d.kp.local().V(a,s,this.Jc,this.Ub)},l.prototype.VN=function(s){return s=new S(this,s,null),s=d.Gh.local().V(s,this.Jc,this.Ub).next(),d.ip.nj(s,this.Jc,2)},l.prototype.SN=function(s){return s=new L(this,s),s=d.Gh.local().V(s,this.Jc,this.Ub).next(),d.ip.nj(s,this.Jc,2)},l.prototype.TN=function(s){(s=s.D()).scale(this.ec);var a=new d.Da;return this.sy(s,!1,a),d.ip.nj(a,this.Jc,2)},l.prototype.xy=function(s,a,u,p,f,g){var b=s[0],x=s[s.length-1],T=b.y>x.y?b.y:x.y,M=d.F.q(this.Tb,this.kc,b.y<x.y?b.y:x.y);if(T=d.F.q(this.Tb,this.kc,T),.001<this.LA-(M+a+this.rb)&&.001<this.LA+(T-a-this.rb))return!1;M=(a=u-1.570796326794897)-3.141592653589793,T=a+3.141592653589793;var C=(u=p+1.570796326794897)+3.141592653589793,O=[NaN],F=[NaN],P=[NaN],G=[NaN];if(p=!1,l.dJ(this.Tb,this.kc,this.rb,b,a,M,x,u,O,F),l.dJ(this.Tb,this.kc,this.rb,x,C,u,b,M,P,G),(u<O[0]&&O[0]<C||u<F[0]&&F[0]<C)&&(p=!0),p||(M<P[0]&&P[0]<a||M<G[0]&&G[0]<a)&&(p=!0),!p&&f)return!1;for(var q=[],V=s.length-1;0<=V;V--)q.push(s[V]);return g.Oa(),g.Yk(null,0),V=[0],l.qy(this.Tb,this.kc,this.ec,this.rb,this.ze,s,a,u,f,V,g),l.Hr(this.Tb,this.kc,this.ec,this.rb,x,u,C,this.ao,f,V,g,O[0],F[0]),l.qy(this.Tb,this.kc,this.ec,this.rb,this.ze,q,C,T,f,V,g),l.Hr(this.Tb,this.kc,this.ec,this.rb,b,M,a,this.ao,f,V,g,P[0],G[0]),s=!1,f||(s=this.IE(this.ec,g)),p||s},l.prototype.sy=function(s,a,u){u.Oa(),u.Yk(null,0),l.Hr(this.Tb,this.kc,this.ec,this.rb,s,-this.ao,6.283185307179586,this.ao,a,[0],u,NaN,NaN),a||this.IE(this.ec,u)},l.prototype.IE=function(s,a){var u=this.vO(s,a);return s=this.wO(s,a),u||s},l.prototype.vO=function(s,a){var u=a.I(),p=!1,f=new d.l;if(a.A(f),!d.s.Y(f.H*s,1.570796326794897)&&!d.s.Y(f.G*s,-1.570796326794897))return!1;var g=new d.h;for(--u;0<=u;u--)a.D(u,g),(g.y==f.H&&d.s.Y(g.y*s,1.570796326794897)||g.y==f.G&&d.s.Y(g.y*s,-1.570796326794897))&&(p=!0,this.OI(g,u,a));return p},l.prototype.wO=function(s,a){var u=a.Na(0),p=a.Na(a.I()-1);return 3.141592653589793<Math.abs(u.x-p.x)*s?(this.VV(a),!0):this.uO(a)},l.prototype.uO=function(s){return 0>s.Ke()&&(this.UV(s),!0)},l.prototype.OI=function(s,a,u){var p=u.I(),f=0<a?a-1:p-1;if(p=u.Na(a<p-1?a+1:0),f=u.Na(f),!d.s.Y(p.y,s.y)&&!d.s.Y(p.x,s.x)){var g=new d.h;g.ma(p.x,s.y),u.Cb(a,g)}d.s.Y(f.y,s.y)||d.s.Y(f.x,s.x)||((p=new d.h).ma(f.x,s.y),u.wf(0,a,p))},l.prototype.VV=function(s){var a=new d.Da,u=new d.Da,p=new d.Dd,f=s.Na(0),g=s.Na(s.I()-1),b=new d.h;f.x>g.x?(g=this.zq,p.gg(-this.Js,0)):(g=-this.zq,p.gg(this.Js,0)),a.add(s,!1),s.Oa(),u.add(a,!1),u.Oc(p),f=new d.l,u.A(f),f.W((this.Js-f.R())/2,0),f.G=-this.zq,f.H=this.zq;for(var x=0;x<u.I();x++)u.D(x,b),a.wf(0,-1,b);for(u.Oc(p),x=0;x<u.I();x++)u.D(x,b),a.wf(0,-1,b);u=a.Na(0),p=a.Na(a.I()-1),b.ma(p.x,g),a.wf(0,-1,b),b.ma(.5*(p.x+u.x),g),a.wf(0,-1,b),b.ma(u.x,g),a.wf(0,-1,b),a=d.Hh.ks(a,this.Jc,2,!0,f.v),a=d.Hh.ks(a,this.Jc,2,!0,f.C),a=d.Ud.clip(a,f,this.Aq,NaN),s.add(a,!1)},l.prototype.UV=function(s){var a=new d.l;s.A(a),a.W((this.Js-a.R())/2,0),a.G=-this.zq,a.H=this.zq,s.Yk(null,0);var u=new d.h;u.ma(a.v,a.G),s.wf(1,-1,u),u.ma(a.v,a.H),s.wf(1,-1,u),u.ma(.5*(a.v+a.C),a.H),s.wf(1,-1,u),u.ma(a.C,a.H),s.wf(1,-1,u),u.ma(a.C,a.G),s.wf(1,-1,u),u.ma(.5*(a.v+a.C),a.G),s.wf(1,-1,u)},l.qy=function(s,a,u,p,f,g,b,x,T,M,C){var O=null;T||((O=new d.h).Rc(),0<C.I()&&(O.L(C.Na(C.I()-1)),O.scale(u)));var F=new d.ga(0),P=new d.ga(0),G=new d.ga(0),q=new d.h,V=new d.h,Z=g[g.length-1];u=1/u;for(var X=0;X<g.length;X++){var te=g[X];if(X==0)var oe=b;else X==g.length-1?oe=x:(d.kb.wd(s,a,Z.x,Z.y,te.x,te.y,null,null,F,f),oe=F.u-1.570796326794897);d.kb.yi(s,a,te.x,te.y,p,oe,P,G),T?V.ma(P.u,G.u):(q.ma(P.u,G.u),l.gJ(te.x,q.x,O.x,M),V.ma(M[0]+q.x,q.y),O.L(V)),V.scale(u),C.wf(0,-1,V)}},l.Hr=function(s,a,u,p,f,g,b,x,T,M,C,O,F){if(!(b-g<x)){var P=new d.ga(0),G=new d.ga(0),q=new d.h,V=new d.h,Z=null;T||((Z=new d.h).Rc(),0<C.I()&&(Z.L(C.Na(C.I()-1)),Z.scale(u)));var X=d.O.truncate(Math.ceil(g/x)),te=X++*x;for(te==g&&(te=X++*x),u=1/u;te<b+x&&(g<O&&O<te?(te=O,X--):g<F&&F<te&&(te=F,X--),!(te>=b));)d.kb.yi(s,a,f.x,f.y,p,te,P,G),T?V.ma(P.u,G.u):(q.ma(P.u,G.u),l.gJ(f.x,q.x,Z.x,M),V.ma(M[0]+q.x,q.y),Z.L(V)),V.scale(u),C.wf(0,-1,V),g=te,te=X++*x}},l.dJ=function(s,a,u,p,f,g,b,x,T,M){var C=new d.h,O=new d.h,F=new d.ga(0),P=new d.ga(0);for(d.kb.yi(s,a,p.x,p.y,u,f,F,P),C.ma(F.u,P.u),d.kb.yi(s,a,p.x,p.y,u,g,F,P),O.ma(F.u,P.u),u=new d.ga(0),d.kb.Xy(s,a,b.x,b.y,C.x,C.y,u),T[0]=u.u,d.kb.Xy(s,a,b.x,b.y,O.x,O.y,u),M[0]=u.u;T[0]<=M[0];)T[0]+=6.283185307179586;for(;T[0]>M[0];)T[0]-=6.283185307179586;for(;T[0]>=x;)T[0]-=6.283185307179586,M[0]-=6.283185307179586;for(;T[0]<x;)T[0]+=6.283185307179586,M[0]+=6.283185307179586},l.gJ=function(s,a,u,p){if(isNaN(u)){for(;3.141592653589793<p[0]+a-s;)p[0]-=6.283185307179586;for(;3.141592653589793<s-(p[0]+a);)p[0]+=6.283185307179586}else 3.141592653589793<p[0]+a-u?p[0]-=6.283185307179586:3.141592653589793<u-(p[0]+a)&&(p[0]+=6.283185307179586)},l.KX=function(s,a){var u=s.getType(),p=d.aa.Hc(u)?s.da():u==550?s.I():1;if(p==1)return s;var f=new d.ia(0);f.resize(p);for(var g=[],b=new d.l,x=0;x<p;x++){if(f.write(x,x),d.aa.Hc(u)){s.Rj(x,b);var T=b.sf()}else T=s.Na(x);T=d.XK.$X(a,T),g[x]=T}for(f.Vd(0,f.size,function(M,C){return g[M]<g[C]?-1:g[M]>g[C]?1:0}),a=s.Ia(),x=0;x<p;x++)b=f.read(x),d.aa.Hc(u)?a.addPath(s,b,!0):a.Fd(s,b,b+1);return a},l.prototype.yX=function(){var s=Math.min(3.141592653589793*this.Tb-this.rb,this.rb);s=Math.min(s,.39269908169872414*this.Tb);var a=new d.h;a.ma(0,10*this.ec);var u=45*this.ec,p=new d.ga(0),f=new d.ga(0),g=new d.ga(0),b=new d.ga(0),x=new d.ga(0),T=new d.ga(0),M=new d.ga(0),C=new d.ga(0),O=new d.h,F=new d.h,P=new d.h,G=new d.h;d.kb.yi(this.Tb,this.kc,a.x,a.y,s,0,p,f),O.ma(p.u,f.u),d.kb.yi(this.Tb,this.kc,a.x,a.y,s,u,g,b),F.ma(g.u,b.u),p=new d.ga(0),f=new d.ga(0);for(var q=new d.ga(0);d.kb.yi(this.Tb,this.kc,a.x,a.y,s,.5*(0+u),x,T),P.ma(x.u,T.u),d.kb.wd(this.Tb,this.kc,O.x,O.y,F.x,F.y,p,f,null,2),d.kb.oj(this.Tb,this.kc,O.x,O.y,.5*p.u,f.u,M,C,2),G.ma(M.u,C.u),d.kb.wd(this.Tb,this.kc,P.x,P.y,G.x,G.y,q,null,null,2),!(q.u<=this.$n);)u*=.9,d.kb.yi(this.Tb,this.kc,a.x,a.y,s,u,g,b),F.ma(g.u,b.u);this.ao=6.283185307179586/Math.ceil(6.283185307179586/(u-0))},l.prototype.zX=function(){var s=Math.min(3.141592653589793*this.Tb-this.rb,this.rb);s=Math.min(s,.39269908169872414*this.Tb);var a=new d.h,u=new d.h;a.ma(0,10*this.ec),u.ma(10*this.ec,10*this.ec);var p=new d.ga(0),f=new d.ga(0),g=new d.ga(0);d.kb.wd(this.Tb,this.kc,a.x,a.y,u.x,u.y,g,p,f,this.ze);var b=new d.ga(0),x=new d.ga(0),T=new d.ga(0),M=new d.ga(0),C=new d.h,O=new d.ga(0),F=new d.ga(0),P=new d.ga(0),G=new d.ga(0),q=new d.ga(0),V=new d.ga(0),Z=new d.ga(0),X=new d.ga(0),te=new d.ga(0),oe=new d.h,me=new d.h,Se=new d.h,Ce=new d.h,$e=1;p=p.u,f=f.u+1.570796326794897,g=g.u,d.kb.yi(this.Tb,this.kc,a.x,a.y,s,p-1.570796326794897,F,P),oe.ma(F.u,P.u),d.kb.yi(this.Tb,this.kc,u.x,u.y,s,f,G,q),me.ma(G.u,q.u),F=new d.ga(0),P=new d.ga(0),f=new d.ga(0);for(var Ue=new d.ga(0);d.kb.oj(this.Tb,this.kc,a.x,a.y,.5*(0+$e)*g,p,b,x,this.ze),C.ma(b.u,x.u),d.kb.wd(this.Tb,this.kc,a.x,a.y,C.x,C.y,null,null,O,this.ze),d.kb.yi(this.Tb,this.kc,C.x,C.y,s,O.u+1.570796326794897,V,Z),Se.ma(V.u,Z.u),d.kb.wd(this.Tb,this.kc,oe.x,oe.y,me.x,me.y,F,P,null,2),d.kb.oj(this.Tb,this.kc,oe.x,oe.y,.5*F.u,P.u,X,te,2),Ce.ma(X.u,te.u),d.kb.wd(this.Tb,this.kc,Se.x,Se.y,Ce.x,Ce.y,f,null,null,2),!(f.u<=this.$n);)$e*=.9,d.kb.oj(this.Tb,this.kc,a.x,a.y,$e*g,p,T,M,this.ze),u.ma(T.u,M.u),d.kb.wd(this.Tb,this.kc,a.x,a.y,u.x,u.y,null,null,Ue,this.ze),d.kb.yi(this.Tb,this.kc,u.x,u.y,s,Ue.u+1.570796326794897,G,q),me.ma(G.u,q.u);1e5<(s=$e*g)&&(s=1e5),this.QA=s},l.prototype.xX=function(){var s=5e4<this.rb?100:1e4<this.rb?10:1;500>this.rb/s&&(s=this.rb/500),.01>s&&(s=.01),this.$n=s},l}();d.VK=h}(Y||(Y={})),function(d){var L=function(){function S(){}return S.Mf=function(h,l){var s=new d.h;s.L(l),h.push(s)},S.up=function(h,l){h.add(l.x),h.add(l.y)},S.hB=function(h){h.Bh(h.size-2)},S.oB=function(h,l){l.ma(h.get(h.size-2),h.get(h.size-1))},S.Qr=function(h,l,s,a,u,p){if(h==null)throw d.i.N();var f=h.getType();if(h.B()||d.aa.Rn(f))return h;var g=new S;g.Qg=l,g.Jc=d.cb.sc(l);var b=d.cb.vv(g.Jc);if(g.Ub=p,g.Tb=d.cb.ev(g.Jc),g.kc=b*(2-b),g.ec=g.Jc.Hd().ai,g.Aq=g.Jc.Kn(),g.Zs=g.Aq*g.ec,g.AA=a,g.zA=u,g.ze=s,f==197?(s=new d.Da(h.description)).ad(h,!1):d.aa.yd(f)?(s=new d.Ta(h.description)).oc(h,!0):s=h,g.ze!=4){if((l=g.Qg.Nb(g.Jc)==0?d.cb.zh(s,g.Qg,g.Jc):d.Hh.lj(s,g.Jc)).B())return l;l=S.pI(g.ec,l),l=g.Zy(l),l=d.ip.nj(l,g.Jc,g.ze),g=d.cb.zh(l,g.Jc,g.Qg)}else{if(d.Eg.Sb(l)==2?(h=d.cb.ml(),(l=d.Xj.local().V(s,h,l,p))==h&&(l=new d.Da,h.copyTo(l))):l=d.Hh.lj(s,g.Jc),l.B())return l;g=g.CX(l)}return g},S.pI=function(h,l){var s=new d.l;if(l.xc(s),3.141592653589793>s.R()*h)return l;var a=!1;s=l.Ga();for(var u=new d.h,p=new d.h;s.$a();)for(;s.Ha();){var f=s.ha();if(u.L(f.ac()),p.L(f.wc()),u.scale(h),p.scale(h),3.141592653589793<Math.abs(u.x-p.x)){var g=S.Lu(u,p);if(!g){a=!0;break}if(6.283185307179586<Math.abs(u.x-p.x)){a=!0;break}}}if(!a)return l;a=l.Ia();var b=1<l.description.Aa,x=new d.h,T=new d.h,M=new d.h,C=new d.h,O=new d.Sa;for(s.Zi();s.$a();)for(var F=NaN,P=[0];s.Ha();){if(f=s.ha(),u.L(f.ac()),p.L(f.wc()),u.scale(h),p.scale(h),isNaN(F)?(S.Wi(u.x,NaN,P),T.L(u)):T.L(M),F=T.x,g=S.Lu(u,p)){if(6.283185307179586<p.x-u.x)for(;6.283185307179586<p.x-u.x;)p.x-=6.283185307179586;if(-6.283185307179586>p.x-u.x)for(;-6.283185307179586>p.x-u.x;)p.x+=6.283185307179586;S.Wi(p.x,NaN,P),M.L(p)}else x.L(p),S.AU(x),S.Wi(x.x,F,P),M.ma(P[0]+x.x,x.y);.5>Math.abs(M.x-p.x)&&M.L(p),b?(f.Tw(0,O),C.L(T),C.scale(1/h),O.Cb(C),(g=s.vm())?a.nf(O):a.lineTo(O),s.Qn()&&!l.dc(s.gb)&&(f.Tw(1,O),C.L(M),C.scale(1/h),O.Cb(C),a.lineTo(O))):((g=s.vm())&&a.Hz(null,0),f=a.da()-1,C.L(T),C.scale(1/h),a.wf(f,-1,C),s.Qn()&&!l.dc(s.gb)&&(C.L(M),C.scale(1/h),a.wf(f,-1,C)))}return a},S.tF=function(h,l,s,a,u,p,f,g,b,x,T,M){var C=new d.h,O=new d.h,F=0<a.compare(u);S.fJ(F,a,u,C,O),S.uF(h,l,s,C,O,p,NaN,f,g,b,x,null,T,M),F&&S.fC(b,x,null,T)},S.prototype.Zy=function(h){var l=h.Ia(),s=h.Ga(),a=[],u=null,p=null,f=1<h.description.Aa;f&&(u=new d.be(0),p=new d.ig);for(var g=[0],b=new d.h,x=new d.h,T=new d.h,M=new d.h;s.$a();)for(g[0]=0;s.Ha();){var C=s.ha();b.L(C.ac()),x.L(C.wc()),b.scale(this.ec),x.scale(this.ec);var O=0<b.compare(x);S.fJ(O,b,x,T,M),a.length=0,u!=null&&u.Bh(0),0<this.AA?S.uF(this.Tb,this.kc,this.ze,T,M,this.AA,this.zA,this.Zs,null,null,null,f?u:null,a,g):S.aR(this.Tb,this.kc,this.ze,T,M,this.zA,this.Zs,f?u:null,a,g),O&&S.fC(null,null,f?u:null,a),a[0].L(C.ac()),a[a.length-1].L(C.wc());for(var F=1;F<a.length-1;F++)a[F].scale(1/this.ec);f?(O=S.eJ(O,C,p),S.TD(s.vm(),s.Qn()&&!h.dc(s.gb),C,O,u,a,l)):S.SD(s.vm(),s.Qn()&&!h.dc(s.gb),a,l)}return l},S.prototype.CX=function(h){var l=h.Ia(),s=h.Ga(),a=[],u=null,p=new d.ig,f=1<h.description.Aa;for(f&&(u=new d.be(0));s.$a();)for(;s.Ha();){var g=s.ha(),b=g.ac(),x=g.wc();b=0<b.compare(x),x=S.eJ(b,g,p),a.length=0,u!=null&&u.Bh(0),S.BX(this.Tb,this.kc,this.ec,x,this.Qg,this.AA,this.zA,f?u:null,a),b&&S.fC(null,null,f?u:null,a),f?S.TD(s.vm(),s.Qn()&&!h.dc(s.gb),g,x,u,a,l):S.SD(s.vm(),s.Qn()&&!h.dc(s.gb),a,l)}return l},S.SD=function(h,l,s,a){h&&a.Hz(null,0),h=a.da()-1;var u=s.slice(0);a.qG(h,u,u.length-1),l&&a.wf(h,-1,s[s.length-1])},S.TD=function(h,l,s,a,u,p,f){var g=new d.Sa;if(s.To(g),h?f.nf(g):f.lineTo(g),2<p.length){h=a.Qb();for(var b=1;b<p.length-1;b++){var x=a.NG(u.get(b)*h);a.Tw(x,g),g.Cb(p[b]),f.lineTo(g)}}l&&(s.Po(g),f.lineTo(g))},S.uF=function(h,l,s,a,u,p,f,g,b,x,T,M,C,O){var F=new d.ga(0),P=new d.ga(0),G=new d.ga(0);d.kb.wd(h,l,a.x,a.y,u.x,u.y,G,F,P,s),G=G.u;var q=F=F.u;0>q&&(q+=6.283185307179586),0>(P=P.u)&&(P+=6.283185307179586),b!=null&&(b[0]=G),x!=null&&(x[0]=q),T!=null&&(T[0]=P),x=b=NaN,M!=null&&(b=((x=d.F.Ah(h,l))-(T=d.F.q(h,l,a.y)))/G,x=(x+T)/G),T=S.Mu(a,u),P=S.Ku(a,u),q=T||P;var V=S.FE(a,u,g),Z=new d.ga(0),X=new d.ga(0),te=new d.h,oe=new d.h,me=new d.h;S.Wi(a.x,NaN,O);var Se=[O[0]];if(G<=p)S.Mf(C,a),S.Wi(u.x,NaN,O),M!=null&&M.add(0),q?(T&&S.kB(a,u,M,C),P&&S.iB(a,u,M,C)):V?S.jB(a,u,F,b,x,M,C):0<f&&(oe.ma(a.x-Se[0],a.y),te.ma(u.x-O[0],u.y),S.Yy(h,l,s,a,G,F,oe,te,0,1,f,M,C,Se)),S.Mf(C,u);else{var Ce=G/((p=1+d.O.truncate(Math.ceil(G/p)))-1),$e=new d.h,Ue=0;S.Mf(C,a),$e.L(a),oe.ma(a.x-O[0],a.y),M!=null&&M.add(0);for(var Te=1;Te<p;Te++){if(Te<p-1){d.kb.oj(h,l,a.x,a.y,Te*Ce,F,Z,X,s),te.ma(Z.u,X.u),S.Wi(te.x,$e.x,O),me.ma(O[0]+te.x,te.y);var ut=Te/(p-1)}else S.Wi(u.x,NaN,O),te.ma(u.x-O[0],u.y),me.L(u),ut=1;q?(Te==1&&T&&S.kB(a,me,M,C),Te==p-1&&P&&S.iB($e,u,M,C)):V?S.EE($e,me,g)&&(a.x<u.x?$e.x>me.x&&(O[0]+=6.283185307179586,me.ma(O[0]+te.x,te.y)):$e.x<me.x&&(O[0]-=6.283185307179586,me.ma(O[0]+te.x,te.y)),S.jB($e,me,F,b,x,M,C)):0<f&&S.Yy(h,l,s,a,G,F,oe,te,Ue,ut,f,M,C,Se),S.Mf(C,me),M!=null&&M.add(ut),$e.L(me),oe.L(te),Se[0]=O[0],Ue=ut}}},S.aR=function(h,l,s,a,u,p,f,g,b,x){var T=new d.ga(0),M=new d.ga(0),C=new d.ga(0);d.kb.wd(h,l,a.x,a.y,u.x,u.y,C,T,M,s),M=C.u,T=T.u;var O=C=NaN;if(g!=null){O=d.F.Ah(h,l);var F=d.F.q(h,l,a.y);C=(O-F)/M,O=(O+F)/M}F=S.Mu(a,u);var P=S.Ku(a,u),G=F||P;f=S.FE(a,u,f);var q=S.Lu(a,u);q=G||f||q,S.Wi(a.x,NaN,x);var V=new d.h;S.Mf(b,a),V.L(a),g!=null&&g.add(0),q?(G?(F&&S.kB(a,u,g,b),P&&S.iB(a,u,g,b)):f&&S.jB(a,u,T,C,O,g,b),S.Wi(u.x,NaN,x),S.Mf(b,u)):M<=p?(S.Wi(u.x,NaN,x),S.Mf(b,u)):(C=new d.h,f=new d.h,C.L(a),f.L(u),C.x-=x[0],f.x-=x[0],-3.141592653589793>f.x?f.x+=6.283185307179586:3.141592653589793<f.x&&(f.x-=6.283185307179586),S.Yy(h,l,s,a,M,T,C,f,0,1,p,g,b,x),S.Mf(b,u),S.Wi(u.x,NaN,x)),g!=null&&g.add(1)},S.Yy=function(h,l,s,a,u,p,f,g,b,x,T,M,C,O){var F=new d.h,P=new d.h;F.ma(f.x+O[0],f.y),new d.ga(0),new d.ga(0),new d.ga(0),new d.ga(0);var G=new d.ga(0),q=new d.ga(0),V=new d.ga(0),Z=new d.h,X=new d.h,te=new d.h,oe=new d.h;Z.L(f),X.L(g),f=new d.be(0),g=new d.be(0),S.up(f,X),g.add(x);var me=new d.h,Se=new d.yb,Ce=[];for(S.YJ(4,Ce);0<f.size;){for(var $e,Ue=!1,Te=NaN,ut=0;3>ut;ut++)if($e=Ce[ut]*x+(1-Ce[ut])*b,d.kb.oj(h,l,a.x,a.y,$e*u,p,G,q,s),te.ma(G.u,q.u),ut==0&&(Te=$e,oe.L(te)),S.WW(Z,te,X,Se),Se.hc(Se.fe(te,!0),me),d.kb.wd(h,l,te.x,te.y,me.x,me.y,V,null,null,2),V.u>T){Ue=!0;break}Ue?(X.L(oe),x=Te,S.up(f,X),g.add(x)):(S.hB(f),g.En(g.size-1,1,g.size-1),0<f.size&&(S.Wi(X.x,F.x,O),P.ma(O[0]+X.x,X.y),S.Mf(C,P),F.L(P),M!=null&&M.add(x),Z.L(X),b=x,S.oB(f,X),x=g.get(g.size-1)))}},S.BX=function(h,l,s,a,u,p,f,g,b){var x=new d.h,T=new d.h,M=new d.h,C=new d.h,O=new d.h,F=new d.h,P=new d.h,G=new d.h,q=new d.h,V=new d.h,Z=new d.ga(0),X=new d.ga(0),te=new d.h,oe=[[],[]],me=d.Eg.Sb(u)==1;u=u.Xd(0);var Se=a.ac(),Ce=a.wc();me?(F.ma(Se.x*s,Se.y*s),P.ma(Ce.x*s,Ce.y*s)):(oe[0][0]=Se.x,oe[0][1]=Se.y,oe[1][0]=Ce.x,oe[1][1]=Ce.y,d.cb.vt(),F.x=oe[0][0]*s,F.y=oe[0][1]*s,P.x=oe[1][0]*s,P.y=oe[1][1]*s);var $e=0,Ue=0,Te=1,ut=a.Pn();x.L(Se),T.L(Ce),Ce=new d.be(0);var ot=new d.be(0),Rt=new d.be(0);S.up(Ce,T),S.up(ot,P),Rt.add(Te),S.Mf(b,x),g!=null&&g.add(Ue);var hi=[],ir=0<f?ut?5:3:ut?5:1;S.YJ(ir,hi);for(var mi=new d.ga(0),Pt=new d.ga(0),ct=new d.ga(0),Tt=new d.ga(0),Mi=new d.ga(0),_i=new d.ga(0),fo=new d.ga(0);0<ot.size;){var Lt=!1,xn=NaN;for(d.kb.wd(h,l,F.x,F.y,P.x,P.y,mi,Pt,null,2),Se=0;Se<ir&&!(Se==0&&(!ut&&0>=f&&mi.u<=p&&3.141592653589793>Math.abs(F.x-P.x)||a.Ux(Ue,Te)<=u));Se++){var Zt=hi[Se]*Te+(1-hi[Se])*Ue;if(a.hc(Zt,M),me?G.ma(M.x*s,M.y*s):(oe[0][0]=M.x,oe[0][1]=M.y,d.cb.vt(),G.x=oe[0][0]*s,G.y=oe[0][1]*s),Se==0&&(xn=Zt,O.L(M),V.L(G),0<p&&(mi.u>p||3.141592653589793<=Math.abs(F.x-P.x)))){Lt=!0;break}if(ut&&0<p){if(d.kb.wd(h,l,F.x,F.y,G.x,G.y,ct,null,null,2),ct.u>p||3.141592653589793<=Math.abs(F.x-G.x)){Lt=!0;break}}else if(0<f){if(ut?(C.NS(x,T,hi[Se]),me?q.ma(C.x*s,C.y*s):(oe[0][0]=C.x,oe[0][1]=C.y,d.cb.vt(),q.x=oe[0][0]*s,q.y=oe[0][1]*s)):(C.L(M),q.L(G)),d.kb.wd(h,l,F.x,F.y,q.x,q.y,Tt,null,null,2),!(Tt.u<=mi.u)){Lt=!0;break}if(d.kb.oj(h,l,F.x,F.y,Tt.u,Pt.u,Z,X,2),te.ma(Z.u,X.u),d.kb.wd(h,l,te.x,te.y,G.x,G.y,Mi,null,null,2),Mi.u>f){Lt=!0;break}if(ut){if(d.kb.wd(h,l,te.x,te.y,q.x,q.y,_i,null,null,2),_i.u>f){Lt=!0;break}if(d.kb.wd(h,l,q.x,q.y,G.x,G.y,fo,null,null,2),fo.u>f){Lt=!0;break}}}}Lt?(T.L(O),P.L(V),Te=xn,S.up(Ce,T),S.up(ot,P),Rt.add(Te)):(S.hB(Ce),S.hB(ot),Rt.En(Rt.size-1,1,Rt.size-1),S.Mf(b,T),$e+=mi.u,g!=null&&g.add($e),0<ot.size&&(x.L(T),F.L(P),Ue=Te,S.oB(Ce,T),S.oB(ot,P),Te=Rt.get(Rt.size-1)))}if(g!=null)for(h=1/$e,Se=0;Se<g.size;Se++)g.write(Se,g.read(Se)*h)},S.fC=function(h,l,s,a){a.reverse(),s!=null&&s.ni(0,s.size,1),s=h!=null?h[0]:NaN,a=l!=null?l[0]:NaN,h!=null&&(h[0]=a),l!=null&&(l[0]=s)},S.fJ=function(h,l,s,a,u){h?(a.L(s),u.L(l)):(a.L(l),u.L(s))},S.eJ=function(h,l,s){return h?(s.create(l.getType()),l.copyTo(s.get()),s.get().reverse(),s.get()):l},S.Wi=function(h,l,s){if(isNaN(l)){for(;3.141592653589793<s[0]-h;)s[0]-=6.283185307179586;for(;3.141592653589793<h-s[0];)s[0]+=6.283185307179586}else 3.141592653589793<s[0]+h-l?s[0]-=6.283185307179586:3.141592653589793<l-(s[0]+h)&&(s[0]+=6.283185307179586)},S.WW=function(h,l,s,a){3.141592653589793>Math.abs(l.x-h.x)?(a.Dc(h),3.141592653589793<=s.x-h.x?a.Ql(s.x-6.283185307179586,s.y):3.141592653589793<=h.x-s.x?a.Ql(s.x+6.283185307179586,s.y):a.Ql(s.x,s.y)):(a.Dc(s),3.141592653589793<=h.x-s.x?a.Ql(h.x-6.283185307179586,h.y):3.141592653589793<=s.x-h.x?a.Ql(h.x+6.283185307179586,h.y):a.Ql(h.x,h.y))},S.YJ=function(h,l){for(var s=0;s<h;s++){var a=Math.ceil(s/2)/(h+1);s%2!=0&&(a=-a),l[s]=.5+a}},S.Mu=function(h,l){return!!(d.s.Y(h.y,1.570796326794897)&&!d.s.Y(l.y,1.570796326794897)||d.s.Y(h.y,-1.570796326794897)&&!d.s.Y(l.y,-1.570796326794897))},S.Ku=function(h,l){return!!(d.s.Y(l.y,1.570796326794897)&&!d.s.Y(h.y,1.570796326794897)||d.s.Y(l.y,-1.570796326794897)&&!d.s.Y(h.y,-1.570796326794897))},S.FE=function(h,l,s){return!(!S.EE(h,l,s)||d.s.Y(h.y,1.570796326794897)||d.s.Y(h.y,-1.570796326794897)||d.s.Y(l.y,1.570796326794897)||d.s.Y(l.y,-1.570796326794897))},S.EE=function(h,l,s){return Math.abs(Math.abs(h.x-l.x)-3.141592653589793)<=s},S.Lu=function(h,l){return!!(d.s.Y(h.y,1.570796326794897)&&d.s.Y(l.y,1.570796326794897)||d.s.Y(h.y,-1.570796326794897)&&d.s.Y(l.y,-1.570796326794897))},S.kB=function(h,l,s,a){if(0<h.y){var u=new d.h;u.ma(l.x,1.570796326794897)}else(u=new d.h).ma(l.x,-1.570796326794897);d.s.Y(h.x,u.x)||d.s.Y(l.y,u.y)||(S.Mf(a,u),s!=null&&s.add(0))},S.iB=function(h,l,s,a){if(0<l.y){var u=new d.h;u.ma(h.x,1.570796326794897)}else(u=new d.h).ma(h.x,-1.570796326794897);d.s.Y(l.x,u.x)||d.s.Y(h.y,u.y)||(S.Mf(a,u),s!=null&&s.add(1))},S.jB=function(h,l,s,a,u,p,f){d.s.Cd(s)?(0<1.570796326794897-h.y&&((s=new d.h).ma(h.x,1.570796326794897),S.Mf(f,s),p!=null&&p.add(a)),0<1.570796326794897-l.y&&((s=new d.h).ma(l.x,1.570796326794897),S.Mf(f,s),p!=null&&p.add(a))):(0<1.570796326794897+h.y&&((s=new d.h).ma(h.x,-1.570796326794897),S.Mf(f,s),p!=null&&p.add(u)),0<1.570796326794897+l.y&&((s=new d.h).ma(l.x,-1.570796326794897),S.Mf(f,s),p!=null&&p.add(u)))},S.AU=function(h){if(-3.141592653589793>h.x)for(;-3.141592653589793>h.x;)h.x+=6.283185307179586;if(3.141592653589793<h.x)for(;3.141592653589793<h.x;)h.x-=6.283185307179586},S}();d.cj=L}(Y||(Y={})),function(d){d.ip=function(){function L(){}return L.nj=function(S,h,l){if(S==null||h==null||!d.cb.Wc(h))throw d.i.N();if(S.B())return S;var s=S,a=s.getType();if(d.aa.Hc(a)){s=d.Hh.lj(S,h),S=new d.l,s.A(S),a=d.ta.Wd(h,S,!1);for(var u=d.cb.gh(h),p=Math.floor((S.v-u.v)/u.R())*u.R()+u.v;p<S.C;)p>S.v+a&&p<S.C-a&&(s=d.Hh.ks(s,h,l,!0,p)),p+=u.R()}else{if(a==197)return(S=new d.Da(s.description)).ad(s,!1),L.nj(S,h,l);if(d.aa.yd(a))return(S=new d.Ta(s.description)).oc(s,!0),L.nj(S,h,l)}return L.Uy(s,h)},L.Uy=function(S,h){if(S==null||h==null||!d.cb.Wc(h))throw d.i.N();if(S.B())return S;var l=S.getType();return l==197?(l=new d.Da(S.description)).ad(S,!1):d.aa.yd(l)?(l=new d.Ta(S.description)).oc(S,!0):l=S,(l=d.Hh.lj(l,h)).B()?l:d.Eg.Sb(h)==1?d.Hh.Fn(l,h,0,l!=S,0):L.NQ(l,h,l!=S)},L.NQ=function(S,h,l){if(!d.cb.Wc(h))throw d.i.N();if(S.B())return S;var s=d.cb.bf(h),a=-180*s;return s*=360,d.Eg.Sb(h)==2&&(s=(a=d.cb.gh(h)).C,s-=a=a.v),d.Hh.Hp(S,a,s,h,l,0,!0)},L}()}(Y||(Y={})),function(d){d.BY=function(){function L(){}return L.P=function(S){return 0>S?-S:S},L.Mb=function(S,h){return 0<=h?L.P(S):-L.P(S)},L.Y=function(S,h){return S==h||L.P(S-h)<=L.JC*(1+(L.P(S)+L.P(h))/2)},L.Cd=function(S){return S==0||L.P(S)<=L.JC},L.Ah=function(S,h){var l=(h=(1-(h=Math.sqrt(1-h)))/(1+h))*h;return S/(1+h)*(1+l*(.25+l*(.015625+1/256*l)))*L.EL},L.EL=1.5707963267948966,L.JC=3552713678800501e-30,L}()}(Y||(Y={})),function(d){var L=function(h){this.Wf=h,this.Kk=this.Wf.getCode(),0>this.Kk&&(this.Kk=0)};d.DY=L;var S=function(){function h(l){l===void 0&&(l=null),this.Cj=null,this.Un=!1,l!==null&&(this.Cj=new L(l))}return h.prototype.Ec=function(){return this.Cj!=null?this.Cj.Kk:0},h.prototype.Of=function(){var l=new h;return this.copyTo(l),l},h.prototype.copyTo=function(l){l.Cj=this.Cj,l.Un=this.Un},h.prototype.Qz=function(){this.Un=!this.Un},h.prototype.qm=function(){return this.Cj!=null?this.Cj.Wf:null},h.prototype.LJ=function(l){if(0>=l)throw d.i.N();if(l!=this.Ec()){if((l=d.pf.geogtran(l))==null)throw d.i.N("Geogtran not found.");this.Cj=new L(l)}},h.prototype.Bz=function(){return this.Cj==null?null:this.Cj.Wf.toString()},h.prototype.tX=function(l){if(l==null)throw d.i.N();var s=null;try{s=d.pf.fromString(d.Sc.PE_TYPE_GEOGTRAN,l)}catch{throw d.i.N()}this.Cj=new L(s)},h.prototype.Nb=function(l){return l==this||!(!(l instanceof h)||(0>=this.Ec()||this.Ec()!=l.Ec())&&!this.qm().isEqual(l.qm()))&&this.Un==l.Un},h.prototype.toString=function(){var l="GeographicTransformation: "+this.Bz();return 200<l.length?l.substring(0,197)+"... ("+l.length.toString()+" characters)":l},h.create=function(l,s){var a=new h;return a.LJ(l),s&&a.Qz(),a},h.uP=function(l,s){var a=new h;return a.tX(l),s&&a.Qz(),a},h}();d.Dx=S}(Y||(Y={})),function(d){var L=function(){function h(){}return h.construct=function(l,s,a,u){var p=new h;return p.hw=l,p.iw=s,p.QY=a,p.RY=u,p},h.Ey=function(l,s){return l.hw==s.hw?l.iw==s.iw?0:l.iw<s.iw?-1:1:l.hw<s.hw?-1:1},h}(),S=function(){function h(){this.yT=[],this.zT=[],this.qp()}return h.kz=function(){return h.jK==null&&(h.jK=new h),h.jK},h.prototype.qp=function(){this.iD(this.yT),this.iD(this.zT)},h.prototype.iD=function(l){try{var s=[];s=s.sort(L.Ey);for(var a=0;a<s.length;a++)l.push(s[a])}catch{}},h}();d.CY=S}(Y||(Y={})),function(d){var L=function(){function S(){}return S.prototype.yD=function(h){this.Fk=h},S.prototype.WM=function(h){this.Fb=h},S.prototype.xD=function(h){this.zo=h},S.CE=function(h){return!(h.B()||h.getType()!=1607&&h.getType()!=1736)},S.AE=function(h){return!(h.B()||h.getType()!=1607&&h.getType()!=1736||20>h.I())},S.BE=function(h){return!(h.B()||h.getType()!=1607&&h.getType()!=1736||20>h.I())},S}();d.Uk=L}(Y||(Y={})),function(d){d.$b=function(){function L(){}return L.TT=function(S){var h=new d.Da;return h.sx(S.es(),S.gs()),h.yj(S.es(),S.fs()),h.yj(S.ds(),S.fs()),h.yj(S.ds(),S.gs()),h},L.zh=function(S,h){return S===null?null:d.Hx.local().V(S,h,null)},L.jY=function(S,h){var l=d.Gh.local();return S=new d.Zc(S),l.V(S,h,null).next()},L.im=function(S,h,l){return d.kp.local().V(S,h,l,null)},L.ep=function(S,h,l){return d.Kx.local().V(S,h,l,null)},L.VX=function(S,h,l){var s=d.Kx.local();for(S=new d.Zc(S),h=new d.Zc(h),l=s.V(S,h,l,null),s=[];(h=l.next())!=null;)s.push(h);return s},L.Nb=function(S,h,l){return d.dj.local().V(3,S,h,l,null)},L.TP=function(S,h,l){return d.dj.local().V(4,S,h,l,null)},L.RS=function(S,h,l){var s=d.Xj.local();for(S=new d.Zc(S),h=new d.Zc(h),l=s.V(S,h,l,null),s=[];(h=l.next())!=null;)s.push(h);return s},L.QP=function(S,h,l){var s=d.kp.local();for(S=new d.Zc(S),h=new d.Zc(h),l=s.V(S,h,l,null),s=[];(h=l.next())!=null;)s.push(h);return s},L.Ea=function(S,h,l){return d.Xj.local().V(S,h,l,null)},L.QS=function(S,h,l){if((S=d.Xj.local().V(S,h,l,null,1))===null)return[];if(S.getType()===550){for(h=[],l=0;l<S.wa;l++)h.push(S.KR(l));return h}return S.getType()===33?[S]:[]},L.qY=function(S,h,l){return d.dj.local().V(2,S,h,l,null)},L.contains=function(S,h,l){return d.dj.local().V(1,S,h,l,null)},L.BP=function(S,h,l){return d.dj.local().V(16,S,h,l,null)},L.touches=function(S,h,l){return d.dj.local().V(8,S,h,l,null)},L.DU=function(S,h,l){return d.dj.local().V(32,S,h,l,null)},L.TS=function(S,h,l){return d.dj.local().V(1073741824,S,h,l,null)},L.yB=function(S,h,l,s){return d.zL.local().V(S,h,l,s,null)},L.tb=function(S,h,l,s){var a=null;if(l!=null){if(a=l.Hd(),s!=null&&a.Ec()!=s.Ec()&&a.od!=s.od)throw d.i.Xk()}else if(s!=null)throw d.i.N();return S=d.rL.local().V(S,h,null),a!==null&&s!==null&&(S=d.Tc.Nh(S,a,s)),S},L.clip=function(S,h,l){return d.kL.local().V(S,d.l.construct(h.es(),h.gs(),h.ds(),h.fs()),l,null)},L.dl=function(S,h,l){if(S==null||h==null)return null;for(S=d.mL.local().V(!0,S,h,l,null),h=[];(l=S.next())!=null;)l.B()||h.push(l);return h.slice(0)},L.MN=function(S,h,l,s,a,u,p,f){if(a===!0)return L.NN(S,h,l,s,u,p,f);if(a=l,h!=null){if(p=h.Hd(),s!=null&&p.Ec()!=s.Ec()){if(p.od!=s.od)throw d.i.Xk();a=[],d.Tc.XE(l,l.length,s,p,a)}}else if(s!=null)throw d.i.N();if(l=d.AC.local(),u){for(S=new d.Zc(S),h=l.V(S,h,a,u,null),S=[];(u=h.next())!=null;)S.push(u);u=S.slice(0)}else for(u=[],s=0;s<S.length;s++)u[s]=l.V(S[s],h,a[s],null);return u},L.NN=function(S,h,l,s,a,u,p){if(h===null||(s==null&&(s=h.Ec()!==4326?h.Hd():d.Tc.Zg(9001)),s.od!==0))throw d.i.N();if(d.Tc.XE(l,l.length,s,d.Tc.Zg(9001),l),s=d.FC.local(),a){for(S=new d.Zc(S),h=s.V(S,h,u,l,p,!1,a,null),l=[];(u=h.next())!=null;)l.push(u);a=l.slice(0)}else{a=[];for(var f=0;f<S.length;f++)a[f]=s.V(S[f],h,u,l[f],p,!1,null)}return a},L.buffer=function(S,h,l,s,a,u,p){var f=l;if(a===!1){if(h!=null){if(a=h.Hd(),s!=null&&a.Ec()!=s.Ec()){if(a.od!=s.od)throw d.i.Xk();f=d.Tc.Nh(l,s,a)}}else if(s!=null)throw d.i.N();S=d.AC.local().V(S,h,f,null)}else{if(h===null||(s==null&&(s=h.Ec()!==4326?h.Hd():d.Tc.Zg(9001)),s.od!==0))throw d.i.N();f=d.Tc.Nh(l,s,d.Tc.Zg(9001)),S=d.FC.local().V(S,h,u,f,p,!1,null)}return S},L.BU=function(S,h,l,s,a,u,p){if(h!=null){var f=h.Hd();if(p!=null&&f.Ec()!=p.Ec()){if(f.od!=p.od)throw d.i.Xk();l=d.Tc.Nh(l,p,f)}}else if(p!=null)throw d.i.N();for(S=new d.Zc(S),h=d.IC.local().V(S,h,l,s,a,u,null),l=[];(s=h.next())!=null;)l.push(s);return l.slice(0)},L.offset=function(S,h,l,s,a,u,p){if(h!=null){var f=h.Hd();if(p!=null&&f.Ec()!=p.Ec()){if(f.od!=p.od)throw d.i.Xk();l=d.Tc.Nh(l,p,f)}}else if(p!=null)throw d.i.N();return d.IC.local().V(S,h,l,s,a,u,null)},L.iP=function(S){return d.CC.local().V(S,null)},L.jP=function(S,h){var l=d.CC.local();for(S=new d.Zc(S),h=l.V(S,h,null),l=[];(S=h.next())!=null;)l.push(S);return l},L.nz=function(S,h,l){return d.Ix.local().nz(S,h,l)},L.oz=function(S,h){return d.Ix.local().oz(S,h)},L.pz=function(S,h,l,s){return d.Ix.local().pz(S,h,l,s)},L.eC=function(S,h){return d.Yl.local().V(S,h,!1,null)},L.dT=function(S,h){return d.Yl.local().rs(S,h,null)},L.QQ=function(S,h,l,s,a){var u=d.EC.local();if(h!=null){if(h=h.Hd(),a!=null&&h.Ec()!=a.Ec()){if(h.od!=a.od)throw d.i.Xk();l=d.Tc.Nh(l,a,h)}}else if(a!=null)throw d.i.N();return u.V(S,l,s,null)},L.Qr=function(S,h,l,s){var a=d.Xl.local();if(h!=null){if(h=h.Hd(),s!=null&&h.Ec()!=s.Ec()){if(h.od!=s.od)throw d.i.Xk();l=d.Tc.Nh(l,s,h)}}else if(s!=null)throw d.i.N();return a.V(S,l,null)},L.Wy=function(S,h,l,s,a){a===void 0&&(a=0);var u=d.tL.local();if(a==4||a!==0)throw d.i.Ie();if(s!==null){if(s.od!==0)throw d.i.N("Unit must be a linear unit type");l=d.Tc.Nh(l,s,d.Tc.Zg(9001))}return u.V(S,l,h,a,null)},L.WQ=function(S,h,l,s){if(S===null)return 0;if(s==4||s!==0)throw d.i.Ie();if(S.getType()==197)S=L.TT(S);else if(S.getType()!=1736)return 0;if(s=d.cb.sc(h),S=d.cb.zh(S,h,s),S=d.UK.XQ([S])[0],l!==null){if(l.od!==2)throw d.i.N("Unit must be a area unit type");S=d.Tc.Nh(S,d.Tc.Zg(109404),l)}return S},L.ZQ=function(S,h,l,s){if(S=d.vL.local().V(S,h,s,null),l!==null){if(l.od!==0)throw d.i.N("Unit must be a linear unit type");S=d.Tc.Nh(S,d.Tc.Zg(9001),l)}return S},L.JU=function(S,h,l){if(S===null)return 0;var s=null;if(h!=null){if((s=h.Hd()).od==0&&(s=d.Tc.aG(s))==null&&l!==null)throw d.i.N();if(l!=null&&s.Ec()!=l.Ec()&&s.od!=l.od)throw d.i.Xk()}else if(l!=null)throw d.i.N();return S.getType()==1736||S.getType()==197?(S=S.Ke(),l!==null?d.Tc.Nh(S,s,l):S):0},L.KU=function(S,h,l){if(S===null||S.B()||1>S.Db())return 0;var s=null;if(h!=null){if(s=h.Hd(),l!=null&&s.Ec()!=l.Ec()&&s.od!=l.od)throw d.i.Xk()}else if(l!=null)throw d.i.N();S.getType()==1736||S.getType()==197?h=S.mg():d.aa.yd(S.getType())?(h=new d.Ta(S.description)).oc(S,!0):h=S,S=0,h=h.Ga();for(var a=new d.h,u=new d.h;h.$a();)for(;h.Ha();){var p=h.ha();p.Yp(a),p.Tr(u),S+=d.h.tb(a,u)}return s!==null&&l!==null&&(S=d.Tc.Nh(S,s,l)),S},L.fP=function(S){return S.points!==void 0?L.mS(S,S.hasZ!==void 0&&S.hasZ,S.hasM!==void 0&&S.hasM):S.rings!==void 0?L.lG(S.rings,S.hasZ!==void 0&&S.hasZ,S.hasM!==void 0&&S.hasM,"P"):S.paths!==void 0?L.lG(S.paths,S.hasZ!==void 0&&S.hasZ,S.hasM!==void 0&&S.hasM,"L"):S.x!==void 0?L.nS(S):S.xmin!==void 0?L.lS(S):null},L.nS=function(S){if(S.x==null||S.x=="NaN")return new d.Sa;var h=new d.Sa(S.x,S.y);return S.z!==void 0&&S.z!==null&&h.wX(S.z),S.m!==void 0&&S.m!==null&&h.hX(S.m),h},L.lS=function(S){if(S.xmin==null||S.xmin=="NaN")return new d.Fh;var h=new d.Fh(S.xmin,S.ymin,S.xmax,S.ymax);return S.zmin!==void 0&&S.zmin!==null&&h.setInterval(1,0,S.zmin,S.zmax),S.mmin!==void 0&&S.mmin!==null&&h.setInterval(2,0,S.mmin,S.mmax),h},L.mS=function(S,h,l){var s=0,a=new d.de,u=3*S.points.length;u%2!=0&&u++,2>u&&(u=2);var p=d.O.truncate(3*S.points.length/2);4>p?p=4:16>p&&(p=16),u=d.Yc.Dn(u,0);var f=d.Yc.Dn(p);p=d.Yc.Dn(p);for(var g=0;g<S.points.length;g++)u.write(2*g,S.points[g][0]),u.write(2*g+1,S.points[g][1]),f.write(g,h||l?S.points[g][2]:NaN),p.write(g,l&&h?S.points[g][3]:NaN),s++;return s!=0&&(a.resize(s),a.hn(0,u)),h&&(a.re(1),a.hn(1,f)),l&&(a.re(2),a.hn(2,h==0?f:p)),a.Pc(16777215),a},L.lG=function(S,h,l,s){var a=0,u=2;if(s=="P"){var p=new d.Da;a=1,u=3}else p=new d.Ta;for(var f=d.Yc.Oh(0),g=d.Yc.Mr(0),b=0,x=0,T=[],M=[],C=0;C<S.length;C++){var O=S[C].length;if(T[C]=!1,s==="P"&&S[C][0][0]===S[C][S[C].length-1][0]&&S[C][0][1]===S[C][S[C].length-1][1]){var F=l==0||S[C][0][3]===S[C][S[C].length-1][3]||S[C][0][3]===void 0&&S[C][S[C].length-1][3]===void 0;(h==0||S[C][0][2]===S[C][S[C].length-1][2]||S[C][0][2]===void 0&&S[C][S[C].length-1][2]===void 0)&&F&&(T[C]=!0,--O)}O>=u?(M[C]=!1,x+=1,f.add(b),g.add(a),b+=O):M[C]=!0}for((s=3*b)%2!=0&&s++,2>s&&(s=2),4>(C=d.O.truncate(3*b/2))?C=4:16>C&&(C=16),s=d.Yc.Dn(s,0),a=d.Yc.Dn(C),u=d.Yc.Dn(C),C=O=0;C<S.length;C++)if(M[C]===!1)for(F=0;F<S[C].length;F++){var P=!1;F===S[C].length-1&&T[C]===!0&&(P=!0),P||(s.write(2*O,S[C][F][0]),s.write(2*O+1,S[C][F][1]),a.write(O,h||l?S[C][F][2]:NaN),u.write(O,l&&h?S[C][F][3]:NaN),O++)}return b!=0&&(S=p,f.resize(x),g.resize(x),0<b&&(f.add(b),g.add(0)),S.hn(0,s),S.PJ(g),S.QJ(f)),h&&(p.re(1),p.hn(1,a)),l&&(p.re(2),p.hn(2,h==0?a:u)),p.Pc(16777215),p},L}()}(Y||(Y={})),function(d){d.Ex=function(){function L(){}return L.br=function(S){var h,l=0,s=S.length,a=S[0];for(h=0;h<s-1;h++){var u=S[h+1];l+=(u[0]-a[0])*(u[1]+a[1]),a=u}return 0<=l},L.rotate=function(S,h,l){h=h*Math.PI/180;var s=Math.cos(h),a=Math.sin(h);if(S.paths!==void 0){h={paths:[]};for(var u=0;u<S.paths.length;u++){for(var p=S.paths[u],f=[],g=0;g<p.length;g++){var b=p[g].slice(0);f.push(b);var x=s*(p[g][0]-l.x)-a*(p[g][1]-l.y)+l.x,T=a*(p[g][0]-l.x)+s*(p[g][1]-l.y)+l.y;b[0]=x,b[1]=T}h.paths.push(f),S.hasZ!==void 0&&(h.hasZ=S.hasZ),S.hasM!==void 0&&(h.hasM=S.hasM)}return h}if(S.rings!==void 0){for(h={rings:[]},u=0;u<S.rings.length;u++){p=S.rings[u],f=[];var M=L.br(p);for(g=0;g<p.length;g++)b=p[g].slice(0),f.push(b),x=s*(p[g][0]-l.x)-a*(p[g][1]-l.y)+l.x,T=a*(p[g][0]-l.x)+s*(p[g][1]-l.y)+l.y,b[0]=x,b[1]=T;L.br(f)!==M&&f.reverse(),h.rings.push(f),S.hasZ!==void 0&&(h.hasZ=S.hasZ),S.hasM!==void 0&&(h.hasM=S.hasM)}return h}if(S.x!==void 0)return h={x:s*(S.x-l.x)-a*(S.y-l.y)+l.x,y:a*(S.x-l.x)+s*(S.y-l.y)+l.y},S.z!==void 0&&(h.z=S.z),S.m!==void 0&&(h.m=S.m),S.hasZ!==void 0&&(h.hasZ=S.hasZ),S.hasM!==void 0&&(h.hasM=S.hasM),h;if(S.points!==void 0){for(h={points:[]},u=S.points,g=0;g<u.length;g++)(p=u[g].slice(0))[0]=s*(u[g][0]-l.x)-a*(u[g][1]-l.y)+l.x,p[1]=a*(u[g][0]-l.x)+s*(u[g][1]-l.y)+l.y,h.points.push(p);return S.hasZ!==void 0&&(h.hasZ=S.hasZ),S.hasM!==void 0&&(h.hasM=S.hasM),h}return null},L.JQ=function(S,h){if(S.paths!==void 0){for(var l={paths:[]},s=0;s<S.paths.length;s++){for(var a=S.paths[s],u=[],p=0;p<a.length;p++){var f=a[p].slice(0);u.push(f);var g=h.x-a[p][0];f[0]=a[p][0]+2*g}l.paths.push(u)}return S.hasZ!==void 0&&(l.hasZ=S.hasZ),S.hasM!==void 0&&(l.hasM=S.hasM),l}if(S.rings!==void 0){for(l={rings:[]},s=0;s<S.rings.length;s++){a=S.rings[s];var b=L.br(a);for(u=[],p=0;p<a.length;p++)f=a[p].slice(0),u.push(f),g=h.x-a[p][0],f[0]=a[p][0]+2*g;L.br(u)!==b&&u.reverse(),l.rings.push(u)}return S.hasZ!==void 0&&(l.hasZ=S.hasZ),S.hasM!==void 0&&(l.hasM=S.hasM),l}if(S.x!==void 0)return g=h.x-S.x,l={x:S.x+2*g,y:S.y},S.z!==void 0&&(l.z=S.z),S.m!==void 0&&(l.m=S.m),S.hasZ!==void 0&&(l.hasZ=S.hasZ),S.hasM!==void 0&&(l.hasM=S.hasM),l;if(S.points!==void 0){for(l={points:[]},s=S.points,p=0;p<s.length;p++)a=s[p].slice(0),g=h.x-a[0],a[0]+=2*g,l.points.push(a);return S.hasZ!==void 0&&(l.hasZ=S.hasZ),S.hasM!==void 0&&(l.hasM=S.hasM),l}return S.xmin!==void 0?(l={v:S.xmin,G:S.ymin,C:S.xmax,H:S.ymax},S.zmin!==void 0&&(l.zmin=S.zmin,l.zmax=S.zmax),S.mmin!==void 0&&(l.mmin=S.mmin,l.mmax=S.mmax),g=h.x-S.xmin,l.xmax=S.xmin+2*g,g=h.x-S.xmax,l.xmin=S.xmax+2*g,S.zmin!==void 0&&(l.zmin=S.zmin),S.zmax!==void 0&&(l.zmax=S.zmax),S.mmin!==void 0&&(l.mmin=S.mmin),S.mmax!==void 0&&(l.mmax=S.mmax),S.hasZ!==void 0&&(l.hasZ=S.hasZ),S.hasM!==void 0&&(l.hasM=S.hasM),l):null},L.KQ=function(S,h){if(S.paths!==void 0){for(var l={paths:[]},s=0;s<S.paths.length;s++){for(var a=S.paths[s],u=[],p=0;p<a.length;p++){var f=a[p].slice(0);u.push(f);var g=h.y-a[p][1];f[1]=a[p][1]+2*g}l.paths.push(u)}return S.hasZ!==void 0&&(l.hasZ=S.hasZ),S.hasM!==void 0&&(l.hasM=S.hasM),l}if(S.rings!==void 0){for(l={rings:[]},s=0;s<S.rings.length;s++){a=S.rings[s];var b=L.br(a);for(u=[],p=0;p<a.length;p++)f=a[p].slice(0),u.push(f),g=h.y-a[p][1],f[1]=a[p][1]+2*g;L.br(u)!==b&&u.reverse(),l.rings.push(u)}return S.hasZ!==void 0&&(l.hasZ=S.hasZ),S.hasM!==void 0&&(l.hasM=S.hasM),l}if(S.x!==void 0)return g=h.y-S.y,l={y:S.y+2*g,x:S.x},S.z!==void 0&&(l.z=S.z),S.m!==void 0&&(l.m=S.m),S.hasZ!==void 0&&(l.hasZ=S.hasZ),S.hasM!==void 0&&(l.hasM=S.hasM),l;if(S.points!==void 0){for(l={points:[]},s=S.points,p=0;p<s.length;p++)a=s[p].slice(0),g=h.y-a[1],a[1]+=2*g,l.points.push(a);return S.hasZ!==void 0&&(l.hasZ=S.hasZ),S.hasM!==void 0&&(l.hasM=S.hasM),l}return S.xmin!==void 0?(l={v:S.xmin,G:S.ymin,C:S.xmax,H:S.ymax},S.zmin!==void 0&&(l.zmin=S.zmin,l.zmax=S.zmax),S.mmin!==void 0&&(l.mmin=S.mmin,l.mmax=S.mmax),g=h.y-S.ymin,l.ymax=S.ymin+2*g,g=h.y-S.ymax,l.ymin=S.ymax+2*g,S.zmin!==void 0&&(l.zmin=S.zmin),S.zmax!==void 0&&(l.zmax=S.zmax),S.mmin!==void 0&&(l.mmin=S.mmin),S.mmax!==void 0&&(l.mmax=S.mmax),S.hasZ!==void 0&&(l.hasZ=S.hasZ),S.hasM!==void 0&&(l.hasM=S.hasM),l):null},L}()}(Y||(Y={})),function(d){d.ZK=function(){function L(){}return L.Ig=function(S,h){switch(h==null&&(h=d.ee.og()),S){case 33:return new d.Sa(h);case 322:return new d.yb(h);case 197:return new d.Fh(h);case 550:return new d.de(h);case 1607:return new d.Ta(h);case 1736:return new d.Da(h);default:throw d.i.fa("invalid argument.")}},L}()}(Y||(Y={})),function(d){var L=function(){function S(h,l){this.Te=d.ia.qf(h,-1),this.ua=new d.au,this.wl=l}return S.prototype.AW=function(h){this.ua.At(Math.min(this.Te.size,h)),this.ua.fn(h)},S.prototype.addElement=function(h,l){if(l===void 0)return this.eN(h);l=d.O.truncate(l%this.Te.size);var s=this.Te.get(l);return s==-1&&(s=this.ua.Ph(),this.Te.set(l,s)),this.ua.addElement(s,h)},S.prototype.eN=function(h){var l=this.wl.jz(h);l=d.O.truncate(l%this.Te.size);var s=this.Te.get(l);return s==-1&&(s=this.ua.Ph(),this.Te.set(l,s)),this.ua.addElement(s,h)},S.prototype.jd=function(h,l){if(l===void 0)this.KP(h);else{l=d.O.truncate(l%this.Te.size);var s=this.Te.get(l);if(s==-1)throw d.i.N();for(var a=this.ua.rc(s),u=-1;a!=-1;){var p=this.ua.lb(a);this.ua.ja(a)==h?(this.ua.jd(s,u,a),this.ua.rc(s)==-1&&(this.ua.bh(s),this.Te.set(l,-1))):u=a,a=p}}},S.prototype.KP=function(h){var l=this.wl.jz(h);l=d.O.truncate(l%this.Te.size);var s=this.Te.get(l);if(s==-1)throw d.i.N();for(var a=this.ua.rc(s),u=-1;a!=-1;){var p=this.ua.lb(a);this.ua.ja(a)==h?(this.ua.jd(s,u,a),this.ua.rc(s)==-1&&(this.ua.bh(s),this.Te.set(l,-1))):u=a,a=p}},S.prototype.rR=function(h){return h=d.O.truncate(h%this.Te.size),(h=this.Te.get(h))==-1?-1:this.ua.rc(h)},S.prototype.ER=function(h){return this.ua.lb(h)},S.prototype.vd=function(h){var l=this.wl.jz(this.ja(h));l=d.O.truncate(l%this.Te.size);var s=this.Te.get(l);if(s==-1)throw d.i.N();for(var a=this.ua.rc(s),u=-1;a!=-1;){if(a==h)return this.ua.jd(s,u,a),void(this.ua.rc(s)==-1&&(this.ua.bh(s),this.Te.set(l,-1)));u=a,a=this.ua.lb(a)}throw d.i.N()},S.prototype.ja=function(h){return this.ua.ja(h)},S.prototype.clear=function(){this.Te=d.ia.qf(this.Te.size,-1),this.ua.clear()},S.prototype.size=function(){return this.ua.TF()},S}();d.dL=L}(Y||(Y={})),function(d){var L=function(){function S(){this.Li=new d.$c(3),this.ua=new d.$c(6),this.sT=!1,this.je=-1}return S.prototype.fl=function(h){this.Li.jd(h)},S.prototype.Pw=function(){return this.Li.Ce()},S.prototype.bv=function(h){this.ua.jd(h)},S.prototype.$A=function(){return this.ua.Ce()},S.prototype.WB=function(h,l){this.Li.S(h,1,l)},S.prototype.ex=function(h,l){this.Li.S(h,2,l)},S.prototype.gX=function(h,l){this.Li.S(h,3,l)},S.prototype.UB=function(h,l){this.ua.S(h,4,l)},S.prototype.jX=function(h,l){this.ua.S(h,3,l)},S.prototype.TJ=function(h,l){this.ua.S(h,2,l)},S.prototype.Ph=function(h){var l=this.$A();return this.ua.S(l,3,this.je),this.ua.S(l,4,0),this.ua.S(l,5,h),this.je!=-1&&this.TJ(this.je,l),this.je=l},S.prototype.bh=function(h){this.LE(h);var l=this.ua.T(h,2),s=this.ua.T(h,3);return l!=-1?this.jX(l,s):this.je=s,s!=-1&&this.TJ(s,l),this.bv(h),s},S.prototype.At=function(h){this.ua.De(h)},S.prototype.PF=function(h){return this.ua.T(h,5)},S.prototype.fX=function(h,l){this.ua.S(h,5,l)},S.prototype.addElement=function(h,l){return this.tS(h,l)},S.prototype.tS=function(h,l){var s=this.Pw();this.ex(s,-1),this.ua.T(h,0)==-1&&this.ua.S(h,0,s);var a=this.ua.T(h,1);return this.WB(s,a),a!=-1&&this.ex(a,s),this.ua.S(h,1,s),this.setData(s,l),this.UB(h,this.bs(h)+1),this.sT&&this.gX(s,h),s},S.prototype.jd=function(h,l){var s=this.we(l),a=this.lb(l);return s!=-1?this.ex(s,a):this.ua.S(h,0,a),a!=-1?this.WB(a,s):this.ua.S(h,1,s),this.fl(l),this.UB(h,this.bs(h)-1),a},S.prototype.fn=function(h){this.Li.De(h)},S.prototype.getData=function(h){return this.Li.T(h,0)},S.prototype.setData=function(h,l){this.Li.S(h,0,l)},S.prototype.lb=function(h){return this.Li.T(h,2)},S.prototype.we=function(h){return this.Li.T(h,1)},S.prototype.rc=function(h){return this.ua.T(h,0)},S.prototype.Fc=function(h){return this.ua.T(h,1)},S.prototype.clear=function(){for(var h=this.je;h!=-1;)h=this.bh(h)},S.prototype.LE=function(h){for(var l=this.Fc(h);l!=-1;){var s=l;l=this.we(s),this.fl(s)}this.ua.S(h,0,-1),this.ua.S(h,1,-1),this.UB(h,0)},S.prototype.B=function(){return this.Li.size==0},S.prototype.TF=function(){return this.Li.size},S.prototype.bs=function(h){return this.ua.T(h,4)},S.prototype.qz=function(h){return this.ua.T(h,3)},S}();d.jp=L}(Y||(Y={})),function(d){var L=function(){function S(h){h===void 0?(this.ug=new d.$c(2),this.ua=new d.$c(4),this.je=-1,this.Qv=!0):(this.ug=new d.$c(2),this.ua=new d.$c(h?4:2),this.je=-1,this.Qv=h)}return S.prototype.fl=function(h){this.ug.jd(h)},S.prototype.Pw=function(){return this.ug.Ce()},S.prototype.bv=function(h){this.ua.jd(h)},S.prototype.$A=function(){return this.ua.Ce()},S.prototype.Ph=function(){var h=this.$A();return this.Qv&&(this.ua.S(h,3,this.je),this.je!=-1&&this.ua.S(this.je,2,h),this.je=h),h},S.prototype.bh=function(h){for(var l=this.rc(h);l!=-1;){var s=l;l=this.lb(l),this.fl(s)}this.Qv&&(l=this.ua.T(h,2),s=this.ua.T(h,3),l!=-1?this.ua.S(l,3,s):this.je=s,s!=-1&&this.ua.S(s,2,l)),this.bv(h)},S.prototype.At=function(h){this.ua.De(h)},S.prototype.addElement=function(h,l){var s=this.ua.T(h,1),a=this.Pw();return s!=-1?this.ug.S(s,1,a):this.ua.S(h,0,a),this.ua.S(h,1,a),this.ug.S(a,0,l),a},S.prototype.fn=function(h){this.ug.De(h)},S.prototype.jd=function(h,l,s){l!=-1?(this.ug.S(l,1,this.ug.T(s,1)),this.ua.T(h,1)==s&&this.ua.S(h,1,l)):(this.ua.S(h,0,this.ug.T(s,1)),this.ua.T(h,1)==s&&this.ua.S(h,1,-1)),this.fl(s)},S.prototype.Hy=function(h,l){var s=this.ua.T(h,1),a=this.ua.T(l,0);a!=-1&&(s!=-1?this.ug.S(s,1,a):this.ua.S(h,0,a),this.ua.S(h,1,this.ua.T(l,1))),this.Qv&&(h=this.ua.T(l,2),s=this.ua.T(l,3),h!=-1?this.ua.S(h,3,s):this.je=s,s!=-1&&this.ua.S(s,2,h)),this.bv(l)},S.prototype.ja=function(h){return this.ug.T(h,0)},S.prototype.Sj=function(h,l){this.ug.S(h,0,l)},S.prototype.lb=function(h){return this.ug.T(h,1)},S.prototype.rc=function(h){return this.ua.T(h,0)},S.prototype.Jn=function(h){return this.ja(this.rc(h))},S.prototype.clear=function(){this.ug.mj(!0),this.ua.mj(!0),this.je=-1},S.prototype.B=function(){return this.ug.size==0},S.prototype.TF=function(){return this.ug.size},S.prototype.qz=function(h){return this.ua.T(h,3)},S}();d.au=L}(Y||(Y={})),function(d){d.ta=function(){function L(){}return L.Wd=function(S,h,l){return h=h.xr(),S=S!=null&&S.Xd!==void 0?S.Xd(0):0,l&&(h*=4,S*=1.1),Math.max(S,h)},L.Er=function(S){return 2*Math.sqrt(2)*S},L.rN=function(S){return Math.sqrt(2)*S},L.kj=function(S,h,l){var s=new d.l;return h.A(s),L.Wd(S,s,l)},L.wE=function(S,h,l){return h=h.Tg(1,0).xr(),S=S!=null?S.Xd(1):0,l&&(h*=4,S*=1.1),Math.max(S,h)},L.mv=function(S,h){var l=new d.l;return S.xc(l),S=new d.l,h.xc(S),l.Zb(S),l},L.YN=function(S){var h=new d.l;if(S.xc(h),h.B())return null;var l=new d.du(h,8),s=-1,a=new d.l,u=!1;do for(var p=0,f=S.da();p<f;p++){if(S.Rj(p,a),(s=l.Jz(p,a,s))==-1){if(u)throw d.i.fa("internal error");S.yp(h,!1),u=!0,l.reset(h,8);break}u=!1}while(u);return l},L.nE=function(S){var h=new d.l;S.xc(h);for(var l=new d.du(h,8),s=-1,a=S.Ga(),u=new d.l,p=!1;a.$a();)for(;a.Ha();){var f=a.ha(),g=a.wb();if(f.A(u),(s=l.Jz(g,u,s))==-1){if(p)throw d.i.Qa();S.yp(h,!1),p=!0,l.reset(h,8),a.Zi();break}}return l},L.jj=function(S,h){var l=new d.l;S.xc(l);for(var s=new d.du(l,8),a=-1,u=new d.l,p=S.Ga(),f=!1;p.$a();)for(;p.Ha();){var g=p.ha(),b=p.wb();if(g.A(u),u.isIntersecting(h)&&(a=s.Jz(b,u,a))==-1){if(f)throw d.i.fa("internal error.");S.yp(l,!1),f=!0,s.reset(l,8),p.Zi();break}}return s},L.oE=function(S,h){for(var l=new d.du(h,8),s=new d.h,a=!1,u=new d.l,p=0;p<S.I();p++)if(S.D(p,s),h.contains(s)&&(u.K(s),l.vj(p,u)==-1)){if(a)throw d.i.Qa();a=!0,p=new d.l,S.yp(p,!1),l.reset(p,8),p=-1}return l},L.lR=function(S,h,l){var s=new d.l,a=new d.l;S.xc(s),h.xc(a),s.W(l,l),a.W(l,l);var u=new d.l;u.K(s),u.Ea(a),S=S.Ga(),h=h.Ga();var p=new d.xC;p.aC(l);var f=!1;for(p.pK();S.$a();)for(;S.Ha();)S.ha().A(s),s.isIntersecting(u)&&(f=!0,(l=new d.l).K(s),p.JD(S.wb(),l));if(p.iF(),!f)return null;for(s=!1,p.oK();h.$a();)for(;h.Ha();)h.ha().A(a),a.isIntersecting(u)&&(s=!0,(l=new d.l).K(a),p.ED(h.wb(),l));return p.hF(),s?p:null},L.mR=function(S,h,l,s,a){var u=S.getType(),p=h.getType(),f=new d.l,g=new d.l;S.xc(f),h.xc(g),f.W(l,l),g.W(l,l);var b=new d.l;b.K(f),b.Ea(g);var x=new d.xC;x.aC(l);var T=!1;x.pK();var M=0;for(l=S.da();M<l;M++)s&&u==1736&&!S.Ev(M)||(S.Rj(M,f),f.isIntersecting(b)&&(T=!0,x.JD(M,f)));if(x.iF(),!T)return null;for(S=!1,x.oK(),s=0,l=h.da();s<l;s++)a&&p==1736&&!h.Ev(s)||(h.Rj(s,g),g.isIntersecting(b)&&(S=!0,x.ED(s,g)));return x.hF(),S?x:null},L.Ru=function(S,h,l){if(S!=h)for(var s=0;s<l;s++)S[s]==null?S[s]=d.h.al(h[s]):S[s].L(h[s])},L.Jy=function(S,h,l,s){var a=0;for(s+=0;a<s;l++,a++)S[a]==null&&(S[a]=[0,0]),S[a][0]=h[l].x,S[a][1]=h[l].y},L.Iy=function(S,h,l,s){var a=h,u=0;for(h=s+h;a<h;u++,a++)S[a]==null?S[a]=d.h.construct(l[u][0],l[u][1]):S[a].ma(l[u][0],l[u][1])},L.kP=function(S,h,l){if(S!=h)for(var s=0;s<l;s++)S[s]==null?S[s]=new d.Sa(h[s]):h[s].copyTo(S[s])},L.vE=function(S,h,l,s){var a=0;return S!=null&&(a=S.Xd(0),s&&!l||S==null||(a+=1.01*S.vz(0))),l&&(h*=4,a*=1.01),Math.max(a,h)},L.ty=function(S,h,l){return L.vE(S,h.xr(),l,!1)},L.gO=function(S,h){var l=new d.l;return h.A(l),L.ty(S,l,!0)},L.uy=function(S,h){return L.vE(S,h.xr(),!1,!0)},L.Hu=function(S,h){var l=new d.l;return h.A(l),L.uy(S,l)},L.AG=function(S,h,l,s){s*=s;var a=new d.h;if(a.uc(S,h),(S=new d.h).uc(l,h),h=a.Sk(),l=S.Sk(),h<=s&&l<=s)return!0;var u=d.lc.ox(a.wi(S));return(u<=s*h||u<=s*l)&&0<=a.Qh(S)},L.dK=function(S,h,l,s){for(var a=0;a<h;a++){var u=S[a].y,p=d.O.Rk(u,l,s);p!=u&&(S[a].y=p)}},L}()}(Y||(Y={})),function(d){var L,S,h=function(){function u(p){this.Ya=p}return u.prototype.compare=function(p,f,g){p=p.ja(g),g=this.Ya.nk(f);var b=this.Ya.nk(p);return g<b?-1:g==b?a.gq(f)&&a.Gv(p)?-1:a.gq(p)&&a.Gv(f)?1:0:1},u}(),l=function(){function u(p){this.Ya=p}return u.prototype.nr=function(p,f,g){this.Ya.GX(g,p,f)},u.prototype.$p=function(p){return this.Ya.nk(p)},u}();(S=L||(L={}))[S.initialize=0]="initialize",S[S.pIn=1]="pIn",S[S.pL=2]="pL",S[S.pR=3]="pR",S[S.pT=4]="pT",S[S.right=5]="right",S[S.left=6]="left",S[S.all=7]="all";var s=function(){function u(){this.Ya=null,this.Qi=new d.Nc,this.hi=new d.ia(0),this.sg=[0,0]}return u.prototype.Xi=function(p,f){this.Qi.oa=p.oa-f,this.Qi.va=p.va+f,this.hi.resize(0),this.he=0,this.sg[0]=0},u.prototype.EB=function(p,f,g){if(p>f)throw d.i.N();this.Qi.oa=p-g,this.Qi.va=f+g,this.hi.resize(0),this.he=0,this.sg[0]=0},u.prototype.Uo=function(p,f){this.Qi.oa=p-f,this.Qi.va=p+f,this.hi.resize(0),this.he=0,this.sg[0]=0},u.prototype.next=function(){if(!this.Ya.lq)throw d.i.Hb();if(0>this.he)return-1;for(var p=!0;p;)switch(this.sg[this.he]){case 1:p=this.FU();break;case 2:p=this.GU();break;case 3:p=this.HU();break;case 4:p=this.IU();break;case 5:p=this.GW();break;case 6:p=this.kT();break;case 7:p=this.tN();break;case 0:p=this.Gz();break;default:throw d.i.Qa()}return this.Og!=-1?this.Mp()>>1:-1},u.construct=function(p){var f=new u;return f.Ya=p,f.hi.Jb(20),f.he=-1,f},u.prototype.Gz=function(){return this.Og=this.vH=this.Mi=this.Lc=-1,this.Ya.me!=null&&0<this.Ya.me.size?(this.sg[0]=1,this.Mi=this.Ya.kf,!0):(this.he=-1,!1)},u.prototype.FU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.Og=this.he=-1,!1;var p=this.Ya.Np(this.Lc);return this.Qi.va<p?(p=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),p!=-1&&(this.ei=this.Ya.kl(p),this.sg[++this.he]=6),!0):p<this.Qi.oa?(p=this.Ya.mk(this.Lc),this.Mi=this.Ya.lk(this.Lc),p!=-1&&(this.ei=this.Ya.Zr(p),this.sg[++this.he]=5),!0):(this.sg[this.he]=2,this.vH=this.Lc,p=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),p!=-1&&(this.ei=this.Ya.kl(p),this.sg[++this.he]=7),!0)},u.prototype.GU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.sg[this.he]=3,this.Mi=this.Ya.lk(this.vH),!0;if(this.Ya.Np(this.Lc)<this.Qi.oa){var p=this.Ya.mk(this.Lc);return this.Mi=this.Ya.lk(this.Lc),p!=-1&&(this.ei=this.Ya.Zr(p),this.sg[++this.he]=5),!0}return p=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),p!=-1&&(this.ei=this.Ya.kl(p),this.sg[++this.he]=7),(p=this.Ya.lk(this.Lc))!=-1&&this.hi.add(p),!0},u.prototype.HU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.sg[this.he]=4,!0;if(this.Qi.va<this.Ya.Np(this.Lc)){var p=this.Ya.mk(this.Lc);return this.Mi=this.Ya.qj(this.Lc),p!=-1&&(this.ei=this.Ya.kl(p),this.sg[++this.he]=6),!0}return p=this.Ya.mk(this.Lc),this.Mi=this.Ya.lk(this.Lc),p!=-1&&(this.ei=this.Ya.kl(p),this.sg[++this.he]=7),(p=this.Ya.qj(this.Lc))!=-1&&this.hi.add(p),!0},u.prototype.IU=function(){if(this.hi.size==0)return this.Og=this.he=-1,!1;this.Lc=this.hi.get(this.hi.size-1),this.hi.resize(this.hi.size-1);var p=this.Ya.mk(this.Lc);return p!=-1&&(this.ei=this.Ya.kl(p),this.sg[++this.he]=7),this.Ya.qj(this.Lc)!=-1&&this.hi.add(this.Ya.qj(this.Lc)),this.Ya.lk(this.Lc)!=-1&&this.hi.add(this.Ya.lk(this.Lc)),!0},u.prototype.kT=function(){return this.Og=this.ei,this.Og!=-1&&a.gq(this.Mp())&&this.Ya.nk(this.Mp())<=this.Qi.va?(this.ei=this.SF(),!1):(this.he--,!0)},u.prototype.GW=function(){return this.Og=this.ei,this.Og!=-1&&a.Gv(this.Mp())&&this.Ya.nk(this.Mp())>=this.Qi.oa?(this.ei=this.QR(),!1):(this.he--,!0)},u.prototype.tN=function(){return this.Og=this.ei,this.Og!=-1&&a.gq(this.Mp())?(this.ei=this.SF(),!1):(this.he--,!0)},u.prototype.SF=function(){return this.Ya.Sf?this.Ya.$f.lb(this.Og):this.Ya.Ti.lb(this.Og)},u.prototype.QR=function(){return this.Ya.Sf?this.Ya.$f.we(this.Og):this.Ya.Ti.we(this.Og)},u.prototype.Mp=function(){return this.Ya.Sf?this.Ya.$f.ja(this.Og):this.Ya.Ti.getData(this.Og)},u}();d.EY=s;var a=function(){function u(p){this.Am=this.$h=this.$f=this.Ti=this.Km=this.Ej=this.me=this.Fj=null,this.Sf=p,this.lq=this.Sv=!1}return u.prototype.kr=function(){this.Nk(!0)},u.prototype.Br=function(p,f){if(!this.Sv)throw d.i.Hb();this.Fj.push(new d.Nc(p,f))},u.prototype.Fp=function(){if(!this.Sv)throw d.i.fa("invalid call");this.Sv=!1,this.lq=!0,this.Sf||(this.vS(),this.Zv=this.Fj.length)},u.prototype.vj=function(p){if(!this.Sf||!this.lq)throw d.i.N("invalid call");if(this.kf==-1){var f=this.Fj.length;if(this.iA){var g=new d.ia(0);g.Jb(2*f),this.bJ(g),this.$h.Jb(2*f),this.$h.resize(0),this.aJ(g),this.Km.resize(f,-1),this.Km.Wj(-1,0,f),this.iA=!1}else this.Km.Wj(-1,0,f);this.kf=this.Tu()}f=this.pG(p<<1,this.kf),g=this.$f.addElement(1+(p<<1),this.xz(f)),this.VJ(f,g),this.Km.set(p,f),this.Zv++},u.prototype.remove=function(p){if(!this.Sf||!this.lq)throw d.i.fa("invalid call");var f=this.Km.get(p);if(f==-1)throw d.i.N("the interval does not exist in the interval tree");this.Km.set(p,-1),this.Zv--;var g=this.xz(f),b=this.$f.ZR(g);this.$f.vd(this.wR(f),g),this.$f.vd(this.TR(f),g),(p=this.$f.size(g))==0&&(this.$f.MP(g),this.ZJ(b,-1)),this.Ej.jd(f),g=this.UF(b);var x=this.qj(b),T=this.lk(b);for(f=0;!(0<p||b==this.kf||x!=-1&&T!=-1);)b==this.qj(g)?x!=-1?(this.Ok(g,x),this.Uj(x,g),this.Ok(b,-1)):T!=-1?(this.Ok(g,T),this.Uj(T,g),this.Qk(b,-1)):this.Ok(g,-1):x!=-1?(this.Qk(g,x),this.Uj(x,g),this.Ok(b,-1)):T!=-1?(this.Qk(g,T),this.Uj(T,g),this.Qk(b,-1)):this.Qk(g,-1),this.Uj(b,-1),f++,b=g,p=(g=this.mk(b))!=-1?this.$f.size(g):0,x=this.qj(b),T=this.lk(b),g=this.UF(b)},u.prototype.reset=function(){if(!this.Sf||!this.lq)throw d.i.N("invalid call");this.Nk(!1)},u.prototype.size=function(){return this.Zv},u.prototype.getIterator=function(){return s.construct(this)},u.prototype.bJ=function(p){for(var f=this.Fj.length,g=0;g<2*f;g++)p.add(g);this.HX(p,2*f)},u.prototype.aJ=function(p){for(var f=NaN,g=0;g<p.size;g++){var b=p.get(g),x=this.nk(b);x!=f&&(this.$h.add(b),f=x)}},u.prototype.vS=function(){var p=this.Fj.length,f=new d.ia(0);f.Jb(2*p),this.bJ(f),this.$h.Jb(2*p),this.$h.resize(0),this.aJ(f),this.Ej.De(p),this.Ti.fn(2*p);var g=d.Yc.Oh(p);for(g.Wj(-1,0,p),this.kf=this.Tu(),p=0;p<f.size;p++){var b=f.get(p),x=g.get(b>>1);x!=-1?this.VJ(x,this.Ti.addElement(this.xz(x),b)):(x=this.pG(b,this.kf),g.set(b>>1,x))}},u.prototype.pG=function(p,f){var g=f,b=f,x=-1,T=0,M=this.$h.size-1,C=0,O=p>>1,F=NaN,P=NaN,G=!0,q=this.DR(O);for(O=this.AR(O);G;){T<M?(C=T+d.O.truncate((M-T)/2),this.gz(g)==-1&&this.FJ(g,this.$h.get(C),this.$h.get(C+1))):this.gz(g)==-1&&this.FJ(g,this.$h.get(T),this.$h.get(T));var V=this.Np(g);if(O<V)f!=-1&&(f==g?(b=g,F=V,P=(f=this.qj(g))!=-1?this.Np(f):NaN):P>V&&(V<F?this.Ok(b,g):this.Qk(b,g),this.Qk(g,f),this.Sf&&(this.Uj(g,b),this.Uj(f,g)),b=g,F=V,f=-1,P=NaN)),(M=this.xR(g))==-1&&(M=this.Tu(),this.dX(g,M)),g=M,M=C;else if(q>V)f!=-1&&(f==g?(b=g,F=V,P=(f=this.lk(g))!=-1?this.Np(f):NaN):P<V&&(V<F?this.Ok(b,g):this.Qk(b,g),this.Ok(g,f),this.Sf&&(this.Uj(g,b),this.Uj(f,g)),b=g,F=V,f=-1,P=NaN)),(T=this.UR(g))==-1&&(T=this.Tu(),this.oX(g,T)),g=T,T=C+1;else{(G=this.mk(g))==-1&&(G=this.zP(g),this.ZJ(g,G));var Z=this.fN(G,p);x=this.xP(),this.qX(x,G),this.cX(x,Z),g!=f&&(V<F?this.Ok(b,g):this.Qk(b,g),this.Sf&&this.Uj(g,b),f!=-1&&(P<V?this.Ok(g,f):this.Qk(g,f),this.Sf&&this.Uj(f,g))),G=!1}}return x},u.prototype.Tu=function(){return this.me.Ce()},u.prototype.zP=function(p){return this.Sf?this.$f.Pr(p):this.Ti.Ph(p)},u.prototype.xP=function(){return this.Ej.Ce()},u.prototype.Nk=function(p){p?(this.Sv=this.iA=!0,this.lq=!1,this.$h==null?this.$h=d.Yc.Oh(0):this.$h.resize(0),this.Fj==null?this.Fj=[]:this.Fj.length=0):this.iA=!1,this.Sf?this.Km==null?(this.Km=d.Yc.Oh(0),this.$f=new d.Yj,this.$f.Vo(new h(this))):this.$f.clear():this.Ti==null?this.Ti=new d.jp:this.Ti.clear(),this.me==null?(this.Ej=new d.$c(3),this.me=new d.$c(this.Sf?8:7)):(this.Ej.mj(!1),this.me.mj(!1)),this.kf=-1,this.Zv=0},u.prototype.FJ=function(p,f,g){this.XW(p,f),this.YW(p,g)},u.prototype.Np=function(p){var f=this.gz(p);return f==-1?NaN:(f=this.nk(f))==(p=this.nk(this.gR(p)))?f:.5*(f+p)},u.prototype.XW=function(p,f){this.me.S(p,0,f)},u.prototype.YW=function(p,f){this.me.S(p,1,f)},u.prototype.dX=function(p,f){this.me.S(p,3,f)},u.prototype.oX=function(p,f){this.me.S(p,4,f)},u.prototype.ZJ=function(p,f){this.me.S(p,2,f)},u.prototype.Ok=function(p,f){this.me.S(p,5,f)},u.prototype.Qk=function(p,f){this.me.S(p,6,f)},u.prototype.Uj=function(p,f){this.me.S(p,7,f)},u.prototype.qX=function(p,f){this.Ej.S(p,0,f)},u.prototype.fN=function(p,f){return this.Sf?this.$f.addElement(f,p):this.Ti.addElement(p,f)},u.prototype.cX=function(p,f){this.Ej.S(p,1,f)},u.prototype.VJ=function(p,f){this.Ej.S(p,2,f)},u.prototype.kl=function(p){return this.Sf?this.$f.rc(p):this.Ti.rc(p)},u.prototype.Zr=function(p){return this.Sf?this.$f.Fc(p):this.Ti.Fc(p)},u.gq=function(p){return!(1&p)},u.Gv=function(p){return!(1&~p)},u.prototype.gz=function(p){return this.me.T(p,0)},u.prototype.gR=function(p){return this.me.T(p,1)},u.prototype.mk=function(p){return this.me.T(p,2)},u.prototype.xR=function(p){return this.me.T(p,3)},u.prototype.UR=function(p){return this.me.T(p,4)},u.prototype.qj=function(p){return this.me.T(p,5)},u.prototype.lk=function(p){return this.me.T(p,6)},u.prototype.UF=function(p){return this.me.T(p,7)},u.prototype.xz=function(p){return this.Ej.T(p,0)},u.prototype.wR=function(p){return this.Ej.T(p,1)},u.prototype.TR=function(p){return this.Ej.T(p,2)},u.prototype.DR=function(p){return this.Fj[p].oa},u.prototype.AR=function(p){return this.Fj[p].va},u.prototype.HX=function(p,f){this.Am==null&&(this.Am=new d.Xt);var g=new l(this);this.Am.sort(p,0,f,g)},u.prototype.GX=function(p,f,g){var b=this;p.Vd(f,g,function(x,T){var M=b.nk(x),C=b.nk(T);return M<C||M==C&&u.gq(x)&&u.Gv(T)?-1:1})},u.prototype.nk=function(p){var f=this.Fj[p>>1];return u.gq(p)?f.oa:f.va},u}();d.sr=a}(Y||(Y={})),function(d){var L=function(){function S(h){if(h==null)throw d.i.fa("Invalid arguement");this.hf=h;var l=h.nR();l.hS()?h.ef.IG()?this.lo=d.si.PannableFold:this.lo=d.si.Clip:this.lo=d.si.DontClip,l.iS()?h.Yf.IG()?this.Qm=d.si.PannableFold:this.Qm=d.si.Clip:this.Qm=d.si.DontClip,this.Bm=l.Jr,this.mH=l.Vu,h=this.hf.sH,this.aH=h.hs(2147483648),this.Uv=h.hs(1073741824)}return S.zh=function(h,l,s){return l.ww.zh(h,s)},S.Rt=function(h,l,s,a){return h.ww.Rt(l,s,a)},S.Qt=function(h,l,s,a){if(s=0>s?l.length:s,(h=h.ww.Rt(l,s,a))==s)return h;for(var u=l=0;u<s;u++){var p=a[u];p.isNaN()||(l<u&&a[l].L(p),l++)}for(;l<s;l++)a[l].Rc();return h},S.transform=function(h,l,s,a,u){if(h.isIdentity())return d.ta.kP(a,l,s),s;for(var p=[],f=0,g=0;g<s;){for(var b=Math.min(p.length,s-g),x=g,T=0;x<b;x++,T++)p[T]==null?p[T]=l[x].D():l[x].D(p[T]);var M=u?S.Qt(h,p,b,p):S.Rt(h,p,b,p);for(T=x=0;x<M;x++,T++)a[g]==null&&(a[g]=new d.Sa(l[g])),a[g].Cb(p[T]);g+=b,f+=M}return f},S.prototype.Rt=function(h,l,s){if(this.hf.isIdentity())return h!=s&&d.ta.Ru(s,h,l),l;var a=this.hf.ef,u=this.hf.Yf,p=a.Sb(),f=u.Sb();if(p==0&&p===f){var g=a.Qp();return u=g/(u=u.Qp()),(g=new d.Dd).setScale(u,u),g.eY(h,l,s),l}if(g=d.O.Fu(Math.min(l,64)),p==3){var b=a.Ji;p=(a=b.fk()).Sb(),s!=h&&d.ta.Ru(s,h,l),d.zb.$k(b,s,l,!0),b.Qt(d.bm.forward,s,l),d.zb.Zk(b,s,l,!0)}if(p==3||f===3)throw d.i.fa("image: transform_in_place_");if(p==2)this.lo==d.si.Clip?(s!=h&&d.ta.Ru(s,h,l),h=a.ml(),d.zb.OS(h,a,s,l)):(s!=h&&d.ta.Ru(s,h,l),a.Wc()&&(p=a.Xd(0),b=a.Oe(),d.zb.EX(s,l,b,p),d.zb.qF(s,l,a,0))),d.zb.IL(a,s,l,g);else for(p=a.Xd(0),b=a.Oe(),a=0;a<l;a++)d.zb.FX(h[a],b,p,s[a]);for(d.zb.GL(this.hf,s,l,g),h=0,(f=f==2)?h=u.zi():isNaN(this.Bm)||(h=this.Bm),f&&this.Qm!=d.si.Clip||d.zb.qF(s,l,u.sc(),h),f&&(d.zb.yG(s,l,u,this.Qm),d.zb.HL(u,s,l,g)),h=l,a=0;a<l;++a)s[a].isNaN()&&h--;return h},S.prototype.zh=function(h,l){if(this.hf.isIdentity()||h.B())return h;if(h.getType()==33)return this.XI(h);var s=this.hf.ef,a=this.hf.Yf,u=s.Sb(),p=a.Sb();if(u==0&&u==p)return l=s.Qp(),l/=a=a.Qp(),(a=new d.Dd).setScale(l,l),(h=d.aa.jg(h)).Oc(a),h;switch(h.getType()){case 1607:case 1736:h=this.VI(h,l);break;case 550:h=this.fW(h,l);break;case 197:h=this.eW(h,l);break;default:throw d.i.fa("")}return h},S.prototype.XI=function(h){var l=h.D(),s=[];return s[0]=l,this.Rt(s,1,s),(h=new d.Sa(h)).Cb(s[0]),h},S.prototype.VI=function(h,l){if(h.tm())throw d.i.fa("curves not supported");var s=h.getType();if(s==1736)return this.gW(h,l);if(s==1607)return this.hW(h,l);throw d.i.fa("projectMultiPath")},S.prototype.gW=function(h,l){var s=this.hf.ef,a=this.hf.Yf,u=s.Sb(),p=a.Sb(),f=d.O.Fu(Math.min(h.I(),64)),g=d.Da.jg(h);u==3&&(u=(s=(h=s.Ji).fk()).Sb(),g=h.$k(g,!0),this.wp(h,d.bm.forward,g),g=h.Zk(g,!0)),h=null,p==3&&(p=(a=(h=a.Ji).fk()).Sb());var b=u==2,x=p==2,T=x?a.sc():a,M=!x&&!this.Uv;p=!1;var C=g;if(b){if((C=d.zb.UI(C,s,this.lo,l)).B())return C}else{if(g=new d.l,C.xc(g),u=s.Oe(),g.G<u.G||g.H>u.H){var O=d.l.construct(g.v-1,u.G,g.C+1,u.H);if((C=d.ri.Nu(C,O,s,NaN,0,l)).B())return C}g.R()>2*u.R()&&(C=d.zb.Hp(C,-2*u.R(),2*u.R(),s,!0,0,!0,l))}g=this.mH,(u=!isNaN(g))&&(C=d.Xl.local().V(C,g,l)),O=x?a.kk():null;var F=NaN;b&&(F=s.zi());var P=a.Wr()!=null;if(this.aH)b&&(d.zb.ur(s,F,C,f),u&&(b=s.hh(),g*=(F=s.sc().hh())/b)),d.zb.tr(this.hf,C,M,f),u&&(b=s.sc().hh(),g*=(F=a.sc().hh())/b),s=C;else{var G=new d.Ta(C.description);G.DD(C),b&&(d.zb.ur(s,F,G,f),u&&(b=s.hh(),g*=(F=s.sc().hh())/b)),d.zb.tr(this.hf,G,M,f),u&&(b=s.sc().pm(),g*=(F=a.sc().pm())/b),M=NaN,x?(O=a.kk(),M=a.zi()):isNaN(this.Bm)||(M=this.Bm),b=S.tv(s)|S.tv(a),F=10*T.Xd(0),this.Uv&&(b=3,F=0),s=d.zb.UQ(C,s,G,T,M,l,b,F)}return P&&(s=d.zb.XD(s,a,l)),x&&(p||(x=T.Oe().R(),s.Tg(0,0).R()>=x-T.Xd(0)&&(T=O.getNorthPoleLocation(),x=O.getSouthPoleLocation(),C=O.getNorthPoleGeometry(),O=O.getSouthPoleGeometry(),M=0,C==d.Cg.PE_POLE_POINT&&T!=d.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(M=1),O==d.Cg.PE_POLE_POINT&&x!=d.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(M|=2),M!==0&&(p=!0))),s=d.zb.Mz(s,a,this.Qm,l),u&&(s=d.Xl.local().V(s,g,l)),d.zb.Lx(a,s,f)),s.B()||(p&&(s=d.Yl.local().V(s,a,!1,l)),h!=null&&(s=h.Zk(s,!1),this.wp(h,d.bm.reverse,s),s=h.$k(s,!1))),s},S.tv=function(h){if(h.Sb()!=2)return 0;var l=0,s=h.kk();h=s.getNorthPoleLocation();var a=s.getSouthPoleLocation(),u=s.getNorthPoleGeometry();return s=s.getSouthPoleGeometry(),u==d.Cg.PE_POLE_POINT&&h!=d.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(l=1),s==d.Cg.PE_POLE_POINT&&a!=d.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(l|=2),l},S.prototype.hW=function(h,l){var s=this.hf.ef,a=this.hf.Yf,u=s.Sb(),p=a.Sb(),f=d.O.Fu(Math.min(h.I(),64)),g=d.Ta.jg(h);u==3&&(u=(s=(h=s.Ji).fk()).Sb(),g=h.$k(g,!0),this.wp(h,d.bm.forward,g),g=h.Zk(g,!0)),h=null,p==3&&(p=(a=(h=a.Ji).fk()).Sb());var b=u==2;u=(p=p==2)?a.sc():a;var x=!p&&!this.Uv;if(b){if((g=d.zb.UI(g,s,this.lo,l)).B())return g}else{var T=new d.l;g.xc(T);var M=s.Oe();if((T.G<M.G||T.H>M.H)&&(T=d.l.construct(T.v-1,M.G,T.C+1,M.H),(g=d.ri.Nu(g,T,s,NaN,0,l)).B()))return g}var C=NaN;b&&(C=s.zi()),T=a.Wr()!=null,M=this.mH;var O=!isNaN(M);if(O&&(g=d.Xl.local().V(g,M,l)),this.aH)b&&d.zb.ur(s,C,g,f),O&&(b=s.hh(),M*=(C=s.sc().hh())/b),d.zb.tr(this.hf,g,x,f),O&&(b=s.sc().hh(),M*=(C=a.sc().hh())/b),s=g;else{var F=new d.Ta(g.description);F.DD(g),b&&(d.zb.ur(s,C,F,f),O&&(b=s.hh(),M*=(C=s.sc().hh())/b)),d.zb.tr(this.hf,F,x,f),O&&(b=s.sc().hh(),M*=(C=a.sc().hh())/b),x=NaN,p?x=a.zi():isNaN(this.Bm)||(x=this.Bm),b=S.tv(s)|S.tv(a),C=10*u.Xd(0),this.Uv&&(b=3,C=0),s=d.zb.VQ(g,s,F,u,x,l,b,C)}return T&&(s=d.zb.XD(s,a,l)),p&&(s=d.zb.Mz(s,a,this.Qm,l),O&&(s=d.Xl.local().V(s,M,l)),d.zb.Lx(a,s,f)),s.B()||h!=null&&(s=h.Zk(s,!1),this.wp(h,d.bm.reverse,s),s=h.$k(s,!1)),s},S.prototype.eW=function(h,l){var s=(h.ca()+h.R())/400;return s!=0?(s=d.Xl.local().V(h,s,l),s=this.VI(s,l),l=h.Ia(),s.bn(l)):(l=new d.Sa(h.Ip()),s=this.XI(l),l=h.Ia(),s.B()?l.Oa():(h.copyTo(l),h=s.D(),l.K(h.x,h.y,h.x,h.y))),l},S.prototype.fW=function(h,l){h=d.aa.jg(h);var s=this.hf.ef,a=this.hf.Yf,u=s.Sb(),p=a.Sb(),f=d.O.Fu(Math.min(h.I(),64));if(u==3){var g=s.Ji;u=(s=g.fk()).Sb(),h=g.Zk(h,!0),this.wp(g,d.bm.forward,h),h=g.$k(h,!0)}if(u==2){if(this.lo==d.si.Clip?h=d.Xj.local().V(h,s.ml(),s,l):s.Wc()&&(u=new d.l,h.xc(u),s.Oe().contains(u)||(this.lo==d.si.PannableFold&&(h=d.zb.lj(h,s)),d.zb.Jt(h,s.Oe(),s.Xd(0),!0),h=d.zb.Fn(h,s,0,!0,0,l))),h.B())return h;d.zb.ur(s,0,h,f)}else d.zb.Jt(h,s.Oe(),s.Xd(0),!0);return d.zb.tr(this.hf,h,!1,f),s=0,u=!1,g=null,p==3&&(u=!0,p=(a=(g=a.Ji).fk()).Sb()),(p=p==2)?s=a.zi():isNaN(this.Bm)||(s=this.Bm),p&&this.Qm!=d.si.Clip||(h=d.zb.Fn(h,a.sc(),s,!1,0,l)),p&&(h=d.zb.Mz(h,a,this.Qm,l),d.zb.Lx(a,h,f),h.B())||u&&(h=g.Zk(h,!0),this.wp(g,d.bm.reverse,h),h=g.$k(h,!0)),h},S.prototype.wp=function(h,l,s){var a=s.I();if(a!=0){for(var u=s.ub(0),p=d.O.lg(200,0),f=[],g=0;g<a;){var b=Math.min(100,a-g);u.Vw(2*g,2*b,p,2,!0);for(var x=0;x<b;++x)f[x]=d.h.construct(p[2*g],p[2*g+1]);h.Qt(l,f,b),g+=b}s.Pc(1993)}},S.Uy=function(h,l,s){if(h==null||l==null||!l.Wc())throw d.i.fa("Invalid Arguement");if(h.B())return h;var a=h.getType();return a==197?(a=new d.Da(h.description)).ad(h,!1):d.aa.yd(a)?(a=new d.Ta(h.description)).oc(h,!0):a=h,(a=d.zb.lj(a,l)).B()?a:d.zb.Fn(a,l,0,a!=h,0,s)},S.nj=function(h,l,s,a){if(h==null||l==null||!l.Wc())throw d.i.fa("Invalid Arguement");if(h.B())return h;var u=h.getType();if(d.aa.Hc(u)){h=d.zb.lj(h,l),u=new d.l,h.A(u);for(var p=d.ta.ty(l,u,!1),f=l.gh(),g=Math.floor((u.v-f.v)/f.R())*f.R()+f.v;g<u.C;)g>u.v+p&&g<u.C-p&&(h=d.zb.uS(h,l,s,g)),g+=f.R()}else{if(u==197)return(u=new d.Da(h.description)).ad(h,!1),S.nj(u,l,s,a);if(d.aa.yd(u))return(u=new d.Ta(h.description)).oc(h,!0),S.nj(u,l,s,a)}return S.Uy(h,l,a)},S}();d.bu=L}(Y||(Y={})),function(d){var L=function(S){function h(l,s,a,u){var p=S.call(this)||this;return l===void 0?p.description=d.ee.og():a===void 0?p.description=l:(p.description=d.ee.og(),p.ZB(l,s),p.Ql(a,u)),p}return Bt(h,S),h.prototype.getType=function(){return 322},h.prototype.Qb=function(){var l=this.sa-this.pa,s=this.na-this.la;return Math.sqrt(l*l+s*s)},h.prototype.Bi=function(l){var s=this.sa-this.pa,a=this.na-this.la;return Math.sqrt(s*s+a*a)<=l},h.prototype.Pn=function(){return!1},h.prototype.kg=function(){var l=new d.h;return l.uc(this.wc(),this.ac()),l},h.cP=function(l,s){return new h(l.x,l.y,s.x,s.y)},h.prototype.bn=function(l){l.Oa(),l.Nf(this.description);var s=new d.l;this.A(s),l.Xo(s),s=1;for(var a=this.description.Aa;s<a;s++)for(var u=this.description.kd(s),p=d.ra.Va(u);s<p;s++){var f=this.Tg(u,0);l.setInterval(u,0,f)}},h.prototype.A=function(l){l.K(this.sa,this.na,this.pa,this.la),l.normalize()},h.prototype.Qo=function(l){l.Oa(),l.Zb(this.sa,this.na,this.Od(0,1,0)),l.Zb(this.pa,this.la,this.Od(1,1,0))},h.prototype.Oc=function(l){if(l instanceof d.Dd){this.vc();var s=new d.h;s.x=this.sa,s.y=this.na,l.Eh(s,s),this.sa=s.x,this.na=s.y,s.x=this.pa,s.y=this.la,l.Eh(s,s),this.pa=s.x,this.la=s.y}else this.vc(),(s=new d.Nd).x=this.sa,s.y=this.na,s.z=this.Od(0,1,0),s=l.fp(s),this.sa=s.x,this.na=s.y,this.tn(0,1,0,s.z),s.x=this.pa,s.y=this.la,s.z=this.Od(1,1,0),s=l.fp(s),this.pa=s.x,this.la=s.y,this.tn(1,1,0,s.z)},h.prototype.Ia=function(){return new h(this.description)},h.prototype.Tx=function(l,s){return(this.pa-l-(this.sa-l))*(this.la-s+(this.na-s))*.5},h.prototype.vx=function(l){return l*this.Qb()},h.prototype.NG=function(l){return l/this.Qb()},h.prototype.DF=function(l){return d.lc.hq(this.sa,this.pa,l)},h.prototype.fR=function(l){return d.lc.hq(this.na,this.la,l)},h.prototype.dl=function(l,s){var a=new d.ig;return this.ah(l,s,a),a.get()},h.prototype.ah=function(l,s,a){if(a==null)throw d.i.N();a.Or(),(a=a.get()).Nf(this.description);var u=new d.h;this.hc(l,u),a.ZB(u.x,u.y),this.hc(s,u),a.Ql(u.x,u.y),u=1;for(var p=this.description.Aa;u<p;u++)for(var f=this.description.Ed(u),g=d.ra.Va(f),b=0;b<g;b++){var x=this.Uc(l,f,b);a.YB(f,b,x),x=this.Uc(s,f,b),a.OB(f,b,x)}},h.prototype.Uc=function(l,s,a){if(s==0)return a==0?this.hc(l).x:this.hc(l).y;switch(d.ra.lz(s)){case 0:return .5>l?this.wv(s,a):this.gv(s,a);case 1:var u=this.wv(s,a);return s=this.gv(s,a),d.lc.hq(u,s,l);case 2:throw d.i.fa("not implemented")}throw d.i.Qa()},h.prototype.fe=function(l,s){var a=this.pa-this.sa,u=this.la-this.na,p=a*a+u*u;return p==0?.5:(l=((l.x-this.sa)*a+(l.y-this.na)*u)/p,s||(0>l?l=0:1<l&&(l=1)),l)},h.prototype.cq=function(l,s,a,u){if(l){if((l=this.la-this.na)==0)return s==this.la?-1:0;if(0>(s=(s-this.na)/l)||1<s)return 0;a!=null&&(a[0]=this.DF(s))}else{if((l=this.pa-this.sa)==0)return s==this.pa?-1:0;if(0>(s=(s-this.sa)/l)||1<s)return 0;a!=null&&(a[0]=this.fR(s))}return u!=null&&(u[0]=s),1},h.prototype.Pe=function(l,s){var a=this.la-this.na;return a==0?l==this.la?s:NaN:(l=(l-this.na)/a,s=this.DF(l),l==1&&(s=this.pa),s)},h.prototype.ru=function(l,s,a){return 0<=this.rp(l.x,l.y,s,a)},h.prototype.vi=function(l,s,a){return 0<=this.rp(l,s,a,!0)},h.prototype.qs=function(l,s){return this.ru(l,s,!1)},h.prototype.rI=function(){if(this.la<this.na||this.la==this.na&&this.pa<this.sa){var l=this.sa;this.sa=this.pa,this.pa=l,l=this.na,this.na=this.la,this.la=l,l=0;for(var s=this.description.Oq-2;l<s;l++){var a=this.ka[l];this.ka[l]=this.ka[l+s],this.ka[l+s]=a}}},h.prototype.uu=function(l,s){(s=d.h.construct(l,s)).sub(this.ac());var a=new d.h;return a.uc(this.wc(),this.ac()),(l=a.wi(s))>(s=8881784197001252e-31*(Math.abs(a.x*s.y)+Math.abs(a.y*s.x)))?-1:l<-s?1:0},h.prototype.rp=function(l,s,a,u){var p=this.sa,f=this.na,g=l-p,b=s-f;if((g=Math.sqrt(g*g+b*b))<=Math.max(a,6661338147750939e-31*g))return u&&g==0?NaN:0;if(g=l-this.pa,b=s-this.la,(g=Math.sqrt(g*g+b*b))<=Math.max(a,6661338147750939e-31*g))return u&&g==0?NaN:1;if(g=this.pa-this.sa,b=this.la-this.na,0<(u=Math.sqrt(g*g+b*b))){var x=1/u,T=l-p,M=s-f,C=T*(g*=x)+M*(b*=x),O=17763568394002505e-31*(Math.abs(T*g)+Math.abs(M*b)),F=g;if(g=-b,b=F,C<-(O=Math.max(a,O))||C>u+O)return NaN;if(Math.abs(T*g+M*b)<=Math.max(a,17763568394002505e-31*(Math.abs(T*g)+Math.abs(M*b)))&&(.5>=(g=d.O.Rk(C*x,0,1))?(b=this.sa+(this.pa-this.sa)*g,u=this.na+(this.la-this.na)*g):(b=this.pa-(this.pa-this.sa)*(1-g),u=this.la-(this.la-this.na)*(1-g)),d.h.Oy(b,u,l,s)<=a)){if(.5>g){if(d.h.Oy(b,u,p,f)<=a)return 0}else if(d.h.Oy(b,u,this.pa,this.la)<=a)return 1;return g}}return NaN},h.prototype.Nb=function(l){return l!=null&&(l==this||l.constructor===this.constructor&&this.FM(l))},h.prototype.rD=function(l,s,a){var u=a?this.sa:this.pa;a=a?this.na:this.la;var p=new d.h;return p.x=l.pa-u,p.y=l.la-a,!(s.Qh(p)>6661338147750939e-31*s.fD(p))||(p.x=l.sa-u,p.y=l.na-a,s.Qh(p)<=6661338147750939e-31*s.fD(p))},h.prototype.qD=function(l){var s=new d.h;return s.x=this.pa-this.sa,s.y=this.la-this.na,!!this.rD(l,s,!1)&&(s.Sq(),!!this.rD(l,s,!0))},h.NM=function(l,s){var a=l.uu(s.sa,s.na),u=l.uu(s.pa,s.la);return!(0>a&&0>u||0<a&&0<u)&&(a=s.uu(l.sa,l.na),u=s.uu(l.pa,l.la),!(0>a&&0>u||0<a&&0<u)&&((a=l.Qb())>(u=s.Qb())?l.qD(s):s.qD(l)))},h.LM=function(l,s,a){var u=d.h.construct(NaN,NaN),p=l.pa-l.sa,f=l.la-l.na,g=s.pa-s.sa,b=s.la-s.na,x=g*f-p*b;if(x==0)return u;var T=8881784197001252e-31*(Math.abs(g*f)+Math.abs(p*b)),M=s.sa-l.sa,C=s.na-l.na,O=g*C-M*b,F=O/x,P=Math.abs(x);return F<-(g=(8881784197001252e-31*(Math.abs(g*C)+Math.abs(M*b))*P+T*Math.abs(O))/(x*x)+2220446049250313e-31*Math.abs(F))||F>1+g||(g=(b=p*C-M*f)/x)<-(p=(8881784197001252e-31*(Math.abs(p*C)+Math.abs(M*f))*P+T*Math.abs(b))/(x*x)+2220446049250313e-31*Math.abs(g))||g>1+p||(F=d.O.Rk(F,0,1),p=d.O.Rk(g,0,1),f=l.hc(F),x=s.hc(p),(T=new d.h).uc(f,x),T.length()>a&&(T.add(f,x),T.scale(.5),F=l.fe(T,!1),p=s.fe(T,!1),l=l.hc(F),s=s.hc(p),l.sub(s),l.length()>a)||u.ma(F,p)),u},h.OM=function(l,s,a,u){var p=0;if((l.sa==s.sa&&l.na==s.na||l.sa==s.pa&&l.na==s.la)&&(p++,!u))return 1;if(l.pa==s.sa&&l.la==s.na||l.pa==s.pa&&l.la==s.la){if(++p==2)return 2;if(!u)return 1}return s.vi(l.sa,l.na,a)||s.vi(l.pa,l.la,a)||l.vi(s.sa,s.na,a)||l.vi(s.pa,s.la,a)?1:u&&p!=0||h.NM(l,s)==0?0:1},h.Zx=function(l,s,a,u,p,f){var g=0,b=l.rp(s.sa,s.na,f,!1),x=l.rp(s.pa,s.la,f,!1),T=s.rp(l.sa,l.na,f,!1),M=s.rp(l.pa,l.la,f,!1);return isNaN(b)||(u!=null&&(u[g]=b),p!=null&&(p[g]=0),a!=null&&(a[g]=d.h.construct(s.sa,s.na)),g++),isNaN(x)||(u!=null&&(u[g]=x),p!=null&&(p[g]=1),a!=null&&(a[g]=d.h.construct(s.pa,s.la)),g++),g==2||isNaN(T)||b==0&&T==0||x==0&&T==1||(u!=null&&(u[g]=0),p!=null&&(p[g]=T),a!=null&&(a[g]=d.h.construct(l.sa,l.na)),g++),g==2||isNaN(M)||b==1&&M==0||x==1&&M==1||(u!=null&&(u[g]=1),p!=null&&(p[g]=M),a!=null&&(a[g]=d.h.construct(s.pa,s.la)),g++),0<g?(g==2&&u!=null&&u[0]>u[1]&&(l=u[0],u[0]=u[1],u[1]=l,p!=null&&(u=p[0],p[0]=p[1],p[1]=u),a!=null&&(p=d.h.construct(a[0].x,a[0].y),a[0]=a[1],a[1]=p)),g):(g=h.LM(l,s,f),isNaN(g.x)?0:(a!=null&&(a[0]=l.hc(g.x)),u!=null&&(u[0]=g.x),p!=null&&(p[0]=g.y),1))},h.prototype.eG=function(){return 0},h.prototype.op=function(){},h.prototype.toString=function(){return"Line: ["+this.sa.toString()+", "+this.na.toString()+", "+this.pa.toString()+", "+this.la.toString()+"]"},h}(d.SC);d.yb=L}(Y||(Y={})),function(d){var L=function(){function S(){this.Jm=[],this.ya=-1}return S.prototype.La=function(){return this.ya},S.prototype.next=function(){if(this.Jm!=null&&this.Jm.length!=0){this.ya++;var h=this.Jm[0];return this.Jm=1>=this.Jm.length?[]:this.Jm.slice(1),h}return this.Jm=null},S.prototype.ZX=function(h){this.Jm.push(h)},S.prototype.qe=function(){},S}();d.gL=L}(Y||(Y={})),function(d){var L;(L=d.SL||(d.SL={}))[L.enumFillRuleOddEven=0]="enumFillRuleOddEven",L[L.enumFillRuleWinding=1]="enumFillRuleWinding";var S=function(h){function l(s,a){var u=h.call(this)||this;if(u.xf=!1,u.Eq=null,u.sq=0,u.rq=0,u.Aj=null,u.Mg=!1,u.nb=null,u.mb=null,u.Ve=null,u.Lj=null,u.Sd=null,u.tq=0,u.gb=0,u.xq=0,a===void 0)u.xf=s,u.Mg=!1,u.tq=0,u.sq=0,u.rq=0,u.wa=0,u.description=d.ee.og();else{if(a==null)throw d.i.N();u.xf=s,u.Mg=!1,u.tq=0,u.sq=0,u.rq=0,u.wa=0,u.description=a}return u.Aj=null,u.gb=0,u}return Bt(l,h),l.prototype.tm=function(){return 0<this.tq},l.prototype.Yx=function(){this.vc(),this.Eq==null?this.Eq=new d.Sa(this.description):this.Eq.Nf(this.description)},l.prototype.sx=function(s,a){var u=new d.h;u.x=s,u.y=a,this.Lt(u)},l.prototype.Lt=function(s){this.Yx(),this.Eq.Cb(s),this.Mg=!0},l.prototype.nf=function(s){if(s.B())throw d.i.N();this.Jl(s.description),this.Yx(),s.copyTo(this.Eq),this.Mg=!0},l.prototype.Sx=function(){var s=1;this.Mg&&(this.Yx(),this.nb==null?(this.nb=d.Yc.Oh(2),this.nb.write(0,0),this.mb=d.Yc.Mr(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.xf&&this.mb.write(this.mb.size-2,1),s++);var a=this.wa;this.nb.write(this.nb.size-1,this.wa+s),this.dm(a+s),this.mb.write(this.nb.size-1,0),this.Mg&&(this.Ht(a,this.Eq),this.Mg=!1)},l.prototype.yj=function(s,a){this.Sx(),this.Cb(this.wa-1,s,a)},l.prototype.Ci=function(s){this.Sx(),this.Cb(this.wa-1,s)},l.prototype.lineTo=function(s){this.Sx(),this.Ht(this.wa-1,s)},l.prototype.CU=function(s){if(this.vc(),this.xf)throw d.i.Qa();var a=this.da();if(s>a)throw d.i.Qa();if(this.dc(s)){if(this.mb==null)throw d.i.Qa();var u=this.wa,p=this.Ba(s),f=this.Vc(s);this.dm(this.wa+1),this.mc();for(var g=0,b=this.description.Aa;g<b;g++)if(this.za[g]!=null){var x=d.ra.Va(this.description.Ed(g));this.za[g].Mn(x*f,this.za[g],x*p,x,!0,1,x*u)}for(;a>s;a--)u=this.nb.read(a),this.nb.write(a,u+1);this.mb.KE(s,1)}},l.prototype.Ap=function(){if(this.wx(),s===void 0){this.Mg=!1;var s=this.da()-1}var a=this.mb.read(s);this.mb.write(s,1|a),this.Ve!=null&&(s=this.Vc(s)-1,this.Ve.write(s,1),this.Lj.write(s,-1))},l.prototype.dc=function(s){return!!(1&this.mb.read(s))},l.prototype.Nn=function(s){if(this.dc(s))return!0;var a=this.Ba(s);return!(a>(s=this.Vc(s)-1))&&(a=this.Na(a),s=this.Na(s),a.qb(s))},l.prototype.yv=function(s){return!!(2&this.mb.read(s))},l.prototype.oc=function(s,a){if(this.Jl(s.description),s.getType()!=322)throw d.i.Qa();var u=new d.Sa;(a||this.B())&&(s.To(u),this.nf(u)),s.Po(u),this.lineTo(u)},l.prototype.tp=function(s){var a=this.wa==0;this.sx(s.v,s.G),this.yj(s.v,s.H),this.yj(s.C,s.H),this.yj(s.C,s.G),this.Ap(),this.Mg=!1,a&&this.Lf(256,!1)},l.prototype.ad=function(s,a){if(!s.B()){for(var u=this.wa==0,p=new d.Sa(this.description),f=0;4>f;f++)s.Hf(a?4-f-1:f,p),f==0?this.nf(p):this.lineTo(p);this.Ap(),this.Mg=!1,u&&!a&&this.Lf(256,!1)}},l.prototype.add=function(s,a){for(var u=0;u<s.da();u++)this.addPath(s,u,!a)},l.prototype.addPath=function(s,a,u){this.vf(-1,s,a,u)},l.prototype.Yk=function(s,a){this.Hz(s,a)},l.prototype.Dr=function(s,a,u,p,f){if(f||this.da()!=0||(f=!0),0>a&&(a=s.da()-1),a>=s.da()||0>u||0>p||p>s.rv(a))throw d.i.fa("index out of bounds");if(p!=0){var g=s.dc(a)&&u+p==s.rv(a);if(!g||p!=1){if(this.Mg=!1,this.Jl(s.description),u=s.Ba(a)+u+1,f&&(p++,u--),g&&p--,g=this.wa,this.dm(this.wa+p),this.mc(),f){if(p==0)return;this.nb.add(this.wa),f=s.mb.read(a),f&=-5,this.xf&&(f|=1),this.mb.write(this.mb.size-1,f),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.wa);f=0;for(var b=this.description.Aa;f<b;f++){var x=this.description.kd(f),T=d.ra.Va(x),M=s.description.Pf(x);0>M||s.za[M]==null?this.za[f].Ln(T*g,d.ra.se(x),p*T,T*g):this.za[f].Mn(T*g,s.za[M],T*u,p*T,!0,T,T*g)}if(this.tm()||s.yv(a))throw d.i.Qa();this.Pc(1993)}}},l.prototype.oJ=function(){for(var s=0,a=this.da();s<a;s++)this.FW(s)},l.prototype.FW=function(s){if(this.mc(),s>=this.da())throw d.i.N();var a=this.Ba(s),u=this.Ja(s);s=this.dc(s)?1:0;for(var p=0,f=this.description.Aa;p<f;p++)if(this.za[p]!=null){var g=d.ra.Va(this.description.Ed(p));this.za[p].ni(g*(a+s),g*(u-s),g)}this.Pc(1993)},l.prototype.Zq=function(s){this.mc();var a=this.da();if(0>s&&(s=a-1),s>=a)throw d.i.N();for(var u=this.Ba(s),p=this.Ja(s),f=0,g=this.description.Aa;f<g;f++)if(this.za[f]!=null){var b=d.ra.Va(this.description.Ed(f));this.za[f].En(b*u,b*p,b*this.wa)}for(u=s+1;u<=a;u++)f=this.nb.read(u),this.nb.write(u-1,f-p);if(this.mb==null)for(u=s+1;u<=a;u++)s=this.mb.read(u),this.mb.write(u-1,s);this.nb.resize(a),this.mb.resize(a),this.wa-=p,this.Pg-=p,this.Pc(1993)},l.prototype.vf=function(s,a,u,p){if(a==this||u>=a.da())throw d.i.N();var f=this.da();if(s>f)throw d.i.N();0>s&&(s=f),0>u&&(u=a.da()-1),this.Mg=!1,this.Jl(a.description),a.mc();var g=a.Ba(u),b=a.Ja(u),x=this.wa,T=a.dc(u)&&!p?1:0;this.dm(this.wa+b),this.mc();for(var M=s<f?this.Ba(s):x,C=0,O=this.description.Aa;C<O;C++){var F=this.description.Ed(C),P=a.description.Pf(F),G=d.ra.Va(F);0<=P&&a.za[P]!=null?(T!=0&&this.za[C].Mn(M*G,a.za[P],G*g,G,!0,G,G*x),this.za[C].Mn((M+T)*G,a.za[P],G*(g+T),G*(b-T),p,G,G*(x+T))):this.za[C].Ln(M*G,d.ra.se(F),G*b,G*x)}for(this.nb.add(x+b),p=f;p>=s+1;p--)g=this.nb.read(p-1),this.nb.write(p,g+b);for(a.yv(u),this.mb.add(0),p=f-1;p>=s+1;p--)f=this.mb.read(p),f&=-5,this.mb.write(p+1,f);f=a.JR().read(u),f&=-5,this.xf&&(f|=1),this.mb.write(s,f)},l.prototype.Hz=function(s,a){var u=-1,p=this.da();if(u>p)throw d.i.N();0>u&&(u=p),this.Mg=!1;var f=this.wa;this.dm(this.wa+a),this.mc();var g=u<p?this.Ba(u):f;if(s!=null)this.za[0].Iz(2*g,s,0,a,!0,2*f);else{var b=d.ra.se(0);this.za[0].Ln(2*g,b,2*a,2*f)}s=1;for(var x=this.description.Aa;s<x;s++){b=this.description.kd(s);var T=d.ra.Va(b);b=d.ra.se(b),this.za[s].Ln(g*T,b,T*a,T*f)}for(this.nb.add(this.wa),f=p;f>=u+1;f--)g=this.nb.read(f-1),this.nb.write(f,g+a);for(this.mb.add(0),f=p-1;f>=u+1;f--)a=this.mb.read(f),a&=-5,this.mb.write(f+1,a);this.xf&&this.mb.write(u,1)},l.prototype.qG=function(s,a,u){var p=-1;if(0>s&&(s=this.da()),s>this.da()||p>this.Ja(s)||u>a.length)throw d.i.fa("index out of bounds");if(u!=0){s==this.da()&&(this.nb.add(this.wa),this.xf?this.mb.add(1):this.mb.add(0)),0>p&&(p=this.Ja(s)),this.mc();var f=this.wa;this.dm(this.wa+u),this.mc();for(var g=0,b=this.description.Aa;g<b;g++){var x=this.description.Ed(g),T=d.ra.Va(x);this.za[g].Ut(T*(this.Ba(s)+p+u),(f-this.Ba(s)-p)*T,this.za[g],T*(this.Ba(s)+p),!0,T),g==0?this.za[g].vC(T*(this.Ba(s)+p),u,a,0,!0):this.za[g].Wj(d.ra.se(x),(this.Ba(s)+p)*T,u*T)}for(this.tm()&&(this.Ve.Ut(this.Ba(s)+p+u,f-this.Ba(s)-p,this.Ve,this.Ba(s)+p,!0,1),this.Lj.Ut(this.Ba(s)+p+u,f-this.Ba(s)-p,this.Lj,this.Ba(s)+p,!0,1),this.Ve.Wj(1,this.Ba(s)+p,u),this.Lj.Wj(-1,this.Ba(s)+p,u)),s+=1,a=this.da();s<=a;s++)this.nb.write(s,this.nb.read(s)+u)}},l.prototype.wf=function(s,a,u){var p=this.da();if(0>s&&(s=this.da()),s>=p||a>this.Ja(s))throw d.i.fa("index out of bounds");s==this.da()&&(this.nb.add(this.wa),this.xf?this.mb.add(1):this.mb.add(0)),0>a&&(a=this.Ja(s));var f=this.wa;this.dm(this.wa+1),this.mc();var g=this.Ba(s);this.za[0].vj(2*(g+a),u,2*f),u=1;for(var b=this.description.Aa;u<b;u++){var x=this.description.Ed(u),T=d.ra.Va(x);this.za[u].Ln(T*(g+a),d.ra.se(x),T,T*f)}for(s+=1;s<=p;s++)this.nb.write(s,this.nb.read(s)+1)},l.prototype.DB=function(s,a){var u=this.da();if(0>s&&(s=u-1),s>=u||a>=this.Ja(s))throw d.i.fa("index out of bounds");this.mc();var p=this.Ba(s);0>a&&(a=this.Ja(s)-1),a=p+a,p=0;for(var f=this.description.Aa;p<f;p++)if(this.za[p]!=null){var g=d.ra.Va(this.description.Ed(p));this.za[p].En(g*a,g,g*this.wa)}for(;u>=s+1;u--)a=this.nb.read(u),this.nb.write(u,a-1);this.wa--,this.Pg--,this.Pc(1993)},l.prototype.uE=function(s,a,u){var p=this.Ba(s)+a;if((u=this.Ba(u)+void 0)<p||0>p||u>this.I()-1)throw d.i.N();a=0,(s=this.Ga()).Vb(p);do{for(;s.Ha()&&(p=s.ha(),s.wb()!=u);)a+=p=p.Qb();if(s.wb()==u)break}while(s.$a());return a},l.prototype.fO=function(s,a,u){if(a=this.Ba(s)+a,u=this.Ba(s)+u,0>a||u>this.I()-1)throw d.i.N();var p=this.Ga();if(a>u){if(!this.dc(s))throw d.i.N("cannot iterate across an open path");p.JB()}var f=s=0;p.Vb(a);do f+=s,s=p.ha().Qb();while(p.wb()!=u);return f},l.prototype.mg=function(){return d.pi.gm(this,null)},l.prototype.KS=function(s,a,u){for(var p=s;p<u-1;p++)if(this.dc(p))throw d.i.N("cannot interpolate across closed paths");if((p=this.description.Aa)!=1){var f=this.uE(s,a,u);if(f!=0)for(var g=1;g<p;g++){var b=this.description.kd(g);if(d.ra.lz(b)!=2)for(var x=d.ra.Va(b),T=0;T<x;T++)this.MS(b,s,a,u,f,T)}}},l.prototype.JS=function(s,a,u){var p=this.description.Aa;if(p!=1){var f=this.fO(s,a,u);if(f!=0)for(var g=1;g<p;g++){var b=this.description.kd(g);if(d.ra.lz(b)!=2)for(var x=d.ra.Va(b),T=0;T<x;T++)this.LS(b,s,a,u,f,T)}}},l.prototype.MS=function(s,a,u,p,f,g){var b=this.Ga(),x=this.Ba(a)+u;p=this.Ba(p)+void 0,a=this.Uc(s,x,g),u=this.Uc(s,p,g);var T=a,M=0;b.Vb(x);do if(b.Ha()){if(b.ha(),b.wb()==p)break;this.setAttribute(s,b.wb(),g,T),b.li();do{if(x=b.ha(),b.ik()==p)return;M+=x=x.Qb(),T=d.lc.hq(a,u,M/f),b.On()||this.setAttribute(s,b.ik(),g,T)}while(b.Ha())}while(b.$a())},l.prototype.LS=function(s,a,u,p,f,g){var b=this.Ga(),x=this.Ba(a)+u;if((a=this.Ba(a)+p)!=x){p=this.Uc(s,x,g),u=this.Uc(s,a,g);var T=0;b.Vb(x),b.JB(),x=p;do{var M=b.ha();this.setAttribute(s,b.wb(),g,x),T+=x=M.Qb(),x=d.lc.hq(p,u,T/f)}while(b.ik()!=a)}},l.prototype.Oa=function(){this.tq=0,this.Mg=!1,this.Sd=this.Ve=this.Lj=this.mb=this.nb=null,this.wD()},l.prototype.Oc=function(s){s instanceof d.Dd?this.YD(s,-1):this.wN(s)},l.prototype.YD=function(s,a){if(!this.B()&&!s.isIdentity()){this.mc();var u=this.za[0],p=new d.h,f=new d.h;if(0>a){var g=this.tm(),b=0;a=this.wa}else g=this.yv(a),b=this.Ba(a),a=this.Vc(a);for(;b<a;b++){if(p.x=u.read(2*b),p.y=u.read(2*b+1),g){var x=this.Lj.read(b);if(0<=x)switch(7&this.Ve.read(b)){case 2:f.x=this.Sd.read(x),f.y=this.Sd.read(x+1),s.Eh(f,f),this.Sd.write(x,f.x),this.Sd.write(x+1,f.y),f.x=this.Sd.read(x+3),f.y=this.Sd.read(x+4),s.Eh(f,f),this.Sd.write(x+3,f.x),this.Sd.write(x+4,f.y);break;case 4:throw d.i.Qa()}}s.Eh(p,p),u.write(2*b,p.x),u.write(2*b+1,p.y)}this.Pc(1993)}},l.prototype.wN=function(s){if(!this.B()){this.re(1),this.mc();for(var a=this.za[0],u=this.za[1],p=new d.Nd,f=new d.Nd,g=this.tm(),b=0;b<this.wa;b++){if(p.x=a.read(2*b),p.y=a.read(2*b+1),p.z=u.read(b),g){var x=this.Lj.read(b);if(0<=x)switch(7&this.Ve.read(b)){case 2:f.x=this.Sd.read(x),f.y=this.Sd.read(x+1),f.z=this.Sd.read(x+2),f=s.fp(f),this.Sd.write(x,f.x),this.Sd.write(x+1,f.y),this.Sd.write(x+1,f.z),f.x=this.Sd.read(x+3),f.y=this.Sd.read(x+4),f.z=this.Sd.read(x+5),f=s.fp(f),this.Sd.write(x+3,f.x),this.Sd.write(x+4,f.y),this.Sd.write(x+5,f.z);break;case 4:throw d.i.Qa()}}p=s.fp(p),a.write(2*b,p.x),a.write(2*b+1,p.y),u.write(b,p.z)}this.Pc(1993)}},l.prototype.iy=function(){this.nb==null&&(this.nb=d.Yc.Oh(1,0),this.mb=d.Yc.Mr(1,0)),this.Ve!=null&&(this.Ve.resize(this.Pg,1),this.Lj.resize(this.Pg,-1))},l.prototype.op=function(s){s.Mg=!1,s.tq=this.tq,s.xq=this.xq,s.nb=this.nb!=null?d.ia.Bn(this.nb):null,s.mb=this.mb!=null?d.pn.Bn(this.mb):null,s.Lj=this.Lj!=null?d.ia.Bn(this.Lj):null,s.Ve=this.Ve!=null?d.pn.Bn(this.Ve):null,s.Sd=this.Sd!=null?d.be.Bn(this.Sd):null,s.sq=this.sq,s.rq=this.rq,s.Aj=this.ak(1024)?null:this.Aj},l.prototype.Qb=function(){if(!this.ak(512))return this.sq;for(var s=this.Ga(),a=new d.Fx(0);s.$a();)for(;s.Ha();)a.add(s.ha().Qb());return this.sq=a.rm(),this.Lf(512,!1),a.rm()},l.prototype.Nb=function(s){if(s==this)return!0;if(!(s instanceof l&&h.prototype.Nb.call(this,s)))return!1;var a=this.da();return!(a!=s.da()||this.nb!=null&&!this.nb.Nb(s.nb,0,a+1)||this.xq!=s.xq||this.mb!=null&&!this.mb.Nb(s.mb,0,a))&&h.prototype.Nb.call(this,s)},l.prototype.Ga=function(){return new d.YL(this)},l.prototype.hy=function(s){if(h.prototype.hy.call(this,s),this.tm())for(s=this.Ga();s.$a();)s.Ha()},l.prototype.yp=function(s,a){if(h.prototype.yp.call(this,s,a),this.tm())for(s=this.Ga();s.$a();)s.Ha()},l.prototype.$x=function(){this.wa=this.nb==null||this.nb.size==0?0:this.nb.read(this.nb.size-1)},l.prototype.Ke=function(){return this.xf?(this.xu(),this.rq):0},l.prototype.Ev=function(s){return!!this.xf&&(this.ak(8)?(this.xu(),0<this.Aj.read(s)):!!(4&this.mb.read(s)))},l.prototype.Ir=function(s){return this.xf?(this.xu(),this.Aj.read(s)):0},l.prototype.xu=function(){if(this.ak(1024)){var s=this.da();this.Aj==null?this.Aj=new d.be(s):this.Aj.size!=s&&this.Aj.resize(s),s=new d.Fx(0);for(var a=new d.Fx(0),u=new d.h,p=0,f=this.Ga();f.$a();){for(a.reset(),this.D(this.Ba(f.gb),u);f.Ha();)a.add(f.ha().Tx(u.x,u.y));s.add(a.rm());var g=p++;this.Aj.write(g,a.rm())}this.rq=s.rm(),this.Lf(1024,!1)}},l.prototype.FR=function(){if(this.xf){this.fm();for(var s=this.da(),a=0;a<s;a++)4&this.mb.read(a)}},l.prototype.fm=function(){if(this.ak(8)){this.xu();var s=this.da();(this.mb==null||this.mb.size<s)&&(this.mb=d.Yc.Mr(s+1));for(var a=1,u=0;u<s;u++){var p=this.Aj.read(u);u==0&&(a=0<p?1:-1),0<p*a?this.mb.zJ(u,4):this.mb.KE(u,4)}this.Lf(8,!1)}},l.prototype.sz=function(s){var a=this.gb,u=this.da();if(0<=a&&a<u){if(s<this.Vc(a)){if(s>=this.Ba(a))return a;a--}else a++;if(0<=a&&a<u&&s>=this.Ba(a)&&s<this.Vc(a))return this.gb=a}if(5>u){for(a=0;a<u;a++)if(s<this.Vc(a))return this.gb=a;throw d.i.fa("corrupted geometry")}for(a=0,--u;u>a;){var p=a+(u-a>>1);if(s<this.Ba(p))u=p-1;else{if(!(s>=(a=this.Vc(p))))return this.gb=p;a=p+1}}return this.gb=a},l.prototype.yz=function(){var s=this.I();if(!this.xf){s-=this.da();for(var a=0,u=this.da();a<u;a++)this.dc(a)&&s++}return s},l.prototype.rv=function(s){var a=this.Ja(s);return this.dc(s)||a--,a},l.prototype.Ia=function(){return new l(this.xf,this.description)},l.prototype.Db=function(){return this.xf?2:1},l.prototype.getType=function(){return this.xf?1736:1607},l.prototype.QJ=function(s){this.nb=s,this.Pc(16777215)},l.prototype.VR=function(){return this.wx(),this.Ve},l.prototype.JR=function(){return this.wx(),this.mb},l.prototype.PJ=function(s){this.mb=s,this.Pc(16777215)},l.prototype.da=function(){return this.nb!=null?this.nb.size-1:0},l.prototype.Vc=function(s){return this.nb.read(s+1)},l.prototype.Ja=function(s){return this.nb.read(s+1)-this.nb.read(s)},l.prototype.Ba=function(s){return this.nb.read(s)},l.prototype.lu=function(s,a){this.Bb==null&&(this.Bb=new d.Uk),a=d.Nx.pW(a);var u=this.Bb.Fk;if(u!=null){if(!(u.Ik<s||a>u.RR()))return!0;this.Bb.yD(null)}return u=d.Nx.create(this,s,a),this.Bb.yD(u),!0},l.prototype.cc=function(){var s=h.prototype.cc.call(this);if(!this.Ac()){var a=this.da();this.nb!=null&&this.nb.An(s,0,a+1),this.mb!=null&&this.mb.An(s,0,a)}return s},l.prototype.ZF=function(s){return this.Ve!=null?this.Ve.read(s):1},l.prototype.bc=function(s,a,u){var p=this.sz(s);if(s==this.Vc(p)-1&&!this.dc(p))throw d.i.fa("index out of bounds");this.mc();var f=this.Ve,g=1;if(f!=null&&(g=7&f.read(s)),g!==1)throw d.i.Qa();if(a.Or(),a=a.get(),u?a.Nf(d.ee.og()):a.Nf(this.description),p=s==this.Vc(p)-1&&this.dc(p)?this.Ba(p):s+1,f=new d.h,this.D(s,f),a.Dc(f),this.D(p,f),a.Qc(f),!u)for(u=1,f=this.description.Aa;u<f;u++){g=this.description.Ed(u);for(var b=d.ra.Va(g),x=0;x<b;x++){var T=this.Uc(g,s,x);a.YB(g,x,T),T=this.Uc(g,p,x),a.OB(g,x,T)}}},l.prototype.Rj=function(s,a){if(s>=this.da())throw d.i.N();if(this.B())a.Oa();else{if(this.yv(s))throw d.i.fa("not implemented");var u=this.ub(0),p=new d.h,f=new d.l;f.Oa();var g=this.Ba(s);for(s=this.Vc(s);g<s;g++)u.tc(2*g,p),f.Zb(p);a.K(f)}},l.prototype.fj=function(s){return this.Bb==null&&(this.Bb=new d.Uk),!(s==0||16>this.I())&&(s=d.ta.nE(this),this.Bb.WM(s),!0)},l.prototype.hM=function(){if(this.Bb==null&&(this.Bb=new d.Uk),this.Bb.zo==null){this.Bb.xD(null);var s=d.ta.YN(this);this.Bb.xD(s)}},l.prototype.Yo=function(s){this.xq=s},l.prototype.In=function(){return this.xq},l.prototype.DD=function(s){if(this==s)throw d.i.fa("MultiPathImpl.add");for(var a=this.da(),u=0;u<s.da();u++)this.addPath(s,u,!0),this.CU(a),a++},l.prototype.kO=function(s){var a=this.sz(s),u=this.Ba(a);if(u!=s){if(s>=(a=this.Vc(a))||s<u)throw d.i.fa("change_ring_start_point");for(var p=0,f=this.description.Aa;p<f;p++){var g=this.description.kd(p);g=d.ra.Va(g),this.za[p].rotate(u*g,s*g,a*g)}}},l}(d.Gx);d.Vk=S}(Y||(Y={})),function(d){var L=function(S){function h(l){var s=S.call(this)||this;if(l!==void 0){if(l==null)throw d.i.N();s.description=l}else s.description=d.ee.og();return s.wa=0,s}return Bt(h,S),h.prototype.Ia=function(){return new h(this.description)},h.prototype.add=function(l){this.resize(this.wa+1),this.Dh(this.wa-1,l)},h.prototype.Bu=function(l,s){this.resize(this.wa+1);var a=new d.h;a.ma(l,s),this.Cb(this.wa-1,a)},h.prototype.Fd=function(l,s,a){if(a=0>a?l.I():a,0>s||s>l.I()||a<s)throw d.i.N();if(s!=a){this.Jl(l.description),a-=s;var u=this.wa;this.resize(this.wa+a),this.mc();for(var p=0,f=l.description.Aa;p<f;p++){var g=l.description.Ed(p),b=d.ra.Va(g),x=this.ub(g);g=l.ub(g),x.Mn(u*b,g,s*b,a*b,!0,1,u*b)}}},h.prototype.HD=function(l,s){var a=l.length;if(s=0>s?a:s,0>a||0>s)throw d.i.N();if(s!=0){a=s-0,s=this.wa,this.resize(this.wa+a);for(var u=0;u<a;u++)this.Cb(s+u,l[0+u])}},h.prototype.DB=function(l){if(0>l||l>=this.I())throw d.i.fa("index out of bounds");this.mc();for(var s=0,a=this.description.Aa;s<a;s++)if(this.za[s]!=null){var u=d.ra.Va(this.description.Ed(s));this.za[s].En(u*l,u,u*this.wa)}this.wa--,this.Pg--,this.Pc(1993)},h.prototype.resize=function(l){this.dm(l)},h.prototype.op=function(){},h.prototype.Oa=function(){S.prototype.wD.call(this)},h.prototype.Oc=function(l){if(l instanceof d.Dd){if(this.B())return;this.mc();for(var s=this.za[0],a=new d.h,u=0;u<this.wa;u++)a.x=s.read(2*u),a.y=s.read(2*u+1),l.Eh(a,a),s.write(2*u,a.x),s.write(2*u+1,a.y)}else{if(this.B())return;this.mc(),this.re(1),this.mc(),s=this.za[0],a=this.za[1];var p=new d.Nd;for(u=0;u<this.wa;u++){p.x=s.read(2*u),p.y=s.read(2*u+1),p.z=a.read(u);var f=l.fp(p);s.write(2*u,f.x),s.write(2*u+1,f.y),a.write(u,f.z)}}this.Pc(1993)},h.prototype.Db=function(){return 0},h.prototype.getType=function(){return 550},h.prototype.Ke=function(){return 0},h.prototype.Qb=function(){return 0},h.prototype.Nb=function(l){return l==this||l instanceof h&&S.prototype.Nb.call(this,l)},h.prototype.lW=function(l,s){var a=this.wa;if(a=Math.min(a,s+1e3),0>s||s>=this.wa||a<s||l.length!=1e3)throw d.i.N();var u=a-s,p=[];for(this.ub(0).Vw(2*s,2*u,p,0,!0),s=0;s<u;s++)l[s]=d.h.construct(p[2*s],p[2*s+1]);return a},h.prototype.$x=function(){},h.prototype.iy=function(){},h.prototype.lu=function(){return!1},h.prototype.fj=function(){return!1},h.prototype.mg=function(){return null},h}(d.Gx);d.de=L}(Y||(Y={})),function(d){var L;(L=d.iL||(d.iL={}))[L.NotDetermined=0]="NotDetermined",L[L.Structure=1]="Structure",L[L.DegenerateSegments=2]="DegenerateSegments",L[L.Clustering=3]="Clustering",L[L.Cracking=4]="Cracking",L[L.CrossOver=5]="CrossOver",L[L.RingOrientation=6]="RingOrientation",L[L.RingOrder=7]="RingOrder",L[L.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",L[L.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",L[L.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var S=function(){function h(l,s,a){l===void 0?(this.Jj=0,this.Ko=this.Jo=-1):(this.Jj=l,this.Jo=s,this.Ko=a)}return h.prototype.Wt=function(l){this.Jj=l.Jj,this.Jo=l.Jo,this.Ko=l.Ko},h}();d.Md=S}(Y||(Y={})),function(d){d.O=function(){function L(){}return L.assert=function(S){if(S===!1)throw d.i.GK()},L.bK=function(S){return isNaN(S)?NaN:S===0?S:0<S?1:-1},L.Fu=function(S){var h;h===void 0&&(h=0);for(var l=[],s=0;s<S;s++)l[s]=L.lg(2,h);return l},L.lg=function(S,h){h===void 0&&(h=0);for(var l=[],s=0;s<S;s++)l[s]=h;return l},L.$u=function(S,h){var l,s;for(l===void 0&&(l=0),s===void 0&&(s=S.length-1);l<=s;l++)S[l]=h},L.Rk=function(S,h,l){return S<h?h:S>l?l:S},L.Th=function(S,h){var l=5381;return((l=((l=((l=h!==void 0?(h<<5)+h+(255&S):(l<<5)+l+(255&S))<<5)+l+(S>>8&255))<<5)+l+(S>>16&255))<<5)+l+(S>>24&255)&2147483647},L.uj=function(){throw Error("Not Implemented")},L.bB=function(S){return L.aU(S)+12345&2147483647},L.XG=function(S){var h=32,l=S%L.Qx|0,s=S/L.Qx|0;return(h&=63)==0?S:(32>h?(S=l>>>h|s<<32-h,h=s>>h):(S=s>>h-32,h=0<=s?0:-1),h*L.Qx+(S>>>0))},L.aU=function(S){var h=1103515245,l=65535&h;return((h-l)*(S|=0)|0)+(l*S|0)|0},L.truncate=function(S){return 0>S?-1*Math.floor(Math.abs(S)):Math.floor(S)},L.MAX_SAFE_INTEGER=Math.pow(2,53)-1,L.MIN_SAFE_INTEGER=-L.MAX_SAFE_INTEGER,L.VC=65536,L.Qx=L.VC*L.VC,L}()}(Y||(Y={})),function(d){var L;(L=d.CL||(d.CL={}))[L.Project=0]="Project",L[L.Union=1]="Union",L[L.Difference=2]="Difference",L[L.Proximity2D=3]="Proximity2D",L[L.Relate=4]="Relate",L[L.Equals=5]="Equals",L[L.Disjoint=6]="Disjoint",L[L.Intersects=7]="Intersects",L[L.Within=8]="Within",L[L.Contains=9]="Contains",L[L.Crosses=10]="Crosses",L[L.Touches=11]="Touches",L[L.Overlaps=12]="Overlaps",L[L.Buffer=13]="Buffer",L[L.Distance=14]="Distance",L[L.Intersection=15]="Intersection",L[L.Clip=16]="Clip",L[L.Cut=17]="Cut",L[L.DensifyByLength=18]="DensifyByLength",L[L.DensifyByAngle=19]="DensifyByAngle",L[L.LabelPoint=20]="LabelPoint",L[L.GeodesicBuffer=21]="GeodesicBuffer",L[L.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",L[L.ShapePreservingDensify=23]="ShapePreservingDensify",L[L.GeodeticLength=24]="GeodeticLength",L[L.GeodeticArea=25]="GeodeticArea",L[L.Simplify=26]="Simplify",L[L.SimplifyOGC=27]="SimplifyOGC",L[L.Offset=28]="Offset",L[L.Generalize=29]="Generalize",L[L.SymmetricDifference=30]="SymmetricDifference",L[L.ConvexHull=31]="ConvexHull",L[L.Boundary=32]="Boundary",L[L.SimpleRelation=33]="SimpleRelation";var S=function(){function h(){}return h.prototype.getType=function(){return null},h.prototype.wn=function(){},h.prototype.Iu=function(){return!1},h}();d.Je=S}(Y||(Y={})),function(d){var L=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Bt(h,S),h.prototype.getType=function(){return 13},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.V=function(l,s,a,u,p){return l instanceof d.aa?(p=new d.Zc(l),this.V(p,s,[a],!1,u).next()):u===!0?(a=new d.BC(l,s,a,!1,p),d.Gh.local().V(a,s,p)):new d.BC(l,s,a,!1,p)},h.instance=null,h}(d.Je);d.AC=L}(Y||(Y={})),function(d){var L=function(){function S(h,l,s,a,u){this.ya=-1,this.Rd=h,this.$z=l,this.Cs=s,this.tT=new d.l,this.tT.Oa(),this.eo=-1,this.Ub=u}return S.prototype.next=function(){for(var h;(h=this.Rd.next())!=null;)return this.ya=this.Rd.La(),this.eo+1<this.Cs.length&&this.eo++,this.buffer(h,this.Cs[this.eo]);return null},S.prototype.La=function(){return this.ya},S.prototype.buffer=function(h,l){return d.HK.buffer(h,l,this.$z,NaN,96,this.Ub)},S.prototype.qe=function(){},S}();d.BC=L}(Y||(Y={})),function(d){var L=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Bt(h,S),h.prototype.getType=function(){return 16},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.V=function(l,s,a,u){return l instanceof d.aa?(l=new d.Zc(l),this.V(l,s,a,u).next()):new d.lL(l,s,a,u)},h.instance=null,h}(d.Je);d.kL=L}(Y||(Y={})),function(d){var L=function(){function S(h,l,s){if(this.ya=-1,h==null)throw d.i.N();this.$=l,this.yk=h,this.qa=d.ta.Wd(s,l,!1)}return S.prototype.next=function(){var h;return(h=this.yk.next())!=null?(this.ya=this.yk.La(),d.Ud.clip(h,this.$,this.qa,0)):null},S.prototype.La=function(){return this.ya},S.prototype.qe=function(){},S}();d.lL=L}(Y||(Y={})),function(d){var L=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Bt(h,S),h.prototype.getType=function(){return 31},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.V=function(l,s,a){return l instanceof d.aa?d.DC.rE(l):new d.DC(s,l,a)},h.instance=null,h}(d.Je);d.CC=L}(Y||(Y={})),function(d){var L=function(){function S(h,l,s){if(this.uA=new d.Zt,this.ya=-1,l==null)throw d.i.N();this.cH=h,this.Ic=!1,this.yk=l,this.Ub=s}return S.prototype.next=function(){if(this.cH){if(!this.Ic){var h=this.dO(this.yk);return this.Ic=!0,h}return null}if(!this.Ic){if((h=this.yk.next())!=null)return this.ya=this.yk.La(),S.rE(h);this.Ic=!0}return null},S.prototype.La=function(){return this.ya},S.prototype.dO=function(h){for(var l;(l=h.next())!=null;)this.uA.Ib(l);return this.uA.cR()},S.prototype.qe=function(){if(!this.Ic){if(!this.cH)throw d.i.fa("Invalid call for non merging convex hull.");var h=this.yk.next();if(h==null)throw d.i.fa("Expects a non-null geometry.");this.uA.Ib(h)}},S.rE=function(h){if(S.VS(h))return h;var l=h.getType();if(d.Vk.yd(l))return(l=new d.Ta(h.description)).oc(h,!0),l;if(l==550&&h.I()==2){var s=new d.Sa;return l=new d.Ta(h.description),h.ve(0,s),l.nf(s),h.ve(1,s),l.lineTo(s),l}return d.Zt.RO(h)},S.VS=function(h){if(h.B())return!0;var l=h.getType();return l==33||l==197||!d.Vk.yd(l)&&(l==550?h.I()==1:l==1607?h.da()==1&&2>=h.I():h.da()==1&&(2>=h.I()||d.Zt.JG(h,0)))},S}();d.DC=L}(Y||(Y={})),function(d){var L=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Bt(h,S),h.prototype.getType=function(){return 17},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.V=function(l,s,a,u,p){return new d.nL(l,s,a,u,p)},h.instance=null,h}(d.Je);d.mL=L}(Y||(Y={})),function(d){var L=function(){function S(h,l,s,a,u){if(this.Tf=null,l==null||s==null)throw d.i.fa("invalid argument");this.qT=h,this.nA=l,this.lH=s,h=d.ta.mv(l,s),this.qa=d.ta.Wd(a,h,!0),this.kH=-1,this.nd=u}return S.prototype.La=function(){return 0},S.prototype.next=function(){return this.RQ(),++this.kH<this.Tf.length?this.Tf[this.kH]:null},S.prototype.RQ=function(){if(this.Tf==null)switch(this.Tf=[],this.nA.getType()){case 1607:this.TQ();break;case 1736:this.SQ()}},S.prototype.TQ=function(){var h=new d.Ta,l=new d.Ta,s=new d.Ta;this.Tf.push(h),this.Tf.push(l);var a=[];d.LK.JK(this.qT,this.nA,this.lH,this.qa,a,this.nd);for(var u=0;u<a.length;u++){var p=a[u];if(p.bt==0)h.add(p.X,!1);else if(p.bt==1||p.bt==2)l.add(p.X,!1);else if(p.bt==3)this.Tf.push(p.X);else{if(p.bt!=4)throw d.i.fa("internal");s.add(p.X,!1)}}s.B()||h.B()&&l.B()&&!(3<=this.Tf.length)||this.Tf.push(s),h.B()&&l.B()&&3>this.Tf.length&&(this.Tf.length=0)},S.prototype.SQ=function(){var h=new d.ia(0),l=new d.gd,s=l.aF(),a=l.Ib(this.nA),u=l.Ib(this.lH),p=new d.Fg;try{p.Ft(l,this.qa,this.nd),p.dl(s,a,u,h);var f=l.Ne(a),g=new d.Da,b=new d.Da;for(this.Tf.length=0,this.Tf.push(g),this.Tf.push(b),a=0;a<h.size;a++){var x=new d.gd,T=x.Ib(f),M=x.Ib(l.Ne(h.get(a)));p.dr(x,this.nd);var C=p.Av(T,M),O=x.Ne(C);if(!O.B()){var F=l.KF(h.get(a),s);F==2?g.add(O,!1):F==1?b.add(O,!1):this.Tf.push(O);var P=new d.gd;T=P.Ib(f),M=P.Ib(l.Ne(h.get(a))),p.dr(P,this.nd),f=P.Ne(p.im(T,M))}}!f.B()&&0<h.size&&this.Tf.push(f),g.B()&&b.B()&&(this.Tf.length=0)}finally{p.Ug()}},S.prototype.qe=function(){},S}();d.nL=L}(Y||(Y={})),function(d){var L=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Bt(h,S),h.prototype.getType=function(){return 18},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.V=function(l,s,a){if(l instanceof d.aa)return l=new d.Zc(l),this.V(l,s,a).next();if(0>=s)throw d.i.N();return new d.oL(l,s,a)},h.instance=null,h}(d.Je);d.Xl=L}(Y||(Y={})),function(d){var L=function(){function S(h,l){this.ya=-1,this.Rd=h,this.Ps=l}return S.prototype.La=function(){return this.ya},S.prototype.next=function(){var h;return(h=this.Rd.next())!=null?(this.ya=this.Rd.La(),this.NP(h)):null},S.prototype.NP=function(h){if(h.B()||1>h.Db())return h;var l=h.getType();if(l==1736||l==1607)return this.Ny(h);if(d.aa.yd(l))return this.PP(h);if(l==197)return this.OP(h);throw d.i.Qa()},S.prototype.PP=function(h){if(h.Qb()<=this.Ps)return h;var l=new d.Ta(h.description);return l.oc(h,!0),this.Ny(l)},S.prototype.OP=function(h){var l=new d.Da(h.description);l.ad(h,!1);var s=new d.l;return h.A(s),h=s.ca(),s.R()<=this.Ps&&h<=this.Ps?l:this.Ny(l)},S.prototype.Ny=function(h){for(var l=h.Ia(),s=h.Ga();s.$a();)for(var a=!0;s.Ha();){var u=s.ha();if(u.getType()!=322)throw d.i.fa("not implemented");var p=s.On(),f=u.Qb();if(f>this.Ps){var g=Math.ceil(f/this.Ps);f=new d.Sa(h.description),a&&(u.To(f),l.nf(f));var b=a=1/g,x=0;for(--g;x<g;x++)u.Tw(b,f),l.lineTo(f),b+=a;p?l.Ap():(u.Po(f),l.lineTo(f))}else p?l.Ap():l.oc(u,a);a=!1}return l},S.prototype.qe=function(){},S}();d.oL=L}(Y||(Y={})),function(d){var L=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Bt(h,S),h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.getType=function(){return 2},h.prototype.V=function(l,s,a,u){return l instanceof d.aa?(l=new d.Zc(l),s=new d.Zc(s),this.V(l,s,a,u).next()):new d.qL(l,s,a,u)},h.im=function(l,s,a,u){if(l.B()||s.B())return l;var p=l.Db(),f=s.Db();if(p>f)return l;var g=l.getType(),b=s.getType(),x=new d.l,T=new d.l,M=new d.l;l.A(x),s.A(T),M.K(x),M.Zb(T);var C=(M=d.ta.Wd(a,M,!0))*Math.sqrt(2)*1.00001,O=new d.l;if(O.K(x),O.W(C,C),!O.isIntersecting(T))return l;if(p==1&&f==2)return h.KV(l,s,b,a,u);if(g==33)switch(d.Vk.yd(b)?(a=new d.Ta(s.description),a.oc(s,!0)):a=s,b){case 1736:return h.XU(l,a,M);case 1607:return h.YU(l,a,M);case 550:return h.VU(l,a,M);case 197:return h.UU(l,a,M);case 33:return h.WU(l,a,M);default:throw d.i.N()}else if(g==550)switch(b){case 1736:return h.nU(l,s,M);case 197:return h.lU(l,s,M);case 33:return h.mU(l,s,M)}return d.Fg.im(l,s,a,u)},h.XU=function(l,s,a){return d.hd.KG(s,l,a)==0?l:l.Ia()},h.YU=function(l,s,a){var u=l.D();s=s.Ga();for(var p=a*Math.sqrt(2)*1.00001,f=p*p,g=new d.l;s.$a();)for(;s.Ha();){var b=s.ha();if(b.A(g),g.W(p,p),g.contains(u)){if(b.qs(u,a))return l.Ia();var x=b.ac();if(d.h.yc(u,x)<=f||(x=b.wc(),d.h.yc(u,x)<=f))return l.Ia()}}return l},h.VU=function(l,s,a){var u=s.ub(0);s=s.I();var p=l.D(),f=new d.h;a=a*Math.sqrt(2)*1.00001,a*=a;for(var g=0;g<s;g++)if(u.tc(2*g,f),d.h.yc(f,p)<=a)return l.Ia();return l},h.UU=function(l,s,a){var u=new d.l;return s.A(u),u.W(a,a),s=l.D(),u.contains(s)?l.Ia():l},h.WU=function(l,s,a){a=a*Math.sqrt(2)*1.00001,a*=a;var u=l.D();return s=s.D(),d.h.yc(u,s)<=a?l.Ia():l},h.nU=function(l,s,a){var u=new d.l;s.A(u),u.W(a,a);for(var p=l.I(),f=!1,g=[],b=0;b<p;b++)g[b]=!1;var x=new d.h;for(b=0;b<p;b++)l.D(b,x),u.contains(x)&&d.hd.Yd(s,x,a)!=0&&(f=!0,g[b]=!0);if(!f)return l;for(s=l.Ia(),b=0;b<p;b++)g[b]||s.Fd(l,b,b+1);return s},h.lU=function(l,s,a){var u=new d.l;s.A(u),u.W(a,a),s=l.I();var p=!1;a=[];for(var f=0;f<s;f++)a[f]=!1;var g=new d.h;for(f=0;f<s;f++)l.D(f,g),u.contains(g)&&(p=!0,a[f]=!0);if(!p)return l;for(u=l.Ia(),f=0;f<s;f++)a[f]||u.Fd(l,f,f+1);return u},h.mU=function(l,s,a){var u=l.ub(0),p=l.I(),f=s.D(),g=new d.h,b=!1;s=[];for(var x=0;x<p;x++)s[x]=!1;for(a=(x=a*Math.sqrt(2)*1.00001)*x,x=0;x<p;x++)u.tc(2*x,g),d.h.yc(g,f)<=a&&(b=!0,s[x]=!0);if(!b)return l;for(u=l.Ia(),x=0;x<p;x++)s[x]||u.Fd(l,x,x+1);return u},h.KV=function(l,s,a,u,p){var f=new d.Fh;l.bn(f);var g=new d.l;return s.A(g),f.Zb(g),f.W(.1*f.R(),.1*f.ca()),(g=new d.Da).ad(f,!1),a==1736?g.add(s,!0):g.ad(s,!0),d.Xj.local().V(l,g,u,p)},h.instance=null,h}(d.Je);d.kp=L}(Y||(Y={})),function(d){var L=function(){function S(h,l,s,a){this.ts=l==null,this.ya=-1,this.Rd=h,this.$z=s,this.wT=l.next(),this.Ub=a}return S.prototype.next=function(){return this.ts?null:(h=this.Rd.next())!=null?(this.ya=this.Rd.La(),d.kp.im(h,this.wT,this.$z,this.Ub)):null;var h},S.prototype.La=function(){return this.ya},S.prototype.qe=function(){},S}();d.qL=L}(Y||(Y={})),function(d){var L=function(){function h(l){this.nd=l,this.Bj=new d.l,this.Bj.Oa(),this.oh=new d.l,this.oh.Oa()}return h.prototype.Nt=function(){var l=this.Bj.v;this.Bj.v=this.oh.v,this.oh.v=l,l=this.Bj.C,this.Bj.C=this.oh.C,this.oh.C=l,l=this.Bj.G,this.Bj.G=this.oh.G,this.oh.G=l,l=this.Bj.H,this.Bj.H=this.oh.H,this.oh.H=l},h.prototype.eQ=function(l,s){if(this.nd!=null&&!this.nd.progress(-1,-1))throw d.i.fu("user_canceled");var a=!this.Bj.isIntersecting(this.oh);return d.aa.Hc(l.getType())&&d.aa.Hc(s.getType())?l.I()>s.I()?this.gE(l,s,a):(this.Nt(),l=this.gE(s,l,a),this.Nt(),l):l.getType()==550&&d.aa.Hc(s.getType())?(l=this.hE(s,l,a),this.Nt(),l):s.getType()==550&&d.aa.Hc(l.getType())?this.hE(l,s,a):l.getType()==550&&s.getType()==550?l.I()>s.I()?this.iE(l,s):(this.Nt(),l=this.iE(s,l),this.Nt(),l):0},h.prototype.gE=function(l,s,a){var u=l.Ga(),p=s.Ga(),f=new d.l,g=new d.l,b=17976931348623157e292;if(!a&&this.pY(l,s,u,p))return 0;for(;u.$a();)for(;u.Ha();)if((l=u.ha()).A(f),!(f.px(this.oh)>b)){for(;p.$a();)for(;p.Ha();)if((s=p.ha()).A(g),f.px(g)<b&&(s=l.tb(s,a),(s*=s)<b)){if(s==0)return 0;b=s}p.Zi()}return Math.sqrt(b)},h.prototype.hE=function(l,s,a){var u=l.Ga(),p=new d.l,f=17976931348623157e292,g=new d.h,b=s.I();for(a=!a&&l.getType()==1736;u.$a();)for(;u.Ha();){var x=u.ha();if(x.A(p),!(1<b&&p.px(this.oh)>f)){for(var T=0;T<b;T++){if(s.D(T,g),a&&d.hd.Yd(l,g,0)!=0)return 0;var M=x.fe(g,!1);if(g.sub(x.hc(M)),(M=g.Sk())<f){if(M==0)return 0;f=M}}a=!1}}return Math.sqrt(f)},h.prototype.iE=function(l,s){for(var a,u=17976931348623157e292,p=new d.h,f=new d.h,g=l.I(),b=s.I(),x=0;x<g;x++)if(l.D(x,p),!(1<b&&this.oh.iK(p)>u)){for(var T=0;T<b;T++)if(s.D(T,f),(a=d.h.yc(p,f))<u){if(a==0)return 0;u=a}}return Math.sqrt(u)},h.prototype.pY=function(l,s,a,u){if(l.getType()==1736){for(;u.$a();)if(u.Ha()){var p=u.ha();if(d.hd.Yd(l,p.wc(),0)!=0)return!0}u.Zi()}if(s.getType()==1736){for(;a.$a();)if(a.Ha()&&(l=a.ha(),d.hd.Yd(s,l.wc(),0)!=0))return!0;a.Zi()}return!1},h.prototype.gm=function(l,s){return l.B()||s.B()?NaN:(l.A(this.Bj),s.A(this.oh),this.eQ(l,s))},h}(),S=function(h){function l(){return h!==null&&h.apply(this,arguments)||this}return Bt(l,h),l.prototype.V=function(s,a,u){if(s==null||a==null)throw d.i.N();if(s.B()||a.B())return NaN;var p=s.getType(),f=a.getType();if(p==33){if(f==33)return d.h.tb(s.D(),a.D());if(f==197)return u=new d.l,a.A(u),u.tb(s.D());(p=new d.de).add(s),s=p}else if(p==197){if(f==197)return f=new d.l,s.A(f),u=new d.l,a.A(u),u.tb(f);(p=new d.Da).ad(s,!1),s=p}return f==33?((f=new d.de).add(a),a=f):f==197&&((f=new d.Da).ad(a,!1),a=f),new L(u).gm(s,a)},l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.prototype.getType=function(){return 14},l.instance=null,l}(d.Je);d.rL=S}(Y||(Y={})),function(d){var L=function(){function S(h,l,s,a){this.zH=h,this.DH=l,this.nd=a,this.$G=s}return S.prototype.next=function(){var h=this.zH.next();return h==null?null:this.zC(h)},S.prototype.La=function(){return this.zH.La()},S.prototype.zC=function(h){var l=h.getType();if(d.aa.Rn(l))return h;if(l==197)return(l=new d.Da(h.description)).ad(h,!1),this.zC(l);if(h.B())return h;if(h==null)throw d.i.Qa();l=h.Ia();for(var s=new d.yb,a=0,u=h.da();a<u;a++)this.TK(h,a,l,s);return l},S.prototype.TK=function(h,l,s,a){if(!(2>h.Ja(l))){var u=h.Ba(l),p=h.Vc(l)-1,f=h.ub(0),g=h.dc(l),b=new d.ia(0);b.Jb(h.Ja(l)+1);var x=new d.ia(0);for(x.Jb(h.Ja(l)+1),b.add(g?u:p),b.add(u),u=new d.h;1<b.size;){var T=b.Fc();b.If();var M=b.Fc();h.D(T,u),a.Dc(u),h.D(M,u),a.Qc(u),0<=(M=this.SK(a,u,f,T,M,p))?(b.add(M),b.add(T)):x.add(T)}if(g||x.add(b.get(0)),x.size==b.size)s.addPath(h,l,!0);else if(2<=x.size&&(!this.$G||x.size!=2||!(g||d.h.tb(h.Na(x.get(0)),h.Na(x.get(1)))<=this.DH))){for(l=new d.Sa,a=0,p=x.size;a<p;a++)h.ve(x.get(a),l),a==0?s.nf(l):s.lineTo(l);g&&(this.$G||x.size!=2||s.lineTo(l),s.Ap())}}},S.prototype.SK=function(h,l,s,a,u,p){var f=u-1;for(u<=a&&(f=p),p=u=-1,a+=1;a<=f;a++){s.tc(2*a,l);var g=l.x,b=l.y;h.hc(h.fe(l,!1),l),l.x-=g,l.y-=b,(g=l.length())>this.DH&&g>p&&(u=a,p=g)}return u},S.prototype.qe=function(){},S}();d.sL=L}(Y||(Y={})),function(d){var L=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Bt(h,S),h.prototype.getType=function(){return 29},h.prototype.V=function(l,s,a,u){return l instanceof d.aa?(l=new d.Zc(l),this.V(l,s,a,u).next()):new d.sL(l,s,a,u)},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.instance=null,h}(d.Je);d.EC=L}(Y||(Y={})),function(d){var L=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Bt(h,S),h.prototype.getType=function(){return 21},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.V=function(l,s,a,u,p,f,g,b){return l instanceof d.aa?(b=new d.Zc(l),this.V(b,s,a,[u],p,f,!1,g).next()):g===!0?(a=new d.GC(l,s,a,u,p,!1,!1,b),d.Gh.local().V(a,s,b)):new d.GC(l,s,a,u,p,!1,!1,b)},h.instance=null,h}(d.Je);d.FC=L}(Y||(Y={})),function(d){var L=function(){function S(h,l,s,a,u,p,f,g){if(p)throw d.i.Ie();if(l==null)throw d.i.N();this.ya=-1,this.Ms=h,this.vg=l,this.ze=s,this.Cs=a,this.$n=u,this.eo=-1,this.Ub=g,this.uT=new d.l,this.uT.Oa()}return S.prototype.next=function(){for(var h;(h=this.Ms.next())!=null;)return this.ya=this.Ms.La(),this.eo+1<this.Cs.length&&this.eo++,this.$Q(h,this.Cs[this.eo]);return null},S.prototype.La=function(){return this.ya},S.prototype.$Q=function(h,l){return d.VK.buffer(h,this.vg,this.ze,l,this.$n,this.Ub)},S.prototype.qe=function(){},S}();d.GC=L}(Y||(Y={})),function(d){var L=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Bt(h,S),h.prototype.getType=function(){return 24},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.V=function(l,s,a){if(s==null)throw d.i.N();if(l.B()||1>l.Db())return 0;if(a==4)throw d.i.Ie();var u=d.cb.sc(s),p=d.cb.vv(u),f=d.cb.ev(u);p*=2-p;var g=u.Hd().ai,b=l.getType();if(b==1736||b==197)var x=l.mg();else d.aa.yd(b)?(x=new d.Ta(l.description)).oc(l,!0):x=l;if(u.Nb(s)==0){if(d.cb.Wc(s)){x=d.Hh.lj(x,s),b==1607&&x==l&&(x=d.aa.jg(l)),l=new d.Nc,d.cb.gh(s).cn(l),b=0;for(var T=x.I();b<T;b++){var M=x.Na(b);M.x=d.Hh.Zm(M.x,l),x.Cb(b,M)}}l=x.Ia(),x=d.Hh.WI(s,u,x,l)?l:d.cb.zh(x,s,u)}return this.hQ(x,a,f,p,g)},h.prototype.hQ=function(l,s,a,u,p){var f=new d.ga(0),g=0;for(l=l.Ga();l.$a();)for(;l.Ha();){var b=l.ha(),x=b.ac();b=b.wc(),x.scale(p),b.scale(p),d.kb.wd(a,u,x.x,x.y,b.x,b.y,f,null,null,s),g+=f.u}return g},h.instance=null,h}(d.Je);d.vL=L}(Y||(Y={})),function(d){var L=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Bt(h,S),h.prototype.getType=function(){return 18},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.V=function(l,s,a,u,p){return l instanceof d.aa?(l=new d.Zc(l),this.V(l,s,a,u,p).next()):new d.uL(l,a,u,s,-1,-1,p)},h.instance=null,h}(d.Je);d.tL=L}(Y||(Y={})),function(d){var L=function(){function S(h,l,s,a,u,p){if(0<p||s!=4&&0<u)throw d.i.Ie();if(l==null)throw d.i.N();this.ya=-1,this.Ms=h,this.vg=l,this.ze=s,this.DT=a,this.CT=u}return S.prototype.next=function(){for(var h;(h=this.Ms.next())!=null;)return this.ya=this.Ms.La(),this.Zy(h);return null},S.prototype.La=function(){return this.ya},S.prototype.Zy=function(h){return d.cj.Qr(h,this.vg,this.ze,this.DT,this.CT,this.Ub)},S.prototype.qe=function(){},S}();d.uL=L}(Y||(Y={})),function(d){(function(L){L[L.Unknown=0]="Unknown",L[L.Contains=1]="Contains",L[L.Within=2]="Within",L[L.Equals=3]="Equals",L[L.Disjoint=4]="Disjoint",L[L.Touches=8]="Touches",L[L.Crosses=16]="Crosses",L[L.Overlaps=32]="Overlaps",L[L.NoThisRelation=64]="NoThisRelation",L[L.Intersects=1073741824]="Intersects",L[L.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(d.cL||(d.cL={})),d.wL=function(){function L(){}return L.nW=function(S,h){var l=S.getType(),s=h.getType();if(d.aa.xj(l)){var a=S.Bb;if(a!=null&&(a=a.Fk)!=null){if(s==33){var u=h.D();a=a.So(u.x,u.y)}else u=new d.l,h.A(u),a=a.Ro(u);if(a==1)return 1;if(a==0)return 4}}if(d.aa.xj(s)&&(a=h.Bb)!=null&&(a=a.Fk)!=null){if(l==33?(S=S.D(),a=a.So(S.x,S.y)):(h=new d.l,S.A(h),a=a.Ro(h)),a==1)return 2;if(a==0)return 4}return 0},L}()}(Y||(Y={})),function(d){var L=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Bt(h,S),h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.getType=function(){return 15},h.prototype.V=function(l,s,a,u,p){return l instanceof d.aa?(l=new d.Zc(l),s=new d.Zc(s),this.V(l,s,a,u,p===void 0?-1:p).next()):p===void 0?new d.HC(l,s,a,u,-1):new d.HC(l,s,a,u,p)},h.prototype.wn=function(l,s,a){this.Iu(l)&&(s=d.ta.kj(s,l,!1),l.fj(a)||l.lu(s,a))},h.prototype.Iu=function(l){return d.Nx.zE(l)},h.instance=null,h}(d.Je);d.Xj=L}(Y||(Y={})),function(d){var L=function(){function S(h,l,s,a,u){if(this.ts=l==null,this.ya=-1,this.Rd=h,this.vg=s,this.Se=l.next(),this.Dj=this.Se.getType(),this.Ub=a,this.Fi=u,this.Fi!=-1&&(0>=this.Fi||7<this.Fi))throw d.i.N("bad dimension mask")}return S.prototype.next=function(){if(this.ts)return null;if(this.zw!=null){var h=this.zw.next();if(h!=null)return h;this.zw=null}for(;(h=this.Rd.next())!=null;)return this.ya=this.Rd.La(),this.Fi==-1?h=this.Ea(h):(this.zw=this.PS(h),h=this.zw.next()),h;return null},S.prototype.La=function(){return this.ya},S.prototype.Ea=function(h){var l=this.zK(h);if(l!=null)return l;l=d.ta.mv(this.Se,h);var s=d.ta.Wd(this.vg,l,!0);l=new d.l,this.Se.A(l);var a=new d.l;return h.A(a),l.W(2*s,2*s),l.Ea(a),l.W(100*s,100*s),s=d.Ud.clip(this.Se,l,0,0),h=d.Ud.clip(h,l,0,0),d.Fg.Av(h,s,this.vg,this.Ub)},S.prototype.QI=function(h,l,s){var a=0;if(1&l)s[0]==null&&(s[0]=new d.de(h)),a++;else for(var u=0;u<s.length-1;u++)s[u]=s[u+1];if(2&l)s[a]==null&&(s[a]=new d.Ta(h)),a++;else for(u=a;u<s.length-1;u++)s[u]=s[u+1];if(4&l)s[a]==null&&(s[a]=new d.Da(h)),a++;else for(u=a;u<s.length-1;u++)s[u]=s[u+1];if(a!=3){for(h=[],u=0;u<a;u++)h[u]=s[u];return new d.Zc(h)}return new d.Zc(s)},S.prototype.PS=function(h){var l=this.zK(h);if(l!=null){var s=[null,null,null];return s[l.Db()]=l,this.QI(h.description,this.Fi,s)}l=d.ta.mv(this.Se,h),s=d.ta.Wd(this.vg,l,!0),l=new d.l,this.Se.A(l),l.W(2*s,2*s);var a=new d.l;return h.A(a),l.Ea(a),l.W(100*s,100*s),s=d.Ud.clip(this.Se,l,0,0),l=d.Ud.clip(h,l,0,0),s=d.Fg.Pz(l,s,this.vg,this.Ub),this.QI(h.description,this.Fi,s)},S.prototype.zK=function(h){var l=d.ta.mv(h,this.Se),s=d.ta.Wd(this.vg,l,!0);l=h.getType();var a=h.B(),u=this.Se.B();if(!(u=a||u)){u=new d.l,h.A(u);var p=new d.l;this.Se.A(p),p.W(2*s,2*s),u=!u.isIntersecting(p)}if(!u)if((p=d.wL.nW(this.Se,h))==4)u=!0;else{if(2&p)return this.Se;if(1&p)return h}if(u)return(s=d.aa.tf(l))<(u=d.aa.tf(this.Dj))?S.HB(h,a):s>u||s==0&&l==550&&this.Dj==33?this.nJ():S.HB(h,a);if((this.Fi==-1||this.Fi==4)&&l==197&&this.Dj==197)return s=this.Se,l=new d.l,h.A(l),a=new d.l,s.A(a),l.Ea(a),s=new d.Fh,h.copyTo(s),s.Xo(l),s;if(l==197&&d.aa.tf(this.Dj)==0||this.Dj==197&&d.aa.tf(l)==0)return a=l==197?h:this.Se,h=l==197?this.Se:h,l=new d.l,a.A(l),d.Ud.clip(h,l,s,0);if(d.aa.tf(l)==0&&0<d.aa.tf(this.Dj)||0<d.aa.tf(l)&&d.aa.tf(this.Dj)==0){if(s=d.ta.kj(this.vg,h,!1),l==550||l==33)return d.Fg.zG(h,this.Se,s);if(this.Dj==550||this.Dj==33)return d.Fg.zG(this.Se,h,s);throw d.i.Qa()}return this.Fi!=-1&&this.Fi!=2||l!=1607||this.Dj!=1736?this.Fi!=-1&&this.Fi!=2||l!=1736||this.Dj!=1607?null:this.wK(this.Se,h):this.wK(h,this.Se)},S.prototype.wK=function(h,l){var s=h,a=l,u=d.ta.kj(this.vg,l,!1),p=new d.l;a.A(p);var f=new d.l;s.A(f),f.W(2*u,2*u),p.Ea(f),p.W(10*u,10*u),s=h=d.Ud.clip(h,p,0,0),f=new d.ia(0);var g=-1,b=a.Bb;if(b!=null){var x=b.Fk;if(x!=null){g=0,f.Jb(s.I()+s.da());for(var T=new d.l,M=s.Ga();M.$a();)for(;M.Ha();){M.ha().A(T);var C=x.Ro(T);C==1?f.add(1):C==0?f.add(0):(f.add(-1),g++)}}}if(5<l.I()&&(b=(a=l=d.Ud.clip(l,p,0,0)).Bb),0>g&&(g=s.yz()),p=s.I()+a.I(),g*a.I()>Math.log(p)*p*4)return null;p=null,g=a.Ga(),b!=null&&b.Fb!=null&&(p=b.Fb),p==null&&20<a.I()&&(p=d.ta.nE(a)),h=h.Ia(),a=null,b=s.Ga(),x=[0,0,0,0,0,0,0,0,0],T=new d.be(0),M=new d.ig,C=-1;for(var O=0,F=0,P=0<f.size,G=-1;b.$a();){G=b.gb;var q=0;for(C=-1,O=0;b.Ha();){var V=P?d.O.truncate(f.get(F)):-1;F++;var Z=b.ha();if(0>V){if(p!=null)for(a==null?a=p.vR(Z,u):a.Uo(Z,u),V=a.next();V!=-1;V=a.next()){g.Vb(p.ja(V)),V=g.ha();var X=Z.Ea(V,null,x,null,u);for(V=0;V<X;V++)T.add(x[V])}else for(g.Zi();g.$a();)for(;g.Ha();)for(V=g.ha(),X=Z.Ea(V,null,x,null,u),V=0;V<X;V++)T.add(x[V]);if(0<T.size){T.Vd(0,T.size,function(Ce,$e){return Ce-$e});var te=0;T.add(1),X=-1,V=0;for(var oe=T.size;V<oe;V++){var me=T.get(V);if(me!=te){var Se=!1;if(te!=0||me!=1?(Z.ah(te,me,M),te=M.get()):(te=Z,Se=!0),2<=q){if(h.Dr(s,G,C,O,q==3),this.QD(l,te.ac(),u)!=1&&this.RD(l,te,u)!=1)return null;h.oc(te,!1),q=1,O=0}else switch(X=this.RD(l,te,u),X){case 1:Se?2>q?(C=b.wb()-s.Ba(G),O=1,q=q==0?3:2):O++:(h.oc(te,q==0),q=1);break;case 0:q=0,C=-1,O=0;break;default:return null}te=me}}}else{if(0>(V=this.QD(l,Z.ac(),u)))return null;V==1?(2>q&&(C=b.wb()-s.Ba(G),q=q==0?3:2),O++):(C=-1,O=0)}T.clear(!1)}else V!=0&&V==1&&(q==0?(q=3,C=b.wb()-s.Ba(G)):q==1?(q=2,C=b.wb()-s.Ba(G)):O++)}2<=q&&(h.Dr(s,G,C,O,q==3),C=-1)}return h},S.prototype.QD=function(h,l,s){return d.Dg.wm(h,l,s)},S.prototype.RD=function(h,l,s){var a=l.ac();l=l.wc();var u=d.Dg.wm(h,a,s),p=d.Dg.wm(h,l,s);return u==1&&p==0||u==0&&p==1?-1:u==0||p==0?0:u==1||p==1?1:((u=new d.h).add(a,l),u.scale(.5),(h=d.Dg.wm(h,u,s))==0?0:h==1?1:-1)},S.HB=function(h,l){return l?h:h.Ia()},S.prototype.nJ=function(){return this.yH==null&&(this.yH=this.Se.Ia()),this.yH},S.prototype.qe=function(){},S}();d.HC=L}(Y||(Y={})),function(d){var L=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Bt(h,S),h.prototype.getType=function(){return 28},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.V=function(l,s,a,u,p,f,g){return l instanceof d.aa?(l=new d.Zc(l),this.V(l,s,a,u,p,f,g).next()):new d.xL(l,s,a,u,p,f,g)},h.instance=null,h}(d.Je);d.IC=L}(Y||(Y={})),function(d){var L=function(){function S(h,l,s,a,u,p,f){this.ya=-1,this.Rd=h,this.Mj=l,this.Ka=s,this.Ki=a,this.CA=u,this.uH=p,this.nd=f}return S.prototype.next=function(){var h=this.Rd.next();return h!=null?(this.ya=this.Rd.La(),this.jL(h)):null},S.prototype.La=function(){return this.ya},S.prototype.jL=function(h){var l=0>=this.uH?d.ta.kj(this.Mj,h,!1):this.uH;return d.IK.V(h,this.Ka,this.Ki,this.CA,l,this.nd)},S.prototype.qe=function(){},S}();d.xL=L}(Y||(Y={})),function(d){var L;(L=d.NK||(d.NK={}))[L.clipToDomainOnly=1]="clipToDomainOnly",L[L.clipWithHorizon=2]="clipWithHorizon",L[L.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var S=function(h){function l(){return h!==null&&h.apply(this,arguments)||this}return Bt(l,h),l.prototype.getType=function(){return 0},l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.prototype.V=function(s,a,u){return s instanceof d.aa?(s=new d.Zc(s),this.V(s,a,u).next()):new d.yL(s,a,u)},l.prototype.transform=function(s,a,u,p){return d.bu.transform(s,a,u,p,!0)},l.prototype.Qt=function(s,a,u,p){return d.bu.Qt(s,a,u,p)},l.instance=null,l}(d.Je);d.Hx=S}(Y||(Y={})),function(d){var L=function(){function S(h,l,s){this.ya=-1,this.Rd=h,this.MT=l,this.nd=s}return S.prototype.next=function(){var h=this.Rd.next();return h!=null?(this.ya=this.Rd.La(),d.bu.zh(h,this.MT,this.nd)):null},S.prototype.La=function(){return this.ya},S.prototype.qe=function(){},S}();d.yL=L}(Y||(Y={})),function(d){var L=function(){function h(){}return h.prototype.reset=function(){this.ph=this.xk=-1,this.us=this.kq=!1},h.prototype.AQ=function(l,s,a){for(l.Vb(s,a);l.Ha();){var u=l.ha();if((u=u.Qb())!=0)return l.wb()}for(l.Vb(s,a);l.Ez();)if((u=(u=l.li()).Qb())!=0)return l.wb();return-1},h.prototype.BQ=function(l,s){for(l.Vb(s,-1);l.Ez();)if(l.li().Qb()!=0)return l.wb();return-1},h.prototype.zQ=function(l,s){for(l.Vb(s,-1),l.ha();l.Ha();)if(l.ha().Qb()!=0)return l.wb();return-1},h.prototype.yQ=function(l,s,a,u){if(this.xk=this.AQ(s,a,u),this.xk!=-1){s.Vb(this.xk,-1);var p=s.ha(),f=p.hc(p.fe(l,!1));if(a=d.h.yc(f,l),(u=new d.h).L(f),u.sub(p.ac()),(f=new d.h).L(l),f.sub(p.ac()),this.kq=0>u.wi(f),this.ph=this.zQ(s,this.xk),this.ph!=-1){s.Vb(this.ph,-1);var g=(p=s.ha()).fe(l,!1);g=p.hc(g);var b=d.h.yc(g,l);b>a?this.ph=-1:(u.L(g),u.sub(p.ac()),f.L(l),f.sub(p.ac()),this.us=0>u.wi(f))}this.ph==-1&&(this.ph=this.BQ(s,this.xk),this.ph!=-1&&(s.Vb(this.ph,-1),g=(p=s.ha()).fe(l,!1),g=p.hc(g),(b=d.h.yc(g,l))>a?this.ph=-1:(u.L(g),u.sub(p.ac()),f.L(l),f.sub(p.ac()),this.us=0>u.wi(f),l=this.xk,this.xk=this.ph,this.ph=l,l=this.kq,this.kq=this.us,this.us=l)))}},h.prototype.cO=function(l,s,a,u,p){return a=a.Ga(),this.yQ(l,a,u,p),this.xk!=-1&&this.ph==-1?this.kq:this.xk!=-1&&this.ph!=-1?this.kq==this.us?this.kq:(a.Vb(this.xk,-1),l=a.ha().kg(),a.Vb(this.ph,-1),s=a.ha().kg(),0<=l.wi(s)):s},h}(),S=function(h){function l(){return h!==null&&h.apply(this,arguments)||this}return Bt(l,h),l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.prototype.getType=function(){return 3},l.prototype.nz=function(s,a,u){var p;if(p===void 0&&(p=!1),s.B())return new d.$l;a=a.D();var f=s,g=s.getType();switch(g==197&&((f=new d.Da).ad(s,!1),g=1736),g){case 33:return this.xI(f,a);case 550:return this.jI(f,a);case 1607:case 1736:return this.bU(f,a,u,p);default:throw d.i.fa("not implemented")}},l.prototype.oz=function(s,a){if(s.B())return new d.$l;a=a.D();var u=s,p=s.getType();switch(p==197&&((u=new d.Da).ad(s,!1),p=1736),p){case 33:return this.xI(u,a);case 550:case 1607:case 1736:return this.jI(u,a);default:throw d.i.fa("not implemented")}},l.prototype.pz=function(s,a,u,p){if(0>p)throw d.i.N();if(s.B())return[];a=a.D();var f=s,g=s.getType();switch(g==197&&((f=new d.Da).ad(s,!1),g=1736),g){case 33:return this.TU(f,a,u,p);case 550:case 1607:case 1736:return this.tU(f,a,u,p);default:throw d.i.fa("not implemented")}},l.prototype.bU=function(s,a,u,p){if(s.getType()==1736&&u&&(u=new d.l,s.A(u),u=d.ta.Wd(null,u,!1),(p?d.hd.Yd(s,a,0):d.hd.Yd(s,a,u))!=0)){var f=new d.$l(a,0,0);return p&&f.WJ(!0),f}var g=s.Ga();f=new d.h;for(var b=u=-1,x=17976931348623157e292,T=0;g.$a();)for(;g.Ha();){var M=g.ha();M=M.hc(M.fe(a,!1));var C=d.h.yc(M,a);C<x?(T=1,f=M,u=g.wb(),b=g.gb,x=C):C==x&&T++}return f=new d.$l(f,u,Math.sqrt(x)),p&&(g.Vb(u,b),M=g.ha(),p=0>d.h.Uq(a,M.ac(),M.wc()),1<T&&((T=new L).reset(),p=T.cO(a,p,s,u,b)),f.WJ(p)),f},l.prototype.xI=function(s,a){return s=s.D(),a=d.h.tb(s,a),new d.$l(s,0,a)},l.prototype.jI=function(s,a){for(var u=s.ub(0),p=s.I(),f=s=0,g=0,b=17976931348623157e292,x=0;x<p;x++){var T=new d.h;u.tc(2*x,T);var M=d.h.yc(T,a);M<b&&(f=T.x,g=T.y,s=x,b=M)}return(a=new d.$l).ey(f,g,s,Math.sqrt(b)),a},l.prototype.TU=function(s,a,u,p){return p==0?[]:(u*=u,s=s.D(),(a=d.h.yc(s,a))<=u?(u=[],(p=new d.$l).ey(s.x,s.y,0,Math.sqrt(a)),u[0]=p):u=[],u)},l.prototype.tU=function(s,a,u,p){if(p==0)return[];var f=s.ub(0),g=s.I();s=[],u*=u;for(var b=0;b<g;b++){var x=f.read(2*b),T=f.read(2*b+1),M=a.x-x,C=a.y-T;(M=M*M+C*C)<=u&&((C=new d.$l).ey(x,T,b,Math.sqrt(M)),s.push(C))}return a=s.length,s.sort(function(O,F){return O.Ka<F.Ka?-1:O.Ka==F.Ka?0:1}),p>=a||(s.length=p),s.slice(0)},l.instance=null,l}(d.Je);d.Ix=S}(Y||(Y={})),function(d){var L=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Bt(h,S),h.prototype.getType=function(){return 4},h.prototype.V=function(l,s,a,u,p){return d.am.yB(l,s,a,u,p)},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.Iu=function(l){return d.Vt.wy(l)},h.prototype.wn=function(l,s,a){d.Vt.CD(l,s,a)},h.instance=null,h}(d.Je);d.zL=L}(Y||(Y={})),function(d){var L=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Bt(h,S),h.prototype.getType=function(){return 33},h.prototype.V=function(l,s,a,u,p){return l===1073741824?!d.ud.zB(s,a,u,4,p):d.ud.zB(s,a,u,l,p)},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.Iu=function(l){return d.Vt.wy(l)},h.prototype.wn=function(l,s,a){d.Vt.CD(l,s,a)},h.instance=null,h}(d.Je);d.dj=L}(Y||(Y={})),function(d){var L=function(){function S(h,l,s,a){if(this.nd=a,this.rT=s,this.ya=-1,h==null)throw d.i.N();this.yk=h,this.Mj=l}return S.prototype.next=function(){var h;if((h=this.yk.next())!=null){if(this.ya=this.yk.La(),this.nd!=null&&!this.nd.progress(-1,-1))throw d.i.fu("user_canceled");return this.eC(h)}return null},S.prototype.La=function(){return this.ya},S.prototype.eC=function(h){if(h==null)throw d.i.N();return d.Jx.cK(h,this.Mj,this.rT,this.nd)},S.prototype.qe=function(){},S}();d.AL=L}(Y||(Y={})),function(d){var L=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Bt(h,S),h.prototype.getType=function(){return 26},h.prototype.V=function(l,s,a,u){return l instanceof d.aa?(l=new d.Zc(l),this.V(l,s,a,u).next()):new d.AL(l,s,a,u)},h.prototype.rs=function(l,s,a,u,p){return 0<(u!==void 0?d.Jx.rs(l,s,a,u,p):d.Jx.rs(l,s,!1,null,a))},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.instance=null,h}(d.Je);d.Yl=L}(Y||(Y={})),function(d){var L=function(){function p(){this.yq=0}return p.prototype.nX=function(f){this.yq&=-2,this.yq|=f?1:0},p.prototype.Wp=function(){return!!(1&this.yq)},p.prototype.XF=function(){return this.Wp()?0:1},p}();d.xY=L;var S=function(){},h=function(p,f,g,b){this.x=p,this.y=f,this.Ai=g,this.xm=b},l=function(){function p(f){this.Be=f}return p.prototype.compare=function(f,g,b){return f=f.ja(b),g=this.Be.lf.read(2*g),0>(g-=f=this.Be.lf.read(2*f))?-1:0<g?1:0},p}(),s=function(){function p(f){this.Be=f}return p.prototype.compare=function(f,g,b){g=this.Be.hb[g],f=this.Be.hb[f.ja(b)];var x=g.Wp(),T=f.Wp();b=g.ne.Pe(this.Be.Mo,0);var M=f.ne.Pe(this.Be.Mo,0);return b==M&&((x=.5*((b=Math.min(x?g.ne.na:g.ne.la,T?f.ne.na:f.ne.la))-this.Be.Mo)+this.Be.Mo)==this.Be.Mo&&(x=b),b=g.ne.Pe(x,0),M=f.ne.Pe(x,0)),b<M?-1:b>M?1:0},p}(),a=function(){function p(f,g){this.YI=new d.h,this.parent=f,this.dS=g}return p.prototype.nr=function(f,g,b){var x=this.parent,T=this.dS;b.Vd(f,g,function(M,C){return x.Mh(M,C,T)})},p.prototype.$p=function(f){return f=this.parent.gi.get(f),this.parent.lf.tc(2*(f>>1),this.YI),this.YI.y+(1&f?this.parent.Oj:-this.parent.Oj)},p}(),u=function(){function p(f,g,b,x,T){this.nH=f.description,this.X=f,this.Qg=g,this.Oj=d.ta.kj(this.Qg,f,!1),this.Bo=d.ta.kj(this.Qg,f,!0),this.xA=b,this.oT=this.nH.Aa,this.hb=[],this.po=[],this.mh=new d.jp,this.fb=new d.Yj,this.ke=new d.Md,this.ZG=this.ql=T}return p.prototype.eT=function(){return this.ZG=!0,(!d.aa.Hc(this.X.getType())||this.GE()&&this.DE(!1))&&this.mO()?d.aa.Hc(this.X.getType())?this.pO()?this.X.getType()==1607?this.rO()?2:0:this.sO()?this.tO():0:0:2:0},p.prototype.kC=function(f,g){var b=this.lf.read(2*f);f=this.lf.read(2*f+1);var x=this.lf.read(2*g);g=this.lf.read(2*g+1);var T=!d.Yt.Cv(b,f,x,g,this.Oj*this.Oj);return T||this.X.Db()!=0&&b==x&&f==g},p.prototype.GE=function(){for(var f=this.X,g=f.xf?3:2,b=0,x=f.da();b<x;b++)if(f.Ja(b)<g)return this.ke=new d.Md(1,b,0),!1;return!0},p.prototype.DE=function(f){var g=this.X,b=g.Ga(),x=g.hasAttribute(1);for(g=x?d.ta.wE(this.Qg,g,!1):0;b.$a();)for(;b.Ha();){var T=b.ha();if(!(T.Qb()>this.Oj)){if(f&&x){var M=T.wv(1,0);if(T=T.wv(1,0),Math.abs(T-M)>g)continue}return this.ke=new d.Md(2,b.wb(),-1),!1}}return!0},p.prototype.mO=function(){var f=this.X,g=null;d.aa.Hc(this.X.getType())&&(g=this.X);var b=(this.ZG||this.ql)&&g!=null,x=f.I();this.lf=f.ub(0),this.gi=new d.ia(0),this.gi.Jb(2*x),this.fi=new d.ia(0),this.fi.Jb(2*x),b&&(this.Fl==null&&(this.Fl=new d.ia(0)),this.Fl.Jb(x));for(var T=f=0;T<x;T++)if(this.gi.add(2*T),this.gi.add(2*T+1),this.fi.add(2*T),this.fi.add(2*T+1),b){for(;T>=g.Vc(f);)f++;this.Fl.add(f)}for(new d.Xt().sort(this.fi,0,2*x,new a(this,b)),this.fb.clear(),this.fb.Vo(new l(this)),this.fb.De(x),g=0,x*=2;g<x;g++)if(b=this.fi.get(g),b=(f=this.gi.get(b))>>1,1&f){if(f=this.fb.search(b,-1),T=this.fb.we(f),M=this.fb.lb(f),this.fb.vd(f,-1),T!=-1&&M!=-1&&!this.kC(this.fb.ja(T),this.fb.ja(M)))return this.ke=new d.Md(3,this.fb.ja(T),this.fb.ja(M)),!1}else{if(f=this.fb.addElement(b,-1),(T=this.fb.we(f))!=-1&&!this.kC(this.fb.ja(T),b))return this.ke=new d.Md(3,b,this.fb.ja(T)),!1;var M=this.fb.lb(f);if(M!=-1&&!this.kC(this.fb.ja(M),b))return this.ke=new d.Md(3,b,this.fb.ja(M)),!1}return!0},p.prototype.pO=function(){return 10>this.X.I()?this.nO():this.oO()},p.prototype.oO=function(){var f=new d.gd;f.Ib(this.X);var g=new d.Md;return!d.$t.kI(!1,f,this.Oj,g,this.nd)||(g.Jo=f.Ua(g.Jo),g.Ko=f.Ua(g.Ko),this.ke.Wt(g),!1)},p.prototype.nO=function(){var f=this.X,g=f.Ga();for(f=f.Ga();g.$a();)for(;g.Ha();){var b=g.ha();if(!g.Qn()||!g.$S()){f.BW(g);do for(;f.Ha();){var x=f.ha();if((x=b.zr(x,this.Oj,!0))!=0)return this.ke=new d.Md(x==2?5:4,g.wb(),f.wb()),!1}while(f.$a())}}return!0},p.prototype.sO=function(){var f=this.X;this.hb.length=0,this.po.length=0,this.Zf=f.Ga(),this.Zf.JB();var g=new d.ia(0);g.Jb(10);var b=NaN,x=0,T=0;for(f=2*f.I();T<f;T++){var M=this.fi.get(T);if(!(1&(M=this.gi.get(M)))){M>>=1;var C=this.lf.read(2*M),O=this.lf.read(2*M+1);if(g.size!=0&&(C!=b||O!=x)){if(!this.RI(g))return!1;g!=null&&g.clear(!1)}g.add(M),b=C,x=O}}return!!this.RI(g)},p.prototype.rO=function(){for(var f=this.X,g=Array(f.da()),b=0,x=f.da();b<x;b++)g[b]=f.Nn(b);x=new S;var T=new d.h;b=this.fi.get(0);var M=(b=this.gi.get(b))>>1;this.lf.tc(2*M,T);var C=g[b=this.Fl.get(M)],O=f.Ba(b),F=f.Vc(b)-1;x.el=M==O||M==F,x.ny=this.ql?!C&&x.el:x.el,x.Ai=b,x.x=T.x,x.y=T.y,x.xm=M;for(var P=new S,G=1,q=this.fi.size;G<q;G++)if(b=this.fi.get(G),!(1&(b=this.gi.get(b)))){M=b>>1,this.lf.tc(2*M,T),(b=this.Fl.get(M))!=x.Ai&&(C=g[b],O=f.Ba(b),F=f.Vc(b)-1);var V=M==O||M==F,Z=this.ql?!C&&x.el:x.el;if(P.x=T.x,P.y=T.y,P.Ai=b,P.xm=M,P.ny=Z,P.el=V,P.x==x.x&&P.y==x.y){if(this.ql){if(!(P.ny&&x.ny||P.Ai==x.Ai&&(P.el||x.el)))return this.ke=new d.Md(8,P.xm,x.xm),!1}else if(!P.el||!x.el)return this.ke=new d.Md(5,P.xm,x.xm),!1}b=x,x=P,P=b}return!0},p.prototype.JE=function(){for(var f=this.X,g=[],b=-1,x=!1,T=0,M=f.da();T<M;T++)f.Ev(T)&&(x=!1,b++,T<M-1&&(f.Ev(T+1)||(x=!0))),g[T]=x?b:-1;x=new d.h,T=this.fi.get(0);var C=(T=this.gi.get(T))>>1;this.lf.tc(2*C,x),T=this.Fl.get(C),b=new h(x.x,x.y,T,C,g[T]),f=[];var O=1;for(M=this.fi.size;O<M;O++)if(T=this.fi.get(O),!(1&(T=this.gi.get(T)))){if(C=T>>1,this.lf.tc(2*C,x),T=this.Fl.get(C),(T=new h(x.x,x.y,T,C,g[T])).x==b.x&&T.y==b.y){if(T.Ai==b.Ai)return this.ke=new d.Md(9,T.xm,b.xm),!1;0<=g[T.Ai]&&g[T.Ai]==g[b.Ai]&&(f.length!=0&&f[f.length-1]==b||f.push(b),f.push(T))}b=T}if(f.length==0)return!0;for(T=new d.jp(!0),d.O.$u(g,-1),x=-1,(O=new d.h).Rc(),b=0,M=f.length;b<M;b++){(C=f[b]).x==O.x&&C.y==O.y||(x=T.Ph(0),O.x=C.x,O.y=C.y);var F=g[C.Ai];F==-1&&(F=T.Ph(2),g[C.Ai]=F),T.addElement(F,x),T.addElement(x,F)}for((M=new d.ia(0)).Jb(10),b=T.je;b!=-1;b=T.qz(b))if(!(1&(f=T.PF(b)))&&2&f){for(f=-1,M.add(b),M.add(-1);0<M.size;){if(x=M.Fc(),M.If(),O=M.Fc(),M.If(),1&(C=T.PF(O))){f=2&C?O:x;break}for(T.fX(O,1|C),C=T.rc(O);C!=-1;C=T.lb(C))(F=T.getData(C))!=x&&(M.add(F),M.add(O))}if(f!=-1){for(T=-1,b=0,M=g.length;b<M;b++)if(g[b]==f){T=b;break}return this.ke=new d.Md(10,T,-1),!1}}return!0},p.prototype.tO=function(){var f=this.X;if(0>=f.Ke())return this.ke=new d.Md(6,f.da()==1?1:-1,-1),0;if(f.da()==1)return this.ql&&!this.JE()?0:2;this.to=d.ia.qf(f.da(),0),this.JA=d.ia.qf(f.da(),-1);for(var g=-1,b=0,x=0,T=f.da();x<T;x++){var M=f.Ir(x);if(this.to.write(x,0>M?0:256),0<M)g=x,b=M;else{if(M==0)return this.ke=new d.Md(6,x,-1),0;if((0>g||b<Math.abs(M))&&(this.ke=new d.Md(7,x,-1),this.ql))return 0;this.JA.write(x,g)}}for(this.dt=f.da(),this.Om=new d.ia(0),this.Om.Jb(10),T=f.I(),this.Mo=NaN,(f=new d.ia(0)).Jb(10),this.Qq=d.ia.qf(T,-1),this.Hw=d.ia.qf(T,-1),this.zj!=null?this.zj.clear(!1):this.zj=new d.ia(0),this.zj.Jb(10),this.fb.clear(),this.fb.Vo(new s(this)),g=0,T*=2;0<this.dt&&g<T;g++)if(b=this.fi.get(g),!(1&(b=this.gi.get(b)))){if(b>>=1,(x=this.lf.read(2*b+1))!=this.Mo&&f.size!=0){if(!this.ut(f))return 0;f!=null&&f.clear(!1)}f.add(b),this.Mo=x}return 0<this.dt&&!this.ut(f)?0:this.ql?this.ke.Jj==0&&this.JE()?2:0:this.ke.Jj==0?2:1},p.prototype.RI=function(f){if(f.size==1)return!0;for(var g=0,b=f.size;g<b;g++){var x=f.get(g);this.Zf.Vb(x);var T=this.Zf.li();this.hb.push(this.Su(T,x,this.Zf.gb,!0)),this.Zf.ha(),T=this.Zf.ha(),this.hb.push(this.Su(T,x,this.Zf.gb,!1))}var M=this;for(this.hb.sort(function(F,P){return M.XP(F,P)}),(x=this.mh.je)==-1&&(x=this.mh.Ph(0)),this.mh.fn(this.hb.length),g=0,b=this.hb.length;g<b;g++)this.mh.addElement(x,g);g=!0;for(var C=b=-1;g&&(g=!1,(T=this.mh.rc(x))!=-1);)for(var O=this.mh.lb(T);O!=-1;)if(b=this.mh.getData(T),C=this.mh.getData(O),(b=this.hb[b].Io)!=(C=this.hb[C].Io))T=O,O=this.mh.lb(T);else if(g=!0,this.mh.jd(x,T),T=this.mh.we(O),(O=this.mh.jd(x,O))==-1||T==-1)break;if(g=this.mh.bs(x),this.mh.LE(x),0<g)return this.ke=new d.Md(5,b,C),!1;for(g=0,b=f.size;g<b;g++)this.vB(this.hb[g]);return this.hb.length=0,!0},p.prototype.ut=function(f){for(var g=0,b=f.size;g<b;g++){var x=f.get(g),T=this.Qq.read(x);if(T!=-1){var M=this.fb.ja(T);this.zj.add(M),this.fb.vd(T,-1),this.vB(this.hb[M]),this.hb[M]=null,this.Qq.write(x,-1)}(T=this.Hw.read(x))!=-1&&(M=this.fb.ja(T),this.zj.add(M),this.fb.vd(T,-1),this.vB(this.hb[M]),this.hb[M]=null,this.Hw.write(x,-1))}for(g=0,b=f.size;g<b;g++){if(x=f.get(g),this.Zf.Vb(x),(T=this.Zf.li()).na>T.la){var C=this.Zf.wb(),O=this.Su(T,x,this.Zf.gb,!0);0<this.zj.size?(M=this.zj.Fc(),this.zj.If(),this.hb[M]=O):(M=this.hb.length,this.hb.push(O)),T=this.fb.addElement(M,-1),this.Qq.read(C)==-1?this.Qq.write(C,T):this.Hw.write(C,T),!(3&this.to.read(this.Zf.gb))&&this.Om.add(T)}this.Zf.ha(),(T=this.Zf.ha()).na<T.la&&(C=this.Zf.ik(),O=this.Su(T,x,this.Zf.gb,!1),0<this.zj.size?(M=this.zj.Fc(),this.zj.If(),this.hb[M]=O):(M=this.hb.length,this.hb.push(O)),T=this.fb.addElement(M,-1),this.Qq.read(C)==-1?this.Qq.write(C,T):this.Hw.write(C,T),!(3&this.to.read(this.Zf.gb))&&this.Om.add(T))}for(g=0,b=this.Om.size;g<b&&0<this.dt;g++)if(T=this.Om.get(g),!(3&this.to.read(this.hb[this.fb.ja(T)].IA))){f=-1,x=this.fb.we(T);var F=T;O=null,M=-1;for(var P=0;x!=-1&&(M=this.fb.ja(x),M=(O=this.hb[M]).IA,!(3&(P=this.to.read(M))));)F=x,x=this.fb.we(x);x==-1?(C=1,x=F):(f=(3&P)==1?M:this.JA.read(M),C=O.XF()!=0?0:1,x=this.fb.lb(x));do{if(M=this.fb.ja(x),M=(O=this.hb[M]).IA,!(3&(F=this.to.read(M)))){if(C!=O.XF())return this.ke=new d.Md(6,M,-1),!1;if(F=252&F|(P=C==0||O.Wp()?2:1),this.to.write(M,P),P==2&&this.ke.Jj==0&&this.JA.read(M)!=f&&(this.ke=new d.Md(7,M,-1),this.ql))return!1;if(this.dt--,this.dt==0)return!0}(3&F)==1&&(f=M),F=x,x=this.fb.lb(x),C=C!=0?0:1}while(F!=T)}return this.Om!=null?this.Om.clear(!1):this.Om=new d.ia(0),!0},p.prototype.Su=function(f,g,b,x){if(f.getType()!=322)throw d.i.Qa();return(f=this.sP(f)).Io=g,f.IA=b,f.yq=0,f.nX(x),f},p.prototype.sP=function(f){if(0<this.po.length){var g=this.po[this.po.length-1];--this.po.length,f.copyTo(g.ne)}else(g=new L).ne=d.SC.jg(f);return g},p.prototype.vB=function(f){f.ne.getType()==322&&this.po.push(f)},p.prototype.kU=function(){for(var f=this.X.I(),g=new d.ia(0),b=0;b<f;b++)g.add(b);var x=this;for(g.Vd(0,f,function(T,M){return x.Ou(T,M)}),b=1;b<f;b++)if(this.Ou(g.get(b-1),g.get(b))==0)return this.ke=new d.Md(3,g.get(b-1),g.get(b)),0;return 2},p.prototype.JV=function(){return this.GE()&&this.DE(!0)?2:0},p.prototype.oV=function(){return this.eT()},p.prototype.pU=function(){for(var f=this.X.I(),g=new d.ia(0),b=0;b<f;b++)g.add(b);var x=this;g.Vd(0,f,function(F,P){return x.PO(F,P)});var T=Array(f);for(d.O.$u(T,!1),T[g.get(0)]=!0,b=1;b<f;b++){var M=g.get(b-1),C=g.get(b);this.Ou(M,C)==0?T[C]=!1:T[C]=!0}g=this.X.Ia(),M=this.X,C=0;var O=1;for(b=0;b<f;b++)T[b]?O=b+1:(C<O&&g.Fd(M,C,O),C=b+1);return C<O&&g.Fd(M,C,O),g.Ch(2,this.Bo),g},p.prototype.NV=function(){var f=this.X,g=f.Ga(),b=f.Ga(),x=this.X.Ia(),T=this.X,M=f.hasAttribute(1),C=M?d.ta.wE(this.Qg,f,!0):0,O=new d.ia(0),F=new d.ia(0);for(O.Jb(d.O.truncate(f.I()/2+1)),F.Jb(d.O.truncate(f.I()/2+1));g.$a();)if(b.$a(),!(2>f.Ja(g.gb))){b.EW();for(var P,G,q=!0;g.Ha();){var V=g.ha(),Z=b.li();if(g.wb()>b.wb())break;q&&(O.add(g.wb()),F.add(b.ik()),q=!1),G=O.Fc();var X=g.ik();if(1<X-G){var te=new d.h;te.uc(f.Na(G),f.Na(X)),P=te.length()}else P=V.Qb();G=F.Fc(),1<(X=b.wb())-G?((te=new d.h).uc(f.Na(G),f.Na(X)),G=te.length()):G=Z.Qb(),P>this.Bo?O.add(g.ik()):M&&(P=f.Uc(1,O.Fc(),0),V=V.gv(1,0),Math.abs(V-P)>C&&O.add(g.ik())),G>this.Bo?F.add(b.wb()):M&&(P=f.Uc(1,F.Fc(),0),V=Z.gv(1,0),Math.abs(V-P)>C&&F.add(b.wb()))}if(O.Fc()<F.Fc()?O.size>F.size?O.If():F.If():(O.Fc()!=F.Fc()&&F.If(),F.If()),2<=F.size+O.size){for(q=new d.Sa,Z=0,V=O.size;Z<V;Z++)T.ve(O.get(Z),q),Z==0?x.nf(q):x.lineTo(q);for(Z=F.size-1;0<Z;Z--)T.ve(F.get(Z),q),x.lineTo(q);T.dc(g.gb)?x.Ap():0<F.size&&(T.ve(F.get(0),q),x.lineTo(q))}O!=null&&O.clear(!1),F!=null&&F.clear(!1)}return x.Ch(2,this.Bo),x},p.prototype.rV=function(){return this.DX()},p.prototype.DX=function(){return this.X.getType()==1736&&this.X.In()==1?d.Fg.Mk(this.X,this.Bo,!0,!1,this.nd):(this.Hi=new d.gd,this.Hi.Ib(this.X),this.Hi.fd!=0&&(this.xA!=1&&d.Tk.V(this.Hi,this.Bo,this.nd,!0),this.X.getType()==1736&&d.rn.V(this.Hi,this.Hi.ld,this.xA,!1,this.nd)),this.X=this.Hi.Ne(this.Hi.ld),this.X.getType()==1736&&(this.X.fm(),this.X.Yo(0)),this.X.Ch(2,this.Bo),this.X)},p.rs=function(f,g,b,x,T){if(x!=null&&(x.Jj=0,x.Jo=-1,x.Ko=-1),f.B())return 1;var M=f.getType();if(M==33)return 1;var C=d.ta.kj(g,f,!1);if(M==197)return g=new d.l,f.A(g),g.Bi(C)?(x!=null&&(x.Jj=2,x.Jo=-1,x.Ko=-1),0):1;if(d.aa.yd(M))return(C=new d.Ta(f.description)).oc(f,!0),p.rs(C,g,b,x,T);var O=f.om(C);if((b=b?-1:O)!=-1)return b;if(g=new p(f,g,b,T,!1),M==550)b=g.kU();else if(M==1607)b=g.JV();else{if(M!=1736)throw d.i.Qa();b=g.oV()}return f.Ch(b,C),x!=null&&b==0&&x.Wt(g.ke),b},p.cK=function(f,g,b,x){if(f.B())return f;var T=f.getType();if(T==33)return f;var M=d.ta.kj(g,f,!1);if(T==197)return g=new d.l,f.A(g),g.Bi(M)?f.Ia():f;if(d.aa.yd(T))return(T=new d.Ta(f.description)).oc(f,!0),p.cK(T,g,b,x);if(M=f.om(M),(b=b?-1:M)==2)return f;if(f=new p(f,g,b,x,!1),T==550)f=f.pU();else if(T==1607)f=f.NV();else{if(T!=1736)throw d.i.Qa();f=f.rV()}return f},p.prototype.Mh=function(f,g,b){if(f==g)return 0;f=this.gi.get(f);var x=this.gi.get(g);g=f>>1;var T=x>>1,M=new d.h,C=new d.h;return this.lf.tc(2*g,M),M.y+=1&f?this.Oj:-this.Oj,this.lf.tc(2*T,C),C.y+=1&x?this.Oj:-this.Oj,(f=M.compare(C))==0&&b?0>(b=this.Fl.get(g)-this.Fl.get(T))?-1:0<b?1:0:f},p.prototype.Ou=function(f,g){if(f==g)return 0;var b=this.X,x=b.Na(f),T=b.Na(g);if(x.x<T.x)return-1;if(x.x>T.x)return 1;if(x.y<T.y)return-1;if(x.y>T.y)return 1;for(x=1;x<this.oT;x++){T=this.nH.kd(x);for(var M=d.ra.Va(T),C=0;C<M;C++){var O=b.Uc(T,f,C),F=b.Uc(T,g,C);if(O<F)return-1;if(O>F)return 1}}return 0},p.prototype.PO=function(f,g){var b=this.Ou(f,g);return b==0?f<g?-1:1:b},p.prototype.XP=function(f,g){if(f===g)return 0;var b=f.ne.kg();f.Wp()&&b.Sq(),f=g.ne.kg(),g.Wp()&&f.Sq(),g=b.qu();var x=f.qu();return x==g?(g=b.wi(f),Math.abs(g)<=8881784197001252e-31*(Math.abs(f.x*b.y)+Math.abs(f.y*b.x))&&(g--,g++),0>g?1:0<g?-1:0):g<x?-1:1},p}();d.Jx=u}(Y||(Y={})),function(d){var L=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Bt(h,S),h.prototype.getType=function(){return 30},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.V=function(l,s,a,u){return l instanceof d.aa?(l=new d.Zc(l),s=new d.Zc(s),this.V(l,s,a,u).next()):new d.BL(l,s,a,u)},h.ep=function(l,s,a,u){var p=l.Db(),f=s.Db();if(l.B()&&s.B())return p>f?l:s;if(l.B())return s;if(s.B())return l;var g=new d.l,b=new d.l,x=new d.l;return l.A(g),s.A(b),x.K(g),x.Zb(b),g=d.ta.Wd(a,x,!0),b=l.getType(),x=s.getType(),b==33&&x==33?h.aV(l,s,g):b!=x?0<p||0<f?p>f?l:s:b==550?h.iI(l,s,g):h.iI(s,l,g):d.Fg.ep(l,s,a,u)},h.aV=function(l,s,a){a=a*Math.sqrt(2)*1.00001,a*=a;var u=l.D(),p=s.D(),f=new d.de(l.description);return d.h.yc(u,p)>a&&(f.add(l),f.add(s)),f},h.iI=function(l,s,a){var u=l.ub(0),p=l.I(),f=s.D(),g=l.Ia();a=a*Math.sqrt(2)*1.00001;var b=new d.l;if(l.A(b),b.W(a,a),b.contains(f)){a*=a,b=!1;for(var x=[],T=0;T<p;T++)x[T]=!1;for(T=0;T<p;T++){var M=u.read(2*T),C=u.read(2*T+1);(M-=f.x)*M+(C-=f.y)*C<=a&&(b=!0,x[T]=!0)}if(b)for(T=0;T<p;T++)x[T]||g.Fd(l,T,T+1);else g.Fd(l,0,p),g.add(s)}else g.Fd(l,0,p),g.add(s);return g},h.instance=null,h}(d.Je);d.Kx=L}(Y||(Y={})),function(d){var L=function(){function S(h,l,s,a){this.ts=l==null,this.ya=-1,this.Rd=h,this.vg=s,this.NT=l.next(),this.Ub=a}return S.prototype.next=function(){return this.ts?null:(h=this.Rd.next())!=null?(this.ya=this.Rd.La(),d.Kx.ep(h,this.NT,this.vg,this.Ub)):null;var h},S.prototype.La=function(){return this.ya},S.prototype.qe=function(){},S}();d.BL=L}(Y||(Y={})),function(d){var L=function(){function l(){}return l.prototype.Fz=function(){this.$y=null,this.Ax=-1,this.AK=!1},l}(),S=function(){function l(){this.Gr=0,this.pj=[]}return l.prototype.pN=function(s){this.Gr+=s.Ax,this.pj.push(s)},l.prototype.TV=function(){this.Gr-=this.pj[this.pj.length-1].Ax,--this.pj.length},l.prototype.my=function(){return this.pj[this.pj.length-1]},l.prototype.Nb=function(s){return s===this},l}(),h=function(){function l(s,a,u){this.ya=-1,this.Ic=!1,this.AH=[!1,!1,!1,!1],this.uq=[0,0,0,0],this.jA=!1,this.zk=-1,this.iq=0,this.bo=-1,this.Do=[],this.Rd=s,this.vg=a,this.Ub=u}return l.dE=function(s){var a=[],u=0;for(s=Object.keys(s);u<s.length;u++)a.push(Number(s[u]));return a.sort(function(p,f){return p-f}),a},l.prototype.fG=function(s){var a=this.Do[s],u=l.dE(a)[0],p=a[u],f=p.my().$y;return p=p.my().AK,delete a[u],p&&(f=d.Yl.local().V(f,this.vg,!1,this.Ub),s==0&&f.getType()==33&&(s=new d.de(f.description),f.B()||s.add(f),f=s)),f},l.prototype.next=function(){if(this.Ic&&this.bo==this.zk)return null;for(;!this.qK(););if(this.zk==-1)return null;if(this.jA){for(this.bo++;;){if(this.bo>this.zk||0>this.bo)throw d.i.Qa();if(this.AH[this.bo])break}return this.ya++,this.fG(this.bo)}return this.ya=0,this.bo=this.zk,this.fG(this.zk)},l.prototype.La=function(){return this.ya},l.prototype.qK=function(){if(this.Ic)return!0;var s=null;if(this.Rd!=null&&(s=this.Rd.next())==null&&(this.Ic=!0,this.Rd=null),d.mp.zp(this.Ub),s!=null){var a=s.Db();this.AH[a]=!0,a>=this.zk&&!this.jA&&(this.ND(a,!1,s),a>this.zk&&!this.jA&&this.zW(a))}if(0<this.iq)for(a=0;a<=this.zk;a++)for(;1<this.uq[a]&&(s=this.FO(a)).length!=0;)s=d.Fg.VP(s,this.vg,this.Ub),this.ND(a,!0,s);return this.Ic},l.prototype.FO=function(s){for(var a=[],u=[],p=this.Do[s],f=l.dE(p),g=0;g<f.length;g++){var b=f[g],x=p[b];if(this.Ic||1e4<x.Gr&&1<x.pj.length){for(this.uq[s]-=x.pj.length,this.iq-=x.pj.length;0<x.pj.length;)a.push(x.my().$y),x.TV();u.push(b)}}for(g=0;g<u.length;g++)delete p[u[g]];return a},l.prototype.zW=function(s){for(var a=0;a<s;a++)this.Do[a]=[],this.iq-=this.uq[a],this.uq[a]=0},l.prototype.ND=function(s,a,u){var p=new L;if(p.Fz(),p.$y=u,u=l.eS(u),p.Ax=u,u=l.cS(u),s+1>this.Do.length)for(var f=0,g=Math.max(2,s+1);f<g;f++)this.Do.push([]);(f=this.Do[s][u])===void 0&&(f=new S,this.Do[s][u]=f),p.AK=a,f.pN(p),this.uq[s]++,this.iq++,this.zk=Math.max(this.zk,s)},l.cS=function(s){return 0<s?d.O.truncate(Math.log(s)/Math.log(4)+.5):0},l.eS=function(s){var a=s.getType();if(d.aa.xj(a))return s.I();if(a==33)return 1;if(a==197)return 4;if(d.aa.yd(a))return 2;throw d.i.Qa()},l.prototype.qe=function(){this.qK()},l}();d.DL=h}(Y||(Y={})),function(d){var L=function(S){function h(){return S!==null&&S.apply(this,arguments)||this}return Bt(h,S),h.prototype.getType=function(){return 1},h.prototype.V=function(l,s,a,u){return u===void 0?new d.DL(l,s,a):this.gQ(l,s,a,u)},h.prototype.gQ=function(l,s,a,u){return l=new d.Zc([l,s]),this.V(l,a,u).next()},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.instance=null,h}(d.Je);d.Gh=L}(Y||(Y={})),function(d){var L,S;(S=L||(L={}))[S.nextPath=0]="nextPath",S[S.nextSegment=1]="nextSegment",S[S.iterate=2]="iterate",L=function(){function h(l,s,a,u){this.Ts=new d.l,this.GT=l,this.HT=s,this.mq=u,this.uo=-1,this.rl=!1;var p=l.Bb;p!=null&&(p=u?p.zo:p.Fb)!=null&&(this.Ic=!1,this.qa=a,this.Fb=p,this.xw=this.Fb.getIterator(),this.nq=this.rl=!0,this.Xb=0,u?this.uo=s.da():this.sd=s.Ga()),this.rl||(p=s.Bb)!=null&&(p=u?p.zo:p.Fb)!=null&&(this.Ic=!1,this.qa=a,this.Fb=p,this.xw=this.Fb.getIterator(),this.rl=!0,this.nq=!1,this.Xb=0,u?this.uo=l.da():this.sd=l.Ga()),this.rl||(this.ci=u?d.ta.mR(l,s,a,1<=l.om(0),1<=s.om(0)):d.ta.lR(l,s,a))}return h.prototype.next=function(){if(this.rl){if(this.Ic)return!1;for(var l=!0;l;)switch(this.Xb){case 0:l=this.xU();break;case 1:l=this.yU();break;case 2:l=this.Uz();break;default:throw d.i.fa("internal error")}return!this.Ic}return this.ci!=null&&this.ci.next()},h.prototype.nl=function(){return this.rl?this.nq?this.Fb.ja(this.Fs):this.mq?this.uo:this.sd.wb():this.ci.nl(this.ci.Vf)},h.prototype.hl=function(){return this.rl?this.nq?this.mq?this.uo:this.sd.wb():this.Fb.ja(this.Fs):this.ci.hl(this.ci.Af)},h.prototype.uz=function(){if(!this.mq)throw d.i.fa("internal error");return this.rl?this.nq?this.Fb.GF(this.Fs):this.Ts:this.ci.uz(this.ci.Vf)},h.prototype.az=function(){if(!this.mq)throw d.i.fa("internal error");return this.rl?this.nq?this.Ts:this.Fb.GF(this.Fs):this.ci.az(this.ci.Af)},h.prototype.xU=function(){return this.mq?--this.uo==-1?(this.Ic=!0,!1):(this.nq?this.HT.Rj(this.uo,this.Ts):this.GT.Rj(this.uo,this.Ts),this.xw.Xi(this.Ts,this.qa),this.Xb=2,!0):this.sd.$a()?(this.Xb=1,!0):(this.Ic=!0,!1)},h.prototype.yU=function(){if(!this.sd.Ha())return this.Xb=0,!0;var l=this.sd.ha();return this.xw.Uo(l,this.qa),this.Xb=2,!0},h.prototype.Uz=function(){return this.Fs=this.xw.next(),this.Fs==-1&&(this.Xb=this.mq?0:1,!0)},h}(),d.Zl=L}(Y||(Y={})),function(d){(d=d.OL||(d.OL={}))[d.enumClosed=1]="enumClosed",d[d.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",d[d.enumOGCStartPolygon=4]="enumOGCStartPolygon",d[d.enumCalcMask=4]="enumCalcMask"}(Y||(Y={})),function(d){d.QC=function(){function L(){}return L.tb=function(S,h,l,s,a,u,p,f,g){var b=[0,0,0],x=[0,0,0],T=[0,0,0],M=[0,0,0,0],C=new d.ga(0),O=new d.ga(0),F=new d.ga(0);if(p!=null||f!=null||g!=null)if(d.s.ti(h))d.Yg.tb(S,l,s,a,u,p,f,g);else{a=d.F.ba(a),l=d.F.ba(l);var P=d.F.ba(a-l);if(d.s.Y(s,u)&&(d.s.Y(l,a)||d.s.Y(d.s.P(s),1.570796326794897)))p!=null&&(p.u=0),f!=null&&(f.u=0),g!=null&&(g.u=0);else{if(d.s.Y(s,-u)){if(d.s.Y(d.s.P(s),1.570796326794897))return p!=null&&(p.u=2*d.F.Ah(S,h)),f!=null&&(f.u=0<s?d.F.ba(3.141592653589793-d.F.ba(a)):d.F.ba(a)),void(g!=null&&(g.u=0<s?d.F.ba(a):d.F.ba(3.141592653589793-d.F.ba(a))));d.s.Y(d.s.P(P),3.141592653589793)&&(p!=null&&(p.u=2*d.F.Ah(S,h)),f!=null&&(f.u=0),g!=null&&(g.u=0))}else if(d.s.Y(d.s.P(s),1.570796326794897)||d.s.Y(d.s.P(u),1.570796326794897)||d.s.Y(l,a)||d.s.Y(d.s.P(P),3.141592653589793)||d.s.Cd(s))return void d.Wk.tb(S,h,l,s,a,u,p,f,g);var G=Math.sqrt(1-h);a=d.F.ba(a-l),l=0,d.F.cl(1,h,s,l,0,C,O,F),b[0]=C.u,b[1]=O.u,b[2]=F.u,d.F.cl(1,h,u,a,0,C,O,F),x[0]=C.u,x[1]=O.u,x[2]=F.u,T[0]=0,T[1]=0,T[2]=-1*h*d.F.n(1,h,s)*Math.sin(s),0>a?d.F.Wq(T,x,b,M,0):d.F.Wq(T,b,x,M,0),O=[0,0,0],F=[0,0,0];var q=[0,0,0];b=[0,0,0],C=[0,0,0];var V=Math.acos(M[2]/1),Z=1-h,X=Math.tan(V),te=1+X*X/Z,oe=2*T[2]*X/Z;for(Z=(-oe+(X=Math.sqrt(oe*oe-4*te*(T[2]*T[2]/Z-1))))/(te*=2),oe=(-oe-X)/te,X=Math.tan(V),V=(Z+oe)/2,T=((te=X*Z+T[2])+(X*oe+T[2]))/2,X=d.F.gp(Z-V,te-T),Z=T/G*1.570796326794897,oe=0;100>oe&&(te=(te=d.F.w(h,Z))*te/Math.cos(Z)*(Math.sin(Z)-T*te/(1-h)),!d.s.Cd(te));oe++)Z-=te;T=d.F.n(1,h,Z)*Math.cos(Z),X=1-X/(T=Math.sqrt((T-V)*(T+V))),X*=2-X,te=d.F.on(O),V=d.F.on(F),Z=d.F.on(q);var me=d.F.St(q,O);oe=d.F.St(q,F),d.F.zx(q,O,b),d.F.zx(q,F,C),O=Math.acos(me/(Z*te)),F=Math.acos(oe/(Z*V)),F*=d.s.Mb(1,d.F.St(b,C)),(1.570796326794897<=d.s.P(O)&&1.570796326794897<=d.s.P(F)||3.141592653589793<d.s.P(O-F))&&(O=(3.141592653589793-d.s.P(O))*d.s.Mb(1,O),F=(3.141592653589793-d.s.P(F))*d.s.Mb(1,F)),b=d.F.Qj(X,F),C=d.F.q(T,X,d.F.Qj(X,O)),b=d.F.q(T,X,b),b=d.s.P(b-C)*S,O=new d.ga(0),F=new d.ga(0),q=M[1]/1,q*=-d.s.Mb(1,P),C=Math.acos(q)*d.s.Mb(1,P),L.rf(S,h,l,s,b,C,O,F),d.s.Y(a,O.u)&&d.s.Y(u,F.u)||(X=d.F.gp(d.F.ba(a-O.u),u-F.u),L.rf(S,h,l,s,b,d.F.ba(C+3.141592653589793),O,F),(te=d.F.gp(d.F.ba(a-O.u),u-F.u))<X&&(C=d.F.ba(C+3.141592653589793))),O=[0,0,0,0],F=[0,0,0,0],X=[0,0,0],S=[0,0,0],l=[0,0,0],s=[0,0,0],q=[0,0,0],(T=[0,0,0])[0]=0,T[1]=0,T[2]=G,X[0]=0,X[1]=0,X[2]=0,d.F.Wq(X,T,x,O,0),d.s.Cd(u)?(S[0]=x[0],S[1]=x[1],S[2]=1,l[0]=1*Math.cos(a)-1*Math.sin(a),l[1]=1*Math.sin(a)+1*Math.cos(a)):(h=d.F.n(1,h,u)*Math.cos(u),S[0]=0,S[1]=0,x[2]+=Math.tan(1.570796326794897-d.s.P(u))*h*d.s.Mb(1,u),l[0]=h*Math.cos(a)-h*Math.sin(a),l[1]=h*Math.sin(a)+h*Math.cos(a)),l[2]=x[2],d.F.Wq(x,l,S,F,1),d.F.zx(F,O,s),d.F.zx(F,M,q),q=d.F.St(s,q)/(d.F.on(s)*d.F.on(q)),q*=d.s.Mb(1,P),a=Math.acos(q)*-d.s.Mb(1,P),(0<C&&0<a||0>C&&0>a)&&(a=d.F.ba(a+3.141592653589793)),p!=null&&(p.u=b),f!=null&&(f.u=C),g!=null&&(g.u=a)}}},L.rf=function(S,h,l,s,a,u,p,f){var g=[0,0,0],b=[0,0,0],x=[0,0,0],T=[0,0,0],M=[0,0,0],C=[0,0,0],O=[0,0,0],F=[0,0,0,0],P=new d.ga(0),G=new d.ga(0),q=new d.ga(0),V=new d.ga(0),Z=new d.ga(0),X=new d.ga(0);if(p!=null&&f!=null)if(d.s.ti(h))d.Yg.rf(S,l,s,a,u,p,f);else if(d.s.Cd(a))p!=null&&(p.u=l),f!=null&&(f.u=s);else if(u=d.F.ba(u),0>a&&(a=d.s.P(a),u=d.F.ba(u+3.141592653589793)),l=d.F.ba(l),s=d.F.ba(s),1.570796326794897<d.s.P(s)&&(l=d.F.ba(l+3.141592653589793),s=d.s.Mb(3.141592653589793,s)-s),d.s.Y(d.s.P(s),1.570796326794897)||d.s.Cd(s)||d.s.Cd(u)||d.s.Y(d.s.P(u),3.141592653589793))d.Wk.rf(S,h,l,s,a,u,p,f);else{var te=Math.sqrt(1-h);for(S=a/S,d.F.cl(1,h,s,0,0,V,Z,X),g[0]=V.u,g[1]=Z.u,g[2]=Z.u,O[0]=0,O[1]=0,O[2]=-1*h*d.F.n(1,h,s)*Math.sin(s),V=d.F.n(1,h,s),Z=d.F.ba(1.570796326794897-u),X=Math.sin(Z),a=Math.cos(s),s=Math.sin(s),M[0]=V*a-s*X,M[1]=Math.cos(Z),M[2]=(1-h)*V*s+a*X,0>u?d.F.Wq(O,M,g,F,0):d.F.Wq(O,g,M,F,0),g=Math.acos(F[2]/1),F=Math.atan2(-F[1],-F[0]),s=1-h,Z=1+(M=Math.tan(g))*M/s,s=(-(V=2*O[2]*M/s)+(M=Math.sqrt(V*V-4*Z*(O[2]*O[2]/s-1))))/(Z*=2),V=(-V-M)/Z,M=Math.tan(g),g=(s+V)/2,O=((Z=M*s+O[2])+(M*V+O[2]))/2,M=d.F.gp(s-g,Z-O),te=O/te*1.570796326794897,s=0;100>s&&(V=(V=d.F.w(h,te))*V/Math.cos(te)*(Math.sin(te)-O*V/(1-h)),!d.s.Cd(V));s++)te-=V;te=d.F.n(1,h,te)*Math.cos(te),O=1-M/(te=Math.sqrt((te-g)*(te+g))),O*=2-O,C=Math.acos(d.F.St(C,b)/(d.F.on(C)*d.F.on(b))),C*=d.s.Mb(1,b[0]),u=(d.F.q(te,O,d.F.Qj(O,C))+S*d.s.Mb(1,u))/d.F.Ah(te,O),u=d.F.ba(1.570796326794897*u),u=d.F.Rq(O,u),d.F.n(te,O,u),M=d.F.ba(F+l),l=Math.cos(M),u=Math.sin(M),x[0]=T[0]*l+T[1]*-u,x[1]=T[0]*u+T[1]*l,x[2]=T[2],d.F.jO(h,x[0],x[1],x[2],q,G,P),p!=null&&(p.u=G.u),f!=null&&(f.u=q.u)}},L}()}(Y||(Y={})),function(d){var L=function(){function a(u){this.Ya=null,this.wt=new d.h,this.xt=new d.h,this.g=u}return a.prototype.compare=function(u,p,f){return this.g.Gc(p,this.wt),this.g.Gc(u.ja(f),this.xt),this.wt.compare(this.xt)},a}(),S=function(){function a(u){this.Bf=new d.h,this.Dk=new d.h,this.g=u}return a.prototype.Dh=function(u){this.Bf.L(u)},a.prototype.compare=function(u,p){return this.g.Gc(u.ja(p),this.Dk),this.Bf.compare(this.Dk)},a}(),h=function(a){function u(p){var f=a.call(this,p.g,p.qa,!1)||this;return f.ib=p,f}return Bt(u,a),u.prototype.compare=function(p,f,g){if(this.rg)return-1;var b=this.ib.Qd.Jn(this.ib.Rh(f));p=p.ja(g);var x=this.ib.Qd.Jn(this.ib.Rh(p));return this.Dm=g,this.RE(f,b,p,x)},u}(d.UC),l=function(a){function u(p){var f=a.call(this,p.g,p.qa)||this;return f.ib=p,f}return Bt(u,a),u.prototype.compare=function(p,f){return this.rg?-1:(p=this.ib.Qd.Jn(this.ib.Rh(p.ja(f))),this.Dm=f,this.SE(f,p))},u}(d.aM),s=function(){function a(){this.Mc=this.df=this.jo=this.Qd=this.lh=this.zd=this.hb=this.g=null,this.Ng=!1,this.vh=this.Nm=this.ie=this.Gk=this.nh=this.Ak=this.Ff=this.$d=null,this.xh=this.Jq=this.UA=this.qa=0,this.Xv=this.Wn=!1,this.yo=new d.h,this.Pi=new d.h,this.hb=new d.$c(8),this.zd=new d.$c(5),this.lh=new d.au,this.Qd=new d.au,this.Ng=!1,this.vh=new d.h,this.vh.ma(0,0),this.qa=0,this.xh=-1,this.Wn=!1,this.g=null,this.df=new d.Yj,this.Mc=new d.Yj,this.nh=new d.ia(0),this.Gk=new d.TC,this.Ff=new d.ia(0),this.Ak=new d.ia(0),this.jo=new d.Sa}return a.prototype.PX=function(u,p){var f=new d.Dd;return f.$B(),u.Oc(f),this.er(u),this.Wn=!1,this.qa=p,this.UA=p*p,p=this.jC(),u.Oc(f),p||(this.qQ(),p||this.jC()),this.xh!=-1&&(this.g.Td(this.xh),this.xh=-1),this.g=null,this.Wn},a.prototype.TX=function(u,p){this.er(u),this.Wn=!1,this.qa=p,this.UA=p*p,this.Ng=!1,this.jC(),this.Ng||(this.Ng=u.Gp(p,!0,!1)==1),this.xh!=-1&&(this.g.Td(this.xh),this.xh=-1),this.g=null},a.prototype.pg=function(u,p){return this.hb.T(u,0+p)},a.prototype.LB=function(u,p,f){this.hb.S(u,0+p,f)},a.prototype.Rh=function(u){return this.hb.T(u,2)},a.prototype.ZW=function(u,p){this.hb.S(u,2,p)},a.prototype.RF=function(u,p){return this.hb.T(u,3+p)},a.prototype.Pp=function(u){return this.hb.T(u,7)},a.prototype.Pl=function(u,p){this.hb.S(u,7,p)},a.prototype.Rp=function(u,p){return this.hb.T(u,3+this.Op(u,p))},a.prototype.fr=function(u,p,f){this.hb.S(u,3+this.Op(u,p),f)},a.prototype.NR=function(u,p){return this.hb.T(u,5+this.Op(u,p))},a.prototype.hr=function(u,p,f){this.hb.S(u,5+this.Op(u,p),f)},a.prototype.Sr=function(u){return this.zd.T(u,0)},a.prototype.UW=function(u,p){this.zd.S(u,0,p)},a.prototype.ez=function(u){return this.zd.T(u,4)},a.prototype.cr=function(u,p){this.zd.S(u,4,p)},a.prototype.il=function(u){return this.zd.T(u,1)},a.prototype.ln=function(u,p){this.zd.S(u,1,p)},a.prototype.dz=function(u){return this.zd.T(u,3)},a.prototype.Et=function(u,p){this.zd.S(u,3,p)},a.prototype.Ym=function(u){var p=this.zd.Ce(),f=this.lh.Ph();return this.UW(p,f),u!=-1?(this.lh.addElement(f,u),this.g.Ra(u,this.xh,p),this.cr(p,this.g.Ua(u))):this.cr(p,-1),p},a.prototype.HP=function(u){this.zd.jd(u)},a.prototype.LD=function(u,p){this.lh.addElement(this.Sr(u),p),this.g.Ra(p,this.xh,u)},a.prototype.nt=function(u){var p=this.hb.Ce(),f=this.Qd.Ph();return this.ZW(p,f),u!=-1&&this.Qd.addElement(f,u),p},a.prototype.MD=function(u,p){this.Qd.addElement(this.Rh(u),p)},a.prototype.Uu=function(u){this.hb.jd(u),0<=(u=this.nh.lF(u))&&this.nh.SV(u)},a.prototype.hj=function(u,p){if(this.pg(u,0)==-1)this.LB(u,0,p);else{if(this.pg(u,1)!=-1)throw d.i.Qa();this.LB(u,1,p)}this.ky(u,p)},a.prototype.ky=function(u,p){var f=this.il(p);if(f!=-1){var g=this.Rp(f,p);this.hr(g,p,u),this.fr(u,p,g),this.fr(f,p,u),this.hr(u,p,f)}else this.hr(u,p,u),this.fr(u,p,u),this.ln(p,u)},a.prototype.Op=function(u,p){return this.pg(u,0)==p?0:1},a.prototype.Xm=function(u,p){var f,g=this.dz(p);if(g!=-1&&(this.df.vd(g,-1),this.Et(p,-1)),(g=this.il(p))!=-1){var b=f=g;do{var x=!1,T=this.Op(f,p),M=this.RF(f,T);if(this.pg(f,T+1&1)==u){if(this.Xu(f),this.Qd.bh(this.Rh(f)),this.Uu(f),f==M){g=-1;break}g==f&&(g=this.il(p),b=M,x=!0)}f=M}while(f!=b||x);if(g!=-1){do T=this.Op(f,p),M=this.RF(f,T),this.LB(f,T,u),f=M;while(f!=b);(f=this.il(u))!=-1?(b=this.Rp(f,u),x=this.Rp(g,u),b==f?(this.ln(u,g),this.ky(f,u),this.ln(u,f)):x==g&&this.ky(g,u),this.fr(g,u,b),this.hr(b,u,g),this.fr(f,u,x),this.hr(x,u,f)):this.ln(u,g)}}for(g=this.Sr(u),f=this.Sr(p),b=this.lh.rc(f);b!=-1;b=this.lh.lb(b))this.g.Ra(this.lh.ja(b),this.xh,u);this.lh.Hy(g,f),this.HP(p)},a.prototype.UT=function(u,p){var f=this.pg(u,0),g=this.pg(u,1),b=this.pg(p,0),x=this.pg(p,1);this.Qd.Hy(this.Rh(u),this.Rh(p)),p==this.il(f)&&this.ln(f,u),p==this.il(g)&&this.ln(g,u),this.Xu(p),this.Uu(p),f==b&&g==x||g==b&&f==x||(this.Hn(f,this.yo),this.Hn(b,this.Pi),this.yo.qb(this.Pi)?(f!=b&&this.Xm(f,b),g!=x&&this.Xm(g,x)):(g!=b&&this.Xm(g,b),f!=x&&this.Xm(f,x)))},a.prototype.Xu=function(u){var p=this.pg(u,1);this.dF(u,this.pg(u,0)),this.dF(u,p)},a.prototype.dF=function(u,p){var f=this.Rp(u,p),g=this.NR(u,p),b=this.il(p);f!=u?(this.fr(g,p,f),this.hr(f,p,g),b==u&&this.ln(p,f)):this.ln(p,-1)},a.prototype.WD=function(u,p,f){var g=this.Qd.rc(u),b=this.Qd.ja(g);u=this.Le(b);var x=this.Le(this.g.U(b));for(this.g.jr(b,p,f,!0),g=this.Qd.lb(g);g!=-1;g=this.Qd.lb(g)){b=this.Qd.ja(g);var T=this.Le(b)==u;this.g.jr(b,p,f,T)}g=p.Vp(f,0).ac(),p=p.Vp(f,p.ol(f)-1).wc(),this.BK(u,g),this.BK(x,p)},a.prototype.ZE=function(u,p,f){var g=this.Rh(u),b=this.pg(u,0),x=this.pg(u,1),T=this.nt(-1);for(this.nh.add(T),this.Pl(T,-3),this.Ff.add(T),this.hj(T,b),u=1,p=p.ol(f);u<p;u++)f=this.Ym(-1),this.Ak.add(f),this.Ff.add(f),this.hj(T,f),T=this.nt(-1),this.nh.add(T),this.Pl(T,-3),this.Ff.add(T),this.hj(T,f);for(this.hj(T,x),g=this.Qd.rc(g);g!=-1;g=this.Qd.lb(g))if(x=this.Qd.ja(g),this.Le(x)==b){u=0;do 0<u&&(T=this.Ff.get(u-1),this.LD(T,x),this.ez(T)==-1&&this.cr(T,this.g.Ua(x))),T=this.Ff.get(u),u+=2,this.MD(T,x),x=this.g.U(x);while(u<this.Ff.size)}else{u=this.Ff.size-1;do u<this.Ff.size-2&&(T=this.Ff.get(u+1),this.LD(T,x),0>this.ez(T)&&this.cr(T,this.g.Ua(x))),T=this.Ff.get(u),u-=2,this.MD(T,x),x=this.g.U(x);while(0<=u)}this.Ff.clear(!1)},a.prototype.Le=function(u){return this.g.Pa(u,this.xh)},a.prototype.TI=function(u,p,f){var g=this.pg(p,0),b=new d.h;this.Hn(g,b);var x=new d.h,T=this.pg(p,1);this.Hn(T,x);var M=f.ol(u),C=f.Vp(u,0),O=new d.h;if(C.Yp(O),!b.qb(O)){if(!this.Ng){var F=b.compare(this.vh);0>F*(O=O.compare(this.vh))&&(this.Ng=!0)}this.vF(g,this.Ff),this.Ak.add(g)}for(!this.Ng&&1<M&&(F=b.compare(x),C=C.wc(),(b.compare(C)!=F||C.compare(x)!=F||0>C.compare(this.vh))&&(this.Ng=!0)),u=(C=f.Vp(u,M-1)).wc(),x.qb(u)||(this.Ng||0>(F=x.compare(this.vh))*(O=u.compare(this.vh))&&(this.Ng=!0),this.vF(T,this.Ff),this.Ak.add(T)),this.Ff.add(p),x=0,T=this.Ff.size;x<T;x++)u=this.Ff.get(x),f=this.Pp(u),d.$c.LG(f)&&(this.Mc.vd(f,-1),this.Pl(u,-1)),u!=p&&this.Pp(u)!=-3&&(this.nh.add(u),this.Pl(u,-3));this.Ff.clear(!1)},a.prototype.lO=function(u,p){this.$d.compare(this.Mc,this.Mc.ja(u),p),this.$d.rg&&(this.$d.Kr(),this.oF(u,p))},a.prototype.oF=function(u,p){this.Wn=!0,u=this.Mc.ja(u),p=this.Mc.ja(p);var f=this.Qd.Jn(this.Rh(u)),g=this.Qd.Jn(this.Rh(p)),b=this.g.bc(f);b==null&&(this.ie==null&&(this.ie=new d.yb),this.g.ed(f,this.ie),b=this.ie),(f=this.g.bc(g))==null&&(this.Nm==null&&(this.Nm=new d.yb),this.g.ed(g,this.Nm),f=this.Nm),this.Gk.Oo(b),this.Gk.Oo(f),this.Gk.Ea(this.qa,!0)&&(this.Ng=!0),this.hK(u,p,-1,this.Gk),this.Gk.clear()},a.prototype.GQ=function(u,p){this.Wn=!0,p=this.Mc.ja(p);var f=this.Qd.Jn(this.Rh(p)),g=this.g.bc(f);g==null&&(this.ie==null&&(this.ie=new d.yb),this.g.ed(f,this.ie),g=this.ie),f=this.BF(u),this.Gk.Oo(g),this.g.Vi(f,this.jo),this.Gk.Kz(this.qa,this.jo,!0),this.hK(p,-1,u,this.Gk),this.Gk.clear()},a.prototype.xS=function(){if(this.nh.size!=0)for(;this.nh.size!=0;){if(this.nh.size>Math.max(100,this.g.fd)){this.nh.clear(!1),this.Ng=!0;break}var u=this.nh.Fc();this.nh.If(),this.Pl(u,-1),this.WS(u)!=-1&&this.wS(u),this.Vn=!1}},a.prototype.wS=function(u){if(this.Vn){var p=this.Mc.zu(this.MH,this.GH,u,!0);this.Vn=!1}else p=this.Mc.KD(u);p==-1?this.UT(this.Mc.ja(this.Mc.FF()),u):(this.Pl(u,p),this.$d.rg&&(this.$d.Kr(),this.oF(this.$d.Dm,p)))},a.prototype.WS=function(u){var p=this.pg(u,0);if(u=this.pg(u,1),this.Hn(p,this.yo),this.Hn(u,this.Pi),d.h.yc(this.yo,this.Pi)<=this.UA)return this.Ng=!0,-1;var f=this.yo.compare(this.vh),g=this.Pi.compare(this.vh);return 0>=f&&0<g?u:0>=g&&0<f?p:-1},a.prototype.oQ=function(){var u=new d.ia(0);u.Jb(this.g.fd);for(var p=this.g.Yq(),f=p.next();f!=-1;f=p.next())this.g.Pa(f,this.xh)!=-1&&u.add(f);this.g.nx(u,u.size),this.pQ(u)},a.prototype.pQ=function(u){this.df.clear(),this.df.De(u.size),this.df.Vo(new L(this.g));var p=new d.h;p.Rc();for(var f=-1,g=new d.h,b=0,x=u.size;b<x;b++){var T=u.get(b);this.g.Gc(T,g),g.qb(p)?(T=this.g.Pa(T,this.xh),this.Xm(f,T)):(f=this.Le(T),this.g.Gc(T,p),T=this.df.xn(T),this.Et(f,T))}},a.prototype.qQ=function(){var u=new d.ia(0);u.Jb(this.g.fd);for(var p=this.df.rc(-1);p!=-1;p=this.df.lb(p))u.add(this.df.ja(p));this.df.clear(),this.g.nx(u,u.size),p=0;for(var f=u.size;p<f;p++){var g=u.get(p),b=this.Le(g);g=this.df.xn(g),this.Et(b,g)}},a.prototype.vF=function(u,p){var f=this.il(u);if(f!=-1){var g=f;do d.$c.LG(this.Pp(g))&&p.add(g),g=this.Rp(g,u);while(g!=f)}},a.prototype.BK=function(u,p){for(u=this.lh.rc(this.Sr(u));u!=-1;u=this.lh.lb(u))this.g.mf(this.lh.ja(u),p)},a.prototype.hK=function(u,p,f,g){this.Xu(u),p!=-1&&this.Xu(p),this.TI(0,u,g),p!=-1&&this.TI(1,p,g),f!=-1&&(g.Bf.D(this.yo),this.Hn(f,this.Pi),this.Pi.qb(this.yo)||this.Ak.add(f)),f=0;for(var b=this.Ak.size;f<b;f++){var x=this.Ak.get(f),T=this.dz(x);T!=-1&&(this.df.vd(T,-1),this.Et(x,-1))}for(f=this.Rh(u),b=p!=-1?this.Rh(p):-1,this.WD(f,g,0),p!=-1&&this.WD(b,g,1),this.ZE(u,g,0),p!=-1&&this.ZE(p,g,1),this.Qd.bh(f),this.Uu(u),p!=-1&&(this.Qd.bh(b),this.Uu(p)),f=0,b=this.Ak.size;f<b;f++)(x=this.Ak.get(f))==this.Jq&&(this.Xv=!0),(T=this.dz(x))==-1&&((T=this.df.KD(this.BF(x)))==-1?(u=this.Le(this.df.ja(this.df.FF())),this.Xm(u,x)):this.Et(x,T));this.Ak.clear(!1)},a.prototype.Hn=function(u,p){this.g.dG(this.ez(u),p)},a.prototype.BF=function(u){return this.lh.Jn(this.Sr(u))},a.prototype.jC=function(){this.Xv=!1,this.Jq=-1,this.$d==null&&(this.Mc.Rv=!1,this.$d=new h(this),this.Mc.Zn=this.$d);var u=new d.ia(0),p=null,f=null;this.GH=this.MH=-1,this.Vn=!1;for(var g=this.df.rc(-1);g!=-1;){this.Vn=!1;var b=this.df.ja(g);this.Jq=this.Le(b),this.g.Gc(b,this.vh),this.$d.$J(this.vh.y,this.vh.x);var x=this.il(this.Jq),T=x==-1;if(!T){b=x;do{var M=this.Pp(b);M==-1?(this.nh.add(b),this.Pl(b,-3)):M!=-3&&u.add(M),b=this.Rp(b,this.Jq)}while(b!=x)}if(0<u.size){for(this.Vn=u.size==1&&this.nh.size==1,T=0,x=u.size;T<x;T++)b=this.Mc.ja(u.get(T)),this.Pl(b,-2);var C=-2,O=-2;for(T=0,x=u.size;T<x;T++){if(M=u.get(T),C==-2){var F=this.Mc.we(M);F!=-1?(b=this.Mc.ja(F),(b=this.Pp(b))!=-2&&(C=F)):C=-1}if(O==-2&&((M=this.Mc.lb(M))!=-1?(b=this.Mc.ja(M),(b=this.Pp(b))!=-2&&(O=M)):O=-1),C!=-2&&O!=-2)break}for(T=0,x=u.size;T<x;T++)M=u.get(T),b=this.Mc.ja(M),this.Mc.vd(M,-1),this.Pl(b,-1);u.clear(!1),this.MH=C!=-1?C:-1,this.GH=O!=-1?O:-1,C!=-1&&O!=-1?this.Vn||this.lO(C,O):C==-1&&O==-1&&(this.Vn=!1)}else T&&(p==null&&(p=new l(this)),p.Dh(this.vh),this.Mc.uJ(p),p.rg&&(p.Kr(),this.GQ(this.Jq,p.Dm)));this.xS(),this.Xv?(this.Xv=!1,f==null&&(f=new S(this.g)),f.Dh(this.vh),g=this.df.uJ(f)):g=this.df.lb(g)}return this.Wn},a.prototype.er=function(u){for(this.g=u,this.xh=this.g.Gd(),this.hb.De(u.fd+32),this.zd.De(u.fd),this.lh.At(u.fd),this.lh.fn(u.fd),this.Qd.At(u.fd+32),this.Qd.fn(u.fd+32),u=this.g.ld;u!=-1;u=this.g.ue(u))if(d.aa.Hc(this.g.ic(u)))for(M=this.g.Ob(u);M!=-1;M=this.g.Rb(M)){var p=this.g.Ja(M),f=this.g.Xa(M),g=this.Ym(f),b=this.nt(f);for(this.hj(b,g),C=this.g.U(f),f=0,p-=2;f<p;f++){var x=this.g.U(C),T=this.Ym(C);this.hj(b,T),b=this.nt(C),this.hj(b,T),C=x}this.g.dc(M)?(T=this.Ym(C),this.hj(b,T),b=this.nt(C),this.hj(b,T),this.hj(b,g)):(T=this.Ym(C),this.hj(b,T))}else for(var M=this.g.Ob(u);M!=-1;M=this.g.Rb(M)){var C=this.g.Xa(M);for(g=0,p=this.g.Ja(M);g<p;g++)this.Ym(C),C=this.g.U(C)}this.oQ()},a}();d.RC=s}(Y||(Y={})),function(d){var L=function(S){function h(l,s,a){var u=S.call(this)||this;if(l!==void 0)if(a!==void 0){u.description=d.ee.og();var p=new d.Nd;p.K(l,s,a),u.dC(p)}else if(s!==void 0)u.description=d.ee.og(),u.Cb(l,s);else if(l instanceof d.ra)u.description=l;else if(l instanceof d.h)u.description=d.ee.og(),u.Cb(l);else{if(!(l instanceof h))throw d.i.N();u.description=l.description,u.Cb(l.Lg(),l.ih()),l.ka!==null&&(u.ka=l.ka.slice(0))}else u.description=d.ee.og();return u}return Bt(h,S),h.prototype.D=function(l){if(l===void 0){if(this.Ac())throw d.i.fa("This operation should not be performed on an empty geometry.");return(l=new d.h).ma(this.ka[0],this.ka[1]),l}if(this.Ac())throw d.i.fa("This operation should not be performed on an empty geometry.");l.ma(this.ka[0],this.ka[1])},h.prototype.Cb=function(l,s){typeof l=="number"?(this.vc(),this.ka==null&&this.un(),this.ka[0]=l,this.ka[1]=s):(this.vc(),this.Cb(l.x,l.y))},h.prototype.Cz=function(){if(this.Ac())throw d.i.fa("This operation should not be performed on an empty geometry.");var l=new d.Nd;return l.x=this.ka[0],l.y=this.ka[1],l.z=this.description.iG()?this.ka[2]:d.ra.se(1),l},h.prototype.dC=function(l){this.vc();var s=this.hasAttribute(1);s||d.ra.DG(1,l.z)||(this.re(1),s=!0),this.ka==null&&this.un(),this.ka[0]=l.x,this.ka[1]=l.y,s&&(this.ka[2]=l.z)},h.prototype.Lg=function(){if(this.Ac())throw d.i.fa("This operation should not be performed on an empty geometry.");return this.ka[0]},h.prototype.cC=function(l){this.setAttribute(0,0,l)},h.prototype.ih=function(){if(this.Ac())throw d.i.fa("This operation should not be performed on an empty geometry.");return this.ka[1]},h.prototype.aK=function(l){this.setAttribute(0,1,l)},h.prototype.bS=function(){return this.Uc(1,0)},h.prototype.wX=function(l){this.setAttribute(1,0,l)},h.prototype.zR=function(){return this.Uc(2,0)},h.prototype.hX=function(l){this.setAttribute(2,0,l)},h.prototype.Ec=function(){return this.yF(3,0)},h.prototype.LJ=function(l){this.setAttribute(3,0,l)},h.prototype.Uc=function(l,s){var a=this.description.Pf(l);return 0<=a?this.ka[this.description.$j(a)+s]:d.ra.se(l)},h.prototype.yF=function(l,s){var a=this.description.Pf(l);return 0<=a?this.ka[this.description.$j(a)+s]:d.ra.se(l)},h.prototype.setAttribute=function(l,s,a){this.vc();var u=this.description.Pf(l);0>u&&(this.re(l),u=this.description.Pf(l)),this.ka==null&&this.un(),this.ka[this.description.$j(u)+s]=a},h.prototype.getType=function(){return 33},h.prototype.Db=function(){return 0},h.prototype.Oa=function(){this.vc(),this.ka!=null&&(this.ka[0]=NaN,this.ka[1]=NaN)},h.prototype.sn=function(l){if(this.ka!=null){for(var s=d.ee.Iw(l,this.description),a=[],u=0,p=0,f=l.Aa;p<f;p++){var g=l.kd(p),b=d.ra.Va(g);if(s[p]==-1){var x=d.ra.se(g);for(g=0;g<b;g++)a[u]=x,u++}else for(x=this.description.$j(s[p]),g=0;g<b;g++)a[u]=this.ka[x],u++,x++}this.ka=a}this.description=l},h.prototype.un=function(){this.lJ(this.description.Ae.length),h.cE(this.description.Ae,this.ka,this.description.Ae.length),this.ka[0]=NaN,this.ka[1]=NaN},h.prototype.Oc=function(l){if(l instanceof d.Dd){if(!this.Ac()){var s=this.D();l.Eh(s,s),this.Cb(s)}}else this.Ac()||(this.re(1),s=this.Cz(),this.dC(l.fp(s)))},h.prototype.copyTo=function(l){if(l.getType()!=33)throw d.i.N();l.vc(),this.ka==null?(l.Oa(),l.ka=null,l.Nf(this.description)):(l.Nf(this.description),l.lJ(this.description.Ae.length),h.cE(this.ka,l.ka,this.description.Ae.length))},h.prototype.Ia=function(){return new h(this.description)},h.prototype.B=function(){return this.Ac()},h.prototype.Ac=function(){return this.ka==null||isNaN(this.ka[0])||isNaN(this.ka[1])},h.prototype.bn=function(l){l.Oa(),this.description!=l.description&&l.Nf(this.description),l.Zb(this)},h.prototype.A=function(l){this.Ac()?l.Oa():(l.v=this.ka[0],l.G=this.ka[1],l.C=this.ka[0],l.H=this.ka[1])},h.prototype.Qo=function(l){if(this.Ac())l.Oa();else{var s=this.Cz();l.v=s.x,l.G=s.y,l.Ye=s.z,l.C=s.x,l.H=s.y,l.Bg=s.z}},h.prototype.Tg=function(l,s){var a=new d.Nc;return this.Ac()?(a.Oa(),a):(l=this.Uc(l,s),a.oa=l,a.va=l,a)},h.prototype.lJ=function(l){if(this.ka==null)this.ka=d.O.lg(l);else if(this.ka.length<l){for(var s=this.ka.slice(0),a=this.ka.length;a<l;a++)s[a]=0;this.ka=s}},h.cE=function(l,s,a){if(0<a)for(a=0;a<l.length;a++)s[a]=l[a]},h.prototype.Nb=function(l){if(l==this)return!0;if(!(l instanceof h)||this.description!=l.description)return!1;if(this.Ac())return!!l.Ac();for(var s=0,a=this.description.Ae.length;s<a;s++)if(this.ka[s]!=l.ka[s])return!1;return!0},h.prototype.cc=function(){var l=this.description.cc();if(!this.Ac())for(var s=0,a=this.description.Ae.length;s<a;s++){var u=this.ka[s];u=d.O.truncate(u^u>>>32),l=d.O.Th(u,l)}return l},h.prototype.mg=function(){return null},h}(d.aa);d.Sa=L}(Y||(Y={})),function(d){var L=function(){function S(h,l,s){h!==void 0&&(this.x=h,this.y=l,this.z=s)}return S.construct=function(h,l,s){var a=new S;return a.x=h,a.y=l,a.z=s,a},S.prototype.K=function(h,l,s){this.x=h,this.y=l,this.z=s},S.prototype.lx=function(){this.z=this.y=this.x=0},S.prototype.normalize=function(){var h=this.length();h==0&&(this.x/=h,this.y/=h,this.z/=h)},S.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},S.prototype.sub=function(h){return new S(this.x-h.x,this.y-h.y,this.z-h.z)},S.prototype.Ag=function(h){new S(this.x*h,this.y*h,this.z*h)},S.prototype.Qh=function(h){return this.x*h.x+this.y*h.y+this.z*h.z},S}();d.Nd=L}(Y||(Y={})),function(d){var L=function(){function S(h,l,s){this.Gw=this.DA=null,this.Xf=l,this.FT=l.y-s,this.ET=l.y+s,this.Ew=0,this.dA=h,this.qa=s,this.RT=s*s,this.eA=s!=0,this.Lv=!1}return S.prototype.result=function(){return this.Ew!=0?1:0},S.prototype.ZM=function(h){return h=h.hc(h.fe(this.Xf,!1)),d.h.yc(h,this.Xf)<=this.RT},S.prototype.fF=function(h){if(!this.eA&&(this.dA&&this.Xf.qb(h.ac())||this.Xf.qb(h.wc())))this.Lv=!0;else if(h.na==this.Xf.y&&h.na==h.la){if(this.dA&&!this.eA){var l=Math.max(h.sa,h.pa);this.Xf.x>Math.min(h.sa,h.pa)&&this.Xf.x<l&&(this.Lv=!0)}}else{var s=!1;if(l=Math.max(h.sa,h.pa),this.Xf.x>l?s=!0:this.Xf.x>=Math.min(h.sa,h.pa)&&(s=0<h.cq(!0,this.Xf.y,this.Gw,null)&&this.Gw[0]<=this.Xf.x),s){if(this.Xf.y==h.ac().y){if(this.Xf.y<h.wc().y)return}else if(this.Xf.y==h.wc().y&&this.Xf.y<h.ac().y)return;this.Ew=this.dA?1^this.Ew:this.Ew+(h.ac().y>h.wc().y?1:-1)}}},S.prototype.SI=function(h){var l=h.Tg(0,1);if(l.oa>this.ET||l.va<this.FT)return!1;if(this.eA&&this.ZM(h))return!0;if(l.oa>this.Xf.y||l.va<this.Xf.y)return!1;if(this.DA==null&&(this.DA=[null,null,null,null,null]),this.Gw==null&&(this.Gw=[0,0,0]),0<(l=h.eG()))for(h=0;h<l;h++){var s=this.DA[h].get();if(this.fF(s),this.Lv)return!0}else if(this.fF(h),this.Lv)return!0;return!1},S.PM=function(h,l,s){for(l=new S(h.In()==0,l,s),h=h.Ga();h.$a();)for(;h.Ha();)if(s=h.ha(),l.SI(s))return-1;return l.result()},S.QM=function(h,l,s,a){var u=new d.l;h.xc(u),u.W(a,a);var p=new S(h.In()==0,s,a);h=h.Ga();var f=new d.l;for(f.K(u),f.C=s.x+a,f.G=s.y-a,f.H=s.y+a,a=(s=l.MF(f,a)).next();a!=-1;a=s.next())if(h.Vb(l.ja(a)),h.Ha()&&(a=h.ha(),p.SI(a)))return-1;return p.result()},S.wm=function(h,l,s){if(h.B())return 0;var a=new d.l;if(h.xc(a),a.W(s,s),!a.contains(l))return 0;if((a=h.Bb)!=null){var u=a.Fk;if(u!=null){if((u=u.So(l.x,l.y))==1)return 1;if(u==0)return 0}if((a=a.Fb)!=null)return S.QM(h,a,l,s)}return S.PM(h,l,s)},S.bT=function(h,l,s){return l.B()?0:S.wm(h,l.D(),s)},S.Ml=function(h,l){return!(16>(h=h.I()))&&2*h+Math.log(h)/Math.log(2)*l<1*h*l},S}();d.Dg=L}(Y||(Y={})),function(d){var L=function(S){function h(l){return S.call(this,!0,l)||this}return Bt(h,S),h.prototype.Ia=function(){return new h(this.description)},h.prototype.Db=function(){return 2},h.prototype.getType=function(){return 1736},h.prototype.xG=function(l,s,a){this.JS(l,s,a)},h.prototype.qR=function(){this.FR()},h}(d.Vk);d.Da=L}(Y||(Y={})),function(d){(function(L){L[L.PiPOutside=0]="PiPOutside",L[L.PiPInside=1]="PiPInside",L[L.PiPBoundary=2]="PiPBoundary"})(d.RL||(d.RL={})),d.hd=function(){function L(){}return L.KG=function(S,h,l){return(S=d.Dg.bT(S,h,l))==0?0:S==1?1:2},L.Yd=function(S,h,l){return(S=d.Dg.wm(S,h,l))==0?0:S==1?1:2},L.WX=function(S,h,l,s,a){if(h.length<l||a.length<l)throw d.i.N();for(var u=0;u<l;u++)a[u]=L.Yd(S,h[u],s)},L.sK=function(S,h,l,s,a){if(S.getType()==1736)L.WX(S,h,l,s,a);else{if(S.getType()!=197)throw d.i.fa("invalid_call");var u=new d.l;S.A(u),L.$M(u,h,l,s,a)}},L.$M=function(S,h,l,s,a){if(h.length<l||a.length<l)throw d.i.N();if(S.B())for(s=0;s<l;s++)a[s]=0;else for(S.W(.5*-s,.5*-s),S.W(.5*s,.5*s),s=0;s<l;s++)S.contains(h[s])?a[s]=1:S.contains(h[s])?a[s]=2:a[s]=0},L.YX=function(S,h,l,s,a){for(var u=0;u<l;u++)a[u]=S.qs(h[u],s)?2:0},L.XX=function(S,h,l,s,a){var u=S.Bb,p=null;u!=null&&(p=u.Fk),u=l;for(var f=0;f<l;f++)if(a[f]=1,p!=null){var g=h[f];p.So(g.x,g.y)==0&&(a[f]=0,u--)}if(u!=0)for(S=S.Ga();S.$a()&&u!=0;)for(;S.Ha()&&u!=0;)for(p=S.ha(),f=0;f<l&&u!=0;f++)a[f]==1&&p.qs(h[f],s)&&(a[f]=2,u--);for(f=0;f<l;f++)a[f]==1&&(a[f]=0)},L.tK=function(S,h,l,s,a){var u=S.getType();if(u==1607)L.XX(S,h,l,s,a);else{if(!d.aa.yd(u))throw d.i.fa("Invalid call.");L.YX(S,h,l,s,a)}},L}()}(Y||(Y={})),function(d){var L=function(S){function h(l,s){if(arguments.length==2){var a=S.call(this,!1,l.description)||this;a.nf(l),a.lineTo(s)}else a=S.call(this,!1,l)||this;return a}return Bt(h,S),h.prototype.Ia=function(){return new h(this.description)},h.prototype.Db=function(){return 1},h.prototype.getType=function(){return 1607},h.prototype.xG=function(l,s,a){this.KS(l,s,a)},h}(d.Vk);d.Ta=L}(Y||(Y={})),function(d){var L=function(){function S(){}return S.prototype.progress=function(){return!0},S.zp=function(h){if(h!=null&&!h.progress(-1,-1))throw d.i.WC()},S}();d.mp=L}(Y||(Y={})),function(d){var L;(L=d.PK||(d.PK={}))[L.clipWithInputHorizon=1]="clipWithInputHorizon",L[L.clipWithOutputHorizon=2]="clipWithOutputHorizon";var S=function(){function s(){this.Kg=3,this.Vu=this.Jr=NaN}return s.prototype.PW=function(a){this.QB(1,a)},s.prototype.QW=function(a){this.QB(2,a)},s.prototype.hS=function(){return this.hs(1)},s.prototype.iS=function(){return this.hs(2)},s.prototype.QB=function(a,u){this.Kg=u?this.Kg|a:this.Kg&~a},s.prototype.hs=function(a){return!!(this.Kg&a)},s.prototype.Of=function(){var a=new s;return a.Jr=this.Jr,a.Vu=this.Vu,a.Kg=this.Kg,a},s}();d.yC=S,function(s){s[s.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",s[s.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(d.QK||(d.QK={}));var h=function(){function s(){this.Kg=0}return s.prototype.QB=function(a,u){this.Kg=u?this.Kg|a:this.Kg&~a},s.prototype.hs=function(a){return!!(this.Kg&a)},s.jg=function(a){var u=new s;return u.Kg=a.Kg,u},s.prototype.mM=function(a){this.Kg=a.Kg},s}();d.AY=h;var l=function(){function s(a,u,p){this.ef=a,this.Yf=u,this.Uf=new d.l,this.Uf.K(p),this.AT=a.cc()+u.cc()+this.Uf.cc().toString()}return s.prototype.cc=function(){return this.AT},s.prototype.Nb=function(a){return this==a||this.ef.Nb(a.ef)&&this.Yf.Nb(a.Yf)&&this.Uf.Nb(a.Uf)},s}();d.FY=l,l=function(){function s(){this.Yf=this.ef=null,this.rH=new S,this.sH=new h,this.ww=this.Wf=null,this.mw=this.Tn=!0}return s.Nr=function(a,u,p,f){var g;f===void 0&&(f=null),g===void 0&&(g=null);var b=new s;return b.qp(a,u,p,f,g),b},s.prototype.qp=function(a,u,p,f,g){if(a==null||u==null)throw d.i.fa("invalidArgument");if(this.ef=a,this.Yf=u,this.mw=this.Tn=!1,f!=null&&(this.rH=f.Of()),g!=null&&this.sH.mM(g),g=!1,u.Sb()==1&&f!=null&&(f=f.Jr,isNaN(f)||f==0||(g=!0)),a==u)this.Tn=!g,this.mw=!0;else{f=a.Sb();var b=u.Sb();if(f==0||b==0){if(p!=null)throw d.i.N();a.Hd()!=null&&u.Hd()!=null&&(this.Tn=a.Hd().Nb(u.Hd()))}else f==3||b==3?this.Tn=a.Nb(u):this.ef.kS(this.Yf)?this.Tn=!g:this.Tn=!1,this.Wf=p,this.Wf!=null&&this.Wf.ix(),this.mw=(this.Wf==null||this.Wf.count()==0)&&this.ef.sc().Nb(this.Yf.sc())}this.oY()},s.prototype.isIdentity=function(){return this.Tn},s.prototype.nR=function(){return this.rH.Of()},s.prototype.Nb=function(a){return a==this||!!(a instanceof s&&this.ef.Nb(a.ef)&&this.Yf.Nb(a.Yf))&&(this.Wf==a.Wf||!(this.Wf==null||a.Wf==null||!this.Wf.Nb(a.Wf)))},s.prototype.oY=function(){this.ww=new d.bu(this)},s}(),d.vr=l}(Y||(Y={})),function(d){var L=function(){function S(){}return S.Cp=function(h){return h*S.oW},S.mx=function(h,l){return S.gP(l-h)},S.hP=function(h){return-360<=h&&720>h?(0>h?h+=360:360<=h&&(h-=360),h):(0>(h=d.lc.RK(h))&&(h+=360),h)},S.gP=function(h){return 180<(h=S.hP(h))&&(h-=360),h},S.oW=57.29577951308232,S}();d.qr=L,d.Hh=function(){function S(){}return S.lj=function(h,l){var s=new d.l;h.A(s);var a=d.cb.gh(l),u=new d.l;return u.K(a),u.v=s.v,u.C=s.C,u.W(.01*u.ca(),0),l=d.ta.Wd(l,s,!1),u.contains(s)?h:d.Ud.clip(h,u,l,0)},S.ks=function(h,l,s,a,u){if(!d.cb.Wc(l))throw d.i.N();var p=d.ta.kj(l,h,!1),f=d.cb.gh(l),g=d.cb.sc(l),b=g.Hd().ai,x=d.cb.vv(g);g=d.cb.ev(g),x*=2-x;var T=new d.Nc;f.cn(T);var M=[[0,0],[0,0]];if(d.Eg.Sb(l)==2?a?(M[0][0]=S.Zm(u,T),M[0][1]=f.Jp(),d.cb.vt(),f=M[0][0]*b):(M[0][0]=f.gk(),M[0][1]=u,d.cb.vt(),f=M[0][1]*b):f=u*b,!a&&f!=0)throw d.i.N();var C=new d.ga,O=new d.gd;h=O.Ib(h);for(var F=[0],P=new d.h,G=new d.h,q=new d.h,V=new d.h,Z=new d.h,X=new d.h,te=O.Ob(h);te!=-1;te=O.Rb(te)){var oe=O.Xa(te);O.D(oe,q);for(var me=!1,Se=oe=O.U(oe);Se!=-1;Se=O.U(Se)){if(Se==oe){if(me)break;me=!0}if(O.D(Se,V),a&&p<u-q.x&&V.x-u>p||p<u-V.x&&q.x-u>p||!a&&p<-q.y&&V.y>p||p<-V.y&&q.y>p)do if(!(Math.abs(q.x-V.x)>=.5*T.R())){if(d.Eg.Sb(l)==2?(M[0][0]=S.Zm(q.x,T),M[0][1]=q.y,M[1][0]=S.Zm(V.x,T),M[1][1]=V.y,d.cb.dW(),Z.x=M[0][0]*b,Z.y=M[0][1]*b,X.x=M[1][0]*b,X.y=M[1][1]*b):(Z.x=q.x*b,Z.y=q.y*b,X.x=V.x*b,X.y=V.y*b),X.x=6.283185307179586*(V.x-q.x)/T.R()+Z.x,a){if(G.x=f,G.y=S.Nz(g,x,Z,X,f,s),isNaN(G.y))break}else{if(G.x=S.Lz(g,x,Z,X,s),isNaN(G.x))break;G.y=0}d.kb.wd(g,x,Z.x,Z.y,X.x,X.y,C,null,null,s);var Ce=C.u;d.kb.wd(g,x,Z.x,Z.y,G.x,G.y,C,null,null,s);var $e=C.u;d.Eg.Sb(l)==2?(M[0][0]=G.x/b,M[0][1]=G.y/b,d.cb.bR(),a?(P.y=M[0][1],P.x=u):(P.x=S.os(M[0][0],q.x,V.x,T),P.y=u)):a?(P.x=u,P.y=G.y/b):(P.x=S.os(G.x/b,q.x,V.x,T),P.y=u),F[0]=0<Ce?d.O.Rk($e/Ce,0,1):.5,F[0]!=0&&F[0]!=1&&(Ce=O.Ma(Se),O.Ul(Ce,F,1),O.Cb(O.U(Ce),P.x,P.y))}while(!1);q.L(V)}}return O.Ne(h)},S.Fn=function(h,l,s,a,u){if(h.B())return h;var p=d.cb.bf(l);return S.Hp(h,s-180*p,360*p,l,a,u,!0)},S.Nz=function(h,l,s,a,u,p){if(3.141592653589793<=Math.abs(s.x-a.x)||!S.Sn(s.x,a.x,u))return NaN;if(s.x>a.x)var f=a;else f=s,s=a;a=new d.ga(0);var g=new d.ga(0),b=new d.ga(0);d.kb.wd(h,l,f.x,f.y,s.x,s.y,g,a,null,p);var x=g.u,T=0,M=1,C=new d.h;for(C.L(f);x*(M-T)>1e-12*h;){var O=.5*(T+M);if(d.kb.oj(h,l,f.x,f.y,x*O,a.u,g,b,p),C.x=g.u,C.y=b.u,C.x==u)break;if(S.Sn(f.x,C.x,u))M=O;else{if(!S.Sn(s.x,C.x,u))return NaN;T=O}}return C.y},S.Sn=function(h,l,s){return h=L.Cp(h),l=L.mx(h,L.Cp(l)),(s=L.mx(h,L.Cp(s)))==0||0<l&&0<s&&s<=l||0>l&&0>s&&s>=l},S.Zm=function(h,l){var s=l.va-l.oa;return l.It(h-Math.floor((h-l.oa)/s)*s)},S.os=function(h,l,s,a){var u=new d.Nc;for(u.K(l,s),s=a.R(),h=Math.floor((h-l)/s)*s+h,u=u.sf();Math.abs(h-u)>Math.abs(h+s-u);)h+=s;return h},S.Lz=function(h,l,s,a,u){if(s.y>a.y)var p=a;else p=s,s=a;if((a=new d.Nc).K(p.y,s.y),!a.contains(0)||3.141592653589793<=Math.abs(p.x-s.x))return NaN;if(p.x==s.x)return p.x;var f=new d.ga(0),g=new d.ga(0),b=new d.ga(0);d.kb.wd(h,l,p.x,p.y,s.x,s.y,g,f,null,u);var x=g.u,T=0,M=1,C=new d.h;for(C.L(p);x*(M-T)>1e-12*h;){var O=.5*(T+M);if(d.kb.oj(h,l,p.x,p.y,x*O,f.u,g,b,u),C.x=g.u,C.y=b.u,a.K(p.y,C.y),C.y==0)break;if(a.contains(0))M=O;else{if(a.K(s.y,C.y),!a.contains(0))return NaN;T=O}}return C.x},S.Hp=function(h,l,s,a,u,p,f){var g=new d.l;if(h.A(g),g.B())return h;var b=new d.Nc;g.cn(b);var x=new d.Nc;if(x.K(l,l+s),x.contains(b)&&x.va!=b.va)return h;var T=new d.l;T.K(g);var M=h.getType();if(M==33)return((g=(T=u?h:h.Of()).Lg())<x.oa||g>=x.va||f&&g==x.va)&&(g+=Math.ceil((x.oa-g)/s)*s,g=x.It(g),T.cC(g)),T;if(M==550){for(a=(T=u?h:h.Of()).ub(0),M=2*T.I(),h=!1,u=0;u<M;u+=2)((g=a.read(u))<x.oa||g>=x.va||f&&g==x.va)&&(h=!0,g+=Math.ceil((x.oa-g)/s)*s,g=x.It(g),a.write(u,g));return h&&T.Pc(1993),T}if(x.contains(b))return h;if(M==197)return s=u?h:h.Of(),g.Ea(T),s.Xo(g),s;var C=.1*Math.max(g.ca(),g.R());for(T.W(0,C),f=h,x=a.Xd(0),h=d.Gh.local(),u=new d.Dd;;){var O=Math.floor((b.oa-l)/s),F=Math.ceil((b.va-l)/s);if(!(3<F-O))break;O=Math.floor(.5*(F+O)),T.v=g.v-C,T.C=l+s*O;var P=d.Ud.clip(f,T,x,p);T.v=T.C,T.C=g.C+C;var G=d.Ud.clip(f,T,x,p);u.gg((O-F)*s,0),G.Oc(u),M==1736?f=h.V(P,G,a,null):(f=P).add(G,!1),f.A(g),g.cn(b)}for(T.v=l,T.C=l+s,(l=new d.l).K(T),l.W(x,0),(l=Math.floor((g.v-T.v)/s)*s)!=0?(T.move(l,0),u.gg(-l,0)):u.RB(),l=M==1607?new d.Ta(f.description):new d.Da(f.description),p=new d.l,b=new d.l;g.C>T.v;)(C=d.Ud.clip(f,T,x,0)).A(b),(M==1607?!C.B()&&(b.R()>x||b.ca()>x):!C.B()&&(M!=1736||b.R()>x))&&(C.Oc(u),C.A(b),l.A(p),p.W(x,x),p.isIntersecting(b)&&M==1736?l=h.V(l,C,a,null):l.add(C,!1)),T.move(s,0),u.shift(-s,0);return l},S.WI=function(h,l,s,a){var u=new d.de(s.description);u.Fd(s,0,-1),u=d.cb.zh(u,h,l);var p=s.I();if(a.Oa(),!d.cb.Wc(h)||p!=u.I())return!1;var f=new d.l;s.A(f);var g=new d.l;if(u.A(g),f=f.R(),g=g.R(),f!=0&&g!=0){if(g/=f,h=d.cb.gh(l).R()/d.cb.gh(h).R(),1e-10<Math.abs(g/h-1))return!1}else if(f!=0||g!=0)return!1;for(a.add(s,!1),s=0;s<p;s++)h=u.Na(s),a.Cb(s,h);return!0},S.Oz=function(){throw d.i.Ie()},S}()}(Y||(Y={})),function(d){var L,S,h;(S=L=d.si||(d.si={}))[S.Clip=0]="Clip",S[S.DontClip=1]="DontClip",S[S.PannableFold=2]="PannableFold",function(l){l[l.Geodesic=0]="Geodesic",l[l.Loxodrome=1]="Loxodrome",l[l.GreatElliptic=2]="GreatElliptic",l[l.NormalSection=3]="NormalSection",l[l.ShapePreserving=4]="ShapePreserving"}(h=d.WK||(d.WK={})),d.zb=function(){function l(){}return l.xv=function(s,a,u){if(u||0<a){for(s=s.toString(d.Sc.PE_STR_NAME_CANON|d.Sc.PE_STR_AUTH_NONE),a=[],u=0;u<s.length;u++)a[u]="a"<=s[u]&&"z">=s[u]?a[u]=s[u].toUpperCase():s[u];return a.join()}return s.toString(d.Sc.PE_STR_AUTH_TOP)},l.ur=function(s,a,u,p){var f=p.length,g=u.I();if(g!=0){var b=u.ub(0),x=Math.min(g,f),T=0,M=s.eh();isNaN(a)&&(a=0);for(var C=s.Wc(),O=179*(s=C?s.sc().Oe().R():0)/360;0<g;){if(b.uB(T<<1,x,p),d.ej.projToGeogCenter(M,x,p,a),C)for(var F=0;F<x;F++){var P=p[F][0]-a,G=d.lc.sign(P),q=b.read(2*(T+F));0>G*d.lc.sign(q)&&Math.abs(P)>O&&(p[F][0]+=-G*s)}b.uC(T<<1,x,p),T+=x,g-=x,x=Math.min(g,f)}u.Pc(1993)}},l.IL=function(s,a,u,p){var f=0,g=s.eh();isNaN(f)&&(f=0);var b=s.Wc(),x=s.bf();s=360*x,x*=179;for(var T=p.length,M=0;M<u;){for(var C=M;C<u&&a[C].isNaN();++C)M++;var O=Math.min(T,u-M);if(0<O){C=1;for(var F=M+1;C<O;++C,++F)if(a[F].isNaN()){O=C;break}if(d.ta.Jy(p,a,M,O),d.ej.projToGeogCenter(g,O,p,f),b)for(C=0,F=M;C<O;++C,++F){var P=a[F].x,G=p[C][0]-f,q=d.lc.sign(G);0>q*d.lc.sign(P)&&Math.abs(G)>x&&(p[C][0]-=q*s)}d.ta.Iy(a,M,p,O),M+=O}}},l.Lx=function(s,a,u){var p=u.length,f=a.I();if(!(1>f)){var g=a.ub(0),b=Math.min(f,p),x=0,T=s.eh(),M=s.Wc(),C=M?s.Oe().R():0,O=179*C/360,F=0;for(M&&(F=s.zi());0<f;){if(g.uB(x<<1,b,u),d.ej.geogToProj(T,b,u),M)for(s=0;s<b;s++){var P=u[s][0],G=d.lc.sign(P),q=g.read(2*(x+s))-F;0>G*d.lc.sign(q)&&Math.abs(P)>O&&(u[s][0]+=-G*C)}g.uC(x<<1,b,u),x+=b,f-=b,b=Math.min(f,p)}a.Pc(1993)}},l.HL=function(s,a,u,p){if(u!=0){var f=s.eh(),g=s.Wc(),b=g?s.Oe().R():0,x=179*b/360,T=0;for(g&&(T=s.zi()),s=0;s<u;){for(var M=s;M<u&&a[M].isNaN();++M)s++;var C=Math.min(p.length,u-s);if(0<C){M=1;for(var O=s+1;M<C;++M,++O)if(a[O].isNaN()){C=M;break}if(d.ta.Jy(p,a,s,C),d.ej.geogToProj(f,C,p),g)for(M=0,O=s;M<C;M++){var F=p[M][0],P=d.lc.sign(F);0>P*d.lc.sign(a[O].x-T)&&Math.abs(F)>x&&(p[M][0]-=P*b)}d.ta.Iy(a,s,p,C),s+=C}}}},l.tr=function(s,a,u,p){var f=a.I();if(f!=0){var g=a.ub(0),b=s.ef,x=s.Yf,T=b.sc().Qp(),M=x.sc().Qp(),C=b.bf(),O=x.bf();if((s=s.Wf)==null||s.count()==0){for(u=T/M,p=(b.Up()-x.Up())*O,M=-90*C,s=90*C,T=!1,O=1,b=2*f;O<b;)C=g.get(O),(x=d.O.Rk(C,M,s))!=C&&(g.set(O,x),T=!0),O+=2;if(p!=0||u!=1)for(T=!0,M=new d.h,O=0;O<f;O++)g.tc(2*O,M),M.x*=u,M.x+=p,M.y*=u,g.Tt(2*O,M);T&&a.Pc(1993)}else{b=p.length,x=Math.min(f,b);var F=d.O.lg(x),P=null,G=0,q=NaN,V=NaN,Z=360*O,X=O/C;u&&(V=90*O,q=89.9*C,P=d.O.lg(x));for(var te=!0,oe=0;f!=0;){for(C=!1,g.uB(G<<1,x,p),O=0;O<x;O++)F[O]=p[O][0];if(u)for(O=0;O<x;O++){var me=Math.abs(p[O][1])-q;0<me&&(C=p[O][1],p[O][1]=d.lc.Cn(q,C),P[O]=d.lc.Cn(me,C),C=!0)}for(O=p[0][0],s.transform(p,x,T,M),te&&(oe=p[0][0]-X*O,te=!1),O=0;O<x;O++)me=p[O][0]-F[O]*X-oe,200<Math.abs(me)&&(p[O][0]=0<me?p[O][0]-Z:p[O][0]+Z);if(C){for(O=0;O<x;O++)P[O]!=0&&(p[O][1]+=X*P[O],p[O][1]>V?p[O][1]=V:p[O][1]<-V&&(p[O][1]=-V));for(C=0;C<x;C++)P[C]=0}g.uC(G<<1,x,p),G+=x,f-=x,x=Math.min(f,b)}a.Pc(1993)}}},l.GL=function(s,a,u,p){if(s.mw)p=90*s.ef.bf(),d.ta.dK(a,u,-p,p);else{var f=s.Wf,g=s.ef,b=s.Yf;s=g.Xr();var x=b.Xr(),T=g.bf(),M=90*T,C=b.bf();if(f==null||f.count()==0){if(p=s/x,f=(g.Up()-b.Up())*C,d.ta.dK(a,u,-M,M),f!=0||p!=1)for(C=0;C<u;C++)a[C].x*=p,a[C].x+=f,a[C].y*=p}else{g=Math.min(u,p.length),M=d.O.lg(g),b=360*C,T=C/T;for(var O=!0,F=0,P=0;u!=0;){for(C=0;C<g;C++)M[C]=a[C+P].x;for(C=a[0].x,d.ta.Jy(p,a,P,g),f.transform(p,g,s,x),d.ta.Iy(a,P,p,g),O&&(F=a[0].x-T*C,O=!1),C=0;C<g;C++){var G=a[P+C].x-M[C]*T-F;200<Math.abs(G)&&(a[P+C].x=0<G?a[P+C].x-b:a[P+C].x+b)}P+=g,u-=g,g=Math.min(u,p.length)}}}},l.dv=function(s,a){return s=s.gh(),isNaN(a)||s.Ju(a,0),s},l.UQ=function(s,a,u,p,f,g,b,x){for(var T=l.dv(p,f),M=T.R(),C=M/360,O=l.pE*C,F=s.ub(0),P=a.Wc(),G=P?M/a.Oe().R():0,q=!1,V=new d.Da(u.description),Z=0,X=u.da();Z<X;++Z){var te=P,oe=new d.Ta(u.description);if(oe.addPath(u,Z,!0),b!=0){var me=l.PD(!0,oe,T.H-x,T.H,b);(q=q||me)&&(te=!1)}var Se=-1;te&&(Se=s.Ba(Z));var Ce=oe.ub(0),$e=oe.I(),Ue=0,Te=Ce.read(0),ut=0;me=3*p.Xd(0);var ot=!1,Rt=new d.h;Rt.Rc();var hi=new d.h;hi.Rc();for(var ir=!1,mi=1;mi<$e;++mi){var Pt=d.h.construct(Ce.eg(2*mi),Ce.eg(2*mi+1)),ct=Pt.x,Tt=ct+Ue,Mi=Tt-Te;if(Pt.x=Tt,Math.abs(Mi)>O){if(te){var _i=Se+(mi+1<$e?mi:0),fo=F.read(2*(Se+mi-1));_i=(F.read(2*_i)-fo)*G,Math.abs(Mi-_i)>1*C&&(te=!1)}te||(Tt=ct+(Ue-=d.lc.Cn(M,Tt-Te)),++ut,ir=Ue!=0,Pt.x=Tt)}else ot||d.ta.AG(hi,Rt,Pt,me)&&(ot=!0);ir&&Ce.write(2*mi,Tt),Te=Tt,hi.L(Rt),Rt.L(Pt)}0<ut&&oe.Pc(1993),te=oe.Na(0),$e=oe.Na($e-1),oe=d.h.tb(te,$e)<me?l.uQ(oe,p,f,g,ot):l.vQ(s,Z,oe,p,f),V.add(oe,!1)}return f=p.Xd(0),u=T.R()/180,l.Jt(V,T,.1*f,!1),V=V!=(f=d.ri.clip(V,T,f,u,g)),s=s.Ke(),b=0,0<(x=f.Ke())&&0>s?b=1:0>=x&&0<s&&(x==0?(x=NaN,a.Sb()==2?x=a.ml().Ke():a.Sb()==1&&(x=a.Oe().wF()),s>.99*x&&(b=-1)):b=-1),b!=0&&((a=new d.Da(f.description)).tp(T),(a=d.Xl.local().V(a,u,g)).add(f,!1),V=!0,f=a),V&&(f=d.Yl.local().V(f,p,!1,g)),f},l.vQ=function(s,a,u,p,f){var g=u.I(),b=u.Na(0),x=u.Na(g-1);f=(p=l.dv(p,f)).R(),b=d.lc.sign(x.x-b.x);var T=new d.l;u.xc(T);var M=p.gk();if(x=M-f,M+=f,0<=b){var C=Math.ceil((x-T.v)/f);for(C*=f;x>T.v+C;)C+=f;for(;x<T.C+C;)C-=f;var O=C;720<T.R()&&(M=x+360*Math.ceil(T.R()/360))}else{for(C=Math.ceil((M-T.C)/f),C*=f;M<T.C+C;)C-=f;for(;M>T.v+C;)C+=f;O=C,720<T.R()&&(x=M-360*Math.ceil(T.R()/360))}C=b*f;var F=d.l.construct(T.v,T.G,T.C,T.H);F.move(O,0);var P=new d.Dd;P.gg(O,0),u.Oc(P),(T=new d.Ta(u.description)).add(u,!1),O=u.Na(g-1),f=0;for(var G=T.Na(0).x,q=0;0<b?F.C<M:F.v>x;)1024<=q&&(q=0),F.move(C,0),P.Gb=C,u.Oc(P),G+=C,p.v<=G&&p.C>=G&&(f=T.I()-1),u.Cb(0,O),O=u.Na(g-1),T.Dr(u,0,0,g-1,!1);return u=new d.Da(T.description),g=0<s.Ir(a),u.add(T,!1),s=T.Na(0),x=T.Na(T.I()-1),a=u.da()-1,(0>b?g:!g)?(b=d.h.construct(x.x,p.H),u.Ci(b),b=d.h.construct(p.gk(),p.H),u.Ci(b),p=d.h.construct(s.x,p.H)):(b=d.h.construct(x.x,p.G),u.Ci(b),b=d.h.construct(p.gk(),p.G),u.Ci(b),p=d.h.construct(s.x,p.G)),u.Ci(p),u.xG(0,a,0),u.kO(f),u},l.uQ=function(s,a,u,p,f){var g=new d.Da(s.description);g.add(s,!1),g.DB(0,g.I()-1);var b=new d.l;g.xc(b);var x=(u=l.dv(a,u)).R(),T=Math.ceil((u.v-b.v)/x);for(T*=x;u.v>b.v+T;)T+=x;for(;u.v<b.C+T;)T-=x;if((T+=x)!=0){b.move(T,0);var M=new d.Dd;M.gg(T,0),g.Oc(M)}if(u.v<=b.v&&u.C>b.C)return f&&(f=g.Ke(),a=(g=d.Yl.local().V(g,a,!0,p)).Ke(),(a=d.lc.sign(f)!=d.lc.sign(a))&&g.oJ()),g;for((s=new d.Da(s.description)).add(g,!1),f=f||b.R()>x-a.Xd(0);b.v<u.C;)b.move(x,0),(M=new d.Dd).gg(x,0),g.Oc(M),s.add(g,!1);return f&&(f=s.Ke(),s.Yo(1),a=(s=d.Yl.local().V(s,a,!0,p)).Ke(),(a=d.lc.sign(f)!=d.lc.sign(a))&&s.oJ()),s},l.PD=function(s,a,u,p,f){for(var g=a.ub(0),b=a.I(),x=!1,T=0;T<b;T++){var M=d.h.construct(g.eg(2*T),g.eg(2*T+1));if(1&f&&M.y>=u){x=!0;break}if(2&f&&M.y<=-u){x=!0;break}}if(!x)return!1;g=!1,s&&(g=a.Nn(0)),b=(s=new d.gd).Ib(a),x=s.Ob(b);var C=-1,O=!0,F=new d.h;F.Rc(),T=new d.Sa;for(var P=-1,G=s.Xa(x);G!=-1;G=s.U(G)){M=s.Na(G);var q=1&f&&90<=M.y?1:0;if(q|=2&f&&M.y<=-u?2:0,0<C&&C!=q){if(F.x!=M.x){F.x=M.x,s.Vi(s.Ma(G),T);var V=s.wj(x,G,T);s.mf(V,F)}if(g)for(P=P!=-1?s.U(P):s.Xa(x),V=s.Ma(G);P!=V;)P=s.pd(P,!1);P=-1}0<q&&(M.y=d.lc.Cn(p,M.y),s.mf(G,M),O||C==q||(M.x!=F.x?(s.Vi(G,T),V=s.wj(x,G,T),s.Cb(V,F.x,M.y),P=V):P=G)),C=q,F=M,O=!1}if(g){if(P!=-1)for(P=s.U(P);P!=-1;)P=s.pd(P,!1);u=s.Xa(x),s.fq(u,s.rj(x))||(s.Vi(u,T),s.wj(x,-1,T))}return s.Ne(b).copyTo(a),!0},l.Mz=function(s,a,u,p){var f=s;if(f.B()||u==L.DontClip)return f;var g=f.getType();if(g==33)return f=[(p=f).D()],l.yG(f,1,a,u),f[0].isNaN()?p.Oa():p.Cb(f[0]),s;var b=(s=a.sc()).bf(),x=90*b,T=180*b,M=360*b,C=a.zi(),O=.5*b,F=new d.l;f.A(F);var P=a.Vr(),G=a.PQ(),q=P.getType()==197;if(a=new d.l,P.A(a),u==L.PannableFold&&(u=s.Oe().R(),a.v=C-.5*u,a.C=a.v+u),F.G<-x||F.H>x){if(new d.l().K(F.v-b,-x,F.C+b,x),(f=d.ri.Nu(f,a,s,NaN,0,p)).B())return f;f.A(F)}if(G&&(a.H<F.G||a.G>F.H))return f.Ia();if(F.R()>M&&(f=l.Hp(f,C-T,M,s,!0,0,!0,p)).A(F),(x=l.eO(F.v,F.C,a.v,a.C,M))!=0&&F.move(x,0),F.C>a.C||F.v<a.v){if(F.C>a.C)for(;F.v>=a.C;)F.move(-M,0),x-=M;for(;F.v<a.C-M;)F.move(M,0),x+=M}if(u=d.ta.Hu(s,P),x!=0&&((b=new d.Dd).gg(x,0),f.Oc(b)),G){if(q&&a.contains(F))return f;for(G=[null,null],x=0;2>x;x++){if(q?b=d.aa.Hc(g)?d.ri.clip(f,a,u,O,p):d.ri.clip(f,a,u,0,p):(b=d.Xj.local().V(f,P,s,p))==P&&(b=d.aa.jg(b)),a.v<=F.v&&a.C>=F.C||a.v>=F.v&&a.C<=F.C)return b;G[x]=b,x==0&&(F.move(-M,0),(b=new d.Dd).gg(-M,0),f.Oc(b))}if(g==550)G[0].Fd(G[1],0,-1);else if(d.aa.Hc(g))G[0].add(G[1],!1);else{if(g!=33)throw d.i.fa("intersect_with_GCS_horizon: unexpected geometry type");G[0].B()&&(G[0]=G[1])}return G[0]}if(a.H<F.G||a.G>F.H)return f;for(g=0;!f.B()&&F.C>a.v;)g!=0&&((b=new d.Dd).gg(g,0),f.Oc(b)),d.dj.local().V(4,f,P,s,p)||P==(f=d.kp.local().V(f,P,s,p))&&(f=d.aa.jg(f)),g!=0&&((O=new d.Dd).gg(-g,0),f.Oc(O)),g-=M,F.move(-M,0);return f},l.yG=function(s,a,u,p){if(a!=0&&p!=L.DontClip)if(p==L.PannableFold){p=u.HR();for(var f=a,g=0;g<a;g++)(s[g].y>p.H||s[g].y<p.G)&&(s[g].Rc(),f--);f!=0&&l.av(s,a,p.v,p.R())}else{var b=90*(p=u.bf()),x=180*p;for(p*=360,f=a,g=0;g<a;g++)(s[g].y>b||s[g].y<-b)&&(s[g].Rc(),f--);if(f!=0){(f=new d.l).Zw(s,a),b=u.Vr();var T=u.hv();g=b.getType()==197;var M=new d.l;if(b.A(M),!T||!(M.H<f.G||M.G>f.H))if(T)if(l.av(s,a,M.gk()-x,p),f=a,g)for(g=0;g<a;g++)M.contains(s[g])||(s[g].Rc(),f--);else for(u=d.ta.Hu(u.sc(),b),g=0;g<a;g++)(x=d.hd.Yd(b,s[g],u)!=0)||(s[g].Rc(),f--);else for(l.av(s,a,-x,p),f=a,u=d.ta.Hu(u.sc(),b),g=0;g<a;g++)(x=s[g]).isNaN()&&f--,T=l.tE(x.x,M.v,M.C,p),x.x+=T,(x=d.hd.Yd(b,x,u)!=0)&&(s[g].Rc(),f--)}}},l.Hp=function(s,a,u,p,f,g,b,x){var T=s.getType(),M=a+u;if(T===33){var C=(p=f?s:s.Of()).Lg();return(C<a||C>=M||b&&C==M)&&(C+=Math.ceil((a-C)/u)*u,C=d.O.Rk(C,a,M),p.cC(C)),p}if(s.B()||(C=new d.l,s.A(C),C.B()))return s;var O=new d.Nc;C.cn(O);var F=new d.Nc;if(F.K(a,M),F.contains(O))return s;if((M=new d.l).K(C),T===550){for(x=(p=f?s:s.Of()).ub(0),T=2*p.I(),M=!1,a=0;a<T;a+=2)((C=x.read(a))<F.oa||C>=F.va||b&&C==F.va)&&(M=!0,C+=Math.ceil((F.oa-C)/u)*u,C=F.It(C),x.write(a,C));return M&&p.Pc(1993),p}if(T==197)return u=f?s:s.Of(),C.Ea(M),u.Xo(C),u;var P=.1*Math.max(C.ca(),C.R());for(M.W(0,P),b=s,F=p.Xd(0),s=d.Gh.local(),f=new d.Dd;;){var G=Math.floor((O.oa-a)/u),q=Math.ceil((O.va-a)/u);if(!(3<q-G))break;G=Math.floor(.5*(q+G)),M.v=C.v-P,M.C=a+u*G;var V=d.ri.clip(b,M,F,g,x);M.v=M.C,M.C=C.C+P;var Z=d.ri.clip(b,M,F,g,x);f.gg((G-q)*u,0),Z.Oc(f),T==1736?b=s.V(V,Z,p,null):(b=V).add(Z,!1),b.A(C),C.cn(O)}for(M.v=a,M.C=a+u,(a=new d.l).K(M),a.W(F,0),(a=Math.floor((C.v-M.v)/u)*u)!=0?(M.move(a,0),f.gg(-a,0)):f.RB(),a=T==1607?new d.Ta(b.description):new d.Da(b.description),g=new d.l,O=new d.l;C.C>M.v;)(P=d.ri.clip(b,M,F,0,x)).A(O),(T==1607?!P.B()&&(O.R()>F||O.ca()>F):!P.B()&&(T!=1736||O.R()>F))&&(P.Oc(f),P.A(O),a.A(g),g.W(F,F),g.isIntersecting(O)&&T==1736?a=s.V(a,P,p,null):a.add(P,!1)),M.move(u,0),f.shift(-u,0);return a},l.av=function(s,a,u,p){for(var f=u+p,g=0;g<a;g++){var b=s[g].x;u<=b&&b<f||!(b<u||b>f||b==f)||(b+=Math.ceil((u-b)/p)*p,b=d.O.Rk(b,u,f),s[g].x=b)}},l.Fn=function(s,a,u,p,f,g){if(!a.Wc())throw d.i.fa("fold_into_360_degree_range");if(s.B())return s;if(a.Sb()==2){u=a.pv();var b=a.ov()-u}else{var x=a.bf();b=360*x,u-=180*x}return l.Hp(s,u,b,a,p,f,!0,g)},l.qF=function(s,a,u,p){if(u.Sb()==2)p=u.pv(),u=u.ov()-p;else{var f=u.bf();u=360*f,p-=180*f}l.av(s,a,p,u)},l.lj=function(s,a){var u=a.Oe();if(s.getType()==33){var p=s.ih();return u.G<=p&&p<=u.H?s:s.Ia()}p=new d.l,s.A(p);var f=new d.l;return f.K(u),f.v=p.v,f.C=p.C,f.W(.01*f.ca(),0),u=d.ta.uy(a,p),f.contains(p)?s:d.ri.clip(s,f,u,0,null)},l.ir=function(s,a,u){return s>a.C&&s-a.C<u?a.C:s<a.v&&a.v-s<u?a.v:s},l.FX=function(s,a,u,p){p.x=l.ir(s.x,a,u),p.y=s.y},l.EX=function(s,a,u,p){for(var f=0;f<a;f++)s[f].y<u.G||s[f].y>u.H?s[f].Rc():s[f].x=l.ir(s[f].x,u,p)},l.Jt=function(s,a,u,p){if(!s.B()){var f=s.getType();if(!p||f!=1736)if(d.aa.xj(f)){p=s.ub(0),f=0;for(var g=s.I();f<g;f++){var b=p.read(2*f),x=l.ir(b,a,u);x!=b&&p.write(2*f,x)}s.Pc(1993)}else if(f==197)p=new d.l,s.A(p),p.v=l.ir(p.v,a,u),p.C=l.ir(p.C,a,u),s.Xo(p);else{if(f!=33)throw d.i.fa("internal error");s.cC(l.ir(s.Lg(),a,u))}}},l.uS=function(s,a,u,p){var f=new d.gd,g=f.Ib(s);return s=d.ta.Hu(a,s),l.ks(f,g,a,s,u,!0,p),f.Ne(g)},l.ks=function(s,a,u,p,f,g,b){if(!u.Wc())throw d.i.N("invalid call");var x=u.Oe(),T=u.sc(),M=T.eh().getDatum().getSpheroid();T=T.Hd().ai;var C=M.getFlattening();M=M.getAxis(),C*=2-C;var O=new d.Nc;x.cn(O);var F=null,P=[[0,0],[0,0]];if(u.Sb()==2?(F=u.eh(),g?(P[0][0]=l.Zm(b,O),P[0][1]=x.Jp(),d.ej.projToGeog(F,1,P),x=P[0][0]*T):(P[0][0]=x.gk(),P[0][1]=b,d.ej.projToGeog(F,1,P),x=P[0][1]*T)):x=b*T,!g&&x!=0&&f!=h.GreatElliptic)throw d.i.fa("invalid argument");var G=new d.ga,q=[0],V=new d.h,Z=new d.h,X=new d.h,te=[null,null],oe=new d.h,me=new d.h,Se=new d.h,Ce=new d.h;for(a=s.Ob(a);a!=-1;a=s.Rb(a)){var $e=s.Xa(a);s.D($e,oe);for(var Ue=!1,Te=$e=s.U($e);Te!=-1;Te=s.U(Te)){if(Te==$e){if(Ue)break;Ue=!0}if(s.D(Te,me),g&&(p<b-oe.x&&me.x-b>p||p<b-me.x&&oe.x-b>p)||!g&&(b!=0||p<-oe.y&&me.y>p||p<-me.y&&oe.y>p))do if(!(Math.abs(oe.x-me.x)>=.5*O.R())){if(u.Sb()==2?(P[0][0]=l.Zm(oe.x,O),P[0][1]=oe.y,P[1][0]=l.Zm(me.x,O),P[1][1]=me.y,d.ej.projToGeogCenter(F,2,P,0),Se.x=P[0][0]*T,Se.y=P[0][1]*T,Ce.y=P[1][1]*T):(Se.x=oe.x*T,Se.y=oe.y*T,Ce.y=me.y*T),Ce.x=2*(me.x-oe.x)*Math.PI/O.R()+Se.x,g){if(Z.x=x,Z.y=l.Nz(M,C,Se,Ce,x,f),isNaN(Z.y))break;te[0]=Z;var ut=1}else if(f==h.GreatElliptic){var ot=[0,0];if((ut=d.Ox.Oz(C,Se,Ce,x,ot))==0)break;Z.x=ot[0],Z.y=x,te[0]=Z,ut==2&&(X.x=ot[1],X.y=x,te[1]=X)}else{if(Z.x=l.Lz(M,C,Se,Ce,f),isNaN(Z.x))break;Z.y=0,te[0]=Z,ut=1}var Rt=-1;for(ot=0;ot<ut;ot++){d.kb.wd(M,C,Se.x,Se.y,Ce.x,Ce.y,G,null,null,f);var hi=G.u;d.kb.wd(M,C,Se.x,Se.y,te[ot].x,te[ot].y,G,null,null,f);var ir=G.u;if(u.Sb()==2?(P[0][0]=te[ot].x/T,P[0][1]=te[ot].y/T,d.ej.geogToProj(F,1,P),g?(V.y=P[0][1],V.x=b):(V.x=l.os(P[0][0],oe.x,me.x,O),V.y=b)):g?(V.x=b,V.y=te[ot].y/T):(V.x=l.os(te[ot].x/T,oe.x,me.x,O),V.y=b),q[0]=0<hi?d.O.Rk(ir/hi,0,1):.5,q[0]==0||q[0]==1)break;Rt>q[0]||(Rt=s.Ma(Te),s.Ul(Rt,q,1),s.Cb(s.U(Rt),V.x,V.y),Rt=q[0])}}while(!1);oe.L(me)}}},l.Zm=function(s,a){var u=a.va-a.oa;return a.It(s-Math.floor((s-a.oa)/u)*u)},l.os=function(s,a,u,p){var f=new d.Nc;for(f.K(a,u),u=p.R(),s=Math.floor((s-a)/u)*u+s,f=f.sf();Math.abs(s-f)>Math.abs(s+u-f);)s+=u;return s},l.Sn=function(s,a,u){return s=d.qr.Cp(s),a=d.qr.mx(s,d.qr.Cp(a)),(u=d.qr.mx(s,d.qr.Cp(u)))==0||0<a&&0<u&&u<=a||0>a&&0>u&&u>=a},l.Nz=function(s,a,u,p,f,g){if(g==h.GreatElliptic)return d.Ox.SS(a,u,p,f);if(Math.abs(u.x-p.x)>=Math.PI||!l.Sn(u.x,p.x,f))return NaN;if(u.x>p.x)var b=p;else b=u,u=p;p=new d.ga;var x=new d.ga,T=new d.ga;d.kb.wd(s,a,b.x,b.y,u.x,u.y,x,p,null,g);var M=x.u,C=0,O=1,F=new d.h;for(F.L(b);M*(O-C)>1e-12*s;){var P=.5*(C+O);if(d.kb.oj(s,a,b.x,b.y,M*P,p.u,x,T,g),F.x=x.u,F.y=T.u,F.x==f)break;if(l.Sn(b.x,F.x,f))O=P;else{if(!l.Sn(u.x,F.x,f))return NaN;C=P}}return F.y},l.Lz=function(s,a,u,p,f){if(f==h.GreatElliptic)return s=[0,0],d.Ox.Oz(a,u,p,0,s),s[0];if(u.y>p.y)var g=p;else g=u,u=p;if((p=new d.Nc).K(g.y,u.y),!p.contains(0)||Math.abs(g.x-u.x)>=Math.PI)return NaN;if(g.x==u.x)return g.x;var b=new d.ga,x=new d.ga,T=new d.ga;d.kb.wd(s,a,g.x,g.y,u.x,u.y,x,b,null,f);var M=x.u,C=0,O=1,F=new d.h;for(F.L(g);M*(O-C)>1e-12*s;){var P=.5*(C+O);if(d.kb.oj(s,a,g.x,g.y,M*P,b.u,x,T,f),F.x=x.u,F.y=T.u,p.K(g.y,F.y),F.y==0)break;if(p.contains(0))O=P;else{if(p.K(u.y,F.y),!p.contains(0))return NaN;C=P}}return F.x},l.WI=function(s,a,u,p){if(!s.ef.Wc())return!1;var f=new d.de(a.description);if(f.Fd(a,0,-1),p=d.Hx.local().V(f,s,p),f=a.I(),u.Oa(),f!=p.I())return!1;var g=new d.l;a.A(g);var b=new d.l;if(p.A(b),g=g.R(),b=b.R(),g!=0&&b!=0){if(b/=g,s=s.Yf.gh().R()/s.ef.gh().R(),1e-10<Math.abs(b/s-1))return!1}else if(g!=0||b!=0)return!1;for(u.add(a,!1),a=new d.h,s=0;s<f;s++)p.D(s,a),u.Cb(s,a);return!0},l.qN=function(s,a){return(s%=360*a)>=180*a&&(s-=360*a),s},l.UI=function(s,a,u,p){if(u==L.Clip){var f=a.ml();f.getType()==197?(u=new d.l,f.A(u),f=d.ta.uy(a,u),s=d.ri.clip(s,u,f,5e4*a.pm(),p)):d.dj.local().V(1,f,s,a,p)||(s=d.Xj.local().V(s,f,a,p))==f&&(s=d.Vk.jg(s))}else a.Wc()&&(p=new d.l,s.xc(p),a.Oe().contains(p)||(l.Jt(s,a.Oe(),a.Xd(0),!0),u==L.PannableFold&&(s=l.lj(s,a)),s=l.Fn(s,a,0,!0,1e5*a.pm(),null)));return s},l.XD=function(s,a,u){var p=a.Wr();if(p==null)return s;var f=(a=a.sc()).Oe().R(),g=new d.l;s.xc(g);var b=new d.Nc;g.cn(b),g=p.Ga(),p=null;for(var x=new d.Dd;g.$a();)for(;g.Ha();){var T=g.ha(),M=T.Tg(0,0),C=new d.Nc;for(C.K(M.oa,M.va),M=0;C.va>b.oa;)C.move(-f),--M;for(;C.oa<=b.va;){if(C.isIntersecting(b)){p==null&&(p=new d.Ta);var O=d.yb.cP(T.ac(),T.wc());M!=0&&(x.gg(M*f,0),O.Oc(x)),p.oc(O,!0)}C.move(f),++M}}return p!=null?(a=d.ta.gO(a,p),a=d.ta.Er(a),d.$t.lP(s,p,a,u)):s},l.eO=function(s,a,u,p,f){return s>=u&&a<=p?0:l.tE(.5*(a+s),u,p,f)},l.tE=function(s,a,u,p){return d.lc.round((.5*(u+a)-s)/p)*p},l.VQ=function(s,a,u,p,f,g,b,x){var T=l.dv(p,f),M=T.R(),C=M/360,O=l.pE*C,F=s.ub(0),P=a.Wc(),G=P?M/a.Oe().R():0;a=s.Ia();for(var q=0,V=u.da();q<V;++q){var Z=P,X=new d.Ta(u.description);X.addPath(u,q,!0);var te=u.dc(q);b!=0&&(te=l.PD(te,X,T.H-x,T.H,b))&&(Z=!1);var oe=-1;te=X.I();var me=!1;Z&&(oe=s.Ba(q),me=s.dc(q));var Se=X.ub(0),Ce=0,$e=Se.read(0),Ue=0,Te=3*p.Xd(0),ut=!1,ot=new d.h;ot.Rc();var Rt=new d.h;Rt.Rc();for(var hi=!1,ir=1;ir<te;++ir){var mi=d.h.construct(Se.eg(2*ir),Se.eg(2*ir+1)),Pt=mi.x,ct=Pt+Ce,Tt=ct-$e;if(mi.x=ct,Math.abs(Tt)>O){if(Z){var Mi=oe+ir-1,_i=oe;(!me||ir+1<te)&&(_i+=ir),Mi=F.read(2*Mi),_i=(F.read(2*_i)-Mi)*G,Math.abs(Tt-_i)>1*C&&(P=!1)}Z||(ct=Pt+(Ce-=d.lc.Cn(M,ct-$e)),++Ue,hi=Ce!=0,mi.x=ct)}else ut||d.ta.AG(ot,Rt,mi,Te)&&(ut=!0);hi&&Se.write(2*ir,ct),$e=ct,ot.L(Rt),Rt.L(mi)}Ue!=0&&X.Pc(1993),Z=X.Na(0),te=X.Na(te-1),d.h.tb(Z,te),X=l.wQ(X,p,isNaN(f)?0:f,g),a.add(X,!1)}return s=p.Xd(0),u=T.R()/180,l.Jt(a,T,.1*s,!1),d.ri.clip(a,T,s,u,g)},l.wQ=function(s,a,u,p){return l.Fn(s,a,u,!0,0,p)},l.OS=function(s,a,u,p){var f=s.getType();if(f==1736)for(a=a!=null?a.Xd(0):0,f=0;f<p;f++)d.hd.Yd(s,u[f],a)!=1&&u[f].Rc();else{if(f!=197)throw d.i.N();for(f=0;f<p;f++)s.dP(u[f])||u[f].Rc()}},l.$k=function(s,a,u,p){if(32>u)for(var f=new d.Sa,g=0;g<u;g++)f.Cb(a[g]),s.$k(f,p).D(a[g]);else{var b=new d.de;for(b.re(3),b.HD(a,u),f=b.ub(3),g=0;g<u;g++)f.write(g,g);for(g=s.$k(b,p),s=g.ub(0),f=g.ub(3),p=d.h.construct(NaN,NaN),b=0;b<u;b++)a[b]=p;for(u=g.I(),g=0;g<u;g++)p=f.read(g),s.tc(2*g,a[p])}},l.Zk=function(s,a,u,p){if(32>u)for(var f=new d.Sa,g=0;g<u;g++)f.Cb(a[g]),s.Zk(f,p).D(a[g]);else{var b=new d.de;for(b.re(3),b.HD(a,u),f=b.ub(3),g=0;g<u;g++)f.write(g,g);for(g=s.Zk(b,p),s=g.ub(0),f=g.ub(3),p=d.h.construct(NaN,NaN),b=0;b<u;b++)a[b]=p;for(u=g.I(),g=0;g<u;g++)p=f.read(g),s.tc(2*g,a[p])}},l.pE=210,l}()}(Y||(Y={})),function(d){var L;(L=d.UL||(d.UL={}))[L.rightSide=1]="rightSide";var S=function(){function h(l,s,a){this.Bs=new d.h,l===void 0?this.Io=-1:(this.Bs.L(l),this.Io=s,this.Ka=a,this.nw=0)}return h.prototype.WJ=function(l){this.nw=l?1|this.nw:-2&this.nw},h.prototype.B=function(){return 0>this.Io},h.prototype.fz=function(){if(this.B())throw d.i.fa("invalid call");return new d.Sa(this.Bs.x,this.Bs.y)},h.prototype.Ua=function(){if(this.B())throw d.i.fa("invalid call");return this.Io},h.prototype.hz=function(){if(this.B())throw d.i.fa("invalid call");return this.Ka},h.prototype.Sz=function(){return!!(1&this.nw)},h.prototype.ey=function(l,s,a,u){this.Bs.x=l,this.Bs.y=s,this.Io=a,this.Ka=u},h}();d.$l=S}(Y||(Y={})),function(d){var L=function(){function h(){}return h.prototype.Uo=function(l,s){if(this.th.resize(0),this.Ii.length=0,this.tk=-1,l.xc(this.Ek),this.Ek.W(s,s),this.Ek.isIntersecting(this.Fb.Ca)){var a=l.getType();(this.vs=d.aa.yd(a))?(this.TH=l.ac(),this.SH=l.wc(),this.qa=s):this.qa=NaN,this.th.add(this.Fb.kf),this.Ii.push(this.Fb.Ca),this.Qs=this.Fb.Ur(this.Fb.kf)}else this.Qs=-1},h.prototype.Xi=function(l,s){this.th.resize(0),this.Ii.length=0,this.tk=-1,this.Ek.K(l),this.Ek.W(s,s),this.qa=NaN,this.Ek.isIntersecting(this.Fb.Ca)?(this.th.add(this.Fb.kf),this.Ii.push(this.Fb.Ca),this.Qs=this.Fb.Ur(this.Fb.kf),this.vs=!1):this.Qs=-1},h.prototype.next=function(){if(this.th.size==0)return-1;this.tk=this.Qs;var l=null,s=null,a=null,u=null;this.vs&&(l=new d.h,s=new d.h,a=new d.l);for(var p=!1;!p;){for(;this.tk!=-1;){var f=this.Fb.bz(this.Fb.fv(this.tk));if(f.isIntersecting(this.Ek)){if(!this.vs){p=!0;break}if(l.L(this.TH),s.L(this.SH),a.K(f),a.W(this.qa,this.qa),0<a.zy(l,s)){p=!0;break}}this.tk=this.Fb.nv(this.tk)}if(this.tk==-1){f=this.th.Fc();var g=this.Ii[this.Ii.length-1];for(u==null&&((u=[])[0]=new d.l,u[1]=new d.l,u[2]=new d.l,u[3]=new d.l),S.EJ(g,u),this.th.If(),--this.Ii.length,g=0;4>g;g++){var b=this.Fb.Lp(f,g);if(b!=-1&&0<this.Fb.WR(b)&&u[g].isIntersecting(this.Ek))if(this.vs){if(l.L(this.TH),s.L(this.SH),a.K(u[g]),a.W(this.qa,this.qa),0<a.zy(l,s)){var x=new d.l;x.K(u[g]),this.th.add(b),this.Ii.push(x)}}else(x=new d.l).K(u[g]),this.th.add(b),this.Ii.push(x)}if(this.th.size==0)return-1;this.tk=this.Fb.Ur(this.th.get(this.th.size-1))}}return this.Qs=this.Fb.nv(this.tk),this.tk},h.bP=function(l,s,a){var u=new h;return u.Fb=l,u.Ek=new d.l,u.th=new d.ia(0),u.Ii=[],u.Uo(s,a),u},h.aP=function(l,s,a){var u=new h;return u.Fb=l,u.Ek=new d.l,u.th=new d.ia(0),u.Ii=[],u.Xi(s,a),u},h.$O=function(l){var s=new h;return s.Fb=l,s.Ek=new d.l,s.th=new d.ia(0),s.Ii=[],s},h}();d.GY=L;var S=function(){function h(l,s){this.jf=new d.$c(11),this.Zh=new d.$c(5),this.ws=[],this.gw=new d.ia(0),this.Ca=new d.l,this.Nk(l,s)}return h.prototype.reset=function(l,s){this.jf.mj(!1),this.Zh.mj(!1),this.ws.length=0,this.gw.clear(!1),this.Nk(l,s)},h.prototype.vj=function(l,s){return this.zv(l,s,0,this.Ca,this.kf,!1,-1)},h.prototype.Jz=function(l,s,a){a=a==-1?this.kf:this.WF(a);var u=this.ca(a),p=this.oR(a);return this.zv(l,s,u,p,a,!1,-1)},h.prototype.ja=function(l){return this.jR(l)},h.prototype.GF=function(l){return this.bz(this.fv(l))},h.prototype.ca=function(l){return this.jv(l)},h.prototype.oR=function(l){var s=new d.l;s.K(this.Ca);var a=this.jv(l);l=this.QF(l);for(var u=0;u<2*a;u+=2){var p=d.O.truncate(3&l>>u);p==0?(s.v=.5*(s.v+s.C),s.G=.5*(s.G+s.H)):p==1?(s.C=.5*(s.v+s.C),s.G=.5*(s.G+s.H)):(p==2?s.C=.5*(s.v+s.C):s.v=.5*(s.v+s.C),s.H=.5*(s.G+s.H))}return s},h.prototype.WR=function(l){return this.Az(l)},h.prototype.vR=function(l,s){return L.bP(this,l,s)},h.prototype.MF=function(l,s){return L.aP(this,l,s)},h.prototype.getIterator=function(){return L.$O(this)},h.prototype.Nk=function(l,s){if(0>s||32<2*s)throw d.i.N("invalid height");this.BT=s,this.Ca.K(l),this.kf=this.jf.Ce(),this.jx(this.kf,0),this.ax(this.kf,0),this.NJ(this.kf,0),this.KJ(this.kf,0)},h.prototype.zv=function(l,s,a,u,p,f,g){if(!u.contains(s))return a==0?-1:this.zv(l,s,0,this.Ca,this.kf,f,g);if(!f)for(var b=p;b!=-1;b=this.IR(b))this.jx(b,this.Az(b)+1);(b=new d.l).K(u),u=p;var x=[];for(x[0]=new d.l,x[1]=new d.l,x[2]=new d.l,x[3]=new d.l;a<this.BT&&this.iO(u);a++){h.EJ(b,x);for(var T=!1,M=0;4>M;M++)if(x[M].contains(s)){T=!0;var C=this.Lp(u,M);C==-1&&(C=this.rP(u,M)),this.jx(C,this.Az(C)+1),u=C,b.K(x[M]);break}if(!T)break}return this.sS(l,s,a,b,u,f,p,g)},h.prototype.sS=function(l,s,a,u,p,f,g,b){var x=this.NF(p);if(f){if(p==g)return b;this.SP(b),f=b}else f=this.tP(),this.NB(f,l),this.KW(this.fv(f),s);return this.mX(f,p),x!=-1?(this.hx(f,x),this.bx(x,f)):this.GJ(p,f),this.SB(p,f),this.ax(p,this.lv(p)+1),this.hO(p)&&this.MQ(a,u,p),f},h.prototype.SP=function(l){var s=this.WF(l),a=this.NF(s),u=this.OR(l),p=this.nv(l);this.Ur(s)==l?(p!=-1?this.hx(p,-1):this.SB(s,-1),this.GJ(s,p)):a==l?(this.bx(u,-1),this.SB(s,u)):(this.hx(p,u),this.bx(u,p)),this.hx(l,-1),this.bx(l,-1),this.ax(s,this.lv(s)-1)},h.EJ=function(l,s){var a=.5*(l.v+l.C),u=.5*(l.G+l.H);s[0].K(a,u,l.C,l.H),s[1].K(l.v,u,a,l.H),s[2].K(l.v,l.G,a,u),s[3].K(a,l.G,l.C,u)},h.prototype.hO=function(l){return this.lv(l)==8&&!this.gG(l)},h.prototype.MQ=function(l,s,a){var u=this.Ur(a);do{var p=this.fv(u),f=this.Zh.T(u,0);p=this.bz(p),this.zv(f,p,l,s,a,!0,u),u=f=this.nv(u)}while(u!=-1)},h.prototype.iO=function(l){return 8<=this.lv(l)||this.gG(l)},h.prototype.gG=function(l){return this.Lp(l,0)!=-1||this.Lp(l,1)!=-1||this.Lp(l,2)!=-1||this.Lp(l,3)!=-1},h.prototype.rP=function(l,s){var a=this.jf.Ce();return this.OW(l,s,a),this.jx(a,0),this.ax(a,0),this.Pk(a,l),this.KJ(a,this.jv(l)+1),this.NJ(a,s<<2*this.jv(l)|this.QF(l)),a},h.prototype.tP=function(){var l=this.Zh.Ce();if(0<this.gw.size){var s=this.gw.Fc();this.gw.If()}else s=this.ws.length,this.ws.push(new d.l);return this.LW(l,s),l},h.prototype.Lp=function(l,s){return this.jf.T(l,s)},h.prototype.OW=function(l,s,a){this.jf.S(l,s,a)},h.prototype.Ur=function(l){return this.jf.T(l,4)},h.prototype.GJ=function(l,s){this.jf.S(l,4,s)},h.prototype.NF=function(l){return this.jf.T(l,5)},h.prototype.SB=function(l,s){this.jf.S(l,5,s)},h.prototype.QF=function(l){return this.jf.T(l,6)},h.prototype.NJ=function(l,s){this.jf.S(l,6,s)},h.prototype.lv=function(l){return this.jf.T(l,7)},h.prototype.Az=function(l){return this.jf.T(l,8)},h.prototype.ax=function(l,s){this.jf.S(l,7,s)},h.prototype.jx=function(l,s){this.jf.S(l,8,s)},h.prototype.IR=function(l){return this.jf.T(l,9)},h.prototype.Pk=function(l,s){this.jf.S(l,9,s)},h.prototype.jv=function(l){return this.jf.T(l,10)},h.prototype.KJ=function(l,s){this.jf.S(l,10,s)},h.prototype.jR=function(l){return this.Zh.T(l,0)},h.prototype.NB=function(l,s){this.Zh.S(l,0,s)},h.prototype.OR=function(l){return this.Zh.T(l,1)},h.prototype.nv=function(l){return this.Zh.T(l,2)},h.prototype.hx=function(l,s){this.Zh.S(l,1,s)},h.prototype.bx=function(l,s){this.Zh.S(l,2,s)},h.prototype.WF=function(l){return this.Zh.T(l,3)},h.prototype.mX=function(l,s){this.Zh.S(l,3,s)},h.prototype.fv=function(l){return this.Zh.T(l,4)},h.prototype.LW=function(l,s){this.Zh.S(l,4,s)},h.prototype.bz=function(l){return this.ws[l]},h.prototype.KW=function(l,s){this.ws[l].K(s)},h}();d.du=S}(Y||(Y={})),function(d){var L;(L=d.aL||(d.aL={}))[L.Outside=0]="Outside",L[L.Inside=1]="Inside",L[L.Border=2]="Border";var S=function(){function l(s,a){this.PT=a,this.Vh=s}return l.prototype.setColor=function(s,a){this.iH!=a&&s.flush(),this.iH=a},l.prototype.gF=function(s,a){for(var u=0;u<a;)for(var p=s[u++],f=s[u++],g=s[u++]*this.PT;p<f;p++)this.Vh[g+(p>>4)]|=this.iH<<2*(15&p)},l}();d.HY=S;var h=function(){function l(s,a,u){this.Vh=null,this.SA=this.Ik=this.cI=this.aI=this.Es=this.qH=this.Gf=this.Um=0,this.Ri=this.Jk=this.vl=null,this.Fz(s,a,u)}return l.create=function(s,a,u){if(!l.zE(s))throw d.i.N();return l.wP(s,a,u)},l.pW=function(s){switch(s){case 0:s=1024;break;case 1:s=16384;break;case 2:s=262144;break;default:throw d.i.fa("Internal Error")}return s},l.zE=function(s){return!(s.B()||s.getType()!=1607&&s.getType()!=1736)},l.prototype.rQ=function(s,a){a=a.Ga();for(var u=new d.h,p=new d.h;a.$a();)for(;a.Ha();){var f=a.ha();if(f.getType()!=322)throw d.i.fa("Internal Error");s.Eh(f.ac(),u),s.Eh(f.wc(),p),this.Ri.jy(u.x,u.y,p.x,p.y)}this.Ri.iJ(d.Px.Cx)},l.prototype.sQ=function(){throw d.i.fa("Internal Error")},l.prototype.Ry=function(s,a){for(var u=1;4>u;u++)s.jy(a[u-1].x,a[u-1].y,a[u].x,a[u].y);s.jy(a[3].x,a[3].y,a[0].x,a[0].y),this.Ri.iJ(d.Px.Cx)},l.prototype.rK=function(s,a,u){for(var p=[null,null,null,null],f=0;f<p.length;f++)p[f]=new d.h;a=a.Ga(),u=this.Jk.dY(u)+1.5,f=new d.h;for(var g=new d.h,b=new d.h,x=new d.h,T=new d.h,M=new d.l,C=new d.h;a.$a();){var O=!1,F=!0;for(C.ma(0,0);a.Ha();){var P=a.ha();if(x.x=P.sa,x.y=P.na,T.x=P.pa,T.y=P.la,M.Oa(),M.Zb(x.x,x.y),M.Lk(T.x,T.y),this.vl.HG(M)){this.Jk.Eh(T,T),F?(this.Jk.Eh(x,x),C.L(x),F=!1):x.L(C),f.uc(T,x);var G=.5>(P=f.length());P==0?f.ma(1,0):(G||C.L(T),f.scale(u/P),g.ma(-f.y,f.x),b.ma(f.y,-f.x),x.sub(f),T.add(f),p[0].add(x,g),p[1].add(x,b),p[2].add(T,b),p[3].add(T,g),G?O=!0:this.Ry(s,p))}else O&&(this.Ry(s,p),O=!1),F=!0}O&&this.Ry(s,p)}},l.prototype.sC=function(s){return d.O.truncate(s*this.qH+this.aI)},l.prototype.tC=function(s){return d.O.truncate(s*this.Es+this.cI)},l.wP=function(s,a,u){return new l(s,a,u)},l.prototype.Fz=function(s,a,u){this.Gf=Math.max(d.O.truncate(2*Math.sqrt(u)+.5),64),this.Um=d.O.truncate((2*this.Gf+31)/32),this.vl=new d.l,this.Ik=a,u=0;for(var p=this.Gf,f=this.Um;8<=p;)u+=p*f,p=d.O.truncate(p/2),f=d.O.truncate((2*p+31)/32);this.Vh=d.O.lg(u,0),this.Ri=new d.Px,u=new S(this.Vh,this.Um,this),this.Ri.AX(this.Gf,this.Gf,u),s.A(this.vl),this.vl.W(a,a),p=new d.l;var g=a*(f=d.l.construct(1,1,this.Gf-2,this.Gf-2)).R();switch(a*=f.ca(),p.K(this.vl.sf(),Math.max(g,this.vl.R()),Math.max(a,this.vl.ca())),this.SA=this.Ik,this.Jk=new d.Dd,this.Jk.pS(p,f),new d.Dd,s.getType()){case 550:u.setColor(this.Ri,2),this.sQ();break;case 1607:u.setColor(this.Ri,2),this.rK(this.Ri,s,this.SA);break;case 1736:u.setColor(this.Ri,1),this.rQ(this.Jk,s),u.setColor(this.Ri,2),this.rK(this.Ri,s,this.SA)}this.qH=this.Jk.bb,this.Es=this.Jk.ab,this.aI=this.Jk.Gb,this.cI=this.Jk.Lb,this.XN()},l.prototype.XN=function(){this.Ri.flush();for(var s=0,a=this.Gf*this.Um,u=this.Gf,p=d.O.truncate(this.Gf/2),f=this.Um,g=d.O.truncate((2*p+31)/32);8<u;){for(u=0;u<p;u++)for(var b=2*u,x=2*u+1,T=0;T<p;T++){var M=2*T,C=2*T+1,O=M>>4;M=2*(15&M);var F=C>>4;C=2*(15&C);var P=this.Vh[s+f*b+O]>>M&3;P|=this.Vh[s+f*b+F]>>C&3,P|=this.Vh[s+f*x+O]>>M&3,P|=this.Vh[s+f*x+F]>>C&3,this.Vh[a+g*u+(T>>4)]|=P<<2*(15&T)}u=p,f=g,s=a,p=d.O.truncate(u/2),g=d.O.truncate((2*p+31)/32),a=s+f*u}},l.prototype.So=function(s,a){return this.vl.contains(s,a)?(s=this.sC(s),a=this.tC(a),0>s||s>=this.Gf||0>a||a>=this.Gf||(a=this.Vh[this.Um*a+(s>>4)]>>2*(15&s)&3)==0?0:a==1?1:2):0},l.prototype.Ro=function(s){if(!s.Ea(this.vl))return 0;var a=this.sC(s.v),u=this.sC(s.C),p=this.tC(s.G);if(s=this.tC(s.H),0>a&&(a=0),0>p&&(p=0),u>=this.Gf&&(u=this.Gf-1),s>=this.Gf&&(s=this.Gf-1),a>u||p>s)return 0;for(var f=Math.max(u-a,1)*Math.max(s-p,1),g=0,b=this.Um,x=this.Gf,T=0;;){if(32>f||16>x){for(f=p;f<=s;f++)for(var M=a;M<=u;M++)if(1<(T=this.Vh[g+b*f+(M>>4)]>>2*(15&M)&3))return 2;if(T==0)return 0;if(T==1)return 1}g+=b*x,x=d.O.truncate(x/2),b=d.O.truncate((2*x+31)/32),a=d.O.truncate(a/2),p=d.O.truncate(p/2),u=d.O.truncate(u/2),s=d.O.truncate(s/2),f=Math.max(u-a,1)*Math.max(s-p,1)}},l.prototype.RR=function(){return this.Gf*this.Um},l}();d.Nx=h}(Y||(Y={})),function(d){var L;(L=d.VL||(d.VL={}))[L.contains=1]="contains",L[L.within=2]="within",L[L.equals=3]="equals",L[L.disjoint=4]="disjoint",L[L.touches=8]="touches",L[L.crosses=16]="crosses",L[L.overlaps=32]="overlaps",L[L.unknown=0]="unknown",L[L.intersects=1073741824]="intersects";var S=function(){function l(){}return l.construct=function(s,a,u,p,f,g,b,x){var T=new l;return T.pw=s,T.Mm=a,T.Kj=u,T.Si=p,T.BH=f,T.SY=g,T.TY=b,T.UY=x,T},l}();d.Vt=function(){function l(){}return l.CD=function(s,a,u){if(l.wy(s)){var p=d.ta.kj(a,s,!1);a=!1,d.Uk.CE(s)&&(a=a||s.lu(p,u)),(p=s.getType())!=1736&&p!=1607||!d.Uk.AE(s)||u==0||(a=a||s.fj(u)),p!=1736&&p!=1607||!d.Uk.BE(s)||u==0||a||s.hM()}},l.wy=function(s){return d.Uk.CE(s)||d.Uk.AE(s)||d.Uk.BE(s)},l}();var h=function(){function l(){this.rh=[]}return l.zB=function(s,a,u,p,f){var g=s.getType(),b=a.getType();if(g==197){if(b==197)return l.tW(s,a,u,p);if(b==33)return p==2?p=1:p==1&&(p=2),l.hJ(a,s,u,p)}else if(g==33){if(b==197)return l.hJ(s,a,u,p);if(b==33)return l.vW(s,a,u,p)}if(s.B()||a.B())return p==4;var x=new d.l;s.A(x);var T=new d.l;a.A(T);var M=new d.l;if(M.K(x),M.Zb(T),u=d.ta.Wd(u,M,!1),l.dk(x,T,u))return p==4;switch(x=!1,d.Vk.yd(g)&&((g=new d.Ta(s.description)).oc(s,!0),s=g,g=1607),d.Vk.yd(b)&&((b=new d.Ta(a.description)).oc(a,!0),a=b,b=1607),g!=197&&b!=197?(s.Db()<a.Db()||g==33&&b==550)&&(p==2?p=1:p==1&&(p=2)):g!=1736&&b!=197&&(p==2?p=1:p==1&&(p=2)),g){case 1736:switch(b){case 1736:x=l.rt(s,a,u,p,f);break;case 1607:x=l.$m(s,a,u,p,f);break;case 33:x=l.qt(s,a,u,p);break;case 550:x=l.pt(s,a,u,p,f);break;case 197:x=l.GI(s,a,u,p,f)}break;case 1607:switch(b){case 1736:x=l.$m(a,s,u,p,f);break;case 1607:x=l.gB(s,a,u,p,f);break;case 33:x=l.tt(s,a,u,p,f);break;case 550:x=l.st(s,a,u,p,f);break;case 197:x=l.MI(s,a,u,p)}break;case 33:switch(b){case 1736:x=l.qt(a,s,u,p);break;case 1607:x=l.tt(a,s,u,p,f);break;case 550:x=l.lt(a,s,u,p)}break;case 550:switch(b){case 1736:x=l.pt(a,s,u,p,f);break;case 1607:x=l.st(a,s,u,p,f);break;case 550:x=l.ZA(s,a,u,p,f);break;case 33:x=l.lt(s,a,u,p);break;case 197:x=l.hI(s,a,u,p)}break;case 197:switch(b){case 1736:x=l.GI(a,s,u,p,f);break;case 1607:x=l.MI(a,s,u,p);break;case 550:x=l.hI(a,s,u,p)}}return x},l.tW=function(s,a,u,p){if(s.B()||a.B())return p==4;var f=new d.l,g=new d.l,b=new d.l;switch(s.A(f),a.A(g),b.K(f),b.Zb(g),s=d.ta.Wd(u,b,!1),p){case 4:return l.dk(f,g,s);case 2:return l.jF(g,f,s);case 1:return l.jF(f,g,s);case 3:return l.ek(f,g,s);case 8:return l.cQ(f,g,s);case 32:return l.bQ(f,g,s);case 16:return l.aQ(f,g,s)}return!1},l.hJ=function(s,a,u,p){if(s.B()||a.B())return p==4;s=s.D();var f=new d.l,g=new d.l;switch(a.A(f),g.K(s),g.Zb(f),a=d.ta.Wd(u,g,!1),p){case 4:return l.Rw(s,f,a);case 2:return l.eB(s,f,a);case 1:return l.RU(s,f,a);case 3:return l.vI(s,f,a);case 8:return l.dB(s,f,a)}return!1},l.vW=function(s,a,u,p){if(s.B()||a.B())return p==4;s=s.D(),a=a.D();var f=new d.l;switch(f.K(s),f.Zb(a),u=d.ta.Wd(u,f,!1),p){case 4:return l.SU(s,a,u);case 2:return l.uI(a,s,u);case 1:return l.uI(s,a,u);case 3:return l.wI(s,a,u)}return!1},l.rt=function(s,a,u,p,f){switch(p){case 4:return l.kV(s,a,u);case 2:return l.Sw(a,s,u,f);case 1:return l.Sw(s,a,u,f);case 3:return l.nV(s,a,u);case 8:return l.vV(s,a,u);case 32:return l.qV(s,a,u,f)}return!1},l.$m=function(s,a,u,p,f){switch(p){case 4:return l.lV(s,a,u);case 1:return l.fB(s,a,u,f);case 8:return l.wV(s,a,u,f);case 16:return l.gV(s,a,u)}return!1},l.qt=function(s,a,u,p){switch(p){case 4:return l.jV(s,a,u);case 1:return l.dV(s,a,u);case 8:return l.uV(s,a,u)}return!1},l.pt=function(s,a,u,p){switch(p){case 4:return l.iV(s,a,u);case 1:return l.cV(s,a,u);case 8:return l.tV(s,a,u);case 16:return l.fV(s,a,u)}return!1},l.GI=function(s,a,u,p,f){if(l.hV(s,a,u))return p==4;if(p==4)return!1;switch(p){case 2:return l.xV(s,a,u);case 1:return l.bV(s,a,u);case 3:return l.mV(s,a,u);case 8:return l.sV(s,a,u,f);case 32:return l.pV(s,a,u,f);case 16:return l.eV(s,a,u,f)}return!1},l.gB=function(s,a,u,p){switch(p){case 4:return l.GV(s,a,u);case 2:return l.KI(a,s,u);case 1:return l.KI(s,a,u);case 3:return l.IV(s,a,u);case 8:return l.NI(s,a,u);case 32:return l.MV(s,a,u);case 16:return l.LI(s,a,u)}return!1},l.tt=function(s,a,u,p){switch(p){case 4:return l.FV(s,a,u);case 1:return l.AV(s,a,u);case 8:return l.QV(s,a,u)}return!1},l.st=function(s,a,u,p){switch(p){case 4:return l.EV(s,a,u);case 1:return l.zV(s,a,u);case 8:return l.PV(s,a,u);case 16:return l.CV(s,a,u)}return!1},l.MI=function(s,a,u,p){if(l.DV(s,a,u))return p==4;if(p==4)return!1;switch(p){case 2:return l.RV(s,a,u);case 1:return l.yV(s,a,u);case 3:return l.HV(s,a,u);case 8:return l.OV(s,a,u);case 32:return l.LV(s,a,u);case 16:return l.BV(s,a,u)}return!1},l.ZA=function(s,a,u,p){switch(p){case 4:return l.gU(s,a,u);case 2:return l.eI(a,s,u);case 1:return l.eI(s,a,u);case 3:return l.iU(s,a,u);case 32:return l.oU(s,a,u)}return!1},l.lt=function(s,a,u,p){switch(p){case 4:return l.fI(s,a,u);case 2:return l.sU(s,a,u);case 1:return l.dU(s,a,u);case 3:return l.Nw(s,a,u)}return!1},l.hI=function(s,a,u,p){switch(p){case 4:return l.fU(s,a,u);case 2:return l.rU(s,a,u);case 1:return l.cU(s,a,u);case 3:return l.hU(s,a,u);case 8:return l.qU(s,a,u);case 16:return l.eU(s,a,u)}return!1},l.nV=function(s,a,u){var p=new d.l,f=new d.l;return s.A(p),a.A(f),!!l.ek(p,f,u)&&(p=l.qc(s,a,!1))!=4&&p!=1&&p!=2&&(!!l.dI(s,a,u)||(p=s.Qb(),f=a.Qb(),!(Math.abs(p-f)>4*Math.max(s.I(),a.I())*u)&&l.Wz(s,a,u,!0)))},l.kV=function(s,a,u){var p=l.qc(s,a,!0);return p==4||p!=1&&p!=2&&p!=1073741824&&l.EI(s,a,u)},l.vV=function(s,a,u){var p=l.qc(s,a,!1);return p!=4&&p!=1&&p!=2&&l.II(s,a,u,null)},l.qV=function(s,a,u,p){var f=l.qc(s,a,!1);return f!=4&&f!=1&&f!=2&&l.FI(s,a,u,p)},l.Sw=function(s,a,u,p){var f=new d.l,g=new d.l;return s.A(f),a.A(g),!!l.zc(f,g,u)&&(f=l.qc(s,a,!1))!=4&&f!=2&&(f==1||l.BI(s,a,u,p))},l.lV=function(s,a,u){var p=l.qc(s,a,!0);return p==4||p!=1&&p!=1073741824&&l.EI(s,a,u)},l.wV=function(s,a,u,p){var f=l.qc(s,a,!1);return f!=4&&f!=1&&l.JI(s,a,u,p)},l.gV=function(s,a,u){var p=l.qc(s,a,!1);return p!=4&&p!=1&&l.DI(s,a,u,null)},l.fB=function(s,a,u,p){var f=new d.l,g=new d.l;return s.A(f),a.A(g),!!l.zc(f,g,u)&&(f=l.qc(s,a,!1))!=4&&(f==1||l.CI(s,a,u,p))},l.jV=function(s,a,u){return d.hd.KG(s,a,u)==0},l.uV=function(s,a,u){return a=a.D(),l.HI(s,a,u)},l.dV=function(s,a,u){return a=a.D(),l.AI(s,a,u)},l.iV=function(s,a,u){var p=l.qc(s,a,!1);if(p==4)return!0;if(p==1)return!1;p=new d.l,s.A(p),p.W(u,u);for(var f=new d.h,g=0;g<a.I();g++)if(a.D(g,f),p.contains(f)){var b=d.hd.Yd(s,f,u);if(b==1||b==2)return!1}return!0},l.tV=function(s,a,u){var p=this.qc(s,a,!1);if(p==4||p==1)return!1;p=new d.l,s.A(p),p.W(u,u);for(var f=!1,g=s,b=!1,x=0;x<a.I();x++){var T=a.Na(x);if(p.contains(T)){if((T=d.hd.Yd(g,T,u))==2)f=!0;else if(T==1)return!1}b||(!d.Dg.Ml(s,a.I()-1)||s.Bb!=null&&s.Bb.Fb!=null?g=s:(g=new d.Da,s.copyTo(g),g.fj(1)),b=!0)}return!!f},l.fV=function(s,a,u){var p=this.qc(s,a,!1);if(p==4||p==1)return!1;var f=new d.l;p=new d.l;var g=new d.l;s.A(f),a.A(g),p.K(f),p.W(u,u),g=f=!1;for(var b=s,x=!1,T=0;T<a.I();T++){var M=a.Na(T);if(p.contains(M)?(M=d.hd.Yd(b,M,u))==0?g=!0:M==1&&(f=!0):g=!0,f&&g)return!0;x||(!d.Dg.Ml(s,a.I()-1)||s.Bb!=null&&s.Bb.Fb!=null?b=s:(b=new d.Da,s.copyTo(b),b.fj(1)),x=!0)}return!1},l.cV=function(s,a,u){var p=new d.l,f=new d.l;if(s.A(p),a.A(f),!this.zc(p,f,u)||(f=this.qc(s,a,!1))==4)return!1;if(f==1)return!0;f=!1;for(var g=s,b=!1,x=0;x<a.I();x++){var T=a.Na(x);if(!p.contains(T))return!1;if((T=d.hd.Yd(g,T,u))==1)f=!0;else if(T==0)return!1;b||(!d.Dg.Ml(s,a.I()-1)||s.Bb!=null&&s.Bb.Fb!=null?g=s:(g=new d.Da,s.copyTo(g),g.fj(1)),b=!0)}return f},l.mV=function(s,a,u){var p=new d.l,f=new d.l;return s.A(p),a.A(f),!!l.ek(p,f,u)&&((p=new d.Da).ad(a,!1),l.Wz(s,p,u,!0))},l.hV=function(s,a,u){var p=l.qc(s,a,!1);if(p==4)return!0;if(p==1||p==2)return!1;var f=new d.l;if(p=new d.l,s.A(f),a.A(p),l.zc(p,f,u)||(f=new d.h,p.dn(f),(a=d.hd.Yd(s,f,u))!=0)||(p.$I(f),(a=d.hd.Yd(s,f,u))!=0)||(p.en(f),(a=d.hd.Yd(s,f,u))!=0)||(p.cJ(f),(a=d.hd.Yd(s,f,u))!=0))return!1;a=s.ub(0),(f=new d.l).K(p),f.W(u,u);for(var g=0,b=s.I();g<b;g++){var x=a.read(2*g),T=a.read(2*g+1);if(f.contains(x,T))return!1}return!l.TG(s,p,u)},l.sV=function(s,a,u,p){var f=l.qc(s,a,!1);if(f==4||f==1||f==2)return!1;f=new d.l;var g=new d.l;return s.A(f),a.A(g),!l.zc(g,f,u)&&(g.R()<=u&&g.ca()<=u?(a=a.Ip(),l.HI(s,a,u)):g.R()<=u||g.ca()<=u?(f=new d.Ta,g=new d.Sa,a.Hf(0,g),f.nf(g),a.Hf(2,g),f.lineTo(g),l.JI(s,f,u,p)):((f=new d.Da).ad(a,!1),l.II(s,f,u,p)))},l.pV=function(s,a,u,p){var f=l.qc(s,a,!1);if(f==4||f==1||f==2)return!1;f=new d.l;var g=new d.l;return s.A(f),a.A(g),!(l.zc(g,f,u)||g.R()<=u||g.ca()<=u)&&((f=new d.Da).ad(a,!1),l.FI(s,f,u,p))},l.xV=function(s,a,u){var p=new d.l,f=new d.l;return s.A(p),a.A(f),l.zc(f,p,u)},l.bV=function(s,a,u){var p=new d.l,f=new d.l;return s.A(p),a.A(f),!!l.zc(p,f,u)&&(p=l.qc(s,a,!1))!=4&&p!=2&&(p==1||(f.R()<=u&&f.ca()<=u?(a=a.Ip(),l.AI(s,a,u)):f.R()<=u||f.ca()<=u?(f=new d.Ta,p=new d.Sa,a.Hf(0,p),f.nf(p),a.Hf(2,p),f.lineTo(p),l.CI(s,f,u,null)):((f=new d.Da).ad(a,!1),l.BI(s,f,u,null))))},l.eV=function(s,a,u,p){var f=new d.l,g=new d.l;return s.A(f),a.A(g),!(l.zc(g,f,u)||g.ca()>u&&g.R()>u||g.ca()<=u&&g.R()<=u)&&(f=new d.Ta,g=new d.Sa,a.Hf(0,g),f.nf(g),a.Hf(2,g),f.lineTo(g),l.DI(s,f,u,p))},l.IV=function(s,a,u){var p=new d.l,f=new d.l;return s.A(p),a.A(f),!(!l.ek(p,f,u)||l.qc(s,a,!1)==4)&&(!!l.dI(s,a,u)||l.Wz(s,a,u,!1))},l.GV=function(s,a,u){return this.qc(s,a,!1)==4||!!new d.Zl(s,a,u,!0).next()&&!this.UG(s,a,u)},l.NI=function(s,a,u){if(l.qc(s,a,!1)==4)return!1;var p=new d.be(0);if(l.Xz(s,a,u,p)!=0)return!1;for(var f=new d.de,g=0;g<p.size;g+=2){var b=p.read(g),x=p.read(g+1);f.Bu(b,x)}return s=s.mg(),a=a.mg(),s.Fd(a,0,a.I()),l.Mw(s,f,u)},l.LI=function(s,a,u){if(l.qc(s,a,!1)==4)return!1;var p=new d.be(0);if(l.Xz(s,a,u,p)!=0)return!1;for(var f=new d.de,g=0;g<p.size;g+=2){var b=p.read(g),x=p.read(g+1);f.Bu(b,x)}return s=s.mg(),a=a.mg(),s.Fd(a,0,a.I()),!l.Mw(s,f,u)},l.MV=function(s,a,u){return l.qc(s,a,!1)!=4&&l.WG(s,a,u)},l.KI=function(s,a,u){var p=new d.l,f=new d.l;return s.A(p),a.A(f),!(!l.zc(p,f,u)||l.qc(s,a,!1)==4)&&l.ym(a,s,u,!1)},l.FV=function(s,a,u){return l.qc(s,a,!1)==4||(a=a.D(),!l.Yz(s,a,u))},l.QV=function(s,a,u){return l.qc(s,a,!1)!=4&&(a=a.D(),l.Zz(s,a,u))},l.AV=function(s,a,u){return l.qc(s,a,!1)!=4&&(a=a.D(),l.SG(s,a,u))},l.EV=function(s,a,u){return l.qc(s,a,!1)==4||!l.VG(s,a,u,!1)},l.PV=function(s,a,u){if(this.qc(s,a,!1)==4)return!1;var p=s.Ga(),f=new d.l,g=new d.l,b=new d.l;s.A(f),a.A(g),f.W(u,u),g.W(u,u),b.K(f),b.Ea(g),f=null;var x=s.Bb;if(x!=null){var T=x.Fb;f=x.zo,T==null&&(T=x=d.ta.jj(s,b))}else T=x=d.ta.jj(s,b);var M=T.getIterator(),C=null;f!=null&&(C=f.getIterator());var O=new d.h,F=new d.h,P=!1,G=u*u;for(f=new d.pn(a.I()),x=0;x<a.I();x++)f.write(x,0);for(x=0;x<a.I();x++)if(a.D(x,O),b.contains(O)){if(g.K(O.x,O.y,O.x,O.y),C!=null&&(C.Xi(g,u),C.next()==-1))continue;M.Xi(g,u);for(var q=M.next();q!=-1;q=M.next())if(p.Vb(T.ja(q)),(q=p.ha()).hc(q.fe(O,!1),F),d.h.yc(O,F)<=G){f.write(x,1),P=!0;break}}if(!P)return!1;for(s=s.mg(),p=new d.de,g=new d.h,x=0;x<a.I();x++)f.read(x)!=0&&(a.D(x,g),p.Bu(g.x,g.y));return this.Mw(s,p,u)},l.CV=function(s,a,u){if(this.qc(s,a,!1)==4)return!1;var p=s.Ga(),f=new d.l,g=new d.l,b=new d.l;s.A(f),a.A(g),f.W(u,u),g.W(u,u),b.K(f),b.Ea(g),f=null;var x=s.Bb;if(x!=null){var T=x.Fb;f=x.zo,T==null&&(T=x=d.ta.jj(s,b))}else T=x=d.ta.jj(s,b);var M=T.getIterator(),C=null;f!=null&&(C=f.getIterator());var O=new d.h,F=new d.h,P=!1,G=!1,q=u*u;for(f=new d.pn(a.I()),x=0;x<a.I();x++)f.write(x,0);for(x=0;x<a.I();x++)if(a.D(x,O),b.contains(O)){if(g.K(O.x,O.y,O.x,O.y),C!=null&&(C.Xi(g,u),C.next()==-1)){G=!0;continue}M.Xi(g,u);for(var V=!1,Z=M.next();Z!=-1;Z=M.next())if(p.Vb(T.ja(Z)),(Z=p.ha()).hc(Z.fe(O,!1),F),d.h.yc(O,F)<=q){f.write(x,1),V=P=!0;break}V||(G=!0)}else G=!0;if(!P||!G)return!1;for(s=s.mg(),p=new d.de,g=new d.h,x=0;x<a.I();x++)f.read(x)!=0&&(a.D(x,g),p.Bu(g.x,g.y));return!this.Mw(s,p,u)},l.zV=function(s,a,u){var p=new d.l,f=new d.l;return s.A(p),a.A(f),!(!l.zc(p,f,u)||l.qc(s,a,!1)==4||!l.VG(s,a,u,!0))&&(s=s.mg(),!l.gI(s,a,u))},l.HV=function(s,a,u){var p=new d.l,f=new d.l;return s.A(p),a.A(f),!(f.ca()>u&&f.R()>u)&&l.ek(p,f,u)},l.DV=function(s,a,u){var p=new d.l,f=new d.l;return s.A(p),a.A(f),!l.zc(f,p,u)&&!l.TG(s,f,u)},l.OV=function(s,a,u){var p=new d.l,f=new d.l;if(s.A(p),a.A(f),f.ca()<=u&&f.R()<=u)return f=a.Ip(),l.Zz(s,f,u);if(f.ca()<=u||f.R()<=u)return f=new d.Ta,p=new d.Sa,a.Hf(0,p),f.nf(p),a.Hf(2,p),f.lineTo(p),l.NI(s,f,u);s=s.Ga(),a=new d.l,p=new d.l,a.K(f),p.K(f),a.W(-u,-u),p.W(u,u),f=!1;for(var g=new d.l,b=new d.l;s.$a();)for(;s.Ha();){if(s.ha().A(g),b.K(a),b.Ea(g),!b.B()&&(b.ca()>u||b.R()>u))return!1;b.K(p),b.Ea(g),b.B()||(f=!0)}return f},l.LV=function(s,a,u){var p=new d.l,f=new d.l;return s.A(p),a.A(f),!(l.zc(p,f,u)||l.zc(f,p,u)||l.zc(f,p,u)||f.ca()>u&&f.R()>u||f.ca()<=u&&f.R()<=u)&&(p=new d.Ta,f=new d.Sa,a.Hf(0,f),p.nf(f),a.Hf(2,f),p.lineTo(f),l.WG(s,p,u))},l.RV=function(s,a,u){var p=new d.l,f=new d.l;if(s.A(p),a.A(f),!l.zc(f,p,u)||f.ca()<=u&&f.R()<=u)return!1;if(f.ca()<=u||f.R()<=u)return l.zc(f,p,u);s=s.Ga(),(a=new d.l).K(f),a.W(-u,-u),f=!1,p=new d.l;for(var g=new d.l;s.$a();)for(;s.Ha();)s.ha().A(p),a.hm(p)?f=!0:(g.K(a),g.Ea(p),!g.B()&&(g.ca()>u||g.R()>u)&&(f=!0));return f},l.yV=function(s,a,u){var p=new d.l,f=new d.l;return a.A(f),s.A(p),!(!l.zc(p,f,u)||f.ca()>u&&f.R()>u)&&(f.ca()<=u&&f.R()<=u?(a=a.Ip(),l.SG(s,a,u)):(p=new d.Ta,f=new d.Sa,a.Hf(0,f),p.nf(f),a.Hf(2,f),p.lineTo(f),l.ym(p,s,u,!1)))},l.BV=function(s,a,u){var p=new d.l,f=new d.l;if(s.A(p),a.A(f),l.zc(f,p,u)||f.ca()<=u&&f.R()<=u)return!1;if(f.ca()<=u||f.R()<=u)return p=new d.Ta,f=new d.Sa,a.Hf(0,f),p.nf(f),a.Hf(2,f),p.lineTo(f),l.LI(s,p,u);s=s.Ga(),a=new d.l,(p=new d.l).K(f),a.K(f),p.W(-u,-u),a.W(u,u);for(var g=f=!1,b=new d.l,x=new d.l;s.$a();)for(;s.Ha();)if(s.ha().A(b),g||a.contains(b)||(g=!0),f||(x.K(p),x.Ea(b),!x.B()&&(x.ca()>u||x.R()>u)&&(f=!0)),f&&g)return!0;return!1},l.iU=function(s,a,u){var p=new d.l,f=new d.l;return s.A(p),a.A(f),!!l.ek(p,f,u)&&(!!l.jU(s,a,u)||l.YA(s,a,u,!1,!0,!1))},l.gU=function(s,a,u){return!l.gI(s,a,u)},l.oU=function(s,a,u){return l.YA(s,a,u,!1,!1,!0)},l.eI=function(s,a,u){var p=new d.l,f=new d.l;return s.A(p),a.A(f),!!l.zc(p,f,u)&&l.YA(a,s,u,!0,!1,!1)},l.Mw=function(s,a,u){u*=u;for(var p=new d.h,f=new d.h,g=0;g<a.I();g++){a.D(g,f);for(var b=!1,x=0;x<s.I();x++)if(s.D(x,p),d.h.yc(p,f)<=u){b=!0;break}if(!b)return!1}return!0},l.Nw=function(s,a,u){var p=new d.l,f=new d.l;return s.A(p),a.A(f),l.ek(p,f,u)},l.fI=function(s,a,u){return a=a.D(),l.kt(s,a,u)},l.sU=function(s,a,u){return l.Nw(s,a,u)},l.dU=function(s,a,u){return!l.fI(s,a,u)},l.hU=function(s,a,u){var p=new d.l,f=new d.l;return s.A(p),a.A(f),!(f.ca()>u||f.R()>u)&&l.ek(p,f,u)},l.fU=function(s,a,u){var p=new d.l,f=new d.l;if(s.A(p),a.A(f),l.zc(f,p,u))return!1;for((a=new d.l).K(f),a.W(u,u),u=new d.h,f=0;f<s.I();f++)if(s.D(f,u),a.contains(u))return!1;return!0},l.qU=function(s,a,u){var p=new d.l,f=new d.l,g=new d.l;if(a.A(p),p.ca()<=u&&p.R()<=u)return!1;if(p.ca()<=u||p.R()<=u){a=new d.h;var b=!1;f.K(p),g.K(p),f.W(u,u),p.ca()>u?g.W(0,-u):g.W(-u,0);for(var x=0;x<s.I();x++)if(s.D(x,a),f.contains(a)){if(p.ca()>u){if(a.y>g.G&&a.y<g.H)return!1}else if(a.x>g.v&&a.x<g.C)return!1;b=!0}return b}for(f.K(p),g.K(p),f.W(u,u),g.W(-u,-u),a=new d.h,b=!1,x=0;x<s.I();x++)if(s.D(x,a),f.contains(a)){if(g.hm(a))return!1;b=!0}return b},l.rU=function(s,a,u){var p=new d.l,f=new d.l;if(s.A(p),a.A(f),!l.zc(f,p,u))return!1;if(f.ca()<=u&&f.R()<=u)return l.ek(p,f,u);if(f.ca()<=u||f.R()<=u){a=!1,p=new d.l;var g=new d.l;p.K(f),g.K(f),f.ca()>u?p.W(0,-u):p.W(-u,0),g.W(u,u);for(var b=new d.h,x=0;x<s.I();x++){if(s.D(x,b),!g.contains(b))return!1;f.ca()>u?b.y>p.G&&b.y<p.H&&(a=!0):b.x>p.v&&b.x<p.C&&(a=!0)}return a}for(a=!1,p=new d.l,g=new d.l,p.K(f),g.K(f),p.W(-u,-u),g.W(u,u),b=new d.h,x=0;x<s.I();x++){if(s.D(x,b),!g.contains(b))return!1;p.hm(b)&&(a=!0)}return a},l.cU=function(s,a,u){var p=new d.l,f=new d.l;return s.A(p),a.A(f),!(!l.zc(p,f,u)||f.ca()>u||f.R()>u)&&(a=a.Ip(),!l.kt(s,a,u))},l.eU=function(s,a,u){var p=new d.l,f=new d.l;if(s.A(p),a.A(f),l.zc(f,p,u)||f.ca()<=u&&f.R()<=u)return!1;if(f.ca()<=u||f.R()<=u){a=new d.l,p=new d.l,a.K(f),f.ca()>u?a.W(0,-u):a.W(-u,0),p.K(f),p.W(u,u);for(var g=new d.h,b=!1,x=!1,T=0;T<s.I();T++)if(s.D(T,g),b||(f.ca()>u?g.y>a.G&&g.y<a.H&&(b=!0):g.x>a.v&&g.x<a.C&&(b=!0)),x||p.contains(g)||(x=!0),b&&x)return!0;return!1}for(a=new d.l,p=new d.l,a.K(f),a.W(-u,-u),p.K(f),p.W(u,u),g=new d.h,x=b=!1,T=0;T<s.I();T++)if(s.D(T,g),!b&&a.hm(g)&&(b=!0),x||p.contains(g)||(x=!0),b&&x)return!0;return!1},l.wI=function(s,a,u){return d.h.yc(s,a)<=u*u},l.SU=function(s,a,u){return d.h.yc(s,a)>u*u},l.uI=function(s,a,u){return l.wI(s,a,u)},l.vI=function(s,a,u){var p=new d.l;return p.K(s),l.ek(p,a,u)},l.Rw=function(s,a,u){var p=new d.l;return p.K(a),p.W(u,u),!p.contains(s)},l.dB=function(s,a,u){if(a.ca()<=u&&a.R()<=u)return!1;var p=new d.l,f=new d.l;if(p.K(a),p.W(u,u),!p.contains(s))return!1;if(a.ca()<=u||a.R()<=u){if(f.K(a),a.ca()>u?f.W(0,-u):f.W(-u,0),a.ca()>u){if(s.y>f.G&&s.y<f.H)return!1}else if(s.x>f.v&&s.x<f.C)return!1;return!0}return f.K(a),f.W(-u,-u),!f.hm(s)},l.eB=function(s,a,u){if(a.ca()<=u&&a.R()<=u)return!0;if(a.ca()<=u||a.R()<=u){var p=new d.l;p.K(a),a.ca()>u?p.W(0,-u):p.W(-u,0);var f=!1;return a.ca()>u?s.y>p.G&&s.y<p.H&&(f=!0):s.x>p.v&&s.x<p.C&&(f=!0),f}return(p=new d.l).K(a),p.W(-u,-u),p.hm(s)},l.RU=function(s,a,u){return l.vI(s,a,u)},l.ek=function(s,a,u){return l.zc(s,a,u)&&l.zc(a,s,u)},l.dk=function(s,a,u){var p=new d.l;return p.K(a),p.W(u,u),!s.isIntersecting(p)},l.cQ=function(s,a,u){if(s.ca()<=u&&s.R()<=u){var p=s.sf();return l.dB(p,a,u)}if(a.ca()<=u&&a.R()<=u)return p=a.sf(),l.dB(p,s,u);if(s.ca()>u&&s.R()>u&&(a.ca()<=u||a.R()<=u)?p=a:(p=s,s=a),p.ca()<=u||p.R()<=u){if(s.ca()<=u||s.R()<=u){a=new d.yb;var f=new d.yb,g=[0,0],b=[0,0],x=new d.h;return p.dn(x),a.Dc(x),p.en(x),a.Qc(x),s.dn(x),f.Dc(x),s.en(x),f.Qc(x),a.Ea(f,null,g,b,u),a.Ea(f,null,null,null,u)==1&&(g[0]==0||g[1]==1||b[0]==0||b[1]==1)}return a=new d.l,f=new d.l,a.K(s),a.W(-u,-u),f.K(a),f.Ea(p),!(!f.B()&&(f.ca()>u||f.R()>u))}return s.W(u,u),(f=new d.l).K(p),f.Ea(s),!(f.B()||!f.B()&&f.ca()>u&&f.R()>u)},l.bQ=function(s,a,u){if(l.zc(s,a,u)||l.zc(a,s,u)||s.ca()<=u&&s.R()<=u||a.ca()<=u&&a.R()<=u)return!1;if(s.ca()<=u||s.R()<=u){if(a.ca()>u&&a.R()>u)return!1;var p=new d.yb,f=new d.yb,g=[0,0],b=[0,0],x=new d.h;return s.dn(x),p.Dc(x),s.en(x),p.Qc(x),a.dn(x),f.Dc(x),a.en(x),f.Qc(x),p.Ea(f,null,g,b,u),p.Ea(f,null,null,null,u)==2&&(0<g[0]||1>g[1])&&(0<b[0]||1>b[1])}return!(a.ca()<=u||a.R()<=u)&&((p=new d.l).K(s),p.Ea(a),!(p.B()||p.ca()<=u||p.R()<=u))},l.jF=function(s,a,u){if(!l.zc(s,a,u))return!1;if(s.ca()<=u&&s.R()<=u)return s=s.sf(),l.eB(s,a,u);if(a.ca()<=u&&a.R()<=u)return a=a.sf(),l.eB(a,s,u);if(s.ca()<=u||s.R()<=u)return l.zc(s,a,u);if(a.ca()<=u||a.R()<=u){var p=new d.l;return p.K(s),p.W(-u,-u),p.hm(a)?!0:((s=new d.l).K(p),s.Ea(a),!(s.B()||s.ca()<=u&&s.R()<=u))}return l.zc(s,a,u)},l.aQ=function(s,a,u){if(l.zc(s,a,u)||l.zc(a,s,u)||s.ca()<=u&&s.R()<=u||a.ca()<=u&&a.R()<=u||a.ca()>u&&a.R()>u&&s.ca()>u&&s.R()>u)return!1;if(s.ca()>u&&s.R()>u)var p=a;else p=s,s=a;if(s.ca()>u&&s.R()>u){a=new d.l;var f=new d.l;return f.K(s),f.W(-u,-u),a.K(f),a.Ea(p),!(a.B()||a.ca()<=u&&a.R()<=u)}a=new d.yb,f=new d.yb;var g=[0,0],b=[0,0],x=new d.h;return p.dn(x),a.Dc(x),p.en(x),a.Qc(x),s.dn(x),f.Dc(x),s.en(x),f.Qc(x),a.Ea(f,null,g,b,u),a.Ea(f,null,null,null,u)==1&&0<g[0]&&1>g[1]&&0<b[0]&&1>b[1]},l.EI=function(s,a,u){var p=new d.l,f=new d.l,g=new d.Zl(s,a,u,!0);if(!g.next())return!0;if(this.UG(s,a,u))return!1;var b=s,x=null;a.getType()==1736&&(x=a);var T=!1,M=!1;do{var C=g.nl(),O=g.hl();if(O=a.Na(a.Ba(O)),p.K(g.uz()),p.W(u,u),p.contains(O)&&(O=d.hd.Yd(b,O,0))!=0||a.getType()==1736&&(C=s.Na(s.Ba(C)),f.K(g.az()),f.W(u,u),f.contains(C)&&(O=d.hd.Yd(x,C,0))!=0))return!1;T||(!d.Dg.Ml(s,a.da()-1)||s.Bb!=null&&s.Bb.Fb!=null?b=s:(b=new d.Da,s.copyTo(b),b.fj(1)),T=!0),a.getType()!=1736||M||(M=a,!d.Dg.Ml(M,s.da()-1)||a.Bb!=null&&a.Bb.Fb!=null?x=a:(x=new d.Da,M.copyTo(x),x.fj(1)),M=!0)}while(g.next());return!0},l.zc=function(s,a,u){var p=new d.l;return p.K(s),p.W(u,u),p.contains(a)},l.ls=function(s,a,u){var p=new d.l;return p.K(a),p.W(u,u),a=new d.h,s.dn(a),!p.contains(a)||(s.$I(a),!p.contains(a)||(s.cJ(a),!p.contains(a)||(s.en(a),!p.contains(a))))},l.dI=function(s,a,u){if(s.da()!=a.da()||s.I()!=a.I())return!1;var p=new d.h,f=new d.h,g=!0;u*=u;for(var b=0;b<s.da();b++){if(s.Vc(b)!=a.Vc(b)){g=!1;break}for(var x=s.Ba(b);x<a.Vc(b);x++)if(s.D(x,p),a.D(x,f),d.h.yc(p,f)>u){g=!1;break}if(!g)break}return!!g},l.jU=function(s,a,u){if(s.I()!=a.I())return!1;var p=new d.h,f=new d.h,g=!0;u*=u;for(var b=0;b<s.I();b++)if(s.D(b,p),a.D(b,f),d.h.yc(p,f)>u){g=!1;break}return!!g},l.YA=function(s,a,u,p,f,g){var b=!1;if(s.I()>a.I()){p&&(p=!1,b=!0);var x=a}else x=s,s=a;if(a=null,f||g||b){a=new d.pn(s.I());for(var T=0;T<s.I();T++)a.write(T,0)}T=new d.l;var M=new d.l,C=new d.l;x.A(T),s.A(M),T.W(u,u),M.W(u,u),C.K(T),C.Ea(M),M=new d.h;for(var O=new d.h,F=!0,P=d.ta.oE(s,C),G=P.getIterator(),q=u*u,V=0;V<x.I();V++)if(x.D(V,M),C.contains(M)){var Z=!1;T.K(M.x,M.y,M.x,M.y),G.Xi(T,u);for(var X=G.next();X!=-1&&(X=P.ja(X),s.D(X,O),!(d.h.yc(M,O)<=q&&((f||g||b)&&a.write(X,1),Z=!0,p)));X=G.next());if(!Z&&(F=!1,f||p))return!1}else{if(f||p)return!1;F=!1}if(g&&F)return!1;if(p)return!0;for(T=0;T<s.I();T++)if(a.read(T)==1){if(g)return!0}else if(f||b)return!1;return!g},l.gI=function(s,a,u){if(s.I()>a.I())var p=a;else p=s,s=a;a=new d.l;var f=new d.l,g=new d.l;p.A(a),s.A(f),a.W(u,u),f.W(u,u),g.K(a),g.Ea(f),f=new d.h;for(var b=new d.h,x=u*u,T=d.ta.oE(s,g),M=T.getIterator(),C=0;C<p.I();C++)if(p.D(C,f),g.contains(f)){a.K(f.x,f.y,f.x,f.y),M.Xi(a,u);for(var O=M.next();O!=-1;O=M.next())if(s.D(T.ja(O),b),d.h.yc(f,b)<=x)return!0}return!1},l.Wz=function(s,a,u,p){return l.ym(s,a,u,p)&&l.ym(a,s,u,p)},l.ym=function(s,a,u,p){function f(Ue,Te){return O.QE(Ue,Te)}var g,b=!0,x=[0,0],T=[0,0],M=0,C=new d.ia(0),O=new l,F=new d.l,P=new d.l,G=new d.l;s.A(F),a.A(P),F.W(u,u),P.W(u,u),G.K(F),G.Ea(P),s=s.Ga(),P=a.Ga();var q=null,V=q=null,Z=a.Bb;for(Z!=null?(q=Z.Fb,V=Z.zo,q==null&&(q=d.ta.jj(a,G))):q=d.ta.jj(a,G),a=q.getIterator(),Z=null,V!=null&&(Z=V.getIterator());s.$a();)for(;s.Ha();){var X=!1,te=s.ha();if(te.A(F),!F.isIntersecting(G)||Z!=null&&(Z.Xi(F,u),Z.next()==-1))return!1;for(V=te.Qb(),a.Uo(te,u),g=a.next();g!=-1;g=a.next()){P.Vb(q.ja(g)),g=P.ha();var oe=te.Ea(g,null,x,T,u);if(oe==2&&(!p||T[0]<=T[1])){oe=x[0];var me=x[1],Se=T[0],Ce=T[1];if(oe*V<=u&&(1-me)*V<=u){X=!0,M=0,C.resize(0),O.rh.length=0;var $e=s.wb();for(Se=!0;Se;){if(s.Ha()){if(V=(te=s.ha()).Qb(),(oe=te.Ea(g,null,x,T,u))==2&&(!p||T[0]<=T[1])&&(oe=x[0],me=x[1],oe*V<=u&&(1-me)*V<=u)){$e=s.wb();continue}if(P.Ha()&&(g=P.ha(),(oe=te.Ea(g,null,x,T,u))==2&&(!p||T[0]<=T[1])&&(oe=x[0],me=x[1],oe*V<=u&&(1-me)*V<=u))){$e=s.wb();continue}}Se=!1}$e!=s.wb()&&(s.Vb($e),s.ha());break}$e=s.wb(),g=S.construct($e,s.gb,oe,me,P.wb(),P.gb,Se,Ce),O.rh.push(g),C.add(C.size)}}if(!X){if(M==O.rh.length)return!1;for(1<C.size-M&&C.Vd(M,C.size,f),X=0;M<O.rh.length;M++)if(!((g=O.rh[C.get(M)]).Kj<X&&g.Si<X)){if(V*(g.Kj-X)>u)return!1;if(V*(1-(X=g.Si))<=u||X==1)break}if(V*(1-X)>u)return!1;M=0,C.resize(0),O.rh.length=0}}return b},l.WG=function(s,a,u){if(1>l.Xz(s,a,u,null))return!1;var p=new d.l,f=new d.l;s.A(p),a.A(f);var g=l.ls(p,f,u);return p=l.ls(f,p,u),!(!g||!p)||(g&&!p?!l.ym(a,s,u,!1):p&&!g?!l.ym(s,a,u,!1):!l.ym(s,a,u,!1)&&!l.ym(a,s,u,!1))},l.Xz=function(s,a,u,p){function f(Rt,hi){return F.QE(Rt,hi)}if(s.yz()>a.yz())var g=a,b=s;else g=s,b=a;s=g.Ga(),a=b.Ga();var x=[0,0],T=[0,0],M=-1,C=0,O=new d.ia(0),F=new l,P=new d.l,G=new d.l,q=new d.l;g.A(P),b.A(G),P.W(u,u),G.W(u,u),q.K(P),q.Ea(G),g=null,p!=null&&(g=new d.h);var V=G=G=null,Z=b.Bb;for(Z!=null?(G=Z.Fb,V=Z.zo,G==null&&(G=d.ta.jj(b,q))):G=d.ta.jj(b,q),b=G.getIterator(),Z=null,V!=null&&(Z=V.getIterator());s.$a();)for(V=0;s.Ha();){var X=s.ha();if(X.A(P),P.isIntersecting(q)){if(Z!=null&&(Z.Xi(P,u),Z.next()==-1))continue;var te=X.Qb();b.Uo(X,u);for(var oe=b.next();oe!=-1;oe=b.next()){var me=G.ja(oe);a.Vb(me);var Se=a.ha(),Ce=Se.Qb(),$e=X.Ea(Se,null,x,T,u);if(0<$e){oe=x[0],M=T[0];var Ue=$e==2?x[1]:NaN,Te=$e==2?T[1]:NaN;if($e==2){if(te*(Ue-oe)>u)return 1;var ut=te*(Ue-oe);if(a.Ha()){if(Se=a.ha(),($e=X.Ea(Se,null,x,null,u))==2){$e=x[0];var ot=x[1];if(ut+($e=te*(ot-$e))>u)return 1}a.Vb(me),a.ha()}if(!a.vm()){if(a.li(),Se=a.li(),($e=X.Ea(Se,null,x,null,u))==2&&($e=x[0],ut+($e=te*((ot=x[1])-$e))>u))return 1;a.Vb(me),a.ha()}if(s.Ha()){if(me=s.wb(),($e=(X=s.ha()).Ea(Se,null,x,null,u))==2&&($e=x[0],ut+($e=te*((ot=x[1])-$e))>u))return 1;s.Vb(me),s.ha()}if(!s.vm()){if(me=s.wb(),s.li(),($e=(X=s.li()).Ea(Se,null,x,null,u))==2&&($e=x[0],ut+($e=Ce*((ot=x[1])-$e))>u))return 1;s.Vb(me),s.ha()}Se=S.construct(s.wb(),s.gb,oe,Ue,a.wb(),a.gb,M,Te),F.rh.push(Se),O.add(O.size)}M=0,p!=null&&(X.hc(oe,g),p.add(g.x),p.add(g.y))}}if(C<F.rh.length){for(O.Vd(C,O.size,f),X=0,oe=F.rh[O.get(C)].Mm;C<F.rh.length;C++)if(!((Se=F.rh[O.get(C)]).Kj<X&&Se.Si<X))if(te*(Se.Kj-X)>u)V=te*(Se.Si-Se.Kj),X=Se.Si,oe=Se.Mm;else{if(Se.Mm!=oe?(V=te*(Se.Si-Se.Kj),oe=Se.Mm):V+=te*(Se.Si-Se.Kj),V>u)return 1;if((X=Se.Si)==1)break}te*(1-X)>u&&(V=0),C=0,O.resize(0),F.rh.length=0}}}return M},l.UG=function(s,a,u){var p=s.Ga(),f=a.Ga();for(s=new d.Zl(s,a,u,!1);s.next();){a=s.nl();var g=s.hl();if(p.Vb(a),f.Vb(g),a=p.ha(),0<f.ha().Ea(a,null,null,null,u))return!0}return!1},l.VG=function(s,a,u,p){var f=s.Ga(),g=new d.l,b=new d.l,x=new d.l;s.A(g),a.A(b),g.W(u,u),g.contains(b),b.W(u,u),x.K(g),x.Ea(b),(g=s.Bb)!=null?(g=g.Fb)==null&&(g=d.ta.jj(s,x)):g=d.ta.jj(s,x),s=g.getIterator();for(var T=new d.h,M=new d.h,C=u*u,O=0;O<a.I();O++)if(a.D(O,T),x.contains(T)){b.K(T.x,T.y,T.x,T.y),s.Xi(b,u);for(var F=!1,P=s.next();P!=-1;P=s.next())if(f.Vb(g.ja(P)),(P=f.ha()).hc(P.fe(T,!1),M),d.h.yc(M,T)<=C){F=!0;break}if(p){if(!F)return!1}else if(F)return!0}return!!p},l.Yz=function(s,a,u){var p=new d.h,f=u*u,g=s.Ga();if((s=s.Bb)!=null&&(s=s.Fb)!=null){var b=new d.l;for(b.K(a),b=(u=s.MF(b,u)).next();b!=-1;b=u.next())if(g.Vb(s.ja(b)),g.Ha()){var x=(b=g.ha()).fe(a,!1);if(b.hc(x,p),d.h.yc(a,p)<=f)return!0}return!1}for(s=new d.l;g.$a();)for(;g.Ha();)if((b=g.ha()).A(s),s.W(u,u),s.contains(a)&&(x=b.fe(a,!1),b.hc(x,p),d.h.yc(a,p)<=f))return!0;return!1},l.SG=function(s,a,u){return l.Yz(s,a,u)&&!l.Zz(s,a,u)},l.Zz=function(s,a,u){return s=s.mg(),!l.kt(s,a,u)},l.TG=function(s,a,u){if(s.tm()){var p=new d.yb(a.v,a.G,a.v,a.H),f=new d.yb(a.v,a.H,a.C,a.H),g=new d.yb(a.C,a.H,a.C,a.G);for(a=new d.yb(a.C,a.G,a.v,a.G),s=s.Ga();s.$a();)for(;s.Ha();){var b=s.ha();if(b.isIntersecting(p,u)||b.isIntersecting(f,u)||b.isIntersecting(g,u)||b.isIntersecting(a,u))return!0}}else{(p=new d.l).K(a),p.W(u,u),u=s.ub(0),f=new d.h,g=new d.h,a=new d.h,b=new d.h;for(var x=0,T=s.da();x<T;x++)for(var M=!0,C=s.Ba(x),O=s.Vc(x);C<O;C++)if(M)u.tc(2*C,g),M=!1;else{if(u.tc(2*C,f),a.L(g),b.L(f),p.zy(a,b)!=0)return!0;g.L(f)}}return!1},l.qc=function(s,a,u){var p=s.getType(),f=a.getType();if(d.aa.xj(p)){var g=s.Bb;if(g!=null&&(g=g.Fk)!=null)if(f==33){var b=a.D();if((b=g.So(b.x,b.y))==1)return 1;if(b==0)return 4}else{if(b=new d.l,a.A(b),(b=g.Ro(b))==1)return 1;if(b==0)return 4;if(u&&d.aa.xj(f)&&l.HE(a,g))return 1073741824}}if(d.aa.xj(f)&&(g=a.Bb)!=null&&(g=g.Fk)!=null)if(p==33){if(s=s.D(),(b=g.So(s.x,s.y))==1)return 2;if(b==0)return 4}else{if(a=new d.l,s.A(a),(b=g.Ro(a))==1)return 2;if(b==0)return 4;if(u&&d.aa.xj(p)&&l.HE(s,g))return 1073741824}return 0},l.HE=function(s,a){for(var u=s.I(),p=new d.h,f=0;f<u;f++)if(s.D(f,p),a.So(p.x,p.y)==1)return!0;return!1},l.II=function(s,a,u,p){for(var f=1<=s.om(0)&&1<=a.om(0),g=s.Ga(),b=a.Ga(),x=[0,0],T=[0,0],M=new d.Zl(s,a,u,!1),C=!1;M.next();){var O=M.nl(),F=M.hl();if(g.Vb(O),b.Vb(F),O=g.ha(),(F=b.ha().Ea(O,null,T,x,u))==2){if(C=x[0],F=x[1],O=O.Qb(),f&&(F-C)*O>u)return!1;C=!0}else if(F!=0){if(C=x[0],O=T[0],0<C&&1>C&&0<O&&1>O)return!1;C=!0}}return!!C&&(g=new d.l,b=new d.l,f=new d.l,s.A(g),a.A(b),g.W(1e3*u,1e3*u),b.W(1e3*u,1e3*u),f.K(g),f.Ea(b),!(10<s.I()&&(s=d.Ud.clip(s,f,u,0),s.B())||10<a.I()&&(a=d.Ud.clip(a,f,u,0),a.B()))&&d.am.rt(s,a,u,"F********",p))},l.FI=function(s,a,u,p){var f=1<=s.om(0)&&1<=a.om(0),g=new d.l,b=new d.l,x=new d.l;s.A(g),a.A(b);for(var T=!1,M=l.ls(g,b,u),C=l.ls(b,g,u),O=s.Ga(),F=a.Ga(),P=[0,0],G=[0,0],q=new d.Zl(s,a,u,!1);q.next();){var V=q.nl(),Z=q.hl();if(O.Vb(V),F.Vb(Z),Z=O.ha(),(V=F.ha().Ea(Z,null,G,P,u))==2){V=P[0];var X=P[1];if(Z=Z.Qb(),f&&(X-V)*Z>u&&(T=!0,M&&C))return!0}else if(V!=0&&(V=P[0],Z=G[0],0<V&&1>V&&0<Z&&1>Z))return!0}if(f=new d.l,O=new d.l,f.K(g),f.W(1e3*u,1e3*u),O.K(b),O.W(1e3*u,1e3*u),x.K(f),x.Ea(O),g="",g=T?g+"**":g+"T*",M){if(10<a.I()&&(a=d.Ud.clip(a,x,u,0)).B())return!1;g+="****"}else g+="T***";if(C){if(10<s.I()&&(s=d.Ud.clip(s,x,u,0)).B())return!1;g+="***"}else g+="T**";return d.am.rt(s,a,u,g.toString(),p)},l.BI=function(s,a,u,p){var f=[!1],g=l.zI(s,a,u,f);return f[0]?g:(f=new d.l,a.A(f),f.W(1e3*u,1e3*u),!(10<s.I()&&(s=d.Ud.clip(s,f,u,0),s.B()))&&d.am.Sw(s,a,u,p))},l.zI=function(s,a,u,p){p[0]=!1;for(var f=s.Ga(),g=a.Ga(),b=[0,0],x=[0,0],T=new d.Zl(s,a,u,!1),M=!1;T.next();){var C=T.nl(),O=T.hl();if(f.Vb(C,-1),g.Vb(O,-1),C=f.ha(),(C=g.ha().Ea(C,null,x,b,u))!=0&&(M=!0,C==1&&(C=b[0],O=x[0],0<C&&1>C&&0<O&&1>O)))return p[0]=!0,!1}if(!M){for(p[0]=!0,b=new d.l,s.A(b),b.W(u,u),T=s,M=!1,x=new d.l,p=0,f=a.da();p<f;p++)if(0<a.Ja(p)){if(a.Rj(p,x),!b.isIntersecting(x)||(g=a.Na(a.Ba(p)),(g=d.Dg.wm(T,g,0))==0))return!1;M||(!d.Dg.Ml(s,a.da()-1)||s.Bb!=null&&s.Bb.Fb!=null?T=s:(g=new d.Da,s.copyTo(g),g.fj(1),T=g),M=!0)}if(s.da()==1||a.getType()==1607)return!0;for(b=new d.l,a.A(b),b.W(u,u),x=a,T=!1,u=new d.l,p=0,f=s.da();p<f;p++)if(0<s.Ja(p)){if(s.Rj(p,u),b.isIntersecting(u)&&(g=s.Na(s.Ba(p)),(g=d.Dg.wm(x,g,0))==1))return!1;T||(!d.Dg.Ml(a,s.da()-1)||a.Bb!=null&&a.Bb.Fb!=null?x=a:(g=new d.Da,a.copyTo(g),g.fj(1),x=g),T=!0)}return!0}return!1},l.JI=function(s,a,u,p){for(var f=s.Ga(),g=a.Ga(),b=[0,0],x=[0,0],T=new d.Zl(s,a,u,!1),M=!1;T.next();){var C=T.nl(),O=T.hl();if(f.Vb(C),g.Vb(O),C=f.ha(),(C=g.ha().Ea(C,null,x,b,u))==2)M=!0;else if(C!=0){if(M=b[0],C=x[0],0<M&&1>M&&0<C&&1>C)return!1;M=!0}}return!!M&&(g=new d.l,b=new d.l,f=new d.l,s.A(g),a.A(b),g.W(1e3*u,1e3*u),b.W(1e3*u,1e3*u),f.K(g),f.Ea(b),!(10<s.I()&&(s=d.Ud.clip(s,f,u,0),s.B())||10<a.I()&&(a=d.Ud.clip(a,f,u,0),a.B()))&&d.am.$m(s,a,u,"F********",p))},l.DI=function(s,a,u,p){for(var f=s.Ga(),g=a.Ga(),b=[0,0],x=[0,0],T=new d.Zl(s,a,u,!1),M=!1;T.next();){var C=T.nl(),O=T.hl();if(f.Vb(C),g.Vb(O),C=f.ha(),(C=g.ha().Ea(C,null,x,b,u))==2)M=!0;else if(C!=0){if(M=b[0],C=x[0],0<M&&1>M&&0<C&&1>C)return!0;M=!0}}return!!M&&(g=new d.l,b=new d.l,x=new d.l,T=new d.l,f=new d.l,s.A(g),a.A(b),l.ls(b,g,u)?(x.K(g),x.W(1e3*u,1e3*u),T.K(b),T.W(1e3*u,1e3*u),f.K(x),f.Ea(T),!(10<s.I()&&(s=d.Ud.clip(s,f,u,0),s.B())||10<a.I()&&(a=d.Ud.clip(a,f,u,0),a.B()))&&(u=d.am.$m(s,a,u,"T********",p))):u=d.am.$m(s,a,u,"T*****T**",p))},l.CI=function(s,a,u,p){var f=[!1],g=l.zI(s,a,u,f);return f[0]?g:(f=new d.l,a.A(f),f.W(1e3*u,1e3*u),!(10<s.I()&&(s=d.Ud.clip(s,f,u,0),s.B()))&&d.am.fB(s,a,u,p))},l.AI=function(s,a,u){return d.hd.Yd(s,a,u)==1},l.HI=function(s,a,u){return d.hd.Yd(s,a,u)==2},l.kt=function(s,a,u){var p=new d.h;u*=u;for(var f=0;f<s.I();f++)if(s.D(f,p),d.h.yc(p,a)<=u)return!1;return!0},l.prototype.QE=function(s,a){return s=this.rh[s],a=this.rh[a],s.Mm<a.Mm||s.Mm==a.Mm&&(s.pw<a.pw||s.pw==a.pw&&(s.Kj<a.Kj||s.Kj==a.Kj&&(s.Si<a.Si||s.Si==a.Si&&s.BH<a.BH)))?-1:1},l}();d.ud=h}(Y||(Y={})),function(d){var L,S,h;(S=L||(L={}))[S.InteriorInterior=0]="InteriorInterior",S[S.InteriorBoundary=1]="InteriorBoundary",S[S.InteriorExterior=2]="InteriorExterior",S[S.BoundaryInterior=3]="BoundaryInterior",S[S.BoundaryBoundary=4]="BoundaryBoundary",S[S.BoundaryExterior=5]="BoundaryExterior",S[S.ExteriorInterior=6]="ExteriorInterior",S[S.ExteriorBoundary=7]="ExteriorBoundary",S[S.ExteriorExterior=8]="ExteriorExterior",function(l){l[l.AreaAreaPredicates=0]="AreaAreaPredicates",l[l.AreaLinePredicates=1]="AreaLinePredicates",l[l.LineLinePredicates=2]="LineLinePredicates",l[l.AreaPointPredicates=3]="AreaPointPredicates",l[l.LinePointPredicates=4]="LinePointPredicates",l[l.PointPointPredicates=5]="PointPointPredicates"}(h||(h={})),L=function(){function l(){this.le=0,this.j=new d.iu,this.J=[0,0,0,0,0,0,0,0,0],this.Za=[0,0,0,0,0,0,0,0,0],this.ea=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Sm=this.vw=-1}return l.yB=function(s,a,u,p,f){if(p.length!=9)throw d.i.fa("relation string length has to be 9 characters");for(var g=0;9>g;g++){var b=p.charAt(g);if(b!="*"&&b!="T"&&b!="F"&&b!="0"&&b!="1"&&b!="2")throw d.i.fa("relation string")}if((g=this.MR(p,s.Db(),a.Db()))!=0)return d.ud.zB(s,a,u,g,f);g=new d.l,s.A(g),b=new d.l,a.A(b);var x=new d.l;if(x.K(g),x.Zb(b),u=d.ta.Wd(u,x,!1),s=this.WE(s,u),a=this.WE(a,u),s.B()||a.B())return this.uW(s,a,p);switch(g=s.getType(),b=a.getType(),x=!1,g){case 1736:switch(b){case 1736:x=this.rt(s,a,u,p,f);break;case 1607:x=this.$m(s,a,u,p,f);break;case 33:x=this.qt(s,a,u,p);break;case 550:x=this.pt(s,a,u,p,f)}break;case 1607:switch(b){case 1736:x=this.$m(a,s,u,this.Zp(p),f);break;case 1607:x=this.gB(s,a,u,p,f);break;case 33:x=this.tt(s,a,u,p,f);break;case 550:x=this.st(s,a,u,p,f)}break;case 33:switch(b){case 1736:x=this.qt(a,s,u,this.Zp(p));break;case 1607:x=this.tt(a,s,u,this.Zp(p),f);break;case 33:x=this.$U(s,a,u,p);break;case 550:x=this.lt(a,s,u,this.Zp(p))}break;case 550:switch(b){case 1736:x=this.pt(a,s,u,this.Zp(p),f);break;case 1607:x=this.st(a,s,u,this.Zp(p),f);break;case 550:x=this.ZA(s,a,u,p,f);break;case 33:x=this.lt(s,a,u,p)}break;default:x=!1}return x},l.rt=function(s,a,u,p,f){var g=new l;g.Yi(),g.bj(p),g.xJ();var b=new d.l,x=new d.l;return s.A(b),a.A(x),p=!1,d.ud.dk(b,x,u)&&(g.Cu(s,a),p=!0),p||((b=d.ud.qc(s,a,!1))==4?(g.Cu(s,a),p=!0):b==1?(g.ly(a),p=!0):b==2&&(g.ZD(s),p=!0)),p||(s=(p=new d.gd).Ib(s),a=p.Ib(a),g.Wo(p,u,f),g.Bp(s,a),g.j.Ug()),l.fg(g.J,g.Xc)},l.Sw=function(s,a,u,p){var f=new l;f.Yi(),f.bj("T*****F**"),f.xJ();var g=new d.l,b=new d.l;s.A(g),a.A(b);var x=!1;return d.ud.dk(g,b,u)&&(f.Cu(s,a),x=!0),x||((g=d.ud.qc(s,a,!1))==4?(f.Cu(s,a),x=!0):g==1?(f.ly(a),x=!0):g==2&&(f.ZD(s),x=!0)),x?this.fg(f.J,f.Xc):(s=(x=new d.gd).Ib(s),g=x.Ib(a),d.Tk.V(x,u,p,!1),u=x.Ne(g).mg(),x.Gp(0,!0,!0),d.rn.V(x,s,-1,!1,p),x.I(s)!=0&&(d.rn.V(x,g,-1,!1,p),f.er(x,p),(a=x.I(g)==0)||(f.Bp(s,g),f.j.Ug(),g=this.fg(f.J,f.Xc))?(s=x.Ne(s),s=(x=new d.gd).Ib(s),g=x.Ib(u),f.er(x,p),f.le=0,f.Yi(),f.bj(a?"T*****F**":"******F**"),f.IB(),f.Bp(s,g),f.j.Ug(),this.fg(f.J,f.Xc)):g))},l.$m=function(s,a,u,p,f){var g=new l;g.Yi(),g.bj(p),g.IB();var b=new d.l,x=new d.l;return s.A(b),a.A(x),p=!1,d.ud.dk(b,x,u)&&(g.Du(s,a),p=!0),p||((b=d.ud.qc(s,a,!1))==4?(g.Du(s,a),p=!0):b==1&&(g.$D(a),p=!0)),p||(s=(p=new d.gd).Ib(s),a=p.Ib(a),g.Wo(p,u,f),g.kh=g.j.Dp(),l.Jw(a,g.j,g.kh),g.Bp(s,a),g.j.Ep(g.kh),g.j.Ug()),l.fg(g.J,g.Xc)},l.fB=function(s,a,u,p){var f=new l;f.Yi(),f.bj("T*****F**"),f.IB();var g=new d.l,b=new d.l;s.A(g),a.A(b);var x=!1;return d.ud.dk(g,b,u)&&(f.Du(s,a),x=!0),x||((g=d.ud.qc(s,a,!1))==4?(f.Du(s,a),x=!0):g==1&&(f.$D(a),x=!0)),x?this.fg(f.J,f.Xc):(s=(x=new d.gd).Ib(s),a=x.Ib(a),f.Wo(x,u,p),x.I(s)!=0&&(f.Bp(s,a),f.j.Ug(),this.fg(f.J,f.Xc)))},l.pt=function(s,a,u,p,f){var g=new l;g.Yi(),g.bj(p),g.yJ();var b=new d.l,x=new d.l;return s.A(b),a.A(x),p=!1,d.ud.dk(b,x,u)&&(g.Eu(s),p=!0),p||((b=d.ud.qc(s,a,!1))==4?(g.Eu(s),p=!0):b==1&&(g.zN(),p=!0)),p||(s=(p=new d.gd).Ib(s),a=p.Ib(a),g.Wo(p,u,f),g.Gy(s,a),g.j.Ug()),l.fg(g.J,g.Xc)},l.gB=function(s,a,u,p,f){var g=new l;g.Yi(),g.bj(p),g.eX(),p=new d.l;var b=new d.l;s.A(p),a.A(b);var x=!1;return d.ud.dk(p,b,u)&&(g.PG(s,a),x=!0),x||d.ud.qc(s,a,!1)!=4||(g.PG(s,a),x=!0),x||(s=(p=new d.gd).Ib(s),a=p.Ib(a),g.Wo(p,u,f),g.Yh=g.j.Dp(),g.kh=g.j.Dp(),l.Jw(s,g.j,g.Yh),l.Jw(a,g.j,g.kh),g.Bp(s,a),g.j.Ep(g.Yh),g.j.Ep(g.kh),g.j.Ug()),l.fg(g.J,g.Xc)},l.st=function(s,a,u,p,f){var g=new l;g.Yi(),g.bj(p),g.MJ(),p=new d.l;var b=new d.l;s.A(p),a.A(b);var x=!1;return d.ud.dk(p,b,u)&&(g.Vz(s),x=!0),x||d.ud.qc(s,a,!1)!=4||(g.Vz(s),x=!0),x||(s=(p=new d.gd).Ib(s),a=p.Ib(a),g.Wo(p,u,f),g.Yh=g.j.Dp(),l.Jw(s,g.j,g.Yh),g.Gy(s,a),g.j.Ep(g.Yh),g.j.Ug()),l.fg(g.J,g.Xc)},l.ZA=function(s,a,u,p,f){var g=new l;g.Yi(),g.bj(p),g.RJ(),p=new d.l;var b=new d.l;s.A(p),a.A(b);var x=!1;return d.ud.dk(p,b,u)&&(g.yI(),x=!0),x||(s=(p=new d.gd).Ib(s),a=p.Ib(a),g.Wo(p,u,f),g.Gy(s,a),g.j.Ug()),l.fg(g.J,g.Xc)},l.qt=function(s,a,u,p){var f=new l;f.Yi(),f.bj(p),f.yJ();var g=new d.l;s.A(g),a=a.D();var b=!1;return d.ud.Rw(a,g,u)&&(f.Eu(s),b=!0),b||((u=d.hd.Yd(s,a,u))==1?(f.J[0]=0,f.J[2]=2,f.J[3]=-1,f.J[5]=1,f.J[6]=-1):u==2?(f.J[6]=-1,s.Ke()!=0?(f.J[0]=-1,f.J[3]=0,f.J[2]=2,f.J[5]=1):(f.J[0]=0,f.J[3]=-1,f.J[5]=-1,u=new d.l,s.A(u),f.J[2]=u.ca()==0&&u.R()==0?-1:1)):f.Eu(s)),this.fg(f.J,p)},l.tt=function(s,a,u,p,f){var g=new l;g.Yi(),g.bj(p),g.MJ();var b=new d.l;s.A(b),p=a.D();var x=!1;if(d.ud.Rw(p,b,u)&&(g.Vz(s),x=!0),!x){b=null;var T=x=!1;(g.ea[0]||g.ea[6])&&(d.ud.Yz(s,p,u)?(g.ea[0]&&(b=d.pi.gm(s,f),T=!d.ud.kt(b,p,u),x=!0,g.J[0]=T?-1:0),g.J[6]=-1):(g.J[0]=-1,g.J[6]=0)),g.ea[3]&&(b!=null&&b.B()?g.J[3]=-1:(x||(b==null&&(b=d.pi.gm(s,f)),T=!d.ud.kt(b,p,u),x=!0),g.J[3]=T?0:-1)),g.ea[5]&&(b!=null&&b.B()?g.J[5]=-1:x&&!T?g.J[5]=0:(b==null&&(b=d.pi.gm(s,f)),f=d.ud.Nw(b,a,u),g.J[5]=f?-1:0)),g.ea[2]&&(s.Qb()!=0?g.J[2]=1:((f=new d.de(s.description)).Fd(s,0,s.I()),s=d.ud.Nw(f,a,u),g.J[2]=s?-1:0))}return this.fg(g.J,g.Xc)},l.lt=function(s,a,u,p){var f=new l;f.Yi(),f.bj(p),f.RJ();var g=new d.l;s.A(g),a=a.D();var b=!1;if(d.ud.Rw(a,g,u)&&(f.yI(),b=!0),!b){g=!1,b=!0,u*=u;for(var x=0;x<s.I();x++){var T=s.Na(x);if(d.h.yc(T,a)<=u?g=!0:b=!1,g&&!b)break}g?(f.J[0]=0,f.J[2]=b?-1:0,f.J[6]=-1):(f.J[0]=-1,f.J[2]=0,f.J[6]=0)}return l.fg(f.J,p)},l.$U=function(s,a,u,p){s=s.D(),a=a.D();for(var f=[],g=0;9>g;g++)f[g]=-1;return d.h.yc(s,a)<=u*u?f[0]=0:(f[2]=0,f[6]=0),f[8]=2,l.fg(f,p)},l.fg=function(s,a){for(var u=0;9>u;u++)switch(a.charAt(u)){case"T":if(s[u]==-1)return!1;break;case"F":if(s[u]!=-1)return!1;break;case"0":if(s[u]!=0)return!1;break;case"1":if(s[u]!=1)return!1;break;case"2":if(s[u]!=2)return!1}return!0},l.uW=function(s,a,u){var p=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(s.B()&&a.B()){for(var f=0;9>f;f++)p[f]=-1;return this.fg(p,u)}return f=!1,s.B()&&(s=a,f=!0),p[0]=-1,p[1]=-1,p[3]=-1,p[4]=-1,p[6]=-1,p[7]=-1,p[8]=2,a=s.getType(),d.aa.Hc(a)?a==1736?s.Ke()!=0?(p[2]=2,p[5]=1):(p[5]=-1,a=new d.l,s.A(a),p[2]=a.ca()==0&&a.R()==0?0:1):(a=s.Qb()!=0,p[2]=a?1:0,p[5]=d.pi.aq(s)?0:-1):(p[2]=0,p[5]=-1),f&&this.vK(p),this.fg(p,u)},l.MR=function(s,a,u){return l.dQ(s)?3:l.UP(s)?4:l.cY(s,a,u)?8:l.CP(s,a,u)?16:l.eP(s)?1:l.EU(s,a,u)?32:0},l.dQ=function(s){return s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="F"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="F"&&s.charAt(6)=="F"&&s.charAt(7)=="F"&&s.charAt(8)=="*"},l.UP=function(s){return s.charAt(0)=="F"&&s.charAt(1)=="F"&&s.charAt(2)=="*"&&s.charAt(3)=="F"&&s.charAt(4)=="F"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*"},l.cY=function(s,a,u){return(a!=0||u!=0)&&((a!=2||u!=2)&&(s.charAt(0)=="F"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="T"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*"||a==1&&u==1&&s.charAt(0)=="F"&&s.charAt(1)=="T"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*")||u!=0&&s.charAt(0)=="F"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="T"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*")},l.CP=function(s,a,u){return a>u?s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="T"&&s.charAt(7)=="*"&&s.charAt(8)=="*":a==1&&u==1&&s.charAt(0)=="0"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*"},l.eP=function(s){return s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="F"&&s.charAt(7)=="F"&&s.charAt(8)=="*"},l.EU=function(s,a,u){if(a==u){if(a!=1)return s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="T"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="T"&&s.charAt(7)=="*"&&s.charAt(8)=="*";if(s.charAt(0)=="1"&&s.charAt(1)=="*"&&s.charAt(2)=="T"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="T"&&s.charAt(7)=="*"&&s.charAt(8)=="*")return!0}return!1},l.Jw=function(s,a,u){s=a.La(s);for(var p=a.Re;p!=-1;p=a.Rf(p))if(a.xd(p)&s){var f=a.Me(p);if(f==-1)a.nn(p,u,0);else{var g=f,b=0;do a.dh(g)&s&&b++,g=a.jc(a.xa(g));while(g!=f);a.nn(p,u,b)}}},l.Zp=function(s){var a=""+s.charAt(0);return a+=s.charAt(3),a+=s.charAt(6),a+=s.charAt(1),a+=s.charAt(4),a+=s.charAt(7),a+=s.charAt(2),(a+=s.charAt(5))+s.charAt(8)},l.prototype.Yi=function(){for(var s=0;9>s;s++)this.J[s]=-2,this.Za[s]=-2},l.vK=function(s){var a=s[1],u=s[2],p=s[5];s[1]=s[3],s[2]=s[6],s[5]=s[7],s[3]=a,s[6]=u,s[7]=p},l.prototype.bj=function(s){for(this.Xc=s,s=0;9>s;s++)this.Xc.charAt(s)!="*"?(this.ea[s]=!0,this.le++):this.ea[s]=!1},l.prototype.UJ=function(){for(var s=0;9>s;s++)this.ea[s]&&this.J[s]==-2&&(this.J[s]=-1,this.ea[s]=!1)},l.prototype.pc=function(s){return this.J[s]!=-2&&(this.J[s]==-1?(this.ea[s]=!1,this.le--,!0):this.Xc.charAt(s)!="T"&&this.Xc.charAt(s)!="F"?!(this.J[s]<this.Za[s])&&(this.ea[s]=!1,this.le--,!0):(this.ea[s]=!1,this.le--,!0))},l.prototype.xJ=function(){this.vw=0,this.Za[0]=2,this.Za[1]=1,this.Za[2]=2,this.Za[3]=1,this.Za[4]=1,this.Za[5]=1,this.Za[6]=2,this.Za[7]=1,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},l.prototype.IB=function(){this.vw=1,this.Sm=3,this.Za[0]=1,this.Za[1]=0,this.Za[2]=2,this.Za[3]=1,this.Za[4]=0,this.Za[5]=1,this.Za[6]=1,this.Za[7]=0,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},l.prototype.eX=function(){this.vw=2,this.Sm=4,this.Za[0]=1,this.Za[1]=0,this.Za[2]=1,this.Za[3]=0,this.Za[4]=0,this.Za[5]=0,this.Za[6]=1,this.Za[7]=0,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},l.prototype.yJ=function(){this.Sm=3,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=2,this.Za[3]=0,this.Za[4]=-1,this.Za[5]=1,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},l.prototype.MJ=function(){this.Sm=4,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=1,this.Za[3]=0,this.Za[4]=-1,this.Za[5]=0,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},l.prototype.RJ=function(){this.Sm=5,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=0,this.Za[3]=-1,this.Za[4]=-1,this.Za[5]=-1,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[3]&&(this.J[3]=-1,this.ea[3]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[5]&&(this.J[5]=-1,this.ea[5]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},l.prototype.xN=function(s,a,u){var p=!0;return this.ea[0]&&(this.CS(s,a,u),p=p&&this.pc(0)),this.ea[1]&&(this.sG(s,a,1),p=p&&this.pc(1)),this.ea[2]&&(this.tG(s,a,u,2),p=p&&this.pc(2)),this.ea[3]&&(this.sG(s,u,3),p=p&&this.pc(3)),this.ea[4]&&(this.BN(s,a,u),p=p&&this.pc(4)),this.ea[5]&&(this.eE(s,u,5),p=p&&this.pc(5)),this.ea[6]&&(this.tG(s,u,a,6),p=p&&this.pc(6)),this.ea[7]&&(this.eE(s,a,7),p=p&&this.pc(7)),p},l.prototype.Cu=function(s,a){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Fr(s,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5)),this.Fr(a,this.ea[6]?6:-1,this.Xc.charAt(6),this.ea[7]?7:-1,this.Xc.charAt(7))},l.prototype.Fr=function(s,a,u,p,f){a==-1&&p==-1||((u!="T"&&u!="F"&&a!=-1||f!="T"&&f!="F"&&p!=-1)&&s.Ke()==0?(p!=-1&&(this.J[p]=-1),a!=-1&&(u=new d.l,s.A(u),this.J[a]=u.ca()==0&&u.R()==0?0:1)):(a!=-1&&(this.J[a]=2),p!=-1&&(this.J[p]=1)))},l.prototype.ly=function(s){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Fr(s,this.ea[0]?0:-1,this.Xc.charAt(0),this.ea[1]?1:-1,this.Xc.charAt(1))},l.prototype.ZD=function(s){this.ly(s),l.vK(this.J)},l.prototype.Du=function(s,a){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.ea[6]){var u=this.Xc.charAt(6);u=u=="T"||u=="F"||a.Qb()!=0,this.J[6]=u?1:0}this.ea[7]&&(a=d.pi.aq(a),this.J[7]=a?0:-1),this.Fr(s,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5))},l.prototype.$D=function(s){if(this.ea[0]){var a=this.Xc.charAt(0);a=a=="T"||a=="F"||s.Qb()!=0,this.J[0]=a?1:0}this.ea[1]&&(s=d.pi.aq(s),this.J[1]=s?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},l.prototype.Eu=function(s){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Fr(s,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5))},l.prototype.zN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},l.prototype.PG=function(s,a){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.ea[2]){var u=this.Xc.charAt(2);u=u=="T"||u=="F"||s.Qb()!=0,this.J[2]=u?1:0}this.ea[5]&&(s=d.pi.aq(s),this.J[5]=s?0:-1),this.ea[6]&&(u=(u=this.Xc.charAt(6))=="T"||u=="F"||a.Qb()!=0,this.J[6]=u?1:0),this.ea[7]&&(a=d.pi.aq(a),this.J[7]=a?0:-1)},l.prototype.Vz=function(s){if(this.J[0]=-1,this.J[3]=-1,this.ea[2]){var a=this.Xc.charAt(2);a=a=="T"||a=="F"||s.Qb()!=0,this.J[2]=a?1:0}this.ea[5]&&(s=d.pi.aq(s),this.J[5]=s?0:-1),this.J[6]=0},l.prototype.yI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},l.prototype.yN=function(s,a,u){var p=!0;return this.ea[0]&&(this.DS(s,a),p=p&&this.pc(0)),this.ea[1]&&(this.zS(s,a,u,this.kh),p=p&&this.pc(1)),this.ea[2]&&(this.AS(s,a),p=p&&this.pc(2)),this.ea[3]&&(this.FN(s,a,u,this.kh),p=p&&this.pc(3)),this.ea[4]&&(this.CN(s,a,u,this.kh),p=p&&this.pc(4)),this.ea[5]&&(this.DN(s,a,u),p=p&&this.pc(5)),this.ea[6]&&(this.lQ(s,a),p=p&&this.pc(6)),this.ea[7]&&(this.kQ(s,a,u,this.kh),p=p&&this.pc(7)),p},l.prototype.mT=function(s,a,u){var p=!0;return this.ea[0]&&(this.GS(s,a,u,this.Yh,this.kh),p=p&&this.pc(0)),this.ea[1]&&(this.uG(s,a,u,this.Yh,this.kh,1),p=p&&this.pc(1)),this.ea[2]&&(this.vG(s,a,u,2),p=p&&this.pc(2)),this.ea[3]&&(this.uG(s,u,a,this.kh,this.Yh,3),p=p&&this.pc(3)),this.ea[4]&&(this.HN(s,a,u,this.Yh,this.kh),p=p&&this.pc(4)),this.ea[5]&&(this.fE(s,u,this.Yh,5),p=p&&this.pc(5)),this.ea[6]&&(this.vG(s,u,a,6),p=p&&this.pc(6)),this.ea[7]&&(this.fE(s,a,this.kh,7),p=p&&this.pc(7)),p},l.prototype.aE=function(s,a,u){var p=!0;return this.ea[0]&&(this.ES(s,a),p=p&&this.pc(0)),this.ea[2]&&(this.BS(s,a),p=p&&this.pc(2)),this.ea[3]&&(this.GN(s,a,u),p=p&&this.pc(3)),this.ea[5]&&(this.EN(s,a),p=p&&this.pc(5)),this.ea[6]&&(this.mQ(s,a),p=p&&this.pc(6)),p},l.prototype.QG=function(s,a,u){var p=!0;return this.ea[0]&&(this.HS(s,a,u,this.Yh),p=p&&this.pc(0)),this.ea[2]&&(this.FS(s,u),p=p&&this.pc(2)),this.ea[3]&&(this.JN(s,a,u,this.Yh),p=p&&this.pc(3)),this.ea[5]&&(this.IN(s,a,u,this.Yh),p=p&&this.pc(5)),this.ea[6]&&(this.nQ(s,a,u),p=p&&this.pc(6)),p},l.prototype.ZU=function(s,a,u){var p=!0;return this.ea[0]&&(this.IS(s,a,u),p=p&&this.pc(0)),this.ea[2]&&(this.wG(s,a,u,2),p=p&&this.pc(2)),this.ea[6]&&(this.wG(s,u,a,6),p=p&&this.pc(6)),p},l.prototype.CS=function(s,a,u){this.J[0]!=2&&(s=this.j.af(s))&a&&s&u&&(this.J[0]=2)},l.prototype.sG=function(s,a,u){if(this.J[u]!=1){var p=this.j.af(this.j.xa(s));this.j.af(s)&a&&p&a&&(this.J[u]=1)}},l.prototype.tG=function(s,a,u,p){this.J[p]!=2&&(s=this.j.af(s))&a&&!(s&u)&&(this.J[p]=2)},l.prototype.BN=function(s,a,u){if(this.J[4]!=1){var p=this.j.dh(s);p&a&&p&u?this.J[4]=1:this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1&&(s=this.j.xd(this.j.uf(s)))&a&&s&u&&(this.J[4]=0)}},l.prototype.eE=function(s,a,u){if(this.J[u]!=1){var p=this.j.af(this.j.xa(s));!(this.j.af(s)&a)&&!(p&a)&&(this.J[u]=1)}},l.prototype.DS=function(s,a){if(this.J[0]!=1){var u=this.j.af(this.j.xa(s));this.j.af(s)&a&&u&a&&(this.J[0]=1)}},l.prototype.zS=function(s,a,u,p){if(this.J[1]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1){var f=this.j.uf(s),g=this.j.xd(f);!(g&a)&&this.j.af(s)&a&&(s=this.j.ng(f,p),g&u&&s%2!=0&&(this.J[1]=0))}},l.prototype.AS=function(s,a){this.J[2]!=2&&this.j.dh(s)&a&&(this.J[2]=2)},l.prototype.FN=function(s,a,u,p){if(this.J[3]!=1){var f=this.j.dh(s);f&a&&f&u?this.J[3]=1:this.J[3]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1&&(f=this.j.uf(s),(s=this.j.xd(f))&a&&(a=this.j.ng(f,p),s&u&&a%2==0&&(this.J[3]=0)))}},l.prototype.CN=function(s,a,u,p){if(this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1){var f=this.j.uf(s);(s=this.j.xd(f))&a&&(a=this.j.ng(f,p),s&u&&a%2!=0&&(this.J[4]=0))}},l.prototype.DN=function(s,a,u){this.J[5]!=1&&(s=this.j.dh(s))&a&&!(s&u)&&(this.J[5]=1)},l.prototype.lQ=function(s,a){if(this.J[6]!=1){var u=this.j.af(this.j.xa(s));!(this.j.af(s)&a)&&!(u&a)&&(this.J[6]=1)}},l.prototype.kQ=function(s,a,u,p){if(this.J[7]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1){var f=this.j.uf(s),g=this.j.xd(f);!(g&a)&&!(this.j.af(s)&a)&&(s=this.j.ng(f,p),g&u&&s%2!=0&&(this.J[7]=0))}},l.prototype.GS=function(s,a,u,p,f){if(this.J[0]!=1){var g=this.j.dh(s);g&a&&g&u?this.J[0]=1:this.J[0]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1&&(s=this.j.uf(s),(g=this.j.xd(s))&a&&g&u&&(a=this.j.ng(s,p),f=this.j.ng(s,f),a%2==0&&f%2==0&&(this.J[0]=0)))}},l.prototype.uG=function(s,a,u,p,f,g){if(this.J[g]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1){s=this.j.uf(s);var b=this.j.xd(s);b&a&&b&u&&(a=this.j.ng(s,p),f=this.j.ng(s,f),a%2==0&&f%2!=0&&(this.J[g]=0))}},l.prototype.vG=function(s,a,u,p){this.J[p]!=1&&(s=this.j.dh(s))&a&&!(s&u)&&(this.J[p]=1)},l.prototype.HN=function(s,a,u,p,f){if(this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1){s=this.j.uf(s);var g=this.j.xd(s);g&a&&g&u&&(a=this.j.ng(s,p),f=this.j.ng(s,f),a%2!=0&&f%2!=0&&(this.J[4]=0))}},l.prototype.fE=function(s,a,u,p){this.J[p]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1&&(s=this.j.uf(s),!(this.j.xd(s)&a)&&this.j.ng(s,u)%2!=0&&(this.J[p]=0))},l.prototype.ES=function(s,a){this.J[0]!=0&&!(this.j.xd(s)&a)&&this.j.hk(this.j.cz(s))&a&&(this.J[0]=0)},l.prototype.BS=function(s,a){this.J[2]!=2&&this.j.xd(s)&a&&(this.J[2]=2)},l.prototype.GN=function(s,a,u){this.J[3]!=0&&(s=this.j.xd(s))&a&&s&u&&(this.J[3]=0)},l.prototype.EN=function(s,a){this.J[5]!=1&&this.j.xd(s)&a&&(this.J[5]=1)},l.prototype.mQ=function(s,a){this.J[6]!=0&&!(this.j.xd(s)&a)&&!(this.j.hk(this.j.cz(s))&a)&&(this.J[6]=0)},l.prototype.HS=function(s,a,u,p){if(this.J[0]!=0){var f=this.j.xd(s);f&a&&f&u&&this.j.ng(s,p)%2==0&&(this.J[0]=0)}},l.prototype.FS=function(s,a){this.J[2]!=1&&(this.j.Me(s)!=-1?this.J[2]=1:this.J[2]!=0&&!(this.j.xd(s)&a)&&(this.J[2]=0))},l.prototype.JN=function(s,a,u,p){if(this.J[3]!=0){var f=this.j.xd(s);f&a&&f&u&&this.j.ng(s,p)%2!=0&&(this.J[3]=0)}},l.prototype.IN=function(s,a,u,p){if(this.J[5]!=0){var f=this.j.xd(s);f&a&&!(f&u)&&this.j.ng(s,p)%2!=0&&(this.J[5]=0)}},l.prototype.nQ=function(s,a,u){this.J[6]!=0&&!((s=this.j.xd(s))&a)&&s&u&&(this.J[6]=0)},l.prototype.IS=function(s,a,u){this.J[0]!=0&&(s=this.j.xd(s))&a&&s&u&&(this.J[0]=0)},l.prototype.wG=function(s,a,u,p){this.J[p]!=0&&(s=this.j.xd(s))&a&&!(s&u)&&(this.J[p]=0)},l.prototype.Bp=function(s,a){var u=!1;s=this.j.La(s),a=this.j.La(a),this.Ui=this.j.$g();for(var p=this.j.Re;p!=-1;p=this.j.Rf(p)){var f=this.j.Me(p);if(f==-1){if(this.Sm!=-1)switch(this.Sm){case 3:u=this.aE(p,s,a);break;case 4:u=this.QG(p,s,a);break;default:throw d.i.fa("internal error")}}else{var g=f;do{var b=g;if(this.j.Ab(b,this.Ui)!=1)do{switch(this.vw){case 0:u=this.xN(b,s,a);break;case 1:u=this.yN(b,s,a);break;case 2:u=this.mT(b,s,a);break;default:throw d.i.fa("internal error")}if(u)break;this.j.Kb(b,this.Ui,1),b=this.j.jc(b)}while(b!=g&&!u);if(u)break;g=this.j.jc(this.j.xa(b))}while(g!=f);if(u)break}}u||this.UJ(),this.j.Jg(this.Ui)},l.prototype.Gy=function(s,a){var u=!1;s=this.j.La(s),a=this.j.La(a);for(var p=this.j.Re;p!=-1;p=this.j.Rf(p)){switch(this.Sm){case 3:u=this.aE(p,s,a);break;case 4:u=this.QG(p,s,a);break;case 5:u=this.ZU(p,s,a);break;default:throw d.i.Qa()}if(u)break}u||this.UJ()},l.prototype.er=function(s,a){this.j.dr(s,a)},l.prototype.Wo=function(s,a,u){this.YP(s,a,u),this.er(s,u)},l.prototype.YP=function(s,a,u){for(d.Tk.V(s,a,u,!1),s.Gp(0,!0,!0),a=s.ld;a!=-1;a=s.ue(a))s.ic(a)==1736&&d.rn.V(s,a,-1,!1,u)},l.WE=function(s,a){var u=s.getType();return d.aa.yd(u)?((a=new d.Ta(s.description)).oc(s,!0),a):u==197?(u=new d.l,s.A(u),u.ca()<=a&&u.R()<=a?(a=new d.Sa(s.description),s.sf(a),a):u.ca()<=a||u.R()<=a?(a=new d.Ta(s.description),u=new d.Sa,s.Hf(0,u),a.nf(u),s.Hf(2,u),a.lineTo(u),a):((a=new d.Da(s.description)).ad(s,!1),a)):s},l}(),d.am=L}(Y||(Y={})),function(d){var L=function(){function l(s){this.Em=new d.ia(0),this.dw=new d.ia(0),this.wt=new d.h,this.xt=new d.h,this.g=s,this.Hs=-1}return l.prototype.bc=function(s){return this.g.bc(this.zz(s))},l.prototype.Bv=function(s){var a=this.iz(s);if(s=this.HF(s),this.g.Ma(a)==s){var u=a;a=s,s=u}return this.g.Gc(a,this.wt),this.g.Gc(s,this.xt),this.wt.y<this.xt.y},l.prototype.zz=function(s){var a=this.iz(s);return s=this.HF(s),this.g.U(a)==s?a:s},l.prototype.iz=function(s){return this.Em.get(s)},l.prototype.HF=function(s){return this.dw.get(s)},l.prototype.rF=function(s){this.Em.set(s,this.Hs),this.Hs=s},l.prototype.nI=function(s){if(this.Hs!=-1){var a=this.Hs;return this.Hs=this.Em.get(a),this.Em.set(a,s),this.dw.set(a,this.g.U(s)),a}return this.Em==null&&(this.Em=new d.ia(0),this.dw=new d.ia(0)),a=this.Em.size,this.Em.add(s),this.dw.add(this.g.U(s)),a},l.prototype.rz=function(s){return this.g.bd(this.iz(s))},l}();d.yY=L;var S=function(){function l(s){this.Be=s,this.ie=new d.yb,this.Nm=new d.yb,this.CH=0,this.Ao=null,this.yA=-1}return l.prototype.compare=function(s,a,u){u=s.ja(u);var p=this.Be.hb;if(this.yA==a)var f=this.CH;else this.Ao=p.bc(a),this.Ao==null?((s=p.g).ed(p.zz(a),this.ie),this.Ao=this.ie,f=this.ie.Pe(this.Be.yh,0)):f=this.Ao.Pe(this.Be.yh,0),this.CH=f,this.yA=a;if((s=p.bc(u))==null){(s=p.g).ed(p.zz(u),this.Nm),s=this.Nm;var g=this.Nm.Pe(this.Be.yh,0)}else g=s.Pe(this.Be.yh,0);return f==g&&(a=p.Bv(a),u=p.Bv(u),(a=.5*((u=Math.min(a?this.Ao.la:this.Ao.na,u?s.la:s.na))+this.Be.yh))==this.Be.yh&&(a=u),f=this.Ao.Pe(a,0),g=s.Pe(a,0)),f<g?-1:f>g?1:0},l.prototype.reset=function(){this.yA=-1},l}(),h=function(){function l(){this.Wm=this.Gl=null,this.fb=new d.Yj,this.fb.RP(),this.$d=new S(this),this.fb.Vo(this.$d)}return l.prototype.HQ=function(){var s=!1;if(this.fw&&(s=this.IQ()),this.g.da(this.X)==1){var a=this.g.Ob(this.X);return s=this.g.wz(a),this.g.PB(a,!0),0>s&&(s=this.g.Xa(a),this.g.pJ(s),this.g.Wg(a,this.g.Ma(s)),!0)}for(this.El=this.g.Ky(),this.wo=this.g.Ky(),a=this.g.Ob(this.X);a!=-1;a=this.g.Rb(a))this.g.gr(a,this.El,0),this.g.gr(a,this.wo,-1);a=new d.ia(0),this.yh=NaN;var u=new d.h;this.et=this.g.da(this.X),this.ro=this.g.Gd(),this.Rs=this.g.Gd();for(var p=this.Gl.rc(this.Gl.je);p!=-1;p=this.Gl.lb(p)){var f=this.Gl.getData(p);if(this.g.Gc(f,u),u.y!=this.yh&&a.size!=0&&(s=this.ut(a)||s,this.$d.reset(),a.clear(!1)),a.add(f),this.yh=u.y,this.et==0)break}for(0<this.et&&(s=this.ut(a)||s,a.clear(!1)),this.g.Td(this.ro),this.g.Td(this.Rs),a=this.g.Ob(this.X);a!=-1;)if(this.g.sj(a,this.El)==3){for(this.g.PB(a,!0),u=a,a=this.g.sj(a,this.wo);a!=-1;)p=this.g.sj(a,this.wo),this.g.ZT(this.X,this.g.Rb(u),a),u=a,a=p;a=this.g.Rb(u)}else this.g.PB(a,!1),a=this.g.Rb(a);return this.g.CB(this.El),this.g.CB(this.wo),s},l.prototype.ut=function(s){return this.$V(s)},l.prototype.$V=function(s){var a=!1;this.hb==null&&(this.hb=new L(this.g)),this.Wm==null?(this.Wm=new d.ia(0),this.Wm.Jb(16)):this.Wm.clear(!1),this.ZV(s);for(var u=0,p=s.size;u<p;u++){var f=s.get(u);f!=-1&&this.oG(f,-1)}for(u=0;u<this.Wm.size&&0<this.et;u++)if(s=this.Wm.get(u),f=this.hb.rz(this.fb.ja(s)),p=-1,this.g.sj(f,this.El)==0){f=this.fb.we(s);for(var g,b=s;f!=-1;){var x=this.fb.ja(f),T=this.hb.rz(x),M=this.g.sj(T,this.El);if(M!=0){p=T;break}b=f,f=this.fb.we(f)}f==-1?(g=!0,f=b):(x=this.fb.ja(f),g=this.hb.Bv(x),f=this.fb.lb(f),g=!g);do{if(x=this.fb.ja(f),T=this.hb.rz(x),(M=this.g.sj(T,this.El))==0&&(g!=this.hb.Bv(x)&&(a=this.g.Xa(T),this.g.pJ(a),this.g.Wg(T,this.g.Ma(a)),a=!0),this.g.gr(T,this.El,g?3:2),g||(b=this.g.sj(p,this.wo),this.g.gr(p,this.wo,T),this.g.gr(T,this.wo,b)),this.et--,this.et==0))return a;p=T,b=f,f=this.fb.lb(f),g=!g}while(b!=s)}return a},l.prototype.ZV=function(s){for(var a=0,u=s.size;a<u;a++){var p=s.get(a),f=this.g.Pa(p,this.ro),g=this.g.Pa(p,this.Rs);if(f!=-1){var b=this.fb.ja(f);this.hb.rF(b),this.g.Ra(p,this.ro,-1)}g!=-1&&(b=this.fb.ja(g),this.hb.rF(b),this.g.Ra(p,this.Rs,-1)),b=-1,f!=-1&&g!=-1?(this.fb.vd(f,-1),this.fb.vd(g,-1),s.set(a,-1)):b=f!=-1?f:g,b!=-1&&(this.oG(p,b)||this.fb.vd(b,-1),s.set(a,-1))}},l.prototype.oG=function(s,a){var u=new d.h,p=new d.h;this.g.Gc(s,u);var f=this.g.U(s);this.g.Gc(f,p);var g=!1;if(u.y<p.y){g=!0;var b=this.hb.nI(s);if(a==-1)var x=this.fb.addElement(b,-1);else x=a,this.fb.Sj(x,b);(b=this.g.Pa(f,this.ro))==-1?this.g.Ra(f,this.ro,x):this.g.Ra(f,this.Rs,x),f=this.g.bd(s),this.g.sj(f,this.El)==0&&this.Wm.add(x)}return f=this.g.Ma(s),this.g.Gc(f,p),u.y<p.y&&(g=!0,b=this.hb.nI(f),a==-1?x=this.fb.addElement(b,-1):(x=a,this.fb.Sj(x,b)),(b=this.g.Pa(f,this.ro))==-1?this.g.Ra(f,this.ro,x):this.g.Ra(f,this.Rs,x),f=this.g.bd(s),this.g.sj(f,this.El)==0&&this.Wm.add(x)),g},l.V=function(s,a,u,p){var f=new l;return f.g=s,f.X=a,f.Gl=u,f.fw=p,f.HQ()},l.prototype.IQ=function(){var s=new d.ia(0),a=new d.ia(0),u=-1,p=-1,f=new d.h;f.Rc();for(var g=-1,b=-1,x=-1,T=new d.h,M=this.Gl.rc(this.Gl.je);M!=-1;M=this.Gl.lb(M)){var C=this.Gl.getData(M);this.g.Gc(C,T);var O=this.g.bd(C);f.qb(T)&&b==O?(p==-1&&(u=this.g.Ky(),p=this.g.Gd()),x==-1&&(x=a.size,this.g.Ra(g,p,x),a.add(1),this.g.sj(O,u)==-1&&(this.g.gr(O,u,g),s.add(O))),this.g.Ra(C,p,x),a.bX(a.Fc()+1)):(x=-1,f.L(T)),g=C,b=O}if(s.size==0)return!1;for(f=new d.ia(0),g=new d.ia(0),b=0,x=s.size;b<x;b++){O=s.get(b);var F=this.g.sj(O,u);for(C=this.g.Pa(F,p),f.clear(!1),g.clear(!1),f.add(F),g.add(C),C=this.g.U(F);C!=F;C=this.g.U(C)){var P=C;if((T=this.g.Pa(P,p))!=-1)if(g.size==0)g.add(T),f.add(P);else if(g.Fc()==T){M=f.Fc();var G=this.g.U(M);F=this.g.U(P),this.g.Bc(M,F),this.g.Cc(F,M),this.g.Bc(P,G),this.g.Cc(G,P),P=[!1],G=this.g.nG(this.X,G,this.g.Xa(O),P),this.g.Ra(C,p,-1),P[0]&&this.g.Jf(O,F),C=this.g.Ja(O),C-=F=this.g.Ja(G),this.g.Vj(O,C),a.set(T,a.get(T)-1),a.get(T)==1&&(a.set(T,0),g.If(),f.If()),C=F=M}else f.add(C),g.add(T)}}return this.g.CB(u),this.g.Td(p),!0},l}();d.WL=h}(Y||(Y={})),function(d){var L=function(){function S(){}return S.prototype.ig=function(){this.PA=this.sb=null},S.prototype.get=function(){return this.PA},S.prototype.set=function(h){if(this.PA=h,h!=null)throw h.getType()==322&&(this.sb=h),d.i.Qa()},S.prototype.create=function(h){if(h!=322)throw d.i.fa("Not Implemented");this.Or()},S.prototype.Or=function(){this.sb==null&&(this.sb=new d.yb),this.PA=this.sb},S}();d.ig=L}(Y||(Y={})),function(d){(d=d.XL||(d.XL={}))[d.enumLineSeg=1]="enumLineSeg",d[d.enumBezierSeg=2]="enumBezierSeg",d[d.enumArcSeg=4]="enumArcSeg",d[d.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",d[d.enumSegmentMask=7]="enumSegmentMask",d[d.enumDensified=8]="enumDensified"}(Y||(Y={})),function(d){var L=function(h){this.$i=h,this.qC=this.rC=1,this.sB=this.rB=this.tB=0},S=function(){function h(){this.Fq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Bk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Bf=new d.Sa,this.qa=this.Cw=0,this.mo=[],this.$s=[],this.yw=[],this.Iq=[],this.MA=[]}return h.prototype.wB=function(l){if(l!=null){for(var s=0,a=l.length;s<a;s++)this.rW(l[s]);l.length=0}},h.prototype.rW=function(l){l.$i=null,this.Iq.push(l)},h.prototype.Ow=function(l){if(this.Iq.length===0)var s=new L(l);else(s=this.Iq[this.Iq.length-1]).$i=l,--this.Iq.length;return s},h.prototype.SR=function(l,s){return l==0?this.$s[s]:this.yw[s]},h.prototype.aB=function(){this.Cw>=this.MA.length&&this.MA.push(new d.ig);var l=this.MA[this.Cw];return this.Cw++,l},h.prototype.clear=function(){this.wB(this.mo),this.wB(this.$s),this.wB(this.yw),this.Cw=0},h.prototype.Oo=function(l){this.mo.push(this.Ow(l))},h.prototype.ol=function(l){return l==0?this.$s.length:this.yw.length},h.prototype.Vp=function(l,s){return this.SR(l,s).$i},h.prototype.Ea=function(l,s){if(this.mo.length!=2)throw d.i.Qa();this.qa=l;var a=d.lc.ox(.01*l),u=!1,p=this.mo[0],f=this.mo[1];if(s||5&p.$i.zr(f.$i,l,!0)){if(p.$i.getType()==322){var g=p.$i;if(f.$i.getType()==322){s=f.$i;var b=d.yb.Zx(g,s,null,this.Fq,this.Bk,l);if(b==0)throw d.yb.Zx(g,s,null,this.Fq,this.Bk,l),d.i.Qa();l=Array(9),d.O.$u(l,null);for(var x=0;x<b;x++){var T=this.Fq[x],M=this.Bk[x],C=p.sB,O=1;T==0?(C=p.tB,O=p.rC):T==1&&(C=p.rB,O=p.qC);var F=f.sB,P=1;M==0?(F=f.tB,P=f.rC):M==1&&(F=f.rB,P=f.qC);var G=new d.h;C==F?(C=new d.h,g.hc(T,C),T=new d.h,s.hc(M,T),P/=M=O+P,d.lc.OG(C,T,P,G),d.h.yc(G,C)+d.h.yc(G,T)>a&&(u=!0)):C>F?(g.hc(T,G),T=new d.h,s.hc(M,T),d.h.yc(G,T)>a&&(u=!0)):(s.hc(M,G),C=new d.h,g.hc(T,C),d.h.yc(G,C)>a&&(u=!0)),l[x]=G}for(p=0,f=-1,x=0;x<=b;x++)(P=x<b?this.Fq[x]:1)!=p&&(a=this.aB(),g.ah(p,P,a),f!=-1&&a.get().Dc(l[f]),x!=b&&a.get().Qc(l[x]),p=P,this.$s.push(this.Ow(a.get()))),f=x;for(g=[0,0,0,0,0,0,0,0,0],x=0;x<b;x++)g[x]=x;for(1<b&&this.Bk[0]>this.Bk[1]&&(P=this.Bk[0],this.Bk[0]=this.Bk[1],this.Bk[1]=P,x=g[0],g[0]=g[1],g[1]=x),p=0,f=-1,x=0;x<=b;x++)(P=x<b?this.Bk[x]:1)!=p&&(a=this.aB(),s.ah(p,P,a),f!=-1&&(p=g[f],a.get().Dc(l[p])),x!=b&&(p=g[x],a.get().Qc(l[p])),p=P,this.yw.push(this.Ow(a.get()))),f=x;return u}}throw d.i.Qa()}return!1},h.prototype.Kz=function(l,s,a){if(s.copyTo(this.Bf),this.mo.length!=1)throw d.i.Qa();this.qa=l;var u=this.mo[0];if(a||u.$i.ru(s.D(),l,!0)){if(u.$i.getType()!=322)throw d.i.Qa();var p=(l=u.$i).fe(s.D(),!1);this.Fq[0]=p;var f=u.sB;for(a=1,p==0?(f=u.tB,a=u.rC):p==1&&(f=u.rB,a=u.qC),u=new d.h,f==0?(f=new d.h,l.hc(p,f),s=s.D(),d.lc.OG(f,s,1/(a+1),u)):0<f?(u=new d.h,l.hc(p,u)):u=s.D(),a=0,p=-1,f=0;1>=f;f++){if((s=1>f?this.Fq[f]:1)!=a){var g=this.aB();l.ah(a,s,g),p!=-1&&g.get().Dc(u),f!=1&&g.get().Qc(u),a=s,this.$s.push(this.Ow(g.get()))}p=f}this.Bf.Cb(u)}},h}();d.TC=S}(Y||(Y={})),function(d){var L=function(){function S(h){this.Ds=this.rk=this.sb=null,this.ag=0,this.zm=!1,this.zf=-1,this.Cl=this.Jd=0,this.gb=-1,this.ib=h,this.ag=this.Wx(this.Cl),this.zm=!1,this.rk=null,this.Ds=new d.h}return S.prototype.BW=function(h){if(this.ib!=h.ib)throw d.i.Hb();this.zf=h.zf,this.Jd=h.Jd,this.gb=h.gb,this.Cl=h.Cl,this.ag=h.ag,this.zm=h.zm,this.rk=null},S.prototype.ha=function(){if(this.zf!=this.Jd&&this.BD(),this.zm)this.Jd=(this.Jd+1)%this.ag;else{if(this.Jd==this.ag)throw d.i.ce();this.Jd++}return this.rk},S.prototype.li=function(){if(this.zm)this.Jd=(this.ag+this.Jd-1)%this.ag;else{if(this.Jd==0)throw d.i.ce();this.Jd--}return this.Jd!=this.zf&&this.BD(),this.rk},S.prototype.DW=function(){this.zf=-1,this.Jd=0},S.prototype.EW=function(){this.Jd=this.ag,this.zf=-1},S.prototype.Vb=function(h,l){if(l===void 0&&(l=-1),0<=this.gb&&this.gb<this.ib.da()){var s=this.IM();if(h>=s&&h<this.ib.Vc(this.gb))return this.zf=-1,void(this.Jd=h-s)}l=0<=l&&l<this.ib.da()&&h>=this.ib.Ba(l)&&h<this.ib.Vc(l)?l:this.ib.sz(h),this.Cl=l+1,this.gb=l,this.zf=-1,this.Jd=h-this.ib.Ba(l),this.ag=this.Wx(l),this.ib.Ba(this.gb),this.ib.dc(this.gb)},S.prototype.$a=function(){return this.gb=this.Cl,!(this.gb>=this.ib.da())&&(this.zf=-1,this.Jd=0,this.ag=this.Wx(this.gb),this.ib.Ba(this.gb),this.ib.dc(this.gb),this.Cl++,!0)},S.prototype.Zi=function(){this.ag=this.Jd=this.zf=-1,this.Cl=0,this.gb=-1},S.prototype.Wx=function(h){if(this.ib.Ac())return 0;var l=1;return this.ib.dc(h)&&(l=0),this.ib.Ja(h)-l},S.prototype.On=function(){return this.zf==this.ag-1&&this.ib.dc(this.gb)},S.prototype.JB=function(){this.zm=!0},S.prototype.wb=function(){return this.ib.nb.o[this.gb]+this.zf},S.prototype.IM=function(){return this.ib.Ba(this.gb)},S.prototype.ik=function(){return this.On()?this.ib.Ba(this.gb):this.wb()+1},S.prototype.vm=function(){return this.zf==0},S.prototype.Qn=function(){return this.zf==this.ag-1},S.prototype.Ha=function(){return this.Jd<this.ag},S.prototype.Ez=function(){return 0<this.Jd},S.prototype.Of=function(){var h=new S(this.ib);return h.zf=this.zf,h.Jd=this.Jd,h.ag=this.ag,h.gb=this.gb,h.Cl=this.Cl,h.ib=this.ib,h.zm=this.zm,h},S.prototype.BD=function(){if(0>this.Jd||this.Jd>=this.ag)throw d.i.ce();this.zf=this.Jd;var h=this.wb();this.ib.mc();var l=this.ib.Ve,s=1;switch(l!=null&&(s=7&l.read(h)),l=this.ib.description,s){case 1:this.sb==null&&(this.sb=new d.yb),this.rk=this.sb;break;case 2:throw d.i.fa("internal error");default:throw d.i.Qa()}this.rk.Nf(l),s=this.ik(),this.ib.Gc(h,this.Ds),this.rk.Dc(this.Ds),this.ib.Gc(s,this.Ds),this.rk.Qc(this.Ds);for(var a=1,u=l.Aa;a<u;a++)for(var p=l.kd(a),f=d.ra.Va(p),g=0;g<f;g++){var b=this.ib.Uc(p,h,g);this.rk.YB(p,g,b),b=this.ib.Uc(p,s,g),this.rk.OB(p,g,b)}},S.prototype.$S=function(){return this.gb==this.ib.da()-1},S.prototype.Pn=function(){var h=this.ib.VR();return h!=null&&(7&h.read(this.zf))!=1},S}();d.YL=L}(Y||(Y={})),function(d){var L=function(){function S(h){h instanceof d.aa?(this.xH=h,this.ya=-1,this.Ei=1):(this.vT=h.slice(0),this.ya=-1,this.Ei=h.length)}return S.prototype.La=function(){return this.ya},S.prototype.next=function(){return this.ya<this.Ei-1?(this.ya++,this.xH!=null?this.xH:this.vT[this.ya]):null},S.prototype.qe=function(){},S}();d.Zc=L}(Y||(Y={})),function(d){var L=function(){this.next=null},S=function(){function h(){this.Tq=this.Kw=this.Lw=0,this.kF=!1,this.gK=0,this.gn=this.Kf=this.Wl=this.Jh=null,this.Ol=0,this.vy=null,this.pl=this.oi=-1}return h.prototype.AX=function(l,s,a){this.oi=l,this.pl=s,this.Jh=this.Wl=null,this.Tq=0,this.vy=a,this.gn==null&&(this.gn=d.O.lg(384,0)),this.nK()},h.prototype.R=function(){return this.oi},h.prototype.ca=function(){return this.pl},h.prototype.flush=function(){0<this.Ol&&(this.vy.gF(this.gn,this.Ol),this.Ol=0)},h.prototype.nK=function(){if(0<this.Tq){for(var l=0;l<this.pl;l++){for(var s=this.Wl[l];s!=null;){var a=s;s=s.next,a.next=null}this.Wl[l]=null}this.Jh=null}this.Lw=this.pl,this.Kw=-1,this.Tq=0},h.prototype.iJ=function(l){for(this.kF=l==h.Cx,l=this.Lw;l<=this.Kw;l++)this.sN(),this.lN(l),this.ZP();this.nK()},h.prototype.jy=function(l,s,a,u){if(s!=u){var p=1;if(s>u&&(p=l,l=a,a=p,p=s,s=u,u=p,p=-1),!(0>u||s>=this.pl)){0>l&&0>a?a=l=-1:l>=this.oi&&a>=this.oi&&(a=l=this.oi);var f=(a-l)/(u-s);u>this.pl&&(a=f*((u=this.pl)-s)+l),0>s&&(l=f*(0-s)+l,s=0);var g=Math.max(this.oi+1,8388607);-8388607>l?(s=(0-l)/f+s,l=0):l>g&&(s=(this.oi-l)/f+s,l=this.oi),-8388607>a?u=(0-l)/f+s:a>g&&(u=(this.oi-l)/f+s),(s=d.O.truncate(s))!=(u=d.O.truncate(u))&&((a=new L).x=d.O.truncate(4294967296*l),a.y=s,a.H=u,a.WP=d.O.truncate(4294967296*f),a.dir=p,this.Wl==null&&(this.Wl=d.O.lg(this.pl,null)),a.next=this.Wl[a.y],this.Wl[a.y]=a,a.y<this.Lw&&(this.Lw=a.y),a.H>this.Kw&&(this.Kw=a.H),this.Tq++)}}},h.prototype.sN=function(){if(this.Jh!=null){for(var l=!1,s=null,a=this.Jh;a!=null;)if(a.y++,a.y==a.H){var u=a;a=a.next,s!=null?s.next=a:this.Jh=a,u.next=null}else a.x+=a.WP,s!=null&&s.x>a.x&&(l=!0),s=a,a=a.next;l&&(this.Jh=this.fK(this.Jh))}},h.prototype.lN=function(l){if(!(l>=this.pl)){var s=this.Wl[l];if(s!=null){this.Wl[l]=null,s=this.fK(s),this.Tq-=this.gK,l=this.Jh;for(var a=!0,u=s,p=null;l!=null&&u!=null;)l.x>u.x?(a&&(this.Jh=u),a=u.next,u.next=l,p!=null&&(p.next=u),p=u,u=a):(a=l.next,l.next=u,p!=null&&(p.next=l),p=l,l=a),a=!1;this.Jh==null&&(this.Jh=s)}}},h.eK=function(l,s){return 0>l?0:l>s?s:l},h.prototype.ZP=function(){if(this.Jh!=null){for(var l=0,s=this.Jh,a=d.O.truncate(d.O.XG(s.x)),u=s.next;u!=null;u=u.next)if(l=this.kF?1^l:l+u.dir,u.x>s.x){var p=d.O.truncate(d.O.XG(u.x));l!=0&&(s=h.eK(a,this.oi),(a=h.eK(p,this.oi))>s&&s<this.oi&&(this.gn[this.Ol++]=s,this.gn[this.Ol++]=a,this.gn[this.Ol++]=u.y,this.Ol==this.gn.length&&(this.vy.gF(this.gn,this.Ol),this.Ol=0))),s=u,a=p}}},h.prototype.fK=function(l){for(var s=0,a=l;a!=null;a=a.next)s++;if(this.gK=s,s==1)return l;this.Kf==null?this.Kf=d.O.lg(Math.max(s,16),null):this.Kf.length<s&&(this.Kf=d.O.lg(Math.max(s,2*this.Kf.length),null));var u=0;for(a=l;a!=null;a=a.next)this.Kf[u++]=a;for(s==2?this.Kf[0].x>this.Kf[1].x&&(l=this.Kf[0],this.Kf[0]=this.Kf[1],this.Kf[1]=l):h.AN(this.Kf,s,function(p,f){return p==f?0:p.x<f.x?-1:p.x>f.x?1:0}),l=this.Kf[0],this.Kf[0]=null,a=l,u=1;u<s;u++)a.next=this.Kf[u],a=this.Kf[u],this.Kf[u]=null;return a.next=null,l},h.AN=function(l,s,a){if(s==l.length)l.sort(a);else{var u=l.slice(0,0),p=l.slice(s);s=l.slice(0,s).sort(a),l.length=0,l.push.apply(l,u.concat(s).concat(p))}},h.Cx=0,h}();d.Px=S}(Y||(Y={})),function(d){var L=function(){function S(){}return S.prototype.ui=function(h,l){var s=this.g.Pa(h,this.Pq);if(this.Dl==s&&(this.Dl=this.oe.lb(this.Dl)),this.ho==s&&(this.ho=this.oe.lb(this.ho)),this.oe.jd(this.RA,s),this.bk(h),l&&(l=this.g.bd(h))!=-1&&this.g.Xa(l)==h){var a=this.g.U(h);if(a!=h){if((s=this.g.bd(a))==l)return void this.g.Jf(l,a);if((a=this.g.Ma(h))!=h&&(s=this.g.bd(a))==l)return void this.g.Jf(l,a)}this.g.Jf(l,-1),this.g.Wg(l,-1)}},S.prototype.pD=function(){for(var h=!1,l=new d.h;;){this.Wh==null?(this.Wh=new d.ia(0),this.zs=new d.ia(0),this.xe=new d.ia(0)):(this.Wh.clear(!1),this.zs.clear(!1),this.xe.clear(!1));for(var s=this.ho,a=0,u=!0;s!=this.Dl;){var p=this.oe.getData(s),f=new d.h;this.g.Gc(p,f),u&&(this.g.Gc(p,l),u=!1),f=this.g.Ma(p);var g=this.g.U(p);this.g.Pa(f,this.zg)!=-559038737&&(this.Wh.add(f),this.g.Ra(f,this.zg,-559038737),this.zs.add(p),this.xe.add(a++)),this.g.Pa(g,this.zg)!=-559038737&&(this.Wh.add(g),this.g.Ra(g,this.zg,-559038737),this.zs.add(p),this.xe.add(a++)),s=this.oe.lb(s)}if(2>this.Wh.size)break;var b=this;for(this.xe.Vd(0,this.xe.size,function(x,T){return b.pM(x,T)}),s=0,a=this.xe.size;s<a;s++)u=this.xe.get(s),u=this.Wh.get(u),this.g.Ra(u,this.zg,s),f=new d.h,this.g.Gc(u,f);for(f=this.TM(l),s=0,a=this.xe.size;s<a;s++)(u=this.xe.get(s))!=-1&&(u=this.Wh.get(u),this.g.Ra(u,this.zg,-1));if(!f)break;h=!0}return h},S.prototype.TM=function(h){for(var l=!1,s=!0;s;){s=!1;var a=0;this.xe.get(a)==-1&&(a=this.cm(a));for(var u=this.cm(a),p=0,f=this.xe.size;p<f&&a!=-1&&u!=-1&&a!=u;p++){var g=this.xe.get(a);u=this.xe.get(u),g=this.Wh.get(g),u=this.Wh.get(u);var b=this.g.U(g);this.g.Dv(b,h)||(b=this.g.Ma(g));var x=this.g.U(u);this.g.Dv(x,h)||(x=this.g.Ma(u));var T=this.pu(b,g),M=this.pu(x,u),C=T?this.g.Ma(b):this.g.U(b),O=M?this.g.Ma(x):this.g.U(x),F=!1;(this.sp(b)||this.sp(x)||this.sp(g)||this.sp(u)||this.sp(C)||this.sp(O))&&(F=!0),!F&&this.g.fq(g,u)&&(F=!0,this.tD(T,M,b,g,x,u)),!F&&this.g.fq(C,O)&&(F=!0,this.tD(!T,!M,b,C,x,O)),F&&(l=!0),s=s||F,a=this.cm(a),u=this.cm(a)}}if(!l)for(a=0,this.xe.get(a)==-1&&(a=this.cm(a)),u=this.cm(a),p=0,f=this.xe.size;p<f&&a!=-1&&u!=-1&&a!=u;p++)g=this.xe.get(a),u=this.xe.get(u),g=this.Wh.get(g),u=this.Wh.get(u),b=this.g.U(g),this.g.Dv(b,h)||(b=this.g.Ma(g)),x=this.g.U(u),this.g.Dv(x,h)||(x=this.g.Ma(u)),T=this.pu(b,g),M=this.pu(x,u),C=T?this.g.Ma(b):this.g.U(b),O=M?this.g.Ma(x):this.g.U(x),this.DM(T,M,g,b,C,u,x,O)&&(l=!0),a=this.cm(a),u=this.cm(a);return l},S.prototype.XM=function(){this.g.ic(this.X)==1736&&this.g.In(this.X)==1&&new d.Fg().MU(this.fw,this.g,this.X,this.nd);var h=!1,l=!0;this.zg=this.Pq=-1;var s=this.g.I(this.X),a=new d.ia(0);a.Jb(s);for(var u=this.g.Ob(this.X);u!=-1;u=this.g.Rb(u))for(var p=this.g.Xa(u),f=0,g=this.g.Ja(u);f<g;f++)a.add(p),p=this.g.U(p);var b=this.g.td.o,x=this.g.td.stride;this.g.vb.mc();var T=this.g.vb.za[0].o;for(a.Vd(0,s,function(C,O){var F=b[x*C],P=b[x*O],G=T[2*F];F=T[2*F+1];var q=T[2*P];return(G=F<(P=T[2*P+1])?-1:F>P?1:G<q?-1:G>q?1:0)==0&&(G=(C=b[x*C+3])<(O=b[x*O+3])?-1:C==O?0:1),G}),this.Pq=this.g.Gd(),this.oe=new d.jp,this.RA=this.oe.Ph(0),this.oe.fn(s),u=0;u<s;u++)p=a.get(u),f=this.oe.addElement(this.RA,p),this.g.Ra(p,this.Pq,f);for(this.zg=this.g.Gd(),this.Dl=-1,this.cD()&&(h=!0);l;){l=!1,s=0,a=!1;do{a=!1,this.ho=-1,g=0,u=new d.h,f=new d.h;for(var M=this.oe.rc(this.RA);M!=-1;)p=this.oe.getData(M),this.ho!=-1?(this.g.Gc(p,f),u.qb(f)?g++:(u.L(f),this.Dl=M,0<g&&(p=this.pD())&&(a=!0,this.Dl!=-1&&(p=this.oe.getData(this.Dl),this.g.Gc(p,u))),this.ho=M=this.Dl,g=0)):(this.ho=M,this.g.Gc(this.oe.getData(M),u),g=0),M!=-1&&(M=this.oe.lb(M));if(this.Dl=-1,0<g&&(p=this.pD())&&(a=!0),10<s++)throw d.i.Qa();a&&this.GM(),this.cD()&&(a=!0),l=l||a&&!1,h=h||a}while(a)}return this.g.Td(this.Pq),this.g.Td(this.zg),d.WL.V(this.g,this.X,this.oe,this.fw)||h},S.prototype.pu=function(h,l){return this.g.U(l)!=h},S.prototype.DM=function(h,l,s,a,u,p,f,g){if(a==f)return this.bk(s),this.bk(p),!1;var b=this.g.Pa(s,this.zg),x=this.g.Pa(u,this.zg),T=this.g.Pa(p,this.zg),M=this.g.Pa(g,this.zg),C=[0,0,0,0];for((s=[0,0,0,0,0,0,0,0])[0]=0,C[0]=b,s[1]=0,C[1]=x,s[2]=1,C[2]=T,s[3]=1,C[3]=M,b=1;4>b;b++){for(x=C[b],T=s[b],M=b-1;0<=M&&C[M]>x;)C[M+1]=C[M],s[M+1]=s[M],M--;C[M+1]=x,s[M+1]=T}return C=0,s[0]!=0&&(C|=1),s[1]!=0&&(C|=2),s[2]!=0&&(C|=4),s[3]!=0&&(C|=8),(C==5||C==10)&&(h==l?h?(this.g.Bc(g,a),this.g.Cc(a,g),this.g.Bc(u,f),this.g.Cc(f,u)):(this.g.Cc(g,a),this.g.Bc(a,g),this.g.Cc(u,f),this.g.Bc(f,u)):h?(this.g.Cc(a,p),this.g.Bc(p,a),this.g.Cc(f,u),this.g.Bc(u,f)):(this.g.Bc(a,p),this.g.Cc(p,a),this.g.Bc(f,u),this.g.Cc(u,f)),!0)},S.prototype.tD=function(h,l,s,a,u,p){this.MY?this.VM():this.UM(h,l,s,a,u,p)},S.prototype.VM=function(){throw d.i.fa("not implemented.")},S.prototype.UM=function(h,l,s,a,u,p){if(h!=l)h?(this.g.Bc(s,u),this.g.Cc(u,s),this.g.Bc(p,a),this.g.Cc(a,p),this.vn(u,s),this.ui(u,!0),this.g.mi(u,!0),this.bk(s),this.vn(p,a),this.ui(p,!0),this.g.mi(p,!1)):(this.g.Bc(u,s),this.g.Cc(s,u),this.g.Bc(a,p),this.g.Cc(p,a),this.vn(u,s),this.ui(u,!0),this.g.mi(u,!1),this.bk(s),this.vn(p,a),this.ui(p,!0),this.g.mi(p,!0)),this.bk(a);else{var f=h?s:a,g=l?u:p;for(h=h?a:s,l=l?p:u,u=!1,this.g.Bc(f,g),this.g.Bc(g,f),this.g.Cc(h,l),this.g.Cc(l,h),p=l;p!=g;)s=this.g.Ma(p),a=this.g.U(p),this.g.Cc(p,a),this.g.Bc(p,s),u=u||p==f,p=a;u||(s=this.g.Ma(g),a=this.g.U(g),this.g.Cc(g,a),this.g.Bc(g,s)),this.vn(g,f),this.ui(g,!0),this.g.mi(g,!1),this.bk(f),this.vn(l,h),this.ui(l,!0),this.g.mi(l,!1),this.bk(h)}},S.prototype.cD=function(){for(var h=!1,l=this.g.Ob(this.X);l!=-1;){for(var s=this.g.Xa(l),a=0,u=this.g.Ja(l);a<u&&1<u;){var p=this.g.Ma(s),f=this.g.U(s);this.g.fq(p,f)?(h=!0,this.ui(s,!1),this.g.pd(s,!0),this.ui(f,!1),this.g.pd(f,!0),s=p,a=0,u=this.g.Ja(l)):(s=f,a++)}if(2>this.g.Ja(l)){for(h=this.g.Xa(l),a=0,u=this.g.Ja(l);a<u;a++)this.ui(h,!1),h=this.g.U(h);l=this.g.Zq(l),h=!0}else l=this.g.Rb(l)}return h},S.prototype.sp=function(h){for(var l=!1;;){var s=this.g.U(h),a=this.g.Ma(h);if(s==h)return this.ui(h,!0),this.g.mi(h,!1),!0;if(!this.g.fq(s,a)||(l=!0,this.bk(a),this.bk(s),this.ui(h,!0),this.g.mi(h,!1),this.vn(s,a),this.ui(s,!0),this.g.mi(s,!0),s==a))break;h=a}return l},S.prototype.GM=function(){for(var h=0,l=this.oe.rc(this.oe.je);l!=-1;l=this.oe.lb(l)){var s=this.oe.getData(l);this.g.aj(s,-1)}for(var a=0,u=this.g.Ob(this.X);u!=-1;)if((l=this.g.Xa(u))==-1||this.g.bd(l)!=-1)s=u,u=this.g.Rb(u),this.g.$q(s);else{this.g.aj(l,u);var p=1;for(s=this.g.U(l);s!=l;s=this.g.U(s))this.g.aj(s,u),p++;this.g.cp(u,!1),this.g.Vj(u,p),this.g.Wg(u,this.g.Ma(l)),a+=p,h++,u=this.g.Rb(u)}for(l=this.oe.rc(this.oe.je);l!=-1;l=this.oe.lb(l))s=this.oe.getData(l),this.g.bd(s)==-1&&(u=this.g.nG(this.X,s,s,null),a+=this.g.Ja(u),h++);for(this.g.Rl(this.X,h),this.g.Tj(this.X,a),h=0,a=this.g.ld;a!=-1;a=this.g.ue(a))h+=this.g.I(a);this.g.bC(h)},S.prototype.cm=function(h){for(var l=0,s=this.xe.size-1;l<s;l++)if(h=(h+1)%this.xe.size,this.xe.get(h)!=-1)return h;return-1},S.prototype.vn=function(h,l){var s=this.g.Pa(l,this.Pq),a=this.g.Pa(l,this.zg);this.g.lC(h,l),this.g.Ra(l,this.Pq,s),this.g.Ra(l,this.zg,a)},S.prototype.bk=function(h){var l=this.g.Pa(h,this.zg);l!=-1&&(this.xe.set(l,-1),this.g.Ra(h,this.zg,-1))},S.V=function(h,l,s,a,u){var p=new S;return p.g=h,p.X=l,p.xA=s,p.fw=a,p.nd=u,p.XM()},S.prototype.pM=function(h,l){var s=this.Wh.get(h),a=new d.h;this.g.Gc(s,a),s=new d.h;var u=this.Wh.get(l);return this.g.Gc(u,s),a.qb(s)?0:(u=this.zs.get(h),h=new d.h,this.g.Gc(u,h),u=this.zs.get(l),l=new d.h,this.g.Gc(u,l),(u=new d.h).uc(a,h),(a=new d.h).uc(s,l),d.h.nu(u,a))},S}();d.rn=L}(Y||(Y={})),function(d){var L;(L=d.$L||(d.$L={}))[L.Local=0]="Local",L[L.Geographic=1]="Geographic",L[L.Projected=2]="Projected",L[L.Image=3]="Image",L[L.Unknown=4]="Unknown",function(h){h[h.Integer32=0]="Integer32",h[h.Integer64=1]="Integer64",h[h.FloatingPoint=2]="FloatingPoint"}(d.TL||(d.TL={}));var S=function(){function h(){this.mA=null,this.pp="",this.su=null,this.dg=0,this.ZH=this.Ho=-1,this.wh=null}return h.prototype.Ec=function(){return this.dg},h.prototype.VF=function(){return 1},h.prototype.VW=function(l){this.mA=l},h.prototype.Xd=function(){if(this.mA!==null)return this.mA;var l=.001;return this.dg!=0?l=d.wr.CQ(this.dg):this.wh!=null&&(l=d.XC.DQ(this.wh)),l},h.prototype.Bz=function(){return this.wh},h.prototype.Hd=function(){return this.dg!=0?d.Tc.Zg(d.wr.Sy(this.dg)):this.wh!=null?d.XC.EQ(this.wh):void 0},h.Sb=function(l){if(l.dg!=0){if(d.wr.ZS(l.dg)===!0)return 1;if(d.wr.aT(l.dg)===!0)return 2}return 4},h.prototype.$r=function(){var l=this.Ec();return this.Ho!=-1?this.Ho:(this.Ho=d.wr.FK(l),this.Ho!=-1?this.Ho:l)},h.create=function(l){if(0>=l)throw d.i.N("Invalid or unsupported wkid: "+l);var s=new h;return s.dg=l,s},h.qP=function(l){if(l==null||l.length==0)throw d.i.N("Cannot create SpatialReference from null or empty text.");var s=new h;return s.wh=l,s},h.prototype.Nb=function(l){return this==l||l!=null&&this.constructor==l.constructor&&this.dg==l.dg&&(this.dg!=0||this.wh===l.wh)},h.prototype.toString=function(){return"[ tol: "+this.Kn()+"; wkid: "+this.Ec()+"; wkt: "+this.Bz()+"]"},h.prototype.cc=function(){if(this.pp!=="")return this.pp;var l=this.toString();if(Array.prototype.reduce)return this.pp="S"+l.split("").reduce(function(u,p){return 0|(u=(u<<5)-u+p.charCodeAt(0))},0);var s=0;if(l.length===0)return"";for(var a=0;a<l.length;a++)s=(s<<5)-s+l.charCodeAt(a),s&=s;return this.pp="S"+s},h.prototype.Kn=function(){return this.Xd(0)},h.prototype.fh=function(){return this.su!==null?this.su:this.su=d.gu.yP(this)},h.ZN=2147483645,h.$N=9007199254740990,h}();d.Eg=S}(Y||(Y={})),function(d){var L=function(S){function h(){var l=S!==null&&S.apply(this,arguments)||this;return l.Ji=null,l.ST=null,l.Hq=new d.ZL,l.Eo=null,l.jw=null,l}return Bt(h,S),h.yP=function(l){var s=new h;if(s.dg=l.dg,s.Ho=l.Ho,s.ZH=l.ZH,s.wh=l.wh,s.wh!==""&&s.wh!==null){l=h.kM(s.wh);var a=h.iM(s.wh);s.Hq.Xx(l,a,d.hu.Integer64),s.by(l),s.gy(a),s.dg=l.$r()}else l=h.jM(s.dg),s.by(l),s.gy(null),s.Hq.Xx(l,null,d.hu.Integer64);return s},h.prototype.Xd=function(l){return this.Hq.Kn(l)},h.iM=function(l){if(0>=l.length)throw d.i.N();var s=null;try{s=d.NC.fromString(l)}catch{s=null}return s==null?null:h.bD(s,!0)},h.prototype.by=function(l){this.Kd=l,this.Eo=this.Kd.Hd()},h.prototype.gy=function(l){this.KH=l,this.ST=this.KH!=null?this.KH.Eo:null},h.prototype.Wc=function(){return this.Sb()!=0&&this.Sb()!=3&&this.Kd.Wc()},h.prototype.IG=function(){return this.Sb()!=0&&(this.Sb()==3?this.Ji.fk().Wc():this.Kd.Wc())},h.prototype.eh=function(){return this.Kd!=null?this.Kd.Ue:null},h.prototype.pm=function(){return this.Kd.pm()},h.prototype.bf=function(){return this.Kd.bf()},h.prototype.hh=function(){return this.Kd!=null?this.Kd.sw:NaN},h.prototype.Up=function(){return this.Kd.Up()},h.prototype.Wr=function(){return this.Kd.Wr()},h.prototype.kk=function(){return this.Kd.kk()},h.prototype.kS=function(l){return d.OC.Py(this.Kd,l.Kd)},h.prototype.ml=function(){return this.Kd.ml()},h.prototype.Vr=function(){return this.Kd.Vr()},h.prototype.zi=function(){return this.Sb()==3?this.Ji.fk().zi():this.Kd.zi()},h.prototype.gh=function(){if(!this.Wc())throw d.i.N("!isPannable()");var l=new d.l;return this.Kd.gh(l),l},h.prototype.Oe=function(){if(!this.Wc())throw d.i.N("!isPannable()");return this.Kd.so},h.prototype.HR=function(){if(!this.Wc())throw d.i.N("!isPannable()");var l=new d.l;return this.Kd.GR(l),l},h.prototype.pv=function(){if(!this.Wc())throw d.i.N("!isPannable()");return this.Kd.pv()},h.prototype.ov=function(){if(!this.Wc())throw d.i.N("!isPannable()");return this.Kd.ov()},h.prototype.Xr=function(){return this.Ji!=null?this.Ji.fk().Xr():this.Kd.Xr()},h.prototype.PQ=function(){return this.Kd.hv()},h.prototype.Qp=function(){return this.Eo.getUnitFactor()},h.prototype.vz=function(l){return this.Hq.vz(l)},h.prototype.sc=function(){var l=this.Sb();if(l==1)return this;if(l==3)return this.Ji.fk().sc();if(l==0||l===4)throw d.i.fa("invalid call");if(this.jw!==null)return this.jw;if((l=this.eh().getGeogcs())==null)throw d.i.Qa();return this.jw=h.bF(l,this.Hq.VF())},h.bF=function(l,s){if(l==null)throw d.i.N("null pointer.");var a=new h;return l=h.mu(l,!0),a.Hq.Xx(l,null,s),a.by(l),a.gy(null),a.dg=l.$r(),a},h.prototype.Sb=function(){var l=this.eh();if(l!=null)switch(l.getType()){case d.Sc.PE_TYPE_GEOGCS:return 1;case d.Sc.PE_TYPE_PROJCS:return 2}return 4},h.prototype.hv=function(){return this.Kd.hv()},h.mu=function(l,s){var a=l.getCode();if(0>=a&&0<(a=d.pf.getCode(l))){if((l=d.pf.coordsys(a))==null)throw d.i.N("Text to wkid mapping had failed: "+a);return h.mu(l,s)}if(s&&0<a&&(s=h.qx[a]))return s;s=d.zb.xv(l,a,!1);var u=h.lK[s];return u||(l=0>=a?l:d.pf.coordsys(a),l=new d.OC(l),h.lK[s]=l,0<a&&(h.qx[a]=l),l)},h.jM=function(l){if(0>=l)throw d.i.N("Invalid or unsupported wkid: "+l);var s=h.qx[l];if(s!=null)return s;if((s=d.pf.coordsys(l))==null)throw d.i.N("Invalid or unsupported wkid: "+l);return(s=h.mu(s,!1)).$r()!=l&&(h.qx[l]=s),s},h.kM=function(l){if(l==null||l===void 0||l.length==0)throw d.i.N("Cannot create SpatialReference from null or empty text.");var s=null;try{s=d.pf.fromString(d.Sc.PE_TYPE_COORDSYS,l)}catch(a){throw d.i.N("Cannot create SpatialReference from text. "+a.message)}if(s===null)throw d.i.N("Cannot create SpatialReference from text. ");return h.mu(s,!0)},h.bD=function(l,s){var a,u=l.getCode();if(0>=u&&0<(u=d.pf.getCode(l))){if((u=d.pf.vertcs(u))===null)throw d.i.N();return h.bD(u,s)}if(s&&0<u&&(s=h.kK[u])||(l=d.zb.xv(l,u,!1),s=h.mK[l]))return s;if(0>=u||(a=d.pf.vertcs(u)),a===null)throw d.i.N();return a=new d.PL(a),h.mK[l]=a,0<u&&(h.kK[u]=a),a},h.sI=function(l,s){if(s===null||s.B())return null;var a=new d.l;if(s!==null&&l.Sb()!=1){var u=l.sc(),p=u.eh();l=d.vr.Nr(l,u,null,null),(s=d.Hx.local().V(s,l,null)).A(a)}else p=l.eh(),s.A(a);return s=p.getPrimem().getLongitude(),p=p.getUnit().getUnitFactor(),new d.LC(a.v,a.G,a.C,a.H,s,p)},h.lD=function(l){var s={name:"",steps:[],_pt:null,_entry:null},a=0;for(l=l.getEntries();a<l.length;a++){var u=l[a],p={LY:!1,ZY:"",YY:-1,geogtran:null};u.getDirection()===0?p.isInverse=!1:p.isInverse=!0;var f=u.getGeogtran().getCode();-1<f?p.wkid=f:p.wkt=u.getGeogtran().toString(),s.steps.push(p)}return s},h.XR=function(l,s,a,u){return a===void 0&&(a=null),a=h.sI(u,a),l=d.lp.getGTlist(l.eh(),s.eh(),2,d.lp.PE_GTLIST_OPTS_COMMON,a,1),s=null,l&&0<l.length&&(s=this.lD(l[0]),d.Mx.destroy(l)),a!==null&&a.destroy(),s},h.YR=function(l,s,a,u){var p;if(a===void 0&&(a=null),u===void 0&&(u=null),p===void 0&&(p=30),a=h.sI(u,a),l=d.lp.getGTlist(l.eh(),s.eh(),2,d.lp.PE_GTLIST_OPTS_COMMON,a,p),s=[],l&&0<l.length){for(p=0;p<l.length;p++)s.push(this.lD(l[p]));d.Mx.destroy(l)}return a!==null&&a.destroy(),s},h.qx={},h.lK={},h.kK={},h.mK={},h}(d.Eg);d.gu=L}(Y||(Y={})),function(d){var L,S;(S=L=d.hu||(d.hu={}))[S.Integer32=0]="Integer32",S[S.Integer64=1]="Integer64",S[S.FloatingPoint=2]="FloatingPoint";var h=function(){function l(){this.qp()}return l.prototype.assign=function(s){this.Fm=s.Fm,this.Gm=s.Gm,this.Pj=s.Pj,this.sA=s.sA,this.Fo=s.Fo,this.rA=s.rA,this.Ik=s.Ik,this.Mq=s.Mq,this.Lq=s.Lq,this.Rm=s.Rm},l.prototype.VF=function(){return this.Rm},l.prototype.qp=function(){this.Gm=this.Fm=0,this.Pj=1,this.sA=0,this.Fo=1,this.rA=0,this.Lq=this.Mq=this.Ik=2220446049250313e-29,this.Rm=L.FloatingPoint},l.prototype.Xx=function(s,a,u){if(this.qp(),this.Rm=u,u!=L.FloatingPoint){var p=new d.l;s.hR(p),this.Fm=p.v,this.Gm=p.G}else this.Gm=this.Fm=-17976931348623157e292;(p=s.Ue.getType())==d.Sc.PE_TYPE_GEOGCS?(p=(u==L.Integer64?1e-9:1/18e5)*s.bf(),this.Pj=1/p):p==d.Sc.PE_TYPE_PROJCS&&(p=(u==L.Integer64?1e-4:.001)*s.pm(),this.Pj=1/p),a!=null?(p=(u==L.Integer32?.001:1e-4)*a.IH,this.Fo=1/p):this.Fo=1e4,this.YM(),this.Ik=s.sw,this.Mq=a!=null?.001*a.IH:.001,this.Lq=2220446049250313e-29},l.prototype.YM=function(){if(this.Rm!=L.FloatingPoint){var s=this.Rm==L.Integer64?d.Eg.$N:d.Eg.ZN,a=s/this.Pj,u=this.Fm+a,p=d.O.truncate((u-this.Fm)*this.Pj);p>s&&(this.Pj=s/(u-this.Fm)),a=this.Gm+a,(p=d.O.truncate((a-this.Gm)*this.Pj))>s&&(this.Pj=s/(a-this.Gm))}},l.prototype.aC=function(s){switch(s){case 0:this.Ik=void 0;case 1:this.Mq=void 0;case 2:this.Lq=void 0}},l.prototype.Kn=function(s){switch(s){case 0:return this.Ik;case 1:return this.Mq;case 2:return this.Lq}return 0},l.prototype.vz=function(s){if(this.Rm==L.FloatingPoint)return 0;switch(s){case 0:return 1/this.Pj;case 1:case 2:return 1/this.Fo;default:return 0}},l.prototype.toString=function(){var s="SRPD [m_toleranceXY: "+this.Ik.toString();return(s=(s=(s=(s=(s=(s=(s=(s=(s=s+";m_falseX: "+this.Fm.toString())+";m_falseY: "+this.Gm.toString())+";m_unitsXY: "+this.Pj.toString())+";m_falseZ: "+this.sA.toString())+";m_unitsZ: "+this.Fo.toString())+";m_falseM: "+this.rA.toString())+";m_toleranceZ: "+this.Mq.toString())+";m_toleranceM: "+this.Lq.toString())+";m_precision: "+this.Rm.toString())+"] "},l}();d.ZL=h}(Y||(Y={})),function(d){function L(u,p){return 89.99999<p?p=89.99999:-89.99999>p&&(p=-89.99999),p*=.017453292519943,[111319.49079327169*u,31890685e-1*Math.log((1+Math.sin(p))/(1-Math.sin(p)))]}function S(u,p,f){return u=u/6378137*57.29577951308232,f?[u,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*p/6378137)))]:[u-360*Math.floor((u+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*p/6378137)))]}function h(u,p,f){var g=u.Of();if(u.getType()===33)p=p(g.Lg(),g.ih()),g.Cb(p[0],p[1]);else if(u.getType()===197){var b=p(u.es(),u.gs(),f);p=p(u.ds(),u.fs(),f),g.K(b[0],b[1],p[0],p[1])}else for(b=new d.h,u=0;u<g.I();u++){g.D(u,b);var x=p(b.x,b.y,f);b.ma(x[0],x[1]),g.Cb(u,b)}return g}function l(u){return h(u,S,!0)}function s(u){return h(u,L,!0)}var a=Math.PI/180;d.UK=function(){function u(){}return u.vu=function(p){var f=Math.sqrt(.006694379990197414),g=Math.sin(p.y*a);return d.h.construct(6378137*p.x*a,3.1677196636462314e6*(g/(1-.006694379990197414*g*g)-1/(2*f)*Math.log((1-f*g)/(1+f*g))))},u.Vx=function(p,f,g,b){var x=.0033528106647474805,T=Math.sin(g);g=Math.cos(g);var M=(1-x)*Math.tan(p),C=M*(p=1/Math.sqrt(1+M*M)),O=Math.atan2(M,g),F=(M=p*T)*M,P=1-F,G=27233160610754688e-5*P/4040829998466145e-2,q=1+G/16384*(4096+G*(G*(320-175*G)-768)),V=G/1024*(256+G*(G*(74-47*G)-128));G=b/(635675231424518e-8*q);for(var Z,X,te,oe=2*Math.PI;1e-12<Math.abs(G-oe);)te=Math.cos(2*O+G),oe=G,G=b/(635675231424518e-8*q)+V*(Z=Math.sin(G))*(te+V/4*((X=Math.cos(G))*(2*te*te-1)-V/6*te*(4*Z*Z-3)*(4*te*te-3)));return b=C*Z-p*X*g,P=x/16*P*(4+x*(4-3*P)),d.h.construct((f+(Math.atan2(Z*T,p*X-C*Z*g)-(1-P)*x*M*(G+P*Z*(te+P*X*(2*te*te-1)))))/a,Math.atan2(C*X+p*Z*g,(1-x)*Math.sqrt(F+b*b))/a)},u.MM=function(p,f,g,b){var x=.0033528106647474805,T=b-f,M=Math.atan((1-x)*Math.tan(p)),C=Math.atan((1-x)*Math.tan(g)),O=Math.sin(M);M=Math.cos(M);var F=Math.sin(C);C=Math.cos(C);var P=T,G=1e3;do{var q=Math.sin(P),V=Math.cos(P),Z=Math.sqrt(C*q*C*q+(M*F-O*C*V)*(M*F-O*C*V));if(Z===0)return 0;V=O*F+M*C*V;var X=Math.atan2(Z,V),te=M*C*q/Z,oe=1-te*te;q=V-2*O*F/oe,isNaN(q)&&(q=0);var me=x/16*oe*(4+x*(4-3*oe)),Se=P;P=T+(1-me)*x*te*(X+me*Z*(q+me*V*(2*q*q-1)))}while(1e-12<Math.abs(P-Se)&&0<--G);return G===0?(O=b-f,{azimuth:Math.atan2(Math.sin(O)*Math.cos(g),Math.cos(p)*Math.sin(g)-Math.sin(p)*Math.cos(g)*Math.cos(O)),geodesicDistance:6371008771415059e-9*Math.acos(Math.sin(p)*Math.sin(g)+Math.cos(p)*Math.cos(g)*Math.cos(b-f))}):(f=(p=27233160610754688e-5*oe/4040829998466145e-2)/1024*(256+p*(p*(74-47*p)-128)),{azimuth:Math.atan2(C*Math.sin(P),M*F-O*C*Math.cos(P)),YQ:635675231424518e-8*(1+p/16384*(4096+p*(p*(320-175*p)-768)))*(X-f*Z*(q+f/4*(V*(2*q*q-1)-f/6*q*(4*Z*Z-3)*(4*q*q-3)))),XY:Math.atan2(M*Math.sin(P),M*F*Math.cos(P)-O*C)})},u.jQ=function(p){var f=p.hasAttribute(1),g=p.hasAttribute(2),b=[],x=p.da(),T=null,M=null;f&&(T=p.ub(1)),g&&(M=p.ub(2));for(var C=new d.h,O=0;O<x;O++){for(var F=p.Ba(O),P=p.Ja(O),G=0,q=0,V=NaN,Z=NaN,X=NaN,te=NaN,oe=p.dc(O),me=[],Se=F;Se<F+P;Se++){p.D(Se,C),te=X=NaN;var Ce=[C.x,C.y];f&&(X=T.get(Se),Ce.push(X)),g&&(x=M.get(Se),Ce.push(te)),Se==F&&oe&&(G=C.x,q=C.y,V=X,Z=te),me.push(Ce)}!oe||G==C.x&&q==C.y&&(!f||isNaN(V)&&isNaN(X)||V==X)&&(!g||isNaN(Z)&&isNaN(te)||Z==te)||me.push(me[0].slice(0)),b.push(me)}return b},u.Wy=function(p,f){p=u.jQ(p),637.100877141506>f&&(f=637.100877141506);for(var g,b=[],x=0;x<p.length;x++){var T,M,C=p[x];b.push(g=[]),g.push([C[0][0],C[0][1]]);var O=C[0][0]*a,F=C[0][1]*a;for(T=0;T<C.length-1;T++){var P=C[T+1][0]*a,G=C[T+1][1]*a;if(O!==P||F!==G){P=(G=u.MM(F,O,G,P)).azimuth;var q=(G=G.YQ)/f;if(1<q){for(M=1;M<=q-1;M++){var V=u.Vx(F,O,P,M*f);g.push([V.x,V.y])}M=u.Vx(F,O,P,(G+Math.floor(q-1)*f)/2),g.push([M.x,M.y])}F=u.Vx(F,O,P,G),g.push([F.x,F.y]),O=F.x*a,F=F.y*a}}}return{qJ:b}},u.XQ=function(p){for(var f=[],g=0;g<p.length;g++){var b=p[g];b=u.Wy(b,1e4),f.push(b)}p=[];for(var x=0;x<f.length;x++){b=f[x];var T=0;for(g=0;g<b.qJ.length;g++){var M,C=b.qJ[g],O=u.vu(d.h.construct(C[0][0],C[0][1])),F=u.vu(d.h.construct(C[C.length-1][0],C[C.length-1][1])),P=F.x*O.y-O.x*F.y;for(M=0;M<C.length-1;M++)O=u.vu(d.h.construct(C[M+1][0],C[M+1][1])),P+=(F=u.vu(d.h.construct(C[M][0],C[M][1]))).x*O.y-O.x*F.y;T+=P}T/=1,p.push(T/-2)}return p},u}(),d.cb=function(){function u(){}return u.xB=function(p,f,g,b,x,T,M){u.gD[p.cc()]=f,isNaN(g)==0&&(u.mD[p.cc()]=g),isNaN(b)==0&&(u.zD[p.cc()]=b),isNaN(x)==0&&(u.aD[p.cc()]=x),u.nD[p.cc()]=T,M!==null&&(u.oD[p.cc()]=M)},u.Ww=function(p,f,g){u.sD[p.cc()+"-"+f.cc()]=g},u.sc=function(p){if((p=u.gD[p.cc()])==null)throw d.i.Ie();return p},u.bf=function(p){if((p=u.mD[p.cc()])==null)throw d.i.Ie();return p},u.vv=function(p){if((p=u.zD[p.cc()])==null)throw d.i.Ie();return p},u.ev=function(p){if((p=u.aD[p.cc()])==null)throw d.i.Ie();return p},u.gh=function(p){if((p=u.oD[p.cc()])==null)throw d.i.Ie();return d.l.construct(p[0],p[1],p[2],p[3])},u.Wc=function(p){if((p=u.nD[p.cc()])==null)throw d.i.Ie();return p},u.zh=function(p,f,g){if(f.Nb(g))return p;var b=u.sD[f.cc()+"-"+g.cc()];if(b!==void 0)return b(p,f,g);throw d.i.Ie()},u.vt=function(){throw d.i.Ie()},u.bR=function(){throw d.i.Ie()},u.dW=function(){throw d.i.Ie()},u.ml=function(){throw d.i.Ie()},u.sW=function(){var p=d.Eg.create(102100),f=d.Eg.create(3857),g=d.Eg.create(4326);d.cb.xB(p,g,NaN,NaN,NaN,!1,null),d.cb.xB(g,g,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),d.cb.xB(f,g,NaN,NaN,NaN,!1,null),d.cb.Ww(p,g,l),d.cb.Ww(g,p,s),d.cb.Ww(f,g,l),d.cb.Ww(g,f,s)},u.gD=[],u.mD=[],u.zD=[],u.aD=[],u.nD=[],u.oD=[],u.sD=[],u}()}(Y||(Y={})),Y.cb.sW(),function(d){var L=function(){function S(h){this.o=new Int32Array(0),this.io=-1,this.Hg=this.size=this.Bl=0,this.stride=h}return S.prototype.jd=function(h){h<this.Bl?(this.o[h*this.stride]=this.io,this.io=h):this.Bl--,this.size--},S.prototype.T=function(h,l){return this.o[h*this.stride+l]},S.prototype.S=function(h,l,s){this.o[h*this.stride+l]=s},S.prototype.Ce=function(){var h=this.io;if(h==-1){if(this.Bl==this.Hg){if(2147483647<(h=this.Hg!=0?d.O.truncate(3*(this.Hg+1)/2):1)&&(h=2147483647),h==this.Hg)throw d.i.ce();this.Dz(h)}h=this.Bl,this.Bl++}else this.io=this.o[h*this.stride];this.size++;for(var l=h*this.stride;l<h*this.stride+this.stride;l++)this.o[l]=-1;return h},S.prototype.Ll=function(h){var l=this.io;if(l==-1){if(this.Bl==this.Hg){if(2147483647<(l=this.Hg!=0?d.O.truncate(3*(this.Hg+1)/2):1)&&(l=2147483647),l==this.Hg)throw d.i.ce();this.Dz(l)}l=this.Bl,this.Bl++}else this.io=this.o[l*this.stride];this.size++;for(var s=l*this.stride,a=0;a<h.length;a++)this.o[s+a]=h[a];return l},S.prototype.mj=function(h){this.io=-1,this.size=this.Bl=0,h&&(this.o=null,this.Hg=0)},S.prototype.De=function(h){h>this.Hg&&this.Dz(h)},S.prototype.tx=function(h,l){h*=this.stride,l*=this.stride;for(var s=0;s<this.stride;s++){var a=this.o[l+s];this.o[l+s]=this.o[h+s],this.o[h+s]=a}},S.prototype.gC=function(h,l,s){var a=this.o[this.stride*l+s];this.o[this.stride*l+s]=this.o[this.stride*h+s],this.o[this.stride*h+s]=a},S.LG=function(h){return 0<=h},S.prototype.Dz=function(h){this.o==null&&(this.o=new Int32Array(0));var l=new Int32Array(this.stride*h);l.set(this.o,0),this.o=l,this.Hg=h},S}();d.$c=L}(Y||(Y={})),function(d){var L,S;(S=L||(L={}))[S.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",S[S.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",S[S.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",S[S.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var h=function(){function s(a){this.Be=a,this.yh=NaN,this.eH=new d.ig,this.fH=new d.ig,this.ms=new d.Nc,this.ns=new d.Nc}return s.prototype.compare=function(a,u,p){if(a=a.ja(p),this.Be.pB(u,this.eH),this.Be.pB(a,this.fH),u=this.eH.get(),a=this.fH.get(),this.ms.K(u.sa,u.pa),this.ns.K(a.sa,a.pa),this.ms.va<this.ns.oa)return-1;if(this.ms.oa>this.ns.va)return 1;p=u.na==u.la;var f=a.na==a.la;if(p||f){if(p&&f)return 0;if(u.na==a.na&&u.sa==a.sa)return p?1:-1;if(u.la==a.la&&u.pa==a.pa)return p?-1:1}return(p=u.Pe(this.yh,this.ms.oa))==(f=a.Pe(this.yh,this.ns.oa))&&((f=.5*((p=Math.min(u.la,a.la))+this.yh))==this.yh&&(f=p),p=u.Pe(f,this.ms.oa),f=a.Pe(f,this.ns.oa)),p<f?-1:p>f?1:0},s.prototype.aK=function(a){this.yh=a},s}(),l=function(){function s(a){this.ib=a,this.WH=new d.ig,this.Bf=new d.h,this.wA=new d.Nc}return s.prototype.kX=function(a){this.Bf.L(a)},s.prototype.compare=function(a,u){return this.ib.pB(a.ja(u),this.WH),a=this.WH.get(),this.wA.K(a.sa,a.pa),this.Bf.x<this.wA.oa?-1:this.Bf.x>this.wA.va?1:(a=a.Pe(this.Bf.y,this.Bf.x),this.Bf.x<a?-1:this.Bf.x>a?1:0)},s}();L=function(){function s(){this.hH=this.Di=this.Gi=this.kA=this.Yn=this.ye=this.Kc=this.jh=this.ge=null,this.Go=this.xg=-1,this.gH=!0,this.pA=!1,this.lA=NaN,this.Ni=new d.Md,this.bO=2147483647,this.aO=d.O.truncate(-2147483648),this.cg=this.ae=this.Hl=this.Cq=this.Cm=this.Bq=this.Os=this.Re=-1,this.wa=0}return s.prototype.yy=function(a){this.lA=a},s.prototype.Ym=function(){this.ge==null&&(this.ge=new d.$c(8));var a=this.ge.Ce();return this.ge.S(a,1,0),a},s.prototype.vU=function(){this.Kc==null&&(this.Kc=new d.$c(8));var a=this.Kc.Ce();this.Kc.S(a,2,0),this.Kc.S(a,3,0);var u=this.Kc.Ce();return this.Kc.S(u,2,0),this.Kc.S(u,3,0),this.JJ(a,u),this.JJ(u,a),a},s.prototype.mI=function(){this.ye==null&&(this.ye=new d.$c(8));var a=this.ye.Ce();return this.ye.S(a,2,0),a},s.prototype.TW=function(a,u){this.ge.S(a,7,u)},s.prototype.mn=function(a,u){this.ge.S(a,2,u)},s.prototype.SW=function(a,u){this.ge.S(a,1,u)},s.prototype.lX=function(a,u){this.ge.S(a,3,u)},s.prototype.iX=function(a,u){this.ge.S(a,4,u)},s.prototype.cr=function(a,u){this.ge.S(a,5,u)},s.prototype.eR=function(a){return this.ge.T(a,5)},s.prototype.RW=function(a,u){this.ge.S(a,6,u)},s.prototype.cN=function(a,u){this.RW(u,a)},s.prototype.IJ=function(a,u){this.Kc.S(a,1,u)},s.prototype.JJ=function(a,u){this.Kc.S(a,4,u)},s.prototype.Tl=function(a,u){this.Kc.S(a,5,u)},s.prototype.Sl=function(a,u){this.Kc.S(a,6,u)},s.prototype.$W=function(a,u){this.Kc.S(a,2,u)},s.prototype.$w=function(a,u){this.Kc.S(a,3,u)},s.prototype.LF=function(a){return this.Kc.T(a,3)},s.prototype.Gt=function(a,u){this.Kc.S(a,7,u)},s.prototype.EK=function(a,u){if(this.mm(a)!=-1)for(u=u?-1:a,a=this.mm(a);a!=-1;a=this.js(a))this.g.Ra(this.tj(a),this.Cq,u)},s.prototype.yx=function(a,u){a!=-1&&(this.EK(a,u),this.EK(this.xa(a),u))},s.prototype.Dt=function(a,u){this.ye.S(a,1,u)},s.prototype.Vg=function(a,u){this.ye.S(a,2,u)},s.prototype.jn=function(a,u){this.ye.S(a,3,u),this.NW(a,this.dR(u)),this.MW(u,a)},s.prototype.MW=function(a,u){this.ye.S(a,4,u)},s.prototype.NW=function(a,u){this.ye.S(a,5,u)},s.prototype.DJ=function(a,u){this.ye.S(a,6,u)},s.prototype.BJ=function(a,u){this.ye.S(a,7,u)},s.prototype.AJ=function(a,u){this.Yn.write(a,u)},s.prototype.CJ=function(a,u){this.kA.write(a,u)},s.prototype.kY=function(a){var u=0,p=0,f=this.AF(a),g=new d.h,b=new d.h,x=new d.h;this.Yr(f,g),b.L(g);var T=f;do this.lm(T,x),p+=d.h.tb(b,x),this.$e(this.xa(T))!=a&&(u+=(x.x-g.x-(b.x-g.x))*(x.y-g.y+(b.y-g.y))*.5),b.L(x),T=this.jc(T);while(T!=f);this.Yn.write(a,u),this.kA.write(a,p)},s.prototype.PU=function(a,u){var p=new h(this),f=new d.Yj;f.De(d.O.truncate(this.wa/2)),f.Vo(p);for(var g=new d.ia(0),b=this.$g(),x=null,T=0,M=new d.h,C=this.Re;C!=-1;C=this.Rf(C)){if(!(255&++T||u==null||u.progress(-1,-1)))throw d.i.WC();var O=this.Me(C);if(O!=-1){if(g.Bh(0),!this.gY(f,b,g,O)){this.D(C,M),p.aK(M.y);var F=O;do{var P=this.Ab(F,b);P!=-1&&(f.vd(P,-1),this.Kb(F,b,-2)),F=this.jc(this.xa(F))}while(O!=F);F=O;do(P=this.Ab(F,b))==-1&&(P=f.addElement(F,-1),g.add(P)),F=this.jc(this.xa(F));while(O!=F)}for(O=g.size-1;0<=O;O--)P=g.get(O),F=f.ja(P),this.Kb(this.xa(F),b,P),this.OU(f,P,a)}else this.cz(C)==-1&&(x==null&&(x=new l(this)),this.D(C,M),x.kX(M),F=f.IW(x),O=this.Hl,F!=-1&&(P=f.ja(F),this.$e(P)==this.$e(this.xa(P))&&(P=this.OF(f,F)),P!=-1&&(O=this.$e(P))),this.cN(O,C))}this.Jg(b)},s.prototype.OU=function(a,u,p){var f=a.ja(u),g=this.$e(f);if(this.Gn(g)==-1){var b=this.OF(a,u),x=this.xa(f),T=this.$e(x);this.Kp(g),this.Kp(T);var M=this.Gn(g),C=this.Gn(T);if(b==-1&&M==-1&&(T==g?(this.jn(T,this.Hl),M=C=this.Hl):(C==-1&&(this.jn(T,this.Hl),C=this.Hl),this.jn(g,T),M=T)),b!=-1){var O=this.$e(b);C==-1&&(0>=this.Kp(O)?(C=this.Gn(O),this.jn(T,C)):(this.jn(T,O),C=O),T==g&&(M=C))}M==-1&&this.hY(g,T),p==0?this.jW(a,u,f,b,g,T):p==5?this.kW(a,u,f,x,g,T):p==4&&this.iW(f,b,g,T)}},s.prototype.jW=function(a,u,p,f,g,b){var x=this.hk(g);if(f!=-1){var T=this.hk(b),M=this.hk(this.$e(f));f=x&T&M,M^=M&this.dh(p),(M|=f)!=0&&(this.Vg(b,T|M),this.Vg(g,M|x),x=x||M)}for(u=a.lb(u);u!=-1&&(f=a.ja(u),p=this.$e(this.xa(f)),g=this.hk(p),b=this.dh(f),T=this.$e(f),f=g&(M=this.hk(T))&x,x^=x&b,(x|=f)!=0);u=a.lb(u))this.Vg(p,g|x),this.Vg(T,M|x)},s.prototype.kW=function(a,u,p,f,g,b){if(g!=b){p=this.Ab(p,this.cg),p+=this.Ab(f,this.cg),f=0;var x=new d.ia(0),T=new d.ia(0);T.add(0);for(var M=a.rc(-1);M!=u;M=a.lb(M)){var C=a.ja(M),O=this.xa(C),F=this.$e(C),P=this.$e(O);if(F!=P){if(C=this.Ab(C,this.cg),f+=C+=this.Ab(O,this.cg),O=!1,x.size!=0&&x.Fc()==P&&(T.If(),x.If(),O=!0),this.Gn(P)==-1)throw d.i.Qa();O&&this.Gn(P)==F||(T.add(f),x.add(F))}}f+=p,x.size!=0&&x.Fc()==b&&(T.If(),x.If()),f!=0?T.Fc()==0&&(a=this.g.ld,a=this.La(a),this.Vg(g,a)):T.Fc()!=0&&(a=this.g.ld,a=this.La(a),this.Vg(g,a))}},s.prototype.iW=function(a,u,p,f){var g=this.La(this.g.ld);if(u==-1)this.Vg(f,this.Go),1&(a=this.Ab(a,this.xg))?this.Vg(p,g):this.Vg(p,this.Go);else{var b=this.hk(f);b==0?(b=this.hk(this.$e(u)),this.Vg(f,b),1&(a=this.Ab(a,this.xg))?this.Vg(p,b==g?this.Go:g):this.Vg(p,b)):1&(a=this.Ab(a,this.xg))?this.Vg(p,b==g?this.Go:g):this.Vg(p,b)}},s.prototype.gY=function(a,u,p,f){var g=f,b=-1,x=-1,T=0;do{if(T==2)return!1;var M=this.Ab(g,u);if(M!=-1){if(b!=-1)return!1;b=M}else{if(x!=-1)return!1;x=g}T++,g=this.jc(this.xa(g))}while(f!=g);return x!=-1&&b!=-1&&(this.Kb(a.ja(b),u,-2),a.Sj(b,x),p.add(b),!0)},s.prototype.hY=function(a,u){var p=this.Kp(a);if(p!=0){var f=this.Kp(u);0<p&&0>f||0>p&&0<f?this.jn(a,u):(u=this.Gn(u))!=-1&&this.jn(a,u)}},s.prototype.vP=function(a,u){this.Cq=this.g.Gd();for(var p=0,f=u.size;p<f;p++){var g=u.get(p),b=this.g.Pa(g,this.Cm),x=this.g.Qf(this.g.bd(g)),T=this.g.ic(x);if(d.aa.Hc(T)){var M=this.g.U(g);if(M!=-1){var C=this.g.Pa(M,this.Cm);if(b!=C){var O=this.vU(),F=this.xa(O),P=this.jh.Ce();this.jh.S(P,0,g),this.jh.S(P,1,-1),this.Gt(O,P),this.IJ(O,b),(P=this.Me(b))==-1?(this.mn(b,O),this.Tl(O,F),this.Sl(F,O)):(b=this.te(P),this.Tl(P,F),this.Sl(F,P),this.Sl(b,O),this.Tl(O,b)),this.IJ(F,C),(b=this.Me(C))==-1?(this.mn(C,F),this.Sl(O,F),this.Tl(F,O)):(C=this.te(b),this.Tl(b,O),this.Sl(O,b),this.Sl(C,F),this.Tl(F,C)),x=this.La(x),a==0?(this.Kb(F,this.ae,0),this.Kb(O,this.ae,T==1736?x:0)):a==5?(C=new d.h,this.g.D(g,C),g=new d.h,this.g.D(M,g),b=M=0,0>C.compare(g)?M=1:b=-1,this.Kb(F,this.ae,0),this.Kb(O,this.ae,0),this.Kb(O,this.cg,M),this.Kb(F,this.cg,b)):a==7?(this.Kb(F,this.ae,this.Go),this.Kb(O,this.ae,T==1736?x:0)):a==4&&(this.Kb(F,this.ae,0),this.Kb(O,this.ae,0),this.Kb(O,this.xg,1),this.Kb(F,this.xg,1)),T=T==1736?this.aO:0,this.$w(O,x|T),this.$w(F,x|T)}}}}},s.prototype.VT=function(a,u){var p=this.mm(u);if(p!=-1){var f=this.mm(a);this.jh.S(p,1,f),this.Gt(a,p),this.Gt(u,-1)}a=this.xa(a),u=this.xa(u),(p=this.mm(u))!=-1&&(f=this.mm(a),this.jh.S(p,1,f),this.Gt(a,p),this.Gt(u,-1))},s.prototype.IX=function(a){function u(X,te){return f.HO(X,te)}var p=new d.ia(0);p.Jb(10);for(var f=this,g=this.Re;g!=-1;g=this.Rf(g)){p.clear(!1);var b=this.Me(g);if(b!=-1){var x=b;do p.add(x),x=this.jc(this.xa(x));while(x!=b);if(1<p.size){if(x=!0,2<p.size)p.Vd(0,p.size,u),p.add(p.get(0));else if(0<this.GO(p.get(0),p.get(1))){var T=p.get(0);p.set(0,p.get(1)),p.set(1,T)}else x=!1;for(var M=T=p.get(0),C=this.uf(M),O=this.xa(M),F=-1,P=1,G=p.size;P<G;P++){var q=p.get(P),V=this.xa(q),Z=this.jk(V);if(Z==C&&q!=M){if(a==0)F=this.LF(M)|this.LF(q),this.$w(M,F),this.$w(O,F),this.Kb(M,this.ae,this.Ab(M,this.ae)|this.Ab(q,this.ae)),this.Kb(O,this.ae,this.Ab(O,this.ae)|this.Ab(V,this.ae));else if(this.cg!=-1)F=this.Ab(M,this.cg)+this.Ab(q,this.cg),V=this.Ab(O,this.cg)+this.Ab(V,this.cg),this.Kb(M,this.cg,F),this.Kb(O,this.cg,V);else{if(a==7)return void(this.Ni=new d.Md(5,g,-1));this.xg!=-1&&(F=this.Ab(M,this.xg)+this.Ab(q,this.xg),V=this.Ab(O,this.xg)+this.Ab(V,this.xg),this.Kb(M,this.xg,F),this.Kb(O,this.xg,V))}this.VT(M,q),this.Ly(q),F=M,p.set(P,-1),q==T&&(p.set(0,-1),T=-1)}else this.yx(F,!1),F=-1,M=q,C=Z,O=V}if(this.yx(F,!1),F=-1,x){for(T=-1,P=0,G=p.size;P<G;P++)if((q=p.get(P))!=-1){if(T==-1)M=T=q,C=this.uf(M),O=this.xa(M);else if(q!=M&&(V=this.xa(q),Z=this.jk(V),this.Sl(O,q),this.Tl(q,O),M=q,C=Z,O=V,a==7&&(this.Ab(q,this.ae)|this.Ab(this.te(q),this.ae))==(1|this.Go)))return void(this.Ni=new d.Md(5,g,-1))}this.mn(g,T)}else{for(T=-1,P=0,G=p.size;P<G;P++)if((q=p.get(P))!=-1){T=q;break}b!=T&&this.mn(g,T)}}}}},s.prototype.WN=function(){for(var a=-1,u=this.$g(),p=this.Re;p!=-1;p=this.Rf(p)){var f=this.Me(p);if(f!=-1){var g=f;do{if(this.Ab(g,u)!=1){var b=this.mI();this.Dt(b,g),this.BJ(b,a),a!=-1&&this.DJ(a,b),a=b;var x=0,T=g;do x|=this.Ab(T,this.ae),this.$W(T,b),this.Kb(T,u,1),T=this.jc(T);while(T!=g);this.Vg(b,x)}g=this.jc(this.xa(g))}while(g!=f)}}b=this.mI(),this.Dt(b,-1),this.BJ(b,a),a!=-1&&this.DJ(a,b),this.Hl=b,this.Yn=d.be.qf(this.ye.size,NaN),this.kA=d.be.qf(this.ye.size,NaN),this.AJ(this.Hl,1/0),this.CJ(this.Hl,1/0),this.Jg(u)},s.prototype.sR=function(a,u,p){if((u=u!=-1?u:this.Me(a))==-1)return-1;for(a=u;;){if(this.Ab(u,p)!=1)return u;if((u=this.jc(this.xa(u)))==a)return-1}},s.prototype.yW=function(){for(var a=this.$g(),u=this.Re;u!=-1;u=this.Rf(u))for(var p=-1;;){var f=this.sR(u,p,a);if(f==-1)break;p=this.jc(this.xa(f));for(var g=f;;){var b=this.jc(g),x=this.te(g),T=this.xa(g);if(x==T){if(this.IP(g),p!=g&&p!=T||(p=-1),g==f||x==f){if(g==(f=b)||x==f)break;g=b;continue}}else this.Kb(g,a,1);if((g=b)==f)break}}this.Jg(a)},s.prototype.MB=function(a,u,p,f,g){this.Ug(),this.gH=g,this.g=a,this.Bq=this.g.aF(),(a=new d.ia(0)).Jb(p!=null?this.g.I(p.get(0)):this.g.fd);var b=0,x=1,T=p!=null?p.get(0):this.g.ld;for(g=1;T!=-1;){this.g.HJ(T,this.Bq,x),x<<=1;for(var M=this.g.Ob(T);M!=-1;M=this.g.Rb(M))for(var C=this.g.Xa(M),O=0,F=this.g.Ja(M);O<F;O++)a.add(C),C=this.g.U(C);d.aa.Rn(this.g.ic(T))||(b+=this.g.da(T)),p!=null?(T=g<p.size?p.get(g):-1,g++):T=this.g.ue(T)}for(this.Go=x,this.wa=a.size,this.g.nx(a,this.wa),this.jh==null&&(this.jh=new d.$c(2),this.ge=new d.$c(8),this.Kc=new d.$c(8),this.ye=new d.$c(8)),this.jh.De(this.wa),d.mp.zp(f),this.ge.De(this.wa+10),this.Kc.De(2*this.wa+32),this.ye.De(Math.max(32,b)),this.Cm=this.g.Gd(),p=new d.h,g=0,b=new d.h,p.Rc(),x=0;x<=this.wa;x++)if(x<this.wa?(C=a.get(x),this.g.D(C,b)):b.Rc(),!p.qb(b)){if(g<x){for(C=this.Ym(),F=O=-1;g<x;g++)F=a.get(g),this.g.Ra(F,this.Cm,C),T=this.jh.Ce(),this.jh.S(T,0,F),this.jh.S(T,1,O),O=T,M=this.g.bd(F),T=this.g.Qf(M),T=this.La(T),this.SW(C,this.xd(C)|T);this.TW(C,O),this.cr(C,this.g.Ua(F)),this.Os!=-1&&this.iX(this.Os,C),this.lX(C,this.Os),this.Os=C,this.Re==-1&&(this.Re=C)}g=x,p.L(b)}d.mp.zp(f),this.ae=this.$g(),u==5&&(this.cg=this.$g()),u==4&&(this.xg=this.$g()),this.vP(u,a),this.Ni.Jj==0&&(this.IX(u),this.Ni.Jj==0&&(isNaN(this.lA)||this.xO()?(this.WN(),this.Ni.Jj==0&&(this.Jg(this.ae),this.ae=-1,this.gH&&this.PU(u,f))):this.pA=!0))},s.prototype.Ly=function(a){var u=this.jc(a),p=this.te(a),f=this.xa(a),g=this.jc(f),b=this.te(f);u!=f&&(this.Sl(b,u),this.Tl(u,b)),p!=f&&(this.Sl(p,g),this.Tl(g,p)),p=this.jk(a),this.Me(p)==a&&(g!=a?this.mn(p,g):this.mn(p,-1)),g=this.jk(f),this.Me(g)==f&&(u!=f?this.mn(g,u):this.mn(g,-1)),this.Kc.jd(a),this.Kc.jd(f)},s.prototype.OF=function(a,u){for(;;){if((u=a.we(u))==-1)return-1;var p=a.ja(u);if(this.$e(p)!=this.$e(this.xa(p)))return p}},s.prototype.dr=function(a,u){var p;p===void 0&&(p=!0),this.MB(a,0,null,u,p)},s.prototype.vJ=function(a,u,p){var f=new d.ia(0);f.add(u),this.MB(a,4,f,p,a.ic(u)==1736)},s.prototype.wJ=function(a,u,p){var f=new d.ia(0);f.add(u),this.MB(a,5,f,p,!0)},s.prototype.Ug=function(){this.g!=null&&(this.Bq!=-1&&(this.g.xW(this.Bq),this.Bq=-1),this.Cm!=-1&&(this.g.Td(this.Cm),this.Cm=-1),this.Cq!=-1&&(this.g.Td(this.Cq),this.Cq=-1),this.ae!=-1&&(this.Jg(this.ae),this.ae=-1),this.cg!=-1&&(this.Jg(this.cg),this.cg=-1),this.xg!=-1&&(this.Jg(this.xg),this.xg=-1),this.g=null,this.ge.mj(!0),this.jh.mj(!0),this.Os=this.Re=-1,this.Kc!=null&&this.Kc.mj(!0),this.Gi!=null&&(this.Gi.length=0),this.Di!=null&&(this.Di.length=0),this.hH!=null&&(this.hH.length=0),this.ye!=null&&this.ye.mj(!0),this.Hl=-1,this.Yn=null)},s.prototype.Me=function(a){return this.ge.T(a,2)},s.prototype.D=function(a,u){this.g.dG(this.eR(a),u)},s.prototype.xd=function(a){return this.ge.T(a,1)},s.prototype.Rf=function(a){return this.ge.T(a,4)},s.prototype.cz=function(a){return this.ge.T(a,6)},s.prototype.km=function(a){return this.ge.T(a,7)},s.prototype.js=function(a){return this.jh.T(a,1)},s.prototype.tj=function(a){return this.jh.T(a,0)},s.prototype.ng=function(a,u){return(u=this.Di[u]).size<=a?-1:u.read(a)},s.prototype.nn=function(a,u,p){(u=this.Di[u]).size<=a&&u.resize(this.ge.size,-1),u.write(a,p)},s.prototype.Dp=function(){this.Di==null&&(this.Di=[]);for(var a=d.ia.qf(this.ge.Hg,-1),u=0,p=this.Di.length;u<p;u++)if(this.Di[u]==null)return this.Di[u]=a,u;return this.Di.push(a),this.Di.length-1},s.prototype.Ep=function(a){this.Di[a]=null},s.prototype.jk=function(a){return this.Kc.T(a,1)},s.prototype.uf=function(a){return this.jk(this.xa(a))},s.prototype.xa=function(a){return this.Kc.T(a,4)},s.prototype.te=function(a){return this.Kc.T(a,5)},s.prototype.jc=function(a){return this.Kc.T(a,6)},s.prototype.$e=function(a){return this.Kc.T(a,2)},s.prototype.af=function(a){return this.hk(this.Kc.T(a,2))},s.prototype.mm=function(a){return this.Kc.T(a,7)},s.prototype.Yr=function(a,u){this.D(this.jk(a),u)},s.prototype.lm=function(a,u){this.D(this.uf(a),u)},s.prototype.dh=function(a){return this.Kc.T(a,3)&this.bO},s.prototype.Ab=function(a,u){return(u=this.Gi[u]).size<=a?-1:u.read(a)},s.prototype.Kb=function(a,u,p){(u=this.Gi[u]).size<=a&&u.resize(this.Kc.size,-1),u.write(a,p)},s.prototype.$g=function(){this.Gi==null&&(this.Gi=[]);for(var a=d.ia.qf(this.Kc.Hg,-1),u=0,p=this.Gi.length;u<p;u++)if(this.Gi[u]==null)return this.Gi[u]=a,u;return this.Gi.push(a),this.Gi.length-1},s.prototype.Jg=function(a){this.Gi[a]=null},s.prototype.IP=function(a){var u=this.$e(a),p=this.xa(a),f=this.jc(a);f==p&&(f=this.jc(f))==a&&(f=-1);var g=this.AF(u);g!==a&&g!=p||this.Dt(u,f),p=this.Yn.read(u),isNaN(p)||(this.AJ(u,NaN),this.CJ(u,NaN)),this.yx(a,!0),this.Ly(a)},s.prototype.JP=function(a){for(var u=0,p=a.size;u<p;u++){var f=a.get(u),g=this.$e(this.xa(f));this.Dt(this.$e(f),-1),this.Dt(g,-1),this.yx(f,!0),this.Ly(f)}},s.prototype.AF=function(a){return this.ye.T(a,1)},s.prototype.hk=function(a){return this.ye.T(a,2)},s.prototype.Gn=function(a){return this.ye.T(a,3)},s.prototype.dR=function(a){return this.ye.T(a,4)},s.prototype.Kp=function(a){var u=this.Yn.read(a);return isNaN(u)&&(this.kY(a),u=this.Yn.read(a)),u},s.prototype.La=function(a){return this.g.KF(a,this.Bq)},s.prototype.Le=function(a){return this.g.Pa(a,this.Cm)},s.prototype.uR=function(a){return this.g.Pa(a,this.Cq)},s.prototype.tR=function(a,u){var p=this.Me(a);if(p==-1)return-1;var f=p,g=-1,b=-1;do{if(this.uf(f)==u)return f;if(g==-1){if((g=this.Me(u))==-1)break;b=g}if(this.uf(b)==a)return this.xa(b);f=this.jc(this.xa(f)),b=this.jc(this.xa(b))}while(f!=p&&b!=g);return-1},s.prototype.pB=function(a,u){u.Or(),u=u.get();var p=new d.h;this.Yr(a,p),u.Dc(p),this.lm(a,p),u.Qc(p)},s.prototype.HO=function(a,u){if(a==u)return 0;var p=new d.h;this.lm(a,p);var f=new d.h;return this.lm(u,f),p.qb(f)?0:(u=new d.h,this.Yr(a,u),(a=new d.h).uc(p,u),(p=new d.h).uc(f,u),d.h.nu(a,p))},s.prototype.GO=function(a,u){if(a==u)return 0;var p=new d.h;this.lm(a,p);var f=new d.h;return this.lm(u,f),p.qb(f)?0:(u=new d.h,this.Yr(a,u),(a=new d.h).uc(p,u),(p=new d.h).uc(f,u),0<=p.y&&0<a.y?d.h.nu(a,p):0)},s.prototype.xO=function(){for(var a=d.lc.ox(this.lA),u=new d.h,p=new d.h,f=new d.h,g=new d.h,b=new d.h,x=this.Re;x!=-1;x=this.Rf(x)){var T=this.Me(x);if(T!=-1){var M=T;this.Yr(M,u),this.lm(M,p),b.uc(p,u);var C=b.Sk();do{var O=M;if((M=this.jc(this.xa(M)))!=O){this.lm(M,f),g.uc(f,u),O=g.Sk();var F=g.wi(b);if(F*F/(O*C)*Math.min(O,C)<=a)return!1;b.L(g),C=O,p.L(f)}}while(M!=T)}}return!0},s}(),d.iu=L}(Y||(Y={})),function(d){var L=function(){function S(){this.j=null,this.oH=new d.h,this.pH=new d.h,this.Gj=null,this.Mv=!1,this.tl=-1}return S.prototype.cf=function(h){return h<this.Gj.length&&this.Gj[h]},S.prototype.dl=function(h,l,s,a){var u=d.aa.tf(this.j.g.ic(s));if(d.aa.tf(this.j.g.ic(l))!=2||u!=1)throw d.i.Qa();this.FP(h,l,s,a)},S.prototype.dr=function(h,l){this.j==null&&(this.j=new d.iu),this.j.dr(h,l)},S.prototype.Ft=function(h,l,s){for(d.Tk.V(h,l,s,!0),l=h.ld;l!=-1;l=h.ue(l))h.ic(l)==1736&&d.rn.V(h,l,-1,this.Mv,s);this.dr(h,s)},S.prototype.ME=function(h,l,s,a,u){var p=this.j.g;if(p.ic(h)==1736)for(h=p.Ob(h);h!=-1;h=p.Rb(h)){var f=p.Xa(h);this.j.Le(f),this.j.Le(p.U(f));var g=this.j.uR(f);if(g!=-1){var b=this.j.Ab(g,s);if(b!=1&&b!=2)if(this.cf(this.j.af(g))){this.j.Kb(g,s,1),b=p.vf(l,-1);var x=g,T=this.j.Le(f),M=1;do{var C=this.sm(f,u);p.ij(b,C),a!=-1&&this.j.nn(T,a,1),this.j.Kb(x,s,1),x=this.j.jc(x);do var O=(C=M==1?p.U(f):p.Ma(f))!=-1?this.j.Le(C):-1;while(O==T);var F=this.j.jk(x);if(F!=O){do O=(C=M==1?p.Ma(f):p.U(f))!=-1?this.j.Le(C):-1;while(O==T);F!=O?(O=F,C=this.j.tj(this.j.km(O))):M=-M}T=O,f=C}while(x!=g);p.kn(b,!0)}else this.j.Kb(g,s,2)}}},S.prototype.eF=function(){for(var h=this.j.$g(),l=new d.ia(0),s=this.j.Re;s!=-1;s=this.j.Rf(s)){var a=this.j.Me(s),u=a;if(a!=-1)do{if(this.j.Ab(u,h)!=1){var p=this.j.xa(u);this.j.Kb(p,h,1),this.j.Kb(u,h,1),this.cf(this.j.af(u))&&this.cf(this.j.af(p))&&l.add(u)}u=this.j.jc(this.j.xa(u))}while(u!=a)}this.j.Jg(h),this.j.JP(l)},S.prototype.sm=function(h,l){return l==-1?h:this.aS(h,l)},S.prototype.aS=function(h,l){var s=this.j.g,a=this.j.km(this.j.Le(h));do{var u=this.j.tj(a);if(s.Qf(s.bd(u))==l)return u;a=this.j.js(a)}while(a!=-1);return h},S.prototype.Ot=function(h,l,s){this.eF();var a=this.j.g,u=a.Ig(1736),p=this.j.$g();return this.uK(h,l,u,s,p,-1),this.j.Jg(p),d.rn.V(a,u,1,this.Mv,null),u},S.prototype.uK=function(h,l,s,a,u,p){for(this.ME(h,s,u,p,a),l!=-1&&this.ME(l,s,u,p,a),h=this.j.g,l=this.j.Re;l!=-1;l=this.j.Rf(l)){var f=this.j.Me(l);if(f!=-1){var g=f;do{var b=this.j.Ab(g,u);if(b!=1&&b!=2)if(this.cf(this.j.af(g))){b=h.vf(s,-1);var x=g;do{var T=this.j.mm(x);T!=-1?T=this.j.tj(T):(T=this.j.tj(this.j.mm(this.j.xa(x))),T=this.j.g.U(T)),T=this.sm(T,a),h.ij(b,T),this.j.Kb(x,u,1),p!=-1&&(T=this.j.Le(T),this.j.nn(T,p,1)),x=this.j.jc(x)}while(x!=g);h.kn(b,!0)}else this.j.Kb(g,u,2);g=this.j.jc(this.j.xa(g))}while(g!=f)}}},S.prototype.aY=function(h,l,s){var a=this.j.g,u=a.Ig(1736),p=a.Ig(1607),f=a.Ig(550);this.eF();var g=-1,b=this.j.$g(),x=this.j.Dp();for(this.uK(h,l,u,s,b,x),h=this.j.Re;h!=-1;h=this.j.Rf(h))if((l=this.j.Me(h))!=-1){var T=l;do{var M=this.j.Ab(T,b),C=this.j.Ab(this.j.xa(T),b);if((M|=C)==2)if(M=this.j.dh(T),this.cf(M)){var O=a.vf(p,-1),F=T;M=this.Yw(h,a),M=this.sm(M,s),a.ij(O,M),this.j.nn(h,x,1);do{if(M=this.j.uf(F),C=this.Yw(M,a),C=this.sm(C,s),a.ij(O,C),this.j.Kb(F,b,1),this.j.Kb(this.j.xa(F),b,1),this.j.nn(M,x,1),F=this.j.jc(F),M=this.j.Ab(F,b),(M|=C=this.j.Ab(this.j.xa(F),b))!=2)break;if(M=this.j.dh(F),!this.cf(M)){this.j.Kb(F,b,1),this.j.Kb(this.j.xa(F),b,1);break}}while(F!=T)}else this.j.Kb(T,b,1),this.j.Kb(this.j.xa(T),b,1);T=this.j.jc(this.j.xa(T))}while(T!=l)}for(h=this.j.Re;h!=-1;h=this.j.Rf(h))(M=this.j.ng(h,x))!=1&&(M=this.j.xd(h),this.cf(M)&&(g==-1&&(g=a.vf(f,-1)),(l=this.j.km(h))!=-1&&(l=this.j.tj(l),M=this.sm(l,s),a.ij(g,M))));return this.j.Ep(x),this.j.Jg(b),d.rn.V(a,u,1,this.Mv,null),(s=[])[0]=f,s[1]=p,s[2]=u,s},S.prototype.Yw=function(h,l){var s=-1;for(h=this.j.km(h);h!=-1;h=this.j.js(h)){var a=this.j.tj(h);s==-1&&(s=a);var u=this.j.La(l.Qf(l.bd(a)));if(this.cf(u)){s=a;break}}return s},S.prototype.lB=function(h,l){for(var s=this.jl(l),a=this.j.jk(l),u=this.j.uf(l),p=0,f=0,g=this.j.km(a);g!=-1;g=this.j.js(g)){var b=this.j.tj(g),x=h.bd(b),T=this.j.La(h.Qf(x));x=h.Xa(x),(T=!!(T&s))&&x==b&&(this.tl=l);var M=h.U(b);M!=-1&&this.j.Le(M)==u?(p++,T&&(this.tl===-1&&x==M&&(b=this.j.jc(l),this.cf(this.jl(b))&&(this.tl=b)),f++)):(b=h.Ma(b))!=-1&&this.j.Le(b)==u&&(p--,T&&(this.tl===-1&&x===b&&(b=this.j.jc(l),this.cf(this.jl(b))&&(this.tl=b)),f--))}return this.j.D(a,this.oH),this.j.D(u,this.pH),(f!=0?f:p)*(h=d.h.tb(this.oH,this.pH))},S.prototype.jl=function(h){return this.j.dh(h)|this.j.af(h)|this.j.af(this.j.xa(h))},S.prototype.xK=function(h){for(var l=this.j.xa(this.j.te(h)),s=-1;l!=h;){if(this.cf(this.jl(l))){if(s!=-1)return-1;s=l}l=this.j.xa(this.j.te(l))}return s!=-1?this.j.xa(s):-1},S.prototype.yK=function(h){for(var l=this.j.xa(this.j.jc(h)),s=-1;l!=h;){if(this.cf(this.jl(l))){if(s!=-1)return-1;s=l}l=this.j.xa(this.j.jc(l))}return s!=-1?this.j.xa(s):-1},S.prototype.mJ=function(h,l,s,a,u){var p=this.j.g,f=h,g=this.j.xa(f);this.j.Kb(f,s,1),this.j.Kb(g,s,1),this.tl=-1;for(var b=this.lB(p,f),x=f,T=-1,M=!1,C=1;;){var O=this.j.te(f);if(O==g)break;if(g=this.j.jc(g),this.j.xa(O)!=g){if((f=this.xK(f))==-1){M=!0;break}g=this.j.xa(f)}else f=O;if(f==h){T=h;break}if(O=this.jl(f),!this.cf(O))break;this.j.Kb(f,s,1),this.j.Kb(g,s,1),x=f,b+=this.lB(p,f),C++}if(T==-1)for(f=h,g=this.j.xa(f),T=f;(h=this.j.jc(f))!=g;){if(g=this.j.te(g),this.j.xa(h)!=g){if((f=this.yK(f))==-1){M=!0;break}g=this.j.xa(f)}else f=h;if(O=this.jl(f),!this.cf(O))break;this.j.Kb(f,s,1),this.j.Kb(g,s,1),T=f,b+=this.lB(p,f),C++}else if(this.tl!=-1&&(x=this.tl,T=this.j.te(this.tl),this.j.xa(T)!=this.j.jc(this.j.xa(x))&&(T=this.xK(x))==-1))throw d.i.Qa();for(0<=b||(f=T,T=this.j.xa(x),x=this.j.xa(f)),s=p.vf(l,-1),f=x,x=this.j.jk(x),M=this.j.uf(T)==x&&M,b=this.Yw(x,p),b=this.sm(b,u),p.ij(s,b),a!=-1&&this.j.nn(x,a,1),x=0,C=M?d.O.truncate((C+1)/2):-1;h=this.j.uf(f),b=this.Yw(h,p),b=this.sm(b,u),p.ij(s,b),x++,a!=-1&&this.j.nn(h,a,1),M&&x==C&&(s=p.vf(l,-1),p.ij(s,b)),f!=T;)if(h=this.j.jc(f),this.j.te(this.j.xa(f))!=this.j.xa(h)){if((f=this.yK(f))==-1)throw d.i.Qa()}else f=h},S.prototype.Pt=function(h){for(var l=this.j.g.Ig(1607),s=this.j.$g(),a=this.j.Re;a!=-1;a=this.j.Rf(a)){var u=this.j.Me(a),p=u;do this.j.Ab(p,s)!=1&&this.cf(this.jl(p))&&this.mJ(p,l,s,-1,h),p=this.j.jc(this.j.xa(p));while(p!=u)}return this.j.Jg(s),l},S.prototype.bY=function(h){for(var l=this.j.g,s=l.Ig(1607),a=l.Ig(550),u=this.j.$g(),p=this.j.Dp(),f=-1,g=this.j.Re;g!=-1;g=this.j.Rf(g)){var b=this.j.Me(g),x=b;do{var T=this.j.Ab(x,u);T!=1&&(T=this.jl(x),this.cf(T)&&this.mJ(x,s,u,p,h)),x=this.j.jc(this.j.xa(x))}while(x!=b)}for(g=this.j.Re;g!=-1;g=this.j.Rf(g))(T=this.j.ng(g,p))!=1&&(T=this.j.xd(g),this.cf(T)&&(f==-1&&(f=l.vf(a,-1)),(b=this.j.km(g))!=-1&&(b=this.j.tj(b),b=this.sm(b,h),l.ij(f,b))));return this.j.Jg(u),this.j.Ep(p),(h=[])[0]=a,h[1]=s,h},S.prototype.mr=function(){for(var h=this.j.g,l=h.Ig(550),s=h.vf(l,-1),a=this.j.Re;a!=-1;a=this.j.Rf(a))if(this.cf(this.j.xd(a))){for(var u=-1,p=this.j.km(a);p!=-1;p=this.j.js(p)){var f=this.j.tj(p);u==-1&&(u=f);var g=this.j.La(h.Qf(h.bd(f)));if(this.cf(g)){u=f;break}}h.ij(s,u)}return l},S.prototype.bq=function(h){this.Gj=[];for(var l=0;l<h;l++)this.Gj[l]=!1},S.aW=function(h,l,s){var a=h.Ia(),u=Array(1e3);d.O.$u(u,null);var p=d.O.lg(1e3,0),f=h.I(),g=!0,b=l.Db()==2;if(l.Db()!=1&&l.Db()!=2)throw d.i.Qa();for(var x=0;x<f;){var T=d.O.truncate(h.lW(u,x)-x);b?d.hd.sK(l,u,T,s,p):d.hd.tK(l,u,T,s,p);for(var M=0,C=0;C<T;C++)p[C]==0&&(g&&(g=!1,a.Fd(h,0,x)),M!=C&&a.Fd(h,x+M,x+C),M=C+1);g||M==T||a.Fd(h,x+M,x+T),x+=T}return g?h:a},S.zG=function(h,l,s){return h instanceof d.de?S.aW(h,l,s):l instanceof d.Sa?h.B()||l.B()?h.Ia():d.Tk.zU(s,h,l)?d.Tk.CO(h,l):h.Ia():S.bW(h,l,s)},S.Av=function(h,l,s,a){var u=new d.l;h.A(u);var p=new d.l;l.A(p);var f=new d.l;if(f.K(u),f.Zb(p),s=d.ta.Wd(s,f,!0),(f=new d.l).K(p),p=d.ta.Er(s),f.W(p,p),!u.isIntersecting(f)){if(h.Db()<=l.Db())return S.ki(S.Xe(h.Ia()),h,"&");if(h.Db()>l.Db())return S.ki(S.Xe(l.Ia()),h,"&")}return p=new S,f=(u=new d.gd).Ib(S.Xe(h)),l=u.Ib(S.Xe(l)),p.Ft(u,s,a),a=p.Av(f,l),h=S.ki(u.Ne(a),h,"&"),d.aa.Hc(h.getType())&&(h.Ch(2,s),h.getType()==1736&&h.fm()),h},S.bW=function(h,l,s){if(h.B()||l.B())return h.Ia();var a=[null],u=[0],p=l.Db()==2;if(l.Db()!=1&&l.Db()!=2)throw d.i.Qa();return a[0]=h.D(),p?d.hd.sK(l,a,1,s,u):d.hd.tK(l,a,1,s,u),u[0]==0?h.Ia():h},S.prototype.LU=function(h,l,s,a,u){if(h.B())return h;var p=new d.gd;return h=p.Ib(h),this.Mk(p,h,l,s,a,u)},S.prototype.NU=function(h,l,s,a,u,p){if(u&&h.ic(l)!=550){var f=new d.RC;f.TX(h,s),f.Ng?(d.Tk.V(h,s,p,!0),u=!1):this.j.yy(s)}else d.Tk.V(h,s,p,!0),u=!1;if(a&&h.ic(l)!=550?this.j.wJ(h,l,p):this.j.vJ(h,l,p),this.j.pA)return this.j.Ug(),this.j=null,this.Mk(h,l,s,a,!1,p);if(this.j.yy(NaN),p=this.j.La(l),this.bq(p+1),this.Gj[p]=!0,h.ic(l)==1736||a&&h.ic(l)!=550)return h.Yo(l,0),l=this.Ot(l,-1,-1),(h=h.Ne(l)).Yo(0),u?h.Ch(1,0):(h.Ch(2,s),h.fm()),h;if(h.ic(l)==1607)return l=this.Pt(-1),h=h.Ne(l),u||h.Ch(2,s),h;if(h.ic(l)==550)return l=this.mr(),h=h.Ne(l),u||h.Ch(2,s),h;throw d.i.Qa()},S.prototype.Mk=function(h,l,s,a,u,p){this.j=new d.iu;try{return this.NU(h,l,s,a,u,p)}finally{this.j.Ug()}},S.Mk=function(h,l,s,a,u){return new S().LU(h,l,s,a,u)},S.prototype.MU=function(h,l,s,a){this.Mv=h,this.j=new d.iu,h=l.In(s);var u=l.ic(s);if(h!=1||u==550?this.j.vJ(l,s,a):this.j.wJ(l,s,a),!this.j.pA)if(this.j.yy(NaN),a=this.j.La(s),this.bq(a+1),this.Gj[a]=!0,l.ic(s)==1736||h==1&&l.ic(s)!=550)l.Yo(s,0),a=this.Ot(s,-1,-1),l.hC(a,s),l.BB(a);else if(l.ic(s)==1607)a=this.Pt(-1),l.hC(a,s),l.BB(a);else{if(l.ic(s)!=550)throw d.i.fa("internal error");a=this.mr(),l.hC(a,s),l.BB(a)}},S.prototype.im=function(h,l){var s=d.aa.tf(this.j.g.ic(h)),a=d.aa.tf(this.j.g.ic(l));if(s>a)return h;var u=this.j.La(h),p=this.j.La(l);if(this.bq(1+(u|p)),this.Gj[this.j.La(h)]=!0,s==2&&a==2)return this.Ot(h,l,-1);if(s==1&&a==2||s==1&&a==1)return this.Pt(-1);if(s==0)return this.mr();throw d.i.Qa()},S.prototype.Av=function(h,l){var s=d.aa.tf(this.j.g.ic(h)),a=d.aa.tf(this.j.g.ic(l)),u=this.j.La(h),p=this.j.La(l);if(this.bq(1+(u|p)),this.Gj[this.j.La(h)|this.j.La(l)]=!0,u=-1,1<this.j.g.ht.Aa&&(u=h),s==2&&a==2)return this.Ot(h,l,u);if(s==1&&0<a||a==1&&0<s)return this.Pt(u);if(s==0||a==0)return this.mr();throw d.i.Qa()},S.prototype.Pz=function(h,l){var s=d.aa.tf(this.j.g.ic(h)),a=d.aa.tf(this.j.g.ic(l)),u=this.j.La(h),p=this.j.La(l);if(this.bq(1+(u|p)),this.Gj[this.j.La(h)|this.j.La(l)]=!0,u=-1,1<this.j.g.ht.Aa&&(u=h),s==2&&a==2)return this.aY(h,l,u);if(s==1&&0<a||a==1&&0<s)return this.bY(u);if(s==0||a==0)return(h=[])[0]=this.mr(),h;throw d.i.Qa()},S.prototype.ep=function(h,l){var s=d.aa.tf(this.j.g.ic(h)),a=d.aa.tf(this.j.g.ic(l)),u=this.j.La(h),p=this.j.La(l);if(this.bq(1+(u|p)),this.Gj[this.j.La(h)]=!0,this.Gj[this.j.La(l)]=!0,s==2&&a==2)return this.Ot(h,l,-1);if(s==1&&a==1)return this.Pt(-1);if(s==0&&a==0)return this.mr();throw d.i.Qa()},S.Xe=function(h){var l=h.getType();return l==197?(l=new d.Da(h.description),h.B()||l.ad(h,!1),l):l==33?(l=new d.de(h.description),h.B()||l.add(h),l):l==322?(l=new d.Ta(h.description),h.B()||l.oc(h,!0),l):h},S.ki=function(h,l,s){var a=h.getType();return a==197?(l=new d.Da(h.description),h.B()||l.ad(h,!1),l):a!=33||s!="|"&&s!="^"?a==322?(l=new d.Ta(h.description),h.B()||l.oc(h,!0),l):a==33&&s=="-"&&l.getType()==33||a==550&&s=="&"&&l.getType()==33?(l=new d.Sa(h.description),h.B()||h.ve(0,l),l):h:(l=new d.de(h.description),h.B()||l.add(h),l)},S.im=function(h,l,s,a){if(h.B()||l.B()||h.Db()>l.Db())return S.ki(S.Xe(h),h,"-");var u=new d.l;h.A(u);var p=new d.l;if(l.A(p),!u.isIntersecting(p))return S.ki(S.Xe(h),h,"-");var f=new d.l;return f.K(u),f.Zb(p),s=d.ta.Wd(s,f,!0),p=new S,f=(u=new d.gd).Ib(S.Xe(h)),l=u.Ib(S.Xe(l)),p.Ft(u,s,a),a=p.im(f,l),a=u.Ne(a),h=S.ki(a,h,"-"),d.aa.Hc(h.getType())&&(h.Ch(2,s),h.getType()==1736&&h.fm()),h},S.VP=function(h,l,s){if(2>h.length)throw d.i.N("not enough geometries to dissolve");for(var a=0,u=0,p=h.length;u<p;u++)a=Math.max(h[u].Db(),a);var f=new d.l;f.Oa();var g=new d.gd,b=-1,x=0,T=-1;for(u=0,p=h.length;u<p;u++)if(h[u].Db()==a)if(h[u].B())T==-1&&(T=u);else{T=u,b==-1?b=g.Ib(S.Xe(h[u])):g.uN(b,S.Xe(h[u]));var M=new d.l;h[u].xc(M),f.Zb(M),x++}return 2>x?S.Xe(h[T]):(h=a==2,l=d.ta.Wd(a==0?l:null,f,!0),new S().Mk(g,b,l,h,!0,s))},S.Pz=function(h,l,s,a){var u=[null,null,null],p=new d.l;h.A(p);var f=new d.l;l.A(f);var g=new d.l;if(g.K(p),g.Zb(f),s=d.ta.Wd(s,g,!0),(g=new d.l).K(f),f=d.ta.Er(s),g.W(f,f),!p.isIntersecting(g)){if(h.Db()<=l.Db())return u[(h=S.ki(S.Xe(h.Ia()),h,"&")).Db()]=h,u;if(h.Db()>l.Db())return u[(h=S.ki(S.Xe(l.Ia()),h,"&")).Db()]=h,u}for(f=new S,g=(p=new d.gd).Ib(S.Xe(h)),l=p.Ib(S.Xe(l)),f.Ft(p,s,a),a=f.Pz(g,l),l=0;l<a.length;l++)f=S.ki(p.Ne(a[l]),h,"&"),d.aa.Hc(f.getType())&&(f.Ch(2,s),f.getType()==1736&&f.fm()),u[f.Db()]=f;return u},S.ep=function(h,l,s,a){if(h.Db()>l.Db())return S.ki(S.Xe(h),h,"^");if(h.Db()<l.Db()||h.B())return S.ki(S.Xe(l),h,"^");if(l.B())return S.ki(S.Xe(h),h,"^");var u=new d.l;h.A(u);var p=new d.l;l.A(p);var f=new d.l;return f.K(u),f.Zb(p),s=d.ta.Wd(s,f,!0),p=new S,f=(u=new d.gd).Ib(S.Xe(h)),l=u.Ib(S.Xe(l)),p.Ft(u,s,a),a=p.ep(f,l),h=S.ki(u.Ne(a),h,"^"),d.aa.Hc(h.getType())&&(h.Ch(2,s),h.getType()==1736&&h.fm()),h},S.prototype.LQ=function(h,l){var s=this.j.g;h=s.vf(h,-1);for(var a=l.size,u=0;u<a;u++){var p=l.get(u);s.ij(h,p)}s.kn(h,!0)},S.prototype.aX=function(h,l){for(var s=this.j.g,a=s.ld;a!=-1;a=s.ue(a))if(a==l)for(var u=s.Ob(a);u!=-1;u=s.Rb(u)){var p=s.Xa(u);if(p!=-1)for(var f=s.U(p);f!=-1;){p=this.j.Le(p);var g=this.j.Le(f);(p=this.j.tR(p,g))!=-1&&(g=this.j.xa(p),this.j.Kb(p,h,1),this.j.Kb(g,h,2)),p=f,f=s.U(p)}}},S.prototype.cW=function(h,l,s,a){s=this.j.La(s),a=this.j.La(a);var u=new d.ia(0);u.Jb(256);for(var p=this.j.g,f=this.j.$g(),g=this.j.Re;g!=-1;g=this.j.Rf(g)){var b=this.j.Me(g);if(b!=-1){var x=b;do{if(this.j.Ab(x,f)!=1){var T=x,M=x,C=!1,O=0;do{if(this.j.Kb(T,f,1),!C){var F=this.j.dh(T);F&a&&this.j.af(T)&s&&(M=T,C=!0)}C&&(u.add(this.j.tj(this.j.km(this.j.jk(T)))),h!=-1&&(F=this.j.dh(T))&a&&(O|=F=this.j.Ab(T,h))),T=this.j.jc(T)}while(T!=M);C&&0<this.j.Kp(this.j.$e(M))&&(T=p.Ig(1736),this.LQ(T,u),l!=-1&&p.HJ(T,l,O)),u.clear(!1)}x=this.j.jc(this.j.xa(x))}while(x!=b)}}this.j.Jg(f)},S.prototype.FP=function(h,l,s,a){this.j.yW();var u=-1;h!=-1&&(u=this.j.$g(),this.aX(u,s)),this.cW(u,h,l,s),u!=-1&&(this.j.Jg(u),u=-1);var p=this.j.g;for(h=0,u=p.ld;u!=-1;u=p.ue(u))u!=l&&u!=s&&(a.add(u),h++);a.Vd(0,h,function(f,g){return(f=p.wz(p.Ob(f)))<(g=p.wz(p.Ob(g)))?-1:f==g?0:1})},S.prototype.Ug=function(){this.j!=null&&(this.j.Ug(),this.j=null)},S}();d.Fg=L}(Y||(Y={})),function(d){var L=function(){function S(h){h!==void 0?this.setScale(h):this.RB()}return S.prototype.lx=function(){this.Lb=this.Gb=this.jb=this.eb=this.ab=this.bb=0},S.prototype.Nb=function(h){return this==h||h instanceof S&&this.bb==h.bb&&this.eb==h.eb&&this.Gb==h.Gb&&this.jb==h.jb&&this.ab==h.ab&&this.Lb==h.Lb},S.prototype.cc=function(){return d.O.uj(),d.O.uj(),d.O.uj(),d.O.uj(),d.O.uj(),d.O.uj()},S.prototype.Eh=function(h,l){var s=this.jb*h.x+this.ab*h.y+this.Lb;l.x=this.bb*h.x+this.eb*h.y+this.Gb,l.y=s},S.prototype.eY=function(h,l,s){for(var a=0;a<l;a++){var u=h[a].x,p=h[a].y,f=this.bb*u+this.eb*p+this.Gb;u=this.jb*u+this.ab*p+this.Lb,s[a]!=null?s[a].ma(f,u):s[a]=d.h.construct(f,u)}},S.prototype.multiply=function(h){S.multiply(this,h,this)},S.multiply=function(h,l,s){var a=h.bb*l.bb+h.jb*l.eb,u=h.eb*l.bb+h.ab*l.eb,p=h.Gb*l.bb+h.Lb*l.eb+l.Gb,f=h.bb*l.jb+h.jb*l.ab,g=h.eb*l.jb+h.ab*l.ab;h=h.Gb*l.jb+h.Lb*l.ab+l.Lb,s.bb=a,s.eb=u,s.Gb=p,s.jb=f,s.ab=g,s.Lb=h},S.prototype.Of=function(){var h=new S;return h.bb=this.bb,h.eb=this.eb,h.Gb=this.Gb,h.jb=this.jb,h.ab=this.ab,h.Lb=this.Lb,h},S.prototype.mC=function(h){if(!h.B()){for(var l=[],s=0;4>s;s++)l[s]=new d.h;h.nB(l),this.fY(l,l),h.Zw(l,4)}},S.prototype.fY=function(h,l){for(var s=0;s<h.length;s++){var a=new d.h,u=h[s];a.x=this.bb*u.x+this.eb*u.y+this.Gb,a.y=this.jb*u.x+this.ab*u.y+this.Lb,l[s]=a}},S.prototype.pS=function(h,l){h.B()||l.B()||h.R()==0||h.ca()==0?this.lx():(this.eb=this.jb=0,this.bb=l.R()/h.R(),this.ab=l.ca()/h.ca(),this.Gb=l.v-h.v*this.bb,this.Lb=l.G-h.G*this.ab)},S.prototype.dY=function(h){var l=new d.h,s=new d.h;l.ma(this.bb,this.jb),s.ma(this.eb,this.ab),l.sub(l);var a=.5*l.Sk();return l.ma(this.bb,this.jb),s.ma(this.eb,this.ab),l.add(s),h*(a>(l=.5*l.Sk())?Math.sqrt(a):Math.sqrt(l))},S.prototype.RB=function(){this.bb=1,this.jb=this.Gb=this.eb=0,this.ab=1,this.Lb=0},S.prototype.isIdentity=function(h){if(h!==void 0){var l=d.h.construct(0,1);return this.Eh(l,l),l.sub(d.h.construct(0,1)),l.Sk()>h*h?!1:(l.ma(0,0),this.Eh(l,l),!(l.Sk()>h*h)&&(l.ma(1,0),this.Eh(l,l),l.sub(d.h.construct(1,0)),l.Sk()<=h*h))}return this.bb==1&&this.ab==1&&this.eb==0&&this.Gb==0&&this.jb==0&&this.Lb==0},S.prototype.Bi=function(h){return Math.abs(this.bb*this.ab-this.jb*this.eb)<=2*h*(Math.abs(this.bb*this.ab)+Math.abs(this.jb*this.eb))},S.prototype.gg=function(h,l){this.bb=1,this.eb=0,this.Gb=h,this.jb=0,this.ab=1,this.Lb=l},S.prototype.setScale=function(h,l){l!==void 0?(this.bb=h,this.jb=this.Gb=this.eb=0,this.ab=l,this.Lb=0):this.setScale(h,h)},S.prototype.$B=function(){this.bb=0,this.eb=1,this.Gb=0,this.jb=1,this.Lb=this.ab=0},S.prototype.setRotate=function(h){this.pX(Math.cos(h),Math.sin(h))},S.prototype.pX=function(h,l){this.bb=h,this.eb=-l,this.Gb=0,this.jb=l,this.ab=h,this.Lb=0},S.prototype.shift=function(h,l){this.Gb+=h,this.Lb+=l},S.prototype.scale=function(h,l){this.bb*=h,this.eb*=h,this.Gb*=h,this.jb*=l,this.ab*=l,this.Lb*=l},S.prototype.flipX=function(h,l){this.bb=-this.bb,this.eb=-this.eb,this.Gb=h+l-this.Gb},S.prototype.flipY=function(h,l){this.jb=-this.jb,this.ab=-this.ab,this.Lb=h+l-this.Lb},S.prototype.rotate=function(h){var l=new S;l.setRotate(h),this.multiply(l)},S.prototype.inverse=function(h){if(h!==void 0){var l=this.bb*this.ab-this.eb*this.jb;l==0?h.lx():(l=1/l,h.Gb=(this.eb*this.Lb-this.Gb*this.ab)*l,h.Lb=(this.Gb*this.jb-this.bb*this.Lb)*l,h.bb=this.ab*l,h.eb=-this.eb*l,h.jb=-this.jb*l,h.ab=this.bb*l)}else this.inverse(this)},S}();d.Dd=L}(Y||(Y={})),function(d){var L=function(){function S(){}return S.prototype.lx=function(){this.hg=this.Lb=this.Gb=this.He=this.Fe=this.Ee=this.Ge=this.ab=this.eb=this.Ze=this.jb=this.bb=0},S.prototype.setScale=function(h,l,s){this.bb=h,this.eb=this.Ze=this.jb=0,this.ab=l,this.Fe=this.Ee=this.Ge=0,this.He=s,this.hg=this.Lb=this.Gb=0},S.prototype.setTranslate=function(h,l,s){this.bb=1,this.eb=this.Ze=this.jb=0,this.ab=1,this.Fe=this.Ee=this.Ge=0,this.He=1,this.Gb=h,this.Lb=l,this.hg=s},S.prototype.translate=function(h,l,s){this.Gb+=h,this.Lb+=l,this.hg+=s},S.prototype.mC=function(h){if(!h.B()){for(var l=new d.Nd[8],s=0;8>s;s++)l[s]=new d.Nd;h.nB(l),this.transform(l,8,l),h.Zw(l)}},S.prototype.transform=function(h,l,s){for(var a=0;a<l;a++){var u=new d.Nd,p=h[a];u.x=this.bb*p.x+this.eb*p.y+this.Ee*p.z+this.Gb,u.y=this.jb*p.x+this.ab*p.y+this.Fe*p.z+this.Lb,u.z=this.Ze*p.x+this.Ge*p.y+this.He*p.z+this.hg,s[a]=u}},S.prototype.fp=function(h){var l=new d.Nd;return l.x=this.bb*h.x+this.eb*h.y+this.Ee*h.z+this.Gb,l.y=this.jb*h.x+this.ab*h.y+this.Fe*h.z+this.Lb,l.z=this.Ze*h.x+this.Ge*h.y+this.He*h.z+this.hg,l},S.prototype.Ag=function(h){S.multiply(this,h,this)},S.multiply=function(h,l,s){var a=h.bb*l.bb+h.jb*l.eb+h.Ze*l.Ee,u=h.bb*l.jb+h.jb*l.ab+h.Ze*l.Fe,p=h.bb*l.Ze+h.jb*l.Ge+h.Ze*l.He,f=h.eb*l.bb+h.ab*l.eb+h.Ge*l.Ee,g=h.eb*l.jb+h.ab*l.ab+h.Ge*l.Fe,b=h.eb*l.Ze+h.ab*l.Ge+h.Ge*l.He,x=h.Ee*l.bb+h.Fe*l.eb+h.He*l.Ee,T=h.Ee*l.jb+h.Fe*l.ab+h.He*l.Fe,M=h.Ee*l.Ze+h.Fe*l.Ge+h.He*l.He,C=h.Gb*l.bb+h.Lb*l.eb+h.hg*l.Ee+l.Gb,O=h.Gb*l.jb+h.Lb*l.ab+h.hg*l.Fe+l.Lb;h=h.Gb*l.Ze+h.Lb*l.Ge+h.hg*l.He+l.hg,s.bb=a,s.jb=u,s.Ze=p,s.eb=f,s.ab=g,s.Ge=b,s.Ee=x,s.Fe=T,s.He=M,s.Gb=C,s.Lb=O,s.hg=h},S.inverse=function(h,l){var s=h.bb*(h.ab*h.He-h.Ge*h.Fe)-h.jb*(h.eb*h.He-h.Ge*h.Ee)+h.Ze*(h.eb*h.Fe-h.ab*h.Ee);if(s==0)throw d.i.fa("math singularity");var a=1/s;s=(h.ab*h.He-h.Ge*h.Fe)*a;var u=-(h.eb*h.He-h.Ge*h.Ee)*a,p=(h.eb*h.Fe-h.ab*h.Ee)*a,f=-(h.jb*h.He-h.Fe*h.Ze)*a,g=(h.bb*h.He-h.Ze*h.Ee)*a,b=-(h.bb*h.Fe-h.jb*h.Ee)*a,x=(h.jb*h.Ge-h.Ze*h.ab)*a,T=-(h.bb*h.Ge-h.Ze*h.eb)*a;a*=h.bb*h.ab-h.jb*h.eb;var M=-(h.Gb*s+h.Lb*u+h.hg*p),C=-(h.Gb*f+h.Lb*g+h.hg*b);h=-(h.Gb*x+h.Lb*T+h.hg*a),l.bb=s,l.jb=f,l.Ze=x,l.eb=u,l.ab=g,l.Ge=T,l.Ee=p,l.Fe=b,l.He=a,l.Gb=M,l.Lb=C,l.hg=h},S.prototype.Of=function(){var h=new S;return h.bb=this.bb,h.jb=this.jb,h.Ze=this.Ze,h.eb=this.eb,h.ab=this.ab,h.Ge=this.Ge,h.Ee=this.Ee,h.Fe=this.Fe,h.He=this.He,h.Gb=this.Gb,h.Lb=this.Lb,h.hg=this.hg,h},S}();d.JY=L}(Y||(Y={})),function(d){var L=function(h){function l(s){if(s!==void 0)s=h.call(this,s.cc(),s)||this;else{(s=h.call(this)||this).bg=[],s.bg[0]=0,s.Aa=1,s.uh=[];for(var a=0;10>a;a++)s.uh[a]=-1;s.uh[s.bg[0]]=0}return s.jq=!0,s}return Bt(l,h),l.prototype.re=function(s){this.hasAttribute(s)||(this.uh[s]=0,this.jD())},l.prototype.removeAttribute=function(s){if(s==0)throw d.i.N("Position attribue cannot be removed");this.hasAttribute(s)&&(this.uh[s]=-1,this.jD())},l.prototype.reset=function(){this.bg[0]=0,this.Aa=1;for(var s=0;s<this.uh.length;s++)this.uh[s]=-1;this.uh[this.bg[0]]=0,this.jq=!0},l.prototype.EF=function(){return S.kz().add(this)},l.og=function(){return S.kz().$R()},l.prototype.tM=function(){var s=this.cc();return new d.ra(s,this)},l.prototype.jD=function(){for(var s=this.Aa=0,a=0;10>s;s++)0<=this.uh[s]&&(this.bg[a]=s,this.uh[s]=a,a++,this.Aa++);this.jq=!0},l.prototype.cc=function(){return this.jq&&(this.wl=this.An(),this.jq=!1),this.wl},l.prototype.Nb=function(s){if(s==null)return!1;if(s==this)return!0;if(!(s instanceof l)||s.Aa!=this.Aa)return!1;for(var a=0;a<this.Aa;a++)if(this.bg[a]!=s.bg[a])return!1;return this.jq==s.jq},l.prototype.GG=function(s){if(s.Aa!=this.Aa)return!1;for(var a=0;a<this.Aa;a++)if(this.bg[a]!=s.bg[a])return!1;return!0},l.Iw=function(s,a){for(var u=[],p=0;p<s.Aa;p++)u[p]=-1;p=0;for(var f=s.Aa;p<f;p++)u[p]=a.Pf(s.kd(p));return u},l.BR=function(s,a){return(s=new l(s)).re(a),s.EF()},l.CR=function(s,a){for(var u=null,p=0;10>p;p++)!s.hasAttribute(p)&&a.hasAttribute(p)&&(u==null&&(u=new l(s)),u.re(p));return u!=null?u.EF():s},l}(d.ra);d.ee=L;var S=function(){function h(){this.map=[];var l=new L;this.add(l),(l=new L).re(1),this.add(l)}return h.kz=function(){return h.bL},h.prototype.$R=function(){return h.ft},h.prototype.add=function(l){var s=l.cc();if(h.ft!=null&&h.ft.cc()==s&&l.GG(h.ft))return h.ft;if(h.Dw!=null&&h.Dw.cc()==s&&l.GG(h.Dw))return h.Dw;var a=null;return this.map[s]!==void 0&&(a=this.map[s]),a==null&&((a=l.tM()).Aa==1?h.ft=a:a.Aa==2&&a.kd(1)==1?h.Dw=a:this.map[s]=a),a},h.bL=new h,h}()}(Y||(Y={}));var W3={feet:9002,kilometers:9036,meters:9001,miles:9093,"nautical-miles":9030,yards:9096},J3={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109439,"square-yards":109442},Uu=new(function(){function d(){this.RM=50,this.np=new Map,this.gj=[]}return d.prototype.clear=function(){this.gj.length=0,this.np.clear()},d.prototype.delete=function(L){return!!this.np.delete(L)&&(this.gj.splice(this.gj.indexOf(L),1),!0)},d.prototype.get=function(L){var S=this.np.get(L);if(S!==void 0)return this.gj[0]!==L&&(this.gj.splice(this.gj.indexOf(L),1),this.gj.unshift(L)),S},d.prototype.has=function(L){return this.np.has(L)},d.prototype.set=function(L,S){return this.get(L)!==void 0&&this.delete(L),this.gj.unshift(L),this.np.set(L,S),this.oM(),this},d.prototype.oM=function(){for(;this.gj.length&&this.gj.length>this.RM;){var L=this.gj.pop();this.np.delete(L)}},d}()),Fe=((kr={}).convertJSONToGeometry=function(d){return Y.$b.fP(d)},kr.hasM=function(d){return d.hasAttribute(Y.Ih.M)},kr.hasZ=function(d){return d.hasAttribute(Y.Ih.Z)},kr.getPointX=function(d){return d.Lg()},kr.getPointY=function(d){return d.ih()},kr.getPointZ=function(d){return d.bS()},kr.getPointM=function(d){return d.zR()},kr.getXMin=function(d){return d.es()},kr.getYMin=function(d){return d.gs()},kr.getXMax=function(d){return d.ds()},kr.getYMax=function(d){return d.fs()},kr.getZExtent=function(d){return d.Tg(Y.Ih.Z,0)},kr.getMExtent=function(d){return d.Tg(Y.Ih.M,0)},kr.exportPaths=function(d){var L=[],S=d.da(),h=null,l=null,s=d.hasAttribute(Y.Ih.Z),a=d.hasAttribute(Y.Ih.M);s&&(h=d.ub(Y.Ih.Z)),a&&(l=d.ub(Y.Ih.M));for(var u=new Y.h,p=0;p<S;p++){for(var f=d.Ba(p),g=d.Ja(p),b=0,x=0,T=NaN,M=NaN,C=NaN,O=NaN,F=d.dc(p),P=[],G=f;G<f+g;G++){d.D(G,u),O=C=NaN;var q=[u.x,u.y];s&&(C=h.get(G),q.push(C)),a&&(O=l.get(G),q.push(O)),G==f&&F&&(b=u.x,x=u.y,T=C,M=O),P.push(q)}!F||b==u.x&&x==u.y&&(!s||isNaN(T)&&isNaN(C)||T==C)&&(!a||isNaN(M)&&isNaN(O)||M==O)||P.push(P[0].slice(0)),L.push(P)}return L},kr.exportPathsFlat=function(){},kr.exportPoints=function(d){var L=d.hasAttribute(Y.Ih.Z),S=d.hasAttribute(Y.Ih.M),h=null,l=null;L&&(h=d.ub(Y.Ih.Z)),S&&(l=d.ub(Y.Ih.M));for(var s=new Y.h,a=d.I(),u=[],p=0;p<a;p++){d.D(p,s);var f=[s.x,s.y];L&&f.push(h.get(p)),S&&f.push(l.get(p)),u.push(f)}return u},kr.exportPointsFlat=function(){},kr),hh=new Map;return function(){function d(){}return d.buffer=se,d.clip=$,d.contains=k,d.convexHull=ae,d.crosses=R,d.cut=A,d.densify=lt,d.difference=ue,d.disjoint=W,d.distance=N,d.equals=D,d.extendedSpatialReferenceInfo=I,d.generalize=Ze,d.geodesicArea=Sr,d.geodesicBuffer=ye,d.geodesicDensify=Ot,d.geodesicLength=Un,d.intersect=Ae,d.intersects=j,d.isSimple=ee,d.nearestCoordinate=ce,d.nearestVertex=xe,d.nearestVertices=Ne,d.offset=fe,d.overlaps=Q,d.planarArea=Wt,d.planarLength=tr,d.relate=K,d.simplify=ie,d.symmetricDifference=Ie,d.touches=z,d.union=Me,d.within=U,d.rotate=Y.Ex.rotate,d.flipHorizontal=Y.Ex.JQ,d.flipVertical=Y.Ex.KQ,d.intersectLinesToPoints=kT,d.ExtendedParams=Y.yC,d.clearDefaultSpatialReferenceTolerance=CT,d.changeDefaultSpatialReferenceTolerance=AT,d._enableProjection=ju,d._project=ch,d._getTransformation=iy,d._getTransformationBySuitability=zu,d}()}var i=t();i!==void 0&&(e.exports=i)}(wH)),wH.exports}var Fue=FUe();const kt=PUe(Fue),DUe=NUe({__proto__:null,default:kt},[Fue]),jUe=Object.freeze(Object.defineProperty({__proto__:null,G:kt,g:DUe},Symbol.toStringTag,{value:"Module"})),Jt={convertToGEGeometry:zUe,exportPoint:VUe,exportPolygon:UUe,exportPolyline:BUe,exportMultipoint:GUe,exportExtent:qUe};function zUe(e,t){if(t==null)return null;let i="cache"in t?t.cache._geVersion:void 0;return i==null&&(i=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=i)),i}function VUe(e,t,i){const r=e.hasZ(t),n=e.hasM(t),o=new st({x:e.getPointX(t),y:e.getPointY(t),spatialReference:i});return r&&(o.z=e.getPointZ(t)),n&&(o.m=e.getPointM(t)),o.cache._geVersion=t,o}function UUe(e,t,i){const r=new Os({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return r.cache._geVersion=t,r}function BUe(e,t,i){const r=new io({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return r.cache._geVersion=t,r}function GUe(e,t,i){const r=new Pg({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:i});return r.cache._geVersion=t,r}function qUe(e,t,i){const r=e.hasZ(t),n=e.hasM(t),o=new Ut({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:i});if(r){const c=e.getZExtent(t);o.zmin=c.vmin,o.zmax=c.vmax}if(n){const c=e.getMExtent(t);o.mmin=c.vmin,o.mmax=c.vmax}return o.cache._geVersion=t,o}const HUe=Object.freeze(Object.defineProperty({__proto__:null,hydratedAdapter:Jt},Symbol.toStringTag,{value:"Module"}));function ti(e){const t=Array.isArray(e)?e[0].spatialReference:e.spatialReference;return t?a3(rt,t):rt.WGS84}function WUe(e){return kt.extendedSpatialReferenceInfo(e)}function JUe(e,t){return kt.clip(Jt,ti(e),e,t)}function ZUe(e,t){return kt.cut(Jt,ti(e),e,t)}function KUe(e,t){return kt.contains(Jt,ti(e),e,t)}function YUe(e,t){return kt.crosses(Jt,ti(e),e,t)}function XUe(e,t,i){return kt.distance(Jt,ti(e),e,t,i)}function QUe(e,t){return kt.equals(Jt,ti(e),e,t)}function eBe(e,t){return kt.intersects(Jt,ti(e),e,t)}function tBe(e,t){return kt.touches(Jt,ti(e),e,t)}function iBe(e,t){return kt.within(Jt,ti(e),e,t)}function rBe(e,t){return kt.disjoint(Jt,ti(e),e,t)}function nBe(e,t){return kt.overlaps(Jt,ti(e),e,t)}function sBe(e,t,i){return kt.relate(Jt,ti(e),e,t,i)}function oBe(e){return kt.isSimple(Jt,ti(e),e)}function aBe(e){return kt.simplify(Jt,ti(e),e)}function lBe(e,t=!1){return kt.convexHull(Jt,ti(e),e,t)}function uBe(e,t){return kt.difference(Jt,ti(e),e,t)}function cBe(e,t){return kt.symmetricDifference(Jt,ti(e),e,t)}function hBe(e,t){return kt.intersect(Jt,ti(e),e,t)}function Due(e,t=null){return kt.union(Jt,ti(e),e,t)}function dBe(e,t,i,r,n,o){return kt.offset(Jt,ti(e),e,t,i,r,n,o)}function pBe(e,t,i,r=!1){return kt.buffer(Jt,ti(e),e,t,i,r)}function fBe(e,t,i,r,n,o){return kt.geodesicBuffer(Jt,ti(e),e,t,i,r,n,o)}function yBe(e,t,i=!0){return kt.nearestCoordinate(Jt,ti(e),e,t,i)}function mBe(e,t){return kt.nearestVertex(Jt,ti(e),e,t)}function gBe(e,t,i,r){return kt.nearestVertices(Jt,ti(e),e,t,i,r)}function sN(e){var t;return"xmin"in e?"center"in e?e.center:null:"x"in e?e:"extent"in e?((t=e.extent)==null?void 0:t.center)??null:null}function vBe(e,t,i){if(e==null)throw new _g;const r=e.spatialReference;if((i=i??sN(e))==null)throw new _g;const n=e.constructor.fromJSON(kt.rotate(e,t,i));return n.spatialReference=r,n}function wBe(e,t){if(e==null)throw new _g;const i=e.spatialReference;if((t=t??sN(e))==null)throw new _g;const r=e.constructor.fromJSON(kt.flipHorizontal(e,t));return r.spatialReference=i,r}function bBe(e,t){if(e==null)throw new _g;const i=e.spatialReference;if((t=t??sN(e))==null)throw new _g;const r=e.constructor.fromJSON(kt.flipVertical(e,t));return r.spatialReference=i,r}function _Be(e,t,i,r){return kt.generalize(Jt,ti(e),e,t,i,r)}function SBe(e,t,i){return kt.densify(Jt,ti(e),e,t,i)}function xBe(e,t,i,r=0){return kt.geodesicDensify(Jt,ti(e),e,t,i,r)}function IBe(e,t){return kt.planarArea(Jt,ti(e),e,t)}function TBe(e,t){return kt.planarLength(Jt,ti(e),e,t)}function $Be(e,t,i){return kt.geodesicArea(Jt,ti(e),e,t,i)}function EBe(e,t,i){return kt.geodesicLength(Jt,ti(e),e,t,i)}function MBe(e,t){return kt.intersectLinesToPoints(Jt,ti(e),e,t)}function ABe(e,t){kt.changeDefaultSpatialReferenceTolerance(e,t)}function CBe(e){kt.clearDefaultSpatialReferenceTolerance(e)}class _g extends Error{constructor(){super("Illegal Argument Exception")}}const qnt=Object.freeze(Object.defineProperty({__proto__:null,buffer:pBe,changeDefaultSpatialReferenceTolerance:ABe,clearDefaultSpatialReferenceTolerance:CBe,clip:JUe,contains:KUe,convexHull:lBe,crosses:YUe,cut:ZUe,densify:SBe,difference:uBe,disjoint:rBe,distance:XUe,equals:QUe,extendedSpatialReferenceInfo:WUe,flipHorizontal:wBe,flipVertical:bBe,generalize:_Be,geodesicArea:$Be,geodesicBuffer:fBe,geodesicDensify:xBe,geodesicLength:EBe,intersect:hBe,intersectLinesToPoints:MBe,intersects:eBe,isSimple:oBe,nearestCoordinate:yBe,nearestVertex:mBe,nearestVertices:gBe,offset:dBe,overlaps:nBe,planarArea:IBe,planarLength:TBe,relate:sBe,rotate:vBe,simplify:aBe,symmetricDifference:cBe,touches:tBe,union:Due,within:iBe},Symbol.toStringTag,{value:"Module"}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const kBe={icon:"icon",flipRtl:"flip-rtl"},jue={},s6={},zue={s:16,m:24,l:32};function Vue({icon:e,scale:t}){const i=zue[t],r=RBe(e),n=r.charAt(r.length-1)==="F";return`${n?r.substring(0,r.length-1):r}${i}${n?"F":""}`}async function LBe(e){const t=Vue(e),i=Uue(t);if(i)return i;s6[t]||(s6[t]=fetch(PL(`./assets/icon/${t}.json`)).then(n=>n.json()).catch(()=>(console.error(`"${t}" is not a valid calcite-ui-icon name`),"")));const r=await s6[t];return jue[t]=r,r}function OBe(e){return Uue(Vue(e))}function Uue(e){return jue[e]}function RBe(e){const t=!isNaN(Number(e.charAt(0))),i=e.split("-");if(i.length>0){const n=/[a-z]/i;e=i.map((o,c)=>o.replace(n,function(v,_){return c===0&&_===0?v:v.toUpperCase()})).join("")}return t?`i${e}`:e}const PBe=":host{display:inline-flex;color:var(--calcite-icon-color, var(--calcite-ui-icon-color, currentColor))}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}",NBe=PBe,FBe=Mg(class extends Eg{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.icon=null,this.flipRtl=!1,this.scale="m",this.textLabel=void 0,this.pathData=void 0,this.visible=!1}connectedCallback(){this.visible||this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}disconnectedCallback(){var t;(t=this.intersectionObserver)==null||t.disconnect(),this.intersectionObserver=null}render(){const{el:t,flipRtl:i,pathData:r,scale:n,textLabel:o}=this,c=UL(t),y=zue[n],v=!!o,_=[].concat(r||"");return We(Q4,{key:"724265acdc6fb528bf7b25d7ec445c73a63f4c8e","aria-hidden":cM(!v),"aria-label":v?o:null,role:v?"img":null},We("svg",{key:"864ee2d80bebd282543ba5d94c57f84b48a6204d","aria-hidden":"true",class:{[kBe.flipRtl]:c==="rtl"&&i,svg:!0},fill:"currentColor",height:"100%",viewBox:`0 0 ${y} ${y}`,width:"100%",xmlns:"http://www.w3.org/2000/svg"},_.map(I=>typeof I=="string"?We("path",{d:I}):We("path",{d:I.d,opacity:"opacity"in I?I.opacity:1}))))}async loadIconPathData(){const{icon:t,scale:i,visible:r}=this;if(!r3()||!t||!r)return;const n={icon:t,scale:i},o=OBe(n)||await LBe(n);t===this.icon&&(this.pathData=o)}waitUntilVisible(t){if(this.intersectionObserver=eI("intersection",i=>{i.forEach(r=>{r.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,t())})},{rootMargin:"50px"}),!this.intersectionObserver){t();return}this.intersectionObserver.observe(this.el)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{icon:["loadIconPathData"],scale:["loadIconPathData"]}}static get style(){return NBe}},[1,"calcite-icon",{icon:[513],flipRtl:[516,"flip-rtl"],scale:[513],textLabel:[1,"text-label"],pathData:[32],visible:[32]},void 0,{icon:["loadIconPathData"],scale:["loadIconPathData"]}]);function $T(){if(typeof customElements>"u")return;["calcite-icon"].forEach(t=>{switch(t){case"calcite-icon":customElements.get(t)||customElements.define(t,FBe);break}})}$T();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */var DBe=typeof global=="object"&&global&&global.Object===Object&&global;const Bue=DBe;var jBe=typeof self=="object"&&self&&self.Object===Object&&self,zBe=Bue||jBe||Function("return this")();const oN=zBe;var VBe=oN.Symbol;const Sg=VBe;var Gue=Object.prototype,UBe=Gue.hasOwnProperty,BBe=Gue.toString,Vv=Sg?Sg.toStringTag:void 0;function GBe(e){var t=UBe.call(e,Vv),i=e[Vv];try{e[Vv]=void 0;var r=!0}catch{}var n=BBe.call(e);return r&&(t?e[Vv]=i:delete e[Vv]),n}var qBe=Object.prototype,HBe=qBe.toString;function WBe(e){return HBe.call(e)}var JBe="[object Null]",ZBe="[object Undefined]",bH=Sg?Sg.toStringTag:void 0;function ET(e){return e==null?e===void 0?ZBe:JBe:bH&&bH in Object(e)?GBe(e):WBe(e)}function MT(e){return e!=null&&typeof e=="object"}var KBe="[object Symbol]";function que(e){return typeof e=="symbol"||MT(e)&&ET(e)==KBe}var YBe=/\s/;function XBe(e){for(var t=e.length;t--&&YBe.test(e.charAt(t)););return t}var QBe=/^\s+/;function eGe(e){return e&&e.slice(0,XBe(e)+1).replace(QBe,"")}function W2(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var _H=NaN,tGe=/^[-+]0x[0-9a-f]+$/i,iGe=/^0b[01]+$/i,rGe=/^0o[0-7]+$/i,nGe=parseInt;function SH(e){if(typeof e=="number")return e;if(que(e))return _H;if(W2(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=W2(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=eGe(e);var i=iGe.test(e);return i||rGe.test(e)?nGe(e.slice(2),i?2:8):tGe.test(e)?_H:+e}var sGe=function(){return oN.Date.now()};const o6=sGe;var oGe="Expected a function",aGe=Math.max,lGe=Math.min;function uGe(e,t,i){var r,n,o,c,y,v,_=0,I=!1,$=!1,A=!0;if(typeof e!="function")throw new TypeError(oGe);t=SH(t)||0,W2(i)&&(I=!!i.leading,$="maxWait"in i,o=$?aGe(SH(i.maxWait)||0,t):o,A="trailing"in i?!!i.trailing:A);function k(K){var ee=r,ie=n;return r=n=void 0,_=K,c=e.apply(ie,ee),c}function R(K){return _=K,y=setTimeout(j,t),I?k(K):c}function N(K){var ee=K-v,ie=K-_,ae=t-ee;return $?lGe(ae,o-ie):ae}function D(K){var ee=K-v,ie=K-_;return v===void 0||ee>=t||ee<0||$&&ie>=o}function j(){var K=o6();if(D(K))return z(K);y=setTimeout(j,N(K))}function z(K){return y=void 0,A&&r?k(K):(r=n=void 0,c)}function U(){y!==void 0&&clearTimeout(y),_=0,r=v=n=y=void 0}function W(){return y===void 0?c:z(o6())}function Q(){var K=o6(),ee=D(K);if(r=arguments,n=this,v=K,ee){if(y===void 0)return R(v);if($)return clearTimeout(y),y=setTimeout(j,t),k(v)}return y===void 0&&(y=setTimeout(j,t)),c}return Q.cancel=U,Q.flush=W,Q}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function cGe(e,t){for(var i=-1,r=e==null?0:e.length,n=Array(r);++i<r;)n[i]=t(e[i],i,e);return n}var hGe=Array.isArray;const Hue=hGe;var dGe=1/0,xH=Sg?Sg.prototype:void 0,IH=xH?xH.toString:void 0;function Wue(e){if(typeof e=="string")return e;if(Hue(e))return cGe(e,Wue)+"";if(que(e))return IH?IH.call(e):"";var t=e+"";return t=="0"&&1/e==-dGe?"-0":t}function pGe(e){return e}var fGe="[object AsyncFunction]",yGe="[object Function]",mGe="[object GeneratorFunction]",gGe="[object Proxy]";function vGe(e){if(!W2(e))return!1;var t=ET(e);return t==yGe||t==mGe||t==fGe||t==gGe}var wGe=9007199254740991,bGe=/^(?:0|[1-9]\d*)$/;function _Ge(e,t){var i=typeof e;return t=t??wGe,!!t&&(i=="number"||i!="symbol"&&bGe.test(e))&&e>-1&&e%1==0&&e<t}var SGe=9007199254740991;function Jue(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=SGe}function xGe(e){return e!=null&&Jue(e.length)&&!vGe(e)}var IGe=Object.prototype;function TGe(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||IGe;return e===i}function $Ge(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}var EGe="[object Arguments]";function TH(e){return MT(e)&&ET(e)==EGe}var Zue=Object.prototype,MGe=Zue.hasOwnProperty,AGe=Zue.propertyIsEnumerable,CGe=TH(function(){return arguments}())?TH:function(e){return MT(e)&&MGe.call(e,"callee")&&!AGe.call(e,"callee")};const kGe=CGe;function LGe(){return!1}var Kue=typeof exports=="object"&&exports&&!exports.nodeType&&exports,$H=Kue&&typeof module=="object"&&module&&!module.nodeType&&module,OGe=$H&&$H.exports===Kue,EH=OGe?oN.Buffer:void 0,RGe=EH?EH.isBuffer:void 0,PGe=RGe||LGe;const NGe=PGe;var FGe="[object Arguments]",DGe="[object Array]",jGe="[object Boolean]",zGe="[object Date]",VGe="[object Error]",UGe="[object Function]",BGe="[object Map]",GGe="[object Number]",qGe="[object Object]",HGe="[object RegExp]",WGe="[object Set]",JGe="[object String]",ZGe="[object WeakMap]",KGe="[object ArrayBuffer]",YGe="[object DataView]",XGe="[object Float32Array]",QGe="[object Float64Array]",eqe="[object Int8Array]",tqe="[object Int16Array]",iqe="[object Int32Array]",rqe="[object Uint8Array]",nqe="[object Uint8ClampedArray]",sqe="[object Uint16Array]",oqe="[object Uint32Array]",zi={};zi[XGe]=zi[QGe]=zi[eqe]=zi[tqe]=zi[iqe]=zi[rqe]=zi[nqe]=zi[sqe]=zi[oqe]=!0;zi[FGe]=zi[DGe]=zi[KGe]=zi[jGe]=zi[YGe]=zi[zGe]=zi[VGe]=zi[UGe]=zi[BGe]=zi[GGe]=zi[qGe]=zi[HGe]=zi[WGe]=zi[JGe]=zi[ZGe]=!1;function aqe(e){return MT(e)&&Jue(e.length)&&!!zi[ET(e)]}function lqe(e){return function(t){return e(t)}}var Yue=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Bb=Yue&&typeof module=="object"&&module&&!module.nodeType&&module,uqe=Bb&&Bb.exports===Yue,a6=uqe&&Bue.process,cqe=function(){try{var e=Bb&&Bb.require&&Bb.require("util").types;return e||a6&&a6.binding&&a6.binding("util")}catch{}}();const MH=cqe;var AH=MH&&MH.isTypedArray,hqe=AH?lqe(AH):aqe;const dqe=hqe;function pqe(e,t){var i=Hue(e),r=!i&&kGe(e),n=!i&&!r&&NGe(e),o=!i&&!r&&!n&&dqe(e),c=i||r||n||o,y=c?$Ge(e.length,String):[],v=y.length;for(var _ in e)c&&(_=="length"||n&&(_=="offset"||_=="parent")||o&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||_Ge(_,v))||y.push(_);return y}function fqe(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}var yqe=Object.prototype,mqe=yqe.hasOwnProperty;function gqe(e){if(!W2(e))return fqe(e);var t=TGe(e),i=[];for(var r in e)r=="constructor"&&(t||!mqe.call(e,r))||i.push(r);return i}function vqe(e){return xGe(e)?pqe(e):gqe(e)}function wqe(e){return e==null?"":Wue(e)}function bqe(e){return function(t,i,r){for(var n=-1,o=Object(t),c=r(t),y=c.length;y--;){var v=c[++n];if(i(o[v],v,o)===!1)break}return t}}var _qe=bqe();const Sqe=_qe;function xqe(e){return typeof e=="function"?e:pGe}var Xue=/[\\^$.*+?()[\]{}|]/g,Iqe=RegExp(Xue.source);function Tqe(e){return e=wqe(e),e&&Iqe.test(e)?e.replace(Xue,"\\$&"):e}function $qe(e,t){return e==null?e:Sqe(e,xqe(t),vqe)}const CH=(e,t,i)=>{const r=Tqe(t),n=new RegExp(r,"i");e.length===0&&console.warn(`No data was passed to the filter function.
    The data argument should be an array of objects`);const o=(c,y,v)=>{if(c!=null&&c.constant||c!=null&&c.filterDisabled)return!0;let _=!1;return $qe(c,(I,$)=>{typeof I=="function"||I==null||v&&!v.includes($)||(Array.isArray(I)||typeof I=="object"&&I!==null?o(I,y)&&(_=!0):y.test(I)&&(_=!0))}),_};return e.filter(c=>o(c,n,i))};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function Eqe(){const{disabled:e}=this;e||HTMLElement.prototype.click.call(this)}function Que(e){e.target.disabled&&e.preventDefault()}const ece=["mousedown","mouseup","click"];function tce(e){e.target.disabled&&(e.stopImmediatePropagation(),e.preventDefault())}const R4={capture:!0};function ice(e){if(e.disabled){e.el.setAttribute("aria-disabled","true"),e.el.contains(document.activeElement)&&document.activeElement.blur(),Mqe(e);return}Cqe(e),e.el.removeAttribute("aria-disabled")}function Mqe(e){e.el.click=Eqe,Aqe(e.el)}function Aqe(e){e.addEventListener("pointerdown",Que,R4),ece.forEach(t=>e.addEventListener(t,tce,R4))}function Cqe(e){delete e.el.click,kqe(e.el)}function kqe(e){e.removeEventListener("pointerdown",Que,R4),ece.forEach(t=>e.removeEventListener(t,tce,R4))}const Lqe={container:"interaction-container"},rce=({disabled:e},t)=>We("div",{class:Lqe.container,inert:e},...t);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const nce=new WeakMap,sce=new WeakMap;function oce(e){sce.set(e,new Promise(t=>nce.set(e,t)))}function ace(e){nce.get(e)()}function Oqe(e){return sce.get(e)}async function lce(e){if(await Oqe(e),!!r3())return VL(e),new Promise(t=>requestAnimationFrame(()=>t()))}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function Wnt(e){return e==="Enter"||e===" "}const aN=["0","1","2","3","4","5","6","7","8","9"];/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Rqe=new RegExp("\\.(0+)?$"),Pqe=new RegExp("0+$");class oi{constructor(t){if(t instanceof oi)return t;const[i,r]=Bqe(t).split(".").concat("");this.value=BigInt(i+r.padEnd(oi.DECIMALS,"0").slice(0,oi.DECIMALS))+BigInt(oi.ROUNDED&&r[oi.DECIMALS]>="5"),this.isNegative=t.charAt(0)==="-"}getIntegersAndDecimals(){const t=this.value.toString().replace("-","").padStart(oi.DECIMALS+1,"0"),i=t.slice(0,-oi.DECIMALS),r=t.slice(-oi.DECIMALS).replace(Pqe,"");return{integers:i,decimals:r}}toString(){const{integers:t,decimals:i}=this.getIntegersAndDecimals();return`${this.isNegative?"-":""}${t}${i.length?"."+i:""}`}formatToParts(t){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),n=t.numberFormatter.formatToParts(BigInt(i));return this.isNegative&&n.unshift({type:"minusSign",value:t.minusSign}),r.length&&(n.push({type:"decimal",value:t.decimal}),r.split("").forEach(o=>n.push({type:"fraction",value:o}))),n}format(t){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),n=`${this.isNegative?t.minusSign:""}${t.numberFormatter.format(BigInt(i))}`,o=r.length?`${t.decimal}${r.split("").map(c=>t.numberFormatter.format(Number(c))).join("")}`:"";return`${n}${o}`}add(t){return oi.fromBigInt(this.value+new oi(t).value)}subtract(t){return oi.fromBigInt(this.value-new oi(t).value)}multiply(t){return oi._divRound(this.value*new oi(t).value,oi.SHIFT)}divide(t){return oi._divRound(this.value*oi.SHIFT,new oi(t).value)}}oi.DECIMALS=100;oi.ROUNDED=!0;oi.SHIFT=BigInt("1"+"0".repeat(oi.DECIMALS));oi._divRound=(e,t)=>oi.fromBigInt(e/t+(oi.ROUNDED?e*BigInt(2)/t%BigInt(2):BigInt(0)));oi.fromBigInt=e=>Object.assign(Object.create(oi.prototype),{value:e,isNegative:e<BigInt(0)});function wu(e){return!(!e||isNaN(Number(e)))}function Nqe(e){return!e||!Gqe(e)?"":P4(e,t=>{let i=!1;const r=t.split("").filter((n,o)=>n.match(/\./g)&&!i?(i=!0,!0):n.match(/-/g)&&o===0?!0:aN.includes(n)).join("");return wu(r)?new oi(r).toString():""})}const uce=/^([-0])0+(?=\d)/,Fqe=/(?!^\.)\.$/,Dqe=/(?!^-)-/g,jqe=/^-\b0\b\.?0*$/,zqe=/0*$/,Vqe=e=>P4(e,t=>{const i=t.replace(Dqe,"").replace(Fqe,"").replace(uce,"$1");return wu(i)?jqe.test(i)?i:Uqe(i):t});function Uqe(e){const t=e.split(".")[1],i=new oi(e).toString(),[r,n]=i.split(".");return t&&n!==t?`${r}.${t}`:i}function P4(e,t){if(!e)return e;const i=e.toLowerCase().indexOf("e")+1;return i?e.replace(/[eE]*$/g,"").substring(0,i).concat(e.slice(i).replace(/[eE]/g,"")).split(/[eE]/).map((r,n)=>t(n===1?r.replace(/\./g,""):r)).join("e").replace(/^e/,"1e"):t(e)}function Bqe(e){const t=e.split(/[eE]/);if(t.length===1)return e;const i=+e;if(Number.isSafeInteger(i))return`${i}`;const r=e.charAt(0)==="-",n=+t[1],o=t[0].split("."),c=(r?o[0].substring(1):o[0])||"",y=o[1]||"",v=($,A)=>{const k=Math.abs(A)-$.length,R=k>0?`${"0".repeat(k)}${$}`:$;return`${R.slice(0,A)}.${R.slice(A)}`},_=($,A)=>{const k=A>$.length?`${$}${"0".repeat(A-$.length)}`:$;return`${k.slice(0,A)}.${k.slice(A)}`},I=n>0?`${c}${_(y,n)}`:`${v(c,n)}${y}`;return`${r?"-":""}${I.charAt(0)==="."?"0":""}${I.replace(Rqe,"").replace(uce,"")}`}function Gqe(e){return aN.some(t=>e.includes(t))}function qqe(e,t,i){const r=t.split(".")[1];if(r){const n=r.match(zqe)[0];if(n&&i.delocalize(e).length!==t.length&&r.indexOf("e")===-1){const o=i.decimal;return e=e.includes(o)?e:`${e}${o}`,e.padEnd(e.length+n.length,i.localize("0"))}}return e}const ap="en",Hqe=["ar","bg","bs","ca","cs","da","de","el",ap,"es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","no","nl","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],Wqe=["ar","bg","bs","ca","cs","da","de","de-AT","de-CH","el",ap,"en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","no","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],Jqe=["arab","arabext","latn"],cce=e=>Jqe.includes(e),l6=new Intl.NumberFormat().resolvedOptions().numberingSystem,hce=l6==="arab"||!cce(l6)?"latn":l6,Zqe=e=>cce(e)?e:hce;function dce(e,t="cldr"){const i=t==="cldr"?Wqe:Hqe;return e?i.includes(e)?e:(e=e.toLowerCase(),e==="nb"?"no":t==="t9n"&&e==="pt"?"pt-BR":(e.includes("-")&&(e=e.replace(/(\w+)-(\w+)/,(r,n,o)=>`${n}-${o.toUpperCase()}`),i.includes(e)||(e=e.split("-")[0])),e==="zh"?"zh-CN":i.includes(e)?e:(console.warn(`Translations for the "${e}" locale are not available and will fall back to the default, English (en).`),ap))):ap}const J2=new Set;function pce(e){Kqe(e),J2.size===0&&(Ex==null||Ex.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"],subtree:!0})),J2.add(e)}function Kqe(e){e.effectiveLocale=Yqe(e)}function fce(e){J2.delete(e),J2.size===0&&Ex.disconnect()}const Ex=eI("mutation",e=>{e.forEach(t=>{const i=t.target;J2.forEach(r=>{if(!$fe(i,r.el))return;const o=hp(r.el,"[lang]");if(!o){r.effectiveLocale=ap;return}const c=o.lang;r.effectiveLocale=o.hasAttribute("lang")&&c===""?ap:c})})});function Yqe(e){var t;return e.el.lang||((t=hp(e.el,"[lang]"))==null?void 0:t.lang)||document.documentElement.lang||ap}class Xqe{constructor(){this.delocalize=t=>this._numberFormatOptions?P4(t,i=>i.replace(new RegExp(`[${this._minusSign}]`,"g"),"-").replace(new RegExp(`[${this._group}]`,"g"),"").replace(new RegExp(`[${this._decimal}]`,"g"),".").replace(new RegExp(`[${this._digits.join("")}]`,"g"),this._getDigitIndex)):t,this.localize=t=>this._numberFormatOptions?P4(t,i=>wu(i.trim())?new oi(i.trim()).format(this).replace(new RegExp(`[${this._actualGroup}]`,"g"),this._group):i):t}get group(){return this._group}get decimal(){return this._decimal}get minusSign(){return this._minusSign}get digits(){return this._digits}get numberFormatter(){return this._numberFormatter}get numberFormatOptions(){return this._numberFormatOptions}set numberFormatOptions(t){if(t.locale=dce(t==null?void 0:t.locale),t.numberingSystem=Zqe(t==null?void 0:t.numberingSystem),!this._numberFormatOptions&&t.locale===ap&&t.numberingSystem===hce&&Object.keys(t).length===2||JSON.stringify(this._numberFormatOptions)===JSON.stringify(t))return;this._numberFormatOptions=t,this._numberFormatter=new Intl.NumberFormat(this._numberFormatOptions.locale,this._numberFormatOptions),this._digits=[...new Intl.NumberFormat(this._numberFormatOptions.locale,{useGrouping:!1,numberingSystem:this._numberFormatOptions.numberingSystem}).format(9876543210)].reverse();const i=new Map(this._digits.map((n,o)=>[n,o])),r=new Intl.NumberFormat(this._numberFormatOptions.locale,{numberingSystem:this._numberFormatOptions.numberingSystem}).formatToParts(-123456789e-1);this._actualGroup=r.find(n=>n.type==="group").value,this._group=this._actualGroup.trim().length===0||this._actualGroup==" "?"":this._actualGroup,this._decimal=r.find(n=>n.type==="decimal").value,this._minusSign=r.find(n=>n.type==="minusSign").value,this._getDigitIndex=n=>i.get(n)}}const Dl=new Xqe;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const MS={};async function Qqe(e,t){const i=`${t}_${e}`;return MS[i]||(MS[i]=fetch(PL(`./assets/${t}/t9n/messages_${e}.json`)).then(r=>(r.ok||kH(),r.json())).catch(()=>kH())),MS[i]}function kH(){throw new Error("could not fetch component message bundle")}function lN(e){e.messages={...e.defaultMessages,...e.messageOverrides}}function eHe(){}async function yce(e){e.defaultMessages=await mce(e,e.effectiveLocale),lN(e)}async function mce(e,t){if(!r3())return{};const{el:i}=e,n=i.tagName.toLowerCase().replace("calcite-","");return Qqe(dce(t,"t9n"),n)}async function gce(e,t){e.defaultMessages=await mce(e,t),lN(e)}function vce(e){e.onMessagesChange=tHe}function wce(e){e.onMessagesChange=eHe}function tHe(){lN(this)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const iHe=["calcite-input","calcite-input-number","calcite-input-text","calcite-text-area"];function rHe(e){return`${e.split("-").map((r,n)=>n===0?r:`${r[0].toUpperCase()}${r.slice(1)}`).join("")}${iHe.includes(e)?"Input":"Change"}`}const Fk="hidden-form-input";function uN(e){return"checked"in e}const Dk=new WeakMap,cN=new WeakSet;function nHe(e,t){if(hp(t.parentElement,"[form]"))return!0;const r="calciteInternalFormComponentRegister";let n=!1;return e.addEventListener(r,o=>{n=o.composedPath().some(c=>cN.has(c)),o.stopPropagation()},{once:!0}),t.dispatchEvent(new CustomEvent(r,{bubbles:!0,composed:!0})),n}function sHe(e,{status:t,message:i,icon:r}){"status"in e&&(e.status=t),"validationIcon"in e&&typeof e.validationIcon!="string"&&(e.validationIcon=r),"validationMessage"in e&&!e.validationMessage&&(e.validationMessage=i)}function bce(e){return e.nodeName==="CALCITE-RADIO-BUTTON"?hp(e,"calcite-radio-button-group"):e}const oHe=new CustomEvent("calciteInvalid",{bubbles:!0,composed:!0});function LH(e){var y;const t=e==null?void 0:e.target,i=t==null?void 0:t.validationMessage,r=bce(t==null?void 0:t.parentElement);if(!r)return;const n=(y=r==null?void 0:r.nodeName)==null?void 0:y.toLowerCase(),o=n==null?void 0:n.split("-");if(o.length<2||o[0]!=="calcite")return;e==null||e.preventDefault(),"validity"in r&&(r.validity=t==null?void 0:t.validity),r.dispatchEvent(oHe),sHe(r,{message:i,icon:!0,status:"invalid"});const c=rHe(n);r.addEventListener(c,()=>{"status"in r&&(r.status="idle"),"validationIcon"in r&&!r.validationIcon&&(r.validationIcon=!1),"validationMessage"in r&&r.validationMessage===i&&(r.validationMessage=""),"validity"in r&&(r.validity=t==null?void 0:t.validity)},{once:!0})}function aHe(e){const{formEl:t}=e;return t?(t.addEventListener("invalid",LH,!0),t.requestSubmit(),t.removeEventListener("invalid",LH,!0),requestAnimationFrame(()=>{const i=t.querySelectorAll("[status=invalid]");for(const r of i)if(r!=null&&r.validationMessage){r==null||r.setFocus();break}}),!0):!1}function Jnt(e){var t;(t=e.formEl)==null||t.reset()}function lHe(e){const{el:t,value:i}=e,r=uHe(e);if(!r||nHe(r,t))return;e.formEl=r,e.defaultValue=i,uN(e)&&(e.defaultChecked=e.checked);const n=(e.onFormReset||cHe).bind(e);r.addEventListener("reset",n),Dk.set(e.el,n),cN.add(t)}function uHe(e){const{el:t,form:i}=e;return i?GL(t,{id:i}):hp(t,"form")}function cHe(){if("status"in this&&(this.status="idle"),"validationIcon"in this&&(this.validationIcon=!1),"validationMessage"in this&&(this.validationMessage=""),uN(this)){this.checked=this.defaultChecked;return}this.value=this.defaultValue}function hHe(e){const{el:t,formEl:i}=e;if(!i)return;const r=Dk.get(t);i.removeEventListener("reset",r),Dk.delete(t),e.formEl=null,cN.delete(t)}const jk="calciteInternalHiddenInputInput",_ce=e=>{e.target.dispatchEvent(new CustomEvent(jk,{bubbles:!0}))},OH=e=>e.removeEventListener("input",_ce);function dHe(e){const{el:t,formEl:i,name:r,value:n}=e,{ownerDocument:o}=t,c=t.querySelectorAll(`input[slot="${Fk}"]`);if(!i||!r){c.forEach($=>{OH($),$.remove()});return}const y=Array.isArray(n)?n:[n],v=[],_=new Set;c.forEach($=>{const A=y.find(k=>k==$.value);A!=null?(_.add(A),RH(e,$,A)):v.push($)});let I;y.forEach($=>{if(_.has($))return;let A=v.pop();A||(A=o.createElement("input"),A.slot=Fk),I||(I=o.createDocumentFragment()),I.append(A),A.addEventListener("input",_ce),RH(e,A,$)}),I&&t.append(I),v.forEach($=>{OH($),$.remove()})}function RH(e,t,i){var _;const{defaultValue:r,disabled:n,form:o,name:c,required:y}=e;t.defaultValue=r,t.disabled=n,t.name=c,t.required=y,t.tabIndex=-1,o?t.setAttribute("form",o):t.removeAttribute("form"),uN(e)?(t.checked=e.checked,t.defaultChecked=e.defaultChecked,t.value=e.checked?i||"on":""):t.value=i||"",(_=e.syncHiddenFormInput)==null||_.call(e,t);const v=bce(e.el);if(v&&"validity"in v)for(const I in{...t==null?void 0:t.validity})v.validity[I]=t.validity[I]}const pHe=({component:e})=>(dHe(e),We("slot",{name:Fk}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function Uv(e){return e==="l"?"m":"s"}async function fHe(e){await(yHe(e)?e.componentOnReady():new Promise(t=>requestAnimationFrame(()=>t())))}function yHe(e){return typeof e.componentOnReady=="function"}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Sce="calciteInternalLabelClick",hN="calciteInternalLabelConnected",zk="calciteInternalLabelDisconnected",PH="calcite-label",xg=new WeakMap,Gb=new WeakMap,Z2=new WeakMap,N4=new WeakMap,p0=new Set,mHe=e=>{const{id:t}=e,i=t&&GL(e,{selector:`${PH}[for="${t}"]`});if(i)return i;const r=hp(e,PH);return!r||gHe(r,e)?null:r};function gHe(e,t){let i;const r="custom-element-ancestor-check",n=c=>{c.stopImmediatePropagation();const y=c.composedPath();i=y.slice(y.indexOf(t),y.indexOf(e))};return e.addEventListener(r,n,{once:!0}),t.dispatchEvent(new CustomEvent(r,{composed:!0,bubbles:!0})),e.removeEventListener(r,n),i.filter(c=>c!==t&&c!==e).filter(c=>{var y;return(y=c.tagName)==null?void 0:y.includes("-")}).length>0}function dN(e){if(!e)return;const t=mHe(e.el);if(Gb.has(t)&&t===e.labelEl||!t&&p0.has(e))return;const i=bHe.bind(e);if(t){e.labelEl=t;const r=xg.get(t)||[];r.push(e),xg.set(t,r.sort(xce)),Gb.has(e.labelEl)||(Gb.set(e.labelEl,FH),e.labelEl.addEventListener(Sce,FH)),p0.delete(e),document.removeEventListener(hN,Z2.get(e)),N4.set(e,i),document.addEventListener(zk,i)}else p0.has(e)||(i(),document.removeEventListener(zk,N4.get(e)))}function vHe(e){if(!e||(p0.delete(e),document.removeEventListener(hN,Z2.get(e)),document.removeEventListener(zk,N4.get(e)),Z2.delete(e),N4.delete(e),!e.labelEl))return;const t=xg.get(e.labelEl);t.length===1&&(e.labelEl.removeEventListener(Sce,Gb.get(e.labelEl)),Gb.delete(e.labelEl)),xg.set(e.labelEl,t.filter(i=>i!==e).sort(xce)),e.labelEl=null}function xce(e,t){return jfe(e.el,t.el)?-1:1}function NH(e){var t,i;return e.label||((i=(t=e.labelEl)==null?void 0:t.textContent)==null?void 0:i.trim())||""}function FH(e){const t=e.detail.sourceEvent.target,i=xg.get(this),r=i.find(c=>c.el===t);if(i.includes(r))return;const o=i[0];o.disabled||o.onLabelClick(e)}function wHe(){p0.has(this)&&dN(this)}function bHe(){p0.add(this);const e=Z2.get(this)||wHe.bind(this);Z2.set(this,e),document.addEventListener(hN,e)}async function Znt(e){var r;if(await fHe(e),xg.has(e))return;const i=(r=e.ownerDocument)==null?void 0:r.getElementById(e.for);i&&requestAnimationFrame(()=>{for(const n of p0)if(n.el===i){dN(n);break}})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const _He={validationContainer:"validation-container"},SHe=({scale:e,status:t,id:i,icon:r,message:n})=>We("div",{class:_He.validationContainer},We("calcite-input-message",{"aria-live":"polite",icon:r,id:i,scale:e,status:t},n));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const xHe=["date","datetime-local","month","number","range","time","week"],IHe=["email","password","search","tel","text","url"],THe=["email","password","search","tel","text","textarea","url"];function Ry(e,t,i,r){const n=i.toLowerCase(),o=e[i];r&&o!=null?t.setAttribute(n,`${o}`):t.removeAttribute(n)}function $He(e,t,i){i.type=e==="textarea"?"text":e;const r=xHe.includes(e),n=t;Ry(n,i,"min",r),Ry(n,i,"max",r),Ry(n,i,"step",r);const o=THe.includes(e),c=t;Ry(c,i,"minLength",o),Ry(c,i,"maxLength",o);const y=IHe.includes(e);Ry(c,i,"pattern",y)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const DH={valid:"check-circle",invalid:"exclamation-mark-triangle",idle:"information"},EHe=":host{box-sizing:border-box;display:flex;block-size:auto;inline-size:100%;align-items:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);opacity:1;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;--calcite-input-message-spacing-value:0.25rem;margin-block-start:var(--calcite-input-message-spacing-value)}.calcite-input-message-icon{pointer-events:none;display:inline-flex;flex-shrink:0;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;margin-inline-end:0.5rem}:host([status=invalid]) .calcite-input-message-icon{color:var(--calcite-color-status-danger)}:host([status=warning]) .calcite-input-message-icon{color:var(--calcite-color-status-warning)}:host([status=valid]) .calcite-input-message-icon{color:var(--calcite-color-status-success)}:host([status=idle]) .calcite-input-message-icon{color:var(--calcite-color-brand)}:host([scale=s]){font-size:var(--calcite-font-size--3);line-height:0.75rem}:host([scale=m]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=l]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([hidden]){display:none}[hidden]{display:none}",MHe=EHe,AHe=Mg(class extends Eg{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.icon=void 0,this.iconFlipRtl=!1,this.scale="m",this.status="idle"}handleIconEl(){this.requestedIcon=a9(DH,this.icon,this.status)}connectedCallback(){this.requestedIcon=a9(DH,this.icon,this.status)}render(){const t=this.el.hidden;return We(Q4,{key:"c7d1b37721cec28dee1020b81ff66dee7fc8bc44","calcite-hydrated-hidden":t},this.renderIcon(this.requestedIcon),We("slot",{key:"7147d81e906765c154b4a61e31706a72c1ef3ae0"}))}renderIcon(t){if(t)return We("calcite-icon",{class:"calcite-input-message-icon",flipRtl:this.iconFlipRtl,icon:t,scale:"s"})}get el(){return this}static get watchers(){return{status:["handleIconEl"],icon:["handleIconEl"]}}static get style(){return MHe}},[1,"calcite-input-message",{icon:[520],iconFlipRtl:[516,"icon-flip-rtl"],scale:[513],status:[513]},void 0,{status:["handleIconEl"],icon:["handleIconEl"]}]);function pN(){if(typeof customElements>"u")return;["calcite-input-message","calcite-icon"].forEach(t=>{switch(t){case"calcite-input-message":customElements.get(t)||customElements.define(t,AHe);break;case"calcite-icon":customElements.get(t)||$T();break}})}pN();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const CHe=":host{position:relative;display:block;inline-size:100%}.track,.bar{position:absolute;inset-block-start:0px;block-size:2px}.track{z-index:var(--calcite-z-index);inline-size:100%;overflow:hidden;background-color:var(--calcite-progress-background-color, var(--calcite-color-border-3))}.bar{z-index:var(--calcite-z-index);background-color:var(--calcite-progress-fill-color, var(--calcite-color-brand))}@media (forced-colors: active){.track{background-color:highlightText}.bar{background-color:linkText}}.indeterminate{inline-size:20%;animation:looping-progress-bar-ani calc(var(--calcite-internal-animation-timing-medium) / var(--calcite-internal-duration-factor) * 11 / var(--calcite-internal-duration-factor)) linear infinite}.indeterminate.calcite--rtl{animation-name:looping-progress-bar-ani-rtl}.reversed{animation-direction:reverse}.text{padding-inline:0px;padding-block:1rem 0px;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-progress-text-color, var(--calcite-color-text-2))}@keyframes looping-progress-bar-ani{0%{transform:translate3d(-100%, 0, 0)}50%{inline-size:40%}100%{transform:translate3d(600%, 0, 0)}}@keyframes looping-progress-bar-ani-rtl{0%{transform:translate3d(100%, 0, 0)}50%{inline-size:40%}100%{transform:translate3d(-600%, 0, 0)}}:host([hidden]){display:none}[hidden]{display:none}",kHe=CHe,LHe=Mg(class extends Eg{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="determinate",this.value=0,this.label=void 0,this.text=void 0,this.reversed=!1}render(){const i=this.type==="determinate"?{width:`${this.value*100}%`}:{},r=UL(this.el);return We("div",{key:"92597fefec948e4494425db28cd87bfad3cc76f8","aria-label":this.label||this.text,"aria-valuemax":1,"aria-valuemin":0,"aria-valuenow":this.value,role:"progressbar"},We("div",{key:"d2a8ec085909b4bd35f443d0e831d645fb159317",class:"track"},We("div",{key:"2dd26e56a0f344d02f1b4068167f61d9da4d2cbd",class:{bar:!0,indeterminate:this.type==="indeterminate",[yZ.rtl]:r==="rtl",reversed:this.reversed},style:i})),this.text?We("div",{class:"text"},this.text):null)}get el(){return this}static get style(){return kHe}},[1,"calcite-progress",{type:[513],value:[2],label:[1],text:[1],reversed:[516]}]);function fN(){if(typeof customElements>"u")return;["calcite-progress"].forEach(t=>{switch(t){case"calcite-progress":customElements.get(t)||customElements.define(t,LHe);break}})}fN();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Xn={loader:"loader",clearButton:"clear-button",editingEnabled:"editing-enabled",inlineChild:"inline-child",inputIcon:"icon",prefix:"prefix",suffix:"suffix",numberButtonWrapper:"number-button-wrapper",buttonItemHorizontal:"number-button-item--horizontal",wrapper:"element-wrapper",inputWrapper:"wrapper",actionWrapper:"action-wrapper",resizeIconWrapper:"resize-icon-wrapper",numberButtonItem:"number-button-item"},u6={validationMessage:"inputValidationMessage"},jH={tel:"phone",password:"lock",email:"email-address",date:"calendar",time:"clock",search:"search"},OHe={action:"action"},RHe=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([scale=s]) input,:host([scale=s]) .prefix,:host([scale=s]) .suffix{block-size:1.5rem;padding-inline:0.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) textarea{block-size:1.5rem;min-block-size:1.5rem}:host([scale=s]) .number-button-wrapper,:host([scale=s]) .action-wrapper calcite-button,:host([scale=s]) .action-wrapper calcite-button button{block-size:1.5rem}:host([scale=s]) input[type=file]{block-size:1.5rem}:host([scale=s]) .clear-button{min-block-size:1.5rem;min-inline-size:1.5rem}:host([scale=s]) textarea{block-size:auto;padding-block:0.25rem;padding-inline:0.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]) input,:host([scale=m]) .prefix,:host([scale=m]) .suffix{block-size:2rem;padding-inline:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) textarea{min-block-size:2rem}:host([scale=m]) .number-button-wrapper,:host([scale=m]) .action-wrapper calcite-button,:host([scale=m]) .action-wrapper calcite-button button{block-size:2rem}:host([scale=m]) input[type=file]{block-size:2rem}:host([scale=m]) .clear-button{min-block-size:2rem;min-inline-size:2rem}:host([scale=m]) textarea{block-size:auto;padding-block:0.5rem;padding-inline:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]) input,:host([scale=l]) .prefix,:host([scale=l]) .suffix{block-size:2.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) textarea{min-block-size:2.75rem}:host([scale=l]) .number-button-wrapper,:host([scale=l]) .action-wrapper calcite-button,:host([scale=l]) .action-wrapper calcite-button button{block-size:2.75rem}:host([scale=l]) input[type=file]{block-size:2.75rem}:host([scale=l]) .clear-button{min-block-size:2.75rem;min-inline-size:2.75rem}:host([scale=l]) textarea{block-size:auto;padding-block:0.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([disabled]) textarea{resize:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}textarea,input{transition:var(--calcite-animation-timing), block-size 0, outline-offset 0s;-webkit-appearance:none;position:relative;margin:0px;box-sizing:border-box;display:flex;max-block-size:100%;inline-size:100%;max-inline-size:100%;flex:1 1 0%;border-radius:0px;background-color:var(--calcite-color-foreground-1);font-family:inherit;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-1)}input[type=search]::-webkit-search-decoration{-webkit-appearance:none}input,textarea{text-overflow:ellipsis;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);color:var(--calcite-color-text-1)}input:placeholder-shown,textarea:placeholder-shown{text-overflow:ellipsis}input:focus,textarea:focus{border-color:var(--calcite-color-brand);color:var(--calcite-color-text-1)}input[readonly],textarea[readonly]{background-color:var(--calcite-color-background);font-weight:var(--calcite-font-weight-medium)}input[readonly]:focus,textarea[readonly]:focus{color:var(--calcite-color-text-1)}calcite-icon{color:var(--calcite-color-text-3)}textarea,input{outline-color:transparent}textarea:focus,input:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host([status=invalid]) input,:host([status=invalid]) textarea{border-color:var(--calcite-color-status-danger)}:host([status=invalid]) input:focus,:host([status=invalid]) textarea:focus{outline:2px solid var(--calcite-color-status-danger);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host([scale=s]) .icon{inset-inline-start:0.5rem}:host([scale=m]) .icon{inset-inline-start:0.75rem}:host([scale=l]) .icon{inset-inline-start:1rem}:host([icon][scale=s]) input{padding-inline-start:2rem}:host([icon][scale=m]) input{padding-inline-start:2.5rem}:host([icon][scale=l]) input{padding-inline-start:3.5rem}.element-wrapper{position:relative;order:3;display:inline-flex;flex:1 1 0%;align-items:center}.icon{pointer-events:none;position:absolute;display:block;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.icon,.resize-icon-wrapper{z-index:var(--calcite-z-index)}input[type=text]::-ms-clear,input[type=text]::-ms-reveal{display:none;block-size:0px;inline-size:0px}input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration,input[type=date]::-webkit-clear-button,input[type=time]::-webkit-clear-button{display:none}.clear-button{pointer-events:initial;order:4;margin:0px;box-sizing:border-box;display:flex;min-block-size:100%;cursor:pointer;align-items:center;justify-content:center;align-self:stretch;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-foreground-1);outline-color:transparent;border-inline-start-width:0px}.clear-button:hover{background-color:var(--calcite-color-foreground-2);transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.clear-button:hover calcite-icon{color:var(--calcite-color-text-1);transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.clear-button:active{background-color:var(--calcite-color-foreground-3)}.clear-button:active calcite-icon{color:var(--calcite-color-text-1)}.clear-button:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.clear-button:disabled{opacity:var(--calcite-opacity-disabled)}.loader{inset-block-start:1px;inset-inline:1px;pointer-events:none;position:absolute;display:block}.action-wrapper{order:7;display:flex}.prefix,.suffix{box-sizing:border-box;display:flex;block-size:auto;min-block-size:100%;-webkit-user-select:none;user-select:none;align-content:center;align-items:center;overflow-wrap:break-word;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-background);font-weight:var(--calcite-font-weight-medium);line-height:1;color:var(--calcite-color-text-2)}.prefix{order:2;border-inline-end-width:0px;inline-size:var(--calcite-input-prefix-size, auto)}.suffix{order:5;border-inline-start-width:0px;inline-size:var(--calcite-input-suffix-size, auto)}:host([alignment=start]) textarea,:host([alignment=start]) input{text-align:start}:host([alignment=end]) textarea,:host([alignment=end]) input{text-align:end}input[type=number]{-moz-appearance:textfield}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0px}.number-button-wrapper{pointer-events:none;order:6;box-sizing:border-box;display:flex;flex-direction:column;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}:host([number-button-type=vertical]) .wrapper{flex-direction:row;display:flex}:host([number-button-type=vertical]) input,:host([number-button-type=vertical]) textarea{order:2}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=down] calcite-icon{transform:rotate(-90deg)}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=up] calcite-icon{transform:rotate(-90deg)}.number-button-item.number-button-item--horizontal[data-adjustment=down],.number-button-item.number-button-item--horizontal[data-adjustment=up]{order:1;max-block-size:100%;min-block-size:100%;align-self:stretch}.number-button-item.number-button-item--horizontal[data-adjustment=down] calcite-icon,.number-button-item.number-button-item--horizontal[data-adjustment=up] calcite-icon{transform:rotate(90deg)}.number-button-item.number-button-item--horizontal[data-adjustment=down]{border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);border-inline-end-width:0px}.number-button-item.number-button-item--horizontal[data-adjustment=down]:hover{background-color:var(--calcite-color-foreground-2)}.number-button-item.number-button-item--horizontal[data-adjustment=down]:hover calcite-icon{color:var(--calcite-color-text-1)}.number-button-item.number-button-item--horizontal[data-adjustment=up]{order:5}.number-button-item.number-button-item--horizontal[data-adjustment=up]:hover{background-color:var(--calcite-color-foreground-2)}.number-button-item.number-button-item--horizontal[data-adjustment=up]:hover calcite-icon{color:var(--calcite-color-text-1)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]:hover{background-color:var(--calcite-color-foreground-2)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]:hover calcite-icon{color:var(--calcite-color-text-1)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=up]:hover{background-color:var(--calcite-color-foreground-2)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=up]:hover calcite-icon{color:var(--calcite-color-text-1)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]{border-block-start-width:0px}.number-button-item{max-block-size:50%;min-block-size:50%;pointer-events:initial;margin:0px;box-sizing:border-box;display:flex;cursor:pointer;align-items:center;align-self:center;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-foreground-1);padding-block:0px;padding-inline:0.5rem;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;border-inline-start-width:0px}.number-button-item calcite-icon{pointer-events:none;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.number-button-item:focus{background-color:var(--calcite-color-foreground-2)}.number-button-item:focus calcite-icon{color:var(--calcite-color-text-1)}.number-button-item:active{background-color:var(--calcite-color-foreground-3)}.number-button-item:disabled{pointer-events:none}.wrapper{position:relative;display:flex;flex-direction:row;align-items:center}:input::-webkit-calendar-picker-indicator{display:none}input[type=date]::-webkit-input-placeholder{visibility:hidden !important}textarea::-webkit-resizer{position:absolute;inset-block-end:0px;box-sizing:border-box;padding-block:0px;padding-inline:0.25rem;inset-inline-end:0}.resize-icon-wrapper{inset-block-end:2px;inset-inline-end:2px;pointer-events:none;position:absolute;block-size:0.75rem;inline-size:0.75rem;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-3)}.resize-icon-wrapper calcite-icon{inset-block-end:0.25rem;inset-inline-end:0.25rem;transform:rotate(-45deg)}.calcite--rtl .resize-icon-wrapper calcite-icon{transform:rotate(45deg)}:host([type=color]) input{padding:0.25rem}:host([type=file]) input{cursor:pointer;border-width:1px;border-style:dashed;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-foreground-1);text-align:center}:host([type=file][scale=s]) input{padding-block:1px;padding-inline:0.5rem}:host([type=file][scale=m]) input{padding-block:0.25rem;padding-inline:0.75rem}:host([type=file][scale=l]) input{padding-block:0.5rem;padding-inline:1rem}:host(.no-bottom-border) input{border-block-end-width:0px}:host(.border-top-color-one) input{border-block-start-color:var(--calcite-color-border-1)}input.inline-child{background-color:transparent;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}input.inline-child .editing-enabled{background-color:inherit}input.inline-child:not(.editing-enabled){display:flex;cursor:pointer;text-overflow:ellipsis;border-color:transparent;padding-inline-start:0}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:0.5rem}:host([scale=s]) .validation-container{padding-block-start:0.25rem}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}:host([hidden]){display:none}[hidden]{display:none}`,PHe=RHe,NHe=Mg(class extends Eg{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalInputFocus=Wv(this,"calciteInternalInputFocus",6),this.calciteInternalInputBlur=Wv(this,"calciteInternalInputBlur",6),this.calciteInputInput=Wv(this,"calciteInputInput",7),this.calciteInputChange=Wv(this,"calciteInputChange",6),this.childElType="input",this.previousValueOrigin="initial",this.mutationObserver=eI("mutation",()=>this.setDisabledAction()),this.userChangedValue=!1,this.keyDownHandler=t=>{this.readOnly||this.disabled||t.defaultPrevented||(this.isClearable&&t.key==="Escape"&&(this.clearInputValue(t),t.preventDefault()),t.key==="Enter"&&aHe(this)&&t.preventDefault())},this.clearInputValue=t=>{this.setValue({committing:!0,nativeEvent:t,origin:"user",value:""})},this.emitChangeIfUserModified=()=>{this.previousValueOrigin==="user"&&this.value!==this.previousEmittedValue&&(this.calciteInputChange.emit(),this.setPreviousEmittedValue(this.value))},this.inputBlurHandler=()=>{window.clearInterval(this.nudgeNumberValueIntervalId),this.calciteInternalInputBlur.emit(),this.emitChangeIfUserModified()},this.clickHandler=t=>{if(this.disabled)return;const i=t.composedPath();!i.includes(this.inputWrapperEl)||i.includes(this.actionWrapperEl)||this.setFocus()},this.inputFocusHandler=()=>{this.calciteInternalInputFocus.emit()},this.inputChangeHandler=()=>{this.type==="file"&&(this.files=this.childEl.files)},this.inputInputHandler=t=>{this.disabled||this.readOnly||this.setValue({nativeEvent:t,origin:"user",value:t.target.value})},this.inputKeyDownHandler=t=>{this.disabled||this.readOnly||t.key==="Enter"&&this.emitChangeIfUserModified()},this.inputNumberInputHandler=t=>{if(this.disabled||this.readOnly||this.value==="Infinity"||this.value==="-Infinity")return;const i=t.target.value;Dl.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator};const r=Dl.delocalize(i);t.inputType==="insertFromPaste"?(wu(r)||t.preventDefault(),this.setValue({nativeEvent:t,origin:"user",value:Nqe(r)}),this.childNumberEl.value=this.displayedValue):this.setValue({nativeEvent:t,origin:"user",value:r})},this.inputNumberKeyDownHandler=t=>{if(this.type!=="number"||this.disabled||this.readOnly)return;if(this.value==="Infinity"||this.value==="-Infinity"){t.preventDefault(),(t.key==="Backspace"||t.key==="Delete")&&this.clearInputValue(t);return}if(t.key==="ArrowUp"){t.preventDefault(),this.nudgeNumberValue("up",t);return}if(t.key==="ArrowDown"){this.nudgeNumberValue("down",t);return}const i=[...aN,"ArrowLeft","ArrowRight","Backspace","Delete","Enter","Escape","Tab"];if(t.altKey||t.ctrlKey||t.metaKey)return;const r=t.shiftKey&&t.key==="Tab";if(i.includes(t.key)||r){t.key==="Enter"&&this.emitChangeIfUserModified();return}Dl.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},!(t.key===Dl.decimal&&(!this.value&&!this.childNumberEl.value||this.value&&this.childNumberEl.value.indexOf(Dl.decimal)===-1))&&(/[eE]/.test(t.key)&&(!this.value&&!this.childNumberEl.value||this.value&&!/[eE]/.test(this.childNumberEl.value))||t.key==="-"&&(!this.value&&!this.childNumberEl.value||this.value&&this.childNumberEl.value.split("-").length<=2)||t.preventDefault())},this.nudgeNumberValue=(t,i)=>{if(i instanceof KeyboardEvent&&i.repeat||this.type!=="number")return;const r=this.maxString?parseFloat(this.maxString):null,n=this.minString?parseFloat(this.minString):null,o=150;this.incrementOrDecrementNumberValue(t,r,n,i),this.nudgeNumberValueIntervalId&&window.clearInterval(this.nudgeNumberValueIntervalId);let c=!0;this.nudgeNumberValueIntervalId=window.setInterval(()=>{if(c){c=!1;return}this.incrementOrDecrementNumberValue(t,r,n,i)},o)},this.numberButtonPointerUpAndOutHandler=()=>{window.clearInterval(this.nudgeNumberValueIntervalId)},this.numberButtonPointerDownHandler=t=>{if(!Dfe(t))return;t.preventDefault();const i=t.target.dataset.adjustment;this.disabled||this.nudgeNumberValue(i,t)},this.onHiddenFormInputInput=t=>{t.target.name===this.name&&this.setValue({value:t.target.value,origin:"direct"}),this.setFocus(),t.stopPropagation()},this.setChildElRef=t=>{this.childEl=t},this.setChildNumberElRef=t=>{this.childNumberEl=t},this.setInputValue=t=>{this.type==="text"&&!this.childEl||this.type==="number"&&!this.childNumberEl||(this[`child${this.type==="number"?"Number":""}El`].value=t)},this.setPreviousEmittedValue=t=>{this.previousEmittedValue=this.normalizeValue(t)},this.setPreviousValue=t=>{this.previousValue=this.normalizeValue(t)},this.setValue=({committing:t=!1,nativeEvent:i,origin:r,previousValue:n,value:o})=>{var c,y;if(this.setPreviousValue(n??this.value),this.previousValueOrigin=r,this.type==="number"){Dl.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator,signDisplay:"never"};const v=((c=this.previousValue)==null?void 0:c.length)>o.length||((y=this.value)==null?void 0:y.length)>o.length,_=o.charAt(o.length-1)===".",I=_&&v?o:Vqe(o),$=o&&!I?wu(this.previousValue)?this.previousValue:"":I;let A=Dl.localize($);r!=="connected"&&!_&&(A=qqe(A,$,Dl)),this.displayedValue=_&&v?`${A}${Dl.decimal}`:A,this.userChangedValue=r==="user"&&this.value!==$,this.value=["-","."].includes($)?"":$}else this.userChangedValue=r==="user"&&this.value!==o,this.value=o;r==="direct"&&(this.setInputValue(o),this.previousEmittedValue=o),i&&(this.calciteInputInput.emit().defaultPrevented?(this.value=this.previousValue,this.displayedValue=this.type==="number"?Dl.localize(this.previousValue):this.previousValue):t&&this.emitChangeIfUserModified())},this.inputKeyUpHandler=()=>{window.clearInterval(this.nudgeNumberValueIntervalId)},this.alignment="start",this.autofocus=void 0,this.clearable=!1,this.disabled=!1,this.enterKeyHint=void 0,this.form=void 0,this.groupSeparator=!1,this.icon=void 0,this.iconFlipRtl=!1,this.inputMode=void 0,this.label=void 0,this.loading=!1,this.numberingSystem=void 0,this.localeFormat=!1,this.max=void 0,this.min=void 0,this.maxLength=void 0,this.minLength=void 0,this.validationMessage=void 0,this.validationIcon=void 0,this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.name=void 0,this.numberButtonType="vertical",this.placeholder=void 0,this.prefixText=void 0,this.readOnly=!1,this.required=!1,this.scale="m",this.status="idle",this.step=void 0,this.autocomplete=void 0,this.pattern=void 0,this.accept=void 0,this.multiple=!1,this.suffixText=void 0,this.editingEnabled=!1,this.type="text",this.value="",this.files=void 0,this.messages=void 0,this.messageOverrides=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.displayedValue=void 0,this.slottedActionElDisabledInternally=!1}handleGlobalAttributesChanged(){VL(this)}disabledWatcher(){this.setDisabledAction()}maxWatcher(){var t;this.maxString=((t=this.max)==null?void 0:t.toString())||null}minWatcher(){var t;this.minString=((t=this.min)==null?void 0:t.toString())||null}onMessagesChange(){}valueWatcher(t,i){if(!this.userChangedValue){if(this.type==="number"&&(t==="Infinity"||t==="-Infinity")){this.displayedValue=t,this.previousEmittedValue=t;return}this.setValue({origin:"direct",previousValue:i,value:t==null||t==""?"":this.type==="number"?wu(t)?t:this.previousValue||"":t}),this.warnAboutInvalidNumberValue(t)}this.userChangedValue=!1}updateRequestedIcon(){this.requestedIcon=a9(jH,this.icon,this.type)}get isClearable(){var t;return!this.isTextarea&&(this.clearable||this.type==="search")&&((t=this.value)==null?void 0:t.length)>0}get isTextarea(){return this.childElType==="textarea"}effectiveLocaleChange(){gce(this,this.effectiveLocale)}connectedCallback(){var t;pce(this),vce(this),this.inlineEditableEl=this.el.closest("calcite-inline-editable"),this.inlineEditableEl&&(this.editingEnabled=this.inlineEditableEl.editingEnabled||!1),dN(this),lHe(this),(t=this.mutationObserver)==null||t.observe(this.el,{childList:!0}),this.setDisabledAction(),this.el.addEventListener(jk,this.onHiddenFormInputInput)}disconnectedCallback(){var t;vHe(this),hHe(this),fce(this),wce(this),(t=this.mutationObserver)==null||t.disconnect(),this.el.removeEventListener(jk,this.onHiddenFormInputInput)}async componentWillLoad(){var t,i;oce(this),this.childElType=this.type==="textarea"?"textarea":"input",this.maxString=(t=this.max)==null?void 0:t.toString(),this.minString=(i=this.min)==null?void 0:i.toString(),this.requestedIcon=a9(jH,this.icon,this.type),await yce(this),this.setPreviousEmittedValue(this.value),this.setPreviousValue(this.value),this.type==="number"&&(this.value==="Infinity"||this.value==="-Infinity"?(this.displayedValue=this.value,this.previousEmittedValue=this.value):(this.warnAboutInvalidNumberValue(this.value),this.setValue({origin:"connected",value:wu(this.value)?this.value:""})))}componentDidLoad(){ace(this)}componentShouldUpdate(t,i,r){return this.type==="number"&&r==="value"&&t&&!wu(t)?(this.setValue({origin:"reset",value:i}),!1):!0}componentDidRender(){ice(this)}async setFocus(){var t,i;await lce(this),this.type==="number"?(t=this.childNumberEl)==null||t.focus():(i=this.childEl)==null||i.focus()}async selectText(){var t,i;this.type==="number"?(t=this.childNumberEl)==null||t.select():(i=this.childEl)==null||i.select()}onLabelClick(){this.setFocus()}incrementOrDecrementNumberValue(t,i,r,n){const{value:o}=this;if(o==="Infinity"||o==="-Infinity")return;const c=t==="up"?1:-1,y=this.step==="any"?1:Math.abs(this.step||1),_=new oi(o!==""?o:"0").add(`${y*c}`),I=()=>typeof r=="number"&&!isNaN(r)&&_.subtract(`${r}`).isNegative,$=()=>typeof i=="number"&&!isNaN(i)&&!_.subtract(`${i}`).isNegative,A=I()?`${r}`:$()?`${i}`:_.toString();this.setValue({committing:!0,nativeEvent:n,origin:"user",value:A})}syncHiddenFormInput(t){$He(this.type,this,t)}setDisabledAction(){const t=Cfe(this.el,"action");t&&(this.disabled?(t.getAttribute("disabled")==null&&(this.slottedActionElDisabledInternally=!0),t.setAttribute("disabled","")):this.slottedActionElDisabledInternally&&(t.removeAttribute("disabled"),this.slottedActionElDisabledInternally=!1))}normalizeValue(t){return this.type==="number"?wu(t)?t:"":t}warnAboutInvalidNumberValue(t){this.type==="number"&&t&&!wu(t)&&console.warn(`The specified value "${t}" cannot be parsed, or is out of range.`)}render(){const t=UL(this.el),i=We("div",{key:"ed9acea9dbc18f4cfc5e7095c1e2de0b1adfdf35",class:Xn.loader},We("calcite-progress",{key:"58321a27c25dd848a648d2e3d5ca6dfc3f5fd649",label:this.messages.loading,type:"indeterminate"})),r=We("button",{key:"348d8dee0c032afe986b1e253c9d667256f3d9f0","aria-label":this.messages.clear,class:Xn.clearButton,disabled:this.disabled||this.readOnly,onClick:this.clearInputValue,tabIndex:-1,type:"button"},We("calcite-icon",{key:"334b68a283b767c0e9bea09ccfd83d09c8c17711",icon:"x",scale:Uv(this.scale)})),n=We("calcite-icon",{key:"4ab83aa9268277a38449ebe4a6e3db4dc9badcae",class:Xn.inputIcon,flipRtl:this.iconFlipRtl,icon:this.requestedIcon,scale:Uv(this.scale)}),o=this.numberButtonType==="horizontal",c=We("button",{key:"2dd700034d38581aaea39c019e626ffa1a2c1c16","aria-hidden":"true",class:{[Xn.numberButtonItem]:!0,[Xn.buttonItemHorizontal]:o},"data-adjustment":"up",disabled:this.disabled||this.readOnly,onPointerDown:this.numberButtonPointerDownHandler,onPointerOut:this.numberButtonPointerUpAndOutHandler,onPointerUp:this.numberButtonPointerUpAndOutHandler,tabIndex:-1,type:"button"},We("calcite-icon",{key:"6ca9a7c93aa14520292ad8c800c4e099bd46f30d",icon:"chevron-up",scale:Uv(this.scale)})),y=We("button",{key:"cdbd88ddd308bd82b6d239a83f365a2c5e226cfc","aria-hidden":"true",class:{[Xn.numberButtonItem]:!0,[Xn.buttonItemHorizontal]:o},"data-adjustment":"down",disabled:this.disabled||this.readOnly,onPointerDown:this.numberButtonPointerDownHandler,onPointerOut:this.numberButtonPointerUpAndOutHandler,onPointerUp:this.numberButtonPointerUpAndOutHandler,tabIndex:-1,type:"button"},We("calcite-icon",{key:"f1b9cf329da9add564d690c517ddcc414c4fbfa3",icon:"chevron-down",scale:Uv(this.scale)})),v=We("div",{key:"247efdce33568f219b1bf3bf252b8b19a74d03ea",class:Xn.numberButtonWrapper},c,y),_=We("div",{key:"01819a850399fb20a29471861e011695bf80af97",class:Xn.prefix},this.prefixText),I=We("div",{key:"dcc073305f3824a0eb72ef230bd217dabdb72104",class:Xn.suffix},this.suffixText),$=this.el.autofocus||this.el.hasAttribute("autofocus")?!0:null,A=this.el.enterKeyHint||this.el.getAttribute("enterkeyhint"),k=this.el.inputMode||this.el.getAttribute("inputmode"),R=this.type==="number"?We("input",{accept:this.accept,"aria-errormessage":u6.validationMessage,"aria-invalid":cM(this.status==="invalid"),"aria-label":NH(this),autocomplete:this.autocomplete,autofocus:$,defaultValue:this.defaultValue,disabled:this.disabled?!0:null,enterKeyHint:A,inputMode:k,key:"localized-input",maxLength:this.maxLength,minLength:this.minLength,multiple:this.multiple,name:void 0,onBlur:this.inputBlurHandler,onFocus:this.inputFocusHandler,onInput:this.inputNumberInputHandler,onKeyDown:this.inputNumberKeyDownHandler,onKeyUp:this.inputKeyUpHandler,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:this.readOnly,ref:this.setChildNumberElRef,type:"text",value:this.displayedValue}):null,N=this.type!=="number"?[We(this.childElType,{accept:this.accept,"aria-errormessage":u6.validationMessage,"aria-invalid":cM(this.status==="invalid"),"aria-label":NH(this),autocomplete:this.autocomplete,autofocus:$,class:{[Xn.editingEnabled]:this.editingEnabled,[Xn.inlineChild]:!!this.inlineEditableEl},defaultValue:this.defaultValue,disabled:this.disabled?!0:null,enterKeyHint:A,inputMode:k,max:this.maxString,maxLength:this.maxLength,min:this.minString,minLength:this.minLength,multiple:this.multiple,name:this.name,onBlur:this.inputBlurHandler,onChange:this.inputChangeHandler,onFocus:this.inputFocusHandler,onInput:this.inputInputHandler,onKeyDown:this.inputKeyDownHandler,onKeyUp:this.inputKeyUpHandler,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:this.readOnly,ref:this.setChildElRef,required:this.required?!0:null,step:this.step,tabIndex:this.disabled||this.inlineEditableEl&&!this.editingEnabled?-1:null,type:this.type,value:this.value}),this.isTextarea?We("div",{class:Xn.resizeIconWrapper},We("calcite-icon",{icon:"chevron-down",scale:Uv(this.scale)})):null]:null;return We(Q4,{key:"23d6092960315f172a56105b9af75ddc6497874c",onClick:this.clickHandler,onKeyDown:this.keyDownHandler},We(rce,{key:"1bb063f39c14a829a376465fa8c2bbc288046ac7",disabled:this.disabled},We("div",{key:"7f3644f002b7cb75d93d9c0218508b502ddcfd0b",class:{[Xn.inputWrapper]:!0,[yZ.rtl]:t==="rtl"},ref:D=>this.inputWrapperEl=D},this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?y:null,this.prefixText?_:null,We("div",{key:"0d01898e4949a60e0853c1a72669f5c9d6c91ba5",class:Xn.wrapper},R,N,this.isClearable?r:null,this.requestedIcon?n:null,this.loading?i:null),We("div",{key:"42e7adec440e417128feb9845c36d0444e6c1ae4",class:Xn.actionWrapper,ref:D=>this.actionWrapperEl=D},We("slot",{key:"f391b035ad9fc108d1f99c4cedf539425c20a36d",name:OHe.action})),this.type==="number"&&this.numberButtonType==="vertical"&&!this.readOnly?v:null,this.suffixText?I:null,this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?c:null,We(pHe,{key:"df415df551b4a9a16565c8f554454d01aa89327e",component:this})),this.validationMessage&&this.status==="invalid"?We(SHe,{icon:this.validationIcon,id:u6.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{autofocus:["handleGlobalAttributesChanged"],enterkeyhint:["handleGlobalAttributesChanged"],inputmode:["handleGlobalAttributesChanged"],disabled:["disabledWatcher"],max:["maxWatcher"],min:["minWatcher"],messageOverrides:["onMessagesChange"],value:["valueWatcher"],icon:["updateRequestedIcon"],type:["updateRequestedIcon"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return PHe}},[1,"calcite-input",{alignment:[513],autofocus:[4],clearable:[516],disabled:[516],enterKeyHint:[1,"enter-key-hint"],form:[513],groupSeparator:[516,"group-separator"],icon:[520],iconFlipRtl:[516,"icon-flip-rtl"],inputMode:[1,"input-mode"],label:[1],loading:[516],numberingSystem:[513,"numbering-system"],localeFormat:[4,"locale-format"],max:[514],min:[514],maxLength:[514,"max-length"],minLength:[514,"min-length"],validationMessage:[1,"validation-message"],validationIcon:[520,"validation-icon"],validity:[1040],name:[513],numberButtonType:[513,"number-button-type"],placeholder:[1],prefixText:[1,"prefix-text"],readOnly:[516,"read-only"],required:[516],scale:[513],status:[513],step:[520],autocomplete:[1],pattern:[1],accept:[1],multiple:[4],suffixText:[1,"suffix-text"],editingEnabled:[1540,"editing-enabled"],type:[513],value:[1025],files:[16],messages:[1040],messageOverrides:[1040],defaultMessages:[32],effectiveLocale:[32],displayedValue:[32],slottedActionElDisabledInternally:[32],setFocus:[64],selectText:[64]},void 0,{autofocus:["handleGlobalAttributesChanged"],enterkeyhint:["handleGlobalAttributesChanged"],inputmode:["handleGlobalAttributesChanged"],disabled:["disabledWatcher"],max:["maxWatcher"],min:["minWatcher"],messageOverrides:["onMessagesChange"],value:["valueWatcher"],icon:["updateRequestedIcon"],type:["updateRequestedIcon"],effectiveLocale:["effectiveLocaleChange"]}]);function Ice(){if(typeof customElements>"u")return;["calcite-input","calcite-icon","calcite-input-message","calcite-progress"].forEach(t=>{switch(t){case"calcite-input":customElements.get(t)||customElements.define(t,NHe);break;case"calcite-icon":customElements.get(t)||$T();break;case"calcite-input-message":customElements.get(t)||pN();break;case"calcite-progress":customElements.get(t)||fN();break}})}Ice();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const FHe={container:"container",searchIcon:"search-icon"},DHe={search:"search",close:"x"},jHe=":host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;inline-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{display:flex;inline-size:100%;padding:0.5rem}label{position:relative;margin-inline:0.25rem;margin-block:0px;display:flex;inline-size:100%;align-items:center;overflow:hidden}input[type=text]{margin-block-end:0.25rem;inline-size:100%;border-style:none;background-color:transparent;padding-block:0.25rem;font-family:inherit;font-size:var(--calcite-font-size--2);line-height:1rem;color:var(--calcite-color-text-1);padding-inline-end:0.25rem;padding-inline-start:1.5rem;transition:padding var(--calcite-animation-timing), box-shadow var(--calcite-animation-timing)}input[type=text]::-ms-clear{display:none}calcite-input{inline-size:100%}.search-icon{position:absolute;display:flex;color:var(--calcite-color-text-2);inset-inline-start:0;transition:inset-inline-start var(--calcite-animation-timing), inset-inline-end var(--calcite-animation-timing), opacity var(--calcite-animation-timing)}input[type=text]:focus{border-color:var(--calcite-color-brand);outline:2px solid transparent;outline-offset:2px;padding-inline:0.25rem}input[type=text]:focus~.search-icon{inset-inline-start:calc(1rem * -1);opacity:0}.clear-button{display:flex;cursor:pointer;align-items:center;border-width:0px;background-color:transparent;color:var(--calcite-color-text-2)}.clear-button:hover,.clear-button:focus{color:var(--calcite-color-text-1)}:host([hidden]){display:none}[hidden]{display:none}",zHe=jHe,VHe=Mg(class extends Eg{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteFilterChange=Wv(this,"calciteFilterChange",6),this.filterDebounced=uGe((t,i=!1,r)=>this.updateFiltered(CH(this.items??[],t,this.filterProps),i,r),Xde.filter),this.inputHandler=t=>{const i=t.target;this.value=i.value,this.filterDebounced(i.value,!0)},this.keyDownHandler=t=>{t.defaultPrevented||(t.key==="Escape"&&(this.clear(),t.preventDefault()),t.key==="Enter"&&t.preventDefault())},this.clear=()=>{this.value="",this.filterDebounced("",!0),this.setFocus()},this.items=[],this.disabled=!1,this.filteredItems=[],this.filterProps=void 0,this.placeholder=void 0,this.scale="m",this.value="",this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale=void 0,this.defaultMessages=void 0}watchItemsHandler(){this.filterDebounced(this.value)}filterPropsHandler(){this.filterDebounced(this.value)}onMessagesChange(){}valueHandler(t){this.filterDebounced(t)}effectiveLocaleChange(){gce(this,this.effectiveLocale)}async componentWillLoad(){oce(this),this.updateFiltered(CH(this.items??[],this.value,this.filterProps)),await yce(this)}connectedCallback(){pce(this),vce(this)}componentDidRender(){ice(this)}disconnectedCallback(){fce(this),wce(this),this.filterDebounced.cancel()}componentDidLoad(){ace(this)}async filter(t=this.value){return new Promise(i=>{this.value=t,this.filterDebounced(t,!1,i)})}async setFocus(){var t;return await lce(this),(t=this.textInput)==null?void 0:t.setFocus()}updateFiltered(t,i=!1,r){this.filteredItems=t,i&&this.calciteFilterChange.emit(),r==null||r()}render(){const{disabled:t,scale:i}=this;return We(rce,{key:"c4a624e52409ed90839b506f5d99ab623767260e",disabled:t},We("div",{key:"1f2ef99156489719dd2f938bc5ce8a05185866bf",class:FHe.container},We("label",{key:"6fe8c6cf73f554908be38299263d23380a4ed089"},We("calcite-input",{key:"6765e00d208d6898221540769865d84aa1c64974",clearable:!0,disabled:t,icon:DHe.search,label:this.messages.label,messageOverrides:{clear:this.messages.clear},onCalciteInputInput:this.inputHandler,onKeyDown:this.keyDownHandler,placeholder:this.placeholder,ref:r=>{this.textInput=r},scale:i,type:"text",value:this.value}))))}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{items:["watchItemsHandler"],filterProps:["filterPropsHandler"],messageOverrides:["onMessagesChange"],value:["valueHandler"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return zHe}},[17,"calcite-filter",{items:[16],disabled:[516],filteredItems:[1040],filterProps:[16],placeholder:[1],scale:[513],value:[1025],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],defaultMessages:[32],filter:[64],setFocus:[64]},void 0,{items:["watchItemsHandler"],filterProps:["filterPropsHandler"],messageOverrides:["onMessagesChange"],value:["valueHandler"],effectiveLocale:["effectiveLocaleChange"]}]);function UHe(){if(typeof customElements>"u")return;["calcite-filter","calcite-icon","calcite-input","calcite-input-message","calcite-progress"].forEach(t=>{switch(t){case"calcite-filter":customElements.get(t)||customElements.define(t,VHe);break;case"calcite-icon":customElements.get(t)||$T();break;case"calcite-input":customElements.get(t)||Ice();break;case"calcite-input-message":customElements.get(t)||pN();break;case"calcite-progress":customElements.get(t)||fN();break}})}UHe();const BHe="data:image/svg+xml,%3csvg%20width='30'%20height='30'%20viewBox='0%200%2030%2030'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M23.0912%2024.9866C23.4954%2024.9864%2023.883%2024.8202%2024.1687%2024.5245L29.5544%2018.9479C29.84%2018.652%2030.0003%2018.251%2030%2017.833L29.9961%2011.1451C29.9959%2010.727%2029.8352%2010.3262%2029.5493%2010.0307L24.1571%204.4608C23.8702%204.16448%2023.4832%203.99864%2023.079%204.00001L1.52309%204.0134C1.3228%204.01293%201.12439%204.05342%200.939276%204.13253C0.754162%204.21164%200.585998%204.32782%200.444452%204.47438C0.302906%204.62094%200.190773%204.795%200.114499%204.98654C0.0382246%205.17807%20-0.000684416%205.38332%209.11036e-06%205.59046L0.0103705%2023.4248C0.0106744%2023.8428%200.171492%2024.2436%200.457456%2024.539C0.74342%2024.8344%201.13112%2025.0002%201.53529%2025L23.0912%2024.9866ZM3.04893%207.16468L22.4492%207.15263L26.9485%2011.8001L26.9516%2017.1817L22.4578%2021.8348L3.05746%2021.8468L3.04893%207.16468Z'%20fill='%23666666'/%3e%3cpath%20d='M18.3924%2012.6604C17.4126%2013.6749%2017.4136%2015.3188%2018.3945%2016.332C19.3755%2017.3453%2020.965%2017.3443%2021.9448%2016.3298C22.9246%2015.3153%2022.9236%2013.6715%2021.9426%2012.6582C20.9617%2011.6449%2019.3722%2011.6459%2018.3924%2012.6604Z'%20fill='%23666666'/%3e%3c/svg%3e";function GHe(e){const t=It.useRef(null),i=It.useRef(null),r=It.useRef(!1),[n,o]=It.useState(""),c=y=>{e.setActualTheme(y),e.checkVisibleLayers(e.view,y),e.setSelectedZoneOid(null),e.removeZoneFromMap(),e.view.popup.close(),window.history.replaceState(null,null,`?theme=${y}`),fl.event({category:"click",action:`prepnuti_tematu--${y}`,label:`Pepnut tmatu - ${y}`})};return It.useEffect(()=>{var y;(y=e.layerList)!=null&&y.id&&(e.layerList.container=i.current)},[e.layerListCreated]),It.useEffect(()=>{!r.current&&o(""),e.zonesLayers&&!r.current&&(o(e.zonesLayers.some(y=>y.visible)?"zones":"themes"),r.current=!0)},[e.zonesLayers]),it.jsxs("div",{className:`app-widget ${e.opened?"opened":"closed"}`,style:e.isMobile===!0?{height:`${e.config.appWidget.heightOnMobile}px`}:{},children:[it.jsxs("div",{className:"widget-header",children:[it.jsx("h1",{children:e.config.appLabels.appWidgetTitle}),it.jsx(Bu,{icon:"x",scale:"s","text-label":"Zavt",onClick:e.toggleAppWidget})]}),it.jsxs("div",{className:"widget-content",children:[it.jsxs("div",{className:`themes section ${n==="themes"?"":"closed"}`,children:[it.jsxs("div",{className:"section-title",onClick:()=>{o(n==="themes"?null:"themes"),fl.event({category:"click",action:"sekce--temata",label:"Rozbalen/Sbalen sekce - Tmata"})},children:[it.jsxs("h2",{children:[e.config.appLabels.appWidgetThemesTitle,":"]}),it.jsx("span",{children:n==="themes"?it.jsx(Bu,{icon:"chevron-up",scale:"s","text-label":"Sbalit"}):it.jsx(Bu,{icon:"chevron-down",scale:"s","text-label":"Rozbalit"})})]}),it.jsx("div",{className:"section-content flex-list-column",children:e.config&&e.config.appThemes.map(y=>{var v,_;return it.jsxs("div",{className:`flex-item theme-item ${y.name===((v=e.actualThemeInfo)==null?void 0:v.name)?"active-theme":""}`,onClick:()=>{c(y.name)},children:[it.jsx("img",{src:y.name===((_=e.actualThemeInfo)==null?void 0:_.name)?qZ:BHe,alt:"tma"}),y.label]},y.name)})})]}),e.zonesLayers&&e.zonesLayers.some(y=>y.visible)&&it.jsxs("div",{className:`zones section ${n==="zones"?"":"closed"}`,children:[it.jsxs("div",{className:"section-title",onClick:()=>{o(n==="zones"?null:"zones"),fl.event({category:"click",action:"sekce--oblasti",label:"Rozbalen/Sbalen sekce - Oblasti parkovn"})},children:[it.jsxs("h2",{children:[e.config.appLabels.appWidgetZonesTitle,":"]}),it.jsx("span",{children:n==="zones"?it.jsx(Bu,{icon:"chevron-up",scale:"s","text-label":"Sbalit"}):it.jsx(Bu,{icon:"chevron-down",scale:"s","text-label":"Rozbalit"})})]}),it.jsx("div",{className:"section-content flex-list-grid",ref:t,children:e.zoneFeatures&&e.zonesLayerViews?e.zoneFeatures.sort((y,v)=>y.attributes[e.config.appZones.zoneCodeAttr]-v.attributes[e.config.appZones.zoneCodeAttr]).map(y=>e.zonesLayers.filter(v=>v.id===y.layer.id)[0].visible&&it.jsx("div",{"data-oid":y.attributes[e.config.appZones.oidAttr],"data-layer":y.layer.id,className:`flex-item zones-item ${y.attributes[e.config.appZones.zoneDraftAttr]===e.config.appZones.zoneDraftValue?"zones-draft":""}`,title:y.attributes[e.config.appZones.zoneNameAttr],onClick:v=>{e.showZone(v),fl.event({category:"click",action:`vyber_oblati_widget--${y.attributes[e.config.appZones.zoneCodeAttr]}`,label:`Vbr oblasti z widgetu - ${y.attributes[e.config.appZones.zoneCodeAttr]}`})},style:e.selectedZone===y.attributes[e.config.appZones.oidAttr]+"--"+y.layer.id?{color:e.config.appZones.activeZoneColor,backgroundColor:`rgb(from ${e.config.appZones.activeZoneColor} r g b / 10%)`,border:`1px solid ${e.config.appZones.activeZoneColor}`}:{},children:y.attributes[e.config.appZones.zoneCodeAttr]},y.attributes[e.config.appZones.oidAttr]+"-"+y.layer.id)):it.jsx("div",{children:"Natm oblasti..."})})]}),it.jsxs("div",{className:`layers section ${n==="layers"?"":"closed"}`,style:!e.actualThemeInfo||e.actualThemeInfo&&e.actualThemeInfo.showLayerList?{}:{display:"none"},children:[it.jsxs("div",{className:"section-title",onClick:()=>{o(n==="layers"?null:"layers"),fl.event({category:"click",action:"sekce--vrstvy",label:"Rozbalen/Sbalen sekce - Vrstvy"})},children:[it.jsxs("h2",{children:[e.config.appLabels.appWidgetLayersTitle,":"]}),it.jsx("span",{children:n==="layers"?it.jsx(Bu,{icon:"chevron-up",scale:"s","text-label":"Sbalit"}):it.jsx(Bu,{icon:"chevron-down",scale:"s","text-label":"Rozbalit"})})]}),it.jsx("div",{className:"section-content",children:it.jsx("div",{ref:i})})]}),it.jsxs("div",{className:`feedback section ${n==="feedback"?"":"closed"}`,children:[it.jsxs("div",{className:"section-title",onClick:()=>{o(n==="feedback"?null:"feedback"),fl.event({category:"click",action:"sekce--zpetna_vazba",label:"Rozbalen/Sbalen sekce - Zptn vazba"})},children:[it.jsxs("h2",{children:[e.config.appLabels.appWidgetFeedbackTitle,":"]}),it.jsx("span",{children:n==="feedback"?it.jsx(Bu,{icon:"chevron-up",scale:"s","text-label":"Sbalit"}):it.jsx(Bu,{icon:"chevron-down",scale:"s","text-label":"Rozbalit"})})]}),it.jsx("div",{className:"section-content",children:"Funkcionalita se pipravuje."})]})]})]})}function qHe(e){const[t,i]=It.useState(null),[r,n]=It.useState(null),[o,c]=It.useState(!1),[y,v]=It.useState(null),[_,I]=It.useState(null),[$,A]=It.useState(!(e.isMobile&&e.config.appWidget.openOnStartIfDesktop)),[k,R]=It.useState(null),[N,D]=It.useState(null),[j,z]=It.useState(null);It.useState(null);const[U,W]=It.useState(new RUe({listMode:"hide",id:"selected-zone-system-layer"})),Q=It.useRef(null),K=It.useRef(null),ee=It.useRef(null),ie=It.useRef(null),ae=It.useRef(null);function ue(se){const ye=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;se=se.replace(ye,function(ce,xe,Ne,Ze){return xe+xe+Ne+Ne+Ze+Ze});const he=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(se);return he?{r:parseInt(he[1],16),g:parseInt(he[2],16),b:parseInt(he[3],16)}:null}const Ie=()=>{A(!$)},Ae=()=>{U.removeAll()},Me=se=>{const ye=se.target.getAttribute("data-oid"),he=se.target.getAttribute("data-layer"),ce=ye+"--"+he;if(t.popup.close(),ce==k){R(()=>null);return}R(()=>ce),fe(ye,he)},fe=(se,ye,he=!0)=>{const ce=e.zoneFeatures.filter(lt=>lt.attributes[e.config.appZones.oidAttr]==se&&lt.layer.id==ye)[0],xe=ce.attributes[e.config.appZones.correspondingZonesAttr];let Ne=[];if(xe){const Ot=xe.split(",").map(tr=>tr.trim());Ne=e.zoneFeatures.filter(tr=>Ot.includes(tr.attributes[e.config.appZones.zoneCodeAttr])).map(tr=>new er({geometry:tr.geometry,symbol:{type:"simple-fill",color:{r:ue(e.config.appZones.correspondingZonesColor).r,g:ue(e.config.appZones.correspondingZonesColor).g,b:ue(e.config.appZones.correspondingZonesColor).b,a:e.config.appZones.correspondingZonesMapOpacity},outline:{color:{r:ue(e.config.appZones.correspondingZonesColor).r,g:ue(e.config.appZones.correspondingZonesColor).g,b:ue(e.config.appZones.correspondingZonesColor).b,a:1},width:3}}}))}const Ze=new er({attributes:ce.attributes,geometry:ce.geometry,symbol:{type:"simple-fill",color:{r:ue(e.config.appZones.activeZoneColor).r,g:ue(e.config.appZones.activeZoneColor).g,b:ue(e.config.appZones.activeZoneColor).b,a:e.config.appZones.correspondingZonesMapOpacity},outline:{color:{r:ue(e.config.appZones.activeZoneColor).r,g:ue(e.config.appZones.activeZoneColor).g,b:ue(e.config.appZones.activeZoneColor).b,a:1},width:3}},popupTemplate:{title:e.config.appLabels.zonesPopupTitle,content:e.setZonesPopup}});if(Ae(),U.addMany([...Ne,Ze.clone()]),he){const lt=Due([Ze.clone().geometry.extent.expand(2),...Ne.map(Ot=>Ot.clone().geometry.extent.expand(2))]);t.popup.open({features:[Ze.clone()]}),t.goTo(lt)}};return It.useEffect(()=>{if(!Q.current&&!e.config)return;const se=new Nje({portalItem:{id:e.config.webMapId,portal:{url:e.config.portal}}}),ye=new SAe({container:Q.current,map:se,popup:new gle({viewModel:{includeDefaultActions:!1},dockEnabled:!0,dockOptions:{breakpoint:!1,position:e.isMobile?"bottom-center":"bottom-left"}})}),he=new Uze({view:ye});ae.current=he;const ce=new Eue({view:ye}),xe=new oH({label:"Legenda",collapseIcon:"legend",collapseTooltip:"Zavt legendu",expandIcon:"legend",expandTooltip:"Legenda",group:"top-left",view:ye,content:ce});v(xe);const Ne=document.createElement("div");Ne.style.padding="10px",Ne.classList.add("esri-widget--panel","esri-widget"),Ne.innerHTML="<div class='map-component-about-widget'>"+e.config.appLabels.aboutWidget+"</div>";const Ze=new oH({label:"O aplikaci",collapseIcon:"question",collapseTooltip:"Sbalit informace o aplikaci",expandIcon:"question",expandTooltip:"O aplikaci",group:"top-left",view:ye,content:Ne});I(Ze);const lt=new OUe({view:ye});n(lt);const Ot=document.createElement("div");Ot.classList.add("toggle-basemap-container");const Wt=new Bze({view:ye,container:Ot,nextBasemap:new F1({portalItem:{id:e.config.nextBasemap.portalItemId}})});ie.current=Wt;const tr=new Nze({view:ye,includeDefaultSources:!1,sources:[{layer:new U3({url:e.config.search.layerUrl,outFields:["*"],definitionExpression:e.config.search.layerUrl.definitionExpression}),searchFields:e.config.search.searchFields,displayField:e.config.search.layerUrl.displayField,exactMatch:!1,outFields:["*"],name:"Adresn msta",placeholder:"Hledat adresu",maxResults:6,maxSuggestions:6,suggestionsEnabled:!0,minSuggestCharacters:3,popupEnabled:!1,resultSymbol:{type:"simple-marker",size:"12px",color:[0,0,0,0],outline:{color:[217,0,18],width:2}}}]});ee.current=tr,ye.ui.add(tr,"top-left"),ye.ui.move(["zoom"],"top-left"),ye.ui.add(he,"top-left"),ye.ui.add(xe,"top-left"),ye.ui.add(Ze,"top-left"),ye.ui.add(Ot,"manual"),ye.ui.add(K.current,"manual"),ye.when(()=>{e.loaded(!0),e.checkVisibleLayers(ye,null),e.getZonesLayer(ye),ye.map.add(U),i(ye),c(!0)})},[Q]),It.useEffect(()=>{var se,ye;t&&((se=ae.current.domNode)==null||se.addEventListener("click",()=>{fl.event({category:"click",action:"Widget--Najdi_moji_polohu",label:"Esri widget - Najdi moji polohu"})}),(ye=ie.current.domNode)==null||ye.addEventListener("click",()=>{fl.event({category:"click",action:"Widget--Prepnout_podkladovou_mapu",label:"Esri widget - Pepnout podkladovou mapu"})}))},[t]),It.useEffect(()=>{var he,ce,xe;if(!t)return;const se=document.body.querySelector("search-close-btn");se&&se.remove();const ye=document.createElement("div");ye.innerHTML='<span class="esri-icon-left"></span>',ye.classList.add("search-close-btn"),(ce=(he=ee.current.domNode)==null?void 0:he.firstChild)==null||ce.firstChild.prepend(ye),(xe=ee.current.domNode.querySelector(".esri-search__submit-button"))==null||xe.addEventListener("click",()=>{ee.current.domNode.classList.contains("search-expanded")||(ee.current.domNode.classList.add("search-expanded"),ee.current.focus(),fl.event({category:"click",action:"Widget--Hledat",label:"Esri widget - Hledat"}))}),ye.addEventListener("click",()=>{ee.current.domNode.classList.contains("search-expanded")&&(ee.current.domNode.classList.remove("search-expanded"),ee.current.clear())})},[t]),It.useEffect(()=>{!t||!e.zonesLayers||!e.zoneFeatures||(t.on("click",()=>{U.removeAll()}),e.zonesLayers.forEach(se=>{se.when(ye=>{ge(()=>[t==null?void 0:t.popup.selectedFeature,t==null?void 0:t.popup.visible,t.navigating,ye.updating],([he,ce,xe,Ne])=>{var Ze;he&&((Ze=he.layer)==null?void 0:Ze.id)===se.id&&ce&&(R(he.attributes[e.config.appZones.oidAttr]+"--"+he.layer.id),fe(he.attributes[e.config.appZones.oidAttr],he.layer.id,!1),fl.event({category:"click",action:`Vyber_oblati_mapa--${he.attributes[e.config.appZones.zoneCodeAttr]}`,label:`Vbr oblasti z mapy - ${he.attributes[e.config.appZones.zoneCodeAttr]}`})),!ce&&!xe&&!Ne&&(R(null),Ae())})})}))},[t,e.zonesLayers,e.zoneFeatures]),It.useEffect(()=>{t&&ge(()=>t.width,()=>{t.popup.dockOptions.position=e.isMobile?"bottom-center":"bottom-left"})},[t,e.isMobile]),It.useEffect(()=>{N&&N.remove(),j&&j.remove();const se=ge(()=>[y==null?void 0:y.expanded,_==null?void 0:_.expanded],he=>{he.includes(!0)&&e.isMobile&&$&&A(!1)});D(se);const ye=ge(()=>t==null?void 0:t.popup.selectedFeature,he=>{he&&$&&e.isMobile&&A(!1)});return z(ye),()=>{se&&se.remove(),ye&&ye.remove()}},[$,e.isMobile]),it.jsxs("div",{className:"map-div",ref:Q,children:[it.jsxs("div",{ref:K,title:e.config.appLabels.appWidgetTitle,className:"app-button",onClick:Ie,children:[it.jsx("div",{className:"icon"}),it.jsx("div",{className:"label",children:e.config.appLabels.appWidgetTitle})]}),it.jsx(GHe,{opened:$,toggleAppWidget:Ie,view:t,config:e.config,setActualTheme:e.setActualTheme,actualThemeInfo:e.actualThemeInfo,checkVisibleLayers:e.checkVisibleLayers,zonesLayers:e.zonesLayers,zonesLayerViews:e.zonesLayerViews,zoneFeatures:e.zoneFeatures,isMobile:e.isMobile,layerList:r,layerListCreated:o,setSelectedZoneOid:R,selectedZone:k,showZone:Me,removeZoneFromMap:Ae})]})}wZ("https://js.arcgis.com/calcite-components/2.13.2/assets");const zH=544;function HHe(){const[e,t]=It.useState(new URLSearchParams(window.location.search).get("theme")),[i,r]=It.useState(),[n,o]=It.useState(null),[c,y]=It.useState(!1),[v,_]=It.useState(null),[I,$]=It.useState(null),[A,k]=It.useState([]),[R,N]=It.useState(window.innerWidth),[D,j]=It.useState(window.innerWidth<=zH),z=It.useRef(A),U=Me=>{let fe,se;Me.graphic.attributes[n==null?void 0:n.appZones.correspondingZonesAttr]&&(fe=Me.graphic.attributes[n==null?void 0:n.appZones.correspondingZonesAttr].split(","),se=fe.map(he=>`<span style="color: ${n==null?void 0:n.appZones.correspondingZonesColor}; background-color: rgba(from ${n==null?void 0:n.appZones.correspondingZonesColor} r g b / 10%); padding: 0px 5px; border: 1px solid ${n==null?void 0:n.appZones.correspondingZonesColor}; display: flex; justify-content: center; align-items: center; width: 30px; height: 30px;">
          ${he.trim()}
        </span>`));const ye=document.createElement("div");return ye.innerHTML=`
    <div>
      <div style="color: ${n==null?void 0:n.appZones.activeZoneColor}; height: 30px; display: inline-flex; justify-content: center; align-items: center; background-color: rgba(from ${n==null?void 0:n.appZones.activeZoneColor} r g b / 10%); padding: 0px 8px; border: 1px solid ${n==null?void 0:n.appZones.activeZoneColor}">
        ${Me.graphic.attributes[n==null?void 0:n.appZones.zoneCodeAttr]} ${Me.graphic.attributes[n==null?void 0:n.appZones.zoneNameAttr]} 
      </div> 
      
      ${Me.graphic.attributes[n==null?void 0:n.appZones.zoneDraftAttr]===(n==null?void 0:n.appZones.zoneDraftValue)&&(n!=null&&n.appLabels.zonesPopupDraftZone)?'<span style="margin-left: 5px; padding: 0px 2px 0px 1px; border-bottom: 1px dashed '+(n==null?void 0:n.appZones.activeZoneColor)+"; color: "+(n==null?void 0:n.appZones.activeZoneColor)+'">'+(n==null?void 0:n.appLabels.zonesPopupDraftZone)+"</span>":""}
    </div> 
    
    <div style="margin-top: 12px; ${se?"":"display: none"}">
      ${se?(n==null?void 0:n.appLabels.zonesPopupCorrespondingZones)+":":""}

      ${se?'<div style="margin-top: 3px; display: flex; flex-wrap: wrap; justify-content: start; gap: 3px;">':""}
        ${se?se.join(""):""}
      ${se?"</div>":""}
    </div> 
    `,ye},W={title:n==null?void 0:n.appLabels.zonesPopupTitle,content:U},Q=Me=>{y(Me)},K=async()=>(await fetch("./config.json")).json(),ee=Me=>{if(Me!=="[no-theme]"){const fe=n==null?void 0:n.appThemes.filter(se=>{if(se.name===Me)return se});return(fe==null?void 0:fe.length)>0?fe[0]:n==null?void 0:n.appThemes[0]}else return null},ie=Me=>{t(Me)},ae=(Me,fe)=>{let se=ee(fe||e);i&&i.forEach(he=>{he.remove()}),Me.map.layers.forEach(he=>{he.id!=="selected-zone-system-layer"&&(he.visible=!1,se!=null&&se.visibleLayers.includes(he.title)&&(he.visible=!0),he.allSublayers&&he.when(()=>{he.allSublayers.forEach(ce=>{ce.visible=!1,se!=null&&se.visibleLayers.includes(ce.title)&&(ce.visible=!0)})}))});let ye=[];Me.map.layers.forEach(he=>{const ce=he.watch("visible",()=>{t("[no-theme]"),ue(Me)});he.allSublayers&&he.when(()=>{he.allSublayers.forEach(xe=>{const Ne=xe.watch("visible",()=>{t("[no-theme]"),ue(Me)});ye.push(Ne)})}),ye.push(ce)}),r(ye)},ue=async Me=>{const fe=[],se=[],ye=[];for(const he of Me.map.layers)if(n.appZones.fromLayers.length>0){if(n.appZones.fromLayers.includes(he.title)){he.popupEnabled=!0,he.popupTemplate=W,he.outFields=["*"],se.push(he);const ce=await Ie(he);fe.push(...ce),Me.whenLayerView(he).then(xe=>{xe.highlightOptions={color:[0,0,0,0],haloOpacity:1,fillOpacity:1},ye.push(xe)})}he.allSublayers&&he.when(async()=>{for(const ce of he.allSublayers.items)if(n.appZones.fromLayers.includes(ce.title)){ce.popupEnabled=!0,ce.popupTemplate=W,ce.outFields=["*"],se.push(ce);const xe=await Ie(ce);fe.push(...xe),Me.whenLayerView(ce).then(Ne=>{Ne.highlightOptions={color:[0,0,0,0],haloOpacity:1,fillOpacity:1},ye.push(Ne)})}})}_(se),$(ye),z.current.length===0&&(k(fe),z.current=fe)},Ie=async Me=>(await Me.queryFeatures({outFields:["*"],returnGeometry:!0,where:Me.definitionExpression})).features,Ae=()=>{N(window.innerWidth),j(window.innerWidth<=zH)};return It.useEffect(()=>(window.addEventListener("resize",Ae),()=>{window.removeEventListener("resize",Ae)}),[]),It.useEffect(()=>{(async()=>{const Me=await K();o(Me),Me!=null&&Me.ga4Id&&fl.initialize(Me==null?void 0:Me.ga4Id)})()},[]),it.jsxs(it.Fragment,{children:[!c&&it.jsx("calcite-loader",{}),it.jsxs(t0e,{"content-behind":!0,children:[it.jsx("div",{slot:"header",children:it.jsx(r0e,{appTitle:n?n.appLabels.appTitle:"",appLogoLink:n?n.appLogoLink:"",actualThemeInfo:ee(e)})}),n&&it.jsx(qHe,{config:n,loaded:Q,checkVisibleLayers:ae,setActualTheme:ie,actualThemeInfo:ee(e),isMobile:D,getZonesLayer:ue,zonesLayers:v,zonesLayerViews:I,zoneFeatures:A,setZonesPopup:U})]})]})}h6.createRoot(document.getElementById("root")).render(it.jsx(HHe,{}));export{rt as $,vce as A,yce as B,yZ as C,ice as D,fce as E,Ar as F,wce as G,Eg as H,FBe as I,gce as J,rce as K,tKe as L,Ku as M,rfe as N,nfe as O,r3 as P,Ou as Q,Ort as R,T5e as S,_r as T,Cu as U,Cr as V,Pae as W,aKe as X,r1 as Y,GP as Z,de as _,fNe as a,EX as a$,wle as a0,Rme as a1,v8 as a2,cr as a3,I5e as a4,PYe as a5,OI as a6,m as a7,w as a8,z0 as a9,er as aA,xKe as aB,dI as aC,$0 as aD,Lu as aE,ks as aF,Kke as aG,Xke as aH,Qke as aI,sLe as aJ,cLe as aK,$oe as aL,Ioe as aM,Toe as aN,uLe as aO,yLe as aP,mLe as aQ,ene as aR,pEe as aS,PEe as aT,d7 as aU,pp as aV,Ug as aW,NI as aX,MX as aY,n0 as aZ,EO as a_,yS as aa,H as ab,be as ac,a3 as ad,Ut as ae,Le as af,st as ag,d2 as ah,_e as ai,EEe as aj,Gi as ak,Et as al,Lke as am,Oke as an,Rke as ao,we as ap,le as aq,Rit as ar,WG as as,Vo as at,X_e as au,Wee as av,I0 as aw,QQe as ax,yre as ay,Oe as az,Wv as b,tZe as b$,i8e as b0,V2 as b1,Lz as b2,tYe as b3,GJe as b4,h3 as b5,n8e as b6,uGe as b7,Xde as b8,nWe as b9,OQe as bA,YV as bB,h4 as bC,GQe as bD,qt as bE,$X as bF,uQe as bG,T6e as bH,kV as bI,OV as bJ,RV as bK,LV as bL,pi as bM,SZe as bN,IZe as bO,xZe as bP,io as bQ,Os as bR,co as bS,HQe as bT,pK as bU,gg as bV,kre as bW,to as bX,Cs as bY,I9 as bZ,U_ as b_,WHe as ba,tWe as bb,bu as bc,_t as bd,VL as be,Uv as bf,Jv as bg,Mfe as bh,Ife as bi,JHe as bj,YHe as bk,Sfe as bl,ZHe as bm,KHe as bn,FZ as bo,f7 as bp,PV as bq,c4 as br,fy as bs,fu as bt,tK as bu,rK as bv,nK as bw,cWe as bx,c0e as by,CWe as bz,tI as c,Li as c$,dre as c0,mge as c1,Kf as c2,CU as c3,kU as c4,FJe as c5,ei as c6,A7 as c7,UWe as c8,BR as c9,ps as cA,m0e as cB,ge as cC,qe as cD,nP as cE,mp as cF,jOe as cG,tv as cH,ci as cI,nh as cJ,Qc as cK,sh as cL,Al as cM,Ml as cN,NM as cO,Vi as cP,PM as cQ,DM as cR,L9 as cS,hee as cT,cne as cU,Ke as cV,O2 as cW,Kr as cX,u4 as cY,dne as cZ,zV as c_,VWe as ca,eo as cb,x0 as cc,cJe as cd,Wg as ce,eT as cf,tT as cg,gje as ch,$4e as ci,lJe as cj,eKe as ck,DDe as cl,LNe as cm,ke as cn,K2e as co,yD as cp,br as cq,l0 as cr,q$e as cs,cXe as ct,xt as cu,dXe as cv,sp as cw,tn as cx,bKe as cy,jI as cz,np as d,FY as d$,B4e as d0,ZS as d1,$3 as d2,pC as d3,rZe as d4,HKe as d5,iYe as d6,ip as d7,Vee as d8,v2 as d9,HLe as dA,I7e as dB,sYe as dC,g1e as dD,ait as dE,hit as dF,MA as dG,hR as dH,ase as dI,eh as dJ,dit as dK,ft as dL,He as dM,qo as dN,eYe as dO,QJe as dP,NJe as dQ,sK as dR,oK as dS,w1e as dT,wO as dU,bO as dV,b1e as dW,pI as dX,fI as dY,S3 as dZ,S2 as d_,t0 as da,hM as db,y6e as dc,HZ as dd,St as de,Ve as df,Xc as dg,l2e as dh,sje as di,art as dj,Lse as dk,KKe as dl,nYe as dm,PUe as dn,aWe as dp,B7e as dq,Qi as dr,Ur as ds,x7e as dt,D2 as du,Ub as dv,Nse as dw,brt as dx,G3 as dy,je as dz,We as e,zn as e$,goe as e0,ER as e1,yxe as e2,SKe as e3,Ru as e4,kO as e5,Ng as e6,Q5e as e7,cR as e8,Axe as e9,Hre as eA,AEe as eB,jJe as eC,Xee as eD,yp as eE,wEe as eF,FSe as eG,P9 as eH,NHe as eI,Ice as eJ,X8e as eK,Y8e as eL,q7 as eM,U3 as eN,bJe as eO,Pit as eP,Og as eQ,Cl as eR,oae as eS,xNe as eT,aNe as eU,yNe as eV,Dae as eW,wT as eX,PRe as eY,LRe as eZ,kRe as e_,TKe as ea,Dte as eb,jte as ec,IKe as ed,Ro as ee,VJe as ef,Xs as eg,yI as eh,qO as ei,Wre as ej,Kre as ek,Qre as el,tEe as em,Q$e as en,zo as eo,MWe as ep,gY as eq,ig as er,fO as es,pye as et,EI as eu,KI as ev,Hge as ew,OYe as ex,eEe as ey,Yre as ez,Nae as f,Hd as f$,vs as f0,Hg as f1,fs as f2,kl as f3,$2 as f4,gRe as f5,bRe as f6,mRe as f7,aX as f8,oEe as f9,rn as fA,kI as fB,kNe as fC,U9 as fD,Ct as fE,Q0 as fF,JJe as fG,uee as fH,eZe as fI,HJe as fJ,Qr as fK,RUe as fL,DD as fM,hd as fN,y2 as fO,Wie as fP,wt as fQ,f3 as fR,nJe as fS,Wme as fT,VAe as fU,Hse as fV,V7 as fW,fHe as fX,o0 as fY,_l as fZ,IWe as f_,aEe as fa,CEe as fb,ORe as fc,TK as fd,sI as fe,tR as ff,I3 as fg,I2 as fh,Td as fi,Fo as fj,V_e as fk,hI as fl,U_e as fm,Oae as fn,oJe as fo,XZe as fp,$l as fq,dt as fr,g9 as fs,rp as ft,s3 as fu,$Ne as fv,ua as fw,Mnt as fx,get as fy,ng as fz,afe as g,Are as g$,xWe as g0,rh as g1,Fu as g2,Att as g3,$tt as g4,Utt as g5,Au as g6,Gnt as g7,aHe as g8,Jnt as g9,y2e as gA,gI as gB,qSe as gC,c2e as gD,HSe as gE,o5e as gF,vtt as gG,gtt as gH,qi as gI,q0 as gJ,i1 as gK,mI as gL,KS as gM,cA as gN,nZe as gO,y3 as gP,Wnt as gQ,Hpe as gR,iWe as gS,MJe as gT,jt as gU,tQe as gV,hje as gW,fS as gX,rO as gY,Mre as gZ,s7 as g_,dN as ga,uHe as gb,vHe as gc,NH as gd,a9 as ge,Cfe as gf,Afe as gg,nFe as gh,xu as gi,B2e as gj,d5 as gk,vJe as gl,hJe as gm,Aa as gn,aPe as go,dRe as gp,HG as gq,fx as gr,Oit as gs,N8 as gt,KZ as gu,G0 as gv,ys as gw,IE as gx,p2e as gy,f2e as gz,UF as h,HE as h$,mTe as h0,jR as h1,xM as h2,j5 as h3,F$ as h4,l3 as h5,xa as h6,Ite as h7,SWe as h8,DV as h9,Yee as hA,hEe as hB,Qee as hC,CSe as hD,zJe as hE,y1e as hF,Dj as hG,TZe as hH,$Ze as hI,ve as hJ,PSe as hK,g2e as hL,FI as hM,fWe as hN,_Ee as hO,cEe as hP,Z2e as hQ,O0 as hR,hNe as hS,sNe as hT,TRe as hU,Tz as hV,Cte as hW,ONe as hX,DRe as hY,IP as hZ,_T as h_,_0 as ha,IY as hb,uO as hc,qJe as hd,bEe as he,hTe as hf,pn as hg,pTe as hh,Ere as hi,SRe as hj,kg as hk,ar as hl,en as hm,d3 as hn,gn as ho,dje as hp,att as hq,Uoe as hr,po as hs,xTe as ht,UJe as hu,uTe as hv,TJe as hw,MD as hx,PY as hy,NY as hz,pNe as i,iKe as i$,H8 as i0,xP as i1,vT as i2,ROe as i3,CRe as i4,LP as i5,ENe as i6,j5e as i7,D5e as i8,O5e as i9,Ett as iA,Pg as iB,rWe as iC,fN as iD,pN as iE,UHe as iF,Dl as iG,Fg as iH,Xe as iI,sl as iJ,CV as iK,jYe as iL,yTe as iM,iU as iN,AV as iO,yWe as iP,m4 as iQ,zye as iR,Tl as iS,Sa as iT,Ei as iU,oWe as iV,y7 as iW,Rb as iX,Sre as iY,oR as iZ,oee as i_,IA as ia,Iu as ib,uo as ic,Lo as id,g0e as ie,zD as ig,zae as ih,Gd as ii,Ume as ij,ku as ik,Ia as il,Il as im,q2 as io,$P as ip,dae as iq,FRe as ir,NRe as is,RRe as it,vg as iu,Znt as iv,hN as iw,zk as ix,Mtt as iy,Ttt as iz,Q4 as j,hoe as j$,HS as j0,_8e as j1,d2e as j2,nEe as j3,REe as j4,NEe as j5,_Te as j6,dLe as j7,m1e as j8,iee as j9,uY as jA,yY as jB,W2e as jC,Jne as jD,Wit as jE,Tae as jF,XL as jG,Nu as jH,Zy as jI,I7 as jJ,trt as jK,yPe as jL,mPe as jM,hl as jN,Ant as jO,Cg as jP,lh as jQ,bP as jR,moe as jS,gy as jT,sit as jU,kse as jV,SE as jW,tPe as jX,nPe as jY,ARe as jZ,doe as j_,gT as ja,x1e as jb,u2e as jc,i4 as jd,sEe as je,Jre as jf,G9 as jg,ev as jh,dp as ji,yEe as jj,Xre as jk,DI as jl,E4e as jm,CR as jn,A4e as jo,C4e as jp,Wd as jq,Rae as jr,b0e as js,x2 as jt,hRe as ju,kPe as jv,_Re as jw,GRe as jx,hPe as jy,ePe as jz,QHe as k,US as k$,coe as k0,lPe as k1,URe as k2,BRe as k3,nO as k4,HRe as k5,WRe as k6,rPe as k7,JRe as k8,ZRe as k9,yi as kA,wtt as kB,mtt as kC,E8e as kD,MV as kE,BXe as kF,GXe as kG,ZXe as kH,KXe as kI,qXe as kJ,HXe as kK,WXe as kL,JXe as kM,kWe as kN,SO as kO,sge as kP,YJe as kQ,vI as kR,kge as kS,v9 as kT,Mge as kU,gR as kV,WKe as kW,qKe as kX,Oye as kY,BWe as kZ,k4 as k_,KRe as ka,YRe as kb,XRe as kc,QRe as kd,jae as ke,fye as kf,CX as kg,Es as kh,YM as ki,cee as kj,Ge as kk,Vr as kl,RYe as km,mme as kn,nN as ko,O4 as kp,cUe as kq,uu as kr,Vn as ks,B as kt,ze as ku,N1 as kv,kUe as kw,$Ue as kx,Ht as ky,R3 as kz,Zit as l,Bg as l$,I8e as l0,JL as l1,ZL as l2,zt as l3,J as l4,yJe as l5,n3 as l6,j6e as l7,m7 as l8,kQe as l9,sJe as lA,_me as lB,cI as lC,dJe as lD,h1 as lE,F0 as lF,iMe as lG,nMe as lH,sMe as lI,gH as lJ,_rt as lK,x3 as lL,Srt as lM,Wze as lN,cH as lO,xAe as lP,R0 as lQ,vu as lR,nX as lS,Ctt as lT,Vtt as lU,gWe as lV,vWe as lW,mWe as lX,ih as lY,Nme as lZ,h0 as l_,FV as la,ga as lb,une as lc,Mc as ld,NV as le,LQe as lf,EV as lg,_ge as lh,bge as li,CJe as lj,XJe as lk,l4 as ll,iQe as lm,rQe as ln,nQe as lo,I6e as lp,Qtt as lq,eit as lr,Xtt as ls,ige as lt,uge as lu,m3 as lv,$Je as lw,mn as lx,OMe as ly,h0e as lz,$T as m,ep as m$,Z0 as m0,BI as m1,EUe as m2,hs as m3,hUe as m4,mH as m5,OEe as m6,zTe as m7,VTe as m8,a0e as m9,Zte as mA,bg as mB,fKe as mC,cPe as mD,Jd as mE,lq as mF,T2 as mG,TNe as mH,DSe as mI,ASe as mJ,kSe as mK,kye as mL,nn as mM,Cbe as mN,Pie as mO,Rie as mP,K9e as mQ,pQe as mR,ure as mS,s4 as mT,mg as mU,kR as mV,r7 as mW,ire as mX,C3 as mY,wWe as mZ,lR as m_,QKe as ma,Fq as mb,G4e as mc,Zre as md,F6e as me,Exe as mf,Mxe as mg,oit as mh,IX as mi,OJe as mj,Bi as mk,p3 as ml,oie as mm,zre as mn,sg as mo,sve as mp,JK as mq,JWe as mr,WWe as ms,VMe as mt,ftt as mu,qye as mv,Gye as mw,pWe as mx,u0e as my,ZJe as mz,eI as n,L_e as n$,vRe as n0,wRe as n1,IRe as n2,WPe as n3,cNe as n4,iK as n5,vY as n6,yO as n7,rJe as n8,DY as n9,DJe as nA,aR as nB,aJe as nC,GK as nD,Ad as nE,fP as nF,PCe as nG,Sy as nH,jtt as nI,Gtt as nJ,Btt as nK,Q8e as nL,eke as nM,tee as nN,jV as nO,CQe as nP,D6e as nQ,GV as nR,BV as nS,gTe as nT,rit as nU,F3 as nV,iit as nW,Ff as nX,Ms as nY,z7 as nZ,Fit as n_,bD as na,Bee as nb,TMe as nc,pJe as nd,ur as ne,Bit as nf,sG as ng,ktt as nh,Ltt as ni,Ptt as nj,Ott as nk,Rtt as nl,ztt as nm,oG as nn,Ntt as no,Dtt as np,Ftt as nq,W0 as nr,yl as ns,Itt as nt,J8e as nu,BJe as nv,dTe as nw,sIe as nx,eIe as ny,A3 as nz,XHe as o,H5e as o$,Xte as o0,Dit as o1,W$e as o2,M4e as o3,Rnt as o4,knt as o5,_ve as o6,fJe as o7,qQe as o8,UKe as o9,Ike as oA,U7e as oB,aoe as oC,I4 as oD,Yse as oE,Db as oF,eQe as oG,XV as oH,jXe as oI,dAe as oJ,wn as oK,rT as oL,nKe as oM,bre as oN,xre as oO,qIe as oP,zYe as oQ,eTe as oR,j1 as oS,VYe as oT,mP as oU,ISe as oV,Kv as oW,uKe as oX,Uo as oY,L0 as oZ,Z5e as o_,VKe as oa,l9e as ob,GKe as oc,BKe as od,dO as oe,WSe as of,GSe as og,dEe as oh,BSe as oi,h9e as oj,jK as ok,L2 as ol,PTe as om,TOe as on,IOe as oo,hYe as op,dYe as oq,pYe as or,JP as os,Qg as ot,aP as ou,nke as ov,ske as ow,Xg as ox,eoe as oy,V7e as oz,Mg as p,bB as p$,ro as p0,Rf as p1,jn as p2,NPe as p3,SQe as p4,ane as p5,cB as p6,fB as p7,EJe as p8,ltt as p9,cit as pA,RU as pB,bb as pC,xRe as pD,Ent as pE,_Ke as pF,mKe as pG,vKe as pH,gKe as pI,wKe as pJ,Ls as pK,Nxe as pL,UQe as pM,qF as pN,yKe as pO,BQe as pP,QU as pQ,JU as pR,dge as pS,ZU as pT,AJe as pU,y7e as pV,hB as pW,KU as pX,iZe as pY,iB as pZ,wB as p_,IQe as pa,xQe as pb,FXe as pc,DXe as pd,LU as pe,_u as pf,XI as pg,k3 as ph,HM as pi,UXe as pj,vIe as pk,Nf as pl,rU as pm,mne as pn,vQe as po,wQe as pp,bQe as pq,_Qe as pr,oQe as ps,lQe as pt,aQe as pu,rMe as pv,Yr as pw,uP as px,aH as py,NXe as pz,GL as q,VXe as q$,_B as q0,Oge as q1,RJe as q2,yge as q3,SB as q4,PJe as q5,lTe as q6,Jet as q7,k7 as q8,Wet as q9,U1e as qA,V1e as qB,xJe as qC,I0e as qD,ctt as qE,C7 as qF,Zet as qG,Ooe as qH,qet as qI,Tse as qJ,iP as qK,Yet as qL,m7e as qM,d7e as qN,Ket as qO,h7e as qP,hT as qQ,QI as qR,qc as qS,f7e as qT,dQe as qU,hQe as qV,Het as qW,V6e as qX,cQe as qY,eU as qZ,zXe as q_,utt as qa,ott as qb,rtt as qc,itt as qd,ntt as qe,stt as qf,FB as qg,DB as qh,jB as qi,ett as qj,ttt as qk,sQe as ql,kB as qm,GU as qn,NU as qo,FU as qp,DU as qq,rB as qr,CB as qs,OB as qt,qU as qu,GI as qv,WJe as qw,Xet as qx,Qet as qy,fQe as qz,oce as r,lIe as r$,mQe as r0,yQe as r1,TQe as r2,$Qe as r3,YXe as r4,EQe as r5,MQe as r6,x6e as r7,E6e as r8,Cne as r9,$V as rA,Ont as rB,Lnt as rC,Xze as rD,FD as rE,C2 as rF,lre as rG,ah as rH,AY as rI,gO as rJ,VM as rK,vZe as rL,YY as rM,P1e as rN,R1e as rO,AIe as rP,LR as rQ,kJe as rR,aBe as rS,vge as rT,XUe as rU,X4e as rV,sre as rW,are as rX,n4 as rY,MEe as rZ,r4 as r_,tg as ra,gQe as rb,uJe as rc,jIe as rd,lee as re,vTe as rf,RR as rg,DQe as rh,jQe as ri,zQe as rj,eMe as rk,yne as rl,XXe as rm,QXe as rn,Y6e as ro,VQe as rp,PXe as rq,yZe as rr,jY as rs,r8e as rt,c8e as ru,y8e as rv,T8e as rw,vve as rx,mit as ry,yit as rz,ne as s,Kl as s$,aT as s0,RAe as s1,Zge as s2,oIe as s3,H4e as s4,OAe as s5,kAe as s6,wJe as s7,h_e as s8,SJe as s9,rKe as sA,_et as sB,bet as sC,xet as sD,LAe as sE,QY as sF,O9 as sG,_Je as sH,$Be as sI,EBe as sJ,Iet as sK,A2 as sL,YK as sM,YI as sN,V4e as sO,uIe as sP,$Le as sQ,cIe as sR,LJe as sS,cV as sT,dFe as sU,Ytt as sV,oKe as sW,Z4e as sX,K4e as sY,IEe as sZ,nit as s_,Pet as sa,Zg as sb,wet as sc,lT as sd,Tet as se,$et as sf,Eet as sg,Met as sh,Oet as si,Aet as sj,Cet as sk,ket as sl,Let as sm,Ret as sn,vet as so,Une as sp,s1 as sq,AR as sr,lI as ss,ose as st,k1e as su,mJe as sv,gJe as sw,Vye as sx,Po as sy,RMe as sz,cM as t,q4e as t0,kt as t1,D3 as t2,s0e as t3,b9 as t4,dWe as t5,ZSe as t6,a5e as t7,xoe as t8,QSe as t9,rrt as tA,qnt as tB,sKe as ta,uWe as tb,n0e as tc,lWe as td,ZKe as te,JKe as tf,RQe as tg,qL as th,MLe as ti,UNe as tj,TLe as tk,ALe as tl,KJe as tm,rYe as tn,fp as to,On as tp,Kme as tq,YKe as tr,XKe as ts,u5e as tt,l5e as tu,EZe as tv,AZe as tw,WQe as tx,btt as ty,ty as tz,Jit as u,ace as v,UL as w,lce as x,eWe as y,pce as z};
